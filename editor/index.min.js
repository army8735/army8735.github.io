!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("stream"),require("buffer"),require("util")):"function"==typeof define&&define.amd?define(["stream","buffer","util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).editor=e(t.require$$0,t.require$$0$1,t.require$$1)}(this,(function(t,e,r){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i,a,o=n(t),s=n(e),l=n(r);function h(t,e,r,n){return new(r||(r=Promise))((function(i,a){function o(t){try{l(n.next(t))}catch(t){a(t)}}function s(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,s)}l((n=n.apply(t,e||[])).next())}))}!function(t){t.Page="page",t.ArtBoard="artBoard",t.Group="group",t.Bitmap="bitmap",t.Text="text",t.Polyline="$polyline"}(i||(i={})),function(t){t[t.None=0]="None",t[t.Straight=1]="Straight",t[t.Mirrored=2]="Mirrored",t[t.Asymmetric=3]="Asymmetric",t[t.Disconnected=4]="Disconnected"}(a||(a={}));var u,c,f,d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p={},g={},m={},y={},v={get exports(){return y},set exports(t){y=t}},b={},_={get exports(){return b},set exports(t){b=t}};function w(){if(u)return b;return u=1,"undefined"==typeof process||!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?_.exports={nextTick:function(t,e,r,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,a,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick((function(){t.call(null,e)}));case 3:return process.nextTick((function(){t.call(null,e,r)}));case 4:return process.nextTick((function(){t.call(null,e,r,n)}));default:for(i=new Array(o-1),a=0;a<i.length;)i[a++]=arguments[a];return process.nextTick((function(){t.apply(null,i)}))}}}:_.exports=process,b}var x,S={},E={get exports(){return S},set exports(t){S=t}};function A(){if(x)return S;x=1;var t,e="object"==typeof Reflect?Reflect:null,r=e&&"function"==typeof e.apply?e.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};t=e&&"function"==typeof e.ownKeys?e.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var n=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}E.exports=i,S.once=function(t,e){return new Promise((function(r,n){function i(r){t.removeListener(e,a),n(r)}function a(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}p(t,e,a,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&p(t,"error",e,r)}(t,i,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function s(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function l(t,e,r,n){var i,a,l,h;if(o(r),void 0===(a=t._events)?(a=t._events=Object.create(null),t._eventsCount=0):(void 0!==a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),l=a[e]),void 0===l)l=a[e]=r,++t._eventsCount;else if("function"==typeof l?l=a[e]=n?[r,l]:[l,r]:n?l.unshift(r):l.push(r),(i=s(t))>0&&l.length>i&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,h=u,console&&console.warn&&console.warn(h)}return t}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=h.bind(n);return i.listener=r,n.wrapFn=i,i}function c(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):d(i,i.length)}function f(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function d(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function p(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(a){n.once&&t.removeEventListener(e,i),r(a)}))}}return Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||n(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return s(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=a[t];if(void 0===l)return!1;if("function"==typeof l)r(l,this,e);else{var h=l.length,u=d(l,h);for(n=0;n<h;++n)r(u[n],this,e)}return!0},i.prototype.addListener=function(t,e){return l(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return l(this,t,e,!0)},i.prototype.once=function(t,e){return o(e),this.on(t,u(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,u(this,t,e)),this},i.prototype.removeListener=function(t,e){var r,n,i,a,s;if(o(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){s=r[a].listener,i=a;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(i=a[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},i.prototype.listeners=function(t){return c(this,t,!0)},i.prototype.rawListeners=function(t){return c(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]},S}var C,k={},T={get exports(){return k},set exports(t){k=t}};function R(){return C||(C=1,function(t){t.exports=o.default}(T)),k}var O,I={},M={get exports(){return I},set exports(t){I=t}};function L(){return O||(O=1,function(t,e){var r=s.default,n=r.Buffer;function i(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=a),i(n,a),a.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},a.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}}(M,I)),I}var N,F={};function P(){if(N)return F;function t(t){return Object.prototype.toString.call(t)}return N=1,F.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},F.isBoolean=function(t){return"boolean"==typeof t},F.isNull=function(t){return null===t},F.isNullOrUndefined=function(t){return null==t},F.isNumber=function(t){return"number"==typeof t},F.isString=function(t){return"string"==typeof t},F.isSymbol=function(t){return"symbol"==typeof t},F.isUndefined=function(t){return void 0===t},F.isRegExp=function(e){return"[object RegExp]"===t(e)},F.isObject=function(t){return"object"==typeof t&&null!==t},F.isDate=function(e){return"[object Date]"===t(e)},F.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},F.isFunction=function(t){return"function"==typeof t},F.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},F.isBuffer=s.default.Buffer.isBuffer,F}var B,D,U={},z={get exports(){return U},set exports(t){U=t}},j={},W={get exports(){return j},set exports(t){j=t}};function X(){return D||(D=1,function(t){try{var e=require("util");if("function"!=typeof e.inherits)throw"";t.exports=e.inherits}catch(e){t.exports=(B||(B=1,"function"==typeof Object.create?W.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:W.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}),j)}}(z)),U}var H,G,Y,Z,V,q,J,K,$,Q={},tt={get exports(){return Q},set exports(t){Q=t}};function et(){return H||(H=1,function(t){var e=L().Buffer,r=l.default;t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return e.alloc(0);for(var r,n,i,a=e.allocUnsafe(t>>>0),o=this.head,s=0;o;)r=o.data,n=a,i=s,r.copy(n,i),s+=o.data.length,o=o.next;return a},t}(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})}(tt)),Q}function rt(){if(Y)return G;Y=1;var t=w();function e(t,e){t.emit("error",e)}return G={destroy:function(r,n){var i=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(e,this,r)):t.nextTick(e,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,(function(r){!n&&r?i._writableState?i._writableState.errorEmitted||(i._writableState.errorEmitted=!0,t.nextTick(e,i,r)):t.nextTick(e,i,r):n&&n(r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}},G}function nt(){if(J)return q;J=1;var t=w();function e(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}(e,t)}}q=g;var r,n=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:t.nextTick;g.WritableState=p;var i=Object.create(P());i.inherits=X();var a={deprecate:V?Z:(V=1,Z=l.default.deprecate)},o=R(),s=L().Buffer,h=(void 0!==d?d:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var u,c=rt();function f(){}function p(i,a){r=r||it(),i=i||{};var o=a instanceof r;this.objectMode=!!i.objectMode,o&&(this.objectMode=this.objectMode||!!i.writableObjectMode);var s=i.highWaterMark,l=i.writableHighWaterMark,h=this.objectMode?16:16384;this.highWaterMark=s||0===s?s:o&&(l||0===l)?l:h,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=!1===i.decodeStrings;this.decodeStrings=!u,this.defaultEncoding=i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,r){var i=e._writableState,a=i.sync,o=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),r)!function(e,r,n,i,a){--r.pendingcb,n?(t.nextTick(a,i),t.nextTick(x,e,r),e._writableState.errorEmitted=!0,e.emit("error",i)):(a(i),e._writableState.errorEmitted=!0,e.emit("error",i),x(e,r))}(e,i,a,r,o);else{var s=b(i);s||i.corked||i.bufferProcessing||!i.bufferedRequest||v(e,i),a?n(y,e,i,s,o):y(e,i,s,o)}}(a,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function g(t){if(r=r||it(),!(u.call(g,this)||this instanceof r))return new g(t);this._writableState=new p(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function m(t,e,r,n,i,a,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function y(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),x(t,e)}function v(t,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var i=r.bufferedRequestCount,a=new Array(i),o=r.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)a[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;a.allBuffers=l,m(t,r,!0,r.length,a,"",o.finish),r.pendingcb++,r.lastBufferedRequest=null,o.next?(r.corkedRequestsFree=o.next,o.next=null):r.corkedRequestsFree=new e(r),r.bufferedRequestCount=0}else{for(;n;){var h=n.chunk,u=n.encoding,c=n.callback;if(m(t,r,!1,r.objectMode?1:h.length,h,u,c),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function b(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),x(t,e)}))}function x(e,r){var n=b(r);return n&&(!function(e,r){r.prefinished||r.finalCalled||("function"==typeof e._final?(r.pendingcb++,r.finalCalled=!0,t.nextTick(_,e,r)):(r.prefinished=!0,e.emit("prefinish")))}(e,r),0===r.pendingcb&&(r.finished=!0,e.emit("finish"))),n}return i.inherits(g,o),p.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(p.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(t){return!!u.call(this,t)||this===g&&(t&&t._writableState instanceof p)}})):u=function(t){return t instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,r,n){var i,a=this._writableState,o=!1,l=!a.objectMode&&(i=e,s.isBuffer(i)||i instanceof h);return l&&!s.isBuffer(e)&&(e=function(t){return s.from(t)}(e)),"function"==typeof r&&(n=r,r=null),l?r="buffer":r||(r=a.defaultEncoding),"function"!=typeof n&&(n=f),a.ended?function(e,r){var n=new Error("write after end");e.emit("error",n),t.nextTick(r,n)}(this,n):(l||function(e,r,n,i){var a=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||r.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),t.nextTick(i,o),a=!1),a}(this,a,e,n))&&(a.pendingcb++,o=function(t,e,r,n,i,a){if(!r){var o=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=s.from(e,r));return e}(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var l=e.objectMode?1:n.length;e.length+=l;var h=e.length<e.highWaterMark;h||(e.needDrain=!0);if(e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:a,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,l,n,i,a);return h}(this,a,l,e,r,n)),o},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||v(this,t))},g.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,r,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,r=null):"function"==typeof r&&(n=r,r=null),null!=e&&this.write(e,r),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,r,n){r.ending=!0,x(e,r),n&&(r.finished?t.nextTick(n):e.once("finish",n));r.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),g.prototype.destroy=c.destroy,g.prototype._undestroy=c.undestroy,g.prototype._destroy=function(t,e){this.end(),e(t)},q}function it(){if($)return K;$=1;var t=w(),e=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};K=l;var r=Object.create(P());r.inherits=X();var n=gt(),i=nt();r.inherits(l,n);for(var a=e(i.prototype),o=0;o<a.length;o++){var s=a[o];l.prototype[s]||(l.prototype[s]=i.prototype[s])}function l(t){if(!(this instanceof l))return new l(t);n.call(this,t),i.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||t.nextTick(u,this)}function u(t){t.end()}return Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),l.prototype._destroy=function(e,r){this.push(null),this.end(),t.nextTick(r,e)},K}var at,ot,st,lt,ht,ut,ct,ft,dt={};function pt(){if(at)return dt;at=1;var t=L().Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(r){var n;switch(this.encoding=function(r){var n=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(r);if("string"!=typeof n&&(t.isEncoding===e||!e(r)))throw new Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=a,this.end=o,n=4;break;case"utf8":this.fillLast=i,n=4;break;case"base64":this.text=s,this.end=l,n=3;break;default:return this.write=h,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(n)}function n(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function i(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function a(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function o(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function s(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function u(t){return t&&t.length?this.write(t):""}return dt.StringDecoder=r,r.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},r.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},r.prototype.text=function(t,e){var r=function(t,e,r){var i=e.length-1;if(i<r)return 0;var a=n(e[i]);if(a>=0)return a>0&&(t.lastNeed=a-1),a;if(--i<r||-2===a)return 0;if(a=n(e[i]),a>=0)return a>0&&(t.lastNeed=a-2),a;if(--i<r||-2===a)return 0;if(a=n(e[i]),a>=0)return a>0&&(2===a?a=0:t.lastNeed=a-3),a;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},r.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length},dt}function gt(){if(st)return ot;st=1;var t=w();ot=b;var e,r=function(){if(f)return c;f=1;var t={}.toString;return c=Array.isArray||function(e){return"[object Array]"==t.call(e)}}();b.ReadableState=v,A().EventEmitter;var n=function(t,e){return t.listeners(e).length},i=R(),a=L().Buffer,o=(void 0!==d?d:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var s=Object.create(P());s.inherits=X();var h=l.default,u=void 0;u=h&&h.debuglog?h.debuglog("stream"):function(){};var p,g=et(),m=rt();s.inherits(b,i);var y=["error","close","destroy","pause","resume"];function v(t,r){t=t||{};var n=r instanceof(e=e||it());this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(a||0===a)?a:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=pt().StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(e=e||it(),!(this instanceof b))return new b(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function _(t,e,r,n,i){var s,l=t._readableState;null===e?(l.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,C(t)}(t,l)):(i||(s=function(t,e){var r;n=e,a.isBuffer(n)||n instanceof o||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(l,e)),s?t.emit("error",s):l.objectMode||e&&e.length>0?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),n?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!r?(e=l.decoder.write(e),l.objectMode||0!==e.length?x(t,l,e,!1):T(t,l)):x(t,l,e,!1))):n||(l.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(l)}function x(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&C(t)),T(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=a.from(t,e),e=""),r=!0),_(this,t,e,!1,r)},b.prototype.unshift=function(t){return _(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=pt().StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var S=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=S?t=S:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(e){var r=e._readableState;r.needReadable=!1,r.emittedReadable||(u("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?t.nextTick(k,e):k(e))}function k(t){u("emit readable"),t.emit("readable"),N(t)}function T(e,r){r.readingMore||(r.readingMore=!0,t.nextTick(O,e,r))}function O(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(u("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function I(t){u("readable nexttick read 0"),t.read(0)}function M(t,e){e.reading||(u("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(u("flow",e.flowing);e.flowing&&null!==t.read(););}function F(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),0===(t-=o)){o===a.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=a.slice(o));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=a.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function B(e){var r=e._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,t.nextTick(D,r,e))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function U(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}return b.prototype.read=function(t){u("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return u("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?B(this):C(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&B(this),null;var n,i=e.needReadable;return u("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&u("length less than watermark",i=!0),e.ended||e.reading?u("reading or ended",i=!1):i&&(u("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(r,e))),null===(n=t>0?F(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&B(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,i){var a=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,i);var s=(!i||!1!==i.end)&&e!==process.stdout&&e!==process.stderr?h:v;function l(t,r){u("onunpipe"),t===a&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),e.removeListener("close",m),e.removeListener("finish",y),e.removeListener("drain",c),e.removeListener("error",g),e.removeListener("unpipe",l),a.removeListener("end",h),a.removeListener("end",v),a.removeListener("data",p),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function h(){u("onend"),e.end()}o.endEmitted?t.nextTick(s):a.once("end",s),e.on("unpipe",l);var c=function(t){return function(){var e=t._readableState;u("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&n(t,"data")&&(e.flowing=!0,N(t))}}(a);e.on("drain",c);var f=!1;var d=!1;function p(t){u("ondata"),d=!1,!1!==e.write(t)||d||((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!f&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++,d=!0),a.pause())}function g(t){u("onerror",t),v(),e.removeListener("error",g),0===n(e,"error")&&e.emit("error",t)}function m(){e.removeListener("finish",y),v()}function y(){u("onfinish"),e.removeListener("close",m),v()}function v(){u("unpipe"),a.unpipe(e)}return a.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?r(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(e,"error",g),e.once("close",m),e.once("finish",y),e.emit("pipe",a),o.flowing||(u("pipe resume"),a.resume()),e},b.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=U(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},b.prototype.on=function(e,r){var n=i.prototype.on.call(this,e,r);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var a=this._readableState;a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&C(this):t.nextTick(I,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!0,function(e,r){r.resumeScheduled||(r.resumeScheduled=!0,t.nextTick(M,e,r))}(this,e)),this},b.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var a=0;a<y.length;a++)t.on(y[a],this.emit.bind(this,y[a]));return this._read=function(e){u("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=F,ot}function mt(){if(ht)return lt;ht=1,lt=n;var t=it(),e=Object.create(P());function r(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function n(e){if(!(this instanceof n))return new n(e);t.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",i)}function i(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){a(t,e,r)})):a(this,null,null)}function a(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}return e.inherits=X(),e.inherits(n,t),n.prototype.push=function(e,r){return this._transformState.needTransform=!1,t.prototype.push.call(this,e,r)},n.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},n.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},n.prototype._destroy=function(e,r){var n=this;t.prototype._destroy.call(this,e,(function(t){r(t),n.emit("close")}))},lt}function yt(){return ft||(ft=1,function(t,e){var r=o.default;"disable"===process.env.READABLE_STREAM&&r?(t.exports=r,(e=t.exports=r.Readable).Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.Stream=r):((e=t.exports=gt()).Stream=r||e,e.Readable=e,e.Writable=nt(),e.Duplex=it(),e.Transform=mt(),e.PassThrough=function(){if(ct)return ut;ct=1,ut=r;var t=mt(),e=Object.create(P());function r(e){if(!(this instanceof r))return new r(e);t.call(this,e)}return e.inherits=X(),e.inherits(r,t),r.prototype._transform=function(t,e,r){r(null,t)},ut}())}(v,y)),y}if(m.base64=!0,m.array=!0,m.string=!0,m.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,m.nodebuffer="undefined"!=typeof Buffer,m.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)m.blob=!1;else{var vt=new ArrayBuffer(0);try{m.blob=0===new Blob([vt],{type:"application/zip"}).size}catch(t){try{var bt=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);bt.append(vt),m.blob=0===bt.getBlob("application/zip").size}catch(t){m.blob=!1}}}try{m.nodestream=!!yt().Readable}catch(t){m.nodestream=!1}var _t,wt={};function xt(){if(_t)return wt;_t=1;var t=It(),e=m,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return wt.encode=function(e){for(var n,i,a,o,s,l,h,u=[],c=0,f=e.length,d=f,p="string"!==t.getTypeOf(e);c<e.length;)d=f-c,p?(n=e[c++],i=c<f?e[c++]:0,a=c<f?e[c++]:0):(n=e.charCodeAt(c++),i=c<f?e.charCodeAt(c++):0,a=c<f?e.charCodeAt(c++):0),o=n>>2,s=(3&n)<<4|i>>4,l=d>1?(15&i)<<2|a>>6:64,h=d>2?63&a:64,u.push(r.charAt(o)+r.charAt(s)+r.charAt(l)+r.charAt(h));return u.join("")},wt.decode=function(t){var n,i,a,o,s,l,h=0,u=0,c="data:";if(t.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");var f,d=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===r.charAt(64)&&d--,t.charAt(t.length-2)===r.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=e.uint8array?new Uint8Array(0|d):new Array(0|d);h<t.length;)n=r.indexOf(t.charAt(h++))<<2|(o=r.indexOf(t.charAt(h++)))>>4,i=(15&o)<<4|(s=r.indexOf(t.charAt(h++)))>>2,a=(3&s)<<6|(l=r.indexOf(t.charAt(h++))),f[u++]=n,64!==s&&(f[u++]=i),64!==l&&(f[u++]=a);return f},wt}var St,Et,At,Ct,kt={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}};var Tt=null;Tt="undefined"!=typeof Promise?Promise:function(){if(Ct)return At;Ct=1;var t=function(){if(Et)return St;Et=1;var t,e,r=d.MutationObserver||d.WebKitMutationObserver;if(process.browser)if(r){var n=0,i=new r(l),a=d.document.createTextNode("");i.observe(a,{characterData:!0}),t=function(){a.data=n=++n%2}}else if(d.setImmediate||void 0===d.MessageChannel)t="document"in d&&"onreadystatechange"in d.document.createElement("script")?function(){var t=d.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},d.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var o=new d.MessageChannel;o.port1.onmessage=l,t=function(){o.port2.postMessage(0)}}else t=function(){process.nextTick(l)};var s=[];function l(){var t,r;e=!0;for(var n=s.length;n;){for(r=s,s=[],t=-1;++t<n;)r[t]();n=s.length}e=!1}return St=function(r){1!==s.push(r)||e||t()}}();function e(){}var r={},n=["REJECTED"],i=["FULFILLED"],a=["PENDING"];if(!process.browser)var o=["UNHANDLED"];function s(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,process.browser||(this.handled=o),t!==e&&c(this,t)}function l(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function h(e,n,i){t((function(){var t;try{t=n(i)}catch(t){return r.reject(e,t)}t===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,t)}))}function u(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function c(t,e){var n=!1;function i(e){n||(n=!0,r.reject(t,e))}function a(e){n||(n=!0,r.resolve(t,e))}var o=f((function(){e(a,i)}));"error"===o.status&&i(o.value)}function f(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}return At=s,s.prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){throw r}))}))},s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,r){if("function"!=typeof t&&this.state===i||"function"!=typeof r&&this.state===n)return this;var s=new this.constructor(e);return process.browser||this.handled===o&&(this.handled=null),this.state!==a?h(s,this.state===i?t:r,this.outcome):this.queue.push(new l(s,t,r)),s},l.prototype.callFulfilled=function(t){r.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){r.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},r.resolve=function(t,e){var n=f(u,e);if("error"===n.status)return r.reject(t,n.value);var a=n.value;if(a)c(t,a);else{t.state=i,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].callFulfilled(e)}return t},r.reject=function(e,r){e.state=n,e.outcome=r,process.browser||e.handled===o&&t((function(){e.handled===o&&process.emit("unhandledRejection",r,e)}));for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callRejected(r);return e},s.resolve=function(t){return t instanceof this?t:r.resolve(new this(e),t)},s.reject=function(t){var n=new this(e);return r.reject(n,t)},s.all=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,a=!1;if(!i)return this.resolve([]);for(var o=new Array(i),s=0,l=-1,h=new this(e);++l<i;)u(t[l],l);return h;function u(t,e){n.resolve(t).then((function(t){o[e]=t,++s!==i||a||(a=!0,r.resolve(h,o))}),(function(t){a||(a=!0,r.reject(h,t))}))}},s.race=function(t){var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,a=!1;if(!i)return this.resolve([]);for(var o,s=-1,l=new this(e);++s<i;)o=t[s],n.resolve(o).then((function(t){a||(a=!0,r.resolve(l,t))}),(function(t){a||(a=!0,r.reject(l,t))}));return l},At}();var Rt,Ot={Promise:Tt};function It(){return Rt||(Rt=1,function(t){var e=m,r=xt(),n=kt,i=Ot;function a(t){return t}function o(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}t.newBlob=function(e,r){t.checkSupport("blob");try{return new Blob([e],{type:r})}catch(t){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(r)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var s={stringifyByChunk:function(t,e,r){var n=[],i=0,a=t.length;if(a<=r)return String.fromCharCode.apply(null,t);for(;i<a;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,a)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,a)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return e.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return e.nodebuffer&&1===String.fromCharCode.apply(null,n.allocBuffer(1)).length}catch(t){return!1}}()}};function l(e){var r=65536,n=t.getTypeOf(e),i=!0;if("uint8array"===n?i=s.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=s.applyCanBeUsed.nodebuffer),i)for(;r>1;)try{return s.stringifyByChunk(e,n,r)}catch(t){r=Math.floor(r/2)}return s.stringifyByChar(e)}function h(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}t.applyFromCharCode=l;var u={};u.string={string:a,array:function(t){return o(t,new Array(t.length))},arraybuffer:function(t){return u.string.uint8array(t).buffer},uint8array:function(t){return o(t,new Uint8Array(t.length))},nodebuffer:function(t){return o(t,n.allocBuffer(t.length))}},u.array={string:l,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(t)}},u.arraybuffer={string:function(t){return l(new Uint8Array(t))},array:function(t){return h(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return n.newBufferFrom(new Uint8Array(t))}},u.uint8array={string:l,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return n.newBufferFrom(t)}},u.nodebuffer={string:l,array:function(t){return h(t,new Array(t.length))},arraybuffer:function(t){return u.nodebuffer.uint8array(t).buffer},uint8array:function(t){return h(t,new Uint8Array(t.length))},nodebuffer:a},t.transformTo=function(e,r){if(r||(r=""),!e)return r;t.checkSupport(e);var n=t.getTypeOf(r);return u[n][e](r)},t.resolve=function(t){for(var e=t.split("/"),r=[],n=0;n<e.length;n++){var i=e[n];"."===i||""===i&&0!==n&&n!==e.length-1||(".."===i?r.pop():r.push(i))}return r.join("/")},t.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":e.nodebuffer&&n.isBuffer(t)?"nodebuffer":e.uint8array&&t instanceof Uint8Array?"uint8array":e.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(t){if(!e[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},t.delay=function(t,e,r){setImmediate((function(){t.apply(r||null,e||[])}))},t.inherits=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r},t.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},t.prepareContent=function(n,a,s,l,h){return i.Promise.resolve(a).then((function(t){return e.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new i.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(a){var u,c=t.getTypeOf(a);return c?("arraybuffer"===c?a=t.transformTo("uint8array",a):"string"===c&&(h?a=r.decode(a):s&&!0!==l&&(a=o(u=a,e.uint8array?new Uint8Array(u.length):new Array(u.length)))),a):i.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}}(g)),g}function Mt(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}!function(t,e){if(!t.setImmediate){var r,n,i,a,o,s=1,l={},h=!1,u=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,"[object process]"==={}.toString.call(t.process)?r=function(t){process.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){i.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,r=function(t){var e=u.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",o=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),r=function(e){t.postMessage(a+e,"*")}),c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[s]=i,r(s),s++},c.clearImmediate=f}function f(t){delete l[t]}function d(t){if(h)setTimeout(d,0,t);else{var r=l[t];if(r){h=!0;try{!function(t){var r=t.callback,n=t.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(e,n)}}(r)}finally{f(t),h=!1}}}}}("undefined"==typeof self?d:self),Mt.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}};var Lt=Mt;!function(t){for(var e=It(),r=m,n=kt,i=Lt,a=new Array(256),o=0;o<256;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;a[254]=a[254]=1;function s(){i.call(this,"utf-8 decode"),this.leftOver=null}function l(){i.call(this,"utf-8 encode")}t.utf8encode=function(t){return r.nodebuffer?n.newBufferFrom(t,"utf-8"):function(t){var e,n,i,a,o,s=t.length,l=0;for(a=0;a<s;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(l):new Array(l),o=0,a=0;o<l;a++)55296==(64512&(n=t.charCodeAt(a)))&&a+1<s&&56320==(64512&(i=t.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(i-56320),a++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e}(t)},t.utf8decode=function(t){return r.nodebuffer?e.transformTo("nodebuffer",t).toString("utf-8"):function(t){var r,n,i,o,s=t.length,l=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)l[n++]=i;else if((o=a[i])>4)l[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),e.applyFromCharCode(l)}(t=e.transformTo(r.uint8array?"uint8array":"array",t))},e.inherits(s,i),s.prototype.processChunk=function(n){var i=e.transformTo(r.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=i;(i=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),i.set(o,this.leftOver.length)}else i=this.leftOver.concat(i);this.leftOver=null}var s=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}(i),l=i;s!==i.length&&(r.uint8array?(l=i.subarray(0,s),this.leftOver=i.subarray(s,i.length)):(l=i.slice(0,s),this.leftOver=i.slice(s,i.length))),this.push({data:t.utf8decode(l),meta:n.meta})},s.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=s,e.inherits(l,i),l.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=l}(p);var Nt=Lt,Ft=It();function Pt(t){Nt.call(this,"ConvertWorker to "+t),this.destType=t}Ft.inherits(Pt,Nt),Pt.prototype.processChunk=function(t){this.push({data:Ft.transformTo(this.destType,t.data),meta:t.meta})};var Bt,Dt,Ut=Pt;var zt=It(),jt=Ut,Wt=Lt,Xt=xt(),Ht=Ot,Gt=null;if(m.nodestream)try{Gt=function(){if(Dt)return Bt;Dt=1;var t=yt().Readable;function e(e,r,n){t.call(this,r),this._helper=e;var i=this;e.on("data",(function(t,e){i.push(t)||i._helper.pause(),n&&n(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}return It().inherits(e,t),e.prototype._read=function(){this._helper.resume()},Bt=e}()}catch(t){}function Yt(t,e){return new Ht.Promise((function(r,n){var i=[],a=t._internalType,o=t._outputType,s=t._mimeType;t.on("data",(function(t,r){i.push(t),e&&e(r)})).on("error",(function(t){i=[],n(t)})).on("end",(function(){try{var t=function(t,e,r){switch(t){case"blob":return zt.newBlob(zt.transformTo("arraybuffer",e),r);case"base64":return Xt.encode(e);default:return zt.transformTo(t,e)}}(o,function(t,e){var r,n=0,i=null,a=0;for(r=0;r<e.length;r++)a+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(a),r=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(a,i),s);r(t)}catch(t){n(t)}i=[]})).resume()}))}function Zt(t,e,r){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=e,this._mimeType=r,zt.checkSupport(n),this._worker=t.pipe(new jt(n)),t.lock()}catch(t){this._worker=new Wt("error"),this._worker.error(t)}}Zt.prototype={accumulate:function(t){return Yt(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){zt.delay(e,arguments,r)})),this},resume:function(){return zt.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(zt.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Gt(this,{objectMode:"nodebuffer"!==this._outputType},t)}};var Vt=Zt,qt={base64:!1,binary:!1,dir:!1,createFolders:!0,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null},Jt=It(),Kt=Lt;function $t(t){Kt.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=Jt.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}Jt.inherits($t,Kt),$t.prototype.cleanUp=function(){Kt.prototype.cleanUp.call(this),this.data=null},$t.prototype.resume=function(){return!!Kt.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,Jt.delay(this._tickAndRepeat,[],this)),!0)},$t.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(Jt.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},$t.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};var Qt=$t,te=It();var ee=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();var re=function(t,e){return void 0!==t&&t.length?"string"!==te.getTypeOf(t)?function(t,e,r,n){var i=ee,a=n+r;t^=-1;for(var o=n;o<a;o++)t=t>>>8^i[255&(t^e[o])];return-1^t}(0|e,t,t.length,0):function(t,e,r,n){var i=ee,a=n+r;t^=-1;for(var o=n;o<a;o++)t=t>>>8^i[255&(t^e.charCodeAt(o))];return-1^t}(0|e,t,t.length,0):0},ne=Lt,ie=re;function ae(){ne.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}It().inherits(ae,ne),ae.prototype.processChunk=function(t){this.streamInfo.crc32=ie(t.data,this.streamInfo.crc32||0),this.push(t)};var oe=ae,se=It(),le=Lt;function he(t){le.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}se.inherits(he,le),he.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}le.prototype.processChunk.call(this,t)};var ue=Ot,ce=Qt,fe=oe,de=he;function pe(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}pe.prototype={getContentWorker:function(){var t=new ce(ue.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new de("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new ce(ue.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},pe.createWorkerFrom=function(t,e,r){return t.pipe(new fe).pipe(new de("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new de("compressedSize")).withStreamInfo("compression",e)};var ge=pe,me=Vt,ye=Qt,ve=p,be=ge,_e=Lt,we=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};we.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");var n="string"===(r=t.toLowerCase())||"text"===r;"binarystring"!==r&&"text"!==r||(r="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(e=e.pipe(new ve.Utf8EncodeWorker)),!i&&n&&(e=e.pipe(new ve.Utf8DecodeWorker))}catch(t){(e=new _e("error")).error(t)}return new me(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof be&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new ve.Utf8EncodeWorker)),be.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof be?this._data.getContentWorker():this._data instanceof _e?this._data:new ye(this._data)}};for(var xe=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],Se=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Ee=0;Ee<xe.length;Ee++)we.prototype[xe[Ee]]=Se;var Ae=we,Ce={},ke={},Te={},Re={};!function(t){var e="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},t.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,o;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(o=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],o.set(a,i),i+=a.length;return o}},i={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,n)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(e)}(Re);var Oe={},Ie={},Me={},Le=Re,Ne=0,Fe=1;function Pe(t){for(var e=t.length;--e>=0;)t[e]=0}var Be=0,De=29,Ue=256,ze=Ue+1+De,je=30,We=19,Xe=2*ze+1,He=15,Ge=16,Ye=7,Ze=256,Ve=16,qe=17,Je=18,Ke=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$e=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Qe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],tr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],er=new Array(2*(ze+2));Pe(er);var rr=new Array(2*je);Pe(rr);var nr=new Array(512);Pe(nr);var ir=new Array(256);Pe(ir);var ar=new Array(De);Pe(ar);var or,sr,lr,hr=new Array(je);function ur(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function cr(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function fr(t){return t<256?nr[t]:nr[256+(t>>>7)]}function dr(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function pr(t,e,r){t.bi_valid>Ge-r?(t.bi_buf|=e<<t.bi_valid&65535,dr(t,t.bi_buf),t.bi_buf=e>>Ge-t.bi_valid,t.bi_valid+=r-Ge):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function gr(t,e,r){pr(t,r[2*e],r[2*e+1])}function mr(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function yr(t,e,r){var n,i,a=new Array(He+1),o=0;for(n=1;n<=He;n++)a[n]=o=o+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=mr(a[s]++,s))}}function vr(t){var e;for(e=0;e<ze;e++)t.dyn_ltree[2*e]=0;for(e=0;e<je;e++)t.dyn_dtree[2*e]=0;for(e=0;e<We;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Ze]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function br(t){t.bi_valid>8?dr(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _r(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function wr(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&_r(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!_r(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function xr(t,e,r){var n,i,a,o,s=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0===n?gr(t,i,e):(gr(t,(a=ir[i])+Ue+1,e),0!==(o=Ke[a])&&pr(t,i-=ar[a],o),gr(t,a=fr(--n),r),0!==(o=$e[a])&&pr(t,n-=hr[a],o))}while(s<t.last_lit);gr(t,Ze,e)}function Sr(t,e){var r,n,i,a=e.dyn_tree,o=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=Xe,r=0;r<l;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)a[2*(i=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=o[2*i+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)wr(t,a,r);i=l;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],wr(t,a,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,a[2*i]=a[2*r]+a[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,a[2*r+1]=a[2*n+1]=i,t.heap[1]=i++,wr(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,a,o,s,l=e.dyn_tree,h=e.max_code,u=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(a=0;a<=He;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<Xe;r++)(a=l[2*l[2*(n=t.heap[r])+1]+1]+1)>p&&(a=p,g++),l[2*n+1]=a,n>h||(t.bl_count[a]++,o=0,n>=d&&(o=f[n-d]),s=l[2*n],t.opt_len+=s*(a+o),c&&(t.static_len+=s*(u[2*n+1]+o)));if(0!==g){do{for(a=p-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(a=p;0!==a;a--)for(n=t.bl_count[a];0!==n;)(i=t.heap[--r])>h||(l[2*i+1]!==a&&(t.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),n--)}}(t,e),yr(a,h,t.bl_count)}function Er(t,e,r){var n,i,a=-1,o=e[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=o,o=e[2*(n+1)+1],++s<l&&i===o||(s<h?t.bl_tree[2*i]+=s:0!==i?(i!==a&&t.bl_tree[2*i]++,t.bl_tree[2*Ve]++):s<=10?t.bl_tree[2*qe]++:t.bl_tree[2*Je]++,s=0,a=i,0===o?(l=138,h=3):i===o?(l=6,h=3):(l=7,h=4))}function Ar(t,e,r){var n,i,a=-1,o=e[1],s=0,l=7,h=4;for(0===o&&(l=138,h=3),n=0;n<=r;n++)if(i=o,o=e[2*(n+1)+1],!(++s<l&&i===o)){if(s<h)do{gr(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(gr(t,i,t.bl_tree),s--),gr(t,Ve,t.bl_tree),pr(t,s-3,2)):s<=10?(gr(t,qe,t.bl_tree),pr(t,s-3,3)):(gr(t,Je,t.bl_tree),pr(t,s-11,7));s=0,a=i,0===o?(l=138,h=3):i===o?(l=6,h=3):(l=7,h=4)}}Pe(hr);var Cr=!1;function kr(t,e,r,n){pr(t,(Be<<1)+(n?1:0),3),function(t,e,r,n){br(t),n&&(dr(t,r),dr(t,~r)),Le.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}Me._tr_init=function(t){Cr||(!function(){var t,e,r,n,i,a=new Array(He+1);for(r=0,n=0;n<De-1;n++)for(ar[n]=r,t=0;t<1<<Ke[n];t++)ir[r++]=n;for(ir[r-1]=n,i=0,n=0;n<16;n++)for(hr[n]=i,t=0;t<1<<$e[n];t++)nr[i++]=n;for(i>>=7;n<je;n++)for(hr[n]=i<<7,t=0;t<1<<$e[n]-7;t++)nr[256+i++]=n;for(e=0;e<=He;e++)a[e]=0;for(t=0;t<=143;)er[2*t+1]=8,t++,a[8]++;for(;t<=255;)er[2*t+1]=9,t++,a[9]++;for(;t<=279;)er[2*t+1]=7,t++,a[7]++;for(;t<=287;)er[2*t+1]=8,t++,a[8]++;for(yr(er,ze+1,a),t=0;t<je;t++)rr[2*t+1]=5,rr[2*t]=mr(t,5);or=new ur(er,Ke,Ue+1,ze,He),sr=new ur(rr,$e,0,je,He),lr=new ur(new Array(0),Qe,0,We,Ye)}(),Cr=!0),t.l_desc=new cr(t.dyn_ltree,or),t.d_desc=new cr(t.dyn_dtree,sr),t.bl_desc=new cr(t.bl_tree,lr),t.bi_buf=0,t.bi_valid=0,vr(t)},Me._tr_stored_block=kr,Me._tr_flush_block=function(t,e,r,n){var i,a,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return Ne;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return Fe;for(e=32;e<Ue;e++)if(0!==t.dyn_ltree[2*e])return Fe;return Ne}(t)),Sr(t,t.l_desc),Sr(t,t.d_desc),o=function(t){var e;for(Er(t,t.dyn_ltree,t.l_desc.max_code),Er(t,t.dyn_dtree,t.d_desc.max_code),Sr(t,t.bl_desc),e=We-1;e>=3&&0===t.bl_tree[2*tr[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==e?kr(t,e,r,n):4===t.strategy||a===i?(pr(t,2+(n?1:0),3),xr(t,er,rr)):(pr(t,4+(n?1:0),3),function(t,e,r,n){var i;for(pr(t,e-257,5),pr(t,r-1,5),pr(t,n-4,4),i=0;i<n;i++)pr(t,t.bl_tree[2*tr[i]+1],3);Ar(t,t.dyn_ltree,e-1),Ar(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),xr(t,t.dyn_ltree,t.dyn_dtree)),vr(t),n&&br(t)},Me._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(ir[r]+Ue+1)]++,t.dyn_dtree[2*fr(e)]++),t.last_lit===t.lit_bufsize-1},Me._tr_align=function(t){pr(t,2,3),gr(t,Ze,er),function(t){16===t.bi_valid?(dr(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)};var Tr=function(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,o=0;0!==r;){r-=o=r>2e3?2e3:r;do{a=a+(i=i+e[n++]|0)|0}while(--o);i%=65521,a%=65521}return i|a<<16|0};var Rr=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();var Or,Ir=function(t,e,r,n){var i=Rr,a=n+r;t^=-1;for(var o=n;o<a;o++)t=t>>>8^i[255&(t^e[o])];return-1^t},Mr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Lr=Re,Nr=Me,Fr=Tr,Pr=Ir,Br=Mr,Dr=0,Ur=4,zr=0,jr=-2,Wr=-1,Xr=4,Hr=2,Gr=8,Yr=9,Zr=286,Vr=30,qr=19,Jr=2*Zr+1,Kr=15,$r=3,Qr=258,tn=Qr+$r+1,en=42,rn=103,nn=113,an=666,on=1,sn=2,ln=3,hn=4;function un(t,e){return t.msg=Br[e],e}function cn(t){return(t<<1)-(t>4?9:0)}function fn(t){for(var e=t.length;--e>=0;)t[e]=0}function dn(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(Lr.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function pn(t,e){Nr._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,dn(t.strm)}function gn(t,e){t.pending_buf[t.pending++]=e}function mn(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function yn(t,e){var r,n,i=t.max_chain_length,a=t.strstart,o=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-tn?t.strstart-(t.w_size-tn):0,h=t.window,u=t.w_mask,c=t.prev,f=t.strstart+Qr,d=h[a+o-1],p=h[a+o];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(h[(r=e)+o]===p&&h[r+o-1]===d&&h[r]===h[a]&&h[++r]===h[a+1]){a+=2,r++;do{}while(h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&h[++a]===h[++r]&&a<f);if(n=Qr-(f-a),a=f-Qr,n>o){if(t.match_start=e,o=n,n>=s)break;d=h[a+o-1],p=h[a+o]}}}while((e=c[e&u])>l&&0!=--i);return o<=t.lookahead?o:t.lookahead}function vn(t){var e,r,n,i,a,o,s,l,h,u,c=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=c+(c-tn)){Lr.arraySet(t.window,t.window,c,c,0),t.match_start-=c,t.strstart-=c,t.block_start-=c,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=c?n-c:0}while(--r);e=r=c;do{n=t.prev[--e],t.prev[e]=n>=c?n-c:0}while(--r);i+=c}if(0===t.strm.avail_in)break;if(o=t.strm,s=t.window,l=t.strstart+t.lookahead,h=i,u=void 0,(u=o.avail_in)>h&&(u=h),r=0===u?0:(o.avail_in-=u,Lr.arraySet(s,o.input,o.next_in,u,l),1===o.state.wrap?o.adler=Fr(o.adler,s,u,l):2===o.state.wrap&&(o.adler=Pr(o.adler,s,u,l)),o.next_in+=u,o.total_in+=u,u),t.lookahead+=r,t.lookahead+t.insert>=$r)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+$r-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<$r)););}while(t.lookahead<tn&&0!==t.strm.avail_in)}function bn(t,e){for(var r,n;;){if(t.lookahead<tn){if(vn(t),t.lookahead<tn&&e===Dr)return on;if(0===t.lookahead)break}if(r=0,t.lookahead>=$r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$r-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-tn&&(t.match_length=yn(t,r)),t.match_length>=$r)if(n=Nr._tr_tally(t,t.strstart-t.match_start,t.match_length-$r),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=$r){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$r-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=Nr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(pn(t,!1),0===t.strm.avail_out))return on}return t.insert=t.strstart<$r-1?t.strstart:$r-1,e===Ur?(pn(t,!0),0===t.strm.avail_out?ln:hn):t.last_lit&&(pn(t,!1),0===t.strm.avail_out)?on:sn}function _n(t,e){for(var r,n,i;;){if(t.lookahead<tn){if(vn(t),t.lookahead<tn&&e===Dr)return on;if(0===t.lookahead)break}if(r=0,t.lookahead>=$r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$r-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=$r-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-tn&&(t.match_length=yn(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===$r&&t.strstart-t.match_start>4096)&&(t.match_length=$r-1)),t.prev_length>=$r&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-$r,n=Nr._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-$r),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+$r-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=$r-1,t.strstart++,n&&(pn(t,!1),0===t.strm.avail_out))return on}else if(t.match_available){if((n=Nr._tr_tally(t,0,t.window[t.strstart-1]))&&pn(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return on}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=Nr._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<$r-1?t.strstart:$r-1,e===Ur?(pn(t,!0),0===t.strm.avail_out?ln:hn):t.last_lit&&(pn(t,!1),0===t.strm.avail_out)?on:sn}function wn(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function xn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Gr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Lr.Buf16(2*Jr),this.dyn_dtree=new Lr.Buf16(2*(2*Vr+1)),this.bl_tree=new Lr.Buf16(2*(2*qr+1)),fn(this.dyn_ltree),fn(this.dyn_dtree),fn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Lr.Buf16(Kr+1),this.heap=new Lr.Buf16(2*Zr+1),fn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Lr.Buf16(2*Zr+1),fn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Sn(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Hr,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?en:nn,t.adler=2===e.wrap?0:1,e.last_flush=Dr,Nr._tr_init(e),zr):un(t,jr)}function En(t){var e,r=Sn(t);return r===zr&&((e=t.state).window_size=2*e.w_size,fn(e.head),e.max_lazy_match=Or[e.level].max_lazy,e.good_match=Or[e.level].good_length,e.nice_match=Or[e.level].nice_length,e.max_chain_length=Or[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=$r-1,e.match_available=0,e.ins_h=0),r}function An(t,e,r,n,i,a){if(!t)return jr;var o=1;if(e===Wr&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),i<1||i>Yr||r!==Gr||n<8||n>15||e<0||e>9||a<0||a>Xr)return un(t,jr);8===n&&(n=9);var s=new xn;return t.state=s,s.strm=t,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+$r-1)/$r),s.window=new Lr.Buf8(2*s.w_size),s.head=new Lr.Buf16(s.hash_size),s.prev=new Lr.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Lr.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=a,s.method=r,En(t)}Or=[new wn(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(vn(t),0===t.lookahead&&e===Dr)return on;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,pn(t,!1),0===t.strm.avail_out))return on;if(t.strstart-t.block_start>=t.w_size-tn&&(pn(t,!1),0===t.strm.avail_out))return on}return t.insert=0,e===Ur?(pn(t,!0),0===t.strm.avail_out?ln:hn):(t.strstart>t.block_start&&(pn(t,!1),t.strm.avail_out),on)})),new wn(4,4,8,4,bn),new wn(4,5,16,8,bn),new wn(4,6,32,32,bn),new wn(4,4,16,16,_n),new wn(8,16,32,32,_n),new wn(8,16,128,128,_n),new wn(8,32,128,256,_n),new wn(32,128,258,1024,_n),new wn(32,258,258,4096,_n)],Ie.deflateInit=function(t,e){return An(t,e,Gr,15,8,0)},Ie.deflateInit2=An,Ie.deflateReset=En,Ie.deflateResetKeep=Sn,Ie.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?jr:(t.state.gzhead=e,zr):jr},Ie.deflate=function(t,e){var r,n,i,a;if(!t||!t.state||e>5||e<0)return t?un(t,jr):jr;if(n=t.state,!t.output||!t.input&&0!==t.avail_in||n.status===an&&e!==Ur)return un(t,0===t.avail_out?-5:jr);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===en)if(2===n.wrap)t.adler=0,gn(n,31),gn(n,139),gn(n,8),n.gzhead?(gn(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),gn(n,255&n.gzhead.time),gn(n,n.gzhead.time>>8&255),gn(n,n.gzhead.time>>16&255),gn(n,n.gzhead.time>>24&255),gn(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),gn(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(gn(n,255&n.gzhead.extra.length),gn(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Pr(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(gn(n,0),gn(n,0),gn(n,0),gn(n,0),gn(n,0),gn(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),gn(n,3),n.status=nn);else{var o=Gr+(n.w_bits-8<<4)<<8;o|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(o|=32),o+=31-o%31,n.status=nn,mn(n,o),0!==n.strstart&&(mn(n,t.adler>>>16),mn(n,65535&t.adler)),t.adler=1}if(69===n.status)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>i&&(t.adler=Pr(t.adler,n.pending_buf,n.pending-i,i)),dn(t),i=n.pending,n.pending!==n.pending_buf_size));)gn(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=Pr(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Pr(t.adler,n.pending_buf,n.pending-i,i)),dn(t),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,gn(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(t.adler=Pr(t.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Pr(t.adler,n.pending_buf,n.pending-i,i)),dn(t),i=n.pending,n.pending===n.pending_buf_size)){a=1;break}a=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,gn(n,a)}while(0!==a);n.gzhead.hcrc&&n.pending>i&&(t.adler=Pr(t.adler,n.pending_buf,n.pending-i,i)),0===a&&(n.status=rn)}else n.status=rn;if(n.status===rn&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&dn(t),n.pending+2<=n.pending_buf_size&&(gn(n,255&t.adler),gn(n,t.adler>>8&255),t.adler=0,n.status=nn)):n.status=nn),0!==n.pending){if(dn(t),0===t.avail_out)return n.last_flush=-1,zr}else if(0===t.avail_in&&cn(e)<=cn(r)&&e!==Ur)return un(t,-5);if(n.status===an&&0!==t.avail_in)return un(t,-5);if(0!==t.avail_in||0!==n.lookahead||e!==Dr&&n.status!==an){var s=2===n.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(vn(t),0===t.lookahead)){if(e===Dr)return on;break}if(t.match_length=0,r=Nr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(pn(t,!1),0===t.strm.avail_out))return on}return t.insert=0,e===Ur?(pn(t,!0),0===t.strm.avail_out?ln:hn):t.last_lit&&(pn(t,!1),0===t.strm.avail_out)?on:sn}(n,e):3===n.strategy?function(t,e){for(var r,n,i,a,o=t.window;;){if(t.lookahead<=Qr){if(vn(t),t.lookahead<=Qr&&e===Dr)return on;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=$r&&t.strstart>0&&(n=o[i=t.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){a=t.strstart+Qr;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<a);t.match_length=Qr-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=$r?(r=Nr._tr_tally(t,1,t.match_length-$r),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=Nr._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(pn(t,!1),0===t.strm.avail_out))return on}return t.insert=0,e===Ur?(pn(t,!0),0===t.strm.avail_out?ln:hn):t.last_lit&&(pn(t,!1),0===t.strm.avail_out)?on:sn}(n,e):Or[n.level].func(n,e);if(s!==ln&&s!==hn||(n.status=an),s===on||s===ln)return 0===t.avail_out&&(n.last_flush=-1),zr;if(s===sn&&(1===e?Nr._tr_align(n):5!==e&&(Nr._tr_stored_block(n,0,0,!1),3===e&&(fn(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),dn(t),0===t.avail_out))return n.last_flush=-1,zr}return e!==Ur?zr:n.wrap<=0?1:(2===n.wrap?(gn(n,255&t.adler),gn(n,t.adler>>8&255),gn(n,t.adler>>16&255),gn(n,t.adler>>24&255),gn(n,255&t.total_in),gn(n,t.total_in>>8&255),gn(n,t.total_in>>16&255),gn(n,t.total_in>>24&255)):(mn(n,t.adler>>>16),mn(n,65535&t.adler)),dn(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?zr:1)},Ie.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==en&&69!==e&&73!==e&&91!==e&&e!==rn&&e!==nn&&e!==an?un(t,jr):(t.state=null,e===nn?un(t,-3):zr):jr},Ie.deflateSetDictionary=function(t,e){var r,n,i,a,o,s,l,h,u=e.length;if(!t||!t.state)return jr;if(2===(a=(r=t.state).wrap)||1===a&&r.status!==en||r.lookahead)return jr;for(1===a&&(t.adler=Fr(t.adler,e,u,0)),r.wrap=0,u>=r.w_size&&(0===a&&(fn(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new Lr.Buf8(r.w_size),Lr.arraySet(h,e,u-r.w_size,r.w_size,0),e=h,u=r.w_size),o=t.avail_in,s=t.next_in,l=t.input,t.avail_in=u,t.next_in=0,t.input=e,vn(r);r.lookahead>=$r;){n=r.strstart,i=r.lookahead-($r-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+$r-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=$r-1,vn(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=$r-1,r.match_available=0,t.next_in=s,t.input=l,t.avail_in=o,r.wrap=a,zr},Ie.deflateInfo="pako deflate (from Nodeca project)";var Cn={},kn=Re,Tn=!0,Rn=!0;try{String.fromCharCode.apply(null,[0])}catch(t){Tn=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Rn=!1}for(var On=new kn.Buf8(256),In=0;In<256;In++)On[In]=In>=252?6:In>=248?5:In>=240?4:In>=224?3:In>=192?2:1;function Mn(t,e){if(e<65534&&(t.subarray&&Rn||!t.subarray&&Tn))return String.fromCharCode.apply(null,kn.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}On[254]=On[254]=1,Cn.string2buf=function(t){var e,r,n,i,a,o=t.length,s=0;for(i=0;i<o;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),s+=r<128?1:r<2048?2:r<65536?3:4;for(e=new kn.Buf8(s),a=0,i=0;a<s;i++)55296==(64512&(r=t.charCodeAt(i)))&&i+1<o&&56320==(64512&(n=t.charCodeAt(i+1)))&&(r=65536+(r-55296<<10)+(n-56320),i++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},Cn.buf2binstring=function(t){return Mn(t,t.length)},Cn.binstring2buf=function(t){for(var e=new kn.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},Cn.buf2string=function(t,e){var r,n,i,a,o=e||t.length,s=new Array(2*o);for(n=0,r=0;r<o;)if((i=t[r++])<128)s[n++]=i;else if((a=On[i])>4)s[n++]=65533,r+=a-1;else{for(i&=2===a?31:3===a?15:7;a>1&&r<o;)i=i<<6|63&t[r++],a--;a>1?s[n++]=65533:i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|1023&i)}return Mn(s,n)},Cn.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+On[t[r]]>e?r:e};var Ln=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Nn=Ie,Fn=Re,Pn=Cn,Bn=Mr,Dn=Ln,Un=Object.prototype.toString,zn=0,jn=-1,Wn=0,Xn=8;function Hn(t){if(!(this instanceof Hn))return new Hn(t);this.options=Fn.assign({level:jn,method:Xn,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wn,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Dn,this.strm.avail_out=0;var r=Nn.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==zn)throw new Error(Bn[r]);if(e.header&&Nn.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?Pn.string2buf(e.dictionary):"[object ArrayBuffer]"===Un.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(r=Nn.deflateSetDictionary(this.strm,n))!==zn)throw new Error(Bn[r]);this._dict_set=!0}}function Gn(t,e){var r=new Hn(e);if(r.push(t,!0),r.err)throw r.msg||Bn[r.err];return r.result}Hn.prototype.push=function(t,e){var r,n,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=Pn.string2buf(t):"[object ArrayBuffer]"===Un.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new Fn.Buf8(a),i.next_out=0,i.avail_out=a),1!==(r=Nn.deflate(i,n))&&r!==zn)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(Pn.buf2binstring(Fn.shrinkBuf(i.output,i.next_out))):this.onData(Fn.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==r);return 4===n?(r=Nn.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===zn):2!==n||(this.onEnd(zn),i.avail_out=0,!0)},Hn.prototype.onData=function(t){this.chunks.push(t)},Hn.prototype.onEnd=function(t){t===zn&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Fn.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},Oe.Deflate=Hn,Oe.deflate=Gn,Oe.deflateRaw=function(t,e){return(e=e||{}).raw=!0,Gn(t,e)},Oe.gzip=function(t,e){return(e=e||{}).gzip=!0,Gn(t,e)};var Yn={},Zn={},Vn=Re,qn=15,Jn=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Kn=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],$n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Qn=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],ti=Re,ei=Tr,ri=Ir,ni=function(t,e){var r,n,i,a,o,s,l,h,u,c,f,d,p,g,m,y,v,b,_,w,x,S,E,A,C;r=t.state,n=t.next_in,A=t.input,i=n+(t.avail_in-5),a=t.next_out,C=t.output,o=a-(e-t.avail_out),s=a+(t.avail_out-257),l=r.dmax,h=r.wsize,u=r.whave,c=r.wnext,f=r.window,d=r.hold,p=r.bits,g=r.lencode,m=r.distcode,y=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{p<15&&(d+=A[n++]<<p,p+=8,d+=A[n++]<<p,p+=8),b=g[d&y];e:for(;;){if(d>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))C[a++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(d&(1<<_)-1)];continue e}if(32&_){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&b,(_&=15)&&(p<_&&(d+=A[n++]<<p,p+=8),w+=d&(1<<_)-1,d>>>=_,p-=_),p<15&&(d+=A[n++]<<p,p+=8,d+=A[n++]<<p,p+=8),b=m[d&v];r:for(;;){if(d>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=m[(65535&b)+(d&(1<<_)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&b,p<(_&=15)&&(d+=A[n++]<<p,(p+=8)<_&&(d+=A[n++]<<p,p+=8)),(x+=d&(1<<_)-1)>l){t.msg="invalid distance too far back",r.mode=30;break t}if(d>>>=_,p-=_,x>(_=a-o)){if((_=x-_)>u&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(S=0,E=f,0===c){if(S+=h-_,_<w){w-=_;do{C[a++]=f[S++]}while(--_);S=a-x,E=C}}else if(c<_){if(S+=h+c-_,(_-=c)<w){w-=_;do{C[a++]=f[S++]}while(--_);if(S=0,c<w){w-=_=c;do{C[a++]=f[S++]}while(--_);S=a-x,E=C}}}else if(S+=c-_,_<w){w-=_;do{C[a++]=f[S++]}while(--_);S=a-x,E=C}for(;w>2;)C[a++]=E[S++],C[a++]=E[S++],C[a++]=E[S++],w-=3;w&&(C[a++]=E[S++],w>1&&(C[a++]=E[S++]))}else{S=a-x;do{C[a++]=C[S++],C[a++]=C[S++],C[a++]=C[S++],w-=3}while(w>2);w&&(C[a++]=C[S++],w>1&&(C[a++]=C[S++]))}break}}break}}while(n<i&&a<s);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=a<s?s-a+257:257-(a-s),r.hold=d,r.bits=p},ii=function(t,e,r,n,i,a,o,s){var l,h,u,c,f,d,p,g,m,y=s.bits,v=0,b=0,_=0,w=0,x=0,S=0,E=0,A=0,C=0,k=0,T=null,R=0,O=new Vn.Buf16(16),I=new Vn.Buf16(16),M=null,L=0;for(v=0;v<=qn;v++)O[v]=0;for(b=0;b<n;b++)O[e[r+b]]++;for(x=y,w=qn;w>=1&&0===O[w];w--);if(x>w&&(x=w),0===w)return i[a++]=20971520,i[a++]=20971520,s.bits=1,0;for(_=1;_<w&&0===O[_];_++);for(x<_&&(x=_),A=1,v=1;v<=qn;v++)if(A<<=1,(A-=O[v])<0)return-1;if(A>0&&(0===t||1!==w))return-1;for(I[1]=0,v=1;v<qn;v++)I[v+1]=I[v]+O[v];for(b=0;b<n;b++)0!==e[r+b]&&(o[I[e[r+b]]++]=b);if(0===t?(T=M=o,d=19):1===t?(T=Jn,R-=257,M=Kn,L-=257,d=256):(T=$n,M=Qn,d=-1),k=0,b=0,v=_,f=a,S=x,E=0,u=-1,c=(C=1<<x)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){p=v-E,o[b]<d?(g=0,m=o[b]):o[b]>d?(g=M[L+o[b]],m=T[R+o[b]]):(g=96,m=0),l=1<<v-E,_=h=1<<S;do{i[f+(k>>E)+(h-=l)]=p<<24|g<<16|m|0}while(0!==h);for(l=1<<v-1;k&l;)l>>=1;if(0!==l?(k&=l-1,k+=l):k=0,b++,0==--O[v]){if(v===w)break;v=e[r+o[b]]}if(v>x&&(k&c)!==u){for(0===E&&(E=x),f+=_,A=1<<(S=v-E);S+E<w&&!((A-=O[S+E])<=0);)S++,A<<=1;if(C+=1<<S,1===t&&C>852||2===t&&C>592)return 1;i[u=k&c]=x<<24|S<<16|f-a|0}}return 0!==k&&(i[f+k]=v-E<<24|64<<16|0),s.bits=x,0},ai=1,oi=2,si=0,li=-2,hi=1,ui=12,ci=30,fi=852,di=592;function pi(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function gi(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ti.Buf16(320),this.work=new ti.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function mi(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=hi,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new ti.Buf32(fi),e.distcode=e.distdyn=new ti.Buf32(di),e.sane=1,e.back=-1,si):li}function yi(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,mi(t)):li}function vi(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?li:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,yi(t))):li}function bi(t,e){var r,n;return t?(n=new gi,t.state=n,n.window=null,(r=vi(t,e))!==si&&(t.state=null),r):li}var _i,wi,xi=!0;function Si(t){if(xi){var e;for(_i=new ti.Buf32(512),wi=new ti.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ii(ai,t.lens,0,288,_i,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ii(oi,t.lens,0,32,wi,0,t.work,{bits:5}),xi=!1}t.lencode=_i,t.lenbits=9,t.distcode=wi,t.distbits=5}function Ei(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new ti.Buf8(a.wsize)),n>=a.wsize?(ti.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),ti.arraySet(a.window,e,r-n,i,a.wnext),(n-=i)?(ti.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}Zn.inflateReset=yi,Zn.inflateReset2=vi,Zn.inflateResetKeep=mi,Zn.inflateInit=function(t){return bi(t,15)},Zn.inflateInit2=bi,Zn.inflate=function(t,e){var r,n,i,a,o,s,l,h,u,c,f,d,p,g,m,y,v,b,_,w,x,S,E,A,C=0,k=new ti.Buf8(4),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return li;(r=t.state).mode===ui&&(r.mode=13),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,s=t.avail_in,h=r.hold,u=r.bits,c=s,f=l,S=si;t:for(;;)switch(r.mode){case hi:if(0===r.wrap){r.mode=13;break}for(;u<16;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(2&r.wrap&&35615===h){r.check=0,k[0]=255&h,k[1]=h>>>8&255,r.check=ri(r.check,k,2,0),h=0,u=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",r.mode=ci;break}if(8!=(15&h)){t.msg="unknown compression method",r.mode=ci;break}if(u-=4,x=8+(15&(h>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=ci;break}r.dmax=1<<x,t.adler=r.check=1,r.mode=512&h?10:ui,h=0,u=0;break;case 2:for(;u<16;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(r.flags=h,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=ci;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=ci;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(k[0]=255&h,k[1]=h>>>8&255,r.check=ri(r.check,k,2,0)),h=0,u=0,r.mode=3;case 3:for(;u<32;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}r.head&&(r.head.time=h),512&r.flags&&(k[0]=255&h,k[1]=h>>>8&255,k[2]=h>>>16&255,k[3]=h>>>24&255,r.check=ri(r.check,k,4,0)),h=0,u=0,r.mode=4;case 4:for(;u<16;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(k[0]=255&h,k[1]=h>>>8&255,r.check=ri(r.check,k,2,0)),h=0,u=0,r.mode=5;case 5:if(1024&r.flags){for(;u<16;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(k[0]=255&h,k[1]=h>>>8&255,r.check=ri(r.check,k,2,0)),h=0,u=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((d=r.length)>s&&(d=s),d&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),ti.arraySet(r.head.extra,n,a,d,x)),512&r.flags&&(r.check=ri(r.check,n,d,a)),s-=d,a+=d,r.length-=d),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===s)break t;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=ri(r.check,n,d,a)),s-=d,a+=d,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===s)break t;d=0;do{x=n[a+d++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x))}while(x&&d<s);if(512&r.flags&&(r.check=ri(r.check,n,d,a)),s-=d,a+=d,x)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;u<16;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(h!==(65535&r.check)){t.msg="header crc mismatch",r.mode=ci;break}h=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=ui;break;case 10:for(;u<32;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}t.adler=r.check=pi(h),h=0,u=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,r.hold=h,r.bits=u,2;t.adler=r.check=1,r.mode=ui;case ui:if(5===e||6===e)break t;case 13:if(r.last){h>>>=7&u,u-=7&u,r.mode=27;break}for(;u<3;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}switch(r.last=1&h,u-=1,3&(h>>>=1)){case 0:r.mode=14;break;case 1:if(Si(r),r.mode=20,6===e){h>>>=2,u-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=ci}h>>>=2,u-=2;break;case 14:for(h>>>=7&u,u-=7&u;u<32;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",r.mode=ci;break}if(r.length=65535&h,h=0,u=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(d=r.length){if(d>s&&(d=s),d>l&&(d=l),0===d)break t;ti.arraySet(i,n,a,d,o),s-=d,a+=d,l-=d,o+=d,r.length-=d;break}r.mode=ui;break;case 17:for(;u<14;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(r.nlen=257+(31&h),h>>>=5,u-=5,r.ndist=1+(31&h),h>>>=5,u-=5,r.ncode=4+(15&h),h>>>=4,u-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=ci;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;u<3;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}r.lens[T[r.have++]]=7&h,h>>>=3,u-=3}for(;r.have<19;)r.lens[T[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,E={bits:r.lenbits},S=ii(0,r.lens,0,19,r.lencode,0,r.work,E),r.lenbits=E.bits,S){t.msg="invalid code lengths set",r.mode=ci;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;y=(C=r.lencode[h&(1<<r.lenbits)-1])>>>16&255,v=65535&C,!((m=C>>>24)<=u);){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(v<16)h>>>=m,u-=m,r.lens[r.have++]=v;else{if(16===v){for(A=m+2;u<A;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(h>>>=m,u-=m,0===r.have){t.msg="invalid bit length repeat",r.mode=ci;break}x=r.lens[r.have-1],d=3+(3&h),h>>>=2,u-=2}else if(17===v){for(A=m+3;u<A;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}u-=m,x=0,d=3+(7&(h>>>=m)),h>>>=3,u-=3}else{for(A=m+7;u<A;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}u-=m,x=0,d=11+(127&(h>>>=m)),h>>>=7,u-=7}if(r.have+d>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=ci;break}for(;d--;)r.lens[r.have++]=x}}if(r.mode===ci)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=ci;break}if(r.lenbits=9,E={bits:r.lenbits},S=ii(ai,r.lens,0,r.nlen,r.lencode,0,r.work,E),r.lenbits=E.bits,S){t.msg="invalid literal/lengths set",r.mode=ci;break}if(r.distbits=6,r.distcode=r.distdyn,E={bits:r.distbits},S=ii(oi,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,E),r.distbits=E.bits,S){t.msg="invalid distances set",r.mode=ci;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(s>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,r.hold=h,r.bits=u,ni(t,f),o=t.next_out,i=t.output,l=t.avail_out,a=t.next_in,n=t.input,s=t.avail_in,h=r.hold,u=r.bits,r.mode===ui&&(r.back=-1);break}for(r.back=0;y=(C=r.lencode[h&(1<<r.lenbits)-1])>>>16&255,v=65535&C,!((m=C>>>24)<=u);){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(y&&0==(240&y)){for(b=m,_=y,w=v;y=(C=r.lencode[w+((h&(1<<b+_)-1)>>b)])>>>16&255,v=65535&C,!(b+(m=C>>>24)<=u);){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}h>>>=b,u-=b,r.back+=b}if(h>>>=m,u-=m,r.back+=m,r.length=v,0===y){r.mode=26;break}if(32&y){r.back=-1,r.mode=ui;break}if(64&y){t.msg="invalid literal/length code",r.mode=ci;break}r.extra=15&y,r.mode=22;case 22:if(r.extra){for(A=r.extra;u<A;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;y=(C=r.distcode[h&(1<<r.distbits)-1])>>>16&255,v=65535&C,!((m=C>>>24)<=u);){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(0==(240&y)){for(b=m,_=y,w=v;y=(C=r.distcode[w+((h&(1<<b+_)-1)>>b)])>>>16&255,v=65535&C,!(b+(m=C>>>24)<=u);){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}h>>>=b,u-=b,r.back+=b}if(h>>>=m,u-=m,r.back+=m,64&y){t.msg="invalid distance code",r.mode=ci;break}r.offset=v,r.extra=15&y,r.mode=24;case 24:if(r.extra){for(A=r.extra;u<A;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=ci;break}r.mode=25;case 25:if(0===l)break t;if(d=f-l,r.offset>d){if((d=r.offset-d)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=ci;break}d>r.wnext?(d-=r.wnext,p=r.wsize-d):p=r.wnext-d,d>r.length&&(d=r.length),g=r.window}else g=i,p=o-r.offset,d=r.length;d>l&&(d=l),l-=d,r.length-=d;do{i[o++]=g[p++]}while(--d);0===r.length&&(r.mode=21);break;case 26:if(0===l)break t;i[o++]=r.length,l--,r.mode=21;break;case 27:if(r.wrap){for(;u<32;){if(0===s)break t;s--,h|=n[a++]<<u,u+=8}if(f-=l,t.total_out+=f,r.total+=f,f&&(t.adler=r.check=r.flags?ri(r.check,i,f,o-f):ei(r.check,i,f,o-f)),f=l,(r.flags?h:pi(h))!==r.check){t.msg="incorrect data check",r.mode=ci;break}h=0,u=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;u<32;){if(0===s)break t;s--,h+=n[a++]<<u,u+=8}if(h!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=ci;break}h=0,u=0}r.mode=29;case 29:S=1;break t;case ci:S=-3;break t;case 31:return-4;default:return li}return t.next_out=o,t.avail_out=l,t.next_in=a,t.avail_in=s,r.hold=h,r.bits=u,(r.wsize||f!==t.avail_out&&r.mode<ci&&(r.mode<27||4!==e))&&Ei(t,t.output,t.next_out,f-t.avail_out),c-=t.avail_in,f-=t.avail_out,t.total_in+=c,t.total_out+=f,r.total+=f,r.wrap&&f&&(t.adler=r.check=r.flags?ri(r.check,i,f,t.next_out-f):ei(r.check,i,f,t.next_out-f)),t.data_type=r.bits+(r.last?64:0)+(r.mode===ui?128:0)+(20===r.mode||15===r.mode?256:0),(0===c&&0===f||4===e)&&S===si&&(S=-5),S},Zn.inflateEnd=function(t){if(!t||!t.state)return li;var e=t.state;return e.window&&(e.window=null),t.state=null,si},Zn.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?li:(r.head=e,e.done=!1,si):li},Zn.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?li:11===r.mode&&ei(1,e,n,0)!==r.check?-3:Ei(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,si):li},Zn.inflateInfo="pako inflate (from Nodeca project)";var Ai={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};var Ci=Zn,ki=Re,Ti=Cn,Ri=Ai,Oi=Mr,Ii=Ln,Mi=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1},Li=Object.prototype.toString;function Ni(t){if(!(this instanceof Ni))return new Ni(t);this.options=ki.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ii,this.strm.avail_out=0;var r=Ci.inflateInit2(this.strm,e.windowBits);if(r!==Ri.Z_OK)throw new Error(Oi[r]);if(this.header=new Mi,Ci.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Ti.string2buf(e.dictionary):"[object ArrayBuffer]"===Li.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=Ci.inflateSetDictionary(this.strm,e.dictionary))!==Ri.Z_OK))throw new Error(Oi[r])}function Fi(t,e){var r=new Ni(e);if(r.push(t,!0),r.err)throw r.msg||Oi[r.err];return r.result}Ni.prototype.push=function(t,e){var r,n,i,a,o,s=this.strm,l=this.options.chunkSize,h=this.options.dictionary,u=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?Ri.Z_FINISH:Ri.Z_NO_FLUSH,"string"==typeof t?s.input=Ti.binstring2buf(t):"[object ArrayBuffer]"===Li.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new ki.Buf8(l),s.next_out=0,s.avail_out=l),(r=Ci.inflate(s,Ri.Z_NO_FLUSH))===Ri.Z_NEED_DICT&&h&&(r=Ci.inflateSetDictionary(this.strm,h)),r===Ri.Z_BUF_ERROR&&!0===u&&(r=Ri.Z_OK,u=!1),r!==Ri.Z_STREAM_END&&r!==Ri.Z_OK)return this.onEnd(r),this.ended=!0,!1;s.next_out&&(0!==s.avail_out&&r!==Ri.Z_STREAM_END&&(0!==s.avail_in||n!==Ri.Z_FINISH&&n!==Ri.Z_SYNC_FLUSH)||("string"===this.options.to?(i=Ti.utf8border(s.output,s.next_out),a=s.next_out-i,o=Ti.buf2string(s.output,i),s.next_out=a,s.avail_out=l-a,a&&ki.arraySet(s.output,s.output,i,a,0),this.onData(o)):this.onData(ki.shrinkBuf(s.output,s.next_out)))),0===s.avail_in&&0===s.avail_out&&(u=!0)}while((s.avail_in>0||0===s.avail_out)&&r!==Ri.Z_STREAM_END);return r===Ri.Z_STREAM_END&&(n=Ri.Z_FINISH),n===Ri.Z_FINISH?(r=Ci.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ri.Z_OK):n!==Ri.Z_SYNC_FLUSH||(this.onEnd(Ri.Z_OK),s.avail_out=0,!0)},Ni.prototype.onData=function(t){this.chunks.push(t)},Ni.prototype.onEnd=function(t){t===Ri.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ki.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},Yn.Inflate=Ni,Yn.inflate=Fi,Yn.inflateRaw=function(t,e){return(e=e||{}).raw=!0,Fi(t,e)},Yn.ungzip=Fi;var Pi={};(0,Re.assign)(Pi,Oe,Yn,Ai);var Bi="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,Di=Pi,Ui=It(),zi=Lt,ji=Bi?"uint8array":"array";function Wi(t,e){zi.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}Te.magic="\b\0",Ui.inherits(Wi,zi),Wi.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(Ui.transformTo(ji,t.data),!1)},Wi.prototype.flush=function(){zi.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Wi.prototype.cleanUp=function(){zi.prototype.cleanUp.call(this),this._pako=null},Wi.prototype._createPako=function(){this._pako=new Di[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},Te.compressWorker=function(t){return new Wi("Deflate",t)},Te.uncompressWorker=function(){return new Wi("Inflate",{})};var Xi=Lt;ke.STORE={magic:"\0\0",compressWorker:function(){return new Xi("STORE compression")},uncompressWorker:function(){return new Xi("STORE decompression")}},ke.DEFLATE=Te;var Hi={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},Gi=It(),Yi=Lt,Zi=p,Vi=re,qi=Hi,Ji=function(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},Ki=function(t,e,r,n,i,a){var o,s,l=t.file,h=t.compression,u=a!==Zi.utf8encode,c=Gi.transformTo("string",a(l.name)),f=Gi.transformTo("string",Zi.utf8encode(l.name)),d=l.comment,p=Gi.transformTo("string",a(d)),g=Gi.transformTo("string",Zi.utf8encode(d)),m=f.length!==l.name.length,y=g.length!==d.length,v="",b="",_="",w=l.dir,x=l.date,S={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(S.crc32=t.crc32,S.compressedSize=t.compressedSize,S.uncompressedSize=t.uncompressedSize);var E=0;e&&(E|=8),u||!m&&!y||(E|=2048);var A,C,k,T=0,R=0;w&&(T|=16),"UNIX"===i?(R=798,T|=(A=l.unixPermissions,C=w,k=A,A||(k=C?16893:33204),(65535&k)<<16)):(R=20,T|=63&(l.dosPermissions||0)),o=x.getUTCHours(),o<<=6,o|=x.getUTCMinutes(),o<<=5,o|=x.getUTCSeconds()/2,s=x.getUTCFullYear()-1980,s<<=4,s|=x.getUTCMonth()+1,s<<=5,s|=x.getUTCDate(),m&&(b=Ji(1,1)+Ji(Vi(c),4)+f,v+="up"+Ji(b.length,2)+b),y&&(_=Ji(1,1)+Ji(Vi(p),4)+g,v+="uc"+Ji(_.length,2)+_);var O="";return O+="\n\0",O+=Ji(E,2),O+=h.magic,O+=Ji(o,2),O+=Ji(s,2),O+=Ji(S.crc32,4),O+=Ji(S.compressedSize,4),O+=Ji(S.uncompressedSize,4),O+=Ji(c.length,2),O+=Ji(v.length,2),{fileRecord:qi.LOCAL_FILE_HEADER+O+c+v,dirRecord:qi.CENTRAL_FILE_HEADER+Ji(R,2)+O+Ji(p.length,2)+"\0\0\0\0"+Ji(T,4)+Ji(n,4)+c+v+p}},$i=function(t){return qi.DATA_DESCRIPTOR+Ji(t.crc32,4)+Ji(t.compressedSize,4)+Ji(t.uncompressedSize,4)};function Qi(t,e,r,n){Yi.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}Gi.inherits(Qi,Yi),Qi.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,Yi.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},Qi.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=Ki(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},Qi.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=Ki(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:$i(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},Qi.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,n=function(t,e,r,n,i){var a=Gi.transformTo("string",i(n));return qi.CENTRAL_DIRECTORY_END+"\0\0\0\0"+Ji(t,2)+Ji(t,2)+Ji(e,4)+Ji(r,4)+Ji(a.length,2)+a}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},Qi.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},Qi.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},Qi.prototype.resume=function(){return!!Yi.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},Qi.prototype.error=function(t){var e=this._sources;if(!Yi.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},Qi.prototype.lock=function(){Yi.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()};var ta=ke,ea=Qi;Ce.generateWorker=function(t,e,r){var n=new ea(e.streamFiles,r,e.platform,e.encodeFileName),i=0;try{t.forEach((function(t,r){i++;var a=function(t,e){var r=t||e,n=ta[r];if(!n)throw new Error(r+" is not a valid compression method !");return n}(r.options.compression,e.compression),o=r.options.compressionOptions||e.compressionOptions||{},s=r.dir,l=r.date;r._compressWorker(a,o).withStreamInfo("file",{name:t,dir:s,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(n)})),n.entriesCount=i}catch(t){n.error(t)}return n};var ra=It(),na=Lt;function ia(t,e){na.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}ra.inherits(ia,na),ia.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},ia.prototype.pause=function(){return!!na.prototype.pause.call(this)&&(this._stream.pause(),!0)},ia.prototype.resume=function(){return!!na.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)};var aa=ia,oa=p,sa=It(),la=Lt,ha=Vt,ua=qt,ca=ge,fa=Ae,da=Ce,pa=kt,ga=aa,ma=function(t,e,r){var n,i=sa.getTypeOf(e),a=sa.extend(r||{},ua);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=va(t)),a.createFolders&&(n=ya(t))&&ba.call(this,n,!0);var o="string"===i&&!1===a.binary&&!1===a.base64;r&&void 0!==r.binary||(a.binary=!o),(e instanceof ca&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",i="string");var s=null;s=e instanceof ca||e instanceof la?e:pa.isNode&&pa.isStream(e)?new ga(t,e):sa.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var l=new fa(t,s,a);this.files[t]=l},ya=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},va=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},ba=function(t,e){return e=void 0!==e?e:ua.createFolders,t=va(t),this.files[t]||ma.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function _a(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var wa={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n)},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},file:function(t,e,r){if(1===arguments.length){if(_a(t)){var n=t;return this.filter((function(t,e){return!e.dir&&n.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,ma.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(_a(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=ba.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=sa.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:oa.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");sa.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var n=r.comment||this.comment||"";e=da.generateWorker(this,r,n)}catch(t){(e=new la("error")).error(t)}return new ha(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}},xa=wa,Sa=It();function Ea(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}Ea.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return Sa.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}};var Aa=Ea,Ca=Aa;function ka(t){Ca.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}It().inherits(ka,Ca),ka.prototype.byteAt=function(t){return this.data[this.zero+t]},ka.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a-this.zero;return-1},ka.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.readData(4);return e===a[0]&&r===a[1]&&n===a[2]&&i===a[3]},ka.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Ta=ka,Ra=Aa;function Oa(t){Ra.call(this,t)}It().inherits(Oa,Ra),Oa.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},Oa.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},Oa.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},Oa.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Ia=Oa,Ma=Ta;function La(t){Ma.call(this,t)}It().inherits(La,Ma),La.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Na=La,Fa=Na;function Pa(t){Fa.call(this,t)}It().inherits(Pa,Fa),Pa.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};var Ba=Pa,Da=It(),Ua=m,za=Ta,ja=Ia,Wa=Ba,Xa=Na,Ha=function(t){var e=Da.getTypeOf(t);return Da.checkSupport(e),"string"!==e||Ua.uint8array?"nodebuffer"===e?new Wa(t):Ua.uint8array?new Xa(Da.transformTo("uint8array",t)):new za(Da.transformTo("array",t)):new ja(t)},Ga=Ha,Ya=It(),Za=ge,Va=re,qa=p,Ja=ke,Ka=m;function $a(t,e){this.options=t,this.loadOptions=e}$a.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in Ja)if(Object.prototype.hasOwnProperty.call(Ja,e)&&Ja[e].magic===t)return Ja[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+Ya.pretty(this.compressionMethod)+" unknown (inner file : "+Ya.transformTo("string",this.fileName)+")");this.decompressed=new Za(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=Ga(this.extraFields[1].value);this.uncompressedSize===Ya.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===Ya.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===Ya.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===Ya.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n};t.setIndex(i)},handleUTF8:function(){var t=Ka.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=qa.utf8decode(this.fileName),this.fileCommentStr=qa.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=Ya.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=Ya.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=Ga(t.value);return 1!==e.readInt(1)||Va(this.fileName)!==e.readInt(4)?null:qa.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=Ga(t.value);return 1!==e.readInt(1)||Va(this.fileComment)!==e.readInt(4)?null:qa.utf8decode(e.readData(t.length-5))}return null}};var Qa=$a,to=Ha,eo=It(),ro=Hi,no=Qa,io=m;function ao(t){this.files=[],this.loadOptions=t}ao.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+eo.pretty(e)+", expected "+eo.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=io.uint8array?"uint8array":"array",r=eo.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(ro.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ro.CENTRAL_FILE_HEADER);)(t=new no({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(ro.CENTRAL_DIRECTORY_END);if(t<0)throw!this.isSignature(0,ro.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(ro.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===eo.MAX_VALUE_16BITS||this.diskWithCentralDirStart===eo.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===eo.MAX_VALUE_16BITS||this.centralDirRecords===eo.MAX_VALUE_16BITS||this.centralDirSize===eo.MAX_VALUE_32BITS||this.centralDirOffset===eo.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(ro.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(ro.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ro.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ro.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ro.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(n>0)this.isSignature(e,ro.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=to(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};var oo=ao,so=It(),lo=Ot,ho=p,uo=oo,co=oe,fo=kt;function po(t){return new lo.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new co);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}function go(){if(!(this instanceof go))return new go;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new go;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}go.prototype=xa,go.prototype.loadAsync=function(t,e){var r=this;return e=so.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:ho.utf8decode}),fo.isNode&&fo.isStream(t)?lo.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):so.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new uo(e);return r.load(t),r})).then((function(t){var r=[lo.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var i=0;i<n.length;i++)r.push(po(n[i]));return lo.Promise.all(r)})).then((function(t){for(var n=t.shift(),i=n.files,a=0;a<i.length;a++){var o=i[a],s=o.fileNameStr,l=so.resolve(o.fileNameStr);r.file(l,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders}),o.dir||(r.file(l).unsafeOriginalName=s)}return n.zipComment.length&&(r.comment=n.zipComment),r}))},go.support=m,go.defaults=qt,go.version="3.10.1",go.loadAsync=function(t,e){return(new go).loadAsync(t,e)},go.external=Ot;var mo,yo,vo,bo,_o,wo,xo,So,Eo,Ao,Co,ko,To,Ro,Oo,Io,Mo,Lo,No,Fo,Po,Bo,Do,Uo,zo,jo,Wo,Xo,Ho,Go,Yo,Zo,Vo,qo,Jo=go;!function(t){t[t.Linear=0]="Linear",t[t.Radial=1]="Radial",t[t.Angular=2]="Angular"}(mo||(mo={})),function(t){t[t.Unmanaged=0]="Unmanaged",t[t.SRGB=1]="SRGB",t[t.P3=2]="P3"}(yo||(yo={})),function(t){t[t.Color=0]="Color",t[t.Gradient=1]="Gradient",t[t.Pattern=4]="Pattern"}(vo||(vo={})),function(t){t[t.Center=0]="Center",t[t.Inside=1]="Inside",t[t.Outside=2]="Outside"}(bo||(bo={})),function(t){t[t.Normal=0]="Normal",t[t.Darken=1]="Darken",t[t.Multiply=2]="Multiply",t[t.ColorBurn=3]="ColorBurn",t[t.Lighten=4]="Lighten",t[t.Screen=5]="Screen",t[t.ColorDodge=6]="ColorDodge",t[t.Overlay=7]="Overlay",t[t.SoftLight=8]="SoftLight",t[t.HardLight=9]="HardLight",t[t.Difference=10]="Difference",t[t.Exclusion=11]="Exclusion",t[t.Hue=12]="Hue",t[t.Saturation=13]="Saturation",t[t.Color=14]="Color",t[t.Luminosity=15]="Luminosity",t[t.PlusDarker=16]="PlusDarker",t[t.PlusLighter=17]="PlusLighter"}(_o||(_o={})),function(t){t[t.Butt=0]="Butt",t[t.Round=1]="Round",t[t.Projecting=2]="Projecting"}(wo||(wo={})),function(t){t[t.Miter=0]="Miter",t[t.Round=1]="Round",t[t.Bevel=2]="Bevel"}(xo||(xo={})),function(t){t[t.Gaussian=0]="Gaussian",t[t.Motion=1]="Motion",t[t.Zoom=2]="Zoom",t[t.Background=3]="Background"}(So||(So={})),function(t){t[t.Tile=0]="Tile",t[t.Fill=1]="Fill",t[t.Stretch=2]="Stretch",t[t.Fit=3]="Fit"}(Eo||(Eo={})),function(t){t[t.OpenArrow=0]="OpenArrow",t[t.FilledArrow=1]="FilledArrow",t[t.Line=2]="Line",t[t.OpenCircle=3]="OpenCircle",t[t.FilledCircle=4]="FilledCircle",t[t.OpenSquare=5]="OpenSquare",t[t.FilledSquare=6]="FilledSquare"}(Ao||(Ao={})),function(t){t[t.NonZero=0]="NonZero",t[t.EvenOdd=1]="EvenOdd"}(Co||(Co={})),function(t){t[t.Top=0]="Top",t[t.Middle=1]="Middle",t[t.Bottom=2]="Bottom"}(ko||(ko={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Centered=2]="Centered",t[t.Justified=3]="Justified",t[t.Natural=4]="Natural"}(To||(To={})),function(t){t[t.None=0]="None",t[t.Uppercase=1]="Uppercase",t[t.Lowercase=2]="Lowercase"}(Ro||(Ro={})),function(t){t[t.None=0]="None",t[t.Underlined=1]="Underlined"}(Oo||(Oo={})),function(t){t[t.None=0]="None",t[t.Strikethrough=1]="Strikethrough"}(Io||(Io={})),function(t){t[t.None=-1]="None",t[t.Union=0]="Union",t[t.Subtract=1]="Subtract",t[t.Intersection=2]="Intersection",t[t.Difference=3]="Difference"}(Mo||(Mo={})),function(t){t.PNG="png",t.JPG="jpg",t.TIFF="tiff",t.EPS="eps",t.PDF="pdf",t.WEBP="webp",t.SVG="svg"}(Lo||(Lo={})),function(t){t[t.Suffix=0]="Suffix",t[t.SecondaryPrefix=1]="SecondaryPrefix",t[t.PrimaryPrefix=2]="PrimaryPrefix"}(No||(No={})),function(t){t[t.Scale=0]="Scale",t[t.Width=1]="Width",t[t.Height=2]="Height"}(Fo||(Fo={})),function(t){t[t.None=0]="None",t[t.SlideFromLeft=1]="SlideFromLeft",t[t.SlideFromRight=2]="SlideFromRight",t[t.SlideFromBottom=3]="SlideFromBottom",t[t.SlideFromTop=4]="SlideFromTop"}(Po||(Po={})),function(t){t[t.Undecided=0]="Undecided",t[t.Collapsed=1]="Collapsed",t[t.Expanded=2]="Expanded"}(Bo||(Bo={})),function(t){t[t.Stretch=0]="Stretch",t[t.PinToEdge=1]="PinToEdge",t[t.Resize=2]="Resize",t[t.Float=3]="Float"}(Do||(Do={})),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(Uo||(Uo={})),function(t){t[t.Min=0]="Min",t[t.Middle=1]="Middle",t[t.Max=2]="Max"}(zo||(zo={})),function(t){t[t.Disabled=-1]="Disabled",t[t.Legacy=0]="Legacy",t[t.Rounded=1]="Rounded",t[t.Smooth=2]="Smooth"}(jo||(jo={})),function(t){t[t.Rounded=0]="Rounded",t[t.RoundedInverted=1]="RoundedInverted",t[t.Angled=2]="Angled",t[t.Squared=3]="Squared"}(Wo||(Wo={})),function(t){t[t.None=0]="None",t[t.Straight=1]="Straight",t[t.Mirrored=2]="Mirrored",t[t.Asymmetric=3]="Asymmetric",t[t.Disconnected=4]="Disconnected"}(Xo||(Xo={})),function(t){t[t.None=0]="None",t[t.Legacy=1]="Legacy",t[t.ConsistentBaseline=2]="ConsistentBaseline"}(Ho||(Ho={})),function(t){t[t.Flexible=0]="Flexible",t[t.Fixed=1]="Fixed",t[t.FixedWidthAndHeight=2]="FixedWidthAndHeight"}(Go||(Go={})),function(t){t[t.Local=0]="Local",t[t.Workspace=1]="Workspace",t[t.ThirdParty=2]="ThirdParty"}(Yo||(Yo={})),function(t){t.PublicRelease="com.bohemiancoding.sketch3",t.Beta="com.bohemiancoding.sketch3.beta",t.Private="com.bohemiancoding.sketch3.private",t.FeaturePreview="com.bohemiancoding.sketch3.feature-preview",t.Internal="com.bohemiancoding.sketch3.internal",t.Experimental="com.bohemiancoding.sketch3.experimental",t.Testing="com.bohemiancoding.sketch3.testing"}(Zo||(Zo={})),function(t){t[t.True=0]="True",t[t.False=1]="False"}(Vo||(Vo={})),function(t){t.MSImmutableColorAsset="MSImmutableColorAsset",t.MSImmutableDocumentLibraryInfo="MSImmutableDocumentLibraryInfo",t.MSImmutableFlowConnection="MSImmutableFlowConnection",t.MSImmutableForeignLayerStyle="MSImmutableForeignLayerStyle",t.MSImmutableForeignSwatch="MSImmutableForeignSwatch",t.MSImmutableForeignSymbol="MSImmutableForeignSymbol",t.MSImmutableForeignTextStyle="MSImmutableForeignTextStyle",t.MSImmutableFreeformGroupLayout="MSImmutableFreeformGroupLayout",t.MSImmutableGradientAsset="MSImmutableGradientAsset",t.MSImmutableHotspotLayer="MSImmutableHotspotLayer",t.MSImmutableInferredGroupLayout="MSImmutableInferredGroupLayout",t.MSImmutableOverrideProperty="MSImmutableOverrideProperty",t.MSImmutablePatchInfo="MSImmutablePatchInfo",t.MSImmutablePrototypeViewport="MSImmutablePrototypeViewport",t.MSJSONFileReference="MSJSONFileReference",t.MSJSONOriginalDataReference="MSJSONOriginalDataReference",t.Artboard="artboard",t.AssetCollection="assetCollection",t.AttributedString="attributedString",t.Bitmap="bitmap",t.Blur="blur",t.Border="border",t.BorderOptions="borderOptions",t.Color="color",t.ColorControls="colorControls",t.CurvePoint="curvePoint",t.ExportFormat="exportFormat",t.ExportOptions="exportOptions",t.Fill="fill",t.FontDescriptor="fontDescriptor",t.FontReference="fontReference",t.Gradient="gradient",t.GradientStop="gradientStop",t.GraphicsContextSettings="graphicsContextSettings",t.Group="group",t.ImageCollection="imageCollection",t.InnerShadow="innerShadow",t.LayoutGrid="layoutGrid",t.Oval="oval",t.OverrideValue="overrideValue",t.Page="page",t.ParagraphStyle="paragraphStyle",t.Polygon="polygon",t.Rect="rect",t.Rectangle="rectangle",t.RulerData="rulerData",t.Shadow="shadow",t.ShapeGroup="shapeGroup",t.ShapePath="shapePath",t.SharedStyle="sharedStyle",t.SharedStyleContainer="sharedStyleContainer",t.SharedTextStyleContainer="sharedTextStyleContainer",t.SimpleGrid="simpleGrid",t.Slice="slice",t.Star="star",t.StringAttribute="stringAttribute",t.Style="style",t.Swatch="swatch",t.SwatchContainer="swatchContainer",t.SymbolContainer="symbolContainer",t.SymbolInstance="symbolInstance",t.SymbolMaster="symbolMaster",t.Text="text",t.TextStyle="textStyle",t.Triangle="triangle"}(qo||(qo={}));var Ko,$o,Qo,ts,es,rs,ns,is=Object.freeze({__proto__:null,get GradientType(){return mo},get ColorSpace(){return yo},get FillType(){return vo},get BorderPosition(){return bo},get BlendMode(){return _o},get LineCapStyle(){return wo},get LineJoinStyle(){return xo},get BlurType(){return So},get PatternFillType(){return Eo},get MarkerType(){return Ao},get WindingRule(){return Co},get TextVerticalAlignment(){return ko},get TextHorizontalAlignment(){return To},get TextTransform(){return Ro},get UnderlineStyle(){return Oo},get StrikethroughStyle(){return Io},get BooleanOperation(){return Mo},get ExportFileFormat(){return Lo},get ExportFormatNamingScheme(){return No},get VisibleScaleType(){return Fo},get AnimationType(){return Po},get LayerListExpanded(){return Bo},get ResizeType(){return Do},get InferredLayoutAxis(){return Uo},get InferredLayoutAnchor(){return zo},get PointsRadiusBehaviour(){return jo},get CornerStyle(){return Wo},get CurveMode(){return Xo},get LineSpacingBehaviour(){return Ho},get TextBehaviour(){return Go},get DocumentLibraryType(){return Yo},get BundleId(){return Zo},get NumericalBool(){return Vo},get ClassValue(){return qo}});function as(t){if("auto"===t)return{v:0,u:Ko.AUTO};let e=parseFloat(t)||0;return/%$/.test(t)?{v:e,u:Ko.PERCENT}:/px$/i.test(t)?{v:e,u:Ko.PX}:/deg$/i.test(t)?{v:e,u:Ko.DEG}:{v:e,u:Ko.NUMBER}}!function(t){t[t.AUTO=0]="AUTO",t[t.PX=1]="PX",t[t.PERCENT=2]="PERCENT",t[t.NUMBER=3]="NUMBER",t[t.DEG=4]="DEG",t[t.RGBA=5]="RGBA",t[t.BOOLEAN=6]="BOOLEAN",t[t.STRING=7]="STRING",t[t.GRADIENT=8]="GRADIENT"}(Ko||(Ko={})),function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT",t[t.JUSTIFY=3]="JUSTIFY"}($o||($o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.MULTIPLY=1]="MULTIPLY",t[t.SCREEN=2]="SCREEN",t[t.OVERLAY=3]="OVERLAY",t[t.DARKEN=4]="DARKEN",t[t.LIGHTEN=5]="LIGHTEN",t[t.COLOR_DODGE=6]="COLOR_DODGE",t[t.COLOR_BURN=7]="COLOR_BURN",t[t.HARD_LIGHT=8]="HARD_LIGHT",t[t.SOFT_LIGHT=9]="SOFT_LIGHT",t[t.DIFFERENCE=10]="DIFFERENCE",t[t.EXCLUSION=11]="EXCLUSION",t[t.HUE=12]="HUE",t[t.SATURATION=13]="SATURATION",t[t.COLOR=14]="COLOR",t[t.LUMINOSITY=15]="LUMINOSITY"}(Qo||(Qo={})),function(t){t[t.VISIBLE=0]="VISIBLE",t[t.HIDDEN=1]="HIDDEN"}(ts||(ts={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ITALIC=1]="ITALIC",t[t.OBLIQUE=2]="OBLIQUE"}(es||(es={})),function(t){t[t.NONE=0]="NONE",t[t.MASK=1]="MASK",t[t.CLIP=2]="CLIP"}(rs||(rs={})),function(t){t[t.LINEAR=0]="LINEAR",t[t.RADIAL=1]="RADIAL",t[t.CONIC=2]="CONIC"}(ns||(ns={}));var os={StyleUnit:Ko,calUnit:as};const ss={}.toString;function ls(t){return function(e){return ss.call(e)==="[object "+t+"]"}}const hs=ls("Object"),us=ls("String"),cs=(fs=["Function","AsyncFunction","GeneratorFunction"],function(t){let e=ss.call(t);for(let t=0,r=fs.length;t<r;t++)if(e==="[object "+fs[t]+"]")return!0;return!1});var fs;const ds=ls("Number"),ps=ls("Boolean"),gs=ls("Date"),ms={}.hasOwnProperty,ys=ms.toString,vs=ys.call(Object);function bs(t){return null==t}function _s(t){if(!t||"[object Object]"!==ss.call(t))return!1;let e=Object.getPrototypeOf(t);if(!e)return!0;let r=ms.call(e,"constructor")&&e.constructor;return"function"==typeof r&&ys.call(r)===vs}var ws={isNil:bs,isString:us,isNumber:ds,isObject:hs,isBoolean:ps,isDate:gs,isFunction:cs,isPlainObject:_s},xs={debug:!1,offscreenCanvas:!0};const Ss=1e3/60,Es={},As="function"==typeof OffscreenCanvas&&OffscreenCanvas.prototype.getContext;const Cs={};let ks;const Ts={},Rs={};let Os=0,Is=0,Ms=[],Ls=0,Ns=[];const Fs={requestAnimationFrame(t){if(!t)return-1;let e;return"undefined"!=typeof requestAnimationFrame?(Fs.requestAnimationFrame=requestAnimationFrame.bind(null),e=requestAnimationFrame(t)):(e=setTimeout(t,Ss),Fs.requestAnimationFrame=function(t){return setTimeout(t,Ss)}),e},cancelAnimationFrame(t){let e;return"undefined"!=typeof cancelAnimationFrame?(Fs.cancelAnimationFrame=cancelAnimationFrame.bind(null),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Fs.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},now:()=>"undefined"!=typeof performance?(Fs.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Fs.now=Date.now.bind(Date),Date.now()),hasOffscreenCanvas:t=>t&&Es.hasOwnProperty(t),getOffscreenCanvas:(t,e,r,n)=>function(t,e,r,n){let i;i=r?Es[r]?Es[r]:Es[r]=!xs.debug&&xs.offscreenCanvas&&As?new OffscreenCanvas(t,e):document.createElement("canvas"):!xs.debug&&xs.offscreenCanvas&&As?new OffscreenCanvas(t,e):document.createElement("canvas"),t=Math.ceil(t),e=Math.ceil(e),i.width=t,i.height=e,xs.debug&&(i.style.width=t+"px",i.style.height=e+"px",r&&i.setAttribute("key",r),document.body.appendChild(i));let a=i.getContext("2d",n);return a||Fs.error("Total canvas memory use exceeds the maximum limit"),{canvas:i,ctx:a,available:!0,release(){this.available&&(this.available=!1,a.globalAlpha=1,a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,t,e),i.width=i.height=0,xs.debug&&i&&document.body.removeChild(i),i=null)}}}(t,e,r,n),isWebGLTexture(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},defaultFontFamily:"arial",getFontCanvas:t=>Fs.getOffscreenCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__",t),checkSupportFontFamily(t){if((t=t.toLowerCase())===this.defaultFontFamily)return!0;if(Cs.hasOwnProperty(t))return Cs[t];let e=Fs.getFontCanvas({willReadFrequently:!0}).ctx;e.textAlign="center",e.fillStyle="#000",e.textBaseline="middle",ks||(e.clearRect(0,0,16,16),e.font="16px "+this.defaultFontFamily,e.fillText("a",8,8),ks=e.getImageData(0,0,16,16).data),e.clearRect(0,0,16,16),/\s/.test(t)&&(t='"'+t.replace(/"/g,'\\"')+'"'),e.font="16px "+t+","+this.defaultFontFamily,e.fillText("a",8,8);let r=e.getImageData(0,0,16,16).data;for(let e=0,n=r.length;e<n;e++)if(ks[e]!==r[e])return Cs[t]=!0;return Cs[t]=!1},FONT:Rs,loadFont(t,e,r){if(cs(e)&&(r=e,e=t),Array.isArray(e)){if(!e.length)return r&&r();let i=0,a=e.length,o=[];return void e.forEach(((t,e)=>{Fs.loadFont(t.fontFamily,t.url,(function(t){o[e]=t,++i===a&&r&&r(o)}))}))}if(!e||!us(e))return Fs.error("Load font invalid: "+e),void(r&&r({state:2,success:!1,url:e}));let n=Rs[e]=Rs[e]||{state:0,task:[]};if(2===n.state)r&&r(n);else if(1===n.state)r&&n.task.push(r);else{if(n.state=1,r&&n.task.push(r),Os>0&&Ls>=Os)return void Ns.push({fontFamily:t,url:e});function s(t,e,r){if(e instanceof ArrayBuffer)n(e);else{let t=new XMLHttpRequest;t.open("get",e,!0),t.responseType="arraybuffer",t.onload=function(){t.response?n(t.response):i()},t.onerror=i,t.send()}function n(n){let a=new FontFace(t,n);if(a.load().then((function(){"undefined"!=typeof document&&document.fonts.add(a),r.state=2,r.success=!0,r.url=e,r.task.splice(0).forEach((t=>t(r,n)))})).catch(i),Ls++,Ns.length){let t=Ns.shift();s(t.fontFamily,t.url,Rs[t.url])}}function i(){if(r.state=2,r.success=!1,r.url=e,r.task.splice(0).forEach((t=>t(r))),Ls--,Ns.length){let t=Ns.shift();s(t.fontFamily,t.url,Rs[t.url])}}}Ls++,s(t,e,n)}},IMG:Ts,INIT:0,LOADED:2,LOADING:1,get MAX_LOAD_NUM(){return Os},set MAX_LOAD_NUM(t){Os=parseInt(t)||0},measureImg(t,e){if(Array.isArray(t)){if(!t.length)return e&&e();let n=0,i=t.length,a=[];return void t.forEach(((t,r)=>{Fs.measureImg(t,(function(t){a[r]=t,++n===i&&e&&e(a)}))}))}if(!t||!us(t))return Fs.error("Measure img invalid: "+t),void(e&&e({state:2,success:!1,url:t}));let r=Ts[t]=Ts[t]||{state:0,task:[]};if(2===r.state)e&&e(r);else if(1===r.state)e&&r.task.push(e);else{if(r.state=1,e&&r.task.push(e),Os>0&&Is>=Os)return void Ms.push(t);function o(t,e){let r=new Image;if(r.onload=function(){if(e.state=2,e.success=!0,e.width=r.width,e.height=r.height,e.source=r,e.url=t,e.task.splice(0).forEach((t=>{t(e)})),Is--,Ms.length){let t=Ms.shift();o(t,Ts[t])}},r.onerror=function(r){if(e.state=2,e.success=!1,e.url=t,e.task.splice(0).forEach((t=>t(e))),Is--,Ms.length){o(Ms.shift(),e)}},"data:"!==t.substr(0,5)){let e=/^(?:\w+:)?\/\/([^/:]+)/.exec(t);e&&("undefined"!=typeof location&&location.hostname===e[1]||(r.crossOrigin="anonymous"))}r.src=t,xs.debug&&"undefined"!=typeof document&&document.body.appendChild(r)}Is++,o(t,r)}},log(t){console.log(t)},warn(t){console.warn(t)},error(t){console.error(t)}},Ps={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375},helvetica:{lhr:1.14990234375,blr:.919921875},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},simsun:{lhr:1.4,blr:1.06}},hasRegister(t){return this.info.hasOwnProperty(t)&&this.info[t].hasOwnProperty("lhr")},hasLoaded(t){return this.info.hasOwnProperty(t)&&this.info[t].success}};Ps.info["宋体"]=Ps.info.simsun,Ps.info.pingfang=Ps.info["pingfang sc"];var Bs={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};function Ds(t,e,r,n){return t*r+e*n}function Us(t,e,r,n){return t*n-r*e}function zs(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function js(t,e){let r=zs(t,e);return{x:t/r,y:e/r}}var Ws={dotProduct:Ds,crossProduct:Us,length:zs,unitize:js};function Xs(){return new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Hs(t){return!t||!t.length||1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}function Gs(t,e){if(Hs(t))return new Float64Array(e);if(Hs(e))return new Float64Array(t);let r=Xs();for(let n=0;n<4;n++){let i=t[n],a=t[n+4],o=t[n+8],s=t[n+12];r[n]=i*e[0]+a*e[1]+o*e[2]+s*e[3],r[n+4]=i*e[4]+a*e[5]+o*e[6]+s*e[7],r[n+8]=i*e[8]+a*e[9]+o*e[10]+s*e[11],r[n+12]=i*e[12]+a*e[13]+o*e[14]+s*e[15]}return r}function Ys(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Zs(t,e){return t&&e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}function Vs(t,e,r){return e||r?(t[12]+=t[0]*e+t[4]*r,t[13]+=t[1]*e+t[5]*r,t[14]+=t[2]*e+t[6]*r,t[15]+=t[3]*e+t[7]*r,t):t}function qs(t,e,r){if(!t&&!e)return r;let n=r[3],i=r[7],a=r[11],o=r[15];return r[0]+=n*t,r[1]+=n*e,r[4]+=i*t,r[5]+=i*e,r[8]+=a*t,r[9]+=a*e,r[12]+=o*t,r[13]+=o*e,r}function Js(t,e){if(!e)return t;let r=Math.sin(e),n=Math.cos(e),i=t[0],a=t[1],o=t[2],s=t[3],l=t[4],h=t[5],u=t[6],c=t[7];return t[0]=i*n+l*r,t[1]=a*n+h*r,t[2]=o*n+u*r,t[3]=s*n+c*r,t[4]=i*-r+l*n,t[5]=a*-r+h*n,t[6]=o*-r+u*n,t[7]=s*-r+c*n,t}function Ks(t,e){return 1===e||(t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e),t}function $s(t,e){return 1===e||(t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e),t}function Qs(t,e){if(e&&!Hs(e)){let{x:r,y:n}=t,i=e[0],a=e[1],o=e[4],s=e[5];return{x:(1===i?r:r*i)+(o?n*o:0)+e[12],y:(1===a?r:r*a)+(s?n*s:0)+e[13]}}return t}function tl(t,e,r,n,i){let a,o,s,l,{x:h,y:u}=Qs({x:t,y:e},i),{x:c,y:f}=Qs({x:r,y:n},i);if(i&&i.length&&(i[1]||i[2]||i[4]||i[6]||i[7]||i[8])){let h=Qs({x:r,y:e},i);a=h.x,o=h.y,h=Qs({x:t,y:n},i),s=h.x,l=h.y}else a=c,o=u,s=h,l=f;return{x1:h,y1:u,x2:a,y2:o,x3:c,y3:f,x4:s,y4:l}}var el={identity:Xs,isE:Hs,toE:Ys,assignMatrix:Zs,inverse:function(t){if(16===t.length)return function(t){let e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];let r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0===r)return Xs();r=1/r;let n=[];for(let t=0;t<16;t++)n[t]=e[t]*r;return n}(t);let e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5];if(1===e&&0===r&&0===n&&1===i&&0===a&&0===o)return t;let s=e*i-r*n;return 0===s?t:[i/s,-r/s,-n/s,e/s,(n*o-i*a)/s,(r*a-e*o)/s]},calPoint:Qs,calRectPoint:tl,tfoMultiply:qs,multiplyTfo:Vs,multiply:Gs,multiplyRef:function(t,e){if(Hs(t))return e;if(Hs(e))return Zs(e,t),e;const r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],h=e[7],u=e[8],c=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],y=e[15];for(let v=0;v<4;v++){let b=t[v],_=t[v+4],w=t[v+8],x=t[v+12];e[v]=b*r+_*n+w*i+x*a,e[v+4]=b*o+_*s+w*l+x*h,e[v+8]=b*u+_*c+w*f+x*d,e[v+12]=b*p+_*g+w*m+x*y}return e}};function rl(t){return t*Math.PI/180}function nl(t,e,r){let n,{x:i,y:a}=r[0],{x:o,y:s}=r[0],l=r.length;for(let t=1;t<l;t++){let{x:e,y:n}=r[t];i=Math.max(i,e),a=Math.max(a,n),o=Math.min(o,e),s=Math.min(s,n)}if(t<o||e<s||t>i||e>a)return!1;for(let i=0,a=r.length;i<a;i++){let{x:o,y:s}=r[i],{x:l,y:h}=r[(i+1)%a],u=Us(l-o,h-s,t-o,e-s);if(0!==u)if(u=u>0?1:0,void 0===n)n=u;else if(n^u)return!1}return!0}function il(t,e,r,n,i,a,o){if(o&&!Hs(o)){let s=Qs({x:r,y:n},o),l=s.x,h=s.y,u=Qs({x:i,y:n},o),c=u.x,f=u.y,d=Qs({x:i,y:a},o),p=d.x,g=d.y,m=Qs({x:r,y:a},o);return nl(t,e,[{x:l,y:h},{x:c,y:f},{x:p,y:g},{x:m.x,y:m.y}])}return t>=r&&e>=n&&t<=i&&e<=a}function al(t,e,r,n){return Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2))}function ol(t,e,r){let n=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(n)}function sl(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}var ll={d2r:rl,r2d:function(t){return 180*t/Math.PI},H:4*(Math.sqrt(2)-1)/3,h:sl,pointInConvexPolygon:nl,pointInRect:il,pointsDistance:al,angleBySides:ol};class hl{constructor(){this.__eHash={}}on(t,e){if(!cs(e))return;let r=this;if(Array.isArray(t))for(let n=0,i=t.length;n<i;n++)r.on(t[n],e);else{r.__eHash.hasOwnProperty(t)||(r.__eHash[t]=[]);for(let n=0,i=r.__eHash[t],a=i.length;n<a;n++)if(i[n]===e)return r;r.__eHash[t].push(e)}return r}once(t,e){if(!cs(e))return;let r=this;function n(){e.apply(r,arguments),r.off(t,n)}if(n.__eventCb=e,Array.isArray(t))for(let n=0,i=t.length;n<i;n++)r.once(t[n],e);else e&&r.on(t,n);return this}off(t,e){let r=this;if(Array.isArray(t))for(let n=0,i=t.length;n<i;n++)r.off(t[n],e);else if(r.__eHash.hasOwnProperty(t))if(e){for(let n=0,i=r.__eHash[t],a=i.length;n<a;n++)if(i[n]===e||i[n].__eventCb===e){i.splice(n,1);break}}else delete r.__eHash[t];return this}emit(t,...e){let r=this;if(Array.isArray(t))for(let n=0,i=t.length;n<i;n++)r.emit(t[n],e);else if(r.__eHash.hasOwnProperty(t)){let n=r.__eHash[t];if(n.length){n=n.slice();for(let t=0,i=n.length;t<i;t++){let i=n[t];cs(i)&&i.apply(r,e)}}}return this}}function ul(t){if(bs(t)||"object"!=typeof t)return t;if(gs(t))return new Date(t);if(!_s(t)&&!Array.isArray(t))return t;const e=Array.isArray(t)?[]:{};return Object.keys(t).forEach((r=>{e[r]=ul(t[r])})),e}hl.REFRESH="refresh",hl.DID_ADD_DOM="didAddDom",hl.WILL_REMOVE_DOM="willRemoveDom",hl.PAGE_CHANGED="pageChanged";var cl={type:ws,Event:hl,inject:Fs};function fl(t){if(/^[-+]?[\d.]/.test(t)){let e=as(t);return[Ko.NUMBER,Ko.DEG].indexOf(e.u)>-1&&(e.u=Ko.PX),e}return{v:{top:0,left:0,center:50,right:100,bottom:100}[t]||50,u:Ko.PERCENT}}function dl(t,e){const r=[],n=t[0].color.v;for(let n=0,i=t.length;n<i;n++){const i=t[n],a=i.offset;a?a.u===Ko.PERCENT?r.push([i.color.v,.01*a.v]):r.push([i.color.v,a.v/e]):r.push([i.color.v])}if(1===r.length&&r.push(ul(r[0])),1===r[0].length&&r[0].push(0),r.length>1){const t=r.length-1;1===r[t].length&&r[t].push(1)}let i=r[0][1];for(let t=1,e=r.length;t<e-1;t++){const n=r[t];if(n.length>1)i=n[1];else{let n=t+1,a=r[r.length-1][1];for(;n<e-1;n++){const t=r[n];if(t.length>1){a=t[1];break}}const o=(a-i)/(n-t+1);for(let e=t;e<n;e++){r[e].push(i+o*(e+1-t))}t=n}}for(let t=1,e=r.length;t<e;t++){const e=r[t],n=r[t-1];e[1]<n[1]&&(e[1]=n[1])}for(let t=0,e=r.length;t<e;t++){const e=r[t];if(e[1]>1){r.splice(t);const n=r[t-1];if(n&&n[1]<1){const t=e[0][0]-n[0][0],i=e[0][1]-n[0][1],a=e[0][2]-n[0][2],o=e[0][3]-n[0][3],s=(1-n[1])/(e[1]-n[1]);r.push([[e[0][0]+t*s,e[0][1]+i*s,e[0][2]+a*s,e[0][3]+o*s],1])}break}}for(let t=r.length-1;t>=0;t--){const e=r[t];if(e[1]<0){r.splice(0,t+1);const n=r[t];if(n&&n[1]>0){const t=n[0][0]-e[0][0],i=n[0][1]-e[0][1],a=n[0][2]-e[0][2],o=n[0][3]-e[0][3],s=-e[1]/(n[1]-e[1]);r.unshift([[e[0][0]+t*s,e[0][1]+i*s,e[0][2]+a*s,e[0][3]+o*s],0])}break}}return r.forEach((t=>{t[1]<0?t[1]=0:t[1]>1&&(t[1]=1)})),r.length||r.push([n,0]),r}function pl(t){const e=Bs.gradient.exec(t);if(e){const t={},r={linear:ns.LINEAR,radial:ns.RADIAL,conic:ns.CONIC}[e[1].toLowerCase()];let n;if(r===ns.LINEAR){const t=/([-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?deg)|(to\s+[toprighbml]+)/i.exec(e[2]);if(t)n=function(t){let e=180;if("to top"===t)e=0;else if("to top right"===t)e=45;else if("to right"===t)e=90;else if("to bottom right"===t)e=135;else if("to bottom"===t);else if("to bottom left"===t)e=225;else if("to left"===t)e=270;else if("to top left"===t)e=315;else{let r=/([-+]?[\d.]+)deg/.exec(t);r&&(e=parseFloat(r[1]))}return e%360}(t[0].toLowerCase());else{const t=/([-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?)\s+([-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?)\s+([-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?)\s+([-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?)/.exec(e[2]);n=t?[parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4])]:180}}else if(r===ns.RADIAL){t.s=e[2].indexOf("circle")>-1?"circle":"ellipse";const r=/(closest|farthest)-(side|corner)/i.exec(e[2]);if(r)t.z=r[0].toLowerCase();else{const r=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(e[2]);if(r){t.z=[parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]),parseFloat(r[4])];const e=!bs(r[5]),n=!bs(r[6]),i=!bs(r[7]);e&&n&&i?(t.z.push(parseFloat(r[5])),t.z.push(parseFloat(r[6])),t.z.push(parseFloat(r[7]))):e&&n?(t.z.push(parseFloat(r[5])),t.z.push(parseFloat(r[6])),t.z.push(1)):e?(t.z.push(t.z[0]),t.z.push(t.z[1]),t.z.push(parseFloat(r[5]))):(t.z.push(t.z[0]),t.z.push(t.z[1]),t.z.push(1))}else t.z="farthest-corner"}const n=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(n){const e=fl(n[1]),r=n[2]?fl(n[2]):e;t.p=[e,r]}else t.p=[{v:50,u:Ko.PERCENT},{v:50,u:Ko.PERCENT}]}else if(r===ns.CONIC){const r=/([-+]?[\d.]+deg)/i.exec(e[2]);n=r?parseFloat(r[0])%360:0;const i=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(i){const e=fl(i[1]),r=i[2]?fl(i[2]):e;t.p=[e,r]}else t.p=[{v:50,u:Ko.PERCENT},{v:50,u:Ko.PERCENT}]}const i=(e[2].match(/(([-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?[pxremvwhina%]+)?)|(transparent)/gi)||[]).map((t=>{const e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),r=/[-+]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e[-+]?\d+)?[pxremvwhina%]+/.exec(t);let n;if(r){const t=as(r[0]);[Ko.NUMBER,Ko.DEG].indexOf(t.u)>-1&&(t.u=Ko.PX),n=t}return{color:{v:e?bl(e[0]):[0,0,0,1],u:Ko.RGBA},offset:n}}));return{t:r,d:n,stops:i}}throw new Error("Unknown parse gradient")}function gl(t,e,r,n,i,a,o=0,s=0){let l,h,u,c,f;if(r+=o,n+=s,Array.isArray(e)){l=r+e[0]*i,h=n+e[1]*a,u=r+e[2]*i,c=n+e[3]*a;f=dl(t,Math.sqrt(Math.pow(u-l,2)+Math.pow(c-h,2)))}else{for(;e>=360;)e-=360;for(;e<0;)e+=360;let d=Math.max(i,a);const p=function(t,e,r,n){let i,a,o,s;if(t>=270){const l=rl(360-t);i=r+Math.sin(l)*e,a=n+Math.cos(l)*e,o=r-Math.sin(l)*e,s=n-Math.cos(l)*e}else if(t>=180){const l=rl(t-180);i=r+Math.sin(l)*e,a=n-Math.cos(l)*e,o=r-Math.sin(l)*e,s=n+Math.cos(l)*e}else if(t>=90){const l=rl(180-t);i=r-Math.sin(l)*e,a=n-Math.cos(l)*e,o=r+Math.sin(l)*e,s=n+Math.cos(l)*e}else{const l=rl(t);i=r-Math.sin(l)*e,a=n+Math.cos(l)*e,o=r+Math.sin(l)*e,s=n-Math.cos(l)*e}return[i,a,o,s]}(e,d,r+.5*i+o,n+.5*a+s);d*=2;const g=Ds(r-p[0],n-p[1],p[2]-p[0],p[3]-p[1])/d,m=Ds(r+i-p[0],n-p[1],p[2]-p[0],p[3]-p[1])/d,y=Ds(r+i-p[0],n+a-p[1],p[2]-p[0],p[3]-p[1])/d,v=Ds(r-p[0],n+a-p[1],p[2]-p[0],p[3]-p[1])/d;let b=g,_=g;b=Math.min(b,Math.min(m,Math.min(y,v))),_=Math.max(_,Math.max(m,Math.max(y,v)));const w=_-b,x=b/d,S=p[2]-p[0],E=p[3]-p[1];l=p[0]+S*x,h=p[1]+E*x,u=p[2]-S*x,c=p[3]-E*x,f=dl(t,w)}return{x1:l,y1:h,x2:u,y2:c,stop:f}}function ml(t){if(Bs.gradient.test(t)){let e=Bs.gradient.exec(t);if(e&&["linear","radial","conic"].indexOf(e[1])>-1)return!0}return!1}function yl(t){const e={};["left","top","right","bottom","width","height"].forEach((r=>{let n=t[r];if(bs(n))return;const i=as(n||0);[Ko.NUMBER,Ko.DEG].indexOf(i.u)>-1&&(i.u=Ko.PX),"width"!==r&&"height"!==r||i.v<0&&(i.v=0),e[r]=i}));const r=t.lineHeight;if(!bs(r))if("normal"===r)e.lineHeight={v:0,u:Ko.AUTO};else{let t=as(r||0);t.v<=0?t={v:0,u:Ko.AUTO}:[Ko.DEG,Ko.NUMBER].indexOf(t.u)>-1&&(t.u=Ko.PX),e.lineHeight=t}const n=t.visible;bs(n)||(e.visible={v:n,u:Ko.BOOLEAN});const i=t.fontFamily;bs(i)||(e.fontFamily={v:i.toString().trim().toLowerCase().replace(/['"]/g,"").replace(/\s*,\s*/g,","),u:Ko.STRING});const a=t.fontSize;if(!bs(a)){let t=as(a||16);t.v<=0&&(t.v=16),[Ko.NUMBER,Ko.DEG].indexOf(t.u)>-1&&(t.u=Ko.PX),e.fontSize=t}const o=t.fontWeight;bs(o)||(us(o)?/thin/i.test(o)?e.fontWeight={v:100,u:Ko.NUMBER}:/lighter/i.test(o)?e.fontWeight={v:200,u:Ko.NUMBER}:/light/i.test(o)?e.fontWeight={v:300,u:Ko.NUMBER}:/medium/i.test(o)?e.fontWeight={v:500,u:Ko.NUMBER}:/semiBold/i.test(o)?e.fontWeight={v:600,u:Ko.NUMBER}:/bold/i.test(o)?e.fontWeight={v:700,u:Ko.NUMBER}:/extraBold/i.test(o)?e.fontWeight={v:800,u:Ko.NUMBER}:/black/i.test(o)?e.fontWeight={v:900,u:Ko.NUMBER}:e.fontWeight={v:400,u:Ko.NUMBER}:e.fontWeight={v:Math.min(900,Math.max(100,parseInt(o)||400)),u:Ko.NUMBER});const s=t.fontStyle;if(!bs(s)){let t=es.NORMAL;/italic/i.test(s)?t=es.ITALIC:/oblique/i.test(s)&&(t=es.OBLIQUE),e.fontStyle={v:t,u:Ko.NUMBER}}const l=t.color;bs(l)||(e.color={v:bl(l),u:Ko.RGBA});const h=t.backgroundColor;bs(h)||(e.backgroundColor={v:bl(h),u:Ko.RGBA});const u=t.overflow;bs(u)||(e.overflow={v:u,u:Ko.STRING});const c=t.opacity;bs(c)||(e.opacity={v:Math.max(0,Math.min(1,c)),u:Ko.NUMBER});const f=t.fill;bs(f)||(e.fill=f.map((t=>us(t)&&ml(t)?{v:pl(t),u:Ko.GRADIENT}:{v:bl(t),u:Ko.RGBA})));const d=t.fillEnable;bs(d)||(e.fillEnable=d.map((t=>({v:t,u:Ko.BOOLEAN}))));const p=t.stroke;bs(p)||(e.stroke=p.map((t=>us(t)&&ml(t)?{v:pl(t),u:Ko.GRADIENT}:{v:bl(t),u:Ko.RGBA})));const g=t.strokeEnable;bs(g)||(e.strokeEnable=g.map((t=>({v:t,u:Ko.BOOLEAN}))));const m=t.strokeWidth;bs(m)||(e.strokeWidth=m.map((t=>({v:Math.max(0,t),u:Ko.PX}))));const y=t.strokeDasharray;bs(y)||(e.strokeDasharray=y.map((t=>({v:Math.max(0,t),u:Ko.PX})))),["translateX","translateY","scaleX","scaleY","rotateZ"].forEach((r=>{let n=t[r];if(bs(n))return;const i=as(n);!function(t,e){"scaleX"===t||"scaleY"===t?e.u=Ko.NUMBER:"translateX"===t||"translateY"===t?e.u===Ko.NUMBER&&(e.u=Ko.PX):e.u===Ko.NUMBER&&(e.u=Ko.DEG)}(r,i),e[r]=i}));const v=t.letterSpacing;if(!bs(v)){let t=as(v||0);[Ko.NUMBER,Ko.DEG].indexOf(t.u)>-1&&(t.u=Ko.PX),e.letterSpacing=t}const b=t.textAlign;if(!bs(b)){let t=$o.LEFT;"center"===b?t=$o.CENTER:"right"===b?t=$o.RIGHT:"justify"===b&&(t=$o.JUSTIFY),e.textAlign={v:t,u:Ko.STRING}}const _=t.transformOrigin;if(!bs(_)){let t;t=Array.isArray(_)?_:_.match(/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi),1===t.length&&(t[1]=t[0]);const r=[];for(let e=0;e<2;e++){let n=t[e];if(/^[-+]?[\d.]/.test(n)){let t=as(n);[Ko.NUMBER,Ko.DEG].indexOf(t.u)>-1&&(t.u=Ko.PX),r.push(t)}else r.push({v:{top:0,left:0,center:50,right:100,bottom:100}[n],u:Ko.PERCENT}),bs(r[e].v)&&(r[e].v=50)}e.transformOrigin=r}if(!bs(t.mixBlendMode)){let t=Qo.NORMAL;/multiply/i.test(s)?t=Qo.MULTIPLY:/screen/i.test(s)?t=Qo.SCREEN:/overlay/i.test(s)?t=Qo.OVERLAY:/darken/i.test(s)?t=Qo.DARKEN:/lighten/i.test(s)?t=Qo.LIGHTEN:/color-dodge/i.test(s)?t=Qo.COLOR_DODGE:/color-burn/i.test(s)?t=Qo.COLOR_BURN:/hard-light/i.test(s)?t=Qo.HARD_LIGHT:/soft-light/i.test(s)?t=Qo.SOFT_LIGHT:/difference/i.test(s)?t=Qo.DIFFERENCE:/exclusion/i.test(s)?t=Qo.EXCLUSION:/hue/i.test(s)?t=Qo.HUE:/saturation/i.test(s)?t=Qo.SATURATION:/color/i.test(s)?t=Qo.COLOR:/luminosity/i.test(s)&&(t=Qo.LUMINOSITY),e.mixBlendMode={v:t,u:Ko.NUMBER}}const w=t.pointerEvents;return bs(w)||(e.pointerEvents={v:w,u:Ko.BOOLEAN}),e}function vl(t,e,r){return"transformOrigin"===t?e[t][0].v===r[t][0].v&&e[t][0].u===r[t][0].u&&e[t][1].v===r[t][1].v&&e[t][1].u===r[t][1].u:"color"===t||"backgroundColor"===t?e[t].v[0]===r[t].v[0]&&e[t].v[1]===r[t].v[1]&&e[t].v[2]===r[t].v[2]&&e[t].v[3]===r[t].v[3]:e[t].v===r[t].v&&e[t].u===r[t].u}function bl(t){if(Array.isArray(t))return t;let e=[];if(t&&"transparent"!==t)if("#"===t.charAt(0))3===(t=t.slice(1)).length||4===t.length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),4===t.length?e[3]=parseInt(t.charAt(3)+t.charAt(3),16):e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1);else{let r=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i);r?(e=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],bs(r[4])?e[3]=1:e[3]=parseFloat(r[4])):e=[0,0,0,0]}else e=[0,0,0,0];return e}function _l(t){const e=bl(t);return Array.isArray(e)&&(e[0]=Math.floor(Math.max(e[0],0)),e[1]=Math.floor(Math.max(e[1],0)),e[2]=Math.floor(Math.max(e[2],0)),3===e.length||4===e.length)?4===e.length?(e[3]=Math.max(e[3],0),"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"):"rgba("+e[0]+","+e[1]+","+e[2]+",1)":t||"rgba(0,0,0,0)"}function wl(t){let e=t.toString(16);return 1===e.length&&(e="0"+e),e}function xl(t){return Array.isArray(t)||(t=bl(t)),[t[0]/255,t[1]/255,t[2]/255,3===t.length?1:t[3]]}function Sl(t){let e=t.fontSize||0,r=t.fontFamily||Fs.defaultFontFamily||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t.fontStyle||"normal")+" "+(t.fontWeight||"400")+" "+e+"px/"+e+"px "+r}function El(t){let e=t.split(/\s*,\s*/);for(let t=0,r=e.length;t<r;t++){let r=e[t].replace(/^['"]/,"").replace(/['"]$/,"");if(Ps.hasLoaded(r)||Fs.checkSupportFontFamily(r))return r}return Fs.defaultFontFamily}function Al(t,e){return e||(e=El(t.fontFamily)),t.fontSize*(Ps.info[e]||Ps.info[Fs.defaultFontFamily]||Ps.info.arial).lhr}function Cl(t){let e=t.fontSize,r=El(t.fontFamily),n=Al(t,r);return.5*(t.lineHeight-n)+e*(Ps.info[r]||Ps.info[Fs.defaultFontFamily]||Ps.info.arial).blr}function kl(t,e){return t.u===Ko.PX?t.v:t.u===Ko.PERCENT?t.v*e*.01:0}var Tl,Rl={normalize:yl,equalStyle:vl,color2rgbaInt:bl,color2rgbaStr:_l,color2gl:xl,calFontFamily:El,calNormalLineHeight:Al,getBaseline:Cl,calSize:kl};!function(t){t[t.UNSET=63]="UNSET",t[t.RIGHT=1]="RIGHT",t[t.WIDTH=2]="WIDTH",t[t.LEFT=4]="LEFT",t[t.BOTTOM=8]="BOTTOM",t[t.HEIGHT=16]="HEIGHT",t[t.TOP=32]="TOP"}(Tl||(Tl={}));const Ol=/-(Regular|Medium|Semibold|Bold|Thin|Normal|Light|Lighter)/gi;function Il(t,e){var r;return h(this,void 0,void 0,(function*(){const n=yield null===(r=t.file(e))||void 0===r?void 0:r.async("string");return JSON.parse(n)}))}function Ml(t,e,r,n){var a,o,s,l,u,c,f,d,p,g,m,y,v,b,_;return h(this,void 0,void 0,(function*(){let w=t.frame.width,x=t.frame.height,S=t.frame.x,E=t.frame.y;const A=t.isVisible,C=(null===(o=null===(a=t.style)||void 0===a?void 0:a.contextSettings)||void 0===o?void 0:o.opacity)||1,k=-t.rotation;if(t._class===is.ClassValue.Artboard){const r=yield Promise.all(t.layers.map((r=>Ml(r,e,t.frame.width,t.frame.height)))),n=t.hasBackgroundColor,a=n?[Math.floor(255*t.backgroundColor.red),Math.floor(255*t.backgroundColor.green),Math.floor(255*t.backgroundColor.blue),t.backgroundColor.alpha]:[255,255,255,1];return{tagName:i.ArtBoard,props:{name:t.name,uuid:t.do_objectID,hasBackgroundColor:n,resizesContent:t.resizesContent,style:{width:w,height:x,visible:A,opacity:C,translateX:S,translateY:E,rotateZ:k,overflow:"hidden",backgroundColor:a}},children:r.filter((t=>t))}}const T=t.resizingConstraint^Tl.UNSET;let R=0,O=0,I="auto",M="auto";if(T?(T&Tl.LEFT?(R=S,T&Tl.RIGHT?(I=r-S-w,w="auto"):T&Tl.WIDTH||(I=100*(r-S-w)/r+"%",w="auto"),S=0):T&Tl.RIGHT?(I=r-S-w,T&Tl.LEFT?(R=S,w="auto"):T&Tl.WIDTH?R="auto":(R=100*S/r+"%",w="auto"),S=0):T&Tl.WIDTH?(R=100*(S+.5*w)/r+"%",S="-50%"):(R=100*S/r+"%",I=100*(r-S-w)/r+"%",S=0,w="auto"),T&Tl.TOP?(O=E,T&Tl.BOTTOM?(M=n-E-x,x="auto"):T&Tl.HEIGHT||(M=100*(n-E-x)/n+"%",x="auto"),E=0):T&Tl.BOTTOM?(M=n-E-x,T&Tl.TOP?(O=E,x="auto"):T&Tl.HEIGHT?O="auto":(O=100*E/n+"%",x="auto"),E=0):T&Tl.HEIGHT?(O=100*(E+.5*x)/n+"%",E="-50%"):(O=100*E/n+"%",M=100*(n-E-x)/n+"%",E=0,x="auto")):(R=100*S/r+"%",I=100*(r-S-w)/r+"%",S=0,w="auto",O=100*E/n+"%",M=100*(n-E-x)/n+"%",E=0,x="auto"),t._class===is.ClassValue.Group){const r=yield Promise.all(t.layers.map((r=>Ml(r,e,t.frame.width,t.frame.height))));return{tagName:i.Group,props:{name:t.name,uuid:t.do_objectID,style:{left:R,top:O,right:I,bottom:M,width:w,height:x,visible:A,opacity:C,translateX:S,translateY:E,rotateZ:k}},children:r.filter((t=>t))}}if(t._class===is.ClassValue.Bitmap){const r=yield function(t,e){return h(this,void 0,void 0,(function*(){if(/\.\w+$/.test(t)||(t=`${t}.png`),e.imgHash.hasOwnProperty(t))return e.imgHash[t];const r=e.zipFile.file(t);if(!r)return console.error(`image not exist: >>>${t}<<<`),-1;let n=yield r.async("base64");/^data:image\//.test(n)||(t.endsWith(".png")?n="data:image/png;base64,"+n:t.endsWith(".gif")?n="data:image/gif;base64,"+n:t.endsWith(".jpg")?n="data:image/jpg;base64,"+n:t.endsWith(".jpeg")?n="data:image/jpeg;base64,"+n:t.endsWith(".webp")?n="data:image/webp;base64,"+n:t.endsWith(".bmp")&&(n="data:image/bmp;base64,"+n));const i=e.imgs.length;return e.imgs.push(n),i}))}(t.image._ref,e);return{tagName:i.Bitmap,props:{name:t.name,uuid:t.do_objectID,style:{left:R,top:O,right:I,bottom:M,width:w,height:x,visible:A,opacity:C,translateX:S,translateY:E,rotateZ:k},src:r}}}if(t._class===is.ClassValue.Text){const e=t.textBehaviour;e===is.TextBehaviour.Flexible?(w="auto",x="auto"):e===is.TextBehaviour.Fixed?x="auto":is.TextBehaviour.FixedWidthAndHeight;const{string:r,attributes:n}=t.attributedString,a=n.length?n.map((t=>{const{location:e,length:r,attributes:{MSAttributedStringFontAttribute:{attributes:{name:n,size:i}},MSAttributedStringColorAttribute:{red:a,green:o,blue:s,alpha:l},kerning:h=0,paragraphStyle:{maximumLineHeight:u=0}={}}}=t,c={location:e,length:r,fontFamily:n.replace(Ol,""),fontSize:i,fontWeight:400,fontStyle:"normal",letterSpacing:h,lineHeight:u,color:[Math.floor(255*a),Math.floor(255*o),Math.floor(255*s),l]};return u||(c.lineHeight=Al(c)),c})):void 0,o=null===(c=null===(u=null===(l=null===(s=t.style)||void 0===s?void 0:s.textStyle)||void 0===l?void 0:l.encodedAttributes)||void 0===u?void 0:u.MSAttributedStringFontAttribute)||void 0===c?void 0:c.attributes,h=o?o.size:16,T=o?o.name.replace(Ol,""):"arial",L=null===(p=null===(d=null===(f=t.style)||void 0===f?void 0:f.textStyle)||void 0===d?void 0:d.encodedAttributes)||void 0===p?void 0:p.paragraphStyle,N=null==L?void 0:L.alignment,F=(null==L?void 0:L.maximumLineHeight)||"normal",P=["left","right","center","justify"][N||0],B=(null===(y=null===(m=null===(g=t.style)||void 0===g?void 0:g.textStyle)||void 0===m?void 0:m.encodedAttributes)||void 0===y?void 0:y.kerning)||0,D=null===(_=null===(b=null===(v=t.style)||void 0===v?void 0:v.textStyle)||void 0===b?void 0:b.encodedAttributes)||void 0===_?void 0:_.MSAttributedStringColorAttribute,U=D?[Math.floor(255*D.red),Math.floor(255*D.green),Math.floor(255*D.blue),D.alpha]:[0,0,0,1];return{tagName:i.Text,props:{name:t.name,uuid:t.do_objectID,style:{left:R,top:O,right:I,bottom:M,width:w,height:x,visible:A,opacity:C,translateX:S,translateY:E,rotateZ:k,overflow:"hidden",fontSize:h,fontFamily:T,color:U,textAlign:P,letterSpacing:B,lineHeight:F},content:r,rich:a}}}if(t._class===is.ClassValue.Rectangle||t._class===is.ClassValue.Oval||t._class===is.ClassValue.Star||t._class===is.ClassValue.Triangle||t._class===is.ClassValue.Polygon||t._class===is.ClassValue.ShapePath){const e=t.points.map((t=>{const e=Ll(t.point),r=Ll(t.curveFrom),n=Ll(t.curveTo);return{x:e.x,y:e.y,cornerRadius:t.cornerRadius,curveMode:t.curveMode,hasCurveFrom:t.hasCurveFrom,hasCurveTo:t.hasCurveTo,fx:r.x,fy:r.y,tx:n.x,ty:n.y}})),{borders:r,borderOptions:n,fills:a}=t.style||{},o=[],s=[];a&&a.forEach((t=>{if(t.fillType===is.FillType.Gradient){const e=t.gradient;if(e.gradientType===is.GradientType.Linear){const t=Ll(e.from),r=Ll(e.to),n=e.stops.map((t=>function(t){return!Array.isArray(t)||3!==t.length&&4!==t.length?t||"#000":(t[0]=Math.floor(Math.max(t[0],0)),t[1]=Math.floor(Math.max(t[1],0)),t[2]=Math.floor(Math.max(t[2],0)),4===t.length&&t[3]<1?(t[3]=Math.max(t[3],0),"#"+wl(t[0])+wl(t[1])+wl(t[2])+wl(Math.floor(255*t[3]))):"#"+wl(t[0])+wl(t[1])+wl(t[2]))}([Math.floor(255*t.color.red),Math.floor(255*t.color.green),Math.floor(255*t.color.blue),t.color.alpha])+" "+100*t.position+"%"));o.push(`linearGradient(${t.x} ${t.y} ${r.x} ${r.y},${n.join(",")})`)}else if(e.gradientType===is.GradientType.Radial);else if(e.gradientType!==is.GradientType.Angular)throw new Error("Unknown gradient")}else o.push([Math.floor(255*t.color.red),Math.floor(255*t.color.green),Math.floor(255*t.color.blue),t.color.alpha]);s.push(t.isEnabled)}));const l=[],h=[],u=[];r&&r.forEach((t=>{l.push([Math.floor(255*t.color.red),Math.floor(255*t.color.green),Math.floor(255*t.color.blue),t.color.alpha]),h.push(t.isEnabled),u.push(t.thickness||0)}));const c=[];return n&&n.dashPattern.forEach((t=>{c.push(t)})),{tagName:i.Polyline,props:{uuid:t.do_objectID,name:t.name,points:e,isClosed:t.isClosed,style:{left:R,top:O,right:I,bottom:M,width:w,height:x,visible:A,opacity:C,fill:o,fillEnable:s,stroke:l,strokeEnable:h,strokeWidth:u,strokeDasharray:c,translateX:S,translateY:E,rotateZ:k}}}}}))}function Ll(t){const e=/{(.+),\s*(.+)}/.exec(t);if(!e)throw new Error("Unknown point: "+t);return{x:parseFloat(e[1]),y:parseFloat(e[2])}}var Nl;function Fl(t){return t>=Nl.REFLOW}function Pl(t){return"visible"===t||"color"===t||"backgroundColor"===t||"mixBlendMode"===t}function Bl(t){return"pointerEvents"===t?Nl.NONE:"translateX"===t?Nl.TRANSLATE_X:"translateY"===t?Nl.TRANSLATE_Y:"rotateZ"===t?Nl.ROTATE_Z:"scaleX"===t?Nl.SCALE_X:"scaleY"===t?Nl.SCALE_Y:"transformOrigin"===t?Nl.TRANSFORM:"opacity"===t?Nl.OPACITY:"mixBlendMode"===t?Nl.MIX_BLEND_MODE:Pl(t)?Nl.REPAINT:Nl.REFLOW}!function(t){t[t.NONE=0]="NONE",t[t.CACHE=1]="CACHE",t[t.TRANSLATE_X=2]="TRANSLATE_X",t[t.TRANSLATE_Y=4]="TRANSLATE_Y",t[t.TRANSLATE=6]="TRANSLATE",t[t.ROTATE_Z=8]="ROTATE_Z",t[t.SCALE_X=16]="SCALE_X",t[t.SCALE_Y=32]="SCALE_Y",t[t.SCALE=48]="SCALE",t[t.TRANSFORM=64]="TRANSFORM",t[t.TRANSFORM_ALL=126]="TRANSFORM_ALL",t[t.OPACITY=128]="OPACITY",t[t.FILTER=256]="FILTER",t[t.MIX_BLEND_MODE=512]="MIX_BLEND_MODE",t[t.MASK=1024]="MASK",t[t.REPAINT=2048]="REPAINT",t[t.REFLOW=4096]="REFLOW",t[t.REFLOW_TRANSFORM=4222]="REFLOW_TRANSFORM",t[t.REBUILD=8192]="REBUILD"}(Nl||(Nl={}));var Dl={level:{RefreshLevel:Nl,isRepaint:function(t){return t<Nl.REFLOW},isReflow:Fl,isRepaintKey:Pl}};function Ul(t,e){e=rl(e);let r=Math.sin(e),n=Math.cos(e);return t[0]=t[5]=n,t[1]=r,t[4]=-r,t}function zl(t,e,r){let n=t.slice(0);return 0===e&&0===r||Hs(t)||(n=qs(e,r,n),n=Vs(n,-e,-r)),n}var jl={calRotateZ:Ul,calMatrix:function(t,e=0,r=0){const n=Xs();n[12]=t.translateX?kl(t.translateX,e):0,n[13]=t.translateY?kl(t.translateY,r):0;const i=t.rotateZ?t.rotateZ.v:0,a=t.scaleX?t.scaleX.v:1,o=t.scaleY?t.scaleY.v:1;return Hs(n)?Ul(n,i):i&&Js(n,rl(i)),1!==a&&(Hs(n)?n[0]=a:Ks(n,a)),1!==o&&(Hs(n)?n[5]=o:$s(n,o)),n},calMatrixByOrigin:zl},Wl={font:Ps,transform:jl,define:os,css:Rl},Xl={geom:ll,matrix:el,vector:Ws};let Hl;const Gl=new class{constructor(){this.rootTask=[],this.roots=[],this.task=[],this.now=Fs.now(),this.id=0}init(){let t=this,{task:e}=t;Fs.cancelAnimationFrame(t.id);let r=t.now=Fs.now();!function n(){Fs.cancelAnimationFrame(t.id),t.id=Fs.requestAnimationFrame((function(){let i=t.now=Fs.now();if(Hl||!e.length)return;let a=i-r;a=Math.max(a,0),r=i;let o=e.slice(0),s=o.length;!function(t,e,r){for(let n=0;n<e;n++){let e=t[n];e.before&&e.before(r)}}(o,s,a),function(t,e,r){for(let n=0;n<e;n++)t[n].after(r)}(o,s,a),e.length&&n()}))}()}onFrame(t){if(!t)return;let{task:e}=this;e.length||this.init(),cs(t)&&(t={after:t,ref:t}),e.push(t)}offFrame(t){if(!t)return;let{task:e}=this;for(let r=0,n=e.length;r<n;r++){let n=e[r];if(n===t||n.ref===t){e.splice(r,1);break}}e.length||(Fs.cancelAnimationFrame(this.id),this.now=0)}nextFrame(t){if(!t)return;let e=cs(t)?{after:r=>{t(r),this.offFrame(e)}}:{before:t.before,after:r=>{t.after&&t.after(r),this.offFrame(e)}};e.ref=t,this.onFrame(e)}pause(){Hl=!0}resume(){Hl&&(this.init(),Hl=!1)}addRoot(t){this.roots.push(t)}removeRoot(t){let e=this.roots.indexOf(t);e>-1&&this.roots.splice(e,1)}};var Yl={frame:Gl};let Zl;const Vl=new Uint8Array(16);function ql(){if(!Zl&&(Zl="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Zl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Zl(Vl)}const Jl=[];for(let t=0;t<256;++t)Jl.push((t+256).toString(16).slice(1));var Kl={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function $l(t,e,r){if(Kl.randomUUID&&!e&&!t)return Kl.randomUUID();const n=(t=t||{}).random||(t.rng||ql)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=n[t];return e}return function(t,e=0){return(Jl[t[e+0]]+Jl[t[e+1]]+Jl[t[e+2]]+Jl[t[e+3]]+"-"+Jl[t[e+4]]+Jl[t[e+5]]+"-"+Jl[t[e+6]]+Jl[t[e+7]]+"-"+Jl[t[e+8]]+Jl[t[e+9]]+"-"+Jl[t[e+10]]+Jl[t[e+11]]+Jl[t[e+12]]+Jl[t[e+13]]+Jl[t[e+14]]+Jl[t[e+15]]).toLowerCase()}(n)}function Ql(t,e,r,n,i){let a=t.createTexture();if(th(t,a,e),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r)t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r);else{if(!n||!i)throw new Error("Missing texImageSource or w/h");t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,i,0,t.RGBA,t.UNSIGNED_BYTE,null)}return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),a}function th(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}function eh(t,e,r,n,i,a){if(!i.length||!a)return;const o=new Float32Array(12*a),s=new Float32Array(12*a),l=new Float32Array(6*a);for(let n=0,a=i.length;n<a;n++){const{node:a,opacity:h,matrix:u,cache:c}=i[n],{texture:f}=c;th(t,f,0);const d=a._bbox||a.bbox,p=tl(d[0],d[1],d[2],d[3],u),g=rh(p.x1,p.y1,e,r),m=rh(p.x2,p.y2,e,r),y=rh(p.x3,p.y3,e,r),v=rh(p.x4,p.y4,e,r);let b=12*n;o[b]=g.x,o[b+1]=g.y,o[b+2]=v.x,o[b+3]=v.y,o[b+4]=m.x,o[b+5]=m.y,o[b+6]=v.x,o[b+7]=v.y,o[b+8]=m.x,o[b+9]=m.y,o[b+10]=y.x,o[b+11]=y.y,s[b]=0,s[b+1]=0,s[b+2]=0,s[b+3]=1,s[b+4]=1,s[b+5]=0,s[b+6]=0,s[b+7]=1,s[b+8]=1,s[b+9]=0,s[b+10]=1,s[b+11]=1,b=6*n,l[b]=h,l[b+1]=h,l[b+2]=h,l[b+3]=h,l[b+4]=h,l[b+5]=h}const h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW);const u=t.getAttribLocation(n,"a_position");t.vertexAttribPointer(u,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(u);const c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW);let f=t.getAttribLocation(n,"a_texCoords");t.vertexAttribPointer(f,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(f);const d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW);const p=t.getAttribLocation(n,"a_opacity");t.vertexAttribPointer(p,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(p);let g=t.getUniformLocation(n,"u_texture");t.uniform1i(g,0),t.drawArrays(t.TRIANGLES,0,6*a),t.deleteBuffer(h),t.deleteBuffer(c),t.deleteBuffer(d),t.disableVertexAttribArray(u),t.disableVertexAttribArray(f),t.disableVertexAttribArray(p)}function rh(t,e,r,n){return{x:t=t===r?0:(t-r)/r,y:e=e===n?0:(n-e)/n}}const nh={};class ih{constructor(t){this.available=!0,this.texture=t}release(t){this.available&&(this.available=!1,t.deleteTexture(this.texture))}releaseImg(t,e){if(!this.available)return;this.available=!1;const r=nh[e];r.count--,r.count||(delete nh[e],t.deleteTexture(this.texture))}static getInstance(t,e){const r=Ql(t,0,e);return new ih(r)}static getImgInstance(t,e,r){if(nh.hasOwnProperty(r)){return nh[r].count++,new ih(nh[r].value)}const n=Ql(t,0,e);return nh[r]={value:n,count:1},new ih(n)}}class ah extends hl{constructor(t){var e;super(),this.props=t,this.props.uuid=this.props.uuid||$l(),this.style=yl((e=t.style,Object.assign({left:0,top:0,right:"auto",bottom:"auto",width:"auto",height:"auto",lineHeight:"normal",fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",visible:!0,overflow:"visible",backgroundColor:[0,0,0,0],color:[0,0,0,1],opacity:1,fill:[[0,0,0,1]],fillEnable:[!1],stroke:[[0,0,0,1]],strokeEnable:[!1],strokeWidth:[1],strokeDasharray:[],letterSpacing:0,textAlign:"left",translateX:0,translateY:0,scaleX:1,scaleY:1,rotateZ:0,transformOrigin:["center","center"],mixBlendMode:"normal",pointerEvents:!0},e))),this.computedStyle={},this.width=0,this.height=0,this.minWidth=0,this.minHeight=0,this.isDestroyed=!0,this.struct={node:this,num:0,total:0,lv:0},this.refreshLevel=Nl.REFLOW,this._opacity=1,this.hasCacheOp=!1,this.hasCacheOpLv=!1,this.transform=Xs(),this.matrix=Xs(),this._matrixWorld=Xs(),this.hasCacheMw=!1,this.hasCacheMwLv=!1,this.hasContent=!1}didMount(){this.isDestroyed=!1;const t=this.parent,e=this.root=t.root;this.page=t.page,this.artBoard=t.artBoard;const r=this.props.uuid;r&&(e.refs[r]=this)}lay(t){this.refreshLevel=Nl.REFLOW,this.calReflowStyle();const{style:e,computedStyle:r}=this,{left:n,top:i,right:a,bottom:o,width:s,height:l}=e;let h=!1,u=!1,c=!1,f=!1;n.u!==Ko.AUTO&&(h=!0,r.left=kl(n,t.w)),a.u!==Ko.AUTO&&(c=!0,r.right=kl(a,t.w)),i.u!==Ko.AUTO&&(u=!0,r.top=kl(i,t.h)),o.u!==Ko.AUTO&&(f=!0,r.bottom=kl(o,t.h)),s.u!==Ko.AUTO?this.minWidth=this.width:this.minWidth=0,l.u!==Ko.AUTO?this.minHeight=this.height:this.minHeight=0,h&&c?this.width=r.width=t.w-r.left-r.right:h?(s.u!==Ko.AUTO?this.width=r.width:this.width=0,r.right=t.w-r.left-this.width):c&&(s.u!==Ko.AUTO?this.width=r.width:this.width=0,r.left=t.w-r.right-this.width),u&&f?this.height=t.h-r.top-r.bottom:u?(l.u!==Ko.AUTO?this.height=r.height:this.height=0,r.bottom=t.h-r.top-this.height):f&&(l.u!==Ko.AUTO?this.height=r.height:this.height=0,r.top=t.w-r.bottom-this.height)}layout(t){this.isDestroyed||(this.lay(t),this.calRepaintStyle(Nl.REFLOW),this._rect=void 0,this._bbox=void 0)}calReflowStyle(){const{style:t,computedStyle:e,parent:r}=this;e.fontFamily=t.fontFamily.v,e.fontSize=t.fontSize.v,e.fontWeight=t.fontWeight.v,e.fontStyle=t.fontStyle.v;const n=t.lineHeight;n.u===Ko.AUTO?e.lineHeight=Al(e):e.lineHeight=n.v,this.width=this.height=0,this.hasCacheOp=!1;const i=t.width,a=t.height;r&&(i.u!==Ko.AUTO&&(this.width=e.width=kl(i,r.width)),a.u!==Ko.AUTO&&(this.height=e.height=kl(a,r.height))),e.letterSpacing=t.letterSpacing.v,e.textAlign=t.textAlign.v}calRepaintStyle(t){const{style:e,computedStyle:r}=this;r.visible=e.visible.v,r.overflow=e.overflow.v,r.color=e.color.v,r.backgroundColor=e.backgroundColor.v,r.opacity=e.opacity.v,r.fill=e.fill.map((t=>t.v)),r.fillEnable=e.fillEnable.map((t=>t.v)),r.stroke=e.stroke.map((t=>t.v)),r.strokeEnable=e.strokeEnable.map((t=>t.v)),r.strokeWidth=e.strokeWidth.map((t=>t.v)),r.strokeDasharray=e.strokeDasharray.map((t=>t.v)),r.mixBlendMode=e.mixBlendMode.v,r.pointerEvents=e.pointerEvents.v,t&Nl.REFLOW_TRANSFORM&&this.calMatrix(t)}calMatrix(t){const{style:e,computedStyle:r,matrix:n,transform:i}=this;this.hasCacheMw=!1,this.hasCacheMwLv=!1;let a=!0;if((t>=Nl.REFLOW||t&Nl.TRANSFORM||t&Nl.SCALE_X&&!r.scaleX||t&Nl.SCALE_Y&&!r.scaleY)&&(a=!1),a){if(t&Nl.TRANSLATE_X){const t=kl(e.translateX,this.width),a=t-r.translateX;r.translateX=t,i[12]+=a,n[12]+=a}if(t&Nl.TRANSLATE_Y){const t=kl(e.translateY,this.height),a=t-r.translateY;r.translateY=t,i[13]+=a,n[13]+=a}if(t&Nl.ROTATE_Z){const t=e.rotateZ.v;r.rotateZ=t;const a=rl(t),o=Math.sin(a),s=Math.cos(a),l=r.scaleX,h=r.scaleY,u=n[0]=s*l,c=n[1]=o*l,f=n[4]=-o*h,d=n[5]=s*h,p=r.transformOrigin,g=p[0],m=p[1];n[12]=i[12]+g-u*g-m*f,n[13]=i[13]+m-c*g-m*d}if(t&Nl.SCALE){if(t&Nl.SCALE_X){const t=e.scaleX.v,a=t/r.scaleX;r.scaleX=t,i[0]*=a,i[1]*=a,i[2]*=a,n[0]*=a,n[1]*=a,n[2]*=a}if(t&Nl.SCALE_Y){const t=e.scaleY.v,a=t/r.scaleY;r.scaleY=t,i[4]*=a,i[5]*=a,i[6]*=a,n[4]*=a,n[5]*=a,n[6]*=a}const a=r.transformOrigin,o=a[0],s=a[1];n[12]=i[12]+o-i[0]*o-i[4]*s,n[13]=i[13]+s-i[1]*o-i[5]*s,n[14]=i[14]-i[2]*o-i[6]*s}}else{Ys(i),i[12]=r.translateX=r.left+kl(e.translateX,this.width),i[13]=r.translateY=r.top+kl(e.translateY,this.height);const t=e.rotateZ?e.rotateZ.v:0,a=e.scaleX?e.scaleX.v:1,o=e.scaleY?e.scaleY.v:1;r.rotateZ=t,r.scaleX=a,r.scaleY=o,Hs(i)?Ul(i,t):t&&Js(i,rl(t)),1!==a&&(Hs(i)?i[0]=a:Ks(i,a)),1!==o&&(Hs(i)?i[5]=o:$s(i,o));const s=e.transformOrigin.map(((t,e)=>kl(t,e?this.height:this.width)));r.transformOrigin=s;Zs(n,zl(i,s[0],s[1]))}return n}calContent(){return this.hasContent=!1}renderCanvas(){const t=this.canvasCache;t&&t.available&&t.release()}genTexture(t){this.textureCache&&this.textureCache.release(t);const e=this.canvasCache;e&&e.available&&(this.textureCache=ih.getInstance(t,this.canvasCache.offscreen.canvas),e.release())}releaseCache(t){var e,r;null===(e=this.canvasCache)||void 0===e||e.release(),null===(r=this.textureCache)||void 0===r||r.release(t)}remove(t){const{root:e,parent:r}=this;if(r){const t=r.children.indexOf(this);if(-1===t)throw new Error("Invalid index of remove()");r.children.splice(t,1);const{prev:e,next:n}=this;e&&(e.next=n),n&&(n.prev=e)}this.isDestroyed?t&&t(!0):(null==r||r.deleteStruct(this),e.addUpdate(this,[],Nl.REFLOW,!1,!0,t))}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.prev=this.next=this.parent=this.root=void 0)}structure(t){const e=this.struct;return e.lv=t,[e]}updateStyleData(t){const e=[],r=yl(t);for(let t in r)if(r.hasOwnProperty(t)){const n=r[t];vl(t,r,this.style)||(this.style[t]=n,e.push(t))}return{keys:e,formatStyle:r}}updateStyleCheck(t){if(!t.length)return!0;if(!this.computedStyle.visible&&t.indexOf("visible")<0)return!0;let e=this.parent;for(;e;){if(!e.computedStyle.visible)return!0;e=e.parent}return!1}updateStyle(t,e){const{keys:r}=this.updateStyleData(t);this.updateStyleCheck(r)?e&&e(!0):this.root.addUpdate(this,r,void 0,!1,!1,e)}getComputedStyle(){const t=this.computedStyle,e={};for(let r in t)e[r]="color"===r||"backgroundColor"===r||"transformOrigin"===r?t[r].slice(0):t[r];return e}getStyle(t){const e=this.computedStyle;return"color"===t||"backgroundColor"===t?_l(e[t]):e[t]}getBoundingClientRect(t=!1){const e=this.matrixWorld,r=t?this.bbox:this.rect,{x1:n,y1:i,x2:a,y2:o,x3:s,y3:l,x4:h,y4:u}=tl(r[0],r[1],r[2],r[3],e);return{left:Math.min(n,Math.min(a,Math.min(s,h))),top:Math.min(i,Math.min(o,Math.min(l,u))),right:Math.max(n,Math.max(a,Math.max(s,h))),bottom:Math.max(i,Math.max(o,Math.max(l,u))),points:[{x:n,y:i},{x:a,y:o},{x:s,y:l},{x:h,y:u}]}}startSizeChange(){const{style:t,computedStyle:e,parent:r}=this;if(!r)return;const{top:n,left:i,width:a,height:o,translateX:s,translateY:l}=t;if(a.u===Ko.PX&&i.u===Ko.PERCENT){const t=e.left-=.5*a.v;i.v=100*t/r.width,s.v=0,s.u=Ko.PX}if(o.u===Ko.PX&&n.u===Ko.PERCENT){const t=e.top-=.5*o.v;n.v=100*t/r.height,l.v=0,l.u=Ko.PX}}checkPosChange(){const{style:t,computedStyle:e,parent:r}=this;if(!r)return;const{top:n,right:i,bottom:a,left:o,width:s,height:l,translateX:h,translateY:u}=t,{translateX:c,translateY:f}=e,{width:d,height:p}=r;s.u===Ko.AUTO?(o.u===Ko.PX?o.v=c:o.u===Ko.PERCENT&&(o.v=100*c/d),i.u===Ko.PX?i.v=d-c-this.width:i.u===Ko.PERCENT&&(i.v=100*(d-c-this.width)/d)):h.u===Ko.PX&&(o.u===Ko.PX?o.v=c+.5*this.width:o.u===Ko.PERCENT&&(o.v=100*(c+.5*this.width)/d),i.u===Ko.PX?i.v=d-c-1.5*this.width:i.u===Ko.PERCENT&&(i.v=100*(d-c-1.5*this.width)/d)),this.resetTranslateX(o,s,h),o.u!==Ko.AUTO&&(e.left=kl(o,d)),i.u!==Ko.AUTO&&(e.right=kl(i,d)),o.u===Ko.AUTO&&(e.left=d-e.right-this.width),i.u===Ko.AUTO&&(e.right=d-e.left-this.width),l.u===Ko.AUTO?(n.u===Ko.PX?n.v=f:n.u===Ko.PERCENT&&(n.v=100*f/p),a.u===Ko.PX?a.v=p-f-this.height:a.u===Ko.PERCENT&&(a.v=100*(p-f-this.height)/p)):u.u===Ko.PX&&(n.u===Ko.PX?n.v=f+.5*this.height:n.u===Ko.PERCENT&&(n.v=100*(f+.5*this.height)/p),a.u===Ko.PX?a.v=p-f-1.5*this.height:a.u===Ko.PERCENT&&(a.v=100*(p-f-1.5*this.height)/p)),this.resetTranslateY(n,l,u),n.u!==Ko.AUTO&&(e.top=kl(n,p)),a.u!==Ko.AUTO&&(e.bottom=kl(a,p)),n.u===Ko.AUTO&&(e.top=d-e.bottom-this.height),a.u===Ko.AUTO&&(e.bottom=d-e.top-this.height),this.checkPosSizeUpward()}resetTranslateX(t,e,r){e.u===Ko.AUTO?r.v=0:e.u===Ko.PX&&t.u===Ko.PERCENT&&(r.v=-50,r.u=Ko.PERCENT)}resetTranslateY(t,e,r){e.u===Ko.AUTO?r.v=0:e.u===Ko.PX&&t.u===Ko.PERCENT&&(r.v=-50,r.u=Ko.PERCENT)}checkPosSizeUpward(){const t=this.root;let e=this.parent;for(;e&&e!==t&&e.adjustPosAndSize();)e=e.parent}adjustPosAndSize(){return!1}checkSizeChange(){const{style:t,computedStyle:e,parent:r}=this;if(!r)return;const{top:n,left:i,width:a,height:o,translateX:s,translateY:l}=t;if(a.u===Ko.PX&&i.u===Ko.PERCENT){const t=e.left+=.5*a.v;i.v=100*t/r.width,s.v=-50,s.u=Ko.PERCENT}if(o.u===Ko.PX&&n.u===Ko.PERCENT){const t=e.top+=.5*o.v;n.v=100*t/r.height,l.v=-50,l.u=Ko.PERCENT}this.checkPosSizeUpward()}getZoom(){return this.matrixWorld[0]}get opacity(){const t=this.root;if(!t)return this._opacity;let e=this.hasCacheOp;if(e){let t=this.parent;for(;t;){if(!t.hasCacheMw){e=!1;break}t=t.parent}}if(!e){const e=[];let r=-1,n=this.parent;for(;n;)e.push(n),n.hasCacheMw||(r=e.length),n=n.parent;if(r>-1){e.splice(r),e.reverse();for(let r=0,n=e.length;r<n;r++){const n=e[r];n._opacity=r&&n!==t?e[r-1]._opacity*n.computedStyle.opacity:n===t?n.computedStyle.opacity:n.parent._opacity*n.computedStyle.opacity}}n=this.parent,this._opacity=n?n._opacity*this.computedStyle.opacity:this.computedStyle.opacity}return this.hasCacheOp=!0,this._opacity}get matrixWorld(){const t=this.root;let e=this._matrixWorld;if(!t)return e;let r=this.hasCacheMw;if(r){let t=this.parent;for(;t;){if(!t.hasCacheMw){r=!1;break}t=t.parent}}if(!r){const r=[];let n=-1,i=this.parent;for(;i;)r.push(i),i.hasCacheMw||(n=r.length),i=i.parent;if(n>-1){r.splice(n),r.reverse();for(let e=0,n=r.length;e<n;e++){const n=r[e];if(e&&n!==t){const t=Gs(r[e-1]._matrixWorld,n.matrix);Zs(n._matrixWorld,t)}else if(n===t)Zs(n._matrixWorld,n.matrix);else{const t=Gs(n.parent._matrixWorld,n.matrix);Zs(n._matrixWorld,t)}}}if(i=this.parent,i){Zs(e,Gs(i._matrixWorld,this.matrix))}else Zs(e,this.matrix)}return this.hasCacheMw=!0,e}get rect(){return this._rect||(this._rect=new Float64Array(4),this._rect[0]=0,this._rect[1]=0,this._rect[2]=this.width,this._rect[3]=this.height),this._rect}get bbox(){if(!this._bbox){const t=this._rect||this.rect;this._bbox=t.slice(0)}return this._bbox}}class oh extends ah{constructor(t,e=[]){super(t),this.isGroup=!1,this.isArtBoard=!1,this.isPage=!1,this.children=e}didMount(){super.didMount();const{children:t}=this,e=t.length;if(e){const r=t[0];r.parent=this,r.didMount();let n=r;for(let r=1;r<e;r++){const e=t[r];e.parent=this,e.didMount(),n.next=e,e.prev=n,n=e}}}lay(t){super.lay(t);const{children:e,computedStyle:r}=this;for(let t=0,r=e.length;t<r;t++){e[t].layout({x:0,y:0,w:this.width,h:this.height})}for(let t=0,n=e.length;t<n;t++){const n=e[t];r.minWidth=this.minWidth=Math.max(this.minWidth,n.minWidth),r.minHeight=this.minHeight=Math.max(this.minHeight,n.minHeight)}}appendChild(t,e){const{root:r,children:n}=this,i=n.length;if(i){const e=n[n.length-1];e.next=t,t.prev=e}t.parent=this,t.root=r,n.push(t),this.isDestroyed?e&&e(!0):(t.didMount(),this.insertStruct(t,i),r.addUpdate(t,[],Nl.REFLOW,!0,!1,e))}prependChild(t,e){const{root:r,children:n}=this;if(n.length){const e=n[0];e.next=t,t.prev=e}t.parent=this,t.root=r,n.push(t),this.isDestroyed?e&&e(!0):(t.didMount(),this.insertStruct(t,0),r.addUpdate(t,[],Nl.REFLOW,!0,!1,e))}appendSelf(t,e){const{root:r,parent:n}=this;if(!n)throw new Error("Can not appendSelf without parent");t.parent=n,t.prev=this,t.next=this.next,this.next=t,t.root=r;const i=n.children,a=i.indexOf(this);i.splice(a+1,0,t),n.isDestroyed?e&&e(!0):(t.didMount(),n.insertStruct(t,a+1),r.addUpdate(t,[],Nl.REFLOW,!0,!1,e))}prependSelf(t,e){const{root:r,parent:n}=this;if(!n)throw new Error("Can not prependBefore without parent");t.parent=n,t.prev=this.prev,t.next=this,this.prev=t,t.root=r;const i=n.children,a=i.indexOf(this);i.splice(a,0,t),n.isDestroyed?e&&e(!0):(t.didMount(),n.insertStruct(t,a),r.addUpdate(t,[],Nl.REFLOW,!0,!1,e))}removeChild(t,e){t.parent===this?t.remove(e):Fs.error("Invalid parameter of removeChild()")}clearChildren(t){const{root:e,children:r}=this;if(r.length){if(this.isDestroyed)return r.splice(0),void(t&&t(!0));for(;r.length;){const t=r.pop();this.deleteStruct(t),t.destroy()}e.addUpdate(this,[],Nl.REFLOW,!1,!1,t)}}destroy(){const{isDestroyed:t,children:e}=this;if(!t){for(let t=0,r=e.length;t<r;t++)e[t].destroy();super.destroy()}}structure(t){let e=super.structure(t);return this.children.forEach((r=>{e=e.concat(r.structure(t+1))})),e[0].num=this.children.length,e[0].total=e.length-1,e}insertStruct(t,e){const{struct:r,root:n}=this,i=t.structure(r.lv+1),a=n.structs;let o;if(e){const t=this.children[e-1].struct,r=t.total;o=a.indexOf(t)+r+1}else o=a.indexOf(r)+1;a.splice(o,0,...i);const s=i[0].total+1;r.num++,r.total+=s;let l=this.parent;for(;l;)l.struct.total+=s,l=l.parent}deleteStruct(t){const e=t.struct,r=e.total+1,n=this.root.structs,i=n.indexOf(e);n.splice(i,r);const a=this.struct;a.num--,a.total-=r;let o=this.parent;for(;o;)o.struct.total-=r,o=o.parent}getNodeByPointAndLv(t,e,r=!1,n=!1,i){const a=this.children;for(let o=a.length-1;o>=0;o--){const s=a[o],{struct:l,computedStyle:h,rect:u,matrixWorld:c}=s;if(il(t,e,u[0],u[1],u[2],u[3],c)){if(void 0===i){if(s instanceof oh){const a=s.getNodeByPointAndLv(t,e,r,n,i);if(a)return a}return this.getNodeCheck(s,h,r,n)}if(l.lv===i)return this.getNodeCheck(s,h,r,n);if(l.lv<i&&s instanceof oh){const a=s.getNodeByPointAndLv(t,e,r,n,i);if(a)return a}}}}getNodeCheck(t,e,r,n){if(e.pointerEvents&&(r||!(t instanceof oh&&t.isGroup))&&(n||!(t instanceof oh&&t.isArtBoard)))return t}getStructs(){if(!this.root)return;const t=this.root.structs,e=this.struct,r=t.indexOf(e);return t.slice(r,r+e.total+1)}}class sh extends oh{constructor(t,e){super(t,e),this.hasBackgroundColor=t.hasBackgroundColor,this.isArtBoard=!0,this.artBoard=this}calContent(){return!1}collectBsData(t,e,r,n,i){const{width:a,height:o,matrixWorld:s}=this,l=tl(-3,-3,0,0,s),h=rh(l.x1,l.y1,n,i),u=rh(l.x2,l.y2,n,i),c=rh(l.x3,l.y3,n,i),f=rh(l.x4,l.y4,n,i),d=tl(a,-3,a+3,0,s),p=rh(d.x1,d.y1,n,i),g=rh(d.x2,d.y2,n,i),m=rh(d.x3,d.y3,n,i),y=rh(d.x4,d.y4,n,i),v=tl(a,o,a+3,o+3,s),b=rh(v.x1,v.y1,n,i),_=rh(v.x2,v.y2,n,i),w=rh(v.x3,v.y3,n,i),x=rh(v.x4,v.y4,n,i),S=tl(-3,o,0,o+3,s),E=rh(S.x1,S.y1,n,i),A=rh(S.x2,S.y2,n,i),C=rh(S.x3,S.y3,n,i),k=rh(S.x4,S.y4,n,i),T=96*t;e[T]=h.x,e[T+1]=h.y,e[T+2]=f.x,e[T+3]=f.y,e[T+4]=u.x,e[T+5]=u.y,e[T+6]=f.x,e[T+7]=f.y,e[T+8]=u.x,e[T+9]=u.y,e[T+10]=c.x,e[T+11]=c.y,e[T+12]=u.x,e[T+13]=u.y,e[T+14]=c.x,e[T+15]=c.y,e[T+16]=p.x,e[T+17]=p.y,e[T+18]=c.x,e[T+19]=c.y,e[T+20]=p.x,e[T+21]=p.y,e[T+22]=y.x,e[T+23]=y.y,e[T+24]=p.x,e[T+25]=p.y,e[T+26]=y.x,e[T+27]=y.y,e[T+28]=g.x,e[T+29]=g.y,e[T+30]=y.x,e[T+31]=y.y,e[T+32]=g.x,e[T+33]=g.y,e[T+34]=m.x,e[T+35]=m.y,e[T+36]=y.x,e[T+37]=y.y,e[T+38]=b.x,e[T+39]=b.y,e[T+40]=m.x,e[T+41]=m.y,e[T+42]=b.x,e[T+43]=b.y,e[T+44]=m.x,e[T+45]=m.y,e[T+46]=_.x,e[T+47]=_.y,e[T+48]=b.x,e[T+49]=b.y,e[T+50]=x.x,e[T+51]=x.y,e[T+52]=_.x,e[T+53]=_.y,e[T+54]=x.x,e[T+55]=x.y,e[T+56]=_.x,e[T+57]=_.y,e[T+58]=w.x,e[T+59]=w.y,e[T+60]=A.x,e[T+61]=A.y,e[T+62]=C.x,e[T+63]=C.y,e[T+64]=b.x,e[T+65]=b.y,e[T+66]=C.x,e[T+67]=C.y,e[T+68]=b.x,e[T+69]=b.y,e[T+70]=x.x,e[T+71]=x.y,e[T+72]=E.x,e[T+73]=E.y,e[T+74]=k.x,e[T+75]=k.y,e[T+76]=A.x,e[T+77]=A.y,e[T+78]=k.x,e[T+79]=k.y,e[T+80]=A.x,e[T+81]=A.y,e[T+82]=C.x,e[T+83]=C.y,e[T+84]=f.x,e[T+85]=f.y,e[T+86]=E.x,e[T+87]=E.y,e[T+88]=c.x,e[T+89]=c.y,e[T+90]=E.x,e[T+91]=E.y,e[T+92]=c.x,e[T+93]=c.y,e[T+94]=A.x,e[T+95]=A.y,r[T]=0,r[T+1]=0,r[T+2]=0,r[T+3]=.3,r[T+4]=.3,r[T+5]=0,r[T+6]=0,r[T+7]=.3,r[T+8]=.3,r[T+9]=0,r[T+10]=.3,r[T+11]=.3,r[T+12]=.3,r[T+13]=0,r[T+14]=.3,r[T+15]=.3,r[T+16]=.7,r[T+17]=0,r[T+18]=.3,r[T+19]=.3,r[T+20]=.7,r[T+21]=0,r[T+22]=.7,r[T+23]=.3,r[T+24]=.7,r[T+25]=0,r[T+26]=.7,r[T+27]=.3,r[T+28]=1,r[T+29]=0,r[T+30]=.7,r[T+31]=.3,r[T+32]=1,r[T+33]=0,r[T+34]=1,r[T+35]=.3,r[T+36]=.7,r[T+37]=.3,r[T+38]=.7,r[T+39]=.7,r[T+40]=1,r[T+41]=.3,r[T+42]=.7,r[T+43]=.7,r[T+44]=1,r[T+45]=.3,r[T+46]=1,r[T+47]=.7,r[T+48]=.7,r[T+49]=.7,r[T+50]=.7,r[T+51]=1,r[T+52]=1,r[T+53]=.7,r[T+54]=.7,r[T+55]=1,r[T+56]=1,r[T+57]=.7,r[T+58]=1,r[T+59]=1,r[T+60]=.3,r[T+61]=.7,r[T+62]=.3,r[T+63]=1,r[T+64]=.7,r[T+65]=.7,r[T+66]=.3,r[T+67]=1,r[T+68]=.7,r[T+69]=.7,r[T+70]=.7,r[T+71]=1,r[T+72]=0,r[T+73]=.7,r[T+74]=0,r[T+75]=1,r[T+76]=.3,r[T+77]=.7,r[T+78]=0,r[T+79]=1,r[T+80]=.3,r[T+81]=.7,r[T+82]=.3,r[T+83]=1,r[T+84]=0,r[T+85]=.3,r[T+86]=0,r[T+87]=.7,r[T+88]=.3,r[T+89]=.3,r[T+90]=0,r[T+91]=.7,r[T+92]=.3,r[T+93]=.3,r[T+94]=.3,r[T+95]=.7}renderBgc(t,e,r){const n=this.root.programs,{width:i,height:a,matrixWorld:o,computedStyle:s}=this,l=n.colorProgram;t.useProgram(l);const h=tl(0,0,i,a,o),u=new Float32Array(12),c=rh(h.x1,h.y1,e,r),f=rh(h.x2,h.y2,e,r),d=rh(h.x3,h.y3,e,r),p=rh(h.x4,h.y4,e,r);u[0]=c.x,u[1]=c.y,u[2]=p.x,u[3]=p.y,u[4]=f.x,u[5]=f.y,u[6]=p.x,u[7]=p.y,u[8]=f.x,u[9]=f.y,u[10]=d.x,u[11]=d.y;const g=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,g),t.bufferData(t.ARRAY_BUFFER,u,t.STATIC_DRAW);const m=t.getAttribLocation(l,"a_position");t.vertexAttribPointer(m,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(m);let y=t.getUniformLocation(l,"u_color");const v=xl(s.backgroundColor);t.uniform4f(y,v[0],v[1],v[2],v[3]),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(g),t.disableVertexAttribArray(m)}}sh.BOX_SHADOW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMC1jMDAwIDc5LjE3MWMyN2ZhYiwgMjAyMi8wOC8xNi0yMjozNTo0MSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Q0YxOEMzRkFDNTZDMTFFRDhBRDU5QTAxNUFGMjI5QTAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Q0YxOEMzRjlDNTZDMTFFRDhBRDU5QTAxNUFGMjI5QTAiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI0LjAgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCRDFFMUYwM0M0QTExMUVEOTIxOUREMjgyNjUzODRENSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCRDFFMUYwNEM0QTExMUVEOTIxOUREMjgyNjUzODRENSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrnWkg0AAACjSURBVHja7JXhCsIwDISTLsr2/i8rbjZueMGjbJhJ/+nBQSj0o224VOUllbe4zsi5VgIUWE9AHa6wGMEMHuCMHvAC1xY4rr4CqInTbbD76luc0uiKA2AT4BnggnoOjlEj4qrb2iUJFNqn/Ibc4XD5AKx7DSzSWX/gLwDtIOwR+Mxg8D2gN0GXE9GLfR5Ab4IuXwyHADrHrMv46j5gtfcX8BRgAOX7OzJVtOaeAAAAAElFTkSuQmCC",sh.BOX_SHADOW_TEXTURE=null;const lh={};class hh{constructor(t,e,r=0,n=0){this.available=!1,this.offscreen=Fs.getOffscreenCanvas(t,e),this.w=t,this.h=e,this.dx=r,this.dy=n}release(){this.available&&(this.available=!1,this.offscreen.release())}releaseImg(t){if(!this.available)return;this.available=!1;const e=lh[t];e.count--,e.count||(delete lh[t],this.offscreen.release())}getCount(t){var e;return null===(e=lh[t])||void 0===e?void 0:e.count}static getInstance(t,e,r=0,n=0){return new hh(t,e,r,n)}static getImgInstance(t,e,r){if(lh.hasOwnProperty(r)){const t=lh[r];return t.count++,t.value}const n=new hh(t,e,0,0);return lh[r]={value:n,count:1},n}}class uh extends ah{constructor(t){super(t);const e=this._src=t.src;if(this.loader={error:!1,loading:!1,src:e,width:0,height:0,onlyImg:!0},e){/^data:image\/(\w+);base64,/.test(e);const r=Fs.IMG[e];r?r.state===Fs.LOADED&&(r.success?(this.loader.source=r.source,this.loader.width=r.source.width,this.loader.height=r.source.height):this.loader.error=!0):Fs.measureImg(e,(r=>{e===this.loader.src&&(r.success?cs(t.onLoad)&&t.onLoad():cs(t.onError)&&t.onError())}))}else this.loader.error=!0}lay(t){super.lay(t);const e=this.loader.src;if(e){const t=Fs.IMG[e];t&&t.state!==Fs.LOADING?t&&t.state===Fs.LOADED&&(this.loader.loading=!1,t.success?(this.loader.source=t.source,this.loader.width=t.width,this.loader.height=t.height):this.loader.error=!0):this.loader.loading||this.loadAndRefresh()}}loadAndRefresh(){const t=this.loader;t.source=void 0,t.error=!1,t.loading=!0,Fs.measureImg(t.src,(e=>{e.url===t.src&&(t.loading=!1,e.success?(t.source=e.source,t.width=e.width,t.height=e.height,this.isDestroyed||this.root.addUpdate(this,[],Nl.REPAINT,!1,!1,void 0)):t.error=!0)}))}calContent(){let t=super.calContent();const{loader:e}=this;return t?e.onlyImg=!1:(e.onlyImg=!0,e.source&&(t=!0)),this.hasContent=t}renderCanvas(){super.renderCanvas();const{loader:t}=this;if(t.onlyImg){const e=this.canvasCache=hh.getImgInstance(t.width,t.height,this.src);e.available=!0,1===e.getCount(this._src)&&e.offscreen.ctx.drawImage(t.source,0,0)}}genTexture(t){const{loader:e}=this;if(!e.onlyImg)return super.genTexture(t);{const e=this.canvasCache;this.textureCache=ih.getImgInstance(t,e.offscreen.canvas,this.src),e.release()}}releaseCache(t){var e,r;const{loader:n}=this;n.onlyImg?(null===(e=this.canvasCache)||void 0===e||e.releaseImg(this._src),null===(r=this.textureCache)||void 0===r||r.releaseImg(t,this._src)):super.releaseCache(t)}get src(){return this._src}set src(t){this.src=t;const e=this.loader;t===e.src||this.isDestroyed||!t&&e.error?t&&t!==e.src&&(e.src=t,Fs.measureImg(t,(r=>{if(e.src===t){const{onLoad:t,onError:e}=this.props;r.success?t&&cs(t)&&t():e&&cs(e)&&e()}}))):(e.src=t,this.loadAndRefresh())}}class ch extends oh{constructor(t,e){super(t,e),this.isGroup=!0}updateStyle(t,e){const{keys:r,formatStyle:n}=this.updateStyleData(t),i=this.parent,a=this.computedStyle;if(t.hasOwnProperty("left")){const t=kl(n.left,i.width);if(i.width-a.right-t<this.minWidth)if(n.left.u===Ko.PX);else if(n.left.u===Ko.PERCENT){const t=100*(i.width-a.right-this.minWidth)/i.width;if(n.left.v===t){let t=r.indexOf("left");r.splice(t,1)}else n.left.v=this.style.left.v=t}}else if(t.hasOwnProperty("right")){const t=kl(n.right,i.width);if(i.width-a.left-t<this.minWidth)if(n.right.u===Ko.PX);else if(n.right.u===Ko.PERCENT){const t=100*(i.width-a.left-this.minWidth)/i.width;if(n.right.v===t){let t=r.indexOf("right");r.splice(t,1)}else n.right.v=this.style.right.v=t}}if(t.hasOwnProperty("top")){const t=kl(n.top,i.height);if(i.height-a.bottom-t<this.minHeight)if(n.top.u===Ko.PX);else if(n.top.u===Ko.PERCENT){const t=100*(i.height-a.bottom-this.minHeight)/i.height;if(n.top.v===t){let t=r.indexOf("top");r.splice(t,1)}else n.top.v=this.style.top.v=t}}else if(t.hasOwnProperty("bottom")){const t=kl(n.bottom,i.height);if(i.height-a.top-t<this.minHeight)if(n.bottom.u===Ko.PX);else if(n.bottom.u===Ko.PERCENT){const t=100*(i.height-a.top-this.minHeight)/i.height;if(n.bottom.v===t){let t=r.indexOf("bottom");r.splice(t,1)}else n.bottom.v=this.style.bottom.v=t}}this.updateStyleCheck(r)?e&&e(!0):this.root.addUpdate(this,r,void 0,!1,!1,e)}getChildRect(t){const{width:e,height:r,matrix:n}=t;let{x1:i,y1:a,x2:o,y2:s,x3:l,y3:h,x4:u,y4:c}=tl(0,0,e,r,n);return{minX:Math.min(i,o,l,u),minY:Math.min(a,s,h,c),maxX:Math.max(i,o,l,u),maxY:Math.max(a,s,h,c)}}getChildrenRect(){const{width:t,height:e,children:r}=this;let n=r.length?this.getChildRect(r[0]):{minX:0,minY:0,maxX:t,maxY:e};for(let t=1,e=r.length;t<e;t++){const e=r[t],{minX:i,minY:a,maxX:o,maxY:s}=this.getChildRect(e);n.minX=Math.min(n.minX,i),n.minY=Math.min(n.minY,a),n.maxX=Math.max(n.maxX,o),n.maxY=Math.max(n.maxY,s)}return n}adjustPosAndSizeSelf(t,e,r,n){const{style:i,computedStyle:a,parent:o,root:s}=this;if(!o||!s)return;const{width:l,height:h}=o,{top:u,right:c,bottom:f,left:d,width:p,height:g,translateX:m,translateY:y}=i;t&&(d.u===Ko.PX?d.v+=t:d.u===Ko.PERCENT&&(d.v+=100*t/l),a.left+=t),r&&(c.u===Ko.PX?c.v-=r:c.u===Ko.PERCENT&&(c.v-=100*r/l),a.right-=r),this.width=a.width=o.width-a.left-a.right,this.resetTranslateX(d,p,m),e&&(u.u===Ko.PX?u.v+=e:u.u===Ko.PERCENT&&(u.v+=100*e/h),a.top+=e),n&&(f.u===Ko.PX?f.v-=n:f.u===Ko.PERCENT&&(f.v-=100*n/h),a.bottom-=n),this.height=a.height=o.height-a.top-a.bottom,this.resetTranslateY(u,g,y),this.refreshLevel|=Nl.TRANSFORM,s.rl|=Nl.TRANSFORM,this.calMatrix(Nl.TRANSFORM),this._rect=void 0,this._bbox=void 0}adjustPosAndSizeChild(t,e,r,n,i,a,o){const{style:s,computedStyle:l,root:h}=t;if(!h)return;const{top:u,right:c,bottom:f,left:d,width:p,height:g,translateX:m,translateY:y}=s;(e||n)&&(l.left-=e,d.u===Ko.PX?d.v=l.left:d.u===Ko.PERCENT&&(d.v=100*l.left/a),l.right+=n,c.u===Ko.PX?c.v=l.right:c.u===Ko.PERCENT&&(c.v=100*l.right/a)),this.resetTranslateX(d,p,m),(r||i)&&(l.top-=r,u.u===Ko.PX?u.v=l.top:u.u===Ko.PERCENT&&(u.v=100*l.top/o),l.bottom+=i,f.u===Ko.PX?f.v=l.bottom:f.u===Ko.PERCENT&&(f.v=100*l.bottom/o)),this.resetTranslateY(u,g,y),t.refreshLevel|=Nl.TRANSFORM,h.rl|=Nl.TRANSFORM,t.calMatrix(Nl.TRANSFORM),t._rect=void 0,t._bbox=void 0}adjustPosAndSize(){const{children:t,width:e,height:r}=this,n=this.getChildrenRect(),i=n.minX,a=n.minY,o=n.maxX-e,s=n.maxY-r;if(i||a||o||s){this.adjustPosAndSizeSelf(i,a,o,s);const{width:e,height:r}=this;for(let n=0,l=t.length;n<l;n++){const l=t[n];this.adjustPosAndSizeChild(l,i,a,o,s,e,r)}return!0}return!1}checkSizeChange(){super.checkSizeChange(),this.checkPosSizeDownward(),this.checkPosSizeUpward()}checkPosSizeDownward(){const{children:t}=this;for(let e=0,r=t.length;e<r;e++){const r=t[e];r instanceof ch&&r.checkPosSizeDownward()}return this.adjustPosAndSize()}}class fh{constructor(t,e,r,n,i,a,o){this.x=0,this.y=0,this.w=0,this.lineHeight=0,this.baseline=0,this.x=t,this.y=e,this.w=r,this.str=a,this.lineHeight=n,this.baseline=i,this.font=o}}class dh{constructor(t){this.y=t,this.w=0,this.list=[]}add(t){this.list.push(t),this.w+=t.w}verticalAlign(){const{baseline:t,list:e}=this;for(let r=0,n=e.length;r<n;r++){const n=e[r],i=n.baseline;if(i!==t){const e=t-i;n.y+=e}}}offsetX(t){const e=this.list;for(let r=0,n=e.length;r<n;r++)e[r].x+=t}get size(){return this.list.length}get baseline(){let t=0;const e=this.list;for(let r=0,n=e.length;r<n;r++)t=Math.max(t,e[r].baseline);return t}get lineHeight(){let t=0;const e=this.list;for(let r=0,n=e.length;r<n;r++)t=Math.max(t,e[r].lineHeight);return t}}function ph(t,e,r,n,i,a,o){let s=e,l=r,h=0,u=!1,c=Math.round(i/a);for(c<=0?c=1:c>r-e&&(c=r-e);s<l;){let f=t.measureText(n.slice(e,e+c)).width;if(o&&(f+=c*o),f===i){h=i,u=!0;break}if(f>i+1e-10){if(u=!0,1===c){h=f;break}if(s===l-1||s-e==c-1){c=s-e;break}l=c+e-1;let t=Math.round((f-i)/a);t<=0&&(t=1),c-=t,c<s-e&&(c=s-e)}else{if(h=f,c===r-e)break;s=c+e;let t=Math.round((i-f)/a);t<=0&&(t=1),c+=t,c>l-e&&(c=l-e)}}for(let r=e,i=e+c;r<i;r++)if("\n"===n.charAt(r)){c=r-e+1,h=t.measureText(n.slice(e,e+c-1)).width,o&&(h+=c*o),u=!0;break}return{hypotheticalNum:c,rw:h,newLine:u}}class gh extends ah{constructor(t){super(t),this.content=t.content,this.rich=t.rich,this.lineBoxList=[]}lay(t){super.lay(t);const{rich:e,style:r,computedStyle:n,content:i,lineBoxList:a}=this,o=r.width.u===Ko.AUTO&&(r.left.u===Ko.AUTO||r.right.u===Ko.AUTO),s=r.height.u===Ko.AUTO&&(r.top.u!==Ko.AUTO||r.bottom.u!==Ko.AUTO);let l,h,u,c,f=0,d=i.length,p=0,g=0,m=0;a.splice(0);let y=new dh(m);a.push(y);const v=[];if(e&&e.length)for(let t=0,r=e.length;t<r;t++){v[e[t].location]=t}const b=Fs.getFontCanvas().ctx;if(e&&e.length){const t=e[0];h=t.letterSpacing,l=.8*t.fontSize+h,u=t.lineHeight,c=Cl(t),b.font=Sl(t)}else h=n.letterSpacing,l=.8*n.fontWeight+h,u=n.lineHeight,c=Cl(n),b.font=Sl(n);const _=o?Number.MAX_SAFE_INTEGER:this.width,w=s?Number.MAX_SAFE_INTEGER:this.height;for(;f<d&&(s||!(m>=w));){const t=v[f];if(f&&e&&t){const r=e[t];h=r.letterSpacing,l=.8*r.fontSize+h,u=r.lineHeight,c=Cl(r),b.font=Sl(r)}if("\n"===i.charAt(f)){f++,m+=u,y.size?(y.verticalAlign(),y=new dh(m),a.push(y)):y.y=m;continue}let r=d;if(e&&e.length)for(let t=f+1;t<r;t++)if(v[t]){r=t;break}if(b.measureText(i.charAt(f)).width>_-g+1e-10&&g){g=0,m+=y.lineHeight,f<d&&(y.verticalAlign(),y=new dh(m),a.push(y));continue}const{hypotheticalNum:n,rw:o,newLine:s}=ph(b,f,r,i,_-g,l,h),w=new fh(g,m,o,u,c,i.slice(f,f+n),b.font);y.add(w),f+=n,s?(g=0,m+=y.lineHeight,p=Math.max(p,y.w),f<d&&(y.verticalAlign(),y=new dh(m),a.push(y))):g+=o}p=Math.max(p,y.w),o&&(this.width=n.width=p),s&&(this.height=n.height=y.y+y.lineHeight),y.verticalAlign();const x=n.textAlign;if(x===$o.CENTER)for(let t=0,e=a.length;t<e;t++){const e=a[t],r=this.width-e.w;r&&e.offsetX(.5*r)}else if(x===$o.RIGHT)for(let t=0,e=a.length;t<e;t++){const e=a[t],r=this.width-e.w;r&&e.offsetX(r)}}calContent(){return this.hasContent=!!this.content}renderCanvas(){super.renderCanvas();const{height:t,rich:e,computedStyle:r,lineBoxList:n}=this,i=this.canvasCache=hh.getInstance(this.width,t);i.available=!0;const a=i.offscreen.ctx,o=[0];let s;if(e&&e.length){for(let t=0,r=e.length;t<r;t++){o[e[t].location]=t}s=_l(e[0].color)}else s=_l(r.color);let l=0;for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.y>=t)break;const h=i.list;for(let t=0,r=h.length;t<r;t++){const r=o[l];if(e&&e.length&&l&&r){s=_l(e[r].color)}const n=h[t];a.font=n.font,a.fillStyle=s,a.fillText(n.str,n.x,n.y+n.baseline),l+=n.str.length}}}}class mh extends ah{constructor(t){super(t)}calContent(){return!0}}function yh(t,e,r=0,n=0){if(!e||!e.length)return;let i=-1;for(let t=0,r=e.length;t<r;t++){let r=e[t];if(Array.isArray(r)&&r.length){i=t;break}}if(-1===i)return;t.beginPath();let a=e[i];4===a.length?t.moveTo(a[2]+r,a[3]+n):6===a.length?t.moveTo(a[4]+r,a[5]+n):t.moveTo(a[0]+r,a[1]+n);for(let a=i+1,o=e.length;a<o;a++){let i=e[a];Array.isArray(i)&&(2===i.length?t.lineTo(i[0]+r,i[1]+n):4===i.length?t.quadraticCurveTo(i[0]+r,i[1]+n,i[2]+r,i[3]+n):6===i.length&&t.bezierCurveTo(i[0]+r,i[1]+n,i[2]+r,i[3]+n,i[4]+r,i[5]+n))}t.closePath()}function vh(t){return t.curveMode===a.Straight&&t.cornerRadius>0}class bh extends mh{constructor(t){super(t)}buildPoints(){const t=this.props,{width:e,height:r}=this,n=[],i=t.points;let o=!1;for(let t=0,a=i.length;t<a;t++){const a=i[t],s={x:a.x*e,y:a.y*r};vh(a)?o=!0:(a.hasCurveTo&&(s.tx=a.tx*e,s.ty=a.ty*r),a.hasCurveFrom&&(s.fx=a.fx*e,s.fy=a.fy*r)),n.push(s)}if(o)for(let t=i.length,o=t-1;o>=0;o--){const s=i[o];if(!vh(s))continue;const l=(o+1)%t,h=i[o?o-1:t-1],u=i[l];let c=s.cornerRadius;const f=vh(h),d=f||h.curveMode===a.Straight||!h.hasCurveFrom,p=vh(u),g=p||u.curveMode===a.Straight||!u.hasCurveTo;if(d&&g){const t=al(h.x*e,h.y*r,s.x*e,s.y*r),i=al(s.x*e,s.y*r,u.x*e,u.y*r),a=ol(al(h.x*e,h.y*r,u.x*e,u.y*r),t,i),l=Math.tan(.5*a);let d=c/l;const g=Math.min(f?.5*t:t,p?.5*i:i);d>g&&(d=g,c=d*l);const m=js(h.x-s.x,h.y-s.y),y=js(u.x-s.x,u.y-s.y),v={x:m.x*d,y:m.y*d};v.x+=n[o].x,v.y+=n[o].y;const b={x:y.x*d,y:y.y*d};b.x+=n[o].x,b.y+=n[o].y;const _=sl(a),w={x:m.x*-c*_,y:m.y*-c*_};w.x+=v.x,w.y+=v.y;const x={x:y.x*-c*_,y:y.y*-c*_};x.x+=b.x,x.y+=b.y,n.splice(o,1,{x:v.x,y:v.y,fx:w.x,fy:w.y},{x:b.x,y:b.y,tx:x.x,ty:x.y})}}const s=n[0],l=[[s.x,s.y]],h=n.length;for(let t=1;t<h;t++){const e=n[t],r=n[t-1],i=[e.x,e.y];void 0!==e.tx&&i.unshift(e.tx,e.ty),void 0!==r.fx&&i.unshift(r.fx,r.fy),l.push(i)}if(t.isClosed){const t=n[h-1],e=[s.x,s.y];void 0!==s.tx&&e.unshift(s.tx,s.ty),void 0!==t.fx&&e.unshift(t.fx,t.fy),l.push(e)}this.points=l}renderCanvas(){super.renderCanvas(),this.points||this.buildPoints();const t=this.points,e=this._bbox||this.bbox,r=e[0],n=e[1],i=e[2]-r,a=e[3]-n,o=this.canvasCache=hh.getInstance(i,a,r,n);o.available=!0;const s=o.offscreen.ctx,{fill:l,fillEnable:h,stroke:u,strokeEnable:c,strokeWidth:f,strokeDasharray:d}=this.computedStyle;s.setLineDash(d);for(let e=0,i=l.length;e<i;e++){if(!h[e])continue;const i=l[e];if(Array.isArray(i)){if(!i[3])continue;s.fillStyle=_l(i)}else{const t=gl(i.stops,i.d,0,0,this.width,this.height,-r,-n),e=s.createLinearGradient(t.x1,t.y1,t.x2,t.y2);t.stop.forEach((t=>{e.addColorStop(t[1],_l(t[0]))})),s.fillStyle=e}yh(s,t,-r,-n),s.fill()}for(let e=0,i=u.length;e<i;e++){if(!c[e]||!f[e])continue;const i=u[e];if(Array.isArray(i))s.strokeStyle=_l(i),s.lineWidth=f[e];else{const t=gl(i.stops,i.d,0,0,this.width,this.height,-r,-n),e=s.createLinearGradient(t.x1,t.y1,t.x2,t.y2);t.stop.forEach((t=>{e.addColorStop(t[1],_l(t[0]))})),s.fillStyle=e}yh(s,t,-r,-n),s.stroke()}}get bbox(){if(!this._bbox){const t=this._bbox=super.bbox;this.points||this.buildPoints();const{strokeWidth:e,strokeEnable:r}=this.computedStyle;let n=0;e.forEach(((t,e)=>{r[e]&&(n=Math.max(n,.5*t))}));const i=this.points,a=i[0];let o,s;4===a.length?(o=a[2],s=a[3]):6===a.length?(o=a[4],s=a[5]):(o=a[0],s=a[1]),t[0]=Math.min(t[0],o-n),t[1]=Math.min(t[1],s-n),t[2]=Math.max(t[2],o+n),t[3]=Math.max(t[3],s+n);for(let e=1,r=i.length;e<r;e++){const r=i[e];let a,l;4===r.length||6===r.length||(a=r[0],l=r[1],t[0]=Math.min(t[0],a-n),t[1]=Math.min(t[1],l-n),t[2]=Math.max(t[2],a+n),t[3]=Math.max(t[3],l+n)),o=a,s=l}}return this._bbox}}function _h(t){if(t.tagName===i.ArtBoard){const e=[];for(let r=0,n=t.children.length;r<n;r++){const n=_h(t.children[r]);n&&e.push(n)}return new sh(t.props,e)}if(t.tagName===i.Group){const e=[];for(let r=0,n=t.children.length;r<n;r++){const n=_h(t.children[r]);n&&e.push(n)}return new ch(t.props,e)}return t.tagName===i.Bitmap?new uh(t.props):t.tagName===i.Text?new gh(t.props):t.tagName===i.Polyline?new bh(t.props):void 0}class wh extends oh{constructor(t,e){super(t,e),this.isPage=!0,this.page=this}initIfNot(){if(this.json){for(let t=0,e=this.json.children.length;t<e;t++){const e=_h(this.json.children[t]);e&&this.appendChild(e)}this.json=void 0}}}class xh extends oh{constructor(t,e){super(t,e),this.artBoards=new oh({style:{width:"100%",height:"100%",pointerEvents:!1}},[]),this.appendChild(this.artBoards),this.abList=[]}setArtBoard(t){this.artBoards.clearChildren(),this.abList.splice(0);for(let e=0,r=t.length;e<r;e++){const r=t[e],n=new gh({style:{fontSize:24,color:"#777"},content:r.props.name||"画板"});this.artBoards.appendChild(n),this.abList.push({ab:r,text:n})}}update(){const t=this.abList;for(let e=0,r=t.length;e<r;e++){const{ab:r,text:n}=t[e],i=r.getBoundingClientRect();n.updateStyleData({translateX:i.left,translateY:i.top-32}),n.calMatrix(Nl.TRANSLATE)}}}function Sh(t,e,r){let n=function(t,e,r){let n=Eh(t,t.VERTEX_SHADER,e),i=Eh(t,t.FRAGMENT_SHADER,r);if(!n||!i)return null;let a=t.createProgram();if(!a)return null;a.vertexShader=n,a.fragmentShader=i,t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a);let o=t.getProgramParameter(a,t.LINK_STATUS);if(!o){let e=t.getProgramInfoLog(a);throw t.deleteProgram(a),t.deleteShader(i),t.deleteShader(n),new Error("Failed to link program: "+e)}return a}(t,e,r);if(!n)throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),n}function Eh(t,e,r){let n=t.createShader(e);if(null==n)throw new Error("unable to create shader");if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){let e=t.getShaderInfoLog(n);throw t.deleteShader(n),new Error("Failed to compile shader: "+e)}return n}const Ah={MAX_TEXTURE_SIZE:2048,SMALL_UNIT:32,MAX_NUM:Math.pow(64,2),MAX_TEXTURE_UNITS:8,init(t,e){this.MAX_TEXTURE_SIZE=t,this.MAX_NUM=Math.pow(t/this.SMALL_UNIT,2),this.MAX_TEXTURE_UNITS=e}};var Ch={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,depth:!0,stencil:!0};let kh=0;var Th={ArtBoard:sh,Bitmap:uh,Container:oh,Group:ch,Node:ah,Page:wh,Root:class extends oh{constructor(t,e=[]){super(t,e),this.ani=[],this.aniChange=!1,this.uuid=kh++,this.dpi=t.dpi,this.root=this,this.refs={},this.structs=this.structure(0),this.isAsyncDraw=!1,this.task=[],this.taskClone=[],this.rl=Nl.REBUILD}appendTo(t){this.isDestroyed=!1,this.canvas=t;let e=t.getContext("webgl2",Ch);if(e?(this.ctx=e,this.isWebgl2=!0):(this.ctx=e=t.getContext("webgl",Ch),this.isWebgl2=!1),!e)throw alert("Webgl unsupported!"),new Error("Webgl unsupported!");Ah.init(e.getParameter(e.MAX_TEXTURE_SIZE),e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),this.programs={},this.initShaders(e),Gl.addRoot(this),this.reLayout(),this.pageContainer=new oh({style:{width:"100%",height:"100%",pointerEvents:!1,scaleX:this.dpi,scaleY:this.dpi,transformOrigin:[0,0]}},[]),this.appendChild(this.pageContainer),this.overlay=new xh({style:{width:"100%",height:"100%",pointerEvents:!1}},[]),this.appendChild(this.overlay)}initShaders(t){const e=this.programs.program=Sh(t,"#version 100\n\nattribute vec2 a_position;\nattribute vec2 a_texCoords;\nvarying vec2 v_texCoords;\nattribute float a_opacity;\nvarying float v_opacity;\n\nvoid main() {\n  gl_Position = vec4(a_position, 0, 1);\n  v_texCoords = a_texCoords;\n  v_opacity = a_opacity;\n}","#version 100\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 v_texCoords;\nvarying float v_opacity;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n  float opacity = v_opacity;\n  if(opacity <= 0.0) {\n    discard;\n  }\n  opacity = clamp(opacity, 0.0, 1.0);\n  vec4 color = texture2D(u_texture, v_texCoords);\n  gl_FragColor = color * opacity;\n}");this.programs.colorProgram=Sh(t,"#version 100\n\nattribute vec2 a_position;\n\nvoid main() {\n  gl_Position = vec4(a_position, 0, 1);\n}","#version 100\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform vec4 u_color;\n\nvoid main() {\n  gl_FragColor = u_color;\n}"),this.programs.simpleProgram=Sh(t,"#version 100\n\nattribute vec2 a_position;\nattribute vec2 a_texCoords;\nvarying vec2 v_texCoords;\n\nvoid main() {\n  gl_Position = vec4(a_position, 0, 1);\n  v_texCoords = a_texCoords;\n}","#version 100\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nvarying vec2 v_texCoords;\n\nuniform sampler2D u_texture;\n\nvoid main() {\n  vec4 color = texture2D(u_texture, v_texCoords);\n  gl_FragColor = color;\n}"),t.useProgram(e)}checkRoot(){var t;this.width=this.computedStyle.width=this.style.width.v,this.height=this.computedStyle.height=this.style.height.v,null===(t=this.ctx)||void 0===t||t.viewport(0,0,this.width,this.height)}setJPages(t){t.forEach((t=>{const e=new wh(t.props,[]);e.json=t,this.pageContainer.appendChild(e)}))}setPageIndex(t){if(t<0||t>=this.pageContainer.children.length)return;if(this.lastPage){if(this.lastPage===this.pageContainer.children[t])return;this.lastPage.updateStyle({visible:!1})}this.lastPage=void 0;let e=this.pageContainer.children[t];e.initIfNot(),e.updateStyle({visible:!0}),this.lastPage=e;const r=[];e.children.forEach((t=>{t instanceof sh&&r.push(t)})),this.overlay.setArtBoard(r),this.emit(hl.PAGE_CHANGED,e)}getPages(){return this.pageContainer.children}addUpdate(t,e,r=Nl.NONE,n=!1,i=!1,a){if(this.isDestroyed)return;let o=r;if(e&&e.length)for(let t=0,r=e.length;t<r;t++){o|=Bl(e[t])}i&&this.emit(hl.WILL_REMOVE_DOM,t);if(this.calUpdate(t,o,n,i)?this.asyncDraw(a):a&&a(!0),n&&this.lastPage){let e=!1,r=t.parent;for(;r&&r!==this;){if(r instanceof ch||r instanceof sh||r instanceof wh){e=!0;break}r=r.parent}e&&this.emit(hl.DID_ADD_DOM,t)}}calUpdate(t,e,r,n){if((r||n)&&(e|=Nl.REFLOW),e===Nl.NONE||!this.computedStyle.visible)return!1;if(Fl(e))t===this?this.reLayout():function(t,e,r,n){const i=e.parent;n?e.destroy():e.layout({x:0,y:0,w:i.width,h:i.height})}(0,t,0,n),n&&t.destroy();else{if(e>=Nl.REPAINT)t.releaseCache(this.ctx),t.calRepaintStyle(e);else{const{style:r,computedStyle:n}=t;e&Nl.TRANSFORM_ALL&&t.calMatrix(e),e&Nl.OPACITY&&(n.opacity=r.opacity.v,t.hasCacheOp=!1,t.hasCacheOpLv=!1),e&Nl.MIX_BLEND_MODE&&(n.mixBlendMode=r.mixBlendMode.v)}}return t.refreshLevel|=e,this.rl|=e,(r||n)&&(this.rl|=Nl.REBUILD),!0}asyncDraw(t){this.isAsyncDraw||(Gl.onFrame(this),this.isAsyncDraw=!0),this.task.push(t)}cancelAsyncDraw(t){if(!t)return;const e=this.task,r=e.indexOf(t);r>-1&&(e.splice(r,1),e.length||(Gl.offFrame(this),this.isAsyncDraw=!1))}draw(){if(this.isDestroyed)return;this.clear();const t=this.rl;this.rl=Nl.NONE,function(t,e,r){const{structs:n,width:i,height:a}=e,o=.5*i,s=.5*a;if(r>=Nl.REPAINT)for(let e=0,r=n.length;e<r;e++){const{node:r}=n[e],{refreshLevel:i}=r;r.refreshLevel=Nl.NONE,i&&(i<Nl.REPAINT||r.calContent()&&(r.renderCanvas(),r.genTexture(t)))}const l=e.programs,h=e.lastPage;if(h){const e=h.children,r=e.length;for(let n=0;n<r;n++){const r=e[n];r instanceof sh&&r.renderBgc(t,o,s)}}const u=e.overlay,c=l.program;t.useProgram(l.program);const f=[],d=[];let p=0,g=!1,m=!1;for(let e=0,r=n.length;e<r;e++){const{node:r,lv:i,total:a}=n[e];if(u&&u===r&&u.update(),!r.computedStyle.visible){e+=a;continue}if(e){if(i>p)g&&(g=r.hasCacheOpLv),f.push(g),m&&(m=r.hasCacheMwLv),d.push(m);else if(i<p){const t=p-i;f.splice(-t),g=f[i-1],d.splice(-t),m=d[i-1]}}else g=r.hasCacheOpLv,m=r.hasCacheMwLv,f.push(g),d.push(m);p=i;const l=r.parent;g||(r._opacity=l?l._opacity*r.computedStyle.opacity:r.computedStyle.opacity,r.hasCacheOpLv=!0),m||(Zs(r._matrixWorld,l?Gs(l._matrixWorld,r.matrix):r.matrix),r.hasCacheMwLv=!0);const h=r._opacity,y=r._matrixWorld,v=r.textureCache;v&&v.available&&h>0&&eh(t,o,s,c,[{node:r,opacity:h,matrix:y,cache:v}],1)}if(h){const r=h.children,n=r.length;if(sh.BOX_SHADOW_TEXTURE){let e=0;for(let t=0;t<n;t++)r[t]instanceof sh&&e++;const i=new Float32Array(96*e),a=new Float32Array(96*e);let h=0;for(let t=0;t<n;t++){const e=r[t];e instanceof sh&&e.collectBsData(h++,i,a,o,s)}const u=l.simpleProgram;t.useProgram(u);const c=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,c),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW);const f=t.getAttribLocation(u,"a_position");t.vertexAttribPointer(f,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(f);const d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW);let p=t.getAttribLocation(u,"a_texCoords");t.vertexAttribPointer(p,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(p);let g=t.getUniformLocation(u,"u_texture");t.uniform1i(g,0),th(t,sh.BOX_SHADOW_TEXTURE,0),t.drawArrays(t.TRIANGLES,0,48*e),t.deleteBuffer(c),t.deleteBuffer(d),t.disableVertexAttribArray(f),t.disableVertexAttribArray(p)}else{const r=Fs.IMG[sh.BOX_SHADOW];r&&r.source?(sh.BOX_SHADOW_TEXTURE=Ql(t,0,r.source),e.addUpdate(e,[],Nl.CACHE,!1,!1,void 0)):Fs.measureImg(sh.BOX_SHADOW,(r=>{sh.BOX_SHADOW_TEXTURE=Ql(t,0,r.source),e.addUpdate(e,[],Nl.CACHE,!1,!1,void 0)}))}}}(this.ctx,this,t),this.emit(hl.REFRESH,t)}reLayout(){this.checkRoot(),this.layout({x:0,y:0,w:this.width,h:this.height})}clear(){const t=this.ctx;t&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}destroy(){super.destroy(),Gl.removeRoot(this)}before(){const t=this.ani,e=this.taskClone=this.task.splice(0);t.length;let r=e.length;this.aniChange=!1,(this.aniChange||r)&&this.draw()}after(t){const e=this.ani,r=this.taskClone.splice(0);let n=e.length,i=r.length;for(let t=0;t<i;t++){let e=r[t];e&&e()}n=e.length,i=this.task.length,n||i||(Gl.offFrame(this),this.isAsyncDraw=!1)}getCurPage(){return this.lastPage}getCurPageZoom(){return this.lastPage?this.lastPage.getZoom():1}getNodeFromCurPage(t,e,r=!1,n=!1,i){const a=this.lastPage;if(a)return a.getNodeByPointAndLv(t,e,r,n,void 0===i?i:i+3)}},Text:gh,Geom:mh,Polyline:bh};function Rh(t,e){if(!t)return;if(Array.isArray(t))return t.map((t=>Rh(t,e)));const{tagName:r,props:n={},children:a=[]}=t;if(r===i.Bitmap){const t=n.src;cl.type.isNumber(t)&&(n.src=e[t])}return a.length&&(t.children=Rh(a,e)),t}var Oh={parse(t,e,r=1){t.pages=Rh(t.pages,t.imgs);const{width:n,height:i}=e,a=new Th.Root({dpi:r,style:{width:n,height:i}});return a.appendTo(e),a.setJPages(t.pages),a},openAndConvertSketchBuffer:function(t){return h(this,void 0,void 0,(function*(){let e;try{e=yield Jo.loadAsync(t)}catch(t){throw alert("Sorry!\nThis is not a zip file. It may be created by an old version sketch app."),t}const r=yield Il(e,"document.json"),n=[];yield Promise.all(r.pages.map((t=>Il(e,t._ref+".json").then((t=>{n.push(t)})))));const a=yield Il(e,"meta.json"),o=yield Il(e,"user.json");return yield function(t,e){return h(this,void 0,void 0,(function*(){console.log("sketch",t);const r=[],n={},a=[],o={},s=yield Promise.all(t.pages.map((s=>function(t,e){return h(this,void 0,void 0,(function*(){const r=100,n=100,a=yield Promise.all(t.layers.map((t=>Ml(t,e,r,n))));let o=0,s=0,l=1;const h=e.user[t.do_objectID];if(h){const{scrollOrigin:t,zoomValue:e}=h;if(t){const e=/\{(\d+),\s*(\d+)\}/.exec(t);e&&(o=parseFloat(e[1])||0,s=parseFloat(e[2])||0)}e&&(l=e)}return{tagName:i.Page,props:{name:t.name,uuid:t.do_objectID,style:{width:r,height:n,visible:!1,translateX:o,translateY:s,scaleX:l,scaleY:l,transformOrigin:[0,0],pointerEvents:!1}},children:a.filter((t=>t))}}))}(s,{imgs:r,imgHash:n,fonts:a,fontHash:o,zipFile:e,user:t.user}))));return{pages:s,imgs:r,fonts:[]}}))}({document:r,pages:n,meta:a,user:o},e)}))},node:Th,refresh:Dl,style:Wl,math:Xl,util:cl,animation:Yl,config:xs,version:"0.0.1"};return Oh}));
//# sourceMappingURL=index.min.js.map
