!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).karas=e()}(this,(function(){"use strict";function t(){
  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
  t=function(){return e};var e={},r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},n=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function h(t,e,r,i){var a=e&&e.prototype instanceof f?e:f,n=Object.create(a.prototype),o=new M(i||[]);return n._invoke=function(t,e,r){var i="suspendedStart";return function(a,n){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===a)throw n;return T()}for(r.method=a,r.arg=n;;){var o=r.delegate;if(o){var s=b(o,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var l=_(t,e,r);if("normal"===l.type){if(i=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),n}function _(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var u={};function f(){}function c(){}function v(){}var y={};l(y,n,(function(){return this}));var d=Object.getPrototypeOf,p=d&&d(d(w([])));p&&p!==r&&i.call(p,n)&&(y=p);var x=v.prototype=f.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){function r(a,n,o,s){var l=_(t[a],t,n);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"==typeof u&&i.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,o,s)}),(function(t){r("throw",t,o,s)})):e.resolve(u).then((function(t){h.value=t,o(h)}),(function(t){return r("throw",t,o,s)}))}s(l.arg)}var a;this._invoke=function(t,i){function n(){return new e((function(e,a){r(t,i,e,a)}))}return a=a?a.then(n,n):n()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=_(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,u;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function w(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return c.prototype=v,l(x,"constructor",v),l(v,"constructor",c),c.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===c||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,l(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},g(m.prototype),l(m.prototype,o,(function(){return this})),e.AsyncIterator=m,e.async=function(t,r,i,a,n){void 0===n&&(n=Promise);var o=new m(h(t,r,i,a),n);return e.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},g(x),l(x,s,"Generator"),l(x,n,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var i=e.pop();if(i in t)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=w,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return o.type="throw",o.arg=t,e.next=r,i&&(e.method="next",e.arg=void 0),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a],o=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var s=i.call(n,"catchLoc"),l=i.call(n,"finallyLoc");if(s&&l){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var i=r.completion;if("throw"===i.type){var a=i.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:w(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e,r,i,a,n,o){try{var s=t[n](o),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(i,a)}function i(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var o=t.apply(e,i);function s(t){r(o,a,n,s,l,"next",t)}function l(t){r(o,a,n,s,l,"throw",t)}s(void 0)}))}}function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=u(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:r):a.value}},f.apply(this,arguments)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,a,n=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return n}(t,e)||y(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var p=function(){function t(){this.__x=0,this.__y=0,this.__width=0,this.__height=0,this.__baseline=0,this.__verticalBaseline=0,this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null,this.__hostRoot=null,this.__virtualDom=null,this.__bbox=null,this.__filterBbox=null,this.__isDestroyed=!0,this.__cache=null,this.__cacheTarget=null,this.__wasmNode=null}return n(t,[{key:"__structure",value:function(t,e){return this.__struct={node:this,childIndex:e,lv:t}}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"__destroy",value:function(){this.__isDestroyed=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseline",get:function(){return this.__baseline}},{key:"verticalBaseline",get:function(){return this.__verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__isDestroyed}},{key:"isReplaced",get:function(){return!1}}]),t}(),x={CANVAS:0,SVG:1,WEBGL:2},g={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,GRADIENT:14,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?{v:e,u:2}:/px$/i.test(t)?{v:e,u:1}:/deg$/i.test(t)?{v:e,u:5}:/rem$/i.test(t)?{v:e,u:8}:/vw$/i.test(t)?{v:e,u:10}:/vh$/i.test(t)?{v:e,u:11}:/em$/i.test(t)?{v:e,u:9}:/vw$/i.test(t)?{v:e,u:10}:/vh$/i.test(t)?{v:e,u:11}:/vmax$/i.test(t)?{v:e,u:12}:/vmin$/i.test(t)?{v:e,u:13}:{v:e,u:3}}};function m(){return new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function b(t,e){if(e&&!A(e)){var r=t.x,i=t.y,a=t.z,n=t.w;a=a||0,null==n&&(n=1);var o=e[0],s=e[1],l=e[2],h=e[3],_=e[4],u=e[5],f=e[6],c=e[7],v=e[8],y=e[9],d=e[10],p=e[11],x=e[12],g=e[13],m=e[14],b=e[15],E={x:(1===o?r:r*o)+(_?i*_:0)+(1===n?x:x*n),y:(1===s?r:r*s)+(u?i*u:0)+(1===n?g:g*n),z:0,w:n};return h||c||p?E.w=r*h+i*c+a*p+b*n:1!==b&&(E.w*=b),a?(E.x+=a*v,E.y+=a*y,E.z=r*l+i*f+m+a*d):(l||f||m)&&(E.z=r*l+i*f+m),E}return t}function A(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var E={identity:m,multiply:function(t,e){if(!t&&!e)return m();if(A(t))return e;if(A(e))return t;for(var r=[],i=0;i<4;i++){var a=t[i]||0,n=t[i+4]||0,o=t[i+8]||0,s=t[i+12]||0;r[i]=a*e[0]+n*e[1]+o*e[2]+s*e[3],r[i+4]=a*e[4]+n*e[5]+o*e[6]+s*e[7],r[i+8]=a*e[8]+n*e[9]+o*e[10]+s*e[11],r[i+12]=a*e[12]+n*e[13]+o*e[14]+s*e[15]}return r},multiplyTfo:function(t,e,r){return e||r?(t[12]+=t[0]*e+t[4]*r,t[13]+=t[1]*e+t[5]*r,t[14]+=t[2]*e+t[6]*r,t[15]+=t[3]*e+t[7]*r,t):t},tfoMultiply:function(t,e,r){if(!t&&!e)return r;var i=r[3],a=r[7],n=r[11],o=r[15];return r[0]+=i*t,r[1]+=i*e,r[4]+=a*t,r[5]+=a*e,r[8]+=n*t,r[9]+=n*e,r[12]+=o*t,r[13]+=o*e,r},multiplyTranslateX:function(t,e){return e?(t[12]+=t[0]*e,t[13]+=t[1]*e,t[14]+=t[2]*e,t[15]+=t[3]*e,t):t},multiplyTranslateY:function(t,e){return e?(t[12]+=t[4]*e,t[13]+=t[5]*e,t[14]+=t[6]*e,t[15]+=t[7]*e,t):t},multiplyTranslateZ:function(t,e){return e?(t[12]+=t[8]*e,t[13]+=t[9]*e,t[14]+=t[10]*e,t[15]+=t[11]*e,t):t},multiplyRotateX:function(t,e){if(!e)return t;var r=Math.sin(e),i=Math.cos(e),a=t[4],n=t[5],o=t[6],s=t[7],l=t[8],h=t[10],_=t[11];return t[4]=a*i+l*r,t[5]=n*i+o*r,t[6]=o*i+h*r,t[7]=s*i+_*r,t[8]=a*-r+l*i,t[9]=n*-r+o*i,t[10]=o*-r+h*i,t[11]=s*-r+_*i,t},multiplyRotateY:function(t,e){if(!e)return t;var r=Math.sin(e),i=Math.cos(e),a=t[0],n=t[1],o=t[2],s=t[3],l=t[8],h=t[9],_=t[10],u=t[11];return t[0]=a*i+l*-r,t[1]=n*i+h*-r,t[2]=o*i+_*-r,t[3]=s*i+u*-r,t[8]=a*r+l*i,t[9]=n*r+h*i,t[10]=o*r+_*i,t[11]=s*r+u*i,t},multiplyRotateZ:function(t,e){if(!e)return t;var r=Math.sin(e),i=Math.cos(e),a=t[0],n=t[1],o=t[2],s=t[3],l=t[4],h=t[5],_=t[6],u=t[7];return t[0]=a*i+l*r,t[1]=n*i+h*r,t[2]=o*i+_*r,t[3]=s*i+u*r,t[4]=a*-r+l*i,t[5]=n*-r+h*i,t[6]=o*-r+_*i,t[7]=s*-r+u*i,t},multiplySkewX:function(t,e){if(!e)return t;var r=Math.tan(e);return t[4]+=t[0]*r,t[5]+=t[1]*r,t[6]+=t[2]*r,t[7]+=t[3]*r,t},multiplySkewY:function(t,e){if(!e)return t;var r=Math.tan(e);return t[0]+=t[4]*r,t[1]+=t[5]*r,t[2]+=t[6]*r,t[3]+=t[7]*r,t},multiplyScaleX:function(t,e){return 1===e||(t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e),t},multiplyScaleY:function(t,e){return 1===e||(t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e),t},multiplyScaleZ:function(t,e){return 1===e||(t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e),t},multiplyPerspective:function(t,e){return!e||e<=0||(e=-1/(e=Math.max(e,1)),t[8]+=t[12]*e,t[9]+=t[13]*e,t[10]+=t[14]*e,t[11]+=t[15]*e),t},calPoint:b,calRectPoint:function(t,e,r,i,a){var n,o,s,l,h,_,u,f,c=b({x:t,y:e,z:0,w:1},a),v=c.x,y=c.y,d=c.z,p=c.w,x=b({x:r,y:i,z:0,w:1},a),g=x.x,m=x.y,A=x.z,E=x.w;if(1!==p||1!==E||a&&a.length&&(a[1]||a[2]||a[4]||a[6]||a[7]||a[8])){var M=b({x:r,y:e,z:0,w:1},a);n=M.x,o=M.y,s=M.z,l=M.w,h=(M=b({x:t,y:i,z:0,w:1},a)).x,_=M.y,u=M.z,f=M.w}else n=g,o=y,s=A,h=v,_=m,s=u=d,l=f=1;return{x1:v,y1:y,z1:d,w1:p,x2:n,y2:o,z2:s,w2:l,x3:g,y3:m,z3:A,w3:E,x4:h,y4:_,z4:u,w4:f}},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length)return function(t){var e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];var r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0===r)return m();r=1/r;for(var i=[],a=0;a<16;a++)i[a]=e[a]*r;return i}(t);var e=t[0],r=t[1],i=t[2],a=t[3],n=t[4],o=t[5];if(1===e&&0===r&&0===i&&1===a&&0===n&&0===o)return t;var s=e*a-r*i;return 0===s?t:[a/s,-r/s,-i/s,e/s,(i*o-a*n)/s,(r*n-e*o)/s]},isE:A,toE:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]},assignMatrix:function(t,e){return t&&e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t}},M={}.toString;function w(t){return function(e){return M.call(e)==="[object "+t+"]"}}var T=w("Object"),S=w("String"),R=w("Function"),k=w("Number"),C=w("Boolean"),F=w("Date"),I={}.hasOwnProperty,O=I.toString,L=O.call(Object);function B(t){return null==t}function D(t){for(var e="",r=0,i=t.length;r<i;r++){var a=t[r];Array.isArray(a)?e+=D(a):e+=P(a)}return e}function P(t){return B(t)?"":t.toString()}function N(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach((function(t){r+=N(t)})),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var i="<g>";t.bb.forEach((function(t){i+=N(t)})),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach((function(t){i+=N(t)})),i+="</g>";var a=t.opacity,n=t.transform,o=t.visibility,s=t.mask,l=t.overflow,h=t.filter,_=t.mixBlendMode;return"<g"+(1!==a&&void 0!==a?' opacity="'+a+'"':"")+(n?' transform="'+n+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(l?' clip-path="'+l+'"':"")+(h||_?' style="':"")+(h?"filter:"+h+";":"")+(_?"mix-blend-mode:"+_+";":"")+(h||_?'"':"")+">"+i+"</g>"}}function z(t){var e="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(e+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),e+=">",(t.children||[]).forEach((function(t){e+=function(t){var e="<"+t.tagName;return(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),e+="></"+t.tagName+">"}(t)})),e+="</"+t.tagName+">"}function H(t,e){for(var r=t.length?t[0]:"",i=1,a=t.length;i<a;i++)r+=e+t[i];return r}function G(t){if(!t||"[object Object]"!==M.call(t))return!1;var e=Object.getPrototypeOf(t);if(!e)return!0;var r=I.call(e,"constructor")&&e.constructor;return"function"==typeof r&&O.call(r)===L}function W(t){return 1===t.length?"0"+t:t}var Y={isObject:T,isString:S,isFunction:R,isNumber:k,isBoolean:C,isDate:F,isNil:B,isPrimitive:function(t){return Y.isNil(t)||Y.isBoolean(t)||Y.isString(t)||Y.isNumber(t)},isAuto:function(t){return B(t)||"auto"===t},isPlainObject:G,stringify:P,joinSourceArray:function(t){return D(t)},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach((function(t){e+=z(t)})),e+="</defs><g>",t.bb.forEach((function(t){e+=N(t)})),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach((function(t){e+=N(t)})),e+="</g>"},joinVd:N,joinDef:z,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];if(t&&"transparent"!==t)if("#"===t.charAt(0))3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1);else{var r=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i);r?(e=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],B(r[4])?e[3]=1:e[3]=parseFloat(r[4])):e=[0,0,0,0]}else e=[0,0,0,0];return e},int2rgba:function(t){return!Array.isArray(t)||3!==t.length&&4!==t.length?t||"rgba(0,0,0,0)":(t[0]=Math.floor(Math.max(t[0],0)),t[1]=Math.floor(Math.max(t[1],0)),t[2]=Math.floor(Math.max(t[2],0)),4===t.length?(t[3]=Math.max(t[3],0),"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"):"rgba("+t[0]+","+t[1]+","+t[2]+",1)")},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+H(t,",")+")";if(3===t.length)return"rgba("+H(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var a=t[r];if(Array.isArray(a))e[a[0]]=a[1];else for(var n=Object.keys(a),o=n.length-1;o>=0;o--){var s=n[o];e[s]=a[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,a=r.length;i<a;i++){var n=r[i];e.push([n,t[n]])}return e},clone:function t(r){if(B(r)||"object"!==e(r))return r;if(Y.isDate(r))return new Date(r);if(!G(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach((function(e){i[e]=t(r[e])})),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var n=e[i],o=r[i],s=Array.isArray(n),l=Array.isArray(o);if(s&&l){if(!t(n,o))return!1}else{if(s||l)return!1;if(n!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(T(e)&&T(r)){for(var i={},a=0,n=Object.keys(e),o=n.length;a<o;a++){var s=n[a];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;i[s]=!0}for(var l=0,h=Object.keys(r),_=h.length;l<_;l++){var u=h[l];if(!i.hasOwnProperty(u))return!1}}else{if(F(e)&&F(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var f=0,c=e.length;f<c;f++)if(!t(e[f],r[f]))return!1}return!0},extend:function(t,r,i){if(null===r||"object"!==e(r))return t;i||(i=Object.keys(r));for(var a=0,n=i.length;a<n;){var o=i[a];t[o]=r[o],a++}return t},joinArr:H,transformBbox:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!E.isE(e)){var a=t,n=c(a,4),o=n[0],s=n[1],l=n[2],h=n[3];r&&(o-=r,l+=r),i&&(s-=i,h+=i);var _,u=[l,s,o,h,l,h],f=E.calPoint({x:o,y:s,z:0,w:1},e);o=f.x,s=f.y,(_=f.w)&&1!==_&&(o/=_,s/=_);for(var v=o,y=s,d=o,p=s,x=0;x<6;x+=2){var g=u[x],m=u[x+1],b=E.calPoint({x:g,y:m,z:0,w:1},e);g=b.x,m=b.y,(_=b.w)&&1!==_&&(g/=_,m/=_),v=Math.min(v,g),d=Math.max(d,g),y=Math.min(y,m),p=Math.max(p,m)}return[v,y,d,p]}return t=t.slice(0),(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i),t},prefixHex:W,replaceRgba2Hex:function(t){return(t||"").replace(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)/gi,(function(t,e,r,i,a){var n="#"+W(parseInt(e).toString(16))+W(parseInt(r).toString(16))+W(parseInt(i).toString(16));return a&&(n+=W(Math.floor(255*parseFloat(a)).toString(16))),n}))}},U={flag:!1},X=1e3/60,V={},K="function"==typeof OffscreenCanvas&&OffscreenCanvas.prototype.getContext;var j,Z,q={},$={},J={},Q=0,tt=0,et=[],rt=0,it=[],at=0,nt=[],ot={};function st(){(j=document.createElement("div")).style.position="absolute",j.style.left="99999px",j.style.top="-99999px",j.style.visibility="hidden",j.style.whiteSpace="nowrap",document.body.appendChild(j)}var lt={measureTextSync:function(t,e,r,i,a){return j||st(),j.style.fontFamily=e,j.style.fontSize=r+"px",j.style.fontWeight=i,j.style.writingMode=a?"vertical-lr":"horizontal-tb",j.innerHTML=t.replace(/</g,"&lt;").replace(/[ \n]/g,"&nbsp;"),a?parseFloat(window.getComputedStyle(j,null).height):parseFloat(window.getComputedStyle(j,null).width)},measureTextListMax:function(t,e,r,i){j||st(),j.style.fontFamily=e,j.style.fontSize=r+"px",j.style.fontWeight=i;for(var a="",n=0,o=t.length;n<o;n++)a+='<span style="position:absolute">'+t.charAt(n).replace("<","&lt;").replace(/[ \n]/,"&nbsp;")+"</span>";j.innerHTML=a;for(var s=0,l=j.childNodes,h=0,_=l.length;h<_;h++){var u=l[h];s=Math.max(s,parseFloat(window.getComputedStyle(u,null).width))}return s},IMG:q,INIT:0,LOADED:2,LOADING:1,get MAX_LOAD_NUM(){return Q},set MAX_LOAD_NUM(t){Q=parseInt(t)||0},measureImg:function(t,e){if(Array.isArray(t)){if(!t.length)return e&&e();var r=0,i=t.length,a=[];t.forEach((function(t,n){lt.measureImg(t,(function(t){a[n]=t,++r===i&&e&&e(a)}))}))}else{if(!t||!Y.isString(t))return lt.error("Measure img invalid: "+t),void(e&&e({state:2,success:!1,url:t}));var n=q[t]=q[t]||{state:0,task:[]};if(2===n.state)e&&e(n);else if(1===n.state)e&&n.task.push(e);else{if(n.state=1,e&&n.task.push(e),Q>0&&tt>=Q)return void et.push(t);tt++,function t(e,r){var i=new Image;if(i.onload=function(){if(r.state=2,r.success=!0,r.width=i.width,r.height=i.height,r.source=i,r.url=e,r.task.splice(0).forEach((function(t){t(r)})),tt--,et.length){var a=et.shift();t(a,q[a])}},i.onerror=function(i){if(r.state=2,r.success=!1,r.url=e,r.task.splice(0).forEach((function(t){return t(r)})),tt--,et.length){var a=et.shift();t(a,r)}},"data:"!==e.substr(0,5)){var a=/^(?:\w+:)?\/\/([^/:]+)/.exec(e);a&&("undefined"!=typeof location&&location.hostname===a[1]||(i.crossOrigin="anonymous"))}i.src=e,U.flag&&"undefined"!=typeof document&&document.body.appendChild(i)}(t,n)}}},log:function(t){console.log(t)},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(lt.requestAnimationFrame=requestAnimationFrame.bind(null),e=requestAnimationFrame(t)):(e=setTimeout(t,X),lt.requestAnimationFrame=function(t){return setTimeout(t,X)}),e})),cancelAnimationFrame:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(lt.cancelAnimationFrame=cancelAnimationFrame.bind(null),e=cancelAnimationFrame(t)):(e=clearTimeout(t),lt.cancelAnimationFrame=function(t){return clearTimeout(t)}),e})),now:function(){return"undefined"!=typeof performance?(lt.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(lt.now=Date.now.bind(Date),Date.now())},hasOffscreenCanvas:function(t){return t&&V.hasOwnProperty(t)},getOffscreenCanvas:function(t,e,r,i){return function(t,e,r,i){var a;(a=t?V[t]?V[t]:V[t]=!U.flag&&K?new OffscreenCanvas(e,r):document.createElement("canvas"):!U.flag&&K?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,a.height=r,U.flag&&(a.style.width=e+"px",a.style.height=r+"px",t&&a.setAttribute("key",t),i&&a.setAttribute("message",i),document.body.appendChild(a));var n=a.getContext("2d");return n||lt.error("Total canvas memory use exceeds the maximum limit"),{canvas:a,ctx:n,__enabled:!0,__available:!0,get enabled(){return this.__enabled},get available(){return this.__available},release:function(){n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e,r),a.width=a.height=0,this.__available=!1,U.flag&&a&&document.body.removeChild(a),a=null}}}(r,t,e,i)},isDom:function(t){if(t){if(Y.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(Y.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},defaultFontFamily:"arial",getFontCanvas:function(){return lt.getOffscreenCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__",null)},checkSupportFontFamily:function(t){if((t=t.toLowerCase())===this.defaultFontFamily)return!0;if(ot.hasOwnProperty(t))return ot[t];var e=lt.getFontCanvas().ctx;e.textAlign="center",e.fillStyle="#000",e.textBaseline="middle",Z||(e.clearRect(0,0,16,16),e.font="16px "+this.defaultFontFamily,e.fillText("a",8,8),Z=e.getImageData(0,0,16,16).data),e.clearRect(0,0,16,16),/\s/.test(t)&&(t='"'+t.replace(/"/g,'\\"')+'"'),e.font="16px "+t+","+this.defaultFontFamily,e.fillText("a",8,8);for(var r=e.getImageData(0,0,16,16).data,i=0,a=r.length;i<a;i++)if(Z[i]!==r[i])return ot[t]=!0;return ot[t]=!1},FONT:$,loadFont:function(t,e,r){if(Y.isFunction(e)&&(r=e,e=t),Array.isArray(e)){if(!e.length)return r();var i=0,a=e.length,n=[];e.forEach((function(t,e){lt.loadFont(t.fontFamily,t.url,(function(t){n[e]=t,++i===a&&r(n)}))}))}else{if(!e||!Y.isString(e))return lt.error("Load font invalid: "+e),void(r&&r({state:2,success:!1,url:e}));t||(t=e);var o=$[e]=$[e]||{state:0,task:[]};if(2===o.state)r&&r(o);else if(1===o.state)r&&o.task.push(r);else{if(o.state=1,r&&o.task.push(r),Q>0&&rt>=Q)return void it.push({fontFamily:t,url:e});rt++,function t(e,r,i){if(r instanceof ArrayBuffer)n(r);else{var a=new XMLHttpRequest;a.open("get",r,!0),a.responseType="arraybuffer",a.onload=function(){a.response?n(a.response):o()},a.onerror=o,a.send()}function n(a){var n=new FontFace(e,a);if(n.load().then((function(){"undefined"!=typeof document&&document.fonts.add(n),i.state=2,i.success=!0,i.url=r,i.task.splice(0).forEach((function(t){return t(i,a)}))})).catch(o),rt++,it.length){var s=it.shift();t(s.fontFamily,s.url,$[s.url])}}function o(){if(i.state=2,i.success=!1,i.url=r,i.task.splice(0).forEach((function(t){return t(i)})),rt--,it.length){var e=it.shift();t(e.fontFamily,e.url,$[e.url])}}}(t,e,o)}}},loadComponent:function(t,e){if(Array.isArray(t)){if(!t.length)return e();var r=0,i=t.length,a=[];t.forEach((function(t,n){lt.loadComponent(t,(function(t){a[n]=t,++r===i&&e(a)}))}))}else{if(!t||!Y.isString(t))return lt.error("Load component invalid: "+t),void(e&&e({state:2,success:!1,url:t}));var n=J[t]=J[t]||{state:0,task:[]};if(2===n.state)e&&e(n);else if(1===n.state)e&&n.task.push(e);else{if(n.state=1,e&&n.task.push(e),Q>0&&at>=Q)return void nt.push(t);at++,function t(e,r){var i=document.createElement("script");i.src=e,i.async=!0,i.onload=function(){if(r.state=2,r.success=!0,r.url=e,r.task.splice(0).forEach((function(t){return t(r)})),document.head.removeChild(i),at--,nt.length){var a=nt.shift();t(a,J[a])}},i.onerror=function(){if(r.state=2,r.success=!1,r.url=e,r.task.splice(0).forEach((function(t){return t(r)})),document.head.removeChild(i),at--,nt.length){var a=nt.shift();t(a,J[a])}},document.head.appendChild(i)}(t,n)}}}};function ht(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function _t(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new ht,this.dtree=new ht}var ut=new ht,ft=new ht,ct=new Uint8Array(30),vt=new Uint16Array(30),yt=new Uint8Array(30),dt=new Uint16Array(30),pt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xt=new ht,gt=new Uint8Array(320);function mt(t,e,r,i){var a,n;for(a=0;a<r;++a)t[a]=0;for(a=0;a<30-r;++a)t[a+r]=a/r|0;for(n=i,a=0;a<30;++a)e[a]=n,n+=1<<t[a]}var bt=new Uint16Array(16);function At(t,e,r,i){var a,n;for(a=0;a<16;++a)t.table[a]=0;for(a=0;a<i;++a)t.table[e[r+a]]++;for(t.table[0]=0,n=0,a=0;a<16;++a)bt[a]=n,n+=t.table[a];for(a=0;a<i;++a)e[r+a]&&(t.trans[bt[e[r+a]]++]=a)}function Et(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=1&t.tag;return t.tag>>>=1,e}function Mt(t,e,r){if(!e)return r;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var i=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,i+r}function wt(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=0,i=0,a=0,n=t.tag;do{i=2*i+(1&n),n>>>=1,++a,r+=e.table[a],i-=e.table[a]}while(i>=0);return t.tag=n,t.bitcount-=a,e.trans[r+i]}function Tt(t,e,r){var i,a,n,o,s,l;for(i=Mt(t,5,257),a=Mt(t,5,1),n=Mt(t,4,4),o=0;o<19;++o)gt[o]=0;for(o=0;o<n;++o){var h=Mt(t,3,0);gt[pt[o]]=h}for(At(xt,gt,0,19),s=0;s<i+a;){var _=wt(t,xt);switch(_){case 16:var u=gt[s-1];for(l=Mt(t,2,3);l;--l)gt[s++]=u;break;case 17:for(l=Mt(t,3,3);l;--l)gt[s++]=0;break;case 18:for(l=Mt(t,7,11);l;--l)gt[s++]=0;break;default:gt[s++]=_}}At(e,gt,0,i),At(r,gt,i,a)}function St(t,e,r){for(;;){var i=wt(t,e);if(256===i)return 0;if(i<256)t.dest[t.destLen++]=i;else{var a,n,o,s=void 0;for(a=Mt(t,ct[i-=257],vt[i]),n=wt(t,r),s=o=t.destLen-Mt(t,yt[n],dt[n]);s<o+a;++s)t.dest[t.destLen++]=t.dest[s]}}}function Rt(t){for(var e,r;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if((e=256*(e=t.source[t.sourceIndex+1])+t.source[t.sourceIndex])!==(65535&~(256*t.source[t.sourceIndex+3]+t.source[t.sourceIndex+2])))return-3;for(t.sourceIndex+=4,r=e;r;--r)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,0}function kt(t,e){for(var r="",i=e;i<e+4;i++)r+=String.fromCharCode(t.getInt8(i));return r}function Ct(t,e){return t.getUint16(e,!1)}function Ft(t,e){return t.getUint32(e,!1)}function It(t,e){for(var r=[],i=12,a=0;a<e;a+=1){var n=kt(t,i),o=Ft(t,i+4),s=Ft(t,i+8),l=Ft(t,i+12);r.push({tag:n,checksum:o,offset:s,length:l,compression:!1}),i+=16}return r}function Ot(t,e){if("WOFF"===e.compression){var r=new Uint8Array(t.buffer,e.offset+2,e.compressedLength-2),i=new Uint8Array(e.length);return function(t,e){var r,i,a=new _t(t,e);do{switch(r=Et(a),Mt(a,2,0)){case 0:i=Rt(a);break;case 1:i=St(a,ut,ft);break;case 2:Tt(a,a.ltree,a.dtree),i=St(a,a.ltree,a.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!r);a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest}(r,i),i.byteLength!==e.length&&lt.error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length"),{data:new DataView(i.buffer,0),offset:0}}return{data:t,offset:e.offset}}!function(t,e){var r;for(r=0;r<7;++r)t.table[r]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,r=0;r<24;++r)t.trans[r]=256+r;for(r=0;r<144;++r)t.trans[24+r]=r;for(r=0;r<8;++r)t.trans[168+r]=280+r;for(r=0;r<112;++r)t.trans[176+r]=144+r;for(r=0;r<5;++r)e.table[r]=0;for(e.table[5]=32,r=0;r<32;++r)e.trans[r]=r}(ut,ft),mt(ct,vt,4,3),mt(yt,dt,2,1),ct[28]=0,vt[28]=258;var Lt=function(){function t(t,e){this.data=t,this.offset=e,this.relativeOffset=0}return n(t,[{key:"parseUShort",value:function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t}},{key:"parseULong",value:function(){var t=Ft(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t}},{key:"parseShort",value:function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t}},{key:"parseFixed",value:function(){var t,e,r=(t=this.data,e=this.offset+this.relativeOffset,t.getInt16(e,!1)+t.getUint16(e+2,!1)/65535);return this.relativeOffset+=4,r}},{key:"parseVersion",value:function(t){var e=Ct(this.data,this.offset+this.relativeOffset),r=Ct(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===t&&(t=4096),e+r/t/10}}]),t}(),Bt=function(t){var e,r,i=new DataView(t,0),a=kt(i,0);if(a===String.fromCharCode(0,1,0,0)||"true"===a||"typ1"===a)r=It(i,e=Ct(i,4));else if("OTTO"===a)r=It(i,e=Ct(i,4));else if("wOFF"===a){var n=kt(i,4);if(n!==String.fromCharCode(0,1,0,0)&&"OTTO"!==n)return void lt.error("Unsupported OpenType flavor "+a);r=function(t,e){for(var r=[],i=44,a=0;a<e;a+=1){var n=kt(t,i),o=Ft(t,i+4),s=Ft(t,i+8),l=Ft(t,i+12),h=void 0;h=s<l&&"WOFF",r.push({tag:n,offset:o,compression:h,compressedLength:s,length:l}),i+=20}return r}(i,e=Ct(i,12))}else lt.error("Unsupported OpenType signature "+a);for(var o,s,l=2048,h=0,_=0;_<e;_++){var u=r[_];if("head"===u.tag){var f=Ot(i,u),c=new Lt(f.data,f.offset);c.parseVersion(),c.parseFixed(),c.parseULong(),c.parseULong(),c.parseUShort(),l=c.parseUShort()}else if("hhea"===u.tag){var v=Ot(i,u),y=new Lt(v.data,v.offset);y.parseVersion(),o=Math.abs(y.parseShort()),s=Math.abs(y.parseShort()),h=Math.abs(y.parseShort()||0)}}return{emSquare:l,ascent:o,descent:s,lineGap:h}},Dt=Y.isString,Pt={},Nt={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},simsun:{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)&&this.info[t].checked},register:function(t,e,r){t=t.toLowerCase(),Dt(e)||e instanceof ArrayBuffer||(r=e,e=null);var i=this.info,a=i[t]=i[t]||{};function n(t){var e=t.emSquare,r=void 0===e?2048:e,i=t.ascent,n=t.descent,o=t.lineGap,s=void 0===o?0:o;i&&n&&Object.assign(a,{lhr:(i+n+s)/r,blr:i/r})}e&&!a.url&&(a.url=e,lt.loadFont(t,e,(function(e,r){if(a.success=e.success,e.success){if(!a.lhr&&r)n(Bt(r));for(var i=Pt[t]||[];i.length;){i.pop().__emitFontRegister(t)}}}))),r&&!a.lhr&&n(r)},hasRegister:function(t){return this.info.hasOwnProperty(t)&&this.info[t].hasOwnProperty("lhr")},hasLoaded:function(t){return this.info.hasOwnProperty(t)&&this.info[t].success},onRegister:function(t,e){(Pt[t]=Pt[t]||[]).push(e)},offRegister:function(t,e){var r=Pt[t]=Pt[t]||[],i=r.indexOf(e);i>-1&&r.splice(i,1)}};Nt.info["宋体"]=Nt.info.simsun,Nt.info.pingfang=Nt.info["pingfang sc"];var zt={position:"static",display:"block",boxSizing:"contentBox",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",transformStyle:"flat",backfaceVisibility:"visible",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit",writingMode:"inherit",fontSizeShrink:0},Ht={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},Gt=[],Wt=[];Object.keys(zt).forEach((function(t){Wt.push(t);var e=zt[t];Gt.push({k:t,v:e})}));var Yt=[],Ut=[];Object.keys(Ht).forEach((function(t){Ut.push(t);var e=Ht[t];Yt.push({k:t,v:e})}));var Xt={get fontFamily(){return lt.defaultFontFamily},fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:0,textStrokeOver:"none",writingMode:"horizontalTb"},Vt=[];Object.keys(Xt).forEach((function(t){Vt.push(t)}));var Kt={DOM:zt,GEOM:Ht,isValid:function(t){return zt.hasOwnProperty(t)||Ht.hasOwnProperty(t)},DOM_KEY_SET:Wt,GEOM_KEY_SET:Ut,DOM_ENTRY_SET:Gt,GEOM_ENTRY_SET:Yt,INHERIT:Xt,INHERIT_KEY_SET:Vt,VALID_STRING_VALUE:{position:["static","relative","absolute"],display:["block","inlineBlock","inline","flex","none"],flexDirection:["row","column","rowReverse","columnReverse"],flexWrap:["wrap","wrapReverse","nowrap"],justifyContent:["flexStart","center","flexEnd","spaceBetween","spaceAround","spaceEvenly"],alignItems:["stretch","flexStart","center","flexEnd","baseline"],alignSelf:["auto","stretch","flexStart","center","flexEnd","baseline"],overflow:["visible","hidden"],mixBlendMode:["normal","multiply","screen","overlay","darken","lighten","colorDodge","colorBurn","hardLight","softLight","difference","exclusion","hue","saturation","color","luminosity"],borderTopStyle:["solid","dashed","dotted"],borderRightStyle:["solid","dashed","dotted"],borderBottomStyle:["solid","dashed","dotted"],borderLeftStyle:["solid","dashed","dotted"],backgroundClip:["borderBox","paddingBox","contentBox"],textOverflow:["clip","ellipsis"],alignContent:["stretch","flexStart","center","flexEnd","spaceBetween","spaceAround"],transformStyle:["flat","preserve3d"],backfaceVisibility:["visible","hidden"],boxSizing:["contentBox","borderBox"]}},jt={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};function Zt(t,e,r,i){return t*r+e*i}function qt(t,e,r,i,a,n){return void 0===r&&void 0===i&&void 0===a&&void 0===n&&(i=e.x,n=e.z,a=e.y,e=t.y,r=t.z,t=t.x),t*i+e*a+r*n}function $t(t,e,r){void 0===e&&void 0===r&&(e=t.y,r=t.z,t=t.x);var i=ie(t,e,r);return{x:t/i,y:e/i,z:r/i}}function Jt(t,e,r,i){return Math.abs(t)<1e-9&&Math.abs(e)<1e-9&&Math.abs(r)<1e-9&&Math.abs(i)<1e-9}function Qt(t,e,r,i,a,n){return void 0===r&&void 0===i&&void 0===a&&void 0===n&&(i=e.x,n=e.z,a=e.y,e=t.y,r=t.z,t=t.x),Math.abs(t)<1e-9&&Math.abs(e)<1e-9&&Math.abs(r)<1e-9&&Math.abs(i)<1e-9&&Math.abs(a)<1e-9&&Math.abs(n)<1e-9}function te(t,e,r,i){var a=Zt(t,e,r,i)/(re(t,e)*re(r,i));return a<-1?a=-1:a>1&&(a=1),Math.acos(a)}function ee(t,e,r,i,a,n){void 0===r&&void 0===i&&void 0===a&&void 0===n&&(i=e.x,n=e.z,a=e.y,e=t.y,r=t.z,t=t.x);var o=qt(t,e,r,i,a,n)/(ie(t,e,r)*ie(i,a,n));return o<-1?o=-1:o>1&&(o=1),Math.acos(o)}function re(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}function ie(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}var ae={dotProduct:Zt,dotProduct3:qt,crossProduct:function(t,e,r,i){return t*i-r*e},crossProduct3:function(t,e,r,i,a,n){return void 0===r&&void 0===i&&void 0===a&&void 0===n&&(i=e.x,n=e.z,a=e.y,e=t.y,r=t.z,t=t.x),{x:e*n-a*r,y:r*i-n*t,z:t*a-i*e}},unitize:function(t,e){var r=re(t,e);return{x:t/r,y:e/r}},unitize3:$t,isParallel:function(t,e,r,i){if(Jt(t,e,r,i))return!0;var a=te(t,e,r,i);return Math.abs(a)<1e-9||Math.PI-Math.abs(a)<1e-9},isParallel3:function(t,e,r,i,a,n){if(void 0===r&&void 0===i&&void 0===a&&void 0===n&&(i=e.x,n=e.z,a=e.y,e=t.y,r=t.z,t=t.x),Qt(t,e,r,i,a,n))return!0;var o=ee(t,e,r,i,a,n);return Math.abs(o)<1e-9||Math.PI-Math.abs(o)<1e-9},isZero:Jt,isZero3:Qt,angle:te,angle3:ee,length:re,length3:ie,getPerpendicularVector3:function(t,e,r){var i,a,n,o,s;Math.abs(e)>Math.abs(t)?Math.abs(r)>Math.abs(e)?(i=2,a=1,n=0,o=r,s=-e):Math.abs(r)>Math.abs(t)?(i=1,a=2,n=0,o=e,s=-r):(i=1,a=0,n=2,o=e,s=-t):Math.abs(r)>Math.abs(t)?(i=2,a=0,n=1,o=r,s=-t):Math.abs(r)>Math.abs(e)?(i=0,a=2,n=1,o=t,s=-r):(i=0,a=1,n=2,o=t,s=-e);var l=[0,0,0];return l[i]=s,l[a]=o,l[n]=0,$t(l[0],l[1],l[2])}},ne={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,WRITING_MODE:87,TRANSFORM_STYLE:88,BACKFACE_VISIBILITY:89,BOX_SIZING:90,FONT_SIZE_SHRINK:91,FILL:92,STROKE:93,STROKE_WIDTH:94,STROKE_DASHARRAY:95,STROKE_DASHARRAY_STR:96,STROKE_LINECAP:97,STROKE_LINEJOIN:98,STROKE_MITERLIMIT:99,FILL_RULE:100,MATRIX:101,BORDER_TOP:102,BORDER_RIGHT:103,BORDER_BOTTOM:104,BORDER_LEFT:105,TRANSLATE_PATH:106},oe={};function se(t){var e=oe[t];return e||(e=oe[t]=t.toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()}))),e}var le={};var he={},_e={},ue={};Object.keys(ne).forEach((function(t){var e=ne[t];he[e]=t;var r=se(t);_e[e]=r,ue[r]=e}));var fe={STYLE_KEY:ne,STYLE_R_KEY:he,STYLE_RV_KEY:_e,STYLE_V_KEY:ue,style2Lower:se,style2Upper:function(t){var e=le[t];return e||(e=le[t]=t.replace(/([a-z\d_])([A-Z])/g,(function(t,e,r){return e+"_"+r})).toUpperCase()),e},ELLIPSIS:"…",WASM_STYLE:{TRANSLATE_X:0,TRANSLATE_Y:1,TRANSLATE_Z:2,ROTATE_Z:3,SCALE_X:4,SCALE_Y:5}},ce=4*(Math.sqrt(2)-1)/3,ve=ae.crossProduct,ye=E.calPoint,de=E.isE,pe=fe.STYLE_KEY,xe=pe.WIDTH,ge=pe.HEIGHT,me=pe.TRANSFORM_ORIGIN;function be(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function Ae(t,e,r){for(var i,a=r[0],n=a.x,o=a.y,s=r[0],l=s.x,h=s.y,_=r.length,u=1;u<_;u++){var f=r[u],c=f.x,v=f.y;n=Math.max(n,c),o=Math.max(o,v),l=Math.min(l,c),h=Math.min(h,v)}if(t<l||e<h||t>n||e>o)return!1;for(var y=0,d=r.length;y<d;y++){var p=r[y],x=p.x,g=p.y,m=r[(y+1)%d],b=m.x,A=m.y,E=ve(b-x,A-g,t-x,e-g);if(0!==E)if(E=E>0?1:0,void 0===i)i=E;else if(i^E)return!1}return!0}function Ee(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function Me(t,e,r){var i=c(t,4),a=i[0],n=i[1],o=i[2],s=i[3],l=c(e,4),h=l[0],_=l[1],u=l[2],f=l[3];if(r){if(a>u||n>f||h>o||_>s)return!1}else if(a>=u||n>=f||h>=o||_>=s)return!1;return!0}function we(t,e,r){var i=r.matrix,a=void 0===i?[1,0,0,1,0,0]:i,n=r.computedStyle,o=void 0===n?[]:n,s=o[xe],l=o[ge],h=o[me],_=c(h=void 0===h?[.5*s,.5*l]:h,2),u=_[0],f=_[1],v=ye({x:t*s-u,y:e*l-f},a);return{x:v.x+u,y:v.y+f}}function Te(t){return t*Math.PI/180}var Se={pointInConvexPolygon:Ae,pointInQuadrilateral:function(t,e,r,i,a,n,o,s,l,h,_){if(_&&!de(_)){var u,f,c,v,y=ye({x:r,y:i},_);return r=y.x,i=y.y,u=y.w,a=(y=ye({x:a,y:n},_)).x,n=y.y,f=y.w,l=(y=ye({x:l,y:h},_)).x,h=y.y,c=y.w,o=(y=ye({x:o,y:s},_)).x,s=y.y,u&&1!==u&&(r/=u,i/=u),f&&1!==f&&(a/=f,n/=f),c&&1!==c&&(l/=c,h/=c),(v=y.w)&&1!==v&&(o/=v,s/=v),Ae(t,e,[{x:r,y:i},{x:a,y:n},{x:o,y:s},{x:l,y:h}])}return t>=r&&e>=i&&t<=o&&e<=s},d2r:Te,r2d:function(t){return 180*t/Math.PI},H:ce,h:be,angleBySide:function(t,e,r){var i=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(i)},sideByAngle:function(t,e,r){var i=Math.cos(t);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*i)},pointsDistance:Ee,triangleIncentre:function(t,e,r,i,a,n){var o=Ee(r,i,a,n),s=Ee(t,e,a,n),l=Ee(t,e,r,i);return{x:(o*t+s*r+l*a)/(o+s+l),y:(o*e+s*i+l*n)/(o+s+l)}},ellipsePoints:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,a=r*ce,n=i===r?a:i*ce;return[[t-r,e],[t-r,e-n,t-a,e-i,t,e-i],[t+a,e-i,t+r,e-n,t+r,e],[t+r,e+n,t+a,e+i,t,e+i],[t-a,e+i,t-r,e+n,t-r,e]]},sectorPoints:function t(e,r,i,a,n){if(a>n){var o=[n,a];a=o[0],n=o[1]}if(a===n)return[];var s=[],l=Math.floor(a/90),h=Math.floor(n/90);if(l===h||h-l==1&&n%90==0){var _=be(Te(Math.abs(a-n)))*i,u=Math.sqrt(Math.pow(i,2)+Math.pow(_,2)),f=Math.atan(_/i);if(l<90){var c=Math.sin(Te(a))*i,v=Math.cos(Te(a))*i,y=[e+c,r-v],d=f+Te(a),p=[e+(c=Math.sin(d)*u),r-(v=Math.cos(d)*u)],x=[e+(c=Math.sin(Te(n))*i),r-(v=Math.cos(Te(n))*i)];d=Te(n)-f;var g=[e+(c=Math.sin(d)*u),r-(v=Math.cos(d)*u)];s.push(y),s.push(p.concat(g).concat(x))}else if(l<180){var m=Math.cos(Te(a-90))*i,b=Math.sin(Te(a-90))*i,A=[e+m,r+b],E=f+Te(a-90),M=[e+(m=Math.cos(E)*u),r+(b=Math.sin(E)*u)],w=[e+(m=Math.cos(Te(n-90))*i),r+(b=Math.sin(Te(n-90))*i)];E=Te(n-90)-f;var T=[e+(m=Math.cos(E)*u),r+(b=Math.sin(E)*u)];s.push(A),s.push(M.concat(T).concat(w))}else if(l<270){var S=Math.sin(Te(a-180))*i,R=Math.cos(Te(a-180))*i,k=[e-S,r+R],C=f+Te(a-180),F=[e-(S=Math.sin(C)*u),r+(R=Math.cos(C)*u)],I=[e-(S=Math.sin(Te(n-180))*i),r+(R=Math.cos(Te(n-180))*i)];C=Te(n-180)-f;var O=[e-(S=Math.sin(C)*u),r+(R=Math.cos(C)*u)];s.push(k),s.push(F.concat(O).concat(I))}else{var L=Math.cos(Te(a-270))*i,B=Math.sin(Te(a-270))*i,D=[e-L,r+B],P=f+Te(a-270),N=[e-(L=Math.cos(P)*u),r+(B=Math.sin(P)*u)],z=[e-(L=Math.cos(Te(n-270))*i),r+(B=Math.sin(Te(n-270))*i)];P=Te(n-270)-f;var H=[e-(L=Math.cos(P)*u),r+(B=Math.sin(P)*u)];s.push(D),s.push(N.concat(H).concat(z))}}else{for(var G=l,W=[];G<=h;G++)if(0===G){var Y=t(e,r,i,a,90);W.push(Y)}else if(1===G){if(l===G||n>90){var U=t(e,r,i,a<90?90:a,n>180?180:n);W.push(U)}}else if(2===G){if(l===G||n>180){var X=t(e,r,i,a<180?180:a,n>270?270:n);W.push(X)}}else if(3===G&&(l===G||n>270)){var V=t(e,r,i,a<270?270:a,n);W.push(V)}s=W[0];for(var K=1,j=W.length;K<j;K++)s.push(W[K][1])}return s},getRectsIntersection:function(t,e){if(!Me(t,e))return null;var r=c(t,4),i=r[0],a=r[1],n=r[2],o=r[3],s=c(e,4),l=s[0],h=s[1],_=s[2],u=s[3];return[Math.max(i,l),Math.max(a,h),Math.min(n,_),Math.min(o,u)]},isRectsOverlap:Me,isRectsInside:function(t,e,r){var i=c(t,4),a=i[0],n=i[1],o=i[2],s=i[3],l=c(e,4),h=l[0],_=l[1],u=l[2],f=l[3];if(r){if(a<=h&&n<=_&&o>=u&&s>=f)return!0}else if(a<h&&n<_&&o>u&&s>f)return!0;return!1},calCoordsInNode:we,calPercentInNode:function(t,e,r){var i,a,n=r.computedStyle,o=n[xe],s=n[ge],l=c(n[me],2),h=l[0],_=l[1],u=Math.atan((s-_)/(o-h)),f=we(1,1,r),v=f.x,y=f.y;a=v>=h&&y>=_?(i=h===v?-Math.atan(1/0):Math.atan((y-_)/(v-h)))-u:v>=h&&y<_?(i=h===v?-Math.atan(1/0):Math.atan((_-y)/(v-h)))+u:v<h&&y>=_?(i=Math.atan((y-_)/(h-v)))-u:v<h&&y<_?u>=(i=Math.atan((y-_)/(v-h)))?i+Math.PI-u:-(a=Math.PI-i+u):0;var d,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-_,2));return d=t>=h&&e>=_?h===t?-Math.atan(1/0):Math.atan((e-_)/(t-h)):t>=h&&e<_?h===t?-Math.atan(1/0):-Math.atan((e-_)/(h-t)):t<h&&e>=_?Math.PI-Math.atan((e-_)/(h-t)):Math.atan((e-_)/(t-h))-Math.PI,(d-=a)>Math.PI?(d-=Math.PI,[(h-p*Math.cos(d))/o,(_-p*Math.sin(d))/s]):d>.5*Math.PI?(d=Math.PI-d,[(h-p*Math.cos(d))/o,(_+p*Math.sin(d))/s]):d>=0?{x:(h+p*Math.cos(d))/o,y:(_+p*Math.sin(d))/s}:d>=.5*-Math.PI?(d=-d,{x:(h+p*Math.cos(d))/o,y:(_-p*Math.sin(d))/s}):d>=-Math.PI?(d=Math.PI+d,{x:(h-p*Math.cos(d))/o,y:(_-p*Math.sin(d))/s}):(d=-Math.PI-d,{x:(h-p*Math.cos(d))/o,y:(_+p*Math.sin(d))/s})},pointOnCircle:function(t,e,r,i){return i>=270?(i=Te(i-=270),{x:t-Math.cos(i)*r,y:e-Math.sin(i)*r}):i>=180?(i=Te(i-=180),{x:t-Math.sin(i)*r,y:e+Math.cos(i)*r}):i>=90?(i=Te(i-=90),{x:t+Math.cos(i)*r,y:e+Math.sin(i)*r}):(i=Te(i),{x:t+Math.sin(i)*r,y:e-Math.cos(i)*r})},getPlainNormalEquation:function(t){var e=t[0],r=e.x,i=e.y,a=e.z,n=t[1],o=n.x,s=n.y,l=n.z,h=t[2],_=h.x,u=h.y,f=h.z,c=(s-i)*(f-a)-(l-a)*(u-i),v=(_-r)*(l-a)-(o-r)*(f-a),y=(o-r)*(u-i)-(_-r)*(s-i);return{a:c,b:v,c:y,d:-(c*r+v*i+y*a)}}};var Re={getConicGradientImage:function(t,e,r,i,a,n){if(a.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");r=Math.floor(r),i=Math.floor(i);for(var o=function(r,i){var a=r-t,n=e-i;if(0===a)return n<0?1*Math.PI:0;if(0===n)return a<0?1.5*Math.PI:.5*Math.PI;var o=Math.atan(n/a);return a>0?.5*Math.PI-o:a<0?1.5*Math.PI-o:void 0},s=a.map((function(t){return{color:t[0],angle:t[1]*Math.PI*2}})),l=0;l<i;l++)for(var h=function(t){var e=o(t,l),i=void 0;for(i=0;i<s.length&&s[i].angle<=e;i++);var a=s[i-1],h=s[i];if(!a||!h)return"continue";var _=(e-a.angle)/(h.angle-a.angle),u=h.color.map((function(t,e){return _*(t-a.color[e])+a.color[e]})),f=4*(t+l*r);n[f]=u[0],n[f+1]=u[1],n[f+2]=u[2],n[f+3]=Math.min(255,255*u[3])},_=0;_<r;_++)h(_);return n}},ke=Y.int2rgba;function Ce(t){var e="";return t.forEach((function(t){var r=t.k,i=t.v;"blur"===r?e+="blur(".concat(i,"px)"):"dropShadow"===r?e+="drop-shadow(".concat(i[0],"px ").concat(i[1],"px ").concat(i[2],"px ").concat(ke(i[4]),")"):"hueRotate"===r?e+="hue-rotate(".concat(i,"deg)"):"saturate"!==r&&"brightness"!==r&&"grayscale"!==r&&"contrast"!==r&&"sepia"!==r&&"invert"!==r||(e+="".concat(r,"(").concat(i,"%)"))})),e}var Fe={canvasPolygon:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var a=-1,n=0,o=e.length;n<o;n++){var s=e[n];if(Array.isArray(s)&&s.length){a=n;break}}if(-1!==a){var l=e[a];t.moveTo(l[0]+r,l[1]+i),4===l.length?t.moveTo(l[2]+r,l[3]+i):6===l.length&&t.moveTo(l[4]+r,l[5]+i);for(var h=a+1,_=e.length;h<_;h++){var u=e[h];Array.isArray(u)&&(2===u.length?t.lineTo(u[0]+r,u[1]+i):4===u.length?t.quadraticCurveTo(u[0]+r,u[1]+i,u[2]+r,u[3]+i):6===u.length&&t.bezierCurveTo(u[0]+r,u[1]+i,u[2]+r,u[3]+i,u[4]+r,u[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var a=t[r];if(Array.isArray(a)&&a.length){e=r;break}}if(-1===e)return"";var n=t[e],o="M"+n[0]+","+n[1];4===n.length?o="M"+n[2]+","+n[3]:6===n.length&&(o="M"+n[4]+","+n[5]);for(var s=e+1,l=t.length;s<l;s++){var h=t[s];Array.isArray(h)&&(2===h.length?o+="L"+h[0]+","+h[1]:4===h.length?o+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(o+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return o},canvasLine:function(t,e,r,i,a,n,o,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+l,r+h),3===s?(t.bezierCurveTo(n[0]+l,n[1]+h,o[0]+l,o[1],i+l,a+h),2):2===s?(t.quadraticCurveTo(o[0]+l,o[1]+h,i+l,a+h),2):1===s?(t.quadraticCurveTo(n[0]+l,n[1]+h,i+l,a+h),2):(t.lineTo(i+l,a+h),1)},svgLine:function(t,e,r,i,a,n,o){return 3===o?"M"+t+","+e+"C"+a[0]+","+a[1]+" "+n[0]+","+n[1]+" "+r+","+i:2===o?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:1===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:Ce,svgFilter:Ce},Ie=Se.H,Oe=g.PX,Le=g.PERCENT,Be=g.REM,De=g.VW,Pe=g.VH,Ne=g.VMAX,ze=g.VMIN,He=Fe.canvasPolygon,Ge=Fe.svgPolygon,We=fe.STYLE_KEY,Ye=We.BORDER_LEFT_WIDTH,Ue=We.BORDER_TOP_WIDTH,Xe=We.BORDER_BOTTOM_WIDTH,Ve=We.PADDING_LEFT,Ke=We.PADDING_BOTTOM,je=We.PADDING_TOP,Ze=We.BORDER_TOP_LEFT_RADIUS,qe=We.BORDER_TOP_RIGHT_RADIUS,$e=We.BORDER_BOTTOM_LEFT_RADIUS,Je=We.BORDER_BOTTOM_RIGHT_RADIUS,Qe=We.FONT_SIZE;function tr(t,e,r,i,a,n,o,s){var l=1,h=1,_=1;t:for(var u=n;u>=a;u--)for(var f=s;f>=o;f--){var c=u+f,v=Math.floor((t+f)/c),y=f;if(v*c<f+t)if((y=(t-v*u)/(v-1))>s)continue;if(c=u+y,e>1&&e>u){if(e%c>u)continue;if(r>1)if((e+i)%c>u)continue}if(r>1)if((e+i)%c>u)continue;v>0&&(l=v,h=u,_=y);break t}return{n:l,ps:h,pd:_}}function er(t,e,r,i,a,n){var o=a-e,s=i-r,l=r-e,h=a-i;if("dotted"===t)return tr(o,l,h,s,n,n,Math.max(1,.25*n),2*n);var _=tr(o,l,h,s,n,3*n,Math.max(1,.25*n),2*n),u=_.n,f=_.ps,c=_.pd;return 1===u?tr(o,l,h,s,n,n,Math.max(1,.25*n),2*n):{n:u,ps:f,pd:c}}function rr(t,e,r,i,a,n,o,s,l,h,_,u,f,v){var y=c(f,2),d=y[0],p=y[1],x=c(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return u;for(var b=a+d-(a-i),A=n-g+(o-n),E=[],M=[],w=[],T=0,S=u.length;T<S;T++){var R=u[T];if(R[1][0]<b)E.push(R);else if(R[0][0]>A)w.push(R);else if(R[1][0]>A&&R[0][0]<b){var k=b<a?s+Math.tan(e)*(b-i):l,C=A>n?s+Math.tan(r)*(o-A):l;E.push([R[0],[b,s],[b,k],R[3]]),b<A&&(b>a&&A<n?M.push([[b,s],[A,s],[A,l],[b,l]]):b>a?(M.push([[b,s],[n,s],[n,l],[b,l]]),M.push([[n,s],[A,s],[A,C],[n,l]])):A<n?(M.push([[b,s],[a,s],[a,l],[b,k]]),M.push([[a,s],[A,s],[A,l],[a,l]])):(M.push([[b,s],[a,s],[a,l],[b,k]]),M.push([[a,s],[n,s],[n,l],[a,l]]),M.push([[n,s],[A,s],[A,C],[n,l]]))),w.push([[A,s],R[1],R[2],[A,C]])}else if(R[1][0]>A){var F=A>n?s+Math.tan(r)*(o-A):l;M.push([R[0],[A,s],[A,F],R[3]]),w.push([[A,s],R[1],R[2],[A,F]])}else if(R[0][0]<b){var I=b<a?s+Math.tan(e)*(b-i):l;E.push([R[0],[b,s],[b,I],R[3]]),M.push([[b,s],R[1],R[2],[b,I]])}else M.push(R)}if(E.length){var O,L,B,D,P,N=d>a-i&&t<p,z=Math.atan((a-i)/(l-s)),H=p,G=H/d,W=s+p,Y=p-(l-s),U=Y/(d-(a-i)),X=ir(E[0][0],E[0][1],b,W,G,H,!0,Math.tan(z)*H),V=c(X[0],2);if(O=V[0],L=V[1],N){var K=c((P=ir(E[0][3],E[0][2],b,W,U,Y,!0,Math.tan(z)*Y))[0],2);B=K[0],D=K[1]}E.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=ir(t[0],t[1],b,W,G,H),N&&(i=ir(t[3],t[2],b,W,U,Y)));for(var a=0,n=r.length;a<n;a++)vr(r[a],O,L,0);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),N){for(var o=0,s=i.length;o<s;o++)vr(i[o],B,D,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}))}var j=w.length;if(j){var Z,q,$,J,Q,tt=g>o-n&&t<m,et=Math.atan((o-n)/(l-s)),rt=m,it=rt/g,at=s+m,nt=m-(l-s),ot=nt/(g-(o-n)),st=ar(w[j-1][0],w[j-1][1],A,at,it,rt,!0,Math.tan(et)*rt),lt=c(st[st.length-1],2);if(Z=lt[0],q=lt[1],tt){var ht=c((Q=ar(w[j-1][3],w[j-1][2],A,at,ot,nt,!0,Math.tan(et)*nt))[Q.length-1],2);$=ht[0],J=ht[1]}w.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=ar(t[0],t[1],A,at,it,rt),tt&&(i=ar(t[3],t[2],A,at,ot,nt)));for(var a=0,n=r.length;a<n;a++)vr(r[a],Z,q,1);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),tt){for(var o=0,s=i.length;o<s;o++)vr(i[o],$,J,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}))}return E.concat(M).concat(w)}function ir(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(-f+r)*a,g=(-d+r)*a,m=Math.atan(g/(i-p)),b=r-Math.sin(m)*n/a,A=i-Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,_=i-Math.sin(S)*n}else l=Math.atan(x/(i-v)),h=r-Math.sin(l)*n/a,_=i-Math.cos(l)*n;if(l===m)return[[h,_]];var R=Se.h(Math.abs(l-m))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=l-C,I=m+C;return[[h,_],[r-Math.sin(F)*k/a,i-Math.cos(F)*k],[r-Math.sin(I)*k/a,i-Math.cos(I)*k],[b,A]]}function ar(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(x/(i-v)),b=r+Math.sin(m)*n/a,A=i-Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,_=i-Math.sin(S)*n}else l=Math.atan(g/(i-p)),h=r+Math.sin(l)*n/a,_=i-Math.cos(l)*n;if(m===l)return[[b,A]];var R=Se.h(Math.abs(m-l))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=m+C,I=l-C;return[[b,A],[r+Math.sin(F)*k/a,i-Math.cos(F)*k],[r+Math.sin(I)*k/a,i-Math.cos(I)*k],[h,_]]}function nr(t,e,r,i,a,n,o,s,l,h,_,u,f,v){var y=c(f,2),d=y[0],p=y[1],x=c(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return u;for(var b=l+p-(l-s),A=h-m+(_-h),E=[],M=[],w=[],T=0,S=u.length;T<S;T++){var R=u[T];if(R[2][1]<b)E.push(R);else if(R[1][1]>A)w.push(R);else if(R[2][1]>A&&R[1][1]<b){var k=b<l?n+Math.tan(r)*(l-b):n,C=A>h?n+Math.tan(e)*(A-h):n;E.push([R[0],R[1],[o,b],[k,b]]),b<A&&(A<h&&b>l?M.push([[n,b],[o,b],[o,A],[n,A]]):b>l?(M.push([[n,l],[o,l],[o,h],[n,h]]),M.push([[n,h],[o,h],[o,A],[C,A]])):A<h?(M.push([[k,b],[o,b],[o,l],[n,l]]),M.push([[n,l],[o,l],[o,A],[n,A]])):(M.push([[k,b],[o,b],[o,l],[n,l]]),M.push([[n,l],[o,l],[o,h],[n,h]]),M.push([[n,h],[o,h],[o,A],[C,A]]))),w.push([[C,A],[o,A],R[2],R[3]])}else if(R[2][1]>A){var F=A>h?n+Math.tan(e)*(A-h):n;M.push([R[0],R[1],[o,A],[F,A]]),w.push([[F,A],[o,A],R[2],R[3]])}else if(R[1][1]<b){var I=b<l?n+Math.tan(r)*(l-b):n;E.push([R[0],R[1],[o,b],[I,b]]),M.push([[I,b],[o,b],R[2],R[3]])}else M.push(R)}if(E.length){var O,L,B,D,P,N=p>l-s&&t<d,z=Math.atan((o-n)/(l-s)),H=p,G=H/d,W=o-d,Y=p-(l-s),U=Y/(d-(o-n)),X=or(E[0][1],E[0][2],W,b,G,H,!0,Math.tan(z)*H),V=c(X[X.length-1],2);if(O=V[0],L=V[1],N){var K=c((P=or(E[0][0],E[0][3],W,b,U,Y,!0,Math.tan(z)*Y))[P.length-1],2);B=K[0],D=K[1]}E.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=or(t[1],t[2],W,b,G,H),N&&(i=or(t[0],t[3],W,b,U,Y)));for(var a=0,n=r.length;a<n;a++)vr(r[a],O,L,2);if(N){for(var o=0,s=i.length;o<s;o++)vr(i[o],B,D,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}var j=w.length;if(j){var Z,q,$,J,Q,tt=m>_-h&&t<g,et=Math.atan((o-n)/(_-h)),rt=m,it=rt/g,at=o-g,nt=m-(_-h),ot=nt/(g-(o-n)),st=sr(w[j-1][1],w[j-1][2],at,A,it,rt,!0,Math.tan(et)*rt),lt=c(st[0],2);if(Z=lt[0],q=lt[1],tt){var ht=c((Q=sr(w[j-1][0],w[j-1][3],at,A,ot,nt,!0,Math.tan(et)*nt))[0],2);$=ht[0],J=ht[1]}w.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=sr(t[1],t[2],at,A,it,rt),tt&&(i=sr(t[0],t[3],at,A,ot,nt)));for(var a=0,n=r.length;a<n;a++)vr(r[a],Z,q,3);if(tt){for(var o=0,s=i.length;o<s;o++)vr(i[o],$,J,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}return E.concat(M).concat(w)}function or(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(g/(i-p)),b=r+Math.sin(m)*n/a,A=i-Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,_=i-Math.sin(S)*n}else l=Math.atan(x/(i-v)),h=r+Math.sin(l)*n/a,_=i-Math.cos(l)*n;if(l===m)return[[h,_]];var R=Se.h(Math.abs(l-m))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=l+C,I=r+Math.sin(F)*k/a,O=i-Math.cos(F)*k,L=m-C;return[[b,A],[r+Math.sin(L)*k/a,i-Math.cos(L)*k],[I,O],[h,_]]}function sr(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(x/(v-i)),b=r+Math.sin(m)*n/a,A=i+Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,_=i+Math.sin(S)*n}else l=Math.atan(g/(p-i)),h=r+Math.sin(l)*n/a,_=i+Math.cos(l)*n;if(m===l)return[[b,A]];var R=Se.h(Math.abs(m-l))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=m-C,I=r+Math.sin(F)*k/a,O=i+Math.cos(F)*k,L=l+C;return[[h,_],[r+Math.sin(L)*k/a,i+Math.cos(L)*k],[I,O],[b,A]]}function lr(t,e,r,i,a,n,o,s,l,h,_,u,f,v){var y=c(f,2),d=y[0],p=y[1],x=c(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return u;for(var b=a+d-(a-i),A=n-g+(o-n),E=[],M=[],w=[],T=0,S=u.length;T<S;T++){var R=u[T];if(R[2][0]<b)E.push(R);else if(R[3][0]>A)w.push(R);else if(R[2][0]>A&&R[3][0]<b){var k=b<a?_-Math.tan(e)*(b-i):l,C=A>n?_-Math.tan(r)*(o-A):h;E.push([R[0],[b,k],[b,_],R[3]]),b<A&&(b>a&&A<n?M.push([[b,h],[A,h],[A,_],[b,_]]):b>a?(M.push([[b,h],[n,h],[n,_],[b,_]]),M.push([[n,h],[A,C],[A,_],[n,_]])):A<n?(M.push([[b,k],[a,h],[a,_],[b,_]]),M.push([[a,h],[A,h],[A,_],[a,_]])):(M.push([[b,k],[a,h],[a,_],[b,_]]),M.push([[a,h],[n,h],[n,_],[a,_]]),M.push([[n,h],[A,C],[A,_],[n,_]]))),w.push([[A,C],R[1],R[2],[A,_]])}else if(R[2][0]>A){var F=A>n?_-Math.tan(r)*(o-A):h;M.push([R[0],[A,F],[A,_],R[3]]),w.push([[A,F],R[1],R[2],[A,_]])}else if(R[3][0]<b){var I=b<a?_-Math.tan(e)*(b-i):h;E.push([R[0],[b,I],[b,_],R[3]]),M.push([[b,I],R[1],R[2],[b,_]])}else M.push(R)}if(E.length){var O,L,B,D,P,N=d>a-i&&t<p,z=Math.atan((a-i)/(_-h)),H=p,G=H/d,W=_-p,Y=p-(_-h),U=Y/(d-(a-i)),X=hr(E[0][3],E[0][2],b,W,G,H,!0,Math.tan(z)*H),V=c(X[0],2);if(O=V[0],L=V[1],N){var K=c((P=hr(E[0][0],E[0][1],b,W,U,Y,!0,Math.tan(z)*Y))[0],2);B=K[0],D=K[1]}E.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=hr(t[3],t[2],b,W,G,H),N&&(i=hr(t[0],t[1],b,W,U,Y)));for(var a=0,n=r.length;a<n;a++)vr(r[a],O,L,4);if(N){for(var o=0,s=i.length;o<s;o++)vr(i[o],B,D,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}))}var j=w.length;if(j){var Z,q,$,J,Q,tt=g>o-n&&t<m,et=Math.atan((o-n)/(_-h)),rt=m,it=rt/g,at=_-m,nt=m-(_-h),ot=nt/(g-(o-n)),st=_r(w[j-1][3],w[j-1][2],A,at,it,rt,!0,Math.tan(et)*rt),lt=c(st[st.length-1],2);if(Z=lt[0],q=lt[1],tt){var ht=c((Q=_r(w[j-1][0],w[j-1][1],A,at,ot,nt,!0,Math.tan(et)*nt))[Q.length-1],2);$=ht[0],J=ht[1]}w.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=_r(t[3],t[2],A,at,it,rt),tt&&(i=_r(t[0],t[1],A,at,ot,nt)));for(var a=0,n=r.length;a<n;a++)vr(r[a],Z,q,5);if(tt){for(var o=0,s=i.length;o<s;o++)vr(i[o],$,J,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}))}return E.concat(M).concat(w)}function hr(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(-f+r)*a,g=(-d+r)*a,m=Math.atan(g/(p-i)),b=r-Math.sin(m)*n/a,A=i+Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,_=i+Math.sin(S)*n}else l=Math.atan(x/(v-i)),h=r-Math.sin(l)*n/a,_=i+Math.cos(l)*n;if(l===m)return[[h,_]];var R=Se.h(Math.abs(l-m))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=l-C,I=m+C;return[[h,_],[r-Math.sin(F)*k/a,i+Math.cos(F)*k],[r-Math.sin(I)*k/a,i+Math.cos(I)*k],[b,A]]}function _r(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(x/(v-i)),b=r+Math.sin(m)*n/a,A=i+Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,_=i+Math.sin(S)*n}else l=Math.atan(g/(p-i)),h=r+Math.sin(l)*n/a,_=i+Math.cos(l)*n;if(m===l)return[[b,A]];var R=Se.h(Math.abs(m-l))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=m+C,I=l-C;return[[b,A],[r+Math.sin(F)*k/a,i+Math.cos(F)*k],[r+Math.sin(I)*k/a,i+Math.cos(I)*k],[h,_]]}function ur(t,e,r,i,a,n,o,s,l,h,_,u,f,v){var y=c(f,2),d=y[0],p=y[1],x=c(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return u;for(var b=l+p-(l-s),A=h-m+(_-h),E=[],M=[],w=[],T=0,S=u.length;T<S;T++){var R=u[T];if(R[3][1]<b)E.push(R);else if(R[0][1]>A)w.push(R);else if(R[3][1]>A&&R[0][1]<b){var k=b<l?a-Math.tan(r)*(l-b):a,C=A>h?a-Math.tan(e)*(A-h):a;E.push([R[0],R[1],[k,b],[i,b]]),b<A&&(A<h&&b>l?M.push([[i,b],[a,b],[a,A],[i,A]]):b>l?(M.push([[i,b],[a,b],[a,h],[i,h]]),M.push([[i,h],[a,h],[C,A],[i,A]])):A<h?(M.push([[i,b],[k,b],[a,l],[i,l]]),M.push([[i,l],[a,l],[a,A],[i,A]])):(M.push([[i,b],[k,b],[a,l],[i,l]]),M.push([[i,l],[a,l],[a,h],[i,h]]),M.push([[i,h],[a,h],[C,A],[i,A]]))),w.push([[i,A],[C,A],R[2],R[3]])}else if(R[3][1]>A){var F=A>h?a-Math.tan(e)*(A-h):a;M.push([R[0],R[1],[F,A],[i,A]]),w.push([[i,A],[F,A],R[2],R[3]])}else if(R[1][1]<b){var I=b<l?a-Math.tan(r)*(l-b):a;E.push([R[0],R[1],[I,b],[i,b]]),M.push([[i,b],[I,b],R[2],R[3]])}else M.push(R)}if(E.length){var O,L,B,D,P,N=p>l-s&&t<d,z=Math.atan((a-i)/(l-s)),H=p,G=H/d,W=i+d,Y=p-(l-s),U=Y/(d-(a-i)),X=fr(E[0][0],E[0][3],W,b,G,H,!0,Math.tan(z)*H),V=c(X[X.length-1],2);if(O=V[0],L=V[1],N){var K=c((P=fr(E[0][1],E[0][2],W,b,U,Y,!0,Math.tan(z)*Y))[P.length-1],2);B=K[0],D=K[1]}E.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=fr(t[0],t[3],W,b,G,H),N&&(i=fr(t[1],t[2],W,b,U,Y)));for(var a=0,n=r.length;a<n;a++)vr(r[a],O,L,6);if(N){for(var o=0,s=i.length;o<s;o++)vr(i[o],B,D,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}var j=w.length;if(j){var Z,q,$,J,Q,tt=m>_-h&&t<g,et=Math.atan((a-i)/(_-h)),rt=m,it=rt/g,at=i+g,nt=m-(_-h),ot=nt/(g-(a-i)),st=cr(w[j-1][0],w[j-1][3],at,A,it,rt,!0,Math.tan(et)*rt),lt=c(st[0],2);if(Z=lt[0],q=lt[1],tt){var ht=c((Q=cr(w[j-1][1],w[j-1][2],at,A,ot,nt,!0,Math.tan(et)*nt))[0],2);$=ht[0],J=ht[1]}w.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=cr(t[0],t[3],at,A,it,rt),tt&&(i=cr(t[1],t[2],at,A,ot,nt)));for(var a=0,n=r.length;a<n;a++)vr(r[a],Z,q,7);if(tt){for(var o=0,s=i.length;o<s;o++)vr(i[o],$,J,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}return E.concat(M).concat(w)}function fr(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(r-f)*a,g=(r-d)*a,m=Math.atan(g/(i-p)),b=r-Math.sin(m)*n/a,A=i-Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,_=i-Math.sin(S)*n}else l=Math.atan(x/(i-v)),h=r-Math.sin(l)*n/a,_=i-Math.cos(l)*n;if(l===m)return[[h,_]];var R=Se.h(Math.abs(l-m))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=l+C,I=r-Math.sin(F)*k/a,O=i-Math.cos(F)*k,L=m-C;return[[b,A],[r-Math.sin(L)*k/a,i-Math.cos(L)*k],[I,O],[h,_]]}function cr(t,e,r,i,a,n,o,s){var l,h,_,u=c(t,2),f=u[0],v=u[1],y=c(e,2),d=y[0],p=y[1],x=(r-f)*a,g=(r-d)*a,m=Math.atan(x/(v-i)),b=r-Math.sin(m)*n/a,A=i+Math.cos(m)*n;if(o){var E=s*a,M=Math.atan(E/n),w=Math.sqrt(Math.tan(M)/2),T=w/(1+w),S=2*Math.atan(T);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,_=i+Math.sin(S)*n}else l=Math.atan(g/(p-i)),h=r-Math.sin(l)*n/a,_=i+Math.cos(l)*n;if(m===l)return[[b,A]];var R=Se.h(Math.abs(m-l))*n,k=Math.sqrt(Math.pow(n,2)+Math.pow(R,2)),C=Math.atan(R/n),F=m-C,I=r-Math.sin(F)*k/a,O=i+Math.cos(F)*k,L=l+C;return[[h,_],[r-Math.sin(L)*k/a,i+Math.cos(L)*k],[I,O],[b,A]]}function vr(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var yr=[Ze,qe,Je,$e];var dr={calPoints:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v){var y=[];if("none"===e)return y;if(["dashed","dotted"].indexOf(e)>-1){var d=0===f||2===f?er(e,a,n,o,s,t):er(e,l,h,_,u,t),p=d.n,x=d.ps,g=d.pd;if(p>1){for(var m=0;m<p;m++){var b,A=m===p-1,E=void 0,M=void 0,w=void 0;b=(E=0===f||2===f?m?a+x*m+g*m:a:m?l+x*m+g*m:l)+x,0===f?b<=n?A?y.push([[a,l],[s,l],[o,h],[n,h]]):(M=l+(E-a)*Math.tan(r),w=l+(b-a)*Math.tan(r),y.push([[E,l],[b,l],[b,w],[E,M]])):E>=o?(M=l+(s-E)*Math.tan(i),w=l+(s-b)*Math.tan(i),A?y.push([[E,l],[s,l],[s,l],[E,M]]):y.push([[E,l],[b,l],[b,w],[E,M]])):E<n?(M=l+(E-a)*Math.tan(r),y.push([[E,l],[n,l],[n,h],[E,M]]),A?(y.push([[n,l],[o,l],[o,h],[n,h]]),y.push([[o,l],[s,l],[s,l],[n,h]])):b>o?(w=l+(s-b)*Math.tan(i),y.push([[n,l],[o,l],[o,h],[n,h]]),y.push([[o,l],[b,l],[b,w],[o,h]])):y.push([[n,l],[b,l],[b,h],[n,h]])):b>o?(M=l+(s-b)*Math.tan(i),E<n?(w=l+(E-a)*Math.tan(r),y.push([[E,l],[n,l],[n,h],[E,w]]),y.push([[n,l],[o,l],[o,h],[n,h]]),A?y.push([[o,l],[s,l],[s,l],[o,h]]):y.push([[o,l],[b,l],[b,M],[o,h]])):(y.push([[E,l],[o,l],[o,h],[E,h]]),A?y.push([[o,l],[s,l],[s,l],[o,h]]):y.push([[o,l],[b,l],[b,M],[o,h]]))):A?y.push([[E,l],[s,l],[o,h],[E,h]]):y.push([[E,l],[b,l],[b,h],[E,h]]):1===f?b<=h?A?y.push([[o,h],[s,l],[s,u],[o,_]]):(M=s-(E-l)*Math.tan(r),w=s-(b-l)*Math.tan(r),y.push([[M,E],[s,E],[s,b],[w,b]])):E>=_?(M=o+(E-_)*Math.tan(i),w=o+(b-_)*Math.tan(i),A?y.push([[M,E],[s,E],[s,u],[s,u]]):y.push([[M,E],[s,E],[s,b],[w,b]])):E<h?(M=o+(h-E)*Math.tan(r),y.push([[M,E],[s,E],[s,h],[o,h]]),A?(y.push([[o,h],[s,h],[s,_],[o,_]]),y.push([[o,_],[s,_],[s,u],[s,u]])):b>_?(w=o+(b-_)*Math.tan(i),y.push([[o,h],[s,h],[s,_],[o,_]]),y.push([[o,_],[s,_],[s,b],[w,b]])):y.push([[o,h],[s,h],[s,b],[o,b]])):b>_?(M=o+(b-_)*Math.tan(i),E<h?(w=o+(h-E)*Math.tan(r),y.push([[w,E],[s,E],[s,h],[o,h]]),y.push([[o,h],[s,h],[s,_],[o,_]]),A?y.push([[o,_],[s,_],[s,s],[s,s]]):y.push([[o,_],[s,_],[s,b],[M,b]])):(y.push([[o,E],[s,E],[s,_],[o,_]]),A?y.push([[o,_],[s,_],[s,u],[s,u]]):y.push([[o,_],[s,_],[s,b],[M,b]]))):A?y.push([[o,E],[s,E],[s,u],[o,_]]):y.push([[o,E],[s,E],[s,b],[o,b]]):2===f?b<=n?A?y.push([[a,u],[n,_],[o,_],[s,u]]):(M=u-(E-a)*Math.tan(r),w=u-(b-a)*Math.tan(r),y.push([[E,M],[b,w],[b,u],[E,u]])):E>=o?(M=u-(s-E)*Math.tan(i),w=u-(s-b)*Math.tan(i),A?y.push([[E,M],[s,u],[s,u],[E,u]]):y.push([[E,M],[b,w],[b,u],[E,u]])):E<n?(M=u-(E-a)*Math.tan(r),y.push([[E,M],[n,_],[n,u],[E,u]]),A?(y.push([[n,_],[o,_],[o,u],[n,u]]),y.push([[o,_],[s,u],[s,u],[o,u]])):b>o?(w=u-(b-o)*Math.tan(i),y.push([[n,_],[o,_],[o,u],[n,u]]),y.push([[o,_],[b,w],[b,u],[o,u]])):y.push([[n,_],[b,_],[b,u],[n,u]])):b>o?(M=u-(s-b)*Math.tan(i),E<n?(w=u-(E-o)*Math.tan(r),y.push([[E,w],[n,_],[n,u],[E,u]]),y.push([[n,_],[o,_],[o,u],[n,u]]),A?y.push([[o,_],[s,u],[s,u],[o,u]]):y.push([[o,_],[b,M],[b,u],[o,u]])):(y.push([[E,_],[o,_],[o,u],[E,u]]),A?y.push([[o,_],[s,u],[s,u],[o,u]]):y.push([[o,_],[b,M],[b,u],[o,u]]))):A?y.push([[E,_],[o,_],[s,u],[E,u]]):y.push([[E,_],[b,_],[b,u],[E,u]]):3===f&&(b<=h?A?y.push([[a,l],[n,h],[n,_],[a,u]]):(M=a+(E-l)*Math.tan(r),w=a+(b-l)*Math.tan(r),y.push([[a,E],[M,E],[w,b],[a,b]])):E>=_?(M=a+(u-E)*Math.tan(i),w=a+(u-b)*Math.tan(i),A?y.push([[a,E],[M,E],[a,u],[a,u]]):y.push([[a,E],[M,E],[w,b],[a,b]])):E<h?(M=a+(E-l)*Math.tan(r),y.push([[a,E],[M,E],[n,h],[a,h]]),A?(y.push([[a,h],[n,h],[n,_],[a,_]]),y.push([[a,_],[n,_],[a,u],[a,u]])):b>_?(w=a+(u-b)*Math.tan(i),y.push([[a,h],[n,h],[n,_],[a,_]]),y.push([[a,_],[n,_],[w,b],[a,b]])):y.push([[a,h],[n,h],[n,b],[a,b]])):b>_?(M=a+(u-b)*Math.tan(i),E<h?(w=a+(E-l)*Math.tan(r),y.push([[a,E],[w,E],[n,h],[a,l]]),y.push([[a,h],[n,h],[n,_],[a,_]]),A?y.push([[a,_],[n,_],[a,u],[a,u]]):y.push([[a,_],[n,_],[M,b],[a,b]])):(y.push([[a,E],[n,E],[n,_],[a,_]]),A?y.push([[a,_],[n,_],[a,u],[a,u]]):y.push([[a,_],[n,_],[M,b],[a,b]]))):A?y.push([[a,E],[n,E],[n,_],[a,u]]):y.push([[a,E],[n,E],[n,b],[a,b]]))}if(0===f)return rr(t,r,i,a,n,o,s,l,h,_,u,y,c,v);if(1===f)return nr(t,r,i,a,n,o,s,l,h,_,u,y,c,v);if(2===f)return lr(t,r,i,a,n,o,s,l,h,_,u,y,c,v);if(3===f)return ur(t,r,i,a,n,o,s,l,h,_,u,y,c,v)}}return 0===f?(n>a&&y.push([[a,l],[n,l],[n,h],[a,l]]),y.push([[n,l],[o,l],[o,h],[n,h]]),s>o&&y.push([[o,l],[s,l],[s,l],[o,h]]),rr(t,r,i,a,n,o,s,l,h,_,u,y,c,v)):1===f?(h>l&&y.push([[s,l],[s,l],[s,h],[o,h]]),y.push([[o,h],[s,h],[s,_],[o,_]]),u>_&&y.push([[o,_],[s,_],[s,u],[s,u]]),nr(t,r,i,a,n,o,s,l,h,_,u,y,c,v)):2===f?(n>a&&y.push([[a,u],[n,_],[n,u],[a,u]]),y.push([[n,_],[o,_],[o,u],[n,u]]),s>o&&y.push([[o,_],[s,u],[s,u],[o,u]]),lr(t,r,i,a,n,o,s,l,h,_,u,y,c,v)):3===f?(h>l&&y.push([[a,l],[a,l],[n,h],[a,h]]),y.push([[a,h],[n,h],[n,_],[a,_]]),u>_&&y.push([[a,_],[n,_],[a,u],[a,u]]),ur(t,r,i,a,n,o,s,l,h,_,u,y,c,v)):void 0},calRadius:function(t,e,r,i,a,n,o,s){var l,h=c(a,2),_=h[0],u=h[1],f=c(n,2),v=f[0],y=f[1],d=c(o,2),p=d[0],x=d[1],g=c(s,2),m=g[0],b=g[1];if(_=Math.max(_,0),u=Math.max(u,0),v=Math.max(v,0),y=Math.max(y,0),p=Math.max(p,0),x=Math.max(x,0),m=Math.max(m,0),b=Math.max(b,0),(_>0&&u>0||v>0&&y>0||p>0&&x>0||m>0&&b>0)&&(l=!0),l){var A=[];return _>0&&u>0?(A.push([t,e+u]),A.push([t,e+u*(1-Ie),t+_*(1-Ie),e,t+_,e])):A.push([t,e]),v>0&&y>0?(A.push([t+r-v,e]),A.push([t+r-v*(1-Ie),e,t+r,e+y*(1-Ie),t+r,e+y])):A.push([t+r,e]),p>0&&x>0?(A.push([t+r,e+i-x]),A.push([t+r,e+i-x*(1-Ie),t+r-p*(1-Ie),e+i,t+r-p,e+i])):A.push([t+r,e+i]),m>0&&b>0?(A.push([t+m,e+i]),A.push([t+m*(1-Ie),e+i,t,e+i-b*(1-Ie),t,e+i-b])):A.push([t,e+i]),A}},calBorderRadius:function(t,e,r,i,a){var n=!0;yr.forEach((function(o){i[o]=r[o].map((function(r,i){return r.v>0?(n=!1,r.u===Oe?Math.max(0,r.v):r.u===Le?Math.max(0,r.v*(i?e:t)*.01):r.u===Be?Math.max(0,r.v*a.computedStyle[Qe]):r.u===De?Math.max(0,r.v*a.width*.01):r.u===Pe?Math.max(0,r.v*a.height*.01):r.u===Ne?Math.max(0,r.v*Math.max(a.width,a.height)*.01):r.u===ze?Math.max(0,r.v*Math.min(a.width,a.height)*.01):0):0}))})),n||yr.forEach((function(r,a){var n=a%2==0?0:1,o=n?e:t,s=i[r],l=i[yr[(a+1)%4]];if(s[n]+l[n]>o){var h=.5*o;s[n]>=h&&l[n]>=h?s[n]=l[n]=h:s[n]>h?s[n]=o-l[n]:l[n]>h&&(l[n]=o-s[n])}}))},calBorderRadiusInline:function(t,e,r){var i,a;t.length&&(i=t[0],(a=t[t.length-1]).isEllipsis&&(a=t[t.length-2]));var n=i?i.outerWidth:0,o=i?i.outerHeight:0;n+=r[Ye]+r[Ve],o+=r[Ue]+r[Xe]+r[je]+r[Ke],[Ze,$e].forEach((function(t){r[t]=e[t].map((function(t,e){var r;return t.u===Oe?(r=Math.max(0,t.v),r=Math.min(e?o:n,r)):(r=Math.max(0,t.v*(e?o:n)*.01),r=Math.min(e?o:n,r)),r}))})),n=a?a.outerWidth:0,o=a?a.outerHeight:0,[qe,Je].forEach((function(t){r[t]=e[t].map((function(t,e){var r;return t.u===Oe?(r=Math.max(0,t.v),r=Math.min(e?o:n,r)):(r=Math.max(0,t.v*(e?o:n)*.01),r=Math.min(e?o:n,r)),r}))}))},renderBorder:function(t,e,r,i,a,n,o){if(e===x.CANVAS)r.beginPath(),r.fillStyle!==a&&(r.fillStyle=a),i.forEach((function(t){He(r,t,n,o)})),r.fill(),r.closePath();else if(e===x.SVG){var s="";i.forEach((function(t){s+=Ge(t)})),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",a]]})}}},pr=Y.rgba2int,xr=Y.isNil,gr=g.PX,mr=g.PERCENT,br=g.DEG,Ar=g.NUMBER,Er=g.REM,Mr=g.VW,wr=g.VH,Tr=g.VMAX,Sr=g.VMIN,Rr=g.calUnit,kr=Se.d2r,Cr=Fe.canvasPolygon,Fr=fe.STYLE_KEY.FONT_SIZE;function Ir(t){if(/^[-+]?[\d.]/.test(t)){var e=Rr(t);return[Ar,br].indexOf(e.u)>-1&&(e.v=gr),e}return{v:{top:0,left:0,center:50,right:100,bottom:100}[t]||50,u:mr}}function Or(t,e,r){for(var i=[],a=t[0][0],n=0,o=t.length;n<o;n++){var s=t[n];if(s.length>1){var l=s[1];l.u===mr?i.push([s[0],.01*l.v]):l.u===Er?i.push([s[0],l.v*r.computedStyle[Fr]/e]):l.u===Mr?i.push([s[0],l.v*r.width/e]):l.u===wr?i.push([s[0],l.v*r.height/e]):l.u===Tr?i.push([s[0],l.v*Math.max(r.width,r.height)/e]):l.u===Sr?i.push([s[0],l.v*Math.min(r.width,r.height)/e]):i.push([s[0],l.v/e])}else i.push([s[0]])}if(1===i.length&&i.push(Y.clone(i[0])),1===i[0].length&&i[0].push(0),i.length>1){var h=i.length-1;1===i[h].length&&i[h].push(1)}for(var _=i[0][1],u=1,f=i.length;u<f-1;u++){var c=i[u];if(c.length>1)_=c[1];else{for(var v=u+1,y=i[i.length-1][1];v<f-1;v++){var d=i[v];if(d.length>1){y=d[1];break}}for(var p=(y-_)/(v-u+1),x=u;x<v;x++){i[x].push(_+p*(x+1-u))}u=v}}for(var g=1,m=i.length;g<m;g++){var b=i[g],A=i[g-1];b[1]<A[1]&&(b[1]=A[1])}for(var E=0,M=i.length;E<M;E++){var w=i[E];if(w[1]>1){i.splice(E);var T=i[E-1];if(T&&T[1]<1){var S=w[0][0]-T[0][0],R=w[0][1]-T[0][1],k=w[0][2]-T[0][2],C=w[0][3]-T[0][3],F=(1-T[1])/(w[1]-T[1]);i.push([[w[0][0]+S*F,w[0][1]+R*F,w[0][2]+k*F,w[0][3]+C*F],1])}break}}for(var I=i.length-1;I>=0;I--){var O=i[I];if(O[1]<0){i.splice(0,I+1);var L=i[I];if(L&&L[1]>0){var B=L[0][0]-O[0][0],D=L[0][1]-O[0][1],P=L[0][2]-O[0][2],N=L[0][3]-O[0][3],z=-O[1]/(L[1]-O[1]);i.unshift([[O[0][0]+B*z,O[0][1]+D*z,O[0][2]+P*z,O[0][3]+N*z],0])}break}}return i.forEach((function(t){t[1]<0?t[1]=0:t[1]>1&&(t[1]=1)})),i.length||i.push([a,0]),i}function Lr(t,e,r,i){var a,n,o,s;if(t>=270){var l=kr(360-t);a=r+Math.sin(l)*e,n=i+Math.cos(l)*e,o=r-Math.sin(l)*e,s=i-Math.cos(l)*e}else if(t>=180){var h=kr(t-180);a=r+Math.sin(h)*e,n=i-Math.cos(h)*e,o=r-Math.sin(h)*e,s=i+Math.cos(h)*e}else if(t>=90){var _=kr(180-t);a=r-Math.sin(_)*e,n=i-Math.cos(_)*e,o=r+Math.sin(_)*e,s=i+Math.cos(_)*e}else{var u=kr(t);a=r-Math.sin(u)*e,n=i+Math.cos(u)*e,o=r+Math.sin(u)*e,s=i-Math.cos(u)*e}return[a,n,o,s]}function Br(t,e,r,i,a,n){var o=t[0],s=t[1];return[o.u===mr?e+o.v*i*.01:o.u===Er?e+o.v*n.computedStyle[Fr]:o.u===Mr?e+o.v*n.width*.01:o.u===wr?e+o.v*n.height*.01:o.u===Tr?e+o.v*Math.max(n.width,n.height)*.01:o.u===Sr?e+o.v*Math.min(n.width,n.height)*.01:e+o.v,s.u===mr?r+s.v*a*.01:s.u===Er?r+s.v*n.computedStyle[Fr]:s.u===Mr?r+s.v*n.width*.01:s.u===wr?r+s.v*n.height*.01:s.u===wr?r+s.v*Math.max(n.width,n.height)*.01:s.u===wr?r+s.v*Math.min(n.width,n.height)*.01:r+s.v]}function Dr(t,e,r,i,a,n,o,s,l,h){var _,u,f,v,y,d,p,x=0;if(Array.isArray(e))_=n+e[0]*i,u=o+e[1]*a,d=n+e[4]*i,p=o+e[5]*a,e[6]<=0?y=Math.min(Math.abs(_-n),Math.min(Math.abs(u-o),Math.min(Math.abs(u-l),Math.min(Math.abs(_-l))))):(v=(f=Math.sqrt(Math.pow((e[2]-e[0])*i,2)+Math.pow((e[3]-e[1])*a,2)))*e[6],y=Math.max(f,v),f!==v&&(x=e[2]>=e[0]?e[3]>=e[1]?Math.asin((e[3]-e[1])*a/f):-Math.asin((e[1]-e[3])*a/f):e[3]>=e[1]?kr(180)-Math.asin((e[3]-e[1])*a/f):Math.asin((e[1]-e[3])*a/f)-kr(180)));else{var g=c(Br(r,n,o,i,a,h),2);d=_=g[0],p=u=g[1];var m=1;if("closest-corner"===e&&"circle"===t)_<=n||_>=s||u<=o||u>=l?y=Math.min(Math.abs(_-n),Math.min(Math.abs(u-o),Math.min(Math.abs(u-l),Math.min(Math.abs(_-l))))):(f=_<n+.5*i?_-n:s-_,v=u<o+.5*a?u-o:l-u,y=Math.sqrt(Math.pow(f,2)+Math.pow(v,2)));else if("closest-side"===e||"closest-corner"===e)if(_<=n||_>=s||u<=o||u>=l)y=Math.min(Math.abs(_-n),Math.min(Math.abs(u-o),Math.min(Math.abs(u-l),Math.min(Math.abs(_-l)))));else{var b=1;f=_<n+.5*i?_-n:s-_,v=u<o+.5*a?u-o:l-u,y=Math.min(f,v),"closest-corner"===e&&(b=Math.sqrt(2)),f*=b,v*=b,y*=b}else f=_<=n?n-_+i:_>=s?_-s+i:_<n+.5*i?s-_:_-n,v=u<=o?o-u+a:u>=l?u-l+a:u<o+.5*a?l-u:u-o,y=Math.max(f,v),"farthest-side"!==e&&(m=Math.sqrt(2)),f*=m,v*=m,y*=m}return"circle"===t&&(f=v=y),[_,u,y,f,v,d,p,x]}var Pr={parseGradient:function(t){var e=jt.gradient.exec(t);if(e){var r={k:e[1]};if("linear"===r.k){var i=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(e[2]);if(i)r.d=function(t){var e=180;if("to top"===t)e=0;else if("to top right"===t)e=45;else if("to right"===t)e=90;else if("to bottom right"===t)e=135;else if("to bottom"===t);else if("to bottom left"===t)e=225;else if("to left"===t)e=270;else if("to top left"===t)e=315;else{var r=/([-+]?[\d.]+)deg/.exec(t);r&&(e=parseFloat(r[1]))}return e%360}(i[0].toLowerCase());else{var a=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(e[2]);r.d=a?[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])]:180}}else if("radial"===r.k){r.s=e[2].indexOf("circle")>-1?"circle":"ellipse";var n=/(closest|farthest)-(side|corner)/i.exec(e[2]);if(n)r.z=n[0].toLowerCase();else{var o=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(e[2]);if(o){r.z=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])];var s=!xr(o[5]),l=!xr(o[6]),h=!xr(o[7]);s&&l&&h?(r.z.push(parseFloat(o[5])),r.z.push(parseFloat(o[6])),r.z.push(parseFloat(o[7]))):s&&l?(r.z.push(parseFloat(o[5])),r.z.push(parseFloat(o[6])),r.z.push(1)):s?(r.z.push(r.z[0]),r.z.push(r.z[1]),r.z.push(parseFloat(o[5]))):(r.z.push(r.z[0]),r.z.push(r.z[1]),r.z.push(1))}else r.z="farthest-corner"}var _=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(_){var u=Ir(_[1]),f=_[2]?Ir(_[2]):u;r.p=[u,f]}else r.p=[{v:50,u:mr},{v:50,u:mr}]}else if("conic"===r.k){var c=/([-+]?[\d.]+deg)/i.exec(e[2]);r.d=c?parseFloat(c[0])%360:0;var v=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(v){var y=Ir(v[1]),d=v[2]?Ir(v[2]):y;r.p=[y,d]}else r.p=[{v:50,u:mr},{v:50,u:mr}]}var p=e[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[];return r.v=p.map((function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),r=[pr(e[0])],i=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);if(i){var a=Rr(i[0]);[Ar,br].indexOf(a.u)>-1&&(a.v=gr),r[1]=a}return r})),r}},getLinear:function(t,e,r,i,a,n,o,s,l){var h,_,u,f,c,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;if(r+=v,i+=y,a+=v,n+=y,Array.isArray(e)){h=r+e[0]*o,_=i+e[1]*s,u=r+e[2]*o,f=i+e[3]*s;var d=Math.sqrt(Math.pow(u-h,2)+Math.pow(f-_,2));c=Or(t,d)}else{for(;e>=360;)e-=360;for(;e<0;)e+=360;var p=Math.max(o,s),x=Lr(e,p,a,n);p*=2;var g=ae.dotProduct(r-x[0],i-x[1],x[2]-x[0],x[3]-x[1])/p,m=ae.dotProduct(r+o-x[0],i-x[1],x[2]-x[0],x[3]-x[1])/p,b=ae.dotProduct(r+o-x[0],i+s-x[1],x[2]-x[0],x[3]-x[1])/p,A=ae.dotProduct(r-x[0],i+s-x[1],x[2]-x[0],x[3]-x[1])/p,E=g,M=g;E=Math.min(E,Math.min(m,Math.min(b,A)));var w=(M=Math.max(M,Math.max(m,Math.max(b,A))))-E,T=E/p,S=x[2]-x[0],R=x[3]-x[1];h=x[0]+S*T,_=x[1]+R*T,u=x[2]-S*T,f=x[3]-R*T,c=Or(t,w,l)}return{x1:h,y1:_,x2:u,y2:f,stop:c}},getRadial:function(t,e,r,i,a,n,o,s,l){var h,_=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=o-a,v=s-n,y=Dr(e,r,i,f,v,a+=_,n+=u,o+=_,s+=u,l),d=c(y,8),p=d[0],x=d[1],g=d[2],m=d[3],b=d[4],A=d[5],M=d[6],w=d[7],T=1,S=1;if(m!==b||w){if(h=[1,0,0,1,0,0],w){var R=Math.sin(w),k=Math.cos(w);h=[k,R,0,0,-R,k,0,0,0,0,1,0,0,0,0,1]}if(m!==g){var C=[T=m/g,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];h=E.multiply(h,C)}if(b!==g){var F=[1,0,0,0,0,S=b/g,0,0,0,0,1,0,0,0,0,1];h=E.multiply(h,F)}}var I=Or(t,g,l);return{cx:p,cy:x,tx:A,ty:M,r:g,stop:I,scx:T,scy:S,matrix:h,d:w}},getConic:function(t,e,r,i,a,n,o,s,l){var h=function(t,e,r,i,a,n,o,s){var l,h,_,u=n-i,f=o-a,v=c(Br(r,i,a,u,f,s),2),y=v[0],d=v[1];h=y>=i+.5*u?y-i:n-y;_=d>=a+.5*f?d-a:o-d;return l=Math.sqrt(Math.pow(h,2)+Math.pow(_,2)),[y,d,l,e]}(0,e,r,i,a,n,o,l),_=c(h,4),u=_[0],f=_[1],v=_[2];return v<<=1,{cx:u,cy:f,w:n-i,h:o-a,r:v*=s,deg:_[3],stop:Or(t,1,l)}},renderConic:function(t,e,r,i,a,n,o,s,l,h,_,u,f){var c=dr.calRadius(a,n,o,s,l,h,_,u);if(c||(c=[[a,n],[a+o,n],[a+o,n+s],[a,n+s],[a,n]]),e===x.CANVAS){var v=lt.getOffscreenCanvas(o,s,"__$$CONIC_GRADIENT$$__",null),y=v.ctx.getImageData(0,0,o,s);Re.getConicGradientImage(i.cx-a,i.cy-n,i.w,i.h,i.stop,y.data),v.ctx.putImageData(y,0,0),r.save(),r.beginPath(),Cr(r,c),r.clip(),r.closePath(),r.drawImage(v.canvas,a,n),r.restore(),v.ctx.clearRect(0,0,o,s)}}},Nr=Y.isNil;function zr(t,e,r,i){Nr(t.flexGrow)&&(t.flexGrow=e||0),Nr(t.flexShrink)&&(t.flexShrink=r||0),Nr(t.flexBasis)&&(t.flexBasis=i||0)}var Hr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(t,e){var r=this,i=t[e];if("background"===e)if(Array.isArray(i)){var a=i.length;if(Nr(t.backgroundColor)){var n=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(i[a-1]);n&&(t.backgroundColor=n[0],i=i.slice(0,a-1))}var o=[],s=[],l=[];i.forEach((function(e){if(Nr(t.backgroundImage)){var r=jt.gradient.exec(e);if(r)o.push(r[0]),e=e.replace(r[0],"");else{var a=jt.img.exec(i);a&&(o.push(a[0]),e=e.replace(a[0],""))}}if(Nr(t.backgroundRepeat)){var n=/(no-?)?repeat(-?[xy])?/i.exec(e);n&&s.push(n[0].toLowerCase())}if(Nr(t.backgroundPosition)){var h=e.match(jt.position);h&&l.push(h.join(" "))}})),o.length&&(t.backgroundImage=o),s.length&&(t.backgroundRepeat=s),l.length&&(t.backgroundPosition=l,this.toFull(t,"backgroundPosition"))}else{if(Nr(t.backgroundImage)){var h=jt.gradient.exec(i);if(h)t.backgroundImage=h[0],i=i.replace(h[0],"");else{var _=jt.img.exec(i);_&&(t.backgroundImage=_[0],i=i.replace(_[0],""))}}if(Nr(t.backgroundRepeat)){var u=/(no-?)?repeat(-?[xy])?/i.exec(i);u&&(t.backgroundRepeat=u[0].toLowerCase())}if(Nr(t.backgroundColor)){var f=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(i);f&&(t.backgroundColor=f[0],i=i.replace(f[0],""))}if(Nr(t.backgroundPosition)){var c=i.match(jt.position);c&&(t.backgroundPosition=c.join(" "),this.toFull(t,"backgroundPosition"))}}else if("flex"===e)if("none"===i)zr(t,0,0,"auto");else if("auto"===i)zr(t,1,1,"auto");else if(/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(i)||/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(i)){var v=i.split(/\s+/);zr(t,parseFloat(v[0]),parseFloat(v[1]),v[2])}else if(/^[\d.]+\s+[\d.]+$/.test(i)){var y=i.split(/\s+/);zr(t,parseFloat(y[0]),parseFloat(y[1]),0)}else if(/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(i)){var d=i.split(/\s+/);zr(t,parseFloat(d[0]),1,d[1])}else/^[\d.]+$/.test(i)?zr(t,parseFloat(i),1,0):/^[\d.]+[pxremvwhina%]+/i.test(i)?zr(t,1,1,i):zr(t,0,1,"auto");else if("flexFlow"===e)(i=i.toString().split(/\s+/)).length&&(Nr(t.flexDirection),t.flexDirection=i[0],i.length>1&&(t.flexWrap=i[1]));else if("borderRadius"===e){1===(i=i.toString().split("/")).length&&(i[1]=i[0]);for(var p=0;p<2;p++){var x=i[p].toString().split(/\s+/);0===x.length?i[p]=[0,0,0,0]:1===x.length?i[p]=[x[0],x[0],x[0],x[0]]:2===x.length?i[p]=[x[0],x[1],x[0],x[1]]:3===x.length?i[p]=[x[0],x[1],x[2],x[1]]:i[p]=x.slice(0,4)}this[e].forEach((function(e,r){Nr(t[e])&&(t[e]=i[0][r]+" "+i[1][r])}))}else if("backgroundPosition"===e){Array.isArray(i)||(i=[i]);var g=this[e].map((function(e){return Nr(t[e])}));i.forEach((function(i){1===(i=i.toString().split(/\s+/)).length&&(i[1]="50%"),r[e].forEach((function(e,r){g[r]&&(t[e]=t[e]||[],t[e].push(i[r]))}))}))}else if(["translate","scale","skew"].indexOf(e)>-1){var m=i.toString().split(/\s*,\s*/);1===m.length&&(m[1]=m[0]),this[e].forEach((function(e,r){Nr(t[e])&&(t[e]=m[r])}))}else if(["translate3d","scale3d"].indexOf(e)>-1){var b=i.toString().split(/\s*,\s*/);1===b.length?b[2]=b[1]=b[0]:2===b.length&&(b[2]="scale3d"===e?1:0),this[e].forEach((function(e,r){Nr(t[e])&&(t[e]=b[r])}))}else if("margin"===e||"padding"===e)!function(t,e,r){var i=t[e];if(!Nr(i)){var a=i.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi);a&&(1===a.length?a[3]=a[2]=a[1]=a[0]:2===a.length?(a[2]=a[0],a[3]=a[1]):3===a.length&&(a[3]=a[1]),r.forEach((function(e,r){Nr(t[e])&&(t[e]=a[r])})))}}(t,e,this[e]);else if(/^border((Top)|(Right)|(Bottom)|(Left))$/.test(e))!function(t,e){var r=t[e];if(!Nr(r)){if(Nr(t[e+"Width"])){var i=/\b[\d.]+[pxremvwhina%]*\b/i.exec(r);t[e+"Width"]=i?i[0]:0}if(Nr(t[e+"Style"])){var a=/\b(solid|dashed|dotted)\b/i.exec(r);t[e+"Style"]=a?a[1]:"solid"}if(Nr(t[e+"Color"])){var n=/#[0-9a-f]{3,8}/i.exec(r);n&&[4,7,9].indexOf(n[0].length)>-1?t[e+"Color"]=n[0]:/\btransparent\b/i.test(r)?t[e+"Color"]="transparent":(n=/rgba?\s*\(.+\)/i.exec(r),t[e+"Color"]=n?n[0]:"transparent")}}}(t,e);else if("textStroke"===e){var A=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(i);A&&(t.textStrokeWidth=A[1]);var E=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(i);E&&(t.textStrokeColor=E[0]),/\bfill\b/i.test(i)?t.textStrokeOver="fill":t.textStrokeOver="none"}else this[e]&&this[e].forEach((function(e){Nr(t[e])&&(t[e]=i)}));return t}},Gr=fe.STYLE_KEY,Wr=Gr.BACKGROUND_COLOR,Yr=Gr.BORDER_BOTTOM_COLOR,Ur=Gr.BORDER_LEFT_COLOR,Xr=Gr.BORDER_RIGHT_COLOR,Vr=Gr.BORDER_TOP_COLOR,Kr=Gr.COLOR,jr=Gr.TEXT_STROKE_COLOR,Zr=Gr.FONT_SIZE,qr=Gr.BORDER_BOTTOM_WIDTH,$r=Gr.BORDER_LEFT_WIDTH,Jr=Gr.BORDER_RIGHT_WIDTH,Qr=Gr.BORDER_TOP_WIDTH,ti=Gr.LEFT,ei=Gr.TOP,ri=Gr.RIGHT,ii=Gr.BOTTOM,ai=Gr.FLEX_BASIS,ni=Gr.WIDTH,oi=Gr.HEIGHT,si=Gr.LINE_HEIGHT,li=Gr.MARGIN_BOTTOM,hi=Gr.MARGIN_LEFT,_i=Gr.MARGIN_TOP,ui=Gr.MARGIN_RIGHT,fi=Gr.PADDING_TOP,ci=Gr.PADDING_RIGHT,vi=Gr.PADDING_BOTTOM,yi=Gr.PADDING_LEFT,di=Gr.STROKE_WIDTH,pi=Gr.STROKE_MITERLIMIT,xi=Gr.LETTER_SPACING,gi=Gr.PERSPECTIVE,mi=Gr.TEXT_STROKE_WIDTH,bi=Gr.TRANSLATE_X,Ai=Gr.TRANSLATE_Y,Ei=Gr.TRANSLATE_Z,Mi=Gr.SKEW_X,wi=Gr.SKEW_Y,Ti=Gr.SCALE_X,Si=Gr.SCALE_Y,Ri=Gr.SCALE_Z,ki=Gr.ROTATE_X,Ci=Gr.ROTATE_Y,Fi=Gr.ROTATE_Z,Ii=Gr.BACKGROUND_IMAGE,Oi=Gr.FILL,Li=Gr.STROKE,Bi=Gr.BORDER_TOP_LEFT_RADIUS,Di=Gr.BORDER_TOP_RIGHT_RADIUS,Pi=Gr.BORDER_BOTTOM_RIGHT_RADIUS,Ni=Gr.BORDER_BOTTOM_LEFT_RADIUS;var zi=function(t){return t===Wr||t===Yr||t===Ur||t===Xr||t===Vr||t===Kr||t===jr},Hi=function(t){return t===Zr||t===mi||t===qr||t===$r||t===Jr||t===Qr||t===ti||t===ei||t===ri||t===ii||t===ai||t===ni||t===oi||t===si||t===li||t===_i||t===hi||t===ui||t===fi||t===ci||t===yi||t===vi||t===di||t===pi||t===xi||t===gi},Gi=function(t){return t===bi||t===Ai||t===Ei||t===Mi||t===wi||t===Ti||t===Si||t===Ri||t===ki||t===Ci||t===Fi},Wi=function(t){return t===Ii||t===Oi||t===Li},Yi=function(t){return t===Ni||t===Bi||t===Di||t===Pi},Ui=Kt.DOM,Xi=Kt.GEOM,Vi=fe.STYLE_KEY,Ki=Vi.POINTER_EVENTS,ji=Vi.COLOR,Zi=Vi.STROKE_WIDTH,qi=Vi.FILL,$i=Vi.STROKE_DASHARRAY,Ji=Vi.STROKE_LINECAP,Qi=Vi.STROKE_LINEJOIN,ta=Vi.STROKE_MITERLIMIT,ea=Vi.BACKGROUND_COLOR,ra=Vi.BACKGROUND_IMAGE,ia=Vi.BACKGROUND_POSITION_X,aa=Vi.BACKGROUND_POSITION_Y,na=Vi.BACKGROUND_REPEAT,oa=Vi.BACKGROUND_SIZE,sa=Vi.STROKE,la=Vi.BORDER_BOTTOM_COLOR,ha=Vi.BORDER_LEFT_COLOR,_a=Vi.BORDER_RIGHT_COLOR,ua=Vi.BORDER_TOP_COLOR,fa=Vi.BORDER_TOP_LEFT_RADIUS,ca=Vi.BORDER_TOP_RIGHT_RADIUS,va=Vi.BORDER_BOTTOM_RIGHT_RADIUS,ya=Vi.BORDER_BOTTOM_LEFT_RADIUS,da=Vi.VISIBILITY,pa=Vi.BOX_SHADOW,xa=Vi.OVERFLOW,ga=Vi.BACKGROUND_CLIP,ma=Vi.TEXT_STROKE_WIDTH,ba=Vi.TEXT_STROKE_COLOR,Aa=Vi.TEXT_STROKE_OVER,Ea=Vi.TRANSLATE_PATH,Ma=Vi.TRANSFORM_STYLE,wa={},Ta=[],Sa={GEOM:wa,GEOM_KEY_SET:Ta,addGeom:function(t,e,r){if(Array.isArray(e))e.forEach((function(e){Sa.addGeom(t,e,r)}));else if(e){wa.hasOwnProperty(e)||Ta.push(e),(wa[e]=wa[e]||{})[t]=r||!0}},isIgnore:function(t){return t===Ki||t===Ea},isGeom:function(t,e){return t&&e&&wa.hasOwnProperty(e)&&wa[e].hasOwnProperty(t)},isRepaint:function(t,e){return t===ji||t===Zi||t===qi||t===$i||t===Ji||t===Qi||t===ta||t===ea||t===ra||t===ia||t===aa||t===na||t===oa||t===sa||t===la||t===ha||t===la||t===_a||t===ua||t===fa||t===ca||t===va||t===ya||t===da||t===pa||t===xa||t===ga||t===ma||t===ba||t===Aa||t===Ma||Sa.isGeom(e,t)},isValid:function(t,e){return!!e&&(!!Ui.hasOwnProperty(e)||(!(!t||"$"!==t.charAt(0)||!Xi.hasOwnProperty(e))||(wa.hasOwnProperty(e)?t&&wa[e].hasOwnProperty(t):"translatePath"===e)))}};function Ra(t){if(t<=0)return 0;var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return e<2&&(e=2),e%2==0&&e++,e}function ka(t){return 3*Math.floor(.5*t)}Sa.addGeom("$line",["xa","ya","xb","yb","controlA","controlB","start","end"]),Sa.addGeom("$circle",["r"]),Sa.addGeom("$ellipse",["rx","ry"]),Sa.addGeom("$rect",["rx","ry"]),Sa.addGeom("$sector",["begin","end","edge","closure"]),Sa.addGeom("$polyline",["points","controls","start","end"]),Sa.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var Ca={kernelSize:Ra,outerSize:function(t){return ka(Ra(t))},outerSizeByD:ka,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),a=0,n=i;n>=0;n--){var o=Math.pow(Math.E,-Math.pow(n,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(o),a+=o}for(var s=1;s<=i;s++){var l=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(l),a+=l}if(1!==a)for(var h=0;h<e;h++)r[h]/=a;return r}},Fa=fe.STYLE_KEY,Ia=fe.style2Upper,Oa=fe.STYLE_KEY,La=Oa.POSITION,Ba=Oa.WIDTH,Da=Oa.HEIGHT,Pa=Oa.TRANSLATE_X,Na=Oa.TRANSLATE_Y,za=Oa.TRANSLATE_Z,Ha=Oa.SCALE_X,Ga=Oa.SCALE_Y,Wa=Oa.SCALE_Z,Ya=Oa.SKEW_X,Ua=Oa.SKEW_Y,Xa=Oa.ROTATE_X,Va=Oa.ROTATE_Y,Ka=Oa.ROTATE_Z,ja=Oa.ROTATE_3D,Za=Oa.PERSPECTIVE,qa=Oa.PERSPECTIVE_ORIGIN,$a=Oa.TRANSFORM,Ja=Oa.TRANSFORM_ORIGIN,Qa=Oa.BACKGROUND_IMAGE,tn=Oa.BACKGROUND_COLOR,en=Oa.BACKGROUND_POSITION_X,rn=Oa.BACKGROUND_POSITION_Y,an=Oa.BACKGROUND_SIZE,nn=Oa.OPACITY,on=Oa.Z_INDEX,sn=Oa.COLOR,ln=Oa.FONT_SIZE,hn=Oa.FONT_FAMILY,_n=Oa.FONT_WEIGHT,un=Oa.FONT_STYLE,fn=Oa.LINE_HEIGHT,cn=Oa.TEXT_ALIGN,vn=Oa.FILTER,yn=Oa.VISIBILITY,dn=Oa.BOX_SHADOW,pn=Oa.POINTER_EVENTS,xn=Oa.FILL,gn=Oa.STROKE,mn=Oa.STROKE_WIDTH,bn=Oa.STROKE_DASHARRAY,An=Oa.FLEX_BASIS,En=Oa.MATRIX,Mn=Oa.LETTER_SPACING,wn=Oa.WHITE_SPACE,Tn=Oa.LINE_CLAMP,Sn=Oa.ORDER,Rn=Oa.TRANSLATE_PATH,kn=Oa.TEXT_STROKE_COLOR,Cn=Oa.TEXT_STROKE_WIDTH,Fn=Oa.TEXT_STROKE_OVER,In=Oa.WRITING_MODE,On=Oa.FONT_SIZE_SHRINK,Ln=g.AUTO,Bn=g.PX,Dn=g.PERCENT,Pn=g.NUMBER,Nn=g.INHERIT,zn=g.DEG,Hn=g.RGBA,Gn=g.STRING,Wn=g.EM,Yn=g.REM,Un=g.VW,Xn=g.VH,Vn=g.VMAX,Kn=g.VMIN,jn=g.GRADIENT,Zn=g.calUnit,qn=Y.isNil,$n=Y.rgba2int,Jn=Y.equalArr,Qn=Y.equal,to=Y.replaceRgba2Hex,eo=Sa.isGeom,ro=Sa.GEOM,io=Sa.GEOM_KEY_SET,ao=Kt.VALID_STRING_VALUE,no=zi,oo=Gi,so=Hi,lo=Wi,ho=Yi;function _o(t){if(jt.gradient.test(t)){var e=jt.gradient.exec(t);if(e&&["linear","radial","conic"].indexOf(e[1])>-1)return!0}}var uo={translateX:Pa,translateY:Na,translateZ:za,scaleX:Ha,scaleY:Ga,scaleZ:Wa,skewX:Ya,skewY:Ua,rotateX:Xa,rotateY:Va,rotateZ:Ka,rotate:Ka};function fo(t,e){t===Ha||t===Ga||t===Wa?e.u=Pn:t===Pa||t===Na||t===za?e.u===Pn&&(e.u=Bn):t===Za?[Pn,Dn,zn].indexOf(e.u)>-1&&(e.u=Bn):e.u===Pn&&(e.u=zn)}function co(t){return qn(t)&&(t=""),(t=t.toString()).indexOf("-")>-1?t.toString().toLowerCase().replace(/-([a-z])/gi,(function(t,e){return e.toUpperCase()})):t}function vo(t,e){e=co(e);var r=ao[t],i=r.indexOf(e);return i>-1?r[i]:r[0]}function yo(t){var e=t[ln],r=xo(t[hn]),i=po(t,r);return.5*(t[fn]-i)+e*(Nt.info[r]||Nt.info[lt.defaultFontFamily]||Nt.info.arial).blr}function po(t,e){return e||(e=xo(t[hn])),t[ln]*(Nt.info[e]||Nt.info[lt.defaultFontFamily]||Nt.info.arial).lhr}function xo(t){for(var e=t.split(/\s*,\s*/),r=0,i=e.length;r<i;r++){var a=e[r].replace(/^['"]/,"").replace(/['"]$/,"");if(Nt.hasLoaded(a)||lt.checkSupportFontFamily(a))return a}return lt.defaultFontFamily}function go(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i.u===Ln){if(r!==Ba)break;e=e.domParent}else{if(i.u===Bn)return t*i.v;if(i.u===Dn)t*=.01*i.v,e=e.domParent;else{if(i.u===Yn)return t*i.v*e.root.computedStyle[ln];if(i.u===Un)return t*i.v*e.root.width*.01;if(i.u===Xn)return t*i.v*e.root.height*.01;if(i.u===Vn)return t*i.v*Math.max(e.root.width,e.root.height)*.01;if(i.u===Kn)return t*i.v*Math.min(e.root.width,e.root.height)*.01}}}return t}var mo={normalize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!Y.isObject(t))return{};var r={},i=(t=Y.extend({},t)).border;if(i&&Hr.toFull(t,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach((function(e){Hr.toFull(t,e)})),(i=t.borderWidth)&&Hr.toFull(t,"borderWidth"),(i=t.borderColor)&&Hr.toFull(t,"borderColor"),(i=t.borderStyle)&&Hr.toFull(t,"borderStyle"),(i=t.borderRadius)&&Hr.toFull(t,"borderRadius"),(i=t.background)&&Hr.toFull(t,"background"),i=t.backgroundPosition,qn(i)||Hr.toFull(t,"backgroundPosition"),(i=t.flex)&&Hr.toFull(t,"flex"),(i=t.flexFlow)&&Hr.toFull(t,"flexFlow"),i=t.margin,qn(i)||Hr.toFull(t,"margin"),i=t.padding,qn(i)||Hr.toFull(t,"padding"),(i=t.textStroke)&&Hr.toFull(t,"textStroke"),(i=t.rotate3d)&&Hr.toFull(t,"rotate3d"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach((function(e){i=t[e],qn(i)||Hr.toFull(t,e)})),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach((function(e){void 0!==t[e]&&t.transform&&lt.warn('Can not use expand style "'.concat(e,'" with transform'))})),e.forEach((function(e){var r=e.k,i=e.v;qn(t[r])&&(t[r]=i)})),void 0!==(i=t.backgroundImage)&&(i?Array.isArray(i)?r[Qa]=i.map((function(t){return t?_o(t)?{v:Pr.parseGradient(t),u:jn}:jt.img.test(t)?{v:jt.img.exec(t)[2],u:Gn}:null:null})):_o(i)?r[Qa]=[{v:Pr.parseGradient(i),u:jn}]:jt.img.test(i)?r[Qa]=[{v:jt.img.exec(i)[2],u:Gn}]:r[Qa]=[]:r[Qa]=[]),void 0!==(i=t.backgroundColor)){var a=/^#[0-9a-f]{3,8}/i.exec(i=i||"transparent");a&&[4,7,9].indexOf(a[0].length)>-1?r[tn]={v:$n(a[0]),u:Hn}:(a=/rgba?\s*\(.+\)/i.exec(i),r[tn]={v:$n(a?a[0]:[0,0,0,0]),u:Hn})}if(["backgroundPositionX","backgroundPositionY"].forEach((function(e,a){void 0!==(i=t[e])&&(i=i||0,e=a?rn:en,Array.isArray(i)||(i=[i]),r[e]=i.map((function(t){if(/^[-+]?[\d.]/.test(t)){var e=Zn(t);return[Pn,zn].indexOf(e.u)>-1&&(e.u=Bn),e}return{v:{top:0,left:0,center:50,right:100,bottom:100}[t]||0,u:Dn}})))})),void 0!==(i=t.backgroundSize)&&(Array.isArray(i)||(i=[i]),r[an]=i.map((function(t){if(!t)return[{u:Ln},{u:Ln}];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0].toLowerCase()||"cover"===e[0].toLowerCase()?e[1]=e[0].toLowerCase():e[1]="auto");for(var r=[],i=0;i<2;i++){var a=e[i].toLowerCase();if(/^[-+]?[\d.]/.test(a)){var n=Zn(a);[Pn,zn].indexOf(n.u)>-1&&(n.u=Bn),r.push(n)}else"contain"===a||"cover"===a?r.push({v:a,u:Gn}):r.push({u:Ln})}return r}return[{u:Ln},{u:Ln}]}))),["Top","Right","Bottom","Left"].forEach((function(e){var i=t[e="border"+e+"Color"];void 0!==i&&(r[Fa[Ia(e)]]={v:$n(i||"transparent"),u:Hn})})),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach((function(e){var i=t[e="border"+e+"Radius"];if(void 0!==i){var a=(i=i||0).toString().split(/\s+/);1===a.length&&(a[1]=a[0]);for(var n=0;n<2;n++){var o=a[n];if(/^[-+]?[\d.]/.test(o)){var s=Zn(o);[Pn,zn].indexOf(s.u)>-1&&(s.u=Bn),s.v<0&&(s.v=0),a[n]=s}else a[n]={u:0,v:Bn}}r[Fa[Ia(e)]]=a}})),void 0!==(i=t.transform)){var n=r[$a]=[],o=(i||"").toString().match(/\w+\(.+?\)/g);o&&o.forEach((function(t){var e=t.indexOf("("),r=t.slice(0,e),i=t.slice(e+1,t.length-1);if("matrix"===r){var a=i.toString().split(/\s*,\s*/);a=a.map((function(t){return parseFloat(t)})),a.length>6&&(a=a.slice(0,6)),6===a.length&&n.push({k:En,v:[a[0],a[1],0,0,a[2],a[3],0,0,0,0,1,0,a[4],a[5],0,1]})}else if("matrix3d"===r){var o=i.toString().split(/\s*,\s*/);o=o.map((function(t){return parseFloat(t)})),o.length>16&&(o=o.slice(0,16)),16===o.length&&n.push({k:En,v:o})}else if("perspective"===r){var s=Zn(i);s.v<0&&(s.v=0),fo(Za,s),n.push({k:Za,v:s})}else if("rotate3d"===r){var l=i.toString().split(/\s*,\s*/);if(4===l.length){var h=Zn(l[3]);fo(ja,h),l[0]=parseFloat(l[0].replace("(","")),l[1]=parseFloat(l[1]),l[2]=parseFloat(l[2]),l[3]=h,n.push({k:ja,v:l})}}else if(uo.hasOwnProperty(r)){var _=uo[r],u=Zn(i);fo(_,u),n.push({k:_,v:u})}else if({translate:!0,scale:!0,skew:!0}.hasOwnProperty(r)){var f=i.toString().split(/\s*,\s*/);if(1===f.length&&(f[1]="scale"===r?f[0]:[0]),2===f.length){var c=Fa[Ia(r+"X")],v=Fa[Ia(r+"Y")],y=Zn(f[0]),d=Zn(f[1]);fo(c,y),fo(v,d),n.push({k:c,v:y}),n.push({k:v,v:d})}}else if({translate3d:!0,scale3d:!0}.hasOwnProperty(r)){var p=i.toString().split(/\s*,\s*/);if(1===p.length?(p[1]="scale3d"===r?[1]:[0],p[2]="scale3d"===r?[1]:[0]):2===p.length&&(p[2]="scale3d"===r?[1]:[0]),3===p.length){var x=Fa[Ia(r+"X")],g=Fa[Ia(r+"Y")],m=Fa[Ia(r+"Z")],b=Zn(p[0]),A=Zn(p[1]),E=Zn(p[2]);fo(x,b),fo(g,A),fo(m,E),n.push({k:x,v:b}),n.push({k:g,v:A}),n.push({k:m,v:E})}}}))}if(void 0!==(i=t.perspective)){var s=Zn(i||0);s.v<0&&(s.v=0),fo(Za,s),r[Za]=s}if(["perspectiveOrigin","transformOrigin"].forEach((function(e){if(void 0!==(i=t[e])){null===i&&(i="");var a=r[Fa[Ia(e)]]=[],n=i.toString().match(jt.position);if(n){1===n.length&&(n[1]=n[0]);for(var o=0;o<2;o++){var s=n[o];if(/^[-+]?[\d.]/.test(s)){var l=Zn(s);[Pn,zn].indexOf(l.u)>-1&&(l.u=Bn),a.push(l)}else a.push({v:{top:0,left:0,center:50,right:100,bottom:100}[s],u:Dn}),qn(a[o].v)&&(a[o].v=50)}}else a.push({v:50,u:Dn}),a.push({v:50,u:Dn})}})),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach((function(e){var i=t[e];if(void 0!==i){null===i&&(i=0===e.indexOf("scale")?1:0);var a=uo[e],n=Zn(i);fo(a,n),r[a]=n}})),void 0!==(i=t.rotate3d)){var l=(i||"").toString().split(/\s*,\s*/);if(4===l.length){var h=Zn(l[3]);fo(ja,h),l[0]=parseFloat(l[0].replace("(","")),l[1]=parseFloat(l[1]),l[2]=parseFloat(l[2]),l[3]=h}r[ja]=l}if(void 0!==(i=t.opacity)&&(null===i&&(i=1),i=parseFloat(i),isNaN(i)?r[nn]=1:(i=Math.max(i,0),i=Math.min(i,1),r[nn]=i)),void 0!==(i=t.zIndex)&&(r[on]=parseInt(i)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach((function(e){var i=t[e];if(void 0!==i){"auto"===i?i={v:0,u:Ln}:(i=Zn(i||0),[Pn,zn].indexOf(i.u)>-1&&(i.u=Bn));var a=Fa[Ia(e)];r[a]=i,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(e)&&i.v<0&&(i.v=0)}})),void 0!==(i=t.flexBasis))if(/content/i.test(i))r[An]={v:i.toLowerCase(),u:Gn};else if(/^[\d.]/.test(i)){var _=r[An]=Zn(i);_.v=Math.max(_.v,0),[Pn,zn].indexOf(_.u)>-1&&(_.u=Bn)}else r[An]={v:0,u:Ln};if(void 0!==(i=t.order)&&(r[Sn]=parseInt(i)||0),void 0!==(i=t.color)&&(/inherit/i.test(i)?r[sn]={u:Nn}:_o(i)?r[sn]={v:Pr.parseGradient(i),u:jn}:r[sn]={v:$n(i),u:Hn}),void 0!==(i=t.textStrokeColor)&&(/inherit/i.test(i)?r[kn]={u:Nn}:_o(i)?r[kn]={v:Pr.parseGradient(i),u:jn}:r[kn]={v:$n(i),u:Hn}),void 0!==(i=t.fontSize))if(/inherit/i.test(i))r[ln]={u:Nn};else{var u=Zn(i);u<=0?r[ln]={u:Nn}:([Pn,zn,Wn].indexOf(u.u)>-1&&(u.v=parseInt(u.v),u.u=Bn),r[ln]=u)}if(void 0!==(i=t.fontSizeShrink)){var f=Zn(i);f<=0?r[On]={v:0,u:Bn}:([Pn,zn,Wn].indexOf(f.u)>-1&&(f.v=parseInt(f.v),f.u=Bn),r[On]=f)}if(void 0!==(i=t.textStrokeWidth))if(/inherit/i.test(i))r[Cn]={u:Nn};else{var c=Zn(i);c<0?r[Cn]={u:Nn}:([Pn,zn,Dn].indexOf(c.u)>-1&&(c.u=Bn),r[Cn]=c)}if(void 0!==(i=t.textStrokeOver))if(null===i||/inherit/i.test(i))r[Fn]={u:Nn};else{var v=Kt.INHERIT.textStrokeOver;/fill/i.test(i)&&(v="fill"),r[Fn]={v:v,u:Gn}}if(void 0!==(i=t.fontWeight)&&(/bold/i.test(i)?r[_n]={v:700,u:Pn}:/normal/i.test(i)?r[_n]={v:400,u:Pn}:/lighter/i.test(i)?r[_n]={v:200,u:Pn}:/inherit/i.test(i)?r[_n]={u:Nn}:r[_n]={v:Math.max(0,parseInt(i))||400,u:Pn}),void 0!==(i=t.fontStyle))if(null===i||/inherit/i.test(i))r[un]={u:Nn};else{var y=Kt.INHERIT.fontStyle;/italic/i.test(i)?y="italic":/oblique/i.test(i)&&(y="oblique"),r[un]={v:y,u:Gn}}if(void 0!==(i=t.fontFamily)&&(null===i||/inherit/i.test(i)?r[hn]={u:Nn}:r[hn]={v:i.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),u:Gn}),void 0!==(i=t.writingMode))if(null===i||/inherit/i.test(i))r[In]={u:Nn};else{var d=Kt.INHERIT.writingMode;/vertical-?rl/i.test(i)?d="verticalRl":/vertical-?lr/i.test(i)&&(d="verticalLr"),r[In]={v:d,u:Gn}}if(void 0!==(i=t.textAlign))if(null===i||/inherit/i.test(i))r[cn]={u:Nn};else{var p="left";/center/i.test(i)?p="center":/right/i.test(i)&&(p="right"),r[cn]={v:p,u:Gn}}if(void 0!==(i=t.lineHeight))if(/inherit/i.test(i))r[fn]={u:Nn};else if(/normal/i.test(i))r[fn]={u:Ln};else if(/^[\d.]+/i.test(i)){var x=Zn(i);[zn].indexOf(x.u)>-1&&(x.u=Pn),r[fn]=x}else{var g=Math.max(0,parseFloat(i))||"normal";r[fn]="normal"===g?{u:Ln}:{v:g,u:Pn}}if(void 0!==(i=t.letterSpacing))if(null===i||/inherit/i.test(i))r[Mn]={u:Nn};else if(/normal/i.test(i))r[Mn]={v:0,u:Bn};else if(/^[-+]?[\d.]/.test(i)){var m=Zn(i);[Pn,zn].indexOf(m.u)>-1&&(m.u=Bn),r[Mn]=m}else r[Mn]={v:parseFloat(i)||0,u:Bn};if(void 0!==(i=t.whiteSpace)&&(null===i||/inherit/i.test(i)?r[wn]={u:Nn}:r[wn]={v:i,u:Gn}),void 0!==(i=t.lineClamp)&&(i=parseInt(i)||0,r[Tn]=Math.max(0,i)),["fill","stroke"].forEach((function(e,a){void 0!==(i=t[e])&&(e=a?gn:xn,Array.isArray(i)||(i=[i]),r[e]=i.map((function(t){return t?_o(t)?{v:Pr.parseGradient(t),u:jn}:{v:$n(t),u:Hn}:{v:"none",u:Gn}})))})),void 0!==(i=t.strokeWidth)&&(Array.isArray(i)||(i=[i]),r[mn]=i.map((function(t){var e=Zn(t);return[Pn,zn].indexOf(e.u)>-1&&(e.u=Bn),e.v=Math.max(e.v,0),e}))),void 0!==(i=t.strokeDasharray))if(Array.isArray(i))r[bn]=i.map((function(t){var e=(t||"").toString().match(/[\d.]+/g);return e?(e=e.map((function(t){return parseFloat(t)})),e.length%2==1&&e.push(e[e.length-1]),e):[]}));else{var b=(i||"").toString().match(/[\d.]+/g);b?((b=b.map((function(t){return parseFloat(t)}))).length%2==1&&b.push(b[b.length-1]),r[bn]=[b]):r[bn]=[[]]}if(void 0!==(i=t.filter)){var A,E=[];(A=Array.isArray(i)?i.map((function(t){return(to(t)||"").match(/[\w-]+\s*\(.+?\)/gi)})):(to(i)||"").match(/[\w-]+\s*\(.+?\)/gi))&&A.forEach((function(t){var e=/([\w-]+)\s*\((\s*.+\s*)\)/i.exec(t);if(e){var r=e[1].toLowerCase(),i=e[2];if("drop-shadow"===r||"dropshadow"===r){var a=/([-+]?[\d.]+[pxremvwhina%]*)[\s,]+([-+]?[\d.]+[pxremvwhina%]*)[\s,]+(?:([-+]?[\d.]+[pxremvwhina%]*)[\s,])?([-+]?[\d.]+[pxremvwhina%]*\s*)?/gi.exec(t);if(a){for(var n=[],o=1;o<=4;o++){var s=a[o];if(s){var l=Zn(s);[Pn,zn].indexOf(l.u)>-1&&(l.u=Bn),o>2&&l.v<0&&(l.v=0),n.push(l)}else n.push({v:0,u:Bn})}var h=/#[a-f\d]{3,8}/i.exec(t);h?n.push($n(h[0])):n.push([0,0,0,1]),E.push({k:"dropShadow",v:n})}}else{var _=/([-+]?[\d.]+\s*[pxremvwhdg%]*)/i.exec(i);if(_){var u=Zn(_[0]);if("blur"===r){if([zn,Dn].indexOf(u.u)>-1)return;u.u===Pn&&(u.u=Bn),u.v=Math.max(u.v,0),E.push({k:r,v:u})}else if("hue-rotate"===r||"huerotate"===r){if(-1===[Pn,zn].indexOf(u.u))return;u.u=zn,E.push({k:"hueRotate",v:u})}else if("saturate"===r||"brightness"===r||"grayscale"===r||"contrast"===r||"sepia"===r||"invert"===r){if(-1===[Pn,Dn].indexOf(u.u))return;u.v=Math.max(u.v,0),u.u=Dn,E.push({k:r,v:u})}}}}})),r[vn]=E}if(void 0!==(i=t.visibility))if(null===i||/inherit/i.test(i))r[yn]={u:Nn};else{var M=Kt.INHERIT.visibility;/hidden/i.test(i)&&(M="hidden"),r[yn]={v:M,u:Gn}}if(void 0!==(i=t.pointerEvents))if(null===i||/inherit/i.test(i)||/auto/i.test(i))r[pn]={u:Nn};else{var w=Kt.INHERIT.pointerEvents;/none/i.test(i)&&(w="none"),r[pn]={v:w,u:Gn}}if(void 0!==(i=t.boxShadow)){var T=[],S=(to(i)||"").split(",");S&&S.forEach((function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?/i.exec(t);if(e){for(var r=[],i=1;i<=4;i++){var a=e[i];if(a){var n=Zn(a);[Pn,zn].indexOf(n.u)>-1&&(n.u=Bn),i>2&&n.v<0&&(n.v=0),r.push(n)}else r.push({v:0,u:Bn})}var o=/#[a-f\d]{3,8}/i.exec(t);o?r.push($n(o[0])):r.push([0,0,0,1]),r.push(/inset/i.test(t)?"inset":"outset"),T.push(r)}})),r[dn]=T}return["position","display","boxSizing","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow","transformStyle","backfaceVisibility"].forEach((function(e){t.hasOwnProperty(e)&&(r[Fa[Ia(e)]]=vo(e,t[e]))})),["flexGrow","flexShrink"].forEach((function(e){t.hasOwnProperty(e)&&(r[Fa[Ia(e)]]=Math.max(parseFloat(t[e])||0,0))})),void 0!==(i=t.zIndex)&&(r[on]=parseFloat(i)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach((function(e){if(t.hasOwnProperty(e)){var i=t[e];Array.isArray(i)||(i=[i]),"backgroundRepeat"===e&&i.forEach((function(t,e){t&&(i[e]=co(t))})),r[Fa[Ia(e)]]=i}})),io.forEach((function(e){t.hasOwnProperty(e)&&(r[e]=t[e])})),r},setFontStyle:function(t,e){var r=e||t[ln]||0,i=t[hn]||lt.defaultFontFamily||"arial";return/\s/.test(i)&&(i='"'+i.replace(/"/g,'\\"')+'"'),(t[un]||"normal")+" "+(t[_n]||"400")+" "+r+"px/"+r+"px "+i},getBaseline:yo,getVerticalBaseline:function(t){return t[fn]-yo(t)},calRelative:function(t,e,r,i,a){return r.u===Ln?r=0:[Bn,Pn].indexOf(r.u)>-1?r=r.v:r.u===Dn?r=go(r.v,i,a?Ba:Da):r.u===Yn?r=r.v*i.root.computedStyle[ln]:r.u===Un?r=r.v*i.root.width*.01:r.u===Xn?r=r.v*i.root.height*.01:r.u===Vn?r=r.v*Math.max(i.root.width,i.root.height)*.01:r.u===Kn&&(r=r.v*Math.min(i.root.width,i.root.height)*.01),r},equalStyle:function(t,e,r,i){if(!e||!r)return e===r;if(t===$a){if(e.length!==r.length)return!1;for(var a=0,n=e.length;a<n;a++){var o=e[a],s=r[a];if(o.k!==s.k)return!1;var l=o.v,h=s.v;if(o.k===En){if(!Jn(l,h))return!1}else if(l.u!==h.u||l.v!==h.v)return!1}return!0}if(t===ja)return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3].v===r[3].v&&e[3].u===r[3].u;if(t===vn){if(e.length!==r.length)return!1;for(var _=0,u=e.length;_<u;_++){var f=e[_],c=r[_];if(f.k!==c.k)return!1;var v=f.v,y=c.v;if("dropShadow"===f.k||"drop-shadow"===f.k){if(v.length!==y.length)return!1;for(var d=0;d<4;d++){var p=v[d],x=y[d];if(p.u!==x.u||p.v!==x.v)return!1}}else if(v.u!==y.u||v.v!==y.v)return!1}return!0}if(t===Ja||t===qa||ho(t))return e[0].v===r[0].v&&e[0].u===r[0].u&&e[1].v===r[1].v&&e[1].u===r[1].u;if(t===en||t===rn||t===mn){if(e.length!==r.length)return!1;for(var g=0,m=e.length;g<m;g++){var b=e[g],A=r[g];if(b.v!==A.v||b.u!==A.u||b.v!==A.v||b.u!==A.u)return!1}return!0}if(t===dn){if(e.length!==r.length)return!1;for(var E=0,M=e.length;E<M;E++){var w=e[E],T=r[E];if(!(w&&T||w===T))return!1;for(var S=0;S<4;S++)if(w[S].v!==T[S].v||w[S].u!==T[S].u)return!1;for(var R=0;R<4;R++)if(w[4][R]!==T[4][R])return!1;if(w[5]!==T[5])return!1}return!0}if(t===an||t===en||t===rn){if(e.length!==r.length)return!1;for(var k=0,C=e.length;k<C;k++){var F=e[k],I=r[k];if(F[0].v!==I[0].v||F[0].u!==I[0].u||F[1].v!==I[1].v||F[1].u!==I[1].u)return!1}return!0}if(so(t)||oo(t))return e.v===r.v&&e.u===r.u;if(lo(t)){if(e.length!==r.length)return!1;for(var O=0,L=e.length;O<L;O++){var B=e[O],D=r[O];if(B.u!==D.u)return!1;var P=B.v,N=D.v;if(B.u===jn){if(P.k!==N.k||P.d!==N.d||P.s!==N.s||P.z!==N.z)return!1;if("linear"===P.k){var z=P.d,H=N.d,G=Array.isArray(z);if(G!==Array.isArray(H))return!1;if(G){if(z[0]!==H[0]||z[1]!==H[1]||z[2]!==H[2]||z[3]!==H[3])return!1}else if(z!==H)return!1}else if("conic"===P.k&&P.d!==N.d)return!1;if("radial"===P.k||"conic"===P.k){var W=P.p,Y=N.p;if(W[0].u!==Y[0].u||W[0].v!==Y[0].v||W[1].u!==Y[1].u||W[1].v!==Y[1].v)return!1}for(var U=0;U<2;U++){var X=P.v[U],V=N.v[U],K=X[0],j=V[0];if(K[0]!==j[0]||K[1]!==j[1]||K[2]!==j[2]||K[3]!==j[3])return!1;if(X[1]&&V[1]){if(X[1].u!==V[1].u||X[1].v!==V[1].v)return!1}else if(X[1]||V[1])return!1}}else if(B.u===Hn){if(!Jn(P,N))return!1}else if(P!==N)return!1}return!0}if(no(t)){if(e.u!==r.u)return!1;if(e.u===jn)return Qn(e.v,r.v);if(e.u===Nn)return!0;if(e.u===Hn)return Jn(e.v,r.v)}return eo(i.tagName,t)&&(i.isMulti||Array.isArray(e)&&Array.isArray(r))?Qn(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[La];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){e||(e=Object.keys(t).map((function(t){return ro.hasOwnProperty(t)||(t=parseInt(t)),t})));for(var r={},i=0,a=e.length;i<a;i++){var n=e[i],o=t[n];if(n===$a){if(o){for(var s=o.length,l=new Array(s),h=0;h<s;h++){var _=o[h];_.k===En?l[h]={k:_.k,v:_.v.slice(0)}:l[h]={k:_.k,v:{v:_.v.v,u:_.v.u}}}r[n]=l}}else if(n===ja)r[n]=[o[0],o[1],o[2],{v:o[3].v,u:o[3].u}];else if(n===vn){if(o){for(var u=o.length,f=new Array(u),c=0;c<u;c++){var v=o[c],y=v.k,d=v.v;if("dropShadow"===y){var p=new Array(5);f[c]={k:y,v:p};for(var x=0;x<4;x++){var g=d[x];p[x]={v:g.v,u:g.u}}p[4]=d[4].slice(0)}else f[c]={k:y,v:{v:d.v,u:d.u}}}r[n]=f}}else if(n===Ja||n===qa||ho(n)){if(o){for(var m=new Array(2),b=0;b<2;b++){var A=o[b];m[b]={v:A.v,u:A.u}}r[n]=m}}else n===en||n===rn||n===mn?r[n]=o.map((function(t){return{v:t.v,u:t.u}})):n===dn?o&&(o=o.map((function(t){for(var e=new Array(6),r=0;r<4;r++){var i=t[r];e[r]={v:i.v,u:i.u}}return e[4]=t[4].slice(0),e[5]=t[5],e})),r[n]=o):n===an?o&&(r[n]=o.map((function(t){return[{v:t[0].v,u:t[0].u},{v:t[1].v,u:t[1].u}]}))):n===nn||n===on?r[n]=o:n===Rn?o&&(r[n]=o.map((function(t){return{v:t.v,u:t.u}}))):so(n)||oo(n)?r[n]={v:o.v,u:o.u}:lo(n)?r[n]=o.map((function(t){return t?t.u===jn?{v:Y.clone(t.v),u:jn}:t.u===Hn?{v:t.v.slice(0),u:Hn}:{v:t.v,u:t.u}:null})):no(n)?o.u===jn?r[n]={v:Y.clone(o.v),u:jn}:o.u===Hn?r[n]={v:o.v.slice(0),u:Hn}:r[n]={u:Nn}:ro.hasOwnProperty(n)?r[n]=Y.clone(o):r[n]=o}return r},calNormalLineHeight:po,calFontFamily:xo,spreadBoxShadow:function(t,e){var r=c(t,4),i=r[0],a=r[1],n=r[2],o=r[3];if(Array.isArray(e)){var s=0,l=0,h=0,_=0;e.forEach((function(t){var e=c(t,6),r=e[0],i=e[1],a=e[2],n=e[3],o=e[4];if("inset"!==e[5]&&o[3]>0){var u=Ca.outerSize(a);u+=n,s=Math.min(s,r-u),l=Math.min(l,r-u),h=Math.max(h,r+u),_=Math.max(_,i+u)}})),i+=s,a+=l,n+=h,o+=_}return[i,a,n,o]},spreadFilter:function(t,e){var r=c(t,4),i=r[0],a=r[1],n=r[2],o=r[3];return Array.isArray(e)&&e.forEach((function(t){var e=t.k,r=t.v;if("blur"===e&&r>0){var s=Ca.kernelSize(r),l=Ca.outerSizeByD(s);l&&(i-=l,a-=l,n+=l,o+=l)}else if("dropShadow"===e){var h=Ca.kernelSize(r[2]),_=Ca.outerSizeByD(h);(r[0]||r[1]||_)&&((r[0]<=0||r[0]>0&&r[0]<_)&&(i+=r[0]-_),(r[1]<=0||r[1]>0&&r[1]<_)&&(a+=r[1]-_),(r[0]<0&&-r[0]<_||r[0]>=0)&&(n+=r[0]+_),(r[1]<0&&-r[1]<_||r[1]>=0)&&(o+=r[1]+_))}})),[i,a,n,o]}},bo=fe.STYLE_KEY,Ao=bo.TRANSLATE_X,Eo=bo.TRANSLATE_Y,Mo=bo.TRANSLATE_Z,wo=bo.SCALE_X,To=bo.SCALE_Y,So=bo.SCALE_Z,Ro=bo.SKEW_X,ko=bo.SKEW_Y,Co=bo.ROTATE_X,Fo=bo.ROTATE_Y,Io=bo.ROTATE_Z,Oo=bo.ROTATE_3D,Lo=bo.PERSPECTIVE,Bo=bo.MATRIX,Do=bo.FONT_SIZE,Po=g.PX,No=g.PERCENT,zo=g.REM,Ho=g.VW,Go=g.VH,Wo=g.VMAX,Yo=g.VMIN,Uo=E.identity,Xo=E.multiply,Vo=E.multiplyTfo,Ko=E.tfoMultiply,jo=E.isE,Zo=E.multiplyTranslateX,qo=E.multiplyTranslateY,$o=E.multiplyTranslateZ,Jo=E.multiplyRotateX,Qo=E.multiplyRotateY,ts=E.multiplyRotateZ,es=E.multiplySkewX,rs=E.multiplySkewY,is=E.multiplyPerspective,as=E.multiplyScaleX,ns=E.multiplyScaleY,os=E.multiplyScaleZ,ss=Se.d2r;function ls(t,e){var r=c(e,4),i=r[0],a=r[1],n=r[2],o=r[3];o=ss(o);var s=Math.sin(o),l=Math.cos(o);if(!i||a||n)if(!a||i||n)if(!n||i||a){var h=Math.sqrt(i*i+a*a+n*n);if(1!==h){var _=1/h;i*=_,a*=_,n*=_}var u=1-l,f=i*a,v=a*n,y=n*i,d=i*s,p=a*s,x=n*s;t[0]=i*i*u+l,t[1]=f*u+x,t[2]=y*u-p,t[3]=0,t[4]=f*u-x,t[5]=a*a*u+l,t[6]=v*u+d,t[7]=0,t[8]=y*u+p,t[9]=v*u-d,t[10]=n*n*u+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}else n<0&&(s=-s),t[0]=l,t[4]=-s,t[1]=s,t[5]=l;else a<0&&(s=-s),t[0]=l,t[8]=s,t[2]=-s,t[10]=l;else i<0&&(s=-s),t[5]=l,t[9]=-s,t[6]=s,t[10]=l;return t}function hs(t,e,r,i){for(var a=Uo(),n=0,o=t.length;n<o;n++){var s=t[n],l=s.k,h=us(l,s.v,e,r,i);if(l===Ao)a=Zo(a,h);else if(l===Eo)a=qo(a,h);else if(l===Mo)a=$o(a,h);else if(l===Co)a=Jo(a,ss(h));else if(l===Fo)a=Qo(a,ss(h));else if(l===Io)a=ts(a,ss(h));else if(l===Ro)a=es(a,ss(h));else if(l===ko)a=rs(a,ss(h));else if(l===wo)a=as(a,h);else if(l===To)a=ns(a,h);else if(l===So)a=os(a,h);else if(l!==Lo||n)if(l===Oo){var _=Uo();ls(_,[h[0],h[1],h[2],h[3].v]),a=Xo(a,_)}else l===Bo&&(a=Xo(a,h));else a=is(a,h)}return a}function _s(t,e,r){var i=t.slice(0);return 0===e&&0===r||jo(t)?i:(i=Ko(e,r,i),i=Vo(i,-e,-r))}function us(t,e,r,i,a){if(t===Ao||t===Eo||t===Mo){if(e.u===Po)return e.v;if(e.u===No)return e.v*(t===Eo?i:r)*.01;if(e.u===zo)return e.v*a.__computedStyle[Do];if(e.u===Ho)return e.v*a.width*.01;if(e.u===Go)return e.v*a.height*.01;if(e.u===Wo)return e.v*Math.max(a.width,a.height)*.01;if(e.u===Yo)return e.v*Math.min(a.width,a.height)*.01}else{if(t===Bo)return e;if(t===Oo)return e}return e.v}var fs={calSingleValue:us,calMatrix:hs,calRotateX:function(t,e){e=ss(e);var r=Math.sin(e),i=Math.cos(e);return t[5]=t[10]=i,t[6]=r,t[9]=-r,t},calRotateY:function(t,e){e=ss(e);var r=Math.sin(e),i=Math.cos(e);return t[0]=t[10]=i,t[8]=r,t[2]=-r,t},calRotateZ:function(t,e){e=ss(e);var r=Math.sin(e),i=Math.cos(e);return t[0]=t[5]=i,t[1]=r,t[4]=-r,t},calRotate3d:ls,calPerspectiveMatrix:function(t,e,r){if(t&&t>0){var i=Uo();return t=Math.max(t,1),i[11]=-1/t,(e||r)&&(i=Ko(e,r,i),i=Vo(i,-e,-r)),i}},calMatrixByOrigin:_s,calMatrixWithOrigin:function(t,e,r,i,a){return _s(hs(t,i,a),e,r)},isPerspectiveMatrix:function(t){if(t)return!!t[11]}},cs=fe.STYLE_KEY,vs=cs.COLOR,ys=cs.FONT_WEIGHT,ds=cs.FONT_FAMILY,ps=cs.FONT_SIZE,xs=cs.FONT_STYLE,gs=cs.LETTER_SPACING,ms=cs.TEXT_STROKE_COLOR,bs=cs.TEXT_STROKE_WIDTH,As=cs.TEXT_STROKE_OVER,Es=cs.ROTATE_Z,Ms=cs.LINE_HEIGHT,ws=g.DEG,Ts=x.CANVAS,Ss=x.SVG,Rs=/(?:[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u02EA\u02EB\u1100-\u11FF\u1401-\u167F\u18B0-\u18FF\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2065\u20DD-\u20E0\u20E2-\u20E4\u2100\u2101\u2103-\u2109\u210F\u2113\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u212E\u2135-\u213F\u2145-\u214A\u214C\u214D\u214F-\u2189\u218C-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2B97\u2BB8-\u2BD1\u2BD3-\u2BEB\u2BF0-\u2BFF\u2E50\u2E51\u2E80-\u3000\u3003-\u3007\u3012\u3013\u3020-\u302F\u3031-\u3040\u3042\u3044\u3046\u3048\u304A-\u3062\u3064-\u3082\u3084\u3086\u3088-\u308D\u308F-\u3094\u3097-\u309A\u309D-\u309F\u30A2\u30A4\u30A6\u30A8\u30AA-\u30C2\u30C4-\u30E2\u30E4\u30E6\u30E8-\u30ED\u30EF-\u30F4\u30F7-\u30FB\u30FD-\u3126\u3128-\u31EF\u3200-\u32FE\u3358-\u337A\u3380-\uA4CF\uA960-\uA97F\uAC00-\uD7FF\uE000-\uFAFF\uFE10-\uFE1F\uFE30-\uFE48\uFE53-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF02-\uFF07\uFF0A\uFF0B\uFF0F-\uFF19\uFF20-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7\uFFF0-\uFFF8\uFFFC\uFFFD]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|[\uD80C\uD81C-\uD822\uD83D\uD840-\uD87E\uD880-\uD8BE][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC5F]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFFF]|\uD823[\uDC00-\uDD7F]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFF]|\uD833[\uDF00-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDDFF\uDE02-\uDFFF]|\uD83E[\uDD00-\uDEFF]|[\uD87F\uD8BF][\uDC00-\uDFFD])/,ks=function(){function t(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.__parent=t,this.__index=e,this.__x=r,this.__y=i,s?(this.__width=n,this.__height=a):(this.__width=a,this.__height=n),this.__content=o,this.__virtualDom={},this.__parentLineBox=null,this.__isVertical=s}return n(t,[{key:"render",value:function(t,e,r,i,a,n){var o=this.content,s=this.x,l=this.y,h=this.parent,_=this.width,u=this.height,f=this.isUpright,c=h.__domParent,v=mo.getBaseline(r),y=mo.getVerticalBaseline(r);f?s+=y:l+=v,s+=a,l+=n,f?(this.__endX=s,this.__endY=l+u):(this.__endX=s+_,this.__endY=l);var d=r[gs],p=r[bs],x=r[ms],g=r[ps],m=r[Ms],b=0,A=o.length;if(t===Ts){var M,w=c.matrixEvent,T=0,S=0;f&&(M=[{k:Es,v:{v:90,u:ws}}],T=.6*y,S=.2*y);var R="fill"===r[As];if(d)for(;b<A;b++){var k=o.charAt(b);if(f){if(Rs.test(k))e.setTransform(w[0],w[1],w[4],w[5],w[12],w[13]),R&&e.fillText(k,s-T,l-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(k,s-T,l-S),R||e.fillText(k,s-T,l-S);else{var C=fs.calMatrixWithOrigin(M,s,l,0,0);C=E.multiply(w,C),e.setTransform(C[0],C[1],C[4],C[5],C[12],C[13]),R&&e.fillText(k,s,l),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(k,s,l),R||e.fillText(k,s,l)}l+=e.measureText(k).width+d}else R&&e.fillText(k,s,l),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(k,s,l),R||e.fillText(k,s,l),s+=e.measureText(k).width+d}else if(f){for(var F=Rs.test(o.charAt(0)),I=0,O=0,L=o.length,B=1;B<L;B++){var D=Rs.test(o.charAt(B));if(D!==F){if(F){e.setTransform(w[0],w[1],w[4],w[5],w[12],w[13]);var P=o.slice(I,B);R&&e.fillText(P,s-T,l+O+v-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(P,s-T,l+O+v-S),R||e.fillText(P,s-T,l+O+v-S),O+=g}else{var N=fs.calMatrixWithOrigin(M,s,l+O,0,0);N=E.multiply(w,N),e.setTransform(N[0],N[1],N[4],N[5],N[12],N[13]);var z=o.slice(I,B);R&&e.fillText(z,s,l+O),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(z,s,l+O),R||e.fillText(z,s,l+O),O+=e.measureText(z).width}I=B,F=!F}else if(D){e.setTransform(w[0],w[1],w[4],w[5],w[12],w[13]);var H=o.slice(I,B);R&&e.fillText(H,s-T,l+O+v-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(H,s-T,l+O+v-S),R||e.fillText(H,s-T,l+O+v-S),O+=g,I=B}}if(I<L){var G=o.slice(I,L);if(F)e.setTransform(w[0],w[1],w[4],w[5],w[12],w[13]),R&&e.fillText(G,s-T,l+O+v-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(G,s-T,l+O+v-S),R||e.fillText(G,s-T,l+O+v-S);else{var W=fs.calMatrixWithOrigin(M,s,l+O,0,0);W=E.multiply(w,W),e.setTransform(W[0],W[1],W[4],W[5],W[12],W[13]),R&&e.fillText(G,s,l+O),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(G,s,l+O),R||e.fillText(G,s,l+O)}}}else R&&e.fillText(o,s,l),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(o,s,l),R||e.fillText(o,s,l)}else if(t===Ss){var U=i[vs];U.k&&(U=c.__gradient(t,e,c.__bx1,c.__by1,c.__bx2,c.__by2,U,a,n).v),f&&(s+=.5*m-y);var X=[["x",s],["y",l],["fill",U],["font-family",r[ds]],["font-weight",r[ys]],["font-style",r[xs]],["font-size",r[ps]+"px"]];if(p&&(x[3]>0||3===x.length||x.k)){var V=i[ms];V.k&&(V=c.__gradient(t,e,c.__bx1,c.__by1,c.__bx2,c.__by2,V,a,n).v),X.push(["stroke",V]),X.push(["stroke-width",r[bs]])}d&&X.push(["letter-spacing",d]),f&&X.push(["writing-mode","vertical-lr"]),this.__virtualDom={type:"item",tagName:"text",props:X,content:Y.encodeHtml(o)}}}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"offsetWidth",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"offsetHeight",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseline",get:function(){return this.parent.baseline}},{key:"verticalBaseline",get:function(){return this.parent.verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}}]),t}(),Cs=fe.STYLE_KEY,Fs=Cs.FONT_SIZE,Is=Cs.FONT_FAMILY,Os=Cs.FONT_WEIGHT,Ls=Cs.FONT_STYLE,Bs=Cs.COLOR,Ds=Cs.LINE_HEIGHT,Ps=Cs.ROTATE_Z,Ns=g.DEG,zs=x.CANVAS,Hs=x.SVG,Gs=x.WEBGL,Ws="…",Ys=function(t){function e(e,r,i,a,n,o){var s;return(s=t.call(this)||this).__x=s.__x1=e,s.__y=s.__y1=r,s.__width=i,s.__parent=s.__domParent=a,s.__text=n,a.__ellipsis=_(s),s.__parentLineBox=null,s.__baseline=mo.getBaseline(a.computedStyle),s.__isVertical=o,s}return s(e,t),n(e,[{key:"render",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.x,n=this.y,o=this.parent,s=this.isUpright,l=o.computedStyle,h=o.cacheStyle[Bs],_=mo.getBaseline(l),u=mo.getVerticalBaseline(l);if(s?a+=u:n+=_,a+=r,n+=i,t===zs||t===Gs){var f=mo.setFontStyle(l,this.__text.__fitFontSize);if(e.font!==f&&(e.font=f),e.fillStyle!==h&&(e.fillStyle=h),s){var c=o.matrixEvent,v=[{k:Ps,v:{v:90,u:Ns}}],y=fs.calMatrixWithOrigin(v,a,n,0,0);y=E.multiply(c,y),e.setTransform(y[0],y[1],y[4],y[5],y[12],y[13])}e.fillText(Ws,a,n)}else if(t===Hs){s&&(a+=.5*l[Ds]-u);var d=[["x",a],["y",n],["fill",h],["font-family",l[Is]],["font-weight",l[Os]],["font-style",l[Ls]],["font-size",l[Fs]+"px"]];s&&d.push(["writing-mode","vertical-lr"]);var p=this.__virtualDom={type:"text",children:[{type:"item",tagName:"text",props:d,content:Ws}]};o.virtualDom.children.push(p)}}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"isEllipsis",get:function(){return!0}}]),e}(p),Us=fe.STYLE_KEY,Xs=Us.TRANSLATE_X,Vs=Us.TRANSLATE_Y,Ks=Us.TRANSLATE_Z,js=Us.OPACITY,Zs=Us.FILTER,qs=Us.PERSPECTIVE,$s=Us.PERSPECTIVE_ORIGIN,Js=Us.Z_INDEX,Qs=Us.SCALE_X,tl=Us.SCALE_Y,el=Us.SCALE_Z,rl=Us.ROTATE_X,il=Us.ROTATE_Y,al=Us.ROTATE_Z,nl=Us.ROTATE_3D,ol=Us.SKEW_X,sl=Us.SKEW_Y,ll=Us.TRANSFORM,hl=Us.TRANSFORM_ORIGIN,_l=Sa.isIgnore,ul=Sa.isRepaint,fl=32768,cl={NONE:0,CACHE:1,TRANSLATE_X:2,TRANSLATE_Y:4,TRANSLATE_Z:8,TRANSLATE:14,ROTATE_Z:16,SCALE_X:32,SCALE_Y:64,SCALE_Z:128,SCALE:224,TRANSFORM:256,TRANSFORM_ALL:510,OPACITY:512,FILTER:1024,MIX_BLEND_MODE:2048,PERSPECTIVE:4096,MASK:8192,REPAINT:16384,REFLOW:fl,REBUILD:65536};var vl=Object.assign({contain:function(t,e){return(t&e)>0},exclude:function(t,e){return(t|e)===e},getLevel:function(t){return _l(t)?0:t===Js?1:t===Xs?2:t===Vs?4:t===Ks?8:t===al?16:t===Qs?32:t===tl?64:t===el?128:t===js?512:t===Zs?1024:t===qs||t===$s?4096:function(t){return t===rl||t===il||t===nl||t===ol||t===sl||t===ll||t===hl}(t)?256:ul(t)?16384:fl},isReflow:function(t){return t>=fl},isRepaint:function(t){return t<fl}},cl),yl=fe.STYLE_KEY,dl=yl.DISPLAY,pl=yl.POSITION,xl=yl.LINE_HEIGHT,gl=yl.FONT_SIZE,ml=yl.FONT_FAMILY,bl=yl.FONT_WEIGHT,Al=yl.COLOR,El=yl.VISIBILITY,Ml=yl.LETTER_SPACING,wl=yl.OVERFLOW,Tl=yl.WHITE_SPACE,Sl=yl.TEXT_OVERFLOW,Rl=yl.WIDTH,kl=yl.HEIGHT,Cl=yl.TEXT_STROKE_COLOR,Fl=yl.TEXT_STROKE_WIDTH,Il=yl.MARGIN_TOP,Ol=yl.MARGIN_BOTTOM,Ll=yl.MARGIN_LEFT,Bl=yl.MARGIN_RIGHT,Dl=yl.PADDING_TOP,Pl=yl.PADDING_BOTTOM,Nl=yl.PADDING_LEFT,zl=yl.PADDING_RIGHT,Hl=yl.BORDER_TOP_WIDTH,Gl=yl.BORDER_BOTTOM_WIDTH,Wl=yl.BORDER_LEFT_WIDTH,Yl=yl.BORDER_RIGHT_WIDTH,Ul=yl.FILTER,Xl=yl.FONT_SIZE_SHRINK,Vl=fe.ELLIPSIS,Kl=g.AUTO,jl=x.CANVAS,Zl=x.SVG,ql=x.WEBGL,$l=Y.isFunction;function Jl(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v){if(r>=i)return{hypotheticalNum:0,rw:0,newLine:!1};var y=Ql(t,e,r,i,a,n-o,s,h,_,u,c,v);if(y.newLine&&f>0&&f<_)for(;y.newLine&&_>f;)if(t.font=mo.setFontStyle(l,--_),o=e===jl||e===ql?t.measureText(Vl).width:lt.measureTextSync(Vl,l[ml],_,l[bl]),(y=Ql(t,e,r,i,a,n-o,s,h,_,u,c,v)).fitFontSize=_,y.ew=o,o){var d=Ql(t,e,r,i,a,n,s,h,_,u,c,v);d.newLine||(d.fitFontSize=_,y=d)}return y}function Ql(t,e,r,i,a,n,o,s,l,h,_,u){var f=r,c=i,v=0,y=!1;if(_&&[jl,ql].indexOf(e)>-1){for(var d=0;f<c;f++){var p=t.measureText(a.charAt(f)).width+_;if(d+p>n+1e-10){y=!0;break}d+=p}return{hypotheticalNum:f-r,rw:d,newLine:y||d>n+1e-10}}var x=Math.round(n/o);for(x<=0?x=1:x>i-r&&(x=i-r);f<c;){var g=void 0,m=a.slice(r,r+x);if(e===jl||e===ql?g=t.measureText(m).width:e===Zl&&(g=lt.measureTextSync(m,s,l,h,u)),_&&(g+=x*_),g===n){v=n,y=!0;break}if(g>n+1e-10){if(y=!0,1===x){v=g;break}if(f===c-1||f-r==x-1){x=f-r;break}c=x+r-1;var b=Math.round((g-n)/o);b<=0&&(b=1),(x-=b)<f-r&&(x=f-r)}else{if(v=g,x===i-r)break;f=x+r;var A=Math.round((n-g)/o);A<=0&&(A=1),(x+=A)>c-r&&(x=c-r)}}return{hypotheticalNum:x,rw:v,newLine:y}}function th(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}var eh=function(t){function e(e){var r;return(r=t.call(this)||this).__content=Y.isNil(e)?"":e.toString(),r.__textBoxes=[],r.__charWidth=0,r.__textWidth=0,r.__bp=null,r.__widthHash={},r.__limitCache=!1,r.__hasContent=!1,r.__fitFontSize=0,r}return s(e,t),n(e,[{key:"__layoutFlow",value:function(t){var e=this.__cache;e&&e.release();var r=t.x,i=t.y,a=t.w,n=t.h,o=t.lx,s=void 0===o?r:o,l=t.ly,h=void 0===l?i:l,_=t.lineBoxManager,u=t.endSpace,f=void 0===u?0:u,v=t.lineClamp,y=void 0===v?0:v,d=t.lineClampCount,p=void 0===d?0:d,x=t.isUpright,g=void 0!==x&&x;this.__x=this.__x1=r,this.__y=this.__y1=i;var m=this.__isDestroyed,b=this.content,A=this.computedStyle,E=this.textBoxes,M=this.root;if(E.splice(0),m||"none"===A[dl]||!b||y&&p>=y)return p;for(var w=0,T=b.length,S=0,R=A[xl],k=A[Ml],C=A[Tl],F=A[gl],I=A[bl],O=A[ml],L=g?n:a,B=g?i-h:r-s,D=this.domParent;"inline"===D.computedStyle[dl];)D=D.domParent;this.__bp=D;var P,N=D.computedStyle[Sl],z=M.renderMode;z!==jl&&z!==ql||((P=z===ql?lt.getFontCanvas().ctx:M.ctx).font=mo.setFontStyle(A,0));var H,G=.8*F+k,W=0;if("nowrap"===C){var Y,U=this.textWidth,X=L-f-B,V=D.computedStyle,K=V[pl],j=V[wl],Z=V[Xl],q=D.currentStyle[g?kl:Rl];if("hidden"===j&&(Y=("absolute"!==K||q.u!==Kl)&&U>L+1e-10-B-f),Y&&"ellipsis"===N){H=c(this.__lineBack(P,z,w,T,b,X,G,r,i,S,f,R,E,_,O,F,I,Z,k,g),1)[0],W++,g?r=H:i=H}else{if(Z>0&&Z<F){var $=F;for(this.__fitFontSize=0;$>Z&&U>X;)z===jl||z===ql?(P.font=mo.setFontStyle(A,--$),U=P.measureText(b).width+k*b.length):z===Zl&&(U=lt.measureTextSync(b,O,$,I)+k*b.length);this.__fitFontSize=$}var J=new ks(this,E.length,r,i,U,R,b,g);E.push(J),_.addItem(J,!1),g?r+=R:i+=R,Y&&W++}S=U}else{for(;w<T;){var Q=w?L:L-B;y&&W+p>=y-1&&(Q-=f);var tt=Jl(P,z,w,T,b,Q,0,G,A,O,F,I,0,k),et=tt.hypotheticalNum,rt=tt.rw,it=tt.newLine;if(y&&it&&W+p>=y-1&&w+et<T){var at=c(this.__lineBack(P,z,w,w+et,b,Q-f,G,W?s:r,i,S,f,R,E,_,O,F,I,0,k,g),2);H=at[0],S=at[1],W++,g?r=H:i=H;break}if(w+et===T&&f&&rt+f>Q+1e-10&&et>1){var nt=Jl(P,z,w,T,b,Q-f,0,G,A,O,F,I,0,k);if(et=nt.hypotheticalNum,rt=nt.rw,it=nt.newLine,y&&it&&W+p>=y-1){var ot=c(this.__lineBack(P,z,w,w+et,b,Q-f,G,W?s:r,i,S,f,R,E,_,O,F,I,0,k,g),2);H=ot[0],S=ot[1],W++,g?r=H:i=H;break}}S=Math.max(S,rt);var st=new ks(this,E.length,W&&!g?s:r,W&&g?h:i,rt,R,b.slice(w,w+et),g);E.push(st),_.addItem(st,it),g?r+=Math.max(R,_.verticalLineHeight):i+=Math.max(R,_.lineHeight),w+=et,it&&W++}W&&(g?this.__y=this.__y1=h:this.__x=this.__x1=s)}return g?(this.__width=r-t.x,this.__height=S,this.__verticalBaseline=mo.getVerticalBaseline(A)):(this.__width=S,this.__height=i-t.y,this.__baseline=mo.getBaseline(A)),p+W}},{key:"__layoutNone",value:function(){this.__width=this.__height=this.__baseline=this.__verticalBaseline=0,this.__textBoxes.splice(0)}},{key:"__lineBack",value:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y,d,p,x,g){var m,b=this.__bp,A=b.computedStyle;if(e===jl||e===ql){var E=mo.setFontStyle(A,0);t.font!==E&&(t.font=E),m=t.measureText(Vl).width}else m=lt.measureTextSync(Vl,A[ml],A[gl],A[bl]);if(e===jl||e===ql){var M=mo.setFontStyle(this.computedStyle,0);t.font!==M&&(t.font=M)}this.__fitFontSize=0;var w=Jl(t,e,r,i,a,n-_,m,o,A,v,y,d,p,x),T=w.hypotheticalNum,S=w.rw,R=w.newLine,k=w.fitFontSize,C=w.ew;if(k&&(this.__fitFontSize=k),C&&(m=C),R&&S+m>n+1e-10-_){var F=c.lineBox;if(!c.isNewLine&&F&&F.size)for(var I=F.list,O=I.length-1;O>=0;O--){var L=I[O];if(L instanceof ks){var B=L.content,D=L.width,P=L.height,N=L.parent;if(!O||n>=D+m+1e-10+_){var z=B.length,H=N.computedStyle,G=H[xl],W=H[Ml],Y=H[gl],U=H[bl],X=H[ml];e!==jl&&e!==ql||(t.font=mo.setFontStyle(N.computedStyle,0));var V=Jl(t,e,0,z,B,n+D-_,m,o,A,X,Y,U,0,W),K=V.hypotheticalNum,j=V.rw;K!==B.length&&(L.__content=B.slice(0,K),g?(l-=P-j,L.__height=j):(s-=D-j,L.__width=j)),F.__resetLb(A[xl],g?mo.getVerticalBaseline(A):mo.getBaseline(A));var Z=g?new Ys(s,l+j+_,m,b,this,g):new Ys(s+j+_,l,m,b,this,g);return c.addItem(Z,!0),g?s+=Math.max(G,c.verticalLineHeight):l+=Math.max(G,c.lineHeight),[l,h=Math.max(h,j+m)]}var q=I.pop();g?(n+=P,l-=P):(n+=D,s-=D);var $=q.parent.textBoxes,J=$.indexOf(q);J>-1&&$.splice(J,1);var Q=q.parent.parent,tt=I[I.length-1];for(tt instanceof ks&&(tt=tt.parent.parent);Q!==b&&Q!==tt;){var et=Q.contentBoxList||[],rt=et.indexOf(q);rt>-1&&et.splice(rt,1);var it=Q.computedStyle;if(g){var at=it[Il]+it[Ol]+it[Dl]+it[Pl]+it[Hl]+it[Gl];l-=at,n+=at}else{var nt=it[Ll]+it[Bl]+it[Nl]+it[zl]+it[Wl]+it[Yl];s-=nt,n+=nt}Q.__layoutNone(),Q=Q.domParent}var ot=tt.contentBoxList||[],st=ot.indexOf(q);st>-1&&ot.splice(st,1)}else{if(!O)break;var ht=I.pop();g?l-=ht.outerHeight:s-=ht.outerWidth,n+=g?ht.outerHeight:ht.outerWidth,ht.__layoutNone()}}}var _t=new ks(this,f.length,s,l,S,u,a.slice(r,r+T),g);if(f.push(_t),c.addItem(_t,!1),R){var ut=g?new Ys(s,l+S+_,m,b,this,g):new Ys(s+S+_,l,m,b,this,g);c.addItem(ut,!0)}return g?s+=Math.max(u,c.verticalLineHeight):l+=Math.max(u,c.lineHeight),[g?s:l,h=Math.max(h,S+R?m:0)]}},{key:"__backtrack",value:function(t,e,r,i,a,n,o,s,l,h,_){for(var u=r.list,f=u.length-1;f>=0;f--){var c=u[f];if(c instanceof ks){var v=c.content,y=c.width,d=c.height,p=c.parent;if(!f||a>=y+o+1e-10+n){var x=v.length,g=p.computedStyle,m=g[Ml],b=g[gl],A=g[bl],E=g[ml];h!==jl&&h!==ql||(l.font=mo.setFontStyle(p.computedStyle,0));var M=Jl(l,h,0,x,v,a-n+y,o,.8*b+m,s,E,b,A,0,m),w=M.hypotheticalNum,T=M.rw;w!==v.length&&(c.__content=v.slice(0,w),_?c.__height=T:c.__width=T),r.__resetLb(s[xl],_?mo.getVerticalBaseline(s):mo.getBaseline(s));var S=_?new Ys(c.x,c.y+T+n,o,t,this,_):new Ys(c.x+T+n,c.y,o,t,this,_);return void e.addItem(S,!0)}var R=u.pop();a+=_?d:y;var k=R.parent.textBoxes,C=k.indexOf(R);C>-1&&k.splice(C,1);var F=R.parent.parent,I=u[u.length-1];for(I instanceof ks&&(I=I.parent.parent);F!==t&&F!==I;){var O=F.contentBoxList||[],L=O.indexOf(R);L>-1&&O.splice(L,1);var B=F.computedStyle;if(_)a+=B[Il]+B[Ol]+B[Dl]+B[Pl]+B[Hl]+B[Gl];else a+=B[Ll]+B[Bl]+B[Nl]+B[zl]+B[Wl]+B[Yl];F.__layoutNone(),F=F.domParent}var D=I.contentBoxList||[],P=D.indexOf(R);P>-1&&D.splice(P,1)}else{if(!f)break;var N=u.pop();a+=_?N.outerHeight:N.outerWidth,N.__layoutNone()}}}},{key:"__offsetX",value:function(t,r){f(l(e.prototype),"__offsetX",this).call(this,t,r),r&&this.textBoxes.forEach((function(e){e.__offsetX(t)})),this.__x1+=t}},{key:"__offsetY",value:function(t,r){f(l(e.prototype),"__offsetY",this).call(this,t,r),r&&this.textBoxes.forEach((function(e){e.__offsetY(t)})),this.__y1+=t}},{key:"__tryLayInline",value:function(t){return t-this.firstCharWidth}},{key:"__inlineSize",value:function(t){var e,r;this.textBoxes.forEach((function(i,a){a?(e=Math.min(e,t?i.y:i.x),r=Math.max(r,(t?i.y:i.x)+i.width)):(e=t?i.y:i.x,r=(t?i.y:i.x)+i.width)})),t?(this.__y=this.__y1=e,this.__x=this.__x1,this.__height=r-e):(this.__x=this.__x1=e,this.__y=this.__y1,this.__width=r-e)}},{key:"render",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.__isDestroyed,n=this.computedStyle,o=this.textBoxes,s=this.cacheStyle;if(t===Zl&&(this.__virtualDom={type:"text",children:[]}),this.__bbox=null,this.__filterBbox=null,!a&&"none"!==n[dl]&&"hidden"!==n[El]&&o.length){if(this.__hasContent=!0,t!==ql){if(t===jl){var l=mo.setFontStyle(n,this.__fitFontSize);e.font!==l&&(e.font=l);var h=s[Al];if(h.k){var _=this.parent;h=_.__gradient(t,e,_.__bx1,_.__by1,_.__bx2,_.__by2,h,r,i).v}e.fillStyle!==h&&(e.fillStyle=h);var u=n[Fl];e.lineWidth!==u&&(e.lineWidth=u);var f=s[Cl];if(f.k){var c=this.parent;f=c.__gradient(t,e,c.__bx1,c.__by1,c.__bx2,c.__by2,f,r,i).v}e.strokeStyle!==f&&(e.strokeStyle=f)}o.forEach((function(a){a.render(t,e,n,s,r,i)})),t===Zl&&(this.__virtualDom.children=o.map((function(t){return t.virtualDom})))}}else this.__hasContent=!1}},{key:"__destroy",value:function(){if(!this.__isDestroyed){f(l(e.prototype),"__destroy",this).call(this);var t=this.__cache;t&&t.release()}}},{key:"getComputedStyle",value:function(t){return this.__domParent.getComputedStyle(t)}},{key:"updateContent",value:function(t,e){if(t===this.__content||this.__isDestroyed)return this.__content=t,void($l(e)&&e());this.__widthHash={},t=Y.isNil(t)?"":t.toString(),this.__content=t,this.__root.__addUpdate(this.__domParent,null,vl.REFLOW,!1,!1,!1,!1,!1,e)}},{key:"remove",value:function(t){var e,r=this.__root,i=this.isShadowRoot?this.hostRoot.__parent:this.__parent;if(i){var a=this.isShadowRoot?this.hostRoot:this;e=i.__children.indexOf(a),i.__children.splice(e,1),e=i.__zIndexChildren.indexOf(a),i.__zIndexChildren.splice(e,1);var n=this.__prev,o=this.__next;n&&(n.__next=o),o&&(o.__prev=n)}if(this.__isDestroyed)$l(t)&&t();else{if(i.__deleteStruct(this,e),"none"===this.computedStyle[dl])return this.__destroy(),void($l(t)&&t());r.__addUpdate(this,null,vl.REFLOW,!1,!0,!1,!1,!1,t)}}},{key:"__structure",value:function(t,r){var i=f(l(e.prototype),"__structure",this).call(this,t,r);return i.isText=!0,i}},{key:"content",get:function(){return this.__content},set:function(t){this.updateContent(t,null)}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[ml],s=r[gl],l=r[bl],h=r[Ml],_=th(o,s,l,h);t.hasOwnProperty(_)||(t[_]={});var u=t[_];if(!u.hasOwnProperty("charWidth")){var f=0;if(n===jl||n===ql){n===ql&&(a=lt.getFontCanvas().ctx),a.font=mo.setFontStyle(r,0);for(var c=0,v=e.length;c<v;c++)f=Math.max(f,a.measureText(e.charAt([c])).width)}else n===Zl&&(f=lt.measureTextListMax(e,o,s,l));u.charWidth=f+h}return u.charWidth}},{key:"firstCharWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[ml],s=r[gl],l=r[bl],h=r[Ml],_=th(o,s,l,h);t.hasOwnProperty(_)||(t[_]={});var u=t[_];return u.hasOwnProperty("firstCharWidth")||(n===jl||n===ql?(n===ql&&(a=lt.getFontCanvas().ctx),a.font=mo.setFontStyle(r,0),u.firstCharWidth=a.measureText(e.charAt(0)).width+h):n===Zl&&(u.firstCharWidth=lt.measureTextSync(e.charAt(0),o,s,l)+h)),u.firstCharWidth}},{key:"textWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[ml],s=r[gl],l=r[bl],h=r[Ml],_=th(o,s,l,h);t.hasOwnProperty(_)||(t[_]={});var u=t[_];return u.hasOwnProperty("textWidth")||(n===jl||n===ql?(n===ql&&(a=lt.getFontCanvas().ctx),a.font=mo.setFontStyle(r,0),u.textWidth=a.measureText(e).width+h*e.length):n===Zl&&(u.textWidth=lt.measureTextSync(e,o,s,l)+h*e.length)),u.textWidth}},{key:"clientWidth",get:function(){return this.__width||0}},{key:"clientHeight",get:function(){return this.__height||0}},{key:"offsetWidth",get:function(){return this.__width||0}},{key:"offsetHeight",get:function(){return this.__height||0}},{key:"outerWidth",get:function(){return this.__width||0}},{key:"outerHeight",get:function(){return this.__height||0}},{key:"root",get:function(){return this.__domParent.__root}},{key:"currentStyle",get:function(){return this.__domParent.__currentStyle}},{key:"__currentStyle",get:function(){return this.__domParent.__currentStyle}},{key:"style",get:function(){return this.__domParent.__style}},{key:"computedStyle",get:function(){return this.__domParent.__computedStyle}},{key:"__computedStyle",get:function(){return this.__domParent.__computedStyle}},{key:"cacheStyle",get:function(){return this.__domParent.__cacheStyle}},{key:"__cacheStyle",get:function(){return this.__domParent.__cacheStyle}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__x1,e=this.__y1,r=this.width,i=this.height,a=this.computedStyle[Fl];this.__bbox=[t-a,e-a,t+r+a,e+i+a]}return this.__bbox}},{key:"filterBbox",get:function(){if(!this.__filterBbox){var t=this.__bbox||this.bbox,e=this.computedStyle[Ul];this.__filterBbox=mo.spreadFilter(t,e)}return this.__filterBbox}},{key:"isShadowRoot",get:function(){return!this.__parent&&this.__host&&this.__host!==this.root}},{key:"matrix",get:function(){return this.__domParent.__matrix}},{key:"matrixEvent",get:function(){return this.__domParent.__matrixEvent}},{key:"perspectiveMatrix",get:function(){return this.__domParent.__perspectiveMatrix}},{key:"fitFontSize",get:function(){return this.__fitFontSize}}]),e}(p),rh=Y.isFunction,ih=function(){function t(){this.__eHash={}}return n(t,[{key:"on",value:function(t,e){if(rh(e)){var r=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.on(t[i],e);else{r.__eHash.hasOwnProperty(t)||(r.__eHash[t]=[]);for(var n=0,o=r.__eHash[t],s=o.length;n<s;n++)if(o[n]===e)return r;r.__eHash[t].push(e)}return r}}},{key:"once",value:function(t,e){if(rh(e)){var r=this;if(n.__karasEventCb=e,Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.once(t[i],e);else e&&r.on(t,n);return this}function n(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(r,a),r.off(t,n)}}},{key:"off",value:function(t,e){var r=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.off(t[i],e);else if(r.__eHash.hasOwnProperty(t))if(e){for(var n=0,o=r.__eHash[t],s=o.length;n<s;n++)if(o[n]===e||o[n].__karasEventCb===e){o.splice(n,1);break}}else delete r.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e.emit(t[n],i);else if(e.__eHash.hasOwnProperty(t)){var s=e.__eHash[t];if(s.length)for(var l=0,h=(s=s.slice()).length;l<h;l++){var _=s[l];rh(_)&&_.apply(e,i)}}return this}}],[{key:"mix",value:function(){for(var e=arguments.length-1;e>=0;e--){var r=e<0||arguments.length<=e?void 0:arguments[e],i=new t;r.__eHash={};for(var a=["on","once","off","emit"],n=a.length-1;n>=0;n--){var o=a[n];r[o]=i[o]}}}}]),t}();o(ih,"REFRESH","refresh"),o(ih,"PAUSE","pause"),o(ih,"PLAY","play"),o(ih,"FRAME","frame"),o(ih,"FINISH","finish"),o(ih,"CANCEL","cancel"),o(ih,"BEGIN","begin"),o(ih,"END","end"),o(ih,"FREEZE","freeze"),o(ih,"UN_FREEZE","unFreeze");var ah=Y.isNil,nh=Y.isFunction,oh=Y.extend,sh={},lh=function(t){function e(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=t.call(this)||this).__tagName=r.tagName||/(?:function|class)\s+([\w$]+)/.exec(e.constructor.toString())[1],Array.isArray(r)?e.props=Y.arr2hash(r):e.props=r,e.__parent=null,e.__host=null,e.__ref={},e.__isMounted=!1,e.__taskList=[],e}return s(e,t),n(e,[{key:"__init",value:function(){var t=this;this.__ref={};var e=this.__shadowRoot;if(e instanceof eh);else if(e instanceof p){var r=mo.normalize(this.props.style),i=Object.keys(r);oh(e.style,r,i),oh(e.currentStyle,r,i),Object.keys(this.props).forEach((function(r){var i=t.props[r];/^on[a-zA-Z]/.test(r)&&(r=r.slice(2).toLowerCase(),e.listener[r]=i)}))}if(Object.keys(this.props).forEach((function(e){var r=t.props[e];/^on-[a-zA-Z\d_$]/.test(e)&&(e=e.slice(3),t.on(e,r))})),nh(this.componentDidMount)){var a=this.__cb=function(){t.__root.__isDestroyed||t.__isDestroyed||(t.componentDidMount(),t.__root.off(ih.REFRESH,a),t.__cb=null)};this.__root.once(ih.REFRESH,a)}}},{key:"render",value:function(){lt.warn("Component should implement render()")}},{key:"__destroy",value:function(){if(!this.__isDestroyed){this.__isDestroyed=!0,this.__isMounted=!1;var t=this.props.ref;ah(t)||nh(t)||delete this.__root.__ref[t],this.__cb&&(this.__root.off(ih.REFRESH,this.__cb),this.__cb=null),nh(this.componentWillUnmount)&&this.componentWillUnmount(),this.__shadow&&this.__shadow.__destroy(),this.__host=this.__hostRoot=this.__shadow=this.__shadowRoot=this.__prev=this.__next=this.__root=this.__parent=this.__domParent=null}}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof eh))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return sh}},{key:"getRegister",value:function(t){if(t&&!Y.isString(t)&&t.prototype&&t.prototype instanceof e)return t;if(!t||!Y.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!sh.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return sh[t]}},{key:"register",value:function(t,r){if(!(t&&Y.isString(t)&&/^[A-Z]/.test(t)&&r.prototype&&r.prototype instanceof e))throw new Error("Invalid param: Component register");if(e.hasRegister(t))throw new Error("Component has already register: ".concat(t));sh[t]=r}},{key:"hasRegister",value:function(t){return t&&sh.hasOwnProperty(t)}},{key:"delRegister",value:function(t){e.hasRegister(t)&&delete sh[t]}}]),e}(ih);Object.keys(Sa.GEOM).concat(["x","y","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","children","animationList","currentStyle","computedStyle","cacheStyle","__currentStyle","__computedStyle","__cacheStyle","currentProps","__currentProps","cacheProps","__cacheProps","baseline","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","__struct","bbox","contentBoxList","listener","matrix","matrixEvent"]).forEach((function(t){Object.defineProperty(lh.prototype,t,{get:function(){var e=this.shadowRoot;if(e)return e[t]}})})),["__layout","__layoutFlow","__layoutStyle","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__computeReflow","__mp","animate","removeAnimate","clearAnimate","frameAnimate","updateStyle","getBoundingClientRect","getComputedStyle","clearCache","__structure","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove","addEventListener","removeEventListener"].forEach((function(t){lh.prototype[t]=function(){var e=this.shadowRoot;if(e&&nh(e[t]))return e[t].apply(e,arguments)}}));var hh=fe.STYLE_KEY,_h=hh.MARGIN_TOP,uh=hh.MARGIN_LEFT,fh=hh.MARGIN_RIGHT,ch=hh.MARGIN_BOTTOM,vh=hh.PADDING_TOP,yh=hh.PADDING_LEFT,dh=hh.PADDING_RIGHT,ph=hh.PADDING_BOTTOM,xh=hh.BORDER_TOP_WIDTH,gh=hh.BORDER_LEFT_WIDTH,mh=hh.BORDER_RIGHT_WIDTH,bh=hh.BORDER_BOTTOM_WIDTH;var Ah={getInlineBox:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y,d,p,x,g){var m,b,A,E,M,w,T,S,R,k=0,C=0,F=e?y+g:f+d,I=e?c+p:v+x;"paddingBox"===u?(k=e?y:f,C=e?c:v):"borderBox"===u&&(k=F,C=I),m=e?n.verticalBaseline-o:n.baseline-o,e?(b=n.x+m-k+l,A=i.y,w=n.x+m-F+l):(b=i.x,A=n.y+n.oy+m-k+l,T=n.y+n.oy+m-F+l);for(var O=i instanceof ks?i.parent.domParent:i.domParent;O!==t;){if(i===O.contentBoxList[0])if(e){var L=O.computedStyle;A-=L[_h]+L[vh]+L[xh]}else{var B=O.computedStyle;b-=B[uh]+B[yh]+B[gh]}O=O.domParent}for(e?(T=A,h&&(T-=f+d,"paddingBox"===u?A-=f:"borderBox"===u&&(A-=f+d)),E=n.x+m+s+C-l,S=n.x+m+s+I-l,M=a.y+a.outerHeight):(w=b,h&&(w-=y+g,"paddingBox"===u?b-=y:"borderBox"===u&&(b-=y+g)),E=a.x+a.outerWidth,M=n.y+n.oy+m+s+C-l,R=n.y+n.oy+m+s+I-l),O=a instanceof ks?a.parent.domParent:a.domParent;O!==t;){var D=O.contentBoxList;if(a===D[D.length-1])if(e){var P=O.computedStyle;M+=P[ch]+P[ph]+P[bh]}else{var N=O.computedStyle;E+=N[fh]+N[dh]+N[mh]}O=O.domParent}return e?(R=M,_&&(R+=v+x,"paddingBox"===u?M+=v:"borderBox"===u&&(M+=v+x))):(S=E,_&&(S+=c+p,"paddingBox"===u?E+=c:"borderBox"===u&&(E+=c+p))),[b,A,E,M,w,T,S,R]},getInlineWidth:function(t,e,r){var i=0,a=e.length;e[a-1]instanceof Ys&&a--;for(var n=0;n<a;n++){var o=e[n];i+=r?o.height:o.width;for(var s=o instanceof ks?o.parent.domParent:o.domParent;s!==t;){var l=s.contentBoxList;if(o===l[0])if(r){var h=s.computedStyle;i+=h[_h]+h[vh]+h[xh]}else{var _=s.computedStyle;i+=_[uh]+_[yh]+_[gh]}if(o===l[l.length-1])if(r){var u=s.computedStyle;i+=u[ch]+u[ph]+u[bh]}else{var f=s.computedStyle;i+=f[fh]+f[dh]+f[mh]}s=s.domParent}}return i}},Eh=fe.STYLE_KEY,Mh=Eh.SCALE_X,wh=Eh.SCALE_Y,Th=g.NUMBER;var Sh={matrixResize:function(t,e,r,i,a,n,o,s){if(t!==r||e!==i){var l=[{k:Mh,v:{v:r/t,u:Th}},{k:wh,v:{v:i/e,u:Th}}];return fs.calMatrixWithOrigin(l,a,n,o,s)}}},Rh=fe.STYLE_KEY,kh=Rh.BACKGROUND_POSITION_X,Ch=Rh.BACKGROUND_POSITION_Y,Fh=Y.clone,Ih=Y.joinArr,Oh=Fe.canvasPolygon,Lh=Fe.svgPolygon;function Bh(t,e,r,i,a,n,o,s,l,h,_,u,f){var c,v,y,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:"fill",p=arguments.length>14&&void 0!==arguments[14]&&arguments[14],g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,m=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(c=i[1],v=i[2],y=i[3],i=i[0]),(a=a||dr.calRadius(n,o,s,l,h,_,u,f))||(a=[[n,o],[n+s,o],[n+s,o+l],[n,o+l],[n,o]]),c){c=fs.calMatrixByOrigin(c,v,y);var b=E.inverse(c);a=a.map((function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var a=E.calPoint({x:t[r],y:t[r+1]},b);e.push(a.x),e.push(a.y)}return e}))}if(e===x.CANVAS){if(c){r.save();var A=t.matrixEvent;c=E.multiply(A,c),r.setTransform(c[0],c[1],c[4],c[5],c[12],c[13])}r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),Oh(r,a,g,m),r[d](),r.closePath(),c&&r.restore()}else if(e===x.SVG){var M=Lh(a);if(p){var w={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",M],["fill",i]]}]};return t.__cacheDefs.push(w),r.add(w)}if(t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",M],["fill",i]]}),c){var T=t.virtualDom.bb;T[T.length-1].props.push(["transform","matrix(".concat(Ih(E.m2m6(c),","),")")])}}}var Dh,Ph={renderBgc:Bh,renderImage:function(t,e,r,i,a,n,o,s,l,h,_,u,f,v,y,d,p){var g=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,m=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0,b=i.source;if(b){var A=(o+=g)-(a+=g),M=(s+=m)-(n+=m),w=i.width,T=i.height,S=y[v]||[],R=c(S,2),k=R[0],C=R[1];-1===k&&-1===C?(k=w,C=T):-2===k?w>A&&T>M?(k=w/A)>=(C=T/M)?C=(k=A)*T/w:k=(C=M)*w/T:w>A?C=(k=A)*T/w:T>M?k=(C=M)*w/T:(k=w/A)>=(C=T/M)?C=(k=A)*T/w:k=(C=M)*w/T:-3===k?w>A&&T>M?(k=w/A)<=(C=T/M)?C=(k=A)*T/w:k=(C=M)*w/T:w>A?k=(C=M)*w/T:T>M||(k=w/A)<=(C=T/M)?C=(k=A)*T/w:k=(C=M)*w/T:-1===k?k=C*w/T:-1===C&&(C=k*T/w);var F=f[kh][v]||0;/%/.test(F)&&(F=(A-k)*parseFloat(F)*.01),F+=a;var I=f[Ch][v]||0;/%/.test(I)&&(I=(M-C)*parseFloat(I)*.01),I+=n;var O=F<a||I<n||F+k>a+A||I+C>n+M,L=0,B=0,D=0,P=0;if(["repeatX","repeat"].indexOf(d[v])>-1){var N=F-a;N>0&&(L=Math.ceil(N/k)),(N=a+A-F-k)>0&&(B=Math.ceil(N/k))}if(["repeatY","repeat"].indexOf(d[v])>-1){var z=I-n;z>0&&(D=Math.ceil(z/C)),(z=n+M-I-C)>0&&(P=Math.ceil(z/C))}var H=[];if(L>0)for(var G=0;G<L;G++){var W=F-(G+1)*k;H.push([W,I]),!O&&0===G&&W<a&&(O=!0)}if(B>0)for(var Y=0;Y<B;Y++){var U=F+(Y+1)*k;H.push([U,I]),!O&&Y===B-1&&U+k>a+A&&(O=!0)}if(D>0)for(var X=0;X<D;X++){var V=I-(X+1)*C;H.push([F,V]),!O&&0===X&&V<n&&(O=!0)}if(P>0)for(var K=0;K<P;K++){var j=I+(K+1)*C;H.push([F,j]),!O&&K===P-1&&j+k>n+M&&(O=!0)}if(L>0&&D>0)for(var Z=0;Z<L;Z++)for(var q=0;q<D;q++)H.push([F-(Z+1)*k,I-(q+1)*C]);if(B>0&&D>0)for(var $=0;$<B;$++)for(var J=0;J<D;J++)H.push([F+($+1)*k,I-(J+1)*C]);if(L>0&&P>0)for(var Q=0;Q<L;Q++)for(var tt=0;tt<P;tt++)H.push([F-(Q+1)*k,I+(tt+1)*C]);if(B>0&&P>0)for(var et=0;et<B;et++)for(var rt=0;rt<P;rt++)H.push([F+(et+1)*k,I+(rt+1)*C]);if(e===x.CANVAS)O&&(r.save(),Bh(this,e,r,"#FFF",null,a,n,A,M,l,h,_,u,"clip")),r.drawImage(b,F,I,k,C),H.forEach((function(t){r.drawImage(b,t[0],t[1],k,C)})),O&&r.restore();else if(e===x.SVG){var it,at=Sh.matrixResize(w,T,k,C,F,I,A,M),nt=[["xlink:href",i.url],["x",F],["y",I],["width",w],["height",T]];if(at&&!E.isE(at)&&(it=!0,nt.push(["transform","matrix("+Ih(E.m2m6(at),",")+")"])),O){var ot={x:a,y:n},st={x:o,y:s};if(it){var lt=E.inverse(at);ot=E.calPoint(ot,lt),st=E.calPoint(st,lt)}var ht={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(ot.x,",").concat(ot.y,"L").concat(st.x,",").concat(ot.y,"L").concat(st.x,",").concat(st.y,"L").concat(ot.x,",").concat(st.y,"L").concat(ot.x,",").concat(ot.y)],["fill","#FFF"]]}]},_t=r.add(ht);t.__cacheDefs.push(ht),nt.push(["clip-path","url(#"+_t+")"])}if(p){var ut={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:nt}]};return t.__cacheDefs.push(ut),H.forEach((function(t){var e=Fh(nt);if(it){var r=Sh.matrixResize(w,T,k,C,t[0],t[1],A,M);r&&!E.isE(r)&&(e[5][1]="matrix("+Ih(E.m2m6(r),",")+")")}e[1][1]=t[0],e[2][1]=t[1],ut.children.push({type:"img",tagName:"image",props:e})})),r.add(ut)}t.virtualDom.bb.push({type:"img",tagName:"image",props:nt}),H.forEach((function(e){var r=Fh(nt);if(it){var i=Sh.matrixResize(w,T,k,C,e[0],e[1],A,M);i&&!E.isE(i)&&(r[5][1]="matrix("+Ih(E.m2m6(i),",")+")")}r[1][1]=e[0],r[2][1]=e[1],t.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}},Nh=Y.isFunction;var zh=function(){function t(){this.__rootTask=[],this.__roots=[],this.__task=[],this.__now=lt.now()}return n(t,[{key:"__init",value:function(){var t=this,e=t.task;t.rootTask,lt.cancelAnimationFrame(t.id);var r=t.__now=lt.now();!function i(){lt.cancelAnimationFrame(t.id),t.id=lt.requestAnimationFrame((function(){var a=t.__now=lt.now();if(!Dh&&e.length){var n=a-r;n=Math.max(n,0),r=a;var o=e.slice(0),s=o.length;!function(t,e,r){for(var i=0;i<e;i++){var a=t[i];a.__before&&a.__before(r)}}(o,s,n),function(t,e,r){for(var i=0;i<e;i++){var a=t[i];a.__after&&a.__after(r)}}(o,s,n),e.length&&i()}}))}()}},{key:"onFrame",value:function(t){if(t){var e=this.task;e.length||this.__init(),Nh(t)&&(t={__after:t,__karasFrameCb:t}),e.push(t)}}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var a=e[r];if(a===t||a.__karasFrameCb===t){e.splice(r,1);break}}e.length||(lt.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(t){var e=this;if(t){var r=Nh(t)?{__after:function(i){t(i),e.offFrame(r)}}:{__before:t.__before,__after:function(i){t.__after&&t.__after(i),e.offFrame(r)}};r.__karasFrameCb=t,this.onFrame(r)}}},{key:"pause",value:function(){Dh=!0}},{key:"resume",value:function(){Dh&&(this.__init(),Dh=!1)}},{key:"addRoot",value:function(t){this.__roots.push(t)}},{key:"removeRoot",value:function(t){var e=this.__roots.indexOf(t);e>-1&&this.__roots.splice(e,1)}},{key:"addRootTask",value:function(t){this.__rootTask.push(t)}},{key:"task",get:function(){return this.__task}},{key:"roots",get:function(){return this.__roots}},{key:"rootTask",get:function(){return this.__rootTask}}]),t}(),Hh=new zh,Gh=.1,Wh="function"==typeof Float32Array;function Yh(t,e){return 1-3*e+3*t}function Uh(t,e){return 3*e-6*t}function Xh(t){return 3*t}function Vh(t,e,r){return((Yh(e,r)*t+Uh(e,r))*t+Xh(e))*t}function Kh(t,e,r){return 3*Yh(e,r)*t*t+2*Uh(e,r)*t+Xh(e)}function jh(t){return t}function Zh(t,e,r,i){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&r===i)return jh;for(var a=Wh?new Float32Array(11):new Array(11),n=0;n<11;++n)a[n]=Vh(n*Gh,t,r);function o(e){for(var i=0,n=1;10!==n&&a[n]<=e;++n)i+=Gh;--n;var o=i+(e-a[n])/(a[n+1]-a[n])*Gh,s=Kh(o,t,r);return s>=.001?function(t,e,r,i){for(var a=0;a<4;++a){var n=Kh(e,r,i);if(0===n)return e;e-=(Vh(e,r,i)-t)/n}return e}(e,o,t,r):0===s?o:function(t,e,r,i,a){var n,o,s=0;do{(n=Vh(o=e+(r-e)/2,i,a)-t)>0?r=o:e=o}while(Math.abs(n)>1e-7&&++s<10);return o}(e,i,i+Gh,t,r)}return function(t){return 0===t||1===t?t:Vh(o(t),e,i)}}var qh={linear:Zh(1,1,0,0),easeIn:Zh(.42,0,1,1),easeOut:Zh(0,0,.58,1),ease:Zh(.25,.1,.25,1),easeInOut:Zh(.42,0,.58,1),cubicBezier:Zh,getEasing:function(t,e,r,i){return 4===arguments.length?Zh(t,e,r,i):Array.isArray(t)&&4===t.length?Zh(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?(t=t.match(/[\d.]+/g),a=Zh(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]))):"getEasing"!==t&&"cubicBezier"!==t&&(a=this[t]),a):void 0;var a}};qh["ease-in"]=qh.easeIn,qh["ease-out"]=qh.easeOut,qh["ease-in-out"]=qh.easeInOut;var $h,Jh=Y.isFunction,Qh=Y.isNil,t_=function(){function t(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return n(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.__list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){var e=this.__list.indexOf(t);e>-1&&this.__list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(t,e){this.__list.forEach((function(r){r[t].apply(r,e)}))}},{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__records,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.__list;if(e.length&&e.splice(0).forEach((function(e){var i=e.target,a=e.animate,n=e.areaStart,o=e.areaDuration;!i.isDestroyed&&a&&(Array.isArray(a)||(a=[a]),a.forEach((function(e){var a=e.value,s=e.options;!n&&Qh(o)||((s=Object.assign({},s)).areaStart=n,s.areaDuration=o),s.autoPlay=!1;var l=i.animate(a,s);l.__isControlled=!0,t.add(l,r)})))})),e===this.__records2){var i=this.__onList,a=this.list2;a.length&&i.length&&a.forEach((function(e){i.forEach((function(r){var i=function(){var e=Hh.__now;e!==t.__lastTime[r[0]]&&(t.__lastTime[r[0]]=e,r[1]&&r[1]())};i.__karasEventCb=r[1],e.off(r[0],r[1]),e.on(r[0],i)}))}))}}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("play",[t&&function(r){e&&(e=!1,Jh(t)&&t(r))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(t){var e=!0;this.__action("resume",[t&&function(r){e&&(e=!1,Jh(t)&&t(r))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("cancel",[t&&function(r){e&&(e=!1,Jh(t)&&t(r))}])}},{key:"finish",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("finish",[t&&function(r){e&&(e=!1,Jh(t)&&t(r))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Jh(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Jh(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Jh(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Jh(r)&&r(t))}])}},{key:"on",value:function(t,e){if(Jh(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(t,e){var r=this;this.__list.forEach((function(i){var a=function(){var i=Hh.__now;i!==r.__lastTime[t]&&(r.__lastTime[t]=i,e&&e())};a.__karasEventCb=e,i.on(t,a)}))}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else this.list.forEach((function(r){r.off(t,e)}))}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(t,e){this.__list.forEach((function(r){r[t]=e})),this.__list2.forEach((function(r){r[t]=e}))}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),e_=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});e_.decode();var r_=new Uint8Array;function i_(t,e){return e_.decode((0===r_.byteLength&&(r_=new Uint8Array($h.memory.buffer)),r_).subarray(t,t+e))}var a_=function(){function t(){}return n(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();$h.__wbg_animation_free(t)}},{key:"duration",get:function(){return $h.__wbg_get_animation_duration(this.ptr)},set:function(t){$h.__wbg_set_animation_duration(this.ptr,t)}},{key:"fps",get:function(){return $h.__wbg_get_animation_fps(this.ptr)>>>0},set:function(t){$h.__wbg_set_animation_fps(this.ptr,t)}},{key:"delay",get:function(){return $h.__wbg_get_animation_delay(this.ptr)},set:function(t){$h.__wbg_set_animation_delay(this.ptr,t)}},{key:"end_delay",get:function(){return $h.__wbg_get_animation_end_delay(this.ptr)},set:function(t){$h.__wbg_set_animation_end_delay(this.ptr,t)}},{key:"fill",get:function(){return $h.__wbg_get_animation_fill(this.ptr)},set:function(t){$h.__wbg_set_animation_fill(this.ptr,t)}},{key:"playback_rate",get:function(){return $h.__wbg_get_animation_playback_rate(this.ptr)},set:function(t){$h.__wbg_set_animation_playback_rate(this.ptr,t)}},{key:"iterations",get:function(){return $h.__wbg_get_animation_iterations(this.ptr)>>>0},set:function(t){$h.__wbg_set_animation_iterations(this.ptr,t)}},{key:"area_start",get:function(){return $h.__wbg_get_animation_area_start(this.ptr)},set:function(t){$h.__wbg_set_animation_area_start(this.ptr,t)}},{key:"area_duration",get:function(){return $h.__wbg_get_animation_area_duration(this.ptr)},set:function(t){$h.__wbg_set_animation_area_duration(this.ptr,t)}},{key:"easing",get:function(){return $h.__wbg_get_animation_easing(this.ptr)},set:function(t){$h.__wbg_set_animation_easing(this.ptr,t)}},{key:"current_time",get:function(){return $h.__wbg_get_animation_current_time(this.ptr)},set:function(t){$h.__wbg_set_animation_current_time(this.ptr,t)}},{key:"play_count",get:function(){return $h.__wbg_get_animation_play_count(this.ptr)>>>0},set:function(t){$h.__wbg_set_animation_play_count(this.ptr,t)}},{key:"play_state",get:function(){return $h.__wbg_get_animation_play_state(this.ptr)},set:function(t){$h.__wbg_set_animation_play_state(this.ptr,t)}},{key:"first_play",get:function(){return 0!==$h.__wbg_get_animation_first_play(this.ptr)},set:function(t){$h.__wbg_set_animation_first_play(this.ptr,t)}},{key:"index",get:function(){return $h.__wbg_get_animation_index(this.ptr)},set:function(t){$h.__wbg_set_animation_index(this.ptr,t)}},{key:"percent",get:function(){return $h.__wbg_get_animation_percent(this.ptr)},set:function(t){$h.__wbg_set_animation_percent(this.ptr,t)}},{key:"set_bezier",value:function(t,e,r,i){$h.animation_set_bezier(this.ptr,t,e,r,i)}},{key:"add_frame",value:function(t,e,r,i,a,n,o){$h.animation_add_frame(this.ptr,t,e,r,i,a,n,o)}},{key:"add_item",value:function(t,e,r,i,a){$h.animation_add_item(this.ptr,t,e,r,i,a)}},{key:"init_current_frames",value:function(t){$h.animation_init_current_frames(this.ptr,t)}},{key:"cal_current",value:function(t,e){return 0!==$h.animation_cal_current(this.ptr,t,e)}},{key:"on_frame",value:function(t){return 0!==$h.animation_on_frame(this.ptr,t)}},{key:"goto_stop",value:function(t,e){return 0!==$h.animation_goto_stop(this.ptr,t,e)}}],[{key:"__wrap",value:function(e){var r=Object.create(t.prototype);return r.ptr=e,r}},{key:"new",value:function(e,r,i,a,n,o,s,l,h,_,u){var f=$h.animation_new(e,r,i,a,n,o,s,l,h,_,u);return t.__wrap(f)}}]),t}(),n_=function(){function t(){}return n(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();$h.__wbg_node_free(t)}},{key:"is_text",get:function(){return 0!==$h.__wbg_get_node_is_text(this.ptr)},set:function(t){$h.__wbg_set_node_is_text(this.ptr,t)}},{key:"x",get:function(){return $h.__wbg_get_node_x(this.ptr)},set:function(t){$h.__wbg_set_node_x(this.ptr,t)}},{key:"y",get:function(){return $h.__wbg_get_node_y(this.ptr)},set:function(t){$h.__wbg_set_node_y(this.ptr,t)}},{key:"offset_width",get:function(){return $h.__wbg_get_node_offset_width(this.ptr)},set:function(t){$h.__wbg_set_node_offset_width(this.ptr,t)}},{key:"offset_height",get:function(){return $h.__wbg_get_node_offset_height(this.ptr)},set:function(t){$h.__wbg_set_node_offset_height(this.ptr,t)}},{key:"xa",get:function(){return $h.__wbg_get_node_xa(this.ptr)},set:function(t){$h.__wbg_set_node_xa(this.ptr,t)}},{key:"ya",get:function(){return $h.__wbg_get_node_ya(this.ptr)},set:function(t){$h.__wbg_set_node_ya(this.ptr,t)}},{key:"xb",get:function(){return $h.__wbg_get_node_xb(this.ptr)},set:function(t){$h.__wbg_set_node_xb(this.ptr,t)}},{key:"yb",get:function(){return $h.__wbg_get_node_yb(this.ptr)},set:function(t){$h.__wbg_set_node_yb(this.ptr,t)}},{key:"lv",get:function(){return $h.__wbg_get_node_lv(this.ptr)>>>0},set:function(t){$h.__wbg_set_node_lv(this.ptr,t)}},{key:"refresh_level",get:function(){return $h.__wbg_get_node_refresh_level(this.ptr)>>>0},set:function(t){$h.__wbg_set_node_refresh_level(this.ptr,t)}},{key:"total",get:function(){return $h.__wbg_get_node_total(this.ptr)>>>0},set:function(t){$h.__wbg_set_node_total(this.ptr,t)}},{key:"opacity",get:function(){return $h.__wbg_get_node_opacity(this.ptr)},set:function(t){$h.__wbg_set_node_opacity(this.ptr,t)}},{key:"set_root",value:function(t){$h.node_set_root(this.ptr,t)}},{key:"add_ani",value:function(t){$h.node_add_ani(this.ptr,t)}},{key:"remove_ani",value:function(t){$h.node_remove_ani(this.ptr,t)}},{key:"clear",value:function(){$h.node_clear(this.ptr)}},{key:"set_style",value:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y,d,p,x,g,m,b,A,E,M,w,T){$h.node_set_style(this.ptr,t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y,d,p,x,g,m,b,A,E,M,w,T)}},{key:"set_bbox",value:function(t,e,r,i){$h.node_set_bbox(this.ptr,t,e,r,i)}},{key:"set_transform",value:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y){$h.node_set_transform(this.ptr,t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y)}},{key:"set_matrix",value:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y){$h.node_set_matrix(this.ptr,t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y)}},{key:"m_ptr",value:function(){return $h.node_m_ptr(this.ptr)}},{key:"me_ptr",value:function(){return $h.node_me_ptr(this.ptr)}},{key:"get_op",value:function(){return $h.node_get_op(this.ptr)}},{key:"get_rl",value:function(){return $h.__wbg_get_node_refresh_level(this.ptr)>>>0}},{key:"on_frame",value:function(t){return $h.node_on_frame(this.ptr,t)>>>0}}],[{key:"__wrap",value:function(e){var r=Object.create(t.prototype);return r.ptr=e,r}},{key:"new",value:function(e){var r=$h.node_new(e);return t.__wrap(r)}}]),t}(),o_=function(){function t(){}return n(t,[{key:"__destroy_into_raw",value:function(){var t=this.ptr;return this.ptr=0,t}},{key:"free",value:function(){var t=this.__destroy_into_raw();$h.__wbg_root_free(t)}},{key:"mode",get:function(){return $h.__wbg_get_root_mode(this.ptr)},set:function(t){$h.__wbg_set_root_mode(this.ptr,t)}},{key:"width",get:function(){return $h.__wbg_get_root_width(this.ptr)},set:function(t){$h.__wbg_set_root_width(this.ptr,t)}},{key:"height",get:function(){return $h.__wbg_get_root_height(this.ptr)},set:function(t){$h.__wbg_set_root_height(this.ptr,t)}},{key:"font_size",get:function(){return $h.__wbg_get_root_font_size(this.ptr)},set:function(t){$h.__wbg_set_root_font_size(this.ptr,t)}},{key:"add_node",value:function(t){$h.root_add_node(this.ptr,t)}},{key:"remove_node",value:function(t){$h.root_remove_node(this.ptr,t)}},{key:"set_node",value:function(t,e){$h.root_set_node(this.ptr,t,e)}},{key:"insert_node",value:function(t,e){$h.root_insert_node(this.ptr,t,e)}},{key:"clear",value:function(){$h.root_clear(this.ptr)}},{key:"size",value:function(){return $h.root_size(this.ptr)>>>0}},{key:"resize",value:function(t,e){$h.root_resize(this.ptr,t,e)}},{key:"on_frame",value:function(t){return $h.root_on_frame(this.ptr,t)>>>0}},{key:"refresh",value:function(){$h.root_refresh(this.ptr)}},{key:"rl_ptr",value:function(){return $h.root_rl_ptr(this.ptr)}},{key:"me_ptr",value:function(){return $h.root_me_ptr(this.ptr)}},{key:"op_ptr",value:function(){return $h.root_op_ptr(this.ptr)}},{key:"vt_ptr",value:function(){return $h.root_vt_ptr(this.ptr)}}],[{key:"__wrap",value:function(e){var r=Object.create(t.prototype);return r.ptr=e,r}},{key:"new",value:function(){var e=$h.root_new();return t.__wrap(e)}}]),t}();function s_(t,e){return l_.apply(this,arguments)}function l_(){return(l_=i(t().mark((function e(r,i){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,WebAssembly.instantiateStreaming(r,i);case 3:return t.abrupt("return",t.sent);case 6:t.prev=6,t.t0=t.catch(0),"application/wasm"!==r.headers.get("Content-Type")?lt.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t.t0):lt.error(t.t0.toString());case 9:case"end":return t.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var h_,__={init:function(r,a){return i(t().mark((function i(){var n,o,s,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===("undefined"==typeof fetch?"undefined":e(fetch))||!Y.isFunction(fetch)){t.next=13;break}return n="undefined"!=typeof location?new URL(r,location.href):new URL(r),o=fetch(n),s={wbg:{__wbg_log_7bf8a72f8beaaabe:function(t,e){lt.log(i_(t,e))},__wbindgen_throw:function(t,e){throw new Error(i_(t,e))}}},t.t0=s_,t.next=7,o;case 7:return t.t1=t.sent,t.t2=s,t.next=11,(0,t.t0)(t.t1,t.t2);case 11:(l=t.sent)&&($h=l.instance.exports);case 13:return a&&a($h),t.abrupt("return",$h);case 15:case"end":return t.stop()}}),i)})))()},get wasm(){return $h},Node:n_,Root:o_,Animation:a_},u_=fe.STYLE_KEY,f_=u_.FILTER,c_=u_.TRANSFORM_ORIGIN,v_=u_.PERSPECTIVE_ORIGIN,y_=u_.BACKGROUND_CLIP,d_=u_.BACKGROUND_POSITION_X,p_=u_.BACKGROUND_POSITION_Y,x_=u_.BOX_SHADOW,g_=u_.TRANSLATE_X,m_=u_.TRANSLATE_Y,b_=u_.TRANSLATE_Z,A_=u_.BACKGROUND_SIZE,E_=u_.FONT_SIZE,M_=u_.FLEX_BASIS,w_=u_.FLEX_DIRECTION,T_=u_.WIDTH,S_=u_.HEIGHT,R_=u_.TOP,k_=u_.BOTTOM,C_=u_.LINE_HEIGHT,F_=u_.OPACITY,I_=u_.Z_INDEX,O_=u_.TRANSFORM,L_=u_.COLOR,B_=u_.FONT_WEIGHT,D_=u_.FONT_STYLE,P_=u_.FONT_FAMILY,N_=u_.TEXT_ALIGN,z_=u_.MATRIX,H_=u_.ROTATE_3D,G_=u_.TRANSLATE_PATH,W_=u_.TEXT_STROKE_COLOR,Y_=u_.TEXT_STROKE_OVER,U_=u_.STROKE_WIDTH,X_=u_.BORDER_TOP_LEFT_RADIUS,V_=u_.BORDER_TOP_RIGHT_RADIUS,K_=u_.BORDER_BOTTOM_RIGHT_RADIUS,j_=u_.BORDER_BOTTOM_LEFT_RADIUS,Z_=u_.TEXT_STROKE_WIDTH,q_=u_.BORDER_BOTTOM_WIDTH,$_=u_.BORDER_LEFT_WIDTH,J_=u_.BORDER_RIGHT_WIDTH,Q_=u_.BORDER_TOP_WIDTH,tu=u_.LEFT,eu=u_.RIGHT,ru=u_.MARGIN_BOTTOM,iu=u_.MARGIN_TOP,au=u_.MARGIN_LEFT,nu=u_.MARGIN_RIGHT,ou=u_.PADDING_TOP,su=u_.PADDING_RIGHT,lu=u_.PADDING_LEFT,hu=u_.PADDING_BOTTOM,_u=u_.STROKE_MITERLIMIT,uu=u_.LETTER_SPACING,fu=u_.PERSPECTIVE,cu=u_.SKEW_X,vu=u_.SKEW_Y,yu=u_.SCALE_X,du=u_.SCALE_Y,pu=u_.SCALE_Z,xu=u_.ROTATE_X,gu=u_.ROTATE_Y,mu=u_.ROTATE_Z,bu=u_.BACKGROUND_IMAGE,Au=u_.FILL,Eu=u_.STROKE,Mu=u_.BACKGROUND_COLOR,wu=u_.BORDER_BOTTOM_COLOR,Tu=u_.BORDER_LEFT_COLOR,Su=u_.BORDER_RIGHT_COLOR,Ru=u_.BORDER_TOP_COLOR;u_.POSITION;var ku=g.AUTO,Cu=g.PX,Fu=g.PERCENT,Iu=g.INHERIT,Ou=g.RGBA,Lu=g.STRING,Bu=g.NUMBER,Du=g.REM,Pu=g.VW,Nu=g.VH,zu=g.VMAX,Hu=g.VMIN,Gu=g.GRADIENT,Wu=g.calUnit,Yu=Y.isNil,Uu=Y.isFunction,Xu=Y.isNumber,Vu=Y.isObject,Ku=Y.clone,ju=Y.equalArr,Zu=qh.linear,qu=mo.cloneStyle,$u=mo.equalStyle,Ju=Sa.isGeom,Qu=Sa.GEOM,tf=vl.getLevel,ef=vl.isRepaint,rf=vl.NONE;vl.CACHE;var af=vl.TRANSFORM,nf=vl.TRANSLATE_X,of=vl.TRANSLATE_Y,sf=vl.TRANSLATE_Z,lf=vl.ROTATE_Z;vl.SCALE_X,vl.SCALE_Y,vl.SCALE_Z;var hf=vl.SCALE,_f=zi,uf=Gi,ff=Hi,cf=Wi,vf=Yi,yf={reverse:1,alternate:2,"alternate-reverse":3,alternateReverse:3},df={forwards:1,backwards:2,both:3},pf=0,xf=1,gf=2,mf=3,bf=4,Af=5,Ef=6,Mf=(o(h_={},g_,0),o(h_,m_,1),o(h_,b_,2),o(h_,xu,3),o(h_,gu,4),o(h_,mu,5),o(h_,H_,6),o(h_,yu,10),o(h_,du,11),o(h_,pu,12),o(h_,cu,13),o(h_,vu,14),o(h_,F_,15),o(h_,c_,16),h_),wf=0,Tf=1,Sf=2,Rf=3;function kf(t,e,r){var i=t,a=i.offset,n=i.easing;delete t.offset,delete t.easing;var o=t.translatePath;return t=mo.normalize(t),Array.isArray(o)&&[6,8].indexOf(o.length)>-1&&(t[G_]=o.map((function(t){var e=Wu(t);return e.u===Bu&&(e.u=Cu),e}))),{style:t,time:a*e,easing:n||r,timingFunction:Lf(n||r),transition:[],trans:[],fixed:[],wasmTrans:[],lastPercent:-1}}function Cf(t,e,r,i){if(t.u===Cu){if(e.u===Fu)return.01*e.v*r-t.v;if(e.u===Du)return e.v*i.computedStyle[E_]-t.v;if(e.u===Pu)return e.v*i.__width*.01-t.v;if(e.u===Nu)return e.v*i.__height*.01-t.v;if(e.u===zu)return e.v*Math.max(i.__width,i.__height)*.01-t.v;if(e.u===Hu)return e.v*Math.min(i.__width,i.__height)*.01-t.v}else if(t.u===Fu){if(e.u===Cu)return 100*e.v/r-t.v;if(e.u===Du)return e.v*i.computedStyle[E_]*100/r-t.v;if(e.u===Pu)return e.v*i.__width/r-t.v;if(e.u===Nu)return e.v*i.__height/r-t.v;if(e.u===zu)return e.v*Math.max(i.__width,i.__height)/r-t.v;if(e.u===Hu)return e.v*Math.min(i.__width,i.__height)/r-t.v}else if(t.u===Du){if(e.u===Cu)return e.v/i.computedStyle[E_]-t.v;if(e.u===Fu)return.01*e.v*r/i.computedStyle[E_]-t.v;if(e.u===Pu)return e.v*i.__width*.01/i.computedStyle[E_]-t.v;if(e.u===Nu)return e.v*i.__height*.01/i.computedStyle[E_]-t.v;if(e.u===zu)return e.v*Math.max(i.__width,i.__height)*.01/i.computedStyle[E_]-t.v;if(e.u===Hu)return e.v*Math.min(i.__width,i.__height)*.01/i.computedStyle[E_]-t.v}else if(t.u===Pu){if(e.u===Cu)return 100*e.v/i.__width-t.v;if(e.u===Du)return 100*e.v*i.computedStyle[E_]/i.__width-t.v;if(e.u===Fu)return e.v*r/i.__width-t.v;if(e.u===Nu)return e.v*i.__height/i.__width-t.v;if(e.u===zu)return e.v*Math.max(i.__width,i.__height)/i.__width-t.v;if(e.u===Hu)return e.v*Math.min(i.__width,i.__height)/i.__width-t.v}else if(t.u===Nu){if(e.u===Cu)return 100*e.v/i.__height-t.v;if(e.u===Du)return 100*e.v*i.computedStyle[E_]/i.__height-t.v;if(e.u===Pu)return e.v*i.__width/i.__height-t.v;if(e.u===Fu)return e.v*r/i.__height-t.v;if(e.u===zu)return e.v*Math.max(i.__width,i.__height)/i.__height-t.v;if(e.u===Hu)return e.v*Math.min(i.__width,i.__height)/i.__height-t.v}else if(t.u===zu){if(e.u===Cu)return 100*e.v/Math.max(i.__width,i.__height)-t.v;if(e.u===Du)return 100*e.v*i.computedStyle[E_]/Math.max(i.__width,i.__height)-t.v;if(e.u===Fu)return e.v*r/Math.max(i.__width,i.__height)-t.v;if(e.u===Pu)return e.v*i.__width/Math.max(i.__width,i.__height)-t.v;if(e.u===Nu)return e.v*i.__height/Math.max(i.__width,i.__height)-t.v;if(e.u===Hu)return e.v*Math.min(i.__width,i.__height)/Math.max(i.__width,i.__height)-t.v}else if(t.u===Hu){if(e.u===Cu)return 100*e.v/Math.min(i.__width,i.__height)-t.v;if(e.u===Du)return 100*e.v*i.computedStyle[E_]/Math.min(i.__width,i.__height)-t.v;if(e.u===Fu)return e.v*r/Math.min(i.__width,i.__height)-t.v;if(e.u===Pu)return e.v*i.__width/Math.min(i.__width,i.__height)-t.v;if(e.u===Nu)return e.v*i.__height/Math.min(i.__width,i.__height)-t.v;if(e.u===zu)return e.v*Math.max(i.__width,i.__height)/Math.min(i.__width,i.__height)-t.v}return 0}function Ff(t,e,r,i){var a=t.style[r],n=e.style[r],o=t.clone[r];o&&o.hasOwnProperty("v")&&(o=o.v);var s={k:r,st:a,cl:o};if(r===O_){if(!a&&!n||!a.length&&!n.length)return;var l,h;if(l=a&&a[0]?a[0].v:E.identity(),h=n&&n[0]?n[0].v:E.identity(),ju(l,h))return;s.v=[h[0]-l[0],h[1]-l[1],h[2]-l[2],h[3]-l[3],h[4]-l[4],h[5]-l[5],h[6]-l[6],h[7]-l[7],h[8]-l[8],h[9]-l[9],h[10]-l[10],h[11]-l[11],h[12]-l[12],h[13]-l[13],h[14]-l[14],h[15]-l[15]]}else if(r===H_){if(a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3].v===n[3].v&&a[3].u===n[3].u)return;s.v=[n[0]-a[0],n[1]-a[1],n[2]-a[2],n[3].v-a[3].v]}else if(r===f_){for(var _,u=Math.max(a?a.length:0,n?n.length:0),f=[],c=0;c<u;c++){var v=a?a[c]:null,y=n?n[c]:null;if(Yu(v)||Yu(y)||v.k!==y.k)f.push(null);else{_=!0;var d=v.k,p=v.v,x=y.v;if("blur"===d)if(p.u===x.u)f.push(x.v-p.v);else{var g=Cf(p,x,0,i.__root);f.push(g)}else if("hueRotate"===d||"saturate"===d||"brightness"===d||"contrast"===d||"sepia"===d||"invert"===d||"grayscale"===d)f.push(x.v-p.v);else if("dropShadow"===d){for(var m=[],b=0;b<4;b++){var A=p[b],M=x[b];A.u===M.u?m.push(M.v-A.v):m.push(Cf(A,M,1===b?i.__clientHeight:i.__clientWidth,i.__root))}m.push([x[4][0]-p[4][0],x[4][1]-p[4][1],x[4][2]-p[4][2],x[4][3]-p[4][3]]),f.push(m)}}}if(!_)return;s.v=f}else if(r===c_||r===v_||vf(r)){if(n[0].v===a[0].v&&n[0].u===a[0].u&&n[1].v===a[1].v&&n[1].u===a[1].u)return;s.v=[];for(var w=0;w<2;w++){var T=a[w],S=n[w];if(T.u===S.u)s.v.push(S.v-T.v);else{var R=Cf(T,S,i[w?"__outerHeight":"__outerWidth"],i.__root);s.v.push(R)}}}else if(r===d_||r===p_){s.v=[];for(var k=Math.min(a.length,n.length),C=0;C<k;C++){var F=a[C],I=n[C];if(F.u===I.u){var O=I.v-F.v;s.v.push(O)}else{var L=void 0;L=["padding-box","paddingBox"].indexOf(i.computedStyle[y_])>-1?r===d_?"__clientWidth":"__clientHeight":["content-box","contentBox"].indexOf(i.computedStyle[y_])>-1?r===d_?"__width":"__height":r===d_?"__offsetWidth":"__offsetHeight";var B=Cf(F,I,i[L],i.__root);s.v.push(B)}}}else if(r===x_){s.v=[];for(var D=0,P=Math.min(a.length,n.length);D<P;D++){var N=a[D],z=n[D];if(N&&z&&N[5]===z[5]){for(var H=[],G=0;G<4;G++)if(N[G].u===z[G].u)H.push(z[G].v-N[G].v);else{var W=Cf(N[G],z[G],1===D?i.__offsetHeight:i.__offsetWidth,i.__root);H.push(W)}for(var Y=[],U=0;U<4;U++)Y.push(z[4][U]-N[4][U]);H.push(Y),s.v.push(H)}else s.v.push(null)}}else if(r===A_){s.v=[];for(var X,V=Math.min(a.length,n.length),K=0;K<V;K++){var j=a[K],Z=n[K];if(j&&Z){for(var q=[],$=0;$<2;$++){var J=j[$],Q=Z[$];if(J.u===Q.u)q.push(Q.v-J.v);else{var tt=void 0;tt=["padding-box","paddingBox"].indexOf(i.computedStyle[y_])>-1?K?"__clientWidth":"__clientHeight":["content-box","contentBox"].indexOf(i.computedStyle[y_])>-1?K?"__width":"__height":K?"__offsetWidth":"__offsetHeight";var et=Cf(J,Q,i[tt],i.__root);q.push(et)}}ju(q,[0,0])?s.v.push(null):(s.v.push(q),X=!0)}else s.v.push(null)}if(!X)return}else if(r===F_||r===I_){if(n===a)return;s.v=n-a}else if(r===U_){s.v=[];for(var rt=Math.min(a.length,n.length),it=0;it<rt;it++){var at=a[it],nt=n[it];if(at.u===nt.u){var ot=nt.v-at.v;s.v.push(ot)}var st=Cf(at,nt,i.__offsetWidth,i.__root);s.v.push(st)}}else if(r===G_&&a){var lt="__offsetWidth",ht="__offsetHeight",_t=i&&i.__computedStyle;_t&&(["padding-box","paddingBox"].indexOf(_t[y_])>-1?(lt="__clientWidth",ht="__clientHeight"):["content-box","contentBox"].indexOf(_t[y_])>-1&&(lt="__width",ht="__height")),s.v=a.map((function(t,e){var r=t.v,a=t.u;return a===Fu?e%2==0?{v:.01*(parseFloat(r)||0)*i[lt],u:Cu}:{v:.01*(parseFloat(r)||0)*i[ht],u:Cu}:a===Du?{v:(parseFloat(r)||0)*i.__root.computedStyle[E_]*100,u:Cu}:a===Pu?{v:.01*(parseFloat(r)||0)*i.__root.__width,u:Cu}:a===Nu?{v:.01*(parseFloat(r)||0)*i.__root.__height,u:Cu}:a===zu?{v:.01*(parseFloat(r)||0)*Math.max(i.__root.__width,i.__root.__height),u:Cu}:a===Hu?{v:.01*(parseFloat(r)||0)*Math.min(i.__root.__width,i.__root.__height),u:Cu}:{v:parseFloat(r)||0,u:Cu}}))}else if(uf(r))if(a.u===n.u){var ut=n.v-a.v;if(0===ut)return;s.v=ut}else{var ft=Cf(a,n,i[r===g_||r===b_?"__outerWidth":"__outerHeight"],i.__root);if(!ft)return;s.v=ft}else if(ff(r)){if(a.u===ku||n.u===ku)return;var ct=i.__computedStyle,vt=(i.__domParent||i).__computedStyle,yt=0;if(a.u===n.u?yt=n.v-a.v:r===C_?yt=Cf(a,n,ct[E_],i.__root):r===E_?yt=Cf(a,n,vt[E_],i.__root):r===M_&&["column","column-reverse","columnReverse"].indexOf(ct[w_])>-1||[S_,R_,k_].indexOf(r)>-1?a.u!==ku&&n.u!==ku&&(yt=Cf(a,n,vt[S_],i.__root)):a.u!==ku&&n.u!==ku&&(yt=Cf(a,n,vt[T_],i.__root)),0===yt||isNaN(yt))return;s.v=yt}else if(cf(r)){s.v=[];for(var dt=Math.min(a.length,n.length),pt=0;pt<dt;pt++){var xt=a[pt],gt=n[pt];if(xt&&gt&&xt.u===gt.u&&xt.u!==Lu){var mt=xt.u;xt=xt.v,gt=gt.v;var bt=void 0;if(mt===Gu){var At=If(xt,gt,i);if(!At){s.v.push(null);continue}bt=At}else{if(ju(gt,xt)){s.v.push(null);continue}bt=[gt[0]-xt[0],gt[1]-xt[1],gt[2]-xt[2],gt[3]-xt[3]]}s.v.push(bt)}else s.v.push(null)}}else if(_f(r)){if(n.u!==a.u)return;if(n=n.v,a=a.v,n.u===Gu){var Et=If(a,n,i);if(!Et)return;s.v=Et}else{if(ju(n,a))return;s.v=[n[0]-a[0],n[1]-a[1],n[2]-a[2],n[3]-a[3]]}}else{if(!Qu.hasOwnProperty(r))return;var Mt=i.tagName;if(Yu(a))return;if(Qu[r][Mt]&&Uu(Qu[r][Mt].calDiff)){var wt=Qu[r][Mt].calDiff;if(i.isMulti){for(var Tt=[],St=0,Rt=Math.min(a.length,n.length);St<Rt;St++)Tt.push(wt(a[St],n[St]));return Tt}s.v=wt(a,n)}else if(i.isMulti)if("points"===r||"controls"===r){if(Yu(n)||!n.length||Yu(a)||!a.length||ju(a,n))return;s.v=[];for(var kt=0,Ct=Math.min(a.length,n.length);kt<Ct;kt++){var Ft=a[kt],It=n[kt];if(Yu(Ft)||!Ft.length||Yu(It)||!It.length)s.v.push(null);else{for(var Ot=[],Lt=0,Bt=Math.min(Ft.length,It.length);Lt<Bt;Lt++){var Dt=Ft[Lt],Pt=It[Lt];if(Yu(Dt)||Yu(Pt))Ot.push(null);else{for(var Nt=[],zt=0,Ht=Math.max(Dt.length,Pt.length);zt<Ht;zt++){var Gt=Dt[zt],Wt=Pt[zt];Yu(Gt)||Yu(Wt)?Nt.push(0):Nt.push(Wt-Gt)}Ot.push(Nt)}}s.v.push(Ot)}}}else if("controlA"===r||"controlB"===r){if(Yu(n)||!n.length||Yu(a)||!a.length||ju(a,n))return;s.v=[];for(var Yt=0,Ut=Math.min(a.length,n.length);Yt<Ut;Yt++){var Xt=a[Yt],Vt=n[Yt];Yu(Xt)||!Xt.length||Yu(Vt)||!Vt.length?s.v.push(null):s.v.push([Vt[0]-Xt[0],Vt[1]-Xt[1]])}}else{if(n===a||ju(n,a)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var Kt=[],jt=0,Zt=Math.min(a.length,n.length);jt<Zt;jt++){var qt=a[jt],$t=n[jt];(Yu(qt)||Yu($t))&&Kt.push(0),Kt.push($t-qt)}s.v=Kt}else if("points"===r||"controls"===r){if(Yu(n)||!n.length||Yu(a)||!a.length||ju(a,n))return;s.v=[];for(var Jt=0,Qt=Math.min(a.length,n.length);Jt<Qt;Jt++){var te=a[Jt],ee=n[Jt];if(Yu(te)||!te.length||Yu(ee)||!ee.length)s.v.push(null);else{for(var re=[],ie=0,ae=Math.max(te.length,ee.length);ie<ae;ie++){var ne=te[ie],oe=ee[ie];Yu(ne)||Yu(oe)?re.push(0):re.push(oe-ne)}s.v.push(re)}}}else if("controlA"===r||"controlB"===r){if(Yu(n)||!n.length||Yu(a)||!a.length||ju(a,n))return;s.v=[n[0]-a[0],n[1]-a[1]]}else{if(n===a||"edge"===r||"closure"===r||"booleanOperations"===r)return;s.v=n-a}}return s}function If(t,e,r){if(t.k===e.k){for(var i=t.v,a=e.v,n=[[]],o=ju(i,a),s=0,l=Math.min(i.length,a.length);s<l;s++){var h=i[s],_=a[s],u=[];if(u.push([_[0][0]-h[0][0],_[0][1]-h[0][1],_[0][2]-h[0][2],_[0][3]-h[0][3]]),h[1]&&_[1])if(h[1].u===_[1].u)u.push(_[1].v-h[1].v);else{var f=Cf(h[1],_[1],r.__clientWidth,r.__root);u.push(f||0)}n[0].push(u)}if("linear"===t.k){var c=Array.isArray(t.d);if(Array.isArray(e.d)!==c)return;if(c){var v=[e.d[0]-t.d[0],e.d[1]-t.d[1],e.d[2]-t.d[2],e.d[3]-t.d[3]];if(o&&ju(v,[0,0,0,0]))return;n[1]=v}else{var y=e.d-t.d;if(o&&0===y)return;n[1]=y}}else if("radial"===t.k){var d=Array.isArray(t.z);if(Array.isArray(e.z)!==d)return;if(n[2]=[],d){if(o&&ju(t.z,e.z))return;for(var p=0;p<5;p++){var x=t.z[p];void 0===x&&(x=1);var g=e.z[p];void 0===g&&(g=1),n[2].push(g-x)}}else{if(o&&t.z===e.z&&t.s===e.s&&ju(t.p,e.p))return;for(var m=0;m<2;m++){var b=t.p[m],A=e.p[m];if(b.u===A.u)n[2].push(A.v-b.v);else{var E=Cf(b,A,r[m?"__clientWidth":"__clientHeight"],r.__root);n[2].push(E||0)}}}}else if("conic"===t.k){if(o&&t.d===e.d&&ju(t.p,e.p))return;n[1]=e.d-t.d,n[2]=[];for(var M=0;M<2;M++){var w=t.p[M],T=e.p[M];if(w[1]===T[1])n[2].push(T[0]-w[0]);else{var S=Cf(w,T,r[M?"__clientWidth":"__clientHeight"],r.__root);n[2].push(S||0)}}}return n}}function Of(t,e,r,i){for(var a,n=0,o=r.length;n<o;n++){var s=r[n],l=Ff(t,e,s,i);if(l){s===G_&&(a=!0);var h=Bf[s];h&&(l.fn=h),t.transition.push(l),t.trans.push(s)}else s!==G_&&t.fixed.push(s)}if(a){var _=t.trans.indexOf(g_);-1===_&&t.trans.push(g_),-1===(_=t.trans.indexOf(m_))&&t.trans.push(m_),(_=t.fixed.indexOf(g_))>-1&&t.fixed.splice(_,1),(_=t.fixed.indexOf(m_))>-1&&t.fixed.splice(_,1)}var u=rf;i.__computedStyle;for(var f=t.trans,c=0,v=f.length;c<v;c++){var y=f[c];u|=tf(y),y===L_?t.hasColor=!0:y===W_?t.hasTsColor=!0:y===Z_?t.hasTsWidth=!0:y===Y_&&(t.hasTsOver=!0)}return t.lv=u,ef(u)&&u&(nf|of|sf|lf|hf)&&(u&af||(t.optimize=!0)),e}function Lf(t){var e;if(t)if(e=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(t)){var r=parseInt(e[1]),i=e[2];e=function(t){if(r&&r>0){var e=1/r,a=Math.floor(t/e);return"start"===i&&a++,a/r}return t}}else e=qh.getEasing(t);return e}var Bf=[];function Df(t,e,r){for(var i=e.__currentStyle,a=e.__currentProps,n=[],o=0,s=r.length;o<s;o++){var l=r[o],h=t[l],_=Qu.hasOwnProperty(l);$u(l,h,_?a[l]:i[l],e)||(_?a[l]=h:i[l]=h,n.push(l))}return n}function Pf(t,e,r){return Uu(e)&&(r=e,e={}),Yu((e=e||{}).areaStart)||(t.areaStart=e.areaStart),Yu(e.areaDuration)||(t.areaDuration=e.areaDuration),{options:e,cb:r}}function Nf(t){t.emit(ih.FRAME,t.__isDelay),t.__firstPlay&&(t.__firstPlay=!1,t.emit(ih.PLAY));var e=t.__playCb;e&&(t.__playCb=null,e(!0))}function zf(t,e,r,i,a){for(var n=0,o=i.length;n<o;n++){var s=i[n],l=s.style,h=s.transition,_=s.trans,u=s.wasmTrans,f=s.time,c=s.easing,v=pf,y=0,d=0,p=1,x=1;Array.isArray(c)?4===c.length&&(v=Ef,y=parseFloat(c[0])||0,d=parseFloat(c[1])||0,p=parseFloat(c[2])||0,x=parseFloat(c[3])||0):c&&(c=c.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(c)?(c=c.match(/[\d.]+/g),v=Ef,y=parseFloat(c[0])||0,d=parseFloat(c[1])||0,p=parseFloat(c[2])||0,x=parseFloat(c[3])||0):"easeIn"===c||"ease-in"===c?v=gf:"easeOut"===c||"ease-out"===c?v=mf:"ease"===c?v=bf:"easeInOut"===c||"ease-in-out"===c?v=Af:"linear"===c&&(v=xf)),t.add_frame(a,f,v,y,d,p,x);for(var g=0,m=h.length;g<m;g++){var b=h[g],A=b.k;if(r.hasOwnProperty(A)){var E=l[A],M=Mf[A],w=b.v;h.splice(g,1),_.splice(g,1),u.push(A),A===c_?(t.add_item(a,M,E[0].v,E[0].u,w[0]),t.add_item(a,M+1,E[1].v,E[1].u,w[1])):A===H_||t.add_item(a,M,E.v,E.u,w),g--,m--}}}}Bf[O_]=function(t,e,r,i,a,n,o){i&&i.length||(i=n.style[t]=[{k:z_,v:E.identity()}]);a&&a.length||(a=n.clone[t]=[{k:z_,v:E.identity()}]);for(var s=0;s<16;s++)i[0].v[s]=a[0].v[s]+e[s]*r},Bf[H_]=function(t,e,r,i,a,n,o){i[0]=a[0]+e[0]*r,i[1]=a[1]+e[1]*r,i[2]=a[2]+e[2]*r,i[3].v=a[3].v+e[3]*r},Bf[f_]=function(t,e,r,i,a,n,o){for(var s=0,l=e.length;s<l;s++){var h=e[s];if(h){var _=i[s].k,u=i[s].v,f=a[s].v;if("dropShadow"===_){u[0].v=f[0].v+h[0]*r,u[1].v=f[1].v+h[1]*r,u[2].v=f[2].v+h[2]*r,u[3].v=f[3].v+h[3]*r;var c=u[4],v=f[4],y=h[4];c[0]=v[0]+y[0]*r,c[1]=v[1]+y[1]*r,c[2]=v[2]+y[2]*r,c[3]=v[3]+y[3]*r}else u.v=f.v+h*r}}},Bf[c_]=Bf[v_]=Bf[X_]=Bf[V_]=Bf[K_]=Bf[j_]=function(t,e,r,i,a,n,o){0!==e[0]&&(i[0].v=a[0].v+e[0]*r);0!==e[1]&&(i[1].v=a[1].v+e[1]*r)},Bf[U_]=Bf[d_]=Bf[p_]=function(t,e,r,i,a,n,o){i.forEach((function(t,i){e[i]&&(t.v=a[i].v+e[i]*r)}))},Bf[x_]=function(t,e,r,i,a,n,o){for(var s=0,l=Math.min(i.length,e.length);s<l;s++)if(e[s]){for(var h=0;h<4;h++)i[s][h].v=a[s][h].v+e[s][h]*r;for(var _=0;_<4;_++)i[s][4][_]=a[s][4][_]+e[s][4][_]*r}},Bf[A_]=function(t,e,r,i,a,n,o){i.forEach((function(t,i){var n=e[i];n&&(t[0].v=a[i][0].v+n[0]*r,t[1].v=a[i][1].v+n[1]*r)}))},Bf[F_]=Bf[I_]=function(t,e,r,i,a,n,o){i=a+e*r,t===F_&&(i<0?i=0:i>1&&(i=1));o[t]=i},Bf[G_]=function(t,e,r,i,a,n,o){var s=1-r;8===e.length?(o[g_]={v:e[0].v*s*s*s+3*e[2].v*r*s*s+3*e[4].v*r*r*s+e[6].v*r*r*r,u:Cu},o[m_]={v:e[1].v*s*s*s+3*e[3].v*r*s*s+3*e[5].v*r*r*s+e[7].v*r*r*r,u:Cu}):6===e.length&&(o[g_]={v:e[0].v*s*s+2*e[2].v*r*s+e[4].v*r*r,u:Cu},o[m_]={v:e[1].v*s*s+3*e[3].v*r*s+e[5].v*r*r,u:Cu})},Bf[E_]=Bf[Z_]=Bf[q_]=Bf[$_]=Bf[J_]=Bf[Q_]=Bf[tu]=Bf[R_]=Bf[eu]=Bf[k_]=Bf[M_]=Bf[T_]=Bf[S_]=Bf[C_]=Bf[ru]=Bf[iu]=Bf[au]=Bf[nu]=Bf[ou]=Bf[su]=Bf[lu]=Bf[hu]=Bf[U_]=Bf[_u]=Bf[uu]=Bf[fu]=Bf[g_]=Bf[m_]=Bf[b_]=Bf[cu]=Bf[vu]=Bf[yu]=Bf[du]=Bf[pu]=Bf[xu]=Bf[gu]=Bf[mu]=function(t,e,r,i,a,n,o){i.v=a+e*r},Bf[bu]=Bf[Au]=Bf[Eu]=function(t,e,r,i,a,n,o){i.forEach((function(t,i){var n=e[i];if(n){var o=a[i].v;if(t.u===Gu){t=t.v;for(var s=c(n,4),l=s[0],h=s[1],_=s[2],u=s[3],f=0,v=Math.min(t.v.length,l.length);f<v;f++){var y=t.v[f],d=l[f];y[0][0]=o.v[f][0][0]+d[0][0]*r,y[0][1]=o.v[f][0][1]+d[0][1]*r,y[0][2]=o.v[f][0][2]+d[0][2]*r,y[0][3]=o.v[f][0][3]+d[0][3]*r,y[1]&&d[1]&&(y[1].v=o.v[f][1].v+d[1]*r)}"linear"===t.k&&void 0!==t.d&&void 0!==h?Array.isArray(h)?(t.d[0]=o.d[0]+h[0]*r,t.d[1]=o.d[1]+h[1]*r,t.d[2]=o.d[2]+h[2]*r,t.d[3]=o.d[3]+h[3]*r):t.d=o.d+h*r:"radial"===t.k?void 0!==t.z&&void 0!==u?(t.z[0]=o.z[0]+u[0]*r,t.z[1]=o.z[1]+u[1]*r,t.z[2]=o.z[2]+u[2]*r,t.z[3]=o.z[3]+u[3]*r,t.z[4]=o.z[4]+u[4]*r):void 0!==t.p&&void 0!==_&&(t.p[0].v=o.p[0].v+_[0]*r,t.p[1].v=o.p[1].v+_[1]*r):"conic"===t.k&&void 0!==t.d&&void 0!==h&&(t.d=o.d+h*r,t.p[0][0]=o.p[0]+_[0]*r,t.p[1][0]=o.p[1]+_[1]*r)}else(t=t.v)[0]=o[0]+n[0]*r,t[1]=o[1]+n[1]*r,t[2]=o[2]+n[2]*r,t[3]=o[3]+n[3]*r}}))},Bf[Mu]=Bf[wu]=Bf[Tu]=Bf[Su]=Bf[Ru]=Bf[L_]=Bf[W_]=function(t,e,r,i,a,n,o){var s=i.v;s[0]=a[0]+e[0]*r,s[1]=a[1]+e[1]*r,s[2]=a[2]+e[2]*r,s[3]=a[3]+e[3]*r};var Hf=0,Gf=function(t){function e(e,r,i){var a;if((a=t.call(this)||this).__id=Hf++,a.__wasmAnimation=null,a.__ignore=!1,a.__fromGoto=!1,r=Ku(r||[]),Array.isArray(r))r=r.filter((function(t){return t&&Vu(t)}));else if(r&&Vu(r)){var n=[];Object.keys(r).forEach((function(t){var e=r[t];if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++){(n[i]=n[i]||{offset:i/(a-1)})[t]=e[i]}})),r=n}else r=[];Xu(i)&&(a.__options={duration:i},i=a.__options);var o=a.__options=i||{duration:0};a.__playState="idle",a.__target=e,a.__root=e.__root;var s=a.duration=o.duration,l=a.easing=o.easing,h=parseInt(o.fps)||0;h<=0&&(h=60),a.fps=h,a.delay=o.delay,a.endDelay=o.endDelay,a.playbackRate=o.playbackRate,a.fill=o.fill,a.iterations=o.iterations,a.direction=o.direction,a.areaStart=o.areaStart,a.areaDuration=o.areaDuration;var u=a.__init(r,s,l,e),f=u.frames,c=u.framesR,v=u.keys,y=u.originStyle;a.__frames=f,a.__framesR=c,a.__fps=h,a.__keys=v,a.__originStyle=y,a.__firstPlay=!0,a.__begin=!0,a.__end=!1,a.__isDelay=!1,a.__isEndDelay=!1,a.__playCount=0,a.__currentFrames={reverse:!0,"alternate-reverse":!0,alternateReverse:!0}.hasOwnProperty(a.__direction)?c:f;var d=o.controller;return d&&d instanceof t_?d.add(_(a)):d&&a.addControl(),a.__startTime=0,a}return s(e,t),n(e,[{key:"__init",value:function(t,r,i,a){if(t.length<1)return{frames:[],framesR:[],keys:[],originStyle:{}};var n=e.parse(t,r,i,a),o=e.unify(n,a);e.inherit(n,o,a);var s=Ku(n).reverse(),l=a.__currentStyle,h=a.__currentProps,_={};o.forEach((function(t){Ju(a.tagName,t)&&(_[t]=h[t]),_[t]=l[t]})),_=qu(_,o),e.calTransition(n,o,a),s.forEach((function(t,e){t.time=r-t.time,t.index=e})),e.calTransition(s,o,a);var u=[],f={};if(a.__wasmNode){for(var c=0,v=o.length;c<v;c++){var y=o[c];y!==g_&&y!==m_&&y!==b_&&y!==xu&&y!==gu&&y!==mu&&y!==cu&&y!==vu&&y!==yu&&y!==yu&&y!==du&&y!==pu&&y!==c_||(u.push(y),f[y]=!0)}if(u.length){var d=this.__iterations===1/0?0:this.__iterations,p=Lf(i),x=xf;p&&i!==qh.linear&&(x=p===qh.easeIn?gf:p===qh.easeOut?mf:p===qh.ease?bf:p===qh.easeInOut?Af:Ef);var g=this.__wasmAnimation=__.Animation.new(yf[this.__direction]||0,this.__duration,this.__fps,this.__delay,this.__endDelay,df[this.__fill]||0,this.__playbackRate,d,this.__areaStart,this.__areaDuration,x);if(x===Ef){var m=i.match(/[\d.]+/g);4===m.length&&g.set_bezier(parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]))}zf(g,0,f,n,!1),zf(g,0,f,s,!0),u.length===o.length&&(this.__ignore=!0)}}return{frames:n,framesR:s,keys:o,originStyle:_}}},{key:"__clean",value:function(t){this.__cancelTask(),t?(this.__currentTime=this.__delay+this.__duration*this.__iterations+this.__endDelay,this.__playState="finished"):(this.__playCount=this.__currentTime=0,this.__playState="idle");var e=this.__currentFrame;e&&(e.lastPercent=-1,this.__currentFrame=null)}},{key:"play",value:function(t){var r=this.__isDestroyed,i=this.__duration,a=this.__playState,n=this.__frames;if(r||i<=0||n.length<1)return this;if("running"===a)return Uu(t)&&t(!1),this;this.__playCb=t,this.__playState="running",this.__firstPlay=!0;var o=this.__fromGoto;o?this.__fromGoto=!1:(this.__currentTime=0,this.__playCount=0);var s=this.__currentTime;this.__fpsTime=0;var l=this.__initCurrentFrames(this.__playCount);if(!o&&this.__stayBegin||o&&s<this.__delay){var h=this.__currentFrame=this.__currentFrames[0],_=this.__target,u=this.__root,f=Df(h.style,_,this.__keys),c=!!f.length;this.__stopCb&&u.__cancelFrameDraw(this.__stopCb),c&&u.__addUpdate(_,f,!1,!1,!1,!1,!1,h.optimize,null)}else if(o){var v,y,d=this.__areaDuration,p=d?Math.min(i,d):i,x=l.length,g=l[v=2===x?s<p?0:1:e.binarySearch(0,x-1,s,l)];if(2===x)y=s/i;else{var m=g.time;y=(s-m)/(l[v+1].time-m)}e.calIntermediateStyle(g,y,this.__target,!0)}this.__startTime=Hh.__now||(Hh.__now=lt.now()),this.__begin=!0,this.__end=!1,this.__isDelay=!1,this.__isEndDelay=!1;var b=this.__wasmAnimation;return b&&!o&&(b.play_count=0,b.play_state=Tf,b.first_play=!0),this.__root.__onAniFrame(this),this}},{key:"__before",value:function(t){if(this.__ignore)return!0;var e=this.__fps,r=this.__currentFrames,i=this.__iterations,a=this.__delay,n=this.__areaStart,o=this.__areaDuration,s=this.__duration,l=this.__playbackRate,h=o?Math.min(s,o):s;1!==l&&(t*=l);var _=this.__currentTime+=t;if(!this.__firstPlay&&e>0&&60!==e&&120!==e){if((t=this.__fpsTime+=t)<1e3/e)return void(this.__inFps=!0);this.__fpsTime=0}if(_<a-n)return this.__begin=!1,void(this.__isDelay=!0);_-=a-n,this.__isDelay&&(this.__isDelay=!1,this.__begin=!0);var u=Math.min(i-1,Math.floor(_/h));_-=h*u,this.__playCount<u&&(this.__begin=!0,this.__playCount=u,r=this.__initCurrentFrames(u)),this.__calCurrent(r,this.__currentFrame,_,h,s,null)}},{key:"__after",value:function(){this.__inFps?this.__inFps=!1:(Nf(this),this.__begin&&(this.__begin=!1,this.emit(ih.BEGIN,this.__playCount)),this.__end&&(this.__end=!1,this.emit(ih.END,this.__playCount-1)),this.__finished&&(this.__begin=this.__end=this.__isDelay=this.__finished=this.__inFps=!1,this.__playState="finished",this.emit(ih.FINISH,!0),this.__clean(!0)))}},{key:"pause",value:function(){var t=this.__isDestroyed,e=this.__duration,r=this.pending;if(t||e<=0||r)return this;this.__playState="paused";var i=this.__wasmAnimation;return i&&(i.play_state=Sf),this.__cancelTask(),this.emit(ih.PAUSE),this}},{key:"resume",value:function(t){var e=this.__isDestroyed,r=this.__duration,i=this.__playState;return e||r<=0||"paused"!==i?this:this.play(t)}},{key:"finish",value:function(t){var e=this,r=this.__isDestroyed,i=this.__duration,a=this.__playState,n=this.__frames;if(r||i<=0||n.length<1)return this;if("finished"===a)return Uu(t)&&t(!1),this;this.__clean(!0),this.__begin=this.__end=this.__isDelay=this.__isEndDelay=this.__finished=this.__inFps=!1,this.__playState="finished";var o=this.__wasmAnimation;o&&(o.play_state=Rf);var s=this.__root;if(s){var l,h,_=this.__target;if(this.__stayEnd){var u=this.__framesR,f=this.__direction,c=this.__iterations;if("reverse".indexOf(f)>-1){var v=[u,n];n=v[0],u=v[1]}l=c===1/0||c%2?(h=n[n.length-1]).style:(h=u[u.length-1]).style,this.__currentFrame=h}else l=this.__originStyle;var y=Df(l,_,this.__keys),d=!!y.length;this.__stopCb&&s.__cancelFrameDraw(this.__stopCb),this.__stopCb=function(){d&&Nf(e),e.emit(ih.FINISH,d),Uu(t)&&t(d)},d?s.__addUpdate(_,y,!1,!1,!1,!1,!1,h&&h.optimize,this.__stopCb):this.__stopCb()}return this}},{key:"cancel",value:function(t){var e=this,r=this.__isDestroyed,i=this.__duration,a=this.__playState,n=this.__frames;if(r||i<=0||n.length<1)return this;if("idle"===a)return Uu(t)&&t(!1),this;this.__clean(!1),this.__begin=this.__end=this.__isDelay=this.__isEndDelay=this.__finished=this.__inFps=!1,this.__playState="idle";var o=this.__wasmAnimation;o&&(o.play_state=wf);var s=this.__currentFrame;this.__currentFrame=null;var l=this.__root;if(l){var h=this.__target,_=Df(this.__originStyle,h,this.__keys),u=!!_.length;this.__stopCb&&l.__offFrame(this.__stopCb),this.__stopCb=function(){u&&Nf(e),e.emit(ih.CANCEL,u),Uu(t)&&t(u)},u?l.__addUpdate(h,_,!1,!1,!1,!1,!1,s&&s.optimize,this.__stopCb):this.__stopCb()}return this}},{key:"gotoAndPlay",value:function(t,e,r){var i=Pf(this,e,r);e=i.options,r=i.cb;var a=this.__isDestroyed,n=this.__duration,o=this.__frames,s=this.__areaDuration,l=this.__endDelay,h=this.__currentTime,_=s?Math.min(n,s):n;if(a||_<=0||o.length<1)return this;if((t=this.__goto(t,e.isFrame,e.excludeDelay))>=_+l)this.__stayEnd?this.finish(r):this.cancel(r);else{if(t!==h||"running"!==this.__playState)return"running"===this.__playState&&this.__cancelTask(),this.__playState="idle",this.__fromGoto=!0,this.play(r);Uu(r)&&r(!1)}}},{key:"gotoAndStop",value:function(t,e,r){var i=this,a=Pf(this,e,r);e=a.options,r=a.cb;var n=this.__isDestroyed,o=this.__duration,s=this.__frames,l=this.__areaDuration,h=this.__endDelay,_=this.__currentTime,u=l?Math.min(o,l):o;if(n||u<=0||s.length<1)return this;if((t=this.__goto(t,e.isFrame,e.excludeDelay))>=u+h)this.__stayEnd?this.finish(r):this.cancel(r);else if(t!==_){this.__startTime=Hh.__now=Hh.__now||lt.now(),"running"===this.__playState&&this.__cancelTask(),this.__playState="paused";var f=this.__wasmAnimation;f&&(f.play_state=Sf);var c,v=this.__root,y=this.__currentFrames;if(this.__stopCb=function(){c&&Nf(i),Uu(r)&&r(c)},t<=0){var d=this.__currentFrame=y[0],p=this.__target,x=Df(d.style,p,this.__keys);return c=!!x.length,this.__stopCb&&v.__cancelFrameDraw(this.__stopCb),c?v.__addUpdate(p,x,!1,!1,!1,!1,!1,d.optimize,this.__stopCb):this.__stopCb(),void(f&&f.goto_stop(0,u))}var g=!1;f&&(g=f.goto_stop(t,u)),this.__calCurrent(y,this.__currentFrame,t,u,o,{wasmChange:g,cb:r,optimize:!0})}else Uu(r)&&r(!1)}},{key:"__goto",value:function(t,e,r){var i=this.__iterations,a=this.__duration,n=this.__areaDuration,o=n?Math.min(a,n):a,s=this.__wasmAnimation;if(isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=this.__delay),this.__currentTime=t,s&&(s.current_time=t),t-=this.__delay-this.__areaStart;var l=Math.min(i-1,Math.floor(t/o));return t-=o*l,this.__playCount=l,s&&(s.play_count=t),this.__initCurrentFrames(l),t}},{key:"__initCurrentFrames",value:function(t){var e=this.__frames,r=this.__framesR,i=this.__direction;if({alternate:!0,"alternate-reverse":!0,alternateReverse:!0}.hasOwnProperty(i)){var a=t%2==0;return this.__currentFrames="alternate"===i?a?e:r:a?r:e}return this.__currentFrames="reverse"===i?r:e}},{key:"__calCurrent",value:function(t,r,i,a,n,o){var s,l=this.__playCount>=this.__iterations-1,h=t.length,_=t[s=2===h?i<a?0:1:e.binarySearch(0,h-1,i,t)],u=l&&s===h-1,f=0;if(u);else if(2===h)f=i/n;else{var c=_.time;f=(i-c)/(t[s+1].time-c)}var v=r!==_;v&&(r&&(r.lastPercent=-1),this.__currentFrame=_);var y=this.__root,d=this.__target;if(u){var p;this.__stayEnd?p=Df(_.style,d,this.__keys):(p=Df(this.__originStyle,d,this.__keys),_=this.__currentFrame=null),this.__isEndDelay||(this.__isEndDelay=!0,this.__end=!0,this.__playCount++,this.__finished=!0),o?this.__gotoStopCb(y,d,p,_,o):p.length&&y.__addUpdate(d,p,!1,!1,!1,!0,!1,_&&_.optimize,null)}else{var x=e.calIntermediateStyle(_,f,d,v),g=x.trans,m=x.fixed,b=g.concat(m);o?this.__gotoStopCb(y,d,b,_,o):b.length&&y.__addAniUpdate(d,g,m,_)}}},{key:"__gotoStopCb",value:function(t,e,r,i,a){var n=this;this.__stopCb&&t.__cancelFrameDraw(this.__stopCb);var o=a.wasmChange||!!r.length;this.__stopCb=function(){o&&Nf(n),Uu(a.cb)&&a.cb(o)},o?t.__addUpdate(e,r,!1,!1,!1,!1,a.wasmChange,a.optimize&&i&&i.optimize,this.__stopCb):this.__stopCb(o)}},{key:"addControl",value:function(){var t=this.__root;if(t){var e=t.__animateController;e&&(this.__isControlled=!0,e.add(this))}}},{key:"removeControl",value:function(){var t=this.__root;if(t&&this.__isControlled){var e=t.__animateController;e&&e.remove(this)}}},{key:"__cancelTask",value:function(){var t=this.__root;t&&(t.__offAniFrame(this),this.__stopCb&&t.__cancelFrameDraw(this.__stopCb),this.__playCb=this.__stopCb=null)}},{key:"__destroy",value:function(){if(!this.__isDestroyed){this.removeControl(),this.__cancelTask(),this.__target=this.__root=null,this.__startTime=0,this.__isDestroyed=!0;var t=this.__wasmAnimation;t&&(t.free(),this.__wasmAnimation=null)}}},{key:"__checkModify",value:function(){"idle"!==this.__playState&&"finished"!==this.__playState&&lt.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__target}},{key:"root",get:function(){return this.__root}},{key:"keys",get:function(){return this.__keys}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__duration},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__duration!==t&&(this.__duration=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__delay},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__delay!==t&&(this.__delay=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__endDelay},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__endDelay!==t&&(this.__endDelay=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__fps},set:function(t){return t=parseInt(t)||60,this.__fps!==t&&(t<=0&&(t=60),this.__fps=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__iterations},set:function(t){return t===1/0||Y.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1)),this.__iterations!==t&&(this.__iterations=t),t}},{key:"fill",get:function(){return this.__fill},set:function(t){return t=t||"none",this.__fill!==t&&(this.__fill=t,this.__checkModify()),this.__stayBegin={backwards:!0,both:!0}.hasOwnProperty(t),this.__stayEnd={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__direction},set:function(t){return t=t||"normal",this.__direction!==t&&(this.__direction=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__frames}},{key:"framesR",get:function(){return this.__framesR}},{key:"playbackRate",get:function(){return this.__playbackRate},set:function(t){return(t=parseFloat(t)||1)<=0&&(t=1),this.__playbackRate!==t&&(this.__playbackRate=t),t}},{key:"easing",get:function(){return this.__easing},set:function(t){this.__easing=t}},{key:"startTime",get:function(){return this.__startTime}},{key:"currentTime",get:function(){return this.__currentTime},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__currentTime!==t&&(this.__currentTime=t),t}},{key:"pending",get:function(){return"running"!==this.__playState}},{key:"finished",get:function(){return"finished"===this.__playState}},{key:"playState",get:function(){return this.__playState}},{key:"playCount",get:function(){return this.__playCount},set:function(t){return t=Math.max(0,parseInt(t)||0),this.__playCount!==t&&(this.__playCount=t),t}},{key:"areaStart",get:function(){return this.__areaStart},set:function(t){return t=Math.max(0,parseInt(t)||0),this.__areaStart!==t&&(this.__areaStart=t),t}},{key:"areaDuration",get:function(){return this.__areaDuration},set:function(t){return t=Math.max(0,parseInt(t)||0),this.__areaDuration!==t&&(this.__areaDuration=t),t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}},{key:"animating",get:function(){var t=this.__playState;return"idle"!==t&&("finished"!==t||this.__stayEnd||this.__stayBegin)}}],[{key:"parse",value:function(t,e,r,i){for(var a=function(e,r){var a=t[e];if(a.hasOwnProperty("offset")){if(a.offset=parseFloat(a.offset)||0,a.offset=Math.max(0,a.offset),a.offset=Math.min(1,a.offset),isNaN(a.offset)||a.offset<0||a.offset>1)return t.splice(e,1),e--,r--,n=e,o=r,"continue";if(a.offset<=-1)return t.splice(e,1),e--,r--,n=e,o=r,"continue"}Object.keys(a).forEach((function(t){Hr.hasOwnProperty(t)&&Hr.toFull(a,t)})),Object.keys(a).forEach((function(t){"easing"===t||"offset"===t||Sa.isValid(i&&i.tagName,t)||delete a[t]})),n=e,o=r},n=0,o=t.length;n<o;n++)a(n,o);if(1===t.length)if(t[0]=Ku(t[0]),1===t[0].offset)t.unshift({offset:0});else{var s=Ku(t[0]);s.offset=1,t.push(s)}else t.forEach((function(e,r){t[r]=Ku(e)}));var l=t[0];l.hasOwnProperty("offset")&&l.offset>0?(l={offset:0},t.unshift(l)):l.offset=0;var h=t[t.length-1];h.hasOwnProperty("offset")&&h.offset<1?(h={offset:1},t.push(h)):h.offset=1;for(var _=1,u=t.length;_<u;_++){var f=t[_];if(!f.hasOwnProperty("offset")){for(var c=void 0,v=_+1;v<u&&!(c=t[v]).hasOwnProperty("offset");v++);var y=v-_+1;f=t[_-1];for(var d=(c.offset-f.offset)/y,p=_;p<v;p++){t[p].offset=f.offset+d*(p+1-_)}_=v}}for(var x=[],g=0,m=t.length;g<m;g++){var b=kf(t[g],e,r);b.index=g,x[g]=b}return x}},{key:"unify",value:function(t,e){var r={},i=[];return t.forEach((function(t){var e=t.style;Object.keys(e).forEach((function(t){void 0===e[t]||r.hasOwnProperty(t)||(r[t]=!0,Qu.hasOwnProperty(t)||(t=parseInt(t)),t===G_&&(r.hasOwnProperty(g_)||i.push(g_),r.hasOwnProperty(m_)||i.push(m_),r[g_]=r[m_]=!0),i.push(t))}))})),t.forEach((function(t){var r=t.style;i.forEach((function(t){r.hasOwnProperty(t)&&!Yu(r[t])||(Qu.hasOwnProperty(t)?e&&(r[t]=Ku(e.getProps(t))):t===g_&&r.hasOwnProperty(G_)?r[t]=Ku(r[G_][0]):t===m_&&r.hasOwnProperty(G_)?r[t]=Ku(r[G_][1]):e&&(r[t]=qu(e.__currentStyle,[t])[t]))}))})),i}},{key:"inherit",value:function(t,e,r){var i=r&&r.__computedStyle;t.forEach((function(t){var a=t.style;e.forEach((function(t){var e=a[t];if(!Yu(e))if(t===O_){if(r){var n=r.__outerWidth,o=r.__outerHeight,s=fs.calMatrix(e,n,o,r.__root);a[t]=[{k:z_,v:s}]}}else e.u===Iu&&i&&(t===L_||t===W_?a[t]={v:Y.rgba2int(i[t]),u:Ou}:ff(t)?a[t]={v:i[t],u:Cu}:t===B_?a[t]={v:i[t],u:Bu}:t!==D_&&t!==P_&&t!==N_&&t!==Y_||(a[t]={v:i[t],u:Lu}))}))}))}},{key:"calTransition",value:function(t,e,r){var i=t[0];i.clone=qu(i.style,e);for(var a=1,n=t.length;a<n;a++){var o=t[a];o.clone=qu(o.style,e),i=Of(i,o,e,r)}}},{key:"binarySearch",value:function(t,e,r,i){for(;t<e;){if(t===e-1)return i[e].time<=r?e:t;var a=t+(e-t>>1),n=i[a];if(n.time===r)return a;n.time>r?e=Math.max(a-1,t):t=Math.min(a,e)}return t}},{key:"calIntermediateStyle",value:function(t,e,r,i){var a=t.style,n=t.transition,o=t.timingFunction;if(o&&o!==Zu&&(e=o(e)),!i&&t.lastPercent===e)return{trans:[],fixed:[]};t.lastPercent=e;for(var s=r.__currentStyle,l=t.trans,h=[],_=r.__currentProps,u=function(i,a){var o=n[i],l=o.k,h=o.v,u=o.st,f=o.cl,c=o.fn;if(c)u!==s[l]&&(s[l]=u),c(l,h,e,u,f,t,s);else if(Qu.hasOwnProperty(l)){var v=r.tagName;if(Qu[l][v]&&Uu(Qu[l][v].calIncrease)){var y=Qu[l][v].calIncrease;u=r.isMulti?u.map((function(t,r){return y(t,h[r],e)})):y(u,h,e)}else if(r.isMulti)if("points"===l||"controls"===l)for(var d=0,p=Math.min(u.length,h.length);d<p;d++){var x=u[d],g=h[d],m=f[d];if(!Yu(x)&&!Yu(g))for(var b=0,A=Math.min(x.length,g.length);b<A;b++){var E=x[b],M=g[b];if(!Yu(E)&&!Yu(M))for(var w=0,T=Math.min(E.length,M.length);w<T;w++)Yu(E[w])||Yu(M[w])||(E[w]=m[b][w]+M[w]*e)}}else"controlA"===l||"controlB"===l?h.forEach((function(t,r){var i=u[r];Yu(t[0])||Yu(i[0])||(i[0]=f[r][0]+t[0]*e),Yu(t[1])||Yu(i[1])||(i[1]=f[r][1]+t[1]*e)})):h.forEach((function(t,r){Yu(t)||Yu(u[r])||(u[r]=f[r]+t*e)}));else if("points"===l||"controls"===l)for(var S=0,R=Math.min(u.length,h.length);S<R;S++){var k=u[S],C=h[S];if(!Yu(k)&&!Yu(C))for(var F=0,I=Math.min(k.length,C.length);F<I;F++)Yu(k[F])||Yu(C[F])||(k[F]=f[S][F]+C[F]*e)}else"controlA"===l||"controlB"===l?(Yu(u[0])||Yu(h[0])||(u[0]=f[0]+h[0]*e),Yu(u[1])||Yu(h[1])||(u[1]=f[1]+h[1]*e)):Yu(u)||Yu(h)||(u=f+h*e);_[l]=u}},f=0,c=n.length;f<c;f++)u(f);if(i)for(var v=t.fixed,y=0,d=v.length;y<d;y++){var p=v[y],x=Qu.hasOwnProperty(p);$u(p,a[p],x?_[p]:s[p],r)||(Qu.hasOwnProperty(p)?_[p]=a[p]:s[p]=a[p],h.push(p))}return{trans:l,fixed:h}}}]),e}(ih),Wf=Y.int2rgba,Yf=Fe.canvasPolygon,Uf=Fe.svgPolygon;var Xf={renderBoxShadow:function(t,e,r,i,a,n,o,s,l,h){var _=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;a+=_,n+=u,o+=_,s+=u;var f=c(i,6),v=f[0],y=f[1],d=f[2],p=f[3],g=f[4],m=f[5],b=Wf(g),A=2*Math.abs(d)+2*Math.abs(p)+2*Math.abs(v)+2*Math.abs(y),E=[[a,n],[o,n],[o,s],[a,s],[a,n]],M=[[a-A,n-A],[a-A,s+A],[o+A,s+A],[o+A,n-A],[a-A,n-A]];if(g[3]>0)if(e===x.CANVAS){if(r.save(),r.beginPath(),"inset"===m){var w=a+v+p,T=n+y+p,S=o+v-p,R=s+y-p,k=[[w,T],[S,T],[S,R],[w,R]],C=Se.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[k[0][0],k[0][1],k[2][0],k[2][1]]);if(!C)return;C=[[C[0],C[1]],[C[2],C[1]],[C[2],C[3]],[C[0],C[3]],[C[0],C[1]]],p?(Yf(r,C),Yf(r,E.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==b&&(r.fillStyle=b),Yf(r,E),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),Yf(r,C),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=b,r.shadowBlur=d,Yf(r,[[w,T],[S,T],[S,R],[a-A,R],[a-A,s+A],[o+A,s+A],[o+A,n-A],[a-A,n-A],[a-A,R],[w,R],[w,T]])):(Yf(r,E),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=v,r.shadowOffsetY=y,r.shadowColor=b,r.shadowBlur=d,Yf(r,[[a,n],[o,n],[o,s],[a-A,s],[a-A,s+A],[o+A,s+A],[o+A,n-A],[a-A,n-A],[a-A,s],[a,s],[a,n]]))}else{var F=a+v-p,I=n+y-p,O=o+v+p,L=s+y+p,B=[[F,I],[O,I],[O,L],[F,L]],D=Se.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[B[0][0],B[0][1],B[2][0],B[2][1]]);p?(Yf(r,E),Yf(r,B.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==b&&(r.fillStyle=b),Yf(r,B),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),D&&Yf(r,[[D[0],D[1]],[D[2],D[1]],[D[2],D[3]],[D[0],D[3]],[D[0],D[1]]].reverse()),Yf(r,E),Yf(r,B),Yf(r,M),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=b,r.shadowBlur=d,Yf(r,B)):(Yf(r,E),Yf(r,M),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=v,r.shadowOffsetY=y,r.shadowColor=b,r.shadowBlur=d,Yf(r,E))}r.fill(),r.closePath(),r.restore()}else if(e===x.SVG){var P=Ca.outerSize(d);if("inset"===m){var N=a+v+p,z=n+y+p,H=o+v-p,G=s+y-p,W=[[N,z],[H,z],[H,G],[N,G]],Y=Se.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[W[0][0],W[0][1],W[2][0],W[2][1]]);if(!Y)return;if(Y=[[Y[0],Y[1]],[Y[2],Y[1]],[Y[2],Y[3]],[Y[0],Y[3]],[Y[0],Y[1]]],p){var U={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",b]]}]};t.__cacheDefs.push(U);var X=r.add(U),V={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uf(Y)+Uf(E.slice(0).reverse())],["fill","#FFF"]]}]},K=r.add(V);t.__cacheDefs.push(V),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uf(E)],["fill",b],["clip-path","url(#"+K+")"]]}),U={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uf(Y)],["fill","#FFF"]]}]},K=r.add(U),t.__cacheDefs.push(U),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uf([[N,z],[H,z],[H,G],[a-A,G],[a-A,s+A],[o+A,s+A],[o+A,n-A],[a-A,n-A],[a-A,G],[N,G],[N,z]])],["fill","#FFF"],["filter","url(#"+X+")"],["clip-path","url(#"+K+")"]]})}else{var j={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",v],["dy",y],["stdDeviation",.5*d],["flood-color",b]]}]},Z=r.add(j);t.__cacheDefs.push(j),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uf(E)],["fill","#FFF"]]}]};var q=r.add(j);t.__cacheDefs.push(j),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uf([[a,n],[o,n],[o,s],[a-A,s],[a-A,s+A],[o+A,s+A],[o+A,n-A],[a-A,n-A],[a-A,s],[a,s],[a,n]])],["fill","#FFF"],["filter","url(#"+Z+")"],["clip-path","url(#"+q+")"]]})}}else{var $=a+v-p,J=n+y-p,Q=o+v+p,tt=s+y+p,et=[[$,J],[Q,J],[Q,tt],[$,tt]],rt=Se.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[et[0][0],et[0][1],et[2][0],et[2][1]]);if(p){var it={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",b]]}]},at=r.add(it);t.__cacheDefs.push(it),it={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uf(E)+Uf(et.slice(0).reverse())],["fill","#FFF"]]}]};var nt=r.add(it);t.__cacheDefs.push(it),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uf(et)],["fill",b],["clip-path","url(#"+nt+")"]]}),it={tagName:"clipPath",children:[{tagName:"path",props:[["d",(rt?Uf([[rt[0],rt[1]],[rt[2],rt[1]],[rt[2],rt[3]],[rt[0],rt[3]],[rt[0],rt[1]]].reverse()):"")+Uf(E)+Uf(et)+Uf(M)],["fill","#FFF"]]}]},nt=r.add(it),t.__cacheDefs.push(it),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uf(et)],["fill","#FFF"],["filter","url(#"+at+")"],["clip-path","url(#"+nt+")"]]})}else{var ot={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",v],["dy",y],["stdDeviation",.5*d],["flood-color",b]]}]},st=r.add(ot);t.__cacheDefs.push(ot),ot={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uf(E)+Uf(M)],["fill","#FFF"]]}]};var lt=r.add(ot);t.__cacheDefs.push(ot),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uf(E)],["fill","#FFF"],["filter","url(#"+st+")"],["clip-path","url(#"+lt+")"]]})}}}}},Vf={};var Kf=function(t){if(t)return Vf.hasOwnProperty(t)?Vf[t]:Vf[t]=t.replace(/[A-Z]/,(function(t){return"-"+t.toLowerCase()}))},jf=function(t){return"normal"!==t&&("multiply"===t||"screen"===t||"overlay"===t||"darken"===t||"lighten"===t||"colorDodge"===t||"color-dodge"===t||"colorBurn"===t||"color-burn"===t||"hardLight"===t||"hard-light"===t||"softLight"===t||"soft-light"===t||"difference"===t||"exclusion"===t||"hue"===t||"saturation"===t||"color"===t||"luminosity"===t)},Zf=Fe.svgPolygon,qf=x.CANVAS,$f=x.SVG,Jf=x.WEBGL,Qf=mo.normalize,tc=mo.equalStyle,ec=fe.STYLE_KEY,rc=fe.STYLE_RV_KEY,ic=fe.style2Upper,ac=fe.STYLE_KEY,nc=ac.BORDER_TOP_LEFT_RADIUS,oc=ac.BORDER_TOP_RIGHT_RADIUS,sc=ac.BORDER_BOTTOM_LEFT_RADIUS,lc=ac.BORDER_BOTTOM_RIGHT_RADIUS,hc=ac.PADDING_LEFT,_c=ac.PADDING_RIGHT,uc=ac.PADDING_TOP,fc=ac.PADDING_BOTTOM,cc=ac.MARGIN_LEFT,vc=ac.MARGIN_TOP,yc=ac.MARGIN_BOTTOM,dc=ac.MARGIN_RIGHT,pc=ac.BORDER_LEFT_WIDTH,xc=ac.BORDER_TOP_WIDTH,gc=ac.BORDER_BOTTOM_WIDTH,mc=ac.BORDER_RIGHT_WIDTH,bc=ac.TOP,Ac=ac.RIGHT,Ec=ac.BOTTOM,Mc=ac.LEFT,wc=ac.POSITION,Tc=ac.DISPLAY,Sc=ac.WIDTH,Rc=ac.HEIGHT,kc=ac.MATRIX,Cc=ac.TRANSLATE_X,Fc=ac.TRANSLATE_Y,Ic=ac.TRANSLATE_Z,Oc=ac.TRANSFORM,Lc=ac.SCALE_X,Bc=ac.SCALE_Y,Dc=ac.SCALE_Z,Pc=ac.ROTATE_X,Nc=ac.ROTATE_Y,zc=ac.ROTATE_Z,Hc=ac.SKEW_X,Gc=ac.SKEW_Y,Wc=ac.PERSPECTIVE,Yc=ac.PERSPECTIVE_ORIGIN,Uc=ac.ROTATE_3D,Xc=ac.TRANSFORM_ORIGIN,Vc=ac.BACKGROUND_POSITION_X,Kc=ac.BACKGROUND_POSITION_Y,jc=ac.BACKGROUND_SIZE,Zc=ac.BACKGROUND_COLOR,qc=ac.BACKGROUND_IMAGE,$c=ac.BACKGROUND_REPEAT,Jc=ac.BOX_SHADOW,Qc=ac.OPACITY,tv=ac.Z_INDEX,ev=ac.BORDER_TOP_STYLE,rv=ac.BORDER_RIGHT_STYLE,iv=ac.BORDER_BOTTOM_STYLE,av=ac.BORDER_LEFT_STYLE,nv=ac.FILTER,ov=ac.OVERFLOW,sv=ac.MIX_BLEND_MODE,lv=ac.TEXT_OVERFLOW,hv=ac.BORDER_TOP_COLOR,_v=ac.BORDER_BOTTOM_COLOR,uv=ac.BORDER_LEFT_COLOR,fv=ac.BORDER_RIGHT_COLOR,cv=ac.FONT_STYLE,vv=ac.COLOR,yv=ac.VISIBILITY,dv=ac.POINTER_EVENTS,pv=ac.BORDER_TOP,xv=ac.BORDER_RIGHT,gv=ac.BORDER_BOTTOM,mv=ac.BORDER_LEFT,bv=ac.BACKGROUND_CLIP,Av=ac.FONT_SIZE,Ev=ac.FONT_FAMILY,Mv=ac.LINE_HEIGHT,wv=ac.TEXT_STROKE_COLOR,Tv=ac.TEXT_STROKE_WIDTH,Sv=ac.TEXT_STROKE_OVER,Rv=ac.FONT_WEIGHT,kv=ac.FLEX_DIRECTION,Cv=ac.JUSTIFY_CONTENT,Fv=ac.ALIGN_ITEMS,Iv=ac.ALIGN_SELF,Ov=ac.FLEX_GROW,Lv=ac.FLEX_SHRINK,Bv=ac.LINE_CLAMP,Dv=ac.ORDER,Pv=ac.FLEX_WRAP,Nv=ac.ALIGN_CONTENT,zv=ac.TEXT_ALIGN,Hv=ac.LETTER_SPACING,Gv=ac.WHITE_SPACE,Wv=ac.WRITING_MODE,Yv=ac.TRANSFORM_STYLE,Uv=ac.BACKFACE_VISIBILITY,Xv=ac.BOX_SIZING,Vv=ac.FONT_SIZE_SHRINK,Kv=g.AUTO,jv=g.PX,Zv=g.PERCENT,qv=g.INHERIT,$v=g.NUMBER,Jv=g.RGBA,Qv=g.STRING,ty=g.REM,ey=g.VW,ry=g.VH,iy=g.VMAX,ay=g.VMIN,ny=g.DEG,oy=g.GRADIENT,sy=Y.int2rgba,ly=Y.rgba2int,hy=Y.joinArr,_y=Y.isNil,uy=Y.isFunction,fy=mo.calRelative,cy=mo.calNormalLineHeight,vy=mo.calFontFamily,yy=mo.spreadBoxShadow,dy=mo.spreadFilter,py=Sa.GEOM,xy=Kf,gy=jf,my=E.point2d,by=E.toE,Ay=E.identity,Ey=E.assignMatrix,My=E.multiply,wy=E.multiplyRotateX,Ty=E.multiplyRotateY,Sy=E.multiplyRotateZ,Ry=E.multiplySkewX,ky=E.multiplySkewY,Cy=E.multiplyScaleX,Fy=E.multiplyScaleY,Iy=E.multiplyScaleZ,Oy=vl.TRANSFORM,Ly=vl.REFLOW,By=vl.REPAINT,Dy=vl.TRANSLATE_X,Py=vl.TRANSLATE_Y,Ny=vl.TRANSLATE_Z,zy=vl.ROTATE_Z,Hy=vl.SCALE_X,Gy=vl.SCALE_Y,Wy=vl.SCALE_Z,Yy=vl.SCALE,Uy=vl.TRANSFORM_ALL,Xy=vl.CACHE,Vy=vl.MASK,Ky=Se.d2r,jy=fs.calRotateX,Zy=fs.calRotateY,qy=fs.calRotateZ,$y=fs.calRotate3d;function Jy(t){for(var e=0,r=t.flowChildren,i=r.length,a=0;a<i;a++){var n=r[a];if(!(n instanceof td||n instanceof lh&&n.shadowRoot instanceof td))break;if(n.flowChildren&&n.flowChildren.length){e+=Jy(n);break}n.__isInline&&(e+=n.outerWidth)}return e}function Qy(t){for(var e=0,r=t.flowChildren,i=r.length-1;i>=0;i--){var a=r[i];if(!(a instanceof td||a instanceof lh&&a.shadowRoot instanceof td))break;if(a.flowChildren&&a.flowChildren.length){e+=Qy(a);break}e+=a.outerWidth}return e}var td=function(t){function r(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=t.call(this)||this,Array.isArray(i)?r.props=Y.arr2hash(i):r.props=i,r.__tagName=e,r.__style=r.props.style||{},r.__currentStyle=[],r.__computedStyle=[],r.__listener={},Object.keys(r.props).forEach((function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.addEventListener(t,e))})),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle=[],r.__cacheDefs=[];var a=r.__clip=!!r.props.clip;return r.__mask=a||!!r.props.mask,r.__refreshLevel=Ly,r.__limitCache=!1,r.__isInline=!1,r.__hasContent=!1,r.__opacity=1,r.__matrix=Ay(),r.__matrixEvent=Ay(),r.__perspectiveMatrix=Ay(),r.__selfPerspectiveMatrix=Ay(),r.__frameAnimateList=[],r.__contentBoxList=[],r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r.__cacheTotal=r.__cacheFilter=r.__cacheMask=null,r.__layoutData=null,r.__hasComputeReflow=!1,r.__parentLineBox=null,r.__fontRegister={},r}return s(r,t),n(r,[{key:"__structure",value:function(t,e){var i=f(l(r.prototype),"__structure",this).call(this,t,e);this.__hasMask&&(i.hasMask=this.__hasMask);var a=this.__wasmNode;return a&&(a.lv=t),i}},{key:"__mp",value:function(t,e,r){var i=this;["Top","Right","Bottom","Left"].forEach((function(a){var n=ec[ic("margin"+a)],o=ec[ic("padding"+a)];e[n]=i.__calSize(t[n],r,!0),e[o]=i.__calSize(t[o],r,!0)}))}},{key:"__calSize",value:function(t,e,r){if(t.u===jv)return t.v;if(t.u===Zv){if(r)return t.v*e*.01}else{if(t.u===ty)return t.v*this.__root.computedStyle[Av];if(t.u===ey)return t.v*this.__root.width*.01;if(t.u===ry)return t.v*this.__root.height*.01;if(t.u===iy)return t.v*Math.max(this.__root.width,this.__root.height)*.01;if(t.u===ay)return t.v*Math.min(this.__root.width,this.__root.height)*.01}return 0}},{key:"__computeReflow",value:function(){var t=this;if(!this.__hasComputeReflow){this.__hasComputeReflow=!0;var e=this.__currentStyle,r=this.__computedStyle,i=this.__domParent,a=!i,n=i&&i.__computedStyle;[Av,Ev,Rv,Wv,Vv].forEach((function(i){var o=e[i];if(i===Ev)if(o.u===qv)r[i]=a?Kt.INHERIT[rc[i]]:n[i];else{r[i]=o.v;for(var s=o.v.split(/\s*,\s*/),l=0,h=s.length;l<h;l++){var _=s[l].replace(/^['"]/,"").replace(/['"]$/,"");if(Nt.hasRegister(_)&&(Nt.hasLoaded(_)||lt.checkSupportFontFamily(_)))break;t.__fontRegister[_]=!0,Nt.onRegister(_,t)}}else o.u===qv?r[i]=a?Kt.INHERIT[rc[i]]:n[i]:o.u===Zv?r[i]=a?Kt.INHERIT[rc[i]]:t.root.computedStyle[Av]*o.v*.01:o.u===ty?r[i]=a?Kt.INHERIT[rc[i]]:t.root.computedStyle[Av]*o.v:o.u===ey?r[i]=a?Kt.INHERIT[rc[i]]:.01*t.root.width*o.v:o.u===ry?r[i]=a?Kt.INHERIT[rc[i]]:.01*t.root.height*o.v:o.u===iy?r[i]=a?Kt.INHERIT[rc[i]]:.01*Math.max(t.root.width,t.root.height)*o.v:o.u===ay?r[i]=a?Kt.INHERIT[rc[i]]:.01*Math.min(t.root.width,t.root.height)*o.v:r[i]=o.v})),[xc,mc,gc,pc].forEach((function(i){var a=e[i];r[i]=t.__calSize(a,0,!1)})),[wc,Tc,Xv,kv,Cv,Fv,Iv,Ov,Lv,Bv,Dv,Pv,Nv,ov,lv].forEach((function(t){r[t]=e[t]})),n&&r[Wv]!==n[Wv]&&"inline"===r[Tc]&&(r[Tc]="inlineBlock"),("absolute"===r[wc]||n&&"flex"===n[Tc])&&-1===["block","flex"].indexOf(r[Tc])&&(r[Tc]="block");var o=e[zv];o.u===qv?r[zv]=a?"left":n[zv]:r[zv]=o.v;var s=r[Av],l=e[Mv];if(l.u===qv)if(a)r[Mv]=cy(r);else{for(var h,_=i;_&&(h=_.currentStyle[Mv]).u===qv;)_=_.domParent;[Kv,qv].indexOf(h.u)>-1?r[Mv]=cy(r):h.u===$v?r[Mv]=Math.max(h.v,0)*s:r[Mv]=n[Mv]}else if(l.u===$v)r[Mv]=Math.max(l.v,0)*s||cy(r);else{var u=Math.max(this.__calSize(l,s,!0),0);r[Mv]=u||cy(r)}var f=e[Hv];f.u===qv?r[Hv]=a?0:n[Hv]:r[Hv]=this.__calSize(f,s,!0);var c=e[Gv];c.u===qv?r[Gv]=a?"normal":n[Gv]:r[Gv]=c.v;var v=e[Sc],y=e[Rc];if(this.__width=this.__height=0,v.u!==Kv&&(this.__width=r[Sc]=this.__calSize(v,a?this.__width:i.__width,!0)),y.u!==Kv)this.__height=r[Rc]=this.__calSize(y,a?this.__height:i.__height,!0);else if(_=this.__domParent){var d=_.__currentStyle,p=e[Iv];"flex"===d[Tc]&&_.__height&&d[kv].indexOf("row")>-1&&("stretch"===p||"stretch"===d[Fv]&&"auto"===p)&&(this.__height=_.__height)}}}},{key:"__emitFontRegister",value:function(t){var e=this,r=e.__fontRegister;if(!e.__isDestroyed){delete r[t];var i=e.root,a=e.currentStyle;if(i){var n=a[Ev];if(n.u!==qv)for(var o=n.v.split(/\s*,\s*/),s=0,l=o.length;s<l;s++){var h=o[s].replace(/^['"]/,"").replace(/['"]$/,"");if(h===t)return void(Nt.hasRegister(h)&&i.__addUpdate(e,null,Ly,!1,!1,!1,!1,!1,null));if(Nt.hasRegister(h)&&(Nt.hasLoaded(h)||lt.checkSupportFontFamily(h)))return}}}}},{key:"__ioSize",value:function(t,e){var r=this.__computedStyle;_y(t)||(this.__width=r[Sc]=t,this.__clientWidth=t+=r[hc]+r[_c],this.__offsetWidth=t+=r[pc]+r[mc],this.__outerWidth=t+r[cc]+r[dc]),_y(e)||(this.__height=r[Rc]=e,this.__clientHeight=e+=r[uc]+r[fc],this.__offsetHeight=e+=r[xc]+r[gc],this.__outerHeight=e+r[vc]+r[yc])}},{key:"__addMBP",value:function(t,e,r,i,a,n){var o=r[cc],s=r[vc],l=r[dc],h=r[yc],_=r[hc],u=r[uc],f=r[_c],c=r[fc],v=r[Xv],y=i[xc],d=i[mc],p=i[gc],x=i[pc];if(t){var g=this.__calSize(o,e,n)+this.__calSize(l,e,n),m=0;(n||"contentBox"===v)&&(m=this.__calSize(_,e,n)+this.__calSize(f,e,n)+x+d),a=a.map((function(t){return t+g+m}))}else{var b=this.__calSize(s,e,n)+this.__calSize(h,e,n),A=0;(n||"contentBox"===v)&&(A=this.__calSize(u,e,n)+this.__calSize(c,e,n)+y+p),a=a.map((function(t){return t+b+A}))}return a}},{key:"__layout",value:function(t,e,r,i){this.__layoutFlow(t,e,r,i)}},{key:"__layoutFlow",value:function(t,e,r,i){this.__computeReflow();var a=this.__isDestroyed,n=this.__currentStyle,o=this.__computedStyle;this.__ellipsis&&(this.__ellipsis=null),this.__parentLineBox=null,this.__isIbFull=this.__isUprightIbFull=!1;var s=o[Tc],l=o[wc];if(this.__layoutData={x:t.x,y:t.y,w:t.w,h:t.h,lx:t.lx,ly:t.ly,isUpright:t.isUpright,container:t.container},!e&&!r&&!i){this.clearCache(),this.__cacheStyle=[],this.__refreshLevel=Ly,this.__limitCache=!1,this.__isInline=!1;var h=this.next;if(!this.__mask&&h&&h.__mask){for(var _=0;h&&h.__mask;)_++,h=h.next;this.__hasMask=_}}if(a||"none"===s)return this.__x=t.x,this.__y=t.y,this.__layoutNone(),void(this.__hasComputeReflow=!1);"absolute"!==l&&this.__mp(n,o,t.w);var u=t.lineClampCount||0;if("flex"===s?(t.lineClampCount=0,this.__layoutFlex(t,e,r,i)):"inlineBlock"===s?(t.lineClampCount=0,this.__layoutInline(t,e,r,i)):"inline"===s?u=this.__layoutInline(t,e,r,i,!0):(t.lineClampCount=0,this.__layoutBlock(t,e,r,i)),!e&&!r&&!i){var f=this.__x,c=this.__y;if(this.__isInline||(f=this.__x1=f+o[cc],f=this.__x2=f+o[pc],f=this.__x3=f+o[hc],f=this.__x4=f+this.__width,f=this.__x5=f+o[_c],this.__x6=f+o[mc],c=this.__y1=c+o[vc],c=this.__y2=c+o[xc],c=this.__y3=c+o[uc],c=this.__y4=c+this.__height,c=this.__y5=c+o[fc],this.__y6=c+o[gc]),"relative"===l){var v=n[bc],y=n[Ac],d=n[Ec],p=n[Mc],x=this.parent;if(v.u!==Kv){var g=fy(n,bc,v,x);if(g&&(this.__offsetY(g,!0,null),this.__isInline)){var m,b=this.__contentBoxList;if(Array.isArray(b))b.forEach((function(t){var e=t.__parentLineBox;e&&e!==m&&(e.__oy+=g),m=e}))}o[bc]=g,o[Ec]="auto"}else if(d.u!==Kv){var A=fy(n,Ec,d,x);if(A&&(this.__offsetY(-A,!0,null),this.__isInline)){var E,M=this.__contentBoxList;if(Array.isArray(M))M.forEach((function(t){var e=t.__parentLineBox;e&&e!==E&&(e.__oy-=A),E=e}))}o[Ec]=A,o[bc]="auto"}else o[bc]=o[Ec]="auto";if(p.u!==Kv){var w=fy(n,Mc,p,x,!0);w&&this.__offsetX(w,!0,null),o[Mc]=w,o[Ac]="auto"}else if(y.u!==Kv){var T=fy(n,Ac,y,x,!0);T&&this.__offsetX(-T,!0,null),o[Ac]=T,o[Mc]="auto"}else o[Mc]=o[Ac]="auto"}else"absolute"!==l&&(o[bc]=o[Ec]=o[Mc]=o[Ac]="auto");o[Sc]=this.__width,o[Rc]=this.__height,"absolute"!==l&&this.__animateRecords&&this.__root.__addAr(this),this.__hasComputeReflow=!1}return u}},{key:"__layoutStyle",value:function(){var t=this.__currentStyle,e=this.__computedStyle,r=this.__cacheStyle;this.__calStyle(vl.REFLOW,t,e,r),this.__calPerspective(t,e,r);var i=this.__wasmNode;if(i){var a=this.__currentStyle;i.set_style(this.__x1,this.__y1,this.__offsetWidth,this.__offsetHeight,a[Cc].v,a[Fc].v,a[Ic].v,a[Pc].v,a[Nc].v,a[zc].v,a[Uc][0],a[Uc][1],a[Uc][2],a[Uc][3].v,a[Lc].v,a[Bc].v,a[Dc].v,a[Hc].v,a[Gc].v,a[Qc],a[Xc][0].v,a[Xc][1].v,a[Cc].u,a[Fc].u,a[Ic].u,a[Xc][0].u,a[Xc][1].u)}}},{key:"__execAr",value:function(){var t=this.__animateRecords;if(t){this.__animateRecords=null,t.list.forEach((function(t){t.target.vd instanceof r&&(t.target=t.target.vd)}));var e=t.controller||this.__root.animateController;t.options&&!1===t.options.autoPlay?(e.__records2=e.__records2.concat(t.list),e.init(e.__records2,e.list2)):(e.__records=e.__records.concat(t.list),e.__playAuto())}}},{key:"__layoutNone",value:function(){this.__computeReflow(),this.__computedStyle[Tc]="none",this.__reset0(),this.__hasComputeReflow=!1}},{key:"__reset0",value:function(){var t=this.__computedStyle;t[vc]=t[dc]=t[yc]=t[cc]=t[xc]=t[mc]=t[gc]=t[pc]=t[uc]=t[_c]=t[fc]=t[hc]=t[Sc]=t[Rc]=this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=0}},{key:"__preLayout",value:function(t,e){var r=t.x,i=t.y,a=t.w,n=t.h,o=t.w2,s=t.h2,l=t.w3,h=t.h3,_=t.lx,u=t.ly,f=t.lineBoxManager,c=t.endSpace,v=void 0===c?0:c,y=t.isUpright,d=t.container;this.__x=r,this.__y=i;var p,x,g=this.__currentStyle,m=this.__computedStyle,b=g[Sc],A=g[Rc],E=m[wc],M=m[xc],w=m[mc],T=m[gc],S=m[pc],R=m[vc],k=m[dc],C=m[yc],F=m[cc],I=m[uc],O=m[_c],L=m[fc],B=m[hc],D=m[Wv],P=m[Xv],N=0===D.indexOf("vertical");if(void 0!==o?(p=!0,a=o):void 0!==l?(p=!0,a=l):b.u===Kv||e||(p=!0,"absolute"===E&&b.u===Zv?a=this.__calSize(b,d.__clientWidth,!0):(a=this.__calSize(b,a,!0),"borderBox"===P&&(a-=S+w+B+O))),void 0!==s)x=!0,n=s;else if(void 0!==h)x=!0,n=h;else if(A.u!==Kv&&!e)if("absolute"===E&&A.u===Zv)n=this.__calSize(A,d.__clientHeight,!0);else{var z=this.__domParent;A.u===Zv?z.height&&(x=!0,n=this.__calSize(A,z.height||0,!0)):(x=!0,n=this.__calSize(A,n,!0)),"borderBox"===P&&(n-=M+T+I+L)}e?N?i+=M+R+I:r+=S+F+B:(r+=S+F+B,i+=M+R+I),t.x=r,t.y=i;var H=0;return e?H=N?L+T+C:O+w+k:(b.u!==Kv&&void 0===l||(a-=S+w+F+k+B+O),A.u!==Kv&&void 0===h||(n-=M+T+R+C+I+L)),{fixedWidth:p,fixedHeight:x,x:r,y:i,w:a,h:n,lx:_,ly:u,lineBoxManager:f,endSpace:v,selfEndSpace:H,isParentVertical:y,isUpright:N}}},{key:"__marginAuto",value:function(t,e,r){var i=t[wc],a=t[Tc],n=t[vc],o=t[yc],s=t[cc],l=t[dc],h=t[Sc],_=t[Rc];if("absolute"!==i&&("block"===a||"flex"===a))if(r){if((_.u!==Kv||this.isReplaced)&&n.u===Kv&&o.u===Kv){var u=this.outerHeight;u<e.h&&this.__offsetY(.5*(e.h-u),!0,null)}}else if((h.u!==Kv||this.isReplaced)&&s.u===Kv&&l.u===Kv){var f=this.outerWidth;f<e.w&&this.__offsetX(.5*(e.w-f),!0,null)}}},{key:"__calMatrix",value:function(t,e,r,i,a){var n=this,o=this.__x1,s=this.__y1,l=this.__offsetWidth,h=this.__offsetHeight;if(this.__isInline)return r[Xc]=[o,s],i[kc]=by(this.__matrix);var _=this.__matrix;if(_y(a)&&_&&t<Ly&&!(t&Oy)&&(t&Hy&&!r[Lc]||t&Gy&&!r[Bc]||t&Wy&&!r[Dc]||t&zy&&(r[Pc]||r[Nc]||r[Hc]||r[Gc])||(a=!0)),a&&_){var u=r[Oc];if(t&Dy){var f=e[Cc],c=(f=f?f.u===jv?f.v:this.__calSize(f,this.__offsetWidth,!0):0)-r[Cc];r[Cc]=f,u[12]+=c,_[12]+=c}if(t&Py){var v=e[Fc],y=(v=v?v.u===jv?v.v:this.__calSize(v,this.__offsetHeight,!0):0)-r[Fc];r[Fc]=v,u[13]+=y,_[13]+=y}if(t&Ny){var d=e[Ic],p=(d=d?d.u===jv?d.v:this.__calSize(d,this.__offsetWidth,!0):0)-r[Ic];r[Ic]=d,u[14]+=p,_[14]+=p}if(t&zy){var x=e[zc].v;r[zc]=x;var g=Ky(x),m=Math.sin(g),b=Math.cos(g),A=r[Lc],M=r[Bc],w=_[0]=u[0]=b*A,T=_[1]=u[1]=m*A,S=_[4]=u[4]=-m*M,R=_[5]=u[5]=b*M,k=r[Xc],C=k[0],F=k[1];C+=o,F+=s,_[12]=u[12]+C-w*C-F*S,_[13]=u[13]+F-T*C-F*R}if(t&Yy){if(t&Hy){if(!r[Lc])return this.__calMatrix(Ly,e,r,i,!1);var I=e[Lc].v,O=I/r[Lc];r[Lc]=I,u[0]*=O,u[1]*=O,u[2]*=O,_[0]*=O,_[1]*=O,_[2]*=O}if(t&Gy){if(!r[Bc])return this.__calMatrix(t,e,r,i,!1);var L=e[Bc].v,B=L/r[Bc];r[Bc]=L,u[4]*=B,u[5]*=B,u[6]*=B,_[4]*=B,_[5]*=B,_[6]*=B}if(t&Wy){if(!r[Dc])return this.__calMatrix(t,e,r,i,!1);var D=e[Dc].v,P=D/r[Dc];r[Dc]=D,u[8]*=P,u[9]*=P,u[10]*=P,_[8]*=P,_[9]*=P,_[10]*=P}var N=r[Xc],z=N[0],H=N[1];z+=o,H+=s,_[12]=u[12]+z-u[0]*z-u[4]*H,_[13]=u[13]+H-u[1]*z-u[5]*H,_[14]=u[14]-u[2]*z-u[6]*H}}else{if(void 0===i[Xc]&&(i[Xc]=!0,r[Xc]=e[Xc].map((function(t,e){return n.__calSize(t,e?h:l,!0)}))),void 0===i[Oc]||void 0===i[Cc]||void 0===i[Fc]||void 0===i[Ic]||void 0===i[Pc]||void 0===i[Nc]||void 0===i[zc]||void 0===i[Uc]||void 0===i[Lc]||void 0===i[Bc]||void 0===i[Dc]||void 0===i[Hc]||void 0===i[Gc]){i[Oc]=i[Cc]=i[Fc]=i[Ic]=i[Pc]=i[Nc]=i[zc]=i[Lc]=i[Bc]=i[Dc]=i[Hc]=i[Gc]=!0,this.__selfPerspective=0;var G,W=this.__selfPerspectiveMatrix,Y=e[Oc];if(by(W),Y&&Y.length){var U=Y[0];if(U.k===Wc){var X=this.__selfPerspective=this.__calSize(U.v,this.__clientWidth,!0),V=r[Xc];Ey(W,fs.calPerspectiveMatrix(X,V[0]+o,V[1]+s)),G=fs.calMatrix(Y.slice(1),l,h,this.__root)}else G=fs.calMatrix(Y,l,h,this.__root)}else{r[Cc]=0;var K=e[Cc];K&&(K=r[Cc]=this.__calSize(K,this.__offsetWidth,!0))&&((G=G||E.identity())[12]=K),r[Fc]=0,(K=e[Fc])&&(K=r[Fc]=this.__calSize(K,this.__offsetHeight,!0))&&((G=G||E.identity())[13]=K),r[Ic]=0,(K=e[Ic])&&(K=r[Ic]=this.__calSize(K,this.__offsetWidth,!0))&&((G=G||E.identity())[14]=K),r[Pc]=0,(K=e[Pc])&&(K=r[Pc]=K.v)&&(G=(G=G||E.identity())?wy(G,Ky(K)):jy(E.identity(),K)),r[Nc]=0,(K=e[Nc])&&(K=r[Nc]=K.v)&&(G=G?Ty(G,Ky(K)):Zy(E.identity(),K)),r[zc]=0,(K=e[zc])&&(K=r[zc]=K.v)&&(G=G?Sy(G,Ky(K)):qy(E.identity(),K)),r[Uc]=[0,0,0,0],(K=e[Uc])&&((K=r[Uc]=[K[0],K[1],K[2],K[3].v])[0]||K[1]||K[2])&&K[3]&&(G=G?My(G,$y(E.identity(),K)):$y(E.identity(),K)),r[Hc]=0,(K=e[Hc])&&(K=r[Hc]=K.v)&&(G?G=Ry(G,Ky(K)):(G=E.identity())[4]=Math.tan(Ky(K))),r[Gc]=0,(K=e[Gc])&&(K=r[Gc]=K.v)&&(G?G=ky(G,Ky(K)):(G=E.identity())[1]=Math.tan(Ky(K))),r[Lc]=1,(K=e[Lc])&&1!==(K=r[Lc]=K.v)&&(G?G=Cy(G,K):(G=E.identity())[0]=K),r[Bc]=1,(K=e[Bc])&&1!==(K=r[Bc]=K.v)&&(G?G=Fy(G,K):(G=E.identity())[5]=K),r[Dc]=1,(K=e[Dc])&&1!==(K=r[Dc]=K.v)&&(G?G=Iy(G,K):(G=E.identity())[10]=K)}r[Oc]=G||E.identity()}var j=r[Oc],Z=r[Xc],q=fs.calMatrixByOrigin(j,Z[0]+o,Z[1]+s);Ey(this.__matrix,q),_=i[kc]=this.__matrix}return _}},{key:"__calStyle",value:function(t,e,r,i){var a=this,n=this.__x1,o=this.__x2,s=this.__x3,l=this.__x4,h=this.__x5,_=this.__x6,u=this.__y1,f=this.__y2,c=this.__y3,v=this.__y4,y=this.__y5,d=this.__y6;this.__bbox=null;var p=n,x=u,g=_,m=d,b=r[bv]=e[bv];"paddingBox"===b?(p=o,x=f,g=h,m=y):"contentBox"===b&&(p=s,x=c,g=l,m=v);var A=this.__isInline;if(A&&!this.__contentBoxList.length&&(A=!1),[Qc,tv,ev,rv,iv,av,$c,ov,sv,lv,bv,Yv,Uv].forEach((function(t){r[t]=e[t]})),_y(i[nv])&&this.__calFilter(e,r,i),(_y(i[kc])||t&Uy)&&this.__calMatrix(t,e,r,i,!1),_y(i[Vc])){i[Vc]=!0;var E=e[Vc];r[Vc]=(E||[]).map((function(t){return t.u===Zv?t.v+"%":a.__calSize(t,g-p,!0)}))}if(_y(i[Kc])){i[Kc]=!0;var M=e[Kc];r[Kc]=(M||[]).map((function(t){return t.u===Zv?t.v+"%":a.__calSize(t,m-x,!0)}))}if(_y(i[jc])&&(i[jc]=!0,r[jc]=(e[jc]||[]).map((function(t){if(Array.isArray(t))return t.map((function(t,e){return t.u===Kv?-1:t.u===Qv?"contain"===t.v?-2:-3:a.__calSize(t,e?m-x:g-p,!0)}))}))),_y(i[qc])){var w=e[qc];r[qc]=w.map((function(t){return t?t.v:null})),i[qc]=w.map((function(t,e){if(!t)return null;if(t.u===Qv){var r=a.__loadBgi[e]=a.__loadBgi[e]||{},n=lt.IMG[t.v];if(n&&n.state===lt.LOADED)r.url=t.v,r.source=n.source,r.width=n.width,r.height=n.height;else if(r.url!==t.v){r.url=t.v,r.source=null;var o=a,s=a.__root;lt.measureImg(t.v,(function(t){t.success&&t.url===r.url&&!a.__isDestroyed&&(r.source=t.source,r.width=t.width,r.height=t.height,i[qc]=void 0,s.__addUpdate(o,null,By,!1,!1,!1,!1,!1,null))}))}return!0}return!(A||!t.v||t.u!==oy)||void 0}))}_y(i[Jc])&&(i[Jc]=!0,r[Jc]=(e[Jc]||[]).map((function(t){return t.map((function(t,e){return e>3?t:a.__calSize(t,0===e?g-p:m-x,!0)}))}))),[Zc,hv,fv,_v,uv].forEach((function(t){_y(i[t])&&(i[t]=sy(r[t]=e[t].v))})),(_y(i[nc])||_y(i[oc])||_y(i[lc])||_y(i[sc]))&&(i[nc]=i[oc]=i[lc]=i[sc]=!0,A?dr.calBorderRadiusInline(this.__contentBoxList,e,r,this.__root):dr.calBorderRadius(this.__offsetWidth,this.__offsetHeight,e,r,this.__root));var T=r[nc],S=r[oc],R=r[lc],k=r[sc],C=r[xc],F=r[mc],I=r[gc],O=r[pc];["Top","Right","Bottom","Left"].forEach((function(t){var e=ec[ic(t="border"+t)],a=ec[ic(t+"Width")],s=ec[ic(t+"Style")];if(_y(i[a])&&(i[a]=!0,i[e]=void 0),_y(i[s])&&(i[s]=!0,i[e]=void 0),_y(i[e]))if(e===pv)if(C>0){if(!A){var l=Math.atan(C/O),c=Math.atan(C/F);i[e]=dr.calPoints(C,r[s],l,c,n,o,h,_,u,f,y,d,0,T,S)}}else i[e]=[];else if(e===xv)if(F>0){if(!A){var v=Math.atan(F/C),p=Math.atan(F/I);i[e]=dr.calPoints(F,r[s],v,p,n,o,h,_,u,f,y,d,1,S,R)}}else i[e]=[];else if(e===gv)if(I>0){if(!A){var x=Math.atan(I/O),g=Math.atan(I/F);i[e]=dr.calPoints(I,r[s],x,g,n,o,h,_,u,f,y,d,2,k,R)}}else i[e]=[];else if(e===mv)if(O>0){if(!A){var m=Math.atan(O/C),b=Math.atan(O/I);i[e]=dr.calPoints(O,r[s],m,b,n,o,h,_,u,f,y,d,3,T,k)}}else i[e]=[]}));var L=this.__domParent,B=L&&L.__computedStyle;e[cv].u===qv?r[cv]=L?B[cv]:"normal":_y(i[cv])&&(r[cv]=e[cv].v),i[cv]=r[cv];var D=e[vv];if(D.u===qv){var P=r[vv]=L?B[vv]:ly(Kt.INHERIT.color);P.k?i[vv]=P:i[vv]=sy(r[vv])}else _y(i[vv])&&(D.u===oy?i[vv]=r[vv]=D.v:i[vv]=sy(r[vv]=ly(D.v)));var N=e[wv];if(N.u===qv){var z=r[wv]=L?B[wv]:ly(Kt.INHERIT.textStrokeColor);z.k?i[wv]=z:i[wv]=sy(r[wv])}else _y(i[wv])&&(N.u===oy?i[wv]=r[wv]=N.v:N.u===Jv&&(i[wv]=sy(r[wv]=ly(N.v))));if(e[Tv].u===qv)r[Tv]=L?B[Tv]:Kt.INHERIT.textStrokeWidth,i[Tv]=!0;else if(_y(i[Tv])){var H=e[Tv];H=H.u===ty?H.v*this.__root.__computedStyle[Av]:H.u===ey?H.v*this.__root.width*.01:H.u===ry?H.v*this.__root.height*.01:H.u===iy?H.v*Math.max(this.__root.width,this.__root.height)*.01:H.u===ay?H.v*Math.min(this.__root.width,this.__root.height)*.01:H.v,r[Tv]=H,i[Tv]=!0}return e[Sv].u===qv?i[Sv]=r[Sv]=L?B[Sv]:Kt.INHERIT.textStrokeOver:i[Sv]=r[Sv]=e[Sv].v,e[yv].u===qv?r[yv]=L?B[yv]:"visible":_y(i[yv])&&(r[yv]=e[yv].v),i[yv]=r[yv],e[dv].u===qv?r[dv]=L?B[dv]:"auto":_y(i[dv])&&(r[dv]=e[dv].v),i[dv]=r[dv],"preserve3d"===r[Yv]&&("hidden"===r[ov]||r[nv].length||this.__cacheAsBitmap)&&(r[Yv]="flat"),("normal"!==r[sv]||this.__mask)&&B&&(B[Yv]="flat"),this.__bx1=p,this.__bx2=g,this.__by1=x,this.__by2=m,[p,x,g,m]}},{key:"__calPerspective",value:function(t,e,r){var i,a=this;this.__perspectiveMatrix=null;var n=this.__x1,o=this.__y1;if(_y(r[Wc])){r[Wc]=!0,i=!0;var s=t[Wc];e[Wc]=this.__calSize(s,this.__clientWidth,!0)}_y(r[Yc])&&(r[Yc]=!0,i=!0,e[Yc]=t[Yc].map((function(t,e){return a.__calSize(t,e?a.__offsetHeight:a.__offsetWidth,!0)})));var l=e[Wc];if(i&&l){var h=e[Yc];this.__perspectiveMatrix=fs.calPerspectiveMatrix(l,h[0]+n,h[1]+o)}return this.__perspectiveMatrix}},{key:"__calFilter",value:function(t,e,r){var i=this;return r[nv]=!0,this.__filterBbox=null,e[nv]=(t[nv]||[]).map((function(t){var e=t.k,r=t.v;return"dropShadow"===e?{k:e,v:r.map((function(t,e){return e>3?t:i.__calSize(t,0===e?i.__bx2-i.__bx1:i.__by2-i.__by1,!0)}))}:{k:e,v:r=r.u===ny||r.u===$v||r.u===Zv?r.v:i.__calSize(r,i.root.width,!0)}}))}},{key:"__calOffscreen",value:function(t,e){var r,i,a,n,o=this.__root,s=o.width,l=o.height,h=t,_=e[sv],u=e[nv],f=e[ov],c=e[Tc];if("normal"!==_&&gy(_)){_=xy(_);var v=lt.getOffscreenCanvas(s,l,null,"blend");r={ctx:t,target:v,mixBlendMode:_},t=v.ctx}if(this.__hasMask){var y=lt.getOffscreenCanvas(s,l,null,"mask1");i={ctx:t,target:y},t=y.ctx}if(u&&u.length){var d=lt.getOffscreenCanvas(s,l,null,"filter");a={ctx:t,filter:u,target:d},t=d.ctx}if("hidden"===f&&"inline"!==c){var p=lt.getOffscreenCanvas(s,l,null,"overflow"),x=this.__bx1,g=this.__bx2,m=this.__by1,b=this.__by2,A=e[nc],E=e[oc],M=e[lc],w=e[sc],T=e[bv],S=e[pc],R=e[mc],k=e[xc],C=e[gc],F=e[uc],I=e[_c],O=e[fc],L=e[hc],B=A.slice(0),D=E.slice(0),P=M.slice(0),N=w.slice(0);"paddingBox"===T?(B[0]-=S,B[1]-=k,D[0]-=R,D[1]-=k,P[0]-=R,P[1]-=C,N[0]-=S,N[1]-=C):"contentBox"===T&&(B[0]-=S+L,B[1]-=k+F,D[0]-=R+I,D[1]-=k+F,P[0]-=R+I,P[1]-=C+O,N[0]-=S+L,N[1]-=C+O);var z=dr.calRadius(x,m,g-x,b-m,B,D,P,N);n={ctx:t,target:p,matrix:this.__matrixEvent,x:this.__x1,y:this.__y1,offsetWidth:this.__offsetWidth,offsetHeight:this.__offsetHeight,borderList:z},t=p.ctx}if(h!==t)return{ctx:t,offscreenBlend:r,offscreenMask:i,offscreenFilter:a,offscreenOverflow:n}}},{key:"calContent",value:function(t,e){if("hidden"!==t[yv]){var r=t[qc];if(Array.isArray(r))for(var i=0,a=r.length;i<a;i++)if(r[i])return this.__hasContent=!0;if(t[Zc].v[3]>0){var n=e[Sc],o=e[Rc],s=e[uc],l=e[_c],h=e[fc],_=e[hc];if(n&&o||s||l||h||_)return this.__hasContent=!0}for(var u=["Top","Right","Bottom","Left"],f=0,c=u.length;f<c;f++){var v=u[f];if(e[ec[ic("border"+v+"Width")]]>0&&t[ec[ic("border"+v+"Color")]].v[3]>0)return this.__hasContent=!0}var y=t[Jc];if(Array.isArray(y))for(var d=0,p=y.length;d<p;d++){var x=y[d];if(x&&x[4][3]>0)return this.__hasContent=!0}}return this.__hasContent=!1}},{key:"render",value:function(t,r){var i,a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=this.__isDestroyed,l=this.__cacheStyle,h=this.__computedStyle;if(s)return{isDestroyed:s,break:!0};t===$f&&(i=this.__virtualDom={bb:[],children:[],visibility:"visible"});var _=h[Tc];if("none"===_)return{break:!0};var u=this.__x1,f=this.__x2,v=this.__x3,y=this.__x4,d=this.__x5,p=this.__x6,x=this.__y1,g=this.__y2,m=this.__y3,b=this.__y4,A=this.__y5,M=this.__y6,w=this.__bx1,T=this.__bx2,S=this.__by1,R=this.__by2,k={ctx:r,dx:n,dy:o,x1:u,x2:f,x3:v,x4:y,x5:d,x6:p,y1:x,y2:g,y3:m,y4:b,y5:A,y6:M,bx1:w,bx2:T,by1:S,by2:R};if(t===Jf)return k;var C=this.__offsetWidth,F=this.__offsetHeight,I=h[uc],O=h[_c],L=h[fc],B=h[hc],D=h[pc],P=h[mc],N=h[xc],z=h[gc],H=h[Zc],G=h[hv],W=h[fv],U=h[_v],X=h[uv],V=h[nc],K=h[oc],j=h[lc],Z=h[sc],q=h[yv],$=h[$c],J=h[qc],Q=h[Qc],tt=h[nv],et=h[jc],rt=h[Jc],it=h[ov],at=h[sv],nt=h[bv],ot=h[Wv],st=this.__isInline,ht=this.__matrix,_t=0===ot.indexOf("vertical");t===$f&&(1===Q?delete i.opacity:i.opacity=Q),t===$f&&(E.isE(ht)?delete i.transform:i.transform="matrix("+hy(E.m2m6(ht),",")+")",i.visibility=q),t===$f&&("normal"!==at&&gy(at)?(at=xy(at),i.mixBlendMode=at):delete i.mixBlendMode,tt&&tt.length?i.filter=Fe.svgFilter(tt):delete i.filter);var ut,ft=V.slice(0),ct=K.slice(0),vt=j.slice(0),yt=Z.slice(0);if("paddingBox"===nt?(ft[0]-=D,ft[1]-=N,ct[0]-=P,ct[1]-=N,vt[0]-=P,vt[1]-=z,yt[0]-=D,yt[1]-=z):"contentBox"===nt&&(ft[0]-=D+B,ft[1]-=N+I,ct[0]-=P+O,ct[1]-=N+I,vt[0]-=P+O,vt[1]-=z+L,yt[0]-=D+B,yt[1]-=z+L),"hidden"===it&&"inline"!==_){if(ut=dr.calRadius(w,S,T-w,R-S,ft,ct,vt,yt),t===$f){var dt=Zf(ut)||"M".concat(u,",").concat(x,"L").concat(u+C,",").concat(x,"L").concat(u+C,",").concat(x+F,"L").concat(u,",").concat(x+F,",L").concat(u,",").concat(x),pt={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",dt]]}]},xt=r.add(pt);this.__cacheDefs.push(pt),i.overflow="url(#"+xt+")"}}else t===$f&&delete i.overflow;if(("hidden"===q||k.break)&&(t===qf||t===Jf))return k.break=!0,k;if(st){var gt=this.contentBoxList,mt=gt.length;gt[mt-1]instanceof Ys&&mt--;var bt=J.some((function(t){return t}));if(mt){var At=function(){var e,s=h[Av],_=h[Ev],u=h[Mv],f=0,v=0,y=[];if(bt){if(f=Ah.getInlineWidth(a,gt,_t),v=u,_t){var d=[v,f];f=d[0],v=d[1]}"paddingBox"===nt||"padding-box"===nt?_t?(f+=I+L,v+=B+O):(f+=B+O,v+=I+L):"contentBox"!==nt&&"content-box"!==nt&&(_t?(f+=I+L+N+z,v+=B+O+D+P):(f+=B+O+D+P,v+=I+L+N+z)),t!==qf&&t!==Jf||(e=lt.getOffscreenCanvas(f,v,"__$$INLINE_BGI$$__",null));var p=J.length;J.slice(0).reverse().forEach((function(i,s){if(i)if(s=p-1-s,Y.isString(i)){var l=a.__loadBgi[s];if(l.url===i){var _=Ph.renderImage(a,t,e&&e.ctx||r,l,0,0,f,v,ft,ct,vt,yt,h,s,et,$,!0,n,o);t===$f&&_&&y.push(_)}}else if(i.k){var c=a.__gradient(t,r,0,0,f,v,i,n,o);if(c)if("conic"===c.k)Pr.renderConic(a,t,e&&e.ctx||r,c.v,0,0,f,u,ft,ct,vt,yt,!0);else{var d=Ph.renderBgc(a,t,e&&e.ctx||r,c.v,null,0,0,f,v,ft,ct,vt,yt,"fill",!0);t===$f&&d&&y.push(d)}}}))}for(var x=s*((Nt.info[vy(_)]||{}).lgr||0)*.5,g=_t?mo.getVerticalBaseline(h):mo.getBaseline(h),m=!0,b=gt[0],A=b.parentLineBox,E=0,M=0;M<mt;M++){var w=gt[M];w.parentLineBox!==A&&function(){var s=c(Ah.getInlineBox(a,_t,gt,b,gt[M-1],A,g,u,x,m,!1,nt,I,O,L,B,N,P,z,D),8),_=s[0],d=s[1],p=s[2],T=s[3],S=s[4],R=s[5],k=s[6],C=s[7];if(m){var F=Jy(a);_-=F,S-=F}H[3]>0&&Ph.renderBgc(a,t,r,l[Zc],null,_,d,p-_,T-d,ft,[0,0],[0,0],yt,"fill",!1,n,o);var W=p-_,Y=T-d;if(t!==qf&&t!==Jf||!e?t===$f&&y.length&&y.forEach((function(t){if(t){var e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",_t?"M".concat(0,",",E,"L").concat(v,",").concat(E,"L").concat(v,",").concat(Y+E,"L",0,",").concat(Y+E,",L",0,",").concat(E):"M".concat(E,",",0,"L").concat(W+E,",",0,"L").concat(W+E,",").concat(v,"L").concat(E,",").concat(v,",L").concat(E,",",0)]]}]},n=r.add(e);a.__cacheDefs.push(e),i.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",_t?_:_-E],["y",_t?d-E:d],["clip-path","url(#"+n+")"]]})}})):_t?r.drawImage(e.canvas,0,E,f,Y,_+n,d+o,f,Y):r.drawImage(e.canvas,E,0,W,v,_+n,d+o,W,v),E+=_t?Y:W,rt&&rt.forEach((function(e){Xf.renderBoxShadow(a,t,r,e,S,R,k,C,k-S,C-R,n,o)})),N>0&&G[3]>0){var V=Math.atan(N/D),K=Math.atan(N/P),j=dr.calPoints(N,h[ev],V,K,S,S+D,k,k,R,R+N,C-z,C,0,m?ft:[0,0],[0,0]);dr.renderBorder(a,t,r,j,l[hv],n,o)}if(z>0&&U[3]>0){var Z=Math.atan(z/D),q=Math.atan(z/P),$=dr.calPoints(z,h[iv],Z,q,S,S+D,k,k,R,R+N,C-z,C,2,m?ft:[0,0],[0,0]);dr.renderBorder(a,t,r,$,l[_v],n,o)}if(m&&D>0&&X[3]>0){var J=Math.atan(D/N),Q=Math.atan(D/z),tt=dr.calPoints(D,h[av],J,Q,S,S+D,k-P,k,R,R+N,C-z,C,3,ft,ct);dr.renderBorder(a,t,r,tt,l[uv],n,o)}m=!1,b=w,A=w.parentLineBox}(),M===mt-1&&function(){var s=c(Ah.getInlineBox(a,_t,gt,b,gt[M],A,g,u,x,m,!0,nt,I,O,L,B,N,P,z,D),8),_=s[0],d=s[1],p=s[2],w=s[3],T=s[4],S=s[5],R=s[6],k=s[7];if(m){var C=Jy(a);_-=C,T-=C}var F=Qy(a);p+=F,R+=F,H[3]>0&&Ph.renderBgc(a,t,r,l[Zc],null,_,d,p-_,w-d,m?ft:[0,0],ct,vt,m?yt:[0,0],"fill",!1,n,o);var Y=p-_,V=w-d;if(t!==qf&&t!==Jf||!e?t===$f&&y.length&&y.forEach((function(t){if(t){var e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",_t?"M".concat(0,",",E,"L").concat(v,",").concat(E,"L").concat(v,",").concat(V+E,"L",0,",").concat(V+E,",L",0,",").concat(E):"M".concat(E,",",0,"L").concat(Y+E,",",0,"L").concat(Y+E,",").concat(v,"L").concat(E,",").concat(v,",L").concat(E,",",0)]]}]},n=r.add(e);a.__cacheDefs.push(e),i.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",_t?_:_-E],["y",_t?d-E:d],["clip-path","url(#"+n+")"]]})}})):_t?r.drawImage(e.canvas,0,E,f,V,_+n,d+o,f,V):r.drawImage(e.canvas,E,0,Y,v,_+n,d+o,Y,v),rt&&rt.forEach((function(e){Xf.renderBoxShadow(a,t,r,e,T,S,R,k,R-T,k-S,n,o)})),N>0&&G[3]>0){var K=Math.atan(N/D),j=Math.atan(N/P),Z=dr.calPoints(N,h[ev],K,j,T,T,R-P,R,S,S+N,k-z,k,0,m?ft:[0,0],ct);dr.renderBorder(a,t,r,Z,l[hv],n,o)}if(P>0&&W[3]>0){var q=Math.atan(P/N),$=Math.atan(P/z),J=dr.calPoints(P,h[rv],q,$,T,T+D,R-P,R,S,S+N,k-z,k,1,ft,ct);dr.renderBorder(a,t,r,J,l[fv],n,o)}if(z>0&&U[3]>0){var Q=Math.atan(z/D),tt=Math.atan(z/P),et=dr.calPoints(z,h[iv],Q,tt,T,T,R-P,R,S,S+N,k-z,k,2,m?ft:[0,0],ct);dr.renderBorder(a,t,r,et,l[_v],n,o)}if(m&&D>0&&X[3]>0){var it=Math.atan(D/N),at=Math.atan(D/z),ot=dr.calPoints(D,h[av],it,at,T,T+D,R-P,R,S,S+N,k-z,k,3,ft,ct);dr.renderBorder(a,t,r,ot,l[uv],n,o)}}()}return e&&e.ctx.clearRect(0,0,f,v),{v:k}}();if("object"===e(At))return At.v}else if(w===T||S===R)return k}if(H[3]>0&&Ph.renderBgc(this,t,r,l[Zc],ut,w,S,T-w,R-S,ft,ct,vt,yt,"fill",!1,n,o),J){var Et=J.length;J.slice(0).reverse().forEach((function(e,i){if(e)if(i=Et-1-i,Y.isString(e)){var s=a.__loadBgi[i];s.url===e&&Ph.renderImage(a,t,r,s,w,S,T,R,ft,ct,vt,yt,h,i,et,$,!1,n,o)}else if(e.k){var l=a.__gradient(t,r,w,S,T,R,e,n,o);l&&("conic"===l.k?Pr.renderConic(a,t,r,l.v,w,S,T-w,R-S,ft,ct,vt,yt):Ph.renderBgc(a,t,r,l.v,ut,w,S,T-w,R-S,ft,ct,vt,yt,"fill",!1,n,o))}}))}return rt&&rt.forEach((function(e){Xf.renderBoxShadow(a,t,r,e,u,x,p,M,p-u,M-x,n,o)})),N>0&&G[3]>0&&dr.renderBorder(this,t,r,l[pv],l[hv],n,o),P>0&&W[3]>0&&dr.renderBorder(this,t,r,l[xv],l[fv],n,o),z>0&&U[3]>0&&dr.renderBorder(this,t,r,l[gv],l[_v],n,o),D>0&&X[3]>0&&dr.renderBorder(this,t,r,l[mv],l[uv],n,o),k}},{key:"refresh",value:function(t,e){var r=this.__root;!uy(t)&&t||(t=Xy),t&&this.clearCache(t<By),r&&!this.__isDestroyed?r.__addUpdate(this,null,t,!1,!1,!1,!1,!1,e):uy(e)&&e(-1)}},{key:"__destroy",value:function(){if(!this.__isDestroyed){var t=this.props.ref;_y(t)||uy(t)||delete this.__root.__ref[t],f(l(r.prototype),"__destroy",this).call(this),this.clearAnimate(),this.clearFrameAnimate(),this.clearCache();var e=this.__fontRegister;for(var i in e)e.hasOwnProperty(i)&&Nt.offRegister(i,this);this.__host=this.__hostRoot=this.__root=this.__prev=this.__next=this.__parent=this.__domParent=null,this.__reset0();var a=this.__wasmNode;a&&(a.clear(),a.free(),this.__wasmNode=null)}}},{key:"__emitEvent",value:function(t,e){var r=this,i=this.__isDestroyed,a=this.__computedStyle,n=this.__mask;if(!(i||"none"===a[Tc]||t.__stopPropagation||n)){var o,s=t.event.type,l=this.__listener,h=this.__hasMask;if(l.hasOwnProperty(s)&&(o=l[s]),e)return"none"===a[dv]||t.__stopImmediatePropagation||!uy(o)&&!Array.isArray(o)||(Array.isArray(o)?o.forEach((function(e){uy(e)&&e.call(r,t)})):o.call(this,t)),!0;if(this.willResponseEvent(t)){if(h){for(var _,u=this.next,f=u.__clip;u&&u.__mask;){if(u.willResponseEvent(t,!0)){_=!0;break}u=u.next}if(!f&&!_)return}return Array.isArray(o)&&!t.__stopImmediatePropagation?o.forEach((function(e){uy(e)&&e.call(r,t)})):uy(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,a=this.__x1,n=this.__y1,o=this.__offsetWidth,s=this.__offsetHeight,l=this.__matrixEvent;if("none"!==this.__computedStyle[dv])return Se.pointInQuadrilateral(r,i,a,n,a+o,n,a+o,n+s,a,n+s,l)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=a-r,_=n-i;if(h&&_){var u=o.k,f=o.v,c=o.d,v=o.s,y=o.z,d=o.p,p=r+.5*h,x=i+.5*_,g={k:u};if("linear"===u){var m=Pr.getLinear(f,c,r,i,p,x,h,_,this.root,s,l);g.v=this.__getLg(t,e,m)}else if("radial"===u){var b=Pr.getRadial(f,v,y,d,r,i,a,n,this.root,s,l);b&&(g.v=this.__getRg(t,e,b),b.matrix&&(g.v=[g.v,b.matrix,b.cx,b.cy]))}else if("conic"===u){var A=this.bbox,E=Math.max(Math.abs(A[2]-A[0]),Math.abs(A[3]-A[1])),M=Math.max(Math.abs(h),Math.abs(_)),w=Pr.getConic(f,c,d,r,i,a,n,E/M,this.root,s,l);g.v=this.__getCg(t,e,w)}return g}}},{key:"__getLg",value:function(t,e,r){if(t===qf||t===Jf){var i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach((function(t){i.addColorStop(t[1],sy(t[0]))})),i}if(t===$f){var a={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map((function(t){return{tagName:"stop",props:[["stop-color",sy(t[0])],["offset",100*t[1]+"%"]]}}))},n=e.add(a);return this.__cacheDefs.push(a),"url(#"+n+")"}}},{key:"__getRg",value:function(t,e,r){if(t===qf||t===Jf){var i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r);return r.stop.forEach((function(t){i.addColorStop(t[1],sy(t[0]))})),i}if(t===$f){var a={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map((function(t){return{tagName:"stop",props:[["stop-color",sy(t[0])],["offset",100*t[1]+"%"]]}}))};r.tx!==r.cx&&a.props.push(["fx",r.cx]),r.ty!==r.cy&&a.props.push(["fy",r.cy]);var n=e.add(a);return this.__cacheDefs.push(a),"url(#"+n+")"}}},{key:"__getCg",value:function(t,e,r){var i=r.stop,a=i.length-1;i[a][1]<1&&i.push([i[a][0].slice(0),1]),i[0][1]>0&&i.unshift([i[0][0].slice(0),0]);return t===qf||t===Jf?r:[]}},{key:"clearCache",value:function(t){var e=this.__cacheTotal,r=this.__cacheFilter,i=this.__cacheMask,a=this.__cache;a&&!t&&(a.release(),this.__refreshLevel|=By),e&&e.release(),r&&r.release(),i&&i.release(),this.__cacheTarget=t&&a&&a.__available?a:null,this.__refreshLevel|=Xy,this.clearTopCache()}},{key:"clearTopCache",value:function(){for(var t=this.__domParent;t;){var e=t.__cache,r=t.__cacheTotal,i=t.__cacheFilter,a=t.__cacheMask;t.__refreshLevel|=Xy,r&&r.release(),i&&i.release(),a&&a.release(),t.__cacheTarget=e&&e.__available?e:null,t=t.__domParent}}},{key:"updateStyle",value:function(t,e){var r=Qf(t);this.updateFormatStyle(r,e)}},{key:"updateFormatStyle",value:function(t,e){var r=this,i=this.__root,a=this.__currentStyle,n=this.__currentProps,o=[];Object.keys(t).forEach((function(e){var i=py.hasOwnProperty(e);i||(e=parseInt(e)),tc(e,i?n[e]:a[e],t[e],r)||(i?n[e]=t[e]:a[e]=t[e],o.push(e))})),o.length&&!this.__isDestroyed?i&&i.__addUpdate(this,o,null,!1,!1,!1,!1,!1,e):uy(e)&&e()}},{key:"animate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Gf(this,t,e);if(this.__isDestroyed)return r.__destroy(),r;var i=this.__wasmNode;if(i){var a=r.__wasmAnimation;a&&i.add_ani(a.ptr)}return this.__animationList.push(r),!1===e.autoPlay?r:r.play()}},{key:"removeAnimate",value:function(t){if(t instanceof Gf){var e=this.__animationList.indexOf(t);if(e>-1){t.cancel(),t.__destroy(),this.__animationList.splice(e,1);var r=this.__wasmNode;if(r){var i=animation.__wasmAnimation;i&&r.remove_ani(i.ptr)}}}}},{key:"clearAnimate",value:function(){this.__animationList.splice(0).forEach((function(t){t.cancel(),t.__destroy()}));var t=this.__wasmNode;t&&t.clear()}},{key:"frameAnimate",value:function(t){uy(t)&&(this.__frameAnimateList.push(t),this.__root.__onFrame(t))}},{key:"removeFrameAnimate",value:function(t){if(uy(t)){var e=this.__frameAnimateList,r=e.indexOf(t);r>-1&&(e.splice(r,1),this.__root.__offFrame(t))}}},{key:"clearFrameAnimate",value:function(){var t=this.__root;this.__frameAnimateList.splice(0).forEach((function(e){t.__offFrame(cb)}))}},{key:"__offsetX",value:function(t,e,i){"none"!==this.__computedStyle[Tc]&&(f(l(r.prototype),"__offsetX",this).call(this,t),e&&(this.__layoutData.x+=t),this.__x1+=t,this.__x2+=t,this.__x3+=t,this.__x4+=t,this.__x5+=t,this.__x6+=t,i&&(this.__refreshLevel|=i,i>=Ly&&(this.__cacheStyle=[],this.__calStyle(i,this.__currentStyle,this.__computedStyle,this.__cacheStyle)),this.__bbox&&(this.__bbox[0]+=t,this.__bbox[2]+=t),this.__filterBbox&&(this.__filterBbox[0]+=t,this.__filterBbox[2]+=t)))}},{key:"__offsetY",value:function(t,e,i){"none"!==this.__computedStyle[Tc]&&(f(l(r.prototype),"__offsetY",this).call(this,t),e&&this.__layoutData&&(this.__layoutData.y+=t),this.__y1+=t,this.__y2+=t,this.__y3+=t,this.__y4+=t,this.__y5+=t,this.__y6+=t,i&&(this.__refreshLevel|=i,i>=Ly&&(this.__cacheStyle=[],this.__calStyle(i,this.__currentStyle,this.__computedStyle,this.__cacheStyle)),this.__bbox&&(this.__bbox[1]+=t,this.__bbox[3]+=t),this.__filterBbox&&(this.__filterBbox[1]+=t,this.__filterBbox[3]+=t),this.__cache&&this.__cache.__offsetY(t),this.__cacheTotal&&this.__cacheTotal.__offsetY(t),this.__cacheFilter&&this.__cacheFilter.__offsetY(t),this.__cacheMask&&this.__cacheMask.__offsetY(t)))}},{key:"__resizeX",value:function(t,e){"none"!==this.__computedStyle[Tc]&&(this.__computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData&&(this.__layoutData.w+=t),this.__x4+=t,this.__x5+=t,this.__x6+=t,t<0&&(this.__limitCache=!1),e&&(this.__refreshLevel|=e,e>=Ly&&(this.__cacheStyle=[],this.__calStyle(e,this.__currentStyle,this.__computedStyle,this.__cacheStyle))),this.clearCache())}},{key:"__resizeY",value:function(t,e){"none"!==this.__computedStyle[Tc]&&(this.__computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__y4+=t,this.__y5+=t,this.__y6+=t,t<0&&(this.__limitCache=!1),e&&(this.__refreshLevel|=e,e>=Ly&&(this.__cacheStyle=[],this.__calStyle(e,this.__currentStyle,this.__computedStyle,this.__cacheStyle))),this.clearCache())}},{key:"getComputedStyle",value:function(t){var e=this.__computedStyle,r={},i=[];t?(Array.isArray(t)?t:[t]).forEach((function(t){Hr.hasOwnProperty(t)?Hr[t].forEach((function(t){i.push(ec[ic(t)])})):i.push(ec[ic(t)])})):i=Object.keys(e);return i.forEach((function(t){py.hasOwnProperty(t)?r[t]=e[t]:r[rc[t]]=e[t]})),r}},{key:"getBoundingClientRect",value:function(t){var e;if(t)e=this.bbox;else{var r=this.__x1,i=this.__y1;e=[r,i,r+this.__offsetWidth,i+this.__offsetHeight]}var a=this.__matrixEvent,n=my(E.calPoint({x:e[0],y:e[1]},a)),o=my(E.calPoint({x:e[2],y:e[1]},a)),s=my(E.calPoint({x:e[2],y:e[3]},a)),l=my(E.calPoint({x:e[0],y:e[3]},a));return{left:Math.min(n.x,Math.min(o.x,Math.min(s.x,l.x))),top:Math.min(n.y,Math.min(o.y,Math.min(s.y,l.y))),right:Math.max(n.x,Math.max(o.x,Math.max(s.x,l.x))),bottom:Math.max(n.y,Math.max(o.y,Math.max(s.y,l.y))),points:[n,o,s,l]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(t){var e,r=this.__root,i=this.isShadowRoot?this.hostRoot.__parent:this.__parent;if(i){var a=this.isShadowRoot?this.hostRoot:this;e=i.__children.indexOf(a),i.__children.splice(e,1),i.__zIndexChildren&&(e=i.__zIndexChildren.indexOf(a),i.__zIndexChildren.splice(e,1));var n=a.__prev,o=a.__next;n&&(n.__next=o),o&&(o.__prev=n)}if(this.__isDestroyed)uy(t)&&t();else{if(i&&i.__deleteStruct(this,e),"none"===this.__computedStyle[Tc]||i&&"none"===i.__computedStyle[Tc])return this.__destroy(),void(uy(t)&&t());r.__addUpdate(this,null,Ly,!1,!0,!1,!1,!1,t)}}},{key:"addEventListener",value:function(t,e){if(t&&uy(e)){t=t.toLowerCase();for(var r=this.__listener[t]=this.__listener[t]||[],i=0,a=r.length;i<a;i++)if(r[i]===e)return;r.push(e)}}},{key:"removeEventListener",value:function(t,e){if(t){t=t.toLowerCase();var r=this.__listener[t];if(Array.isArray(r)&&e){for(var i=0,a=r.length;i<a;i++)if(r[i]===e){r.splice(i,1);break}}else uy(r)&&r===e&&delete this.__listener[t]}}},{key:"__updateCache",value:function(){var t=this.__cacheMask,e=this.__cacheFilter,r=this.__cacheTotal,i=this.__cache;t&&t.__available?this.__cacheTarget=t:e&&e.__available?this.__cacheTarget=e:r&&r.__available?this.__cacheTarget=r:i&&i.__available?this.__cacheTarget=i:this.__cacheTarget=null}},{key:"tagName",get:function(){return this.__tagName}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__x1,e=this.__y1,r=this.__offsetWidth,i=this.__offsetHeight,a=this.__computedStyle[Jc];this.__bbox=yy([t,e,t+r,e+i],a)}return this.__bbox}},{key:"filterBbox",get:function(){if(!this.__filterBbox){var t=this.__bbox||this.bbox,e=this.__computedStyle[nv];this.__filterBbox=dy(t,e)}return this.__filterBbox}},{key:"listener",get:function(){return this.__listener}},{key:"opacity",get:function(){return this.__opacity}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){for(var t=this.__domParent,e=this.__matrix;t;)e=E.multiply(t.__perspectiveMatrix,e),e=E.multiply(t.__matrix,e),t=t.__domParent;return e}},{key:"perspectiveMatrix",get:function(){return this.__perspectiveMatrix}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"cacheStyle",get:function(){return this.__cacheStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseline",get:function(){return this.__offsetHeight}},{key:"firstBaseline",get:function(){return this.__offsetHeight}},{key:"verticalBaseline",get:function(){return this.__offsetWidth}},{key:"mask",get:function(){return this.__mask},set:function(t){if(t=!!t,this.__mask!==t){this.__mask=t;var e=this.__root;if(e&&!this.__isDestroyed){var r=this.__domParent;r&&(r.__computedStyle[Yv]=t?"flat":r.__currentStyle[Yv]),e.__addUpdate(this,null,Vy,!1,!1,!1,!1,!1,null)}}}},{key:"clip",get:function(){return this.__clip},set:function(t){if(t=!!t,this.__clip!==t){this.__clip=t;var e=this.__root;if(e&&!this.__isDestroyed){var r=this.__domParent;r&&(r.__computedStyle[Yv]=t?"flat":r.__currentStyle[Yv]),e.__addUpdate(this,null,Vy,!1,!1,!1,!1,!1,null)}}}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){if(t=!!t,this.__cacheAsBitmap!==t){this.__cacheAsBitmap=t;var e=this.__root;e&&!this.__isDestroyed&&(this.__computedStyle[Yv]=t?"flat":this.__currentStyle[Yv],e.__addUpdate(this,null,By,!1,!1,!1,!1,null,null))}}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"env",get:function(){var t=this.__root;if(t)return t.__env||{x:this.__x1,y:this.__y1,width:t.__width,height:t.__height,node:t}}}]),r}(p),ed=fe.STYLE_KEY,rd=ed.DISPLAY,id=ed.MARGIN_TOP,ad=ed.MARGIN_BOTTOM,nd=ed.MARGIN_LEFT,od=ed.MARGIN_RIGHT,sd=ed.BORDER_TOP_WIDTH,ld=ed.BORDER_BOTTOM_WIDTH,hd=ed.BORDER_LEFT_WIDTH,_d=ed.BORDER_RIGHT_WIDTH,ud=ed.PADDING_TOP,fd=ed.PADDING_BOTTOM,cd=ed.PADDING_LEFT,vd=ed.PADDING_RIGHT,yd=ed.LINE_HEIGHT,dd=function(){function t(t,e,r,i,a){this.__list=[],this.__x=t,this.__y=e,this.__oy=0,this.__lineHeight=r,this.__baseline=i,this.__isUpright=a,this.__bOffset=0}return n(t,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(t){var e=t?this.verticalBaseline:this.baseline,r=t?this.verticalLineHeight:this.lineHeight,i=r;if(this.list.length){this.list.forEach((function(r){if(!r.isEllipsis)if(t){var a=r.verticalBaseline;if(a!==e){var n=e-a;r.__offsetX(n,!0),i=Math.max(i,r.offsetWidth+n)}}else{var o=r.baseline;if(o!==e){var s=e-o;r.__offsetY(s,!0),i=Math.max(i,r.offsetHeight+s)}}}));var a=e-this.__baseline;i=Math.max(i,this.__lineHeight+a)}return Math.max(0,i-r)}},{key:"__offsetX",value:function(t,e){this.__x+=t,e&&this.list.forEach((function(e){e.__offsetX(t,!0)}))}},{key:"__offsetY",value:function(t,e){this.__y+=t,e&&this.list.forEach((function(e){e.__offsetY(t,!0)}))}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseline=Math.max(e,this.__baseline)}},{key:"__resetLb",value:function(t,e){this.list.forEach((function(r){var i=r;r instanceof ks&&(i=r.parent.parent);for(var a=i.computedStyle;"inline"===a[rd];)t=Math.max(t,a[yd]),e=Math.max(e,mo.getBaseline(a)),a=(i=i.domParent).computedStyle})),this.__lineHeight=t,this.__baseline=e}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"endX",get:function(){return this.x+this.width}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){if(this.isUpright)return this.verticalLineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],i=t[e-1],a=r.x,n=r instanceof ks?r.parent.domParent:r.domParent;;){var o=n.contentBoxList,s=n.computedStyle,l=s[rd],h=s[nd],_=s[hd],u=s[cd];if("inline"!==l)break;r===o[0]&&(a-=h+_+u),n=n.domParent}var f=i.x+i.outerWidth;for(n=i instanceof ks?i.parent.domParent:i.domParent;;){var c=n.contentBoxList,v=n.computedStyle,y=v[rd],d=v[od],p=v[_d],x=v[vd];if("inline"!==y)break;r===c[c.length-1]&&(f+=d+p+x),n=n.domParent}return f-a}return 0}},{key:"height",get:function(){if(!this.isUpright)return this.lineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],i=t[e-1],a=r.y,n=r instanceof ks?r.parent.domParent:r.domParent;;){var o=n.contentBoxList,s=n.computedStyle,l=s[rd],h=s[id],_=s[sd],u=s[ud];if("inline"!==l)break;r===o[0]&&(a-=h+_+u),n=n.domParent}var f=i.y+i.outerHeight;for(n=i instanceof ks?i.parent.domParent:i.domParent;;){var c=n.contentBoxList,v=n.computedStyle,y=v[rd],d=v[ad],p=v[ld],x=v[fd];if("inline"!==y)break;r===c[c.length-1]&&(f+=d+p+x),n=n.domParent}return f-a}return 0}},{key:"bOffset",get:function(){return this.__bOffset}},{key:"baseline",get:function(){var t=this.__baseline;return this.list.forEach((function(e){t=Math.max(t,e.baseline)})),t}},{key:"verticalBaseline",get:function(){var t=this.__baseline;return this.list.forEach((function(e){t=Math.max(t,e.verticalBaseline)})),t}},{key:"lineHeight",get:function(){var t=this.__lineHeight;return this.list.forEach((function(e){t=Math.max(t,e.outerHeight)})),t}},{key:"verticalLineHeight",get:function(){var t=this.__lineHeight;return this.list.forEach((function(e){t=Math.max(t,e.outerWidth)})),t}},{key:"isUpright",get:function(){return this.__isUpright}}]),t}(),pd=function(){function t(t,e,r,i,a){this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__max=a?e:t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseline=i,this.__isEnd=!0,this.__spreadList=[],this.__isVertical=a}return n(t,[{key:"genLineBox",value:function(t,e){var r=new dd(t,e,this.__lineHeight,this.__baseline,this.isUpright);return this.list.push(r),this.__isEnd=!0,r}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){var a=Math.max(this.__lineHeight,r),n=Math.max(this.__baseline,i);if(this.__isNewLine){var o=new dd(t,e,a,n,this.isUpright);return this.list.push(o),this.__isEnd=!0,this.__isNewLine=!1,o}}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(t,e){var r,i=this.isUpright;if(this.__isNewLine)this.__isNewLine=!1,r=this.genLineBox(t.x,t.y);else{var a=this.list;r=a[a.length-1]}return this.__domStack.forEach((function(e){e.__contentBoxList.push(t)})),r.add(t),e?(this.__isNewLine=!0,i?(this.__lastX=t.x+t.outerWidth,this.__lastY=this.__y):(this.__lastX=this.__x,this.__lastY=t.y+t.outerHeight)):i?(this.__lastX=t.x,this.__lastY=t.y+t.outerHeight):(this.__lastX=t.x+t.outerWidth,this.__lastY=t.y),this.__max=Math.max(this.__max,i?t.y+t.outerHeight:t.x+t.outerWidth),r}},{key:"horizonAlign",value:function(t,e,r){this.list.forEach((function(i){var a=t-(r?i.height:i.width);a>0&&("center"===e&&(a*=.5),r?i.__offsetY(a,!0):i.__offsetX(a,!0))}))}},{key:"verticalAlign",value:function(t){var e=this.__spreadList;e.splice(0);var r=0;return this.list.forEach((function(i){r&&(i.__bOffset=r,t?i.__offsetX(r,!0):i.__offsetY(r,!0)),r+=i.verticalAlign(t),e.push(r)})),r}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"addY",value:function(t){this.__lastY+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(t){this.list.forEach((function(e){e.__offsetX(t)}))}},{key:"__offsetY",value:function(t){this.list.forEach((function(e){e.__offsetY(t)}))}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e,!1)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endX",get:function(){var t=this.list,e=t.length;return e?t[e-1].endX:this.__x}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return this.list.length>1}},{key:"domList",get:function(){return this.__domList}},{key:"baseline",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseline+t[e-1].bOffset}return 0}},{key:"firstBaseline",get:function(){var t=this.list;return t.length?t[0].baseline:0}},{key:"verticalBaseline",get:function(){var t=this.list;return t.length?t[0].baseline+t[0].bOffset:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"verticalLineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].verticalLineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var t=0;return this.list.forEach((function(e){t=Math.max(t,e.width)})),t}},{key:"spreadList",get:function(){return this.__spreadList}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"max",get:function(){return this.__max}}]),t}(),xd={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},gd=fe.STYLE_KEY,md=gd.MARGIN_RIGHT,bd=gd.MARGIN_LEFT,Ad=gd.PADDING_RIGHT,Ed=gd.PADDING_LEFT,Md=gd.WIDTH,wd=gd.HEIGHT,Td=gd.BORDER_RIGHT_WIDTH,Sd=gd.BORDER_LEFT_WIDTH,Rd=gd.FILL,kd=gd.STROKE,Cd=gd.STROKE_MITERLIMIT,Fd=gd.STROKE_WIDTH,Id=gd.STROKE_LINECAP,Od=gd.STROKE_LINEJOIN,Ld=gd.STROKE_DASHARRAY,Bd=gd.STROKE_DASHARRAY_STR,Dd=gd.FILL_RULE,Pd=gd.FLEX_BASIS,Nd=g.AUTO,zd=g.PX,Hd=g.PERCENT,Gd=g.REM,Wd=g.VW,Yd=g.VH,Ud=g.VMAX,Xd=g.VMIN,Vd=g.RGBA,Kd=g.GRADIENT,jd=Y.int2rgba,Zd=Y.isNil,qd=Y.joinArr,$d=Fe.canvasPolygon,Jd=Fe.svgPolygon,Qd={},tp=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).__isMulti=!!i.props.multi,i.__style=mo.normalize(i.style,Kt.DOM_ENTRY_SET.concat(Kt.GEOM_ENTRY_SET)),i.__currentStyle=Y.extend([],i.__style),i.__currentProps=Y.clone(i.props),i.__cacheProps={},i}return s(e,t),n(e,[{key:"__tryLayInline",value:function(t,e){this.__computeReflow();var r=this.currentStyle,i=r[Md],a=r[bd],n=r[md],o=r[Ed],s=r[Ad],l=this.computedStyle,h=l[Sd],_=l[Td];return i[1]!==Nd&&(t-=this.__calSize(i,e,!0)),t-=this.__calSize(n,e,!0),t-=this.__calSize(s,e,!0),t-=_,t-=this.__calSize(a,e,!0),t-=this.__calSize(o,e,!0),t-=h}},{key:"__calBasis",value:function(t,e,r,i,a){this.__computeReflow();var n=0,o=0,s=0,l=this.currentStyle,h=this.computedStyle,_=i.w,u=i.h,f=l[Pd],c=l[Md],v=l[wd],y=t?c:v;return[zd,Hd,Gd,Wd,Yd,Ud,Xd].indexOf(f.u)>-1?n=s=o=this.__calSize(f,t?_:u,!0):[zd,Hd,Gd,Wd,Yd,Ud,Xd].indexOf(y.u)>-1&&(n=s=o=this.__calSize(y,t?_:u,!0)),this.__addMBP(t,_,l,h,[n,o,s],a)}},{key:"__layout",value:function(t,r,i,a){f(l(e.prototype),"__layout",this).call(this,t,r,i,a),this.__layoutStyle()}},{key:"__layoutBlock",value:function(t,e,r,i){var a=this.__preLayout(t,!1),n=a.fixedWidth,o=a.fixedHeight,s=a.w,l=a.h,h=a.isParentVertical,_=a.isUpright,u=0,f=0;!n&&(e||h||_)||(u=s),(o||!e&&h&&_)&&(f=l),this.__ioSize(u,f),e||r||i||(this.__marginAuto(this.currentStyle,t),this.__cacheProps={})}},{key:"__layoutFlex",value:function(t,e,r,i){this.__layoutBlock(t,e,r,i)}},{key:"__layoutInline",value:function(t,e,r){var i=this.__preLayout(t,!1),a=i.fixedWidth,n=i.fixedHeight,o=i.w,s=i.h,l=a?o:0,h=n?s:0;this.__ioSize(l,h),this.__cacheProps={}}},{key:"__calStyle",value:function(t,r,i,a){var n=this,o=f(l(e.prototype),"__calStyle",this).call(this,t,r,i,a);if(Zd(a[Fd])){a[Fd]=!0;var s=r[Fd]||[],h=this.width;i[Fd]=s.map((function(t){return n.__calSize(t,h,!0)}))}return Zd(a[Ld])&&(a[Ld]=!0,i[Ld]=r[Ld]||[],a[Bd]=i[Ld].map((function(t){return qd(t,",")}))),[Id,Od,Cd,Dd].forEach((function(t){i[t]=r[t]})),[Rd,kd].forEach((function(t){if(Zd(a[t])){var e=r[t],n=i[t]=[],o=a[t]=[];Array.isArray(e)&&e.forEach((function(t){t&&t.u===Kd?(n.push(t.v),o.push(!0)):t&&t.u===Vd&&t.v[3]>0?(n.push(t.v),o.push(jd(t.v))):(n.push("none"),o.push("none"))}))}})),o}},{key:"calContent",value:function(t,r){var i=f(l(e.prototype),"calContent",this).call(this,t,r);this.__hasXomContent=i;for(var a=r[Rd],n=r[kd],o=r[Fd],s=!0,h=0,_=a.length;h<_;h++){var u=a[h];if(u.k||u[3]>0){s=!1;break}}for(var c=0,v=n.length;c<v;c++){var y=n[c];if((y.k||y[3]>0)&&o[c]>0){s=!1;break}}return!s||!(!i&&s)&&i}},{key:"__preSet",value:function(t,e){var r=this,i=this.width,a=this.height,n=this.__cacheStyle,o=this.computedStyle,s=e.x3+.5*i,l=e.y3+.5*a,h=n[Bd],_=o[Rd],u=o[kd],f=o[Fd],c=o[Id],v=o[Od],y=o[Cd],d=o[Ld],p=o[Dd];return{cx:s,cy:l,stroke:u=u.map((function(i){return i.k?r.__gradient(t,e.ctx,e.x3,e.y3,e.x4,e.y4,i,e.dx,e.dy):jd(i)})),strokeWidth:f,strokeDasharray:d,strokeDasharrayStr:h,strokeLinecap:c,strokeLinejoin:v,strokeMiterlimit:y,fill:_=_.map((function(i){return i.k?r.__gradient(t,e.ctx,e.x3,e.y3,e.x4,e.y4,i,e.dx,e.dy):jd(i)})),fillRule:p}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,a=r.strokeWidth,n=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,l=r.strokeMiterlimit,h=r.fill;t===x.CANVAS&&(h&&("linear"===h.k?e.fillStyle=h.v:"radial"!==h.k||Array.isArray(h.v)?"conic"===h.k||h.k||e.fillStyle===h||(e.fillStyle=h):e.fillStyle=h.v),i&&("linear"===i.k?e.strokeStyle=i.v:"radial"!==i.k||Array.isArray(i.v)?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==a&&e.lineWidth!==a&&(e.lineWidth=a),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==l&&e.miterLimit!==l&&(e.miterLimit=l),Y.isFunction(e.getLineDash)?n&&!Y.equalArr(e.getLineDash(),n)&&e.setLineDash(n):n&&e.setLineDash(n))}},{key:"render",value:function(t,r,i,a){var n=f(l(e.prototype),"render",this).call(this,t,r,i,a);if(t===x.SVG&&(this.virtualDom.type="geom"),n.break||t===x.WEBGL)return n;var o=this.__preSet(t,n);return Object.assign(n,o)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,a=r.fillRule,n=r.stroke,o=r.strokeWidth,s=r.strokeDasharray,l=r.strokeDasharrayStr,h=r.strokeLinecap,_=r.strokeLinejoin,u=r.strokeMiterlimit,f=r.dx,c=r.dy,v=this.__cacheProps.list,y=this.isMulti,d=this.bbox;if(i.length<=1&&n.length<=1){var p={fill:i[0],fillRule:a[0],stroke:n[0],strokeWidth:o[0],strokeDasharray:s[0],strokeDasharrayStr:l[0],strokeLinecap:h[0],strokeLinejoin:_[0],strokeMiterlimit:u[0],dx:f,dy:c,bbox:d};this.__renderOnePolygon(t,e,y,v,p)}else{for(var x=0,g=i.length;x<g;x++){var m=i[x];if(m){var b={fill:m,fillRule:a[x],dx:f,dy:c,bbox:d};this.__renderOnePolygon(t,e,y,v,b)}}for(var A=0,E=n.length;A<E;A++){var M=n[A];if(M){var w={stroke:M,strokeWidth:o[A],strokeDasharray:s[A],strokeDasharrayStr:l[A],strokeLinecap:h[A],strokeLinejoin:_[A],strokeMiterlimit:u[A],dx:f,dy:c,bbox:d};this.__renderOnePolygon(t,e,y,v,w)}}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,a){var n=a.fill,o=a.stroke,s=a.strokeWidth,l=n&&"conic"===n.k,h=o&&"conic"===o.k,_=n&&"radial"===n.k&&Array.isArray(n.v),u=s&&s>0&&o&&"radial"===o.k&&Array.isArray(o.v);l||h?(l?this.__conicGradient(t,e,i,r,a):"none"!==n&&this.__drawPolygon(t,e,r,i,a,!0),s&&s>0&&h?lt.warn("Stroke style can not use conic-gradient"):s&&s>0&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!1,!0)):_||u?(_?this.__radialEllipse(t,e,i,r,a,"fill"):"none"!==n&&this.__drawPolygon(t,e,r,i,a,!0),s&&s>0&&u?(lt.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke.v=a.stroke.v[0],this.__drawPolygon(t,e,r,i,a,!1,!0)):s&&s>0&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!1,!0)):this.__drawPolygon(t,e,r,i,a,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,a,n,o){var s=a.fill,l=a.stroke,h=a.strokeWidth,_=a.fillRule,u=a.strokeDasharrayStr,f=a.strokeLinecap,c=a.strokeLinejoin,v=a.strokeMiterlimit,y=a.dx,d=a.dy;if(t===x.CANVAS)this.__preSetCanvas(t,e,a),e.beginPath(),r?i.forEach((function(t){return $d(e,t,y,d)})):$d(e,i,y,d),n&&s&&"none"!==s&&e.fill(_),o&&l&&"none"!==l&&h&&h>0&&e.stroke(),e.closePath();else if(t===x.SVG){var p="";r?i.forEach((function(t){return p+=Jd(t)})):p=Jd(i);var g=[["d",p]];if(!(s&&"none"!==s||l&&"none"!==l))return;n&&s&&"none"!==s?(g.push(["fill",s.v||s]),_&&"nonzero"!==_&&g.push(["fill-rule",_])):g.push(["fill","none"]),o&&l&&"none"!==l&&h&&h>0?(g.push(["stroke",l.v||l]),g.push(["stroke-width",h]),this.__propsStrokeStyle(g,u,f,c,v)):g.push(["stroke-width",0]),this.addGeom("path",g)}}},{key:"__inversePtList",value:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return e?t.map((function(t){return t&&t.length?t.map((function(t){if(!t||!t.length)return null;for(var e=[],n=0,o=t.length;n<o;n+=2){var s=E.calPoint({x:t[n]+i,y:t[n+1]+a},r);e.push(s.x),e.push(s.y)}return e})):null})):t.map((function(t){if(!t||!t.length)return null;for(var e=[],n=0,o=t.length;n<o;n+=2){var s=E.calPoint({x:t[n]+i,y:t[n+1]+a},r);e.push(s.x),e.push(s.y)}return e}))}},{key:"__radialEllipse",value:function(t,e,r,i,a,n){var o=a.strokeWidth,s=a.strokeDasharrayStr,l=a.strokeLinecap,h=a.strokeLinejoin,_=a.strokeMiterlimit,u=a.dx,f=a.dy,v=c(a[n].v,4),y=v[0],d=v[1],p=v[2],g=v[3];d=fs.calMatrixByOrigin(d,p,g);var m=E.inverse(d);if(r=this.__inversePtList(r,i,m,u,f),t===x.CANVAS){if(d){e.save();var b=e.getTransform();b=[b.a,b.b,0,0,b.c,b.d,0,0,0,0,1,0,b.e,b.f,1,0],d=E.multiply(b,d),e.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])}e.beginPath(),e[n+"Style"]!==y&&(e[n+"Style"]=y),i?r.forEach((function(t){return Fe.canvasPolygon(e,t)})):$d(e,r),e[n](),e.closePath(),d&&e.restore()}else if(t===x.SVG){var A="";i?r.forEach((function(t){return A+=Jd(t)})):A=Jd(r);var M=[["d",A]];"fill"===n?(M.push(["fill",y]),M.push(["strokeWidth",0])):"stroke"===n&&(M.push(["fill","none"]),M.push(["stroke",y]),M.push(["stroke-width",o]),this.__propsStrokeStyle(M,s,l,h,_)),M.push(["transform","matrix(".concat(qd(E.m2m6(d),","),")")]),this.addGeom("path",M)}}},{key:"__conicGradient",value:function(t,e,r,i,a){var n=this,o=a.fill,s=a.bbox,l=a.dx,h=void 0===l?0:l,_=a.dy,u=void 0===_?0:_,f=o.v;if(t===x.CANVAS){var v=c(s,4),y=v[0],d=v[1],p=v[2],g=v[3],m=p-y,b=g-d,A=lt.getOffscreenCanvas(m,b,"__$$CONIC_GRADIENT$$__",null),E=A.ctx.getImageData(0,0,m,b);Re.getConicGradientImage(.5*m,.5*b,m,b,o.v.stop,E.data),A.ctx.putImageData(E,0,0),i?r.forEach((function(t){e.save(),e.beginPath(),$d(e,t,h,u),e.clip(),e.closePath(),e.drawImage(A.canvas,y+h,d+u),e.restore()})):(e.save(),e.beginPath(),$d(e,r,h,u),e.clip(),e.closePath(),e.drawImage(A.canvas,y+h,d+u),e.restore()),A.ctx.clearRect(0,0,m,b)}else if(t===x.SVG)if(i)r.forEach((function(t){var r={tagName:"clipPath",children:[{tagName:"path",props:[["d",Jd(t)]]}]},i=e.add(r);n.__cacheDefs.push(r),f.forEach((function(t){n.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Jd(t[0])],["fill",t[1]],["clip-path","url(#"+i+")"]]})}))}));else{var M={tagName:"clipPath",children:[{tagName:"path",props:[["d",Jd(r)]]}]},w=e.add(M);this.__cacheDefs.push(M),f.forEach((function(t){n.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Jd(t[0])],["fill",t[1]],["clip-path","url(#"+w+")"]]})}))}}},{key:"__propsStrokeStyle",value:function(t,e,r,i,a){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),a&&4!==a&&t.push(["stroke-miterlimit",a])}},{key:"__offsetX",value:function(t,r,i){f(l(e.prototype),"__offsetX",this).call(this,t,r,i),i&&i>=vl.REFLOW&&(this.__cacheProps={})}},{key:"__offsetY",value:function(t,r,i){f(l(e.prototype),"__offsetY",this).call(this,t,r,i),i&&i>=vl.REFLOW&&(this.__cacheProps={})}},{key:"__resizeX",value:function(t,r){f(l(e.prototype),"__resizeX",this).call(this,t,r),r&&r>=vl.REFLOW&&(this.__cacheProps={})}},{key:"__resizeY",value:function(t,r){f(l(e.prototype),"__resizeY",this).call(this,t,r),r&&r>=vl.REFLOW&&(this.__cacheProps={})}},{key:"addGeom",value:function(t,e){e=Y.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return Zd(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return Qd}},{key:"getRegister",value:function(t){if(t&&!Y.isString(t)&&t.prototype&&t.prototype instanceof e)return t;if(!t||!Y.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!Qd.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return Qd[t]}},{key:"register",value:function(t,r){if(!(t&&Y.isString(t)&&"$"===t.charAt(0)&&r.prototype&&r.prototype instanceof e))throw new Error("Invalid param");if(e.hasRegister(t))throw new Error("Geom has already register: ".concat(t));Qd[t]=r}},{key:"hasRegister",value:function(t){return t&&Qd.hasOwnProperty(t)}},{key:"delRegister",value:function(t){e.hasRegister(t)&&delete Qd[t]}}]),e}(td),ep=fe.STYLE_KEY,rp=ep.DISPLAY,ip=ep.TOP,ap=ep.BOTTOM,np=ep.POSITION,op=ep.WIDTH,sp=ep.HEIGHT,lp=ep.MARGIN_TOP,hp=ep.MARGIN_BOTTOM,_p=ep.MARGIN_LEFT,up=ep.BORDER_TOP_WIDTH,fp=ep.PADDING_TOP,cp=ep.BORDER_LEFT_WIDTH,vp=ep.PADDING_LEFT,yp=g.AUTO,dp=g.PX,pp=g.REM,xp=g.VW,gp=g.VH,mp=g.VMAX,bp=g.VMIN,Ap=g.PERCENT,Ep=vl.REPAINT,Mp=vl.REFLOW,wp=vl.CACHE,Tp=mo.isRelativeOrAbsolute;function Sp(t,e){t.__refreshLevel|=e?Ep:wp,Array.isArray(t.children)&&t.children.forEach((function(t){t instanceof lh&&(t=t.shadowRoot),Sp(t,!0)}))}function Rp(t,e){var r=0,i=t[0]||0,a=t[0]||0;t.forEach((function(t){r+=t,i=Math.max(i,t),a=Math.min(a,t)})),e.forEach((function(t){r+=t,i=Math.max(i,t),a=Math.min(a,t)}));var n=0;return i>0&&a>0?n=Math.max(i,a):i<0&&a<0?n=Math.min(i,a):0===i&&0===a||(n=i+a),{target:n,total:r,diff:n-r}}function kp(t,e){return t.currentStyle[e].u!==yp}function Cp(t,e){var r=kp(t,op)&&kp(t,sp);if(r&&e){var i=t.__domParent;if(i&&"flex"===i.computedStyle[rp])return!1}return r}function Fp(t,e,r){for(;t&&!(t instanceof eh)&&!(t instanceof lh&&t.shadowRoot instanceof eh)&&["block","flex"].indexOf(t.computedStyle[rp])>-1&&"absolute"!==t.computedStyle[np]&&(r.push(t.computedStyle[hp]),!(t.offsetHeight>0));)e.push(t.computedStyle[lp]),t=t.__prev}function Ip(t,e,r){for(;t&&!(t instanceof eh)&&!(t instanceof lh&&t.shadowRoot instanceof eh)&&["block","flex"].indexOf(t.computedStyle[rp])>-1&&"absolute"!==t.computedStyle[np]&&(e.push(t.computedStyle[lp]),!(t.offsetHeight>0));)r.push(t.computedStyle[hp]),t=t.__next}function Op(t,e,r,i){for(;t;){var a=t.currentStyle;"absolute"!==a[np]||a[ip].u===yp&&a[ap].u===yp||a[ip].u===yp&&[dp,pp,xp,gp,mp,bp].indexOf(a[ap].u)>-1?t.__offsetY(e,!0,Mp):r||"absolute"!==a[np]||a[ip].u!==Ap&&a[ap].u!==Ap||(a[ip].u===Ap?t.__offsetY(.01*e*a[ip].v,!0,Mp):t.__offsetY(e*(1-.01*a[ap].v),!0,Mp)),a instanceof eh||a instanceof lh&&a.shadowRoot instanceof eh||"absolute"===a[np]&&a[sp].u===Ap&&i.push(t),t=t.__next}return e}var Lp={getMergeMargin:Rp,checkTop:function(t,e,r,i){if(t===e)return t;if(e instanceof eh&&(e=e.__domParent),r&&"absolute"===e.currentStyle[np])return e;if(i&&"absolute"===e.computedStyle[np])return e;var a=e;if(r||i){var n=!0,o=e,s=o.__prev,l=o.__next;if((s&&(s instanceof eh||["inline","inlineBlock"].indexOf(s.computedStyle[rp])>-1)||l&&(l instanceof eh||["inline","inlineBlock"].indexOf(l.computedStyle[rp])>-1))&&(n=!1),!n&&(a=e.__domParent)===t)return t}if("absolute"===a.currentStyle[np]&&"absolute"===a.computedStyle[np])return a;if(["inline","inlineBlock"].indexOf(a.currentStyle[rp])>-1||["inline","inlineBlock"].indexOf(a.computedStyle[rp])>-1){do{if((a=a.__domParent)===t)return t}while(["inline","inlineBlock"].indexOf(a.computedStyle[rp])>-1&&"absolute"!==a.computedStyle[np]);if(Cp(a,!0))return a}var h,_=a;do{if(_===t)break;if("flex"===_.computedStyle[rp]&&(h=_),"absolute"===_.computedStyle[np]||Cp(_,!0))break;_=_.__domParent}while(_);return h&&(a=h),a},checkNext:function(t,e,r,i,a,n){var o=e.computedStyle,s=e.currentStyle,l=o[np],h=o[rp],_="absolute"===l,u="absolute"===s[np],f="none"===h,c="none"===s[rp],v=0===e.offsetHeight;if(!f||!c){var y=e.__domParent,d=e.offsetHeight,p=t.renderMode===x.SVG;if(a||n||i&&"static"===l&&"static"===s[np]?i=!1:l===s[np]||"static"!==l&&"static"!==s[np]?f===c||i||p&&Sp(y,!1):i=!0,n&&e===r&&"absolute"===r.computedStyle[np])return e.clearCache(!0),void(p&&Sp(y,!1));var g=0,m=0,b=[],A=[],E=e.isShadowRoot?e.__hostRoot.__prev:e.__prev,M=e.isShadowRoot?e.__hostRoot.__next:e.__next;if(a||v){Fp(E,A,b),Ip(M,A,b),a||(A.push(o[lp]),b.push(o[hp]));var w=Rp(A,b);g=w.target,w.diff}else{Fp(E,A,b),A.push(o[lp]);var T=Rp(A,b);g=T.target,T.diff,A.splice(0),b.splice(0),Ip(M,A,b),b.push(o[hp]),m=(T=Rp(A,b)).target,T.diff}var S=y.__layoutData,R=S.x,k=S.y,C=y.__width,F=y.__currentStyle[sp].u===yp?S.h:y.__height,I=e;I.isShadowRoot&&(I=I.__hostRoot);for(var O,L=I.__prev;L;){var B=L instanceof eh,D=L.computedStyle;if(B||"absolute"!==D[np]&&"none"!==D[rp]){k=L.y+L.outerHeight,O=!0;break}L=L.__prev}var P=y.__computedStyle;O||(k+=P[lp]+P[up]+P[fp]),R+=P[_p]+P[cp]+P[vp];for(var N=u?y:e;N&&N!==t&&!Tp(N);)N=N.__domParent;if(N||(N=t),n&&e===r);else if(c)e.__layoutNone(),i&&(y.__zIndexChildren=null,y.__updateStruct(),p&&Sp(y,!1));else if(u){if(y.__layoutAbs(N,S,e),i&&(y.__zIndexChildren=null,y.__updateStruct(),p&&Sp(y,!1)),!a&&!n&&_)return void e.clearCache(!0)}else{var z=Object.assign({},a?S:e.__layoutData,{x:R,y:k,w:C,h:F});e.__layout(z,!1,!1,!1),e instanceof tp||e.__layoutAbs(N,z,null),i&&(y.__zIndexChildren=null,y.__updateStruct(),p&&Sp(y,!1))}if(a&&e===r&&"absolute"===r.currentStyle[np])return e.clearCache(!0),void(p&&Sp(y,!1));for(var H=y;H;){if("relative"===H.__computedStyle[np]){var G=H,W=G.ox,Y=G.oy;W&&e.__offsetX(W,!1,null),Y&&e.__offsetY(Y,!1,null);break}H=H.__domParent}var U=n&&e===r||0===e.offsetHeight;if(a&&U||n&&v)e.clearCache(!0);else{e.isShadowRoot&&(e=e.__hostRoot);var X,V=0,K=0,j=0;if(b.splice(0),A.splice(0),n||U){Fp(E,A,b),Ip(M,A,b),n||(A.push(o[lp]),b.push(o[hp]));var Z=Rp(A,b);V=Z.target,K=Z.diff}else{Fp(E,A,b),A.push(o[lp]);var q=Rp(A,b);V=q.target,K=q.diff,A.splice(0),b.splice(0),Ip(M,A,b),b.push(o[hp]),j=(q=Rp(A,b)).target,q.diff}if(n)X=e===r||r.isShadowRoot&&r.__hostRoot===e?0:e.offsetHeight;else X=u?0:e.offsetHeight;!n&&K&&e.__offsetY(K,!0,Mp);var $=V+j-g-m+X-d;if($){var J=kp(y,sp);J||y.__resizeY($,Mp);var Q=[];for(Op(M,$,J,Q),e.clearCache(!0);y&&!J&&"absolute"!==y.__computedStyle[np];)M=y.__next,(J=(y=y.__domParent)&&kp(y,sp))||y.__resizeY($,Mp),Op(M,$,J,Q),J&&y.clearCache(!1);Q.forEach((function(t){var e=t.__layoutData,r=e.container;t.__domParent.__layoutAbs(r,e,t)}))}else e.clearCache(!0)}}},clearSvgCache:Sp};function Bp(t,e,r){if(Array.isArray(e))e.forEach((function(e){Bp(t,e,r)}));else if(e instanceof td){if(["canvas","svg","webgl"].indexOf(e.tagName)>-1)throw new Error("Can not nest canvas/svg/webgl");e.__parent=t,r.push(e)}else if(e instanceof lh)e.__parent=t,r.push(e);else if(!Y.isNil(e)&&""!==e){var i=new eh(e);i.__parent=t,r.push(i)}}function Dp(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(Array.isArray(i))i.forEach((function(i){Dp(t,e,r,i,a)}));else if(i instanceof td||i instanceof lh||i instanceof eh){i.__root=t,i.__host=i.__hostRoot=e,i.__parent=r,i.__domParent=r,i.__isDestroyed=!1,a.prev&&(a.prev.__next=i,i.__prev=a.prev),a.prev=i;var n=t.__wasmRoot;if(n&&(i instanceof td?i.__wasmNode=__.Node.new(!1):i instanceof eh&&(i.__wasmNode=__.Node.new(!0))),!(i instanceof eh)){var o=i.props.ref;Y.isString(o)&&o||Y.isNumber(o)?e.ref[o]=i:o&&Y.isFunction(o)&&o(i)}if(i instanceof td&&i.__children)Dp(t,e,i,i.__children,{});else if(i instanceof lh){for(var s=i.render(),l=[];s&&s instanceof lh;){l.push(s);var h=s.render();h&&(s.__shadow=h,h.__host=s),s=h}s instanceof p||(s=new eh(s)),l.length?(i.__shadow=l[0],l[0].__host=i,l.forEach((function(e){e.__shadowRoot=s,e.__hostRoot=i,e.__root=t,e.__domParent=r}))):(i.__shadow=s,s.__host=i),i.__shadowRoot=s,s.__hostRoot=i,s.__root=t,s.__domParent=r,s.__isDestroyed=!1,i.__init(),s instanceof td&&s.__children&&Dp(t,i,s,s.__children,{}),n&&(s instanceof td?s.__wasmNode=__.Node.new(!1):s instanceof eh&&(s.__wasmNode=__.Node.new(!0)))}}return i}var Pp={buildChildren:function(t,e){var r=[];return Bp(t,e,r),r},buildRoot:function(t,e){t.__root=t,t.__host=t,Dp(t,t,t,e,{})},relation:Dp},Np=fe.STYLE_KEY,zp=Np.POSITION,Hp=Np.DISPLAY,Gp=Np.MARGIN_LEFT,Wp=Np.MARGIN_TOP,Yp=Np.MARGIN_RIGHT,Up=Np.MARGIN_BOTTOM,Xp=Np.PADDING_LEFT,Vp=Np.PADDING_BOTTOM,Kp=Np.PADDING_RIGHT,jp=Np.PADDING_TOP,Zp=Np.BORDER_TOP_WIDTH,qp=Np.BORDER_BOTTOM_WIDTH,$p=Np.BORDER_RIGHT_WIDTH,Jp=Np.BORDER_LEFT_WIDTH,Qp=Np.TOP,tx=Np.RIGHT,ex=Np.BOTTOM,rx=Np.LEFT,ix=Np.WIDTH,ax=Np.HEIGHT,nx=Np.TEXT_ALIGN,ox=Np.FLEX_DIRECTION,sx=Np.FLEX_BASIS,lx=Np.FLEX_SHRINK,hx=Np.FLEX_GROW,_x=Np.ALIGN_SELF,ux=Np.ALIGN_ITEMS,fx=Np.JUSTIFY_CONTENT,cx=Np.Z_INDEX,vx=Np.WHITE_SPACE,yx=Np.LINE_HEIGHT,dx=Np.LINE_CLAMP,px=Np.ORDER,xx=Np.FLEX_WRAP,gx=Np.ALIGN_CONTENT,mx=Np.OVERFLOW,bx=Np.FONT_SIZE,Ax=Np.FONT_FAMILY,Ex=Np.FONT_WEIGHT,Mx=Np.WRITING_MODE,wx=fe.ELLIPSIS,Tx=g.AUTO,Sx=g.PX,Rx=g.PERCENT,kx=g.REM,Cx=g.VW,Fx=g.VH,Ix=g.VMAX,Ox=g.VMIN,Lx=mo.isRelativeOrAbsolute,Bx=mo.getBaseline,Dx=mo.getVerticalBaseline,Px=Y.extend,Nx=Y.isFunction,zx=x.CANVAS,Hx=x.SVG,Gx=x.WEBGL,Wx=E.isE,Yx=E.multiply,Ux=E.assignMatrix,Xx=vl.REFLOW;function Vx(t){var e,r,i=[],a={},n=t.children;if(n.forEach((function(t,o){var s=t;t instanceof lh&&(t=t.shadowRoot),t instanceof td&&t.__mask?void 0!==r?a[r].push(t):o&&(n[r=o-1].__iIndex=r,a[r]=[t],e=!0):(r=void 0,t instanceof td?(s.__zIndex=t.currentStyle[cx],Lx(t)?(s.__aIndex=!0,i.push(s)):(s.__aIndex=void 0,i.push(s))):(s.__zIndex=0,i.push(s)),s.__iIndex=o)})),i.sort((function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex})),e)for(var o=i.length-1;o>=0;o--){var s=i[o].__iIndex;a.hasOwnProperty(s)&&i.splice.apply(i,[o+1,0].concat(v(a[s])))}return i}function Kx(t){var e=[];return t.forEach((function(t,r){var i=t;t instanceof lh&&(t=t.shadowRoot),i.__order=t instanceof td?t.currentStyle[px]:0,e.push(i),i.__iIndex=r})),e.sort((function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex})),e}function jx(t,e,r,i,a,n){var o,s,l=t.computedStyle,h=t.root,_=h.renderMode,u=r.list;if(u.forEach((function(t){i-=n?t.outerHeight:t.outerWidth})),_!==zx&&_!==Gx||(s=_===Gx?lt.getFontCanvas().ctx:h.ctx),_===zx||_===Gx){var f=mo.setFontStyle(l);s.font!==f&&(s.font=f),o=s.measureText(wx).width}else o=lt.measureTextSync(wx,l[Ax],l[bx],l[Ex]);for(var c=u.length-1;c>=0;c--){var v=u[c];if(!c||i+v.outerWidth>=o+1e-10){if(v instanceof ks){v.parent.__backtrack(t,e,r,v,i,a,o,l,s,_,n)}else{var y=new Ys(v.x+v.outerWidth+a,v.y,o,t,v,n);e.addItem(y,!0)}break}if(v instanceof ks){var d=v.parent,p=d.textBoxes.indexOf(v);p>-1&&d.textBoxes.splice(p,1)}else v.__layoutNone();u.pop(),i+=n?v.outerHeight:v.outerWidth}}var Zx,qx,$x,Jx=function(t){function e(e,r,i){var a,n=_(a=t.call(this,e,r)||this).style;return n.display&&{flex:!0,block:!0,inline:!0,"inline-block":!0,inlineBlock:!0,none:!0}.hasOwnProperty(n.display)||(xd.INLINE.hasOwnProperty(a.tagName)?n.display="inline":n.display="block"),!n[Ex]&&xd.BOLD.hasOwnProperty(e)&&(n.fontWeight=700),a.__style=mo.normalize(n,Kt.DOM_ENTRY_SET),a.__currentStyle=Px([],a.__style),a.__children=Pp.buildChildren(_(a),i),a.__flexLine=[],a.__ellipsis=null,a.__zIndexChildren=null,a}return s(e,t),n(e,[{key:"__structure",value:function(t,r){var i=f(l(e.prototype),"__structure",this).call(this,t,r),a=[i],n=this.__zIndexChildren=this.__zIndexChildren||Vx(this);n.forEach((function(e,r){var i=e.__structure(t+1,r);Array.isArray(i)?a=a.concat(i):a.push(i)}));var o=a.length-1;return i.num=n.length,i.total=o,a}},{key:"__insertStruct",value:function(t,e){var r,i=this.__struct,a=t.__structure(i.lv+1,e),n=this.__root,o=n.__structs,s=this.__zIndexChildren;if(e){var l=s[e-1].__struct,h=l.total||0;r=o.indexOf(l)+h+1}else r=o.indexOf(i)+1;var _,u=n.__wasmRoot;if(Array.isArray(a)){if(o.splice.apply(o,[r,0].concat(v(a))),_=(a[0].total||0)+1,u)for(var f=a.length-1;f>=0;f--)u.insert_node(r,a[f].node.__wasmNode.ptr)}else o.splice(r,0,a),_=(a.total||0)+1,u&&u.insert_node(r,a.node.__wasmNode.ptr);r++;for(var c=s.length;r<c;r++)s[r].__struct.childIndex++;i.num++,i.total+=_;for(var y=this.__domParent;y;)(i=y.__struct).total=i.total||0,i.total+=_,y=y.__domParent}},{key:"__deleteStruct",value:function(t,e){var r=t.__struct;if(r){var i=(r.total||0)+1,a=this.__root,n=a.__structs,o=n.indexOf(r);n.splice(o,i);var s=a.__wasmRoot;if(s)for(var l=o+i;l>=o;l--)s.remove_node(l);for(var h=this.__zIndexChildren,_=e+1,u=h.length;_<u;_++)h[_].__struct.childIndex--;var f=this.__struct;f.num--,f.total=f.total||0,f.total-=i;for(var c=this.__domParent;c;)(f=c.__struct).total=f.total||0,f.total-=i,c=c.__domParent}}},{key:"__updateStruct",value:function(){var t=this.__root,e=t.__structs,r=this.__struct,i=r.total||0,a=e.indexOf(r),n=this.__zIndexChildren=Vx(this);if(1!==n.length){var o;n.forEach((function(t,e){t.__struct.childIndex=e}));for(var s=[],l=0,h=a+1;h<=a+i;h++){var _=e[h],u={cs:_,list:e.slice(h,h+(_.total||0)+1)};_.childIndex!==l++&&(o=!0),s.push(u),h+=_.total||0}if(o){var f=[];s.sort((function(t,e){return t.cs.childIndex-e.cs.childIndex})),s.forEach((function(t){f=f.concat(t.list)})),e.splice.apply(e,[a+1,i].concat(v(f)));var c=t.__wasmRoot;if(c)for(var y=a+1;y<=a+i;y++)c.set_node(e[y].node,y)}}}},{key:"__tryLayInline",value:function(t,e,r){this.__computeReflow();var i=this.flowChildren,a=this.currentStyle,n=a[Hp],o=a[ix],s=a[ax],l=a[Gp],h=a[Yp],_=a[Wp],u=a[Up],f=a[Xp],c=a[Kp],v=a[jp],y=a[Vp],d=this.computedStyle,p=d[Jp],x=d[$p],g=d[Zp],m=d[qp];if("inline"===n){if(i.length){var b=i[0];b instanceof lh&&(b=b.shadowRoot),b instanceof td?t=b.__tryLayInline(t,e,r):t-=b.firstCharWidth}}else{if(o.u!==Tx)t-=r?this.__calSize(s,e,!0):this.__calSize(o,e,!0);else for(var A=0;A<i.length;A++){if(t<0)return t;var E=i[A];E instanceof lh&&(E=E.shadowRoot),E instanceof td?t=E.__tryLayInline(t,e,r):t-=E.textWidth}r?(t-=this.__calSize(u,e,!0),t-=this.__calSize(y,e,!0),t-=m):(t-=this.__calSize(h,e,!0),t-=this.__calSize(c,e,!0),t-=x)}return r?(t-=this.__calSize(_,e,!0),t-=this.__calSize(v,e,!0),t-=g):(t-=this.__calSize(l,e,!0),t-=this.__calSize(f,e,!0),t-=p),t}},{key:"__offsetX",value:function(t,r,i){if("none"!==this.__computedStyle[Hp]){f(l(e.prototype),"__offsetX",this).call(this,t,r,i);var a=this.__ellipsis;a&&a.__offsetX(t,r),r&&!this.__isInline&&this.lineBoxManager&&this.lineBoxManager.__offsetX(t),this.flowChildren.forEach((function(e){e&&e.__offsetX(t,r,i)}))}}},{key:"__offsetY",value:function(t,r,i){if("none"!==this.__computedStyle[Hp]){f(l(e.prototype),"__offsetY",this).call(this,t,r,i);var a=this.__ellipsis;a&&a.__offsetY(t,r),r&&!this.__isInline&&this.lineBoxManager&&this.lineBoxManager.__offsetY(t),this.flowChildren.forEach((function(e){e&&e.__offsetY(t,r,i)}))}}},{key:"__calBasis",value:function(t,e,r,i,a){var n=this;this.__computeReflow();var o,s=0,l=0,h=0,_=this.flowChildren,u=this.__currentStyle,f=this.__computedStyle,v=i.x,y=i.y,d=i.w,p=i.h,x=u[ox],g=u[sx],m=u[ix],b=u[ax],A=f[yx],E=f[Hp],M=f[dx],w=0===f[Mx].indexOf("vertical"),T=t?m:b,S=g.u===Tx,R=[Sx,Rx,kx,Cx,Fx,Ix,Ox].indexOf(g.u)>-1,k=!S&&!R;R?s=o=this.__calSize(g,t?d:p,!0):S&&[Sx,Rx,kx,Cx,Fx,Ix,Ox].indexOf(T.u)>-1?s=o=this.__calSize(T,t?d:p,!0):S&&(k=!0);var C=0,F=0;if(M=M||0,t){if("flex"===E){var I=-1===["column","columnReverse"].indexOf(x);(_=Kx(_)).forEach((function(i){if(i instanceof td||i instanceof lh&&i.shadowRoot instanceof td){var a=c(i.__calBasis(t,e,r,{x:v,y:y,w:d,h:p},!1),3),o=a[1],s=a[2];I?(l+=o,h+=s):(l=Math.max(l,o),h=Math.max(h,s))}else{if(w){var _=n.__lineBoxManager=new pd(v,y,A,w?Dx(f):Bx(f),w);i.__layoutFlow({x:v,y:y,w:d,h:p,lineBoxManager:_,lineClamp:M,isUpright:w}),l+=i.width,h+=i.width}I?(l+=i.charWidth,h+=i.textWidth):(l=Math.max(l,i.charWidth),h=Math.max(h,i.textWidth))}}))}else if(w){var O=this.__lineBoxManager=new pd(v,y,A,w?Dx(f):Bx(f),w);this.__layoutFlow({x:v,y:y,w:d,h:p,lineBoxManager:O,lineClamp:M,isUpright:w},e,!1,!0),l=h=s=this.width}else{var L=i.lineBoxManager;"inline"!==E&&(L=this.__lineBoxManager=new pd(v,y,A,w?Dx(f):Bx(f),w)),_.forEach((function(i){if(i instanceof td||i instanceof lh&&i.shadowRoot instanceof td){var a=c(i.__calBasis(t,e,r,{x:v,y:y,w:d,h:p,lineBoxManager:L},!1),3),n=a[1],o=a[2],s=i.computedStyle[Hp];"block"===s||"flex"===s?(l=Math.max(l,n),h=Math.max(h,o),C=F=0):(C+=n,F+=o,l=Math.max(l,C),h=Math.max(h,F))}else C+=i.charWidth,F+=i.textWidth,l=Math.max(l,C),h=Math.max(h,F)}))}o&&(h=Math.max(o,h)),k&&(s=h)}else this.__layoutFlow({x:v,y:y,w:d,h:p,isUpright:w},e,!0,!1),l=h=s=this.height;return this.__addMBP(t,d,u,f,[s,l,h],a)}},{key:"__layout",value:function(t,r,i,a){f(l(e.prototype),"__layout",this).call(this,t,r,i,a),this.__layoutStyle()}},{key:"__layoutStyle",value:function(){f(l(e.prototype),"__layoutStyle",this).call(this),this.flowChildren.forEach((function(t){t instanceof eh||t.__layoutStyle()}))}},{key:"__layoutNone",value:function(){f(l(e.prototype),"__layoutNone",this).call(this),this.children.forEach((function(t){(t instanceof td||t instanceof lh&&t.shadowRoot instanceof td)&&t.__layoutNone()}))}},{key:"__layoutBlock",value:function(t,e,r,i){var a=this,n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=s[nx],h=s[vx],_=s[dx],u=s[yx],f=s[mx],c=this.__preLayout(t,!1),v=c.fixedWidth,y=c.fixedHeight,d=c.x,p=c.y,x=c.w,g=c.h,m=c.isParentVertical,b=c.isUpright;if(e&&(v&&!b||y&&b))b?this.__ioSize(void 0,g):this.__ioSize(x,void 0);else if(r&&y)this.__ioSize(void 0,g);else if(i&&v)this.__ioSize(x,void 0);else{_=_||0;var A,E,M=0,w=this.__lineBoxManager=new pd(d,p,u,b?Dx(s):Bx(s),b),T=0,S=0,R=d,k=p,C=[],F=[],I=n.length;n.forEach((function(t,n){var o=t instanceof td||t instanceof lh&&t.shadowRoot instanceof td;o&&t.__computeReflow();var s=o&&"inline"===t.computedStyle[Hp],l=o&&"inlineBlock"===t.computedStyle[Hp],u=s&&t.__isRealInline(),c=M;if(!o||s||l){if(C.length&&F.length){var v=Lp.getMergeMargin(F,C).diff;v&&(b?d+=v:p+=v)}F=[],C=[]}if(o)if(l||s){if(A||E)return void t.__layoutNone();if(b&&p===k||!b&&d===R||!n||"nowrap"===h)M=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:R,ly:k,lineBoxManager:w,lineClamp:_,lineClampCount:M,isUpright:b},e,r,i),t.__isIbFull&&M++,(b&&t.__isUprightIbFull||!b&&t.__isIbFull)&&"nowrap"!==h?(w.addItem(t,!0),b?(d+=t.outerWidth,p=k):(d=R,p+=t.outerHeight),w.setNotEnd()):((l||!u)&&w.addItem(t,!1),d=w.lastX,p=w.lastY),!e&&"hidden"===f&&"nowrap"===h&&(b&&p-k>g+1e-10||!b&&d-R>x+1e-10||M>c)?E=!0:_&&M>=_&&(A=!0),e&&("nowrap"===h?S+=b?t.outerHeight:t.outerWidth:(S=b?t.outerHeight:t.outerWidth,M>c&&(S=Math.max(S,b?g:x))),T=Math.max(T,S));else if(t.__tryLayInline(b?g+k-p:x+R-d,b?g:x,b)>=-1e-10)M=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:R,ly:k,lineBoxManager:w,lineClamp:_,lineClampCount:M,isUpright:b},e,r,i),(l||!u)&&w.addItem(t,!1),d=w.lastX,p=w.lastY,_&&M>=_&&(A=!0),e&&(l||M===c?(S+=b?t.outerHeight:t.outerWidth,T=Math.max(T,S)):(T=Math.max(T,b?g:x),S=b?p-k:d-R,T=Math.max(T,S)));else{if(M++,b?(d=w.endX,p=k):(d=R,p=w.endY),w.setNewLine(),_&&M>=_){t.__layoutNone(),A=!0;var y=w.list,m=y[y.length-1];return void jx(a,w,m,b?g:x,0,b)}M=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:R,ly:k,lineBoxManager:w,lineClamp:_,lineClampCount:M,isUpright:b},e,r,i),t.__isIbFull||t.__isUprightIbFull?(w.addItem(t,!1),b?(d+=t.outerWidth,p=k):(d=R,p+=t.outerHeight),w.setNotEnd(),M++):((l||!u)&&w.addItem(t,!1),d=w.lastX,p=w.lastY),_&&M>=_&&(A=!0),e&&(T=Math.max(T,S),T=Math.max(T,b?g:x),S=b?t.outerHeight:t.outerWidth,T=Math.max(T,S))}}else{E=!1,(b&&p>k||!b&&d>R)&&M++,_&&M>=_&&(A=!0),b?p=k:d=R,w.isEnd&&(b?d=w.endX:p=w.endY,w.setNotEnd(),w.setNewLine()),t.__layoutFlow({x:d,y:p,w:x,h:g,isUpright:b},e,r,i);var O,L="none"===t.currentStyle[Hp];if(!L&&t.flowChildren&&0===t.flowChildren.length){var B=t.computedStyle,D=B[Wp],P=B[Yp],N=B[Up],z=B[Gp],H=B[jp],G=B[Kp],W=B[Vp],Y=B[Xp],U=B[ix],X=B[ax],V=B[Zp],K=B[$p],j=B[qp],Z=B[Jp];b&&Y<=0&&G<=0&&U<=0&&Z<=0&&K<=0?(C.push(P),F.push(z),O=!0):!b&&H<=0&&W<=0&&X<=0&&V<=0&&j<=0&&(C.push(N),F.push(D),O=!0)}if(b?(d+=t.outerWidth,w.__lastX=d):(p+=t.outerHeight,w.__lastY=p),e&&(T=Math.max(T,b?t.outerHeight:t.outerWidth),S=0),L||O){if(n===I-1){var q=Lp.getMergeMargin(F,C).diff;q&&(b?d+=q:p+=q)}}else{var $=t.computedStyle,J=$[Wp],Q=$[Yp],tt=$[Up],et=$[Gp];if(C.length)if(b){F.push(et);var rt=Lp.getMergeMargin(F,C).diff;rt&&(t.__offsetX(rt,!0,null),d+=rt)}else{F.push(J);var it=Lp.getMergeMargin(F,C).diff;it&&(t.__offsetY(it,!0,null),p+=it)}F=[],C=[b?Q:tt]}}else{if(A||E)return void t.__layoutNone();if(b&&p===k||!b&&d===R||!n||"nowrap"===h)M=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:R,ly:k,lineBoxManager:w,lineClamp:_,lineClampCount:M,isUpright:b}),d=w.lastX,p=w.lastY,!e&&"hidden"===f&&"nowrap"===h&&(b&&p-k>g+1e-10||!b&&d-R>x+1e-10||M>c)?E=!0:_&&M>=_&&(A=!0),e&&("nowrap"===h?S+=b?t.height:t.width:(S=b?t.height:t.width,M>c&&(S=Math.max(S,b?g:x))),T=Math.max(T,S));else if(t.__tryLayInline(b?g+k-p:x+R-d)>=-1e-10)M=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:R,ly:k,lineBoxManager:w,lineClamp:_,lineClampCount:M,isUpright:b}),d=w.lastX,p=w.lastY,_&&M>=_&&(A=!0),e&&(M===c?(S+=b?t.height:t.width,T=Math.max(T,S)):(T=Math.max(T,b?g:x),S=b?p-k:d-R,T=Math.max(T,S)));else{if(M++,b?(d=w.endX,p=k):(d=R,p=w.endY),w.setNewLine(),_&&M>=_){t.__layoutNone(),A=!0;var at=w.list,nt=at[at.length-1];return void jx(a,w,nt,b?g:x,0,b)}M=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:R,ly:k,lineBoxManager:w,lineClamp:_,lineClampCount:M,isUpright:b}),d=w.lastX,p=w.lastY,_&&M>=_&&(A=!0),e&&(T=Math.max(T,S),T=Math.max(T,b?g:x),S=b?t.height:t.width,T=Math.max(T,S))}}})),w.isEnd&&(b?d=w.endX:p=w.endY);var O=0,L=0;if(O=v||!e&&!m&&!b?x:e?b?d-t.x:T:d-t.x,L=y||!e&&m&&b?g:e&&b?T:p-t.y,this.__ioSize(O,L),!e){var B=w.verticalAlign(b);if(B){b&&!v?this.__resizeX(B,null):b||y||this.__resizeY(B,null);var D=0,P=w.spreadList,N=!1,z=!1;n.forEach((function(t){if((t instanceof td||t instanceof lh&&t.shadowRoot instanceof td)&&["block","flex"].indexOf(t.computedStyle[Hp])>-1){if(!z)return;N=!0,b?t.__offsetX(P[D],!0,null):t.__offsetY(P[D],!0,null)}else z=!0,N&&D++,N=!1}))}r||i||(["center","right"].indexOf(l)>-1&&(w.horizonAlign(b?L:O,l,b),n.forEach((function(t){t instanceof lh&&(t=t.shadowRoot),t instanceof eh&&t.__inlineSize(b)}))),w.domList.forEach((function(t){t.__inlineSize(b?L:O,l,b)})),this.__marginAuto(o,t,b))}}}},{key:"__layoutFlex",value:function(t,e,r,i){var a=this,n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=this.__flexLine,h=s[ox],_=s[fx],u=s[ux],f=s[dx],v=s[xx],y=s[gx],d=s[yx],p=s[nx],x=this.__preLayout(t,!1),g=x.fixedWidth,m=x.fixedHeight,b=x.x,A=x.y,E=x.w,M=x.h,w=x.isParentVertical,T=x.isUpright;if(e&&(g&&!T||m&&T))T?this.__ioSize(void 0,M):this.__ioSize(E,void 0);else if(r&&m)this.__ioSize(void 0,M);else if(i&&g)this.__ioSize(E,void 0);else{l.splice(0),f=f||0;var S=-1===["column","columnReverse"].indexOf(h),R=[],k=[],C=[],F=[],I=[],O=Kx(n);O.forEach((function(t){if(t instanceof td||t instanceof lh&&t.shadowRoot instanceof td){var a=t.currentStyle,n=t.computedStyle,o=c(t.__calBasis(S,e,r,{x:b,y:A,w:E,h:M},!0),3),l=o[0],h=o[1],_=o[2],u=a[hx],v=a[lx];n[sx]=l,R.push(u),k.push(v),C.push(l),F.push(_),I.push(h)}else if(R.push(0),k.push(1),S&&T||!S&&!T){var y=new pd(b,A,d,T?Dx(s):Bx(s),T);t.__layoutFlow({x:b,y:A,w:E,h:M,lineBoxManager:y,lineClamp:f,lineClampCount:0,isUpright:T},e,r,i);var p=T?t.width:t.height;C.push(p),F.push(p),I.push(p)}else{var x=t.charWidth,g=t.textWidth;C.push(g),F.push(g),I.push(x)}}));var L=S?E:M,B=["wrap","wrapReverse"].indexOf(v)>-1,D=[],P=0,N=[];C.forEach((function(t,e){var r,i=I[e],a=F[e];r=t<i?i:t>a?a:t,N.push(r),B?P+r>L?P?(l.push(D),D=[O[e]],P=r):(D.push(O[e]),l.push(D),D=[],P=0):(D.push(O[e]),P+=r):D.push(O[e])})),D.length&&l.push(D);var z=0,H={x:b,y:A,w:E,h:M},G=[],W=[],Y=[];if(l.forEach((function(t){var n=t.length,o=z+n,l=c(a.__layoutFlexLine(H,S,e,r,i,T,L,g,m,f,0,d,s,_,u,O.slice(z,o),t,p,R.slice(z,o),k.slice(z,o),C.slice(z,o),N.slice(z,o),I.slice(z,o),F.slice(z,o)),5),h=l[0],v=l[1],y=l[2],x=l[3],E=l[4];S?H.y=v:H.x=h,b=Math.max(b,h),A=Math.max(A,v),G.push(y),W.push(x),Y.push(E),z+=n})),e){var U=0;return l.forEach((function(t){var e=0;t.forEach((function(t){S?e+=T?t.outerHeight:t.outerWidth:e=Math.max(e,T?t.outerHeight:t.outerWidth),t instanceof eh&&(T?t.textWidth>M&&(U=Math.max(U,M)):t.textWidth>E&&(U=Math.max(U,E)))})),U=Math.max(U,e)})),void(T?this.__ioSize(void 0,U):this.__ioSize(U,void 0))}var X=0,V=0;if(X=g||!e&&!w&&!T?E:b-t.x,V=m||!e&&w&&T?M:A-t.y,this.__ioSize(X,V),!r&&!i){"rowReverse"===h?l.forEach((function(e){e.forEach((function(e){var r=X-e.outerWidth-2*(e.x-t.x);r&&e.__offsetX(r,!0,null)}))})):"columnReverse"===h&&l.forEach((function(e){e.forEach((function(e){var r=V-e.outerHeight-2*(e.y-t.y);r&&e.__offsetY(r,!0,null)}))}));var K,j=l.length;if("wrapReverse"===v&&j>1){var Z=0,q=[];G.forEach((function(t){q.push(Z),Z+=t}));for(var $=0,J=function(t){var e=l[t],r=q[t],i=$-r;i&&e.forEach((function(t){S?t.__offsetY(i,!0,null):t.__offsetX(i,!0,null)})),$+=G[t]},Q=j-1;Q>=0;Q--)J(Q);l.reverse()}if(j>1&&(m&&S||!S)){var tt=S?V-(A-t.y):X-(b-t.x);if(tt>0)if("center"===y){var et=.5*tt;O.forEach((function(t){S?t.__offsetY(et,!0,null):t.__offsetX(et,!0,null)}))}else if("flexStart"===y);else if("flexEnd"===y)O.forEach((function(t){S?t.__offsetY(tt,!0,null):t.__offsetX(tt,!0,null)}));else if("spaceBetween"===y){var rt=tt/(j-1);l.forEach((function(t,e){e&&t.forEach((function(t){S?t.__offsetY(rt,!0,null):t.__offsetX(rt,!0,null)}))}))}else if("spaceAround"===y){var it=tt/(j+1);l.forEach((function(t,e){t.forEach((function(t){S?t.__offsetY(it*(e+1),!0,null):t.__offsetX(it*(e+1),!0,null)}))}))}else K=tt/j,l.forEach((function(t,e){e&&t.forEach((function(t){S?t.__offsetY(K*e,!0,null):t.__offsetX(K*e,!0,null)}))}))}if(!r&&!i){if(j>1)l.forEach((function(t,e){var r=G[e];K&&(r+=K),a.__flexAlign(t,u,_,S,r,W[e],Y[e])}));else if(j){var at=S?V:X;this.__flexAlign(l[0],u,_,S,at,W[0],Y[0])}this.__marginAuto(o,t,T)}}}}},{key:"__layoutFlexLine",value:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y,d,p,x,g,m,b,A,E){var M=this,w=t.x,T=t.y,S=t.w,R=t.h,k=0;b.forEach((function(t){k+=t}));var C=k>=o,F=[];m.forEach((function(t,e){C?(!g[e]||m[e]<b[e])&&(F[e]=b[e]):(!x[e]||m[e]>b[e])&&(F[e]=b[e])}));var I=0;m.forEach((function(t,e){void 0!==F[e]?I+=F[e]:I+=t}));var O=1/0;O=e?S:l?R:I,I=Math.abs(O-I);var L=0,B=0;C?function(){for(var t=g.map((function(t,e){if(void 0===F[e])return B+=t,t}));0!==B;){B<1&&(L+=I*(1-B),I*=B);var e=void 0,r=0,i=0,a=0;if(t.forEach((function(n,o){if(n){var s=n/B*I,l=m[o]-s;l<A[o]?(F[o]=A[o],t[o]=0,e=!0,i+=m[o]-A[o]):(F[o]=l,r+=n,a+=l)}})),!e){I-=a;break}I-=i,B=r}}():function(){for(var t=x.map((function(t,e){if(void 0===F[e])return B+=t,t}));0!==B;){B<1&&(L+=I*(1-B),I*=B);var e=void 0,r=0,i=0,a=0;if(t.forEach((function(n,o){if(n){var s=n/B*I,l=m[o]+s;l<A[o]?(F[o]=A[o],t[o]=0,e=!0,i+=m[o]-A[o]):(F[o]=l,r+=n,a+=l)}})),!e){I-=a;break}I-=i,B=r}}();var D=0,P=[],N=0;return y.forEach((function(t,o){var s=F[o];if(t instanceof td||t instanceof lh&&t.shadowRoot instanceof td){if(e)t.__layoutFlow({x:w,y:T,w:s,h:R,w3:s,isUpright:n},r,i,a);else{var l,c=t.currentStyle,y=c[_x],d=c[ix];if(r||i||a)t.__layoutFlow({x:w,y:T,w:S,h:s,h3:s,isUpright:n},r,i,a);else(d.u!==Tx||"stretch"===y||"auto"===y&&"stretch"===v)&&(l=!0),l?t.__layoutFlow({x:w,y:T,w:S,h:s,h3:s,isUpright:n},r,i,a):(t.__layoutFlow({x:w,y:T,w:S,h:s,h3:s,isUpright:n},!0,i,a),t.__layoutFlow({x:w,y:T,w:S,w3:t.outerWidth,h:s,h3:s,isUpright:n},r,i,a))}if(!r&&!i&&!a){var p=t.currentStyle;e?(p[Gp].u===Tx&&N++,p[Yp].u===Tx&&N++):(p[Wp].u===Tx&&N++,p[Up].u===Tx&&N++)}}else{var x=M.__lineBoxManager=new pd(w,T,u,n?Dx(f):Bx(f),n);P.push(x),t.__layoutFlow({x:w,y:T,w:e?s:S,h:e?R:s,lineBoxManager:x,lineClamp:h,lineClampCount:_,isUpright:n})}e?(w+=t.outerWidth,D=Math.max(D,t.outerHeight)):(T+=t.outerHeight,D=Math.max(D,t.outerWidth))})),e?T+=D:w+=D,!r&&!i&&!a&&["center","right"].indexOf(p)>-1&&P.forEach((function(t){t.horizonAlign(n?t.height:t.width,p,n)})),[w,T,D,N,C?0:Math.max(0,I+L)]}},{key:"__flexAlign",value:function(t,e,r,i,a,n,o){var s=0;t.forEach((function(t){s=Math.max(s,t.firstBaseline)}));var l=t.length;if(n)for(var h=0,_=o/n,u=0;u<l;u++){var f=t[u],c=f.currentStyle;i?(c[Gp].u===Tx?(h+=_,f.__offsetX(h,!0,null)):h&&f.__offsetX(h,!0,null),c[Yp].u===Tx&&(h+=_)):(c[Wp].u===Tx?(h+=_,f.__offsetY(h,!0,null)):h&&f.__offsetY(h,!0,null),c[Up].u===Tx&&(h+=_))}else if("flexEnd"===r)for(var v=0;v<l;v++){var y=t[v];i?y.__offsetX(o,!0,null):y.__offsetY(o,!0,null)}else if("center"===r)for(var d=.5*o,p=0;p<l;p++){var x=t[p];i?x.__offsetX(d,!0,null):x.__offsetY(d,!0,null)}else if("spaceBetween"===r)for(var g=o/(l-1),m=1;m<l;m++){var b=t[m];i?b.__offsetX(g*m,!0,null):b.__offsetY(g*m,!0,null)}else if("spaceAround"===r)for(var A=.5*o/l,E=0;E<l;E++){var M=t[E];i?M.__offsetX(A*(2*E+1),!0,null):M.__offsetY(A*(2*E+1),!0,null)}else if("spaceEvenly"===r)for(var w=o/(l+1),T=0;T<l;T++){var S=t[T];i?S.__offsetX(w*(T+1),!0,null):S.__offsetY(w*(T+1),!0,null)}t.forEach((function(t){var r=t.currentStyle[_x];if(i)if("flexStart"===r);else if("flexEnd"===r){var n=a-t.outerHeight;0!==n&&t.__offsetY(n,!0,null)}else if("center"===r){var o=a-t.outerHeight;0!==o&&t.__offsetY(.5*o,!0,null)}else if("stretch"===r){var l=t.computedStyle,h=t.currentStyle[ax],_=l[Zp],u=l[qp],f=l[Wp],c=l[Up],v=l[jp],y=l[Vp];if(h.u===Tx){var d=t.height,p=(t.__height=l[ax]=a-f-c-v-y-_-u)-d;t.__y4+=p,t.__y5+=p,t.__y6+=p,t.__height+=p,t.__clientHeight+=p,t.__offsetHeight+=p,t.__outerHeight+=p}}else if("baseline"===r){var x=s-t.firstBaseline;0!==x&&t.__offsetY(x,!0,null)}else if("flexStart"===e);else if("center"===e){var g=a-t.outerHeight;0!==g&&t.__offsetY(.5*g,!0,null)}else if("flexEnd"===e){var m=a-t.outerHeight;0!==m&&t.__offsetY(m,!0,null)}else if("baseline"===e){var b=s-t.firstBaseline;0!==b&&t.__offsetY(b,!0,null)}else{var A=t.computedStyle,E=t.currentStyle,M=E[Hp],w=E[ox],T=E[ax];i&&"flex"===M&&"column"===w&&T.u===Tx&&t.outerHeight<a&&t.__layoutFlow(Object.assign(t.__layoutData,{h3:a}));var S=A[Zp],R=A[qp],k=A[Wp],C=A[Up],F=A[jp],I=A[Vp];if(T.u===Tx){var O=t.height,L=a-k-C-F-I-S-R-O;t.__y4+=L,t.__y5+=L,t.__y6+=L,t.__height+=L,t.__clientHeight+=L,t.__offsetHeight+=L,t.__outerHeight+=L}}else if("flexStart"===r);else if("flexEnd"===r){var B=a-t.outerWidth;0!==B&&t.__offsetX(B,!0,null)}else if("center"===r){var D=a-t.outerWidth;0!==D&&t.__offsetX(.5*D,!0,null)}else if("stretch"===r){var P=t.computedStyle,N=t.currentStyle[ix],z=P[$p],H=P[Jp],G=P[Yp],W=P[Gp],Y=P[Kp],U=P[Xp];if(N.u===Tx){var X=t.width,V=(t.__width=P[ix]=a-W-G-U-Y-z-H)-X;t.__x4+=V,t.__x5+=V,t.__x6+=V,t.__width+=V,t.__clientWidth+=V,t.__offsetWidth+=V,t.__outerWidth+=V}}else if("baseline"===e){var K=s-t.firstBaseline;0!==K&&t.__offsetX(K,!0,null)}else if("flexStart"===e);else if("center"===e){var j=a-t.outerWidth;0!==j&&t.__offsetX(.5*j,!0,null)}else if("flexEnd"===e){var Z=a-t.outerWidth;0!==Z&&t.__offsetX(Z,!0,null)}else if("baseline"===e){var q=s-t.firstBaseline;0!==q&&t.__offsetX(q,!0,null)}else{var $=t.computedStyle,J=t.currentStyle[ix],Q=$[$p],tt=$[Jp],et=$[Yp],rt=$[Gp],it=$[Kp],at=$[Xp];if(J.u===Tx){var nt=t.width,ot=(t.__width=$[ix]=a-rt-et-at-it-Q-tt)-nt;t.__x4+=ot,t.__x5+=ot,t.__x6+=ot,t.__width+=ot,t.__clientWidth+=ot,t.__offsetWidth+=ot,t.__outerWidth+=ot}}}))}},{key:"__layoutInline",value:function(t,e,r,i,a){var n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=s[nx],h=s[vx],_=s[dx],u=s[yx],f=s[Wp],c=s[Up],v=s[Gp],y=s[Yp],d=s[Zp],p=s[qp],x=s[Jp],g=s[$p],m=s[jp],b=s[Vp],A=s[Xp],E=s[Kp],M=t.lineClampCount||0,w=this.__preLayout(t,a),T=w.fixedWidth,S=w.fixedHeight,R=w.x,k=w.y,C=w.w,F=w.h,I=w.lx,O=w.ly,L=w.lineBoxManager,B=w.endSpace,D=w.selfEndSpace,P=w.isUpright;if(e&&(T&&!P||S&&P))return P?this.__ioSize(void 0,F):this.__ioSize(C,void 0),M;var N=o[ix],z=o[ax];if(a&&!this.__isRealInline()&&(a=!1),!a){if(r&&S)return this.__ioSize(void 0,F),M;if(i&&T)return this.__ioSize(C,void 0),M}if(a){this.__isInline=!0,this.__lineBoxManager=L;var H=P?Dx(s):Bx(s);(P&&(f||c||m||b||d||p)||!P&&(v||y||A||E||x||g))&&L.isNewLine?L.genLineBoxByInlineIfNewLine(R,k,u,H):L.setLbByInlineIfNotNewLine(u,H),_=t.lineClamp||0}else L=this.__lineBoxManager=new pd(R,k,u,P?Dx(s):Bx(s),P),I=R,O=k,B=D=M=0;a&&(this.contentBoxList.splice(0),L.pushContentBoxList(this));for(var G=this;"inline"===G.computedStyle[Hp];)G=G.domParent;var W,Y,U,X=G.computedStyle[mx],V=!1,K=!1,j=n.length,Z=!1,q=!1;if(n.forEach((function(t,n){if(Z||q)t.__layoutNone();else{var o=t instanceof td||t instanceof lh&&t.shadowRoot instanceof td;o&&t.__computeReflow();var s=o&&"inline"===t.computedStyle[Hp],l=o&&"inlineBlock"===t.computedStyle[Hp],u=s&&t.__isRealInline();a&&!W&&("nowrap"===h||!o&&n===j-1||_&&n===j-1||M===_-1)&&(W=!0,B+=D);var f=M;if(o){if(s||l||(t.currentStyle[Hp]=t.computedStyle[Hp]="inlineBlock",l=!0,lt.warn("Inline can not contain block/flex")),P&&k===O||!P&&R===I||!n||"nowrap"===h)M=t.__layoutFlow({x:R,y:k,w:C,h:F,lx:I,ly:O,lineBoxManager:L,endSpace:B,lineClamp:_,lineClampCount:M,isUpright:P},e,r,i),(t.__isIbFull||t.__isUprightIbFull)&&M++,t.__isIbFull&&"nowrap"!==h?(P&&F.u===Tx?K=!0:P||C.u!==Tx||(V=!0),L.addItem(t,!0),P?(R+=t.outerWidth,k=O):(R=I,k+=t.outerHeight),L.setNotEnd()):((l||!u)&&L.addItem(t,!1),R=L.lastX,k=L.lastY),!e&&"hidden"===X&&"nowrap"===h&&(P&&k-O>F+1e-10||!P&&R-I>C+1e-10||M>f)?q=!0:_&&M>=_&&(Z=!0);else if(t.__tryLayInline(P?F+O-k-B:C+I-R-B,P?F:C,P)>=-1e-10)M=t.__layoutFlow({x:R,y:k,w:C,h:F,lx:I,ly:O,lineBoxManager:L,endSpace:B,lineClamp:_,lineClampCount:M,isUpright:P},e,r,i),(l||!u)&&L.addItem(t,!1),R=L.lastX,k=L.lastY,_&&M>=_&&(Z=!0);else{if(M++,P?(R=L.endX,k=O):(R=I,k=L.endY),L.setNewLine(),_&&M>=_){t.__layoutNone(),Z=!0;var c=L.list,v=c[c.length-1];return void jx(G,L,v,C,B,P)}M=t.__layoutFlow({x:R,y:k,w:C,h:F,lx:I,ly:O,lineBoxManager:L,endSpace:B,lineClamp:_,lineClampCount:M,isUpright:P},e,r,i),t.__isIbFull||t.__isUprightIbFull?(L.addItem(t,!0),P?(R+=t.outerWidth,k=O):(R=I,k+=t.outerHeight),L.setNotEnd(),M++):((l||!u)&&L.addItem(t,!1),R=L.lastX,k=L.lastY),_&&M>=_&&(Z=!0)}}else{var y=L.size;if(P&&k===O||!P&&R===I||!n||"nowrap"===h)M=t.__layoutFlow({x:R,y:k,w:C,h:F,lx:I,ly:O,lineBoxManager:L,endSpace:B,lineClamp:_,lineClampCount:M,isUpright:P},e,r,i),R=L.lastX,k=L.lastY,!a&&L.size-y>1&&(z.u===Tx&&P&&(K=!0),N.u!==Tx||P||(V=!0)),!e&&"hidden"===X&&"nowrap"===h&&(P&&k-O>F+1e-10||!P&&R-I>C+1e-10||M>f)?q=!0:_&&M>=_&&(Z=!0);else if(t.__tryLayInline(P?F+O-k-B:C+I-R-B)>=-1e-10)M=t.__layoutFlow({x:R,y:k,w:C,h:F,lx:I,ly:O,lineBoxManager:L,endSpace:B,lineClamp:_,lineClampCount:M,isUpright:P},e,r,i),R=L.lastX,k=L.lastY,_&&M>=_&&(Z=!0);else{if(M++,P?(R=L.endX,k=O):(R=I,k=L.endY),L.setNewLine(),_&&M>=_){t.__layoutNone(),Z=!0;var d=L.list,p=d[d.length-1];return void jx(G,L,p,C,B,P)}M=t.__layoutFlow({x:R,y:k,w:C,h:F,lx:I,ly:O,lineBoxManager:L,endSpace:B,lineClamp:_,lineClampCount:M,isUpright:P},e,r,i),R=L.lastX,k=L.lastY,!a&&L.size-y>1&&(z.u===Tx&&P&&(K=!0),N.u!==Tx||P||(V=!0)),_&&M>=_&&(Z=!0)}}}})),P?R=L.endX:k=L.endY,this.__isIbFull=V,this.__isUprightIbFull=K,a){if(D&&(P?L.addY(D):L.addX(D)),!n.length){var $=s[Wp],J=s[Gp],Q=s[jp],tt=s[Xp],et=s[Zp],rt=s[Jp];P?L.addY($+Q+et):L.addX(J+tt+rt)}L.popContentBoxList(),e&&this.__inlineSize(0,"left",P)}else{var it=L.max-(P?t.y:t.x);P?(Y=T?C:R-t.x,U=S?F:V?Math.max(F,it):it):(Y=T?C:V?Math.max(C,it):it,U=S?F:k-t.y),this.__ioSize(Y,U)}if(!e&&!a){var at=L.verticalAlign(P);at&&(P&&!T?this.__resizeX(at,null):P||S||this.__resizeY(at,null)),r||i||(["center","right"].indexOf(l)>-1&&(L.horizonAlign(P?U:Y,l,P),n.forEach((function(t){t instanceof lh&&(t=t.shadowRoot),t instanceof eh&&t.__inlineSize(P)}))),L.domList.forEach((function(t){t.__inlineSize(P?U:Y,l,P)})))}return M}},{key:"__inlineSize",value:function(t,e,r){var i=this.contentBoxList,a=this.computedStyle,n=a[Hp],o=a[Wp],s=a[Yp],l=a[Up],h=a[Gp],_=a[jp],u=a[Kp],f=a[Vp],c=a[Xp],v=a[Zp],y=a[$p],d=a[qp],p=a[Jp],x=a[yx];if("none"!==n){var g,m,b,A,E,M,w,T,S,R,k,C,F,I,O,L,B=i.length;if(B)i.forEach((function(t,e){e?(b=Math.min(b,t.x),w=Math.min(w,t.x),k=Math.min(k,t.x),O=Math.min(O,t.x),e===B-1?(g=E=S=F=Math.max(g,t.x+t.outerWidth),m=M=R=I=Math.max(m,t.y+t.outerHeight),E+=u,M+=f,S+=u+y,R+=f+d,F+=y+u+s,I+=d+f+l):g=E=S=F=Math.max(g,t.x+t.outerWidth)):(b=t.x,A=t.y,O=(k=(w=b-c)-p)-h,L=(C=(T=A-_)-v)-o,g=E=S=F=t.x+t.outerWidth,m=M=R=I=t.y+t.outerHeight,e===B-1&&(E+=u,M+=f,S+=u+y,R+=f+d,F+=y+u+s,I+=d+f+l))})),this.__x=O,this.__y=L,this.__width=a[ix]=g-b,this.__height=a[ax]=Math.max(x,m-A),this.__clientWidth=E-w,this.__clientHeight=M-T,this.__offsetWidth=S-k,this.__offsetHeight=R-C,this.__outerWidth=F-O,this.__outerHeight=I-L,this.__x1=k,this.__y1=C,this.__x2=w,this.__y2=T,this.__x3=b,this.__y3=A,this.__x4=g,this.__y4=m,this.__x5=E,this.__y5=M,this.__x6=S,this.__y6=R,["center","right"].indexOf(e)>-1&&this.children.forEach((function(t){t instanceof eh&&t.__inlineSize(r)}));else{var D=0,P=0;if(["center","right"].indexOf(e)>-1){var N=t;"center"===e&&(N*=.5),N>0&&(r?this.__offsetY(N,!0,null):this.__offsetX(N,!0,null))}r?(D=x,this.__ioSize(D,0),this.__x-=h+c+p):(P=x,this.__ioSize(0,P),this.__y-=o+_+v),this.__x1=this.__x+h,this.__y1=this.__y+o,this.__x2=this.__x1+p,this.__y2=this.__y1+v,this.__x4=this.__x3=this.__x2+c,this.__y4=this.__y3=this.__y2+_,this.__x5=this.__x4+D+u,this.__y5=this.__y4+P+f,this.__x6=this.__x5+y,this.__y6=this.__y5+d,this.__clientWidth=this.__x5-this.__x2,this.__clientHeight=this.__y5-this.__y2,this.__offsetWidth=this.__x6-this.__x1,this.__offsetHeight=this.__y6-this.__y1,this.__outerWidth=this.__offsetWidth+h+s,this.__outerHeight=this.__offsetHeight+o+l}}}},{key:"__layoutAbs",value:function(t,r,i){var a=this,n=t.__x,o=t.__y,s=t.__clientWidth,l=t.__clientHeight,h=t.__computedStyle,_=this.__isDestroyed,u=this.children,f=this.absChildren,c=h[Hp],v=h[Zp],y=h[Jp],d=h[Wp],p=h[Gp],x=h[Xp],g=h[jp];_||"none"===c?this.__layoutNone():(n+=p+y,o+=d+v,f.forEach((function(e){if(i){var h=e;if(h instanceof lh&&(h=e.shadowRoot),i!==h&&i!==e)return}var _=e.currentStyle,u=e.computedStyle;if(e.isDestroyed||"none"===_[Hp])e.__layoutNone();else{e.__computeReflow(),e.__mp(_,u,s);var f,c,v,y,d,p,m,b,A,E,M=_[rx],w=_[Qp],T=_[tx],S=_[ex],R=_[ix],k=_[ax];if(M.u!==Tx?(E=!0,u[rx]=a.__calSize(M,s,!0)):u[rx]="auto",T.u!==Tx?(b=!0,u[tx]=a.__calSize(T,s,!0)):u[tx]="auto",w.u!==Tx?(m=!0,u[Qp]=a.__calSize(w,l,!0)):u[Qp]="auto",S.u!==Tx?(A=!0,u[ex]=a.__calSize(S,l,!0)):u[ex]="auto",E&&b?(f=n+u[rx],v=s-u[tx]-u[rx]):E?(f=n+u[rx],R.u!==Tx&&(v=a.__calSize(R,s,!0))):b?(R.u!==Tx?v=a.__calSize(R,s,!0):d=!0,f=n+s-u[tx]-(v||0),f-=u[Gp],f-=u[Yp],f-=u[Xp],f-=u[Kp],f-=u[Jp],f-=u[$p]):(f=n+x,R.u!==Tx&&(v=a.__calSize(R,s,!0))),m&&A)c=o+u[Qp],y=l-u[Qp]-u[ex];else if(m)c=o+u[Qp],k.u!==Tx&&(y=a.__calSize(k,l,!0));else if(A)k.u!==Tx?y=a.__calSize(k,l,!0):p=!0,c=o+l-u[ex]-(y||0),c-=u[Wp],c-=u[Up],c-=u[jp],c-=u[Vp],c-=u[Zp],c-=u[qp];else{c=o+g;for(var C=e.__prev,F=[],I=[];C;){if(C instanceof eh||C instanceof lh&&C.shadowRoot instanceof eh||"absolute"!==C.computedStyle[zp]){var O=C.computedStyle;if(!(C.clientHeight<=0)){I.push(O[Up]);var L=Lp.getMergeMargin(F,I);c=C.__y1+C.offsetHeight+L.target;break}F.push(O[Wp]),I.push(O[Up])}C=C.__prev}k.u!==Tx&&(y=a.__calSize(k,l,!0))}var B=d?f-n:s+n-f,D=p?c-o:l+o-c;void 0===v&&(e.__layoutFlow({x:f,y:c,w:B,h:D,isUpright:r.isUpright,container:t},!0,!1),B=e.outerWidth),e.__layoutFlow({x:f,y:c,w:B,h:D,w2:v,h2:y,isUpright:r.isUpright,container:t},!1,!1),d&&e.__offsetX(-e.width,!0,null),p&&e.__offsetY(-e.height,!0,null),e.__layoutStyle()}})),u.forEach((function(a){if(i){var n=a;if(n instanceof lh&&(n=a.shadowRoot),i!==n&&i!==a)return}if(a instanceof e)a.__layoutAbs(Lx(a)?a:t,r,null);else if(a instanceof lh){var o=a.shadowRoot;o instanceof e&&o.__layoutAbs(o,r,null)}})),this.__animateRecords&&this.__root.__addAr(this))}},{key:"render",value:function(t,r,i,a){var n=f(l(e.prototype),"render",this).call(this,t,r,i,a),o=this.__ellipsis;return o&&o.render(t,n.ctx,i,a),t===Hx&&(this.virtualDom.type="dom"),n}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach((function(t){t&&t.__destroy()})),this.__ellipsis&&this.__ellipsis.__destroy(),f(l(e.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,r,i){var a=this;if(i)return f(l(e.prototype),"__emitEvent",this).call(this,t,i);var n=this.__isDestroyed,o=this.__computedStyle,s=this.__mask,h=this.__cacheTotal;if(!(n||"none"===o[Hp]||t.__stopPropagation||s)&&("hidden"!==o[mx]||this.willResponseEvent(t,!0))){if(h&&h.available&&h.bbox){Wx(this.__matrix)?this.__perspectiveMatrix&&(r=this.__perspectiveMatrix):(r=Yx(r,this.__matrix),Ux(this.__matrixEvent,r));var _=h.bbox;if(!Se.pointInQuadrilateral(t.x,t.y,_[0],_[1],_[2],_[1],_[2],_[3],_[0],_[3],this.__matrixEvent))return}else Wx(r)||Ux(this.__matrixEvent,E.multiply(r,this.__matrix));var u,c=t.event.type,v=this.listener,y=this.zIndexChildren;v.hasOwnProperty(c)&&(u=v[c]);for(var d=y.length-1;d>=0;d--){var p=y[d];if((p instanceof td||p instanceof lh&&p.shadowRoot instanceof td)&&p.__emitEvent(t,r,!1)){if(t.__stopPropagation)return;return Array.isArray(u)&&!t.__stopImmediatePropagation?u.forEach((function(e){Nx(e)&&e.call(a,t)})):Nx(u)&&!t.__stopImmediatePropagation&&u.call(this,t),!0}}return f(l(e.prototype),"__emitEvent",this).call(this,t,!1)}}},{key:"appendChild",value:function(t,e){var r=this.__root,i=this.__host,a=this.__children;t instanceof p||t instanceof lh||(t=new eh(t)),t.remove();var n=a.length;if(n){var o=a[n-1];o.__next=t,t.__prev=o}t.__parent=this,a.push(t);var s=this.__zIndexChildren=Vx(this);if(this.__isDestroyed)Nx(e)&&e();else{if(Pp.relation(r,i||r,this,t,{}),this.__insertStruct(t,s.indexOf(t)),"none"===t.currentStyle[Hp]||"none"===this.__computedStyle[Hp])return t.__layoutNone(),void(Nx(e)&&e());t instanceof eh&&(t=this),r.__addUpdate(t,null,Xx,!0,!1,!1,!1,!1,e)}}},{key:"prependChild",value:function(t,e){var r=this.__root,i=this.__host,a=this.__children;if(t instanceof p||t instanceof lh||(t=new eh(t)),t.remove(),a.length){var n=a[0];n.__prev=t,t.__next=n}t.__parent=this,a.unshift(t);var o=this.__zIndexChildren=Vx(this);if(this.__isDestroyed)Nx(e)&&e();else{if(Pp.relation(r,i,this,t,{}),this.__insertStruct(t,o.indexOf(t)),"none"===t.currentStyle[Hp]||"none"===this.__computedStyle[Hp])return t.__layoutNone(),void(Nx(e)&&e());t instanceof eh&&(t=this),r.__addUpdate(t,null,Xx,!0,!1,!1,!1,!1,e)}}},{key:"insertBefore",value:function(t,e){var r=this.__root;t instanceof p||t instanceof lh||(t=new eh(t)),t.remove();var i,a=this.isShadowRoot?this.__hostRoot.__parent:this.__parent;if(!a)throw new Error("InsertBefore() illegal");var n=a.__children,o=this.isShadowRoot?this.__hostRoot:this;if(-1===(i=n.indexOf(o)))throw new Error("Index exception of insertBefore()");var s=o.__prev;if(s&&(s.__next=t,t.__prev=s),t.__next=o,o.__prev=t,n.splice(i,0,t),a.__zIndexChildren=Vx(a),this.__isDestroyed)Nx(e)&&e();else{if(Pp.relation(r,a.__host,a,t,{}),a.__insertStruct(t,a.__zIndexChildren.indexOf(t)),"none"===t.currentStyle[Hp]||"none"===a.__computedStyle[Hp])return t.__layoutNone(),void(Nx(e)&&e());t instanceof eh&&(t=a),r.__addUpdate(t,null,Xx,!0,!1,!1,!1,!1,e)}}},{key:"insertAfter",value:function(t,e){var r=this.__root;t instanceof p||t instanceof lh||(t=new eh(t)),t.remove();var i,a=this.isShadowRoot?this.__hostRoot.__parent:this.__parent;if(!a)throw new Error("InsertAfter() illegal");var n=a.__children,o=this.isShadowRoot?this.__hostRoot:this;if(-1===(i=n.indexOf(o)))throw new Error("Index exception of insertBefore()");if(o.__next=t,t.__prev=o,n.splice(i+1,0,t),a.__zIndexChildren=Vx(a),this.__isDestroyed)Nx(e)&&e();else{if(Pp.relation(r,a.__host,a,t,{}),a.__insertStruct(t,a.__zIndexChildren.indexOf(t)),"none"===t.currentStyle[Hp]||"none"===a.__computedStyle[Hp])return t.__layoutNone(),void(Nx(e)&&e());t instanceof eh&&(t=a),r.__addUpdate(t,null,Xx,!0,!1,!1,!1,!1,e)}}},{key:"removeChild",value:function(t,e){t.__parent!==this&&t.__domParent!==this||!(t instanceof p||t instanceof lh)?lt.error("Invalid parameter of removeChild()"):t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.__children.filter((function(t){return t instanceof lh&&(t=t.shadowRoot),t instanceof eh||"absolute"!==t.__currentStyle[zp]}))}},{key:"absChildren",get:function(){return this.__children.filter((function(t){return t instanceof lh&&(t=t.__shadowRoot),t instanceof td&&"absolute"===t.__currentStyle[zp]}))}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseline",get:function(){var t=this.computedStyle,e=t[Wp],r=t[Zp],i=t[jp],a=t[Mx];return this.lineBoxManager&&this.lineBoxManager.size&&0!==a.indexOf("vertical")?e+r+i+this.lineBoxManager.baseline:this.offsetHeight}},{key:"firstBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[Wp]+t[Zp]+t[jp]+this.lineBoxManager.firstBaseline}},{key:"verticalBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return 0;var t=this.computedStyle,e=t[Gp],r=t[Jp],i=t[Xp],a=t[Mx];return this.lineBoxManager&&this.lineBoxManager.size&&-1!==a.indexOf("vertical")?e+r+i+this.lineBoxManager.verticalBaseline:0}}]),e}(td),Qx=0,tg=function(){function t(t,e,r,i,a,n,o,s,l,h){this.__uuid=Qx++,this.__renderMode=t,this.__ctx=e,this.__rootId=r,this.__init(i,a,n,o,s,l,h)}return n(t,[{key:"__init",value:function(t,e,r,i,a,n,o){this.__width=this.__tw=t,this.__height=this.__th=e,this.__bbox=r,this.__page=i,this.__pos=a;var s=i.getCoords(a),l=s.x,h=s.y;this.__x=l,this.__y=h;var _=i.__size;this.__tx1=l/_,this.__ty1=(_-h-e)/_,this.__tx2=(l+t)/_,this.__ty2=(_-h)/_,this.__enabled=!0,this.__available=!1,this.__appendData(n,o)}},{key:"__appendData",value:function(t,e){this.x1=t,this.y1=e;var r=this.__bbox;this.dx=this.__x-r[0],this.dy=this.__y-r[1],this.dbx=t-r[0],this.dby=e-r[1]}},{key:"update",value:function(){this.__page.__update=!0}},{key:"clear",value:function(){if(this.__available)return this.__available=!1,this.update(),!0}},{key:"release",value:function(){if(this.__enabled)return this.clear(),this.__page.del(this.__pos),this.__page=null,this.__enabled=!1,!0}},{key:"reset",value:function(t,e,r,i){this.release();var a=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),o=i.getInstance(this.__renderMode,this.__ctx,this.__rootId,Math.max(a,n),null);if(o){var s=o.page,l=o.pos;this.__init(a,n,t,s,l,e,r)}}},{key:"__offsetY",value:function(t){this.y1+=t;var e=this.__bbox;e[1]+=t,e[3]+=t,this.dy-=t}},{key:"uuid",get:function(){return this.__uuid}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.__enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"size",get:function(){return this.__page.__size}},{key:"texture",get:function(){return this.__page.texture}},{key:"updated",get:function(){return this.__page.__update}}],[{key:"getInstance",value:function(t,e,r,i,a,n,o,s,l){var h=Math.ceil(i[2]-i[0]),_=Math.ceil(i[3]-i[1]),u=Math.max(h,_);if(!(u<=0)){var f=s.getInstance(t,e,r,u,l);if(f)return new o(t,e,r,h,_,i,f.page,f.pos,a,n)}}},{key:"getImgInstance",value:function(t,e,r,i,a,n,o,s,l,h,_){var u=Math.max(o,s);if(!(u<=0)){var f=h.getInstance(t,e,r,u,_);if(f){var c=new l(t,e,r,o,s,i,f.page,f.pos,a,n);return c.__tw=i[2]-i[0],c.__th=i[3]-i[1],c}}}}]),t}(),eg=2048,rg=128,ig={},ag=0,ng=!1,og=function(){function t(t,e,r,i){this.__size=r,this.__number=i,this.__width=this.__height=r;for(var a=[],n=0,o=i*i;n<o;n++)a.push(0);this.__grid=new Int32Array(a),this.__uuid=ag++,this.__update=!1,this.time=0,this.__ctx=e,this.__count=0}return n(t,[{key:"add",value:function(t,e){for(var r=this.number,i=this.grid,a=e;a<e+t;a++){i[a]=t;for(var n=1;n<t;n++)i[a+n*r]=t}this.__count++}},{key:"del",value:function(t){var e=this.number,r=this.grid,i=r[t];if(i){r[t]=0;for(var a=t;a<t+i;a++){r[a]=0;for(var n=1;n<i;n++)r[a+n*e]=0}}this.__count--}},{key:"getCoords",value:function(t){var e=this.number;return{x:t%e*16,y:16*Math.floor(t/e)}}},{key:"getFreePos",value:function(t){var e=this.number,r=this.grid;t:for(var i=0;i<e;i++){var a=r[i];if(a)if(a===t)for(var n=t;n<e;n+=t){var o=i+n*e;if(!r[o])return o}else i+=a-1;else if(i+t<=e){for(var s=i+1,l=i+t;s<l;s++)if(r[s]){i=s-1;continue t}return i}}return-1}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"grid",get:function(){return this.__grid}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t,e,r,i,a,n){if(!(i>eg)){for(var o=1;16*o<i;)o<<=1;for(var s,l,h=eg,_=rg,u=r+","+t,f=ig[u]=ig[u]||[],c=0,v=f.length;c<v;c++){var y=f[c];if(!(n&&y===n||y.__size!==h)&&(l=y.getFreePos(o))>-1){s=y;break}}return s||(s=new a(t,e,h,_),l=0,f.push(s)),s.add(o,l),{page:s,pos:l}}}},{key:"UNIT",get:function(){return 16}},{key:"MAX",get:function(){return eg},set:function(t){ng=!0;for(var e=2;e<t;)if((e<<=1)>=t){e>t&&(e<<=1);break}eg=e,rg=Math.ceil(eg/16)}},{key:"NUMBER",get:function(){return rg}},{key:"genUuid",value:function(){return ag++}},{key:"init",value:function(e,r){ng&&r||e!==eg&&(t.MAX=Math.min(e,2048))}}]),t}(),sg=E.calRectPoint,lg=E.calPoint;function hg(t,e,r){var i=t.createShader(e);if(null==i)throw new Error("unable to create shader");if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error("Failed to compile shader: "+a)}return i}function _g(t,e,r,i,a,n,o){return i&&1!==i&&(t/=i,e/=i,r/=i),t=t===a?0:(t-a)/a,e=e===n?0:(n-e)/n,o&&(r/=-o),1===i?{x:t,y:e,z:r,w:i}:{x:t*i,y:e*i,z:r*i,w:i}}function ug(t,e,r,i,a){var n=t.createTexture();return fg(t,n,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&a?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,a,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n}function fg(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var cg={initShaders:function(t,e,r){var i=function(t,e,r){var i=hg(t,t.VERTEX_SHADER,e),a=hg(t,t.FRAGMENT_SHADER,r);if(!i||!a)return null;var n=t.createProgram();if(!n)return null;if(n.vertexShader=i,n.fragmentShader=a,t.attachShader(n,i),t.attachShader(n,a),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var o=t.getProgramInfoLog(n);throw t.deleteProgram(n),t.deleteShader(a),t.deleteShader(i),new Error("Failed to link program: "+o)}return n}(t,e,r);if(!i)throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),i},convertCoords2Gl:_g,createTexture:ug,bindTexture:fg,drawTextureCache:function(t,e,r,i,a,n){var o=e.length;if(o){var s,l,h;s=Zx&&Zx.length===24*o?Zx:Zx=new Float32Array(24*o),l=qx&&qx.length===12*o?qx:qx=new Float32Array(12*o),h=$x&&$x.length===6*o?$x:$x=new Float32Array(6*o);for(var _=0;_<o;_++){var u=e[_],f=u.cache,c=u.opacity,v=u.matrix,y=u.vertex,d=u.index,p=f.__tw,x=f.__th,g=f.__tx1,m=f.__ty1,b=f.__tx2,A=f.__ty2,E=f.__page,M=f.__bbox;_||(E.__update&&E.genTexture(t),fg(t,E.texture,0));var w=void 0,T=void 0,S=void 0,R=void 0,k=void 0,C=void 0,F=void 0,I=void 0,O=void 0,L=void 0,B=void 0,D=void 0,P=void 0,N=void 0,z=void 0,H=void 0;if(y){var G=16*d;w=y[G],T=y[G+1],S=y[G+2],R=y[G+3],k=y[G+4],C=y[G+5],F=y[G+6],I=y[G+7],O=y[G+8],L=y[G+9],B=y[G+10],D=y[G+11],P=y[G+12],N=y[G+13],z=y[G+14],H=y[G+15]}else{var W=M[0],Y=M[1],U=sg(W+a,Y+x+n,W+p+a,Y+n,v);w=U.x1,T=U.y1,S=U.z1,R=U.w1,k=U.x2,C=U.y2,F=U.z2,I=U.w2,O=U.x3,L=U.y3,B=U.z3,D=U.w3,P=U.x4,N=U.y4,z=U.z4,H=U.w4;var X=Math.max(Math.abs(S),Math.abs(F));X=Math.max(X,Math.abs(B)),(X=Math.max(X,Math.abs(z)))&&(X=Math.max(X,Math.sqrt(r*r+i*i))),w=(U=_g(w,T,S,R,r,i,X)).x,T=U.y,S=U.z,k=(U=_g(k,C,F,I,r,i,X)).x,C=U.y,F=U.z,O=(U=_g(O,L,B,D,r,i,X)).x,L=U.y,B=U.z,P=(U=_g(P,N,z,H,r,i,X)).x,N=U.y,z=U.z}var V=24*_;s[V]=w,s[V+1]=T,s[V+2]=S,s[V+3]=R,s[V+4]=P,s[V+5]=N,s[V+6]=z,s[V+7]=H,s[V+8]=k,s[V+9]=C,s[V+10]=F,s[V+11]=I,s[V+12]=P,s[V+13]=N,s[V+14]=z,s[V+15]=H,s[V+16]=k,s[V+17]=C,s[V+18]=F,s[V+19]=I,s[V+20]=O,s[V+21]=L,s[V+22]=B,s[V+23]=D,l[V=12*_]=g,l[V+1]=m,l[V+2]=g,l[V+3]=A,l[V+4]=b,l[V+5]=m,l[V+6]=g,l[V+7]=A,l[V+8]=b,l[V+9]=m,l[V+10]=b,l[V+11]=A,h[V=6*_]=c,h[V+1]=c,h[V+2]=c,h[V+3]=c,h[V+4]=c,h[V+5]=c}var K=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,K),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW);var j=t.getAttribLocation(t.program,"a_position");t.vertexAttribPointer(j,4,t.FLOAT,!1,0,0),t.enableVertexAttribArray(j);var Z=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,Z),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW);var q=t.getAttribLocation(t.program,"a_texCoords");t.vertexAttribPointer(q,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(q);var $=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,$),t.bufferData(t.ARRAY_BUFFER,h,t.STATIC_DRAW);var J=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(J,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(J);var Q=t.getUniformLocation(t.program,"u_texture");t.uniform1i(Q,0),t.drawArrays(t.TRIANGLES,0,6*o),t.deleteBuffer(K),t.deleteBuffer(Z),t.deleteBuffer($),t.disableVertexAttribArray(j),t.disableVertexAttribArray(q),t.disableVertexAttribArray(J)}},drawBlur:function(t,e,r,i,a){t.useProgram(e),t.viewport(0,0,i,a);var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var o=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);var s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);for(var h=t.getUniformLocation(e,"u_texture"),_=t.getUniformLocation(e,"u_direction"),u=[],f=100/Math.max(i,a),c=i/a,v=0;v<3;v++){var y=ug(t,null,1,i,a);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,y,0),fg(t,r,0),i>=a?t.uniform2f(_,f,0):t.uniform2f(_,f*c,0),t.uniform1i(h,0),t.drawArrays(t.TRIANGLES,0,6);var d=ug(t,null,0,i,a);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,d,0),fg(t,y,1),i>=a?t.uniform2f(_,0,f*c):t.uniform2f(_,0,f),t.uniform1i(h,1),t.drawArrays(t.TRIANGLES,0,6),u.push(r),u.push(y),r=d}return fg(t,null,0),fg(t,null,1),t.deleteBuffer(n),t.deleteBuffer(s),t.disableVertexAttribArray(o),t.disableVertexAttribArray(l),u.forEach((function(e){return t.deleteTexture(e)})),r},drawOverflow:function(t,e,r,i,a,n){t.useProgram(e);var o=r.x,s=r.y,l=r.width,h=r.height,_=r.bbox,u=i.x,f=i.y,c=i.bbox,v=_[0]-c[0],y=_[1]-c[1];t.viewport(0,0,n,n);var d=_g(o,s+h,0,1,a,a),p=d.x,x=d.y,g=_g(o+l,s,0,1,a,a),m=g.x,b=g.y,A=(u+v)/n,E=(n-f-y)/n,M=(u+l+v)/n,w=(n-f-h-y)/n,T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([p,b,p,x,m,b,p,x,m,b,m,x]),t.STATIC_DRAW);var S=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(S,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(S);var R=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,new Float32Array([A,E,A,w,M,E,A,w,M,E,M,w]),t.STATIC_DRAW);var k=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(k,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(k);var C=t.getUniformLocation(e,"u_texture");fg(t,i.__page.texture,0),t.uniform1i(C,0),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(T),t.deleteBuffer(R),t.disableVertexAttribArray(S),t.disableVertexAttribArray(k)},drawMask:function(t,e,r,i,a,n,o){t.useProgram(e),fg(t,i.__page.texture,0),fg(t,a,1),t.viewport(0,0,o,o);var s=r.x,l=r.y,h=r.width,_=r.height,u=i.x,f=i.y,c=i.width,v=i.height,y=_g(s,l+_,0,1,n,n),d=y.x,p=y.y,x=_g(s+h,l,0,1,n,n),g=x.x,m=x.y,b=u/o,A=(o-f)/o,E=(u+c)/o,M=(o-f-v)/o,w=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,w),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,m,d,p,g,m,d,p,g,m,g,p]),t.STATIC_DRAW);var T=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(T,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(T);var S=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,S),t.bufferData(t.ARRAY_BUFFER,new Float32Array([b,A,b,M,E,A,b,M,E,A,E,M]),t.STATIC_DRAW);var R=t.getAttribLocation(e,"a_texCoords1");t.vertexAttribPointer(R,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(R);var k=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,k),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,0,0,1,1,1,0]),t.STATIC_DRAW);var C=t.getAttribLocation(e,"a_texCoords2");t.vertexAttribPointer(C,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(C);var F=t.getUniformLocation(e,"u_texture1");t.uniform1i(F,0);var I=t.getUniformLocation(e,"u_texture2");t.uniform1i(I,1),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(w),t.deleteBuffer(S),t.deleteBuffer(k),t.disableVertexAttribArray(T),t.disableVertexAttribArray(R),t.disableVertexAttribArray(C),t.deleteTexture(a),t.bindTexture(t.TEXTURE_2D,null),fg(t,null,0),fg(t,null,1)},drawMbm:function(t,e,r,i){fg(t,r,0),fg(t,i,1);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var n=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(e,"u_texture1");t.uniform1i(l,0);var h=t.getUniformLocation(e,"u_texture2");t.uniform1i(h,1),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(o),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)},drawCm:function(t,e,r,i,a,n,o){t.useProgram(e),fg(t,i.__page.texture,0),t.viewport(0,0,o,o);var s=r.x,l=r.y,h=r.width,_=r.height,u=i.x,f=i.y,c=i.width,v=i.height,y=_g(s,l+_,0,1,n,n),d=y.x,p=y.y,x=_g(s+h,l,0,1,n,n),g=x.x,m=x.y,b=u/o,A=(o-f)/o,E=(u+c)/o,M=(o-f-v)/o,w=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,w),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,m,d,p,g,m,d,p,g,m,g,p]),t.STATIC_DRAW);var T=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(T,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(T);var S=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,S),t.bufferData(t.ARRAY_BUFFER,new Float32Array([b,A,b,M,E,A,b,M,E,A,E,M]),t.STATIC_DRAW);var R=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(R,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(R);var k=t.getUniformLocation(e,"u_texture");t.uniform1i(k,0);var C=t.getUniformLocation(e,"u_m");t.uniform1fv(C,new Float32Array(a)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(w),t.deleteBuffer(S),t.disableVertexAttribArray(T),t.disableVertexAttribArray(R),fg(t,null,0)},drawDropShadow:function(t,e,r,i,a,n,o,s,l){t.useProgram(e);var h=i.x,_=i.y,u=i.width,f=i.height,c=i.__page,v=c.size,y=c.texture,d=h/v,p=(v-_)/v,x=(h+u)/v,g=(v-_-f)/v,m=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,m);var b=n/o,A=s/l;t.bufferData(t.ARRAY_BUFFER,new Float32Array([-b,-A,-b,A,b,-A,-b,A,b,-A,b,A]),t.STATIC_DRAW);var E=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(E,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(E);var M=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,M),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,g,d,p,x,g,d,p,x,g,x,p]),t.STATIC_DRAW);var w=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(w,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(w),fg(t,y,0);var T=t.getUniformLocation(e,"u_texture");t.uniform1i(T,0);var S=t.getUniformLocation(e,"u_color");t.uniform1fv(S,new Float32Array([a[0]/255,a[1]/255,a[2]/255,a[3]])),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(m),t.deleteBuffer(M),t.disableVertexAttribArray(E),t.disableVertexAttribArray(w),fg(t,null,0)},drawDropShadowMerge:function(t,e,r,i,a,n,o,s,l,h,_,u,f){var c=e.x,v=e.y,y=.5*r,d=_g(c+a,v+s+n,0,1,y,y),p=d.x,x=d.y,g=_g(c+o+a,v+n,0,1,y,y),m=g.x,b=g.y,A=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,A),t.bufferData(t.ARRAY_BUFFER,new Float32Array([p,b,p,x,m,b,p,x,m,b,m,x]),t.STATIC_DRAW);var E=t.getAttribLocation(t.program,"a_position");t.vertexAttribPointer(E,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(E);var M=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,M),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,0,0,1,1,1,0]),t.STATIC_DRAW);var w=t.getAttribLocation(t.program,"a_texCoords");t.vertexAttribPointer(w,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(w);var T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW);var S=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(S,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(S),fg(t,i,0);var R=t.getUniformLocation(t.program,"u_texture");t.uniform1i(R,0),t.drawArrays(t.TRIANGLES,0,6);var k=_g(c+h,v+f+_,0,1,y,y),C=k.x,F=k.y,I=_g(c+u+h,v+_,0,1,y,y),O=I.x,L=I.y;t.bindBuffer(t.ARRAY_BUFFER,A),t.bufferData(t.ARRAY_BUFFER,new Float32Array([C,L,C,F,O,L,C,F,O,L,O,F]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW),fg(t,l,0),t.uniform1i(R,0),t.drawArrays(t.TRIANGLES,0,6),fg(t,null,0)},drawTex2Cache:function(t,e,r,i,a,n){t.useProgram(e);var o=r.__page.__size;t.viewport(0,0,o,o);var s=r.x,l=r.y,h=.5*o,_=_g(s,l+n,0,1,h,h),u=_.x,f=_.y,c=_g(s+a,l,0,1,h,h),v=c.x,y=c.y;fg(t,i,0);var d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,new Float32Array([u,y,u,f,v,y,u,f,v,y,v,f]),t.STATIC_DRAW);var p=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(p,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(p);var x=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,x),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,0,0,1,1,1,0]),t.STATIC_DRAW);var g=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(g,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(g);var m=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,m),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW);var b=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(b,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(b);var A=t.getUniformLocation(e,"u_texture");fg(t,i,0),t.uniform1i(A,0),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(d),t.deleteBuffer(x),t.deleteBuffer(m),t.disableVertexAttribArray(p),t.disableVertexAttribArray(g),t.disableVertexAttribArray(b),t.bindTexture(t.TEXTURE_2D,null)},drawCache2Tex:function(t,e,r,i,a,n){var o=r.x,s=r.y,l=r.width,h=r.height,_=r.__page,u=_.texture,f=_.size;t.useProgram(e),t.viewport(0,0,i,a);var c=.5*i,v=.5*a,y=_g(n,a-n,0,1,c,v),d=y.x,p=y.y,x=_g(i-n,n,0,1,c,v),g=x.x,m=x.y,b=o/f,A=(f-s)/f,E=(o+l)/f,M=(f-s-h)/f,w=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,w),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,m,d,p,g,m,d,p,g,m,g,p]),t.STATIC_DRAW);var T=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(T,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(T);var S=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,S),t.bufferData(t.ARRAY_BUFFER,new Float32Array([b,A,b,M,E,A,b,M,E,A,E,M]),t.STATIC_DRAW);var R=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(R,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(R);var k=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,k),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW);var C=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(C,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(C);var F=t.getUniformLocation(e,"u_texture");fg(t,u,0),t.uniform1i(F,0),t.drawArrays(t.TRIANGLES,0,6)},drawSameSize:function(t,e,r){var i=t.programSs;t.useProgram(i);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var n=t.getAttribLocation(i,"a_position");t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(i,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(i,"u_texture");t.uniform1i(l,0),fg(t,e,0);var h=t.getUniformLocation(i,"u_opacity");t.uniform1f(h,r),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(o),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s),t.useProgram(t.program)},drawOitPlane:function(t,e,r,i,a,n,o,s){for(var l=t.createBuffer(),h=t.getAttribLocation(t.program,"a_position"),_=t.createBuffer(),u=t.getAttribLocation(t.program,"a_texCoords"),f=t.createBuffer(),c=t.getAttribLocation(t.program,"a_opacity"),v=t.getUniformLocation(t.program,"u_texture"),y=0,d=r.length;y<d;y++){var p=r[y],x=p.isPuzzle,g=p.node,m=p.target,b=p.points,A=m.__width,E=m.__height,M=m.__tx1,w=m.__ty1,T=m.__tx2,S=m.__ty2,R=m.__page,k=m.__bbox;R.__update&&R.genTexture(t),fg(t,R.texture,0);var C=k[0],F=k[1],I=g.__opacity,O=g.__matrixEvent,L=T-M,B=S-w,D=[],P=[],N=[],z=[],H=[];if(x){var G,W,Y,U,X=b[0],V=lg({x:C+o+X.px*A,y:F+s+X.py*E,z:0,w:1},O);U=V.w;var K=_g(V.x,V.y,V.z,U,a,n,i);G=K.x,W=K.y,Y=K.z;for(var j=M+X.px*L,Z=w+X.py*B,q=1,$=b.length;q<$-1;q++){D.push(G),D.push(W),D.push(Y),D.push(U),P.push(j),P.push(Z),N.push(I);for(var J=q;J<q+2;J++){var Q=b[J],tt=void 0,et=void 0,rt=void 0,it=void 0,at=z[J];if(at)tt=at.x,et=at.y,rt=at.z,it=at.w;else{var nt=lg({x:C+o+Q.px*A,y:F+s+Q.py*E,z:0,w:1},O);it=nt.w;var ot=_g(nt.x,nt.y,nt.z,it,a,n,i);tt=ot.x,et=ot.y,rt=ot.z,z[J]={x:tt,y:et,z:rt,w:it}}D.push(tt),D.push(et),D.push(rt),D.push(it);var st=void 0,lt=void 0,ht=H[J];ht?(st=ht.tx,lt=ht.ty):(st=M+Q.px*L,lt=w+Q.py*B,H[J]={tx:st,ty:lt}),P.push(st),P.push(lt),N.push(I)}}}else{var _t=sg(C+o,F+E+s,C+A+o,F+s,O),ut=_t.x1,ft=_t.y1,ct=_t.z1,vt=_t.w1,yt=_t.x2,dt=_t.y2,pt=_t.z2,xt=_t.w2,gt=_t.x3,mt=_t.y3,bt=_t.z3,At=_t.w3,Et=_t.x4,Mt=_t.y4,wt=_t.z4,Tt=_t.w4,St=_g(ut,ft,ct,vt,a,n,i);ut=St.x,ft=St.y,ct=St.z,yt=(St=_g(yt,dt,pt,xt,a,n,i)).x,dt=St.y,pt=St.z,gt=(St=_g(gt,mt,bt,At,a,n,i)).x,mt=St.y,bt=St.z,Et=(St=_g(Et,Mt,wt,Tt,a,n,i)).x,Mt=St.y,wt=St.z,D[0]=ut,D[1]=ft,D[2]=ct,D[3]=vt,D[4]=Et,D[5]=Mt,D[6]=wt,D[7]=Tt,D[8]=yt,D[9]=dt,D[10]=pt,D[11]=xt,D[12]=Et,D[13]=Mt,D[14]=wt,D[15]=Tt,D[16]=yt,D[17]=dt,D[18]=pt,D[19]=xt,D[20]=gt,D[21]=mt,D[22]=bt,D[23]=At,P[0]=M,P[1]=w,P[2]=M,P[3]=S,P[4]=T,P[5]=w,P[6]=M,P[7]=S,P[8]=T,P[9]=w,P[10]=T,P[11]=S,N[0]=I,N[1]=I,N[2]=I,N[3]=I,N[4]=I,N[5]=I}t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Float32Array(D),t.STATIC_DRAW),t.vertexAttribPointer(h,4,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h),t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(P),t.STATIC_DRAW),t.vertexAttribPointer(u,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(u),t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,new Float32Array(N),t.STATIC_DRAW),t.vertexAttribPointer(c,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(c),t.uniform1i(v,0),t.drawArrays(t.TRIANGLES,0,N.length)}t.deleteBuffer(l),t.deleteBuffer(_),t.deleteBuffer(f),t.disableVertexAttribArray(h),t.disableVertexAttribArray(u),t.disableVertexAttribArray(c)}},vg=function(t){function e(e,r,i,a){var n;return(n=t.call(this,e,r,i,a)||this).__offscreen=lt.getOffscreenCanvas(i,i,null,a),n}return s(e,t),n(e,[{key:"genTexture",value:function(t){if(this.__update){this.__update=!1;var e=this.texture;e&&t.deleteTexture(e),this.texture=cg.createTexture(t,this.__offscreen.canvas,0,null,null),t.bindTexture(t.TEXTURE_2D,null)}}},{key:"del",value:function(t){if(f(l(e.prototype),"del",this).call(this,t),!this.__count){var r=this.texture;if(r)this.__ctx.deleteTexture(r)}}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.__offscreen.canvas}},{key:"ctx",get:function(){return this.__offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t,r,i,a,n){return f(l(e),"getInstance",this).call(this,t,r,i,a,this,n)}}]),e}(og),yg=fe.STYLE_KEY,dg=yg.TRANSFORM_ORIGIN,pg=yg.TRANSFORM,xg=mo.spreadFilter,gg=E.isE,mg=function(t){function e(e,r,i,a,n,o,s,l,h,_){return t.call(this,e,r,i,a,n,o,s,l,h,_)||this}return s(e,t),n(e,[{key:"clear",value:function(){if(f(l(e.prototype),"clear",this).call(this)){this.__available=!1;var t=this.__page.ctx;return t.setTransform(1,0,0,1,0,0),t.clearRect(this.__x,this.__y,this.__width,this.__height),!0}}},{key:"reset",value:function(t,r,i){return f(l(e.prototype),"reset",this).call(this,t,r,i,vg)}},{key:"canvas",get:function(){return this.__page.canvas}},{key:"ctx",get:function(){return this.__page.ctx}}],[{key:"getInstance",value:function(t,r,i,a,n,o,s){return f(l(e),"getInstance",this).call(this,t,r,i,a,n,o,this,vg,s)}},{key:"genFilter",value:function(t,e){var r=t.x,i=t.y,a=t.size,n=t.canvas,o=t.x1,s=t.y1,l=t.width,h=t.height,_=t.bbox,u=_[0]-(_=xg(_,e))[0],f=_[2]-_[0],c=_[3]-_[1],v=lt.getOffscreenCanvas(f,c,null,"filter");return v.ctx.filter=Fe.canvasFilter(e),v.ctx.drawImage(n,r,i,l,h,u,u,l,h),v.ctx.filter="none",v.bbox=_,v.x=0,v.y=0,v.size=a,v.x1=o,v.y1=s,v.dx=-_[0],v.dy=-_[1],v.dbx=t.dbx+u,v.dby=t.dby+u,v.width=f,v.height=c,v}},{key:"genMask",value:function(t,r,i){for(var a=function(t,e,r){var i=t.size,a=t.x1,n=t.y1,o=t.bbox,s=(r=r||o)[2]-r[0],l=r[3]-r[1],h=r[0]-o[0],_=r[1]-o[1],u=lt.getOffscreenCanvas(s,l,null,e);return u.x=0,u.y=0,u.bbox=r,u.size=i,u.x1=a,u.y1=n,u.dx=-r[0],u.dy=-r[1],u.dbx=t.dbx-h,u.dby=t.dby-_,u.width=s,u.height=l,u}(t,"mask1"),n=[],o=r.__computedStyle,s=o[pg],l=o[dg],h=r.next,_=h.__clip;h&&h.__mask;)n.push(h),h=h.next;var u=a.x,f=a.y,c=a.ctx,v=a.dbx,y=a.dby,d=fs.calMatrixByOrigin(s,l[0]+u+v,l[1]+f+y);return gg(d)&&(d=null),n.forEach((function(t){i(t,a,d)})),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.globalCompositeOperation=_?"source-out":"source-in",e.drawCache(t,a),c.globalCompositeOperation="source-over",a}},{key:"drawCache",value:function(t,e){var r=e.x,i=e.y,a=e.x1,n=e.y1,o=e.ctx,s=e.dbx,l=e.dby,h=t.x,_=t.y,u=t.canvas,f=t.x1,c=t.y1,v=t.dbx,y=t.dby,d=t.width,p=t.height,x=r+f-a+s-v,g=i+c-n+l-y;o.drawImage(u,h,_,d,p,x,g,d,p)}}]),e}(tg);var bg={},Ag=function(t){function e(e,r,i,a,n,o,s,l,h,_){return t.call(this,e,r,i,a,n,o,s,l,h,_)||this}return s(e,t),n(e,[{key:"release",value:function(){if(this.__enabled){var t=this.key,e=bg[t];return e.count--,e.count||(this.clear(),delete bg[t],this.__page.del(this.__pos),this.__page=null),this.__enabled=!1,!0}}},{key:"count",get:function(){return bg[this.key].count}}],[{key:"getInstance",value:function(t,r,i,a,n,o,s){var l=n.width,h=n.height,_=a[2]-a[0],u=a[3]-a[1],f=i+","+n.width+" "+n.height+" "+n.src;if(bg.hasOwnProperty(f)){var c=bg[f];c.count++;var v=c.cache;if(l>.5*og.MAX||h>.5*og.MAX)return{key:f,renderMode:t,ctx:r,rootId:i,__bbox:a,__tx1:0,__ty1:0,__tx2:1,__ty2:1,__width:_,__height:u,__available:!0,__enabled:!0,get available(){return this.__available},get enabled(){return this.__enabled},__page:v.page,get page(){return this.__page},get bbox(){return this.__bbox},reset:function(t,e,r){this.release(),this.__bbox=t},release:function(){if(this.__enabled){var t=this.key,e=bg[t];return e.count--,e.count||(delete bg[t],this.__page.del(),this.__page=null),this.__enabled=!1,!0}}};var y=new e(t,r,i,l,h,a,v.page,v.pos,o,s);return y.__tw=_,y.__th=u,y.key=f,y}if(l>.5*og.MAX||h>.5*og.MAX){var d={key:f,renderMode:t,ctx:r,rootId:i,__bbox:a,__tx1:0,__ty1:0,__tx2:1,__ty2:1,__width:l,__height:h,__tw:_,__th:u,__available:!0,__enabled:!0,get available(){return this.__available},get enabled(){return this.__enabled},__page:{del:function(){r.deleteTexture(this.texture)},texture:cg.createTexture(r,n.source,0,null,null)},get page(){return this.__page},get bbox(){return this.__bbox},reset:function(t,e,r){this.release(),this.__bbox=t},release:function(){if(this.__enabled){var t=this.key,e=bg[t];return e.count--,e.count||(delete bg[t],this.__page.del(),this.__page=null),this.__enabled=!1,!0}}};return bg[f]={cache:d,count:1},d}var p=tg.getImgInstance(t,r,i,a,o,s,l,h,this,vg,null);if(p&&(p.key=f,p))return bg[f]={cache:p,count:1},p}}]),e}(mg),Eg=fe.STYLE_KEY,Mg=Eg.WIDTH,wg=Eg.HEIGHT,Tg=Eg.DISPLAY,Sg=Eg.BORDER_RIGHT_WIDTH,Rg=Eg.BORDER_LEFT_WIDTH,kg=Eg.BORDER_TOP_LEFT_RADIUS,Cg=Eg.BORDER_TOP_RIGHT_RADIUS,Fg=Eg.BORDER_BOTTOM_RIGHT_RADIUS,Ig=Eg.BORDER_BOTTOM_LEFT_RADIUS,Og=Eg.VISIBILITY,Lg=Eg.MARGIN_RIGHT,Bg=Eg.MARGIN_LEFT,Dg=Eg.PADDING_RIGHT,Pg=Eg.PADDING_LEFT,Ng=Eg.FONT_SIZE,zg=Eg.FLEX_BASIS,Hg=g.AUTO,Gg=g.PX,Wg=g.PERCENT,Yg=g.REM,Ug=g.VW,Xg=g.VH,Vg=g.VMAX,Kg=g.VMIN,jg=Fe.canvasPolygon,Zg=Fe.svgPolygon,qg=Y.isFunction,$g=function(t){function e(e,r){var i,a=(i=t.call(this,e,r)||this).props.src,n=i.__loadImg={src:a};if(a){var o=lt.IMG[a];o?o.state===lt.LOADED&&(n.source=o.source,n.width=n.__width=o.width,n.height=n.__height=o.height):lt.measureImg(a,(function(t){a===n.src&&(t.success?qg(r.onLoad)&&r.onLoad():qg(r.onError)&&r.onError())}))}else n.error=!0;return i}return s(e,t),n(e,[{key:"__preLayout",value:function(t,r){var i=f(l(e.prototype),"__preLayout",this).call(this,t,!1),a=this.__loadImg,n=a.src;if(n){var o=lt.IMG[n];o&&o.state!==lt.LOADING?o&&o.state===lt.LOADED&&o.success&&(a.source=o.source,a.width=a.__width=o.width,a.height=a.__height=o.height):a.loading||this.__loadAndRefresh(a,null),a.cache=!1}return i.fixedWidth&&i.fixedHeight||(a.error&&!this.props.placeholder?i.fixedWidth?i.h=i.w:i.fixedHeight?i.w=i.h:i.w=i.h=32:a.source?i.fixedWidth?i.h=i.w*a.height/a.width:i.fixedHeight?i.w=i.h*a.width/a.height:(i.w=a.width,i.h=a.height):i.w=i.h=0,i.fixedWidth=!0,i.fixedHeight=!0),i}},{key:"__addGeom",value:function(t,e){e=Y.hash2arr(e),this.__virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"calContent",value:function(t,r){var i=f(l(e.prototype),"calContent",this).call(this,t,r),a=this.__loadImg;return i?a.onlyImg=!1:(a.onlyImg=!0,"hidden"!==r[Og]&&(r[Mg]||r[wg])&&a.source&&(i=!0)),i}},{key:"render",value:function(t,r){var i,a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=f(l(e.prototype),"render",this).call(this,t,r,n,o),h=this.width,_=this.height,u=this.__isDestroyed,c=this.props.placeholder,v=this.__computedStyle,y=v[Tg],d=v[kg],p=v[Cg],g=v[Fg],m=v[Ig],b=v[Og],A=this.virtualDom,M=this.__loadImg;if(u||"none"===y||"hidden"===b||t===x.WEBGL)return s;i=s.x3+n,a=s.y3+o;var w=M.source;if(M.error&&!c&&e.showError){var T=.02*Math.min(h,_),S="#CCC",R="#DDD",k=i+.7*h,C=a+.3*_,F=5*T,I=[[i+.15*h,a+.7*_],[i+.3*h,a+.4*_],[i+.5*h,a+.6*_],[i+.6*h,a+.5*_],[i+.9*h,a+.8*_],[i+.15*h,a+.8*_]];if(t===x.CANVAS){r.strokeStyle=S,r.lineWidth=T,r.fillStyle=R,r.beginPath(),r.moveTo(i,a),r.lineTo(i+h,a),r.lineTo(i+h,a+_),r.lineTo(i,a+_),r.lineTo(i,a),r.stroke(),r.closePath(),r.beginPath();var O=Se.ellipsePoints(k,C,F,F);Fe.canvasPolygon(r,O,0,0),r.fill(),r.closePath(),r.beginPath(),r.moveTo(I[0][0],I[0][1]);for(var L=1,B=I.length;L<B;L++){var D=I[L];r.lineTo(D[0],D[1])}r.lineTo(I[0][0],I[0][1]),r.fill(),r.closePath()}else if(t===x.SVG){this.__addGeom("rect",[["x",i],["y",a],["width",h],["height",_],["stroke",S],["stroke-width",T],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",k],["cy",C],["r",F],["fill",R]]);for(var P="",N=0,z=I.length;N<z;N++){var H=I[N];N&&(P+=" "),P+=H[0]+","+H[1]}this.__addGeom("polygon",[["points",P],["fill",R]])}}else if(w){var G=dr.calRadius(i,a,h,_,d,p,g,m);if(t===x.CANVAS)G?(r.save(),r.beginPath(),jg(r,G,n,o),r.clip(),r.closePath(),r.drawImage(w,i,a,h,_),r.restore()):r.drawImage(w,i,a,h,_);else if(t===x.SVG){if(M.cache){if(M.cache.cache=!0,A.children=[M.cache],!A.cache&&G){var W=Zg(G),U={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",W],["fill","#FFF"]]}]},X=r.add(U);this.__cacheDefs.push(U),A.conClip="url(#"+X+")"}return}var V;h===M.width&&_===M.height||(V=Sh.matrixResize(M.width,M.height,h,_,i,a,h,_));var K=[["xlink:href",M.error?c:M.src],["x",i],["y",a],["width",M.width],["height",M.height]];if(G){var j=Zg(G),Z={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",j],["fill","#FFF"]]}]},q=r.add(Z);this.__cacheDefs.push(Z),A.conClip="url(#"+q+")",delete A.cache}V&&!E.isE(V)&&K.push(["transform","matrix("+Y.joinArr(E.m2m6(V),",")+")"]);var $={type:"img",tagName:"image",props:K};A.children=[$],M.cache=$}}return s}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[Mg],a=r[wg],n=r[Bg],o=r[Lg],s=r[Pg],l=r[Dg],h=this.computedStyle,_=h[Rg],u=h[Sg];if(i.u!==Hg)t-=this.__calSize(i,e,!0);else{var f=this.__loadImg;f.source&&(a.u===Gg?t-=f.width*a.v/f.height:a.u===Wg?t-=f.width*a.v*e*.01/f.height:a.u===Yg?t-=f.width*a.v*this.root.computedStyle[Ng]/f.height:a.u===Ug?t-=f.width*a.v*this.root.width*.01/f.height:a.u===Xg?t-=f.width*a.v*this.root.height*.01/f.height:a.u===Vg?t-=a.v*Math.max(this.root.width,this.root.height)*.01/f.height:a.u===Kg?t-=a.v*Math.min(this.root.width,this.root.height)*.01/f.height:t-=f.width)}return t-=this.__calSize(o,e,!0),t-=this.__calSize(l,e,!0),t-=u,t-=this.__calSize(n,e,!0),t-=this.__calSize(s,e,!0),t-=_}},{key:"__calBasis",value:function(t,e,r,i,a){this.__computeReflow();var n=0,o=0,s=0,l=this.currentStyle,h=this.computedStyle,_=this.__loadImg,u=i.w,f=i.h,c=l[zg],v=l[Mg],y=l[wg],d=t?v:y,p=t?y:v;if([Gg,Wg,Yg,Ug,Xg,Vg,Kg].indexOf(c.u)>-1)n=s=o=this.__calSize(c,t?u:f,!0);else if([Gg,Wg,Yg,Ug,Xg,Vg,Kg].indexOf(d.u)>-1)n=s=o=this.__calSize(d,t?u:f,!0);else if(_.source||_.error){var x=this.__preLayout(i);if(p.u!==Hg){p=this.__calSize(p,t?f:u,!0);var g=x.w/x.h;n=s=o=t?p*g:p/g}else n=s=o=t?x.w:x.h}return this.__addMBP(t,u,l,h,[n,o,s],a)}},{key:"__loadAndRefresh",value:function(t,e){var r=this;(t.source||t.error)&&(t.source=null),t.loading=!0;var i=this.__root,a=i.ctx,n=this.props.placeholder,o=this.__computedStyle,s=o[Mg],l=o[wg];lt.measureImg(t.src,(function(h){if(h.url===t.src){var _=function(){var t=r.__currentStyle,a=t[Mg],n=t[wg];a.u!==Hg&&n.u!==Hg?i.__addUpdate(r,null,vl.REPAINT,!1,!1,!1,!1,!1,e):i.__addUpdate(r,null,vl.REFLOW,!1,!1,!1,!1,!1,e)};if(t.cache&&(t.cache.cache=!1),t.loading=!1,h.success)t.source=h.source,t.width=h.width,t.height=h.height;else{if(n)return t.error=!0,void lt.measureImg(n,(function(e){e.success&&(t.source=e.source,t.width=e.width,t.height=e.height,"none"===o[Tg]||r.__isDestroyed||_())}),{ctx:a,root:i,width:s,height:l});t.error=!0}"none"===o[Tg]||r.__isDestroyed||_()}}))}},{key:"updateSrc",value:function(t,e){var r=this,i=this.__loadImg;if(t===i.src||this.__isDestroyed||!t&&i.error)return i.src=t,t&&t!==i.src&&lt.measureImg(t,(function(e){if(i.src===t){var a=r.props;e.success?qg(a.onLoad)&&a.onLoad():qg(a.onError)&&a.onError()}})),void(qg(e)&&e());i.src=t,lt.measureImg(t,(function(e){if(i.src===t){var a=r.props;e.success?qg(a.onLoad)&&a.onLoad():qg(a.onError)&&a.onError()}})),this.__loadAndRefresh(i,e)}},{key:"appendChild",value:function(){lt.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src},set:function(t){this.updateSrc(t,null)}},{key:"isReplaced",get:function(){return!0}}],[{key:"toWebglCache",value:function(t,e,r,i,a,n){if(t&&r){var o={src:r},s=lt.IMG[r];if(s){if(s.state===lt.LOADED){o.source=s.source,o.width=o.__width=s.width,o.height=o.__height=s.height;var l=Ag.getInstance(x.CANVAS,t,e.__uuid,[i,a,i+o.width,a+o.height],o,i,a);qg(n)&&n(l)}}else lt.measureImg(r,(function(r){o.source=r.source,o.width=o.__width=r.width,o.height=o.__height=r.height;var s=Ag.getInstance(x.CANVAS,t,e.__uuid,[i,a,i+o.width,a+o.height],o,i,a);qg(n)&&n(s)}))}}}]),e}(Jx);o($g,"showError",!0);var Jg,Qg=function(){function t(t){this.id=t,this.count=0,this.list=[],this.cacheHash={}}return n(t,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;r>=0;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(e){return new t(e)}}]),t}(),tm=Y.joinVd,em=Y.joinDef,rm=vl.NONE,im=vl.TRANSFORM_ALL,am=vl.OPACITY,nm=vl.FILTER,om=vl.MIX_BLEND_MODE;function sm(t,e,r){var i=t.childNodes;!function(t,e,r){for(var i=e.length,a=r.length,n=0,o=t.childNodes;n<Math.min(i,a);n++)lm(o[n],e[n],r[n]);if(n<i)for(var s=i-1;s>=n;s--)gm(t,o,s);else if(n<a)for(;n<a;n++)xm(t,o,n,em(r[n]))}(i[0],e.defs,r.defs),r.hasOwnProperty("lv")||vm(i[1],e.bb,r.bb),fm(t,e,r,!0)}function lm(t,e,r){if(e.tagName!==r.tagName)mm(t,"beforebegin",em(r)),t.parentNode.removeChild(t);else{e.uuid!==r.uuid&&t.setAttribute("id",r.uuid);for(var i={},a=0,n=(e.props||[]).length;a<n;a++){var o=c(e.props[a],2),s=o[0],l=o[1];i[s]=l}for(var h=0,_=(r.props||[]).length;h<_;h++){var u=c(r.props[h],2),f=u[0],v=u[1];i.hasOwnProperty(f)?(i[f]!==v&&t.setAttribute(f,v),delete i[f]):t.setAttribute(f,v)}Object.keys(i).forEach((function(e){t.removeAttribute(e)}));for(var y=t.childNodes,d=e.children.length,p=r.children.length,x=0;x<Math.min(d,p);x++)ym(t,x,e.children[x],r.children[x]);if(x<d)for(var g=d-1;g>=x;g--)gm(t,y,g);else if(x<p)for(;x<p;x++)xm(t,y,x,tm(r.children[x]))}}function hm(t,e,r){"dom"===e.type?"dom"===r.type?fm(t,e,r):"geom"===r.type?cm(t,e,r):pm(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var i=e.children.length,a=r.children.length,n=0;n<Math.min(i,a);n++)ym(t,n,e.children[n],r.children[n],!0);var o=t.childNodes;if(n<i)for(var s=i-1;s>=n;s--)gm(t,o,s);else if(n<a)for(;n<a;n++)xm(t,o,n,tm(r.children[n]))}(t,e,r):pm(t,r):"geom"===e.type?"dom"===r.type?function(t,e,r){cm(t,e,r)}(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return void um(t,e,r,r.lv);if(r.hasOwnProperty("lv"))um(t,e,r,r.lv);else{_m(t,e,r),vm(t.firstChild,e.bb,r.bb);for(var i=e.children.length,a=r.children.length,n=0,o=t.lastChild,s=o.childNodes;n<Math.min(i,a);n++)ym(o,n,e.children[n],r.children[n]);if(n<i)for(var l=i-1;l>=n;l--)gm(o,s,l);else if(n<a)for(;n<a;n++)xm(o,s,n,tm(r.children[n]))}}(t,e,r):pm(t,r):"img"===e.type?"img"===r.type?dm(t,e,r):pm(t,r):"item"===e.type&&"item"===r.type&&dm(t,e,r)}function _m(t,e,r){var i=r.transform,a=r.opacity,n=r.visibility,o=r.mask,s=r.overflow,l=r.filter,h=r.mixBlendMode,_=r.conClip;if(e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==a&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),e.visibility!==n&&t.setAttribute("visibility",n),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==l||e.mixBlendMode!==h){var u=(l?"filter:".concat(l,";"):"")+(h?"mix-blend-mode:".concat(h,";"):"");u?t.setAttribute("style",u):t.removeAttribute("filter")}e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==_&&(_?t.childNodes[1].setAttribute("clip-path",_):t.childNodes[1].removeAttribute("clip-path"))}function um(t,e,r,i){var a=r.transform,n=r.opacity,o=r.mask,s=r.filter,l=r.mixBlendMode;if(i!==rm&&(o?t.setAttribute("mask",o):t.removeAttribute("mask"),i&im&&(a?t.setAttribute("transform",a):t.removeAttribute("transform")),i&am&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),i&nm||i&om)){var h=(s?"filter:".concat(s,";"):"")+(l?"mix-blend-mode:".concat(l,";"):"");h?t.setAttribute("style",h):t.removeAttribute("style")}}function fm(t,e,r,i){if(r.cache)um(t,0,r,r.lv);else{r.hasOwnProperty("lv")?um(t,0,r,r.lv):(_m(t,e,r),i||vm(t.firstChild,e.bb,r.bb));for(var a=e.children.length,n=r.children.length,o=0,s=t.lastChild,l=s.childNodes;o<Math.min(a,n);o++)hm(l[o],e.children[o],r.children[o]);if(o<a)for(var h=a-1;h>=o;h--)gm(s,l,h);else if(o<n)for(;o<n;o++)xm(s,l,o,tm(r.children[o]))}}function cm(t,e,r){_m(t,e,r),vm(t.firstChild,e.bb,r.bb);for(var i=e.children.length,a=r.children.length,n=0,o=t.lastChild,s=o.childNodes;n<Math.min(i,a);n++)pm(s[n],r.children[n]);if(n<i)for(var l=i-1;l>=n;l--)gm(o,s,l);else if(n<a)for(;n<a;n++)xm(o,s,n,tm(r.children[n]))}function vm(t,e,r){for(var i=e.length,a=r.length,n=0;n<Math.min(i,a);n++)ym(t,n,e[n],r[n]);var o=t.childNodes;if(n<i)for(var s=i-1;s>=n;s--)gm(t,o,s);else if(n<a)for(;n<a;n++)xm(t,o,n,tm(r[n]))}function ym(t,e,r,i,a){var n=t.childNodes;r.tagName!==i.tagName?pm(n[e],i):(dm(n[e],r,i),a&&r.content!==i.content&&(n[e].innerHTML=i.content))}function dm(t,e,r){if(!r.cache){for(var i={},a=0,n=(e.props||[]).length;a<n;a++){var o=c(e.props[a],2),s=o[0],l=o[1];i[s]=l}for(var h=0,_=(r.props||[]).length;h<_;h++){var u=c(r.props[h],2),f=u[0],v=u[1];i.hasOwnProperty(f)?(i[f]!==v&&t.setAttribute(f,v),delete i[f]):t.setAttribute(f,v)}Object.keys(i).forEach((function(e){t.removeAttribute(e)}))}}function pm(t,e){var r;Array.isArray(e)?(r="",e.forEach((function(t){r+=tm(t)}))):r=tm(e),mm(t,"beforebegin",r),t.parentNode.removeChild(t)}function xm(t,e,r,i){r>=e.length?mm(t,"beforeend",i):mm(e[r],"beforebegin",i)}function gm(t,e,r){e[r]&&t.removeChild(e[r])}function mm(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(Jg=Jg||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(Jg.childNodes[0],t)}}var bm=Fe.canvasPolygon;var Am=0,Em=1,Mm=2,wm=3,Tm=4,Sm=function(t,e,r,i){return e.sort((function(t,e){return t.lv===e.lv?t.idx===e.idx?t.type-e.type:e.idx-t.idx:e.lv-t.lv})),e.forEach((function(e){var a=e.type,n=e.offscreen;if(0===a){var o=n.matrix,s=n.target,l=n.ctx,h=n.x,_=n.y,u=n.offsetWidth,f=n.offsetHeight,c=n.list;t.globalCompositeOperation="destination-in",t.globalAlpha=1,t.setTransform(o[0],o[1],o[4],o[5],o[12],o[13]),t.fillStyle="#FFF",t.beginPath(),c?bm(t,c):t.rect(h,_,u,f),t.fill(),t.closePath(),t.globalCompositeOperation="source-over",(t=l).setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(s.canvas,0,0,r,i,0,0,r,i),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,r,i),s.release()}else if(1===a){var v=n.target,y=n.ctx,d=n.filter;if(t.filter){var p=lt.getOffscreenCanvas(r,i,null,"filter2");p.ctx.filter=Fe.canvasFilter(d),r&&i&&p.ctx.drawImage(v.canvas,0,0,r,i,0,0,r,i),p.ctx.filter="none",v.ctx.globalAlpha=1,v.ctx.setTransform(1,0,0,1,0,0),v.ctx.clearRect(0,0,r,i),r&&i&&v.ctx.drawImage(p.canvas,0,0,r,i,0,0,r,i),p.ctx.setTransform(1,0,0,1,0,0),p.ctx.clearRect(0,0,r,i),p.release()}(t=y).setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(v.canvas,0,0,r,i,0,0,r,i),v.ctx.setTransform(1,0,0,1,0,0),v.ctx.globalAlpha=1,v.ctx.clearRect(0,0,r,i),v.release()}else if(2===a){var x=n.mask,g=n.isClip,m=n.target;if(g)(t=x.ctx).globalCompositeOperation="source-out",t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(m.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",m.ctx.setTransform(1,0,0,1,0,0),m.ctx.clearRect(0,0,r,i),m.release(),(t=n.ctx).globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(x.canvas,0,0,r,i,0,0,r,i),x.ctx.setTransform(1,0,0,1,0,0),x.ctx.clearRect(0,0,r,i),x.release();else{var b=n.target;(t=b.ctx).globalCompositeOperation="destination-in",t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(x.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",x.ctx.setTransform(1,0,0,1,0,0),x.ctx.clearRect(0,0,r,i),x.release(),(t=n.ctx).globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(b.canvas,0,0,r,i,0,0,r,i),b.ctx.setTransform(1,0,0,1,0,0),b.ctx.clearRect(0,0,r,i),b.release()}}else if(3===a){var A=n.target;(t=n.ctx).globalCompositeOperation=n.mixBlendMode,t.setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(A.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",A.ctx.globalAlpha=1,A.ctx.setTransform(1,0,0,1,0,0),A.ctx.clearRect(0,0,r,i),A.release()}else 4===a&&(t=n.ctx)})),t},Rm=1e-6;function km(t){var e=[],r=t[3],i=t[2]/r,a=t[1]/r,n=(3*a-i*i)/3,o=(2*i*i*i-9*a*i+27*(t[0]/r))/27,s=i/3,l=o*o/4+n*n*n/27,h=o/2;if(Math.abs(l)<=Rm&&(l=0),l>0){var _,u,f=Math.sqrt(l);u=(_=-h+f)>=0?Math.pow(_,1/3):-Math.pow(-_,1/3),(_=-h-f)>=0?u+=Math.pow(_,1/3):u-=Math.pow(-_,1/3),e.push(u-s)}else if(l<0){var c=Math.sqrt(-n/3),v=Math.atan2(Math.sqrt(-l),-h)/3,y=Math.cos(v),d=Math.sin(v),p=Math.sqrt(3);e.push(2*c*y-s),e.push(-c*(y+p*d)-s),e.push(-c*(y-p*d)-s)}else{var x;x=h>=0?-Math.pow(h,1/3):Math.pow(-h,1/3),e.push(2*x-s),e.push(-x-s)}return e}var Cm={getRoots:function(t){for(var e=t.length-1,r=e;r>=0&&Math.abs(t[r])<1e-12;r--)e--;var i=[];switch(e){case 1:i=function(t){var e=[],r=t[1];return 0!==r&&e.push(-t[0]/r),e}(t);break;case 2:i=function(t){var e=[],r=t[2],i=t[1]/r,a=i*i-t[0]/r*4;if(a>0){var n=Math.sqrt(a);e.push(.5*(-i+n)),e.push(.5*(-i-n))}else 0===a&&e.push(.5*-i);return e}(t);break;case 3:i=km(t);break;case 4:i=function(t){var e=[],r=t[4],i=t[3]/r,a=t[2]/r,n=t[1]/r,o=t[0]/r,s=km([1,-a,i*n-4*o,-i*i*o+4*a*o-n*n].reverse())[0],l=i*i/4-a+s;if(Math.abs(l)<=Rm&&(l=0),l>0){var h=Math.sqrt(l),_=3*i*i/4-h*h-2*a,u=(4*i*a-8*n-i*i*i)/(4*h),f=_+u,c=_-u;if(Math.abs(f)<=Rm&&(f=0),Math.abs(c)<=Rm&&(c=0),f>=0){var v=Math.sqrt(f);e.push(-i/4+(h+v)/2),e.push(-i/4+(h-v)/2)}if(c>=0){var y=Math.sqrt(c);e.push(-i/4+(y-h)/2),e.push(-i/4-(y+h)/2)}}else if(l<0);else{var d=s*s-4*o;if(d>=-1e-6){d<0&&(d=0);var p=3*i*i/4-2*a;if(p+(d=2*Math.sqrt(d))>=Rm){var x=Math.sqrt(p+d);e.push(-i/4+x/2),e.push(-i/4-x/2)}if(p-d>=Rm){var g=Math.sqrt(p-d);e.push(-i/4+g/2),e.push(-i/4-g/2)}}}return e}(t)}return i}},Fm=Cm.getRoots,Im=ae.unitize3,Om=ae.crossProduct3,Lm=ae.dotProduct3,Bm=ae.isParallel3,Dm=ae.length3,Pm=1e-6;function Nm(t,e){for(var r=0,i=e.length-1;i>=0;i--)r=r*t+e[i];return r}function zm(t,e,r){var i,a=Nm(t,r),n=Nm(e,r);if(Math.abs(a)<=Pm)i=t;else if(Math.abs(n)<=Pm)i=e;else if(a*n<=0)for(var o=Math.log(e-t),s=6*Math.LN10,l=Math.ceil((o+s)/Math.LN2),h=0;h<l;h++){var _=Nm(i=.5*(t+e),r);if(Math.abs(_)<=Pm)break;_*a<0?(e=i,n=_):(t=i,a=_)}return i}function Hm(t,e,r){var i,a=[];if(1===r.length-1)null!=(i=zm(t,e,r))&&a.push(i);else{var n=function(t){for(var e=[],r=1;r<t.length;r++)e.push(r*t[r]);return e}(r),o=Hm(t,e,n);if(o.length>0){null!=(i=zm(t,o[0],r))&&a.push(i);for(var s=0;s<=o.length-2;s++)null!=(i=zm(o[s],o[s+1],r))&&a.push(i);null!=(i=zm(o[o.length-1],e,r))&&a.push(i)}else null!=(i=zm(t,e,r))&&a.push(i)}return a}function Gm(t,e){return{x:t.x-e.x,y:t.y-e.y,z:t.z-e.z}}function Wm(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))}function Ym(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}}function Um(t,e){var r=1/e;return{x:t.x*r,y:t.y*r,z:t.z*r}}function Xm(t,e,r){var i=Gm(t,e),a=Gm(r,e),n=Lm(a,a);return Lm(a,i)/n}var Vm={intersectBezier2Line:function(t,e,r,i,a,n,o,s,l,h){var _,u,f,c,v=[],y=Math.min(o,l),d=Math.min(s,h),p=Math.max(o,l),x=Math.max(s,h),g=function(t,e){return t.x*e.x+t.y*e.y},m=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}};_={x:-2*t+2*r,y:-2*e+2*i},u={x:t,y:e},f=o*h-l*s;for(var b=[g(c={x:s-h,y:l-o},{x:t-2*r+a,y:e-2*i+n}),g(c,_),g(c,u)+f].reverse(),A=Fm(b),E=0;E<A.length;E++){var M=A[E];if(0<=M&&M<=1){var w=m({x:t,y:e},{x:r,y:i},M),T=m({x:r,y:i},{x:a,y:n},M),S=m(w,T,M);o===l?d<=S.y&&S.y<=x&&v.push(S):s===h?y<=S.x&&S.x<=p&&v.push(S):S.x>=y&&S.y>=d&&S.x<=p&&S.y<=x&&v.push(S)}}return v},intersectBezier3Line:function(t,e,r,i,a,n,o,s,l,h,_,u){var f,c,v,y,d=[],p=Math.min(l,_),x=Math.min(h,u),g=Math.max(l,_),m=Math.max(h,u),b=function(t,e){return t.x*e.x+t.y*e.y},A=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}};f={x:3*r-t-3*a+o,y:3*i-e-3*n+s},c={x:3*t-6*r+3*a,y:3*e-6*i+3*n},v={x:-3*t+3*r,y:-3*e+3*i};for(var E=[l*u-_*h+b(y={x:h-u,y:_-l},{x:t,y:e}),b(y,v),b(y,c),b(y,f)],M=Fm(E),w=0;w<M.length;w++){var T=M[w];if(0<=T&&T<=1){var S=A({x:t,y:e},{x:r,y:i},T),R=A({x:r,y:i},{x:a,y:n},T),k=A({x:a,y:n},{x:o,y:s},T),C=A(S,R,T),F=A(R,k,T),I=A(C,F,T);l===_?x<=I.y&&I.y<=m&&d.push(I):h===u?p<=I.x&&I.x<=g&&d.push(I):I.x>=p&&I.y>=x&&I.x<=g&&I.y<=m&&d.push(I)}}return d},intersectBezier2Bezier2:function(t,e,r,i,a,n,o,s,l,h,_,u){var f,c,v,y,d,p,x,g=[];if(c={x:2*r-2*t,y:2*i-2*e},v={x:t,y:e},y={x:o-2*l+_,y:s-2*h+u},d={x:2*l-2*o,y:2*h-2*s},p={x:o,y:s},0===(f={x:t-2*r+a,y:e-2*i+n}).y){var m=f.x*(v.y-p.y),b=m-c.x*c.y,A=c.y*c.y;x=[f.x*y.y*y.y,2*f.x*d.y*y.y,f.x*d.y*d.y-y.x*A-y.y*m-y.y*b,-d.x*A-d.y*m-d.y*b,(v.x-p.x)*A+(v.y-p.y)*b].reverse()}else{var E=f.x*y.y-f.y*y.x,M=f.x*d.y-d.x*f.y,w=c.x*f.y-c.y*f.x,T=v.y-p.y,S=f.y*(v.x-p.x)-f.x*T,R=-c.y*w+f.y*S,k=w*w;x=[E*E,2*E*M,(-y.y*k+f.y*M*M+f.y*E*S+E*R)/f.y,(-d.y*k+f.y*M*S+M*R)/f.y,(T*k+S*R)/f.y].reverse()}for(var C=Fm(x),F=0;F<C.length;F++){var I=C[F];if(0<=I&&I<=1){var O=Fm([f.x,c.x,v.x-p.x-I*d.x-I*I*y.x].reverse()),L=Fm([f.y,c.y,v.y-p.y-I*d.y-I*I*y.y].reverse());if(O.length>0&&L.length>0){t:for(var B=0;B<O.length;B++){var D=O[B];if(0<=D&&D<=1)for(var P=0;P<L.length;P++)if(Math.abs(D-L[P])<1e-4){var N=y.x*I*I+d.x*I+p.x,z=y.y*I*I+d.y*I+p.y;g.push({x:N,y:z,t:D});break t}}}}}return g},intersectBezier3Bezier3:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y){var d,p,x,g,m,b,A,E,M=[];d={x:3*r-t-3*a+o,y:3*i-e-3*n+s},p={x:3*t-6*r+3*a,y:3*e-6*i+3*n},m={x:3*_-l-3*f+v,y:3*u-h-3*c+y},b={x:3*l-6*_+3*f,y:3*h-6*u+3*c},A={x:-3*l+3*_,y:-3*h+3*u},E={x:l,y:h};for(var w=(g={x:t,y:e}).x*g.x,T=g.x*g.x*g.x,S=g.y*g.y,R=g.y*g.y*g.y,k=(x={x:-3*t+3*r,y:-3*e+3*i}).x*x.x,C=x.x*x.x*x.x,F=x.y*x.y,I=x.y*x.y*x.y,O=p.x*p.x,L=p.x*p.x*p.x,B=p.y*p.y,D=p.y*p.y*p.y,P=d.x*d.x,N=d.x*d.x*d.x,z=d.y*d.y,H=d.y*d.y*d.y,G=E.x*E.x,W=E.x*E.x*E.x,Y=E.y*E.y,U=E.y*E.y*E.y,X=A.x*A.x,V=A.x*A.x*A.x,K=A.y*A.y,j=b.x*b.x,Z=b.x*b.x*b.x,q=b.y*b.y,$=m.x*m.x,J=m.y*m.y,Q=Hm(0,1,[-N*(m.y*m.y*m.y)+H*(m.x*m.x*m.x)-3*d.x*z*$*m.y+3*P*d.y*m.x*J,-6*d.x*b.x*z*m.x*m.y+6*P*d.y*b.y*m.x*m.y+3*b.x*H*$-3*N*b.y*J-3*d.x*z*b.y*$+3*P*b.x*d.y*J,-6*A.x*d.x*z*m.x*m.y-6*d.x*b.x*z*b.y*m.x+6*P*b.x*d.y*b.y*m.y+3*A.x*H*$+3*j*H*m.x+3*A.x*P*d.y*J-3*d.x*A.y*z*$-3*d.x*j*z*m.y+P*d.y*m.x*(6*A.y*m.y+3*q)+N*(-A.y*J-2*q*m.y-m.y*(2*A.y*m.y+q)),x.x*p.y*d.x*d.y*m.x*m.y-x.y*p.x*d.x*d.y*m.x*m.y+6*A.x*b.x*H*m.x+3*x.x*p.x*d.x*d.y*J+6*g.x*d.x*z*m.x*m.y-3*x.x*p.x*z*m.x*m.y-3*x.y*p.y*d.x*d.y*$-6*g.y*P*d.y*m.x*m.y-6*E.x*d.x*z*m.x*m.y+3*x.y*p.y*P*m.x*m.y-2*p.x*B*d.x*m.x*m.y-6*A.x*d.x*b.x*z*m.y-6*A.x*d.x*z*b.y*m.x-6*d.x*A.y*b.x*z*m.x+6*A.x*P*d.y*b.y*m.y+2*O*p.y*d.y*m.x*m.y+Z*H-3*g.x*H*$+3*g.y*N*J+3*E.x*H*$+D*d.x*$-L*d.y*J-3*g.x*P*d.y*J+3*g.y*d.x*z*$-2*x.x*p.y*P*J+x.x*p.y*z*$-x.y*p.x*P*J+2*x.y*p.x*z*$+3*E.x*P*d.y*J-p.x*B*d.y*$-3*E.y*d.x*z*$+O*p.y*d.x*J-3*d.x*j*z*b.y+P*d.y*m.x*(6*E.y*m.y+6*A.y*b.y)+P*b.x*d.y*(6*A.y*m.y+3*q)+N*(-2*A.y*b.y*m.y-E.y*J-b.y*(2*A.y*m.y+q)-m.y*(2*E.y*m.y+2*A.y*b.y)),6*x.x*p.x*d.x*d.y*b.y*m.y+x.x*p.y*d.x*b.x*d.y*m.y+x.x*p.y*d.x*d.y*b.y*m.x-x.y*p.x*d.x*b.x*d.y*m.y-x.y*p.x*d.x*d.y*b.y*m.x-6*x.y*p.y*d.x*b.x*d.y*m.x-6*g.x*b.x*H*m.x+6*E.x*b.x*H*m.x+6*g.y*N*b.y*m.y+2*D*d.x*b.x*m.x-2*L*d.y*b.y*m.y+6*g.x*d.x*b.x*z*m.y+6*g.x*d.x*z*b.y*m.x+6*g.y*d.x*b.x*z*m.x-3*x.x*p.x*b.x*z*m.y-3*x.x*p.x*z*b.y*m.x+2*x.x*p.y*b.x*z*m.x+4*x.y*p.x*b.x*z*m.x-6*g.x*P*d.y*b.y*m.y-6*g.y*P*b.x*d.y*m.y-6*g.y*P*d.y*b.y*m.x-4*x.x*p.y*P*b.y*m.y-6*E.x*d.x*b.x*z*m.y-6*E.x*d.x*z*b.y*m.x-2*x.y*p.x*P*b.y*m.y+3*x.y*p.y*P*b.x*m.y+3*x.y*p.y*P*b.y*m.x-2*p.x*B*d.x*b.x*m.y-2*p.x*B*d.x*b.y*m.x-2*p.x*B*b.x*d.y*m.x-6*E.y*d.x*b.x*z*m.x-6*A.x*d.x*A.y*z*m.x-6*A.x*d.x*b.x*z*b.y+6*E.x*P*d.y*b.y*m.y+2*O*p.y*d.x*b.y*m.y+2*O*p.y*b.x*d.y*m.y+2*O*p.y*d.y*b.y*m.x+3*A.x*j*H+3*X*H*m.x-3*d.x*A.y*j*z-3*X*d.x*z*m.y+P*b.x*d.y*(6*E.y*m.y+6*A.y*b.y)+P*d.y*m.x*(6*E.y*b.y+3*K)+A.x*P*d.y*(6*A.y*m.y+3*q)+N*(-2*E.y*b.y*m.y-m.y*(2*E.y*b.y+K)-A.y*(2*A.y*m.y+q)-b.y*(2*E.y*m.y+2*A.y*b.y)),x.x*A.x*p.y*d.x*d.y*m.y+x.x*p.y*d.x*A.y*d.y*m.x+x.x*p.y*d.x*b.x*d.y*b.y-x.y*p.x*A.x*d.x*d.y*m.y-x.y*p.x*d.x*A.y*d.y*m.x-x.y*p.x*d.x*b.x*d.y*b.y-6*x.y*A.x*p.y*d.x*d.y*m.x-6*g.x*A.x*H*m.x+6*E.x*A.x*H*m.x+2*A.x*D*d.x*m.x+6*g.x*A.x*d.x*z*m.y+6*g.x*d.x*A.y*z*m.x+6*g.x*d.x*b.x*z*b.y+6*g.y*A.x*d.x*z*m.x-3*x.x*p.x*A.x*z*m.y-3*x.x*p.x*A.y*z*m.x-3*x.x*p.x*b.x*z*b.y+2*x.x*A.x*p.y*z*m.x+4*x.y*p.x*A.x*z*m.x-6*g.y*A.x*P*d.y*m.y-6*g.y*P*A.y*d.y*m.x-6*g.y*P*b.x*d.y*b.y-6*E.x*A.x*d.x*z*m.y-6*E.x*d.x*A.y*z*m.x-6*E.x*d.x*b.x*z*b.y+3*x.y*A.x*p.y*P*m.y-3*x.y*p.y*d.x*j*d.y+3*x.y*p.y*P*A.y*m.x+3*x.y*p.y*P*b.x*b.y-2*p.x*A.x*B*d.x*m.y-2*p.x*A.x*B*d.y*m.x-2*p.x*B*d.x*A.y*m.x-2*p.x*B*d.x*b.x*b.y-6*E.y*A.x*d.x*z*m.x-6*A.x*d.x*A.y*b.x*z+6*E.y*P*A.y*d.y*m.x+2*O*A.x*p.y*d.y*m.y+2*O*p.y*A.y*d.y*m.x+2*O*p.y*b.x*d.y*b.y-3*g.x*j*H+3*E.x*j*H+3*X*b.x*H+D*d.x*j+3*g.y*d.x*j*z+x.x*p.y*j*z+2*x.y*p.x*j*z-p.x*B*j*d.y-3*E.y*d.x*j*z-3*X*d.x*z*b.y+O*p.y*d.x*(2*A.y*m.y+q)+x.x*p.x*d.x*d.y*(6*A.y*m.y+3*q)+A.x*P*d.y*(6*E.y*m.y+6*A.y*b.y)+L*d.y*(-2*A.y*m.y-q)+g.y*N*(6*A.y*m.y+3*q)+x.y*p.x*P*(-2*A.y*m.y-q)+x.x*p.y*P*(-4*A.y*m.y-2*q)+g.x*P*d.y*(-6*A.y*m.y-3*q)+P*b.x*d.y*(6*E.y*b.y+3*K)+E.x*P*d.y*(6*A.y*m.y+3*q)+N*(-2*E.y*A.y*m.y-b.y*(2*E.y*b.y+K)-E.y*(2*A.y*m.y+q)-A.y*(2*E.y*m.y+2*A.y*b.y)),-g.x*x.x*p.y*d.x*d.y*m.y+g.x*x.y*p.x*d.x*d.y*m.y+6*g.x*x.y*p.y*d.x*d.y*m.x-6*g.y*x.x*p.x*d.x*d.y*m.y-g.y*x.x*p.y*d.x*d.y*m.x+g.y*x.y*p.x*d.x*d.y*m.x+x.x*x.y*p.x*p.y*d.x*m.y-x.x*x.y*p.x*p.y*d.y*m.x+x.x*E.x*p.y*d.x*d.y*m.y+x.x*E.y*p.y*d.x*d.y*m.x+x.x*A.x*p.y*d.x*d.y*b.y+x.x*p.y*d.x*A.y*b.x*d.y-E.x*x.y*p.x*d.x*d.y*m.y-6*E.x*x.y*p.y*d.x*d.y*m.x-x.y*p.x*E.y*d.x*d.y*m.x-x.y*p.x*A.x*d.x*d.y*b.y-x.y*p.x*d.x*A.y*b.x*d.y-6*x.y*A.x*p.y*d.x*b.x*d.y-6*g.x*E.x*H*m.x-6*g.x*A.x*b.x*H-2*g.x*D*d.x*m.x+6*E.x*A.x*b.x*H+2*E.x*D*d.x*m.x+2*A.x*D*d.x*b.x+2*g.y*L*d.y*m.y-6*g.x*g.y*d.x*z*m.x+3*g.x*x.x*p.x*z*m.y-2*g.x*x.x*p.y*z*m.x-4*g.x*x.y*p.x*z*m.x+3*g.y*x.x*p.x*z*m.x+6*g.x*g.y*P*d.y*m.y+6*g.x*E.x*d.x*z*m.y-3*g.x*x.y*p.y*P*m.y+2*g.x*p.x*B*d.x*m.y+2*g.x*p.x*B*d.y*m.x+6*g.x*E.y*d.x*z*m.x+6*g.x*A.x*d.x*z*b.y+6*g.x*d.x*A.y*b.x*z+4*g.y*x.x*p.y*P*m.y+6*g.y*E.x*d.x*z*m.x+2*g.y*x.y*p.x*P*m.y-3*g.y*x.y*p.y*P*m.x+2*g.y*p.x*B*d.x*m.x+6*g.y*A.x*d.x*b.x*z-3*x.x*E.x*p.x*z*m.y+2*x.x*E.x*p.y*z*m.x+x.x*x.y*B*d.x*m.x-3*x.x*p.x*E.y*z*m.x-3*x.x*p.x*A.x*z*b.y-3*x.x*p.x*A.y*b.x*z+2*x.x*A.x*p.y*b.x*z+4*E.x*x.y*p.x*z*m.x+4*x.y*p.x*A.x*b.x*z-2*g.x*O*p.y*d.y*m.y-6*g.y*E.x*P*d.y*m.y-6*g.y*E.y*P*d.y*m.x-6*g.y*A.x*P*d.y*b.y-2*g.y*O*p.y*d.x*m.y-2*g.y*O*p.y*d.y*m.x-6*g.y*P*A.y*b.x*d.y-x.x*x.y*O*d.y*m.y-2*x.x*F*d.x*d.y*m.x+3*E.x*x.y*p.y*P*m.y-2*E.x*p.x*B*d.x*m.y-2*E.x*p.x*B*d.y*m.x-6*E.x*E.y*d.x*z*m.x-6*E.x*A.x*d.x*z*b.y-6*E.x*d.x*A.y*b.x*z+3*x.y*E.y*p.y*P*m.x+3*x.y*A.x*p.y*P*b.y+3*x.y*p.y*P*A.y*b.x-2*p.x*E.y*B*d.x*m.x-2*p.x*A.x*B*d.x*b.y-2*p.x*A.x*B*b.x*d.y-2*p.x*B*d.x*A.y*b.x-6*E.y*A.x*d.x*b.x*z-F*p.x*p.y*d.x*m.x+2*E.x*O*p.y*d.y*m.y+6*E.y*P*A.y*b.x*d.y+2*k*x.y*d.x*d.y*m.y+k*p.x*p.y*d.y*m.y+2*O*E.y*p.y*d.y*m.x+2*O*A.x*p.y*d.y*b.y+2*O*p.y*A.y*b.x*d.y+V*H+3*w*H*m.x-3*S*N*m.y+3*G*H*m.x+I*P*m.x-C*z*m.y-x.x*F*P*m.y+k*x.y*z*m.x-3*w*d.x*z*m.y+3*S*P*d.y*m.x-k*B*d.x*m.y+F*O*d.y*m.x-3*X*d.x*A.y*z-3*G*d.x*z*m.y+3*Y*P*d.y*m.x+x.x*p.x*d.x*d.y*(6*E.y*m.y+6*A.y*b.y)+L*d.y*(-2*E.y*m.y-2*A.y*b.y)+g.y*N*(6*E.y*m.y+6*A.y*b.y)+x.y*p.x*P*(-2*E.y*m.y-2*A.y*b.y)+O*p.y*d.x*(2*E.y*m.y+2*A.y*b.y)+x.x*p.y*P*(-4*E.y*m.y-4*A.y*b.y)+g.x*P*d.y*(-6*E.y*m.y-6*A.y*b.y)+E.x*P*d.y*(6*E.y*m.y+6*A.y*b.y)+A.x*P*d.y*(6*E.y*b.y+3*K)+N*(-2*E.y*A.y*b.y-Y*m.y-A.y*(2*E.y*b.y+K)-E.y*(2*E.y*m.y+2*A.y*b.y)),-g.x*x.x*p.y*d.x*d.y*b.y+g.x*x.y*p.x*d.x*d.y*b.y+6*g.x*x.y*p.y*d.x*b.x*d.y-6*g.y*x.x*p.x*d.x*d.y*b.y-g.y*x.x*p.y*d.x*b.x*d.y+g.y*x.y*p.x*d.x*b.x*d.y+x.x*x.y*p.x*p.y*d.x*b.y-x.x*x.y*p.x*p.y*b.x*d.y+x.x*E.x*p.y*d.x*d.y*b.y+x.x*E.y*p.y*d.x*b.x*d.y+x.x*A.x*p.y*d.x*A.y*d.y-E.x*x.y*p.x*d.x*d.y*b.y-6*E.x*x.y*p.y*d.x*b.x*d.y-x.y*p.x*E.y*d.x*b.x*d.y-x.y*p.x*A.x*d.x*A.y*d.y-6*g.x*E.x*b.x*H-2*g.x*D*d.x*b.x+2*E.x*D*d.x*b.x+2*g.y*L*d.y*b.y-6*g.x*g.y*d.x*b.x*z+3*g.x*x.x*p.x*z*b.y-2*g.x*x.x*p.y*b.x*z-4*g.x*x.y*p.x*b.x*z+3*g.y*x.x*p.x*b.x*z+6*g.x*g.y*P*d.y*b.y+6*g.x*E.x*d.x*z*b.y-3*g.x*x.y*p.y*P*b.y+2*g.x*p.x*B*d.x*b.y+2*g.x*p.x*B*b.x*d.y+6*g.x*E.y*d.x*b.x*z+6*g.x*A.x*d.x*A.y*z+4*g.y*x.x*p.y*P*b.y+6*g.y*E.x*d.x*b.x*z+2*g.y*x.y*p.x*P*b.y-3*g.y*x.y*p.y*P*b.x+2*g.y*p.x*B*d.x*b.x-3*x.x*E.x*p.x*z*b.y+2*x.x*E.x*p.y*b.x*z+x.x*x.y*B*d.x*b.x-3*x.x*p.x*E.y*b.x*z-3*x.x*p.x*A.x*A.y*z+4*E.x*x.y*p.x*b.x*z-2*g.x*O*p.y*d.y*b.y-6*g.y*E.x*P*d.y*b.y-6*g.y*E.y*P*b.x*d.y-6*g.y*A.x*P*A.y*d.y-2*g.y*O*p.y*d.x*b.y-2*g.y*O*p.y*b.x*d.y-x.x*x.y*O*d.y*b.y-2*x.x*F*d.x*b.x*d.y+3*E.x*x.y*p.y*P*b.y-2*E.x*p.x*B*d.x*b.y-2*E.x*p.x*B*b.x*d.y-6*E.x*E.y*d.x*b.x*z-6*E.x*A.x*d.x*A.y*z+3*x.y*E.y*p.y*P*b.x+3*x.y*A.x*p.y*P*A.y-2*p.x*E.y*B*d.x*b.x-2*p.x*A.x*B*d.x*A.y-F*p.x*p.y*d.x*b.x+2*E.x*O*p.y*d.y*b.y-3*x.y*X*p.y*d.x*d.y+6*E.y*A.x*P*A.y*d.y+2*k*x.y*d.x*d.y*b.y+k*p.x*p.y*d.y*b.y+2*O*E.y*p.y*b.x*d.y+2*O*A.x*p.y*A.y*d.y-3*g.x*X*H+3*E.x*X*H+3*w*b.x*H-3*S*N*b.y+3*G*b.x*H+X*D*d.x+I*P*b.x-C*z*b.y+3*g.y*X*d.x*z-x.x*F*P*b.y+x.x*X*p.y*z+2*x.y*p.x*X*z+k*x.y*b.x*z-p.x*X*B*d.y-3*E.y*X*d.x*z-3*w*d.x*z*b.y+3*S*P*b.x*d.y-k*B*d.x*b.y+F*O*b.x*d.y-3*G*d.x*z*b.y+3*Y*P*b.x*d.y+O*p.y*d.x*(2*E.y*b.y+K)+x.x*p.x*d.x*d.y*(6*E.y*b.y+3*K)+L*d.y*(-2*E.y*b.y-K)+g.y*N*(6*E.y*b.y+3*K)+x.y*p.x*P*(-2*E.y*b.y-K)+x.x*p.y*P*(-4*E.y*b.y-2*K)+g.x*P*d.y*(-6*E.y*b.y-3*K)+E.x*P*d.y*(6*E.y*b.y+3*K)+N*(-2*E.y*K-Y*b.y-E.y*(2*E.y*b.y+K)),-g.x*x.x*p.y*d.x*A.y*d.y+g.x*x.y*p.x*d.x*A.y*d.y+6*g.x*x.y*A.x*p.y*d.x*d.y-6*g.y*x.x*p.x*d.x*A.y*d.y-g.y*x.x*A.x*p.y*d.x*d.y+g.y*x.y*p.x*A.x*d.x*d.y-x.x*x.y*p.x*A.x*p.y*d.y+x.x*x.y*p.x*p.y*d.x*A.y+x.x*E.x*p.y*d.x*A.y*d.y+6*x.x*p.x*E.y*d.x*A.y*d.y+x.x*E.y*A.x*p.y*d.x*d.y-E.x*x.y*p.x*d.x*A.y*d.y-6*E.x*x.y*A.x*p.y*d.x*d.y-x.y*p.x*E.y*A.x*d.x*d.y-6*g.x*E.x*A.x*H-2*g.x*A.x*D*d.x+6*g.y*E.y*N*A.y+2*E.x*A.x*D*d.x+2*g.y*L*A.y*d.y-2*L*E.y*A.y*d.y-6*g.x*g.y*A.x*d.x*z+3*g.x*x.x*p.x*A.y*z-2*g.x*x.x*A.x*p.y*z-4*g.x*x.y*p.x*A.x*z+3*g.y*x.x*p.x*A.x*z+6*g.x*g.y*P*A.y*d.y+6*g.x*E.x*d.x*A.y*z-3*g.x*x.y*p.y*P*A.y+2*g.x*p.x*A.x*B*d.y+2*g.x*p.x*B*d.x*A.y+6*g.x*E.y*A.x*d.x*z+4*g.y*x.x*p.y*P*A.y+6*g.y*E.x*A.x*d.x*z+2*g.y*x.y*p.x*P*A.y-3*g.y*x.y*A.x*p.y*P+2*g.y*p.x*A.x*B*d.x-3*x.x*E.x*p.x*A.y*z+2*x.x*E.x*A.x*p.y*z+x.x*x.y*A.x*B*d.x-3*x.x*p.x*E.y*A.x*z+4*E.x*x.y*p.x*A.x*z-6*g.x*E.y*P*A.y*d.y-2*g.x*O*p.y*A.y*d.y-6*g.y*E.x*P*A.y*d.y-6*g.y*E.y*A.x*P*d.y-2*g.y*O*A.x*p.y*d.y-2*g.y*O*p.y*d.x*A.y-x.x*x.y*O*A.y*d.y-4*x.x*E.y*p.y*P*A.y-2*x.x*F*A.x*d.x*d.y+3*E.x*x.y*p.y*P*A.y-2*E.x*p.x*A.x*B*d.y-2*E.x*p.x*B*d.x*A.y-6*E.x*E.y*A.x*d.x*z-2*x.y*p.x*E.y*P*A.y+3*x.y*E.y*A.x*p.y*P-2*p.x*E.y*A.x*B*d.x-F*p.x*A.x*p.y*d.x+6*E.x*E.y*P*A.y*d.y+2*E.x*O*p.y*A.y*d.y+2*k*x.y*d.x*A.y*d.y+k*p.x*p.y*A.y*d.y+2*O*E.y*A.x*p.y*d.y+2*O*E.y*p.y*d.x*A.y+3*w*A.x*H-3*S*N*A.y+3*G*A.x*H+I*A.x*P-C*A.y*z-3*Y*N*A.y-x.x*F*P*A.y+k*x.y*A.x*z-3*w*d.x*A.y*z+3*S*A.x*P*d.y-k*B*d.x*A.y+F*O*A.x*d.y-3*G*d.x*A.y*z+3*Y*A.x*P*d.y,g.x*g.y*x.x*p.y*d.x*d.y-g.x*g.y*x.y*p.x*d.x*d.y+g.x*x.x*x.y*p.x*p.y*d.y-g.y*x.x*x.y*p.x*p.y*d.x-g.x*x.x*E.y*p.y*d.x*d.y+6*g.x*E.x*x.y*p.y*d.x*d.y+g.x*x.y*p.x*E.y*d.x*d.y-g.y*x.x*E.x*p.y*d.x*d.y-6*g.y*x.x*p.x*E.y*d.x*d.y+g.y*E.x*x.y*p.x*d.x*d.y-x.x*E.x*x.y*p.x*p.y*d.y+x.x*x.y*p.x*E.y*p.y*d.x+x.x*E.x*E.y*p.y*d.x*d.y-E.x*x.y*p.x*E.y*d.x*d.y-2*g.x*E.x*D*d.x+2*g.y*L*E.y*d.y-3*g.x*g.y*x.x*p.x*z-6*g.x*g.y*E.x*d.x*z+3*g.x*g.y*x.y*p.y*P-2*g.x*g.y*p.x*B*d.x-2*g.x*x.x*E.x*p.y*z-g.x*x.x*x.y*B*d.x+3*g.x*x.x*p.x*E.y*z-4*g.x*E.x*x.y*p.x*z+3*g.y*x.x*E.x*p.x*z+6*g.x*g.y*E.y*P*d.y+2*g.x*g.y*O*p.y*d.y+2*g.x*x.x*F*d.x*d.y+2*g.x*E.x*p.x*B*d.y+6*g.x*E.x*E.y*d.x*z-3*g.x*x.y*E.y*p.y*P+2*g.x*p.x*E.y*B*d.x+g.x*F*p.x*p.y*d.x+g.y*x.x*x.y*O*d.y+4*g.y*x.x*E.y*p.y*P-3*g.y*E.x*x.y*p.y*P+2*g.y*E.x*p.x*B*d.x+2*g.y*x.y*p.x*E.y*P+x.x*E.x*x.y*B*d.x-3*x.x*E.x*p.x*E.y*z-2*g.x*O*E.y*p.y*d.y-6*g.y*E.x*E.y*P*d.y-2*g.y*E.x*O*p.y*d.y-2*g.y*k*x.y*d.x*d.y-g.y*k*p.x*p.y*d.y-2*g.y*O*E.y*p.y*d.x-2*x.x*E.x*F*d.x*d.y-x.x*x.y*O*E.y*d.y+3*E.x*x.y*E.y*p.y*P-2*E.x*p.x*E.y*B*d.x-E.x*F*p.x*p.y*d.x+3*S*x.x*p.x*d.x*d.y+3*x.x*p.x*Y*d.x*d.y+2*E.x*O*E.y*p.y*d.y-3*w*x.y*p.y*d.x*d.y+2*k*x.y*E.y*d.x*d.y+k*p.x*E.y*p.y*d.y-3*G*x.y*p.y*d.x*d.y-T*H+R*N+W*H-U*N-3*g.x*G*H-g.x*I*P+3*w*E.x*H+g.y*C*z+3*g.y*Y*N+E.x*I*P+w*D*d.x-3*S*E.y*N-S*L*d.y+G*D*d.x-C*E.y*z-L*Y*d.y-g.x*k*x.y*z+g.y*x.x*F*P-3*g.x*S*P*d.y-g.x*F*O*d.y+g.y*k*B*d.x-x.x*F*E.y*P+3*w*g.y*d.x*z+w*x.x*p.y*z+2*w*x.y*p.x*z-2*S*x.x*p.y*P-S*x.y*p.x*P+k*E.x*x.y*z-3*g.x*Y*P*d.y+3*g.y*G*d.x*z+x.x*G*p.y*z-2*x.x*Y*p.y*P+E.x*F*O*d.y-x.y*p.x*Y*P-w*p.x*B*d.y-3*w*E.y*d.x*z+3*S*E.x*P*d.y+S*O*p.y*d.x-k*E.y*B*d.x+2*G*x.y*p.x*z+3*E.x*Y*P*d.y-G*p.x*B*d.y-3*G*E.y*d.x*z+O*Y*p.y*d.x].reverse()),tt=0;tt<Q.length;tt++){var et=Q[tt],rt=Fm([d.x,p.x,x.x,g.x-E.x-et*A.x-et*et*b.x-et*et*et*m.x].reverse()),it=Fm([d.y,p.y,x.y,g.y-E.y-et*A.y-et*et*b.y-et*et*et*m.y].reverse());if(rt.length>0&&it.length>0){t:for(var at=0;at<rt.length;at++){var nt=rt[at];if(0<=nt&&nt<=1)for(var ot=0;ot<it.length;ot++)if(Math.abs(nt-it[ot])<1e-4){var st=m.x*et*et*et+b.x*et*et+A.x*et+E.x,lt=m.y*et*et*et+b.y*et*et+A.y*et+E.y;M.push({x:st,y:lt,t:nt});break t}}}}return M},intersectBezier2Bezier3:function(t,e,r,i,a,n,o,s,l,h,_,u,f,c){var v,y,d,p,x,g,m,b=[];v={x:t-2*r+a,y:e-2*i+n},p={x:3*l-o-3*_+f,y:3*h-s-3*u+c},x={x:3*o-6*l+3*_,y:3*s-6*h+3*u},g={x:-3*o+3*l,y:-3*s+3*h},m={x:o,y:s};for(var A=(d={x:t,y:e}).x*d.x,E=d.y*d.y,M=(y={x:2*r-2*t,y:2*i-2*e}).x*y.x,w=y.y*y.y,T=v.x*v.x,S=v.y*v.y,R=m.x*m.x,k=m.y*m.y,C=g.x*g.x,F=g.y*g.y,I=x.x*x.x,O=x.y*x.y,L=p.x*p.x,B=p.y*p.y,D=Hm(0,1,[-2*v.x*v.y*p.x*p.y+T*B+S*L,-2*v.x*v.y*x.x*p.y-2*v.x*v.y*x.y*p.x+2*S*x.x*p.x+2*T*x.y*p.y,-2*v.x*g.x*v.y*p.y-2*v.x*v.y*g.y*p.x-2*v.x*v.y*x.x*x.y+2*g.x*S*p.x+S*I+T*(2*g.y*p.y+O),2*d.x*v.x*v.y*p.y+2*d.y*v.x*v.y*p.x+y.x*y.y*v.x*p.y+y.x*y.y*v.y*p.x-2*m.x*v.x*v.y*p.y-2*v.x*m.y*v.y*p.x-2*v.x*g.x*v.y*x.y-2*v.x*v.y*g.y*x.x-2*d.x*S*p.x-2*d.y*T*p.y+2*m.x*S*p.x+2*g.x*S*x.x-w*v.x*p.x-M*v.y*p.y+T*(2*m.y*p.y+2*g.y*x.y),2*d.x*v.x*v.y*x.y+2*d.y*v.x*v.y*x.x+y.x*y.y*v.x*x.y+y.x*y.y*v.y*x.x-2*m.x*v.x*v.y*x.y-2*v.x*m.y*v.y*x.x-2*v.x*g.x*v.y*g.y-2*d.x*S*x.x-2*d.y*T*x.y+2*m.x*S*x.x-w*v.x*x.x-M*v.y*x.y+C*S+T*(2*m.y*x.y+F),2*d.x*v.x*v.y*g.y+2*d.y*v.x*g.x*v.y+y.x*y.y*v.x*g.y+y.x*y.y*g.x*v.y-2*m.x*v.x*v.y*g.y-2*v.x*m.y*g.x*v.y-2*d.x*g.x*S-2*d.y*T*g.y+2*m.x*g.x*S-w*v.x*g.x-M*v.y*g.y+2*T*m.y*g.y,-2*d.x*d.y*v.x*v.y-d.x*y.x*y.y*v.y-d.y*y.x*y.y*v.x+2*d.x*v.x*m.y*v.y+2*d.y*m.x*v.x*v.y+y.x*m.x*y.y*v.y+y.x*y.y*v.x*m.y-2*m.x*v.x*m.y*v.y-2*d.x*m.x*S+d.x*w*v.x+d.y*M*v.y-2*d.y*T*m.y-m.x*w*v.x-M*m.y*v.y+A*S+E*T+R*S+T*k].reverse()),P=0;P<D.length;P++){var N=D[P],z=Fm([v.x,y.x,d.x-m.x-N*g.x-N*N*x.x-N*N*N*p.x].reverse()),H=Fm([v.y,y.y,d.y-m.y-N*g.y-N*N*x.y-N*N*N*p.y].reverse());if(z.length>0&&H.length>0){t:for(var G=0;G<z.length;G++){var W=z[G];if(0<=W&&W<=1)for(var Y=0;Y<H.length;Y++)if(Math.abs(W-H[Y])<1e-4){var U=p.x*N*N*N+x.x*N*N+g.x*N+m.x,X=p.y*N*N*N+x.y*N*N+g.y*N+m.y;b.push({x:U,y:X,t:W});break t}}}}return b},intersectLineLine3:function(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e-9,o=Gm(t,r),s=Gm(i,r),l=Gm(e,t),h=o.x*s.x+o.y*s.y+o.z*s.z,_=s.x*l.x+s.y*l.y+s.z*l.z,u=o.x*l.x+o.y*l.y+o.z*l.z,f=s.x*s.x+s.y*s.y+s.z*s.z,c=l.x*l.x+l.y*l.y+l.z*l.z,v=c*f-_*_;if(!(Math.abs(v)<n)){var y=h*_-u*f,d=y/v,p=(h+_*d)/f,x={x:t.x+d*l.x,y:t.y+d*l.y,z:t.z+d*l.z},g={x:r.x+p*s.x,y:r.y+p*s.y,z:r.z+p*s.z},m=Wm(x,g);if(!(m>n)){var b=Um(Ym(x,g),2);if(!a)return b;var A=Xm(b,t,e),E=Xm(b,r,i);return A<0&&Math.abs(A)<1e-9?A=0:A>1&&A-1<1e-9&&(A=1),E<0&&Math.abs(E)<1e-9?E=0:E>1&&E-1<1e-9&&(E=1),b.pa=A,b.pb=E,1===a&&A>=0&&A<=1||2===a&&E>=0&&E<=1||3===a&&A>=0&&A<=1&&E>=0&&E<=1?b:void 0}}},intersectPlanePlane:function(t,e,r,i,a,n){var o=Im(e.x-t.x,e.y-t.y,e.z-t.z),s=Im(r.x-t.x,r.y-t.y,r.z-t.z),l=Im(a.x-i.x,a.y-i.y,a.z-i.z),h=Im(n.x-i.x,n.y-i.y,n.z-i.z),_=Im(Om(o.x,o.y,o.z,s.x,s.y,s.z)),u=Im(Om(l.x,l.y,l.z,h.x,h.y,h.z));if(Bm(_,u))return null;var f=Om(u.x,u.y,u.z,_.x,_.y,_.z),c=Ym(o,l),v=Im(f.x,f.y,f.z),y=_.x,d=_.y,p=_.z,x=-y*t.x-d*t.y-p*t.z,g=u.x,m=u.y,b=u.z,A=-g*i.x-m*i.y-b*i.z,E=v.x,M=v.y,w=v.z,T=[-x,-A,-(-E*c.x-M*c.y-w*c.z)],S=y*(m*w-b*M)-d*(g*w-b*E)+p*(g*M-m*E);if(Math.abs(S)<1e-9)return null;var R=1/S,k={x:R*(m*w-b*M)*T[0]+R*(p*M-d*w)*T[1]+R*(d*b-p*m)*T[2],y:R*(b*E-g*w)*T[0]+R*(y*w-p*E)*T[1]+R*(p*g-y*b)*T[2],z:R*(g*M-m*E)*T[0]+R*(d*E-y*M)*T[1]+R*(y*m-d*g)*T[2]};return[k,Ym(k,v)]},pointOnLine3:function(t,e,r){var i=e.x-t.x,a=e.y-t.y,n=e.z-t.z,o=r.x-t.x,s=r.y-t.y,l=r.z-t.z,h=Om(i,a,n,o,s,l);return Dm(h.x,h.y,h.z)<1e-9}},Km=Vm.intersectPlanePlane,jm=Vm.intersectLineLine3,Zm=Vm.pointOnLine3,qm=Se.isRectsOverlap,$m=Se.getPlainNormalEquation,Jm=ae.isZero3;function Qm(t){var e=t.points,r=[{y:e[0].y,z:e[0].z}];t:for(var i=1,a=e.length;i<a;i++){for(var n=e[i],o=0;o<i;o++){var s=e[o];if(n.y===s.y&&n.z===s.z)continue t}r.push({y:n.y,z:n.z})}t.xShadow=[],t.xBbox=[];for(var l=0,h=r.length;l<h;l++){var _=r[l];t.xShadow.push(_),0===l?(t.xBbox[0]=_.z,t.xBbox[1]=_.y,t.xBbox[2]=_.z,t.xBbox[3]=_.y):(t.xBbox[0]=Math.min(t.xBbox[0],_.z),t.xBbox[1]=Math.min(t.xBbox[1],_.y),t.xBbox[2]=Math.max(t.xBbox[2],_.z),t.xBbox[3]=Math.max(t.xBbox[3],_.y))}var u=[{x:e[0].x,z:e[0].z}];t:for(var f=1,c=e.length;f<c;f++){for(var v=e[f],y=0;y<f;y++){var d=e[y];if(v.x===d.x&&v.z===d.z)continue t}u.push({x:v.x,z:v.z})}t.yShadow=[],t.yBbox=[];for(var p=0,x=u.length;p<x;p++){var g=u[p];t.yShadow.push(g),0===p?(t.yBbox[0]=g.x,t.yBbox[1]=g.z,t.yBbox[2]=g.x,t.yBbox[3]=g.z):(t.yBbox[0]=Math.min(t.yBbox[0],g.x),t.yBbox[1]=Math.min(t.yBbox[1],g.z),t.yBbox[2]=Math.max(t.yBbox[2],g.x),t.yBbox[3]=Math.max(t.yBbox[3],g.z))}var m=[{x:e[0].x,y:e[0].y}];t:for(var b=1,A=e.length;b<A;b++){for(var E=e[b],M=0;M<b;M++){var w=e[M];if(E.x===w.x&&E.y===w.y)continue t}m.push({x:E.x,y:E.y})}t.zShadow=[],t.zBbox=[];for(var T=0,S=m.length;T<S;T++){var R=m[T];t.zShadow.push(R),0===T?(t.zBbox[0]=R.x,t.zBbox[1]=R.y,t.zBbox[2]=R.x,t.zBbox[3]=R.y):(t.zBbox[0]=Math.min(t.zBbox[0],R.x),t.zBbox[1]=Math.min(t.zBbox[1],R.y),t.zBbox[2]=Math.max(t.zBbox[2],R.x),t.zBbox[3]=Math.max(t.zBbox[3],R.y))}}function tb(t){for(var e=[],r={},i=0,a=t.length;i<a;i++){for(var n=t[i],o=n.k,s=n.list,l=0,h=s.length;l<h;l++){var _=s[l].puzzle;_.isStart||(_.isStart=!0,_.count=2,e.push(_))}for(var u=[],f=0,c=s.length;f<c;f++){for(var v=s[f].puzzle,y=0,d=e.length;y<d;y++){var p=e[y];if(v!==p&&v.plane!==p.plane){var x=v.uuid>p.uuid?p.uuid+","+v.uuid:v.uuid+","+p.uuid;(r[x]=r[x]||[]).push(o)}}--v.count||u.push(v)}for(var g=0,m=u.length;g<m;g++){var b=u[g],A=b.uuid;b.isStart=!1;var E=e.indexOf(b);for(var M in e.splice(E,1),r)if(r.hasOwnProperty(M)&&(0===M.indexOf(A+",")||M.indexOf(","+A)>-1)){var w=r[M];w.length<2&&w.push(M)}}}return r}function eb(t,e){if(!function(t,e){var r=e[0],i=e[1];if(r.i===i.i)return!0;if(r.i>i.i){var a=r;r=i,i=a}if(i.i-r.i==1&&(Math.abs(r.pa-1)<1e-9||i.pa<1e-9))return!0;if(i.i-r.i==2&&Math.abs(r.pa-1)<1e-9&&i.pa<1e-9)return!0;if(i.i===t-1&&0===r.i&&(Math.abs(i.pa-1)<1e-9||r.pa<1e-9))return!0;if((i.i===t-1&&1===r.i||i.i===t-2&&0===r.i)&&Math.abs(i.pa-1)<1e-9&&r.pa<1e-9)return!0;return!1}(t.points.length,e)){for(var r=t.plane,i=t.points,a=-1,n=-1,o=r.points[0],s=r.points[1],l=r.points[2],h=r.points[3],_=0,u=i.length;_<u;_++){var f=i[_],c=i[(_+1)%u];Zm(e[0],f,c)&&(a=_),Zm(e[1],f,c)&&(n=_)}if(a>-1&&n>-1&&a!==n){var v=Jm(i[a],e[0])?a:-1;!v&&i[a+1]&&(v=Jm(i[a+1],e[0])?a+1:-1);var y=Jm(i[n],e[1])?n:-1;if(!y&&i[n+1]&&(y=Jm(i[n+1],e[1])?n+1:-1),Math.abs(a-n)<=1){if(v>-1&&y>-1)return;if(v>-1){if(v===n)return}else if(y>-1&&y===n)return}var d=r.va,p=r.vb;d||(d=r.va={x:o.x-s.x,y:o.y-s.y,z:o.z-s.z}),p||(p=r.vb={x:s.x-l.x,y:s.y-l.y,z:s.z-l.z});var x,g,m=[];r.puzzle=r.puzzle||[];for(var b=[],A={plane:r,node:r.node,target:r.target,isPuzzle:!0,points:[]},E=0;E<=a;E++){var M=m[E]=rb(i[E],d,p,o,s,h);M&&A.points.push(M)}-1===v&&(x=rb(e[0],d,p,o,s,h))&&A.points.push(x),(g=rb(e[1],d,p,o,s,h))&&A.points.push(g);for(var w=n+1,T=i.length;w<T;w++){var S=m[w]=rb(i[w],d,p,o,s,h);S&&A.points.push(S)}A.points.length>2&&b.push(A);var R={plane:r,node:r.node,target:r.target,isPuzzle:!0,points:[]};x?R.points.push(Object.assign({},x)):(x=rb(e[0],d,p,o,s,h))&&R.points.push(x);for(var k=a+1;k<=n;k++){var C=m[k]=m[k]||rb(i[k],d,p,o,s,h);C&&R.points.push(C)}return-1===y&&(g?R.points.push(Object.assign({},g)):(g=rb(e[1],d,p,o,s,h))&&R.points.push(g)),R.points.length>2&&b.push(R),b}}}function rb(t,e,r,i,a,n){var o={x:t.x+e.x,y:t.y+e.y,z:t.z+e.z},s={x:t.x+r.x,y:t.y+r.y,z:t.z+r.z},l=jm(i,a,t,s,3),h=jm(i,n,t,o,3);if(l&&h)return{x:t.x,y:t.y,z:t.z,px:(l.x-i.x)/(a.x-i.x),py:(h.y-i.y)/(n.y-a.y)}}var ib={splitQuadrilateralPlane:function(t){var e=0,r=t.length;if(!(r<2)){for(var i=[],a=0;a<r;a++){var n=t[a];Qm(n),n.uuid=e++,n.plane=n;for(var o=n.xShadow,s=0,l=o.length;s<l&&(2!==l||1!==s);s++){var h=o[s],_=o[(s+1)%l];if(h.z>_.z){var u=[_,h];h=u[0],_=u[1]}i.push({belong:n,y1:h.y,z1:h.z,y2:_.y,z2:_.z})}}for(var f={},c=0,v=i.length;c<v;c++){var y=i[c],d=f[y.z1]=f[y.z1]||[];d.push(y),(d=f[y.z2]=f[y.z2]||[]).push(y)}var p=[];for(var x in f)if(f.hasOwnProperty(x)){var g=f[x];p.push({z:x,list:g})}p.sort((function(t,e){return t.z-e.z}));for(var m={},b=[],A=0,E=p.length;A<E;A++)for(var M=p[A],w=M.z,T=M.list,S=0,R=T.length;S<R;S++){var k=T[S];if(k.isVisited){var C=b.indexOf(k);C>-1&&b.splice(C,1)}else{if(b.length)for(var F=0,I=b.length;F<I;F++){var O=b[F],L=k.belong,B=O.belong;if(L.plane!==B.plane){if(L.isDeleted)break;if(!B.isDeleted){var D=L.uuid>B.uuid?B.uuid+","+L.uuid:L.uuid+","+B.uuid;if(!m.hasOwnProperty(D)&&(m[D]=!0,qm(L.xBbox,B.xBbox,!1)&&qm(L.yBbox,B.yBbox,!1)&&qm(L.zBbox,B.zBbox,!1))){var P=L.points,N=B.points,z=Km(P[0],P[1],P[2],N[0],N[1],N[2]);if(!z||2!==z.length)continue;for(var H=[],G=[],W=0,Y=P.length;W<Y;W++){var U=jm(P[W],P[(W+1)%Y],z[0],z[1],1);U&&(U.i=W,H.push(U))}for(var X=0,V=N.length;X<V;X++){var K=jm(N[X],N[(X+1)%V],z[0],z[1],1);K&&(K.i=X,G.push(K))}if(2===H.length&&2===G.length||2===H.length&&!G.length||!H.length&&2===G.length){var j=[],Z=void 0,q=void 0;if(H.length&&(Z=eb(L,H)),G.length&&(q=eb(B,G)),Z&&q&&Z.length!==q.length)continue;Z&&Z.length>1&&(L.puzzle=L.puzzle||[],L.puzzle=L.puzzle.concat(Z),L.isDeleted=!0,j=j.concat(Z)),q&&q.length>1&&(B.puzzle=B.puzzle||[],B.puzzle=B.puzzle.concat(q),B.isDeleted=!0,j=j.concat(q));for(var $=0,J=j.length;$<J;$++){var Q=j[$];if(Qm(Q),Q.uuid=e++,!(Q.xBbox[2]<=w))for(var tt=Q.xShadow,et=0,rt=tt.length;et<rt&&(2!==rt||1!==et);et++){var it=tt[et],at=tt[(et+1)%rt];if(it.z>at.z){var nt=[at,it];it=nt[0],at=nt[1]}if(!(at.z<=w)){var ot={belong:Q,y1:it.y,z1:it.z,y2:at.y,z2:at.z};if(ot.z1<=w&&(ot.isVisited=!0,ot.z1===w&&(T.push(ot),R++)),ot.z2>w)for(var st=A+1;st<E;st++){var lt=p[st],ht=lt.z;if(ot.z2===ht){lt.list.push(ot);break}if(ot.z2>ht||st===E-1){p.splice(st,0,{z:ot.z2,list:[ot]}),E++;break}}}}}}}}}}k.isVisited=!0,b.push(k)}}}},sortPuzzleZ:function(t){if(t.length<2)return t;for(var e={},r={},i={},a=0,n=t.length;a<n;a++){var o=t[a],s=o.xBbox,l=o.yBbox;i[o.uuid]=o;var h=s[0],_=s[2],u=e[h]=e[h]||[];u.push(o),(u=e[_]=e[_]||[]).push(o),h=l[0],_=l[2],(u=r[h]=r[h]||[]).push(o),(u=r[_]=r[_]||[]).push(o),o.cz=.5*(s[0]+s[2])}var f=[],c=[];for(var v in e)if(e.hasOwnProperty(v)){var y=e[v];f.push({k:v,list:y})}for(var d in r)if(r.hasOwnProperty(d)){var p=r[d];c.push({k:d,list:p})}f.sort((function(t,e){return t.k-e.k})),c.sort((function(t,e){return t.k-e.k}));var x=tb(e),g=tb(r),m={};for(var b in x)if(x.hasOwnProperty(b)){var A=x[b],E=g[b],M=b.splice(","),w=i[M[0]],T=i[M[1]],S=.5*(A[0]+A[1]),R=.5*(E[0]+E[1]),k=$m(w.points),C=k.a,F=k.b,I=k.c,O=k.d,L=$m(T.points),B=L.a,D=L.b,P=L.c,N=L.d,z=I?(-O-C*S-F*R)/I:0,H=P?(-N-B*S-D*R)/P:0;Math.abs(z-H)>1e-9&&(m[b]=z-H)}return t.sort((function(t,e){var r=t.uuid>e.uuid?e.uuid+","+t.uuid:t.uuid+","+e.uuid;return m.hasOwnProperty(r)?m[r]:t.cz-e.cz})),t}},ab=function(t){function e(e,r,i,a){var n;return(n=t.call(this,e,r,i,a)||this).gl=r,n.texture=cg.createTexture(r,null,0,i,i),r.bindTexture(r.TEXTURE_2D,null),n}return s(e,t),n(e,null,[{key:"getInstance",value:function(t,r,i,a,n){return f(l(e),"getInstance",this).call(this,t,r,i,a,this,n)}}]),e}(og),nb=function(t){function e(e,r,i,a,n,o,s,l,h,_){var u;return(u=t.call(this,e,r,i,a,n,o,s,l,h,_)||this).gl=r,u}return s(e,t),n(e,[{key:"update",value:function(){}},{key:"clear",value:function(){if(f(l(e.prototype),"clear",this).call(this)){var t=this.__page,r=t.gl,i=t.__size,a=new Uint8Array(this.__width*this.__height*4);r.bindTexture(r.TEXTURE_2D,t.texture),r.texSubImage2D(r.TEXTURE_2D,0,this.__x,i-this.__y-this.__height,this.__width,this.__height,r.RGBA,r.UNSIGNED_BYTE,a),r.bindTexture(r.TEXTURE_2D,null)}}},{key:"reset",value:function(t,r,i){return f(l(e.prototype),"reset",this).call(this,t,r,i,ab)}}],[{key:"getInstance",value:function(t,r,i,a,n,o,s){return f(l(e),"getInstance",this).call(this,t,r,i,a,n,o,this,ab,s)}}]),e}(tg),ob={},sb=function(t){function e(e,r,i,a,n,o,s,l,h){return t.call(this,e,r,i,a,n,o,s,null,l,h)||this}return s(e,t),n(e,[{key:"__init",value:function(t,e,r,i,a,n,o){if(this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,i.width===t&&i.height===e)this.__canvas=i.source;else{var s=this.key=t+" "+e+" "+i.src;if(ob.hasOwnProperty(s)){var l=ob[s];l.count++,this.__canvas=l.canvas}else{var h=lt.getOffscreenCanvas(t,e,null,null),_=h.ctx;_.globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(i.source,0,0,t,e),this.__canvas=h.canvas,ob[s]={canvas:h.canvas,count:1}}}this.__x=0,this.__y=0,this.__enabled=!0,this.__available=!0,this.__appendData(n,o)}},{key:"clear",value:function(){if(this.__available)return this.__available=!1,!0}},{key:"release",value:function(){if(this.__enabled){this.clear();var t=this.key;if(ob.hasOwnProperty(t)){var e=ob[t];e.count--,e.count||delete ob[t]}return this.__enabled=!1,this.__page=null,!0}}},{key:"reset",value:function(t,e,r){this.release();var i=Math.ceil(t[2]-t[0]),a=Math.ceil(t[3]-t[1]);Math.max(i,a)<=0||this.__init(i,a,t,this.__page,null,e,r)}},{key:"canvas",get:function(){return this.__canvas}},{key:"ctx",get:function(){return this.__ctx}},{key:"size",get:function(){}}],[{key:"getInstance",value:function(t,r,i,a,n,o,s){var l=Math.ceil(a[2]-a[0]),h=Math.ceil(a[3]-a[1]);if(!(Math.max(l,h)<=0))return new e(t,r,i,l,h,a,n,o,s)}}]),e}(mg),lb=Am,hb=Em,_b=Mm,ub=wm,fb=Tm,vb=Sm,yb=fe.STYLE_KEY,db=yb.DISPLAY,pb=yb.OPACITY,xb=yb.VISIBILITY,gb=yb.FILTER,mb=yb.OVERFLOW,bb=yb.MIX_BLEND_MODE,Ab=yb.FILL,Eb=yb.TRANSFORM,Mb=yb.TRANSFORM_ORIGIN,wb=yb.PERSPECTIVE,Tb=yb.PERSPECTIVE_ORIGIN,Sb=yb.TRANSFORM_STYLE,Rb=yb.BACKFACE_VISIBILITY,kb=vl.NONE,Cb=vl.TRANSFORM_ALL,Fb=vl.OPACITY,Ib=vl.FILTER,Ob=vl.REPAINT,Lb=vl.MIX_BLEND_MODE,Bb=vl.PERSPECTIVE,Db=vl.CACHE,Pb=vl.MASK,Nb=E.isE,zb=E.inverse,Hb=E.multiply,Gb=E.calRectPoint,Wb=E.assignMatrix,Yb=Kf,Ub=Y.transformBbox,Xb=cg.drawTextureCache,Vb=cg.createTexture,Kb=cg.bindTexture,jb=cg.drawCache2Tex,Zb=cg.drawTex2Cache,qb=Jx.prototype.render,$b=$g.prototype.render,Jb=tp.prototype.render;function Qb(t,e,r,i,a,n){var o,s,l=t.__cache;(Wb(t.__matrixEvent,E.identity()),t.__opacity=1,o=(o=l&&l.__available?l.bbox:t.bbox).slice(0),n&&(s=t.__perspectiveMatrix||t.__selfPerspectiveMatrix),t.__selfPerspective)&&tA(o,Ub(o,Hb(s,t.__matrix),0,0));for(var h=t,_=r+1,u=r+i+1;_<u;_++){var f=e[_],c=f.node,v=f.total,y=f.hasMask;if(f.isText){if(c.__limitCache)return void lt.warn("Bbox of Text("+r+") is oversize"+c.offsetWidth+", "+c.offsetHeight);var d=c.bbox,p=c.__domParent.__matrixEvent;d[2]-d[0]&&d[3]-d[1]&&(Nb(p)||(d=Ub(d,p,0,0)),tA(o,d))}else{if(c.__limitCache)return void lt.warn("Bbox of "+c.tagName+"("+r+") is oversize"+c.offsetWidth+", "+c.offsetHeight);var x=c.__computedStyle,g=c.__mask;if("none"===x[db]||_!==r&&g)_+=v||0,y&&(_+=eA(e,_+1,y));else{var m=c.__cache,b=c.__domParent;c.__opacity=x[pb]*b.__opacity;var A=c.__matrix;if(b!==h&&(A=Hb(b.__matrixEvent,A)),s&&b===h&&(A=Hb(s,A)),Wb(c.__matrixEvent,A),"hidden"===x[Rb]){var M=A[5]<0&&A[10]<0,w=A[0]<0&&A[10]<0;if(M||w){_+=v||0,y&&(_+=eA(e,_+1,y));continue}}var T=void 0,S=c.__cacheTarget;S?(S!==m&&(_+=v||0,y&&(_+=eA(e,_+1,y))),T=S.bbox):T=c.bbox,T[2]-T[0]&&T[3]-T[1]&&tA(o,T=Ub(T,A,0,0))}}}if(!(o[2]-o[0]<=0||o[3]-o[1]<=0))return o}function tA(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[2]),t[3]=Math.max(t[3],e[3])}function eA(t,e,r){for(var i=0;r--;){var a=t[e].total;i+=a||0,e+=a||0,i++,e++}return i}function rA(t,e,r,i){var a=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.viewport(0,0,r,i),a}function iA(t,e,r,i,a,n,o,s,l,h,_,u,f,c){if(e&&e.__available)return e;var v=a,y=a.__x1,d=a.__y1,p=a.__offsetWidth,x=a.__offsetHeight,g=Qb(a,l,n,s,0,u);if(g){var m,b,A,E,M,w,T,S;if("hidden"!==a.__computedStyle[mb]||y===g[0]&&d===g[1]&&p===g[2]-g[0]&&x===g[3]-g[1]?(m=g[2]-g[0],b=g[3]-g[1]):(g=[y,d,y+p,d+x],m=p,b=x),e?e.reset(g,y,d):e=nb.getInstance(t,r,i.__uuid,g,y,d,null),e&&e.__enabled){var R,k;if(e.__available=!0,a.__cacheTotal=e,M=.5*m,w=.5*b,A=-g[0],E=-g[1],u)if(f.__perspectiveMatrix){var C=f.__computedStyle,F=C[wb],I=C[Tb];R=fs.calPerspectiveMatrix(F,y+A+I[0],d+E+I[1])}else{var O=f.__computedStyle[Mb];R=fs.calPerspectiveMatrix(f.__selfPerspective,y+A+O[0],d+E+O[1])}if(c)if(f.__perspectiveMatrix)k=f.__computedStyle[wb];else k=f.__selfPerspective;var L=e.__page,B=L.__size;S=rA(r,T=Vb(r,null,0,m,b),m,b),r.viewport(0,0,m,b),i.__env={x:A,y:E,width:m,height:b,node:a};for(var D,P=[],N=e,z=n,H=n+(s||0)+1;z<H;z++){var G=l[z],W=G.node,Y=G.total,U=G.hasMask;if(G.isText){var X=W.__cache;if(X&&X.__available){var V=W.__domParent,K=V.__opacity,j=V.__matrixEvent,Z=X.__page;D&&D!==Z&&Xb(r,P.splice(0),M,w,A,E),D=Z,P.push({cache:X,opacity:K,matrix:j})}}else{var q=W.__computedStyle;if(z>n&&("none"===q[db]||W.__mask)){z+=Y||0,U&&(z+=eA(l,z+1,U));continue}var $=q[xb],J=q[Eb],Q=q[Mb],tt=q[bb],et=q[Rb];if("hidden"===$&&!Y){U&&(z+=eA(l,z+1,U));continue}var rt=W.__domParent,it=W.__selfPerspective,at=W.__opacity,nt=void 0;if(z>n){if(Nb(J)||(nt=fs.calMatrixByOrigin(J,Q[0]+W.__x1+A,Q[1]+W.__y1+E)),it){var ot=fs.calPerspectiveMatrix(it,Q[0]+W.__x1+A,Q[1]+W.__y1+E);nt=Hb(ot,nt)}if(rt!==v?nt=Hb(rt.__matrixEvent,nt):R&&(nt=Hb(R,nt)),Wb(W.__matrixEvent,nt),"hidden"===et){var st=W.__matrix,ht=st[5]<0&&st[10]<0,_t=st[0]<0&&st[10]<0;if(ht||_t){z+=Y||0,U&&(z+=eA(l,z+1,U));continue}}}var ut=c&&c[z];if(ut){Xb(r,P.splice(0),M,w,A,E),D=null;for(var ft=z+1,ct=z+(Y||0)+1;ft<ct;ft++){var vt=l[ft],yt=vt.node,dt=vt.total,pt=vt.hasMask;if(!vt.isText){var xt=yt.__computedStyle;if("none"===xt[db]||yt.__mask){ft+=dt||0,pt&&(ft+=eA(l,ft+1,pt));continue}var gt=xt[xb],mt=xt[Eb],bt=xt[Mb],At=xt[Rb];if("hidden"===gt&&!dt){pt&&(ft+=eA(l,ft+1,pt));continue}var Et=yt.__domParent,Mt=void 0;if(Nb(mt)||(Mt=fs.calMatrixByOrigin(mt,bt[0]+yt.__x1+A,bt[1]+yt.__y1+E)),Et!==v?Mt=Hb(Et.__matrixEvent,Mt):R&&(Mt=Hb(R,Mt)),Wb(yt.__matrixEvent,Mt),"hidden"===At){var wt=yt.__matrix,Tt=wt[5]<0&&wt[10]<0,St=wt[0]<0&&wt[10]<0;if(Tt||St){z+=dt||0,pt&&(z+=eA(l,z+1,pt));continue}}var Rt=yt.__cacheTarget;Rt===yt.__cache&&(Rt=null),Rt&&(ft+=dt||0,pt&&(ft+=eA(l,ft+1,pt)))}}cg.drawOitPlane(r,l,ut,k,M,w,A,E),z+=Y||0,U&&(z+=eA(l,z+1,U));var kt=W.render;kt!==qb&&kt!==$b&&kt!==Jb&&(Xb(r,P.splice(0),M,w,A,E),D=null,W.render(t,r,A,E),r.useProgram(r.program))}else{var Ct=W.__cache,Ft=z>n?W.__cacheTarget:Ct;if(Ft){if(at>0)if(z>n&&"normal"!==tt){P.length&&Xb(r,P.splice(0),M,w,A,E),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.bindFramebuffer(r.FRAMEBUFFER,null);var It=hA(r,T,Ft,tt,W.__opacity,nt,A,E,M,w,B,B);It&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(S),r.deleteTexture(T),T=It.texture,S=It.frameBuffer,r.bindFramebuffer(r.FRAMEBUFFER,S),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,T,0)),D=null}else{var Ot=Ft.__page;D&&D!==Ot&&Xb(r,P.splice(0),M,w,A,E),D=Ot,P.push({cache:Ft,opacity:W.__opacity,matrix:nt})}Ft!==Ct&&(z+=Y||0,U&&(z+=eA(l,z+1,U)))}if((!Ft||Ft===Ct)&&at>0){var Lt=W.render;Lt!==qb&&Lt!==$b&&Lt!==Jb&&(Xb(r,P.splice(0),M,w,A,E),D=null,W.render(t,r,A,E),r.useProgram(r.program))}}}}return Xb(r,P,M,w,A,E),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,L.texture,0),r.viewport(0,0,B,B),Zb(r,r.program,N,T,m,b),r.deleteTexture(T),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(S),r.bindTexture(r.TEXTURE_2D,null),r.viewport(0,0,h,_),i.__env=null,e}(m||b)&&lt.warn("TextureCache of "+a.tagName+"("+n+") is oversize: "+m+", "+b)}}function aA(t,e,r,i,a,n,o,s,l,h,_){if(e&&e.__available)return e;for(var u=a,f=[],c=[],v="flat"===u.__computedStyle[Sb],y=v,d=n+1,p=n+(s||0)+1;d<p;d++){var x=l[d],g=x.lv,m=x.node,b=x.total,A=x.hasMask;if(x.isText){var E=f[d];E&&(v=E.isFlat)}else{var M=m.__computedStyle;if("none"===M[db]||m.__mask){d+=b||0,A&&(d+=eA(l,d+1,A));var w=f[d];w&&(v=w.isFlat);continue}var T=M[xb],S=M[Sb];if("hidden"===T&&!b){A&&(d+=eA(l,d+1,A));var R=f[d];R&&(v=R.isFlat);continue}m.__cacheTotal,m.__cacheFilter,m.__cacheMask;var k=m.__domParent,C=m.__cacheTarget;if(C===m.__cache&&(C=null),b&&!C&&(S!==k.__computedStyle[Sb]||k===u&&"flat"===S)){var F=d+(b||0);A&&(F+=eA(l,F+1,A)),f[F]={isFlat:v},v="flat"===S,c.push({i:d,lv:g,total:b,node:m,isFlat:v})}C&&(d+=b||0,A&&(d+=eA(l,d+1,A)));var I=f[d];I&&(v=I.isFlat)}}c.sort((function(t,e){return t.lv===e.lv?t.i-e.i:e.lv-t.lv})),y||c.push({i:n,lv:o,total:s,node:a,isFlat:y});for(var O=[],L=0,B=c.length;L<B;L++){var D=c[L],P=D.i,N=(D.lv,D.total),z=D.node;if(D.isFlat)iA(t,z.__cacheTotal,r,i,z,P,0,N||0,l,h,_,null,u,O);else{var H=z,G=z.__x1,W=z.__y1,Y=[];if(z.__hasContent){var U={index:P,node:z,target:z.__cacheTarget,points:[{x:0,y:0,z:0},{x:z.__offsetWidth,y:0,z:0},{x:z.__offsetWidth,y:z.__offsetHeight,z:0},{x:0,y:z.__offsetHeight,z:0}]};Y.push(U)}for(var X=P+1,V=P+(N||0)+1;X<V;X++){var K=l[X],j=K.node,Z=K.total,q=K.hasMask;if(K.isText){var $=j.__cache;if($&&$.__available){var J=j.__domParent.__matrixEvent,Q=$.x1,tt=$.y1,et=$.__width,rt=$.__height,it=Gb(Q-G,tt-W,Q+et-G,tt+rt-W,J),at={index:X,node:j,target:$,points:[{x:it.x1,y:it.y1,z:it.z1},{x:it.x2,y:it.y2,z:it.z2},{x:it.x3,y:it.y3,z:it.z3},{x:it.x4,y:it.y4,z:it.z4}]};Y.push(at)}}else{var nt=j.__computedStyle;if("none"===nt[db]||j.__mask){X+=Z||0,q&&(X+=eA(l,X+1,q));continue}var ot=nt[xb],st=nt[Eb],lt=nt[Mb],ht=nt[Rb];if("hidden"===ot&&!Z){q&&(X+=eA(l,X+1,q));continue}var _t=j.__cache,ut=j.__domParent,ft=j.__selfPerspective,ct=void 0;if(Nb(st)||(ct=fs.calMatrixByOrigin(st,lt[0]+j.__x1-G,lt[1]+j.__y1-W)),ft){var vt=fs.calPerspectiveMatrix(ft,lt[0]+j.__x1-G,lt[1]+j.__y1-W);ct=Hb(vt,ct)}if(ut!==H&&(ct=Hb(ut.__matrixEvent,ct)),Wb(j.__matrixEvent,ct),"hidden"===ht){var yt=j.__matrix,dt=yt[5]<0&&yt[10]<0,pt=yt[0]<0&&yt[10]<0;if(dt||pt){X+=Z||0,q&&(X+=eA(l,X+1,q));continue}}var xt=j.__cacheTarget;if(xt){var gt=xt.x1,mt=xt.y1,bt=xt.__width,At=xt.__height,Et=Gb(gt-G,mt-W,gt+bt-G,mt+At-W,ct),Mt={index:X,node:j,target:xt,points:[{x:Et.x1,y:Et.y1,z:Et.z1},{x:Et.x2,y:Et.y2,z:Et.z2},{x:Et.x3,y:Et.y3,z:Et.z3},{x:Et.x4,y:Et.y4,z:Et.z4}]};Y.push(Mt),xt!==_t&&(X+=Z||0,q&&(X+=eA(l,X+1,q)))}}}Y.length>1&&ib.splitQuadrilateralPlane(Y);for(var wt=[],Tt=0,St=Y.length;Tt<St;Tt++){var Rt=Y[Tt],kt=Rt.puzzle;if(kt&&kt.length)for(var Ct=0,Ft=kt.length;Ct<Ft;Ct++){var It=kt[Ct];It.isDeleted||wt.push(It)}else wt.push(Rt)}O[P]=ib.sortPuzzleZ(wt)}z.__updateCache()}return iA(t,e,r,i,a,n,0,s,l,h,_,!0,a,O)}function nA(t,e,r,i,a,n,o){i.x1,i.y1,i.width,i.height,i.bbox;var s=i;return a.forEach((function(r){var a=r.k,n=r.v;if("blur"===a&&n>0){var o=function(t,e,r,i){var a=r.x1,n=r.y1,o=r.bbox,s=r.width,l=r.height,h=Ca.kernelSize(i),_=Math.max(15,e.getParameter(e.MAX_VARYING_VECTORS));for(;h>_;)h-=2;var u=Ca.outerSizeByD(h);if(s>og.MAX+u||l>og.MAX+u)return void lt.warn("Filter blur is oversize");var f=o.slice(0);f[0]-=u,f[1]-=u,f[2]+=u,f[3]+=u;var c=s+2*u,v=l+2*u,y=Vb(e,null,0,c,v),d=rA(e,y,c,v);jb(e,e.program,r,c,v,u);var p=oA(e,i,h);y=cg.drawBlur(e,p,y,c,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(d);var x=nb.getInstance(t,e,r.__rootId,f,a,n,null);x.__available=!0;var g=x.__page,m=g.__size,b=g.texture;return d=rA(e,b,m,m),Zb(e,e.program,x,y,c,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(d),x}(t,e,s,n);o&&(s!==i&&s.release(),s=o)}else if("dropShadow"===a){var l=function(t,e,r,i){var a=r.x1,n=r.y1,o=r.bbox,s=r.width,l=r.height,h=c(i,5),_=h[0],u=h[1],f=h[2],v=h[4],y=Ca.kernelSize(f),d=Math.max(15,e.getParameter(e.MAX_VARYING_VECTORS));for(;y>d;)y-=2;var p=Ca.outerSizeByD(y);if(s>og.MAX+p||l>og.MAX+p)return void lt.warn("Filter dropShadow is oversize");var x=s+2*p,g=l+2*p,m=Vb(e,null,0,x,g),b=rA(e,m,x,g);if(e.useProgram(e.programDs),cg.drawDropShadow(e,e.programDs,b,r,v,s,x,l,g),f){var A=oA(e,f,y);m=cg.drawBlur(e,A,m,x,g)}e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(b);var E=Vb(e,null,0,s,l);b=rA(e,E,s,l),jb(e,e.program,r,s,l,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(b);var M=o.slice(0);M[0]+=_,M[1]+=u,M[2]+=_,M[3]+=u,M[0]-=p,M[1]-=p,M[2]+=p,M[3]+=p;var w=o.slice(0);tA(w,M);var T=nb.getInstance(t,e,r.__rootId,w,a,n,null);T.__available=!0;var S=T.__page,R=S.__size;b=rA(e,S.texture,R,R);var k=M[0]-w[0],C=M[1]-w[1],F=o[0]-w[0],I=o[1]-w[1];return cg.drawDropShadowMerge(e,T,R,m,k,C,x,g,E,F,I,s,l),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(b),Kb(e,null,0),e.deleteTexture(m),e.deleteTexture(E),T}(t,e,s,n);l&&(s!==i&&s.release(),s=l)}else if("hueRotate"===a){var h=Se.d2r(n%360),_=Math.cos(h),u=Math.sin(h),f=sA(t,e,s,[.213+.787*_-.213*u,.715-.715*_-.715*u,.072-.072*_+.928*u,0,0,.213-.213*_+.143*u,.715+.285*_+.14*u,.072-.072*_-.283*u,0,0,.213-.213*_-.787*u,.715-.715*_+.715*u,.072+.928*_+.072*u,0,0,0,0,0,1,0]);f&&(s!==i&&s.release(),s=f)}else if("saturate"===a&&100!==n){var v=.01*n,y=sA(t,e,s,[.213+.787*v,.715-.715*v,.072-.072*v,0,0,.213-.213*v,.715+.285*v,.072-.072*v,0,0,.213-.213*v,.715-.715*v,.072+.928*v,0,0,0,0,0,1,0]);y&&(s!==i&&s.release(),s=y)}else if("brightness"===a&&100!==n){var d=.01*n,p=sA(t,e,s,[d,0,0,0,0,0,d,0,0,0,0,0,d,0,0,0,0,0,1,0]);p&&(s!==i&&s.release(),s=p)}else if("grayscale"===a&&n>0){var x=1-.01*(n=Math.min(n,100));x<0?x=0:x>1&&(x=1);var g=sA(t,e,s,[.2126+.7874*x,.7152-.7152*x,.0722-.0722*x,0,0,.2126-.2126*x,.7152+.2848*x,.0722-.0722*x,0,0,.2126-.2126*x,.7152-.7152*x,.0722+.9278*x,0,0,0,0,0,1,0]);g&&(s!==i&&s.release(),s=g)}else if("contrast"===a&&100!==n){var m=.01*n,b=-.5*m+.5,A=sA(t,e,s,[m,0,0,0,b,0,m,0,0,b,0,0,m,0,b,0,0,0,1,0]);A&&(s!==i&&s.release(),s=A)}else if("sepia"===a&&n>0){var E=1-.01*(n=Math.min(n,100));E<0?E=0:E>1&&(E=1);var M=sA(t,e,s,[.393+.607*E,.769-.769*E,.189-.189*E,0,0,.349-.349*E,.686+.314*E,.168-.168*E,0,0,.272-.272*E,.534-.534*E,.131+.869*E,0,0,0,0,0,1,0]);M&&(s!==i&&s.release(),s=M)}else if("invert"===a&&n>0){var w=.01*(n=Math.min(n,100)),T=1-2*w,S=sA(t,e,s,[T,0,0,0,w,0,T,0,0,w,0,0,T,0,w,0,0,0,1,0]);S&&(s!==i&&s.release(),s=S)}})),e.useProgram(e.program),e.viewport(0,0,n,o),r.__cacheFilter=s}function oA(t,e,r){var i="programBlur,"+e+","+r;if(t.hasOwnProperty(i))return t[i];for(var a=Ca.gaussianWeight(e,r),n="",o="",s=Math.floor(.5*r),l=0;l<s;l++){var h=.01*(s-l);n+="v_texCoordsBlur[".concat(l,"] = a_texCoords + vec2(-").concat(h,", -").concat(h,") * u_direction;"),o+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(l,"]) * ").concat(a[l],";")}n+="v_texCoordsBlur[".concat(s,"] = a_texCoords;"),o+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(s,"]) * ").concat(a[s],";");for(var _=0;_<s;_++){var u=.01*(_+1);n+="v_texCoordsBlur[".concat(_+s+1,"] = a_texCoords + vec2(").concat(u,", ").concat(u,") * u_direction;"),o+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(_+s+1,"]) * ").concat(a[_+s+1],";")}return n="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}".replace("[3]","["+r+"]").replace(/}$/,n+"}"),o="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}".replace("[3]","["+r+"]").replace(/}$/,o+"}"),t[i]=cg.initShaders(t,n,o)}function sA(t,e,r,i){var a=r.x1,n=r.y1,o=r.bbox,s=nb.getInstance(t,e,r.__rootId,o.slice(0),a,n,r.__page);s.__available=!0;var l=s.__page.__size,h=rA(e,s.__page.texture,l,l);return cg.drawCm(e,e.programCm,s,r,i,.5*l,l),e.useProgram(e.program),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(h),s}function lA(t,e,r,i,a,n,o,s,l,h){var _=a.x1,u=a.y1,f=a.width,c=a.height,v=a.bbox,y=a.dbx,d=a.dby,p=v.slice(0),x=nb.getInstance(t,e,r.__uuid,p,_,u,a.__page);x.__available=!0,i.__cacheMask=x;var g,m=i.__computedStyle,b=m[Eb],A=m[Mb];g=Nb(b)?E.identity():fs.calMatrixByOrigin(b,A[0],A[1]),g=E.inverse(g),e.viewport(0,0,f,c);for(var M,w,T=Vb(e,null,0,f,c),S=.5*f,R=.5*c,k=rA(e,T,f,c),C=i.next,F=C.__clip,I=[],O=-_+y,L=-u+d;C&&C.__mask&&C.__clip===F;){for(var B=[],D=void 0,P=void 0,N=[],z=1,H=void 0,G=l,W=s,Y=s+(h[s].total||0||0)+1;s<Y;s++){var U=h[s],X=U.node,V=U.lv,K=U.total,j=U.hasMask;if(U.isText){var Z=X.__cache;if(Z&&Z.__available){var q=X.__domParent,$=q.__matrixEvent,J=q.__opacity,Q=Z.__page;M&&M!==Q&&Xb(e,I.splice(0),S,R,O,L),M=Q,I.push({cache:Z,opacity:J,matrix:$})}}else{var tt=X.__limitCache,et=X.__computedStyle;if("none"===et[db]||tt){s+=K||0,j&&(s+=eA(h,s+1,j));continue}var rt=et[pb],it=et[xb],at=et[Eb],nt=et[Mb],ot=et[Rb];if("hidden"===it&&!K){j&&(s+=eA(h,s+1,j));continue}var st=X.__cache;if(s===W);else if(V>G)Nb(D=P)&&(D=null),B.push(D),z=H,N.push(z);else if(V<G){var lt=G-V;B.splice(-lt),D=B[V-1],N.splice(-lt),z=N[V-1]}G=V;var ht=void 0;ht=Nb(at)?E.identity():fs.calMatrixByOrigin(at,nt[0]+y+X.__x1-_,nt[1]+d+X.__y1-u),Nb(D)||(ht=Hb(D,ht)),P=ht,H=z*rt;var _t=X.__cacheTarget;if(_t&&(_t!==st||"visible"===it)){if(ht=E.multiply(g,ht),"hidden"===ot){var ut=X.__matrix,ft=ut[5]<0&&ut[10]<0,ct=ut[0]<0&&ut[10]<0;if(ft||ct){s+=K||0,j&&(s+=eA(h,s+1,j));continue}}var vt=_t.__page;M&&M!==vt&&Xb(e,I.splice(0),S,R,O,L),M=vt,I.push({cache:_t,opacity:H,matrix:ht}),_t!==st&&(s+=K||0,j&&(s+=eA(h,s+1,j)))}if(!_t||_t===st){var yt=X.render;yt!==qb&&yt!==$b&&yt!==Jb&&(Xb(e,I.splice(0),S,R,O,L),M=null,X.render(t,e,O,L),e.useProgram(e.program))}}}C=C.__next}Xb(e,I,S,R,O,L),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(k),e.bindTexture(e.TEXTURE_2D,null),w=F?e.programClip:e.programMask;var dt=x.__page,pt=dt.size;return k=rA(e,dt.texture,pt,pt),cg.drawMask(e,w,x,a,T,.5*pt,pt),e.useProgram(e.program),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(k),e.viewport(0,0,n,o),x}function hA(t,e,r,i,a,n,o,s,l,h,_,u){var f,c=Vb(t,null,0,_,u),v=rA(t,c,_,u);Xb(t,[{cache:r,opacity:a,matrix:n}],l,h,o,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(v),"multiply"===(i=Yb(i))?f=t.programMbmMp:"screen"===i?f=t.programMbmSr:"overlay"===i?f=t.programMbmOl:"darken"===i?f=t.programMbmDk:"lighten"===i?f=t.programMbmLt:"color-dodge"===i?f=t.programMbmCd:"color-burn"===i?f=t.programMbmCb:"hard-light"===i?f=t.programMbmHl:"soft-light"===i?f=t.programMbmSl:"difference"===i?f=t.programMbmDf:"exclusion"===i?f=t.programMbmEx:"hue"===i?f=t.programMbmHue:"saturation"===i?f=t.programMbmSt:"color"===i?f=t.programMbmCl:"luminosity"===i&&(f=t.programMbmLm),t.useProgram(f);var y=Vb(t,null,0,_,u),d=rA(t,y,_,u);return cg.drawMbm(t,f,e,c),t.useProgram(t.program),{texture:y,frameBuffer:d}}var _A=function(t,e,r,i,a){var n,o,s=r.__structs,l=r.width,h=r.height,_=r.__wasmRoot;if(_){var u=_.refresh();n=new Float32Array(__.wasm.memory.buffer,_.me_ptr(),16*u),o=new Float32Array(__.wasm.memory.buffer,_.op_ptr(),u)}var f=[];if(i||a>=Ob||a&(Db|Ib|Pb))for(var c=0,v=s.length;c<v;c++){var y=s[c],d=y.node,p=y.lv,x=y.total,g=y.hasMask;if(!y.isText)if("none"!==d.__computedStyle[db]){var m=d.__refreshLevel,b=d.__cacheTotal;d.__refreshLevel=kb;var A=d.__cacheAsBitmap&&(m&(Db|Ib)||m>=Ob);if(!A&&d instanceof $g){var M=d.calContent(d.__currentStyle,d.__computedStyle);d.__loadImg.onlyImg&&M&&(A=!0)}A&&f.push({i:c,lv:p,total:x,node:d,hasMask:g}),b&&b.__available&&(c+=x||0,m===kb&&g&&(c+=eA(s,c+1,g)))}else c+=x||0,g&&(c+=eA(s,c+1,g))}f.length&&(f.sort((function(t,e){return t.lv===e.lv?e.i-t.i:e.lv-t.lv})),f.forEach((function(i){var a=i.i,n=i.lv,o=i.total,_=i.node,u=i.hasMask,f=function(t,e,r,i,a,n,o,s,l,h){var _=i.__cacheTotal;if(_&&_.__available)return _;var u=i.__x1,f=i.__y1,c=i.__offsetWidth,v=i.__offsetHeight,y=Qb(i,s,a,o,0,!1);if(y){if(i instanceof $g&&i.__loadImg.onlyImg)return i.__cacheTotal=sb.getInstance(t,e,r.__uuid,y,i.__loadImg,u,f);var d,p,x,g,m,b,A,E,M,w=i.__computedStyle[mb];if(u===y[0]&&f===y[1]&&c===y[2]-y[0]&&v===y[3]-y[1]||"hidden"!==w){if(d=y[2]-y[0],p=y[3]-y[1],!(_=i.__cacheTotal=mg.getInstance(t,e,r.__uuid,y,u,f,null))||!_.__enabled)return void((d||p)&&lt.warn("CanvasCache of "+i.tagName+"("+a+") is oversize: "+d+", "+p));_.__available=!0,x=_.dx,g=_.dy,m=_.dbx,b=_.dby,A=_.x,E=_.y,r.__env={x:_.x,y:_.y,width:_.page.width,height:_.page.height}}else y=[u,f,u+c,f+v],d=c,p=v,x=-u,g=-f,m=0,b=0,A=0,E=0,M=!0,_=lt.getOffscreenCanvas(d,p,"overflow",null);for(var T=_.ctx,S=[],R=null,k=null,C=n,F=[],I=[],O=a,L=a+(o||0)+1;O<L;O++){var B=s[O],D=B.node,P=B.lv,N=B.total,z=B.hasMask;if(B.isText){D.render(t,T,x,g);var H=I[O];H&&(T=vb(T,H,l,h,!1))}else{var G=D.__computedStyle;if("none"===G[db]){O+=N||0,z&&(O+=eA(s,O+1,z));var W=I[O];W&&(T=vb(T,W,l,h,!0));continue}var Y=G[Eb],U=G[Mb],X=G[xb],V=F[O];if(V){var K=V.idx,j=V.hasMask,Z=V.offscreenMask,q=lt.getOffscreenCanvas(l,h,null,"mask2");Z.mask=q,Z.isClip=D.__clip;for(var $=O+(N||0)+1;--j;)$+=(s[$].total||0)+1;var J=I[--$]=I[$]||[];J.push({idx:K,lv:P,type:_b,offscreen:Z}),J.push({idx:$,lv:P,type:fb,offscreen:{ctx:T,target:q}}),T=q.ctx}if(O===a);else if(P>C)Nb(R=k)&&(R=null),S.push(R);else if(P<C){var Q=C-P;S.splice(-Q),R=S[P-1]}C=P;var tt=void 0;O===a||Nb(R)&&Nb(Y)||(tt=fs.calMatrixByOrigin(Y,U[0]+m+D.__x1-u+A,U[1]+b+D.__y1-f+E),Nb(R)||(tt=Hb(R,tt))),k=tt;var et=O>a&&D.__cacheTarget;if(et===D.__cache&&(et=null),et){if(O+=N||0,z&&(O+=eA(s,O+1,z)),(T.globalAlpha=D.__opacity)>0){tt?T.setTransform(tt[0],tt[1],tt[4],tt[5],tt[12],tt[13]):T.setTransform(1,0,0,1,0,0);var rt=G[bb];"normal"!==rt&&(T.globalCompositeOperation=Yb(rt)),mg.drawCache(et,_),T.globalCompositeOperation="source-over"}var it=I[O];it&&(T=vb(T,it,l,h,!1))}else{var at=void 0,nt=void 0,ot=void 0,st=void 0,ht=O>a&&D.__calOffscreen(T,G);if(ht&&(T=ht.ctx,at=ht.offscreenBlend,nt=ht.offscreenMask,ot=ht.offscreenFilter,st=ht.offscreenOverflow),"visible"===X&&(T.globalAlpha=D.__opacity)>0&&(tt?T.setTransform(tt[0],tt[1],tt[4],tt[5],tt[12],tt[13]):T.setTransform(1,0,0,1,0,0),D.render(t,T,x,g)),at){var _t=O+(N||0);z&&(_t+=eA(s,_t+1,z)),(I[_t]=I[_t]||[]).push({idx:O,lv:P,type:ub,offscreen:at})}if(nt&&(F[O+(N||0)+1]={idx:O,hasMask:z,offscreenMask:nt}),ot){var ut=O+(N||0);z&&(ut+=eA(s,ut+1,z)),(I[ut]=I[ut]||[]).push({idx:O,lv:P,type:hb,offscreen:ot})}if(st){var ft=O+(N||0);z&&(ft+=eA(s,ft+1,z)),(I[ft]=I[ft]||[]).push({idx:O,lv:P,type:lb,offscreen:st})}var ct=I[O];ct&&(T=vb(T,ct,l,h,!1))}}}if(M){var vt=i.__cacheTotal=mg.getInstance(t,e,r.__uuid,y,u,f,null);vt.__available=!0,vt.ctx.drawImage(_.canvas,vt.x,vt.y),_.release(),_=vt}return r.__env=null,_}}(t,e,r,_,a,n,o||0,s,l,h);f&&(!function(t,e,r,i,a,n,o){var s,l=i.__computedStyle,h=i.__cacheFilter,_=i.__cacheMask,u=l[gb],f=r;u&&u.length&&(h&&h.__available&&!s||(f=i.__cacheFilter=mg.genFilter(f,u),s=!0)),!a||_&&_.__available&&!s||(f=i.__cacheMask=mg.genMask(f,i,(function(r,i,a){for(var s={},l={},h=i.dx,_=i.dy,u=i.dbx,f=i.dby,c=i.x,v=i.y,y=i.ctx,d=i.x1,p=i.y1,x=r.__struct,g=r.__root.__structs.indexOf(x),m=x.total,b=[],A=null,M=null,w=[],T=1,S=1,R=x.lv,k=g,C=g+(m||0)+1;k<C;k++){var F=e[k],I=F.node,O=F.lv,L=F.total,B=F.hasMask;if(F.isText)I.render(t,y,h,_),l.hasOwnProperty(k)&&(y=vb(y,l[k],n,o,!1));else{var D=I.__computedStyle;if("none"===D[db]){k+=L||0,B&&(k+=eA(e,k+1,B)),l.hasOwnProperty(k)&&(y=vb(y,l[k],n,o,!0));continue}if(s.hasOwnProperty(k)){var P=s[k],N=P.idx,z=P.hasMask,H=P.offscreenMask,G=lt.getOffscreenCanvas(n,o,null,"mask2");H.mask=G,H.isClip=I.__clip;for(var W=k+(L||0)+1;--z;)W+=(e[W].total||0)+1;var U=l[--W]=l[W]||[];U.push({idx:N,lv:O,type:_b,offscreen:H}),U.push({idx:W,lv:O,type:fb,offscreen:{ctx:y,target:G}}),y=G.ctx}if(k===g);else if(O>R)Nb(A=M)&&(A=null),b.push(A),T=S,w.push(T);else if(O<R){var X=R-O;b.splice(-X),A=b[O-1],w.splice(-X),T=w[O-1]}R=O;var V=D[Eb],K=D[Mb],j=D[pb];k!==g&&(j*=T),I.__opacity=S=j;var Z=void 0;Nb(V)||(Z=fs.calMatrixByOrigin(V,K[0]+u+I.__x1-d+c,K[1]+f+I.__y1-p+v),Nb(A)||(Z=Hb(A,Z))),M=Z,Z?Y.equalArr(Z,a)?Z=E.identity():a&&(a=E.inverse(a),Z=E.multiply(a,Z)):Nb(a)||(Z=E.inverse(a)),Z=Z||E.identity(),Wb(I.__matrixEvent,Z);var q=I.__cacheTarget;if(q===I.__cache&&(q=null),q){k+=L||0,B&&(k+=eA(e,k+1,B)),y.globalAlpha=j,y.setTransform(Z[0],Z[1],Z[4],Z[5],Z[12],Z[13]);var $=D[bb];y.globalCompositeOperation="normal"!==$?Yb($):"source-over";var J=q,Q=J.x,tt=J.y,et=J.canvas,rt=J.width,it=J.height,at=J.x1,nt=J.y1,ot=c+at-d+u-J.dbx,st=v+nt-p+f-J.dby;y.drawImage(et,Q,tt,rt,it,ot,st,rt,it),y.globalCompositeOperation="source-over",l.hasOwnProperty(k)&&(y=vb(y,l[k],rt,it,!1))}else{var ht=void 0,_t=void 0,ut=void 0,ft=void 0,ct=I.__calOffscreen(y,D);if(ct&&(y=ct.ctx,ht=ct.offscreenBlend,_t=ct.offscreenMask,ut=ct.offscreenFilter,ft=ct.offscreenOverflow),y.globalAlpha=j,y.setTransform(Z[0],Z[1],Z[4],Z[5],Z[12],Z[13]),I.render(t,y,h,_),ht){var vt=k+(L||0);B&&(vt+=eA(e,vt+1,B)),(l[vt]=l[vt]||[]).push({idx:k,lv:O,type:ub,offscreen:ht})}if(_t&&(s[k+(L||0)+1]={idx:k,hasMask:B,offscreenMask:_t}),ut){var yt=k+(L||0);B&&(yt+=eA(e,yt+1,B)),(l[yt]=l[yt]||[]).push({idx:k,lv:O,type:hb,offscreen:ut})}if(ft){var dt=k+(L||0);B&&(dt+=eA(e,dt+1,B)),(l[dt]=l[dt]||[]).push({idx:k,lv:O,type:lb,offscreen:ft})}l.hasOwnProperty(k)&&(y=vb(y,l[k],n,o))}}}})))}(t,s,f,_,u,l,h),_.__updateCache())})));for(var w=[],T=[],S=-1,R=0,k=s.length;R<k;R++){var C=s[R],F=C.node,I=C.lv,O=C.total,L=C.hasMask;if(C.isText){F.render(t,e,0,0);var B=T[R];B&&(e=vb(e,B,l,h,!1),S=-1)}else{var D=F.__computedStyle;if("none"===D[db]){R+=O||0,L&&(R+=eA(s,R+1,L));var P=T[R];P&&(e=vb(e,P,l,h,!0),S=-1);continue}var N=w[R];if(N){var z=N.idx,H=N.hasMask,G=N.offscreenMask,W=lt.getOffscreenCanvas(l,h,null,"mask2");G.mask=W,G.isClip=F.__clip;for(var U=R+(O||0)+1;--H;){U+=(s[U].total||0)+1}var X=T[--U]=T[U]||[];X.push({idx:z,lv:I,type:_b,offscreen:G}),X.push({idx:U,lv:I,type:fb,offscreen:{ctx:e,target:W}}),e=W.ctx}var V=o?o[R]:D[pb],K=void 0;if(!o){K=F.__matrix;var j=F.__domParent;if(j){1!==j.__opacity&&(V*=j.__opacity);var Z=j.__matrixEvent;Z&&Z.length&&(K=Hb(Z,K))}F.__opacity=V,Wb(F.__matrixEvent,K)}var q=F.__cacheTarget;if(q===F.__cache&&(q=null),q){if(R+=O||0,L&&(R+=eA(s,R+1,L)),S!==V&&(e.globalAlpha=V,S=V),V>0){if(o){var $=16*R;e.setTransform(n[$],n[$+1],n[$+4],n[$+5],n[$+12],n[$+13])}else e.setTransform(K[0],K[1],K[4],K[5],K[12],K[13]);var J=D[bb];"normal"!==J&&(e.globalCompositeOperation=Yb(J));var Q=q,tt=Q.x,et=Q.y,rt=Q.canvas,it=Q.x1,at=Q.y1,nt=Q.dbx,ot=Q.dby,st=Q.width,ht=Q.height;e.drawImage(rt,tt,et,st,ht,it-nt,at-ot,st,ht),e.globalCompositeOperation="source-over"}var _t=T[R];_t&&(e=vb(e,_t,l,h,!1),S=-1)}else{var ut=void 0,ft=void 0,ct=void 0,vt=void 0,yt=F.__calOffscreen(e,D);if(yt&&(e=yt.ctx,ut=yt.offscreenBlend,ft=yt.offscreenMask,ct=yt.offscreenFilter,vt=yt.offscreenOverflow),S!==V&&(e.globalAlpha=V,S=V),V>0){if(o){var dt=16*R;e.setTransform(n[dt],n[dt+1],n[dt+4],n[dt+5],n[dt+12],n[dt+13])}else e.setTransform(K[0],K[1],K[4],K[5],K[12],K[13]);F.render(t,e,0,0)}if(ut){var pt=R+(O||0);L&&(pt+=eA(s,pt+1,L)),(T[pt]=T[pt]||[]).push({idx:R,lv:I,type:ub,offscreen:ut})}if(ft)w[R+(O||0)+1]={idx:R,hasMask:L,offscreenMask:ft};if(ct){var xt=R+(O||0);L&&(xt+=eA(s,xt+1,L)),(T[xt]=T[xt]||[]).push({idx:R,lv:I,type:hb,offscreen:ct})}if(vt){var gt=R+(O||0);L&&(gt+=eA(s,gt+1,L)),(T[gt]=T[gt]||[]).push({idx:R,lv:I,type:lb,offscreen:vt})}var mt=T[R];mt&&(e=vb(e,mt,l,h,!1),S=-1)}}}},uA=function(t,e,r,i,a){var n=r.__structs,o=r.width,s=r.height,l=[];if(!i)for(var h=0,_=n.length;h<_;h++){var u=n[h],f=u.node,c=u.total,v=u.hasMask,y=u.isText,d=f.__cacheDefs,p=f.__refreshLevel;if(v&&(p>=Ob||p&(Cb|Fb)))l[h+(c||0)+1+v-1]=p;if(p<Ob){var x=l[h];x?p&Cb||!(x<Ob)||x&Cb||d.forEach((function(t){e.addCache(t)})):y||d.forEach((function(t){e.addCache(t)}))}}for(var g,m,b,A=[],M=[],w=[],T=0,S=0,R=function(r,i){var a=n[r],h=a.node,_=a.lv,u=a.total,f=a.hasMask,c=a.isText,v=void 0,y=void 0,d=void 0,p=void 0;c?(v=h.computedStyle,y=S):(v=h.__computedStyle,d=h.__cacheDefs,y=h.__refreshLevel,p=h.__cacheTotal),S=y,h.__refreshLevel=kb;var x=v[db];if(f&&"none"!==x){var R=r+(u||0)+1,C=R+f;A[C-1]={index:r,start:R,end:C,isClip:n[R].node.__clip}}if(_<T){var F=T-_;M.splice(-F),g=M[_-1],w.splice(-F),m=w[_-1]}else if(_>T){M.push(g=b.__matrix);var I=b.__virtualDom;w.push(I),m=I}b=h,T=_;var O=void 0;if(y<Ob&&!c){if(O=h.__virtualDom,p&&p.__available?(r+=u||0,O.cache=!0):(p&&(p.__available=!0),O=h.__virtualDom=Y.extend({},O),h instanceof Jx&&!(h instanceof $g)&&(O.children=[]),"none"===x?(r+=u||0,f&&(r+=f)):delete O.cache),y&Cb){var L=h.__matrix;!L||Nb(L)?delete O.transform:O.transform="matrix("+Y.joinArr(E.m2m6(L),",")+")",g&&L&&(L=Hb(g,L)),Wb(h.__matrixEvent,L)}if(y&Fb){var B=v[pb];1===B?delete O.opacity:O.opacity=B}if(y&Ib){var D=v[gb],P=Fe.svgFilter(D);P?O.filter=P:delete O.filter}if(y&Lb){var N=v[bb];"normal"!==N?O.mixBlendMode=Yb(N):delete O.mixBlendMode}O.lv=y}else{if(!c){h.__cacheDefs.splice(0);var z=h.__matrix;g&&(z=Hb(g,z)),Wb(h.__matrixEvent,z)}if(h.render(t,e,0,0),O=h.__virtualDom,!c)(h.__cacheTotal=h.__cacheTotal||{__available:!0,get available(){return k=r,this.__available},release:function(){this.__available=!1,delete O.cache},__offsetY:function(){}}).__available=!0;"none"===(x=v[db])&&(r+=u||0,r+=f||0)}var H=A[r];if(H&&(l[r]||y>=Ob||y&(Cb|Fb))){var G=H.index,W=H.start,U=H.end,X=H.isClip,V=n[G].node,K=[];X&&K.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(o,",0L").concat(o,",").concat(s,"L0,").concat(s,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var j=W;j<U;j++){var Z=n[j].node,q=Z.computedStyle,$=q[db],J=q[xb],Q=q[Ab],tt=Z.virtualDom,et=tt.children,rt=tt.opacity;if("none"!==$&&"hidden"!==J){et=Y.clone(et),K=K.concat(et);for(var it=0,at=et.length;it<at;it++){var nt=et[it],ot=nt.tagName,st=nt.props;if("path"===ot){if(X)for(var lt=0,ht=st.length;lt<ht;lt++){var _t=st[lt];"fill"===_t[0]&&(_t[1]=Y.int2invert(Q[0]))}var ut=Z.matrix,ft=zb(V.matrix);ut=Hb(ft,ut),st.push(["transform","matrix(".concat(Y.joinArr(E.m2m6(ut),","),")")]),Y.isNil(rt)||1===rt||st.push(["opacity",rt])}else if("image"===ot){for(var ct=-1,vt=0,yt=st.length;vt<yt;vt++)if("transform"===st[vt][0]){ct=vt;break}if(-1===ct){var dt=zb(V.matrix);Nb(dt)||st.push(["transform","matrix(".concat(Y.joinArr(E.m2m6(dt),","),")")])}else{var pt=st[ct][1].match(/[\d.]+/g).map((function(t){return parseFloat(t)})),xt=zb(V.matrix);pt=Hb(xt,pt),st[ct][1]="matrix(".concat(Y.joinArr(E.m2m6(pt),","),")")}}}}}for(var gt=d.length-1;gt>=0;gt--){var mt=d[gt];"mask"===mt.tagName&&(d.splice(gt,1),e.removeCache(mt))}var bt={tagName:"mask",props:[],children:K},At=e.add(bt);d.push(bt),At="url(#"+At+")",V.virtualDom.mask=At}m&&!h.__mask&&m.children.push(O),0===r&&(g=h.__matrix,m=O),k=r},k=0,C=n.length;k<C;k++)R(k)},fA=function(t,e,r,i,a){i&&og.init(e.getParameter(e.MAX_TEXTURE_SIZE),!0);var n,o,s=r.__structs,l=r.width,h=r.height,_=r.__wasmRoot;if(_){var u=s.length;n=new Float64Array(__.wasm.memory.buffer,_.op_ptr(),u),o=new Float64Array(__.wasm.memory.buffer,_.vt_ptr(),16*u)}var f,c,v,y=.5*l,d=.5*h,p=kb,g=[];if(i||a>=Ob||a&(Db|Ib|Bb|Pb))for(var m=[],b=[],A=[],E=null,M=null,w=0,T=0,S=s.length;T<S;T++){var R=s[T],k=R.node,C=R.lv,F=R.total,I=R.hasMask,O=R.isText;if(k.__index=T,O){if(p>=Ob){var L=k.bbox,B=k.__x,D=k.__y,P=k.__cache;P?P.reset(L,B,D):P=mg.getInstance(x.CANVAS,e,r.__uuid,L,B,D,null),P&&P.enabled?(P.__bbox=L,P.__available=!0,k.__cache=P,k.render(x.CANVAS,P.ctx,P.dx,P.dy),P.update(),k.__cacheTarget=P):(P&&P.release(),k.__limitCache=!0,k.__cacheTarget=null)}}else{var N=k.__computedStyle;if("none"!==N[db]){var z=N[wb],H="flat"===N[Sb],G=z?k:null;if(0===C)z&&(E=k);else if(C>w)m.push(H),b.push(H),E=M||E,A.push(G||E);else if(C<w){var W=w-C;m.splice(-W),m[C-1],b.splice(-W),b[C-1],A.splice(-W),E=A[C-1]}w=C;var Y=k.__refreshLevel,U=k.__currentStyle,X=k.__cacheTotal;if(k.__refreshLevel=kb,Y)if(Y<Ob){var V=k.__hasContent,K=N[bb],j=Y&Lb&&"normal"!==K,Z=k.__cacheAsBitmap||I;if(!Z&&Y&(Ib|Db)){var q=N[gb];q&&q.length&&(Z=!0)}var $=void 0;if(!Z&&Y&(Bb|Db)){var J=k.__domParent;($=F&&z&&(!Nb(J&&J.__perspectiveMatrix)||!Nb(k.__selfPerspectiveMatrix)))&&(Z=!0)}j&&(f=!0),Z&&(V||F)&&g.push({i:T,lv:C,total:F,node:k,hasMask:I,isPpt:$}),X&&X.__available&&(T+=F||0,Y===kb&&I&&(T+=eA(s,T+1,I)))}else{var Q=k.calContent(U,N),tt=void 0;if(Q){var et=k.bbox,rt=k.__cache,it=k.__x1,at=k.__y1;if(k instanceof $g){var nt=k.__loadImg;nt.onlyImg&&!nt.error&&nt.source&&(tt=!0,(rt=k.__cache=Ag.getInstance(x.CANVAS,e,r.__uuid,et,nt,it,at))&&rt.enabled&&1===rt.count&&(rt.ctx.drawImage(nt.source,it+rt.dx,at+rt.dy),rt.update()))}if(tt||(rt?(rt.reset(et,it,at),rt instanceof mg||(rt=k.__cache=mg.getInstance(x.CANVAS,e,r.__uuid,et,it,at,null))):rt=k.__cache=mg.getInstance(x.CANVAS,e,r.__uuid,et,it,at,null)),!rt||!rt.enabled)return rt&&rt.release(),k.__limitCache=!0,void(k.__cacheTarget=null);rt.__bbox=et,rt.__available=!0,k.__cache=rt,tt||(k.render(x.CANVAS,rt.ctx,rt.dx,rt.dy),rt.update()),k.__updateCache()}else k.__limitCache=!1,k.__cacheTarget=null;if(Q||F){var ot=N[mb],st=N[gb],lt=N[bb],ht=N[wb],_t="normal"!==lt,ut=F&&ht||!Nb(k.__selfPerspectiveMatrix),ft="hidden"===ot&&F,ct=st&&st.length;_t&&(f=!0),(k.__cacheAsBitmap||I||ct||ft||ut)&&g.push({i:T,lv:C,total:F,node:k,hasMask:I,isPpt:ut})}}else;p=Y,M=G}else T+=F||0,I&&(T+=eA(s,T+1,I))}}if(g.length){g.sort((function(t,e){return t.lv===e.lv?e.i-t.i:e.lv-t.lv}));for(var vt=0,yt=g.length;vt<yt;vt++){var dt=g[vt],pt=dt.i,xt=dt.lv,gt=dt.total,mt=dt.node,bt=dt.hasMask,At=dt.isPpt,Et=mt.__computedStyle[gb],Mt=mt.__limitCache,wt=mt.__cacheTotal,Tt=mt.__cacheFilter,St=mt.__cacheMask;if(Mt)return;var Rt=void 0;if(!wt||!wt.__available){var kt=void 0;if(!(kt=At?aA(t,wt,e,r,mt,pt,xt,gt||0,s,l,h):iA(t,wt,e,r,mt,pt,0,gt||0,s,l,h,null,null,null)))return;wt=kt,Rt=!0}var Ct=wt;if(Et.length&&(!Tt||!Tt.__available||Rt)){var Ft=nA(t,e,mt,Ct,Et,l,h);Ft&&(Ct=Ft,Rt=!0)}!bt||St&&St.__available&&!Rt||lA(t,e,r,mt,Ct,l,h,pt+(gt||0)+1,xt,s),mt.__updateCache()}}f&&(v=Vb(e,null,0,l,h),Kb(e,null,0),c=rA(e,v,l,h),e.bindFramebuffer(e.FRAMEBUFFER,c),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,v,0));for(var It,Ot=[],Lt=0,Bt=s.length;Lt<Bt;Lt++){var Dt=s[Lt],Pt=Dt.node,Nt=Dt.total,zt=Dt.hasMask;if(Dt.isText){var Ht=Pt.__cache;if(Ht&&Ht.__available){var Gt=Pt.__domParent,Wt=Gt.__matrixEvent,Yt=Gt.__opacity,Ut=Ht.__page;It&&It!==Ut&&Xb(e,Ot.splice(0),y,d,0,0),It=Ut,Ot.push({cache:Ht,opacity:Yt,matrix:Wt})}}else{var Xt=Pt.__computedStyle;if("none"===Xt[db]){Lt+=Nt||0,zt&&(Lt+=eA(s,Lt+1,zt));continue}var Vt=Xt[bb],Kt=Xt[xb],jt=Xt[Rb],Zt=n?n[Lt]:Xt[pb],qt=Pt.__cache,$t=void 0;if(!n){$t=Pt.__matrix;var Jt=Pt.__selfPerspectiveMatrix;Nb(Jt)||($t=Hb(Jt,$t));var Qt=Pt.__domParent;if(Qt){1!==Qt.__opacity&&(Zt*=Qt.__opacity);var te=Qt.__perspectiveMatrix,ee=Qt.__matrixEvent;te&&te.length&&($t=Hb(te,$t)),ee&&ee.length&&($t=Hb(ee,$t))}Pt.__opacity=Zt,Wb(Pt.__matrixEvent,$t)}if("hidden"===Kt&&!Nt){zt&&(Lt+=eA(s,Lt+1,zt));continue}if("hidden"===jt){var re=Pt.__matrix,ie=re[5]<0&&re[10]<0,ae=re[0]<0&&re[10]<0;if(ie||ae){Lt+=Nt||0,zt&&(Lt+=eA(s,Lt+1,zt));continue}}var ne=Pt.__cacheTarget;if(ne){if(Zt>0)if("normal"!==Vt){Ot.length&&(Xb(e,Ot.splice(0),y,d,0,0),It=null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(c);var oe=hA(e,v,ne,Vt,Zt,$t,0,0,y,d,l,h);oe&&(e.deleteTexture(v),v=oe.texture,c=oe.frameBuffer)}else{var se=ne.__page;It&&It!==se&&Xb(e,Ot.splice(0),y,d,0,0),It=se,n?Ot.push({cache:ne,opacity:n[Lt],vertex:o,index:Lt}):Ot.push({cache:ne,opacity:Zt,matrix:$t})}ne!==qt&&(Lt+=Nt||0,zt&&(Lt+=eA(s,Lt+1,zt)))}if((!ne||ne===qt)&&Zt>0){var le=Pt.render;le!==qb&&le!==$b&&le!==Jb&&(Xb(e,Ot.splice(0),y,d,0,0),It=null,Pt.render(t,e,0,0),e.useProgram(e.program))}}}if(Xb(e,Ot,y,d,0,0),f){e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(c);var he=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,he),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW);var _e=e.getAttribLocation(e.program,"a_position");e.vertexAttribPointer(_e,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(_e);var ue=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,ue),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW);var fe=e.getAttribLocation(e.program,"a_texCoords");e.vertexAttribPointer(fe,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(fe);var ce=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,ce),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),e.STATIC_DRAW);var ve=e.getAttribLocation(e.program,"a_opacity");e.vertexAttribPointer(ve,1,e.FLOAT,!1,0,0),e.enableVertexAttribArray(ve),Kb(e,v,0);var ye=e.getUniformLocation(e.program,"u_texture");e.uniform1i(ye,0),e.drawArrays(e.TRIANGLES,0,6),e.deleteBuffer(he),e.deleteBuffer(ue),e.deleteBuffer(ce),e.disableVertexAttribArray(_e),e.disableVertexAttribArray(fe),e.deleteTexture(v)}},cA={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0,depth:!0},vA="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords1;attribute vec2 a_texCoords2;varying vec2 v_texCoords1;varying vec2 v_texCoords2;void main(){gl_Position=a_position;v_texCoords1=a_texCoords1;v_texCoords2=a_texCoords2;}",yA="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",dA=fe.STYLE_KEY,pA=dA.TOP,xA=dA.RIGHT,gA=dA.BOTTOM,mA=dA.LEFT,bA=dA.POSITION,AA=dA.DISPLAY,EA=dA.VISIBILITY,MA=dA.COLOR,wA=dA.WIDTH,TA=dA.HEIGHT,SA=dA.Z_INDEX,RA=dA.POINTER_EVENTS,kA=dA.WRITING_MODE,CA=dA.TEXT_STROKE_COLOR,FA=dA.TEXT_STROKE_WIDTH,IA=dA.TEXT_STROKE_OVER,OA=dA.MATRIX,LA=dA.TRANSFORM,BA=dA.OPACITY,DA=dA.MIX_BLEND_MODE,PA=dA.FONT_SIZE;dA.TRANSLATE_X,dA.TRANSLATE_Y,dA.TRANSLATE_Z,dA.ROTATE_X,dA.ROTATE_Y,dA.ROTATE_Z,dA.ROTATE_3D,dA.SCALE_X,dA.SCALE_Y,dA.SCALE_Z,dA.SKEW_X,dA.SKEW_Y,dA.TRANSFORM_ORIGIN;var NA=Y.isNil,zA=Y.isFunction,HA=g.PX,GA=g.INHERIT,WA=vl.getLevel,YA=vl.isReflow,UA=vl.NONE,XA=vl.FILTER,VA=vl.PERSPECTIVE,KA=vl.REPAINT,jA=vl.REFLOW,ZA=vl.REBUILD,qA=vl.CACHE,$A=vl.TRANSFORM,JA=vl.TRANSFORM_ALL,QA=vl.OPACITY,tE=vl.MIX_BLEND_MODE,eE=vl.MASK,rE=Sa.isGeom,iE=_A,aE=uA,nE=fA,oE={canvas:"canvas",svg:"svg",webgl:"canvas"};var sE=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];var lE=0,hE=function(t){function e(e,r,i){var a;return(a=t.call(this,e,r,i)||this).__dom=null,a.__mw=0,a.__mh=0,a.__task=[],a.__taskClone=[],a.__frameTask=[],a.__ani=[],a.__isInFrame=!1,a.__pause=!1,a.__arList=[],a.__ref={},a.__freeze=!1,a.__animateController=new t_,ih.mix(_(a)),a.__uuid=lE++,a.__rlv=ZA,a.__lastUpdateP=null,__.wasm&&(void 0===r.wasm||r.wasm)?(a.__wasmRoot=__.Root.new(),a.__wasmNode=__.Node.new(!1)):a.__wasmRoot=null,Pp.buildRoot(_(a),a.__children),a.__env=null,a}return s(e,t),n(e,[{key:"__initProps",value:function(){var t=this.props.width;if(!NA(t)){var e=parseFloat(t)||0;e>0&&(this.__width=e)}var r=this.props.height;if(!NA(r)){var i=parseFloat(r)||0;i>0&&(this.__height=i)}}},{key:"__genHtml",value:function(t){var e=this,r="<".concat(t);return Object.keys(this.props).forEach((function(t){var i=e.props[t];/^on[a-zA-Z]/.test(t)||(r+=function(t,e){var r=Array.isArray(e)?Y.joinSourceArray(e):Y.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+Y.encodeHtml(r,!0)+'"'}(t,i))})),r+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r;if(-1===["touchend","touchcancel"].indexOf(t.type)){var i=this.dom,a=this.__scx,n=this.__scy,o=i.getBoundingClientRect(),s=o.x,l=o.y,h=o.left,_=o.top,u=o.width,f=o.height;e=s||h||0,r=l||_||0;var c=t.touches?t.touches[0]:t;e=c.clientX-e,r=c.clientY-r,NA(a)?e*=this.__width/u:e/=a,NA(n)?r*=this.__height/f:r/=n}return{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:e,y:r,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e,null,!1),e}}},{key:"appendTo",value:function(t){t=function(t){if(Y.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__isDestroyed=!1,this.__initProps();var r=this.tagName,i=oE[r];if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)this.__dom=t,this.__width=t.width,this.__height=t.height;else if(t.nodeName.toLowerCase()===i)this.__dom=t,this.__width&&t.setAttribute("width",this.__width),this.__height&&t.setAttribute("height",this.__height);else if(this.__dom=t.querySelector(i),this.__dom){var a=this.__dom.__root;a&&a instanceof e&&a.destroy()}else t.innerHTML=this.__genHtml(i),this.__dom=t.querySelector(i);if(!this.__width||!this.__height){var n=window.getComputedStyle(t,null);this.__width||(this.__width=parseFloat(n.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.__height||(this.__height=parseFloat(n.getPropertyValue("height"))||0,t.setAttribute("height",this.height))}this.__width&&this.__height||lt.warn("karas render target with a width or height of 0.");var o=Object.assign({},cA,this.props.contextAttributes);if("canvas"===r)this.__ctx=this.__dom.getContext("2d",o),this.__renderMode=x.CANVAS;else if("svg"===r)this.__defs=this.dom.__defs||Qg.getInstance(this.__uuid),this.__renderMode=x.SVG;else if("webgl"===r){var s,l=this.props.webgl2;NA(l)?s=this.__ctx=this.__dom.getContext("webgl2",o)||this.__dom.getContext("webgl",o):(l&&(s=this.__dom.getContext("webgl2",o)),s||(s=this.__dom.getContext("webgl",o)),this.__ctx=s),this.__initShader(s),this.__renderMode=x.WEBGL}var h=this.__wasmRoot;h&&(h.mode=this.__renderMode),this.draw(!0),this.__eventCbList=function(t,e){var r=[];return sE.forEach((function(i){function a(r){var a=t.__root;if(a&&a instanceof e)if(["touchend","touchcancel","touchmove"].indexOf(i)>-1){var n=a.__touchstartTarget,o=a.__wrapEvent(r);for(o.target=n;n;)n.__emitEvent(o,null,!0),n=n.__domParent}else a.__cb(r)}t.addEventListener(i,a),r.push({type:i,cb:a})})),r}(this.__dom,e),this.__dom.__root=this,Hh.removeRoot(this),Hh.addRoot(this)}},{key:"__initShader",value:function(t){t.program=cg.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=cg.initShaders(t,vA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords1;varying vec2 v_texCoords2;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords1);vec4 color2=texture2D(u_texture2,v_texCoords2);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=cg.initShaders(t,vA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords1;varying vec2 v_texCoords2;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords1);vec4 color2=texture2D(u_texture2,v_texCoords2);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=cg.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=cg.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.programDs=cg.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_color[4];void main(){vec4 c=texture2D(u_texture,v_texCoords);gl_FragColor=vec4(u_color[0]*c.a,u_color[1]*c.a,u_color[2]*c.a,u_color[3]*c.a);}"),t.programMbmMp=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmSr=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmOl=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmDk=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmLt=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmCd=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmCb=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmHl=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmSl=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmDf=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmEx=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmHue=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmSt=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmCl=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmLm=cg.initShaders(t,yA,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programSs=cg.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_opacity;void main(){gl_FragColor=texture2D(u_texture,v_texCoords)*u_opacity;}"),t.useProgram(t.program)}},{key:"__reLayout",value:function(){var t=this.renderMode,e=this.width,r=this.height;this.__checkRoot(t,e,r);var i=this.__currentStyle[kA],a=i.v&&0===i.v.indexOf("vertical");this.__layout({x:0,y:0,w:e,h:r,isUpright:a},!1,!1,!1),this.__layoutAbs(this,{x:0,y:0,w:e,h:r,isUpright:a},null);var n=this.__structs=this.__structure(0,0),o=this.__wasmRoot;if(o){o.font_size=this.__computedStyle[PA],o.clear();for(var s=0,l=n.length;s<l;s++){var h=n[s].node;h instanceof lh&&(h=h.shadowRoot);var _=h.__wasmNode;o.add_node(_.ptr)}}this.__checkAr()}},{key:"draw",value:function(t){var e=this.isDestroyed,r=this.renderMode,i=this.ctx,a=this.defs;if(!e){this.__lastUpdateP=null,t&&this.__reLayout();var n=this.__wasmRoot;n&&n.refresh();var o=this.__rlv;if(this.props.noRender||!t&&this.__freeze)this.emit(ih.REFRESH,o,!0);else{if(r===x.CANVAS)this.__clearCanvas(i),iE(r,i,this,t,o);else if(r===x.SVG){a.clear(),aE(r,a,this,t,o);var s=this.virtualDom;s.defs=a.value;var l=this.__dom;l.__vd?sm(l,l.__vd,s):l.innerHTML=Y.joinVirtualDom(s),l.__vd=s,l.__defs=a}else r===x.WEBGL&&(this.__clearWebgl(i),nE(r,i,this,t,o));this.emit(ih.REFRESH,o,!1),this.__rlv=UA}}}},{key:"remove",value:function(){f(l(e.prototype),"remove",this).call(this),this.destroy()}},{key:"destroy",value:function(){this.children.forEach((function(t){t.remove()})),this.__destroy(),this.__animateController.__destroy();var t,e=this.dom;e&&(t=e,(this.__eventCbList||[]).forEach((function(e){t.removeEventListener(e.type,e.cb)})),e.__root=null);var r=this.__ctx;if(this.renderMode===x.CANVAS)this.__clearCanvas(r);else if(this.renderMode===x.WEBGL)for(var i in this.__clearWebgl(r),["program","programMask","programClip","programOverflow","programCm","programDs","programMbmMp","programMbmSr","programMbmOl","programMbmDk","programMbmLt","programMbmCd","programMbmCb","programMbmHl","programMbmSl","programMbmDf","programMbmEx","programMbmHue","programMbmSt","programMbmCl","programMbmLm"].forEach((function(t){var e=r[t];r.deleteShader(e.vertexShader),r.deleteShader(e.fragmentShader),r.deleteProgram(e)})),r)if(0===i.indexOf("programBlur,")){var a=r[i];r.deleteShader(a.vertexShader),r.deleteShader(a.fragmentShader),r.deleteProgram(a)}var n=this.__wasmRoot;n&&(n.clear(),n.free(),this.__wasmRoot=null)}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){var i=this;t!==i.width||e!==i.height?(i.__width=t,i.__height=e,i.updateStyle({width:t,height:e},r)):zA(r)&&r(-1);var a=this.__wasmRoot;a&&a.resize(t,e)}},{key:"getTargetAtPoint",value:function(t,e,r){return function t(e,i,a,n,o){var s=e.__x1,l=e.__y1,h=e.offsetWidth,_=e.offsetHeight,u=e.matrixEvent,f=e.children,c=e.zIndexChildren,v=e.computedStyle,y=v[AA],d=v[RA];if(r||"none"!==y){if(Array.isArray(c)){for(var p=0,x=f.length;p<x;p++)f[p].__index__=p;for(var g=c.length-1;g>=0;g--){var m=c[g];if(!(m instanceof karas.Text)){var b=n.slice();b.push(m.__index__);var A=o.slice();A.push(g);var E=t(m,i,a,b,A);if(E)return E}}}if(r||"none"!==d)return Se.pointInQuadrilateral(i,a,s,l,s+h,l,s+h,l+_,s,l+_,u)?{target:e,path:n,zPath:o}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,a=this.currentStyle,n=this.computedStyle,o=this.__wasmRoot;-1===["flex","block"].indexOf(a[AA])&&(n[AA]=a[AA]="block"),"absolute"===a[bA]&&(n[bA]=a[bA]="static"),a[wA]={v:e,u:HA},a[TA]={v:r,u:HA},n[wA]=e,n[TA]=r,t===x.CANVAS||t===x.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===x.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r)),o&&o.resize(e,r)}},{key:"__addUpdate",value:function(t,e,r,i,a,n,o,s,l){if(!this.__isDestroyed){t instanceof lh&&(t=t.shadowRoot);var h,_,u,f,c,v,y,d=t,p=d.__computedStyle,x=d.__cacheStyle,g=d.__cacheProps,m=r||UA;if(e)for(var b=0,A=e.length;b<A;b++){var E=e[b];if(t instanceof tp&&rE(t.tagName,E))m|=KA,g[E]=void 0;else{if(x[E]=void 0,(E===pA||E===xA||E===gA||E===mA)&&-1===["relative","absolute"].indexOf(p[bA]))continue;m|=WA(E),E===AA?f=!0:E===SA?h=t!==this&&["relative","absolute"].indexOf(p[bA])>-1:E===EA?_=!0:E===MA?u=!0:E===CA?c=!0:E===FA?v=!0:E===IA&&(y=!0)}}var M=this.__calUpdate(t,m,f,_,h,u,c,v,y,i,a,s);n?M&&(this.__aniChange=!0):M||o?this.__frameDraw(l):l&&l()}}},{key:"__addAniUpdate",value:function(t,e,r,i){if(!this.__isDestroyed){var a,n,o,s,l,h,_,u=t.__computedStyle,f=t.__cacheStyle,c=t.__cacheProps;o=i.hasColor,l=i.hasTsColor,h=i.hasTsWidth,_=i.hasTsOver;for(var v=!1,y=i.lv||UA,d=e.length,p=0;p<d;p++){var x=e[p];t instanceof tp&&rE(t.tagName,x)?c[x]=void 0:(f[x]=void 0,x!==pA&&x!==xA&&x!==gA&&x!==mA||-1!==["relative","absolute"].indexOf(u[bA])?x===SA&&(a=t!==this&&["relative","absolute"].indexOf(u[bA])>-1):v=!0)}for(var g=0,m=r.length;g<m;g++){var b=r[g];y|=WA(b),b===AA?s=!0:b===EA&&(n=!0)}v&&1===d&&!r.length||(this.__aniChange=!0,this.__calUpdate(t,y,s,n,a,o,l,h,_,!1,!1,i.optimize))}}},{key:"__calUpdate",value:function(t,e,r,i,a,n,o,s,l,h,_,u){var f,c=t.__computedStyle,v=t.__currentStyle,y=t.__cacheStyle,d=t.__mask,p=t.__domParent;if(e===UA||"none"===c[AA]&&!r)return!1;if(e&$A&&(y[OA]=c[LA]=void 0),d||e&eE){for(var g=t.__prev;g&&g.__mask;)g=g.__prev;g&&(g instanceof td||g instanceof lh&&g.shadowRoot instanceof td)&&(g.__refreshLevel|=qA|eE,g.__struct.hasMask=g.__hasMask=d,g.__cacheMask&&(f=g.__cacheMask.release()||f))}if(!u&&YA(e)){var m=Lp.checkTop(this,t,h,_);if(m===this?this.__reLayout():(Lp.checkNext(this,m,t,a,h,_),this.__checkAr()),_){for(var b=t;b.isShadowRoot;)(b=b.__host).__destroy();t.__destroy()}}else{var A=e>=KA;if(A)t.__cache&&(f=t.__cache.release()||f),t.__calStyle(e,v,c,y),t.__calPerspective(v,c,y);else{if(e&VA&&t.__calPerspective(v,c,y),e&JA){var E=t.__selfPerspectiveMatrix;t.__calMatrix(e,v,c,y,u);var M=t.__selfPerspectiveMatrix;Y.equalArr(E,M)||(A=!0)}e&QA&&(c[BA]=v[BA]),e&XA&&t.__calFilter(v,c,y),e&tE&&(c[DA]=v[DA])}if(i||n||o||s||l)for(var w=this.__structs,T=t.__struct,S=w.indexOf(T)+1,R=S+(T.total||0);S<R;S++){var k=w[S],C=k.node,F=k.total;if(!k.isText){var I=C.__currentStyle,O=C.__cacheStyle,L=void 0;i&&I[EA].u===GA?(L=!0,O[EA]=void 0):n&&I[MA].u===GA?(L=!0,O[MA]=void 0):o&&I[CA].u===GA?(L=!0,O[CA]=void 0):s&&I[FA].u===GA?(L=!0,O[FA]=void 0):l&&I[IA].u===GA&&(L=!0,O[IA]=void 0),L?(C.__refreshLevel|=KA,C.clearCache(),C.__calStyle(KA,I,C.__computedStyle,O)):S+=F||0}}if((A||e&VA)&&t.__cacheTotal&&(f=t.__cacheTotal.release()||f),t.__hasMask?(A||e^QA||e&VA)&&(t.__cacheMask&&(f=t.__cacheMask.release()||f),t.__cacheFilter&&(f=t.__cacheFilter.release()||f)):(A||e&(XA|VA))&&t.__cacheFilter&&(f=t.__cacheFilter.release()||f),f&&t.__updateCache(),p!==this.__lastUpdateP){var B=p;for(this.__lastUpdateP=B;B&&!(B.__refreshLevel&(qA|KA|jA));)B.__refreshLevel|=qA,B.__cacheTotal&&(f=B.__cacheTotal.release()||f),B.__cacheFilter&&(f=B.__cacheFilter.release()||f),B.__cacheMask&&(f=B.__cacheMask.release()||f),f&&B.__updateCache(),B=B.__domParent;a&&p&&(p.__zIndexChildren=null,p.__updateStruct(),this.__renderMode===x.SVG&&(f=t.__cacheTotal.release()||f,Lp.clearSvgCache(p)))}}return t.__refreshLevel|=e,f&&(e|=qA),this.__rlv|=h||_?ZA:e,!0}},{key:"__frameDraw",value:function(t){this.__isInFrame||(Hh.onFrame(this),this.__isInFrame=!0),this.__task.push(t)}},{key:"__cancelFrameDraw",value:function(t){if(t){var e=this.__task,r=e.indexOf(t);r>-1&&(e.splice(r,1),e.length||this.__frameTask.length||this.__ani.length||(Hh.offFrame(this),this.__isInFrame=!1))}}},{key:"__onFrame",value:function(t){this.__isInFrame||(Hh.onFrame(this),this.__isInFrame=!0),this.__frameTask.push(t)}},{key:"__offFrame",value:function(t){if(t){var e=this.__frameTask,r=e.indexOf(t);r>-1&&(e.splice(r,1),e.length||this.__task.length||this.__ani.length||(Hh.offFrame(this),this.__isInFrame=!1))}}},{key:"__onAniFrame",value:function(t){this.__isInFrame||(Hh.onFrame(this),this.__isInFrame=!0),this.__ani.push(t)}},{key:"__offAniFrame",value:function(t){var e=this.__ani,r=e.indexOf(t);r>-1&&(e.splice(r,1),e.length||this.__task.length||this.__frameTask.length||(Hh.offFrame(this),this.__isInFrame=!1))}},{key:"__before",value:function(t){var e=this.__ani,r=e.length,i=(this.__taskClone=this.__task.splice(0)).length,a=this.__frameTask.length;if(this.__aniChange=!1,!this.__pause){var n=this.__wasmRoot;if(n)n.on_frame(t)&&(this.__aniChange=!0);for(var o=0;o<r;o++)e[o].__before(t)}(this.__aniChange||i||a)&&this.draw(!1)}},{key:"__after",value:function(t){var e=this.__ani.slice(0),r=e.length,i=this.__taskClone.splice(0),a=i.length,n=this.__frameTask.slice(0),o=n.length;if(!this.__pause){for(var s=0;s<r;s++)e[s].__after(t);for(var l=0;l<o;l++){var h=n[l];h&&h(t)}}for(var _=0;_<a;_++){var u=i[_];u&&u(t)}r=this.__ani.length,a=this.__task.length,o=this.__frameTask.length,r||a||o||(Hh.offFrame(this),this.__isInFrame=!1)}},{key:"__clearCanvas",value:function(t){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)}},{key:"__clearWebgl",value:function(t){t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}},{key:"freeze",value:function(){this.__freeze||(this.__freeze=!0,this.emit(ih.FREEZE))}},{key:"unFreeze",value:function(){this.__freeze&&(this.__freeze=!1,this.emit(ih.UN_FREEZE))}},{key:"pause",value:function(){this.__pause=!0}},{key:"resume",value:function(){this.__pause=!1}},{key:"__addAr",value:function(t){this.__arList.push(t)}},{key:"__checkAr",value:function(){for(var t=this.__arList.splice(0),e=0,r=t.length;e<r;e++)t[e].__execAr()}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),e}(Jx);function _E(t,e,r,i,a,n){var o=Math.min(t,a),s=Math.min(e,n),l=Math.max(t,a),h=Math.max(e,n);if(r<o||i<s||r>l||i>h){var _=(t-r)/(t-2*r+a);_<0?_=0:_>1&&(_=1);var u=(e-i)/(e-2*i+n);u<0?u=0:u>1&&(u=1);var f=1-_,c=1-u,v=f*f*t+2*f*_*r+_*_*a,y=c*c*e+2*c*u*i+u*u*n;o=Math.min(o,v),s=Math.min(s,y),l=Math.max(l,v),h=Math.max(h,y)}return[o,s,l,h]}function uE(t,e,r,i,a,n,o,s){var l=Math.min(t,o),h=Math.min(e,s),_=Math.max(t,o),u=Math.max(e,s);if(r<l||i<h||r>_||i>u||a<l||n<h||a>_||n>u){var f=-t+r,c=-e+i,v=t-2*r+a,y=e-2*i+n,d=3*r-t-3*a+o,p=3*i-e-3*n+s,x=v*v-d*f,g=y*y-p*c;if(x>0){var m=(-v-(x=Math.sqrt(x)))/d;if(d&&m>0&&m<1){var b=1-m,A=b*b*b*t+3*b*b*m*r+3*b*m*m*a+m*m*m*o;l=Math.min(l,A),_=Math.max(_,A)}if((m=d?(-v+x)/d:.5*-f/v)>0&&m<1){var E=1-m,M=E*E*E*t+3*E*E*m*r+3*E*m*m*a+m*m*m*o;l=Math.min(l,M),_=Math.max(_,M)}}if(g>0){var w=(-y-(g=Math.sqrt(g)))/p;if(p&&w>0&&w<1){var T=1-w,S=T*T*T*e+3*T*T*w*i+3*T*w*w*n+w*w*w*s;h=Math.min(h,S),u=Math.max(u,S)}if((w=p?(-y+g)/p:.5*-c/y)>0&&w<1){var R=1-w,k=R*R*R*e+3*R*R*w*i+3*R*w*w*n+w*w*w*s;h=Math.min(h,k),u=Math.max(u,k)}}}return[l,h,_,u]}function fE(t){var e=t.length,r=t.reduce((function(t,r){return Math.pow(t,e)+Math.pow(r,e)}));return Math.pow(r,1/e)}function cE(t,e,r){var i=t,a=(2*e+r)/3,n=(e+2*r)/3;return(i(e)+3*i(a)+3*i(n)+i(r))*(r-e)/8}function vE(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,a=t,n=(e+r)/2,o=cE(a,e,r),s=cE(a,e,n),l=cE(a,n,r),h=s+l-o;return Math.abs(h)<=15*i?s+l+h/15:vE(a,e,n,i/2)+vE(a,n,r,i/2)}function yE(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(6===t.length?t=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]]]:8===t.length&&(t=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]],[t[6],t[7]]]),2===t.length){var i=c(t[0],2),a=i[0],n=i[1],o=c(t[1],2),s=o[0],l=o[1];return Math.sqrt(Math.pow(s-a,2)+Math.pow(l-n,2))}var h=function(e){return fE(xE(e,t))};return vE(h,e,r)}function dE(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=c(e,4),a=i[0],n=i[1],o=i[2],s=i[3],l=c(a,2),h=l[0],_=l[1],u=c(n,2),f=u[0],v=u[1],y=c(o,2),d=y[0],p=y[1],x=c(s,2),g=x[0],m=x[1],b=0,A=0;return 0===r?(b=Math.pow(1-t,3)*h+3*t*Math.pow(1-t,2)*f+3*(1-t)*Math.pow(t,2)*d+Math.pow(t,3)*g,A=Math.pow(1-t,3)*_+3*t*Math.pow(1-t,2)*v+3*(1-t)*Math.pow(t,2)*p+Math.pow(t,3)*m):1===r?(b=3*((1-t)*(1-t)*(f-h)+2*(1-t)*t*(d-f)+t*t*(g-d)),A=3*((1-t)*(1-t)*(v-_)+2*(1-t)*t*(p-v)+t*t*(m-p))):2===r?(b=6*(d-2*f+h)*(1-t)+6*(g-2*d+f)*t,A=6*(p-2*v+_)*(1-t)+6*(m-2*p+v)*t):3===r&&(b=6*(g-3*d+3*f-h),A=6*(m-3*p+3*v-_)),[b,A]}function pE(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=c(e,3),a=i[0],n=i[1],o=i[2],s=c(a,2),l=s[0],h=s[1],_=c(n,2),u=_[0],f=_[1],v=c(o,2),y=v[0],d=v[1],p=0,x=0;return 0===r?(p=Math.pow(1-t,2)*l+2*t*(1-t)*u+Math.pow(t,2)*y,x=Math.pow(1-t,2)*h+2*t*(1-t)*f+Math.pow(t,2)*d):1===r?(p=2*(1-t)*(u-l)+2*t*(y-u),x=2*(1-t)*(f-h)+2*t*(d-f)):2===r&&(p=2*(y-2*u+l),x=2*(d-2*f+h)),[p,x]}function xE(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return 4===e.length?dE(t,e,r):3===e.length?pE(t,e,r):void 0}function gE(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001,n=function(e){return fE(xE(e,t))},o=e*r,s=r,l=s,h=0;h<i;h++){var _=cE(n,0,s)-o;if(Math.abs(_)<a)break;var u=fE(xE(s,t,1)),f=fE(xE(s,t,2)),c=_*u,v=_*f+u*u;if(s-=c/v,Math.abs(s-l)<a)break;l=s}return xE(s,t,0)}function mE(t,e){if(!Array.isArray(t)||t.length<3)return t;var r,i,a,n,o,s,l,h,_=t[0],u=t[1],f=t[2],c=t[3];if(!_||!u||!f)return t;Array.isArray(_)?(r=_[0],i=_[1]):(r=_.x,i=_.y),Array.isArray(u)?(a=u[0],n=u[1]):(a=u.x,n=u.y),Array.isArray(f)?(o=f[0],s=f[1]):(o=f.x,s=f.y);var v=(a-r)*e+r,y=(n-i)*e+i,d=(o-a)*e+a,p=(s-n)*e+n,x=(d-v)*e+v,g=(p-y)*e+y;return 4===t.length?(Array.isArray(c)?(l=c[0],h=c[1]):(l=c.x,h=c.y),[[r,i],[v,y],[x,g],[(((l-o)*e+o-d)*e+d-x)*e+x,(((h-s)*e+s-p)*e+p-g)*e+g]]):3===t.length?[[r,i],[v,y],[x,g]]:void 0}function bE(t,e){return[t[0][0]*(1-e)*(1-e)+2*t[1][0]*e*(1-e)+t[2][0]*e*e,t[0][1]*(1-e)*(1-e)+2*t[1][1]*e*(1-e)+t[2][1]*e*e]}function AE(t,e){return[t[0][0]*(1-e)*(1-e)*(1-e)+3*t[1][0]*e*(1-e)*(1-e)+3*t[2][0]*e*e*(1-e)+t[3][0]*e*e*e,t[0][1]*(1-e)*(1-e)*(1-e)+3*t[1][1]*e*(1-e)*(1-e)+3*t[2][1]*e*e*(1-e)+t[3][1]*e*e*e]}var EE={bboxBezier:function(t,e,r,i,a,n,o,s){var l=arguments.length;if(Array.isArray(t)){var h=t.length,_=t,u=c(_[0],2);t=u[0],e=u[1];var f=c(_[1],2);if(r=f[0],i=f[1],l=4,h>=3){var v=c(_[2],2);a=v[0],n=v[1],l=6}if(h>=4){var y=c(_[3],2);o=y[0],s=y[1],l=8}}if(4===l){var d=Math.min(t,r),p=Math.min(e,i),x=Math.max(t,r),g=Math.max(e,i);return[d,p,x,g]}return 6===l?_E(t,e,r,i,a,n):8===l?uE(t,e,r,i,a,n,o,s):void 0},bezierLength:yE,pointAtBezier:function(t,e,r,i){return gE(t,yE(t,0,1),e,r,i)},pointAtBezierWithLength:gE,sliceBezier:mE,sliceBezier2Both:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(Array.isArray(t)&&!(t.length<3))return e=Math.max(e,0),r=Math.min(r,1),0===e&&1===r||(r<1&&(t=mE(t,r)),e>0&&(r<1&&(e/=r),t=mE(t.slice(0).reverse(),1-e).reverse())),t},pointAtByT:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 4===t.length?AE(t,e):3===t.length?bE(t,e):void 0},getPointT:function(t,e,r){return 4===t.length?function(t,e,r){for(var i=Cm.getRoots([t[0][0]-e,3*(t[1][0]-t[0][0]),3*(t[2][0]+t[0][0]-2*t[1][0]),t[3][0]-t[0][0]+3*t[1][0]-3*t[2][0]]).filter((function(t){return t>=0&&t<=1})),a=Cm.getRoots([t[0][1]-r,3*(t[1][1]-t[0][1]),3*(t[2][1]+t[0][1]-2*t[1][1]),t[3][1]-t[0][1]+3*t[1][1]-3*t[2][1]]).filter((function(t){return t>=0&&t<=1})),n=[],o=0,s=i.length;o<s;o++)for(var l=i[o],h=0,_=a.length;h<_;h++){var u=a[h],f=Math.abs(l-u);f<1e-10&&n.push({x:l,y:u,diff:f})}n.sort((function(t,e){return t.diff-e.diff})),n.length>3&&n.splice(3);n=n.map((function(t){return.5*(t.x+t.y)}));var c=[];return n.forEach((function(i){var a=t[0][0]*Math.pow(1-i,3)+3*t[1][0]*i*Math.pow(1-i,2)+3*t[2][0]*i*i*(1-i)+t[3][0]*Math.pow(i,3),n=t[0][1]*Math.pow(1-i,3)+3*t[1][1]*i*Math.pow(1-i,2)+3*t[2][1]*i*i*(1-i)+t[3][1]*Math.pow(i,3);Math.abs(a-e)<1e-10&&Math.abs(n-r)<1e-10&&c.push(i)})),c}(t,e,r):3===t.length?function(t,e,r){for(var i=Cm.getRoots([t[0][0]-e,2*(t[1][0]-t[0][0]),t[2][0]+t[0][0]-2*t[1][0]]).filter((function(t){return t>=0&&t<=1})),a=Cm.getRoots([t[0][1]-r,2*(t[1][1]-t[0][1]),t[2][1]+t[0][1]-2*t[1][1]]).filter((function(t){return t>=0&&t<=1})),n=[],o=0,s=i.length;o<s;o++)for(var l=i[o],h=0,_=a.length;h<_;h++){var u=a[h],f=Math.abs(l-u);f<1e-10&&n.push({x:l,y:u,diff:f})}n.sort((function(t,e){return t.diff-e.diff})),n.length>2&&n.splice(2);n=n.map((function(t){return.5*(t.x+t.y)}));var c=[];return n.forEach((function(i){var a=t[0][0]*Math.pow(1-i,2)+2*t[1][0]*i*(1-i)+t[2][0]*i*i,n=t[0][1]*Math.pow(1-i,2)+2*t[1][1]*i*(1-i)+t[2][1]*i*i;Math.abs(a-e)<1e-10&&Math.abs(n-r)<1e-10&&c.push(i)})),c}(t,e,r):void 0},bezierSlope:function(t,e){if(2===t.length){var r=c(t[0],2),i=r[0],a=r[1],n=c(t[1],2),o=n[0],s=n[1];return i===o?1/0:(s-a)/(o-i)}return 3===t.length?function(t,e){var r=c(t,3),i=c(r[0],2),a=i[0],n=i[1],o=c(r[1],2),s=o[0],l=o[1],h=c(r[2],2),_=h[0],u=h[1],f=2*(a-2*s+_)*e+2*s-2*a;if(0===f)return 1/0;return(2*(n-2*l+u)*e+2*l-2*n)/f}(t,e):4===t.length?function(t,e){var r=c(t,4),i=c(r[0],2),a=i[0],n=i[1],o=c(r[1],2),s=o[0],l=o[1],h=c(r[2],2),_=h[0],u=h[1],f=c(r[3],2),v=f[0],y=f[1],d=3*(3*s-a-3*_+v)*e*e+2*(3*a-6*s+3*_)*e+3*s-3*a;if(0===d)return 1/0;return(3*(3*l-n-3*u+y)*e*e+2*(3*n-6*l+3*u)*e+3*l-3*n)/d}(t,e):void 0}},ME=fe.STYLE_KEY.STROKE_WIDTH,wE=Y.isNil;function TE(t,e,r,i){return i?t.map((function(t){return e+t*r})):e+t*r}function SE(t,e,r,i,a,n){if(n){if(t)return t.map((function(t){return SE(t,e,r,i,a)}))}else if(t&&t.length>=2)return[e+t[0]*i,r+t[1]*a];return[]}function RE(t,e){var r=0;return t&&t.length>=2&&r++,e&&e.length>=2&&(r+=2),r}function kE(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;if(0===s&&1===l)return[t,e,r,i,a,n];if(s===l)return[];if(s>l){var h=[l,s];s=h[0],l=h[1]}if(s=Math.max(0,s),l=Math.min(1,l),3===o){var _=EE.sliceBezier2Both([[t,e],a,n,[r,i]],s,l),u=c(_,4),f=c(u[0],2);t=f[0],e=f[1],a=u[1],n=u[2];var v=c(u[3],2);r=v[0],i=v[1]}else if(2===o){var y=EE.sliceBezier2Both([[t,e],n,[r,i]],s,l),d=c(y,3),p=c(d[0],2);t=p[0],e=p[1],n=d[1];var x=c(d[2],2);r=x[0],i=x[1]}else if(1===o){var g=EE.sliceBezier2Both([[t,e],a,[r,i]],s,l),m=c(g,3),b=c(m[0],2);t=b[0],e=b[1],a=m[1];var A=c(m[2],2);r=A[0],i=A[1]}else{var E=r-t,M=i-e;t+=E*s,e+=M*s,r+=E*(1-l),i+=M*(1-l)}return[t,e,r,i,a,n]}var CE=function(t){function e(e,r){var i;if((i=t.call(this,e,r)||this).isMulti){if(i.__xa=[0],i.__ya=[0],i.__xb=[1],i.__yb=[1],i.__controlA=[[]],i.__controlB=[[]],i.__start=[0],i.__end=[1],Array.isArray(r.xa)?i.__xa=r.xa.map((function(t){return parseFloat(t)||0})):wE(r.xa)||(i.__xa=[parseFloat(r.xa)||0]),Array.isArray(r.ya)?i.__ya=r.ya.map((function(t){return parseFloat(t)||0})):wE(r.ya)||(i.__ya=[parseFloat(r.ya)||0]),Array.isArray(r.xb)?i.__xb=r.xb.map((function(t){return parseFloat(t)||0})):wE(r.xb)||(i.__xb=[parseFloat(r.xb)||0]),Array.isArray(r.yb)?i.__yb=r.yb.map((function(t){return parseFloat(t)||0})):wE(r.yb)||(i.__yb=[parseFloat(r.yb)||0]),Array.isArray(r.controlA)&&(i.__controlA=r.controlA.map((function(t){return Array.isArray(t)?t:[]}))),Array.isArray(r.controlB)&&(i.__controlB=r.controlB.map((function(t){return Array.isArray(t)?t:[]}))),Array.isArray(r.start)){i.__start=r.start.map((function(t){return parseFloat(t)||0}));for(var a=i.__start.length;a<i.__xa.length;a++)i.__start.push(0)}else if(!wE(r.start)){var n=parseFloat(r.start)||0;i.__start=i.__xa.map((function(){return n}))}if(Array.isArray(r.end)){i.__end=r.end.map((function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),e}));for(var o=i.__end.length;o<i.__xa.length;o++)i.__end.push(1)}else if(!wE(r.end)){var s=parseFloat(r.end);isNaN(s)&&(s=1),i.__end=i.__xa.map((function(){return s}))}}else{if(i.__xa=i.__ya=i.__start=0,i.__xb=i.__yb=i.__end=1,i.__controlA=[],i.__controlB=[],wE(r.xa)||(i.__xa=parseFloat(r.xa)||0),wE(r.ya)||(i.__ya=parseFloat(r.ya)||0),wE(r.xb)||(i.__xb=parseFloat(r.xb)||0),wE(r.yb)||(i.__yb=parseFloat(r.yb)||0),wE(r.start)||(i.__start=parseFloat(r.start)||0),!wE(r.end)){var l=parseFloat(r.end);isNaN(l)&&(l=1),i.__end=l}Array.isArray(r.controlA)&&(i.__controlA=r.controlA),Array.isArray(r.controlB)&&(i.__controlB=r.controlB)}return i}return s(e,t),n(e,[{key:"__buildCache",value:function(t,e,r){var i,a=this,n=this.width,o=this.height,s=this.__cacheProps,l=this.isMulti;return["xa","xb"].forEach((function(e){(wE(s[e])||r)&&(i=!0,s[e]=TE(a[e],t,n,l))})),["ya","yb"].forEach((function(t){(wE(s[t])||r)&&(i=!0,s[t]=TE(a[t],e,o,l))})),["controlA","controlB"].forEach((function(h){(wE(s[h])||r)&&(i=!0,s[h]=SE(a[h],t,e,n,o,l))})),["start","end"].forEach((function(t){(wE(s[t])||r)&&(i=!0,s[t]=a[t])})),i}},{key:"render",value:function(t,r,i,a){var n=this,o=f(l(e.prototype),"render",this).call(this,t,r,i,a);if(o.break||t===x.WEBGL)return o;var s=o.x3,h=o.y3,_=o.stroke,u=o.strokeWidth,v=o.strokeDasharray,y=o.strokeDasharrayStr,d=o.strokeLinecap,p=o.strokeLinejoin,g=o.strokeMiterlimit,m=o.dx,b=o.dy,A=this.__cacheProps,E=this.isMulti;if(this.__buildCache(s,h)&&t===x.SVG){var M="";if(E)A.xa.forEach((function(t,e){var r=A.xb[e],i=A.ya[e],a=A.yb[e],n=A.controlA[e],o=A.controlB[e],s=A.start[e],l=A.end[e],h=RE(n,o);if(0!==s||1!==l){var _=c(kE(t,i,r,i,n,o,h,s,l,A.len),6);t=_[0],i=_[1],r=_[2],i=_[3],n=_[4],o=_[5]}M+=Fe.svgLine(t,i,r,a,n,o,h)}));else{var w=RE(A.controlA,A.controlB),T=A.xa,S=A.ya,R=A.xb,k=A.yb,C=A.controlA,F=A.controlB,I=A.start,O=A.end;if(0!==I||1!==O){var L=c(kE(T,S,R,k,C,F,w,I,O,A.len),6);T=L[0],S=L[1],R=L[2],k=L[3],C=L[4],F=L[5]}M=Fe.svgLine(T,S,R,k,C,F,w)}A.d=M}return t===x.CANVAS?_.forEach((function(e,i){var a=u[i],o=a>0&&"radial"===e.k&&Array.isArray(e.v);if(a>0&&"none"!==e){if(n.__preSetCanvas(t,r,{stroke:e,strokeWidth:a,strokeDasharray:v[i],strokeLinecap:d[i],strokeLinejoin:p[i],strokeMiterlimit:g[i]}),o&&(r.strokeStyle=e.v[0]),r.beginPath(),E)A.xa.forEach((function(t,e){var i=A.xb[e],a=A.ya[e],n=A.yb[e],o=A.controlA[e],s=A.controlB[e],l=A.start[e],h=A.end[e],_=RE(o,s);if(0!==l||1!==h){var u=c(kE(t,a,i,a,o,s,_,l,h,A.len),6);t=u[0],a=u[1],i=u[2],a=u[3],o=u[4],s=u[5]}Fe.canvasLine(r,t,a,i,n,o,s,_,m,b)}));else{var s=RE(A.controlA,A.controlB),l=A.xa,h=A.ya,_=A.xb,f=A.yb,y=A.controlA,x=A.controlB,M=A.start,w=A.end;if(0!==M||1!==w){var T=c(kE(l,h,_,f,y,x,s,M,w,A.len),6);l=T[0],h=T[1],_=T[2],f=T[3],y=T[4],x=T[5]}Fe.canvasLine(r,l,h,_,f,y,x,s,m,b)}r.stroke(),r.closePath()}})):t===x.SVG&&_.forEach((function(t,e){var r=u[e],i=r>0&&"radial"===t.k&&Array.isArray(t.v),a=[["d",A.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];n.__propsStrokeStyle(a,y[e],d[e],p[e],g[e]),n.addGeom("path",a)})),o}},{key:"xa",get:function(){return this.getProps("xa")}},{key:"ya",get:function(){return this.getProps("ya")}},{key:"xb",get:function(){return this.getProps("xb")}},{key:"yb",get:function(){return this.getProps("yb")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,n=this.computedStyle[ME];this.__buildCache(i,a);var o=r.xa,s=r.ya,h=r.xb,_=r.yb,u=r.controlA,c=r.controlB,v=f(l(e.prototype),"bbox",this),y=0;return n.forEach((function(t){y=Math.max(y,t)})),y=Math.ceil(.5*y)+1,t||(o=[o],h=[h],s=[s],_=[_],u=[u],c=[c]),o.forEach((function(t,e){var r=s[e],i=h[e],a=_[e],n=u[e],o=c[e];if((wE(n)||n.length<2)&&(wE(o)||o.length<2))v[0]=Math.min(v[0],t-y),v[0]=Math.min(v[0],i-y),v[1]=Math.min(v[1],r-y),v[1]=Math.min(v[1],a-y),v[2]=Math.max(v[2],t+y),v[2]=Math.max(v[2],i+y),v[3]=Math.max(v[3],r+y),v[3]=Math.max(v[3],a+y);else if(wE(n)||n.length<2){var l=EE.bboxBezier(t,r,o[0],o[1],i,a);v[0]=Math.min(v[0],l[0]-y),v[0]=Math.min(v[0],l[2]-y),v[1]=Math.min(v[1],l[1]-y),v[1]=Math.min(v[1],l[3]-y),v[2]=Math.max(v[2],l[0]+y),v[2]=Math.max(v[2],l[2]+y),v[3]=Math.max(v[3],l[1]+y),v[3]=Math.max(v[3],l[3]+y)}else if(wE(o)||o.length<2){var f=EE.bboxBezier(t,r,n[0],n[1],i,a);v[0]=Math.min(v[0],f[0]-y),v[0]=Math.min(v[0],f[2]-y),v[1]=Math.min(v[1],f[1]-y),v[1]=Math.min(v[1],f[3]-y),v[2]=Math.max(v[2],f[0]+y),v[2]=Math.max(v[2],f[2]+y),v[3]=Math.max(v[3],f[1]+y),v[3]=Math.max(v[3],f[3]+y)}else{var d=EE.bboxBezier(t,r,n[0],n[1],o[0],o[1],i,a);v[0]=Math.min(v[0],d[0]-y),v[0]=Math.min(v[0],d[2]-y),v[1]=Math.min(v[1],d[1]-y),v[1]=Math.min(v[1],d[3]-y),v[2]=Math.max(v[2],d[0]+y),v[2]=Math.max(v[2],d[2]+y),v[3]=Math.max(v[3],d[1]+y),v[3]=Math.max(v[3],d[3]+y)}})),v}}]),e}(tp),FE=function(){function t(t,e){if(Array.isArray(t)){var r=c(t,2);t=r[0],e=r[1]}this.x=t,this.y=e}return n(t,[{key:"toString",value:function(){return this.x+","+this.y}},{key:"equal",value:function(t){return this===t||this.x===t.x&&this.y===t.y}}],[{key:"compare",value:function(t,e){return t.x>e.x||t.x===e.x&&t.y>e.y}}]),t}(),IE=function(){function t(t,e){this.coords=t,this.belong=e,this.calBbox(),this.myFill=[!1,!1],this.otherFill=[!1,!1],this.myCoincide=0,this.otherCoincide=0,this.isVisited=!1,this.isDeleted=!1}return n(t,[{key:"calBbox",value:function(){var t=this.coords;if(2===t.length){var e=t[0],r=t[1],i=Math.min(e.x,r.x),a=Math.min(e.y,r.y),n=Math.max(e.x,r.x),o=Math.max(e.y,r.y);this.bbox=[i,a,n,o]}else{var s=t.map((function(t){return[t.x,t.y]}));this.bbox=EE.bboxBezier(s)}}},{key:"reverse",value:function(){this.coords.reverse()}},{key:"equal",value:function(t){var e=this.coords,r=t.coords;if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++)if(!e[i].equal(r[i]))return!1;return!0}},{key:"toHash",value:function(){return this.coords.map((function(t){return t.toString()})).join(" ")}},{key:"toString",value:function(){return this.toHash()+" "+this.belong+" "+this.myCoincide+this.otherCoincide+" "+this.myFill.map((function(t){return t?1:0})).join("")+this.otherFill.map((function(t){return t?1:0})).join("")}}]),t}(),OE=1e-9,LE=1-1e-9;var BE=function(t,e,r,i,a,n,o,s,l){var h=((o-a)*(e-n)-(s-n)*(t-a))/l,_=((r-t)*(e-n)-(i-e)*(t-a))/l;if(h>OE&&h<LE&&_>OE&&_<LE)return[{point:new FE(t+h*(r-t),e+h*(i-e)),toSource:h,toClip:_}]},DE=function(t,e,r,i,a,n,o,s,l,h){var _=Vm.intersectBezier2Line(t,e,r,i,a,n,o,s,l,h);if(_.length&&(_=_.map((function(_){var u;if(u=Math.abs(l-o)>=Math.abs(h-s)?Math.abs((_.x-o)/(l-o)):Math.abs((_.y-s)/(h-s)),_.t>OE&&_.t<LE&&u>OE&&u<LE){var f=EE.bezierSlope([[t,e],[r,i],[a,n]],_.t),c=EE.bezierSlope([[o,s],[l,h]]);if(Math.abs(Math.abs(f)-Math.abs(c)||0)<OE)return;return{point:new FE(_.x,_.y),toSource:_.t,toClip:u}}})).filter((function(t){return t}))).length)return _},PE=function(t,e,r,i,a,n,o,s,l,h,_,u){var f=Vm.intersectBezier2Bezier2(t,e,r,i,a,n,o,s,l,h,_,u);if(f.length&&(f=f.map((function(f){var c=EE.getPointT([[o,s],[l,h],[_,u]],f.x,f.y);if(c.length&&(c=c[0],f.t>OE&&f.t<LE&&c>OE&&c<LE)){var v=EE.bezierSlope([[t,e],[r,i],[a,n]],f.t),y=EE.bezierSlope([[o,s],[l,h],[_,u]],c);if(Math.abs(Math.abs(v)-Math.abs(y)||0)<OE)return;return{point:new FE(f.x,f.y),toSource:f.t,toClip:c}}})).filter((function(t){return t}))).length)return f},NE=function(t,e,r,i,a,n,o,s,l,h,_,u,f,c){var v=Vm.intersectBezier2Bezier3(t,e,r,i,a,n,o,s,l,h,_,u,f,c);if(v.length&&(v=v.map((function(v){var y=EE.getPointT([[o,s],[l,h],[_,u],[f,c]],v.x,v.y);if(y.length&&(y=y[0],v.t>OE&&v.t<LE&&y>OE&&y<LE)){var d=EE.bezierSlope([[t,e],[r,i],[a,n]],v.t),p=EE.bezierSlope([[o,s],[l,h],[_,u],[f,c]],y);if(Math.abs(Math.abs(d)-Math.abs(p)||0)<OE)return;return{point:new FE(v.x,v.y),toSource:v.t,toClip:y}}})).filter((function(t){return t}))).length)return v},zE=function(t,e,r,i,a,n,o,s,l,h,_,u){var f=Vm.intersectBezier3Line(t,e,r,i,a,n,o,s,l,h,_,u);if(f.length&&(f=f.map((function(f){var c;if(c=Math.abs(_-l)>=Math.abs(u-h)?Math.abs((f.x-l)/(_-l)):Math.abs((f.y-h)/(u-h)),f.t>OE&&f.t<LE&&c>OE&&c<LE){var v=EE.bezierSlope([[t,e],[r,i],[a,n],[o,s]],f.t),y=EE.bezierSlope([[l,h],[_,u]]);if(Math.abs(Math.abs(v)-Math.abs(y)||0)<OE)return;return{point:new FE(f.x,f.y),toSource:f.t,toClip:c}}})).filter((function(t){return t}))).length)return f},HE=function(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y){var d=Vm.intersectBezier3Bezier3(t,e,r,i,a,n,o,s,l,h,_,u,f,c,v,y);if(d.length&&(d=d.map((function(d){var p=EE.getPointT([[l,h],[_,u],[f,c],[v,y]],d.x,d.y);if(p.length&&(p=p[0],d.t>OE&&d.t<LE&&p>OE&&p<LE)){var x=EE.bezierSlope([[t,e],[r,i],[a,n],[o,s]],d.t),g=EE.bezierSlope([[l,h],[_,u],[f,c],[v,y]],p);if(Math.abs(Math.abs(x)-Math.abs(g)||0)<OE)return;return{point:new FE(d.x,d.y),toSource:d.t,toClip:p}}})).filter((function(t){return t}))).length)return d},GE=function(t,e){return t.sort((function(t,r){return e?t.toSource-r.toSource:t.toClip-r.toClip})).map((function(t){return{point:t.point,t:e?t.toSource:t.toClip}})).filter((function(t){return t.t>OE&&t.t<LE}))},WE=function(){function t(t,e){this.index=e;var r=[];Array.isArray(t)&&(t.forEach((function(t){if(Array.isArray(t)&&!(t.length<2)&&!(2===t.length&&t[1].length<=2)){for(var i=new FE(t[0]),a=i,n=1,o=t.length;n<o;n++){var s=t[n],l=s.length,h=new FE(s[l-2],s[l-1]),_=void 0;if(2===l){if(i.equal(h))continue;var u=FE.compare(i,h)?[h,i]:[i,h];_=new IE(u,e)}else if(4===l){if(i.equal(h)&&i.x===s[0]&&i.y===s[1])continue;var f=new FE(s[0],s[1]),c=$E([i,f,h],!0);if(c){var v=[[i.x,i.y],[s[0],s[1]],[h.x,h.y]],y=EE.sliceBezier(v,c[0]),d=EE.sliceBezier2Both(v,c[0],1),p=new FE(y[1]),x=new FE(y[2]),g=new FE(d[1]),m=FE.compare(i,x)?[x,p,i]:[i,p,x];r.push(new IE(m,e)),m=FE.compare(x,h)?[h,g,x]:[x,g,h],_=new IE(m,e)}else{var b=FE.compare(i,h)?[h,f,i]:[i,f,h];_=new IE(b,e)}}else if(6===l){if(s[0]===s[2]&&s[1]===s[3]){s.splice(2,2),n--;continue}if(i.equal(h)&&i.x===s[0]&&i.y===s[1]&&i.x===s[2]&&i.y===s[3])continue;var A=new FE(s[0],s[1]),E=new FE(s[2],s[3]),M=$E([i,A,E,h],!0);if(M)!function(){var t=[[i.x,i.y],[s[0],s[1]],[s[2],s[3]],[h.x,h.y]],a=i,n=0;M.forEach((function(i){var o=EE.sliceBezier2Both(t,n,i),s=new FE(o[1]),l=new FE(o[2]),h=new FE(o[3]),_=FE.compare(a,h)?[h,l,s,a]:[a,s,l,h];r.push(new IE(_,e)),n=i,a=h}));var o=EE.sliceBezier2Both(t,n,1),l=new FE(o[1]),u=new FE(o[2]),f=FE.compare(a,h)?[h,u,l,a]:[a,l,u,h];_=new IE(f,e)}();else{var w=FE.compare(i,h)?[h,E,A,i]:[i,A,E,h];_=new IE(w,e)}}r.push(_),i=h}if(!i.equal(a)){var T=FE.compare(i,a)?[a,i]:[i,a];r.push(new IE(T,e))}}})),this.segments=r)}return n(t,[{key:"selfIntersect",value:function(){var t=VE(this.segments);this.segments=YE(t,!1,!1,!1)}},{key:"toString",value:function(){return this.segments.map((function(t){return t.toString()}))}},{key:"reset",value:function(t){return this.index=t,this.segments.forEach((function(e){e.belong=t,e.otherCoincide=0,e.otherFill[0]=e.otherFill[1]=!1})),this}}],[{key:"intersect2",value:function(t,e,r,i){if(t.segments.length&&e.segments.length){var a=YE(VE(t.segments.concat(e.segments)),!0,r,i);t.segments=a.filter((function(t){return 0===t.belong})),e.segments=a.filter((function(t){return 1===t.belong}))}}},{key:"annotate2",value:function(t,e,r,i){var a=function(t){var e={};t.forEach((function(t){var r=t.coords,i=r.length,a=r[0],n=r[i-1];jE(e,a.x,a.y,t,!0),jE(e,n.x,n.y,t,!1)}));var r=[];Object.keys(e).forEach((function(t){var i=e[t],a=[];Object.keys(i).forEach((function(t){var e=i[t].sort((function(t,e){return t.isStart!==e.isStart?t.isStart?1:-1:t.isStart?qE(t.seg,e.seg)?1:-1:void 0}));a.push({y:parseFloat(t),arr:e})})),r.push({x:parseFloat(t),arr:a.sort((function(t,e){return t.y-e.y}))})})),r.sort((function(t,e){return t.x-e.x}));var i=[];return r.forEach((function(t){t.arr.forEach((function(t){i=i.concat(t.arr)}))})),i}(t.segments.concat(e.segments)),n=[],o=[],s={},l={};a.forEach((function(t){var e=t.isStart,a=t.seg,h=a.belong;if(!(0===h&&r||1===h&&i)){var _=0===h?n:o,u=0===h?s:l;if(e){if(a.myCoincide){var f=a.toHash();if(u.hasOwnProperty(f))return;u[f]=!0}if(_.length){var c=_.length,v=_[c-1];if(qE(a,v))a.myFill[1]=v.myFill[0],a.myCoincide?a.myFill[0]=a.myCoincide%2==0?!a.myFill[1]:a.myFill[1]:a.myFill[0]=!a.myFill[1],_.push(a);else if(1===c)a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,_.unshift(a);else for(var y=c-2;y>=0;y--){var d=_[y];if(qE(a,d)){a.myFill[1]=d.myFill[0],a.myCoincide?a.myFill[0]=a.myCoincide%2==0?!a.myFill[1]:a.myFill[1]:a.myFill[0]=!a.myFill[1],_.splice(y+1,0,a);break}0===y&&(a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,_.unshift(a))}}else a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,_.push(a)}else{var p=_.indexOf(a);p>-1&&_.splice(p,1)}}}));var h=[],_={};a.forEach((function(t){var e=t.isStart,r=t.seg,i=r.belong;if(e){if(r.myCoincide||r.otherCoincide){var a=r.toHash();if(_.hasOwnProperty(a))return;_[a]=!0}var n=!1;if(h.length){var o=h.length,s=h[o-1];if(qE(r,s))n=s.belong===i?s.otherFill[0]:s.myFill[0],h.push(r);else if(1===o)h.unshift(r);else for(var l=o-2;l>=0;l--){var u=h[l];if(qE(r,u)){n=u.belong===i?u.otherFill[0]:u.myFill[0],h.splice(l+1,0,r);break}0===l&&h.unshift(r)}}else n=!1,h.push(r);r.otherCoincide||(r.otherFill[0]=n,r.otherFill[1]=n)}else{var f=h.indexOf(r);f>-1&&h.splice(f,1)}}))}}]),t}();function YE(t,e,r,i){for(var a=[],n=[],o=[];t.length;){n.length&&n.splice(0).forEach((function(t){var e=a.indexOf(t);a.splice(e,1),t.isDeleted||o.push(t)}));for(var s=t[0],l=s.x,h=s.arr;h.length;){var _=h.shift();if(!_.isDeleted){var u=_.belong,f=_.bbox;if(_.isVisited){if(f[0]!==f[2]||2!==_.coords.length){var c=a.indexOf(_);a.splice(c,1),_.isDeleted||o.push(_)}else n.push(_);_.isVisited=!1}else{if(a.length)for(var v=_.coords,y=v.length,d=v[0],p=d.x,x=d.y,g=v[1],m=g.x,b=g.y,A=0;A<a.length;A++){var E=a[A];if(!E.isDeleted&&!_.isDeleted&&(!e||E.belong!==u)){var M=E.bbox,w=E.coords,T=w.length,S=!1;if(QE(f,M,y,T)){if(y===T&&_.equal(E)){e?(_.otherCoincide++,E.otherCoincide++,_.otherFill=E.myFill,E.otherFill=_.myFill):(_.myCoincide++,E.myCoincide++,_.myFill=E.myFill);continue}var R=w[0],k=R.x,C=R.y,F=w[1],I=F.x,O=F.y,L=void 0,B=void 0;if(2===y)if(2===T){var D=(O-C)*(m-p)-(I-k)*(b-x);if(0===D)if(p===m)p===k&&m===I&&(B=tM(p,x,m,b,_,k,C,I,O,E,!0));else(b-x)*p/(m-p)+x===(O-C)*k/(I-k)+C&&(B=tM(p,x,m,b,_,k,C,I,O,E,!1));else L=BE(p,x,m,b,k,C,I,O,D)}else{var P=w[2],N=P.x,z=P.y;if(3===T)L=DE(k,C,I,O,N,z,p,x,m,b),S=!0;else{var H=w[3],G=H.x,W=H.y;L=zE(k,C,I,O,N,z,G,W,p,x,m,b),S=!0}}else{var Y=v[2],U=Y.x,X=Y.y;if(3===y)if(2===T)L=DE(p,x,m,b,U,X,k,C,I,O);else{var V=w[2],K=V.x,j=V.y;if(3===T)(L=PE(p,x,m,b,U,X,k,C,I,O,K,j))||(B=eM(_,E));else{var Z=w[3],q=Z.x,$=Z.y;L=NE(p,x,m,b,U,X,k,C,I,O,K,j,q,$)}}else{var J=v[3],Q=J.x,tt=J.y;if(2===T)L=zE(p,x,m,b,U,X,Q,tt,k,C,I,O);else{var et=w[2],rt=et.x,it=et.y;if(3===T)L=NE(k,C,I,O,rt,it,p,x,m,b,U,X,Q,tt),S=!0;else{var at=w[3],nt=at.x,ot=at.y;(L=HE(p,x,m,b,U,X,Q,tt,k,C,I,O,rt,it,nt,ot))||(B=eM(_,E))}}}}if(B){XE(o,t,a,l,B.ra),XE(o,t,a,l,B.rb),_.isDeleted=E.isDeleted=!0,a.splice(A,1);break}if(L&&L.length){var st=UE(_,GE(L,!S),r&&0===u),lt=UE(E,GE(L,S),i&&1===u);XE(o,t,a,l,st),XE(o,t,a,l,lt),lt.length&&a.splice(A,1);break}}}}_.isDeleted||(a.push(_),_.isVisited=!0)}}}t.shift()}return n.forEach((function(t){t.isDeleted||o.push(t)})),o.filter((function(t){return!t.isDeleted}))}function UE(t,e,r){var i=[];if(!e.length)return i;var a,n=t.belong,o=t.coords,s=o.length,l=o[0],h=0;if(e.forEach((function(e){var a,_=e.point,u=e.t;if(2===s)a=new IE([l,_],n);else if(3===s){var f=EE.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,u);a=new IE([l,new FE(f[1][0],f[1][1]),_],n)}else if(4===s){var c=EE.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,u);a=new IE([l,new FE(c[1][0],c[1][1]),new FE(c[2][0],c[2][1]),_],n)}r&&(a.myFill[0]=t.myFill[0],a.myFill[1]=t.myFill[1]),l=_,i.push(a),h=u})),2===s)a=new IE([l,o[1]],n);else if(3===s){var _=EE.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,1);a=new IE([l,new FE(_[1][0],_[1][1]),o[2]],n)}else if(4===s){var u=EE.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,1);a=new IE([l,new FE(u[1][0],u[1][1]),new FE(u[2][0],u[2][1]),o[3]],n)}return r&&(a.myFill[0]=t.myFill[0],a.myFill[1]=t.myFill[1]),i.push(a),t.isDeleted=!0,i}function XE(t,e,r,i,a){a.forEach((function(a){var n=a.bbox,o=n[0],s=n[2];if(s<=i&&o!==s&&2!==a.coords.length)t.push(a);else{var l=0;if(o<i)a.isVisited=!0,r.push(a);else for(var h=e.length;l<h;l++){var _=e[l],u=_.x;if(o===u){_.arr.push(a);break}if(o<u){var f={x:o,arr:[a]};e.splice(l,0,f);break}}for(var c=e.length;l<c;l++){var v=e[l],y=v.x;if(s===y){v.arr.unshift(a);break}if(s<y){var d={x:s,arr:[a]};e.splice(l,0,d);break}}}}))}function VE(t){var e={};t.forEach((function(t){var r=t.bbox,i=r[0],a=r[2];KE(e,i,t),KE(e,a,t)}));var r=[];return Object.keys(e).forEach((function(t){return r.push({x:parseFloat(t),arr:e[t]})})),r.sort((function(t,e){return t.x-e.x}))}function KE(t,e,r){var i=t[e]=t[e]||[];r.isVisited?(i.unshift(r),r.isVisited=!1):(i.push(r),r.isVisited=!0)}function jE(t,e,r,i,a){var n=t[e]=t[e]||{};(n[r]=n[r]||[]).push({isStart:a,seg:i})}function ZE(t,e,r){var i=t.x,a=t.y,n=e.x,o=e.y,s=r.x,l=r.y;return ae.crossProduct(n-i,o-a,s-i,l-a)>=0}function qE(t,e){var r=t.coords,i=e.coords,a=r.length,n=i.length,o=r[0],s=i[0];if(2===a&&2===n){var l=r[1],h=i[1];return o.equal(s)?ZE(l,s,h):ZE(o,s,h)}if(2===a&&o.x===r[1].x)return s.x>=o.x;var _=Math.max(o.x,s.x),u=Math.min(r[a-1].x,i[n-1].x),f=_+.5*(u-_);if(o!==s){var c=JE(r,_),v=JE(i,_);if(c!==v)return c>v}if(r[a-1]!==i[n-1]){var y=JE(r,u),d=JE(i,u);if(y!==d)return y>d}var p=JE(r,f),x=JE(i,f);return p!==x?p>x:void 0}function $E(t,e){if(3===t.length){var r=e?(t[0].x-t[1].x)/(t[0].x-2*t[1].x+t[2].x):(t[0].y-t[1].y)/(t[0].y-2*t[1].y+t[2].y);if(r>0&&r<1)return[r]}else if(4===t.length){var i=Cm.getRoots([e?3*(t[1].x-t[0].x):3*(t[1].y-t[0].y),e?6*(t[2].x+t[0].x-2*t[1].x):6*(t[2].y+t[0].y-2*t[1].y),e?3*(t[3].x+3*t[1].x-t[0].x-3*t[2].x):3*(t[3].y+3*t[1].y-t[0].y-3*t[2].y)]).filter((function(t){return t>0&&t<1}));if(i.length)return i.sort((function(t,e){return t-e}))}}function JE(t,e){var r=t.length;if(e===t[0].x)return t[0].y;if(e===t[r-1].x)return t[r-1].y;if(2===r){if(t[0].y===t[1].y)return t[0].y;var i=(e-t[0].x)/(t[1].x-t[0].x);return t[0].y+i*(t[1].y-t[0].y)}if(3===r){var a=Cm.getRoots([t[0].x-e,2*(t[1].x-t[0].x),t[2].x+t[0].x-2*t[1].x]).filter((function(t){return t>=0&&t<=1})),n=t.map((function(t){return[t.x,t.y]}));return EE.pointAtByT(n,a[0])[1]}if(4===r){var o=Cm.getRoots([t[0].x-e,3*(t[1].x-t[0].x),3*(t[2].x+t[0].x-2*t[1].x),t[3].x+3*t[1].x-t[0].x-3*t[2].x]).filter((function(t){return t>=0&&t<=1})),s=t.map((function(t){return[t.x,t.y]}));return EE.pointAtByT(s,o[0])[1]}}function QE(t,e,r,i){if(2===r&&2===i){if(t[0]===t[2]&&e[0]===e[2]&&t[0]===t[2])return!(t[1]>=e[3]||e[1]>=t[3]);if(t[1]===t[3]&&e[1]===e[3]&&t[1]==t[1])return!(t[0]>=e[2]||e[0]>=t[2])}return Se.isRectsOverlap(t,e)}function tM(t,e,r,i,a,n,o,s,l,h,_){var u=[],f=[],c=a.coords,v=h.coords;return t<n&&!_||e<o&&_?(u.push(new IE([c[0],v[0]],a.belong)),r<s&&!_||i<l&&_?(u.push(new IE([v[0],c[1]],a.belong)),f.push(new IE([v[0],c[1]],h.belong)),f.push(new IE([c[1],v[1]],h.belong))):r===s&&!_||i===l&&_?(u.push(new IE([v[0],v[1]],a.belong)),f.push(new IE([v[0],v[1]],h.belong))):(u.push(new IE([v[0],v[1]],a.belong)),f.push(new IE([v[0],v[1]],h.belong)),u.push(new IE([v[1],c[1]],a.belong)))):t===n&&!_||e===o&&_?r<s&&!_||i<l&&_?(u.push(new IE([c[0],c[1]],a.belong)),f.push(new IE([c[0],c[1]],h.belong)),f.push(new IE([c[1],v[1]],h.belong))):(u.push(new IE([v[0],v[1]],a.belong)),u.push(new IE([v[1],c[1]],a.belong)),f.push(new IE([v[0],v[1]],h.belong))):(f.push(new IE([v[0],c[0]],h.belong)),r<s&&!_||i<l&&_?(u.push(new IE([c[0],c[1]],a.belong)),f.push(new IE([c[0],c[1]],h.belong)),f.push(new IE([c[1],v[1]],h.belong))):r===s&&!_||i===l&&_?(u.push(new IE([c[0],c[1]],a.belong)),f.push(new IE([c[0],c[1]],h.belong))):(u.push(new IE([c[0],v[1]],a.belong)),f.push(new IE([c[0],v[1]],h.belong)),u.push(new IE([v[1],c[1]],a.belong)))),{ra:u,rb:f}}function eM(t,e){var r=t.coords.map((function(t){return[t.x,t.y]})),i=r.length,a=e.coords.map((function(t){return[t.x,t.y]})),n=a.length,o=r[0],s=a[0],l=r[i-1],h=a[n-1],_=EE.getPointT(r,s[0],s[1]),u=EE.getPointT(r,h[0],h[1]),f=EE.getPointT(a,o[0],o[1]),c=EE.getPointT(a,l[0],l[1]),v=_.length,y=u.length,d=f.length,p=c.length;if(1===v&&1===y&&0===d&&0===p||0===v&&0===y&&1===d&&1===p||(1===v&&1===y&&d+p===1||v+y===1&&1===d&&1===p)||v+y===1&&d+p===1){var x=v?_[0]:0,g=y?u[0]:1,m=EE.sliceBezier2Both(r,x,g),b=d?f[0]:0,A=p?c[0]:1;if(function(t,e){for(var r=0,i=t.length;r<i;r++){var a=t[r],n=e[r];if(Math.abs(a[0]-n[0])>1e-9||Math.abs(a[1]-n[1])>1e-9)return!1}return!0}(m,EE.sliceBezier2Both(a,b,A))){var E=m.map((function(t){return new FE(t)})),M=[],w=[];if(x>0){var T=EE.sliceBezier2Both(r,0,x),S=[t.coords[0],new FE(T[1]),e.coords[0]];4===i&&S.splice(2,0,new FE(T[2])),M.push(new IE(S,t.belong))}if(M.push(new IE(E,t.belong)),g<1){var R=EE.sliceBezier2Both(r,g,1),k=[e.coords[n-1],new FE(R[1]),t.coords[i-1]];4===i&&k.splice(2,0,new FE(R[2])),M.push(new IE(k,t.belong))}if(b>0){var C=EE.sliceBezier2Both(a,0,b),F=[e.coords[0],new FE(C[1]),t.coords[0]];4===n&&F.splice(2,0,new FE(C[2])),w.push(new IE(F,e.belong))}if(w.push(new IE(E,e.belong)),A<1){var I=EE.sliceBezier2Both(a,A,1),O=[t.coords[i-1],new FE(I[1]),e.coords[n-1]];4===n&&O.splice(2,0,new FE(I[2])),w.push(new IE(O,e.belong))}return{ra:M,rb:w}}}}function rM(t,e,r,i,a,n){for(var o=0,s=e.length;o<s;o++){var l=e[o];if(l!==r){var h=l.length,_=l[0],u=l[h-1],f=_.coords[0],c=u.coords,v=c[c.length-1];if(a.equal(f))return n?(l=aM(r).concat(l),e[o]=l,e.splice(i,1),iM(t,e,l,o)):(l=r.concat(l),e[o]=l,e.splice(i,1),iM(t,e,l,o));if(a.equal(v))return n?(l=l.concat(r),e[o]=l,e.splice(i,1),iM(t,e,l,o)):(l=l.concat(aM(r)),e[o]=l,e.splice(i,1),iM(t,e,l,o))}}iM(t,e,r,i)}function iM(t,e,r,i){var a=r.length,n=r[0],o=r[a-1],s=n.coords[0],l=o.coords,h=l[l.length-1];s.equal(h)&&(e.splice(i,1),t.push(r))}function aM(t){return t.forEach((function(t){return t.reverse()})),t.reverse()}function nM(t){var e=[],r=[];t.sort((function(t,e){return e.otherFill[0]&&e.otherFill[1]?1:-1}));t:for(;t.length;){for(var i=t.shift(),a=i.coords,n=a.length,o=a[0],s=a[n-1],l=void 0,h=0,_=e.length;h<_;h++){var u=e[h],f=u.length,c=u[0],v=u[f-1],y=c.coords[0],d=v.coords,p=d[d.length-1];if(o.equal(p)){if(i.belong!==v.belong){u.push(i),rM(r,e,u,h,s,!1);continue t}l||(l={i:h,t:0})}else if(o.equal(y)){if(i.belong!==v.belong){i.reverse(),u.unshift(i),rM(r,e,u,h,s,!0);continue t}l||(l={i:h,t:1})}else if(s.equal(p)){if(i.belong!==v.belong){i.reverse(),u.push(i),rM(r,e,u,h,o,!1);continue t}l||(l={i:h,t:2})}else if(s.equal(y)){if(i.belong!==v.belong){u.unshift(i),rM(r,e,u,h,o,!0);continue t}l||(l={i:h,t:3})}}l?0===l.t?(e[l.i].push(i),rM(r,e,e[l.i],l.i,s,!1)):1===l.t?(i.reverse(),e[l.i].unshift(i),rM(r,e,e[l.i],l.i,s,!0)):2===l.t?(i.reverse(),e[l.i].push(i),rM(r,e,e[l.i],l.i,o,!1)):3===l.t&&(e[l.i].unshift(i),rM(r,e,e[l.i],l.i,o,!0)):e.push([i])}var x=r.map((function(t){var e,r,i,a,n,o,s=!0,l=0;t.forEach((function(t,s){var h=t.coords,_=h.length,u=t.bbox;s?(i=Math.min(i,u[0]),a=Math.min(a,u[1]),n=Math.max(n,u[2]),o=Math.max(o,u[3])):(i=u[0],a=u[1],n=u[2],o=u[3]),2===_?(l+=s?e*h[1].y-r*h[1].x:h[0].x*h[1].y-h[0].y*h[1].x,e=h[1].x,r=h[1].y):3===_?(l+=s?e*h[2].y-r*h[2].x:h[0].x*h[1].y-h[0].y*h[2].x,e=h[2].x,r=h[2].y):4===_&&(l+=s?e*h[3].y-r*h[3].x:h[0].x*h[3].y-h[0].y*h[3].x,e=h[3].x,r=h[3].y)}));var h=t[0].coords;return(l+=e*h[0].y-r*h[0].x)<0&&(s=!1),{list:t,clockwise:s,bbox:[i,a,n,o],area:(n-i)*(o-a)}}));return x.forEach((function(t){if(!t.checked){for(var e=t.bbox,r=[t],i=0,a=x.length;i<a;i++){var n=x[i];n!==t&&(Se.isRectsInside(e,n.bbox,!0)||Se.isRectsInside(n.bbox,e,!0))&&r.push(n)}if(r.length>1){r.sort((function(t,e){return t.area-e.area}));for(var o=1,s=r.length;o<s;o++){var l=r[o];if(l.checked){for(var h=l.clockwise,_=o-1;_>=0;_--){var u=r[_];u.checked=!0,u.clockwise===h&&(aM(u.list),u.clockwise=!h),h=!h}h=l.clockwise;for(var f=o+1;f<s;f++){var c=r[f];c.checked=!0,c.clockwise===h&&(aM(c.list),c.clockwise=!h),h=!h}return}}var v=r[0].clockwise;r[0].checked=!0;for(var y=1,d=r.length;y<d;y++){var p=r[y];p.checked=!0,p.clockwise===v&&(aM(p.list),p.clockwise=!v),v=!v}}}})),x.map((function(t){var e=t.list.map((function(t){var e=t.coords,r=e.length;return 2===r?[e[1].x,e[1].y]:3===r?[e[1].x,e[1].y,e[2].x,e[2].y]:4===r?[e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]:void 0})),r=t.list[0].coords;return e.unshift([r[0].x,r[0].y]),e}))}function oM(t){return t&&Array.isArray(t)&&Array.isArray(t[0])?Array.isArray(t[0][0])?t:[t]:[]}function sM(t,e){var r,i,a=t instanceof WE,n=e instanceof WE;return a?r=t.reset(0):(r=new WE(oM(t),0)).selfIntersect(),n?i=e.reset(1):(i=new WE(oM(e),1)).selfIntersect(),WE.intersect2(r,i,a,n),WE.annotate2(r,i,a,n),[r,i]}var lM=[0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,0],hM=[0,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0],_M=[0,0,1,0,0,0,1,0,1,1,0,1,0,0,1,0],uM=[0,1,0,0,1,0,1,1,0,1,0,0,0,1,0,0],fM=[0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0];function cM(t,e){var r=[],i={};return t.forEach((function(t){var a,n=t.belong,o=t.myFill,s=t.otherFill;if(t.otherCoincide){var l=t.toHash();if(i.hasOwnProperty(l))return;i[l]=!0}a=n?(s[0]?8:0)+(o[0]?4:0)+(s[1]?2:0)+(o[1]?1:0):(o[0]?8:0)+(s[0]?4:0)+(o[1]?2:0)+(s[1]?1:0),e[a]&&r.push(t)})),r}var vM={intersect:function(t,e,r){var i=c(sM(t,e),2),a=i[0],n=i[1],o=cM(a.segments.concat(n.segments),lM);return r?(a.segments=o,a):nM(o)},union:function(t,e,r){var i=c(sM(t,e),2),a=i[0],n=i[1],o=cM(a.segments.concat(n.segments),hM);return r?(a.segments=o,a):nM(o)},subtract:function(t,e,r){var i=c(sM(t,e),2),a=i[0],n=i[1],o=cM(a.segments.concat(n.segments),_M);return r?(a.segments=o,a):nM(o)},subtractRev:function(t,e,r){var i=c(sM(t,e),2),a=i[0],n=i[1],o=cM(a.segments.concat(n.segments),uM);return r?(a.segments=o,a):nM(o)},xor:function(t,e,r){var i=c(sM(t,e),2),a=i[0],n=i[1],o=cM(a.segments.concat(n.segments),fM);return r?(a.segments=o,a):nM(o)},chain:function(t){return t instanceof WE?nM(t.segments):oM(t)}},yM=vM.intersect,dM=vM.union,pM=vM.subtract,xM=vM.subtract2,gM=vM.xor,mM=vM.chain,bM=fe.STYLE_KEY.STROKE_WIDTH,AM=Y.isNil,EM=function(t){function e(e,r){var i;if((i=t.call(this,e,r)||this).isMulti){if(i.__points=[[]],i.__controls=[[]],i.__start=[0],i.__end=[1],Array.isArray(r.start)){i.__start=r.start.map((function(t){return parseFloat(t)||0}));for(var a=i.__start.length;a<i.__points.length;a++)i.__start.push(0)}else if(!AM(r.start)){var n=parseFloat(r.start)||0;i.__start=i.__points.map((function(){return n}))}if(Array.isArray(r.end)){i.__end=r.end.map((function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),e}));for(var o=i.__end.length;o<i.__points.length;o++)i.__end.push(1)}else if(!AM(r.end)){var s=parseFloat(r.end);isNaN(s)&&(s=1),i.__end=i.__points.map((function(){return s}))}}else if(i.__points=[],i.__controls=[],i.__start=0,i.__end=1,AM(r.start)||(i.__start=parseFloat(r.start)||0),!AM(r.end)){var l=parseFloat(r.end);isNaN(l)&&(l=1),i.__end=l}return Array.isArray(r.controls)&&(i.__controls=r.controls),Array.isArray(r.points)&&(i.__points=r.points),r.booleanOperations&&(i.__booleanOperations=r.booleanOperations),i}return s(e,t),n(e,[{key:"calContent",value:function(t,r){var i=f(l(e.prototype),"calContent",this).call(this,t,r);if(i&&!this.__hasXomContent){var a=this.currentProps.points;if(this.isMulti){for(var n=0,o=a.length;n<o;n++)if(a.length)return!0}else if(a.length)return!0}return i}},{key:"__getPoints",value:function(t,e,r,i,a,n){return a.map((function(a){if(Array.isArray(a)){var o=a.length;if(n){if(0!==o&&2!==o&&4!==o)return}else if(0!==o&&2!==o)return;for(var s=[],l=0;l<o;l++)l%2==0?s.push(t+a[l]*r):s.push(e+a[l]*i);return s}}))}},{key:"__reprocessing",value:function(t,e){if(!e||t.length<2)return t;var r=this.booleanOperations,i=t.length;if(!r)return t;if(!Array.isArray(r)){var a=r;r=[r];for(var n=1;n<i-1;n++)r.push(a)}if(Array.isArray(r)&&r.length){for(var o=[],s=t[0],l=1;l<i;l++){var h=(r[l-1]||"").toString().toLowerCase(),_=t[l];if(-1!==["intersect","intersection","union","subtract","subtract2","diff","difference","xor"].indexOf(h))switch(h){case"intersect":case"intersection":s=yM(s,_,!0);break;case"union":s=dM(s,_,!0);break;case"subtract":case"diff":case"difference":s=pM(s,_,!0);break;case"subtract2":s=xM(s,_,!0);break;case"xor":s=gM(s,_,!0)}else o=o.concat(mM(s)),s=_||[]}return o.concat(mM(s))}return t}},{key:"__needRebuildSE",value:function(t){if(Y.isNil(t.booleanOperations))return t.booleanOperations=!0,!0}},{key:"__buildCache",value:function(t,e){var r,i,a=this,n=this.width,o=this.height,s=this.points,l=this.controls,h=this.start,_=this.end,u=this.__cacheProps,f=this.isMulti;if(AM(u.points)&&(r=!0,u.points=f?s.map((function(r){if(Array.isArray(r))return a.__getPoints(t,e,n,o,r)})):this.__getPoints(t,e,n,o,s)),AM(u.controls)&&(r=!0,u.controls=f?l.map((function(r){return Array.isArray(r)?a.__getPoints(t,e,n,o,r,!0):r})):this.__getPoints(t,e,n,o,l,!0)),AM(u.start)&&(i=!0,u.start=h),AM(u.end)&&(i=!0,u.end=_),this.__needRebuildSE(u)&&(i=!0),r){var c=u.points,v=u.controls;f?(u.list2=c.map((function(t,e){var r=v[e];if(Array.isArray(t))return t.map((function(t,e){return e?a.__concatPointAndControl(t,r&&r[e-1]):t}))})),u.len=this.__getLength(u.list2,f)):(u.list2=c.map((function(t,e){return e?a.__concatPointAndControl(t,v[e-1]):t})),u.len=this.__getLength(u.list2,f))}return(r||i)&&(u.list=f?u.list2.map((function(t,e){if(Array.isArray(t)){var r=u.len;return a.__getNewList(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},u.start[e],u.end[e])}})):this.__getNewList(u.list2,u.len,u.start,u.end),u.list=this.__reprocessing(u.list,f)),r||i}},{key:"__getNewList",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(0===r&&1===i)return t;if(r===i)return[];if(r>i){var a=[i,r];r=a[0],i=a[1]}for(;i-r>1;)i--;for(;i<0||r<0;)i++,r++;for(;i>=1&&r>=1;)i--,r--;var n=t.length;t=Y.clone(t);var o,s=[],l=r>1?r-1:r,h=i>1?i-1:i,_=this.__getIndex(e.increase,l*e.total,0,n-1),u=this.__getIndex(e.increase,h*e.total,0,n-1),f=r<0,c=i>1,v=1;if((h*=e.total)>e.increase[u]){var y=t[u].slice(t[u].length-2),d=t[u+1],p=e.list[u],x=h-e.increase[u],g=x/p;if(v=g,2===d.length){var m=d[0]-y[0],b=d[1]-y[1];c?o=[y[0]+g*m,y[1]+g*b]:(g=1-g,o=[d[0]-g*m,d[1]-g*b])}else if(4===d.length){var A=EE.sliceBezier([y,[d[0],d[1]],[d[2],d[3]]],g);o=[A[1][0],A[1][1],A[2][0],A[2][1]]}else if(6===d.length){var E=EE.sliceBezier([y,[d[0],d[1]],[d[2],d[3]],[d[4],d[5]]],g);o=[E[1][0],E[1][1],E[2][0],E[2][1],E[3][0],E[3][1]]}}if((l*=e.total)>e.increase[_]){var M,w=t[_].slice(t[_].length-2),T=e.list[_];_!==u||f||c||1===v||(T*=v,o&&(M=o)),M||(M=t[_+1]);var S=l-e.increase[_],R=S/T;if(2===M.length){var k=M[0]-w[0],C=M[1]-w[1];f?(R=1-R,s.push([M[0]-R*k,M[1]-R*C])):s.push([w[0]+R*k,w[1]+R*C]),s.push(M)}else if(4===M.length){var F=EE.sliceBezier([[M[2],M[3]],[M[0],M[1]],w],1-R).reverse();s.push(F[0]),s.push([F[1][0],F[1][1],F[2][0],F[2][1]]),_!==u||f||c||(o=null)}else if(6===M.length){var I=EE.sliceBezier([[M[4],M[5]],[M[2],M[3]],[M[0],M[1]],w],1-R).reverse();s.push(I[0]),s.push([I[1][0],I[1][1],I[2][0],I[2][1],M[4],M[5]]),_!==u||f||c||(o=null)}}for(var O=_+2;O<=u+(f||c?n:0);O++)s.push(t[O%n]);return o&&s.push(o),s}},{key:"__getIndex",value:function(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var a=r+(i-r>>1);return t[a]===e?a:t[a]>e?this.__getIndex(t,e,r,Math.max(a-1,r)):this.__getIndex(t,e,Math.min(a+1,i),i)}},{key:"__getLength",value:function(t,e){var r=this,i=[],a=0,n=[];if(e)a=[],t.forEach((function(t){var e=r.__getLength(t);i.push(e.list),a.push(e.total),n.push([0].concat(e.increase))}));else if(Array.isArray(t)){a=0,n.push(0);for(var o=0,s=0,l=t.length;s<l;s++){var h=t[s];if(Array.isArray(h)){o=s;break}}for(var _=t[o],u=o+1,f=t.length;u<f;u++){var c=t[u];if(Array.isArray(c))if(2===c.length){var v=Math.abs(c[0]-_[0]),y=Math.abs(c[1]-_[1]),d=Math.sqrt(Math.pow(v,2)+Math.pow(y,2));i.push(d),a+=d,n.push(a),_=c}else if(4===c.length){var p=EE.bezierLength([_,[c[0],c[1]],[c[2],c[3]]]);i.push(p),a+=p,n.push(a),_=[c[2],c[3]]}else if(6===c.length){var x=EE.bezierLength([_,[c[0],c[1]],[c[2],c[3]],[c[4],c[5]]]);i.push(x),a+=x,n.push(a),_=[c[4],c[5]]}}}return{list:i,total:a,increase:n}}},{key:"__concatPointAndControl",value:function(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}},{key:"render",value:function(t,r,i,a){var n=f(l(e.prototype),"render",this).call(this,t,r,i,a);return n.break||t===x.WEBGL||(this.__buildCache(n.x3,n.y3),this.__renderPolygon(t,r,n)),n}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,n=this.computedStyle[bM];this.__buildCache(i,a);var o=f(l(e.prototype),"bbox",this),s=0;n.forEach((function(t){s=Math.max(s,t)})),s=Math.ceil(.5*s)+1;var h=r.points,_=r.controls;t||(h=[h],_=[_]),h.forEach((function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=_[e]||[],i=c(t[0],2),a=i[0],n=i[1],l=1,h=t.length;l<h;l++){var u=t[l];if(u&&!(u.length<2)){var f=c(t[l],2),v=f[0],y=f[1],d=r[l-1];if(d&&4===d.length){var p=EE.bboxBezier(a,n,d[0],d[1],d[2],d[3],v,y);o[0]=Math.min(o[0],p[0]-s),o[1]=Math.min(o[1],p[1]-s),o[2]=Math.max(o[2],p[2]+s),o[3]=Math.max(o[3],p[3]+s)}else if(d&&2===d.length){var x=EE.bboxBezier(a,n,d[0],d[1],v,y);o[0]=Math.min(o[0],x[0]-s),o[1]=Math.min(o[1],x[1]-s),o[2]=Math.max(o[2],x[2]+s),o[3]=Math.max(o[3],x[3]+s)}else o[0]=Math.min(o[0],a-s),o[1]=Math.min(o[1],n-s),o[2]=Math.max(o[2],a+s),o[3]=Math.max(o[3],n+s);a=v,n=y}}})),this.__bbox=o}return this.__bbox}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),e}(tp),MM=function(t){function e(e,r){return t.call(this,e,r)||this}return s(e,t),n(e,[{key:"__getPoints",value:function(t,r,i,a,n,o){var s=f(l(e.prototype),"__getPoints",this).call(this,t,r,i,a,n,o);return o||s.push(s[0]),s}}]),e}(EM),wM=fe.STYLE_KEY.STROKE_WIDTH,TM=Y.isNil,SM=Se.sectorPoints;function RM(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var kM=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__begin=[0],i.__end=[0],i.__r=[1],Array.isArray(r.begin)&&(i.__begin=r.begin.map((function(t){return RM(t,0)}))),Array.isArray(r.end)&&(i.__end=r.end.map((function(t){return RM(t,0)}))),Array.isArray(r.r)&&(i.__r=r.r.map((function(t){return RM(t,1)}))),Array.isArray(r.edge)&&(i.__edge=r.edge.map((function(t){return!!t}))),Array.isArray(r.closure)&&(i.__closure=r.closure.map((function(t){return!!t})))):(i.__begin=i.__end=0,i.__r=1,i.__edge=!1,i.__closure=!1,TM(r.begin)||(i.__begin=RM(r.begin,0)),TM(r.end)||(i.__end=RM(r.end,0)),TM(r.r)||(i.__r=RM(r.r,1)),TM(r.edge)||(i.__edge=!!r.edge),TM(r.closure)||(i.__closure=!!r.closure)),i}return s(e,t),n(e,[{key:"__buildCache",value:function(t,e,r){var i,a=this.width,n=this.begin,o=this.end,s=this.r,l=this.edge,h=this.closure,_=this.__cacheProps,u=this.isMulti;if((TM(_.begin)||r)&&(i=!0,_.begin=(n||0)%360),(TM(_.end)||r)&&(i=!0,_.end=(o||0)%360),(TM(_.r)||r)&&(i=!0,_.r=u?s.map((function(t){return t*a*.5})):s*a*.5),s=_.r,(TM(_.edge)||r)&&(i=!0,_.edge=l),(TM(_.closure)||r)&&(i=!0,_.closure=h),i)if(u)_.list=[],_.sList=[],n.forEach((function(r,i){var n=TM(s[i])?.5*a:s[i],u=SM(t,e,n,parseFloat(r||0)%360,parseFloat(o[i]||0)%360),f=u.slice(0);h[i]?(u.push(u[0].slice(0)),l&&f.push(f[0].slice(0))):(u.unshift([t,e]),u.push([t,e]),l&&(f.unshift([t,e]),f.push([t,e]))),_.list.push(u),_.sList.push(f)}));else{var f=SM(t,e,s,parseFloat(n||0),parseFloat(o||0)),c=f.slice(0);h?(f.push(f[0].slice(0)),l&&c.push(c[0].slice(0))):(f.unshift([t,e]),f.push([t,e]),l&&(c.unshift([t,e]),c.push([t,e]))),_.list=f,_.sList=c}return i}},{key:"render",value:function(t,r,i,a){var n=f(l(e.prototype),"render",this).call(this,t,r,i,a);if(n.break||t===x.WEBGL)return n;this.__buildCache(n.cx,n.cy);var o=n.fill,s=n.fillRule,h=n.stroke,_=n.strokeWidth,u=n.strokeDasharray,c=n.strokeDasharrayStr,v=n.strokeLinecap,y=n.strokeLinejoin,d=n.strokeMiterlimit,p=n.dx,g=n.dy,m=this.__cacheProps,b=m.list,A=m.sList,E=this.isMulti;if(o.length<=1&&h.length<=1){var M={fill:o[0],fillRule:s[0],stroke:h[0],strokeWidth:_[0],strokeDasharray:u[0],strokeDasharrayStr:c[0],strokeLinecap:v[0],strokeLinejoin:y[0],strokeMiterlimit:d[0],dx:p,dy:g};this.__renderOneSector(t,r,E,b,A,M)}else{for(var w=0,T=o.length;w<T;w++){var S=o[w];if(S){var R={fill:S,fillRule:s[w],dx:p,dy:g};this.__renderOneSector(t,r,E,b,A,R)}}for(var k=0,C=h.length;k<C;k++){var F=h[k];if(F){var I={stroke:F,strokeWidth:_[k],strokeDasharray:u[k],strokeDasharrayStr:c[k],strokeLinecap:v[k],strokeLinejoin:y[k],strokeMiterlimit:d[k],dx:p,dy:g};this.__renderOnePolygon(t,r,E,b,A,I)}}}return n}},{key:"__renderOneSector",value:function(t,e,r,i,a,n){var o=n.fill,s=n.stroke,l=n.strokeWidth,h="conic"===o.k,_="conic"===s.k,u="radial"===o.k&&Array.isArray(o.v),f=l>0&&"radial"===s.k&&Array.isArray(s.v);h||_?(h?this.__conicGradient(t,e,i,r,n):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),l>0&&_?lt.warn("Stroke style can not use conic-gradient"):l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0)):u||f?(u?this.__radialEllipse(t,e,i,r,n,"fill"):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),l>0&&f?(lt.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke=n.stroke.v[0],this.__drawPolygon(t,e,r,a,n,!1,!0)):l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0)):(o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0,!1),l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,a,n,o,s,l){if(t){var h=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",a]];this.__propsStrokeStyle(h,n,o,s,l),this.addGeom("path",h)}else if(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),a>0){var _=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",a]];this.__propsStrokeStyle(_,n,o,s,l),this.addGeom("path",_)}}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,n=this.width,o=this.height,s=this.computedStyle[wM],h=i+.5*n,_=a+.5*o;this.__buildCache(h,_);var u=0;if(t){var c=0;r.r.forEach((function(t){c=Math.max(t,c)})),u=c}else u=r.r;var v=f(l(e.prototype),"bbox",this),y=0;s.forEach((function(t){y=Math.max(y,t)}));var d=h-u-(y=Math.ceil(.5*y)+1),p=h+u-y,x=_-u+y,g=_+u+y;v[0]=Math.min(v[0],d),v[1]=Math.min(v[1],x),v[2]=Math.max(v[2],p),v[3]=Math.max(v[3],g),this.__bbox=v}return this.__bbox}}]),e}(tp),CM=fe.STYLE_KEY.STROKE_WIDTH,FM=Y.isNil;function IM(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0===a||0===n)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];var o=a*Se.H,s=n*Se.H;return[[t+a,e],[t+r-a,e],[t+r+o-a,e,t+r,e+n-s,t+r,e+n],[t+r,e+i-n],[t+r,e+i+s-n,t+r+o-a,e+i,t+r-a,e+i],[t+a,e+i],[t+a-o,e+i,t,e+i+s-n,t,e+i-n],[t,e+n],[t,e+n-s,t+a-o,e,t+a,e]]}function OM(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var LM=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__rx=[0],i.__ry=[0],Array.isArray(r.rx)&&(i.__rx=r.rx.map((function(t){return OM(t)}))),Array.isArray(r.ry)&&(i.__ry=r.ry.map((function(t){return OM(t)})))):(i.__rx=i.__ry=0,FM(r.rx)||(i.__rx=OM(r.rx)),FM(r.ry)||(i.__ry=OM(r.ry))),i}return s(e,t),n(e,[{key:"__buildCache",value:function(t,e,r){var i,a=this.width,n=this.height,o=this.rx,s=this.ry,l=this.__cacheProps,h=this.isMulti;if((FM(l.rx)||r)&&(i=!0,l.rx=h?o.map((function(t){return Math.min(t,.5)*a})):Math.min(o,.5)*a),(FM(l.ry)||r)&&(i=!0,l.ry=h?o.map((function(t){return Math.min(t,.5)*n})):Math.min(s,.5)*n),i){var _=l.rx,u=l.ry;l.list=h?_.map((function(r,i){return IM(t,e,a,n,r,u[i])})):IM(t,e,a,n,_,u)}return i}},{key:"render",value:function(t,r,i,a){var n=f(l(e.prototype),"render",this).call(this,t,r,i,a);return n.break||t===x.WEBGL||(this.__buildCache(n.x3,n.y3),this.__renderPolygon(t,r,n)),n}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__x3,r=this.__y3,i=this.width,a=this.height,n=this.computedStyle[CM];this.__buildCache(t,r);var o=f(l(e.prototype),"bbox",this),s=0;n.forEach((function(t){s=Math.max(s,t)})),s=Math.ceil(.5*s)+1,o[0]=Math.min(o[0],t-s),o[1]=Math.min(o[1],r-s),o[2]=Math.max(o[2],t+i+s),o[3]=Math.max(o[3],r+a+s),this.__bbox=o}return this.__bbox}}]),e}(tp),BM=fe.STYLE_KEY.STROKE_WIDTH,DM=Y.isNil;function PM(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var NM=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__r=[1],Array.isArray(r.r)?i.__r=r.r.map((function(t){return PM(t)})):DM(r.r)||(i.__r=PM(r.r))):(i.__r=1,DM(r.r)||(i.__r=PM(r.r))),i}return s(e,t),n(e,[{key:"__buildCache",value:function(t,e,r){var i=this.width,a=this.r,n=this.__cacheProps,o=this.isMulti;(DM(n.r)||r)&&(o?(n.r=a.map((function(t){return t*i*.5})),n.list=n.r.map((function(r){return Se.ellipsePoints(t,e,r,r)}))):(n.r=a*i*.5,n.list=Se.ellipsePoints(t,e,n.r,n.r)))}},{key:"render",value:function(t,r,i,a){var n=f(l(e.prototype),"render",this).call(this,t,r,i,a);return n.break||t===x.WEBGL||(this.__buildCache(n.cx,n.cy),this.__renderPolygon(t,r,n)),n}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,n=this.width,o=this.height,s=this.computedStyle[BM],h=i+.5*n,_=a+.5*o;this.__buildCache(h,_);var u=0;if(t){var c=0;r.r.forEach((function(t){c=Math.max(t,c)})),u=c}else u=r.r;var v=f(l(e.prototype),"bbox",this),y=0;s.forEach((function(t){y=Math.max(y,t)}));var d=h-u-(y=Math.ceil(.5*y)+1),p=_-u-y,x=h+u+y,g=_+u+y;v[0]=Math.min(v[0],d),v[1]=Math.min(v[1],p),v[2]=Math.max(v[2],x),v[3]=Math.max(v[3],g),this.__bbox=v}return this.__bbox}}]),e}(tp),zM=fe.STYLE_KEY.STROKE_WIDTH,HM=Y.isNil;function GM(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var WM=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__rx=[1],i.__ry=[1],Array.isArray(r.rx)?i.__rx=r.rx.map((function(t){return GM(t)})):HM(r.rx)||(i.__rx=[GM(r.rx)]),Array.isArray(r.ry)?i.__ry=r.ry.map((function(t){return GM(t)})):HM(r.ry)||(i.__ry=[GM(r.ry)])):(i.__rx=1,HM(r.rx)||(i.__rx=GM(r.rx)),i.__ry=1,HM(r.ry)||(i.__ry=GM(r.ry))),i}return s(e,t),n(e,[{key:"__buildCache",value:function(t,e,r){var i,a=this.width,n=this.height,o=this.rx,s=this.ry,l=this.__cacheProps,h=this.isMulti;if((HM(l.rx)||r)&&(i=!0,l.rx=h?o.map((function(t){return t*a*.5})):o*a*.5),(HM(l.ry)||r)&&(i=!0,l.ry=h?s.map((function(t){return t*n*.5})):s*n*.5),i){var _=l.rx,u=l.ry;l.list=h?_.map((function(r,i){return Se.ellipsePoints(t,e,r,u[i])})):Se.ellipsePoints(t,e,_,u)}return i}},{key:"render",value:function(t,r,i,a){var n=f(l(e.prototype),"render",this).call(this,t,r,i,a);return n.break||t===x.WEBGL||(this.__buildCache(n.cx,n.cy),this.__renderPolygon(t,r,n)),n}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,n=this.width,o=this.height,s=this.computedStyle[zM],h=i+.5*n,_=a+.5*o;this.__buildCache(h,_);var u=0,c=0;if(t){var v=0,y=0;r.rx.forEach((function(t,e){v=Math.max(t,v),y=Math.max(c,r.ry[e])})),u=v,c=y}else u=r.rx,c=r.ry;var d=f(l(e.prototype),"bbox",this),p=0;s.forEach((function(t){p=Math.max(p,t)}));var x=h-u-(p=Math.ceil(.5*p)+1),g=h+u+p,m=_-c-p,b=_+c+p;d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],b),this.__bbox=d}return this.__bbox}}]),e}(tp),YM=Y.isPrimitive,UM=Y.isNil;function XM(t,e,r,i,a){if(YM(e)||e instanceof p||e instanceof lh)return e;if(Array.isArray(e))return e.map((function(e){return XM(t,e,r,i,a)}));if(i+=parseInt(e.areaStart)||0,null===a&&!UM(e.areaDuration)){var n=parseInt(e.areaDuration);!isNaN(n)&&n>0&&(a=n)}var o,s,l=e.tagName,h=e.props,_=void 0===h?{}:h,u=e.children,f=void 0===u?[]:u,c=e.animate,v=void 0===c?[]:c;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(e));if(!Array.isArray(f))throw new Error("children must be an array");if("$"===l.charAt(0))o=t.createGm(l,_);else if(/^[A-Z]/.test(l)){var y=lh.getRegister(l);_.tagName=_.tagName||l,o=t.createCp(y,_,f.map((function(e){return XM(t,e,r,i,a)})))}else o=t.createVd(l,_,f.map((function(e){return XM(t,e,r,i,a)})));v&&(Array.isArray(v)||(v=[v]),v.forEach((function(t){var e=t.value;Array.isArray(e)&&e.length&&(s=!0)})),s&&r.push({animate:v,target:o,areaStart:i,areaDuration:a}));return o}var VM=Y.isNil,KM=Y.isFunction,jM=Y.isPrimitive,ZM=Y.clone,qM=Y.extend;function $M(t,e){if(t&&t.hasOwnProperty("vars")){var r=t.vars;delete t.vars,Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.forEach((function(r){var i=r.id,a=r.member;if(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.length&&"library"!==a[0]&&e&&e.hasOwnProperty(i))for(var n=t,o=0,s=a.length;o<s;o++){var l=a[o];if(!n.hasOwnProperty(l)&&o!==s-1)return void lt.error("Slot miss "+l);if(o===s-1){var h=e[i];if(void 0===h)return;KM(h)&&(h=h(n[l])),n[l]=h}else n=n[l]}}))}}function JM(t,e,r){if(jM(t)||t instanceof p||t instanceof lh)return t;if(Array.isArray(t))return t.map((function(t){return JM(t,e,r)}));var i=t.libraryId;if(!VM(i)){var a=r[i];if(!a)throw new Error("Link library miss id: "+i);!function(t,e){t.tagName=e.tagName,t.props=ZM(e.props)||{},t.children=e.children||[],e.vars&&!t.vars&&(t.vars=e.vars),e.library&&(t.library=e.library),delete t.libraryId;var r=t.init;if(r){var i=t.props,a=i.style;qM(i,r),a&&(qM(a,r.style),i.style=a),delete t.init}}(t,a)}var n=t.library;Array.isArray(n)&&(r={},n.forEach((function(t){return function(t,e){var r=t.id;if(VM(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}(t,r)})),function(t,e,r){if(t&&t.hasOwnProperty("vars")){var i,a=t.vars;Array.isArray(a)||(a=[a]);for(var n=0,o=a.length;n<o;n++){var s=a[n],l=s.id,h=s.member;if(Array.isArray(h)||(h=[h]),Array.isArray(h)&&"library"===h[0]&&(a.splice(n--,1),o--,i=!0,r&&r.hasOwnProperty(l))){var _=e;t:for(var u=1,f=h.length;u<f;u++){var c=h[u];if(!_.hasOwnProperty(c)&&u!==f-1){lt.error("Library slot miss "+c);break t}if(u===f-1){var v=r[l],y=_[c];KM(v)&&(v=v(y)),_[c]=1===u?Object.assign({id:y.id,tagName:y.tagName},v):v}else _=_[c]}}}a.length?i&&(t.vars=a):delete t.vars}}(t,r,e.vars),delete t.library);var o=t.tagName,s=t.props,l=void 0===s?{}:s,h=t.children,_=void 0===h?[]:h,u=t.animate,f=void 0===u?[]:u;if(!o)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var c=l.src;if(/^#\d+$/.test(c)){var v=e.imgs,y=parseInt(c.slice(1));Array.isArray(v)&&(l.src=v[y])}var d=l.style;if(d){var x=d.fontFamily;if(/^#\d+$/.test(x)){var g=e.fonts,m=parseInt(x.slice(1));Array.isArray(g)&&(d.fontFamily=g[m])}$M(d,e.vars)}return $M(l,e.vars),$M(t,e.vars),t.children=JM(_,e,r),f&&(Array.isArray(f)||(f=[f]),f.forEach((function(t){var r=t.value,i=t.options;Array.isArray(r)&&r.length&&r.forEach((function(t){$M(t,e.vars)})),i&&($M(i,e.vars),function(t,e){["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach((function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}))}(i,e))}))),t}function QM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.singleton||t.singleton||(t=Y.clone(t)),JM(t,e,{})}var tw={apply:QM,parse:function(t,e,r,i){if(e){var a=e.fonts;a&&(Array.isArray(a)||(a=[a]),a.forEach((function(t){var e=t.fontFamily,r=t.url,i=t.data;e&&(r||i)&&Nt.register(e,r,i)}))),lt.isDom(r)?i=i||{}:(i=i||r||{},r=null);var n=[],o=XM(t,e=QM(e,i),n,0,null);if(r){var s=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(s))throw new Error("Parse dom must be canvas/svg/webgl");var l=i.controller instanceof t_?i.controller:o.animateController;t.render(o,r),!1!==i.autoPlay?(l.__records=l.__records.concat(n),l.__playAuto()):(l.__records2=l.__records2.concat(n),l.init(l.__records2,l.list2))}else n.length&&(o.__animateRecords={options:i,list:n,controller:i.controller instanceof t_?i.controller:null});return o}},loadAndParse:function(t,e,r,i){var a=e.fonts,n=e.components,o=e.imgs,s=[],l=[],h=[];a&&(Array.isArray(a)||(a=[a]),a.forEach((function(t){t.url&&s.push(t)}))),n&&(Array.isArray(n)||(n=[n]),n.forEach((function(e){var r=e.tagName,i=e.url,a=e.reload;r&&t.Component.hasRegister(r)&&!a||i&&l.push(e)}))),o&&(Array.isArray(o)||(o=[o]),o.forEach((function(t){var e=t.url;e&&h.push(e)})));var _=s.length,u=l.length,f=h.length,c=0,v=function(){if(c===_+u+f){var a=tw.parse(t,e,r,i);i&&Y.isFunction(i.callback)&&i.callback(a)}};_||u||f?(t.inject.loadFont(s,(function(){c+=_,v()})),t.inject.loadComponent(l.map((function(t){return t.url})),(function(){c+=u,l.forEach((function(e){var r=e.tagName;r&&window[r]&&!t.Component.hasRegister(r)&&t.Component.register(r,window[r])})),v()})),t.inject.measureImg(h,(function(){c+=f,v()}))):v()}},ew={css:mo,reset:Kt,unit:g,font:Nt,abbr:Hr,transform:fs},rw={Animation:Gf,Controller:t_,easing:qh,frame:Hh};function iw(t,e,r,i){var a=r-t,n=i-e,o=Math.atan(Math.abs(n)/Math.abs(a));return a<0&&n>=0?Math.PI-o:a<0&&n<0?o-Math.PI:a>=0&&n>=0?o:-o}function aw(t){var e=Math.sin(t),r=Math.cos(t),i=E.identity();return i[0]=i[5]=r,i[1]=e,i[4]=-e,i}function nw(t,e){var r=c(t,6),i=r[0],a=r[1],n=r[2],o=r[3],s=r[4],l=r[5],h=c(e,6),_=h[0],u=h[1],f=h[2],v=h[3],y=h[4],d=(n-i)*(l-a)-(s-i)*(o-a),p=(f-_)*(h[5]-u)-(y-_)*(v-u);return d>0&&p<0||d<0&&p>0}var ow={exchangeOrder:function(t,e){var r=function(t){var e=c(t,6),r=e[0],i=e[1],a=e[2],n=e[3],o=e[4],s=e[5],l=[0,1,2];if(a<r&&a<o){var h=[a,n,r,i];r=h[0],i=h[1],a=h[2],n=h[3],l[0]=1,l[1]=0}else if(o<a&&o<r){var _=[o,s,r,i];r=_[0],i=_[1],o=_[2],s=_[3],l[0]=2,l[2]=0}if(r===a){if(i>n){var u=[a,n,r,i];r=u[0],i=u[1],a=u[2],n=u[3];var f=l[0];l[0]=l[1],l[1]=f}}else if(r===o&&i>s){var v=[o,s,r,i];r=v[0],i=v[1],o=v[2],s=v[3];var y=l[0];l[0]=l[2],l[2]=y}if((a-r)*(s-i)-(o-r)*(n-i)<0){var d=[o,s,a,n];a=d[0],n=d[1],o=d[2],s=d[3];var p=l[1];l[1]=l[2],l[2]=p}return[r,i,a,n,o,s,l]}(t),i=c(r,7),a=i[0],n=i[1],o=i[2],s=i[3],l=i[4],h=i[5],_=function(t,e){for(var r=[],i=0,a=e.length;i<a;i++){var n=e[i];r.push(t[2*n]),r.push(t[2*n+1])}return r}(e,i[6]),u=c(_,6);return[[a,n,o,s,l,h],[u[0],u[1],u[2],u[3],u[4],u[5]]]},isOverflow:nw,transform:function(t,e){var r,i=c(t,6),a=i[0],n=i[1],o=i[2],s=i[3],l=i[4],h=i[5],_=c(e,6),u=_[0],f=_[1],v=_[2],y=_[3],d=_[4],p=_[5],x=nw(t,e),g=E.identity();g[12]=-a,g[13]=-n;var m=iw(a,n,o,s);0!==m&&(r=aw(-m),g=E.multiply(r,g));var b=Se.pointsDistance(a,n,o,s),A=Se.pointsDistance(u,f,v,y),M=E.identity();M[12]=-u,M[13]=-f;var w=m=iw(u,f,v,y);0!==m&&(r=aw(-m),M=E.multiply(r,M));var T=Math.abs(E.calPoint({x:l,y:h},g).y),S=Math.abs(E.calPoint({x:d,y:p},M).y);b===A&&T===S||(r=E.identity(),b!==A&&(r[0]=A/b),T!==S&&(r[5]=S/T),g=E.multiply(r,g)),M=g;var R=E.calPoint({x:a,y:n},M),k=R.x,C=R.y,F=E.calPoint({x:o,y:s},M),I=F.x,O=F.y,L=E.calPoint({x:l,y:h},M),B=L.x,D=L.y,P=Se.pointsDistance(k,C,I,O),N=Se.pointsDistance(k,C,B,D),z=Se.pointsDistance(B,D,I,O),H=Se.pointsDistance(u,f,v,y),G=Se.pointsDistance(u,f,d,p),W=Se.pointsDistance(d,p,v,y),Y=Se.angleBySide(z,P,N),U=Se.angleBySide(W,H,G);return Y!==U&&((r=E.identity())[4]=Math.tan(Y-.5*Math.PI)+Math.tan(.5*Math.PI-U),g=E.multiply(r,g)),x&&(g[1]=-g[1],g[5]=-g[5],g[13]=-g[13]),(r=0!==w?aw(w):E.identity())[12]=u,r[13]=f,E.multiply(r,g)}},sw={matrix:E,tar:ow,vector:ae,equation:Cm,geom:Se,bezier:EE,isec:Vm,booleanOperations:vM},lw={level:vl,change:Sa,Page:og,Cache:tg,CanvasPage:vg,CanvasCache:mg,webgl:cg},hw=Y.isString;tp.register("$line",CE),tp.register("$polyline",EM),tp.register("$polygon",MM),tp.register("$sector",kM),tp.register("$rect",LM),tp.register("$circle",NM),tp.register("$ellipse",WM);var _w={version:"0.85.14",wasm:__,render:function(t,e){if(!(t instanceof hE))throw new Error("Render dom must be canvas/svg/webgl");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,a=arguments.length;i<a;i++)r.push(arguments[i]);return hw(t)?"$"===t.charAt(0)?this.createGm(t,e):/^[A-Z]/.test(t)?this.createCp(t,e,r):this.createVd(t,e,r):t?t instanceof tp||t.prototype&&t.prototype instanceof tp?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(["canvas","svg","webgl"].indexOf(t)>-1)return new hE(t,e,r);if(xd.TAG_NAME.hasOwnProperty(t))return"img"===t?new $g(t,e):new Jx(t,e,r);throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){var r=tp.getRegister(t);if(!hw(t)){var i=/^function ([\w$]+)/.exec(t.toString());i&&i.length>1&&(t=i[1])}return new r(t,e)},createCp:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=lh.getRegister(t);return hw(t)&&(e.tagName=t),e.children=r,new i(e)},parse:function(t,e,r){return tw.parse(this,t,e,r)},loadAndParse:function(t,e,r){return tw.loadAndParse(this,t,e,r)},mode:x,Component:lh,Node:p,Text:eh,Geom:tp,Xom:td,Dom:Jx,Img:$g,Root:hE,Event:ih,util:Y,inject:lt,style:ew,parser:tw,animate:rw,math:sw,refresh:lw,enums:fe,ca:cA,get debug(){return U.flag},set debug(t){U.flag=!!t}};return"undefined"!=typeof window?window.karas=_w:"undefined"!=typeof self&&(self.karas=_w),_w}));
//# sourceMappingURL=index.min.js.map
