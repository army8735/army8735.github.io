!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,r,n,i=at(a);return e=o?(t=at(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),r=this,!(n=e)||"object"!=typeof n&&"function"!=typeof n?h(r):n}}function ot(t,e,r){return(ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,SCALE_X:59,SCALE_Y:60,SKEW_X:61,SKEW_Y:62,ROTATE_Z:63,FILTER:64,BOX_SHADOW:65,POINTER_EVENTS:66,OVERFLOW:67,MIX_BLEND_MODE:68,FILL:69,STROKE:70,STROKE_WIDTH:71,STROKE_DASHARRAY:72,STROKE_DASHARRAY_STR:73,STROKE_LINECAP:74,STROKE_LINEJOIN:75,STROKE_MITERLIMIT:76,FILL_RULE:77,MATRIX:78,BORDER_TOP:79,BORDER_RIGHT:80,BORDER_BOTTOM:81,BORDER_LEFT:82,LETTER_SPACING:83};function u(t){return t.replace(/[A-Z]/g,function(t){return t.toLowerCase()}).replace(/_([a-z])/g,function(t,e){return e.toUpperCase()})}var _={},f={};Object.keys(s).forEach(function(t){var e=s[t];_[e]=t,f[e]=u(t)});var d={STYLE_KEY:s,STYLE_R_KEY:_,STYLE_RV_KEY:f,style2Lower:u,style2Upper:function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toUpperCase()}).replace(/[a-z]/g,function(t){return t.toUpperCase()})},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_IMG:5,UPDATE_OVERWRITE:6,UPDATE_KEYS:7,UPDATE_LIST:8,UPDATE_CONFIG:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_BLUR_VALUE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6}},v=d.STRUCT_KEY,y=v.STRUCT_NODE,m=v.STRUCT_INDEX,E=v.STRUCT_CHILD_INDEX,T=v.STRUCT_LV,O=d.NODE_KEY,M=O.NODE_IS_DESTROYED,A=O.NODE_STRUCT,x=function(){function t(){g(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return l(t,[{key:"__structure",value:function(t,e,r){var n;return this.__config[A]=(c(n={},y,this),c(n,m,t),c(n,E,r),c(n,T,e),n)}},{key:"__modifyStruct",value:function(){return[this.__config[A],1]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[M]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[M]}}]),t}(),Ct={CANVAS:0,SVG:1},R={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7},S={info:{arial:{lhr:1.14990234375,blr:.9052734375},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},"宋体":{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)},register:function(t,e){var r=e||{},n=r.emSquare,i=void 0===n?2048:n,a=r.ascent,o=void 0===a?1854:a,s=r.descent,h=void 0===s?434:s,l=r.lineGap,c=void 0===l?67:l;this.info[t.toLowerCase()]={lhr:(o+h+c)/i,blr:o/i}}},b={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}};var k,I,N,Lt={identity:function(){return[1,0,0,1,0,0]},multiply:function(t,e){var r=1===t[0]&&0===t[1]&&0===t[2]&&1===t[3],n=1===e[0]&&0===e[1]&&0===e[2]&&1===e[3],i=0===t[4]&&0===t[5],a=0===e[4]&&0===e[5];if(r&&i)return e.slice(0);if(n&&a)return t.slice(0);if(r&&n)return(t=t.slice(0))[4]+=e[4],t[5]+=e[5],t;if(r||n){var o=r?e.slice(0):t.slice(0);return o[4]=t[0]*e[4]+t[2]*e[5]+t[4],o[5]=t[1]*e[4]+t[3]*e[5]+t[5],o}var s=[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],0,0];return i&&a||(a?(s[4]=t[4],s[5]=t[5]):(s[4]=t[0]*e[4]+t[2]*e[5]+t[4],s[5]=t[1]*e[4]+t[3]*e[5]+t[5])),s},calPoint:function(t,e){var r=Pt(t,2),n=r[0],i=r[1],a=Pt(e,6),o=a[0],s=a[1],h=a[2],l=a[3];return[o*n+h*i+a[4],s*n+l*i+a[5]]},int2convolution:function(t){var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(e*=3)%2==0&&e++,e},inverse:function(t){var e=Pt(t,6),r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5];if(1===r&&0===n&&0===i&&1===a&&0===o&&0===s)return t;var h,l,c=1,u=0,_=0,f=1,d=0,p=0;if(0===r)if(1===n)var v=[n,r,a,i,s,o,u,c,f,_,p,d],r=v[0],n=v[1],i=v[2],a=v[3],o=v[4],s=v[5],c=v[6],u=v[7],_=v[8],f=v[9],d=v[10],p=v[11];else{if(0===n)return[0,0,0,0,0,0];r=1,i+=i/n,o+=o/n,c+=c/n,_+=_/n,d+=d/n,n=0}return 0!==n&&(h=n/r,n=0,a-=i*h,s-=o*h,u-=c*h,f-=_*h,p-=d*h),1!==r&&(i/=r,o/=r,c/=r,_/=r,d/=r,r=1),0!==i&&(l=i/a,i=0,o-=s*l,c-=u*l,_-=f*l,d-=p*l),0===a?(s+=(a=1)-o,u+=1-c,f+=1-_,p+=1-d):1!==a&&(s/=a,u/=a,f/=a,p/=a,a=1),0!==o&&(d-=o,o=0),0!==s&&(p-=s,s=0),[c,u,_,f,d,p]},isE:function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}},w=d.STYLE_KEY,D=d.STYLE_KEY.TRANSFORM,P={}.toString;function C(e){return function(t){return P.call(t)==="[object "+e+"]"}}var L=C("Object"),F=C("String"),B=C("Function"),H=C("Number"),G=C("Boolean"),Y=C("Date");function W(t){return null==t}function U(t){return W(t)?"":t.toString()}function X(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=X(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var n="<g>";t.bb.forEach(function(t){n+=X(t)}),n+="</g><g",t.conClip&&(n+=' clip-path="'+t.conClip+'"'),n+=">",(t.children||[]).forEach(function(t){t.isMask||(n+=X(t))}),n+="</g>";var i=t.opacity,a=t.transform,o=t.visibility,s=t.mask,h=t.overflow,l=t.filter,c=t.mixBlendMode;return"<g"+(1!==i&&void 0!==i?' opacity="'+i+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l?' filter="'+l+'"':"")+(c?' style="mix-blend-mode:'+c+'"':"")+">"+n+"</g>"}}function K(t){var n="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(n+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){n+=" "+t[0]+'="'+t[1]+'"'}),n+=">",(t.children||[]).forEach(function(t){var e,r;n+=(r="<"+(e=t).tagName,(e.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+="></"+e.tagName+">")}),n+="</"+t.tagName+">"}function z(t,e){for(var r=t.length?t[0]:"",n=1,i=t.length;n<i;n++)r+=e+t[n];return r}var V=(c(k={},w.POSITION,!0),c(k,w.DISPLAY,!0),c(k,w.BACKGROUND_REPEAT,!0),c(k,w.FLEX_DIRECTION,!0),c(k,w.JUSTIFY_CONTENT,!0),c(k,w.ALIGN_ITEMS,!0),c(k,w.ALIGN_SELF,!0),c(k,w.OVERFLOW,!0),c(k,w.MIX_BLEND_MODE,!0),c(k,w.STROKE_LINECAP,!0),c(k,w.STROKE_LINEJOIN,!0),c(k,w.STROKE_MITERLIMIT,!0),c(k,w.FILL_RULE,!0),k),j=(c(I={},w.BACKGROUND_SIZE,!0),c(I,w.BACKGROUND_COLOR,!0),c(I,w.BORDER_TOP_COLOR,!0),c(I,w.BORDER_RIGHT_COLOR,!0),c(I,w.BORDER_BOTTOM_COLOR,!0),c(I,w.BORDER_LEFT_COLOR,!0),I),$=(c(N={},w.BORDER_TOP_LEFT_RADIUS,!0),c(N,w.BORDER_TOP_RIGHT_RADIUS,!0),c(N,w.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(N,w.BORDER_BOTTOM_LEFT_RADIUS,!0),c(N,w.TRANSFORM_ORIGIN,!0),N);var Ft={isObject:L,isString:F,isFunction:B,isNumber:H,isBoolean:G,isDate:Y,isNil:W,isPrimitive:function(t){return Ft.isNil(t)||Ft.isBoolean(t)||Ft.isString(t)||Ft.isNumber(t)},isAuto:function(t){return W(t)||"auto"===t},stringify:U,joinSourceArray:function t(e){for(var r="",n=0,i=e.length;n<i;n++){var a=e[n];Array.isArray(a)?r+=t(a):r+=U(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=K(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=X(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=X(t))}),e+="</g>"},joinVd:X,joinDef:K,rgba2int:function(t){if(Array.isArray(t))return t;var e,r=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(r.push(parseInt(t.charAt(0)+t.charAt(0),16)),r.push(parseInt(t.charAt(1)+t.charAt(1),16)),r.push(parseInt(t.charAt(2)+t.charAt(2),16)),r[3]=1):6===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4),16)),r[3]=1):8===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4,6),16)),r.push(parseInt(t.slice(6),16)/255)):(r[0]=r[1]=r[2]=0,r[3]=1):(e=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(r=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],W(e[4])?r[3]=1:r[3]=parseFloat(e[4])):r=[0,0,0,0]:r=[0,0,0,0],r},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+z(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+z(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+z(t,",")+")";if(3===t.length)return"rgba("+z(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i))e[i[0]]=i[1];else for(var a=Object.keys(i),o=a.length-1;0<=o;o--){var s=a[o];e[s]=i[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),n=0,i=r.length;n<i;n++){var a=r[n];e.push([a,t[a]])}return e},clone:function e(r){if(W(r)||"object"!==o(r))return r;if(r.$$type===b.TYPE_VD||r.$$type===b.TYPE_GM||r.$$type===b.TYPE_CP)return r;if(Ft.isDate(r))return new Date(r);var n=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){n[t]=e(r[t])}),n},cloneStyle:function(a,t){t=t||Object.keys(a);var o={};return t.forEach(function(t){var e=a[t];if(t===w.BACKGROUND_IMAGE)e.k?o[t]=Ft.clone(e):o[t]=e;else if(V.hasOwnProperty(t))o[t]=e;else{var r=o[t]=e.slice(0);if(j.hasOwnProperty(t))r[0]=r[0].slice(0);else if($.hasOwnProperty(t))r[0]=r[0].slice(0),r[1]=r[1].slice(0);else if(t===D)for(var n=0,i=r.length;n<i;n++)r[n]=r[n].slice(0)}}),o},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++){var a=e[n],o=r[n],s=Array.isArray(a),h=Array.isArray(o);if(s&&h){if(!t(a,o))return!1}else{if(s||h)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(L(e)&&L(r)){for(var n={},i=0,a=Object.keys(e),o=a.length;i<o;i++){var s=a[i];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;n[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!n.hasOwnProperty(u))return!1}}else{if(Y(e)&&Y(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==o(e))return t;for(var n=0,i=(r=r||Object.keys(e)).length;n<i;){var a=r[n];t[a]=e[a],n++}return t},joinArr:z,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!Lt.isE(e)){var i=Pt(t,4),a=i[0],o=i[1],s=i[2],h=i[3];r&&(a-=r,s+=r),n&&(o-=n,h+=n);for(var l=[s,o,a,h,s,h],c=Pt(Lt.calPoint([a,o],e),2),u=a=c[0],_=o=c[1],f=a,d=o,p=0;p<6;p+=2)var v=l[p],y=l[p+1],g=Pt(Lt.calPoint([v,y],e),2),v=g[0],y=g[1],u=Math.min(u,v),f=Math.max(u,v),_=Math.min(_,y),d=Math.max(d,y);t=[u,_,f,d]}else(r||n)&&(t[0]-=r,t[1]-=n,t[2]+=r,t[3]+=n);return t}},q={position:/((-?[\d.]+(px|%)?)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var Z={dotProduct:function(t,e,r,n){return t*r+e*n},crossProduct:function(t,e,r,n){return t*n-r*e}},J=4*(Math.sqrt(2)-1)/3,Q=Z.crossProduct,tt=d.STYLE_KEY,et=tt.WIDTH,rt=tt.HEIGHT,nt=tt.TRANSFORM_ORIGIN;function it(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function st(t,e,r,n){return Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2))}function ht(t,e){var r=Pt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Pt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return!(c<=n||u<=i||a<=h||o<=l)}function lt(t,e,r){var n=r.matrix,i=void 0===n?[1,0,0,1,0,0]:n,a=r.computedStyle,o=void 0===a?{}:a,s=o[et],h=o[rt],l=o[nt],c=Pt(l=void 0===l?[.5*s,.5*h]:l,2),u=c[0],_=c[1],f=Pt(Lt.calPoint([t*s-u,e*h-_],i),2);return[(t=f[0])+u,(e=f[1])+_]}function ct(t){return t*Math.PI/180}function ut(t){var r=t.length,e=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(e,1/r)}function _t(t,e,r){var n=t,i=(2*e+r)/3,a=(e+2*r)/3;return(n(e)+3*n(i)+3*n(a)+n(r))*(r-e)/8}function ft(e,r){return function t(e,r,n,i){var a=3<arguments.length&&void 0!==i?i:.001,o=e,s=(r+n)/2,h=_t(o,r,n),l=_t(o,r,s),c=_t(o,s,n),u=l+c-h;return Math.abs(u)<=15*a?l+c+u/15:t(o,r,s,a/2)+t(o,s,n,a/2)}(function(t){return ut(dt(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function dt(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:1;return 2===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Pt(e,3),a=i[0],o=i[1],s=i[2],h=Pt(a,2),l=h[0],c=h[1],u=Pt(o,2),_=u[0],f=u[1],d=Pt(s,2),p=d[0],v=d[1],y=0,g=0,g=0===n?(y=Math.pow(1-t,2)*l+2*t*(1-t)*_+Math.pow(t,2)*p,Math.pow(1-t,2)*c+2*t*(1-t)*f+Math.pow(t,2)*v):1===n?(y=2*(1-t)*(_-l)+2*t*(p-_),2*(1-t)*(f-c)+2*t*(v-f)):2===n?(y=2*(p-2*_+l),2*(v-2*f+c)):y=0;return[y,g]}(t,e,i):3===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Pt(e,4),a=i[0],o=i[1],s=i[2],h=i[3],l=Pt(a,2),c=l[0],u=l[1],_=Pt(o,2),f=_[0],d=_[1],p=Pt(s,2),v=p[0],y=p[1],g=Pt(h,2),m=g[0],E=g[1],T=0,O=0,O=0===n?(T=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*f+3*(1-t)*Math.pow(t,2)*v+Math.pow(t,3)*m,Math.pow(1-t,3)*u+3*t*Math.pow(1-t,2)*d+3*(1-t)*Math.pow(t,2)*y+Math.pow(t,3)*E):1===n?(T=3*((1-t)*(1-t)*(f-c)+2*(1-t)*t*(v-f)+t*t*(m-v)),3*((1-t)*(1-t)*(d-u)+2*(1-t)*t*(y-d)+t*t*(E-y))):2===n?(T=6*(v-2*f+c)*(1-t)+6*(m-2*v+f)*t,6*(y-2*d+u)*(1-t)+6*(E-2*y+d)*t):3===n?(T=6*(m-3*v+3*f-c),6*(E-3*y+3*d-u)):T=0;return[T,O]}(t,e,i):void 0}function pt(e,r,t){for(var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,o=function(t){return ut(dt(t,e,r))},s=t*n,h=n,l=h,c=0;c<i;c++){var u=_t(o,0,h)-s;if(Math.abs(u)<a)break;var _=ut(dt(h,e,r,1));if(h-=u*_/(u*ut(dt(h,e,r,2))+_*_),Math.abs(h-l)<a)break;l=h}return dt(h,e,r,0)}function vt(t,e){var r=Pt(t,4),n=Pt(r[0],2),i=n[0],a=n[1],o=Pt(r[1],2),s=o[0],h=o[1],l=Pt(r[2],2),c=l[0],u=l[1],_=r[3],f=(s-i)*e+i,d=(h-a)*e+a,p=(c-s)*e+s,v=(u-h)*e+h,y=(p-f)*e+f,g=(v-d)*e+d;if(4===t.length){var m=Pt(_,2);return[[i,a],[f,d],[y,g],[(((m[0]-c)*e+c-p)*e+p-y)*e+y,(((m[1]-u)*e+u-v)*e+v-g)*e+g]]}if(3===t.length)return[[i,a],[f,d],[y,g]]}var Bt={pointInPolygon:function(t,e,r){for(var n=Pt(r[0],2),i=n[0],a=n[1],o=Pt(r[0],2),s=o[0],h=o[1],l=r.length,c=1;c<l;c++)var u=Pt(r[c],2),_=u[0],f=u[1],i=Math.max(i,_),a=Math.max(a,f),s=Math.min(s,_),h=Math.min(h,f);if(t<s||e<h||i<t||a<e)return!1;for(var d=0,p=r.length;d<p;d++){var v=Pt(r[d],2),y=v[0],g=v[1],m=Pt(r[(d+1)%p],2),E=m[0],T=m[1];if(Q(E-y,T-g,t-y,e-g)<0)return!1}return!0},d2r:ct,r2d:function(t){return 180*t/Math.PI},H:J,h:it,angleBySide:function(t,e,r){var n=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(n)},sideByAngle:function(t,e,r){var n=Math.cos(t);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*n)},pointsDistance:st,triangleIncentre:function(t,e,r,n,i,a){var o=st(r,n,i,a),s=st(t,e,i,a),h=st(t,e,r,n);return[(o*t+s*r+h*i)/(o+s+h),(o*e+s*n+h*a)/(o+s+h)]},ellipsePoints:function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,i=r*J,a=n===r?i:n*J;return[[t-r,e],[t-r,e-a,t-i,e-n,t,e-n],[t+i,e-n,t+r,e-a,t+r,e],[t+r,e+a,t+i,e+n,t,e+n],[t-i,e+n,t-r,e+a,t-r,e]]},sectorPoints:function t(e,r,n,i,a){var o;a<i&&(i=(o=[a,i])[0],a=o[1]);var s=[],h=Math.floor(i/90),l=Math.floor(a/90);if(h===l||l-h==1&&a%90==0){var c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k,I=it(ct(Math.abs(i-a)))*n,N=Math.sqrt(Math.pow(n,2)+Math.pow(I,2)),w=Math.atan(I/n);h<90?(c=[e+Math.sin(ct(i))*n,r-Math.cos(ct(i))*n],f=w+ct(i),u=[e+Math.sin(f)*N,r-Math.cos(f)*N],_=[e+Math.sin(ct(a))*n,r-Math.cos(ct(a))*n],f=ct(a)-w,d=[e+Math.sin(f)*N,r-Math.cos(f)*N],s.push(c),s.push(u.concat(d).concat(_))):h<180?(p=[e+Math.cos(ct(i-90))*n,r+Math.sin(ct(i-90))*n],g=w+ct(i-90),v=[e+Math.cos(g)*N,r+Math.sin(g)*N],y=[e+Math.cos(ct(a-90))*n,r+Math.sin(ct(a-90))*n],g=ct(a-90)-w,m=[e+Math.cos(g)*N,r+Math.sin(g)*N],s.push(p),s.push(v.concat(m).concat(y))):h<270?(E=[e-Math.sin(ct(i-180))*n,r+Math.cos(ct(i-180))*n],M=w+ct(i-180),T=[e-Math.sin(M)*N,r+Math.cos(M)*N],O=[e-Math.sin(ct(a-180))*n,r+Math.cos(ct(a-180))*n],M=ct(a-180)-w,A=[e-Math.sin(M)*N,r+Math.cos(M)*N],s.push(E),s.push(T.concat(A).concat(O))):(x=[e-Math.cos(ct(i-270))*n,r+Math.sin(ct(i-270))*n],b=w+ct(i-270),R=[e-Math.cos(b)*N,r+Math.sin(b)*N],S=[e-Math.cos(ct(a-270))*n,r+Math.sin(ct(a-270))*n],b=ct(a-270)-w,k=[e-Math.cos(b)*N,r+Math.sin(b)*N],s.push(x),s.push(R.concat(k).concat(S)))}else{for(var D,P,C,L,F=h,B=[];F<=l;F++)0===F?(D=t(e,r,n,i,90),B.push(D)):1===F?(h===F||90<a)&&(P=t(e,r,n,i<90?90:i,180<a?180:a),B.push(P)):2===F?(h===F||180<a)&&(C=t(e,r,n,i<180?180:i,270<a?270:a),B.push(C)):3===F&&(h===F||270<a)&&(L=t(e,r,n,i<270?270:i,a),B.push(L));s=B[0];for(var H=1,G=B.length;H<G;H++)s.push(B[H][1])}return s},getRectsIntersection:function(t,e){if(!ht(t,e))return null;var r=Pt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Pt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return[Math.max(n,h),Math.max(i,l),Math.min(a,c),Math.min(o,u)]},isRectsOverlap:ht,isRectsInside:function(t,e){var r=Pt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Pt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return n<=h&&i<=l&&c<=a&&u<=o},calCoordsInNode:lt,calPercentInNode:function(t,e,r){var n,i=r.computedStyle,a=i[et],o=i[rt],s=Pt(i[nt],2),h=s[0],l=s[1],c=Math.atan((o-l)/(a-h)),u=Pt(lt(1,1,r),2),_=u[0],f=u[1],d=h<=_&&l<=f?(n=h===_?-Math.atan(1/0):Math.atan((f-l)/(_-h)))-c:h<=_&&f<l?(n=h===_?-Math.atan(1/0):Math.atan((l-f)/(_-h)))+c:_<h&&l<=f?(n=Math.atan((f-l)/(h-_)))-c:_<h&&f<l?(n=Math.atan((f-l)/(_-h)))<=c?n+Math.PI-c:-(d=Math.PI-n+c):0,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-l,2)),v=h<=t&&l<=e?h===t?-Math.atan(1/0):Math.atan((e-l)/(t-h)):h<=t&&e<l?h===t?-Math.atan(1/0):-Math.atan((e-l)/(h-t)):t<h&&l<=e?Math.PI-Math.atan((e-l)/(h-t)):Math.atan((e-l)/(t-h))-Math.PI;return(v-=d)>Math.PI?(v-=Math.PI,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>.5*Math.PI?(v=Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o]):0<=v?[(h+p*Math.cos(v))/a,(l+p*Math.sin(v))/o]:v>=.5*-Math.PI?(v=-v,[(h+p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>=-Math.PI?(v=Math.PI+v,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):(v=-Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o])},bboxBezier:function(t,e,r,n,i,a,o,s){return 4===arguments.length?[t,e,r,n]:6===arguments.length?(h=t,l=e,c=r,u=n,_=i,f=a,E=Math.min(h,_),T=Math.min(l,f),O=Math.max(h,_),M=Math.max(l,f),(c<E||u<T||O<c||M<u)&&(g=(v=1-(d=(h-c)/(h-2*c+_)))*v*h+2*v*d*c+d*d*_,m=(y=1-(p=(l-u)/(l-2*u+f)))*y*l+2*y*p*u+p*p*f,E=Math.min(E,g),T=Math.min(T,m),O=Math.min(O,g),M=Math.min(M,m)),[E,T,O,M]):8===arguments.length?(A=t,x=e,R=r,S=n,b=i,k=a,I=o,N=s,j=Math.min(A,I),$=Math.min(x,N),q=Math.max(A,I),Z=Math.max(x,N),(R<j||S<$||q<R||Z<S||b<j||k<$||q<b||Z<k)&&(F=(D=x-2*S+k)*D-(C=3*S-x-3*k+N)*(-x+S),0<(L=(w=A-2*R+b)*w-(P=3*R-A-3*b+I)*(-A+R))&&(0<(B=(-w-(L=Math.sqrt(L)))/P)&&B<1&&(G=(H=1-B)*H*H*A+3*H*H*B*R+3*H*B*B*b+B*B*B*I,j=Math.min(j,G),q=Math.max(q,G)),0<(B=(-w+L)/P)&&B<1&&(W=(Y=1-B)*Y*Y*A+3*Y*Y*B*R+3*Y*B*B*b+B*B*B*I,j=Math.min(j,W),q=Math.max(q,W))),0<F&&(0<(U=(-D-(F=Math.sqrt(F)))/C)&&U<1&&(K=(X=1-U)*X*X*x+3*X*X*U*S+3*X*U*U*k+U*U*U*N,$=Math.min($,K),Z=Math.max(Z,K)),0<(U=(-D+F)/C)&&U<1&&(V=(z=1-U)*z*z*x+3*z*z*U*S+3*z*U*U*k+U*U*U*N,$=Math.min($,V),Z=Math.max(Z,V)))),[j,$,q,Z]):void 0;var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C,L,F,B,H,G,Y,W,U,X,K,z,V,j,$,q,Z},bezierLength:ft,pointAtBezier:function(t,e,r,n,i){return pt(t,e,ft(t,e,0,1),r,n,i)},pointAtBezierWithLength:pt,sliceBezier:vt,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=vt(t,r)),0<e&&(r<1&&(e/=r),t=vt(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,n){return 270<=n?(n=ct(n-=270),[t-Math.cos(n)*r,e-Math.sin(n)*r]):180<=n?(n=ct(n-=180),[t-Math.sin(n)*r,e+Math.cos(n)*r]):90<=n?(n=ct(n-=90),[t+Math.cos(n)*r,e+Math.sin(n)*r]):(n=ct(n),[t+Math.sin(n)*r,e-Math.cos(n)*r])}},yt=Ft.rgba2int,gt=Ft.isNil,mt=R.PX,Et=R.PERCENT,Tt=Bt.d2r;function Ot(t){if(/%$/.test(t)||/px$/.test(t)||/^-?[\d.]+$/.test(t))return[parseFloat(t),/%/.test(t)?Et:mt];var e=[{top:0,left:0,center:50,right:100,bottom:100}[t],Et];return gt(e[0])&&(e[0]=50),e}function Mt(t,e){for(var r,n=[],i=0,a=t.length;i<a;i++){var o,s=t[i];1<s.length?(o=s[1])[1]===Et?n.push([s[0],.01*o[0]]):n.push([s[0],o[0]/e]):n.push([s[0]])}1===n.length&&n.push(Ft.clone(n[0])),1===n[0].length&&n[0].push(0),1<n.length&&(1===n[r=n.length-1].length&&n[r].push(1));for(var h=n[0][1],l=1,c=n.length;l<c-1;l++){var u=n[l];if(1<u.length)h=u[1];else{for(var _=l+1,f=n[n.length-1][1];_<c-1;_++){var d=n[_];if(1<d.length){f=d[1];break}}for(var p=(f-h)/(_-l+1),v=l;v<_;v++){n[v].push(h+p*(v+1-l))}l=_}}for(var y=1,g=n.length;y<g;y++){var m=n[y],E=n[y-1];m[1]<E[1]&&(m[1]=E[1])}for(var T=0,O=n.length;T<O;T++){var M=n[T];if(1<M[1]){n.splice(T);var A,x,R,S,b,k=n[T-1];k&&k[1]<1&&(A=M[0][0]-k[0][0],x=M[0][1]-k[0][1],R=M[0][2]-k[0][2],S=M[0][3]-k[0][3],b=(1-k[1])/(M[1]-k[1]),n.push([[M[0][0]+A*b,M[0][1]+x*b,M[0][2]+R*b,M[0][3]+S*b],1]));break}}for(var I=n.length-1;0<=I;I--){var N=n[I];if(N[1]<0){n.splice(0,I+1);var w,D,P,C,L,F=n[I];F&&0<F[1]&&(w=F[0][0]-N[0][0],D=F[0][1]-N[0][1],P=F[0][2]-N[0][2],C=F[0][3]-N[0][3],L=-N[1]/(F[1]-N[1]),n.unshift([[N[0][0]+w*L,N[0][1]+D*L,N[0][2]+P*L,N[0][3]+C*L],0]));break}}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n}var At={parseGradient:function(t){var e,r,n,i=q.gradient.exec(t);if(i){var a,o,s,h,l,c,u,_,f,d,p,v={k:i[1]};"linear"===v.k?(a=/(-?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(i[2]))?v.d=(e=a[0].toLowerCase(),n=180,"to top"===e?n=0:"to top right"===e?n=45:"to right"===e?n=90:"to bottom right"===e?n=135:"to bottom"===e||("to bottom left"===e?n=225:"to left"===e?n=270:"to top left"===e?n=315:(r=/(-?[\d.]+)deg/.exec(e))&&(n=parseFloat(r[1]))),n%360):(o=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)/.exec(i[2]),v.d=o?[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])]:180):"radial"===v.k?(v.s=-1<i[2].indexOf("circle")?"circle":"ellipse",(s=/(closest|farthest)-(side|corner)/i.exec(i[2]))?v.z=s[0].toLowerCase():(h=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)(?:\s+([\d.]+))?/.exec(i[2]))?(v.z=[parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]),parseFloat(h[4])],gt(h[5])?v.z.push(1):v.z.push(parseFloat(h[5]))):v.z="farthest-corner",(l=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(c=Ot(l[1]),u=l[2]?Ot(l[2]):c,v.p=[c,u]):v.p=[[50,Et],[50,Et]]):"conic"===v.k&&(_=/(-?[\d.]+deg)/i.exec(i[2]),v.d=_?parseFloat(_[0])%360:0,(f=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(d=Ot(f[1]),p=f[2]?Ot(f[2]):d,v.p=[d,p]):v.p=[[50,Et],[50,Et]]);var y=i[2].match(/(-?[\d.]+(px|%))?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*(-?[\d.]+(px|%))?/gi);return v.v=y.map(function(t){var e=/((?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\)))/i.exec(t),r=[yt(e[1])],n=/-?[\d.]+(?:px|%)/.exec(t);return n&&(r[1]=[parseFloat(n[0])],/%$/.test(n[0])?r[1][1]=Et:r[1][1]=mt),r}),v}},getLinear:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m;if(Array.isArray(e)){w=r+e[0]*o,D=n+e[1]*s,P=r+e[2]*o,C=n+e[3]*s;var E=Mt(t,Math.sqrt(Math.pow(P-w,2)+Math.pow(C-D,2)))}else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var T=Math.max(o,s),O=(l=T,c=i,u=a,v=270<=(h=e)?(_=Tt(360-h),f=c+Math.sin(_)*l,d=u+Math.cos(_)*l,p=c-Math.sin(_)*l,u-Math.cos(_)*l):180<=h?(y=Tt(h-180),f=c+Math.sin(y)*l,d=u-Math.cos(y)*l,p=c-Math.sin(y)*l,u+Math.cos(y)*l):90<=h?(g=Tt(180-h),f=c-Math.sin(g)*l,d=u-Math.cos(g)*l,p=c+Math.sin(g)*l,u+Math.cos(g)*l):(m=Tt(h),f=c-Math.sin(m)*l,d=u+Math.cos(m)*l,p=c+Math.sin(m)*l,u-Math.cos(m)*l),[f,d,p,v]);T*=2;var M=Z.dotProduct(r-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/T,A=Z.dotProduct(r+o-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/T,x=Z.dotProduct(r+o-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/T,R=Z.dotProduct(r-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/T,S=M,b=M,S=Math.min(S,Math.min(A,Math.min(x,R))),b=Math.max(b,Math.max(A,Math.max(x,R))),k=S/T,I=O[2]-O[0],N=O[3]-O[1],w=O[0]+I*k,D=O[1]+N*k,P=O[2]-I*k,C=O[3]-N*k;E=Mt(t,b-S)}return{x1:w,y1:D,x2:P,y2:C,stop:E}},getRadial:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k,I=Pt((h=e,l=r,c=n,u=o-i,_=s-a,f=i,d=a,p=o,v=s,A=0,Array.isArray(l)?(y=f+l[0]*u,g=d+l[1]*_,l[4]<=0?M=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(O=(T=Math.sqrt(Math.pow((l[2]-l[0])*u,2)+Math.pow((l[3]-l[1])*_,2)))*l[4],M=Math.max(T,O),A=l[2]>=l[0]?l[3]>=l[1]?Math.asin((l[3]-l[1])*_/T):-Math.asin((l[1]-l[3])*_/T):l[3]>=l[1]?Tt(180)-Math.asin((l[3]-l[1])*_/T):Math.asin((l[1]-l[3])*_/T)-Tt(180))):(y=c[0][1]===mt?f+c[0][0]:f+c[0][0]*u*.01,g=c[1][1]===mt?d+c[1][0]:d+c[1][0]*_*.01,m=1,"closest-corner"===l&&"circle"===h?M=y<=f||p<=y||g<=d||v<=g?Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(T=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,Math.sqrt(Math.pow(T,2)+Math.pow(O,2))):"closest-side"===l||"closest-corner"===l?y<=f||p<=y||g<=d||v<=g?M=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(E=1,T=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,M=Math.min(T,O),"closest-corner"===l&&(E=Math.sqrt(2)),T*=E,O*=E,M*=E):(T=y<=f?f-y+u:p<=y?y-p+u:y<f+.5*u?p-y:y-f,O=g<=d?d-g+_:v<=g?g-v+_:g<d+.5*_?v-g:g-d,M=Math.max(T,O),"farthest-side"!==l&&(m=Math.sqrt(2)),T*=m,O*=m,M*=m)),"circle"===h&&(T=O=M),[y,g,M,T,O,A]),6),N=I[0],w=I[1],D=I[2],P=I[3],C=I[4],L=I[5],F=1,B=1;return P===C&&!L||(S=[1,0,0,1,0,0],L&&(x=Math.sin(L),S=[R=Math.cos(L),x,-x,R,0,0]),P!==D&&(b=[F=P/D,0,0,1,0,0],S=Lt.multiply(S,b)),C!==D&&(k=[1,0,0,B=C/D,0,0],S=Lt.multiply(S,k))),{cx:N,cy:w,r:D,stop:Mt(t,D),scx:F,scy:B,matrix:S,d:L}},getConic:function(t,e,r,n,i,a,o){var s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,h=Pt(function(t,e,r,n,i,a){var o,s,h,l,c,u=i-r,_=a-n;o=e[0][1]===mt?r+e[0][0]:r+e[0][0]*u*.01;s=e[1][1]===mt?n+e[1][0]:n+e[1][0]*_*.01;l=r+.5*u<=o?o-r:i-o;c=n+.5*_<=s?s-n:a-s;return h=Math.sqrt(Math.pow(l,2)+Math.pow(c,2)),[o,s,h,t]}(e,r,n,i,a,o),4),l=h[0],c=h[1],u=h[2];return u<<=1,{cx:l,cy:c,r:u*=s,deg:h[3],stop:Mt(t,1)}}},xt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",alignSelf:"auto",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,scaleX:1,scaleY:1,skewX:0,skewY:0,rotateZ:0,filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal"},Rt={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},St=[],bt=[];Object.keys(xt).forEach(function(t){bt.push(t);var e=xt[t];St.push({k:t,v:e})});var kt=[],It=[];Object.keys(Rt).forEach(function(t){It.push(t);var e=Rt[t];kt.push({k:t,v:e})});var Nt={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto"},wt=[];Object.keys(Nt).forEach(function(t){wt.push(t)});var Dt={DOM:xt,GEOM:Rt,isValid:function(t){return xt.hasOwnProperty(t)||Rt.hasOwnProperty(t)},DOM_KEY_SET:bt,GEOM_KEY_SET:It,DOM_ENTRY_SET:St,GEOM_ENTRY_SET:kt,INHERIT:Nt,INHERIT_KEY_SET:wt},Ht=Ft.isNil;function Gt(t,e,r,n){Ht(t.flexGrow)&&(t.flexGrow=e||0),Ht(t.flexShrink)&&(t.flexShrink=r||0),Ht(t.flexBasis)&&(t.flexBasis=n||0)}var Yt={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderWidthTop","borderWidthRight","borderWidthBottom","borderWidthLeft"],borderColor:["borderColorTop","borderColorRight","borderColorBottom","borderColorLeft"],borderStyle:["borderStyleTop","borderStyleRight","borderStyleBottom","borderStyleLeft"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],scale:["scaleX","scaleY"],rotate:["rotateZ"],skew:["skewX","skewY"],toFull:function(n,t){var e,r,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O=this,M=n[t];if("background"===t)Ht(n.backgroundImage)&&((e=q.gradient.exec(M))?(n.backgroundImage=e[0],M=M.replace(e[0],"")):(r=q.img.exec(M))&&(n.backgroundImage=r[0],M=M.replace(r[0],""))),!Ht(n.backgroundRepeat)||(i=/(no-)?repeat(-[xy])?/i.exec(M))&&(n.backgroundRepeat=i[0].toLowerCase()),!Ht(n.backgroundColor)||(a=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(M))&&(n.backgroundColor=a[0],M=M.replace(a[0],"")),!Ht(n.backgroundPosition)||(o=M.match(q.position))&&(n.backgroundPosition=o.join(" "),this.toFull(n,"backgroundPosition"));else if("flex"===t){"none"===M?Gt(n,0,0,"auto"):"auto"===M?Gt(n,1,1,"auto"):/^[\d.]+$/.test(M)?Gt(n,Math.max(0,parseFloat(M)),1,0):/^[\d.]+px$/i.test(M)?Gt(n,1,1,0):/^[\d.]+%$/.test(M)?Gt(n,1,1,M):/^[\d.]+\s+[\d.]+$/.test(M)?(s=M.split(/\s+/),Gt(n,s[0],s[1],0)):/^[\d.]+\s+[\d.]+%$/.test(M)?(h=M.split(/\s+/),Gt(n,h[0],1,h[1])):Gt(n,0,1,"auto")}else if("borderRadius"===t){1===(M=M.toString().split("/")).length&&(M[1]=M[0]);for(var A=0;A<2;A++){var x=M[A].toString().split(/\s+/);0===x.length?M[A]=[0,0,0,0]:1===x.length?M[A]=[x[0],x[0],x[0],x[0]]:2===x.length?M[A]=[x[0],x[1],x[0],x[1]]:3===x.length?M[A]=[x[0],x[1],x[2],x[1]]:M[A]=x.slice(0,4)}this[t].forEach(function(t,e){Ht(n[t])&&(n[t]=M[0][e]+" "+M[1][e])})}else{"backgroundPosition"===t?(Array.isArray(M)||(M=[M]),l=this[t].map(function(t){return Ht(n[t])}),M.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),O[t].forEach(function(t,e){l[e]&&(n[t]=n[t]||[],n[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(c=M.toString().split(/\s*,\s*/)).length&&(c[1]=c[0]),this[t].forEach(function(t,e){Ht(n[t])&&(n[t]=c[e])})):"margin"===t||"padding"===t?(y=n,m=this[g=t],T=y[g],Ht(T)||(E=T.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi))&&(1===E.length?E[3]=E[2]=E[1]=E[0]:2===E.length?(E[2]=E[0],E[3]=E[1]):3===E.length&&(E[3]=E[1]),m.forEach(function(t,e){Ht(y[t])&&(y[t]=E[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(v=(u=n)[_=t],Ht(v)||(Ht(u[_+"Width"])&&(f=/\b[\d.]+px\b/i.exec(v),u[_+"Width"]=f?f[0]:0),Ht(u[_+"Style"])&&(d=/\b(solid|dashed|dotted)\b/i.exec(v),u[_+"Style"]=d?d[1]:"solid"),Ht(u[_+"Color"])&&((p=/#[0-9a-f]{3,8}/i.exec(v))&&-1<[4,7,9].indexOf(p[0].length)?u[_+"Color"]=p[0]:/\btransparent\b/i.test(v)?u[_+"Color"]="transparent":(p=/rgba?\s*\(.+\)/i.exec(v),u[_+"Color"]=p?p[0]:"transparent")))):this[t]&&this[t].forEach(function(t){Ht(n[t])&&(n[t]=M)})}}},Wt={list:[],data:{},charWidth:{}},Ut=d.STYLE_KEY,Xt=Ut.FONT_SIZE,Kt=Ut.FONT_FAMILY,zt=Ut.FONT_WEIGHT,Vt={},jt={},$t=[],qt=[];function Zt(t,e,r,n,i){var a,o;return(o=t?n[t]?n[t]:n[t]=document.createElement("canvas"):(a=n===Vt?$t:qt).length?a.pop():document.createElement("canvas")).width=e,o.height=r,"undefined"!=typeof karas&&karas.debug&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",n===Vt?"canvas":"webgl"),t&&o.setAttribute("key",t),i&&o.setAttribute("message",i),document.body.appendChild(o)),{canvas:o,ctx:n===Vt?o.getContext("2d"):o.getContext("webgl")||o.getContext("experimental-webgl"),draw:function(){},available:!0,release:function(){n===Vt?$t.push(this.canvas):qt.push(this.canvas),this.canvas=null,this.ctx=null}}}var Jt,Qt,te={},ee={measureText:function(){var t=Wt.list,l=Wt.data,c="",u=[],_=[];if(Object.keys(l).forEach(function(t){var e=l[t],r=e.key,n=e.style,i=e.s;if(i)for(var a="position:absolute;font-family:".concat(n[Kt],";font-size:").concat(n[Xt],"px;font-weight:").concat(n[zt]),o=0,s=i.length;o<s;o++){u.push(r);var h=i.charAt(o);_.push(h),c+='<span style="'.concat(a,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}}),c){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=c;for(var r=e.childNodes,n=Wt.charWidth,i=0,a=r.length;i<a;i++){var o=r[i],s=u[i],h=_[i],f=window.getComputedStyle(o,null);n[s][h]=parseFloat(f.width)}t.forEach(function(t){return t.__measureCb()}),Wt.list=[],Wt.data={},document.body.removeChild(e)}},IMG:te,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){var n,i,a,o,t,s;Array.isArray(e)?(n=0,i=e.length,a=[],e.forEach(function(t,e){ee.measureImg(t,function(t){a[e]=t,++n===i&&r(a)})})):2===(o=te[e]=te[e]||{state:0,task:[]}).state?r&&r(o):1===o.state?r&&o.task.push(r):(o.state=1,r&&o.task.push(r),(t=new Image).onload=function(){o.state=2,o.success=!0,o.width=t.width,o.height=t.height,o.source=t,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},t.onerror=function(t){ee.error("Measure img failed: "+e),o.state=2,o.success=!1,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},"data:"===e.substr(0,5)||(s=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&location.hostname!==s[1]&&(t.crossOrigin="anonymous"),t.src=e,"undefined"!=typeof karas&&karas.debug&&document.body.appendChild(t))},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Qt=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(ee.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),ee.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},ne.toString=function(){return Qt.toString()},ne),cancelAnimationFrame:(Jt=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(ee.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),ee.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},re.toString=function(){return Jt.toString()},re),now:function(){return"undefined"!=typeof performance?(ee.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(ee.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&Vt.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,n){return Zt(r,t,e,Vt,n)},releaseCacheCanvas:function(t){$t.push(t)},delCacheCanvas:function(t){t&&delete Vt[t]},hasCacheWebgl:function(t){return t&&jt.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,n){return Zt(r,t,e,jt,n)},releaseCacheWebgl:function(t){qt.push(t)},delCacheWebgl:function(t){t&&delete jt[t]},isDom:function(t){if(t){if(Ft.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if(Ft.isFunction(t.getElementsByTagName))return!0}return!1}};function re(t){return Jt.apply(this,arguments)}function ne(t){return Qt.apply(this,arguments)}var ie=d.STYLE_KEY,ae=[[ie.BACKGROUND_COLOR],[ie.BORDER_BOTTOM_COLOR],[ie.BORDER_LEFT_COLOR],[ie.BORDER_RIGHT_COLOR],[ie.BORDER_TOP_COLOR],[ie.COLOR]],oe=[[ie.FONT_SIZE],[ie.BORDER_BOTTOM_WIDTH],[ie.BORDER_LEFT_WIDTH],[ie.BORDER_RIGHT_WIDTH],[ie.BORDER_TOP_WIDTH],[ie.LEFT],[ie.TOP],[ie.RIGHT],[ie.BOTTOM],[ie.FLEX_BASIS],[ie.WIDTH],[ie.HEIGHT],[ie.LINE_HEIGHT],[ie.MARGIN_BOTTOM],[ie.MARGIN_LEFT],[ie.MARGIN_TOP],[ie.MARGIN_RIGHT],[ie.PADDING_TOP],[ie.PADDING_RIGHT],[ie.PADDING_BOTTOM],[ie.PADDING_LEFT],[ie.STROKE_WIDTH],[ie.STROKE_MITERLIMIT],[ie.LETTER_SPACING]],se=[[ie.BACKGROUND_IMAGE],[ie.FILL],[ie.STROKE]],he=[[ie.BORDER_TOP_LEFT_RADIUS],[ie.BORDER_TOP_RIGHT_RADIUS],[ie.BORDER_BOTTOM_RIGHT_RADIUS],[ie.BORDER_BOTTOM_LEFT_RADIUS]],le={};ae.forEach(function(t){le[t]=!0});var ce={};oe.forEach(function(t){ce[t]=!0});var ue={};he.forEach(function(t){ue[t]=!0});var _e={};se.forEach(function(t){_e[t]=!0});var fe=[[ie.TRANSLATE_X],[ie.TRANSLATE_Y],[ie.SKEW_X],[ie.SKEW_Y],[ie.SCALE_X],[ie.SCALE_Y],[ie.ROTATE_Z]],de={};fe.forEach(function(t){de[t]=!0});var pe,ve,ye={KEY_COLOR:ae,KEY_EXPAND:fe,KEY_GRADIENT:se,KEY_LENGTH:oe,KEY_RADIUS:he,COLOR_HASH:le,EXPAND_HASH:de,GRADIENT_HASH:_e,LENGTH_HASH:ce,RADIUS_HASH:ue,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},ge=Dt.DOM,me=Dt.GEOM,Ee=R.INHERIT,Te=d.STYLE_KEY,Oe={},Me=[],Ae=c({},Te.POINTER_EVENTS,!0),xe=(c(pe={},Te.TRANSFORM,!0),c(pe,Te.TRANSLATE_X,!0),c(pe,Te.TRANSLATE_Y,!0),c(pe,Te.SKEW_X,!0),c(pe,Te.SKEW_Y,!0),c(pe,Te.SCALE_X,!0),c(pe,Te.SCALE_Y,!0),c(pe,Te.ROTATE_Z,!0),c(pe,Te.COLOR,!0),c(pe,Te.FONT_STYLE,!0),c(pe,Te.STROKE_WIDTH,!0),c(pe,Te.FILL,!0),c(pe,Te.STROKE_DASHARRAY,!0),c(pe,Te.STROKE_LINECAP,!0),c(pe,Te.STROKE_LINEJOIN,!0),c(pe,Te.STROKE_MITERLIMIT,!0),c(pe,Te.BACKGROUND_COLOR,!0),c(pe,Te.BACKGROUND_IMAGE,!0),c(pe,Te.BACKGROUND_POSITION_X,!0),c(pe,Te.BACKGROUND_POSITION_Y,!0),c(pe,Te.BACKGROUND_REPEAT,!0),c(pe,Te.BACKGROUND_SIZE,!0),c(pe,Te.STROKE,!0),c(pe,Te.BORDER_BOTTOM_COLOR,!0),c(pe,Te.BORDER_LEFT_COLOR,!0),c(pe,Te.BORDER_RIGHT_COLOR,!0),c(pe,Te.BORDER_TOP_COLOR,!0),c(pe,Te.BORDER_TOP_LEFT_RADIUS,!0),c(pe,Te.BORDER_TOP_RIGHT_RADIUS,!0),c(pe,Te.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(pe,Te.BORDER_BOTTOM_LEFT_RADIUS,!0),c(pe,Te.VISIBILITY,!0),c(pe,Te.OPACITY,!0),c(pe,Te.Z_INDEX,!0),c(pe,Te.FILTER,!0),c(pe,Te.BOX_SHADOW,!0),c(pe,Te.OVERFLOW,!0),pe),Re=(c(ve={},Te.FONT_SIZE,!0),c(ve,Te.FONT_WEIGHT,!0),c(ve,Te.FONT_FAMILY,!0),ve),Se={GEOM:Oe,GEOM_KEY_SET:Me,IGNORE:Ae,REPAINT:xe,MEASURE:Re,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Se.addGeom(e,t,r)}):t&&(Oe.hasOwnProperty(t)||Me.push(t),(Oe[t]=Oe[t]||{})[e]=r||!0)}};function be(t,e){return Oe.hasOwnProperty(e)&&Oe[e].hasOwnProperty(t)}Se.isIgnore=function(t){return Ae.hasOwnProperty(t)},Se.isGeom=be,Se.isRepaint=function(t){return xe.hasOwnProperty(t)||be(t)},Se.isMeasure=function(t){return Re.hasOwnProperty(t)},Se.isValid=function(t,e){return!!e&&(!!ge.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!me.hasOwnProperty(e))||!!Oe.hasOwnProperty(e)&&Oe[e].hasOwnProperty(t)))};var ke,Ie,Ne,we=Se.MEASURE_KEY_SET=Object.keys(Re).map(function(t){return parseInt(t)}),De=we.length;Se.isMeasureInherit=function(t){for(var e=0;e<De;e++){var r=we[e];if(t.hasOwnProperty(r)&&t[r][1]===Ee)return!0}return!1},Se.measureInheritList=function(t){for(var e=[],r=0;r<De;r++){var n=we[r];t.hasOwnProperty(n)&&t[n][1]===Ee&&e.push(n)}return e},Se.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Se.addGeom("$circle",["r"]),Se.addGeom("$ellipse",["rx","ry"]),Se.addGeom("$rect",["rx","ry"]),Se.addGeom("$sector",["begin","end","edge","closure"]),Se.addGeom("$polyline",["points","controls","start","end"]),Se.addGeom("$polygon",["points","controls","start","end"]);var Pe=d.STYLE_KEY,Ce=d.STYLE_RV_KEY,Le=d.style2Upper,Fe=d.STYLE_KEY,Be=Fe.POSITION,He=Fe.WIDTH,Ge=Fe.HEIGHT,Ye=Fe.TRANSLATE_X,We=Fe.TRANSLATE_Y,Ue=Fe.SCALE_X,Xe=Fe.SCALE_Y,Ke=Fe.SKEW_X,ze=Fe.SKEW_Y,Ve=Fe.ROTATE_Z,je=Fe.TRANSFORM,$e=Fe.TRANSFORM_ORIGIN,qe=Fe.BACKGROUND_IMAGE,Ze=Fe.BACKGROUND_COLOR,Je=Fe.BACKGROUND_POSITION_X,Qe=Fe.BACKGROUND_POSITION_Y,tr=Fe.BACKGROUND_SIZE,er=Fe.OPACITY,rr=Fe.Z_INDEX,nr=Fe.COLOR,ir=Fe.FONT_SIZE,ar=Fe.FONT_FAMILY,or=Fe.FONT_WEIGHT,sr=Fe.FONT_STYLE,hr=Fe.LINE_HEIGHT,lr=Fe.TEXT_ALIGN,cr=Fe.FILTER,ur=Fe.VISIBILITY,_r=Fe.BOX_SHADOW,fr=Fe.POINTER_EVENTS,dr=Fe.FILL,pr=Fe.STROKE,vr=Fe.STROKE_WIDTH,yr=Fe.STROKE_DASHARRAY,gr=Fe.BORDER_TOP_WIDTH,mr=Fe.BORDER_RIGHT_WIDTH,Er=Fe.BORDER_BOTTOM_WIDTH,Tr=Fe.BORDER_LEFT_WIDTH,Or=Fe.DISPLAY,Mr=Fe.FLEX_DIRECTION,Ar=Fe.FLEX_GROW,xr=Fe.FLEX_SHRINK,Rr=Fe.FLEX_BASIS,Sr=Fe.JUSTIFY_CONTENT,br=Fe.ALIGN_SELF,kr=Fe.ALIGN_ITEMS,Ir=Fe.MATRIX,Nr=Fe.LETTER_SPACING,wr=R.AUTO,Dr=R.PX,Pr=R.PERCENT,Cr=R.NUMBER,Lr=R.INHERIT,Fr=R.DEG,Br=R.RGBA,Hr=R.STRING,Gr=Ft.isNil,Yr=Ft.rgba2int,Wr=Ft.equalArr,Ur=Se.MEASURE_KEY_SET,Xr=Se.isGeom,Kr=Se.GEOM,zr=Se.GEOM_KEY_SET,Vr=ye.COLOR_HASH,jr=ye.LENGTH_HASH,$r=ye.RADIUS_HASH,qr=ye.GRADIENT_HASH,Zr=ye.EXPAND_HASH,Jr=ye.GRADIENT_TYPE,Qr={translateX:Ye,translateY:We,scaleX:Ue,scaleY:Xe,skewX:Ke,skewY:ze,rotateZ:Ve,rotate:Ve};function tn(t,e,r){return"auto"===r?t[e]=[0,wr]:"inherit"===r?t[e]=[0,Lr]:/%$/.test(r)?(r=parseFloat(r)||0,t[e]=[r,Pr]):/px$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Dr]):/deg$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Fr]):(r=parseFloat(r)||0,t[e]=[r,Cr]),e!==Tr&&e!==gr&&e!==mr&&e!==Er&&e!==He&&e!==Ge&&e!==Rr||(t[e][0]=Math.max(t[e][0],0)),t}function en(t,e){t===Ue||t===Xe?e[1]=Cr:t===Ye||t===We?e[1]===Cr&&(e[1]=Dr):e[1]===Cr&&(e[1]=Fr)}function rn(t){for(var e=t[ar].split(","),r="arial",n=0,i=e.length;n<i;n++)if(S.support(e[n])){r=e[n];break}return t[ir]*(S.info[r]||S.info.arial).lhr}function nn(t,e,r){for(t*=.01;e;){var n=e.currentStyle[r];if(n[1]===wr){if(r!==He)break;e=e.domParent}else{if(n[1]===Dr)return t*n[0];n[1]===Pr&&(t*=.01*n[0],e=e.domParent)}}return t}var an=(c(ke={},Pe.POSITION,!0),c(ke,Pe.DISPLAY,!0),c(ke,Pe.BACKGROUND_REPEAT,!0),c(ke,Pe.FLEX_DIRECTION,!0),c(ke,Pe.FLEX_GROW,!0),c(ke,Pe.FLEX_SHRINK,!0),c(ke,Pe.JUSTIFY_CONTENT,!0),c(ke,Pe.ALIGN_ITEMS,!0),c(ke,Pe.ALIGN_SELF,!0),c(ke,Pe.OVERFLOW,!0),c(ke,Pe.MIX_BLEND_MODE,!0),c(ke,Pe.STROKE_LINECAP,!0),c(ke,Pe.STROKE_LINEJOIN,!0),c(ke,Pe.STROKE_MITERLIMIT,!0),c(ke,Pe.FILL_RULE,!0),c(ke,Pe.OPACITY,!0),c(ke,Pe.Z_INDEX,!0),ke),on=(c(Ie={},Pe.COLOR,!0),c(Ie,Pe.BACKGROUND_COLOR,!0),c(Ie,Pe.BORDER_TOP_COLOR,!0),c(Ie,Pe.BORDER_RIGHT_COLOR,!0),c(Ie,Pe.BORDER_BOTTOM_COLOR,!0),c(Ie,Pe.BORDER_LEFT_COLOR,!0),Ie),sn=(c(Ne={},Pe.BORDER_TOP_LEFT_RADIUS,!0),c(Ne,Pe.BORDER_TOP_RIGHT_RADIUS,!0),c(Ne,Pe.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(Ne,Pe.BORDER_BOTTOM_LEFT_RADIUS,!0),c(Ne,Pe.TRANSFORM_ORIGIN,!0),Ne);var hn={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!Ft.isObject(a))return{};var e,_,r,n,i,o,s,h,l,c,u,f,d,p={},v=(a=Ft.extend({},a)).border;if(v&&Yt.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){Yt.toFull(a,t)}),(v=a.borderWidth)&&Yt.toFull(a,"borderWidth"),(v=a.borderColor)&&Yt.toFull(a,"borderColor"),(v=a.borderStyle)&&Yt.toFull(a,"borderStyle"),(v=a.borderRadius)&&Yt.toFull(a,"borderRadius"),(v=a.background)&&Yt.toFull(a,"background"),v=a.backgroundPosition,Gr(v)||Yt.toFull(a,"backgroundPosition"),(v=a.flex)&&Yt.toFull(a,"flex"),v=a.margin,Gr(v)||Yt.toFull(a,"margin"),v=a.padding,Gr(v)||Yt.toFull(a,"padding"),["translate","scale","skew"].forEach(function(t){v=a[t],Gr(v)||Yt.toFull(a,t)}),v=a.rotate,Gr(v)||Yt.toFull(a,"rotate"),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ"].forEach(function(t){var e=a[t];!Gr(e)&&a.transform&&ee.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,r=t.v;Gr(a[e])&&(a[e]=r)}),void 0!==(v=a.backgroundImage)&&(v?Array.isArray(v)?p[qe]=v.map(function(t){return t?q.gradient.test(t)?At.parseGradient(t):q.img.test(t)?q.img.exec(t)[2]:null:null}):q.gradient.test(v)?p[qe]=[At.parseGradient(v)]:q.img.test(v)?p[qe]=[q.img.exec(v)[2]]:p[qe]=[null]:p[qe]=[null]),(v=a.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(v))&&-1<[4,7,9].indexOf(e[0].length)?p[Ze]=[Yr(e[0]),Br]:(e=/rgba?\s*\(.+\)/i.exec(v),p[Ze]=[Yr(e?e[0]:[0,0,0,0]),Br])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){v=a[t],Gr(v)||(t=e?Qe:Je,Array.isArray(v)?v.length?p[t]=v.map(function(t){if(/%$/.test(t)||/px$/i.test(t)||/^-?[\d.]+$/.test(t)){var e=[];return tn(e,0,t),e[0][1]===Cr&&(e[0][1]=Dr),e[0]}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Pr]}):p[t]=[0,Pr]:/%$/.test(v)||/px$/i.test(v)||/^-?[\d.]+$/.test(v)?(tn(p,t,v),(v=p[t])[1]===Cr&&(v[1]=Dr),p[t]=[v]):p[t]=[[{top:0,left:0,center:50,right:100,bottom:100}[v]||0,Pr]])}),v=a.backgroundSize){var y=p[tr]=[];if(Array.isArray(v))v.length?y=v.map(function(t){if(!t)return[[0,wr],[0,wr]];var e=t.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],n=0;n<2;n++){var i=e[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(tn(r,n,i),r[n][1]===Cr&&(r[n][1]=Dr)):"0"===i||0===i?r.push([0,Dr]):"contain"===i||"cover"===i?r.push([i,Hr]):r.push([0,wr])}return r}return[[0,wr],[0,wr]]}):y.push([[0,wr],[0,wr]]);else{var g=v.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(g){1===g.length&&("contain"===g[0]||"cover"===g[0]?g[1]=g[0]:g[1]="auto");for(var m=[],E=0;E<2;E++){var T=g[E];/%$/.test(T)||/px$/i.test(T)||/^-?[\d.]+$/.test(T)?(tn(m,E,T),m[E][1]===Cr&&(m[E][1]=Dr)):"0"===T||0===T?m.push([0,Dr]):"contain"===T||"cover"===T?m.push([T,Hr]):m.push([0,wr])}y.push(m)}else y.push([[0,wr],[0,wr]])}}if(["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];Gr(e)||(p[Pe[Le(t)]]=[Yr(e),Br])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!Gr(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var n=0;n<2;n++){var i=r[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(tn(r,n,i),r[n][1]===Cr&&(r[n][1]=Dr)):r[n]=[0,Dr]}p[Pe[Le(t)]]=r}}),(v=a.transform)&&(_=p[je]=[],(r=(v||"").toString().match(/\w+\(.+?\)/g))&&r.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.indexOf("("),c=t.slice(0,l),u=t.slice(l+1,t.length-1);"matrix"===c?(6<(e=(e=u.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length&&(e=e.slice(0,6)),6===e.length&&_.push([Ir,e])):Qr.hasOwnProperty(c)?(en(r=Qr[c],(n=tn([r,u],1,u))[1]),_.push(n)):{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)&&(1===(i=u.toString().split(/\s*,\s*/)).length&&(i[1]=i[0].slice(0)),a=Pe[Le(c+"X")],o=Pe[Le(c+"Y")],s=tn([a,i[0]],1,i[0]),h=tn([o,i[1]],1,i[1]),en(a,s[1]),en(o,h[1]),_.push(s),_.push(h))})),v=a.transformOrigin,!Gr(v)){var O=p[$e]=[],M=v.toString().match(q.position);if(M){1===M.length&&(M[1]=M[0]);for(var A=0;A<2;A++){var x=M[A];/%$/.test(x)||/px$/i.test(x)||/^-?[\d.]+$/.test(x)?(tn(O,A,x),O[A][1]===Cr&&(O[A][1]=Dr)):(O.push([{top:0,left:0,center:50,right:100,bottom:100}[x],Pr]),Gr(O[A][0])&&(O[A][0]=50))}}else O.push([50,Pr]),O.push([50,Pr])}return["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e,r=a[t];Gr(r)||(e=Qr[t],tn(p,e,r),en(e,p[e]))}),v=a.opacity,Gr(v)||(v=parseFloat(v),isNaN(v)?p[er]=1:(v=Math.max(v,0),v=Math.min(v,1),p[er]=v)),v=a.zIndex,Gr(v)||(p[rr]=parseInt(v)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height","flexBasis"].forEach(function(t){var e=a[t];Gr(e)||(t=Pe[Le(t)],tn(p,t,e),(e=p[t])[1]===Cr&&(e[1]=Dr))}),v=a.color,Gr(v)||(p[nr]="inherit"===v?[[],Lr]:[Yr(v),Br]),!(v=a.fontSize)&&0!==v||("inherit"===v?p[ir]=[0,Lr]:/%$/.test(v)?(n=Math.max(0,parseFloat(v)),p[ir]=n?[n,Pr]:[16,Dr]):p[ir]=[Math.max(0,parseFloat(v))||16,Dr]),v=a.fontWeight,Gr(v)||(p[or]="bold"===v?[700,Cr]:"normal"===v?[400,Cr]:"lighter"===v?[200,Cr]:"inherit"===v?[0,Lr]:[Math.max(0,parseInt(v))||400,Cr]),(v=a.fontStyle)&&(p[sr]="inherit"===v?[0,Lr]:[v,Hr]),(v=a.fontFamily)&&(p[ar]="inherit"===v?[0,Lr]:[v.replace(/['"]/,"").replace(/\s*,\s*/g,","),Hr]),(v=a.textAlign)&&(p[lr]="inherit"===v?[0,Lr]:[v,Hr]),void 0!==(v=a.lineHeight)&&("inherit"===v?p[hr]=[0,Lr]:"normal"===v?p[hr]=[0,wr]:/px$/i.test(v)?p[hr]=[parseFloat(v),Dr]:(i=Math.max(0,parseFloat(v))||"normal",p[hr]="normal"===i?[null,wr]:[i,Cr])),void 0!==(v=a.letterSpacing)&&("inherit"===v?p[Nr]=[0,Lr]:"normal"===v?p[Nr]=[0,Dr]:/px$/i.test(v)?p[Nr]=[parseFloat(v),Dr]:(o=Math.max(0,parseFloat(v))||0,p[Nr]=[o,Dr])),void 0!==(v=a.fill)&&(v?Array.isArray(v)?v.length?p[dr]=v.map(function(t){return t?q.gradient.test(t)?At.parseGradient(t):Yr(t):"none"}):p[dr]=["none"]:q.gradient.test(v)?p[dr]=[At.parseGradient(v)]:p[dr]=[Yr(v)]:p[dr]=["none"]),void 0!==(v=a.stroke)&&(v?Array.isArray(v)?v.length?p[pr]=v.map(function(t){return t?q.gradient.test(t)?At.parseGradient(t):Yr(t):"none"}):p[pr]=["none"]:q.gradient.test(v)?p[pr]=[At.parseGradient(v)]:p[pr]=[Yr(v)]:p[pr]=["none"]),v=a.strokeWidth,Gr(v)||(Array.isArray(v)?v.length?p[vr]=v.map(function(t){var e=[];return tn(e,0,t),e[0][1]===Cr&&(e[0][1]=Dr),e[0]}):p[vr]=[0,Dr]:(tn(s=p[vr]=[],0,v),s[0][1]===Cr&&(s[0][1]=Dr))),v=a.strokeDasharray,Gr(v)||(Array.isArray(v)?p[yr]=v.map(function(t){var e=t.toString().match(/[\d.]+/g);return e?((e=e.map(function(t){return parseFloat(t)})).length%2==1&&e.push(e[e.length-1]),e):[]}):(h=v.toString().match(/[\d.]+/g))?((h=h.map(function(t){return parseFloat(t)})).length%2==1&&h.push(h[h.length-1]),p[yr]=[h]):p[yr]=[[]]),void 0!==(v=a.filter)&&(l=null,!(c=/\bblur\s*\(\s*([\d.]+)\s*(?:px)?\s*\)/i.exec(v||""))||(u=parseFloat(c[1])||0)&&(l=[["blur",u]]),p[cr]=l),(v=a.visibility)&&(p[ur]="inherit"===v?[0,Lr]:[v,Hr]),(v=a.pointerEvents)&&(p[fr]="inherit"===v?[0,Lr]:[v,Hr]),void 0!==(v=a.boxShadow)&&(f=null,(d=(v||"").match(/(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?\s*)?(-?[\d.]+(px)?\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&d.forEach(function(t){var e=/(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?\s*)?(-?[\d.]+(?:px)?\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){f=f||[];for(var r=[e[1],e[2],e[3]||0,e[4]||0,e[5]||"#000",e[6]||"outset"],n=0;n<4;n++)tn(r,n,r[n]),1<n&&r[n][0]<0&&(r[n]=0),r[n][1]===Cr&&(r[n]=r[n][0]);r[4]=Yr(r[4]),f.push(r)}}),p[_r]=f),["position","display","flexDirection","justifyContent","alignItems","alignSelf","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","flexGrow","flexShrink","zIndex"].forEach(function(t){a.hasOwnProperty(t)&&(p[Pe[Le(t)]]=a[t])}),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;a.hasOwnProperty(t)&&(e=a[t],p[Pe[Le(t)]]=Array.isArray(e)?e:[e])}),zr.forEach(function(t){a.hasOwnProperty(t)&&(p[t]=a[t])}),p},computeMeasure:function(t,r){var n=t.currentStyle,i=t.computedStyle,e=t.parent,a=!r&&e.computedStyle;Ur.forEach(function(t){var e=n[t];e[1]===Lr?i[t]=r?Dt.INHERIT[Ce[t]]:a[t]:e[1]===Pr?i[t]=r?Dt.INHERIT[Ce[t]]:a[t]*e[1]*.01:i[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,n=t.computedStyle,i=t.parent,a=!i,o=i&&i.computedStyle;[gr,mr,Er,Tr].forEach(function(t){n[t]=r[t][1]===Dr?Math.max(0,r[t][0]):0}),[Be,Or,Mr,Sr,kr,br,Ar,xr].forEach(function(t){n[t]=r[t]});var s=r[lr];s[1]===Lr?n[lr]=a?"left":o[lr]:n[lr]=s[0];var h=r[hr];h[1]===Lr?n[hr]=a?rn(n):o[hr]:h[1]===Dr?n[hr]=Math.max(h[0],0)||rn(n):h[1]===Cr?n[hr]=Math.max(h[0],0)*n[ir]||rn(n):n[hr]=rn(n);var l=r[Nr];l[1]===Lr?n[Nr]=a?0:o[Nr]:n[Nr]=l[0]},setFontStyle:function(t){var e=t[ir];return(t[sr]||"normal")+" "+(t[or]||"400")+" "+e+"px/"+e+"px "+(t[ar]||"arial")},getBaseLine:function(t){for(var e=t[ir],r=t[ar].split(","),n="arial",i=0,a=r.length;i<a;i++)if(S.support(r[i])){n=r[i];break}var o=e*(S.info[n]||S.info.arial).lhr;return.5*(t[hr]-o)+e*(S.info[r]||S.info.arial).blr},calRelative:function(t,e,r,n,i){return r[1]===wr?r=0:-1<[Dr,Cr,Fr,Br,Hr].indexOf(r[1])?r=r[0]:r[1]===Pr&&(r=nn(r[0],n,i?He:Ge)),r},calAbsolute:function(t,e,r,n){return r[1]===wr?r=0:-1<[Dr,Cr,Fr,Br,Hr].indexOf(r[1])?r=r[0]:r[1]===Pr&&(r=r[0]*n*.01),r},equalStyle:function(t,e,r,n){if(!e||!r)return e===r;if(t===je){if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var o=e[i],s=r[i];if(o[0]!==s[0])return!1;if(!Wr(o[1],s[1]))return!1}return!0}if(t===cr){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!Wr(e[h],r[h]))return!1}if(t===tr){if(e.length!==r.length)return!1;for(var c=0,u=e.length;c<u;c++){var _=e[c],f=r[c];if(_[0][0]!==f[0][0]||_[0][1]!==f[0][1]||_[1][0]!==f[1][0]||_[1][1]!==f[1][1])return!1}return!0}if(t===$e||$r.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Je||t===Qe||jr.hasOwnProperty(t)||Zr.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===_r)return Wr(e,r);if(Vr.hasOwnProperty(t))return e[1]===r[1]&&Wr(e[0],r[0]);if(qr.hasOwnProperty(t)&&e.k===r.k&&Jr.hasOwnProperty(e.k)){var d=e.v,p=r.v;if(e.d!==r.d||d.length!==p.length)return!1;for(var v=0,y=d.length;v<y;v++){var g=d[v],m=p[v];if(g.length!==m.length)return!1;for(var E=0;E<4;E++)if(g[0][E]!==m[0][E])return!1;if(1<g.length&&(g[1][0]!==m[1][0]||g[1][1]!==m[1][1]))return!1}return!0}return Xr(n.tagName,t)&&(n.isMulti||Array.isArray(e)&&Array.isArray(r))?Wr(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[Be];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){for(var r={},n=0,i=(e=e||Object.keys(t).map(function(t){return Kr.hasOwnProperty(t)||(t=parseInt(t)),t})).length;n<i;n++){var a=e[n],o=t[a];if(a===qe)r[a]=o.map(function(t){return t.k?Ft.clone(t):t});else if(a===dr||a===pr)r[a]=o.map(function(t){return t.k?Ft.clone(t):t.slice(0)});else if(a===je){if(o){for(var s=o.slice(0),h=0,l=s.length;h<l;h++)s[h]=s[h].slice(0),s[h][1]=s[h][1].slice(0);r[a]=s}}else if(a===_r)o&&(o=o.map(function(t){var e=t.slice(0);return e[4]=e[4].slice(0),e}),r[a]=o);else if(an.hasOwnProperty(a))r[a]=o;else if(Kr.hasOwnProperty(a))r[a]=Ft.clone(o);else if(o){var c=r[a]=o.slice(0);if(a===Je||a===Qe)for(var u=0,_=c.length;u<_;u++)c[u]=c[u].slice(0);else if(a===tr)for(var f=0,d=c.length;f<d;f++)c[f]=c[f].slice(0),c[f][0]=c[f][0].slice(0),c[f][1]=c[f][1].slice(0);else if(on.hasOwnProperty(a))c[0]=c[0].slice(0);else if(sn.hasOwnProperty(a))c[0]=c[0].slice(0),c[1]=c[1].slice(0);else if(a===je)for(var p=0,v=c.length;p<v;p++)c[p]=c[p].slice(0)}}return r}},ln=d.STYLE_KEY,cn=ln.COLOR,un=ln.FONT_WEIGHT,_n=ln.FONT_FAMILY,fn=ln.FONT_SIZE,dn=ln.FONT_STYLE,pn=ln.LETTER_SPACING,vn=function(){function a(t,e,r,n,i){g(this,a),this.__parent=t,this.__x=e,this.__y=r,this.__width=n,this.__content=i,this.__virtualDom={}}return l(a,[{key:"render",value:function(t,e,r,n,i,a,o,s){var h=this.content,l=this.x,c=this.y,u=this.parent,_=u.ox,f=u.oy;c+=hn.getBaseLine(r),l+=_+i,c+=f+a;var d,p=r[pn],v=0,y=h.length;if(t===Ct.CANVAS)if(p)for(;v<y;v++)e.fillText(h.charAt(v),l,c),l+=s[o+v]+p;else e.fillText(h,l,c);else t===Ct.SVG&&(d=[["x",l],["y",c],["fill",n[cn]],["font-family",r[_n]],["font-weight",r[un]],["font-style",r[dn]],["font-size",r[fn]+"px"]],p&&d.push(["letter-spacing",p]),this.__virtualDom={type:"item",tagName:"text",props:d,content:Ft.encodeHtml(h)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return hn.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),a}(),yn=d.STYLE_KEY,gn=yn.DISPLAY,mn=yn.LINE_HEIGHT,En=yn.FONT_SIZE,Tn=yn.FONT_FAMILY,On=yn.FONT_WEIGHT,Mn=yn.COLOR,An=yn.VISIBILITY,xn=yn.TEXT_ALIGN,Rn=yn.LETTER_SPACING,Sn=function(){t(n,x);var r=e(n);function n(t){var e;return g(this,n),(e=r.call(this)).__content=Ft.isNil(t)?"":t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return l(n,[{key:"__computeMeasure",value:function(t,e){var r=this.content,n=this.computedStyle,i=this.charWidthList;i.splice(0),t===Ct.CANVAS&&(e.font=hn.setFontStyle(n));for(var a=this.__key=n[En]+","+n[Tn]+","+n[On],o=Wt.data[a]=Wt.data[a]||{key:a,style:n,hash:{},s:[]},s=Wt.charWidth[a]=Wt.charWidth[a]||{},h=0,l=!1,c=0,u=r.length;c<u;c++){var _=r.charAt(c),f=void 0;s.hasOwnProperty(_)?(f=s[_],i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):t===Ct.CANVAS?(f=s[_]=e.measureText(_).width,i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):(o.hash.hasOwnProperty(_)||(o.s+=_),o.hash[_]=!0,i.push(-1),l=!0)}this.__textWidth=h,l&&Wt.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,n=this.__key,i=Wt.charWidth[n],a=0,o=0,s=r.length;o<s;o++){r[o]<0&&(a+=t=r[o]=i[e.charAt(o)],this.__charWidth=Math.max(this.charWidth,t))}this.__textWidth=a}},{key:"__layout",value:function(t,e){var r=this,n=t.x,i=t.y,a=t.w;this.__x=this.__sx1=n,this.__y=this.__sy1=i;var o=this.isDestroyed,s=this.content,h=this.computedStyle,l=this.lineBoxes,c=this.charWidthList;if(!o&&"none"!==h[gn]){this.__ox=this.__oy=0,l.splice(0);for(var u,_,f,d,p=0,v=0,y=0,g=s.length,m=0,E=h[mn],T=h[Rn];v<g;){(y+=c[v]+T)===a?(u=new vn(this,n,i,y,s.slice(p,v+1)),l.push(u),m=Math.max(m,y),i+=E,v=p=v+1,y=0):a<y?(_=void 0,_=v===p?(v=p+1,y):y-c[v],f=new vn(this,n,i,_,s.slice(p,v)),l.push(f),m=Math.max(m,_),i+=E,p=v,y=0):v++}if(p<g&&p<v){for(y=0,v=p;v<g;v++)y+=c[v]+T;var O=new vn(this,n,i,y,s.slice(p,g));l.push(O),m=Math.max(m,y),i+=E}this.__width=m,this.__height=i-t.y,e||(d=h[xn],-1<["center","right"].indexOf(d)&&l.forEach(function(t){var e=r.__width-t.width;0<e&&t.__offsetX("center"===d?.5*e:e)}))}}},{key:"__offsetX",value:function(e,t){ot(at(n.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){ot(at(n.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;e===Ct.SVG&&(this.__virtualDom={type:"text",children:[]});var h,l,c=this.isDestroyed,u=this.computedStyle,_=this.lineBoxes,f=this.cacheStyle,d=this.charWidthList;if(c||"none"===u[gn]||"hidden"===u[An])return!1;e===Ct.CANVAS&&(h=hn.setFontStyle(u),r.font!==h&&(r.font=h),l=f[Mn],r.fillStyle!==l&&(r.fillStyle=l));var p=0;return _.forEach(function(t){t.render(e,r,u,f,o,s,p,d),p+=t.content.length}),e===Ct.SVG&&(this.virtualDom.children=_.map(function(t){return t.virtualDom})),!0}},{key:"__deepScan",value:function(t){t(this)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes;if(!t.length)return 0;var e=t[t.length-1];return e.y-this.y+e.baseLine}},{key:"currentStyle",get:function(){return this.parent.currentStyle}},{key:"computedStyle",get:function(){return this.parent.computedStyle}},{key:"cacheStyle",get:function(){return this.parent.__cacheStyle}},{key:"bbox",get:function(){if(this.content){var t=this.sx,e=this.sy;return[t,e,t+this.width,e+this.height]}}}]),n}();Sn.prototype.__renderByMask=Sn.prototype.render;var bn={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a];if(Array.isArray(s)){i=a;break}}t.moveTo(e[i][0]+r,e[i][1]+n);for(var h=i+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+n):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n,c[4]+r,c[5]+n))}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=0,r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){e=r;break}}for(var a="M"+t[e][0]+","+t[e][1],o=e+1,s=t.length;o<s;o++){var h=t[o];Array.isArray(h)&&(2===h.length?a+="L"+h[0]+","+h[1]:4===h.length?a+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(a+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return a},canvasLine:function(t,e,r,n,i,a,o,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(a[0]+h,a[1]+l,o[0]+h,o[1],n+h,i+l),2):2===s?(t.quadraticCurveTo(o[0]+h,o[1]+l,n+h,i+l),2):1===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,n+h,i+l),2):(t.lineTo(n+h,i+l),1)},svgLine:function(t,e,r,n,i,a,o){return 3===o?"M"+t+","+e+"C"+i[0]+","+i[1]+" "+a[0]+","+a[1]+" "+r+","+n:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+n:1===o?"M"+t+","+e+"Q"+i[0]+","+i[1]+" "+r+","+n:"M"+t+","+e+"L"+r+","+n}};function kn(t,e,r,n){var i=r-t,a=n-e,o=Math.atan(Math.abs(a)/Math.abs(i));return i<0&&0<=a?Math.PI-o:i<0&&a<0?o-Math.PI:0<=i&&0<=a?o:-o}function In(t){var e=Math.sin(t),r=Math.cos(t),n=Lt.identity();return n[0]=n[3]=r,n[1]=e,n[2]=-e,n}function Nn(t,e){var r=Pt(t,6),n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],h=r[5],l=Pt(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=(a-n)*(h-i)-(s-n)*(o-i),v=(_-c)*(l[5]-u)-(d-c)*(f-u);return 0<p&&v<0||p<0&&0<v}var wn={exchangeOrder:function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g=(c=Pt(t,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=[0,1,2],f<u&&f<p?(u=(r=[f,d,u,_])[0],_=r[1],f=r[2],d=r[3],y[0]=1,y[1]=0):p<f&&p<u&&(u=(n=[p,v,u,_])[0],_=n[1],p=n[2],v=n[3],y[0]=2,y[2]=0),u===f?d<_&&(u=(i=[f,d,u,_])[0],_=i[1],f=i[2],d=i[3],a=y[0],y[0]=y[1],y[1]=a):u===p&&v<_&&(u=(o=[p,v,u,_])[0],_=o[1],p=o[2],v=o[3],s=y[0],y[0]=y[2],y[2]=s),(f-u)*(v-_)-(p-u)*(d-_)<0&&(f=(h=[p,v,f,d])[0],d=h[1],p=h[2],v=h[3],l=y[1],y[1]=y[2],y[2]=l),[u,_,f,d,p,v,y]),m=Pt(g,7),E=m[0],T=m[1],O=m[2],M=m[3],A=m[4],x=m[5],R=Pt(function(t,e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,m[6]),6);return[[E,T,O,M,A,x],[R[0],R[1],R[2],R[3],R[4],R[5]]]},isOverflow:Nn,transform:function(t,e){var r,n=Pt(t,6),i=n[0],a=n[1],o=n[2],s=n[3],h=n[4],l=n[5],c=Pt(e,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=Nn(t,e),g=Lt.identity();g[4]=-i,g[5]=-a;var m=kn(i,a,o,s);0!==m&&(r=In(-m),g=Lt.multiply(r,g));var E=Bt.pointsDistance(i,a,o,s),T=Bt.pointsDistance(u,_,f,d),O=Lt.identity();O[4]=-u,O[5]=-_;var M=m=kn(u,_,f,d);0!==m&&(r=In(-m),O=Lt.multiply(r,O));var A=Math.abs(Lt.calPoint([h,l],g)[1]),x=Math.abs(Lt.calPoint([p,v],O)[1]);E===T&&A===x||(r=Lt.identity(),E!==T&&(r[0]=T/E),A!==x&&(r[3]=x/A),g=Lt.multiply(r,g)),O=g;var R=Pt(Lt.calPoint([i,a],O),2),S=R[0],b=R[1],k=Pt(Lt.calPoint([o,s],O),2),I=k[0],N=k[1],w=Pt(Lt.calPoint([h,l],O),2),D=w[0],P=w[1],C=Bt.pointsDistance(S,b,I,N),L=Bt.pointsDistance(S,b,D,P),F=Bt.pointsDistance(D,P,I,N),B=Bt.pointsDistance(u,_,f,d),H=Bt.pointsDistance(u,_,p,v),G=Bt.pointsDistance(p,v,f,d),Y=Bt.angleBySide(F,C,L),W=Bt.angleBySide(G,B,H);return Y!==W&&((r=Lt.identity())[2]=Math.tan(Y-.5*Math.PI)+Math.tan(.5*Math.PI-W),g=Lt.multiply(r,g)),y&&(g[1]=-g[1],g[3]=-g[3],g[5]=-g[5]),(r=0!==M?In(M):Lt.identity())[4]=u,r[5]=_,g=Lt.multiply(r,g)}},Dn={matrix:Lt,tar:wn,geom:Bt},Pn=d.STYLE_KEY,Cn=Pn.TRANSLATE_X,Ln=Pn.TRANSLATE_Y,Fn=Pn.SCALE_X,Bn=Pn.SCALE_Y,Hn=Pn.SKEW_X,Gn=Pn.SKEW_Y,Yn=Pn.ROTATE_Z,Wn=Pn.MATRIX,Un=R.PX,Xn=R.PERCENT,Kn=Dn.matrix,zn=Dn.geom,Vn=Kn.identity,jn=Kn.calPoint,$n=Kn.multiply,qn=Kn.isE,Zn=zn.d2r,Jn=zn.pointInPolygon;function Qn(t,e,r){var i,a,o,n=(i=e,a=r,o=[],t.forEach(function(t){var e=Pt(t,2),r=e[0],n=e[1];o.push([r,function(t,e,r,n){if(t===Cn){if(e[1]===Xn)return e[0]*r*.01}else if(t===Ln){if(e[1]===Xn)return e[0]*n*.01}else if(t===Wn)return e;return e[0]}(r,n,i,a)])}),o),c=Vn();return n.forEach(function(t){var e,r,n,i,a,o=Pt(t,2),s=o[0],h=o[1],l=Vn();e=l,n=h,(r=s)===Cn?e[4]=n:r===Ln?e[5]=n:r===Fn?e[0]=n:r===Bn?e[3]=n:r===Hn?(n=Zn(n),e[2]=Math.tan(n)):r===Gn?(n=Zn(n),e[1]=Math.tan(n)):r===Yn?(n=Zn(n),i=Math.sin(n),a=Math.cos(n),e[0]=e[3]=a,e[1]=i,e[2]=-i):r===Wn&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5]),c=$n(c,l)}),c}function ti(t,e){var r=Pt(e,2),n=r[0],i=r[1];if(0===n&&0===i)return t.slice(0);var a=Vn();a[4]=n,a[5]=i;var o=$n(a,t),s=Vn();return s[4]=-n,s[5]=-i,$n(o,s)}var ei={calMatrix:Qn,calOrigin:function(t,r,n){var i=[];return t.forEach(function(t,e){t[1]===Un?i.push(t[0]):t[1]===Xn&&i.push(t[0]*(e?n:r)*.01)}),i},calMatrixByOrigin:ti,calMatrixWithOrigin:function(t,e,r,n){return ti(Qn(t,r,n),e)},pointInQuadrilateral:function(t,e,r,n,i,a,o,s,h,l,c){if(!c||qn(c))return r<=t&&n<=e&&t<=o&&e<=s;var u=Pt(jn([r,n],c),2);r=u[0],n=u[1];var _=Pt(jn([i,a],c),2);i=_[0],a=_[1];var f=Pt(jn([h,l],c),2);h=f[0],l=f[1];var d=Pt(jn([o,s],c),2);return o=d[0],s=d[1],Jn(t,e,[[r,n],[i,a],[o,s],[h,l]])}},ri=Bt.H;function ni(t,e,r,n,i,a,o,s){var h=1,l=1,c=1;t:for(var u=a;i<=u;u--)for(var _=s;o<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+n)%f)continue}if(1<r)if(u<(e+n)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function ii(t,e,r,n,i,a){var o=i-e,s=n-r,h=r-e,l=i-n;if("dotted"===t)return ni(o,h,l,s,a,a,Math.max(1,.25*a),2*a);var c=ni(o,h,l,s,a,3*a,Math.max(1,.25*a),2*a),u=c.n,_=c.ps,f=c.pd;return 1===u?ni(o,h,l,s,a,a,Math.max(1,.25*a),2*a):{n:u,ps:_,pd:f}}function ai(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[1][0]<C?F.push(z):z[0][0]>L?H.push(z):z[1][0]>L&&z[0][0]<C?(W=C<i?s+Math.tan(e)*(C-n):h,U=a<L?s+Math.tan(r)*(o-L):h,F.push([z[0],[C,s],[C,W],z[3]]),C<L&&(i<C&&L<a?B.push([[C,s],[L,s],[L,h],[C,h]]):i<C?(B.push([[C,s],[a,s],[a,h],[C,h]]),B.push([[a,s],[L,s],[L,U],[a,h]])):L<a?(B.push([[C,s],[i,s],[i,h],[C,W]]),B.push([[i,s],[L,s],[L,h],[i,h]])):(B.push([[C,s],[i,s],[i,h],[C,W]]),B.push([[i,s],[a,s],[a,h],[i,h]]),B.push([[a,s],[L,s],[L,U],[a,h]]))),H.push([[L,s],z[1],z[2],[L,U]])):z[1][0]>L?(X=a<L?s+Math.tan(r)*(o-L):h,B.push([z[0],[L,s],[L,X],z[3]]),H.push([[L,s],z[1],z[2],[L,X]])):z[0][0]<C?(K=C<i?s+Math.tan(e)*(C-n):h,F.push([z[0],[C,s],[C,K],z[3]]),B.push([[C,s],z[1],z[2],[C,K]])):B.push(z)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=s+v,R=(x=v-(h-s))/(p-(i-n)),b=Pt((S=oi(F[0][0],F[0][1],C,A,M,O,!0,Math.tan(T)*O))[0],2),D=b[0],P=b[1],E&&(I=Pt((k=oi(F[0][3],F[0][2],C,A,R,x,!0,Math.tan(T)*x))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=oi(t[0],t[1],C,A,M,O),E&&(n=oi(t[3],t[2],C,A,R,x)));for(var i=0,a=r.length;i<a;i++)yi(r[i],D,P,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),E){for(var o=0,s=n.length;o<s;o++)yi(n[o],N,w,0);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=o-a<g&&t<m,j=Math.atan((o-a)/(h-s)),q=($=m)/g,Z=s+m,Q=(J=m-(h-s))/(g-(o-a)),et=Pt((tt=si(H[ht-1][0],H[ht-1][1],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=si(H[ht-1][3],H[ht-1][2],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=si(t[0],t[1],L,Z,q,$),V&&(n=si(t[3],t[2],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)yi(r[i],ot,st,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),V){for(var o=0,s=n.length;o<s;o++)yi(n[o],it,at,1);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}})),F.concat(B).concat(H)}function oi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(n-T)),x=r-Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*b/i,n-Math.cos(I)*b],[r-Math.sin(N)*b/i,n-Math.cos(N)*b],[x,R]]}function si(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(n-g)),x=r+Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(M/(n-T)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[x,R],[r+Math.sin(I)*b/i,n-Math.cos(I)*b],[r+Math.sin(N)*b/i,n-Math.cos(N)*b],[d,p]]}function hi(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[2][1]<C?F.push(z):z[1][1]>L?H.push(z):z[2][1]>L&&z[1][1]<C?(W=C<h?a+Math.tan(r)*(h-C):a,U=l<L?a+Math.tan(e)*(L-l):a,F.push([z[0],z[1],[o,C],[W,C]]),C<L&&(L<l&&h<C?B.push([[a,C],[o,C],[o,L],[a,L]]):h<C?(B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]])):L<l?(B.push([[W,C],[o,C],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,L],[a,L]])):(B.push([[W,C],[o,C],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]]))),H.push([[U,L],[o,L],z[2],z[3]])):z[2][1]>L?(X=l<L?a+Math.tan(e)*(L-l):a,B.push([z[0],z[1],[o,L],[X,L]]),H.push([[X,L],[o,L],z[2],z[3]])):z[1][1]<C?(K=C<h?a+Math.tan(r)*(h-C):a,F.push([z[0],z[1],[o,C],[K,C]]),B.push([[K,C],[o,C],z[2],z[3]])):B.push(z)}F.length&&(E=h-s<v&&t<p,T=Math.atan((o-a)/(h-s)),M=(O=v)/p,A=o-p,R=(x=v-(h-s))/(p-(o-a)),b=Pt((S=li(F[0][1],F[0][2],A,C,M,O,!0,Math.tan(T)*O))[S.length-1],2),D=b[0],P=b[1],E&&(I=Pt((k=li(F[0][0],F[0][3],A,C,R,x,!0,Math.tan(T)*x))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=li(t[1],t[2],A,C,M,O),E&&(n=li(t[0],t[3],A,C,R,x)));for(var i=0,a=r.length;i<a;i++)yi(r[i],D,P,2);if(E){for(var o=0,s=n.length;o<s;o++)yi(n[o],N,w,2);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=c-l<m&&t<g,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=o-g,Q=(J=m-(c-l))/(g-(o-a)),et=Pt((tt=ci(H[ht-1][1],H[ht-1][2],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=ci(H[ht-1][0],H[ht-1][3],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=ci(t[1],t[2],Z,L,q,$),V&&(n=ci(t[0],t[3],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)yi(r[i],ot,st,3);if(V){for(var o=0,s=n.length;o<s;o++)yi(n[o],it,at,3);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function li(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(M/(n-T)),x=r+Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r+Math.sin(I)*b/i,w=n-Math.cos(I)*b,D=A-k;return[[x,R],[r+Math.sin(D)*b/i,n-Math.cos(D)*b],[N,w],[d,p]]}function ci(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),x=r+Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r+Math.sin(I)*b/i,w=n+Math.cos(I)*b,D=f+k;return[[d,p],[r+Math.sin(D)*b/i,n+Math.cos(D)*b],[N,w],[x,R]]}function ui(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[2][0]<C?F.push(z):z[3][0]>L?H.push(z):z[2][0]>L&&z[3][0]<C?(W=C<i?c-Math.tan(e)*(C-n):h,U=a<L?c-Math.tan(r)*(o-L):l,F.push([z[0],[C,W],[C,c],z[3]]),C<L&&(i<C&&L<a?B.push([[C,l],[L,l],[L,c],[C,c]]):i<C?(B.push([[C,l],[a,l],[a,c],[C,c]]),B.push([[a,l],[L,U],[L,c],[a,c]])):L<a?(B.push([[C,W],[i,l],[i,c],[C,c]]),B.push([[i,l],[L,l],[L,c],[i,c]])):(B.push([[C,W],[i,l],[i,c],[C,c]]),B.push([[i,l],[a,l],[a,c],[i,c]]),B.push([[a,l],[L,U],[L,c],[a,c]]))),H.push([[L,U],z[1],z[2],[L,c]])):z[2][0]>L?(X=a<L?c-Math.tan(r)*(o-L):l,B.push([z[0],[L,X],[L,c],z[3]]),H.push([[L,X],z[1],z[2],[L,c]])):z[3][0]<C?(K=C<i?c-Math.tan(e)*(C-n):l,F.push([z[0],[C,K],[C,c],z[3]]),B.push([[C,K],z[1],z[2],[C,c]])):B.push(z)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(c-l)),M=(O=v)/p,A=c-v,R=(x=v-(c-l))/(p-(i-n)),b=Pt((S=_i(F[0][3],F[0][2],C,A,M,O,!0,Math.tan(T)*O))[0],2),D=b[0],P=b[1],E&&(I=Pt((k=_i(F[0][0],F[0][1],C,A,R,x,!0,Math.tan(T)*x))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=_i(t[3],t[2],C,A,M,O),E&&(n=_i(t[0],t[1],C,A,R,x)));for(var i=0,a=r.length;i<a;i++)yi(r[i],D,P,4);if(E){for(var o=0,s=n.length;o<s;o++)yi(n[o],N,w,4);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=o-a<g&&t<m,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=c-m,Q=(J=m-(c-l))/(g-(o-a)),et=Pt((tt=fi(H[ht-1][3],H[ht-1][2],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=fi(H[ht-1][0],H[ht-1][1],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=fi(t[3],t[2],L,Z,q,$),V&&(n=fi(t[0],t[1],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)yi(r[i],ot,st,5);if(V){for(var o=0,s=n.length;o<s;o++)yi(n[o],it,at,5);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),F.concat(B).concat(H)}function _i(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(T-n)),x=r-Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(O/(g-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*b/i,n+Math.cos(I)*b],[r-Math.sin(N)*b/i,n+Math.cos(N)*b],[x,R]]}function fi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),x=r+Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[x,R],[r+Math.sin(I)*b/i,n+Math.cos(I)*b],[r+Math.sin(N)*b/i,n+Math.cos(N)*b],[d,p]]}function di(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[3][1]<C?F.push(z):z[0][1]>L?H.push(z):z[3][1]>L&&z[0][1]<C?(W=C<h?i-Math.tan(r)*(h-C):i,U=l<L?i-Math.tan(e)*(L-l):i,F.push([z[0],z[1],[W,C],[n,C]]),C<L&&(L<l&&h<C?B.push([[n,C],[i,C],[i,L],[n,L]]):h<C?(B.push([[n,C],[i,C],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]])):L<l?(B.push([[n,C],[W,C],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,L],[n,L]])):(B.push([[n,C],[W,C],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]]))),H.push([[n,L],[U,L],z[2],z[3]])):z[3][1]>L?(X=l<L?i-Math.tan(e)*(L-l):i,B.push([z[0],z[1],[X,L],[n,L]]),H.push([[n,L],[X,L],z[2],z[3]])):z[1][1]<C?(K=C<h?i-Math.tan(r)*(h-C):i,F.push([z[0],z[1],[K,C],[n,C]]),B.push([[n,C],[K,C],z[2],z[3]])):B.push(z)}F.length&&(E=h-s<v&&t<p,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=n+p,R=(x=v-(h-s))/(p-(i-n)),b=Pt((S=pi(F[0][0],F[0][3],A,C,M,O,!0,Math.tan(T)*O))[S.length-1],2),D=b[0],P=b[1],E&&(I=Pt((k=pi(F[0][1],F[0][2],A,C,R,x,!0,Math.tan(T)*x))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=pi(t[0],t[3],A,C,M,O),E&&(n=pi(t[1],t[2],A,C,R,x)));for(var i=0,a=r.length;i<a;i++)yi(r[i],D,P,6);if(E){for(var o=0,s=n.length;o<s;o++)yi(n[o],N,w,6);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=c-l<m&&t<g,j=Math.atan((i-n)/(c-l)),q=($=m)/g,Z=n+g,Q=(J=m-(c-l))/(g-(i-n)),et=Pt((tt=vi(H[ht-1][0],H[ht-1][3],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=vi(H[ht-1][1],H[ht-1][2],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=vi(t[0],t[3],Z,L,q,$),V&&(n=vi(t[1],t[2],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)yi(r[i],ot,st,7);if(V){for(var o=0,s=n.length;o<s;o++)yi(n[o],it,at,7);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function pi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(M/(n-T)),x=r-Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r-Math.sin(I)*b/i,w=n-Math.cos(I)*b,D=A-k;return[[x,R],[r-Math.sin(D)*b/i,n-Math.cos(D)*b],[N,w],[d,p]]}function vi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(O/(g-n)),x=r-Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r-Math.sin(I)*b/i,w=n+Math.cos(I)*b,D=f+k;return[[d,p],[r-Math.sin(D)*b/i,n+Math.cos(D)*b],[N,w],[x,R]]}function yi(t,e,r,n){0===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===n?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===n||6===n?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===n&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var gi={calPoints:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var v=0===_||2===_?ii(e,i,a,o,s,t):ii(e,h,l,c,u,t),y=v.n,g=v.ps,m=v.pd;if(1<y){for(var E=0;E<y;E++){var T=E===y-1,O=void 0,M=void 0,A=void 0,x=(O=0===_||2===_?E?i+g*E+m*E:i:E?h+g*E+m*E:h)+g;0===_?x<=a?T?p.push([[i,h],[s,h],[o,l],[a,l]]):(M=h+(O-i)*Math.tan(r),A=h+(x-i)*Math.tan(r),p.push([[O,h],[x,h],[x,A],[O,M]])):o<=O?(M=h+(s-O)*Math.tan(n),A=h+(s-x)*Math.tan(n),T?p.push([[O,h],[s,h],[s,h],[O,M]]):p.push([[O,h],[x,h],[x,A],[O,M]])):O<a?(M=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,M]]),T?(p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[s,h],[s,h],[a,l]])):o<x?(A=h+(s-x)*Math.tan(n),p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[x,h],[x,A],[o,l]])):p.push([[a,h],[x,h],[x,l],[a,l]])):o<x?(M=h+(s-x)*Math.tan(n),O<a?(A=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,A]]),p.push([[a,h],[o,h],[o,l],[a,l]])):p.push([[O,h],[o,h],[o,l],[O,l]]),T?p.push([[o,h],[s,h],[s,h],[o,l]]):p.push([[o,h],[x,h],[x,M],[o,l]])):T?p.push([[O,h],[s,h],[o,l],[O,l]]):p.push([[O,h],[x,h],[x,l],[O,l]]):1===_?x<=l?T?p.push([[o,l],[s,h],[s,u],[o,c]]):(M=s-(O-h)*Math.tan(r),A=s-(x-h)*Math.tan(r),p.push([[M,O],[s,O],[s,x],[A,x]])):c<=O?(M=o+(O-c)*Math.tan(n),A=o+(x-c)*Math.tan(n),T?p.push([[M,O],[s,O],[s,u],[s,u]]):p.push([[M,O],[s,O],[s,x],[A,x]])):O<l?(M=o+(l-O)*Math.tan(r),p.push([[M,O],[s,O],[s,l],[o,l]]),T?(p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,u],[s,u]])):c<x?(A=o+(x-c)*Math.tan(n),p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,x],[A,x]])):p.push([[o,l],[s,l],[s,x],[o,x]])):c<x?(M=o+(x-c)*Math.tan(n),O<l?(A=o+(l-O)*Math.tan(r),p.push([[A,O],[s,O],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,s],[s,s]]):p.push([[o,c],[s,c],[s,x],[M,x]])):(p.push([[o,O],[s,O],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,u],[s,u]]):p.push([[o,c],[s,c],[s,x],[M,x]]))):T?p.push([[o,O],[s,O],[s,u],[o,c]]):p.push([[o,O],[s,O],[s,x],[o,x]]):2===_?x<=a?T?p.push([[i,u],[a,c],[o,c],[s,u]]):(M=u-(O-i)*Math.tan(r),A=u-(x-i)*Math.tan(r),p.push([[O,M],[x,A],[x,u],[O,u]])):o<=O?(M=u-(s-O)*Math.tan(n),A=u-(s-x)*Math.tan(n),T?p.push([[O,M],[s,u],[s,u],[O,u]]):p.push([[O,M],[x,A],[x,u],[O,u]])):O<a?(M=u-(O-i)*Math.tan(r),p.push([[O,M],[a,c],[a,u],[O,u]]),T?(p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[s,u],[s,u],[o,u]])):o<x?(A=u-(x-o)*Math.tan(n),p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[x,A],[x,u],[o,u]])):p.push([[a,c],[x,c],[x,u],[a,u]])):o<x?(M=u-(s-x)*Math.tan(n),O<a?(A=u-(O-o)*Math.tan(r),p.push([[O,A],[a,c],[a,u],[O,u]]),p.push([[a,c],[o,c],[o,u],[a,u]])):p.push([[O,c],[o,c],[o,u],[O,u]]),T?p.push([[o,c],[s,u],[s,u],[o,u]]):p.push([[o,c],[x,M],[x,u],[o,u]])):T?p.push([[O,c],[o,c],[s,u],[O,u]]):p.push([[O,c],[x,c],[x,u],[O,u]]):3===_&&(x<=l?T?p.push([[i,h],[a,l],[a,c],[i,u]]):(M=i+(O-h)*Math.tan(r),A=i+(x-h)*Math.tan(r),p.push([[i,O],[M,O],[A,x],[i,x]])):c<=O?(M=i+(u-O)*Math.tan(n),A=i+(u-x)*Math.tan(n),T?p.push([[i,O],[M,O],[i,u],[i,u]]):p.push([[i,O],[M,O],[A,x],[i,x]])):O<l?(M=i+(O-h)*Math.tan(r),p.push([[i,O],[M,O],[a,l],[i,l]]),T?(p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[i,u],[i,u]])):c<x?(A=i+(u-x)*Math.tan(n),p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[A,x],[i,x]])):p.push([[i,l],[a,l],[a,x],[i,x]])):c<x?(M=i+(u-x)*Math.tan(n),O<l?(A=i+(O-h)*Math.tan(r),p.push([[i,O],[A,O],[a,l],[i,h]]),p.push([[i,l],[a,l],[a,c],[i,c]])):p.push([[i,O],[a,O],[a,c],[i,c]]),T?p.push([[i,c],[a,c],[i,u],[i,u]]):p.push([[i,c],[a,c],[M,x],[i,x]])):T?p.push([[i,O],[a,O],[a,c],[i,u]]):p.push([[i,O],[a,O],[a,x],[i,x]]))}if(0===_)return ai(t,r,n,i,a,o,s,h,l,0,0,p,f,d);if(1===_)return hi(t,r,n,0,0,o,s,h,l,c,u,p,f,d);if(2===_)return ui(t,r,n,i,a,o,s,0,l,c,u,p,f,d);if(3===_)return di(t,r,n,i,a,0,0,h,l,c,u,p,f,d)}}return 0===_?(i<a&&p.push([[i,h],[a,h],[a,l],[i,h]]),p.push([[a,h],[o,h],[o,l],[a,l]]),o<s&&p.push([[o,h],[s,h],[s,h],[o,l]]),ai(t,r,n,i,a,o,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),c<u&&p.push([[o,c],[s,c],[s,u],[s,u]]),hi(t,r,n,0,0,o,s,h,l,c,u,p,f,d)):2===_?(i<a&&p.push([[i,u],[a,c],[a,u],[i,u]]),p.push([[a,c],[o,c],[o,u],[a,u]]),o<s&&p.push([[o,c],[s,u],[s,u],[o,u]]),ui(t,r,n,i,a,o,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[i,h],[i,h],[a,l],[i,l]]),p.push([[i,l],[a,l],[a,c],[i,c]]),c<u&&p.push([[i,c],[a,c],[i,u],[i,u]]),di(t,r,n,i,a,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,n,i,a,o,s,h,l,c,u){var _,f=Pt(h,2),d=f[0],p=f[1],v=Pt(l,2),y=v[0],g=v[1],m=Pt(c,2),E=m[0],T=m[1],O=Pt(u,2),M=O[0],A=O[1];if(p-=i,y-=a,g-=i,E-=a,T-=o,M-=s,A-=o,(0<(d-=s)&&0<p||0<y&&0<g||0<E&&0<T||0<M&&0<A)&&(_=!0),_){var x=[];return 0<d&&0<p?(x.push([t,e+p]),x.push([t,e+p*(1-ri),t+d*(1-ri),e,t+d,e])):x.push([t,e]),0<y&&0<g?(x.push([t+r-y,e]),x.push([t+r-y*(1-ri),e,t+r,e+g*(1-ri),t+r,e+g])):x.push([t+r,e]),0<E&&0<T?(x.push([t+r,e+n-T]),x.push([t+r,e+n-T*(1-ri),t+r-E*(1-ri),e+n,t+r-E,e+n])):x.push([t+r,e+n]),0<M&&0<A?(x.push([t+M,e+n]),x.push([t+M*(1-ri),e+n,t,e+n-A*(1-ri),t,e+n-A])):x.push([t,e+n]),x}}},mi=d.STYLE_KEY,Ei=mi.SCALE_X,Ti=mi.SCALE_Y,Oi=R.PERCENT,Mi=R.NUMBER;var Ai={matrixResize:function(t,e,r,n,i,a,o,s){if(t!==r||e!==n){var h=[[Ei,[r/t,Mi]],[Ti,[n/e,Mi]]],l=ei.calOrigin([[0,Oi],[0,Oi]],o,s);return l[0]+=i,l[1]+=a,ei.calMatrixWithOrigin(h,l,o,s)}}},xi="\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nvarying vec2 vTextureCoord;\nuniform mat3 projectionMatrix;\n\nvoid main(void)\n{\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}",Ri="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 color = vec4(0.0);\n\n  // Sample top left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample top right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Average\n  color *= 0.25;\n\n  gl_FragColor = color;\n}";function Si(t,e,r){var n=function(t,e,r){var n=bi(t,t.VERTEX_SHADER,e),i=bi(t,t.FRAGMENT_SHADER,r);if(!n||!i)return null;var a=t.createProgram();if(!a)return null;if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;var o=t.getProgramInfoLog(a);return ee.error("Failed to link program: "+o),t.deleteProgram(a),t.deleteShader(i),t.deleteShader(n),null}(t,e,r);if(n)return t.useProgram(n),t.program=n,1;ee.error("Failed to create program")}function bi(t,e,r){var n=t.createShader(e);if(null==n)return ee.error("unable to create shader"),null;if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;var i=t.getShaderInfoLog(n);return ee.error("Failed to compile shader: "+i),t.deleteShader(n),null}function ki(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),e}var Ii=function(){function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4;g(this,a),this.webgl=t;var n,i=this.gl=t.ctx;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,-1),Si(i,xi,Ri),this.vertexLocations=function(t){var e=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);var n=Float32Array.BYTES_PER_ELEMENT,i=t.getAttribLocation(t.program,"aVertexPosition");t.vertexAttribPointer(i,2,t.FLOAT,!1,4*n,0),t.enableVertexAttribArray(i);var a=t.getAttribLocation(t.program,"aTextureCoord");t.vertexAttribPointer(a,2,t.FLOAT,!1,4*n,2*n);var o=t.getUniformLocation(t.program,"projectionMatrix");return t.uniformMatrix3fv(o,!1,new Float32Array([1,0,0,0,1,0,0,0,1])),t.enableVertexAttribArray(a),{aPosition:i,aTexCoord:a}}(i),this.textureLocations={uSampler:(n=i).getUniformLocation(n.program,"uSampler"),uOffset:n.getUniformLocation(n.program,"uOffset"),uClamp:n.getUniformLocation(n.program,"filterClamp")},this._pixelSize={x:0,y:0},this.pixelSize=1,this._kernels=null,this._blur=e,this.quality=r,this.textures=[],this.framebuffers=[]}return l(a,[{key:"initBuffers",value:function(t,e,r){for(var n=0;n<2;n++){var i=ki(t);this.textures.push(i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null);var a=t.createFramebuffer();this.framebuffers.push(a),t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}}},{key:"draw",value:function(t,e,r){var n=this.textureLocations,i=n.uOffset,a=n.uClamp,o=this.gl;o.uniform2f(i,e[0],e[1]),o.viewport(0,0,t.width,t.height),o.uniform4f(a,0,0,t.width,t.height),r&&o.bindFramebuffer(o.FRAMEBUFFER,null),o.drawArrays(o.TRIANGLE_STRIP,0,4)}},{key:"apply",value:function(t,e,r){var n=this.gl;this.initBuffers(n,e,r);var i=this.textureLocations.uSampler;n.uniform1i(i,0);var a=ki(n);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.canvas);var o,s=this._pixelSize.x/e,h=this._pixelSize.y/r,l=this._quality-1;n.bindTexture(n.TEXTURE_2D,a);for(var c=0;c<l;c++){o=this._kernels[c]+.5,n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffers[c%2]);var u=new Float32Array([o*s,o*h]);this.draw(t.canvas,u,!1),n.bindTexture(n.TEXTURE_2D,this.textures[c%2])}o=this._kernels[l]+.5;var _=new Float32Array([o*s,o*h]);return this.draw(t.canvas,_,!0),this.webgl.draw(),t.ctx.clearRect(0,0,e,r),t.ctx.drawImage(n.canvas,0,0),t.draw(),this}},{key:"_generateKernels",value:function(){var t=this._blur,e=this._quality,r=[t];if(0<t)for(var n=t,i=t/e,a=1;a<e;a++)n-=i,r.push(n);this._kernels=r}},{key:"clear",value:function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}},{key:"kernels",get:function(){return this._kernels},set:function(t){Array.isArray(t)&&0<t.length?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)}},{key:"pixelSize",set:function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):(this._pixelSize.x=1,this._pixelSize.y=1)},get:function(){return this._pixelSize}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}},{key:"blur",get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()}}]),a}();var Ni={gaussBlur:function(t,e,r,n,i){return new Ii(e,r).apply(t,n,i)}},wi=Ft.isFunction,Di=function(){function o(){g(this,o),this.__eHash={}}return l(o,[{key:"on",value:function(t,e){if(e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.on(t[r],e);else if(e){this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(n,i){if(wi(i)){var a=this;if(o.__karasEventCb=i,Array.isArray(n))for(var t=0,e=n.length;t<e;t++)a.once(n[t],i);else i&&a.on(n,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.apply(a,e),a.off(n,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e||a[i].__karasEventCb===e){a.splice(i,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)this.emit(t[i],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var l=o[s];wi(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o;e.__eHash={};for(var n=["on","once","off","emit"],i=n.length-1;0<=i;i--){var a=n[i];e[a]=r[a]}}}}]),o}();c(Di,"REFRESH","refresh"),c(Di,"PAUSE","pause"),c(Di,"PLAY","play"),c(Di,"FRAME","frame"),c(Di,"FINISH","finish"),c(Di,"CANCEL","cancel"),c(Di,"BEGIN","begin"),c(Di,"END","end");var Pi,Ci=Ft.isFunction;function Li(t,e,r,n){if(n)for(var i=0;i<e;i++){var a=t[i];a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s.__before&&s.__before(r)}}var Fi=new(function(){function t(){g(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return l(t,[{key:"__init",value:function(){var u=this,_=u.task,f=u.taskCp;ee.cancelAnimationFrame(u.id);var d=u.__now=ee.now();!function c(){ee.cancelAnimationFrame(u.id),u.id=ee.requestAnimationFrame(function(){if(!Pi&&(_.length||f.length)){var t=u.__now=ee.now(),e=t-d,e=Math.max(e,0);d=t;var r=_.slice(0),n=f.splice(0),i=r.length,a=n.length;Li(r,i,e),Li(n,a,e);for(var o=u.__hookTask.splice(0),s=0,h=o.length;s<h;s++){var l=o[s];l&&l()}Li(r,i,e,!0),Li(n,a,e,!0),(_.length||f.length)&&c()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Ci(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,n=e.length;r<n;r++){var i=e[r];if(i===t||i.__karasFramecb===t){e.splice(r,1);break}}e.length||(ee.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,n=this;e&&((r=Ci(e)?{__after:function(t){e(t),n.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),n.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){Pi=!0}},{key:"resume",value:function(){Pi&&(this.__init(),Pi=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),Bi=4,Hi=1e-7,Gi=10,Yi="function"==typeof Float32Array;function Wi(t,e){return 1-3*e+3*t}function Ui(t,e){return 3*e-6*t}function Xi(t,e,r){return((Wi(e,r)*t+Ui(e,r))*t+3*e)*t}function Ki(t,e,r){return 3*Wi(e,r)*t*t+2*Ui(e,r)*t+3*e}function zi(t){return t}function Vi(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===r)return zi;for(var s=new(Yi?Float32Array:Array)(11),t=0;t<11;++t)s[t]=Xi(.1*t,a,o);function n(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var n=e+.1*((t-s[--r])/(s[r+1]-s[r])),i=Ki(n,a,o);return.001<=i?function(t,e,r,n){for(var i=0;i<Bi;++i){var a=Ki(e,r,n);if(0===a)return e;e-=(Xi(e,r,n)-t)/a}return e}(t,n,a,o):0===i?n:function(t,e,r,n,i){for(var a,o,s=0;0<(a=Xi(o=e+(r-e)/2,n,i)-t)?r=o:e=o,Math.abs(a)>Hi&&++s<Gi;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:Xi(n(t),e,r)}}var ji={linear:Vi(1,1,0,0),easeIn:Vi(.42,0,1,1),easeOut:Vi(0,0,.58,1),ease:Vi(.25,.1,.25,1),easeInOut:Vi(.42,0,.58,1),cubicBezier:Vi};ji["ease-in"]=ji.easeIn,ji["ease-out"]=ji.easeOut,ji["ease-in-out"]=ji.easeInOut;var $i=d.STYLE_KEY,qi=$i.FILTER,Zi=$i.TRANSFORM_ORIGIN,Ji=$i.BACKGROUND_POSITION_X,Qi=$i.BACKGROUND_POSITION_Y,ta=$i.BOX_SHADOW,ea=$i.TRANSLATE_X,ra=$i.BACKGROUND_SIZE,na=$i.FONTSIZE,ia=$i.FLEX_BASIS,aa=$i.FLEX_DIRECTION,oa=$i.WIDTH,sa=$i.HEIGHT,ha=$i.MARGIN_RIGHT,la=$i.MARGIN_TOP,ca=$i.MARGIN_LEFT,ua=$i.MARGIN_BOTTOM,_a=$i.PADDING_LEFT,fa=$i.PADDING_BOTTOM,da=$i.PADDING_RIGHT,pa=$i.PADDING_TOP,va=$i.TOP,ya=$i.RIGHT,ga=$i.BOTTOM,ma=$i.LEFT,Ea=$i.LINE_HEIGHT,Ta=$i.OPACITY,Oa=$i.Z_INDEX,Ma=$i.TRANSFORM,Aa=$i.COLOR,xa=$i.FONT_WEIGHT,Ra=$i.FONT_STYLE,Sa=$i.FONT_FAMILY,ba=$i.TEXT_ALIGN,ka=$i.MATRIX,Ia=d.UPDATE_KEY,Na=Ia.UPDATE_NODE,wa=Ia.UPDATE_STYLE,Da=Ia.UPDATE_KEYS,Pa=Ia.UPDATE_CONFIG,Ca=d.KEY_FRAME_KEY,La=Ca.FRAME_STYLE,Fa=Ca.FRAME_TIME,Ba=Ca.FRAME_EASING,Ha=Ca.FRAME_TRANSITION,Ga=R.AUTO,Ya=R.PX,Wa=R.PERCENT,Ua=R.INHERIT,Xa=R.RGBA,Ka=R.STRING,za=R.NUMBER,Va=Ft.isNil,ja=Ft.isFunction,$a=Ft.isNumber,qa=Ft.isObject,Za=Ft.isString,Ja=Ft.clone,Qa=Ft.equalArr,to=ji.linear,eo=hn.cloneStyle,ro=Se.isGeom,no=Se.GEOM,io=ye.COLOR_HASH,ao=ye.LENGTH_HASH,oo=ye.RADIUS_HASH,so=ye.GRADIENT_HASH,ho=ye.EXPAND_HASH,lo=ye.GRADIENT_TYPE,co={};function uo(t,e,r,n,i){var a={};a[Na]=i,a[wa]=t,a[Da]=e,a[Pa]=r[43],n.__addUpdate(i,r[43],n,r[44],a),r[16]=t,r[0]=!0,n.__frameHook()}function _o(r,n,t,i,a){return t.forEach(function(t){var e=function(t,e,r,n,i){var a=[r],o=t[r],s=e[r];if(r===Ma){if(!o&&!s)return;var h=o?o[0][1]:[1,0,0,1,0,0],l=s?s[0][1]:[1,0,0,1,0,0];if(Qa(h,l))return;return a[1]=[l[0]-h[0],l[1]-h[1],l[2]-h[2],l[3]-h[3],l[4]-h[4],l[5]-h[5]],a}if(r===qi)o&&o.length?s&&s.length?a[1]=s[0][1]-o[0][1]:a[1]=-o[0][1]:a[1]=s[0][1];else if(r===Zi){a[1]=[];for(var c=0;c<2;c++){var u,_,f=o[c],d=s[c];f[1]===d[1]?a[1].push(d[0]-f[0]):f[1]===Ya&&d[1]===Wa?(u=.01*d[0]*n[c?"outerHeight":"outerWidth"],a[1].push(u-f[0])):f[1]===Wa&&d[1]===Ya&&(_=100*d[0]/n[c?"outerHeight":"outerWidth"],a[1].push(_-f[0]))}if(Qa(a[1],[0,0]))return}else if(r===Ji||r===Qi){a[1]=[];for(var p=Math.min(o.length,s.length),v=0;v<p;v++){var y=o[v],g=s[v];if(y&&g)if(y[1]===g[1]&&-1<[Ya,Wa].indexOf(y[1])){var m=g[0]-y[0];if(0==m)return;a[1].push(m)}else if(o[1]===Ya&&s[1]===Wa){var E=.01*g[0]*n[r===Ji?"clientWidth":"clientHeight"];if(0==(E-=y[0]))return;a[1].push(E)}else if(o[1]===Wa&&s[1]===Ya){var T=100*g[0]/n[r===Ji?"clientWidth":"clientHeight"];if(0==(T-=y[0]))return;a[1].push(T)}else a[1].push(null);else a[1].push(null)}}else if(r===ta){a[1]=[];for(var O=0,M=Math.min(o.length,s.length);O<M;O++){for(var A=o[O],x=s[O],R=[],S=0;S<4;S++)R.push(x[S]-A[S]);for(var b=[],k=0;k<4;k++)b.push(x[4][k]-A[4][k]);R.push(b),a[1].push(R)}}else if(ho.hasOwnProperty(r)){if(o[1]===s[1]){var I=s[0]-o[0];if(0==I)return;a[1]=I}else if(o[1]===Ya&&s[1]===Wa){var N=.01*s[0]*n[r===ea?"outerWidth":"outerHeight"];if(0==(N-=o[0]))return;a[1]=N}else if(o[1]===Wa&&s[1]===Ya){var w=100*s[0]/n[r===ea?"outerWidth":"outerHeight"];if(0==(w-=o[0]))return;a[1]=w}}else if(r===ra){a[1]=[];for(var D,P=Math.min(o.length,s.length),C=0;C<P;C++){var L=o[C],F=s[C];if(L&&F){for(var B=[],H=0;H<2;H++){var G,Y,W=L[H],U=F[H];W[1]===U[1]&&-1<[Ya,Wa].indexOf(W[1])?B.push(U[0]-W[0]):W[1]===Ya&&U[1]===Wa?(G=.01*U[0]*n[C?"clientWidth":"clientHeight"],B.push(G-W[0])):W[1]===Wa&&U[1]===Ya?(Y=100*U[0]/n[C?"clientWidth":"clientHeight"],B.push(Y-W[0])):B.push(0)}Qa(B,[0,0])?a[1].push(null):(a[1].push(B),D=!0)}else a[1].push(null)}if(!D)return}else if(so.hasOwnProperty(r)){a[1]=[];for(var X=Math.min(o.length,s.length),K=0;K<X;K++){var z=o[K],V=s[K];if(z&&V&&!Za(z)&&!Za(V))if(z.k===V.k){var j=[];if("linear"===z.k||"radial"===z.k||"conic"===z.k){var $=z.v,q=V.v;j[0]=[];for(var Z=n.clientWidth,J=Qa($,q),Q=0,tt=Math.min($.length,q.length);Q<tt;Q++){var et=$[Q],rt=q[Q],nt=[];nt.push([rt[0][0]-et[0][0],rt[0][1]-et[0][1],rt[0][2]-et[0][2],rt[0][3]-et[0][3]]),et[1]&&rt[1]&&(et[1][1]===rt[1][1]?nt.push(rt[1][0]-et[1][0]):et[1][1]===Ya&&rt[1][1]===Wa?nt.push(rt[1][0]*Z*.01-et[1][0]):et[1][1]===Wa&&rt[1][1]===Ya&&nt.push(100*rt[1][0]/Z-et[1][0])),j[0].push(nt)}if("linear"===z.k){var it=Array.isArray(z.d);if(Array.isArray(V.d)!==it){a[1].push(null);continue}if(it){var at=[V.d[0]-z.d[0],V.d[1]-z.d[1],V.d[2]-z.d[2],V.d[3]-z.d[3]];if(J&&Qa(at,[0,0,0,0])){a[1].push(null);continue}j[1]=at}else{var ot=V.d-z.d;if(J&&0==ot){a[1].push(null);continue}j[1]=ot}}else if("radial"===z.k){var st=Array.isArray(z.z);if(Array.isArray(V.z)!==st){a[1].push(null);continue}if(st){j[2]=[];for(var ht=0;ht<5;ht++){var lt=z.z[ht];void 0===lt&&(lt=1);var ct=V.z[ht];void 0===ct&&(ct=1),j[2].push(ct-lt)}J&&Qa(a[4],[0,0,0,0,0])&&a[1].push(null)}else{j[2]=[];for(var ut=0;ut<2;ut++){var _t,ft,dt=z.p[ut],pt=V.p[ut];dt[1]===pt[1]?j[2].push(pt[0]-dt[0]):dt[1]===Ya&&pt[1]===Wa?(_t=.01*pt[0]*n[ut?"clientWidth":"clientHeight"],j[2].push(_t-dt[0])):dt[1]===Wa&&pt[1]===Ya&&(ft=100*pt[0]/n[ut?"clientWidth":"clientHeight"],j[2].push(ft-dt[0]))}J&&Qa(a[3],[0,0])&&a[1].push(null)}}else if("conic"===z.k){j[1].push(s.d-o.d),j[2]=[];for(var vt=0;vt<2;vt++){var yt,gt,mt=o.p[vt],Et=s.p[vt];mt[1]===Et[1]?j[2].push(Et[0]-mt[0]):mt[1]===Ya&&Et[1]===Wa?(yt=.01*Et[0]*n[vt?"clientWidth":"clientHeight"],j[2].push(yt-mt[0])):mt[1]===Wa&&Et[1]===Ya&&(gt=100*Et[0]/n[vt?"clientWidth":"clientHeight"],j[2].push(gt-mt[0]))}J&&0!==a[2]&&Qa(a[3],[0,0])&&a[1].push(null)}}else Qa(s,z)&&a[1].push(null),j[0]=[V[0]-z[0],V[1]-z[1],V[2]-z[2],V[3]-z[3]];a[1].push(j)}else a[1].push(null);else a[1].push(null)}}else if(io.hasOwnProperty(r)){if(s=s[0],o=o[0],Qa(s,o)||0===s[3]&&0===o[3])return;a[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}else if(oo.hasOwnProperty(r)){if(s[0][0]===o[0][0]&&s[0][1]===o[0][1]&&s[1][0]===o[1][0]&&s[1][1]===o[1][1])return;a[1]=[];for(var Tt=0;Tt<2;Tt++)s[Tt][1]===o[Tt][1]?a[1].push(s[Tt][0]-o[Tt][0]):o[Tt][1]===Ya&&s[Tt][1]===Wa?a[1].push(.01*s[Tt][0]*n[Tt?"outerHeight":"outerWidth"]-o[Tt][0]):o[Tt][1]===Wa&&s[Tt][1]===Ya?a[1].push(100*s[Tt][0]/n[Tt?"outerHeight":"outerWidth"]-o[Tt][0]):a[1].push(0)}else if(ao.hasOwnProperty(r)){if(o[1]===Ga||s[1]===Ga)return;var Ot,Mt,At=n.computedStyle,xt=(n.domParent||n).computedStyle,Rt=0;if(o[1]===s[1]?Rt=s[0]-o[0]:o[1]===Ya&&s[1]===Wa?(r===na?Ot=s[0]*xt[r]*.01:r===ia&&"row"===At[aa]||r===oa||-1<[ma,ya,ua,ca,la,ha,pa,da,fa,_a].indexOf(r)?Ot=s[0]*xt[oa]*.01:(r===ia||r===sa||-1<[va,ga].indexOf(r))&&(Ot=s[0]*xt[sa]*.01),Rt=Ot-o[0]):o[1]===Wa&&s[1]===Ya?(r===na?Mt=100*s[0]/xt[r]:r===ia&&"row"===At[aa]||r===oa||-1<[ma,ya,ua,ca,la,ha,pa,da,fa,_a].indexOf(r)?Mt=100*s[0]/xt[oa]:(r===ia||r===sa||-1<[va,ga].indexOf(r))&&(Mt=100*s[0]/xt[sa]),Rt=Mt-o[0]):r===Ea&&(o[1]===Ya&&s[1]===za?Rt=s[0]*At[na]-o[0]:o[1]===za&&s[1]===Ya&&(Rt=s[0]/At[na]-o[0])),0===Rt||isNaN(Rt))return;a[1]=Rt}else if(no.hasOwnProperty(r)){if(Va(o))return;if(no[r][i]&&ja(no[r][i].calDiff)){var St=no[r][i].calDiff;if(n.isMulti){for(var bt=[],kt=0,It=Math.min(o.length,s.length);kt<It;kt++)bt.push(St(o[kt],s[kt]));return bt}a[1]=St(o,s)}else if(n.isMulti)if("points"===r||"controls"===r){if(Va(s)||Va(o)||Qa(o,s))return;a[1]=[];for(var Nt=0,wt=Math.min(o.length,s.length);Nt<wt;Nt++){var Dt=o[Nt],Pt=s[Nt];if(Va(Dt)||Va(Pt))a[1].push(null);else{for(var Ct=[],Lt=0,Ft=Math.min(Dt.length,Pt.length);Lt<Ft;Lt++){var Bt=Dt[Lt],Ht=Pt[Lt];if(Va(Bt)||Va(Ht))Ct.push(null);else{for(var Gt=[],Yt=0,Wt=Math.max(Bt.length,Ht.length);Yt<Wt;Yt++){var Ut=Bt[Yt],Xt=Ht[Yt];Va(Ut)||Va(Xt)?Gt.push(0):Gt.push(Xt-Ut)}Ct.push(Gt)}}a[1].push(Ct)}}}else if("controlA"===r||"controlB"===r){if(Va(s)||Va(o)||Qa(o,s))return;a[1]=[];for(var Kt=0,zt=Math.min(o.length,s.length);Kt<zt;Kt++){var Vt=o[Kt],jt=s[Kt];Va(Vt)||Va(jt)?a[1].push(null):a[1].push([jt[0]-Vt[0],jt[1]-Vt[1]])}}else{if(s===o||Qa(s,o)||"edge"===r||"closure"===r)return;for(var $t=[],qt=0,Zt=Math.min(o.length,s.length);qt<Zt;qt++){var Jt=o[qt],Qt=s[qt];(Va(Jt)||Va(Qt))&&$t.push(0),$t.push(Qt-Jt)}a[1]=$t}else if("points"===r||"controls"===r){if(Va(s)||Va(o)||Qa(o,s))return;a[1]=[];for(var te=0,ee=Math.min(o.length,s.length);te<ee;te++){var re=o[te],ne=s[te];if(Va(re)||Va(ne))a[1].push(null);else{for(var ie=[],ae=0,oe=Math.max(re.length,ne.length);ae<oe;ae++){var se=re[ae],he=ne[ae];Va(se)||Va(he)?ie.push(0):ie.push(he-se)}a[1].push(ie)}}}else if("controlA"===r||"controlB"===r){if(Va(s)||Va(o)||Qa(o,s))return;a[1]=[s[0]-o[0],s[1]-o[1]]}else{if(s===o||"edge"===r||"closure"===r)return;a[1]=s-o}}else{if(r!==Ta&&r!==Oa)return;if(s===o)return;a[1]=s-o}return a}(r[La],n[La],t,i,a);e&&r[Ha].push(e)}),n}function fo(t,e,k,I){var r,n,i,a,o,N=eo(t[La],e),s=((r=t[Ba])&&(i=/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(r)?(n=r.match(/[\d.]+/g),ji.cubicBezier(n[0],n[1],n[2],n[3])):(i=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(r))?(a=parseInt(i[1]),o=i[2],function(t){if(a&&0<a){var e=1/a;return("start"===o?Math.ceil(t/e):Math.floor(t/e))/a}return t}):ji[r]),i);s&&s!==to&&(k=s(k));for(var w=t[Ha],D=I.tagName,h=0,l=w.length;h<l;h++)!function(t){var e=Pt(w[t],2),r=e[0],_=e[1],n=N[r];if(r===Ma){n=n||(N[r]=[[ka,[1,0,0,1,0,0]]]);for(var i=0;i<6;i++)n[0][1][i]+=_[i]*k}else if(co.hasOwnProperty(r))_&&(n[0]+=_*k);else if(r===qi)(n=n||(N[r]=[["blur",0]]))[0][1]+=_*k;else if(oo.hasOwnProperty(r))for(var a=0;a<2;a++)n[a][0]+=_[a]*k;else if(r===Zi)0!==_[0]&&(n[0][0]+=_[0]*k),0!==_[1]&&(n[1][0]+=_[1]*k);else if(r===ta)for(var o=0,s=Math.min(n.length,_.length);o<s;o++){for(var h=0;h<4;h++)n[o][h]+=_[o][h]*k;for(var l=0;l<4;l++)n[o][4][l]+=_[o][4][l]*k}else if(r===ra)n.forEach(function(t,e){_[e]&&(t[0][0]+=_[e][0]*k,t[1][0]+=_[e][1]*k)});else if(r===Ji||r===Qi)n.forEach(function(t,e){_[e]&&(t[0]+=_[e]*k)});else if(so.hasOwnProperty(r))n.forEach(function(t,e){var r=_[e];if(r){var n=Pt(r,4),i=n[0],a=n[1],o=n[2],s=n[3];if(lo.hasOwnProperty(t.k)){for(var h=0,l=Math.min(t.v.length,i.length);h<l;h++){var c=t.v[h],u=i[h];c[0][0]+=u[0][0]*k,c[0][1]+=u[0][1]*k,c[0][2]+=u[0][2]*k,c[0][3]+=u[0][3]*k,c[1]&&u[1]&&(c[1][0]+=u[1]*k)}"linear"===t.k&&void 0!==t.d&&void 0!==a&&(Array.isArray(a)?(t.d[0]+=a[0]*k,t.d[1]+=a[1]*k,t.d[2]+=a[2]*k,t.d[3]+=a[3]*k):t.d+=a*k),"radial"===t.k?void 0!==t.z&&void 0!==s?(t.z[0]+=s[0]*k,t.z[1]+=s[1]*k,t.z[2]+=s[2]*k,t.z[3]+=s[3]*k,t.z[4]+=s[4]*k):void 0!==t.p&&void 0!==o&&(t.p[0][0]+=o[0]*k,t.p[1][0]+=o[1]*k):"conic"===t.k&&void 0!==t.d&&void 0!==a&&(t.d+=a*k,t.p[0][0]+=o[0]*k,t.p[1][0]+=o[1]*k)}else t[0]+=i[0]*k,t[1]+=i[1]*k,t[2]+=i[2]*k,t[3]+=i[3]*k}});else if(io.hasOwnProperty(r))(n=n[0])[0]+=_[0]*k,n[1]+=_[1]*k,n[2]+=_[2]*k,n[3]+=_[3]*k;else if(no.hasOwnProperty(r)){var c=N[r];if(no[r][D]&&ja(no[r][D].calIncrease)){var u=no[r][D].calIncrease;I.isMulti?N[r]=c.map(function(t,e){return u(t,_[e],k)}):N[r]=u(c,_,k)}else if(I.isMulti)if("points"===r||"controls"===r)for(var f=0,d=Math.min(c.length,_.length);f<d;f++){var p=c[f],v=_[f];if(!Va(p)&&!Va(v))for(var y=0,g=Math.min(p.length,v.length);y<g;y++){var m=p[y],E=v[y];if(!Va(m)&&!Va(E))for(var T=0,O=Math.min(m.length,E.length);T<O;T++)Va(m[T])||Va(E[T])||(m[T]+=E[T]*k)}}else"controlA"===r||"controlB"===r?_.forEach(function(t,e){var r=c[e];if(!Va(t)&&!Va(r))for(var n=0,i=Math.min(r.length,t.length);n<i;n++){var a=r[n],o=t[n];Va(a)||Va(o)||(r[n]+=o*k)}}):_.forEach(function(t,e){Va(t)||Va(c[e])||(c[e]+=t*k)});else if("points"===r||"controls"===r)for(var M=0,A=Math.min(c.length,_.length);M<A;M++){var x=c[M],R=_[M];if(!Va(x)&&!Va(R))for(var S=0,b=Math.min(x.length,R.length);S<b;S++)Va(x[S])||Va(R[S])||(x[S]+=R[S]*k)}else"controlA"===r||"controlB"===r?(Va(c[0])||Va(_[0])||(c[0]+=_[0]*k),Va(c[1])||Va(_[1])||(c[1]+=_[1]*k)):Va(c)||Va(_)||(N[r]+=_*k)}else r!==Ta&&r!==Oa||(N[r]+=_*k)}(h);return N}function po(t,e){return ja(t)&&(e=t,t={}),[t||{},e]}Object.assign(co,ao),Object.assign(co,ho);var vo,yo=0,go=12,mo=13,Eo=30,To=31,Oo=41,Mo=42,Ao=function(){t(y,Di);var v=e(y);function y(t,i,e){var r,a;g(this,y),(r=v.call(this)).__id=yo++,i=Ja(i||[]),i=Array.isArray(i)?i.filter(function(t){return t&&qa(t)}):i&&qa(i)?(a=[],Object.keys(i).forEach(function(t){var e=i[t];if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++){(a[r]=a[r]||{offset:r/(n-1)})[t]=e[r]}}),a):[],$a(e)&&(r.__options={duration:e},e=r.__options);var n=r.__options=e||{duration:0},o=t.root,s=r.__config=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,o,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,n.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,o.__config,!1],h=r.iterations=n.iterations,l=r.duration=n.duration,c=Pt(r.__init(i,h,l,n.easing,t),4),u=c[0],_=c[1],f=c[2],d=c[3];s[go]=u,s[mo]=_,s[Eo]=f,s[To]=d,2===u.length&&(s[Oo]=!0,s[Mo]=u[1][Fa]);var p=parseInt(n.fps)||0;return p<=0&&(p=60),r.fps=p,r.spfLimit=n.spfLimit,r.delay=n.delay,r.endDelay=n.endDelay,r.playbackRate=n.playbackRate,r.fill=n.fill,r.iterations=n.iterations,r.direction=n.direction,r}return l(y,[{key:"__init",value:function(n,t,e,r,i){if(n.length<1)return[[],[],[],{}];for(var a,o=i.tagName,s=0,h=n.length;s<h;s++)(function(t,e){var r=n[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return n.splice(t,1),s=--t,h=--e;if(r.offset<=-1)return n.splice(t,1),s=--t,h=--e}Object.keys(r).forEach(function(t){Yt.hasOwnProperty(t)&&Yt.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Se.isValid(o,t)||delete r[t]}),s=t,h=e})(s,h);1===n.length?(n[0]=Ja(n[0]),1===n[0].offset?n.unshift({offset:0}):((a=Ja(n[0])).offset=1,n.push(a))):n.forEach(function(t,e){n[e]=Ja(t)});var l=n[0];l.hasOwnProperty("offset")&&0<l.offset?(l={offset:0},n.unshift(l)):l.offset=0;var c=n[n.length-1];c.hasOwnProperty("offset")&&c.offset<1?(c={offset:1},n.push(c)):c.offset=1;for(var u=1,_=n.length;u<_;u++){if(!(v=n[u]).hasOwnProperty("offset")){for(var f=void 0,d=u+1;d<_&&!(f=n[d]).hasOwnProperty("offset");d++);for(var p=d-u+1,v=n[u-1],y=(f.offset-v.offset)/p,g=u;g<d;g++){n[g].offset=v.offset+y*(g+1-u)}u=d}}var m=[];n.forEach(function(t){m.push(function(t,e,r){var n=t.offset,i=t.easing;delete t.offset,delete t.easing,t=hn.normalize(t);var a=[];return a[La]=t,a[Fa]=n*e,a[Ba]=i||r,a[Ha]=[],a}(t,e,r))});var E,T,O,M,A,x,R,S,b=(T=i,O={},M=[],(E=m).forEach(function(t){var e=t[La];Object.keys(e).forEach(function(t){void 0===e[t]||O.hasOwnProperty(t)||(O[t]=!0,no.hasOwnProperty(t)||(t=parseInt(t)),M.push(t))})}),E.forEach(function(t){var e=t[La];M.forEach(function(t){e.hasOwnProperty(t)&&!Va(e[t])||(no.hasOwnProperty(t)?e[t]=T.currentProps[t]:e[t]=T.currentStyle[t])})}),M);A=m,x=b,S=(R=i).computedStyle,A.forEach(function(t){var a=t[La];x.forEach(function(t){var e,r,n,i=a[t];Va(i)||(t===Ma?(e=R.outerWidth,r=R.outerHeight,n=ei.calMatrix(i,e,r),a[t]=[[ka,n]]):i[1]===Ua&&(t===Aa?a[t]=[Ft.rgba2int(S[t]),Xa]:ao.hasOwnProperty(t)?a[t]=[S[t],Ya]:t===xa?a[t]=[S[t],za]:t!==Ra&&t!==Sa&&t!==ba||(a[t]=[S[t],Ka])))})});var k=i.style,I=i.props,N={};b.forEach(function(t){ro(o,t)&&(N[t]=I[t]),N[t]=k[t]});for(var w=m.length,D=m[0],P=1;P<w;P++)D=_o(D,m[P],b,i,o);var C=Ja(m).reverse();C.forEach(function(t){t[Fa]=e-t[Fa],t[Ha]=[]}),D=C[0];for(var L=1;L<w;L++){D=_o(D,C[L],b,i,o)}return[m,C,b,N]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[15]=0;var n=r[16],i=r[Eo],a=r[10];if(t){if(r[14]=r[28]+r[17]+r[29],"finish"===r[22])return;r[22]="finish",r[40]||(r[16]={},e=!0)}else{if(r[21]=r[14]=0,"idle"===r[22])return;r[22]="idle",r[16]={},e=!0}e&&i.forEach(function(t){no.hasOwnProperty(t)?a.__currentProps[t]===n[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===n[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(Di.FRAME,e,r),t[7]&&(t[7]=!1,this.emit(Di.PLAY)),ja(t[9])&&(t[9].call(this,e,r),t[9]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[20],n=t[34],i=t[35],a=t[14]=t[15];return n&&(!0===n?e=Math.min(e,1e3/i):0<n&&(e=Math.min(e,n))),1!==r&&0<r&&(e*=r),t[15]+=e,[a,e]}},{key:"play",value:function(t){var e,r,n=this.__config,i=n[23],a=n[17],o=n[22],s=n[go];return i||a<=0||s.length<1||"running"===o||(this.__cancelTask(),n[9]=t,n[22]="running",n[7]=!0,this.__hasFin=!1,this.__hasCancel=!1,n[27]||(n[27]=!0,e=n[mo],r=n[36],n[32]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(r)?e:s,n[14]=n[15]=n[25]=0),Fi.offFrame(this),Fi.onFrame(this),n[24]=Fi.__now),this}},{key:"__before",value:function(t){var e,r,n=this.__config,i=n[10],a=n[35],o=n[21],s=n[32],h=n[36],l=n[18],c=n[39],u=n[40],_=n[28],f=n[11],d=n[Oo],p=n[Mo],v=n[17],y=n[29],g=s.length,m=Pt(n[37](n,t),2),E=m[0];if(t=m[1],!n[38]&&a<60){if((t=n[25]+=t)<1e3/a)return void(n[1]=!0);n[25]=0}if(n[38]=!1,!(0<o)&&E<_)return c&&uo((n[33]=s[0])[La],n[Eo],n,f,i),n[45]=!0,void(n[2]=!0);0===o&&(E-=_),0!==E&&!n[45]||(n[45]=!1,n[3]=!0),r=d?(e=E<p?0:1,p):s[e=function t(e,r,n,i){if(e===r)return i[e][Fa]>n?e-1:e;var a=e+(r-e>>1),o=i[a];return o[Fa]===n?a:o[Fa]>n?t(e,Math.max(a-1,e),n,i):t(Math.min(a+1,r),r,n,i)}(0,g-1,E,s)][Fa];var T=e===g-1,O=0;T||(O=d?E/v:(E-r)/(s[e+1][Fa]-r));var M,A,x,R=l-1<=o,S=s[e];n[33]=S,T?(A=E<v+y,x=u&&R?eo(S[La],n[Eo]):R?eo(n[To],n[Eo]):(M=E-v,n[15]=M+t,o=++n[21],n[6]=!0,"alternate"!==h&&"alternate-reverse"!==h?(S=s[0],O=M/(s[1][Fa]-S[Fa]),fo(S,n[Eo],O,i)):eo(S[La],n[Eo])),R&&(A||(n[15]=0,l<=(o=++n[21])&&Fi.offFrame(this)))):x=fo(S,n[Eo],O,i),uo(x,n[Eo],n,f,i),!T||A&&!R||(n[4]=!0,l<=o&&(n[5]=!0,this.__clean(!0)))}},{key:"__after",value:function(t){var e,r,n,i,a=this.__config;a[0]=!1,a[1]?a[1]=!1:(a[8].call(this,a,t,a[2]),a[2]=!1,a[3]&&(a[3]=!1,this.emit(Di.BEGIN,a[21])),a[4]&&(a[4]=!1,this.emit(Di.END,a[21]-1),e=a[36],r=a[go],n=a[mo],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(i=a[21]%2==0,a[32]="alternate"===e?i?r:n:i?n:r)),a[6]&&(a[6]=!1,a[3]=!0),a[5]&&(a[3]=a[4]=a[2]=a[5]=a[1]=a[27]=!1,a[22]="finished",this.emit(Di.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[23],n=e[17],i=this.pending;return r||n<=0||i||(e[22]="paused",this.__cancelTask(),t||this.emit(Di.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[23],n=e[17],i=e[22];return r||n<=0||"paused"!==i?this:this.play(t)}},{key:"finish",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[go];if(t||i<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,h=n[11],l=n[To];return h&&(s=n[40]?(n[33]=o[o.length-1],o[o.length-1][La]):l,h.addRefreshTask({__before:function(){n[0]=!0,uo(s,n[Eo],n,h,n[10]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Di.FINISH)),ja(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[go];if(t||i<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=n[11],h=n[To];return s&&s.addRefreshTask({__before:function(){n[0]=!0,uo(h,n[Eo],n,s,n[10]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Di.CANCEL)),ja(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var n=this.__config,i=n[23],a=n[17],o=n[go],s=n[28],h=n[29];if(i||a<=0||o.length<1)return this;var l=Pt(po(e,r),2);return e=l[0],r=l[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+h<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var n=this,i=this.__config,a=i[23],o=i[17],s=i[go],h=i[28],l=i[29];if(a||o<=0||s.length<1)return this;var c=Pt(po(e,r),2);return e=c[0],r=c[1],o+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){i[22]="paused",n.__cancelTask(),ja(r)&&r.call(n,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[16],n=t[10];t[Eo].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],no.hasOwnProperty(t)?n.currentProps[t]=e:n.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var n=this.__config,i=n[17];if(n[22]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=n[28]);i<t&&n[21]<n[18]-1;)n[21]++,t-=i;return n[15]=t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[10]=t,this.__config[43]=t.__config}},{key:"__cancelTask",value:function(){Fi.offFrame(this),this.__config[9]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[23]||(e.removeControl(),t?(e.__clean(),r[10]=null):Fi.nextFrame({__before:function(){e.__clean(),r[10]=null}}),r[24]=0,r[23]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[22]&&"finished"!==t[22]&&ee.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[10]}},{key:"root",get:function(){return this.__config[11]}},{key:"keys",get:function(){return this.__config[Eo]}},{key:"style",get:function(){return this.__config[16]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[17]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[17]!==t&&(e[17]=t,e[Mo]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[28]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[28]!==t&&(e[28]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[29]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[29]!==t&&(e[29]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[35]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[35]!==t&&(t<=0&&(t=60),e[35]=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[18]},set:function(t){t===1/0||Ft.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[18]!==t&&(e[18]=t),t}},{key:"fill",get:function(){return this.__config[19]},set:function(t){t=t||"none";var e=this.__config;return e[19]!==t&&(e[19]=t,this.__checkModify()),e[39]={backwards:!0,both:!0}.hasOwnProperty(t),e[40]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[36]},set:function(t){t=t||"normal";var e=this.__config;return e[36]!==t&&(e[36]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[go]}},{key:"framesR",get:function(){return this.__config[mo]}},{key:"playbackRate",get:function(){return this.__config[20]},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1);var e=this.__config;return e[20]!==t&&(e[20]=t),t}},{key:"easing",get:function(){return this.__config[26]}},{key:"startTime",get:function(){return this.__config[24]}},{key:"currentTime",get:function(){return this.__config[14]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[14]!==t&&(e[14]=t,e[15]=t),t}},{key:"nextTime",get:function(){return this.__config[15]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[15]!==t&&(e[15]=t),t}},{key:"pending",get:function(){return"running"!==this.__config[22]}},{key:"finished",get:function(){return"finished"===this.__config[22]}},{key:"playState",get:function(){return this.__config[22]}},{key:"playCount",get:function(){return this.__config[21]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[21]!==t&&(e[21]=t),t}},{key:"isDestroyed",get:function(){return this.__config[23]}},{key:"animating",get:function(){var t=this.__config,e=t[22];return"idle"!==e&&("finished"!==e||t[40]||t[39])}},{key:"spfLimit",get:function(){return this.__config[34]},set:function(t){t=Ft.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[34]!==t&&(e[34]=t),t}},{key:"assigning",get:function(){return this.__config[0]}}]),y}(),xo=d.STYLE_KEY,Ro=d.STYLE_KEY,So=Ro.TRANSLATE_X,bo=Ro.TRANSLATE_Y,ko=Ro.OPACITY,Io=Ro.FILTER,No={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSFORM:4,TRANSFORM_ALL:7,OPACITY:8,FILTER:16,MIX_BLEND_MODE:32,REPAINT:64,REFLOW:128},wo=(c(vo={},xo.SCALE_X,!0),c(vo,xo.SCALE_Y,!0),c(vo,xo.ROTATE_Z,!0),c(vo,xo.TRANSFORM,!0),c(vo,xo.TRANSFORM_ORIGIN,!0),vo),Do=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Se.isIgnore(t)?No.NONE:t===So?No.TRANSLATE_X:t===bo?No.TRANSLATE_Y:wo.hasOwnProperty(t)?No.TRANSFORM:t===ko?No.OPACITY:t===Io?No.FILTER:Se.isRepaint(t)?No.REPAINT:No.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<No.REFLOW}},No);Do.TRANSFORMS=wo;var Po=[8,16,32,64,128,256,512,1024,2048,4096],Co=[8,8,8,8,8,4,2,1,1,1],Lo=Po[Po.length-1],Fo={},Bo=function(){function u(t,e){g(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,t*=e;var r=this.__canvas=ee.getCacheCanvas(t,t,null,e);r&&(this.__offScreen=r),this.__grid=[];for(var n=0;n<this.__total;n++)this.__grid.push(1)}return l(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var n=0;n<t;n++){var i=r*t+n;if(e[i])return e[i]=0,this.__free--,i}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]=1,this.__free++}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"size",get:function(){return this.__size}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offScreen",get:function(){return this.__offScreen}},{key:"canvas",get:function(){return this.offScreen.canvas}},{key:"ctx",get:function(){return this.offScreen.ctx}}],[{key:"getInstance",value:function(t){if(!(Lo<t)){for(var e=Po[0],r=Co[0],n=0,i=Po.length;n<i&&(e=Po[n],r=Co[n],!(Po[n]>=t));n++);for(var a,o=Fo[e]=Fo[e]||[],s=0,h=o.length;s<h;s++){var l=o[s];if(l.free){a=l;break}}if(!a){if(!(a=new u(e,r)).offScreen)return void ee.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(Po=t.SIZE,Co=t.NUMBER,Lo=Po[Po.length-1])},get:function(){return{SIZE:Po,NUMBER:Co}}},{key:"MAX",get:function(){return Lo}}]),u}(),Ho=d.STYLE_KEY,Go=Ho.TRANSFORM_ORIGIN,Yo=Ho.TRANSFORM,Wo=d.NODE_KEY,Uo=Wo.NODE_OPACITY,Xo=Wo.NODE_CACHE,Ko=Wo.NODE_CACHE_FILTER,zo=Wo.NODE_CACHE_OVERFLOW;function Vo(t){var e=t.size,r=t.sx1,n=t.sy1,i=t.width,a=t.height,o=t.bbox,s=ee.getCacheCanvas(i,a);return s.coords=[1,1],s.bbox=o,s.size=e,s.sx1=r,s.sy1=n,s.dx=t.dx,s.dy=t.dy,s.dbx=t.dbx,s.dby=t.dby,s.width=i,s.height=a,s}var jo=function(){function p(t,e,r,n,i){g(this,p),this.__init(t,e,r,n,i)}return l(p,[{key:"__init",value:function(t,e,r,n,i){this.__width=t,this.__height=e,this.__bbox=r,this.__page=n,this.__pos=i;var a,o=Pt(n.getCoords(i),2),s=o[0],h=o[1];this.__coords=[s+1,h+1],n.canvas&&(this.__enabled=!0,(a=n.ctx).setTransform(1,0,0,1,0,0),a.globalAlpha=1,"undefined"!=typeof karas&&karas.debug&&(n.canvas.setAttribute("size",n.size),a.fillStyle="rgba(0, 0, 0, 0.1)",a.beginPath(),a.rect(s+1,h+1,n.size-2,n.size-2),a.closePath(),a.fill()))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=Pt(this.coords,2),n=r[0],i=r[1],a=this.bbox;this.dx=n-a[0],this.dy=i-a[1],this.dbx=t-a[0],this.dby=e-a[1]}},{key:"clear",value:function(){var t,e,r,n,i=this.ctx;this.enabled&&i&&this.available&&(i.setTransform(1,0,0,1,0,0),e=(t=Pt(this.coords,2))[0],r=t[1],n=this.page.size,i.clearRect(e-1,r-1,n,n)),this.__available=!1}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t){var e,r,n,i,a;Ft.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]),e+=2,r+=2,(n=Bo.getInstance(Math.max(e,r)))?(i=n.page,a=n.pos,this.__init(e,r,t,i,a)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"coords",get:function(){return this.__coords}}],[{key:"getInstance",value:function(t){if(!(isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3]))){var e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]);e+=2,r+=2;var n=Bo.getInstance(Math.max(e,r));if(n)return new p(e,r,t,n.page,n.pos)}}},{key:"genBlur",value:function(t,e){var r=Pt(t.coords,2),n=r[0],i=r[1],a=t.size,o=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox,_=ee.getCacheCanvas(l,c);_.ctx.drawImage(o,n-1,i-1,l,c,0,0,l,c),_.draw();var f=ee.getCacheWebgl(l,c);return Ni.gaussBlur(_,f,e,l,c),f.bbox=u,f.coords=[1,1],f.size=a,f.sx1=s,f.sy1=h,f.dbx=t.dbx,f.dby=t.dby,f.width=l,f.height=c,f}},{key:"genMask",value:function(t,e,r,n,i){for(var o=Vo(t),a=[];e&&e.isMask;)a.push(e),e=e.next;var s=Pt(o.coords,2),h=s[0],l=s[1],c=o.ctx,u=o.dbx,_=o.dby;i[0]+=h+u,i[1]+=l+_;var f=ei.calMatrixByOrigin(n,i);return a.forEach(function(t){var e=t.__config,r=e[zo],n=e[Ko],i=e[Xo],a=r&&r.available&&r;(a=(a=a||n&&n.available&&n)||i&&i.available&&i)?(c.globalAlpha=e[Uo],p.drawCache(a,o,t.computedStyle[Yo],[1,0,0,1,0,0],t.computedStyle[Go].slice(0),f)):ee.error("CacheMask is oversize")}),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.globalCompositeOperation=r?"source-out":"source-in",p.drawCache(t,o),c.globalCompositeOperation="source-over",o.draw(c),o}},{key:"genOverflow",value:function(t,e){var r=t.bbox,n=e.sx,i=e.sy,a=e.outerWidth,o=e.outerHeight,s=n+a,h=i+o;if(r[0]<n||r[1]<i||r[2]>s||r[3]>h){var l=Vo(t),c=l.ctx;return c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,p.drawCache(t,l),l.draw(c),c.globalCompositeOperation="destination-in",c.fillStyle="#FFF",c.beginPath(),c.rect(n-r[0]+1,i-r[1]+1,a,o),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",l}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(Ft.equalArr(e,r))return t;var n=r[0]-e[0],i=r[1]-e[1],a=p.getInstance(e);if(a&&a.enabled){var o=Pt(t.coords,2),s=o[0],h=o[1],l=t.canvas,c=t.width,u=t.height,_=Pt(a.coords,2),f=_[0],d=_[1];return a.sx1=t.sx1,a.sy1=t.sy1,a.dx=t.dx+n,a.dy=t.dy+i,a.dbx=t.dbx+n,a.dby=t.dby+i,a.ctx.drawImage(l,s-1,h-1,c,u,n+f-1,i+d-1,c,u),a.__available=!0,t.release(),a}}},{key:"drawCache",value:function(t,e,r,n,i,a){var o,s=Pt(e.coords,2),h=s[0],l=s[1],c=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,d=e.dby,p=Pt(t.coords,2),v=p[0],y=p[1],g=t.canvas,m=t.sx1,E=t.sy1,T=t.dbx,O=t.dby,M=t.width,A=t.height,x=h+m-c+f-T,R=l+E-u+d-O;r&&n&&i&&(i[0]+=x,i[1]+=R,o=ei.calMatrixByOrigin(r,i),n=Lt.multiply(n,o),a&&(n=Ft.equalArr(n,a)?[1,0,0,1,0,0]:(a=Lt.inverse(a),Lt.multiply(a,n))),_.setTransform(n[0],n[1],n[2],n[3],n[4],n[5])),_.drawImage(g,v-1,y-1,M,A,x-1,R-1,M,A)}},{key:"draw",value:function(t,e,r,n){t.globalAlpha=e,t.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]);var i=Pt(n.coords,2),a=i[0],o=i[1],s=n.canvas,h=n.sx1,l=n.sy1,c=n.dbx,u=n.dby,_=n.width,f=n.height;t.drawImage(s,a-1,o-1,_,f,h-1-c,l-1-u,_,f)}},{key:"MAX",get:function(){return Bo.MAX-2}}]),p}();c(jo,"NUM",5);var $o=d.STYLE_KEY,qo=d.STYLE_RV_KEY,Zo=d.style2Upper,Jo=d.STYLE_KEY,Qo=Jo.BORDER_TOP_LEFT_RADIUS,ts=Jo.BORDER_TOP_RIGHT_RADIUS,es=Jo.BORDER_BOTTOM_LEFT_RADIUS,rs=Jo.BORDER_BOTTOM_RIGHT_RADIUS,ns=Jo.PADDING_LEFT,is=Jo.PADDING_RIGHT,as=Jo.PADDING_TOP,os=Jo.PADDING_BOTTOM,ss=Jo.MARGIN_LEFT,hs=Jo.MARGIN_TOP,ls=Jo.MARGIN_BOTTOM,cs=Jo.MARGIN_RIGHT,us=Jo.BORDER_LEFT_WIDTH,_s=Jo.BORDER_TOP_WIDTH,fs=Jo.BORDER_BOTTOM_WIDTH,ds=Jo.BORDER_RIGHT_WIDTH,ps=Jo.TOP,vs=Jo.RIGHT,ys=Jo.BOTTOM,gs=Jo.LEFT,ms=Jo.POSITION,Es=Jo.DISPLAY,Ts=Jo.WIDTH,Os=Jo.HEIGHT,Ms=Jo.MATRIX,As=Jo.TRANSLATE_X,xs=Jo.TRANSLATE_Y,Rs=Jo.TRANSFORM,Ss=Jo.SCALE_X,bs=Jo.SCALE_Y,ks=Jo.ROTATE_Z,Is=Jo.SKEW_X,Ns=Jo.SKEW_Y,ws=Jo.TRANSFORM_ORIGIN,Ds=Jo.BACKGROUND_POSITION_X,Ps=Jo.BACKGROUND_POSITION_Y,Cs=Jo.BACKGROUND_SIZE,Ls=Jo.BACKGROUND_COLOR,Fs=Jo.BACKGROUND_IMAGE,Bs=Jo.BACKGROUND_REPEAT,Hs=Jo.BOX_SHADOW,Gs=Jo.OPACITY,Ys=Jo.Z_INDEX,Ws=Jo.BORDER_TOP_STYLE,Us=Jo.BORDER_RIGHT_STYLE,Xs=Jo.BORDER_BOTTOM_STYLE,Ks=Jo.BORDER_LEFT_STYLE,zs=Jo.FILTER,Vs=Jo.OVERFLOW,js=Jo.MIX_BLEND_MODE,$s=Jo.BORDER_TOP_COLOR,qs=Jo.BORDER_BOTTOM_COLOR,Zs=Jo.BORDER_LEFT_COLOR,Js=Jo.BORDER_RIGHT_COLOR,Qs=Jo.FONT_STYLE,th=Jo.COLOR,eh=Jo.VISIBILITY,rh=Jo.POINTER_EVENTS,nh=Jo.BORDER_TOP,ih=Jo.BORDER_RIGHT,ah=Jo.BORDER_BOTTOM,oh=Jo.BORDER_LEFT,sh=d.UPDATE_KEY,hh=sh.UPDATE_NODE,lh=sh.UPDATE_FOCUS,ch=sh.UPDATE_STYLE,uh=sh.UPDATE_OVERWRITE,_h=sh.UPDATE_KEYS,fh=sh.UPDATE_CONFIG,dh=d.STRUCT_KEY.STRUCT_HAS_MASK,ph=d.NODE_KEY,vh=ph.NODE_TAG_NAME,yh=ph.NODE_CACHE_STYLE,gh=ph.NODE_CURRENT_STYLE,mh=ph.NODE_COMPUTED_STYLE,Eh=ph.NODE_STYLE,Th=ph.NODE_STRUCT,Oh=ph.NODE_OPACITY,Mh=ph.NODE_MATRIX_EVENT,Ah=ph.NODE_MATRIX,xh=ph.NODE_LIMIT_CACHE,Rh=ph.NODE_BLUR_VALUE,Sh=ph.NODE_HAS_CONTENT,bh=ph.NODE_REFRESH_LV,kh=ph.NODE_CACHE,Ih=ph.NODE_CACHE_TOTAL,Nh=ph.NODE_CACHE_FILTER,wh=ph.NODE_CACHE_MASK,Dh=ph.NODE_CACHE_OVERFLOW,Ph=ph.NODE_IS_DESTROYED,Ch=ph.NODE_DEFS_CACHE,Lh=R.AUTO,Fh=R.PX,Bh=R.PERCENT,Hh=R.STRING,Gh=R.INHERIT,Yh=Ft.clone,Wh=Ft.int2rgba,Uh=Ft.rgba2int,Xh=Ft.joinArr,Kh=Ft.isNil,zh=hn.calRelative,Vh=bn.canvasPolygon,jh=bn.svgPolygon,$h=Se.GEOM,qh=Do.contain,Zh=Do.NONE,Jh=Do.TRANSFORM_ALL,Qh=Do.TRANSFORM,tl=Do.REFLOW,el=Do.REPAINT,rl=Do.TRANSLATE_X,nl=Do.TRANSLATE_Y,il=Do.OPACITY,al=Do.FILTER;function ol(t,e,r,n,i,a,o){var s;t===Ct.CANVAS?(n.beginPath(),n.fillStyle!==r&&(n.fillStyle=r),e.forEach(function(t){Vh(n,t,a,o)}),n.fill(),n.closePath()):t===Ct.SVG&&(s="",e.forEach(function(t){s+=jh(t)}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",r]]}))}function sl(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y){var g,m,E=17<arguments.length&&void 0!==y?y:"fill";Array.isArray(e)&&(O=e[1],g=e[2],m=e[3],e=e[0]);var T,O,M,A,x,R,S=gi.calRadius(r,n,i,a,l,c,u,_,f,d,p,v);S=S||[[r,n],[r+i,n],[r+i,n+a],[r,n+a],[r,n]],O&&(T=[g,m],O=ei.calMatrixByOrigin(O,T),M=Lt.inverse(O),S=S.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Lt.calPoint([t[r],t[r+1]],M);e.push(i[0]),e.push(i[1])}return e})),t===Ct.CANVAS?(O&&(o.save(),A=h.matrixEvent,O=Lt.multiply(A,O),o.setTransform(O[0],O[1],O[2],O[3],O[4],O[5])),o.beginPath(),o.fillStyle!==e&&(o.fillStyle=e),Vh(o,S),o[E](),o.closePath(),O&&o.restore()):t===Ct.SVG&&(x=jh(S),h.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",x],["fill",e]]}),O&&(R=h.virtualDom.bb)[R.length-1].props.push(["transform","matrix(".concat(Xh(O,","),")")]))}var hl=[Qo,ts,rs,es];function ll(t,e,r){return t[1]===Fh?t[0]:t[1]===Bh?(e-r)*t[0]*.01:0}var cl,ul,_l,fl,dl,pl=function(){t(R,x);var i=e(R);function R(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};g(this,R),r=i.call(this),Array.isArray(e)?r.props=Ft.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];var n=r.__config;return n[vh]=t,n[yh]=r.__cacheStyle,n[gh]=r.__currentStyle,n[mh]=r.__computedStyle,n[bh]=tl,n[Eh]=r.__style,n[Mh]=[],n[Ch]=r.__cacheDefs,r.__frameAnimateList=[],r}return l(R,[{key:"__structure",value:function(t,e,r){var n=ot(at(R.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(n[dh]=this.__hasMask),this.__config[Th]=n}},{key:"__mp",value:function(n,i,a){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=$o[Zo("margin"+t)],r=$o[Zo("padding"+t)];i[e]=o.__mpWidth(n[e],a),i[r]=o.__mpWidth(n[r],a)})}},{key:"__mpWidth",value:function(t,e){return t[1]===Fh?t[0]:t[1]===Bh?t[0]*e*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[ns]+r[is],this.__clientHeight=e+=r[as]+r[os],this.__offsetWidth=t+=r[us]+r[ds],this.__offsetHeight=e+=r[_s]+r[fs],this.__outerWidth=t+r[ss]+r[cs],this.__outerHeight=e+r[hs]+r[ls]}},{key:"__layout",value:function(t,e,r){hn.computeReflow(this,this.isShadowRoot);var n,i,a,o,s,h,l,c,u,_=t.w,f=this.isDestroyed,d=this.currentStyle,p=this.computedStyle,v=this.__config,y=p[Es],g=d[Ts],m=d[ms];if(this.__cancelCache(),this.__layoutData=Yh(t),v[bh]=tl,v[xh]=!1,!e){var E=this.next;if(!this.isMask&&E&&E.isMask){for(var T=0;E&&E.isMask;)T++,E=E.next;this.__hasMask=T}}if(f||"none"===y)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=p[Ts]=p[Os]=0,void this.__layoutNone();if(r||this.__mp(d,p,_),g[1]!==Lh)switch(g[1]){case Fh:_=g[0];break;case Bh:_*=.01*g[0]}this.__ox=this.__oy=0,"flex"===y?this.__layoutFlex(t,e):"inline"===y?this.__layoutInline(t,e):this.__layoutBlock(t,e),"relative"===m?(n=d[ps],i=d[vs],a=d[ys],o=d[gs],s=this.parent,n[1]!==Lh?(h=zh(d,ps,n,s),this.__offsetY(h),p[ps]=h,p[ys]="auto"):a[1]!==Lh?(l=zh(d,ys,a,s),this.__offsetY(-l),p[ys]=l,p[ps]="auto"):p[ps]=p[ys]="auto",o[1]!==Lh?(c=zh(d,gs,o,s,!0),this.__offsetX(c),p[gs]=c,p[vs]="auto"):i[1]!==Lh?(u=zh(d,vs,i,s,!0),this.__offsetX(-u),p[vs]=u,p[gs]="auto"):p[gs]=p[vs]="auto"):"absolute"!==d[ms]&&(p[ps]=p[ys]=p[gs]=p[vs]="auto"),this.__sx=this.x+this.ox,this.__sy=this.y+this.oy;var O=p[Ts]=this.width,M=p[Os]=this.height;e&&this.__ioSize(O,M);var A,x=this.__animateRecords;x&&(this.__animateRecords=null,x.list.forEach(function(t){t.target.vd instanceof R&&(t.target=t.target.vd)}),A=x.controller||this.root.animateController,x.options&&!1===x.options.autoPlay?A.__records=A.__records.concat(x.list):(A.__auto=A.__auto.concat(x.list),A.__playAuto()))}},{key:"__layoutNone",value:function(){this.computedStyle[Es]="none"}},{key:"__preLayout",value:function(t){var e=t.x,r=t.y,n=t.w,i=t.h,a=t.w2,o=t.h2;this.__x=e,this.__y=r;var s,h,l=this.currentStyle,c=this.computedStyle,u=l[Ts],_=l[Os],f=c[_s],d=c[ds],p=c[fs],v=c[us],y=c[hs],g=c[cs],m=c[ls],E=c[ss],T=c[as],O=c[is],M=c[os],A=c[ns];if(void 0!==a)s=!0,n=a;else if(u[1]!==Lh)switch(s=!0,u[1]){case Fh:n=u[0];break;case Bh:n*=.01*u[0]}if(void 0!==o)h=!0,i=o;else if(_[1]!==Lh)switch(h=!0,_[1]){case Fh:i=_[0];break;case Bh:i*=.01*_[0]}return e+=v+E+A,t.x=e,r+=f+y+T,t.y=r,u[1]===Lh&&(n-=v+d+E+g+A+O),_[1]===Lh&&(i-=f+p+y+m+T+M),{fixedWidth:s,fixedHeight:h,x:e,y:r,w:n,h:i}}},{key:"__marginAuto",value:function(t,e){var r,n=t[ms],i=t[ss],a=t[cs],o=t[Ts];"absolute"===n||o===Lh||i[1]!==Lh||a[1]!==Lh||(r=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-r),!0)}},{key:"__calMatrix",value:function(t,e,n,i,r,a,o,s){var h,l,c,u,_,f,d,p=e[Ms];return p&&t<tl&&!qh(t,Qh)?(u=l=0,qh(t,rl)&&(h=n[As],l=(h=Kh(h)?0:h[1]===Bh?h[0]*this.outerWidth*.01:h[0])-(i[As]||0),i[As]=h,i[Rs][4]+=l,p[4]+=l),qh(t,nl)&&(c=n[xs],u=(c=Kh(c)?0:c[1]===Bh?c[0]*this.outerHeight*.01:c[0])-(i[xs]||0),i[xs]=c,i[Rs][5]+=u,p[5]+=u),e[Ms]=p):(void 0===r&&(r=this.sx,a=this.sy,o=this.outerWidth,s=this.outerHeight),void 0===e[ws]&&(e[ws]=!0,p=null,i[ws]=ei.calOrigin(n[ws],o,s)),void 0!==e[Rs]&&void 0!==e[As]&&void 0!==e[xs]&&void 0!==e[ks]&&void 0!==e[Ss]&&void 0!==e[bs]&&void 0!==e[Is]&&void 0!==e[Ns]||(e[Rs]=e[As]=e[xs]=e[ks]=e[Ss]=e[bs]=e[Is]=e[Ns]=!0,p=null,n[Rs]?_=ei.calMatrix(n[Rs],o,s):(f=[],[As,xs,ks,Is,Ns,Ss,bs].forEach(function(t){delete i[t];var e,r=n[t];Kh(r)||(i[t]=r[0],e=t===Ss||t===bs,1===r[0]&&e||!e&&0===r[0]||(r[1]===Bh&&(t===As?i[t]=r[0]*o*.01:t===xs&&(i[t]=r[0]*s*.01)),f.push([t,r])))}),f.length&&(_=ei.calMatrix(f,o,s))),i[Rs]=_||[1,0,0,1,0,0]),p||((d=i[ws].slice(0))[0]+=r||0,d[1]+=a||0,p=e[Ms]=ei.calMatrixByOrigin(i[Rs],d))),p}},{key:"__calCache",value:function(i,t,a,o,e,_,r,f,n,s,h,l,c,u,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k){var I,N,w,D,P,C,L,F,B,H,G,Y,W=this;this.__calMatrix(t,_,r,f,n,s,c,u),el<=t?(void 0===_[Ds]&&(_[Ds]=!0,I=r[Ds],f[Ds]=(I||[]).map(function(t){return t[1]===Fh?t[0]:t[0]+"%"})),void 0===_[Ps]&&(_[Ps]=!0,N=r[Ps],f[Ps]=(N||[]).map(function(t){return t[1]===Fh?t[0]:t[0]+"%"})),void 0===_[Cs]&&(_[Cs]=!0,f[Cs]=(r[Cs]||[]).map(function(t){return r=h,n=l,i=[],t.forEach(function(t,e){t[1]===Fh?i.push(t[0]):t[1]===Bh?i.push(t[0]*(e?n:r)*.01):t[1]===Lh?i.push(-1):t[1]===Hh&&i.push("contain"===t[0]?-2:-3)}),i;var r,n,i})),void 0===_[Fs]&&(w=f[Fs]=r[Fs],_[Fs]=w.map(function(t,e){if(!t)return null;if(Ft.isString(t)){var n=W.__loadBgi[e]=W.__loadBgi[e]||{},r=ee.IMG[Fs];return r&&r.state===ee.LOADED?(n.url=Fs,n.source=r.source,n.width=r.width,n.height=r.height):n.url!==t&&(n.url=t,n.source=null,ee.measureImg(t,function(t){var e,r;t.success&&t.url===n.url&&!W.isDestroyed&&(n.source=t.source,n.width=t.width,n.height=t.height,(r=(e=W).root).delRefreshTask(n.cb),r.addRefreshTask(n.cb={__before:function(){_[Fs]=void 0;var t={};t[hh]=e,t[lh]=el,t[fh]=e.__config,r.__addUpdate(e,e.__config,r,r.__config,t)}}))},{width:h,height:l})),!0}return t&&t.k?W.__gradient(i,a,o,M,S,A,b,h,l,t):void 0})),void 0===_[Hs]&&(_[Hs]=!0,f[Hs]=r[Hs]),[Gs,Ys,Ws,Us,Xs,Ks,Bs,zs,Vs,js].forEach(function(t){f[t]=r[t]}),[Ls,$s,Js,qs,Zs].forEach(function(t){void 0===_[t]&&(_[t]=Wh(f[t]=r[t][0]))}),void 0!==_[Qo]&&void 0!==_[ts]&&void 0!==_[rs]&&void 0!==_[es]||(_[Qo]=_[ts]=_[rs]=_[es]=!0,F=c,B=u,H=r,G=f,Y=!0,hl.forEach(function(t){G[t]=H[t].map(function(t,e){return 0<t[0]?(Y=!1,t[1]===Fh?Math.max(0,t[0]):Math.max(0,t[0]*(e?B:F)*.01)):0})}),Y||hl.forEach(function(t,e){var r,n=e%2==0?0:1,i=n?B:F,a=G[t],o=G[hl[(e+1)%4]];a[n]+o[n]>i&&(r=.5*i,a[n]>=r&&o[n]>=r?a[n]=o[n]=r:a[n]>r?a[n]=i-o[n]:o[n]>r&&(o[n]=i-a[n]))})),D=f[Qo],P=f[ts],C=f[rs],L=f[es],["Top","Right","Bottom","Left"].forEach(function(t){var e,r,n,i,a,o,s,h,l=$o[Zo(t="border"+t)],c=$o[Zo(t+"Width")],u=$o[Zo(t+"Style")];void 0===_[c]&&(_[c]=!0,_[l]=void 0),void 0===_[u]&&(_[u]=!0,_[l]=void 0),void 0===_[l]&&(l===nh?0<d?(e=Math.atan(d/y),r=Math.atan(d/p),_[l]=gi.calPoints(d,f[u],e,r,O,M,A,x,R,S,b,k,0,D,P)):_[l]=[]:l===ih?0<p?(n=Math.atan(p/d),i=Math.atan(p/v),_[l]=gi.calPoints(p,f[u],n,i,O,M,A,x,R,S,b,k,1,P,C)):_[l]=[]:l===ah?0<v?(a=Math.atan(v/y),o=Math.atan(v/p),_[l]=gi.calPoints(v,f[u],a,o,O,M,A,x,R,S,b,k,2,L,C)):_[l]=[]:l===oh&&(0<y?(s=Math.atan(y/d),h=Math.atan(y/v),_[l]=gi.calPoints(y,f[u],s,h,O,M,A,x,R,S,b,k,3,D,L)):_[l]=[]))})):(qh(t,il)&&(f[Gs]=r[Gs]),qh(t,al)&&(f[zs]=r[zs]));var U=e&&e.computedStyle;if(r[Qs][1]===Gh?f[Qs]=e?U[Qs]:"normal":_[Qs]||(f[Qs]=r[Qs][0]),_[Qs]=f[Qs],r[th][1]===Gh?(f[th]=e?U[th]:[0,0,0,1],_[th]=Wh(f[th])):_[th]||(f[th]=Uh(r[th][0]),_[th]=Wh(f[th])),r[eh][1]===Gh?f[eh]=e?U[eh]:"visible":_[eh]||(f[eh]=r[eh][0]),_[eh]=f[eh],r[rh][1]===Gh?f[rh]=e?U[rh]:"auto":_[rh]||(f[rh]=r[rh][0]),_[rh]=f[rh],i===Ct.CANVAS){if(t<el)return this.__hasContent;if("hidden"!==f[eh]){var X=f[Fs];if(X)for(var K=0,z=X.length;K<z;K++){var V=X[K];if(V){if(V.k)return!0;var j=this.__loadBgi[K];if(V===j.url&&j.source)return!0}}if(0<f[Ls][3]){var $=f[Ts],q=f[Os],Z=f[as],J=f[is],Q=f[os],tt=f[ns];if($&&q||Z||J||Q||tt)return!0}for(var et=["Top","Right","Bottom","Left"],rt=0,nt=et.length;rt<nt;rt++){var it=et[rt];if(0<f[$o[Zo("border"+it+"Width")]]&&0<f[$o[Zo("border"+it+"Color")]][3])return!0}var at=f[Hs];if(Array.isArray(at))for(var ot=0,st=at.length;ot<st;ot++){var ht=at[ot];if(ht&&(0<ht[2]||0<ht[3]))return!0}for(var lt=0,ct=hl.length;lt<ct;lt++){var ut=f[hl[lt]];if(0<ut[0]&&0<ut[1])return!0}}}return!1}},{key:"__renderSelf",value:function(ut,c,_t,ft,u){var _,dt=this,t=this.isDestroyed,pt=this.currentStyle,e=this.computedStyle,vt=this.__cacheStyle,f=this.root,yt=this.__config,r=yt[kh];if(this.__renderSelfData=null,yt[bh]=Zh,t)return{isDestroyed:t,break:!0};if(ut===Ct.SVG&&(_=this.__virtualDom={bb:[],children:[],visibility:"visible"},yt[Ih]?yt[Ih].available||(yt[Ih].available=!0):yt[Ih]={available:!0,release:function(){this.available=!1,delete _.cache}}),"none"===e[Es])return{break:!0};var n=this.sx,i=this.sy,d=this.width,p=this.height,gt=this.clientWidth,mt=this.clientHeight,v=this.outerWidth,y=this.outerHeight,a=this.__hasMask,o=e[hs],s=e[ss],h=e[as],l=e[is],g=e[os],m=e[ns],Et=e[us],Tt=e[ds],Ot=e[_s],Mt=e[fs],E=this.__sx1=n+s,At=this.__sx2=E+Et,T=this.__sx3=At+d+m+l,O=this.__sx4=T+Tt,M=this.__sy1=i+o,xt=this.__sy2=M+Ot,A=this.__sy3=xt+p+h+g,x=this.__sy4=A+Mt,R={x1:E,x2:At,x3:T,x4:O,y1:M,y2:xt,y3:A,y4:x},S=this.domParent,b=this.__hasContent=yt[Sh]=this.__calCache(ut,c,_t,ft,this.parent,vt,pt,e,n,i,gt,mt,v,y,Ot,Tt,Mt,Et,h,l,g,m,E,At,T,O,M,xt,A,x),k=e[Ls],I=e[$s],N=e[Js],w=e[qs],D=e[Zs],Rt=e[Qo],St=e[ts],bt=e[rs],kt=e[es],P=e[eh],It=e[Bs],Nt=e[Fs],C=e[Gs],L=e[zs],wt=e[Cs],F=e[Hs],B=e[Vs],H=e[js];ut===Ct.CANVAS?(S&&(C*=S.__config[Oh]),yt[Oh]=C):ut===Ct.SVG&&(1===C?delete _.opacity:_.opacity=C,"normal"!==H?_.mixBlendMode=H:delete _.mixBlendMode);var G=this.__matrix=yt[Ah]=vt[Ms],Y=this.__renderMatrix=G;S&&(G=Lt.multiply(S.matrixEvent,G));var W=this.__matrixEvent=yt[Mh];W[0]=G[0],W[1]=G[1],W[2]=G[2],W[3]=G[3],W[4]=G[4],W[5]=G[5],ut===Ct.SVG&&(!qh(c,Jh)&&c<el||(Lt.isE(Y)?delete _.transform:_.transform="matrix("+Xh(Y,",")+")")),ut===Ct.SVG&&(_.visibility=P);var U,X,K,z,V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht,lt,ct=0,Dt=0;if(u&&ut===Ct.CANVAS){if(!b&&this.__releaseWhenEmpty(r))return R.break=!0,yt[xh]=!1,R;if(yt[xh]||r&&r.available||(U=this.bbox,r?r.reset(U):r=jo.getInstance(U),r&&r.enabled?(r.__bbox=U,r.__appendData(E,M),X=r.dbx,K=r.dby,_t=r.ctx,V=(z=Pt(r.coords,2))[0],j=z[1],ct=r.dx,Dt=r.dy,R.x1=E=V+X,R.y1=M=j+K,ct&&(R.x2=At+=ct,R.x3=T+=ct,R.x4=O+=ct),Dt&&(R.y2=xt+=Dt,R.y3=A+=Dt,R.y4=x+=Dt)):(yt[xh]=!0,r=null)),yt[kh]=r,yt[xh])return{limitCache:!0}}return yt[Rh]=0,Array.isArray(L)&&L.forEach(function(t){var e,r,n,i,a,o,s=Pt(t,2),h=s[0],l=s[1];"blur"===h&&(yt[Rh]=l,ut===Ct.CANVAS&&0<l&&!u?(e=f.width,r=f.height,(n=ee.getCacheCanvas(e,r)).ctx&&($={ctx:_t,blur:l,target:n,matrix:G},_t=n.ctx)):ut===Ct.SVG&&(el<=c||qh(c,al))&&(0<l&&0<d&&0<p?(a={tagName:"filter",props:[["x",-(i=Lt.int2convolution(l))/v],["y",-i/y],["width",1+2*i/v],["height",1+2*i/y]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",l]]}]},o=ft.add(a),yt[Ch].push(a),_.filter="url(#"+o+")"):delete _.filter))}),a&&(ut!==Ct.CANVAS||u||($?q=$:(Z=f.width,J=f.height,(Q=ee.getCacheCanvas(Z,J)).ctx&&(q={ctx:_t,target:Q,matrix:G},_t=Q.ctx)))),"hidden"===B?ut!==Ct.CANVAS||u?ut===Ct.SVG&&(et={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(n,",").concat(i,"L").concat(n+v,",").concat(i,"L").concat(n+v,",").concat(i+y,"L").concat(n,",").concat(i+y,",L").concat(n,",").concat(i)]]}]},rt=ft.add(et),yt[Ch].push(et),_.overflow="url(#"+rt+")"):($||q?tt=$||q:(nt=f.width,it=f.height,(at=ee.getCacheCanvas(nt,it)).ctx&&(tt={ctx:_t,target:at,matrix:G},_t=at.ctx)),tt.x=n,tt.y=i,tt.outerWidth=v,tt.outerHeight=y):ut===Ct.SVG&&delete _.overflow,"normal"===H||u||($||q||tt?lt=$||q||tt:(ot=f.width,st=f.height,ht=ee.getCacheCanvas(ot,st),lt={ctx:_t,target:ht,mixBlendMode:H,matrix:G},_t=ht.ctx)),ut!==Ct.CANVAS||u||(R.offScreenFilter=$,R.offScreenMask=q,R.offScreenOverflow=tt,R.offScreenBlend=lt,_t.globalAlpha=C,_t.setTransform(G[0],G[1],G[2],G[3],G[4],G[5])),"hidden"===P&&ut===Ct.CANVAS?R.break=!0:(0<k[3]&&sl(ut,vt[Ls],At,xt,gt,mt,_t,ft,this,Ot,Tt,Mt,Et,Rt,St,bt,kt),Nt&&Nt.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M;if(t)if(Ft.isString(t)){var A=dt.__loadBgi[e];if(A.url===Nt[e]){var x=A.source;if(x){var R=A.width,S=A.height,b=Pt(wt[e],2),k=b[0],I=b[1];-1===k&&-1===I?(k=R,I=S):-2===k?gt<R&&mt<S?(I=S/mt)<=(k=R/gt)?I=(k=gt)*S/R:k=(I=mt)*R/S:gt<R?I=(k=gt)*S/R:mt<S?k=(I=mt)*R/S:(k=R,I=S):-3===k?R<gt&&S<mt?(k=R/gt)<=(I=S/mt)?I=(k=gt)*S/R:k=(I=mt)*R/S:R<gt||!(S<mt)&&(k=R/gt)<=(I=S/mt)?I=(k=gt)*S/R:k=(I=mt)*R/S:-1===k?k=I*R/S:-1===I&&(I=k*S/R);var N,w,D=At+ll(pt[Ds][e],gt,k),P=xt+ll(pt[Ps][e],mt,I),C=D<At||P<xt||gt<k||mt<I,L=0,F=0,B=0,H=0;-1<["repeat-x","repeat"].indexOf(It[e])&&(0<(N=D-At)&&(L=Math.ceil(N/k)),0<(N=At+gt-D-k)&&(F=Math.ceil(N/k))),-1<["repeat-y","repeat"].indexOf(It[e])&&(0<(w=P-xt)&&(B=Math.ceil(w/I)),0<(w=xt+mt-P-I)&&(H=Math.ceil(w/I)));var G,Y,W,U,X,K,z,V,j=[];if(0<L)for(var $=0;$<L;$++){var q=D-($+1)*k;j.push([q,P]),!C&&0===$&&q<At&&(C=!0)}if(0<F)for(var Z=0;Z<F;Z++){var J=D+(Z+1)*k;j.push([J,P]),!C&&Z===F-1&&At+gt<J+k&&(C=!0)}if(0<B)for(var Q=0;Q<B;Q++){var tt=P-(Q+1)*I;j.push([D,tt]),!C&&0===Q&&tt<xt&&(C=!0)}if(0<H)for(var et=0;et<H;et++){var rt=P+(et+1)*I;j.push([D,rt]),!C&&et===H-1&&xt+mt<rt+k&&(C=!0)}if(0<L&&0<B)for(var nt=0;nt<L;nt++)for(var it=0;it<B;it++)j.push([D-(nt+1)*k,P-(it+1)*I]);if(0<F&&0<B)for(var at=0;at<F;at++)for(var ot=0;ot<B;ot++)j.push([D+(at+1)*k,P-(ot+1)*I]);if(0<L&&0<H)for(var st=0;st<L;st++)for(var ht=0;ht<H;ht++)j.push([D-(st+1)*k,P+(ht+1)*I]);if(0<F&&0<H)for(var lt=0;lt<F;lt++)for(var ct=0;ct<H;ct++)j.push([D+(lt+1)*k,P+(ct+1)*I]);ut===Ct.CANVAS?(C&&(_t.save(),sl(ut,"#FFF",At,xt,gt,mt,_t,ft,dt,Ot,Tt,Mt,Et,Rt,St,bt,kt,"clip")),_t.drawImage(x,D,P,k,I),j.forEach(function(t){_t.drawImage(x,t[0],t[1],k,I)}),C&&_t.restore()):ut===Ct.SVG&&(G=Ai.matrixResize(R,S,k,I,D,P,gt,mt),Y=[["xlink:href",t],["x",D],["y",P],["width",R],["height",S]],G&&!Lt.isE(G)&&(W=!0,Y.push(["transform","matrix("+Xh(G,",")+")"])),C&&(X=[At,xt],K=[At+gt,xt+mt],W&&(U=Lt.inverse(G),X=Lt.calPoint(X,U),K=Lt.calPoint(K,U)),z={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(X[0],",").concat(X[1],"L").concat(K[0],",").concat(X[1],"L").concat(K[0],",").concat(K[1],"L").concat(X[0],",").concat(K[1],"L").concat(X[0],",").concat(X[1])],["fill","#FFF"]]}]},V=ft.add(z),yt[Ch].push(z),Y.push(["clip-path","url(#"+V+")"])),dt.virtualDom.bb.push({type:"img",tagName:"image",props:Y}),j.forEach(function(t){var e,r=Yh(Y);!W||(e=Ai.matrixResize(R,S,k,I,t[0],t[1],gt,mt))&&!Lt.isE(e)&&(r[5][1]="matrix("+Xh(e,",")+")"),r[1][1]=t[0],r[2][1]=t[1],dt.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}else{!t.k||(M=vt[Fs][e])&&("conic"===M.k?(r=ut,n=M.v,i=At,a=xt,o=gt,s=mt,h=_t,l=ft,c=dt,u=Ot,_=Tt,f=Mt,d=Et,p=Rt,v=St,y=bt,g=kt,O=(O=gi.calRadius(i,a,o,s,u,_,f,d,p,v,y,g))||[[i,a],[i+o,a],[i+o,a+s],[i,a+s],[i,a]],r===Ct.CANVAS?(m=h.globalAlpha,h.globalAlpha=.5*m,h.save(),h.beginPath(),Vh(h,O),h.clip(),h.closePath(),n.forEach(function(t){h.beginPath(),Vh(h,t[0]),h.fillStyle=t[1],h.fill(),h.closePath()}),h.restore(),h.globalAlpha=m):r===Ct.SVG&&(E={tagName:"clipPath",children:[{tagName:"path",props:[["d",jh(O)],["fill","#FFF"]]}]},c.__config[Ch].push(E),T=l.add(E),n.forEach(function(t){c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jh(t[0])],["fill",t[1]],["clip-path","url(#"+T+")"]]})}))):sl(ut,M.v,At,xt,gt,mt,_t,ft,dt,Ot,Tt,Mt,Et,Rt,St,bt,kt))}}),F&&F.forEach(function(t){!function(t,e,r,n,i,a,o,s,h,l,c){var u=Pt(n,6),_=u[0],f=u[1],d=u[2],p=u[3],v=u[4],y=u[5],g=Wh(v),m=2*Math.abs(d)+2*Math.abs(p)+2*Math.abs(_)+2*Math.abs(f),E=[[a,o],[s,o],[s,h],[a,h],[a,o]],T=[[a-m,o-m],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m]];if(0<v[3]&&(0<d||0<p))if(t===Ct.CANVAS){if(e.save(),e.beginPath(),"inset"===y){var O=a+_+p,M=o+f+p,A=s+_-p,x=h+f-p,R=[[O,M],[A,M],[A,x],[O,x]],S=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[R[0][0],R[0][1],R[2][0],R[2][1]]);if(!S)return;S=[[S[0],S[1]],[S[2],S[1]],[S[2],S[3]],[S[0],S[3]],[S[0],S[1]]],p?(Vh(e,S),Vh(e,E.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Vh(e,E),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),Vh(e,S),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Vh(e,[[O,M],[A,M],[A,x],[a-m,x],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,x],[O,x],[O,M]])):(Vh(e,E),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Vh(e,[[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]]))}else{var b=a+_-p,k=o+f-p,I=s+_+p,N=h+f+p,w=[[b,k],[I,k],[I,N],[b,N]],D=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[w[0][0],w[0][1],w[2][0],w[2][1]]);p?(Vh(e,E),Vh(e,w.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Vh(e,w),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),D&&Vh(e,[[D[0],D[1]],[D[2],D[1]],[D[2],D[3]],[D[0],D[3]],[D[0],D[1]]].reverse()),Vh(e,E),Vh(e,w),Vh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Vh(e,w)):(Vh(e,E),Vh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Vh(e,E))}e.fill(),e.closePath(),e.restore()}else if(t===Ct.SVG){var P=Lt.int2convolution(d);if("inset"===y){var C,L,F,B,H,G,Y,W=a+_+p,U=o+f+p,X=s+_-p,K=h+f-p,z=[[W,U],[X,U],[X,K],[W,K]],V=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[z[0][0],z[0][1],z[2][0],z[2][1]]);if(!V)return;V=[[V[0],V[1]],[V[2],V[1]],[V[2],V[3]],[V[0],V[3]],[V[0],V[1]]],p?(C={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},i.__config[Ch].push(C),L=r.add(C),F={tagName:"clipPath",children:[{tagName:"path",props:[["d",jh(V)+jh(E.slice(0).reverse())],["fill","#FFF"]]}]},B=r.add(F),i.__config[Ch].push(F),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jh(E)],["fill",g],["clip-path","url(#"+B+")"]]}),C={tagName:"clipPath",children:[{tagName:"path",props:[["d",jh(V)],["fill","#FFF"]]}]},B=r.add(C),i.__config[Ch].push(C),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jh([[W,U],[X,U],[X,K],[a-m,K],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,K],[W,K],[W,U]])],["fill","#FFF"],["filter","url(#"+L+")"],["clip-path","url(#"+B+")"]]})):(H={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},G=r.add(H),i.__config[Ch].push(H),H={tagName:"clipPath",children:[{tagName:"path",props:[["d",jh(E)],["fill","#FFF"]]}]},Y=r.add(H),i.__config[Ch].push(H),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jh([[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]])],["fill","#FFF"],["filter","url(#"+G+")"],["clip-path","url(#"+Y+")"]]}))}else{var j,$,q,Z,J,Q,tt=a+_-p,et=o+f-p,rt=s+_+p,nt=h+f+p,it=[[tt,et],[rt,et],[rt,nt],[tt,nt]],at=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[it[0][0],it[0][1],it[2][0],it[2][1]]);p?(j={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},$=r.add(j),i.__config[Ch].push(j),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",jh(E)+jh(it.slice(0).reverse())],["fill","#FFF"]]}]},q=r.add(j),i.__config[Ch].push(j),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jh(it)],["fill",g],["clip-path","url(#"+q+")"]]}),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",(at?jh([[at[0],at[1]],[at[2],at[1]],[at[2],at[3]],[at[0],at[3]],[at[0],at[1]]].reverse()):"")+jh(E)+jh(it)+jh(T)],["fill","#FFF"]]}]},q=r.add(j),i.__config[Ch].push(j),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jh(it)],["fill","#FFF"],["filter","url(#"+$+")"],["clip-path","url(#"+q+")"]]})):(Z={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},J=r.add(Z),i.__config[Ch].push(Z),Z={tagName:"clipPath",children:[{tagName:"path",props:[["d",jh(E)+jh(T)],["fill","#FFF"]]}]},Q=r.add(Z),i.__config[Ch].push(Z),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jh(E)],["fill","#FFF"],["filter","url(#"+J+")"],["clip-path","url(#"+Q+")"]]}))}}}(ut,_t,ft,t,dt,E,M,O,x,v,y)}),0<Ot&&0<I[3]&&ol(ut,vt[nh],vt[$s],_t,this,ct,Dt),0<Tt&&0<N[3]&&ol(ut,vt[ih],vt[Js],_t,this,ct,Dt),0<Mt&&0<w[3]&&ol(ut,vt[ah],vt[qs],_t,this,ct,Dt),0<Et&&0<D[3]&&ol(ut,vt[oh],vt[Zs],_t,this,ct,Dt),r&&r.enabled&&(r.__available=!0)),R}},{key:"render",value:function(t,e,r,n,i){return this.__renderSelf(t,e,r,n,i)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(ot(at(R.prototype),"__destroy",this).call(this),t=this.root,this.animationList.forEach(function(t){return t.__destroy()}),this.__frameAnimateList.splice(0).forEach(function(t){Fi.offFrame(t)}),t.delRefreshTask(this.__loadBgi.cb),t.delRefreshTask(this.__task),this.__matrix=this.__matrixEvent=this.__root=null,this.__cancelCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[Es]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener;return o.hasOwnProperty(a)&&(i=o[a]),e?(t.target=this,Ft.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):this.willResponseEvent(t)?(Ft.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,r=t.y,n=this.__sx1,i=this.__sy1,a=this.offsetWidth,o=this.offsetHeight,s=this.matrixEvent;if("none"!==this.computedStyle[rh])return ei.pointInQuadrilateral(e,r,n,i,n+a,i,n+a,i+o,n,i+o,s)?(t.target||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,n,i,a,o,s,h,l){var c,u,_,f,d,p,v=l.k,y=l.v,g=l.d,m=l.s,E=l.z,T=l.p,O=n+.5*s,M=i+.5*h,A={k:v};return"linear"===v?(c=At.getLinear(y,g,n,i,O,M,s,h),A.v=this.__getLg(t,e,r,c)):"radial"===v?(u=At.getRadial(y,m,E,T,n,i,a,o))&&(A.v=this.__getRg(t,e,r,u),u.matrix&&(A.v=[A.v,u.matrix,u.cx,u.cy])):"conic"===v&&(_=this.bbox,f=Math.max(Math.abs(_[2]-_[0]),Math.abs(_[3]-_[1])),d=Math.max(Math.abs(a-n),Math.abs(o-i)),p=At.getConic(y,g,T,n,i,a,o,f/d),A.v=this.__getCg(t,e,r,p)),A}},{key:"__getLg",value:function(t,e,r,n){if(t===Ct.CANVAS){var i=e.createLinearGradient(n.x1,n.y1,n.x2,n.y2);return n.stop.forEach(function(t){i.addColorStop(t[1],Wh(t[0]))}),i}if(t===Ct.SVG){var a={tagName:"linearGradient",props:[["x1",n.x1],["y1",n.y1],["x2",n.x2],["y2",n.y2]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Wh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[Ch].push(a),"url(#"+o+")"}}},{key:"__getRg",value:function(t,e,r,n){if(t===Ct.CANVAS){var i=e.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.r);return n.stop.forEach(function(t){i.addColorStop(t[1],Wh(t[0]))}),i}if(t===Ct.SVG){var a={tagName:"radialGradient",props:[["cx",n.cx],["cy",n.cy],["r",n.r]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Wh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[Ch].push(a),"url(#"+o+")"}}},{key:"__getCg",value:function(t,e,r,n){var i=n.cx,a=n.cy,o=n.r,s=n.deg,h=n.stop,l=h.length-1;h[l][1]<1&&h.push([h[l][0].slice(0),1]),0<h[0][1]&&h.unshift([h[0][0].slice(0),0]);for(var c=t===Ct.CANVAS?1.5:.5,u=[],_=0,f=h.length;_<f-1;_++)for(var d=360*h[_][1],p=360*h[_+1][1]-d,v=Math.ceil(p),y=p/v,g=h[_][0],m=h[_+1][0],E=[m[0]-g[0],m[1]-g[1],m[2]-g[2],m[3]-g[3]],T=[E[0]/v,E[1]/v,E[2]/v,E[3]/v],O=0;O<v;O++){var M=Pt(Bt.pointOnCircle(i,a,o,d+y*O+s-c),2),A=M[0],x=M[1],R=Pt(Bt.pointOnCircle(i,a,o,d+y*O+s+c),2),S=R[0],b=R[1];u.push([A,x,S,b,Math.round(g[0]+T[0]*O),Math.round(g[1]+T[1]*O),Math.round(g[2]+T[2]*O),Math.round(g[3]+T[3]*O)])}var k=u[0].slice(0),I=Pt(Bt.pointOnCircle(i,a,o,s),2),N=I[0],w=I[1];k[2]=N,k[3]=w;var D=h[h.length-1][0];k[4]=D[0],k[5]=D[1],k[6]=D[2],k[7]=D[3],u.push(k);var P,C=[];if(t===Ct.CANVAS)for(var L=0,F=u.length;L<F;L++){var B,H=u[L];P&&((B=e.createLinearGradient(P[0],P[1],H[2],H[3])).addColorStop(0,Wh([P[4],P[5],P[6],P[7]])),B.addColorStop(1,Wh([H[4],H[5],H[6],H[7]])),C.push([[[i,a],[P[0],P[1]],[H[2],H[3]]],B])),P=H}else if(t===Ct.SVG)for(var G=0,Y=u.length;G<Y;G++){var W,U,X=u[G];P&&(W={tagName:"linearGradient",props:[["x1",P[0]],["y1",P[1]],["x2",X[2]],["y2",X[3]]],children:[{tagName:"stop",props:[["stop-color",Wh([P[4],P[5],P[6],P[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",Wh([X[4],X[5],X[6],X[7]])],["offset","100%"]]}]},U=r.add(W),this.__config[Ch].push(W),C.push([[[i,a],[P[0],P[1]],[X[2],X[3]]],"url(#"+U+")"])),P=X}return C}},{key:"__cancelCache",value:function(){var t=this.__config;t[yh]=this.__cacheStyle={};var e=t[kh],r=t[Ih],n=t[Nh],i=t[wh],a=t[Dh];e&&e.release(),r&&r.release(),n&&(ee.releaseCacheCanvas(n.canvas),t[Nh]=null),i&&(ee.releaseCacheCanvas(i.canvas),t[wh]=null),a&&(ee.releaseCacheCanvas(a.canvas),t[Dh]=null)}},{key:"cancelCache",value:function(){this.__cancelCache();for(var t=this.domParent;t;)t.__cancelCache(),t=t.domParent}},{key:"updateStyle",value:function(e,r){var n=this,i=n.root,a=n.__config,o=hn.normalize(e);i?i.addRefreshTask(n.__task={__before:function(){var t;a[Ph]||((t={})[hh]=n,t[ch]=o,t[uh]=e,t[_h]=Object.keys(o).map(function(t){return $h.hasOwnProperty(t)||(t=parseInt(t)),t}),t[fh]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){Ft.isFunction(r)&&r.call(n,t)}}):(Object.assign(this.currentStyle,o),Ft.isFunction(r)&&r.call(n,0))}},{key:"updateFormatStyleNoOverwrite",value:function(e,r){var n,i=this.root,a=this.__config;i&&(n=this,i.addRefreshTask(n.__task={__before:function(){var t;a[Ph]||((t={})[hh]=n,t[ch]=e,t[_h]=Object.keys(e).map(function(t){return $h.hasOwnProperty(t)||(t=parseInt(t)),t}),t[fh]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){Ft.isFunction(r)&&r.call(n,t)}}))}},{key:"animate",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{};if(!this.isDestroyed){var n=new Ao(this,t,r);return this.animationList.push(n),!1===r.autoPlay?n:n.play()}}},{key:"removeAnimate",value:function(t){var e;t instanceof Ao&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(Ft.isFunction(e)){var t={__after:function(t){e(t)},__karasFramecb:e};return this.__frameAnimateList.push(t),Fi.onFrame(t),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,n=r.length;e<n;e++)r[e].__karasFramecb===t&&(r.splice(e,1),Fi.offFrame(t))}},{key:"__computeMeasure",value:function(t,e,r,n){hn.computeMeasure(this,r),Ft.isFunction(n)&&n(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){ot(at(R.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t),void 0!==r&&(this.__config[bh]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t}},{key:"__offsetY",value:function(t,e,r){ot(at(R.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t),void 0!==r&&(this.__config[bh]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t}},{key:"__resizeX",value:function(t){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,t<0&&(this.__config[xh]=!1)}},{key:"__resizeY",value:function(t){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,t<0&&(this.__config[xh]=!1)}},{key:"__spreadByBoxShadowAndFilter",value:function(t,e){var s=0,h=0;if(Array.isArray(t)&&t.forEach(function(t){var e,r=Pt(t,6),n=r[0],i=r[1],a=r[2],o=r[3];"inset"!==r[5]&&(e=Lt.int2convolution(a),e+=o,s=Math.max(s,n+e),h=Math.max(h,i+e))}),Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i,a=Pt(e[r],2),o=a[0],l=a[1];"blur"===o&&(i=Lt.int2convolution(l),s=Math.max(s,i),h=Math.max(h,i))}return[s,h]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},n=t?(n=Array.isArray(t)?t:[t]).map(function(t){return $o[Zo(t)]}):Object.keys(e);return n.forEach(function(t){$h.hasOwnProperty(t)?r[t]=e[t]:r[qo[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,n=this.offsetHeight,i=this.matrixEvent,a=Lt.calPoint([t,e],i),o=Lt.calPoint([t+r,e],i),s=Lt.calPoint([t+r,e+n],i),h=Lt.calPoint([t,e+n],i);return{left:Math.min(a[0],Math.min(o[0],Math.min(s[0],h[0]))),top:Math.min(a[1],Math.min(o[1],Math.min(s[1],h[1]))),right:Math.max(a[0],Math.max(o[0],Math.max(s[0],h[0]))),bottom:Math.max(a[1],Math.max(o[1],Math.max(s[1],h[1]))),points:[a,o,s,h]}}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.clientWidth,n=this.clientHeight,i=this.computedStyle,a=i[_s],o=i[ds],s=i[fs],h=i[us],l=i[Hs],c=i[zs],u=Pt(this.__spreadByBoxShadowAndFilter(l,c),2),_=u[0],f=u[1];return[t-_,e-f,t+(r+=h+o)+_,e+(n+=a+s)+f]}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"renderMatrix",get:function(){return this.__renderMatrix}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}}]),R}(),vl=d.STYLE_KEY.MARGIN_BOTTOM,yl=function(){function r(t,e){g(this,r),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return l(r,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var r=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.outerWidth}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}},{key:"marginBottom",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.computedStyle[vl])}),e}}]),r}(),gl=d.NODE_KEY.NODE_DOM_PARENT,ml=b.TYPE_VD,El=b.TYPE_GM,Tl=b.TYPE_CP;function Ol(t,e,r,n,i){if(Array.isArray(t))return t.map(function(t){return Ol(t,e,r,n)});if(Ft.isObject(t)&&t.$$type){var a=t.tagName,o=t.props,s=t.children,h=t.klass,l=t.$$type,c=t.inheritAnimate,u=t.__animateRecords;if(l===Tl&&t.placeholder)return t.value;if(l===ml){if("img"===a){if(_=new _l(a,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else _=new ul(a,o);if("p"===a)i=!0;else if("div"===a&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?Al(_,Ol(s,e,r,n,i)):[],_.__children=s}else if(l===El)var _=new(fl.getRegister(a))(a,o);else{if(l!==Tl)return new Sn(t);(_=new h(o)).__tagName=_.__tagName||a}t.vd=_,u&&(_.__animateRecords=u).list.forEach(function(t){t.target=t.target.vd}),c&&Ft.extendAnimate(c,_),_.__root=e,n&&(_.__host=n),l===Tl&&_.__init();var f=o.ref;return Ft.isString(f)&&f||Ft.isNumber(f)?r.ref[f]=_:Ft.isFunction(f)&&f(_),_}return new Sn(t)}function Ml(t){if(Array.isArray(t))return t.map(Ml);if(!t||-1===[ml,El,Tl].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,n){if(Array.isArray(t))t.forEach(function(t){e(r,t,n)});else if(!t||t.$$type!==ml&&t.$$type!==El)t&&t.$$type===Tl?(r.push(t),n.lastText=null):Ft.isNil(t)||""===t||(null!==n.lastText?r[r.length-1]=n.lastText+=t:r.push(t));else{if(-1<["canvas","svg"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg");t.$$type===ml&&Ml(t),r.push(t),n.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}function Al(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(t)?t.forEach(function(t){Al(e,t,n)}):(t instanceof cl||t instanceof dl||t instanceof Sn)&&(t.__parent=e,t.__domParent=e,t instanceof Sn&&Object.assign(t.__config,e.__config),t.__config&&(t.__config[gl]=e),n.prev&&((n.prev.__next=t).__prev=n.prev),(n.prev=t)instanceof dl&&((r=t.shadowRoot)instanceof Sn&&(r.__parent=e,Object.assign(r.__config,e.__config)),r.__domParent=e,r.__config&&(r.__config[gl]=e))),t}var xl={ref:function(t){cl=t.Xom,ul=t.Dom,_l=t.Img,fl=t.Geom,dl=t.Component},initRoot:function(t,e){return Al(e,Ol(Ml({children:t,$$type:ml}).children,e,e))},initCp:function(t,e,r){if(Ft.isObject(t)){var n=Ol(t,e,r,r);return Array.isArray(n)&&Al(r,n),n}return new Sn(t)},flattenJson:Ml,relation:Al,build:Ol},Rl=Ft.isNil,Sl=Ft.isFunction,bl=Ft.clone,kl=Ft.extend;var Il=function(){t(h,Di);var r=e(h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return g(this,h),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=Ft.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.__state={},t.__isMounted=!1,t.__taskList=[],t}return l(h,[{key:"setState",value:function(t,e){var r=this,n=this;if(Rl(t))t={};else{if(Sl(t))return void e.call(n);if(0===Object.keys(t).length)return void(Sl(e)&&e.call(n));var i=bl(n.state);t=kl(i,t)}var a,o,s=n.root;s&&n.__isMounted?n.__nextState?(Object.assign(n.__nextState,t),n.__taskList.push(e)):(n.__nextState=t,n.__taskList=[e],a=[],o=n.__task={__before:function(){a=n.__taskList.splice(0),function t(e){var r;e.__hasUpdate||(e.__hasUpdate=!0,(r=e.host)&&t(r))}(r)},__after:function(){a.forEach(function(t){Sl(t)&&t.call(n)})}},s.addRefreshCp(o)):Sl(e)&&(n.__state=t,e.call(n))}},{key:"__init",value:function(t){var r=this;this.__ref={};var e,n=this.root,i=t||xl.flattenJson(this.render()),a=xl.initCp(i,n,this);if(this.__cd=i,a instanceof Sn)ee.warn("Component render() return a text, should not inherit style/event");else if(a instanceof x){var o=hn.normalize(this.props.style),s=Object.keys(o);kl(a.style,o,s),kl(a.currentStyle,o,s),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)?(t=t.slice(2).toLowerCase(),a.listener[t]=e):/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))})}else{if(!(a instanceof h))throw new Error("Component render() must return a dom/text: "+this);ee.warn("Component render() return a component: "+this.tagName+" -> "+a.tagName+", should not inherit style/event")}for((this.__shadow=a).__host=this;a instanceof h;)a=a.shadowRoot;(a.__host=this).__shadowRoot=a,this.__isMounted||(this.__isMounted=!0,e=this.componentDidMount,Sl(e)&&n.once(Di.REFRESH,function(){e.call(r)}))}},{key:"render",value:function(){ee.warn("Component must implement render()!")}},{key:"__destroy",value:function(){var t;this.isDestroyed||(this.__isDestroyed=!0,t=this.componentWillUnmount,Sl(t)&&(t.call(this),this.__isMounted=!1),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__shadow=null,this.__shadowRoot=null,this.__parent=null)}},{key:"__emitEvent",value:function(t){var e=this.shadowRoot;if(!(e instanceof Sn))return e.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"__computeMeasure",value:function(t,e,r,n){var i=this.shadowRoot;i instanceof Sn?i.__computeMeasure(t,e):i.__computeMeasure(t,e,!0,n)}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),h}();Object.keys(Se.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config"]).forEach(function(e){Object.defineProperty(Il.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","__cancelCache","__structure","__modifyStruct","__updateStruct"].forEach(function(e){Il.prototype[e]=function(){var t=this.shadowRoot;if(t&&Sl(t[e]))return t[e].apply(t,arguments)}});var Nl={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},wl=d.STYLE_KEY,Dl=wl.POSITION,Pl=wl.DISPLAY,Cl=wl.FONT_WEIGHT,Ll=wl.MARGIN_LEFT,Fl=wl.MARGIN_TOP,Bl=wl.MARGIN_RIGHT,Hl=wl.MARGIN_BOTTOM,Gl=wl.PADDING_LEFT,Yl=wl.PADDING_BOTTOM,Wl=wl.PADDING_RIGHT,Ul=wl.PADDING_TOP,Xl=wl.BORDER_TOP_WIDTH,Kl=wl.BORDER_BOTTOM_WIDTH,zl=wl.BORDER_RIGHT_WIDTH,Vl=wl.BORDER_LEFT_WIDTH,jl=wl.TOP,$l=wl.RIGHT,ql=wl.BOTTOM,Zl=wl.LEFT,Jl=wl.WIDTH,Ql=wl.HEIGHT,tc=wl.TEXT_ALIGN,ec=wl.FLEX_DIRECTION,rc=wl.FLEX_BASIS,nc=wl.FLEX_SHRINK,ic=wl.FLEX_GROW,ac=wl.ALIGN_SELF,oc=wl.ALIGN_ITEMS,sc=wl.JUSTIFY_CONTENT,hc=wl.Z_INDEX,lc=d.NODE_KEY,cc=lc.NODE_CURRENT_STYLE,uc=lc.NODE_STYLE,_c=lc.NODE_STRUCT,fc=lc.NODE_DOM_PARENT,dc=d.STRUCT_KEY,pc=dc.STRUCT_NUM,vc=dc.STRUCT_LV,yc=dc.STRUCT_TOTAL,gc=dc.STRUCT_CHILD_INDEX,mc=dc.STRUCT_INDEX,Ec=R.AUTO,Tc=R.PX,Oc=R.PERCENT,Mc=hn.calAbsolute,Ac=hn.isRelativeOrAbsolute;function xc(t){var i,a,o,s=[],h=[],l={},c=!1,u=t.children;u.forEach(function(t,e){var r,n=t;t instanceof Il&&(t=t.shadowRoot),t instanceof pl&&t.isMask?void 0!==o?l[o].push(t):e&&(u[o=e-1].__iIndex=o,l[o]=[t],i=!0):(o=void 0,t instanceof pl&&Ac(t)?(n.__iIndex=e,r=n.__zIndex=t.currentStyle[hc],h.push(n),void 0===a?a=r:c||(r<a&&(c=!0),a=r)):s.push(n))}),c&&h.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__iIndex-e.__iIndex});var e=s.concat(h);if(i)for(var r=e.length-1;0<=r;r--){var n=e[r].__iIndex;l.hasOwnProperty(n)&&e.splice.apply(e,[r+1,0].concat(p(l[n])))}return e}var Rc=function(){t(u,pl);var o=e(u);function u(t,e,r){var n;g(this,u),(n=o.call(this,t,e)).__lineGroups=[];var i=h(n).style;i.display&&{flex:!0,block:!0,inline:!0,none:!0}.hasOwnProperty(i.display)||(Nl.INLINE.hasOwnProperty(n.tagName)?i.display="inline":i.display="block"),!i[Cl]&&Nl.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),n.__style=hn.normalize(i,Dt.DOM_ENTRY_SET),n.__currentStyle=Ft.extend({},n.__style),n.__children=r||[];var a=n.__config;return a[cc]=n.__currentStyle,a[uc]=n.__style,n}return l(u,[{key:"__structure",value:function(n,i,t){var e=ot(at(u.prototype),"__structure",this).call(this,n++,i,t),a=[e],r=this.__zIndexChildren=this.__zIndexChildren||xc(this);r.forEach(function(t,e){var r=t.__structure(n,i+1,e);Array.isArray(r)?(n+=r.length,a=a.concat(r)):(n++,a.push(r))});var o=a.length-1;return e[pc]=r.length,e[yc]=o,a}},{key:"__modifyStruct",value:function(t,e){var r,n=1<arguments.length&&void 0!==e?e:0,i=this.__config,a=i[_c],o=a[yc]||0,s=this.__structure(a[mc],a[vc],a[gc]);(r=t.__structs).splice.apply(r,[a[mc]+n,a[yc]+1].concat(p(s)));var h,l=0;return this!==t&&(l=((a=i[_c])[yc]||0)-o,(h=i[fc].__config[_c])[yc]=h[yc]||0,h[yc]+=l),[a,l]}},{key:"__updateStruct",value:function(t){var e=this.__config[_c],r=e[mc],n=e[yc],i=void 0===n?0:n,a=this.__zIndexChildren=xc(this);if(1!==a.length){a.forEach(function(t,e){t.__config[_c][gc]=e});for(var o,s=[],h=[],l=r+1;l<=i;l++){var c=t[l],u={child:c,list:t.slice(c[mc],c[mc]+c[yc]+1)};s.push(u),h.push(u),l+=c[yc]||0}s.sort(function(t,e){return t.child[gc]-e.child[gc]});for(var _,f=0,d=h.length;f<d;f++)if(h[f]!==s[f]){o=!0;break}o&&(_=[],s.forEach(function(t){_=_.concat(t.list)}),_.forEach(function(t,e){t[mc]=r+e+1}),t.splice.apply(t,[r+1,i].concat(p(_))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,n=this.currentStyle[Jl];if(n[1]===Tc)return t-n[0];if(n[1]===Oc)return t-e*n[0]*.01;for(var i=0;i<r.length;i++){if(t<0)return t;var a=r[i];t-=a instanceof pl||a instanceof Il?a.__tryLayInline(t,e):a.textWidth}return t}},{key:"__offsetX",value:function(e,r,n){ot(at(u.prototype),"__offsetX",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,n)})}},{key:"__offsetY",value:function(e,r,n){ot(at(u.prototype),"__offsetY",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,n)})}},{key:"__calAutoBasis",value:function(a,o,s,t){var e,r,n,i,h=0,l=0,c=0,u=this.flowChildren,_=this.currentStyle,f=_[Jl],d=_[Ql],p=_[Ll],v=_[Fl],y=_[Bl],g=_[Hl],m=_[Gl],E=_[Ul],T=_[Wl],O=_[Yl],M=_[Xl],A=_[zl],x=_[Kl],R=_[Vl],S=a?f:d;return S[1]===Tc&&(h=c=S[0],t&&(l=h)),u.forEach(function(t){var e,r,n,i;c=t instanceof pl||t instanceof Il&&t.shadowRoot instanceof pl?(r=(e=t.__calAutoBasis(a,o,s,!0)).b,n=e.min,i=e.max,h=Math.max(h,r),l=Math.max(l,n),Math.max(c,i)):a?(l=Math.max(t.charWidth,l),Math.max(t.textWidth,c)):(hn.computeReflow(t),t.__layout({x:0,y:0,w:o,h:s},!0),l=Math.max(l,t.height),Math.max(c,t.height))}),a?(e=this.__calMp(p,o)+this.__calMp(y,o)+this.__calMp(m,o)+this.__calMp(T,o),r=R[0]+A[0]+e,h+=r,c+=r,l+=r):(n=this.__calMp(v,o)+this.__calMp(g,o)+this.__calMp(E,o)+this.__calMp(O,o),i=M[0]+x[0]+n,h+=i,c+=i,l+=i),{b:h,min:l,max:c}}},{key:"__calMp",value:function(t,e){var r=0;return t[1]===Tc?r+=t[0]:t[1]===Oc&&(t[0]*=.01*e,t[1]=Tc,r+=t[0]),r}},{key:"__layoutNone",value:function(){ot(at(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof pl||t instanceof Il&&t.shadowRoot instanceof pl)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(e,r){var t=this.flowChildren,n=this.currentStyle,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[tc],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new yl(c,u);t.forEach(function(t){t instanceof pl||t instanceof Il&&t.shadowRoot instanceof pl?"inline"===t.currentStyle[Pl]?c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,r&&(d=Math.max(d,p),p=t.outerWidth)):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new yl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.outerWidth,v.add(t),r&&(p+=t.outerWidth)):(v.size&&(a.push(v),v.verticalAlign(),u+=v.height+v.marginBottom,v=new yl(e.x,u),r&&(d=Math.max(d,p),p=0)),t.__layout({x:e.x,y:u,w:_,h:f},r),c=e.x,u+=t.outerHeight,r&&(d=Math.max(d,t.outerWidth),p=0)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,r&&(d=Math.max(d,p),p=t.width)):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new yl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.width,v.add(t),r&&(p+=t.width))}),v.size&&(a.push(v),r?d=Math.max(d,p):v.verticalAlign(),u+=v.height);var y=this.__width=h||!r?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),v.size&&(u+=v.marginBottom),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=_-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)}),r||this.__marginAuto(n,e)}},{key:"__layoutFlex",value:function(t,c){var R=this,e=this.flowChildren,r=this.currentStyle,n=r[ec],i=r[sc],a=r[oc],o=this.__preLayout(t),s=o.fixedWidth,x=o.fixedHeight,S=o.x,b=o.y,k=o.w,I=o.h;if(s&&c)return this.__width=k,void this.__ioSize(k,this.height);var u=0,N="row"===n,w=[],D=[],P=[],C=[],L=0,F=0,B=0,_=0;if(e.forEach(function(t){if(t instanceof pl||t instanceof Il&&t.shadowRoot instanceof pl){var e=t.__calAutoBasis(!!c||N,k,I),r=e.b,n=e.min,i=e.max;if(c)return void(N?u+=i:u=Math.max(u,i));var a=t.currentStyle,o=t.computedStyle,s=a[ic],h=a[nc],l=a[rc];w.push(s),D.push(h),L+=s,F+=h,l[1]===Ec?(P.push(i),B+=i):l[1]===Tc?(o[rc]=r=l[0],P.push(r),B+=r):l[1]===Oc&&(r=o[rc]=(N?k:I)*l[0]*.01,P.push(r),B+=r),_+=i,C.push(n)}else{if(c)return void(N?u+=t.textWidth:u=Math.max(u,t.textWidth));w.push(0),D.push(1),F+=1,N?(P.push(t.textWidth),B+=t.textWidth,_+=t.textWidth,C.push(t.charWidth)):(t.__layout({x:0,y:0,w:k,h:I},!0),P.push(t.height),B+=t.height,_+=t.height,C.push(t.height))}}),c){var h=this.__width=Math.min(u,k);this.__ioSize(h,this.height)}else{var H=0,G=(N?k:I)<_;e.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M=D[e],A=w[e];n=G?(r=B-(N?k:I),M?P[e]-r*M/F:P[e]):(i=(N?k:I)-B,A?P[e]+i*A/L:P[e]),n=Math.max(n,C[e]),t instanceof pl||t instanceof Il&&t.shadowRoot instanceof pl?(a=t.currentStyle,o=t.computedStyle,s=a[Pl],h=a[ec],l=a[Jl],c=a[Ql],"inline"===s&&(a[Pl]=o[Pl]="block"),N?("flex"===s&&"column"===h&&x&&c[1]===Ec&&(c[0]=I,c[1]=Tc),t.__layout({x:S,y:b,w:n,h:I})):("flex"===s&&"row"===h&&l[1]===Ec&&(l[0]=k,l[1]=Tc),t.__layout({x:S,y:b,w:k,h:n})),(G&&M||!G&&A)&&(u=o[Xl],_=o[Kl],f=o[Fl],d=o[Hl],p=o[Ul],v=o[Yl],y=o[zl],g=o[Vl],m=o[Bl],E=o[Ll],T=o[Wl],O=o[Gl],N?(t.__width=n-E-m-O-T-g-y,t.__clientWidth=n-E-m-g-y,R.__offsetWidth=n-E-m,t.__outerWidth=n):(t.__height=n-f-d-p-v-u-_,t.__clientHeight=n-f-d-u-_,R.__offsetHeight=n-f-m,t.__outerHeight=n))):t.__layout({x:S,y:b,w:N?n:k,h:N?I:n}),H=N?(S+=t.outerWidth,Math.max(H,t.outerHeight)):(b+=t.outerHeight,Math.max(H,t.outerWidth))});var l=N?k-S+t.x:I-b+t.y;if(!G&&0===L&&0<l){var f=e.length;if("flex-end"===i)for(var d=0;d<f;d++){var p=e[d];N?p.__offsetX(l,!0):p.__offsetY(l,!0)}else if("center"===i)for(var v=.5*l,y=0;y<f;y++){var g=e[y];N?g.__offsetX(v,!0):g.__offsetY(v,!0)}else if("space-between"===i)for(var m=l/(f-1),E=1;E<f;E++){var T=e[E];N?T.__offsetX(m*E,!0):T.__offsetY(m*E,!0)}else if("space-around"===i)for(var O=l/(f+1),M=0;M<f;M++){var A=e[M];N?A.__offsetX(O*(M+1),!0):A.__offsetY(O*(M+1),!0)}}N?(x&&(H=I),b+=H):s&&(H=k),c||("stretch"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.computedStyle,c=t.currentStyle,u=c[ac],_=c[Jl],f=c[Ql],d=l[Xl],p=l[Kl],v=l[Fl],y=l[Hl],g=l[Ul],m=l[Yl],E=l[zl],T=l[Vl],O=l[Bl],M=l[Ll],A=l[Wl],x=l[Gl];N?"flex-start"===u||("center"===u?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===u?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):f[1]===Ec&&(n=t.height,i=(t.__height=l[Ql]=H-v-y-g-m-d-p)-n,t.__clientHeight+=i,t.__outerHeight+=i)):"flex-start"===u||("center"===u?0!=(a=H-t.outerWidth)&&t.__offsetX(.5*a,!0):"flex-end"===u?0!=(o=H-t.outerWidth)&&t.__offsetX(o,!0):_[1]===Ec&&(s=t.width,h=(t.__width=l[Jl]=H-M-O-x-A-E-T)-s,t.__clientWidth+=h,R.__offsetWidth+=h,t.__outerWidth+=h))}):"center"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x=t.currentStyle[ac];N?"flex-start"===x||("flex-end"===x?0!=(e=H-t.outerHeight)&&t.__offsetY(e,!0):"stretch"===x?(r=t.computedStyle,n=t.currentStyle[Ql],i=r[Xl],a=r[Kl],o=r[Fl],s=r[Hl],h=r[Ul],l=r[Yl],n[1]===Ec&&(c=t.height,u=(t.__height=r[Ql]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(.5*_,!0)):"flex-start"===x||("flex-end"===x?0!=(f=H-t.outerWidth)&&t.__offsetX(f,!0):"stretch"===x?(d=t.computedStyle,p=t.currentStyle[Jl],v=d[zl],y=d[Vl],g=d[Bl],m=d[Ll],E=d[Wl],T=d[Gl],p[1]===Ec&&(O=t.width,M=(t.__width=d[Jl]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,R.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerWidth)&&t.__offsetX(.5*A,!0))}):"flex-end"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x=t.currentStyle[ac];N?"flex-start"===x||("center"===x?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"stretch"===x?(r=t.computedStyle,n=t.currentStyle[Ql],i=r[Xl],a=r[Kl],o=r[Fl],s=r[Hl],h=r[Ul],l=r[Yl],n[1]===Ec&&(c=t.height,u=(t.__height=r[Ql]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(_,!0)):"flex-start"===x||("center"===x?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"stretch"===x?(d=t.computedStyle,p=t.currentStyle[Jl],v=d[zl],y=d[Vl],g=d[Bl],m=d[Ll],E=d[Wl],T=d[Gl],p[1]===Ec&&(O=t.width,M=(t.__width=d[Jl]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,R.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerHeight)&&t.__offsetY(A,!0))}):e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x=t.currentStyle[ac];N?"flex-start"===x||("center"===x?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===x?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):"stretch"===x&&(n=t.computedStyle,i=t.currentStyle[Ql],a=n[Xl],o=n[Kl],s=n[Fl],h=n[Hl],l=n[Ul],c=n[Yl],i[1]===Ec&&(u=t.height,_=(t.__height=t.__height=n[Ql]=H-s-h-l-c-a-o)-u,t.__clientHeight+=_,t.__outerHeight+=_))):"flex-start"===x||("center"===x?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"flex-end"===x?0!=(d=H-t.outerWidth)&&t.__offsetX(d,!0):"stretch"===x&&(p=t.computedStyle,v=t.currentStyle[Jl],y=p[zl],g=p[Vl],m=p[Bl],E=p[Ll],T=p[Wl],O=p[Gl],v[1]===Ec&&(M=t.width,A=(t.__width=p[Jl]=H-E-m-O-T-y-g)-M,t.__clientWidth+=A,R.__offsetWidth+=A,t.__outerWidth+=A)))}));var Y=this.__width=k,W=this.__height=x?I:b-t.y;this.__ioSize(Y,W),this.__marginAuto(r,t)}}},{key:"__layoutInline",value:function(e,r){var n=this,t=this.flowChildren,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[tc],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new yl(c,u);t.forEach(function(t){t instanceof pl||t instanceof Il&&t.shadowRoot instanceof pl?("inline"!==t.currentStyle[Pl]&&(t.currentStyle[Pl]=t.computedStyle[Pl]="inline",ee.error("Inline can not contain block/flex")),c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,d=Math.max(d,p),p=t.outerWidth):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new yl(c,u),d=Math.max(d,p),p=0),c+=t.outerWidth,v.add(t),p+=t.outerWidth)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,d=Math.max(d,p),p=t.width):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new yl(c,u),d=Math.max(d,p),p=0),c+=t.width,v.add(t),p+=t.width)}),v.size&&(a.push(v),r||v.verticalAlign(),u+=v.height,d=Math.max(d,p));var y=this.__width=h?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=n.__width-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)})}},{key:"__layoutAbs",value:function(n,i,R){var S=n.sx,b=n.sy,k=n.clientWidth,I=n.clientHeight,t=n.computedStyle,e=this.isDestroyed,r=this.children,a=this.absChildren,o=t[Pl],s=t[Xl],h=t[Vl],l=t[Fl],c=t[Ll],N=t[Gl];e||"none"===o?this.__layoutNone():(S+=c+h,b+=l+s,a.forEach(function(t){if(R){var e=t;if(e instanceof Il&&(e=t.shadowRoot),R!==e&&R!==t)return}var r=t.currentStyle,n=t.computedStyle;if("none"!==r[Pl]){t.__mp(r,n,k),"inline"===r[Pl]&&(r[Pl]=n[Pl]=t.style.display="block");var i,a,o,s,h,l,c,u,_,f,d,p=r[Zl],v=r[jl],y=r[$l],g=r[ql],m=r[Jl],E=r[Ql],T=r[Pl],O=r[ec];if(p[1]!==Ec?(f=!0,n[Zl]=Mc(r,"left",p,k)):n[Zl]="auto",y[1]!==Ec?(u=!0,n[$l]=Mc(r,"right",y,k)):n[$l]="auto",v[1]!==Ec?(c=!0,n[jl]=Mc(r,"top",v,I)):n[jl]="auto",g[1]!==Ec?(_=!0,n[ql]=Mc(r,"bottom",g,I)):n[ql]="auto",f&&u?(i=S+n[Zl],o=S+k-n[$l]-i):f&&m[1]!==Ec?(i=S+n[Zl],o=m[1]===Tc?m[0]:k*m[0]*.01):u&&m[1]!==Ec?(o=m[1]===Tc?m[0]:k*m[0]*.01,i=S+k-n[$l]-o,i-=n[Ll],i-=n[Bl],i-=n[Gl],i-=n[Wl],i-=r[Vl][0],i-=r[zl][0]):f?i=S+n[Zl]:u?(i=S+k-n[$l],h=!0):(i=S+N,m[1]!==Ec&&(o=m[1]===Tc?m[0]:k*m[0]*.01)),c&&_)a=b+n[jl],s=b+I-n[ql]-a;else if(c&&E[1]!==Ec)a=b+n[jl],s=E[1]===Tc?E[0]:I*E[0]*.01;else if(_&&E[1]!==Ec)s=E[1]===Tc?E[0]:I*E[0]*.01,a=b+I-n[ql]-s,a-=n[Fl],a-=n[Hl],a-=n[Ul],a-=n[Yl],a-=r[Xl][0],a-=r[Kl][0];else if(c)a=b+n[jl];else if(_)a=b+I-n[ql],l=!0;else{a=b;for(var M=t.prev;M;){if(M instanceof Sn||"absolute"!==M.computedStyle[Dl]){a=M.y+M.outerHeight;break}M=M.prev}M||(a=b),E[1]!==Ec&&(s=E[1]===Tc?E[0]:I*E[0]*.01)}("block"===T&&void 0===o||"flex"===T&&(void 0===o||"column"===O&&void 0===s))&&(d=!0);var A=h?i-S:k+S-i,x=l?a-b:I+b-a;d&&(t.__layout({x:i,y:a,w:A,h:x},!0,!0),A=t.outerWidth),t.__layout({x:i,y:a,w:A,h:x,w2:o,h2:s},!1,!0),h&&t.__offsetX(-t.outerWidth,!0),l&&t.__offsetY(-t.outerHeight,!0)}else t.__layoutNone()}),r.forEach(function(t){if(R){var e=t;if(e instanceof Il&&(e=t.shadowRoot),R!==e&&R!==t)return}var r;t instanceof u?t.__layoutAbs(Ac(t)?t:n,i):t instanceof Il&&((r=t.shadowRoot)instanceof u&&r.__layoutAbs(r,i))}))}},{key:"__computeMeasure",value:function(e,r,t,n){ot(at(u.prototype),"__computeMeasure",this).call(this,e,r,t,n),this.children.forEach(function(t){t.__computeMeasure(e,r,!1,n)})}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(u.prototype),"render",this).call(this,t,e,r,n,i);return t===Ct.SVG&&(this.virtualDom.type="dom"),a}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),ot(at(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return ot(at(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[Pl]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener,s=this.zIndexChildren;o.hasOwnProperty(a)&&(i=o[a]);for(var h=s.length-1;0<=h;h--){var l=s[h];if((l instanceof pl||l instanceof Il&&l.shadowRoot instanceof pl)&&l.__emitEvent(t)){if(t.__stopPropagation)return;return Ft.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0}}return ot(at(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__cancelCache",value:function(e){ot(at(u.prototype),"__cancelCache",this).call(this,e),e&&this.children.forEach(function(t){(t instanceof pl||t instanceof Il&&t.shadowRoot instanceof pl)&&t.__cancelCache(e)})}},{key:"__deepScan",value:function(e,r){ot(at(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return t instanceof Il&&(t=t.shadowRoot),t instanceof Sn||"absolute"!==t.currentStyle[Dl]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return t instanceof Il&&(t=t.shadowRoot),t instanceof pl&&"absolute"===t.currentStyle[Dl]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.height}}]),u}(),Sc=d.STYLE_KEY,bc=Sc.WIDTH,kc=Sc.HEIGHT,Ic=Sc.DISPLAY,Nc=Sc.BORDER_TOP_WIDTH,wc=Sc.BORDER_RIGHT_WIDTH,Dc=Sc.BORDER_LEFT_WIDTH,Pc=Sc.BORDER_BOTTOM_WIDTH,Cc=Sc.PADDING_TOP,Lc=Sc.PADDING_LEFT,Fc=Sc.BORDER_TOP_LEFT_RADIUS,Bc=Sc.BORDER_TOP_RIGHT_RADIUS,Hc=Sc.BORDER_BOTTOM_RIGHT_RADIUS,Gc=Sc.BORDER_BOTTOM_LEFT_RADIUS,Yc=Sc.VISIBILITY,Wc=d.UPDATE_KEY,Uc=Wc.UPDATE_NODE,Xc=Wc.UPDATE_FOCUS,Kc=Wc.UPDATE_IMG,zc=Wc.UPDATE_CONFIG,Vc=d.NODE_KEY,jc=Vc.NODE_CACHE,$c=Vc.NODE_CACHE_TOTAL,qc=Vc.NODE_DEFS_CACHE,Zc=R.AUTO,Jc=bn.canvasPolygon,Qc=bn.svgPolygon,tu=function(){t(it,Rc);var a=e(it);function it(t,e){var r;g(this,it);var n=(r=a.call(this,t,e)).props.src,i=r.__loadImg={};return n||(i.error=!0),r}return l(it,[{key:"__preLayout",value:function(t){var e,r,n=ot(at(it.prototype),"__preLayout",this).call(this,t),i=this.__loadImg;return i.error||(e=this.props.src,(r=ee.IMG[e])&&r.state===ee.LOADED&&(i.url=e,i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),n.fixedWidth&&n.fixedHeight||(i.error&&!this.props.placeholder?n.fixedWidth?n.h=n.w:n.fixedHeight?n.w=n.h:n.w=n.h=32:i.source?n.fixedWidth?n.h=n.w*i.height/i.width:n.fixedHeight?n.w=n.h*i.width/i.height:(n.w=i.width,n.h=i.height):n.w=n.h=0,n.fixedWidth=!0,n.fixedHeight=!0),n}},{key:"__addGeom",value:function(t,e){e=Ft.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),ot(at(it.prototype),"__destroy",this).call(this)}},{key:"__calCache",value:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x){var R,S,b,k,I,N=ot(at(it.prototype),"__calCache",this).call(this,t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x);return N||(R=this.computedStyle,S=this.__loadImg,k=(b=this.props).src,I=b.placeholder,"hidden"!==R[Yc]&&(R[bc]||R[kc])&&(S.error||(S.url===k||I)&&S.source)&&(N=!0)),N}},{key:"render",value:function(t,e,r,n,i){var a=this,o=ot(at(it.prototype),"render",this).call(this,t,e,r,n,i),s=o.offScreenFilter,h=o.offScreenMask,l=o.offScreenOverflow,c=o.offScreenBlend,u=this.width,_=this.height,f=this.isDestroyed,d=this.props,p=d.src,v=d.placeholder,y=this.computedStyle,g=this.computedStyle,m=g[Ic],E=g[Nc],T=g[wc],O=g[Pc],M=g[Dc],A=g[Cc],x=g[Lc],R=g[Fc],S=g[Bc],b=g[Hc],k=g[Gc],I=g[Yc],N=this.virtualDom,w=this.__config,D=this.__loadImg;if(!i&&(s||h||l||c)&&(r=(s||h||l||c).target.ctx),t===Ct.CANVAS&&i&&(w[$c]=w[jc]),D.url===p||D.error||(D.url=p,D.source=null,D.error=null,D.cache=!1,ee.measureImg(p,function(t){var i=a;if(t.url===D.url&&!i.isDestroyed){var e=function(){var e=i.root,t=i.currentStyle,r=t[bc],n=t[kc];e.delRefreshTask(i.__task),r[1]!==Zc&&n[1]!==Zc?e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[Uc]=i,t[Xc]=Do.REPAINT,t[zc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}}):e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[Uc]=i,t[Xc]=Do.REFLOW,t[Kc]=!0,t[zc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}})};if(t.success)D.source=t.source,D.width=t.width,D.height=t.height;else{if(v)return void ee.measureImg(v,function(t){t.success&&(D.error=!0,D.source=t.source,D.width=t.width,D.height=t.height,e())});D.error=!0}"none"!==y[Ic]&&e()}},{width:u,height:_})),f||"none"===m||"hidden"===I)return o;var P,C,L=w[jc];if(i&&L&&L.enabled&&(r=L.ctx),P=o.x2+x,C=o.y2+A,D.error&&!v&&it.showError){var F=.02*Math.min(u,_),B=P+.7*u,H=C+.3*_,G=5*F,Y=[[P+.15*u,C+.7*_],[P+.3*u,C+.4*_],[P+.5*u,C+.6*_],[P+.6*u,C+.5*_],[P+.9*u,C+.8*_],[P+.15*u,C+.8*_]];if(t===Ct.CANVAS){r.strokeStyle="#CCC",r.lineWidth=F,r.fillStyle="#DDD",r.beginPath(),r.moveTo(P,C),r.lineTo(P+u,C),r.lineTo(P+u,C+_),r.lineTo(P,C+_),r.lineTo(P,C),r.stroke(),r.closePath(),r.beginPath(),r.arc(B,H,G,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(Y[0][0],Y[0][1]);for(var W=1,U=Y.length;W<U;W++){var X=Y[W];r.lineTo(X[0],X[1])}r.lineTo(Y[0][0],Y[0][1]),r.fill(),r.closePath()}else if(t===Ct.SVG){this.__addGeom("rect",[["x",P],["y",C],["width",u],["height",_],["stroke","#CCC"],["stroke-width",F],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",B],["cy",H],["r",G],["fill","#DDD"]]);for(var K="",z=0,V=Y.length;z<V;z++){var j=Y[z];z&&(K+=" "),K+=j[0]+","+j[1]}this.__addGeom("polygon",[["points",K],["fill","#DDD"]])}}else if((D.url===p||v)&&D.source){var $=D.source;if($){var q,Z,J,Q=gi.calRadius(P,C,u,_,E,T,O,M,R,S,b,k);if(t===Ct.CANVAS)Q?(r.save(),r.beginPath(),Jc(r,Q),r.clip(),r.closePath(),r.drawImage($,P,C,u,_),r.restore()):r.drawImage($,P,C,u,_);else if(t===Ct.SVG){if(D.cache)return D.cache.cache=!0,N.children=[D.cache],void(!N.cache&&Q&&(q={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Qc(Q)],["fill","#FFF"]]}]},Z=n.add(q),w[qc].push(q),N.conClip="url(#"+Z+")"));u===D.width&&_===D.height||(J=Ai.matrixResize(D.width,D.height,u,_,P,C,u,_));var tt,et,rt=[["xlink:href",D.error?v:p],["x",P],["y",C],["width",D.width],["height",D.height]];Q&&(tt={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Qc(Q)],["fill","#FFF"]]}]},et=n.add(tt),w[qc].push(tt),N.conClip="url(#"+et+")",delete N.cache),J&&!Ft.equalArr(J,[1,0,0,1,0,0])&&rt.push(["transform","matrix("+Ft.joinArr(J,",")+")"]);var nt={type:"img",tagName:"image",props:rt};N.children=[nt],D.cache=nt}}}return o}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source&&this.__loadImg.url!==this.props.src)return ot(at(it.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"baseLine",get:function(){return this.height}}]),it}();c(tu,"showError",!0);var eu,ru,nu,iu=function(){function e(t){g(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return l(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),au=d.STYLE_KEY,ou=au.DISPLAY,su=au.MARGIN_TOP,hu=au.MARGIN_LEFT,lu=au.PADDING_TOP,cu=au.PADDING_LEFT,uu=au.WIDTH,_u=au.HEIGHT,fu=au.BORDER_TOP_WIDTH,du=au.BORDER_RIGHT_WIDTH,pu=au.BORDER_BOTTOM_WIDTH,vu=au.BORDER_LEFT_WIDTH,yu=au.FILL,gu=au.STROKE,mu=au.STROKE_MITERLIMIT,Eu=au.STROKE_WIDTH,Tu=au.STROKE_LINECAP,Ou=au.STROKE_LINEJOIN,Mu=au.STROKE_DASHARRAY,Au=au.STROKE_DASHARRAY_STR,xu=au.FILL_RULE,Ru=au.VISIBILITY,Su=d.NODE_KEY,bu=Su.NODE_CACHE_PROPS,ku=Su.NODE_CURRENT_PROPS,Iu=Su.NODE_CURRENT_STYLE,Nu=Su.NODE_IS_MASK,wu=Su.NODE_STYLE,Du=Su.NODE_CACHE,Pu=Su.NODE_CACHE_TOTAL,Cu=Su.NODE_CACHE_FILTER,Lu=Su.NODE_CACHE_MASK,Fu=Su.NODE_CACHE_OVERFLOW,Bu=Su.NODE_DEFS_CACHE,Hu=R.AUTO,Gu=R.PX,Yu=R.PERCENT,Wu=Ft.int2rgba,Uu=Ft.isNil,Xu=Ft.joinArr,Ku=bn.canvasPolygon,zu=bn.svgPolygon,Vu={},ju=function(){t(D,pl);var s=e(D);function D(t,e){var r;g(this,D),(r=s.call(this,t,e)).__isMulti=!!r.props.multi,r.__isClip=!!r.props.clip,r.__isMask=r.__isClip||!!r.props.mask;var n=h(r),i=n.style,a=n.isMask;a&&(i.background=null,i.border=null,i.strokeWidth=0,i.stroke=null),r.__style=hn.normalize(r.style,Dt.DOM_ENTRY_SET.concat(Dt.GEOM_ENTRY_SET)),r.__currentStyle=Ft.extend({},r.__style),r.__currentProps=Ft.clone(r.props);var o=r.__config;return o[bu]=r.__cacheProps={},o[ku]=r.__currentProps,o[Iu]=r.__currentStyle,o[Nu]=a,o[wu]=r.__style,r}return l(D,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle[uu];return r[1]===Gu?t-r[0]:r[1]===Yu?t-e*r[0]*.01:t}},{key:"__calAutoBasis",value:function(t){var e,r,n=0,i=0,a=0,o=this.currentStyle,s=(this.computedStyle,o[uu]),h=o[_u],l=o[fu],c=o[du],u=o[pu],_=o[vu],f=t?s:h;return f[1]!==Hu&&(n=a+=f[0]),t?(n+=e=c[0]+_[0],a+=e,i+=e):(n+=r=l[0]+u[0],a+=r,i+=r),{b:n,min:i,max:a}}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),n=r.fixedWidth,i=r.fixedHeight,a=r.w,o=r.h;this.__height=i?o:0,e?this.__width=n?a:0:(this.__width=a,this.__ioSize(a,this.height),this.__marginAuto(this.currentStyle,t),this.__config[bu]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,n=e.fixedHeight,i=e.x,a=e.y,o=e.w,s=e.h,h=this.__width=r?o:i-t.x,l=this.__height=n?s:a-t.y;this.__ioSize(h,l),this.__config[bu]=this.__cacheProps={}}},{key:"__calCache",value:function(n,t,i,a,e,o,s,h,r,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k){var I,N,w=this;return ot(at(D.prototype),"__calCache",this).call(this,n,t,i,a,e,o,s,h,r,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k),Uu(o[Eu])&&(o[Eu]=!0,I=s[Eu]||[],N=this.width,h[Eu]=I.map(function(t){return t[1]===Gu?t[0]:t[1]===Yu?t[0]*N*.01:0})),Uu(o[Mu])&&(o[Mu]=!0,h[Mu]=s[Mu]||[],o[Au]=h[Mu].map(function(t){return Xu(t,",")})),[Tu,Ou,mu,xu].forEach(function(t){h[t]=s[t]}),[gu,yu].forEach(function(t){var e,r;Uu(o[t])&&(e=s[t],h[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(Wu(t)):r.push("none"):r.push(w.__gradient(n,i,a,M+T,S+g,A-m,b-E,c,u,t))}),o[t]=r)}),"hidden"!==h[Ru]}},{key:"__preSet",value:function(){var t=this.sx,e=this.sy,r=this.width,n=this.height,i=this.__cacheStyle,a=this.computedStyle,o=a[fu],s=a[vu],h=a[ou],l=a[su],c=a[hu],u=a[lu],_=a[cu],f=a[Ru],d=t+s+c+_,p=e+o+l+u,v=d+.5*r,y=p+.5*n,g=i[yu],m=i[gu],E=i[Au],T=a[Eu],O=a[Tu],M=a[Ou],A=a[mu];return{x:t,y:e,originX:d,originY:p,width:r,height:n,cx:v,cy:y,display:h,stroke:m,strokeWidth:T,strokeDasharray:a[Mu],strokeDasharrayStr:E,strokeLinecap:O,strokeLinejoin:M,strokeMiterlimit:A,fill:g,visibility:f,fillRule:a[xu]}}},{key:"__preSetCanvas",value:function(t,e,r){var n=r.stroke,i=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,l=r.fill;t===Ct.CANVAS&&(l&&("linear"!==l.k&&("radial"!==l.k||Array.isArray(l.v))?"conic"===l.k||l.k||e.fillStyle===l||(e.fillStyle=l):e.fillStyle=l.v),n&&("linear"!==n.k&&("radial"!==n.k||Array.isArray(n.v))?"conic"===n.k||n.k||e.strokeStyle===n||(e.strokeStyle=n):e.strokeStyle=n.v),void 0!==i&&e.lineWidth!==i&&(e.lineWidth=i),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==h&&e.miterLimit!==h&&(e.miterLimit=h),Ft.isFunction(e.getLineDash)?a&&!Ft.equalArr(e.getLineDash(),a)&&e.setLineDash(a):a&&e.setLineDash(a))}},{key:"render",value:function(t,e,r,n,i){var a=this.__renderSelfData||ot(at(D.prototype),"render",this).call(this,t,e,r,n,i),o=this.__config,s=o[Du],h=o[Cu],l=o[Lu],c=o[Fu];if(t===Ct.CANVAS&&i&&(o[Pu]=o[Du]),e<Do.REPAINT&&(s&&s.available||!Do.contain(e,Do.FILTER)&&h||l||c)&&(a.break=!0),t===Ct.SVG&&(this.virtualDom.type="geom"),a.break)return a;var u=this.__preSet(t,r,n),_=a.x2,f=a.y2,d=u.originX,p=u.originY,v=this.computedStyle;return _+=v[cu],f+=v[lu],u.dx=_-d,u.dy=f-p,Object.assign(a,u)}},{key:"__renderPolygon",value:function(t,e,r,n){var i=n.fill,a=n.fillRule,o=n.stroke,s=n.strokeWidth,h=n.strokeDasharray,l=n.strokeDasharrayStr,c=n.strokeLinecap,u=n.strokeLinejoin,_=n.strokeMiterlimit,f=n.dx,d=n.dy,p=this.__cacheProps.list,v=this.isMulti;if(i.length<=1&&o.length<=1){var y={fill:i[0],fillRule:a[0],stroke:o[0],strokeWidth:s[0],strokeDasharray:h[0],strokeDasharrayStr:l[0],strokeLinecap:c[0],strokeLinejoin:u[0],strokeMiterlimit:_[0],dx:f,dy:d};this.__renderOnePolygon(t,e,r,v,p,y)}else{for(var g=0,m=i.length;g<m;g++){var E,T=i[g];T&&(E={fill:T,fillRule:a[g],dx:f,dy:d},this.__renderOnePolygon(t,e,r,v,p,E))}for(var O=0,M=o.length;O<M;O++){var A,x=o[O];x&&(A={stroke:x,strokeWidth:s[O],strokeDasharray:h[O],strokeDasharrayStr:l[O],strokeLinecap:c[O],strokeLinejoin:u[O],strokeMiterlimit:_[O],dx:f,dy:d},this.__renderOnePolygon(t,e,r,v,p,A))}}}},{key:"__renderOnePolygon",value:function(t,e,r,n,i,a){var o=a.fill,s=a.stroke,h=a.strokeWidth,l=o&&"conic"===o.k,c=s&&"conic"===s.k,u=o&&"radial"===o.k&&Array.isArray(o.v),_=h&&0<h&&s&&"radial"===s.k&&Array.isArray(s.v);l||c?(l?this.__conicGradient(t,e,r,i,n,a):"none"!==o&&this.__drawPolygon(t,e,r,n,i,a,!0),h&&0<h&&c?ee.warn("Stroke style can not use conic-gradient"):h&&0<h&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,a,!1,!0)):u||_?(u?this.__radialEllipse(t,e,r,i,n,a,"fill"):"none"!==o&&this.__drawPolygon(t,e,r,n,i,a,!0),h&&0<h&&_?(ee.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke.v=a.stroke.v[0],this.__drawPolygon(t,e,r,n,i,a,!1,!0)):h&&0<h&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,a,!1,!0)):this.__drawPolygon(t,e,r,n,i,a,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,n,i,a,o,s){var h=a.fill,l=a.stroke,c=a.strokeWidth,u=a.fillRule,_=a.strokeDasharrayStr,f=a.strokeLinecap,d=a.strokeLinejoin,p=a.strokeMiterlimit,v=a.dx,y=a.dy;if(t===Ct.CANVAS)this.__preSetCanvas(t,e,a),e.beginPath(),n?i.forEach(function(t){return Ku(e,t,v,y)}):Ku(e,i,v,y),o&&h&&"none"!==h&&e.fill(u),s&&"none"!==l&&c&&0<c&&e.stroke(),e.closePath();else if(t===Ct.SVG){var g="";n?i.forEach(function(t){return g+=zu(t)}):g=zu(i);var m=[["d",g]];if(!(h&&"none"!==h||l&&"none"!==l))return;o&&h&&"none"!==h?(m.push(["fill",h.v||h]),u&&"nonzero"!==u&&m.push(["fill-rule",u])):m.push(["fill","none"]),s&&"none"!==l&&c&&0<c?(m.push(["stroke",l.v||l]),m.push(["stroke-width",c]),this.__propsStrokeStyle(m,_,f,d,p)):m.push(["stroke-width",0]),this.addGeom("path",m)}}},{key:"__inversePtList",value:function(t,e,a){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Lt.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Lt.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,n,i,a,o){var s=a.strokeWidth,h=a.strokeDasharrayStr,l=a.strokeLinecap,c=a.strokeLinejoin,u=a.strokeMiterlimit,_=a.dx,f=a.dy,d=Pt(a[o].v,4),p=d[0],v=d[1],y=[d[2],d[3]];v=ei.calMatrixByOrigin(v,y);var g,m,E,T=Lt.inverse(v);n=this.__inversePtList(n,i,T),t===Ct.CANVAS?(v&&(e.save(),g=this.matrixEvent,v=Lt.multiply(g,v),e.setTransform(v[0],v[1],v[2],v[3],v[4],v[5])),e.beginPath(),e[o+"Style"]!==p&&(e[o+"Style"]=p),i?n.forEach(function(t){return bn.canvasPolygon(e,t,_,f)}):Ku(e,n,_,f),e[o](),e.closePath(),v&&e.restore()):t===Ct.SVG&&(m="",i?n.forEach(function(t){return m+=zu(t)}):m=zu(n),E=[["d",m]],"fill"===o?(E.push(["fill",p]),E.push(["strokeWidth",0])):"stroke"===o&&(E.push(["fill","none"]),E.push(["stroke",p]),E.push(["stroke-width",s]),this.__propsStrokeStyle(E,h,l,c,u)),E.push(["transform","matrix(".concat(Xu(v,","),")")]),this.addGeom("path",E))}},{key:"__conicGradient",value:function(t,e,n,r,i,a){var o,s,h,l=this,c=a.fill,u=a.dx,_=a.dy,f=c.v;t===Ct.CANVAS?(o=e.globalAlpha,e.globalAlpha=.5*o,i?r.forEach(function(t){e.save(),e.beginPath(),Ku(e,t,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),Ku(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()}):(e.save(),e.beginPath(),Ku(e,r,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),Ku(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()),e.globalAlpha=o):t===Ct.SVG&&(i?r.forEach(function(t){var e={tagName:"clipPath",children:[{tagName:"path",props:[["d",zu(t)],["fill","#FFF"]]}]},r=n.add(e);l.__config[Bu].push(e),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",zu(t[0])],["fill",t[1]],["clip-path","url(#"+r+")"]]})})}):(s={tagName:"clipPath",children:[{tagName:"path",props:[["d",zu(r)],["fill","#FFF"]]}]},h=n.add(s),this.__config[Bu].push(s),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",zu(t[0])],["fill",t[1]],["clip-path","url(#"+h+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,n,i){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),n&&"miter"!==n&&t.push(["stroke-linejoin",n]),i&&4!==i&&t.push(["stroke-miterlimit",i])}},{key:"__cancelCache",value:function(t){ot(at(D.prototype),"__cancelCache",this).call(this,t),this.__config[bu]=this.__cacheProps={}}},{key:"__releaseWhenEmpty",value:function(){}},{key:"addGeom",value:function(t,e){e=Ft.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return Uu(e)?this["__"+t]:e}},{key:"baseLine",get:function(){return this.__height}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"getRegister",value:function(t){if(!Vu.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return Vu[t]}},{key:"register",value:function(t,e){if(D.hasRegister(t))throw new Error("Geom has already register: ".concat(t));Vu[t]=e}},{key:"hasRegister",value:function(t){return Vu.hasOwnProperty(t)}}]),D}(),$u=d.NODE_KEY,qu=$u.NODE_COMPUTED_STYLE,Zu=$u.NODE_DOM_PARENT,Ju=$u.NODE_MATRIX_EVENT,Qu=$u.NODE_STRUCT,t_=b.TYPE_VD,e_=b.TYPE_GM,r_=b.TYPE_CP,n_=[],i_=[],a_={};function o_(t){t instanceof ru&&t.children.forEach(function(t){t instanceof ru?o_(t):t instanceof nu&&t.__hasUpdate&&(t.__hasUpdate=!1,s_(t,t.props))})}function s_(t,e,r){t.__nextState||r?!Ft.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.__state=r,t.__nextState=null;var n=t.shadow,i=t.shadowRoot,a=t.__cd,o=xl.flattenJson(t.render());(function(t,e,r){var o=u_(e,{},t),s=u_(r,{}),h=[],l=[];Object.keys(o).forEach(function(t){var e=o[t];s[t]||(e.json.key=a_)}),Object.keys(s).forEach(function(t){var e,r,n,i=o[t],a=s[t];i?(e=i.json,r=a.json,n=i.vd,e.$$type===r_&&r.$$type===r_?e.klass===r.klass&&(c_(e,r,n),e.key=r.key=a_,l.push(n)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===e_&&e.props.multi!==r.props.multi||(r.inheritAnimate=n),e.key=r.key=a_,r.$$type===t_&&h.push({vd:n,oj:e,nj:r}))):a.json.key=a_}),h.forEach(function(t){l_(t.vd,t.oj,t.nj)}),h_(t,e,r),l.forEach(function(t){__(t)})})(n,a,o),t.__init(o);var s=t.shadowRoot;s instanceof eu?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sy1","__sy2","__sy3","__sy4","__computedStyle"].forEach(function(t){s[t]=i[t]}),s.__config[qu]=i.computedStyle):s.__config[Ju]=i.__config[Ju];["__x","__y","__width","__height","__sx1","__layoutData","__parent","__domParent"].forEach(function(t){s[t]=i[t]}),s.__config[Zu]=i.domParent,s.__config[Qu]=i.__config[Qu],n_.push(t),Ft.isObject(o)&&o.placeholder||i_.push(n);o&&o.placeholder&&delete o.placeholder}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,o_(t.shadowRoot)):o_(t.shadowRoot)}function h_(t,e,r){if(Ft.isObject(r))if(r.$$type===r_){if(r.key===a_)return;e.$$type===r.$$type&&e.klass===r.klass&&(c_(e,r,t),__(t))}else r.$$type===e_&&e.$$type===e_?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.inheritAnimate=t):r.$$type===t_&&e.$$type===t_&&(e.tagName===r.tagName&&(r.inheritAnimate=t),l_(t,e,r))}function l_(t,e,r){for(var n=e.children,i=r.children,a=n.length,o=i.length,s=t.children,h=0,l=0,c=0,u=Math.min(a,o);h<u;h++){var _=n[h+l],f=i[h+c];_.key===a_&&f.key===a_||(_.key===a_?(l++,h--,a--,u=Math.min(a,o)):f.key===a_?(c++,h--,o--,u=Math.min(a,o)):h_(s[h+l],_,f))}}function c_(i,a,o){a.placeholder=!0;var s=(a.value=o).shadowRoot,h={};Object.keys(i.props).forEach(function(t){var e=i.props[t];h[t]=e}),Object.keys(a.props).forEach(function(t){var e,r,n=a.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=n,(e=h[t])?(delete h[t],e!==n&&(t=t.slice(2).toLowerCase(),s.listener[t]=n)):(t=t.slice(2).toLowerCase(),s.listener[t]=n)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=n,(r=h[t])?(delete h[t],r!==n&&(t=t.slice(2).toLowerCase(),o.off(t,h[t]),o.on(t,n)),delete h[t]):(t=t.slice(2).toLowerCase(),o.on(t,n)))}),Object.keys(h).forEach(function(t){var e=h[t];/^on[a-zA-Z]/.test(t)?(a.props[t]=e,t=t.slice(2).toLowerCase(),delete s.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(a.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),s_(o,a.props,!Ft.equal(i.props,a.props))}function u_(t,r,n){var e;return Array.isArray(t)?t.forEach(function(t,e){return u_(t,r,n&&n[e])}):Ft.isObject(t)&&(t.$$type!==t_&&t.$$type!==e_&&t.$$type!==r_||(t.$$type===t_&&u_(t.children,r,n&&n.children),e=t.props.key,Ft.isNil(e)||""===e||(r.hasOwnProperty(e)&&ee.error("Component "+n.tagName+" has duplicate key: "+e),r[e]={json:t,vd:n}))),r}function __(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var f_,d_={ref:function(t){eu=t.Xom,ru=t.Dom,t.Img,t.Geom,nu=t.Component},updateList:n_,check:o_,checkCp:s_,did:function(){n_.forEach(function(t){Ft.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),n_.splice(0),i_.forEach(function(t){t.__destroy()}),i_=[]}},p_=Ft.joinVd,v_=Ft.joinDef,y_=Do.contain,g_=Do.NONE,m_=Do.TRANSFORM_ALL,E_=Do.OPACITY,T_=Do.FILTER,O_=Do.MIX_BLEND_MODE;function M_(t,e,r){var n=t.childNodes;!function(t,e,r){for(var n=e.length,i=r.length,a=0,o=t.childNodes;a<Math.min(n,i);a++)!function(e,t,r){if(t.tagName!==r.tagName)C_(e,"beforebegin",v_(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Pt(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Pt(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)});for(var d=e.childNodes,p=t.children.length,v=r.children.length,y=0;y<Math.min(p,v);y++)I_(e,y,t.children[y],r.children[y]);if(y<p)for(var g=p-1;y<=g;g--)P_(e,d,g);else if(y<v)for(;y<v;y++)D_(e,d,y,p_(r.children[y]))}}(o[a],e[a],r[a]);if(a<n)for(var s=n-1;a<=s;s--)P_(t,o,s);else if(a<i)for(;a<i;a++)D_(t,o,a,v_(r[a]))}(n[0],e.defs,r.defs),r.hasOwnProperty("lv")||k_(n[1],e.bb,r.bb),S_(t,e,r,!0)}function A_(t,e,r){"dom"===e.type?"dom"===r.type?S_(t,e,r):"geom"===r.type?b_(t,e,r):w_(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var n=e.children.length,i=r.children.length,a=0;a<Math.min(n,i);a++)I_(t,a,e.children[a],r.children[a],!0);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)P_(t,o,s);else if(a<i)for(;a<i;a++)D_(t,o,a,p_(r.children[a]))}(t,e,r):w_(t,r):"geom"===e.type?"dom"===r.type?b_(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return R_(t,0,r,r.lv);if(r.hasOwnProperty("lv"))R_(t,0,r,r.lv);else{x_(t,e,r),k_(t.firstChild,e.bb,r.bb);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)I_(o,a,e.children[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)P_(o,s,h);else if(a<i)for(;a<i;a++)D_(o,s,a,p_(r.children[a]))}}(t,e,r):w_(t,r):"img"===e.type&&("img"===r.type?N_(t,e,r):w_(t,r))}function x_(t,e,r){var n=r.transform,i=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,h=r.filter,l=r.conClip;e.transform!==n&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),e.opacity!==i&&(1!==i&&void 0!==i?t.setAttribute("opacity",i):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==h&&(h?t.setAttribute("filter",h):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==l&&(l?t.childNodes[1].setAttribute("clip-path",l):t.childNodes[1].removeAttribute("clip-path"))}function R_(t,e,r,n){var i=r.transform,a=r.opacity,o=r.mask,s=r.filter,h=r.mixBlendMode;o?t.setAttribute("mask",o):t.removeAttribute("mask"),n!==g_&&(y_(n,m_)&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),y_(n,E_)&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),y_(n,T_)&&(s?t.setAttribute("filter",s):t.removeAttribute("filter")),y_(n,O_)&&(h?t.setAttribute("style","mix-blend-mode:"+h):t.removeAttribute("style")))}function S_(t,e,r,n){if(r.cache)R_(t,0,r,r.lv);else{r.hasOwnProperty("lv")?R_(t,0,r,r.lv):(x_(t,e,r),n||k_(t.firstChild,e.bb,r.bb));for(var i=e.children.length,a=r.children.length,o=0,s=t.lastChild,h=s.childNodes;o<Math.min(i,a);o++)A_(h[o],e.children[o],r.children[o]);if(o<i)for(var l=i-1;o<=l;l--)P_(s,h,l);else if(o<a)for(;o<a;o++)D_(s,h,o,p_(r.children[o]))}}function b_(t,e,r){x_(t,e,r),k_(t.firstChild,e.bb,r.bb);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)w_(s[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)P_(o,s,h);else if(a<i)for(;a<i;a++)D_(o,s,a,p_(r.children[a]))}function k_(t,e,r){for(var n=e.length,i=r.length,a=0;a<Math.min(n,i);a++)I_(t,a,e[a],r[a]);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)P_(t,o,s);else if(a<i)for(;a<i;a++)D_(t,o,a,p_(r[a]))}function I_(t,e,r,n,i){var a=t.childNodes;r.tagName!==n.tagName?w_(a[e],n):(N_(a[e],r,n),i&&r.content!==n.content&&(a[e].innerHTML=n.content))}function N_(e,t,r){if(!r.cache){for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Pt(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Pt(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)})}}function w_(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=p_(t)})):r=p_(e),C_(t,"beforebegin",r),t.parentNode.removeChild(t)}function D_(t,e,r,n){r>=e.length?C_(t,"beforeend",n):C_(e[r],"beforebegin",n)}function P_(t,e,r){e[r]&&t.removeChild(e[r])}function C_(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(f_=f_||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(f_.childNodes[0],t)}}var L_=Ft.isFunction,F_=function(){function t(){g(this,t),this.__records=[],this.__auto=[],this.__list=[]}return l(t,[{key:"add",value:function(t){-1===this.__list.indexOf(t)&&this.list.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);-1<e&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__auto=[],this.__list=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(t){var o=this,e=0<arguments.length&&void 0!==t?t:this.__records;e.length&&e.splice(0).forEach(function(t){var e,r,n,i=t.target,a=t.animate;Array.isArray(a)?a.forEach(function(t){var e=t.value,r=t.options;r.autoPlay=!1;var n=i.animate(e,r);o.add(n)}):(e=a.value,(r=a.options).autoPlay=!1,n=i.animate(e,r),o.add(n))})}},{key:"__playAuto",value:function(){this.init(this.__auto),this.__action("play")}},{key:"play",value:function(e){this.init();var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,L_(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,L_(e)&&e(t))}])}},{key:"cancel",value:function(e){var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,L_(e)&&e(t))}])}},{key:"finish",value:function(e){var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,L_(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndStop",[t,e,r&&function(t){n&&(n=!1,L_(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){n&&(n=!1,L_(r)&&r(t))}])}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"list",get:function(){return this.__list}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),B_=d.STYLE_KEY,H_=B_.POSITION,G_=B_.DISPLAY,Y_=B_.OPACITY,W_=B_.VISIBILITY,U_=B_.FILTER,X_=B_.OVERFLOW,K_=B_.MIX_BLEND_MODE,z_=B_.FILL,V_=B_.TRANSFORM,j_=B_.TRANSFORM_ORIGIN,$_=d.NODE_KEY,q_=$_.NODE_CACHE,Z_=$_.NODE_CACHE_TOTAL,J_=$_.NODE_CACHE_OVERFLOW,Q_=$_.NODE_CACHE_MASK,tf=$_.NODE_CACHE_FILTER,ef=$_.NODE_MATRIX,rf=$_.NODE_MATRIX_EVENT,nf=$_.NODE_OPACITY,af=$_.NODE_COMPUTED_STYLE,of=$_.NODE_CURRENT_STYLE,sf=$_.NODE_LIMIT_CACHE,hf=$_.NODE_BLUR_VALUE,lf=$_.NODE_REFRESH_LV,cf=$_.NODE_HAS_CONTENT,uf=$_.NODE_CACHE_STYLE,_f=$_.NODE_DEFS_CACHE,ff=d.STRUCT_KEY,df=ff.STRUCT_NODE,pf=ff.STRUCT_INDEX,vf=ff.STRUCT_TOTAL,yf=ff.STRUCT_HAS_MASK,gf=ff.STRUCT_LV,mf=Do.NONE,Ef=Do.TRANSFORM_ALL,Tf=Do.OPACITY,Of=Do.FILTER,Mf=Do.REPAINT,Af=Do.contain,xf=Do.MIX_BLEND_MODE;function Rf(t,b,e,r,k,I){var N={},w=t.__sx1,D=t.__sy1,n=t.__config,i=n[q_],a=n[hf],P=i&&i.available?i.bbox.slice(0):t.bbox,C=[e],L=c({},e,a);for(I[e]=1;C.length;)C.splice(0).forEach(function(t){for(var e,r,n=t+1,i=t+(b[t][vf]||0)+1;n<i;n++){var a,o,s,h,l,c,u,_=b[n],f=_[df],d=_[vf],p=f.__sx1,v=f.__sy1,y=f.__config,g=y[hf],m=y[sf],E=y[q_],T=y[Z_],O=y[af],M=O[G_],A=O[W_],x=O[V_],R=O[j_],S=O[Y_];if(m)return;"none"!==M?"hidden"!==A&&(k[n]=t,I[n]=I[t]*S,a=void 0,s=o=0,T&&T.available?(n+=d||0,a=T.bbox.slice(0),o=T.dbx,s=T.dby):E&&E.available?(a=E.bbox.slice(0),o=E.dbx,s=E.dby):a=f.bbox,a&&(u=N[t],h=(L[t]||0)+(g||0),x&&!Lt.isE(x)&&((l=R.slice(0))[0]+=p-w+o,l[1]+=v-D+s,c=ei.calMatrixByOrigin(x,l),u=u?Lt.multiply(u,c):c),u&&(N[n]=u),a=Ft.transformBbox(a,u,h,h),d&&(L[n]=h,C.push(n)),P?(r=a,(e=P)[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[2]),e[3]=Math.max(e[3],r[3])):P=a)):n+=d||0}});if(!(P[2]-P[0]>jo.MAX||P[3]-P[1]>jo.MAX))return P;n[sf]=!0}function Sf(t,e,r){var n=t.computedStyle,i=n[V_],a=n[j_];return t.__config[Q_]=jo.genMask(e,t.next,r,i,a)}var bf,kf={renderCacheCanvas:function(tt,et,rt,t){for(var m,E,nt=t.__structs,it=t.width,at=t.height,T=[],O=[],M=1,A=[],x=0,R=0,e=nt.length;R<e;R++)(function(t){var e,r,n,i,a,o,s,h,l,c=nt[t],u=c[df],_=c[gf],f=c[vf],d=u.__config,p=d[lf],v=d[q_],y=d[Z_],g=d[af];u instanceof Sn?R=t:(0===t?A.push(u):x<_?(m=E[rf],Lt.isE(m)&&(m=null),T.push(m),M=E[nf],O.push(M),A.push(u)):_<x&&(e=x-_,T.splice(-e),m=T[_],O.splice(-e),M=O[_],A.splice(-e),E=A[_]),"none"===g[G_]?R=t+=f||0:(p<Mf?(d[lf]=mf,r=d[of],n=d[af],i=d[uf],Af(p,Ef)&&(a=u.__calMatrix(p,i,r,n),o=d[ef],a&&o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5]),m&&a&&(a=Lt.multiply(m,a)),(o=d[rf])&&a&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5])),Af(p,Tf)&&(s=n[Y_]=r[Y_],d[nf]=M*s),Af(p,Of)&&(h=n[U_]=r[U_],d[hf]=0,Array.isArray(h)&&h.forEach(function(t){var e=Pt(t,2),r=e[0],n=e[1];"blur"===r&&(d[hf]=n)}),l=u.bbox,v=v?jo.updateCache(v,l):jo.getInstance(l),(d[q_]=v).enabled||ee.warn("Downgrade for cache-filter change error")),Af(p,xf)&&(n[K_]=r[K_]),y&&y.available&&(t+=f||0)):u instanceof ju?(u.__renderSelfData=u.__renderSelf(tt,p,et,rt,!0),(v=d[q_])&&v.available&&u.render(tt,p,v.ctx,rt,!0)):u.render(tt,p,et,rt,!0),E=d,x=_,R=t))})(R);var r,n,i,a,o=function(d){for(var p=[0],v={0:{i:0}};p.length;)p.splice(0).forEach(function(t){for(var e,r=d[t],n=v[t],i=t+1,a=i+(r[vf]||0);i<a;i++){var o,s,h=d[i],l=h[df],c=h[vf],u=h[yf],_=l.__config,f=_[Z_];"none"!==_[af][G_]?(o={i:i},s=s||o,e&&(o.p=e),e=o,l instanceof Sn||!c||(f&&f.available||(v[i]=o,p.push(i)),i+=c||0)):(i+=c||0,u&&(i+=u))}n&&e&&(n.p&&(s.p=n.p),n.p=e)});for(var t=v[0],e=[];t;)e.push(t.i),t=t.p;return e.reverse()}(nt);if(o.length){for(var s=Math.max(1,jo.NUM),h=nt[o[0]][gf],l={},c={},u={},_=0,f=o.length-1;_<f;_++)c[o[_]]=_;for(var d=0,p=o.length-1;d<p;d++){var v=nt[o[d]],y=v[df],g=v[gf],S=v[pf],b=v[yf],k=v[vf],I=y.__config,N=I[af],w=N[H_],D=N[W_],P=N[X_],C=N[K_];if(y instanceof Sn)h=g,"hidden"!==D&&(l[g-1]=l[g-1]||0,l[g-1]++);else{var L,F,B,H,G,Y,W,U=I[cf],X=I[hf],K=I[sf],z=I[Z_],V=I[tf],j=I[Q_],$=I[J_],q=I[q_],Z=void 0;if(g<h?("hidden"!==D&&U&&(l[g]=l[g]||0,l[g]++),L=l[g]||0,l[g]=0,l[g-1]=l[g-1]||0,!K&&(s<=L||("relative"===w||"absolute"===w)&&(U||L)||(b||0<X||"visible"!==P||"normal"!==C)&&(U||L))?(l[g-1]++,Z=!0):l[g-1]+=L):(l[g-1]=l[g-1]||0,!K&&(("relative"===w||"absolute"===w)&&U&&"hidden"!==D||z&&z.available||b||(0<X||"visible"!==P||"normal"!==C)&&U&&"hidden"!==D||z&&z.available)?(l[g-1]++,Z=!0):(U&&"hidden"!==D||z&&z.available)&&l[g-1]++),h=g,Z){if(z&&z.available||(z=I[Z_]=function(t,e,r,n,i,a,o){if(0===n)return e.__config[Z_]=o;var s={},h={},l={},c=Rf(e,i,r,0,s,l);if(c&&(a?a.reset(c):a=e.__config[Z_]=jo.getInstance(c),a&&a.enabled)){var u=e.__sx1,_=e.__sy1;a.__appendData(u,_),a.__available=!0;var f=a,d=Pt(f.coords,2),p=d[0],v=d[1],y=f.ctx,g=f.dbx,m=f.dby;o&&o.available&&(y.globalAlpha=1,y.setTransform(1,0,0,1,0,0),jo.drawCache(o,a));for(var E=r+1,T=r+(n||0)+1;E<T;E++){var O,M,A,x,R,S,b,k,I,N=i[E],w=N[df],D=N[vf],P=N[yf],C=w.__config,L=C[q_],F=C[Z_],B=C[tf],H=C[Q_],G=C[J_],Y=C[af],W=Y[G_],U=Y[W_],X=Y[V_],K=Y[j_],z=Y[K_];"none"!==W?"hidden"!==U&&(k=h[O=s[E]],M=l[E],w instanceof Sn?(y.globalAlpha=l[O],A=h[O]||[1,0,0,1,0,0],y.setTransform(A[0],A[1],A[2],A[3],A[4],A[5]),w.render(t,0,y,null,p-u+g,v-_+m)):(X&&!Lt.isE(X)&&(x=K.slice(0),L&&L.available?(x[0]+=L.sx1,x[1]+=L.sy1):(x[0]+=w.__sx1,x[1]+=w.__sy1),R=-u+g+p,S=-_+m+v,x[0]+=R,x[1]+=S,b=ei.calMatrixByOrigin(X,x),k=k?Lt.multiply(k,b):b),k&&(h[E]=k),(I=(I=G||H||B)||(F&&F.available?F:null))?E+=D||0:L&&L.available&&(I=L),I&&(y.globalCompositeOperation="normal"!==z?"source-over":z.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()}),y.globalAlpha=M,k?y.setTransform(k[0],k[1],k[2],k[3],k[4],k[5]):y.setTransform(1,0,0,1,0,0),jo.drawCache(I,a),I===H&&(E+=P)))):(E+=D||0,P&&(E+=P))}return a}}(tt,y,S,k||0,nt,z,q)),(!z||!z.available)&&U)continue;var J=z;if(!(0<X)||V&&V.available||(J=I[tf]=(i=z,a=X,y.__config[tf]=jo.genBlur(i,a))),"hidden"!==P||$&&$.available||(J=I[J_]=(n=J,(r=y).__config[J_]=jo.genOverflow(n,r))),b&&(!j||!j.available)){for(var Q=void 0,ot=S+k;b--;)ot++,c.hasOwnProperty(ot)&&(Q=ot);var st=y.next.isClip;Q?u[Q]={target:J,node:y,isClip:st,__config:I,__hasContent:U}:U&&(I[Q_]=Sf(y,J,st))}}u.hasOwnProperty(S)&&(B=(F=u[S]).target,H=F.node,G=F.isClip,Y=F.__config,W=F.__hasContent,H instanceof tu&&!W||(Y[Q_]=Sf(H,B,G)))}}}for(var ht={},lt={},ct={},ut={},_t={},ft=0,dt=nt.length;ft<dt;ft++)(function(s){var t=nt[s],e=t[df],r=t[vf],n=t[yf],i=e.__config,a=i[nf],o=i[rf],h=i[hf],l=i[sf],c=i[q_],u=i[Z_],_=i[tf],f=i[Q_],d=i[J_],p=i[lf],v=i[af],y=v[G_],g=v[W_],m=v[X_],E=v[K_];if(e instanceof Sn)et.globalAlpha=a,et.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]),e.render(tt,0,et,rt);else{var T,O,M,A,x=d||f||_;if(x=x||(u&&u.available?u:null)){if("none"===y)return s+=r||0,n&&(s+=n),ft=s;if(et.globalCompositeOperation="normal"===E?"source-over":E.replace(/[A-Z]/,function(t){return ft=s,"-"+t.toLowerCase()}),n){for(var R=s+(r||0)+1;n--;)R+=(nt[R][vf]||0)+1;s=R-1}s+=r||0,jo.draw(et,a,o,x),et.globalCompositeOperation="source-over"}else{if(ut.hasOwnProperty(s)&&(et=ut[s].ctx),c&&c.available){if("none"===y)return s+=r||0,n&&(s+=n),ft=s;var S,b,k,I,N,w,D,P={};if(!h||(I=ee.getCacheCanvas(it,at)).ctx&&(S={ctx:et,blur:h,target:I},et=I.ctx,P.offScreenFilter=S),n){for(var C,L=s+(r||0)+1;n--;)L+=(nt[L][vf]||0)+1;s=L-1,S?b=S:(C=ee.getCacheCanvas(it,at)).ctx&&(b={ctx:et,target:C},et=C.ctx),P.offScreenMask=b}"hidden"===m&&(S||b?k=S||b:(N=ee.getCacheCanvas(it,at)).ctx&&(k={ctx:et,target:N},et=N.ctx),P.offScreenOverflow=k),"normal"!==E&&(S||b||k?D=S||b||k:(w=ee.getCacheCanvas(it,at),D={ctx:et,target:w,mixBlendMode:E},et=w.ctx),P.offScreenBlend=D),"hidden"!==g&&jo.draw(et,a,o,c)}else if(l){if(P=e instanceof ju?e.__renderSelfData=e.__renderSelf(tt,p,et,rt):e.render(tt,p,et,rt),"none"===y)return s+=r||0,n&&(s+=n),ft=s;var F,B,H,G=P||{},Y=G.offScreenFilter,W=G.offScreenMask,U=G.offScreenOverflow,X=G.offScreenBlend;if(Y&&((ht[F=s+(r||0)]=ht[F]||[]).unshift(Y),et=Y.target.ctx),W){for(var K,z,V=s+(r||0)+1;n--;){var j=nt[V],$=j[vf],q=j[df].currentStyle,Z=q[G_],J=q[W_];"none"!==Z?("hidden"!==J&&(K?z=V:K=z=V),V++):V+=($||0)+1}var Q=ee.getCacheCanvas(it,at);ut[K]=Q,_t[z]={mask:Q,offScreenMask:W,isClip:nt[K][df].isClip},et=W.target.ctx}X&&((ct[B=s+(r||0)]=ct[B]||[]).unshift(X),et=X.target.ctx),U&&((lt[H=s+(r||0)]=lt[H]||[]).unshift(U),et=U.target.ctx),e instanceof ju&&e.render(tt,e.__refreshLevel,et,rt)}else n&&(s+=r||0,s+=n);ht.hasOwnProperty(s)&&ht[s].forEach(function(t){var e,r=ee.getCacheWebgl(it,at,"__$$blur$$__");Ni.gaussBlur(t.target,r,t.blur,it,at).clear(),ut.hasOwnProperty(s+1)||lt.hasOwnProperty(s)||ct.hasOwnProperty(s)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),ee.releaseCacheCanvas(e.canvas),et=t.ctx)}),lt.hasOwnProperty(s)&&lt[s].forEach(function(t){var e=t.target,r=t.ctx,n=t.x,i=t.y,a=t.outerWidth,o=t.outerHeight;et.globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.fillStyle="#FFF",et.beginPath(),et.rect(n,i,a,o),et.fill(),et.closePath(),et.globalCompositeOperation="source-over",ut.hasOwnProperty(s+1)||ct.hasOwnProperty(s)||(r.drawImage(e.canvas,0,0),et.clearRect(0,0,it,at),ee.releaseCacheCanvas(e.canvas),et=r)}),ct.hasOwnProperty(s)&&ct[s].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,ut.hasOwnProperty(s+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),ee.releaseCacheCanvas(e.canvas),(et=t.ctx).globalCompositeOperation="source-over")}),_t.hasOwnProperty(s)&&(O=(T=_t[s]).mask,M=T.offScreenMask,T.isClip?((et=O.ctx).globalCompositeOperation="source-out",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(M.target.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",M.target.ctx.clearRect(0,0,it,at),ee.releaseCacheCanvas(M.target.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),et.globalCompositeOperation="source-over",O.draw(et),O.ctx.clearRect(0,0,it,at),ee.releaseCacheCanvas(O.canvas)):((et=M.target.ctx).globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",O.ctx.clearRect(0,0,it,at),ee.releaseCacheCanvas(O.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),A=M.target,et.drawImage(A.canvas,0,0),et.globalCompositeOperation="source-over",A.draw(et),A.ctx.clearRect(0,0,it,at),ee.releaseCacheCanvas(M.target.canvas)))}}ft=s})(ft)},renderCanvas:function(I,N,w,t){for(var D=t.__structs,P=t.width,C=t.height,L={},F={},B={},H={},G={},Y=0,e=D.length;Y<e;Y++)(function(h){var t=D[h],e=t[df],r=t[vf],n=t[yf],i=e.__config,a=i[af],o=i[lf];H.hasOwnProperty(h)&&(N=H[h].ctx);var s=void 0,s=e instanceof ju?e.__renderSelfData=e.__renderSelf(I,o,N,w):e.render(I,o,N,w);if("none"===a[G_])return h+=r||0,n&&(h+=n),Y=h;var l,c,u,_,f,d,p,v=s||{},y=v.offScreenFilter,g=v.offScreenMask,m=v.offScreenOverflow,E=v.offScreenBlend;if(y&&((L[l=h+(r||0)]=L[l]||[]).unshift(y),N=y.target.ctx),g||n){for(var T,O,M=h+(r||0)+1;n--;){var A=D[M],x=A[vf],R=A[df].currentStyle,S=R[G_],b=R[W_];"none"!==S?("hidden"!==b&&(T?O=M:T=O=M),M++):M+=(x||0)+1}var k=ee.getCacheCanvas(P,C);H[T]=k,G[O]={mask:k,offScreenMask:g,isClip:D[T][df].isClip},N=g.target.ctx}E&&((B[c=h+(r||0)]=B[c]||[]).unshift(E),N=E.target.ctx),m&&((F[u=h+(r||0)]=F[u]||[]).unshift(m),N=m.target.ctx),e instanceof ju&&e.render(I,o,N,w),L.hasOwnProperty(h)&&L[h].forEach(function(t){var e,r=ee.getCacheWebgl(P,C,"__$$blur$$__");Ni.gaussBlur(t.target,r,t.blur,P,C).clear(),H.hasOwnProperty(h+1)||F.hasOwnProperty(h)||B.hasOwnProperty(h)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,P,C),ee.releaseCacheCanvas(e.canvas),N=t.ctx)}),F.hasOwnProperty(h)&&F[h].forEach(function(t){var e=t.matrix,r=t.target,n=t.ctx,i=t.x,a=t.y,o=t.outerWidth,s=t.outerHeight;N.globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),N.fillStyle="#FFF",N.beginPath(),N.rect(i,a,o,s),N.fill(),N.closePath(),N.globalCompositeOperation="source-over",H.hasOwnProperty(h+1)||B.hasOwnProperty(h)||(n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,n.drawImage(r.canvas,0,0),N.clearRect(0,0,P,C),ee.releaseCacheCanvas(r.canvas),N=n)}),B.hasOwnProperty(h)&&B[h].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,H.hasOwnProperty(h+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,P,C),ee.releaseCacheCanvas(e.canvas),(N=t.ctx).globalCompositeOperation="source-over")}),G.hasOwnProperty(h)&&(f=(_=G[h]).mask,d=_.offScreenMask,_.isClip?((N=f.ctx).globalCompositeOperation="source-out",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(d.target.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",d.target.ctx.clearRect(0,0,P,C),ee.releaseCacheCanvas(d.target.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),N.globalCompositeOperation="source-over",f.draw(N),f.ctx.clearRect(0,0,P,C),ee.releaseCacheCanvas(f.canvas)):((N=d.target.ctx).globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",f.ctx.clearRect(0,0,P,C),ee.releaseCacheCanvas(f.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),p=d.target,N.drawImage(p.canvas,0,0),N.globalCompositeOperation="source-over",p.draw(N),p.ctx.clearRect(0,0,P,C),ee.releaseCacheCanvas(d.target.canvas))),Y=h})(Y)},renderSvg:function(tt,et,rt,t,e){var nt=t.__structs,it=t.width,at=t.height,ot={};if(!e)for(var r=0,n=nt.length;r<n;r++){var i=nt[r],a=i[df],o=i[vf],s=i[yf],h=a.__config,l=h[lf],c=h[_f];s&&(Mf<=l||Af(l,Ef|Tf))&&(ot[r+(o||0)+1+s-1]=l),l<Mf&&function(){var t,e=Af(l,Of);ot.hasOwnProperty(r)?(t=ot[r],!Af(l,Ef)&&t<Mf&&!Af(t,Ef)&&c.forEach(function(t){e&&"filter"===t.tagName&&"feGaussianBlur"===t.children[0].tagName||rt.addCache(t)})):c.forEach(function(t){e&&"filter"===t.tagName&&"feGaussianBlur"===t.children[0].tagName||rt.addCache(t)})}()}for(var st,ht,lt,ct={},ut=[],_t=[],ft=0,dt=0,u=nt.length;dt<u;dt++)!function(t){var e,r,n,i=nt[t],l=i[df],a=i[vf],o=i[yf],s=i[gf],c=l.__config,h=l.computedStyle[G_],u=c[Z_],_=c[lf],f=c[_f];o&&"none"!==h&&(ct[(r=(e=t+(a||0)+1)+o)-1]={index:t,start:e,end:r,isClip:nt[e][df].isClip}),s<ft?(ut.splice(s),st=ut[s-1],_t.splice(s),ht=_t[s-1]):ft<s&&(ut.push(lt.__matrix),n=lt.virtualDom,_t.push(n),ht=n);var d=void 0;if(_<Mf&&!(l instanceof Sn)){c[lf]=mf,d=l.virtualDom,u&&u.available?(t+=a||0,d.cache=!0):(u&&(u.available=!0),d=l.__virtualDom=Ft.extend({},d),l instanceof Rc&&!(l instanceof tu)&&(d.children=[]),delete d.cache,"none"===l.computedStyle[G_]&&(t+=a||0));var p,v,y,g,m=c[of],E=c[af],T=c[uf];if(Af(_,Ef)&&(p=l.__calMatrix(_,T,m,E),v=c[ef],p&&v&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5]),!p||Lt.isE(p)?delete d.transform:d.transform="matrix("+Ft.joinArr(p,",")+")",st&&p&&(p=Lt.multiply(st,p)),(v=c[rf])&&p&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5])),Af(_,Tf)&&(1===(y=E[Y_]=m[Y_])?delete d.opacity:d.opacity=y),Af(_,Of)){var O=E[U_]=m[U_];delete d.filter;for(var M=f.length-1;0<=M;M--){var A=f[M];if("filter"===A.tagName&&"feGaussianBlur"===A.children[0].tagName){rt.removeCache(A);break}}Array.isArray(O)&&O.forEach(function(t){var e,r,n,i,a,o=Pt(t,2),s=o[0],h=o[1];"blur"===s&&0<h&&(i={tagName:"filter",props:[["x",-(e=Lt.int2convolution(h))/(r=l.outerWidth)],["y",-e/(n=l.outerHeight)],["width",1+2*e/r],["height",1+2*e/n]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",h]]}]},a=rt.add(i),c[_f].push(i),d.filter="url(#"+a+")")})}Af(_,xf)&&("normal"!==(g=E[K_]=m[K_])?d.mixBlendMode=g:delete d.mixBlendMode),d.lv=_}else c[_f]&&c[_f].splice(0),l instanceof ju&&(l.__renderSelfData=l.__renderSelf(tt,_,et,rt)),l.render(tt,_,et,rt),d=l.virtualDom,"none"===h&&(t+=a||0,o&&(t+=o));if(ct.hasOwnProperty(t)&&(ot.hasOwnProperty(t)||Mf<=_||Af(_,Ef|Tf))){var x=ct[t],R=x.index,S=x.start,b=x.end,k=x.isClip,I=nt[R][df],N=[];k&&N.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(it,",0L").concat(it,",").concat(at,"L0,").concat(at,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var w=S;w<b;w++){var D=nt[w][df],P=D.computedStyle,C=P[G_],L=P[W_],F=P[z_],B=D.virtualDom,H=B.children,G=B.opacity;if("none"!==C&&"hidden"!==L){H=Ft.clone(H),N=N.concat(H);for(var Y=0,W=H.length;Y<W;Y++){var U=H[Y],X=U.tagName,K=U.props;if("path"===X){if(k)for(var z=0,V=K.length;z<V;z++){var j=K[z];"fill"===j[0]&&(j[1]=Ft.int2invert(F[0]))}var $=D.renderMatrix,q=Lt.inverse(I.renderMatrix),$=Lt.multiply(q,$);K.push(["transform","matrix(".concat($.join(","),")")]),Ft.isNil(G)||1===G||K.push(["opacity",G])}}}}for(var Z=f.length-1;0<=Z;Z--){"mask"===f[Z].tagName&&f.splice(Z,1)}var J={tagName:"mask",props:[],children:N},Q=rt.add(J);f.push(J),Q="url(#"+Q+")",I.virtualDom.mask=Q}ht&&!l.isMask&&ht.children.push(d),0===t&&(st=c[ef],ht=d),ft=s,lt=l,dt=t}(dt)}},If=d.STYLE_KEY,Nf=If.TOP,wf=If.RIGHT,Df=If.BOTTOM,Pf=If.LEFT,Cf=If.POSITION,Lf=If.DISPLAY,Ff=If.VISIBILITY,Bf=If.COLOR,Hf=If.WIDTH,Gf=If.HEIGHT,Yf=If.Z_INDEX,Wf=If.MARGIN_TOP,Uf=If.MARGIN_LEFT,Xf=If.PADDING_TOP,Kf=If.PADDING_LEFT,zf=If.BORDER_TOP_WIDTH,Vf=If.BORDER_LEFT_WIDTH,jf=d.UPDATE_KEY,$f=jf.UPDATE_NODE,qf=jf.UPDATE_STYLE,Zf=jf.UPDATE_KEYS,Jf=jf.UPDATE_COMPONENT,Qf=jf.UPDATE_FOCUS,td=jf.UPDATE_IMG,ed=jf.UPDATE_MEASURE,rd=jf.UPDATE_OVERWRITE,nd=jf.UPDATE_LIST,id=jf.UPDATE_CONFIG,ad=d.NODE_KEY,od=ad.NODE_TAG_NAME,sd=ad.NODE_CACHE_STYLE,hd=ad.NODE_CACHE_PROPS,ld=ad.NODE_CURRENT_STYLE,cd=ad.NODE_COMPUTED_STYLE,ud=ad.NODE_CURRENT_PROPS,_d=ad.NODE_DOM_PARENT,fd=ad.NODE_IS_MASK,dd=ad.NODE_REFRESH_LV,pd=ad.NODE_IS_DESTROYED,vd=ad.NODE_STYLE,yd=ad.NODE_UPDATE_HASH,gd=ad.NODE_UNIQUE_UPDATE_ID,md=ad.NODE_CACHE,Ed=ad.NODE_CACHE_TOTAL,Td=ad.NODE_CACHE_FILTER,Od=ad.NODE_CACHE_OVERFLOW,Md=ad.NODE_CACHE_MASK,Ad=ad.NODE_STRUCT,xd=d.STRUCT_KEY,Rd=xd.STRUCT_INDEX,Sd=xd.STRUCT_TOTAL,bd=xd.STRUCT_NODE,kd=(c(bf={},Nf,!0),c(bf,wf,!0),c(bf,Df,!0),c(bf,Pf,!0),bf),Id=Ft.isNil,Nd=Ft.isObject,wd=Ft.isFunction,Dd=R.AUTO,Pd=R.PX,Cd=R.PERCENT,Ld=R.INHERIT,Fd=hn.calRelative,Bd=hn.isRelativeOrAbsolute,Hd=hn.equalStyle,Gd=Do.contain,Yd=Do.getLevel,Wd=Do.isRepaint,Ud=Do.NONE,Xd=Do.FILTER,Kd=Do.REPAINT,zd=Do.REFLOW,Vd=Se.isIgnore,jd=Se.isGeom,$d=Se.isMeasure;function qd(t,e){var r=t.currentStyle[e],n=t.computedStyle[e];if(r[1]===Pd)return r[0]===n;if(r[1]!==Cd)return!1;var i=t.domParent.__layoutData["width"===e?"w":"h"];return r[0]*i*.01===n}function Zd(t){return qd(t,Hf)&&qd(t,Gf)}var Jd=1;function Qd(t,e){return t.hasOwnProperty("__uniqueReflowId")&&e[t.__uniqueReflowId]>=Jd}function tp(t,e,r){var n,i,a;i=e,a=r,(n=t).hasOwnProperty("__uniqueReflowId")||(n.__uniqueReflowId=ep,i[ep++]={node:n,lv:Jd,component:a}),e[t.__uniqueReflowId].lv|=Jd}var ep=0;var rp=0;function np(t,e,r,n,i,a,o,s,h){var l,c=r[$f],u=r[qf],_=r[rd],f=r[Qf],d=r[td],p=r[Jf],v=r[ed],y=r[nd],g=r[Zf],m=r[id];if(!m[pd]){_&&Object.assign(m[vd],_),y&&!p&&(g=(g||[]).slice(0),l={},g.forEach(function(t){l[t]=!0}),y.forEach(function(t){var e=t[qf],r=t[rd];(t[Zf]||[]).forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,g.push(t))}),r&&Object.assign(m[vd],r),e&&(u?Object.assign(u,e):u=e)}));var E,T,O,M,A=m[od],x=m[sd],R=m[hd],S=m[ld],b=m[cd],k=m[ud],I=m[_d],N=m[fd],w=f||Ud,D=v;if(!p&&u&&g)for(var P=0,C=g.length;P<C;P++){var L=g[P],F=u[L];if(c instanceof ju&&jd(A,L))Hd(L,F,k[L],c)||(w|=Kd,R[L]=void 0,k[L]=F);else if(!Hd(L,F,S[L],c))if(Vd(L))x[L]=void 0,S[L]=F;else{if(kd.hasOwnProperty(L)){var B=S[Cf];if("relative"!==B&&"absolute"!==B){delete u[L];continue}}else L===Lf&&(M=!0);w|=Yd(L),$d(L)&&(D=!0),x[L]=void 0,S[L]=F,L===Yf&&c!==e&&(E=!0),L===Ff&&(T=!0),L===Bf&&(O=!0)}}if(w!==Ud||p){if(E&&I&&delete I.__zIndexChildren,T||O)for(var H=e.__structs,G=c.__config[Ad],Y=G[Rd]+1,W=Y+G[Sd];Y<W;Y++){var U=H[Y],X=U[bd],K=U[Sd],z=X.__config,V=z[ld],j=void 0;T&&(X instanceof Sn||V[Ff][1]===Ld)&&(j=!0),O&&(X instanceof Sn||V[Bf][1]===Ld)&&(j=!0),j?(z[dd]|=Kd,X instanceof pl&&X.__cancelCache()):Y+=K||0}if(N){for(var $=c.prev;$&&$.isMask;)$=$.prev;$&&$.__config[Md]&&($.__config[Md].release(),$.__config[Md]=null)}!p&&Wd(w)?(E&&t===Ct.SVG&&(w|=Kd,I&&ip(I)),E&&!p&&s&&I&&!I.hasOwnProperty("__uniqueZId")&&(s[rp]=!0,I.__uniqueZId=rp++,h.push(I))):(n.push({node:c,style:u,img:d,component:p}),D&&i.push(c)),m[dd]|=w;var q=Kd<=w||t===Ct.SVG&&c instanceof ju;if(q&&(m[md]&&m[md].release(),m[Ed]&&m[Ed].release(),m[Md]&&(m[Md].release(),m[Md]=null),m[Od]&&(m[Od].release(),m[Od]=null)),(q||Gd(w,Xd))&&m[Td]&&(m[Td].release(),m[Td]=null),"none"===b[Lf]&&w<zd)return!1;var Z=I;if(M)for(;Z;){var J=Z.__config;if("none"===J[cd][Lf])return!(b[Lf]="none");Z=J[_d]}for(Z=I;Z;){var Q=Z.__config;if(Q.hasOwnProperty(gd)){var tt=Q[gd];if(a.hasOwnProperty(tt))break;a[tt]=!0}else a[rp]=!0,Q[gd]=rp++,o.push(Z);var et=Q[dd];Kd<=et&&Q[md]&&Q[md].release(),Q[Ed]&&Q[Ed].release(),Q[Td]&&(Q[Td].release(),Q[Td]=null),Q[Md]&&(Q[Md].release(),Q[Md]=null),Q[Od]&&(Q[Od].release(),Q[Od]=null),Z=Q[_d]}return!0}delete m[gd]}}function ip(t,e){var r=t.__config;e?r[dd]|=Kd:r[Ed].release(),Array.isArray(t.children)&&t.children.forEach(function(t){t instanceof Il&&(t=t.shadowRoot),t instanceof Sn||ip(t,!0)})}var ap=0,op=function(){t(a,Rc);var i=e(a);function a(t,e,r){var n;return g(this,a),(n=i.call(this,t,e)).__cd=r||[],n.__dom=null,n.__mw=0,n.__mh=0,n.__task=[],n.__taskCp=[],n.__ref={},n.__updateHash={},n.__reflowList=[{node:h(n)}],n.__animateController=new F_,Di.mix(h(n)),n.__config[yd]=n.__updateHash,n}return l(a,[{key:"__initProps",value:function(){var t,e=this.props.width;Id(e)||0<(t=parseFloat(e)||0)&&(this.__width=t);var r,n=this.props.height;Id(n)||0<(r=parseFloat(n)||0)&&(this.__height=r)}},{key:"__genHtml",value:function(){var r=this,n="<".concat(this.tagName);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(n+=function(t,e){var r=Array.isArray(e)?Ft.joinSourceArray(e):Ft.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+Ft.encodeHtml(r,!0)+'"'}(t,e))}),n+="></".concat(this.tagName,">")}},{key:"__wrapEvent",value:function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f;return-1===["touchend","touchcancel"].indexOf(t.type)&&(e=this.dom,r=this.__scx,n=this.__scy,a=(i=e.getBoundingClientRect()).x,o=i.y,s=i.left,h=i.top,l=i.width,c=i.height,u=a||s||0,_=o||h||0,u=(f=t.touches?t.touches[0]:t).clientX-u,_=f.clientY-_,Id(r)?u*=this.width/l:u/=r,Id(n)?_*=this.height/c:_/=n),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:u,y:_,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e),e}}},{key:"appendTo",value:function(t){var e,n,i;t=function(t){if(Ft.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=xl.initRoot(this.__cd,this),this.__initProps(),(this.__root=this).cache=!!this.props.cache,t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(this.tagName),this.__dom||(t.innerHTML=this.__genHtml(),this.__dom=t.querySelector(this.tagName))),this.__uuid=Id(this.__dom.__uuid)?ap++:this.__dom.__uuid,this.__defs=this.dom.__defs||iu.getInstance(this.__uuid),this.width&&this.height||(e=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=Ct.CANVAS):"svg"===this.tagName&&(this.__renderMode=Ct.SVG),this.refresh(null,!0),this.dom.__root?this.dom.__root.destroy():(n=this.dom,i=a,["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(r){n.addEventListener(r,function(t){var e=n.__root;e&&e instanceof i&&(-1<["touchend","touchcancel","touchmove"].indexOf(r)?e.__touchstartTarget&&e.__touchstartTarget.__emitEvent(e.__wrapEvent(t),!0):e.__cb(t))})}),this.dom.__uuid=this.__uuid),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r,n=this.isDestroyed,i=this.renderMode,a=this.ctx,o=this.defs,s=this.width,h=this.height;if(!n){if(o.clear(),e)this.__checkRoot(s,h),this.__computeMeasure(i,a);else if(!this.__checkUpdate(i,a,s,h))return;ee.measureText(),this.__checkReflow(s,h),i===Ct.CANVAS?(this.__clear(a),this.cache?kf.renderCacheCanvas(i,a,o,this):kf.renderCanvas(i,a,o,this)):i===Ct.SVG&&(kf.renderSvg(i,a,o,this,e),(r=this.virtualDom).defs=o.value,this.dom.__root?M_(this.dom,this.dom.__vd,r):this.dom.innerHTML=Ft.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=o),wd(t)&&t(),this.emit(Di.REFRESH)}}},{key:"destroy",value:function(){this.__destroy();var t=this.dom;t&&(t.__root=null)}},{key:"scale",value:function(t,e){var r=0<arguments.length&&void 0!==t?t:1,n=1<arguments.length&&void 0!==e?e:r;this.__scx=r,this.__scy=n}},{key:"resize",value:function(t,e,r){t===this.width&&e===this.height||(this.__width=t,this.__hegiht=e,this.addRefreshTask(r||function(){}))}},{key:"addRefreshTask",value:function(t){var e,n;t&&((e=this.task).length||(Fi.nextFrame({__before:function(r){(n=e.splice(0)).length&&n.forEach(function(t,e){Nd(t)&&wd(t.__before)&&t.__before(r)})},__after:function(e){n.forEach(function(t){Nd(t)&&wd(t.__after)?t.__after(e):wd(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.task,r=0,n=e.length;r<n;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,n=this,i=this.taskCp;i.length||(Fi.__nextFrameCp({__before:function(e){(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),d_.check(n),d_.updateList.length&&d_.updateList.forEach(function(t){var e=t.shadowRoot;e instanceof Sn&&(e=e.domParent);var r={};r[$f]=e,r[qf]=e.currentStyle,r[Qf]=zd,r[ed]=!0,r[Jf]=t,r[id]=e.__config,n.__addUpdate(e,e.__config,n,n.__config,r)}))},__after:function(e){r.forEach(function(t){t.__after(e)}),d_.did()}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t)}},{key:"__checkRoot",value:function(t,e){var r=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(r[Lf])&&(n[Lf]=r[Lf]="block"),"absolute"===r[Cf]&&(n[Cf]=r[Cf]="static"),r[Hf]=[t,Pd],r[Gf]=[e,Pd],n[Hf]=t,n[Gf]=e}},{key:"__addUpdate",value:function(t,e,r,n,i){var a,o,s,h=n[yd];t===r?(h=r.__updateRoot)?(i[td]&&(h[td]=i[td]),i[Qf]&&(h[Qf]|=i[Qf]),i[ed]&&(h[ed]=!0),i[qf]&&(h[nd]=h[nd]||[]).push((c(a={},qf,i[qf]),c(a,rd,i[rd]),c(a,Zf,i[Zf]),a))):r.__updateRoot=i:e.hasOwnProperty(gd)?h.hasOwnProperty(e[gd])?(o=h[e[gd]],i[td]&&(o[td]=i[td]),i[Qf]&&(o[Qf]|=i[Qf]),i[ed]&&(o[ed]=!0),i[qf]&&(o[nd]=o[nd]||[]).push((c(s={},qf,i[qf]),c(s,rd,i[rd]),c(s,Zf,i[Zf]),s))):ee.error("Update process miss uniqueUpdateId"):(e[gd]=rp,h[rp++]=i)}},{key:"__checkUpdate",value:function(s,h,t,e){var l=this,r=[],n=[],i={},a=[],o={},c=[],u=l.__updateRoot,_=l.__updateHash;u&&(l.__updateRoot=null,y=np(s,l,u,n,r,i,a),l.__checkRoot(t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var v=np(s,l,_[f[d]],n,r,i,a,o,c),y=y||v;l.__reflowList=n,rp=0,l.__updateHash=l.__config[yd]={},a.forEach(function(t){delete t.__config[gd]}),c.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(l.__structs))});var g={};r.forEach(function(t){var e=t.__config[gd],r=t.domParent;if(!g.hasOwnProperty(e)){g[e]=!0;var n=t;if(Se.isMeasureInherit(_[e][qf]))for(;r&&r!==l;){var i,a=r.__config[gd],o=r.currentStyle;if(!(r.__config.hasOwnProperty(gd)?(i=_[a][qf],g[a]=!0,!!Se.measureInheritList(i).length):Se.isMeasureInherit(o)))break;r=(n=r).domParent}n.__computeMeasure(s,h,function(t){t.__config.hasOwnProperty(gd)&&(g[t.__config[gd]]=!0)})}});for(var m=0,E=f.length;m<E;m++)delete _[f[m]][id][gd];return y}},{key:"__checkReflow",value:function(t,e){var ht=this,r=this.__reflowList;if(r.length){for(var n,lt=this,ct={},i=ep=0,a=r.length;i<a;i++){var o=r[i],s=o.node,h=o.style,l=o.img,c=o.component;if(s===this){n=!0;break}var u=s.currentStyle,_=s.computedStyle;s.hasOwnProperty("__uniqueReflowId")||(s.__uniqueReflowId=ep,ct[ep++]={node:s,lv:0,img:l,component:c});var f=ct[s.__uniqueReflowId];if("absolute"===u[Cf]&&"absolute"===_[Cf])f.lv=Jd;else if(u[Cf]!==_[Cf]){if(f.lv=Jd,R(s,c,!0)){n=!0;break}}else{var d=!0;if(h)for(var p=Object.keys(h),v=0,y=p.length;v<y;v++){var g=p[v];if(!kd.hasOwnProperty(g)){d=!1;break}}if(!d||l||c){if(f.lv=Jd,R(s,c)){n=!0;break}}else"relative"===_[Cf]&&(f.lv|=0)}}if(ep=0,this.__reflowList=[],n)return r.forEach(function(t){return delete t.node.__uniqueReflowId}),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;var m=[];this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){var r,n=ct[t.__uniqueReflowId];return delete t.__uniqueReflowId,n.lv>=Jd||(r=[],t.__deepScan(function(t,e){},{uniqueList:r}),r.forEach(function(t){e.uniqueList.push(t)})),e.uniqueList.push(n),!0}},{uniqueList:m});var ut=[],_t=0;m.forEach(function(t){var e=t.node,r=t.lv,n=t.component;if(Jd<=r){var i=e.computedStyle,a=e.currentStyle,o=i[Yf],s=i[Cf],h=i[Lf],l="absolute"===s,c="absolute"===a[Cf],u="none"===h,_="none"===a[Lf];if(u&&_)return;for(var f=e.domParent,d=f.__layoutData,p=d.x,v=d.y,y=(d.w,d.h),g=f.width,m=f.computedStyle,E=e;n&&E.isShadowRoot;)E=E.host;var T=E.prev;T?(v=T.y,v+=T.outerHeight):(v=f.y,v+=m[Wf]+m[zf]+m[Xf]),p+=m[Uf]+m[Vf]+m[Kf];var O,M=e.outerWidth,A=e.outerHeight,x=e;if(c){for(x=x.domParent;x&&x!==lt&&!Bd;)if(x.parent)x=x.parent;else if(x.host)break;var R,S,x=x||lt;if(n?f.__layoutAbs(x,null,n):f.__layoutAbs(x,null,e),l)return void(n?(R=e.__modifyStruct(lt,_t),_t+=R[1],ut.push(R),(s===a[Cf]||"static"!==s&&"static"!==a[Cf])&&o===a[Yf]||(e.domParent.__updateStruct(lt.__structs),ht.renderMode===Ct.SVG&&ip(e.domParent))):(u||_)&&(e.__zIndexChildren=null,S=e.__modifyStruct(lt,_t),_t+=S[1],ut.push(S)));O=!0}else e.__layout({x:p,y:v,w:g,h:y}),e instanceof Rc&&(!e.parent&&e.host&&(x=e),e.__layoutAbs(x,{x:p,y:v,w:g,h:y}));var b,k,I,N,w="absolute"===e.computedStyle[Cf];N=O?(b=-M,-A):(k=e.outerWidth,I=e.outerHeight,w?(b=k,I):(b=k-M,I-A));for(var D,P,C=e;C&&C!==lt;)if("relative"===(m=(C=C.domParent).computedStyle)[Cf]){var L=C.ox,F=C.oy;L&&e.__offsetX(L),F&&e.__offsetY(F);break}if(b||N){for(var B,H=e;;){for(;H.isShadowRoot;)H=H.host;for(var G=(B=H).next;G;)"absolute"===G.currentStyle[Cf]?G.currentStyle[Nf][1]===Dd&&G.currentStyle[Df][1]===Dd&&(G.__offsetY(N,!0,zd),G.__cancelCache()):(!G.hasOwnProperty("____uniqueReflowId")||ct[G.____uniqueReflowId]<Jd)&&(G.__offsetY(N,!0,zd),G.__cancelCache()),G=G.next;if((H=H.parent)===lt)break;var Y,W=H.currentStyle,U="absolute"===W[Cf];if(b&&(Y=void 0,U&&(W[Hf][1]!==Dd||W[Pf][1]!==Dd&&W[wf][1]!==Dd||(Y=!0)),Y&&(H.__resizeX(b),H.__cancelCache(),H.__config[dd]|=zd)),N){var X=void 0;if(U?W[Gf][1]!==Dd||W[Nf][1]!==Dd&&W[Df][1]!==Dd||(X=!0):W[Gf][1]===Dd&&(X=!0),!X)break;H.__resizeY(N),H.__cancelCache(),H.__config[dd]|=zd}}for(;B;)B.__cancelCache(),B.__config[dd]|=zd,B=B.domParent}n?(D=e.__modifyStruct(lt,_t),_t+=D[1],ut.push(D),(s===a[Cf]||"static"!==s&&"static"!==a[Cf])&&o===a[Yf]||(e.domParent.__updateStruct(lt.__structs),ht.renderMode===Ct.SVG&&ip(e.domParent))):(u||_)&&(e.__zIndexChildren=null,P=e.__modifyStruct(lt,_t),_t+=P[1],ut.push(P))}else{var K=e.currentStyle,z=K[Nf],V=K[wf],j=K[Df],$=K[Pf],q=e.currentStyle,Z=e.computedStyle,J=Z[Nf],Q=Z[wf],tt=Z[Df],et=Z[Pf],rt=e.computedStyle,nt=e===ht?e:e.domParent,it=0;z[1]!==Dd?(it=Fd(q,"top",z,nt),rt[Nf]=it,rt[Df]="auto"):j[1]!==Dd?(it=-Fd(q,"bottom",j,nt),rt[Df]=-it,rt[Nf]="auto"):rt[Nf]=rt[Df]="auto";var at=0;"auto"!==J?at=J:"auto"!==tt&&(at=-tt),it!==at&&e.__offsetY(it-at,!1,zd);var ot=0;$[1]!==Dd?(ot=Fd(q,"left",$,nt),rt[Pf]=ot,rt[wf]="auto"):V[1]!==Dd?(ot=-Fd(q,"right",V,nt),rt[wf]=-ot,rt[Pf]="auto"):rt[Pf]=rt[wf]="auto";var st=0;"auto"!==et?st=et:"auto"!==Q&&(st=-Q),ot!==st&&e.__offsetX(ot-st,!1,zd)}});var E=0,T=0,O=!0,M=lt.__structs;if(ut.forEach(function(t){var e=Pt(t,2),r=e[0],n=e[1];if(O)O=!1,T=r[Rd]+(r[Sd]||0)+1,E+=n;else{for(var i=r[Rd]+(r[Sd]||0)+1+E,a=T;a<i;a++)M[a][Rd]+=E;T=i,E+=n}}),E)for(var A=T,x=M.length;A<x;A++)M[A][Rd]+=E;r.forEach(function(t){return delete t.node.__uniqueReflowId})}function R(t,e,r){if(!Zd(t)||r){var n=t;if("inline"===t.currentStyle[Lf]||"inline"===t.computedStyle[Lf]){var i=t.domParent;do{if((n=i)===lt)return 1;if(Qd(i,ct))return;if("absolute"===i.currentStyle[Cf]||"absolute"===i.computedStyle[Cf])return void tp(i,ct,e);if(Zd(i))return void tp(i,ct,e);i=i.domParent}while(i&&("inline"===i.currentStyle[Lf]||"inline"===i.computedStyle[Lf]));if(Zd(n))return void tp(n,ct,e)}var a=n.domParent;if(!a||!Qd(a,ct)){if(a&&("flex"===a.computedStyle[Lf]||"flex"===a.currentStyle[Lf])){do{if((n=a)===lt)return 1;if(Qd(a,ct))return;if("absolute"===a.currentStyle[Cf]||"absolute"===a.computedStyle[Cf])return void tp(a,ct,e);if(Zd(a))return void tp(a,ct,e);a=a.domParent}while(a&&("flex"===a.computedStyle[Lf]||"flex"===a.currentStyle[Lf]));if(Zd(n))return void tp(n,ct,e)}(a=n.domParent)&&Qd(a,ct)||n!==t&&tp(n,ct,e)}}}}},{key:"__computeMeasure",value:function(e,r){hn.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},Fi.__hookTask.push(t))}},{key:"__clear",value:function(t){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)}},{key:"dom",get:function(){return this.__dom}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),a}(),sp=d.STYLE_KEY,hp=sp.PADDING_TOP,lp=sp.PADDING_LEFT,cp=sp.STROKE_WIDTH,up=sp.BOX_SHADOW,_p=sp.FILTER,fp=Ft.isNil;function dp(t,e,r,n){return n?t.map(function(t){return e+t*r}):e+t*r}function pp(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function vp(t){return t<0?t=0:1<t&&(t=1),t}function yp(t,e,r,n,i,a,o,s,h){var l,c,u,_,f,d,p,v,y,g,m,E=7<arguments.length&&void 0!==s?s:0,T=8<arguments.length&&void 0!==h?h:1;return(0<E||T<1)&&(3===o?(l=Pt(Bt.sliceBezier2Both([[t,e],i,a,[r,n]],E,T),4),t=(c=Pt(l[0],2))[0],e=c[1],i=l[1],a=l[2],r=(u=Pt(l[3],2))[0],n=u[1]):2===o?(_=Pt(Bt.sliceBezier2Both([[t,e],a,[r,n]],E,T),3),t=(f=Pt(_[0],2))[0],e=f[1],a=_[1],r=(d=Pt(_[2],2))[0],n=d[1]):1===o?(p=Pt(Bt.sliceBezier2Both([[t,e],i,[r,n]],E,T),3),t=(v=Pt(p[0],2))[0],e=v[1],i=p[1],r=(y=Pt(p[2],2))[0],n=y[1]):(t+=(g=Math.abs(t-r))*E,e+=(m=Math.abs(e-n))*E,r-=g*(1-T),n-=m*(1-T))),[t,e,r,n,i,a]}var gp=function(){t(I,ju);var h=e(I);function I(t,e){var r,n,i,a;if(g(this,I),(r=h.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):fp(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):fp(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):fp(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):fp(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return vp(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else{fp(e.start)||(n=vp(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),vp(e)});for(var s=r.__end.length;s<r.__x1.length;s++)r.__end.push(1)}else{fp(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=vp(i),r.__end=r.__x1.map(function(){return i}))}}else{r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],fp(e.x1)||(r.__x1=parseFloat(e.x1)||0),fp(e.y1)||(r.__y1=parseFloat(e.y1)||0),fp(e.x2)||(r.__x2=parseFloat(e.x2)||0),fp(e.y2)||(r.__y2=parseFloat(e.y2)||0),fp(e.start)||(r.__start=vp(parseFloat(e.start)||0)),fp(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=vp(a)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB)}return r}return l(I,[{key:"buildCache",value:function(e,r){var n,i=this,a=this.width,o=this.height,s=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=dp(i[t],e,a,h))}),["y1","y2"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=dp(i[t],r,o,h))}),["controlA","controlB"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=function e(t,r,n,i,a,o){if(o){if(t)return t.map(function(t){return e(t,r,n,i,a)})}else if(t&&2<=t.length)return[r+t[0]*i,n+t[1]*a];return[]}(i[t],e,r,a,o,h))}),["start","end"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=i[t])}),n}},{key:"render",value:function(d,t,p,e){var v=this,r=ot(at(I.prototype),"render",this).call(this,d,t,p,e);if(r.break)return r;var u,n,i,a,o,s,h,l,c,_,f,y=r.originX,g=r.originY,m=r.stroke,E=r.strokeWidth,T=r.strokeDasharray,O=r.strokeDasharrayStr,M=r.strokeLinecap,A=r.strokeLinejoin,x=r.strokeMiterlimit,R=r.dx,S=r.dy,b=this.__cacheProps,k=this.isMulti;return this.buildCache(y,g)&&d===Ct.SVG&&(u="",k?b.x1.forEach(function(t,e){var r,n=b.x2[e],i=b.y1[e],a=b.y2[e],o=b.controlA[e],s=b.controlB[e],h=b.start[e],l=b.end[e],c=pp(o,s);0===h&&1===l||(t=(r=Pt(yp(t,i,n,i,o,s,c,h,l,b.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),u+=bn.svgLine(t,i,n,a,o,s,c)}):(n=pp(b.controlA,b.controlB),s=b.x1,h=b.y1,l=b.x2,c=b.y2,_=b.controlA,f=b.controlB,i=b.start,a=b.end,0===i&&1===a||(s=(o=Pt(yp(s,h,l,c,_,f,n,i,a,b.len),6))[0],h=o[1],l=o[2],c=o[3],_=o[4],f=o[5]),u=bn.svgLine(s,h,l,c,_,f,n)),b.d=u),d===Ct.CANVAS?m.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_=E[e],f=0<_&&"radial"===t.k&&Array.isArray(t.v);0<_&&"none"!==t&&(v.__preSetCanvas(d,p,{stroke:t,strokeWidth:_,strokeDasharray:T[e],strokeLinecap:M[e],strokeLinejoin:A[e],strokeMiterlimit:x[e]}),f&&(p.strokeStyle=t.v[0]),p.beginPath(),k?b.x1.forEach(function(t,e){var r,n=b.x2[e],i=b.y1[e],a=b.y2[e],o=b.controlA[e],s=b.controlB[e],h=b.start[e],l=b.end[e],c=pp(o,s);0===h&&1===l||(t=(r=Pt(yp(t,i,n,i,o,s,c,h,l,b.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),bn.canvasLine(p,t,i,n,a,o,s,c,R,S)}):(r=pp(b.controlA,b.controlB),o=b.x1,s=b.y1,h=b.x2,l=b.y2,c=b.controlA,u=b.controlB,n=b.start,i=b.end,0===n&&1===i||(o=(a=Pt(yp(o,s,h,l,c,u,r,n,i,b.len),6))[0],s=a[1],h=a[2],l=a[3],c=a[4],u=a[5]),bn.canvasLine(p,o,s,h,l,c,u,r,R,S)),p.stroke(),p.closePath())}):d===Ct.SVG&&m.forEach(function(t,e){var r=E[e],n=0<r&&"radial"===t.k&&Array.isArray(t.v),i=[["d",b.d],["fill","none"],["stroke",n?t.v[0]:t.v||t],["stroke-width",r]];v.__propsStrokeStyle(i,O[e],M[e],A[e],x[e]),v.addGeom("path",i)}),r}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[hp],i=r[lp],a=r[cp],o=r[up],s=r[_p],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var _=l.x1,f=l.y1,d=l.x2,p=l.y2,v=l.controlA,y=l.controlB,g=ot(at(I.prototype),"bbox",this),m=.5*a,E=Pt(this.__spreadByBoxShadowAndFilter(o,s),2),T=E[0],O=E[1];return T+=m,O+=m,h||(_=[_],d=[d],f=[f],p=[p],v=[v],y=[y]),_.forEach(function(t,e){var r,n,i,a=f[e],o=d[e],s=p[e],h=v[e],l=y[e];(fp(h)||h.length<2)&&(fp(l)||l.length<2)?(g[0]=Math.min(g[0],t-T),g[0]=Math.min(g[0],o-T),g[1]=Math.min(g[1],a-O),g[1]=Math.min(g[1],s-O),g[2]=Math.max(g[2],t+T),g[2]=Math.max(g[2],o+T),g[3]=Math.max(g[3],a+O),g[3]=Math.max(g[3],s+O)):fp(h)||h.length<2?(r=Bt.bboxBezier(t,a,l[0],l[1],o,s),g[0]=Math.min(g[0],r[0]-T),g[0]=Math.min(g[0],r[2]-T),g[1]=Math.min(g[1],r[1]-O),g[1]=Math.min(g[1],r[3]-O),g[2]=Math.max(g[2],r[0]+T),g[2]=Math.max(g[2],r[2]+T),g[3]=Math.max(g[3],r[1]+O),g[3]=Math.max(g[3],r[3]+O)):fp(l)||l.length<2?(n=Bt.bboxBezier(t,a,h[0],h[1],o,s),g[0]=Math.min(g[0],n[0]-T),g[0]=Math.min(g[0],n[2]-T),g[1]=Math.min(g[1],n[1]-O),g[1]=Math.min(g[1],n[3]-O),g[2]=Math.max(g[2],n[0]+T),g[2]=Math.max(g[2],n[2]+T),g[3]=Math.max(g[3],n[1]+O),g[3]=Math.max(g[3],n[3]+O)):(i=Bt.bboxBezier(t,a,h[0],h[1],l[0],l[1],o,s),g[0]=Math.min(g[0],i[0]-T),g[0]=Math.min(g[0],i[2]-T),g[1]=Math.min(g[1],i[1]-O),g[1]=Math.min(g[1],i[3]-O),g[2]=Math.max(g[2],i[0]+T),g[2]=Math.max(g[2],i[2]+T),g[3]=Math.max(g[3],i[1]+O),g[3]=Math.max(g[3],i[3]+O))}),g}}]),I}(),mp=d.STYLE_KEY,Ep=mp.PADDING_TOP,Tp=mp.PADDING_LEFT,Op=mp.STROKE_WIDTH,Mp=mp.BOX_SHADOW,Ap=mp.FILTER,xp=Ft.isNil;function Rp(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Sp(t){return t<0?t=0:1<t&&(t=1),t}function bp(t,e){var r=[],n=0,i=[];if(e)n=[],t.forEach(function(t){var e=bp(t);r.push(e.list),n.push(e.total),i.push([0].concat(e.increase))});else if(Array.isArray(t)){n=0,i.push(0);for(var a=0,o=0,s=t.length;o<s;o++){var h=t[o];if(Array.isArray(h)){a=o;break}}for(var l=t[a],c=a+1,u=t.length;c<u;c++){var _,f,d,p,v,y=t[c];Array.isArray(y)&&(2===y.length?(_=Math.abs(y[0]-l[0]),f=Math.abs(y[1]-l[1]),d=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(d),n+=d,i.push(n),l=y):4===y.length?(p=Bt.bezierLength([l,[y[0],y[1]],[y[2],y[3]]],2),r.push(p),n+=p,i.push(n),l=[y[2],y[3]]):6===y.length&&(v=Bt.bezierLength([l,[y[0],y[1]],[y[2],y[3]],[y[4],y[5]]],3),r.push(v),n+=v,i.push(n),l=[y[4],y[5]]))}}return{list:r,total:n,increase:i}}function kp(t,e,r,n){if(r===n)return t[r]>e?r-1:r;var i=r+(n-r>>1);return t[i]===e?i:t[i]>e?kp(t,e,r,Math.max(i-1,r)):kp(t,e,Math.min(i+1,n),n)}function Ip(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:0,a=3<arguments.length&&void 0!==n?n:1;if(0===i&&1===a)return t;if(a<=i)return[];var o=0,s=t.length-2;0<i&&(o=kp(e.increase,i*e.total,o,s)),a<1&&(s=kp(e.increase,a*e.total,o,s)),t=Ft.clone(t);var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A=1;return(a*=e.total)>e.increase[s]&&(h=t[s].slice(t[s].length-2),l=t[s+1],c=e.list[s],A=u=(a-e.increase[s])/c,2===l.length?(_=Math.abs(l[0]-h[0]),f=Math.abs(l[1]-h[1]),t[s+1]=[l[1]-(1-u)*_,l[1]-(1-u)*f]):4===l.length?(d=Bt.sliceBezier([h,[l[0],l[1]],[l[2],l[3]]],u),t[s+1]=[d[1][0],d[1][1],d[2][0],d[2][1]]):6===l.length&&(p=Bt.sliceBezier([h,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],u),t[s+1]=[p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]])),(i*=e.total)>e.increase[o]&&(v=t[o].slice(t[o].length-2),y=t[o+1],g=e.list[o],o===s&&1!==A&&(g*=A),m=(i-e.increase[o])/g,2===y.length?(E=Math.abs(y[0]-v[0]),T=Math.abs(y[1]-v[1]),t[o]=[v[0]+m*E,v[1]+m*T]):4===y.length?(O=Bt.sliceBezier([[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=O[0],t[o+1]=[O[1][0],O[1][1],O[2][0],O[2][1]]):6===y.length&&(M=Bt.sliceBezier([[y[4],y[5]],[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=M[0],t[o+1]=[M[1][0],M[1][1],M[2][0],M[2][1],y[4],y[5]])),s<t.length-2&&(t=t.slice(0,s+2)),0<o&&(t=t.slice(o)),t}var Np=function(){t(m,ju);var h=e(m);function m(t,e){var r,n,i,a;if(g(this,m),(r=h.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return Sp(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else{xp(e.start)||(n=Sp(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),Sp(e)});for(var s=r.__end.length;s<r.__points.length;s++)r.__end.push(1)}else{xp(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=Sp(i),r.__end=r.__points.map(function(){return i}))}}else{r.__points=[],r.__controls=[],r.__start=0,r.__end=1,xp(e.start)||(r.__start=Sp(parseFloat(e.start)||0)),xp(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=Sp(a))}return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return l(m,[{key:"__getPoints",value:function(a,o,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var n=[],i=0;i<r;i++)i%2==0?n.push(a+t[i]*s):n.push(o+t[i]*h);return n}})}},{key:"buildCache",value:function(e,r){var t,n,i,a,o=this,s=this.width,h=this.height,l=this.points,c=this.controls,u=this.start,_=this.end,f=this.__cacheProps,d=this.isMulti;return xp(f.points)&&(t=!0,f.points=d?l.map(function(t){if(Array.isArray(t))return o.__getPoints(e,r,s,h,t)}):this.__getPoints(e,r,s,h,l)),xp(f.controls)&&(t=!0,f.controls=d?c.map(function(t){return Array.isArray(t)?o.__getPoints(e,r,s,h,t,!0):t}):this.__getPoints(e,r,s,h,c,!0)),xp(f.start)&&(n=!0,f.start=u),xp(f.end)&&(n=!0,f.end=_),t&&(i=f.points,a=f.controls,f.list2=d?i.filter(function(t){return Array.isArray(t)}).map(function(t,e){var r=a[e];if(Array.isArray(t))return t.map(function(t,e){return e?Rp(t,r&&r[e-1]):t})}):i.filter(function(t){return Array.isArray(t)}).map(function(t,e){return e?Rp(t,a[e-1]):t}),f.len=bp(f.list2,d)),(t||n)&&(f.list=d?f.list2.map(function(t,e){if(Array.isArray(t)){var r=f.len;return Ip(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},f.start[e],f.end[e])}}):Ip(f.list2,f.len,f.start,f.end)),t||n}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(m.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[Ep],i=r[Tp],a=r[Op],o=r[Mp],s=r[Ap],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var d=ot(at(m.prototype),"bbox",this),_=.5*a,f=Pt(this.__spreadByBoxShadowAndFilter(o,s),2),p=f[0],v=f[1];p+=_,v+=_;var y=l.points,g=l.controls;return h||(y=[y],g=[g]),y.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=g[e],n=Pt(t[0],2),i=n[0],a=n[1],o=1,s=t.length;o<s;o++){var h,l,c=Pt(t[o],2),u=c[0],_=c[1],f=r[o-1];f&&4===f.length?(h=Bt.bboxBezier(i,a,f[0],f[1],f[2],f[3],u,_),d[0]=Math.min(d[0],h[0]-p),d[1]=Math.min(d[1],h[1]-v),d[2]=Math.max(d[2],h[2]+p),d[3]=Math.max(d[3],h[3]+v)):f&&2===f.length?(l=Bt.bboxBezier(i,a,f[0],f[1],u,_),d[0]=Math.min(d[0],l[0]-p),d[1]=Math.min(d[1],l[1]-v),d[2]=Math.max(d[2],l[2]+p),d[3]=Math.max(d[3],l[3]+v)):(d[0]=Math.min(d[0],i-p),d[1]=Math.min(d[1],a-v),d[2]=Math.max(d[2],i+p),d[3]=Math.max(d[3],a+v)),i=u,a=_}}),d}}]),m}(),wp=function(){t(s,Np);var r=e(s);function s(t,e){return g(this,s),r.call(this,t,e)}return l(s,[{key:"__getPoints",value:function(t,e,r,n,i,a){var o=ot(at(s.prototype),"__getPoints",this).call(this,t,e,r,n,i,a);return a||o.push(o[0]),o}}]),s}(),Dp=d.STYLE_KEY,Pp=Dp.PADDING_TOP,Cp=Dp.PADDING_LEFT,Lp=Dp.STROKE_WIDTH,Fp=Dp.BOX_SHADOW,Bp=Dp.FILTER,Hp=Ft.isNil,Gp=Bt.sectorPoints;function Yp(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var Wp=function(){t(I,ju);var n=e(I);function I(t,e){var r;return g(this,I),(r=n.call(this,t,e)).isMulti?(r.__begin=[0],r.__end=[0],r.__r=[1],Array.isArray(e.begin)&&(r.__begin=e.begin.map(function(t){return Yp(t,0)})),Array.isArray(e.end)&&(r.__end=e.end.map(function(t){return Yp(t,0)})),Array.isArray(e.r)&&(r.__r=e.r.map(function(t){return Yp(t,1)})),Array.isArray(e.edge)&&(r.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(r.__closure=e.closure.map(function(t){return!!t}))):(r.__begin=r.__end=0,r.__r=1,r.__edge=!1,r.__closure=!1,Hp(e.begin)||(r.__begin=Yp(e.begin,0)),Hp(e.end)||(r.__end=Yp(e.end,0)),Hp(e.r)||(r.__r=Yp(e.r,1)),Hp(e.edge)||(r.__edge=!!e.edge),Hp(e.closure)||(r.__closure=!!e.closure)),r}return l(I,[{key:"buildCache",value:function(a,o){var t,e,r,s=this.width,n=this.begin,h=this.end,l=this.r,c=this.edge,u=this.closure,_=this.__cacheProps,i=this.isMulti;return Hp(_.begin)&&(t=!0,_.begin=(n||0)%360),Hp(_.end)&&(t=!0,_.end=(h||0)%360),Hp(_.r)&&(t=!0,_.r=i?l.map(function(t){return t*s*.5}):l*s*.5),l=_.r,Hp(_.edge)&&(t=!0,_.edge=c),Hp(_.closure)&&(t=!0,_.closure=u),t&&(i?(_.list=[],_.sList=[],n.forEach(function(t,e){var r=Hp(l[e])?.5*s:l[e],n=Gp(a,o,r,parseFloat(t||0)%360,parseFloat(h[e]||0)%360),i=n.slice(0);u[e]?(n.push(n[0].slice(0)),c&&i.push(i[0].slice(0))):(n.unshift([a,o]),n.push([a,o]),c&&(i.unshift([a,o]),i.push([a,o]))),_.list.push(n),_.sList.push(i)})):(r=(e=Gp(a,o,l,parseFloat(n||0),parseFloat(h||0))).slice(0),u?(e.push(e[0].slice(0)),c&&r.push(r[0].slice(0))):(e.unshift([a,o]),e.push([a,o]),c&&(r.unshift([a,o]),r.push([a,o]))),_.list=e,_.sList=r)),t}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(I.prototype),"render",this).call(this,t,e,r,n,i);if(a.break)return a;this.buildCache(a.cx,a.cy);var o=a.fill,s=a.fillRule,h=a.stroke,l=a.strokeWidth,c=a.strokeDasharray,u=a.strokeDasharrayStr,_=a.strokeLinecap,f=a.strokeLinejoin,d=a.strokeMiterlimit,p=a.dx,v=a.dy,y=this.__cacheProps,g=y.list,m=y.sList,E=this.isMulti;if(o.length<=1&&h.length<=1){var T={fill:o[0],fillRule:s[0],stroke:h[0],strokeWidth:l[0],strokeDasharray:c[0],strokeDasharrayStr:u[0],strokeLinecap:_[0],strokeLinejoin:f[0],strokeMiterlimit:d[0],dx:p,dy:v};this.__renderOneSector(t,r,n,E,g,m,T)}else{for(var O=0,M=o.length;O<M;O++){var A,x=o[O];x&&(A={fill:x,fillRule:s[O],dx:p,dy:v},this.__renderOneSector(t,r,n,E,g,m,A))}for(var R=0,S=h.length;R<S;R++){var b,k=h[R];k&&(b={stroke:k,strokeWidth:l[R],strokeDasharray:c[R],strokeDasharrayStr:u[R],strokeLinecap:_[R],strokeLinejoin:f[R],strokeMiterlimit:d[R],dx:p,dy:v},this.__renderOnePolygon(t,r,n,E,g,m,b))}}return a}},{key:"__renderOneSector",value:function(t,e,r,n,i,a,o){var s=o.fill,h=o.stroke,l=o.strokeWidth,c="conic"===s.k,u="conic"===h.k,_="radial"===s.k&&Array.isArray(s.v),f=0<l&&"radial"===h.k&&Array.isArray(h.v);c||u?(c?this.__conicGradient(t,e,r,i,n,o):s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0),0<l&&u?ee.warn("Stroke style can not use conic-gradient"):0<l&&h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0)):_||f?(_?this.__radialEllipse(t,e,r,i,n,o,"fill"):s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0),0<l&&f?(ee.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke=o.stroke.v[0],this.__drawPolygon(t,e,r,n,a,o,!1,!0)):0<l&&h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0)):(s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0,!1),h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0))}},{key:"__genSector",value:function(t,e,r,n,i,a,o,s,h){var l,c;t?(l=[["d",e[0]],["fill",r.v||r],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(l,a,o,s,h),this.addGeom("path",l)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<i&&(c=[["d",e[1]],["fill","none"],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(c,a,o,s,h),this.addGeom("path",c)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[Pp],h=o[Cp],l=o[Lp],c=o[Fp],u=o[Bp],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=ot(at(I.prototype),"bbox",this),y=.5*l,g=Pt(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),I}(),Up=d.STYLE_KEY,Xp=Up.PADDING_TOP,Kp=Up.PADDING_LEFT,zp=Up.STROKE_WIDTH,Vp=Up.BOX_SHADOW,jp=Up.FILTER,$p=Ft.isNil;function qp(t,e,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;if(0===o||0===s)return[[t,e],[t+r,e],[t+r,e+n],[t,e+n],[t,e]];var h=o*Bt.H,l=s*Bt.H;return[[t+o,e],[t+r-o,e],[t+r+h-o,e,t+r,e+s-l,t+r,e+s],[t+r,e+n-s],[t+r,e+n+l-s,t+r+h-o,e+n,t+r-o,e+n],[t+o,e+n],[t+o-h,e+n,t,e+n+l-s,t,e+n-s],[t,e+s],[t,e+s-l,t+o-h,e,t+o,e]]}function Zp(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var Jp=function(){t(y,ju);var n=e(y);function y(t,e){var r;return g(this,y),(r=n.call(this,t,e)).isMulti?(r.__rx=[0],r.__ry=[0],Array.isArray(e.rx)&&(r.__rx=e.rx.map(Zp)),Array.isArray(e.ry)&&(r.__ry=e.ry.map(Zp))):(r.__rx=r.__ry=0,$p(e.rx)||(r.__rx=Zp(e.rx)),$p(e.ry)||(r.__ry=Zp(e.ry))),r}return l(y,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return $p(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),$p(l.ry)&&(t=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(h,.5)*o),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return qp(r,n,a,o,t,i[e])}):qp(r,n,a,o,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(y.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.width,n=this.height,i=this.computedStyle,a=i[Xp],o=i[Kp],s=i[zp],h=i[Vp],l=i[jp],c=t+o,u=e+a;this.buildCache(c,u);var _=ot(at(y.prototype),"bbox",this),f=.5*s,d=Pt(this.__spreadByBoxShadowAndFilter(h,l),2),p=d[0],v=d[1];return p+=f,v+=f,_[0]=Math.min(_[0],c-p),_[1]=Math.min(_[1],u-v),_[2]=Math.min(_[2],c+r+p),_[3]=Math.min(_[3],u+n+v),_}}]),y}(),Qp=d.STYLE_KEY,tv=Qp.PADDING_TOP,ev=Qp.PADDING_LEFT,rv=Qp.STROKE_WIDTH,nv=Qp.BOX_SHADOW,iv=Qp.FILTER,av=Ft.isNil;function ov(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var sv=function(){t(x,ju);var n=e(x);function x(t,e){var r;return g(this,x),(r=n.call(this,t,e)).isMulti?(r.__r=[1],Array.isArray(e.r)?r.__r=e.r.map(ov):av(e.r)||(r.__r=ov(e.r))):(r.__r=1,av(e.r)||(r.__r=ov(e.r))),r}return l(x,[{key:"buildCache",value:function(e,r){var n=this.width,t=this.r,i=this.__cacheProps,a=this.isMulti;av(i.r)&&(a?(i.r=t.map(function(t){return t*n*.5}),i.list=i.r.map(function(t){return Bt.ellipsePoints(e,r,t)})):(i.r=t*n*.5,i.list=Bt.ellipsePoints(e,r,i.r)))}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(x.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[tv],h=o[ev],l=o[rv],c=o[nv],u=o[iv],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=ot(at(x.prototype),"bbox",this),y=.5*l,g=Pt(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),x}(),hv=d.STYLE_KEY,lv=hv.PADDING_TOP,cv=hv.PADDING_LEFT,uv=hv.STROKE_WIDTH,_v=hv.BOX_SHADOW,fv=hv.FILTER,dv=Ft.isNil;function pv(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var vv=function(){t(S,ju);var n=e(S);function S(t,e){var r;return g(this,S),(r=n.call(this,t,e)).isMulti?(r.__rx=[1],r.__ry=[1],Array.isArray(e.rx)?r.__rx=e.rx.map(pv):dv(e.rx)||(r.__rx=[pv(e.rx)]),Array.isArray(e.ry)?r.__ry=e.ry.map(pv):dv(e.ry)||(r.__ry=[pv(e.ry)])):(r.__rx=1,dv(e.rx)||(r.__rx=pv(e.rx)),r.__ry=1,dv(e.ry)||(r.__ry=pv(e.ry))),r}return l(S,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return dv(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return t*a*.5}):s*a*.5),dv(l.ry)&&(t=!0,l.ry=c?h.map(function(t){return t*o*.5}):h*o*.5),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return Bt.ellipsePoints(r,n,t,i[e])}):Bt.ellipsePoints(r,n,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(S.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.isMulti,r=this.__cacheProps,e=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[lv],h=o[cv],l=o[uv],c=o[_v],u=o[fv],_=e+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p,v=0,y=0,y=t?(p=d=0,r.rx.forEach(function(t,e){d=Math.max(t,d),p=Math.max(y,r.ry[e])}),v=d,p):(v=r.rx,r.ry),g=ot(at(S.prototype),"bbox",this),m=.5*l,E=Pt(this.__spreadByBoxShadowAndFilter(c,u),2),T=E[0],O=E[1],M=_-v-(T+=m),A=_+v+T,x=f-y-(O+=m),R=f+y+O;return g[0]=Math.min(g[0],M),g[1]=Math.min(g[1],x),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],R),g}}]),S}(),yv={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of"},gv={os:"offset",e:"easing",ft:"filter",bd:"boxShadow",of:"overflow"},mv={value:"v",options:"o"},Ev={},Tv={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},Ov={};Dt.DOM_KEY_SET.concat(Dt.GEOM_KEY_SET).forEach(function(t){var e;yv.hasOwnProperty(t)?gv[yv[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),yv[t]=e,gv[e]=t)}),Object.keys(mv).forEach(function(t){Ev[mv[t]]=t}),Object.keys(Tv).forEach(function(t){Ov[Tv[t]]=t});var Mv={fullCssProperty:yv,abbrCssProperty:gv,fullAnimate:mv,abbrAnimate:Ev,fullAnimateOption:Tv,abbrAnimateOption:Ov},Av=b.TYPE_VD,xv=b.TYPE_GM,Rv=b.TYPE_CP,Sv=Ft.isNil,bv=Ft.isFunction,kv=Ft.isPrimitive,Iv=Ft.clone,Nv=Ft.extend,wv=Mv.abbrCssProperty,Dv=Mv.abbrAnimateOption,Pv=Mv.abbrAnimate;function Cv(i,a){i&&Object.keys(i).forEach(function(t){var e,r,n;0===t.indexOf("var-")?(e=t.slice(4),a.hasOwnProperty(e)&&(r=a[e],i["var-"+r]=i[t])):a.hasOwnProperty(t)&&(n=a[t],i[n]=i[t],delete i[t])})}function Lv(s,h){s&&h&&Object.keys(s).forEach(function(t){if(0===t.indexOf("var-")){var e=s[t];if(!e)return;var r=t.slice(4);if(e.id&&h.hasOwnProperty(e.id)){var n=h[e.id];if(void 0===n)return;if(-1<r.indexOf(".")){for(var i=r.split("."),a=i.length,o=0;o<a-1;o++)r=i[o],s[r]?s=s[r]:ee.error("parseJson vars is not exist: "+e.id+", "+t+", "+i.slice(0,o).join("."));r=i[a-1]}bv(n)&&(n=n(e)),s[r]=n}}})}function Fv(e,r){e.tagName=r.tagName,e.props=Iv(r.props),e.children=r.children,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,n,i=e.init;i&&(n=(t=e.props=e.props||{}).style,Nv(t,i),n&&(Nv(n,i.style),t.style=n),e.init=null)}function Bv(r,t,n,i,e){var a=4<arguments.length&&void 0!==e?e:{};if(kv(t)||t instanceof x)return t;if(Array.isArray(t))return t.map(function(t){return Bv(r,t,n,i,a)});var o=t.library,s=t.libraryId;if(Array.isArray(o))a={},o.forEach(function(t){!function(t,n){var e=t.id,r=t.children;if(Array.isArray(r)&&r.forEach(function(t){if(!kv(t)){var e=t.libraryId;if(Sv(e))return;var r=n[e];if(!r)throw new Error("Link library item miss libraryId: "+e);Fv(t,r)}}),Sv(e))throw new Error("Library item miss id: "+JSON.stringify(t));n[e]=t}(t,a)}),t.library=null,t.libraryId=null;else if(!Sv(s)&&a){var h=a[s];if(!h)throw new Error("Link library miss id: "+s);Fv(t,h)}var l=t.tagName,c=t.props,u=void 0===c?{}:c,_=t.children,f=void 0===_?[]:_,d=t.animate,p=void 0===d?[]:d,v=t.__animateRecords;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var y,g,m,E,T,O=u.style;return Cv(O,wv),Lv(O,i),Lv(u,i),Lv(t,i),y="$"===l.charAt(0)?r.createGm(l,u):r.createVd(l,u,f.map(function(t,e){return t&&-1<[Av,xv,Rv].indexOf(t.$$type)?t:Bv(r,t,n,i,a)})),v&&(y.__animateRecords=v),p&&(Array.isArray(p)?(p.forEach(function(t){Cv(t,Pv);var e=t.value,r=t.options;Array.isArray(e)&&e.length&&(m=!0,e.forEach(function(t){Cv(t,wv),Lv(t,i)})),r&&(Cv(r,Dv),Lv(r,i))}),m&&(g={animate:p,target:y})):(Cv(p,Pv),E=p.value,T=p.options,Array.isArray(E)&&E.length&&(E.forEach(function(t){Cv(t,wv),Lv(t,i)}),g={animate:p,target:y}),T&&(Cv(T,Dv),Lv(T,i)))),g&&n.push(g),y}var Hv={parse:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:{};e=Ft.clone(e),ee.isDom(r)||(i=r||{},r=null);var a=[],o=Bv(t,e,a,i.vars);if(r){var s=e.tagName;if(-1===["canvas","svg"].indexOf(s))throw new Error("Parse dom must be canvas/svg");var h=i.controller instanceof F_?i.controller:o.animateController;t.render(o,r),a.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(h.__auto=h.__auto.concat(a),h.__playAuto()):h.__records=h.__records.concat(a)}else a.length&&(o.__animateRecords={options:i,list:a,controller:i.controller instanceof F_?i.controller:null});return o},abbr:Mv},Gv={css:hn,reset:Dt,unit:R,font:S},Yv={Animation:Ao,Controller:F_,easing:ji,frame:Fi},Wv={level:Do,change:Se,Page:Bo,Cache:jo};ju.register("$line",gp),ju.register("$polyline",Np),ju.register("$polygon",wp),ju.register("$sector",Wp),ju.register("$rect",Jp),ju.register("$circle",sv),ju.register("$ellipse",vv);var Uv={version:"0.48.3",render:function(t,e){if(!(t instanceof op))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],n=2,i=arguments.length;n<i;n++)r.push(arguments[n]);return Ft.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];if(-1<["canvas","svg"].indexOf(t))return new op(t,e,n);if(Nl.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:n,$$type:b.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:b.TYPE_GM}},createCp:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];return e.children=n,{klass:t,props:e,$$type:b.TYPE_CP}},parse:function(t,e,r){return Hv.parse(this,t,e,r)},mode:Ct,Component:Il,Node:x,Text:Sn,Geom:ju,Xom:pl,Dom:Rc,Img:tu,Root:op,Event:Di,util:Ft,inject:ee,style:Gv,parser:Hv,animate:Yv,math:Dn,builder:xl,updater:d_,refresh:Wv,enums:d};return xl.ref({Xom:pl,Dom:Rc,Img:tu,Geom:ju,Component:Il}),d_.ref({Xom:pl,Dom:Rc,Img:tu,Geom:ju,Component:Il}),"undefined"!=typeof window&&(window.karas=Uv),Uv});
//# sourceMappingURL=index.min.js.map
