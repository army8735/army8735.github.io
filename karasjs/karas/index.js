!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=F(r),e=(t=i?(t=F(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}}function N(){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(i)return i=Object.getOwnPropertyDescriptor(i,e),i.get?i.get.call(arguments.length<3?t:r):i.value}).apply(this,arguments)}function Bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(a.push(i.value),!e||a.length!==e);o=!0);}catch(t){s=!0,n=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var u={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,WRITING_MODE:87,FILL:88,STROKE:89,STROKE_WIDTH:90,STROKE_DASHARRAY:91,STROKE_DASHARRAY_STR:92,STROKE_LINECAP:93,STROKE_LINEJOIN:94,STROKE_MITERLIMIT:95,FILL_RULE:96,MATRIX:97,BORDER_TOP:98,BORDER_RIGHT:99,BORDER_BOTTOM:100,BORDER_LEFT:101,TRANSLATE_PATH:102},g={};function x(t){return g[t]=g[t]||t.toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),g[t]}var m={};var v={},E={},b={},T=(Object.keys(u).forEach(function(t){var e=u[t],t=x(v[e]=t);E[e]=t,b[t]=e}),{STYLE_KEY:u,STYLE_R_KEY:v,STYLE_RV_KEY:E,STYLE_V_KEY:b,style2Lower:x,style2Upper:function(t){return m[t]=m[t]||t.replace(/([a-z\d_])([A-Z])/g,function(t,e,r){return e+"_"+r}).toUpperCase(),m[t]},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_COMPONENT:3,UPDATE_OVERWRITE:4,UPDATE_KEYS:5,UPDATE_LIST:6,UPDATE_CONFIG:7,UPDATE_ADD_DOM:8,UPDATE_REMOVE_DOM:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_PLAY_CB:8,I_TARGET:9,I_ROOT:10,I_FRAMES:11,I_FRAMES_R:12,I_CURRENT_TIME:13,I_NEXT_TIME:14,I_STYLE:15,I_DURATION:16,I_ITERATIONS:17,I_FILL:18,I_PLAYBACK_RATE:19,I_PLAY_COUNT:20,I_PLAY_STATE:21,I_DESTROYED:22,I_START_TIME:23,I_FPS_TIME:24,I_EASING:25,I_ENTER_FRAME:26,I_DELAY:27,I_END_DELAY:28,I_KEYS:29,I_ORIGIN_STYLE:30,I_CURRENT_FRAMES:31,I_CURRENT_FRAME:32,I_SPF_LIMIT:33,I_FPS:34,I_DIRECTION:35,I_FIRST_ENTER:36,I_STAY_BEGIN:37,I_STAY_END:38,I_IS2:39,I_END_TIME:40,I_NODE_CONFIG:41,I_ROOT_CONFIG:42,I_OUT_BEGIN_DELAY:43,I_TIME_STAMP:44},ELLIPSIS:"…"}),A=T.STRUCT_KEY,M=A.STRUCT_NODE,R=A.STRUCT_INDEX,S=A.STRUCT_CHILD_INDEX,O=A.STRUCT_LV,A=T.NODE_KEY,C=A.NODE_IS_DESTROYED,I=A.NODE_STRUCT,w=function(){function t(){_(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__sx=0,this.__sy=0,this.__width=0,this.__height=0,this.__baseline=0,this.__verticalBaseline=0,this.__config={},this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null,this.__virtualDom=null,this.__bbox=null,this.__filterBbox=null}return f(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[I]=(a(i={},M,this),a(i,R,t),a(i,S,r),a(i,O,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[I],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[C]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseline",get:function(){return this.__baseline}},{key:"verticalBaseline",get:function(){return this.__verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[C]}},{key:"isReplaced",get:function(){return!1}}]),t}(),et={CANVAS:0,SVG:1,WEBGL:2},r={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,GRADIENT:14,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,r.PERCENT]:/px$/i.test(t)?[e,r.PX]:/deg$/i.test(t)?[e,r.DEG]:/rem$/i.test(t)?[e,r.REM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/em$/i.test(t)?[e,r.EM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/vmax$/i.test(t)?[e,r.VMAX]:/vmin$/i.test(t)?[e,r.VMIN]:[e,r.NUMBER]}},k={TYPE_VD:Symbol("Dom"),TYPE_GM:Symbol("Geom"),TYPE_CP:Symbol("Component")};function D(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function L(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var Ht={identity:D,multiply:function(t,e){if(L(t))return e;if(L(e))return t;for(var r=[],i=0;i<4;i++){var n=t[i]||0,a=t[i+4]||0,o=t[i+8]||0,s=t[i+12]||0;r[i]=n*e[0]+a*e[1]+o*e[2]+s*e[3],r[i+4]=n*e[4]+a*e[5]+o*e[6]+s*e[7],r[i+8]=n*e[8]+a*e[9]+o*e[10]+s*e[11],r[i+12]=n*e[12]+a*e[13]+o*e[14]+s*e[15]}return r},calPoint:function(t,e){var r,c,u,_,f,d,y,p,i=(t=Bt(t,4))[0],n=t[1],a=t[2];if(void 0===(t=t[3])&&(t=1),!e||L(e))return[i,n,a,t];if(16===e.length)return a=a||0,o=(r=Bt(e,16))[0],h=r[1],c=r[2],u=r[3],s=r[4],g=r[5],_=r[6],f=r[7],l=r[8],d=r[9],y=r[10],p=r[11],[i*o+n*s+a*l+r[12],i*h+n*g+a*d+r[13],i*c+n*_+a*y+r[14],t*=i*u+n*f+a*p+r[15]];var o=Bt(e,6),s=o[0],l=o[1],h=o[2],g=o[3];return[s*i+h*n+o[4],l*i+g*n+o[5]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length){var e=t,r=[],i=(r[0]=e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10],r[4]=-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10],r[8]=e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9],r[12]=-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9],r[1]=-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10],r[5]=e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10],r[9]=-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9],r[13]=e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9],r[2]=e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6],r[6]=-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6],r[10]=e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5],r[14]=-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5],r[3]=-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6],r[7]=e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6],r[11]=-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5],r[15]=e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5],e[0]*r[0]+e[1]*r[4]+e[2]*r[8]+e[3]*r[12]);if(0==i)return D();i=1/i;for(var c=[],n=0;n<16;n++)c[n]=r[n]*i;return c}var a=(e=Bt(t,6))[0],o=e[1],s=e[2],l=e[3],u=e[4],_=e[5];if(1===a&&0===o&&0===s&&1===l&&0===u&&0===_)return t;var h=a*l-o*s;return 0==h?t:[l/h,-o/h,-s/h,a/h,(s*_-l*u)/h,(o*u-a*_)/h]},isE:L,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}},P={}.toString;function B(e){return function(t){return P.call(t)==="[object "+e+"]"}}var H=B("Object"),A=B("String"),t=B("Function"),e=B("Number"),i=B("Boolean"),G=B("Date"),Y={}.hasOwnProperty,W=Y.toString,U=W.call(Object);function X(t){return null==t}function z(t){return X(t)?"":t.toString()}function V(t){var e,r,i,n,a,o,s,l,h;return"item"===t.type||"img"===t.type?(e="",(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"):"text"===t.type?(r="",(t.children||[]).forEach(function(t){r+=V(t)}),"<g>"+r+"</g>"):"dom"===t.type||"geom"===t.type?(i="<g>",t.bb.forEach(function(t){i+=V(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=V(t))}),i+="</g>",n=t.opacity,a=t.transform,o=t.visibility,s=t.mask,l=t.overflow,h=t.filter,t=t.mixBlendMode,"<g"+(1!==n&&void 0!==n?' opacity="'+n+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(l?' clip-path="'+l+'"':"")+(h||t?' style="':"")+(h?"filter:"+h+";":"")+(t?"mix-blend-mode:"+t+";":"")+(h||t?'"':"")+">"+i+"</g>"):void 0}function K(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function j(t,e){for(var r=t.length?t[0]:"",i=1,n=t.length;i<n;i++)r+=e+t[i];return r}function $(t){if(!t||"[object Object]"!==P.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=Y.call(t,"constructor")&&t.constructor;return"function"==typeof t&&W.call(t)===U}function q(t){return 1===t.length?"0"+t:t}var At={isObject:H,isString:A,isFunction:t,isNumber:e,isBoolean:i,isDate:G,isNil:X,isPrimitive:function(t){return At.isNil(t)||At.isBoolean(t)||At.isString(t)||At.isNumber(t)},isAuto:function(t){return X(t)||"auto"===t},isPlainObject:$,stringify:z,joinSourceArray:function t(e){for(var r="",i=0,n=e.length;i<n;i++){var a=e[i];Array.isArray(a)?r+=t(a):r+=z(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=K(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=V(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=V(t))}),e+="</g>"},joinVd:V,joinDef:K,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],X(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+j(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+j(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+j(t,",")+")";if(3===t.length)return"rgba("+j(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n))e[n[0]]=n[1];else for(var a=Object.keys(n),o=a.length-1;0<=o;o--){var s=a[o];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,n=r.length;i<n;i++){var a=r[i];e.push([a,t[a]])}return e},clone:function e(r){if(X(r)||"object"!==mt(r))return r;if(r.$$type===k.TYPE_VD||r.$$type===k.TYPE_GM||r.$$type===k.TYPE_CP)return r;if(At.isDate(r))return new Date(r);if(!$(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,n=e.length;i<n;i++){var a=e[i],o=r[i],s=Array.isArray(a),l=Array.isArray(o);if(s&&l){if(!t(a,o))return!1}else{if(s||l)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(H(e)&&H(r)){for(var i={},n=0,a=Object.keys(e),c=a.length;n<c;n++){var o=a[n];if(!r.hasOwnProperty(o)||!t(e[o],r[o]))return!1;i[o]=!0}for(var s=0,l=Object.keys(r),u=l.length;s<u;s++){var _=l[s];if(!i.hasOwnProperty(_))return!1}}else{if(G(e)&&G(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var h=0,f=e.length;h<f;h++)if(!t(e[h],r[h]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==mt(e))return t;for(var i=0,n=(r=r||Object.keys(e)).length;i<n;){var a=r[i];t[a]=e[a],i++}return t},joinArr:j,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!Ht.isE(e)){var n=Bt(t,4),a=n[0],o=n[1],s=n[2],n=n[3],h=(r&&(a-=r,s+=r),i&&(o-=i,n+=i),[s,o,a,n,s,n]),s=Bt(Ht.calPoint([a,o],e),4),a=s[0],o=s[1];(l=s[3])&&1!==l&&(a/=l,o/=l);for(var c=a,u=o,_=a,f=o,d=0;d<6;d+=2){var l,y=h[d],p=h[d+1],g=Bt(Ht.calPoint([y,p],e),4),y=g[0],p=g[1];(l=g[3])&&1!==l&&(y/=l,p/=l),c=Math.min(c,y),_=Math.max(_,y),u=Math.min(u,p),f=Math.max(f,p)}t=[c,u,_,f]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},prefixHex:q,replaceRgba2Hex:function(t){return(t||"").replace(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)/gi,function(t,e,r,i,n){e="#"+q(parseInt(e).toString(16))+q(parseInt(r).toString(16))+q(parseInt(i).toString(16));return n&&(e+=q(Math.floor(255*parseFloat(n)).toString(16))),e})}},Z={flag:!1},J={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},Q=Ht.calPoint;function tt(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(e),t.deleteShader(e),new Error("Failed to compile shader: "+r);return e}function rt(t,e,r,i){var t=Bt(t,4),n=t[0],a=t[1],o=t[2],t=t[3];return void 0===o&&(o=0),(t=void 0===t?1:t)&&1!==t&&(n/=t,a/=t,o/=t),a===r?a=0:(a=(a-r)/r,i&&(a=-a)),[(n=n===e?0:(n-e)/e)*t,a*t,o*t,t]}function it(t,e,r,i,n){var a=t.createTexture();return nt(t,a,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,n,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),a}function nt(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var ft={initShaders:function(t,e,r){if(!(e=function(t,e,r){e=tt(t,t.VERTEX_SHADER,e),r=tt(t,t.FRAGMENT_SHADER,r);if(!e||!r)return null;var i=t.createProgram();if(!i)return null;if(i.vertexShader=e,i.fragmentShader=r,t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return i;var n=t.getProgramInfoLog(i);throw t.deleteProgram(i),t.deleteShader(r),t.deleteShader(e),new Error("Failed to link program: "+n)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),e},createTexture:it,bindTexture:nt,drawTextureCache:function(r,t,A,m,v,E){var b,M=[],R=[],S=[],T=[0],O=[T],t=(t.forEach(function(t,e){var t=Bt(t,5),r=t[0],i=t[1],n=t[2],a=t[3],t=t[4],e=(e?(e=A[r.page.uuid],b!==e&&(T=[0,b=e],O.push(T))):(b=A[r.page.uuid],T[1]=b),r.x),c=r.y,u=r.width,_=r.height,f=r.page,r=r.bbox,o=r[0],r=r[1],s=o+(a||0),l=r+_+(t||0),o=o+u+(a||0),a=r+(t||0),r=Bt(Q([s,l],n),4),t=r[0],d=r[1],r=r[3],l=Bt(Q([o,l],n),4),y=l[0],p=l[1],l=l[3],o=Bt(Q([o,a],n),4),g=o[0],x=o[1],o=o[3],s=Bt(Q([s,a],n),4),a=s[0],n=s[1],s=s[3],h=Bt(rt([t,d,0,r],m,v,E),2),t=h[0],d=h[1],h=Bt(rt([y,p,0,l],m,v,E),2),y=h[0],p=h[1],h=Bt(rt([g,x,0,o],m,v,E),2),g=h[0],x=h[1],h=Bt(rt([a,n,0,s],m,v,E),2),a=h[0],n=h[1],h=(M.push(t,d,0,r,a,n,0,s,y,p,0,l,a,n,0,s,y,p,0,l,g,x,0,o),e/f.width),t=(c+_)/f.height,d=(e+u)/f.width,r=c/f.height;R.push(h,t,h,r,d,t,h,r,d,t,d,r),S.push(i,i,i,i,i,i),T[0]++}),r.createBuffer()),e=(r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,new Float32Array(M),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_position")),a=(r.vertexAttribPointer(e,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(e),r.createBuffer()),i=(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(R),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_texCoords")),o=(r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i),r.createBuffer()),n=(r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,new Float32Array(S),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_opacity")),s=(r.vertexAttribPointer(n,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n),r.getUniformLocation(r.program,"u_texture")),l=0;O.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];r.uniform1i(s,t),r.drawArrays(r.TRIANGLES,l,e*=6),l+=e}),r.deleteBuffer(t),r.deleteBuffer(a),r.deleteBuffer(o),r.disableVertexAttribArray(e),r.disableVertexAttribArray(i),r.disableVertexAttribArray(n)},drawBlur:function(e,c,u,_,f,d,y,t,r,i,n,a,o,s){for(var l=(r=Bt(rt([i,r+i,0,1],o,s,!1),2))[0],r=r[1],i=(t=Bt(rt([t+i,i,0,1],o,s,!1),2))[0],o=t[1],s=e.createBuffer(),t=(e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([l,o,l,r,i,o,l,r,i,o,i,r]),e.STATIC_DRAW),e.getAttribLocation(c,"a_position")),l=(e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t),e.createBuffer()),o=(e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),e.getAttribLocation(c,"a_texCoords")),h=(e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(o),e.getUniformLocation(c,"u_direction")),p=(e.uniform2f(h,0,0),e.getUniformLocation(c,"u_texture")),g=(e.uniform1i(p,y),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW),100/Math.max(n,a)),x=n/a,m=[],v=0;v<3;v++){var E=it(e,null,y,n,a),b=(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,E,0),a<=n?e.uniform2f(h,g,0):e.uniform2f(h,g*x,0),e.uniform1i(p,d),e.drawArrays(e.TRIANGLES,0,6),m.push(_),it(e,null,d,n,a));e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,b,0),a<=n?e.uniform2f(h,0,g*x):e.uniform2f(h,0,g),e.uniform1i(p,y),e.drawArrays(e.TRIANGLES,0,6),_=b,m.push(E)}return e.deleteBuffer(s),e.deleteBuffer(l),e.disableVertexAttribArray(t),e.disableVertexAttribArray(o),m.forEach(function(t){return e.deleteTexture(t)}),_},drawOverflow:function(t,c,e,r,i,n,a,o){var s=t.createBuffer(),l=(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_position")),l=(t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l),e/a),h=r/o,i=(i+e)/a,e=(n+r)/o,a=t.createBuffer(),n=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([l,h,l,e,i,h,l,e,i,h,i,e]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_texCoords")),r=(t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),t.getUniformLocation(t.programOverflow,"u_texture"));t.uniform1i(r,c),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(s)},drawMask:function(t,e,r,i){var n=t.createBuffer(),a=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_position")),o=(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(i,"u_texture1")),l=(t.uniform1i(l,r),t.getUniformLocation(i,"u_texture2"));t.uniform1i(l,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,h,c){var n=t.createBuffer(),a=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),o=(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture1")),l=(t.uniform1i(l,r),t.getUniformLocation(e,"u_texture2"));t.uniform1i(l,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)},drawCm:function(t,e,r,i){var n=t.createBuffer(),a=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),o=(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture")),l=(t.uniform1i(l,r),t.getUniformLocation(e,"u_m"));t.uniform1fv(l,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)},drawDropShadow:function(t,e,c,r,u,_,i,f,d,n){var a=t.createBuffer(),o=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),s=(t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o),t.createBuffer()),l=(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),h=(t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l),t.getUniformLocation(e,"u_texture")),h=(t.uniform1i(h,i),t.getUniformLocation(e,"u_color"));return t.uniform1fv(h,new Float32Array([n[0]/255,n[1]/255,n[2]/255,n[3]])),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(s),t.disableVertexAttribArray(o),t.disableVertexAttribArray(l),r}},at={},ot={},st=[],lt=[],ht="function"==typeof OffscreenCanvas&&At.isFunction(OffscreenCanvas.prototype.getContext);function ct(t,e,r,i,n){var a;return(a=t?i[t]||(i[t]=!Z.flag&&ht?new OffscreenCanvas(e,r):document.createElement("canvas")):(a=i===at?st:lt).length?a.pop():!Z.flag&&ht?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,a.height=r,Z.flag&&(a.style.width=e+"px",a.style.height=r+"px",a.setAttribute("type",i===at?"canvas":"webgl"),t&&a.setAttribute("key",t),n&&a.setAttribute("message",n),document.body.appendChild(a)),e=i===at?a.getContext("2d"):a.getContext("webgl",J)||a.getContext("experimental-webgl",J),{canvas:a,ctx:e,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===at?st:lt).push(this.canvas),this.available=!1}}}var ut,_t,dt={},yt={},pt={},gt={};function xt(){(ut=document.createElement("div")).style.position="absolute",ut.style.left="99999px",ut.style.top="-99999px",ut.style.visibility="hidden",ut.style.whiteSpace="nowrap",document.body.appendChild(ut)}var vt,Et,Mt={measureTextSync:function(t,e,r,i,n){return ut||xt(),ut.style.fontFamily=e,ut.style.fontSize=r+"px",ut.style.fontWeight=i,ut.style.writingMode=n?"vertical-lr":"horizontal-tb",ut.innerHTML=t.replace(/</g,"&lt;").replace(/[ \n]/g,"&nbsp;"),n?parseFloat(window.getComputedStyle(ut,null).height):parseFloat(window.getComputedStyle(ut,null).width)},measureTextListMax:function(t,e,r,i){ut||xt(),ut.style.fontFamily=e,ut.style.fontSize=r+"px",ut.style.fontWeight=i;for(var n="",a=0,o=t.length;a<o;a++)n+='<span style="position:absolute">'+t.charAt(a).replace("<","&lt;").replace(/[ \n]/,"&nbsp;")+"</span>";ut.innerHTML=n;for(var s=0,l=ut.childNodes,h=0,c=l.length;h<c;h++)var u=l[h],s=Math.max(s,parseFloat(window.getComputedStyle(u,null).width));return s},IMG:dt,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,a=[];e.forEach(function(t,e){Mt.measureImg(t,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!e||!At.isString(e))return Mt.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,o,s=dt[e]=dt[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(o=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&("undefined"!=typeof location&&location.hostname===o[1]||(t.crossOrigin="anonymous")),t.src=e,Z.flag&&"undefined"!=typeof document&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Et=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(Mt.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Mt.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Tt.toString=function(){return Et.toString()},Tt),cancelAnimationFrame:(vt=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Mt.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Mt.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},bt.toString=function(){return vt.toString()},bt),now:function(){return"undefined"!=typeof performance?(Mt.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Mt.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&at.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return ct(r,t,e,at,i)},releaseCacheCanvas:function(t){st.push(t)},delCacheCanvas:function(t){t&&delete at[t]},hasCacheWebgl:function(t){return t&&ot.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return ct(r,t,e,ot,i)},releaseCacheWebgl:function(t){lt.push(t)},delCacheWebgl:function(t){t&&delete ot[t]},isDom:function(t){if(t){if(At.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(At.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},defaultFontFamily:"arial",getFontCanvas:function(){return Mt.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__")},checkSupportFontFamily:function(t){if((t=t.toLowerCase())===this.defaultFontFamily)return!0;if(gt.hasOwnProperty(t))return gt[t];for(var e=Mt.getFontCanvas(),r=e.ctx,i=(r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",_t||(r.clearRect(0,0,16,16),r.font="16px "+this.defaultFontFamily,r.fillText("a",8,8),e.draw(),_t=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),/\s/.test(t)&&(t='"'+t.replace(/"/g,'\\"')+'"'),r.font="16px "+t+","+this.defaultFontFamily,r.fillText("a",8,8),e.draw(),r.getImageData(0,0,16,16).data),n=0,a=i.length;n<a;n++)if(_t[n]!==i[n])return gt[t]=!0;return gt[t]=!1},loadFont:function(t,e,r){if(At.isFunction(e)&&(r=e,e=t),Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,a=[];e.forEach(function(t,e){Mt.loadFont(t.fontFamily,t.url,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!e||!At.isString(e))return Mt.error("Load font invalid: "+e),void(r&&r({state:2,success:!1,url:e}));t=t||e;var o,s=yt[e]=yt[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),e instanceof ArrayBuffer||/url\(/.test(e)||(e="url(".concat(e,")")),(o=new FontFace(t,e)).load().then(function(){document.fonts.add(o),s.state=2,s.success=!0,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})}).catch(function(){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,a=[];t.forEach(function(t,e){Mt.loadComponent(t,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!t||!At.isString(t))return Mt.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,o=pt[t]=pt[t]||{state:0,task:[]};2===o.state?r&&r(o):1===o.state?r&&o.task.push(r):(o.state=1,r&&o.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){o.state=2,o.success=!0,o.url=t,o.task.splice(0).forEach(function(t){return t(o)}),document.head.removeChild(e)},e.onerror=function(){o.state=2,o.success=!1,o.url=t,o.task.splice(0).forEach(function(t){return t(o)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function bt(t){return vt.apply(this,arguments)}function Tt(t){return Et.apply(this,arguments)}var Rt=At.isString,St={},Ot={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},simsun:{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)&&this.info[t].checked},register:function(r,t,e){r=r.toLowerCase(),Rt(t)||t instanceof ArrayBuffer||(e=t,t=null);var i,n,a=this.info;a[r]=a[r]||{},t&&!a[r].url&&(a[r].url=t,Mt.loadFont(r,t,function(t){if(a[r].success=t.success,t.success)for(var e=St[r]||[];e.length;)e.pop().__emitFontRegister(r)})),e&&!a[r].lhr&&(e=void 0===(e=(t=e||{}).emSquare)?2048:e,i=void 0===(i=t.ascent)?1854:i,n=t.descent,t=t.lineGap,Object.assign(a[r],{lhr:(i+(void 0===n?434:n)+(void 0===t?0:t))/e,blr:i/e}))},hasRegister:function(t){return this.info.hasOwnProperty(t)&&this.info[t].hasOwnProperty("lhr")},hasLoaded:function(t){return this.info.hasOwnProperty(t)&&this.info[t].success},onRegister:function(t,e){(St[t]=St[t]||[]).push(e)},offRegister:function(t,e){t=St[t]=St[t]||[],e=t.indexOf(e);-1<e&&t.splice(e,1)}},Ct=(Ot.info["宋体"]=Ot.info.simsun,Ot.info.pingfang=Ot.info["pingfang sc"],{position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit",writingMode:"inherit"}),It={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},wt=[],kt=[],Dt=(Object.keys(Ct).forEach(function(t){kt.push(t);var e=Ct[t];wt.push({k:t,v:e})}),[]),Lt=[],A=(Object.keys(It).forEach(function(t){Lt.push(t);var e=It[t];Dt.push({k:t,v:e})}),{get fontFamily(){return Mt.defaultFontFamily},fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:0,textStrokeOver:"none",writingMode:"horizontalTb"}),Ft=[],Nt=(Object.keys(A).forEach(function(t){Ft.push(t)}),{DOM:Ct,GEOM:It,isValid:function(t){return Ct.hasOwnProperty(t)||It.hasOwnProperty(t)},DOM_KEY_SET:kt,GEOM_KEY_SET:Lt,DOM_ENTRY_SET:wt,GEOM_ENTRY_SET:Dt,INHERIT:A,INHERIT_KEY_SET:Ft,VALID_STRING_VALUE:{position:["static","relative","absolute"],display:["block","inlineBlock","inline","flex","none"],flexDirection:["row","column","rowReverse","columnReverse"],flexWrap:["wrap","wrapReverse","nowrap"],justifyContent:["flexStart","center","flexEnd","spaceBetween","spaceAround","spaceEvenly"],alignItems:["stretch","flexStart","center","flexEnd","baseline"],alignSelf:["auto","stretch","flexStart","center","flexEnd","baseline"],overflow:["visible","hidden"],mixBlendMode:["normal","multiply","screen","overlay","darken","lighten","colorDodge","colorBurn","hardLight","softLight","difference","exclusion","hue","saturation","color","luminosity"],borderTopStyle:["solid","dashed","dotted"],borderRightStyle:["solid","dashed","dotted"],borderBottomStyle:["solid","dashed","dotted"],borderLeftStyle:["solid","dashed","dotted"],backgroundClip:["borderBox","paddingBox","contentBox"],textOverflow:["clip","ellipsis"],alignContent:["stretch","flexStart","center","flexEnd","spaceBetween","spaceAround"]}}),Pt={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var Gt={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},Yt=4*(Math.sqrt(2)-1)/3,Wt=Gt.crossProduct,Ut=Ht.calPoint,Xt=Ht.isE,t=T.STYLE_KEY,zt=t.WIDTH,Vt=t.HEIGHT,Kt=t.TRANSFORM_ORIGIN;function jt(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function $t(t,e,r){for(var i,n=Bt(r[0],2),c=n[0],u=n[1],n=Bt(r[0],2),_=n[0],f=n[1],d=r.length,a=1;a<d;a++)var o=Bt(r[a],2),y=o[0],o=o[1],c=Math.max(c,y),u=Math.max(u,o),_=Math.min(_,y),f=Math.min(f,o);if(t<_||e<f||c<t||u<e)return!1;for(var s=0,p=r.length;s<p;s++){var l=Bt(r[s],2),g=l[0],l=l[1],x=Bt(r[(s+1)%p],2),h=x[0],x=x[1],h=Wt(h-g,x-l,t-g,e-l);if(0!==h)if(h=0<h?1:0,void 0===i)i=h;else if(i^h)return!1}return!0}function qt(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function Zt(t,e,r){var t=Bt(t,4),i=t[0],n=t[1],a=t[2],t=t[3],e=Bt(e,4),o=e[0],s=e[1],l=e[2],e=e[3];if(r){if(l<i||e<n||a<o||t<s)return!1}else if(l<=i||e<=n||a<=o||t<=s)return!1;return!0}function Jt(t,e,r){var i=r.matrix,i=void 0===i?[1,0,0,1,0,0]:i,r=r.computedStyle,r=void 0===r?{}:r,n=r[zt],a=r[Vt],r=r[Kt],r=Bt(r=void 0===r?[.5*n,.5*a]:r,2),o=r[0],r=r[1],n=Bt(Ut([t*n-o,e*a-r],i),2);return[(t=n[0])+o,(e=n[1])+r]}function Qt(t){return t*Math.PI/180}var te={pointInConvexPolygon:$t,pointInQuadrilateral:function(c,u,t,e,r,i,n,a,_,f,o){var s,l,h;return o&&!Xt(o)?(t=(s=Bt(Ut([t,e],o),4))[0],e=s[1],s=s[3],r=(l=Bt(Ut([r,i],o),4))[0],i=l[1],l=l[3],_=(h=Bt(Ut([_,f],o),4))[0],f=h[1],h=h[3],n=(o=Bt(Ut([n,a],o),4))[0],a=o[1],s&&1!==s&&(t/=s,e/=s),l&&1!==l&&(r/=l,i/=l),h&&1!==h&&(_/=h,f/=h),(s=o[3])&&1!==s&&(n/=s,a/=s),$t(c,u,[[t,e],[r,i],[n,a],[_,f]])):t<=c&&e<=u&&c<=n&&u<=a},d2r:Qt,r2d:function(t){return 180*t/Math.PI},H:Yt,h:jt,angleBySide:function(t,e,r){return t=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(t)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:qt,triangleIncentre:function(t,e,r,i,n,a){var o=qt(r,i,n,a),s=qt(t,e,n,a),l=qt(t,e,r,i);return[(o*t+s*r+l*n)/(o+s+l),(o*e+s*i+l*a)/(o+s+l)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,n=r*Yt,a=i===r?n:i*Yt;return[[t-r,e],[t-r,e-a,t-n,e-i,t,e-i],[t+n,e-i,t+r,e-a,t+r,e],[t+r,e+a,t+n,e+i,t,e+i],[t-n,e+i,t-r,e+a,t-r,e]]},sectorPoints:function c(t,e,r,i,n){if(n<i&&(i=(l=[n,i])[0],n=l[1]),i===n)return[];var a=[],u=Math.floor(i/90),_=Math.floor(n/90);if(u===_||_-u==1&&n%90==0){var f,o,d,s,l=jt(Qt(Math.abs(i-n)))*r,h=Math.sqrt(Math.pow(r,2)+Math.pow(l,2)),l=Math.atan(l/r);u<90?(f=[t+Math.sin(Qt(i))*r,e-Math.cos(Qt(i))*r],o=l+Qt(i),s=[t+Math.sin(o)*h,e-Math.cos(o)*h],d=[t+Math.sin(Qt(n))*r,e-Math.cos(Qt(n))*r],o=Qt(n)-l,o=[t+Math.sin(o)*h,e-Math.cos(o)*h],a.push(f),a.push(s.concat(o).concat(d))):u<180?(f=[t+Math.cos(Qt(i-90))*r,e+Math.sin(Qt(i-90))*r],s=l+Qt(i-90),o=[t+Math.cos(s)*h,e+Math.sin(s)*h],d=[t+Math.cos(Qt(n-90))*r,e+Math.sin(Qt(n-90))*r],s=Qt(n-90)-l,s=[t+Math.cos(s)*h,e+Math.sin(s)*h],a.push(f),a.push(o.concat(s).concat(d))):u<270?(f=[t-Math.sin(Qt(i-180))*r,e+Math.cos(Qt(i-180))*r],o=l+Qt(i-180),s=[t-Math.sin(o)*h,e+Math.cos(o)*h],d=[t-Math.sin(Qt(n-180))*r,e+Math.cos(Qt(n-180))*r],o=Qt(n-180)-l,o=[t-Math.sin(o)*h,e+Math.cos(o)*h],a.push(f),a.push(s.concat(o).concat(d))):(f=[t-Math.cos(Qt(i-270))*r,e+Math.sin(Qt(i-270))*r],s=l+Qt(i-270),o=[t-Math.cos(s)*h,e+Math.sin(s)*h],d=[t-Math.cos(Qt(n-270))*r,e+Math.sin(Qt(n-270))*r],s=Qt(n-270)-l,l=[t-Math.cos(s)*h,e+Math.sin(s)*h],a.push(f),a.push(o.concat(l).concat(d)))}else{for(var y,p,g=u,x=[];g<=_;g++)0===g?(y=c(t,e,r,i,90),x.push(y)):1===g?(u===g||90<n)&&(y=c(t,e,r,i<90?90:i,180<n?180:n),x.push(y)):2===g?(u===g||180<n)&&(p=c(t,e,r,i<180?180:i,270<n?270:n),x.push(p)):3===g&&(u===g||270<n)&&(p=c(t,e,r,i<270?270:i,n),x.push(p));for(var a=x[0],m=1,v=x.length;m<v;m++)a.push(x[m][1])}return a},getRectsIntersection:function(t,e){if(!Zt(t,e))return null;var r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3],a=(e=Bt(e,4))[0],o=e[1],s=e[2],e=e[3];return[Math.max(r,a),Math.max(i,o),Math.min(n,s),Math.min(t,e)]},isRectsOverlap:Zt,isRectsInside:function(t,e,r){var i=(t=Bt(t,4))[0],n=t[1],a=t[2],t=t[3],o=(e=Bt(e,4))[0],s=e[1],l=e[2],e=e[3];if(r){if(i<=o&&n<=s&&l<=a&&e<=t)return!0}else if(i<o&&n<s&&l<a&&e<t)return!0;return!1},calCoordsInNode:Jt,calPercentInNode:function(t,e,r){var i,n=(s=r.computedStyle)[zt],a=s[Vt],o=(s=Bt(s[Kt],2))[0],s=s[1],l=Math.atan((a-s)/(n-o)),h=(r=Bt(Jt(1,1,r),2))[0],r=r[1],c=o<=h&&s<=r?(i=o===h?-Math.atan(1/0):Math.atan((r-s)/(h-o)))-l:o<=h&&r<s?(i=o===h?-Math.atan(1/0):Math.atan((s-r)/(h-o)))+l:h<o&&s<=r?(i=Math.atan((r-s)/(o-h)))-l:h<o&&r<s?(i=Math.atan((r-s)/(h-o)))<=l?i+Math.PI-l:-(c=Math.PI-i+l):0,r=Math.sqrt(Math.pow(t-o,2)+Math.pow(e-s,2)),h=o<=t&&s<=e?o===t?-Math.atan(1/0):Math.atan((e-s)/(t-o)):o<=t&&e<s?o===t?-Math.atan(1/0):-Math.atan((e-s)/(o-t)):t<o&&s<=e?Math.PI-Math.atan((e-s)/(o-t)):Math.atan((e-s)/(t-o))-Math.PI;return(h-=c)>Math.PI?(h-=Math.PI,[(o-r*Math.cos(h))/n,(s-r*Math.sin(h))/a]):h>.5*Math.PI?(h=Math.PI-h,[(o-r*Math.cos(h))/n,(s+r*Math.sin(h))/a]):0<=h?[(o+r*Math.cos(h))/n,(s+r*Math.sin(h))/a]:h>=.5*-Math.PI?(h=-h,[(o+r*Math.cos(h))/n,(s-r*Math.sin(h))/a]):h>=-Math.PI?(h=Math.PI+h,[(o-r*Math.cos(h))/n,(s-r*Math.sin(h))/a]):(h=-Math.PI-h,[(o-r*Math.cos(h))/n,(s+r*Math.sin(h))/a])},pointOnCircle:function(t,e,r,i){return 270<=i?(i=Qt(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=Qt(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=Qt(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=Qt(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var ee={getConicGradientImage:function(o,s,l,t,e,h){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");l=Math.floor(l),t=Math.floor(t);for(var c=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),u=0;u<t;u++)for(var r=function(t){for(var e=function(t,e){t-=o,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,u),r=void 0,r=0;r<c.length&&c[r].angle<=e;r++);var i=c[r-1],n=c[r];if(!i||!n)return"continue";var a=(e-i.angle)/(n.angle-i.angle),n=n.color.map(function(t,e){return a*(t-i.color[e])+i.color[e]}),t=4*(t+u*l);h[t]=n[0],h[1+t]=n[1],h[2+t]=n[2],h[3+t]=Math.min(255,255*n[3])},i=0;i<l;i++)r(i);return h}},re=At.int2rgba;function ie(t){var r="";return t.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];"blur"===e?r+="blur(".concat(t,"px)"):"dropShadow"===e?r+="drop-shadow(".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(re(t[4]),")"):"hueRotate"===e?r+="hue-rotate(".concat(t,"deg)"):"saturate"!==e&&"brightness"!==e&&"grayscale"!==e&&"contrast"!==e&&"sepia"!==e&&"invert"!==e||(r+="".concat(e,"(").concat(t,"%)"))}),r}var ne={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var n=-1,a=0,h=e.length;a<h;a++){var c=e[a];if(Array.isArray(c)&&c.length){n=a;break}}if(-1!==n){var o=e[n];t.moveTo(o[0]+r,o[1]+i),4===o.length?t.moveTo(o[2]+r,o[3]+i):6===o.length&&t.moveTo(o[4]+r,o[5]+i);for(var s=n+1,u=e.length;s<u;s++){var l=e[s];Array.isArray(l)&&(2===l.length?t.lineTo(l[0]+r,l[1]+i):4===l.length?t.quadraticCurveTo(l[0]+r,l[1]+i,l[2]+r,l[3]+i):6===l.length&&t.bezierCurveTo(l[0]+r,l[1]+i,l[2]+r,l[3]+i,l[4]+r,l[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)&&n.length){e=r;break}}if(-1===e)return"";var a=t[e],o="M"+a[0]+","+a[1];4===a.length?o="M"+a[2]+","+a[3]:6===a.length&&(o="M"+a[4]+","+a[5]);for(var s=e+1,l=t.length;s<l;s++){var h=t[s];Array.isArray(h)&&(2===h.length?o+="L"+h[0]+","+h[1]:4===h.length?o+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(o+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return o},canvasLine:function(t,e,h,r,i,n,a,o){var s=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+s,h+l),3===o?(t.bezierCurveTo(n[0]+s,n[1]+l,a[0]+s,a[1],r+s,i+l),2):2===o?(t.quadraticCurveTo(a[0]+s,a[1]+l,r+s,i+l),2):1===o?(t.quadraticCurveTo(n[0]+s,n[1]+l,r+s,i+l),2):(t.lineTo(r+s,i+l),1)},svgLine:function(t,e,r,i,n,a,o){return 3===o?"M"+t+","+e+"C"+n[0]+","+n[1]+" "+a[0]+","+a[1]+" "+r+","+i:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+i:1===o?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:ie,svgFilter:ie},ae=te.H,oe=r.PX,se=r.PERCENT,le=r.REM,he=r.VW,ce=r.VH,ue=r.VMAX,_e=r.VMIN,fe=ne.canvasPolygon,de=ne.svgPolygon,e=T.STYLE_KEY,ye=e.BORDER_LEFT_WIDTH,pe=e.BORDER_TOP_WIDTH,ge=e.BORDER_BOTTOM_WIDTH,xe=e.PADDING_LEFT,me=e.PADDING_BOTTOM,ve=e.PADDING_TOP,Ee=e.BORDER_TOP_LEFT_RADIUS,be=e.BORDER_TOP_RIGHT_RADIUS,Te=e.BORDER_BOTTOM_LEFT_RADIUS,Ae=e.BORDER_BOTTOM_RIGHT_RADIUS,Me=e.FONT_SIZE;function Re(t,e,r,i,c,u,_,n){var f=1,d=1,y=1;t:for(var a=u;c<=a;a--)for(var o=n;_<=o;o--){var s=a+o,l=Math.floor((t+o)/s),h=o;if(l*s<o+t)if(n<(h=(t-l*a)/(l-1)))continue;if(s=a+h,1<e&&a<e){if(a<e%s)continue;if(1<r)if(a<(e+i)%s)continue}if(1<r)if(a<(e+i)%s)continue;0<l&&(f=l,d=a,y=h);break t}return{n:f,ps:d,pd:y}}function Se(t,e,r,i,n,a){var o=n-e,s=i-r,r=r-e,e=n-i;return"dotted"===t?Re(o,r,e,s,a,a,Math.max(1,.25*a),2*a):(i=(n=Re(o,r,e,s,a,3*a,Math.max(1,.25*a),2*a)).n,t=n.ps,n=n.pd,1===i?Re(o,r,e,s,a,a,Math.max(1,.25*a),2*a):{n:i,ps:t,pd:n})}function Oe(c,u,_,f,t,e,d,r,i,y,p,g,n,x){var n=Bt(n,2),a=n[0],n=n[1],x=Bt(x,2),m=x[0],x=x[1];if(!(a&&n||m&&x))return g;for(var l=t+a-(t-f),h=e-m+(d-e),v=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[1][0]<l?v.push(s):s[0][0]>h?E.push(s):s[1][0]>h&&s[0][0]<l?(A=l<t?r+Math.tan(u)*(l-f):i,M=e<h?r+Math.tan(_)*(d-h):i,v.push([s[0],[l,r],[l,A],s[3]]),l<h&&(t<l&&h<e?o.push([[l,r],[h,r],[h,i],[l,i]]):t<l?(o.push([[l,r],[e,r],[e,i],[l,i]]),o.push([[e,r],[h,r],[h,M],[e,i]])):h<e?(o.push([[l,r],[t,r],[t,i],[l,A]]),o.push([[t,r],[h,r],[h,i],[t,i]])):(o.push([[l,r],[t,r],[t,i],[l,A]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[e,r],[h,r],[h,M],[e,i]]))),E.push([[h,r],s[1],s[2],[h,M]])):s[1][0]>h?(A=e<h?r+Math.tan(_)*(d-h):i,o.push([s[0],[h,r],[h,A],s[3]]),E.push([[h,r],s[1],s[2],[h,A]])):s[0][0]<l?(M=l<t?r+Math.tan(u)*(l-f):i,v.push([s[0],[l,r],[l,M],s[3]]),o.push([[l,r],s[1],s[2],[l,M]])):o.push(s)}v.length&&(R=t-f<a&&c<n,z=Math.atan((t-f)/(i-r)),w=(I=(S=n)-(i-r))/(a-(t-f)),n=Bt((k=Ce(v[0][0],v[0][1],l,C=r+n,O=S/a,S,!0,Math.tan(z)*S))[0],2),N=n[0],P=n[1],R&&(a=Bt((D=Ce(v[0][3],v[0][2],l,C,w,I,!0,Math.tan(z)*I))[0],2),L=a[0],F=a[1]),v.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=Ce(t[0],t[1],l,C,O,S),R&&(i=Ce(t[3],t[2],l,C,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],N,P,0);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,F,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var R,S,O,C,I,w,k,D,L,F,N,P,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=d-e<m&&c<x,n=Math.atan((d-e)/(i-r)),U=(W=(H=x)-(i-r))/(m-(d-e)),z=Bt((X=Ie(E[Z-1][0],E[Z-1][1],h,Y=r+x,G=H/m,H,!0,Math.tan(n)*H))[X.length-1],2),$=z[0],q=z[1],B&&(a=Bt((V=Ie(E[Z-1][3],E[Z-1][2],h,Y,U,W,!0,Math.tan(n)*W))[V.length-1],2),K=a[0],j=a[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=V)):(r=Ie(t[0],t[1],h,Y,G,H),B&&(i=Ie(t[3],t[2],h,Y,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,1);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),v.concat(o).concat(E)}function Ce(t,c,e,r,i,n,a,o){var s,u,t=Bt(t,2),l=t[0],t=t[1],c=Bt(c,2),h=c[0],c=c[1],l=(-l+e)*i,h=Math.atan((-h+e)*i/(r-c)),c=e-Math.sin(h)*n/i,_=r-Math.cos(h)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),s=.5*Math.PI-a,u=e-Math.cos(a)*n/i,r-Math.sin(a)*n):(s=Math.atan(l/(r-t)),u=e-Math.sin(s)*n/i,r-Math.cos(s)*n),s===h)return[[u,o]];a=te.h(Math.abs(s-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=s-t,n=h+t;return[[u,o],[e-Math.sin(a)*l/i,r-Math.cos(a)*l],[e-Math.sin(n)*l/i,r-Math.cos(n)*l],[c,_]]}function Ie(t,e,r,i,n,a,o,s){var l,c,t=Bt(t,2),u=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,u=Math.atan((u-r)*n/(i-t)),t=r+Math.sin(u)*a/n,_=i-Math.cos(u)*a;if(s=o?(o=Math.atan(s*n/a),s=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(s/(1+s)),l=.5*Math.PI-o,c=r+Math.cos(o)*a/n,i-Math.sin(o)*a):(l=Math.atan(h/(i-e)),c=r+Math.sin(l)*a/n,i-Math.cos(l)*a),u===l)return[[t,_]];o=te.h(Math.abs(u-l))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=u+e,a=l-e;return[[t,_],[r+Math.sin(o)*h/n,i-Math.cos(o)*h],[r+Math.sin(a)*h/n,i-Math.cos(a)*h],[c,s]]}function we(c,u,_,f,d,t,e,y,r,i,p,g,n,x){var n=Bt(n,2),m=n[0],n=n[1],x=Bt(x,2),v=x[0],x=x[1];if(!(m&&n||v&&x))return g;for(var l=r+n-(r-y),h=i-x+(p-i),a=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[2][1]<l?a.push(s):s[1][1]>h?E.push(s):s[2][1]>h&&s[1][1]<l?(A=l<r?t+Math.tan(_)*(r-l):t,M=i<h?t+Math.tan(u)*(h-i):t,a.push([s[0],s[1],[e,l],[A,l]]),l<h&&(h<i&&r<l?o.push([[t,l],[e,l],[e,h],[t,h]]):r<l?(o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[t,i],[e,i],[e,h],[M,h]])):h<i?(o.push([[A,l],[e,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,h],[t,h]])):(o.push([[A,l],[e,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[t,i],[e,i],[e,h],[M,h]]))),E.push([[M,h],[e,h],s[2],s[3]])):s[2][1]>h?(A=i<h?t+Math.tan(u)*(h-i):t,o.push([s[0],s[1],[e,h],[A,h]]),E.push([[A,h],[e,h],s[2],s[3]])):s[1][1]<l?(M=l<r?t+Math.tan(_)*(r-l):t,a.push([s[0],s[1],[e,l],[M,l]]),o.push([[M,l],[e,l],s[2],s[3]])):o.push(s)}a.length&&(R=r-y<n&&c<m,V=Math.atan((e-t)/(r-y)),w=(I=(S=n)-(r-y))/(m-(e-t)),n=Bt((k=ke(a[0][1],a[0][2],C=e-m,l,O=S/m,S,!0,Math.tan(V)*S))[k.length-1],2),N=n[0],P=n[1],R&&(y=Bt((D=ke(a[0][0],a[0][3],C,l,w,I,!0,Math.tan(V)*I))[D.length-1],2),L=y[0],F=y[1]),a.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=ke(t[1],t[2],C,l,O,S),R&&(i=ke(t[0],t[3],C,l,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],N,P,2);if(R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,F,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var R,S,O,C,I,w,k,D,L,F,N,P,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=p-i<x&&c<v,m=Math.atan((e-t)/(p-i)),U=(W=(H=x)-(p-i))/(v-(e-t)),n=Bt((X=De(E[Z-1][1],E[Z-1][2],Y=e-v,h,G=H/v,H,!0,Math.tan(m)*H))[0],2),$=n[0],q=n[1],B&&(V=Bt((z=De(E[Z-1][0],E[Z-1][3],Y,h,U,W,!0,Math.tan(m)*W))[0],2),K=V[0],j=V[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=z)):(r=De(t[1],t[2],Y,h,G,H),B&&(i=De(t[0],t[3],Y,h,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,3);if(B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),a.concat(o).concat(E)}function ke(t,c,e,r,i,n,a,o){var u,t=Bt(t,2),s=t[0],t=t[1],c=Bt(c,2),l=c[0],c=c[1],s=(s-e)*i,l=Math.atan((l-e)*i/(r-c)),c=e+Math.sin(l)*n/i,_=r-Math.cos(l)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),h=.5*Math.PI-a,u=e+Math.cos(a)*n/i,r-Math.sin(a)*n):(h=Math.atan(s/(r-t)),u=e+Math.sin(h)*n/i,r-Math.cos(h)*n),h===l)return[[u,o]];var a=te.h(Math.abs(h-l))*n,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=h+t,n=e+Math.sin(a)*s/i,h=r-Math.cos(a)*s,a=l-t;return[[c,_],[e+Math.sin(a)*s/i,r-Math.cos(a)*s],[n,h],[u,o]]}function De(t,e,r,i,n,a,o,c){var s,u,t=Bt(t,2),l=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,l=Math.atan((l-r)*n/(t-i)),t=r+Math.sin(l)*a/n,_=i+Math.cos(l)*a;if(c=o?(o=Math.atan(c*n/a),c=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(c/(1+c)),s=.5*Math.PI-o,u=r+Math.cos(o)*a/n,i+Math.sin(o)*a):(s=Math.atan(h/(e-i)),u=r+Math.sin(s)*a/n,i+Math.cos(s)*a),l===s)return[[t,_]];o=te.h(Math.abs(l-s))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=l-e,a=r+Math.sin(o)*h/n,l=i+Math.cos(o)*h,o=s+e;return[[u,c],[r+Math.sin(o)*h/n,i+Math.cos(o)*h],[a,l],[t,_]]}function Le(c,u,_,f,t,e,d,y,p,r,i,g,n,x){var n=Bt(n,2),a=n[0],n=n[1],x=Bt(x,2),m=x[0],x=x[1];if(!(a&&n||m&&x))return g;for(var l=t+a-(t-f),h=e-m+(d-e),v=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[2][0]<l?v.push(s):s[3][0]>h?E.push(s):s[2][0]>h&&s[3][0]<l?(A=l<t?i-Math.tan(u)*(l-f):p,M=e<h?i-Math.tan(_)*(d-h):r,v.push([s[0],[l,A],[l,i],s[3]]),l<h&&(t<l&&h<e?o.push([[l,r],[h,r],[h,i],[l,i]]):t<l?(o.push([[l,r],[e,r],[e,i],[l,i]]),o.push([[e,r],[h,M],[h,i],[e,i]])):h<e?(o.push([[l,A],[t,r],[t,i],[l,i]]),o.push([[t,r],[h,r],[h,i],[t,i]])):(o.push([[l,A],[t,r],[t,i],[l,i]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[e,r],[h,M],[h,i],[e,i]]))),E.push([[h,M],s[1],s[2],[h,i]])):s[2][0]>h?(A=e<h?i-Math.tan(_)*(d-h):r,o.push([s[0],[h,A],[h,i],s[3]]),E.push([[h,A],s[1],s[2],[h,i]])):s[3][0]<l?(M=l<t?i-Math.tan(u)*(l-f):r,v.push([s[0],[l,M],[l,i],s[3]]),o.push([[l,M],s[1],s[2],[l,i]])):o.push(s)}v.length&&(R=t-f<a&&c<n,z=Math.atan((t-f)/(i-r)),w=(I=(S=n)-(i-r))/(a-(t-f)),n=Bt((k=Fe(v[0][3],v[0][2],l,C=i-n,O=S/a,S,!0,Math.tan(z)*S))[0],2),N=n[0],P=n[1],R&&(a=Bt((D=Fe(v[0][0],v[0][1],l,C,w,I,!0,Math.tan(z)*I))[0],2),L=a[0],F=a[1]),v.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=Fe(t[3],t[2],l,C,O,S),R&&(i=Fe(t[0],t[1],l,C,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],N,P,4);if(R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,F,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}));var R,S,O,C,I,w,k,D,L,F,N,P,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=d-e<m&&c<x,n=Math.atan((d-e)/(i-r)),U=(W=(H=x)-(i-r))/(m-(d-e)),z=Bt((X=Ne(E[Z-1][3],E[Z-1][2],h,Y=i-x,G=H/m,H,!0,Math.tan(n)*H))[X.length-1],2),$=z[0],q=z[1],B&&(a=Bt((V=Ne(E[Z-1][0],E[Z-1][1],h,Y,U,W,!0,Math.tan(n)*W))[V.length-1],2),K=a[0],j=a[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=V)):(r=Ne(t[3],t[2],h,Y,G,H),B&&(i=Ne(t[0],t[1],h,Y,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,5);if(B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))})),v.concat(o).concat(E)}function Fe(t,c,e,r,i,n,a,o){var s,u,t=Bt(t,2),l=t[0],t=t[1],c=Bt(c,2),h=c[0],c=c[1],l=(-l+e)*i,h=Math.atan((-h+e)*i/(c-r)),c=e-Math.sin(h)*n/i,_=r+Math.cos(h)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),s=.5*Math.PI-a,u=e-Math.cos(a)*n/i,r+Math.sin(a)*n):(s=Math.atan(l/(t-r)),u=e-Math.sin(s)*n/i,r+Math.cos(s)*n),s===h)return[[u,o]];a=te.h(Math.abs(s-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=s-t,n=h+t;return[[u,o],[e-Math.sin(a)*l/i,r+Math.cos(a)*l],[e-Math.sin(n)*l/i,r+Math.cos(n)*l],[c,_]]}function Ne(t,e,r,i,n,a,o,s){var l,c,t=Bt(t,2),u=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,u=Math.atan((u-r)*n/(t-i)),t=r+Math.sin(u)*a/n,_=i+Math.cos(u)*a;if(s=o?(o=Math.atan(s*n/a),s=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(s/(1+s)),l=.5*Math.PI-o,c=r+Math.cos(o)*a/n,i+Math.sin(o)*a):(l=Math.atan(h/(e-i)),c=r+Math.sin(l)*a/n,i+Math.cos(l)*a),u===l)return[[t,_]];o=te.h(Math.abs(u-l))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=u+e,a=l-e;return[[t,_],[r+Math.sin(o)*h/n,i+Math.cos(o)*h],[r+Math.sin(a)*h/n,i+Math.cos(a)*h],[c,s]]}function Pe(c,u,_,t,e,f,d,y,r,i,p,g,n,x){var n=Bt(n,2),m=n[0],n=n[1],x=Bt(x,2),v=x[0],x=x[1];if(!(m&&n||v&&x))return g;for(var l=r+n-(r-y),h=i-x+(p-i),a=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[3][1]<l?a.push(s):s[0][1]>h?E.push(s):s[3][1]>h&&s[0][1]<l?(A=l<r?e-Math.tan(_)*(r-l):e,M=i<h?e-Math.tan(u)*(h-i):e,a.push([s[0],s[1],[A,l],[t,l]]),l<h&&(h<i&&r<l?o.push([[t,l],[e,l],[e,h],[t,h]]):r<l?(o.push([[t,l],[e,l],[e,i],[t,i]]),o.push([[t,i],[e,i],[M,h],[t,h]])):h<i?(o.push([[t,l],[A,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,h],[t,h]])):(o.push([[t,l],[A,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[t,i],[e,i],[M,h],[t,h]]))),E.push([[t,h],[M,h],s[2],s[3]])):s[3][1]>h?(A=i<h?e-Math.tan(u)*(h-i):e,o.push([s[0],s[1],[A,h],[t,h]]),E.push([[t,h],[A,h],s[2],s[3]])):s[1][1]<l?(M=l<r?e-Math.tan(_)*(r-l):e,a.push([s[0],s[1],[M,l],[t,l]]),o.push([[t,l],[M,l],s[2],s[3]])):o.push(s)}a.length&&(R=r-y<n&&c<m,V=Math.atan((e-t)/(r-y)),w=(I=(S=n)-(r-y))/(m-(e-t)),n=Bt((k=Be(a[0][0],a[0][3],C=t+m,l,O=S/m,S,!0,Math.tan(V)*S))[k.length-1],2),N=n[0],P=n[1],R&&(y=Bt((D=Be(a[0][1],a[0][2],C,l,w,I,!0,Math.tan(V)*I))[D.length-1],2),L=y[0],F=y[1]),a.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=Be(t[0],t[3],C,l,O,S),R&&(i=Be(t[1],t[2],C,l,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],N,P,6);if(R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,F,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var R,S,O,C,I,w,k,D,L,F,N,P,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=p-i<x&&c<v,m=Math.atan((e-t)/(p-i)),U=(W=(H=x)-(p-i))/(v-(e-t)),n=Bt((X=He(E[Z-1][0],E[Z-1][3],Y=t+v,h,G=H/v,H,!0,Math.tan(m)*H))[0],2),$=n[0],q=n[1],B&&(V=Bt((z=He(E[Z-1][1],E[Z-1][2],Y,h,U,W,!0,Math.tan(m)*W))[0],2),K=V[0],j=V[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=z)):(r=He(t[0],t[3],Y,h,G,H),B&&(i=He(t[1],t[2],Y,h,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,7);if(B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),a.concat(o).concat(E)}function Be(t,c,e,r,i,n,a,o){var u,t=Bt(t,2),s=t[0],t=t[1],c=Bt(c,2),l=c[0],c=c[1],s=(e-s)*i,l=Math.atan((e-l)*i/(r-c)),c=e-Math.sin(l)*n/i,_=r-Math.cos(l)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),h=.5*Math.PI-a,u=e-Math.cos(a)*n/i,r-Math.sin(a)*n):(h=Math.atan(s/(r-t)),u=e-Math.sin(h)*n/i,r-Math.cos(h)*n),h===l)return[[u,o]];var a=te.h(Math.abs(h-l))*n,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=h+t,n=e-Math.sin(a)*s/i,h=r-Math.cos(a)*s,a=l-t;return[[c,_],[e-Math.sin(a)*s/i,r-Math.cos(a)*s],[n,h],[u,o]]}function He(t,e,r,i,n,a,o,c){var s,u,t=Bt(t,2),l=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(r-h)*n,l=Math.atan((r-l)*n/(t-i)),t=r-Math.sin(l)*a/n,_=i+Math.cos(l)*a;if(c=o?(o=Math.atan(c*n/a),c=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(c/(1+c)),s=.5*Math.PI-o,u=r-Math.cos(o)*a/n,i+Math.sin(o)*a):(s=Math.atan(h/(e-i)),u=r-Math.sin(s)*a/n,i+Math.cos(s)*a),l===s)return[[t,_]];o=te.h(Math.abs(l-s))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=l-e,a=r-Math.sin(o)*h/n,l=i+Math.cos(o)*h,o=s+e;return[[u,c],[r-Math.sin(o)*h/n,i+Math.cos(o)*h],[a,l],[t,_]]}function Ge(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Ye=[Ee,be,Ae,Te];var We={calPoints:function(c,u,_,f,t,d,e,r,i,n,a,o,y,p,g){var s=[];if("none"===u)return s;if(-1<["dashed","dotted"].indexOf(u)){var u=0===y||2===y?Se(u,t,d,e,r,c):Se(u,i,n,a,o,c),x=u.n,m=u.ps,v=u.pd;if(1<x){for(var E=0;E<x;E++){var b=E===x-1,l=void 0,T=void 0,A=void 0,h=(l=0===y||2===y?E?t+m*E+v*E:t:E?i+m*E+v*E:i)+m;0===y?h<=d?b?s.push([[t,i],[r,i],[e,n],[d,n]]):(T=i+(l-t)*Math.tan(_),A=i+(h-t)*Math.tan(_),s.push([[l,i],[h,i],[h,A],[l,T]])):e<=l?(T=i+(r-l)*Math.tan(f),A=i+(r-h)*Math.tan(f),b?s.push([[l,i],[r,i],[r,i],[l,T]]):s.push([[l,i],[h,i],[h,A],[l,T]])):l<d?(T=i+(l-t)*Math.tan(_),s.push([[l,i],[d,i],[d,n],[l,T]]),b?(s.push([[d,i],[e,i],[e,n],[d,n]]),s.push([[e,i],[r,i],[r,i],[d,n]])):e<h?(A=i+(r-h)*Math.tan(f),s.push([[d,i],[e,i],[e,n],[d,n]]),s.push([[e,i],[h,i],[h,A],[e,n]])):s.push([[d,i],[h,i],[h,n],[d,n]])):e<h?(T=i+(r-h)*Math.tan(f),l<d?(A=i+(l-t)*Math.tan(_),s.push([[l,i],[d,i],[d,n],[l,A]]),s.push([[d,i],[e,i],[e,n],[d,n]])):s.push([[l,i],[e,i],[e,n],[l,n]]),b?s.push([[e,i],[r,i],[r,i],[e,n]]):s.push([[e,i],[h,i],[h,T],[e,n]])):b?s.push([[l,i],[r,i],[e,n],[l,n]]):s.push([[l,i],[h,i],[h,n],[l,n]]):1===y?h<=n?b?s.push([[e,n],[r,i],[r,o],[e,a]]):(T=r-(l-i)*Math.tan(_),A=r-(h-i)*Math.tan(_),s.push([[T,l],[r,l],[r,h],[A,h]])):a<=l?(T=e+(l-a)*Math.tan(f),A=e+(h-a)*Math.tan(f),b?s.push([[T,l],[r,l],[r,o],[r,o]]):s.push([[T,l],[r,l],[r,h],[A,h]])):l<n?(T=e+(n-l)*Math.tan(_),s.push([[T,l],[r,l],[r,n],[e,n]]),b?(s.push([[e,n],[r,n],[r,a],[e,a]]),s.push([[e,a],[r,a],[r,o],[r,o]])):a<h?(A=e+(h-a)*Math.tan(f),s.push([[e,n],[r,n],[r,a],[e,a]]),s.push([[e,a],[r,a],[r,h],[A,h]])):s.push([[e,n],[r,n],[r,h],[e,h]])):a<h?(T=e+(h-a)*Math.tan(f),l<n?(A=e+(n-l)*Math.tan(_),s.push([[A,l],[r,l],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,a],[e,a]]),b?s.push([[e,a],[r,a],[r,r],[r,r]]):s.push([[e,a],[r,a],[r,h],[T,h]])):(s.push([[e,l],[r,l],[r,a],[e,a]]),b?s.push([[e,a],[r,a],[r,o],[r,o]]):s.push([[e,a],[r,a],[r,h],[T,h]]))):b?s.push([[e,l],[r,l],[r,o],[e,a]]):s.push([[e,l],[r,l],[r,h],[e,h]]):2===y?h<=d?b?s.push([[t,o],[d,a],[e,a],[r,o]]):(T=o-(l-t)*Math.tan(_),A=o-(h-t)*Math.tan(_),s.push([[l,T],[h,A],[h,o],[l,o]])):e<=l?(T=o-(r-l)*Math.tan(f),A=o-(r-h)*Math.tan(f),b?s.push([[l,T],[r,o],[r,o],[l,o]]):s.push([[l,T],[h,A],[h,o],[l,o]])):l<d?(T=o-(l-t)*Math.tan(_),s.push([[l,T],[d,a],[d,o],[l,o]]),b?(s.push([[d,a],[e,a],[e,o],[d,o]]),s.push([[e,a],[r,o],[r,o],[e,o]])):e<h?(A=o-(h-e)*Math.tan(f),s.push([[d,a],[e,a],[e,o],[d,o]]),s.push([[e,a],[h,A],[h,o],[e,o]])):s.push([[d,a],[h,a],[h,o],[d,o]])):e<h?(T=o-(r-h)*Math.tan(f),l<d?(A=o-(l-e)*Math.tan(_),s.push([[l,A],[d,a],[d,o],[l,o]]),s.push([[d,a],[e,a],[e,o],[d,o]])):s.push([[l,a],[e,a],[e,o],[l,o]]),b?s.push([[e,a],[r,o],[r,o],[e,o]]):s.push([[e,a],[h,T],[h,o],[e,o]])):b?s.push([[l,a],[e,a],[r,o],[l,o]]):s.push([[l,a],[h,a],[h,o],[l,o]]):3===y&&(h<=n?b?s.push([[t,i],[d,n],[d,a],[t,o]]):(T=t+(l-i)*Math.tan(_),A=t+(h-i)*Math.tan(_),s.push([[t,l],[T,l],[A,h],[t,h]])):a<=l?(T=t+(o-l)*Math.tan(f),A=t+(o-h)*Math.tan(f),b?s.push([[t,l],[T,l],[t,o],[t,o]]):s.push([[t,l],[T,l],[A,h],[t,h]])):l<n?(T=t+(l-i)*Math.tan(_),s.push([[t,l],[T,l],[d,n],[t,n]]),b?(s.push([[t,n],[d,n],[d,a],[t,a]]),s.push([[t,a],[d,a],[t,o],[t,o]])):a<h?(A=t+(o-h)*Math.tan(f),s.push([[t,n],[d,n],[d,a],[t,a]]),s.push([[t,a],[d,a],[A,h],[t,h]])):s.push([[t,n],[d,n],[d,h],[t,h]])):a<h?(T=t+(o-h)*Math.tan(f),l<n?(A=t+(l-i)*Math.tan(_),s.push([[t,l],[A,l],[d,n],[t,i]]),s.push([[t,n],[d,n],[d,a],[t,a]])):s.push([[t,l],[d,l],[d,a],[t,a]]),b?s.push([[t,a],[d,a],[t,o],[t,o]]):s.push([[t,a],[d,a],[T,h],[t,h]])):b?s.push([[t,l],[d,l],[d,a],[t,o]]):s.push([[t,l],[d,l],[d,h],[t,h]]))}if(0===y)return Oe(c,_,f,t,d,e,r,i,n,0,0,s,p,g);if(1===y)return we(c,_,f,0,0,e,r,i,n,a,o,s,p,g);if(2===y)return Le(c,_,f,t,d,e,r,0,n,a,o,s,p,g);if(3===y)return Pe(c,_,f,t,d,0,0,i,n,a,o,s,p,g)}}return 0===y?(t<d&&s.push([[t,i],[d,i],[d,n],[t,i]]),s.push([[d,i],[e,i],[e,n],[d,n]]),e<r&&s.push([[e,i],[r,i],[r,i],[e,n]]),Oe(c,_,f,t,d,e,r,i,n,0,0,s,p,g)):1===y?(i<n&&s.push([[r,i],[r,i],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,a],[e,a]]),a<o&&s.push([[e,a],[r,a],[r,o],[r,o]]),we(c,_,f,0,0,e,r,i,n,a,o,s,p,g)):2===y?(t<d&&s.push([[t,o],[d,a],[d,o],[t,o]]),s.push([[d,a],[e,a],[e,o],[d,o]]),e<r&&s.push([[e,a],[r,o],[r,o],[e,o]]),Le(c,_,f,t,d,e,r,0,n,a,o,s,p,g)):3===y?(i<n&&s.push([[t,i],[t,i],[d,n],[t,n]]),s.push([[t,n],[d,n],[d,a],[t,a]]),a<o&&s.push([[t,a],[d,a],[t,o],[t,o]]),Pe(c,_,f,t,d,0,0,i,n,a,o,s,p,g)):void 0},calRadius:function(t,e,r,i,n,a,o,s){var l,h=(n=Bt(n,2))[0],n=n[1],c=(a=Bt(a,2))[0],a=a[1],u=(o=Bt(o,2))[0],o=o[1],_=(s=Bt(s,2))[0],s=s[1],h=Math.max(h,0),n=Math.max(n,0),c=Math.max(c,0),a=Math.max(a,0),u=Math.max(u,0),o=Math.max(o,0),_=Math.max(_,0),s=Math.max(s,0);if(l=0<h&&0<n||0<c&&0<a||0<u&&0<o||0<_&&0<s?!0:l)return l=[],0<h&&0<n?(l.push([t,e+n]),l.push([t,e+n*(1-ae),t+h*(1-ae),e,t+h,e])):l.push([t,e]),0<c&&0<a?(l.push([t+r-c,e]),l.push([t+r-c*(1-ae),e,t+r,e+a*(1-ae),t+r,e+a])):l.push([t+r,e]),0<u&&0<o?(l.push([t+r,e+i-o]),l.push([t+r,e+i-o*(1-ae),t+r-u*(1-ae),e+i,t+r-u,e+i])):l.push([t+r,e+i]),0<_&&0<s?(l.push([t+_,e+i]),l.push([t+_*(1-ae),e+i,t,e+i-s*(1-ae),t,e+i-s])):l.push([t,e+i]),l},calBorderRadius:function(a,o,e,s,r){var i=!0;Ye.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===oe?Math.max(0,t[0]):t[1]===se?Math.max(0,t[0]*(e?o:a)*.01):t[1]===le?Math.max(0,t[0]*r.computedStyle[Me]):t[1]===he?Math.max(0,t[0]*r.width*.01):t[1]===ce?Math.max(0,t[0]*r.height*.01):t[1]===ue?Math.max(0,t[0]*Math.max(r.width,r.height)*.01):t[1]===_e?Math.max(0,t[0]*Math.min(r.width,r.height)*.01):0):0})}),i||Ye.forEach(function(t,e){var r,i=e%2==0?0:1,n=i?o:a,t=s[t],e=s[Ye[(e+1)%4]];t[i]+e[i]>n&&(t[i]>=(r=.5*n)&&e[i]>=r?t[i]=e[i]=r:t[i]>r?t[i]=n-e[i]:e[i]>r&&(e[i]=n-t[i]))})},calBorderRadiusInline:function(t,e,r){t.length&&(i=t[0],(n=t[t.length-1]).isEllipsis&&(n=t[t.length-2]));var i,n,a=i?i.outerWidth:0,o=i?i.outerHeight:0;a+=r[ye]+r[xe],o+=r[pe]+r[ge]+r[ve]+r[me],[Ee,Te].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===oe?Math.max(0,t[0]):Math.max(0,t[0]*(e?o:a)*.01);t=Math.min(e?o:a,t);return t})}),a=n?n.outerWidth:0,o=n?n.outerHeight:0,[be,Ae].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===oe?Math.max(0,t[0]):Math.max(0,t[0]*(e?o:a)*.01);t=Math.min(e?o:a,t);return t})})},renderBorder:function(t,e,r,i,n,a,o){var s;e===et.CANVAS||e===et.WEBGL?(r.beginPath(),r.fillStyle!==n&&(r.fillStyle=n),i.forEach(function(t){fe(r,t,a,o)}),r.fill(),r.closePath()):e===et.SVG&&(s="",i.forEach(function(t){s+=de(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",n]]}))}},Ue=At.rgba2int,Xe=At.isNil,ze=r.PX,Ve=r.PERCENT,Ke=r.DEG,je=r.NUMBER,$e=r.REM,qe=r.VW,Ze=r.VH,Je=r.VMAX,Qe=r.VMIN,tr=r.calUnit,er=te.d2r,rr=ne.canvasPolygon,ir=T.STYLE_KEY.FONT_SIZE;function nr(t){var e;return/^[-+]?[\d.]/.test(t)?(e=tr(t),-1<[je,Ke].indexOf(e[1])&&(e[1]=ze),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,Ve]}function ar(c,t,e){for(var u,r=[],_=c[0][0],f=0,d=c.length;f<d;f++){var i,n=c[f];1<n.length?(i=n[1])[1]===Ve?r.push([n[0],.01*i[0]]):i[1]===$e?r.push([n[0],i[0]*e.computedStyle[ir]/t]):i[1]===qe?r.push([n[0],i[0]*e.width/t]):i[1]===Ze?r.push([n[0],i[0]*e.height/t]):i[1]===Je?r.push([n[0],i[0]*Math.max(e.width,e.height)/t]):i[1]===Qe?r.push([n[0],i[0]*Math.min(e.width,e.height)/t]):r.push([n[0],i[0]/t]):r.push([n[0]])}1===r.length&&r.push(At.clone(r[0])),1===r[0].length&&r[0].push(0),1<r.length&&(1===r[u=r.length-1].length&&r[u].push(1));for(var y=r[0][1],a=1,p=r.length;a<p-1;a++){var g=r[a];if(1<g.length)y=g[1];else{for(var x=a+1,m=r[r.length-1][1];x<p-1;x++){var v=r[x];if(1<v.length){m=v[1];break}}for(var E=(m-y)/(x-a+1),b=a;b<x;b++)r[b].push(y+E*(b+1-a));a=x}}for(var T=1,A=r.length;T<A;T++){var M=r[T],R=r[T-1];M[1]<R[1]&&(M[1]=R[1])}for(var S=0,O=r.length;S<O;S++){var o=r[S];if(1<o[1]){r.splice(S);var C,I,w,k,s=r[S-1];s&&s[1]<1&&(C=o[0][0]-s[0][0],I=o[0][1]-s[0][1],w=o[0][2]-s[0][2],k=o[0][3]-s[0][3],s=(1-s[1])/(o[1]-s[1]),r.push([[o[0][0]+C*s,o[0][1]+I*s,o[0][2]+w*s,o[0][3]+k*s],1]));break}}for(var D=r.length-1;0<=D;D--){var l=r[D];if(l[1]<0){r.splice(0,D+1);var L,F,N,P,h=r[D];h&&0<h[1]&&(L=h[0][0]-l[0][0],F=h[0][1]-l[0][1],N=h[0][2]-l[0][2],P=h[0][3]-l[0][3],h=-l[1]/(h[1]-l[1]),r.unshift([[l[0][0]+L*h,l[0][1]+F*h,l[0][2]+N*h,l[0][3]+P*h],0]));break}}return r.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),r.length||r.push([_,0]),r}function or(t,e,r,i,n,a){var o=t[0],t=t[1],i=o[1]===Ve?e+o[0]*i*.01:o[1]===$e?e+o[0]*a.computedStyle[ir]:o[1]===qe?e+o[0]*a.width*.01:o[1]===Ze?e+o[0]*a.height*.01:o[1]===Je?e+o[0]*Math.max(a.width,a.height)*.01:o[1]===Qe?e+o[0]*Math.min(a.width,a.height)*.01:e+o[0],e=t[1]===Ve?r+t[0]*n*.01:t[1]===$e?r+t[0]*a.computedStyle[ir]:t[1]===qe?r+t[0]*a.width*.01:t[1]===Ze?r+t[0]*a.height*.01:t[1]===Ze?r+t[0]*Math.max(a.width,a.height)*.01:t[1]===Ze?r+t[0]*Math.min(a.width,a.height)*.01:r+t[0];return[i,e]}var sr={parseGradient:function(t){var e,r,i,n,a,o;if(t=Pt.gradient.exec(t))return"linear"===(e={k:t[1]}).k?(a=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(t[2]))?e.d=(a=a[0].toLowerCase(),o=180,"to top"===a?o=0:"to top right"===a?o=45:"to right"===a?o=90:"to bottom right"===a?o=135:"to bottom"===a||("to bottom left"===a?o=225:"to left"===a?o=270:"to top left"===a?o=315:(a=/([-+]?[\d.]+)deg/.exec(a))&&(o=parseFloat(a[1]))),o%360):(a=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(t[2]),e.d=a?[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])]:180):"radial"===e.k?(e.s=-1<t[2].indexOf("circle")?"circle":"ellipse",(o=/(closest|farthest)-(side|corner)/i.exec(t[2]))?e.z=o[0].toLowerCase():(a=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(t[2]))?(e.z=[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])],r=!Xe(a[5]),n=!Xe(a[6]),i=!Xe(a[7]),r&&n&&i?(e.z.push(parseFloat(a[5])),e.z.push(parseFloat(a[6])),e.z.push(parseFloat(a[7]))):r&&n?(e.z.push(parseFloat(a[5])),e.z.push(parseFloat(a[6])),e.z.push(1)):r?(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(parseFloat(a[5]))):(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(1))):e.z="farthest-corner",(i=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(n=nr(i[1]),r=i[2]?nr(i[2]):n,e.p=[n,r]):e.p=[[50,Ve],[50,Ve]]):"conic"===e.k&&(i=/([-+]?[\d.]+deg)/i.exec(t[2]),e.d=i?parseFloat(i[0])%360:0,(n=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(r=nr(n[1]),i=n[2]?nr(n[2]):r,e.p=[r,i]):e.p=[[50,Ve],[50,Ve]]),n=t[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[],e.v=n.map(function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),e=[Ue(e[0])],t=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);return t&&(t=tr(t[0]),-1<[je,Ke].indexOf(t[1])&&(t[1]=ze),e[1]=t),e}),e},getLinear:function(c,t,e,r,i,n,a,u,_){if(e+=o=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,r+=l=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,i+=o,n+=l,Array.isArray(t))var f=e+t[0]*a,d=r+t[1]*u,y=e+t[2]*a,p=r+t[3]*u,g=ar(c,Math.sqrt(Math.pow(y-f,2)+Math.pow(p-d,2)));else{for(;360<=t;)t-=360;for(;t<0;)t+=360;var o=Math.max(a,u),i=(l=o,i=i,n=n,h=270<=(h=t)?(s=er(360-h),x=i+Math.sin(s)*l,m=n+Math.cos(s)*l,v=i-Math.sin(s)*l,n-Math.cos(s)*l):180<=h?(s=er(h-180),x=i+Math.sin(s)*l,m=n-Math.cos(s)*l,v=i-Math.sin(s)*l,n+Math.cos(s)*l):90<=h?(s=er(180-h),x=i-Math.sin(s)*l,m=n-Math.cos(s)*l,v=i+Math.sin(s)*l,n+Math.cos(s)*l):(s=er(h),x=i-Math.sin(s)*l,m=n+Math.cos(s)*l,v=i+Math.sin(s)*l,n-Math.cos(s)*l),[x,m,v,h]),n=(o*=2,Gt.dotProduct(e-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/o),s=Gt.dotProduct(e+a-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/o,l=Gt.dotProduct(e+a-i[0],r+u-i[1],i[2]-i[0],i[3]-i[1])/o,x=Gt.dotProduct(e-i[0],r+u-i[1],i[2]-i[0],i[3]-i[1])/o,m=n,v=Math.min(n,Math.min(s,Math.min(l,x))),m=Math.max(m,Math.max(s,Math.max(l,x))),h=v/o,a=i[2]-i[0],e=i[3]-i[1];f=i[0]+a*h,d=i[1]+e*h,y=i[2]-a*h,p=i[3]-e*h,g=ar(c,m-v,_)}return{x1:f,y1:d,x2:y,y2:p,stop:g}},getRadial:function(c,u,t,_,e,r,i,f,d){u=u,t=t,_=_,o=i-e,s=f-r,e=e+=m=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,r=r+=v=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,m=i+=m,i=f+=v,v=d,f=0,Array.isArray(t)?(l=e+t[0]*o,h=r+t[1]*s,y=e+t[4]*o,p=r+t[5]*s,t[6]<=0?g=Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(n=(a=Math.sqrt(Math.pow((t[2]-t[0])*o,2)+Math.pow((t[3]-t[1])*s,2)))*t[6],g=Math.max(a,n),a!==n&&(f=t[2]>=t[0]?t[3]>=t[1]?Math.asin((t[3]-t[1])*s/a):-Math.asin((t[1]-t[3])*s/a):t[3]>=t[1]?er(180)-Math.asin((t[3]-t[1])*s/a):Math.asin((t[1]-t[3])*s/a)-er(180)))):(y=l=(_=Bt(or(_,e,r,o,s,v),2))[0],p=h=_[1],v=1,"closest-corner"===t&&"circle"===u?g=l<=e||m<=l||h<=r||i<=h?Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(a=l<e+.5*o?l-e:m-l,n=h<r+.5*s?h-r:i-h,Math.sqrt(Math.pow(a,2)+Math.pow(n,2))):"closest-side"===t||"closest-corner"===t?l<=e||m<=l||h<=r||i<=h?g=Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(_=1,a=l<e+.5*o?l-e:m-l,n=h<r+.5*s?h-r:i-h,g=Math.min(a,n),a*=_="closest-corner"===t?Math.sqrt(2):_,n*=_,g*=_):(a=l<=e?e-l+o:m<=l?l-m+o:l<e+.5*o?m-l:l-e,n=h<=r?r-h+s:i<=h?h-i+s:h<r+.5*s?i-h:h-r,g=Math.max(a,n),a*=v="farthest-side"!==t?Math.sqrt(2):v,n*=v,g*=v));var y,p,n,g,a,x,_=[l,h,g,a="circle"===u?n=g:a,n,y,p,f],o=Bt(_,8),m=o[0],e=o[1],s=o[2],i=o[3],r=o[4],t=o[5],v=o[6],l=o[7],h=1,u=1;return i===r&&!l||(x=[1,0,0,1,0,0],l&&(g=Math.sin(l),x=[a=Math.cos(l),g,0,0,-g,a,0,0,0,0,1,0,0,0,0,1]),i!==s&&(x=Ht.multiply(x,[h=i/s,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),r!==s&&(x=Ht.multiply(x,[1,0,0,0,0,u=r/s,0,0,0,0,1,0,0,0,0,1]))),{cx:m,cy:e,tx:t,ty:v,r:s,stop:ar(c,s,d),scx:h,scy:u,matrix:x,d:l}},getConic:function(t,e,r,i,n,a,o,s,l){var e=function(t,e,r,i,n,a,o){var s=n-r,l=a-i,e=Bt(or(e,r,i,s,l,o),2),o=e[0],e=e[1];s=r+.5*s<=o?o-r:n-o;r=i+.5*l<=e?e-i:a-e;return n=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),[o,e,n,t]}(e,r,i,n,a,o,l),e=(r=Bt(e,4))[0],h=r[1],c=r[2];return{cx:e,cy:h,w:a-i,h:o-n,r:(c<<1)*s,deg:r[3],stop:ar(t,1,l)}},renderConic:function(c,t,e,r,i,n,a,o,s,l,h,u,_){s=(s=We.calRadius(i,n,a,o,s,l,h,u))||[[i,n],[i+a,n],[i+a,n+o],[i,n+o],[i,n]],t!==et.CANVAS&&t!==et.WEBGL||(h=(l=Mt.getCacheCanvas(a,o,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,a,o),ee.getConicGradientImage(r.cx-i,r.cy-n,r.w,r.h,r.stop,h.data),l.ctx.putImageData(h,0,0),e.save(),e.beginPath(),rr(e,s),e.clip(),e.closePath(),e.drawImage(l.canvas,i,n),e.restore(),l.ctx.clearRect(0,0,a,o))}},lr=At.isNil;function hr(t,e,r,i){lr(t.flexGrow)&&(t.flexGrow=e||0),lr(t.flexShrink)&&(t.flexShrink=r||0),lr(t.flexBasis)&&(t.flexBasis=i||0)}var cr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(i,t){var c,u,_,f,d,y,e,r,n,p,g,a,o,s,x=this,l=i[t];if("background"===t)Array.isArray(l)?(o=l.length,!lr(i.backgroundColor)||(a=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(l[o-1]))&&(i.backgroundColor=a[0],l=l.slice(0,o-1)),c=[],u=[],_=[],l.forEach(function(t){var e;lr(i.backgroundImage)&&((e=Pt.gradient.exec(t))?(c.push(e[0]),t=t.replace(e[0],"")):(e=Pt.img.exec(l))&&(c.push(e[0]),t=t.replace(e[0],""))),!lr(i.backgroundRepeat)||(e=/(no-?)?repeat(-?[xy])?/i.exec(t))&&u.push(e[0].toLowerCase()),!lr(i.backgroundPosition)||(e=t.match(Pt.position))&&_.push(e.join(" "))}),c.length&&(i.backgroundImage=c),u.length&&(i.backgroundRepeat=u),_.length&&(i.backgroundPosition=_,this.toFull(i,"backgroundPosition"))):(lr(i.backgroundImage)&&((a=Pt.gradient.exec(l))?(i.backgroundImage=a[0],l=l.replace(a[0],"")):(o=Pt.img.exec(l))&&(i.backgroundImage=o[0],l=l.replace(o[0],""))),!lr(i.backgroundRepeat)||(a=/(no-?)?repeat(-?[xy])?/i.exec(l))&&(i.backgroundRepeat=a[0].toLowerCase()),!lr(i.backgroundColor)||(o=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(l))&&(i.backgroundColor=o[0],l=l.replace(o[0],"")),!lr(i.backgroundPosition)||(a=l.match(Pt.position))&&(i.backgroundPosition=a.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===l?hr(i,0,0,"auto"):"auto"===l?hr(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(l)||/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(l)?(o=l.split(/\s+/),hr(i,parseFloat(o[0]),parseFloat(o[1]),o[2])):/^[\d.]+\s+[\d.]+$/.test(l)?(a=l.split(/\s+/),hr(i,parseFloat(a[0]),parseFloat(a[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(l)?(o=l.split(/\s+/),hr(i,parseFloat(o[0]),1,o[1])):/^[\d.]+$/.test(l)?hr(i,parseFloat(l),1,0):/^[\d.]+[pxremvwhina%]+/i.test(l)?hr(i,1,1,l):hr(i,0,1,"auto");else if("flexFlow"===t)(l=l.toString().split(/\s+/)).length&&(lr(i.flexDirection),i.flexDirection=l[0],1<l.length&&(i.flexWrap=l[1]));else if("borderRadius"===t){1===(l=l.toString().split("/")).length&&(l[1]=l[0]);for(var m=0;m<2;m++){var h=l[m].toString().split(/\s+/);0===h.length?l[m]=[0,0,0,0]:1===h.length?l[m]=[h[0],h[0],h[0],h[0]]:2===h.length?l[m]=[h[0],h[1],h[0],h[1]]:3===h.length?l[m]=[h[0],h[1],h[2],h[1]]:l[m]=h.slice(0,4)}this[t].forEach(function(t,e){lr(i[t])&&(i[t]=l[0][e]+" "+l[1][e])})}else"backgroundPosition"===t?(Array.isArray(l)||(l=[l]),f=this[t].map(function(t){return lr(i[t])}),l.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),x[t].forEach(function(t,e){f[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(d=l.toString().split(/\s*,\s*/)).length&&(d[1]=d[0]),this[t].forEach(function(t,e){lr(i[t])&&(i[t]=d[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(y=l.toString().split(/\s*,\s*/)).length?y[2]=y[1]=y[0]:2===y.length&&(y[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){lr(i[t])&&(i[t]=y[e])})):"margin"===t||"padding"===t?(g=i,o=this[a=t],a=g[a],lr(a)||(s=a.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi))&&(1===s.length?s[3]=s[2]=s[1]=s[0]:2===s.length?(s[2]=s[0],s[3]=s[1]):3===s.length&&(s[3]=s[1]),o.forEach(function(t,e){lr(g[t])&&(g[t]=s[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(p=(e=i)[r=t],lr(p)||(lr(e[r+"Width"])&&(n=/\b[\d.]+[pxremvwhina%]*\b/i.exec(p),e[r+"Width"]=n?n[0]:0),lr(e[r+"Style"])&&(n=/\b(solid|dashed|dotted)\b/i.exec(p),e[r+"Style"]=n?n[1]:"solid"),lr(e[r+"Color"])&&((n=/#[0-9a-f]{3,8}/i.exec(p))&&-1<[4,7,9].indexOf(n[0].length)?e[r+"Color"]=n[0]:/\btransparent\b/i.test(p)?e[r+"Color"]="transparent":(n=/rgba?\s*\(.+\)/i.exec(p),e[r+"Color"]=n?n[0]:"transparent")))):"textStroke"===t?((p=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(l))&&(i.textStrokeWidth=p[1]),(e=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(l))&&(i.textStrokeColor=e[0]),/\bfill\b/i.test(l)?i.textStrokeOver="fill":i.textStrokeOver="none"):this[t]&&this[t].forEach(function(t){lr(i[t])&&(i[t]=l)});return i}},i=T.STYLE_KEY,A=[[i.BACKGROUND_COLOR],[i.BORDER_BOTTOM_COLOR],[i.BORDER_LEFT_COLOR],[i.BORDER_RIGHT_COLOR],[i.BORDER_TOP_COLOR],[i.COLOR],[i.TEXT_STROKE_COLOR]],t=[[i.FONT_SIZE],[i.BORDER_BOTTOM_WIDTH],[i.BORDER_LEFT_WIDTH],[i.BORDER_RIGHT_WIDTH],[i.BORDER_TOP_WIDTH],[i.LEFT],[i.TOP],[i.RIGHT],[i.BOTTOM],[i.FLEX_BASIS],[i.WIDTH],[i.HEIGHT],[i.LINE_HEIGHT],[i.MARGIN_BOTTOM],[i.MARGIN_LEFT],[i.MARGIN_TOP],[i.MARGIN_RIGHT],[i.PADDING_TOP],[i.PADDING_RIGHT],[i.PADDING_BOTTOM],[i.PADDING_LEFT],[i.STROKE_WIDTH],[i.STROKE_MITERLIMIT],[i.LETTER_SPACING],[i.PERSPECTIVE],[i.TEXT_STROKE_WIDTH]],e=[[i.BACKGROUND_IMAGE],[i.FILL],[i.STROKE]],ur=[[i.BORDER_TOP_LEFT_RADIUS],[i.BORDER_TOP_RIGHT_RADIUS],[i.BORDER_BOTTOM_RIGHT_RADIUS],[i.BORDER_BOTTOM_LEFT_RADIUS]],_r={},fr=(A.forEach(function(t){_r[t]=!0}),{}),dr=(t.forEach(function(t){fr[t]=!0}),{}),yr=(ur.forEach(function(t){dr[t]=!0}),{}),i=(e.forEach(function(t){yr[t]=!0}),[[i.TRANSLATE_X],[i.TRANSLATE_Y],[i.TRANSLATE_Z],[i.SKEW_X],[i.SKEW_Y],[i.SCALE_X],[i.SCALE_Y],[i.SCALE_Z],[i.ROTATE_X],[i.ROTATE_Y],[i.ROTATE_Z]]),pr={},A=(i.forEach(function(t){pr[t]=!0}),{KEY_COLOR:A,KEY_EXPAND:i,KEY_GRADIENT:e,KEY_LENGTH:t,KEY_RADIUS:ur,COLOR_HASH:_r,EXPAND_HASH:pr,GRADIENT_HASH:yr,LENGTH_HASH:fr,RADIUS_HASH:dr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}}),gr=Nt.DOM,xr=Nt.GEOM,i=T.STYLE_KEY,mr={},vr=[],Er=a({},i.POINTER_EVENTS,!0),br=(a(e={},i.TRANSFORM,!0),a(e,i.TRANSLATE_X,!0),a(e,i.TRANSLATE_Y,!0),a(e,i.SKEW_X,!0),a(e,i.SKEW_Y,!0),a(e,i.SCALE_X,!0),a(e,i.SCALE_Y,!0),a(e,i.ROTATE_Z,!0),a(e,i.COLOR,!0),a(e,i.FONT_STYLE,!0),a(e,i.STROKE_WIDTH,!0),a(e,i.FILL,!0),a(e,i.STROKE_DASHARRAY,!0),a(e,i.STROKE_LINECAP,!0),a(e,i.STROKE_LINEJOIN,!0),a(e,i.STROKE_MITERLIMIT,!0),a(e,i.BACKGROUND_COLOR,!0),a(e,i.BACKGROUND_IMAGE,!0),a(e,i.BACKGROUND_POSITION_X,!0),a(e,i.BACKGROUND_POSITION_Y,!0),a(e,i.BACKGROUND_REPEAT,!0),a(e,i.BACKGROUND_SIZE,!0),a(e,i.STROKE,!0),a(e,i.BORDER_BOTTOM_COLOR,!0),a(e,i.BORDER_LEFT_COLOR,!0),a(e,i.BORDER_RIGHT_COLOR,!0),a(e,i.BORDER_TOP_COLOR,!0),a(e,i.BORDER_TOP_LEFT_RADIUS,!0),a(e,i.BORDER_TOP_RIGHT_RADIUS,!0),a(e,i.BORDER_BOTTOM_RIGHT_RADIUS,!0),a(e,i.BORDER_BOTTOM_LEFT_RADIUS,!0),a(e,i.VISIBILITY,!0),a(e,i.OPACITY,!0),a(e,i.Z_INDEX,!0),a(e,i.FILTER,!0),a(e,i.BOX_SHADOW,!0),a(e,i.OVERFLOW,!0),a(e,i.BACKGROUND_CLIP,!0),a(e,i.TEXT_STROKE_WIDTH,!0),a(e,i.TEXT_STROKE_COLOR,!0),a(e,i.TEXT_STROKE_OVER,!0),e),Tr={GEOM:mr,GEOM_KEY_SET:vr,IGNORE:Er,REPAINT:br,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Tr.addGeom(e,t,r)}):t&&(mr.hasOwnProperty(t)||vr.push(t),(mr[t]=mr[t]||{})[e]=r||!0)},isIgnore:function(t){return Er.hasOwnProperty(t)},isGeom:function(t,e){return t&&e&&mr.hasOwnProperty(e)&&mr[e].hasOwnProperty(t)},isRepaint:function(t,e){return br.hasOwnProperty(t)||Tr.isGeom(e,t)},isValid:function(t,e){return!!e&&(!!gr.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!xr.hasOwnProperty(e))||(mr.hasOwnProperty(e)?mr[e].hasOwnProperty(t):"translatePath"===e)))}};function Ar(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function Mr(t){return 3*Math.floor(.5*t)}Tr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Tr.addGeom("$circle",["r"]),Tr.addGeom("$ellipse",["rx","ry"]),Tr.addGeom("$rect",["rx","ry"]),Tr.addGeom("$sector",["begin","end","edge","closure"]),Tr.addGeom("$polyline",["points","controls","start","end"]),Tr.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var Rr={kernelSize:Ar,outerSize:function(t){return Mr(Ar(t))},outerSizeByD:Mr,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),n=0,a=i;0<=a;a--){var o=Math.pow(Math.E,-Math.pow(a,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(o),n+=o}for(var s=1;s<=i;s++){var l=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(l),n+=l}if(1!==n)for(var h=0;h<e;h++)r[h]/=n;return r}},Sr=T.STYLE_KEY,Or=T.style2Upper,t=T.STYLE_KEY,Cr=t.POSITION,Ir=t.WIDTH,wr=t.HEIGHT,kr=t.TRANSLATE_X,Dr=t.TRANSLATE_Y,Lr=t.TRANSLATE_Z,Fr=t.SCALE_X,Nr=t.SCALE_Y,Pr=t.SCALE_Z,ur=t.SKEW_X,i=t.SKEW_Y,e=t.ROTATE_X,Br=t.ROTATE_Y,Hr=t.ROTATE_Z,Gr=t.ROTATE_3D,Yr=t.PERSPECTIVE,Wr=t.PERSPECTIVE_ORIGIN,Ur=t.TRANSFORM,Xr=t.TRANSFORM_ORIGIN,zr=t.BACKGROUND_IMAGE,Vr=t.BACKGROUND_COLOR,Kr=t.BACKGROUND_POSITION_X,jr=t.BACKGROUND_POSITION_Y,$r=t.BACKGROUND_SIZE,qr=t.OPACITY,Zr=t.Z_INDEX,Jr=t.COLOR,Qr=t.FONT_SIZE,ti=t.FONT_FAMILY,ei=t.FONT_WEIGHT,ri=t.FONT_STYLE,ii=t.LINE_HEIGHT,ni=t.TEXT_ALIGN,ai=t.FILTER,oi=t.VISIBILITY,si=t.BOX_SHADOW,li=t.POINTER_EVENTS,hi=t.FILL,ci=t.STROKE,ui=t.STROKE_WIDTH,_i=t.STROKE_DASHARRAY,fi=t.DISPLAY,di=t.FLEX_DIRECTION,yi=t.FLEX_GROW,pi=t.FLEX_SHRINK,gi=t.FLEX_BASIS,n=t.JUSTIFY_CONTENT,xi=t.ALIGN_SELF,mi=t.ALIGN_ITEMS,vi=t.MATRIX,Ei=t.LETTER_SPACING,bi=t.BACKGROUND_CLIP,Ti=t.WHITE_SPACE,Ai=t.TEXT_OVERFLOW,Mi=t.LINE_CLAMP,Ri=t.ORDER,Si=t.FLEX_WRAP,Oi=t.TRANSLATE_PATH,Ci=t.TEXT_STROKE_COLOR,Ii=t.TEXT_STROKE_WIDTH,wi=t.TEXT_STROKE_OVER,ki=t.WRITING_MODE,Di=r.AUTO,Li=r.PX,Fi=r.PERCENT,Ni=r.NUMBER,Pi=r.INHERIT,Bi=r.DEG,Hi=r.RGBA,Gi=r.STRING,Yi=r.REM,Wi=r.VW,Ui=r.VH,Xi=r.VMAX,zi=r.VMIN,Vi=r.GRADIENT,Ki=r.calUnit,ji=At.isNil,$i=At.rgba2int,qi=At.equalArr,Zi=At.replaceRgba2Hex,Ji=Tr.isGeom,Qi=Tr.GEOM,tn=Tr.GEOM_KEY_SET,en=Nt.VALID_STRING_VALUE,rn=A.COLOR_HASH,nn=A.LENGTH_HASH,an=A.RADIUS_HASH,on=A.GRADIENT_HASH,sn=A.EXPAND_HASH,ln=A.GRADIENT_TYPE,hn={translateX:kr,translateY:Dr,translateZ:Lr,scaleX:Fr,scaleY:Nr,scaleZ:Pr,skewX:ur,skewY:i,rotateX:e,rotateY:Br,rotateZ:Hr,rotate:Hr};function cn(t,e){t===Fr||t===Nr||t===Pr?e[1]=Ni:t===kr||t===Dr||t===Lr?e[1]===Ni&&(e[1]=Li):t===Yr?-1<[Ni,Fi,Bi].indexOf(e[1])&&(e[1]=Li):e[1]===Ni&&(e[1]=Bi)}function un(t){return-1<(t=(t=ji(t)?"":t).toString()).indexOf("-")?t.toString().toLowerCase().replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()}):t}function _n(t){var e=t[Qr],r=dn(t[ti]),i=fn(t,r);return.5*(t[ii]-i)+e*(Ot.info[r]||Ot.info[Mt.defaultFontFamily]||Ot.info.arial).blr}function fn(t,e){return e=e||dn(t[ti]),t[Qr]*(Ot.info[e]||Ot.info[Mt.defaultFontFamily]||Ot.info.arial).lhr}function dn(t){for(var e=t.split(/\s*,\s*/),r=0,i=e.length;r<i;r++){var n=e[r].replace(/^['"]/,"").replace(/['"]$/,"");if(Ot.hasLoaded(n)||Mt.checkSupportFontFamily(n))return n}return Mt.defaultFontFamily}function yn(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Di){if(r!==Ir)break;e=e.domParent}else{if(i[1]===Li)return t*i[0];if(i[1]===Fi)t*=.01*i[0],e=e.domParent;else{if(i[1]===Yi)return t*i[0]*e.root.computedStyle[Qr];if(i[1]===Wi)return t*i[0]*e.root.width*.01;if(i[1]===Ui)return t*i[0]*e.root.height*.01;if(i[1]===Xi)return t*i[0]*Math.max(e.root.width,e.root.height)*.01;if(i[1]===zi)return t*i[0]*Math.min(e.root.width,e.root.height)*.01}}}return t}a(t={},Cr,!0),a(t,fi,!0),a(t,Sr.BACKGROUND_REPEAT,!0),a(t,di,!0),a(t,yi,!0),a(t,pi,!0),a(t,Si,!0),a(t,n,!0),a(t,mi,!0),a(t,xi,!0),a(t,Sr.OVERFLOW,!0),a(t,Sr.MIX_BLEND_MODE,!0),a(t,Sr.STROKE_LINECAP,!0),a(t,Sr.STROKE_LINEJOIN,!0),a(t,Sr.STROKE_MITERLIMIT,!0),a(t,Sr.FILL_RULE,!0),a(t,qr,!0),a(t,Zr,!0),a(t,bi,!0),a(t,Ai,!0),a(t,Mi,!0);var pn=t,gn=(a(ur={},Vr,!0),a(ur,Sr.BORDER_TOP_COLOR,!0),a(ur,Sr.BORDER_RIGHT_COLOR,!0),a(ur,Sr.BORDER_BOTTOM_COLOR,!0),a(ur,Sr.BORDER_LEFT_COLOR,!0),ur),xn=(a(i={},Sr.BORDER_TOP_LEFT_RADIUS,!0),a(i,Sr.BORDER_TOP_RIGHT_RADIUS,!0),a(i,Sr.BORDER_BOTTOM_RIGHT_RADIUS,!0),a(i,Sr.BORDER_BOTTOM_LEFT_RADIUS,!0),a(i,Xr,!0),a(i,Wr,!0),i);var mn={normalize:function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!At.isObject(o))return{};var l,s,e,r,h,i,c={},u=(o=At.extend({},o)).border;return u&&cr.toFull(o,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){cr.toFull(o,t)}),(u=o.borderWidth)&&cr.toFull(o,"borderWidth"),(u=o.borderColor)&&cr.toFull(o,"borderColor"),(u=o.borderStyle)&&cr.toFull(o,"borderStyle"),(u=o.borderRadius)&&cr.toFull(o,"borderRadius"),(u=o.background)&&cr.toFull(o,"background"),u=o.backgroundPosition,ji(u)||cr.toFull(o,"backgroundPosition"),(u=o.flex)&&cr.toFull(o,"flex"),(u=o.flexFlow)&&cr.toFull(o,"flexFlow"),u=o.margin,ji(u)||cr.toFull(o,"margin"),u=o.padding,ji(u)||cr.toFull(o,"padding"),(u=o.textStroke)&&cr.toFull(o,"textStroke"),(u=o.rotate3d)&&cr.toFull(o,"rotate3d"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){u=o[t],ji(u)||cr.toFull(o,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){void 0!==o[t]&&o.transform&&Mt.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;ji(o[e])&&(o[e]=t)}),void 0!==(u=o.backgroundImage)&&(u?Array.isArray(u)?c[zr]=u.map(function(t){return t?Pt.gradient.test(t)?[sr.parseGradient(t),Vi]:Pt.img.test(t)?[Pt.img.exec(t)[2],Gi]:null:null}):Pt.gradient.test(u)?c[zr]=[[sr.parseGradient(u),Vi]]:Pt.img.test(u)?c[zr]=[[Pt.img.exec(u)[2],Gi]]:c[zr]=[null]:c[zr]=[null]),void 0!==(u=o.backgroundColor)&&(u=u||"transparent",(t=/^#[0-9a-f]{3,8}/i.exec(u))&&-1<[4,7,9].indexOf(t[0].length)?c[Vr]=[$i(t[0]),Hi]:(t=/rgba?\s*\(.+\)/i.exec(u),c[Vr]=[$i(t?t[0]:[0,0,0,0]),Hi])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){void 0!==(u=o[t])&&(u=u||0,t=e?jr:Kr,Array.isArray(u)||(u=[u]),c[t]=u.map(function(t){var e;return/^[-+]?[\d.]/.test(t)?(e=Ki(t),-1<[Ni,Bi].indexOf(e[1])&&(e[1]=Li),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Fi]}))}),void 0!==(u=o.backgroundSize)&&(Array.isArray(u)||(u=[u]),c[$r]=u.map(function(t){if(!t)return[[0,Di],[0,Di]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0].toLowerCase()||"cover"===e[0].toLowerCase()?e[1]=e[0].toLowerCase():e[1]="auto");for(var r=[],i=0;i<2;i++){var n,a=e[i].toLowerCase();/^[-+]?[\d.]/.test(a)?(n=Ki(a),-1<[Ni,Bi].indexOf(n[1])&&(n[1]=Li),r.push(n)):"contain"===a||"cover"===a?r.push([a,Gi]):r.push([0,Di])}return r}return[[0,Di],[0,Di]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=o[t="border"+t+"Color"];void 0!==e&&(c[Sr[Or(t)]]=[$i(e||"transparent"),Hi])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){if(void 0!==(e=o[t="border"+t+"Radius"])){var e,r=(e=e||0).toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n=r[i];/^[-+]?[\d.]/.test(n)?(n=Ki(n),-1<[Ni,Bi].indexOf(n[1])&&(n[1]=Li),n[0]<0&&(n[0]=0),r[i]=n):r[i]=[0,Li]}c[Sr[Or(t)]]=r}}),null===(u=o.transform)?c[Ur]=null:void 0!==u&&(l=c[Ur]=[],(t=(u||"").toString().match(/\w+\(.+?\)/g))&&t.forEach(function(t){var e,r,i,n,a,o=t.indexOf("("),s=t.slice(0,o),o=t.slice(o+1,t.length-1);"matrix"===s?6===(t=6<(t=(t=o.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,6):t).length&&l.push([vi,[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]]):"matrix3d"===s?16===(t=16<(t=(t=o.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,16):t).length&&l.push([vi,t]):"perspective"===s?((t=Ki(o))[0]<0&&(t[0]=0),cn(Yr,t),l.push([Yr,t])):"rotate3d"===s?4===(t=o.toString().split(/\s*,\s*/)).length&&(a=Ki(t[3]),cn(Gr,a),t[0]=parseFloat(t[0].replace("(","")),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=a,l.push([Gr,t])):hn.hasOwnProperty(s)?(cn(a=hn[s],t=Ki(o)),l.push([a,t])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(s)?{translate3d:!0,scale3d:!0}.hasOwnProperty(s)&&(1===(a=o.toString().split(/\s*,\s*/)).length?(a[1]="scale3d"===s?[1]:[0],a[2]="scale3d"===s?[1]:[0]):2===a.length&&(a[2]="scale3d"===s?[1]:[0]),3===a.length&&(t=Sr[Or(s+"X")],e=Sr[Or(s+"Y")],r=Sr[Or(s+"Z")],i=Ki(a[0]),n=Ki(a[1]),a=Ki(a[2]),cn(t,i),cn(e,n),cn(r,a),l.push([t,i]),l.push([e,n]),l.push([r,a]))):(1===(t=o.toString().split(/\s*,\s*/)).length&&(t[1]="scale"===s?t[0]:[0]),2===t.length&&(i=Sr[Or(s+"X")],e=Sr[Or(s+"Y")],n=Ki(t[0]),r=Ki(t[1]),cn(i,n),cn(e,r),l.push([i,n]),l.push([e,r])))})),void 0!==(u=o.perspective)&&((t=Ki(u||0))[0]<0&&(t[0]=0),cn(Yr,t),c[Yr]=t),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(void 0!==(u=o[t])){null===u&&(u="");var e=c[Sr[Or(t)]]=[],r=u.toString().match(Pt.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n,a=r[i];/^[-+]?[\d.]/.test(a)?(n=Ki(a),-1<[Ni,Bi].indexOf(n[1])&&(n[1]=Li),e.push(n)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[a],Fi]),ji(e[i][0])&&(e[i][0]=50))}}else e.push([50,Fi]),e.push([50,Fi])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=o[t];void 0!==e&&(null===e&&(e=0===t.indexOf("scale")?1:0),cn(t=hn[t],e=Ki(e)),c[t]=e)}),void 0!==(u=o.rotate3d)&&(4===(t=(u||"").toString().split(/\s*,\s*/)).length&&(e=Ki(t[3]),cn(Gr,e),t[0]=parseFloat(t[0].replace("(","")),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=e),c[Gr]=t),void 0!==(u=o.opacity)&&(null===u&&(u=1),u=parseFloat(u),isNaN(u)?c[qr]=1:(u=Math.max(u,0),u=Math.min(u,1),c[qr]=u)),void 0!==(u=o.zIndex)&&(c[Zr]=parseInt(u)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=o[t];void 0!==r&&("auto"===r?r=[0,Di]:(r=Ki(r||0),-1<[Ni,Bi].indexOf(r[1])&&(r[1]=Li)),e=Sr[Or(t)],c[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),void 0!==(u=o.flexBasis)&&(/content/i.test(u)?c[gi]=[u,Gi]:/^[\d.]/.test(u)?((e=c[gi]=Ki(u))[0]=Math.max(e[0],0),-1<[Ni,Bi].indexOf(e[1])&&(e[1]=Li)):c[gi]=[0,Di]),void 0!==(u=o.order)&&(c[Ri]=parseInt(u)||0),void 0!==(u=o.color)&&(/inherit/i.test(u)?c[Jr]=[[],Pi]:Pt.gradient.test(u)?c[Jr]=[sr.parseGradient(u),Vi]:c[Jr]=[$i(u),Hi]),void 0!==(u=o.textStrokeColor)&&(/inherit/i.test(u)?c[Ci]=[[],Pi]:Pt.gradient.test(u)?c[Ci]=[sr.parseGradient(u),Vi]:c[Ci]=[$i(u),Hi]),void 0!==(u=o.fontSize)&&(/inherit/i.test(u)||(r=Ki(u))<0?c[Qr]=[0,Pi]:(-1<[Ni,Bi].indexOf(r[1])&&(r[1]=Li),c[Qr]=r)),void 0!==(u=o.textStrokeWidth)&&(/inherit/i.test(u)||(i=Ki(u))<0?c[Ii]=[0,Pi]:(-1<[Ni,Bi,Fi].indexOf(i[1])&&(i[1]=Li),c[Ii]=i)),void 0!==(u=o.textStrokeOver)&&(null===u||/inherit/i.test(u)?c[wi]=[0,Pi]:(t=Nt.INHERIT.textStrokeOver,/fill/i.test(u)&&(t="fill"),c[wi]=[t,Gi])),void 0!==(u=o.fontWeight)&&(/bold/i.test(u)?c[ei]=[700,Ni]:/normal/i.test(u)?c[ei]=[400,Ni]:/lighter/i.test(u)?c[ei]=[200,Ni]:/inherit/i.test(u)?c[ei]=[0,Pi]:c[ei]=[Math.max(0,parseInt(u))||400,Ni]),void 0!==(u=o.fontStyle)&&(null===u||/inherit/i.test(u)?c[ri]=[0,Pi]:(e=Nt.INHERIT.fontStyle,/italic/i.test(u)?e="italic":/oblique/i.test(u)&&(e="oblique"),c[ri]=[e,Gi])),void 0!==(u=o.fontFamily)&&(null===u||/inherit/i.test(u)?c[ti]=[0,Pi]:c[ti]=[u.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),Gi]),void 0!==(u=o.writingMode)&&(null===u||/inherit/i.test(u)?c[ki]=[0,Pi]:(r=Nt.INHERIT.writingMode,/vertical-?rl/i.test(u)?r="verticalRl":/vertical-?lr/i.test(u)&&(r="verticalLr"),c[ki]=[r,Gi])),void 0!==(u=o.textAlign)&&(null===u||/inherit/i.test(u)?c[ni]=[0,Pi]:(i="left",/center/i.test(u)?i="center":/right/i.test(u)&&(i="right"),c[ni]=[i,Gi])),void 0!==(u=o.lineHeight)&&(/inherit/i.test(u)?c[ii]=[0,Pi]:/normal/i.test(u)?c[ii]=[0,Di]:/^[\d.]+/i.test(u)?(t=Ki(u),-1<[Bi].indexOf(t[1])&&(t[1]=Ni),c[ii]=t):(e=Math.max(0,parseFloat(u))||"normal",c[ii]="normal"===e?[null,Di]:[e,Ni])),void 0!==(u=o.letterSpacing)&&(null===u||/inherit/i.test(u)?c[Ei]=[0,Pi]:/normal/i.test(u)?c[Ei]=[0,Li]:/^[-+]?[\d.]/.test(u)?(r=Ki(u),-1<[Ni,Bi].indexOf(r[1])&&(r[1]=Li),c[Ei]=r):c[Ei]=[parseFloat(u)||0,Li]),void 0!==(u=o.whiteSpace)&&(null===u||/inherit/i.test(u)?c[Ti]=[0,Pi]:c[Ti]=[u,Gi]),void 0!==(u=o.lineClamp)&&(u=parseInt(u)||0,c[Mi]=Math.max(0,u)),void 0!==(u=o.fill)&&(u?Array.isArray(u)?u.length?c[hi]=u.map(function(t){return t?Pt.gradient.test(t)?[sr.parseGradient(t),Vi]:[$i(t),Hi]:["none",Gi]}):c[hi]=[["none",Gi]]:Pt.gradient.test(u)?c[hi]=[[sr.parseGradient(u),Vi]]:c[hi]=[[$i(u),Hi]]:c[hi]=[["none",Gi]]),void 0!==(u=o.stroke)&&(u?Array.isArray(u)?u.length?c[ci]=u.map(function(t){return t?Pt.gradient.test(t)?[sr.parseGradient(t),Vi]:[$i(t),Hi]:["none",Gi]}):c[ci]=[["none",Gi]]:Pt.gradient.test(u)?c[ci]=[[sr.parseGradient(u),Vi]]:c[ci]=[[$i(u),Hi]]:c[ci]=[["none",Gi]]),void 0!==(u=o.strokeWidth)&&(Array.isArray(u)||(u=[u]),c[ui]=u.map(function(t){t=Ki(t);return-1<[Ni,Bi].indexOf(t[1])&&(t[1]=Li),t[0]=Math.max(t[0],0),t})),void 0!==(u=o.strokeDasharray)&&(Array.isArray(u)?c[_i]=u.map(function(t){t=(t||"").toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(i=(u||"").toString().match(/[\d.]+/g))?((i=i.map(function(t){return parseFloat(t)})).length%2==1&&i.push(i[i.length-1]),c[_i]=[i]):c[_i]=[[]]),void 0!==(u=o.filter)&&(s=null,(t=(Zi(u)||"").match(/[\w-]+\s*\(.+?\)/gi))&&t.forEach(function(t){var e=/([\w-]+)\s*\((\s*.+\s*)\)/i.exec(t);if(e){var r=e[1].toLowerCase(),e=e[2];if("drop-shadow"===r||"dropshadow"===r){var i=/([-+]?[\d.]+[pxremvwhina%]*)[\s,]+([-+]?[\d.]+[pxremvwhina%]*)[\s,]+(?:([-+]?[\d.]+[pxremvwhina%]*)[\s,])?([-+]?[\d.]+[pxremvwhina%]*\s*)?/gi.exec(t);if(i){s=s||[];for(var n=[],a=1;a<=4;a++){var o=i[a];o?(o=Ki(o),-1<[Ni,Bi].indexOf(o[1])&&(o[1]=Li),2<a&&o[0]<0&&(o=0),n.push(o)):n.push([0,1])}t=/#[a-f\d]{3,8}/i.exec(t);t?n.push($i(t[0])):n.push([0,0,0,1]),s.push(["dropShadow",n])}}else{t=/([-+]?[\d.]+\s*[pxremvwhdg%]*)/i.exec(e);t&&(s=s||[],e=Ki(t[0]),"blur"===r?-1<[Bi,Fi].indexOf(e[1])||(e[1]===Ni&&(e[1]=Li),e[0]=Math.max(e[0],0),s.push([r,e])):"hue-rotate"===r||"huerotate"===r?-1!==[Ni,Bi].indexOf(e[1])&&(e[1]=Bi,s.push(["hueRotate",e])):"saturate"!==r&&"brightness"!==r&&"grayscale"!==r&&"contrast"!==r&&"sepia"!==r&&"invert"!==r||-1!==[Ni,Fi].indexOf(e[1])&&(e[0]=Math.max(e[0],0),e[1]=Fi,s.push([r,e])))}}}),c[ai]=s),void 0!==(u=o.visibility)&&(null===u||/inherit/i.test(u)?c[oi]=[0,Pi]:(e=Nt.INHERIT.visibility,/hidden/i.test(u)&&(e="hidden"),c[oi]=[e,Gi])),void 0!==(u=o.pointerEvents)&&(null===u||/inherit/i.test(u)?c[li]=[0,Pi]:(r=Nt.INHERIT.pointerEvents,/none/i.test(u)&&(r="none"),c[li]=[r,Gi])),void 0!==(u=o.boxShadow)&&(h=null,(i=(Zi(u)||"").split(","))&&i.forEach(function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?/i.exec(t);if(e){h=h||[];for(var r=[],i=1;i<=4;i++){var n=e[i];n?(n=Ki(n),-1<[Ni,Bi].indexOf(n[1])&&(n[1]=Li),2<i&&n[0]<0&&(n=0),r.push(n)):r.push([0,1])}var a=/#[a-f\d]{3,8}/i.exec(t);a?r.push($i(a[0])):r.push([0,0,0,1]),r.push(/inset/i.test(t)?"inset":"outset"),h.push(r)}}),c[si]=h),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){var e;o.hasOwnProperty(t)&&(c[Sr[Or(t)]]=(e=un(e=o[t=t]),t=en[t],-1<(e=t.indexOf(e))?t[e]:t[0]))}),["flexGrow","flexShrink"].forEach(function(t){o.hasOwnProperty(t)&&(c[Sr[Or(t)]]=Math.max(parseFloat(o[t])||0,0))}),void 0!==(u=o.zIndex)&&(c[Zr]=parseFloat(u)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var r;o.hasOwnProperty(t)&&(r=o[t],Array.isArray(r)||(r=[r]),"backgroundRepeat"===t&&r.forEach(function(t,e){t&&(r[e]=un(t))}),c[Sr[Or(t)]]=r)}),tn.forEach(function(t){o.hasOwnProperty(t)&&(c[t]=o[t])}),c},setFontStyle:function(t){var e=t[Qr]||0,r=t[ti]||Mt.defaultFontFamily||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t[ri]||"normal")+" "+(t[ei]||"400")+" "+e+"px/"+e+"px "+r},getBaseline:_n,getVerticalBaseline:function(t){return t[ii]-_n(t)},calRelative:function(t,e,r,i,n){return r[1]===Di?r=0:-1<[Li,Ni].indexOf(r[1])?r=r[0]:r[1]===Fi?r=yn(r[0],i,n?Ir:wr):r[1]===Yi?r=r[0]*i.root.computedStyle[Qr]:r[1]===Wi?r=r[0]*i.root.width*.01:r[1]===Ui?r=r[0]*i.root.height*.01:r[1]===Xi?r=r[0]*Math.max(i.root.width,i.root.height)*.01:r[1]===zi&&(r=r[0]*Math.min(i.root.width,i.root.height)*.01),r},equalStyle:function(t,e,r,c){if(!e||!r)return e===r;if(t===Ur){if(e.length!==r.length)return!1;for(var i=0,u=e.length;i<u;i++){var _=e[i],f=r[i];if(_[0]!==f[0])return!1;if(!qi(_[1],f[1]))return!1}return!0}if(t===ai){if(e.length!==r.length)return!1;for(var n=0,d=e.length;n<d;n++)if(!qi(e[n],r[n]))return!1}if(t===$r){if(e.length!==r.length)return!1;for(var a=0,y=e.length;a<y;a++){var o=e[a],s=r[a];if(o[0][0]!==s[0][0]||o[0][1]!==s[0][1]||o[1][0]!==s[1][0]||o[1][1]!==s[1][1])return!1}return!0}if(t===Xr||an.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Kr||t===jr||nn.hasOwnProperty(t)||sn.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===si)return qi(e,r);if(t===Jr||t===Ci){if(e[1]!==r[1])return!1;if(e[1]===Hi)return qi(e[0],r[0])}if(rn.hasOwnProperty(t))return e[1]===r[1]&&qi(e[0],r[0]);if(on.hasOwnProperty(t)&&e.k===r.k&&ln.hasOwnProperty(e.k)){var p=e.v,g=r.v;if(e.d!==r.d||p.length!==g.length)return!1;for(var l=0,x=p.length;l<x;l++){var h=p[l],m=g[l];if(h.length!==m.length)return!1;for(var v=0;v<4;v++)if(h[0][v]!==m[0][v])return!1;if(1<h.length&&(h[1][0]!==m[1][0]||h[1][1]!==m[1][1]))return!1}return!0}return Ji(c.tagName,t)&&(c.isMulti||Array.isArray(e)&&Array.isArray(r))?qi(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[Cr])||"absolute"===t},cloneStyle:function(c,u){for(var t={},_=0,f=(u=u||Object.keys(c).map(function(t){return t=Qi.hasOwnProperty(t)?t:parseInt(t)})).length;_<f;_++){var e=u[_],r=c[e];if(e===zr)t[e]=r.map(function(t){return t[1]===Vi?[At.clone(t[0]),t[1]]:t});else if(e===hi||e===ci)t[e]=r.map(function(t){return t[1]===Vi?[At.clone(t[0]),t[1]]:t[1]===Hi?[t[0].slice(0),t[1]]:t});else if(e===Ur){if(r){for(var i=r.slice(0),n=0,d=i.length;n<d;n++)i[n]=i[n].slice(0),i[n][1]=i[n][1].slice(0);t[e]=i}}else if(e===ai){if(r){for(var a=r.slice(0),o=0,y=a.length;o<y;o++){a[o]=a[o].slice(0);var p=a[o][0];a[o][1]=a[o][1].slice(0),"dropShadow"===p&&function(){var r=a[o][1];r.forEach(function(t,e){r[e]=r[e].slice(0)})}()}t[e]=a}}else if(e===si)r&&(r=r.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),t[e]=r);else if(e===Oi)r&&(t[e]=r.map(function(t){return t.slice(0)}));else if(e===Jr||e===Ci)r&&(r[1]===Vi?t[e]=[At.clone(r[0]),r[1]]:r[1]===Hi?t[e]=[r[0].slice(0),r[1]]:t[e]=r.slice(0));else if(pn.hasOwnProperty(e))t[e]=r;else if(Qi.hasOwnProperty(e))t[e]=At.clone(r);else if(r){var s=t[e]=r.slice(0);if(e===Kr||e===jr)for(var l=0,g=s.length;l<g;l++)s[l]=s[l].slice(0);else if(e===$r)for(var h=0,x=s.length;h<x;h++)s[h]=s[h].slice(0),s[h][0]=s[h][0].slice(0),s[h][1]=s[h][1].slice(0);else if(gn.hasOwnProperty(e))s[0]=s[0].slice(0);else if(xn.hasOwnProperty(e))s[0]=s[0].slice(0),s[1]=s[1].slice(0);else if(e===Ur)for(var m=0,v=s.length;m<v;m++)s[m]=s[m].slice(0);else e===Gr&&(s[3]=s[3].slice(0))}}return t},calNormalLineHeight:fn,calFontFamily:dn,spreadBoxShadow:function(t,e){var o,s,l,h,r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3];return Array.isArray(e)&&(h=l=s=o=0,e.forEach(function(t){var t=Bt(t,6),e=t[0],r=t[1],i=t[2],n=t[3],a=t[4];"inset"!==t[5]&&0<a[3]&&(t=Rr.outerSize(i),t+=n,o=Math.min(o,e-t),s=Math.min(s,e-t),l=Math.max(l,e+t),h=Math.max(h,r+t))}),r+=o,i+=s,n+=l,t+=h),[r,i,n,t]},spreadFilter:function(t,e){var i=(t=Bt(t,4))[0],n=t[1],a=t[2],o=t[3];return Array.isArray(e)&&e.forEach(function(t){var e,t=Bt(t,2),r=t[0],t=t[1];"blur"===r&&0<t?(e=Rr.kernelSize(t),(e=Rr.outerSizeByD(e))&&(i-=e,n-=e,a+=e,o+=e)):"dropShadow"===r&&(e=Rr.kernelSize(t[2]),r=Rr.outerSizeByD(e),(t[0]||t[1]||r)&&((t[0]<=0||0<t[0]&&t[0]<r)&&(i+=t[0]-r),(t[1]<=0||0<t[1]&&t[1]<r)&&(n+=t[1]-r),(t[0]<0&&-t[0]<r||0<=t[0])&&(a+=t[0]+r),(t[1]<0&&-t[1]<r||0<=t[1])&&(o+=t[1]+r)))}),[i,n,a,o]}};function vn(t,e,r,i){r-=t,t=i-e,i=Math.atan(Math.abs(t)/Math.abs(r));return r<0&&0<=t?Math.PI-i:r<0&&t<0?i-Math.PI:0<=r&&0<=t?i:-i}function En(t){var e=Math.sin(t),t=Math.cos(t),r=Ht.identity();return r[0]=r[5]=t,r[1]=e,r[4]=-e,r}function bn(t,e){var t=Bt(t,6),r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],t=t[5],e=Bt(e,6),s=e[0],l=e[1],h=e[2],c=e[3],u=e[4],n=(n-r)*(t-i)-(o-r)*(a-i),t=(h-s)*(e[5]-l)-(u-s)*(c-l);return 0<n&&t<0||n<0&&0<t}var e={exchangeOrder:function(t,e){i=(t=Bt(t=t,6))[0],n=t[1],a=t[2],o=t[3],s=t[4],t=t[5],l=[0,1,2],a<i&&a<s?(i=(r=[a,o,i,n])[0],n=r[1],a=r[2],o=r[3],l[0]=1,l[1]=0):s<a&&s<i&&(i=(r=[s,t,i,n])[0],n=r[1],s=r[2],t=r[3],l[0]=2,l[2]=0),i===a?o<n&&(i=(r=[a,o,i,n])[0],n=r[1],a=r[2],o=r[3],r=l[0],l[0]=l[1],l[1]=r):i===s&&t<n&&(i=(r=[s,t,i,n])[0],n=r[1],s=r[2],t=r[3],r=l[0],l[0]=l[2],l[2]=r),(a-i)*(t-n)-(s-i)*(o-n)<0&&(a=(r=[s,t,a,o])[0],o=r[1],s=r[2],t=r[3],r=l[1],l[1]=l[2],l[2]=r);var r=[i,n,a,o,s,t,l],i=Bt(r,7),n=i[0],a=i[1],o=i[2],s=i[3],t=i[4],l=i[5],e=Bt(function(t,e){for(var r=[],i=0,n=e.length;i<n;i++){var a=e[i];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,i[6]),6);return[[n,a,o,s,t,l],[e[0],e[1],e[2],e[3],e[4],e[5]]]},isOverflow:bn,transform:function(c,t){var e,r=(n=Bt(c,6))[0],u=n[1],i=n[2],_=n[3],f=n[4],n=n[5],d=(a=Bt(t,6))[0],y=a[1],p=a[2],g=a[3],x=a[4],a=a[5],c=bn(c,t);(t=Ht.identity())[12]=-r,t[13]=-u;0!==(s=vn(r,u,i,_))&&(e=En(-s),t=Ht.multiply(e,t));var m=te.pointsDistance(r,u,i,_),o=te.pointsDistance(d,y,p,g),v=((h=Ht.identity())[12]=-d,h[13]=-y,s=vn(d,y,p,g)),s=(0!==s&&(e=En(-s),h=Ht.multiply(e,h)),Math.abs(Ht.calPoint([f,n],t)[1])),l=Math.abs(Ht.calPoint([x,a],h)[1]),h=(m===o&&s===l||(e=Ht.identity(),m!==o&&(e[0]=o/m),s!==l&&(e[5]=l/s),t=Ht.multiply(e,t)),t),m=(o=Bt(Ht.calPoint([r,u],h),2))[0],l=o[1],r=(s=Bt(Ht.calPoint([i,_],h),2))[0],u=s[1],i=(o=Bt(Ht.calPoint([f,n],h),2))[0],_=o[1],s=te.pointsDistance(m,l,r,u),f=te.pointsDistance(m,l,i,_),n=te.pointsDistance(i,_,r,u),h=te.pointsDistance(d,y,p,g),o=te.pointsDistance(d,y,x,a),m=te.pointsDistance(x,a,p,g),l=te.angleBySide(n,s,f),i=te.angleBySide(m,h,o);return l!==i&&((e=Ht.identity())[4]=Math.tan(l-.5*Math.PI)+Math.tan(.5*Math.PI-i),t=Ht.multiply(e,t)),c&&(t[1]=-t[1],t[5]=-t[5],t[13]=-t[13]),(e=0!==v?En(v):Ht.identity())[12]=d,e[13]=y,Ht.multiply(e,t)}},Tn=1e-6;function An(t){var e,r,i=[],n=t[3],a=t[2]/n,o=t[1]/n,s=(3*o-a*a)/3,o=(2*a*a*a-9*o*a+27*(t[0]/n))/27,t=a/3,n=o*o/4+s*s*s/27,a=o/2;return 0<(n=Math.abs(n)<=Tn?0:n)?(e=0<=(r=-a+(o=Math.sqrt(n)))?Math.pow(r,1/3):-Math.pow(-r,1/3),0<=(r=-a-o)?e+=Math.pow(r,1/3):e-=Math.pow(-r,1/3),i.push(e-t)):n<0?(o=Math.sqrt(-s/3),r=Math.atan2(Math.sqrt(-n),-a)/3,e=Math.cos(r),s=Math.sin(r),n=Math.sqrt(3),i.push(2*o*e-t),i.push(-o*(e+n*s)-t),i.push(-o*(e-n*s)-t)):(r=0<=a?-Math.pow(a,1/3):Math.pow(-a,1/3),i.push(2*r-t),i.push(-r-t)),i}var Mn={getRoots:function(c){for(var u=c.length-1,_=u;0<=_&&Math.abs(c[_])<1e-12;_--)u--;var t,e,r,i,n,a,f,o,d,s,y,l,h,p=[];switch(u){case 1:l=[],0!==(h=(y=c)[1])&&l.push(-y[0]/h),p=l;break;case 2:y=[],l=(h=c)[2],s=h[1]/l,0<(h=s*s-4*(h[0]/l))?(l=Math.sqrt(h),y.push(.5*(-s+l)),y.push(.5*(-s-l))):0==h&&y.push(.5*-s),p=y;break;case 3:p=An(c);break;case 4:s=[],n=(t=c)[4],a=t[3]/n,f=t[2]/n,o=t[1]/n,t=t[0]/n,n=An([1,-f,a*o-4*t,-a*a*t+4*f*t-o*o].reverse())[0],d=a*a/4-f+n,0<(d=Math.abs(d)<=Tn?0:d)?(r=(e=3*a*a/4-(i=Math.sqrt(d))*i-2*f)+(o=(4*a*f-8*o-a*a*a)/(4*i)),e=e-o,Math.abs(r)<=Tn&&(r=0),Math.abs(e)<=Tn&&(e=0),0<=r&&(o=Math.sqrt(r),s.push(-a/4+(i+o)/2),s.push(-a/4+(i-o)/2)),0<=e&&(r=Math.sqrt(e),s.push(-a/4+(r-i)/2),s.push(-a/4-(r+i)/2))):d<0||-Tn<=(o=n*n-4*t)&&(o<0&&(o=0),o=2*Math.sqrt(o),Tn<=(e=3*a*a/4-2*f)+o&&(r=Math.sqrt(e+o),s.push(-a/4+r/2),s.push(-a/4-r/2)),Tn<=e-o&&(i=Math.sqrt(e-o),s.push(-a/4+i/2),s.push(-a/4-i/2))),p=s}return p}};function Rn(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function Sn(t,e,r){var i=(2*e+r)/3,n=(e+2*r)/3;return(t(e)+3*t(i)+3*t(n)+t(r))*(r-e)/8}function On(e){var t,r,i,n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(6===e.length?e=[[e[0],e[1]],[e[2],e[3]],[e[4],e[5]]]:8===e.length&&(e=[[e[0],e[1]],[e[2],e[3]],[e[4],e[5]],[e[6],e[7]]]),2===e.length)return t=(r=Bt(e[0],2))[0],r=r[1],i=(n=Bt(e[1],2))[0],n=n[1],Math.sqrt(Math.pow(i-t,2)+Math.pow(n-r,2));return function t(e,r,i,n){var n=3<arguments.length&&void 0!==n?n:.001,a=(r+i)/2,o=Sn(e,r,i),s=Sn(e,r,a),l=Sn(e,a,i),o=s+l-o;return Math.abs(o)<=15*n?s+l+o/15:t(e,r,a,n/2)+t(e,a,i,n/2)}(function(t){return Rn(Cn(t,e))},a,o)}function Cn(t,e,r){r=2<arguments.length&&void 0!==r?r:1;return 4===e.length?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Bt(e,4),i=e[0],n=e[1],a=e[2],e=e[3],c=(i=Bt(i,2))[0],i=i[1],o=(n=Bt(n,2))[0],n=n[1],s=(a=Bt(a,2))[0],a=a[1],e=Bt(e,2),u=e[0],e=e[1],l=0,h=0;return 0===r?(l=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*o+3*(1-t)*Math.pow(t,2)*s+Math.pow(t,3)*u,h=Math.pow(1-t,3)*i+3*t*Math.pow(1-t,2)*n+3*(1-t)*Math.pow(t,2)*a+Math.pow(t,3)*e):1===r?(l=3*((1-t)*(1-t)*(o-c)+2*(1-t)*t*(s-o)+t*t*(u-s)),h=3*((1-t)*(1-t)*(n-i)+2*(1-t)*t*(a-n)+t*t*(e-a))):2===r?(l=6*(s-2*o+c)*(1-t)+6*(u-2*s+o)*t,h=6*(a-2*n+i)*(1-t)+6*(e-2*a+n)*t):3===r&&(l=6*(u-3*s+3*o-c),h=6*(e-3*a+3*n-i)),[l,h]}(t,e,r):3===e.length?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Bt(e,3),i=e[0],n=e[1],e=e[2],a=(i=Bt(i,2))[0],i=i[1],o=(n=Bt(n,2))[0],n=n[1],e=Bt(e,2),s=e[0],e=e[1],l=0,h=0;return 0===r?(l=Math.pow(1-t,2)*a+2*t*(1-t)*o+Math.pow(t,2)*s,h=Math.pow(1-t,2)*i+2*t*(1-t)*n+Math.pow(t,2)*e):1===r?(l=2*(1-t)*(o-a)+2*t*(s-o),h=2*(1-t)*(n-i)+2*t*(e-n)):2===r&&(l=2*(s-2*o+a),h=2*(e-2*n+i)),[l,h]}(t,e,r):void 0}function In(e,t){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:20,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.001,c=function(t){return Rn(Cn(t,e))},u=t*r,n=r,a=n,o=0;o<h;o++){var s=Sn(c,0,n)-u;if(Math.abs(s)<i)break;var l=Rn(Cn(n,e,1));if(n-=s*l/(s*Rn(Cn(n,e,2))+l*l),Math.abs(n-a)<i)break;a=n}return Cn(n,e,0)}function wn(c,t){var e=Bt(c,4),r=Bt(e[0],2),i=r[0],r=r[1],n=Bt(e[1],2),a=n[0],n=n[1],o=Bt(e[2],2),u=o[0],o=o[1],e=e[3],s=(a-i)*t+i,l=(n-r)*t+r,a=(u-a)*t+a,n=(o-n)*t+n,h=(a-s)*t+s,_=(n-l)*t+l;return 4===c.length?[[i,r],[s,l],[h,_],[((((e=Bt(e,2))[0]-u)*t+u-a)*t+a-h)*t+h,(((e[1]-o)*t+o-n)*t+n-_)*t+_]]:3===c.length?[[i,r],[s,l],[h,_]]:void 0}var kn={bboxBezier:function(c,u,_,f,d,y,p,g){var x,m,t,e,r,i,n,a,v,E,b,o,s,T,A,l,M,R,S,O,h=arguments.length;return Array.isArray(c)&&(x=c.length,c=(t=Bt((m=c)[0],2))[0],u=t[1],_=(t=Bt(m[1],2))[0],f=t[1],h=4,3<=x&&(d=(t=Bt(m[2],2))[0],y=t[1],h=6),4<=x&&(p=(t=Bt(m[3],2))[0],g=t[1],h=8)),4!==h?6===h?(x=c,m=u,t=_,n=f,r=d,v=y,E=Math.min(x,r),b=Math.min(m,v),S=Math.max(x,r),O=Math.max(m,v),(t<E||n<b||S<t||O<n)&&((e=(x-t)/(x-2*t+r))<0?e=0:1<e&&(e=1),(a=(m-n)/(m-2*n+v))<0?a=0:1<a&&(a=1),x=(i=1-e)*i*x+2*i*e*t+e*e*r,t=(i=1-a)*i*m+2*i*a*n+a*a*v,E=Math.min(E,x),b=Math.min(b,t),S=Math.max(S,x),O=Math.max(O,t)),[E,b,S,O]):8===h?(e=c,r=u,i=_,n=f,a=d,v=y,E=p,b=g,S=Math.min(e,E),O=Math.min(r,b),h=Math.max(e,E),d=Math.max(r,b),(i<S||n<O||h<i||d<n||a<S||v<O||h<a||d<v)&&(A=(y=r-2*n+v)*y-(p=3*n-r-3*v+b)*(g=-r+n),0<(T=(R=e-2*i+a)*R-(l=3*i-e-3*a+E)*(M=-e+i))&&(o=(-R-(T=Math.sqrt(T)))/l,l&&0<o&&o<1&&(s=(s=1-o)*s*s*e+3*s*s*o*i+3*s*o*o*a+o*o*o*E,S=Math.min(S,s),h=Math.max(h,s)),0<(o=l?(-R+T)/l:.5*-M/R)&&o<1&&(T=(s=1-o)*s*s*e+3*s*s*o*i+3*s*o*o*a+o*o*o*E,S=Math.min(S,T),h=Math.max(h,T))),0<A&&(l=(-y-(A=Math.sqrt(A)))/p,p&&0<l&&l<1&&(R=(M=1-l)*M*M*r+3*M*M*l*n+3*M*l*l*v+l*l*l*b,O=Math.min(O,R),d=Math.max(d,R)),0<(l=p?(-y+A)/p:.5*-g/y)&&l<1&&(i=(e=1-l)*e*e*r+3*e*e*l*n+3*e*l*l*v+l*l*l*b,O=Math.min(O,i),d=Math.max(d,i)))),[S,O,h,d]):void 0:[Math.min(c,_),Math.min(u,f),Math.max(c,_),Math.max(u,f)]},bezierLength:On,pointAtBezier:function(t,e,r,i){return In(t,On(t,0,1),e,r,i)},pointAtBezierWithLength:In,sliceBezier:wn,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=wn(t,r)),0<e&&(r<1&&(e/=r),t=wn(t.slice(0).reverse(),1-e).reverse())),t},pointAtByT:function(t){var e,r,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return 4===t.length?(r=n,i=(e=t)[0][0]*(1-r)*(1-r)*(1-r)+3*e[1][0]*r*(1-r)*(1-r)+3*e[2][0]*r*r*(1-r)+e[3][0]*r*r*r,e=e[0][1]*(1-r)*(1-r)*(1-r)+3*e[1][1]*r*(1-r)*(1-r)+3*e[2][1]*r*r*(1-r)+e[3][1]*r*r*r,[i,e]):3===t.length?(r=n,e=(i=t)[0][0]*(1-r)*(1-r)+2*i[1][0]*r*(1-r)+i[2][0]*r*r,i=i[0][1]*(1-r)*(1-r)+2*i[1][1]*r*(1-r)+i[2][1]*r*r,[e,i]):void 0},getPointT:function(t,e,c){if(4===t.length){for(var i=t,u=e,_=c,f=Mn.getRoots([i[0][0]-u,3*(i[1][0]-i[0][0]),3*(i[2][0]+i[0][0]-2*i[1][0]),i[3][0]-i[0][0]+3*i[1][0]-3*i[2][0]]).filter(function(t){return 0<=t&&t<=1}),d=Mn.getRoots([i[0][1]-_,3*(i[1][1]-i[0][1]),3*(i[2][1]+i[0][1]-2*i[1][1]),i[3][1]-i[0][1]+3*i[1][1]-3*i[2][1]]).filter(function(t){return 0<=t&&t<=1}),r=[],n=0,y=f.length;n<y;n++)for(var p=f[n],a=0,g=d.length;a<g;a++){var x=d[a],m=Math.abs(p-x);m<1e-10&&r.push({x:p,y:x,diff:m})}r.sort(function(t,e){return t.diff-e.diff}),3<r.length&&r.splice(3),r=r.map(function(t){return.5*(t.x+t.y)});var v=[];return r.forEach(function(t){var e=i[0][0]*Math.pow(1-t,3)+3*i[1][0]*t*Math.pow(1-t,2)+3*i[2][0]*t*t*(1-t)+i[3][0]*Math.pow(t,3),r=i[0][1]*Math.pow(1-t,3)+3*i[1][1]*t*Math.pow(1-t,2)+3*i[2][1]*t*t*(1-t)+i[3][1]*Math.pow(t,3);Math.abs(e-u)<1e-10&&Math.abs(r-_)<1e-10&&v.push(t)}),v}if(3===t.length){for(var o=t,E=e,b=c,T=Mn.getRoots([o[0][0]-E,2*(o[1][0]-o[0][0]),o[2][0]+o[0][0]-2*o[1][0]]).filter(function(t){return 0<=t&&t<=1}),A=Mn.getRoots([o[0][1]-b,2*(o[1][1]-o[0][1]),o[2][1]+o[0][1]-2*o[1][1]]).filter(function(t){return 0<=t&&t<=1}),s=[],l=0,M=T.length;l<M;l++)for(var R=T[l],h=0,S=A.length;h<S;h++){var O=A[h],C=Math.abs(R-O);C<1e-10&&s.push({x:R,y:O,diff:C})}s.sort(function(t,e){return t.diff-e.diff}),2<s.length&&s.splice(2),s=s.map(function(t){return.5*(t.x+t.y)});var I=[];return s.forEach(function(t){var e=o[0][0]*Math.pow(1-t,2)+2*o[1][0]*t*(1-t)+o[2][0]*t*t,r=o[0][1]*Math.pow(1-t,2)+2*o[1][1]*t*(1-t)+o[2][1]*t*t;Math.abs(e-E)<1e-10&&Math.abs(r-b)<1e-10&&I.push(t)}),I}},bezierSlope:function(t,e){var r,i,n,a,o,s,l,c,h,u,_;return 2===t.length?(a=(r=Bt(t[0],2))[0],r=r[1],n=(i=Bt(t[1],2))[0],i=i[1],a===n?1/0:(i-r)/(n-a)):3===t.length?(i=e,r=Bt(r=t,3),n=Bt(r[0],2),a=n[0],n=n[1],o=Bt(r[1],2),s=o[0],o=o[1],r=Bt(r[2],2),l=r[0],r=r[1],0!=(l=2*(a-2*s+l)*i+2*s-2*a)?(2*(n-2*o+r)*i+2*o-2*n)/l:1/0):4===t.length?(s=e,o=Bt(o=t,4),l=Bt(o[0],2),e=l[0],l=l[1],t=Bt(o[1],2),c=t[0],t=t[1],h=Bt(o[2],2),u=h[0],h=h[1],o=Bt(o[3],2),_=o[0],o=o[1],0!=(_=3*(3*c-e-3*u+_)*s*s+2*(3*e-6*c+3*u)*s+3*c-3*e)?(3*(3*t-l-3*h+o)*s*s+2*(3*l-6*t+3*h)*s+3*t-3*l)/_:1/0):void 0}},Dn=Mn.getRoots,Ln=1e-6,Fn=6;function Nn(t,e){for(var r=0,i=e.length-1;0<=i;i--)r=r*t+e[i];return r}function Pn(t,e,r){var i=Nn(t,r),n=Nn(e,r);if(Math.abs(i)<=Ln)l=t;else if(Math.abs(n)<=Ln)l=e;else if(i*n<=0)for(var a=Math.log(e-t),o=Math.LN10*Fn,c=Math.ceil((a+o)/Math.LN2),s=0;s<c;s++){var l,h=Nn(l=.5*(t+e),r);if(Math.abs(h)<=Ln)break;h*i<0?(e=l,n=h):(t=l,i=h)}return l}function Bn(t,e,r){var i,n=[];if(1==r.length-1)null!=(i=Pn(t,e,r))&&n.push(i);else{var a=Bn(t,e,function(t){for(var e=[],r=1;r<t.length;r++)e.push(r*t[r]);return e}(r));if(0<a.length){null!=(i=Pn(t,a[0],r))&&n.push(i);for(var o=0;o<=a.length-2;o++)null!=(i=Pn(a[o],a[o+1],r))&&n.push(i);null!=(i=Pn(a[a.length-1],e,r))&&n.push(i)}else null!=(i=Pn(t,e,r))&&n.push(i)}return n}var Hn={intersectBezier2Line:function(t,e,r,i,c,u,n,a,o,s){for(var l=[],_=Math.min(n,o),f=Math.min(a,s),d=Math.max(n,o),y=Math.max(a,s),p=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}},g={x:a-s,y:o-n},x=[(x=function(t,e){return t.x*e.x+t.y*e.y})(g,{x:t-2*r+c,y:e-2*i+u}),x(g,{x:-2*t+2*r,y:-2*e+2*i}),x(g,{x:t,y:e})+(n*s-o*a)].reverse(),m=Dn(x),v=0;v<m.length;v++){var h=m[v];0<=h&&h<=1&&(h=p(p({x:t,y:e},{x:r,y:i},h),p({x:r,y:i},{x:c,y:u},h),h),n===o?f<=h.y&&h.y<=y&&l.push(h):a===s?_<=h.x&&h.x<=d&&l.push(h):h.x>=_&&h.y>=f&&h.x<=d&&h.y<=y&&l.push(h))}return l},intersectBezier3Line:function(t,e,r,i,c,u,_,f,n,a,o,d){for(var y=[],p=Math.min(n,o),g=Math.min(a,d),x=Math.max(n,o),m=Math.max(a,d),s=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}},v={x:a-d,y:o-n},E=[n*d-o*a+(E=function(t,e){return t.x*e.x+t.y*e.y})(v,{x:t,y:e}),E(v,{x:-3*t+3*r,y:-3*e+3*i}),E(v,{x:3*t-6*r+3*c,y:3*e-6*i+3*u}),E(v,{x:3*r-t-3*c+_,y:3*i-e-3*u+f})],b=Dn(E),T=0;T<b.length;T++){var A,M,l,h=b[T];0<=h&&h<=1&&(l=s({x:t,y:e},{x:r,y:i},h),A=s({x:r,y:i},{x:c,y:u},h),M=s({x:c,y:u},{x:_,y:f},h),l=s(s(l,A,h),s(A,M,h),h),n===o?g<=l.y&&l.y<=m&&y.push(l):a===d?p<=l.x&&l.x<=x&&y.push(l):l.x>=p&&l.y>=g&&l.x<=x&&l.y<=m&&y.push(l))}return y},intersectBezier2Bezier2:function(t,e,c,r,u,_,f,d,y,p,g,x){var m=[],i={x:t-2*c+u,y:e-2*r+_},n={x:2*c-2*t,y:2*r-2*e},a={x:t,y:e},o={x:f-2*y+g,y:d-2*p+x},s={x:2*y-2*f,y:2*p-2*d},l={x:f,y:d};f=0===i.y?(_=(u=i.x*(a.y-l.y))-n.x*n.y,c=n.y*n.y,[i.x*o.y*o.y,2*i.x*s.y*o.y,i.x*s.y*s.y-o.x*c-o.y*u-o.y*_,-s.x*c-s.y*u-s.y*_,(a.x-l.x)*c+(a.y-l.y)*_].reverse()):(r=i.x*o.y-i.y*o.x,t=i.x*s.y-s.x*i.y,e=n.x*i.y-n.y*i.x,x=i.y*(a.x-l.x)-i.x*(g=a.y-l.y),y=-n.y*e+i.y*x,[r*r,2*r*t,(-o.y*(p=e*e)+i.y*t*t+i.y*r*x+r*y)/i.y,(-s.y*p+i.y*t*x+t*y)/i.y,(g*p+x*y)/i.y].reverse());for(var v=Dn(f),E=0;E<v.length;E++){var h=v[E];if(0<=h&&h<=1){var b=Dn([i.x,n.x,a.x-l.x-h*s.x-h*h*o.x].reverse()),T=Dn([i.y,n.y,a.y-l.y-h*s.y-h*h*o.y].reverse());if(0<b.length&&0<T.length)t:for(var A=0;A<b.length;A++){var M=b[A];if(0<=M&&M<=1)for(var R=0;R<T.length;R++)if(Math.abs(M-T[R])<1e-4){m.push({x:o.x*h*h+s.x*h+l.x,y:o.y*h*h+s.y*h+l.y,t:M});break t}}}}return m},intersectBezier3Bezier3:function(c,u,_,f,d,y,p,g,x,m,t,v,e,E,b,T){for(var A=[],r={x:3*_-c-3*d+p,y:3*f-u-3*y+g},i={x:3*c-6*_+3*d,y:3*u-6*f+3*y},n={x:-3*c+3*_,y:-3*u+3*f},a={x:c,y:u},o={x:3*t-x-3*e+b,y:3*v-m-3*E+T},s={x:3*x-6*t+3*e,y:3*m-6*v+3*E},l={x:-3*x+3*t,y:-3*m+3*v},h={x:x,y:m},p=a.x*a.x,g=a.y*a.y,d=n.x*n.x,y=n.x*n.x*n.x,_=n.y*n.y,f=n.y*n.y*n.y,c=i.x*i.x,u=i.x*i.x*i.x,b=i.y*i.y,T=i.y*i.y*i.y,e=r.x*r.x,E=r.x*r.x*r.x,t=r.y*r.y,v=r.y*r.y*r.y,x=h.x*h.x,m=h.y*h.y,M=l.x*l.x,R=l.y*l.y,S=s.x*s.x,O=s.y*s.y,C=o.x*o.x,I=o.y*o.y,w=Bn(0,1,[-E*(o.y*o.y*o.y)+v*(o.x*o.x*o.x)-3*r.x*t*C*o.y+3*e*r.y*o.x*I,-6*r.x*s.x*t*o.x*o.y+6*e*r.y*s.y*o.x*o.y+3*s.x*v*C-3*E*s.y*I-3*r.x*t*s.y*C+3*e*s.x*r.y*I,-6*l.x*r.x*t*o.x*o.y-6*r.x*s.x*t*s.y*o.x+6*e*s.x*r.y*s.y*o.y+3*l.x*v*C+3*S*v*o.x+3*l.x*e*r.y*I-3*r.x*l.y*t*C-3*r.x*S*t*o.y+e*r.y*o.x*(6*l.y*o.y+3*O)+E*(-l.y*I-2*O*o.y-o.y*(2*l.y*o.y+O)),n.x*i.y*r.x*r.y*o.x*o.y-n.y*i.x*r.x*r.y*o.x*o.y+6*l.x*s.x*v*o.x+3*n.x*i.x*r.x*r.y*I+6*a.x*r.x*t*o.x*o.y-3*n.x*i.x*t*o.x*o.y-3*n.y*i.y*r.x*r.y*C-6*a.y*e*r.y*o.x*o.y-6*h.x*r.x*t*o.x*o.y+3*n.y*i.y*e*o.x*o.y-2*i.x*b*r.x*o.x*o.y-6*l.x*r.x*s.x*t*o.y-6*l.x*r.x*t*s.y*o.x-6*r.x*l.y*s.x*t*o.x+6*l.x*e*r.y*s.y*o.y+2*c*i.y*r.y*o.x*o.y+s.x*s.x*s.x*v-3*a.x*v*C+3*a.y*E*I+3*h.x*v*C+T*r.x*C-u*r.y*I-3*a.x*e*r.y*I+3*a.y*r.x*t*C-2*n.x*i.y*e*I+n.x*i.y*t*C-n.y*i.x*e*I+2*n.y*i.x*t*C+3*h.x*e*r.y*I-i.x*b*r.y*C-3*h.y*r.x*t*C+c*i.y*r.x*I-3*r.x*S*t*s.y+e*r.y*o.x*(6*h.y*o.y+6*l.y*s.y)+e*s.x*r.y*(6*l.y*o.y+3*O)+E*(-2*l.y*s.y*o.y-h.y*I-s.y*(2*l.y*o.y+O)-o.y*(2*h.y*o.y+2*l.y*s.y)),6*n.x*i.x*r.x*r.y*s.y*o.y+n.x*i.y*r.x*s.x*r.y*o.y+n.x*i.y*r.x*r.y*s.y*o.x-n.y*i.x*r.x*s.x*r.y*o.y-n.y*i.x*r.x*r.y*s.y*o.x-6*n.y*i.y*r.x*s.x*r.y*o.x-6*a.x*s.x*v*o.x+6*h.x*s.x*v*o.x+6*a.y*E*s.y*o.y+2*T*r.x*s.x*o.x-2*u*r.y*s.y*o.y+6*a.x*r.x*s.x*t*o.y+6*a.x*r.x*t*s.y*o.x+6*a.y*r.x*s.x*t*o.x-3*n.x*i.x*s.x*t*o.y-3*n.x*i.x*t*s.y*o.x+2*n.x*i.y*s.x*t*o.x+4*n.y*i.x*s.x*t*o.x-6*a.x*e*r.y*s.y*o.y-6*a.y*e*s.x*r.y*o.y-6*a.y*e*r.y*s.y*o.x-4*n.x*i.y*e*s.y*o.y-6*h.x*r.x*s.x*t*o.y-6*h.x*r.x*t*s.y*o.x-2*n.y*i.x*e*s.y*o.y+3*n.y*i.y*e*s.x*o.y+3*n.y*i.y*e*s.y*o.x-2*i.x*b*r.x*s.x*o.y-2*i.x*b*r.x*s.y*o.x-2*i.x*b*s.x*r.y*o.x-6*h.y*r.x*s.x*t*o.x-6*l.x*r.x*l.y*t*o.x-6*l.x*r.x*s.x*t*s.y+6*h.x*e*r.y*s.y*o.y+2*c*i.y*r.x*s.y*o.y+2*c*i.y*s.x*r.y*o.y+2*c*i.y*r.y*s.y*o.x+3*l.x*S*v+3*M*v*o.x-3*r.x*l.y*S*t-3*M*r.x*t*o.y+e*s.x*r.y*(6*h.y*o.y+6*l.y*s.y)+e*r.y*o.x*(6*h.y*s.y+3*R)+l.x*e*r.y*(6*l.y*o.y+3*O)+E*(-2*h.y*s.y*o.y-o.y*(2*h.y*s.y+R)-l.y*(2*l.y*o.y+O)-s.y*(2*h.y*o.y+2*l.y*s.y)),n.x*l.x*i.y*r.x*r.y*o.y+n.x*i.y*r.x*l.y*r.y*o.x+n.x*i.y*r.x*s.x*r.y*s.y-n.y*i.x*l.x*r.x*r.y*o.y-n.y*i.x*r.x*l.y*r.y*o.x-n.y*i.x*r.x*s.x*r.y*s.y-6*n.y*l.x*i.y*r.x*r.y*o.x-6*a.x*l.x*v*o.x+6*h.x*l.x*v*o.x+2*l.x*T*r.x*o.x+6*a.x*l.x*r.x*t*o.y+6*a.x*r.x*l.y*t*o.x+6*a.x*r.x*s.x*t*s.y+6*a.y*l.x*r.x*t*o.x-3*n.x*i.x*l.x*t*o.y-3*n.x*i.x*l.y*t*o.x-3*n.x*i.x*s.x*t*s.y+2*n.x*l.x*i.y*t*o.x+4*n.y*i.x*l.x*t*o.x-6*a.y*l.x*e*r.y*o.y-6*a.y*e*l.y*r.y*o.x-6*a.y*e*s.x*r.y*s.y-6*h.x*l.x*r.x*t*o.y-6*h.x*r.x*l.y*t*o.x-6*h.x*r.x*s.x*t*s.y+3*n.y*l.x*i.y*e*o.y-3*n.y*i.y*r.x*S*r.y+3*n.y*i.y*e*l.y*o.x+3*n.y*i.y*e*s.x*s.y-2*i.x*l.x*b*r.x*o.y-2*i.x*l.x*b*r.y*o.x-2*i.x*b*r.x*l.y*o.x-2*i.x*b*r.x*s.x*s.y-6*h.y*l.x*r.x*t*o.x-6*l.x*r.x*l.y*s.x*t+6*h.y*e*l.y*r.y*o.x+2*c*l.x*i.y*r.y*o.y+2*c*i.y*l.y*r.y*o.x+2*c*i.y*s.x*r.y*s.y-3*a.x*S*v+3*h.x*S*v+3*M*s.x*v+T*r.x*S+3*a.y*r.x*S*t+n.x*i.y*S*t+2*n.y*i.x*S*t-i.x*b*S*r.y-3*h.y*r.x*S*t-3*M*r.x*t*s.y+c*i.y*r.x*(2*l.y*o.y+O)+n.x*i.x*r.x*r.y*(6*l.y*o.y+3*O)+l.x*e*r.y*(6*h.y*o.y+6*l.y*s.y)+u*r.y*(-2*l.y*o.y-O)+a.y*E*(6*l.y*o.y+3*O)+n.y*i.x*e*(-2*l.y*o.y-O)+n.x*i.y*e*(-4*l.y*o.y-2*O)+a.x*e*r.y*(-6*l.y*o.y-3*O)+e*s.x*r.y*(6*h.y*s.y+3*R)+h.x*e*r.y*(6*l.y*o.y+3*O)+E*(-2*h.y*l.y*o.y-s.y*(2*h.y*s.y+R)-h.y*(2*l.y*o.y+O)-l.y*(2*h.y*o.y+2*l.y*s.y)),-a.x*n.x*i.y*r.x*r.y*o.y+a.x*n.y*i.x*r.x*r.y*o.y+6*a.x*n.y*i.y*r.x*r.y*o.x-6*a.y*n.x*i.x*r.x*r.y*o.y-a.y*n.x*i.y*r.x*r.y*o.x+a.y*n.y*i.x*r.x*r.y*o.x+n.x*n.y*i.x*i.y*r.x*o.y-n.x*n.y*i.x*i.y*r.y*o.x+n.x*h.x*i.y*r.x*r.y*o.y+n.x*h.y*i.y*r.x*r.y*o.x+n.x*l.x*i.y*r.x*r.y*s.y+n.x*i.y*r.x*l.y*s.x*r.y-h.x*n.y*i.x*r.x*r.y*o.y-6*h.x*n.y*i.y*r.x*r.y*o.x-n.y*i.x*h.y*r.x*r.y*o.x-n.y*i.x*l.x*r.x*r.y*s.y-n.y*i.x*r.x*l.y*s.x*r.y-6*n.y*l.x*i.y*r.x*s.x*r.y-6*a.x*h.x*v*o.x-6*a.x*l.x*s.x*v-2*a.x*T*r.x*o.x+6*h.x*l.x*s.x*v+2*h.x*T*r.x*o.x+2*l.x*T*r.x*s.x+2*a.y*u*r.y*o.y-6*a.x*a.y*r.x*t*o.x+3*a.x*n.x*i.x*t*o.y-2*a.x*n.x*i.y*t*o.x-4*a.x*n.y*i.x*t*o.x+3*a.y*n.x*i.x*t*o.x+6*a.x*a.y*e*r.y*o.y+6*a.x*h.x*r.x*t*o.y-3*a.x*n.y*i.y*e*o.y+2*a.x*i.x*b*r.x*o.y+2*a.x*i.x*b*r.y*o.x+6*a.x*h.y*r.x*t*o.x+6*a.x*l.x*r.x*t*s.y+6*a.x*r.x*l.y*s.x*t+4*a.y*n.x*i.y*e*o.y+6*a.y*h.x*r.x*t*o.x+2*a.y*n.y*i.x*e*o.y-3*a.y*n.y*i.y*e*o.x+2*a.y*i.x*b*r.x*o.x+6*a.y*l.x*r.x*s.x*t-3*n.x*h.x*i.x*t*o.y+2*n.x*h.x*i.y*t*o.x+n.x*n.y*b*r.x*o.x-3*n.x*i.x*h.y*t*o.x-3*n.x*i.x*l.x*t*s.y-3*n.x*i.x*l.y*s.x*t+2*n.x*l.x*i.y*s.x*t+4*h.x*n.y*i.x*t*o.x+4*n.y*i.x*l.x*s.x*t-2*a.x*c*i.y*r.y*o.y-6*a.y*h.x*e*r.y*o.y-6*a.y*h.y*e*r.y*o.x-6*a.y*l.x*e*r.y*s.y-2*a.y*c*i.y*r.x*o.y-2*a.y*c*i.y*r.y*o.x-6*a.y*e*l.y*s.x*r.y-n.x*n.y*c*r.y*o.y-2*n.x*_*r.x*r.y*o.x+3*h.x*n.y*i.y*e*o.y-2*h.x*i.x*b*r.x*o.y-2*h.x*i.x*b*r.y*o.x-6*h.x*h.y*r.x*t*o.x-6*h.x*l.x*r.x*t*s.y-6*h.x*r.x*l.y*s.x*t+3*n.y*h.y*i.y*e*o.x+3*n.y*l.x*i.y*e*s.y+3*n.y*i.y*e*l.y*s.x-2*i.x*h.y*b*r.x*o.x-2*i.x*l.x*b*r.x*s.y-2*i.x*l.x*b*s.x*r.y-2*i.x*b*r.x*l.y*s.x-6*h.y*l.x*r.x*s.x*t-_*i.x*i.y*r.x*o.x+2*h.x*c*i.y*r.y*o.y+6*h.y*e*l.y*s.x*r.y+2*d*n.y*r.x*r.y*o.y+d*i.x*i.y*r.y*o.y+2*c*h.y*i.y*r.y*o.x+2*c*l.x*i.y*r.y*s.y+2*c*i.y*l.y*s.x*r.y+l.x*l.x*l.x*v+3*p*v*o.x-3*g*E*o.y+3*x*v*o.x+f*e*o.x-y*t*o.y-n.x*_*e*o.y+d*n.y*t*o.x-3*p*r.x*t*o.y+3*g*e*r.y*o.x-d*b*r.x*o.y+_*c*r.y*o.x-3*M*r.x*l.y*t-3*x*r.x*t*o.y+3*m*e*r.y*o.x+n.x*i.x*r.x*r.y*(6*h.y*o.y+6*l.y*s.y)+u*r.y*(-2*h.y*o.y-2*l.y*s.y)+a.y*E*(6*h.y*o.y+6*l.y*s.y)+n.y*i.x*e*(-2*h.y*o.y-2*l.y*s.y)+c*i.y*r.x*(2*h.y*o.y+2*l.y*s.y)+n.x*i.y*e*(-4*h.y*o.y-4*l.y*s.y)+a.x*e*r.y*(-6*h.y*o.y-6*l.y*s.y)+h.x*e*r.y*(6*h.y*o.y+6*l.y*s.y)+l.x*e*r.y*(6*h.y*s.y+3*R)+E*(-2*h.y*l.y*s.y-m*o.y-l.y*(2*h.y*s.y+R)-h.y*(2*h.y*o.y+2*l.y*s.y)),-a.x*n.x*i.y*r.x*r.y*s.y+a.x*n.y*i.x*r.x*r.y*s.y+6*a.x*n.y*i.y*r.x*s.x*r.y-6*a.y*n.x*i.x*r.x*r.y*s.y-a.y*n.x*i.y*r.x*s.x*r.y+a.y*n.y*i.x*r.x*s.x*r.y+n.x*n.y*i.x*i.y*r.x*s.y-n.x*n.y*i.x*i.y*s.x*r.y+n.x*h.x*i.y*r.x*r.y*s.y+n.x*h.y*i.y*r.x*s.x*r.y+n.x*l.x*i.y*r.x*l.y*r.y-h.x*n.y*i.x*r.x*r.y*s.y-6*h.x*n.y*i.y*r.x*s.x*r.y-n.y*i.x*h.y*r.x*s.x*r.y-n.y*i.x*l.x*r.x*l.y*r.y-6*a.x*h.x*s.x*v-2*a.x*T*r.x*s.x+2*h.x*T*r.x*s.x+2*a.y*u*r.y*s.y-6*a.x*a.y*r.x*s.x*t+3*a.x*n.x*i.x*t*s.y-2*a.x*n.x*i.y*s.x*t-4*a.x*n.y*i.x*s.x*t+3*a.y*n.x*i.x*s.x*t+6*a.x*a.y*e*r.y*s.y+6*a.x*h.x*r.x*t*s.y-3*a.x*n.y*i.y*e*s.y+2*a.x*i.x*b*r.x*s.y+2*a.x*i.x*b*s.x*r.y+6*a.x*h.y*r.x*s.x*t+6*a.x*l.x*r.x*l.y*t+4*a.y*n.x*i.y*e*s.y+6*a.y*h.x*r.x*s.x*t+2*a.y*n.y*i.x*e*s.y-3*a.y*n.y*i.y*e*s.x+2*a.y*i.x*b*r.x*s.x-3*n.x*h.x*i.x*t*s.y+2*n.x*h.x*i.y*s.x*t+n.x*n.y*b*r.x*s.x-3*n.x*i.x*h.y*s.x*t-3*n.x*i.x*l.x*l.y*t+4*h.x*n.y*i.x*s.x*t-2*a.x*c*i.y*r.y*s.y-6*a.y*h.x*e*r.y*s.y-6*a.y*h.y*e*s.x*r.y-6*a.y*l.x*e*l.y*r.y-2*a.y*c*i.y*r.x*s.y-2*a.y*c*i.y*s.x*r.y-n.x*n.y*c*r.y*s.y-2*n.x*_*r.x*s.x*r.y+3*h.x*n.y*i.y*e*s.y-2*h.x*i.x*b*r.x*s.y-2*h.x*i.x*b*s.x*r.y-6*h.x*h.y*r.x*s.x*t-6*h.x*l.x*r.x*l.y*t+3*n.y*h.y*i.y*e*s.x+3*n.y*l.x*i.y*e*l.y-2*i.x*h.y*b*r.x*s.x-2*i.x*l.x*b*r.x*l.y-_*i.x*i.y*r.x*s.x+2*h.x*c*i.y*r.y*s.y-3*n.y*M*i.y*r.x*r.y+6*h.y*l.x*e*l.y*r.y+2*d*n.y*r.x*r.y*s.y+d*i.x*i.y*r.y*s.y+2*c*h.y*i.y*s.x*r.y+2*c*l.x*i.y*l.y*r.y-3*a.x*M*v+3*h.x*M*v+3*p*s.x*v-3*g*E*s.y+3*x*s.x*v+M*T*r.x+f*e*s.x-y*t*s.y+3*a.y*M*r.x*t-n.x*_*e*s.y+n.x*M*i.y*t+2*n.y*i.x*M*t+d*n.y*s.x*t-i.x*M*b*r.y-3*h.y*M*r.x*t-3*p*r.x*t*s.y+3*g*e*s.x*r.y-d*b*r.x*s.y+_*c*s.x*r.y-3*x*r.x*t*s.y+3*m*e*s.x*r.y+c*i.y*r.x*(2*h.y*s.y+R)+n.x*i.x*r.x*r.y*(6*h.y*s.y+3*R)+u*r.y*(-2*h.y*s.y-R)+a.y*E*(6*h.y*s.y+3*R)+n.y*i.x*e*(-2*h.y*s.y-R)+n.x*i.y*e*(-4*h.y*s.y-2*R)+a.x*e*r.y*(-6*h.y*s.y-3*R)+h.x*e*r.y*(6*h.y*s.y+3*R)+E*(-2*h.y*R-m*s.y-h.y*(2*h.y*s.y+R)),-a.x*n.x*i.y*r.x*l.y*r.y+a.x*n.y*i.x*r.x*l.y*r.y+6*a.x*n.y*l.x*i.y*r.x*r.y-6*a.y*n.x*i.x*r.x*l.y*r.y-a.y*n.x*l.x*i.y*r.x*r.y+a.y*n.y*i.x*l.x*r.x*r.y-n.x*n.y*i.x*l.x*i.y*r.y+n.x*n.y*i.x*i.y*r.x*l.y+n.x*h.x*i.y*r.x*l.y*r.y+6*n.x*i.x*h.y*r.x*l.y*r.y+n.x*h.y*l.x*i.y*r.x*r.y-h.x*n.y*i.x*r.x*l.y*r.y-6*h.x*n.y*l.x*i.y*r.x*r.y-n.y*i.x*h.y*l.x*r.x*r.y-6*a.x*h.x*l.x*v-2*a.x*l.x*T*r.x+6*a.y*h.y*E*l.y+2*h.x*l.x*T*r.x+2*a.y*u*l.y*r.y-2*u*h.y*l.y*r.y-6*a.x*a.y*l.x*r.x*t+3*a.x*n.x*i.x*l.y*t-2*a.x*n.x*l.x*i.y*t-4*a.x*n.y*i.x*l.x*t+3*a.y*n.x*i.x*l.x*t+6*a.x*a.y*e*l.y*r.y+6*a.x*h.x*r.x*l.y*t-3*a.x*n.y*i.y*e*l.y+2*a.x*i.x*l.x*b*r.y+2*a.x*i.x*b*r.x*l.y+6*a.x*h.y*l.x*r.x*t+4*a.y*n.x*i.y*e*l.y+6*a.y*h.x*l.x*r.x*t+2*a.y*n.y*i.x*e*l.y-3*a.y*n.y*l.x*i.y*e+2*a.y*i.x*l.x*b*r.x-3*n.x*h.x*i.x*l.y*t+2*n.x*h.x*l.x*i.y*t+n.x*n.y*l.x*b*r.x-3*n.x*i.x*h.y*l.x*t+4*h.x*n.y*i.x*l.x*t-6*a.x*h.y*e*l.y*r.y-2*a.x*c*i.y*l.y*r.y-6*a.y*h.x*e*l.y*r.y-6*a.y*h.y*l.x*e*r.y-2*a.y*c*l.x*i.y*r.y-2*a.y*c*i.y*r.x*l.y-n.x*n.y*c*l.y*r.y-4*n.x*h.y*i.y*e*l.y-2*n.x*_*l.x*r.x*r.y+3*h.x*n.y*i.y*e*l.y-2*h.x*i.x*l.x*b*r.y-2*h.x*i.x*b*r.x*l.y-6*h.x*h.y*l.x*r.x*t-2*n.y*i.x*h.y*e*l.y+3*n.y*h.y*l.x*i.y*e-2*i.x*h.y*l.x*b*r.x-_*i.x*l.x*i.y*r.x+6*h.x*h.y*e*l.y*r.y+2*h.x*c*i.y*l.y*r.y+2*d*n.y*r.x*l.y*r.y+d*i.x*i.y*l.y*r.y+2*c*h.y*l.x*i.y*r.y+2*c*h.y*i.y*r.x*l.y+3*p*l.x*v-3*g*E*l.y+3*x*l.x*v+f*l.x*e-y*l.y*t-3*m*E*l.y-n.x*_*e*l.y+d*n.y*l.x*t-3*p*r.x*l.y*t+3*g*l.x*e*r.y-d*b*r.x*l.y+_*c*l.x*r.y-3*x*r.x*l.y*t+3*m*l.x*e*r.y,a.x*a.y*n.x*i.y*r.x*r.y-a.x*a.y*n.y*i.x*r.x*r.y+a.x*n.x*n.y*i.x*i.y*r.y-a.y*n.x*n.y*i.x*i.y*r.x-a.x*n.x*h.y*i.y*r.x*r.y+6*a.x*h.x*n.y*i.y*r.x*r.y+a.x*n.y*i.x*h.y*r.x*r.y-a.y*n.x*h.x*i.y*r.x*r.y-6*a.y*n.x*i.x*h.y*r.x*r.y+a.y*h.x*n.y*i.x*r.x*r.y-n.x*h.x*n.y*i.x*i.y*r.y+n.x*n.y*i.x*h.y*i.y*r.x+n.x*h.x*h.y*i.y*r.x*r.y-h.x*n.y*i.x*h.y*r.x*r.y-2*a.x*h.x*T*r.x+2*a.y*u*h.y*r.y-3*a.x*a.y*n.x*i.x*t-6*a.x*a.y*h.x*r.x*t+3*a.x*a.y*n.y*i.y*e-2*a.x*a.y*i.x*b*r.x-2*a.x*n.x*h.x*i.y*t-a.x*n.x*n.y*b*r.x+3*a.x*n.x*i.x*h.y*t-4*a.x*h.x*n.y*i.x*t+3*a.y*n.x*h.x*i.x*t+6*a.x*a.y*h.y*e*r.y+2*a.x*a.y*c*i.y*r.y+2*a.x*n.x*_*r.x*r.y+2*a.x*h.x*i.x*b*r.y+6*a.x*h.x*h.y*r.x*t-3*a.x*n.y*h.y*i.y*e+2*a.x*i.x*h.y*b*r.x+a.x*_*i.x*i.y*r.x+a.y*n.x*n.y*c*r.y+4*a.y*n.x*h.y*i.y*e-3*a.y*h.x*n.y*i.y*e+2*a.y*h.x*i.x*b*r.x+2*a.y*n.y*i.x*h.y*e+n.x*h.x*n.y*b*r.x-3*n.x*h.x*i.x*h.y*t-2*a.x*c*h.y*i.y*r.y-6*a.y*h.x*h.y*e*r.y-2*a.y*h.x*c*i.y*r.y-2*a.y*d*n.y*r.x*r.y-a.y*d*i.x*i.y*r.y-2*a.y*c*h.y*i.y*r.x-2*n.x*h.x*_*r.x*r.y-n.x*n.y*c*h.y*r.y+3*h.x*n.y*h.y*i.y*e-2*h.x*i.x*h.y*b*r.x-h.x*_*i.x*i.y*r.x+3*g*n.x*i.x*r.x*r.y+3*n.x*i.x*m*r.x*r.y+2*h.x*c*h.y*i.y*r.y-3*p*n.y*i.y*r.x*r.y+2*d*n.y*h.y*r.x*r.y+d*i.x*h.y*i.y*r.y-3*x*n.y*i.y*r.x*r.y-a.x*a.x*a.x*v+a.y*a.y*a.y*E+h.x*h.x*h.x*v-h.y*h.y*h.y*E-3*a.x*x*v-a.x*f*e+3*p*h.x*v+a.y*y*t+3*a.y*m*E+h.x*f*e+p*T*r.x-3*g*h.y*E-g*u*r.y+x*T*r.x-y*h.y*t-u*m*r.y-a.x*d*n.y*t+a.y*n.x*_*e-3*a.x*g*e*r.y-a.x*_*c*r.y+a.y*d*b*r.x-n.x*_*h.y*e+3*p*a.y*r.x*t+p*n.x*i.y*t+2*p*n.y*i.x*t-2*g*n.x*i.y*e-g*n.y*i.x*e+d*h.x*n.y*t-3*a.x*m*e*r.y+3*a.y*x*r.x*t+n.x*x*i.y*t-2*n.x*m*i.y*e+h.x*_*c*r.y-n.y*i.x*m*e-p*i.x*b*r.y-3*p*h.y*r.x*t+3*g*h.x*e*r.y+g*c*i.y*r.x-d*h.y*b*r.x+2*x*n.y*i.x*t+3*h.x*m*e*r.y-x*i.x*b*r.y-3*x*h.y*r.x*t+c*m*i.y*r.x].reverse()),k=0;k<w.length;k++){var D=w[k],L=Dn([r.x,i.x,n.x,a.x-h.x-D*l.x-D*D*s.x-D*D*D*o.x].reverse()),F=Dn([r.y,i.y,n.y,a.y-h.y-D*l.y-D*D*s.y-D*D*D*o.y].reverse());if(0<L.length&&0<F.length)t:for(var N=0;N<L.length;N++){var P=L[N];if(0<=P&&P<=1)for(var B=0;B<F.length;B++)if(Math.abs(P-F[B])<1e-4){A.push({x:o.x*D*D*D+s.x*D*D+l.x*D+h.x,y:o.y*D*D*D+s.y*D*D+l.y*D+h.y,t:P});break t}}}return A},intersectBezier2Bezier3:function(c,u,t,e,_,f,d,y,p,g,x,m,v,E){for(var b=[],r={x:c-2*t+_,y:u-2*e+f},i={x:2*t-2*c,y:2*e-2*u},n={x:c,y:u},a={x:3*p-d-3*x+v,y:3*g-y-3*m+E},o={x:3*d-6*p+3*x,y:3*y-6*g+3*m},s={x:-3*d+3*p,y:-3*y+3*g},l={x:d,y:y},_=i.x*i.x,f=i.y*i.y,t=r.x*r.x,e=r.y*r.y,T=Bn(0,1,[-2*r.x*r.y*a.x*a.y+t*(a.y*a.y)+e*(a.x*a.x),-2*r.x*r.y*o.x*a.y-2*r.x*r.y*o.y*a.x+2*e*o.x*a.x+2*t*o.y*a.y,-2*r.x*s.x*r.y*a.y-2*r.x*r.y*s.y*a.x-2*r.x*r.y*o.x*o.y+2*s.x*e*a.x+e*(o.x*o.x)+t*(2*s.y*a.y+o.y*o.y),2*n.x*r.x*r.y*a.y+2*n.y*r.x*r.y*a.x+i.x*i.y*r.x*a.y+i.x*i.y*r.y*a.x-2*l.x*r.x*r.y*a.y-2*r.x*l.y*r.y*a.x-2*r.x*s.x*r.y*o.y-2*r.x*r.y*s.y*o.x-2*n.x*e*a.x-2*n.y*t*a.y+2*l.x*e*a.x+2*s.x*e*o.x-f*r.x*a.x-_*r.y*a.y+t*(2*l.y*a.y+2*s.y*o.y),2*n.x*r.x*r.y*o.y+2*n.y*r.x*r.y*o.x+i.x*i.y*r.x*o.y+i.x*i.y*r.y*o.x-2*l.x*r.x*r.y*o.y-2*r.x*l.y*r.y*o.x-2*r.x*s.x*r.y*s.y-2*n.x*e*o.x-2*n.y*t*o.y+2*l.x*e*o.x-f*r.x*o.x-_*r.y*o.y+s.x*s.x*e+t*(2*l.y*o.y+s.y*s.y),2*n.x*r.x*r.y*s.y+2*n.y*r.x*s.x*r.y+i.x*i.y*r.x*s.y+i.x*i.y*s.x*r.y-2*l.x*r.x*r.y*s.y-2*r.x*l.y*s.x*r.y-2*n.x*s.x*e-2*n.y*t*s.y+2*l.x*s.x*e-f*r.x*s.x-_*r.y*s.y+2*t*l.y*s.y,-2*n.x*n.y*r.x*r.y-n.x*i.x*i.y*r.y-n.y*i.x*i.y*r.x+2*n.x*r.x*l.y*r.y+2*n.y*l.x*r.x*r.y+i.x*l.x*i.y*r.y+i.x*i.y*r.x*l.y-2*l.x*r.x*l.y*r.y-2*n.x*l.x*e+n.x*f*r.x+n.y*_*r.y-2*n.y*t*l.y-l.x*f*r.x-_*l.y*r.y+n.x*n.x*e+n.y*n.y*t+l.x*l.x*e+t*(l.y*l.y)].reverse()),A=0;A<T.length;A++){var h=T[A],M=Dn([r.x,i.x,n.x-l.x-h*s.x-h*h*o.x-h*h*h*a.x].reverse()),R=Dn([r.y,i.y,n.y-l.y-h*s.y-h*h*o.y-h*h*h*a.y].reverse());if(0<M.length&&0<R.length)t:for(var S=0;S<M.length;S++){var O=M[S];if(0<=O&&O<=1)for(var C=0;C<R.length;C++)if(Math.abs(O-R[C])<1e-4){b.push({x:a.x*h*h*h+o.x*h*h+s.x*h+l.x,y:a.y*h*h*h+o.y*h*h+s.y*h+l.y,t:O});break t}}}return b}},Gn=function(){function i(t,e){var r;_(this,i),Array.isArray(t)&&(t=(r=Bt(t,2))[0],e=r[1]),this.x=t,this.y=e}return f(i,[{key:"toString",value:function(){return this.x+","+this.y}},{key:"equal",value:function(t){return this===t||this.x===t.x&&this.y===t.y}}],[{key:"compare",value:function(t,e){return t.x>e.x||t.x===e.x&&t.y>e.y}}]),i}(),Yn=function(){function r(t,e){_(this,r),this.coords=t,this.belong=e,this.calBbox(),this.myFill=[!1,!1],this.otherFill=[!1,!1],this.myCoincide=0,this.otherCoincide=0,this.isVisited=!1,this.isDeleted=!1}return f(r,[{key:"calBbox",value:function(){var t,e,r,i,n,a=this.coords;2===a.length?(i=a[0],n=a[1],t=Math.min(i.x,n.x),e=Math.min(i.y,n.y),r=Math.max(i.x,n.x),i=Math.max(i.y,n.y),this.bbox=[t,e,r,i]):(n=a.map(function(t){return[t.x,t.y]}),this.bbox=kn.bboxBezier(n))}},{key:"reverse",value:function(){this.coords.reverse()}},{key:"equal",value:function(t){var e=this.coords,r=t.coords;if(e.length!==r.length)return!1;for(var i=0,n=e.length;i<n;i++)if(!e[i].equal(r[i]))return!1;return!0}},{key:"toHash",value:function(){return this.coords.map(function(t){return t.toString()}).join(" ")}},{key:"toString",value:function(){return this.toHash()+" "+this.belong+" "+this.myCoincide+this.otherCoincide+" "+this.myFill.map(function(t){return t?1:0}).join("")+this.otherFill.map(function(t){return t?1:0}).join("")}}]),r}(),Wn=1e-9,Un=1-1e-9;var Xn=function(t,e,r,i,n,a,o,s,l){if(o=((o-n)*(e-a)-(s-a)*(t-n))/l,s=((r-t)*(e-a)-(i-e)*(t-n))/l,Wn<o&&o<Un&&Wn<s&&s<Un)return[{point:new Gn(t+o*(r-t),e+o*(i-e)),toSource:o,toClip:s}]},zn=function(n,a,o,s,l,f,h,c,u,_){var t=Hn.intersectBezier2Line(n,a,o,s,l,f,h,c,u,_);if(t.length&&(t=t.map(function(t){var e=Math.abs(u-h)>=Math.abs(_-c)?Math.abs((t.x-h)/(u-h)):Math.abs((t.y-c)/(_-c));if(t.t>Wn&&t.t<Un&&Wn<e&&e<Un){var r=kn.bezierSlope([[n,a],[o,s],[l,f]],t.t),i=kn.bezierSlope([[h,c],[u,_]]);if(!(Math.abs(Math.abs(r)-Math.abs(i)||0)<Wn))return{point:new Gn(t.x,t.y),toSource:t.t,toClip:e}}}).filter(function(t){return t})).length)return t},Vn=function(n,a,o,f,d,y,s,l,h,c,u,_){var t=Hn.intersectBezier2Bezier2(n,a,o,f,d,y,s,l,h,c,u,_);if(t.length&&(t=t.map(function(t){var e=kn.getPointT([[s,l],[h,c],[u,_]],t.x,t.y);if(e.length&&(e=e[0],t.t>Wn&&t.t<Un&&Wn<e&&e<Un)){var r=kn.bezierSlope([[n,a],[o,f],[d,y]],t.t),i=kn.bezierSlope([[s,l],[h,c],[u,_]],e);if(!(Math.abs(Math.abs(r)-Math.abs(i)||0)<Wn))return{point:new Gn(t.x,t.y),toSource:t.t,toClip:e}}}).filter(function(t){return t})).length)return t},Kn=function(n,f,d,y,p,g,a,o,s,l,h,c,u,_){var t=Hn.intersectBezier2Bezier3(n,f,d,y,p,g,a,o,s,l,h,c,u,_);if(t.length&&(t=t.map(function(t){var e=kn.getPointT([[a,o],[s,l],[h,c],[u,_]],t.x,t.y);if(e.length&&(e=e[0],t.t>Wn&&t.t<Un&&Wn<e&&e<Un)){var r=kn.bezierSlope([[n,f],[d,y],[p,g]],t.t),i=kn.bezierSlope([[a,o],[s,l],[h,c],[u,_]],e);if(!(Math.abs(Math.abs(r)-Math.abs(i)||0)<Wn))return{point:new Gn(t.x,t.y),toSource:t.t,toClip:e}}}).filter(function(t){return t})).length)return t},jn=function(n,a,o,s,l,f,d,y,h,c,u,_){var t=Hn.intersectBezier3Line(n,a,o,s,l,f,d,y,h,c,u,_);if(t.length&&(t=t.map(function(t){var e=Math.abs(u-h)>=Math.abs(_-c)?Math.abs((t.x-h)/(u-h)):Math.abs((t.y-c)/(_-c));if(t.t>Wn&&t.t<Un&&Wn<e&&e<Un){var r=kn.bezierSlope([[n,a],[o,s],[l,f],[d,y]],t.t),i=kn.bezierSlope([[h,c],[u,_]]);if(!(Math.abs(Math.abs(r)-Math.abs(i)||0)<Wn))return{point:new Gn(t.x,t.y),toSource:t.t,toClip:e}}}).filter(function(t){return t})).length)return t},$n=function(n,f,d,y,p,g,x,m,a,o,s,l,h,c,u,_){var t=Hn.intersectBezier3Bezier3(n,f,d,y,p,g,x,m,a,o,s,l,h,c,u,_);if(t.length&&(t=t.map(function(t){var e=kn.getPointT([[a,o],[s,l],[h,c],[u,_]],t.x,t.y);if(e.length&&(e=e[0],t.t>Wn&&t.t<Un&&Wn<e&&e<Un)){var r=kn.bezierSlope([[n,f],[d,y],[p,g],[x,m]],t.t),i=kn.bezierSlope([[a,o],[s,l],[h,c],[u,_]],e);if(!(Math.abs(Math.abs(r)-Math.abs(i)||0)<Wn))return{point:new Gn(t.x,t.y),toSource:t.t,toClip:e}}}).filter(function(t){return t})).length)return t},qn=function(t,r){return t.sort(function(t,e){return r?t.toSource-e.toSource:t.toClip-e.toClip}).map(function(t){return{point:t.point,t:r?t.toSource:t.toClip}}).filter(function(t){return t.t>Wn&&t.t<Un})},Zn=function(){function e(t,d){_(this,e),this.index=d;var y=[];Array.isArray(t)&&(t.forEach(function(t){if(Array.isArray(t)&&!(t.length<2)&&!(2===t.length&&t[1].length<=2)){for(var r=new Gn(t[0]),e=r,i=1,c=t.length;i<c;i++){var s=t[i],n=s.length,l=new Gn(s[n-2],s[n-1]),u=void 0;if(2===n){if(r.equal(l))continue;var _=Gn.compare(r,l)?[l,r]:[r,l],u=new Yn(_,d)}else if(4===n){if(r.equal(l)&&r.x===s[0]&&r.y===s[1])continue;var a,_=new Gn(s[0],s[1]),o=oa([r,_,l],!0);u=o?(h=[[r.x,r.y],[s[0],s[1]],[l.x,l.y]],a=kn.sliceBezier(h,o[0]),h=kn.sliceBezier2Both(h,o[0],1),o=new Gn(a[1]),a=new Gn(a[2]),h=new Gn(h[1]),o=Gn.compare(r,a)?[a,o,r]:[r,o,a],y.push(new Yn(o,d)),o=Gn.compare(a,l)?[l,h,a]:[a,h,l],new Yn(o,d)):(a=Gn.compare(r,l)?[l,_,r]:[r,_,l],new Yn(a,d))}else if(6===n){if(s[0]===s[2]&&s[1]===s[3]){s.splice(2,2),i--;continue}if(r.equal(l)&&r.x===s[0]&&r.y===s[1]&&r.x===s[2]&&r.y===s[3])continue;var h=new Gn(s[0],s[1]),o=new Gn(s[2],s[3]),f=oa([r,h,o,l],!0);f?function(){var n=[[r.x,r.y],[s[0],s[1]],[s[2],s[3]],[l.x,l.y]],a=r,o=0,t=(f.forEach(function(t){var e=kn.sliceBezier2Both(n,o,t),r=new Gn(e[1]),i=new Gn(e[2]),e=new Gn(e[3]),r=Gn.compare(a,e)?[e,i,r,a]:[a,r,i,e];y.push(new Yn(r,d)),o=t,a=e}),kn.sliceBezier2Both(n,o,1)),e=new Gn(t[1]),t=new Gn(t[2]),e=Gn.compare(a,l)?[l,t,e,a]:[a,e,t,l];u=new Yn(e,d)}():(n=Gn.compare(r,l)?[l,o,h,r]:[r,h,o,l],u=new Yn(n,d))}y.push(u),r=l}r.equal(e)||(e=Gn.compare(r,e)?[e,r]:[r,e],y.push(new Yn(e,d)))}}),this.segments=y)}return f(e,[{key:"selfIntersect",value:function(){var t=ea(this.segments);this.segments=Jn(t,!1,!1,!1)}},{key:"toString",value:function(){return this.segments.map(function(t){return t.toString()})}},{key:"reset",value:function(e){return this.index=e,this.segments.forEach(function(t){t.belong=e,t.otherCoincide=0,t.otherFill[0]=t.otherFill[1]=!1}),this}}],[{key:"intersect2",value:function(t,e,r,i){t.segments.length&&e.segments.length&&(r=Jn(ea(t.segments.concat(e.segments)),!0,r,i),t.segments=r.filter(function(t){return 0===t.belong}),e.segments=r.filter(function(t){return 1===t.belong}))}},{key:"annotate2",value:function(t,e,o,s){t=t.segments.concat(e.segments),n={},t.forEach(function(t){var e=t.coords,r=e.length,i=e[0],e=e[r-1];ia(n,i.x,i.y,t,!0),ia(n,e.x,e.y,t,!1)}),a=[],Object.keys(n).forEach(function(t){var r=n[t],i=[];Object.keys(r).forEach(function(t){var e=r[t].sort(function(t,e){return t.isStart!==e.isStart?t.isStart?1:-1:t.isStart?aa(t.seg,e.seg)?1:-1:void 0});i.push({y:parseFloat(t),arr:e})}),a.push({x:parseFloat(t),arr:i.sort(function(t,e){return t.y-e.y})})}),a.sort(function(t,e){return t.x-e.x}),r=[],a.forEach(function(t){t.arr.forEach(function(t){r=r.concat(t.arr)})});var n,a,r,e=r,l=[],u=[],_={},f={},h=(e.forEach(function(t){var e=t.isStart,r=t.seg,t=r.belong;if(!(0===t&&o||1===t&&s)){var i=0===t?l:u,t=0===t?_:f;if(e){if(r.myCoincide){e=r.toHash();if(t.hasOwnProperty(e))return;t[e]=!0}if(i.length){t=i.length,e=i[t-1];if(aa(r,e))r.myFill[1]=e.myFill[0],r.myCoincide?r.myFill[0]=r.myCoincide%2==0?!r.myFill[1]:r.myFill[1]:r.myFill[0]=!r.myFill[1],i.push(r);else if(1===t)r.myCoincide?r.myFill[0]=r.myCoincide%2==0:r.myFill[0]=!0,i.unshift(r);else for(var n=t-2;0<=n;n--){var a=i[n];if(aa(r,a)){r.myFill[1]=a.myFill[0],r.myCoincide?r.myFill[0]=r.myCoincide%2==0?!r.myFill[1]:r.myFill[1]:r.myFill[0]=!r.myFill[1],i.splice(n+1,0,r);break}0===n&&(r.myCoincide?r.myFill[0]=r.myCoincide%2==0:r.myFill[0]=!0,i.unshift(r))}}else r.myCoincide?r.myFill[0]=r.myCoincide%2==0:r.myFill[0]=!0,i.push(r)}else{e=i.indexOf(r);-1<e&&i.splice(e,1)}}}),[]),c={};e.forEach(function(t){var e=t.isStart,r=t.seg,i=r.belong;if(e){if(r.myCoincide||r.otherCoincide){t=r.toHash();if(c.hasOwnProperty(t))return;c[t]=!0}var n=!1;if(h.length){e=h.length,t=h[e-1];if(aa(r,t))n=(t.belong===i?t.otherFill:t.myFill)[0],h.push(r);else if(1===e)h.unshift(r);else for(var a=e-2;0<=a;a--){var o=h[a];if(aa(r,o)){n=(o.belong===i?o.otherFill:o.myFill)[0],h.splice(a+1,0,r);break}0===a&&h.unshift(r)}}else n=!1,h.push(r);r.otherCoincide||(r.otherFill[0]=n,r.otherFill[1]=n)}else{t=h.indexOf(r);-1<t&&h.splice(t,1)}})}}]),e}();function Jn(c,u,_,f){for(var r=[],d=[],y=[];c.length;){d.length&&d.splice(0).forEach(function(t){var e=r.indexOf(t);r.splice(e,1),t.isDeleted||y.push(t)});for(var p=c[0],g=p.x,x=p.arr;x.length;){var t=x.shift();if(!t.isDeleted){var m=t.belong,v=t.bbox;if(t.isVisited)v[0]!==v[2]||2!==t.coords.length?(T=r.indexOf(t),r.splice(T,1),t.isDeleted||y.push(t)):d.push(t),t.isVisited=!1;else{if(r.length)for(var E=t.coords,b=E.length,T=E[0],e=T.x,i=T.y,A=E[1],n=A.x,M=A.y,R=0;R<r.length;R++){var a=r[R];if(!a.isDeleted&&!t.isDeleted&&(!u||a.belong!==m)){var o=a.bbox,S=a.coords,O=S.length,C=!1;if(function(t,e,r,i){if(2===r&&2===i){if(t[0]===t[2]&&e[0]===e[2]&&t[0]===t[2])return!(t[1]>=e[3]||e[1]>=t[3]);if(t[1]===t[3]&&e[1]===e[3]&&t[1]==t[1])return!(t[0]>=e[2]||e[0]>=t[2])}return te.isRectsOverlap(t,e)}(v,o,b,O))if(b===O&&t.equal(a))u?(t.otherCoincide++,a.otherCoincide++,t.otherFill=a.myFill,a.otherFill=t.myFill):(t.myCoincide++,a.myCoincide++,t.myFill=a.myFill);else{var I,w,k,D,L,F,N,P,B,H,G,o=S[0],s=o.x,o=o.y,l=S[1],h=l.x,l=l.y,Y=void 0,W=void 0;if(2===b?2===O?0==(I=(l-o)*(n-e)-(h-s)*(M-i))?e===n?e===s&&n===h&&(W=la(e,i,n,M,t,s,o,h,l,a,!0)):(M-i)*e/(n-e)+i===(l-o)*s/(h-s)+o&&(W=la(e,i,n,M,t,s,o,h,l,a,!1)):Y=Xn(e,i,n,M,s,o,h,l,I):(w=(I=S[2]).x,k=I.y,C=(Y=3===O?zn(s,o,h,l,w,k,e,i,n,M):(D=(L=S[3]).x,L=L.y,jn(s,o,h,l,w,k,D,L,e,i,n,M)),!0)):(k=(w=E[2]).x,D=w.y,3===b?2===O?Y=zn(e,i,n,M,k,D,s,o,h,l):(F=(L=S[2]).x,N=L.y,3===O?(Y=Vn(e,i,n,M,k,D,s,o,h,l,F,N))||(W=ha(t,a)):(P=(B=S[3]).x,B=B.y,Y=Kn(e,i,n,M,k,D,s,o,h,l,F,N,P,B))):(N=(F=E[3]).x,P=F.y,2===O?Y=jn(e,i,n,M,k,D,N,P,s,o,h,l):(H=(B=S[2]).x,G=B.y,3===O?(Y=Kn(s,o,h,l,H,G,e,i,n,M,k,D,N,P),C=!0):(S=(O=S[3]).x,O=O.y,(Y=$n(e,i,n,M,k,D,N,P,s,o,h,l,H,G,S,O))||(W=ha(t,a)))))),W){ta(y,c,r,g,W.ra),ta(y,c,r,g,W.rb),t.isDeleted=a.isDeleted=!0,r.splice(R,1);break}if(Y&&Y.length){s=Qn(t,qn(Y,!C),_&&0===m),o=Qn(a,qn(Y,C),f&&1===m);ta(y,c,r,g,s),ta(y,c,r,g,o),o.length&&r.splice(R,1);break}}}}t.isDeleted||(r.push(t),t.isVisited=!0)}}}c.shift()}return d.forEach(function(t){t.isDeleted||y.push(t)}),y.filter(function(t){return!t.isDeleted})}function Qn(n,t,a){var o=[];if(!t.length)return o;var e,s=n.belong,l=n.coords,h=l.length,c=l[0],u=0;return t.forEach(function(t){var e,r,i=t.point,t=t.t;2===h?e=new Yn([c,i],s):3===h?(r=kn.sliceBezier2Both(l.map(function(t){return[t.x,t.y]}),u,t),e=new Yn([c,new Gn(r[1][0],r[1][1]),i],s)):4===h&&(r=kn.sliceBezier2Both(l.map(function(t){return[t.x,t.y]}),u,t),e=new Yn([c,new Gn(r[1][0],r[1][1]),new Gn(r[2][0],r[2][1]),i],s)),a&&(e.myFill[0]=n.myFill[0],e.myFill[1]=n.myFill[1]),c=i,o.push(e),u=t}),2===h?e=new Yn([c,l[1]],s):3===h?(t=kn.sliceBezier2Both(l.map(function(t){return[t.x,t.y]}),u,1),e=new Yn([c,new Gn(t[1][0],t[1][1]),l[2]],s)):4===h&&(t=kn.sliceBezier2Both(l.map(function(t){return[t.x,t.y]}),u,1),e=new Yn([c,new Gn(t[1][0],t[1][1]),new Gn(t[2][0],t[2][1]),l[3]],s)),a&&(e.myFill[0]=n.myFill[0],e.myFill[1]=n.myFill[1]),o.push(e),n.isDeleted=!0,o}function ta(u,_,f,d,t){t.forEach(function(t){var e=t.bbox,r=e[0],i=e[2];if(i<=d&&r!==i&&2!==t.coords.length)u.push(t);else{var n=0;if(r<d)t.isVisited=!0,f.push(t);else for(var a=_.length;n<a;n++){var o=_[n],s=o.x;if(r===s){o.arr.push(t);break}if(r<s){_.splice(n,0,{x:r,arr:[t]});break}}for(var c=_.length;n<c;n++){var l=_[n],h=l.x;if(i===h){l.arr.unshift(t);break}if(i<h){_.splice(n,0,{x:i,arr:[t]});break}}}})}function ea(t){var i={},e=(t.forEach(function(t){var e=t.bbox,r=e[0],e=e[2];ra(i,r,t),ra(i,e,t)}),[]);return Object.keys(i).forEach(function(t){return e.push({x:parseFloat(t),arr:i[t]})}),e.sort(function(t,e){return t.x-e.x})}function ra(t,e,r){t=t[e]=t[e]||[];r.isVisited?(t.unshift(r),r.isVisited=!1):(t.push(r),r.isVisited=!0)}function ia(t,e,r,i,n){t=t[e]=t[e]||{};(t[r]=t[r]||[]).push({isStart:n,seg:i})}function na(t,e,r){var i=t.x,t=t.y,n=e.x,e=e.y,a=r.x,r=r.y;return 0<=Gt.crossProduct(n-i,e-t,a-i,r-t)}function aa(t,e){var t=t.coords,e=e.coords,r=t.length,i=e.length,n=t[0],a=e[0];if(2===r&&2===i)return o=t[1],s=e[1],n.equal(a)?na(o,a,s):na(n,a,s);if(2===r&&n.x===t[1].x)return a.x>=n.x;var o=Math.max(n.x,a.x),s=Math.min(t[r-1].x,e[i-1].x),l=o+.5*(s-o);if(n!==a){n=sa(t,o),a=sa(e,o);if(n!==a)return a<n}if(t[r-1]!==e[i-1]){o=sa(t,s),a=sa(e,s);if(o!==a)return a<o}n=sa(t,l),r=sa(e,l);return n!==r?r<n:void 0}function oa(t,e){if(3===t.length){var r=e?(t[0].x-t[1].x)/(t[0].x-2*t[1].x+t[2].x):(t[0].y-t[1].y)/(t[0].y-2*t[1].y+t[2].y);if(0<r&&r<1)return[r]}else if(4===t.length){r=Mn.getRoots([e?3*(t[1].x-t[0].x):3*(t[1].y-t[0].y),e?6*(t[2].x+t[0].x-2*t[1].x):6*(t[2].y+t[0].y-2*t[1].y),e?3*(t[3].x+3*t[1].x-t[0].x-3*t[2].x):3*(t[3].y+3*t[1].y-t[0].y-3*t[2].y)]).filter(function(t){return 0<t&&t<1});if(r.length)return r.sort(function(t,e){return t-e})}}function sa(t,e){var r,i,n=t.length;if(e===t[0].x)return t[0].y;if(e===t[n-1].x)return t[n-1].y;if(2!==n)return 3===n?(i=Mn.getRoots([t[0].x-e,2*(t[1].x-t[0].x),t[2].x+t[0].x-2*t[1].x]).filter(function(t){return 0<=t&&t<=1}),r=t.map(function(t){return[t.x,t.y]}),kn.pointAtByT(r,i[0])[1]):4===n?(r=Mn.getRoots([t[0].x-e,3*(t[1].x-t[0].x),3*(t[2].x+t[0].x-2*t[1].x),t[3].x+3*t[1].x-t[0].x-3*t[2].x]).filter(function(t){return 0<=t&&t<=1}),i=t.map(function(t){return[t.x,t.y]}),kn.pointAtByT(i,r[0])[1]):void 0;if(t[0].y===t[1].y)return t[0].y;n=(e-t[0].x)/(t[1].x-t[0].x);return t[0].y+n*(t[1].y-t[0].y)}function la(c,u,t,e,r,_,f,i,d,n,a){var o=[],s=[],l=r.coords,h=n.coords;return c<_&&!a||u<f&&a?(o.push(new Yn([l[0],h[0]],r.belong)),t<i&&!a||e<d&&a?(o.push(new Yn([h[0],l[1]],r.belong)),s.push(new Yn([h[0],l[1]],n.belong)),s.push(new Yn([l[1],h[1]],n.belong))):t===i&&!a||e===d&&a?(o.push(new Yn([h[0],h[1]],r.belong)),s.push(new Yn([h[0],h[1]],n.belong))):(o.push(new Yn([h[0],h[1]],r.belong)),s.push(new Yn([h[0],h[1]],n.belong)),o.push(new Yn([h[1],l[1]],r.belong)))):c===_&&!a||u===f&&a?t<i&&!a||e<d&&a?(o.push(new Yn([l[0],l[1]],r.belong)),s.push(new Yn([l[0],l[1]],n.belong)),s.push(new Yn([l[1],h[1]],n.belong))):(o.push(new Yn([h[0],h[1]],r.belong)),o.push(new Yn([h[1],l[1]],r.belong)),s.push(new Yn([h[0],h[1]],n.belong))):(s.push(new Yn([h[0],l[0]],n.belong)),t<i&&!a||e<d&&a?(o.push(new Yn([l[0],l[1]],r.belong)),s.push(new Yn([l[0],l[1]],n.belong)),s.push(new Yn([l[1],h[1]],n.belong))):t===i&&!a||e===d&&a?(o.push(new Yn([l[0],l[1]],r.belong)),s.push(new Yn([l[0],l[1]],n.belong))):(o.push(new Yn([l[0],h[1]],r.belong)),s.push(new Yn([l[0],h[1]],n.belong)),o.push(new Yn([h[1],l[1]],r.belong)))),{ra:o,rb:s}}function ha(t,e){var r=t.coords.map(function(t){return[t.x,t.y]}),c=r.length,i=e.coords.map(function(t){return[t.x,t.y]}),u=i.length,_=r[0],n=i[0],a=r[c-1],f=i[u-1],n=kn.getPointT(r,n[0],n[1]),f=kn.getPointT(r,f[0],f[1]),_=kn.getPointT(i,_[0],_[1]),a=kn.getPointT(i,a[0],a[1]),o=n.length,s=f.length,l=_.length,h=a.length;if(1===o&&1===s&&0===l&&0===h||0===o&&0===s&&1===l&&1===h||(1===o&&1===s&&l+h===1||o+s===1&&1===l&&1===h)||o+s===1&&l+h===1){var o=o?n[0]:0,n=s?f[0]:1,s=kn.sliceBezier2Both(r,o,n),f=l?_[0]:0,l=h?a[0]:1;if(function(t,e){for(var r=0,i=t.length;r<i;r++){var n=t[r],a=e[r];if(1e-9<Math.abs(n[0]-a[0])||1e-9<Math.abs(n[1]-a[1]))return!1}return!0}(s,kn.sliceBezier2Both(i,f,l)))return _=s.map(function(t){return new Gn(t)}),h=[],a=[],0<o&&(s=kn.sliceBezier2Both(r,0,o),o=[t.coords[0],new Gn(s[1]),e.coords[0]],4===c&&o.splice(2,0,new Gn(s[2])),h.push(new Yn(o,t.belong))),h.push(new Yn(_,t.belong)),n<1&&(s=kn.sliceBezier2Both(r,n,1),o=[e.coords[u-1],new Gn(s[1]),t.coords[c-1]],4===c&&o.splice(2,0,new Gn(s[2])),h.push(new Yn(o,t.belong))),0<f&&(r=kn.sliceBezier2Both(i,0,f),n=[e.coords[0],new Gn(r[1]),t.coords[0]],4===u&&n.splice(2,0,new Gn(r[2])),a.push(new Yn(n,e.belong))),a.push(new Yn(_,e.belong)),l<1&&(s=kn.sliceBezier2Both(i,l,1),o=[t.coords[c-1],new Gn(s[1]),e.coords[u-1]],4===u&&o.splice(2,0,new Gn(s[2])),a.push(new Yn(o,e.belong))),{ra:h,rb:a}}}function ca(t,e,r,i,n,a){for(var o=0,c=e.length;o<c;o++){var s=e[o];if(s!==r){var l=s.length,h=s[0],l=s[l-1],h=h.coords[0],l=l.coords,l=l[l.length-1];if(n.equal(h))return s=(a?_a(r):r).concat(s),e[o]=s,e.splice(i,1),ua(t,e,s,o),0;if(n.equal(l))return s=a?s.concat(r):s.concat(_a(r)),e[o]=s,e.splice(i,1),ua(t,e,s,o),0}}ua(t,e,r,i)}function ua(t,e,r,i){var n=r.length,a=r[0],n=r[n-1],a=a.coords[0],n=n.coords,n=n[n.length-1];a.equal(n)&&(e.splice(i,1),t.push(r))}function _a(t){return t.forEach(function(t){return t.reverse()}),t.reverse()}function fa(c){var t=[],e=[];c.sort(function(t,e){return e.otherFill[0]&&e.otherFill[1]?1:-1});t:for(;c.length;){for(var r=c.shift(),u=r.coords,_=u.length,i=u[0],n=u[_-1],a=void 0,o=0,f=t.length;o<f;o++){var s=t[o],l=s.length,d=s[0],l=s[l-1],d=d.coords[0],h=l.coords,h=h[h.length-1];if(i.equal(h)){if(r.belong!==l.belong){s.push(r),ca(e,t,s,o,n,!1);continue t}a=a||{i:o,t:0}}else if(i.equal(d)){if(r.belong!==l.belong){r.reverse(),s.unshift(r),ca(e,t,s,o,n,!0);continue t}a=a||{i:o,t:1}}else if(n.equal(h)){if(r.belong!==l.belong){r.reverse(),s.push(r),ca(e,t,s,o,i,!1);continue t}a=a||{i:o,t:2}}else if(n.equal(d)){if(r.belong!==l.belong){s.unshift(r),ca(e,t,s,o,i,!0);continue t}a=a||{i:o,t:3}}}a?0===a.t?(t[a.i].push(r),ca(e,t,t[a.i],a.i,n,!1)):1===a.t?(r.reverse(),t[a.i].unshift(r),ca(e,t,t[a.i],a.i,n,!0)):2===a.t?(r.reverse(),t[a.i].push(r),ca(e,t,t[a.i],a.i,i,!1)):3===a.t&&(t[a.i].unshift(r),ca(e,t,t[a.i],a.i,i,!0)):t.push([r])}var x=e.map(function(t){var n,a,o,s,l,h,e=!0,c=0;t.forEach(function(t,e){var r=t.coords,i=r.length,t=t.bbox;h=e?(o=Math.min(o,t[0]),s=Math.min(s,t[1]),l=Math.max(l,t[2]),Math.max(h,t[3])):(o=t[0],s=t[1],l=t[2],t[3]),2===i?(c+=e?n*r[1].y-a*r[1].x:r[0].x*r[1].y-r[0].y*r[1].x,n=r[1].x,a=r[1].y):3===i?(c+=e?n*r[2].y-a*r[2].x:r[0].x*r[1].y-r[0].y*r[2].x,n=r[2].x,a=r[2].y):4===i&&(c+=e?n*r[3].y-a*r[3].x:r[0].x*r[3].y-r[0].y*r[3].x,n=r[3].x,a=r[3].y)});var r=t[0].coords;return{list:t,clockwise:e=(c+=n*r[0].y-a*r[0].x)<0?!1:e,bbox:[o,s,l,h],area:(l-o)*(h-s)}});return x.forEach(function(t){if(!t.checked){for(var c=t.bbox,e=[t],r=0,u=x.length;r<u;r++){var i=x[r];i!==t&&(te.isRectsInside(c,i.bbox,!0)||te.isRectsInside(i.bbox,c,!0))&&e.push(i)}if(1<e.length){e.sort(function(t,e){return t.area-e.area});for(var n=1,_=e.length;n<_;n++){var f=e[n];if(f.checked){for(var a=f.clockwise,d=n-1;0<=d;d--){var o=e[d];o.checked=!0,o.clockwise===a&&(_a(o.list),o.clockwise=!a),a=!a}for(var a=f.clockwise,y=n+1;y<_;y++){var s=e[y];s.checked=!0,s.clockwise===a&&(_a(s.list),s.clockwise=!a),a=!a}return}}var l=e[0].clockwise;e[0].checked=!0;for(var p=1,g=e.length;p<g;p++){var h=e[p];h.checked=!0,h.clockwise===l&&(_a(h.list),h.clockwise=!l),l=!l}}}}),x.map(function(t){var e=t.list.map(function(t){var t=t.coords,e=t.length;return 2===e?[t[1].x,t[1].y]:3===e?[t[1].x,t[1].y,t[2].x,t[2].y]:4===e?[t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]:void 0}),t=t.list[0].coords;return e.unshift([t[0].x,t[0].y]),e})}function da(t){return t&&Array.isArray(t)&&Array.isArray(t[0])?Array.isArray(t[0][0])?t:[t]:[]}function ya(t,e){var r,i,n=t instanceof Zn,a=e instanceof Zn;return n?r=t.reset(0):(r=new Zn(da(t),0)).selfIntersect(),a?i=e.reset(1):(i=new Zn(da(e),1)).selfIntersect(),Zn.intersect2(r,i,n,a),Zn.annotate2(r,i,n,a),[r,i]}var pa=[0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,0],ga=[0,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0],xa=[0,0,1,0,0,0,1,0,1,1,0,1,0,0,1,0],ma=[0,1,0,0,1,0,1,1,0,1,0,0,0,1,0,0],va=[0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0];function Ea(t,a){var o=[],s={};return t.forEach(function(t){var e=t.belong,r=t.myFill,i=t.otherFill;if(t.otherCoincide){var n=t.toHash();if(s.hasOwnProperty(n))return;s[n]=!0}n=e?(i[0]?8:0)+(r[0]?4:0)+(i[1]?2:0)+(r[1]?1:0):(r[0]?8:0)+(i[0]?4:0)+(r[1]?2:0)+(i[1]?1:0),a[n]&&o.push(t)}),o}var Br={intersect:function(t,e,r){t=Bt(ya(t,e),2),e=t[0],t=t[1],t=Ea(e.segments.concat(t.segments),pa);return r?(e.segments=t,e):fa(t)},union:function(t,e,r){t=Bt(ya(t,e),2),e=t[0],t=t[1],t=Ea(e.segments.concat(t.segments),ga);return r?(e.segments=t,e):fa(t)},subtract:function(t,e,r){t=Bt(ya(t,e),2),e=t[0],t=t[1],t=Ea(e.segments.concat(t.segments),xa);return r?(e.segments=t,e):fa(t)},subtractRev:function(t,e,r){t=Bt(ya(t,e),2),e=t[0],t=t[1],t=Ea(e.segments.concat(t.segments),ma);return r?(e.segments=t,e):fa(t)},xor:function(t,e,r){t=Bt(ya(t,e),2),e=t[0],t=t[1],t=Ea(e.segments.concat(t.segments),va);return r?(e.segments=t,e):fa(t)},chain:function(t){return t instanceof Zn?fa(t.segments):da(t)}},Hr={matrix:Ht,tar:e,vector:Gt,equation:Mn,geom:te,bezier:kn,isec:Hn,booleanOperations:Br},fi=T.STYLE_KEY,ba=fi.TRANSLATE_X,Ta=fi.TRANSLATE_Y,Aa=fi.TRANSLATE_Z,Ma=fi.SCALE_X,Ra=fi.SCALE_Y,Sa=fi.SCALE_Z,Oa=fi.SKEW_X,Ca=fi.SKEW_Y,Ia=fi.ROTATE_X,wa=fi.ROTATE_Y,ka=fi.ROTATE_Z,Da=fi.ROTATE_3D,La=fi.PERSPECTIVE,Fa=fi.MATRIX,Na=fi.FONT_SIZE,Pa=r.PERCENT,Ba=r.REM,Ha=r.VW,Ga=r.VH,Ya=r.VMAX,Wa=r.VMIN,di=Hr.matrix,Ua=di.identity,Xa=di.multiply,za=di.isE,Va=Hr.geom.d2r;function Ka(t,e,r,i){n=e,a=r,o=i,s=[],t.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];s.push([e,function(t,e,r,i,n){if(t===ba||t===Aa){if(e[1]===Pa)return e[0]*r*.01;if(e[1]===Ba)return e[0]*n.computedStyle[Na];if(e[1]===Ha)return e[0]*n.width*.01;if(e[1]===Ga)return e[0]*n.height*.01;if(e[1]===Ya)return e[0]*Math.max(n.width,n.height)*.01;if(e[1]===Wa)return e[0]*Math.min(n.width,n.height)*.01}else if(t===Ta){if(e[1]===Pa)return e[0]*i*.01;if(e[1]===Ba)return e[0]*n.computedStyle[Na];if(e[1]===Ha)return e[0]*n.width*.01;if(e[1]===Ga)return e[0]*n.height*.01;if(e[1]===Ya)return e[0]*Math.max(n.width,n.height)*.01;if(e[1]===Wa)return e[0]*Math.min(n.width,n.height)*.01}else{if(t===Fa)return e;if(t===Da)return e}return e[0]}(e,t,n,a,o)])});var n,a,o,s,e=s,p=Ua();return e.forEach(function(t){var e,r,i,n,a,o,s,l,c,u,_,f,d,t=Bt(t,2),h=t[0],t=t[1],y=Ua();e=y,t=t,(h=h)===ba?e[12]=t:h===Ta?e[13]=t:h===Aa?e[14]=t:h===Ma?e[0]=t:h===Ra?e[5]=t:h===Sa?e[10]=t:h===Oa?(t=Va(t),e[4]=Math.tan(t)):h===Ca?(t=Va(t),e[1]=Math.tan(t)):h===Ia?(t=Va(t),r=Math.sin(t),o=Math.cos(t),e[5]=e[10]=o,e[6]=r,e[9]=-r):h===wa?(t=Va(t),o=Math.sin(t),r=Math.cos(t),e[0]=e[10]=r,e[8]=o,e[2]=-o):h===ka?(t=Va(t),r=Math.sin(t),o=Math.cos(t),e[0]=e[5]=o,e[1]=r,e[4]=-r):h===Da?(r=(o=Bt(t,4))[0],i=o[1],n=o[2],o=o[3],o=Va(o[0]),a=Math.sin(o),o=Math.cos(o),!r||i||n?!i||r||n?!n||r||i?(1!==(l=Math.sqrt(r*r+i*i+n*n))&&(r*=l=1/l,i*=l,n*=l),l=r*i,c=i*n,u=n*r,_=r*a,f=i*a,d=n*a,e[0]=r*r*(s=1-o)+o,e[1]=l*s+d,e[2]=u*s-f,e[3]=0,e[4]=l*s-d,e[5]=i*i*s+o,e[6]=c*s+_,e[7]=0,e[8]=u*s+f,e[9]=c*s-_,e[10]=n*n*s+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(n<0&&(a=-a),e[0]=o,e[4]=-a,e[1]=a,e[5]=o):(i<0&&(a=-a),e[0]=o,e[8]=a,e[2]=-a,e[10]=o):(r<0&&(a=-a),e[5]=o,e[9]=-a,e[6]=a,e[10]=o)):h===La&&0<t?(t=Math.max(t,1),e[11]=-1/t):h===Fa&&At.assignMatrix(e,t),p=Xa(p,y)}),p}function ja(t,e){var e=Bt(e,2),r=e[0],e=e[1],i=t.slice(0);return 0===r&&0===e||za(t)?i:(i=Xa([1,0,0,0,0,1,0,0,0,0,1,0,r,e,0,1],i),Xa(i,[1,0,0,0,0,1,0,0,0,0,1,0,-r,-e,0,1]))}var $a={calMatrix:Ka,calMatrixByPerspective:function(t,e){return t=za(e)?t:Xa(e,t)},calPerspectiveMatrix:function(t,e){var r;if(t&&0<t)return r=Ua(),t=Math.max(t,1),r[11]=-1/t,e=(t=Bt(e,2))[0],t=t[1],(e||t)&&(r=Xa([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=Xa(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r},calMatrixByOrigin:ja,calMatrixWithOrigin:function(t,e,r,i){return ja(Ka(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}},yi=T.STYLE_KEY,qa=yi.COLOR,Za=yi.FONT_WEIGHT,Ja=yi.FONT_FAMILY,Qa=yi.FONT_SIZE,to=yi.FONT_STYLE,eo=yi.LETTER_SPACING,ro=yi.TEXT_STROKE_COLOR,io=yi.TEXT_STROKE_WIDTH,no=yi.TEXT_STROKE_OVER,ao=yi.ROTATE_Z,oo=yi.LINE_HEIGHT,so=r.DEG,lo=et.CANVAS,ho=et.SVG,co=et.WEBGL,uo=/(?:[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u02EA\u02EB\u1100-\u11FF\u1401-\u167F\u18B0-\u18FF\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2065\u20DD-\u20E0\u20E2-\u20E4\u2100\u2101\u2103-\u2109\u210F\u2113\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u212E\u2135-\u213F\u2145-\u214A\u214C\u214D\u214F-\u2189\u218C-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2B97\u2BB8-\u2BD1\u2BD3-\u2BEB\u2BF0-\u2BFF\u2E50\u2E51\u2E80-\u3007\u3012\u3013\u3020-\u302F\u3031-\u309F\u30A1-\u30FB\u30FD-\uA4CF\uA960-\uA97F\uAC00-\uD7FF\uE000-\uFAFF\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF01-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7\uFFF0-\uFFF8\uFFFC\uFFFD]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|[\uD80C\uD81C-\uD822\uD83C\uD83D\uD840-\uD87E\uD880-\uD8BE][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC3F]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFFF]|\uD823[\uDC00-\uDD7F]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFF]|\uD833[\uDF00-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83E[\uDD00-\uDEFF]|[\uD87F\uD8BF][\uDC00-\uDFFD])/,_o=function(){function l(t,e,r,i,n,a,o){var s=7<arguments.length&&void 0!==arguments[7]&&arguments[7];_(this,l),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,s?(this.__width=a,this.__height=n):(this.__width=n,this.__height=a),this.__content=o,this.__virtualDom={},this.__parentLineBox=null,this.__isVertical=s}return f(l,[{key:"render",value:function(c,t,e,u,_,f){var d=this.content,r=this.x,i=this.y,n=this.parent,y=this.width,a=this.height,p=this.isUpright,g=n.ox,x=n.oy,n=n.parent,m=mn.getBaseline(e),v=mn.getVerticalBaseline(e),E=(p?r+=v:i+=m,r+=g+_,i+=x+f,p?(this.__endX=r,this.__endY=i+a):(this.__endX=r+y,this.__endY=i),e[eo]),b=e[io],o=e[ro],T=e[Qa],g=e[oo],A=0,M=d.length;if(c===lo||c===co){var R,s=n.matrixEvent,S=0,O=0,l=(p&&(R=[[ao,[90,so]]],S=.6*v,O=.2*v),"fill"===e[no]);if(E)for(;A<M;A++){var C,I=d.charAt(A);p?(uo.test(I)?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),l&&t.fillText(I,r-S,i-O),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(I,r-S,i-O),l||t.fillText(I,r-S,i-O)):(C=$a.calMatrixWithOrigin(R,[r,i],0,0),C=Ht.multiply(s,C),t.setTransform(C[0],C[1],C[4],C[5],C[12],C[13]),l&&t.fillText(I,r,i),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(I,r,i),l||t.fillText(I,r,i)),i+=t.measureText(I).width+E):(l&&t.fillText(I,r,i),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(I,r,i),l||t.fillText(I,r,i),r+=t.measureText(I).width+E)}else if(p){for(var w=uo.test(d.charAt(0)),k=0,h=0,D=d.length,L=1;L<D;L++){var F,N,P=uo.test(d.charAt(L));P!==w?(w?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),F=d.slice(k,L),l&&t.fillText(F,r-S,i+h+m-O),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(F,r-S,i+h+m-O),l||t.fillText(F,r-S,i+h+m-O),h+=T):(F=$a.calMatrixWithOrigin(R,[r,i+h],0,0),F=Ht.multiply(s,F),t.setTransform(F[0],F[1],F[4],F[5],F[12],F[13]),N=d.slice(k,L),l&&t.fillText(N,r,i+h),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(N,r,i+h),l||t.fillText(N,r,i+h),h+=t.measureText(N).width),k=L,w=!w):P&&(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),N=d.slice(k,L),l&&t.fillText(N,r-S,i+h+m-O),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(N,r-S,i+h+m-O),l||t.fillText(N,r-S,i+h+m-O),h+=T,k=L)}k<D&&(x=d.slice(k,D),w?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),l&&t.fillText(x,r-S,i+h+m-O),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(x,r-S,i+h+m-O),l||t.fillText(x,r-S,i+h+m-O)):(a=$a.calMatrixWithOrigin(R,[r,i+h],0,0),a=Ht.multiply(s,a),t.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]),l&&t.fillText(x,r,i+h),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(x,r,i+h),l||t.fillText(x,r,i+h)))}else l&&t.fillText(d,r,i),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(d,r,i),l||t.fillText(d,r,i)}else c===ho&&(p&&(r+=.5*g-v),a=[["x",r],["y",i],["fill",y=(y=u[qa]).k?n.__gradient(c,t,n.__bx1,n.__by1,n.__bx2,n.__by2,y,_,f).v:y],["font-family",e[Ja]],["font-weight",e[Za]],["font-style",e[to]],["font-size",e[Qa]+"px"]],b&&(0<o[3]||3===o.length||o.k)&&((x=u[ro]).k&&(x=n.__gradient(c,t,n.__bx1,n.__by1,n.__bx2,n.__by2,x,_,f).v),a.push(["stroke",x]),a.push(["stroke-width",e[io]])),E&&a.push(["letter-spacing",E]),p&&a.push(["writing-mode","vertical-lr"]),this.__virtualDom={type:"item",tagName:"text",props:a,content:At.encodeHtml(d)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"offsetWidth",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"offsetHeight",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseline",get:function(){return this.parent.baseline}},{key:"verticalBaseline",get:function(){return this.parent.verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}}]),l}(),pi=T.STYLE_KEY,fo=pi.FONT_SIZE,yo=pi.FONT_FAMILY,po=pi.FONT_WEIGHT,go=pi.FONT_STYLE,xo=pi.COLOR,mo=pi.LINE_HEIGHT,vo=pi.ROTATE_Z,Eo=T.NODE_KEY.NODE_VIRTUAL_DOM,bo=r.DEG,To=et.CANVAS,Ao=et.SVG,Mo=et.WEBGL,Ro=function(){d(s,w);var o=y(s);function s(t,e,r,i,n){var a;return _(this,s),(a=o.call(this)).__x=a.__sx1=t,a.__y=a.__sy1=e,a.__width=r,(a.__parent=a.__domParent=i).__ellipsis=l(a),a.__parentLineBox=null,a.__baseline=mn.getBaseline(i.computedStyle),a.__isVertical=n,a}return f(s,[{key:"render",value:function(h,c,t,u){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,_=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.x,i=this.y,n=this.parent,a=this.isUpright,f=n.ox,o=n.oy,s=n.computedStyle,d=n.cacheStyle[xo],l=mn.getBaseline(s),y=mn.getVerticalBaseline(s);a?r+=y:i+=l,r+=f+e,i+=o+_,h===To||h===Mo?(l=mn.setFontStyle(s),t.font!==l&&(t.font=l),t.fillStyle!==d&&(t.fillStyle=d),a&&(f=n.matrixEvent,e=$a.calMatrixWithOrigin([[vo,[90,bo]]],[r,i],0,0),e=Ht.multiply(f,e),t.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])),t.fillText("…",r,i)):h===Ao&&(a&&(r+=.5*s[mo]-y),o=[["x",r],["y",i],["fill",d],["font-family",s[yo]],["font-weight",s[po]],["font-style",s[go]],["font-size",s[fo]+"px"]],a&&o.push(["writing-mode","vertical-lr"]),_=this.__config[Eo]=this.__virtualDom={type:"text",children:[{type:"item",tagName:"text",props:o,content:"…"}]},n.virtualDom.children.push(_))}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"isEllipsis",get:function(){return!0}}]),s}(),So=[8,16,32,64,128,256,512,1024,2048,4096,8192],Oo=[128,64,32,16,8,4,2,1,1,1,1],Co=So[So.length-1],Io={},wo=0,ko=function(){function u(t,e){_(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;t=this.__canvas=Mt.getCacheCanvas(t,t,null,e);t&&(this.__offscreen=t),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=wo++,this.__update=!1,this.time=0}return f(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var n=r*t+i;if(e[n])return e[n]=0,this.__free--,n}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(Co<t)){for(var e=So[0],r=Oo[0],i=0,n=So.length;i<n&&(e=So[i],r=Oo[i],!(So[i]>=t));i++);for(var a,o=Io[e]=Io[e]||[],s=0,l=o.length;s<l;s++){var h=o[s];if(h.free){a=h;break}}if(!a){if(!(a=new u(e,r)).offscreen)return void Mt.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:So,NUMBER:Oo}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(So=t.SIZE,Oo=t.NUMBER,Co=So[So.length-1])}},{key:"MAX",get:function(){return Co}},{key:"genUuid",value:function(){return wo++}}]),u}(),Si=T.STYLE_KEY,Do=Si.TRANSFORM_ORIGIN,Lo=Si.TRANSFORM,Fo=mn.spreadFilter;function No(t,e,r){var i=t.size,n=t.sx1,a=t.sy1,o=t.bbox,s=(r=r||o)[2]-r[0],l=r[3]-r[1],h=r[0]-o[0],o=r[1]-o[1],e=Mt.getCacheCanvas(s,l,null,e);return e.x=0,e.y=0,e.bbox=r,e.size=i,e.sx1=n,e.sy1=a,e.dx=-r[0],e.dy=-r[1],e.dbx=t.dbx-h,e.dby=t.dby-o,e.width=s,e.height=l,e}var Po=function(){function y(t,e,r,i,n,a,o){_(this,y),this.__init(t,e,r,i,n,a,o)}return f(y,[{key:"__init",value:function(t,e,r,i,n,a,o){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=n;t=Bt(i.getCoords(n),2),e=t[0],r=t[1];this.__x=e,this.__y=r,this.__appendData(a,o),this.__isNew=!0,i.canvas&&(this.__enabled=!0,(n=i.ctx).setTransform(1,0,0,1,0,0),n.globalAlpha=1,Z.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,n,a,o;At.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),(o=ko.getInstance(Math.max(i,n)))?(a=o.page,o=o.pos,this.__init(i,n,t,a,o,e,r)):this.__enabled=!1)}},{key:"resetBbox",value:function(t){}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return ko.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),a=ko.getInstance(Math.max(i,n));if(a)return new y(i,n,t,a.page,a.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=t.x,c=t.y,u=t.size,_=t.canvas,f=t.sx1,d=t.sy1,i=t.width,n=t.height,a=t.bbox,o=a[0]-(a=Fo(a,e))[0],s=a[2]-a[0],l=a[3]-a[1],h=Mt.getCacheCanvas(s,l,null,"filter");return h.ctx.filter=ne.canvasFilter(e),h.ctx.drawImage(_,r,c,i,n,o,o,i,n),h.ctx.filter="none",h.draw(),h.bbox=a,h.x=0,h.y=0,h.size=u,h.sx1=f,h.sy1=d,h.dx=-a[0],h.dy=-a[1],h.dbx=t.dbx+o,h.dby=t.dby+o,h.width=s,h.height=l,h}},{key:"genMask",value:function(t,e,r){for(var i=No(t,"mask1"),n=[],a=e.computedStyle,o=a[Lo],a=a[Do],s=e.next,l=s.isClip;s&&s.isMask;)n.push(s),s=s.next;var c=i.x,u=i.y,h=i.ctx,_=i.dbx,f=i.dby,d=(a[0]+=c+_+e.__sx1-t.sx1,a[1]+=u+f+e.__sy1-t.sy1,$a.calMatrixByOrigin(o,a));return n.forEach(function(t){r(t,i,d)}),h.setTransform(1,0,0,1,0,0),h.globalAlpha=1,h.globalCompositeOperation=l?"source-out":"source-in",y.drawCache(t,i),h.globalCompositeOperation="source-over",i.draw(h),i}},{key:"genOverflow",value:function(t,e){var r=t.bbox,i=e.__sx1,n=e.__sy1,a=e.clientWidth,e=e.clientHeight,o=i+a,s=n+e;if(r[0]<i||r[1]<n||r[2]>o||r[3]>s)return(i=(r=No(t,"overflow",[i,n,o,s])).ctx).setTransform(1,0,0,1,0,0),i.globalAlpha=1,y.drawCache(t,r),r.draw(i),i.globalCompositeOperation="destination-in",i.fillStyle="#FFF",i.beginPath(),i.rect(0,0,a,e),i.fill(),i.closePath(),i.globalCompositeOperation="source-over",r}},{key:"drawCache",value:function(t,e,r,i,n,a,o){var s=e.x,c=e.y,l=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,e=e.dby,d=t.x,y=t.y,p=t.canvas,h=t.sx1,g=t.sy1,x=t.dbx,m=t.dby,v=t.width,t=t.height,s=s+h-l+f-x,h=c+g-u+e-m;r&&i&&n&&(n[0]+=s,n[1]+=h,l=$a.calMatrixByOrigin(r,n),i=Ht.multiply(i,l),Ht.isE(a)||(i=Ht.multiply(a,i)),o&&(i=At.equalArr(i,o)?Ht.identity():(o=Ht.inverse(o),Ht.multiply(o,i))),_.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),_.drawImage(p,d,y,v,t,s,h,v,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var e=i.x,r=i.y,n=i.canvas,a=i.sx1,o=i.sy1,s=i.dbx,l=i.dby,h=i.width,i=i.height;t.drawImage(n,e,r,h,i,a-s,o-l,h,i)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),y}(),n=(a(Po,"NA",0),a(Po,"LOCAL",1),a(Po,"CHILD",2),a(Po,"SELF",3),T.STYLE_KEY),mi=T.STYLE_KEY,Bo=mi.TRANSLATE_X,Ho=mi.TRANSLATE_Y,Go=mi.TRANSLATE_Z,Yo=mi.OPACITY,Wo=mi.FILTER,Uo=mi.PERSPECTIVE,Xo=mi.PERSPECTIVE_ORIGIN,zo={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},Vo=(a(xi={},n.SCALE_X,!0),a(xi,n.SCALE_Y,!0),a(xi,n.SCALE_Z,!0),a(xi,n.ROTATE_X,!0),a(xi,n.ROTATE_Y,!0),a(xi,n.ROTATE_Z,!0),a(xi,n.SKEW_X,!0),a(xi,n.SKEW_Y,!0),a(xi,n.ROTATE_3D,!0),a(xi,n.TRANSFORM,!0),a(xi,n.TRANSFORM_ORIGIN,!0),xi),Ko=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Tr.isIgnore(t)?zo.NONE:t===Bo?zo.TRANSLATE_X:t===Ho?zo.TRANSLATE_Y:t===Go?zo.TRANSLATE_Z:Vo.hasOwnProperty(t)?zo.TRANSFORM:t===Yo?zo.OPACITY:t===Wo?zo.FILTER:t===Uo||t===Xo?zo.PERSPECTIVE:Tr.isRepaint(t)?zo.REPAINT:zo.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<zo.REFLOW},isRebuild:function(t){return zo.REBUILD<=t}},zo),bi=(Ko.TRANSFORMS=Vo,T.STYLE_KEY),jo=bi.DISPLAY,$o=bi.POSITION,qo=bi.LINE_HEIGHT,Zo=bi.FONT_SIZE,Jo=bi.FONT_FAMILY,Qo=bi.FONT_WEIGHT,ts=bi.COLOR,es=bi.VISIBILITY,rs=bi.LETTER_SPACING,is=bi.OVERFLOW,ns=bi.WHITE_SPACE,as=bi.TEXT_OVERFLOW,os=bi.WIDTH,ss=bi.HEIGHT,ls=bi.TEXT_STROKE_COLOR,hs=bi.TEXT_STROKE_WIDTH,cs=bi.MARGIN_TOP,us=bi.MARGIN_BOTTOM,_s=bi.MARGIN_LEFT,fs=bi.MARGIN_RIGHT,ds=bi.PADDING_TOP,ys=bi.PADDING_BOTTOM,ps=bi.PADDING_LEFT,gs=bi.PADDING_RIGHT,xs=bi.BORDER_TOP_WIDTH,ms=bi.BORDER_BOTTOM_WIDTH,vs=bi.BORDER_LEFT_WIDTH,Es=bi.BORDER_RIGHT_WIDTH,bs=bi.FILTER,Ai=T.NODE_KEY,Ts=Ai.NODE_CACHE,As=Ai.NODE_LIMIT_CACHE,Ms=Ai.NODE_DOM_PARENT,Rs=Ai.NODE_MATRIX_EVENT,Ss=Ai.NODE_OPACITY,Os=Ai.NODE_VIRTUAL_DOM,t=T.UPDATE_KEY,Cs=t.UPDATE_NODE,Is=t.UPDATE_FOCUS,ws=t.UPDATE_CONFIG,ks=T.ELLIPSIS,Ds=r.AUTO,Ls=et.CANVAS,Fs=et.SVG,Ns=et.WEBGL;function Ps(c,t,e,r,u,i,_,f,d,y,p,g){if(r<=e)return[0,0,!1];var n=e,a=r,x=0,o=!1;if(p&&-1<[Ls,Ns].indexOf(t)){for(var m=0;n<a;n++){var v=c.measureText(u.charAt(n)).width+p;if(i+1e-10<m+v){o=!0;break}m+=v}return[n-e,m,o||i+1e-10<m]}var s=Math.round(i/_);for(s<=0?s=1:r-e<s&&(s=r-e);n<a;){var l=void 0,h=u.slice(e,e+s);if(t===Ls||t===Ns?l=c.measureText(h).width:t===Fs&&(l=Mt.measureTextSync(h,f,d,y,g)),p&&(l+=s*p),l===i){x=i,o=!0;break}if(i+1e-10<l){if(o=!0,1===s){x=l;break}if(n===a-1||n-e==s-1){s=n-e;break}a=s+e-1,h=Math.round((l-i)/_);(s-=h=h<=0?1:h)<n-e&&(s=n-e)}else{if(x=l,s===r-e)break;n=s+e,h=Math.round((i-l)/_);a-e<(s+=h=h<=0?1:h)&&(s=a-e)}}return[s,x,o]}function Bs(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}var Hs=function(){d(i,w);var r=y(i);function i(t){var e;return _(this,i),(e=r.call(this)).__content=At.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidth=0,e.__textWidth=0,e.__bp=null,e.__widthHash={},e}return f(i,[{key:"__layout",value:function(t){var c=this.__config[Ts],e=(c&&c.release(),t.x),r=t.y,c=t.w,u=t.h,i=t.lx,_=void 0===i?e:i,i=t.ly,f=void 0===i?r:i,d=t.lineBoxManager,i=t.endSpace,n=void 0===i?0:i,i=t.lineClamp,y=void 0===i?0:i,i=t.lineClampCount,p=void 0===i?0:i,i=t.isUpright,a=void 0!==i&&i,i=(this.__x=this.__sx=this.__sx1=e,this.__y=this.__sy=this.__sy1=r,this.isDestroyed),g=this.content,o=this.computedStyle,x=this.textBoxes,m=this.root;if(x.splice(0),this.__config[As]=!1,i||"none"===o[jo]||!g||y&&y<=p)return p;for(var s=this.__ox=this.__oy=0,v=g.length,E=0,b=o[qo],T=o[rs],i=o[ns],A=o[Zo],M=o[Qo],R=o[Jo],S=a?u:c,O=a?r-f:e-_,C=this.domParent;"inline"===C.computedStyle[jo];)C=C.domParent;var I,u=(this.__bp=C).computedStyle[as],w=m.renderMode,k=(w!==Ls&&w!==Ns||((I=(w===Ns?Mt.getFontCanvas():m).ctx).font=mn.setFontStyle(o)),.8*A+T),l=0;if("nowrap"===i){var D,L,c=this.textWidth,m=C.computedStyle,i=m[$o],m=m[is],F=C.currentStyle[a?ss:os];(D="hidden"===m?("absolute"!==i||F[1]!==Ds)&&S+1e-10-O-n<c:D)&&"ellipsis"===u?(L=Bt(this.__lineBack(I,w,s,v,g,S-n-O,k,e,r,E,n,b,x,d,R,A,M,T,a),1)[0],l++,a?e=L:r=L):(m=new _o(this,x.length,e,r,c,b,g,a),x.push(m),d.addItem(m,!1),a?e+=b:r+=b,D&&l++),E=c}else{for(;s<v;){var h=s?S:S-O;y&&y-1<=l+p&&(h-=n);var N=Bt(Ps(I,w,s,v,g,h,k,R,A,M,T),3),P=N[0],B=N[1],N=N[2];if(y&&N&&y-1<=l+p&&s+P<v){var H=Bt(this.__lineBack(I,w,s,s+P,g,h-n,k,l?_:e,r,E,n,b,x,d,R,A,M,T,a),2);L=H[0],E=H[1],l++,a?e=L:r=L;break}if(s+P===v&&n&&h+1e-10<B+n&&1<P){H=Bt(Ps(I,w,s,v,g,h-n,k,R,A,M,T),3),P=H[0],B=H[1],N=H[2];if(y&&N&&y-1<=l+p){h=Bt(this.__lineBack(I,w,s,s+P,g,h-n,k,l?_:e,r,E,n,b,x,d,R,A,M,T,a),2);L=h[0],E=h[1],l++,a?e=L:r=L;break}}E=Math.max(E,B),h=new _o(this,x.length,l&&!a?_:e,l&&a?f:r,B,b,g.slice(s,s+P),a);x.push(h),d.addItem(h,N),a?e+=Math.max(b,d.verticalLineHeight):r+=Math.max(b,d.lineHeight),s+=P,N&&l++}l&&(a?this.__y=this.__sy1=f:this.__x=this.__sx1=_)}return a?(this.__width=e-t.x,this.__height=E,this.__verticalBaseline=mn.getVerticalBaseline(o)):(this.__width=E,this.__height=r-t.y,this.__baseline=mn.getBaseline(o)),p+l}},{key:"__layoutNone",value:function(){this.__width=this.__height=this.__baseline=this.__verticalBaseline=0,this.__textBoxes.splice(0)}},{key:"__lineBack",value:function(t,c,u,_,f,e,d,r,i,y,p,g,x,n,m,v,E,b,a){var T=this.__bp,A=T.computedStyle,o=c===Ls||c===Ns?(M=mn.setFontStyle(A),t.font!==M&&(t.font=M),t.measureText(ks).width):Mt.measureTextSync(ks,A[Jo],A[Zo],A[Qo]);c!==Ls&&c!==Ns||(M=mn.setFontStyle(this.computedStyle),t.font!==M&&(t.font=M));var M=Bt(Ps(t,c,u,_,f,e-o-p,d,m,v,E,b),2),_=M[0],m=M[1];if(e+1e-10-p<m+o){var R=n.lineBox;if(!n.isNewLine&&R&&R.size)for(var S=R.list,O=S.length-1;0<=O;O--){var C=S[O];if(C instanceof _o){var I,s,w,k=C.content,D=C.width,L=C.height,F=C.parent;if(!O||D+o+1e-10+p<=e)return h=k.length,I=(s=F.computedStyle)[qo],B=s[rs],w=s[Zo],P=s[Qo],s=s[Jo],c!==Ls&&c!==Ns||(t.font=mn.setFontStyle(F.computedStyle)),h=(F=Bt(Ps(t,c,0,h,k,e-o+D-p,d,s,w,P,B),2))[0],s=F[1],h!==k.length&&(C.__content=k.slice(0,h),a?(i-=L-s,C.__height=s):(r-=D-s,C.__width=s)),R.__resetLb(A[qo],a?mn.getVerticalBaseline(A):mn.getBaseline(A)),w=a?new Ro(r,i+s+p,o,T,a):new Ro(r+s+p,i,o,T,a),n.addItem(w,!0),a?r+=Math.max(I,n.verticalLineHeight):i+=Math.max(I,n.lineHeight),[i,y=Math.max(y,s+o)];var N=S.pop(),P=(a?(e+=L,i-=L):(e+=D,r-=D),N.parent.textBoxes),B=P.indexOf(N),H=(-1<B&&P.splice(B,1),N.parent.parent),G=S[S.length-1];for(G instanceof _o&&(G=G.parent.parent);H!==T&&H!==G;){var l=H.contentBoxList||[],Y=l.indexOf(N),l=(-1<Y&&l.splice(Y,1),H.computedStyle);a?(i-=Y=l[cs]+l[us]+l[ds]+l[ys]+l[xs]+l[ms],e+=Y):(r-=Y=l[_s]+l[fs]+l[ps]+l[gs]+l[vs]+l[Es],e+=Y),H.__layoutNone(),H=H.domParent}F=G.contentBoxList||[],k=F.indexOf(N);-1<k&&F.splice(k,1)}else{if(!O)break;var h=S.pop();a?i-=h.outerHeight:r-=h.outerWidth,e+=a?h.outerHeight:h.outerWidth,h.__layoutNone()}}}v=new _o(this,x.length,r,i,m,g,f.slice(u,u+_),a),x.push(v),n.addItem(v,!1),E=a?new Ro(r,i+m+p,o,T,a):new Ro(r+m+p,i,o,T,a);return n.addItem(E,!0),a?r+=Math.max(g,n.verticalLineHeight):i+=Math.max(g,n.lineHeight),[a?r:i,y=Math.max(y,m+o)]}},{key:"__backtrack",value:function(c,u,_,f,t,d,y,p,g,x,e){for(var r=_.list,m=r.length-1;0<=m;m--){var i=r[m];if(i instanceof _o){var n,v,a=i.content,E=i.width,b=i.height,o=i.parent;if(!m||E+y+1e-10+d<=t)return h=a.length,M=(n=o.computedStyle)[rs],v=n[Zo],A=n[Qo],n=n[Jo],x!==Ls&&x!==Ns||(g.font=mn.setFontStyle(o.computedStyle)),h=(o=Bt(Ps(g,x,0,h,a,t-y-d+E,.8*v+M,n,v,A,M),2))[0],n=o[1],h!==a.length&&(i.__content=a.slice(0,h),e?i.__height=n:i.__width=n),_.__resetLb(p[qo],e?mn.getVerticalBaseline(p):mn.getBaseline(p)),v=e?new Ro(i.x,i.y+n+d,y,c,e):new Ro(i.x+n+d,i.y,y,c,e),void u.addItem(v,!0);var T=r.pop(),A=(t+=e?b:E,T.parent.textBoxes),M=A.indexOf(T),s=(-1<M&&A.splice(M,1),T.parent.parent),R=r[r.length-1];for(R instanceof _o&&(R=R.parent.parent);s!==c&&s!==R;){var l=s.contentBoxList||[],S=l.indexOf(T),l=(-1<S&&l.splice(S,1),s.computedStyle);t+=e?l[cs]+l[us]+l[ds]+l[ys]+l[xs]+l[ms]:l[_s]+l[fs]+l[ps]+l[gs]+l[vs]+l[Es],s.__layoutNone(),s=s.domParent}o=R.contentBoxList||[],a=o.indexOf(T);-1<a&&o.splice(a,1)}else{if(!m)break;var h=r.pop();t+=e?h.outerHeight:h.outerWidth,h.__layoutNone()}}}},{key:"__offsetX",value:function(e,t){N(F(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){N(F(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.firstCharWidth}},{key:"__inlineSize",value:function(r){var i,n;this.textBoxes.forEach(function(t,e){n=e?(i=Math.min(i,r?t.y:t.x),Math.max(n,(r?t.y:t.x)+t.width)):(i=r?t.y:t.x,(r?t.y:t.x)+t.width)}),r?(this.__y=i,this.__sy=this.__sy1=i+this.oy,this.__sx=this.__sx1,this.__height=n-i):(this.__x=i,this.__sx=this.__sx1=i+this.ox,this.__sy=this.__sy1,this.__width=n-i)}},{key:"render",value:function(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=this.isDestroyed,o=this.computedStyle,c=this.textBoxes,u=this.cacheStyle,s=this.__config;if(e===Fs&&(s[Os]=this.__virtualDom={type:"text",children:[]}),t>=Ko.REPAINT&&(this.__bbox=null,this.__filterBbox=null),!a&&"none"!==o[jo]&&"hidden"!==o[es]&&c.length){if(e===Ls||e===Ns){if(e===Ns)if(i){var t=this.sx,a=this.sy,i=this.bbox,l=s[Ts];if(l?l.reset(i,t,a):l=Po.getInstance(i,t,a),!l||!l.enabled)return void(s[As]=!0);(s[Ts]=l).__available=!0,r=l.ctx,n+=l.dx,h+=l.dy,s[As]=!1}else{i=this.root,t=Mt.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),a=(r=t.ctx,s[Ms].__config),l=a[Rs],i=a[Ss];r.setTransform(l[0],l[1],l[4],l[5],l[12],l[13]),r.globalAlpha=i}t=mn.setFontStyle(o),s=(r.font!==t&&(r.font=t),u[ts]),l=(s.k&&(s=(a=this.parent).__gradient(e,r,a.__bx1,a.__by1,a.__bx2,a.__by2,s,n,h).v),r.fillStyle!==s&&(r.fillStyle=s),o[hs]),i=(r.lineWidth!==l&&(r.lineWidth=l),u[ls]);i.k&&(i=(t=this.parent).__gradient(e,r,t.__bx1,t.__by1,t.__bx2,t.__by2,i,n,h).v),r.strokeStyle!==i&&(r.strokeStyle=i)}c.forEach(function(t){t.render(e,r,o,u,n,h)}),e===Fs&&(this.virtualDom.children=c.map(function(t){return t.virtualDom}))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(N(F(i.prototype),"__destroy",this).call(this),(t=this.__config[Ts])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,e){var n=this;i!==n.__content?(root.delRefreshTask(n.__task),root.addRefreshTask(n.__task={__before:function(){n.__content=i;var t={},e=n.domParent,r=(t[Cs]=e,t[Is]=Ko.REFLOW,t[ws]=e.__config,e.root);r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(t){At.isFunction(e)&&e(t)}})):At.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,a=r[Jo],o=r[Zo],c=r[Qo],u=r[rs],s=Bs(a,o,c,u),t=(t.hasOwnProperty(s)||(t[s]={}),t[s]);if(!t.hasOwnProperty("charWidth")){var l=0;if(i===Ls||i===Ns){(n=i===Ns?Mt.getFontCanvas().ctx:n).font=mn.setFontStyle(r);for(var h=0,_=e.length;h<_;h++)l=Math.max(l,n.measureText(e.charAt([h])).width)}else i===Fs&&(l=Mt.measureTextListMax(e,a,o,c));t.charWidth=l+u}return t.charWidth}},{key:"firstCharWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,a=r[Jo],o=r[Zo],s=r[Qo],l=r[rs],h=Bs(a,o,s,l),t=(t.hasOwnProperty(h)||(t[h]={}),t[h]);return t.hasOwnProperty("firstCharWidth")||(i===Ls||i===Ns?((n=i===Ns?Mt.getFontCanvas().ctx:n).font=mn.setFontStyle(r),t.firstCharWidth=n.measureText(e.charAt(0)).width+l):i===Fs&&(t.firstCharWidth=Mt.measureTextSync(e.charAt(0),a,o,s)+l)),t.firstCharWidth}},{key:"textWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,a=r[Jo],o=r[Zo],s=r[Qo],l=r[rs],h=Bs(a,o,s,l),t=(t.hasOwnProperty(h)||(t[h]={}),t[h]);return t.hasOwnProperty("textWidth")||(i===Ls||i===Ns?((n=i===Ns?Mt.getFontCanvas().ctx:n).font=mn.setFontStyle(r),t.textWidth=n.measureText(e).width+l*e.length):i===Fs&&(t.textWidth=Mt.measureTextSync(e,a,o,s)+l*e.length)),t.textWidth}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,n=this.computedStyle[hs];return[t-n,e-n,t+r+n,e+i+n]}},{key:"filterBbox",get:function(){var t,e;return this.__filterBbox||(t=this.bbox,e=this.computedStyle[bs],this.__filterBbox=mn.spreadFilter(t,e)),this.__filterBbox}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}(),Gs=(Hs.prototype.__renderByMask=Hs.prototype.render,k.TYPE_VD),Ys=k.TYPE_GM,Ws=k.TYPE_CP;function Us(t){if(Array.isArray(t))return t.map(Us);if(!t||-1===[Gs,Ys,Ws].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==Gs&&t.$$type!==Ys)t&&t.$$type===Ws?(r.push(t),i.lastText=null):At.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===Gs&&Us(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var Xs,zs,Vs,Ks,js,ur=T.NODE_KEY,$s=ur.NODE_DOM_PARENT,qs=ur.NODE_STYLE,Zs=ur.NODE_CURRENT_STYLE,Js=ur.NODE_COMPUTED_STYLE,Qs=ur.NODE_MATRIX,tl=ur.NODE_MATRIX_EVENT,el=k.TYPE_VD,rl=k.TYPE_GM,il=k.TYPE_CP;function nl(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return nl(t,e,r,i)});if(At.isObject(t)&&t.$$type){var n,a=t.tagName,o=t.props,s=t.children,c=t.klass,l=t.$$type,h=t.__inheritAnimate,u=t.__animateRecords;if(l===il&&t.__placeholder)return t.__placeholder;if(l===el){if("img"===a){if(n=new Vs(a,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else n=new zs(a,o);if("p"===a)i=!0;else if("div"===a&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?al(n,nl(s,e,r,i)):[],n.__children=s}else if(l===rl)At.isString(a)?n=new(Ks.getRegister(a))(a,o):a&&(n=new a("$",o));else{if(l!==il)return new Hs(t);(n=new c(o)).__tagName=a||n.__tagName}(t.vd=n).__json=t,u&&((n.__animateRecords=u).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),h&&(At.extendAnimate(h,n),delete t.__inheritAnimate),n.__root=e,n.__host=r,l===il&&n.__init();s=o.ref;return At.isString(s)&&s||At.isNumber(s)?r.ref[s]=n:At.isFunction(s)&&s(n),n}return new Hs(t)}function al(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){al(e,t,i)}):(r instanceof Xs||r instanceof js||r instanceof Hs)&&(r.__parent=e,r.__domParent=e,r instanceof Hs&&[qs,Zs,Js,Qs,tl].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[$s]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof js&&((t=r.shadowRoot)instanceof Hs&&(t.__parent=e,[qs,Zs,Js,Qs,tl].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[$s]=e))),r}var ol={ref:function(t){Xs=t.Xom,zs=t.Dom,Vs=t.Img,Ks=t.Geom,js=t.Component},initRoot:function(t,e){return t=Us({tagName:e.tagName,props:{},children:t,$$type:el}),e.__json=t,e.__host=e,t=nl(t.children,e,e),al(e,t)},initDom:function(t,e,r,i){return al(i,nl(t,e,r))},initCp:function(t,e,r){return At.isObject(t)?nl(t,e,r):new Hs(t)},initCp2:function(t,e,r,i){var n=new t.klass(t.props);return n.__tagName=t.tagName||n.__tagName,n.__root=e,n.__host=r,n.__json=t,n.__init(),al(i,n)},relation:al},sl=At.isFunction,ll=function(){function o(){_(this,o),this.__eHash={}}return f(o,[{key:"on",value:function(t,e){if(sl(e)){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else{this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,n){if(sl(n)){var a=this;if(o.__karasEventCb=n,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)a.once(i[t],n);else n&&a.on(i,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(a,e),a.off(i,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e||a[n].__karasEventCb===e){a.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)this.emit(t[n],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var l=o[s];sl(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--)for(var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o,i=(e.__eHash={},["on","once","off","emit"]),n=i.length-1;0<=n;n--){var a=i[n];e[a]=r[a]}}}]),o}(),hl=(a(ll,"REFRESH","refresh"),a(ll,"PAUSE","pause"),a(ll,"PLAY","play"),a(ll,"FRAME","frame"),a(ll,"FINISH","finish"),a(ll,"CANCEL","cancel"),a(ll,"BEGIN","begin"),a(ll,"END","end"),At.isNil),cl=At.isFunction,ul=At.clone,_l=At.extend,fl={};var dl=function(){d(a,ll);var r=y(a);function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _(this,a),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=At.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return f(a,[{key:"setState",value:function(t,e){var r=this,i=this;if(hl(t))t={};else{if(cl(t))return;if(0===Object.keys(t).length)return void(cl(e)&&e.call(i));var n=ul(i.state);t=_l(n,t)}var a,o,n=i.root;n&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],a=[],o=i.__task={__before:function(){a=i.__taskList.splice(0),function t(e){e.__hasCpUpdate||(e.__hasCpUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){a.forEach(function(t){cl(t)&&t.call(i)})}},n.addRefreshCp(o)):cl(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this,e=(this.__ref={},this.root),t=t||Us(this.render()),i=ol.initCp(t,e,this);if(this.__cd=t,!(i instanceof Hs))if(i instanceof w){var t=mn.normalize(this.props.style),n=Object.keys(t);_l(i.style,t,n),_l(i.currentStyle,t,n),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),i.listener[t]=e)})}else if(!(i instanceof a))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=i).__host=this;i instanceof a;)i.__hostRoot=this,i=(i.shadow.__host=i).shadow;((this.__shadowRoot=i).__hostRoot=this).__isMounted||(this.__isMounted=!0,cl(this.componentDidMount)&&e.once(ll.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){Mt.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,cl(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof Hs))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return fl}},{key:"getRegister",value:function(t){if(!t||!At.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!fl.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return fl[t]}},{key:"register",value:function(t,e){if(!(t&&At.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof a))throw new Error("Invalid param: Component register");if(a.hasRegister(t))throw new Error("Component has already register: ".concat(t));fl[t]=e}},{key:"hasRegister",value:function(t){return t&&fl.hasOwnProperty(t)}},{key:"delRegister",value:function(t){a.hasRegister(t)&&delete fl[t]}}]),a}(),Wr=(Object.keys(Tr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseline","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(dl.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__computeReflow","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","frameAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){dl.prototype[e]=function(){var t=this.shadowRoot;if(t&&cl(t[e]))return t[e].apply(t,arguments)}}),T.STYLE_KEY),yl=Wr.MARGIN_TOP,pl=Wr.MARGIN_LEFT,gl=Wr.MARGIN_RIGHT,xl=Wr.MARGIN_BOTTOM,ml=Wr.PADDING_TOP,vl=Wr.PADDING_LEFT,El=Wr.PADDING_RIGHT,bl=Wr.PADDING_BOTTOM,Tl=Wr.BORDER_TOP_WIDTH,Al=Wr.BORDER_LEFT_WIDTH,Ml=Wr.BORDER_RIGHT_WIDTH,Rl=Wr.BORDER_BOTTOM_WIDTH;var Sl={getInlineBox:function(t,e,c,u,r,i,n,_,a,f,d,o,y,p,g,x,m,v,E,b){for(var s,T,l,A,M,R,S,O,C,I=0,w=0,k=e?x+b:y+m,D=e?p+v:g+E,h=("paddingBox"===o?(I=e?x:y,w=e?p:g):"borderBox"===o&&(I=k,w=D),n=e?i.verticalBaseline-n:i.baseline-n,e?(s=i.x+n-I+a,T=u.y,M=i.x+n-k+a):(s=u.x,T=i.y+n-I+a,R=i.y+n-k+a),(u instanceof _o?u.parent:u).domParent);h!==t;)u===h.contentBoxList[0]&&(e?T-=(C=h.computedStyle)[yl]+C[ml]+C[Tl]:s-=(C=h.computedStyle)[pl]+C[vl]+C[Al]),h=h.domParent;for(e?(R=T,f&&(R-=y+m,"paddingBox"===o?T-=y:"borderBox"===o&&(T-=y+m)),l=i.x+n+_+w-a,S=i.x+n+_+D-a,A=r.y+r.outerHeight):(M=s,f&&(M-=x+b,"paddingBox"===o?s-=x:"borderBox"===o&&(s-=x+b)),l=r.x+r.outerWidth,A=i.y+n+_+w-a,O=i.y+n+_+D-a),h=(r instanceof _o?r.parent:r).domParent;h!==t;){var L=h.contentBoxList;r===L[L.length-1]&&(e?A+=(L=h.computedStyle)[xl]+L[bl]+L[Rl]:l+=(L=h.computedStyle)[gl]+L[El]+L[Ml]),h=h.domParent}return e?(O=A,d&&(O+=g+E,"paddingBox"===o?A+=g:"borderBox"===o&&(A+=g+E))):(S=l,d&&(S+=p+v,"paddingBox"===o?l+=p:"borderBox"===o&&(l+=p+v))),s+=t.ox,l+=t.ox,M+=t.ox,S+=t.ox,[s,T+=t.oy,l,A+=t.oy,M,R+=t.oy,S,O+=t.oy]},getInlineWidth:function(t,e,r){var i=0,n=e.length;e[n-1]instanceof Ro&&n--;for(var a=0;a<n;a++)for(var o=e[a],s=(i+=r?o.height:o.width,(o instanceof _o?o.parent:o).domParent);s!==t;){var l,h=s.contentBoxList;o===h[0]&&(i+=r?(l=s.computedStyle)[yl]+l[ml]+l[Tl]:(l=s.computedStyle)[pl]+l[vl]+l[Al]),o===h[h.length-1]&&(i+=r?(h=s.computedStyle)[xl]+h[bl]+h[Rl]:(h=s.computedStyle)[gl]+h[El]+h[Ml]),s=s.domParent}return i}},i=T.STYLE_KEY,Ol=i.SCALE_X,Cl=i.SCALE_Y,Il=r.NUMBER;var wl={matrixResize:function(t,e,r,i,n,a,o,s){if(t!==r||e!==i)return $a.calMatrixWithOrigin([[Ol,[r/t,Il]],[Cl,[i/e,Il]]],[n,a],o,s)}},e=T.STYLE_KEY,kl=e.BACKGROUND_POSITION_X,Dl=e.BACKGROUND_POSITION_Y,Ll=(e.FONT_SIZE,T.NODE_KEY.NODE_DEFS_CACHE),Fl=At.clone,Nl=At.joinArr,Pl=ne.canvasPolygon,Bl=ne.svgPolygon;function Hl(t,e,r,i,n,a,o,h,c,u,s,_,f){var d,y,l,p,g=13<arguments.length&&void 0!==arguments[13]?arguments[13]:"fill",x=14<arguments.length&&void 0!==arguments[14]&&arguments[14],m=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,v=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(l=i[1],d=i[2],y=i[3],i=i[0]),n=(n=n||We.calRadius(a,o,h,c,u,s,_,f))||[[a,o],[a+h,o],[a+h,o+c],[a,o+c],[a,o]],l&&(l=$a.calMatrixByOrigin(l,[d,y]),p=Ht.inverse(l),n=n.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r],t[r+1]],p);e.push(n[0]),e.push(n[1])}return e})),e===et.CANVAS||e===et.WEBGL)l&&(r.save(),u=t.matrixEvent,l=Ht.multiply(u,l),r.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),Pl(r,n,m,v),r[g](),r.closePath(),l&&r.restore();else if(e===et.SVG){s=Bl(n);if(x)return t.__config[Ll].push(_={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",s],["fill",i]]}]}),r.add(_);t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",i]]}),l&&(f=t.virtualDom.bb)[f.length-1].props.push(["transform","matrix(".concat(Nl(Ht.m2m6(l),","),")")])}}var Gl,Yl={renderBgc:Hl,renderImage:function(c,u,_,f,d,y,p,g,x,m,v,E,t,b,T,A,M,R){var S=18<arguments.length&&void 0!==arguments[18]?arguments[18]:0,e=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0,O=f.source;if(O){var i=(p+=S)-(d+=S),n=(g+=e)-(y+=e),a=f.width,o=f.height,S=Bt(T[b]||[],2),s=S[0],l=S[1],r=(-1===s&&-1===l?(s=a,l=o):-2===s?i<a&&n<o?(l=o/n)<=(s=a/i)?l=(s=i)*o/a:s=(l=n)*a/o:i<a?l=(s=i)*o/a:n<o?s=(l=n)*a/o:(s=a,l=o):-3===s?a<i&&o<n?(s=a/i)<=(l=o/n)?l=(s=i)*o/a:s=(l=n)*a/o:a<i||!(o<n)&&(s=a/i)<=(l=o/n)?l=(s=i)*o/a:s=(l=n)*a/o:-1===s?s=l*a/o:-1===l&&(l=s*o/a),t[kl][b]||0),h=(/%/.test(r)&&(r=(i-s)*parseFloat(r)*.01),r+=d,t[Dl][b]||0),C=(/%/.test(h)&&(h=(n-l)*parseFloat(h)*.01),h+=y,r<d||h<y||d+i<r+s||y+n<h+l),I=0,w=0,k=0,D=0,L=(-1<["repeatX","repeat"].indexOf(A[b])&&(0<(e=r-d)&&(I=Math.ceil(e/s)),0<(e=d+i-r-s)&&(w=Math.ceil(e/s))),-1<["repeatY","repeat"].indexOf(A[b])&&(0<(T=h-y)&&(k=Math.ceil(T/l)),0<(T=y+n-h-l)&&(D=Math.ceil(T/l))),[]);if(0<I)for(var F=0;F<I;F++){var N=r-(F+1)*s;L.push([N,h]),!C&&0===F&&N<d&&(C=!0)}if(0<w)for(var P=0;P<w;P++){var B=r+(P+1)*s;L.push([B,h]),!C&&P===w-1&&d+i<B+s&&(C=!0)}if(0<k)for(var H=0;H<k;H++){var G=h-(H+1)*l;L.push([r,G]),!C&&0===H&&G<y&&(C=!0)}if(0<D)for(var Y=0;Y<D;Y++){var W=h+(Y+1)*l;L.push([r,W]),!C&&Y===D-1&&y+n<W+s&&(C=!0)}if(0<I&&0<k)for(var U=0;U<I;U++)for(var X=0;X<k;X++)L.push([r-(U+1)*s,h-(X+1)*l]);if(0<w&&0<k)for(var z=0;z<w;z++)for(var V=0;V<k;V++)L.push([r+(z+1)*s,h-(V+1)*l]);if(0<I&&0<D)for(var K=0;K<I;K++)for(var j=0;j<D;j++)L.push([r-(K+1)*s,h+(j+1)*l]);if(0<w&&0<D)for(var $=0;$<w;$++)for(var q=0;q<D;q++)L.push([r+($+1)*s,h+(q+1)*l]);if(u===et.CANVAS||u===et.WEBGL)C&&(_.save(),Hl(this,u,_,"#FFF",null,d,y,i,n,x,m,v,E,"clip")),_.drawImage(O,r,h,s,l),L.forEach(function(t){_.drawImage(O,t[0],t[1],s,l)}),C&&_.restore();else if(u===et.SVG){var Z,J,S=wl.matrixResize(a,o,s,l,r,h,i,n),Q=[["xlink:href",f.url],["x",r],["y",h],["width",a],["height",o]];if(S&&!Ht.isE(S)&&(Z=!0,Q.push(["transform","matrix("+Nl(Ht.m2m6(S),",")+")"])),C&&(t=[d,y],e=[p,g],Z&&(A=Ht.inverse(S),t=Ht.calPoint(t,A),e=Ht.calPoint(e,A)),b={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(t[0],",").concat(t[1],"L").concat(e[0],",").concat(t[1],"L").concat(e[0],",").concat(e[1],"L").concat(t[0],",").concat(e[1],"L").concat(t[0],",").concat(t[1])],["fill","#FFF"]]}]},T=_.add(b),M[Ll].push(b),Q.push(["clip-path","url(#"+T+")"])),R)return J={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:Q}]},c.__config[Ll].push(J),L.forEach(function(t){var e,r=Fl(Q);!Z||(e=wl.matrixResize(a,o,s,l,t[0],t[1],i,n))&&!Ht.isE(e)&&(r[5][1]="matrix("+Nl(Ht.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],J.children.push({type:"img",tagName:"image",props:r})}),_.add(J);c.virtualDom.bb.push({type:"img",tagName:"image",props:Q}),L.forEach(function(t){var e,r=Fl(Q);!Z||(e=wl.matrixResize(a,o,s,l,t[0],t[1],i,n))&&!Ht.isE(e)&&(r[5][1]="matrix("+Nl(Ht.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],c.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}}},Wl=At.isFunction;function Ul(t,e,r,i){if(i)for(var n=0;n<e;n++){var a=t[n];a[1]?a[1](r):a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s[0]?s[0](r):s.__before&&s.__before(r)}}var Xl=new(function(){function t(){_(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return f(t,[{key:"__init",value:function(){var c=this,u=c.task,_=c.taskCp,f=(Mt.cancelAnimationFrame(c.id),c.__now=Mt.now());!function h(){Mt.cancelAnimationFrame(c.id),c.id=Mt.requestAnimationFrame(function(){if(!Gl&&(u.length||_.length)){var t=(e=c.__now=Mt.now())-f,t=Math.max(t,0);f=e;for(var e=u.slice(0),r=_.splice(0),i=e.length,n=r.length,a=(Ul(e,i,t,!1),Ul(r,n,t,!1),c.__hookTask.splice(0)),o=0,s=a.length;o<s;o++){var l=a[o];l&&l()}Ul(e,i,t,!0),Ul(r,n,t,!0),(u.length||_.length)&&h()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Wl(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var n=e[r];if(n===t||n.__karasFramecb===t){e.splice(r,1);break}}e.length||(Mt.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=Wl(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){Gl=!0}},{key:"resume",value:function(){Gl&&(this.__init(),Gl=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),zl=4,Vl=1e-7,Kl=10,jl="function"==typeof Float32Array;function $l(t,e){return 1-3*e+3*t}function ql(t,e,r){return(($l(e,r)*t+(3*r-6*e))*t+3*e)*t}function Zl(t,e,r){return 3*$l(e,r)*t*t+2*(3*r-6*e)*t+3*e}function Jl(t){return t}function Ql(m,e,v,r){if(!(0<=m&&m<=1&&0<=v&&v<=1))throw new Error("bezier x values must be in [0, 1] range");if(m===e&&v===r)return Jl;for(var E=new(jl?Float32Array:Array)(11),t=0;t<11;++t)E[t]=ql(.1*t,m,v);function i(t){for(var e=0,r=1;10!==r&&E[r]<=t;++r)e+=.1;var i=e+.1*((t-E[--r])/(E[r+1]-E[r])),n=Zl(i,m,v);if(.001<=n){for(var c=t,a=i,o=m,s=v,u=0;u<zl;++u){var _=Zl(a,o,s);if(0===_)return a;a-=(ql(a,o,s)-c)/_}return a}if(0===n)return i;for(var f,l,d=t,h=e,y=e+.1,p=m,g=v,x=0;0<(f=ql(l=h+(y-h)/2,p,g)-d)?y=l:h=l,Math.abs(f)>Vl&&++x<Kl;);return l}return function(t){return 0===t||1===t?t:ql(i(t),e,r)}}var th={linear:Ql(1,1,0,0),easeIn:Ql(.42,0,1,1),easeOut:Ql(0,0,.58,1),ease:Ql(.25,.1,.25,1),easeInOut:Ql(.42,0,.58,1),cubicBezier:Ql,getEasing:function(t,e,r,i){return 4===arguments.length?Ql(t,e,r,i):Array.isArray(t)&&4===t.length?Ql(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?n=Ql((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(n=this[t]),n):void 0;var n}},fi=(th["ease-in"]=th.easeIn,th["ease-out"]=th.easeOut,th["ease-in-out"]=th.easeInOut,T.STYLE_KEY),eh=fi.FILTER,rh=fi.TRANSFORM_ORIGIN,ih=fi.PERSPECTIVE_ORIGIN,nh=fi.BACKGROUND_CLIP,ah=fi.BACKGROUND_POSITION_X,oh=fi.BACKGROUND_POSITION_Y,sh=fi.BOX_SHADOW,lh=fi.TRANSLATE_X,hh=fi.TRANSLATE_Y,ch=fi.TRANSLATE_Z,uh=fi.BACKGROUND_SIZE,_h=fi.FONT_SIZE,fh=fi.FLEX_BASIS,dh=fi.FLEX_DIRECTION,yh=fi.WIDTH,ph=fi.HEIGHT,gh=fi.TOP,xh=fi.BOTTOM,mh=fi.LINE_HEIGHT,vh=fi.OPACITY,Eh=fi.Z_INDEX,bh=fi.TRANSFORM,Th=fi.COLOR,Ah=fi.FONT_WEIGHT,Mh=fi.FONT_STYLE,Rh=fi.FONT_FAMILY,Sh=fi.TEXT_ALIGN,Oh=fi.MATRIX,Ch=fi.ROTATE_3D,Ih=fi.TRANSLATE_PATH,wh=fi.TEXT_STROKE_COLOR,kh=fi.TEXT_STROKE_OVER,di=T.UPDATE_KEY,Dh=di.UPDATE_NODE,Lh=di.UPDATE_STYLE,Fh=di.UPDATE_KEYS,Nh=di.UPDATE_CONFIG,yi=T.KEY_FRAME_KEY,Ph=yi.FRAME_STYLE,Bh=yi.FRAME_TIME,Hh=yi.FRAME_EASING,Gh=yi.FRAME_TRANSITION,pi=T.ANIMATE_KEY,Yh=pi.I_ASSIGNING,Wh=pi.I_IN_FPS,Uh=pi.I_IS_DELAY,Xh=pi.I_BEGIN,zh=pi.I_END,Vh=pi.I_FINISHED,Kh=pi.I_NEXT_END,jh=pi.I_FIRST_PLAY,$h=pi.I_PLAY_CB,qh=pi.I_TARGET,Zh=pi.I_ROOT,Jh=pi.I_FRAMES,Qh=pi.I_FRAMES_R,tc=pi.I_CURRENT_TIME,ec=pi.I_NEXT_TIME,rc=pi.I_STYLE,ic=pi.I_DURATION,nc=pi.I_ITERATIONS,ac=pi.I_FILL,oc=pi.I_PLAYBACK_RATE,sc=pi.I_PLAY_COUNT,lc=pi.I_PLAY_STATE,hc=pi.I_DESTROYED,cc=pi.I_START_TIME,uc=pi.I_FPS_TIME,_c=pi.I_EASING,fc=pi.I_ENTER_FRAME,dc=pi.I_DELAY,yc=pi.I_END_DELAY,pc=pi.I_KEYS,gc=pi.I_ORIGIN_STYLE,xc=pi.I_CURRENT_FRAMES,mc=pi.I_CURRENT_FRAME,vc=pi.I_SPF_LIMIT,Ec=pi.I_FPS,bc=pi.I_DIRECTION,Tc=pi.I_FIRST_ENTER,Ac=pi.I_STAY_BEGIN,Mc=pi.I_STAY_END,Rc=pi.I_IS2,Sc=pi.I_END_TIME,Oc=pi.I_NODE_CONFIG,Cc=pi.I_ROOT_CONFIG,Ic=pi.I_OUT_BEGIN_DELAY,wc=pi.I_TIME_STAMP,kc=r.AUTO,Dc=r.PX,Lc=r.PERCENT,Fc=r.INHERIT,Nc=r.RGBA,Pc=r.STRING,Bc=r.NUMBER,Hc=r.REM,Gc=r.VW,Yc=r.VH,Wc=r.VMAX,Uc=r.VMIN,Xc=r.GRADIENT,zc=r.calUnit,Vc=At.isNil,Kc=At.isFunction,jc=At.isNumber,$c=At.isObject,qc=At.clone,Zc=At.equalArr,Jc=th.linear,Qc=mn.cloneStyle,tu=Tr.isGeom,eu=Tr.GEOM,ru=A.COLOR_HASH,iu=A.LENGTH_HASH,nu=A.RADIUS_HASH,au=A.GRADIENT_HASH,ou=A.EXPAND_HASH,su=A.GRADIENT_TYPE,lu={};function hu(t,e,r,i,n){var a={};a[Dh]=n,a[Lh]=t,a[Fh]=e,a[Nh]=r[Oc],i.__addUpdate(n,r[Oc],i,r[Cc],a),r[rc]=t,r[Yh]=!0,i.__frameHook()}function cu(t,e,r,i){return t[1]===Dc?e[1]===Lc?.01*e[0]*r-t[0]:e[1]===Hc?e[0]*i.computedStyle[_h]-t[0]:e[1]===Gc?e[0]*i.width*.01-t[0]:e[1]===Yc?e[0]*i.height*.01-t[0]:e[1]===Wc?e[0]*Math.max(i.width,i.height)*.01-t[0]:e[1]===Uc?e[0]*Math.min(i.width,i.height)*.01-t[0]:void 0:t[1]===Lc?e[1]===Dc?100*e[0]/r-t[0]:e[1]===Hc?e[0]*i.computedStyle[_h]*100/r-t[0]:e[1]===Gc?e[0]*i.width/r-t[0]:e[1]===Yc?e[0]*i.height/r-t[0]:e[1]===Wc?e[0]*Math.max(i.width,i.height)/r-t[0]:e[1]===Uc?e[0]*Math.min(i.width,i.height)/r-t[0]:void 0:t[1]===Hc?e[1]===Dc?e[0]/i.computedStyle[_h]-t[0]:e[1]===Lc?.01*e[0]*r/i.computedStyle[_h]-t[0]:e[1]===Gc?e[0]*i.width*.01/i.computedStyle[_h]-t[0]:e[1]===Yc?e[0]*i.height*.01/i.computedStyle[_h]-t[0]:e[1]===Wc?e[0]*Math.max(i.width,i.height)*.01/i.computedStyle[_h]-t[0]:e[1]===Uc?e[0]*Math.min(i.width,i.height)*.01/i.computedStyle[_h]-t[0]:void 0:t[1]===Gc?e[1]===Dc?100*e[0]/i.width-t[0]:e[1]===Hc?100*e[0]*i.computedStyle[_h]/i.width-t[0]:e[1]===Lc?e[0]*r/i.width-t[0]:e[1]===Yc?e[0]*i.height/i.width-t[0]:e[1]===Wc?e[0]*Math.max(i.width,i.height)/i.width-t[0]:e[1]===Uc?e[0]*Math.min(i.width,i.height)/i.width-t[0]:void 0:t[1]===Yc?e[1]===Dc?100*e[0]/i.height-t[0]:e[1]===Hc?100*e[0]*i.computedStyle[_h]/i.height-t[0]:e[1]===Gc?e[0]*i.width/i.height-t[0]:e[1]===Lc?e[0]*r/i.height-t[0]:e[1]===Wc?e[0]*Math.max(i.width,i.height)/i.height-t[0]:e[1]===Uc?e[0]*Math.min(i.width,i.height)/i.height-t[0]:void 0:t[1]===Wc?e[1]===Dc?100*e[0]/Math.max(i.width,i.height)-t[0]:e[1]===Hc?100*e[0]*i.computedStyle[_h]/Math.max(i.width,i.height)-t[0]:e[1]===Lc?e[0]*r/Math.max(i.width,i.height)-t[0]:e[1]===Gc?e[0]*i.width/Math.max(i.width,i.height)-t[0]:e[1]===Yc?e[0]*i.height/Math.max(i.width,i.height)-t[0]:e[1]===Uc?e[0]*Math.min(i.width,i.height)/Math.max(i.width,i.height)-t[0]:void 0:t[1]===Uc?e[1]===Dc?100*e[0]/Math.min(i.width,i.height)-t[0]:e[1]===Hc?100*e[0]*i.computedStyle[_h]/Math.min(i.width,i.height)-t[0]:e[1]===Lc?e[0]*r/Math.min(i.width,i.height)-t[0]:e[1]===Gc?e[0]*i.width/Math.min(i.width,i.height)-t[0]:e[1]===Yc?e[0]*i.height/Math.min(i.width,i.height)-t[0]:e[1]===Wc?e[0]*Math.max(i.width,i.height)/Math.min(i.width,i.height)-t[0]:void 0:void 0}function uu(t,e,r){if(t.k===e.k&&su.hasOwnProperty(t.k)){for(var c=t.v,u=e.v,i=[[]],n=Zc(c,u),_=0,f=Math.min(c.length,u.length);_<f;_++){var a=c[_],o=u[_],d=[];d.push([o[0][0]-a[0][0],o[0][1]-a[0][1],o[0][2]-a[0][2],o[0][3]-a[0][3]]),a[1]&&o[1]&&(a[1][1]===o[1][1]?d.push(o[1][0]-a[1][0]):(a=cu(a[1],o[1],r.clientWidth,r.root),d.push(a||0))),i[0].push(d)}if("linear"===t.k){var s=Array.isArray(t.d);if(Array.isArray(e.d)!==s)return;if(s){s=[e.d[0]-t.d[0],e.d[1]-t.d[1],e.d[2]-t.d[2],e.d[3]-t.d[3]];if(n&&Zc(s,[0,0,0,0]))return;i[1]=s}else{s=e.d-t.d;if(n&&0==s)return;i[1]=s}}else if("radial"===t.k){s=Array.isArray(t.z);if(Array.isArray(e.z)!==s)return;if(i[2]=[],s){if(n&&Zc(t.z,e.z))return;for(var y=0;y<5;y++){var p=t.z[y],g=(void 0===p&&(p=1),e.z[y]);void 0===g&&(g=1),i[2].push(g-p)}}else{if(n&&t.z===e.z&&t.s===e.s&&Zc(t.p,e.p))return;for(var l=0;l<2;l++){var h=t.p[l],x=e.p[l];h[1]===x[1]?i[2].push(x[0]-h[0]):(h=cu(h,x,r[l?"clientWidth":"clientHeight"],r.root),i[2].push(h||0))}}}else if("conic"===t.k){if(n&&t.d===e.d&&Zc(t.p,e.p))return;i[1]=e.d-t.d,i[2]=[];for(var m=0;m<2;m++){var v=t.p[m],E=e.p[m];v[1]===E[1]?i[2].push(E[0]-v[0]):(v=cu(v,E,r[m?"clientWidth":"clientHeight"],r.root),i[2].push(v||0))}}return i}}function _u(e,r,t,i,n){return t.forEach(function(t){t=function(t,e,r,i,c){var n=[r],a=t[r],o=e[r];if(r===bh){if(!a&&!o)return;t=a?a[0][1]:Ht.identity(),e=o?o[0][1]:Ht.identity();return Zc(t,e)?void 0:(n[1]=[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8],e[9]-t[9],e[10]-t[10],e[11]-t[11],e[12]-t[12],e[13]-t[13],e[14]-t[14],e[15]-t[15]],n)}if(r===Ch){if(Zc(a,o))return;n[1]=[o[0]-o[0],o[1]-a[1],o[2]-a[2],[o[3][0]-a[3][0],o[3][1]]]}else if(r===eh){for(var u=Math.max(a?a.length:0,o?o.length:0),_=[],f=0;f<u;f++){var s=a?a[f]:null,l=o?o[f]:null;if(Vc(s)||Vc(l)||s[0]!==l[0])_.push(null);else{var d,y=s[0];if("blur"===y)s[1][1]===l[1][1]?_.push(l[1][0]-s[1][0]):(d=cu(s[1],l[1],0,i.root),_.push(d));else if("hueRotate"===y||"saturate"===y||"brightness"===y||"contrast"===y||"sepia"===y||"invert"===y||"grayscale"===y)_.push(l[1][0]-s[1][0]);else if("dropShadow"===y){for(var p=[],g=0;g<4;g++){var x=s[1][g],m=l[1][g];x[1]===m[1]?p.push(m[0]-x[0]):p.push(cu(x,m,1===g?taraget.clientHeight:i.clientWidth,i.root))}p.push([l[1][4][0]-s[1][4][0],l[1][4][1]-s[1][4][1],l[1][4][2]-s[1][4][2],l[1][4][3]-s[1][4][3]]),_.push(p)}}}n[1]=_}else if(r===rh||r===ih){n[1]=[];for(var v=0;v<2;v++){var E=a[v],b=o[v];E[1]===b[1]?n[1].push(b[0]-E[0]):(E=cu(E,b,i[v?"outerHeight":"outerWidth"],i.root),n[1].push(E||0))}if(Zc(n[1],[0,0]))return}else if(r===ah||r===oh){n[1]=[];for(var T=Math.min(a.length,o.length),A=0;A<T;A++){var M=a[A],R=o[A];if(M&&R)if(M[1]===R[1]){var S=R[0]-M[0];if(!S)return void n[1].push(null);n[1].push(S)}else{S=r===ah?"offsetWidth":"offsetHeight",M=(-1<["padding-box","paddingBox"].indexOf(i.computedStyle[nh])?S=r===ah?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[nh])&&(S=r===ah?"width":"height"),cu(M,R,i[S],i.root));if(!M)return void n[1].push(null);n[1].push(M)}else n[1].push(null)}}else if(r===sh){n[1]=[];for(var O=0,C=Math.min(a.length,o.length);O<C;O++){for(var I=a[O],w=o[O],k=[],D=0;D<4;D++)k.push(w[D]-I[D]);for(var L=[],F=0;F<4;F++)L.push(w[4][F]-I[4][F]);k.push(L),n[1].push(k)}}else if(ou.hasOwnProperty(r))if(a[1]===o[1]){e=o[0]-a[0];if(0==e)return;n[1]=e}else{t=cu(a,o,i[r===lh||r===ch?"outerWidth":"outerHeight"],i.root);if(!t)return;n[1]=t}else if(r===uh){n[1]=[];for(var N,P=Math.min(a.length,o.length),B=0;B<P;B++){var H=a[B],G=o[B];if(H&&G){for(var Y=[],W=0;W<2;W++){var U,X=H[W],z=G[W];X[1]===z[1]?Y.push(z[0]-X[0]):(U=B?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(i.computedStyle[nh])?U=B?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[nh])&&(U=B?"width":"height"),X=cu(X,z,i[U],i.root),Y.push(X||0))}Zc(Y,[0,0])?n[1].push(null):(n[1].push(Y),N=!0)}else n[1].push(null)}if(!N)return}else if(au.hasOwnProperty(r)){n[1]=[];for(var V=Math.min(a.length,o.length),K=0;K<V;K++){var h=a[K],j=o[K];if(h&&j&&h[1]===j[1]){var $=h[1]===Xc,h=h[0],j=j[0],q=[];if($){$=uu(h,j,i);if(!$){n[1].push(null);continue}q=$}else Zc(j,h)&&n[1].push(null),q[0]=[j[0]-h[0],j[1]-h[1],j[2]-h[2],j[3]-h[3]];n[1].push(q)}else n[1].push(null)}}else if(ru.hasOwnProperty(r)){if(o[1]!==a[1])return;e=o[1]===Xc,o=o[0],a=a[0];if(e){t=uu(a,o,i);if(!t)return;n[1]=t}else{if(Zc(o,a)||0===o[3]&&0===a[3])return;n[1]=[o[0]-a[0],o[1]-a[1],o[2]-a[2],o[3]-a[3]]}}else if(nu.hasOwnProperty(r)){if(o[0][0]===a[0][0]&&o[0][1]===a[0][1]&&o[1][0]===a[1][0]&&o[1][1]===a[1][1])return;n[1]=[];for(var Z,J=0;J<2;J++)o[J][1]===a[J][1]?n[1].push(o[J][0]-a[J][0]):(Z=cu(a[J],o[J],i[J?"outerHeight":"outerWidth"],i.root),n[1].push(Z||0))}else if(iu.hasOwnProperty(r)){if(a[1]===kc||o[1]===kc)return;var e=i.computedStyle,t=(i.domParent||i).computedStyle,Q=0;if(a[1]===o[1]?Q=o[0]-a[0]:r===mh?Q=cu(a,o,e[_h],i.root):r===_h?Q=cu(a,o,t[_h],i.root):r===fh&&-1<["column","column-reverse","columnReverse"].indexOf(e[dh])||-1<[ph,gh,xh].indexOf(r)?a[1]!==kc&&o[1]!==kc&&(Q=cu(a,o,t[ph],i.root)):a[1]!==kc&&o[1]!==kc&&(Q=cu(a,o,t[yh],i.root)),0===Q||isNaN(Q))return;n[1]=Q}else if(eu.hasOwnProperty(r)){if(Vc(a))return;if(eu[r][c]&&Kc(eu[r][c].calDiff)){var tt=eu[r][c].calDiff;if(i.isMulti){for(var et=[],rt=0,it=Math.min(a.length,o.length);rt<it;rt++)et.push(tt(a[rt],o[rt]));return et}n[1]=tt(a,o)}else if(i.isMulti)if("points"===r||"controls"===r){if(Vc(o)||!o.length||Vc(a)||!a.length||Zc(a,o))return;n[1]=[];for(var nt=0,at=Math.min(a.length,o.length);nt<at;nt++){var ot=a[nt],st=o[nt];if(Vc(ot)||!ot.length||Vc(st)||!st.length)n[1].push(null);else{for(var lt=[],ht=0,ct=Math.min(ot.length,st.length);ht<ct;ht++){var ut=ot[ht],_t=st[ht];if(Vc(ut)||Vc(_t))lt.push(null);else{for(var ft=[],dt=0,yt=Math.max(ut.length,_t.length);dt<yt;dt++){var pt=ut[dt],gt=_t[dt];Vc(pt)||Vc(gt)?ft.push(0):ft.push(gt-pt)}lt.push(ft)}}n[1].push(lt)}}}else if("controlA"===r||"controlB"===r){if(Vc(o)||!o.length||Vc(a)||!a.length||Zc(a,o))return;n[1]=[];for(var xt=0,mt=Math.min(a.length,o.length);xt<mt;xt++){var vt=a[xt],Et=o[xt];Vc(vt)||!vt.length||Vc(Et)||!Et.length?n[1].push(null):n[1].push([Et[0]-vt[0],Et[1]-vt[1]])}}else{if(o===a||Zc(o,a)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var bt=[],Tt=0,At=Math.min(a.length,o.length);Tt<At;Tt++){var Mt=a[Tt],Rt=o[Tt];(Vc(Mt)||Vc(Rt))&&bt.push(0),bt.push(Rt-Mt)}n[1]=bt}else if("points"===r||"controls"===r){if(Vc(o)||!o.length||Vc(a)||!a.length||Zc(a,o))return;n[1]=[];for(var St=0,Ot=Math.min(a.length,o.length);St<Ot;St++){var Ct=a[St],It=o[St];if(Vc(Ct)||!Ct.length||Vc(It)||!It.length)n[1].push(null);else{for(var wt=[],kt=0,Dt=Math.max(Ct.length,It.length);kt<Dt;kt++){var Lt=Ct[kt],Ft=It[kt];Vc(Lt)||Vc(Ft)?wt.push(0):wt.push(Ft-Lt)}n[1].push(wt)}}}else if("controlA"===r||"controlB"===r){if(Vc(o)||!o.length||Vc(a)||!a.length||Zc(a,o))return;n[1]=[o[0]-a[0],o[1]-a[1]]}else{if(o===a||"edge"===r||"closure"===r||"booleanOperations"===r)return;n[1]=o-a}}else if(r===vh||r===Eh){if(o===a)return;n[1]=o-a}else{if(r!==Ih||!a)return;var Nt="offsetWidth",Pt="offsetHeight";-1<["padding-box","paddingBox"].indexOf(i.computedStyle[nh])?(Nt="clientWidth",Pt="clientHeight"):-1<["content-box","contentBox"].indexOf(i.computedStyle[nh])&&(Nt="width",Pt="height"),n[1]=a.map(function(t,e){var t=Bt(t,2),r=t[0],t=t[1];return t===Lc?e%2==0?[.01*(parseFloat(r)||0)*i[Nt],Dc]:[.01*(parseFloat(r)||0)*i[Pt],Dc]:t===Hc?[(parseFloat(r)||0)*root.computedStyle[_h]*100,Dc]:t===Gc?[.01*(parseFloat(r)||0)*root.width,Dc]:t===Yc?[.01*(parseFloat(r)||0)*root.height,Dc]:t===Wc?[.01*(parseFloat(r)||0)*Math.max(root.width,root.height),Dc]:t===Uc?[.01*(parseFloat(r)||0)*Math.min(root.width,root.height),Dc]:[parseFloat(r)||0,Dc]})}return n}(e[Ph],r[Ph],t,i,n);t&&e[Gh].push(t)}),r}function fu(t,e,L,F){for(var r,i,n,N=Qc(t[Ph],e),P=(e=t[Hh],n=e?(n=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(n[1]),i=n[2],function(t){var e;return r&&0<r?(e=1/r,("start"===i?Math.ceil(t/e):Math.floor(t/e))/r):t}):th.getEasing(e):n,n&&n!==Jc&&(L=n(L)),t[Gh]),a=0,o=P.length;a<o;a++)!function(t){var t=Bt(P[t],2),e=t[0],c=t[1],r=N[e];if(e===bh)for(var r=r||(N[e]=[[Oh,Ht.identity()]]),h=0;h<16;h++)r[0][1][h]+=c[h]*L;else if(e===Ih){t=1-L;8===c.length?(N[lh]=[c[0][0]*t*t*t+3*c[2][0]*L*t*t+3*c[4][0]*L*L*t+c[6][0]*L*L*L,Dc],N[hh]=[c[1][0]*t*t*t+3*c[3][0]*L*t*t+3*c[5][0]*L*L*t+c[7][0]*L*L*L,Dc]):6===c.length&&(N[lh]=[c[0][0]*t*t+2*c[2][0]*L*t+c[4][0]*L*L,Dc],N[hh]=[c[1][0]*t*t+3*c[3][0]*L*t+c[5][0]*L*L,Dc])}else if(e===Ch)r[0]+=c[0]*L,r[1]+=c[1]*L,r[2]+=c[2]*L,r[3][0]+=c[3][0]*L;else if(lu.hasOwnProperty(e))c&&(r[0]+=c*L);else if(e===eh){r=r||(N[e]=[]);for(var u=0,_=c.length;u<_;u++){var i,n,f,a=c[u];a&&(n=r[u][0],i=r[u][1],"dropShadow"===n?(i[0][0]+=a[0]*L,i[1][0]+=a[1]*L,i[2][0]+=a[2]*L,i[3][0]+=a[3]*L,n=i[4],f=a[4],n[0]+=f[0]*L,n[1]+=f[1]*L,n[2]+=f[2]*L,n[3]+=f[3]*L):i[0]+=a*L)}}else if(nu.hasOwnProperty(e))for(var d=0;d<2;d++)r[d][0]+=c[d]*L;else if(e===rh||e===ih)0!==c[0]&&(r[0][0]+=c[0]*L),0!==c[1]&&(r[1][0]+=c[1]*L);else if(e===sh)for(var o=0,y=Math.min(r.length,c.length);o<y;o++){for(var p=0;p<4;p++)r[o][p]+=c[o][p]*L;for(var g=0;g<4;g++)r[o][4][g]+=c[o][4][g]*L}else if(e===uh)r.forEach(function(t,e){c[e]&&(t[0][0]+=c[e][0]*L,t[1][0]+=c[e][1]*L)});else if(e===ah||e===oh)r.forEach(function(t,e){c[e]&&(t[0]+=c[e]*L)});else if(au.hasOwnProperty(e))r.forEach(function(t,e){e=c[e];if(e)if(t[1]===Xc&&su.hasOwnProperty(t[0].k)){t=t[0];for(var r=Bt(e,4),i=r[0],n=r[1],a=r[2],r=r[3],o=0,s=Math.min(t.v.length,i.length);o<s;o++){var l=t.v[o],h=i[o];l[0][0]+=h[0][0]*L,l[0][1]+=h[0][1]*L,l[0][2]+=h[0][2]*L,l[0][3]+=h[0][3]*L,l[1]&&h[1]&&(l[1][0]+=h[1]*L)}"linear"===t.k&&void 0!==t.d&&void 0!==n&&(Array.isArray(n)?(t.d[0]+=n[0]*L,t.d[1]+=n[1]*L,t.d[2]+=n[2]*L,t.d[3]+=n[3]*L):t.d+=n*L),"radial"===t.k?void 0!==t.z&&void 0!==r?(t.z[0]+=r[0]*L,t.z[1]+=r[1]*L,t.z[2]+=r[2]*L,t.z[3]+=r[3]*L,t.z[4]+=r[4]*L):void 0!==t.p&&void 0!==a&&(t.p[0][0]+=a[0]*L,t.p[1][0]+=a[1]*L):"conic"===t.k&&void 0!==t.d&&void 0!==n&&(t.d+=n*L,t.p[0][0]+=a[0]*L,t.p[1][0]+=a[1]*L)}else{t=t[0];r=e[0];t[0]+=r[0]*L,t[1]+=r[1]*L,t[2]+=r[2]*L,t[3]+=r[3]*L}});else if(ru.hasOwnProperty(e))(r=r[0])[0]+=c[0]*L,r[1]+=c[1]*L,r[2]+=c[2]*L,r[3]+=c[3]*L;else if(eu.hasOwnProperty(e)){var s=N[e],t=F.tagName;if(eu[e][t]&&Kc(eu[e][t].calIncrease)){var x=eu[e][t].calIncrease;F.isMulti?N[e]=s.map(function(t,e){return x(t,c[e],L)}):N[e]=x(s,c,L)}else if(F.isMulti)if("points"===e||"controls"===e)for(var m=0,v=Math.min(s.length,c.length);m<v;m++){var E=s[m],b=c[m];if(!Vc(E)&&!Vc(b))for(var T=0,A=Math.min(E.length,b.length);T<A;T++){var M=E[T],R=b[T];if(!Vc(M)&&!Vc(R))for(var l=0,S=Math.min(M.length,R.length);l<S;l++)Vc(M[l])||Vc(R[l])||(M[l]+=R[l]*L)}}else"controlA"===e||"controlB"===e?c.forEach(function(t,e){var r=s[e];if(!Vc(t)&&!Vc(r))for(var i=0,n=Math.min(r.length,t.length);i<n;i++){var a=r[i],o=t[i];Vc(a)||Vc(o)||(r[i]+=o*L)}}):c.forEach(function(t,e){Vc(t)||Vc(s[e])||(s[e]+=t*L)});else if("points"===e||"controls"===e)for(var O=0,C=Math.min(s.length,c.length);O<C;O++){var I=s[O],w=c[O];if(!Vc(I)&&!Vc(w))for(var k=0,D=Math.min(I.length,w.length);k<D;k++)Vc(I[k])||Vc(w[k])||(I[k]+=w[k]*L)}else"controlA"===e||"controlB"===e?(Vc(s[0])||Vc(c[0])||(s[0]+=c[0]*L),Vc(s[1])||Vc(c[1])||(s[1]+=c[1]*L)):Vc(s)||Vc(c)||(N[e]+=c*L)}else e!==vh&&e!==Eh||(N[e]+=c*L,e===vh&&(N[e]<0?N[e]=0:1<N[e]&&(N[e]=1)))}(a);return N}function du(t,e){return Kc(t)&&(e=t,t={}),[t||{},e]}function yu(t,e,r,i){t.emit(ll.FRAME,r,i),e[jh]&&(e[jh]=!1,t.emit(ll.PLAY));var n=e[$h];Kc(n)&&(n.call(t,r,i),e[$h]===n&&(e[$h]=null))}Object.assign(lu,iu),Object.assign(lu,ou);var pu=0,gu=function(){d(c,ll);var h=y(c);function c(t,n,e){_(this,c),(r=h.call(this)).__id=pu++,n=qc(n||[]),n=Array.isArray(n)?n.filter(function(t){return t&&$c(t)}):n&&$c(n)?(a=[],Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(a[r]=a[r]||{offset:r/(i-1)})[t]=e[r]}),a):[],jc(e)&&(r.__options={duration:e},e=r.__options);var r,a,e=r.__options=e||{duration:0},i=t.root,i=r.__config=[!1,!1,!1,!0,!1,!1,!1,!0,null,t,i,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,e.easing,!1,0,0,null,null,null,null,!1,60,"normal",!0,!1,!1,!1,0,t.__config,i&&i.__config,!1],o=r.iterations=e.iterations,s=r.duration=e.duration,o=Bt(r.__init(n,o,s,e.easing,t),4),s=o[0],t=o[1],l=o[2],o=o[3],l=(i[Jh]=s,i[Qh]=t,i[pc]=l,i[gc]=o,2===s.length&&(i[Rc]=!0,i[Sc]=s[1][Bh]),parseInt(e.fps)||0);return r.fps=l=l<=0?60:l,r.spfLimit=e.spfLimit,r.delay=e.delay,r.endDelay=e.endDelay,r.playbackRate=e.playbackRate,r.fill=e.fill,r.iterations=e.iterations,r.direction=e.direction,i[xc]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(e.direction)?t:s,i[wc]=Xl.__now,r[0]=r.__before,r[1]=r.__after,r}return f(c,[{key:"__init",value:function(i,c,u,_,t){if(i.length<1)return[[],[],[],{}];for(var f=t.tagName,n=0,a=i.length;n<a;n++)!function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),n=--t,a=--e;if(r.offset<=-1)return i.splice(t,1),n=--t,a=--e}Object.keys(r).forEach(function(t){cr.hasOwnProperty(t)&&cr.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Tr.isValid(f,t)||delete r[t]}),n=t,a=e}(n,a);1===i.length?(i[0]=qc(i[0]),1===i[0].offset?i.unshift({offset:0}):((e=qc(i[0])).offset=1,i.push(e))):i.forEach(function(t,e){i[e]=qc(t)});var e=i[0],e=(e.hasOwnProperty("offset")&&0<e.offset?i.unshift(e={offset:0}):e.offset=0,i[i.length-1]);e.hasOwnProperty("offset")&&e.offset<1?i.push(e={offset:1}):e.offset=1;for(var r=1,d=i.length;r<d;r++)if(!(p=i[r]).hasOwnProperty("offset")){for(var y=void 0,o=r+1;o<d&&!(y=i[o]).hasOwnProperty("offset");o++);for(var p=i[r-1],g=(y.offset-p.offset)/(o-r+1),x=r;x<o;x++)i[x].offset=p.offset+g*(x+1-r);r=o}for(var m,s,l,v,E,b,h=[],T=(i.forEach(function(t){var e,r,i,n,a;h.push((e=u,r=_,i=(t=t).offset,n=(n=t).easing,delete t.offset,delete t.easing,a=t.translatePath,t=mn.normalize(t),Array.isArray(a)&&-1<[6,8].indexOf(a.length)&&(t[Ih]=a.map(function(t){t=zc(t);return t[1]===Bc&&(t[1]=Dc),t})),(a=[])[Ph]=t,a[Bh]=i*e,a[Hh]=n||r,a[Gh]=[],a))}),m=t,s={},l=[],(e=h).forEach(function(t){var e=t[Ph];Object.keys(e).forEach(function(t){void 0===e[t]||s.hasOwnProperty(t)||(s[t]=!0,(t=eu.hasOwnProperty(t)?t:parseInt(t))===Ih&&(s.hasOwnProperty(lh)||l.push(lh),s.hasOwnProperty(hh)||l.push(hh),s[lh]=s[hh]=!0),l.push(t))})}),e.forEach(function(t){var e=t[Ph];l.forEach(function(t){e.hasOwnProperty(t)&&!Vc(e[t])||(eu.hasOwnProperty(t)?e[t]=m.getProps(t):t===lh&&e.hasOwnProperty(Ih)?e[t]=e[Ih][0]:t===hh&&e.hasOwnProperty(Ih)?e[t]=e[Ih][1]:e[t]=m.currentStyle[t])})}),l),A=(v=T,b=(E=t).computedStyle,h.forEach(function(t){var n=t[Ph];v.forEach(function(t){var e,r,i=n[t];Vc(i)||(t===bh?(r=E.outerWidth,e=E.outerHeight,r=$a.calMatrix(i,r,e),n[t]=[[Oh,r]]):i[1]===Fc&&(t===Th||t===wh?n[t]=[At.rgba2int(b[t]),Nc]:iu.hasOwnProperty(t)?n[t]=[b[t],Dc]:t===Ah?n[t]=[b[t],Bc]:t!==Mh&&t!==Rh&&t!==Sh&&t!==kh||(n[t]=[b[t],Pc])))})}),qc(h).reverse()),M=t.style,R=t.props,S={},O=(T.forEach(function(t){tu(f,t)&&(S[t]=R[t]),S[t]=M[t]}),h.length),C=h[0],I=1;I<O;I++)C=_u(C,h[I],T,t,f);A.forEach(function(t){t[Bh]=u-t[Bh],t[Gh]=[]}),C=A[0];for(var w=1;w<O;w++)C=_u(C,A[w],T,t,f);return[h,A,T,S]}},{key:"__clean",value:function(t){var e,r=this.__config,i=(this.__cancelTask(),r[ec]=0,r[rc]),n=r[pc],a=r[qh];if(t){if(r[tc]=r[dc]+r[ic]*r[nc]+r[yc],"finish"===r[lc])return;r[lc]="finish",r[Mc]||(r[rc]={},e=!0)}else{if(r[sc]=r[tc]=0,"idle"===r[lc])return;r[lc]="idle",r[rc]={},e=!0}e&&n.forEach(function(t){eu.hasOwnProperty(t)?a.__currentProps[t]===i[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===i[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"play",value:function(t){var e=this.__config,r=e[hc],i=e[ic],n=e[lc],a=e[Jh];return r||i<=0||a.length<1||"running"===n||(this.__cancelTask(),e[$h]=t,e[lc]="running",e[jh]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[fc]||(e[fc]=!0,r=e[Qh],i=e[bc],e[xc]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i)?r:a,e[tc]=e[ec]=e[uc]=0),Xl.onFrame(this),e[cc]=Xl.__now,e[zh]=!1),this}},{key:"__before",value:function(t){var e=this.__config,c=(e[wc]=Xl.__now,e[qh]),u=e[Ec],r=0,i=e[xc],_=e[nc],f=e[Ac],d=e[Mc],y=e[dc],p=e[Zh],g=e[Rc],x=e[Sc],m=e[ic],v=e[yc],E=i.length;h=t,a=(o=e)[oc],n=o[vc],s=o[Ec],b=o[tc]=o[ec],n&&(!0===n?h=Math.min(h,1e3/s):0<n&&(h=Math.min(h,n))),1!==a&&0<a&&(h*=a),o[ec]+=h;var n,a,o,b,s=Bt([b,h],2),l=s[0];if(t=s[1],!e[Tc]&&u<60){if((t=e[uc]+=t)<1e3/u)return void(e[Wh]=!0);e[uc]=0}if(e[Tc]=!1,l<y)return f&&hu((e[mc]=i[0])[Ph],e[pc],e,p,c),e[Xh]=!1,e[Ic]=!0,void(e[Uh]=!0);for(l-=y,e[Ic]&&(e[Ic]=!1,e[Xh]=!0);m<=l&&r<_-1;)l-=m,r++;e[sc]<r&&(R=e[Xh]=!0),e[sc]=r,R&&(n=e[bc],a=e[Jh],o=e[Qh],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(n)&&(b=r%2==0,i=e[xc]="alternate"===n?b?a:o:b?o:a));var T,h=_-1<=r,s=g?(T=l<x?0:1,x):i[T=function t(e,r,i,n){var a,o;return e===r?n[e][Bh]>i?e-1:e:(o=n[a=e+(r-e>>1)])[Bh]===i?a:o[Bh]>i?t(e,Math.max(a-1,e),i,n):t(Math.min(a+1,r),r,i,n)}(0,E-1,l,i)][Bh],t=h&&T===E-1,u=0;t||(u=g?l/m:(l-s)/(i[T+1][Bh]-s));var A,M,R,f=i[T];e[mc]=f,t?(y=l<m+v,A=Qc(d?f[Ph]:e[gc],e[pc]),e[Kh]=!0,y||(e[sc]++,e[Vh]=!0,Xl.offFrame(this),M=!0,e[ec]=0)):A=fu(f,e[pc],u,c),hu(A,e[pc],e,p,c),M&&(R=e[$h],this.__clean(!0),R&&(e[$h]=R))}},{key:"__after",value:function(t){var e=this.__config;e[Yh]=!1,e[Wh]?e[Wh]=!1:(yu(this,e,t,e[Uh]),e[Uh]=!1,e[Xh]&&(e[Xh]=!1,this.emit(ll.BEGIN,e[sc])),e[Kh]&&!e[zh]&&(e[zh]=!0,this.emit(ll.END,e[sc]-1)),e[Vh]&&(e[Xh]=e[zh]=e[Uh]=e[Vh]=e[Wh]=e[fc]=!1,e[lc]="finished",this.emit(ll.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[hc],i=e[ic],n=this.pending;return r||i<=0||n||(e[lc]="paused",this.__cancelTask(),t||this.emit(ll.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[hc],i=e[ic],e=e[lc];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[hc],n=i[ic],a=i[lc],o=i[Jh];if(t||n<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,l=i[Zh],t=i[gc];return l&&(s=i[Mc]?(i[mc]=o[o.length-1],o[o.length-1][Ph]):t,l.addRefreshTask({__before:function(){i[Yh]=!0,hu(s,i[pc],i,l,i[qh]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[Yh]=!1,yu(r,i,t),i[Xh]=i[zh]=i[Uh]=i[Vh]=i[Wh]=i[fc]=!1,r.emit(ll.FINISH)),Kc(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[hc],n=i[ic],a=i[lc],o=i[Jh];if(t||n<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=i[Zh],l=i[gc];return s&&s.addRefreshTask({__before:function(){i[Yh]=!0,hu(l,i[pc],i,s,i[qh]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[Yh]=!1,yu(r,i,t),i[Xh]=i[zh]=i[Uh]=i[Vh]=i[Wh]=i[fc]=!1,r.emit(ll.CANCEL)),Kc(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,n=i[hc],a=i[ic],o=i[Jh],s=i[dc],i=i[yc];if(n||a<=0||o.length<1)return this;n=Bt(du(e,r),2);return e=n[0],r=n[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,n=this.__config,a=n[hc],o=n[ic],s=n[Jh],l=n[dc],h=n[yc];if(a||o<=0||s.length<1)return this;a=Bt(du(e,r),2);return e=a[0],r=a[1],o+l+h<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){n[lc]="paused",i.__cancelTask(),Kc(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[rc],i=t[qh];t[pc].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],eu.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,n=i[nc],a=i[ic];if(i[lc]="paused",isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=i[dc]),i[ec]=t,t-=i[dc];for(var o=0;a<=t&&o<n-1;)o++,t-=a;i[sc]=o,i[fc]=!0;var s,e=i[Jh],r=i[Qh],l=i[bc];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(l)&&(s=o%2==0,i[xc]="alternate"===l?s?e:r:s?r:e),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[qh]=t,this.__config[Oc]=t.__config}},{key:"__cancelTask",value:function(){Xl.offFrame(this),this.__config[$h]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[hc]||(e.removeControl(),t?(e.__clean(),r[qh]=null):Xl.nextFrame({__before:function(){e.__clean(),r[qh]=null}}),r[cc]=0,r[hc]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[lc]&&"finished"!==t[lc]&&Mt.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[qh]}},{key:"root",get:function(){return this.__config[Zh]}},{key:"keys",get:function(){return this.__config[pc]}},{key:"style",get:function(){return this.__config[rc]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[ic]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[ic]!==t&&(e[ic]=t,e[Sc]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[dc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[dc]!==t&&(e[dc]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[yc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[yc]!==t&&(e[yc]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[Ec]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[Ec]!==t&&(e[Ec]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[nc]},set:function(t){t===1/0||At.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[nc]!==t&&(e[nc]=t),t}},{key:"fill",get:function(){return this.__config[ac]},set:function(t){var e=this.__config;return e[ac]!==(t=t||"none")&&(e[ac]=t,this.__checkModify()),e[Ac]={backwards:!0,both:!0}.hasOwnProperty(t),e[Mc]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[bc]},set:function(t){var e=this.__config;return e[bc]!==(t=t||"normal")&&(e[bc]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[Jh]}},{key:"framesR",get:function(){return this.__config[Qh]}},{key:"playbackRate",get:function(){return this.__config[oc]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[oc]!==(t=t<=0?1:t)&&(e[oc]=t),t}},{key:"easing",get:function(){return this.__config[_c]}},{key:"startTime",get:function(){return this.__config[cc]}},{key:"currentTime",get:function(){return this.__config[tc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[tc]!==t&&(e[tc]=t,e[ec]=t),t}},{key:"nextTime",get:function(){return this.__config[ec]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[ec]!==t&&(e[ec]=t),t}},{key:"timestamp",get:function(){return this.__config[wc]}},{key:"pending",get:function(){return"running"!==this.__config[lc]}},{key:"finished",get:function(){return"finished"===this.__config[lc]}},{key:"playState",get:function(){return this.__config[lc]}},{key:"playCount",get:function(){return this.__config[sc]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[sc]!==t&&(e[sc]=t),t}},{key:"isDestroyed",get:function(){return this.__config[hc]}},{key:"animating",get:function(){var t=this.__config,e=t[lc];return"idle"!==e&&("finished"!==e||t[Mc]||t[Ac])}},{key:"spfLimit",get:function(){return this.__config[vc]},set:function(t){t=At.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[vc]!==t&&(e[vc]=t),t}},{key:"assigning",get:function(){return this.__config[Yh]}}]),c}(),xu=T.NODE_KEY.NODE_DEFS_CACHE,mu=At.int2rgba,vu=ne.canvasPolygon,Eu=ne.svgPolygon;var bu={renderBoxShadow:function(c,u,t,_,e,r,f,i,d,y){var p,g,x;e+=n=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,r+=m=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,f+=n,i+=m;var m=(n=Bt(_,6))[0],_=n[1],v=n[2],E=n[3],b=n[4],n=n[5],T=mu(b),a=2*Math.abs(v)+2*Math.abs(E)+2*Math.abs(m)+2*Math.abs(_),o=[[e,r],[f,r],[f,i],[e,i],[e,r]],A=[[e-a,r-a],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a]];if(0<b[3])if(u===et.CANVAS||u===et.WEBGL){if(t.save(),t.beginPath(),"inset"===n){var b=e+m+E,M=r+_+E,s=f+m-E,l=i+_-E,h=[[b,M],[s,M],[s,l],[b,l]],h=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[h[0][0],h[0][1],h[2][0],h[2][1]]);if(!h)return;h=[[h[0],h[1]],[h[2],h[1]],[h[2],h[3]],[h[0],h[3]],[h[0],h[1]]],E?(vu(t,h),vu(t,o.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==T&&(t.fillStyle=T),vu(t,o),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),vu(t,h),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=T,t.shadowBlur=v,vu(t,[[b,M],[s,M],[s,l],[e-a,l],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,l],[b,l],[b,M]])):(vu(t,o),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=m,t.shadowOffsetY=_,t.shadowColor=T,t.shadowBlur=v,vu(t,[[e,r],[f,r],[f,i],[e-a,i],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,i],[e,i],[e,r]]))}else{var h=e+m-E,s=r+_-E,l=f+m+E,b=i+_+E,M=[[h,s],[l,s],[l,b],[h,b]],s=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[M[0][0],M[0][1],M[2][0],M[2][1]]);E?(vu(t,o),vu(t,M.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==T&&(t.fillStyle=T),vu(t,M),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),s&&vu(t,[[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()),vu(t,o),vu(t,M),vu(t,A),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=T,t.shadowBlur=v,vu(t,M)):(vu(t,o),vu(t,A),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=m,t.shadowOffsetY=_,t.shadowColor=T,t.shadowBlur=v,vu(t,o))}t.fill(),t.closePath(),t.restore()}else u===et.SVG&&(l=Rr.outerSize(v),"inset"===n?(n=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[(u=[[h=e+m+E,b=r+_+E],[s=f+m-E,b],[s,M=i+_-E],[h,M]])[0][0],u[0][1],u[2][0],u[2][1]]))&&(n=[[n[0],n[1]],[n[2],n[1]],[n[2],n[3]],[n[0],n[3]],[n[0],n[1]]],E?(c.__config[xu].push(u={tagName:"filter",props:[["x",-l/d],["y",-l/y],["width",1+2*l/d],["height",1+2*l/y]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",T]]}]}),p=t.add(u),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",Eu(n)+Eu(o.slice(0).reverse())],["fill","#FFF"]]}]},g=t.add(x),c.__config[xu].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Eu(o)],["fill",T],["clip-path","url(#"+g+")"]]}),u={tagName:"clipPath",children:[{tagName:"path",props:[["d",Eu(n)],["fill","#FFF"]]}]},g=t.add(u),c.__config[xu].push(u),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Eu([[h,b],[s,b],[s,M],[e-a,M],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,M],[h,M],[h,b]])],["fill","#FFF"],["filter","url(#"+p+")"],["clip-path","url(#"+g+")"]]})):(n=t.add(x={tagName:"filter",props:[["x",-l/d],["y",-l/y],["width",1+2*l/d],["height",1+2*l/y]],children:[{tagName:"feDropShadow",props:[["dx",m],["dy",_],["stdDeviation",.5*v],["flood-color",T]]}]}),c.__config[xu].push(x),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",Eu(o)],["fill","#FFF"]]}]},u=t.add(x),c.__config[xu].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Eu([[e,r],[f,r],[f,i],[e-a,i],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,i],[e,i],[e,r]])],["fill","#FFF"],["filter","url(#"+n+")"],["clip-path","url(#"+u+")"]]}))):(g=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[(p=[[s=e+m-E,M=r+_-E],[h=f+m+E,M],[h,b=i+_+E],[s,b]])[0][0],p[0][1],p[2][0],p[2][1]]),E?(a=t.add(x={tagName:"filter",props:[["x",-l/d],["y",-l/y],["width",1+2*l/d],["height",1+2*l/y]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",T]]}]}),c.__config[xu].push(x),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",Eu(o)+Eu(p.slice(0).reverse())],["fill","#FFF"]]}]},n=t.add(x),c.__config[xu].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Eu(p)],["fill",T],["clip-path","url(#"+n+")"]]}),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",(g?Eu([[g[0],g[1]],[g[2],g[1]],[g[2],g[3]],[g[0],g[3]],[g[0],g[1]]].reverse()):"")+Eu(o)+Eu(p)+Eu(A)],["fill","#FFF"]]}]},n=t.add(x),c.__config[xu].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Eu(p)],["fill","#FFF"],["filter","url(#"+a+")"],["clip-path","url(#"+n+")"]]})):(e=t.add(u={tagName:"filter",props:[["x",-l/d],["y",-l/y],["width",1+2*l/d],["height",1+2*l/y]],children:[{tagName:"feDropShadow",props:[["dx",m],["dy",_],["stdDeviation",.5*v],["flood-color",T]]}]}),c.__config[xu].push(u),u={tagName:"clipPath",children:[{tagName:"path",props:[["d",Eu(o)+Eu(A)],["fill","#FFF"]]}]},r=t.add(u),c.__config[xu].push(u),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Eu(o)],["fill","#FFF"],["filter","url(#"+e+")"],["clip-path","url(#"+r+")"]]}))))}},Tu={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,colorDodge:!0,colorBurn:!0,hardLight:!0,softLight:!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};var Si=function(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})},mi=function(t){return Tu.hasOwnProperty(t)},Au=ne.svgPolygon,Mu=et.CANVAS,Ru=et.SVG,Su=et.WEBGL,Ou=Po.LOCAL,Cu=T.STYLE_KEY,Iu=T.STYLE_RV_KEY,wu=T.style2Upper,n=T.STYLE_KEY,ku=n.BORDER_TOP_LEFT_RADIUS,Du=n.BORDER_TOP_RIGHT_RADIUS,Lu=n.BORDER_BOTTOM_LEFT_RADIUS,Fu=n.BORDER_BOTTOM_RIGHT_RADIUS,Nu=n.PADDING_LEFT,Pu=n.PADDING_RIGHT,Bu=n.PADDING_TOP,Hu=n.PADDING_BOTTOM,Gu=n.MARGIN_LEFT,Yu=n.MARGIN_TOP,Wu=n.MARGIN_BOTTOM,Uu=n.MARGIN_RIGHT,Xu=n.BORDER_LEFT_WIDTH,zu=n.BORDER_TOP_WIDTH,Vu=n.BORDER_BOTTOM_WIDTH,Ku=n.BORDER_RIGHT_WIDTH,ju=n.TOP,$u=n.RIGHT,qu=n.BOTTOM,Zu=n.LEFT,Ju=n.POSITION,Qu=n.DISPLAY,t_=n.WIDTH,e_=n.HEIGHT,r_=n.MATRIX,i_=n.TRANSLATE_X,n_=n.TRANSLATE_Y,a_=n.TRANSLATE_Z,o_=n.TRANSFORM,s_=n.SCALE_X,l_=n.SCALE_Y,h_=n.SCALE_Z,c_=n.ROTATE_X,u_=n.ROTATE_Y,__=n.ROTATE_Z,f_=n.SKEW_X,d_=n.SKEW_Y,y_=n.PERSPECTIVE,p_=n.PERSPECTIVE_ORIGIN,g_=n.ROTATE_3D,x_=n.TRANSFORM_ORIGIN,m_=n.BACKGROUND_POSITION_X,v_=n.BACKGROUND_POSITION_Y,E_=n.BACKGROUND_SIZE,b_=n.BACKGROUND_COLOR,T_=n.BACKGROUND_IMAGE,A_=n.BACKGROUND_REPEAT,M_=n.BOX_SHADOW,R_=n.OPACITY,S_=n.Z_INDEX,O_=n.BORDER_TOP_STYLE,C_=n.BORDER_RIGHT_STYLE,I_=n.BORDER_BOTTOM_STYLE,w_=n.BORDER_LEFT_STYLE,k_=n.FILTER,D_=n.OVERFLOW,L_=n.MIX_BLEND_MODE,F_=n.TEXT_OVERFLOW,N_=n.BORDER_TOP_COLOR,P_=n.BORDER_BOTTOM_COLOR,B_=n.BORDER_LEFT_COLOR,H_=n.BORDER_RIGHT_COLOR,G_=n.FONT_STYLE,Y_=n.COLOR,W_=n.VISIBILITY,U_=n.POINTER_EVENTS,X_=n.BORDER_TOP,z_=n.BORDER_RIGHT,V_=n.BORDER_BOTTOM,K_=n.BORDER_LEFT,j_=n.BACKGROUND_CLIP,$_=n.FONT_SIZE,q_=n.FONT_FAMILY,Z_=n.LINE_HEIGHT,J_=n.TEXT_STROKE_COLOR,Q_=n.TEXT_STROKE_WIDTH,tf=n.TEXT_STROKE_OVER,ef=n.FONT_WEIGHT,rf=n.FLEX_DIRECTION,nf=n.JUSTIFY_CONTENT,af=n.ALIGN_ITEMS,of=n.ALIGN_SELF,sf=n.FLEX_GROW,lf=n.FLEX_SHRINK,hf=n.LINE_CLAMP,cf=n.ORDER,uf=n.FLEX_WRAP,_f=n.ALIGN_CONTENT,ff=n.TEXT_ALIGN,df=n.LETTER_SPACING,yf=n.WHITE_SPACE,pf=n.WRITING_MODE,xi=T.UPDATE_KEY,gf=xi.UPDATE_NODE,xf=xi.UPDATE_FOCUS,mf=xi.UPDATE_STYLE,vf=xi.UPDATE_OVERWRITE,Ef=xi.UPDATE_KEYS,bf=xi.UPDATE_CONFIG,Tf=xi.UPDATE_REMOVE_DOM,Af=T.STRUCT_KEY.STRUCT_HAS_MASK,bi=T.NODE_KEY,Mf=bi.NODE_TAG_NAME,Rf=bi.NODE_CACHE_STYLE,Sf=bi.NODE_CURRENT_STYLE,Of=bi.NODE_COMPUTED_STYLE,Cf=bi.NODE_STYLE,If=bi.NODE_STRUCT,wf=bi.NODE_OPACITY,kf=bi.NODE_MATRIX_EVENT,Df=bi.NODE_MATRIX,Lf=bi.NODE_LIMIT_CACHE,Ff=bi.NODE_HAS_CONTENT,Nf=bi.NODE_REFRESH_LV,Pf=bi.NODE_CACHE,Bf=bi.NODE_CACHE_TOTAL,Hf=bi.NODE_CACHE_FILTER,Gf=bi.NODE_CACHE_MASK,Yf=bi.NODE_CACHE_OVERFLOW,Wf=bi.NODE_IS_DESTROYED,Uf=bi.NODE_DEFS_CACHE,Xf=bi.NODE_DOM_PARENT,zf=bi.NODE_IS_INLINE,Vf=bi.NODE_PERSPECTIVE_MATRIX,Kf=bi.NODE_IS_MASK,jf=bi.NODE_VIRTUAL_DOM,$f=bi.NODE_CACHE_AS_BITMAP,qf=r.AUTO,Zf=r.PX,Jf=r.PERCENT,Qf=r.INHERIT,t0=r.NUMBER,e0=r.RGBA,r0=r.STRING,i0=r.REM,n0=r.VW,a0=r.VH,o0=r.VMAX,s0=r.VMIN,l0=r.DEG,h0=r.GRADIENT,c0=At.int2rgba,u0=At.rgba2int,_0=At.joinArr,f0=At.isNil,d0=At.isFunction,y0=mn.calRelative,p0=mn.calNormalLineHeight,g0=mn.calFontFamily,x0=mn.spreadBoxShadow,m0=mn.spreadFilter,v0=Tr.GEOM,E0=Si,b0=mi,T0=Ht.point2d,A0=Ko.contain,M0=Ko.NONE,R0=Ko.TRANSFORM,S0=Ko.REFLOW,O0=Ko.REPAINT,C0=Ko.TRANSLATE_X,I0=Ko.TRANSLATE_Y,w0=Ko.TRANSLATE_Z;function k0(t){for(var e=0,r=t.flowChildren,i=r.length,n=0;n<i;n++){var a=r[n];if(!(a instanceof D0||a instanceof dl&&a.shadowRoot instanceof D0))break;if(a.flowChildren&&a.flowChildren.length){e+=k0(a);break}a.__config[zf]&&(e+=a.outerWidth)}return e}var D0=function(){d(a,w);var n=y(a);function a(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=(_(this,a),r=n.call(this),Array.isArray(e)?r.props=At.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[],r.__isClip=!!r.props.clip),e=r.__isMask=e||!!r.props.mask,i=r.__config;return i[Mf]=t,i[Rf]=r.__cacheStyle,i[Sf]=r.__currentStyle,i[Of]=r.__computedStyle,i[Nf]=S0,i[Cf]=r.__style,i[Df]=[],i[kf]=[],i[Uf]=r.__cacheDefs,i[Kf]=e,r.__frameAnimateList=[],r.__contentBoxList=[],i[$f]=r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r.__layoutData=null,r.__hasComputeReflow=!1,r.__parentLineBox=null,r.__fontRegister={},r}return f(a,[{key:"__structure",value:function(t,e,r){t=N(F(a.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(t[Af]=this.__hasMask),this.__config[If]=t}},{key:"__mp",value:function(r,i,n){var a=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=Cu[wu("margin"+t)],t=Cu[wu("padding"+t)];i[e]=a.__calSize(r[e],n,!0),i[t]=a.__calSize(r[t],n,!0)})}},{key:"__calSize",value:function(t,e,r){return t[1]===Zf?t[0]:t[1]===Jf&&r?t[0]*e*.01:t[1]===i0?t[0]*this.root.computedStyle[$_]:t[1]===n0?t[0]*this.root.width*.01:t[1]===a0?t[0]*this.root.height*.01:t[1]===o0?t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===s0?t[0]*Math.min(this.root.width,this.root.height)*.01:0}},{key:"__computeReflow",value:function(){var o=this;if(!this.__hasComputeReflow){this.__hasComputeReflow=!0;var s=this.currentStyle,l=this.computedStyle,t=this.domParent,h=!t,c=t&&t.computedStyle,e=([$_,q_,ef,pf].forEach(function(t){var e=s[t];if(t===q_)if(e[1]===Qf)l[t]=h?Nt.INHERIT[Iu[t]]:c[t];else{l[t]=e[0];for(var r=e[0].split(/\s*,\s*/),i=0,n=r.length;i<n;i++){var a=r[i].replace(/^['"]/,"").replace(/['"]$/,"");if(Ot.hasRegister(a)&&(Ot.hasLoaded(a)||Mt.checkSupportFontFamily(a)))break;o.__fontRegister[a]=!0,Ot.onRegister(a,o)}}else e[1]===Qf?l[t]=h?Nt.INHERIT[Iu[t]]:c[t]:e[1]===Jf?l[t]=h?Nt.INHERIT[Iu[t]]:c[t]*e[0]*.01:e[1]===i0?l[t]=h?Nt.INHERIT[Iu[t]]:o.root.computedStyle[$_]*e[0]:e[1]===n0?l[t]=h?Nt.INHERIT[Iu[t]]:.01*o.root.width*e[0]:e[1]===a0?l[t]=h?Nt.INHERIT[Iu[t]]:.01*o.root.height*e[0]:e[1]===o0?l[t]=h?Nt.INHERIT[Iu[t]]:.01*Math.max(o.root.width,o.root.height)*e[0]:e[1]===s0?l[t]=h?Nt.INHERIT[Iu[t]]:.01*Math.min(o.root.width,o.root.height)*e[0]:l[t]=e[0]}),[zu,Ku,Vu,Xu].forEach(function(t){var e=s[t];l[t]=o.__calSize(e,0,!1)}),[Ju,Qu,rf,nf,af,of,sf,lf,hf,cf,uf,_f,D_,F_].forEach(function(t){l[t]=s[t]}),c&&l[pf]!==c[pf]&&"inline"===l[Qu]&&(l[Qu]="inlineBlock"),("absolute"===l[Ju]||c&&"flex"===c[Qu])&&-1===["block","flex"].indexOf(l[Qu])&&(l[Qu]="block"),s[ff]),e=(e[1]===Qf?l[ff]=h?"left":c[ff]:l[ff]=e[0],l[$_]),r=s[Z_];if(r[1]===Qf)if(h)l[Z_]=p0(l);else{for(var i,n=t;n&&(i=n.currentStyle[Z_])[1]===Qf;)n=n.domParent;-1<[qf,Qf].indexOf(i[1])?l[Z_]=p0(l):i[1]===t0?l[Z_]=Math.max(i[0],0)*e:l[Z_]=c[Z_]}else r[1]===t0?l[Z_]=Math.max(r[0],0)*e||p0(l):(t=Math.max(this.__calSize(r,e,!0),0),l[Z_]=t||p0(l));r=s[df],t=(r[1]===Qf?l[df]=h?0:c[df]:l[df]=this.__calSize(r,e,!0),s[yf]);t[1]===Qf?l[yf]=h?"normal":c[yf]:l[yf]=t[0]}}},{key:"__emitFontRegister",value:function(t){var e=this,r=e.__fontRegister;if(!e.isDestroyed){delete r[t];var i=e.root,r=e.currentStyle,n=e.__config;if(i){r=r[q_];if(r[1]!==Qf)for(var a=r[0].split(/\s*,\s*/),o=0,s=a.length;o<s;o++){var l=a[o].replace(/^['"]/,"").replace(/['"]$/,"");if(l===t)return void(Ot.hasRegister(l)&&i.addRefreshTask({__before:function(){var t;n[Wf]||((t={})[gf]=e,t[xf]=Ko.REFLOW,t[bf]=n,i.__addUpdate(e,n,i,i.__config,t))}}));if(Ot.hasRegister(l)&&(Ot.hasLoaded(l)||Mt.checkSupportFontFamily(l)))return}}}}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;f0(t)||(this.__width=r[t_]=t,this.__clientWidth=t+=r[Nu]+r[Pu],this.__offsetWidth=t+=r[Xu]+r[Ku],this.__outerWidth=t+r[Gu]+r[Uu]),f0(e)||(this.__height=r[e_]=e,this.__clientHeight=e+=r[Bu]+r[Hu],this.__offsetHeight=e+=r[zu]+r[Vu],this.__outerHeight=e+r[Yu]+r[Wu])}},{key:"__addMBP",value:function(t,e,r,i,n,a){var o,s=r[Gu],l=r[Yu],h=r[Uu],c=r[Wu],u=r[Nu],_=r[Bu],f=r[Pu],r=r[Hu],d=i[zu],y=i[Ku],p=i[Vu],i=i[Xu],g=this.__calSize(s,e,a)+this.__calSize(h,e,a)+this.__calSize(u,e,a)+this.__calSize(f,e,a)+i+y;return n=t?n.map(function(t){return t+g}):(o=this.__calSize(l,e,a)+this.__calSize(c,e,a)+this.__calSize(_,e,a)+this.__calSize(r,e,a)+d+p,n.map(function(t){return t+o}))}},{key:"__layout",value:function(t,e,r,i){this.__computeReflow();var n=t.w,a=this.isDestroyed,o=this.currentStyle,s=this.computedStyle,c=this.__config,l=(this.__ellipsis&&(this.__ellipsis=null),this.__parentLineBox=null,this.__isIbFull=this.__isUprightIbFull=!1,s[Qu]),u=s[Ju];if(this.__layoutData={x:t.x,y:t.y,w:n,h:t.h,lx:t.lx,ly:t.ly,isUpright:t.isUpright},!e&&!r&&!i){this.clearCache(),c[Nf]=S0,c[Lf]=!1,c[zf]=!1;var h=this.next;if(!this.isMask&&h&&h.isMask){for(var _=0;h&&h.isMask;)_++,h=h.next;this.__hasMask=_}}if(this.__ox=this.__oy=0,a||"none"===l)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=s[t_]=s[e_]=0,this.__x=t.x,this.__y=t.y,this.__layoutNone(),void(this.__hasComputeReflow=!1);"absolute"!==u&&this.__mp(o,s,n);a=t.lineClampCount||0;return"flex"===l?(t.lineClampCount=0,this.__layoutFlex(t,e,r,i)):"inlineBlock"===l?(t.lineClampCount=0,this.__layoutInline(t,e,r,i)):"inline"===l?a=this.__layoutInline(t,e,r,i,!0):(t.lineClampCount=0,this.__layoutBlock(t,e,r,i)),e||r||i||("relative"===u?(n=o[ju],l=o[$u],t=o[qu],e=o[Zu],r=this.parent,n[1]!==qf?(i=y0(o,ju,n,r),this.__offsetY(i),s[ju]=i,s[qu]="auto"):t[1]!==qf?(n=y0(o,qu,t,r),this.__offsetY(-n),s[qu]=n,s[ju]="auto"):s[ju]=s[qu]="auto",e[1]!==qf?(i=y0(o,Zu,e,r,!0),this.__offsetX(i),s[Zu]=i,s[$u]="auto"):l[1]!==qf?(t=y0(o,$u,l,r,!0),this.__offsetX(-t),s[$u]=t,s[Zu]="auto"):s[Zu]=s[$u]="auto"):"absolute"!==u&&(s[ju]=s[qu]=s[Zu]=s[$u]="auto"),n=this.__sx=this.x+this.ox,e=this.__sy=this.y+this.oy,c[zf]||(n=this.__sx1=n+s[Gu],n=this.__sx2=n+s[Xu],n=this.__sx3=n+s[Nu],n=this.__sx4=n+this.width,n=this.__sx5=n+s[Pu],this.__sx6=n+s[Ku],e=this.__sy1=e+s[Yu],e=this.__sy2=e+s[zu],e=this.__sy3=e+s[Bu],e=this.__sy4=e+this.height,e=this.__sy5=e+s[Hu],this.__sy6=e+s[Vu]),s[t_]=this.width,s[e_]=this.height,"absolute"!==u&&this.__execAr(),this.__hasComputeReflow=!1),a}},{key:"__execAr",value:function(){var t,e=this.__animateRecords;e&&(this.__animateRecords=null,e.list.forEach(function(t){t.target.vd instanceof a&&(t.target=t.target.vd)}),t=e.controller||this.root.animateController,e.options&&!1===e.options.autoPlay?(t.__records2=t.__records2.concat(e.list),t.init(t.__records2,t.list2)):(t.__records=t.__records.concat(e.list),t.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[Qu]="none",t[Yu]=t[Uu]=t[Wu]=t[Gu]=t[zu]=t[Ku]=t[Vu]=t[Xu]=t[Bu]=t[Pu]=t[Hu]=t[Nu]=t[t_]=t[e_]=this.__width=this.__height=0}},{key:"__preLayout",value:function(t,e){var r,i,n=t.x,a=t.y,o=t.w,s=t.h,c=t.w2,u=t.h2,_=t.w3,f=t.h3,d=t.lx,y=t.ly,p=t.lineBoxManager,g=t.endSpace,g=void 0===g?0:g,x=t.isUpright,l=(this.__x=n,this.__y=a,this.currentStyle),h=this.computedStyle,m=l[t_],l=l[e_],v=h[zu],E=h[Ku],b=h[Vu],T=h[Xu],A=h[Yu],M=h[Uu],R=h[Wu],S=h[Gu],O=h[Bu],C=h[Pu],I=h[Hu],w=h[Nu],h=0===h[pf].indexOf("vertical"),c=(void 0!==c?(r=!0,o=c):void 0!==_?(r=!0,o=_):m[1]===qf||e||(o=this.__calSize(m,o,r=!0)),void 0!==u?(i=!0,s=u):void 0!==f?(i=!0,s=f):l[1]===qf||e||(s=this.__calSize(l,s,i=!0)),e?h?a+=v+A+O:n+=T+S+w:(n+=T+S+w,a+=v+A+O),t.x=n,t.y=a,0);return e||(m[1]!==qf&&void 0===_||(o-=T+E+S+M+w+C),l[1]!==qf&&void 0===f||(s-=v+b+A+R+O+I)),{fixedWidth:r,fixedHeight:i,x:n,y:a,w:o,h:s,lx:d,ly:y,lineBoxManager:p,endSpace:g,selfEndSpace:c=e?h?I+b+R:C+E+M:c,isParentVertical:x,isUpright:h}}},{key:"__marginAuto",value:function(t,e,r){var i=t[Ju],n=t[Qu],a=t[Yu],o=t[Wu],s=t[Gu],l=t[Uu],h=t[t_],t=t[e_];"absolute"===i||"block"!==n&&"flex"!==n||(r?t[1]===qf&&!this.isReplaced||a[1]!==qf||o[1]!==qf||(i=this.outerHeight)<e.h&&this.__offsetY(.5*(e.h-i),!0):h[1]===qf&&!this.isReplaced||s[1]!==qf||l[1]!==qf||(n=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-n),!0))}},{key:"__calMatrix",value:function(t,e,i,n,r,c,u,a,_){var f=this;if(r[zf])return n[x_]=[c,u],e[r_]=Ht.identity();var o,d,y,s,l,h,r=e[r_];return r&&t<S0&&!A0(t,R0)?(d=h=o=0,A0(t,C0)&&(l=i[i_],o=(l=f0(l)?0:l[1]===Zf?l[0]:this.__calSize(l,this.offsetWidth,!0))-(n[i_]||0),n[i_]=l,n[o_][12]+=o,r[12]+=o),A0(t,I0)&&(l=i[n_],h=(l=f0(l)?0:l[1]===Zf?l[0]:this.__calSize(l,this.offsetHeight,!0))-(n[n_]||0),n[n_]=l,n[o_][13]+=h,r[13]+=h),A0(t,w0)&&(o=i[a_],d=(o=f0(o)?0:this.__calSize(o,this.offsetWidth,!0))-(n[a_]||0),n[a_]=o,n[o_][14]+=d,r[14]+=d),e[r_]=r):(void 0===c&&(c=this.__sx1,u=this.__sy1,a=this.offsetWidth,_=this.offsetHeight),void 0===e[x_]&&(e[x_]=!0,r=null,n[x_]=i[x_].map(function(t,e){return f.__calSize(t,e?_:a,!0)})),void 0!==e[o_]&&void 0!==e[i_]&&void 0!==e[n_]&&void 0!==e[a_]&&void 0!==e[c_]&&void 0!==e[u_]&&void 0!==e[__]&&void 0!==e[g_]&&void 0!==e[s_]&&void 0!==e[l_]&&void 0!==e[h_]&&void 0!==e[f_]&&void 0!==e[d_]||(e[o_]=e[i_]=e[n_]=e[a_]=e[c_]=e[u_]=e[__]=e[s_]=e[l_]=e[h_]=e[f_]=e[d_]=!0,r=null,i[o_]?y=$a.calMatrix(i[o_],a,_,this.root):(s=[],[i_,n_,a_,c_,u_,__,g_,f_,d_,s_,l_,h_].forEach(function(t){delete n[t];var e,r=i[t];if(!f0(r)){if(t===g_)return n[t]=[r[0],r[1],r[2],r[3][0]],0===r[3][0]?void 0:void s.push([t,r]);n[t]=r[0],t!==c_&&t!==u_&&t!==__?(e=t===s_||t===l_||t===h_,1===r[0]&&e||!e&&0===r[0]||(e=t===i_||t===a_?a:_,n[t]=f.__calSize(r,e,!0),s.push([t,r]))):s.push([t,r])}}),s.length&&(y=$a.calMatrix(s,a,_,this.root))),n[o_]=y||Ht.identity()),r||(l=n[o_],(h=n[x_].slice(0))[0]+=c||0,h[1]+=u||0,r=e[r_]=$a.calMatrixByOrigin(l,h))),r}},{key:"__calCache",value:function(c,u,t,a,e,n,_,f,r,d,y,p,g,x,m,v,E,b,T,A,i,o,M,R,S,O,C,I,w,k){var s=this,l=T,h=S,D=R,L=k,F=n[j_]=e[j_],N=("paddingBox"===F?(l=A,h=O,D=M,L=w):"contentBox"===F&&(l=i,h=C,D=o,L=I),this.__config[zf]),P=(N&&!this.contentBoxList.length&&(N=!1),[R_,S_,O_,C_,I_,w_,A_,D_,L_,F_,j_].forEach(function(t){n[t]=e[t]}),f0(a[k_])&&(a[k_]=!0,this.__calFilter(e,n)),f0(a[m_])&&(a[m_]=!0,F=e[m_],n[m_]=(F||[]).map(function(t){return t[1]===Jf?t[0]+"%":s.__calSize(t,D-l,!0)})),f0(a[v_])&&(a[v_]=!0,i=e[v_],n[v_]=(i||[]).map(function(t){return t[1]===Jf?t[0]+"%":s.__calSize(t,L-h,!0)})),f0(a[E_])&&(a[E_]=!0,n[E_]=(e[E_]||[]).map(function(t){if(Array.isArray(t))return t.map(function(t,e){return t[1]===qf?-1:t[1]===r0?"contain"===t[0]?-2:-3:s.__calSize(t,e?L-h:D-l,!0)})})),f0(a[T_])&&(C=e[T_],n[T_]=C.map(function(t){return t?t[0]:null}),a[T_]=C.map(function(t,e){return t?t[1]===r0?(r=s.__loadBgi[e]=s.__loadBgi[e]||{},(e=Mt.IMG[t[0]])&&e.state===Mt.LOADED?(r.url=t[0],r.source=e.source,r.width=e.width,r.height=e.height):r.url!==t[0]&&(r.url=t[0],r.source=null,n=(i=s).root,Mt.measureImg(t[0],function(t){t.success&&t.url===r.url&&!s.isDestroyed&&(r.source=t.source,r.width=t.width,r.height=t.height,n.delRefreshTask(r.cb),n.addRefreshTask(r.cb={__before:function(){a[T_]=void 0;var t={};t[gf]=i,t[xf]=O0,t[bf]=i.__config,n.__addUpdate(i,i.__config,n,n.__config,t)}}))},{ctx:u,root:n,width:D-l,height:L-h})),!0):!(N||!t[0]||t[1]!==h0)||void 0:null;var r,i,n})),f0(a[M_])&&(a[M_]=!0,n[M_]=(e[M_]||[]).map(function(t){return t.map(function(t,e){return 3<e?t:s.__calSize(t,0===e?D-l:L-h,!0)})})),[b_,N_,H_,P_,B_].forEach(function(t){f0(a[t])&&(a[t]=c0(n[t]=e[t][0]))}),(f0(a[ku])||f0(a[Du])||f0(a[Fu])||f0(a[Lu]))&&(a[ku]=a[Du]=a[Fu]=a[Lu]=!0,N?We.calBorderRadiusInline(this.contentBoxList,e,n,this.root):We.calBorderRadius(r,d,e,n,this.root)),n[ku]),B=n[Du],H=n[Fu],G=n[Lu],o=(["Top","Right","Bottom","Left"].forEach(function(t){var e,r=Cu[wu(t="border"+t)],i=Cu[wu(t+"Width")],t=Cu[wu(t+"Style")];f0(a[i])&&(a[i]=!0,a[r]=void 0),f0(a[t])&&(a[t]=!0,a[r]=void 0),f0(a[r])&&(r===X_?0<y?N||(i=Math.atan(y/x),e=Math.atan(y/p),a[r]=We.calPoints(y,n[t],i,e,T,A,M,R,S,O,w,k,0,P,B)):a[r]=[]:r===z_?0<p?N||(i=Math.atan(p/y),e=Math.atan(p/g),a[r]=We.calPoints(p,n[t],i,e,T,A,M,R,S,O,w,k,1,B,H)):a[r]=[]:r===V_?0<g?N||(i=Math.atan(g/x),e=Math.atan(g/p),a[r]=We.calPoints(g,n[t],i,e,T,A,M,R,S,O,w,k,2,G,H)):a[r]=[]:r===K_&&(0<x?N||(i=Math.atan(x/y),e=Math.atan(x/g),a[r]=We.calPoints(x,n[t],i,e,T,A,M,R,S,O,w,k,3,P,G)):a[r]=[]))}),t&&t.computedStyle),I=(e[G_][1]===Qf?n[G_]=t?o[G_]:"normal":f0(a[G_])&&(n[G_]=e[G_][0]),a[G_]=n[G_],e[Y_]),i=(I[1]===Qf?(F=n[Y_]=t?o[Y_]:u0(Nt.INHERIT.color)).k?a[Y_]=F:a[Y_]=c0(n[Y_]):f0(a[Y_])&&(I[1]===h0?a[Y_]=n[Y_]=I[0]:I[1]===e0&&(a[Y_]=c0(n[Y_]=u0(I[0])))),e[J_]);return i[1]===Qf?(C=n[J_]=t?o[J_]:u0(Nt.INHERIT.textStrokeColor)).k?a[J_]=C:a[J_]=c0(n[J_]):f0(a[J_])&&(i[1]===h0?a[J_]=n[J_]=i[0]:i[1]===e0&&(a[J_]=c0(n[J_]=u0(i[0])))),e[Q_][1]===Qf?(n[Q_]=t?o[Q_]:Nt.INHERIT.textStrokeWidth,a[Q_]=!0):f0(a[Q_])&&(r=(r=e[Q_])[1]===i0?r[0]*this.root.computedStyle[$_]:r[1]===n0?r[0]*this.root.width*.01:r[1]===a0?r[0]*this.root.height*.01:r[1]===o0?r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===s0?r[0]*Math.min(this.root.width,this.root.height)*.01:r[0],n[Q_]=r,a[Q_]=!0),e[tf][1]===Qf?a[tf]=n[tf]=t?o[tf]:Nt.INHERIT.textStrokeOver:a[tf]=n[tf]=e[tf][0],e[W_][1]===Qf?n[W_]=t?o[W_]:"visible":f0(a[W_])&&(n[W_]=e[W_][0]),a[W_]=n[W_],e[U_][1]===Qf?n[U_]=t?o[U_]:"auto":f0(a[U_])&&(n[U_]=e[U_][0]),a[U_]=n[U_],this.__bx1=l,this.__bx2=D,this.__by1=h,this.__by2=L,[l,h,D,L]}},{key:"__calPerspective",value:function(t,e,r,i,n,a){var o,s,l=this;f0(t[y_])&&(o=t[y_]=!0,s=e[y_],s=this.__calSize(s,this.clientWidth,!0),r[y_]=s),f0(t[p_])&&(o=t[p_]=!0,r[p_]=e[p_].map(function(t,e){return l.__calSize(t,e?l.offsetHeight:l.offsetWidth,!0)})),o&&(void 0===n&&(n=this.__sx1,a=this.__sy1),(s=r[p_].slice(0))[0]+=n||0,s[1]+=a||0,i[Vf]=$a.calPerspectiveMatrix(r[y_],s))}},{key:"__calFilter",value:function(t,e){var r=this;return e[k_]=(t[k_]||[]).map(function(t){var t=Bt(t,2),e=t[0],t=t[1];return"dropShadow"!==e?[e,t=t[1]===l0||t[1]===Jf||t[1]===t0?t[0]:r.__calSize(t,r.root.width,!1)]:[e,t.map(function(t,e){return 3<e?t:r.__calSize(t,0===e?r.__bx2-r.__bx1:r.__by2-r.__by1,!0)})]})}},{key:"__calContent",value:function(t,e,r,i){if(t===Mu||t===Su){if(e<O0)return this.__hasContent;if("hidden"!==r[W_]){var n=r[T_];if(Array.isArray(n))for(var a=0,c=n.length;a<c;a++)if(n[a])return!0;if(0<r[b_][0][3]){var t=i[t_],e=i[e_],u=i[Bu],_=i[Pu],f=i[Hu],d=i[Nu];if(t&&e||u||_||f||d)return!0}for(var o=["Top","Right","Bottom","Left"],s=0,y=o.length;s<y;s++){var p=o[s];if(0<i[Cu[wu("border"+p+"Width")]]&&0<r[Cu[wu("border"+p+"Color")]][0][3])return!0}var l=r[M_];if(Array.isArray(l))for(var h=0,g=l.length;h<g;h++){var x=l[h];if(x&&0<x[4][3])return!0}}}return!1}},{key:"render",value:function(A,t,M,e){var L,R=this,S=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,O=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.isDestroyed,i=this.root,C=this.__config,n=C[Pf],F=C[Rf],a=C[Sf],I=C[Of];if(C[Nf]=M0,O0<=t&&(this.__bbox=null,this.__filterBbox=null),r)return{isDestroyed:r,break:!0};A===Ru&&(L=C[jf]=this.__virtualDom={bb:[],children:[],visibility:"visible"},C[Bf]?C[Bf].available||(C[Bf].available=!0):C[Bf]={available:!0,release:function(){this.available=!1,delete L.cache}});r=I[Qu];if("none"===r)return{break:!0};var o,s,l,h,c,u,_,f=this.clientWidth,d=this.clientHeight,y=this.offsetWidth,p=this.offsetHeight,g=this.__hasMask,N=I[Bu],P=I[Pu],B=I[Hu],H=I[Nu],w=I[Xu],G=I[Ku],k=I[zu],D=I[Vu],x=C[zf],m=this.__sx1,v=this.__sx2,E=this.__sx3,b=this.__sx4,T=this.__sx5,Y=this.__sx6,W=this.__sy1,U=this.__sy2,X=this.__sy3,z=this.__sy4,V=this.__sy5,K=this.__sy6,j={ctx:M,x1:m,x2:v,x3:E,x4:b,x5:T,x6:Y,y1:W,y2:U,y3:X,y4:z,y5:V,y6:K,sx1:m,sx2:v,sx3:E,sx4:b,sx5:T,sx6:Y,sy1:W,sy2:U,sy3:X,sy4:z,sy5:V,sy6:K,dx:S,dy:O},$=C[Xf],d=(A===Su&&this.__calPerspective(F,a,I,C),o=e&&A===Mu?C[Df]:this.__calMatrix(t,F,a,I,C,m,W,y,p),c=e&&A===Mu?(s=this.__bx1,h=this.__bx2,l=this.__by1,this.__by2):(f=Bt(this.__calCache(A,M,$,F,a,I,f,d,y,p,k,G,D,w,N,P,B,H,m,v,E,b,T,Y,W,U,X,z,V,K),4),s=f[0],l=f[1],h=f[2],f[3]),j.bx1=s,j.by1=l,j.bx2=h,j.by2=c,this.__hasContent=C[Ff]=this.__calContent(A,t,a,I)),q=(e&&A===Su?!d&&this.__releaseWhenEmpty(n,I)?(j.break=!0,C[Lf]=!1):C[Lf]||(v=this.bbox,n?n.reset(v,m,W):n=Po.getInstance(v,m,W),n&&n.enabled?(n.__bbox=v,M=n.ctx,S+=n.dx,O+=n.dy,j.ctx=M):(C[Lf]=!0,j.limitCache=j.break=!(n=null)),C[Pf]=n):A===Su&&(xt=Mt.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),j.ctx=M=xt.ctx),j.dx=S,j.dy=O,I[b_]),Z=I[N_],J=I[H_],Q=I[P_],tt=I[B_],E=I[ku],b=I[Du],T=I[Fu],U=I[Lu],X=I[W_],et=I[A_],rt=I[T_],z=I[R_],V=I[k_],it=I[E_],nt=I[M_],f=I[D_],t=I[L_],at=I[j_],ot=0===I[pf].indexOf("vertical");if(e&&A===Mu?z=C[wf]:A===Mu||A===Su?($&&(z*=$.__config[wf]),C[wf]=z):A===Ru&&(1===z?delete L.opacity:L.opacity=z),A===Ru&&(Ht.isE(o)?delete L.transform:L.transform="matrix("+_0(Ht.m2m6(o),",")+")",L.visibility=X),A===Mu&&e?o=C[kf]:(a=C[Df],At.assignMatrix(a,o),$&&($.perspectiveMatrix&&(o=Ht.multiply($.perspectiveMatrix,o)),o=Ht.multiply($.matrixEvent,o)),a=C[kf],At.assignMatrix(a,o)),j.limitCache)return j;"normal"!==t&&b0(t)?(t=E0(t),A===Mu&&e!==Ou?(d=i.width,v=i.height,xt=Mt.getCacheCanvas(d,v,null,"blend"),u={ctx:M,target:xt,mixBlendMode:t,matrix:o},M=xt.ctx):A===Ru&&(L.mixBlendMode=t)):A===Ru&&delete L.mixBlendMode,g&&A===Mu&&e!==Ou&&($=i.width,a=i.height,d=Mt.getCacheCanvas($,a,null,"mask1"),_={ctx:M,target:d,matrix:o},M=d.ctx);V&&V.length?A===Mu&&e!==Ou?(v=i.width,xt=i.height,t=Mt.getCacheCanvas(v,xt,null,"filter"),st={ctx:M,filter:V,target:t,matrix:o},M=t.ctx):A===Ru&&(L.filter=ne.svgFilter(V)):A===Ru&&delete L.filter;var st,lt,ht,ct,ut=E.slice(0),_t=b.slice(0),ft=T.slice(0),dt=U.slice(0);if("paddingBox"===at?(ut[0]-=w,ut[1]-=k,_t[0]-=G,_t[1]-=k,ft[0]-=G,ft[1]-=D,dt[0]-=w,dt[1]-=D):"contentBox"===at&&(ut[0]-=w+H,ut[1]-=k+N,_t[0]-=G+P,_t[1]-=k+N,ft[0]-=G+P,ft[1]-=D+B,dt[0]-=w+H,dt[1]-=D+B),"hidden"===f&&"inline"!==r?(ht=We.calRadius(s,l,h-s,c-l,ut,_t,ft,dt),A===Mu&&e!==Ou?(g=i.width,$=i.height,a=Mt.getCacheCanvas(g,$,null,"overflow"),lt={ctx:M,target:a,matrix:o},M=a.ctx,lt.x=m,lt.y=W,lt.offsetWidth=y,lt.offsetHeight=p,lt.list=ht):A===Ru&&(d={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",Au(ht)||"M".concat(m,",").concat(W,"L").concat(m+y,",").concat(W,"L").concat(m+y,",").concat(W+p,"L").concat(m,",").concat(W+p,",L").concat(m,",").concat(W)]]}]},v=M.add(d),C[Uf].push(d),L.overflow="url(#"+v+")")):A===Ru&&delete L.overflow,A===Mu&&(j.offscreenBlend=u,j.offscreenMask=_,j.offscreenFilter=st,j.offscreenOverflow=lt,(j.ctx=M).globalAlpha=z,e||M.setTransform(o[0],o[1],o[4],o[5],o[12],o[13])),("hidden"===X||j.break)&&(A===Mu||A===Su))return j.break=!0,j;if(n&&n.enabled&&(n.__available=!0),x){var yt=this.contentBoxList,pt=yt.length,gt=(yt[pt-1]instanceof Ro&&pt--,rt.some(function(t){return t}));if(pt){var xt=function(){for(var u,t,i,e=I[$_],r=I[q_],_=I[Z_],f=0,d=0,y=[],E=(gt&&(f=Sl.getInlineWidth(R,yt,ot),d=_,ot&&(f=(t=[d,f])[0],d=t[1]),"paddingBox"===at||"padding-box"===at?ot?(f+=N+B,d+=H+P):(f+=H+P,d+=N+B):"contentBox"!==at&&"content-box"!==at&&(ot?(f+=N+B+k+D,d+=H+P+w+G):(f+=H+P+w+G,d+=N+B+k+D)),A!==Mu&&A!==Su||(u=Mt.getCacheCanvas(f,d,"__$$INLINE_BGI$$__")),i=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=i-1-e,At.isString(t)?(r=R.__loadBgi[e]).url===t&&(r=Yl.renderImage(R,A,u&&u.ctx||M,r,0,0,f,d,ut,_t,ft,dt,I,e,it,et,C,!0,S,O),A===Ru&&r&&y.push(r)):!t.k||(e=R.__gradient(A,M,0,0,f,d,t,S,O))&&("conic"===e.k?sr.renderConic(R,A,u&&u.ctx||M,e.v,0,0,f,_,ut,_t,ft,dt,!0):(r=Yl.renderBgc(R,A,u&&u.ctx||M,e.v,null,0,0,f,d,ut,_t,ft,dt,"fill",!0),A===Ru&&r&&y.push(r))))})),e*((Ot.info[g0(r)]||{}).lgr||0)*.5),b=ot?mn.getVerticalBaseline(I):mn.getBaseline(I),p=!0,g=yt[0],x=g.parentLineBox,m=0,v=0;v<pt;v++){var T=yt[v];T.parentLineBox!==x&&!function(){var t=Bt(Sl.getInlineBox(R,ot,yt,g,yt[v-1],x,b,_,E,p,!1,at,N,P,B,H,k,G,D,w),8),i=t[0],n=t[1],e=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],h=(p&&(t=k0(R),i-=t,a-=t),0<q[3]&&Yl.renderBgc(R,A,M,F[b_],null,i,n,e-i,r-n,ut,[0,0],[0,0],dt,"fill",!1,S,O),e-i),c=r-n;A!==Mu&&A!==Su||!u?A===Ru&&y.length&&y.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ot?"M".concat(0,",",m,"L").concat(d,",").concat(m,"L").concat(d,",").concat(c+m,"L",0,",").concat(c+m,",L",0,",").concat(m):"M".concat(m,",",0,"L").concat(h+m,",",0,"L").concat(h+m,",").concat(d,"L").concat(m,",").concat(d,",L").concat(m,",",0)]]}]},r=M.add(e),C[Uf].push(e),L.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",ot?i:i-m],["y",ot?n-m:n],["clip-path","url(#"+r+")"]]}))}):ot?M.drawImage(u.canvas,0,m,f,c,i+S,n+O,f,c):M.drawImage(u.canvas,m,0,h,d,i+S,n+O,h,d),m+=ot?c:h,nt&&nt.forEach(function(t){bu.renderBoxShadow(R,A,M,t,a,o,s,l,s-a,l-o,S,O)}),0<k&&0<Z[3]&&(t=Math.atan(k/w),e=Math.atan(k/G),r=We.calPoints(k,I[O_],t,e,a,a+w,s,s,o,o+k,l-D,l,0,p?ut:[0,0],[0,0]),We.renderBorder(R,A,M,r,F[N_],S,O)),0<D&&0<Q[3]&&(t=Math.atan(D/w),e=Math.atan(D/G),r=We.calPoints(D,I[I_],t,e,a,a+w,s,s,o,o+k,l-D,l,2,p?ut:[0,0],[0,0]),We.renderBorder(R,A,M,r,F[P_],S,O)),p&&0<w&&0<tt[3]&&(t=Math.atan(w/k),e=Math.atan(w/D),r=We.calPoints(w,I[w_],t,e,a,a+w,s-G,s,o,o+k,l-D,l,3,ut,_t),We.renderBorder(R,A,M,r,F[B_],S,O)),p=!1,x=(g=T).parentLineBox}(),v===pt-1&&function(){var t=Bt(Sl.getInlineBox(R,ot,yt,g,yt[v],x,b,_,E,p,!0,at,N,P,B,H,k,G,D,w),8),i=t[0],n=t[1],e=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],t=(p&&(t=k0(R),i-=t,a-=t),function t(e){for(var r=0,i=e.flowChildren,n=i.length-1;0<=n;n--){var a=i[n];if(!(a instanceof D0||a instanceof dl&&a.shadowRoot instanceof D0))break;if(a.flowChildren&&a.flowChildren.length){r+=t(a);break}r+=a.outerWidth}return r}(R)),h=(e+=t,s+=t,0<q[3]&&Yl.renderBgc(R,A,M,F[b_],null,i,n,e-i,r-n,p?ut:[0,0],_t,ft,p?dt:[0,0],"fill",!1,S,O),e-i),c=r-n;A!==Mu&&A!==Su||!u?A===Ru&&y.length&&y.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ot?"M".concat(0,",",m,"L").concat(d,",").concat(m,"L").concat(d,",").concat(c+m,"L",0,",").concat(c+m,",L",0,",").concat(m):"M".concat(m,",",0,"L").concat(h+m,",",0,"L").concat(h+m,",").concat(d,"L").concat(m,",").concat(d,",L").concat(m,",",0)]]}]},r=M.add(e),C[Uf].push(e),L.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",ot?i:i-m],["y",ot?n-m:n],["clip-path","url(#"+r+")"]]}))}):ot?M.drawImage(u.canvas,0,m,f,c,i+S,n+O,f,c):M.drawImage(u.canvas,m,0,h,d,i+S,n+O,h,d),nt&&nt.forEach(function(t){bu.renderBoxShadow(R,A,M,t,a,o,s,l,s-a,l-o,S,O)}),0<k&&0<Z[3]&&(t=Math.atan(k/w),e=Math.atan(k/G),r=We.calPoints(k,I[O_],t,e,a,a,s-G,s,o,o+k,l-D,l,0,p?ut:[0,0],_t),We.renderBorder(R,A,M,r,F[N_],S,O)),0<G&&0<J[3]&&(t=Math.atan(G/k),e=Math.atan(G/D),r=We.calPoints(G,I[C_],t,e,a,a+w,s-G,s,o,o+k,l-D,l,1,ut,_t),We.renderBorder(R,A,M,r,F[H_],S,O)),0<D&&0<Q[3]&&(t=Math.atan(D/w),e=Math.atan(D/G),r=We.calPoints(D,I[I_],t,e,a,a,s-G,s,o,o+k,l-D,l,2,p?ut:[0,0],_t),We.renderBorder(R,A,M,r,F[P_],S,O)),p&&0<w&&0<tt[3]&&(t=Math.atan(w/k),e=Math.atan(w/D),r=We.calPoints(w,I[w_],t,e,a,a+w,s-G,s,o,o+k,l-D,l,3,ut,_t),We.renderBorder(R,A,M,r,F[B_],S,O))}()}return u&&u.ctx.clearRect(0,0,f,d),{v:j}}();if("object"===mt(xt))return xt.v}else if(s===h||l===c)return j}return 0<q[3]&&Yl.renderBgc(this,A,M,F[b_],ht,s,l,h-s,c-l,ut,_t,ft,dt,"fill",!1,S,O),rt&&(ct=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=ct-1-e,At.isString(t)?(r=R.__loadBgi[e]).url===t&&Yl.renderImage(R,A,M,r,s,l,h,c,ut,_t,ft,dt,I,e,it,et,C,!1,S,O):!t.k||(r=R.__gradient(A,M,s,l,h,c,t,S,O))&&("conic"===r.k?sr.renderConic(R,A,M,r.v,s,l,h-s,c-l,ut,_t,ft,dt):Yl.renderBgc(R,A,M,r.v,ht,s,l,h-s,c-l,ut,_t,ft,dt,"fill",!1,S,O)))})),nt&&nt.forEach(function(t){bu.renderBoxShadow(R,A,M,t,m,W,Y,K,Y-m,K-W,S,O)}),0<k&&0<Z[3]&&We.renderBorder(this,A,M,F[X_],F[N_],S,O),0<G&&0<J[3]&&We.renderBorder(this,A,M,F[z_],F[H_],S,O),0<D&&0<Q[3]&&We.renderBorder(this,A,M,F[V_],F[P_],S,O),0<w&&0<tt[3]&&We.renderBorder(this,A,M,F[K_],F[B_],S,O),j}},{key:"__destroy",value:function(){if(!this.isDestroyed){N(F(a.prototype),"__destroy",this).call(this);var t,e=this.root,r=(this.clearAnimate(),this.clearFrameAnimate(),e&&e.delRefreshTask(this.__loadBgi.cb),e&&e.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache(),this.__fontRegister);for(t in r)r.hasOwnProperty(t)&&Ot.offRegister(t,this)}}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,n=this.isMask;if(!(r||"none"===i[Qu]||t.__stopPropagation||n)){var a,r=t.event.type,n=this.listener,o=this.__hasMask;if(n.hasOwnProperty(r)&&(a=n[r]),e)return"none"!==i[U_]&&d0(a)&&!t.__stopImmediatePropagation&&a.call(this,t),!0;if(this.willResponseEvent(t)){if(o){for(var s,l=this.next,n=l.isClip;l&&l.isMask;){if(l.willResponseEvent(t,!0)){s=!0;break}l=l.next}if(!n&&!s)return}return d0(a)&&!t.__stopImmediatePropagation&&a.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,n=this.__sx1,a=this.__sy1,o=this.offsetWidth,s=this.offsetHeight,l=this.matrixEvent,h=this.computedStyle;if("none"!==h[U_])return te.pointInQuadrilateral(r,i,n,a,n+o,a,n+o,a+s,n,a+s,l)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(h,c,t,e,u,_,r){var i,f,n,a,o,s,l,d=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,y=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,p=u-t,g=_-e;if(p&&g)return l=r.k,i=r.v,f=r.d,a=r.s,o=r.z,r=r.p,n={k:l},"linear"===l?(s=sr.getLinear(i,f,t,e,t+.5*p,e+.5*g,p,g,this.root,d,y),n.v=this.__getLg(h,c,s)):"radial"===l?(s=sr.getRadial(i,a,o,r,t,e,u,_,this.root,d,y))&&(n.v=this.__getRg(h,c,s),s.matrix&&(n.v=[n.v,s.matrix,s.cx,s.cy])):"conic"===l&&(a=this.bbox,o=Math.max(Math.abs(a[2]-a[0]),Math.abs(a[3]-a[1])),s=Math.max(Math.abs(p),Math.abs(g)),l=sr.getConic(i,f,r,t,e,u,_,o/s,this.root,d,y),n.v=this.__getCg(h,c,l)),n}},{key:"__getLg",value:function(t,e,r){var i;return t===Mu||t===Su?(i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2),r.stop.forEach(function(t){i.addColorStop(t[1],c0(t[0]))}),i):t===Ru?(t={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",c0(t[0])],["offset",100*t[1]+"%"]]}})},r=e.add(t),this.__config[Uf].push(t),"url(#"+r+")"):void 0}},{key:"__getRg",value:function(t,e,r){var i;return t===Mu||t===Su?(i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r),r.stop.forEach(function(t){i.addColorStop(t[1],c0(t[0]))}),i):t===Ru?(t={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",c0(t[0])],["offset",100*t[1]+"%"]]}})},r.tx!==r.cx&&t.props.push(["fx",r.cx]),r.ty!==r.cy&&t.props.push(["fy",r.cy]),r=e.add(t),this.__config[Uf].push(t),"url(#"+r+")"):void 0}},{key:"__getCg",value:function(t,e,r){var i=r.stop,n=i.length-1;i[n][1]<1&&i.push([i[n][0].slice(0),1]),0<i[0][1]&&i.unshift([i[0][0].slice(0),0]);return t===Mu||t===Su?r:[]}},{key:"clearCache",value:function(t){var e=this.__config,r=e[Bf],i=e[Hf],n=e[Gf],a=e[Yf];t||(e[Rf]=this.__cacheStyle={},(t=e[Pf])&&t.release()),r&&r.release(),i&&i.release(),n&&n.release(),a&&a.release()}},{key:"updateStyle",value:function(e,r){var i=this,n=i.root,a=i.__config,o=mn.normalize(e);n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,a[Wf]||((t={})[gf]=i,t[mf]=o,t[vf]=e,t[Ef]=Object.keys(o).map(function(t){return t=v0.hasOwnProperty(t)?t:parseInt(t)}),t[bf]=a,n.__addUpdate(i,a,n,n.__config,t))},__after:function(t){d0(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,o),d0(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,n=i.root,a=i.__config;n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,a[Wf]||((t={})[gf]=i,t[mf]=e,t[Ef]=Object.keys(e).map(function(t){return t=v0.hasOwnProperty(t)?t:parseInt(t)}),t[bf]=a,n.__addUpdate(i,a,n,n.__config,t))},__after:function(t){d0(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),d0(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new gu(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof gu&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(d0(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var n={__after:function(t){e(t)},__karasFramecb:e};return t.push(n),Xl.onFrame(n),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void Xl.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){Xl.offFrame(t)})}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){"none"!==this.computedStyle[Qu]&&(N(F(a.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[Nf]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t)}},{key:"__offsetY",value:function(t,e,r){"none"!==this.computedStyle[Qu]&&(N(F(a.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData&&(this.__layoutData.y+=t),this.clearCache()),void 0!==r&&(this.__config[Nf]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t)}},{key:"__resizeX",value:function(t,e){"none"!==this.computedStyle[Qu]&&(this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData&&(this.__layoutData.w+=t),this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[Lf]=!1),void 0!==e&&(this.__config[Nf]|=e),this.clearCache())}},{key:"__resizeY",value:function(t,e){"none"!==this.computedStyle[Qu]&&(this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[Lf]=!1),void 0!==e&&(this.__config[Nf]|=e),this.clearCache())}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=[];return t?(Array.isArray(t)?t:[t]).forEach(function(t){cr.hasOwnProperty(t)?cr[t].forEach(function(t){i.push(Cu[wu(t)])}):i.push(Cu[wu(t)])}):i=Object.keys(e),i.forEach(function(t){v0.hasOwnProperty(t)?r[t]=e[t]:r[Iu[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(t){t=t?this.bbox:[t=this.__sx1,e=this.__sy1,t+this.offsetWidth,e+this.offsetHeight];var e=this.matrixEvent,r=T0(Ht.calPoint([t[0],t[1]],e)),i=T0(Ht.calPoint([t[2],t[1]],e)),n=T0(Ht.calPoint([t[2],t[3]],e)),t=T0(Ht.calPoint([t[0],t[3]],e));return{left:Math.min(r[0],Math.min(i[0],Math.min(n[0],t[0]))),top:Math.min(r[1],Math.min(i[1],Math.min(n[1],t[1]))),right:Math.max(r[0],Math.max(i[0],Math.max(n[0],t[0]))),bottom:Math.max(r[1],Math.max(i[1],Math.max(n[1],t[1]))),points:[r,i,n,t]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var r=this;if(r.isDestroyed)return Mt.warn("Remove target is destroyed."),void(d0(e)&&e());var i=r.root,n=r.domParent,t=r.isShadowRoot?r.hostRoot:r;-1!==n.children.indexOf(t)?(i.delRefreshTask(r.__task),i.addRefreshTask(r.__task={__before:function(){r.__task=null;var t=n.__json,e=t.children.indexOf((r.isShadowRoot?r.hostRoot:r).__json);if(-1===e)throw new Error("Remove index Exception.");t.children.splice(e,1),n.children.splice(e,1);t=n.zIndexChildren,!t||-1<(e=t.indexOf(r.isShadowRoot?r.hostRoot:r))&&t.splice(e,1),r.__prev&&(r.__prev.__next=r.__next),t={};t[gf]=r,t[xf]=S0,t[Tf]=!0,t[bf]=r.__config,i.__addUpdate(r,r.__config,i,i.__config,t)},__after:function(t){(r.isShadowRoot?r.hostRoot:r).__destroy(),d0(e)&&e.call(r,t)}})):d0(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,n;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,n=this.computedStyle[M_],this.__bbox=x0([t,e,t+r,e+i],n)),this.__bbox}},{key:"filterBbox",get:function(){var t,e;return this.__filterBbox||(t=this.bbox,e=this.computedStyle[k_],this.__filterBbox=m0(t,e)),this.__filterBbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[Df]}},{key:"matrixEvent",get:function(){return this.__config[kf]}},{key:"perspectiveMatrix",get:function(){return this.__config[Vf]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"cacheStyle",get:function(){return this.__cacheStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseline",get:function(){return this.offsetHeight}},{key:"firstBaseline",get:function(){return this.offsetHeight}},{key:"verticalBaseline",get:function(){return this.offsetWidth}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[$f]=this.__cacheAsBitmap=!!t}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),a}(),Ai=T.STYLE_KEY,L0=Ai.DISPLAY,F0=Ai.MARGIN_TOP,N0=Ai.MARGIN_BOTTOM,P0=Ai.MARGIN_LEFT,B0=Ai.MARGIN_RIGHT,H0=Ai.BORDER_TOP_WIDTH,G0=Ai.BORDER_BOTTOM_WIDTH,Y0=Ai.BORDER_LEFT_WIDTH,W0=Ai.BORDER_RIGHT_WIDTH,U0=Ai.PADDING_TOP,X0=Ai.PADDING_BOTTOM,z0=Ai.PADDING_LEFT,V0=Ai.PADDING_RIGHT,K0=Ai.LINE_HEIGHT,j0=function(){function a(t,e,r,i,n){_(this,a),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseline=i,this.__isUpright=n,this.__bOffset=0}return f(a,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(r){var t,i=r?this.verticalBaseline:this.baseline,e=r?this.verticalLineHeight:this.lineHeight,n=e;return this.list.length&&(this.list.forEach(function(t){var e;t.isEllipsis||(r?(e=t.verticalBaseline)!==i&&(t.__offsetX(e=i-e,!0),n=Math.max(n,t.offsetWidth+e)):(e=t.baseline)!==i&&(t.__offsetY(e=i-e,!0),n=Math.max(n,t.offsetHeight+e)))}),t=i-this.__baseline,n=Math.max(n,this.__lineHeight+t)),Math.max(0,n-e)}},{key:"__offsetX",value:function(e,t){this.__x+=e,t&&this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"__offsetY",value:function(e,t){this.__y+=e,t&&this.list.forEach(function(t){t.__offsetY(e,!0)})}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseline=Math.max(e,this.__baseline)}},{key:"__resetLb",value:function(i,n){this.list.forEach(function(t){for(var e=t,r=(e=t instanceof _o?t.parent.parent:e).computedStyle;"inline"===r[L0];)i=Math.max(i,r[K0]),n=Math.max(n,mn.getBaseline(r)),r=(e=e.domParent).computedStyle}),this.__lineHeight=i,this.__baseline=n}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.x+this.width}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){if(this.isUpright)return this.verticalLineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],t=t[e-1],i=r.x,n=(r instanceof _o?r.parent:r).domParent;;){var a=n.contentBoxList,o=n.computedStyle,c=o[L0],u=o[P0],_=o[Y0],o=o[z0];if("inline"!==c)break;r===a[0]&&(i-=u+_+o),n=n.domParent}for(var s=t.x+t.outerWidth,n=(t instanceof _o?t.parent:t).domParent;;){var l=n.contentBoxList,h=n.computedStyle,f=h[L0],d=h[B0],y=h[W0],h=h[V0];if("inline"!==f)break;r===l[l.length-1]&&(s+=d+y+h),n=n.domParent}return s-i}return 0}},{key:"height",get:function(){if(!this.isUpright)return this.lineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],t=t[e-1],i=r.y,n=(r instanceof _o?r.parent:r).domParent;;){var a=n.contentBoxList,o=n.computedStyle,c=o[L0],u=o[F0],_=o[H0],o=o[U0];if("inline"!==c)break;r===a[0]&&(i-=u+_+o),n=n.domParent}for(var s=t.y+t.outerHeight,n=(t instanceof _o?t.parent:t).domParent;;){var l=n.contentBoxList,h=n.computedStyle,f=h[L0],d=h[N0],y=h[G0],h=h[X0];if("inline"!==f)break;r===l[l.length-1]&&(s+=d+y+h),n=n.domParent}return s-i}return 0}},{key:"bOffset",get:function(){return this.__bOffset}},{key:"baseline",get:function(){var e=this.__baseline;return this.list.forEach(function(t){e=Math.max(e,t.baseline)}),e}},{key:"verticalBaseline",get:function(){var e=this.__baseline;return this.list.forEach(function(t){e=Math.max(e,t.verticalBaseline)}),e}},{key:"lineHeight",get:function(){var e=this.__lineHeight;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"verticalLineHeight",get:function(){var e=this.__lineHeight;return this.list.forEach(function(t){e=Math.max(e,t.outerWidth)}),e}},{key:"isUpright",get:function(){return this.__isUpright}}]),a}(),$0=function(){function a(t,e,r,i,n){_(this,a),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__max=n?e:t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseline=i,this.__isEnd=!0,this.__spreadList=[],this.__isVertical=n}return f(a,[{key:"genLineBox",value:function(t,e){t=new j0(t,e,this.__lineHeight,this.__baseline,this.isUpright);return this.list.push(t),this.__isEnd=!0,t}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseline,i);if(this.__isNewLine)return t=new j0(t,e,r,i,this.isUpright),this.list.push(t),this.__isEnd=!0,this.__isNewLine=!1,t}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r,i=this.isUpright;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):i?(this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__max=Math.max(this.__max,i?e.y+e.outerHeight:e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i,n){this.list.forEach(function(t){var e=r-(n?t.height:t.width);0<e&&("center"===i&&(e*=.5),n?t.__offsetY(e,!0):t.__offsetX(e,!0))})}},{key:"verticalAlign",value:function(e){var r=this.__spreadList,i=(r.splice(0),0);return this.list.forEach(function(t){i&&(t.__bOffset=i,e?t.__offsetX(i,!0):t.__offsetY(i,!0)),i+=t.verticalAlign(e),r.push(i)}),i}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"addY",value:function(t){this.__lastY+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e,!1)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endX",get:function(){var t=this.list,e=t.length;return e?t[e-1].endX:this.__x}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseline",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseline+t[e-1].bOffset}return 0}},{key:"firstBaseline",get:function(){var t=this.list;return t.length?t[0].baseline:0}},{key:"verticalBaseline",get:function(){var t=this.list;return t.length?t[0].baseline+t[0].bOffset:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"verticalLineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].verticalLineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}},{key:"spreadList",get:function(){return this.__spreadList}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"max",get:function(){return this.__max}}]),a}(),q0={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},t=T.STYLE_KEY,Z0=t.DISPLAY,J0=t.TOP,Q0=t.BOTTOM,td=t.POSITION,ed=t.HEIGHT,rd=r.AUTO,id=r.PX,nd=r.PERCENT,ad=Ko.REFLOW;var od={offsetAndResizeByNodeOnY:function(t,e,c,r,u){if(r){for(;;){for(;t.isShadowRoot;)t=t.host;for(var i=t,_=void 0,n=t.domParent,a=(n&&(h=n.computedStyle[td],_=n===e||n.isShadowRoot||"relative"===h||"absolute"===h),t.next),o=void 0;a;){if("none"!==a.computedStyle[Z0])if("absolute"===a.currentStyle[td]){var s=a.currentStyle,f=s[J0],l=s[Q0],s=s[ed];if(f[1]===rd?l[1]===rd||l[1]===id?(a.__offsetY(r,!0,ad),a.clearCache()):l[1]===nd&&(l=(1-.01*l[0])*r,a.__offsetY(l,!0,ad),a.clearCache()):f[1]===nd&&(l=.01*f[0]*r,a.__offsetY(l,!0,ad),a.clearCache()),s[1]===nd)if(_)n.__layoutAbs(n,n.__layoutData,a);else{if(!o)for(o=n;o&&o!==e&&!o.isShadowRoot;){var d=o.currentStyle;if("absolute"===d[td]||"relative"===d[td])break;o=o.domParent}u.push([n,o,a])}}else a.__offsetY(r,!0,ad),a.clearCache();a=a.next}if(!n)break;var h=(t=n).currentStyle,y=void 0;if("absolute"===h[td]?h[ed][1]!==rd||h[J0][1]!==rd&&h[Q0][1]!==rd||(y=!0):h[ed][1]===rd&&(y=!0),!y)break;if(t.__resizeY(r,ad),t.clearCache(),t===e)break}for(;i;)i.clearCache(!0),i=i.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMargin:function(t,e){var r=0,i=t[0],n=t[0],t=(t.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),0);return 0<i&&0<n?t=Math.max(i,n)-r:i<0&&n<0?t=Math.min(i,n)-r:0===i&&0===n||(t=i+n-r),t}},ur=T.STYLE_KEY,sd=ur.POSITION,ld=ur.DISPLAY,hd=ur.MARGIN_LEFT,cd=ur.MARGIN_TOP,ud=ur.MARGIN_RIGHT,_d=ur.MARGIN_BOTTOM,fd=ur.PADDING_LEFT,dd=ur.PADDING_BOTTOM,yd=ur.PADDING_RIGHT,pd=ur.PADDING_TOP,gd=ur.BORDER_TOP_WIDTH,xd=ur.BORDER_BOTTOM_WIDTH,md=ur.BORDER_RIGHT_WIDTH,vd=ur.BORDER_LEFT_WIDTH,Ed=ur.TOP,bd=ur.RIGHT,Td=ur.BOTTOM,Ad=ur.LEFT,Md=ur.WIDTH,Rd=ur.HEIGHT,Sd=ur.TEXT_ALIGN,Od=ur.FLEX_DIRECTION,Cd=ur.FLEX_BASIS,Id=ur.FLEX_SHRINK,wd=ur.FLEX_GROW,kd=ur.ALIGN_SELF,Dd=ur.ALIGN_ITEMS,Ld=ur.JUSTIFY_CONTENT,Fd=ur.Z_INDEX,Nd=ur.WHITE_SPACE,Pd=ur.LINE_HEIGHT,Bd=ur.LINE_CLAMP,Hd=ur.ORDER,Gd=ur.FLEX_WRAP,Yd=ur.ALIGN_CONTENT,Wd=ur.OVERFLOW,Ud=ur.FONT_SIZE,Xd=ur.FONT_FAMILY,zd=ur.FONT_WEIGHT,Vd=ur.WRITING_MODE,Wr=T.NODE_KEY,Kd=Wr.NODE_CURRENT_STYLE,jd=Wr.NODE_STYLE,$d=Wr.NODE_STRUCT,qd=Wr.NODE_DOM_PARENT,Zd=Wr.NODE_IS_INLINE,i=T.UPDATE_KEY,Jd=i.UPDATE_NODE,Qd=i.UPDATE_FOCUS,ty=i.UPDATE_ADD_DOM,ey=i.UPDATE_CONFIG,e=T.STRUCT_KEY,ry=e.STRUCT_NUM,iy=e.STRUCT_LV,ny=e.STRUCT_TOTAL,ay=e.STRUCT_CHILD_INDEX,oy=e.STRUCT_INDEX,sy=T.ELLIPSIS,ly=r.AUTO,hy=r.PX,cy=r.PERCENT,uy=r.REM,_y=r.VW,fy=r.VH,dy=r.VMAX,yy=r.VMIN,py=mn.isRelativeOrAbsolute,gy=mn.getBaseline,xy=mn.getVerticalBaseline,my=At.extend,vy=At.isNil,Ey=At.isFunction,by=et.CANVAS,Ty=et.SVG,Ay=et.WEBGL;function My(t){var i,n,a=[],o={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof dl?t.shadowRoot:t)instanceof D0&&t.isMask?void 0!==n?o[n].push(t):e&&(s[n=e-1].__iIndex=n,o[n]=[t],i=!0):(n=void 0,t instanceof D0?(r.__zIndex=t.currentStyle[Fd],py(t)&&(r.__aIndex=!0)):r.__zIndex=0,a.push(r),r.__iIndex=e)}),a.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=a.length-1;0<=e;e--){var r=a[e].__iIndex;o.hasOwnProperty(r)&&a.splice.apply(a,[e+1,0].concat(p(o[r])))}return a}function Ry(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof dl&&(t=t.shadowRoot),r.__order=t instanceof D0?t.currentStyle[Hd]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}function Sy(t,c,u,e,_,f){var r,i=t.computedStyle,n=t.root,a=n.renderMode,o=u.list;o.forEach(function(t){e-=f?t.outerHeight:t.outerWidth}),a!==by&&a!==Ay||(r=(a===Ay?Mt.getFontCanvas():n).ctx);for(var d=a===by||a===Ay?(n=mn.setFontStyle(i),r.font!==n&&(r.font=n),r.measureText(sy).width):Mt.measureTextSync(sy,i[Xd],i[Ud],i[zd]),s=o.length-1;0<=s;s--){var l,y,h=o[s];if(!s||e+h.outerWidth>=d+1e-10){h instanceof _o?h.parent.__backtrack(t,c,u,h,e,_,d,i,r,a,f):(l=new Ro(h.x+h.outerWidth+_,h.y,d,t),c.addItem(l,!0));break}h instanceof _o?-1<(y=(l=h.parent).textBoxes.indexOf(h))&&l.textBoxes.splice(y,1):h.__layoutNone(),o.pop(),e+=f?h.outerHeight:h.outerWidth}}var Oy=function(){d(c,D0);var n=y(c);function c(t,e,r){_(this,c);var i=l(e=n.call(this,t,e)).style,t=(i.display&&{flex:!0,block:!0,inline:!0,"inline-block":!0,inlineBlock:!0,none:!0}.hasOwnProperty(i.display)||(q0.INLINE.hasOwnProperty(e.tagName)?i.display="inline":i.display="block"),!i[zd]&&q0.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),e.__style=mn.normalize(i,Nt.DOM_ENTRY_SET),e.__currentStyle=my({},e.__style),e.__children=r||[],e.__flexLine=[],e.__ellipsis=null,e.__config);return t[Kd]=e.__currentStyle,t[jd]=e.__style,e}return f(c,[{key:"__structure",value:function(r,i,t){var t=N(F(c.prototype),"__structure",this).call(this,r++,i,t),n=[t],e=this.__zIndexChildren=this.__zIndexChildren||My(this),a=(e.forEach(function(t,e){t=t.__structure(r,i+1,e);Array.isArray(t)?(r+=t.length,n=n.concat(t)):(r++,n.push(t))}),n.length-1);return t[ry]=e.length,t[ny]=a,n}},{key:"__modifyStruct",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=this.__config,i=r[$d],n=i[ny]||0,a=this.__structure(i[oy],i[iy],i[ay]),o=((o=t.__structs).splice.apply(o,[i[oy]+e,n+1].concat(p(a))),0);return this!==t&&(o=((i=r[$d])[ny]||0)-n,(e=r[qd].__config[$d])[ny]=e[ny]||0,e[ny]+=o),[i,o]}},{key:"__updateStruct",value:function(t){var e=this.__config[$d],r=e[oy],e=e[ny],c=void 0===e?0:e,e=this.__zIndexChildren=My(this);if(1!==e.length){e.forEach(function(t,e){t=t.__config[$d];t&&(t[ay]=e)});for(var u,i=[],n=[],a=r+1;a<=r+c;a++){var o,s=t[a];s&&(o={child:s,list:t.slice(s[oy],s[oy]+(s[ny]||0)+1)},i.push(o),n.push(o),a+=s[ny]||0)}i.sort(function(t,e){return t.child[ay]-e.child[ay]});for(var l,h=0,_=n.length;h<_;h++)if(n[h]!==i[h]){u=!0;break}u&&(l=[],i.forEach(function(t){l=l.concat(t.list)}),l.forEach(function(t,e){t[oy]=r+e+1}),t.splice.apply(t,[r+1,c].concat(p(l))))}}},{key:"__tryLayInline",value:function(t,e,r){this.__computeReflow();var i=this.flowChildren,n=this.currentStyle,a=n[ld],o=n[Md],c=n[Rd],u=n[hd],_=n[ud],f=n[cd],d=n[_d],y=n[fd],p=n[yd],g=n[pd],n=n[dd],s=this.computedStyle,x=s[vd],m=s[md],v=s[gd],s=s[xd];if("inline"===a)i.length&&((a=(a=i[0])instanceof dl?a.shadowRoot:a)instanceof D0?t=a.__tryLayInline(t,e,r):t-=a.firstCharWidth);else{if(o[1]!==ly)t-=r?this.__calSize(c,e,!0):this.__calSize(o,e,!0);else for(var l=0;l<i.length;l++){if(t<0)return t;var h=i[l];(h=h instanceof dl?h.shadowRoot:h)instanceof D0?t=h.__tryLayInline(t,e,r):t-=h.textWidth}t=r?(t-=this.__calSize(d,e,!0))-this.__calSize(n,e,!0)-s:(t-=this.__calSize(_,e,!0))-this.__calSize(p,e,!0)-m}return t=r?(t-=this.__calSize(f,e,!0))-this.__calSize(g,e,!0)-v:(t-=this.__calSize(u,e,!0))-this.__calSize(y,e,!0)-x}},{key:"__offsetX",value:function(e,r,i){N(F(c.prototype),"__offsetX",this).call(this,e,r,i);var t=this.__ellipsis;t&&t.__offsetX(e,r),r&&!this.__config[Zd]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){N(F(c.prototype),"__offsetY",this).call(this,e,r,i);var t=this.__ellipsis;t&&t.__offsetY(e,r),r&&!this.__config[Zd]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calBasis",value:function(n,_,f,e,r){var d,y,p,g=this,t=(this.__computeReflow(),0),a=0,o=0,x=this.flowChildren,m=this.currentStyle,i=this.computedStyle,s=e.x,l=e.y,h=e.w,c=e.h,v=m[Od],E=m[Cd],b=m[Md],T=m[Rd],A=i[Pd],M=i[ld],R=i[Bd],u=0===i[Vd].indexOf("vertical"),b=n?b:T,T=E[1]===ly,S=-1<[hy,cy,uy,_y,fy,dy,yy].indexOf(E[1]),O=!T&&!S,C=(S?t=d=this.__calSize(E,n?h:c,!0):T&&-1<[hy,cy,uy,_y,fy,dy,yy].indexOf(b[1])?t=d=this.__calSize(b,n?h:c,!0):T&&(O=!0),0),I=0,R=R||0;return n?("flex"===M?(y=-1===["column","columnReverse"].indexOf(v),(x=Ry(x)).forEach(function(t){var e,r;t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0?(r=(e=Bt(t.__calBasis(n,_,f,{x:s,y:l,w:h,h:c},!1),3))[1],e=e[2],y?(a+=r,o+=e):(a=Math.max(a,r),o=Math.max(o,e))):(u&&(r=g.__lineBoxManager=new $0(s,l,A,(u?xy:gy)(i),u),t.__layout({x:s,y:l,w:h,h:c,lineBoxManager:r,lineClamp:R,isUpright:u}),a+=t.width,o+=t.width),y?(a+=t.charWidth,o+=t.textWidth):(a=Math.max(a,t.charWidth),o=Math.max(o,t.textWidth)))})):u?(S=this.__lineBoxManager=new $0(s,l,A,(u?xy:gy)(i),u),this.__layout({x:s,y:l,w:h,h:c,lineBoxManager:S,lineClamp:R,isUpright:u},_,!1,!0),a=o=t=this.width):(p=e.lineBoxManager,"inline"!==M&&(p=this.__lineBoxManager=new $0(s,l,A,(u?xy:gy)(i),u)),x.forEach(function(t){var e,r,i;t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0?(e=(r=Bt(t.__calBasis(n,_,f,{x:s,y:l,w:h,h:c,lineBoxManager:p},!1),3))[1],r=r[2],"block"===(i=t.computedStyle[ld])||"flex"===i?(a=Math.max(a,e),o=Math.max(o,r),C=I=0):(C+=e,I+=r,a=Math.max(a,C),o=Math.max(o,I))):(C+=t.charWidth,I+=t.textWidth,a=Math.max(a,C),o=Math.max(o,I))})),d&&(o=Math.max(d,o)),O&&(t=o)):(this.__layout({x:s,y:l,w:h,h:c,isUpright:u},_,!0,!1),a=o=t=this.height),this.__addMBP(n,h,m,i,[t,a,o],r)}},{key:"__layoutNone",value:function(){N(F(c.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(t,C,I,w){var m,v,E,b,k,D,L,F,N,P,B,e,r,i,n,a,o,H=this,s=this.flowChildren,l=this.currentStyle,h=this.computedStyle,c=h[Sd],G=h[Nd],T=h[Bd],u=h[Pd],Y=h[Wd],_=this.__preLayout(t,!1),f=_.fixedWidth,d=_.fixedHeight,A=_.x,M=_.y,R=_.w,S=_.h,y=_.isParentVertical,O=_.isUpright;C&&(f&&!O||d&&O)?O?this.__ioSize(void 0,S):this.__ioSize(R,void 0):I&&d?this.__ioSize(void 0,S):w&&f?this.__ioSize(R,void 0):(T=T||0,m=0,v=this.__lineBoxManager=new $0(A,M,u,(O?xy:gy)(h),O),b=E=0,k=A,D=M,L=[],F=[],N=s.length,s.forEach(function(t,c){var e=t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0,r=(e&&t.__computeReflow(),e&&"inline"===t.computedStyle[ld]),i=e&&"inlineBlock"===t.computedStyle[ld],n=r&&t.__isRealInline(),a=m;if(e&&!r&&!i||(L.length&&F.length&&((l=od.getMergeMargin(F,L))&&(O?A+=l:M+=l)),F=[],L=[]),e)if(i||r)if(P||B)t.__layoutNone();else if(O&&M===D||!O&&A===k||!c||"nowrap"===G)m=t.__layout({x:A,y:M,w:R,h:S,lx:k,ly:D,lineBoxManager:v,lineClamp:T,lineClampCount:m,isUpright:O},C,I,w),t.__isIbFull&&m++,(O&&t.__isUprightIbFull||!O&&t.__isIbFull)&&"nowrap"!==G?(v.addItem(t,!0),O?(A+=t.outerWidth,M=D):(A=k,M+=t.outerHeight),v.setNotEnd()):(!i&&n||v.addItem(t,!1),A=v.lastX,M=v.lastY),!C&&"hidden"===Y&&"nowrap"===G&&(O&&S+1e-10<M-D||!O&&R+1e-10<A-k||a<m)?B=!0:T&&T<=m&&(P=!0),C&&("nowrap"===G?b+=O?t.outerHeight:t.outerWidth:(b=O?t.outerHeight:t.outerWidth,a<m&&(b=Math.max(b,O?S:R))),E=Math.max(E,b));else if(-1e-10<=t.__tryLayInline(O?S+D-M:R+k-A,O?S:R,O))m=t.__layout({x:A,y:M,w:R,h:S,lx:k,ly:D,lineBoxManager:v,lineClamp:T,lineClampCount:m,isUpright:O},C,I,w),!i&&n||v.addItem(t,!1),A=v.lastX,M=v.lastY,T&&T<=m&&(P=!0),C&&(E=(i||m===a?b+=O?t.outerHeight:t.outerWidth:(E=Math.max(E,O?S:R),b=O?M-D:A-k),Math.max(E,b)));else{if(m++,M=O?(A=v.endX,D):(A=k,v.endY),v.setNewLine(),T&&T<=m)return t.__layoutNone(),P=!0,e=(l=v.list)[l.length-1],void Sy(H,v,e,O?S:R,0,O);m=t.__layout({x:A,y:M,w:R,h:S,lx:k,ly:D,lineBoxManager:v,lineClamp:T,lineClampCount:m,isUpright:O},C,I,w),t.__isIbFull||t.__isUprightIbFull?(v.addItem(t,!1),O?(A+=t.outerWidth,M=D):(A=k,M+=t.outerHeight),v.setNotEnd(),m++):(!i&&n||v.addItem(t,!1),A=v.lastX,M=v.lastY),T&&T<=m&&(P=!0),C&&(E=Math.max(E,b),E=Math.max(E,O?S:R),b=O?t.outerHeight:t.outerWidth,E=Math.max(E,b))}else{B=!1,(O&&D<M||!O&&k<A)&&m++,T&&T<=m&&(P=!0),O?M=D:A=k,v.isEnd&&(O?A=v.endX:M=v.endY,v.setNotEnd(),v.setNewLine()),t.__layout({x:A,y:M,w:R,h:S,isUpright:O},C,I,w);var u,_,f,d,y,o,s,p,l,g,h,x,r="none"===t.currentStyle[ld];!r&&t.flowChildren&&0===t.flowChildren.length&&(e=(l=t.computedStyle)[cd],i=l[ud],n=l[_d],h=l[hd],x=l[pd],s=l[yd],_=l[dd],o=l[fd],p=l[Md],f=l[Rd],d=l[gd],g=l[md],y=l[xd],l=l[vd],O&&o<=0&&s<=0&&p<=0&&l<=0&&g<=0?(L.push(i),F.push(h),u=!0):!O&&x<=0&&_<=0&&f<=0&&d<=0&&y<=0&&(L.push(n),F.push(e),u=!0)),O?(A+=t.outerWidth,v.__lastX=A):(M+=t.outerHeight,v.__lastY=M),C&&(E=Math.max(E,O?t.outerHeight:t.outerWidth),b=0),r||u?c!==N-1||(o=od.getMergeMargin(F,L))&&(O?A+=o:M+=o):(p=(s=t.computedStyle)[cd],l=s[ud],g=s[_d],i=s[hd],L.length&&(O?(F.push(i),(h=od.getMergeMargin(F,L))&&(t.__offsetX(h,!0),A+=h)):(F.push(p),(x=od.getMergeMargin(F,L))&&(t.__offsetY(x,!0),M+=x))),F=[],L=[O?l:g])}else if(P||B)t.__layoutNone();else if(O&&M===D||!O&&A===k||!c||"nowrap"===G)m=t.__layout({x:A,y:M,w:R,h:S,lx:k,ly:D,lineBoxManager:v,lineClamp:T,lineClampCount:m,isUpright:O}),A=v.lastX,M=v.lastY,!C&&"hidden"===Y&&"nowrap"===G&&(O&&S+1e-10<M-D||!O&&R+1e-10<A-k||a<m)?B=!0:T&&T<=m&&(P=!0),C&&("nowrap"===G?b+=O?t.height:t.width:(b=O?t.height:t.width,a<m&&(b=Math.max(b,O?S:R))),E=Math.max(E,b));else if(-1e-10<=t.__tryLayInline(O?S+D-M:R+k-A))m=t.__layout({x:A,y:M,w:R,h:S,lx:k,ly:D,lineBoxManager:v,lineClamp:T,lineClampCount:m,isUpright:O}),A=v.lastX,M=v.lastY,T&&T<=m&&(P=!0),C&&(E=(m===a?b+=O?t.height:t.width:(E=Math.max(E,O?S:R),b=O?M-D:A-k),Math.max(E,b)));else{if(m++,M=O?(A=v.endX,D):(A=k,v.endY),v.setNewLine(),T&&T<=m)return t.__layoutNone(),P=!0,f=(_=v.list)[_.length-1],void Sy(H,v,f,O?S:R,0,O);m=t.__layout({x:A,y:M,w:R,h:S,lx:k,ly:D,lineBoxManager:v,lineClamp:T,lineClampCount:m,isUpright:O}),A=v.lastX,M=v.lastY,T&&T<=m&&(P=!0),C&&(E=Math.max(E,b),E=Math.max(E,O?S:R),b=O?t.height:t.width,E=Math.max(E,b))}}),v.isEnd&&(O?A=v.endX:M=v.endY),o=a=0,a=f||!C&&!y&&!O?R:!C||O?A-t.x:E,o=d||!C&&y&&O?S:C&&O?E:M-t.y,this.__ioSize(a,o),C||((_=v.verticalAlign(O))&&(O&&!f?this.__resizeX(_):O||d||this.__resizeY(_),e=0,r=v.spreadList,n=i=!1,s.forEach(function(t){(t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0)&&-1<["block","flex"].indexOf(t.computedStyle[ld])?n&&(i=!0,O?t.__offsetX(r[e],!0):t.__offsetY(r[e],!0)):(i&&e++,i=!(n=!0))})),I||w||(-1<["center","right"].indexOf(c)&&(v.horizonAlign(O?o:a,c,O),s.forEach(function(t){(t=t instanceof dl?t.shadowRoot:t)instanceof Hs&&t.__inlineSize(O)})),v.domList.forEach(function(t){t.__inlineSize(O?o:a,c,O)}),this.__marginAuto(l,t,O))))}},{key:"__layoutFlex",value:function(i,_,f,d){var y=this,e=this.flowChildren,p=this.currentStyle,s=this.computedStyle,n=this.__flexLine,g=s[Od],x=s[Ld],m=s[Dd],v=s[Bd],E=s[Gd],b=s[Yd],T=s[Pd],A=s[Sd],t=this.__preLayout(i,!1),M=t.fixedWidth,R=t.fixedHeight,S=t.x,O=t.y,l=t.w,h=t.h,C=t.isParentVertical,c=t.isUpright;if(_&&(M&&!c||R&&c))c?this.__ioSize(void 0,h):this.__ioSize(l,void 0);else if(f&&R)this.__ioSize(void 0,h);else if(d&&M)this.__ioSize(l,void 0);else{n.splice(0);var r,v=v||0,u=-1===["column","columnReverse"].indexOf(g),I=[],w=[],k=[],D=[],L=[],F=Ry(e),N=(F.forEach(function(t){var e,r,i,n,a,o;t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0?(a=t.currentStyle,i=t.computedStyle,o=(r=Bt(t.__calBasis(u,_,f,{x:S,y:O,w:l,h:h},!0),3))[0],e=r[1],r=r[2],n=a[wd],a=a[Id],i[Cd]=o,I.push(n),w.push(a),k.push(o),D.push(r),L.push(e)):(I.push(0),w.push(1),u&&c||!u&&!c?(i=new $0(S,O,T,(c?xy:gy)(s),c),t.__layout({x:S,y:O,w:l,h:h,lineBoxManager:i,lineClamp:v,lineClampCount:0,isUpright:c},_,f,d),n=c?t.width:t.height,k.push(n),D.push(n),L.push(n)):(a=t.charWidth,o=t.textWidth,k.push(o),D.push(o),L.push(a)))}),u?l:h),P=-1<["wrap","wrapReverse"].indexOf(E),a=[],B=0,H=[],o=(k.forEach(function(t,e){var r=L[e],i=D[e],r=t<r?r:i<t?i:t;H.push(r),P?N<B+r?B=B?(n.push(a),a=[F[e]],r):(a.push(F[e]),n.push(a),a=[],0):(a.push(F[e]),B+=r):a.push(F[e])}),a.length&&n.push(a),0),G={x:S,y:O,w:l,h:h},Y=[],W=[],U=[];if(n.forEach(function(t){var e=t.length,r=o+e,t=Bt(y.__layoutFlexLine(G,u,_,f,d,c,N,M,R,v,0,T,s,x,m,F.slice(o,r),t,A,I.slice(o,r),w.slice(o,r),k.slice(o,r),H.slice(o,r),L.slice(o,r),D.slice(o,r)),5),r=t[0],i=t[1],n=t[2],a=t[3],t=t[4];u?G.y=i:G.x=r,S=Math.max(S,r),O=Math.max(O,i),Y.push(n),W.push(a),U.push(t),o+=e}),_)return r=0,n.forEach(function(t){var e=0;t.forEach(function(t){u?e+=c?t.outerHeight:t.outerWidth:e=Math.max(e,c?t.outerHeight:t.outerWidth),t instanceof Hs&&(c?t.textWidth>h&&(r=Math.max(r,h)):t.textWidth>l&&(r=Math.max(r,l)))}),r=Math.max(r,e)}),void(c?this.__ioSize(void 0,r):this.__ioSize(r,void 0));var X=0,z=0,X=M||!_&&!C&&!c?l:S-i.x,z=R||!_&&C&&c?h:O-i.y;if(this.__ioSize(X,z),!f&&!d){"rowReverse"===g?n.forEach(function(t){t.forEach(function(t){var e=X-t.outerWidth-2*(t.x-i.x);e&&t.__offsetX(e,!0)})}):"columnReverse"===g&&n.forEach(function(t){t.forEach(function(t){var e=z-t.outerHeight-2*(t.y-i.y);e&&t.__offsetY(e,!0)})});var V,K,j,$,q,t=n.length;if("wrapReverse"===E&&1<t){for(var Z=0,J=[],Q=(Y.forEach(function(t){J.push(Z),Z+=t}),0),tt=t-1;0<=tt;tt--)!function(t){var e=n[t],r=J[t],i=Q-r;i&&e.forEach(function(t){u?t.__offsetY(i,!0):t.__offsetX(i,!0)}),Q+=Y[t]}(tt);n.reverse()}1<t&&(R&&u||!u)&&(0<(K=u?z-(O-i.y):X-(S-i.x))&&("center"===b?(j=.5*K,F.forEach(function(t){u?t.__offsetY(j,!0):t.__offsetX(j,!0)})):"flexStart"===b||("flexEnd"===b?F.forEach(function(t){u?t.__offsetY(K,!0):t.__offsetX(K,!0)}):"spaceBetween"===b?($=K/(t-1),n.forEach(function(t,e){e&&t.forEach(function(t){u?t.__offsetY($,!0):t.__offsetX($,!0)})})):"spaceAround"===b?(q=K/(t+1),n.forEach(function(t,e){t.forEach(function(t){u?t.__offsetY(q*(e+1),!0):t.__offsetX(q*(e+1),!0)})})):(V=K/t,n.forEach(function(t,e){e&&t.forEach(function(t){u?t.__offsetY(V*e,!0):t.__offsetX(V*e,!0)})}))))),f||d||(1<t?n.forEach(function(t,e){var r=Y[e];V&&(r+=V),y.__flexAlign(t,m,x,u,r,W[e],U[e])}):t&&(e=u?z:X,this.__flexAlign(n[0],m,x,u,e,W[0],U[0])),this.__marginAuto(p,i,c))}}}},{key:"__layoutFlexLine",value:function(t,a,f,o,s,l,e,r,d,y,p,g,x,m,v,E,b,T,A,M,i,R,S,O){var C=this,h=t.x,c=t.y,I=t.w,w=t.h,k=0,D=(R.forEach(function(t){k+=t}),e<=k),u=[],n=(i.forEach(function(t,e){D?(!M[e]||i[e]<R[e])&&(u[e]=R[e]):(!A[e]||i[e]>R[e])&&(u[e]=R[e])}),0),t=(i.forEach(function(t,e){void 0!==u[e]?n+=u[e]:n+=t}),1/0),t=a?I:d?w:n,n=Math.abs(t-n),L=0,_=0;if(D)for(var F=M.map(function(t,e){if(void 0===u[e])return _+=t,t});0!==_;){_<1&&(L+=n*(1-_),n*=_);var N=void 0,P=0,B=0,H=0;if(F.forEach(function(t,e){var r;t&&(r=t/_*n,(r=i[e]-r)<S[e]?(u[e]=S[e],F[e]=0,N=!0,B+=i[e]-S[e]):(u[e]=r,P+=t,H+=r))}),!N){n-=H;break}n-=B,_=P}else for(var G=A.map(function(t,e){if(void 0===u[e])return _+=t,t});0!==_;){_<1&&(L+=n*(1-_),n*=_);var Y=void 0,W=0,U=0,X=0;if(G.forEach(function(t,e){var r;t&&(r=t/_*n,(r=i[e]+r)<S[e]?(u[e]=S[e],G[e]=0,Y=!0,U+=i[e]-S[e]):(u[e]=r,W+=t,X+=r))}),!Y){n-=X;break}n-=U,_=W}var z=0,V=[],K=0;return E.forEach(function(t,e){var r,i,n,e=u[e];t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0?(a?t.__layout({x:h,y:c,w:e,h:w,w3:e,isUpright:l},f,o,s):(n=(i=t.currentStyle)[kd],i=i[Md],f||o||s||(r=i[1]!==ly||"stretch"===n||"auto"===n&&"stretch"===v||r)?t.__layout({x:h,y:c,w:I,h:e,h3:e,isUpright:l},f,o,s):(t.__layout({x:h,y:c,w:I,h:e,h3:e,isUpright:l},!0,o,s),t.__layout({x:h,y:c,w:I,w3:t.outerWidth,h:e,h3:e,isUpright:l},f,o,s))),f||o||s||(i=t.currentStyle,a?(i[hd][1]===ly&&K++,i[ud][1]===ly&&K++):(i[cd][1]===ly&&K++,i[_d][1]===ly&&K++))):(n=C.__lineBoxManager=new $0(h,c,g,(l?xy:gy)(x),l),V.push(n),t.__layout({x:h,y:c,w:a?e:I,h:a?w:e,lineBoxManager:n,lineClamp:y,lineClampCount:p,isUpright:l})),z=a?(h+=t.outerWidth,Math.max(z,t.outerHeight)):(c+=t.outerHeight,Math.max(z,t.outerWidth))}),a?c+=z:h+=z,!f&&!o&&!s&&-1<["center","right"].indexOf(T)&&V.forEach(function(t){t.horizonAlign(l?t.height:t.width,T,l)}),[h,c,z,K,D?0:Math.max(0,n+L)]}},{key:"__flexAlign",value:function(t,c,e,u,_,o,r){var f=0,i=(t.forEach(function(t){f=Math.max(f,t.firstBaseline)}),t.length);if(o)for(var n=0,s=r/o,l=0;l<i;l++){var a=t[l],h=a.currentStyle;u?(h[hd][1]===ly?(n+=s,a.__offsetX(n,!0)):n&&a.__offsetX(n,!0),h[ud][1]===ly&&(n+=s)):(h[cd][1]===ly?(n+=s,a.__offsetY(n,!0)):n&&a.__offsetY(n,!0),h[_d][1]===ly&&(n+=s))}else if("flexEnd"===e)for(var d=0;d<i;d++){var y=t[d];u?y.__offsetX(r,!0):y.__offsetY(r,!0)}else if("center"===e)for(var p=.5*r,g=0;g<i;g++){var x=t[g];u?x.__offsetX(p,!0):x.__offsetY(p,!0)}else if("spaceBetween"===e)for(var m=r/(i-1),v=1;v<i;v++){var E=t[v];u?E.__offsetX(m*v,!0):E.__offsetY(m*v,!0)}else if("spaceAround"===e)for(var b=.5*r/i,T=0;T<i;T++){var A=t[T];u?A.__offsetX(b*(2*T+1),!0):A.__offsetY(b*(2*T+1),!0)}else if("spaceEvenly"===e)for(var M=r/(i+1),R=0;R<i;R++){var S=t[R];u?S.__offsetX(M*(R+1),!0):S.__offsetY(M*(R+1),!0)}t.forEach(function(t){var e,r,i,n,a,o,s,l,h=t.currentStyle[kd];u?"flexStart"===h||("flexEnd"===h?0!=(i=_-t.outerHeight)&&t.__offsetY(i,!0):"center"===h?0!=(i=_-t.outerHeight)&&t.__offsetY(.5*i,!0):"stretch"===h?(i=t.computedStyle,n=t.currentStyle[Rd],o=i[gd],s=i[xd],a=i[cd],l=i[_d],r=i[pd],e=i[dd],n[1]===ly&&(n=t.height,i=(t.__height=i[Rd]=_-a-l-r-e-o-s)-n,t.__sy4+=i,t.__sy5+=i,t.__sy6+=i,t.__height+=i,t.__clientHeight+=i,t.__offsetHeight+=i,t.__outerHeight+=i)):"baseline"===h?0!=(a=f-t.firstBaseline)&&t.__offsetY(a,!0):"flexStart"===c||("center"===c?0!=(l=_-t.outerHeight)&&t.__offsetY(.5*l,!0):"flexEnd"===c?0!=(r=_-t.outerHeight)&&t.__offsetY(r,!0):"baseline"===c?0!=(e=f-t.firstBaseline)&&t.__offsetY(e,!0):(o=t.computedStyle,n=(s=t.currentStyle)[ld],i=s[Od],a=s[Rd],u&&"flex"===n&&"column"===i&&a[1]===ly&&t.outerHeight<_&&t.__layout(Object.assign(t.__layoutData,{h3:_})),l=o[gd],r=o[xd],e=o[cd],s=o[_d],n=o[pd],i=o[dd],a[1]===ly&&(o=t.height,t.__sy4+=a=_-e-s-n-i-l-r-o,t.__sy5+=a,t.__sy6+=a,t.__height+=a,t.__clientHeight+=a,t.__offsetHeight+=a,t.__outerHeight+=a)))):"flexStart"===h||("flexEnd"===h?0!=(e=_-t.outerWidth)&&t.__offsetX(e,!0):"center"===h?0!=(s=_-t.outerWidth)&&t.__offsetX(.5*s,!0):"stretch"===h?(n=t.computedStyle,i=t.currentStyle[Md],l=n[md],r=n[vd],o=n[ud],a=n[hd],e=n[yd],s=n[fd],i[1]===ly&&(h=t.width,i=(t.__width=n[Md]=_-a-o-s-e-l-r)-h,t.__sx4+=i,t.__sx5+=i,t.__sx6+=i,t.__width+=i,t.__clientWidth+=i,t.__offsetWidth+=i,t.__outerWidth+=i)):"baseline"===c?0!=(n=f-t.firstBaseline)&&t.__offsetX(n,!0):"flexStart"===c||("center"===c?0!=(a=_-t.outerWidth)&&t.__offsetX(.5*a,!0):"flexEnd"===c?0!=(o=_-t.outerWidth)&&t.__offsetX(o,!0):"baseline"===c?0!=(s=f-t.firstBaseline)&&t.__offsetX(s,!0):(e=t.computedStyle,l=t.currentStyle[Md],r=e[md],h=e[vd],i=e[ud],n=e[hd],a=e[yd],o=e[fd],l[1]===ly&&(s=t.width,l=(t.__width=e[Md]=_-n-i-o-a-r-h)-s,t.__sx4+=l,t.__sx5+=l,t.__sx6+=l,t.__width+=l,t.__clientWidth+=l,t.__offsetWidth+=l,t.__outerWidth+=l))))})}},{key:"__layoutInline",value:function(e,p,g,x,m){var r=this.flowChildren,i=this.currentStyle,t=this.computedStyle,n=t[Sd],v=t[Nd],s=t[Bd],a=t[Pd],o=t[cd],E=t[_d],b=t[hd],T=t[ud],A=t[gd],M=t[xd],R=t[vd],S=t[md],O=t[pd],C=t[dd],I=t[fd],w=t[yd],l=e.lineClampCount||0,k=this.__preLayout(e,m),D=k.fixedWidth,L=k.fixedHeight,h=k.x,c=k.y,u=k.w,_=k.h,f=k.lx,F=k.ly,d=k.lineBoxManager,N=k.endSpace,P=k.selfEndSpace,y=k.isUpright;if(p&&(D&&!y||L&&y))return y?this.__ioSize(void 0,_):this.__ioSize(u,void 0),l;var B=i[Md],H=i[Rd];if(!(m=m&&!this.__isRealInline()?!1:m)){if(g&&L)return this.__ioSize(void 0,_),l;if(x&&D)return this.__ioSize(u,void 0),l}m?(this.__config[Zd]=!0,this.__lineBoxManager=d,k=(y?xy:gy)(t),(y&&(o||E||O||C||A||M)||!y&&(b||T||I||w||R||S))&&d.isNewLine?d.genLineBoxByInlineIfNewLine(h,c,a,k):d.setLbByInlineIfNotNewLine(a,k),s=e.lineClamp||0):(d=this.__lineBoxManager=new $0(h,c,a,(y?xy:gy)(t),y),f=h,F=c,N=P=l=0),m&&(this.contentBoxList.splice(0),d.pushContentBoxList(this));for(var G=this;"inline"===G.computedStyle[ld];)G=G.domParent;var Y,W,U,X=G.computedStyle[Wd],z=!1,V=!1,K=r.length,j=!1,$=!1;return r.forEach(function(t,e){if(j||$)t.__layoutNone();else{var r=t instanceof D0||t instanceof dl&&t.shadowRoot instanceof D0,i=(r&&t.__computeReflow(),r&&"inline"===t.computedStyle[ld]),n=r&&"inlineBlock"===t.computedStyle[ld],a=i&&t.__isRealInline(),o=(m&&!Y&&("nowrap"===v||!r&&e===K-1||s&&e===K-1||l===s-1)&&(Y=!0,N+=P),l);if(r)if(i||n||(t.currentStyle[ld]=t.computedStyle[ld]="inlineBlock",n=!0,Mt.warn("Inline can not contain block/flex")),y&&c===F||!y&&h===f||!e||"nowrap"===v)l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isUpright:y},p,g,x),(t.__isIbFull||t.__isUprightIbFull)&&l++,t.__isIbFull&&"nowrap"!==v?(y&&_[1]===ly?V=!0:y||u[1]!==ly||(z=!0),d.addItem(t,!0),y?(h+=t.outerWidth,c=F):(h=f,c+=t.outerHeight),d.setNotEnd()):(!n&&a||d.addItem(t,!1),h=d.lastX,c=d.lastY),!p&&"hidden"===X&&"nowrap"===v&&(y&&_+1e-10<c-F||!y&&u+1e-10<h-f||o<l)?$=!0:s&&s<=l&&(j=!0);else if(-1e-10<=t.__tryLayInline(y?_+F-c-N:u+f-h-N,y?_:u,y))l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isUpright:y},p,g,x),!n&&a||d.addItem(t,!1),h=d.lastX,c=d.lastY,s&&s<=l&&(j=!0);else{if(l++,c=y?(h=d.endX,F):(h=f,d.endY),d.setNewLine(),s&&s<=l)return t.__layoutNone(),j=!0,i=(r=d.list)[r.length-1],void Sy(G,d,i,u,N,y);l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isUpright:y},p,g,x),t.__isIbFull||t.__isUprightIbFull?(d.addItem(t,!0),y?(h+=t.outerWidth,c=F):(h=f,c+=t.outerHeight),d.setNotEnd(),l++):(!n&&a||d.addItem(t,!1),h=d.lastX,c=d.lastY),s&&s<=l&&(j=!0)}else{r=d.size;if(y&&c===F||!y&&h===f||!e||"nowrap"===v)l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isUpright:y},p,g,x),h=d.lastX,c=d.lastY,!m&&1<d.size-r&&(H[1]===ly&&y&&(V=!0),B[1]!==ly||y||(z=!0)),!p&&"hidden"===X&&"nowrap"===v&&(y&&_+1e-10<c-F||!y&&u+1e-10<h-f||o<l)?$=!0:s&&s<=l&&(j=!0);else if(-1e-10<=t.__tryLayInline(y?_+F-c-N:u+f-h-N))l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isUpright:y},p,g,x),h=d.lastX,c=d.lastY,s&&s<=l&&(j=!0);else{if(l++,c=y?(h=d.endX,F):(h=f,d.endY),d.setNewLine(),s&&s<=l)return t.__layoutNone(),j=!0,n=(i=d.list)[i.length-1],void Sy(G,d,n,u,N,y);l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isUpright:y},p,g,x),h=d.lastX,c=d.lastY,!m&&1<d.size-r&&(H[1]===ly&&y&&(V=!0),B[1]!==ly||y||(z=!0)),s&&s<=l&&(j=!0)}}}}),y?h=d.endX:c=d.endY,this.__isIbFull=z,this.__isUprightIbFull=V,m?(P&&(y?d.addY(P):d.addX(P)),r.length||(i=t[cd],o=t[hd],E=t[pd],O=t[fd],C=t[gd],A=t[vd],y?d.addY(i+E+C):d.addX(o+O+A)),d.popContentBoxList(),p&&this.__inlineSize(0,"left",y)):(M=d.max-(y?e.y:e.x),U=y?(W=D?u:h-e.x,L?_:z?Math.max(_,M):M):(W=D?u:z?Math.max(u,M):M,L?_:c-e.y),this.__ioSize(W,U)),p||m||((b=d.verticalAlign(y))&&(y&&!D?this.__resizeX(b):y||L||this.__resizeY(b)),g||x||(-1<["center","right"].indexOf(n)&&(d.horizonAlign(y?U:W,n,y),r.forEach(function(t){(t=t instanceof dl?t.shadowRoot:t)instanceof Hs&&t.__inlineSize(y)})),d.domList.forEach(function(t){t.__inlineSize(y?U:W,n,y)}))),l}},{key:"__inlineSize",value:function(c,u,_){var r,f,i,d,n,a,y,p,o,g,x,m,v,E,b,T,A,M=this.contentBoxList,t=this.computedStyle,e=this.__ox,s=this.__oy,R=t[ld],S=t[cd],O=t[ud],C=t[_d],I=t[hd],w=t[pd],l=t[yd],h=t[dd],k=t[fd],D=t[gd],L=t[md],F=t[xd],N=t[vd],P=t[Pd];"none"!==R&&((A=M.length)?(M.forEach(function(t,e){e?(i=Math.min(i,t.x),y=Math.min(y,t.x),x=Math.min(x,t.x),b=Math.min(b,t.x),e===A-1?(r=n=o=v=Math.max(r,t.x+t.outerWidth),f=a=g=E=Math.max(f,t.y+t.outerHeight),n+=l,a+=h,o+=l+L,g+=h+F,v+=L+l+O,E+=F+h+C):r=n=o=v=Math.max(r,t.x+t.outerWidth)):(i=t.x,d=t.y,b=(x=(y=i-k)-N)-I,T=(m=(p=d-w)-D)-S,r=n=o=v=t.x+t.outerWidth,f=a=g=E=t.y+t.outerHeight,e===A-1&&(n+=l,a+=h,o+=l+L,g+=h+F,v+=L+l+O,E+=F+h+C))}),this.__x=b,this.__y=T,this.__width=t[Md]=r-i,this.__height=t[Rd]=Math.max(P,f-d),this.__clientWidth=n-y,this.__clientHeight=a-p,this.__offsetWidth=o-x,this.__offsetHeight=g-m,this.__outerWidth=v-b,this.__outerHeight=E-T,this.__sx=b+e,this.__sy=T+s,this.__sx1=x+e,this.__sy1=m+s,this.__sx2=y+e,this.__sy2=p+s,this.__sx3=i+e,this.__sy3=d+s,this.__sx4=r+e,this.__sy4=f+s,this.__sx5=n+e,this.__sy5=a+s,this.__sx6=o+e,this.__sy6=g+s,-1<["center","right"].indexOf(u)&&this.children.forEach(function(t){t instanceof Hs&&t.__inlineSize(_)})):(M=R=0,-1<["center","right"].indexOf(u)&&(t=c,"center"===u&&(t*=.5),0<t&&(_?this.__offsetY(t,!0):this.__offsetX(t,!0))),_?(this.__ioSize(R=P,0),this.__sx-=I+k+N):(this.__ioSize(0,M=P),this.__sy-=S+w+D),this.__sx1=this.__sx+I,this.__sy1=this.__sy+S,this.__sx2=this.__sx1+N,this.__sy2=this.__sy1+D,this.__sx4=this.__sx3=this.__sx2+k,this.__sy4=this.__sy3=this.__sy2+w,this.__sx5=this.__sx4+R+l,this.__sy5=this.__sy4+M+h,this.__sx6=this.__sx5+L,this.__sy6=this.__sy5+F,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+I+O,this.__outerHeight=this.__offsetHeight+S+C))}},{key:"__layoutAbs",value:function(r,m,v){var E=this,b=r.sx,T=r.sy,A=r.clientWidth,M=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,i=this.children,n=this.absChildren,a=t[ld],o=t[gd],s=t[vd],l=t[cd],h=t[hd],R=t[fd],S=t[pd];e||"none"===a?this.__layoutNone():(b+=h+s,T+=l+o,n.forEach(function(t){if(v){var e=t;if(t instanceof dl&&(e=t.shadowRoot),v!==e&&v!==t)return}var e=t.currentStyle,r=t.computedStyle;if(t.isDestroyed||"none"===e[ld])t.__layoutNone();else{t.__computeReflow(),t.__mp(e,r,A);var i,n,a,c,u,_,f,d,y,o=e[Ad],p=e[Ed],g=e[bd],x=e[Td],s=e[Md],e=e[Rd];if(o[1]!==ly?r[Ad]=E.__calSize(o,A,y=!0):r[Ad]="auto",g[1]!==ly?r[bd]=E.__calSize(g,A,f=!0):r[bd]="auto",p[1]!==ly?r[Ed]=E.__calSize(p,M,_=!0):r[Ed]="auto",x[1]!==ly?r[Td]=E.__calSize(x,M,d=!0):r[Td]="auto",y&&f?(i=b+r[Ad],n=A-r[bd]-r[Ad]):y?(i=b+r[Ad],s[1]!==ly&&(n=E.__calSize(s,A,!0))):f?(s[1]!==ly?n=E.__calSize(s,A,!0):c=!0,i=b+A-r[bd]-(n||0),i=(i=(i=(i=(i=(i-=r[hd])-r[ud])-r[fd])-r[yd])-r[vd])-r[md]):(i=b+R,s[1]!==ly&&(n=E.__calSize(s,A,!0))),_&&d)l=T+r[Ed],a=M-r[Ed]-r[Td];else if(_)l=T+r[Ed],e[1]!==ly&&(a=E.__calSize(e,M,!0));else if(d)e[1]!==ly?a=E.__calSize(e,M,!0):u=!0,l=T+M-r[Td]-(a||0),l=(l=(l=(l=(l=(l-=r[cd])-r[_d])-r[pd])-r[dd])-r[gd])-r[xd];else{for(var l=T+S,h=t.prev;h;){if(h instanceof Hs||"absolute"!==h.computedStyle[sd]){l=h.y+h.outerHeight;break}h=h.prev}e[1]!==ly&&(a=E.__calSize(e,M,!0))}o=c?i-b:A+b-i,g=u?l-T:M+T-l;void 0===n&&(t.__layout({x:i,y:l,w:o,h:g,isUpright:m.isUpright},!0,!1),o=t.outerWidth),t.__layout({x:i,y:l,w:o,h:g,w2:n,h2:a,isUpright:m.isUpright},!1,!1),c&&t.__offsetX(-t.outerWidth,!0),u&&t.__offsetY(-t.outerHeight,!0)}}),i.forEach(function(t){if(v){var e=t;if(t instanceof dl&&(e=t.shadowRoot),v!==e&&v!==t)return}t instanceof c?t.__layoutAbs(py(t)?t:r,m):t instanceof dl&&((e=t.shadowRoot)instanceof c&&e.__layoutAbs(e,m))}),this.__execAr())}},{key:"render",value:function(t,e,r,i,n,a){var r=N(F(c.prototype),"render",this).call(this,t,e,r,i,n,a),o=this.__ellipsis;return o&&o.render(t,e,r.ctx,i,n,a),t===Ty&&(this.virtualDom.type="dom"),r}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),this.__ellipsis&&this.__ellipsis.__destroy(),N(F(c.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return N(F(c.prototype),"__emitEvent",this).call(this,t,e);var e=this.isDestroyed,r=this.computedStyle,i=this.isMask;if(!(e||"none"===r[ld]||t.__stopPropagation||i)&&("hidden"!==r[Wd]||this.willResponseEvent(t,!0))){var n,e=t.event.type,i=this.listener,a=this.zIndexChildren;i.hasOwnProperty(e)&&(n=i[e]);for(var o=a.length-1;0<=o;o--){var s=a[o];if((s instanceof D0||s instanceof dl&&s.shadowRoot instanceof D0)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(Ey(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0)}return N(F(c.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){N(F(c.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(e,r){var i=this;if(!vy(e)&&!i.isDestroyed){var n,a=i.root,t=i.host;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in appendChild.");e.vd&&(a.delRefreshTask(e.vd.__task),e.vd.remove()),n=k.TYPE_CP===e.$$type?ol.initCp2(e,a,t,i):ol.initDom(e,a,t,i),a.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.push(e);var t=i.children.length,t=(t&&(((t=i.children[t-1]).__next=n).__prev=t),i.children.push(n),i.__zIndexChildren=null,{});t[Jd]=n,t[Qd]=Ko.REFLOW,t[ty]=!0,t[ey]=n.__config,a.__addUpdate(n,n.__config,a,a.__config,t)},__after:function(t){Ey(r)&&r.call(n,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!vy(e)&&!i.isDestroyed){var n,a=i.root,t=i.host;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(a.delRefreshTask(e.vd.__task),e.vd.remove()),n=k.TYPE_CP===e.$$type?ol.initCp2(e,a,t,i):ol.initDom(e,a,t,i),a.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.unshift(e);i.children.length&&(((t=i.children[0]).__prev=n).__next=t),i.children.unshift(n),i.__zIndexChildren=null;var t={};t[Jd]=n,t[Qd]=Ko.REFLOW,t[ty]=!0,t[ey]=n.__config,a.__addUpdate(n,n.__config,a,a.__config,t)},__after:function(t){Ey(r)&&r.call(n,t)}})}}},{key:"insertBefore",value:function(o,e){var s=this;if(!vy(o)&&!s.isDestroyed&&s.domParent){var l,h=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(o.$$type)))throw new Error("Invalid parameter in insertBefore.");o.vd&&(h.delRefreshTask(o.vd.__task),o.vd.remove()),l=k.TYPE_CP===o.$$type?ol.initCp2(o,h,t,c):ol.initDom(o,h,t,c),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,o),l.__next=s,l.__prev=s.__prev,s.__prev=l,c.children.splice(e,0,l)):(i&&(((a=c.children[0]).__prev=l).__next=a),r.unshift(o),c.children.unshift(l)),c.__zIndexChildren=null;var a={};a[Jd]=l,a[Qd]=Ko.REFLOW,a[ty]=!0,a[ey]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,a)},__after:function(t){Ey(e)&&e.call(l,t)}})}}},{key:"insertAfter",value:function(o,e){var s=this;if(!vy(o)&&!s.isDestroyed&&s.domParent){var l,h=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(o.$$type)))throw new Error("Invalid parameter in insertAfter.");o.vd&&(h.delRefreshTask(o.vd.__task),o.vd.remove()),l=k.TYPE_CP===o.$$type?ol.initCp2(o,h,t,c):ol.initDom(o,h,t,c),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,o),l.__prev=s,l.__next=s.__next,s.__next=l,c.children.splice(e+1,0,l)):(i&&(((a=c.children[i-1]).__next=l).__prev=a),r.push(o),c.children.push(l)),c.__zIndexChildren=null;var a={};a[Jd]=l,a[Qd]=Ko.REFLOW,a[ty]=!0,a[ey]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,a)},__after:function(t){Ey(e)&&e.call(l,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof D0||t instanceof dl))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return Mt.warn("Remove parent is destroyed."),void(Ey(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof dl?t.shadowRoot:t)instanceof Hs||"absolute"!==t.currentStyle[sd]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof dl?t.shadowRoot:t)instanceof D0&&"absolute"===t.currentStyle[sd]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseline",get:function(){var t=this.computedStyle,e=t[cd],r=t[gd],i=t[pd],t=t[Vd];return this.lineBoxManager&&this.lineBoxManager.size&&0!==t.indexOf("vertical")?e+r+i+this.lineBoxManager.baseline:this.offsetHeight}},{key:"firstBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[cd]+t[gd]+t[pd]+this.lineBoxManager.firstBaseline}},{key:"verticalBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return 0;var t=this.computedStyle,e=t[hd],r=t[vd],i=t[fd],t=t[Vd];return this.lineBoxManager&&this.lineBoxManager.size&&-1!==t.indexOf("vertical")?e+r+i+this.lineBoxManager.verticalBaseline:0}}]),c}(),fi=T.STYLE_KEY,Cy=fi.WIDTH,Iy=fi.HEIGHT,wy=fi.DISPLAY,ky=fi.BORDER_TOP_WIDTH,Dy=fi.BORDER_RIGHT_WIDTH,Ly=fi.BORDER_LEFT_WIDTH,Fy=fi.BORDER_BOTTOM_WIDTH,Ny=fi.BORDER_TOP_LEFT_RADIUS,Py=fi.BORDER_TOP_RIGHT_RADIUS,By=fi.BORDER_BOTTOM_RIGHT_RADIUS,Hy=fi.BORDER_BOTTOM_LEFT_RADIUS,Gy=fi.VISIBILITY,Yy=fi.BACKGROUND_IMAGE,Wy=fi.BACKGROUND_COLOR,Uy=fi.BOX_SHADOW,Xy=fi.MIX_BLEND_MODE,zy=fi.MARGIN_RIGHT,Vy=fi.MARGIN_LEFT,Ky=fi.PADDING_RIGHT,jy=fi.PADDING_LEFT,$y=fi.FONT_SIZE,qy=fi.FLEX_BASIS,di=T.UPDATE_KEY,Zy=di.UPDATE_NODE,Jy=di.UPDATE_FOCUS,Qy=di.UPDATE_CONFIG,yi=T.NODE_KEY,t1=yi.NODE_CACHE,e1=yi.NODE_DEFS_CACHE,r1=yi.NODE_IS_MASK,i1=r.AUTO,n1=r.PX,a1=r.PERCENT,o1=r.REM,s1=r.VW,l1=r.VH,h1=r.VMAX,c1=r.VMIN,u1=r.RGBA,_1=ne.canvasPolygon,f1=ne.svgPolygon,d1=At.isFunction,y1=function(){d(L,Oy);var i=y(L);function L(t,e){_(this,L);var e=(t=i.call(this,t,e)).props.src,r=t.__loadImg={src:e};return e?(e=Mt.IMG[e])&&e.state===Mt.LOADED&&(r.source=e.source,r.width=e.width,r.height=e.height):r.error=!0,t.__config[r1]&&(r=(e=l(t)).style,e=e.currentStyle,r[Yy]=e[Yy]=[null],r[Wy]=e[Wy]=[[0,0,0,0],u1],r[ky]=e[ky]=[0,n1],r[Dy]=e[Dy]=[0,n1],r[Ly]=e[Ly]=[0,n1],r[Fy]=e[Fy]=[0,n1],r[Uy]=e[Uy]=null,r[Xy]=e[Xy]="normal"),t}return f(L,[{key:"__preLayout",value:function(t,e){var r,t=N(F(L.prototype),"__preLayout",this).call(this,t,!1),i=this.__loadImg;return i.error||(r=i.src,(r=Mt.IMG[r])&&r.state===Mt.LOADED&&(i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),t.fixedWidth&&t.fixedHeight||(i.error&&!this.props.placeholder?t.fixedWidth?t.h=t.w:t.fixedHeight?t.w=t.h:t.w=t.h=32:i.source?t.fixedWidth?t.h=t.w*i.height/i.width:t.fixedHeight?t.w=t.h*i.width/i.height:(t.w=i.width,t.h=i.height):t.w=t.h=0,t.fixedWidth=!0,t.fixedHeight=!0),t}},{key:"__addGeom",value:function(t,e){e=At.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),N(F(L.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){t=N(F(L.prototype),"__calContent",this).call(this,t,e,r,i);return t||(e=this.__loadImg,"hidden"!==i[Gy]&&(i[Cy]||i[Iy])&&e.source&&(t=!0)),t}},{key:"render",value:function(t,e,r,c){var u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,_=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,e=N(F(L.prototype),"render",this).call(this,t,e,r,c,u,_),i=(t===et.WEBGL&&(u=e.dx,_=e.dy),e.offscreenBlend),n=e.offscreenMask,a=e.offscreenFilter,f=e.offscreenOverflow,o=this.width,s=this.height,d=this.isDestroyed,y=this.props.placeholder,p=this.computedStyle,l=this.computedStyle,g=l[wy],x=l[Ny],m=l[Py],v=l[By],E=l[Hy],l=l[Gy],b=this.virtualDom,T=this.__config,h=this.__loadImg,A=this.root;if(i&&(r=i.target.ctx),n&&(r=n.target.ctx),a&&(r=a.target.ctx),f&&(r=f.target.ctx),h.source||h.error||h.loading||this.__loadAndRefresh(h,A,r,y,p,o,s),d||"none"===g||"hidden"===l)return e;i=T[t1],c&&i&&i.enabled&&(r=i.ctx),n=e.x3+u,a=e.y3+_,f=h.source;if(h.error&&!y&&L.showError){var A=.02*Math.min(o,s),p=n+.7*o,d=a+.3*s,g=5*A,M=[[n+.15*o,a+.7*s],[n+.3*o,a+.4*s],[n+.5*o,a+.6*s],[n+.6*o,a+.5*s],[n+.9*o,a+.8*s],[n+.15*o,a+.8*s]];if(t===et.CANVAS||t===et.WEBGL){r.strokeStyle="#CCC",r.lineWidth=A,r.fillStyle="#DDD",r.beginPath(),r.moveTo(n,a),r.lineTo(n+o,a),r.lineTo(n+o,a+s),r.lineTo(n,a+s),r.lineTo(n,a),r.stroke(),r.closePath(),r.beginPath();l=te.ellipsePoints(p,d,g,g);ne.canvasPolygon(r,l,0,0),r.fill(),r.closePath(),r.beginPath(),r.moveTo(M[0][0],M[0][1]);for(var R=1,S=M.length;R<S;R++){var O=M[R];r.lineTo(O[0],O[1])}r.lineTo(M[0][0],M[0][1]),r.fill(),r.closePath()}else if(t===et.SVG){this.__addGeom("rect",[["x",n],["y",a],["width",o],["height",s],["stroke","#CCC"],["stroke-width",A],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",p],["cy",d],["r",g],["fill","#DDD"]]);for(var C="",I=0,w=M.length;I<w;I++){var k=M[I];I&&(C+=" "),C+=k[0]+","+k[1]}this.__addGeom("polygon",[["points",C],["fill","#DDD"]])}}else if(f){var D,c=We.calRadius(n,a,o,s,x,m,v,E);if(t===et.CANVAS||t===et.WEBGL)c?(r.save(),r.beginPath(),_1(r,c,u,_),r.clip(),r.closePath(),r.drawImage(f,n,a,o,s),r.restore()):r.drawImage(f,n,a,o,s);else if(t===et.SVG){if(h.cache)return h.cache.cache=!0,b.children=[h.cache],void(!b.cache&&c&&(i={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",f1(c)],["fill","#FFF"]]}]},l=r.add(i),T[e1].push(i),b.conClip="url(#"+l+")"));o===h.width&&s===h.height||(D=wl.matrixResize(h.width,h.height,o,s,n,a,o,s));A=[["xlink:href",h.error?y:h.src],["x",n],["y",a],["width",h.width],["height",h.height]],g=(c&&(p={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",f1(c)],["fill","#FFF"]]}]},d=r.add(p),T[e1].push(p),b.conClip="url(#"+d+")",delete b.cache),D&&!Ht.isE(D)&&A.push(["transform","matrix("+At.joinArr(Ht.m2m6(D),",")+")"]),{type:"img",tagName:"image",props:A});b.children=[g],h.cache=g}}return e}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return N(F(L.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[Cy],n=r[Iy],a=r[Vy],o=r[zy],s=r[jy],r=r[Ky],l=this.computedStyle,h=l[Ly],l=l[Dy];return i[1]!==i1?t-=this.__calSize(i,e,!0):(i=this.__loadImg).source&&(n[1]===n1?t-=i.width*n[0]/i.height:n[1]===a1?t-=i.width*n[0]*e*.01/i.height:n[1]===o1?t-=i.width*n[0]*this.root.computedStyle[$y]/i.height:n[1]===s1?t-=i.width*n[0]*this.root.width*.01/i.height:n[1]===l1?t-=i.width*n[0]*this.root.height*.01/i.height:n[1]===h1?t-=n[0]*Math.max(this.root.width,this.root.height)*.01/i.height:n[1]===c1?t-=n[0]*Math.min(this.root.width,this.root.height)*.01/i.height:t-=i.width),t=(t=(t=(t-=this.__calSize(o,e,!0))-this.__calSize(r,e,!0)-l)-this.__calSize(a,e,!0))-this.__calSize(s,e,!0)-h}},{key:"__calBasis",value:function(t,c,u,e,_){this.__computeReflow();var r=0,i=0,n=0,a=this.currentStyle,f=this.computedStyle,d=this.__loadImg,o=e.w,y=e.h,s=a[qy],l=a[Cy],h=a[Iy],p=t?l:h,h=t?h:l;return-1<[n1,a1,o1,s1,l1,h1,c1].indexOf(s[1])?r=n=i=this.__calSize(s,t?o:y,!0):-1<[n1,a1,o1,s1,l1,h1,c1].indexOf(p[1])?r=n=i=this.__calSize(p,t?o:y,!0):(d.source||d.error)&&(l=this.__preLayout(e),r=n=i=h[1]!==i1?(h=this.__calSize(h,t?y:o,!0),s=l.w/l.h,t?h*s:h/s):t?l.w:l.h),this.__addMBP(t,o,a,f,[r,i,n],_)}},{key:"__loadAndRefresh",value:function(r,i,n,a,o,s,l,h){var c=this;(r.source||r.error)&&(i.delRefreshTask(c.__task),i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Zy]=c,t[Jy]=Ko.REFLOW,t[Qy]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,Mt.measureImg(r.src,function(t){if(t.url===r.src&&!c.isDestroyed){var e=function(){var t=c.currentStyle,e=t[Cy],t=t[Iy];i.delRefreshTask(c.__task),e[1]!==i1&&t[1]!==i1?i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Zy]=c,t[Jy]=Ko.REPAINT,t[Qy]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){d1(h)&&h.call(c)}}):i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Zy]=c,t[Jy]=Ko.REFLOW,t[Qy]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){d1(h)&&h.call(c)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(a)return void Mt.measureImg(a,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:n,root:i,width:s,height:l});r.error=!0}"none"!==o[wy]&&e()}},{ctx:n,root:i,width:s,height:l})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,n=this.root;t===i.src||!t&&i.error?d1(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,n,n.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,n.delRefreshTask(r.__task),n.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[Zy]=r,t[Jy]=Ko.REFLOW,t[Qy]=r.__config,n.__addUpdate(r,r.__config,n,r.__config,t))},__after:function(t){d1(e)&&e(t)}}))}},{key:"appendChild",value:function(){Mt.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}},{key:"isReplaced",get:function(){return!0}}]),L}(),p1=(a(y1,"showError",!0),function(){function e(t){_(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return f(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}()),pi=T.STYLE_KEY,g1=pi.MARGIN_RIGHT,x1=pi.MARGIN_LEFT,m1=pi.PADDING_RIGHT,v1=pi.PADDING_LEFT,E1=pi.WIDTH,b1=pi.HEIGHT,T1=pi.BORDER_RIGHT_WIDTH,A1=pi.BORDER_LEFT_WIDTH,M1=pi.FILL,R1=pi.STROKE,S1=pi.STROKE_MITERLIMIT,O1=pi.STROKE_WIDTH,C1=pi.STROKE_LINECAP,I1=pi.STROKE_LINEJOIN,w1=pi.STROKE_DASHARRAY,k1=pi.STROKE_DASHARRAY_STR,D1=pi.FILL_RULE,L1=pi.VISIBILITY,F1=pi.FLEX_BASIS,A=T.NODE_KEY,N1=A.NODE_CACHE_PROPS,P1=A.NODE_CURRENT_PROPS,B1=A.NODE_CURRENT_STYLE,H1=A.NODE_STYLE,G1=A.NODE_DEFS_CACHE,Y1=r.AUTO,W1=r.PX,U1=r.PERCENT,X1=r.REM,z1=r.VW,V1=r.VH,K1=r.VMAX,j1=r.VMIN,$1=r.RGBA,q1=r.GRADIENT,Z1=At.int2rgba,J1=At.isNil,Q1=At.joinArr,tp=ne.canvasPolygon,ep=ne.svgPolygon,rp={},ip=function(){d(k,D0);var r=y(k);function k(t,e){_(this,k),(t=r.call(this,t,e)).__isMulti=!!t.props.multi,t.__style=mn.normalize(t.style,Nt.DOM_ENTRY_SET.concat(Nt.GEOM_ENTRY_SET)),t.__currentStyle=At.extend({},t.__style),t.__currentProps=At.clone(t.props);e=t.__config;return e[N1]=t.__cacheProps={},e[P1]=t.__currentProps,e[B1]=t.__currentStyle,e[H1]=t.__style,t}return f(k,[{key:"__tryLayInline",value:function(t,e){this.__computeReflow();var r=this.currentStyle,i=r[E1],n=r[x1],a=r[g1],o=r[v1],r=r[m1],s=this.computedStyle,l=s[A1],s=s[T1];return i[1]!==Y1&&(t-=this.__calSize(i,e,!0)),t=(t=(t=(t-=this.__calSize(a,e,!0))-this.__calSize(r,e,!0)-s)-this.__calSize(n,e,!0))-this.__calSize(o,e,!0)-l}},{key:"__calBasis",value:function(t,c,u,e,r){this.__computeReflow();var i=0,n=0,a=0,o=this.currentStyle,_=this.computedStyle,s=e.w,e=e.h,l=o[F1],h=o[E1],f=o[b1],h=t?h:f;return-1<[W1,U1,X1,z1,V1,K1,j1].indexOf(l[1])?i=a=n=this.__calSize(l,t?s:e,!0):-1<[W1,U1,X1,z1,V1,K1,j1].indexOf(h[1])&&(i=a=n=this.__calSize(h,t?s:e,!0)),this.__addMBP(t,s,o,_,[i,n,a],r)}},{key:"__layoutBlock",value:function(t,e,r,i){var n=this.__preLayout(t,!1),a=n.fixedWidth,o=n.fixedHeight,c=n.w,u=n.h,s=n.isParentVertical,n=n.isUpright,l=0,h=0;this.__ioSize(l=!a&&(e||s||n)?l:c,h=o||!e&&s&&n?u:h),e||r||i||(this.__marginAuto(this.currentStyle,t),this.__config[N1]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t,e,r,i){this.__layoutBlock(t,e,r,i)}},{key:"__layoutInline",value:function(t,e,r){var t=this.__preLayout(t,!1),i=t.fixedWidth,n=t.fixedHeight,a=t.w,t=t.h;this.__ioSize(i?a:0,n?t:0),this.__config[N1]=this.__cacheProps={}}},{key:"__calCache",value:function(t,e,r,n,a,o,i,s,l,c,u,_,f,d,y,p,g,x,m,v,E,b,T,A,M,R,S,O,C,I){var h,w=this,t=N(F(k.prototype),"__calCache",this).call(this,t,e,r,n,a,o,i,s,l,c,u,_,f,d,y,p,g,x,m,v,E,b,T,A,M,R,S,O,C,I);return J1(n[O1])&&(n[O1]=!0,e=a[O1]||[],h=this.width,o[O1]=e.map(function(t){return w.__calSize(t,h,!0)})),J1(n[w1])&&(n[w1]=!0,o[w1]=a[w1]||[],n[k1]=o[w1].map(function(t){return Q1(t,",")})),[C1,I1,S1,D1].forEach(function(t){o[t]=a[t]}),[M1,R1].forEach(function(t){var e,r,i;J1(n[t])&&(e=a[t],r=o[t]=[],i=n[t]=[],Array.isArray(e)&&e.forEach(function(t){t&&t[1]===q1?(r.push(t[0]),i.push(!0)):t&&t[1]===$1&&0<t[0][3]?(r.push(t[0]),i.push(Z1(t[0]))):(r.push("none"),i.push("none"))}))}),t}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[L1]}},{key:"__preSet",value:function(e,r){var i=this,t=this.width,n=this.height,a=this.__cacheStyle,o=this.computedStyle,t=r.sx3+.5*t,n=r.sy3+.5*n,a=a[k1],s=o[M1],l=o[R1],h=o[O1],c=o[C1],u=o[I1],_=o[S1],f=o[w1],o=o[D1];return{cx:t,cy:n,stroke:l=l.map(function(t){return t.k?i.__gradient(e,r.ctx,r.x3,r.y3,r.x4,r.y4,t,r.dx,r.dy):Z1(t)}),strokeWidth:h,strokeDasharray:f,strokeDasharrayStr:a,strokeLinecap:c,strokeLinejoin:u,strokeMiterlimit:_,fill:s=s.map(function(t){return t.k?i.__gradient(e,r.ctx,r.x3,r.y3,r.x4,r.y4,t,r.dx,r.dy):Z1(t)}),fillRule:o}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,n=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,l=r.strokeMiterlimit,r=r.fill;t!==et.CANVAS&&t!==et.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==n&&e.lineWidth!==n&&(e.lineWidth=n),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==l&&e.miterLimit!==l&&(e.miterLimit=l),At.isFunction(e.getLineDash)?a&&!At.equalArr(e.getLineDash(),a)&&e.setLineDash(a):a&&e.setLineDash(a))}},{key:"render",value:function(t,e,r,i,n,a){e=N(F(k.prototype),"render",this).call(this,t,e,r,i,n,a);if(t===et.SVG&&(this.virtualDom.type="geom"),e.break)return e;r=this.__preSet(t,e);return Object.assign(e,r)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,c=r.fillRule,n=r.stroke,u=r.strokeWidth,_=r.strokeDasharray,f=r.strokeDasharrayStr,d=r.strokeLinecap,y=r.strokeLinejoin,p=r.strokeMiterlimit,a=r.dx,g=r.dy,x=this.__cacheProps.list,m=this.isMulti,v=this.bbox;if(i.length<=1&&n.length<=1){r={fill:i[0],fillRule:c[0],stroke:n[0],strokeWidth:u[0],strokeDasharray:_[0],strokeDasharrayStr:f[0],strokeLinecap:d[0],strokeLinejoin:y[0],strokeMiterlimit:p[0],dx:a,dy:g,bbox:v};this.__renderOnePolygon(t,e,m,x,r)}else{for(var o=0,E=i.length;o<E;o++){var s=i[o];s&&(s={fill:s,fillRule:c[o],dx:a,dy:g,bbox:v},this.__renderOnePolygon(t,e,m,x,s))}for(var l=0,b=n.length;l<b;l++){var h=n[l];h&&(h={stroke:h,strokeWidth:u[l],strokeDasharray:_[l],strokeDasharrayStr:f[l],strokeLinecap:d[l],strokeLinejoin:y[l],strokeMiterlimit:p[l],dx:a,dy:g,bbox:v},this.__renderOnePolygon(t,e,m,x,h))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,n){var a=n.fill,o=n.stroke,s=n.strokeWidth,l=a&&"conic"===a.k,h=o&&"conic"===o.k,c=a&&"radial"===a.k&&Array.isArray(a.v),u=s&&0<s&&o&&"radial"===o.k&&Array.isArray(o.v);l||h?(l?this.__conicGradient(t,e,i,r,n):"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&h?Mt.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,n,"fill"):"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&u?(Mt.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke.v=n.stroke.v[0],this.__drawPolygon(t,e,r,i,n,!1,!0)):s&&0<s&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!1,!0)):this.__drawPolygon(t,e,r,i,n,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,n,c,u){var a,o=n.fill,s=n.stroke,l=n.strokeWidth,h=n.fillRule,_=n.strokeDasharrayStr,f=n.strokeLinecap,d=n.strokeLinejoin,y=n.strokeMiterlimit,p=n.dx,g=n.dy;t===et.CANVAS||t===et.WEBGL?(this.__preSetCanvas(t,e,n),e.beginPath(),r?i.forEach(function(t){return tp(e,t,p,g)}):tp(e,i,p,g),c&&o&&"none"!==o&&e.fill(h),u&&s&&"none"!==s&&l&&0<l&&e.stroke(),e.closePath()):t===et.SVG&&(a="",r?i.forEach(function(t){return a+=ep(t)}):a=ep(i),n=[["d",a]],(o&&"none"!==o||s&&"none"!==s)&&(c&&o&&"none"!==o?(n.push(["fill",o.v||o]),h&&"nonzero"!==h&&n.push(["fill-rule",h])):n.push(["fill","none"]),u&&s&&"none"!==s&&l&&0<l?(n.push(["stroke",s.v||s]),n.push(["stroke-width",l]),this.__propsStrokeStyle(n,_,f,d,y)):n.push(["stroke-width",0]),this.addGeom("path",n)))}},{key:"__inversePtList",value:function(t,e,a){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r]+o,t[r+1]+s],a);e.push(n[0]),e.push(n[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r]+o,t[r+1]+s],a);e.push(n[0]),e.push(n[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,n,a){var o,c=n.strokeWidth,u=n.strokeDasharrayStr,_=n.strokeLinecap,f=n.strokeLinejoin,d=n.strokeMiterlimit,y=n.dx,p=n.dy,n=Bt(n[a].v,4),s=n[0],l=n[1],h=n[2],n=n[3],h=(l=$a.calMatrixByOrigin(l,[h,n]),Ht.inverse(l));r=this.__inversePtList(r,i,h,y,p),t===et.CANVAS||t===et.WEBGL?(l&&(e.save(),t===et.CANVAS&&(n=this.matrixEvent,l=Ht.multiply(n,l)),e.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])),e.beginPath(),e[a+"Style"]!==s&&(e[a+"Style"]=s),i?r.forEach(function(t){return ne.canvasPolygon(e,t)}):tp(e,r),e[a](),e.closePath(),l&&e.restore()):t===et.SVG&&(o="",i?r.forEach(function(t){return o+=ep(t)}):o=ep(r),h=[["d",o]],"fill"===a?(h.push(["fill",s]),h.push(["strokeWidth",0])):"stroke"===a&&(h.push(["fill","none"]),h.push(["stroke",s]),h.push(["stroke-width",c]),this.__propsStrokeStyle(h,u,_,f,d)),h.push(["transform","matrix(".concat(Q1(Ht.m2m6(l),","),")")]),this.addGeom("path",h))}},{key:"__conicGradient",value:function(c,r,t,u,e){var i,n,a,_,f=this,o=e.fill,s=e.bbox,l=e.dx,h=void 0===l?0:l,l=e.dy,d=void 0===l?0:l,y=o.v;c===et.CANVAS||c===et.WEBGL?(e=Bt(s,4),i=e[0],n=e[1],l=e[2],s=e[3],s=(a=Mt.getCacheCanvas(e=l-i,l=s-n,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,e,l),ee.getConicGradientImage(.5*e,.5*l,e,l,o.v.stop,s.data),a.ctx.putImageData(s,0,0),u?t.forEach(function(t){r.save(),r.beginPath(),tp(r,t,h,d),r.clip(),r.closePath(),r.drawImage(a.canvas,i+h,n+d),r.restore()}):(r.save(),r.beginPath(),tp(r,t,h,d),r.clip(),r.closePath(),r.drawImage(a.canvas,i+h,n+d),r.restore()),a.ctx.clearRect(0,0,e,l)):c===et.SVG&&(u?t.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",ep(t)]]}]},e=r.add(t);f.__config[G1].push(t),y.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ep(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(o={tagName:"clipPath",children:[{tagName:"path",props:[["d",ep(t)]]}]},_=r.add(o),this.__config[G1].push(o),y.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ep(t[0])],["fill",t[1]],["clip-path","url(#"+_+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,n){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),n&&4!==n&&t.push(["stroke-miterlimit",n])}},{key:"__releaseWhenEmpty",value:function(t,e){return"hidden"===e[L1]}},{key:"__offsetX",value:function(t,e,r){N(F(k.prototype),"__offsetX",this).call(this,t,e,r),this.__config[N1]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){N(F(k.prototype),"__offsetY",this).call(this,t,e,r),this.__config[N1]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){N(F(k.prototype),"__resizeX",this).call(this,t,e),this.__config[N1]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){N(F(k.prototype),"__resizeY",this).call(this,t,e),this.__config[N1]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=At.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return J1(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return rp}},{key:"getRegister",value:function(t){if(!t||!At.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!rp.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return rp[t]}},{key:"register",value:function(t,e){if(!(t&&At.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof k))throw new Error("Invalid param");if(k.hasRegister(t))throw new Error("Geom has already register: ".concat(t));rp[t]=e}},{key:"hasRegister",value:function(t){return t&&rp.hasOwnProperty(t)}},{key:"delRegister",value:function(t){k.hasRegister(t)&&delete rp[t]}}]),k}(),n=T.NODE_KEY,np=n.NODE_STYLE,ap=n.NODE_CURRENT_STYLE,op=n.NODE_COMPUTED_STYLE,sp=n.NODE_DOM_PARENT,lp=n.NODE_MATRIX,hp=n.NODE_MATRIX_EVENT,cp=n.NODE_STRUCT,up=k.TYPE_VD,_p=k.TYPE_GM,fp=k.TYPE_CP,dp=[],yp=[],pp={};function gp(t){t instanceof Oy?t.children.forEach(function(t){t instanceof Oy?gp(t):t instanceof dl&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,xp(t,t.props))}):t instanceof dl&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,xp(t,t.props))}function xp(t,e,r){if(t.__nextState||r){r=!At.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state);if(r)for(var i,n=t,r=e,a=t.__nextState||t.state,r=(n.props=r,n.state=a,n.__nextState=null,n.shadow),o=n.shadowRoot,a=n.__cd,s=Us(n.render()),l=(function(t,e,r){var n=bp(e,{},t),a=bp(r,{}),o=[],s=[];Object.keys(n).forEach(function(t){var e=n[t];a[t]||(e.json.key=pp)}),Object.keys(a).forEach(function(t){var e,r,i=n[t],t=a[t];i?(e=i.json,r=t.json,i=i.vd,e.$$type===fp&&r.$$type===fp?e.klass===r.klass&&(Ep(e,r,i),e.key=r.key=pp,s.push(i)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===_p&&e.props.multi!==r.props.multi||(r.__inheritAnimate=i),e.key=r.key=pp,r.$$type===up&&o.push({vd:i,oj:e,nj:r}))):t.json.key=pp}),o.forEach(function(t){vp(t.vd,t.oj,t.nj)}),mp(t,e,r),s.forEach(function(t){Tp(t)})}(r,a,s),n.__init(s),n.shadowRoot),h=(l instanceof D0?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){l[t]=o[t]}),l.__computedStyle=l.__config[op]=o.computedStyle):(i=n.domParent,[np,ap,op,lp,hp].forEach(function(t){l.__config[t]=i.__config[t]})),["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){l[t]=o[t]}),l.__config[sp]=o.domParent,l.__config[cp]=o.__config[cp],dp.push(n),At.isObject(s)&&s.__placeholder||yp.push(r),s&&s.__placeholder&&delete s.__placeholder,s&&s.__inheritAnimate&&delete s.__inheritAnimate,s&&s.__animateRecords&&delete s.__animateRecords,n.host);h&&h.shadow===n;)(h.__shadowRoot=l).__hostRoot=h,h=(n=h).host;else t.props=e,t.state=t.__nextState||t.state,gp(t.shadow)}else gp(t.shadow)}function mp(t,e,r){At.isObject(r)&&(r.$$type===fp?r.key!==pp&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(Ep(e,r,t),Tp(t)):r.$$type===_p&&e&&e.$$type===_p?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===up&&e&&e.$$type===up&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),vp(t,e,r)))}function vp(c,u,_){for(var t=u.children,e=_.children,r=t.length,i=e.length,f=c.children,n=0,a=0,o=0,s=Math.min(r,i);n<s;n++){var l=t[n+a],h=e[n+o];l.key===pp&&h.key===pp||(l.key===pp?(a++,n--,r--,s=Math.min(r,i)):h.key===pp?(o++,n--,i--,s=Math.min(r,i)):mp(f[n+a],l,h))}}function Ep(i,n,a){var o=(n.__placeholder=a).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(n.props).forEach(function(t){var e,r=n.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),o.listener[t]=r)):(t=t.slice(2).toLowerCase(),o.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.off(t,s[t]),a.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),a.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(n.props[t]=e,t=t.slice(2).toLowerCase(),delete o.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(n.props[t]=e,t=t.slice(2).toLowerCase(),a.off(t,e))}),xp(a,n.props,!At.equal(i.props,n.props))}function bp(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return bp(t,r,i&&i[e])}):At.isObject(t)&&(t.$$type!==up&&t.$$type!==_p&&t.$$type!==fp||(t.$$type===up&&bp(t.children,r,i&&i.children),e=t.props.key,At.isNil(e)||""===e||(r.hasOwnProperty(e)&&Mt.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function Tp(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var Ap,Mp={updateList:dp,check:gp,did:function(){dp.forEach(function(t){At.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),dp.splice(0),yp.forEach(function(t){t.__destroy()}),yp=[]}},Rp=At.joinVd,Sp=At.joinDef,Op=Ko.contain,Cp=Ko.NONE,Ip=Ko.TRANSFORM_ALL,wp=Ko.OPACITY,kp=Ko.FILTER,Dp=Ko.MIX_BLEND_MODE;function Lp(t,e,r){for(var c=t.childNodes,i=c[0],u=e.defs,n=r.defs,a=u.length,o=n.length,s=0,l=i.childNodes;s<Math.min(a,o);s++)!function(e,t,r){if(t.tagName!==r.tagName)Vp(e,"beforebegin",Sp(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},n=0,c=(t.props||[]).length;n<c;n++){var a=Bt(t.props[n],2),u=a[0],a=a[1];i[u]=a}for(var o=0,_=(r.props||[]).length;o<_;o++){var s=Bt(r.props[o],2),l=s[0],s=s[1];i.hasOwnProperty(l)?(i[l]!==s&&e.setAttribute(l,s),delete i[l]):e.setAttribute(l,s)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var f=e.childNodes,d=t.children.length,y=r.children.length,h=0;h<Math.min(d,y);h++)Yp(e,h,t.children[h],r.children[h]);if(h<d)for(var p=d-1;h<=p;p--)zp(e,f,p);else if(h<y)for(;h<y;h++)Xp(e,f,h,Rp(r.children[h]))}}(l[s],u[s],n[s]);if(s<a)for(var h=a-1;s<=h;h--)zp(i,l,h);else if(s<o)for(;s<o;s++)Xp(i,l,s,Sp(n[s]));r.hasOwnProperty("lv")||Gp(c[1],e.bb,r.bb),Bp(t,e,r,!0)}function Fp(t,e,r){if("dom"===e.type)"dom"===r.type?Bp(t,e,r):"geom"===r.type?Hp(t,e,r):Up(t,r);else if("text"===e.type)if("text"===r.type){var i=t,c=e,n=r;if(!n.cache){for(var u=c.children.length,_=n.children.length,a=0;a<Math.min(u,_);a++)Yp(i,a,c.children[a],n.children[a],!0);var f=i.childNodes;if(a<u)for(var d=u-1;a<=d;d--)zp(i,f,d);else if(a<_)for(;a<_;a++)Xp(i,f,a,Rp(n.children[a]))}}else Up(t,r);else if("geom"===e.type)if("dom"===r.type)Hp(t,e,r);else if("geom"===r.type){var o=t,s=e,l=r;if(l.cache)Pp(o,0,l,l.lv);else if(l.hasOwnProperty("lv"))Pp(o,0,l,l.lv);else{Np(o,s,l),Gp(o.firstChild,s.bb,l.bb);for(var y=s.children.length,p=l.children.length,h=0,g=o.lastChild,x=g.childNodes;h<Math.min(y,p);h++)Yp(g,h,s.children[h],l.children[h]);if(h<y)for(var m=y-1;h<=m;m--)zp(g,x,m);else if(h<p)for(;h<p;h++)Xp(g,x,h,Rp(l.children[h]))}}else Up(t,r);else"img"===e.type?"img"===r.type?Wp(t,e,r):Up(t,r):"item"===e.type&&"item"===r.type&&Wp(t,e,r)}function Np(t,e,r){var i=r.transform,n=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,l=r.filter,h=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==n&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter===l&&e.mixBlendMode===h||((i=(l?"filter:".concat(l,";"):"")+(h?"mix-blend-mode:".concat(h,";"):""))?t.setAttribute("style",i):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function Pp(t,e,r,i){var n=r.transform,a=r.opacity,o=r.mask,s=r.filter,r=r.mixBlendMode;o?t.setAttribute("mask",o):t.removeAttribute("mask"),i!==Cp&&(Op(i,Ip)&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),Op(i,wp)&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),(Op(i,kp)||Op(i,Dp))&&((o=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",o):t.removeAttribute("style")))}function Bp(t,e,r,i){if(r.cache)Pp(t,0,r,r.lv);else{r.hasOwnProperty("lv")?Pp(t,0,r,r.lv):(Np(t,e,r),i||Gp(t.firstChild,e.bb,r.bb));for(var n=e.children.length,a=r.children.length,o=0,s=t.lastChild,l=s.childNodes;o<Math.min(n,a);o++)Fp(l[o],e.children[o],r.children[o]);if(o<n)for(var h=n-1;o<=h;h--)zp(s,l,h);else if(o<a)for(;o<a;o++)Xp(s,l,o,Rp(r.children[o]))}}function Hp(t,e,r){Np(t,e,r),Gp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(i,n);a++)Up(s[a],r.children[a]);if(a<i)for(var l=i-1;a<=l;l--)zp(o,s,l);else if(a<n)for(;a<n;a++)Xp(o,s,a,Rp(r.children[a]))}function Gp(t,e,r){for(var i=e.length,n=r.length,a=0;a<Math.min(i,n);a++)Yp(t,a,e[a],r[a]);var o=t.childNodes;if(a<i)for(var s=i-1;a<=s;s--)zp(t,o,s);else if(a<n)for(;a<n;a++)Xp(t,o,a,Rp(r[a]))}function Yp(t,e,r,i,n){t=t.childNodes;r.tagName!==i.tagName?Up(t[e],i):(Wp(t[e],r,i),n&&r.content!==i.content&&(t[e].innerHTML=i.content))}function Wp(e,t,r){if(!r.cache){for(var i={},n=0,a=(t.props||[]).length;n<a;n++){var o=Bt(t.props[n],2),c=o[0],o=o[1];i[c]=o}for(var s=0,u=(r.props||[]).length;s<u;s++){var l=Bt(r.props[s],2),h=l[0],l=l[1];i.hasOwnProperty(h)?(i[h]!==l&&e.setAttribute(h,l),delete i[h]):e.setAttribute(h,l)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function Up(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=Rp(t)})):r=Rp(e),Vp(t,"beforebegin",r),t.parentNode.removeChild(t)}function Xp(t,e,r,i){r>=e.length?Vp(t,"beforeend",i):Vp(e[r],"beforebegin",i)}function zp(t,e,r){e[r]&&t.removeChild(e[r])}function Vp(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(Ap=Ap||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(Ap.childNodes[0],t)}}var Kp=At.isFunction,jp=function(){function t(){_(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return f(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var t,n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;e.length&&e.splice(0).forEach(function(t){var r=t.target,e=t.animate,i=t.offsetTime;!r.isDestroyed&&e&&(e=Array.isArray(e)?e:[e]).forEach(function(t){var e=t.value,t=t.options,e=(t.autoPlay=!1,i&&((t=Object.assign({},t)).delay=t.delay||0,t.delay+=i),r.animate(e,t));n.add(e,a)})}),e===this.__records2&&(t=this.__onList,(e=this.list2).length&&t.length&&e.forEach(function(e){t.forEach(function(t){e.off(t[0],t[1]),e.on(t[0],t[1])})}))}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"finish",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Kp(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Kp(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Kp(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Kp(r)&&r(t))}])}},{key:"on",value:function(t,e){if(Kp(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(r,i){var n=this;this.list.forEach(function(e){function t(){var t=e.timestamp;t!==n.__lastTime[r]&&(n.__lastTime[r]=t,i())}t.__karasEventCb=i,e.on(r,t)})}},{key:"off",value:function(e,r){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.off(e[t],r);else this.list.forEach(function(t){t.off(e,r)})}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),$p=ne.canvasPolygon;var xi=0,bi=1,Ai=2,t=3,ur=4,Wr=function(c,t,u,_){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,n,a,o,s,l,t=Bt(t,4),h=t[2],t=t[3];0===h?(r=t.matrix,e=t.target,l=t.ctx,n=t.x,a=t.y,o=t.offsetWidth,s=t.offsetHeight,i=t.list,c.globalCompositeOperation="destination-in",c.globalAlpha=1,c.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),c.fillStyle="#FFF",c.beginPath(),i?$p(c,i):c.rect(n,a,o,s),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",e.draw(),(c=l).setTransform(1,0,0,1,0,0),c.globalAlpha=1,u&&_&&c.drawImage(e.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),e.ctx.setTransform(1,0,0,1,0,0),e.ctx.clearRect(0,0,u,_),e.draw(),Mt.releaseCacheCanvas(e.canvas)):1===h?(r=t.target,i=t.ctx,n=t.filter,c.filter&&((a=Mt.getCacheCanvas(u,_,null,"filter2")).ctx.filter=ne.canvasFilter(n),u&&_&&a.ctx.drawImage(r.canvas,0,0,u,_,0,0,u,_),a.ctx.filter="none",a.draw(),r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,u,_),u&&_&&r.ctx.drawImage(a.canvas,0,0,u,_,0,0,u,_),r.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,u,_),a.draw(),Mt.releaseCacheCanvas(a.canvas)),(c=i).setTransform(1,0,0,1,0,0),c.globalAlpha=1,u&&_&&c.drawImage(r.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,u,_),r.draw(),Mt.releaseCacheCanvas(r.canvas)):2===h?(o=t.mask,t.isClip?(t.target.draw(),(c=o.ctx).globalCompositeOperation="source-out",c.globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(t.target.canvas,0,0,u,_,0,0,u,_),o.draw(),c.globalCompositeOperation="source-over",t.target.ctx.setTransform(1,0,0,1,0,0),t.target.ctx.clearRect(0,0,u,_),t.target.draw(),Mt.releaseCacheCanvas(t.target.canvas),(c=t.ctx).globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(o.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,u,_),o.draw(),Mt.releaseCacheCanvas(o.canvas)):(o.draw(),s=t.target,(c=s.ctx).globalCompositeOperation="destination-in",c.globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(o.canvas,0,0,u,_,0,0,u,_),c.globalCompositeOperation="source-over",s.draw(),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,u,_),o.draw(),Mt.releaseCacheCanvas(o.canvas),(c=t.ctx).globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(s.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,u,_),s.draw(),Mt.releaseCacheCanvas(s.canvas))):3===h?(l=t.target,(c=t.ctx).globalCompositeOperation=t.mixBlendMode,l.draw(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,u&&_&&c.drawImage(l.canvas,0,0,u,_,0,0,u,_),c.globalCompositeOperation="source-over",c.draw&&c.draw(!0),l.ctx.globalAlpha=1,l.ctx.setTransform(1,0,0,1,0,0),l.ctx.clearRect(0,0,u,_),l.draw(),Mt.releaseCacheCanvas(l.canvas)):4===h&&(c=t.ctx)}),c},qp=f(function t(e,r,i){_(this,t),this.uuid=ko.genUuid(),this.time=Mt.now(),this.texture=e,this.width=r,this.height=i}),Zp=function(){function s(t,e,r,i,n,a,o){_(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=n,this.height=a,this.bbox=o,this.available=!0,this.__page=new qp(e,n,a),this.reOffset()}return f(s,[{key:"reOffset",value:function(){var t=this.bbox;this.dx=-t[0],this.dy=-t[1],this.dbx=this.sx1-t[0],this.dby=this.sy1-t[1]}},{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),Jp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",Qp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",tg="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",eg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",rg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ig="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ng="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ag="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",og="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",sg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",lg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",hg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",cg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ug="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",_g="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",fg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",dg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",yg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",pg=Po.NA,gg=Po.LOCAL,xg=Po.CHILD,mg=Po.SELF,vg=Po.getCache,Eg=xi,bg=bi,Tg=Ai,Ag=t,Mg=ur,Rg=Wr,i=T.STYLE_KEY,Sg=i.DISPLAY,Og=i.OPACITY,Cg=i.VISIBILITY,Ig=i.FILTER,wg=i.OVERFLOW,kg=i.MIX_BLEND_MODE,Dg=i.FILL,Lg=i.TRANSFORM,Fg=i.TRANSFORM_ORIGIN,Ng=i.PERSPECTIVE,Pg=i.PERSPECTIVE_ORIGIN,Bg=i.PADDING_LEFT,Hg=i.PADDING_RIGHT,Gg=i.PADDING_TOP,Yg=i.PADDING_BOTTOM,Wg=i.BORDER_TOP_WIDTH,Ug=i.BORDER_RIGHT_WIDTH,Xg=i.BORDER_BOTTOM_WIDTH,zg=i.BORDER_LEFT_WIDTH,Vg=i.MATRIX,e=T.NODE_KEY,Kg=e.NODE_CACHE,jg=e.NODE_CACHE_TOTAL,$g=e.NODE_CACHE_OVERFLOW,qg=e.NODE_CACHE_MASK,Zg=e.NODE_CACHE_FILTER,Jg=e.NODE_MATRIX,Qg=e.NODE_MATRIX_EVENT,tx=e.NODE_OPACITY,ex=e.NODE_COMPUTED_STYLE,rx=e.NODE_CURRENT_STYLE,ix=e.NODE_LIMIT_CACHE,nx=e.NODE_REFRESH_LV,ax=e.NODE_CACHE_STYLE,ox=e.NODE_DEFS_CACHE,sx=e.NODE_IS_MASK,lx=e.NODE_DOM_PARENT,hx=e.NODE_PERSPECTIVE_MATRIX,cx=e.NODE_VIRTUAL_DOM,ux=e.NODE_CACHE_AS_BITMAP,_x=e.NODE_STRUCT,fi=T.STRUCT_KEY,fx=fi.STRUCT_NODE,dx=fi.STRUCT_INDEX,yx=fi.STRUCT_TOTAL,px=fi.STRUCT_HAS_MASK,gx=fi.STRUCT_LV,xx=Ko.NONE,mx=Ko.TRANSFORM_ALL,vx=Ko.OPACITY,Ex=Ko.FILTER,bx=Ko.REPAINT,Tx=Ko.contain,Ax=Ko.MIX_BLEND_MODE,Mx=Ko.PERSPECTIVE,Rx=Ht.isE,Sx=Ht.inverse,Ox=Ht.multiply,Cx=Si,Ix=mi,wx=At.assignMatrix,kx=At.transformBbox;function Dx(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function Lx(t,e,r){for(var i=0;r--;){var n=t[e][yx];i+=n||0,e+=n||0,i++,e++}return i}function Fx(t,e,r,i){var e=e.lockOneChannel(),n=ft.createTexture(t,null,e,r,i),a=t.createFramebuffer(),o=(t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.checkFramebufferStatus(t.FRAMEBUFFER));return o!==t.FRAMEBUFFER_COMPLETE&&Mt.error("Framebuffer object is incomplete: "+o.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[e,a,n]}function Nx(t,e,c,u,_,f,d,y,p,g,x,m){for(var v,E,b={},T={},r=function(c,u,_,f,d,y){var p,g=c.__sx1,x=c.__sy1,m=(t=c.__config)[Kg],v=(t=t[ex])[Ig],E=t[Ng],t=t[Pg],b=m&&m.available?m.bbox:c.filterBbox;b=b.slice(0),E&&(p=$a.calPerspectiveMatrix(E,t));for(var T=[_],A=0,M=(v.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];"blur"===e&&(A=Rr.outerSize(t))}),d[_]=1,{});T.length;)for(var R=T.splice(0),S=0,O=R.length;S<O;S++)for(var e=R[S],r=e+1,C=e+(u[e][yx]||0)+1;r<C;r++){var i=u[r],n=i[fx],i=i[yx];if(!n.isMask){var I=n.__sx1,w=n.__sy1,a=n.__config,o=a[ix],s=a[Kg],k=a[jg],l=a[Zg],h=a[qg],D=a[$g],a=a[ex],L=a[Sg],F=a[Cg],N=a[Lg],P=a[Fg],a=a[Og];if(o&&!y)return;"none"!==L?"hidden"!==F&&(f[r]=e,d[r]=d[e]*a,o=void 0,a=void(F=L=0),n instanceof Hs?o=n.bbox:(h=vg([h,l,D,k]))?(o=h.bbox,L=h.dbx,F=h.dby,r+=i||0,a=!0):s&&s.available?(o=s.bbox,L=s.dbx,F=s.dby):o=n.filterBbox,o&&((o=o.slice(0))[0]-=g,o[1]-=x,o[2]-=g,o[3]-=x,l=M[e],N&&!Rx(N)&&((D=P.slice(0))[0]+=I-g+L,D[1]+=w-x+F,k=$a.calMatrixByOrigin(N,D),l=l?Ox(l,k):k),l&&(M[r]=l),p&&(l=Ox(p,l)),o=kx(o,l,A,A),i&&!a&&T.push(r),Dx(b,o,g,x))):r+=i||0}}return[b,p]}(c,d,_,b,T,(t.getParameter(t.MAX_TEXTURE_SIZE),p)),r=Bt(r,2),i=r[0],A=r[1],M=(i||(v=!0),(i=p||v?[0,0,x,m]:i)[2]-i[0]),R=i[3]-i[1],r=Bt(Fx(t,e,M,R),3),S=r[0],O=r[1],C=r[2],I=c.__sx1,w=c.__sy1,n=.5*M,a=.5*R,k=-i[0],D=-i[1],L=I-i[0],F=w-i[1],N=(y&&y.available?e.addTexAndDrawWhenLimit(t,y,1,null,n,a,k,D,!1):p&&(r=Mt.getCacheCanvas(M,R,"__$$OVERSIZE$$__"),c.render(et.WEBGL,0,t,pg,0,0),y=e.lockOneChannel(),E=ft.createTexture(t,r.canvas,y),E=new Zp(t,E,0,0,M,R,[0,0,M,R]),e.addTexAndDrawWhenLimit(t,E,1,null,n,a,0,0,!1),e.refresh(t,n,a),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,M,R),E.release(),e.releaseLockChannel(y)),{}),o=_+1,P=_+(f||0)+1;o<P;o++){var B,H,G,Y,W,U,X,s,z,V,K=d[o],j=K[fx],$=K[yx],K=K[px],l=j.__config,h=N[b[o]],q=T[o];j instanceof Hs?(A&&(h=Ox(A,h)),e.addTexAndDrawWhenLimit(t,l[Kg],q,h,n,a,k,D,!1)):(B=l[Kg],H=l[jg],G=l[Zg],V=l[qg],Y=l[$g],z=l[sx],s=(l=l[ex])[Sg],U=l[Cg],X=l[Lg],W=l[Fg],l=l[kg],"none"!==s?("hidden"!==U&&!z||j.hookGlRender)&&(X&&!Rx(X)&&(s=W.slice(0),B&&B.available?(s[0]+=B.sx1,s[1]+=B.sy1):(s[0]+=j.__sx1,s[1]+=j.__sy1),U=F-w,s[0]+=L-I,s[1]+=U,z=$a.calMatrixByOrigin(X,s),h=h?Ox(h,z):z),h&&(N[o]=h),A&&(h=Ox(A,h)),(W=vg([V,G,Y,H,B]))&&(Ix(l)?(e.refresh(t,n,a),X=(U=Bt(Fx(t,e,M,R),3))[0],s=U[1],z=U[2],e.addTexAndDrawWhenLimit(t,W,q,h,n,a,k,D,!1),e.refresh(t,n,a),S=(V=Bt(Gx(t,e,S,X,O,C,Cx(l),M,R),3))[0],O=V[1],C=V[2],t.deleteFramebuffer(s),t.deleteTexture(z)):e.addTexAndDrawWhenLimit(t,W,q,h,n,a,k,D,!1),W!==B&&(o+=($||0)+Lx(d,o+($||0)+1,K||0))),j.hookGlRender&&j.hookGlRender(t,q,h,n,a,k,D,!1)):o+=($||0)+Lx(d,o+($||0)+1,K||0))}c.hookGlRender&&c.hookGlRender(t,1,null,n,a,k,D,!1),e.refresh(t,n,a),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,x,m),t.deleteFramebuffer(O);r=new Zp(t,C,I,w,M,R,i);return e.releaseLockChannel(S,r.page),[p||v,r]}function Px(n,a,r,t,e,i,_){var o=t.sx1,s=t.sy1,l=t.width,h=t.height,c=t.bbox,u=t;return e.forEach(function(t){var e,r,t=Bt(t,2),i=t[0],t=t[1];"blur"===i&&0<t?(r=Bx(n,a,u,t,l,h,o,s,c))&&(r=Bt(r,4),u=r[0],l=r[1],h=r[2],c=r[3]):"dropShadow"===i?(r=function(t,e,c,r,i,n,u,_,a){e.refresh(t,.5*i,.5*n);var r=Bt(r,5),f=r[0],d=r[1],o=r[2],r=r[4],s=Bt(Fx(t,e,i,n),3),y=s[0],l=s[1],s=s[2],h=e.findExistTexChannel(c.page);-1===h?(h=e.lockOneChannel(),ft.bindTexture(t,c.page.texture,h)):e.lockChannel(h);t.useProgram(t.programDs),s=ft.drawDropShadow(t,t.programDs,l,s,c.page.texture,y,h,i,n,r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(l);r=a,l=new Zp(t,s,u,_,i,n,a.slice(0)),o=Bx(t,e,l,o,i,n,u,_,a);{var p;if(e.releaseLockChannel(h),t.useProgram(t.program),o)return t.deleteTexture(s),h=Bt(o,4),l=h[0],i=h[1],n=h[2],a=h[3],(f||d)&&(a[0]+=f,a[1]+=d,a[2]+=f,a[3]+=d,l.sx1=a[0],l.sy1=a[1],l.reOffset()),Dx(s=r.slice(0),a,0,0),i=s[2]-s[0],n=s[3]-s[1],o=.5*i,h=.5*n,f=-s[0],d=-s[1],r=Bt(Fx(t,e,i,n),3),a=r[0],p=r[1],r=r[2],e.addTexAndDrawWhenLimit(t,c,1,null,o,h,f,d,!1),e.addTexAndDrawWhenLimit(t,l,1,null,o,h,f,d,!1),e.refresh(t,o,h,!1),e.releaseLockChannel(y),e.releaseLockChannel(a),t.deleteFramebuffer(p),c=new Zp(t,r,u,_,i,n,s),e.releaseLockChannel(a,l.page),[c,i,n,s]}}(n,a,u,t,l,h,o,s,c))&&(r=Bt(r,4),u=r[0],l=r[1],h=r[2],c=r[3]):"hueRotate"===i?(r=te.d2r(t%360),e=Math.cos(r),r=Math.sin(r),(e=Hx(n,a,u,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],l,h,o,s,c))&&(r=Bt(e,4),u=r[0],l=r[1],h=r[2],c=r[3])):"saturate"===i&&100!==t?(r=Hx(n,a,u,[.213+.787*(e=.01*t),.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0],l,h,o,s,c))&&(e=Bt(r,4),u=e[0],l=e[1],h=e[2],c=e[3]):"brightness"===i&&100!==t?(e=Hx(n,a,u,[r=.01*t,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],l,h,o,s,c))&&(r=Bt(e,4),u=r[0],l=r[1],h=r[2],c=r[3]):"grayscale"===i&&0<t?((e=1-.01*(t=Math.min(t,100)))<0?e=0:1<e&&(e=1),(r=Hx(n,a,u,[.2126+.7874*e,.7152-.7152*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152+.2848*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152-.7152*e,.0722+.9278*e,0,0,0,0,0,1,0],l,h,o,s,c))&&(e=Bt(r,4),u=e[0],l=e[1],h=e[2],c=e[3])):"contrast"===i&&100!==t?(r=Hx(n,a,u,[r=.01*t,0,0,0,e=-.5*r+.5,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],l,h,o,s,c))&&(e=Bt(r,4),u=e[0],l=e[1],h=e[2],c=e[3]):"sepia"===i&&0<t?((r=1-.01*(t=Math.min(t,100)))<0?r=0:1<r&&(r=1),(e=Hx(n,a,u,[.393+.607*r,.769-.769*r,.189-.189*r,0,0,.349-.349*r,.686+.314*r,.168-.168*r,0,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,0,1,0],l,h,o,s,c))&&(r=Bt(e,4),u=r[0],l=r[1],h=r[2],c=r[3])):"invert"===i&&0<t&&(e=.01*(t=Math.min(t,100)),(i=Hx(n,a,u,[r=1-2*e,0,0,0,e,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],l,h,o,s,c))&&(t=Bt(i,4),u=t[0],l=t[1],h=t[2],c=t[3]))}),n.useProgram(n.program),n.viewport(0,0,i,_),u}function Bx(t,e,c,r,u,_,f,d,i){for(var n=Rr.kernelSize(r),y=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));y<n;)n-=2;var a=Rr.outerSizeByD(n),o=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(o<u||o<_)){for(var o=i.slice(0),i=(o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a,u+2*a),p=_+2*a,g=.5*i,x=.5*p,m=Rr.gaussianWeight(r,n),s="",l="",h=Math.floor(.5*n),v=0;v<h;v++){var E=.01*(h-v);s+="v_texCoordsBlur[".concat(v,"] = a_texCoords + vec2(-").concat(E,", -").concat(E,") * u_direction;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(v,"]) * ").concat(m[v],";")}s+="v_texCoordsBlur[".concat(h,"] = a_texCoords;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(h,"]) * ").concat(m[h],";");for(var b=0;b<h;b++){var T=.01*(b+1);s+="v_texCoordsBlur[".concat(b+h+1,"] = a_texCoords + vec2(").concat(T,", ").concat(T,") * u_direction;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(b+h+1,"]) * ").concat(m[b+h+1],";")}s=Jp.replace("[3]","["+n+"]").replace(/}$/,s+"}"),l=Qp.replace("[3]","["+n+"]").replace(/}$/,l+"}"),r=ft.initShaders(t,s,l);t.useProgram(r);var A=Bt(Fx(t,e,i,p),3),M=A[0],R=A[1],A=A[2],S=e.findExistTexChannel(c.page),c=(-1===S?(S=e.lockOneChannel(),ft.bindTexture(t,c.page.texture,S)):e.lockChannel(S),A=ft.drawBlur(t,r,R,A,c.page.texture,M,S,u,_,a,i,p,g,x),t.deleteShader(r.vertexShader),t.deleteShader(r.fragmentShader),t.deleteProgram(r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(R),e.releaseLockChannel(S),new Zp(t,A,f,d,i,p,o));return e.releaseLockChannel(M,c.page),[c,i,p,o]}}function Hx(t,e,r,i,n,a,o,c,s){var l=Bt(Fx(t,e,n,a),3),u=l[0],_=l[1],l=l[2],h=e.findExistTexChannel(r.page),r=(-1===h?(h=e.lockOneChannel(),ft.bindTexture(t,r.page.texture,h)):e.lockChannel(h),t.useProgram(t.programCm),ft.drawCm(t,t.programCm,h,i),e.releaseLockChannel(h),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(_),new Zp(t,l,o,c,n,a,s.slice(0)));return e.releaseLockChannel(u,r.page),[r,n,a,s]}function Gx(t,e,r,i,n,a,o,s,l){"multiply"===(o=Cx(o))?h=eg:"screen"===o?h=rg:"overlay"===o?h=ig:"darken"===o?h=ng:"lighten"===o?h=ag:"color-dodge"===o?h=og:"color-burn"===o?h=sg:"hard-light"===o?h=lg:"soft-light"===o?h=hg:"difference"===o?h=cg:"exclusion"===o?h=ug:"hue"===o?h=_g:"saturation"===o?h=fg:"color"===o?h=dg:"luminosity"===o&&(h=yg);o=ft.initShaders(t,tg,h);t.useProgram(o);var h=Bt(Fx(t,e,s,l),3),c=h[0],u=h[1],h=h[2];return ft.drawMbm(t,o,r,i,s,l),t.useProgram(t.program),t.deleteShader(o.vertexShader),t.deleteShader(o.fragmentShader),t.deleteProgram(o),t.deleteFramebuffer(n),t.deleteTexture(a),e.releaseLockChannel(r),e.releaseLockChannel(i),[c,u,h]}var Yx={renderCanvas:function(Et,t,h){for(var vt=h.__structs,bt=h.width,Tt=h.height,c=[],u=0,_=vt.length;u<_;u++){var f,d,y,e,p=vt[u],r=p[fx],g=p[gx],x=p[yx],p=p[px];r instanceof Hs||(d=(f=r.__config)[nx],y=f[ux],e=f[ex],bx<=d&&r.__calCache(Et,t,f[lx],f[ax],f[rx],e,r.clientWidth,r.clientHeight,r.offsetWidth,r.offsetHeight,e[Wg],e[Ug],e[Xg],e[zg],e[Gg],e[Hg],e[Yg],e[Bg],r.__sx1,r.__sx2,r.__sx3,r.__sx4,r.__sx5,r.__sx6,r.__sy1,r.__sy2,r.__sy3,r.__sy4,r.__sy5,r.__sy6),y&&("none"!==e[Sg]?c.push([u,g,x,r,f,p]):u+=(x||0)+Lx(vt,u+(x||0)+1,p||0)))}c.length&&(c.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),c.forEach(function(h){var h=Bt(h,6),c=h[0],u=h[1],_=h[2],f=h[3],t=h[4],h=h[5],Y=Et,e=c,c=u,u=_||0,G=vt,_=h,W=bt,U=Tt,d=t[jg],h=t[Zg],y=t[qg],p=t[$g],g=t[rx],x=t[ex];if(d&&d.available){var m=t[nx],r=t[ax];Tx(m,mx)&&(r=f.__calMatrix(m,r,g,x,t),wx(t[Jg],r)),Tx(m,vx)&&(t[tx]=x[Og]=g[Og]),Tx(m,Ex)&&f.__calFilter(g,x),Tx(m,Ax)&&(x[kg]=g[kg])}else{for(var v,E,b,T=!0,A=f.__sx1,M=f.__sy1,R=[],S=[],O=1,C=c,I=e,w=e+(u||0)+1;I<w;I++){var i,k,D,L,F,N,P,B,H,X,z=G[I],V=z[fx],K=z[gx],j=z[yx],z=z[px];V instanceof Hs?(i=V.bbox,Dx(v,i=Rx(a)?i:kx(i,a,0,0),0,0)):(X=(i=V.__config)[nx],k=i[jg],D=i[Zg],L=i[qg],F=i[$g],N=i[ex],P=i[sx],"none"===N[Sg]||I!==e&&P?I+=(j||0)+Lx(G,I+(j||0)+1,z||0):(I===e||(C<K?(a=b[Qg],Rx(a)&&(a=null),R.push(a),O=b[tx],S.push(O)):K<C&&(R.splice(-(P=C-K)),a=R[K-1],S.splice(-P),O=S[K-1])),C=K,P=(b=i)[rx],K=i[ax],H=B=void 0,X<bx?(Tx(X,mx)?(B=V.__calMatrix(X,K,P,N,i),wx(i[Jg],B)):B=i[Jg],Tx(X,vx)&&(N[Og]=P[Og]),H=N[Og],Tx(X,Ex)&&(V.__bbox=null,V.__filterBbox=null,V.__calFilter(P,N)),B=i[Jg],Tx(X,Ax)&&(N[kg]=P[kg])):(V.__bbox=null,V.__filterBbox=null,I===e&&V.__calFilter(P,N),B=V.__calMatrix(X,K,P,N,i),wx(i[Jg],B),H=N[Og]=P[Og]),I===e?(H=1,E=B,B=Ht.identity()):Rx(a)||(B=Ox(a,B)),wx(i[Qg],B),X=void(i[tx]=O*H),X=(K=e<I&&vg([L,D,F,k]))?(I+=(j||0)+Lx(G,I+(j||0)+1,z||0),K.bbox):I===e?V.bbox:V.filterBbox,X=kx(X,B,0,0),I===e?v=X.slice(0):Dx(v,X,0,0)))}if(t[jg]=d=Po.getInstance(v,A,M),!d||!d.enabled)return;d.__available=!0;for(var $,r=d,q=r.dx,Z=r.dy,J=r.dbx,Q=r.dby,tt=r.x,et=r.y,n=d.ctx,a=null,C=c,rt={},it={},o=e,nt=e+(u||0)+1;o<nt;o++){var at=G[o],s=at[fx],ot=at[gx],st=at[yx],at=at[px];if(s instanceof Hs)s.render(Y,bx,n,xg,q,Z),it.hasOwnProperty(o)&&(n=Rg(n,it[o],W,U));else{var lt=s.__config,ht=lt[nx],ct=lt[jg],ut=lt[Zg],_t=lt[qg],ft=lt[$g],l=lt[ex];if(rt.hasOwnProperty(o)){for(var dt=Bt(rt[o],3),yt=dt[0],pt=dt[1],dt=dt[2],gt=Mt.getCacheCanvas(W,U,null,"mask2"),xt=(dt.mask=gt,dt.isClip=s.isClip,o+(st||0)+1);--pt;)xt+=(G[xt][yx]||0)+1;var mt=it[--xt]=it[xt]||[];mt.push([yt,ot,Tg,dt]),mt.push([xt,ot,Mg,{ctx:n,target:gt}]),n=gt.ctx}o===e||(C<ot?(Rx(a=$)&&(a=null),R.push(a)):ot<C&&(R.splice(-(C-ot)),a=R[ot-1]));var yt=l[Lg],dt=l[Fg],mt=l[Sg],gt=void 0,_t=(o===e||Rx(a)&&Rx(yt)?gt=null:((dt=dt.slice(0))[0]+=J+s.__sx1-A+tt,dt[1]+=Q+s.__sy1-M+et,gt=$a.calMatrixByOrigin(yt,dt),Rx(a)||(gt=Ox(a,gt))),gt?n.setTransform(gt[0],gt[1],gt[4],gt[5],gt[12],gt[13]):n.setTransform(1,0,0,1,0,0),C=ot,$=gt,vg([_t,ut,ft,ct]));o!==e&&_t?(o+=(st||0)+Lx(G,o+(st||0)+1,at||0),"none"!==mt&&(ut=l[kg],Ix(ut)?n.globalCompositeOperation=Cx(ut):n.globalCompositeOperation="source-over",n.globalAlpha=lt[tx],Po.drawCache(_t,d),n.globalCompositeOperation="source-over")):(bx<=ht&&s.__calCache(Y,n,lt[lx],lt[ax],lt[rx],l,s.clientWidth,s.clientHeight,s.offsetWidth,s.offsetHeight,l[Wg],l[Ug],l[Xg],l[zg],l[Gg],l[Hg],l[Yg],l[Bg],s.__sx1,s.__sx2,s.__sx3,s.__sx4,s.__sx5,s.__sx6,s.__sy1,s.__sy2,s.__sy3,s.__sy4,s.__sy5,s.__sy6),ct=(ft=s.render(Y,ht,n,o===e?gg:xg,q,Z)||{}).offscreenBlend,ut=ft.offscreenMask,_t=ft.offscreenFilter,lt=ft.offscreenOverflow,ct&&((it[l=o+(st||0)+Lx(G,o+(st||0)+1,at||0)]=it[l]||[]).push([o,ot,Ag,ct]),n=ct.target.ctx),ut&&(rt[o+(st||0)+1]=[o,at,ut],n=ut.target.ctx),_t&&((it[s=o+(st||0)+Lx(G,o+(st||0)+1,at||0)]=it[s]||[]).push([o,ot,bg,_t]),n=_t.target.ctx),lt&&((it[ht=o+(st||0)+Lx(G,o+(st||0)+1,at||0)]=it[ht]||[]).push([o,ot,Eg,lt]),n=lt.target.ctx),it.hasOwnProperty(o)&&(n=Rg(n,it[o],W,U)),"none"===mt&&(o+=(st||0)+Lx(G,o+(st||0)+1,at||0)))}}wx(t[Qg],E),t[nx]=xx}d&&d.available&&(m=x[wg],g=x[Ig],r=d,"hidden"===m&&(p&&p.available&&!T||(t[$g]=Po.genOverflow(r,f),T=!0),r=t[$g]||r),g&&g.length&&(h&&h.available&&!T||(t[Zg]=Po.genFilter(r,g),T=!0),r=t[Zg]||r),!_||y&&y.available&&!T||(t[qg]=Po.genMask(r,f,function(c,u,_){for(var f,d,y,p={},t={},g=u.dx,x=u.dy,m=u.dbx,v=u.dby,E=u.x,b=u.y,e=u.ctx,c=c.__config[_x],T=c[dx],A=c[yx],M=[],R=[],S=1,O=c[gx],r=T,C=T+(A||0)+1;r<C;r++){var I=G[r],i=I[fx],w=I[gx],n=I[yx],I=I[px];if(i instanceof Hs)i.render(Y,bx,e,xg,g,x),t.hasOwnProperty(r)&&(e=Rg(e,t[r],W,U));else{var a=i.__config,k=a[nx],o=a[jg],s=a[Zg],D=a[qg],l=a[$g],h=a[ex];if(p.hasOwnProperty(r)){for(var L=Bt(p[r],3),F=L[0],N=L[1],L=L[2],P=Mt.getCacheCanvas(W,U,null,"mask2"),B=(L.mask=P,L.isClip=i.isClip,r+(n||0)+1);--N;)B+=(G[B][yx]||0)+1;var H=t[--B]=t[B]||[];H.push([F,w,Tg,L]),H.push([B,w,Mg,{ctx:e,target:P}]),e=P.ctx}r===T||(O<w?(Rx(f=d)&&(f=null),M.push(f),S=y,R.push(S)):w<O&&(M.splice(-(F=O-w)),f=M[w-1],R.splice(-F),S=R[w-1]));var O=w,L=h[Sg],H=h[Lg],P=h[Fg],D=vg([D,s,l,o]);D?(r+=(n||0)+Lx(G,r+(n||0)+1,I||0),"none"!==L&&(s=h[kg],Ix(s)?e.globalCompositeOperation=Cx(s):e.globalCompositeOperation="source-over",e.globalAlpha=a[tx],Po.drawCache(D,u,H,Ht.identity(),P.slice(0),f,_),e.globalCompositeOperation="source-over")):(l=a[rx],o=a[ax],D=s=void 0,k<bx?(Tx(k,mx)?(s=i.__calMatrix(k,o,l,h,a),wx(a[Jg],s)):s=a[Jg],Tx(k,vx)&&(h[Og]=l[Og]),D=h[Og],Tx(k,Ex)&&(i.__bbox=null,i.__filterBbox=null,i.__calFilter(l,h)),s=a[Jg],Tx(k,Ax)&&(h[kg]=l[kg])):(i.__bbox=null,i.__filterBbox=null,r===T&&i.__calFilter(l,h),s=i.__calMatrix(k,o,l,h,a),wx(a[Jg],s),D=h[Og]=l[Og]),r===T?(D=1,s=Ht.identity()):f&&(s=Ox(f,s)),wx(a[Qg],s),o=void(y=a[tx]=S*D),r===T||Rx(f)&&Rx(H)?o=null:((P=P.slice(0))[0]+=m+i.__sx1-sx1+E,P[1]+=v+i.__sy1-sy1+b,o=$a.calMatrixByOrigin(H,P),Rx(f)||(o=Ox(f,o))),(o=(d=o)&&(At.equalArr(o,_)?Ht.identity():(_=Ht.inverse(_),Ht.multiply(_,o))))?e.setTransform(o[0],o[1],o[4],o[5],o[12],o[13]):e.setTransform(1,0,0,1,0,0),bx<=k&&i.__calCache(Y,e,a[lx],a[ax],a[rx],h,i.clientWidth,i.clientHeight,i.offsetWidth,i.offsetHeight,h[Wg],h[Ug],h[Xg],h[zg],h[Gg],h[Hg],h[Yg],h[Bg],i.__sx1,i.__sx2,i.__sx3,i.__sx4,i.__sx5,i.__sx6,i.__sy1,i.__sy2,i.__sy3,i.__sy4,i.__sy5,i.__sy6),s=(l=i.render(Y,k,e,xg,g,x)||{}).offscreenBlend,D=l.offscreenMask,o=l.offscreenFilter,a=l.offscreenOverflow,s&&((t[h=r+(n||0)+Lx(G,r+(n||0)+1,I||0)]=t[h]||[]).push([r,w,Ag,s]),e=s.target.ctx),D&&(p[r+(n||0)+1]=[r,I,D],e=D.target.ctx),o&&((t[i=r+(n||0)+Lx(G,r+(n||0)+1,I||0)]=t[i]||[]).push([r,w,bg,o]),e=o.target.ctx),a&&((t[k=r+(n||0)+Lx(G,r+(n||0)+1,I||0)]=t[k]||[]).push([r,w,Eg,a]),e=a.target.ctx),t.hasOwnProperty(r)&&(e=Rg(e,t[r],W,U)),"none"===L&&(r+=(n||0)+Lx(G,r+(n||0)+1,I||0)))}}})))}));for(var m={},i={},n=0,v=vt.length;n<v;n++){var a=vt[n],E=a[fx],b=a[gx],o=a[yx],a=a[px];if(E instanceof Hs)E.render(Et,bx,t,pg,0,0),i.hasOwnProperty(n)&&(t=Rg(t,i[n],bt,Tt));else{var s=E.__config,T=s[jg],l=s[Zg],A=s[qg],M=s[$g],R=s[nx],S=s[ex],O=S[Sg],C=S[kg],S=S[Og];if(m.hasOwnProperty(n)){for(var I=Bt(m[n],3),w=I[0],k=I[1],I=I[2],D=Mt.getCacheCanvas(bt,Tt,null,"mask2"),L=(I.mask=D,I.isClip=E.isClip,n+(o||0)+1);--k;)L+=(vt[L][yx]||0)+1;var F=i[--L]=i[L]||[];F.push([w,b,Tg,I]),F.push([L,b,Mg,{ctx:t,target:D}]),t=D.ctx}w=vg([A,l,M,T]);if(w){I=n;n+=(o||0)+Lx(vt,n+(o||0)+1,a||0),"none"!==O&&(Ix(C)?t.globalCompositeOperation=Cx(C):t.globalCompositeOperation="source-over",F=s[Jg],A=(D=s[Qg]).slice(0),(l=s[lx].matrixEvent)&&!Rx(l)&&(F=Ox(l,F)),At.assignMatrix(D,F),Po.draw(t,S,D,w),t.globalCompositeOperation="source-over",i.hasOwnProperty(n)&&(t=Rg(t,i[n],bt,Tt)),(M=!(M=T.isNew)&&!At.equalArr(A,D)||M)&&function c(t,u,_,f,d){for(var e,y=[],p=d,g=f,r=u+1,x=u+(_||0)+1;r<x;r++){var i,m,n,v,E,a,o=(h=t[r])[fx],s=h[gx],l=h[yx],h=h[px];o instanceof Hs||(m=(i=o.__config)[Qg],n=i[jg],v=i[rx],E=i[ex],a=i[ax],"none"!==E[Sg]?(g<s?(Rx(e=p)&&(e=null),y.push(e)):s<g&&(y.splice(-(g-s)),e=y[s-1]),g=s,m=m.slice(0),a[Vg]=null,o=o.__calMatrix(bx,a,v,E,i),wx(i[Jg],o),Rx(e)||(o=Ox(e,o)),wx(i[Qg],o),p=o,n&&n.available&&((a=!(a=n.isNew)&&!At.equalArr(m,o)||a)&&c(t,r,l||0,s,o),n.__isNew=!1,r+=(l||0)+Lx(t,r+(l||0)+1,h||0))):r+=(l||0)+Lx(t,r+(l||0)+1,h||0))}}(vt,I,o||0,b,D),T.__isNew=!1)}else{C=E.render(Et,R,t,pg,0,0)||{},s=C.offscreenBlend,l=C.offscreenMask,S=C.offscreenFilter,A=C.offscreenOverflow;if(s&&((i[M=n+(o||0)+Lx(vt,n+(o||0)+1,a||0)]=i[M]||[]).push([n,b,Ag,s]),t=s.target.ctx),l&&(m[n+(o||0)+1]=[n,a,l],t=l.target.ctx),S&&((i[T=n+(o||0)+Lx(vt,n+(o||0)+1,a||0)]=i[T]||[]).push([n,b,bg,S]),t=S.target.ctx),A&&((i[E=n+(o||0)+Lx(vt,n+(o||0)+1,a||0)]=i[E]||[]).push([n,b,Eg,A]),t=A.target.ctx),i.hasOwnProperty(n)&&(t=Rg(t,i[n],bt,Tt)),"none"===O){for(var N=(o||0)+Lx(vt,n+(o||0)+1,a||0),P=n+1;P<=n+N;P++)i.hasOwnProperty(P)&&(t=Rg(t,i[P],bt,Tt));n+=N}}}}},renderSvg:function(c,u,_,f){var d=_.__structs,y=_.width,p=_.height,g={};if(!f)for(var x=0,m=d.length;x<m;x++){var v=d[x],E=v[fx],b=v[yx],v=v[px],E=E.__config,T=E[nx],E=E[ox];v&&(bx<=T||Tx(T,mx|vx))&&(g[x+(b||0)+1+v-1]=T),T<bx&&(g.hasOwnProperty(x)?(b=g[x],!Tx(T,mx)&&b<bx&&!Tx(b,mx)&&E.forEach(function(t){u.addCache(t)})):E.forEach(function(t){u.addCache(t)}))}for(var A,M,R,S={},O=[],C=[],I=0,t=0,w=d.length;t<w;t++){var k,D,L,e=d[t],r=e[fx],F=e[yx],N=e[px],e=e[gx],i=r.__config,n=i[jg],a=i[nx],P=i[ox],B=i[ex],H=B[Sg],o=(N&&"none"!==H&&(S[(k=(D=t+(F||0)+1)+N)-1]={index:t,start:D,end:k,isClip:d[D][fx].isClip}),e<I?(O.splice(-(k=I-e)),A=O[e-1],C.splice(-k),M=C[e-1]):I<e&&(O.push(R[Jg]),D=R[cx],C.push(D),M=D),R=i,void 0);if(a<bx&&!(r instanceof Hs)?(i[nx]=xx,o=i[cx],n&&n.available?(t+=F||0,o.cache=!0):(n&&(n.available=!0),o=i[cx]=r.__virtualDom=At.extend({},o),r instanceof Oy&&!(r instanceof y1)&&(o.children=[]),"none"===H?(t+=F||0,N&&(t+=N)):delete o.cache),n=i[rx],s=i[ex],l=i[ax],Tx(a,mx)&&(l=r.__calMatrix(a,l,n,s,i),L=i[Jg],wx(L,l),!l||Rx(l)?delete o.transform:o.transform="matrix("+At.joinArr(Ht.m2m6(l),",")+")",A&&l&&(l=Ox(A,l)),L=i[Qg],wx(L,l)),Tx(a,vx)&&(1===(L=s[Og]=n[Og])?delete o.opacity:o.opacity=L),Tx(a,Ex)&&(l=r.__calFilter(n,s),(l=ne.svgFilter(l))?o.filter=l:delete o.filter),Tx(a,Ax)&&(l=s[kg]=n[kg],Ix(l)?o.mixBlendMode=Cx(l):delete o.mixBlendMode),o.lv=a):(i[ox]&&i[ox].splice(0),r.render(c,a,u,pg,0,0),o=i[cx],"none"===(H=B[Sg])&&(t+=F||0,N&&(t+=N))),S.hasOwnProperty(t)&&(g.hasOwnProperty(t)||bx<=a||Tx(a,mx|vx))){var s=S[t],n=s.index,l=s.start,G=s.end,Y=s.isClip,W=d[n][fx],U=[];Y&&U.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(y,",0L").concat(y,",").concat(p,"L0,").concat(p,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var X=l;X<G;X++){var z=d[X][fx],V=z.computedStyle,K=V[Sg],j=V[Cg],$=V[Dg],V=z.virtualDom,q=V.children,Z=V.opacity;if("none"!==K&&"hidden"!==j)for(var q=At.clone(q),U=U.concat(q),J=0,Q=q.length;J<Q;J++){var tt=q[J],et=tt.tagName,h=tt.props;if("path"===et){if(Y)for(var rt=0,it=h.length;rt<it;rt++){var nt=h[rt];"fill"===nt[0]&&(nt[1]=At.int2invert($[0]))}var tt=z.matrix,at=Sx(W.matrix),tt=Ox(at,tt);h.push(["transform","matrix(".concat(At.joinArr(Ht.m2m6(tt),","),")")]),At.isNil(Z)||1===Z||h.push(["opacity",Z])}else if("image"===et){for(var ot=-1,st=0,lt=h.length;st<lt;st++)if("transform"===h[st][0]){ot=st;break}-1===ot?(at=Sx(W.matrix),Rx(at)||h.push(["transform","matrix(".concat(At.joinArr(Ht.m2m6(at),","),")")])):(tt=h[ot][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),et=Sx(W.matrix),tt=Ox(et,tt),h[ot][1]="matrix(".concat(At.joinArr(Ht.m2m6(tt),","),")"))}}}for(var ht=P.length-1;0<=ht;ht--)"mask"===P[ht].tagName&&P.splice(ht,1);B={tagName:"mask",props:[],children:U},H=u.add(B);P.push(B),W.virtualDom.mask="url(#"+H+")"}M&&!r.isMask&&M.children.push(o),0===t&&(A=i[Jg],M=o),I=e}},renderWebgl:function(o,x,s){for(var l,h,c,u,_,b=s.__structs,m=s.width,v=s.height,E=s.texCache,t=.5*m,e=.5*v,f=[],d=[],y=1,p=[],g=0,T=[],A=0,M=b.length;A<M;A++){var r,R,S,O,C,I,w,k,D,L,F,i,N=b[A],n=N[fx],P=N[gx],B=N[yx],N=N[px];n instanceof Hs?bx<=c&&n.render(o,bx,x,mg,0,0):(w=(r=n.__config)[nx],R=(0===A||(g<P?(l=u[Qg],Rx(l)&&(l=null),f.push(l),y=u[tx],d.push(y),h=u[hx],Rx(h)&&(h=null),p.push(h)):P<g&&(f.splice(-(R=g-P)),l=f[P-1],d.splice(-R),y=d[P-1],p.splice(-R),h=p[P-1])),c=w,g=P,(u=r)[jg]),"none"!==(i=r[ex])[Sg]?(w<bx?(r[nx]=xx,I=r[rx],C=r[ax],S=r[Qg],O=void(Tx(w,Mx)&&n.__calPerspective(C,I,i,r)),Tx(w,mx)?(O=n.__calMatrix(w,C,I,i,r),wx(r[Jg],O)):O=r[Jg],h&&(O=Ox(h,O)),l&&(O=Ox(l,O)),C=void wx(S,O),C=Tx(w,vx)?i[Og]=I[Og]:i[Og],r[tx]=y*C,Tx(w,Ex)&&(n.__bbox=null,n.__filterBbox=null,n.__calFilter(I,i)),Tx(w,Ax)&&(i[kg]=I[kg]),R&&R.available&&(A+=B||0)):(S=n.render(o,w,x,mg,0,0))&&Mt.isWebGLTexture(S.texture)&&(O=n.__sx1,C=n.__sy1,I=n.offsetWidth,w=n.offsetHeight,k=n.bbox,r[Kg]=new Zp(x,S.texture,O,C,I,w,k),x.viewport(0,0,m,v),x.useProgram(x.program)),w=r[ix],k=r[ux],D=i[wg],L=i[Ig],F=i[kg],i=i[Lg],F=Ix(F),i=$a.isPerspectiveMatrix(i)||h,(k||N||L.length||"hidden"===D&&B||F||i)&&(F&&(_=!0),T.push([A,P,B,n,r,w,N,L,D,i,k]))):A+=B||0)}var H,G,Y,W,U={};T.length&&(T.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),H={},T.forEach(function(t){var t=Bt(t,11),e=t[0],c=t[1],r=t[2],i=t[3],n=t[4],a=t[5],u=t[6],o=t[7],_=t[8],s=t[9],t=t[10];if(s){for(var f=n[lx];f;){var l=f.__config,d=l[_x][dx];if(H[d])break;($a.isPerspectiveMatrix(l[Jg])||l[hx])&&(H[d]=!0),f=l[lx]}if(!(H[e]||u||o.length||"hidden"===_||t))return}var h,s=n[Kg],t=n[jg],y=n[Zg],p=n[qg],g=n[$g],s=(t&&t.available||(s=(r=Bt(Nx(x,E,i,0,e,r||0,b,s,a,0,m,v),2))[0],t=r=r[1],h=!0,(a=s)||(n[jg]=r)),t);"hidden"===_&&(g&&g.available&&!h?s=g:(r=function(t,e,r,i,c,u){var n,a=i.bbox,o=r.__sx1,s=r.__sy1,l=r.clientWidth,r=r.clientHeight,h=o+l,_=s+r;if(!(a[0]>=o&&a[1]>=s&&a[2]<=h&&_))return o=[o,s,h,_],s=Bt(Fx(t,e,l,r),3),h=s[0],_=s[1],s=s[2],-1===(n=e.findExistTexChannel(i.page))?(n=e.lockOneChannel(),ft.bindTexture(t,i.page.texture,n)):e.lockChannel(n),t.useProgram(t.programOverflow),ft.drawOverflow(t,n,o[0]-a[0],o[1]-a[1],l,r,i.width,i.height),e.releaseLockChannel(n),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(_),a=new Zp(t,s,i.sx1,i.sy1,l,r,o),e.releaseLockChannel(h,a.page),a}(x,E,i,s,m,v))&&(s=r,h=!0,a||(n[$g]=s))),o.length&&(y&&y.available&&!h?s=y:(s=Px(x,E,0,t=s,o,m,v))!==t&&(h=!0,a||(n[Zg]=s))),!u||p&&p.available&&!h||(s=function(t,e,r,i,n,c,u,_,f){var d=n.sx1,y=n.sy1,p=n.width,g=n.height,x=n.bbox,m=n.dx,v=n.dy,E=.5*p,b=.5*g,T=(i=i[ex])[Lg],i=i[Fg],A=Rx(T)?Ht.identity():((q=i.slice(0))[0]+=d+m,q[1]+=y+v,$a.calMatrixByOrigin(T,q));A=Ht.inverse(A);for(var T=(i=Bt(Fx(t,e,p,g),3))[0],M=i[1],i=i[2],a=r.next,R=a.isClip,S=[];a&&a.isMask&&a.isClip===R;)S.push(a),a=a.next;for(var O=0,C=S.length;O<C;O++)for(var I=[],w=void 0,k=void 0,D=[],L=1,F=void 0,N=_,P=S[O].__config[_x],B=P[dx],o=B,H=B+(P[yx]||0)+1;o<H;o++){var G=f[o],Y=G[fx],s=G[gx],W=G[yx],G=G[px],l=Y.__config,U=l[Kg],X=l[ex],z=l[ix];if("none"!==X[Sg])if(Y instanceof Hs){if(U&&U.available)e.addTexAndDrawWhenLimit(t,U,L,e.last[2],E,b,0,0,!0);else if(z)return}else{var X=l[Kg],Y=l[qg],U=l[Zg],V=l[$g],K=l[jg],l=l[ex],j=l[Og],$=l[Lg],l=l[Fg],h=(o===B||(N<s?(Rx(w=k)&&(w=null),I.push(w),L=F,D.push(L)):s<N&&(I.splice(-(h=N-s)),w=I[s-1],D.splice(-h),L=D[s-1])),N=s,vg([Y,U,V,K,X]));if(h){var q,s=void 0,s=Rx($)?Ht.identity():((Y=l.slice(0))[0]+=h.bbox[0]+m,Y[1]+=h.bbox[1]+v,$a.calMatrixByOrigin($,Y));s=Ht.multiply(A,s),(q=l.slice(0))[0]+=h.bbox[0]+m,q[1]+=h.bbox[1]+v,k=$a.calMatrixByOrigin($,q),Rx(w)||(k=Ox(w,k)),e.addTexAndDrawWhenLimit(t,h,F=L*j,s,E,b,m,v,!0),h!==X&&(o+=(W||0)+Lx(f,o+(W||0)+1,G||0))}else if(z)return}else o+=(W||0)+Lx(f,o+(W||0)+1,G||0)}e.refresh(t,E,b),t.deleteFramebuffer(M),-1===(r=e.findExistTexChannel(n.page))?(r=e.lockOneChannel(),ft.bindTexture(t,n.page.texture,r)):e.lockChannel(r);var n=(M=Bt(Fx(t,e,p,g),3))[0],Z=M[1],M=M[2],J=R?t.programClip:t.programMask,J=(t.useProgram(J),ft.drawMask(t,T,r,J),t.deleteTexture(i),e.releaseLockChannel(T),e.releaseLockChannel(r),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(Z),new Zp(t,M,d,y,p,g,x));return e.releaseLockChannel(n,J.page),J}(x,E,i,n,s,m,v,c,b),a||(n[qg]=s)),a&&(U[e]=s)})),_&&(G=(s=Bt(Fx(x,E,m,v),3))[0],Y=s[1],W=s[2]);for(var X,z,V,K,j,$=0,q=b.length;$<q;$++){var Z,J,Q,tt,et,rt,it,nt,at,ot,st,lt,ht,ct=b[$],ut=ct[fx],_t=ct[yx],ct=ct[px],a=ut.__config;ut instanceof Hs?(Q=a[Kg],et=a[ix],J=(Z=a[lx].__config)[Qg],Z=Z[tx],Q&&Q.available?E.addTexAndDrawWhenLimit(x,Q,Z,J,t,e,0,0,!0):et&&(Q=Mt.getCacheCanvas(m,v,"__$$OVERSIZE$$__"),ut.render(o,0,x,pg,0,0),et=E.lockOneChannel(),tt=ft.createTexture(x,Q.canvas,et),tt=new Zp(x,tt,0,0,m,v,[0,0,m,v]),E.addTexAndDrawWhenLimit(x,tt,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),Q.ctx.setTransform(1,0,0,1,0,0),Q.ctx.globalAlpha=1,Q.ctx.clearRect(0,0,m,v),tt.release(),E.releaseLockChannel(et))):(Z=a[tx],J=a[Qg],Q=a[ix],tt=a[Kg],et=a[jg],st=a[Zg],lt=a[qg],at=a[$g],rt=a[nx],it=(a=a[ex])[Sg],nt=a[Cg],a=a[kg],"none"!==it?((lt=vg([lt,st,at,et,tt]))?(_&&Ix(a)?(E.refresh(x,t,e,!0),at=(st=Bt(Fx(x,E,m,v),3))[0],ot=st[1],st=st[2],E.addTexAndDrawWhenLimit(x,lt,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),G=(at=Bt(Gx(x,E,G,at,Y,W,Cx(a),m,v),3))[0],Y=at[1],W=at[2],x.deleteFramebuffer(ot),x.deleteTexture(st)):E.addTexAndDrawWhenLimit(x,lt,Z,J,t,e,0,0,!0),lt!==tt&&($+=(_t||0)+Lx(b,$+(_t||0)+1,ct||0))):U.hasOwnProperty($)?(at=U[$],_&&Ix(a)?(E.refresh(x,t,e,!0),st=(ot=Bt(Fx(x,E,m,v),3))[0],lt=ot[1],ht=ot[2],E.addTexAndDrawWhenLimit(x,at,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),G=(st=Bt(Gx(x,E,G,st,Y,W,Cx(a),m,v),3))[0],Y=st[1],W=st[2],x.deleteFramebuffer(lt),x.deleteTexture(ht)):E.addTexAndDrawWhenLimit(x,at,Z,J,t,e,0,0,!0),$+=(_t||0)+Lx(b,$+(_t||0)+1,ct||0)):Q&&"none"!==it&&"hidden"!==nt&&(a=Mt.getCacheCanvas(m,v,"__$$OVERSIZE$$__"),ut.render(o,rt,x,pg,0,0),st=E.lockOneChannel(),lt=ft.createTexture(x,a.canvas,st),ht=new Zp(x,lt,0,0,m,v,[0,0,m,v]),E.addTexAndDrawWhenLimit(x,ht,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.globalAlpha=1,a.ctx.clearRect(0,0,m,v),ht.release(),E.releaseLockChannel(st)),ut.hookGlRender&&ut.hookGlRender(x,Z,J,t,e,0,0,!0)):$+=(_t||0)+Lx(b,$+(_t||0)+1,ct||0))}E.refresh(x,t,e,!0),_&&(x.bindFramebuffer(x.FRAMEBUFFER,null),E.releaseLockChannel(G),x.deleteFramebuffer(Y),s=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,s),x.bufferData(x.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),x.STATIC_DRAW),X=x.getAttribLocation(x.program,"a_position"),x.vertexAttribPointer(X,2,x.FLOAT,!1,0,0),x.enableVertexAttribArray(X),z=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,z),x.bufferData(x.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),x.STATIC_DRAW),V=x.getAttribLocation(x.program,"a_texCoords"),x.vertexAttribPointer(V,2,x.FLOAT,!1,0,0),x.enableVertexAttribArray(V),K=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,K),x.bufferData(x.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),x.STATIC_DRAW),j=x.getAttribLocation(x.program,"a_opacity"),x.vertexAttribPointer(j,1,x.FLOAT,!1,0,0),x.enableVertexAttribArray(j),j=x.getUniformLocation(x.program,"u_texture"),x.uniform1i(j,G),x.drawArrays(x.TRIANGLES,0,6),x.deleteBuffer(s),x.deleteBuffer(z),x.deleteBuffer(K),x.disableVertexAttribArray(X),x.disableVertexAttribArray(V),x.deleteTexture(W))}},Wx="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Ux=function(){function e(t){_(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return f(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,n,a){var o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,h=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,c=8<arguments.length?arguments[8]:void 0,s=this.__pages,u=this.__list,l=e.page;-1<s.indexOf(l)||(s.length>=this.__units-this.__lockUnits&&this.refresh(t,n,a,c),s.push(l)),u.push([e,r,i,o,h])}},{key:"refresh",value:function(t,c,u,_){var f=this.__pages,d=this.__list;if(f.length){var e=this.channels,y=this.locks,p={},g=(e.forEach(function(t,e){t&&(t=t.uuid,p[t]=e)}),this.__units),r=new Array(g),i=[];if(f.forEach(function(t){var e=t.uuid;p.hasOwnProperty(e)?(e=p[e],r[e]=t):i.push(t)}),i.length){for(var n=0;n<g&&(r[n]||e[n]||y[n]||(r[n]=i.shift(),i.length));n++);var x=i.length;if(x){for(var m=[],a=0;a<g;a++)r[a]||y[a]||m.push([a,e[a]]);m.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var o=0;o<x;o++)r[m[o][0]]=i[o]}}for(var v={},s=0,E=r.length;s<E;s++){var l,h=r[s];h&&((l=e[s])&&l===h&&!h.update||(h instanceof qp?ft.bindTexture(t,h.texture,s):(!l||l instanceof qp||t.deleteTexture(l.texture),h.texture=ft.createTexture(t,h.canvas,s)),e[s]=h),v[h.uuid]=s,h.update=!1,h.time=Mt.now())}ft.drawTextureCache(t,d,v,c,u,_),f.splice(0),d.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i,n=this.__units,a=[],o=0;o<n;o++)e[o]||a.push([o,t[o]]);if(a.length)return a.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]}),t[i=a[0][0]]=null,e[i]=!0,this.__lockUnits++,i;throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),e}(),di=T.STYLE_KEY,Xx=di.TOP,yi=di.RIGHT,zx=di.BOTTOM,pi=di.LEFT,Vx=di.POSITION,Kx=di.DISPLAY,jx=di.VISIBILITY,$x=di.COLOR,qx=di.WIDTH,Zx=di.HEIGHT,Jx=di.Z_INDEX,Qx=di.MARGIN_TOP,tm=di.MARGIN_LEFT,em=di.MARGIN_BOTTOM,rm=di.PADDING_TOP,im=di.PADDING_LEFT,nm=di.PADDING_BOTTOM,am=di.BORDER_TOP_WIDTH,om=di.BORDER_LEFT_WIDTH,sm=di.BORDER_BOTTOM_WIDTH,lm=di.POINTER_EVENTS,hm=di.WRITING_MODE,cm=di.TEXT_STROKE_COLOR,um=di.TEXT_STROKE_WIDTH,_m=di.TEXT_STROKE_OVER,A=T.UPDATE_KEY,fm=A.UPDATE_NODE,dm=A.UPDATE_STYLE,ym=A.UPDATE_KEYS,pm=A.UPDATE_COMPONENT,gm=A.UPDATE_FOCUS,xm=A.UPDATE_OVERWRITE,mm=A.UPDATE_LIST,vm=A.UPDATE_CONFIG,Em=A.UPDATE_ADD_DOM,bm=A.UPDATE_REMOVE_DOM,n=T.NODE_KEY,Tm=n.NODE_TAG_NAME,Am=n.NODE_CACHE_STYLE,Mm=n.NODE_CACHE_PROPS,Rm=n.NODE_CURRENT_STYLE,Sm=n.NODE_COMPUTED_STYLE,Om=n.NODE_CURRENT_PROPS,Cm=n.NODE_DOM_PARENT,Im=n.NODE_IS_MASK,wm=n.NODE_REFRESH_LV,km=n.NODE_IS_DESTROYED,Dm=n.NODE_STYLE,Lm=n.NODE_UPDATE_HASH,Fm=n.NODE_UNIQUE_UPDATE_ID,Nm=n.NODE_CACHE,Pm=n.NODE_CACHE_TOTAL,Bm=n.NODE_CACHE_FILTER,Hm=n.NODE_CACHE_OVERFLOW,Gm=n.NODE_CACHE_MASK,Ym=n.NODE_STRUCT,xi=T.STRUCT_KEY,Wm=xi.STRUCT_INDEX,Um=xi.STRUCT_TOTAL,Xm=xi.STRUCT_NODE,zm=(a(bi={},Xx,!0),a(bi,yi,!0),a(bi,zx,!0),a(bi,pi,!0),bi),Vm=At.isNil,Km=At.isObject,jm=At.isFunction,$m=r.AUTO,qm=r.PX,Zm=r.PERCENT,Jm=r.INHERIT,Qm=mn.isRelativeOrAbsolute,tv=mn.equalStyle,ev=Ko.contain,rv=Ko.getLevel,iv=Ko.isRepaint,nv=Ko.NONE,av=Ko.FILTER,ov=Ko.PERSPECTIVE,sv=Ko.REPAINT,lv=Ko.REFLOW,hv=Ko.REBUILD,cv=Tr.isIgnore,uv=Tr.isGeom,_v={canvas:"canvas",svg:"svg",webgl:"canvas"};var fv=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function dv(t,e){return t.currentStyle[e][1]!==$m}function yv(t,e){var r=dv(t,qx)&&dv(t,Zx);if(r&&e){e=t.domParent;if(e&&("flex"===e.currentStyle[Kx]||"flex"===e.computedStyle[Kx]))return}return r}function pv(t){return t.hasOwnProperty("__uniqueReflowId")}var gv=0;function xv(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=gv,e[gv++]={node:t,component:r,addDom:i})}var mv=0;function vv(c,u,t,_,f,d,y,p){var e=t[fm],i=t[dm],g=t[xm],x=t[gm],r=t[pm],n=t[mm],a=t[ym],o=t[vm],m=t[Em],t=t[bm];if(!o[km]){g&&Object.assign(o[Dm],g),n&&!r&&(a=(a||[]).slice(0),v={},a.forEach(function(t){v[t]=!0}),n.forEach(function(t){var e=t[dm],r=t[xm];(t[ym]||[]).forEach(function(t){v.hasOwnProperty(t)||(v[t]=!0,a.push(t))}),r&&Object.assign(o[Dm],r),e&&(i?Object.assign(i,e):i=e)}));var v,E,b,T,A,M,R,S,O=o[Tm],C=o[Am],I=o[Mm],w=o[Rm],g=o[Sm],k=o[Om],n=o[Cm],D=o[Im],s=x||nv;if(!r&&i&&a)for(var L=0,F=a.length;L<F;L++){var l=a[L],N=i[l];if(e instanceof ip&&uv(O,l))tv(l,N,k[l],e)||(s|=sv,I[l]=void 0,k[l]=N);else if(!tv(l,N,w[l],e))if(cv(l))C[l]=void 0,w[l]=N;else{if(zm.hasOwnProperty(l)){var P=w[Vx];if("relative"!==P&&"absolute"!==P){delete i[l];continue}}else l===Kx&&(A=!0);s|=rv(l),C[l]=void 0,w[l]=N,l===Jx&&e!==u?E=!0:l===jx?b=!0:l===$x?T=!0:l===cm?M=!0:l===um?R=!0:l===_m&&(S=!0)}}if(s!==nv||r){if("none"!==g[Kx]||A){if(E&&n&&delete n.__zIndexChildren,b||T||M||R||S)for(var B=u.__structs,x=e.__config[Ym],H=x[Wm]+1,G=H+x[Um];H<G;H++){var Y,W,U,X=B[H],z=X[Xm],X=X[Um];z instanceof Hs||(W=(Y=z.__config)[Rm],U=void 0,(U=b&&W[jx][1]===Jm||T&&W[$x][1]===Jm||M&&W[cm][1]===Jm||R&&W[um][1]===Jm||S&&W[_m][1]===Jm?!0:U)?(Y[wm]|=sv,z.clearCache()):H+=X||0)}if(D){for(var V=e.prev;V&&V.isMask;)V=V.prev;V&&V.__config[Gm]&&V.__config[Gm].release()}var K=n;if(A&&K){x=K.__config;if("none"===x[Rm][Kx]||"none"===x[Sm][Kx])return void(g[Kx]="none")}!r&&iv(s)?(E&&c===et.SVG&&(s|=sv,n&&Ev(n)),E&&!r&&y&&n&&!n.hasOwnProperty("__uniqueZId")&&(y[mv]=!0,n.__uniqueZId=mv++,p.push(n))):_.push({node:e,style:i,component:r,addDom:m,removeDom:t}),o[wm]|=s,u.__rlv=r||m||t?hv:Math.max(u.__rlv,s);D=sv<=s||c===et.SVG&&e instanceof ip;for(D&&o[Nm]&&o[Nm].release(),(D||ev(s,ov))&&(o[Pm]&&o[Pm].release(),o[Gm]&&o[Gm].release(),o[Hm]&&o[Hm].release()),(D||ev(s,av))&&o[Bm]&&o[Bm].release();K;){var h=K.__config;if(h.hasOwnProperty(Fm)){var j=h[Fm];if(f.hasOwnProperty(j))break;f[j]=!0}else f[mv]=!0,h[Fm]=mv++,d.push(h);j=h[wm];sv<=j&&h[Nm]&&h[Nm].release(),h[Pm]&&h[Pm].release(),h[Bm]&&h[Bm].release(),h[Gm]&&h[Gm].release(),h[Hm]&&h[Hm].release(),K=h[Cm]}return!0}}else delete o[Fm]}}function Ev(t,e){var r=t.__config;e?r[wm]|=sv:r[Pm].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof dl?t.shadowRoot:t)instanceof Hs||Ev(t,!0)})}var bv=0,Tv=function(){d(n,Oy);var i=y(n);function n(t,e,r){return _(this,n),(t=i.call(this,t,e)).__cd=r||[],t.__dom=null,t.__mw=0,t.__mh=0,t.__taskUp=[],t.__taskCp=[],t.__ref={},t.__reflowList=[{node:l(t)}],t.__animateController=new jp,ll.mix(l(t)),t.__config[Lm]=t.__updateHash={},t.__uuid=bv++,t.__rlv=hv,t}return f(n,[{key:"__initProps",value:function(){var t=this.props.width,t=(Vm(t)||0<(t=parseFloat(t)||0)&&(this.__width=t),this.props.height);Vm(t)||0<(t=parseFloat(t)||0)&&(this.__height=t)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?At.joinSourceArray(e):At.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+At.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,n,a,o,s,l,h;return-1===["touchend","touchcancel"].indexOf(t.type)&&(o=this.dom,e=this.__scx,r=this.__scy,s=(o=o.getBoundingClientRect()).x,i=o.y,l=o.left,n=o.top,a=o.width,o=o.height,s=(h=t.touches?t.touches[0]:t).clientX-(s=s||l||0),l=h.clientY-(l=i||n||0),Vm(e)?s*=this.width/a:s/=e,Vm(r)?l*=this.height/o:l/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:l,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget)return t=this.__wrapEvent(t),this.__emitEvent(t),t}},{key:"appendTo",value:function(t){t=function(t){if(At.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=ol.initRoot(this.__cd,this),this.__initProps();var a,o,e,r=(this.__root=this).tagName,r=_v[r],r=("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===r?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(r),this.__dom||(t.innerHTML=this.__genHtml(r),this.__dom=t.querySelector(r))),this.__defs=this.dom.__defs||p1.getInstance(this.__uuid),this.width&&this.height||(r=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(r.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(r.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),this.width&&this.height||Mt.warn("Karas render target with a width or height of 0."),Object.assign({},J,this.props.contextAttributes));"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d",r),this.__renderMode=et.CANVAS):"svg"===this.tagName?this.__renderMode=et.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",r),this.__renderMode=et.WEBGL,t.program=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=ft.initShaders(t,Wx,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=ft.initShaders(t,Wx,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=ft.initShaders(t,Wx,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.programDs=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_color[4];void main(){vec4 c=texture2D(u_texture,v_texCoords);gl_FragColor=vec4(u_color[0]*c.a,u_color[1]*c.a,u_color[2]*c.a,u_color[3]*c.a);}"),t.useProgram(t.program),r=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new Ux(r)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof n&&this.dom.__root.destroy(),this.__eventCbList=(a=this.dom,o=n,e=[],fv.forEach(function(n){function t(t){var e=a.__root;if(e&&e instanceof o)if(-1<["touchend","touchcancel","touchmove"].indexOf(n)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}a.addEventListener(n,t),e.push([n,t])}),e),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,n=this.ctx,a=this.defs,o=this.width,s=this.height;if(!r){if(a.clear(),e)this.__checkRoot(i,o,s);else if(!this.__checkUpdate(i,n,o,s))return;this.__checkReflow(o,s),i!==et.CANVAS||this.props.noRender?i!==et.SVG||this.props.noRender?i!==et.WEBGL||this.props.noRender||(this.__clear(n,i),Yx.renderWebgl(i,n,this)):(Yx.renderSvg(i,a,this,e),(r=this.virtualDom).defs=a.value,this.dom.__vd?Lp(this.dom,this.dom.__vd,r):this.dom.innerHTML=At.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=a):(this.__clear(n,i),Yx.renderCanvas(i,n,this)),jm(t)&&t(),this.emit(ll.REFRESH,this.__rlv),this.__rlv=nv}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var e,t=this.dom,t=(t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null),this.ctx);this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t!==this.width||e!==this.height?(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r)):jm(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var i,n=this,e=this.taskUp;this.isDestroyed||(e.length||(Xl.nextFrame({__before:function(r){n.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){Km(t)&&jm(t.__before)&&t.__before(r)})},__after:function(e){n.isDestroyed||i.forEach(function(t){Km(t)&&jm(t.__after)?t.__after(e):jm(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"addForceRefreshTask",value:function(t){this.__hasRootUpdate=!0,this.addRefreshTask(t)}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,n=this,i=this.taskCp;this.isDestroyed||(i.length||(Xl.__nextFrameCp({__before:function(e){n.isDestroyed||(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),Mp.check(n),Mp.updateList.length&&Mp.updateList.forEach(function(t){var e=t.root,r=t.shadowRoot,i=(r instanceof Hs&&(r=r.domParent),{});i[fm]=r,i[dm]=r.currentStyle,i[gm]=lv,i[pm]=t,i[vm]=r.__config,n.__addUpdate(r,r.__config,e,e.__config,i)}))},__after:function(e){n.isDestroyed||(r.forEach(function(t){t.__after(e)}),Mp.did())}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t))}},{key:"getTargetAtPoint",value:function(t,e,E){return function c(t,e,r,u,_){var i=t.__sx1,n=t.__sy1,f=t.offsetWidth,d=t.offsetHeight,y=t.matrixEvent,p=t.children,a=t.zIndexChildren,o=t.computedStyle,g=o[Kx],o=o[lm];if(E||"none"!==g){if(Array.isArray(a)){for(var s=0,x=p.length;s<x;s++)p[s].__index__=s;for(var l=a.length-1;0<=l;l--)if(!((h=a[l])instanceof karas.Text)){var h,m=u.slice(),v=(m.push(h.__index__),_.slice());if(v.push(l),h=c(h,e,r,m,v))return h}}if(E||"none"!==o)return te.pointInQuadrilateral(e,r,i,n,i+f,n,i+f,n+d,i,n+d,y)?{target:t,path:u,zPath:_}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,n=this.currentStyle,a=this.computedStyle;-1===["flex","block"].indexOf(n[Kx])&&(a[Kx]=n[Kx]="block"),"absolute"===n[Vx]&&(a[Vx]=n[Vx]="static"),n[qx]=[e,qm],n[Zx]=[r,qm],a[qx]=e,a[Zx]=r,t===et.CANVAS||t===et.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===et.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,n){i=i[Lm];t===r?(i=r.__updateRoot)?(n[gm]&&(i[gm]|=n[gm]),n[dm]&&(i[mm]=i[mm]||[]).push((a(t={},dm,n[dm]),a(t,xm,n[xm]),a(t,ym,n[ym]),t))):r.__updateRoot=n:e.hasOwnProperty(Fm)?i.hasOwnProperty(e[Fm])?(t=i[e[Fm]],n[gm]&&(t[gm]|=n[gm]),n[dm]&&(t[mm]=t[mm]||[]).push((a(r={},dm,n[dm]),a(r,xm,n[xm]),a(r,ym,n[ym]),r))):Mt.error("Update process miss uniqueUpdateId"):(e[Fm]=mv,i[mv++]=n)}},{key:"__checkUpdate",value:function(t,c,u,_){for(var e=this,r=[],i={},n=[],f={},d=[],y=e.__updateRoot,a=e.__updateHash,o=e.__hasRootUpdate,s=(e.__hasRootUpdate=!1,y&&(e.__updateRoot=null,(o=vv(t,e,y,r,i,n))&&e.__checkRoot(t,u,_)),Object.keys(a)),l=0,p=s.length;l<p;l++)var g=vv(t,e,a[s[l]],r,i,n,f,d),o=o||g;e.__reflowList=r,mv=0,e.__updateHash=e.__config[Lm]={},n.forEach(function(t){delete t[Fm]}),d.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(e.__structs))});for(var h=0,x=s.length;h<x;h++)delete a[s[h]][vm][Fm];return o}},{key:"__checkReflow",value:function(i,o){var O=this,t=this.__reflowList;if(t.length){for(var s,l,J=this,h=[],Q={},c=gv=0,u=t.length;c<u;c++){var e=t[c],r=e.node,_=e.component,f=e.addDom,d=e.removeDom;if(r===this){s=!0;break}if((r=f&&r instanceof dl?r.shadowRoot:r).hasOwnProperty("__uniqueReflowId")||(r.__uniqueReflowId=gv,Q[gv++]=e),function(t,e,r,i,n){if(!n||"absolute"!==r.currentStyle[Vx]){var a=r;if(-1<["inline","inlineBlock"].indexOf(a.currentStyle[Kx])||-1<["inline","inlineBlock"].indexOf(a.computedStyle[Kx])){do{if((a=a.domParent)===t)return 1;if(pv(a))return;if("absolute"===a.currentStyle[Vx]||"absolute"===a.computedStyle[Vx])return void xv(a,e,i,n)}while(a&&(-1<["inline","inlineBlock"].indexOf(a.currentStyle[Kx])||-1<["inline","inlineBlock"].indexOf(a.computedStyle[Kx])));if(yv(a,!0))return void xv(a,e,i,n)}var o,s=a.domParent;if(!pv(s)){do{if(pv(s))return}while(("flex"!==s.computedStyle[Kx]&&"flex"!==s.currentStyle[Kx]||(o=s),"absolute"!==s.currentStyle[Vx]&&"absolute"!==s.computedStyle[Vx])&&(!yv(s,!0)&&(s=s.domParent)));if((a=o?o:a)===t)return 1;for(s=a;s;){if("absolute"===s.currentStyle[Vx]||"absolute"===s.computedStyle[Vx]){if(s===t)break;if(yv(s))break;return void xv(s,e,i,n)}s=s.domParent}if(a!==r)xv(a,e,i,n);else if(n){var l=!0,h=r.prev,c=r.next;if(!(l=h&&-1<["inline","inlineBlock"].indexOf(h.currentStyle[Kx])||c&&-1<["inline","inlineBlock"].indexOf(c.currentStyle[Kx])?!1:l)){if((a=r.domParent)===t)return 1;xv(a,e,!1,!0)}}}}}(J,Q,r,_,f)){s=!0,f&&(this.__zIndexChildren=null);break}d&&h.push(e)}if(gv=0,this.__reflowList=[],s)return od.clearUniqueReflowId(Q),l=0===this.currentStyle[hm].indexOf("vertical"),this.__layout({x:0,y:0,w:i,h:o,isUpright:l},!1,!1,!1),this.__layoutAbs(this,{x:0,y:0,w:i,h:o,isUpright:l}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId"))return t=Q[t.__uniqueReflowId],e.uniqueList.push(t),!0},{uniqueList:h});var C=[],I=0,w=[],k=0,tt=(h.forEach(function(t){var e=t.node,c=t.component,u=t.addDom,t=t.removeDom,r=e.computedStyle,i=e.currentStyle,_=r[Jx],f=r[Vx],r=r[Kx],n="absolute"===f,d="absolute"===i[Vx],r="none"===r,y="none"===i[Kx];if(!r||!y){for(var p,a=e.domParent,g=a.__layoutData,x=g.x,m=g.y,g=g.h,v=a.width,E=a.computedStyle,o=e,s=(o=o.isShadowRoot?o.hostRoot:o).prev;s;){if(s instanceof Hs||"absolute"!==s.computedStyle[Vx]&&"none"!==s.computedStyle[Kx]){m=s.y+s.outerHeight,p=!0;break}s=s.prev}t||(p||(m+=E[Qx]+E[am]+E[rm]),x+=E[tm]+E[om]+E[im]);var l=e;if(!t)if(d){for(l=l.domParent;l&&l!==J&&!Qm(l);)if(l.parent)l=l.parent;else if(l.host)break;l=l||J;if(a.__layoutAbs(l,a.__layoutData,e),u)return o=a.__modifyStruct(J,I),I+=o[1],C.push(o),a.__updateStruct(J.__structs),void(O.renderMode===et.SVG&&Ev(a));if(n)return void(c?(o=e.__modifyStruct(J,I),I+=o[1],C.push(o),(f===i[Vx]||"static"!==f&&"static"!==i[Vx])&&_===i[Jx]||(a.__updateStruct(J.__structs),O.renderMode===et.SVG&&Ev(a))):(r||y)&&(e.__zIndexChildren=null,n=e.__modifyStruct(J,I),I+=n[1],C.push(n)));a.__updateStruct(J.__structs),O.renderMode===et.SVG&&Ev(a)}else{if(e.__layout({x:x,y:m,w:v,h:g},!1,!1,!1),m+=e.outerHeight,c)l=e;else for(l=l.domParent;l&&l!==J&&!Qm(l);)if(l.parent)l=l.parent;else if(l.host)break;l=l||J,e instanceof Oy&&e.__layoutAbs(l,{x:x,y:m,w:v,h:g})}for(var b=e;b&&b!==J;)if("relative"===(E=(b=b.domParent).computedStyle)[Vx]){var T=b,A=T.ox,T=T.oy;A&&e.__offsetX(A),T&&e.__offsetY(T);break}for(var h=(e=e.isShadowRoot?e.hostRoot:e).next;h&&!h.hasOwnProperty("__uniqueReflowId");){if("absolute"!==h.computedStyle[Vx]){var M=m-h.y;if(M)for(;h&&!h.hasOwnProperty("__uniqueReflowId");){var R=h,S=(R=R instanceof dl?R.shadowRoot:R).computedStyle;"absolute"!==S[Vx]&&"none"!==S[Kx]&&R.__offsetY(M,!0,sv),h=h.next}break}h=h.next}a.hasOwnProperty("__uniqueMergeOffsetId")||d&&r||(a.__uniqueMergeOffsetId=k++,w.push(a)),u||t?(o=a.__modifyStruct(J,I),I+=o[1],C.push(o),O.renderMode===et.SVG&&Ev(a)):c?(n=e.__modifyStruct(J,I),I+=n[1],C.push(n),(f===i[Vx]||"static"!==f&&"static"!==i[Vx])&&_===i[Jx]||(e.domParent.__updateStruct(J.__structs),O.renderMode===et.SVG&&Ev(e.domParent))):(r||y)&&(e.__zIndexChildren=null,x=e.__modifyStruct(J,I),I+=x[1],C.push(x))}}),[]),n=(w.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var c,u,_=t.flowChildren,f=t.absChildren,e=[],r=[],d=_.length,i=0;i<d;i++){var n=_[i],a=(n=n instanceof dl?n.shadowRoot:n)instanceof D0,y=(!c&&a&&n.hasOwnProperty("__uniqueReflowId")&&(c=!0,u=i),a&&n.currentStyle),p=a&&"inline"===y[Kx],g=a&&"inlineBlock"===y[Kx],x=n;if(!a||p||g){if(e.length&&r.length&&c){var m=od.getMergeMargin(r,e);if(m)for(var v=Math.max(u,i-e.length+1);v<d;v++)_[v].__offsetY(m,!0,sv)}r=[],e=[]}if(a&&!p){var E,b,g=a&&"none"===y[Kx],p=void 0;if(!g&&n.flowChildren&&0===n.flowChildren.length&&(y=(a=n.computedStyle)[Qx],E=a[em],M=a[rm],R=a[nm],S=a[Zx],b=a[am],a=a[sm],M<=0&&R<=0&&S<=0&&b<=0&&a<=0&&(e.push(E),r.push(y),p=!0)),g||p){if(i===d-1){var T=od.getMergeMargin(r,e);if(T)for(var A=Math.max(u,i-e.length+1);A<d;A++)_[A].__offsetY(T,!0,sv)}}else{var M=n.computedStyle,R=M[Qx],S=M[em];if(e.length&&(r.push(R),c)){var O=od.getMergeMargin(r,e);if(O)for(var C=Math.max(u,i-e.length+1);C<d;C++)_[C].__offsetY(O,!0,sv)}r=[],e=[S]}}}var I=t.currentStyle,w=I[Zx],k=t===J||t.isShadowRoot||"absolute"===I[Vx]||"relative"===I[Vx];if(w[1]===$m&&x){var o,I=t.height+t.computedStyle[rm],s=x.y+x.outerHeight-t.y-I;if(s){t.__resizeY(s,sv);for(var D=0,L=f.length;D<L;D++){var l=f[D],F=l.currentStyle,N=F[Xx],h=F[zx],F=F[Zx];if(N[1]===$m)if(h[1]===$m)for(var P=l.prev;P;){var B=P,H=(B=B instanceof dl?B.shadowRoot:B)instanceof D0,G=H&&B.currentStyle;if(!(H&&"absolute"===G[Vx])){H=B.y+B.outerHeight-l.y;H&&l.__offsetY(H,!0,sv);break}P=P.prev}else h[1]===qm?l.__offsetY(s,!0,sv):h[1]===Zm&&(h=(1-.01*h[0])*s,l.__offsetY(h,!0,sv));else if(N[1]===Zm)if(k){var h=.01*N[0]*s;l.__offsetY(h,!0,sv)}else{if(!o)for(o=t.domParent;o&&o!==J&&!o.isShadowRoot;){var Y=o.currentStyle;if("absolute"===Y[Vx]||"relative"===Y[Vx])break;o=o.domParent}o.currentStyle[Zx][1]!==qm&&(h=.01*N[0]*s,l.__offsetY(h,!0,sv))}if(F[1]===Zm)if(k)t.__layoutAbs(t,t.__layoutData,l);else{if(!o)for(o=t.domParent;o&&o!==J&&!o.isShadowRoot;){var W=o.currentStyle;if("absolute"===W[Vx]||"relative"===W[Vx])break;o=o.domParent}tt.push([t,o,l])}}return void od.offsetAndResizeByNodeOnY(t,J,Q,s,tt)}}for(var U=0,X=f.length;U<X;U++){var z=f[U],V=z.currentStyle,K=V[Xx],V=V[zx];if(K[1]===$m&&V[1]===$m)for(var j=z.prev;j;){var $=j,q=($=$ instanceof dl?$.shadowRoot:$)instanceof D0,Z=q&&$.currentStyle;if(!(q&&"absolute"===Z[Vx])){q=$.y+$.outerHeight-z.y;q&&z.__offsetY(q,!0,sv);break}j=j.prev}}}),tt.forEach(function(t){t[0].__layoutAbs(t[1],t[0].__layoutData,t[2])}),0),a=0,y=!0,p=J.__structs;if(C.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];if(y)y=!1,a=e[Wm]+(e[Um]||0)+1,n+=t;else{for(var r=e[Wm]+(e[Um]||0)+1+n,i=a;i<r;i++)p[i][Wm]+=n;a=r,n+=t}}),n)for(var g=a,x=p.length;g<x;g++)p[g][Wm]+=n;od.clearUniqueReflowId(Q)}}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},Xl.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===et.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===et.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),n}(),Av=T.STYLE_KEY.STROKE_WIDTH,Mv=At.isNil;function Rv(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function Sv(t,e){var r=0;return t&&2<=t.length&&r++,e&&2<=e.length&&(r+=2),r}function Ov(t,e,r,i,n,a,c,o,s){var l,h,o=7<arguments.length&&void 0!==o?o:0,s=8<arguments.length&&void 0!==s?s:1;return 0===o&&1===s?[t,e,r,i,n,a]:o===s?[]:(s<o&&(o=(h=[s,o])[0],s=h[1]),o=Math.max(0,o),s=Math.min(1,s),3===c?(h=Bt(kn.sliceBezier2Both([[t,e],n,a,[r,i]],o,s),4),t=(l=Bt(h[0],2))[0],e=l[1],n=h[1],a=h[2],r=(l=Bt(h[3],2))[0],i=l[1]):2===c?(h=Bt(kn.sliceBezier2Both([[t,e],a,[r,i]],o,s),3),t=(l=Bt(h[0],2))[0],e=l[1],a=h[1],r=(l=Bt(h[2],2))[0],i=l[1]):1===c?(h=Bt(kn.sliceBezier2Both([[t,e],n,[r,i]],o,s),3),t=(l=Bt(h[0],2))[0],e=l[1],n=h[1],r=(c=Bt(h[2],2))[0],i=c[1]):(t+=(l=r-t)*o,e+=(h=i-e)*o,r+=l*(1-s),i+=h*(1-s)),[t,e,r,i,n,a])}var Ai=function(){d(M,ip);var s=y(M);function M(t,e){var r,i,n;if(_(this,M),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):Mv(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):Mv(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):Mv(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):Mv(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var a=r.__start.length;a<r.__x1.length;a++)r.__start.push(0)}else Mv(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var o=r.__end.length;o<r.__x1.length;o++)r.__end.push(1)}else Mv(e.end)||(n=parseFloat(e.end),isNaN(n)&&(n=1),r.__end=r.__x1.map(function(){return n}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],Mv(e.x1)||(r.__x1=parseFloat(e.x1)||0),Mv(e.y1)||(r.__y1=parseFloat(e.y1)||0),Mv(e.x2)||(r.__x2=parseFloat(e.x2)||0),Mv(e.y2)||(r.__y2=parseFloat(e.y2)||0),Mv(e.start)||(r.__start=parseFloat(e.start)||0),Mv(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return f(M,[{key:"buildCache",value:function(e,r,i){var n,a=this,o=this.width,s=this.height,l=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){(Mv(l[t])||i)&&(n=!0,l[t]=Rv(a[t],e,o,h))}),["y1","y2"].forEach(function(t){(Mv(l[t])||i)&&(n=!0,l[t]=Rv(a[t],r,s,h))}),["controlA","controlB"].forEach(function(t){(Mv(l[t])||i)&&(n=!0,l[t]=function e(t,r,i,n,a,o){if(o){if(t)return t.map(function(t){return e(t,r,i,n,a)})}else if(t&&2<=t.length)return[r+t[0]*n,i+t[1]*a];return[]}(a[t],e,r,o,s,h))}),["start","end"].forEach(function(t){(Mv(l[t])||i)&&(n=!0,l[t]=a[t])}),n}},{key:"render",value:function(h,t,c,e,r,o){var f=this,t=N(F(M.prototype),"render",this).call(this,h,t,c,e,r,o);if(t.break)return t;c=t.ctx;var u,s,i,n,a,l,d,y,e=t.sx3,r=t.sy3,o=t.stroke,p=t.strokeWidth,g=t.strokeDasharray,x=t.strokeDasharrayStr,m=t.strokeLinecap,v=t.strokeLinejoin,E=t.strokeMiterlimit,b=t.dx,T=t.dy,_=this.__cacheProps,A=this.isMulti;return this.buildCache(e,r)&&h===et.SVG&&(u="",A?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],n=_.y2[e],a=_.controlA[e],o=_.controlB[e],s=_.start[e],e=_.end[e],l=Sv(a,o);0===s&&1===e||(t=(s=Bt(Ov(t,i,r,i,a,o,l,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],a=s[4],o=s[5]),u+=ne.svgLine(t,i,r,n,a,o,l)}):(e=Sv(_.controlA,_.controlB),r=_.x1,n=_.y1,a=_.x2,l=_.y2,d=_.controlA,y=_.controlB,i=_.start,s=_.end,0===i&&1===s||(r=(i=Bt(Ov(r,n,a,l,d,y,e,i,s,_.len),6))[0],n=i[1],a=i[2],l=i[3],d=i[4],y=i[5]),u=ne.svgLine(r,n,a,l,d,y,e)),_.d=u),h===et.CANVAS||h===et.WEBGL?o.forEach(function(t,e){var r,i,n,a,o,s=p[e],l=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(f.__preSetCanvas(h,c,{stroke:t,strokeWidth:s,strokeDasharray:g[e],strokeLinecap:m[e],strokeLinejoin:v[e],strokeMiterlimit:E[e]}),l&&(c.strokeStyle=t.v[0]),c.beginPath(),A?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],n=_.y2[e],a=_.controlA[e],o=_.controlB[e],s=_.start[e],e=_.end[e],l=Sv(a,o);0===s&&1===e||(t=(s=Bt(Ov(t,i,r,i,a,o,l,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],a=s[4],o=s[5]),ne.canvasLine(c,t,i,r,n,a,o,l,b,T)}):(s=Sv(_.controlA,_.controlB),e=_.x1,l=_.y1,t=_.x2,n=_.y2,a=_.controlA,o=_.controlB,i=_.start,r=_.end,0===i&&1===r||(e=(i=Bt(Ov(e,l,t,n,a,o,s,i,r,_.len),6))[0],l=i[1],t=i[2],n=i[3],a=i[4],o=i[5]),ne.canvasLine(c,e,l,t,n,a,o,s,b,T)),c.stroke(),c.closePath())}):h===et.SVG&&o.forEach(function(t,e){var r=p[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),i=[["d",_.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];f.__propsStrokeStyle(i,x[e],m[e],v[e],E[e]),f.addGeom("path",i)}),t}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx3,i=this.__sy3,n=this.computedStyle[Av],r=(this.buildCache(r,i),e.x1),s=e.y1,l=e.x2,h=e.y2,c=e.controlA,u=e.controlB,_=N(F(M.prototype),"bbox",this),f=0;return n.forEach(function(t){f=Math.max(f,t)}),f=Math.ceil(.5*f)+1,t||(r=[r],l=[l],s=[s],h=[h],c=[c],u=[u]),r.forEach(function(t,e){var r,i=s[e],n=l[e],a=h[e],o=c[e],e=u[e];(Mv(o)||o.length<2)&&(Mv(e)||e.length<2)?(_[0]=Math.min(_[0],t-f),_[0]=Math.min(_[0],n-f),_[1]=Math.min(_[1],i-f),_[1]=Math.min(_[1],a-f),_[2]=Math.max(_[2],t+f),_[2]=Math.max(_[2],n+f),_[3]=Math.max(_[3],i+f),_[3]=Math.max(_[3],a+f)):Mv(o)||o.length<2?(r=kn.bboxBezier(t,i,e[0],e[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f)):Mv(e)||e.length<2?(r=kn.bboxBezier(t,i,o[0],o[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f)):(r=kn.bboxBezier(t,i,o[0],o[1],e[0],e[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f))}),_}}]),M}(),Cv=Br.intersect,Iv=Br.union,wv=Br.subtract,kv=Br.subtract2,Dv=Br.xor,Lv=Br.chain,Fv=T.STYLE_KEY.STROKE_WIDTH,Nv=At.isNil;function Pv(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Bv(t,c){var e=[],r=0,i=[];if(c)r=[],t.forEach(function(t){t=Bv(t);e.push(t.list),r.push(t.total),i.push([0].concat(t.increase))});else if(Array.isArray(t)){r=0,i.push(0);for(var n=0,a=0,u=t.length;a<u;a++){var _=t[a];if(Array.isArray(_)){n=a;break}}for(var o=t[n],f=n+1,d=t.length;f<d;f++){var s,l,h=t[f];Array.isArray(h)&&(2===h.length?(l=Math.abs(h[0]-o[0]),s=Math.abs(h[1]-o[1]),l=Math.sqrt(Math.pow(l,2)+Math.pow(s,2)),e.push(l),r+=l,i.push(r),o=h):4===h.length?(s=kn.bezierLength([o,[h[0],h[1]],[h[2],h[3]]]),e.push(s),r+=s,i.push(r),o=[h[2],h[3]]):6===h.length&&(l=kn.bezierLength([o,[h[0],h[1]],[h[2],h[3]],[h[4],h[5]]]),e.push(l),r+=l,i.push(r),o=[h[4],h[5]]))}}return{list:e,total:r,increase:i}}function Hv(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var n=r+(i-r>>1);return t[n]===e?n:t[n]>e?Hv(t,e,r,Math.max(n-1,r)):Hv(t,e,Math.min(n+1,i),i)}function Gv(t,e,r,c){var i=2<arguments.length&&void 0!==r?r:0,n=3<arguments.length&&void 0!==c?c:1;if(0===i&&1===n)return t;if(i===n)return[];for(n<i&&(i=(r=[n,i])[0],n=r[1]);1<n-i;)n--;for(;n<0||i<0;)n++,i++;for(;1<=n&&1<=i;)n--,i--;var a,o,s,l,h,u=t.length,_=(t=At.clone(t),[]),c=1<i?i-1:i,r=1<n?n-1:n,f=Hv(e.increase,c*e.total,0,u-1),d=Hv(e.increase,r*e.total,0,u-1),y=i<0,p=1<n,g=1;(r*=e.total)>e.increase[d]&&(o=t[d].slice(t[d].length-2),s=t[d+1],h=e.list[d],g=r=(r-e.increase[d])/h,2===s.length?(h=s[0]-o[0],a=s[1]-o[1],a=p?[o[0]+r*h,o[1]+r*a]:[s[0]-(r=1-r)*h,s[1]-r*a]):4===s.length?a=[(h=kn.sliceBezier([o,[s[0],s[1]],[s[2],s[3]]],r))[1][0],h[1][1],h[2][0],h[2][1]]:6===s.length&&(a=[(h=kn.sliceBezier([o,[s[0],s[1]],[s[2],s[3]],[s[4],s[5]]],r))[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]])),(c*=e.total)>e.increase[f]&&(o=t[f].slice(t[f].length-2),s=e.list[f],f!==d||y||p||1===g||(s*=g,a&&(l=a)),l=l||t[f+1],r=(c-e.increase[f])/s,2===l.length?(h=l[0]-o[0],g=l[1]-o[1],y?_.push([l[0]-(r=1-r)*h,l[1]-r*g]):_.push([o[0]+r*h,o[1]+r*g]),_.push(l)):4===l.length?(c=kn.sliceBezier([[l[2],l[3]],[l[0],l[1]],o],1-r).reverse(),_.push(c[0]),_.push([c[1][0],c[1][1],c[2][0],c[2][1]]),f!==d||y||p||(a=null)):6===l.length&&(e=kn.sliceBezier([[l[4],l[5]],[l[2],l[3]],[l[0],l[1]],o],1-r).reverse(),_.push(e[0]),_.push([e[1][0],e[1][1],e[2][0],e[2][1],l[4],l[5]]),f!==d||y||p||(a=null)));for(var x=f+2;x<=d+(y||p?u:0);x++)_.push(t[x%u]);return a&&_.push(a),_}var Yv=function(){d(l,ip);var s=y(l);function l(t,e){var r,i,n;if(_(this,l),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var a=r.__start.length;a<r.__points.length;a++)r.__start.push(0)}else Nv(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var o=r.__end.length;o<r.__points.length;o++)r.__end.push(1)}else Nv(e.end)||(n=parseFloat(e.end),isNaN(n)&&(n=1),r.__end=r.__points.map(function(){return n}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,Nv(e.start)||(r.__start=parseFloat(e.start)||0),Nv(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t);return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),e.booleanOperations&&(r.__booleanOperations=e.booleanOperations),r}return f(l,[{key:"__getPoints",value:function(n,a,o,s,t,l){return t.map(function(t){if(Array.isArray(t)){var e=t.length;if(l){if(0!==e&&2!==e&&4!==e)return}else if(0!==e&&2!==e)return;for(var r=[],i=0;i<e;i++)i%2==0?r.push(n+t[i]*o):r.push(a+t[i]*s);return r}})}},{key:"__reprocessing",value:function(t,e){if(!e||t.length<2)return t;var r=this.booleanOperations,i=t.length;if(!r)return t;if(!Array.isArray(r))for(var c=r,r=[r],n=1;n<i-1;n++)r.push(c);if(Array.isArray(r)&&r.length){for(var a=[],o=t[0],s=1;s<i;s++){var l=(r[s-1]||"").toString().toLowerCase(),h=t[s];if(-1!==["intersect","intersection","union","subtract","subtract2","diff","difference","xor"].indexOf(l))switch(l){case"intersect":case"intersection":o=Cv(o,h,!0);break;case"union":o=Iv(o,h,!0);break;case"subtract":case"diff":case"difference":o=wv(o,h,!0);break;case"subtract2":o=kv(o,h,!0);break;case"xor":o=Dv(o,h,!0)}else a=a.concat(Lv(o)),o=h||[]}return a.concat(Lv(o))}return t}},{key:"__needRebuildSE",value:function(t){if(At.isNil(t.booleanOperations))return t.booleanOperations=!0}},{key:"buildCache",value:function(e,r){var t,i,n,c=this,a=this.width,o=this.height,s=this.points,u=this.controls,_=this.start,f=this.end,l=this.__cacheProps,h=this.isMulti;return Nv(l.points)&&(t=!0,l.points=h?s.map(function(t){if(Array.isArray(t))return c.__getPoints(e,r,a,o,t)}):this.__getPoints(e,r,a,o,s)),Nv(l.controls)&&(t=!0,l.controls=h?u.map(function(t){return Array.isArray(t)?c.__getPoints(e,r,a,o,t,!0):t}):this.__getPoints(e,r,a,o,u,!0)),Nv(l.start)&&(i=!0,l.start=_),Nv(l.end)&&(i=!0,l.end=f),this.__needRebuildSE(l)&&(i=!0),t&&(s=l.points,n=l.controls,l.list2=h?s.map(function(t,e){var r=n[e];if(Array.isArray(t))return t.map(function(t,e){return e?Pv(t,r&&r[e-1]):t})}):s.map(function(t,e){return e?Pv(t,n[e-1]):t}),l.len=Bv(l.list2,h)),(t||i)&&(l.list=h?l.list2.map(function(t,e){if(Array.isArray(t))return Gv(t,{list:(t=l.len).list[e],total:t.total[e],increase:t.increase[e]},l.start[e],l.end[e])}):Gv(l.list2,l.len,l.start,l.end),l.list=this.__reprocessing(l.list,h)),t||i}},{key:"render",value:function(t,e,r,i,n,a){e=N(F(l.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t,e,r,i,u,_,n,f;return this.__bbox||(t=this.isMulti,e=this.__cacheProps,n=this.__sx3,r=this.__sy3,i=this.computedStyle[Fv],this.buildCache(n,r),u=N(F(l.prototype),"bbox",this),_=0,i.forEach(function(t){_=Math.max(_,t)}),_=Math.ceil(.5*_)+1,n=e.points,f=e.controls,t||(n=[n],f=[f]),n.forEach(function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=f[e]||[],e=Bt(t[0],2),i=e[0],n=e[1],a=1,c=t.length;a<c;a++){var o,s,l,h=t[a];!h||h.length<2||(o=(h=Bt(t[a],2))[0],h=h[1],(s=r[a-1])&&4===s.length?(l=kn.bboxBezier(i,n,s[0],s[1],s[2],s[3],o,h),u[0]=Math.min(u[0],l[0]-_),u[1]=Math.min(u[1],l[1]-_),u[2]=Math.max(u[2],l[2]+_),u[3]=Math.max(u[3],l[3]+_)):s&&2===s.length?(l=kn.bboxBezier(i,n,s[0],s[1],o,h),u[0]=Math.min(u[0],l[0]-_),u[1]=Math.min(u[1],l[1]-_),u[2]=Math.max(u[2],l[2]+_),u[3]=Math.max(u[3],l[3]+_)):(u[0]=Math.min(u[0],i-_),u[1]=Math.min(u[1],n-_),u[2]=Math.max(u[2],i+_),u[3]=Math.max(u[3],n+_)),i=o,n=h)}}),this.__bbox=u),this.__bbox}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),l}(),t=function(){d(o,Yv);var r=y(o);function o(t,e){return _(this,o),r.call(this,t,e)}return f(o,[{key:"__getPoints",value:function(t,e,r,i,n,a){t=N(F(o.prototype),"__getPoints",this).call(this,t,e,r,i,n,a);return a||t.push(t[0]),t}}]),o}(),Wv=T.STYLE_KEY.STROKE_WIDTH,Uv=At.isNil,Xv=te.sectorPoints;function zv(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var ur=function(){d(R,ip);var r=y(R);function R(t,e){return _(this,R),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return zv(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return zv(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return zv(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,Uv(e.begin)||(t.__begin=zv(e.begin,0)),Uv(e.end)||(t.__end=zv(e.end,0)),Uv(e.r)||(t.__r=zv(e.r,1)),Uv(e.edge)||(t.__edge=!!e.edge),Uv(e.closure)||(t.__closure=!!e.closure)),t}return f(R,[{key:"buildCache",value:function(i,n,t){var e,a=this.width,r=this.begin,c=this.end,o=this.r,s=this.edge,u=this.closure,l=this.__cacheProps,h=this.isMulti;return(Uv(l.begin)||t)&&(e=!0,l.begin=(r||0)%360),(Uv(l.end)||t)&&(e=!0,l.end=(c||0)%360),(Uv(l.r)||t)&&(e=!0,l.r=h?o.map(function(t){return t*a*.5}):o*a*.5),o=l.r,(Uv(l.edge)||t)&&(e=!0,l.edge=s),(Uv(l.closure)||t)&&(e=!0,l.closure=u),e&&(h?(l.list=[],l.sList=[],r.forEach(function(t,e){var r=Uv(o[e])?.5*a:o[e],r=Xv(i,n,r,parseFloat(t||0)%360,parseFloat(c[e]||0)%360),t=r.slice(0);u[e]?(r.push(r[0].slice(0)),s&&t.push(t[0].slice(0))):(r.unshift([i,n]),r.push([i,n]),s&&(t.unshift([i,n]),t.push([i,n]))),l.list.push(r),l.sList.push(t)})):(h=(t=Xv(i,n,o,parseFloat(r||0),parseFloat(c||0))).slice(0),u?(t.push(t[0].slice(0)),s&&h.push(h[0].slice(0))):(t.unshift([i,n]),t.push([i,n]),s&&(h.unshift([i,n]),h.push([i,n]))),l.list=t,l.sList=h)),e}},{key:"render",value:function(t,e,r,i,c,u){e=N(F(R.prototype),"render",this).call(this,t,e,r,i,c,u);if(e.break)return e;this.buildCache(e.cx,e.cy),r=e.ctx;var n=e.fill,_=e.fillRule,a=e.stroke,f=e.strokeWidth,d=e.strokeDasharray,y=e.strokeDasharrayStr,p=e.strokeLinecap,g=e.strokeLinejoin,x=e.strokeMiterlimit,m=e.dx,v=e.dy,i=this.__cacheProps,E=i.list,b=i.sList,T=this.isMulti;if(n.length<=1&&a.length<=1){c={fill:n[0],fillRule:_[0],stroke:a[0],strokeWidth:f[0],strokeDasharray:d[0],strokeDasharrayStr:y[0],strokeLinecap:p[0],strokeLinejoin:g[0],strokeMiterlimit:x[0],dx:m,dy:v};this.__renderOneSector(t,r,T,E,b,c)}else{for(var o=0,A=n.length;o<A;o++){var s=n[o];s&&(s={fill:s,fillRule:_[o],dx:m,dy:v},this.__renderOneSector(t,r,T,E,b,s))}for(var l=0,M=a.length;l<M;l++){var h=a[l];h&&(h={stroke:h,strokeWidth:f[l],strokeDasharray:d[l],strokeDasharrayStr:y[l],strokeLinecap:p[l],strokeLinejoin:g[l],strokeMiterlimit:x[l],dx:m,dy:v},this.__renderOnePolygon(t,r,T,E,b,h))}}return e}},{key:"__renderOneSector",value:function(t,e,r,i,n,a){var o=a.fill,s=a.stroke,l=a.strokeWidth,h="conic"===o.k,c="conic"===s.k,u="radial"===o.k&&Array.isArray(o.v),_=0<l&&"radial"===s.k&&Array.isArray(s.v);h||c?(h?this.__conicGradient(t,e,i,r,a):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0),0<l&&c?Mt.warn("Stroke style can not use conic-gradient"):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0)):u||_?(u?this.__radialEllipse(t,e,i,r,a,"fill"):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0),0<l&&_?(Mt.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke=a.stroke.v[0],this.__drawPolygon(t,e,r,n,a,!1,!0)):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0)):(o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0,!1),0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,n,a,o,s,l){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,a,o,s,l),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<n&&(t=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,a,o,s,l),this.addGeom("path",t)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s,l;return this.__bbox||(a=this.isMulti,o=this.__cacheProps,l=this.__sx3,r=this.__sy3,t=this.width,i=this.height,s=this.computedStyle[Wv],this.buildCache(l=l+.5*t,t=r+.5*i),r=0,r=a?(e=0,o.r.forEach(function(t){e=Math.max(t,e)}),e):o.r,i=N(F(R.prototype),"bbox",this),n=0,s.forEach(function(t){n=Math.max(n,t)}),a=l-r-(n=Math.ceil(.5*n)+1),o=l+r-n,s=t-r+n,l=t+r+n,i[0]=Math.min(i[0],a),i[1]=Math.min(i[1],s),i[2]=Math.max(i[2],o),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),R}(),Vv=T.STYLE_KEY.STROKE_WIDTH,Kv=At.isNil;function jv(t,e,r,i,n,a){n=4<arguments.length&&void 0!==n?n:0,a=5<arguments.length&&void 0!==a?a:0;if(0===n||0===a)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];var o=n*te.H,s=a*te.H;return[[t+n,e],[t+r-n,e],[t+r+o-n,e,t+r,e+a-s,t+r,e+a],[t+r,e+i-a],[t+r,e+i+s-a,t+r+o-n,e+i,t+r-n,e+i],[t+n,e+i],[t+n-o,e+i,t,e+i+s-a,t,e+i-a],[t,e+a],[t,e+a-s,t+n-o,e,t+n,e]]}function $v(t){return t=parseFloat(t),t=isNaN(t)?0:t}var Wr=function(){d(s,ip);var r=y(s);function s(t,e){return _(this,s),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map($v)),Array.isArray(e.ry)&&(t.__ry=e.ry.map($v))):(t.__rx=t.__ry=0,Kv(e.rx)||(t.__rx=$v(e.rx)),Kv(e.ry)||(t.__ry=$v(e.ry))),t}return f(s,[{key:"buildCache",value:function(r,i,t){var e,n,a=this.width,o=this.height,s=this.rx,c=this.ry,l=this.__cacheProps,h=this.isMulti;return(Kv(l.rx)||t)&&(e=!0,l.rx=h?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),(Kv(l.ry)||t)&&(e=!0,l.ry=h?s.map(function(t){return Math.min(t,.5)*o}):Math.min(c,.5)*o),e&&(t=l.rx,n=l.ry,l.list=h?t.map(function(t,e){return jv(r,i,a,o,t,n[e])}):jv(r,i,a,o,t,n)),e}},{key:"render",value:function(t,e,r,i,n,a){e=N(F(s.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o;return this.__bbox||(t=this.__sx3,e=this.__sy3,r=this.width,i=this.height,n=this.computedStyle[Vv],this.buildCache(t,e),a=N(F(s.prototype),"bbox",this),o=0,n.forEach(function(t){o=Math.max(o,t)}),o=Math.ceil(.5*o)+1,a[0]=Math.min(a[0],t-o),a[1]=Math.min(a[1],e-o),a[2]=Math.max(a[2],t+r+o),a[3]=Math.max(a[3],e+i+o),this.__bbox=a),this.__bbox}}]),s}(),qv=T.STYLE_KEY.STROKE_WIDTH,Zv=At.isNil;function Jv(t){return t=parseFloat(t),t=isNaN(t)?1:t}var i=function(){d(h,ip);var r=y(h);function h(t,e){return _(this,h),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map(Jv):Zv(e.r)||(t.__r=Jv(e.r))):(t.__r=1,Zv(e.r)||(t.__r=Jv(e.r))),t}return f(h,[{key:"buildCache",value:function(e,r,t){var i=this.width,n=this.r,a=this.__cacheProps,o=this.isMulti;(Zv(a.r)||t)&&(o?(a.r=n.map(function(t){return t*i*.5}),a.list=a.r.map(function(t){return te.ellipsePoints(e,r,t,t)})):(a.r=n*i*.5,a.list=te.ellipsePoints(e,r,a.r,a.r)))}},{key:"render",value:function(t,e,r,i,n,a){e=N(F(h.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s,l;return this.__bbox||(a=this.isMulti,o=this.__cacheProps,l=this.__sx3,r=this.__sy3,t=this.width,i=this.height,s=this.computedStyle[qv],this.buildCache(l=l+.5*t,t=r+.5*i),r=0,r=a?(e=0,o.r.forEach(function(t){e=Math.max(t,e)}),e):o.r,i=N(F(h.prototype),"bbox",this),n=0,s.forEach(function(t){n=Math.max(n,t)}),a=l-r-(n=Math.ceil(.5*n)+1),o=t-r-n,s=l+r+n,l=t+r+n,i[0]=Math.min(i[0],a),i[1]=Math.min(i[1],o),i[2]=Math.max(i[2],s),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),h}(),Qv=T.STYLE_KEY.STROKE_WIDTH,t2=At.isNil;function e2(t){return t=parseFloat(t),t=isNaN(t)?1:t}var e=function(){d(u,ip);var r=y(u);function u(t,e){return _(this,u),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(e2):t2(e.rx)||(t.__rx=[e2(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(e2):t2(e.ry)||(t.__ry=[e2(e.ry)])):(t.__rx=1,t2(e.rx)||(t.__rx=e2(e.rx)),t.__ry=1,t2(e.ry)||(t.__ry=e2(e.ry))),t}return f(u,[{key:"buildCache",value:function(r,i,t){var e,n,a=this.width,o=this.height,s=this.rx,c=this.ry,l=this.__cacheProps,h=this.isMulti;return(t2(l.rx)||t)&&(e=!0,l.rx=h?s.map(function(t){return t*a*.5}):s*a*.5),(t2(l.ry)||t)&&(e=!0,l.ry=h?c.map(function(t){return t*o*.5}):c*o*.5),e&&(s=l.rx,n=l.ry,l.list=h?s.map(function(t,e){return te.ellipsePoints(r,i,t,n[e])}):te.ellipsePoints(r,i,s,n)),e}},{key:"render",value:function(t,e,r,i,n,a){e=N(F(u.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,t,i,c,n,e,a,o,s,l,h;return this.__bbox||(o=this.isMulti,r=this.__cacheProps,l=this.__sx3,h=this.__sy3,t=this.width,e=this.height,s=this.computedStyle[Qv],this.buildCache(l=l+.5*t,t=h+.5*e),n=h=0,n=o?(c=i=0,r.rx.forEach(function(t,e){i=Math.max(t,i),c=Math.max(n,r.ry[e])}),h=i,c):(h=r.rx,r.ry),e=N(F(u.prototype),"bbox",this),a=0,s.forEach(function(t){a=Math.max(a,t)}),o=l-h-(a=Math.ceil(.5*a)+1),s=l+h-a,l=t-n+a,h=t+n+a,e[0]=Math.min(e[0],o),e[1]=Math.min(e[1],l),e[2]=Math.max(e[2],s),e[3]=Math.max(e[3],h),this.__bbox=e),this.__bbox}}]),u}(),r2=k.TYPE_VD,i2=k.TYPE_GM,n2=k.TYPE_CP,a2=At.isPrimitive;var o2={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},s2={os:"offset",e:"easing"},l2={value:"v",options:"o"},h2={},c2={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},u2={},fi=(Nt.DOM_KEY_SET.concat(Nt.GEOM_KEY_SET).forEach(function(t){var e;o2.hasOwnProperty(t)?s2[o2[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),o2[t]=e,s2[e]=t)}),Object.keys(l2).forEach(function(t){h2[l2[t]]=t}),Object.keys(c2).forEach(function(t){u2[c2[t]]=t}),{fullCssProperty:o2,abbrCssProperty:s2,fullAnimate:l2,abbrAnimate:h2,fullAnimateOption:c2,abbrAnimateOption:u2}),_2=At.isNil,f2=At.isFunction,d2=At.isPrimitive,y2=At.clone,p2=At.extend,g2=fi.abbrCssProperty,x2=fi.abbrAnimateOption,m2=fi.abbrAnimate;function v2(r,i){r&&Object.keys(r).forEach(function(t){var e;0===t.indexOf("var-")?(e=t.slice(4),i.hasOwnProperty(e)&&(e=i[e],r["var-"+e]=r[t])):i.hasOwnProperty(t)&&(e=i[t],r[e]=r[t],delete r[t])})}function E2(l,h){var t;l&&(l.hasOwnProperty("vars")?(t=l.vars,delete l.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&h&&h.hasOwnProperty(e))for(var i=l,n=0,a=r.length;n<a;n++){var o=r[n];if(!i.hasOwnProperty(o)&&n!==a-1)return void Mt.error("Slot miss "+o);if(n===a-1){var s=h[e];if(void 0===s)return;f2(s)&&(s=s(i[o])),i[o]=s}else i=i[o]}})):Object.keys(l).forEach(function(t){if(0===t.indexOf("var-")){var e=l[t];if(delete l[t],e&&h){var r=t.slice(4);if(r&&e.id&&h.hasOwnProperty(e.id)){var i=h[e.id];if(void 0!==i){var n=l;if(-1<r.indexOf(".")){for(var a=r.split("."),o=a.length,s=0;s<o-1;s++){if(!n[r=a[s]])return void Mt.warn("parseJson vars is not exist: "+e.id+", "+t+", "+a.slice(0,s).join("."));n=n[r]}r=a[o-1]}f2(i)&&(i=i(e)),n[r]=i}}}}}))}function b2(t,n,c){if(d2(t)||t instanceof w||t instanceof dl)return t;if(Array.isArray(t))return t.map(function(t){return b2(t,n,c)});var e,r,i=t.libraryId;if(!_2(i)){var a=c[i];if(!a)throw new Error("Link library miss id: "+i);r=a,(e=t).tagName=r.tagName,e.props=y2(r.props)||{},e.children=r.children||[],r.vars&&!e.vars&&(e.vars=r.vars),r.library&&(e.library=r.library),Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),delete e.libraryId,(i=e.init)&&(_=(a=e.props).style,p2(a,i),_&&(p2(_,i.style),a.style=_),delete e.init)}var o,u,h,i=t.library,_=(Array.isArray(i)&&(c={},i.forEach(function(t){var e=c,r=t.id;if(_2(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}),o=t,u=c,h=n.vars,o.hasOwnProperty("vars")?(a=o.vars,delete o.vars,(a=Array.isArray(a)?a:[a]).forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&h&&h.hasOwnProperty(e)&&"library"===r[0])for(var i=u,n=1,a=r.length;n<a;n++){var o,s,l=r[n];if(!i.hasOwnProperty(l)&&n!==a-1)return void Mt.error("Library slot miss "+l);n===a-1?(o=h[e],s=i[l],f2(o)&&(o=o(s)),i[l]=1===n?Object.assign({id:s.id,tagName:s.tagName},o):o):i=i[l]}})):Object.keys(o).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=o[t],delete o[t],e&&h&&((t=t.slice(12))&&e.id&&h.hasOwnProperty(e.id)&&(r=h[e.id],f2(r)&&(r=r(e)),u[t]=Object.assign({id:t},r))))}),delete t.library),t.tagName),i=t.props,i=void 0===i?{}:i,f=t.children,f=void 0===f?[]:f,d=t.animate,d=void 0===d?[]:d;if(!_)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var y,s=i.src,l=(/^#\d+$/.test(s)&&(l=n.imgs,s=parseInt(s.slice(1)),Array.isArray(l)&&(i.src=l[s])),i.style);return l&&(s=l.fontFamily,/^#\d+$/.test(s)&&(y=n.fonts,s=parseInt(s.slice(1)),Array.isArray(y)&&(l.fontFamily=y[s])),!1!==n.abbr&&v2(l,g2),E2(l,n.vars)),E2(i,n.vars),E2(t,n.vars),t.children=b2(f,n,c),d&&(d=Array.isArray(d)?d:[d]).forEach(function(t){!1!==n.abbr&&v2(t,m2);var e,r,i=t.value,t=t.options;Array.isArray(i)&&i.length&&i.forEach(function(t){!1!==n.abbr&&v2(t,g2),E2(t,n.vars)}),t&&(!1!==n.abbr&&v2(t,x2),E2(t,n.vars),e=t,r=n,["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach(function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}))}),t}function T2(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!1===t.abbr&&(e.abbr=!1),!1!==e.abbr&&Mt.warn("Abbr in json is deprecated"),b2(t=e.singleton||t.singleton?t:At.clone(t),e,{})}var A2={apply:T2,parse:function(t,e,r,i){if(e){var n=e.fonts,n=(n&&(n=Array.isArray(n)?n:[n]).forEach(function(t){var e=t.fontFamily,r=t.url,t=t.data;e&&(r||t)&&Ot.register(e,r,t)}),Mt.isDom(r)?i=i||{}:(i=i||r||{},r=null),[]),a=function e(r,t,i,n,a){if(a2(t)||t instanceof w||t instanceof dl)return t;if(Array.isArray(t))return t.map(function(t){return e(r,t,i,n,a)});var c,u=a,o=(a+=t.offsetTime||0,t.tagName),s=t.props,s=void 0===s?{}:s,l=t.children,l=void 0===l?[]:l,h=t.animate,h=void 0===h?[]:h;if(!o)throw new Error("Dom must have a tagName: "+JSON.stringify(t));if(!Array.isArray(l))throw new Error("children must be an array");return t="$"===o.charAt(0)?r.createGm(o,s):/^[A-Z]/.test(o)?(t=dl.getRegister(o),r.createCp(t,s,l.map(function(t){return t&&-1<[r2,i2,n2].indexOf(t.$$type)?t:e(r,t,i,n,a)}))):r.createVd(o,s,l.map(function(t){return t&&-1<[r2,i2,n2].indexOf(t.$$type)?t:e(r,t,i,n,a)})),h&&((h=Array.isArray(h)?h:[h]).forEach(function(t){t=t.value,Array.isArray(t)&&t.length&&(c=!0)}),c&&i.push({animate:h,target:t,offsetTime:u})),t}(t,e=T2(e,i),n,i,0);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg/webgl");e=i.controller instanceof jp?i.controller:a.animateController;t.render(a,r),n.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(n),e.__playAuto()):(e.__records2=e.__records2.concat(n),e.init(e.__records2,e.list2))}else n.length&&(a.__animateRecords={options:i,list:n,controller:i.controller instanceof jp?i.controller:null});return a}},loadAndParse:function(n,e,c,r){function t(){var t;h===_+f+d&&(t=A2.parse(n,e,c,r),r&&At.isFunction(r.callback)&&r.callback(t))}var i=e.fonts,a=e.components,o=e.imgs,s=[],l=[],u=[],_=(i&&(i=Array.isArray(i)?i:[i]).forEach(function(t){t.url&&s.push(t)}),a&&(a=Array.isArray(a)?a:[a]).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&n.Component.hasRegister(e)&&!i||r&&l.push(t)}),o&&(o=Array.isArray(o)?o:[o]).forEach(function(t){t=t.url;t&&u.push(t)}),s.length),f=l.length,d=u.length,h=0;_||f||d?(n.inject.loadFont(s,function(){h+=_,t()}),n.inject.loadComponent(l.map(function(t){return t.url}),function(){h+=f,l.forEach(function(t){t=t.tagName;t&&window[t]&&!n.Component.hasRegister(t)&&n.Component.register(t,window[t])}),t()}),n.inject.measureImg(u,function(){h+=d,t()})):t()},abbr:fi},Si={css:mn,reset:Nt,unit:r,font:Ot,abbr:cr,transform:$a},mi={Animation:gu,Controller:jp,easing:th,frame:Xl},di={level:Ko,change:Tr,Page:ko,Cache:Po},A=(ip.register("$line",Ai),ip.register("$polyline",Yv),ip.register("$polygon",t),ip.register("$sector",ur),ip.register("$rect",Wr),ip.register("$circle",i),ip.register("$ellipse",e),{version:"0.78.0",render:function(t,e){if(!(t instanceof Tv))throw new Error("Render dom must be canvas/svg/webgl");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,n=arguments.length;i<n;i++)r.push(arguments[i]);return At.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?t instanceof ip?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new Tv(t,e,r);if(q0.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:k.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:k.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:k.TYPE_CP}},parse:function(t,e,r){return A2.parse(this,t,e,r)},loadAndParse:function(t,e,r){return A2.loadAndParse(this,t,e,r)},mode:et,Component:dl,Node:w,Text:Hs,Geom:ip,Xom:D0,Dom:Oy,Img:y1,Root:Tv,Event:ll,util:At,inject:Mt,style:Si,parser:A2,animate:mi,math:Hr,builder:ol,updater:Mp,refresh:di,enums:T,set debug(t){Z.flag=!!t}});return ol.ref({Xom:D0,Dom:Oy,Img:y1,Geom:ip,Component:dl}),"undefined"!=typeof window?window.karas=A:"undefined"!=typeof self&&(self.karas=A),A});
//# sourceMappingURL=index.min.js.map
