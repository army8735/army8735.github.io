!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function L(t){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=L(r);return t=i?(t=L(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?o(e):t}}function D(t,e,r){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(r):e.value}})(t,e,r||t)}function xt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(a.push(i.value),!e||a.length!==e);o=!0);}catch(t){s=!0,n=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var l={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,FILL:84,STROKE:85,STROKE_WIDTH:86,STROKE_DASHARRAY:87,STROKE_DASHARRAY_STR:88,STROKE_LINECAP:89,STROKE_LINEJOIN:90,STROKE_MITERLIMIT:91,FILL_RULE:92,MATRIX:93,BORDER_TOP:94,BORDER_RIGHT:95,BORDER_BOTTOM:96,BORDER_LEFT:97};function h(t){return t.replace(/[A-Z]/g,function(t){return t.toLowerCase()}).replace(/_([a-z])/g,function(t,e){return e.toUpperCase()})}var c={},u={},p={};Object.keys(l).forEach(function(t){var e=l[t],t=h(c[e]=t);u[e]=t,p[t]=e});var g={STYLE_KEY:l,STYLE_R_KEY:c,STYLE_RV_KEY:u,STYLE_V_KEY:p,style2Lower:h,style2Upper:function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toUpperCase()}).replace(/[a-z]/g,function(t){return t.toUpperCase()})},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_OVERWRITE:5,UPDATE_KEYS:6,UPDATE_LIST:7,UPDATE_CONFIG:8,UPDATE_ADD_DOM:9,UPDATE_REMOVE_DOM:10},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6}},m=g.STRUCT_KEY,v=m.STRUCT_NODE,y=m.STRUCT_INDEX,x=m.STRUCT_CHILD_INDEX,E=m.STRUCT_LV,b=g.NODE_KEY,A=b.NODE_IS_DESTROYED,M=b.NODE_STRUCT,T=function(){function t(){_(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return d(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[M]=(a(i={},v,this),a(i,y,t),a(i,x,r),a(i,E,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[M],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[A]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[A]}}]),t}(),Et={CANVAS:0,SVG:1,WEBGL:2},C={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,C.PERCENT]:/px$/i.test(t)?[e,C.PX]:/deg$/i.test(t)?[e,C.DEG]:/rem$/i.test(t)?[e,C.REM]:/vw$/i.test(t)?[e,C.VW]:/vh$/i.test(t)?[e,C.VH]:/em$/i.test(t)?[e,C.EM]:/vw$/i.test(t)?[e,C.VW]:/vh$/i.test(t)?[e,C.VH]:[e,C.NUMBER]}},bt={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375,padding:{1:1,f:.9}},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125,padding:{S:1,T:1,Z:1,c:1,f:.7,i:1,l:1,t:.9}},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06,padding:{f:.5}},simsun:{lhr:1.4,blr:1.06,padding:{f:.5}}},support:function(t){return this.info.hasOwnProperty(t)},register:function(t,e){var r=e||{},i=r.emSquare,n=void 0===i?2048:i,a=r.ascent,e=void 0===a?1854:a,i=r.descent,a=void 0===i?434:i,i=r.lineGap,i=void 0===i?67:i,r=r.padding,r=void 0===r?{}:r;this.info[t.toLowerCase()]={lhr:(e+a+i)/n,blr:e/n,padding:r}},addPadding:function(t,e){Object.assign(this.info[t.toLowerCase()].padding,e)}};bt.info["宋体"]=bt.info.simsun;var R={position:/((-?[\d.]+[pxremvwh%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};function O(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function S(t){return!t||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var qt={identity:O,multiply:function(t,e){if(S(t))return e;if(S(e))return t;for(var r=[],i=0;i<4;i++){var n=t[i],a=t[i+4],o=t[i+8],s=t[i+12];r[i]=n*e[0]+a*e[1]+o*e[2]+s*e[3],r[i+4]=n*e[4]+a*e[5]+o*e[6]+s*e[7],r[i+8]=n*e[8]+a*e[9]+o*e[10]+s*e[11],r[i+12]=n*e[12]+a*e[13]+o*e[14]+s*e[15]}return r},calPoint:function(t,e){var r=(p=xt(t,4))[0],i=p[1],n=p[2],a=p[3];if(void 0===a&&(a=1),!e||S(e))return[r,i,n,a];if(16!==e.length)return n=xt(e,6),g=n[0],o=n[1],a=n[2],e=n[3],[g*r+a*i+n[4],o*r+e*i+n[5]];var n=n||0,o=xt(e,16),s=o[0],l=o[1],h=o[2],c=o[3],u=o[4],_=o[5],f=o[6],d=o[7],e=o[8],t=o[9],p=o[10],g=o[11];return[r*s+i*u+n*e+o[12],r*l+i*_+n*t+o[13],r*h+i*f+n*p+o[14],a*=r*c+i*d+n*g+o[15]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length)return function(t){var e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];var r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0==r)return O();r=1/r;for(var i=[],n=0;n<16;n++)i[n]=e[n]*r;return i}(t);var e=xt(t,6),r=e[0],i=e[1],n=e[2],a=e[3],o=e[4],s=e[5];return 1===r&&0===i&&0===n&&1===a&&0===o&&0===s||0==(e=r*a-i*n)?t:[a/e,-i/e,-n/e,r/e,(n*s-a*o)/e,(i*o-r*s)/e]},isE:S,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}};var k={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},w=4*(Math.sqrt(2)-1)/3,I=k.crossProduct,P=qt.calPoint,N=qt.isE,F=g.STYLE_KEY,B=F.WIDTH,G=F.HEIGHT,Y=F.TRANSFORM_ORIGIN;function H(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function W(t,e,r){for(var i=xt(r[0],2),n=i[0],a=i[1],i=xt(r[0],2),o=i[0],s=i[1],l=r.length,h=1;h<l;h++)var c=xt(r[h],2),u=c[0],c=c[1],n=Math.max(n,u),a=Math.max(a,c),o=Math.min(o,u),s=Math.min(s,c);if(t<o||e<s||n<t||a<e)return!1;for(var _=0,f=r.length;_<f;_++){var d=xt(r[_],2),p=d[0],g=d[1],m=xt(r[(_+1)%f],2),d=m[0],m=m[1];if(I(d-p,m-g,t-p,e-g)<0)return!1}return!0}function U(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function X(t,e){var r=xt(t,4),i=r[0],n=r[1],a=r[2],o=r[3],s=xt(e,4),t=s[0],r=s[1],e=s[2],s=s[3];return!(e<=i||s<=n||a<=t||o<=r)}function V(t,e,r){var i=r.matrix,n=void 0===i?[1,0,0,1,0,0]:i,a=r.computedStyle,o=void 0===a?{}:a,i=o[B],r=o[G],a=o[Y],o=xt(a=void 0===a?[.5*i,.5*r]:a,2),a=o[0],o=o[1],n=xt(P([t*i-a,e*r-o],n),2);return[(t=n[0])+a,(e=n[1])+o]}function K(t){return t*Math.PI/180}function z(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function $(t,e,r){var i=t,n=(2*e+r)/3,t=(e+2*r)/3;return(i(e)+3*i(n)+3*i(t)+i(r))*(r-e)/8}function j(e,r){return function t(e,r,i,n){var a=3<arguments.length&&void 0!==n?n:.001,o=e,s=(r+i)/2,l=$(o,r,i),n=$(o,r,s),e=$(o,s,i),l=n+e-l;return Math.abs(l)<=15*a?n+e+l/15:t(o,r,s,a/2)+t(o,s,i,a/2)}(function(t){return z(Z(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function Z(t,e,r,i){i=3<arguments.length&&void 0!==i?i:1;return 2===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,n=(l=xt(e,3))[0],a=l[1],o=l[2],s=(h=xt(n,2))[0],r=h[1],e=xt(a,2),l=e[0],n=e[1],a=(h=xt(o,2))[0],e=h[1],o=0,h=0,h=0===i?(o=Math.pow(1-t,2)*s+2*t*(1-t)*l+Math.pow(t,2)*a,Math.pow(1-t,2)*r+2*t*(1-t)*n+Math.pow(t,2)*e):1===i?(o=2*(1-t)*(l-s)+2*t*(a-l),2*(1-t)*(n-r)+2*t*(e-n)):2===i?(o=2*(a-2*l+s),2*(e-2*n+r)):o=0;return[o,h]}(t,e,i):3===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,n=(c=xt(e,4))[0],a=c[1],o=c[2],s=c[3],l=(u=xt(n,2))[0],h=u[1],r=xt(a,2),e=r[0],c=r[1],u=(n=xt(o,2))[0],a=n[1],r=xt(s,2),o=r[0],n=r[1],s=0,r=0,r=0===i?(s=Math.pow(1-t,3)*l+3*t*Math.pow(1-t,2)*e+3*(1-t)*Math.pow(t,2)*u+Math.pow(t,3)*o,Math.pow(1-t,3)*h+3*t*Math.pow(1-t,2)*c+3*(1-t)*Math.pow(t,2)*a+Math.pow(t,3)*n):1===i?(s=3*((1-t)*(1-t)*(e-l)+2*(1-t)*t*(u-e)+t*t*(o-u)),3*((1-t)*(1-t)*(c-h)+2*(1-t)*t*(a-c)+t*t*(n-a))):2===i?(s=6*(u-2*e+l)*(1-t)+6*(o-2*u+e)*t,6*(a-2*c+h)*(1-t)+6*(n-2*a+c)*t):3===i?(s=6*(o-3*u+3*e-l),6*(n-3*a+3*c-h)):s=0;return[s,r]}(t,e,i):void 0}function q(e,r,t){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,o=function(t){return z(Z(t,e,r))},s=t*i,l=i,h=l,c=0;c<n;c++){var u=$(o,0,l)-s;if(Math.abs(u)<a)break;var _=z(Z(l,e,r,1));if(l-=u*_/(u*z(Z(l,e,r,2))+_*_),Math.abs(l-h)<a)break;h=l}return Z(l,e,r,0)}function J(t,e){var r=xt(t,4),i=xt(r[0],2),n=i[0],a=i[1],o=xt(r[1],2),s=o[0],l=o[1],h=xt(r[2],2),c=h[0],u=h[1],_=r[3],i=(s-n)*e+n,o=(l-a)*e+a,h=(c-s)*e+s,r=(u-l)*e+l,s=(h-i)*e+i,l=(r-o)*e+o;if(4===t.length){_=xt(_,2);return[[n,a],[i,o],[s,l],[(((_[0]-c)*e+c-h)*e+h-s)*e+s,(((_[1]-u)*e+u-r)*e+r-l)*e+l]]}if(3===t.length)return[[n,a],[i,o],[s,l]]}var Q={pointInPolygon:W,pointInQuadrilateral:function(t,e,r,i,n,a,o,s,l,h,c){if(!c||N(c))return r<=t&&i<=e&&t<=o&&e<=s;var u=xt(P([r,i],c),4);r=u[0],i=u[1];var _=u[3],f=xt(P([n,a],c),4);n=f[0],a=f[1];var u=f[3],f=xt(P([l,h],c),4);l=f[0],h=f[1];var f=f[3],c=xt(P([o,s],c),4);return o=c[0],s=c[1],_&&1!==_&&(r/=_,i/=_),u&&1!==u&&(n/=u,a/=u),f&&1!==f&&(l/=f,h/=f),(c=c[3])&&1!==c&&(o/=c,s/=c),W(t,e,[[r,i],[n,a],[o,s],[l,h]])},d2r:K,r2d:function(t){return 180*t/Math.PI},H:w,h:H,angleBySide:function(t,e,r){return r=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(r)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:U,triangleIncentre:function(t,e,r,i,n,a){var o=U(r,i,n,a),s=U(t,e,n,a),l=U(t,e,r,i);return[(o*t+s*r+l*n)/(o+s+l),(o*e+s*i+l*a)/(o+s+l)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,n=r*w,a=i===r?n:i*w;return[[t-r,e],[t-r,e-a,t-n,e-i,t,e-i],[t+n,e-i,t+r,e-a,t+r,e],[t+r,e+a,t+n,e+i,t,e+i],[t-n,e+i,t-r,e+a,t-r,e]]},sectorPoints:function t(e,r,i,n,a){if(a<n&&(n=(v=[a,n])[0],a=v[1]),n===a)return[];var o=[],s=Math.floor(n/90),l=Math.floor(a/90);if(s===l||l-s==1&&a%90==0){var h,c,u,_,f,d,p,g,m=H(K(Math.abs(n-a)))*i,v=Math.sqrt(Math.pow(i,2)+Math.pow(m,2)),m=Math.atan(m/i);s<90?(h=[e+Math.sin(K(n))*i,r-Math.cos(K(n))*i],c=m+K(n),_=[e+Math.sin(c)*v,r-Math.cos(c)*v],u=[e+Math.sin(K(a))*i,r-Math.cos(K(a))*i],c=K(a)-m,c=[e+Math.sin(c)*v,r-Math.cos(c)*v],o.push(h),o.push(_.concat(c).concat(u))):s<180?(h=[e+Math.cos(K(n-90))*i,r+Math.sin(K(n-90))*i],_=m+K(n-90),c=[e+Math.cos(_)*v,r+Math.sin(_)*v],u=[e+Math.cos(K(a-90))*i,r+Math.sin(K(a-90))*i],_=K(a-90)-m,_=[e+Math.cos(_)*v,r+Math.sin(_)*v],o.push(h),o.push(c.concat(_).concat(u))):s<270?(f=[e-Math.sin(K(n-180))*i,r+Math.cos(K(n-180))*i],d=m+K(n-180),g=[e-Math.sin(d)*v,r+Math.cos(d)*v],p=[e-Math.sin(K(a-180))*i,r+Math.cos(K(a-180))*i],d=K(a-180)-m,d=[e-Math.sin(d)*v,r+Math.cos(d)*v],o.push(f),o.push(g.concat(d).concat(p))):(f=[e-Math.cos(K(n-270))*i,r+Math.sin(K(n-270))*i],g=m+K(n-270),d=[e-Math.cos(g)*v,r+Math.sin(g)*v],p=[e-Math.cos(K(a-270))*i,r+Math.sin(K(a-270))*i],g=K(a-270)-m,v=[e-Math.cos(g)*v,r+Math.sin(g)*v],o.push(f),o.push(d.concat(v).concat(p)))}else{for(var y,x,E=s,b=[];E<=l;E++)0===E?(y=t(e,r,i,n,90),b.push(y)):1===E?(s===E||90<a)&&(y=t(e,r,i,n<90?90:n,180<a?180:a),b.push(y)):2===E?(s===E||180<a)&&(x=t(e,r,i,n<180?180:n,270<a?270:a),b.push(x)):3===E&&(s===E||270<a)&&(x=t(e,r,i,n<270?270:n,a),b.push(x));for(var o=b[0],A=1,M=b.length;A<M;A++)o.push(b[A][1])}return o},getRectsIntersection:function(t,e){if(!X(t,e))return null;var r=(o=xt(t,4))[0],i=o[1],n=o[2],a=o[3],t=(s=xt(e,4))[0],o=s[1],e=s[2],s=s[3];return[Math.max(r,t),Math.max(i,o),Math.min(n,e),Math.min(a,s)]},isRectsOverlap:X,isRectsInside:function(t,e){var r=(o=xt(t,4))[0],i=o[1],n=o[2],a=o[3],t=(s=xt(e,4))[0],o=s[1],e=s[2],s=s[3];return r<=t&&i<=o&&e<=n&&s<=a},calCoordsInNode:V,calPercentInNode:function(t,e,r){var i,n=(l=r.computedStyle)[B],a=l[G],o=(h=xt(l[Y],2))[0],s=h[1],l=Math.atan((a-s)/(n-o)),r=(h=xt(V(1,1,r),2))[0],h=h[1],c=o<=r&&s<=h?(i=o===r?-Math.atan(1/0):Math.atan((h-s)/(r-o)))-l:o<=r&&h<s?(i=o===r?-Math.atan(1/0):Math.atan((s-h)/(r-o)))+l:r<o&&s<=h?(i=Math.atan((h-s)/(o-r)))-l:r<o&&h<s?(i=Math.atan((h-s)/(r-o)))<=l?i+Math.PI-l:-(c=Math.PI-i+l):0,l=Math.sqrt(Math.pow(t-o,2)+Math.pow(e-s,2)),t=o<=t&&s<=e?o===t?-Math.atan(1/0):Math.atan((e-s)/(t-o)):o<=t&&e<s?o===t?-Math.atan(1/0):-Math.atan((e-s)/(o-t)):t<o&&s<=e?Math.PI-Math.atan((e-s)/(o-t)):Math.atan((e-s)/(t-o))-Math.PI;return(t-=c)>Math.PI?(t-=Math.PI,[(o-l*Math.cos(t))/n,(s-l*Math.sin(t))/a]):t>.5*Math.PI?(t=Math.PI-t,[(o-l*Math.cos(t))/n,(s+l*Math.sin(t))/a]):0<=t?[(o+l*Math.cos(t))/n,(s+l*Math.sin(t))/a]:t>=.5*-Math.PI?(t=-t,[(o+l*Math.cos(t))/n,(s-l*Math.sin(t))/a]):t>=-Math.PI?(t=Math.PI+t,[(o-l*Math.cos(t))/n,(s-l*Math.sin(t))/a]):(t=-Math.PI-t,[(o-l*Math.cos(t))/n,(s+l*Math.sin(t))/a])},bboxBezier:function(t,e,r,i,n,a,o,s){return 4===arguments.length?[t,e,r,i]:6===arguments.length?(l=t,c=e,d=r,_=i,u=n,p=a,m=Math.min(l,u),v=Math.min(c,p),y=Math.max(l,u),x=Math.max(c,p),(d<m||_<v||y<d||x<_)&&(d=(h=1-(f=(l-d)/(l-2*d+u)))*h*l+2*h*f*d+f*f*u,p=(u=1-(f=(c-_)/(c-2*_+p)))*u*c+2*u*f*_+f*f*p,m=Math.min(m,d),v=Math.min(v,p),y=Math.min(y,d),x=Math.min(x,p)),[m,v,y,x]):8===arguments.length?(l=t,h=e,c=r,u=i,_=n,f=a,d=o,p=s,m=Math.min(l,d),v=Math.min(h,p),y=Math.max(l,d),x=Math.max(h,p),(c<m||u<v||y<c||x<u||_<m||f<v||y<_||x<f)&&(r=(t=h-2*u+f)*t-(e=3*u-h-3*f+p)*(-h+u),0<(a=(i=l-2*c+_)*i-(n=3*c-l-3*_+d)*(-l+c))&&(0<(o=(-i-(a=Math.sqrt(a)))/n)&&o<1&&(s=(s=1-o)*s*s*l+3*s*s*o*c+3*s*o*o*_+o*o*o*d,m=Math.min(m,s),y=Math.max(y,s)),0<(o=(-i+a)/n)&&o<1&&(g=(g=1-o)*g*g*l+3*g*g*o*c+3*g*o*o*_+o*o*o*d,m=Math.min(m,g),y=Math.max(y,g))),0<r&&(0<(d=(-t-(r=Math.sqrt(r)))/e)&&d<1&&(g=(g=1-d)*g*g*h+3*g*g*d*u+3*g*d*d*f+d*d*d*p,v=Math.min(v,g),x=Math.max(x,g)),0<(d=(-t+r)/e)&&d<1&&(p=(e=1-d)*e*e*h+3*e*e*d*u+3*e*d*d*f+d*d*d*p,v=Math.min(v,p),x=Math.max(x,p)))),[m,v,y,x]):void 0;var l,h,c,u,_,f,d,p,g,m,v,y,x},bezierLength:j,pointAtBezier:function(t,e,r,i,n){return q(t,e,j(t,e,0,1),r,i,n)},pointAtBezierWithLength:q,sliceBezier:J,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=J(t,r)),0<e&&(r<1&&(e/=r),t=J(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,i){return 270<=i?(i=K(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=K(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=K(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=K(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var tt={getConicGradientImage:function(o,s,l,t,e,h){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");l=Math.floor(l),t=Math.floor(t);for(var c=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),u=0;u<t;u++)for(var r=function(t){for(var e=function(t,e){t-=o,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,u),r=void 0,r=0;r<c.length&&c[r].angle<=e;r++);var i=c[r-1],n=c[r];if(!i||!n)return"continue";var a=(e-i.angle)/(n.angle-i.angle),n=n.color.map(function(t,e){return a*(t-i.color[e])+i.color[e]}),t=4*(t+u*l);h[t]=n[0],h[1+t]=n[1],h[2+t]=n[2],h[3+t]=Math.min(255,255*n[3])},i=0;i<l;i++)r(i);return h}};function et(t){var r="";return t.forEach(function(t){var e=xt(t,2),t=e[0],e=e[1];"blur"===t?r+="blur(".concat(e,"px)"):"hue-rotate"===t?r+="hue-rotate(".concat(e,"deg)"):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||(r+="".concat(t,"(").concat(e,"%)"))}),r}var At={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var n=0,a=0,o=e.length;a<o;a++){var s=e[a];if(Array.isArray(s)){n=a;break}}t.moveTo(e[n][0]+r,e[n][1]+i);for(var l=n+1,h=e.length;l<h;l++){var c=e[l];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+i):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i,c[4]+r,c[5]+i))}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=0,r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)){e=r;break}}for(var a="M"+t[e][0]+","+t[e][1],o=e+1,s=t.length;o<s;o++){var l=t[o];Array.isArray(l)&&(2===l.length?a+="L"+l[0]+","+l[1]:4===l.length?a+="Q"+l[0]+","+l[1]+" "+l[2]+","+l[3]:6===l.length&&(a+="C"+l[0]+","+l[1]+" "+l[2]+","+l[3]+" "+l[4]+","+l[5]))}return a},canvasLine:function(t,e,r,i,n,a,o,s){var l=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,h=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+l,r+h),3===s?(t.bezierCurveTo(a[0]+l,a[1]+h,o[0]+l,o[1],i+l,n+h),2):2===s?(t.quadraticCurveTo(o[0]+l,o[1]+h,i+l,n+h),2):1===s?(t.quadraticCurveTo(a[0]+l,a[1]+h,i+l,n+h),2):(t.lineTo(i+l,n+h),1)},svgLine:function(t,e,r,i,n,a,o){return 3===o?"M"+t+","+e+"C"+n[0]+","+n[1]+" "+a[0]+","+a[1]+" "+r+","+i:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+i:1===o?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:et,svgFilter:et},rt=Q.H,it=C.PX,nt=C.PERCENT,at=C.REM,ot=C.VW,st=C.VH,lt=At.canvasPolygon,ht=At.svgPolygon,ct=g.STYLE_KEY,ut=ct.BORDER_LEFT_WIDTH,_t=ct.BORDER_TOP_WIDTH,ft=ct.BORDER_BOTTOM_WIDTH,dt=ct.PADDING_LEFT,pt=ct.PADDING_BOTTOM,gt=ct.PADDING_TOP,mt=ct.BORDER_TOP_LEFT_RADIUS,vt=ct.BORDER_TOP_RIGHT_RADIUS,Mt=ct.BORDER_BOTTOM_LEFT_RADIUS,Tt=ct.BORDER_BOTTOM_RIGHT_RADIUS,Ct=ct.FONT_SIZE;function Rt(t,e,r,i,n,a,o,s){var l=1,h=1,c=1;t:for(var u=a;n<=u;u--)for(var _=s;o<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+i)%f)continue}if(1<r)if(u<(e+i)%f)continue;0<d&&(l=d,h=u,c=p);break t}return{n:l,ps:h,pd:c}}function Ot(t,e,r,i,n,a){var o=n-e,s=i-r,r=r-e,e=n-i;if("dotted"===t)return Rt(o,r,e,s,a,a,Math.max(1,.25*a),2*a);n=Rt(o,r,e,s,a,3*a,Math.max(1,.25*a),2*a),i=n.n,t=n.ps,n=n.pd;return 1===i?Rt(o,r,e,s,a,a,Math.max(1,.25*a),2*a):{n:i,ps:t,pd:n}}function St(t,e,r,i,n,a,o,s,l,h,c,u,_,f){var d=xt(_,2),p=d[0],g=d[1],_=xt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,A,M,T,C,R,O,S=n+p-(n-i),k=a-d+(o-a),w=[],I=[],L=[],D=0,P=u.length;D<P;D++){var N,F,B,G=u[D];G[1][0]<S?w.push(G):G[0][0]>k?L.push(G):G[1][0]>k&&G[0][0]<S?(N=S<n?s+Math.tan(e)*(S-i):l,F=a<k?s+Math.tan(r)*(o-k):l,w.push([G[0],[S,s],[S,N],G[3]]),S<k&&(n<S&&k<a?I.push([[S,s],[k,s],[k,l],[S,l]]):n<S?(I.push([[S,s],[a,s],[a,l],[S,l]]),I.push([[a,s],[k,s],[k,F],[a,l]])):k<a?(I.push([[S,s],[n,s],[n,l],[S,N]]),I.push([[n,s],[k,s],[k,l],[n,l]])):(I.push([[S,s],[n,s],[n,l],[S,N]]),I.push([[n,s],[a,s],[a,l],[n,l]]),I.push([[a,s],[k,s],[k,F],[a,l]]))),L.push([[k,s],G[1],G[2],[k,F]])):G[1][0]>k?(B=a<k?s+Math.tan(r)*(o-k):l,I.push([G[0],[k,s],[k,B],G[3]]),L.push([[k,s],G[1],G[2],[k,B]])):G[0][0]<S?(B=S<n?s+Math.tan(e)*(S-i):l,w.push([G[0],[S,s],[S,B],G[3]]),I.push([[S,s],G[1],G[2],[S,B]])):I.push(G)}w.length&&(m=n-i<p&&t<g,_=Math.atan((n-i)/(l-s)),b=(E=(v=g)-(l-s))/(p-(n-i)),p=xt((A=kt(w[0][0],w[0][1],S,x=s+g,y=v/p,v,!0,Math.tan(_)*v))[0],2),R=p[0],O=p[1],m&&(_=xt((M=kt(w[0][3],w[0][2],S,x,b,E,!0,Math.tan(_)*E))[0],2),T=_[0],C=_[1]),w.forEach(function(t,e){var r,i;0===e?(r=A,m&&(i=M)):(r=kt(t[0],t[1],S,x,y,v),m&&(i=kt(t[3],t[2],S,x,b,E)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],R,O,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),m){for(var o=0,s=i.length;o<s;o++)Ht(i[o],T,C,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var Y,H,W,U,X,V,K,z,$,j,Z,q,J=L.length;return J&&(Y=o-a<d&&t<f,t=Math.atan((o-a)/(l-s)),V=(X=(H=f)-(l-s))/(d-(o-a)),d=xt((K=wt(L[J-1][0],L[J-1][1],k,U=s+f,W=H/d,H,!0,Math.tan(t)*H))[K.length-1],2),Z=d[0],q=d[1],Y&&(t=xt((z=wt(L[J-1][3],L[J-1][2],k,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),$=t[0],j=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,Y&&(i=z)):(r=wt(t[0],t[1],k,U,W,H),Y&&(i=wt(t[3],t[2],k,U,V,X)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],Z,q,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),Y){for(var o=0,s=i.length;o<s;o++)Ht(i[o],$,j,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),w.concat(I).concat(L)}function kt(t,e,r,i,n,a,o,s){var l,h,c=xt(t,2),u=c[0],_=c[1],t=xt(e,2),c=t[0],e=t[1],t=(-u+r)*n,u=Math.atan((-c+r)*n/(i-e)),c=r-Math.sin(u)*a/n,e=i-Math.cos(u)*a;if(h=o?(f=Math.atan(s*n/a),l=Math.sqrt(Math.tan(f)/2),h=2*Math.atan(l/(1+l)),f=.5*Math.PI-h,l=r-Math.cos(h)*a/n,i-Math.sin(h)*a):(f=Math.atan(t/(i-_)),l=r-Math.sin(f)*a/n,i-Math.cos(f)*a),f===u)return[[l,h]];var t=Q.h(Math.abs(f-u))*a,_=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),a=Math.atan(t/a),f=f-a,a=u+a;return[[l,h],[r-Math.sin(f)*_/n,i-Math.cos(f)*_],[r-Math.sin(a)*_/n,i-Math.cos(a)*_],[c,e]]}function wt(t,e,r,i,n,a,o,s){var l,h,c,u=xt(t,2),_=u[0],f=u[1],t=xt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(i-f)),_=r+Math.sin(u)*a/n,f=i-Math.cos(u)*a;if(c=o?(l=Math.atan(s*n/a),h=Math.sqrt(Math.tan(l)/2),c=2*Math.atan(h/(1+h)),l=.5*Math.PI-c,h=r+Math.cos(c)*a/n,i-Math.sin(c)*a):(l=Math.atan(t/(i-e)),h=r+Math.sin(l)*a/n,i-Math.cos(l)*a),u===l)return[[_,f]];t=Q.h(Math.abs(u-l))*a,e=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),a=Math.atan(t/a),u+=a,a=l-a;return[[_,f],[r+Math.sin(u)*e/n,i-Math.cos(u)*e],[r+Math.sin(a)*e/n,i-Math.cos(a)*e],[h,c]]}function It(t,e,r,i,n,a,o,s,l,h,c,u,_,f){var d=xt(_,2),p=d[0],g=d[1],_=xt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,A,M,T,C,R,O,S=l+g-(l-s),k=h-f+(c-h),w=[],I=[],L=[],D=0,P=u.length;D<P;D++){var N,F,B,G=u[D];G[2][1]<S?w.push(G):G[1][1]>k?L.push(G):G[2][1]>k&&G[1][1]<S?(N=S<l?a+Math.tan(r)*(l-S):a,F=h<k?a+Math.tan(e)*(k-h):a,w.push([G[0],G[1],[o,S],[N,S]]),S<k&&(k<h&&l<S?I.push([[a,S],[o,S],[o,k],[a,k]]):l<S?(I.push([[a,l],[o,l],[o,h],[a,h]]),I.push([[a,h],[o,h],[o,k],[F,k]])):k<h?(I.push([[N,S],[o,S],[o,l],[a,l]]),I.push([[a,l],[o,l],[o,k],[a,k]])):(I.push([[N,S],[o,S],[o,l],[a,l]]),I.push([[a,l],[o,l],[o,h],[a,h]]),I.push([[a,h],[o,h],[o,k],[F,k]]))),L.push([[F,k],[o,k],G[2],G[3]])):G[2][1]>k?(B=h<k?a+Math.tan(e)*(k-h):a,I.push([G[0],G[1],[o,k],[B,k]]),L.push([[B,k],[o,k],G[2],G[3]])):G[1][1]<S?(B=S<l?a+Math.tan(r)*(l-S):a,w.push([G[0],G[1],[o,S],[B,S]]),I.push([[B,S],[o,S],G[2],G[3]])):I.push(G)}w.length&&(m=l-s<g&&t<p,_=Math.atan((o-a)/(l-s)),b=(E=(v=g)-(l-s))/(p-(o-a)),p=xt((A=Lt(w[0][1],w[0][2],x=o-p,S,y=v/p,v,!0,Math.tan(_)*v))[A.length-1],2),R=p[0],O=p[1],m&&(_=xt((M=Lt(w[0][0],w[0][3],x,S,b,E,!0,Math.tan(_)*E))[M.length-1],2),T=_[0],C=_[1]),w.forEach(function(t,e){var r,i;0===e?(r=A,m&&(i=M)):(r=Lt(t[1],t[2],x,S,y,v),m&&(i=Lt(t[0],t[3],x,S,b,E)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],R,O,2);if(m){for(var o=0,s=i.length;o<s;o++)Ht(i[o],T,C,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var Y,H,W,U,X,V,K,z,$,j,Z,q,J=L.length;return J&&(Y=c-h<f&&t<d,t=Math.atan((o-a)/(c-h)),V=(X=(H=f)-(c-h))/(d-(o-a)),d=xt((K=Dt(L[J-1][1],L[J-1][2],U=o-d,k,W=H/d,H,!0,Math.tan(t)*H))[0],2),Z=d[0],q=d[1],Y&&(t=xt((z=Dt(L[J-1][0],L[J-1][3],U,k,V,X,!0,Math.tan(t)*X))[0],2),$=t[0],j=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,Y&&(i=z)):(r=Dt(t[1],t[2],U,k,W,H),Y&&(i=Dt(t[0],t[3],U,k,V,X)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],Z,q,3);if(Y){for(var o=0,s=i.length;o<s;o++)Ht(i[o],$,j,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),w.concat(I).concat(L)}function Lt(t,e,r,i,n,a,o,s){var l,h,c=xt(t,2),u=c[0],_=c[1],t=xt(e,2),c=t[0],e=t[1],t=(u-r)*n,u=Math.atan((c-r)*n/(i-e)),c=r+Math.sin(u)*a/n,e=i-Math.cos(u)*a;if(h=o?(f=Math.atan(s*n/a),l=Math.sqrt(Math.tan(f)/2),h=2*Math.atan(l/(1+l)),f=.5*Math.PI-h,l=r+Math.cos(h)*a/n,i-Math.sin(h)*a):(f=Math.atan(t/(i-_)),l=r+Math.sin(f)*a/n,i-Math.cos(f)*a),f===u)return[[l,h]];var t=Q.h(Math.abs(f-u))*a,_=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),t=Math.atan(t/a),a=f+t,f=r+Math.sin(a)*_/n,a=i-Math.cos(a)*_,t=u-t;return[[c,e],[r+Math.sin(t)*_/n,i-Math.cos(t)*_],[f,a],[l,h]]}function Dt(t,e,r,i,n,a,o,s){var l,h,c,u=xt(t,2),_=u[0],f=u[1],t=xt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(f-i)),_=r+Math.sin(u)*a/n,f=i+Math.cos(u)*a;if(c=o?(l=Math.atan(s*n/a),h=Math.sqrt(Math.tan(l)/2),c=2*Math.atan(h/(1+h)),l=.5*Math.PI-c,h=r+Math.cos(c)*a/n,i+Math.sin(c)*a):(l=Math.atan(t/(e-i)),h=r+Math.sin(l)*a/n,i+Math.cos(l)*a),u===l)return[[_,f]];t=Q.h(Math.abs(u-l))*a,e=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),t=Math.atan(t/a),a=u-t,u=r+Math.sin(a)*e/n,a=i+Math.cos(a)*e,t=l+t;return[[h,c],[r+Math.sin(t)*e/n,i+Math.cos(t)*e],[u,a],[_,f]]}function Pt(t,e,r,i,n,a,o,s,l,h,c,u,_,f){var d=xt(_,2),p=d[0],g=d[1],_=xt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,A,M,T,C,R,O,S=n+p-(n-i),k=a-d+(o-a),w=[],I=[],L=[],D=0,P=u.length;D<P;D++){var N,F,B,G=u[D];G[2][0]<S?w.push(G):G[3][0]>k?L.push(G):G[2][0]>k&&G[3][0]<S?(N=S<n?c-Math.tan(e)*(S-i):l,F=a<k?c-Math.tan(r)*(o-k):h,w.push([G[0],[S,N],[S,c],G[3]]),S<k&&(n<S&&k<a?I.push([[S,h],[k,h],[k,c],[S,c]]):n<S?(I.push([[S,h],[a,h],[a,c],[S,c]]),I.push([[a,h],[k,F],[k,c],[a,c]])):k<a?(I.push([[S,N],[n,h],[n,c],[S,c]]),I.push([[n,h],[k,h],[k,c],[n,c]])):(I.push([[S,N],[n,h],[n,c],[S,c]]),I.push([[n,h],[a,h],[a,c],[n,c]]),I.push([[a,h],[k,F],[k,c],[a,c]]))),L.push([[k,F],G[1],G[2],[k,c]])):G[2][0]>k?(B=a<k?c-Math.tan(r)*(o-k):h,I.push([G[0],[k,B],[k,c],G[3]]),L.push([[k,B],G[1],G[2],[k,c]])):G[3][0]<S?(B=S<n?c-Math.tan(e)*(S-i):h,w.push([G[0],[S,B],[S,c],G[3]]),I.push([[S,B],G[1],G[2],[S,c]])):I.push(G)}w.length&&(m=n-i<p&&t<g,_=Math.atan((n-i)/(c-h)),b=(E=(v=g)-(c-h))/(p-(n-i)),p=xt((A=Nt(w[0][3],w[0][2],S,x=c-g,y=v/p,v,!0,Math.tan(_)*v))[0],2),R=p[0],O=p[1],m&&(_=xt((M=Nt(w[0][0],w[0][1],S,x,b,E,!0,Math.tan(_)*E))[0],2),T=_[0],C=_[1]),w.forEach(function(t,e){var r,i;0===e?(r=A,m&&(i=M)):(r=Nt(t[3],t[2],S,x,y,v),m&&(i=Nt(t[0],t[1],S,x,b,E)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],R,O,4);if(m){for(var o=0,s=i.length;o<s;o++)Ht(i[o],T,C,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var Y,H,W,U,X,V,K,z,$,j,Z,q,J=L.length;return J&&(Y=o-a<d&&t<f,t=Math.atan((o-a)/(c-h)),V=(X=(H=f)-(c-h))/(d-(o-a)),d=xt((K=Ft(L[J-1][3],L[J-1][2],k,U=c-f,W=H/d,H,!0,Math.tan(t)*H))[K.length-1],2),Z=d[0],q=d[1],Y&&(t=xt((z=Ft(L[J-1][0],L[J-1][1],k,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),$=t[0],j=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,Y&&(i=z)):(r=Ft(t[3],t[2],k,U,W,H),Y&&(i=Ft(t[0],t[1],k,U,V,X)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],Z,q,5);if(Y){for(var o=0,s=i.length;o<s;o++)Ht(i[o],$,j,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),w.concat(I).concat(L)}function Nt(t,e,r,i,n,a,o,s){var l,h,c=xt(t,2),u=c[0],_=c[1],t=xt(e,2),c=t[0],e=t[1],t=(-u+r)*n,u=Math.atan((-c+r)*n/(e-i)),c=r-Math.sin(u)*a/n,e=i+Math.cos(u)*a;if(h=o?(f=Math.atan(s*n/a),l=Math.sqrt(Math.tan(f)/2),h=2*Math.atan(l/(1+l)),f=.5*Math.PI-h,l=r-Math.cos(h)*a/n,i+Math.sin(h)*a):(f=Math.atan(t/(_-i)),l=r-Math.sin(f)*a/n,i+Math.cos(f)*a),f===u)return[[l,h]];var t=Q.h(Math.abs(f-u))*a,_=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),a=Math.atan(t/a),f=f-a,a=u+a;return[[l,h],[r-Math.sin(f)*_/n,i+Math.cos(f)*_],[r-Math.sin(a)*_/n,i+Math.cos(a)*_],[c,e]]}function Ft(t,e,r,i,n,a,o,s){var l,h,c,u=xt(t,2),_=u[0],f=u[1],t=xt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(f-i)),_=r+Math.sin(u)*a/n,f=i+Math.cos(u)*a;if(c=o?(l=Math.atan(s*n/a),h=Math.sqrt(Math.tan(l)/2),c=2*Math.atan(h/(1+h)),l=.5*Math.PI-c,h=r+Math.cos(c)*a/n,i+Math.sin(c)*a):(l=Math.atan(t/(e-i)),h=r+Math.sin(l)*a/n,i+Math.cos(l)*a),u===l)return[[_,f]];t=Q.h(Math.abs(u-l))*a,e=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),a=Math.atan(t/a),u+=a,a=l-a;return[[_,f],[r+Math.sin(u)*e/n,i+Math.cos(u)*e],[r+Math.sin(a)*e/n,i+Math.cos(a)*e],[h,c]]}function Bt(t,e,r,i,n,a,o,s,l,h,c,u,_,f){var d=xt(_,2),p=d[0],g=d[1],_=xt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,A,M,T,C,R,O,S=l+g-(l-s),k=h-f+(c-h),w=[],I=[],L=[],D=0,P=u.length;D<P;D++){var N,F,B,G=u[D];G[3][1]<S?w.push(G):G[0][1]>k?L.push(G):G[3][1]>k&&G[0][1]<S?(N=S<l?n-Math.tan(r)*(l-S):n,F=h<k?n-Math.tan(e)*(k-h):n,w.push([G[0],G[1],[N,S],[i,S]]),S<k&&(k<h&&l<S?I.push([[i,S],[n,S],[n,k],[i,k]]):l<S?(I.push([[i,S],[n,S],[n,h],[i,h]]),I.push([[i,h],[n,h],[F,k],[i,k]])):k<h?(I.push([[i,S],[N,S],[n,l],[i,l]]),I.push([[i,l],[n,l],[n,k],[i,k]])):(I.push([[i,S],[N,S],[n,l],[i,l]]),I.push([[i,l],[n,l],[n,h],[i,h]]),I.push([[i,h],[n,h],[F,k],[i,k]]))),L.push([[i,k],[F,k],G[2],G[3]])):G[3][1]>k?(B=h<k?n-Math.tan(e)*(k-h):n,I.push([G[0],G[1],[B,k],[i,k]]),L.push([[i,k],[B,k],G[2],G[3]])):G[1][1]<S?(B=S<l?n-Math.tan(r)*(l-S):n,w.push([G[0],G[1],[B,S],[i,S]]),I.push([[i,S],[B,S],G[2],G[3]])):I.push(G)}w.length&&(m=l-s<g&&t<p,_=Math.atan((n-i)/(l-s)),b=(E=(v=g)-(l-s))/(p-(n-i)),p=xt((A=Gt(w[0][0],w[0][3],x=i+p,S,y=v/p,v,!0,Math.tan(_)*v))[A.length-1],2),R=p[0],O=p[1],m&&(_=xt((M=Gt(w[0][1],w[0][2],x,S,b,E,!0,Math.tan(_)*E))[M.length-1],2),T=_[0],C=_[1]),w.forEach(function(t,e){var r,i;0===e?(r=A,m&&(i=M)):(r=Gt(t[0],t[3],x,S,y,v),m&&(i=Gt(t[1],t[2],x,S,b,E)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],R,O,6);if(m){for(var o=0,s=i.length;o<s;o++)Ht(i[o],T,C,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var Y,H,W,U,X,V,K,z,$,j,Z,q,J=L.length;return J&&(Y=c-h<f&&t<d,t=Math.atan((n-i)/(c-h)),V=(X=(H=f)-(c-h))/(d-(n-i)),d=xt((K=Yt(L[J-1][0],L[J-1][3],U=i+d,k,W=H/d,H,!0,Math.tan(t)*H))[0],2),Z=d[0],q=d[1],Y&&(t=xt((z=Yt(L[J-1][1],L[J-1][2],U,k,V,X,!0,Math.tan(t)*X))[0],2),$=t[0],j=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,Y&&(i=z)):(r=Yt(t[0],t[3],U,k,W,H),Y&&(i=Yt(t[1],t[2],U,k,V,X)));for(var n=0,a=r.length;n<a;n++)Ht(r[n],Z,q,7);if(Y){for(var o=0,s=i.length;o<s;o++)Ht(i[o],$,j,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),w.concat(I).concat(L)}function Gt(t,e,r,i,n,a,o,s){var l,h,c=xt(t,2),u=c[0],_=c[1],t=xt(e,2),c=t[0],e=t[1],t=(r-u)*n,u=Math.atan((r-c)*n/(i-e)),c=r-Math.sin(u)*a/n,e=i-Math.cos(u)*a;if(h=o?(f=Math.atan(s*n/a),l=Math.sqrt(Math.tan(f)/2),h=2*Math.atan(l/(1+l)),f=.5*Math.PI-h,l=r-Math.cos(h)*a/n,i-Math.sin(h)*a):(f=Math.atan(t/(i-_)),l=r-Math.sin(f)*a/n,i-Math.cos(f)*a),f===u)return[[l,h]];var t=Q.h(Math.abs(f-u))*a,_=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),t=Math.atan(t/a),a=f+t,f=r-Math.sin(a)*_/n,a=i-Math.cos(a)*_,t=u-t;return[[c,e],[r-Math.sin(t)*_/n,i-Math.cos(t)*_],[f,a],[l,h]]}function Yt(t,e,r,i,n,a,o,s){var l,h,c,u=xt(t,2),_=u[0],f=u[1],t=xt(e,2),u=t[0],e=t[1],t=(r-u)*n,u=Math.atan((r-_)*n/(f-i)),_=r-Math.sin(u)*a/n,f=i+Math.cos(u)*a;if(c=o?(l=Math.atan(s*n/a),h=Math.sqrt(Math.tan(l)/2),c=2*Math.atan(h/(1+h)),l=.5*Math.PI-c,h=r-Math.cos(c)*a/n,i+Math.sin(c)*a):(l=Math.atan(t/(e-i)),h=r-Math.sin(l)*a/n,i+Math.cos(l)*a),u===l)return[[_,f]];t=Q.h(Math.abs(u-l))*a,e=Math.sqrt(Math.pow(a,2)+Math.pow(t,2)),t=Math.atan(t/a),a=u-t,u=r-Math.sin(a)*e/n,a=i+Math.cos(a)*e,t=l+t;return[[h,c],[r-Math.sin(t)*e/n,i+Math.cos(t)*e],[u,a],[_,f]]}function Ht(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Wt=[mt,vt,Tt,Mt];var Ut={calPoints:function(t,e,r,i,n,a,o,s,l,h,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var e=0===_||2===_?Ot(e,n,a,o,s,t):Ot(e,l,h,c,u,t),g=e.n,m=e.ps,v=e.pd;if(1<g){for(var y=0;y<g;y++){var x=y===g-1,E=void 0,b=void 0,A=void 0,M=(E=0===_||2===_?y?n+m*y+v*y:n:y?l+m*y+v*y:l)+m;0===_?M<=a?x?p.push([[n,l],[s,l],[o,h],[a,h]]):(b=l+(E-n)*Math.tan(r),A=l+(M-n)*Math.tan(r),p.push([[E,l],[M,l],[M,A],[E,b]])):o<=E?(b=l+(s-E)*Math.tan(i),A=l+(s-M)*Math.tan(i),x?p.push([[E,l],[s,l],[s,l],[E,b]]):p.push([[E,l],[M,l],[M,A],[E,b]])):E<a?(b=l+(E-n)*Math.tan(r),p.push([[E,l],[a,l],[a,h],[E,b]]),x?(p.push([[a,l],[o,l],[o,h],[a,h]]),p.push([[o,l],[s,l],[s,l],[a,h]])):o<M?(A=l+(s-M)*Math.tan(i),p.push([[a,l],[o,l],[o,h],[a,h]]),p.push([[o,l],[M,l],[M,A],[o,h]])):p.push([[a,l],[M,l],[M,h],[a,h]])):o<M?(b=l+(s-M)*Math.tan(i),E<a?(A=l+(E-n)*Math.tan(r),p.push([[E,l],[a,l],[a,h],[E,A]]),p.push([[a,l],[o,l],[o,h],[a,h]])):p.push([[E,l],[o,l],[o,h],[E,h]]),x?p.push([[o,l],[s,l],[s,l],[o,h]]):p.push([[o,l],[M,l],[M,b],[o,h]])):x?p.push([[E,l],[s,l],[o,h],[E,h]]):p.push([[E,l],[M,l],[M,h],[E,h]]):1===_?M<=h?x?p.push([[o,h],[s,l],[s,u],[o,c]]):(b=s-(E-l)*Math.tan(r),A=s-(M-l)*Math.tan(r),p.push([[b,E],[s,E],[s,M],[A,M]])):c<=E?(b=o+(E-c)*Math.tan(i),A=o+(M-c)*Math.tan(i),x?p.push([[b,E],[s,E],[s,u],[s,u]]):p.push([[b,E],[s,E],[s,M],[A,M]])):E<h?(b=o+(h-E)*Math.tan(r),p.push([[b,E],[s,E],[s,h],[o,h]]),x?(p.push([[o,h],[s,h],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,u],[s,u]])):c<M?(A=o+(M-c)*Math.tan(i),p.push([[o,h],[s,h],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,M],[A,M]])):p.push([[o,h],[s,h],[s,M],[o,M]])):c<M?(b=o+(M-c)*Math.tan(i),E<h?(A=o+(h-E)*Math.tan(r),p.push([[A,E],[s,E],[s,h],[o,h]]),p.push([[o,h],[s,h],[s,c],[o,c]]),x?p.push([[o,c],[s,c],[s,s],[s,s]]):p.push([[o,c],[s,c],[s,M],[b,M]])):(p.push([[o,E],[s,E],[s,c],[o,c]]),x?p.push([[o,c],[s,c],[s,u],[s,u]]):p.push([[o,c],[s,c],[s,M],[b,M]]))):x?p.push([[o,E],[s,E],[s,u],[o,c]]):p.push([[o,E],[s,E],[s,M],[o,M]]):2===_?M<=a?x?p.push([[n,u],[a,c],[o,c],[s,u]]):(b=u-(E-n)*Math.tan(r),A=u-(M-n)*Math.tan(r),p.push([[E,b],[M,A],[M,u],[E,u]])):o<=E?(b=u-(s-E)*Math.tan(i),A=u-(s-M)*Math.tan(i),x?p.push([[E,b],[s,u],[s,u],[E,u]]):p.push([[E,b],[M,A],[M,u],[E,u]])):E<a?(b=u-(E-n)*Math.tan(r),p.push([[E,b],[a,c],[a,u],[E,u]]),x?(p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[s,u],[s,u],[o,u]])):o<M?(A=u-(M-o)*Math.tan(i),p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[M,A],[M,u],[o,u]])):p.push([[a,c],[M,c],[M,u],[a,u]])):o<M?(b=u-(s-M)*Math.tan(i),E<a?(A=u-(E-o)*Math.tan(r),p.push([[E,A],[a,c],[a,u],[E,u]]),p.push([[a,c],[o,c],[o,u],[a,u]])):p.push([[E,c],[o,c],[o,u],[E,u]]),x?p.push([[o,c],[s,u],[s,u],[o,u]]):p.push([[o,c],[M,b],[M,u],[o,u]])):x?p.push([[E,c],[o,c],[s,u],[E,u]]):p.push([[E,c],[M,c],[M,u],[E,u]]):3===_&&(M<=h?x?p.push([[n,l],[a,h],[a,c],[n,u]]):(b=n+(E-l)*Math.tan(r),A=n+(M-l)*Math.tan(r),p.push([[n,E],[b,E],[A,M],[n,M]])):c<=E?(b=n+(u-E)*Math.tan(i),A=n+(u-M)*Math.tan(i),x?p.push([[n,E],[b,E],[n,u],[n,u]]):p.push([[n,E],[b,E],[A,M],[n,M]])):E<h?(b=n+(E-l)*Math.tan(r),p.push([[n,E],[b,E],[a,h],[n,h]]),x?(p.push([[n,h],[a,h],[a,c],[n,c]]),p.push([[n,c],[a,c],[n,u],[n,u]])):c<M?(A=n+(u-M)*Math.tan(i),p.push([[n,h],[a,h],[a,c],[n,c]]),p.push([[n,c],[a,c],[A,M],[n,M]])):p.push([[n,h],[a,h],[a,M],[n,M]])):c<M?(b=n+(u-M)*Math.tan(i),E<h?(A=n+(E-l)*Math.tan(r),p.push([[n,E],[A,E],[a,h],[n,l]]),p.push([[n,h],[a,h],[a,c],[n,c]])):p.push([[n,E],[a,E],[a,c],[n,c]]),x?p.push([[n,c],[a,c],[n,u],[n,u]]):p.push([[n,c],[a,c],[b,M],[n,M]])):x?p.push([[n,E],[a,E],[a,c],[n,u]]):p.push([[n,E],[a,E],[a,M],[n,M]]))}if(0===_)return St(t,r,i,n,a,o,s,l,h,0,0,p,f,d);if(1===_)return It(t,r,i,0,0,o,s,l,h,c,u,p,f,d);if(2===_)return Pt(t,r,i,n,a,o,s,0,h,c,u,p,f,d);if(3===_)return Bt(t,r,i,n,a,0,0,l,h,c,u,p,f,d)}}return 0===_?(n<a&&p.push([[n,l],[a,l],[a,h],[n,l]]),p.push([[a,l],[o,l],[o,h],[a,h]]),o<s&&p.push([[o,l],[s,l],[s,l],[o,h]]),St(t,r,i,n,a,o,s,l,h,0,0,p,f,d)):1===_?(l<h&&p.push([[s,l],[s,l],[s,h],[o,h]]),p.push([[o,h],[s,h],[s,c],[o,c]]),c<u&&p.push([[o,c],[s,c],[s,u],[s,u]]),It(t,r,i,0,0,o,s,l,h,c,u,p,f,d)):2===_?(n<a&&p.push([[n,u],[a,c],[a,u],[n,u]]),p.push([[a,c],[o,c],[o,u],[a,u]]),o<s&&p.push([[o,c],[s,u],[s,u],[o,u]]),Pt(t,r,i,n,a,o,s,0,h,c,u,p,f,d)):3===_?(l<h&&p.push([[n,l],[n,l],[a,h],[n,h]]),p.push([[n,h],[a,h],[a,c],[n,c]]),c<u&&p.push([[n,c],[a,c],[n,u],[n,u]]),Bt(t,r,i,n,a,0,0,l,h,c,u,p,f,d)):void 0},calRadius:function(t,e,r,i,n,a,o,s){var l=(c=xt(n,2))[0],h=c[1],n=(u=xt(a,2))[0],c=u[1],u=(a=xt(o,2))[0],o=a[1],s=(a=xt(s,2))[0],a=a[1],l=Math.max(l,0),h=Math.max(h,0),n=Math.max(n,0),c=Math.max(c,0),u=Math.max(u,0),o=Math.max(o,0),s=Math.max(s,0),a=Math.max(a,0);if(_=0<l&&0<h||0<n&&0<c||0<u&&0<o||0<s&&0<a?!0:_){var _=[];return 0<l&&0<h?(_.push([t,e+h]),_.push([t,e+h*(1-rt),t+l*(1-rt),e,t+l,e])):_.push([t,e]),0<n&&0<c?(_.push([t+r-n,e]),_.push([t+r-n*(1-rt),e,t+r,e+c*(1-rt),t+r,e+c])):_.push([t+r,e]),0<u&&0<o?(_.push([t+r,e+i-o]),_.push([t+r,e+i-o*(1-rt),t+r-u*(1-rt),e+i,t+r-u,e+i])):_.push([t+r,e+i]),0<s&&0<a?(_.push([t+s,e+i]),_.push([t+s*(1-rt),e+i,t,e+i-a*(1-rt),t,e+i-a])):_.push([t,e+i]),_}},calBorderRadius:function(a,o,e,s,r){var i=!0;Wt.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===it?Math.max(0,t[0]):t[1]===nt?Math.max(0,t[0]*(e?o:a)*.01):t[1]===at?Math.max(0,t[0]*r.computedStyle[Ct]):t[1]===ot?Math.max(0,t[0]*r.width*.01):t[1]===st?Math.max(0,t[0]*r.height*.01):0):0})}),i||Wt.forEach(function(t,e){var r=e%2==0?0:1,i=r?o:a,n=s[t],t=s[Wt[(e+1)%4]];n[r]+t[r]>i&&(n[r]>=(e=.5*i)&&t[r]>=e?n[r]=t[r]=e:n[r]>e?n[r]=i-t[r]:t[r]>e&&(t[r]=i-n[r]))})},calBorderRadiusInline:function(t,e,r){var i,n;t.length&&(i=t[0],n=t[t.length-1]);var a=i?i.outerWidth:0,o=i?i.outerHeight:0;a+=r[ut]+r[dt],o+=r[_t]+r[ft]+r[gt]+r[pt],[mt,Mt].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===it?Math.max(0,t[0]):Math.max(0,t[0]*(e?o:a)*.01),t=Math.min(e?o:a,t);return t})}),a=n?n.outerWidth:0,o=n?n.outerHeight:0,[vt,Tt].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===it?Math.max(0,t[0]):Math.max(0,t[0]*(e?o:a)*.01),t=Math.min(e?o:a,t);return t})})},renderBorder:function(t,e,r,i,n,a,o){var s;e===Et.CANVAS||e===Et.WEBGL?(r.beginPath(),r.fillStyle!==n&&(r.fillStyle=n),i.forEach(function(t){lt(r,t,a,o)}),r.fill(),r.closePath()):e===Et.SVG&&(s="",i.forEach(function(t){s+=ht(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",n]]}))}},Xt={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}},Vt={}.toString;function Kt(e){return function(t){return Vt.call(t)==="[object "+e+"]"}}var zt=Kt("Object"),$t=Kt("String"),jt=Kt("Function"),Zt=Kt("Number"),Jt=Kt("Boolean"),Qt=Kt("Date"),te={}.hasOwnProperty,ee=te.toString,re=ee.call(Object);function ie(t){return null==t}function ne(t){return ie(t)?"":t.toString()}function ae(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=ae(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var i="<g>";t.bb.forEach(function(t){i+=ae(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=ae(t))}),i+="</g>";var n=t.opacity,a=t.transform,o=t.visibility,s=t.mask,l=t.overflow,h=t.filter,t=t.mixBlendMode;return"<g"+(1!==n&&void 0!==n?' opacity="'+n+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(l?' clip-path="'+l+'"':"")+(h||t?' style="':"")+(h?"filter:"+h+";":"")+(t?"mix-blend-mode:"+t+";":"")+(h||t?'"':"")+">"+i+"</g>"}}function oe(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function se(t,e){for(var r=t.length?t[0]:"",i=1,n=t.length;i<n;i++)r+=e+t[i];return r}function le(t){if(!t||"[object Object]"!==Vt.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=te.call(t,"constructor")&&t.constructor;return"function"==typeof t&&ee.call(t)===re}var he={isObject:zt,isString:$t,isFunction:jt,isNumber:Zt,isBoolean:Jt,isDate:Qt,isNil:ie,isPrimitive:function(t){return he.isNil(t)||he.isBoolean(t)||he.isString(t)||he.isNumber(t)},isAuto:function(t){return ie(t)||"auto"===t},isPlainObject:le,stringify:ne,joinSourceArray:function t(e){for(var r="",i=0,n=e.length;i<n;i++){var a=e[i];Array.isArray(a)?r+=t(a):r+=ne(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=oe(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=ae(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=ae(t))}),e+="</g>"},joinVd:ae,joinDef:oe,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],ie(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+se(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+se(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+se(t,",")+")";if(3===t.length)return"rgba("+se(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n))e[n[0]]=n[1];else for(var a=Object.keys(n),o=a.length-1;0<=o;o--){var s=a[o];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,n=r.length;i<n;i++){var a=r[i];e.push([a,t[a]])}return e},clone:function e(r){if(ie(r)||"object"!==yt(r))return r;if(r.$$type===Xt.TYPE_VD||r.$$type===Xt.TYPE_GM||r.$$type===Xt.TYPE_CP)return r;if(he.isDate(r))return new Date(r);if(!le(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,n=e.length;i<n;i++){var a=e[i],o=r[i],s=Array.isArray(a),l=Array.isArray(o);if(s&&l){if(!t(a,o))return!1}else{if(s||l)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(zt(e)&&zt(r)){for(var i={},n=0,a=Object.keys(e),o=a.length;n<o;n++){var s=a[n];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;i[s]=!0}for(var l=0,h=Object.keys(r),c=h.length;l<c;l++){var u=h[l];if(!i.hasOwnProperty(u))return!1}}else{if(Qt(e)&&Qt(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==yt(e))return t;for(var i=0,n=(r=r||Object.keys(e)).length;i<n;){var a=r[i];t[a]=e[a],i++}return t},joinArr:se,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!qt.isE(e)){var n=xt(t,4),a=n[0],o=n[1],s=n[2],n=n[3];r&&(a-=r,s+=r),i&&(o-=i,n+=i);var l=[s,o,a,n,s,n],n=xt(qt.calPoint([a,o],e),4),a=n[0],o=n[1];(d=n[3])&&1!==d&&(a/=d,o/=d);for(var h=a,c=o,u=a,_=o,f=0;f<6;f+=2){var d,p=l[f],g=l[f+1],m=xt(qt.calPoint([p,g],e),4),p=m[0],g=m[1];(d=m[3])&&1!==d&&(p/=d,g/=d),h=Math.min(h,p),u=Math.max(u,p),c=Math.min(c,g),_=Math.max(_,g)}t=[h,c,u,_]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},ce={flag:!1},ue={list:[],data:{},charWidth:{},padding:{},ELLIPSIS:"…"},_e={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},fe=qt.calPoint;function de(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;r=t.getShaderInfoLog(e);throw t.deleteShader(e),new Error("Failed to compile shader: "+r)}function pe(t,e,r,i){var n=xt(t,4),a=n[0],o=n[1],t=n[2],n=n[3];return void 0===t&&(t=0),(n=void 0===n?1:n)&&1!==n&&(a/=n,o/=n,t/=n),o===r?o=0:(o=(o-r)/r,i&&(o=-o)),[(a=a===e?0:(a-e)/e)*n,o*n,t*n,n]}function ge(t,e,r,i,n){var a=t.createTexture();return me(t,a,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,n,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),a}function me(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var ve,ye={initShaders:function(t,e,r){if(!(r=function(t,e,r){var i=de(t,t.VERTEX_SHADER,e),n=de(t,t.FRAGMENT_SHADER,r);if(!i||!n)return null;e=t.createProgram();if(!e)return null;if(e.vertexShader=i,e.fragmentShader=n,t.attachShader(e,i),t.attachShader(e,n),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return e;r=t.getProgramInfoLog(e);throw t.deleteProgram(e),t.deleteShader(n),t.deleteShader(i),new Error("Failed to link program: "+r)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),r},createTexture:ge,bindTexture:me,drawTextureCache:function(r,t,y,x,E,b){var A,M=[],T=[],C=[],R=[0],O=[R];t.forEach(function(t,e){var r=xt(t,5),i=r[0],n=r[1],a=r[2],o=r[3],s=r[4];e?(v=y[i.page.uuid],A!==v&&(R=[0,A=v],O.push(R))):(A=y[i.page.uuid],R[1]=A);var l=i.x,h=i.y,c=i.width,u=i.height,_=i.page,f=i.bbox,d=f[0],p=f[1],g=d+(o||0),m=p+u+(s||0),t=d+c+(o||0),r=p+(s||0),e=xt(fe([g,m],a),4),v=e[0],i=e[1],f=e[3],d=xt(fe([t,m],a),4),o=d[0],p=d[1],s=d[3],e=xt(fe([t,r],a),4),m=e[0],d=e[1],t=e[3],e=xt(fe([g,r],a),4),g=e[0],r=e[1],a=e[3],e=xt(pe([v,i,0,f],x,E,b),2),v=e[0],i=e[1],e=xt(pe([o,p,0,s],x,E,b),2),o=e[0],p=e[1],e=xt(pe([m,d,0,t],x,E,b),2),m=e[0],d=e[1],e=xt(pe([g,r,0,a],x,E,b),2),g=e[0],r=e[1];M.push(v,i,0,f,g,r,0,a,o,p,0,s,g,r,0,a,o,p,0,s,m,d,0,t);t=l/_.width,u=(h+u)/_.height,c=(l+c)/_.width,_=h/_.height;T.push(t,u,t,_,c,u,t,_,c,u,c,_),C.push(n,n,n,n,n,n),R[0]++});var e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(M),r.STATIC_DRAW);var i=r.getAttribLocation(r.program,"a_position");r.vertexAttribPointer(i,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i);var n=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,new Float32Array(T),r.STATIC_DRAW);var a=r.getAttribLocation(r.program,"a_texCoords");r.vertexAttribPointer(a,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(a);var o=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,new Float32Array(C),r.STATIC_DRAW),t=r.getAttribLocation(r.program,"a_opacity"),r.vertexAttribPointer(t,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t);var s=r.getUniformLocation(r.program,"u_texture"),l=0;O.forEach(function(t){var e=xt(t,2),t=e[0],e=e[1];r.uniform1i(s,e),r.drawArrays(r.TRIANGLES,l,t*=6),l+=t}),r.deleteBuffer(e),r.deleteBuffer(n),r.deleteBuffer(o),r.disableVertexAttribArray(i),r.disableVertexAttribArray(a),r.disableVertexAttribArray(t)},drawBlur:function(e,t,r,i,n,a,o,s,l,h,c,u,_,f,d){var p=(g=xt(pe([_,h-_],c,u),2))[0],g=g[1],c=(_=xt(pe([l-_,_],c,u),2))[0],u=_[1],_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([p,u,p,g,c,u,p,g,c,u,c,g]),e.STATIC_DRAW),u=e.getAttribLocation(t,"a_position"),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(u),c=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),g=e.getAttribLocation(t,"a_texCoords"),e.vertexAttribPointer(g,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(g);var m=e.getUniformLocation(t,"u_direction");e.uniform2f(m,0,0);var v=e.getUniformLocation(t,"u_texture");e.uniform1i(v,s),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW);for(var y=100/Math.max(l,h),x=l/h,E=[],b=0;b<3;b++){var A=ge(e,null,s,l,h);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,A,0),h<=l?e.uniform2f(m,y,0):e.uniform2f(m,y*x,0),e.uniform1i(v,o),e.drawArrays(e.TRIANGLES,0,6),E.push(n);var M=ge(e,null,o,l,h);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,M,0),h<=l?e.uniform2f(m,0,y*x):e.uniform2f(m,0,y),e.uniform1i(v,s),e.drawArrays(e.TRIANGLES,0,6),n=M,E.push(A)}return e.deleteBuffer(_),e.deleteBuffer(c),e.disableVertexAttribArray(u),e.disableVertexAttribArray(g),E.forEach(function(t){return e.deleteTexture(t)}),n},drawOverflow:function(t,e,r,i,n,a,o,s){var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var h=t.getAttribLocation(t.programOverflow,"a_position");t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h);var c=r/o,h=i/s,o=(n+r)/o,i=(a+i)/s,s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([c,h,c,i,o,h,c,i,o,h,o,i]),t.STATIC_DRAW),i=t.getAttribLocation(t.programOverflow,"a_texCoords"),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i),i=t.getUniformLocation(t.programOverflow,"u_texture"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(l)},drawMask:function(t,e,r,i){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var a=t.getAttribLocation(i,"a_position");t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(i,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(i,"u_texture1");t.uniform1i(l,r),i=t.getUniformLocation(i,"u_texture2"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,n,a){var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var h=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h);var c=t.getUniformLocation(e,"u_texture1");t.uniform1i(c,r),e=t.getUniformLocation(e,"u_texture2"),t.uniform1i(e,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(l),t.disableVertexAttribArray(s),t.disableVertexAttribArray(h)},drawCm:function(t,e,r,i){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var a=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(e,"u_texture");t.uniform1i(l,r),e=t.getUniformLocation(e,"u_m"),t.uniform1fv(e,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)}},xe={},Ee={},be=[],Ae=[],Me="function"==typeof OffscreenCanvas&&he.isFunction(OffscreenCanvas.prototype.getContext);function Te(t,e,r,i,n){var a;return(a=t?i[t]||(i[t]=!ce.flag&&Me?new OffscreenCanvas(e,r):document.createElement("canvas")):(a=i===xe?be:Ae).length?a.pop():!ce.flag&&Me?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,a.height=r,ce.flag&&(a.style.width=e+"px",a.style.height=r+"px",a.setAttribute("type",i===xe?"canvas":"webgl"),t&&a.setAttribute("key",t),n&&a.setAttribute("message",n),document.body.appendChild(a)),n=i===xe?a.getContext("2d"):a.getContext("webgl",_e)||a.getContext("experimental-webgl",_e),{canvas:a,ctx:n,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===xe?be:Ae).push(this.canvas),this.available=!1}}}var Ce,Re,Oe={},Se={},ke={},we={measureText:function(){var t=ue.list,c=ue.data,u="",_=[],f=[],d=[];if(Object.keys(c).forEach(function(t){var e=c[t],r=e.ff,i=e.fs,n=e.fw,a=e.s;if(a){_.push(t),f.push(a.length);for(var o="position:absolute;font-family:".concat(r,";font-size:").concat(i,"px;font-weight:").concat(n),s=0,l=a.length;s<l;s++){var h=a.charAt(s);d.push(h),u+='<span style="'.concat(o,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}c[t].s=""}}),u){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=u;for(var r,i=e.childNodes,n=ue.charWidth,a=0,o=0,s=0,l=i.length;s<l;s++){var h=i[s];0===a&&(r=_[o]),++a===f[o]&&(o++,a=0);var p=d[s],h=window.getComputedStyle(h,null);n[r][p]=parseFloat(h.width)}t.forEach(function(t){return t.__measureCb()}),ue.list=[],ue.data={},ce.flag||document.body.removeChild(e)}},measureTextSync:function(t,e,r,i,n){i="position:absolute;font-family:".concat(e,";font-size:").concat(r,"px;font-weight:").concat(i),i='<span style="'.concat(i,'">').concat(n,'</span><span style="').concat(i,'">').concat(n).concat(n,"</span>"),n=document.createElement("div");n.style.position="absolute",n.style.left="99999px",n.style.top="-99999px",n.style.visibility="hidden",document.body.appendChild(n),n.innerHTML=i;n=n.childNodes;return 2*parseFloat(window.getComputedStyle(n[0],null).width)-parseFloat(window.getComputedStyle(n[1],null).width)},IMG:Oe,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,a=[];e.forEach(function(t,e){we.measureImg(t,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!e||!he.isString(e))return we.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,o,s=Oe[e]=Oe[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(o=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&location.hostname!==o[1]&&(t.crossOrigin="anonymous"),t.src=e,ce.flag&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Re=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(we.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),we.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Le.toString=function(){return Re.toString()},Le),cancelAnimationFrame:(Ce=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(we.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),we.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},Ie.toString=function(){return Ce.toString()},Ie),now:function(){return"undefined"!=typeof performance?(we.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(we.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&xe.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return Te(r,t,e,xe,i)},releaseCacheCanvas:function(t){be.push(t)},delCacheCanvas:function(t){t&&delete xe[t]},hasCacheWebgl:function(t){return t&&Ee.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return Te(r,t,e,Ee,i)},releaseCacheWebgl:function(t){Ae.push(t)},delCacheWebgl:function(t){t&&delete Ee[t]},isDom:function(t){if(t){if(he.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(he.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},checkSupportFontFamily:function(t){if("arial"===(t=t.toLowerCase()))return!0;if(!bt.info.hasOwnProperty(t))return!1;if(bt.info[t].hasOwnProperty("checked"))return bt.info[t].checked;var e=we.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__"),r=e.ctx;r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",ve||(r.clearRect(0,0,16,16),r.font="16px arial",r.fillText("a",8,8),e.draw(),ve=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),r.font="16px "+t,r.fillText("a",8,8),e.draw();for(var i=r.getImageData(0,0,16,16).data,n=0,a=i.length;n<a;n++)if(ve[n]!==i[n])return bt.info[t].checked=!0;return bt.info[t].checked=!1},loadFont:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,a=[];t.forEach(function(t,e){we.loadFont(t,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!t||!he.isString(t))return we.error("Load font invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e=Se[t]=Se[t]||{state:0,task:[]};2===e.state?r&&r(e):1===e.state?r&&e.task.push(r):(e.state=1,r&&e.task.push(r),new FontFace(t,"url(".concat(t,")")).load().then(function(){e.state=2,e.success=!0,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}).catch(function(){e.state=2,e.success=!1,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,a=[];t.forEach(function(t,e){we.loadComponent(t,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!t||!he.isString(t))return we.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,o=ke[t]=ke[t]||{state:0,task:[]};2===o.state?r&&r(o):1===o.state?r&&o.task.push(r):(o.state=1,r&&o.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){o.state=2,o.success=!0,o.url=t,o.task.splice(0).forEach(function(t){return t(o)}),document.head.removeChild(e)},e.onerror=function(){o.state=2,o.success=!1,o.url=t,o.task.splice(0).forEach(function(t){return t(o)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function Ie(t){return Ce.apply(this,arguments)}function Le(t){return Re.apply(this,arguments)}var De=he.rgba2int,Pe=he.isNil,Ne=C.PX,Fe=C.PERCENT,Be=C.DEG,Ge=C.NUMBER,Ye=C.REM,He=C.VW,We=C.VH,Ue=C.calUnit,Xe=Q.d2r,Ve=At.canvasPolygon,Ke=At.svgPolygon,ze=g.STYLE_KEY.FONT_SIZE,$e=g.NODE_KEY.NODE_DEFS_CACHE;function je(t){if(/^-?[\d.]/.test(t)){var e=Ue(t);return-1<[Ge,Be].indexOf(e[1])&&(e[1]=Ne),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,Fe]}function Ze(t,e,r){for(var i,n=[],a=t[0][0],o=0,s=t.length;o<s;o++){var l,h=t[o];1<h.length?(l=h[1])[1]===Fe?n.push([h[0],.01*l[0]]):l[1]===Ye?n.push([h[0],l[0]*r.computedStyle[ze]/e]):l[1]===He?n.push([h[0],l[0]*r.width/e]):l[1]===We?n.push([h[0],l[0]*r.height/e]):n.push([h[0],l[0]/e]):n.push([h[0]])}1===n.length&&n.push(he.clone(n[0])),1===n[0].length&&n[0].push(0),1<n.length&&(1===n[i=n.length-1].length&&n[i].push(1));for(var c=n[0][1],u=1,_=n.length;u<_-1;u++){var f=n[u];if(1<f.length)c=f[1];else{for(var d=u+1,p=n[n.length-1][1];d<_-1;d++){var g=n[d];if(1<g.length){p=g[1];break}}for(var m=(p-c)/(d-u+1),v=u;v<d;v++)n[v].push(c+m*(v+1-u));u=d}}for(var y=1,x=n.length;y<x;y++){var E=n[y],b=n[y-1];E[1]<b[1]&&(E[1]=b[1])}for(var A=0,M=n.length;A<M;A++){var T=n[A];if(1<T[1]){n.splice(A);var C,R,O,S,k=n[A-1];k&&k[1]<1&&(C=T[0][0]-k[0][0],R=T[0][1]-k[0][1],O=T[0][2]-k[0][2],S=T[0][3]-k[0][3],k=(1-k[1])/(T[1]-k[1]),n.push([[T[0][0]+C*k,T[0][1]+R*k,T[0][2]+O*k,T[0][3]+S*k],1]));break}}for(var w=n.length-1;0<=w;w--){var I=n[w];if(I[1]<0){n.splice(0,w+1);var L,D,P,N,F=n[w];F&&0<F[1]&&(L=F[0][0]-I[0][0],D=F[0][1]-I[0][1],P=F[0][2]-I[0][2],N=F[0][3]-I[0][3],F=-I[1]/(F[1]-I[1]),n.unshift([[I[0][0]+L*F,I[0][1]+D*F,I[0][2]+P*F,I[0][3]+N*F],0]));break}}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n.length||n.push([a,0]),n}function qe(t,e,r,i,n,a){var o=t[0],t=t[1],o=o[1]===Fe?e+o[0]*i*.01:o[1]===Ye?e+o[0]*a.computedStyle[ze]:o[1]===He?e+o[0]*a.width*.01:o[1]===We?e+o[0]*a.height*.01:e+o[0],t=t[1]===Fe?r+t[0]*n*.01:t[1]===Ye?r+t[0]*a.computedStyle[ze]:t[1]===He?r+t[0]*a.width*.01:t[1]===We?r+t[0]*a.height*.01:r+t[0];return[o,t]}var Je={parseGradient:function(t){var e=R.gradient.exec(t);if(e){var r,i,n,a,o,s={k:e[1]};"linear"===s.k?(r=/(-?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(e[2]))?s.d=(t=r[0].toLowerCase(),r=180,"to top"===t?r=0:"to top right"===t?r=45:"to right"===t?r=90:"to bottom right"===t?r=135:"to bottom"===t||("to bottom left"===t?r=225:"to left"===t?r=270:"to top left"===t?r=315:(t=/(-?[\d.]+)deg/.exec(t))&&(r=parseFloat(t[1]))),r%360):(i=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)/.exec(e[2]),s.d=i?[parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4])]:180):"radial"===s.k?(s.s=-1<e[2].indexOf("circle")?"circle":"ellipse",(i=/(closest|farthest)-(side|corner)/i.exec(e[2]))?s.z=i[0].toLowerCase():(n=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)(?:\s+([\d.]+))?/.exec(e[2]))?(s.z=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4])],Pe(n[5])?s.z.push(1):s.z.push(parseFloat(n[5]))):s.z="farthest-corner",(n=/at\s+((?:-?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(a=je(n[1]),o=n[2]?je(n[2]):a,s.p=[a,o]):s.p=[[50,Fe],[50,Fe]]):"conic"===s.k&&(a=/(-?[\d.]+deg)/i.exec(e[2]),s.d=a?parseFloat(a[0])%360:0,(o=/at\s+((?:-?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(a=je(o[1]),o=o[2]?je(o[2]):a,s.p=[a,o]):s.p=[[50,Fe],[50,Fe]]);e=e[2].match(/(-?[\d.]+[pxremvwh%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*(-?[\d.]+[pxremvwh%]+)?/gi);return s.v=e.map(function(t){var e=/((?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\)))/i.exec(t),e=[De(e[1])],t=/-?[\d.]+[pxremvwh%]+/.exec(t);return t&&(t=Ue(t[0]),-1<[Ge,Be].indexOf(t[1])&&(t[1]=Ne),e[1]=t),e}),s}},getLinear:function(t,e,r,i,n,a,o,s,l){var h,c,u,_;if(Array.isArray(e))var f=r+e[0]*o,d=i+e[1]*s,p=r+e[2]*o,g=i+e[3]*s,m=Ze(t,Math.sqrt(Math.pow(p-f,2)+Math.pow(g-d,2)));else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var v=Math.max(o,s),y=(E=v,h=n,c=a,E=270<=(n=e)?(a=Xe(360-n),u=h+Math.sin(a)*E,y=c+Math.cos(a)*E,x=h-Math.sin(a)*E,c-Math.cos(a)*E):180<=n?(_=Xe(n-180),u=h+Math.sin(_)*E,y=c-Math.cos(_)*E,x=h-Math.sin(_)*E,c+Math.cos(_)*E):90<=n?(_=Xe(180-n),u=h-Math.sin(_)*E,y=c-Math.cos(_)*E,x=h+Math.sin(_)*E,c+Math.cos(_)*E):(n=Xe(n),u=h-Math.sin(n)*E,y=c+Math.cos(n)*E,x=h+Math.sin(n)*E,c-Math.cos(n)*E),[u,y,x,E]);v*=2;var x=k.dotProduct(r-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/v,E=k.dotProduct(r+o-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/v,o=k.dotProduct(r+o-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/v,r=k.dotProduct(r-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/v,i=x,s=x,i=Math.min(x,Math.min(E,Math.min(o,r))),s=Math.max(s,Math.max(E,Math.max(o,r))),o=i/v,r=y[2]-y[0],v=y[3]-y[1];f=y[0]+r*o,d=y[1]+v*o,p=y[2]-r*o,g=y[3]-v*o,m=Ze(t,s-i,l)}return{x1:f,y1:d,x2:p,y2:g,stop:m}},getRadial:function(t,e,r,i,n,a,o,s,l){var h,c,u,i=(p=e,_=r,h=i,c=o-n,e=s-a,r=n,i=a,n=o,a=s,o=l,s=0,Array.isArray(_)?(f=r+_[0]*c,d=i+_[1]*e,_[4]<=0?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-a),Math.min(Math.abs(f-a))))):(v=(m=Math.sqrt(Math.pow((_[2]-_[0])*c,2)+Math.pow((_[3]-_[1])*e,2)))*_[4],g=Math.max(m,v),s=_[2]>=_[0]?_[3]>=_[1]?Math.asin((_[3]-_[1])*e/m):-Math.asin((_[1]-_[3])*e/m):_[3]>=_[1]?Xe(180)-Math.asin((_[3]-_[1])*e/m):Math.asin((_[1]-_[3])*e/m)-Xe(180))):(f=(h=xt(qe(h,r,i,c,e,o),2))[0],d=h[1],o=1,"closest-corner"===_&&"circle"===p?g=f<=r||n<=f||d<=i||a<=d?Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-a),Math.min(Math.abs(f-a))))):(m=f<r+.5*c?f-r:n-f,v=d<i+.5*e?d-i:a-d,Math.sqrt(Math.pow(m,2)+Math.pow(v,2))):"closest-side"===_||"closest-corner"===_?f<=r||n<=f||d<=i||a<=d?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-a),Math.min(Math.abs(f-a))))):(h=1,m=f<r+.5*c?f-r:n-f,v=d<i+.5*e?d-i:a-d,g=Math.min(m,v),m*=h="closest-corner"===_?Math.sqrt(2):h,v*=h,g*=h):(m=f<=r?r-f+c:n<=f?f-n+c:f<r+.5*c?n-f:f-r,v=d<=i?i-d+e:a<=d?d-a+e:d<i+.5*e?a-d:d-i,g=Math.max(m,v),m*=o="farthest-side"!==_?Math.sqrt(2):o,v*=o,g*=o)),[f,d,g,m="circle"===p?v=g:m,v,s]),_=xt(i,6),o=_[0],f=_[1],d=_[2],p=_[3],g=_[4],m=_[5],v=1,s=1;return p===g&&!m||(u=[1,0,0,1,0,0],m&&(i=Math.sin(m),u=[_=Math.cos(m),i,0,0,-i,_,0,0,0,0,1,0,0,0,0,1]),p!==d&&(u=qt.multiply(u,[v=p/d,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),g!==d&&(u=qt.multiply(u,[1,0,0,0,0,s=g/d,0,0,0,0,1,0,0,0,0,1]))),{cx:o,cy:f,r:d,stop:Ze(t,d,l),scx:v,scy:s,matrix:u,d:m}},getConic:function(t,e,r,i,n,a,o,s,l){var h=function(t,e,r,i,n,a,o){var s=n-r,l=a-i,e=xt(qe(e,r,i,s,l,o),2),o=e[0],e=e[1];n=r+.5*s<=o?o-r:n-o;a=i+.5*l<=e?e-i:a-e;return a=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),[o,e,a,t]}(e,r,i,n,a,o,l),c=xt(h,4),e=c[0],r=c[1],h=c[2];return h<<=1,{cx:e,cy:r,w:a-i,h:o-n,r:h*=s,deg:c[3],stop:Ze(t,1,l)}},renderConic:function(e,t,r,i,n,a,o,s,l,h,c,u,_){if(h=(h=Ut.calRadius(n,a,o,s,l,h,c,u))||[[n,a],[n+o,a],[n+o,a+s],[n,a+s],[n,a]],t===Et.CANVAS||t===Et.WEBGL){c=we.getCacheCanvas(o,s,"__$$CONIC_GRADIENT$$__"),u=c.ctx.getImageData(0,0,o,s);tt.getConicGradientImage(i.cx-n,i.cy-a,i.w,i.h,i.stop,u.data),c.ctx.putImageData(u,0,0),r.save(),r.beginPath(),Ve(r,h),r.clip(),r.closePath(),r.drawImage(c.canvas,n,a),r.restore(),c.ctx.clearRect(0,0,o,s)}else if(t===Et.SVG){if(_){var f={tagName:"symbol",props:[],children:[]};return e.__config[$e].push(f),i.forEach(function(t){f.children.push({type:"item",tagName:"path",props:[["d",Ke(t[0])],["fill",t[1]]]})}),r.add(f)}h={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ke(h)]]}]};e.__config[$e].push(h);var d=r.add(h);i.forEach(function(t){e.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ke(t[0])],["fill",t[1]],["clip-path","url(#"+d+")"]]})})}}},Qe={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0},tr={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},er=[],rr=[];Object.keys(Qe).forEach(function(t){rr.push(t);var e=Qe[t];er.push({k:t,v:e})});var ir=[],nr=[];Object.keys(tr).forEach(function(t){nr.push(t);var e=tr[t];ir.push({k:t,v:e})});var ar={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto"},or=[];Object.keys(ar).forEach(function(t){or.push(t)});var sr={DOM:Qe,GEOM:tr,isValid:function(t){return Qe.hasOwnProperty(t)||tr.hasOwnProperty(t)},DOM_KEY_SET:rr,GEOM_KEY_SET:nr,DOM_ENTRY_SET:er,GEOM_ENTRY_SET:ir,INHERIT:ar,INHERIT_KEY_SET:or},lr=he.isNil;function hr(t,e,r,i){lr(t.flexGrow)&&(t.flexGrow=e||0),lr(t.flexShrink)&&(t.flexShrink=r||0),lr(t.flexBasis)&&(t.flexBasis=i||0)}var cr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderWidthTop","borderWidthRight","borderWidthBottom","borderWidthLeft"],borderColor:["borderColorTop","borderColorRight","borderColorBottom","borderColorLeft"],borderStyle:["borderStyleTop","borderStyleRight","borderStyleBottom","borderStyleLeft"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],toFull:function(i,t){var e,n,a,o,r,s,l,h,c,u,_,f,d,p,g,m,v,y,x=this,E=i[t];if("background"===t)Array.isArray(E)?(r=E.length,!lr(i.backgroundColor)||(e=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(E[r-1]))&&(i.backgroundColor=e[0],E=E.slice(0,r-1)),n=[],a=[],o=[],E.forEach(function(t){var e,r;lr(i.backgroundImage)&&((e=R.gradient.exec(t))?(n.push(e[0]),t=t.replace(e[0],"")):(r=R.img.exec(E))&&(n.push(r[0]),t=t.replace(r[0],""))),!lr(i.backgroundRepeat)||(r=/(no-?)?repeat(-?[xy])?/i.exec(t))&&a.push(r[0].toLowerCase()),!lr(i.backgroundPosition)||(t=t.match(R.position))&&o.push(t.join(" "))}),n.length&&(i.backgroundImage=n),a.length&&(i.backgroundRepeat=a),o.length&&(i.backgroundPosition=o,this.toFull(i,"backgroundPosition"))):(lr(i.backgroundImage)&&((r=R.gradient.exec(E))?(i.backgroundImage=r[0],E=E.replace(r[0],"")):(s=R.img.exec(E))&&(i.backgroundImage=s[0],E=E.replace(s[0],""))),!lr(i.backgroundRepeat)||(s=/(no-?)?repeat(-?[xy])?/i.exec(E))&&(i.backgroundRepeat=s[0].toLowerCase()),!lr(i.backgroundColor)||(l=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(E))&&(i.backgroundColor=l[0],E=E.replace(l[0],"")),!lr(i.backgroundPosition)||(l=E.match(R.position))&&(i.backgroundPosition=l.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===E?hr(i,0,0,"auto"):"auto"===E?hr(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(E)?(h=E.split(/\s+/),hr(i,parseFloat(h[0]),parseFloat(h[1]),h[2])):/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwh%]*/.test(E)?(h=E.split(/\s+/),hr(i,parseFloat(h[0]),parseFloat(h[1]),h[2])):/^[\d.]+\s+[\d.]+$/.test(E)?(f=E.split(/\s+/),hr(i,parseFloat(f[0]),parseFloat(f[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwh%]+/.test(E)?(d=E.split(/\s+/),hr(i,parseFloat(d[0]),1,d[1])):/^[\d.]+$/.test(E)?hr(i,parseFloat(E),1,0):/^[\d.]+[pxremvwh%]+/i.test(E)?hr(i,1,1,E):hr(i,0,1,"auto");else if("flexFlow"===t)(E=E.toString().split(/\s+/)).length&&(lr(i.flexDirection),i.flexDirection=E[0],1<E.length&&(i.flexWrap=E[1]));else if("borderRadius"===t){1===(E=E.toString().split("/")).length&&(E[1]=E[0]);for(var b=0;b<2;b++){var A=E[b].toString().split(/\s+/);0===A.length?E[b]=[0,0,0,0]:1===A.length?E[b]=[A[0],A[0],A[0],A[0]]:2===A.length?E[b]=[A[0],A[1],A[0],A[1]]:3===A.length?E[b]=[A[0],A[1],A[2],A[1]]:E[b]=A.slice(0,4)}this[t].forEach(function(t,e){lr(i[t])&&(i[t]=E[0][e]+" "+E[1][e])})}else"backgroundPosition"===t?(Array.isArray(E)||(E=[E]),c=this[t].map(function(t){return lr(i[t])}),E.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),x[t].forEach(function(t,e){c[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(u=E.toString().split(/\s*,\s*/)).length&&(u[1]=u[0]),this[t].forEach(function(t,e){lr(i[t])&&(i[t]=u[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(_=E.toString().split(/\s*,\s*/)).length?_[2]=_[1]=_[0]:2===_.length&&(_[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){lr(i[t])&&(i[t]=_[e])})):"margin"===t||"padding"===t?(g=i,v=this[m=t],m=g[m],lr(m)||(y=m.toString().match(/(-?[\d.]+[pxremvwh%]*)|(auto)/gi))&&(1===y.length?y[3]=y[2]=y[1]=y[0]:2===y.length?(y[2]=y[0],y[3]=y[1]):3===y.length&&(y[3]=y[1]),v.forEach(function(t,e){lr(g[t])&&(g[t]=y[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(m=(f=i)[d=t],lr(m)||(lr(f[d+"Width"])&&(v=/\b[\d.]+[pxremvwh%]*\b/i.exec(m),f[d+"Width"]=v?v[0]:0),lr(f[d+"Style"])&&(p=/\b(solid|dashed|dotted)\b/i.exec(m),f[d+"Style"]=p?p[1]:"solid"),lr(f[d+"Color"])&&((p=/#[0-9a-f]{3,8}/i.exec(m))&&-1<[4,7,9].indexOf(p[0].length)?f[d+"Color"]=p[0]:/\btransparent\b/i.test(m)?f[d+"Color"]="transparent":(p=/rgba?\s*\(.+\)/i.exec(m),f[d+"Color"]=p?p[0]:"transparent")))):this[t]&&this[t].forEach(function(t){lr(i[t])&&(i[t]=E)});return i}},ur=g.STYLE_KEY,m=[[ur.BACKGROUND_COLOR],[ur.BORDER_BOTTOM_COLOR],[ur.BORDER_LEFT_COLOR],[ur.BORDER_RIGHT_COLOR],[ur.BORDER_TOP_COLOR],[ur.COLOR]],b=[[ur.FONT_SIZE],[ur.BORDER_BOTTOM_WIDTH],[ur.BORDER_LEFT_WIDTH],[ur.BORDER_RIGHT_WIDTH],[ur.BORDER_TOP_WIDTH],[ur.LEFT],[ur.TOP],[ur.RIGHT],[ur.BOTTOM],[ur.FLEX_BASIS],[ur.WIDTH],[ur.HEIGHT],[ur.LINE_HEIGHT],[ur.MARGIN_BOTTOM],[ur.MARGIN_LEFT],[ur.MARGIN_TOP],[ur.MARGIN_RIGHT],[ur.PADDING_TOP],[ur.PADDING_RIGHT],[ur.PADDING_BOTTOM],[ur.PADDING_LEFT],[ur.STROKE_WIDTH],[ur.STROKE_MITERLIMIT],[ur.LETTER_SPACING],[ur.PERSPECTIVE]],F=[[ur.BACKGROUND_IMAGE],[ur.FILL],[ur.STROKE]],ct=[[ur.BORDER_TOP_LEFT_RADIUS],[ur.BORDER_TOP_RIGHT_RADIUS],[ur.BORDER_BOTTOM_RIGHT_RADIUS],[ur.BORDER_BOTTOM_LEFT_RADIUS]],_r={};m.forEach(function(t){_r[t]=!0});var fr={};b.forEach(function(t){fr[t]=!0});var dr={};ct.forEach(function(t){dr[t]=!0});var pr={};F.forEach(function(t){pr[t]=!0});var $t=[[ur.TRANSLATE_X],[ur.TRANSLATE_Y],[ur.TRANSLATE_Z],[ur.SKEW_X],[ur.SKEW_Y],[ur.SCALE_X],[ur.SCALE_Y],[ur.SCALE_Z],[ur.ROTATE_X],[ur.ROTATE_Y],[ur.ROTATE_Z]],gr={};$t.forEach(function(t){gr[t]=!0});var jt={KEY_COLOR:m,KEY_EXPAND:$t,KEY_GRADIENT:F,KEY_LENGTH:b,KEY_RADIUS:ct,COLOR_HASH:_r,EXPAND_HASH:gr,GRADIENT_HASH:pr,LENGTH_HASH:fr,RADIUS_HASH:dr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},mr=sr.DOM,vr=sr.GEOM,yr=C.INHERIT,Zt=g.STYLE_KEY,xr={},Er=[],br=a({},Zt.POINTER_EVENTS,!0),Ar=(a(Jt={},Zt.TRANSFORM,!0),a(Jt,Zt.TRANSLATE_X,!0),a(Jt,Zt.TRANSLATE_Y,!0),a(Jt,Zt.SKEW_X,!0),a(Jt,Zt.SKEW_Y,!0),a(Jt,Zt.SCALE_X,!0),a(Jt,Zt.SCALE_Y,!0),a(Jt,Zt.ROTATE_Z,!0),a(Jt,Zt.COLOR,!0),a(Jt,Zt.FONT_STYLE,!0),a(Jt,Zt.STROKE_WIDTH,!0),a(Jt,Zt.FILL,!0),a(Jt,Zt.STROKE_DASHARRAY,!0),a(Jt,Zt.STROKE_LINECAP,!0),a(Jt,Zt.STROKE_LINEJOIN,!0),a(Jt,Zt.STROKE_MITERLIMIT,!0),a(Jt,Zt.BACKGROUND_COLOR,!0),a(Jt,Zt.BACKGROUND_IMAGE,!0),a(Jt,Zt.BACKGROUND_POSITION_X,!0),a(Jt,Zt.BACKGROUND_POSITION_Y,!0),a(Jt,Zt.BACKGROUND_REPEAT,!0),a(Jt,Zt.BACKGROUND_SIZE,!0),a(Jt,Zt.STROKE,!0),a(Jt,Zt.BORDER_BOTTOM_COLOR,!0),a(Jt,Zt.BORDER_LEFT_COLOR,!0),a(Jt,Zt.BORDER_RIGHT_COLOR,!0),a(Jt,Zt.BORDER_TOP_COLOR,!0),a(Jt,Zt.BORDER_TOP_LEFT_RADIUS,!0),a(Jt,Zt.BORDER_TOP_RIGHT_RADIUS,!0),a(Jt,Zt.BORDER_BOTTOM_RIGHT_RADIUS,!0),a(Jt,Zt.BORDER_BOTTOM_LEFT_RADIUS,!0),a(Jt,Zt.VISIBILITY,!0),a(Jt,Zt.OPACITY,!0),a(Jt,Zt.Z_INDEX,!0),a(Jt,Zt.FILTER,!0),a(Jt,Zt.BOX_SHADOW,!0),a(Jt,Zt.OVERFLOW,!0),a(Jt,Zt.BACKGROUND_CLIP,!0),Jt),Mr=(a(ar={},Zt.FONT_SIZE,!0),a(ar,Zt.FONT_WEIGHT,!0),a(ar,Zt.FONT_FAMILY,!0),ar),Tr={GEOM:xr,GEOM_KEY_SET:Er,IGNORE:br,REPAINT:Ar,MEASURE:Mr,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Tr.addGeom(e,t,r)}):t&&(xr.hasOwnProperty(t)||Er.push(t),(xr[t]=xr[t]||{})[e]=r||!0)}};function Cr(t,e){return xr.hasOwnProperty(e)&&xr[e].hasOwnProperty(t)}Tr.isIgnore=function(t){return br.hasOwnProperty(t)},Tr.isGeom=Cr,Tr.isRepaint=function(t){return Ar.hasOwnProperty(t)||Cr(t)},Tr.isMeasure=function(t){return Mr.hasOwnProperty(t)},Tr.isValid=function(t,e){return!!e&&(!!mr.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!vr.hasOwnProperty(e))||!!xr.hasOwnProperty(e)&&xr[e].hasOwnProperty(t)))};var Rr=Tr.MEASURE_KEY_SET=Object.keys(Mr).map(function(t){return parseInt(t)}),Or=Rr.length;Tr.isMeasureInherit=function(t){if(t)for(var e=0;e<Or;e++){var r=Rr[e];if(t.hasOwnProperty(r)&&t[r][1]===yr)return!0}return!1},Tr.measureInheritList=function(t){for(var e=[],r=0;r<Or;r++){var i=Rr[r];t.hasOwnProperty(i)&&t[i][1]===yr&&e.push(i)}return e},Tr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Tr.addGeom("$circle",["r"]),Tr.addGeom("$ellipse",["rx","ry"]),Tr.addGeom("$rect",["rx","ry"]),Tr.addGeom("$sector",["begin","end","edge","closure"]),Tr.addGeom("$polyline",["points","controls","start","end"]),Tr.addGeom("$polygon",["points","controls","start","end"]);var Sr=g.STYLE_KEY,kr=g.STYLE_RV_KEY,wr=g.style2Upper,ur=g.STYLE_KEY,Ir=ur.POSITION,Lr=ur.WIDTH,Dr=ur.HEIGHT,Pr=ur.TRANSLATE_X,Nr=ur.TRANSLATE_Y,Fr=ur.TRANSLATE_Z,Br=ur.SCALE_X,Gr=ur.SCALE_Y,Yr=ur.SCALE_Z,m=ur.SKEW_X,$t=ur.SKEW_Y,F=ur.ROTATE_X,b=ur.ROTATE_Y,ct=ur.ROTATE_Z,Hr=ur.ROTATE_3D,Wr=ur.PERSPECTIVE,Jt=ur.PERSPECTIVE_ORIGIN,Ur=ur.TRANSFORM,Xr=ur.TRANSFORM_ORIGIN,Vr=ur.BACKGROUND_IMAGE,Kr=ur.BACKGROUND_COLOR,zr=ur.BACKGROUND_POSITION_X,$r=ur.BACKGROUND_POSITION_Y,jr=ur.BACKGROUND_SIZE,Zr=ur.OPACITY,qr=ur.Z_INDEX,Jr=ur.COLOR,Qr=ur.FONT_SIZE,ti=ur.FONT_FAMILY,ei=ur.FONT_WEIGHT,ri=ur.FONT_STYLE,ii=ur.LINE_HEIGHT,ni=ur.TEXT_ALIGN,ai=ur.FILTER,oi=ur.VISIBILITY,si=ur.BOX_SHADOW,li=ur.POINTER_EVENTS,hi=ur.FILL,ci=ur.STROKE,ui=ur.STROKE_WIDTH,_i=ur.STROKE_DASHARRAY,fi=ur.BORDER_TOP_WIDTH,di=ur.BORDER_RIGHT_WIDTH,pi=ur.BORDER_BOTTOM_WIDTH,gi=ur.BORDER_LEFT_WIDTH,mi=ur.DISPLAY,vi=ur.FLEX_DIRECTION,yi=ur.FLEX_GROW,xi=ur.FLEX_SHRINK,Ei=ur.FLEX_BASIS,bi=ur.JUSTIFY_CONTENT,Ai=ur.ALIGN_SELF,Mi=ur.ALIGN_ITEMS,Ti=ur.MATRIX,Ci=ur.LETTER_SPACING,Zt=ur.BACKGROUND_CLIP,Ri=ur.WHITE_SPACE,ar=ur.TEXT_OVERFLOW,Oi=ur.LINE_CLAMP,Si=ur.ORDER,ki=ur.FLEX_WRAP,wi=ur.ALIGN_CONTENT,Ii=C.AUTO,Li=C.PX,Di=C.PERCENT,Pi=C.NUMBER,Ni=C.INHERIT,Fi=C.DEG,Bi=C.RGBA,Gi=C.STRING,Yi=C.REM,Hi=C.VW,Wi=C.VH,Ui=C.calUnit,Xi=he.isNil,Vi=he.rgba2int,Ki=he.equalArr,zi=Tr.MEASURE_KEY_SET,$i=Tr.isGeom,ji=Tr.GEOM,Zi=Tr.GEOM_KEY_SET,qi=jt.COLOR_HASH,Ji=jt.LENGTH_HASH,Qi=jt.RADIUS_HASH,tn=jt.GRADIENT_HASH,en=jt.EXPAND_HASH,rn=jt.GRADIENT_TYPE,nn={translateX:Pr,translateY:Nr,translateZ:Fr,scaleX:Br,scaleY:Gr,scaleZ:Yr,skewX:m,skewY:$t,rotateX:F,rotateY:b,rotateZ:ct,rotate:ct};function an(t,e){t===Br||t===Gr||t===Yr?e[1]=Pi:t===Pr||t===Nr||t===Fr?e[1]===Pi&&(e[1]=Li):t===Wr?-1<[Pi,Di,Fi].indexOf(e[1])&&(e[1]=Li):e[1]===Pi&&(e[1]=Fi)}function on(t){for(var e=t.split(","),r="arial",i=0,n=e.length;i<n;i++)if(bt.support(e[i])){r=e[i];break}return r}function sn(t){var e=on(t[ti]);return t[Qr]*(bt.info[e]||bt.info.arial).lhr}function ln(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Ii){if(r!==Lr)break;e=e.domParent}else{if(i[1]===Li)return t*i[0];if(i[1]===Di)t*=.01*i[0],e=e.domParent;else{if(i[1]===Yi)return t*i[0]*e.root.computedStyle[Qr];if(i[1]===Hi)return t*i[0]*e.root.width*.01;if(i[1]===Wi)return t*i[0]*e.root.height*.01}}}return t}var hn=(a(ur={},Ir,!0),a(ur,mi,!0),a(ur,Sr.BACKGROUND_REPEAT,!0),a(ur,vi,!0),a(ur,yi,!0),a(ur,xi,!0),a(ur,ki,!0),a(ur,bi,!0),a(ur,Mi,!0),a(ur,Ai,!0),a(ur,Sr.OVERFLOW,!0),a(ur,Sr.MIX_BLEND_MODE,!0),a(ur,Sr.STROKE_LINECAP,!0),a(ur,Sr.STROKE_LINEJOIN,!0),a(ur,Sr.STROKE_MITERLIMIT,!0),a(ur,Sr.FILL_RULE,!0),a(ur,Zr,!0),a(ur,qr,!0),a(ur,Zt,!0),a(ur,ar,!0),a(ur,Oi,!0),ur),cn=(a(m={},Jr,!0),a(m,Kr,!0),a(m,Sr.BORDER_TOP_COLOR,!0),a(m,Sr.BORDER_RIGHT_COLOR,!0),a(m,Sr.BORDER_BOTTOM_COLOR,!0),a(m,Sr.BORDER_LEFT_COLOR,!0),m),un=(a($t={},Sr.BORDER_TOP_LEFT_RADIUS,!0),a($t,Sr.BORDER_TOP_RIGHT_RADIUS,!0),a($t,Sr.BORDER_BOTTOM_RIGHT_RADIUS,!0),a($t,Sr.BORDER_BOTTOM_LEFT_RADIUS,!0),a($t,Xr,!0),a($t,Jt,!0),$t);var _n={normalize:function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!he.isObject(o))return{};var u,e,r,i,n,a,s,l,h,c,_={},f=(o=he.extend({},o)).border;return f&&cr.toFull(o,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){cr.toFull(o,t)}),(f=o.borderWidth)&&cr.toFull(o,"borderWidth"),(f=o.borderColor)&&cr.toFull(o,"borderColor"),(f=o.borderStyle)&&cr.toFull(o,"borderStyle"),(f=o.borderRadius)&&cr.toFull(o,"borderRadius"),(f=o.background)&&cr.toFull(o,"background"),f=o.backgroundPosition,Xi(f)||cr.toFull(o,"backgroundPosition"),(f=o.flex)&&cr.toFull(o,"flex"),(f=o.flexFlow)&&cr.toFull(o,"flexFlow"),f=o.margin,Xi(f)||cr.toFull(o,"margin"),f=o.padding,Xi(f)||cr.toFull(o,"padding"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){f=o[t],Xi(f)||cr.toFull(o,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){var e=o[t];!Xi(e)&&o.transform&&we.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;Xi(o[e])&&(o[e]=t)}),void 0!==(f=o.backgroundImage)&&(f?Array.isArray(f)?_[Vr]=f.map(function(t){return t?R.gradient.test(t)?Je.parseGradient(t):R.img.test(t)?R.img.exec(t)[2]:null:null}):R.gradient.test(f)?_[Vr]=[Je.parseGradient(f)]:R.img.test(f)?_[Vr]=[R.img.exec(f)[2]]:_[Vr]=[null]:_[Vr]=[null]),(f=o.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(f))&&-1<[4,7,9].indexOf(e[0].length)?_[Kr]=[Vi(e[0]),Bi]:(e=/rgba?\s*\(.+\)/i.exec(f),_[Kr]=[Vi(e?e[0]:[0,0,0,0]),Bi])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){f=o[t],Xi(f)||(t=e?$r:zr,Array.isArray(f)||(f=[f]),_[t]=f.map(function(t){if(/^-?[\d.]/.test(t)){var e=Ui(t);return-1<[Pi,Fi].indexOf(e[1])&&(e[1]=Li),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Di]}))}),(f=o.backgroundSize)&&(Array.isArray(f)||(f=[f]),_[jr]=f.map(function(t){if(!t)return[[0,Ii],[0,Ii]];var e=t.toString().match(/\b(?:(-?[\d.]+[pxremvwh%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],i=0;i<2;i++){var n,a=e[i];/^-?[\d.]/.test(a)?(n=Ui(a),-1<[Pi,Fi].indexOf(n[1])&&(n[1]=Li),r.push(n)):"contain"===a||"cover"===a?r.push([a,Gi]):r.push([0,Ii])}return r}return[[0,Ii],[0,Ii]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=o[t="border"+t+"Color"];Xi(e)||(_[Sr[wr(t)]]=[Vi(e),Bi])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=o[t="border"+t+"Radius"];if(!Xi(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n=r[i];/^-?[\d.]/.test(n)?(n=Ui(n),-1<[Pi,Fi].indexOf(n[1])&&(n[1]=Li),n[0]<0&&(n[0]=0),r[i]=n):r[i]=[0,Li]}_[Sr[wr(t)]]=r}}),(f=o.transform)&&(u=_[Ur]=[],(e=(f||"").toString().match(/\w+\(.+?\)/g))&&e.forEach(function(t){var e,r,i,n,a,o,s,l,h=t.indexOf("("),c=t.slice(0,h),t=t.slice(h+1,t.length-1);"matrix"===c?6===(e=6<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,6):e).length&&u.push([Ti,[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]]):"matrix3d"===c?16===(e=16<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,16):e).length&&u.push([Ti,e]):"perspective"===c?((r=Ui(t))[0]<0&&(r[0]=0),an(Wr,r),u.push([Wr,r])):"rotate3d"===c?4===(n=t.toString().split(/\s*,\s*/)).length&&(i=Ui(n[3]),an(Hr,i),n[0]=parseFloat(n[0]),n[1]=parseFloat(n[1]),n[2]=parseFloat(n[2]),n[3]=i,u.push([Hr,n])):nn.hasOwnProperty(c)?(an(o=nn[c],s=Ui(t)),u.push([o,s])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)?{translate3d:!0,scale3d:!0}.hasOwnProperty(c)&&(1===(r=t.toString().split(/\s*,\s*/)).length?(r[1]="scale3d"===c?[1]:[0],r[2]="scale3d"===c?[1]:[0]):2===r.length&&(r[2]="scale3d"===c?[1]:[0]),3===r.length&&(i=Sr[wr(c+"X")],n=Sr[wr(c+"Y")],a=Sr[wr(c+"Z")],o=Ui(r[0]),s=Ui(r[1]),l=Ui(r[2]),an(i,o),an(n,s),an(a,l),u.push([i,o]),u.push([n,s]),u.push([a,l]))):(1===(a=t.toString().split(/\s*,\s*/)).length&&(a[1]="scale"===c?a[0]:[0]),2===a.length&&(l=Sr[wr(c+"X")],t=Sr[wr(c+"Y")],c=Ui(a[0]),a=Ui(a[1]),an(l,c),an(t,a),u.push([l,c]),u.push([t,a])))})),f=o.perspective,Xi(f)||((r=Ui(f))[0]<0&&(r[0]=0),an(Wr,r),_[Wr]=r),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(f=o[t],!Xi(f)){var e=_[Sr[wr(t)]]=[],r=f.toString().match(R.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n,a=r[i];/^-?[\d.]/.test(a)?(n=Ui(a),-1<[Pi,Fi].indexOf(n[1])&&(n[1]=Li),e.push(n)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[a],Di]),Xi(e[i][0])&&(e[i][0]=50))}}else e.push([50,Di]),e.push([50,Di])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=o[t];Xi(e)||(an(t=nn[t],e=Ui(e)),_[t]=e)}),!(f=o.rotate3d)||4===(i=f.toString().split(/\s*,\s*/)).length&&(r=Ui(i[3]),an(Hr,r),i[0]=parseFloat(i[0]),i[1]=parseFloat(i[1]),i[2]=parseFloat(i[2]),i[3]=r,_[Hr]=i),f=o.opacity,Xi(f)||(f=parseFloat(f),isNaN(f)?_[Zr]=1:(f=Math.max(f,0),f=Math.min(f,1),_[Zr]=f)),f=o.zIndex,Xi(f)||(_[qr]=parseInt(f)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=o[t];Xi(r)||("auto"===r?r=[0,Ii]:(r=Ui(r),-1<[Pi,Fi].indexOf(r[1])&&(r[1]=Li)),e=Sr[wr(t)],_[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),f=o.flexBasis,Xi(f)||("content"===f?_[Ei]=[f,Gi]:/^[\d.]/.test(f)?((i=_[Ei]=Ui(f))[0]=Math.max(i[0],0),-1<[Pi,Fi].indexOf(i[1])&&(i[1]=Li)):_[Ei]=[0,Ii]),f=o.order,Xi(f)||(_[Si]=parseInt(f)||0),f=o.color,Xi(f)||(_[Jr]="inherit"===f?[[],Ni]:[Vi(f),Bi]),!(f=o.fontSize)&&0!==f||("inherit"===f||(n=Ui(f))<0?_[Qr]=[0,Ni]:(-1<[Pi,Fi].indexOf(n[1])&&(n[1]=Li),_[Qr]=n)),f=o.fontWeight,Xi(f)||(_[ei]="bold"===f?[700,Pi]:"normal"===f?[400,Pi]:"lighter"===f?[200,Pi]:"inherit"===f?[0,Ni]:[Math.max(0,parseInt(f))||400,Pi]),(f=o.fontStyle)&&(_[ri]="inherit"===f?[0,Ni]:[f,Gi]),(f=o.fontFamily)&&(_[ti]="inherit"===f?[0,Ni]:[f.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),Gi]),(f=o.textAlign)&&(_[ni]="inherit"===f?[0,Ni]:[f,Gi]),void 0!==(f=o.lineHeight)&&("inherit"===f?_[ii]=[0,Ni]:"normal"===f?_[ii]=[0,Ii]:/^[\d.]+/i.test(f)?(a=Ui(f),-1<[Fi].indexOf(a[1])&&(a[1]=Pi),_[ii]=a):(a=Math.max(0,parseFloat(f))||"normal",_[ii]="normal"===a?[null,Ii]:[a,Pi])),void 0!==(f=o.letterSpacing)&&("inherit"===f?_[Ci]=[0,Ni]:"normal"===f?_[Ci]=[0,Li]:/^-?[\d.]/.test(f)?(s=Ui(f),-1<[Pi,Fi].indexOf(s[1])&&(s[1]=Li),_[Ci]=s):_[Ci]=[parseFloat(f)||0,Li]),(f=o.whiteSpace)&&(_[Ri]="inherit"===f?[0,Ni]:[f,Gi]),void 0!==(f=o.lineClamp)&&(f=parseInt(f)||0,_[Oi]=Math.max(0,f)),void 0!==(f=o.fill)&&(f?Array.isArray(f)?f.length?_[hi]=f.map(function(t){return t?R.gradient.test(t)?Je.parseGradient(t):Vi(t):"none"}):_[hi]=["none"]:R.gradient.test(f)?_[hi]=[Je.parseGradient(f)]:_[hi]=[Vi(f)]:_[hi]=["none"]),void 0!==(f=o.stroke)&&(f?Array.isArray(f)?f.length?_[ci]=f.map(function(t){return t?R.gradient.test(t)?Je.parseGradient(t):Vi(t):"none"}):_[ci]=["none"]:R.gradient.test(f)?_[ci]=[Je.parseGradient(f)]:_[ci]=[Vi(f)]:_[ci]=["none"]),f=o.strokeWidth,Xi(f)||(Array.isArray(f)||(f=[f]),_[ui]=f.map(function(t){t=Ui(t);return-1<[Pi,Fi].indexOf(t[1])&&(t[1]=Li),t[0]=Math.max(t[0],0),t})),f=o.strokeDasharray,Xi(f)||(Array.isArray(f)?_[_i]=f.map(function(t){t=t.toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(s=f.toString().match(/[\d.]+/g))?((s=s.map(function(t){return parseFloat(t)})).length%2==1&&s.push(s[s.length-1]),_[_i]=[s]):_[_i]=[[]]),void 0!==(f=o.filter)&&(c=(f||"").toString().match(/\b[\w-]+\s*\(\s*-?[\d.]+\s*[pxremvwhdg%]*\s*\)\s*/gi),l=null,c&&(l=[],c.forEach(function(t){var e=/([\w-]+)\s*\(\s*(-?[\d.]+\s*[pxremvwhdg%]*)\s*\)\s*/i.exec(t);e&&(t=e[1].toLowerCase(),e=Ui(e[2]),"blur"===t?e[0]<=0||-1<[Fi,Di].indexOf(e[1])||(e[1]===Pi&&(e[1]=Li),l.push([t,e])):"hue-rotate"===t?-1!==[Pi,Fi].indexOf(e[1])&&(e[1]=Fi,l.push([t,e])):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||-1!==[Pi,Di].indexOf(e[1])&&(e[0]=Math.max(e[0],0),e[1]=Di,l.push([t,e])))})),_[ai]=l),(f=o.visibility)&&(_[oi]="inherit"===f?[0,Ni]:[f,Gi]),(f=o.pointerEvents)&&(_[li]="inherit"===f?[0,Ni]:[f,Gi]),void 0!==(f=o.boxShadow)&&(h=null,(c=(f||"").match(/(-?[\d.]+[pxremvwh%]*)\s*(-?[\d.]+[pxremvwh%]*)\s*(-?[\d.]+[pxremvwh%]*\s*)?(-?[\d.]+[pxremvwh%]*\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&c.forEach(function(t){var e=/(-?[\d.]+[pxremvwh%]*)\s*(-?[\d.]+[pxremvwh%]*)\s*(-?[\d.]+[pxremvwh%]*\s*)?(-?[\d.]+[pxremvwh%]*\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){h=h||[];for(var r=[],i=0;i<4;i++){var n=Ui(e[i+1]);-1<[Pi,Fi].indexOf(n[1])&&(n[1]=Li),1<i&&n[0]<0&&(n=0),r.push(n)}r.push(Vi(e[5])),r.push(e[6]||"outset"),h.push(r)}}),_[si]=h),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){o.hasOwnProperty(t)&&(_[Sr[wr(t)]]=o[t])}),["flexGrow","flexShrink"].forEach(function(t){o.hasOwnProperty(t)&&(_[Sr[wr(t)]]=Math.max(parseFloat(o[t])||0,0))}),f=o.zIndex,Xi(f)||(_[qr]=parseFloat(f)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;o.hasOwnProperty(t)&&(e=o[t],_[Sr[wr(t)]]=Array.isArray(e)?e:[e])}),Zi.forEach(function(t){o.hasOwnProperty(t)&&(_[t]=o[t])}),_},computeMeasure:function(r,i){var n=r.currentStyle,a=r.computedStyle,t=r.domParent,o=!i&&t.computedStyle;zi.forEach(function(t){var e=n[t];t===ti?e[1]===Ni?a[t]=on(i?sr.INHERIT[kr[t]]:o[t]):a[t]=on(e[0]):e[1]===Ni?a[t]=i?sr.INHERIT[kr[t]]:o[t]:e[1]===Di?a[t]=i?sr.INHERIT[kr[t]]:o[t]*e[0]*.01:e[1]===Yi?a[t]=i?sr.INHERIT[kr[t]]:r.root.computedStyle[Qr]*e[0]:e[1]===Hi?a[t]=i?sr.INHERIT[kr[t]]:.01*r.root.width*e[0]:e[1]===Wi?a[t]=i?sr.INHERIT[kr[t]]:.01*r.root.height*e[0]:a[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,i=t.computedStyle,n=t.domParent,a=t.root,o=a.computedStyle[Qr],s=!n,l=n&&n.computedStyle;[fi,di,pi,gi].forEach(function(t){var e=r[t];e[1]===Li?i[t]=e[0]:e[1]===Yi?i[t]=e[0]*o:e[1]===Hi?i[t]=e[0]*a.width*.01:e[1]===Wi?i[t]=e[0]*a.height*.01:i[t]=0}),[Ir,mi,vi,bi,Mi,Ai,yi,xi,Oi,Si,ki,wi].forEach(function(t){i[t]=r[t]});var h=r[ni];if(h[1]===Ni?i[ni]=s?"left":l[ni]:i[ni]=h[0],t=i[Qr],(h=r[ii])[1]===Ni)if(s)i[ii]=sn(i);else{for(var c,u=n;u&&(c=u.currentStyle[ii])[1]===Ni;)u=u.domParent;-1<[Ii,Ni].indexOf(c[1])?i[ii]=sn(i):c[1]===Pi?i[ii]=Math.max(c[0],0)*t:i[ii]=l[ii]}else h[1]===Li?i[ii]=Math.max(h[0],0)||sn(i):h[1]===Di?i[ii]=Math.max(h[0]*t*.01,0)||sn(i):h[1]===Yi?i[ii]=Math.max(h[0]*o,0)||sn(i):h[1]===Hi?i[ii]=Math.max(h[0]*a.width*.01,0)||sn(i):h[1]===Wi?i[ii]=Math.max(h[0]*a.height*.01,0)||sn(i):h[1]===Pi?i[ii]=Math.max(h[0],0)*t||sn(i):i[ii]=sn(i);(h=r[Ci])[1]===Ni?i[Ci]=s?0:l[Ci]:h[1]===Di?i[Ci]=.01*t*h[0]:h[1]===Yi?i[Ci]=o*h[0]:h[1]===Hi?i[Ci]=.01*a.width*h[0]:h[1]===Wi?i[Ci]=.01*a.height*h[0]:i[Ci]=h[0],(h=r[Ri])[1]===Ni?i[Ri]=s?"normal":l[Ri]:i[Ri]=h[0]},setFontStyle:function(t){var e=t[Qr];return(t[ri]||"normal")+" "+(t[ei]||"400")+" "+e+"px/"+e+"px "+(t[ti]||"arial")},getFontFamily:on,getBaseLine:function(t){var e=t[Qr],r=on(t[ti]),i=e*(bt.info[r]||bt.info.arial).lhr;return.5*(t[ii]-i)+e*(bt.info[r]||bt.info.arial).blr},calRelative:function(t,e,r,i,n){return r[1]===Ii?r=0:-1<[Li,Pi].indexOf(r[1])?r=r[0]:r[1]===Di?r=ln(r[0],i,n?Lr:Dr):r[1]===Yi?r=r[0]*i.root.computedStyle[Qr]:r[1]===Hi?r=r[0]*i.root.width*.01:r[1]===Wi&&(r=r[0]*i.root.height*.01),r},calAbsolute:function(t,e,r,i,n){return r[1]===Ii?r=0:-1<[Li,Pi,Fi,Bi,Gi].indexOf(r[1])?r=r[0]:r[1]===Di?r=r[0]*i*.01:r[1]===Yi?r=r[0]*n.computedStyle[Qr]:r[1]===Hi?r=r[0]*n.width*.01:r[1]===Wi&&(r=r[0]*n.height*.01),r},equalStyle:function(t,e,r,i){if(!e||!r)return e===r;if(t===Ur){if(e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++){var o=e[n],s=r[n];if(o[0]!==s[0])return!1;if(!Ki(o[1],s[1]))return!1}return!0}if(t===ai){if(e.length!==r.length)return!1;for(var l=0,h=e.length;l<h;l++)if(!Ki(e[l],r[l]))return!1}if(t===jr){if(e.length!==r.length)return!1;for(var c=0,u=e.length;c<u;c++){var _=e[c],f=r[c];if(_[0][0]!==f[0][0]||_[0][1]!==f[0][1]||_[1][0]!==f[1][0]||_[1][1]!==f[1][1])return!1}return!0}if(t===Xr||Qi.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===zr||t===$r||Ji.hasOwnProperty(t)||en.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===si)return Ki(e,r);if(qi.hasOwnProperty(t))return e[1]===r[1]&&Ki(e[0],r[0]);if(tn.hasOwnProperty(t)&&e.k===r.k&&rn.hasOwnProperty(e.k)){var d=e.v,p=r.v;if(e.d!==r.d||d.length!==p.length)return!1;for(var g=0,m=d.length;g<m;g++){var v=d[g],y=p[g];if(v.length!==y.length)return!1;for(var x=0;x<4;x++)if(v[0][x]!==y[0][x])return!1;if(1<v.length&&(v[1][0]!==y[1][0]||v[1][1]!==y[1][1]))return!1}return!0}return $i(i.tagName,t)&&(i.isMulti||Array.isArray(e)&&Array.isArray(r))?Ki(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[Ir])||"absolute"===t},cloneStyle:function(t,e){for(var r={},i=0,n=(e=e||Object.keys(t).map(function(t){return t=!ji.hasOwnProperty(t)?parseInt(t):t})).length;i<n;i++){var a=e[i],o=t[a];if(a===Vr)r[a]=o.map(function(t){return t&&t.k?he.clone(t):t});else if(a===hi||a===ci)r[a]=o.map(function(t){return t&&t.k?he.clone(t):t.slice(0)});else if(a===Ur||a===ai){if(o){for(var s=o.slice(0),l=0,h=s.length;l<h;l++)s[l]=s[l].slice(0),s[l][1]=s[l][1].slice(0);r[a]=s}}else if(a===si)o&&(o=o.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),r[a]=o);else if(hn.hasOwnProperty(a))r[a]=o;else if(ji.hasOwnProperty(a))r[a]=he.clone(o);else if(o){var c=r[a]=o.slice(0);if(a===zr||a===$r)for(var u=0,_=c.length;u<_;u++)c[u]=c[u].slice(0);else if(a===jr)for(var f=0,d=c.length;f<d;f++)c[f]=c[f].slice(0),c[f][0]=c[f][0].slice(0),c[f][1]=c[f][1].slice(0);else if(cn.hasOwnProperty(a))c[0]=c[0].slice(0);else if(un.hasOwnProperty(a))c[0]=c[0].slice(0),c[1]=c[1].slice(0);else if(a===Ur)for(var p=0,g=c.length;p<g;p++)c[p]=c[p].slice(0);else a===Hr&&(c[3]=c[3].slice(0))}}return r}},F=g.STYLE_KEY,fn=F.COLOR,dn=F.FONT_WEIGHT,pn=F.FONT_FAMILY,gn=F.FONT_SIZE,mn=F.FONT_STYLE,vn=F.LETTER_SPACING,yn=function(){function l(t,e,r,i,n,a,o,s){_(this,l),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,this.__width=n,this.__height=a,this.__content=o,this.__wList=s,this.__virtualDom={}}return d(l,[{key:"render",value:function(t,e,r,i,n,a){var o=this.content,s=this.x,l=this.y,h=this.parent,c=this.wList,u=this.width,_=h.ox,h=h.oy;l+=_n.getBaseLine(r),l+=h+a,this.__endX=(s+=_+n)+u,this.__endY=l;var f=r[vn],d=0,p=o.length;if(t===Et.CANVAS||t===Et.WEBGL)if(f)for(;d<p;d++)e.fillText(o.charAt(d),s,l),s+=c[d]+f;else e.fillText(o,s,l);else t===Et.SVG&&(r=[["x",s],["y",l],["fill",i[fn]],["font-family",r[pn]],["font-weight",r[dn]],["font-style",r[mn]],["font-size",r[gn]+"px"]],f&&r.push(["letter-spacing",f]),this.__virtualDom={type:"item",tagName:"text",props:r,content:he.encodeHtml(o)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return this.parent.baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"wList",get:function(){return this.__wList}}]),l}(),xn=[8,16,32,64,128,256,512,1024,2048,4096,8192],En=[128,64,32,16,8,4,2,1,1,1,1],bn=xn[xn.length-1],An={},Mn=0,Tn=function(){function u(t,e){_(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;e=this.__canvas=we.getCacheCanvas(t,t,null,e);e&&(this.__offscreen=e),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=Mn++,this.__update=!1,this.time=0}return d(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var n=r*t+i;if(e[n])return e[n]=0,this.__free--,n}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(bn<t)){for(var e=xn[0],r=En[0],i=0,n=xn.length;i<n&&(e=xn[i],r=En[i],!(xn[i]>=t));i++);for(var a,o=An[e]=An[e]||[],s=0,l=o.length;s<l;s++){var h=o[s];if(h.free){a=h;break}}if(!a){if(!(a=new u(e,r)).offscreen)return void we.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:xn,NUMBER:En}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(xn=t.SIZE,En=t.NUMBER,bn=xn[xn.length-1])}},{key:"MAX",get:function(){return bn}},{key:"genUuid",value:function(){return Mn++}}]),u}();function Cn(t,e,r,i){t=r-t,i-=e,e=Math.atan(Math.abs(i)/Math.abs(t));return t<0&&0<=i?Math.PI-e:t<0&&i<0?e-Math.PI:0<=t&&0<=i?e:-e}function Rn(t){var e=Math.sin(t),r=Math.cos(t),t=qt.identity();return t[0]=t[5]=r,t[1]=e,t[4]=-e,t}function On(t,e){var r=xt(t,6),i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5],h=xt(e,6),c=h[0],u=h[1],t=h[2],r=h[3],e=h[4],n=(a-i)*(l-n)-(s-i)*(o-n),u=(t-c)*(h[5]-u)-(e-c)*(r-u);return 0<n&&u<0||n<0&&0<u}var b={exchangeOrder:function(t,e){var r,i,n,a=(n=xt(h=t,6),a=n[0],c=n[1],o=n[2],s=n[3],l=n[4],t=n[5],h=[0,1,2],o<a&&o<l?(a=(n=[o,s,a,c])[0],c=n[1],o=n[2],s=n[3],h[0]=1,h[1]=0):l<o&&l<a&&(a=(r=[l,t,a,c])[0],c=r[1],l=r[2],t=r[3],h[0]=2,h[2]=0),a===o?s<c&&(a=(r=[o,s,a,c])[0],c=r[1],o=r[2],s=r[3],r=h[0],h[0]=h[1],h[1]=r):a===l&&t<c&&(a=(i=[l,t,a,c])[0],c=i[1],l=i[2],t=i[3],i=h[0],h[0]=h[2],h[2]=i),(o-a)*(t-c)-(l-a)*(s-c)<0&&(o=(i=[l,t,o,s])[0],s=i[1],l=i[2],t=i[3],i=h[1],h[1]=h[2],h[2]=i),[a,c,o,s,l,t,h]),o=(c=xt(a,7))[0],s=c[1],l=c[2],t=c[3],h=c[4],a=c[5],c=xt(function(t,e){for(var r=[],i=0,n=e.length;i<n;i++){var a=e[i];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,c[6]),6);return[[o,s,l,t,h,a],[c[0],c[1],c[2],c[3],c[4],c[5]]]},isOverflow:On,transform:function(t,e){var r,i=(x=xt(t,6))[0],n=x[1],a=x[2],o=x[3],s=x[4],l=x[5],h=xt(e,6),c=h[0],u=h[1],_=h[2],f=h[3],d=h[4],p=h[5],g=On(t,e),m=qt.identity();m[12]=-i,m[13]=-n;var v=Cn(i,n,a,o);0!==v&&(r=Rn(-v),m=qt.multiply(r,m));var y=Q.pointsDistance(i,n,a,o),x=Q.pointsDistance(c,u,_,f);return(h=qt.identity())[12]=-c,h[13]=-u,t=v=Cn(c,u,_,f),0!==v&&(r=Rn(-v),h=qt.multiply(r,h)),e=Math.abs(qt.calPoint([s,l],m)[1]),v=Math.abs(qt.calPoint([d,p],h)[1]),y===x&&e===v||(r=qt.identity(),y!==x&&(r[0]=x/y),e!==v&&(r[5]=v/e),m=qt.multiply(r,m)),h=m,i=xt(qt.calPoint([i,n],h),2),n=i[0],i=i[1],a=xt(qt.calPoint([a,o],h),2),o=a[0],a=a[1],s=xt(qt.calPoint([s,l],h),2),l=s[0],h=s[1],s=Q.pointsDistance(n,i,o,a),i=Q.pointsDistance(n,i,l,h),h=Q.pointsDistance(l,h,o,a),o=Q.pointsDistance(c,u,_,f),a=Q.pointsDistance(c,u,d,p),f=Q.pointsDistance(d,p,_,f),i=Q.angleBySide(h,s,i),a=Q.angleBySide(f,o,a),i!==a&&((r=qt.identity())[4]=Math.tan(i-.5*Math.PI)+Math.tan(.5*Math.PI-a),m=qt.multiply(r,m)),g&&(m[1]=-m[1],m[5]=-m[5],m[13]=-m[13]),(r=0!==t?Rn(t):qt.identity())[12]=c,r[13]=u,m=qt.multiply(r,m),qt.m2m6(m)}},ct={matrix:qt,tar:b,geom:Q},Zt=g.STYLE_KEY,Sn=Zt.TRANSLATE_X,kn=Zt.TRANSLATE_Y,wn=Zt.TRANSLATE_Z,In=Zt.SCALE_X,Ln=Zt.SCALE_Y,Dn=Zt.SCALE_Z,Pn=Zt.SKEW_X,Nn=Zt.SKEW_Y,Fn=Zt.ROTATE_X,Bn=Zt.ROTATE_Y,Gn=Zt.ROTATE_Z,Yn=Zt.ROTATE_3D,Hn=Zt.PERSPECTIVE,Wn=Zt.MATRIX,Un=Zt.FONT_SIZE,Xn=C.PX,Vn=C.PERCENT,Kn=C.REM,zn=C.VW,$n=C.VH,ar=ct.matrix,ur=ct.geom,jn=ar.identity,Zn=(ar.calPoint,ar.multiply),qn=ar.isE,Jn=ur.d2r;ur.pointInPolygon;function Qn(t,e,r,i){var n,a,o,s,t=(n=e,a=r,o=i,s=[],t.forEach(function(t){var e=xt(t,2),t=e[0],e=e[1];s.push([t,function(t,e,r,i,n){if(t===Sn||t===wn){if(e[1]===Vn)return e[0]*r*.01;if(e[1]===Kn)return e[0]*n.computedStyle[Un];if(e[1]===zn)return e[0]*n.width*.01;if(e[1]===$n)return e[0]*n.height*.01}else if(t===kn){if(e[1]===Vn)return e[0]*i*.01;if(e[1]===Kn)return e[0]*n.computedStyle[Un];if(e[1]===zn)return e[0]*n.width*.01;if(e[1]===$n)return e[0]*n.height*.01}else{if(t===Wn)return e;if(t===Yn)return e}return e[0]}(t,e,n,a,o)])}),s),g=jn();return t.forEach(function(t){var e,r,i,n,a,o,s,l,h,c,u,_=xt(t,2),f=_[0],d=_[1],p=jn();e=p,i=d,(r=f)===Sn?e[12]=i:r===kn?e[13]=i:r===wn?e[14]=i:r===In?e[0]=i:r===Ln?e[5]=i:r===Dn?e[10]=i:r===Pn?(i=Jn(i),e[4]=Math.tan(i)):r===Nn?(i=Jn(i),e[1]=Math.tan(i)):r===Fn?(i=Jn(i),a=Math.sin(i),n=Math.cos(i),e[5]=e[10]=n,e[6]=a,e[9]=-a):r===Bn?(i=Jn(i),s=Math.sin(i),u=Math.cos(i),e[0]=e[10]=u,e[8]=s,e[2]=-s):r===Gn?(i=Jn(i),h=Math.sin(i),l=Math.cos(i),e[0]=e[5]=l,e[1]=h,e[4]=-h):r===Yn?(t=(c=xt(i,4))[0],_=c[1],d=c[2],f=c[3],f=Jn(f[0]),n=Math.sin(f),a=Math.cos(f),!t||_||d?!_||t||d?!d||t||_?(1!==(u=Math.sqrt(t*t+_*_+d*d))&&(t*=o=1/u,_*=o,d*=o),s=t*_,l=_*d,h=d*t,c=t*n,f=_*n,u=d*n,e[0]=t*t*(o=1-a)+a,e[1]=s*o+u,e[2]=h*o-f,e[3]=0,e[4]=s*o-u,e[5]=_*_*o+a,e[6]=l*o+c,e[7]=0,e[8]=h*o+f,e[9]=l*o-c,e[10]=d*d*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(d<0&&(n=-n),e[0]=a,e[4]=-n,e[1]=n,e[5]=a):(_<0&&(n=-n),e[0]=a,e[8]=n,e[2]=-n,e[10]=a):(t<0&&(n=-n),e[5]=a,e[9]=-n,e[6]=n,e[10]=a)):r===Hn&&0<i?(i=Math.max(i,1),e[11]=-1/i):r===Wn&&he.assignMatrix(e,i),g=Zn(g,p)}),g}function ta(t,e){var r=xt(e,2),i=r[0],e=r[1],r=t.slice(0);return 0===i&&0===e||qn(t)?r:(r=Zn([1,0,0,0,0,1,0,0,0,0,1,0,i,e,0,1],r),r=Zn(r,[1,0,0,0,0,1,0,0,0,0,1,0,-i,-e,0,1]))}var ea={calMatrix:Qn,calOrigin:function(t,r,i,n){var a=[];return t.forEach(function(t,e){t[1]===Xn?a.push(t[0]):t[1]===Vn?a.push(t[0]*(e?i:r)*.01):t[1]===Kn?a.push(t[0]*n.computedStyle[Un]):t[1]===zn?a.push(t[0]*n.width*.01):t[1]===$n&&a.push(t[0]*n.height*.01)}),a},calMatrixByPerspective:function(t,e){return t=!qn(e)?Zn(e,t):t},calPerspectiveMatrix:function(t,e){if(t&&0<t){var r=jn();t=Math.max(t,1),r[11]=-1/t;t=xt(e,2),e=t[0],t=t[1];return(e||t)&&(r=Zn([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=Zn(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r}},calMatrixByOrigin:ta,calMatrixWithOrigin:function(t,e,r,i){return ta(Qn(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}};function ra(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function ia(t){return 3*Math.floor(.5*t)}var na={kernelSize:ra,outerSize:function(t){return ia(ra(t))},outerSizeByD:ia,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),n=0,a=i;0<=a;a--){var o=Math.pow(Math.E,-Math.pow(a,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(o),n+=o}for(var s=1;s<=i;s++){var l=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(l),n+=l}if(1!==n)for(var h=0;h<e;h++)r[h]/=n;return r}},m=g.STYLE_KEY,aa=m.TRANSFORM_ORIGIN,oa=m.TRANSFORM,sa=m.DISPLAY,la=m.VISIBILITY,Jt=g.NODE_KEY,ha=Jt.NODE_OPACITY,ca=Jt.NODE_CACHE,ua=Jt.NODE_CACHE_FILTER,_a=Jt.NODE_CACHE_OVERFLOW,fa=Jt.NODE_HAS_CONTENT,da=Jt.NODE_COMPUTED_STYLE;function pa(t,e){var r=t.size,i=t.sx1,n=t.sy1,a=t.width,o=t.height,s=t.bbox,e=we.getCacheCanvas(a,o,null,e);return e.x=0,e.y=0,e.bbox=s,e.size=r,e.sx1=i,e.sy1=n,e.dx=t.dx,e.dy=t.dy,e.dbx=t.dbx,e.dby=t.dby,e.width=a,e.height=o,e}var ga=function(){function f(t,e,r,i,n,a,o){_(this,f),this.__init(t,e,r,i,n,a,o)}return d(f,[{key:"__init",value:function(t,e,r,i,n,a,o){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=n;r=xt(i.getCoords(n),2),n=r[0],r=r[1];this.__x=n,this.__y=r,this.__appendData(a,o),i.canvas&&(this.__enabled=!0,(o=i.ctx).setTransform(1,0,0,1,0,0),o.globalAlpha=1,ce.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,n,a,o;he.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),(o=Tn.getInstance(Math.max(i,n)))?(a=o.page,o=o.pos,this.__init(i,n,t,a,o,e,r)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}}],[{key:"MAX",get:function(){return Tn.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),a=Tn.getInstance(Math.max(i,n));if(a)return new f(i,n,t,a.page,a.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=0;e.forEach(function(t){var e=xt(t,2),t=e[0],e=e[1];"blur"===t&&(r=na.outerSize(e))});var i=t.x,n=t.y,a=t.size,o=t.canvas,s=t.sx1,l=t.sy1,h=t.width,c=t.height,u=t.bbox;(u=u.slice(0))[0]-=r,u[1]-=r,u[2]+=r,u[3]+=r;var _=we.getCacheCanvas(h+2*r,c+2*r,null,"filter1");return _.ctx.filter=At.canvasFilter(e),_.ctx.drawImage(o,i,n,h,c,r,r,h,c),_.ctx.filter="none",_.draw(),_.bbox=u,_.x=0,_.y=0,_.size=a,_.sx1=s-r,_.sy1=l-r,_.dx=t.dx,_.dy=t.dy,_.dbx=t.dbx,_.dby=t.dby,_.width=h+2*r,_.height=c+2*r,_}},{key:"genMask",value:function(t,e,r,i,n){for(var a=pa(t,"mask1"),o=[];e&&e.isMask;)o.push(e),e=e.next;var s=a.x,l=a.y,h=a.ctx,c=a.dbx,u=a.dby;n[0]+=s+c,n[1]+=l+u;var _=ea.calMatrixByOrigin(i,n);return o.forEach(function(t){var e=t.__config,r=e[_a],i=e[ua],t=e[ca],r=r&&r.available&&r;(r=(r=r||i&&i.available&&i)||t&&t.available&&t)?(h.globalAlpha=e[ha],f.drawCache(r,a,e[da][oa],qt.identity(),e[da][aa].slice(0),_)):e[fa]&&"none"!==e[da][sa]&&"hidden"!==e[da][la]&&we.error("CacheMask is oversize")}),h.setTransform(1,0,0,1,0,0),h.globalAlpha=1,h.globalCompositeOperation=r?"source-out":"source-in",f.drawCache(t,a),h.globalCompositeOperation="source-over",a.draw(h),a}},{key:"genOverflow",value:function(t,e){var r=t.bbox,i=e.sx,n=e.sy,a=e.outerWidth,o=e.outerHeight;if(r[0]<i||r[1]<n||r[2]>i+a||r[3]>n+o){var s=pa(t,"overflow"),e=s.ctx;return e.setTransform(1,0,0,1,0,0),e.globalAlpha=1,f.drawCache(t,s),s.draw(e),e.globalCompositeOperation="destination-in",e.fillStyle="#FFF",e.beginPath(),e.rect(i-r[0],n-r[1],a,o),e.fill(),e.closePath(),e.globalCompositeOperation="source-over",s}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(he.equalArr(e,r))return t;var i=r[0]-e[0],n=r[1]-e[1],a=f.getInstance(e);if(a&&a.enabled){var o=t.x,s=t.y,l=t.canvas,h=t.width,c=t.height,r=a.x,e=a.y;return a.sx1=t.sx1,a.sy1=t.sy1,a.dx=t.dx+i,a.dy=t.dy+n,a.dbx=t.dbx+i,a.dby=t.dby+n,a.ctx.drawImage(l,o,s,h,c,i+r,n+e,h,c),a.__available=!0,t.release(),a}}},{key:"drawCache",value:function(t,e,r,i,n,a){var o=e.x,s=e.y,l=e.sx1,h=e.sy1,c=e.ctx,u=e.dbx,_=e.dby,f=t.x,d=t.y,p=t.canvas,g=t.sx1,m=t.sy1,v=t.dbx,y=t.dby,e=t.width,t=t.height,v=o+g-l+u-v,y=s+m-h+_-y;r&&i&&n&&(n[0]+=v,n[1]+=y,n=ea.calMatrixByOrigin(r,n),i=qt.multiply(i,n),a&&(i=he.equalArr(i,a)?qt.identity():(a=qt.inverse(a),qt.multiply(a,i))),c.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),c.drawImage(p,f,d,e,t,v,y,e,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var n=i.x,a=i.y,o=i.canvas,s=i.sx1,l=i.sy1,h=i.dbx,e=i.dby,r=i.width,i=i.height;t.drawImage(o,n,a,r,i,s-h,l-e,r,i)}}]),f}(),$t=g.STYLE_KEY,F=g.STYLE_KEY,ma=F.TRANSLATE_X,va=F.TRANSLATE_Y,ya=F.TRANSLATE_Z,xa=F.OPACITY,Ea=F.FILTER,ba=F.PERSPECTIVE,Aa=F.PERSPECTIVE_ORIGIN,Ma={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512},Ta=(a(b={},$t.SCALE_X,!0),a(b,$t.SCALE_Y,!0),a(b,$t.SCALE_Z,!0),a(b,$t.ROTATE_X,!0),a(b,$t.ROTATE_Y,!0),a(b,$t.ROTATE_Z,!0),a(b,$t.ROTATE_3D,!0),a(b,$t.TRANSFORM,!0),a(b,$t.TRANSFORM_ORIGIN,!0),b),Ca=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Tr.isIgnore(t)?Ma.NONE:t===ma?Ma.TRANSLATE_X:t===va?Ma.TRANSLATE_Y:t===ya?Ma.TRANSLATE_Z:Ta.hasOwnProperty(t)?Ma.TRANSFORM:t===xa?Ma.OPACITY:t===Ea?Ma.FILTER:t===ba||t===Aa?Ma.PERSPECTIVE:Tr.isRepaint(t)?Ma.REPAINT:Ma.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<Ma.REFLOW}},Ma);Ca.TRANSFORMS=Ta;var Zt=g.STYLE_KEY,Ra=Zt.DISPLAY,Oa=Zt.LINE_HEIGHT,Sa=Zt.FONT_SIZE,ka=Zt.FONT_FAMILY,wa=Zt.FONT_STYLE,Ia=Zt.FONT_WEIGHT,La=Zt.COLOR,Da=Zt.VISIBILITY,Pa=Zt.LETTER_SPACING,Na=Zt.OVERFLOW,Fa=Zt.WHITE_SPACE,Ba=Zt.TEXT_OVERFLOW,Ga=Zt.WIDTH,ar=g.NODE_KEY,Ya=ar.NODE_CACHE,Ha=ar.NODE_LIMIT_CACHE,Wa=ar.NODE_DOM_PARENT,Ua=ar.NODE_MATRIX_EVENT,Xa=ar.NODE_OPACITY,ur=g.UPDATE_KEY,Va=ur.UPDATE_NODE,Ka=ur.UPDATE_MEASURE,za=ur.UPDATE_FOCUS,$a=ur.UPDATE_CONFIG,ja=ue.ELLIPSIS,Za=C.AUTO,qa=function(){t(i,T);var r=e(i);function i(t){var e;return _(this,i),(e=r.call(this)).__content=he.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return d(i,[{key:"__computeMeasure",value:function(t,e){var r=this.content,i=this.computedStyle,n=this.charWidthList;n.splice(0);for(var a=i[ka].split(","),o="arial",s=0,l=a.length;s<l;s++)if(we.checkSupportFontFamily(a[s])){o=a[s];break}this.__ff=o;for(var h=i[Sa],c=i[Ia],u=this.__key=i[Sa]+","+o+","+c,_=ue.data[u]=ue.data[u]||{ff:o,fs:h,fw:c,hash:{},s:""},f=ue.charWidth[u]=ue.charWidth[u]||{},d=0,p=!1,g=this.domParent;"inline"===g.currentStyle[Ra];)g=g.domParent;for(var m=(this.__bp=g).computedStyle,v=0,y=m[ka].split(","),x=y.length;v<x;v++)if(we.checkSupportFontFamily(y[v])){o=a[v];break}var E=m[Sa],h=m[Ia],c=this.__pKey=E+",arial,"+h,u=ue.charWidth[c]=ue.charWidth[c]||{};t===Et.CANVAS||t===Et.WEBGL?(t===Et.WEBGL&&(e=we.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__").ctx),u.hasOwnProperty(ja)||(e.font=_n.setFontStyle(m),u[ja]=e.measureText(ja).width),e.font=_n.setFontStyle(i)):t===Et.SVG&&(u.hasOwnProperty(ja)||(u[ja]=0,(ue.data[c]=ue.data[c]||{ff:"arial",fs:E,fw:h,hash:{},s:""}).s+=ja,p=!0));for(var b=0,A=r.length;b<A;b++){var M=r.charAt(b),T=void 0;f.hasOwnProperty(M)?(T=f[M],n.push(T),d+=T,this.__charWidth=Math.max(this.charWidth,T)):t===Et.CANVAS||t===Et.WEBGL?(T=f[M]=e.measureText(M).width,n.push(T),d+=T,this.__charWidth=Math.max(this.charWidth,T)):(_.hash.hasOwnProperty(M)||(_.s+=M),_.hash[M]=!0,n.push(-1),p=!0)}this.__textWidth=d,p&&ue.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,i=this.__key,n=ue.charWidth[i],a=0,o=0,s=r.length;o<s;o++)r[o]<0&&(a+=t=r[o]=n[e.charAt(o)],this.__charWidth=Math.max(this.charWidth,t));this.__textWidth=a}},{key:"__layout",value:function(t){var e=this.__config[Ya];e&&e.release();var r=t.x,i=t.y,n=t.w,a=t.lx,o=void 0===a?r:a,s=t.lineBoxManager,e=t.endSpace,l=void 0===e?0:e,a=t.lineClamp,h=void 0===a?0:a,e=t.lineClampCount,c=void 0===e?0:e;this.__x=this.__sx1=r,this.__y=this.__sy1=i;var a=this.isDestroyed,u=this.content,e=this.currentStyle,_=this.computedStyle,f=this.textBoxes,d=this.charWidthList,p=this.root,g=this.__ff,m=this.__key;if(f.splice(0),this.__config[Ha]=!1,a||"none"===e[Ra]||!u)return c;var v,y,x,E,b=this.__ox=this.__oy=0,A=0,M=r-o,T=M,C=u.length,R=0,O=_[Oa],S=_[Pa],a=_[Fa],k=_[Sa],w=_[Ia],I=bt.info[g].padding,L=!!I,D=ue.charWidth[this.__pKey][ja],P=0;if("nowrap"===a){var N,F,e=this.__bp.currentStyle,B=e[Ra],a=e[Na],G=e[Ga],e=e[Ba];if("hidden"===a)for(;A<C;){if(n<(T+=d[A]+S)){("block"===B||"flex"===B||G[1]!==Za)&&(N=!0);break}A++}else for(;A<C;)T+=d[A++]+S;N&&"ellipsis"===e?(i=(F=xt(this.__lineBack(T,n,M,l,D,S,b,A,C,P,O,o,r,i,R,f,u,d,s),2))[0],R=F[1]):(F=new yn(this,f.length,r,i,T-M,O,u,d),f.push(F),s.addItem(F),R=T-M,i+=O)}else{for(;A<C;){var Y,H,W,U=d[A]+S;if(T+=U,L&&((Y=u[A])===v&&I.hasOwnProperty(Y)&&I[Y]&&(W=void 0,H=ue.padding[m]=ue.padding[m]||{},ue.padding.hasOwnProperty(m)&&H.hasOwnProperty(Y)&&(W=!0,T-=H[Y]),W||(W=0,p.renderMode===Et.CANVAS?(p.ctx.font=_n.setFontStyle(_),W=2*p.ctx.measureText(Y).width-p.ctx.measureText(Y+Y).width,W*=I[Y]):p.renderMode===Et.SVG&&(W=we.measureTextSync(m,g,k,w,Y),W*=I[Y]),T-=W,H[Y]=W)),v=Y),0!==U)if(T===n){if(h&&h-1<=P+c){var X=xt(this.__lineBack(T,n,M,l,D,S,b,A,C,P,O,o,r,i,R,f,u,d,s),2);i=X[0],R=X[1],P++;break}X=void 0;A===C-1&&n-l<T&&A&&(T-=d[A--]),A++,P?(X=new yn(this,f.length,o,i,T,O,u.slice(b,A),d.slice(b,A)),R=Math.max(R,T)):X=new yn(this,f.length,r,i,R=T-M,O,u.slice(b,A),d.slice(b,A)),f.push(X),s.addItem(X,!0),i+=Math.max(O,s.lineHeight),b=A,T=0,P++,v=null}else if(n+1e-10<T){if(h&&h-1<=P+c){var V=xt(this.__lineBack(T,n,M,l,D,S,b,A,C,P,O,o,r,i,R,f,u,d,s),2);i=V[0],R=V[1],P++;break}X=void 0,X=A<=b?T:T-d[A--];A++;V=void 0;P?(V=new yn(this,f.length,o,i,X,O,u.slice(b,A),d.slice(b,A)),R=Math.max(R,X)):V=new yn(this,f.length,r,i,R=X-M,O,u.slice(b,A),d.slice(b,A)),f.push(V),s.addItem(V,!0),i+=Math.max(O,s.lineHeight),b=A,T=0,P++,v=null}else A++;else A++}P||(this.__x=this.__sx1=o),b<C&&(!h||P+c<h)&&(P?(n-l<T&&b<C-1&&(y=!0,T-=d[C-1]),E=new yn(this,f.length,o,i,T,O,u.slice(b,y?C-1:C),d.slice(b,y?C-1:C)),R=Math.max(R,T),f.push(E),s.addItem(E),i+=Math.max(O,s.lineHeight),y&&(y=d[C-1],E=new yn(this,f.length,o,i,y,O,u.slice(C-1),d.slice(C-1)),R=Math.max(R,y),f.push(E),s.setNewLine(),s.addItem(E),i+=O,P++)):(b&&n-l<T&&(x=!0,T-=d[C-1]),E=new yn(this,f.length,r,i,R=T-M,O,u.slice(b,x?C-1:C),d.slice(b,x?C-1:C)),f.push(E),s.addItem(E),i+=Math.max(O,s.lineHeight),x&&(x=d[C-1],E=new yn(this,f.length,o,i,x,O,u.slice(C-1),d.slice(C-1)),R=Math.max(R,x),f.push(E),s.setNewLine(),s.addItem(E),i+=O,P++)))}return this.__width=R,this.__height=i-t.y,this.__baseLine=_n.getBaseLine(_),P}},{key:"__lineBack",value:function(t,e,r,i,n,a,o,s,l,h,c,u,_,f,d,p,g,m,v){for(;o<=s;s--)if((t-=m[s]+a)+n+i<=e&&s){var y=new yn(this,p.length,h?u:_,f,d=t-(h?0:r),c,g.slice(o,s),m.slice(o,s));p.push(y),v.addItem(y,!0),f+=Math.max(c,v.lineHeight),this.__ellipsis=!0;break}if(s<0){var x=v.lineBox;if(x.size){var E=x.list;t:for(var b=E.length-1;0<=b;b--){var A=E[b],M=A.content,T=A.wList,C=A.width;if(t-C+n<=e||!b)for(var R=T.length-1;0<=R;R--){if(!R&&!b||t+n<=e){A.__content=M,A.__width=C,A.parent.__ellipsis=!0;break t}var O=T[R];A.__endY-=O,C-=O,M=M.slice(0,R),t-=O,T.pop()}else t-=C;E.pop(),A.parent.textBoxes.pop()}}else{x=new yn(this,p.length,h?u:_,f,d=t-(h?0:r),c,g.charAt(o),m.slice(o,o+1));p.push(x),v.addItem(x,!0),f+=Math.max(c,v.lineHeight),this.__ellipsis=!0}}return[f,d]}},{key:"__offsetX",value:function(e,t){D(L(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){D(L(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.charWidthList[0]}},{key:"__inlineSize",value:function(){var r,i;this.textBoxes.forEach(function(t,e){i=e?(r=Math.min(r,t.x),Math.max(i,t.x+t.width)):(r=t.x,t.x+t.width)}),this.__x=r,this.__sx=this.__sx1=r+this.ox,this.__width=i-r}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;e===Et.SVG&&(this.__virtualDom={type:"text",children:[]});var o=this.isDestroyed,s=this.computedStyle,l=this.textBoxes,h=this.cacheStyle,c=this.__ellipsis,u=this.__bp,_=this.__config;if(!o&&"none"!==s[Ra]&&"hidden"!==s[Da]&&l.length){if(e===Et.CANVAS||e===Et.WEBGL){if(e===Et.WEBGL)if(i){var f=this.sx,d=this.sy,o=this.bbox,i=_[Ya];if(i?i.reset(o,f,d):i=ga.getInstance(o,f,d),!i||!i.enabled)return void(_[Ha]=!0);(_[Ya]=i).__available=!0,r=i.ctx,n+=-f+i.x,a+=-d+i.y,_[Ha]=!1}else{var p=this.root,g=we.getCacheCanvas(p.width,p.height,"__$$OVERSIZE$$__");r=g.ctx;var p=_[Wa].__config,g=p[Ua],p=p[Xa];r.setTransform(g[0],g[1],g[4],g[5],g[12],g[13]),r.globalAlpha=p}var g=_n.setFontStyle(s);r.font!==g&&(r.font=g);p=h[La];r.fillStyle!==p&&(r.fillStyle=p)}l.forEach(function(t){t.render(e,r,s,h,n,a)}),e===Et.SVG&&(this.virtualDom.children=l.map(function(t){return t.virtualDom})),c&&(p=(g=l[l.length-1]).endX,c=g.endY,l=u.computedStyle,e===Et.CANVAS||e===Et.WEBGL?(g=_n.setFontStyle(l),r.font!==g&&(r.font=g),g=u.__cacheStyle[La],r.fillStyle!==g&&(r.fillStyle=g),r.fillText(ja,p,c)):e===Et.SVG&&(l=[["x",p],["y",c],["fill",u.__cacheStyle[La]],["font-family",l[ka]],["font-weight",l[Ia]],["font-style",l[wa]],["font-size",l[Sa]+"px"]],this.virtualDom.children.push({type:"item",tagName:"text",props:l,content:ja})))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(D(L(i.prototype),"__destroy",this).call(this),(t=this.__config[Ya])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,t){var n=this;i!==n.__content?(root.delRefreshTask(n.__task),root.addRefreshTask(n.__task={__before:function(){n.__content=i;var t={},e=n.domParent;t[Va]=e,t[Ka]=!0,t[za]=Ca.REFLOW,t[$a]=e.__config;var r=e.root;r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(){he.isFunction(t)&&t()}})):he.isFunction(t)&&t()}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"firstCharWidth",get:function(){return this.charWidthList[0]||0}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.sx,e=this.sy;return[t,e,t+this.width,e+this.height]}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}();qa.prototype.__renderByMask=qa.prototype.render;var Ja=Xt.TYPE_VD,Qa=Xt.TYPE_GM,to=Xt.TYPE_CP;function eo(t){if(Array.isArray(t))return t.map(eo);if(!t||-1===[Ja,Qa,to].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==Ja&&t.$$type!==Qa)t&&t.$$type===to?(r.push(t),i.lastText=null):he.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===Ja&&eo(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var ro,io,no,ao,oo,m=g.NODE_KEY,so=m.NODE_DOM_PARENT,lo=m.NODE_STYLE,ho=m.NODE_CURRENT_STYLE,co=m.NODE_COMPUTED_STYLE,uo=m.NODE_MATRIX,_o=m.NODE_MATRIX_EVENT,fo=Xt.TYPE_VD,po=Xt.TYPE_GM,go=Xt.TYPE_CP;function mo(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return mo(t,e,r,i)});if(he.isObject(t)&&t.$$type){var n=t.tagName,a=t.props,o=t.children,s=t.klass,l=t.$$type,h=t.__inheritAnimate,c=t.__animateRecords;if(l===go&&t.__placeholder)return t.__placeholder;if(l===fo){if("img"===n){if(u=new no(n,a),Array.isArray(o)&&o.length)throw new Error("Img can not contain children")}else u=new io(n,a);if("p"===n)i=!0;else if("div"===n&&i)throw new Error("Markup p can not contain div");o=Array.isArray(o)?vo(u,mo(o,e,r,i)):[],u.__children=o}else if(l===po)var u=new(ao.getRegister(n))(n,a);else{if(l!==go)return new qa(t);(u=new s(a)).__tagName=n||u.__tagName}(t.vd=u).__json=t,c&&((u.__animateRecords=c).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),h&&(he.extendAnimate(h,u),delete t.__inheritAnimate),u.__root=e,u.__host=r,l===go&&u.__init();a=a.ref;return he.isString(a)&&a||he.isNumber(a)?r.ref[a]=u:he.isFunction(a)&&a(u),u}return new qa(t)}function vo(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){vo(e,t,i)}):(r instanceof ro||r instanceof oo||r instanceof qa)&&(r.__parent=e,r.__domParent=e,r instanceof qa&&[lo,ho,co,uo,_o].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[so]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof oo&&((t=r.shadowRoot)instanceof qa&&(t.__parent=e,[lo,ho,co,uo,_o].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[so]=e))),r}var yo={ref:function(t){ro=t.Xom,io=t.Dom,no=t.Img,ao=t.Geom,oo=t.Component},initRoot:function(t,e){return t=eo({tagName:e.tagName,props:{},children:t,$$type:fo}),e.__json=t,vo(e.__host=e,mo(t.children,e,e))},initDom:function(t,e,r,i){return vo(i,mo(t,e,r))},initCp:function(t,e,r){return he.isObject(t)?mo(t,e,r):new qa(t)},initCp2:function(t,e,r,i){var n=new t.klass(t.props);return n.__tagName=t.tagName||n.__tagName,n.__root=e,n.__host=r,n.__json=t,n.__init(),vo(i,n)},relation:vo},xo=he.isFunction,Eo=function(){function o(){_(this,o),this.__eHash={}}return d(o,[{key:"on",value:function(t,e){if(e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else if(e){this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,n){if(xo(n)){var a=this;if(o.__karasEventCb=n,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)a.once(i[t],n);else n&&a.on(i,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(a,e),a.off(i,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e||a[n].__karasEventCb===e){a.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)this.emit(t[n],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,l=(o=o.slice()).length;s<l;s++){var h=o[s];xo(h)&&h.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o;e.__eHash={};for(var i=["on","once","off","emit"],n=i.length-1;0<=n;n--){var a=i[n];e[a]=r[a]}}}}]),o}();a(Eo,"REFRESH","refresh"),a(Eo,"PAUSE","pause"),a(Eo,"PLAY","play"),a(Eo,"FRAME","frame"),a(Eo,"FINISH","finish"),a(Eo,"CANCEL","cancel"),a(Eo,"BEGIN","begin"),a(Eo,"END","end");var bo=he.isNil,Ao=he.isFunction,Mo=he.clone,To=he.extend,Co={};var Ro=function(){t(a,Eo);var r=e(a);function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _(this,a),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=he.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return d(a,[{key:"setState",value:function(t,e){var r=this,i=this;if(bo(t))t={};else{if(Ao(t))return;if(0===Object.keys(t).length)return void(Ao(e)&&e.call(i));var n=Mo(i.state);t=To(n,t)}var a,o=i.root;o&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],a=[],n=i.__task={__before:function(){a=i.__taskList.splice(0),function t(e){e.__hasUpdate||(e.__hasUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){a.forEach(function(t){Ao(t)&&t.call(i)})}},o.addRefreshCp(n)):Ao(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this;this.__ref={};var e=this.root,i=t||eo(this.render()),n=yo.initCp(i,e,this);if(this.__cd=i,!(n instanceof qa))if(n instanceof T){t=_n.normalize(this.props.style),i=Object.keys(t);To(n.style,t,i),To(n.currentStyle,t,i),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),n.listener[t]=e)})}else if(!(n instanceof a))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=n).__host=this;n instanceof a;)n.__hostRoot=this,n=(n.shadow.__host=n).shadow;((this.__shadowRoot=n).__hostRoot=this).__isMounted||(this.__isMounted=!0,Ao(this.componentDidMount)&&e.once(Eo.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){we.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,Ao(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof qa))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return Co}},{key:"getRegister",value:function(t){if(!t||!he.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!Co.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return Co[t]}},{key:"register",value:function(t,e){if(!(t&&he.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof a))throw new Error("Invalid param: Component register");if(a.hasRegister(t))throw new Error("Component has already register: ".concat(t));Co[t]=e}},{key:"hasRegister",value:function(t){return t&&Co.hasOwnProperty(t)}},{key:"delRegister",value:function(t){a.hasRegister(t)&&delete Co[t]}}]),a}();Object.keys(Tr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(Ro.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){Ro.prototype[e]=function(){var t=this.shadowRoot;if(t&&Ao(t[e]))return t[e].apply(t,arguments)}});var Jt=g.STYLE_KEY,Oo=Jt.SCALE_X,So=Jt.SCALE_Y,ko=C.PERCENT,wo=C.NUMBER;var Io={matrixResize:function(t,e,r,i,n,a,o,s){if(t!==r||e!==i){i=[[Oo,[r/t,wo]],[So,[i/e,wo]]],e=ea.calOrigin([[0,ko],[0,ko]],o,s);return e[0]+=n,e[1]+=a,ea.calMatrixWithOrigin(i,e,o,s)}}},F=g.STYLE_KEY,Lo=F.BACKGROUND_POSITION_X,Do=F.BACKGROUND_POSITION_Y,Po=F.FONT_SIZE,No=g.NODE_KEY.NODE_DEFS_CACHE,Fo=he.clone,Bo=he.joinArr,Go=At.canvasPolygon,Yo=At.svgPolygon,Ho=C.AUTO,Wo=C.PX,Uo=C.PERCENT,Xo=C.STRING,Vo=C.REM,Ko=C.VW,zo=C.VH;function $o(t,e,r,i,n,a,o,s,l,h,c,u){var _,f=12<arguments.length&&void 0!==arguments[12]?arguments[12]:"fill",d=13<arguments.length?arguments[13]:void 0;Array.isArray(i)&&(p=i[1],_=i[2],m=i[3],i=i[0]);var p,g,m,u=Ut.calRadius(n,a,o,s,l,h,c,u);if(u=u||[[n,a],[n+o,a],[n+o,a+s],[n,a+s],[n,a]],p&&(p=ea.calMatrixByOrigin(p,[_,m]),g=qt.inverse(p),u=u.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=qt.calPoint([t[r],t[r+1]],g);e.push(n[0]),e.push(n[1])}return e})),e===Et.CANVAS||e===Et.WEBGL)p&&(r.save(),m=t.matrixEvent,p=qt.multiply(m,p),r.setTransform(p[0],p[1],p[4],p[5],p[12],p[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),Go(r,u),r[f](),r.closePath(),p&&r.restore();else if(e===Et.SVG){u=Yo(u);if(d){d={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",u],["fill",i]]}]};return t.__config[No].push(d),r.add(d)}t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",u],["fill",i]]}),p&&(t=t.virtualDom.bb)[t.length-1].props.push(["transform","matrix(".concat(Bo(qt.m2m6(p),","),")")])}}function jo(t,e,r,i){if(Array.isArray(t)){if(t[1]===Wo)return t[0];if(t[1]===Uo)return(e-r)*t[0]*.01;if(t[1]===Vo)return t[0]*i.computedStyle[Po];if(t[1]===Ko)return t[0]*i.width*.01;if(t[1]===zo)return t[0]*i.height*.01}return 0}var Zo,qo={renderBgc:$o,renderImage:function(i,t,e,r,n,a,o,s,l,h,c,u,_,f,d,p,g,m){var v=r.source;if(v){var y=o-n,x=s-a,E=r.width,b=r.height,d=xt(d[f]||[],2),A=d[0],M=d[1];-1===A&&-1===M?(A=E,M=b):-2===A?y<E&&x<b?(M=b/x)<=(A=E/y)?M=(A=y)*b/E:A=(M=x)*E/b:y<E?M=(A=y)*b/E:x<b?A=(M=x)*E/b:(A=E,M=b):-3===A?E<y&&b<x?(A=E/y)<=(M=b/x)?M=(A=y)*b/E:A=(M=x)*E/b:E<y||!(b<x)&&(A=E/y)<=(M=b/x)?M=(A=y)*b/E:A=(M=x)*E/b:-1===A?A=M*E/b:-1===M&&(M=A*b/E);var T=n+jo(_[Lo][f],y,A,i.root),C=a+jo(_[Do][f],x,M,i.root),R=T<n||C<a||n+y<T+A||a+x<C+M,O=0,S=0,k=0,w=0;-1<["repeat-x","repeatX","repeat"].indexOf(p[f])&&(0<(_=T-n)&&(O=Math.ceil(_/A)),0<(_=n+y-T-A)&&(S=Math.ceil(_/A))),-1<["repeat-y","repeatY","repeat"].indexOf(p[f])&&(0<(f=C-a)&&(k=Math.ceil(f/M)),0<(f=a+x-C-M)&&(w=Math.ceil(f/M)));var I=[];if(0<O)for(var L=0;L<O;L++){var D=T-(L+1)*A;I.push([D,C]),!R&&0===L&&D<n&&(R=!0)}if(0<S)for(var P=0;P<S;P++){var N=T+(P+1)*A;I.push([N,C]),!R&&P===S-1&&n+y<N+A&&(R=!0)}if(0<k)for(var F=0;F<k;F++){var B=C-(F+1)*M;I.push([T,B]),!R&&0===F&&B<a&&(R=!0)}if(0<w)for(var G=0;G<w;G++){var Y=C+(G+1)*M;I.push([T,Y]),!R&&G===w-1&&a+x<Y+A&&(R=!0)}if(0<O&&0<k)for(var H=0;H<O;H++)for(var W=0;W<k;W++)I.push([T-(H+1)*A,C-(W+1)*M]);if(0<S&&0<k)for(var U=0;U<S;U++)for(var X=0;X<k;X++)I.push([T+(U+1)*A,C-(X+1)*M]);if(0<O&&0<w)for(var V=0;V<O;V++)for(var K=0;K<w;K++)I.push([T-(V+1)*A,C+(K+1)*M]);if(0<S&&0<w)for(var z=0;z<S;z++)for(var $=0;$<w;$++)I.push([T+(z+1)*A,C+($+1)*M]);if(t===Et.CANVAS||t===Et.WEBGL)R&&(e.save(),$o(this,t,e,"#FFF",n,a,y,x,l,h,c,u,"clip")),e.drawImage(v,T,C,A,M),I.forEach(function(t){e.drawImage(v,t[0],t[1],A,M)}),R&&e.restore();else if(t===Et.SVG){var j,t=Io.matrixResize(E,b,A,M,T,C,y,x),Z=[["xlink:href",r.url],["x",T],["y",C],["width",E],["height",b]];if(t&&!qt.isE(t)&&(j=!0,Z.push(["transform","matrix("+Bo(qt.m2m6(t),",")+")"])),R&&(r=[n,a],s=[o,s],j&&(t=qt.inverse(t),r=qt.calPoint(r,t),s=qt.calPoint(s,t)),s={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(r[0],",").concat(r[1],"L").concat(s[0],",").concat(r[1],"L").concat(s[0],",").concat(s[1],"L").concat(r[0],",").concat(s[1],"L").concat(r[0],",").concat(r[1])],["fill","#FFF"]]}]},r=e.add(s),g[No].push(s),Z.push(["clip-path","url(#"+r+")"])),m){var q={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:Z}]};return i.__config[No].push(q),I.forEach(function(t){var e,r=Fo(Z);!j||(e=Io.matrixResize(E,b,A,M,t[0],t[1],y,x))&&!qt.isE(e)&&(r[5][1]="matrix("+Bo(qt.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],q.children.push({type:"img",tagName:"image",props:r})}),e.add(q)}i.virtualDom.bb.push({type:"img",tagName:"image",props:Z}),I.forEach(function(t){var e,r=Fo(Z);!j||(e=Io.matrixResize(E,b,A,M,t[0],t[1],y,x))&&!qt.isE(e)&&(r[5][1]="matrix("+Bo(qt.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],i.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}},calBackgroundSize:function(t,r,i,n){var a=[];return t.forEach(function(t,e){t[1]===Wo?a.push(t[0]):t[1]===Uo?a.push(t[0]*(e?i:r)*.01):t[1]===Vo?a.push(t[0]*n.computedStyle[Po]):t[1]===Ko?a.push(t[0]*n.width*.01):t[1]===zo?a.push(t[0]*n.height*.01):t[1]===Ho?a.push(-1):t[1]===Xo&&a.push("contain"===t[0]?-2:-3)}),a}},Jo=he.isFunction;function Qo(t,e,r,i){if(i)for(var n=0;n<e;n++){var a=t[n];a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s.__before&&s.__before(r)}}var ts=new(function(){function t(){_(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return d(t,[{key:"__init",value:function(){var c=this,u=c.task,_=c.taskCp;we.cancelAnimationFrame(c.id);var f=c.__now=we.now();!function h(){we.cancelAnimationFrame(c.id),c.id=we.requestAnimationFrame(function(){if(!Zo&&(u.length||_.length)){var t=(n=c.__now=we.now())-f,t=Math.max(t,0);f=n;var e=u.slice(0),r=_.splice(0),i=e.length,n=r.length;Qo(e,i,t),Qo(r,n,t);for(var a=c.__hookTask.splice(0),o=0,s=a.length;o<s;o++){var l=a[o];l&&l()}Qo(e,i,t,!0),Qo(r,n,t,!0),(u.length||_.length)&&h()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Jo(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var n=e[r];if(n===t||n.__karasFramecb===t){e.splice(r,1);break}}e.length||(we.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=Jo(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){Zo=!0}},{key:"resume",value:function(){Zo&&(this.__init(),Zo=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),es=4,rs=1e-7,is=10,ns="function"==typeof Float32Array;function as(t,e){return 1-3*e+3*t}function os(t,e,r){return((as(e,r)*t+(3*r-6*e))*t+3*e)*t}function ss(t,e,r){return 3*as(e,r)*t*t+2*(3*r-6*e)*t+3*e}function ls(t){return t}function hs(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===r)return ls;for(var s=new(ns?Float32Array:Array)(11),t=0;t<11;++t)s[t]=os(.1*t,a,o);function i(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var i=e+.1*((t-s[--r])/(s[r+1]-s[r])),n=ss(i,a,o);return.001<=n?function(t,e,r,i){for(var n=0;n<es;++n){var a=ss(e,r,i);if(0===a)return e;e-=(os(e,r,i)-t)/a}return e}(t,i,a,o):0===n?i:function(t,e,r,i,n){for(var a,o,s=0;0<(a=os(o=e+(r-e)/2,i,n)-t)?r=o:e=o,Math.abs(a)>rs&&++s<is;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:os(i(t),e,r)}}var cs={linear:hs(1,1,0,0),easeIn:hs(.42,0,1,1),easeOut:hs(0,0,.58,1),ease:hs(.25,.1,.25,1),easeInOut:hs(.42,0,.58,1),cubicBezier:hs,getEasing:function(t,e,r,i){return 4===arguments.length?hs(t,e,r,i):Array.isArray(t)?hs(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?n=hs((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(n=this[t]),n):void 0;var n}};cs["ease-in"]=cs.easeIn,cs["ease-out"]=cs.easeOut,cs["ease-in-out"]=cs.easeInOut;var $t=g.STYLE_KEY,us=$t.FILTER,_s=$t.TRANSFORM_ORIGIN,fs=$t.PERSPECTIVE_ORIGIN,ds=$t.BACKGROUND_CLIP,ps=$t.BACKGROUND_POSITION_X,gs=$t.BACKGROUND_POSITION_Y,ms=$t.BOX_SHADOW,vs=$t.TRANSLATE_X,ys=$t.TRANSLATE_Z,xs=$t.BACKGROUND_SIZE,Es=$t.FONT_SIZE,bs=$t.FLEX_BASIS,As=$t.FLEX_DIRECTION,Ms=$t.WIDTH,Ts=$t.HEIGHT,Cs=$t.TOP,Rs=$t.BOTTOM,Os=$t.LINE_HEIGHT,Ss=$t.OPACITY,ks=$t.Z_INDEX,ws=$t.TRANSFORM,Is=$t.COLOR,Ls=$t.FONT_WEIGHT,Ds=$t.FONT_STYLE,Ps=$t.FONT_FAMILY,Ns=$t.TEXT_ALIGN,Fs=$t.MATRIX,Bs=$t.ROTATE_3D,b=g.UPDATE_KEY,Gs=b.UPDATE_NODE,Ys=b.UPDATE_STYLE,Hs=b.UPDATE_KEYS,Ws=b.UPDATE_CONFIG,Zt=g.KEY_FRAME_KEY,Us=Zt.FRAME_STYLE,Xs=Zt.FRAME_TIME,Vs=Zt.FRAME_EASING,Ks=Zt.FRAME_TRANSITION,zs=C.AUTO,$s=C.PX,js=C.PERCENT,Zs=C.INHERIT,qs=C.RGBA,Js=C.STRING,Qs=C.NUMBER,tl=C.REM,el=C.VW,rl=C.VH,il=he.isNil,nl=he.isFunction,al=he.isNumber,ol=he.isObject,sl=he.isString,ll=he.clone,hl=he.equalArr,cl=cs.linear,ul=_n.cloneStyle,_l=Tr.isGeom,fl=Tr.GEOM,dl=jt.COLOR_HASH,pl=jt.LENGTH_HASH,gl=jt.RADIUS_HASH,ml=jt.GRADIENT_HASH,vl=jt.EXPAND_HASH,yl=jt.GRADIENT_TYPE,xl={};function El(t,e,r,i,n){var a={};a[Gs]=n,a[Ys]=t,a[Hs]=e,a[Ws]=r[43],i.__addUpdate(n,r[43],i,r[44],a),r[16]=t,r[0]=!0,i.__frameHook()}function bl(t,e,r,i){return t[1]===$s?e[1]===js?.01*e[0]*r-t[0]:e[1]===tl?e[0]*i.computedStyle[Es]-t[0]:e[1]===el?e[0]*i.width*.01-t[0]:e[1]===rl?e[0]*i.height*.01-t[0]:void 0:t[1]===js?e[1]===$s?100*e[0]/r-t[0]:e[1]===tl?e[0]*i.computedStyle[Es]*100/r-t[0]:e[1]===el?e[0]*i.width/r-t[0]:e[1]===rl?e[0]*i.height/r-t[0]:void 0:t[1]===tl?e[1]===$s?e[0]/i.computedStyle[Es]-t[0]:e[1]===js?.01*e[0]*r/i.computedStyle[Es]-t[0]:e[1]===el?e[0]*i.width*.01/i.computedStyle[Es]-t[0]:e[1]===rl?e[0]*i.height*.01/i.computedStyle[Es]-t[0]:void 0:t[1]===el?e[1]===$s?100*e[0]/i.width-t[0]:e[1]===tl?100*e[0]*i.computedStyle[Es]/i.width-t[0]:e[1]===js?e[0]*r/i.width-t[0]:e[1]===rl?e[0]*i.height/i.width-t[0]:void 0:t[1]===rl?e[1]===$s?100*e[0]/i.height-t[0]:e[1]===tl?100*e[0]*i.computedStyle[Es]/i.height-t[0]:e[1]===el?e[0]*i.width/i.height-t[0]:e[1]===js?e[0]*r/i.height-t[0]:void 0:void 0}function Al(e,r,t,i,n){return t.forEach(function(t){t=function(t,e,r,a,i){var n=[r],o=t[r],s=e[r];if(r===ws){if(!o&&!s)return;var l=o?o[0][1]:qt.identity(),e=s?s[0][1]:qt.identity();return hl(l,e)?void 0:(n[1]=[e[0]-l[0],e[1]-l[1],e[2]-l[2],e[3]-l[3],e[4]-l[4],e[5]-l[5],e[6]-l[6],e[7]-l[7],e[8]-l[8],e[9]-l[9],e[10]-l[10],e[11]-l[11],e[12]-l[12],e[13]-l[13],e[14]-l[14],e[15]-l[15]],n)}if(r===Bs){if(hl(o,s))return;n[1]=[s[0]-s[0],s[1]-o[1],s[2]-o[2],[s[3][0]-o[3][0],s[3][1]]]}else if(r===us){var h={},c={},u={};o&&o.forEach(function(t){u[t[0]]=!0,h[t[0]]=t[1]}),s&&s.forEach(function(t){u[t[0]]=!0,c[t[0]]=t[1]});var _,f={};if(Object.keys(u).forEach(function(t){var e,r,i,n;"blur"===t?_=(h[t]?c[t]?(r=bl(h[t],c[t],0,a.root),f[t]=[r,h[t][1]]):f[t]=[-h[t][0],h[t][1]]:f[t]=c[t].slice(0),!0):"hue-rotate"===t?(e=il(c[t])?0:c[t][0],(r=il(h[t])?0:h[t][0])!==e&&(f[t]=[e-r,js],_=!0)):"saturate"===t||"brightness"===t||"contrast"===t?(i=il(c[t])?100:c[t][0],(n=il(h[t])?100:h[t][0])!==i&&(f[t]=[i-n,js],_=!0)):"grayscale"===t&&(i=il(c[t])?0:c[t][0],(n=il(h[t])?0:h[t][0])!==i&&(f[t]=[i-n,js],_=!0))}),!_)return;n[1]=f}else if(r===_s||r===fs){n[1]=[];for(var d=0;d<2;d++){var p=o[d],g=s[d];p[1]===g[1]?n[1].push(g[0]-p[0]):(g=bl(p,g,a[d?"outerHeight":"outerWidth"],a.root),n[1].push(g||0))}if(hl(n[1],[0,0]))return}else if(r===ps||r===gs){n[1]=[];for(var m=Math.min(o.length,s.length),v=0;v<m;v++){var y=o[v],x=s[v];if(y&&x)if(y[1]===x[1]){var E=x[0]-y[0];if(!E)return void n[1].push(null);n[1].push(E)}else{E=r===ps?"offsetWidth":"offsetHeight";-1<["padding-box","paddingBox"].indexOf(a.computedStyle[ds])?E=r===ps?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(a.computedStyle[ds])&&(E=r===ps?"width":"height");E=bl(y,x,a[E],a.root);if(!E)return void n[1].push(null);n[1].push(E)}else n[1].push(null)}}else if(r===ms){n[1]=[];for(var b=0,A=Math.min(o.length,s.length);b<A;b++){for(var M=o[b],T=s[b],C=[],R=0;R<4;R++)C.push(T[R]-M[R]);for(var O=[],S=0;S<4;S++)O.push(T[4][S]-M[4][S]);C.push(O),n[1].push(C)}}else if(vl.hasOwnProperty(r))if(o[1]===s[1]){var k=s[0]-o[0];if(0==k)return;n[1]=k}else{var w=bl(o,s,a[r===vs||r===ys?"outerWidth":"outerHeight"],a.root);if(!w)return;n[1]=w}else if(r===xs){n[1]=[];for(var I,L=Math.min(o.length,s.length),D=0;D<L;D++){var P=o[D],N=s[D];if(P&&N){for(var F=[],B=0;B<2;B++){var G,Y=P[B],H=N[B];Y[1]===H[1]?F.push(H[0]-Y[0]):(G=D?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(a.computedStyle[ds])?G=D?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(a.computedStyle[ds])&&(G=D?"width":"height"),G=bl(Y,H,a[G],a.root),F.push(G||0))}hl(F,[0,0])?n[1].push(null):(n[1].push(F),I=!0)}else n[1].push(null)}if(!I)return}else if(ml.hasOwnProperty(r)){n[1]=[];for(var W=Math.min(o.length,s.length),U=0;U<W;U++){var X=o[U],V=s[U];if(X&&V&&!sl(X)&&!sl(V))if(X.k===V.k){var K=[];if("linear"===X.k||"radial"===X.k||"conic"===X.k){var z=X.v,$=V.v;K[0]=[];for(var j=a.clientWidth,Z=hl(z,$),q=0,J=Math.min(z.length,$.length);q<J;q++){var Q=z[q],tt=$[q],et=[];et.push([tt[0][0]-Q[0][0],tt[0][1]-Q[0][1],tt[0][2]-Q[0][2],tt[0][3]-Q[0][3]]),Q[1]&&tt[1]&&(Q[1][1]===tt[1][1]?et.push(tt[1][0]-Q[1][0]):(tt=bl(Q[1],tt[1],j,a.root),et.push(tt||0))),K[0].push(et)}if("linear"===X.k){var rt=Array.isArray(X.d);if(Array.isArray(V.d)!==rt){n[1].push(null);continue}if(rt){rt=[V.d[0]-X.d[0],V.d[1]-X.d[1],V.d[2]-X.d[2],V.d[3]-X.d[3]];if(Z&&hl(rt,[0,0,0,0])){n[1].push(null);continue}K[1]=rt}else{var it=V.d-X.d;if(Z&&0==it){n[1].push(null);continue}K[1]=it}}else if("radial"===X.k){it=Array.isArray(X.z);if(Array.isArray(V.z)!==it){n[1].push(null);continue}if(it){K[2]=[];for(var nt=0;nt<5;nt++){var at=X.z[nt];void 0===at&&(at=1);var ot=V.z[nt];void 0===ot&&(ot=1),K[2].push(ot-at)}Z&&hl(n[4],[0,0,0,0,0])&&n[1].push(null)}else{K[2]=[];for(var st=0;st<2;st++){var lt=X.p[st],ht=V.p[st];lt[1]===ht[1]?K[2].push(ht[0]-lt[0]):(ht=bl(lt,ht,a[st?"clientWidth":"clientHeight"],a.root),K[2].push(ht||0))}Z&&hl(n[3],[0,0])&&n[1].push(null)}}else if("conic"===X.k){K[1].push(s.d-o.d),K[2]=[];for(var ct=0;ct<2;ct++){var ut=o.p[ct],_t=s.p[ct];ut[1]===_t[1]?K[2].push(_t[0]-ut[0]):(_t=bl(ut,_t,a[ct?"clientWidth":"clientHeight"],a.root),K[2].push(_t||0))}Z&&0!==n[2]&&hl(n[3],[0,0])&&n[1].push(null)}}else hl(s,X)&&n[1].push(null),K[0]=[V[0]-X[0],V[1]-X[1],V[2]-X[2],V[3]-X[3]];n[1].push(K)}else n[1].push(null);else n[1].push(null)}}else if(dl.hasOwnProperty(r)){if(s=s[0],o=o[0],hl(s,o)||0===s[3]&&0===o[3])return;n[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}else if(gl.hasOwnProperty(r)){if(s[0][0]===o[0][0]&&s[0][1]===o[0][1]&&s[1][0]===o[1][0]&&s[1][1]===o[1][1])return;n[1]=[];for(var ft,dt=0;dt<2;dt++)s[dt][1]===o[dt][1]?n[1].push(s[dt][0]-o[dt][0]):(ft=bl(o[dt],s[dt],a[dt?"outerHeight":"outerWidth"],a.root),n[1].push(ft||0))}else if(pl.hasOwnProperty(r)){if(o[1]===zs||s[1]===zs)return;l=a.computedStyle,k=(a.domParent||a).computedStyle,w=0;if(o[1]===s[1]?w=s[0]-o[0]:r===Os?w=bl(o,s,l[Es],a.root):r===Es?w=bl(o,s,k[Es],a.root):r===bs&&-1<["column","column-reverse","columnReverse"].indexOf(l[As])||-1<[Ts,Cs,Rs].indexOf(r)?o[1]!==zs&&s[1]!==zs&&(w=bl(o,s,k[Ts],a.root)):o[1]!==zs&&s[1]!==zs&&(w=bl(o,s,k[Ms],a.root)),0===w||isNaN(w))return;n[1]=w}else if(fl.hasOwnProperty(r)){if(il(o))return;if(fl[r][i]&&nl(fl[r][i].calDiff)){var pt=fl[r][i].calDiff;if(a.isMulti){for(var gt=[],mt=0,vt=Math.min(o.length,s.length);mt<vt;mt++)gt.push(pt(o[mt],s[mt]));return gt}n[1]=pt(o,s)}else if(a.isMulti)if("points"===r||"controls"===r){if(il(s)||il(o)||hl(o,s))return;n[1]=[];for(var yt=0,xt=Math.min(o.length,s.length);yt<xt;yt++){var Et=o[yt],bt=s[yt];if(il(Et)||il(bt))n[1].push(null);else{for(var At=[],Mt=0,Tt=Math.min(Et.length,bt.length);Mt<Tt;Mt++){var Ct=Et[Mt],Rt=bt[Mt];if(il(Ct)||il(Rt))At.push(null);else{for(var Ot=[],St=0,kt=Math.max(Ct.length,Rt.length);St<kt;St++){var wt=Ct[St],It=Rt[St];il(wt)||il(It)?Ot.push(0):Ot.push(It-wt)}At.push(Ot)}}n[1].push(At)}}}else if("controlA"===r||"controlB"===r){if(il(s)||il(o)||hl(o,s))return;n[1]=[];for(var Lt=0,Dt=Math.min(o.length,s.length);Lt<Dt;Lt++){var Pt=o[Lt],Nt=s[Lt];il(Pt)||il(Nt)?n[1].push(null):n[1].push([Nt[0]-Pt[0],Nt[1]-Pt[1]])}}else{if(s===o||hl(s,o)||"edge"===r||"closure"===r)return;for(var Ft=[],Bt=0,Gt=Math.min(o.length,s.length);Bt<Gt;Bt++){var Yt=o[Bt],Ht=s[Bt];(il(Yt)||il(Ht))&&Ft.push(0),Ft.push(Ht-Yt)}n[1]=Ft}else if("points"===r||"controls"===r){if(il(s)||il(o)||hl(o,s))return;n[1]=[];for(var Wt=0,Ut=Math.min(o.length,s.length);Wt<Ut;Wt++){var Xt=o[Wt],Vt=s[Wt];if(il(Xt)||il(Vt))n[1].push(null);else{for(var Kt=[],zt=0,$t=Math.max(Xt.length,Vt.length);zt<$t;zt++){var jt=Xt[zt],Zt=Vt[zt];il(jt)||il(Zt)?Kt.push(0):Kt.push(Zt-jt)}n[1].push(Kt)}}}else if("controlA"===r||"controlB"===r){if(il(s)||il(o)||hl(o,s))return;n[1]=[s[0]-o[0],s[1]-o[1]]}else{if(s===o||"edge"===r||"closure"===r)return;n[1]=s-o}}else{if(r!==Ss&&r!==ks)return;if(s===o)return;n[1]=s-o}return n}(e[Us],r[Us],t,i,n);t&&e[Ks].push(t)}),r}function Ml(t,e,S,k){var r,i,n,w=ul(t[Us],e),n=(e=t[Vs],n=e?(n=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(n[1]),i=n[2],function(t){if(r&&0<r){var e=1/r;return("start"===i?Math.ceil(t/e):Math.floor(t/e))/r}return t}):cs.getEasing(e):n);n&&n!==cl&&(S=n(S));for(var I=t[Ks],L=k.tagName,a=0,o=I.length;a<o;a++)!function(t){var e=xt(I[t],2),t=e[0],h=e[1],r=w[t];if(t===ws)for(var r=r||(w[t]=[[Fs,qt.identity()]]),i=0;i<16;i++)r[0][1][i]+=h[i]*S;else if(t===Bs)r[0]+=h[0]*S,r[1]+=h[1]*S,r[2]+=h[2]*S,r[3][0]+=h[3][0]*S;else if(xl.hasOwnProperty(t))h&&(r[0]+=h*S);else if(t===us){r=r||(w[t]=[]);var n={};r.forEach(function(t){n[t[0]]=t[1]}),Object.keys(h).forEach(function(t){var e;n.hasOwnProperty(t)?n[t][0]+=h[t][0]*S:"blur"===t||"hue-rotate"===t||"grayscale"===t?((e=h[t].slice(0))[0]*=S,r.push([t,e])):"saturate"!==t&&"brightness"!==t&&"contrast"!==t||((e=h[t].slice(0))[0]=100+e[0]*S,r.push([t,e]))})}else if(gl.hasOwnProperty(t))for(var a=0;a<2;a++)r[a][0]+=h[a]*S;else if(t===_s||t===fs)0!==h[0]&&(r[0][0]+=h[0]*S),0!==h[1]&&(r[1][0]+=h[1]*S);else if(t===ms)for(var o=0,s=Math.min(r.length,h.length);o<s;o++){for(var l=0;l<4;l++)r[o][l]+=h[o][l]*S;for(var c=0;c<4;c++)r[o][4][c]+=h[o][4][c]*S}else if(t===xs)r.forEach(function(t,e){h[e]&&(t[0][0]+=h[e][0]*S,t[1][0]+=h[e][1]*S)});else if(t===ps||t===gs)r.forEach(function(t,e){h[e]&&(t[0]+=h[e]*S)});else if(ml.hasOwnProperty(t))r.forEach(function(t,e){var r=h[e];if(r){var i=xt(r,4),n=i[0],e=i[1],r=i[2],i=i[3];if(yl.hasOwnProperty(t.k)){for(var a=0,o=Math.min(t.v.length,n.length);a<o;a++){var s=t.v[a],l=n[a];s[0][0]+=l[0][0]*S,s[0][1]+=l[0][1]*S,s[0][2]+=l[0][2]*S,s[0][3]+=l[0][3]*S,s[1]&&l[1]&&(s[1][0]+=l[1]*S)}"linear"===t.k&&void 0!==t.d&&void 0!==e&&(Array.isArray(e)?(t.d[0]+=e[0]*S,t.d[1]+=e[1]*S,t.d[2]+=e[2]*S,t.d[3]+=e[3]*S):t.d+=e*S),"radial"===t.k?void 0!==t.z&&void 0!==i?(t.z[0]+=i[0]*S,t.z[1]+=i[1]*S,t.z[2]+=i[2]*S,t.z[3]+=i[3]*S,t.z[4]+=i[4]*S):void 0!==t.p&&void 0!==r&&(t.p[0][0]+=r[0]*S,t.p[1][0]+=r[1]*S):"conic"===t.k&&void 0!==t.d&&void 0!==e&&(t.d+=e*S,t.p[0][0]+=r[0]*S,t.p[1][0]+=r[1]*S)}else t[0]+=n[0]*S,t[1]+=n[1]*S,t[2]+=n[2]*S,t[3]+=n[3]*S}});else if(dl.hasOwnProperty(t))(r=r[0])[0]+=h[0]*S,r[1]+=h[1]*S,r[2]+=h[2]*S,r[3]+=h[3]*S;else if(fl.hasOwnProperty(t)){var u=w[t];if(fl[t][L]&&nl(fl[t][L].calIncrease)){var _=fl[t][L].calIncrease;k.isMulti?w[t]=u.map(function(t,e){return _(t,h[e],S)}):w[t]=_(u,h,S)}else if(k.isMulti)if("points"===t||"controls"===t)for(var f=0,d=Math.min(u.length,h.length);f<d;f++){var p=u[f],g=h[f];if(!il(p)&&!il(g))for(var m=0,v=Math.min(p.length,g.length);m<v;m++){var y=p[m],x=g[m];if(!il(y)&&!il(x))for(var E=0,b=Math.min(y.length,x.length);E<b;E++)il(y[E])||il(x[E])||(y[E]+=x[E]*S)}}else"controlA"===t||"controlB"===t?h.forEach(function(t,e){var r=u[e];if(!il(t)&&!il(r))for(var i=0,n=Math.min(r.length,t.length);i<n;i++){var a=r[i],o=t[i];il(a)||il(o)||(r[i]+=o*S)}}):h.forEach(function(t,e){il(t)||il(u[e])||(u[e]+=t*S)});else if("points"===t||"controls"===t)for(var A=0,M=Math.min(u.length,h.length);A<M;A++){var T=u[A],C=h[A];if(!il(T)&&!il(C))for(var R=0,O=Math.min(T.length,C.length);R<O;R++)il(T[R])||il(C[R])||(T[R]+=C[R]*S)}else"controlA"===t||"controlB"===t?(il(u[0])||il(h[0])||(u[0]+=h[0]*S),il(u[1])||il(h[1])||(u[1]+=h[1]*S)):il(u)||il(h)||(w[t]+=h*S)}else t!==Ss&&t!==ks||(w[t]+=h*S)}(a);return w}function Tl(t,e){return nl(t)&&(e=t,t={}),[t||{},e]}Object.assign(xl,pl),Object.assign(xl,vl);var Cl=0,Rl=12,Ol=13,Sl=30,kl=31,wl=32,Il=41,Ll=42,Dl=function(){t(c,Eo);var h=e(c);function c(t,n,e){var r,a;_(this,c),(r=h.call(this)).__id=Cl++,n=ll(n||[]),n=Array.isArray(n)?n.filter(function(t){return t&&ol(t)}):n&&ol(n)?(a=[],Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(a[r]=a[r]||{offset:r/(i-1)})[t]=e[r]}),a):[],al(e)&&(r.__options={duration:e},e=r.__options);var i=r.__options=e||{duration:0},o=t.root,s=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,o,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,i.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,o&&o.__config,!1],l=r.iterations=i.iterations,e=r.duration=i.duration,o=xt(r.__init(n,l,e,i.easing,t),4),l=o[0],e=o[1],t=o[2],o=o[3];s[Rl]=l,s[Ol]=e,s[Sl]=t,s[kl]=o,2===l.length&&(s[Il]=!0,s[Ll]=l[1][Xs]);o=parseInt(i.fps)||0;return r.fps=o=o<=0?60:o,r.spfLimit=i.spfLimit,r.delay=i.delay,r.endDelay=i.endDelay,r.playbackRate=i.playbackRate,r.fill=i.fill,r.iterations=i.iterations,r.direction=i.direction,s[wl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i.direction)?e:l,r}return d(c,[{key:"__init",value:function(i,t,o,s,e){if(i.length<1)return[[],[],[],{}];for(var n=e.tagName,a=0,l=i.length;a<l;a++)(function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),a=--t,l=--e;if(r.offset<=-1)return i.splice(t,1),a=--t,l=--e}Object.keys(r).forEach(function(t){cr.hasOwnProperty(t)&&cr.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Tr.isValid(n,t)||delete r[t]}),a=t,l=e})(a,l);1===i.length?(i[0]=ll(i[0]),1===i[0].offset?i.unshift({offset:0}):((r=ll(i[0])).offset=1,i.push(r))):i.forEach(function(t,e){i[e]=ll(t)});var r=i[0];r.hasOwnProperty("offset")&&0<r.offset?i.unshift(r={offset:0}):r.offset=0;r=i[i.length-1];r.hasOwnProperty("offset")&&r.offset<1?i.push(r={offset:1}):r.offset=1;for(var h=1,c=i.length;h<c;h++)if(!(f=i[h]).hasOwnProperty("offset")){for(var u=void 0,_=h+1;_<c&&!(u=i[_]).hasOwnProperty("offset");_++);for(var f=i[h-1],d=(u.offset-f.offset)/(_-h+1),p=h;p<_;p++)i[p].offset=f.offset+d*(p+1-h);h=_}var g=[];i.forEach(function(t){var e,r,i,n,a;g.push((r=o,i=s,a=(n=e=t).offset,t=n.easing,delete e.offset,delete e.easing,e=_n.normalize(e),(n=[])[Us]=e,n[Xs]=a*r,n[Vs]=t||i,n[Ks]=[],n))});var m,v,y,x,E,b,A=(m=e,v={},y=[],(r=g).forEach(function(t){var e=t[Us];Object.keys(e).forEach(function(t){void 0===e[t]||v.hasOwnProperty(t)||(v[t]=!0,fl.hasOwnProperty(t)||(t=parseInt(t)),y.push(t))})}),r.forEach(function(t){var e=t[Us];y.forEach(function(t){e.hasOwnProperty(t)&&!il(e[t])||(fl.hasOwnProperty(t)?e[t]=m.currentProps[t]:e[t]=m.currentStyle[t])})}),y);x=A,b=(E=e).computedStyle,g.forEach(function(t){var n=t[Us];x.forEach(function(t){var e,r,i=n[t];il(i)||(t===ws?(e=E.outerWidth,r=E.outerHeight,r=ea.calMatrix(i,e,r),n[t]=[[Fs,r]]):i[1]===Zs&&(t===Is?n[t]=[he.rgba2int(b[t]),qs]:pl.hasOwnProperty(t)?n[t]=[b[t],$s]:t===Ls?n[t]=[b[t],Qs]:t!==Ds&&t!==Ps&&t!==Ns||(n[t]=[b[t],Js])))})});var M=ll(g).reverse(),T=e.style,C=e.props,R={};A.forEach(function(t){_l(n,t)&&(R[t]=C[t]),R[t]=T[t]});for(var O=g.length,S=g[0],k=1;k<O;k++)S=Al(S,g[k],A,e,n);M.forEach(function(t){t[Xs]=o-t[Xs],t[Ks]=[]}),S=M[0];for(var w=1;w<O;w++)S=Al(S,M[w],A,e,n);return[g,M,A,R]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[15]=0;var i=r[16],n=r[Sl],a=r[10];if(t){if(r[14]=r[28]+r[17]+r[29],"finish"===r[22])return;r[22]="finish",r[40]||(r[16]={},e=!0)}else{if(r[21]=r[14]=0,"idle"===r[22])return;r[22]="idle",r[16]={},e=!0}e&&n.forEach(function(t){fl.hasOwnProperty(t)?a.__currentProps[t]===i[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===i[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(Eo.FRAME,e,r),t[7]&&(t[7]=!1,this.emit(Eo.PLAY)),nl(t[9])&&(t[9].call(this,e,r),t[9]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[20],i=t[34],n=t[35],a=t[14]=t[15];return i&&(!0===i?e=Math.min(e,1e3/n):0<i&&(e=Math.min(e,i))),1!==r&&0<r&&(e*=r),t[15]+=e,[a,e]}},{key:"play",value:function(t){var e=this.__config,r=e[23],i=e[17],n=e[22],a=e[Rl];return r||i<=0||a.length<1||"running"===n||(this.__cancelTask(),e[9]=t,e[22]="running",e[7]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[27]||(e[27]=!0,n=e[Ol],t=e[36],e[wl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(t)?n:a,e[14]=e[15]=e[25]=0),ts.offFrame(this),ts.onFrame(this),e[24]=ts.__now),this}},{key:"__before",value:function(t){var e=this.__config,r=e[10],i=e[35],n=e[21],a=e[wl],o=e[18],s=e[39],l=e[40],h=e[28],c=e[11],u=e[Il],_=e[Ll],f=e[17],d=e[29],p=a.length,g=xt(e[37](e,t),2),m=g[0];if(t=g[1],!e[38]&&i<60){if((t=e[25]+=t)<1e3/i)return void(e[1]=!0);e[25]=0}if(e[38]=!1,0===n&&m<h)return s&&El((e[33]=a[0])[Us],e[Sl],e,c,r),e[45]=!0,void(e[2]=!0);0===n&&(m-=h),0!==m&&!e[45]||(e[45]=!1,e[3]=!0);s=u?(x=m<_?0:1,_):a[x=function t(e,r,i,n){if(e===r)return n[e][Xs]>i?e-1:e;var a=e+(r-e>>1),o=n[a];return o[Xs]===i?a:o[Xs]>i?t(e,Math.max(a-1,e),i,n):t(Math.min(a+1,r),r,i,n)}(0,p-1,m,a)][Xs],_=x===p-1,p=0;_||(p=u?m/f:(m-s)/(a[x+1][Xs]-s));var v,y,s=o-1<=n,x=a[x];if(e[33]=x,_)if(v=s&&m<f+d,y=ul(l||!s?x[Us]:e[kl],e[Sl]),s)v||(e[15]=0,o<=(n=++e[21])&&ts.offFrame(this));else{for(0===n&&h&&(e[15]-=h);e[15]>=f;)e[15]-=f,n=++e[21];e[6]=!0}else y=Ml(x,e[Sl],p,r);El(y,e[Sl],e,c,r),!_||v&&!s||(e[4]=!0,o<=n&&(e[5]=!0,this.__clean(!0)))}},{key:"__after",value:function(t){var e,r,i,n=this.__config;n[0]=!1,n[1]?n[1]=!1:(n[8].call(this,n,t,n[2]),n[2]=!1,n[3]&&(n[3]=!1,this.emit(Eo.BEGIN,n[21])),n[4]&&(n[4]=!1,this.emit(Eo.END,n[21]-1),e=n[36],r=n[Rl],i=n[Ol],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(t=n[21]%2==0,n[wl]="alternate"===e?t?r:i:t?i:r)),n[6]&&(n[6]=!1,n[3]=!0),n[5]&&(n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,n[22]="finished",this.emit(Eo.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[23],i=e[17],n=this.pending;return r||i<=0||n||(e[22]="paused",this.__cancelTask(),t||this.emit(Eo.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[23],i=e[17],e=e[22];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[23],n=i[17],a=i[22],o=i[Rl];if(t||n<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,l=i[11],a=i[kl];return l&&(s=i[40]?(i[33]=o[o.length-1],o[o.length-1][Us]):a,l.addRefreshTask({__before:function(){i[0]=!0,El(s,i[Sl],i,l,i[10]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[0]=!1,i[8].call(r,i,t),i[3]=i[4]=i[2]=i[5]=i[1]=i[27]=!1,r.emit(Eo.FINISH)),nl(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[23],n=i[17],a=i[22],o=i[Rl];if(t||n<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=i[11],l=i[kl];return s&&s.addRefreshTask({__before:function(){i[0]=!0,El(l,i[Sl],i,s,i[10]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[0]=!1,i[8].call(r,i,t),i[3]=i[4]=i[2]=i[5]=i[1]=i[27]=!1,r.emit(Eo.CANCEL)),nl(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,n=i[23],a=i[17],o=i[Rl],s=i[28],i=i[29];if(n||a<=0||o.length<1)return this;o=xt(Tl(e,r),2);return e=o[0],r=o[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,n=this.__config,a=n[23],o=n[17],s=n[Rl],l=n[28],h=n[29];if(a||o<=0||s.length<1)return this;s=xt(Tl(e,r),2);return e=s[0],r=s[1],o+l+h<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){n[22]="paused",i.__cancelTask(),nl(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[16],i=t[10];t[Sl].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],fl.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,n=i[17];if(i[22]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=i[28]),t-=i[28],i[21]=0;n<t&&i[21]<i[18]-1;)i[21]++,t-=n;i[15]=t,i[27]=!0;var a=i[Rl],o=i[Ol],e=i[36];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(r=i[21]%2==0,i[wl]="alternate"===e?r?a:o:r?o:a),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[10]=t,this.__config[43]=t.__config}},{key:"__cancelTask",value:function(){ts.offFrame(this),this.__config[9]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[23]||(e.removeControl(),t?(e.__clean(),r[10]=null):ts.nextFrame({__before:function(){e.__clean(),r[10]=null}}),r[24]=0,r[23]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[22]&&"finished"!==t[22]&&we.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[10]}},{key:"root",get:function(){return this.__config[11]}},{key:"keys",get:function(){return this.__config[Sl]}},{key:"style",get:function(){return this.__config[16]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[17]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[17]!==t&&(e[17]=t,e[Ll]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[28]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[28]!==t&&(e[28]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[29]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[29]!==t&&(e[29]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[35]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[35]!==t&&(e[35]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[18]},set:function(t){t===1/0||he.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[18]!==t&&(e[18]=t),t}},{key:"fill",get:function(){return this.__config[19]},set:function(t){var e=this.__config;return e[19]!==(t=t||"none")&&(e[19]=t,this.__checkModify()),e[39]={backwards:!0,both:!0}.hasOwnProperty(t),e[40]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[36]},set:function(t){var e=this.__config;return e[36]!==(t=t||"normal")&&(e[36]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[Rl]}},{key:"framesR",get:function(){return this.__config[Ol]}},{key:"playbackRate",get:function(){return this.__config[20]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[20]!==(t=t<=0?1:t)&&(e[20]=t),t}},{key:"easing",get:function(){return this.__config[26]}},{key:"startTime",get:function(){return this.__config[24]}},{key:"currentTime",get:function(){return this.__config[14]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[14]!==t&&(e[14]=t,e[15]=t),t}},{key:"nextTime",get:function(){return this.__config[15]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[15]!==t&&(e[15]=t),t}},{key:"pending",get:function(){return"running"!==this.__config[22]}},{key:"finished",get:function(){return"finished"===this.__config[22]}},{key:"playState",get:function(){return this.__config[22]}},{key:"playCount",get:function(){return this.__config[21]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[21]!==t&&(e[21]=t),t}},{key:"isDestroyed",get:function(){return this.__config[23]}},{key:"animating",get:function(){var t=this.__config,e=t[22];return"idle"!==e&&("finished"!==e||t[40]||t[39])}},{key:"spfLimit",get:function(){return this.__config[34]},set:function(t){t=he.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[34]!==t&&(e[34]=t),t}},{key:"assigning",get:function(){return this.__config[0]}}]),c}(),Pl=g.NODE_KEY.NODE_DEFS_CACHE,Nl=he.int2rgba,Fl=At.canvasPolygon,Bl=At.svgPolygon;var Gl={renderBoxShadow:function(t,e,r,i,n,a,o,s,l,h){var c,u,_=(M=xt(i,6))[0],f=M[1],d=M[2],p=M[3],g=M[4],m=M[5],v=Nl(g),y=2*Math.abs(d)+2*Math.abs(p)+2*Math.abs(_)+2*Math.abs(f),x=[[n,a],[o,a],[o,s],[n,s],[n,a]],E=[[n-y,a-y],[n-y,s+y],[o+y,s+y],[o+y,a-y],[n-y,a-y]];if(0<g[3]&&(0<d||0<p))if(e===Et.CANVAS|e===Et.WEBGL){if(r.save(),r.beginPath(),"inset"===m){var b=n+_+p,A=a+f+p,i=o+_-p,M=s+f-p,g=[[b,A],[i,A],[i,M],[b,M]],g=Q.getRectsIntersection([x[0][0],x[0][1],x[2][0],x[2][1]],[g[0][0],g[0][1],g[2][0],g[2][1]]);if(!g)return;g=[[g[0],g[1]],[g[2],g[1]],[g[2],g[3]],[g[0],g[3]],[g[0],g[1]]],p?(Fl(r,g),Fl(r,x.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==v&&(r.fillStyle=v),Fl(r,x),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),Fl(r,g),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=v,r.shadowBlur=d,Fl(r,[[b,A],[i,A],[i,M],[n-y,M],[n-y,s+y],[o+y,s+y],[o+y,a-y],[n-y,a-y],[n-y,M],[b,M],[b,A]])):(Fl(r,x),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=_,r.shadowOffsetY=f,r.shadowColor=v,r.shadowBlur=d,Fl(r,[[n,a],[o,a],[o,s],[n-y,s],[n-y,s+y],[o+y,s+y],[o+y,a-y],[n-y,a-y],[n-y,s],[n,s],[n,a]]))}else{var T=n+_-p,C=a+f-p,R=o+_+p,O=s+f+p,S=[[T,C],[R,C],[R,O],[T,O]],k=Q.getRectsIntersection([x[0][0],x[0][1],x[2][0],x[2][1]],[S[0][0],S[0][1],S[2][0],S[2][1]]);p?(Fl(r,x),Fl(r,S.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==v&&(r.fillStyle=v),Fl(r,S),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),k&&Fl(r,[[k[0],k[1]],[k[2],k[1]],[k[2],k[3]],[k[0],k[3]],[k[0],k[1]]].reverse()),Fl(r,x),Fl(r,S),Fl(r,E),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=v,r.shadowBlur=d,Fl(r,S)):(Fl(r,x),Fl(r,E),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=_,r.shadowOffsetY=f,r.shadowColor=v,r.shadowBlur=d,Fl(r,x))}r.fill(),r.closePath(),r.restore()}else e===Et.SVG&&(C=na.outerSize(d),"inset"===m?(e=Q.getRectsIntersection([x[0][0],x[0][1],x[2][0],x[2][1]],[(S=[[R=n+_+p,T=a+f+p],[O=o+_-p,T],[O,k=s+f-p],[R,k]])[0][0],S[0][1],S[2][0],S[2][1]]))&&(e=[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]],p?(t.__config[Pl].push(m={tagName:"filter",props:[["x",-C/l],["y",-C/h],["width",1+2*C/l],["height",1+2*C/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",v]]}]}),c=r.add(m),S={tagName:"clipPath",children:[{tagName:"path",props:[["d",Bl(e)+Bl(x.slice(0).reverse())],["fill","#FFF"]]}]},u=r.add(S),t.__config[Pl].push(S),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bl(x)],["fill",v],["clip-path","url(#"+u+")"]]}),m={tagName:"clipPath",children:[{tagName:"path",props:[["d",Bl(e)],["fill","#FFF"]]}]},u=r.add(m),t.__config[Pl].push(m),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bl([[R,T],[O,T],[O,k],[n-y,k],[n-y,s+y],[o+y,s+y],[o+y,a-y],[n-y,a-y],[n-y,k],[R,k],[R,T]])],["fill","#FFF"],["filter","url(#"+c+")"],["clip-path","url(#"+u+")"]]})):(c=r.add(T={tagName:"filter",props:[["x",-C/l],["y",-C/h],["width",1+2*C/l],["height",1+2*C/h]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",v]]}]}),t.__config[Pl].push(T),T={tagName:"clipPath",children:[{tagName:"path",props:[["d",Bl(x)],["fill","#FFF"]]}]},u=r.add(T),t.__config[Pl].push(T),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bl([[n,a],[o,a],[o,s],[n-y,s],[n-y,s+y],[o+y,s+y],[o+y,a-y],[n-y,a-y],[n-y,s],[n,s],[n,a]])],["fill","#FFF"],["filter","url(#"+c+")"],["clip-path","url(#"+u+")"]]}))):(s=Q.getRectsIntersection([x[0][0],x[0][1],x[2][0],x[2][1]],[(o=[[n=n+_-p,a=a+f-p],[o=o+_+p,a],[o,a=s+f+p],[n,a]])[0][0],o[0][1],o[2][0],o[2][1]]),p?(a=r.add(n={tagName:"filter",props:[["x",-C/l],["y",-C/h],["width",1+2*C/l],["height",1+2*C/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",v]]}]}),t.__config[Pl].push(n),n={tagName:"clipPath",children:[{tagName:"path",props:[["d",Bl(x)+Bl(o.slice(0).reverse())],["fill","#FFF"]]}]},p=r.add(n),t.__config[Pl].push(n),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bl(o)],["fill",v],["clip-path","url(#"+p+")"]]}),n={tagName:"clipPath",children:[{tagName:"path",props:[["d",(s?Bl([[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()):"")+Bl(x)+Bl(o)+Bl(E)],["fill","#FFF"]]}]},p=r.add(n),t.__config[Pl].push(n),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bl(o)],["fill","#FFF"],["filter","url(#"+a+")"],["clip-path","url(#"+p+")"]]})):(v=r.add(d={tagName:"filter",props:[["x",-C/l],["y",-C/h],["width",1+2*C/l],["height",1+2*C/h]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",v]]}]}),t.__config[Pl].push(d),d={tagName:"clipPath",children:[{tagName:"path",props:[["d",Bl(x)+Bl(E)],["fill","#FFF"]]}]},r=r.add(d),t.__config[Pl].push(d),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bl(x)],["fill","#FFF"],["filter","url(#"+v+")"],["clip-path","url(#"+r+")"]]}))))}},Yl={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,"color-dodge":!0,"color-burn":!0,"hard-light":!0,"soft-light":!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};function Hl(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})}var ar=Hl,ur=function(t){return Yl.hasOwnProperty(Hl(t))},m=g.STYLE_KEY,Wl=m.MARGIN_LEFT,Ul=m.MARGIN_RIGHT,Xl=m.PADDING_LEFT,Vl=m.PADDING_RIGHT,Kl=m.BORDER_LEFT_WIDTH,zl=m.BORDER_RIGHT_WIDTH;var $l={getInlineBox:function(t,e,r,i,n,a,o,s,l,h,c,u,_,f,d,p,g,m,v){var y=0,x=0;"paddingBox"===c||"padding-box"===c?(y=u,x=f):"contentBox"!==c&&"content-box"!==c&&(y=u+p,x=f+m);for(var E,p=u+p,f=f+m,m=n.baseLine-a,b=r.x,A=(r instanceof yn?r.parent:r).domParent;A!==t;)r===A.contentBoxList[0]&&(b-=(E=A.computedStyle)[Wl]+E[Xl]+E[Kl]),A=A.domParent;a=b,l&&("paddingBox"===c||"padding-box"===c?b-=d:"contentBox"!==c&&"content-box"!==c&&(b-=d+v),a-=d+v);for(var v=n.y+m-y,y=n.y+m-p,M=i.x+i.outerWidth,A=(i instanceof yn?i.parent:i).domParent;A!==t;){var T=A.contentBoxList;i===T[T.length-1]&&(M+=(T=A.computedStyle)[Ul]+T[Vl]+T[zl]),A=A.domParent}return p=M,h&&("paddingBox"===c||"padding-box"===c?M+=_:"contentBox"!==c&&"content-box"!==c&&(M+=_+g),p+=_+g),x=n.y+m+o-s+x,f=n.y+m+o-s+f,b+=t.ox,M+=t.ox,a+=t.ox,p+=t.ox,[b,v+=t.oy,M,x+=t.oy,a,y+=t.oy,p,f+=t.oy]},getInlineWidth:function(t,e){for(var r=0,i=e.length,n=0;n<i;n++){var a=e[n];r+=a.width;for(var o=(a instanceof yn?a.parent:a).domParent;o!==t;){var s,l=o.contentBoxList;a===l[0]&&(r+=(s=o.computedStyle)[Wl]+s[Xl]+s[Kl]),a===l[l.length-1]&&(r+=(l=o.computedStyle)[Ul]+l[Vl]+l[zl]),o=o.domParent}}return r}},jl=g.STYLE_KEY,Zl=g.STYLE_RV_KEY,ql=g.style2Upper,Jt=g.STYLE_KEY,Jl=Jt.BORDER_TOP_LEFT_RADIUS,Ql=Jt.BORDER_TOP_RIGHT_RADIUS,th=Jt.BORDER_BOTTOM_LEFT_RADIUS,eh=Jt.BORDER_BOTTOM_RIGHT_RADIUS,rh=Jt.PADDING_LEFT,ih=Jt.PADDING_RIGHT,nh=Jt.PADDING_TOP,ah=Jt.PADDING_BOTTOM,oh=Jt.MARGIN_LEFT,sh=Jt.MARGIN_TOP,lh=Jt.MARGIN_BOTTOM,hh=Jt.MARGIN_RIGHT,ch=Jt.BORDER_LEFT_WIDTH,uh=Jt.BORDER_TOP_WIDTH,_h=Jt.BORDER_BOTTOM_WIDTH,fh=Jt.BORDER_RIGHT_WIDTH,dh=Jt.TOP,ph=Jt.RIGHT,gh=Jt.BOTTOM,mh=Jt.LEFT,vh=Jt.POSITION,yh=Jt.DISPLAY,xh=Jt.WIDTH,Eh=Jt.HEIGHT,bh=Jt.MATRIX,Ah=Jt.TRANSLATE_X,Mh=Jt.TRANSLATE_Y,Th=Jt.TRANSLATE_Z,Ch=Jt.TRANSFORM,Rh=Jt.SCALE_X,Oh=Jt.SCALE_Y,Sh=Jt.SCALE_Z,kh=Jt.ROTATE_X,wh=Jt.ROTATE_Y,Ih=Jt.ROTATE_Z,Lh=Jt.SKEW_X,Dh=Jt.SKEW_Y,Ph=Jt.PERSPECTIVE,Nh=Jt.PERSPECTIVE_ORIGIN,Fh=Jt.ROTATE_3D,Bh=Jt.TRANSFORM_ORIGIN,Gh=Jt.BACKGROUND_POSITION_X,Yh=Jt.BACKGROUND_POSITION_Y,Hh=Jt.BACKGROUND_SIZE,Wh=Jt.BACKGROUND_COLOR,Uh=Jt.BACKGROUND_IMAGE,Xh=Jt.BACKGROUND_REPEAT,Vh=Jt.BOX_SHADOW,Kh=Jt.OPACITY,zh=Jt.Z_INDEX,$h=Jt.BORDER_TOP_STYLE,jh=Jt.BORDER_RIGHT_STYLE,Zh=Jt.BORDER_BOTTOM_STYLE,qh=Jt.BORDER_LEFT_STYLE,Jh=Jt.FILTER,Qh=Jt.OVERFLOW,tc=Jt.MIX_BLEND_MODE,ec=Jt.TEXT_OVERFLOW,rc=Jt.BORDER_TOP_COLOR,ic=Jt.BORDER_BOTTOM_COLOR,nc=Jt.BORDER_LEFT_COLOR,ac=Jt.BORDER_RIGHT_COLOR,oc=Jt.FONT_STYLE,sc=Jt.COLOR,lc=Jt.VISIBILITY,hc=Jt.POINTER_EVENTS,cc=Jt.BORDER_TOP,uc=Jt.BORDER_RIGHT,_c=Jt.BORDER_BOTTOM,fc=Jt.BORDER_LEFT,dc=Jt.BACKGROUND_CLIP,pc=Jt.FONT_SIZE,gc=Jt.FONT_FAMILY,mc=Jt.LINE_HEIGHT,F=g.UPDATE_KEY,vc=F.UPDATE_NODE,yc=F.UPDATE_FOCUS,xc=F.UPDATE_STYLE,Ec=F.UPDATE_OVERWRITE,bc=F.UPDATE_KEYS,Ac=F.UPDATE_CONFIG,Mc=F.UPDATE_REMOVE_DOM,Tc=g.STRUCT_KEY.STRUCT_HAS_MASK,$t=g.NODE_KEY,Cc=$t.NODE_TAG_NAME,Rc=$t.NODE_CACHE_STYLE,Oc=$t.NODE_CURRENT_STYLE,Sc=$t.NODE_COMPUTED_STYLE,kc=$t.NODE_STYLE,wc=$t.NODE_STRUCT,Ic=$t.NODE_OPACITY,Lc=$t.NODE_MATRIX_EVENT,Dc=$t.NODE_MATRIX,Pc=$t.NODE_LIMIT_CACHE,Nc=$t.NODE_HAS_CONTENT,Fc=$t.NODE_REFRESH_LV,Bc=$t.NODE_CACHE,Gc=$t.NODE_CACHE_TOTAL,Yc=$t.NODE_CACHE_FILTER,Hc=$t.NODE_CACHE_MASK,Wc=$t.NODE_CACHE_OVERFLOW,Uc=$t.NODE_IS_DESTROYED,Xc=$t.NODE_DEFS_CACHE,Vc=$t.NODE_DOM_PARENT,Kc=$t.NODE_IS_INLINE,zc=$t.NODE_PERSPECTIVE_MATRIX,$c=C.AUTO,jc=C.PX,Zc=C.PERCENT,qc=C.INHERIT,Jc=C.NUMBER,Qc=C.REM,tu=C.VW,eu=C.VH,ru=C.DEG,iu=he.int2rgba,nu=he.rgba2int,au=he.joinArr,ou=he.isNil,su=_n.calRelative,lu=Tr.GEOM,hu=ar,cu=ur,uu=qt.point2d,_u=Ca.contain,fu=Ca.NONE,du=Ca.TRANSFORM,pu=Ca.REFLOW,gu=Ca.REPAINT,mu=Ca.TRANSLATE_X,vu=Ca.TRANSLATE_Y,yu=Ca.TRANSLATE_Z;function xu(t){for(var e=0,r=t.flowChildren,i=r.length,n=0;n<i;n++){var a=r[n];if(!(a instanceof Eu||a instanceof Ro&&a.shadowRoot instanceof Eu))break;if(a.flowChildren.length){e+=xu(a);break}a.__config[Kc]&&(e+=a.outerWidth)}return e}var Eu=function(){t(p,T);var i=e(p);function p(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_(this,p),r=i.call(this),Array.isArray(e)?r.props=he.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];e=r.__config;return e[Cc]=t,e[Rc]=r.__cacheStyle,e[Oc]=r.__currentStyle,e[Sc]=r.__computedStyle,e[Fc]=pu,e[kc]=r.__style,e[Dc]=[],e[Lc]=[],e[Xc]=r.__cacheDefs,r.__frameAnimateList=[],r.__contentBoxList=[],r}return d(p,[{key:"__structure",value:function(t,e,r){r=D(L(p.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(r[Tc]=this.__hasMask),this.__config[wc]=r}},{key:"__mp",value:function(r,i,n){var a=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=jl[ql("margin"+t)],t=jl[ql("padding"+t)];i[e]=a.__mpWidth(r[e],n),i[t]=a.__mpWidth(r[t],n)})}},{key:"__mpWidth",value:function(t,e){return t[1]===jc?t[0]:t[1]===Zc?t[0]*e*.01:t[1]===Qc?t[0]*this.root.computedStyle[pc]:t[1]===tu?t[0]*this.root.width*.01:t[1]===eu?t[0]*this.root.height*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[rh]+r[ih],this.__clientHeight=e+=r[nh]+r[ah],this.__offsetWidth=t+=r[ch]+r[fh],this.__offsetHeight=e+=r[uh]+r[_h],this.__outerWidth=t+r[oh]+r[hh],this.__outerHeight=e+r[sh]+r[lh]}},{key:"__calMp",value:function(t,e,r){var i=0;return t[1]===jc?i+=t[0]:t[1]!==Zc||r?t[1]===Qc?i+=t[0]*this.root.computedStyle[pc]:t[1]===tu?i+=t[0]*this.root.width*.01:t[1]===eu&&(i+=t[0]*this.root.height*.01):(t[0]*=.01*e,t[1]=jc,i+=t[0]),i}},{key:"__addMp",value:function(t,e,r,i,n){var a,o,s=r[oh],l=r[sh],h=r[hh],c=r[lh],u=r[rh],_=r[nh],f=r[ih],d=r[ah],p=r[uh],g=r[fh],m=r[_h],r=r[ch];return i=t?(a=this.__calMp(s,e,!n)+this.__calMp(h,e,!n)+this.__calMp(u,e,!n)+this.__calMp(f,e,!n),r[1]===jc?a+=r[0]:r[1]===Qc?a+=r[0]*this.root.computedStyle[pc]:r[1]===tu?a+=r[0]*this.root.width*.01:r[1]===eu&&(a+=r[0]*this.root.height*.01),g[1]===jc?a+=g[0]:g[1]===Qc?a+=g[0]*this.root.computedStyle[pc]:g[1]===tu?a+=g[0]*this.root.width*.01:g[1]===eu&&(a+=g[0]*this.root.height*.01),i.map(function(t){return t+a})):(o=this.__calMp(l,e,!n)+this.__calMp(c,e,!n)+this.__calMp(_,e,!n)+this.__calMp(d,e,!n),p[1]===jc?o+=p[0]:p[1]===Qc?o+=p[0]*this.root.computedStyle[pc]:p[1]===tu?o+=p[0]*this.root.width*.01:p[1]===eu&&(o+=p[0]*this.root.height*.01),m[1]===jc?o+=m[0]:m[1]===Qc?o+=m[0]*this.root.computedStyle[pc]:m[1]===tu?o+=m[0]*this.root.width*.01:m[1]===eu&&(o+=m[0]*this.root.height*.01),i.map(function(t){return t+o}))}},{key:"__layout",value:function(t,e,r){_n.computeReflow(this,this.isShadowRoot);var i=t.w,n=this.isDestroyed,a=this.currentStyle,o=this.computedStyle,s=this.__config,l=o[yh],h=a[xh],c=a[vh];if(this.clearCache(),this.__layoutData={x:t.x,y:t.y,w:t.w,h:t.h,lx:t.lx},s[Fc]=pu,s[Pc]=!1,s[Kc]=!1,!e){var u=this.next;if(!this.isMask&&u&&u.isMask){for(var _=0;u&&u.isMask;)_++,u=u.next;this.__hasMask=_}}if(this.__ox=this.__oy=0,n||"none"===l)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=o[xh]=o[Eh]=0,this.__x=t.x,this.__y=t.y,void this.__layoutNone();if(r||this.__mp(a,o,i),h[1]!==$c)if(this.__isRealInline()&&"inline"===a[yh])h[0]=0,h[1]=$c;else switch(h[1]){case jc:i=h[0];break;case Zc:i*=.01*h[0];break;case Qc:i=h[0]*this.root.computedStyle[pc];break;case tu:i=h[0]*this.root.width*.01;break;case eu:i=h[0]*this.root.height*.01}var f=0;"flex"===l?this.__layoutFlex(t,e):"inlineBlock"===l||"inline-block"===l?f=this.__layoutInline(t,e):"inline"===l?f=this.__layoutInline(t,e,!0):this.__layoutBlock(t,e),"relative"===c?(n=a[dh],r=a[ph],l=a[gh],t=a[mh],e=this.parent,n[1]!==$c?(n=su(a,dh,n,e),this.__offsetY(n),o[dh]=n,o[gh]="auto"):l[1]!==$c?(l=su(a,gh,l,e),this.__offsetY(-l),o[gh]=l,o[dh]="auto"):o[dh]=o[gh]="auto",t[1]!==$c?(t=su(a,mh,t,e,!0),this.__offsetX(t),o[mh]=t,o[ph]="auto"):r[1]!==$c?(d=su(a,ph,r,e,!0),this.__offsetX(-d),o[ph]=d,o[mh]="auto"):o[mh]=o[ph]="auto"):"absolute"!==c&&(o[dh]=o[gh]=o[mh]=o[ph]="auto");var d=this.__sx=this.x+this.ox,c=this.__sy=this.y+this.oy;s[Kc]||(d=this.__sx1=d+o[oh],d=this.__sx2=d+o[ch],d=this.__sx3=d+o[rh],d=this.__sx4=d+this.width,d=this.__sx5=d+o[ih],this.__sx6=d+o[fh],c=this.__sy1=c+o[sh],c=this.__sy2=c+o[uh],c=this.__sy3=c+o[nh],c=this.__sy4=c+this.height,c=this.__sy5=c+o[ah],this.__sy6=c+o[_h]),o[xh]=this.width,o[Eh]=this.height;c=this.__animateRecords;return c&&(this.__animateRecords=null,c.list.forEach(function(t){t.target.vd instanceof p&&(t.target=t.target.vd)}),o=c.controller||this.root.animateController,c.options&&!1===c.options.autoPlay?(o.__records2=o.__records2.concat(c.list),o.init(o.__records2,o.__list2)):(o.__records=o.__records.concat(c.list),o.__playAuto())),f}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[yh]="none",t[sh]=t[hh]=t[lh]=t[oh]=t[nh]=t[ih]=t[ah]=t[rh]=0}},{key:"__preLayout",value:function(t,e){var r=t.x,i=t.y,n=t.w,a=t.h,o=t.w2,s=t.h2,l=t.w3,h=t.h3,c=t.lx,u=t.nowrap,_=t.lineBoxManager,f=t.endSpace,d=void 0===f?0:f;this.__x=r,this.__y=i;var p,g,m=this.currentStyle,v=this.computedStyle,y=m[xh],x=m[Eh],E=v[uh],b=v[fh],A=v[_h],M=v[ch],T=v[sh],C=v[hh],R=v[lh],O=v[oh],S=v[nh],f=v[ih],m=v[ah],v=v[rh];if(void 0!==o)p=!0,n=o;else if(void 0!==l)p=!0,n=l;else if(y[1]!==$c)switch(p=!0,y[1]){case jc:n=y[0];break;case Zc:n*=.01*y[0];break;case Qc:n=y[0]*this.root.computedStyle[pc];break;case tu:n=y[0]*this.root.width*.01;break;case eu:n=y[0]*this.root.height*.01}if(void 0!==s)g=!0,a=s;else if(void 0!==h)g=!0,a=h;else if(x[1]!==$c)switch(g=!0,x[1]){case jc:a=x[0];break;case Zc:a*=.01*x[0];break;case Qc:a=x[0]*this.root.computedStyle[pc];break;case tu:a=x[0]*this.root.width*.01;break;case eu:a=x[0]*this.root.height*.01}t.x=r+=M+O+v,e||(i+=E+T+S),t.y=i;t=e?f+b+C:0;return e||(y[1]!==$c&&void 0===l||(n-=M+b+O+C+v+f),x[1]!==$c&&void 0===h||(a-=E+A+T+R+S+m)),{fixedWidth:p,fixedHeight:g,x:r,y:i,w:n,h:a,lx:c,lineBoxManager:_,nowrap:u,endSpace:d,selfEndSpace:t}}},{key:"__marginAuto",value:function(t,e){var r=t[vh],i=t[yh],n=t[oh],a=t[hh],t=t[xh];"absolute"===r||"block"!==i&&"flex"!==i||t[1]===$c&&"img"!==this.tagName||n[1]!==$c||a[1]!==$c||(a=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-a),!0)}},{key:"__calMatrix",value:function(t,e,i,n,r,a,o,s,l){var h=this;if(r[Kc])return n[Bh]=[a,o],e[bh]=qt.identity();var c,u,_,f,d,p=e[bh];return p&&t<pu&&!_u(t,du)?(f=u=c=0,_u(t,mu)&&(r=i[Ah],c=(r=ou(r)?0:r[1]===Zc?r[0]*this.offsetWidth*.01:r[1]===Qc?r[0]*this.root.computedStyle[pc]:r[1]===tu?r[0]*this.root.width*.01:r[1]===eu?r[0]*this.root.height*.01:r[0])-(n[Ah]||0),n[Ah]=r,n[Ch][12]+=c,p[12]+=c),_u(t,vu)&&(c=i[Mh],u=(c=ou(c)?0:c[1]===Zc?c[0]*this.offsetHeight*.01:c[1]===Qc?c[0]*this.root.computedStyle[pc]:c[1]===tu?c[0]*this.root.width*.01:c[1]===eu?c[0]*this.root.height*.01:c[0])-(n[Mh]||0),n[Mh]=c,n[Ch][13]+=u,p[13]+=u),_u(t,yu)&&(t=i[Th],f=(t=ou(t)?0:t[1]===Zc?t[0]*this.offsetWidth*.01:t[1]===Qc?t[0]*this.root.computedStyle[pc]:t[1]===tu?t[0]*this.root.width*.01:t[1]===eu?t[0]*this.root.height*.01:t[0])-(n[Th]||0),n[Th]=t,n[Ch][14]+=f,p[14]+=f),e[bh]=p):(void 0===a&&(a=this.__sx1,o=this.__sy1,s=this.offsetWidth,l=this.offsetHeight),void 0===e[Bh]&&(e[Bh]=!0,p=null,n[Bh]=ea.calOrigin(i[Bh],s,l,this.root)),void 0!==e[Ch]&&void 0!==e[Ah]&&void 0!==e[Mh]&&void 0!==e[Th]&&void 0!==e[kh]&&void 0!==e[wh]&&void 0!==e[Ih]&&void 0!==e[Fh]&&void 0!==e[Rh]&&void 0!==e[Oh]&&void 0!==e[Sh]&&void 0!==e[Lh]&&void 0!==e[Dh]||(e[Ch]=e[Ah]=e[Mh]=e[Th]=e[kh]=e[wh]=e[Ih]=e[Rh]=e[Oh]=e[Sh]=e[Lh]=e[Dh]=!0,p=null,i[Ch]?d=ea.calMatrix(i[Ch],s,l,this.root):(_=[],[Ah,Mh,Th,kh,wh,Ih,Fh,Lh,Dh,Rh,Oh,Sh].forEach(function(t){delete n[t];var e=i[t];if(!ou(e)){if(t===Fh)return n[t]=[e[0],e[1],e[2],e[3][0]],0===e[3][0]?void 0:void _.push([t,e]);n[t]=e[0];var r=t===Rh||t===Oh||t===Sh;1===e[0]&&r||!r&&0===e[0]||(e[1]===Zc?t===Ah||t===Th?n[t]=e[0]*s*.01:t===Mh&&(n[t]=e[0]*l*.01):e[1]===Qc?t!==Ah&&t!==Th&&t!==Mh||(n[t]=e[0]*h.root.computedStyle[pc]):e[1]===tu?t!==Ah&&t!==Th&&t!==Mh||(n[t]=e[0]*h.root.width*.01):e[1]!==eu||t!==Ah&&t!==Th&&t!==Mh||(n[t]=e[0]*h.root.height*.01),_.push([t,e]))}}),_.length&&(d=ea.calMatrix(_,s,l,this.root))),n[Ch]=d||qt.identity()),p||(f=n[Ch],(d=n[Bh].slice(0))[0]+=a||0,d[1]+=o||0,p=e[bh]=ea.calMatrixByOrigin(f,d))),p}},{key:"__calCache",value:function(t,a,e,s,r,l,i,n,o,h,c,u,_,f,d,p,g,m,v,y,x,E,b,A,M,T,C,R,O,S){var k=this,w=v,I=M,L=A,D=S,P=l[dc]=r[dc];"paddingBox"===P||"padding-box"===P?(w=y,I=T,L=b,D=O):"contentBox"!==P&&"content-box"!==P||(w=x,I=C,L=E,D=R);var N,F=this.__config[Kc];F&&!this.contentBoxList.length&&(F=!1),[Kh,zh,$h,jh,Zh,qh,Xh,Qh,tc,ec,dc].forEach(function(t){l[t]=r[t]}),ou(s[Jh])&&(s[Jh]=!0,this.__calFilter(r,l)),ou(s[Gh])&&(s[Gh]=!0,R=r[Gh],l[Gh]=(R||[]).map(function(t){return t[1]===jc?t[0]:t[1]===Qc?t[0]*k.root.computedStyle[pc]:t[1]===tu?t[0]*k.root.width*.01:t[1]===eu?t[0]*k.root.height*.01:t[1]===Zc?t[0]+"%":void 0})),ou(s[Yh])&&(s[Yh]=!0,N=r[Yh],l[Yh]=(N||[]).map(function(t){return t[1]===jc?t[0]:t[1]===Qc?t[0]*k.root.computedStyle[pc]:t[1]===tu?t[0]*k.root.width*.01:t[1]===eu?t[0]*k.root.height*.01:t[1]===Zc?t[0]+"%":void 0})),ou(s[Hh])&&(s[Hh]=!0,l[Hh]=(r[Hh]||[]).map(function(t){return qo.calBackgroundSize(t,L-w,D-I,k.root)})),ou(s[Uh])&&(N=l[Uh]=r[Uh].slice(0),s[Uh]=N.map(function(t,e){if(!t)return null;if(he.isString(t)){var r,i,n=k.__loadBgi[e]=k.__loadBgi[e]||{},e=we.IMG[Uh];return e&&e.state===we.LOADED?(n.url=Uh,n.source=e.source,n.width=e.width,n.height=e.height):n.url!==t&&(n.url=t,n.source=null,i=(r=k).root,we.measureImg(t,function(t){t.success&&t.url===n.url&&!k.isDestroyed&&(n.source=t.source,n.width=t.width,n.height=t.height,i.delRefreshTask(n.cb),i.addRefreshTask(n.cb={__before:function(){s[Uh]=void 0;var t={};t[vc]=r,t[yc]=gu,t[Ac]=r.__config,i.__addUpdate(r,r.__config,i,i.__config,t)}}))},{ctx:a,root:i,width:L-w,height:D-I})),!0}return!(F||!t.k)||void 0})),ou(s[Vh])&&(s[Vh]=!0,l[Vh]=(r[Vh]||[]).map(function(t){return t.map(function(t,e){if(3<e)return t;var r=t[0];return t[1]===Zc?r*=e%2==0?.01*(L-w):.01*(D-I):t[1]===Qc?r*=k.root.computedStyle[pc]:t[1]===tu?r=r*k.root.width*.01:t[1]===eu&&(r=r*k.root.height*.01),r})})),[Wh,rc,ac,ic,nc].forEach(function(t){ou(s[t])&&(s[t]=iu(l[t]=r[t][0]))}),(ou(s[Jl])||ou(s[Ql])||ou(s[eh])||ou(s[th]))&&(s[Jl]=s[Ql]=s[eh]=s[th]=!0,F?Ut.calBorderRadiusInline(this.contentBoxList,r,l,this.root):Ut.calBorderRadius(o,h,r,l,this.root));var B=l[Jl],G=l[Ql],Y=l[eh],H=l[th];["Top","Right","Bottom","Left"].forEach(function(t){var e,r,i,n,a=jl[ql(t="border"+t)],o=jl[ql(t+"Width")],t=jl[ql(t+"Style")];ou(s[o])&&(s[o]=!0,s[a]=void 0),ou(s[t])&&(s[t]=!0,s[a]=void 0),ou(s[a])&&(a===cc?0<c?F||(e=Math.atan(c/f),r=Math.atan(c/u),s[a]=Ut.calPoints(c,l[t],e,r,v,y,b,A,M,T,O,S,0,B,G)):s[a]=[]:a===uc?0<u?F||(e=Math.atan(u/c),r=Math.atan(u/_),s[a]=Ut.calPoints(u,l[t],e,r,v,y,b,A,M,T,O,S,1,G,Y)):s[a]=[]:a===_c?0<_?F||(i=Math.atan(_/f),n=Math.atan(_/u),s[a]=Ut.calPoints(_,l[t],i,n,v,y,b,A,M,T,O,S,2,H,Y)):s[a]=[]:a===fc&&(0<f?F||(i=Math.atan(f/c),n=Math.atan(f/_),s[a]=Ut.calPoints(f,l[t],i,n,v,y,b,A,M,T,O,S,3,B,H)):s[a]=[]))});h=e&&e.computedStyle;return r[oc][1]===qc?l[oc]=e?h[oc]:"normal":ou(s[oc])&&(l[oc]=r[oc][0]),s[oc]=l[oc],r[sc][1]===qc?(l[sc]=e?h[sc]:[0,0,0,1],s[sc]=iu(l[sc])):ou(s[sc])&&(l[sc]=nu(r[sc][0]),s[sc]=iu(l[sc])),r[lc][1]===qc?l[lc]=e?h[lc]:"visible":ou(s[lc])&&(l[lc]=r[lc][0]),s[lc]=l[lc],r[hc][1]===qc?l[hc]=e?h[hc]:"auto":ou(s[hc])&&(l[hc]=r[hc][0]),s[hc]=l[hc],[w,I,L,D]}},{key:"__calPerspective",value:function(t,e,r,i,n,a){var o,s,l;ou(t[Ph])&&(l=t[Ph]=!0,s=0,s=(o=e[Ph])[1]===Qc?o[0]*this.root.computedStyle[pc]:o[1]===tu?o[0]*this.root.width*.01:o[1]===eu?o[0]*this.root.height*.01:o[0],r[Ph]=s),ou(t[Nh])&&(l=t[Nh]=!0,r[Nh]=ea.calOrigin(e[Nh],this.offsetWidth,this.offsetHeight,this.root)),l&&(void 0===n&&(n=this.__sx1,a=this.__sy1),(l=r[Nh].slice(0))[0]+=n||0,l[1]+=a||0,i[zc]=ea.calPerspectiveMatrix(r[Ph],l))}},{key:"__calFilter",value:function(t,e){var r=this;return e[Jh]=(t[Jh]||[]).map(function(t){var e=xt(t,2),t=e[0],e=e[1];return e[1]===jc||e[1]===ru||e[1]===Zc||e[1]===Jc?e=e[0]:e[1]===Qc?e=e[0]*r.root.computedStyle[pc]:e[1]===tu?e=e[0]*r.root.width*.01:e[1]===eu&&(e=e[0]*r.root.height*.01),[t,e]})}},{key:"__calContent",value:function(t,e,r,i){if(t===Et.CANVAS||t===Et.WEBGL){if(e<gu)return this.__hasContent;if("hidden"!==r[lc]){var n=r[Uh];if(Array.isArray(n))for(var a=0,o=n.length;a<o;a++)if(n[a])return!0;if(0<r[Wh][0][3]){var s=i[xh],l=i[Eh],h=i[nh],c=i[ih],t=i[ah],e=i[rh];if(s&&l||h||c||t||e)return!0}for(var u=["Top","Right","Bottom","Left"],_=0,f=u.length;_<f;_++){var d=u[_];if(0<i[jl[ql("border"+d+"Width")]]&&0<r[jl[ql("border"+d+"Color")]][0][3])return!0}var p=r[Vh];if(Array.isArray(p))for(var g=0,m=p.length;g<m;g++){var v=p[g];if(v&&(0<v[2]||0<v[3]))return!0}}}return!1}},{key:"render",value:function(C,t,R,e){var O,S=this,r=this.isDestroyed,i=this.root,k=this.__config,n=k[Bc],w=k[Rc],o=k[Oc],I=k[Sc];if(k[Fc]=fu,this.__bbox=null,r)return{isDestroyed:r,break:!0};C===Et.SVG&&(O=this.__virtualDom={bb:[],children:[],visibility:"visible"},k[Gc]?k[Gc].available||(k[Gc].available=!0):k[Gc]={available:!0,release:function(){this.available=!1,delete O.cache}});var a=I[yh];if("none"===a)return{break:!0};var s=this.clientWidth,l=this.clientHeight,h=this.offsetWidth,c=this.offsetHeight,u=this.__hasMask,L=I[nh],D=I[ih],P=I[ah],N=I[rh],F=I[ch],B=I[fh],G=I[uh],Y=I[_h],_=k[Kc],f=this.__sx1,d=this.__sx2,p=this.__sx3,g=this.__sx4,m=this.__sx5,v=this.__sx6,y=this.__sy1,x=this.__sy2,E=this.__sy3,b=this.__sy4,A=this.__sy5,M=this.__sy6,H={ctx:R,x1:f,x2:d,x3:p,x4:g,x5:m,x6:v,y1:y,y2:x,y3:E,y4:b,y5:A,y6:M,sx1:f,sx2:d,sx3:p,sx4:g,sx5:m,sx6:v,sy1:y,sy2:x,sy3:E,sy4:b,sy5:A,sy6:M},T=k[Vc],W=this.__hasContent=k[Nc]=this.__calContent(C,t,o,I);this.__calPerspective(w,o,I,k);var r=this.__calMatrix(t,w,o,I,k,f,y,h,c),U=0,X=0;!e||C!==Et.CANVAS&&C!==Et.WEBGL?C===Et.WEBGL&&(t=we.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),H.ctx=R=t.ctx):!W&&this.__releaseWhenEmpty(n)?(H.break=!0,k[Pc]=!1):k[Pc]||(W=this.bbox,n?n.reset(W,f,y):n=ga.getInstance(W,f,y),n&&n.enabled?(n.__bbox=W,R=n.ctx,U=n.dx,X=n.dy,U&&(H.x1=f+=U,H.x2=d+=U,H.x3=p+=U,H.x4=g+=U,H.x5=m+=U,H.x6=v+=U),X&&(H.y1=y+=X,H.y2=x+=X,H.y3=E+=X,H.y4=b+=X,H.y5=A+=X,H.y6=M+=X),H.ctx=R):(k[Pc]=!0,H.limitCache=H.break=!(n=null)),k[Bc]=n),H.dx=U,H.dy=X;var s=xt(this.__calCache(C,R,T,w,o,I,s,l,h,c,G,B,Y,F,L,D,P,N,f,d,p,g,m,v,y,x,E,b,A,M),4),V=s[0],K=s[1],z=s[2],$=s[3];H.bx1=V,H.by1=K,H.bx2=z,H.by2=$;var j=I[Wh],Z=I[rc],q=I[ac],J=I[ic],Q=I[nc],l=I[Jl],d=I[Ql],p=I[eh],g=I[th],m=I[lc],tt=I[Xh],et=I[Uh],x=I[Kh],E=I[Jh],rt=I[Hh],it=I[Vh],b=I[Qh],A=I[tc],nt=I[dc];C===Et.CANVAS||C===Et.WEBGL?(T&&(x*=T.__config[Ic]),k[Ic]=x):C===Et.SVG&&(1===x?delete O.opacity:O.opacity=x),C===Et.SVG&&(qt.isE(r)?delete O.transform:O.transform="matrix("+au(qt.m2m6(r),",")+")",O.visibility=m);var at,ot,st,lt,ht,ct,s=k[Dc];if(he.assignMatrix(s,r),T&&(T.perspectiveMatrix&&(r=qt.multiply(T.perspectiveMatrix,r)),r=qt.multiply(T.matrixEvent,r)),s=k[Lc],he.assignMatrix(s,r),H.limitCache)return H;if("normal"!==A&&cu(A)?(A=hu(A),C!==Et.CANVAS||e?C===Et.SVG&&(O.mixBlendMode=A):(s=i.width,at=i.height,s=we.getCacheCanvas(s,at,null,"blend"),at={ctx:R,target:s,mixBlendMode:A,matrix:r},R=s.ctx)):C===Et.SVG&&delete O.mixBlendMode,u&&(C!==Et.CANVAS||e||(st=i.width,ot=i.height,st=we.getCacheCanvas(st,ot,null,"mask1"),ot={ctx:R,target:st,matrix:r},R=st.ctx)),E&&E.length?C!==Et.CANVAS||e?C===Et.SVG&&(O.filter=At.svgFilter(E)):(st=i.width,lt=i.height,st=we.getCacheCanvas(st,lt,null,"filter1"),lt={ctx:R,filter:E,target:st,matrix:r},R=st.ctx):C===Et.SVG&&delete O.filter,"hidden"===b&&"inline"!==a?C!==Et.CANVAS||e?C===Et.SVG&&(a={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(f,",").concat(y,"L").concat(f+h,",").concat(y,"L").concat(f+h,",").concat(y+c,"L").concat(f,",").concat(y+c,",L").concat(f,",").concat(y)]]}]},ht=R.add(a),k[Xc].push(a),O.overflow="url(#"+ht+")"):(ht=i.width,ct=i.height,ht=we.getCacheCanvas(ht,ct,null,"overflow"),ct={ctx:R,target:ht,matrix:r},R=ht.ctx,ct.x=f,ct.y=y,ct.offsetWidth=h,ct.offsetHeight=c):C===Et.SVG&&delete O.overflow,C!==Et.CANVAS||e||(H.offscreenBlend=at,H.offscreenMask=ot,H.offscreenFilter=lt,H.offscreenOverflow=ct,(H.ctx=R).globalAlpha=x,R.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])),("hidden"===m||H.break)&&(C===Et.CANVAS||C===Et.WEBGL))return H.break=!0,H;var ut,_t=l.slice(0),ft=d.slice(0),dt=p.slice(0),pt=g.slice(0);if("padding-box"===nt||"paddingBox"===nt?(_t[0]-=F,_t[1]-=G,ft[0]-=B,ft[1]-=G,dt[0]-=B,dt[1]-=Y,pt[0]-=F,pt[1]-=Y):"content-box"!==nt&&"contentBox"!==nt||(_t[0]-=F+N,_t[1]-=G+L,ft[0]-=B+D,ft[1]-=G+L,dt[0]-=B+D,dt[1]-=Y+P,pt[0]-=F+N,pt[1]-=Y+P),n&&n.enabled&&(n.__available=!0),_){var gt=this.contentBoxList,mt=gt.length,vt=et.some(function(t){return t});if(mt){_=function(){var p,n,t=I[pc],e=I[gc],g=I[mc],a=0,m=0,v=[];vt&&(a=$l.getInlineWidth(S,gt),m=g,"paddingBox"===nt||"padding-box"===nt?(a+=N+D,m+=L+P):"contentBox"!==nt&&"content-box"!==nt&&(a+=N+D+F+B,m+=L+P+G+Y),C!==Et.CANVAS&&C!==Et.WEBGL||(p=we.getCacheCanvas(a,m,"__$$INLINE_BGI$$__")),n=et.length,et.slice(0).reverse().forEach(function(t,e){var r,i;t&&(e=n-1-e,he.isString(t)?(r=S.__loadBgi[e]).url===et[e]&&(i=qo.renderImage(S,C,p&&p.ctx||R,r,0,0,a,m,_t,ft,dt,pt,o,e,rt,tt,k,!0),C===Et.SVG&&i&&v.push(i)):!t.k||(i=S.__gradient(C,R,0,0,a,m,t))&&("conic"===i.k?(t=Je.renderConic(S,C,p&&p.ctx||R,i.v,0,0,a,g,_t,ft,dt,pt,!0),C===Et.SVG&&t&&v.push(t)):(i=qo.renderBgc(S,C,p&&p.ctx||R,i.v,0,0,a,m,_t,ft,dt,pt,"fill",!0),C===Et.SVG&&i&&v.push(i))))}));for(var e=_n.getFontFamily(e),y=_n.getBaseLine(I),x=t*(bt.info[e].lgr||0),E=!0,b=gt[0],A=b.parentLineBox,M=0,T=0;T<mt;T++){var _=gt[T];_.parentLineBox!==A&&function(){var t=xt($l.getInlineBox(S,gt,b,gt[T-1],A,y,g,x,E,!1,nt,L,D,P,N,G,B,Y,F),8),i=t[0],n=t[1],e=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];E&&(t=xu(S),i-=t,a-=t),0<j[3]&&qo.renderBgc(S,C,R,w[Wh],i+U,n+X,e-i,r-n,_t,[0,0],[0,0],pt);var h,c,u=e-i;C!==Et.CANVAS&&C!==Et.WEBGL||!p?C===Et.SVG&&v.length&&v.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(M,",",0,"L").concat(u+M,",",0,"L").concat(u+M,",").concat(m,"L").concat(M,",").concat(m,",L").concat(M,",",0)]]}]},r=R.add(e),k[Xc].push(e),O.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-M],["y",n],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,M,0,u,m,i+U,n+X,u,m),M+=u,it&&it.forEach(function(t){Gl.renderBoxShadow(S,C,R,t,a,o,s,l,s-a,l-o)}),0<G&&0<Z[3]&&(r=Math.atan(G/F),e=Math.atan(G/B),e=Ut.calPoints(G,I[$h],r,e,a,a+F,s,s,o,o+G,l-Y,l,0,E?_t:[0,0],[0,0]),Ut.renderBorder(S,C,R,e,w[rc],U,X)),0<Y&&0<J[3]&&(c=Math.atan(Y/F),h=Math.atan(Y/B),c=Ut.calPoints(Y,I[Zh],c,h,a,a+F,s,s,o,o+G,l-Y,l,2,E?_t:[0,0],[0,0]),Ut.renderBorder(S,C,R,c,w[ic],U,X)),E&&0<F&&0<Q[3]&&(h=Math.atan(F/G),c=Math.atan(F/Y),c=Ut.calPoints(F,I[qh],h,c,a,a+F,s-B,s,o,o+G,l-Y,l,3,_t,ft),Ut.renderBorder(S,C,R,c,w[nc],U,X)),E=!1,A=(b=_).parentLineBox}(),T===mt-1&&function(){var t=xt($l.getInlineBox(S,gt,b,gt[T],A,y,g,x,E,!0,nt,L,D,P,N,G,B,Y,F),8),i=t[0],n=t[1],e=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7];E&&(h=xu(S),i-=h,a-=h);var h=function t(e){for(var r=0,i=e.flowChildren,n=i.length-1;0<=n;n--){var a=i[n];if(!(a instanceof Eu||a instanceof Ro&&a.shadowRoot instanceof Eu))break;if(a.flowChildren.length){r+=t(a);break}r+=a.outerWidth}return r}(S);e+=h,s+=h,0<j[3]&&qo.renderBgc(S,C,R,w[Wh],i+U,n+X,e-i,r-n,E?_t:[0,0],ft,dt,E?pt:[0,0]);var c,u,_,f,d=e-i;C!==Et.CANVAS&&C!==Et.WEBGL||!p?C===Et.SVG&&v.length&&v.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(M,",",0,"L").concat(d+M,",",0,"L").concat(d+M,",").concat(m,"L").concat(M,",").concat(m,",L").concat(M,",",0)]]}]},r=R.add(e),k[Xc].push(e),O.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-M],["y",n],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,M,0,d,m,i+U,n+X,d,m),it&&it.forEach(function(t){Gl.renderBoxShadow(S,C,R,t,a,o,s,l,s-a,l-o)}),0<G&&0<Z[3]&&(u=Math.atan(G/F),c=Math.atan(G/B),u=Ut.calPoints(G,I[$h],u,c,a,a,s-B,s,o,o+G,l-Y,l,0,E?_t:[0,0],ft),Ut.renderBorder(S,C,R,u,w[rc],U,X)),0<B&&0<q[3]&&(c=Math.atan(B/G),u=Math.atan(B/Y),u=Ut.calPoints(B,I[jh],c,u,a,a+F,s-B,s,o,o+G,l-Y,l,1,_t,ft),Ut.renderBorder(S,C,R,u,w[ac],U,X)),0<Y&&0<J[3]&&(f=Math.atan(Y/F),_=Math.atan(Y/B),f=Ut.calPoints(Y,I[Zh],f,_,a,a,s-B,s,o,o+G,l-Y,l,2,E?_t:[0,0],ft),Ut.renderBorder(S,C,R,f,w[ic],U,X)),E&&0<F&&0<Q[3]&&(_=Math.atan(F/G),f=Math.atan(F/Y),f=Ut.calPoints(F,I[qh],_,f,a,a+F,s-B,s,o,o+G,l-Y,l,3,_t,ft),Ut.renderBorder(S,C,R,f,w[nc],U,X))}()}return p&&p.ctx.clearRect(0,0,a,m),{v:H}}();if("object"===yt(_))return _.v}else if(V===z||K===$)return H}return 0<j[3]&&qo.renderBgc(this,C,R,w[Wh],V,K,z-V,$-K,_t,ft,dt,pt),et&&(ut=et.length,et.slice(0).reverse().forEach(function(t,e){var r;t&&(e=ut-1-e,he.isString(t)?(r=S.__loadBgi[e]).url===et[e]&&qo.renderImage(S,C,R,r,V,K,z,$,_t,ft,dt,pt,o,e,rt,tt,k):!t.k||(t=S.__gradient(C,R,V,K,z,$,t))&&("conic"===t.k?Je.renderConic(S,C,R,t.v,V,K,z-V,$-K,_t,ft,dt,pt):qo.renderBgc(S,C,R,t.v,V,K,z-V,$-K,_t,ft,dt,pt)))})),it&&it.forEach(function(t){Gl.renderBoxShadow(S,C,R,t,f,y,v,M,v-f,M-y)}),0<G&&0<Z[3]&&Ut.renderBorder(this,C,R,w[cc],w[rc]),0<B&&0<q[3]&&Ut.renderBorder(this,C,R,w[uc],w[ac]),0<Y&&0<J[3]&&Ut.renderBorder(this,C,R,w[_c],w[ic]),0<F&&0<Q[3]&&Ut.renderBorder(this,C,R,w[fc],w[nc]),H}},{key:"__destroy",value:function(){var t;this.isDestroyed||(D(L(p.prototype),"__destroy",this).call(this),t=this.root,this.clearAnimate(),this.clearFrameAnimate(),t.delRefreshTask(this.__loadBgi.cb),t.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,n=this.isMask;if(!(r||"none"===i[yh]||t.__stopPropagation||n)){var a,o=t.event.type,r=this.listener,n=this.__hasMask;if(r.hasOwnProperty(o)&&(a=r[o]),e)return"none"!==i[hc]&&he.isFunction(a)&&!t.__stopImmediatePropagation&&a.call(this,t),!0;if(this.willResponseEvent(t)){if(n){for(var s,l=this.next,n=l.isClip;l&&l.isMask;){if(l.willResponseEvent(t,!0)){s=!0;break}l=l.next}if(!n&&!s)return}return he.isFunction(a)&&!t.__stopImmediatePropagation&&a.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,n=this.__sx1,a=this.__sy1,o=this.offsetWidth,s=this.offsetHeight,l=this.matrixEvent,h=this.computedStyle;if("none"!==h[hc])return Q.pointInQuadrilateral(r,i,n,a,n+o,a,n+o,a+s,n,a+s,l)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,i,n,a,o){var s=n-r,l=a-i;if(s&&l){var h=o.k,c=o.v,u=o.d,_=o.s,f=o.z,d=o.p,p={k:h};return"linear"===h?(o=Je.getLinear(c,u,r,i,r+.5*s,i+.5*l,s,l,this.root),p.v=this.__getLg(t,e,o)):"radial"===h?(f=Je.getRadial(c,_,f,d,r,i,n,a,this.root))&&(p.v=this.__getRg(t,e,f),f.matrix&&(p.v=[p.v,f.matrix,f.cx,f.cy])):"conic"===h&&(h=this.bbox,h=Math.max(Math.abs(h[2]-h[0]),Math.abs(h[3]-h[1])),l=Math.max(Math.abs(s),Math.abs(l)),l=Je.getConic(c,u,d,r,i,n,a,h/l,this.root),p.v=this.__getCg(t,e,l)),p}}},{key:"__getLg",value:function(t,e,r){if(t===Et.CANVAS||t===Et.WEBGL){var i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach(function(t){i.addColorStop(t[1],iu(t[0]))}),i}if(t===Et.SVG){r={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",iu(t[0])],["offset",100*t[1]+"%"]]}})},e=e.add(r);return this.__config[Xc].push(r),"url(#"+e+")"}}},{key:"__getRg",value:function(t,e,r){if(t===Et.CANVAS||t===Et.WEBGL){var i=e.createRadialGradient(r.cx,r.cy,0,r.cx,r.cy,r.r);return r.stop.forEach(function(t){i.addColorStop(t[1],iu(t[0]))}),i}if(t===Et.SVG){r={tagName:"radialGradient",props:[["cx",r.cx],["cy",r.cy],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",iu(t[0])],["offset",100*t[1]+"%"]]}})},e=e.add(r);return this.__config[Xc].push(r),"url(#"+e+")"}}},{key:"__getCg",value:function(t,e,r){var i=r.cx,n=r.cy,a=r.r,o=r.deg,s=r.stop,l=s.length-1;s[l][1]<1&&s.push([s[l][0].slice(0),1]),0<s[0][1]&&s.unshift([s[0][0].slice(0),0]);var h=[];if(t===Et.CANVAS||t===Et.WEBGL)return r;if(t===Et.SVG){for(var c,u=[],_=0,f=s.length;_<f-1;_++)for(var d=360*s[_][1],p=360*s[_+1][1]-d,g=Math.ceil(p),m=p/g,v=s[_][0],p=s[_+1][0],p=[p[0]-v[0],p[1]-v[1],p[2]-v[2],p[3]-v[3]],y=[p[0]/g,p[1]/g,p[2]/g,p[3]/g],x=0;x<g;x++){var E=xt(Q.pointOnCircle(i,n,a,d+m*x+o-.5),2),b=E[0],A=E[1],M=xt(Q.pointOnCircle(i,n,a,d+m*x+o+.5),2),E=M[0],M=M[1];u.push([b,A,E,M,Math.round(v[0]+y[0]*x),Math.round(v[1]+y[1]*x),Math.round(v[2]+y[2]*x),Math.round(v[3]+y[3]*x)])}l=u[0].slice(0),r=xt(Q.pointOnCircle(i,n,a,o),2),t=r[0],r=r[1];l[2]=t,l[3]=r;r=s[s.length-1][0];l[4]=r[0],l[5]=r[1],l[6]=r[2],l[7]=r[3],u.push(l);for(var T=0,C=u.length;T<C;T++){var R,O,S=u[T];c&&(R={tagName:"linearGradient",props:[["x1",c[0]],["y1",c[1]],["x2",S[2]],["y2",S[3]]],children:[{tagName:"stop",props:[["stop-color",iu([c[4],c[5],c[6],c[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",iu([S[4],S[5],S[6],S[7]])],["offset","100%"]]}]},O=e.add(R),this.__config[Xc].push(R),h.push([[[i,n],[c[0],c[1]],[S[2],S[3]]],"url(#"+O+")"])),c=S}}return h}},{key:"clearCache",value:function(t){var e=this.__config,r=e[Gc],i=e[Yc],n=e[Hc],a=e[Wc];t||(e[Rc]=this.__cacheStyle={},(e=e[Bc])&&e.release()),r&&r.release(),i&&i.release(),n&&n.release(),a&&a.release()}},{key:"updateStyle",value:function(e,r){var i=this,n=i.root,a=i.__config,o=_n.normalize(e);n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,a[Uc]||((t={})[vc]=i,t[xc]=o,t[Ec]=e,t[bc]=Object.keys(o).map(function(t){return t=!lu.hasOwnProperty(t)?parseInt(t):t}),t[Ac]=a,n.__addUpdate(i,a,n,n.__config,t))},__after:function(t){he.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,o),he.isFunction(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,n=i.root,a=i.__config;n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,a[Uc]||((t={})[vc]=i,t[xc]=e,t[bc]=Object.keys(e).map(function(t){return t=!lu.hasOwnProperty(t)?parseInt(t):t}),t[Ac]=a,n.__addUpdate(i,a,n,n.__config,t))},__after:function(t){he.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),he.isFunction(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new Dl(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof Dl&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(he.isFunction(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var n={__after:function(t){e(t)},__karasFramecb:e};return t.push(n),ts.onFrame(n),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void ts.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){ts.offFrame(t)})}},{key:"__computeMeasure",value:function(t,e,r){_n.computeMeasure(this),he.isFunction(r)&&r(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){D(L(p.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[Fc]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t}},{key:"__offsetY",value:function(t,e,r){D(L(p.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t,this.clearCache()),void 0!==r&&(this.__config[Fc]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t}},{key:"__resizeX",value:function(t,e){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[Pc]=!1),void 0!==e&&(this.__config[Fc]|=e),this.clearCache()}},{key:"__resizeY",value:function(t,e){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[Pc]=!1),void 0!==e&&(this.__config[Fc]|=e),this.clearCache()}},{key:"__spreadBbox",value:function(t){var a=0,o=0;return Array.isArray(t)&&t.forEach(function(t){var e=xt(t,6),r=e[0],i=e[1],n=e[2],t=e[3];"inset"!==e[5]&&(n=na.outerSize(n),n+=t,a=Math.max(a,r+n),o=Math.max(o,i+n))}),[a,o]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=t?(i=Array.isArray(t)?t:[t]).map(function(t){return jl[ql(t)]}):Object.keys(e);return i.forEach(function(t){lu.hasOwnProperty(t)?r[t]=e[t]:r[Zl[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,n=this.matrixEvent,a=uu(qt.calPoint([t,e],n)),o=uu(qt.calPoint([t+r,e],n)),r=uu(qt.calPoint([t+r,e+i],n)),n=uu(qt.calPoint([t,e+i],n));return{left:Math.min(a[0],Math.min(o[0],Math.min(r[0],n[0]))),top:Math.min(a[1],Math.min(o[1],Math.min(r[1],n[1]))),right:Math.max(a[0],Math.max(o[0],Math.max(r[0],n[0]))),bottom:Math.max(a[1],Math.max(o[1],Math.max(r[1],n[1]))),points:[a,o,r,n]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var n=this;if(n.isDestroyed)return we.warn("Remove target is destroyed."),void(he.isFunction(e)&&e());var a=n.root,o=n.domParent,t=n.isShadowRoot?n.hostRoot:n;-1!==o.children.indexOf(t)?(a.delRefreshTask(n.__task),a.addRefreshTask(n.__task={__before:function(){n.__task=null;var t=o.__json,e=t.children.indexOf((n.isShadowRoot?n.hostRoot:n).__json),r=o.zIndexChildren,i=r.indexOf(n.isShadowRoot?n.hostRoot:n);if(-1===e||-1===i)throw new Error("Remove index Exception.");t.children.splice(e,1),o.children.splice(e,1),r.splice(i,1),n.__prev&&(n.__prev.__next=n.__next);i={};i[vc]=n,i[yc]=Ca.REFLOW,i[Mc]=!0,i[Ac]=n.__config,a.__addUpdate(n,n.__config,a,a.__config,i)},__after:function(t){(n.isShadowRoot?n.hostRoot:n).__destroy(),he.isFunction(e)&&e.call(n,t)}})):he.isFunction(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s,l,h;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.clientWidth,i=this.clientHeight,n=(h=this.currentStyle)[uh],a=h[fh],o=h[_h],s=h[ch],l=h[Vh],l=(h=xt(this.__spreadBbox(l),2))[0],h=h[1],r+=s[0]+a[0],i+=n[0]+o[0],this.__bbox=[t-l,e-h,t+r+l,e+i+h]),this.__bbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[Dc]}},{key:"matrixEvent",get:function(){return this.__config[Lc]}},{key:"perspectiveMatrix",get:function(){return this.__config[zc]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseLine",get:function(){return this.offsetHeight}},{key:"firstBaseLine",get:function(){return this.offsetHeight}}]),p}(),b=g.STYLE_KEY,bu=b.DISPLAY,Au=b.MARGIN_LEFT,Mu=b.BORDER_LEFT_WIDTH,Tu=b.PADDING_LEFT,Cu=b.PADDING_RIGHT,Ru=b.BORDER_RIGHT_WIDTH,Ou=b.MARGIN_RIGHT,Su=function(){function n(t,e,r,i){_(this,n),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseLine=i}return d(n,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(){var r=this.baseLine;this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseLine=Math.max(e,this.__baseLine)}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){var t=this.list,e=t.length;if(e){for(var r=t[0],e=t[e-1],i=r.x,n=(r instanceof yn?r.parent:r).domParent;;){var a=n.contentBoxList,o=n.computedStyle,s=o[bu],l=o[Au],h=o[Mu],o=o[Tu];if("inline"!==s)break;r===a[0]&&(i-=l+h+o),n=n.domParent}for(var c=e.x+e.outerWidth,n=(e instanceof yn?e.parent:e).domParent;;){var u=n.contentBoxList,_=n.computedStyle,f=_[bu],d=_[Ou],p=_[Ru],_=_[Cu];if("inline"!==f)break;r===u[u.length-1]&&(c+=d+p+_),n=n.domParent}return c-i}return 0}},{key:"height",get:function(){return this.lineHeight}},{key:"baseLine",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),Math.max(this.__baseLine,e)}},{key:"lineHeight",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),Math.max(this.__lineHeight,e)}}]),n}(),ku=function(){function n(t,e,r,i){_(this,n),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__maxX=t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseLine=i,this.__isEnd=!0}return d(n,[{key:"genLineBox",value:function(t,e){e=new Su(t,e,this.__lineHeight,this.__baseLine);return this.list.push(e),this.__isEnd=!0,e}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseLine,i);if(this.__isNewLine){i=new Su(t,e,r,i);return this.list.push(i),this.__isEnd=!0,this.__isNewLine=!1,i}}},{key:"setLbOrGenLineBoxByInline",value:function(t,e,r,i){var n,a=Math.max(this.__lineHeight,r),o=Math.max(this.__baseLine,i),s=this.list;if(this.__isNewLine)return n=new Su(t,e,a,o),s.push(n),this.__isEnd=!0,this.__isNewLine=!1,n;(n=s[s.length-1]).__setLB(r,i)}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__maxX=Math.max(this.__maxX,e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i){this.list.forEach(function(t){var e=r-t.width;0<e&&("center"===i&&(e*=.5),t.__offsetX(e),t.list.forEach(function(t){t.__offsetX(e,!0)}))})}},{key:"verticalAlign",value:function(){this.list.forEach(function(t){t.verticalAlign()})}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseLine",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseLine}return 0}},{key:"firstBaseLine",get:function(){var t=this.list;return t.length?t[0].baseLine:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}}]),n}(),wu={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},Zt=g.STYLE_KEY,Iu=Zt.DISPLAY,Lu=Zt.TOP,Du=Zt.BOTTOM,Pu=Zt.POSITION,Nu=Zt.HEIGHT,Fu=C.AUTO,Bu=C.PX,Gu=C.PERCENT,Yu=Ca.REFLOW;var Hu={offsetAndResizeByNodeOnY:function(t,e,r,i,n){if(i){for(;;){for(;t.isShadowRoot;)t=t.host;var a=t,o=void 0,s=t.domParent;s&&(p=s.computedStyle[Pu],o=s===e||s.isShadowRoot||"relative"===p||"absolute"===p);for(var l=t.next,h=void 0;l;){if("none"!==l.currentStyle[Iu])if("absolute"===l.currentStyle[Pu]){var c=l.currentStyle,u=c[Lu],_=c[Du],c=c[Nu];if(u[1]===Fu?_[1]===Fu||_[1]===Bu?(l.__offsetY(i,!0,Yu),l.clearCache()):_[1]===Gu&&(_=(1-.01*_[0])*i,l.__offsetY(_,!0,Yu),l.clearCache()):u[1]===Gu&&(u=.01*u[0]*i,l.__offsetY(u,!0,Yu),l.clearCache()),c[1]===Gu)if(o)s.__layoutAbs(s,null,l);else{if(!h)for(h=s;h&&h!==e&&!h.isShadowRoot;){var f=h.currentStyle;if("absolute"===f[Pu]||"relative"===f[Pu])break;h=h.domParent}n.push([s,h,l])}}else l.__offsetY(i,!0,Yu),l.clearCache();l=l.next}if(!s)break;var d=(t=s).currentStyle,p=void 0;if("absolute"===d[Pu]?d[Nu][1]!==Fu||d[Lu][1]!==Fu&&d[Du][1]!==Fu||(p=!0):d[Nu][1]===Fu&&(p=!0),!p)break;if(t.__resizeY(i,Yu),t.clearCache(),t===e)break}for(;a;)a.clearCache(!0),a=a.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMarginTB:function(t,e){var r=0,i=t[0],n=t[0];return t.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),(e=0)<i&&0<n?e=Math.max(i,n)-r:i<0&&n<0?e=Math.min(i,n)-r:0===i&&0===n||(e=i+n-r),e}},jt=g.STYLE_KEY,Wu=jt.POSITION,Uu=jt.DISPLAY,Xu=jt.FONT_WEIGHT,Vu=jt.MARGIN_LEFT,Ku=jt.MARGIN_TOP,zu=jt.MARGIN_RIGHT,$u=jt.MARGIN_BOTTOM,ju=jt.PADDING_LEFT,Zu=jt.PADDING_BOTTOM,qu=jt.PADDING_RIGHT,Ju=jt.PADDING_TOP,Qu=jt.BORDER_TOP_WIDTH,t_=jt.BORDER_BOTTOM_WIDTH,e_=jt.BORDER_RIGHT_WIDTH,r_=jt.BORDER_LEFT_WIDTH,i_=jt.TOP,n_=jt.RIGHT,a_=jt.BOTTOM,o_=jt.LEFT,s_=jt.WIDTH,l_=jt.HEIGHT,h_=jt.TEXT_ALIGN,c_=jt.FLEX_DIRECTION,u_=jt.FLEX_BASIS,__=jt.FLEX_SHRINK,f_=jt.FLEX_GROW,d_=jt.ALIGN_SELF,p_=jt.ALIGN_ITEMS,g_=jt.JUSTIFY_CONTENT,m_=jt.Z_INDEX,v_=jt.WHITE_SPACE,y_=jt.LINE_HEIGHT,x_=jt.LINE_CLAMP,E_=jt.ORDER,b_=jt.FLEX_WRAP,A_=jt.ALIGN_CONTENT,M_=jt.OVERFLOW,T_=jt.FONT_SIZE,m=g.NODE_KEY,C_=m.NODE_CURRENT_STYLE,R_=m.NODE_STYLE,O_=m.NODE_STRUCT,S_=m.NODE_DOM_PARENT,k_=m.NODE_IS_INLINE,Jt=g.UPDATE_KEY,w_=Jt.UPDATE_NODE,I_=Jt.UPDATE_FOCUS,L_=Jt.UPDATE_ADD_DOM,D_=Jt.UPDATE_CONFIG,P_=Jt.UPDATE_MEASURE,F=g.STRUCT_KEY,N_=F.STRUCT_NUM,F_=F.STRUCT_LV,B_=F.STRUCT_TOTAL,G_=F.STRUCT_CHILD_INDEX,Y_=F.STRUCT_INDEX,H_=C.AUTO,W_=C.PX,U_=C.PERCENT,X_=C.REM,V_=C.VW,K_=C.VH,z_=_n.calAbsolute,$_=_n.isRelativeOrAbsolute;function j_(t){var i,n,a=[],o={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof Ro?t.shadowRoot:t)instanceof Eu&&t.isMask?void 0!==n?o[n].push(t):e&&(s[n=e-1].__iIndex=n,o[n]=[t],i=!0):(n=void 0,t instanceof Eu?(r.__zIndex=t.currentStyle[m_],$_(t)&&(r.__aIndex=!0)):r.__zIndex=0,a.push(r),r.__iIndex=e)}),a.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=a.length-1;0<=e;e--){var r=a[e].__iIndex;o.hasOwnProperty(r)&&a.splice.apply(a,[e+1,0].concat(f(o[r])))}return a}function Z_(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof Ro&&(t=t.shadowRoot),r.__order=t instanceof Eu?t.currentStyle[E_]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}var q_=function(){t(u,Eu);var n=e(u);function u(t,e,r){_(this,u);var i,e=o(i=n.call(this,t,e)).style;e.display&&{flex:!0,block:!0,inline:!0,inlineBlock:!0,"inline-block":!0,none:!0}.hasOwnProperty(e.display)||(wu.INLINE.hasOwnProperty(i.tagName)?e.display="inline":e.display="block"),!e[Xu]&&wu.BOLD.hasOwnProperty(t)&&(e.fontWeight=700),i.__style=_n.normalize(e,sr.DOM_ENTRY_SET),i.__currentStyle=he.extend({},i.__style),i.__children=r||[],i.__flexLine=[];r=i.__config;return r[C_]=i.__currentStyle,r[R_]=i.__style,i}return d(u,[{key:"__structure",value:function(r,i,t){var e=D(L(u.prototype),"__structure",this).call(this,r++,i,t),n=[e],a=this.__zIndexChildren=this.__zIndexChildren||j_(this);a.forEach(function(t,e){e=t.__structure(r,i+1,e);Array.isArray(e)?(r+=e.length,n=n.concat(e)):(r++,n.push(e))});t=n.length-1;return e[N_]=a.length,e[B_]=t,n}},{key:"__modifyStruct",value:function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.__config,n=i[O_],a=n[B_]||0,o=this.__structure(n[Y_],n[F_],n[G_]);(e=t.__structs).splice.apply(e,[n[Y_]+r,a+1].concat(f(o)));o=0;return this!==t&&(o=((n=i[O_])[B_]||0)-a,(i=i[S_].__config[O_])[B_]=i[B_]||0,i[B_]+=o),[n,o]}},{key:"__updateStruct",value:function(t){var e=this.__config[O_],r=e[Y_],e=e[B_],i=void 0===e?0:e,e=this.__zIndexChildren=j_(this);if(1!==e.length){e.forEach(function(t,e){t.__config[O_][G_]=e});for(var n,a=[],o=[],s=r+1;s<=r+i;s++){var l=t[s],h={child:l,list:t.slice(l[Y_],l[Y_]+l[B_]+1)};a.push(h),o.push(h),s+=l[B_]||0}a.sort(function(t,e){return t.child[G_]-e.child[G_]});for(var c,u=0,_=o.length;u<_;u++)if(o[u]!==a[u]){n=!0;break}n&&(c=[],a.forEach(function(t){c=c.concat(t.list)}),c.forEach(function(t,e){t[Y_]=r+e+1}),t.splice.apply(t,[r+1,i].concat(f(c))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,i=this.currentStyle,n=i[Uu],a=i[s_],o=i[Vu],s=i[zu],l=i[ju],h=i[qu],c=i[r_],i=i[e_];if("inline"===n)r.length&&((n=(n=r[0])instanceof Ro?n.shadowRoot:n)instanceof Eu?t=n.__tryLayInline(t,e):t-=n.firstCharWidth);else{if(a[1]===W_)t-=a[0];else if(a[1]===U_)t-=e*a[0]*.01;else if(a[1]===X_)t-=a[0]*this.root.computedStyle[T_];else if(a[1]===V_)t-=a[0]*this.root.width*.01;else if(a[1]===K_)t-=a[0]*this.root.height*.01;else for(var u=0;u<r.length;u++){if(t<0)return t;var _=r[u];(_=_ instanceof Ro?_.shadowRoot:_)instanceof Eu?t=_.__tryLayInline(t,e):t-=_.textWidth}s[1]===W_?t-=s[0]:s[1]===U_?t-=s[0]*e*.01:s[1]===X_?t-=s[0]*this.root.computedStyle[T_]:s[1]===V_?t-=s[0]*this.root.width*.01:s[1]===K_&&(t-=s[0]*this.root.height*.01),h[1]===W_?t-=h[0]:h[1]===U_?t-=h[0]*e*.01:h[1]===X_?t-=h[0]*this.root.computedStyle[T_]:h[1]===V_?t-=h[0]*this.root.width*.01:h[1]===K_&&(t-=h[0]*this.root.height*.01),i[1]===W_?t-=i[0]:i[1]===X_?t-=i[0]*this.root.computedStyle[T_]:i[1]===V_?t-=i[0]*this.root.width*.01:i[1]===K_&&(t-=i[0]*this.root.height*.01)}return o[1]===W_?t-=o[0]:o[1]===U_?t-=o[0]*e*.01:o[1]===X_?t-=o[0]*this.root.computedStyle[T_]:o[1]===V_?t-=o[0]*this.root.width*.01:o[1]===K_&&(t-=o[0]*this.root.height*.01),l[1]===W_?t-=l[0]:l[1]===U_?t-=l[0]*e*.01:l[1]===X_?t-=l[0]*this.root.computedStyle[T_]:l[1]===V_?t-=l[0]*this.root.width*.01:l[1]===K_&&(t-=l[0]*this.root.height*.01),c[1]===W_?t-=c[0]:c[1]===X_?t-=c[0]*this.root.computedStyle[T_]:c[1]===V_?t-=c[0]*this.root.width*.01:c[1]===K_&&(t-=c[0]*this.root.height*.01),t}},{key:"__offsetX",value:function(e,r,i){D(L(u.prototype),"__offsetX",this).call(this,e,r,i),r&&!this.__config[k_]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){D(L(u.prototype),"__offsetY",this).call(this,e,r,i),r&&!this.__config[k_]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calMinMax",value:function(a,t){_n.computeReflow(this,this.isShadowRoot);var i,o,s,l,h,c=0,u=0,e=this.flowChildren,r=this.currentStyle,n=this.computedStyle,_=t.x,f=t.y,d=t.w,p=t.h,g=t.lineBoxManager,m=r[Uu],v=r[c_],y=r[s_],t=r[l_],x=n[y_],t=a?y:t;return t[1]===W_?c=u=t[0]:t[1]===X_?c=u=t[0]*this.root.computedStyle[T_]:t[1]===V_?c=u=t[0]*this.root.width*.01:t[1]===K_?c=u=t[0]*this.root.height*.01:"flex"===m?(i="column"!==v,(e=Z_(e)).forEach(function(t){var e,r;t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu?(e=t.currentStyle,r=t.computedStyle,"block"!==e[Uu]&&"flex"!==e[Uu]&&(e[Uu]=r[Uu]="block"),e=xt(t.__calMinMax(a,{x:_,y:f,w:d,h:p}),2),e=(r=xt(e[1],2))[0],r=r[1],a?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):a?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new ku(_,f,x,_n.getBaseLine(n)),t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):"block"===m?(s=o=0,l=new ku(_,f,x,_n.getBaseLine(n)),h=e.length,e.forEach(function(t,e){var r,i,n;t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu?(r=(i=xt(t.__calMinMax(a,{x:_,y:f,w:d,h:p,lineBoxManager:l}),2))[0],i=(n=xt(i[1],2))[0],n=n[1],"block"!==r&&"flex"!==r||!l.isEnd||(l.setNotEnd(),l.setNewLine()),a?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,n),o=s=0):(o+=i,s+=n,c=Math.max(c,o),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=o,u+=s,o=s=0,c+=i,u+=n):(o=Math.max(o,i),s=Math.max(s,n),e===h-1&&(c+=o,u+=s))):a?(o+=t.charWidth,s+=t.textWidth,c=Math.max(c,o),u=Math.max(u,s)):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:l}),o=Math.max(o,t.height),s=Math.max(s,t.height),e===h-1&&(c+=o,u+=s))})):("inlineBlock"!==m&&"inline-block"!==m||(g=new ku(_,f,x,_n.getBaseLine(n))),e.forEach(function(t){var e,r;t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu?(e=xt(t.__calMinMax(a,{x:_,y:f,w:d,h:p,lineBoxManager:g}),2),e=(r=xt(e[1],2))[0],r=r[1],a?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r))):a?(c+=t.charWidth,u+=t.textWidth):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:g}),c=Math.max(c,t.height),u=Math.max(u,t.height))})),[m,this.__addMp(a,d,r,[c,u])]}},{key:"__calBasis",value:function(a,t,e){_n.computeReflow(this,this.isShadowRoot);var r,i,o,s,l,h,n=0,c=0,u=0,_=this.flowChildren,f=this.currentStyle,d=this.computedStyle,p=t.x,g=t.y,m=t.w,v=t.h,y=f[Uu],x=f[c_],E=f[s_],b=f[l_],A=f[u_],M=d[y_],T=a?E:b,t=A[1]===H_,E=-1<[W_,U_,X_,V_,K_].indexOf(A[1]),b=!t&&!E;return E?A[1]===W_?n=r=A[0]:A[1]===U_?n=r=(a?m:v)*A[0]*.01:A[1]===X_?n=r=A[0]*this.root.computedStyle[T_]:A[1]===V_?n=r=A[0]*this.root.width*.01:A[1]===K_&&(n=r=A[0]*this.root.height*.01):-1<[W_,U_,X_,V_,K_].indexOf(T[1])&&t?T[1]===W_?n=r=T[0]:T[1]===U_?n=r=.01*T[0]*(a?m:v):T[1]===X_?n=r=T[0]*this.root.computedStyle[T_]:T[1]===V_?n=r=T[0]*this.root.width*.01:T[1]===K_&&(n=r=T[0]*this.root.height*.01):t&&(b=!0),"flex"===y?(i="column"!==x,(_=Z_(_)).forEach(function(t){var e,r;t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu?(e=t.currentStyle,r=t.computedStyle,"block"!==e[Uu]&&"flex"!==e[Uu]&&(e[Uu]=r[Uu]="block"),e=xt(t.__calMinMax(a,{x:p,y:g,w:m,h:v}),2),e=(r=xt(e[1],2))[0],r=r[1],a?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):a?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new ku(p,g,M,_n.getBaseLine(d)),t.__layout({x:p,y:g,w:m,h:v,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):(s=o=0,l=this.__lineBoxManager=new ku(p,g,M,_n.getBaseLine(d)),h=_.length,_.forEach(function(t,e){var r,i,n;t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu?(r=(i=xt(t.__calMinMax(a,{x:p,y:g,w:m,h:v,lineBoxManager:l}),2))[0],i=(n=xt(i[1],2))[0],n=n[1],"block"!==r&&"flex"!==r||!l.isEnd||(l.setNotEnd(),l.setNewLine()),a?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,n),o=s=0):(o+=i,s+=n,c=Math.max(c,o),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=o,u+=s,o=s=0,c+=i,u+=n):(o=Math.max(o,i),s=Math.max(s,n),e===h-1&&(c+=o,u+=s))):a?(o+=t.charWidth,s+=t.textWidth,c=Math.max(c,o),u=Math.max(u,s)):(t.__layout({x:p,y:g,w:m,h:v,lineBoxManager:l}),o=Math.max(o,t.height),s=Math.max(s,t.height),e===h-1&&(c+=o,u+=s))})),r&&(u=Math.max(r,u)),b&&(n=u),this.__addMp(a,m,f,[n,c,u],!0)}},{key:"__layoutNone",value:function(){D(L(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(_,f){var d=this.flowChildren,t=this.currentStyle,e=this.computedStyle,r=this.__preLayout(_),i=r.fixedWidth,n=r.fixedHeight,p=r.x,g=r.y,m=r.w,v=r.h;if(i&&f)return this.__width=m,void this.__ioSize(m,this.height);var a=e[h_],y=e[v_],x=e[x_],r=e[y_],x=x||0,E=0,b=this.__lineBoxManager=new ku(p,g,r,_n.getBaseLine(e)),A=0,M=0,T=[],C=[],R=d.length;d.forEach(function(t,e){var r,i,n,a,o,s,l=t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu,h=l&&"inline"===t.currentStyle[Uu],c=l&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[Uu]),u="img"===t.tagName;l&&!h&&!c||(T.length&&C.length&&((a=Hu.getMergeMarginTB(C,T))&&(g+=a)),C=[],T=[]),l?c||h?p===_.x||h&&"nowrap"===y?(t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(A=Math.max(A,M),M=t.outerWidth,A=Math.max(A,M))):(-1e-10<=t.__tryLayInline(m+_.x-p,m)?(t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),(c||u)&&b.addItem(t),p=b.lastX,g=b.lastY):(E++,p=_.x,g=b.endY,b.setNewLine(),E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(A=Math.max(A,M),M=0)),f&&(M+=t.outerWidth,A=Math.max(A,M))):(p!==_.x&&d[e-1]instanceof qa&&E++,p=_.x,b.isEnd&&(g=b.endY,b.setNotEnd(),b.setNewLine()),t.__layout({x:p,y:g,w:m,h:v},f),!(r="none"===t.currentStyle[Uu])&&t.flowChildren&&0===t.flowChildren.length&&(n=(o=t.computedStyle)[Ku],a=o[$u],l=o[Ju],h=o[Zu],c=o[l_],u=o[Qu],o=o[t_],l<=0&&h<=0&&c<=0&&u<=0&&o<=0&&(T.push(a),C.push(n),i=!0)),g+=t.outerHeight,b.__lastY=g,f&&(A=Math.max(A,t.outerWidth),M=0),r||i?e!==R-1||(s=Hu.getMergeMarginTB(C,T))&&(g+=s):(s=(e=t.computedStyle)[Ku],e=e[$u],T.length&&(C.push(s),(s=Hu.getMergeMarginTB(C,T))&&(t.__offsetY(s,!0),g+=s)),C=[],T=[e])):x&&x<=E||(p===_.x||"nowrap"===y?(E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),p=b.lastX,g=b.lastY,f&&(A=Math.max(A,M),M=t.width,A=Math.max(A,M))):(-1e-10<=t.__tryLayInline(m-p+_.x)?(E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),p=b.lastX,g=b.lastY):(E++,p=_.x,g=b.endY,b.setNewLine(),E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),p=b.lastX,g=b.lastY,f&&(A=Math.max(A,t.width),M=0)),f&&(M+=t.width,A=Math.max(A,M))))}),b.isEnd&&(g=b.endY);var o=this.__width=i||!f?m:A,n=this.__height=n?v:g-_.y;this.__ioSize(o,n),f||(b.verticalAlign(),-1<["center","right"].indexOf(a)&&(b.horizonAlign(o,a),d.forEach(function(t){(t=t instanceof Ro?t.shadowRoot:t)instanceof qa&&t.__inlineSize()})),b.domList.forEach(function(t){t.__inlineSize(o,a)}),this.__marginAuto(t,_))}},{key:"__layoutFlex",value:function(r,l){var n=this,t=this.flowChildren,e=this.currentStyle,h=this.computedStyle,a=this.__flexLine,i=this.__preLayout(r),o=i.fixedWidth,s=i.fixedHeight,c=i.x,u=i.y,_=i.w,f=i.h;if(o&&l)return this.__width=_,void this.__ioSize(_,this.height);a.splice(0);var d=h[c_],p=h[g_],g=h[p_],m=h[x_],v=h[b_],i=h[A_],y=h[y_],x=h[h_],m=m||0,E=0,b=-1===["column","column-reverse","columnReverse"].indexOf(d),A=[],M=[],T=[],C=[],R=[],O=Z_(t);if(O.forEach(function(t){var e,r,i,n,a,o,s;t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu?(a=t.currentStyle,e=t.computedStyle,"block"!==a[Uu]&&"flex"!==a[Uu]&&(a[Uu]=e[Uu]="block"),r=(n=xt(t.__calBasis(!!l||b,{x:c,y:u,w:_,h:f},l),3))[0],o=n[1],i=n[2],l?b?E+=i:E=Math.max(E,i):(n=a[f_],a=a[__],e[u_]=r,A.push(n),M.push(a),T.push(r),C.push(i),R.push(o))):l?b?E+=t.textWidth:E=Math.max(E,t.textWidth):(A.push(0),M.push(1),b?(s=t.charWidth,o=t.textWidth,T.push(o),C.push(o),R.push(s)):(s=new ku(c,u,y,_n.getBaseLine(h)),t.__layout({x:c,y:u,w:_,h:void 0,lineBoxManager:s,lineClamp:m,lineClampCount:0}),t=t.height,T.push(t),R.push(t)))}),l){t=this.__width=Math.min(E,_);this.__ioSize(t,this.height)}else{var S=b?_:f,k="wrap"===v||-1<["wrap-reverse","wrapReverse"].indexOf(v),w=[],I=0,L=[];T.forEach(function(t,e){var r=R[e],i=C[e],t=t<r?r:i<t?i:t;L.push(t),k?S<I+t?I=I?(a.push(w),w=[O[e]],t):(w.push(O[e]),a.push(w),w=[],0):(w.push(O[e]),I+=t):w.push(O[e])}),w.length&&a.push(w);var D=0,P={x:c,y:u,w:_,h:f},N=[];a.forEach(function(t){var e=t.length,r=D+e,i=xt(n.__layoutFlexLine(P,b,S,o,s,m,0,y,h,p,g,O.slice(D,r),t,x,A.slice(D,r),M.slice(D,r),T.slice(D,r),L.slice(D,r),R.slice(D,r)),3),t=i[0],r=i[1],i=i[2];b?P.y=r:P.x=t,c=Math.max(c,t),u=Math.max(u,r),N.push(i),D+=e});var F=this.__width=_,B=this.__height=s?f:u-r.y;this.__ioSize(F,B),"row-reverse"===d||"rowReverse"===d?a.forEach(function(t){t.forEach(function(t){var e=F-t.outerWidth-2*(t.x-r.x);e&&t.__offsetX(e,!0)})}):"column-reverse"!==d&&"columnReverse"!==d||a.forEach(function(t){t.forEach(function(t){var e=B-t.outerHeight-2*(t.y-r.y);e&&t.__offsetY(e,!0)})});var G,Y,H,W,U,d=a.length;if(-1<["wrapReverse","wrap-reverse"].indexOf(v)&&1<d){var X=0,V=[];N.forEach(function(t){V.push(X),X+=t});for(var K=0,z=d-1;0<=z;z--)!function(t){var e=a[t],r=V[t],i=K-r;i&&e.forEach(function(t){b?t.__offsetY(i,!0):t.__offsetX(i,!0)}),K+=N[t]}(z);a.reverse()}!l&&1<d&&(s&&b||!b)&&(0<(Y=b?B-(u-r.y):F-(c-r.x))&&("center"===i?(H=.5*Y,O.forEach(function(t){b?t.__offsetY(H,!0):t.__offsetX(H,!0)})):"flex-start"===i||"flexStart"===i||("flex-end"===i||"flexEnd"===i?O.forEach(function(t){b?t.__offsetY(Y,!0):t.__offsetX(Y,!0)}):"space-between"===i||"spaceBetween"===i?(W=Y/(d-1),a.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(W,!0):t.__offsetX(W,!0)})})):"space-around"===i||"spaceAround"===i?(U=Y/(d+1),a.forEach(function(t,e){t.forEach(function(t){b?t.__offsetY(U*(e+1),!0):t.__offsetX(U*(e+1),!0)})})):(G=Y/d,a.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(G*e,!0):t.__offsetX(G*e,!0)})}))))),l||(1<d?a.forEach(function(t,e){e=N[e];G&&(e+=G),n.__crossAlign(t,g,b,e)}):d&&(d=N[0],b?s&&(d=f):d=_,this.__crossAlign(a[0],g,b,d))),this.__marginAuto(e,r)}}},{key:"__layoutFlexLine",value:function(t,i,e,r,n,a,o,s,l,h,c,u,_,f,d,p,g,m,v){var y=this,x=t.x,E=t.y,b=t.w,A=t.h,M=0;m.forEach(function(t){M+=t});var T=e<=M,C=[];g.forEach(function(t,e){T?(!p[e]||g[e]<m[e])&&(C[e]=m[e]):(!d[e]||g[e]>m[e])&&(C[e]=m[e])});var R=0;g.forEach(function(t,e){void 0!==C[e]?R+=C[e]:R+=t});var e=1/0,e=i?b:n?A:R,R=Math.abs(e-R),O=0;(T?function(){for(var i=p.map(function(t,e){if(void 0===C[e]){e=t*g[e];return O+=e,e}});;){O<1&&(R*=O);var n=void 0,a=0;if(i.forEach(function(t,e){var r;t&&(r=t/O*R,(r=g[e]-r)<v[e]?(C[e]=v[e],i[e]=0,n=!0,R-=g[e]-v[e]):(C[e]=r,a+=t))}),!n)break;O=a}}:function(){for(var i=d.map(function(t,e){if(void 0===C[e])return O+=t,t});;){O<1&&(R*=O);var n=void 0,a=0;if(i.forEach(function(t,e){var r;t&&(r=t/O*R,(r=g[e]+r)<v[e]?(C[e]=v[e],i[e]=0,n=!0,R-=g[e]-v[e]):(C[e]=r,a+=t))}),!n)break;O=a}})();var S=0,k=[];u.forEach(function(t,e){var r=C[e];t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu?i?t.__layout({x:x,y:E,w:r,h:A,w3:r}):t.__layout({x:x,y:E,w:b,h:r,h3:r}):(e=y.__lineBoxManager=new ku(x,E,s,_n.getBaseLine(l)),k.push(e),t.__layout({x:x,y:E,w:i?r:b,h:i?A:r,lineBoxManager:e,lineClamp:a,lineClampCount:o})),S=i?(x+=t.outerWidth,Math.max(S,t.outerHeight)):(E+=t.outerHeight,Math.max(S,t.outerWidth))});var w=i?b-x+t.x:A-E+t.y;if(0<w){var I=u.length;if("flexEnd"===h||"flex-end"===h)for(var L=0;L<I;L++){var D=u[L];i?D.__offsetX(w,!0):D.__offsetY(w,!0)}else if("center"===h)for(var P=.5*w,N=0;N<I;N++){var F=u[N];i?F.__offsetX(P,!0):F.__offsetY(P,!0)}else if("spaceBetween"===h||"space-between"===h)for(var B=w/(I-1),G=1;G<I;G++){var Y=u[G];i?Y.__offsetX(B*G,!0):Y.__offsetY(B*G,!0)}else if("spaceAround"===h||"space-around"===h)for(var H=w/(I+1),W=0;W<I;W++){var U=u[W];i?U.__offsetX(H*(W+1),!0):U.__offsetY(H*(W+1),!0)}}return i?E+=S:x+=S,-1<["center","right"].indexOf(f)&&k.forEach(function(t){t.horizonAlign(t.width,f)}),[x,E,S]}},{key:"__crossAlign",value:function(t,O,S,k){var w=0;t.forEach(function(t){w=Math.max(w,t.firstBaseLine)}),t.forEach(function(t){var e,r,i,n,a,o,s,l,h,c,u,_,f,d,p,g,m,v,y,x,E,b,A,M,T,C,R=t.currentStyle[d_];S?"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(o=k-t.outerHeight)&&t.__offsetY(o,!0):"center"===R?0!=(s=k-t.outerHeight)&&t.__offsetY(.5*s,!0):"stretch"===R?(e=t.computedStyle,l=t.currentStyle[l_],r=e[Qu],i=e[t_],n=e[Ku],a=e[$u],o=e[Ju],s=e[Zu],l[1]===H_&&(l=t.height,l=(t.__height=e[l_]=k-n-a-o-s-r-i)-l,t.__sy4+=l,t.__sy5+=l,t.__sy6+=l,t.__height+=l,t.__clientHeight+=l,t.__offsetHeight+=l,t.__outerHeight+=l)):"baseline"===R?0!=(c=w-t.firstBaseLine)&&t.__offsetY(c,!0):"flexStart"===O||"flex-start"===R||("center"===O?0!=(u=k-t.outerHeight)&&t.__offsetY(.5*u,!0):"flexEnd"===O||"flex-end"===O?0!=(_=k-t.outerHeight)&&t.__offsetY(_,!0):"baseline"===O?0!=(h=w-t.firstBaseLine)&&t.__offsetY(h,!0):(f=t.computedStyle,u=(c=t.currentStyle)[Uu],_=c[c_],h=c[l_],S&&"flex"===u&&"column"===_&&h[1]===H_&&t.outerHeight<k&&t.__layout(Object.assign(t.__layoutData,{h3:k})),d=f[Qu],p=f[t_],c=f[Ku],u=f[$u],_=f[Ju],f=f[Zu],h[1]===H_&&(g=t.height,t.__sy4+=m=k-c-u-_-f-d-p-g,t.__sy5+=m,t.__sy6+=m,t.__height+=m,t.__clientHeight+=m,t.__offsetHeight+=m,t.__outerHeight+=m)))):"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(v=k-t.outerWidth)&&t.__offsetX(v,!0):"center"===R?0!=(y=k-t.outerWidth)&&t.__offsetX(.5*y,!0):"stretch"===R?(f=t.computedStyle,d=t.currentStyle[s_],p=f[e_],x=f[r_],g=f[zu],m=f[Vu],v=f[qu],y=f[ju],d[1]===H_&&(C=t.width,E=(t.__width=f[s_]=k-m-g-y-v-p-x)-C,t.__sx4+=E,t.__sx5+=E,t.__sx6+=E,t.__width+=E,t.__clientWidth+=E,t.__offsetWidth+=E,t.__outerWidth+=E)):"baseline"===O?0!=(b=w-t.firstBaseLine)&&t.__offsetX(b,!0):"flexStart"===O||"flex-start"===R||("center"===O?0!=(A=k-t.outerWidth)&&t.__offsetX(.5*A,!0):"flexEnd"===O||"flex-end"===O?0!=(M=k-t.outerWidth)&&t.__offsetX(M,!0):"baseline"===O?0!=(T=w-t.firstBaseLine)&&t.__offsetX(T,!0):(x=t.computedStyle,C=t.currentStyle[s_],E=x[e_],b=x[r_],R=x[zu],A=x[Vu],M=x[qu],T=x[ju],C[1]===H_&&(C=t.width,C=(t.__width=x[s_]=k-A-R-T-M-E-b)-C,t.__sx4+=C,t.__sx5+=C,t.__sx6+=C,t.__width+=C,t.__clientWidth+=C,t.__offsetWidth+=C,t.__outerWidth+=C))))})}},{key:"__layoutInline",value:function(t,s,l){var e=this.flowChildren,r=this.currentStyle,i=this.computedStyle,n=this.__preLayout(t,l),a=n.fixedWidth,o=n.fixedHeight,h=n.x,c=n.y,u=n.w,_=n.h,f=n.lx,d=n.lineBoxManager,p=n.nowrap,g=n.endSpace,m=n.selfEndSpace;if(a&&s)return this.__width=u,void this.__ioSize(u,this.height);var v=r[s_],y=i[h_],x=i[v_],E=i[x_],b=i[y_],A=i[Vu],M=i[zu],T=i[r_],C=i[e_],n=i[ju],r=i[qu],R=t.lineClampCount||0;(l=l&&!this.__isRealInline()?!1:l)?(this.__config[k_]=!0,this.__lineBoxManager=d,O=_n.getBaseLine(i),(A||M||n||r||T||C)&&d.isNewLine?d.genLineBoxByInlineIfNewLine(h,c,b,O):d.setLbByInlineIfNotNewLine(b,O),E=t.lineClamp||0):(d=this.__lineBoxManager=new ku(h,c,b,_n.getBaseLine(i)),f=h,g=m=R=0),l&&(this.__contentBoxList=[],d.pushContentBoxList(this));var O,S,k,w=!1,I=e.length;return e.forEach(function(t,e){var r=t instanceof Eu||t instanceof Ro&&t.shadowRoot instanceof Eu,i=r&&"inline"===t.currentStyle[Uu],n=r&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[Uu]),a=r&&t.__isRealInline(),o=l&&e===I-1;o&&(g+=m),r?(i||n||(t.currentStyle[Uu]=t.computedStyle[Uu]="inlineBlock",n=!0,we.warn("Inline can not contain block/flex")),h===f||!e||i&&"nowrap"===x?(R=t.__layout({x:h,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),t.__isIbFull?(n&&u[1]===H_&&(w=!0),d.addItem(t),h=f,c+=t.outerHeight,d.setNotEnd()):(!n&&a||d.addItem(t),h=d.lastX,c=d.lastY)):-1e-10<=("nowrap"===x?0:t.__tryLayInline(u-h+f,u-(o?g:0)))?(R=t.__layout({x:h,y:c,w:u,h:_,lx:f,nowrap:"nowrap"===x,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),!n&&a||d.addItem(t),h=d.lastX,c=d.lastY):(i&&R++,h=f,c=d.endY,d.setNewLine(),R=t.__layout({x:h,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),t.__isIbFull?(d.addItem(t),h=f,c+=t.outerHeight,d.setNotEnd()):(!n&&a||d.addItem(t),h=d.lastX,c=d.lastY))):(n=d.size,h!==f&&e&&"nowrap"!==x?(e=(a=!e&&p||"nowrap"===x)?0:t.__tryLayInline(u+f-h),!a&&0<=e&&o&&g&&1===t.content.length&&((o=e-g)<0&&(e=o)),-1e-10<=e?(R=t.__layout({x:h,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),h=d.lastX,c=d.lastY):(R++,h=f,c=d.endY,d.setNewLine(),R=t.__layout({x:h,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),h=d.lastX,c=d.lastY,!l&&1<d.size-n&&v[1]===H_&&(w=!0))):(R=t.__layout({x:h,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),h=d.lastX,c=d.lastY,!l&&1<d.size-n&&v[1]===H_&&(w=!0)))}),c=d.endY,this.__isIbFull=w,l?(m&&d.addX(m),e.length||(O=i[Vu],b=i[ju],S=i[r_],d.addX(O+b+S)),d.popContentBoxList(),s&&this.__inlineSize()):(S=d.__maxX-t.x,k=this.__width=a?u:w?Math.max(u,S):S,t=this.__height=o?_:c-t.y,this.__ioSize(k,t)),s||l||(d.verticalAlign(),-1<["center","right"].indexOf(y)&&(d.horizonAlign(k,y),e.forEach(function(t){(t=t instanceof Ro?t.shadowRoot:t)instanceof qa&&t.__inlineSize()})),d.domList.forEach(function(t){t.__inlineSize(k,y)})),l?R:0}},{key:"__inlineSize",value:function(t,e){var r,i,n,a,o,s,l,h,c,u,_,f,d,p,g,m,v=this.contentBoxList,y=this.computedStyle,x=this.__ox,E=this.__oy,b=y[Ku],A=y[zu],M=y[$u],T=y[Vu],C=y[Ju],R=y[qu],O=y[Zu],S=y[ju],k=y[Qu],w=y[e_],I=y[t_],L=y[r_],D=y[y_],P=v.length;P?(v.forEach(function(t,e){e?(n=Math.min(n,t.x),l=Math.min(l,t.x),_=Math.min(_,t.x),g=Math.min(g,t.x),e===P-1?(r=o=c=d=Math.max(r,t.x+t.outerWidth),i=s=u=p=Math.max(i,t.y+t.outerHeight),o+=R,s+=O,c+=R+w,u+=O+I,d+=w+R+A,p+=I+O+M):r=o=c=d=Math.max(r,t.x+t.outerWidth)):(n=t.x,a=t.y,g=(_=(l=n-S)-L)-T,m=(f=(h=a-C)-k)-b,r=o=c=d=t.x+t.outerWidth,i=s=u=p=t.y+t.outerHeight,e===P-1&&(o+=R,s+=O,c+=R+w,u+=O+I,d+=w+R+A,p+=I+O+M))}),this.__x=g,this.__y=m,this.__width=y[s_]=r-n,this.__height=y[l_]=Math.max(D,i-a),this.__clientWidth=o-l,this.__clientHeight=s-h,this.__offsetWidth=c-_,this.__offsetHeight=u-f,this.__outerWidth=d-g,this.__outerHeight=p-m,this.__sx=g+x,this.__sy=m+E,this.__sx1=_+x,this.__sy1=f+E,this.__sx2=l+x,this.__sy2=h+E,this.__sx3=n+x,this.__sy3=a+E,this.__sx4=r+x,this.__sy4=i+E,this.__sx5=o+x,this.__sy5=s+E,this.__sx6=c+x,this.__sy6=u+E,-1<["center","right"].indexOf(e)&&this.children.forEach(function(t){t instanceof qa&&t.__inlineSize()})):(-1<["center","right"].indexOf(e)&&(t=t,"center"===e&&(t*=.5),t&&this.__offsetX(t,!0)),this.__width=y[s_]=0,D=this.__height=y[l_]=D,this.__ioSize(0,D),this.__sy-=b+C+k,this.__sx1=this.sx+T,this.__sy1=this.sy+b,this.__sx2=this.__sx1+L,this.__sy2=this.__sy1+k,this.__sx4=this.__sx3=this.__sx2+S,this.__sy4=this.__sy3=this.__sy2+C,this.__sx5=this.__sx4+R,this.__sy5=this.__sy4+D+O,this.__sx6=this.__sx5+w,this.__sy6=this.__sy5+I,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+T+A,this.__outerHeight=this.__offsetHeight+b+M)}},{key:"__layoutAbs",value:function(r,i,A){var M=this,T=r.sx,C=r.sy,R=r.clientWidth,O=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,n=this.children,a=this.absChildren,o=t[Uu],s=t[Qu],l=t[r_],h=t[Ku],c=t[Vu],S=t[ju],k=t[Ju];e||"none"===o?this.__layoutNone():(T+=c+l,C+=h+s,a.forEach(function(t){if(A){var e=t;if(t instanceof Ro&&(e=t.shadowRoot),A!==e&&A!==t)return}var r=t.currentStyle,i=t.computedStyle;if("none"!==r[Uu]){t.__mp(r,i,R),"block"!==r[Uu]&&"flex"!==r[Uu]&&(r[Uu]=i[Uu]="block");var n,a,o,s,l,h,c,u,_,f,d=r[o_],p=r[i_],g=r[n_],m=r[a_],v=r[s_],y=r[l_],x=r[Uu],e=r[c_];if(d[1]!==H_?(_=!0,i[o_]=z_(r,"left",d,R,M.root)):i[o_]="auto",g[1]!==H_?(c=!0,i[n_]=z_(r,"right",g,R,M.root)):i[n_]="auto",p[1]!==H_?(h=!0,i[i_]=z_(r,"top",p,O,M.root)):i[i_]="auto",m[1]!==H_?(u=!0,i[a_]=z_(r,"bottom",m,O,M.root)):i[a_]="auto",_&&c?(n=T+i[o_],a=T+R-i[n_]-n):_?(n=T+i[o_],v[1]!==H_&&(a=v[1]===U_?v[0]*R*.01:v[1]===X_?v[0]*M.root.computedStyle[T_]:v[1]===V_?v[0]*M.root.width*.01:v[1]===K_?v[0]*M.root.height*.01:v[0])):c?(v[1]!==H_?a=v[1]===U_?v[0]*R*.01:v[1]===X_?v[0]*M.root.computedStyle[T_]:v[1]===V_?v[0]*M.root.width*.01:v[1]===K_?v[0]*M.root.height*.01:v[0]:s=!0,n=T+R-i[n_]-(a||0),n-=i[Vu],n-=i[zu],n-=i[ju],n-=i[qu],n-=r[r_][0],n-=r[e_][0]):(n=T+S,v[1]!==H_&&(a=v[1]===U_?v[0]*R*.01:v[1]===X_?v[0]*M.root.computedStyle[T_]:v[1]===V_?v[0]*M.root.width*.01:v[1]===K_?v[0]*M.root.height*.01:v[0])),h&&u)E=C+i[i_],o=C+O-i[a_]-E;else if(h)E=C+i[i_],y[1]!==H_&&(o=y[1]===U_?y[0]*O*.01:y[1]===X_?y[0]*M.root.computedStyle[T_]:y[1]===V_?y[0]*M.root.width*.01:y[1]===K_?y[0]*M.root.height*.01:y[0]);else if(u)y[1]!==H_?o=y[1]===U_?y[0]*O*.01:y[1]===X_?y[0]*M.root.computedStyle[T_]:y[1]===V_?y[0]*M.root.width*.01:y[1]===K_?y[0]*M.root.height*.01:y[0]:l=!0,E=C+O-i[a_]-(o||0),E-=i[Ku],E-=i[$u],E-=i[Ju],E-=i[Zu],E-=r[Qu][0],E-=r[t_][0];else{for(var E=C+k,b=t.prev;b;){if(b instanceof qa||"absolute"!==b.computedStyle[Wu]){E=b.y+b.outerHeight;break}b=b.prev}y[1]===U_?o=y[0]*O*.01:y[1]===X_?o=y[0]*M.root.computedStyle[T_]:y[1]===V_?o=y[0]*M.root.width*.01:y[1]===K_?o=y[0]*M.root.height*.01:y[1]===W_&&(o=y[0])}(("block"===x||-1<["inlineBlock","inline-block"].indexOf(x))&&void 0===a||"flex"===x&&(void 0===a||"column"===e&&void 0===o))&&(f=!0);x=s?n-T:R+T-n,e=l?E-C:O+C-E;f&&(t.__layout({x:n,y:E,w:x,h:e},!0,!0),x=t.outerWidth),t.__layout({x:n,y:E,w:x,h:e,w2:a,h2:o},!1,!0),s&&t.__offsetX(-t.outerWidth,!0),l&&t.__offsetY(-t.outerHeight,!0)}else t.__layoutNone()}),n.forEach(function(t){if(A){var e=t;if(t instanceof Ro&&(e=t.shadowRoot),A!==e&&A!==t)return}t instanceof u?t.__layoutAbs($_(t)?t:r,i):t instanceof Ro&&((t=t.shadowRoot)instanceof u&&t.__layoutAbs(t,i))}))}},{key:"__computeMeasure",value:function(e,r,i){D(L(u.prototype),"__computeMeasure",this).call(this,e,r,i),this.children.forEach(function(t){t.__computeMeasure(e,r,i)})}},{key:"render",value:function(t,e,r,i){i=D(L(u.prototype),"render",this).call(this,t,e,r,i);return t===Et.SVG&&(this.virtualDom.type="dom"),i}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),D(L(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return D(L(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,i=this.computedStyle,e=this.isMask;if(!(r||"none"===i[Uu]||t.__stopPropagation||e)&&("hidden"!==i[M_]||this.willResponseEvent(t,!0))){var n,e=t.event.type,i=this.listener,a=this.zIndexChildren;i.hasOwnProperty(e)&&(n=i[e]);for(var o=a.length-1;0<=o;o--){var s=a[o];if((s instanceof Eu||s instanceof Ro&&s.shadowRoot instanceof Eu)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(he.isFunction(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0)}return D(L(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){D(L(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(r,e){var i=this;if(!he.isNil(r)&&!i.isDestroyed){var n,a=i.root,t=i.host;if(!(-1<[Xt.TYPE_VD,Xt.TYPE_GM,Xt.TYPE_CP].indexOf(r.$$type)))throw new Error("Invalid parameter in appendChild.");r.vd&&(a.delRefreshTask(r.vd.__task),r.vd.remove()),n=Xt.TYPE_CP===r.$$type?yo.initCp2(r,a,t,i):yo.initDom(r,a,t,i),a.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.push(r);var t=i.children.length;t&&(((e=i.children[t-1]).__next=n).__prev=e),i.children.push(n),i.__zIndexChildren=null;var e={};e[w_]=n,e[I_]=Ca.REFLOW,e[L_]=!0,e[P_]=!0,e[D_]=n.__config,a.__addUpdate(n,n.__config,a,a.__config,e)},__after:function(t){he.isFunction(e)&&e.call(n,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!he.isNil(e)&&!i.isDestroyed){var n,a=i.root,t=i.host;if(!(-1<[Xt.TYPE_VD,Xt.TYPE_GM,Xt.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(a.delRefreshTask(e.vd.__task),e.vd.remove()),n=Xt.TYPE_CP===e.$$type?yo.initCp2(e,a,t,i):yo.initDom(e,a,t,i),a.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.unshift(e),i.children.length&&(((t=i.children[0]).__prev=n).__next=t),i.children.unshift(n),i.__zIndexChildren=null;var t={};t[w_]=n,t[I_]=Ca.REFLOW,t[L_]=!0,t[P_]=!0,t[D_]=n.__config,a.__addUpdate(n,n.__config,a,a.__config,t)},__after:function(t){he.isFunction(r)&&r.call(n,t)}})}}},{key:"insertBefore",value:function(o,e){var s=this;if(!he.isNil(o)&&!s.isDestroyed&&s.domParent){var l,h=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Xt.TYPE_VD,Xt.TYPE_GM,Xt.TYPE_CP].indexOf(o.$$type)))throw new Error("Invalid parameter in insertBefore.");o.vd&&(h.delRefreshTask(o.vd.__task),o.vd.remove()),l=Xt.TYPE_CP===o.$$type?yo.initCp2(o,h,t,c):yo.initDom(o,h,t,c),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,o),l.__next=s,l.__prev=s.__prev,s.__prev=l,c.children.splice(e,0,l)):(i&&(((a=c.children[0]).__prev=l).__next=a),r.unshift(o),c.children.unshift(l)),c.__zIndexChildren=null;var a={};a[w_]=l,a[I_]=Ca.REFLOW,a[L_]=!0,a[P_]=!0,a[D_]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,a)},__after:function(t){he.isFunction(e)&&e.call(l,t)}})}}},{key:"insertAfter",value:function(o,e){var s=this;if(!he.isNil(o)&&!s.isDestroyed&&s.domParent){var l,h=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Xt.TYPE_VD,Xt.TYPE_GM,Xt.TYPE_CP].indexOf(o.$$type)))throw new Error("Invalid parameter in insertAfter.");o.vd&&(h.delRefreshTask(o.vd.__task),o.vd.remove()),l=Xt.TYPE_CP===o.$$type?yo.initCp2(o,h,t,c):yo.initDom(o,h,t,c),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,o),l.__prev=s,l.__next=s.__next,s.__next=l,c.children.splice(e+1,0,l)):(i&&(((a=c.children[i-1]).__next=l).__prev=a),r.push(o),c.children.push(l)),c.__zIndexChildren=null;var a={};a[w_]=l,a[I_]=Ca.REFLOW,a[L_]=!0,a[P_]=!0,a[D_]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,a)},__after:function(t){he.isFunction(e)&&e.call(l,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof Eu||t instanceof Ro))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return we.warn("Remove parent is destroyed."),void(he.isFunction(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ro?t.shadowRoot:t)instanceof qa||"absolute"!==t.currentStyle[Wu]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ro?t.shadowRoot:t)instanceof Eu&&"absolute"===t.currentStyle[Wu]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[Ku]+t[Qu]+t[Ju]+this.lineBoxManager.baseLine}},{key:"firstBaseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[Ku]+t[Qu]+t[Ju]+this.lineBoxManager.firstBaseLine}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),u}(),$t=g.STYLE_KEY,J_=$t.WIDTH,Q_=$t.HEIGHT,tf=$t.DISPLAY,ef=$t.BORDER_TOP_WIDTH,rf=$t.BORDER_RIGHT_WIDTH,nf=$t.BORDER_LEFT_WIDTH,af=$t.BORDER_BOTTOM_WIDTH,of=$t.BORDER_TOP_LEFT_RADIUS,sf=$t.BORDER_TOP_RIGHT_RADIUS,lf=$t.BORDER_BOTTOM_RIGHT_RADIUS,hf=$t.BORDER_BOTTOM_LEFT_RADIUS,cf=$t.VISIBILITY,uf=$t.BACKGROUND_IMAGE,_f=$t.BACKGROUND_COLOR,ff=$t.BOX_SHADOW,df=$t.MIX_BLEND_MODE,pf=$t.MARGIN_TOP,gf=$t.MARGIN_RIGHT,mf=$t.MARGIN_BOTTOM,vf=$t.MARGIN_LEFT,yf=$t.PADDING_TOP,xf=$t.PADDING_RIGHT,Ef=$t.PADDING_BOTTOM,bf=$t.PADDING_LEFT,Af=$t.FONT_SIZE,Mf=$t.FLEX_BASIS,b=g.UPDATE_KEY,Tf=b.UPDATE_NODE,Cf=b.UPDATE_FOCUS,Rf=b.UPDATE_CONFIG,Zt=g.NODE_KEY,Of=Zt.NODE_CACHE,Sf=Zt.NODE_DEFS_CACHE,kf=Zt.NODE_IS_MASK,wf=C.AUTO,If=C.PX,Lf=C.PERCENT,Df=C.REM,Pf=C.VW,Nf=C.VH,Ff=C.RGBA,Bf=At.canvasPolygon,Gf=At.svgPolygon,Yf=he.isFunction,Hf=function(){t(I,q_);var n=e(I);function I(t,e){_(this,I);var r,i=(r=n.call(this,t,e)).props.src,t=r.__loadImg={src:i};i||(t.error=!0);e=r.__isClip=!!r.props.clip,i=r.__isMask=e||!!r.props.mask;return i&&(e=(t=o(r)).style,t=t.currentStyle,e[uf]=t[uf]=[null],e[_f]=t[_f]=[[0,0,0,0],Ff],e[ef]=t[ef]=[0,If],e[rf]=t[rf]=[0,If],e[nf]=t[nf]=[0,If],e[af]=t[af]=[0,If],e[ff]=t[ff]=null,e[df]=t[df]="normal"),r.__config[kf]=i,r}return d(I,[{key:"__preLayout",value:function(t){var e=D(L(I.prototype),"__preLayout",this).call(this,t),r=this.__loadImg;return r.error||(t=r.src,(t=we.IMG[t])&&t.state===we.LOADED&&(r.source=t.source,r.width=t.width,r.height=t.height),r.cache=!1),e.fixedWidth&&e.fixedHeight||(r.error&&!this.props.placeholder?e.fixedWidth?e.h=e.w:e.fixedHeight?e.w=e.h:e.w=e.h=32:r.source?e.fixedWidth?e.h=e.w*r.height/r.width:e.fixedHeight?e.w=e.h*r.width/r.height:(e.w=r.width,e.h=r.height):e.w=e.h=0,e.fixedWidth=!0,e.fixedHeight=!0),e}},{key:"__addGeom",value:function(t,e){e=he.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),D(L(I.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){e=D(L(I.prototype),"__calContent",this).call(this,t,e,r,i);return e||(r=this.__loadImg,"hidden"!==i[cf]&&(i[J_]||i[Q_])&&r.source&&(e=!0)),e}},{key:"render",value:function(t,e,r,i){var n=D(L(I.prototype),"render",this).call(this,t,e,r,i),a=n.offscreenBlend,o=n.offscreenMask,s=n.offscreenFilter,l=n.offscreenOverflow,h=this.width,c=this.height,u=this.isDestroyed,_=this.props.placeholder,f=this.computedStyle,d=this.computedStyle,p=d[tf],g=d[of],m=d[sf],v=d[lf],y=d[hf],x=d[cf],E=this.virtualDom,b=this.__config,e=this.__loadImg,d=this.root;if(a&&(r=a.target.ctx),o&&(r=o.target.ctx),s&&(r=s.target.ctx),l&&(r=l.target.ctx),e.source||e.error||e.loading||this.__loadAndRefresh(e,d,r,_,f,h,c),u||"none"===p||"hidden"===x)return n;l=b[Of];i&&l&&l.enabled&&(r=l.ctx);d=n.x3,f=n.y3,u=e.source;if(e.error&&!_&&I.showError){var p=.02*Math.min(h,c),x=d+.7*h,i=f+.3*c,l=5*p,A=[[d+.15*h,f+.7*c],[d+.3*h,f+.4*c],[d+.5*h,f+.6*c],[d+.6*h,f+.5*c],[d+.9*h,f+.8*c],[d+.15*h,f+.8*c]];if(t===Et.CANVAS||t===Et.WEBGL){r.strokeStyle="#CCC",r.lineWidth=p,r.fillStyle="#DDD",r.beginPath(),r.moveTo(d,f),r.lineTo(d+h,f),r.lineTo(d+h,f+c),r.lineTo(d,f+c),r.lineTo(d,f),r.stroke(),r.closePath(),r.beginPath(),r.arc(x,i,l,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(A[0][0],A[0][1]);for(var M=1,T=A.length;M<T;M++){var C=A[M];r.lineTo(C[0],C[1])}r.lineTo(A[0][0],A[0][1]),r.fill(),r.closePath()}else if(t===Et.SVG){this.__addGeom("rect",[["x",d],["y",f],["width",h],["height",c],["stroke","#CCC"],["stroke-width",p],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",x],["cy",i],["r",l],["fill","#DDD"]]);for(var R="",O=0,S=A.length;O<S;O++){var k=A[O];O&&(R+=" "),R+=k[0]+","+k[1]}this.__addGeom("polygon",[["points",R],["fill","#DDD"]])}}else if(u){var w,y=Ut.calRadius(d,f,h,c,g,m,v,y);if(t===Et.CANVAS||t===Et.WEBGL)y?(r.save(),r.beginPath(),Bf(r,y),r.clip(),r.closePath(),r.drawImage(u,d,f,h,c),r.restore()):r.drawImage(u,d,f,h,c);else if(t===Et.SVG){if(e.cache)return e.cache.cache=!0,E.children=[e.cache],void(!E.cache&&y&&(u={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Gf(y)],["fill","#FFF"]]}]},t=r.add(u),b[Sf].push(u),E.conClip="url(#"+t+")"));h===e.width&&c===e.height||(w=Io.matrixResize(e.width,e.height,h,c,d,f,h,c));d=[["xlink:href",e.error?_:e.src],["x",d],["y",f],["width",e.width],["height",e.height]];y&&(f={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Gf(y)],["fill","#FFF"]]}]},y=r.add(f),b[Sf].push(f),E.conClip="url(#"+y+")",delete E.cache),w&&!qt.isE(w)&&d.push(["transform","matrix("+he.joinArr(qt.m2m6(w),",")+")"]);d={type:"img",tagName:"image",props:d};E.children=[d],e.cache=d}}return n}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return D(L(I.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[J_],n=r[Q_],a=r[vf],o=r[gf],s=r[bf],l=r[xf],h=r[nf],r=r[rf];return i[1]===If?t-=i[0]:i[1]===Lf?t-=e*i[0]*.01:i[1]===Df?t-=i[0]*this.root.computedStyle[Af]:i[1]===Pf?t-=i[0]*this.root.width*.01:i[1]===Nf?t-=i[0]*this.root.height*.01:(i=this.__loadImg).source&&(n[1]===If?t-=i.width*n[0]/i.height:n[1]===Lf?t-=i.width*n[0]*e*.01/i.height:n[1]===Df?t-=i.width*n[0]*this.root.computedStyle[Af]/i.height:n[1]===Pf?t-=i.width*n[0]*this.root.width*.01/i.height:n[1]===Nf?t-=i.width*n[0]*this.root.height*.01/i.height:t-=i.width),a[1]===If?t-=a[0]:a[1]===Lf?t-=a[0]*e*.01:a[1]===Df?t-=a[0]*this.root.computedStyle[Af]:a[1]===Pf?t-=a[0]*this.root.width*.01:a[1]===Nf&&(t-=a[0]*this.root.height*.01),s[1]===If?t-=s[0]:s[1]===Lf?t-=s[0]*e*.01:s[1]===Df?t-=s[0]*this.root.computedStyle[Af]:s[1]===Pf?t-=s[0]*this.root.width*.01:s[1]===Nf&&(t-=s[0]*this.root.height*.01),h[1]===If?t-=h[0]:h[1]===Df?t-=h[0]*this.root.computedStyle[Af]:h[1]===Pf?t-=h[0]*this.root.width*.01:h[1]===Nf&&(t-=h[0]*this.root.height*.01),o[1]===If?t-=o[0]:o[1]===Lf?t-=o[0]*e*.01:o[1]===Df?t-=o[0]*this.root.computedStyle[Af]:o[1]===Pf?t-=o[0]*this.root.width*.01:o[1]===Nf&&(t-=o[0]*this.root.height*.01),l[1]===If?t-=l[0]:l[1]===Lf?t-=l[0]*e*.01:l[1]===Df?t-=l[0]*this.root.computedStyle[Af]:l[1]===Pf?t-=l[0]*this.root.width*.01:l[1]===Nf&&(t-=l[0]*this.root.height*.01),r[1]===If?t-=r[0]:r[1]===Df?t-=r[0]*this.root.computedStyle[Af]:r[1]===Pf?t-=r[0]*this.root.width*.01:r[1]===Nf&&(t-=r[0]*this.root.height*.01),t}},{key:"__calBasis",value:function(t,e){var r=0,i=0,n=0,a=this.currentStyle,o=this.__loadImg,s=e.w,l=e.h,h=a[Mf],c=a[J_],u=a[Q_],_=a[vf],f=a[pf],d=a[gf],p=a[mf],g=a[bf],m=a[yf],v=a[xf],y=a[Ef],x=a[ef],E=a[rf],b=a[af],e=a[nf],a=t?c:u,c=t?u:c;return-1<[If,Lf,Df,Pf,Nf].indexOf(h[1])?h[1]===If?r=n=i=h[0]:h[1]===Lf?r=n=i=.01*h[0]*(t?s:l):h[1]===Df?r=n=i=h[0]*this.root.computedStyle[Af]:h[1]===Pf?r=n=i=h[0]*this.root.width*.01:h[1]===Nf&&(r=n=i=h[0]*this.root.height*.01):-1<[If,Lf,Df,Pf,Nf].indexOf(a[1])?a[1]===If?r=n=i=a[0]:a[1]===Lf?r=n=i=.01*a[0]*(t?s:l):a[1]===Df?r=n=i=a[0]*this.root.computedStyle[Af]:a[1]===Pf?r=n=i=a[0]*this.root.width*.01:a[1]===Nf&&(r=n=i=a[0]*this.root.height*.01):(o.source||o.error)&&(r=n=i=c[1]!==wf?(c[1]===If?c=c[0]:c[1]===Lf?c=.01*c[0]*(t?l:s):c[1]===Df?c=c[0]*this.root.computedStyle[Af]:c[1]===Pf?c=c[0]*this.root.width*.01:c[1]===Nf&&(c=c[0]*this.root.height*.01),l=o.width/o.height,t?c*l:c/l):t?o.width:o.height),t?(v=this.__calMp(_,s)+this.__calMp(d,s)+this.__calMp(g,s)+this.__calMp(v,s),r+=v=e[0]+E[0]+v,n+=v,i+=v):(s=this.__calMp(f,s)+this.__calMp(p,s)+this.__calMp(m,s)+this.__calMp(y,s),r+=s=x[0]+b[0]+s,n+=s,i+=s),[r,i,n]}},{key:"__loadAndRefresh",value:function(r,i,n,a,o,s,l,h){var c=this;(r.source||r.error)&&(i.delRefreshTask(c.__task),i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Tf]=c,t[Cf]=Ca.REFLOW,t[Rf]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,we.measureImg(r.src,function(t){if(t.url===r.src&&!c.isDestroyed){var e=function(){var t=c.currentStyle,e=t[J_],t=t[Q_];i.delRefreshTask(c.__task),e[1]!==wf&&t[1]!==wf?i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Tf]=c,t[Cf]=Ca.REPAINT,t[Rf]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){Yf(h)&&h.call(c)}}):i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Tf]=c,t[Cf]=Ca.REFLOW,t[Rf]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){Yf(h)&&h.call(c)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(a)return void we.measureImg(a,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:n,root:i,width:s,height:l});r.error=!0}"none"!==o[tf]&&e()}},{ctx:n,root:i,width:s,height:l})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,n=this.root;t===i.src||!t&&i.error?Yf(e)&&e.call(r):t?(i.src=t,r.__loadAndRefresh(i,n,n.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,n.delRefreshTask(r.__task),n.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[Tf]=r,t[Cf]=Ca.REFLOW,t[Rf]=r.__config,n.__addUpdate(r,r.__config,n,r.__config,t))},__after:function(){Yf(e)&&e.call(r)}}))}},{key:"appendChild",value:function(){we.error("Img can not appendChild.")}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"src",get:function(){return this.__loadImg.src}}]),I}();a(Hf,"showError",!0);var Wf=function(){function e(t){_(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return d(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),jt=g.STYLE_KEY,Uf=jt.DISPLAY,Xf=jt.MARGIN_TOP,Vf=jt.MARGIN_RIGHT,Kf=jt.MARGIN_BOTTOM,zf=jt.MARGIN_LEFT,$f=jt.PADDING_TOP,jf=jt.PADDING_RIGHT,Zf=jt.PADDING_BOTTOM,qf=jt.PADDING_LEFT,Jf=jt.WIDTH,Qf=jt.HEIGHT,t0=jt.BORDER_TOP_WIDTH,e0=jt.BORDER_RIGHT_WIDTH,r0=jt.BORDER_BOTTOM_WIDTH,i0=jt.BORDER_LEFT_WIDTH,n0=jt.FILL,a0=jt.STROKE,o0=jt.STROKE_MITERLIMIT,s0=jt.STROKE_WIDTH,l0=jt.STROKE_LINECAP,h0=jt.STROKE_LINEJOIN,c0=jt.STROKE_DASHARRAY,u0=jt.STROKE_DASHARRAY_STR,_0=jt.FILL_RULE,f0=jt.VISIBILITY,d0=jt.FONT_SIZE,p0=jt.FLEX_BASIS,m=g.NODE_KEY,g0=m.NODE_CACHE_PROPS,m0=m.NODE_CURRENT_PROPS,v0=m.NODE_CURRENT_STYLE,y0=m.NODE_IS_MASK,x0=m.NODE_STYLE,E0=m.NODE_DEFS_CACHE,b0=C.PX,A0=C.PERCENT,M0=C.REM,T0=C.VW,C0=C.VH,R0=he.int2rgba,O0=he.isNil,S0=he.joinArr,k0=At.canvasPolygon,w0=At.svgPolygon,I0={},L0=function(){t(I,Eu);var i=e(I);function I(t,e){var r;_(this,I),(r=i.call(this,t,e)).__isMulti=!!r.props.multi;t=r.__isClip=!!r.props.clip,e=r.__isMask=t||!!r.props.mask,t=o(r).style;e&&(t.background=null,t.border=null,t.boxShadow=null,t.mixBlendMode="normal"),r.__style=_n.normalize(r.style,sr.DOM_ENTRY_SET.concat(sr.GEOM_ENTRY_SET)),r.__currentStyle=he.extend({},r.__style),r.__currentProps=he.clone(r.props);t=r.__config;return t[g0]=r.__cacheProps={},t[m0]=r.__currentProps,t[v0]=r.__currentStyle,t[y0]=e,t[x0]=r.__style,r}return d(I,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[Jf],n=r[zf],a=r[Vf],o=r[qf],s=r[jf],l=r[i0],r=r[e0];return i[1]===b0?t-=i[0]:i[1]===A0?t-=e*i[0]*.01:i[1]===M0?t-=i[0]*this.root.computedStyle[d0]:i[1]===T0?t-=i[0]*this.root.width*.01:i[1]===C0&&(t-=i[0]*this.root.height*.01),n[1]===b0?t-=n[0]:n[1]===A0?t-=n[0]*e*.01:n[1]===M0?t-=n[0]*this.root.computedStyle[d0]:n[1]===T0?t-=n[0]*this.root.width*.01:n[1]===C0&&(t-=n[0]*this.root.height*.01),o[1]===b0?t-=o[0]:o[1]===A0?t-=o[0]*e*.01:o[1]===M0?t-=o[0]*this.root.computedStyle[d0]:o[1]===T0?t-=o[0]*this.root.width*.01:o[1]===C0&&(t-=o[0]*this.root.height*.01),l[1]===b0?t-=l[0]:l[1]===M0?t-=l[0]*this.root.computedStyle[d0]:l[1]===T0?t-=l[0]*this.root.width*.01:l[1]===C0&&(t-=l[0]*this.root.height*.01),a[1]===b0?t-=a[0]:a[1]===A0?t-=a[0]*e*.01:a[1]===M0?t-=a[0]*this.root.computedStyle[d0]:a[1]===T0?t-=a[0]*this.root.width*.01:a[1]===C0&&(t-=a[0]*this.root.height*.01),s[1]===b0?t-=s[0]:s[1]===A0?t-=s[0]*e*.01:s[1]===M0?t-=s[0]*this.root.computedStyle[d0]:s[1]===T0?t-=s[0]*this.root.width*.01:s[1]===C0&&(t-=s[0]*this.root.height*.01),r[1]===b0?t-=r[0]:r[1]===M0?t-=r[0]*this.root.computedStyle[d0]:r[1]===T0?t-=r[0]*this.root.width*.01:r[1]===C0&&(t-=r[0]*this.root.height*.01),t}},{key:"__calMinMax",value:function(t,e){_n.computeReflow(this,this.isShadowRoot);var r=0,i=0,n=this.currentStyle,a=n[Jf],o=n[Qf],s=n[Uf],o=t?a:o;return o[1]===b0?r=i=o[0]:o[1]===M0?r=i=o[0]*this.root.computedStyle[d0]:o[1]===T0?r=i=o[0]*this.root.width*.01:o[1]===C0&&(r=i=o[0]*this.root.height*.01),[s,this.__addMp(t,e.w,n,[r,i])]}},{key:"__calBasis",value:function(t,e){var r=0,i=0,n=0,a=this.currentStyle,o=e.w,s=e.h,l=a[p0],h=a[Jf],c=a[Qf],u=a[zf],_=a[Xf],f=a[Vf],d=a[Kf],p=a[qf],g=a[$f],m=a[jf],v=a[Zf],y=a[t0],x=a[e0],e=a[r0],a=a[i0],c=t?h:c;return-1<[b0,A0,M0,T0,C0].indexOf(l[1])?l[1]===b0?r=n=i=l[0]:l[1]===A0?r=n=i=.01*l[0]*(t?o:s):l[1]===M0?r=n=i=l[0]*this.root.computedStyle[d0]:l[1]===T0?r=n=i=l[0]*this.root.width*.01:l[1]===C0&&(r=n=i=l[0]*this.root.height*.01):-1<[b0,A0,M0,T0,C0].indexOf(c[1])&&(c[1]===b0?r=n=i=c[0]:c[1]===A0?r=n=i=.01*c[0]*(t?o:s):c[1]===M0?r=n=i=c[0]*this.root.computedStyle[d0]:c[1]===T0?r=n=i=c[0]*this.root.width*.01:c[1]===C0&&(r=n=i=c[0]*this.root.height*.01)),t?(m=this.__calMp(u,o)+this.__calMp(f,o)+this.__calMp(p,o)+this.__calMp(m,o),r+=m=a[0]+x[0]+m,n+=m,i+=m):(o=this.__calMp(_,o)+this.__calMp(d,o)+this.__calMp(g,o)+this.__calMp(v,o),r+=o=y[0]+e[0]+o,n+=o,i+=o),[r,i,n]}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),i=r.fixedWidth,n=r.fixedHeight,a=r.w,r=r.h;this.__height=n?r:0,e?this.__width=i?a:0:(this.__width=a,this.__ioSize(a,this.height),this.__marginAuto(this.currentStyle,t),this.__config[g0]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,i=e.fixedHeight,n=e.x,a=e.y,o=e.w,e=e.h,n=this.__width=r?o:n-t.x,t=this.__height=i?e:a-t.y;this.__ioSize(n,t),this.__config[g0]=this.__cacheProps={}}},{key:"__calCache",value:function(i,n,t,a,o,s,e,r,l,h,c,u,_,f,d,p,g,m,v,y,x,E,b,A,M,T,C,R,O,S){var k,w=this,O=D(L(I.prototype),"__calCache",this).call(this,i,n,t,a,o,s,e,r,l,h,c,u,_,f,d,p,g,m,v,y,x,E,b,A,M,T,C,R,O,S);return O0(a[s0])&&(a[s0]=!0,S=o[s0]||[],k=this.width,s[s0]=S.map(function(t){return t[1]===b0?t[0]:t[1]===A0?t[0]*k*.01:t[1]===M0?t[0]*w.root.computedStyle[d0]:t[1]===T0?t[0]*w.root.width*.01:t[1]===C0?t[0]*w.root.height*.01:0})),O0(a[c0])&&(a[c0]=!0,s[c0]=o[c0]||[],a[u0]=s[c0].map(function(t){return S0(t,",")})),[l0,h0,o0,_0].forEach(function(t){s[t]=o[t]}),[a0,n0].forEach(function(t){var e,r;O0(a[t])&&(e=o[t],s[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(R0(t)):r.push("none"):r.push(w.__gradient(i,n,x,C,E,R,t))}),a[t]=r)}),O}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[f0]}},{key:"__preSet",value:function(t){var e=this.width,r=this.height,i=this.__cacheStyle,n=this.computedStyle,a=t.sx3+.5*e,o=t.sy3+.5*r,s=i[n0],l=i[a0],h=i[u0],e=n[s0],t=n[l0],r=n[h0],i=n[o0];return{cx:a,cy:o,stroke:l,strokeWidth:e,strokeDasharray:n[c0],strokeDasharrayStr:h,strokeLinecap:t,strokeLinejoin:r,strokeMiterlimit:i,fill:s,fillRule:n[_0]}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,n=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,l=r.strokeMiterlimit,r=r.fill;t!==Et.CANVAS&&t!==Et.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==n&&e.lineWidth!==n&&(e.lineWidth=n),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==l&&e.miterLimit!==l&&(e.miterLimit=l),he.isFunction(e.getLineDash)?a&&!he.equalArr(e.getLineDash(),a)&&e.setLineDash(a):a&&e.setLineDash(a))}},{key:"render",value:function(t,e,r,i){i=D(L(I.prototype),"render",this).call(this,t,e,r,i);if(t===Et.SVG&&(this.virtualDom.type="geom"),i.break)return i;t=this.__preSet(i);return Object.assign(i,t)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,n=r.fillRule,a=r.stroke,o=r.strokeWidth,s=r.strokeDasharray,l=r.strokeDasharrayStr,h=r.strokeLinecap,c=r.strokeLinejoin,u=r.strokeMiterlimit,_=r.dx,f=r.dy,d=this.__cacheProps.list,p=this.isMulti,g=this.bbox;if(i.length<=1&&a.length<=1){r={fill:i[0],fillRule:n[0],stroke:a[0],strokeWidth:o[0],strokeDasharray:s[0],strokeDasharrayStr:l[0],strokeLinecap:h[0],strokeLinejoin:c[0],strokeMiterlimit:u[0],dx:_,dy:f,bbox:g};this.__renderOnePolygon(t,e,p,d,r)}else{for(var m=0,v=i.length;m<v;m++){var y=i[m];y&&(y={fill:y,fillRule:n[m],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,y))}for(var x=0,E=a.length;x<E;x++){var b=a[x];b&&(b={stroke:b,strokeWidth:o[x],strokeDasharray:s[x],strokeDasharrayStr:l[x],strokeLinecap:h[x],strokeLinejoin:c[x],strokeMiterlimit:u[x],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,b))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,n){var a=n.fill,o=n.stroke,s=n.strokeWidth,l=a&&"conic"===a.k,h=o&&"conic"===o.k,c=a&&"radial"===a.k&&Array.isArray(a.v),u=s&&0<s&&o&&"radial"===o.k&&Array.isArray(o.v);l||h?(l?this.__conicGradient(t,e,i,r,n):"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&h?we.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,n,"fill"):"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&u?(we.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke.v=n.stroke.v[0],this.__drawPolygon(t,e,r,i,n,!1,!0)):s&&0<s&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!1,!0)):this.__drawPolygon(t,e,r,i,n,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,n,a,o){var s,l=n.fill,h=n.stroke,c=n.strokeWidth,u=n.fillRule,_=n.strokeDasharrayStr,f=n.strokeLinecap,d=n.strokeLinejoin,p=n.strokeMiterlimit,g=n.dx,m=n.dy;t===Et.CANVAS||t===Et.WEBGL?(this.__preSetCanvas(t,e,n),e.beginPath(),r?i.forEach(function(t){return k0(e,t,g,m)}):k0(e,i,g,m),a&&l&&"none"!==l&&e.fill(u),o&&h&&"none"!==h&&c&&0<c&&e.stroke(),e.closePath()):t===Et.SVG&&(s="",r?i.forEach(function(t){return s+=w0(t)}):s=w0(i),i=[["d",s]],(l&&"none"!==l||h&&"none"!==h)&&(a&&l&&"none"!==l?(i.push(["fill",l.v||l]),u&&"nonzero"!==u&&i.push(["fill-rule",u])):i.push(["fill","none"]),o&&h&&"none"!==h&&c&&0<c?(i.push(["stroke",h.v||h]),i.push(["stroke-width",c]),this.__propsStrokeStyle(i,_,f,d,p)):i.push(["stroke-width",0]),this.addGeom("path",i)))}},{key:"__inversePtList",value:function(t,e,a){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=qt.calPoint([t[r],t[r+1]],a);e.push(n[0]),e.push(n[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=qt.calPoint([t[r],t[r+1]],a);e.push(n[0]),e.push(n[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,n,a){var o=n.strokeWidth,s=n.strokeDasharrayStr,l=n.strokeLinecap,h=n.strokeLinejoin,c=n.strokeMiterlimit,u=n.dx,_=n.dy,f=xt(n[a].v,4),d=f[0],p=f[1],n=f[2],f=f[3];p=ea.calMatrixByOrigin(p,[n,f]);var g,f=qt.inverse(p);r=this.__inversePtList(r,i,f),t===Et.CANVAS||t===Et.WEBGL?(p&&(e.save(),f=this.matrixEvent,p=qt.multiply(f,p),e.setTransform(p[0],p[1],p[4],p[5],p[12],p[13])),e.beginPath(),e[a+"Style"]!==d&&(e[a+"Style"]=d),i?r.forEach(function(t){return At.canvasPolygon(e,t,u,_)}):k0(e,r,u,_),e[a](),e.closePath(),p&&e.restore()):t===Et.SVG&&(g="",i?r.forEach(function(t){return g+=w0(t)}):g=w0(r),r=[["d",g]],"fill"===a?(r.push(["fill",d]),r.push(["strokeWidth",0])):"stroke"===a&&(r.push(["fill","none"]),r.push(["stroke",d]),r.push(["stroke-width",o]),this.__propsStrokeStyle(r,s,l,h,c)),r.push(["transform","matrix(".concat(S0(qt.m2m6(p),","),")")]),this.addGeom("path",r))}},{key:"__conicGradient",value:function(t,r,e,i,n){var a,o,s,l,h=this,c=n.fill,u=n.bbox,_=n.dx,f=void 0===_?0:_,_=n.dy,d=void 0===_?0:_,p=c.v;t===Et.CANVAS||t===Et.WEBGL?(n=xt(u,4),a=n[0],o=n[1],_=n[2],u=n[3],u=(s=we.getCacheCanvas(n=_-a,_=u-o,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,n,_),tt.getConicGradientImage(.5*n,.5*_,n,_,c.v.stop,u.data),s.ctx.putImageData(u,0,0),i?e.forEach(function(t){r.save(),r.beginPath(),k0(r,t,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,a+f,o+d),r.restore()}):(r.save(),r.beginPath(),k0(r,e,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,a+f,o+d),r.restore()),s.ctx.clearRect(0,0,n,_)):t===Et.SVG&&(i?e.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",w0(t)]]}]},e=r.add(t);h.__config[E0].push(t),p.forEach(function(t){h.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",w0(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(e={tagName:"clipPath",children:[{tagName:"path",props:[["d",w0(e)]]}]},l=r.add(e),this.__config[E0].push(e),p.forEach(function(t){h.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",w0(t[0])],["fill",t[1]],["clip-path","url(#"+l+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,n){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),n&&4!==n&&t.push(["stroke-miterlimit",n])}},{key:"__releaseWhenEmpty",value:function(){}},{key:"__offsetX",value:function(t,e,r){D(L(I.prototype),"__offsetX",this).call(this,t,e,r),this.__config[g0]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){D(L(I.prototype),"__offsetY",this).call(this,t,e,r),this.__config[g0]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){D(L(I.prototype),"__resizeX",this).call(this,t,e),this.__config[g0]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){D(L(I.prototype),"__resizeY",this).call(this,t,e),this.__config[g0]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=he.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return O0(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return I0}},{key:"getRegister",value:function(t){if(!t||!he.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!I0.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return I0[t]}},{key:"register",value:function(t,e){if(!(t&&he.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof I))throw new Error("Invalid param");if(I.hasRegister(t))throw new Error("Geom has already register: ".concat(t));I0[t]=e}},{key:"hasRegister",value:function(t){return t&&I0.hasOwnProperty(t)}},{key:"delRegister",value:function(t){I.hasRegister(t)&&delete I0[t]}}]),I}(),Jt=g.NODE_KEY,D0=Jt.NODE_STYLE,P0=Jt.NODE_CURRENT_STYLE,N0=Jt.NODE_COMPUTED_STYLE,F0=Jt.NODE_DOM_PARENT,B0=Jt.NODE_MATRIX,G0=Jt.NODE_MATRIX_EVENT,Y0=Jt.NODE_STRUCT,H0=Xt.TYPE_VD,W0=Xt.TYPE_GM,U0=Xt.TYPE_CP,X0=[],V0=[],K0={};function z0(t){t instanceof q_?t.children.forEach(function(t){t instanceof q_?z0(t):t instanceof Ro&&t.__hasUpdate&&(t.__hasUpdate=!1,$0(t,t.props))}):t instanceof Ro&&t.__hasUpdate&&(t.__hasUpdate=!1,$0(t,t.props))}function $0(t,e,r){t.__nextState||r?!he.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.state=r,t.__nextState=null;var i=t.shadow,n=t.shadowRoot,e=t.__cd,r=eo(t.render());(function(t,e,r){var n=J0(e,{},t),a=J0(r,{}),o=[],s=[];Object.keys(n).forEach(function(t){var e=n[t];a[t]||(e.json.key=K0)}),Object.keys(a).forEach(function(t){var e,r=n[t],i=a[t];r?(e=r.json,t=i.json,r=r.vd,e.$$type===U0&&t.$$type===U0?e.klass===t.klass&&(q0(e,t,r),e.key=t.key=K0,s.push(r)):e.$$type===t.$$type&&e.tagName===t.tagName&&(t.$$type===W0&&e.props.multi!==t.props.multi||(t.__inheritAnimate=r),e.key=t.key=K0,t.$$type===H0&&o.push({vd:r,oj:e,nj:t}))):i.json.key=K0}),o.forEach(function(t){Z0(t.vd,t.oj,t.nj)}),j0(t,e,r),s.forEach(function(t){Q0(t)})})(i,e,r),t.__init(r);var a=t.shadowRoot;{var o;a instanceof Eu?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){a[t]=n[t]}),a.__computedStyle=a.__config[N0]=n.computedStyle):(o=t.domParent,[D0,P0,N0,B0,G0].forEach(function(t){a.__config[t]=o.__config[t]}))}["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){a[t]=n[t]}),a.__config[F0]=n.domParent,a.__config[Y0]=n.__config[Y0],X0.push(t),he.isObject(r)&&r.__placeholder||V0.push(i);r&&r.__placeholder&&delete r.__placeholder;r&&r.__inheritAnimate&&delete r.__inheritAnimate;r&&r.__animateRecords&&delete r.__animateRecords;var s=t.host;for(;s&&s.shadow===t;)(s.__shadowRoot=a).__hostRoot=s,s=(t=s).host}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,z0(t.shadow)):z0(t.shadow)}function j0(t,e,r){he.isObject(r)&&(r.$$type===U0?r.key!==K0&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(q0(e,r,t),Q0(t)):r.$$type===W0&&e&&e.$$type===W0?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===H0&&e&&e.$$type===H0&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),Z0(t,e,r)))}function Z0(t,e,r){for(var i=e.children,n=r.children,a=i.length,o=n.length,s=t.children,l=0,h=0,c=0,u=Math.min(a,o);l<u;l++){var _=i[l+h],f=n[l+c];_.key===K0&&f.key===K0||(_.key===K0?(h++,l--,a--,u=Math.min(a,o)):f.key===K0?(c++,l--,o--,u=Math.min(a,o)):j0(s[l+h],_,f))}}function q0(i,n,a){var o=(n.__placeholder=a).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(n.props).forEach(function(t){var e,r=n.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),o.listener[t]=r)):(t=t.slice(2).toLowerCase(),o.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.off(t,s[t]),a.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),a.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(n.props[t]=e,t=t.slice(2).toLowerCase(),delete o.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(n.props[t]=e,t=t.slice(2).toLowerCase(),a.off(t,e))}),$0(a,n.props,!he.equal(i.props,n.props))}function J0(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return J0(t,r,i&&i[e])}):he.isObject(t)&&(t.$$type!==H0&&t.$$type!==W0&&t.$$type!==U0||(t.$$type===H0&&J0(t.children,r,i&&i.children),e=t.props.key,he.isNil(e)||""===e||(r.hasOwnProperty(e)&&we.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function Q0(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var td,ed={updateList:X0,check:z0,did:function(){X0.forEach(function(t){he.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),X0.splice(0),V0.forEach(function(t){t.__destroy()}),V0=[]}},rd=he.joinVd,id=he.joinDef,nd=Ca.contain,ad=Ca.NONE,od=Ca.TRANSFORM_ALL,sd=Ca.OPACITY,ld=Ca.FILTER,hd=Ca.MIX_BLEND_MODE;function cd(t,e,r){var i=t.childNodes;!function(t,e,r){for(var i=e.length,n=r.length,a=0,o=t.childNodes;a<Math.min(i,n);a++)!function(e,t,r){if(t.tagName!==r.tagName)bd(e,"beforebegin",id(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},n=0,a=(t.props||[]).length;n<a;n++){var o=xt(t.props[n],2),s=o[0],o=o[1];i[s]=o}for(var l=0,h=(r.props||[]).length;l<h;l++){var c=xt(r.props[l],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var _=e.childNodes,f=t.children.length,d=r.children.length,p=0;p<Math.min(f,d);p++)md(e,p,t.children[p],r.children[p]);if(p<f)for(var g=f-1;p<=g;g--)Ed(e,_,g);else if(p<d)for(;p<d;p++)xd(e,_,p,rd(r.children[p]))}}(o[a],e[a],r[a]);if(a<i)for(var s=i-1;a<=s;s--)Ed(t,o,s);else if(a<n)for(;a<n;a++)xd(t,o,a,id(r[a]))}(i[0],e.defs,r.defs),r.hasOwnProperty("lv")||gd(i[1],e.bb,r.bb),dd(t,e,r,!0)}function ud(t,e,r){"dom"===e.type?"dom"===r.type?dd(t,e,r):"geom"===r.type?pd(t,e,r):yd(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(!r.cache){for(var i=e.children.length,n=r.children.length,a=0;a<Math.min(i,n);a++)md(t,a,e.children[a],r.children[a],!0);var o=t.childNodes;if(a<i)for(var s=i-1;a<=s;s--)Ed(t,o,s);else if(a<n)for(;a<n;a++)xd(t,o,a,rd(r.children[a]))}}(t,e,r):yd(t,r):"geom"===e.type?"dom"===r.type?pd(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)fd(t,0,r,r.lv);else if(r.hasOwnProperty("lv"))fd(t,0,r,r.lv);else{_d(t,e,r),gd(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(i,n);a++)md(o,a,e.children[a],r.children[a]);if(a<i)for(var l=i-1;a<=l;l--)Ed(o,s,l);else if(a<n)for(;a<n;a++)xd(o,s,a,rd(r.children[a]))}}(t,e,r):yd(t,r):"img"===e.type&&("img"===r.type?vd(t,e,r):yd(t,r))}function _d(t,e,r){var i=r.transform,n=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,l=r.filter,h=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==n&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter===l&&e.mixBlendMode===h||((h=(l?"filter:".concat(l,";"):"")+(h?"mix-blend-mode:".concat(h,";"):""))?t.setAttribute("style",h):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function fd(t,e,r,i){var n=r.transform,a=r.opacity,o=r.mask,s=r.filter,r=r.mixBlendMode;o?t.setAttribute("mask",o):t.removeAttribute("mask"),i!==ad&&(nd(i,od)&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),nd(i,sd)&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),(nd(i,ld)||nd(i,hd))&&((r=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",r):t.removeAttribute("style")))}function dd(t,e,r,i){if(r.cache)fd(t,0,r,r.lv);else{r.hasOwnProperty("lv")?fd(t,0,r,r.lv):(_d(t,e,r),i||gd(t.firstChild,e.bb,r.bb));for(var n=e.children.length,a=r.children.length,o=0,s=t.lastChild,l=s.childNodes;o<Math.min(n,a);o++)ud(l[o],e.children[o],r.children[o]);if(o<n)for(var h=n-1;o<=h;h--)Ed(s,l,h);else if(o<a)for(;o<a;o++)xd(s,l,o,rd(r.children[o]))}}function pd(t,e,r){_d(t,e,r),gd(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(i,n);a++)yd(s[a],r.children[a]);if(a<i)for(var l=i-1;a<=l;l--)Ed(o,s,l);else if(a<n)for(;a<n;a++)xd(o,s,a,rd(r.children[a]))}function gd(t,e,r){for(var i=e.length,n=r.length,a=0;a<Math.min(i,n);a++)md(t,a,e[a],r[a]);var o=t.childNodes;if(a<i)for(var s=i-1;a<=s;s--)Ed(t,o,s);else if(a<n)for(;a<n;a++)xd(t,o,a,rd(r[a]))}function md(t,e,r,i,n){t=t.childNodes;r.tagName!==i.tagName?yd(t[e],i):(vd(t[e],r,i),n&&r.content!==i.content&&(t[e].innerHTML=i.content))}function vd(e,t,r){if(!r.cache){for(var i={},n=0,a=(t.props||[]).length;n<a;n++){var o=xt(t.props[n],2),s=o[0],o=o[1];i[s]=o}for(var l=0,h=(r.props||[]).length;l<h;l++){var c=xt(r.props[l],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function yd(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=rd(t)})):r=rd(e),bd(t,"beforebegin",r),t.parentNode.removeChild(t)}function xd(t,e,r,i){r>=e.length?bd(t,"beforeend",i):bd(e[r],"beforebegin",i)}function Ed(t,e,r){e[r]&&t.removeChild(e[r])}function bd(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(td=td||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(td.childNodes[0],t)}}var Ad=he.isFunction,Md=function(){function t(){_(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}return d(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var i=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.__list;t.length&&t.splice(0).forEach(function(t){var r=t.target,e=t.animate;r.isDestroyed||(Array.isArray(e)?e.forEach(function(t){var e=t.value,t=t.options;t.autoPlay=!1;t=r.animate(e,t);i.add(t,n)}):(t=e.value,(e=e.options).autoPlay=!1,e=r.animate(t,e),i.add(e,n)))})}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[]);var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,Ad(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,Ad(e)&&e(t))}])}},{key:"cancel",value:function(e){var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,Ad(e)&&e(t))}])}},{key:"finish",value:function(e){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[]);var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,Ad(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[]);var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Ad(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[]);var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Ad(r)&&r(t))}])}},{key:"list",get:function(){return this.__list}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),Td=function t(e,r,i){_(this,t),this.uuid=Tn.genUuid(),this.time=we.now(),this.texture=e,this.width=r,this.height=i},Cd=function(){function s(t,e,r,i,n,a,o){_(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=n,this.height=a,this.bbox=o,this.available=!0,this.__page=new Td(e,n,a),this.dx=-o[0],this.dy=-o[1],this.dbx=r-o[0],this.dby=i-o[1]}return d(s,[{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),Rd="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",Od="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",Sd="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",kd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",wd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Id="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Ld="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Dd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Pd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Nd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Fd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Bd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Gd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Yd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Hd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Wd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Ud="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Xd="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",F=g.STYLE_KEY,Vd=F.POSITION,Kd=F.DISPLAY,zd=F.OPACITY,$d=F.VISIBILITY,jd=F.FILTER,Zd=F.OVERFLOW,qd=F.MIX_BLEND_MODE,Jd=F.FILL,Qd=F.TRANSFORM,t1=F.TRANSFORM_ORIGIN,e1=F.PERSPECTIVE,r1=F.PERSPECTIVE_ORIGIN,$t=g.NODE_KEY,i1=$t.NODE_CACHE,n1=$t.NODE_CACHE_TOTAL,a1=$t.NODE_CACHE_OVERFLOW,o1=$t.NODE_CACHE_MASK,s1=$t.NODE_CACHE_FILTER,l1=$t.NODE_MATRIX,h1=$t.NODE_MATRIX_EVENT,c1=$t.NODE_OPACITY,u1=$t.NODE_COMPUTED_STYLE,_1=$t.NODE_CURRENT_STYLE,f1=$t.NODE_LIMIT_CACHE,d1=$t.NODE_REFRESH_LV,p1=$t.NODE_CACHE_STYLE,g1=$t.NODE_DEFS_CACHE,m1=$t.NODE_IS_MASK,v1=$t.NODE_DOM_PARENT,y1=$t.NODE_PERSPECTIVE_MATRIX,b=g.STRUCT_KEY,x1=b.STRUCT_NODE,E1=b.STRUCT_TOTAL,b1=b.STRUCT_HAS_MASK,A1=b.STRUCT_LV,M1=Ca.NONE,T1=Ca.TRANSFORM_ALL,C1=Ca.OPACITY,R1=Ca.FILTER,O1=Ca.REPAINT,S1=Ca.contain,k1=Ca.MIX_BLEND_MODE,w1=Ca.PERSPECTIVE,I1=qt.isE,L1=qt.inverse,D1=qt.multiply,P1=ar,N1=ur,F1=0,B1=1,G1=2,Y1=3,H1=4;function W1(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}function U1(t,e,r,i,n,a,o,s){var l,h=t.__sx1,c=t.__sy1,u=t.__config,_=u[i1],f=u[u1],d=f[jd],u=f[e1],f=f[r1],p=_&&_.available?_.bbox.slice(0):t.bbox;u&&(l=ea.calPerspectiveMatrix(u,f));var g=[r],m=0;d.forEach(function(t){var e=xt(t,2),t=e[0],e=e[1];"blur"===t&&(m=na.outerSize(e))}),a[r]=1;for(var v={};g.length;)for(var y=g.splice(0),x=0,E=y.length;x<E;x++)for(var b=y[x],A=b+1,M=b+(e[b][E1]||0)+1;A<M;A++){var T=e[A],C=T[x1],R=T[E1];if(!C.isMask){var O,S=C.__sx1,k=C.__sy1,w=C.__config,I=w[f1],L=w[i1],D=w[n1],P=w[s1],N=w[o1],F=w[a1],B=w[u1],G=B[Kd],Y=B[$d],T=B[Qd],w=B[t1],B=B[zd];if(I&&!s)return;"none"!==G?"hidden"!==Y&&(n[A]=b,a[A]=a[b]*B,C instanceof qa||(I=void 0,B=void(Y=G=0),(D=W1([N,P,F,D]))?(I=D.bbox.slice(0),G=D.dbx,Y=D.dby,A+=R||0,B=!0):L&&L.available?(I=L.bbox.slice(0),G=L.dbx,Y=L.dby):I=C.bbox,I&&(I[0]-=h,I[1]-=c,I[2]-=h,I[3]-=c,C=v[b],T&&!I1(T)&&((O=w.slice(0))[0]+=S-h+G,O[1]+=k-c+Y,O=ea.calMatrixByOrigin(T,O),C=C?D1(C,O):O),C&&(v[A]=C),l&&(C=D1(l,C)),I=he.transformBbox(I,C,m,m),R&&!B&&g.push(A),O=I,C=h,B=c,(I=p)[0]=Math.min(I[0],C+O[0]),I[1]=Math.min(I[1],B+O[1]),I[2]=Math.max(I[2],C+O[2]),I[3]=Math.max(I[3],B+O[3])))):A+=R||0}}return[p,l]}function X1(t,e,r,i){var n=e.lockOneChannel(),a=ye.createTexture(t,null,n,r,i),o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,a,0);e=t.checkFramebufferStatus(t.FRAMEBUFFER);return e!==t.FRAMEBUFFER_COMPLETE&&we.error("Framebuffer object is incomplete: "+e.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[n,o,a]}function V1(s,l,t,e,r,i,n){var h=e.sx1,c=e.sy1,u=e.width,_=e.height,f=e.bbox,d=e;return r.forEach(function(t){var e,r,i,n,a,o=xt(t,2),t=o[0],o=o[1];"blur"===t&&0<o?(r=function(t,e,r,i,n,a,o,s,l){var h=na.kernelSize(i),c=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));for(;c<h;)h-=2;var u=na.outerSizeByD(h);n+=2*u,a+=2*u;var _=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(_<n||_<a)){(l=l.slice(0))[0]-=u,l[1]-=u,l[2]+=u,l[3]+=u;for(var f=.5*n,d=.5*a,p=na.gaussianWeight(i,h),g="",m="",v=Math.floor(.5*h),y=0;y<v;y++){var x=.01*(v-y);g+="\nv_texCoordsBlur[".concat(y,"] = a_texCoords + vec2(-").concat(x,", -").concat(x,") * u_direction;"),m+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(y,"]) * ").concat(p[y],";")}g+="\nv_texCoordsBlur[".concat(v,"] = a_texCoords;"),m+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(v,"]) * ").concat(p[v],";");for(var E=0;E<v;E++){var b=.01*(E+1);g+="\nv_texCoordsBlur[".concat(E+v+1,"] = a_texCoords + vec2(").concat(b,", ").concat(b,") * u_direction;"),m+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(E+v+1,"]) * ").concat(p[E+v+1],";")}g=Rd.replace("[3]","["+h+"]").replace(/}$/,g+"}"),m=Od.replace("[3]","["+h+"]").replace(/}$/,m+"}");var A=ye.initShaders(t,g,m);t.useProgram(A);var M=xt(X1(t,e,n,a),3),T=M[0],C=M[1],_=M[2],M=e.findExistTexChannel(r.page);-1===M?(M=e.lockOneChannel(),ye.bindTexture(t,r.page.texture,M)):e.lockChannel(M),_=ye.drawBlur(t,A,C,e,_,r.page.texture,T,M,n,a,f,d,u,h,i),t.deleteShader(A.vertexShader),t.deleteShader(A.fragmentShader),t.deleteProgram(A),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(C),e.releaseLockChannel(M);s=new Cd(t,_,o,s,n,a,l);return e.releaseLockChannel(T,s.page),[s,n,a,l]}}(s,l,d,o,u,_,h,c,f))&&(e=xt(r,4),d=e[0],u=e[1],_=e[2],f=e[3]):"hue-rotate"===t?(r=Q.d2r(o%360),e=Math.cos(r),r=Math.sin(r),(r=K1(s,l,d,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],u,_,h,c,f))&&(i=xt(r,4),d=i[0],u=i[1],_=i[2],f=i[3])):"saturate"===t&&100!==o?(i=K1(s,l,d,[.213+.787*(i=.01*o),.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0],u,_,h,c,f))&&(n=xt(i,4),d=n[0],u=n[1],_=n[2],f=n[3]):"brightness"===t&&100!==o?(n=K1(s,l,d,[n=.01*o,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],u,_,h,c,f))&&(a=xt(n,4),d=a[0],u=a[1],_=a[2],f=a[3]):"grayscale"===t&&0<o?((a=1-.01*o)<0?a=0:1<a&&(a=1),(a=K1(s,l,d,[.2126+.7874*a,.7152-.7152*a,.0722-.0722*a,0,0,.2126-.2126*a,.7152+.2848*a,.0722-.0722*a,0,0,.2126-.2126*a,.7152-.7152*a,.0722+.9278*a,0,0,0,0,0,1,0],u,_,h,c,f))&&(a=xt(a,4),d=a[0],u=a[1],_=a[2],f=a[3])):"contrast"!==t||100===o||(o=K1(s,l,d,[t=.01*o,0,0,0,o=-.5*t,0,t,0,0,o,0,0,t,0,o,0,0,0,1,0],u,_,h,c,f))&&(o=xt(o,4),d=o[0],u=o[1],_=o[2],f=o[3])}),s.useProgram(s.program),s.viewport(0,0,i,n),d}function K1(t,e,r,i,n,a,o,s,l){var h=xt(X1(t,e,n,a),3),c=h[0],u=h[1],_=h[2],h=e.findExistTexChannel(r.page);-1===h?(h=e.lockOneChannel(),ye.bindTexture(t,r.page.texture,h)):e.lockChannel(h),t.useProgram(t.programCm),ye.drawCm(t,t.programCm,h,i),e.releaseLockChannel(h),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u);s=new Cd(t,_,o,s,n,a,l.slice(0));return e.releaseLockChannel(c,s.page),[s,n,a,l]}function z1(t,e,r,i,n,a,o,s,l){"multiply"===(o=P1(o))?u=kd:"screen"===o?u=wd:"overlay"===o?u=Id:"darken"===o?u=Ld:"lighten"===o?u=Dd:"color-dodge"===o?u=Pd:"color-burn"===o?u=Nd:"hard-light"===o?u=Fd:"soft-light"===o?u=Bd:"difference"===o?u=Gd:"exclusion"===o?u=Yd:"hue"===o?u=Hd:"saturation"===o?u=Wd:"color"===o?u=Ud:"luminosity"===o&&(u=Xd);var h=ye.initShaders(t,Sd,u);t.useProgram(h);var c=xt(X1(t,e,s,l),3),o=c[0],u=c[1],c=c[2];return ye.drawMbm(t,h,r,i,s,l),t.useProgram(t.program),t.deleteShader(h.vertexShader),t.deleteShader(h.fragmentShader),t.deleteProgram(h),t.deleteFramebuffer(n),t.deleteTexture(a),e.releaseLockChannel(r),e.releaseLockChannel(i),[o,u,c]}function $1(u,t,_,f){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,n,a,o,s,l=xt(t,4),h=l[2],c=l[3];h===F1?(e=c.matrix,a=c.target,n=c.ctx,r=c.x,t=c.y,l=c.offsetWidth,i=c.offsetHeight,u.globalCompositeOperation="destination-in",u.globalAlpha=1,u.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]),u.fillStyle="#FFF",u.beginPath(),u.rect(r,t,l,i),u.fill(),u.closePath(),u.globalCompositeOperation="source-over",a.draw(),(u=n).setTransform(1,0,0,1,0,0),u.globalAlpha=1,u.drawImage(a.canvas,0,0,_,f,0,0,_,f),u.draw&&u.draw(!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,_,f),a.draw(),we.releaseCacheCanvas(a.canvas)):h===B1?(o=c.target,i=c.ctx,n=c.filter,u.filter&&((a=we.getCacheCanvas(_,f,null,"filter2")).ctx.filter=At.canvasFilter(n),a.ctx.drawImage(o.canvas,0,0,_,f,0,0,_,f),a.ctx.filter="none",a.draw(),o.ctx.globalAlpha=1,o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,_,f),o.ctx.drawImage(a.canvas,0,0,_,f,0,0,_,f),o.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,_,f),a.draw(),we.releaseCacheCanvas(a.canvas)),(u=i).setTransform(1,0,0,1,0,0),u.globalAlpha=1,u.drawImage(o.canvas,0,0,_,f,0,0,_,f),u.draw&&u.draw(!0),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.globalAlpha=1,o.ctx.clearRect(0,0,_,f),o.draw(),we.releaseCacheCanvas(o.canvas)):h===G1?(o=c.mask,c.isClip?(c.target.draw(),(u=o.ctx).globalCompositeOperation="source-out",u.globalAlpha=1,u.setTransform(1,0,0,1,0,0),u.drawImage(c.target.canvas,0,0,_,f,0,0,_,f),o.draw(),u.globalCompositeOperation="source-over",c.target.ctx.setTransform(1,0,0,1,0,0),c.target.ctx.clearRect(0,0,_,f),c.target.draw(),we.releaseCacheCanvas(c.target.canvas),(u=c.ctx).globalAlpha=1,u.setTransform(1,0,0,1,0,0),u.drawImage(o.canvas,0,0,_,f,0,0,_,f),u.draw&&u.draw(!0),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,_,f),o.draw(),we.releaseCacheCanvas(o.canvas)):(o.draw(),s=c.target,(u=s.ctx).globalCompositeOperation="destination-in",u.globalAlpha=1,u.setTransform(1,0,0,1,0,0),u.drawImage(o.canvas,0,0,_,f,0,0,_,f),u.globalCompositeOperation="source-over",s.draw(),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,_,f),o.draw(),we.releaseCacheCanvas(o.canvas),(u=c.ctx).globalAlpha=1,u.setTransform(1,0,0,1,0,0),u.drawImage(s.canvas,0,0,_,f,0,0,_,f),u.draw&&u.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,_,f),s.draw(),we.releaseCacheCanvas(s.canvas))):h===Y1?(s=c.target,(u=c.ctx).globalCompositeOperation=c.mixBlendMode,s.draw(),u.setTransform(1,0,0,1,0,0),u.globalAlpha=1,u.drawImage(s.canvas,0,0,_,f,0,0,_,f),u.globalCompositeOperation="source-over",u.draw&&u.draw(!0),s.ctx.globalAlpha=1,s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,_,f),s.draw(),we.releaseCacheCanvas(s.canvas)):h===H1&&(u=c.ctx)}),u}var j1={renderCacheCanvas:function(f,t,e){for(var r,d=e.__structs,i=e.width,n=e.height,a=[],o=[],s=1,l=0,h=[],c=0,u=d.length;c<u;c++){var _=d[c],p=_[x1],g=_[A1],m=_[E1],v=_[b1];if(!(p instanceof qa)){var y=p.__config;0===c||(l<g?(r=x[h1],I1(r)&&(r=null),a.push(r),s=x[c1],o.push(s)):g<l&&(a.splice(-(C=l-g)),r=a[g-1],o.splice(-C),s=o[g-1]));var x=y,l=g,E=y[d1],b=y[n1],A=y[u1];if("none"!==A[Kd]){var M=void 0;if(E<O1){y[d1]=M1,v&&((R=y[o1])&&R.available||h.push(M=[c,g,m,p,y,v]));var T=y[_1],_=y[p1],C=y[h1],R=void 0;S1(E,T1)?(R=p.__calMatrix(E,_,T,A,y),_=y[l1],he.assignMatrix(_,R)):R=y[l1],r&&(R=D1(r,R)),he.assignMatrix(C,R);R=void 0,R=S1(E,C1)?A[zd]=T[zd]:A[zd];if(y[c1]=s*R,S1(E,R1)&&(p.__bbox=null,O=p.__calFilter(T,A),(R=y[s1])&&R.release(),M?M[6]=O:h.push(M=[c,g,m,p,y,v,O])),S1(E,k1)&&(A[qd]=T[qd]),b&&b.available){c+=m||0;continue}}else p.render(f,E,t,!0);var O=y[f1],T=A[Vd],b=A[Zd],E=A[jd],A=A[qd];!O&&(v||"absolute"===T||E.length||"hidden"===b&&m||N1(A))&&(M?(M[6]=E,M[7]=b):h.push([c,g,m,p,y,v,E,b]))}else c+=m||0}}h.length&&(h.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),h.forEach(function(t){var e,r=xt(t,8),i=r[0],n=r[2],a=r[3],o=r[4],s=r[5],l=r[6],h=r[7],c=o[i1],u=o[n1],_=o[s1],t=o[o1],r=o[a1];u&&u.available||((u=function(t,e,r,i,n,a,o){if(0===i)return o;var s={},l={};if(u=xt(U1(e,n,r,0,s,l),1)[0]){var h=e.__sx1,c=e.__sy1;if(a?a.reset(u,h,c):a=ga.getInstance(u,h,c),a&&a.enabled){a.__available=!0;var u=a,_=u.x,f=u.y,d=u.ctx,p=u.dbx,g=u.dby;o&&o.available&&(d.globalAlpha=1,d.setTransform(1,0,0,1,0,0),ga.drawCache(o,a));for(var m={},v=r+1,y=r+(i||0)+1;v<y;v++){var x,E,b,A,M,T,C,R,O,S=n[v],k=S[x1],w=S[E1],I=S[b1],L=k.__config,D=m[s[v]],P=l[v];k instanceof qa?(d.globalAlpha=P,C=D||qt.identity(),d.setTransform(C[0],C[1],C[4],C[5],C[12],C[13]),k.render(t,0,d,!0,_-h+p,f-c+g)):(x=L[i1],O=L[n1],E=L[s1],b=L[o1],A=L[a1],M=L[m1],T=(R=L[u1])[Kd],S=R[$d],C=R[Qd],L=R[t1],R=R[qd],"none"!==T?"hidden"===S||M||(C&&!I1(C)&&(L=L.slice(0),x&&x.available?(L[0]+=x.sx1,L[1]+=x.sy1):(L[0]+=k.__sx1,L[1]+=k.__sy1),k=-c+g+f,L[0]+=-h+p+_,L[1]+=k,L=ea.calMatrixByOrigin(C,L),D=D?D1(D,L):L),D&&(m[v]=D),(O=W1([b,E,A,O,x]))&&(N1(R)?d.globalCompositeOperation=P1(R):d.globalCompositeOperation="source-over",d.globalAlpha=P,D?d.setTransform(D[0],D[1],D[4],D[5],D[12],D[13]):d.setTransform(1,0,0,1,0,0),ga.drawCache(O,a),O!==x&&(v+=w||0,v+=I||0))):(v+=w||0,I&&(v+=I)))}return a}}}(f,a,i,n||0,d,u,c))&&u!==c&&(o[n1]=u),e=!0),u&&u.available&&(u=u,"hidden"===h&&(r&&r.available&&!e||(o[a1]=function(t,e){var r=t.bbox,i=e.bbox;if(!(i[0]>=r[0]&&i[1]>=r[1]&&i[2]<=r[2]&&i[3]<=r[3]))return ga.genOverflow(e,t)}(a,u),e=!0),u=o[a1]||u),l&&l.length&&(_&&_.available&&!e||(o[s1]=(_=u,ga.genFilter(_,l)),e=!0),u=o[s1]||u),!s||t&&t.available&&!e||(o[o1]=(t=u,o=(e=a.computedStyle)[Qd],u=e[t1],e=a.next.isClip,ga.genMask(t,a.next,e,o,u))))}));for(var S={},k={},w=0,I=d.length;w<I;w++){var L,D,P,N,F,B,G,Y,H,W,U,X,V,K,z,$,j,Z,q=d[w],J=q[x1],Q=q[A1],tt=q[E1],et=q[b1],rt=J.__config;J instanceof qa?(W=(H=rt[v1].__config)[c1],V=H[h1],t.globalAlpha=W,t.setTransform(V[0],V[1],V[4],V[5],V[12],V[13]),J.render(f,0,t),k.hasOwnProperty(w)&&(t=$1(t,k[w],i,n))):(L=rt[c1],D=rt[h1],P=rt[f1],N=rt[i1],U=rt[n1],F=rt[s1],B=rt[o1],G=rt[a1],Y=rt[d1],H=(q=rt[u1])[Kd],W=q[$d],V=q[Zd],rt=q[jd],q=q[qd],(U=W1([B,F,G,U]))?(w+=(tt||0)+(et||0),"none"!==H&&(N1(q)?t.globalCompositeOperation=P1(q):t.globalCompositeOperation="source-over",ga.draw(t,L,D,U),t.globalCompositeOperation="source-over",k.hasOwnProperty(w)&&(t=$1(t,k[w],i,n)))):(S.hasOwnProperty(w)&&(j=(Z=xt(S[w],2))[0],$=Z[1],K=we.getCacheCanvas(i,n,null,"mask2"),$.mask=K,k[Z=w+j-1+(tt||0)].push([Z,Q,H1,{ctx:t,target:K}]),t=K.ctx),K=Z=j=$=void 0,N&&N.available||P?(N&&N.available?(N1(q)&&($={ctx:t,target:X=we.getCacheCanvas(i,n,null,"blend"),mixBlendMode:P1(q),matrix:D},t=X.ctx),et&&(j={ctx:t,target:X=we.getCacheCanvas(i,n,null,"mask1"),matrix:D},t=X.ctx),rt&&rt.length&&(Z={ctx:t,filter:rt,target:rt=we.getCacheCanvas(i,n,null,"filter1"),matrix:D},t=rt.ctx),"hidden"===V&&"inline"!==H&&(K={ctx:t,target:V=we.getCacheCanvas(i,n,null,"overflow"),matrix:D,x:N.sx1,y:N.sy1,offsetWidth:J.offsetWidth,offsetHeight:J.offsetHeight},t=V.ctx),"hidden"!==W&&ga.draw(t,L,D,N)):($=(z=J.render(f,Y,t)||{}).offscreenBlend,j=z.offscreenMask,Z=z.offscreenFilter,K=z.offscreenOverflow),$&&((k[z=w+(tt||0)+(et||0)]=k[z]||[]).push([w,Q,Y1,$]),t=$.target.ctx),j&&(S[($=w+(tt||0))+1]=[et,j],j.isClip=d[$+1][x1].isClip,(k[$+=et||0]=k[$]||[]).push([w,Q,G1,j]),t=j.target.ctx),Z&&((k[j=w+(tt||0)+(et||0)]=k[j]||[]).push([w,Q,B1,Z]),t=Z.target.ctx),K&&((k[Z=w+(tt||0)+(et||0)]=k[Z]||[]).push([w,Q,F1,K]),t=K.target.ctx),P&&J instanceof L0&&J.render(f,Y,t)):et&&(w+=(tt||0)+et),k.hasOwnProperty(w)&&(t=$1(t,k[w],i,n)),"none"===H&&(w+=(tt||0)+(et||0))))}},renderCanvas:function(t,e,r){for(var i=r.__structs,n=r.width,a=r.height,o={},s={},l=0,h=i.length;l<h;l++){var c=i[l],u=c[x1],_=c[A1],f=c[E1],d=c[b1],p=u.__config,c=p[u1],p=p[d1];o.hasOwnProperty(l)&&(g=(v=xt(o[l],2))[0],m=v[1],v=we.getCacheCanvas(n,a,null,"mask2"),m.mask=v,s[m=l+g-1+(f||0)].push([m,_,H1,{ctx:e,target:v}]),e=v.ctx);var g=u.render(t,p,e)||{},m=g.offscreenBlend,v=g.offscreenMask,u=g.offscreenFilter,p=g.offscreenOverflow;m&&((s[g=l+(f||0)+(d||0)]=s[g]||[]).push([l,_,Y1,m]),e=m.target.ctx),v&&(o[(m=l+(f||0))+1]=[d,v],v.isClip=i[m+1][x1].isClip,(s[m+=d||0]=s[m]||[]).push([l,_,G1,v]),e=v.target.ctx),u&&((s[v=l+(f||0)+(d||0)]=s[v]||[]).push([l,_,B1,u]),e=u.target.ctx),p&&((s[u=l+(f||0)+(d||0)]=s[u]||[]).push([l,_,F1,p]),e=p.target.ctx),s.hasOwnProperty(l)&&(e=$1(e,s[l],n,a)),"none"===c[Kd]&&(l+=(f||0)+(d||0))}},renderSvg:function(t,e,r,i){var n=r.__structs,a=r.width,o=r.height,s={};if(!i)for(var l=0,h=n.length;l<h;l++){var c=n[l],u=c[x1],_=c[E1],f=c[b1],c=u.__config,u=c[d1],c=c[g1];f&&(O1<=u||S1(u,T1|C1))&&(s[l+(_||0)+1+f-1]=u),u<O1&&(s.hasOwnProperty(l)?(f=s[l],!S1(u,T1)&&f<O1&&!S1(f,T1)&&c.forEach(function(t){e.addCache(t)})):c.forEach(function(t){e.addCache(t)}))}for(var d,p,g,m={},v=[],y=[],x=0,E=0,b=n.length;E<b;E++){var A=n[E],M=A[x1],T=A[E1],C=A[b1],R=A[A1],O=M.__config,S=O[n1],k=O[d1],w=O[g1],I=O[u1],L=I[Kd];C&&"none"!==L&&(m[(F=(D=E+(T||0)+1)+C)-1]={index:E,start:D,end:F,isClip:n[D][x1].isClip}),R<x?(v.splice(R),d=v[R-1],y.splice(R),p=y[R-1]):x<R&&(v.push(g.__matrix),P=g.virtualDom,y.push(P),p=P);var D,P,N,F,A=void 0;if(k<O1&&!(M instanceof qa)?(O[d1]=M1,A=M.virtualDom,S&&S.available?(E+=T||0,A.cache=!0):(S&&(S.available=!0),A=M.__virtualDom=he.extend({},A),M instanceof q_&&!(M instanceof Hf)&&(A.children=[]),delete A.cache,"none"===L&&(E+=T||0,C&&(E+=C))),F=O[_1],D=O[u1],P=O[p1],S1(k,T1)&&(S=M.__calMatrix(k,P,F,D,O),P=O[l1],he.assignMatrix(P,S),!S||I1(S)?delete A.transform:A.transform="matrix("+he.joinArr(qt.m2m6(S),",")+")",d&&S&&(S=D1(d,S)),P=O[h1],he.assignMatrix(P,S)),S1(k,C1)&&(1===(N=D[zd]=F[zd])?delete A.opacity:A.opacity=N),S1(k,R1)&&(N=M.__calFilter(F,D),(N=At.svgFilter(N))?A.filter=N:delete A.filter),S1(k,k1)&&(F=D[qd]=F[qd],N1(F)?A.mixBlendMode=P1(F):delete A.mixBlendMode),A.lv=k):(O[g1]&&O[g1].splice(0),M.render(t,k,e),A=M.virtualDom,"none"===(L=I[Kd])&&(E+=T||0,C&&(E+=C))),m.hasOwnProperty(E)&&(s.hasOwnProperty(E)||O1<=k||S1(k,T1|C1))){var T=m[E],C=T.index,k=T.start,B=T.end,G=T.isClip,Y=n[C][x1],H=[];G&&H.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(a,",0L").concat(a,",").concat(o,"L0,").concat(o,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var W=k;W<B;W++){var U=n[W][x1],X=U.computedStyle,V=X[Kd],K=X[$d],z=X[Jd],X=U.virtualDom,$=X.children,j=X.opacity;if("none"!==V&&"hidden"!==K)for(var $=he.clone($),H=H.concat($),Z=0,q=$.length;Z<q;Z++){var J=$[Z],Q=J.tagName,tt=J.props;if("path"===Q){if(G)for(var et=0,rt=tt.length;et<rt;et++){var it=tt[et];"fill"===it[0]&&(it[1]=he.int2invert(z[0]))}var nt=U.matrix,J=L1(Y.matrix),nt=D1(J,nt);tt.push(["transform","matrix(".concat(he.joinArr(qt.m2m6(nt),","),")")]),he.isNil(j)||1===j||tt.push(["opacity",j])}else if("image"===Q){for(var at,ot=-1,st=0,lt=tt.length;st<lt;st++)if("transform"===tt[st][0]){ot=st;break}-1===ot?(at=L1(Y.matrix),I1(at)||tt.push(["transform","matrix(".concat(he.joinArr(qt.m2m6(at),","),")")])):(Q=tt[ot][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),at=L1(Y.matrix),Q=D1(at,Q),tt[ot][1]="matrix(".concat(he.joinArr(qt.m2m6(Q),","),")"))}}}for(var ht=w.length-1;0<=ht;ht--)"mask"===w[ht].tagName&&w.splice(ht,1);C={tagName:"mask",props:[],children:H},k=e.add(C);w.push(C),Y.virtualDom.mask="url(#"+k+")"}p&&!M.isMask&&p.children.push(A),0===E&&(d=O[l1],p=A),x=R,g=M}},renderWebgl:function(t,d,e){for(var r,i,n,p=e.__structs,g=e.width,m=e.height,v=e.texCache,a=.5*g,o=.5*m,s=[],l=[],h=1,c=[],u=0,_=[],f=0,y=p.length;f<y;f++){var x=p[f],E=x[x1],b=x[A1],A=x[E1],M=x[b1];if(E instanceof qa)O1<=R&&E.render(t,0,d,!0);else{var T=E.__config,C=T[d1];0===f||(u<b?(r=O[h1],I1(r)&&(r=null),s.push(r),h=O[c1],l.push(h),i=O[y1],I1(i)&&(i=null),c.push(i)):b<u&&(s.splice(-(L=u-b)),r=s[b-1],l.splice(-L),h=l[b-1],c.splice(-L),i=c[b-1]));var R=C,O=T,u=b,S=T[n1],k=T[u1];if("none"!==k[Kd]){var w=void 0;if(C<O1){T[d1]=M1,M&&((D=T[o1])&&D.available||_.push(w=[f,b,A,E,T,null,M]));var I=T[_1],x=T[p1],L=T[h1];S1(C,w1)&&E.__calPerspective(x,I,k,T);var D=void 0;S1(C,T1)?(D=E.__calMatrix(C,x,I,k,T),x=T[l1],he.assignMatrix(x,D)):D=T[l1],(ea.isPerspectiveMatrix(D)||i)&&(w?w[9]=!0:w=[f,b,A,E,T,null,null,null,null,!0]),i&&(D=D1(i,D)),r&&(D=D1(r,D)),he.assignMatrix(L,D);L=void 0,L=S1(C,C1)?k[zd]=I[zd]:k[zd];if(T[c1]=h*L,S1(C,R1)&&(E.__bbox=null,D=E.__calFilter(I,k),(L=T[s1])&&L.release(),w?w[7]=D:_.push(w=[f,b,A,E,T,null,M,D])),S1(C,k1)&&(k[qd]=I[qd]),S&&S.available){f+=A||0;continue}}else{S=E.render(t,C,d,!0);S&&we.isWebGLTexture(S.texture)&&(C=E.__sx1,P=E.__sy1,N=E.offsetWidth,F=E.offsetHeight,B=E.bbox,T[i1]=new Cd(d,S.texture,C,P,N,F,B),d.viewport(0,0,g,m),d.useProgram(d.program))}var P=T[f1],N=k[Zd],F=k[jd],B=k[qd],k=k[Qd],B=N1(B),k=ea.isPerspectiveMatrix(k)||i;(M||F.length||"hidden"===N&&A||B||k)&&(B&&(n=!0),w?(w[5]=P,w[7]=F,w[8]=N,w[9]=k):_.push([f,b,A,E,T,P,M,F,N,k]))}else f+=A||0}}var G,Y,H,W={};_.length&&(_.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),_.forEach(function(t){var e,r=xt(t,9),i=r[0],n=r[2],a=r[3],o=r[4],s=r[5],l=r[6],h=r[7],c=r[8],u=o[i1],_=o[n1],f=o[s1],t=o[o1],r=o[a1];_&&_.available||(n=function(t,e,r,i,n,a,o,s,l,h){var c,u={},_={},f=xt(U1(r,a,i,0,u,_,t.getParameter(t.MAX_TEXTURE_SIZE),s),2),d=f[0],p=f[1];d||(c=!0);var g=(d=s||c?[0,0,l,h]:d)[2]-d[0],m=d[3]-d[1],v=(f=xt(X1(t,e,g,m),3))[0],y=f[1],x=f[2],E=r.__sx1,b=r.__sy1,A=.5*g,M=.5*m,T=-d[0],C=-d[1],R=E-d[0],O=b-d[1];o&&o.available?e.addTexAndDrawWhenLimit(t,o,1,null,A,M,T,C):s&&(f=we.getCacheCanvas(g,m,"__$$OVERSIZE$$__"),r.render(Et.WEBGL,0,t),o=e.lockOneChannel(),r=ye.createTexture(t,f.canvas,o),r=new Cd(t,r,0,0,g,m,[0,0,g,m]),e.addTexAndDrawWhenLimit(t,r,1,null,A,M,0,0),e.refresh(t,A,M),f.ctx.setTransform(1,0,0,1,0,0),f.ctx.globalAlpha=1,f.ctx.clearRect(0,0,g,m),r.release(),e.releaseLockChannel(o));for(var S={},k=i+1,w=i+(n||0)+1;k<w;k++){var I,L,D,P,N,F,B,G,Y,H=a[k],W=H[x1],U=H[E1],X=H[b1],V=W.__config,K=S[u[k]],z=_[k];W instanceof qa?(p&&(K=D1(p,K)),e.addTexAndDrawWhenLimit(t,V[i1],z,K,A,M,T,C)):(I=V[i1],B=V[n1],G=V[s1],N=V[o1],F=V[a1],L=V[m1],D=(Y=V[u1])[Kd],P=Y[$d],H=Y[Qd],V=Y[t1],Y=Y[qd],"none"!==D?"hidden"===P||L||(H&&!I1(H)&&(V=V.slice(0),I&&I.available?(V[0]+=I.sx1,V[1]+=I.sy1):(V[0]+=W.__sx1,V[1]+=W.__sy1),W=O-b,V[0]+=R-E,V[1]+=W,V=ea.calMatrixByOrigin(H,V),K=K?D1(K,V):V),K&&(S[k]=K),p&&(K=D1(p,K)),(N=W1([N,G,F,B,I]))&&(N1(Y)?(e.refresh(t,A,M),F=(G=xt(X1(t,e,g,m),3))[0],B=G[1],G=G[2],e.addTexAndDrawWhenLimit(t,N,z,K,A,M,T,C),e.refresh(t,A,M),v=(Y=xt(z1(t,e,v,F,y,x,P1(Y),g,m),3))[0],y=Y[1],x=Y[2],t.deleteFramebuffer(B),t.deleteTexture(G)):e.addTexAndDrawWhenLimit(t,N,z,K,A,M,T,C),N!==I&&(k+=(U||0)+(X||0)))):(k+=U||0,X&&(k+=X)))}return e.refresh(t,A,M),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,l,h),t.deleteFramebuffer(y),d=new Cd(t,x,E,b,g,m,d),e.releaseLockChannel(v,d.page),[s||c,d]}(d,v,a,i,n||0,p,u,s,g,m),u=(e=xt(n,2))[0],_=n=e[1],e=!0,(s=u)||(o[n1]=n));"hidden"===c&&(r&&r.available&&!e||(_=function(t,e,r,i,n,a){var o=r.bbox.slice(0),s=i.bbox;if(!(s[0]>=o[0]&&s[1]>=o[1]&&s[2]<=o[2]&&s[3]<=o[3])){var l=o[2]-o[0],h=o[3]-o[1],c=xt(X1(t,e,l,h),3),u=c[0],_=c[1],r=c[2],c=e.findExistTexChannel(i.page);-1===c?(c=e.lockOneChannel(),ye.bindTexture(t,i.page.texture,c)):e.lockChannel(c),t.useProgram(t.programOverflow),ye.drawOverflow(t,c,o[0]-s[0],o[1]-s[1],l,h,i.width,i.height),e.releaseLockChannel(c),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,n,a),t.deleteFramebuffer(_);o=new Cd(t,r,i.sx1,i.sy1,l,h,o);return e.releaseLockChannel(u,o.page),o}}(d,v,a,_,g,m),e=!0,s||(o[s1]=_))),h.length&&(f&&f.available&&!e||(_=V1(d,v,0,f=_,h,g,m))!==f&&(e=!0,s||(o[s1]=_))),!l||t&&t.available&&!e||(_=function(t,e,r,i,n,a,o){var s=n.sx1,l=n.sy1,h=n.width,c=n.height,u=n.bbox,_=.5*h,f=.5*c,d=-u[0],p=-u[1],g=(y=i[u1])[Qd],m=y[t1],v=I1(g)?qt.identity():((k=m.slice(0))[0]+=s+d,k[1]+=l+d,ea.calMatrixByOrigin(g,k));v=qt.inverse(v);for(var y=(i=xt(X1(t,e,h,c),3))[0],m=i[1],g=i[2],x=r.next;x&&x.isMask;){var E=x.__config,b=E[i1],A=E[s1],M=E[a1],T=E[u1],C=T[Kd],R=T[$d],O=T[zd],S=T[Qd],T=T[t1];if("none"!==C&&"hidden"!==R){M=W1([A,M,b]);if(M){b=void 0,b=I1(S)?qt.identity():((T=T.slice(0))[0]+=M.bbox[0]+d,T[1]+=M.bbox[1]+p,ea.calMatrixByOrigin(S,T));b=qt.multiply(v,b),e.addTexAndDrawWhenLimit(t,M,O,b,_,f,d,p)}else if(E[f1])return;x=x.next}}e.refresh(t,_,f),t.deleteFramebuffer(m);var k=e.findExistTexChannel(n.page);return-1===k?(k=e.lockOneChannel(),ye.bindTexture(t,n.page.texture,k)):e.lockChannel(k),i=xt(X1(t,e,h,c),3),m=i[0],n=i[1],i=i[2],r=r.next.isClip?t.programClip:t.programMask,t.useProgram(r),ye.drawMask(t,y,k,r),t.deleteTexture(g),e.releaseLockChannel(y),e.releaseLockChannel(k),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,a,o),t.deleteFramebuffer(n),u=new Cd(t,i,s,l,h,c,u),e.releaseLockChannel(m,u.page),u}(d,v,a,o,_,g,m),s||(o[o1]=_)),s&&(W[i]=_)})),n&&(G=(z=xt(X1(d,v,g,m),3))[0],Y=z[1],H=z[2]);for(var U,X,V,K,z,$=0,j=p.length;$<j;$++){var Z,q,J,Q,tt,et,rt,it,nt,at,ot,st,lt=p[$],ht=lt[x1],ct=lt[E1],ut=lt[b1],_t=ht.__config;ht instanceof qa?(nt=_t[i1],et=_t[f1],it=(q=_t[v1].__config)[h1],Q=q[c1],nt&&nt.available?v.addTexAndDrawWhenLimit(d,nt,Q,it,a,o,!0):et&&(st=we.getCacheCanvas(g,m,"__$$OVERSIZE$$__"),ht.render(t,0,d),tt=v.lockOneChannel(),J=ye.createTexture(d,st.canvas,tt),ot=new Cd(d,J,0,0,g,m,[0,0,g,m]),v.addTexAndDrawWhenLimit(d,ot,Q,it,a,o,0,0,!0),v.refresh(d,a,o,!0),st.ctx.setTransform(1,0,0,1,0,0),st.ctx.globalAlpha=1,st.ctx.clearRect(0,0,g,m),ot.release(),v.releaseLockChannel(tt))):(Z=_t[c1],lt=_t[h1],q=_t[f1],nt=_t[i1],et=_t[n1],J=_t[s1],Q=_t[o1],it=_t[a1],st=_t[d1],tt=(ot=_t[u1])[Kd],_t=ot[$d],ot=ot[qd],"none"!==tt?(it=W1([Q,J,it,et,nt]))?(n&&N1(ot)?(v.refresh(d,a,o,!0),et=(at=xt(X1(d,v,g,m),3))[0],rt=at[1],at=at[2],v.addTexAndDrawWhenLimit(d,it,Z,lt,a,o,0,0,!0),v.refresh(d,a,o,!0),G=(et=xt(z1(d,v,G,et,Y,H,P1(ot),g,m),3))[0],Y=et[1],H=et[2],d.deleteFramebuffer(rt),d.deleteTexture(at)):v.addTexAndDrawWhenLimit(d,it,Z,lt,a,o,0,0,!0),it!==nt&&($+=(ct||0)+(ut||0))):W.hasOwnProperty($)?(rt=W[$],n&&N1(ot)?(v.refresh(d,a,o,!0),it=(at=xt(X1(d,v,g,m),3))[0],nt=at[1],at=at[2],v.addTexAndDrawWhenLimit(d,rt,Z,lt,a,o,0,0,!0),v.refresh(d,a,o,!0),G=(ot=xt(z1(d,v,G,it,Y,H,P1(ot),g,m),3))[0],Y=ot[1],H=ot[2],d.deleteFramebuffer(nt),d.deleteTexture(at)):v.addTexAndDrawWhenLimit(d,rt,Z,lt,a,o,0,0,!0),$+=(ct||0)+(ut||0)):q&&"none"!==tt&&"hidden"!==_t&&(_t=we.getCacheCanvas(g,m,"__$$OVERSIZE$$__"),ht.render(t,st,d),ht=v.lockOneChannel(),st=ye.createTexture(d,_t.canvas,ht),st=new Cd(d,st,0,0,g,m,[0,0,g,m]),v.addTexAndDrawWhenLimit(d,st,Z,lt,a,o,0,0,!0),v.refresh(d,a,o,!0),_t.ctx.setTransform(1,0,0,1,0,0),_t.ctx.globalAlpha=1,_t.ctx.clearRect(0,0,g,m),st.release(),v.releaseLockChannel(ht)):$+=(ct||0)+(ut||0))}v.refresh(d,a,o,!0),n&&(d.bindFramebuffer(d.FRAMEBUFFER,null),v.releaseLockChannel(G),d.deleteFramebuffer(Y),U=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,U),d.bufferData(d.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),d.STATIC_DRAW),X=d.getAttribLocation(d.program,"a_position"),d.vertexAttribPointer(X,2,d.FLOAT,!1,0,0),d.enableVertexAttribArray(X),V=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,V),d.bufferData(d.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),d.STATIC_DRAW),K=d.getAttribLocation(d.program,"a_texCoords"),d.vertexAttribPointer(K,2,d.FLOAT,!1,0,0),d.enableVertexAttribArray(K),e=d.createBuffer(),d.bindBuffer(d.ARRAY_BUFFER,e),d.bufferData(d.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),d.STATIC_DRAW),z=d.getAttribLocation(d.program,"a_opacity"),d.vertexAttribPointer(z,1,d.FLOAT,!1,0,0),d.enableVertexAttribArray(z),z=d.getUniformLocation(d.program,"u_texture"),d.uniform1i(z,G),d.drawArrays(d.TRIANGLES,0,6),d.deleteBuffer(U),d.deleteBuffer(V),d.deleteBuffer(e),d.disableVertexAttribArray(X),d.disableVertexAttribArray(K),d.deleteTexture(H))}},Z1="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",q1=function(){function e(t){_(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return d(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,n,a){var o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,l=8<arguments.length?arguments[8]:void 0,h=this.__pages,c=this.__list,u=e.page;-1<h.indexOf(u)||(h.length>=this.__units-this.__lockUnits&&this.refresh(t,n,a,l),h.push(u)),c.push([e,r,i,o,s])}},{key:"refresh",value:function(t,e,r,i){var n=this.__pages,a=this.__list;if(n.length){var o=this.channels,s=this.locks,l={};o.forEach(function(t,e){t&&(t=t.uuid,l[t]=e)});var h=this.__units,c=new Array(h),u=[];if(n.forEach(function(t){var e=t.uuid;l.hasOwnProperty(e)?(e=l[e],c[e]=t):u.push(t)}),u.length){for(var _=0;_<h&&(c[_]||o[_]||s[_]||(c[_]=u.shift(),u.length));_++);var f=u.length;if(f){for(var d=[],p=0;p<h;p++)c[p]||s[p]||d.push([p,o[p]]);d.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var g=0;g<f;g++)c[d[g][0]]=u[g]}}for(var m={},v=0,y=c.length;v<y;v++){var x,E=c[v];E&&(!(x=o[v])||x[0]!==E||E.update?(E instanceof Td?ye.bindTexture(t,E.texture,v):(x&&t.deleteTexture(x.texture),E.texture=ye.createTexture(t,E.canvas,v)),m[(o[v]=E).uuid]=v):m[E.uuid]=v,E.update=!1,E.time=we.now())}ye.drawTextureCache(t,a,m,e,r,i),n.splice(0),a.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i=this.__units,n=[],a=0;a<i;a++)e[a]||n.push([a,t[a]]);if(n.length){n.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});var o=n[0][0];return t[o]=null,e[o]=!0,this.__lockUnits++,o}throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}}]),e}(),Zt=g.STYLE_KEY,J1=Zt.TOP,jt=Zt.RIGHT,Q1=Zt.BOTTOM,m=Zt.LEFT,tp=Zt.POSITION,ep=Zt.DISPLAY,rp=Zt.VISIBILITY,ip=Zt.COLOR,np=Zt.WIDTH,ap=Zt.HEIGHT,op=Zt.Z_INDEX,sp=Zt.MARGIN_TOP,lp=Zt.MARGIN_LEFT,hp=Zt.MARGIN_BOTTOM,cp=Zt.PADDING_TOP,up=Zt.PADDING_LEFT,_p=Zt.PADDING_BOTTOM,fp=Zt.BORDER_TOP_WIDTH,dp=Zt.BORDER_LEFT_WIDTH,pp=Zt.BORDER_BOTTOM_WIDTH,gp=Zt.POINTER_EVENTS,Jt=g.UPDATE_KEY,mp=Jt.UPDATE_NODE,vp=Jt.UPDATE_STYLE,yp=Jt.UPDATE_KEYS,xp=Jt.UPDATE_COMPONENT,Ep=Jt.UPDATE_FOCUS,bp=Jt.UPDATE_MEASURE,Ap=Jt.UPDATE_OVERWRITE,Mp=Jt.UPDATE_LIST,Tp=Jt.UPDATE_CONFIG,Cp=Jt.UPDATE_ADD_DOM,Rp=Jt.UPDATE_REMOVE_DOM,F=g.NODE_KEY,Op=F.NODE_TAG_NAME,Sp=F.NODE_CACHE_STYLE,kp=F.NODE_CACHE_PROPS,wp=F.NODE_CURRENT_STYLE,Ip=F.NODE_COMPUTED_STYLE,Lp=F.NODE_CURRENT_PROPS,Dp=F.NODE_DOM_PARENT,Pp=F.NODE_IS_MASK,Np=F.NODE_REFRESH_LV,Fp=F.NODE_IS_DESTROYED,Bp=F.NODE_STYLE,Gp=F.NODE_UPDATE_HASH,Yp=F.NODE_UNIQUE_UPDATE_ID,Hp=F.NODE_CACHE,Wp=F.NODE_CACHE_TOTAL,Up=F.NODE_CACHE_FILTER,Xp=F.NODE_CACHE_OVERFLOW,Vp=F.NODE_CACHE_MASK,Kp=F.NODE_STRUCT,$t=g.STRUCT_KEY,zp=$t.STRUCT_INDEX,$p=$t.STRUCT_TOTAL,jp=$t.STRUCT_NODE,Zp=(a(b={},J1,!0),a(b,jt,!0),a(b,Q1,!0),a(b,m,!0),b),qp=he.isNil,Jp=he.isObject,Qp=he.isFunction,tg=C.AUTO,eg=C.PX,rg=C.PERCENT,ig=C.INHERIT,ng=_n.isRelativeOrAbsolute,ag=_n.equalStyle,og=Ca.contain,sg=Ca.getLevel,lg=Ca.isRepaint,hg=Ca.NONE,cg=Ca.FILTER,ug=Ca.PERSPECTIVE,_g=Ca.REPAINT,fg=Ca.REFLOW,dg=Tr.isIgnore,pg=Tr.isGeom,gg=Tr.isMeasure,mg={canvas:"canvas",svg:"svg",webgl:"canvas"};var vg=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function yg(t,e){return t.currentStyle[e][1]!==tg}function xg(t,e){var r=yg(t,np)&&yg(t,ap);if(r&&e){t=t.domParent;if(t&&("flex"===t.currentStyle[ep]||"flex"===t.computedStyle[ep]))return}return r}function Eg(t){return t.hasOwnProperty("__uniqueReflowId")}var bg=0;function Ag(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=bg,e[bg++]={node:t,component:r,addDom:i})}var Mg=0;function Tg(t,e,r,i,n,a,o,s,l){var h,c=r[mp],u=r[vp],_=r[Ap],f=r[Ep],d=r[xp],p=r[bp],g=r[Mp],m=r[yp],v=r[Tp],y=r[Cp],x=r[Rp];if(!v[Fp]){_&&Object.assign(v[Bp],_),g&&!d&&(m=(m||[]).slice(0),h={},m.forEach(function(t){h[t]=!0}),g.forEach(function(t){var e=t[vp],r=t[Ap];(t[yp]||[]).forEach(function(t){h.hasOwnProperty(t)||(h[t]=!0,m.push(t))}),r&&Object.assign(v[Bp],r),e&&(u?Object.assign(u,e):u=e)}));var E,b,A,M,T=v[Op],C=v[Sp],R=v[kp],O=v[wp],r=v[Ip],S=v[Lp],_=v[Dp],g=v[Pp],k=f||hg,w=p;if(!d&&u&&m)for(var I=0,L=m.length;I<L;I++){var D=m[I],P=u[D];if(c instanceof L0&&pg(T,D))ag(D,P,S[D],c)||(k|=_g,R[D]=void 0,S[D]=P);else if(!ag(D,P,O[D],c))if(dg(D))C[D]=void 0,O[D]=P;else{if(Zp.hasOwnProperty(D)){var N=O[tp];if("relative"!==N&&"absolute"!==N){delete u[D];continue}}else D===ep&&(M=!0);k|=sg(D),gg(D)&&(w=!0),C[D]=void 0,O[D]=P,D===op&&c!==e&&(E=!0),D===rp&&(b=!0),D===ip&&(A=!0)}}if(k!==hg||d){if("none"!==r[ep]||M){if(E&&_&&delete _.__zIndexChildren,b||A)for(var F=e.__structs,p=c.__config[Kp],B=p[zp]+1,G=B+p[$p];B<G;B++){var Y=F[B],H=Y[jp],W=Y[$p],U=H.__config,X=U[wp],Y=void 0;b&&(H instanceof qa||X[rp][1]===ig)&&(Y=!0),(Y=A&&(H instanceof qa||X[ip][1]===ig)?!0:Y)?(U[Np]|=_g,H instanceof Eu&&H.clearCache()):B+=W||0}if(g){for(var V=c.prev;V&&V.isMask;)V=V.prev;V&&V.__config[Vp]&&V.__config[Vp].release()}var K=_;if(M&&K){g=K.__config;if("none"===g[wp][ep]||"none"===g[Ip][ep])return void(r[ep]="none")}!d&&lg(k)?(E&&t===Et.SVG&&(k|=_g,_&&Cg(_)),E&&!d&&s&&_&&!_.hasOwnProperty("__uniqueZId")&&(s[Mg]=!0,_.__uniqueZId=Mg++,l.push(_))):(i.push({node:c,style:u,component:d,addDom:y,removeDom:x}),w&&n.push(c)),v[Np]|=k;t=_g<=k||t===Et.SVG&&c instanceof L0;for(t&&v[Hp]&&v[Hp].release(),(t||og(k,ug))&&(v[Wp]&&v[Wp].release(),v[Vp]&&v[Vp].release(),v[Xp]&&v[Xp].release()),(t||og(k,cg))&&v[Up]&&v[Up].release();K;){var z=K.__config;if(z.hasOwnProperty(Yp)){var $=z[Yp];if(a.hasOwnProperty($))break;a[$]=!0}else a[Mg]=!0,z[Yp]=Mg++,o.push(z);$=z[Np];_g<=$&&z[Hp]&&z[Hp].release(),z[Wp]&&z[Wp].release(),z[Up]&&z[Up].release(),z[Vp]&&z[Vp].release(),z[Xp]&&z[Xp].release(),K=z[Dp]}return!0}}else delete v[Yp]}}function Cg(t,e){var r=t.__config;e?r[Np]|=_g:r[Wp].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof Ro?t.shadowRoot:t)instanceof qa||Cg(t,!0)})}var Rg=0,Og=function(){t(n,q_);var i=e(n);function n(t,e,r){return _(this,n),(e=i.call(this,t,e)).__cd=r||[],e.__dom=null,e.__mw=0,e.__mh=0,e.__taskUp=[],e.__taskCp=[],e.__ref={},e.__reflowList=[{node:o(e)}],e.__animateController=new Md,Eo.mix(o(e)),e.__config[Gp]=e.__updateHash={},e.__uuid=Rg++,e}return d(n,[{key:"__initProps",value:function(){var t=this.props.width;qp(t)||0<(e=parseFloat(t)||0)&&(this.__width=e);var e=this.props.height;qp(e)||0<(e=parseFloat(e)||0)&&(this.__height=e)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?he.joinSourceArray(e):he.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+he.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,n,a,o,s,l,h;return-1===["touchend","touchcancel"].indexOf(t.type)&&(o=this.dom,e=this.__scx,r=this.__scy,i=(h=o.getBoundingClientRect()).x,n=h.y,s=h.left,l=h.top,a=h.width,o=h.height,s=(h=t.touches?t.touches[0]:t).clientX-(s=i||s||0),l=h.clientY-(l=n||l||0),qp(e)?s*=this.width/a:s/=e,qp(r)?l*=this.height/o:l/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:l,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){t=this.__wrapEvent(t);return this.__emitEvent(t),t}}},{key:"appendTo",value:function(t){t=function(t){if(he.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=yo.initRoot(this.__cd,this),this.__initProps(),(this.__root=this).cache=!!this.props.cache;var a,o,e,r=this.tagName,r=mg[r];"undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===r?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(r),this.__dom||(t.innerHTML=this.__genHtml(r),this.__dom=t.querySelector(r))),this.__defs=this.dom.__defs||Wf.getInstance(this.__uuid),this.width&&this.height||(r=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(r.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(r.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=Et.CANVAS):"svg"===this.tagName?this.__renderMode=Et.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",_e),this.__renderMode=Et.WEBGL,t.program=ye.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=ye.initShaders(t,Z1,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=ye.initShaders(t,Z1,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=ye.initShaders(t,Z1,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=ye.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.useProgram(t.program),t=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new q1(t)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof n&&this.dom.__root.destroy(),this.__eventCbList=(a=this.dom,o=n,e=[],vg.forEach(function(n){function t(t){var e=a.__root;if(e&&e instanceof o)if(-1<["touchend","touchcancel","touchmove"].indexOf(n)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}a.addEventListener(n,t),e.push([n,t])}),e),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,n=this.ctx,a=this.defs,o=this.width,s=this.height;if(!r){if(a.clear(),e)this.__checkRoot(i,o,s),this.__computeMeasure(i,n);else if(!this.__checkUpdate(i,n,o,s))return;we.measureText(),this.__checkReflow(o,s),i!==Et.CANVAS||this.props.noRender?i!==Et.SVG||this.props.noRender?i!==Et.WEBGL||this.props.noRender||(this.__clear(n,i),j1.renderWebgl(i,n,this)):(j1.renderSvg(i,a,this,e),(e=this.virtualDom).defs=a.value,this.dom.__vd?cd(this.dom,this.dom.__vd,e):this.dom.innerHTML=he.joinVirtualDom(e),this.dom.__vd=e,this.dom.__defs=a):(this.__clear(n,i),this.cache?j1.renderCacheCanvas(i,n,this):j1.renderCanvas(i,n,this)),Qp(t)&&t(),this.emit(Eo.REFRESH)}}},{key:"destroy",value:function(){this.__destroy();var e,t=this.dom;t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null);t=this.ctx;this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t===this.width&&e===this.height||(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r))}},{key:"addRefreshTask",value:function(t){var i,n=this,e=this.taskUp;this.isDestroyed||(e.length||(ts.nextFrame({__before:function(r){n.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){Jp(t)&&Qp(t.__before)&&t.__before(r)})},__after:function(e){n.isDestroyed||i.forEach(function(t){Jp(t)&&Qp(t.__after)?t.__after(e):Qp(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,i=this,n=this.taskCp;this.isDestroyed||(n.length||(ts.__nextFrameCp({__before:function(e){i.isDestroyed||(r=n.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),ed.check(i),ed.updateList.length&&ed.updateList.forEach(function(t){var e=t.shadowRoot;e instanceof qa&&(e=e.domParent);var r={};r[mp]=e,r[vp]=e.currentStyle,r[Ep]=fg,r[bp]=!0,r[xp]=t,r[Tp]=e.__config,i.__addUpdate(e,e.__config,i,i.__config,r)}))},__after:function(e){i.isDestroyed||(r.forEach(function(t){t.__after(e)}),ed.did())}}),this.__frameHook()),-1===n.indexOf(t)&&n.push(t))}},{key:"getTargetAtPoint",value:function(t,e,E){return function t(e,r,i,n,a){var o=e.__sx1,s=e.__sy1,l=e.offsetWidth,h=e.offsetHeight,c=e.matrixEvent,u=e.children,_=e.zIndexChildren,f=e.computedStyle,d=f[ep],f=f[gp];if(E||"none"!==d){if(Array.isArray(_)){for(var p=0,g=u.length;p<g;p++)u[p].__index__=p;for(var m=_.length-1;0<=m;m--){var v=_[m];if(!(v instanceof karas.Text)){var y=n.slice();y.push(v.__index__);var x=a.slice();if(x.push(m),x=t(v,r,i,y,x))return x}}}if(E||"none"!==f)return Q.pointInQuadrilateral(r,i,o,s,o+l,s,o+l,s+h,o,s+h,c)?{target:e,path:n,zPath:a}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,n=this.currentStyle,a=this.computedStyle;-1===["flex","block"].indexOf(n[ep])&&(a[ep]=n[ep]="block"),"absolute"===n[tp]&&(a[tp]=n[tp]="static"),n[np]=[e,eg],n[ap]=[r,eg],a[np]=e,a[ap]=r,t===Et.CANVAS||t===Et.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===Et.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,n){i=i[Gp];t===r?(i=r.__updateRoot)?(n[Ep]&&(i[Ep]|=n[Ep]),n[bp]&&(i[bp]=!0),n[vp]&&(i[Mp]=i[Mp]||[]).push((a(t={},vp,n[vp]),a(t,Ap,n[Ap]),a(t,yp,n[yp]),t))):r.__updateRoot=n:e.hasOwnProperty(Yp)?i.hasOwnProperty(e[Yp])?(r=i[e[Yp]],n[Ep]&&(r[Ep]|=n[Ep]),n[bp]&&(r[bp]=!0),n[vp]&&(r[Mp]=r[Mp]||[]).push((a(r={},vp,n[vp]),a(r,Ap,n[Ap]),a(r,yp,n[yp]),r))):we.error("Update process miss uniqueUpdateId"):(e[Yp]=Mg,i[Mg++]=n)}},{key:"__checkUpdate",value:function(l,h,t,e){var c=this,r=[],i=[],n={},a=[],o={},s=[],u=c.__updateRoot,_=c.__updateHash;u&&(c.__updateRoot=null,(m=Tg(l,c,u,i,r,n,a))&&c.__checkRoot(l,t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var g=Tg(l,c,_[f[d]],i,r,n,a,o,s),m=m||g;c.__reflowList=i,Mg=0,c.__updateHash=c.__config[Gp]={},a.forEach(function(t){delete t[Yp]}),s.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(c.__structs))});var v={};r.forEach(function(t){var e=t.__config,r=e[Yp],i=e[Dp];if(t!==c){if(v.hasOwnProperty(r))return;v[r]=!0}var n=t;if(t!==c&&(_[r][Cp]||Tr.isMeasureInherit(_[r][vp])))for(;i&&i!==c;){var a=i,o=a.__config[Yp],s=a.currentStyle;if(!(i.__config.hasOwnProperty(Yp)?(a=_[o][vp],v[o]=!0,!!Tr.measureInheritList(a).length):Tr.isMeasureInherit(s)))break;i=(n=i).domParent}n.__computeMeasure(l,h,function(t){t.__config.hasOwnProperty(Yp)&&(v[t.__config[Yp]]=!0)})});for(var y=0,x=f.length;y<x;y++)delete _[f[y]][Tp][Yp];return m}},{key:"__checkReflow",value:function(t,e){var S=this,r=this.__reflowList;if(r.length){for(var i,Q=this,n=[],tt={},a=bg=0,o=r.length;a<o;a++){var s=r[a],l=s.node,h=s.component,c=s.addDom,u=s.removeDom;if(l===this){i=!0;break}if((l=c&&l instanceof Ro?l.shadowRoot:l).hasOwnProperty("__uniqueReflowId")||(l.__uniqueReflowId=bg,tt[bg++]=s),function(t,e,r,i,n){if(!n||"absolute"!==r.currentStyle[tp]){var a=r;if(-1<["inline","inlineBlock","inline-block"].indexOf(a.currentStyle[ep])||-1<["inline","inlineBlock","inline-block"].indexOf(a.computedStyle[ep])){do{if((a=a.domParent)===t)return 1;if(Eg(a))return;if("absolute"===a.currentStyle[tp]||"absolute"===a.computedStyle[tp])return void Ag(a,e,i,n)}while(a&&(-1<["inline","inlineBlock","inline-block"].indexOf(a.currentStyle[ep])||-1<["inline","inlineBlock","inline-block"].indexOf(a.computedStyle[ep])));if(xg(a,!0))return void Ag(a,e,i,n)}var o,s=a.domParent;if(!Eg(s)){do{if(Eg(s))return}while(("flex"!==s.computedStyle[ep]&&"flex"!==s.currentStyle[ep]||(o=s),"absolute"!==s.currentStyle[tp]&&"absolute"!==s.computedStyle[tp])&&(!xg(s,!0)&&(s=s.domParent)));if((a=o?o:a)===t)return 1;for(s=a;s;){if("absolute"===s.currentStyle[tp]||"absolute"===s.computedStyle[tp]){if(s===t)break;if(xg(s))break;return void Ag(s,e,i,n)}s=s.domParent}if(a!==r)Ag(a,e,i,n);else if(n){var l=!0,h=r.prev,c=r.next;if(!(l=h&&-1<["inline","inline-block","inlineBlock"].indexOf(h.currentStyle[ep])||c&&-1<["inline","inline-block","inlineBlock"].indexOf(c.currentStyle[ep])?!1:l)){if((a=r.domParent)===t)return 1;Ag(a,e,!1,!0)}}}}}(Q,tt,l,h,c)){i=!0,c&&(this.__zIndexChildren=null);break}u&&n.push(s)}if(bg=0,this.__reflowList=[],i)return Hu.clearUniqueReflowId(tt),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){t=tt[t.__uniqueReflowId];return e.uniqueList.push(t),!0}},{uniqueList:n});var k=[],w=0,I=[],L=0;n.forEach(function(t){var e=t.node,r=t.component,i=t.addDom,n=t.removeDom,a=e.computedStyle,o=e.currentStyle,s=a[op],l=a[tp],h=a[ep],c="absolute"===l,u="absolute"===o[tp],_="none"===h,f="none"===o[ep];if(!_||!f){for(var d,p=e.domParent,g=p.__layoutData,t=g.x,m=g.y,a=g.h,h=p.width,v=p.computedStyle,g=e,y=(g=g.isShadowRoot?g.hostRoot:g).prev;y;){if(y instanceof qa||"absolute"!==y.computedStyle[tp]&&"none"!==y.computedStyle[ep]){m=y.y+y.outerHeight,d=!0;break}y=y.prev}n||(d||(m+=v[sp]+v[fp]+v[cp]),t+=v[lp]+v[dp]+v[up]);var x,E=e;if(!n)if(u){for(E=E.domParent;E&&E!==Q&&!ng(E);)if(E.parent)E=E.parent;else if(E.host)break;if(p.__layoutAbs(E=E||Q,null,e),i){g=p.__modifyStruct(Q,w);return w+=g[1],k.push(g),p.__updateStruct(Q.__structs),void(S.renderMode===Et.SVG&&Cg(p))}if(c)return void(r?(x=e.__modifyStruct(Q,w),w+=x[1],k.push(x),(l===o[tp]||"static"!==l&&"static"!==o[tp])&&s===o[op]||(p.__updateStruct(Q.__structs),S.renderMode===Et.SVG&&Cg(p))):(_||f)&&(e.__zIndexChildren=null,x=e.__modifyStruct(Q,w),w+=x[1],k.push(x)));p.__updateStruct(Q.__structs),S.renderMode===Et.SVG&&Cg(p)}else{if(e.__layout({x:t,y:m,w:h,h:a}),m+=e.outerHeight,r)E=e;else for(E=E.domParent;E&&E!==Q&&!ng(E);)if(E.parent)E=E.parent;else if(E.host)break;E=E||Q,e instanceof q_&&e.__layoutAbs(E,{x:t,y:m,w:h,h:a})}for(var b=e;b&&b!==Q;)if("relative"===(v=(b=b.domParent).computedStyle)[tp]){var A=b,M=A.ox,A=A.oy;M&&e.__offsetX(M),A&&e.__offsetY(A);break}for(var T=(e=e.isShadowRoot?e.hostRoot:e).next;T&&!T.hasOwnProperty("__uniqueReflowId");){if("absolute"!==T.computedStyle[tp]){var C=m-T.y;if(C)for(;T&&!T.hasOwnProperty("__uniqueReflowId");){var R=T,O=(R=R instanceof Ro?R.shadowRoot:R).computedStyle;"absolute"!==O[tp]&&"none"!==O[ep]&&R.__offsetY(C,!0,_g),T=T.next}break}T=T.next}p.hasOwnProperty("__uniqueMergeOffsetId")||u&&_||(p.__uniqueMergeOffsetId=L++,I.push(p)),i||n?(n=p.__modifyStruct(Q,w),w+=n[1],k.push(n),S.renderMode===Et.SVG&&Cg(p)):r?(r=e.__modifyStruct(Q,w),w+=r[1],k.push(r),(l===o[tp]||"static"!==l&&"static"!==o[tp])&&s===o[op]||(e.domParent.__updateStruct(Q.__structs),S.renderMode===Et.SVG&&Cg(e.domParent))):(_||f)&&(e.__zIndexChildren=null,f=e.__modifyStruct(Q,w),w+=f[1],k.push(f))}});var et=[];I.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var e,r,i=t.flowChildren,n=t.absChildren,a=[],o=[],s=i.length,l=0;l<s;l++){var h=i[l],c=(h=h instanceof Ro?h.shadowRoot:h)instanceof Eu;!e&&c&&h.hasOwnProperty("__uniqueReflowId")&&(e=!0,r=l);var u=c&&h.currentStyle,_=c&&"inline"===u[ep],f=c&&-1<["inlineBlock","inline-block"].indexOf(u[ep]),d=h;if(!c||_||f){if(a.length&&o.length&&e){var p=Hu.getMergeMarginTB(o,a);if(p)for(var g=Math.max(r,l-a.length+1);g<s;g++)i[g].__offsetY(p,!0,_g)}o=[],a=[]}if(c&&!_){var m,v,y,x=c&&"none"===u[ep],E=void 0;if(!x&&h.flowChildren&&0===h.flowChildren.length&&(m=(y=h.computedStyle)[sp],v=y[hp],f=y[cp],_=y[_p],c=y[ap],u=y[fp],y=y[pp],f<=0&&_<=0&&c<=0&&u<=0&&y<=0&&(a.push(v),o.push(m),E=!0)),x||E){if(l===s-1){var b=Hu.getMergeMarginTB(o,a);if(b)for(var A=Math.max(r,l-a.length+1);A<s;A++)i[A].__offsetY(b,!0,_g)}}else{E=h.computedStyle,h=E[sp],E=E[hp];if(a.length&&(o.push(h),e)){var M=Hu.getMergeMarginTB(o,a);if(M)for(var T=Math.max(r,l-a.length+1);T<s;T++)i[T].__offsetY(M,!0,_g)}o=[],a=[E]}}}var C=t.currentStyle,R=C[ap],O=t===Q||t.isShadowRoot||"absolute"===C[tp]||"relative"===C[tp];if(R[1]===tg&&d){var S,R=t.height+t.computedStyle[cp],k=d.y+d.outerHeight-t.y-R;if(k){t.__resizeY(k,_g);for(var w=0,I=n.length;w<I;w++){var L=n[w],D=L.currentStyle,P=D[J1],N=D[Q1],D=D[ap];if(P[1]===tg)if(N[1]===tg)for(var F=L.prev;F;){var B=F,G=(B=B instanceof Ro?B.shadowRoot:B)instanceof Eu,Y=G&&B.currentStyle;if(!(G&&"absolute"===Y[tp])){B=B.y+B.outerHeight-L.y;B&&L.__offsetY(B,!0,_g);break}F=F.prev}else N[1]===eg?L.__offsetY(k,!0,_g):N[1]===rg&&(H=(1-.01*N[0])*k,L.__offsetY(H,!0,_g));else if(P[1]===rg)if(O){var H=.01*P[0]*k;L.__offsetY(H,!0,_g)}else{if(!S)for(S=t.domParent;S&&S!==Q&&!S.isShadowRoot;){var W=S.currentStyle;if("absolute"===W[tp]||"relative"===W[tp])break;S=S.domParent}S.currentStyle[ap][1]!==eg&&(P=.01*P[0]*k,L.__offsetY(P,!0,_g))}if(D[1]===rg)if(O)t.__layoutAbs(t,null,L);else{if(!S)for(S=t.domParent;S&&S!==Q&&!S.isShadowRoot;){var U=S.currentStyle;if("absolute"===U[tp]||"relative"===U[tp])break;S=S.domParent}et.push([t,S,L])}}return void Hu.offsetAndResizeByNodeOnY(t,Q,tt,k,et)}}for(var X=0,V=n.length;X<V;X++){var K=n[X],z=K.currentStyle,$=z[J1],z=z[Q1];if($[1]===tg&&z[1]===tg)for(var j=K.prev;j;){var Z=j,q=(Z=Z instanceof Ro?Z.shadowRoot:Z)instanceof Eu,J=q&&Z.currentStyle;if(!(q&&"absolute"===J[tp])){Z=Z.y+Z.outerHeight-K.y;Z&&K.__offsetY(Z,!0,_g);break}j=j.prev}}}),et.forEach(function(t){t[0].__layoutAbs(t[1],null,t[2])});var _=0,f=0,d=!0,p=Q.__structs;if(k.forEach(function(t){var e=xt(t,2),t=e[0],e=e[1];if(d)d=!1,f=t[zp]+(t[$p]||0)+1,_+=e;else{for(var r=t[zp]+(t[$p]||0)+1+_,i=f;i<r;i++)p[i][zp]+=_;f=r,_+=e}}),_)for(var g=f,m=p.length;g<m;g++)p[g][zp]+=_;Hu.clearUniqueReflowId(tt)}}},{key:"__computeMeasure",value:function(e,r){_n.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},ts.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===Et.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===Et.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),n}(),ar=g.STYLE_KEY,Sg=ar.STROKE_WIDTH,kg=ar.BOX_SHADOW,wg=he.isNil;function Ig(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function Lg(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function Dg(t){return t<0?t=0:1<t&&(t=1),t}function Pg(t,e,r,i,n,a,o,s,l){var h,c,u,_,s=7<arguments.length&&void 0!==s?s:0,l=8<arguments.length&&void 0!==l?l:1;return(0<s||l<1)&&(3===o?(c=xt(Q.sliceBezier2Both([[t,e],n,a,[r,i]],s,l),4),t=(h=xt(c[0],2))[0],e=h[1],n=c[1],a=c[2],r=(h=xt(c[3],2))[0],i=h[1]):2===o?(c=xt(Q.sliceBezier2Both([[t,e],a,[r,i]],s,l),3),t=(h=xt(c[0],2))[0],e=h[1],a=c[1],r=(c=xt(c[2],2))[0],i=c[1]):1===o?(u=xt(Q.sliceBezier2Both([[t,e],n,[r,i]],s,l),3),t=(_=xt(u[0],2))[0],e=_[1],n=u[1],r=(_=xt(u[2],2))[0],i=_[1]):(t+=(u=Math.abs(t-r))*s,e+=(_=Math.abs(e-i))*s,r-=u*(1-l),i-=_*(1-l))),[t,e,r,i,n,a]}var ur=function(){t(T,L0);var s=e(T);function T(t,e){var r,i,n;if(_(this,T),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):wg(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):wg(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):wg(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):wg(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return Dg(parseFloat(t)||0)});for(var a=r.__start.length;a<r.__x1.length;a++)r.__start.push(0)}else wg(e.start)||(i=Dg(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return Dg(t=isNaN(t)?1:t)});for(var o=r.__end.length;o<r.__x1.length;o++)r.__end.push(1)}else wg(e.end)||(n=parseFloat(e.end),n=Dg(n=isNaN(n)?1:n),r.__end=r.__x1.map(function(){return n}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],wg(e.x1)||(r.__x1=parseFloat(e.x1)||0),wg(e.y1)||(r.__y1=parseFloat(e.y1)||0),wg(e.x2)||(r.__x2=parseFloat(e.x2)||0),wg(e.y2)||(r.__y2=parseFloat(e.y2)||0),wg(e.start)||(r.__start=Dg(parseFloat(e.start)||0)),wg(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=Dg(t)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return d(T,[{key:"buildCache",value:function(e,r,i){var n,a=this,o=this.width,s=this.height,l=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){(wg(l[t])||i)&&(n=!0,l[t]=Ig(a[t],e,o,h))}),["y1","y2"].forEach(function(t){(wg(l[t])||i)&&(n=!0,l[t]=Ig(a[t],r,s,h))}),["controlA","controlB"].forEach(function(t){(wg(l[t])||i)&&(n=!0,l[t]=function e(t,r,i,n,a,o){if(o){if(t)return t.map(function(t){return e(t,r,i,n,a)})}else if(t&&2<=t.length)return[r+t[0]*n,i+t[1]*a];return[]}(a[t],e,r,o,s,h))}),["start","end"].forEach(function(t){(wg(l[t])||i)&&(n=!0,l[t]=a[t])}),n}},{key:"render",value:function(h,t,c,e){var u=this,r=D(L(T.prototype),"render",this).call(this,h,t,c,e);if(r.break)return r;c=r.ctx;var _,i,n,a,o,s,l=r.sx3,f=r.sy3,d=r.stroke,p=r.strokeWidth,g=r.strokeDasharray,m=r.strokeDasharrayStr,v=r.strokeLinecap,y=r.strokeLinejoin,x=r.strokeMiterlimit,E=r.dx,b=r.dy,A=this.__cacheProps,M=this.isMulti;return this.buildCache(l,f)&&h===Et.SVG&&(_="",M?A.x1.forEach(function(t,e){var r=A.x2[e],i=A.y1[e],n=A.y2[e],a=A.controlA[e],o=A.controlB[e],s=A.start[e],l=A.end[e],e=Lg(a,o);0===s&&1===l||(t=(l=xt(Pg(t,i,r,i,a,o,e,s,l,A.len),6))[0],i=l[1],r=l[2],i=l[3],a=l[4],o=l[5]),_+=At.svgLine(t,i,r,n,a,o,e)}):(i=Lg(A.controlA,A.controlB),n=A.x1,a=A.y1,o=A.x2,s=A.y2,t=A.controlA,e=A.controlB,l=A.start,f=A.end,0===l&&1===f||(n=(f=xt(Pg(n,a,o,s,t,e,i,l,f,A.len),6))[0],a=f[1],o=f[2],s=f[3],t=f[4],e=f[5]),_=At.svgLine(n,a,o,s,t,e,i)),A.d=_),h===Et.CANVAS||h===Et.WEBGL?d.forEach(function(t,e){var r,i,n,a,o,s=p[e],l=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(u.__preSetCanvas(h,c,{stroke:t,strokeWidth:s,strokeDasharray:g[e],strokeLinecap:v[e],strokeLinejoin:y[e],strokeMiterlimit:x[e]}),l&&(c.strokeStyle=t.v[0]),c.beginPath(),M?A.x1.forEach(function(t,e){var r=A.x2[e],i=A.y1[e],n=A.y2[e],a=A.controlA[e],o=A.controlB[e],s=A.start[e],l=A.end[e],e=Lg(a,o);0===s&&1===l||(t=(l=xt(Pg(t,i,r,i,a,o,e,s,l,A.len),6))[0],i=l[1],r=l[2],i=l[3],a=l[4],o=l[5]),At.canvasLine(c,t,i,r,n,a,o,e,E,b)}):(r=Lg(A.controlA,A.controlB),i=A.x1,n=A.y1,a=A.x2,o=A.y2,s=A.controlA,e=A.controlB,l=A.start,t=A.end,0===l&&1===t||(i=(t=xt(Pg(i,n,a,o,s,e,r,l,t,A.len),6))[0],n=t[1],a=t[2],o=t[3],s=t[4],e=t[5]),At.canvasLine(c,i,n,a,o,s,e,r,E,b)),c.stroke(),c.closePath())}):h===Et.SVG&&d.forEach(function(t,e){var r=p[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),r=[["d",A.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];u.__propsStrokeStyle(r,m[e],v[e],y[e],x[e]),u.addGeom("path",r)}),r}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx3,e=this.__sy3,r=this.currentStyle,i=r[Sg],n=r[kg],a=this.isMulti,r=this.__cacheProps;this.buildCache(t,e);var e=r.x1,s=r.y1,l=r.x2,h=r.y2,c=r.controlA,u=r.controlB,_=D(L(T.prototype),"bbox",this),o=0;i.forEach(function(t){o=Math.max(t[0],o)});var n=xt(this.__spreadBbox(n),2),f=n[0],d=n[1];return f+=o,d+=o,a||(e=[e],l=[l],s=[s],h=[h],c=[c],u=[u]),e.forEach(function(t,e){var r,i=s[e],n=l[e],a=h[e],o=c[e],e=u[e];(wg(o)||o.length<2)&&(wg(e)||e.length<2)?(_[0]=Math.min(_[0],t-f),_[0]=Math.min(_[0],n-f),_[1]=Math.min(_[1],i-d),_[1]=Math.min(_[1],a-d),_[2]=Math.max(_[2],t+f),_[2]=Math.max(_[2],n+f),_[3]=Math.max(_[3],i+d),_[3]=Math.max(_[3],a+d)):wg(o)||o.length<2?(r=Q.bboxBezier(t,i,e[0],e[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-d),_[1]=Math.min(_[1],r[3]-d),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+d),_[3]=Math.max(_[3],r[3]+d)):wg(e)||e.length<2?(r=Q.bboxBezier(t,i,o[0],o[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-d),_[1]=Math.min(_[1],r[3]-d),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+d),_[3]=Math.max(_[3],r[3]+d)):(a=Q.bboxBezier(t,i,o[0],o[1],e[0],e[1],n,a),_[0]=Math.min(_[0],a[0]-f),_[0]=Math.min(_[0],a[2]-f),_[1]=Math.min(_[1],a[1]-d),_[1]=Math.min(_[1],a[3]-d),_[2]=Math.max(_[2],a[0]+f),_[2]=Math.max(_[2],a[2]+f),_[3]=Math.max(_[3],a[1]+d),_[3]=Math.max(_[3],a[3]+d))}),_}}]),T}(),Zt=g.STYLE_KEY,Ng=Zt.STROKE_WIDTH,Fg=Zt.BOX_SHADOW,Bg=he.isNil;function Gg(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Yg(t){return t<0?t=0:1<t&&(t=1),t}function Hg(t,e){var r=[],i=0,n=[];if(e)i=[],t.forEach(function(t){t=Hg(t);r.push(t.list),i.push(t.total),n.push([0].concat(t.increase))});else if(Array.isArray(t)){i=0,n.push(0);for(var a=0,o=0,s=t.length;o<s;o++){var l=t[o];if(Array.isArray(l)){a=o;break}}for(var h=t[a],c=a+1,u=t.length;c<u;c++){var _,f,d,p=t[c];Array.isArray(p)&&(2===p.length?(_=Math.abs(p[0]-h[0]),f=Math.abs(p[1]-h[1]),f=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(f),i+=f,n.push(i),h=p):4===p.length?(d=Q.bezierLength([h,[p[0],p[1]],[p[2],p[3]]],2),r.push(d),i+=d,n.push(i),h=[p[2],p[3]]):6===p.length&&(d=Q.bezierLength([h,[p[0],p[1]],[p[2],p[3]],[p[4],p[5]]],3),r.push(d),i+=d,n.push(i),h=[p[4],p[5]]))}}return{list:r,total:i,increase:n}}function Wg(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var n=r+(i-r>>1);return t[n]===e?n:t[n]>e?Wg(t,e,r,Math.max(n-1,r)):Wg(t,e,Math.min(n+1,i),i)}function Ug(t,e,r,i){var n=2<arguments.length&&void 0!==r?r:0,a=3<arguments.length&&void 0!==i?i:1;if(0===n&&1===a)return t;if(a<=n)return[];var o=0,s=t.length-2;0<n&&(o=Wg(e.increase,n*e.total,o,s)),a<1&&(s=Wg(e.increase,a*e.total,o,s)),t=he.clone(t);var l,h,c,u,_,f=1;return(a*=e.total)>e.increase[s]&&(r=t[s].slice(t[s].length-2),h=t[s+1],i=e.list[s],f=c=(a-e.increase[s])/i,2===h.length?(i=Math.abs(h[0]-r[0]),l=Math.abs(h[1]-r[1]),t[s+1]=[h[1]-(1-c)*i,h[1]-(1-c)*l]):4===h.length?(l=Q.sliceBezier([r,[h[0],h[1]],[h[2],h[3]]],c),t[s+1]=[l[1][0],l[1][1],l[2][0],l[2][1]]):6===h.length&&(u=Q.sliceBezier([r,[h[0],h[1]],[h[2],h[3]],[h[4],h[5]]],c),t[s+1]=[u[1][0],u[1][1],u[2][0],u[2][1],u[3][0],u[3][1]])),(n*=e.total)>e.increase[o]&&(h=t[o].slice(t[o].length-2),c=t[o+1],u=e.list[o],o===s&&1!==f&&(u*=f),e=(n-e.increase[o])/u,2===c.length?(u=Math.abs(c[0]-h[0]),_=Math.abs(c[1]-h[1]),t[o]=[h[0]+e*u,h[1]+e*_]):4===c.length?(_=Q.sliceBezier([[c[2],c[3]],[c[0],c[1]],h],1-e).reverse(),t[o]=_[0],t[o+1]=[_[1][0],_[1][1],_[2][0],_[2][1]]):6===c.length&&(e=Q.sliceBezier([[c[4],c[5]],[c[2],c[3]],[c[0],c[1]],h],1-e).reverse(),t[o]=e[0],t[o+1]=[e[1][0],e[1][1],e[2][0],e[2][1],c[4],c[5]])),s<t.length-2&&(t=t.slice(0,s+2)),t=0<o?t.slice(o):t}var Xg=function(){t(l,L0);var s=e(l);function l(t,e){var r,i,n;if(_(this,l),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return Yg(parseFloat(t)||0)});for(var a=r.__start.length;a<r.__points.length;a++)r.__start.push(0)}else Bg(e.start)||(i=Yg(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return Yg(t=isNaN(t)?1:t)});for(var o=r.__end.length;o<r.__points.length;o++)r.__end.push(1)}else Bg(e.end)||(n=parseFloat(e.end),n=Yg(n=isNaN(n)?1:n),r.__end=r.__points.map(function(){return n}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,Bg(e.start)||(r.__start=Yg(parseFloat(e.start)||0)),Bg(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=Yg(t));return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return d(l,[{key:"__getPoints",value:function(a,o,s,l,t,h){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(h){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var i=[],n=0;n<r;n++)n%2==0?i.push(a+t[n]*s):i.push(o+t[n]*l);return i}})}},{key:"buildCache",value:function(e,r){var t,i,n,a=this,o=this.width,s=this.height,l=this.points,h=this.controls,c=this.start,u=this.end,_=this.__cacheProps,f=this.isMulti;return Bg(_.points)&&(t=!0,_.points=f?l.map(function(t){if(Array.isArray(t))return a.__getPoints(e,r,o,s,t)}):this.__getPoints(e,r,o,s,l)),Bg(_.controls)&&(t=!0,_.controls=f?h.map(function(t){return Array.isArray(t)?a.__getPoints(e,r,o,s,t,!0):t}):this.__getPoints(e,r,o,s,h,!0)),Bg(_.start)&&(i=!0,_.start=c),Bg(_.end)&&(i=!0,_.end=u),t&&(u=_.points,n=_.controls,_.list2=f?u.filter(function(t){return Array.isArray(t)}).map(function(t,e){var r=n[e];if(Array.isArray(t))return t.map(function(t,e){return e?Gg(t,r&&r[e-1]):t})}):u.filter(function(t){return Array.isArray(t)}).map(function(t,e){return e?Gg(t,n[e-1]):t}),_.len=Hg(_.list2,f)),(t||i)&&(_.list=f?_.list2.map(function(t,e){if(Array.isArray(t)){var r=_.len;return Ug(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},_.start[e],_.end[e])}}):Ug(_.list2,_.len,_.start,_.end)),t||i}},{key:"render",value:function(t,e,r,i){i=D(L(l.prototype),"render",this).call(this,t,e,r,i);return i.break||(this.buildCache(i.sx3,i.sy3),r=i.ctx,this.__renderPolygon(t,r,i)),i}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t,e,r,i,n,u,a,_,f,o,d;return this.__bbox||(t=this.__sx3,e=this.__sy3,r=(n=this.currentStyle)[Ng],o=n[Fg],i=this.isMulti,n=this.__cacheProps,this.buildCache(t,e),u=D(L(l.prototype),"bbox",this),a=0,r.forEach(function(t){a=Math.max(t[0],a)}),o=xt(this.__spreadBbox(o),2),_=o[0],f=o[1],_+=a,f+=a,o=n.points,d=n.controls,i||(o=[o],d=[d]),o.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=d[e]||[],e=xt(t[0],2),i=e[0],n=e[1],a=1,o=t.length;a<o;a++){var s=xt(t[a],2),l=s[0],h=s[1],c=r[a-1];c&&4===c.length?(s=Q.bboxBezier(i,n,c[0],c[1],c[2],c[3],l,h),u[0]=Math.min(u[0],s[0]-_),u[1]=Math.min(u[1],s[1]-f),u[2]=Math.max(u[2],s[2]+_),u[3]=Math.max(u[3],s[3]+f)):c&&2===c.length?(c=Q.bboxBezier(i,n,c[0],c[1],l,h),u[0]=Math.min(u[0],c[0]-_),u[1]=Math.min(u[1],c[1]-f),u[2]=Math.max(u[2],c[2]+_),u[3]=Math.max(u[3],c[3]+f)):(u[0]=Math.min(u[0],i-_),u[1]=Math.min(u[1],n-f),u[2]=Math.max(u[2],i+_),u[3]=Math.max(u[3],n+f)),i=l,n=h}}),this.__bbox=u),this.__bbox}}]),l}(),Jt=function(){t(o,Xg);var r=e(o);function o(t,e){return _(this,o),r.call(this,t,e)}return d(o,[{key:"__getPoints",value:function(t,e,r,i,n,a){n=D(L(o.prototype),"__getPoints",this).call(this,t,e,r,i,n,a);return a||n.push(n[0]),n}}]),o}(),F=g.STYLE_KEY,Vg=F.STROKE_WIDTH,Kg=F.BOX_SHADOW,zg=he.isNil,$g=Q.sectorPoints;function jg(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var $t=function(){t(M,L0);var r=e(M);function M(t,e){return _(this,M),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return jg(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return jg(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return jg(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,zg(e.begin)||(t.__begin=jg(e.begin,0)),zg(e.end)||(t.__end=jg(e.end,0)),zg(e.r)||(t.__r=jg(e.r,1)),zg(e.edge)||(t.__edge=!!e.edge),zg(e.closure)||(t.__closure=!!e.closure)),t}return d(M,[{key:"buildCache",value:function(i,n,t){var e,a=this.width,r=this.begin,o=this.end,s=this.r,l=this.edge,h=this.closure,c=this.__cacheProps,u=this.isMulti;return(zg(c.begin)||t)&&(e=!0,c.begin=(r||0)%360),(zg(c.end)||t)&&(e=!0,c.end=(o||0)%360),(zg(c.r)||t)&&(e=!0,c.r=u?s.map(function(t){return t*a*.5}):s*a*.5),s=c.r,(zg(c.edge)||t)&&(e=!0,c.edge=l),(zg(c.closure)||t)&&(e=!0,c.closure=h),e&&(u?(c.list=[],c.sList=[],r.forEach(function(t,e){var r=zg(s[e])?.5*a:s[e],r=$g(i,n,r,parseFloat(t||0)%360,parseFloat(o[e]||0)%360),t=r.slice(0);h[e]?(r.push(r[0].slice(0)),l&&t.push(t[0].slice(0))):(r.unshift([i,n]),r.push([i,n]),l&&(t.unshift([i,n]),t.push([i,n]))),c.list.push(r),c.sList.push(t)})):(r=(u=$g(i,n,s,parseFloat(r||0),parseFloat(o||0))).slice(0),h?(u.push(u[0].slice(0)),l&&r.push(r[0].slice(0))):(u.unshift([i,n]),u.push([i,n]),l&&(r.unshift([i,n]),r.push([i,n]))),c.list=u,c.sList=r)),e}},{key:"render",value:function(t,e,r,i){e=D(L(M.prototype),"render",this).call(this,t,e,r,i);if(e.break)return e;this.buildCache(e.cx,e.cy),r=e.ctx;var n=e.fill,a=e.fillRule,o=e.stroke,s=e.strokeWidth,l=e.strokeDasharray,h=e.strokeDasharrayStr,c=e.strokeLinecap,u=e.strokeLinejoin,_=e.strokeMiterlimit,f=e.dx,d=e.dy,i=this.__cacheProps,p=i.list,g=i.sList,m=this.isMulti;if(n.length<=1&&o.length<=1){i={fill:n[0],fillRule:a[0],stroke:o[0],strokeWidth:s[0],strokeDasharray:l[0],strokeDasharrayStr:h[0],strokeLinecap:c[0],strokeLinejoin:u[0],strokeMiterlimit:_[0],dx:f,dy:d};this.__renderOneSector(t,r,m,p,g,i)}else{for(var v=0,y=n.length;v<y;v++){var x=n[v];x&&(x={fill:x,fillRule:a[v],dx:f,dy:d},this.__renderOneSector(t,r,m,p,g,x))}for(var E=0,b=o.length;E<b;E++){var A=o[E];A&&(A={stroke:A,strokeWidth:s[E],strokeDasharray:l[E],strokeDasharrayStr:h[E],strokeLinecap:c[E],strokeLinejoin:u[E],strokeMiterlimit:_[E],dx:f,dy:d},this.__renderOnePolygon(t,r,m,p,g,A))}}return e}},{key:"__renderOneSector",value:function(t,e,r,i,n,a){var o=a.fill,s=a.stroke,l=a.strokeWidth,h="conic"===o.k,c="conic"===s.k,u="radial"===o.k&&Array.isArray(o.v),_=0<l&&"radial"===s.k&&Array.isArray(s.v);h||c?(h?this.__conicGradient(t,e,i,r,a):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0),0<l&&c?we.warn("Stroke style can not use conic-gradient"):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0)):u||_?(u?this.__radialEllipse(t,e,i,r,a,"fill"):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0),0<l&&_?(we.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke=a.stroke.v[0],this.__drawPolygon(t,e,r,n,a,!1,!0)):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0)):(o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0,!1),0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,n,a,o,s,l){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,a,o,s,l),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<n&&(n=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(n,a,o,s,l),this.addGeom("path",n)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s,l,h;return this.__bbox||(l=this.isMulti,o=this.__cacheProps,t=this.__sx3,i=this.__sy3,e=this.width,n=this.height,h=(s=this.currentStyle)[Vg],s=s[Kg],this.buildCache(t=t+.5*e,e=i+.5*n),i=0,i=l?(r=0,o.r.forEach(function(t){r=Math.max(t,r)}),r):o.r,n=D(L(M.prototype),"bbox",this),a=0,h.forEach(function(t){a=Math.max(t[0],a)}),o=(l=xt(this.__spreadBbox(s),2))[0],h=l[1],s=t+i+(o+=a),l=e-i-(h+=a),h=e+i+h,n[0]=Math.min(n[0],t-i-o),n[1]=Math.min(n[1],l),n[2]=Math.max(n[2],s),n[3]=Math.max(n[3],h),this.__bbox=n),this.__bbox}}]),M}(),jt=g.STYLE_KEY,Zg=jt.STROKE_WIDTH,qg=jt.BOX_SHADOW,Jg=he.isNil;function Qg(t,e,r,i,n,a){var o=4<arguments.length&&void 0!==n?n:0,s=5<arguments.length&&void 0!==a?a:0;if(0===o||0===s)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];n=o*Q.H,a=s*Q.H;return[[t+o,e],[t+r-o,e],[t+r+n-o,e,t+r,e+s-a,t+r,e+s],[t+r,e+i-s],[t+r,e+i+a-s,t+r+n-o,e+i,t+r-o,e+i],[t+o,e+i],[t+o-n,e+i,t,e+i+a-s,t,e+i-s],[t,e+s],[t,e+s-a,t+o-n,e,t+o,e]]}function tm(t){return t=parseFloat(t),t=isNaN(t)?0:t}var m=function(){t(l,L0);var r=e(l);function l(t,e){return _(this,l),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map(tm)),Array.isArray(e.ry)&&(t.__ry=e.ry.map(tm))):(t.__rx=t.__ry=0,Jg(e.rx)||(t.__rx=tm(e.rx)),Jg(e.ry)||(t.__ry=tm(e.ry))),t}return d(l,[{key:"buildCache",value:function(r,i,t){var e,n,a=this.width,o=this.height,s=this.rx,l=this.ry,h=this.__cacheProps,c=this.isMulti;return(Jg(h.rx)||t)&&(e=!0,h.rx=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),(Jg(h.ry)||t)&&(e=!0,h.ry=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(l,.5)*o),e&&(l=h.rx,n=h.ry,h.list=c?l.map(function(t,e){return Qg(r,i,a,o,t,n[e])}):Qg(r,i,a,o,l,n)),e}},{key:"render",value:function(t,e,r,i){i=D(L(l.prototype),"render",this).call(this,t,e,r,i);return i.break||(this.buildCache(i.sx3,i.sy3),r=i.ctx,this.__renderPolygon(t,r,i)),i}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s;return this.__bbox||(t=this.__sx3,e=this.__sy3,r=this.width,i=this.height,s=(n=this.currentStyle)[Zg],o=n[qg],this.buildCache(t,e),n=D(L(l.prototype),"bbox",this),a=0,s.forEach(function(t){a=Math.max(t[0],a)}),o=(s=xt(this.__spreadBbox(o),2))[0],s=s[1],o+=a,s+=a,n[0]=Math.min(n[0],t-o),n[1]=Math.min(n[1],e-s),n[2]=Math.max(n[2],t+r+o),n[3]=Math.max(n[3],e+i+s),this.__bbox=n),this.__bbox}}]),l}(),b=g.STYLE_KEY,em=b.STROKE_WIDTH,rm=b.BOX_SHADOW,im=he.isNil;function nm(t){return t=parseFloat(t),t=isNaN(t)?1:t}var ar=function(){t(c,L0);var r=e(c);function c(t,e){return _(this,c),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map(nm):im(e.r)||(t.__r=nm(e.r))):(t.__r=1,im(e.r)||(t.__r=nm(e.r))),t}return d(c,[{key:"buildCache",value:function(e,r,t){var i=this.width,n=this.r,a=this.__cacheProps,o=this.isMulti;(im(a.r)||t)&&(o?(a.r=n.map(function(t){return t*i*.5}),a.list=a.r.map(function(t){return Q.ellipsePoints(e,r,t)})):(a.r=n*i*.5,a.list=Q.ellipsePoints(e,r,a.r)))}},{key:"render",value:function(t,e,r,i){i=D(L(c.prototype),"render",this).call(this,t,e,r,i);return i.break||(this.buildCache(i.cx,i.cy),r=i.ctx,this.__renderPolygon(t,r,i)),i}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s,l,h;return this.__bbox||(l=this.isMulti,o=this.__cacheProps,t=this.__sx3,i=this.__sy3,e=this.width,n=this.height,h=(s=this.currentStyle)[em],s=s[rm],this.buildCache(t=t+.5*e,e=i+.5*n),i=0,i=l?(r=0,o.r.forEach(function(t){r=Math.max(t,r)}),r):o.r,n=D(L(c.prototype),"bbox",this),a=0,h.forEach(function(t){a=Math.max(t[0],a)}),o=(l=xt(this.__spreadBbox(s),2))[0],h=l[1],s=t+i+(o+=a),l=e-i-(h+=a),h=e+i+h,n[0]=Math.min(n[0],t-i-o),n[1]=Math.min(n[1],l),n[2]=Math.max(n[2],s),n[3]=Math.max(n[3],h),this.__bbox=n),this.__bbox}}]),c}(),Zt=g.STYLE_KEY,am=Zt.STROKE_WIDTH,om=Zt.BOX_SHADOW,sm=he.isNil;function lm(t){return t=parseFloat(t),t=isNaN(t)?1:t}var F=function(){t(f,L0);var r=e(f);function f(t,e){return _(this,f),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(lm):sm(e.rx)||(t.__rx=[lm(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(lm):sm(e.ry)||(t.__ry=[lm(e.ry)])):(t.__rx=1,sm(e.rx)||(t.__rx=lm(e.rx)),t.__ry=1,sm(e.ry)||(t.__ry=lm(e.ry))),t}return d(f,[{key:"buildCache",value:function(r,i,t){var e,n,a=this.width,o=this.height,s=this.rx,l=this.ry,h=this.__cacheProps,c=this.isMulti;return(sm(h.rx)||t)&&(e=!0,h.rx=c?s.map(function(t){return t*a*.5}):s*a*.5),(sm(h.ry)||t)&&(e=!0,h.ry=c?l.map(function(t){return t*o*.5}):l*o*.5),e&&(l=h.rx,n=h.ry,h.list=c?l.map(function(t,e){return Q.ellipsePoints(r,i,t,n[e])}):Q.ellipsePoints(r,i,l,n)),e}},{key:"render",value:function(t,e,r,i){i=D(L(f.prototype),"render",this).call(this,t,e,r,i);return i.break||(this.buildCache(i.cx,i.cy),r=i.ctx,this.__renderPolygon(t,r,i)),i}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,t,e,i,n,a,o,s,l,h,c,u,_;return this.__bbox||(h=this.isMulti,r=this.__cacheProps,e=this.__sx3,s=this.__sy3,i=this.width,u=this.height,_=(t=this.currentStyle)[am],c=t[om],this.buildCache(t=e+.5*i,e=s+.5*u),o=i=0,o=h?(a=n=0,r.rx.forEach(function(t,e){n=Math.max(t,n),a=Math.max(o,r.ry[e])}),i=n,a):(i=r.rx,r.ry),s=D(L(f.prototype),"bbox",this),l=0,_.forEach(function(t){l=Math.max(t[0],l)}),h=(u=xt(this.__spreadBbox(c),2))[0],_=u[1],c=t+i+(h+=l),u=e-o-(_+=l),_=e+o+_,s[0]=Math.min(s[0],t-i-h),s[1]=Math.min(s[1],u),s[2]=Math.max(s[2],c),s[3]=Math.max(s[3],_),this.__bbox=s),this.__bbox}}]),f}(),hm={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},cm={os:"offset",e:"easing"},um={value:"v",options:"o"},_m={},fm={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},dm={};sr.DOM_KEY_SET.concat(sr.GEOM_KEY_SET).forEach(function(t){var e;hm.hasOwnProperty(t)?cm[hm[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),hm[t]=e,cm[e]=t)}),Object.keys(um).forEach(function(t){_m[um[t]]=t}),Object.keys(fm).forEach(function(t){dm[fm[t]]=t});var jt={fullCssProperty:hm,abbrCssProperty:cm,fullAnimate:um,abbrAnimate:_m,fullAnimateOption:fm,abbrAnimateOption:dm},pm=Xt.TYPE_VD,gm=Xt.TYPE_GM,mm=Xt.TYPE_CP,vm=he.isNil,ym=he.isFunction,xm=he.isPrimitive,Em=he.clone,bm=he.extend,Am=jt.abbrCssProperty,Mm=jt.abbrAnimateOption,Tm=jt.abbrAnimate;function Cm(i,n){i&&Object.keys(i).forEach(function(t){var e,r;0===t.indexOf("var-")?(e=t.slice(4),n.hasOwnProperty(e)&&(r=n[e],i["var-"+r]=i[t])):n.hasOwnProperty(t)&&(r=n[t],i[r]=i[t],delete i[t])})}function Rm(l,h){var t;l&&h&&(l.hasOwnProperty("vars")?(t=l.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&h.hasOwnProperty(e))for(var i=l,n=0,a=r.length;n<a;n++){var o=r[n];if(!i.hasOwnProperty(o)&&n!==a-1)return void we.error("Slot miss "+o);if(n===a-1){var s=h[e];if(void 0===s)return;ym(s)&&(s=s(i(o))),i[o]=s}else i=i[o]}})):Object.keys(l).forEach(function(t){if(0===t.indexOf("var-")){var e=l[t];if(e){var r=t.slice(4);if(r&&e.id&&h.hasOwnProperty(e.id)){var i=h[e.id];if(void 0!==i){var n=l;if(-1<r.indexOf(".")){for(var a=r.split("."),o=a.length,s=0;s<o-1;s++){if(!n[r=a[s]])return void we.warn("parseJson vars is not exist: "+e.id+", "+t+", "+a.slice(0,s).join("."));n=n[r]}r=a[o-1]}ym(i)&&(i=i(e)),n[r]=i}}}}}))}function Om(e,t,r,i,n){var a=4<arguments.length&&void 0!==n?n:{};if(xm(t)||t instanceof T||t instanceof Ro)return t;if(Array.isArray(t))return t.map(function(t){return Om(e,t,r,i,a)});var o=t.libraryId;if(!vm(o)){var s=a[o];if(!s)throw new Error("Link library miss id: "+o);!function(e,r){e.tagName=r.tagName,e.props=Em(r.props),e.children=r.children,e.library=r.library,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,i,n=e.init;n&&(i=(t=e.props=e.props||{}).style,bm(t,n),i&&(bm(i,n.style),t.style=i),e.init=null)}(t,s),t.libraryId=null}var l,h,c,u=t.library;Array.isArray(u)&&(a={},u.forEach(function(t){!function(t,e){var r=t.id;if(vm(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}(t,a)}),l=t,h=a,(c=i.vars)&&(l.hasOwnProperty("vars")?(_=l.vars,Array.isArray(_)||(_=[_]),Array.isArray(_)&&_.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&c.hasOwnProperty(e)&&"library"===r[0])for(var i=h,n=1,a=r.length;n<a;n++){var o,s,l=r[n];if(!i.hasOwnProperty(l)&&n!==a-1)return void we.error("Library slot miss "+l);n===a-1?(o=c[e],ym(o)&&(o=o(i(l))),s=i[l],i[l]=1===n?Object.assign({id:s.id,tagName:s.tagName},o):o):i=i[l]}})):Object.keys(l).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=l[t],delete l[t],!e||(r=t.slice(12))&&e.id&&c.hasOwnProperty(e.id)&&(t=c[e.id],(t=ym(t)?t(e):t)&&t.tagName&&(h[r]=Object.assign({id:r},t))))})),t.library=null);var n=t.tagName,o=t.props,s=void 0===o?{}:o,u=t.children,_=void 0===u?[]:u,o=t.animate,u=void 0===o?[]:o;if(!n)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var f,d,o=s.style;return!1!==i.abbr&&Cm(o,Am),Rm(o,i.vars),Rm(s,i.vars),Rm(t,i.vars),n="$"===n.charAt(0)?e.createGm(n,s):/^[A-Z]/.test(n)?(t=Ro.getRegister(n),e.createCp(t,s,_.map(function(t){return t&&-1<[pm,gm,mm].indexOf(t.$$type)?t:Om(e,t,r,i,a)}))):e.createVd(n,s,_.map(function(t){return t&&-1<[pm,gm,mm].indexOf(t.$$type)?t:Om(e,t,r,i,a)})),u&&(Array.isArray(u)?(u.forEach(function(t){!1!==i.abbr&&Cm(t,Tm);var e=t.value,t=t.options;Array.isArray(e)&&e.length&&(d=!0,e.forEach(function(t){!1!==i.abbr&&Cm(t,Am),Rm(t,i.vars)})),t&&(!1!==i.abbr&&Cm(t,Mm),Rm(t,i.vars))}),d&&(f={animate:u,target:n})):(!1!==i.abbr&&Cm(u,Tm),s=u.value,_=u.options,Array.isArray(s)&&s.length&&(s.forEach(function(t){!1!==i.abbr&&Cm(t,Am),Rm(t,i.vars)}),f={animate:u,target:n}),_&&(!1!==i.abbr&&Cm(_,Mm),Rm(_,i.vars)))),f&&r.push(f),n}var Sm={parse:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=(e=he.clone(e)).fonts;n&&(n=!Array.isArray(n)?[n]:n).forEach(function(t){var e=t.fontFamily,t=t.data;e&&t&&bt.register(e,t)}),!1===e.abbr&&(i.abbr=!1),!1!==i.abbr&&we.warn("Abbr in json is deprecated"),we.isDom(r)||(i=r||{},r=null);var a=[],n=Om(t,e,a,i);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg");e=i.controller instanceof Md?i.controller:n.animateController;t.render(n,r),a.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(a),e.__playAuto()):(e.__records2=e.__records2.concat(a),e.init(e.__records2,e.__list2))}else a.length&&(n.__animateRecords={options:i,list:a,controller:i.controller instanceof Md?i.controller:null});return n},loadAndParse:function(n,e,r,i){var t=e.fonts,a=e.components,o=[],s=[];if(t&&(t=!Array.isArray(t)?[t]:t).forEach(function(t){t=t.url;t&&o.push(t)}),a&&(a=!Array.isArray(a)?[a]:a).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&n.Component.hasRegister(e)&&!i||r&&s.push(t)}),!o.length&&!s.length){a=Sm.parse(n,e,r,i);return i&&he.isFunction(i.callback)&&i.callback(a),a}function l(){var t;h===o.length+s.length&&(t=Sm.parse(n,e,r,i),i&&he.isFunction(i.callback)&&i.callback(t))}var h=0;n.inject.loadFont(o,function(){h+=o.length,l()}),n.inject.loadComponent(s.map(function(t){return t.url}),function(){h+=s.length,s.forEach(function(t){t=t.tagName;t&&window[t]&&!n.Component.hasRegister(t)&&n.Component.register(t,window[t])}),l()})},abbr:jt},b={css:_n,reset:sr,unit:C,font:bt,abbr:cr},Zt={Animation:Dl,Controller:Md,easing:cs,frame:ts},jt={level:Ca,change:Tr,Page:Tn,Cache:ga};L0.register("$line",ur),L0.register("$polyline",Xg),L0.register("$polygon",Jt),L0.register("$sector",$t),L0.register("$rect",m),L0.register("$circle",ar),L0.register("$ellipse",F);g={version:"0.61.2",render:function(t,e){if(!(t instanceof Og))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,n=arguments.length;i<n;i++)r.push(arguments[i]);return he.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new Og(t,e,r);if(wu.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:Xt.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:Xt.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:Xt.TYPE_CP}},parse:function(t,e,r){return Sm.parse(this,t,e,r)},loadAndParse:function(t,e,r){return Sm.loadAndParse(this,t,e,r)},mode:Et,Component:Ro,Node:T,Text:qa,Geom:L0,Xom:Eu,Dom:q_,Img:Hf,Root:Og,Event:Eo,util:he,inject:we,style:b,parser:Sm,animate:Zt,math:ct,builder:yo,updater:ed,refresh:jt,enums:g,set debug(t){ce.flag=!!t}};return yo.ref({Xom:Eu,Dom:q_,Img:Hf,Geom:L0,Component:Ro}),"undefined"!=typeof window?window.karas=g:"undefined"!=typeof self&&(self.karas=g),g});
//# sourceMappingURL=index.min.js.map
