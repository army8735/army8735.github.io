!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=N(r);return t=i?(t=N(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?a(e):t}}function P(t,e,r){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(r):e.value}})(t,e,r||t)}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var h={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,FILL:87,STROKE:88,STROKE_WIDTH:89,STROKE_DASHARRAY:90,STROKE_DASHARRAY_STR:91,STROKE_LINECAP:92,STROKE_LINEJOIN:93,STROKE_MITERLIMIT:94,FILL_RULE:95,MATRIX:96,BORDER_TOP:97,BORDER_RIGHT:98,BORDER_BOTTOM:99,BORDER_LEFT:100,TRANSLATE_PATH:101},l={};function c(t){return l[t]=l[t]||t.toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),l[t]}var u={};var p={},g={},v={};Object.keys(h).forEach(function(t){var e=h[t],t=c(p[e]=t);g[e]=t,v[t]=e});var m={STYLE_KEY:h,STYLE_R_KEY:p,STYLE_RV_KEY:g,STYLE_V_KEY:v,style2Lower:c,style2Upper:function(t){return u[t]=u[t]||t.replace(/([a-z\d_])([A-Z])/g,function(t,e,r){return e+"_"+r}).toUpperCase(),u[t]},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_OVERWRITE:5,UPDATE_KEYS:6,UPDATE_LIST:7,UPDATE_CONFIG:8,UPDATE_ADD_DOM:9,UPDATE_REMOVE_DOM:10},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_FRAME_CB:8,I_PLAY_CB:9,I_TARGET:10,I_ROOT:11,I_FRAMES:12,I_FRAMES_R:13,I_CURRENT_TIME:14,I_NEXT_TIME:15,I_STYLE:16,I_DURATION:17,I_ITERATIONS:18,I_FILL:19,I_PLAYBACK_RATE:20,I_PLAY_COUNT:21,I_PLAY_STATE:22,I_DESTROYED:23,I_START_TIME:24,I_FPS_TIME:25,I_EASING:26,I_ENTER_FRAME:27,I_DELAY:28,I_END_DELAY:29,I_KEYS:30,I_ORIGIN_STYLE:31,I_CURRENT_FRAMES:32,I_CURRENT_FRAME:33,I_SPF_LIMIT:34,I_FPS:35,I_DIRECTION:36,I_CAL_DIFF_TIME:37,I_FIRST_ENTER:38,I_STAY_BEGIN:39,I_STAY_END:40,I_IS2:41,I_END_TIME:42,I_NODE_CONFIG:43,I_ROOT_CONFIG:44,I_OUT_BEGIN_DELAY:45,I_TIME_STAMP:46}},y=m.STRUCT_KEY,E=y.STRUCT_NODE,x=y.STRUCT_INDEX,b=y.STRUCT_CHILD_INDEX,T=y.STRUCT_LV,A=m.NODE_KEY,M=A.NODE_IS_DESTROYED,O=A.NODE_STRUCT,R=function(){function t(){_(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return f(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[O]=(o(i={},E,this),o(i,x,t),o(i,b,r),o(i,T,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[O],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[M]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[M]}}]),t}(),rt={CANVAS:0,SVG:1,WEBGL:2},S={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,S.PERCENT]:/px$/i.test(t)?[e,S.PX]:/deg$/i.test(t)?[e,S.DEG]:/rem$/i.test(t)?[e,S.REM]:/vw$/i.test(t)?[e,S.VW]:/vh$/i.test(t)?[e,S.VH]:/em$/i.test(t)?[e,S.EM]:/vw$/i.test(t)?[e,S.VW]:/vh$/i.test(t)?[e,S.VH]:[e,S.NUMBER]}},bt={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375,padding:{1:1,f:.9}},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125,padding:{S:1,T:1,Z:1,c:1,f:.7,i:1,l:1,t:.9}},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06,padding:{f:.5}},simsun:{lhr:1.4,blr:1.06,padding:{f:.5}}},support:function(t){return this.info.hasOwnProperty(t)},register:function(t,e){var r=e||{},i=r.emSquare,n=void 0===i?2048:i,o=r.ascent,e=void 0===o?1854:o,i=r.descent,o=void 0===i?434:i,i=r.lineGap,i=void 0===i?67:i,r=r.padding,r=void 0===r?{}:r;this.info[t.toLowerCase()]={lhr:(e+o+i)/n,blr:e/n,padding:r}},addPadding:function(t,e){Object.assign(this.info[t.toLowerCase()].padding,e)}};bt.info["宋体"]=bt.info.simsun;var C={position:/(([-+]?[\d.]+[pxremvwh%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};function I(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function k(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var te={identity:I,multiply:function(t,e){if(k(t))return e;if(k(e))return t;for(var r=[],i=0;i<4;i++){var n=t[i]||0,o=t[i+4]||0,a=t[i+8]||0,s=t[i+12]||0;r[i]=n*e[0]+o*e[1]+a*e[2]+s*e[3],r[i+4]=n*e[4]+o*e[5]+a*e[6]+s*e[7],r[i+8]=n*e[8]+o*e[9]+a*e[10]+s*e[11],r[i+12]=n*e[12]+o*e[13]+a*e[14]+s*e[15]}return r},calPoint:function(t,e){var r=(p=Qt(t,4))[0],i=p[1],n=p[2],o=p[3];if(void 0===o&&(o=1),!e||k(e))return[r,i,n,o];if(16!==e.length)return n=Qt(e,6),g=n[0],a=n[1],o=n[2],e=n[3],[g*r+o*i+n[4],a*r+e*i+n[5]];var n=n||0,a=Qt(e,16),s=a[0],h=a[1],l=a[2],c=a[3],u=a[4],_=a[5],f=a[6],d=a[7],e=a[8],t=a[9],p=a[10],g=a[11];return[r*s+i*u+n*e+a[12],r*h+i*_+n*t+a[13],r*l+i*f+n*p+a[14],o*=r*c+i*d+n*g+a[15]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length)return function(t){var e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];var r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0==r)return I();r=1/r;for(var i=[],n=0;n<16;n++)i[n]=e[n]*r;return i}(t);var e=Qt(t,6),r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5];return 1===r&&0===i&&0===n&&1===o&&0===a&&0===s||0==(e=r*o-i*n)?t:[o/e,-i/e,-n/e,r/e,(n*s-o*a)/e,(i*a-r*s)/e]},isE:k,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}};var w={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},L=4*(Math.sqrt(2)-1)/3,D=w.crossProduct,F=te.calPoint,B=te.isE,Y=m.STYLE_KEY,H=Y.WIDTH,G=Y.HEIGHT,W=Y.TRANSFORM_ORIGIN;function U(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function X(t,e,r){for(var i=Qt(r[0],2),n=i[0],o=i[1],i=Qt(r[0],2),a=i[0],s=i[1],h=r.length,l=1;l<h;l++)var c=Qt(r[l],2),u=c[0],c=c[1],n=Math.max(n,u),o=Math.max(o,c),a=Math.min(a,u),s=Math.min(s,c);if(t<a||e<s||n<t||o<e)return!1;for(var _=0,f=r.length;_<f;_++){var d=Qt(r[_],2),p=d[0],g=d[1],v=Qt(r[(_+1)%f],2),d=v[0],v=v[1];if(D(d-p,v-g,t-p,e-g)<0)return!1}return!0}function V(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function K(t,e){var r=Qt(t,4),i=r[0],n=r[1],o=r[2],a=r[3],s=Qt(e,4),t=s[0],r=s[1],e=s[2],s=s[3];return!(e<=i||s<=n||o<=t||a<=r)}function z(t,e,r){var i=r.matrix,n=void 0===i?[1,0,0,1,0,0]:i,o=r.computedStyle,a=void 0===o?{}:o,i=a[H],r=a[G],o=a[W],a=Qt(o=void 0===o?[.5*i,.5*r]:o,2),o=a[0],a=a[1],n=Qt(F([t*i-o,e*r-a],n),2);return[(t=n[0])+o,(e=n[1])+a]}function j(t){return t*Math.PI/180}function $(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function Z(t,e,r){var i=t,n=(2*e+r)/3,t=(e+2*r)/3;return(i(e)+3*i(n)+3*i(t)+i(r))*(r-e)/8}function q(e,r){return function t(e,r,i,n){var o=3<arguments.length&&void 0!==n?n:.001,a=e,s=(r+i)/2,h=Z(a,r,i),n=Z(a,r,s),e=Z(a,s,i),h=n+e-h;return Math.abs(h)<=15*o?n+e+h/15:t(a,r,s,o/2)+t(a,s,i,o/2)}(function(t){return $(J(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function J(t,e,r,i){i=3<arguments.length&&void 0!==i?i:1;return 2===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,n=(h=Qt(e,3))[0],o=h[1],a=h[2],s=(l=Qt(n,2))[0],r=l[1],e=Qt(o,2),h=e[0],n=e[1],o=(l=Qt(a,2))[0],e=l[1],a=0,l=0,l=0===i?(a=Math.pow(1-t,2)*s+2*t*(1-t)*h+Math.pow(t,2)*o,Math.pow(1-t,2)*r+2*t*(1-t)*n+Math.pow(t,2)*e):1===i?(a=2*(1-t)*(h-s)+2*t*(o-h),2*(1-t)*(n-r)+2*t*(e-n)):2===i?(a=2*(o-2*h+s),2*(e-2*n+r)):a=0;return[a,l]}(t,e,i):3===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,n=(c=Qt(e,4))[0],o=c[1],a=c[2],s=c[3],h=(u=Qt(n,2))[0],l=u[1],r=Qt(o,2),e=r[0],c=r[1],u=(n=Qt(a,2))[0],o=n[1],r=Qt(s,2),a=r[0],n=r[1],s=0,r=0,r=0===i?(s=Math.pow(1-t,3)*h+3*t*Math.pow(1-t,2)*e+3*(1-t)*Math.pow(t,2)*u+Math.pow(t,3)*a,Math.pow(1-t,3)*l+3*t*Math.pow(1-t,2)*c+3*(1-t)*Math.pow(t,2)*o+Math.pow(t,3)*n):1===i?(s=3*((1-t)*(1-t)*(e-h)+2*(1-t)*t*(u-e)+t*t*(a-u)),3*((1-t)*(1-t)*(c-l)+2*(1-t)*t*(o-c)+t*t*(n-o))):2===i?(s=6*(u-2*e+h)*(1-t)+6*(a-2*u+e)*t,6*(o-2*c+l)*(1-t)+6*(n-2*o+c)*t):3===i?(s=6*(a-3*u+3*e-h),6*(n-3*o+3*c-l)):s=0;return[s,r]}(t,e,i):void 0}function Q(e,r,t){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,a=function(t){return $(J(t,e,r))},s=t*i,h=i,l=h,c=0;c<n;c++){var u=Z(a,0,h)-s;if(Math.abs(u)<o)break;var _=$(J(h,e,r,1));if(h-=u*_/(u*$(J(h,e,r,2))+_*_),Math.abs(h-l)<o)break;l=h}return J(h,e,r,0)}function tt(t,e){var r=Qt(t,4),i=Qt(r[0],2),n=i[0],o=i[1],a=Qt(r[1],2),s=a[0],h=a[1],l=Qt(r[2],2),c=l[0],u=l[1],_=r[3],i=(s-n)*e+n,a=(h-o)*e+o,l=(c-s)*e+s,r=(u-h)*e+h,s=(l-i)*e+i,h=(r-a)*e+a;if(4===t.length){_=Qt(_,2);return[[n,o],[i,a],[s,h],[(((_[0]-c)*e+c-l)*e+l-s)*e+s,(((_[1]-u)*e+u-r)*e+r-h)*e+h]]}if(3===t.length)return[[n,o],[i,a],[s,h]]}var et={pointInPolygon:X,pointInQuadrilateral:function(t,e,r,i,n,o,a,s,h,l,c){if(!c||B(c))return r<=t&&i<=e&&t<=a&&e<=s;var u=Qt(F([r,i],c),4);r=u[0],i=u[1];var _=u[3],f=Qt(F([n,o],c),4);n=f[0],o=f[1];var u=f[3],f=Qt(F([h,l],c),4);h=f[0],l=f[1];var f=f[3],c=Qt(F([a,s],c),4);return a=c[0],s=c[1],_&&1!==_&&(r/=_,i/=_),u&&1!==u&&(n/=u,o/=u),f&&1!==f&&(h/=f,l/=f),(c=c[3])&&1!==c&&(a/=c,s/=c),X(t,e,[[r,i],[n,o],[a,s],[h,l]])},d2r:j,r2d:function(t){return 180*t/Math.PI},H:L,h:U,angleBySide:function(t,e,r){return r=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(r)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:V,triangleIncentre:function(t,e,r,i,n,o){var a=V(r,i,n,o),s=V(t,e,n,o),h=V(t,e,r,i);return[(a*t+s*r+h*n)/(a+s+h),(a*e+s*i+h*o)/(a+s+h)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,n=r*L,o=i===r?n:i*L;return[[t-r,e],[t-r,e-o,t-n,e-i,t,e-i],[t+n,e-i,t+r,e-o,t+r,e],[t+r,e+o,t+n,e+i,t,e+i],[t-n,e+i,t-r,e+o,t-r,e]]},sectorPoints:function t(e,r,i,n,o){if(o<n&&(n=(m=[o,n])[0],o=m[1]),n===o)return[];var a=[],s=Math.floor(n/90),h=Math.floor(o/90);if(s===h||h-s==1&&o%90==0){var l,c,u,_,f,d,p,g,v=U(j(Math.abs(n-o)))*i,m=Math.sqrt(Math.pow(i,2)+Math.pow(v,2)),v=Math.atan(v/i);s<90?(l=[e+Math.sin(j(n))*i,r-Math.cos(j(n))*i],c=v+j(n),_=[e+Math.sin(c)*m,r-Math.cos(c)*m],u=[e+Math.sin(j(o))*i,r-Math.cos(j(o))*i],c=j(o)-v,c=[e+Math.sin(c)*m,r-Math.cos(c)*m],a.push(l),a.push(_.concat(c).concat(u))):s<180?(l=[e+Math.cos(j(n-90))*i,r+Math.sin(j(n-90))*i],_=v+j(n-90),c=[e+Math.cos(_)*m,r+Math.sin(_)*m],u=[e+Math.cos(j(o-90))*i,r+Math.sin(j(o-90))*i],_=j(o-90)-v,_=[e+Math.cos(_)*m,r+Math.sin(_)*m],a.push(l),a.push(c.concat(_).concat(u))):s<270?(f=[e-Math.sin(j(n-180))*i,r+Math.cos(j(n-180))*i],d=v+j(n-180),g=[e-Math.sin(d)*m,r+Math.cos(d)*m],p=[e-Math.sin(j(o-180))*i,r+Math.cos(j(o-180))*i],d=j(o-180)-v,d=[e-Math.sin(d)*m,r+Math.cos(d)*m],a.push(f),a.push(g.concat(d).concat(p))):(f=[e-Math.cos(j(n-270))*i,r+Math.sin(j(n-270))*i],g=v+j(n-270),d=[e-Math.cos(g)*m,r+Math.sin(g)*m],p=[e-Math.cos(j(o-270))*i,r+Math.sin(j(o-270))*i],g=j(o-270)-v,m=[e-Math.cos(g)*m,r+Math.sin(g)*m],a.push(f),a.push(d.concat(m).concat(p)))}else{for(var y,E,x=s,b=[];x<=h;x++)0===x?(y=t(e,r,i,n,90),b.push(y)):1===x?(s===x||90<o)&&(y=t(e,r,i,n<90?90:n,180<o?180:o),b.push(y)):2===x?(s===x||180<o)&&(E=t(e,r,i,n<180?180:n,270<o?270:o),b.push(E)):3===x&&(s===x||270<o)&&(E=t(e,r,i,n<270?270:n,o),b.push(E));for(var a=b[0],T=1,A=b.length;T<A;T++)a.push(b[T][1])}return a},getRectsIntersection:function(t,e){if(!K(t,e))return null;var r=(a=Qt(t,4))[0],i=a[1],n=a[2],o=a[3],t=(s=Qt(e,4))[0],a=s[1],e=s[2],s=s[3];return[Math.max(r,t),Math.max(i,a),Math.min(n,e),Math.min(o,s)]},isRectsOverlap:K,isRectsInside:function(t,e){var r=(a=Qt(t,4))[0],i=a[1],n=a[2],o=a[3],t=(s=Qt(e,4))[0],a=s[1],e=s[2],s=s[3];return r<=t&&i<=a&&e<=n&&s<=o},calCoordsInNode:z,calPercentInNode:function(t,e,r){var i,n=(h=r.computedStyle)[H],o=h[G],a=(l=Qt(h[W],2))[0],s=l[1],h=Math.atan((o-s)/(n-a)),r=(l=Qt(z(1,1,r),2))[0],l=l[1],c=a<=r&&s<=l?(i=a===r?-Math.atan(1/0):Math.atan((l-s)/(r-a)))-h:a<=r&&l<s?(i=a===r?-Math.atan(1/0):Math.atan((s-l)/(r-a)))+h:r<a&&s<=l?(i=Math.atan((l-s)/(a-r)))-h:r<a&&l<s?(i=Math.atan((l-s)/(r-a)))<=h?i+Math.PI-h:-(c=Math.PI-i+h):0,h=Math.sqrt(Math.pow(t-a,2)+Math.pow(e-s,2)),t=a<=t&&s<=e?a===t?-Math.atan(1/0):Math.atan((e-s)/(t-a)):a<=t&&e<s?a===t?-Math.atan(1/0):-Math.atan((e-s)/(a-t)):t<a&&s<=e?Math.PI-Math.atan((e-s)/(a-t)):Math.atan((e-s)/(t-a))-Math.PI;return(t-=c)>Math.PI?(t-=Math.PI,[(a-h*Math.cos(t))/n,(s-h*Math.sin(t))/o]):t>.5*Math.PI?(t=Math.PI-t,[(a-h*Math.cos(t))/n,(s+h*Math.sin(t))/o]):0<=t?[(a+h*Math.cos(t))/n,(s+h*Math.sin(t))/o]:t>=.5*-Math.PI?(t=-t,[(a+h*Math.cos(t))/n,(s-h*Math.sin(t))/o]):t>=-Math.PI?(t=Math.PI+t,[(a-h*Math.cos(t))/n,(s-h*Math.sin(t))/o]):(t=-Math.PI-t,[(a-h*Math.cos(t))/n,(s+h*Math.sin(t))/o])},bboxBezier:function(t,e,r,i,n,o,a,s){return 4===arguments.length?[t,e,r,i]:6===arguments.length?(h=t,c=e,d=r,_=i,u=n,p=o,v=Math.min(h,u),m=Math.min(c,p),y=Math.max(h,u),E=Math.max(c,p),(d<v||_<m||y<d||E<_)&&(d=(l=1-(f=(h-d)/(h-2*d+u)))*l*h+2*l*f*d+f*f*u,p=(u=1-(f=(c-_)/(c-2*_+p)))*u*c+2*u*f*_+f*f*p,v=Math.min(v,d),m=Math.min(m,p),y=Math.min(y,d),E=Math.min(E,p)),[v,m,y,E]):8===arguments.length?(h=t,l=e,c=r,u=i,_=n,f=o,d=a,p=s,v=Math.min(h,d),m=Math.min(l,p),y=Math.max(h,d),E=Math.max(l,p),(c<v||u<m||y<c||E<u||_<v||f<m||y<_||E<f)&&(r=(t=l-2*u+f)*t-(e=3*u-l-3*f+p)*(-l+u),0<(o=(i=h-2*c+_)*i-(n=3*c-h-3*_+d)*(-h+c))&&(0<(a=(-i-(o=Math.sqrt(o)))/n)&&a<1&&(s=(s=1-a)*s*s*h+3*s*s*a*c+3*s*a*a*_+a*a*a*d,v=Math.min(v,s),y=Math.max(y,s)),0<(a=(-i+o)/n)&&a<1&&(g=(g=1-a)*g*g*h+3*g*g*a*c+3*g*a*a*_+a*a*a*d,v=Math.min(v,g),y=Math.max(y,g))),0<r&&(0<(d=(-t-(r=Math.sqrt(r)))/e)&&d<1&&(g=(g=1-d)*g*g*l+3*g*g*d*u+3*g*d*d*f+d*d*d*p,m=Math.min(m,g),E=Math.max(E,g)),0<(d=(-t+r)/e)&&d<1&&(p=(e=1-d)*e*e*l+3*e*e*d*u+3*e*d*d*f+d*d*d*p,m=Math.min(m,p),E=Math.max(E,p)))),[v,m,y,E]):void 0;var h,l,c,u,_,f,d,p,g,v,m,y,E},bezierLength:q,pointAtBezier:function(t,e,r,i,n){return Q(t,e,q(t,e,0,1),r,i,n)},pointAtBezierWithLength:Q,sliceBezier:tt,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=tt(t,r)),0<e&&(r<1&&(e/=r),t=tt(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,i){return 270<=i?(i=j(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=j(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=j(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=j(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var it={getConicGradientImage:function(a,s,h,t,e,l){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");h=Math.floor(h),t=Math.floor(t);for(var c=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),u=0;u<t;u++)for(var r=function(t){for(var e=function(t,e){t-=a,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,u),r=void 0,r=0;r<c.length&&c[r].angle<=e;r++);var i=c[r-1],n=c[r];if(!i||!n)return"continue";var o=(e-i.angle)/(n.angle-i.angle),n=n.color.map(function(t,e){return o*(t-i.color[e])+i.color[e]}),t=4*(t+u*h);l[t]=n[0],l[1+t]=n[1],l[2+t]=n[2],l[3+t]=Math.min(255,255*n[3])},i=0;i<h;i++)r(i);return l}};function nt(t){var r="";return t.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t?r+="blur(".concat(e,"px)"):"hue-rotate"===t?r+="hue-rotate(".concat(e,"deg)"):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||(r+="".concat(t,"(").concat(e,"%)"))}),r}var Tt={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var n=0,o=0,a=e.length;o<a;o++){var s=e[o];if(Array.isArray(s)){n=o;break}}t.moveTo(e[n][0]+r,e[n][1]+i);for(var h=n+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+i):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i,c[4]+r,c[5]+i))}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=0,r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)){e=r;break}}for(var o="M"+t[e][0]+","+t[e][1],a=e+1,s=t.length;a<s;a++){var h=t[a];Array.isArray(h)&&(2===h.length?o+="L"+h[0]+","+h[1]:4===h.length?o+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(o+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return o},canvasLine:function(t,e,r,i,n,o,a,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(o[0]+h,o[1]+l,a[0]+h,a[1],i+h,n+l),2):2===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,i+h,n+l),2):1===s?(t.quadraticCurveTo(o[0]+h,o[1]+l,i+h,n+l),2):(t.lineTo(i+h,n+l),1)},svgLine:function(t,e,r,i,n,o,a){return 3===a?"M"+t+","+e+"C"+n[0]+","+n[1]+" "+o[0]+","+o[1]+" "+r+","+i:2===a?"M"+t+","+e+"Q"+o[0]+","+o[1]+" "+r+","+i:1===a?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:nt,svgFilter:nt},ot=et.H,at=S.PX,st=S.PERCENT,ht=S.REM,lt=S.VW,ct=S.VH,ut=Tt.canvasPolygon,_t=Tt.svgPolygon,ft=m.STYLE_KEY,dt=ft.BORDER_LEFT_WIDTH,pt=ft.BORDER_TOP_WIDTH,gt=ft.BORDER_BOTTOM_WIDTH,vt=ft.PADDING_LEFT,mt=ft.PADDING_BOTTOM,yt=ft.PADDING_TOP,Et=ft.BORDER_TOP_LEFT_RADIUS,At=ft.BORDER_TOP_RIGHT_RADIUS,Mt=ft.BORDER_BOTTOM_LEFT_RADIUS,Ot=ft.BORDER_BOTTOM_RIGHT_RADIUS,Rt=ft.FONT_SIZE;function St(t,e,r,i,n,o,a,s){var h=1,l=1,c=1;t:for(var u=o;n<=u;u--)for(var _=s;a<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+i)%f)continue}if(1<r)if(u<(e+i)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function Ct(t,e,r,i,n,o){var a=n-e,s=i-r,r=r-e,e=n-i;if("dotted"===t)return St(a,r,e,s,o,o,Math.max(1,.25*o),2*o);n=St(a,r,e,s,o,3*o,Math.max(1,.25*o),2*o),i=n.n,t=n.ps,n=n.pd;return 1===i?St(a,r,e,s,o,o,Math.max(1,.25*o),2*o):{n:i,ps:t,pd:n}}function It(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=n+p-(n-i),I=o-d+(a-o),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[1][0]<C?k.push(Y):Y[0][0]>I?L.push(Y):Y[1][0]>I&&Y[0][0]<C?(P=C<n?s+Math.tan(e)*(C-i):h,F=o<I?s+Math.tan(r)*(a-I):h,k.push([Y[0],[C,s],[C,P],Y[3]]),C<I&&(n<C&&I<o?w.push([[C,s],[I,s],[I,h],[C,h]]):n<C?(w.push([[C,s],[o,s],[o,h],[C,h]]),w.push([[o,s],[I,s],[I,F],[o,h]])):I<o?(w.push([[C,s],[n,s],[n,h],[C,P]]),w.push([[n,s],[I,s],[I,h],[n,h]])):(w.push([[C,s],[n,s],[n,h],[C,P]]),w.push([[n,s],[o,s],[o,h],[n,h]]),w.push([[o,s],[I,s],[I,F],[o,h]]))),L.push([[I,s],Y[1],Y[2],[I,F]])):Y[1][0]>I?(B=o<I?s+Math.tan(r)*(a-I):h,w.push([Y[0],[I,s],[I,B],Y[3]]),L.push([[I,s],Y[1],Y[2],[I,B]])):Y[0][0]<C?(B=C<n?s+Math.tan(e)*(C-i):h,k.push([Y[0],[C,s],[C,B],Y[3]]),w.push([[C,s],Y[1],Y[2],[C,B]])):w.push(Y)}k.length&&(v=n-i<p&&t<g,_=Math.atan((n-i)/(h-s)),b=(x=(m=g)-(h-s))/(p-(n-i)),p=Qt((T=kt(k[0][0],k[0][1],C,E=s+g,y=m/p,m,!0,Math.tan(_)*m))[0],2),R=p[0],S=p[1],v&&(_=Qt((A=kt(k[0][3],k[0][2],C,E,b,x,!0,Math.tan(_)*x))[0],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=kt(t[0],t[1],C,E,y,m),v&&(i=kt(t[3],t[2],C,E,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=a-o<d&&t<f,t=Math.atan((a-o)/(h-s)),V=(X=(G=f)-(h-s))/(d-(a-o)),d=Qt((K=wt(L[J-1][0],L[J-1][1],I,U=s+f,W=G/d,G,!0,Math.tan(t)*G))[K.length-1],2),Z=d[0],q=d[1],H&&(t=Qt((z=wt(L[J-1][3],L[J-1][2],I,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=wt(t[0],t[1],I,U,W,G),H&&(i=wt(t[3],t[2],I,U,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),k.concat(w).concat(L)}function kt(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(-u+r)*n,u=Math.atan((-c+r)*n/(i-e)),c=r-Math.sin(u)*o/n,e=i-Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*o/n,i-Math.sin(l)*o):(f=Math.atan(t/(i-_)),h=r-Math.sin(f)*o/n,i-Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),f=f-o,o=u+o;return[[h,l],[r-Math.sin(f)*_/n,i-Math.cos(f)*_],[r-Math.sin(o)*_/n,i-Math.cos(o)*_],[c,e]]}function wt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(i-f)),_=r+Math.sin(u)*o/n,f=i-Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*o/n,i-Math.sin(c)*o):(h=Math.atan(t/(i-e)),l=r+Math.sin(h)*o/n,i-Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),u+=o,o=h-o;return[[_,f],[r+Math.sin(u)*e/n,i-Math.cos(u)*e],[r+Math.sin(o)*e/n,i-Math.cos(o)*e],[l,c]]}function Lt(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=h+g-(h-s),I=l-f+(c-l),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[2][1]<C?k.push(Y):Y[1][1]>I?L.push(Y):Y[2][1]>I&&Y[1][1]<C?(P=C<h?o+Math.tan(r)*(h-C):o,F=l<I?o+Math.tan(e)*(I-l):o,k.push([Y[0],Y[1],[a,C],[P,C]]),C<I&&(I<l&&h<C?w.push([[o,C],[a,C],[a,I],[o,I]]):h<C?(w.push([[o,h],[a,h],[a,l],[o,l]]),w.push([[o,l],[a,l],[a,I],[F,I]])):I<l?(w.push([[P,C],[a,C],[a,h],[o,h]]),w.push([[o,h],[a,h],[a,I],[o,I]])):(w.push([[P,C],[a,C],[a,h],[o,h]]),w.push([[o,h],[a,h],[a,l],[o,l]]),w.push([[o,l],[a,l],[a,I],[F,I]]))),L.push([[F,I],[a,I],Y[2],Y[3]])):Y[2][1]>I?(B=l<I?o+Math.tan(e)*(I-l):o,w.push([Y[0],Y[1],[a,I],[B,I]]),L.push([[B,I],[a,I],Y[2],Y[3]])):Y[1][1]<C?(B=C<h?o+Math.tan(r)*(h-C):o,k.push([Y[0],Y[1],[a,C],[B,C]]),w.push([[B,C],[a,C],Y[2],Y[3]])):w.push(Y)}k.length&&(v=h-s<g&&t<p,_=Math.atan((a-o)/(h-s)),b=(x=(m=g)-(h-s))/(p-(a-o)),p=Qt((T=Dt(k[0][1],k[0][2],E=a-p,C,y=m/p,m,!0,Math.tan(_)*m))[T.length-1],2),R=p[0],S=p[1],v&&(_=Qt((A=Dt(k[0][0],k[0][3],E,C,b,x,!0,Math.tan(_)*x))[A.length-1],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=Dt(t[1],t[2],E,C,y,m),v&&(i=Dt(t[0],t[3],E,C,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,2);if(v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=c-l<f&&t<d,t=Math.atan((a-o)/(c-l)),V=(X=(G=f)-(c-l))/(d-(a-o)),d=Qt((K=Nt(L[J-1][1],L[J-1][2],U=a-d,I,W=G/d,G,!0,Math.tan(t)*G))[0],2),Z=d[0],q=d[1],H&&(t=Qt((z=Nt(L[J-1][0],L[J-1][3],U,I,V,X,!0,Math.tan(t)*X))[0],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Nt(t[1],t[2],U,I,W,G),H&&(i=Nt(t[0],t[3],U,I,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,3);if(H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),k.concat(w).concat(L)}function Dt(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(u-r)*n,u=Math.atan((c-r)*n/(i-e)),c=r+Math.sin(u)*o/n,e=i-Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r+Math.cos(l)*o/n,i-Math.sin(l)*o):(f=Math.atan(t/(i-_)),h=r+Math.sin(f)*o/n,i-Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=f+t,f=r+Math.sin(o)*_/n,o=i-Math.cos(o)*_,t=u-t;return[[c,e],[r+Math.sin(t)*_/n,i-Math.cos(t)*_],[f,o],[h,l]]}function Nt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(f-i)),_=r+Math.sin(u)*o/n,f=i+Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*o/n,i+Math.sin(c)*o):(h=Math.atan(t/(e-i)),l=r+Math.sin(h)*o/n,i+Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=u-t,u=r+Math.sin(o)*e/n,o=i+Math.cos(o)*e,t=h+t;return[[l,c],[r+Math.sin(t)*e/n,i+Math.cos(t)*e],[u,o],[_,f]]}function Pt(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=n+p-(n-i),I=o-d+(a-o),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[2][0]<C?k.push(Y):Y[3][0]>I?L.push(Y):Y[2][0]>I&&Y[3][0]<C?(P=C<n?c-Math.tan(e)*(C-i):h,F=o<I?c-Math.tan(r)*(a-I):l,k.push([Y[0],[C,P],[C,c],Y[3]]),C<I&&(n<C&&I<o?w.push([[C,l],[I,l],[I,c],[C,c]]):n<C?(w.push([[C,l],[o,l],[o,c],[C,c]]),w.push([[o,l],[I,F],[I,c],[o,c]])):I<o?(w.push([[C,P],[n,l],[n,c],[C,c]]),w.push([[n,l],[I,l],[I,c],[n,c]])):(w.push([[C,P],[n,l],[n,c],[C,c]]),w.push([[n,l],[o,l],[o,c],[n,c]]),w.push([[o,l],[I,F],[I,c],[o,c]]))),L.push([[I,F],Y[1],Y[2],[I,c]])):Y[2][0]>I?(B=o<I?c-Math.tan(r)*(a-I):l,w.push([Y[0],[I,B],[I,c],Y[3]]),L.push([[I,B],Y[1],Y[2],[I,c]])):Y[3][0]<C?(B=C<n?c-Math.tan(e)*(C-i):l,k.push([Y[0],[C,B],[C,c],Y[3]]),w.push([[C,B],Y[1],Y[2],[C,c]])):w.push(Y)}k.length&&(v=n-i<p&&t<g,_=Math.atan((n-i)/(c-l)),b=(x=(m=g)-(c-l))/(p-(n-i)),p=Qt((T=Ft(k[0][3],k[0][2],C,E=c-g,y=m/p,m,!0,Math.tan(_)*m))[0],2),R=p[0],S=p[1],v&&(_=Qt((A=Ft(k[0][0],k[0][1],C,E,b,x,!0,Math.tan(_)*x))[0],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=Ft(t[3],t[2],C,E,y,m),v&&(i=Ft(t[0],t[1],C,E,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,4);if(v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=a-o<d&&t<f,t=Math.atan((a-o)/(c-l)),V=(X=(G=f)-(c-l))/(d-(a-o)),d=Qt((K=Bt(L[J-1][3],L[J-1][2],I,U=c-f,W=G/d,G,!0,Math.tan(t)*G))[K.length-1],2),Z=d[0],q=d[1],H&&(t=Qt((z=Bt(L[J-1][0],L[J-1][1],I,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Bt(t[3],t[2],I,U,W,G),H&&(i=Bt(t[0],t[1],I,U,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,5);if(H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),k.concat(w).concat(L)}function Ft(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(-u+r)*n,u=Math.atan((-c+r)*n/(e-i)),c=r-Math.sin(u)*o/n,e=i+Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*o/n,i+Math.sin(l)*o):(f=Math.atan(t/(_-i)),h=r-Math.sin(f)*o/n,i+Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),f=f-o,o=u+o;return[[h,l],[r-Math.sin(f)*_/n,i+Math.cos(f)*_],[r-Math.sin(o)*_/n,i+Math.cos(o)*_],[c,e]]}function Bt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(f-i)),_=r+Math.sin(u)*o/n,f=i+Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*o/n,i+Math.sin(c)*o):(h=Math.atan(t/(e-i)),l=r+Math.sin(h)*o/n,i+Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),u+=o,o=h-o;return[[_,f],[r+Math.sin(u)*e/n,i+Math.cos(u)*e],[r+Math.sin(o)*e/n,i+Math.cos(o)*e],[l,c]]}function Yt(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=h+g-(h-s),I=l-f+(c-l),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[3][1]<C?k.push(Y):Y[0][1]>I?L.push(Y):Y[3][1]>I&&Y[0][1]<C?(P=C<h?n-Math.tan(r)*(h-C):n,F=l<I?n-Math.tan(e)*(I-l):n,k.push([Y[0],Y[1],[P,C],[i,C]]),C<I&&(I<l&&h<C?w.push([[i,C],[n,C],[n,I],[i,I]]):h<C?(w.push([[i,C],[n,C],[n,l],[i,l]]),w.push([[i,l],[n,l],[F,I],[i,I]])):I<l?(w.push([[i,C],[P,C],[n,h],[i,h]]),w.push([[i,h],[n,h],[n,I],[i,I]])):(w.push([[i,C],[P,C],[n,h],[i,h]]),w.push([[i,h],[n,h],[n,l],[i,l]]),w.push([[i,l],[n,l],[F,I],[i,I]]))),L.push([[i,I],[F,I],Y[2],Y[3]])):Y[3][1]>I?(B=l<I?n-Math.tan(e)*(I-l):n,w.push([Y[0],Y[1],[B,I],[i,I]]),L.push([[i,I],[B,I],Y[2],Y[3]])):Y[1][1]<C?(B=C<h?n-Math.tan(r)*(h-C):n,k.push([Y[0],Y[1],[B,C],[i,C]]),w.push([[i,C],[B,C],Y[2],Y[3]])):w.push(Y)}k.length&&(v=h-s<g&&t<p,_=Math.atan((n-i)/(h-s)),b=(x=(m=g)-(h-s))/(p-(n-i)),p=Qt((T=Ht(k[0][0],k[0][3],E=i+p,C,y=m/p,m,!0,Math.tan(_)*m))[T.length-1],2),R=p[0],S=p[1],v&&(_=Qt((A=Ht(k[0][1],k[0][2],E,C,b,x,!0,Math.tan(_)*x))[A.length-1],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=Ht(t[0],t[3],E,C,y,m),v&&(i=Ht(t[1],t[2],E,C,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,6);if(v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=c-l<f&&t<d,t=Math.atan((n-i)/(c-l)),V=(X=(G=f)-(c-l))/(d-(n-i)),d=Qt((K=Gt(L[J-1][0],L[J-1][3],U=i+d,I,W=G/d,G,!0,Math.tan(t)*G))[0],2),Z=d[0],q=d[1],H&&(t=Qt((z=Gt(L[J-1][1],L[J-1][2],U,I,V,X,!0,Math.tan(t)*X))[0],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Gt(t[0],t[3],U,I,W,G),H&&(i=Gt(t[1],t[2],U,I,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,7);if(H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),k.concat(w).concat(L)}function Ht(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(r-u)*n,u=Math.atan((r-c)*n/(i-e)),c=r-Math.sin(u)*o/n,e=i-Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*o/n,i-Math.sin(l)*o):(f=Math.atan(t/(i-_)),h=r-Math.sin(f)*o/n,i-Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=f+t,f=r-Math.sin(o)*_/n,o=i-Math.cos(o)*_,t=u-t;return[[c,e],[r-Math.sin(t)*_/n,i-Math.cos(t)*_],[f,o],[h,l]]}function Gt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(r-u)*n,u=Math.atan((r-_)*n/(f-i)),_=r-Math.sin(u)*o/n,f=i+Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r-Math.cos(c)*o/n,i+Math.sin(c)*o):(h=Math.atan(t/(e-i)),l=r-Math.sin(h)*o/n,i+Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=u-t,u=r-Math.sin(o)*e/n,o=i+Math.cos(o)*e,t=h+t;return[[l,c],[r-Math.sin(t)*e/n,i+Math.cos(t)*e],[u,o],[_,f]]}function Wt(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Ut=[Et,At,Ot,Mt];var Xt={calPoints:function(t,e,r,i,n,o,a,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var e=0===_||2===_?Ct(e,n,o,a,s,t):Ct(e,h,l,c,u,t),g=e.n,v=e.ps,m=e.pd;if(1<g){for(var y=0;y<g;y++){var E=y===g-1,x=void 0,b=void 0,T=void 0,A=(x=0===_||2===_?y?n+v*y+m*y:n:y?h+v*y+m*y:h)+v;0===_?A<=o?E?p.push([[n,h],[s,h],[a,l],[o,l]]):(b=h+(x-n)*Math.tan(r),T=h+(A-n)*Math.tan(r),p.push([[x,h],[A,h],[A,T],[x,b]])):a<=x?(b=h+(s-x)*Math.tan(i),T=h+(s-A)*Math.tan(i),E?p.push([[x,h],[s,h],[s,h],[x,b]]):p.push([[x,h],[A,h],[A,T],[x,b]])):x<o?(b=h+(x-n)*Math.tan(r),p.push([[x,h],[o,h],[o,l],[x,b]]),E?(p.push([[o,h],[a,h],[a,l],[o,l]]),p.push([[a,h],[s,h],[s,h],[o,l]])):a<A?(T=h+(s-A)*Math.tan(i),p.push([[o,h],[a,h],[a,l],[o,l]]),p.push([[a,h],[A,h],[A,T],[a,l]])):p.push([[o,h],[A,h],[A,l],[o,l]])):a<A?(b=h+(s-A)*Math.tan(i),x<o?(T=h+(x-n)*Math.tan(r),p.push([[x,h],[o,h],[o,l],[x,T]]),p.push([[o,h],[a,h],[a,l],[o,l]])):p.push([[x,h],[a,h],[a,l],[x,l]]),E?p.push([[a,h],[s,h],[s,h],[a,l]]):p.push([[a,h],[A,h],[A,b],[a,l]])):E?p.push([[x,h],[s,h],[a,l],[x,l]]):p.push([[x,h],[A,h],[A,l],[x,l]]):1===_?A<=l?E?p.push([[a,l],[s,h],[s,u],[a,c]]):(b=s-(x-h)*Math.tan(r),T=s-(A-h)*Math.tan(r),p.push([[b,x],[s,x],[s,A],[T,A]])):c<=x?(b=a+(x-c)*Math.tan(i),T=a+(A-c)*Math.tan(i),E?p.push([[b,x],[s,x],[s,u],[s,u]]):p.push([[b,x],[s,x],[s,A],[T,A]])):x<l?(b=a+(l-x)*Math.tan(r),p.push([[b,x],[s,x],[s,l],[a,l]]),E?(p.push([[a,l],[s,l],[s,c],[a,c]]),p.push([[a,c],[s,c],[s,u],[s,u]])):c<A?(T=a+(A-c)*Math.tan(i),p.push([[a,l],[s,l],[s,c],[a,c]]),p.push([[a,c],[s,c],[s,A],[T,A]])):p.push([[a,l],[s,l],[s,A],[a,A]])):c<A?(b=a+(A-c)*Math.tan(i),x<l?(T=a+(l-x)*Math.tan(r),p.push([[T,x],[s,x],[s,l],[a,l]]),p.push([[a,l],[s,l],[s,c],[a,c]]),E?p.push([[a,c],[s,c],[s,s],[s,s]]):p.push([[a,c],[s,c],[s,A],[b,A]])):(p.push([[a,x],[s,x],[s,c],[a,c]]),E?p.push([[a,c],[s,c],[s,u],[s,u]]):p.push([[a,c],[s,c],[s,A],[b,A]]))):E?p.push([[a,x],[s,x],[s,u],[a,c]]):p.push([[a,x],[s,x],[s,A],[a,A]]):2===_?A<=o?E?p.push([[n,u],[o,c],[a,c],[s,u]]):(b=u-(x-n)*Math.tan(r),T=u-(A-n)*Math.tan(r),p.push([[x,b],[A,T],[A,u],[x,u]])):a<=x?(b=u-(s-x)*Math.tan(i),T=u-(s-A)*Math.tan(i),E?p.push([[x,b],[s,u],[s,u],[x,u]]):p.push([[x,b],[A,T],[A,u],[x,u]])):x<o?(b=u-(x-n)*Math.tan(r),p.push([[x,b],[o,c],[o,u],[x,u]]),E?(p.push([[o,c],[a,c],[a,u],[o,u]]),p.push([[a,c],[s,u],[s,u],[a,u]])):a<A?(T=u-(A-a)*Math.tan(i),p.push([[o,c],[a,c],[a,u],[o,u]]),p.push([[a,c],[A,T],[A,u],[a,u]])):p.push([[o,c],[A,c],[A,u],[o,u]])):a<A?(b=u-(s-A)*Math.tan(i),x<o?(T=u-(x-a)*Math.tan(r),p.push([[x,T],[o,c],[o,u],[x,u]]),p.push([[o,c],[a,c],[a,u],[o,u]])):p.push([[x,c],[a,c],[a,u],[x,u]]),E?p.push([[a,c],[s,u],[s,u],[a,u]]):p.push([[a,c],[A,b],[A,u],[a,u]])):E?p.push([[x,c],[a,c],[s,u],[x,u]]):p.push([[x,c],[A,c],[A,u],[x,u]]):3===_&&(A<=l?E?p.push([[n,h],[o,l],[o,c],[n,u]]):(b=n+(x-h)*Math.tan(r),T=n+(A-h)*Math.tan(r),p.push([[n,x],[b,x],[T,A],[n,A]])):c<=x?(b=n+(u-x)*Math.tan(i),T=n+(u-A)*Math.tan(i),E?p.push([[n,x],[b,x],[n,u],[n,u]]):p.push([[n,x],[b,x],[T,A],[n,A]])):x<l?(b=n+(x-h)*Math.tan(r),p.push([[n,x],[b,x],[o,l],[n,l]]),E?(p.push([[n,l],[o,l],[o,c],[n,c]]),p.push([[n,c],[o,c],[n,u],[n,u]])):c<A?(T=n+(u-A)*Math.tan(i),p.push([[n,l],[o,l],[o,c],[n,c]]),p.push([[n,c],[o,c],[T,A],[n,A]])):p.push([[n,l],[o,l],[o,A],[n,A]])):c<A?(b=n+(u-A)*Math.tan(i),x<l?(T=n+(x-h)*Math.tan(r),p.push([[n,x],[T,x],[o,l],[n,h]]),p.push([[n,l],[o,l],[o,c],[n,c]])):p.push([[n,x],[o,x],[o,c],[n,c]]),E?p.push([[n,c],[o,c],[n,u],[n,u]]):p.push([[n,c],[o,c],[b,A],[n,A]])):E?p.push([[n,x],[o,x],[o,c],[n,u]]):p.push([[n,x],[o,x],[o,A],[n,A]]))}if(0===_)return It(t,r,i,n,o,a,s,h,l,0,0,p,f,d);if(1===_)return Lt(t,r,i,0,0,a,s,h,l,c,u,p,f,d);if(2===_)return Pt(t,r,i,n,o,a,s,0,l,c,u,p,f,d);if(3===_)return Yt(t,r,i,n,o,0,0,h,l,c,u,p,f,d)}}return 0===_?(n<o&&p.push([[n,h],[o,h],[o,l],[n,h]]),p.push([[o,h],[a,h],[a,l],[o,l]]),a<s&&p.push([[a,h],[s,h],[s,h],[a,l]]),It(t,r,i,n,o,a,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[a,l]]),p.push([[a,l],[s,l],[s,c],[a,c]]),c<u&&p.push([[a,c],[s,c],[s,u],[s,u]]),Lt(t,r,i,0,0,a,s,h,l,c,u,p,f,d)):2===_?(n<o&&p.push([[n,u],[o,c],[o,u],[n,u]]),p.push([[o,c],[a,c],[a,u],[o,u]]),a<s&&p.push([[a,c],[s,u],[s,u],[a,u]]),Pt(t,r,i,n,o,a,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[n,h],[n,h],[o,l],[n,l]]),p.push([[n,l],[o,l],[o,c],[n,c]]),c<u&&p.push([[n,c],[o,c],[n,u],[n,u]]),Yt(t,r,i,n,o,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,i,n,o,a,s){var h=(c=Qt(n,2))[0],l=c[1],n=(u=Qt(o,2))[0],c=u[1],u=(o=Qt(a,2))[0],a=o[1],s=(o=Qt(s,2))[0],o=o[1],h=Math.max(h,0),l=Math.max(l,0),n=Math.max(n,0),c=Math.max(c,0),u=Math.max(u,0),a=Math.max(a,0),s=Math.max(s,0),o=Math.max(o,0);if(_=0<h&&0<l||0<n&&0<c||0<u&&0<a||0<s&&0<o?!0:_){var _=[];return 0<h&&0<l?(_.push([t,e+l]),_.push([t,e+l*(1-ot),t+h*(1-ot),e,t+h,e])):_.push([t,e]),0<n&&0<c?(_.push([t+r-n,e]),_.push([t+r-n*(1-ot),e,t+r,e+c*(1-ot),t+r,e+c])):_.push([t+r,e]),0<u&&0<a?(_.push([t+r,e+i-a]),_.push([t+r,e+i-a*(1-ot),t+r-u*(1-ot),e+i,t+r-u,e+i])):_.push([t+r,e+i]),0<s&&0<o?(_.push([t+s,e+i]),_.push([t+s*(1-ot),e+i,t,e+i-o*(1-ot),t,e+i-o])):_.push([t,e+i]),_}},calBorderRadius:function(o,a,e,s,r){var i=!0;Ut.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===at?Math.max(0,t[0]):t[1]===st?Math.max(0,t[0]*(e?a:o)*.01):t[1]===ht?Math.max(0,t[0]*r.computedStyle[Rt]):t[1]===lt?Math.max(0,t[0]*r.width*.01):t[1]===ct?Math.max(0,t[0]*r.height*.01):0):0})}),i||Ut.forEach(function(t,e){var r=e%2==0?0:1,i=r?a:o,n=s[t],t=s[Ut[(e+1)%4]];n[r]+t[r]>i&&(n[r]>=(e=.5*i)&&t[r]>=e?n[r]=t[r]=e:n[r]>e?n[r]=i-t[r]:t[r]>e&&(t[r]=i-n[r]))})},calBorderRadiusInline:function(t,e,r){var i,n;t.length&&(i=t[0],n=t[t.length-1]);var o=i?i.outerWidth:0,a=i?i.outerHeight:0;o+=r[dt]+r[vt],a+=r[pt]+r[gt]+r[yt]+r[mt],[Et,Mt].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===at?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:o)*.01),t=Math.min(e?a:o,t);return t})}),o=n?n.outerWidth:0,a=n?n.outerHeight:0,[At,Ot].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===at?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:o)*.01),t=Math.min(e?a:o,t);return t})})},renderBorder:function(t,e,r,i,n,o,a){var s;e===rt.CANVAS||e===rt.WEBGL?(r.beginPath(),r.fillStyle!==n&&(r.fillStyle=n),i.forEach(function(t){ut(r,t,o,a)}),r.fill(),r.closePath()):e===rt.SVG&&(s="",i.forEach(function(t){s+=_t(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",n]]}))}},Vt={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}},Kt={}.toString;function zt(e){return function(t){return Kt.call(t)==="[object "+e+"]"}}var jt=zt("Object"),$t=zt("String"),Zt=zt("Function"),qt=zt("Number"),Jt=zt("Boolean"),ee=zt("Date"),re={}.hasOwnProperty,ie=re.toString,ne=ie.call(Object);function oe(t){return null==t}function ae(t){return oe(t)?"":t.toString()}function se(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=se(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var i="<g>";t.bb.forEach(function(t){i+=se(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=se(t))}),i+="</g>";var n=t.opacity,o=t.transform,a=t.visibility,s=t.mask,h=t.overflow,l=t.filter,t=t.mixBlendMode;return"<g"+(1!==n&&void 0!==n?' opacity="'+n+'"':"")+(o?' transform="'+o+'"':"")+' visibility="'+a+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l||t?' style="':"")+(l?"filter:"+l+";":"")+(t?"mix-blend-mode:"+t+";":"")+(l||t?'"':"")+">"+i+"</g>"}}function he(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function le(t,e){for(var r=t.length?t[0]:"",i=1,n=t.length;i<n;i++)r+=e+t[i];return r}function ce(t){if(!t||"[object Object]"!==Kt.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=re.call(t,"constructor")&&t.constructor;return"function"==typeof t&&ie.call(t)===ne}var ue={isObject:jt,isString:$t,isFunction:Zt,isNumber:qt,isBoolean:Jt,isDate:ee,isNil:oe,isPrimitive:function(t){return ue.isNil(t)||ue.isBoolean(t)||ue.isString(t)||ue.isNumber(t)},isAuto:function(t){return oe(t)||"auto"===t},isPlainObject:ce,stringify:ae,joinSourceArray:function t(e){for(var r="",i=0,n=e.length;i<n;i++){var o=e[i];Array.isArray(o)?r+=t(o):r+=ae(o)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=he(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=se(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=se(t))}),e+="</g>"},joinVd:se,joinDef:he,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],oe(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+le(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+le(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+le(t,",")+")";if(3===t.length)return"rgba("+le(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n))e[n[0]]=n[1];else for(var o=Object.keys(n),a=o.length-1;0<=a;a--){var s=o[a];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,n=r.length;i<n;i++){var o=r[i];e.push([o,t[o]])}return e},clone:function e(r){if(oe(r)||"object"!==xt(r))return r;if(r.$$type===Vt.TYPE_VD||r.$$type===Vt.TYPE_GM||r.$$type===Vt.TYPE_CP)return r;if(ue.isDate(r))return new Date(r);if(!ce(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,n=e.length;i<n;i++){var o=e[i],a=r[i],s=Array.isArray(o),h=Array.isArray(a);if(s&&h){if(!t(o,a))return!1}else{if(s||h)return!1;if(o!==a)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(jt(e)&&jt(r)){for(var i={},n=0,o=Object.keys(e),a=o.length;n<a;n++){var s=o[n];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;i[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!i.hasOwnProperty(u))return!1}}else{if(ee(e)&&ee(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==xt(e))return t;for(var i=0,n=(r=r||Object.keys(e)).length;i<n;){var o=r[i];t[o]=e[o],i++}return t},joinArr:le,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!te.isE(e)){var n=Qt(t,4),o=n[0],a=n[1],s=n[2],n=n[3];r&&(o-=r,s+=r),i&&(a-=i,n+=i);var h=[s,a,o,n,s,n],n=Qt(te.calPoint([o,a],e),4),o=n[0],a=n[1];(d=n[3])&&1!==d&&(o/=d,a/=d);for(var l=o,c=a,u=o,_=a,f=0;f<6;f+=2){var d,p=h[f],g=h[f+1],v=Qt(te.calPoint([p,g],e),4),p=v[0],g=v[1];(d=v[3])&&1!==d&&(p/=d,g/=d),l=Math.min(l,p),u=Math.max(u,p),c=Math.min(c,g),_=Math.max(_,g)}t=[l,c,u,_]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},_e={flag:!1},fe={list:[],data:{},charWidth:{},padding:{},ELLIPSIS:"…"},de={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},pe=te.calPoint;function ge(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;r=t.getShaderInfoLog(e);throw t.deleteShader(e),new Error("Failed to compile shader: "+r)}function ve(t,e,r,i){var n=Qt(t,4),o=n[0],a=n[1],t=n[2],n=n[3];return void 0===t&&(t=0),(n=void 0===n?1:n)&&1!==n&&(o/=n,a/=n,t/=n),a===r?a=0:(a=(a-r)/r,i&&(a=-a)),[(o=o===e?0:(o-e)/e)*n,a*n,t*n,n]}function me(t,e,r,i,n){var o=t.createTexture();return ye(t,o,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,n,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),o}function ye(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var Ee,xe={initShaders:function(t,e,r){if(!(r=function(t,e,r){var i=ge(t,t.VERTEX_SHADER,e),n=ge(t,t.FRAGMENT_SHADER,r);if(!i||!n)return null;e=t.createProgram();if(!e)return null;if(e.vertexShader=i,e.fragmentShader=n,t.attachShader(e,i),t.attachShader(e,n),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return e;r=t.getProgramInfoLog(e);throw t.deleteProgram(e),t.deleteShader(n),t.deleteShader(i),new Error("Failed to link program: "+r)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),r},createTexture:me,bindTexture:ye,drawTextureCache:function(r,t,y,E,x,b){var T,A=[],M=[],O=[],R=[0],S=[R];t.forEach(function(t,e){var r=Qt(t,5),i=r[0],n=r[1],o=r[2],a=r[3],s=r[4];e?(m=y[i.page.uuid],T!==m&&(R=[0,T=m],S.push(R))):(T=y[i.page.uuid],R[1]=T);var h=i.x,l=i.y,c=i.width,u=i.height,_=i.page,f=i.bbox,d=f[0],p=f[1],g=d+(a||0),v=p+u+(s||0),t=d+c+(a||0),r=p+(s||0),e=Qt(pe([g,v],o),4),m=e[0],i=e[1],f=e[3],d=Qt(pe([t,v],o),4),a=d[0],p=d[1],s=d[3],e=Qt(pe([t,r],o),4),v=e[0],d=e[1],t=e[3],e=Qt(pe([g,r],o),4),g=e[0],r=e[1],o=e[3],e=Qt(ve([m,i,0,f],E,x,b),2),m=e[0],i=e[1],e=Qt(ve([a,p,0,s],E,x,b),2),a=e[0],p=e[1],e=Qt(ve([v,d,0,t],E,x,b),2),v=e[0],d=e[1],e=Qt(ve([g,r,0,o],E,x,b),2),g=e[0],r=e[1];A.push(m,i,0,f,g,r,0,o,a,p,0,s,g,r,0,o,a,p,0,s,v,d,0,t);t=h/_.width,u=(l+u)/_.height,c=(h+c)/_.width,_=l/_.height;M.push(t,u,t,_,c,u,t,_,c,u,c,_),O.push(n,n,n,n,n,n),R[0]++});var e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(A),r.STATIC_DRAW);var i=r.getAttribLocation(r.program,"a_position");r.vertexAttribPointer(i,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i);var n=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,new Float32Array(M),r.STATIC_DRAW);var o=r.getAttribLocation(r.program,"a_texCoords");r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(o);var a=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(O),r.STATIC_DRAW),t=r.getAttribLocation(r.program,"a_opacity"),r.vertexAttribPointer(t,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t);var s=r.getUniformLocation(r.program,"u_texture"),h=0;S.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];r.uniform1i(s,e),r.drawArrays(r.TRIANGLES,h,t*=6),h+=t}),r.deleteBuffer(e),r.deleteBuffer(n),r.deleteBuffer(a),r.disableVertexAttribArray(i),r.disableVertexAttribArray(o),r.disableVertexAttribArray(t)},drawBlur:function(e,t,r,i,n,o,a,s,h,l,c,u,_,f,d){var p=(g=Qt(ve([_,l-_],c,u),2))[0],g=g[1],c=(_=Qt(ve([h-_,_],c,u),2))[0],u=_[1],_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([p,u,p,g,c,u,p,g,c,u,c,g]),e.STATIC_DRAW),u=e.getAttribLocation(t,"a_position"),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(u),c=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),g=e.getAttribLocation(t,"a_texCoords"),e.vertexAttribPointer(g,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(g);var v=e.getUniformLocation(t,"u_direction");e.uniform2f(v,0,0);var m=e.getUniformLocation(t,"u_texture");e.uniform1i(m,s),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW);for(var y=100/Math.max(h,l),E=h/l,x=[],b=0;b<3;b++){var T=me(e,null,s,h,l);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,T,0),l<=h?e.uniform2f(v,y,0):e.uniform2f(v,y*E,0),e.uniform1i(m,a),e.drawArrays(e.TRIANGLES,0,6),x.push(n);var A=me(e,null,a,h,l);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,A,0),l<=h?e.uniform2f(v,0,y*E):e.uniform2f(v,0,y),e.uniform1i(m,s),e.drawArrays(e.TRIANGLES,0,6),n=A,x.push(T)}return e.deleteBuffer(_),e.deleteBuffer(c),e.disableVertexAttribArray(u),e.disableVertexAttribArray(g),x.forEach(function(t){return e.deleteTexture(t)}),n},drawOverflow:function(t,e,r,i,n,o,a,s){var h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(t.programOverflow,"a_position");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);var c=r/a,l=i/s,a=(n+r)/a,i=(o+i)/s,s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([c,l,c,i,a,l,c,i,a,l,a,i]),t.STATIC_DRAW),i=t.getAttribLocation(t.programOverflow,"a_texCoords"),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i),i=t.getUniformLocation(t.programOverflow,"u_texture"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(h)},drawMask:function(t,e,r,i){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var o=t.getAttribLocation(i,"a_position");t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(i,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.getUniformLocation(i,"u_texture1");t.uniform1i(h,r),i=t.getUniformLocation(i,"u_texture2"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(a),t.disableVertexAttribArray(o),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,n,o){var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);var c=t.getUniformLocation(e,"u_texture1");t.uniform1i(c,r),e=t.getUniformLocation(e,"u_texture2"),t.uniform1i(e,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(h),t.disableVertexAttribArray(s),t.disableVertexAttribArray(l)},drawCm:function(t,e,r,i){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var o=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.getUniformLocation(e,"u_texture");t.uniform1i(h,r),e=t.getUniformLocation(e,"u_m"),t.uniform1fv(e,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(a),t.disableVertexAttribArray(o),t.disableVertexAttribArray(s)}},be={},Te={},Ae=[],Me=[],Oe="function"==typeof OffscreenCanvas&&ue.isFunction(OffscreenCanvas.prototype.getContext);function Re(t,e,r,i,n){var o;return(o=t?i[t]||(i[t]=!_e.flag&&Oe?new OffscreenCanvas(e,r):document.createElement("canvas")):(o=i===be?Ae:Me).length?o.pop():!_e.flag&&Oe?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,o.height=r,_e.flag&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",i===be?"canvas":"webgl"),t&&o.setAttribute("key",t),n&&o.setAttribute("message",n),document.body.appendChild(o)),n=i===be?o.getContext("2d"):o.getContext("webgl",de)||o.getContext("experimental-webgl",de),{canvas:o,ctx:n,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===be?Ae:Me).push(this.canvas),this.available=!1}}}var Se,Ce,Ie={},ke={},we={},Le={measureText:function(){var t=fe.list,c=fe.data,u="",_=[],f=[],d=[];if(Object.keys(c).forEach(function(t){var e=c[t],r=e.ff,i=e.fs,n=e.fw,o=e.s;if(o){_.push(t),f.push(o.length);for(var a="position:absolute;font-family:".concat(r,";font-size:").concat(i,"px;font-weight:").concat(n),s=0,h=o.length;s<h;s++){var l=o.charAt(s);d.push(l),u+='<span style="'.concat(a,'">').concat(l.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}c[t].s=""}}),u){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=u;for(var r,i=e.childNodes,n=fe.charWidth,o=0,a=0,s=0,h=i.length;s<h;s++){var l=i[s];0===o&&(r=_[a]),++o===f[a]&&(a++,o=0);var p=d[s],l=window.getComputedStyle(l,null);n[r][p]=parseFloat(l.width)}t.forEach(function(t){return t.__measureCb()}),fe.list=[],fe.data={},_e.flag||document.body.removeChild(e)}},measureTextSync:function(t,e,r,i,n){i="position:absolute;font-family:".concat(e,";font-size:").concat(r,"px;font-weight:").concat(i),i='<span style="'.concat(i,'">').concat(n,'</span><span style="').concat(i,'">').concat(n).concat(n,"</span>"),n=document.createElement("div");n.style.position="absolute",n.style.left="99999px",n.style.top="-99999px",n.style.visibility="hidden",document.body.appendChild(n),n.innerHTML=i;n=n.childNodes;return 2*parseFloat(window.getComputedStyle(n[0],null).width)-parseFloat(window.getComputedStyle(n[1],null).width)},IMG:Ie,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,o=[];e.forEach(function(t,e){Le.measureImg(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!e||!ue.isString(e))return Le.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,a,s=Ie[e]=Ie[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(a=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&location.hostname!==a[1]&&(t.crossOrigin="anonymous"),t.src=e,_e.flag&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Ce=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(Le.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Le.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Ne.toString=function(){return Ce.toString()},Ne),cancelAnimationFrame:(Se=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Le.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Le.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},De.toString=function(){return Se.toString()},De),now:function(){return"undefined"!=typeof performance?(Le.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Le.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&be.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return Re(r,t,e,be,i)},releaseCacheCanvas:function(t){Ae.push(t)},delCacheCanvas:function(t){t&&delete be[t]},hasCacheWebgl:function(t){return t&&Te.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return Re(r,t,e,Te,i)},releaseCacheWebgl:function(t){Me.push(t)},delCacheWebgl:function(t){t&&delete Te[t]},isDom:function(t){if(t){if(ue.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(ue.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},checkSupportFontFamily:function(t){if("arial"===(t=t.toLowerCase()))return!0;if(!bt.info.hasOwnProperty(t))return!1;if(bt.info[t].hasOwnProperty("checked"))return bt.info[t].checked;var e=Le.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__"),r=e.ctx;r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",Ee||(r.clearRect(0,0,16,16),r.font="16px arial",r.fillText("a",8,8),e.draw(),Ee=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),r.font="16px "+t,r.fillText("a",8,8),e.draw();for(var i=r.getImageData(0,0,16,16).data,n=0,o=i.length;n<o;n++)if(Ee[n]!==i[n])return bt.info[t].checked=!0;return bt.info[t].checked=!1},loadFont:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,o=[];t.forEach(function(t,e){Le.loadFont(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!t||!ue.isString(t))return Le.error("Load font invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e=ke[t]=ke[t]||{state:0,task:[]};2===e.state?r&&r(e):1===e.state?r&&e.task.push(r):(e.state=1,r&&e.task.push(r),new FontFace(t,"url(".concat(t,")")).load().then(function(){e.state=2,e.success=!0,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}).catch(function(){e.state=2,e.success=!1,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,o=[];t.forEach(function(t,e){Le.loadComponent(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!t||!ue.isString(t))return Le.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,a=we[t]=we[t]||{state:0,task:[]};2===a.state?r&&r(a):1===a.state?r&&a.task.push(r):(a.state=1,r&&a.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){a.state=2,a.success=!0,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},e.onerror=function(){a.state=2,a.success=!1,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function De(t){return Se.apply(this,arguments)}function Ne(t){return Ce.apply(this,arguments)}var Pe=ue.rgba2int,Fe=ue.isNil,Be=S.PX,Ye=S.PERCENT,He=S.DEG,Ge=S.NUMBER,We=S.REM,Ue=S.VW,Xe=S.VH,Ve=S.calUnit,Ke=et.d2r,ze=Tt.canvasPolygon,je=Tt.svgPolygon,$e=m.STYLE_KEY.FONT_SIZE,Ze=m.NODE_KEY.NODE_DEFS_CACHE;function qe(t){if(/^[-+]?[\d.]/.test(t)){var e=Ve(t);return-1<[Ge,He].indexOf(e[1])&&(e[1]=Be),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,Ye]}function Je(t,e,r){for(var i,n=[],o=t[0][0],a=0,s=t.length;a<s;a++){var h,l=t[a];1<l.length?(h=l[1])[1]===Ye?n.push([l[0],.01*h[0]]):h[1]===We?n.push([l[0],h[0]*r.computedStyle[$e]/e]):h[1]===Ue?n.push([l[0],h[0]*r.width/e]):h[1]===Xe?n.push([l[0],h[0]*r.height/e]):n.push([l[0],h[0]/e]):n.push([l[0]])}1===n.length&&n.push(ue.clone(n[0])),1===n[0].length&&n[0].push(0),1<n.length&&(1===n[i=n.length-1].length&&n[i].push(1));for(var c=n[0][1],u=1,_=n.length;u<_-1;u++){var f=n[u];if(1<f.length)c=f[1];else{for(var d=u+1,p=n[n.length-1][1];d<_-1;d++){var g=n[d];if(1<g.length){p=g[1];break}}for(var v=(p-c)/(d-u+1),m=u;m<d;m++)n[m].push(c+v*(m+1-u));u=d}}for(var y=1,E=n.length;y<E;y++){var x=n[y],b=n[y-1];x[1]<b[1]&&(x[1]=b[1])}for(var T=0,A=n.length;T<A;T++){var M=n[T];if(1<M[1]){n.splice(T);var O,R,S,C,I=n[T-1];I&&I[1]<1&&(O=M[0][0]-I[0][0],R=M[0][1]-I[0][1],S=M[0][2]-I[0][2],C=M[0][3]-I[0][3],I=(1-I[1])/(M[1]-I[1]),n.push([[M[0][0]+O*I,M[0][1]+R*I,M[0][2]+S*I,M[0][3]+C*I],1]));break}}for(var k=n.length-1;0<=k;k--){var w=n[k];if(w[1]<0){n.splice(0,k+1);var L,D,N,P,F=n[k];F&&0<F[1]&&(L=F[0][0]-w[0][0],D=F[0][1]-w[0][1],N=F[0][2]-w[0][2],P=F[0][3]-w[0][3],F=-w[1]/(F[1]-w[1]),n.unshift([[w[0][0]+L*F,w[0][1]+D*F,w[0][2]+N*F,w[0][3]+P*F],0]));break}}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n.length||n.push([o,0]),n}function Qe(t,e,r,i,n,o){var a=t[0],t=t[1],a=a[1]===Ye?e+a[0]*i*.01:a[1]===We?e+a[0]*o.computedStyle[$e]:a[1]===Ue?e+a[0]*o.width*.01:a[1]===Xe?e+a[0]*o.height*.01:e+a[0],t=t[1]===Ye?r+t[0]*n*.01:t[1]===We?r+t[0]*o.computedStyle[$e]:t[1]===Ue?r+t[0]*o.width*.01:t[1]===Xe?r+t[0]*o.height*.01:r+t[0];return[a,t]}var tr={parseGradient:function(t){var e=C.gradient.exec(t);if(e){var r,i,n,o,a,s={k:e[1]};"linear"===s.k?(r=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(e[2]))?s.d=(t=r[0].toLowerCase(),r=180,"to top"===t?r=0:"to top right"===t?r=45:"to right"===t?r=90:"to bottom right"===t?r=135:"to bottom"===t||("to bottom left"===t?r=225:"to left"===t?r=270:"to top left"===t?r=315:(t=/([-+]?[\d.]+)deg/.exec(t))&&(r=parseFloat(t[1]))),r%360):(i=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(e[2]),s.d=i?[parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4])]:180):"radial"===s.k?(s.s=-1<e[2].indexOf("circle")?"circle":"ellipse",(i=/(closest|farthest)-(side|corner)/i.exec(e[2]))?s.z=i[0].toLowerCase():(n=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([\d.]+))?/.exec(e[2]))?(s.z=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4])],Fe(n[5])?s.z.push(1):s.z.push(parseFloat(n[5]))):s.z="farthest-corner",(n=/at\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(o=qe(n[1]),a=n[2]?qe(n[2]):o,s.p=[o,a]):s.p=[[50,Ye],[50,Ye]]):"conic"===s.k&&(o=/([-+]?[\d.]+deg)/i.exec(e[2]),s.d=o?parseFloat(o[0])%360:0,(a=/at\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(o=qe(a[1]),a=a[2]?qe(a[2]):o,s.p=[o,a]):s.p=[[50,Ye],[50,Ye]]);e=e[2].match(/([-+]?[\d.]+[pxremvwh%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwh%]+)?/gi)||[];return s.v=e.map(function(t){var e=/((?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\)))/i.exec(t),e=[Pe(e[1])],t=/[-+]?[\d.]+[pxremvwh%]+/.exec(t);return t&&(t=Ve(t[0]),-1<[Ge,He].indexOf(t[1])&&(t[1]=Be),e[1]=t),e}),s}},getLinear:function(t,e,r,i,n,o,a,s,h){var l,c,u=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,_=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0;if(r+=u,i+=_,n+=u,o+=_,Array.isArray(e))var f=r+e[0]*a,d=i+e[1]*s,p=r+e[2]*a,g=i+e[3]*s,v=Je(t,Math.sqrt(Math.pow(p-f,2)+Math.pow(g-d,2)));else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var m=Math.max(a,s),y=(x=m,u=n,_=o,x=270<=(n=e)?(o=Ke(360-n),l=u+Math.sin(o)*x,y=_+Math.cos(o)*x,E=u-Math.sin(o)*x,_-Math.cos(o)*x):180<=n?(c=Ke(n-180),l=u+Math.sin(c)*x,y=_-Math.cos(c)*x,E=u-Math.sin(c)*x,_+Math.cos(c)*x):90<=n?(c=Ke(180-n),l=u-Math.sin(c)*x,y=_-Math.cos(c)*x,E=u+Math.sin(c)*x,_+Math.cos(c)*x):(n=Ke(n),l=u-Math.sin(n)*x,y=_+Math.cos(n)*x,E=u+Math.sin(n)*x,_-Math.cos(n)*x),[l,y,E,x]);m*=2;var E=w.dotProduct(r-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/m,x=w.dotProduct(r+a-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/m,a=w.dotProduct(r+a-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/m,r=w.dotProduct(r-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/m,i=E,s=E,i=Math.min(E,Math.min(x,Math.min(a,r))),s=Math.max(s,Math.max(x,Math.max(a,r))),a=i/m,r=y[2]-y[0],m=y[3]-y[1];f=y[0]+r*a,d=y[1]+m*a,p=y[2]-r*a,g=y[3]-m*a,v=Je(t,s-i,h)}return{x1:f,y1:d,x2:p,y2:g,stop:v}},getRadial:function(t,e,r,i,n,o,a,s,h){var l,c,u,i=(p=e,_=r,l=i,c=a-n,e=s-o,r=n,i=o,n=a,o=s,a=h,s=0,Array.isArray(_)?(f=r+_[0]*c,d=i+_[1]*e,_[4]<=0?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-o),Math.min(Math.abs(f-o))))):(m=(v=Math.sqrt(Math.pow((_[2]-_[0])*c,2)+Math.pow((_[3]-_[1])*e,2)))*_[4],g=Math.max(v,m),s=_[2]>=_[0]?_[3]>=_[1]?Math.asin((_[3]-_[1])*e/v):-Math.asin((_[1]-_[3])*e/v):_[3]>=_[1]?Ke(180)-Math.asin((_[3]-_[1])*e/v):Math.asin((_[1]-_[3])*e/v)-Ke(180))):(f=(l=Qt(Qe(l,r,i,c,e,a),2))[0],d=l[1],a=1,"closest-corner"===_&&"circle"===p?g=f<=r||n<=f||d<=i||o<=d?Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-o),Math.min(Math.abs(f-o))))):(v=f<r+.5*c?f-r:n-f,m=d<i+.5*e?d-i:o-d,Math.sqrt(Math.pow(v,2)+Math.pow(m,2))):"closest-side"===_||"closest-corner"===_?f<=r||n<=f||d<=i||o<=d?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-o),Math.min(Math.abs(f-o))))):(l=1,v=f<r+.5*c?f-r:n-f,m=d<i+.5*e?d-i:o-d,g=Math.min(v,m),v*=l="closest-corner"===_?Math.sqrt(2):l,m*=l,g*=l):(v=f<=r?r-f+c:n<=f?f-n+c:f<r+.5*c?n-f:f-r,m=d<=i?i-d+e:o<=d?d-o+e:d<i+.5*e?o-d:d-i,g=Math.max(v,m),v*=a="farthest-side"!==_?Math.sqrt(2):a,m*=a,g*=a)),[f,d,g,v="circle"===p?m=g:v,m,s]),_=Qt(i,6),a=_[0],f=_[1],d=_[2],p=_[3],g=_[4],v=_[5],m=1,s=1;return p===g&&!v||(u=[1,0,0,1,0,0],v&&(i=Math.sin(v),u=[_=Math.cos(v),i,0,0,-i,_,0,0,0,0,1,0,0,0,0,1]),p!==d&&(u=te.multiply(u,[m=p/d,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),g!==d&&(u=te.multiply(u,[1,0,0,0,0,s=g/d,0,0,0,0,1,0,0,0,0,1]))),{cx:a,cy:f,r:d,stop:Je(t,d,h),scx:m,scy:s,matrix:u,d:v}},getConic:function(t,e,r,i,n,o,a,s,h){var l=function(t,e,r,i,n,o,a){var s=n-r,h=o-i,e=Qt(Qe(e,r,i,s,h,a),2),a=e[0],e=e[1];n=r+.5*s<=a?a-r:n-a;o=i+.5*h<=e?e-i:o-e;return o=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),[a,e,o,t]}(e,r,i,n,o,a,h),c=Qt(l,4),e=c[0],r=c[1],l=c[2];return l<<=1,{cx:e,cy:r,w:o-i,h:a-n,r:l*=s,deg:c[3],stop:Je(t,1,h)}},renderConic:function(e,t,r,i,n,o,a,s,h,l,c,u,_){if(l=(l=Xt.calRadius(n,o,a,s,h,l,c,u))||[[n,o],[n+a,o],[n+a,o+s],[n,o+s],[n,o]],t===rt.CANVAS||t===rt.WEBGL){c=Le.getCacheCanvas(a,s,"__$$CONIC_GRADIENT$$__"),u=c.ctx.getImageData(0,0,a,s);it.getConicGradientImage(i.cx-n,i.cy-o,i.w,i.h,i.stop,u.data),c.ctx.putImageData(u,0,0),r.save(),r.beginPath(),ze(r,l),r.clip(),r.closePath(),r.drawImage(c.canvas,n,o),r.restore(),c.ctx.clearRect(0,0,a,s)}else if(t===rt.SVG){if(_){var f={tagName:"symbol",props:[],children:[]};return e.__config[Ze].push(f),i.forEach(function(t){f.children.push({type:"item",tagName:"path",props:[["d",je(t[0])],["fill",t[1]]]})}),r.add(f)}l={tagName:"clipPath",children:[{tagName:"path",props:[["d",je(l)]]}]};e.__config[Ze].push(l);var d=r.add(l);i.forEach(function(t){e.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",je(t[0])],["fill",t[1]],["clip-path","url(#"+d+")"]]})})}}},er={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit"},rr={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},ir=[],nr=[];Object.keys(er).forEach(function(t){nr.push(t);var e=er[t];ir.push({k:t,v:e})});var or=[],ar=[];Object.keys(rr).forEach(function(t){ar.push(t);var e=rr[t];or.push({k:t,v:e})});var sr={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:1,textStrokeOver:"none"},hr=[];Object.keys(sr).forEach(function(t){hr.push(t)});var lr={DOM:er,GEOM:rr,isValid:function(t){return er.hasOwnProperty(t)||rr.hasOwnProperty(t)},DOM_KEY_SET:nr,GEOM_KEY_SET:ar,DOM_ENTRY_SET:ir,GEOM_ENTRY_SET:or,INHERIT:sr,INHERIT_KEY_SET:hr},cr=ue.isNil;function ur(t,e,r,i){cr(t.flexGrow)&&(t.flexGrow=e||0),cr(t.flexShrink)&&(t.flexShrink=r||0),cr(t.flexBasis)&&(t.flexBasis=i||0)}var _r={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(i,t){var e,n,o,a,r,s,h,l,c,u,_,f,d,p,g,v,m,y,E=this,x=i[t];if("background"===t)Array.isArray(x)?(r=x.length,!cr(i.backgroundColor)||(e=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(x[r-1]))&&(i.backgroundColor=e[0],x=x.slice(0,r-1)),n=[],o=[],a=[],x.forEach(function(t){var e,r;cr(i.backgroundImage)&&((e=C.gradient.exec(t))?(n.push(e[0]),t=t.replace(e[0],"")):(r=C.img.exec(x))&&(n.push(r[0]),t=t.replace(r[0],""))),!cr(i.backgroundRepeat)||(r=/(no-?)?repeat(-?[xy])?/i.exec(t))&&o.push(r[0].toLowerCase()),!cr(i.backgroundPosition)||(t=t.match(C.position))&&a.push(t.join(" "))}),n.length&&(i.backgroundImage=n),o.length&&(i.backgroundRepeat=o),a.length&&(i.backgroundPosition=a,this.toFull(i,"backgroundPosition"))):(cr(i.backgroundImage)&&((r=C.gradient.exec(x))?(i.backgroundImage=r[0],x=x.replace(r[0],"")):(s=C.img.exec(x))&&(i.backgroundImage=s[0],x=x.replace(s[0],""))),!cr(i.backgroundRepeat)||(s=/(no-?)?repeat(-?[xy])?/i.exec(x))&&(i.backgroundRepeat=s[0].toLowerCase()),!cr(i.backgroundColor)||(h=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(x))&&(i.backgroundColor=h[0],x=x.replace(h[0],"")),!cr(i.backgroundPosition)||(h=x.match(C.position))&&(i.backgroundPosition=h.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===x?ur(i,0,0,"auto"):"auto"===x?ur(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(x)?(l=x.split(/\s+/),ur(i,parseFloat(l[0]),parseFloat(l[1]),l[2])):/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwh%]*/.test(x)?(l=x.split(/\s+/),ur(i,parseFloat(l[0]),parseFloat(l[1]),l[2])):/^[\d.]+\s+[\d.]+$/.test(x)?(f=x.split(/\s+/),ur(i,parseFloat(f[0]),parseFloat(f[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwh%]+/.test(x)?(d=x.split(/\s+/),ur(i,parseFloat(d[0]),1,d[1])):/^[\d.]+$/.test(x)?ur(i,parseFloat(x),1,0):/^[\d.]+[pxremvwh%]+/i.test(x)?ur(i,1,1,x):ur(i,0,1,"auto");else if("flexFlow"===t)(x=x.toString().split(/\s+/)).length&&(cr(i.flexDirection),i.flexDirection=x[0],1<x.length&&(i.flexWrap=x[1]));else if("borderRadius"===t){1===(x=x.toString().split("/")).length&&(x[1]=x[0]);for(var b=0;b<2;b++){var T=x[b].toString().split(/\s+/);0===T.length?x[b]=[0,0,0,0]:1===T.length?x[b]=[T[0],T[0],T[0],T[0]]:2===T.length?x[b]=[T[0],T[1],T[0],T[1]]:3===T.length?x[b]=[T[0],T[1],T[2],T[1]]:x[b]=T.slice(0,4)}this[t].forEach(function(t,e){cr(i[t])&&(i[t]=x[0][e]+" "+x[1][e])})}else"backgroundPosition"===t?(Array.isArray(x)||(x=[x]),c=this[t].map(function(t){return cr(i[t])}),x.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),E[t].forEach(function(t,e){c[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(u=x.toString().split(/\s*,\s*/)).length&&(u[1]=u[0]),this[t].forEach(function(t,e){cr(i[t])&&(i[t]=u[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(_=x.toString().split(/\s*,\s*/)).length?_[2]=_[1]=_[0]:2===_.length&&(_[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){cr(i[t])&&(i[t]=_[e])})):"margin"===t||"padding"===t?(g=i,m=this[v=t],v=g[v],cr(v)||(y=v.toString().match(/([-+]?[\d.]+[pxremvwh%]*)|(auto)/gi))&&(1===y.length?y[3]=y[2]=y[1]=y[0]:2===y.length?(y[2]=y[0],y[3]=y[1]):3===y.length&&(y[3]=y[1]),m.forEach(function(t,e){cr(g[t])&&(g[t]=y[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(v=(f=i)[d=t],cr(v)||(cr(f[d+"Width"])&&(m=/\b[\d.]+[pxremvwh%]*\b/i.exec(v),f[d+"Width"]=m?m[0]:0),cr(f[d+"Style"])&&(p=/\b(solid|dashed|dotted)\b/i.exec(v),f[d+"Style"]=p?p[1]:"solid"),cr(f[d+"Color"])&&((p=/#[0-9a-f]{3,8}/i.exec(v))&&-1<[4,7,9].indexOf(p[0].length)?f[d+"Color"]=p[0]:/\btransparent\b/i.test(v)?f[d+"Color"]="transparent":(p=/rgba?\s*\(.+\)/i.exec(v),f[d+"Color"]=p?p[0]:"transparent")))):"textStroke"===t?((p=/(?:^|\s)([-+]?[\d.]+[pxremvwh%]*)/.exec(x))&&(i.textStrokeWidth=p[1]),(p=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(x))&&(i.textStrokeColor=p[0]),/\bfill\b/i.test(x)?i.textStrokeOver="fill":i.textStrokeOver="none"):this[t]&&this[t].forEach(function(t){cr(i[t])&&(i[t]=x)});return i}},fr=m.STYLE_KEY,y=[[fr.BACKGROUND_COLOR],[fr.BORDER_BOTTOM_COLOR],[fr.BORDER_LEFT_COLOR],[fr.BORDER_RIGHT_COLOR],[fr.BORDER_TOP_COLOR],[fr.COLOR],[fr.TEXT_STROKE_COLOR]],A=[[fr.FONT_SIZE],[fr.BORDER_BOTTOM_WIDTH],[fr.BORDER_LEFT_WIDTH],[fr.BORDER_RIGHT_WIDTH],[fr.BORDER_TOP_WIDTH],[fr.LEFT],[fr.TOP],[fr.RIGHT],[fr.BOTTOM],[fr.FLEX_BASIS],[fr.WIDTH],[fr.HEIGHT],[fr.LINE_HEIGHT],[fr.MARGIN_BOTTOM],[fr.MARGIN_LEFT],[fr.MARGIN_TOP],[fr.MARGIN_RIGHT],[fr.PADDING_TOP],[fr.PADDING_RIGHT],[fr.PADDING_BOTTOM],[fr.PADDING_LEFT],[fr.STROKE_WIDTH],[fr.STROKE_MITERLIMIT],[fr.LETTER_SPACING],[fr.PERSPECTIVE],[fr.TEXT_STROKE_WIDTH]],Y=[[fr.BACKGROUND_IMAGE],[fr.FILL],[fr.STROKE]],ft=[[fr.BORDER_TOP_LEFT_RADIUS],[fr.BORDER_TOP_RIGHT_RADIUS],[fr.BORDER_BOTTOM_RIGHT_RADIUS],[fr.BORDER_BOTTOM_LEFT_RADIUS]],dr={};y.forEach(function(t){dr[t]=!0});var pr={};A.forEach(function(t){pr[t]=!0});var gr={};ft.forEach(function(t){gr[t]=!0});var vr={};Y.forEach(function(t){vr[t]=!0});var $t=[[fr.TRANSLATE_X],[fr.TRANSLATE_Y],[fr.TRANSLATE_Z],[fr.SKEW_X],[fr.SKEW_Y],[fr.SCALE_X],[fr.SCALE_Y],[fr.SCALE_Z],[fr.ROTATE_X],[fr.ROTATE_Y],[fr.ROTATE_Z]],mr={};$t.forEach(function(t){mr[t]=!0});var Zt={KEY_COLOR:y,KEY_EXPAND:$t,KEY_GRADIENT:Y,KEY_LENGTH:A,KEY_RADIUS:ft,COLOR_HASH:dr,EXPAND_HASH:mr,GRADIENT_HASH:vr,LENGTH_HASH:pr,RADIUS_HASH:gr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},yr=lr.DOM,Er=lr.GEOM,xr=S.INHERIT,qt=m.STYLE_KEY,br={},Tr=[],Ar=o({},qt.POINTER_EVENTS,!0),Mr=(o(Jt={},qt.TRANSFORM,!0),o(Jt,qt.TRANSLATE_X,!0),o(Jt,qt.TRANSLATE_Y,!0),o(Jt,qt.SKEW_X,!0),o(Jt,qt.SKEW_Y,!0),o(Jt,qt.SCALE_X,!0),o(Jt,qt.SCALE_Y,!0),o(Jt,qt.ROTATE_Z,!0),o(Jt,qt.COLOR,!0),o(Jt,qt.FONT_STYLE,!0),o(Jt,qt.STROKE_WIDTH,!0),o(Jt,qt.FILL,!0),o(Jt,qt.STROKE_DASHARRAY,!0),o(Jt,qt.STROKE_LINECAP,!0),o(Jt,qt.STROKE_LINEJOIN,!0),o(Jt,qt.STROKE_MITERLIMIT,!0),o(Jt,qt.BACKGROUND_COLOR,!0),o(Jt,qt.BACKGROUND_IMAGE,!0),o(Jt,qt.BACKGROUND_POSITION_X,!0),o(Jt,qt.BACKGROUND_POSITION_Y,!0),o(Jt,qt.BACKGROUND_REPEAT,!0),o(Jt,qt.BACKGROUND_SIZE,!0),o(Jt,qt.STROKE,!0),o(Jt,qt.BORDER_BOTTOM_COLOR,!0),o(Jt,qt.BORDER_LEFT_COLOR,!0),o(Jt,qt.BORDER_RIGHT_COLOR,!0),o(Jt,qt.BORDER_TOP_COLOR,!0),o(Jt,qt.BORDER_TOP_LEFT_RADIUS,!0),o(Jt,qt.BORDER_TOP_RIGHT_RADIUS,!0),o(Jt,qt.BORDER_BOTTOM_RIGHT_RADIUS,!0),o(Jt,qt.BORDER_BOTTOM_LEFT_RADIUS,!0),o(Jt,qt.VISIBILITY,!0),o(Jt,qt.OPACITY,!0),o(Jt,qt.Z_INDEX,!0),o(Jt,qt.FILTER,!0),o(Jt,qt.BOX_SHADOW,!0),o(Jt,qt.OVERFLOW,!0),o(Jt,qt.BACKGROUND_CLIP,!0),o(Jt,qt.TEXT_STROKE_WIDTH,!0),o(Jt,qt.TEXT_STROKE_COLOR,!0),o(Jt,qt.TEXT_STROKE_OVER,!0),Jt),Or=(o(sr={},qt.FONT_SIZE,!0),o(sr,qt.FONT_WEIGHT,!0),o(sr,qt.FONT_FAMILY,!0),sr),Rr={GEOM:br,GEOM_KEY_SET:Tr,IGNORE:Ar,REPAINT:Mr,MEASURE:Or,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Rr.addGeom(e,t,r)}):t&&(br.hasOwnProperty(t)||Tr.push(t),(br[t]=br[t]||{})[e]=r||!0)}};function Sr(t,e){return br.hasOwnProperty(e)&&br[e].hasOwnProperty(t)}Rr.isIgnore=function(t){return Ar.hasOwnProperty(t)},Rr.isGeom=Sr,Rr.isRepaint=function(t){return Mr.hasOwnProperty(t)||Sr(t)},Rr.isMeasure=function(t){return Or.hasOwnProperty(t)},Rr.isValid=function(t,e){return!!e&&(!!yr.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Er.hasOwnProperty(e))||(br.hasOwnProperty(e)?br[e].hasOwnProperty(t):"translatePath"===e)))};var Cr=Rr.MEASURE_KEY_SET=Object.keys(Or).map(function(t){return parseInt(t)}),Ir=Cr.length;Rr.isMeasureInherit=function(t){if(t)for(var e=0;e<Ir;e++){var r=Cr[e];if(t.hasOwnProperty(r)&&t[r][1]===xr)return!0}return!1},Rr.measureInheritList=function(t){for(var e=[],r=0;r<Ir;r++){var i=Cr[r];t.hasOwnProperty(i)&&t[i][1]===xr&&e.push(i)}return e},Rr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Rr.addGeom("$circle",["r"]),Rr.addGeom("$ellipse",["rx","ry"]),Rr.addGeom("$rect",["rx","ry"]),Rr.addGeom("$sector",["begin","end","edge","closure"]),Rr.addGeom("$polyline",["points","controls","start","end"]),Rr.addGeom("$polygon",["points","controls","start","end"]);var kr=m.STYLE_KEY,wr=m.STYLE_RV_KEY,Lr=m.style2Upper,fr=m.STYLE_KEY,Dr=fr.POSITION,Nr=fr.WIDTH,Pr=fr.HEIGHT,Fr=fr.TRANSLATE_X,Br=fr.TRANSLATE_Y,Yr=fr.TRANSLATE_Z,Hr=fr.SCALE_X,Gr=fr.SCALE_Y,Wr=fr.SCALE_Z,y=fr.SKEW_X,$t=fr.SKEW_Y,Y=fr.ROTATE_X,A=fr.ROTATE_Y,ft=fr.ROTATE_Z,Ur=fr.ROTATE_3D,Xr=fr.PERSPECTIVE,Jt=fr.PERSPECTIVE_ORIGIN,Vr=fr.TRANSFORM,Kr=fr.TRANSFORM_ORIGIN,zr=fr.BACKGROUND_IMAGE,jr=fr.BACKGROUND_COLOR,$r=fr.BACKGROUND_POSITION_X,Zr=fr.BACKGROUND_POSITION_Y,qr=fr.BACKGROUND_SIZE,Jr=fr.OPACITY,Qr=fr.Z_INDEX,ti=fr.COLOR,ei=fr.FONT_SIZE,ri=fr.FONT_FAMILY,ii=fr.FONT_WEIGHT,ni=fr.FONT_STYLE,oi=fr.LINE_HEIGHT,ai=fr.TEXT_ALIGN,si=fr.FILTER,hi=fr.VISIBILITY,li=fr.BOX_SHADOW,ci=fr.POINTER_EVENTS,ui=fr.FILL,_i=fr.STROKE,fi=fr.STROKE_WIDTH,di=fr.STROKE_DASHARRAY,pi=fr.BORDER_TOP_WIDTH,gi=fr.BORDER_RIGHT_WIDTH,vi=fr.BORDER_BOTTOM_WIDTH,mi=fr.BORDER_LEFT_WIDTH,yi=fr.DISPLAY,Ei=fr.FLEX_DIRECTION,xi=fr.FLEX_GROW,bi=fr.FLEX_SHRINK,Ti=fr.FLEX_BASIS,Ai=fr.JUSTIFY_CONTENT,Mi=fr.ALIGN_SELF,Oi=fr.ALIGN_ITEMS,Ri=fr.MATRIX,Si=fr.LETTER_SPACING,qt=fr.BACKGROUND_CLIP,Ci=fr.WHITE_SPACE,sr=fr.TEXT_OVERFLOW,Ii=fr.LINE_CLAMP,ki=fr.ORDER,wi=fr.FLEX_WRAP,Li=fr.ALIGN_CONTENT,Di=fr.TRANSLATE_PATH,Ni=fr.TEXT_STROKE_COLOR,Pi=fr.TEXT_STROKE_WIDTH,Fi=fr.TEXT_STROKE_OVER,Bi=S.AUTO,Yi=S.PX,Hi=S.PERCENT,Gi=S.NUMBER,Wi=S.INHERIT,Ui=S.DEG,Xi=S.RGBA,Vi=S.STRING,Ki=S.REM,zi=S.VW,ji=S.VH,$i=S.calUnit,Zi=ue.isNil,qi=ue.rgba2int,Ji=ue.equalArr,Qi=Rr.MEASURE_KEY_SET,tn=Rr.isGeom,en=Rr.GEOM,rn=Rr.GEOM_KEY_SET,nn=Zt.COLOR_HASH,on=Zt.LENGTH_HASH,an=Zt.RADIUS_HASH,sn=Zt.GRADIENT_HASH,hn=Zt.EXPAND_HASH,ln=Zt.GRADIENT_TYPE,cn={translateX:Fr,translateY:Br,translateZ:Yr,scaleX:Hr,scaleY:Gr,scaleZ:Wr,skewX:y,skewY:$t,rotateX:Y,rotateY:A,rotateZ:ft,rotate:ft};function un(t,e){t===Hr||t===Gr||t===Wr?e[1]=Gi:t===Fr||t===Br||t===Yr?e[1]===Gi&&(e[1]=Yi):t===Xr?-1<[Gi,Hi,Ui].indexOf(e[1])&&(e[1]=Yi):e[1]===Gi&&(e[1]=Ui)}function _n(t){for(var e=t.split(","),r="arial",i=0,n=e.length;i<n;i++)if(bt.support(e[i])){r=e[i];break}return r}function fn(t){var e=_n(t[ri]);return t[ei]*(bt.info[e]||bt.info.arial).lhr}function dn(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Bi){if(r!==Nr)break;e=e.domParent}else{if(i[1]===Yi)return t*i[0];if(i[1]===Hi)t*=.01*i[0],e=e.domParent;else{if(i[1]===Ki)return t*i[0]*e.root.computedStyle[ei];if(i[1]===zi)return t*i[0]*e.root.width*.01;if(i[1]===ji)return t*i[0]*e.root.height*.01}}}return t}var pn=(o(fr={},Dr,!0),o(fr,yi,!0),o(fr,kr.BACKGROUND_REPEAT,!0),o(fr,Ei,!0),o(fr,xi,!0),o(fr,bi,!0),o(fr,wi,!0),o(fr,Ai,!0),o(fr,Oi,!0),o(fr,Mi,!0),o(fr,kr.OVERFLOW,!0),o(fr,kr.MIX_BLEND_MODE,!0),o(fr,kr.STROKE_LINECAP,!0),o(fr,kr.STROKE_LINEJOIN,!0),o(fr,kr.STROKE_MITERLIMIT,!0),o(fr,kr.FILL_RULE,!0),o(fr,Jr,!0),o(fr,Qr,!0),o(fr,qt,!0),o(fr,sr,!0),o(fr,Ii,!0),fr),gn=(o(y={},ti,!0),o(y,Ni,!0),o(y,jr,!0),o(y,kr.BORDER_TOP_COLOR,!0),o(y,kr.BORDER_RIGHT_COLOR,!0),o(y,kr.BORDER_BOTTOM_COLOR,!0),o(y,kr.BORDER_LEFT_COLOR,!0),y),vn=(o($t={},kr.BORDER_TOP_LEFT_RADIUS,!0),o($t,kr.BORDER_TOP_RIGHT_RADIUS,!0),o($t,kr.BORDER_BOTTOM_RIGHT_RADIUS,!0),o($t,kr.BORDER_BOTTOM_LEFT_RADIUS,!0),o($t,Kr,!0),o($t,Jt,!0),$t);var mn={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!ue.isObject(a))return{};var u,e,r,i,n,o,s,h,l,c,_,f={},d=(a=ue.extend({},a)).border;return d&&_r.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){_r.toFull(a,t)}),(d=a.borderWidth)&&_r.toFull(a,"borderWidth"),(d=a.borderColor)&&_r.toFull(a,"borderColor"),(d=a.borderStyle)&&_r.toFull(a,"borderStyle"),(d=a.borderRadius)&&_r.toFull(a,"borderRadius"),(d=a.background)&&_r.toFull(a,"background"),d=a.backgroundPosition,Zi(d)||_r.toFull(a,"backgroundPosition"),(d=a.flex)&&_r.toFull(a,"flex"),(d=a.flexFlow)&&_r.toFull(a,"flexFlow"),d=a.margin,Zi(d)||_r.toFull(a,"margin"),d=a.padding,Zi(d)||_r.toFull(a,"padding"),(d=a.textStroke)&&_r.toFull(a,"textStroke"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){d=a[t],Zi(d)||_r.toFull(a,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){var e=a[t];!Zi(e)&&a.transform&&Le.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;Zi(a[e])&&(a[e]=t)}),void 0!==(d=a.backgroundImage)&&(d?Array.isArray(d)?f[zr]=d.map(function(t){return t?C.gradient.test(t)?tr.parseGradient(t):C.img.test(t)?C.img.exec(t)[2]:null:null}):C.gradient.test(d)?f[zr]=[tr.parseGradient(d)]:C.img.test(d)?f[zr]=[C.img.exec(d)[2]]:f[zr]=[null]:f[zr]=[null]),(d=a.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(d))&&-1<[4,7,9].indexOf(e[0].length)?f[jr]=[qi(e[0]),Xi]:(e=/rgba?\s*\(.+\)/i.exec(d),f[jr]=[qi(e?e[0]:[0,0,0,0]),Xi])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){d=a[t],Zi(d)||(t=e?Zr:$r,Array.isArray(d)||(d=[d]),f[t]=d.map(function(t){if(/^[-+]?[\d.]/.test(t)){var e=$i(t);return-1<[Gi,Ui].indexOf(e[1])&&(e[1]=Yi),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Hi]}))}),(d=a.backgroundSize)&&(Array.isArray(d)||(d=[d]),f[qr]=d.map(function(t){if(!t)return[[0,Bi],[0,Bi]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwh%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],i=0;i<2;i++){var n,o=e[i];/^[-+]?[\d.]/.test(o)?(n=$i(o),-1<[Gi,Ui].indexOf(n[1])&&(n[1]=Yi),r.push(n)):"contain"===o||"cover"===o?r.push([o,Vi]):r.push([0,Bi])}return r}return[[0,Bi],[0,Bi]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];Zi(e)||(f[kr[Lr(t)]]=[qi(e),Xi])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!Zi(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n=r[i];/^[-+]?[\d.]/.test(n)?(n=$i(n),-1<[Gi,Ui].indexOf(n[1])&&(n[1]=Yi),n[0]<0&&(n[0]=0),r[i]=n):r[i]=[0,Yi]}f[kr[Lr(t)]]=r}}),(d=a.transform)&&(u=f[Vr]=[],(e=(d||"").toString().match(/\w+\(.+?\)/g))&&e.forEach(function(t){var e,r,i,n,o,a,s,h,l=t.indexOf("("),c=t.slice(0,l),t=t.slice(l+1,t.length-1);"matrix"===c?6===(e=6<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,6):e).length&&u.push([Ri,[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]]):"matrix3d"===c?16===(e=16<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,16):e).length&&u.push([Ri,e]):"perspective"===c?((r=$i(t))[0]<0&&(r[0]=0),un(Xr,r),u.push([Xr,r])):"rotate3d"===c?4===(n=t.toString().split(/\s*,\s*/)).length&&(i=$i(n[3]),un(Ur,i),n[0]=parseFloat(n[0]),n[1]=parseFloat(n[1]),n[2]=parseFloat(n[2]),n[3]=i,u.push([Ur,n])):cn.hasOwnProperty(c)?(un(a=cn[c],s=$i(t)),u.push([a,s])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)?{translate3d:!0,scale3d:!0}.hasOwnProperty(c)&&(1===(r=t.toString().split(/\s*,\s*/)).length?(r[1]="scale3d"===c?[1]:[0],r[2]="scale3d"===c?[1]:[0]):2===r.length&&(r[2]="scale3d"===c?[1]:[0]),3===r.length&&(i=kr[Lr(c+"X")],n=kr[Lr(c+"Y")],o=kr[Lr(c+"Z")],a=$i(r[0]),s=$i(r[1]),h=$i(r[2]),un(i,a),un(n,s),un(o,h),u.push([i,a]),u.push([n,s]),u.push([o,h]))):(1===(o=t.toString().split(/\s*,\s*/)).length&&(o[1]="scale"===c?o[0]:[0]),2===o.length&&(h=kr[Lr(c+"X")],t=kr[Lr(c+"Y")],c=$i(o[0]),o=$i(o[1]),un(h,c),un(t,o),u.push([h,c]),u.push([t,o])))})),d=a.perspective,Zi(d)||((r=$i(d))[0]<0&&(r[0]=0),un(Xr,r),f[Xr]=r),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(d=a[t],!Zi(d)){var e=f[kr[Lr(t)]]=[],r=d.toString().match(C.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n,o=r[i];/^[-+]?[\d.]/.test(o)?(n=$i(o),-1<[Gi,Ui].indexOf(n[1])&&(n[1]=Yi),e.push(n)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[o],Hi]),Zi(e[i][0])&&(e[i][0]=50))}}else e.push([50,Hi]),e.push([50,Hi])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=a[t];Zi(e)||(un(t=cn[t],e=$i(e)),f[t]=e)}),!(d=a.rotate3d)||4===(i=d.toString().split(/\s*,\s*/)).length&&(r=$i(i[3]),un(Ur,r),i[0]=parseFloat(i[0]),i[1]=parseFloat(i[1]),i[2]=parseFloat(i[2]),i[3]=r,f[Ur]=i),d=a.opacity,Zi(d)||(d=parseFloat(d),isNaN(d)?f[Jr]=1:(d=Math.max(d,0),d=Math.min(d,1),f[Jr]=d)),d=a.zIndex,Zi(d)||(f[Qr]=parseInt(d)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=a[t];Zi(r)||("auto"===r?r=[0,Bi]:(r=$i(r),-1<[Gi,Ui].indexOf(r[1])&&(r[1]=Yi)),e=kr[Lr(t)],f[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),d=a.flexBasis,Zi(d)||("content"===d?f[Ti]=[d,Vi]:/^[\d.]/.test(d)?((i=f[Ti]=$i(d))[0]=Math.max(i[0],0),-1<[Gi,Ui].indexOf(i[1])&&(i[1]=Yi)):f[Ti]=[0,Bi]),d=a.order,Zi(d)||(f[ki]=parseInt(d)||0),d=a.color,Zi(d)||(f[ti]="inherit"===d?[[],Wi]:[qi(d),Xi]),d=a.textStrokeColor,Zi(d)||(f[Ni]="inherit"===d?[[],Wi]:[qi(d),Xi]),!(d=a.fontSize)&&0!==d||("inherit"===d||(n=$i(d))<0?f[ei]=[0,Wi]:(-1<[Gi,Ui].indexOf(n[1])&&(n[1]=Yi),f[ei]=n)),d=a.textStrokeWidth,Zi(d)||("inherit"===d||(o=$i(d))<0?f[Pi]=[0,Wi]:(-1<[Gi,Ui,Hi].indexOf(o[1])&&(o[1]=Yi),f[Pi]=o)),d=a.textStrokeOver,Zi(d)||("inherit"===d?f[Fi]=[0,Wi]:(o=d.toString(),f[Fi]=[o="none"!==o&&"fill"!==o?"none":o,Vi])),d=a.fontWeight,Zi(d)||(f[ii]="bold"===d?[700,Gi]:"normal"===d?[400,Gi]:"lighter"===d?[200,Gi]:"inherit"===d?[0,Wi]:[Math.max(0,parseInt(d))||400,Gi]),(d=a.fontStyle)&&(f[ni]="inherit"===d?[0,Wi]:[d,Vi]),(d=a.fontFamily)&&(f[ri]="inherit"===d?[0,Wi]:[d.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),Vi]),(d=a.textAlign)&&(f[ai]="inherit"===d?[0,Wi]:[d,Vi]),void 0!==(d=a.lineHeight)&&("inherit"===d?f[oi]=[0,Wi]:"normal"===d?f[oi]=[0,Bi]:/^[\d.]+/i.test(d)?(s=$i(d),-1<[Ui].indexOf(s[1])&&(s[1]=Gi),f[oi]=s):(s=Math.max(0,parseFloat(d))||"normal",f[oi]="normal"===s?[null,Bi]:[s,Gi])),void 0!==(d=a.letterSpacing)&&("inherit"===d?f[Si]=[0,Wi]:"normal"===d?f[Si]=[0,Yi]:/^[-+]?[\d.]/.test(d)?(h=$i(d),-1<[Gi,Ui].indexOf(h[1])&&(h[1]=Yi),f[Si]=h):f[Si]=[parseFloat(d)||0,Yi]),(d=a.whiteSpace)&&(f[Ci]="inherit"===d?[0,Wi]:[d,Vi]),void 0!==(d=a.lineClamp)&&(d=parseInt(d)||0,f[Ii]=Math.max(0,d)),void 0!==(d=a.fill)&&(d?Array.isArray(d)?d.length?f[ui]=d.map(function(t){return t?C.gradient.test(t)?tr.parseGradient(t):qi(t):"none"}):f[ui]=["none"]:C.gradient.test(d)?f[ui]=[tr.parseGradient(d)]:f[ui]=[qi(d)]:f[ui]=["none"]),void 0!==(d=a.stroke)&&(d?Array.isArray(d)?d.length?f[_i]=d.map(function(t){return t?C.gradient.test(t)?tr.parseGradient(t):qi(t):"none"}):f[_i]=["none"]:C.gradient.test(d)?f[_i]=[tr.parseGradient(d)]:f[_i]=[qi(d)]:f[_i]=["none"]),d=a.strokeWidth,Zi(d)||(Array.isArray(d)||(d=[d]),f[fi]=d.map(function(t){t=$i(t);return-1<[Gi,Ui].indexOf(t[1])&&(t[1]=Yi),t[0]=Math.max(t[0],0),t})),d=a.strokeDasharray,Zi(d)||(Array.isArray(d)?f[di]=d.map(function(t){t=t.toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(h=d.toString().match(/[\d.]+/g))?((h=h.map(function(t){return parseFloat(t)})).length%2==1&&h.push(h[h.length-1]),f[di]=[h]):f[di]=[[]]),void 0!==(d=a.filter)&&(_=(d||"").toString().match(/\b[\w-]+\s*\(\s*[-+]?[\d.]+\s*[pxremvwhdg%]*\s*\)\s*/gi),l=null,_&&(l=[],_.forEach(function(t){var e=/([\w-]+)\s*\(\s*([-+]?[\d.]+\s*[pxremvwhdg%]*)\s*\)\s*/i.exec(t);e&&(t=e[1].toLowerCase(),e=$i(e[2]),"blur"===t?e[0]<=0||-1<[Ui,Hi].indexOf(e[1])||(e[1]===Gi&&(e[1]=Yi),l.push([t,e])):"hue-rotate"===t?-1!==[Gi,Ui].indexOf(e[1])&&(e[1]=Ui,l.push([t,e])):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||-1!==[Gi,Hi].indexOf(e[1])&&(e[0]=Math.max(e[0],0),e[1]=Hi,l.push([t,e])))})),f[si]=l),(d=a.visibility)&&(f[hi]="inherit"===d?[0,Wi]:[d,Vi]),(d=a.pointerEvents)&&(f[ci]="inherit"===d?[0,Wi]:[d,Vi]),void 0!==(d=a.boxShadow)&&(c=null,(_=(d||"").match(/([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*\s*)?([-+]?[\d.]+[pxremvwh%]*\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&_.forEach(function(t){var e=/([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*\s*)?([-+]?[\d.]+[pxremvwh%]*\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){c=c||[];for(var r=[],i=0;i<4;i++){var n=$i(e[i+1]);-1<[Gi,Ui].indexOf(n[1])&&(n[1]=Yi),1<i&&n[0]<0&&(n=0),r.push(n)}r.push(qi(e[5])),r.push(e[6]||"outset"),c.push(r)}}),f[li]=c),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){a.hasOwnProperty(t)&&(f[kr[Lr(t)]]=a[t])}),["flexGrow","flexShrink"].forEach(function(t){a.hasOwnProperty(t)&&(f[kr[Lr(t)]]=Math.max(parseFloat(a[t])||0,0))}),d=a.zIndex,Zi(d)||(f[Qr]=parseFloat(d)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;a.hasOwnProperty(t)&&(e=a[t],f[kr[Lr(t)]]=Array.isArray(e)?e:[e])}),rn.forEach(function(t){a.hasOwnProperty(t)&&(f[t]=a[t])}),f},computeMeasure:function(r,i){var n=r.currentStyle,o=r.computedStyle,t=r.domParent,a=!i&&t.computedStyle;Qi.forEach(function(t){var e=n[t];t===ri?e[1]===Wi?o[t]=_n(i?lr.INHERIT[wr[t]]:a[t]):o[t]=_n(e[0]):e[1]===Wi?o[t]=i?lr.INHERIT[wr[t]]:a[t]:e[1]===Hi?o[t]=i?lr.INHERIT[wr[t]]:a[t]*e[0]*.01:e[1]===Ki?o[t]=i?lr.INHERIT[wr[t]]:r.root.computedStyle[ei]*e[0]:e[1]===zi?o[t]=i?lr.INHERIT[wr[t]]:.01*r.root.width*e[0]:e[1]===ji?o[t]=i?lr.INHERIT[wr[t]]:.01*r.root.height*e[0]:o[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,i=t.computedStyle,n=t.domParent,o=t.root,a=o.computedStyle[ei],s=!n,h=n&&n.computedStyle;[pi,gi,vi,mi].forEach(function(t){var e=r[t];e[1]===Yi?i[t]=e[0]:e[1]===Ki?i[t]=e[0]*a:e[1]===zi?i[t]=e[0]*o.width*.01:e[1]===ji?i[t]=e[0]*o.height*.01:i[t]=0}),[Dr,yi,Ei,Ai,Oi,Mi,xi,bi,Ii,ki,wi,Li].forEach(function(t){i[t]=r[t]});var l=r[ai];if(l[1]===Wi?i[ai]=s?"left":h[ai]:i[ai]=l[0],t=i[ei],(l=r[oi])[1]===Wi)if(s)i[oi]=fn(i);else{for(var c,u=n;u&&(c=u.currentStyle[oi])[1]===Wi;)u=u.domParent;-1<[Bi,Wi].indexOf(c[1])?i[oi]=fn(i):c[1]===Gi?i[oi]=Math.max(c[0],0)*t:i[oi]=h[oi]}else l[1]===Yi?i[oi]=Math.max(l[0],0)||fn(i):l[1]===Hi?i[oi]=Math.max(l[0]*t*.01,0)||fn(i):l[1]===Ki?i[oi]=Math.max(l[0]*a,0)||fn(i):l[1]===zi?i[oi]=Math.max(l[0]*o.width*.01,0)||fn(i):l[1]===ji?i[oi]=Math.max(l[0]*o.height*.01,0)||fn(i):l[1]===Gi?i[oi]=Math.max(l[0],0)*t||fn(i):i[oi]=fn(i);(l=r[Si])[1]===Wi?i[Si]=s?0:h[Si]:l[1]===Hi?i[Si]=.01*t*l[0]:l[1]===Ki?i[Si]=a*l[0]:l[1]===zi?i[Si]=.01*o.width*l[0]:l[1]===ji?i[Si]=.01*o.height*l[0]:i[Si]=l[0],(l=r[Ci])[1]===Wi?i[Ci]=s?"normal":h[Ci]:i[Ci]=l[0]},setFontStyle:function(t){var e=t[ei];return(t[ni]||"normal")+" "+(t[ii]||"400")+" "+e+"px/"+e+"px "+(t[ri]||"arial")},getFontFamily:_n,getBaseLine:function(t){var e=t[ei],r=_n(t[ri]),i=e*(bt.info[r]||bt.info.arial).lhr;return.5*(t[oi]-i)+e*(bt.info[r]||bt.info.arial).blr},calRelative:function(t,e,r,i,n){return r[1]===Bi?r=0:-1<[Yi,Gi].indexOf(r[1])?r=r[0]:r[1]===Hi?r=dn(r[0],i,n?Nr:Pr):r[1]===Ki?r=r[0]*i.root.computedStyle[ei]:r[1]===zi?r=r[0]*i.root.width*.01:r[1]===ji&&(r=r[0]*i.root.height*.01),r},calAbsolute:function(t,e,r,i,n){return r[1]===Bi?r=0:-1<[Yi,Gi,Ui,Xi,Vi].indexOf(r[1])?r=r[0]:r[1]===Hi?r=r[0]*i*.01:r[1]===Ki?r=r[0]*n.computedStyle[ei]:r[1]===zi?r=r[0]*n.width*.01:r[1]===ji&&(r=r[0]*n.height*.01),r},equalStyle:function(t,e,r,i){if(!e||!r)return e===r;if(t===Vr){if(e.length!==r.length)return!1;for(var n=0,o=e.length;n<o;n++){var a=e[n],s=r[n];if(a[0]!==s[0])return!1;if(!Ji(a[1],s[1]))return!1}return!0}if(t===si){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!Ji(e[h],r[h]))return!1}if(t===qr){if(e.length!==r.length)return!1;for(var c=0,u=e.length;c<u;c++){var _=e[c],f=r[c];if(_[0][0]!==f[0][0]||_[0][1]!==f[0][1]||_[1][0]!==f[1][0]||_[1][1]!==f[1][1])return!1}return!0}if(t===Kr||an.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===$r||t===Zr||on.hasOwnProperty(t)||hn.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===li)return Ji(e,r);if(nn.hasOwnProperty(t))return e[1]===r[1]&&Ji(e[0],r[0]);if(sn.hasOwnProperty(t)&&e.k===r.k&&ln.hasOwnProperty(e.k)){var d=e.v,p=r.v;if(e.d!==r.d||d.length!==p.length)return!1;for(var g=0,v=d.length;g<v;g++){var m=d[g],y=p[g];if(m.length!==y.length)return!1;for(var E=0;E<4;E++)if(m[0][E]!==y[0][E])return!1;if(1<m.length&&(m[1][0]!==y[1][0]||m[1][1]!==y[1][1]))return!1}return!0}return tn(i.tagName,t)&&(i.isMulti||Array.isArray(e)&&Array.isArray(r))?Ji(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[Dr])||"absolute"===t},cloneStyle:function(t,e){for(var r={},i=0,n=(e=e||Object.keys(t).map(function(t){return t=!en.hasOwnProperty(t)?parseInt(t):t})).length;i<n;i++){var o=e[i],a=t[o];if(o===zr)r[o]=a.map(function(t){return t&&t.k?ue.clone(t):t});else if(o===ui||o===_i)r[o]=a.map(function(t){return t&&t.k?ue.clone(t):t.slice(0)});else if(o===Vr||o===si){if(a){for(var s=a.slice(0),h=0,l=s.length;h<l;h++)s[h]=s[h].slice(0),s[h][1]=s[h][1].slice(0);r[o]=s}}else if(o===li)a&&(a=a.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),r[o]=a);else if(o===Di)a&&(r[o]=a.map(function(t){return t.slice(0)}));else if(pn.hasOwnProperty(o))r[o]=a;else if(en.hasOwnProperty(o))r[o]=ue.clone(a);else if(a){var c=r[o]=a.slice(0);if(o===$r||o===Zr)for(var u=0,_=c.length;u<_;u++)c[u]=c[u].slice(0);else if(o===qr)for(var f=0,d=c.length;f<d;f++)c[f]=c[f].slice(0),c[f][0]=c[f][0].slice(0),c[f][1]=c[f][1].slice(0);else if(gn.hasOwnProperty(o))c[0]=c[0].slice(0);else if(vn.hasOwnProperty(o))c[0]=c[0].slice(0),c[1]=c[1].slice(0);else if(o===Vr)for(var p=0,g=c.length;p<g;p++)c[p]=c[p].slice(0);else o===Ur&&(c[3]=c[3].slice(0))}}return r}},Y=m.STYLE_KEY,yn=Y.COLOR,En=Y.FONT_WEIGHT,xn=Y.FONT_FAMILY,bn=Y.FONT_SIZE,Tn=Y.FONT_STYLE,An=Y.LETTER_SPACING,Mn=Y.TEXT_STROKE_COLOR,On=Y.TEXT_STROKE_WIDTH,Rn=Y.TEXT_STROKE_OVER,Sn=function(){function h(t,e,r,i,n,o,a,s){_(this,h),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,this.__width=n,this.__height=o,this.__content=a,this.__wList=s,this.__virtualDom={}}return f(h,[{key:"render",value:function(t,e,r,i,n,o){var a=this.content,s=this.x,h=this.y,l=this.parent,c=this.wList,u=this.width,_=l.ox,l=l.oy;h+=mn.getBaseLine(r),h+=l+o,this.__endX=(s+=_+n)+u,this.__endY=h;var f=r[An],d=r[On],p=r[Mn],g=0,v=a.length;if(t===rt.CANVAS||t===rt.WEBGL){var m="fill"===r[Rn];if(f)for(;g<v;g++)m&&e.fillText(a.charAt(g),s,h),d&&(0<p[3]||3===p.length)&&e.strokeText(a.charAt(g),s,h),m||e.fillText(a.charAt(g),s,h),s+=c[g]+f;else m&&e.fillText(a,s,h),d&&(0<p[3]||3===p.length)&&e.strokeText(a,s,h),m||e.fillText(a,s,h)}else t===rt.SVG&&(t=[["x",s],["y",h],["fill",i[yn]],["font-family",r[xn]],["font-weight",r[En]],["font-style",r[Tn]],["font-size",r[bn]+"px"]],d&&(0<p[3]||3===p.length)&&(t.push(["stroke",i[Mn]]),t.push(["stroke-width",r[On]])),f&&t.push(["letter-spacing",f]),this.__virtualDom={type:"item",tagName:"text",props:t,content:ue.encodeHtml(a)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return this.parent.baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"wList",get:function(){return this.__wList}}]),h}(),Cn=[8,16,32,64,128,256,512,1024,2048,4096,8192],In=[128,64,32,16,8,4,2,1,1,1,1],kn=Cn[Cn.length-1],wn={},Ln=0,Dn=function(){function u(t,e){_(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;e=this.__canvas=Le.getCacheCanvas(t,t,null,e);e&&(this.__offscreen=e),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=Ln++,this.__update=!1,this.time=0}return f(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var n=r*t+i;if(e[n])return e[n]=0,this.__free--,n}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(kn<t)){for(var e=Cn[0],r=In[0],i=0,n=Cn.length;i<n&&(e=Cn[i],r=In[i],!(Cn[i]>=t));i++);for(var o,a=wn[e]=wn[e]||[],s=0,h=a.length;s<h;s++){var l=a[s];if(l.free){o=l;break}}if(!o){if(!(o=new u(e,r)).offscreen)return void Le.error("Can not create off-screen for page");a.push(o)}var c=o.add();return{page:o,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:Cn,NUMBER:In}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(Cn=t.SIZE,In=t.NUMBER,kn=Cn[Cn.length-1])}},{key:"MAX",get:function(){return kn}},{key:"genUuid",value:function(){return Ln++}}]),u}();function Nn(t,e,r,i){t=r-t,i-=e,e=Math.atan(Math.abs(i)/Math.abs(t));return t<0&&0<=i?Math.PI-e:t<0&&i<0?e-Math.PI:0<=t&&0<=i?e:-e}function Pn(t){var e=Math.sin(t),r=Math.cos(t),t=te.identity();return t[0]=t[5]=r,t[1]=e,t[4]=-e,t}function Fn(t,e){var r=Qt(t,6),i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],h=r[5],l=Qt(e,6),c=l[0],u=l[1],t=l[2],r=l[3],e=l[4],n=(o-i)*(h-n)-(s-i)*(a-n),u=(t-c)*(l[5]-u)-(e-c)*(r-u);return 0<n&&u<0||n<0&&0<u}A={exchangeOrder:function(t,e){var r,i,n,o=(n=Qt(l=t,6),o=n[0],c=n[1],a=n[2],s=n[3],h=n[4],t=n[5],l=[0,1,2],a<o&&a<h?(o=(n=[a,s,o,c])[0],c=n[1],a=n[2],s=n[3],l[0]=1,l[1]=0):h<a&&h<o&&(o=(r=[h,t,o,c])[0],c=r[1],h=r[2],t=r[3],l[0]=2,l[2]=0),o===a?s<c&&(o=(r=[a,s,o,c])[0],c=r[1],a=r[2],s=r[3],r=l[0],l[0]=l[1],l[1]=r):o===h&&t<c&&(o=(i=[h,t,o,c])[0],c=i[1],h=i[2],t=i[3],i=l[0],l[0]=l[2],l[2]=i),(a-o)*(t-c)-(h-o)*(s-c)<0&&(a=(i=[h,t,a,s])[0],s=i[1],h=i[2],t=i[3],i=l[1],l[1]=l[2],l[2]=i),[o,c,a,s,h,t,l]),a=(c=Qt(o,7))[0],s=c[1],h=c[2],t=c[3],l=c[4],o=c[5],c=Qt(function(t,e){for(var r=[],i=0,n=e.length;i<n;i++){var o=e[i];r.push(t[2*o]),r.push(t[2*o+1])}return r}(e,c[6]),6);return[[a,s,h,t,l,o],[c[0],c[1],c[2],c[3],c[4],c[5]]]},isOverflow:Fn,transform:function(t,e){var r,i=(E=Qt(t,6))[0],n=E[1],o=E[2],a=E[3],s=E[4],h=E[5],l=Qt(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=l[5],g=Fn(t,e),v=te.identity();v[12]=-i,v[13]=-n;var m=Nn(i,n,o,a);0!==m&&(r=Pn(-m),v=te.multiply(r,v));var y=et.pointsDistance(i,n,o,a),E=et.pointsDistance(c,u,_,f);return(l=te.identity())[12]=-c,l[13]=-u,t=m=Nn(c,u,_,f),0!==m&&(r=Pn(-m),l=te.multiply(r,l)),e=Math.abs(te.calPoint([s,h],v)[1]),m=Math.abs(te.calPoint([d,p],l)[1]),y===E&&e===m||(r=te.identity(),y!==E&&(r[0]=E/y),e!==m&&(r[5]=m/e),v=te.multiply(r,v)),l=v,i=Qt(te.calPoint([i,n],l),2),n=i[0],i=i[1],o=Qt(te.calPoint([o,a],l),2),a=o[0],o=o[1],s=Qt(te.calPoint([s,h],l),2),h=s[0],l=s[1],s=et.pointsDistance(n,i,a,o),i=et.pointsDistance(n,i,h,l),l=et.pointsDistance(h,l,a,o),a=et.pointsDistance(c,u,_,f),o=et.pointsDistance(c,u,d,p),f=et.pointsDistance(d,p,_,f),i=et.angleBySide(l,s,i),o=et.angleBySide(f,a,o),i!==o&&((r=te.identity())[4]=Math.tan(i-.5*Math.PI)+Math.tan(.5*Math.PI-o),v=te.multiply(r,v)),g&&(v[1]=-v[1],v[5]=-v[5],v[13]=-v[13]),(r=0!==t?Pn(t):te.identity())[12]=c,r[13]=u,te.multiply(r,v)}};function Bn(t,e){return e<t?1:t<e?-1:0}var Yn=function(t,e){void 0===e&&(e=!1),this._compare=t=void 0===t?Bn:t,this._root=null,this._size=0,this._noDuplicates=!!e},ft={size:{configurable:!0}};Yn.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},Yn.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},Yn.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},Yn.prototype.splay=function(t){for(var e,r,i,n;t.parent;)(r=(e=t.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=t:n.right=t,t.parent=n):(t.parent=null,this._root=t),i=t.left,n=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(i?(r.right=i).parent=r:r.right=null,(t.left=r).parent=t)),n?(e.left=n).parent=e:e.left=null,(t.right=e).parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(n?(r.left=n).parent=r:r.left=null,(t.right=r).parent=t)),i?(e.right=i).parent=e:e.right=null,(t.left=e).parent=t)},Yn.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},Yn.prototype.minNode=function(t){if(t=void 0===t?this._root:t)for(;t.left;)t=t.left;return t},Yn.prototype.maxNode=function(t){if(t=void 0===t?this._root:t)for(;t.right;)t=t.right;return t},Yn.prototype.insert=function(t,e){var r=this._root,i=null,n=this._compare;if(this._noDuplicates)for(;r;){if(0===n((i=r).key,t))return;r=n(r.key,t)<0?r.right:r.left}else for(;r;)r=n((i=r).key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:i},i?n(i.key,r.key)<0?i.right=r:i.left=r:this._root=r,this.splay(r),this._size++,r},Yn.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var i=r(e.key,t);if(i<0)e=e.right;else{if(!(0<i))return e;e=e.left}}return null},Yn.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var i=r(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},Yn.prototype.remove=function(t){var e=this.find(t);return!!e&&(this.splay(e),e.left?e.right?((t=this.minNode(e.right)).parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t):this.replace(e,e.left):this.replace(e,e.right),this._size--,!0)},Yn.prototype.removeNode=function(t){return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0);var e},Yn.prototype.erase=function(t){var e,r=this.find(t);r&&(this.splay(r),e=r.left,t=r.right,r=null,e&&(e.parent=null,r=this.maxNode(e),this.splay(r),this._root=r),t&&(e?r.right=t:this._root=t,t.parent=r),this._size--)},Yn.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},Yn.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)e=(t=e).parent;return e},Yn.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)e=(t=e).parent;return e},Yn.prototype.forEach=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)e?(r.push(e),e=e.left):0<r.length?(t(e=r.pop(),n++),e=e.right):i=!0;return this},Yn.prototype.range=function(t,e,r,i){for(var n=[],o=this._compare,a=this._root;0!==n.length||a;)if(a)n.push(a),a=a.left;else{if(0<o((a=n.pop()).key,e))break;if(0<=o(a.key,t)&&r.call(i,a))return this;a=a.right}return this},Yn.prototype.keys=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.key),t=t.right):i=!0;return r},Yn.prototype.values=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.data),t=t.right):i=!0;return r},Yn.prototype.at=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},Yn.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return r&&function t(e,r,i,n,o){if(n<=i)return;var a=e[i+n>>1];var s=i-1;var h=n+1;for(;;){for(;o(e[++s],a)<0;);for(;0<o(e[--h],a););if(h<=s)break;var l=e[s];e[s]=e[h],e[h]=l,l=r[s],r[s]=r[h],r[h]=l}t(e,r,i,h,o);t(e,r,h+1,n,o)}(t,e,0,i-1,this._compare),this._root=function t(e,r,i,n,o){var a=o-n;if(0<a){var s=n+Math.floor(a/2),h=r[s],a=i[s],e={key:h,data:a,parent:e};return e.left=t(e,r,i,n,s),e.right=t(e,r,i,s+1,o),e}return null}(null,t,e,0,i),this._size=i,this},Yn.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},Yn.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},Yn.prototype.isEmpty=function(){return null===this._root},ft.size.get=function(){return this._size},Yn.createTree=function(t,e,r,i,n){return new Yn(r,n).load(t,e,i)},Object.defineProperties(Yn.prototype,ft);var Hn=0,Gn=1,Wn=2,Un=3,Xn=0,Vn=1,Kn=2,zn=3;function jn(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!$n(e,r)||e.isVertical()?e.prevInResult:e));e=$n(t,r);t.resultTransition=e?function(t,e){var r,i=!t.inOut,n=!t.otherInOut;switch(e){case Xn:r=i&&n;break;case Vn:r=i||n;break;case zn:r=i^n;break;case Kn:r=t.isSubject?i&&!n:n&&!i}return r?1:-1}(t,r):0}function $n(t,e){switch(t.type){case Hn:switch(e){case Xn:return!t.otherInOut;case Vn:return t.otherInOut;case Kn:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case zn:return!0}break;case Wn:return e===Xn||e===Vn;case Un:return e===Kn;case Gn:return!1}return!1}var Zn=function(t,e,r,i,n){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=i,this.type=n||Hn,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},qt={inResult:{configurable:!0}};function qn(t,e){return t[0]===e[0]&&t[1]===e[1]}Zn.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?0<(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]):0<(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])},Zn.prototype.isAbove=function(t){return!this.isBelow(t)},Zn.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},qt.inResult.get=function(){return 0!==this.resultTransition},Zn.prototype.clone=function(){var t=new Zn(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties(Zn.prototype,qt);var sr=11102230246251565e-32,Jn=134217729,Qn=(3+8*sr)*sr;function to(t,e,r,i,n){var o,a,s,h,l=e[0],c=i[0],u=0,_=0;l<c==-l<c?(o=l,l=e[++u]):(o=c,c=i[++_]);var f=0;if(u<t&&_<r)for(l<c==-l<c?(s=o-((a=l+o)-l),l=e[++u]):(s=o-((a=c+o)-c),c=i[++_]),o=a,0!==s&&(n[f++]=s);u<t&&_<r;)l<c==-l<c?(s=o-((a=o+l)-(h=a-o))+(l-h),l=e[++u]):(s=o-((a=o+c)-(h=a-o))+(c-h),c=i[++_]),o=a,0!==s&&(n[f++]=s);for(;u<t;)s=o-((a=o+l)-(h=a-o))+(l-h),l=e[++u],o=a,0!==s&&(n[f++]=s);for(;_<r;)s=o-((a=o+c)-(h=a-o))+(c-h),c=i[++_],o=a,0!==s&&(n[f++]=s);return 0===o&&0!==f||(n[f++]=o),f}function eo(t){return new Float64Array(t)}var ro=(3+16*sr)*sr,io=(2+12*sr)*sr,no=(9+64*sr)*sr*sr,oo=eo(4),ao=eo(8),so=eo(12),ho=eo(16),lo=eo(4);function co(t,e,r,i,n,o,a){var s,h,l,c,u,_,f,d,p,g,v=t-n,m=r-n,y=e-o,E=i-o,x=v*E,b=Jn*v,T=b-(b-v),A=v-T;oo[0]=(f=A*(l=E-(h=(b=Jn*E)-(b-E)))-(x-T*h-A*h-T*l))-((c=f-(p=(A=y-(T=(b=Jn*y)-(b-y)))*(l=m-(h=(b=Jn*m)-(b-m)))-((d=y*m)-T*h-A*h-T*l)))+(s=f-c))+(s-p),oo[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),oo[2]=u-((g=u+c)-(s=g-u))+(c-s),oo[3]=g;var M=function(t,e){for(var r=e[0],i=1;i<t;i++)r+=e[i];return r}(4,oo),O=io*a;if(O<=M||O<=-M)return M;if(t=t-(v+(s=t-v))+(s-n),n=r-(m+(s=r-m))+(s-n),e=e-(y+(s=e-y))+(s-o),o=i-(E+(s=i-E))+(s-o),0==t&&0==e&&0==n&&0==o)return M;if((O=no*a+Qn*Math.abs(M))<=(M+=v*o+E*t-(y*n+m*e))||O<=-M)return M;lo[0]=(f=(A=t-(T=(b=Jn*t)-(b-t)))*(l=E-(h=(b=Jn*E)-(b-E)))-((x=t*E)-T*h-A*h-T*l))-((c=f-(p=(A=e-(T=(b=Jn*e)-(b-e)))*(l=m-(h=(b=Jn*m)-(b-m)))-((d=e*m)-T*h-A*h-T*l)))+(s=f-c))+(s-p),lo[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),lo[2]=u-((g=u+c)-(s=g-u))+(c-s),lo[3]=g;m=to(4,oo,4,lo,ao);lo[0]=(f=(A=v-(T=(b=Jn*v)-(b-v)))*(l=o-(h=(b=Jn*o)-(b-o)))-((x=v*o)-T*h-A*h-T*l))-((c=f-(p=(A=y-(T=(b=Jn*y)-(b-y)))*(l=n-(h=(b=Jn*n)-(b-n)))-((d=y*n)-T*h-A*h-T*l)))+(s=f-c))+(s-p),lo[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),lo[2]=u-((g=u+c)-(s=g-u))+(c-s),lo[3]=g;m=to(m,ao,4,lo,so);lo[0]=(f=(A=t-(T=(b=Jn*t)-(b-t)))*(l=o-(h=(b=Jn*o)-(b-o)))-((x=t*o)-T*h-A*h-T*l))-((c=f-(p=(A=e-(T=(b=Jn*e)-(b-e)))*(l=n-(h=(b=Jn*n)-(b-n)))-((d=e*n)-T*h-A*h-T*l)))+(s=f-c))+(s-p),lo[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),lo[2]=u-((g=u+c)-(s=g-u))+(c-s),lo[3]=g;m=to(m,so,4,lo,ho);return ho[m-1]}function uo(t,e,r){var i,n,o,a,s,h,e=(i=t[0],n=t[1],o=e[0],a=e[1],s=r[0],h=r[1],r=(t=(n-h)*(o-s))-(e=(i-s)*(a-h)),0==t||0==e||0<t!=0<e?r:(e=Math.abs(t+e),Math.abs(r)>=ro*e?r:-co(i,n,o,a,s,h,e)));return 0<e?-1:e<0?1:0}function _o(t,e){var r=t.point,i=e.point;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:(e=e,r=r,(t=t).left===e.left?0===uo(r,t.otherEvent.point,e.otherEvent.point)?!t.isSubject&&e.isSubject?1:-1:t.isBelow(e.otherEvent.point)?-1:1:t.left?1:-1)}function fo(t,e,r){var i=new Zn(e,!1,t,t.isSubject),e=new Zn(e,!0,t.otherEvent,t.isSubject);return qn(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=e.contourId=t.contourId,0<_o(e,t.otherEvent)&&(t.otherEvent.left=!0,e.left=!1),t.otherEvent.otherEvent=e,t.otherEvent=i,r.push(e),r.push(i),r}function po(t,e){return t[0]*e[1]-t[1]*e[0]}function go(t,e){return t[0]*e[0]+t[1]*e[1]}function vo(t,e,r){var i=function(t,e,r,i,n){var o=[e[0]-t[0],e[1]-t[1]],a=[i[0]-r[0],i[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var h=[r[0]-t[0],r[1]-t[1]],l=po(o,a),c=go(o,o);if(0<l*l){e=po(h,a)/l;if(e<0||1<e)return null;i=po(h,o)/l;return i<0||1<i?null:0==e||1==e?n?null:[s(t,e,o)]:0==i||1==i?n?null:[s(r,i,a)]:[s(t,e,o)]}return 0<(l=po(h,o))*l?null:(h=go(o,h)/c,a=h+go(o,a)/c,c=Math.min(h,a),a=Math.max(h,a),c<=1&&0<=a?1===c?n?null:[s(t,0<c?c:0,o)]:0===a?n?null:[s(t,a<1?a:1,o)]:n&&0===c&&1===a?null:[s(t,0<c?c:0,o),s(t,a<1?a:1,o)]:null)}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),n=i?i.length:0;if(0===n)return 0;if(1===n&&(qn(t.point,e.point)||qn(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===n&&t.isSubject===e.isSubject)return 0;if(1===n)return qn(t.point,i[0])||qn(t.otherEvent.point,i[0])||fo(t,i[0],r),qn(e.point,i[0])||qn(e.otherEvent.point,i[0])||fo(e,i[0],r),1;var o=[],n=!1,i=!1;return qn(t.point,e.point)?n=!0:1===_o(t,e)?o.push(e,t):o.push(t,e),qn(t.otherEvent.point,e.otherEvent.point)?i=!0:1===_o(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),n&&i||n?(e.type=Gn,t.type=e.inOut===t.inOut?Wn:Un,n&&!i&&fo(o[1].otherEvent,o[0].point,r),2):(i?fo(o[0],o[1].point,r):o[0]!==o[3].otherEvent?(fo(o[0],o[1].point,r),fo(o[1],o[2].point,r)):(fo(o[0],o[1].point,r),fo(o[3].otherEvent,o[2].point,r)),3)}function mo(t,e){if(t===e)return 0;if(0!==uo(t.point,t.otherEvent.point,e.point)||0!==uo(t.point,t.otherEvent.point,e.otherEvent.point))return qn(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===_o(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,i=e.point;return r[0]===i[0]&&r[1]===i[1]?(r=t.otherEvent.point,i=e.otherEvent.point,r[0]===i[0]&&r[1]===i[1]?0:t.contourId>e.contourId?1:-1):1===_o(t,e)?1:-1}var yo=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function Eo(t){for(var c=function(t){for(var e,r,i=[],n=0,o=t.length;n<o;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var a=!1;!a;)for(a=!0,n=0,o=i.length;n<o;n++)n+1<o&&1===_o(i[n],i[n+1])&&(r=i[n],i[n]=i[n+1],i[n+1]=r,a=!1);for(n=0,o=i.length;n<o;n++)(e=i[n]).otherPos=n;for(n=0,o=i.length;n<o;n++)(e=i[n]).left||(r=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=r);return i}(t),u={},_=[],e=function(){if(!u[f]){var t,e,r,i,n=_.length,o=(t=c[f],e=_,r=n,l=new yo,null!=t.prevInResult?(t=(i=t.prevInResult).outputContourId,0<i.resultTransition?null!=(i=e[t]).holeOf?(e[i=i.holeOf].holeIds.push(r),l.holeOf=i,l.depth=e[t].depth):(e[t].holeIds.push(r),l.holeOf=t,l.depth=e[t].depth+1):(l.holeOf=null,l.depth=e[t].depth)):(l.holeOf=null,l.depth=0),l),a=function(t){u[t]=!0,c[t].outputContourId=n},s=f,h=f,l=c[f].point;for(o.points.push(l);a(s),a(s=c[s].otherPos),o.points.push(c[s].point),(s=function(t,e,r,i){var n,o=t+1,a=e[t].point,s=e.length;for(o<s&&(n=e[o].point);o<s&&n[0]===a[0]&&n[1]===a[1];){if(!r[o])return o;n=e[++o].point}for(o=t-1;r[o]&&i<o;)o--;return o}(s,c,u,h))!=h;);_.push(o)}},f=0,r=c.length;f<r;f++)e();return _}yo.prototype.isExterior=function(){return null==this.holeOf};var xo=bo,fr=bo;function bo(t,e){if(!(this instanceof bo))return new bo(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||To,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this._down(r)}function To(t,e){return t<e?-1:e<t?1:0}bo.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];0<t;){var n=t-1>>1,o=e[n];if(0<=r(i,o))break;e[t]=o,t=n}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&r(e[a],s)<0&&(s=e[o=a]),0<=r(s,n))break;e[t]=s,t=o}e[t]=n}},xo.default=fr;var Ao=Math.max,Mo=Math.min,Oo=0;function Ro(t,e,r,i,n,o){for(var a=0,s=t.length-1;a<s;a++){var h=t[a],l=t[a+1],c=new Zn(h,!1,void 0,e),u=new Zn(l,!1,c,e);c.otherEvent=u,h[0]===l[0]&&h[1]===l[1]||(c.contourId=u.contourId=r,o||(c.isExteriorRing=!1,u.isExteriorRing=!1),0<_o(c,u)?u.left=!0:c.left=!0,l=h[0],h=h[1],n[0]=Mo(n[0],l),n[1]=Mo(n[1],h),n[2]=Ao(n[2],l),n[3]=Ao(n[3],h),i.push(c),i.push(u))}}var So=[];function Co(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var i=(o=e,n=r,s=null,(a=t).length*o.length==0&&(n===Xn?s=So:n===Kn?s=a:n!==Vn&&n!==zn||(s=0===a.length?o:a)),s);if(i)return i===So?null:i;var n,o,a,s,h=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],c=function(t,e,r,i,n){for(var o,a,s,h,l=new xo(null,_o),c=0,u=t.length;c<u;c++)for(s=0,h=(o=t[c]).length;s<h;s++)(a=0===s)&&Oo++,Ro(o[s],!0,Oo,l,r,a);for(c=0,u=e.length;c<u;c++)for(s=0,h=(o=e[c]).length;s<h;s++)a=0===s,(a=n===Kn?!1:a)&&Oo++,Ro(o[s],!1,Oo,l,i,a);return l}(t,e,h,l,r);if(n=t,o=e,a=r,s=null,((t=h)[0]>(e=l)[2]||e[0]>t[2]||t[1]>e[3]||e[1]>t[3])&&(a===Xn?s=So:a===Kn?s=n:a!==Vn&&a!==zn||(s=n.concat(o))),i=s)return i===So?null:i;for(var u=Eo(function(t,e,r,i){for(var n=new Yn(mo),o=[],a=Math.min(e[2],r[2]);0!==t.length;){var s,h,l,c,u,_=t.pop();if(o.push(_),i===Xn&&_.point[0]>a||i===Kn&&_.point[0]>e[2])break;_.left?(l=h=n.insert(_),h=h!==(s=n.minNode())?n.prev(h):null,l=n.next(l),jn(_,c=h?h.key:null,i),l&&2===vo(_,l.key,t)&&(jn(_,c,i),jn(_,l.key,i)),h&&2===vo(h.key,_,t)&&(jn(c,(u=(u=h)!==s?n.prev(u):null)?u.key:null,i),jn(_,c,i))):(_=_.otherEvent,l=h=n.find(_),h&&l&&(h=h!==s?n.prev(h):null,l=n.next(l),n.remove(_),l&&h&&vo(h.key,l.key,t)))}return o}(c,h,l,r)),_=[],f=0;f<u.length;f++){var d=u[f];if(d.isExterior()){for(var p=[d.points],g=0;g<d.holeIds.length;g++){var v=d.holeIds[g];p.push(u[v].points)}_.push(p)}}return _}var y={matrix:te,tar:A,geom:et,martinez:{union:function(t,e){return Co(t,e,Vn)},diff:function(t,e){return Co(t,e,Kn)},intersection:function(t,e){return Co(t,e,Xn)},xor:function(t,e){return Co(t,e,zn)}}},Jt=m.STYLE_KEY,Io=Jt.TRANSLATE_X,ko=Jt.TRANSLATE_Y,wo=Jt.TRANSLATE_Z,Lo=Jt.SCALE_X,Do=Jt.SCALE_Y,No=Jt.SCALE_Z,Po=Jt.SKEW_X,Fo=Jt.SKEW_Y,Bo=Jt.ROTATE_X,Yo=Jt.ROTATE_Y,Ho=Jt.ROTATE_Z,Go=Jt.ROTATE_3D,Wo=Jt.PERSPECTIVE,Uo=Jt.MATRIX,Xo=Jt.FONT_SIZE,Vo=S.PX,Ko=S.PERCENT,zo=S.REM,jo=S.VW,$o=S.VH,$t=y.matrix,Zo=$t.identity,qo=$t.multiply,Jo=$t.isE,Qo=y.geom.d2r;function ta(t,e,r,i){var n,o,a,s,t=(n=e,o=r,a=i,s=[],t.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];s.push([t,function(t,e,r,i,n){if(t===Io||t===wo){if(e[1]===Ko)return e[0]*r*.01;if(e[1]===zo)return e[0]*n.computedStyle[Xo];if(e[1]===jo)return e[0]*n.width*.01;if(e[1]===$o)return e[0]*n.height*.01}else if(t===ko){if(e[1]===Ko)return e[0]*i*.01;if(e[1]===zo)return e[0]*n.computedStyle[Xo];if(e[1]===jo)return e[0]*n.width*.01;if(e[1]===$o)return e[0]*n.height*.01}else{if(t===Uo)return e;if(t===Go)return e}return e[0]}(t,e,n,o,a)])}),s),g=Zo();return t.forEach(function(t){var e,r,i,n,o,a,s,h,l,c,u,_=Qt(t,2),f=_[0],d=_[1],p=Zo();e=p,i=d,(r=f)===Io?e[12]=i:r===ko?e[13]=i:r===wo?e[14]=i:r===Lo?e[0]=i:r===Do?e[5]=i:r===No?e[10]=i:r===Po?(i=Qo(i),e[4]=Math.tan(i)):r===Fo?(i=Qo(i),e[1]=Math.tan(i)):r===Bo?(i=Qo(i),o=Math.sin(i),n=Math.cos(i),e[5]=e[10]=n,e[6]=o,e[9]=-o):r===Yo?(i=Qo(i),s=Math.sin(i),u=Math.cos(i),e[0]=e[10]=u,e[8]=s,e[2]=-s):r===Ho?(i=Qo(i),l=Math.sin(i),h=Math.cos(i),e[0]=e[5]=h,e[1]=l,e[4]=-l):r===Go?(t=(c=Qt(i,4))[0],_=c[1],d=c[2],f=c[3],f=Qo(f[0]),n=Math.sin(f),o=Math.cos(f),!t||_||d?!_||t||d?!d||t||_?(1!==(u=Math.sqrt(t*t+_*_+d*d))&&(t*=a=1/u,_*=a,d*=a),s=t*_,h=_*d,l=d*t,c=t*n,f=_*n,u=d*n,e[0]=t*t*(a=1-o)+o,e[1]=s*a+u,e[2]=l*a-f,e[3]=0,e[4]=s*a-u,e[5]=_*_*a+o,e[6]=h*a+c,e[7]=0,e[8]=l*a+f,e[9]=h*a-c,e[10]=d*d*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(d<0&&(n=-n),e[0]=o,e[4]=-n,e[1]=n,e[5]=o):(_<0&&(n=-n),e[0]=o,e[8]=n,e[2]=-n,e[10]=o):(t<0&&(n=-n),e[5]=o,e[9]=-n,e[6]=n,e[10]=o)):r===Wo&&0<i?(i=Math.max(i,1),e[11]=-1/i):r===Uo&&ue.assignMatrix(e,i),g=qo(g,p)}),g}function ea(t,e){var r=Qt(e,2),i=r[0],e=r[1],r=t.slice(0);return 0===i&&0===e||Jo(t)?r:(r=qo([1,0,0,0,0,1,0,0,0,0,1,0,i,e,0,1],r),r=qo(r,[1,0,0,0,0,1,0,0,0,0,1,0,-i,-e,0,1]))}var ra={calMatrix:ta,calOrigin:function(t,r,i,n){var o=[];return t.forEach(function(t,e){t[1]===Vo?o.push(t[0]):t[1]===Ko?o.push(t[0]*(e?i:r)*.01):t[1]===zo?o.push(t[0]*n.computedStyle[Xo]):t[1]===jo?o.push(t[0]*n.width*.01):t[1]===$o&&o.push(t[0]*n.height*.01)}),o},calMatrixByPerspective:function(t,e){return t=!Jo(e)?qo(e,t):t},calPerspectiveMatrix:function(t,e){if(t&&0<t){var r=Zo();t=Math.max(t,1),r[11]=-1/t;t=Qt(e,2),e=t[0],t=t[1];return(e||t)&&(r=qo([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=qo(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r}},calMatrixByOrigin:ea,calMatrixWithOrigin:function(t,e,r,i){return ea(ta(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}};function ia(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function na(t){return 3*Math.floor(.5*t)}var oa={kernelSize:ia,outerSize:function(t){return na(ia(t))},outerSizeByD:na,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),n=0,o=i;0<=o;o--){var a=Math.pow(Math.E,-Math.pow(o,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(a),n+=a}for(var s=1;s<=i;s++){var h=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(h),n+=h}if(1!==n)for(var l=0;l<e;l++)r[l]/=n;return r}},Y=m.STYLE_KEY,aa=Y.TRANSFORM_ORIGIN,sa=Y.TRANSFORM,ft=(Y.DISPLAY,Y.VISIBILITY,m.NODE_KEY);ft.NODE_OPACITY,ft.NODE_CACHE_TOTAL,ft.NODE_CACHE_FILTER,ft.NODE_CACHE_OVERFLOW,ft.NODE_HAS_CONTENT,ft.NODE_COMPUTED_STYLE;function ha(t,e){var r=t.size,i=t.sx1,n=t.sy1,o=t.width,a=t.height,s=t.bbox,e=Le.getCacheCanvas(o,a,null,e);return e.x=0,e.y=0,e.bbox=s,e.size=r,e.sx1=i,e.sy1=n,e.dx=t.dx,e.dy=t.dy,e.dbx=t.dbx,e.dby=t.dby,e.width=o,e.height=a,e}var la=function(){function p(t,e,r,i,n,o,a){_(this,p),this.__init(t,e,r,i,n,o,a)}return f(p,[{key:"__init",value:function(t,e,r,i,n,o,a){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=n;r=Qt(i.getCoords(n),2),n=r[0],r=r[1];this.__x=n,this.__y=r,this.__appendData(o,a),this.__isNew=!0,i.canvas&&(this.__enabled=!0,(a=i.ctx).setTransform(1,0,0,1,0,0),a.globalAlpha=1,_e.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,n,o,a;ue.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),(a=Dn.getInstance(Math.max(i,n)))?(o=a.page,a=a.pos,this.__init(i,n,t,o,a,e,r)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return Dn.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),o=Dn.getInstance(Math.max(i,n));if(o)return new p(i,n,t,o.page,o.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=0;e.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t&&(r=oa.outerSize(e))});var i=t.x,n=t.y,o=t.size,a=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox;(u=u.slice(0))[0]-=r,u[1]-=r,u[2]+=r,u[3]+=r;var _=Le.getCacheCanvas(l+2*r,c+2*r,null,"filter");return _.ctx.filter=Tt.canvasFilter(e),_.ctx.drawImage(a,i,n,l,c,r,r,l,c),_.ctx.filter="none",_.draw(),_.bbox=u,_.x=0,_.y=0,_.size=o,_.sx1=s-r,_.sy1=h-r,_.dx=t.dx,_.dy=t.dy,_.dbx=t.dbx,_.dby=t.dby,_.width=l+2*r,_.height=c+2*r,_}},{key:"genMask",value:function(t,e,r){for(var i=ha(t,"mask1"),n=[],o=e.computedStyle,a=o[sa],s=o[aa],h=e.next,l=h.isClip;h&&h.isMask;)n.push(h),h=h.next;var c=i.x,u=i.y,_=i.ctx,f=i.dbx,o=i.dby;s[0]+=c+f+e.__sx1-t.sx1,s[1]+=u+o+e.__sy1-t.sy1;var d=ra.calMatrixByOrigin(a,s);return n.forEach(function(t){r(t,i,d)}),_.setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.globalCompositeOperation=l?"source-out":"source-in",p.drawCache(t,i),_.globalCompositeOperation="source-over",i.draw(_),i}},{key:"genOverflow",value:function(t,e){var r=t.bbox,i=e.sx,n=e.sy,o=e.outerWidth,a=e.outerHeight;if(r[0]<i||r[1]<n||r[2]>i+o||r[3]>n+a){var s=ha(t,"overflow"),e=s.ctx;return e.setTransform(1,0,0,1,0,0),e.globalAlpha=1,p.drawCache(t,s),s.draw(e),e.globalCompositeOperation="destination-in",e.fillStyle="#FFF",e.beginPath(),e.rect(i-r[0],n-r[1],o,a),e.fill(),e.closePath(),e.globalCompositeOperation="source-over",s}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(ue.equalArr(e,r))return t;var i=r[0]-e[0],n=r[1]-e[1],o=p.getInstance(e);if(o&&o.enabled){var a=t.x,s=t.y,h=t.canvas,l=t.width,c=t.height,r=o.x,e=o.y;return o.sx1=t.sx1,o.sy1=t.sy1,o.dx=t.dx+i,o.dy=t.dy+n,o.dbx=t.dbx+i,o.dby=t.dby+n,o.ctx.drawImage(h,a,s,l,c,i+r,n+e,l,c),o.__available=!0,t.release(),o}}},{key:"drawCache",value:function(t,e,r,i,n,o,a){var s=e.x,h=e.y,l=e.sx1,c=e.sy1,u=e.ctx,_=e.dbx,f=e.dby,d=t.x,p=t.y,g=t.canvas,v=t.sx1,m=t.sy1,y=t.dbx,E=t.dby,e=t.width,t=t.height,y=s+v-l+_-y,E=h+m-c+f-E;r&&i&&n&&(n[0]+=y,n[1]+=E,n=ra.calMatrixByOrigin(r,n),i=te.multiply(i,n),te.isE(o)||(i=te.multiply(o,i)),a&&(i=ue.equalArr(i,a)?te.identity():(a=te.inverse(a),te.multiply(a,i))),u.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),u.drawImage(g,d,p,e,t,y,E,e,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var n=i.x,o=i.y,a=i.canvas,s=i.sx1,h=i.sy1,l=i.dbx,e=i.dby,r=i.width,i=i.height;t.drawImage(a,n,o,r,i,s-l,h-e,r,i)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),p}();o(la,"NA",0),o(la,"LOCAL",1),o(la,"CHILD",2),o(la,"SELF",3);var qt=m.STYLE_KEY,sr=m.STYLE_KEY,ca=sr.TRANSLATE_X,ua=sr.TRANSLATE_Y,_a=sr.TRANSLATE_Z,fa=sr.OPACITY,da=sr.FILTER,pa=sr.PERSPECTIVE,ga=sr.PERSPECTIVE_ORIGIN,va={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},ma=(o(fr={},qt.SCALE_X,!0),o(fr,qt.SCALE_Y,!0),o(fr,qt.SCALE_Z,!0),o(fr,qt.ROTATE_X,!0),o(fr,qt.ROTATE_Y,!0),o(fr,qt.ROTATE_Z,!0),o(fr,qt.ROTATE_3D,!0),o(fr,qt.TRANSFORM,!0),o(fr,qt.TRANSFORM_ORIGIN,!0),fr),ya=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Rr.isIgnore(t)?va.NONE:t===ca?va.TRANSLATE_X:t===ua?va.TRANSLATE_Y:t===_a?va.TRANSLATE_Z:ma.hasOwnProperty(t)?va.TRANSFORM:t===fa?va.OPACITY:t===da?va.FILTER:t===pa||t===ga?va.PERSPECTIVE:Rr.isRepaint(t)?va.REPAINT:va.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<va.REFLOW},isRebuild:function(t){return va.REBUILD<=t}},va);ya.TRANSFORMS=ma;var A=m.STYLE_KEY,Ea=A.DISPLAY,xa=A.LINE_HEIGHT,ba=A.FONT_SIZE,Ta=A.FONT_FAMILY,Aa=A.FONT_STYLE,Ma=A.FONT_WEIGHT,Oa=A.COLOR,Ra=A.VISIBILITY,Sa=A.LETTER_SPACING,Ca=A.OVERFLOW,Ia=A.WHITE_SPACE,ka=A.TEXT_OVERFLOW,wa=A.WIDTH,La=A.TEXT_STROKE_COLOR,Da=A.TEXT_STROKE_WIDTH,Jt=m.NODE_KEY,Na=Jt.NODE_CACHE,Pa=Jt.NODE_LIMIT_CACHE,Fa=Jt.NODE_DOM_PARENT,Ba=Jt.NODE_MATRIX_EVENT,Ya=Jt.NODE_OPACITY,Ha=Jt.NODE_VIRTUAL_DOM,$t=m.UPDATE_KEY,Ga=$t.UPDATE_NODE,Wa=$t.UPDATE_MEASURE,Ua=$t.UPDATE_FOCUS,Xa=$t.UPDATE_CONFIG,Va=fe.ELLIPSIS,Ka=S.AUTO,za=S.REM,ja=S.VW,$a=S.VH,Za=function(){t(i,R);var r=e(i);function i(t){var e;return _(this,i),(e=r.call(this)).__content=ue.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return f(i,[{key:"__computeMeasure",value:function(t,e){var r=this.content,i=this.computedStyle,n=this.charWidthList;n.splice(0);for(var o=i[Ta].split(","),a="arial",s=0,h=o.length;s<h;s++)if(Le.checkSupportFontFamily(o[s])){a=o[s];break}this.__ff=a;for(var l=i[ba],c=i[Ma],u=this.__key=i[ba]+","+a+","+c,_=fe.data[u]=fe.data[u]||{ff:a,fs:l,fw:c,hash:{},s:""},f=fe.charWidth[u]=fe.charWidth[u]||{},d=0,p=!1,g=this.domParent;"inline"===g.currentStyle[Ea];)g=g.domParent;for(var v=(this.__bp=g).computedStyle,m=0,y=v[Ta].split(","),E=y.length;m<E;m++)if(Le.checkSupportFontFamily(y[m])){a=o[m];break}var x=v[ba],l=v[Ma],c=this.__pKey=x+",arial,"+l,u=fe.charWidth[c]=fe.charWidth[c]||{};t===rt.CANVAS||t===rt.WEBGL?(t===rt.WEBGL&&(e=Le.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__").ctx),u.hasOwnProperty(Va)||(e.font=mn.setFontStyle(v),u[Va]=e.measureText(Va).width),e.font=mn.setFontStyle(i)):t===rt.SVG&&(u.hasOwnProperty(Va)||(u[Va]=0,(fe.data[c]=fe.data[c]||{ff:"arial",fs:x,fw:l,hash:{},s:""}).s+=Va,p=!0));for(var b=0,T=r.length;b<T;b++){var A=r.charAt(b),M=void 0;f.hasOwnProperty(A)?(M=f[A],n.push(M),d+=M,this.__charWidth=Math.max(this.charWidth,M)):t===rt.CANVAS||t===rt.WEBGL?(M=f[A]=e.measureText(A).width,n.push(M),d+=M,this.__charWidth=Math.max(this.charWidth,M)):(_.hash.hasOwnProperty(A)||(_.s+=A),_.hash[A]=!0,n.push(-1),p=!0)}this.__textWidth=d,p&&fe.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,i=this.__key,n=fe.charWidth[i],o=0,a=0,s=r.length;a<s;a++)r[a]<0&&(o+=t=r[a]=n[e.charAt(a)],this.__charWidth=Math.max(this.charWidth,t));this.__textWidth=o}},{key:"__layout",value:function(t){var e=this.__config[Na];e&&e.release();var r=t.x,i=t.y,n=t.w,o=t.lx,a=void 0===o?r:o,s=t.lineBoxManager,e=t.endSpace,h=void 0===e?0:e,o=t.lineClamp,l=void 0===o?0:o,e=t.lineClampCount,c=void 0===e?0:e;this.__x=this.__sx1=r,this.__y=this.__sy1=i;var o=this.isDestroyed,u=this.content,e=this.currentStyle,_=this.computedStyle,f=this.textBoxes,d=this.charWidthList,p=this.root,g=this.__ff,v=this.__key;if(f.splice(0),this.__config[Pa]=!1,o||"none"===e[Ea]||!u)return c;var m,y,E,x,b=this.__ox=this.__oy=0,T=0,A=r-a,M=A,O=u.length,R=0,S=_[xa],C=_[Sa],o=_[Ia],I=_[ba],k=_[Ma],w=bt.info[g].padding,L=!!w,D=fe.charWidth[this.__pKey][Va],N=0;if("nowrap"===o){var P,F,e=this.__bp.currentStyle,B=e[Ea],o=e[Ca],Y=e[wa],e=e[ka];if("hidden"===o)for(;T<O;){if(n<(M+=d[T]+C)){("block"===B||"flex"===B||Y[1]!==Ka)&&(P=!0);break}T++}else for(;T<O;)M+=d[T++]+C;P&&"ellipsis"===e?(i=(F=Qt(this.__lineBack(M,n,A,h,D,C,b,T,O,N,S,a,r,i,R,f,u,d,s),2))[0],R=F[1]):(F=new Sn(this,f.length,r,i,M-A,S,u,d),f.push(F),s.addItem(F),R=M-A,i+=S)}else{for(;T<O;){var H,G,W,U=d[T]+C;if(M+=U,L&&((H=u[T])===m&&w.hasOwnProperty(H)&&w[H]&&(W=void 0,G=fe.padding[v]=fe.padding[v]||{},fe.padding.hasOwnProperty(v)&&G.hasOwnProperty(H)&&(W=!0,M-=G[H]),W||(W=0,p.renderMode===rt.CANVAS?(p.ctx.font=mn.setFontStyle(_),W=2*p.ctx.measureText(H).width-p.ctx.measureText(H+H).width,W*=w[H]):p.renderMode===rt.SVG&&(W=Le.measureTextSync(v,g,I,k,H),W*=w[H]),M-=W,G[H]=W)),m=H),0!==U)if(M===n){if(l&&l-1<=N+c){var X=Qt(this.__lineBack(M,n,A,h,D,C,b,T,O,N,S,a,r,i,R,f,u,d,s),2);i=X[0],R=X[1],N++;break}X=void 0;T===O-1&&n-h<M&&T&&(M-=d[T--]),T++,N?(X=new Sn(this,f.length,a,i,M,S,u.slice(b,T),d.slice(b,T)),R=Math.max(R,M)):X=new Sn(this,f.length,r,i,R=M-A,S,u.slice(b,T),d.slice(b,T)),f.push(X),s.addItem(X,!0),i+=Math.max(S,s.lineHeight),b=T,M=0,N++,m=null}else if(n+1e-10<M){if(l&&l-1<=N+c){var V=Qt(this.__lineBack(M,n,A,h,D,C,b,T,O,N,S,a,r,i,R,f,u,d,s),2);i=V[0],R=V[1],N++;break}X=void 0,X=T<=b?M:M-d[T--];T++;V=void 0;N?(V=new Sn(this,f.length,a,i,X,S,u.slice(b,T),d.slice(b,T)),R=Math.max(R,X)):V=new Sn(this,f.length,r,i,R=X-A,S,u.slice(b,T),d.slice(b,T)),f.push(V),s.addItem(V,!0),i+=Math.max(S,s.lineHeight),b=T,M=0,N++,m=null}else T++;else T++}N&&(this.__x=this.__sx1=a),b<O&&(!l||N+c<l)&&(N?(n-h<M&&b<O-1&&(y=!0,M-=d[O-1]),x=new Sn(this,f.length,a,i,M,S,u.slice(b,y?O-1:O),d.slice(b,y?O-1:O)),R=Math.max(R,M),f.push(x),s.addItem(x),i+=Math.max(S,s.lineHeight),y&&(y=d[O-1],x=new Sn(this,f.length,a,i,y,S,u.slice(O-1),d.slice(O-1)),R=Math.max(R,y),f.push(x),s.setNewLine(),s.addItem(x),i+=S,N++)):(b&&n-h<M&&(E=!0,M-=d[O-1]),x=new Sn(this,f.length,r,i,R=M-A,S,u.slice(b,E?O-1:O),d.slice(b,E?O-1:O)),f.push(x),s.addItem(x),i+=Math.max(S,s.lineHeight),E&&(E=d[O-1],x=new Sn(this,f.length,a,i,E,S,u.slice(O-1),d.slice(O-1)),R=Math.max(R,E),f.push(x),s.setNewLine(),s.addItem(x),i+=S,N++)))}return this.__width=R,this.__height=i-t.y,this.__baseLine=mn.getBaseLine(_),N}},{key:"__lineBack",value:function(t,e,r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m){for(;a<=s;s--)if((t-=v[s]+o)+n+i<=e&&s){var y=new Sn(this,p.length,l?u:_,f,d=t-(l?0:r),c,g.slice(a,s),v.slice(a,s));p.push(y),m.addItem(y,!0),f+=Math.max(c,m.lineHeight),this.__ellipsis=!0;break}if(s<0){var E=m.lineBox;if(E.size){var x=E.list;t:for(var b=x.length-1;0<=b;b--){var T=x[b],A=T.content,M=T.wList,O=T.width;if(t-O+n<=e||!b)for(var R=M.length-1;0<=R;R--){if(!R&&!b||t+n<=e){T.__content=A,T.__width=O,T.parent.__ellipsis=!0;break t}var S=M[R];T.__endY-=S,O-=S,A=A.slice(0,R),t-=S,M.pop()}else t-=O;x.pop(),T.parent.textBoxes.pop()}}else{E=new Sn(this,p.length,l?u:_,f,d=t-(l?0:r),c,g.charAt(a),v.slice(a,a+1));p.push(E),m.addItem(E,!0),f+=Math.max(c,m.lineHeight),this.__ellipsis=!0}}return[f,d]}},{key:"__offsetX",value:function(e,t){P(N(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){P(N(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.charWidthList[0]}},{key:"__inlineSize",value:function(){var r,i;this.textBoxes.forEach(function(t,e){i=e?(r=Math.min(r,t.x),Math.max(i,t.x+t.width)):(r=t.x,t.x+t.width)}),this.__x=r,this.__sx=this.__sx1=r+this.ox,console.log(22222),this.__width=i-r}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=this.isDestroyed,s=this.computedStyle,h=this.textBoxes,l=this.cacheStyle,c=this.__ellipsis,u=this.__bp,_=this.__config;if(e===rt.SVG&&(_[Ha]=this.__virtualDom={type:"text",children:[]}),!a&&"none"!==s[Ea]&&"hidden"!==s[Ra]&&h.length){if(e===rt.CANVAS||e===rt.WEBGL){if(e===rt.WEBGL)if(i){var f=this.sx,d=this.sy,a=this.bbox,i=_[Na];if(i?i.reset(a,f,d):i=la.getInstance(a,f,d),!i||!i.enabled)return void(_[Pa]=!0);(_[Na]=i).__available=!0,r=i.ctx,n+=i.dx,o+=i.dy,_[Pa]=!1}else{var p=this.root,g=Le.getCacheCanvas(p.width,p.height,"__$$OVERSIZE$$__");r=g.ctx;var p=_[Fa].__config,g=p[Ba],p=p[Ya];r.setTransform(g[0],g[1],g[4],g[5],g[12],g[13]),r.globalAlpha=p}var g=mn.setFontStyle(s);r.font!==g&&(r.font=g);p=l[Oa];r.fillStyle!==p&&(r.fillStyle=p);var g=s[Da];r.lineWidth!==g&&(r.lineWidth=g);p=l[La];r.strokeStyle!==p&&(r.strokeStyle=p)}h.forEach(function(t){t.render(e,r,s,l,n,o)}),e===rt.SVG&&(this.virtualDom.children=h.map(function(t){return t.virtualDom})),c&&(p=(g=h[h.length-1]).endX,c=g.endY,h=u.computedStyle,e===rt.CANVAS||e===rt.WEBGL?(g=mn.setFontStyle(h),r.font!==g&&(r.font=g),g=u.__cacheStyle[Oa],r.fillStyle!==g&&(r.fillStyle=g),r.fillText(Va,p,c)):e===rt.SVG&&(h=[["x",p],["y",c],["fill",u.__cacheStyle[Oa]],["font-family",h[Ta]],["font-weight",h[Ma]],["font-style",h[Aa]],["font-size",h[ba]+"px"]],this.virtualDom.children.push({type:"item",tagName:"text",props:h,content:Va})))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(i.prototype),"__destroy",this).call(this),(t=this.__config[Na])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,e){var n=this;i!==n.__content?(root.delRefreshTask(n.__task),root.addRefreshTask(n.__task={__before:function(){n.__content=i;var t={},e=n.domParent;t[Ga]=e,t[Wa]=!0,t[Ua]=ya.REFLOW,t[Xa]=e.__config;var r=e.root;r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(t){ue.isFunction(e)&&e(t)}})):ue.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"firstCharWidth",get:function(){return this.charWidthList[0]||0}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,n=this.root,o=this.currentStyle[Da],a=0,a=o[1]===za?Math.max(o[0]*n.computedStyle[ba]*.5,a):o[1]===ja?Math.max(o[0]*n.width*.01*.5,a):o[1]===$a?Math.max(o[0]*n.height*.01*.5,a):Math.max(.5*o[0],a);return[t-(a+=1),e-a,t+r+a,e+i+a]}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}();Za.prototype.__renderByMask=Za.prototype.render;var qa=Vt.TYPE_VD,Ja=Vt.TYPE_GM,Qa=Vt.TYPE_CP;function ts(t){if(Array.isArray(t))return t.map(ts);if(!t||-1===[qa,Ja,Qa].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==qa&&t.$$type!==Ja)t&&t.$$type===Qa?(r.push(t),i.lastText=null):ue.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===qa&&ts(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var es,rs,is,ns,os,Y=m.NODE_KEY,as=Y.NODE_DOM_PARENT,ss=Y.NODE_STYLE,hs=Y.NODE_CURRENT_STYLE,ls=Y.NODE_COMPUTED_STYLE,cs=Y.NODE_MATRIX,us=Y.NODE_MATRIX_EVENT,_s=Vt.TYPE_VD,fs=Vt.TYPE_GM,ds=Vt.TYPE_CP;function ps(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return ps(t,e,r,i)});if(ue.isObject(t)&&t.$$type){var n=t.tagName,o=t.props,a=t.children,s=t.klass,h=t.$$type,l=t.__inheritAnimate,c=t.__animateRecords;if(h===ds&&t.__placeholder)return t.__placeholder;if(h===_s){if("img"===n){if(u=new is(n,o),Array.isArray(a)&&a.length)throw new Error("Img can not contain children")}else u=new rs(n,o);if("p"===n)i=!0;else if("div"===n&&i)throw new Error("Markup p can not contain div");a=Array.isArray(a)?gs(u,ps(a,e,r,i)):[],u.__children=a}else if(h===fs)var u=new(ns.getRegister(n))(n,o);else{if(h!==ds)return new Za(t);(u=new s(o)).__tagName=n||u.__tagName}(t.vd=u).__json=t,c&&((u.__animateRecords=c).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),l&&(ue.extendAnimate(l,u),delete t.__inheritAnimate),u.__root=e,u.__host=r,h===ds&&u.__init();o=o.ref;return ue.isString(o)&&o||ue.isNumber(o)?r.ref[o]=u:ue.isFunction(o)&&o(u),u}return new Za(t)}function gs(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){gs(e,t,i)}):(r instanceof es||r instanceof os||r instanceof Za)&&(r.__parent=e,r.__domParent=e,r instanceof Za&&[ss,hs,ls,cs,us].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[as]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof os&&((t=r.shadowRoot)instanceof Za&&(t.__parent=e,[ss,hs,ls,cs,us].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[as]=e))),r}var vs={ref:function(t){es=t.Xom,rs=t.Dom,is=t.Img,ns=t.Geom,os=t.Component},initRoot:function(t,e){return t=ts({tagName:e.tagName,props:{},children:t,$$type:_s}),e.__json=t,gs(e.__host=e,ps(t.children,e,e))},initDom:function(t,e,r,i){return gs(i,ps(t,e,r))},initCp:function(t,e,r){return ue.isObject(t)?ps(t,e,r):new Za(t)},initCp2:function(t,e,r,i){var n=new t.klass(t.props);return n.__tagName=t.tagName||n.__tagName,n.__root=e,n.__host=r,n.__json=t,n.__init(),gs(i,n)},relation:gs},ms=ue.isFunction,ys=function(){function a(){_(this,a),this.__eHash={}}return f(a,[{key:"on",value:function(t,e){if(ms(e)){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else{this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var n=0,o=this.__eHash[t],a=o.length;n<a;n++)if(o[n]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,n){if(ms(n)){var o=this;if(a.__karasEventCb=n,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)o.once(i[t],n);else n&&o.on(i,a);return this}function a(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(o,e),o.off(i,a)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,o=this.__eHash[t],a=o.length;n<a;n++)if(o[n]===e||o[n].__karasEventCb===e){o.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)this.emit(t[n],r);else if(this.__eHash.hasOwnProperty(t)){var a=this.__eHash[t];if(a.length)for(var s=0,h=(a=a.slice()).length;s<h;s++){var l=a[s];ms(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new a;e.__eHash={};for(var i=["on","once","off","emit"],n=i.length-1;0<=n;n--){var o=i[n];e[o]=r[o]}}}}]),a}();o(ys,"REFRESH","refresh"),o(ys,"PAUSE","pause"),o(ys,"PLAY","play"),o(ys,"FRAME","frame"),o(ys,"FINISH","finish"),o(ys,"CANCEL","cancel"),o(ys,"BEGIN","begin"),o(ys,"END","end");var Es=ue.isNil,xs=ue.isFunction,bs=ue.clone,Ts=ue.extend,As={};var Ms=function(){t(o,ys);var r=e(o);function o(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _(this,o),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=ue.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return f(o,[{key:"setState",value:function(t,e){var r=this,i=this;if(Es(t))t={};else{if(xs(t))return;if(0===Object.keys(t).length)return void(xs(e)&&e.call(i));var n=bs(i.state);t=Ts(n,t)}var o,a=i.root;a&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],o=[],n=i.__task={__before:function(){o=i.__taskList.splice(0),function t(e){e.__hasUpdate||(e.__hasUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){o.forEach(function(t){xs(t)&&t.call(i)})}},a.addRefreshCp(n)):xs(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this;this.__ref={};var e=this.root,i=t||ts(this.render()),n=vs.initCp(i,e,this);if(this.__cd=i,!(n instanceof Za))if(n instanceof R){t=mn.normalize(this.props.style),i=Object.keys(t);Ts(n.style,t,i),Ts(n.currentStyle,t,i),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),n.listener[t]=e)})}else if(!(n instanceof o))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=n).__host=this;n instanceof o;)n.__hostRoot=this,n=(n.shadow.__host=n).shadow;((this.__shadowRoot=n).__hostRoot=this).__isMounted||(this.__isMounted=!0,xs(this.componentDidMount)&&e.once(ys.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){Le.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,xs(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof Za))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return As}},{key:"getRegister",value:function(t){if(!t||!ue.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!As.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return As[t]}},{key:"register",value:function(t,e){if(!(t&&ue.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof o))throw new Error("Invalid param: Component register");if(o.hasRegister(t))throw new Error("Component has already register: ".concat(t));As[t]=e}},{key:"hasRegister",value:function(t){return t&&As.hasOwnProperty(t)}},{key:"delRegister",value:function(t){o.hasRegister(t)&&delete As[t]}}]),o}();Object.keys(Rr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(Ms.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){Ms.prototype[e]=function(){var t=this.shadowRoot;if(t&&xs(t[e]))return t[e].apply(t,arguments)}});var ft=m.STYLE_KEY,Os=ft.SCALE_X,Rs=ft.SCALE_Y,Ss=S.PERCENT,Cs=S.NUMBER;var Is={matrixResize:function(t,e,r,i,n,o,a,s){if(t!==r||e!==i){i=[[Os,[r/t,Cs]],[Rs,[i/e,Cs]]],e=ra.calOrigin([[0,Ss],[0,Ss]],a,s);return e[0]+=n,e[1]+=o,ra.calMatrixWithOrigin(i,e,a,s)}}},sr=m.STYLE_KEY,ks=sr.BACKGROUND_POSITION_X,ws=sr.BACKGROUND_POSITION_Y,Ls=sr.FONT_SIZE,Ds=m.NODE_KEY.NODE_DEFS_CACHE,Ns=ue.clone,Ps=ue.joinArr,Fs=Tt.canvasPolygon,Bs=Tt.svgPolygon,Ys=S.AUTO,Hs=S.PX,Gs=S.PERCENT,Ws=S.STRING,Us=S.REM,Xs=S.VW,Vs=S.VH;function Ks(t,e,r,i,n,o,a,s,h,l,c,u,_){var f,d,p,g,v=13<arguments.length&&void 0!==arguments[13]?arguments[13]:"fill",m=14<arguments.length&&void 0!==arguments[14]&&arguments[14],y=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,E=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(d=i[1],f=i[2],g=i[3],i=i[0]),n=(n=n||Xt.calRadius(o,a,s,h,l,c,u,_))||[[o,a],[o+s,a],[o+s,a+h],[o,a+h],[o,a]],d&&(d=ra.calMatrixByOrigin(d,[f,g]),p=te.inverse(d),n=n.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=te.calPoint([t[r],t[r+1]],p);e.push(n[0]),e.push(n[1])}return e})),e===rt.CANVAS||e===rt.WEBGL)d&&(r.save(),g=t.matrixEvent,d=te.multiply(g,d),r.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),Fs(r,n,y,E),r[v](),r.closePath(),d&&r.restore();else if(e===rt.SVG){n=Bs(n);if(m){m={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",n],["fill",i]]}]};return t.__config[Ds].push(m),r.add(m)}t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",n],["fill",i]]}),d&&(t=t.virtualDom.bb)[t.length-1].props.push(["transform","matrix(".concat(Ps(te.m2m6(d),","),")")])}}function zs(t,e,r,i){if(Array.isArray(t)){if(t[1]===Hs)return t[0];if(t[1]===Gs)return(e-r)*t[0]*.01;if(t[1]===Us)return t[0]*i.computedStyle[Ls];if(t[1]===Xs)return t[0]*i.width*.01;if(t[1]===Vs)return t[0]*i.height*.01}return 0}var js,$s={renderBgc:Ks,renderImage:function(i,t,e,r,n,o,a,s,h,l,c,u,_,f,d,p,g,v){var m=18<arguments.length&&void 0!==arguments[18]?arguments[18]:0,y=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0,E=r.source;if(E){var x=(a+=m)-(n+=m),b=(s+=y)-(o+=y),T=r.width,A=r.height,d=Qt(d[f]||[],2),M=d[0],O=d[1];-1===M&&-1===O?(M=T,O=A):-2===M?x<T&&b<A?(O=A/b)<=(M=T/x)?O=(M=x)*A/T:M=(O=b)*T/A:x<T?O=(M=x)*A/T:b<A?M=(O=b)*T/A:(M=T,O=A):-3===M?T<x&&A<b?(M=T/x)<=(O=A/b)?O=(M=x)*A/T:M=(O=b)*T/A:T<x||!(A<b)&&(M=T/x)<=(O=A/b)?O=(M=x)*A/T:M=(O=b)*T/A:-1===M?M=O*T/A:-1===O&&(O=M*A/T);var R=n+zs(_[ks][f],x,M,i.root),S=o+zs(_[ws][f],b,O,i.root),C=R<n||S<o||n+x<R+M||o+b<S+O,I=0,k=0,w=0,L=0;-1<["repeat-x","repeatX","repeat"].indexOf(p[f])&&(0<(_=R-n)&&(I=Math.ceil(_/M)),0<(_=n+x-R-M)&&(k=Math.ceil(_/M))),-1<["repeat-y","repeatY","repeat"].indexOf(p[f])&&(0<(f=S-o)&&(w=Math.ceil(f/O)),0<(f=o+b-S-O)&&(L=Math.ceil(f/O)));var D=[];if(0<I)for(var N=0;N<I;N++){var P=R-(N+1)*M;D.push([P,S]),!C&&0===N&&P<n&&(C=!0)}if(0<k)for(var F=0;F<k;F++){var B=R+(F+1)*M;D.push([B,S]),!C&&F===k-1&&n+x<B+M&&(C=!0)}if(0<w)for(var Y=0;Y<w;Y++){var H=S-(Y+1)*O;D.push([R,H]),!C&&0===Y&&H<o&&(C=!0)}if(0<L)for(var G=0;G<L;G++){var W=S+(G+1)*O;D.push([R,W]),!C&&G===L-1&&o+b<W+M&&(C=!0)}if(0<I&&0<w)for(var U=0;U<I;U++)for(var X=0;X<w;X++)D.push([R-(U+1)*M,S-(X+1)*O]);if(0<k&&0<w)for(var V=0;V<k;V++)for(var K=0;K<w;K++)D.push([R+(V+1)*M,S-(K+1)*O]);if(0<I&&0<L)for(var z=0;z<I;z++)for(var j=0;j<L;j++)D.push([R-(z+1)*M,S+(j+1)*O]);if(0<k&&0<L)for(var $=0;$<k;$++)for(var Z=0;Z<L;Z++)D.push([R+($+1)*M,S+(Z+1)*O]);if(t===rt.CANVAS||t===rt.WEBGL)C&&(e.save(),Ks(this,t,e,"#FFF",null,n,o,x,b,h,l,c,u,"clip")),e.drawImage(E,R,S,M,O),D.forEach(function(t){e.drawImage(E,t[0],t[1],M,O)}),C&&e.restore();else if(t===rt.SVG){var q,t=Is.matrixResize(T,A,M,O,R,S,x,b),J=[["xlink:href",r.url],["x",R],["y",S],["width",T],["height",A]];if(t&&!te.isE(t)&&(q=!0,J.push(["transform","matrix("+Ps(te.m2m6(t),",")+")"])),C&&(r=[n,o],s=[a,s],q&&(t=te.inverse(t),r=te.calPoint(r,t),s=te.calPoint(s,t)),s={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(r[0],",").concat(r[1],"L").concat(s[0],",").concat(r[1],"L").concat(s[0],",").concat(s[1],"L").concat(r[0],",").concat(s[1],"L").concat(r[0],",").concat(r[1])],["fill","#FFF"]]}]},r=e.add(s),g[Ds].push(s),J.push(["clip-path","url(#"+r+")"])),v){var Q={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:J}]};return i.__config[Ds].push(Q),D.forEach(function(t){var e,r=Ns(J);!q||(e=Is.matrixResize(T,A,M,O,t[0],t[1],x,b))&&!te.isE(e)&&(r[5][1]="matrix("+Ps(te.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],Q.children.push({type:"img",tagName:"image",props:r})}),e.add(Q)}i.virtualDom.bb.push({type:"img",tagName:"image",props:J}),D.forEach(function(t){var e,r=Ns(J);!q||(e=Is.matrixResize(T,A,M,O,t[0],t[1],x,b))&&!te.isE(e)&&(r[5][1]="matrix("+Ps(te.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],i.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}},calBackgroundSize:function(t,r,i,n){var o=[];return t.forEach(function(t,e){t[1]===Hs?o.push(t[0]):t[1]===Gs?o.push(t[0]*(e?i:r)*.01):t[1]===Us?o.push(t[0]*n.computedStyle[Ls]):t[1]===Xs?o.push(t[0]*n.width*.01):t[1]===Vs?o.push(t[0]*n.height*.01):t[1]===Ys?o.push(-1):t[1]===Ws&&o.push("contain"===t[0]?-2:-3)}),o}},Zs=ue.isFunction;function qs(t,e,r,i){if(i)for(var n=0;n<e;n++){var o=t[n];o[1]?o[1](r):o.__after&&o.__after(r)}else for(var a=0;a<e;a++){var s=t[a];s[0]?s[0](r):s.__before&&s.__before(r)}}var Js=new(function(){function t(){_(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return f(t,[{key:"__init",value:function(){var c=this,u=c.task,_=c.taskCp;Le.cancelAnimationFrame(c.id);var f=c.__now=Le.now();!function l(){Le.cancelAnimationFrame(c.id),c.id=Le.requestAnimationFrame(function(){if(!js&&(u.length||_.length)){var t=(n=c.__now=Le.now())-f,t=Math.max(t,0);f=n;var e=u.slice(0),r=_.splice(0),i=e.length,n=r.length;qs(e,i,t,!1),qs(r,n,t,!1);for(var o=c.__hookTask.splice(0),a=0,s=o.length;a<s;a++){var h=o[a];h&&h()}qs(e,i,t,!0),qs(r,n,t,!0),(u.length||_.length)&&l()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Zs(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var n=e[r];if(n===t||n.__karasFramecb===t){e.splice(r,1);break}}e.length||(Le.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=Zs(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){js=!0}},{key:"resume",value:function(){js&&(this.__init(),js=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),Qs=4,th=1e-7,eh=10,rh="function"==typeof Float32Array;function ih(t,e){return 1-3*e+3*t}function nh(t,e,r){return((ih(e,r)*t+(3*r-6*e))*t+3*e)*t}function oh(t,e,r){return 3*ih(e,r)*t*t+2*(3*r-6*e)*t+3*e}function ah(t){return t}function sh(o,e,a,r){if(!(0<=o&&o<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(o===e&&a===r)return ah;for(var s=new(rh?Float32Array:Array)(11),t=0;t<11;++t)s[t]=nh(.1*t,o,a);function i(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var i=e+.1*((t-s[--r])/(s[r+1]-s[r])),n=oh(i,o,a);return.001<=n?function(t,e,r,i){for(var n=0;n<Qs;++n){var o=oh(e,r,i);if(0===o)return e;e-=(nh(e,r,i)-t)/o}return e}(t,i,o,a):0===n?i:function(t,e,r,i,n){for(var o,a,s=0;0<(o=nh(a=e+(r-e)/2,i,n)-t)?r=a:e=a,Math.abs(o)>th&&++s<eh;);return a}(t,e,e+.1,o,a)}return function(t){return 0===t||1===t?t:nh(i(t),e,r)}}var hh={linear:sh(1,1,0,0),easeIn:sh(.42,0,1,1),easeOut:sh(0,0,.58,1),ease:sh(.25,.1,.25,1),easeInOut:sh(.42,0,.58,1),cubicBezier:sh,getEasing:function(t,e,r,i){return 4===arguments.length?sh(t,e,r,i):Array.isArray(t)&&4===t.length?sh(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?n=sh((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(n=this[t]),n):void 0;var n}};hh["ease-in"]=hh.easeIn,hh["ease-out"]=hh.easeOut,hh["ease-in-out"]=hh.easeInOut;var qt=m.STYLE_KEY,lh=qt.FILTER,ch=qt.TRANSFORM_ORIGIN,uh=qt.PERSPECTIVE_ORIGIN,_h=qt.BACKGROUND_CLIP,fh=qt.BACKGROUND_POSITION_X,dh=qt.BACKGROUND_POSITION_Y,ph=qt.BOX_SHADOW,gh=qt.TRANSLATE_X,vh=qt.TRANSLATE_Y,mh=qt.TRANSLATE_Z,yh=qt.BACKGROUND_SIZE,Eh=qt.FONT_SIZE,xh=qt.FLEX_BASIS,bh=qt.FLEX_DIRECTION,Th=qt.WIDTH,Ah=qt.HEIGHT,Mh=qt.TOP,Oh=qt.BOTTOM,Rh=qt.LINE_HEIGHT,Sh=qt.OPACITY,Ch=qt.Z_INDEX,Ih=qt.TRANSFORM,kh=qt.COLOR,wh=qt.FONT_WEIGHT,Lh=qt.FONT_STYLE,Dh=qt.FONT_FAMILY,Nh=qt.TEXT_ALIGN,Ph=qt.MATRIX,Fh=qt.ROTATE_3D,Bh=qt.TRANSLATE_PATH,Yh=qt.TEXT_STROKE_COLOR,Hh=qt.TEXT_STROKE_OVER,fr=m.UPDATE_KEY,Gh=fr.UPDATE_NODE,Wh=fr.UPDATE_STYLE,Uh=fr.UPDATE_KEYS,Xh=fr.UPDATE_CONFIG,A=m.KEY_FRAME_KEY,Vh=A.FRAME_STYLE,Kh=A.FRAME_TIME,zh=A.FRAME_EASING,jh=A.FRAME_TRANSITION,Jt=m.ANIMATE_KEY,$h=Jt.I_ASSIGNING,Zh=Jt.I_IN_FPS,qh=Jt.I_IS_DELAY,Jh=Jt.I_BEGIN,Qh=Jt.I_END,tl=Jt.I_FINISHED,el=Jt.I_NEXT_END,rl=Jt.I_FIRST_PLAY,il=Jt.I_FRAME_CB,nl=Jt.I_PLAY_CB,ol=Jt.I_TARGET,al=Jt.I_ROOT,sl=Jt.I_FRAMES,hl=Jt.I_FRAMES_R,ll=Jt.I_CURRENT_TIME,cl=Jt.I_NEXT_TIME,ul=Jt.I_STYLE,_l=Jt.I_DURATION,fl=Jt.I_ITERATIONS,dl=Jt.I_FILL,pl=Jt.I_PLAYBACK_RATE,gl=Jt.I_PLAY_COUNT,vl=Jt.I_PLAY_STATE,ml=Jt.I_DESTROYED,yl=Jt.I_START_TIME,El=Jt.I_FPS_TIME,xl=Jt.I_EASING,bl=Jt.I_ENTER_FRAME,Tl=Jt.I_DELAY,Al=Jt.I_END_DELAY,Ml=Jt.I_KEYS,Ol=Jt.I_ORIGIN_STYLE,Rl=Jt.I_CURRENT_FRAMES,Sl=Jt.I_CURRENT_FRAME,Cl=Jt.I_SPF_LIMIT,Il=Jt.I_FPS,kl=Jt.I_DIRECTION,wl=Jt.I_CAL_DIFF_TIME,Ll=Jt.I_FIRST_ENTER,Dl=Jt.I_STAY_BEGIN,Nl=Jt.I_STAY_END,Pl=Jt.I_IS2,Fl=Jt.I_END_TIME,Bl=Jt.I_NODE_CONFIG,Yl=Jt.I_ROOT_CONFIG,Hl=Jt.I_OUT_BEGIN_DELAY,Gl=Jt.I_TIME_STAMP,Wl=S.AUTO,Ul=S.PX,Xl=S.PERCENT,Vl=S.INHERIT,Kl=S.RGBA,zl=S.STRING,jl=S.NUMBER,$l=S.REM,Zl=S.VW,ql=S.VH,Jl=S.calUnit,Ql=ue.isNil,tc=ue.isFunction,ec=ue.isNumber,rc=ue.isObject,ic=ue.isString,nc=ue.clone,oc=ue.equalArr,ac=hh.linear,sc=mn.cloneStyle,hc=Rr.isGeom,lc=Rr.GEOM,cc=Zt.COLOR_HASH,uc=Zt.LENGTH_HASH,_c=Zt.RADIUS_HASH,fc=Zt.GRADIENT_HASH,dc=Zt.EXPAND_HASH,pc=Zt.GRADIENT_TYPE,gc={};function vc(t,e,r,i,n){var o={};o[Gh]=n,o[Wh]=t,o[Uh]=e,o[Xh]=r[Bl],i.__addUpdate(n,r[Bl],i,r[Yl],o),r[ul]=t,r[$h]=!0,i.__frameHook()}function mc(t,e,r,i){return t[1]===Ul?e[1]===Xl?.01*e[0]*r-t[0]:e[1]===$l?e[0]*i.computedStyle[Eh]-t[0]:e[1]===Zl?e[0]*i.width*.01-t[0]:e[1]===ql?e[0]*i.height*.01-t[0]:void 0:t[1]===Xl?e[1]===Ul?100*e[0]/r-t[0]:e[1]===$l?e[0]*i.computedStyle[Eh]*100/r-t[0]:e[1]===Zl?e[0]*i.width/r-t[0]:e[1]===ql?e[0]*i.height/r-t[0]:void 0:t[1]===$l?e[1]===Ul?e[0]/i.computedStyle[Eh]-t[0]:e[1]===Xl?.01*e[0]*r/i.computedStyle[Eh]-t[0]:e[1]===Zl?e[0]*i.width*.01/i.computedStyle[Eh]-t[0]:e[1]===ql?e[0]*i.height*.01/i.computedStyle[Eh]-t[0]:void 0:t[1]===Zl?e[1]===Ul?100*e[0]/i.width-t[0]:e[1]===$l?100*e[0]*i.computedStyle[Eh]/i.width-t[0]:e[1]===Xl?e[0]*r/i.width-t[0]:e[1]===ql?e[0]*i.height/i.width-t[0]:void 0:t[1]===ql?e[1]===Ul?100*e[0]/i.height-t[0]:e[1]===$l?100*e[0]*i.computedStyle[Eh]/i.height-t[0]:e[1]===Zl?e[0]*i.width/i.height-t[0]:e[1]===Xl?e[0]*r/i.height-t[0]:void 0:void 0}function yc(e,r,t,i,n){return t.forEach(function(t){t=function(t,e,r,o,i){var n=[r],a=t[r],s=e[r];if(r===Ih){if(!a&&!s)return;var h=a?a[0][1]:te.identity(),e=s?s[0][1]:te.identity();return oc(h,e)?void 0:(n[1]=[e[0]-h[0],e[1]-h[1],e[2]-h[2],e[3]-h[3],e[4]-h[4],e[5]-h[5],e[6]-h[6],e[7]-h[7],e[8]-h[8],e[9]-h[9],e[10]-h[10],e[11]-h[11],e[12]-h[12],e[13]-h[13],e[14]-h[14],e[15]-h[15]],n)}if(r===Fh){if(oc(a,s))return;n[1]=[s[0]-s[0],s[1]-a[1],s[2]-a[2],[s[3][0]-a[3][0],s[3][1]]]}else if(r===lh){var l={},c={},u={};a&&a.forEach(function(t){u[t[0]]=!0,l[t[0]]=t[1]}),s&&s.forEach(function(t){u[t[0]]=!0,c[t[0]]=t[1]});var _,f={};if(Object.keys(u).forEach(function(t){var e,r,i,n;"blur"===t?_=(l[t]?c[t]?(r=mc(l[t],c[t],0,o.root),f[t]=[r,l[t][1]]):f[t]=[-l[t][0],l[t][1]]:f[t]=c[t].slice(0),!0):"hue-rotate"===t?(e=Ql(c[t])?0:c[t][0],(r=Ql(l[t])?0:l[t][0])!==e&&(f[t]=[e-r,Xl],_=!0)):"saturate"===t||"brightness"===t||"contrast"===t?(i=Ql(c[t])?100:c[t][0],(n=Ql(l[t])?100:l[t][0])!==i&&(f[t]=[i-n,Xl],_=!0)):"grayscale"===t&&(i=Ql(c[t])?0:c[t][0],(n=Ql(l[t])?0:l[t][0])!==i&&(f[t]=[i-n,Xl],_=!0))}),!_)return;n[1]=f}else if(r===ch||r===uh){n[1]=[];for(var d=0;d<2;d++){var p=a[d],g=s[d];p[1]===g[1]?n[1].push(g[0]-p[0]):(g=mc(p,g,o[d?"outerHeight":"outerWidth"],o.root),n[1].push(g||0))}if(oc(n[1],[0,0]))return}else if(r===fh||r===dh){n[1]=[];for(var v=Math.min(a.length,s.length),m=0;m<v;m++){var y=a[m],E=s[m];if(y&&E)if(y[1]===E[1]){var x=E[0]-y[0];if(!x)return void n[1].push(null);n[1].push(x)}else{x=r===fh?"offsetWidth":"offsetHeight";-1<["padding-box","paddingBox"].indexOf(o.computedStyle[_h])?x=r===fh?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(o.computedStyle[_h])&&(x=r===fh?"width":"height");x=mc(y,E,o[x],o.root);if(!x)return void n[1].push(null);n[1].push(x)}else n[1].push(null)}}else if(r===ph){n[1]=[];for(var b=0,T=Math.min(a.length,s.length);b<T;b++){for(var A=a[b],M=s[b],O=[],R=0;R<4;R++)O.push(M[R]-A[R]);for(var S=[],C=0;C<4;C++)S.push(M[4][C]-A[4][C]);O.push(S),n[1].push(O)}}else if(dc.hasOwnProperty(r))if(a[1]===s[1]){var I=s[0]-a[0];if(0==I)return;n[1]=I}else{var k=mc(a,s,o[r===gh||r===mh?"outerWidth":"outerHeight"],o.root);if(!k)return;n[1]=k}else if(r===yh){n[1]=[];for(var w,L=Math.min(a.length,s.length),D=0;D<L;D++){var N=a[D],P=s[D];if(N&&P){for(var F=[],B=0;B<2;B++){var Y,H=N[B],G=P[B];H[1]===G[1]?F.push(G[0]-H[0]):(Y=D?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(o.computedStyle[_h])?Y=D?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(o.computedStyle[_h])&&(Y=D?"width":"height"),Y=mc(H,G,o[Y],o.root),F.push(Y||0))}oc(F,[0,0])?n[1].push(null):(n[1].push(F),w=!0)}else n[1].push(null)}if(!w)return}else if(fc.hasOwnProperty(r)){n[1]=[];for(var W=Math.min(a.length,s.length),U=0;U<W;U++){var X=a[U],V=s[U];if(X&&V&&!ic(X)&&!ic(V))if(X.k===V.k){var K=[];if("linear"===X.k||"radial"===X.k||"conic"===X.k){var z=X.v,j=V.v;K[0]=[];for(var $=o.clientWidth,Z=oc(z,j),q=0,J=Math.min(z.length,j.length);q<J;q++){var Q=z[q],tt=j[q],et=[];et.push([tt[0][0]-Q[0][0],tt[0][1]-Q[0][1],tt[0][2]-Q[0][2],tt[0][3]-Q[0][3]]),Q[1]&&tt[1]&&(Q[1][1]===tt[1][1]?et.push(tt[1][0]-Q[1][0]):(tt=mc(Q[1],tt[1],$,o.root),et.push(tt||0))),K[0].push(et)}if("linear"===X.k){var rt=Array.isArray(X.d);if(Array.isArray(V.d)!==rt){n[1].push(null);continue}if(rt){rt=[V.d[0]-X.d[0],V.d[1]-X.d[1],V.d[2]-X.d[2],V.d[3]-X.d[3]];if(Z&&oc(rt,[0,0,0,0])){n[1].push(null);continue}K[1]=rt}else{var it=V.d-X.d;if(Z&&0==it){n[1].push(null);continue}K[1]=it}}else if("radial"===X.k){it=Array.isArray(X.z);if(Array.isArray(V.z)!==it){n[1].push(null);continue}if(it){K[2]=[];for(var nt=0;nt<5;nt++){var ot=X.z[nt];void 0===ot&&(ot=1);var at=V.z[nt];void 0===at&&(at=1),K[2].push(at-ot)}Z&&oc(n[4],[0,0,0,0,0])&&n[1].push(null)}else{K[2]=[];for(var st=0;st<2;st++){var ht=X.p[st],lt=V.p[st];ht[1]===lt[1]?K[2].push(lt[0]-ht[0]):(lt=mc(ht,lt,o[st?"clientWidth":"clientHeight"],o.root),K[2].push(lt||0))}Z&&oc(n[3],[0,0])&&n[1].push(null)}}else if("conic"===X.k){K[1].push(s.d-a.d),K[2]=[];for(var ct=0;ct<2;ct++){var ut=a.p[ct],_t=s.p[ct];ut[1]===_t[1]?K[2].push(_t[0]-ut[0]):(_t=mc(ut,_t,o[ct?"clientWidth":"clientHeight"],o.root),K[2].push(_t||0))}Z&&0!==n[2]&&oc(n[3],[0,0])&&n[1].push(null)}}else oc(s,X)&&n[1].push(null),K[0]=[V[0]-X[0],V[1]-X[1],V[2]-X[2],V[3]-X[3]];n[1].push(K)}else n[1].push(null);else n[1].push(null)}}else if(cc.hasOwnProperty(r)){if(s=s[0],a=a[0],oc(s,a)||0===s[3]&&0===a[3])return;n[1]=[s[0]-a[0],s[1]-a[1],s[2]-a[2],s[3]-a[3]]}else if(_c.hasOwnProperty(r)){if(s[0][0]===a[0][0]&&s[0][1]===a[0][1]&&s[1][0]===a[1][0]&&s[1][1]===a[1][1])return;n[1]=[];for(var ft,dt=0;dt<2;dt++)s[dt][1]===a[dt][1]?n[1].push(s[dt][0]-a[dt][0]):(ft=mc(a[dt],s[dt],o[dt?"outerHeight":"outerWidth"],o.root),n[1].push(ft||0))}else if(uc.hasOwnProperty(r)){if(a[1]===Wl||s[1]===Wl)return;h=o.computedStyle,I=(o.domParent||o).computedStyle,k=0;if(a[1]===s[1]?k=s[0]-a[0]:r===Rh?k=mc(a,s,h[Eh],o.root):r===Eh?k=mc(a,s,I[Eh],o.root):r===xh&&-1<["column","column-reverse","columnReverse"].indexOf(h[bh])||-1<[Ah,Mh,Oh].indexOf(r)?a[1]!==Wl&&s[1]!==Wl&&(k=mc(a,s,I[Ah],o.root)):a[1]!==Wl&&s[1]!==Wl&&(k=mc(a,s,I[Th],o.root)),0===k||isNaN(k))return;n[1]=k}else if(lc.hasOwnProperty(r)){if(Ql(a))return;if(lc[r][i]&&tc(lc[r][i].calDiff)){var pt=lc[r][i].calDiff;if(o.isMulti){for(var gt=[],vt=0,mt=Math.min(a.length,s.length);vt<mt;vt++)gt.push(pt(a[vt],s[vt]));return gt}n[1]=pt(a,s)}else if(o.isMulti)if("points"===r||"controls"===r){if(Ql(s)||!s.length||Ql(a)||!a.length||oc(a,s))return;n[1]=[];for(var yt=0,Et=Math.min(a.length,s.length);yt<Et;yt++){var xt=a[yt],bt=s[yt];if(Ql(xt)||!xt.length||Ql(bt)||!bt.length)n[1].push(null);else{for(var Tt=[],At=0,Mt=Math.min(xt.length,bt.length);At<Mt;At++){var Ot=xt[At],Rt=bt[At];if(Ql(Ot)||Ql(Rt))Tt.push(null);else{for(var St=[],Ct=0,It=Math.max(Ot.length,Rt.length);Ct<It;Ct++){var kt=Ot[Ct],wt=Rt[Ct];Ql(kt)||Ql(wt)?St.push(0):St.push(wt-kt)}Tt.push(St)}}n[1].push(Tt)}}}else if("controlA"===r||"controlB"===r){if(Ql(s)||!s.length||Ql(a)||!a.length||oc(a,s))return;n[1]=[];for(var Lt=0,Dt=Math.min(a.length,s.length);Lt<Dt;Lt++){var Nt=a[Lt],Pt=s[Lt];Ql(Nt)||!Nt.length||Ql(Pt)||!Pt.length?n[1].push(null):n[1].push([Pt[0]-Nt[0],Pt[1]-Nt[1]])}}else{if(s===a||oc(s,a)||"edge"===r||"closure"===r)return;for(var Ft=[],Bt=0,Yt=Math.min(a.length,s.length);Bt<Yt;Bt++){var Ht=a[Bt],Gt=s[Bt];(Ql(Ht)||Ql(Gt))&&Ft.push(0),Ft.push(Gt-Ht)}n[1]=Ft}else if("points"===r||"controls"===r){if(Ql(s)||!s.length||Ql(a)||!a.length||oc(a,s))return;n[1]=[];for(var Wt=0,Ut=Math.min(a.length,s.length);Wt<Ut;Wt++){var Xt=a[Wt],Vt=s[Wt];if(Ql(Xt)||!Xt.length||Ql(Vt)||!Vt.length)n[1].push(null);else{for(var Kt=[],zt=0,jt=Math.max(Xt.length,Vt.length);zt<jt;zt++){var $t=Xt[zt],Zt=Vt[zt];Ql($t)||Ql(Zt)?Kt.push(0):Kt.push(Zt-$t)}n[1].push(Kt)}}}else if("controlA"===r||"controlB"===r){if(Ql(s)||!s.length||Ql(a)||!a.length||oc(a,s))return;n[1]=[s[0]-a[0],s[1]-a[1]]}else{if(s===a||"edge"===r||"closure"===r)return;n[1]=s-a}}else if(r===Sh||r===Ch){if(s===a)return;n[1]=s-a}else{if(r!==Bh||!a)return;var qt="offsetWidth",Jt="offsetHeight";-1<["padding-box","paddingBox"].indexOf(o.computedStyle[_h])?(qt="clientWidth",Jt="clientHeight"):-1<["content-box","contentBox"].indexOf(o.computedStyle[_h])&&(qt="width",Jt="height"),n[1]=a.map(function(t,e){var r=Qt(t,2),t=r[0],r=r[1];return r===Xl?e%2==0?[.01*(parseFloat(t)||0)*o[qt],Ul]:[.01*(parseFloat(t)||0)*o[Jt],Ul]:r===$l?[(parseFloat(t)||0)*root.computedStyle[Eh]*100,Ul]:r===Zl?[.01*(parseFloat(t)||0)*root.width,Ul]:r===ql?[.01*(parseFloat(t)||0)*root.height,Ul]:[parseFloat(t)||0,Ul]})}return n}(e[Vh],r[Vh],t,i,n);t&&e[jh].push(t)}),r}function Ec(t,e,I,k){var r,i,n,w=sc(t[Vh],e),n=(e=t[zh],n=e?(n=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(n[1]),i=n[2],function(t){if(r&&0<r){var e=1/r;return("start"===i?Math.ceil(t/e):Math.floor(t/e))/r}return t}):hh.getEasing(e):n);n&&n!==ac&&(I=n(I));for(var L=t[jh],o=0,a=L.length;o<a;o++)!function(t){var e=Qt(L[t],2),t=e[0],l=e[1],r=w[t];if(t===Ih)for(var r=r||(w[t]=[[Ph,te.identity()]]),i=0;i<16;i++)r[0][1][i]+=l[i]*I;else if(t===Bh){var n=1-I;8===l.length?(w[gh]=[l[0][0]*n*n*n+3*l[2][0]*I*n*n+3*l[4][0]*I*I*n+l[6][0]*I*I*I,Ul],w[vh]=[l[1][0]*n*n*n+3*l[3][0]*I*n*n+3*l[5][0]*I*I*n+l[7][0]*I*I*I,Ul]):6===l.length&&(w[gh]=[l[0][0]*n*n+2*l[2][0]*I*n+l[4][0]*I*I,Ul],w[vh]=[l[1][0]*n*n+3*l[3][0]*I*n+l[5][0]*I*I,Ul])}else if(t===Fh)r[0]+=l[0]*I,r[1]+=l[1]*I,r[2]+=l[2]*I,r[3][0]+=l[3][0]*I;else if(gc.hasOwnProperty(t))l&&(r[0]+=l*I);else if(t===lh){r=r||(w[t]=[]);var o={};r.forEach(function(t){o[t[0]]=t[1]}),Object.keys(l).forEach(function(t){var e;o.hasOwnProperty(t)?o[t][0]+=l[t][0]*I:"blur"===t||"hue-rotate"===t||"grayscale"===t?((e=l[t].slice(0))[0]*=I,r.push([t,e])):"saturate"!==t&&"brightness"!==t&&"contrast"!==t||((e=l[t].slice(0))[0]=100+e[0]*I,r.push([t,e]))})}else if(_c.hasOwnProperty(t))for(var a=0;a<2;a++)r[a][0]+=l[a]*I;else if(t===ch||t===uh)0!==l[0]&&(r[0][0]+=l[0]*I),0!==l[1]&&(r[1][0]+=l[1]*I);else if(t===ph)for(var s=0,h=Math.min(r.length,l.length);s<h;s++){for(var c=0;c<4;c++)r[s][c]+=l[s][c]*I;for(var u=0;u<4;u++)r[s][4][u]+=l[s][4][u]*I}else if(t===yh)r.forEach(function(t,e){l[e]&&(t[0][0]+=l[e][0]*I,t[1][0]+=l[e][1]*I)});else if(t===fh||t===dh)r.forEach(function(t,e){l[e]&&(t[0]+=l[e]*I)});else if(fc.hasOwnProperty(t))r.forEach(function(t,e){var r=l[e];if(r){var i=Qt(r,4),n=i[0],e=i[1],r=i[2],i=i[3];if(pc.hasOwnProperty(t.k)){for(var o=0,a=Math.min(t.v.length,n.length);o<a;o++){var s=t.v[o],h=n[o];s[0][0]+=h[0][0]*I,s[0][1]+=h[0][1]*I,s[0][2]+=h[0][2]*I,s[0][3]+=h[0][3]*I,s[1]&&h[1]&&(s[1][0]+=h[1]*I)}"linear"===t.k&&void 0!==t.d&&void 0!==e&&(Array.isArray(e)?(t.d[0]+=e[0]*I,t.d[1]+=e[1]*I,t.d[2]+=e[2]*I,t.d[3]+=e[3]*I):t.d+=e*I),"radial"===t.k?void 0!==t.z&&void 0!==i?(t.z[0]+=i[0]*I,t.z[1]+=i[1]*I,t.z[2]+=i[2]*I,t.z[3]+=i[3]*I,t.z[4]+=i[4]*I):void 0!==t.p&&void 0!==r&&(t.p[0][0]+=r[0]*I,t.p[1][0]+=r[1]*I):"conic"===t.k&&void 0!==t.d&&void 0!==e&&(t.d+=e*I,t.p[0][0]+=r[0]*I,t.p[1][0]+=r[1]*I)}else t[0]+=n[0]*I,t[1]+=n[1]*I,t[2]+=n[2]*I,t[3]+=n[3]*I}});else if(cc.hasOwnProperty(t))(r=r[0])[0]+=l[0]*I,r[1]+=l[1]*I,r[2]+=l[2]*I,r[3]+=l[3]*I;else if(lc.hasOwnProperty(t)){var _=w[t],n=k.tagName;if(lc[t][n]&&tc(lc[t][n].calIncrease)){var f=lc[t][n].calIncrease;k.isMulti?w[t]=_.map(function(t,e){return f(t,l[e],I)}):w[t]=f(_,l,I)}else if(k.isMulti)if("points"===t||"controls"===t)for(var d=0,p=Math.min(_.length,l.length);d<p;d++){var g=_[d],v=l[d];if(!Ql(g)&&!Ql(v))for(var m=0,y=Math.min(g.length,v.length);m<y;m++){var E=g[m],x=v[m];if(!Ql(E)&&!Ql(x))for(var b=0,T=Math.min(E.length,x.length);b<T;b++)Ql(E[b])||Ql(x[b])||(E[b]+=x[b]*I)}}else"controlA"===t||"controlB"===t?l.forEach(function(t,e){var r=_[e];if(!Ql(t)&&!Ql(r))for(var i=0,n=Math.min(r.length,t.length);i<n;i++){var o=r[i],a=t[i];Ql(o)||Ql(a)||(r[i]+=a*I)}}):l.forEach(function(t,e){Ql(t)||Ql(_[e])||(_[e]+=t*I)});else if("points"===t||"controls"===t)for(var A=0,M=Math.min(_.length,l.length);A<M;A++){var O=_[A],R=l[A];if(!Ql(O)&&!Ql(R))for(var S=0,C=Math.min(O.length,R.length);S<C;S++)Ql(O[S])||Ql(R[S])||(O[S]+=R[S]*I)}else"controlA"===t||"controlB"===t?(Ql(_[0])||Ql(l[0])||(_[0]+=l[0]*I),Ql(_[1])||Ql(l[1])||(_[1]+=l[1]*I)):Ql(_)||Ql(l)||(w[t]+=l*I)}else t!==Sh&&t!==Ch||(w[t]+=l*I,t===Sh&&(w[t]<0?w[t]=0:1<w[t]&&(w[t]=1)))}(o);return w}function xc(t,e){return tc(t)&&(e=t,t={}),[t||{},e]}Object.assign(gc,uc),Object.assign(gc,dc);var bc=0,Tc=function(){t(c,ys);var l=e(c);function c(t,n,e){var r,o;_(this,c),(r=l.call(this)).__id=bc++,n=nc(n||[]),n=Array.isArray(n)?n.filter(function(t){return t&&rc(t)}):n&&rc(n)?(o=[],Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(o[r]=o[r]||{offset:r/(i-1)})[t]=e[r]}),o):[],ec(e)&&(r.__options={duration:e},e=r.__options);var i=r.__options=e||{duration:0},a=t.root,s=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,a,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,i.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,a&&a.__config,!1],h=r.iterations=i.iterations,e=r.duration=i.duration,a=Qt(r.__init(n,h,e,i.easing,t),4),h=a[0],e=a[1],t=a[2],a=a[3];s[sl]=h,s[hl]=e,s[Ml]=t,s[Ol]=a,2===h.length&&(s[Pl]=!0,s[Fl]=h[1][Kh]);a=parseInt(i.fps)||0;return r.fps=a=a<=0?60:a,r.spfLimit=i.spfLimit,r.delay=i.delay,r.endDelay=i.endDelay,r.playbackRate=i.playbackRate,r.fill=i.fill,r.iterations=i.iterations,r.direction=i.direction,s[Rl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i.direction)?e:h,s[Gl]=Js.__now,r[0]=r.__before,r[1]=r.__after,r}return f(c,[{key:"__init",value:function(i,t,a,s,e){if(i.length<1)return[[],[],[],{}];for(var n=e.tagName,o=0,h=i.length;o<h;o++)(function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),o=--t,h=--e;if(r.offset<=-1)return i.splice(t,1),o=--t,h=--e}Object.keys(r).forEach(function(t){_r.hasOwnProperty(t)&&_r.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Rr.isValid(n,t)||delete r[t]}),o=t,h=e})(o,h);1===i.length?(i[0]=nc(i[0]),1===i[0].offset?i.unshift({offset:0}):((r=nc(i[0])).offset=1,i.push(r))):i.forEach(function(t,e){i[e]=nc(t)});var r=i[0];r.hasOwnProperty("offset")&&0<r.offset?i.unshift(r={offset:0}):r.offset=0;r=i[i.length-1];r.hasOwnProperty("offset")&&r.offset<1?i.push(r={offset:1}):r.offset=1;for(var l=1,c=i.length;l<c;l++)if(!(f=i[l]).hasOwnProperty("offset")){for(var u=void 0,_=l+1;_<c&&!(u=i[_]).hasOwnProperty("offset");_++);for(var f=i[l-1],d=(u.offset-f.offset)/(_-l+1),p=l;p<_;p++)i[p].offset=f.offset+d*(p+1-l);l=_}var g=[];i.forEach(function(t){var e,r,i,n,o;g.push((r=a,i=s,o=(n=e=t).offset,t=n.easing,delete e.offset,delete e.easing,n=e.translatePath,e=mn.normalize(e),Array.isArray(n)&&-1<[6,8].indexOf(n.length)&&(e[Bh]=n.map(function(t){return Jl(t)})),(n=[])[Vh]=e,n[Kh]=o*r,n[zh]=t||i,n[jh]=[],n))});var v,m,y,E,x,b,T=(v=e,m={},y=[],(r=g).forEach(function(t){var e=t[Vh];Object.keys(e).forEach(function(t){void 0===e[t]||m.hasOwnProperty(t)||(m[t]=!0,(t=!lc.hasOwnProperty(t)?parseInt(t):t)===Bh&&(m.hasOwnProperty(gh)||y.push(gh),m.hasOwnProperty(vh)||y.push(vh),m[gh]=m[vh]=!0),y.push(t))})}),r.forEach(function(t){var e=t[Vh];y.forEach(function(t){e.hasOwnProperty(t)&&!Ql(e[t])||(lc.hasOwnProperty(t)?e[t]=v.getProps(t):e[t]=v.currentStyle[t])})}),y);E=T,b=(x=e).computedStyle,g.forEach(function(t){var n=t[Vh];E.forEach(function(t){var e,r,i=n[t];Ql(i)||(t===Ih?(e=x.outerWidth,r=x.outerHeight,r=ra.calMatrix(i,e,r),n[t]=[[Ph,r]]):i[1]===Vl&&(t===kh||t===Yh?n[t]=[ue.rgba2int(b[t]),Kl]:uc.hasOwnProperty(t)?n[t]=[b[t],Ul]:t===wh?n[t]=[b[t],jl]:t!==Lh&&t!==Dh&&t!==Nh&&t!==Hh||(n[t]=[b[t],zl])))})});var A=nc(g).reverse(),M=e.style,O=e.props,R={};T.forEach(function(t){hc(n,t)&&(R[t]=O[t]),R[t]=M[t]});for(var S=g.length,C=g[0],I=1;I<S;I++)C=yc(C,g[I],T,e,n);A.forEach(function(t){t[Kh]=a-t[Kh],t[jh]=[]}),C=A[0];for(var k=1;k<S;k++)C=yc(C,A[k],T,e,n);return[g,A,T,R]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[cl]=0;var i=r[ul],n=r[Ml],o=r[ol];if(t){if(r[ll]=r[Tl]+r[_l]+r[Al],"finish"===r[vl])return;r[vl]="finish",r[Nl]||(r[ul]={},e=!0)}else{if(r[gl]=r[ll]=0,"idle"===r[vl])return;r[vl]="idle",r[ul]={},e=!0}e&&n.forEach(function(t){lc.hasOwnProperty(t)?o.__currentProps[t]===i[t]&&(o.__currentProps[t]=o.props[t]):o.__currentStyle[t]===i[t]&&(o.__currentStyle[t]=o.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(ys.FRAME,e,r),t[rl]&&(t[rl]=!1,this.emit(ys.PLAY)),tc(t[nl])&&(t[nl].call(this,e,r),t[nl]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[pl],i=t[Cl],n=t[Il],o=t[ll]=t[cl];return i&&(!0===i?e=Math.min(e,1e3/n):0<i&&(e=Math.min(e,i))),1!==r&&0<r&&(e*=r),t[cl]+=e,[o,e]}},{key:"play",value:function(t){var e=this.__config,r=e[ml],i=e[_l],n=e[vl],o=e[sl];return r||i<=0||o.length<1||"running"===n||(this.__cancelTask(),e[nl]=t,e[vl]="running",e[rl]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[bl]||(e[bl]=!0,n=e[hl],t=e[kl],e[Rl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(t)?n:o,e[ll]=e[cl]=e[El]=0),Js.offFrame(this),Js.onFrame(this),e[yl]=Js.__now,e[Qh]=!1),this}},{key:"__before",value:function(t){var e=this.__config;e[Gl]=Js.__now;var r,i=e[ol],n=e[Il],o=e[gl],a=e[Rl],s=e[fl],h=e[Dl],l=e[Nl],c=e[Tl],u=e[al],_=e[Pl],f=e[Fl],d=e[_l],p=e[Al],g=a.length,v=Qt(e[wl](e,t),2),m=v[0];if(t=v[1],!e[Ll]&&n<60){if((t=e[El]+=t)<1e3/n)return void(e[Zh]=!0);e[El]=0}if(e[Ll]=!1,0===o&&m<c)return h&&vc((e[Sl]=a[0])[Vh],e[Ml],e,u,i),e[Hl]=!0,void(e[qh]=!0);for(0===o&&(m-=c),0!==m&&!e[Hl]||(e[Hl]=!1,e[Jh]=!0);d<=m&&o<s-1;)m-=d,e[cl]-=d,o=++e[gl],r=e[Jh]=!0;r&&(n=e[kl],y=e[sl],h=e[hl],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(n)&&(c=o%2==0,a=e[Rl]="alternate"===n?c?y:h:c?h:y));var y=s-1<=o,f=_?(b=m<f?0:1,f):a[b=function t(e,r,i,n){if(e===r)return n[e][Kh]>i?e-1:e;var o=e+(r-e>>1),a=n[o];return a[Kh]===i?o:a[Kh]>i?t(e,Math.max(o-1,e),i,n):t(Math.min(o+1,r),r,i,n)}(0,g-1,m,a)][Kh],y=y&&b===g-1,g=0;y||(g=_?m/d:(m-f)/(a[b+1][Kh]-f));var E,x,b=a[b];e[Sl]=b,y?(p=m<d+p,E=sc(l?b[Vh]:e[Ol],e[Ml]),e[el]=!0,p||(e[gl]++,e[tl]=!0,Js.offFrame(this),x=!0,e[cl]=0)):E=Ec(b,e[Ml],g,i),vc(E,e[Ml],e,u,i),x&&this.__clean(!0)}},{key:"__after",value:function(t){var e=this.__config;e[$h]=!1,e[Zh]?e[Zh]=!1:(e[il].call(this,e,t,e[qh]),e[qh]=!1,e[Jh]&&(e[Jh]=!1,this.emit(ys.BEGIN,e[gl])),e[el]&&!e[Qh]&&(e[Qh]=!0,this.emit(ys.END,e[gl]-1)),e[tl]&&(e[Jh]=e[Qh]=e[qh]=e[tl]=e[Zh]=e[bl]=!1,e[vl]="finished",this.emit(ys.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[ml],i=e[_l],n=this.pending;return r||i<=0||n||(e[vl]="paused",this.__cancelTask(),t||this.emit(ys.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[ml],i=e[_l],e=e[vl];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[ml],n=i[_l],o=i[vl],a=i[sl];if(t||n<=0||a.length<1||"finished"===o||"idle"===o)return r;r.__cancelTask();var s,h=i[al],o=i[Ol];return h&&(s=i[Nl]?(i[Sl]=a[a.length-1],a[a.length-1][Vh]):o,h.addRefreshTask({__before:function(){i[$h]=!0,vc(s,i[Ml],i,h,i[ol]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[$h]=!1,i[il].call(r,i,t),i[Jh]=i[Qh]=i[qh]=i[tl]=i[Zh]=i[bl]=!1,r.emit(ys.FINISH)),tc(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[ml],n=i[_l],o=i[vl],a=i[sl];if(t||n<=0||"idle"===o||a.length<1)return r;r.__cancelTask();var s=i[al],h=i[Ol];return s&&s.addRefreshTask({__before:function(){i[$h]=!0,vc(h,i[Ml],i,s,i[ol]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[$h]=!1,i[il].call(r,i,t),i[Jh]=i[Qh]=i[qh]=i[tl]=i[Zh]=i[bl]=!1,r.emit(ys.CANCEL)),tc(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,n=i[ml],o=i[_l],a=i[sl],s=i[Tl],i=i[Al];if(n||o<=0||a.length<1)return this;a=Qt(xc(e,r),2);return e=a[0],r=a[1],this.__goto(t,e.isFrame,e.excludeDelay),o+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,n=this.__config,o=n[ml],a=n[_l],s=n[sl],h=n[Tl],l=n[Al];if(o||a<=0||s.length<1)return this;s=Qt(xc(e,r),2);return e=s[0],r=s[1],a+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){n[vl]="paused",i.__cancelTask(),tc(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[ul],i=t[ol];t[Ml].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],lc.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,n=i[_l];if(i[vl]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=i[Tl]),t>n+i[Tl]&&(t-=i[Tl]),i[gl]=0;n<t&&i[gl]<i[fl]-1;)i[gl]++,t-=n;i[cl]=t,i[bl]=!0;var o=i[sl],a=i[hl],e=i[kl];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(r=i[gl]%2==0,i[Rl]="alternate"===e?r?o:a:r?a:o),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[ol]=t,this.__config[Bl]=t.__config}},{key:"__cancelTask",value:function(){Js.offFrame(this),this.__config[nl]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[ml]||(e.removeControl(),t?(e.__clean(),r[ol]=null):Js.nextFrame({__before:function(){e.__clean(),r[ol]=null}}),r[yl]=0,r[ml]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[vl]&&"finished"!==t[vl]&&Le.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[ol]}},{key:"root",get:function(){return this.__config[al]}},{key:"keys",get:function(){return this.__config[Ml]}},{key:"style",get:function(){return this.__config[ul]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[_l]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[_l]!==t&&(e[_l]=t,e[Fl]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[Tl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Tl]!==t&&(e[Tl]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[Al]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Al]!==t&&(e[Al]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[Il]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[Il]!==t&&(e[Il]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[fl]},set:function(t){t===1/0||ue.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[fl]!==t&&(e[fl]=t),t}},{key:"fill",get:function(){return this.__config[dl]},set:function(t){var e=this.__config;return e[dl]!==(t=t||"none")&&(e[dl]=t,this.__checkModify()),e[Dl]={backwards:!0,both:!0}.hasOwnProperty(t),e[Nl]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[kl]},set:function(t){var e=this.__config;return e[kl]!==(t=t||"normal")&&(e[kl]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[sl]}},{key:"framesR",get:function(){return this.__config[hl]}},{key:"playbackRate",get:function(){return this.__config[pl]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[pl]!==(t=t<=0?1:t)&&(e[pl]=t),t}},{key:"easing",get:function(){return this.__config[xl]}},{key:"startTime",get:function(){return this.__config[yl]}},{key:"currentTime",get:function(){return this.__config[ll]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[ll]!==t&&(e[ll]=t,e[cl]=t),t}},{key:"nextTime",get:function(){return this.__config[cl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[cl]!==t&&(e[cl]=t),t}},{key:"timestamp",get:function(){return this.__config[Gl]}},{key:"pending",get:function(){return"running"!==this.__config[vl]}},{key:"finished",get:function(){return"finished"===this.__config[vl]}},{key:"playState",get:function(){return this.__config[vl]}},{key:"playCount",get:function(){return this.__config[gl]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[gl]!==t&&(e[gl]=t),t}},{key:"isDestroyed",get:function(){return this.__config[ml]}},{key:"animating",get:function(){var t=this.__config,e=t[vl];return"idle"!==e&&("finished"!==e||t[Nl]||t[Dl])}},{key:"spfLimit",get:function(){return this.__config[Cl]},set:function(t){t=ue.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[Cl]!==t&&(e[Cl]=t),t}},{key:"assigning",get:function(){return this.__config[$h]}}]),c}(),Ac=m.NODE_KEY.NODE_DEFS_CACHE,Mc=ue.int2rgba,Oc=Tt.canvasPolygon,Rc=Tt.svgPolygon;var Sc={renderBoxShadow:function(t,e,r,i,n,o,a,s,h,l){var c=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,u=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0;n+=c,o+=u,a+=c,s+=u;var _,f,d=Qt(i,6),p=d[0],g=d[1],v=d[2],m=d[3],y=d[4],E=d[5],x=Mc(y),b=2*Math.abs(v)+2*Math.abs(m)+2*Math.abs(p)+2*Math.abs(g),T=[[n,o],[a,o],[a,s],[n,s],[n,o]],A=[[n-b,o-b],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b]];if(0<y[3]&&(0<v||0<m))if(e===rt.CANVAS|e===rt.WEBGL){if(r.save(),r.beginPath(),"inset"===E){c=n+p+m,u=o+g+m,i=a+p-m,d=s+g-m,y=[[c,u],[i,u],[i,d],[c,d]],y=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[y[0][0],y[0][1],y[2][0],y[2][1]]);if(!y)return;y=[[y[0],y[1]],[y[2],y[1]],[y[2],y[3]],[y[0],y[3]],[y[0],y[1]]],m?(Oc(r,y),Oc(r,T.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==x&&(r.fillStyle=x),Oc(r,T),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),Oc(r,y),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=x,r.shadowBlur=v,Oc(r,[[c,u],[i,u],[i,d],[n-b,d],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,d],[c,d],[c,u]])):(Oc(r,T),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=p,r.shadowOffsetY=g,r.shadowColor=x,r.shadowBlur=v,Oc(r,[[n,o],[a,o],[a,s],[n-b,s],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,s],[n,s],[n,o]]))}else{var M=n+p-m,O=o+g-m,R=a+p+m,S=s+g+m,C=[[M,O],[R,O],[R,S],[M,S]],I=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[C[0][0],C[0][1],C[2][0],C[2][1]]);m?(Oc(r,T),Oc(r,C.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==x&&(r.fillStyle=x),Oc(r,C),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),I&&Oc(r,[[I[0],I[1]],[I[2],I[1]],[I[2],I[3]],[I[0],I[3]],[I[0],I[1]]].reverse()),Oc(r,T),Oc(r,C),Oc(r,A),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=x,r.shadowBlur=v,Oc(r,C)):(Oc(r,T),Oc(r,A),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=p,r.shadowOffsetY=g,r.shadowColor=x,r.shadowBlur=v,Oc(r,T))}r.fill(),r.closePath(),r.restore()}else e===rt.SVG&&(O=oa.outerSize(v),"inset"===E?(e=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[(C=[[R=n+p+m,M=o+g+m],[S=a+p-m,M],[S,I=s+g-m],[R,I]])[0][0],C[0][1],C[2][0],C[2][1]]))&&(e=[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]],m?(t.__config[Ac].push(E={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",x]]}]}),_=r.add(E),C={tagName:"clipPath",children:[{tagName:"path",props:[["d",Rc(e)+Rc(T.slice(0).reverse())],["fill","#FFF"]]}]},f=r.add(C),t.__config[Ac].push(C),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Rc(T)],["fill",x],["clip-path","url(#"+f+")"]]}),E={tagName:"clipPath",children:[{tagName:"path",props:[["d",Rc(e)],["fill","#FFF"]]}]},f=r.add(E),t.__config[Ac].push(E),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Rc([[R,M],[S,M],[S,I],[n-b,I],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,I],[R,I],[R,M]])],["fill","#FFF"],["filter","url(#"+_+")"],["clip-path","url(#"+f+")"]]})):(_=r.add(M={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",p],["dy",g],["stdDeviation",.5*v],["flood-color",x]]}]}),t.__config[Ac].push(M),M={tagName:"clipPath",children:[{tagName:"path",props:[["d",Rc(T)],["fill","#FFF"]]}]},f=r.add(M),t.__config[Ac].push(M),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Rc([[n,o],[a,o],[a,s],[n-b,s],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,s],[n,s],[n,o]])],["fill","#FFF"],["filter","url(#"+_+")"],["clip-path","url(#"+f+")"]]}))):(s=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[(a=[[n=n+p-m,o=o+g-m],[a=a+p+m,o],[a,o=s+g+m],[n,o]])[0][0],a[0][1],a[2][0],a[2][1]]),m?(o=r.add(n={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",x]]}]}),t.__config[Ac].push(n),n={tagName:"clipPath",children:[{tagName:"path",props:[["d",Rc(T)+Rc(a.slice(0).reverse())],["fill","#FFF"]]}]},m=r.add(n),t.__config[Ac].push(n),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Rc(a)],["fill",x],["clip-path","url(#"+m+")"]]}),n={tagName:"clipPath",children:[{tagName:"path",props:[["d",(s?Rc([[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()):"")+Rc(T)+Rc(a)+Rc(A)],["fill","#FFF"]]}]},m=r.add(n),t.__config[Ac].push(n),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Rc(a)],["fill","#FFF"],["filter","url(#"+o+")"],["clip-path","url(#"+m+")"]]})):(x=r.add(v={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",p],["dy",g],["stdDeviation",.5*v],["flood-color",x]]}]}),t.__config[Ac].push(v),v={tagName:"clipPath",children:[{tagName:"path",props:[["d",Rc(T)+Rc(A)],["fill","#FFF"]]}]},r=r.add(v),t.__config[Ac].push(v),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Rc(T)],["fill","#FFF"],["filter","url(#"+x+")"],["clip-path","url(#"+r+")"]]}))))}},Cc={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,"color-dodge":!0,"color-burn":!0,"hard-light":!0,"soft-light":!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};function Ic(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})}var $t=Ic,Y=function(t){return Cc.hasOwnProperty(Ic(t))},ft=m.STYLE_KEY,kc=ft.MARGIN_LEFT,wc=ft.MARGIN_RIGHT,Lc=ft.PADDING_LEFT,Dc=ft.PADDING_RIGHT,Nc=ft.BORDER_LEFT_WIDTH,Pc=ft.BORDER_RIGHT_WIDTH;var Fc={getInlineBox:function(t,e,r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m){var y=0,E=0;"paddingBox"===c||"padding-box"===c?(y=u,E=f):"contentBox"!==c&&"content-box"!==c&&(y=u+p,E=f+v);for(var x,p=u+p,f=f+v,v=n.baseLine-o,b=r.x,T=(r instanceof Sn?r.parent:r).domParent;T!==t;)r===T.contentBoxList[0]&&(b-=(x=T.computedStyle)[kc]+x[Lc]+x[Nc]),T=T.domParent;o=b,h&&("paddingBox"===c||"padding-box"===c?b-=d:"contentBox"!==c&&"content-box"!==c&&(b-=d+m),o-=d+m);for(var m=n.y+v-y,y=n.y+v-p,A=i.x+i.outerWidth,T=(i instanceof Sn?i.parent:i).domParent;T!==t;){var M=T.contentBoxList;i===M[M.length-1]&&(A+=(M=T.computedStyle)[wc]+M[Dc]+M[Pc]),T=T.domParent}return p=A,l&&("paddingBox"===c||"padding-box"===c?A+=_:"contentBox"!==c&&"content-box"!==c&&(A+=_+g),p+=_+g),E=n.y+v+a-s+E,f=n.y+v+a-s+f,b+=t.ox,A+=t.ox,o+=t.ox,p+=t.ox,[b,m+=t.oy,A,E+=t.oy,o,y+=t.oy,p,f+=t.oy]},getInlineWidth:function(t,e){for(var r=0,i=e.length,n=0;n<i;n++){var o=e[n];r+=o.width;for(var a=(o instanceof Sn?o.parent:o).domParent;a!==t;){var s,h=a.contentBoxList;o===h[0]&&(r+=(s=a.computedStyle)[kc]+s[Lc]+s[Nc]),o===h[h.length-1]&&(r+=(h=a.computedStyle)[wc]+h[Dc]+h[Pc]),a=a.domParent}}return r}},Bc=Tt.svgPolygon,Yc=rt.CANVAS,Hc=rt.SVG,Gc=rt.WEBGL,Wc=la.LOCAL,Uc=m.STYLE_KEY,Xc=m.STYLE_RV_KEY,Vc=m.style2Upper,sr=m.STYLE_KEY,Kc=sr.BORDER_TOP_LEFT_RADIUS,zc=sr.BORDER_TOP_RIGHT_RADIUS,jc=sr.BORDER_BOTTOM_LEFT_RADIUS,$c=sr.BORDER_BOTTOM_RIGHT_RADIUS,Zc=sr.PADDING_LEFT,qc=sr.PADDING_RIGHT,Jc=sr.PADDING_TOP,Qc=sr.PADDING_BOTTOM,tu=sr.MARGIN_LEFT,eu=sr.MARGIN_TOP,ru=sr.MARGIN_BOTTOM,iu=sr.MARGIN_RIGHT,nu=sr.BORDER_LEFT_WIDTH,ou=sr.BORDER_TOP_WIDTH,au=sr.BORDER_BOTTOM_WIDTH,su=sr.BORDER_RIGHT_WIDTH,hu=sr.TOP,lu=sr.RIGHT,cu=sr.BOTTOM,uu=sr.LEFT,_u=sr.POSITION,fu=sr.DISPLAY,du=sr.WIDTH,pu=sr.HEIGHT,gu=sr.MATRIX,vu=sr.TRANSLATE_X,mu=sr.TRANSLATE_Y,yu=sr.TRANSLATE_Z,Eu=sr.TRANSFORM,xu=sr.SCALE_X,bu=sr.SCALE_Y,Tu=sr.SCALE_Z,Au=sr.ROTATE_X,Mu=sr.ROTATE_Y,Ou=sr.ROTATE_Z,Ru=sr.SKEW_X,Su=sr.SKEW_Y,Cu=sr.PERSPECTIVE,Iu=sr.PERSPECTIVE_ORIGIN,ku=sr.ROTATE_3D,wu=sr.TRANSFORM_ORIGIN,Lu=sr.BACKGROUND_POSITION_X,Du=sr.BACKGROUND_POSITION_Y,Nu=sr.BACKGROUND_SIZE,Pu=sr.BACKGROUND_COLOR,Fu=sr.BACKGROUND_IMAGE,Bu=sr.BACKGROUND_REPEAT,Yu=sr.BOX_SHADOW,Hu=sr.OPACITY,Gu=sr.Z_INDEX,Wu=sr.BORDER_TOP_STYLE,Uu=sr.BORDER_RIGHT_STYLE,Xu=sr.BORDER_BOTTOM_STYLE,Vu=sr.BORDER_LEFT_STYLE,Ku=sr.FILTER,zu=sr.OVERFLOW,ju=sr.MIX_BLEND_MODE,$u=sr.TEXT_OVERFLOW,Zu=sr.BORDER_TOP_COLOR,qu=sr.BORDER_BOTTOM_COLOR,Ju=sr.BORDER_LEFT_COLOR,Qu=sr.BORDER_RIGHT_COLOR,t_=sr.FONT_STYLE,e_=sr.COLOR,r_=sr.VISIBILITY,i_=sr.POINTER_EVENTS,n_=sr.BORDER_TOP,o_=sr.BORDER_RIGHT,a_=sr.BORDER_BOTTOM,s_=sr.BORDER_LEFT,h_=sr.BACKGROUND_CLIP,l_=sr.FONT_SIZE,c_=sr.FONT_FAMILY,u_=sr.LINE_HEIGHT,__=sr.TEXT_STROKE_COLOR,f_=sr.TEXT_STROKE_WIDTH,d_=sr.TEXT_STROKE_OVER,qt=m.UPDATE_KEY,p_=qt.UPDATE_NODE,g_=qt.UPDATE_FOCUS,v_=qt.UPDATE_STYLE,m_=qt.UPDATE_OVERWRITE,y_=qt.UPDATE_KEYS,E_=qt.UPDATE_CONFIG,x_=qt.UPDATE_REMOVE_DOM,b_=m.STRUCT_KEY.STRUCT_HAS_MASK,fr=m.NODE_KEY,T_=fr.NODE_TAG_NAME,A_=fr.NODE_CACHE_STYLE,M_=fr.NODE_CURRENT_STYLE,O_=fr.NODE_COMPUTED_STYLE,R_=fr.NODE_STYLE,S_=fr.NODE_STRUCT,C_=fr.NODE_OPACITY,I_=fr.NODE_MATRIX_EVENT,k_=fr.NODE_MATRIX,w_=fr.NODE_LIMIT_CACHE,L_=fr.NODE_HAS_CONTENT,D_=fr.NODE_REFRESH_LV,N_=fr.NODE_CACHE,P_=fr.NODE_CACHE_TOTAL,F_=fr.NODE_CACHE_FILTER,B_=fr.NODE_CACHE_MASK,Y_=fr.NODE_CACHE_OVERFLOW,H_=fr.NODE_IS_DESTROYED,G_=fr.NODE_DEFS_CACHE,W_=fr.NODE_DOM_PARENT,U_=fr.NODE_IS_INLINE,X_=fr.NODE_PERSPECTIVE_MATRIX,V_=fr.NODE_IS_MASK,K_=fr.NODE_VIRTUAL_DOM,z_=fr.NODE_CACHE_AS_BITMAP,j_=S.AUTO,$_=S.PX,Z_=S.PERCENT,q_=S.INHERIT,J_=S.NUMBER,Q_=S.REM,tf=S.VW,ef=S.VH,rf=S.DEG,nf=ue.int2rgba,of=ue.rgba2int,af=ue.joinArr,sf=ue.isNil,hf=mn.calRelative,lf=Rr.GEOM,cf=$t,uf=Y,_f=te.point2d,ff=ya.contain,df=ya.NONE,pf=ya.TRANSFORM,gf=ya.REFLOW,vf=ya.REPAINT,mf=ya.TRANSLATE_X,yf=ya.TRANSLATE_Y,Ef=ya.TRANSLATE_Z;function xf(t){for(var e=0,r=t.flowChildren,i=r.length,n=0;n<i;n++){var o=r[n];if(!(o instanceof bf||o instanceof Ms&&o.shadowRoot instanceof bf))break;if(o.flowChildren.length){e+=xf(o);break}o.__config[U_]&&(e+=o.outerWidth)}return e}var bf=function(){t(o,R);var n=e(o);function o(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_(this,o),r=n.call(this),Array.isArray(e)?r.props=ue.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];var i=r.__isClip=!!r.props.clip,e=r.__isMask=i||!!r.props.mask,i=r.__config;return i[T_]=t,i[A_]=r.__cacheStyle,i[M_]=r.__currentStyle,i[O_]=r.__computedStyle,i[D_]=gf,i[R_]=r.__style,i[k_]=[],i[I_]=[],i[G_]=r.__cacheDefs,i[V_]=e,r.__frameAnimateList=[],r.__contentBoxList=[],i[z_]=r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r}return f(o,[{key:"__structure",value:function(t,e,r){r=P(N(o.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(r[b_]=this.__hasMask),this.__config[S_]=r}},{key:"__mp",value:function(r,i,n){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=Uc[Vc("margin"+t)],t=Uc[Vc("padding"+t)];i[e]=o.__mpWidth(r[e],n),i[t]=o.__mpWidth(r[t],n)})}},{key:"__mpWidth",value:function(t,e){return t[1]===$_?t[0]:t[1]===Z_?t[0]*e*.01:t[1]===Q_?t[0]*this.root.computedStyle[l_]:t[1]===tf?t[0]*this.root.width*.01:t[1]===ef?t[0]*this.root.height*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[Zc]+r[qc],this.__clientHeight=e+=r[Jc]+r[Qc],this.__offsetWidth=t+=r[nu]+r[su],this.__offsetHeight=e+=r[ou]+r[au],this.__outerWidth=t+r[tu]+r[iu],this.__outerHeight=e+r[eu]+r[ru]}},{key:"__calMp",value:function(t,e,r){var i=0;return t[1]===$_?i+=t[0]:t[1]!==Z_||r?t[1]===Q_?i+=t[0]*this.root.computedStyle[l_]:t[1]===tf?i+=t[0]*this.root.width*.01:t[1]===ef&&(i+=t[0]*this.root.height*.01):(t[0]*=.01*e,t[1]=$_,i+=t[0]),i}},{key:"__addMp",value:function(t,e,r,i,n){var o,a,s=r[tu],h=r[eu],l=r[iu],c=r[ru],u=r[Zc],_=r[Jc],f=r[qc],d=r[Qc],p=r[ou],g=r[su],v=r[au],r=r[nu];return i=t?(o=this.__calMp(s,e,!n)+this.__calMp(l,e,!n)+this.__calMp(u,e,!n)+this.__calMp(f,e,!n),r[1]===$_?o+=r[0]:r[1]===Q_?o+=r[0]*this.root.computedStyle[l_]:r[1]===tf?o+=r[0]*this.root.width*.01:r[1]===ef&&(o+=r[0]*this.root.height*.01),g[1]===$_?o+=g[0]:g[1]===Q_?o+=g[0]*this.root.computedStyle[l_]:g[1]===tf?o+=g[0]*this.root.width*.01:g[1]===ef&&(o+=g[0]*this.root.height*.01),i.map(function(t){return t+o})):(a=this.__calMp(h,e,!n)+this.__calMp(c,e,!n)+this.__calMp(_,e,!n)+this.__calMp(d,e,!n),p[1]===$_?a+=p[0]:p[1]===Q_?a+=p[0]*this.root.computedStyle[l_]:p[1]===tf?a+=p[0]*this.root.width*.01:p[1]===ef&&(a+=p[0]*this.root.height*.01),v[1]===$_?a+=v[0]:v[1]===Q_?a+=v[0]*this.root.computedStyle[l_]:v[1]===tf?a+=v[0]*this.root.width*.01:v[1]===ef&&(a+=v[0]*this.root.height*.01),i.map(function(t){return t+a}))}},{key:"__layout",value:function(t,e,r){mn.computeReflow(this,this.isShadowRoot);var i=t.w,n=this.isDestroyed,o=this.currentStyle,a=this.computedStyle,s=this.__config,h=a[fu],l=o[du],c=o[_u];if(this.clearCache(),this.__layoutData={x:t.x,y:t.y,w:t.w,h:t.h,lx:t.lx},s[D_]=gf,s[w_]=!1,s[U_]=!1,!e){var u=this.next;if(!this.isMask&&u&&u.isMask){for(var _=0;u&&u.isMask;)_++,u=u.next;this.__hasMask=_}}if(this.__ox=this.__oy=0,n||"none"===h)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=a[du]=a[pu]=0,this.__x=t.x,this.__y=t.y,void this.__layoutNone();if(r||this.__mp(o,a,i),l[1]!==j_)if(this.__isRealInline()&&"inline"===o[fu])l[0]=0,l[1]=j_;else switch(l[1]){case $_:i=l[0];break;case Z_:i*=.01*l[0];break;case Q_:i=l[0]*this.root.computedStyle[l_];break;case tf:i=l[0]*this.root.width*.01;break;case ef:i=l[0]*this.root.height*.01}var f,d=0;"flex"===h?this.__layoutFlex(t,e):"inlineBlock"===h||"inline-block"===h?d=this.__layoutInline(t,e):"inline"===h?d=this.__layoutInline(t,e,!0):this.__layoutBlock(t,e),"relative"===c?(f=o[hu],n=o[lu],h=o[cu],t=o[uu],e=this.parent,f[1]!==j_?(f=hf(o,hu,f,e),this.__offsetY(f),a[hu]=f,a[cu]="auto"):h[1]!==j_?(h=hf(o,cu,h,e),this.__offsetY(-h),a[cu]=h,a[hu]="auto"):a[hu]=a[cu]="auto",t[1]!==j_?(t=hf(o,uu,t,e,!0),this.__offsetX(t),a[uu]=t,a[lu]="auto"):n[1]!==j_?(p=hf(o,lu,n,e,!0),this.__offsetX(-p),a[lu]=p,a[uu]="auto"):a[uu]=a[lu]="auto"):"absolute"!==c&&(a[hu]=a[cu]=a[uu]=a[lu]="auto");var p=this.__sx=this.x+this.ox,c=this.__sy=this.y+this.oy;return s[U_]||(p=this.__sx1=p+a[tu],p=this.__sx2=p+a[nu],p=this.__sx3=p+a[Zc],p=this.__sx4=p+this.width,p=this.__sx5=p+a[qc],this.__sx6=p+a[su],c=this.__sy1=c+a[eu],c=this.__sy2=c+a[ou],c=this.__sy3=c+a[Jc],c=this.__sy4=c+this.height,c=this.__sy5=c+a[Qc],this.__sy6=c+a[au]),a[du]=this.width,a[pu]=this.height,r||this.__execAr(),d}},{key:"__execAr",value:function(){var t,e=this.__animateRecords;e&&(this.__animateRecords=null,e.list.forEach(function(t){t.target.vd instanceof o&&(t.target=t.target.vd)}),t=e.controller||this.root.animateController,e.options&&!1===e.options.autoPlay?(t.__records2=t.__records2.concat(e.list),t.init(t.__records2,t.list2)):(t.__records=t.__records.concat(e.list),t.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[fu]="none",t[eu]=t[iu]=t[ru]=t[tu]=t[Jc]=t[qc]=t[Qc]=t[Zc]=0}},{key:"__preLayout",value:function(t,e){var r=t.x,i=t.y,n=t.w,o=t.h,a=t.w2,s=t.h2,h=t.w3,l=t.h3,c=t.lx,u=t.nowrap,_=t.lineBoxManager,f=t.endSpace,d=void 0===f?0:f;this.__x=r,this.__y=i;var p,g,v=this.currentStyle,m=this.computedStyle,y=v[du],E=v[pu],x=m[ou],b=m[su],T=m[au],A=m[nu],M=m[eu],O=m[iu],R=m[ru],S=m[tu],C=m[Jc],f=m[qc],v=m[Qc],m=m[Zc];if(void 0!==a)p=!0,n=a;else if(void 0!==h)p=!0,n=h;else if(y[1]!==j_)switch(p=!0,y[1]){case $_:n=y[0];break;case Z_:n*=.01*y[0];break;case Q_:n=y[0]*this.root.computedStyle[l_];break;case tf:n=y[0]*this.root.width*.01;break;case ef:n=y[0]*this.root.height*.01}if(void 0!==s)g=!0,o=s;else if(void 0!==l)g=!0,o=l;else if(E[1]!==j_)switch(g=!0,E[1]){case $_:o=E[0];break;case Z_:o*=.01*E[0];break;case Q_:o=E[0]*this.root.computedStyle[l_];break;case tf:o=E[0]*this.root.width*.01;break;case ef:o=E[0]*this.root.height*.01}t.x=r+=A+S+m,e||(i+=x+M+C),t.y=i;t=e?f+b+O:0;return e||(y[1]!==j_&&void 0===h||(n-=A+b+S+O+m+f),E[1]!==j_&&void 0===l||(o-=x+T+M+R+C+v)),{fixedWidth:p,fixedHeight:g,x:r,y:i,w:n,h:o,lx:c,lineBoxManager:_,nowrap:u,endSpace:d,selfEndSpace:t}}},{key:"__marginAuto",value:function(t,e){var r=t[_u],i=t[fu],n=t[tu],o=t[iu],t=t[du];"absolute"===r||"block"!==i&&"flex"!==i||t[1]===j_&&"img"!==this.tagName||n[1]!==j_||o[1]!==j_||(o=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-o),!0)}},{key:"__calMatrix",value:function(t,e,i,n,r,o,a,s,h){var l=this;if(r[U_])return n[wu]=[o,a],e[gu]=te.identity();var c,u,_,f,d,p=e[gu];return p&&t<gf&&!ff(t,pf)?(f=u=c=0,ff(t,mf)&&(r=i[vu],c=(r=sf(r)?0:r[1]===Z_?r[0]*this.offsetWidth*.01:r[1]===Q_?r[0]*this.root.computedStyle[l_]:r[1]===tf?r[0]*this.root.width*.01:r[1]===ef?r[0]*this.root.height*.01:r[0])-(n[vu]||0),n[vu]=r,n[Eu][12]+=c,p[12]+=c),ff(t,yf)&&(c=i[mu],u=(c=sf(c)?0:c[1]===Z_?c[0]*this.offsetHeight*.01:c[1]===Q_?c[0]*this.root.computedStyle[l_]:c[1]===tf?c[0]*this.root.width*.01:c[1]===ef?c[0]*this.root.height*.01:c[0])-(n[mu]||0),n[mu]=c,n[Eu][13]+=u,p[13]+=u),ff(t,Ef)&&(t=i[yu],f=(t=sf(t)?0:t[1]===Z_?t[0]*this.offsetWidth*.01:t[1]===Q_?t[0]*this.root.computedStyle[l_]:t[1]===tf?t[0]*this.root.width*.01:t[1]===ef?t[0]*this.root.height*.01:t[0])-(n[yu]||0),n[yu]=t,n[Eu][14]+=f,p[14]+=f),e[gu]=p):(void 0===o&&(o=this.__sx1,a=this.__sy1,s=this.offsetWidth,h=this.offsetHeight),void 0===e[wu]&&(e[wu]=!0,p=null,n[wu]=ra.calOrigin(i[wu],s,h,this.root)),void 0!==e[Eu]&&void 0!==e[vu]&&void 0!==e[mu]&&void 0!==e[yu]&&void 0!==e[Au]&&void 0!==e[Mu]&&void 0!==e[Ou]&&void 0!==e[ku]&&void 0!==e[xu]&&void 0!==e[bu]&&void 0!==e[Tu]&&void 0!==e[Ru]&&void 0!==e[Su]||(e[Eu]=e[vu]=e[mu]=e[yu]=e[Au]=e[Mu]=e[Ou]=e[xu]=e[bu]=e[Tu]=e[Ru]=e[Su]=!0,p=null,i[Eu]?d=ra.calMatrix(i[Eu],s,h,this.root):(_=[],[vu,mu,yu,Au,Mu,Ou,ku,Ru,Su,xu,bu,Tu].forEach(function(t){delete n[t];var e=i[t];if(!sf(e)){if(t===ku)return n[t]=[e[0],e[1],e[2],e[3][0]],0===e[3][0]?void 0:void _.push([t,e]);n[t]=e[0];var r=t===xu||t===bu||t===Tu;1===e[0]&&r||!r&&0===e[0]||(e[1]===Z_?t===vu||t===yu?n[t]=e[0]*s*.01:t===mu&&(n[t]=e[0]*h*.01):e[1]===Q_?t!==vu&&t!==yu&&t!==mu||(n[t]=e[0]*l.root.computedStyle[l_]):e[1]===tf?t!==vu&&t!==yu&&t!==mu||(n[t]=e[0]*l.root.width*.01):e[1]!==ef||t!==vu&&t!==yu&&t!==mu||(n[t]=e[0]*l.root.height*.01),_.push([t,e]))}}),_.length&&(d=ra.calMatrix(_,s,h,this.root))),n[Eu]=d||te.identity()),p||(f=n[Eu],(d=n[wu].slice(0))[0]+=o||0,d[1]+=a||0,p=e[gu]=ra.calMatrixByOrigin(f,d))),p}},{key:"__calCache",value:function(t,o,e,s,r,h,i,n,a,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R,S,C){var I=this,k=m,w=A,L=T,D=C,N=h[h_]=r[h_];"paddingBox"===N||"padding-box"===N?(k=y,w=M,L=b,D=S):"contentBox"!==N&&"content-box"!==N||(k=E,w=O,L=x,D=R);var P,F=this.__config[U_];F&&!this.contentBoxList.length&&(F=!1),[Hu,Gu,Wu,Uu,Xu,Vu,Bu,zu,ju,$u,h_].forEach(function(t){h[t]=r[t]}),sf(s[Ku])&&(s[Ku]=!0,this.__calFilter(r,h)),sf(s[Lu])&&(s[Lu]=!0,R=r[Lu],h[Lu]=(R||[]).map(function(t){return t[1]===$_?t[0]:t[1]===Q_?t[0]*I.root.computedStyle[l_]:t[1]===tf?t[0]*I.root.width*.01:t[1]===ef?t[0]*I.root.height*.01:t[1]===Z_?t[0]+"%":void 0})),sf(s[Du])&&(s[Du]=!0,P=r[Du],h[Du]=(P||[]).map(function(t){return t[1]===$_?t[0]:t[1]===Q_?t[0]*I.root.computedStyle[l_]:t[1]===tf?t[0]*I.root.width*.01:t[1]===ef?t[0]*I.root.height*.01:t[1]===Z_?t[0]+"%":void 0})),sf(s[Nu])&&(s[Nu]=!0,h[Nu]=(r[Nu]||[]).map(function(t){return $s.calBackgroundSize(t,L-k,D-w,I.root)})),sf(s[Fu])&&(P=h[Fu]=r[Fu].slice(0),s[Fu]=P.map(function(t,e){if(!t)return null;if(ue.isString(t)){var r,i,n=I.__loadBgi[e]=I.__loadBgi[e]||{},e=Le.IMG[Fu];return e&&e.state===Le.LOADED?(n.url=Fu,n.source=e.source,n.width=e.width,n.height=e.height):n.url!==t&&(n.url=t,n.source=null,i=(r=I).root,Le.measureImg(t,function(t){t.success&&t.url===n.url&&!I.isDestroyed&&(n.source=t.source,n.width=t.width,n.height=t.height,i.delRefreshTask(n.cb),i.addRefreshTask(n.cb={__before:function(){s[Fu]=void 0;var t={};t[p_]=r,t[g_]=vf,t[E_]=r.__config,i.__addUpdate(r,r.__config,i,i.__config,t)}}))},{ctx:o,root:i,width:L-k,height:D-w})),!0}return!(F||!t.k)||void 0})),sf(s[Yu])&&(s[Yu]=!0,h[Yu]=(r[Yu]||[]).map(function(t){return t.map(function(t,e){if(3<e)return t;var r=t[0];return t[1]===Z_?r*=e%2==0?.01*(L-k):.01*(D-w):t[1]===Q_?r*=I.root.computedStyle[l_]:t[1]===tf?r=r*I.root.width*.01:t[1]===ef&&(r=r*I.root.height*.01),r})})),[Pu,Zu,Qu,qu,Ju].forEach(function(t){sf(s[t])&&(s[t]=nf(h[t]=r[t][0]))}),(sf(s[Kc])||sf(s[zc])||sf(s[$c])||sf(s[jc]))&&(s[Kc]=s[zc]=s[$c]=s[jc]=!0,F?Xt.calBorderRadiusInline(this.contentBoxList,r,h,this.root):Xt.calBorderRadius(a,l,r,h,this.root));var B=h[Kc],Y=h[zc],H=h[$c],G=h[jc];["Top","Right","Bottom","Left"].forEach(function(t){var e,r,i,n,o=Uc[Vc(t="border"+t)],a=Uc[Vc(t+"Width")],t=Uc[Vc(t+"Style")];sf(s[a])&&(s[a]=!0,s[o]=void 0),sf(s[t])&&(s[t]=!0,s[o]=void 0),sf(s[o])&&(o===n_?0<c?F||(e=Math.atan(c/f),r=Math.atan(c/u),s[o]=Xt.calPoints(c,h[t],e,r,m,y,b,T,A,M,S,C,0,B,Y)):s[o]=[]:o===o_?0<u?F||(e=Math.atan(u/c),r=Math.atan(u/_),s[o]=Xt.calPoints(u,h[t],e,r,m,y,b,T,A,M,S,C,1,Y,H)):s[o]=[]:o===a_?0<_?F||(i=Math.atan(_/f),n=Math.atan(_/u),s[o]=Xt.calPoints(_,h[t],i,n,m,y,b,T,A,M,S,C,2,G,H)):s[o]=[]:o===s_&&(0<f?F||(i=Math.atan(f/c),n=Math.atan(f/_),s[o]=Xt.calPoints(f,h[t],i,n,m,y,b,T,A,M,S,C,3,B,G)):s[o]=[]))});a=e&&e.computedStyle;return r[t_][1]===q_?h[t_]=e?a[t_]:"normal":sf(s[t_])&&(h[t_]=r[t_][0]),s[t_]=h[t_],r[e_][1]===q_?(h[e_]=e?a[e_]:[0,0,0,1],s[e_]=nf(h[e_])):sf(s[e_])&&(h[e_]=of(r[e_][0]),s[e_]=nf(h[e_])),r[__][1]===q_?(h[__]=e?a[__]:[0,0,0,1],s[__]=nf(h[__])):sf(s[__])&&(h[__]=of(r[__][0]),s[__]=nf(h[__])),r[f_][1]===q_?(h[f_]=e?a[f_]:0,s[f_]=!0):sf(s[f_])&&(l=(l=r[f_])[1]===Q_?l[0]*this.root.computedStyle[l_]:l[1]===tf?l[0]*this.root.width*.01:l[1]===ef?l[0]*this.root.height*.01:l[0],h[f_]=l,s[f_]=!0),r[d_][1]===q_?s[d_]=h[d_]=e?a[d_]:"none":s[d_]=h[d_]=r[d_][0],r[r_][1]===q_?h[r_]=e?a[r_]:"visible":sf(s[r_])&&(h[r_]=r[r_][0]),s[r_]=h[r_],r[i_][1]===q_?h[i_]=e?a[i_]:"auto":sf(s[i_])&&(h[i_]=r[i_][0]),s[i_]=h[i_],this.__bx1=k,this.__bx2=L,this.__by1=w,this.__by2=D,[k,w,L,D]}},{key:"__calPerspective",value:function(t,e,r,i,n,o){var a,s,h;sf(t[Cu])&&(h=t[Cu]=!0,s=0,s=(a=e[Cu])[1]===Q_?a[0]*this.root.computedStyle[l_]:a[1]===tf?a[0]*this.root.width*.01:a[1]===ef?a[0]*this.root.height*.01:a[0],r[Cu]=s),sf(t[Iu])&&(h=t[Iu]=!0,r[Iu]=ra.calOrigin(e[Iu],this.offsetWidth,this.offsetHeight,this.root)),h&&(void 0===n&&(n=this.__sx1,o=this.__sy1),(h=r[Iu].slice(0))[0]+=n||0,h[1]+=o||0,i[X_]=ra.calPerspectiveMatrix(r[Cu],h))}},{key:"__calFilter",value:function(t,e){var r=this;return e[Ku]=(t[Ku]||[]).map(function(t){var e=Qt(t,2),t=e[0],e=e[1];return e[1]===$_||e[1]===rf||e[1]===Z_||e[1]===J_?e=e[0]:e[1]===Q_?e=e[0]*r.root.computedStyle[l_]:e[1]===tf?e=e[0]*r.root.width*.01:e[1]===ef&&(e=e[0]*r.root.height*.01),[t,e]})}},{key:"__calContent",value:function(t,e,r,i){if(t===Yc||t===Gc){if(e<vf)return this.__hasContent;if("hidden"!==r[r_]){var n=r[Fu];if(Array.isArray(n))for(var o=0,a=n.length;o<a;o++)if(n[o])return!0;if(0<r[Pu][0][3]){var s=i[du],h=i[pu],l=i[Jc],c=i[qc],t=i[Qc],e=i[Zc];if(s&&h||l||c||t||e)return!0}for(var u=["Top","Right","Bottom","Left"],_=0,f=u.length;_<f;_++){var d=u[_];if(0<i[Uc[Vc("border"+d+"Width")]]&&0<r[Uc[Vc("border"+d+"Color")]][0][3])return!0}var p=r[Yu];if(Array.isArray(p))for(var g=0,v=p.length;g<v;g++){var m=p[g];if(m&&(0<m[2]||0<m[3]))return!0}}}return!1}},{key:"render",value:function(O,t,R,e){var S,C=this,I=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,k=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.isDestroyed,i=this.root,w=this.__config,n=w[N_],L=w[A_],a=w[M_],D=w[O_];if(w[D_]=df,this.__bbox=null,r)return{isDestroyed:r,break:!0};O===Hc&&(S=w[K_]=this.__virtualDom={bb:[],children:[],visibility:"visible"},w[P_]?w[P_].available||(w[P_].available=!0):w[P_]={available:!0,release:function(){this.available=!1,delete S.cache}});var o=D[fu];if("none"===o)return{break:!0};var s,h,l,c,u,_=this.clientWidth,f=this.clientHeight,d=this.offsetWidth,p=this.offsetHeight,g=this.__hasMask,N=D[Jc],P=D[qc],F=D[Qc],B=D[Zc],Y=D[nu],H=D[su],G=D[ou],W=D[au],v=w[U_],m=this.__sx1,y=this.__sx2,E=this.__sx3,x=this.__sx4,b=this.__sx5,T=this.__sx6,A=this.__sy1,M=this.__sy2,U=this.__sy3,X=this.__sy4,V=this.__sy5,K=this.__sy6,z={ctx:R,x1:m,x2:y,x3:E,x4:x,x5:b,x6:T,y1:A,y2:M,y3:U,y4:X,y5:V,y6:K,sx1:m,sx2:y,sx3:E,sx4:x,sx5:b,sx6:T,sy1:A,sy2:M,sy3:U,sy4:X,sy5:V,sy6:K},j=w[W_],r=this.__hasContent=w[L_]=this.__calContent(O,t,a,D);O===Gc&&this.__calPerspective(L,a,D,w),t=e&&O===Yc?w[k_]:this.__calMatrix(t,L,a,D,w,m,A,d,p),e&&O===Gc?!r&&this.__releaseWhenEmpty(n)?(z.break=!0,w[w_]=!1):w[w_]||(s=this.bbox,n?n.reset(s,m,A):n=la.getInstance(s,m,A),n&&n.enabled?(n.__bbox=s,R=n.ctx,I+=n.dx,k+=n.dy,z.ctx=R):(w[w_]=!0,z.limitCache=z.break=!(n=null)),w[N_]=n):O===Gc&&(s=Le.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),z.ctx=R=s.ctx),z.dx=I,z.dy=k,u=e&&O===Yc?(h=this.__bx1,c=this.__bx2,l=this.__by1,this.__by2):(lt=Qt(this.__calCache(O,R,j,L,a,D,_,f,d,p,G,H,W,Y,N,P,F,B,m,y,E,x,b,T,A,M,U,X,V,K),4),h=lt[0],l=lt[1],c=lt[2],lt[3]),z.bx1=h,z.by1=l,z.bx2=c,z.by2=u;var $,Z,q,J,Q,tt=D[Pu],et=D[Zu],rt=D[Qu],it=D[qu],nt=D[Ju],y=D[Kc],E=D[zc],x=D[$c],b=D[jc],M=D[r_],ot=D[Bu],at=D[Fu],U=D[Hu],X=D[Ku],st=D[Nu],ht=D[Yu],V=D[zu],lt=D[ju],ct=D[h_];if(e&&O===Yc?U=w[C_]:O===Yc||O===Gc?(j&&(U*=j.__config[C_]),w[C_]=U):O===Hc&&(1===U?delete S.opacity:S.opacity=U),O===Hc&&(te.isE(t)?delete S.transform:S.transform="matrix("+af(te.m2m6(t),",")+")",S.visibility=M),O===Yc&&e?t=w[I_]:($=w[k_],ue.assignMatrix($,t),j&&(j.perspectiveMatrix&&(t=te.multiply(j.perspectiveMatrix,t)),t=te.multiply(j.matrixEvent,t)),$=w[I_],ue.assignMatrix($,t)),z.limitCache)return z;"normal"!==lt&&uf(lt)?(lt=cf(lt),O===Yc&&e!==Wc?($=i.width,Z=i.height,$=Le.getCacheCanvas($,Z,null,"blend"),Z={ctx:R,target:$,mixBlendMode:lt,matrix:t},R=$.ctx):O===Hc&&(S.mixBlendMode=lt)):O===Hc&&delete S.mixBlendMode,g&&O===Yc&&e!==Wc&&(J=i.width,q=i.height,J=Le.getCacheCanvas(J,q,null,"mask1"),q={ctx:R,target:J,matrix:t},R=J.ctx),X&&X.length?O===Yc&&e!==Wc?(J=i.width,Q=i.height,J=Le.getCacheCanvas(J,Q,null,"filter"),Q={ctx:R,filter:X,target:J,matrix:t},R=J.ctx):O===Hc&&(S.filter=Tt.svgFilter(X)):O===Hc&&delete S.filter;var ut,_t,ft,dt=y.slice(0),pt=E.slice(0),gt=x.slice(0),vt=b.slice(0);if("padding-box"===ct||"paddingBox"===ct?(dt[0]-=Y,dt[1]-=G,pt[0]-=H,pt[1]-=G,gt[0]-=H,gt[1]-=W,vt[0]-=Y,vt[1]-=W):"content-box"!==ct&&"contentBox"!==ct||(dt[0]-=Y+B,dt[1]-=G+N,pt[0]-=H+P,pt[1]-=G+N,gt[0]-=H+P,gt[1]-=W+F,vt[0]-=Y+B,vt[1]-=W+F),"hidden"===V&&"inline"!==o?(_t=Xt.calRadius(h,l,c-h,u-l,dt,pt,gt,vt),O===Yc&&e!==Wc?(o=i.width,ut=i.height,o=Le.getCacheCanvas(o,ut,null,"overflow"),ut={ctx:R,target:o,matrix:t},R=o.ctx,ut.x=m,ut.y=A,ut.offsetWidth=d,ut.offsetHeight=p,ut.list=_t):O===Hc&&(d={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",Bc(_t)||"M".concat(m,",").concat(A,"L").concat(m+d,",").concat(A,"L").concat(m+d,",").concat(A+p,"L").concat(m,",").concat(A+p,",L").concat(m,",").concat(A)]]}]},p=R.add(d),w[G_].push(d),S.overflow="url(#"+p+")")):O===Hc&&delete S.overflow,O===Yc&&(z.offscreenBlend=Z,z.offscreenMask=q,z.offscreenFilter=Q,z.offscreenOverflow=ut,(z.ctx=R).globalAlpha=U,e||R.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])),("hidden"===M||z.break)&&(O===Yc||O===Gc))return z.break=!0,z;if(n&&n.enabled&&(n.__available=!0),v){var mt=this.contentBoxList,yt=mt.length,Et=at.some(function(t){return t});if(yt){v=function(){var p,n,t=D[l_],e=D[c_],g=D[u_],o=0,v=0,m=[];Et&&(o=Fc.getInlineWidth(C,mt),v=g,"paddingBox"===ct||"padding-box"===ct?(o+=B+P,v+=N+F):"contentBox"!==ct&&"content-box"!==ct&&(o+=B+P+Y+H,v+=N+F+G+W),O!==Yc&&O!==Gc||(p=Le.getCacheCanvas(o,v,"__$$INLINE_BGI$$__")),n=at.length,at.slice(0).reverse().forEach(function(t,e){var r,i;t&&(e=n-1-e,ue.isString(t)?(r=C.__loadBgi[e]).url===at[e]&&(i=$s.renderImage(C,O,p&&p.ctx||R,r,0,0,o,v,dt,pt,gt,vt,a,e,st,ot,w,!0,I,k),O===Hc&&i&&m.push(i)):!t.k||(i=C.__gradient(O,R,0,0,o,v,t,I,k))&&("conic"===i.k?(t=tr.renderConic(C,O,p&&p.ctx||R,i.v,0,0,o,g,dt,pt,gt,vt,!0),O===Hc&&t&&m.push(t)):(i=$s.renderBgc(C,O,p&&p.ctx||R,i.v,null,0,0,o,v,dt,pt,gt,vt,"fill",!0),O===Hc&&i&&m.push(i))))}));for(var e=mn.getFontFamily(e),y=mn.getBaseLine(D),E=t*(bt.info[e].lgr||0),x=!0,b=mt[0],T=b.parentLineBox,A=0,M=0;M<yt;M++){var _=mt[M];_.parentLineBox!==T&&function(){var t=Qt(Fc.getInlineBox(C,mt,b,mt[M-1],T,y,g,E,x,!1,ct,N,P,F,B,G,H,W,Y),8),i=t[0],n=t[1],e=t[2],r=t[3],o=t[4],a=t[5],s=t[6],h=t[7];x&&(t=xf(C),i-=t,o-=t),0<tt[3]&&$s.renderBgc(C,O,R,L[Pu],null,i,n,e-i,r-n,dt,[0,0],[0,0],vt,"fill",!1,I,k);var l,c,u=e-i;O!==Yc&&O!==Gc||!p?O===Hc&&m.length&&m.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(A,",",0,"L").concat(u+A,",",0,"L").concat(u+A,",").concat(v,"L").concat(A,",").concat(v,",L").concat(A,",",0)]]}]},r=R.add(e),w[G_].push(e),S.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-A],["y",n],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,A,0,u,v,i+I,n+k,u,v),A+=u,ht&&ht.forEach(function(t){Sc.renderBoxShadow(C,O,R,t,o,a,s,h,s-o,h-a,I,k)}),0<G&&0<et[3]&&(r=Math.atan(G/Y),e=Math.atan(G/H),e=Xt.calPoints(G,D[Wu],r,e,o,o+Y,s,s,a,a+G,h-W,h,0,x?dt:[0,0],[0,0]),Xt.renderBorder(C,O,R,e,L[Zu],I,k)),0<W&&0<it[3]&&(c=Math.atan(W/Y),l=Math.atan(W/H),c=Xt.calPoints(W,D[Xu],c,l,o,o+Y,s,s,a,a+G,h-W,h,2,x?dt:[0,0],[0,0]),Xt.renderBorder(C,O,R,c,L[qu],I,k)),x&&0<Y&&0<nt[3]&&(l=Math.atan(Y/G),c=Math.atan(Y/W),c=Xt.calPoints(Y,D[Vu],l,c,o,o+Y,s-H,s,a,a+G,h-W,h,3,dt,pt),Xt.renderBorder(C,O,R,c,L[Ju],I,k)),x=!1,T=(b=_).parentLineBox}(),M===yt-1&&function(){var t=Qt(Fc.getInlineBox(C,mt,b,mt[M],T,y,g,E,x,!0,ct,N,P,F,B,G,H,W,Y),8),i=t[0],n=t[1],e=t[2],r=t[3],o=t[4],a=t[5],s=t[6],h=t[7];x&&(l=xf(C),i-=l,o-=l);var l=function t(e){for(var r=0,i=e.flowChildren,n=i.length-1;0<=n;n--){var o=i[n];if(!(o instanceof bf||o instanceof Ms&&o.shadowRoot instanceof bf))break;if(o.flowChildren.length){r+=t(o);break}r+=o.outerWidth}return r}(C);e+=l,s+=l,0<tt[3]&&$s.renderBgc(C,O,R,L[Pu],null,i,n,e-i,r-n,x?dt:[0,0],pt,gt,x?vt:[0,0],"fill",!1,I,k);var c,u,_,f,d=e-i;O!==Yc&&O!==Gc||!p?O===Hc&&m.length&&m.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(A,",",0,"L").concat(d+A,",",0,"L").concat(d+A,",").concat(v,"L").concat(A,",").concat(v,",L").concat(A,",",0)]]}]},r=R.add(e),w[G_].push(e),S.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-A],["y",n],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,A,0,d,v,i+I,n+k,d,v),ht&&ht.forEach(function(t){Sc.renderBoxShadow(C,O,R,t,o,a,s,h,s-o,h-a,I,k)}),0<G&&0<et[3]&&(u=Math.atan(G/Y),c=Math.atan(G/H),u=Xt.calPoints(G,D[Wu],u,c,o,o,s-H,s,a,a+G,h-W,h,0,x?dt:[0,0],pt),Xt.renderBorder(C,O,R,u,L[Zu],I,k)),0<H&&0<rt[3]&&(c=Math.atan(H/G),u=Math.atan(H/W),u=Xt.calPoints(H,D[Uu],c,u,o,o+Y,s-H,s,a,a+G,h-W,h,1,dt,pt),Xt.renderBorder(C,O,R,u,L[Qu],I,k)),0<W&&0<it[3]&&(f=Math.atan(W/Y),_=Math.atan(W/H),f=Xt.calPoints(W,D[Xu],f,_,o,o,s-H,s,a,a+G,h-W,h,2,x?dt:[0,0],pt),Xt.renderBorder(C,O,R,f,L[qu],I,k)),x&&0<Y&&0<nt[3]&&(_=Math.atan(Y/G),f=Math.atan(Y/W),f=Xt.calPoints(Y,D[Vu],_,f,o,o+Y,s-H,s,a,a+G,h-W,h,3,dt,pt),Xt.renderBorder(C,O,R,f,L[Ju],I,k))}()}return p&&p.ctx.clearRect(0,0,o,v),{v:z}}();if("object"===xt(v))return v.v}else if(h===c||l===u)return z}return 0<tt[3]&&$s.renderBgc(this,O,R,L[Pu],_t,h,l,c-h,u-l,dt,pt,gt,vt,"fill",!1,I,k),at&&(ft=at.length,at.slice(0).reverse().forEach(function(t,e){var r;t&&(e=ft-1-e,ue.isString(t)?(r=C.__loadBgi[e]).url===at[e]&&$s.renderImage(C,O,R,r,h,l,c,u,dt,pt,gt,vt,a,e,st,ot,w,!1,I,k):!t.k||(t=C.__gradient(O,R,h,l,c,u,t,I,k))&&("conic"===t.k?tr.renderConic(C,O,R,t.v,h,l,c-h,u-l,dt,pt,gt,vt):$s.renderBgc(C,O,R,t.v,_t,h,l,c-h,u-l,dt,pt,gt,vt,"fill",!1,I,k)))})),ht&&ht.forEach(function(t){Sc.renderBoxShadow(C,O,R,t,m,A,T,K,T-m,K-A,I,k)}),0<G&&0<et[3]&&Xt.renderBorder(this,O,R,L[n_],L[Zu],I,k),0<H&&0<rt[3]&&Xt.renderBorder(this,O,R,L[o_],L[Qu],I,k),0<W&&0<it[3]&&Xt.renderBorder(this,O,R,L[a_],L[qu],I,k),0<Y&&0<nt[3]&&Xt.renderBorder(this,O,R,L[s_],L[Ju],I,k),z}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(o.prototype),"__destroy",this).call(this),t=this.root,this.clearAnimate(),this.clearFrameAnimate(),t.delRefreshTask(this.__loadBgi.cb),t.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,n=this.isMask;if(!(r||"none"===i[fu]||t.__stopPropagation||n)){var o,a=t.event.type,r=this.listener,n=this.__hasMask;if(r.hasOwnProperty(a)&&(o=r[a]),e)return"none"!==i[i_]&&ue.isFunction(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0;if(this.willResponseEvent(t)){if(n){for(var s,h=this.next,n=h.isClip;h&&h.isMask;){if(h.willResponseEvent(t,!0)){s=!0;break}h=h.next}if(!n&&!s)return}return ue.isFunction(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,n=this.__sx1,o=this.__sy1,a=this.offsetWidth,s=this.offsetHeight,h=this.matrixEvent,l=this.computedStyle;if("none"!==l[i_])return et.pointInQuadrilateral(r,i,n,o,n+a,o,n+a,o+s,n,o+s,h)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,i,n,o,a){var s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=n-r,c=o-i;if(l&&c){var u=a.k,_=a.v,f=a.d,d=a.s,p=a.z,g=a.p,v={k:u};return"linear"===u?(a=tr.getLinear(_,f,r,i,r+.5*l,i+.5*c,l,c,this.root,s,h),v.v=this.__getLg(t,e,a)):"radial"===u?(p=tr.getRadial(_,d,p,g,r,i,n,o,this.root,s,h))&&(v.v=this.__getRg(t,e,p),p.matrix&&(v.v=[v.v,p.matrix,p.cx,p.cy])):"conic"===u&&(u=this.bbox,u=Math.max(Math.abs(u[2]-u[0]),Math.abs(u[3]-u[1])),c=Math.max(Math.abs(l),Math.abs(c)),h=tr.getConic(_,f,g,r,i,n,o,u/c,this.root,s,h),v.v=this.__getCg(t,e,h)),v}}},{key:"__getLg",value:function(t,e,r){if(t===Yc||t===Gc){var i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach(function(t){i.addColorStop(t[1],nf(t[0]))}),i}if(t===Hc){r={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",nf(t[0])],["offset",100*t[1]+"%"]]}})},e=e.add(r);return this.__config[G_].push(r),"url(#"+e+")"}}},{key:"__getRg",value:function(t,e,r){if(t===Yc||t===Gc){var i=e.createRadialGradient(r.cx,r.cy,0,r.cx,r.cy,r.r);return r.stop.forEach(function(t){i.addColorStop(t[1],nf(t[0]))}),i}if(t===Hc){r={tagName:"radialGradient",props:[["cx",r.cx],["cy",r.cy],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",nf(t[0])],["offset",100*t[1]+"%"]]}})},e=e.add(r);return this.__config[G_].push(r),"url(#"+e+")"}}},{key:"__getCg",value:function(t,e,r){var i=r.cx,n=r.cy,o=r.r,a=r.deg,s=r.stop,h=s.length-1;s[h][1]<1&&s.push([s[h][0].slice(0),1]),0<s[0][1]&&s.unshift([s[0][0].slice(0),0]);var l=[];if(t===Yc||t===Gc)return r;if(t===Hc){for(var c,u=[],_=0,f=s.length;_<f-1;_++)for(var d=360*s[_][1],p=360*s[_+1][1]-d,g=Math.ceil(p),v=p/g,m=s[_][0],p=s[_+1][0],p=[p[0]-m[0],p[1]-m[1],p[2]-m[2],p[3]-m[3]],y=[p[0]/g,p[1]/g,p[2]/g,p[3]/g],E=0;E<g;E++){var x=Qt(et.pointOnCircle(i,n,o,d+v*E+a-.5),2),b=x[0],T=x[1],A=Qt(et.pointOnCircle(i,n,o,d+v*E+a+.5),2),x=A[0],A=A[1];u.push([b,T,x,A,Math.round(m[0]+y[0]*E),Math.round(m[1]+y[1]*E),Math.round(m[2]+y[2]*E),Math.round(m[3]+y[3]*E)])}h=u[0].slice(0),r=Qt(et.pointOnCircle(i,n,o,a),2),t=r[0],r=r[1];h[2]=t,h[3]=r;r=s[s.length-1][0];h[4]=r[0],h[5]=r[1],h[6]=r[2],h[7]=r[3],u.push(h);for(var M=0,O=u.length;M<O;M++){var R,S,C=u[M];c&&(R={tagName:"linearGradient",props:[["x1",c[0]],["y1",c[1]],["x2",C[2]],["y2",C[3]]],children:[{tagName:"stop",props:[["stop-color",nf([c[4],c[5],c[6],c[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",nf([C[4],C[5],C[6],C[7]])],["offset","100%"]]}]},S=e.add(R),this.__config[G_].push(R),l.push([[[i,n],[c[0],c[1]],[C[2],C[3]]],"url(#"+S+")"])),c=C}}return l}},{key:"clearCache",value:function(t){var e=this.__config,r=e[P_],i=e[F_],n=e[B_],o=e[Y_];t||(e[A_]=this.__cacheStyle={},(e=e[N_])&&e.release()),r&&r.release(),i&&i.release(),n&&n.release(),o&&o.release()}},{key:"updateStyle",value:function(e,r){var i=this,n=i.root,o=i.__config,a=mn.normalize(e);n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,o[H_]||((t={})[p_]=i,t[v_]=a,t[m_]=e,t[y_]=Object.keys(a).map(function(t){return t=!lf.hasOwnProperty(t)?parseInt(t):t}),t[E_]=o,n.__addUpdate(i,o,n,n.__config,t))},__after:function(t){ue.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,a),ue.isFunction(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,n=i.root,o=i.__config;n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,o[H_]||((t={})[p_]=i,t[v_]=e,t[y_]=Object.keys(e).map(function(t){return t=!lf.hasOwnProperty(t)?parseInt(t):t}),t[E_]=o,n.__addUpdate(i,o,n,n.__config,t))},__after:function(t){ue.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),ue.isFunction(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new Tc(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof Tc&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(ue.isFunction(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var n={__after:function(t){e(t)},__karasFramecb:e};return t.push(n),Js.onFrame(n),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void Js.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){Js.offFrame(t)})}},{key:"__computeMeasure",value:function(t,e,r){mn.computeMeasure(this),ue.isFunction(r)&&r(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){P(N(o.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[D_]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t}},{key:"__offsetY",value:function(t,e,r){P(N(o.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t,this.clearCache()),void 0!==r&&(this.__config[D_]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t}},{key:"__resizeX",value:function(t,e){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[w_]=!1),void 0!==e&&(this.__config[D_]|=e),this.clearCache()}},{key:"__resizeY",value:function(t,e){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[w_]=!1),void 0!==e&&(this.__config[D_]|=e),this.clearCache()}},{key:"__spreadBbox",value:function(t){var o=0,a=0;return Array.isArray(t)&&t.forEach(function(t){var e=Qt(t,6),r=e[0],i=e[1],n=e[2],t=e[3];"inset"!==e[5]&&(n=oa.outerSize(n),n+=t,o=Math.max(o,r+n),a=Math.max(a,i+n))}),[o,a]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=t?(i=Array.isArray(t)?t:[t]).map(function(t){return Uc[Vc(t)]}):Object.keys(e);return i.forEach(function(t){lf.hasOwnProperty(t)?r[t]=e[t]:r[Xc[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,n=this.matrixEvent,o=_f(te.calPoint([t,e],n)),a=_f(te.calPoint([t+r,e],n)),r=_f(te.calPoint([t+r,e+i],n)),n=_f(te.calPoint([t,e+i],n));return{left:Math.min(o[0],Math.min(a[0],Math.min(r[0],n[0]))),top:Math.min(o[1],Math.min(a[1],Math.min(r[1],n[1]))),right:Math.max(o[0],Math.max(a[0],Math.max(r[0],n[0]))),bottom:Math.max(o[1],Math.max(a[1],Math.max(r[1],n[1]))),points:[o,a,r,n]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var n=this;if(n.isDestroyed)return Le.warn("Remove target is destroyed."),void(ue.isFunction(e)&&e());var o=n.root,a=n.domParent,t=n.isShadowRoot?n.hostRoot:n;-1!==a.children.indexOf(t)?(o.delRefreshTask(n.__task),o.addRefreshTask(n.__task={__before:function(){n.__task=null;var t=a.__json,e=t.children.indexOf((n.isShadowRoot?n.hostRoot:n).__json),r=a.zIndexChildren,i=r.indexOf(n.isShadowRoot?n.hostRoot:n);if(-1===e||-1===i)throw new Error("Remove index Exception.");t.children.splice(e,1),a.children.splice(e,1),r.splice(i,1),n.__prev&&(n.__prev.__next=n.__next);i={};i[p_]=n,i[g_]=ya.REFLOW,i[x_]=!0,i[E_]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,i)},__after:function(t){(n.isShadowRoot?n.hostRoot:n).__destroy(),ue.isFunction(e)&&e.call(n,t)}})):ue.isFunction(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,n,o,a,s,h,l;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.clientWidth,i=this.clientHeight,n=(l=this.currentStyle)[ou],o=l[su],a=l[au],s=l[nu],h=l[Yu],h=(l=Qt(this.__spreadBbox(h),2))[0],l=l[1],r+=s[0]+o[0],i+=n[0]+a[0],this.__bbox=[t-h-1,e-l-1,t+r+h+1,e+i+l+1]),this.__bbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[k_]}},{key:"matrixEvent",get:function(){return this.__config[I_]}},{key:"perspectiveMatrix",get:function(){return this.__config[X_]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseLine",get:function(){return this.offsetHeight}},{key:"firstBaseLine",get:function(){return this.offsetHeight}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[z_]=this.__cacheAsBitmap=!!t}}]),o}(),A=m.STYLE_KEY,Tf=A.DISPLAY,Af=A.MARGIN_LEFT,Mf=A.BORDER_LEFT_WIDTH,Of=A.PADDING_LEFT,Rf=A.PADDING_RIGHT,Sf=A.BORDER_RIGHT_WIDTH,Cf=A.MARGIN_RIGHT,If=function(){function n(t,e,r,i){_(this,n),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseLine=i}return f(n,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(){var r=this.baseLine;this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseLine=Math.max(e,this.__baseLine)}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){var t=this.list,e=t.length;if(e){for(var r=t[0],e=t[e-1],i=r.x,n=(r instanceof Sn?r.parent:r).domParent;;){var o=n.contentBoxList,a=n.computedStyle,s=a[Tf],h=a[Af],l=a[Mf],a=a[Of];if("inline"!==s)break;r===o[0]&&(i-=h+l+a),n=n.domParent}for(var c=e.x+e.outerWidth,n=(e instanceof Sn?e.parent:e).domParent;;){var u=n.contentBoxList,_=n.computedStyle,f=_[Tf],d=_[Cf],p=_[Sf],_=_[Rf];if("inline"!==f)break;r===u[u.length-1]&&(c+=d+p+_),n=n.domParent}return c-i}return 0}},{key:"height",get:function(){return this.lineHeight}},{key:"baseLine",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),Math.max(this.__baseLine,e)}},{key:"lineHeight",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),Math.max(this.__lineHeight,e)}}]),n}(),kf=function(){function n(t,e,r,i){_(this,n),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__maxX=t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseLine=i,this.__isEnd=!0}return f(n,[{key:"genLineBox",value:function(t,e){e=new If(t,e,this.__lineHeight,this.__baseLine);return this.list.push(e),this.__isEnd=!0,e}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseLine,i);if(this.__isNewLine){i=new If(t,e,r,i);return this.list.push(i),this.__isEnd=!0,this.__isNewLine=!1,i}}},{key:"setLbOrGenLineBoxByInline",value:function(t,e,r,i){var n,o=Math.max(this.__lineHeight,r),a=Math.max(this.__baseLine,i),s=this.list;if(this.__isNewLine)return n=new If(t,e,o,a),s.push(n),this.__isEnd=!0,this.__isNewLine=!1,n;(n=s[s.length-1]).__setLB(r,i)}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__maxX=Math.max(this.__maxX,e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i){this.list.forEach(function(t){var e=r-t.width;0<e&&("center"===i&&(e*=.5),t.__offsetX(e),t.list.forEach(function(t){t.__offsetX(e,!0)}))})}},{key:"verticalAlign",value:function(){this.list.forEach(function(t){t.verticalAlign()})}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseLine",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseLine}return 0}},{key:"firstBaseLine",get:function(){var t=this.list;return t.length?t[0].baseLine:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}}]),n}(),wf={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},Jt=m.STYLE_KEY,Lf=Jt.DISPLAY,Df=Jt.TOP,Nf=Jt.BOTTOM,Pf=Jt.POSITION,Ff=Jt.HEIGHT,Bf=S.AUTO,Yf=S.PX,Hf=S.PERCENT,Gf=ya.REFLOW;var Wf={offsetAndResizeByNodeOnY:function(t,e,r,i,n){if(i){for(;;){for(;t.isShadowRoot;)t=t.host;var o=t,a=void 0,s=t.domParent;s&&(p=s.computedStyle[Pf],a=s===e||s.isShadowRoot||"relative"===p||"absolute"===p);for(var h=t.next,l=void 0;h;){if("none"!==h.currentStyle[Lf])if("absolute"===h.currentStyle[Pf]){var c=h.currentStyle,u=c[Df],_=c[Nf],c=c[Ff];if(u[1]===Bf?_[1]===Bf||_[1]===Yf?(h.__offsetY(i,!0,Gf),h.clearCache()):_[1]===Hf&&(_=(1-.01*_[0])*i,h.__offsetY(_,!0,Gf),h.clearCache()):u[1]===Hf&&(u=.01*u[0]*i,h.__offsetY(u,!0,Gf),h.clearCache()),c[1]===Hf)if(a)s.__layoutAbs(s,null,h);else{if(!l)for(l=s;l&&l!==e&&!l.isShadowRoot;){var f=l.currentStyle;if("absolute"===f[Pf]||"relative"===f[Pf])break;l=l.domParent}n.push([s,l,h])}}else h.__offsetY(i,!0,Gf),h.clearCache();h=h.next}if(!s)break;var d=(t=s).currentStyle,p=void 0;if("absolute"===d[Pf]?d[Ff][1]!==Bf||d[Df][1]!==Bf&&d[Nf][1]!==Bf||(p=!0):d[Ff][1]===Bf&&(p=!0),!p)break;if(t.__resizeY(i,Gf),t.clearCache(),t===e)break}for(;o;)o.clearCache(!0),o=o.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMarginTB:function(t,e){var r=0,i=t[0],n=t[0];return t.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),(e=0)<i&&0<n?e=Math.max(i,n)-r:i<0&&n<0?e=Math.min(i,n)-r:0===i&&0===n||(e=i+n-r),e}},Zt=m.STYLE_KEY,Uf=Zt.POSITION,Xf=Zt.DISPLAY,Vf=Zt.FONT_WEIGHT,Kf=Zt.MARGIN_LEFT,zf=Zt.MARGIN_TOP,jf=Zt.MARGIN_RIGHT,$f=Zt.MARGIN_BOTTOM,Zf=Zt.PADDING_LEFT,qf=Zt.PADDING_BOTTOM,Jf=Zt.PADDING_RIGHT,Qf=Zt.PADDING_TOP,t0=Zt.BORDER_TOP_WIDTH,e0=Zt.BORDER_BOTTOM_WIDTH,r0=Zt.BORDER_RIGHT_WIDTH,i0=Zt.BORDER_LEFT_WIDTH,n0=Zt.TOP,o0=Zt.RIGHT,a0=Zt.BOTTOM,s0=Zt.LEFT,h0=Zt.WIDTH,l0=Zt.HEIGHT,c0=Zt.TEXT_ALIGN,u0=Zt.FLEX_DIRECTION,_0=Zt.FLEX_BASIS,f0=Zt.FLEX_SHRINK,d0=Zt.FLEX_GROW,p0=Zt.ALIGN_SELF,g0=Zt.ALIGN_ITEMS,v0=Zt.JUSTIFY_CONTENT,m0=Zt.Z_INDEX,y0=Zt.WHITE_SPACE,E0=Zt.LINE_HEIGHT,x0=Zt.LINE_CLAMP,b0=Zt.ORDER,T0=Zt.FLEX_WRAP,A0=Zt.ALIGN_CONTENT,M0=Zt.OVERFLOW,O0=Zt.FONT_SIZE,ft=m.NODE_KEY,R0=ft.NODE_CURRENT_STYLE,S0=ft.NODE_STYLE,C0=ft.NODE_STRUCT,I0=ft.NODE_DOM_PARENT,k0=ft.NODE_IS_INLINE,sr=m.UPDATE_KEY,w0=sr.UPDATE_NODE,L0=sr.UPDATE_FOCUS,D0=sr.UPDATE_ADD_DOM,N0=sr.UPDATE_CONFIG,P0=sr.UPDATE_MEASURE,qt=m.STRUCT_KEY,F0=qt.STRUCT_NUM,B0=qt.STRUCT_LV,Y0=qt.STRUCT_TOTAL,H0=qt.STRUCT_CHILD_INDEX,G0=qt.STRUCT_INDEX,W0=S.AUTO,U0=S.PX,X0=S.PERCENT,V0=S.REM,K0=S.VW,z0=S.VH,j0=mn.calAbsolute,$0=mn.isRelativeOrAbsolute;function Z0(t){var i,n,o=[],a={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof Ms?t.shadowRoot:t)instanceof bf&&t.isMask?void 0!==n?a[n].push(t):e&&(s[n=e-1].__iIndex=n,a[n]=[t],i=!0):(n=void 0,t instanceof bf?(r.__zIndex=t.currentStyle[m0],$0(t)&&(r.__aIndex=!0)):r.__zIndex=0,o.push(r),r.__iIndex=e)}),o.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=o.length-1;0<=e;e--){var r=o[e].__iIndex;a.hasOwnProperty(r)&&o.splice.apply(o,[e+1,0].concat(d(a[r])))}return o}function q0(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof Ms&&(t=t.shadowRoot),r.__order=t instanceof bf?t.currentStyle[b0]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}var J0=function(){t(u,bf);var n=e(u);function u(t,e,r){_(this,u);var i,e=a(i=n.call(this,t,e)).style;e.display&&{flex:!0,block:!0,inline:!0,inlineBlock:!0,"inline-block":!0,none:!0}.hasOwnProperty(e.display)||(wf.INLINE.hasOwnProperty(i.tagName)?e.display="inline":e.display="block"),!e[Vf]&&wf.BOLD.hasOwnProperty(t)&&(e.fontWeight=700),i.__style=mn.normalize(e,lr.DOM_ENTRY_SET),i.__currentStyle=ue.extend({},i.__style),i.__children=r||[],i.__flexLine=[];r=i.__config;return r[R0]=i.__currentStyle,r[S0]=i.__style,i}return f(u,[{key:"__structure",value:function(r,i,t){var e=P(N(u.prototype),"__structure",this).call(this,r++,i,t),n=[e],o=this.__zIndexChildren=this.__zIndexChildren||Z0(this);o.forEach(function(t,e){e=t.__structure(r,i+1,e);Array.isArray(e)?(r+=e.length,n=n.concat(e)):(r++,n.push(e))});t=n.length-1;return e[F0]=o.length,e[Y0]=t,n}},{key:"__modifyStruct",value:function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.__config,n=i[C0],o=n[Y0]||0,a=this.__structure(n[G0],n[B0],n[H0]);(e=t.__structs).splice.apply(e,[n[G0]+r,o+1].concat(d(a)));a=0;return this!==t&&(a=((n=i[C0])[Y0]||0)-o,(i=i[I0].__config[C0])[Y0]=i[Y0]||0,i[Y0]+=a),[n,a]}},{key:"__updateStruct",value:function(t){var e=this.__config[C0],r=e[G0],e=e[Y0],i=void 0===e?0:e,e=this.__zIndexChildren=Z0(this);if(1!==e.length){e.forEach(function(t,e){t.__config[C0][H0]=e});for(var n,o=[],a=[],s=r+1;s<=r+i;s++){var h=t[s],l={child:h,list:t.slice(h[G0],h[G0]+h[Y0]+1)};o.push(l),a.push(l),s+=h[Y0]||0}o.sort(function(t,e){return t.child[H0]-e.child[H0]});for(var c,u=0,_=a.length;u<_;u++)if(a[u]!==o[u]){n=!0;break}n&&(c=[],o.forEach(function(t){c=c.concat(t.list)}),c.forEach(function(t,e){t[G0]=r+e+1}),t.splice.apply(t,[r+1,i].concat(d(c))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,i=this.currentStyle,n=i[Xf],o=i[h0],a=i[Kf],s=i[jf],h=i[Zf],l=i[Jf],c=i[i0],i=i[r0];if("inline"===n)r.length&&((n=(n=r[0])instanceof Ms?n.shadowRoot:n)instanceof bf?t=n.__tryLayInline(t,e):t-=n.firstCharWidth);else{if(o[1]===U0)t-=o[0];else if(o[1]===X0)t-=e*o[0]*.01;else if(o[1]===V0)t-=o[0]*this.root.computedStyle[O0];else if(o[1]===K0)t-=o[0]*this.root.width*.01;else if(o[1]===z0)t-=o[0]*this.root.height*.01;else for(var u=0;u<r.length;u++){if(t<0)return t;var _=r[u];(_=_ instanceof Ms?_.shadowRoot:_)instanceof bf?t=_.__tryLayInline(t,e):t-=_.textWidth}s[1]===U0?t-=s[0]:s[1]===X0?t-=s[0]*e*.01:s[1]===V0?t-=s[0]*this.root.computedStyle[O0]:s[1]===K0?t-=s[0]*this.root.width*.01:s[1]===z0&&(t-=s[0]*this.root.height*.01),l[1]===U0?t-=l[0]:l[1]===X0?t-=l[0]*e*.01:l[1]===V0?t-=l[0]*this.root.computedStyle[O0]:l[1]===K0?t-=l[0]*this.root.width*.01:l[1]===z0&&(t-=l[0]*this.root.height*.01),i[1]===U0?t-=i[0]:i[1]===V0?t-=i[0]*this.root.computedStyle[O0]:i[1]===K0?t-=i[0]*this.root.width*.01:i[1]===z0&&(t-=i[0]*this.root.height*.01)}return a[1]===U0?t-=a[0]:a[1]===X0?t-=a[0]*e*.01:a[1]===V0?t-=a[0]*this.root.computedStyle[O0]:a[1]===K0?t-=a[0]*this.root.width*.01:a[1]===z0&&(t-=a[0]*this.root.height*.01),h[1]===U0?t-=h[0]:h[1]===X0?t-=h[0]*e*.01:h[1]===V0?t-=h[0]*this.root.computedStyle[O0]:h[1]===K0?t-=h[0]*this.root.width*.01:h[1]===z0&&(t-=h[0]*this.root.height*.01),c[1]===U0?t-=c[0]:c[1]===V0?t-=c[0]*this.root.computedStyle[O0]:c[1]===K0?t-=c[0]*this.root.width*.01:c[1]===z0&&(t-=c[0]*this.root.height*.01),t}},{key:"__offsetX",value:function(e,r,i){P(N(u.prototype),"__offsetX",this).call(this,e,r,i),r&&!this.__config[k0]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){P(N(u.prototype),"__offsetY",this).call(this,e,r,i),r&&!this.__config[k0]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calMinMax",value:function(o,t){mn.computeReflow(this,this.isShadowRoot);var i,a,s,h,l,c=0,u=0,e=this.flowChildren,r=this.currentStyle,n=this.computedStyle,_=t.x,f=t.y,d=t.w,p=t.h,g=t.lineBoxManager,v=r[Xf],m=r[u0],y=r[h0],t=r[l0],E=n[E0],t=o?y:t;return t[1]===U0?c=u=t[0]:t[1]===V0?c=u=t[0]*this.root.computedStyle[O0]:t[1]===K0?c=u=t[0]*this.root.width*.01:t[1]===z0?c=u=t[0]*this.root.height*.01:"flex"===v?(i="column"!==m,(e=q0(e)).forEach(function(t){var e,r;t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf?(e=t.currentStyle,r=t.computedStyle,"block"!==e[Xf]&&"flex"!==e[Xf]&&(e[Xf]=r[Xf]="block"),e=Qt(t.__calMinMax(o,{x:_,y:f,w:d,h:p}),2),e=(r=Qt(e[1],2))[0],r=r[1],o?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):o?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new kf(_,f,E,mn.getBaseLine(n)),t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):"block"===v?(s=a=0,h=new kf(_,f,E,mn.getBaseLine(n)),l=e.length,e.forEach(function(t,e){var r,i,n;t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf?(r=(i=Qt(t.__calMinMax(o,{x:_,y:f,w:d,h:p,lineBoxManager:h}),2))[0],i=(n=Qt(i[1],2))[0],n=n[1],"block"!==r&&"flex"!==r||!h.isEnd||(h.setNotEnd(),h.setNewLine()),o?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,n),a=s=0):(a+=i,s+=n,c=Math.max(c,a),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=a,u+=s,a=s=0,c+=i,u+=n):(a=Math.max(a,i),s=Math.max(s,n),e===l-1&&(c+=a,u+=s))):o?(a+=t.charWidth,s+=t.textWidth,c=Math.max(c,a),u=Math.max(u,s)):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:h}),a=Math.max(a,t.height),s=Math.max(s,t.height),e===l-1&&(c+=a,u+=s))})):("inlineBlock"!==v&&"inline-block"!==v||(g=new kf(_,f,E,mn.getBaseLine(n))),e.forEach(function(t){var e,r;t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf?(e=Qt(t.__calMinMax(o,{x:_,y:f,w:d,h:p,lineBoxManager:g}),2),e=(r=Qt(e[1],2))[0],r=r[1],o?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r))):o?(c+=t.charWidth,u+=t.textWidth):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:g}),c=Math.max(c,t.height),u=Math.max(u,t.height))})),[v,this.__addMp(o,d,r,[c,u])]}},{key:"__calBasis",value:function(o,t,e){mn.computeReflow(this,this.isShadowRoot);var r,i,a,s,h,l,n=0,c=0,u=0,_=this.flowChildren,f=this.currentStyle,d=this.computedStyle,p=t.x,g=t.y,v=t.w,m=t.h,y=f[Xf],E=f[u0],x=f[h0],b=f[l0],T=f[_0],A=d[E0],M=o?x:b,t=T[1]===W0,x=-1<[U0,X0,V0,K0,z0].indexOf(T[1]),b=!t&&!x;return x?T[1]===U0?n=r=T[0]:T[1]===X0?n=r=(o?v:m)*T[0]*.01:T[1]===V0?n=r=T[0]*this.root.computedStyle[O0]:T[1]===K0?n=r=T[0]*this.root.width*.01:T[1]===z0&&(n=r=T[0]*this.root.height*.01):-1<[U0,X0,V0,K0,z0].indexOf(M[1])&&t?M[1]===U0?n=r=M[0]:M[1]===X0?n=r=.01*M[0]*(o?v:m):M[1]===V0?n=r=M[0]*this.root.computedStyle[O0]:M[1]===K0?n=r=M[0]*this.root.width*.01:M[1]===z0&&(n=r=M[0]*this.root.height*.01):t&&(b=!0),"flex"===y?(i="column"!==E,(_=q0(_)).forEach(function(t){var e,r;t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf?(e=t.currentStyle,r=t.computedStyle,"block"!==e[Xf]&&"flex"!==e[Xf]&&(e[Xf]=r[Xf]="block"),e=Qt(t.__calMinMax(o,{x:p,y:g,w:v,h:m}),2),e=(r=Qt(e[1],2))[0],r=r[1],o?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):o?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new kf(p,g,A,mn.getBaseLine(d)),t.__layout({x:p,y:g,w:v,h:m,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):(s=a=0,h=this.__lineBoxManager=new kf(p,g,A,mn.getBaseLine(d)),l=_.length,_.forEach(function(t,e){var r,i,n;t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf?(r=(i=Qt(t.__calMinMax(o,{x:p,y:g,w:v,h:m,lineBoxManager:h}),2))[0],i=(n=Qt(i[1],2))[0],n=n[1],"block"!==r&&"flex"!==r||!h.isEnd||(h.setNotEnd(),h.setNewLine()),o?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,n),a=s=0):(a+=i,s+=n,c=Math.max(c,a),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=a,u+=s,a=s=0,c+=i,u+=n):(a=Math.max(a,i),s=Math.max(s,n),e===l-1&&(c+=a,u+=s))):o?(a+=t.charWidth,s+=t.textWidth,c=Math.max(c,a),u=Math.max(u,s)):(t.__layout({x:p,y:g,w:v,h:m,lineBoxManager:h}),a=Math.max(a,t.height),s=Math.max(s,t.height),e===l-1&&(c+=a,u+=s))})),r&&(u=Math.max(r,u)),b&&(n=u),this.__addMp(o,v,f,[n,c,u],!0)}},{key:"__layoutNone",value:function(){P(N(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(_,f){var d=this.flowChildren,t=this.currentStyle,e=this.computedStyle,r=this.__preLayout(_),i=r.fixedWidth,n=r.fixedHeight,p=r.x,g=r.y,v=r.w,m=r.h;if(i&&f)return this.__width=v,void this.__ioSize(v,this.height);var o=e[c0],y=e[y0],E=e[x0],r=e[E0],E=E||0,x=0,b=this.__lineBoxManager=new kf(p,g,r,mn.getBaseLine(e)),T=0,A=0,M=[],O=[],R=d.length;d.forEach(function(t,e){var r,i,n,o,a,s,h=t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf,l=h&&"inline"===t.currentStyle[Xf],c=h&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[Xf]),u="img"===t.tagName;h&&!l&&!c||(M.length&&O.length&&((o=Wf.getMergeMarginTB(O,M))&&(g+=o)),O=[],M=[]),h?c||l?p===_.x||l&&"nowrap"===y?(t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(T=Math.max(T,A),A=t.outerWidth,T=Math.max(T,A))):(-1e-10<=t.__tryLayInline(v+_.x-p,v)?(t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),(c||u)&&b.addItem(t),p=b.lastX,g=b.lastY):(x++,p=_.x,g=b.endY,b.setNewLine(),x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(T=Math.max(T,A),A=0)),f&&(A+=t.outerWidth,T=Math.max(T,A))):(p!==_.x&&d[e-1]instanceof Za&&x++,p=_.x,b.isEnd&&(g=b.endY,b.setNotEnd(),b.setNewLine()),t.__layout({x:p,y:g,w:v,h:m},f),!(r="none"===t.currentStyle[Xf])&&t.flowChildren&&0===t.flowChildren.length&&(n=(a=t.computedStyle)[zf],o=a[$f],h=a[Qf],l=a[qf],c=a[l0],u=a[t0],a=a[e0],h<=0&&l<=0&&c<=0&&u<=0&&a<=0&&(M.push(o),O.push(n),i=!0)),g+=t.outerHeight,b.__lastY=g,f&&(T=Math.max(T,t.outerWidth),A=0),r||i?e!==R-1||(s=Wf.getMergeMarginTB(O,M))&&(g+=s):(s=(e=t.computedStyle)[zf],e=e[$f],M.length&&(O.push(s),(s=Wf.getMergeMarginTB(O,M))&&(t.__offsetY(s,!0),g+=s)),O=[],M=[e])):E&&E<=x||(p===_.x||"nowrap"===y?(x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),p=b.lastX,g=b.lastY,f&&(T=Math.max(T,A),A=t.width,T=Math.max(T,A))):(-1e-10<=t.__tryLayInline(v-p+_.x)?(x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),p=b.lastX,g=b.lastY):(x++,p=_.x,g=b.endY,b.setNewLine(),x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),p=b.lastX,g=b.lastY,f&&(T=Math.max(T,t.width),A=0)),f&&(A+=t.width,T=Math.max(T,A))))}),b.isEnd&&(g=b.endY);var a=this.__width=i||!f?v:T,n=this.__height=n?m:g-_.y;this.__ioSize(a,n),f||(b.verticalAlign(),-1<["center","right"].indexOf(o)&&(b.horizonAlign(a,o),d.forEach(function(t){(t=t instanceof Ms?t.shadowRoot:t)instanceof Za&&t.__inlineSize()})),b.domList.forEach(function(t){t.__inlineSize(a,o)}),this.__marginAuto(t,_))}},{key:"__layoutFlex",value:function(r,h){var n=this,t=this.flowChildren,e=this.currentStyle,l=this.computedStyle,o=this.__flexLine,i=this.__preLayout(r),a=i.fixedWidth,s=i.fixedHeight,c=i.x,u=i.y,_=i.w,f=i.h;if(a&&h)return this.__width=_,void this.__ioSize(_,this.height);o.splice(0);var d=l[u0],p=l[v0],g=l[g0],v=l[x0],m=l[T0],i=l[A0],y=l[E0],E=l[c0],v=v||0,x=0,b=-1===["column","column-reverse","columnReverse"].indexOf(d),T=[],A=[],M=[],O=[],R=[],S=q0(t);if(S.forEach(function(t){var e,r,i,n,o,a,s;t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf?(o=t.currentStyle,e=t.computedStyle,"block"!==o[Xf]&&"flex"!==o[Xf]&&(o[Xf]=e[Xf]="block"),r=(n=Qt(t.__calBasis(!!h||b,{x:c,y:u,w:_,h:f},h),3))[0],a=n[1],i=n[2],h?b?x+=i:x=Math.max(x,i):(n=o[d0],o=o[f0],e[_0]=r,T.push(n),A.push(o),M.push(r),O.push(i),R.push(a))):h?b?x+=t.textWidth:x=Math.max(x,t.textWidth):(T.push(0),A.push(1),b?(s=t.charWidth,a=t.textWidth,M.push(a),O.push(a),R.push(s)):(s=new kf(c,u,y,mn.getBaseLine(l)),t.__layout({x:c,y:u,w:_,h:void 0,lineBoxManager:s,lineClamp:v,lineClampCount:0}),t=t.height,M.push(t),R.push(t)))}),h){t=this.__width=Math.min(x,_);this.__ioSize(t,this.height)}else{var C=b?_:f,I="wrap"===m||-1<["wrap-reverse","wrapReverse"].indexOf(m),k=[],w=0,L=[];M.forEach(function(t,e){var r=R[e],i=O[e],t=t<r?r:i<t?i:t;L.push(t),I?C<w+t?w=w?(o.push(k),k=[S[e]],t):(k.push(S[e]),o.push(k),k=[],0):(k.push(S[e]),w+=t):k.push(S[e])}),k.length&&o.push(k);var D=0,N={x:c,y:u,w:_,h:f},P=[];o.forEach(function(t){var e=t.length,r=D+e,i=Qt(n.__layoutFlexLine(N,b,C,a,s,v,0,y,l,p,g,S.slice(D,r),t,E,T.slice(D,r),A.slice(D,r),M.slice(D,r),L.slice(D,r),R.slice(D,r)),3),t=i[0],r=i[1],i=i[2];b?N.y=r:N.x=t,c=Math.max(c,t),u=Math.max(u,r),P.push(i),D+=e});var F=this.__width=_,B=this.__height=s?f:u-r.y;this.__ioSize(F,B),"row-reverse"===d||"rowReverse"===d?o.forEach(function(t){t.forEach(function(t){var e=F-t.outerWidth-2*(t.x-r.x);e&&t.__offsetX(e,!0)})}):"column-reverse"!==d&&"columnReverse"!==d||o.forEach(function(t){t.forEach(function(t){var e=B-t.outerHeight-2*(t.y-r.y);e&&t.__offsetY(e,!0)})});var Y,H,G,W,U,d=o.length;if(-1<["wrapReverse","wrap-reverse"].indexOf(m)&&1<d){var X=0,V=[];P.forEach(function(t){V.push(X),X+=t});for(var K=0,z=d-1;0<=z;z--)!function(t){var e=o[t],r=V[t],i=K-r;i&&e.forEach(function(t){b?t.__offsetY(i,!0):t.__offsetX(i,!0)}),K+=P[t]}(z);o.reverse()}!h&&1<d&&(s&&b||!b)&&(0<(H=b?B-(u-r.y):F-(c-r.x))&&("center"===i?(G=.5*H,S.forEach(function(t){b?t.__offsetY(G,!0):t.__offsetX(G,!0)})):"flex-start"===i||"flexStart"===i||("flex-end"===i||"flexEnd"===i?S.forEach(function(t){b?t.__offsetY(H,!0):t.__offsetX(H,!0)}):"space-between"===i||"spaceBetween"===i?(W=H/(d-1),o.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(W,!0):t.__offsetX(W,!0)})})):"space-around"===i||"spaceAround"===i?(U=H/(d+1),o.forEach(function(t,e){t.forEach(function(t){b?t.__offsetY(U*(e+1),!0):t.__offsetX(U*(e+1),!0)})})):(Y=H/d,o.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(Y*e,!0):t.__offsetX(Y*e,!0)})}))))),h||(1<d?o.forEach(function(t,e){e=P[e];Y&&(e+=Y),n.__crossAlign(t,g,b,e)}):d&&(d=P[0],b?s&&(d=f):d=_,this.__crossAlign(o[0],g,b,d))),this.__marginAuto(e,r)}}},{key:"__layoutFlexLine",value:function(t,i,e,r,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m){var y=this,E=t.x,x=t.y,b=t.w,T=t.h,A=0;v.forEach(function(t){A+=t});var M=e<=A,O=[];g.forEach(function(t,e){M?(!p[e]||g[e]<v[e])&&(O[e]=v[e]):(!d[e]||g[e]>v[e])&&(O[e]=v[e])});var R=0;g.forEach(function(t,e){void 0!==O[e]?R+=O[e]:R+=t});var e=1/0,e=i?b:n?T:R,R=Math.abs(e-R),S=0;(M?function(){for(var i=p.map(function(t,e){if(void 0===O[e]){e=t*g[e];return S+=e,e}});;){S<1&&(R*=S);var n=void 0,o=0;if(i.forEach(function(t,e){var r;t&&(r=t/S*R,(r=g[e]-r)<m[e]?(O[e]=m[e],i[e]=0,n=!0,R-=g[e]-m[e]):(O[e]=r,o+=t))}),!n)break;S=o}}:function(){for(var i=d.map(function(t,e){if(void 0===O[e])return S+=t,t});;){S<1&&(R*=S);var n=void 0,o=0;if(i.forEach(function(t,e){var r;t&&(r=t/S*R,(r=g[e]+r)<m[e]?(O[e]=m[e],i[e]=0,n=!0,R-=g[e]-m[e]):(O[e]=r,o+=t))}),!n)break;S=o}})();var C=0,I=[];u.forEach(function(t,e){var r=O[e];t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf?i?t.__layout({x:E,y:x,w:r,h:T,w3:r}):t.__layout({x:E,y:x,w:b,h:r,h3:r}):(e=y.__lineBoxManager=new kf(E,x,s,mn.getBaseLine(h)),I.push(e),t.__layout({x:E,y:x,w:i?r:b,h:i?T:r,lineBoxManager:e,lineClamp:o,lineClampCount:a})),C=i?(E+=t.outerWidth,Math.max(C,t.outerHeight)):(x+=t.outerHeight,Math.max(C,t.outerWidth))});var k=i?b-E+t.x:T-x+t.y;if(0<k){var w=u.length;if("flexEnd"===l||"flex-end"===l)for(var L=0;L<w;L++){var D=u[L];i?D.__offsetX(k,!0):D.__offsetY(k,!0)}else if("center"===l)for(var N=.5*k,P=0;P<w;P++){var F=u[P];i?F.__offsetX(N,!0):F.__offsetY(N,!0)}else if("spaceBetween"===l||"space-between"===l)for(var B=k/(w-1),Y=1;Y<w;Y++){var H=u[Y];i?H.__offsetX(B*Y,!0):H.__offsetY(B*Y,!0)}else if("spaceAround"===l||"space-around"===l)for(var G=k/(w+1),W=0;W<w;W++){var U=u[W];i?U.__offsetX(G*(W+1),!0):U.__offsetY(G*(W+1),!0)}}return i?x+=C:E+=C,-1<["center","right"].indexOf(f)&&I.forEach(function(t){t.horizonAlign(t.width,f)}),[E,x,C]}},{key:"__crossAlign",value:function(t,S,C,I){var k=0;t.forEach(function(t){k=Math.max(k,t.firstBaseLine)}),t.forEach(function(t){var e,r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R=t.currentStyle[p0];C?"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(a=I-t.outerHeight)&&t.__offsetY(a,!0):"center"===R?0!=(s=I-t.outerHeight)&&t.__offsetY(.5*s,!0):"stretch"===R?(e=t.computedStyle,h=t.currentStyle[l0],r=e[t0],i=e[e0],n=e[zf],o=e[$f],a=e[Qf],s=e[qf],h[1]===W0&&(h=t.height,h=(t.__height=e[l0]=I-n-o-a-s-r-i)-h,t.__sy4+=h,t.__sy5+=h,t.__sy6+=h,t.__height+=h,t.__clientHeight+=h,t.__offsetHeight+=h,t.__outerHeight+=h)):"baseline"===R?0!=(c=k-t.firstBaseLine)&&t.__offsetY(c,!0):"flexStart"===S||"flex-start"===R||("center"===S?0!=(u=I-t.outerHeight)&&t.__offsetY(.5*u,!0):"flexEnd"===S||"flex-end"===S?0!=(_=I-t.outerHeight)&&t.__offsetY(_,!0):"baseline"===S?0!=(l=k-t.firstBaseLine)&&t.__offsetY(l,!0):(f=t.computedStyle,u=(c=t.currentStyle)[Xf],_=c[u0],l=c[l0],C&&"flex"===u&&"column"===_&&l[1]===W0&&t.outerHeight<I&&t.__layout(Object.assign(t.__layoutData,{h3:I})),d=f[t0],p=f[e0],c=f[zf],u=f[$f],_=f[Qf],f=f[qf],l[1]===W0&&(g=t.height,t.__sy4+=v=I-c-u-_-f-d-p-g,t.__sy5+=v,t.__sy6+=v,t.__height+=v,t.__clientHeight+=v,t.__offsetHeight+=v,t.__outerHeight+=v)))):"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(m=I-t.outerWidth)&&t.__offsetX(m,!0):"center"===R?0!=(y=I-t.outerWidth)&&t.__offsetX(.5*y,!0):"stretch"===R?(f=t.computedStyle,d=t.currentStyle[h0],p=f[r0],E=f[i0],g=f[jf],v=f[Kf],m=f[Jf],y=f[Zf],d[1]===W0&&(O=t.width,x=(t.__width=f[h0]=I-v-g-y-m-p-E)-O,t.__sx4+=x,t.__sx5+=x,t.__sx6+=x,t.__width+=x,t.__clientWidth+=x,t.__offsetWidth+=x,t.__outerWidth+=x)):"baseline"===S?0!=(b=k-t.firstBaseLine)&&t.__offsetX(b,!0):"flexStart"===S||"flex-start"===R||("center"===S?0!=(T=I-t.outerWidth)&&t.__offsetX(.5*T,!0):"flexEnd"===S||"flex-end"===S?0!=(A=I-t.outerWidth)&&t.__offsetX(A,!0):"baseline"===S?0!=(M=k-t.firstBaseLine)&&t.__offsetX(M,!0):(E=t.computedStyle,O=t.currentStyle[h0],x=E[r0],b=E[i0],R=E[jf],T=E[Kf],A=E[Jf],M=E[Zf],O[1]===W0&&(O=t.width,O=(t.__width=E[h0]=I-T-R-M-A-x-b)-O,t.__sx4+=O,t.__sx5+=O,t.__sx6+=O,t.__width+=O,t.__clientWidth+=O,t.__offsetWidth+=O,t.__outerWidth+=O))))})}},{key:"__layoutInline",value:function(t,s,h){var e=this.flowChildren,r=this.currentStyle,i=this.computedStyle,n=this.__preLayout(t,h),o=n.fixedWidth,a=n.fixedHeight,l=n.x,c=n.y,u=n.w,_=n.h,f=n.lx,d=n.lineBoxManager,p=n.nowrap,g=n.endSpace,v=n.selfEndSpace;if(o&&s)return this.__width=u,void this.__ioSize(u,this.height);var m=r[h0],y=i[c0],E=i[y0],x=i[x0],b=i[E0],T=i[Kf],A=i[jf],M=i[i0],O=i[r0],n=i[Zf],r=i[Jf],R=t.lineClampCount||0;(h=h&&!this.__isRealInline()?!1:h)?(this.__config[k0]=!0,this.__lineBoxManager=d,S=mn.getBaseLine(i),(T||A||n||r||M||O)&&d.isNewLine?d.genLineBoxByInlineIfNewLine(l,c,b,S):d.setLbByInlineIfNotNewLine(b,S),x=t.lineClamp||0):(d=this.__lineBoxManager=new kf(l,c,b,mn.getBaseLine(i)),f=l,g=v=R=0),h&&(this.__contentBoxList=[],d.pushContentBoxList(this));var S,C,I,k=!1,w=e.length;return e.forEach(function(t,e){var r=t instanceof bf||t instanceof Ms&&t.shadowRoot instanceof bf,i=r&&"inline"===t.currentStyle[Xf],n=r&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[Xf]),o=r&&t.__isRealInline(),a=h&&e===w-1;a&&(g+=v),r?(i||n||(t.currentStyle[Xf]=t.computedStyle[Xf]="inlineBlock",n=!0,Le.warn("Inline can not contain block/flex")),l===f||!e||i&&"nowrap"===E?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),t.__isIbFull?(n&&u[1]===W0&&(k=!0),d.addItem(t),l=f,c+=t.outerHeight,d.setNotEnd()):(!n&&o||d.addItem(t),l=d.lastX,c=d.lastY)):-1e-10<=("nowrap"===E?0:t.__tryLayInline(u-l+f,u-(a?g:0)))?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,nowrap:"nowrap"===E,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),!n&&o||d.addItem(t),l=d.lastX,c=d.lastY):(i&&R++,l=f,c=d.endY,d.setNewLine(),R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),t.__isIbFull?(d.addItem(t),l=f,c+=t.outerHeight,d.setNotEnd()):(!n&&o||d.addItem(t),l=d.lastX,c=d.lastY))):(n=d.size,l!==f&&e&&"nowrap"!==E?(e=(o=!e&&p||"nowrap"===E)?0:t.__tryLayInline(u+f-l),!o&&0<=e&&a&&g&&1===t.content.length&&((a=e-g)<0&&(e=a)),-1e-10<=e?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),l=d.lastX,c=d.lastY):(R++,l=f,c=d.endY,d.setNewLine(),R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),l=d.lastX,c=d.lastY,!h&&1<d.size-n&&m[1]===W0&&(k=!0))):(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),l=d.lastX,c=d.lastY,!h&&1<d.size-n&&m[1]===W0&&(k=!0)))}),c=d.endY,this.__isIbFull=k,h?(v&&d.addX(v),e.length||(S=i[Kf],b=i[Zf],C=i[i0],d.addX(S+b+C)),d.popContentBoxList(),s&&this.__inlineSize()):(C=d.__maxX-t.x,I=this.__width=o?u:k?Math.max(u,C):C,t=this.__height=a?_:c-t.y,this.__ioSize(I,t)),s||h||(d.verticalAlign(),-1<["center","right"].indexOf(y)&&(d.horizonAlign(I,y),e.forEach(function(t){(t=t instanceof Ms?t.shadowRoot:t)instanceof Za&&t.__inlineSize()})),d.domList.forEach(function(t){t.__inlineSize(I,y)})),h?R:0}},{key:"__inlineSize",value:function(t,e){var r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m=this.contentBoxList,y=this.computedStyle,E=this.__ox,x=this.__oy,b=y[zf],T=y[jf],A=y[$f],M=y[Kf],O=y[Qf],R=y[Jf],S=y[qf],C=y[Zf],I=y[t0],k=y[r0],w=y[e0],L=y[i0],D=y[E0],N=m.length;N?(m.forEach(function(t,e){e?(n=Math.min(n,t.x),h=Math.min(h,t.x),_=Math.min(_,t.x),g=Math.min(g,t.x),e===N-1?(r=a=c=d=Math.max(r,t.x+t.outerWidth),i=s=u=p=Math.max(i,t.y+t.outerHeight),a+=R,s+=S,c+=R+k,u+=S+w,d+=k+R+T,p+=w+S+A):r=a=c=d=Math.max(r,t.x+t.outerWidth)):(n=t.x,o=t.y,g=(_=(h=n-C)-L)-M,v=(f=(l=o-O)-I)-b,r=a=c=d=t.x+t.outerWidth,i=s=u=p=t.y+t.outerHeight,e===N-1&&(a+=R,s+=S,c+=R+k,u+=S+w,d+=k+R+T,p+=w+S+A))}),this.__x=g,this.__y=v,this.__width=y[h0]=r-n,this.__height=y[l0]=Math.max(D,i-o),this.__clientWidth=a-h,this.__clientHeight=s-l,this.__offsetWidth=c-_,this.__offsetHeight=u-f,this.__outerWidth=d-g,this.__outerHeight=p-v,this.__sx=g+E,this.__sy=v+x,this.__sx1=_+E,this.__sy1=f+x,this.__sx2=h+E,this.__sy2=l+x,this.__sx3=n+E,this.__sy3=o+x,this.__sx4=r+E,this.__sy4=i+x,this.__sx5=a+E,this.__sy5=s+x,this.__sx6=c+E,this.__sy6=u+x,-1<["center","right"].indexOf(e)&&this.children.forEach(function(t){t instanceof Za&&t.__inlineSize()})):(-1<["center","right"].indexOf(e)&&(t=t,"center"===e&&(t*=.5),t&&this.__offsetX(t,!0)),this.__width=y[h0]=0,D=this.__height=y[l0]=D,this.__ioSize(0,D),this.__sy-=b+O+I,this.__sx1=this.sx+M,this.__sy1=this.sy+b,this.__sx2=this.__sx1+L,this.__sy2=this.__sy1+I,this.__sx4=this.__sx3=this.__sx2+C,this.__sy4=this.__sy3=this.__sy2+O,this.__sx5=this.__sx4+R,this.__sy5=this.__sy4+D+S,this.__sx6=this.__sx5+k,this.__sy6=this.__sy5+w,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+M+T,this.__outerHeight=this.__offsetHeight+b+A)}},{key:"__layoutAbs",value:function(r,i,T){var A=this,M=r.sx,O=r.sy,R=r.clientWidth,S=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,n=this.children,o=this.absChildren,a=t[Xf],s=t[t0],h=t[i0],l=t[zf],c=t[Kf],C=t[Zf],I=t[Qf];e||"none"===a?this.__layoutNone():(M+=c+h,O+=l+s,o.forEach(function(t){if(T){var e=t;if(t instanceof Ms&&(e=t.shadowRoot),T!==e&&T!==t)return}var r=t.currentStyle,i=t.computedStyle;if("none"!==r[Xf]){t.__mp(r,i,R),"block"!==r[Xf]&&"flex"!==r[Xf]&&(r[Xf]=i[Xf]="block");var n,o,a,s,h,l,c,u,_,f,d=r[s0],p=r[n0],g=r[o0],v=r[a0],m=r[h0],y=r[l0],E=r[Xf],e=r[u0];if(d[1]!==W0?(_=!0,i[s0]=j0(r,"left",d,R,A.root)):i[s0]="auto",g[1]!==W0?(c=!0,i[o0]=j0(r,"right",g,R,A.root)):i[o0]="auto",p[1]!==W0?(l=!0,i[n0]=j0(r,"top",p,S,A.root)):i[n0]="auto",v[1]!==W0?(u=!0,i[a0]=j0(r,"bottom",v,S,A.root)):i[a0]="auto",_&&c?(n=M+i[s0],o=M+R-i[o0]-n):_?(n=M+i[s0],m[1]!==W0&&(o=m[1]===X0?m[0]*R*.01:m[1]===V0?m[0]*A.root.computedStyle[O0]:m[1]===K0?m[0]*A.root.width*.01:m[1]===z0?m[0]*A.root.height*.01:m[0])):c?(m[1]!==W0?o=m[1]===X0?m[0]*R*.01:m[1]===V0?m[0]*A.root.computedStyle[O0]:m[1]===K0?m[0]*A.root.width*.01:m[1]===z0?m[0]*A.root.height*.01:m[0]:s=!0,n=M+R-i[o0]-(o||0),n-=i[Kf],n-=i[jf],n-=i[Zf],n-=i[Jf],n-=r[i0][0],n-=r[r0][0]):(n=M+C,m[1]!==W0&&(o=m[1]===X0?m[0]*R*.01:m[1]===V0?m[0]*A.root.computedStyle[O0]:m[1]===K0?m[0]*A.root.width*.01:m[1]===z0?m[0]*A.root.height*.01:m[0])),l&&u)x=O+i[n0],a=O+S-i[a0]-x;else if(l)x=O+i[n0],y[1]!==W0&&(a=y[1]===X0?y[0]*S*.01:y[1]===V0?y[0]*A.root.computedStyle[O0]:y[1]===K0?y[0]*A.root.width*.01:y[1]===z0?y[0]*A.root.height*.01:y[0]);else if(u)y[1]!==W0?a=y[1]===X0?y[0]*S*.01:y[1]===V0?y[0]*A.root.computedStyle[O0]:y[1]===K0?y[0]*A.root.width*.01:y[1]===z0?y[0]*A.root.height*.01:y[0]:h=!0,x=O+S-i[a0]-(a||0),x-=i[zf],x-=i[$f],x-=i[Qf],x-=i[qf],x-=r[t0][0],x-=r[e0][0];else{for(var x=O+I,b=t.prev;b;){if(b instanceof Za||"absolute"!==b.computedStyle[Uf]){x=b.y+b.outerHeight;break}b=b.prev}y[1]===X0?a=y[0]*S*.01:y[1]===V0?a=y[0]*A.root.computedStyle[O0]:y[1]===K0?a=y[0]*A.root.width*.01:y[1]===z0?a=y[0]*A.root.height*.01:y[1]===U0&&(a=y[0])}(("block"===E||-1<["inlineBlock","inline-block"].indexOf(E))&&void 0===o||"flex"===E&&(void 0===o||"column"===e&&void 0===a))&&(f=!0);E=s?n-M:R+M-n,e=h?x-O:S+O-x;f&&(t.__layout({x:n,y:x,w:E,h:e},!0,!0),E=t.outerWidth),t.__layout({x:n,y:x,w:E,h:e,w2:o,h2:a},!1,!0),s&&t.__offsetX(-t.outerWidth,!0),h&&t.__offsetY(-t.outerHeight,!0)}else t.__layoutNone()}),n.forEach(function(t){if(T){var e=t;if(t instanceof Ms&&(e=t.shadowRoot),T!==e&&T!==t)return}t instanceof u?t.__layoutAbs($0(t)?t:r,i):t instanceof Ms&&((t=t.shadowRoot)instanceof u&&t.__layoutAbs(t,i))}),this.__execAr())}},{key:"__computeMeasure",value:function(e,r,i){P(N(u.prototype),"__computeMeasure",this).call(this,e,r,i),this.children.forEach(function(t){t.__computeMeasure(e,r,i)})}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(u.prototype),"render",this).call(this,t,e,r,i,n,o);return t===rt.SVG&&(this.virtualDom.type="dom"),o}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),P(N(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return P(N(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,i=this.computedStyle,e=this.isMask;if(!(r||"none"===i[Xf]||t.__stopPropagation||e)&&("hidden"!==i[M0]||this.willResponseEvent(t,!0))){var n,e=t.event.type,i=this.listener,o=this.zIndexChildren;i.hasOwnProperty(e)&&(n=i[e]);for(var a=o.length-1;0<=a;a--){var s=o[a];if((s instanceof bf||s instanceof Ms&&s.shadowRoot instanceof bf)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(ue.isFunction(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0)}return P(N(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){P(N(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(r,e){var i=this;if(!ue.isNil(r)&&!i.isDestroyed){var n,o=i.root,t=i.host;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(r.$$type)))throw new Error("Invalid parameter in appendChild.");r.vd&&(o.delRefreshTask(r.vd.__task),r.vd.remove()),n=Vt.TYPE_CP===r.$$type?vs.initCp2(r,o,t,i):vs.initDom(r,o,t,i),o.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.push(r);var t=i.children.length;t&&(((e=i.children[t-1]).__next=n).__prev=e),i.children.push(n),i.__zIndexChildren=null;var e={};e[w0]=n,e[L0]=ya.REFLOW,e[D0]=!0,e[P0]=!0,e[N0]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,e)},__after:function(t){ue.isFunction(e)&&e.call(n,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!ue.isNil(e)&&!i.isDestroyed){var n,o=i.root,t=i.host;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(o.delRefreshTask(e.vd.__task),e.vd.remove()),n=Vt.TYPE_CP===e.$$type?vs.initCp2(e,o,t,i):vs.initDom(e,o,t,i),o.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.unshift(e),i.children.length&&(((t=i.children[0]).__prev=n).__next=t),i.children.unshift(n),i.__zIndexChildren=null;var t={};t[w0]=n,t[L0]=ya.REFLOW,t[D0]=!0,t[P0]=!0,t[N0]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,t)},__after:function(t){ue.isFunction(r)&&r.call(n,t)}})}}},{key:"insertBefore",value:function(a,e){var s=this;if(!ue.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertBefore.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=Vt.TYPE_CP===a.$$type?vs.initCp2(a,l,t,c):vs.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,a),h.__next=s,h.__prev=s.__prev,s.__prev=h,c.children.splice(e,0,h)):(i&&(((o=c.children[0]).__prev=h).__next=o),r.unshift(a),c.children.unshift(h)),c.__zIndexChildren=null;var o={};o[w0]=h,o[L0]=ya.REFLOW,o[D0]=!0,o[P0]=!0,o[N0]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,o)},__after:function(t){ue.isFunction(e)&&e.call(h,t)}})}}},{key:"insertAfter",value:function(a,e){var s=this;if(!ue.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertAfter.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=Vt.TYPE_CP===a.$$type?vs.initCp2(a,l,t,c):vs.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,a),h.__prev=s,h.__next=s.__next,s.__next=h,c.children.splice(e+1,0,h)):(i&&(((o=c.children[i-1]).__next=h).__prev=o),r.push(a),c.children.push(h)),c.__zIndexChildren=null;var o={};o[w0]=h,o[L0]=ya.REFLOW,o[D0]=!0,o[P0]=!0,o[N0]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,o)},__after:function(t){ue.isFunction(e)&&e.call(h,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof bf||t instanceof Ms))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return Le.warn("Remove parent is destroyed."),void(ue.isFunction(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ms?t.shadowRoot:t)instanceof Za||"absolute"!==t.currentStyle[Uf]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ms?t.shadowRoot:t)instanceof bf&&"absolute"===t.currentStyle[Uf]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[zf]+t[t0]+t[Qf]+this.lineBoxManager.baseLine}},{key:"firstBaseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[zf]+t[t0]+t[Qf]+this.lineBoxManager.firstBaseLine}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),u}(),fr=m.STYLE_KEY,Q0=fr.WIDTH,td=fr.HEIGHT,ed=fr.DISPLAY,rd=fr.BORDER_TOP_WIDTH,id=fr.BORDER_RIGHT_WIDTH,nd=fr.BORDER_LEFT_WIDTH,od=fr.BORDER_BOTTOM_WIDTH,ad=fr.BORDER_TOP_LEFT_RADIUS,sd=fr.BORDER_TOP_RIGHT_RADIUS,hd=fr.BORDER_BOTTOM_RIGHT_RADIUS,ld=fr.BORDER_BOTTOM_LEFT_RADIUS,cd=fr.VISIBILITY,ud=fr.BACKGROUND_IMAGE,_d=fr.BACKGROUND_COLOR,fd=fr.BOX_SHADOW,dd=fr.MIX_BLEND_MODE,pd=fr.MARGIN_TOP,gd=fr.MARGIN_RIGHT,vd=fr.MARGIN_BOTTOM,md=fr.MARGIN_LEFT,yd=fr.PADDING_TOP,Ed=fr.PADDING_RIGHT,xd=fr.PADDING_BOTTOM,bd=fr.PADDING_LEFT,Td=fr.FONT_SIZE,Ad=fr.FLEX_BASIS,A=m.UPDATE_KEY,Md=A.UPDATE_NODE,Od=A.UPDATE_FOCUS,Rd=A.UPDATE_CONFIG,Jt=m.NODE_KEY,Sd=Jt.NODE_CACHE,Cd=Jt.NODE_DEFS_CACHE,Id=Jt.NODE_IS_MASK,kd=S.AUTO,wd=S.PX,Ld=S.PERCENT,Dd=S.REM,Nd=S.VW,Pd=S.VH,Fd=S.RGBA,Bd=Tt.canvasPolygon,Yd=Tt.svgPolygon,Hd=ue.isFunction,Gd=function(){t(D,J0);var i=e(D);function D(t,e){_(this,D);var r,t=(r=i.call(this,t,e)).props.src,e=r.__loadImg={src:t};return t||(e.error=!0),r.__config[Id]&&(e=(t=a(r)).style,t=t.currentStyle,e[ud]=t[ud]=[null],e[_d]=t[_d]=[[0,0,0,0],Fd],e[rd]=t[rd]=[0,wd],e[id]=t[id]=[0,wd],e[nd]=t[nd]=[0,wd],e[od]=t[od]=[0,wd],e[fd]=t[fd]=null,e[dd]=t[dd]="normal"),r}return f(D,[{key:"__preLayout",value:function(t){var e=P(N(D.prototype),"__preLayout",this).call(this,t),r=this.__loadImg;return r.error||(t=r.src,(t=Le.IMG[t])&&t.state===Le.LOADED&&(r.source=t.source,r.width=t.width,r.height=t.height),r.cache=!1),e.fixedWidth&&e.fixedHeight||(r.error&&!this.props.placeholder?e.fixedWidth?e.h=e.w:e.fixedHeight?e.w=e.h:e.w=e.h=32:r.source?e.fixedWidth?e.h=e.w*r.height/r.width:e.fixedHeight?e.w=e.h*r.width/r.height:(e.w=r.width,e.h=r.height):e.w=e.h=0,e.fixedWidth=!0,e.fixedHeight=!0),e}},{key:"__addGeom",value:function(t,e){e=ue.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),P(N(D.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){e=P(N(D.prototype),"__calContent",this).call(this,t,e,r,i);return e||(r=this.__loadImg,"hidden"!==i[cd]&&(i[Q0]||i[td])&&r.source&&(e=!0)),e}},{key:"render",value:function(t,e,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=P(N(D.prototype),"render",this).call(this,t,e,r,i,n,o);t===rt.WEBGL&&(n=a.dx,o=a.dy);var s=a.offscreenBlend,h=a.offscreenMask,l=a.offscreenFilter,c=a.offscreenOverflow,u=this.width,_=this.height,f=this.isDestroyed,d=this.props.placeholder,p=this.computedStyle,g=this.computedStyle,v=g[ed],m=g[ad],y=g[sd],E=g[hd],x=g[ld],b=g[cd],T=this.virtualDom,A=this.__config,e=this.__loadImg,g=this.root;if(s&&(r=s.target.ctx),h&&(r=h.target.ctx),l&&(r=l.target.ctx),c&&(r=c.target.ctx),e.source||e.error||e.loading||this.__loadAndRefresh(e,g,r,d,p,u,_),f||"none"===v||"hidden"===b)return a;c=A[Sd];i&&c&&c.enabled&&(r=c.ctx);g=a.x3+n,p=a.y3+o,f=e.source;if(e.error&&!d&&D.showError){var v=.02*Math.min(u,_),b=g+.7*u,i=p+.3*_,c=5*v,M=[[g+.15*u,p+.7*_],[g+.3*u,p+.4*_],[g+.5*u,p+.6*_],[g+.6*u,p+.5*_],[g+.9*u,p+.8*_],[g+.15*u,p+.8*_]];if(t===rt.CANVAS||t===rt.WEBGL){r.strokeStyle="#CCC",r.lineWidth=v,r.fillStyle="#DDD",r.beginPath(),r.moveTo(g,p),r.lineTo(g+u,p),r.lineTo(g+u,p+_),r.lineTo(g,p+_),r.lineTo(g,p),r.stroke(),r.closePath(),r.beginPath(),r.arc(b,i,c,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(M[0][0],M[0][1]);for(var O=1,R=M.length;O<R;O++){var S=M[O];r.lineTo(S[0],S[1])}r.lineTo(M[0][0],M[0][1]),r.fill(),r.closePath()}else if(t===rt.SVG){this.__addGeom("rect",[["x",g],["y",p],["width",u],["height",_],["stroke","#CCC"],["stroke-width",v],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",b],["cy",i],["r",c],["fill","#DDD"]]);for(var C="",I=0,k=M.length;I<k;I++){var w=M[I];I&&(C+=" "),C+=w[0]+","+w[1]}this.__addGeom("polygon",[["points",C],["fill","#DDD"]])}}else if(f){var L,x=Xt.calRadius(g,p,u,_,m,y,E,x);if(t===rt.CANVAS||t===rt.WEBGL)x?(r.save(),r.beginPath(),Bd(r,x,n,o),r.clip(),r.closePath(),r.drawImage(f,g,p,u,_),r.restore()):r.drawImage(f,g,p,u,_);else if(t===rt.SVG){if(e.cache)return e.cache.cache=!0,T.children=[e.cache],void(!T.cache&&x&&(f={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Yd(x)],["fill","#FFF"]]}]},t=r.add(f),A[Cd].push(f),T.conClip="url(#"+t+")"));u===e.width&&_===e.height||(L=Is.matrixResize(e.width,e.height,u,_,g,p,u,_));g=[["xlink:href",e.error?d:e.src],["x",g],["y",p],["width",e.width],["height",e.height]];x&&(p={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Yd(x)],["fill","#FFF"]]}]},x=r.add(p),A[Cd].push(p),T.conClip="url(#"+x+")",delete T.cache),L&&!te.isE(L)&&g.push(["transform","matrix("+ue.joinArr(te.m2m6(L),",")+")"]);g={type:"img",tagName:"image",props:g};T.children=[g],e.cache=g}}return a}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return P(N(D.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[Q0],n=r[td],o=r[md],a=r[gd],s=r[bd],h=r[Ed],l=r[nd],r=r[id];return i[1]===wd?t-=i[0]:i[1]===Ld?t-=e*i[0]*.01:i[1]===Dd?t-=i[0]*this.root.computedStyle[Td]:i[1]===Nd?t-=i[0]*this.root.width*.01:i[1]===Pd?t-=i[0]*this.root.height*.01:(i=this.__loadImg).source&&(n[1]===wd?t-=i.width*n[0]/i.height:n[1]===Ld?t-=i.width*n[0]*e*.01/i.height:n[1]===Dd?t-=i.width*n[0]*this.root.computedStyle[Td]/i.height:n[1]===Nd?t-=i.width*n[0]*this.root.width*.01/i.height:n[1]===Pd?t-=i.width*n[0]*this.root.height*.01/i.height:t-=i.width),o[1]===wd?t-=o[0]:o[1]===Ld?t-=o[0]*e*.01:o[1]===Dd?t-=o[0]*this.root.computedStyle[Td]:o[1]===Nd?t-=o[0]*this.root.width*.01:o[1]===Pd&&(t-=o[0]*this.root.height*.01),s[1]===wd?t-=s[0]:s[1]===Ld?t-=s[0]*e*.01:s[1]===Dd?t-=s[0]*this.root.computedStyle[Td]:s[1]===Nd?t-=s[0]*this.root.width*.01:s[1]===Pd&&(t-=s[0]*this.root.height*.01),l[1]===wd?t-=l[0]:l[1]===Dd?t-=l[0]*this.root.computedStyle[Td]:l[1]===Nd?t-=l[0]*this.root.width*.01:l[1]===Pd&&(t-=l[0]*this.root.height*.01),a[1]===wd?t-=a[0]:a[1]===Ld?t-=a[0]*e*.01:a[1]===Dd?t-=a[0]*this.root.computedStyle[Td]:a[1]===Nd?t-=a[0]*this.root.width*.01:a[1]===Pd&&(t-=a[0]*this.root.height*.01),h[1]===wd?t-=h[0]:h[1]===Ld?t-=h[0]*e*.01:h[1]===Dd?t-=h[0]*this.root.computedStyle[Td]:h[1]===Nd?t-=h[0]*this.root.width*.01:h[1]===Pd&&(t-=h[0]*this.root.height*.01),r[1]===wd?t-=r[0]:r[1]===Dd?t-=r[0]*this.root.computedStyle[Td]:r[1]===Nd?t-=r[0]*this.root.width*.01:r[1]===Pd&&(t-=r[0]*this.root.height*.01),t}},{key:"__calBasis",value:function(t,e){var r=0,i=0,n=0,o=this.currentStyle,a=this.__loadImg,s=e.w,h=e.h,l=o[Ad],c=o[Q0],u=o[td],_=o[md],f=o[pd],d=o[gd],p=o[vd],g=o[bd],v=o[yd],m=o[Ed],y=o[xd],E=o[rd],x=o[id],b=o[od],e=o[nd],o=t?c:u,c=t?u:c;return-1<[wd,Ld,Dd,Nd,Pd].indexOf(l[1])?l[1]===wd?r=n=i=l[0]:l[1]===Ld?r=n=i=.01*l[0]*(t?s:h):l[1]===Dd?r=n=i=l[0]*this.root.computedStyle[Td]:l[1]===Nd?r=n=i=l[0]*this.root.width*.01:l[1]===Pd&&(r=n=i=l[0]*this.root.height*.01):-1<[wd,Ld,Dd,Nd,Pd].indexOf(o[1])?o[1]===wd?r=n=i=o[0]:o[1]===Ld?r=n=i=.01*o[0]*(t?s:h):o[1]===Dd?r=n=i=o[0]*this.root.computedStyle[Td]:o[1]===Nd?r=n=i=o[0]*this.root.width*.01:o[1]===Pd&&(r=n=i=o[0]*this.root.height*.01):(a.source||a.error)&&(r=n=i=c[1]!==kd?(c[1]===wd?c=c[0]:c[1]===Ld?c=.01*c[0]*(t?h:s):c[1]===Dd?c=c[0]*this.root.computedStyle[Td]:c[1]===Nd?c=c[0]*this.root.width*.01:c[1]===Pd&&(c=c[0]*this.root.height*.01),h=a.width/a.height,t?c*h:c/h):t?a.width:a.height),t?(m=this.__calMp(_,s)+this.__calMp(d,s)+this.__calMp(g,s)+this.__calMp(m,s),r+=m=e[0]+x[0]+m,n+=m,i+=m):(s=this.__calMp(f,s)+this.__calMp(p,s)+this.__calMp(v,s)+this.__calMp(y,s),r+=s=E[0]+b[0]+s,n+=s,i+=s),[r,i,n]}},{key:"__loadAndRefresh",value:function(r,i,n,o,a,s,h,l){var c=this;(r.source||r.error)&&(i.delRefreshTask(c.__task),i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Md]=c,t[Od]=ya.REFLOW,t[Rd]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,Le.measureImg(r.src,function(t){if(t.url===r.src&&!c.isDestroyed){var e=function(){var t=c.currentStyle,e=t[Q0],t=t[td];i.delRefreshTask(c.__task),e[1]!==kd&&t[1]!==kd?i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Md]=c,t[Od]=ya.REPAINT,t[Rd]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){Hd(l)&&l.call(c)}}):i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Md]=c,t[Od]=ya.REFLOW,t[Rd]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){Hd(l)&&l.call(c)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(o)return void Le.measureImg(o,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:n,root:i,width:s,height:h});r.error=!0}"none"!==a[ed]&&e()}},{ctx:n,root:i,width:s,height:h})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,n=this.root;t===i.src||!t&&i.error?Hd(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,n,n.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,n.delRefreshTask(r.__task),n.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[Md]=r,t[Od]=ya.REFLOW,t[Rd]=r.__config,n.__addUpdate(r,r.__config,n,r.__config,t))},__after:function(t){Hd(e)&&e(t)}}))}},{key:"appendChild",value:function(){Le.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}}]),D}();o(Gd,"showError",!0);var Wd=function(){function e(t){_(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return f(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),Zt=m.STYLE_KEY,Ud=Zt.DISPLAY,Xd=Zt.MARGIN_TOP,Vd=Zt.MARGIN_RIGHT,Kd=Zt.MARGIN_BOTTOM,zd=Zt.MARGIN_LEFT,jd=Zt.PADDING_TOP,$d=Zt.PADDING_RIGHT,Zd=Zt.PADDING_BOTTOM,qd=Zt.PADDING_LEFT,Jd=Zt.WIDTH,Qd=Zt.HEIGHT,t1=Zt.BORDER_TOP_WIDTH,e1=Zt.BORDER_RIGHT_WIDTH,r1=Zt.BORDER_BOTTOM_WIDTH,i1=Zt.BORDER_LEFT_WIDTH,n1=Zt.FILL,o1=Zt.STROKE,a1=Zt.STROKE_MITERLIMIT,s1=Zt.STROKE_WIDTH,h1=Zt.STROKE_LINECAP,l1=Zt.STROKE_LINEJOIN,c1=Zt.STROKE_DASHARRAY,u1=Zt.STROKE_DASHARRAY_STR,_1=Zt.FILL_RULE,f1=Zt.VISIBILITY,d1=Zt.FONT_SIZE,p1=Zt.FLEX_BASIS,ft=m.NODE_KEY,g1=ft.NODE_CACHE_PROPS,v1=ft.NODE_CURRENT_PROPS,m1=ft.NODE_CURRENT_STYLE,y1=ft.NODE_STYLE,E1=ft.NODE_DEFS_CACHE,x1=S.PX,b1=S.PERCENT,T1=S.REM,A1=S.VW,M1=S.VH,O1=ue.int2rgba,R1=ue.isNil,S1=ue.joinArr,C1=Tt.canvasPolygon,I1=Tt.svgPolygon,k1={},w1=function(){t(w,bf);var r=e(w);function w(t,e){_(this,w),(t=r.call(this,t,e)).__isMulti=!!t.props.multi,t.__style=mn.normalize(t.style,lr.DOM_ENTRY_SET.concat(lr.GEOM_ENTRY_SET)),t.__currentStyle=ue.extend({},t.__style),t.__currentProps=ue.clone(t.props);e=t.__config;return e[g1]=t.__cacheProps={},e[v1]=t.__currentProps,e[m1]=t.__currentStyle,e[y1]=t.__style,t}return f(w,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[Jd],n=r[zd],o=r[Vd],a=r[qd],s=r[$d],h=r[i1],r=r[e1];return i[1]===x1?t-=i[0]:i[1]===b1?t-=e*i[0]*.01:i[1]===T1?t-=i[0]*this.root.computedStyle[d1]:i[1]===A1?t-=i[0]*this.root.width*.01:i[1]===M1&&(t-=i[0]*this.root.height*.01),n[1]===x1?t-=n[0]:n[1]===b1?t-=n[0]*e*.01:n[1]===T1?t-=n[0]*this.root.computedStyle[d1]:n[1]===A1?t-=n[0]*this.root.width*.01:n[1]===M1&&(t-=n[0]*this.root.height*.01),a[1]===x1?t-=a[0]:a[1]===b1?t-=a[0]*e*.01:a[1]===T1?t-=a[0]*this.root.computedStyle[d1]:a[1]===A1?t-=a[0]*this.root.width*.01:a[1]===M1&&(t-=a[0]*this.root.height*.01),h[1]===x1?t-=h[0]:h[1]===T1?t-=h[0]*this.root.computedStyle[d1]:h[1]===A1?t-=h[0]*this.root.width*.01:h[1]===M1&&(t-=h[0]*this.root.height*.01),o[1]===x1?t-=o[0]:o[1]===b1?t-=o[0]*e*.01:o[1]===T1?t-=o[0]*this.root.computedStyle[d1]:o[1]===A1?t-=o[0]*this.root.width*.01:o[1]===M1&&(t-=o[0]*this.root.height*.01),s[1]===x1?t-=s[0]:s[1]===b1?t-=s[0]*e*.01:s[1]===T1?t-=s[0]*this.root.computedStyle[d1]:s[1]===A1?t-=s[0]*this.root.width*.01:s[1]===M1&&(t-=s[0]*this.root.height*.01),r[1]===x1?t-=r[0]:r[1]===T1?t-=r[0]*this.root.computedStyle[d1]:r[1]===A1?t-=r[0]*this.root.width*.01:r[1]===M1&&(t-=r[0]*this.root.height*.01),t}},{key:"__calMinMax",value:function(t,e){mn.computeReflow(this,this.isShadowRoot);var r=0,i=0,n=this.currentStyle,o=n[Jd],a=n[Qd],s=n[Ud],a=t?o:a;return a[1]===x1?r=i=a[0]:a[1]===T1?r=i=a[0]*this.root.computedStyle[d1]:a[1]===A1?r=i=a[0]*this.root.width*.01:a[1]===M1&&(r=i=a[0]*this.root.height*.01),[s,this.__addMp(t,e.w,n,[r,i])]}},{key:"__calBasis",value:function(t,e){var r=0,i=0,n=0,o=this.currentStyle,a=e.w,s=e.h,h=o[p1],l=o[Jd],c=o[Qd],u=o[zd],_=o[Xd],f=o[Vd],d=o[Kd],p=o[qd],g=o[jd],v=o[$d],m=o[Zd],y=o[t1],E=o[e1],e=o[r1],o=o[i1],c=t?l:c;return-1<[x1,b1,T1,A1,M1].indexOf(h[1])?h[1]===x1?r=n=i=h[0]:h[1]===b1?r=n=i=.01*h[0]*(t?a:s):h[1]===T1?r=n=i=h[0]*this.root.computedStyle[d1]:h[1]===A1?r=n=i=h[0]*this.root.width*.01:h[1]===M1&&(r=n=i=h[0]*this.root.height*.01):-1<[x1,b1,T1,A1,M1].indexOf(c[1])&&(c[1]===x1?r=n=i=c[0]:c[1]===b1?r=n=i=.01*c[0]*(t?a:s):c[1]===T1?r=n=i=c[0]*this.root.computedStyle[d1]:c[1]===A1?r=n=i=c[0]*this.root.width*.01:c[1]===M1&&(r=n=i=c[0]*this.root.height*.01)),t?(v=this.__calMp(u,a)+this.__calMp(f,a)+this.__calMp(p,a)+this.__calMp(v,a),r+=v=o[0]+E[0]+v,n+=v,i+=v):(a=this.__calMp(_,a)+this.__calMp(d,a)+this.__calMp(g,a)+this.__calMp(m,a),r+=a=y[0]+e[0]+a,n+=a,i+=a),[r,i,n]}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),i=r.fixedWidth,n=r.fixedHeight,o=r.w,r=r.h;this.__height=n?r:0,e?this.__width=i?o:0:(this.__width=o,this.__ioSize(o,this.height),this.__marginAuto(this.currentStyle,t),this.__config[g1]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,i=e.fixedHeight,n=e.x,o=e.y,a=e.w,e=e.h,n=this.__width=r?a:n-t.x,t=this.__height=i?e:o-t.y;this.__ioSize(n,t),this.__config[g1]=this.__cacheProps={}}},{key:"__calCache",value:function(i,n,t,o,a,s,e,r,h,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R,S,C){var I,k=this,S=P(N(w.prototype),"__calCache",this).call(this,i,n,t,o,a,s,e,r,h,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R,S,C);return R1(o[s1])&&(o[s1]=!0,C=a[s1]||[],I=this.width,s[s1]=C.map(function(t){return t[1]===x1?t[0]:t[1]===b1?t[0]*I*.01:t[1]===T1?t[0]*k.root.computedStyle[d1]:t[1]===A1?t[0]*k.root.width*.01:t[1]===M1?t[0]*k.root.height*.01:0})),R1(o[c1])&&(o[c1]=!0,s[c1]=a[c1]||[],o[u1]=s[c1].map(function(t){return S1(t,",")})),[h1,l1,a1,_1].forEach(function(t){s[t]=a[t]}),[o1,n1].forEach(function(t){var e,r;R1(o[t])&&(e=a[t],s[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(O1(t)):r.push("none"):r.push(k.__gradient(i,n,E,O,x,R,t))}),o[t]=r)}),S}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[f1]}},{key:"__preSet",value:function(t){var e=this.width,r=this.height,i=this.__cacheStyle,n=this.computedStyle,o=t.sx3+.5*e,a=t.sy3+.5*r,s=i[n1],h=i[o1],l=i[u1],e=n[s1],t=n[h1],r=n[l1],i=n[a1];return{cx:o,cy:a,stroke:h,strokeWidth:e,strokeDasharray:n[c1],strokeDasharrayStr:l,strokeLinecap:t,strokeLinejoin:r,strokeMiterlimit:i,fill:s,fillRule:n[_1]}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,n=r.strokeWidth,o=r.strokeDasharray,a=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,r=r.fill;t!==rt.CANVAS&&t!==rt.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==n&&e.lineWidth!==n&&(e.lineWidth=n),void 0!==a&&e.lineCap!==a&&(e.lineCap=a),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==h&&e.miterLimit!==h&&(e.miterLimit=h),ue.isFunction(e.getLineDash)?o&&!ue.equalArr(e.getLineDash(),o)&&e.setLineDash(o):o&&e.setLineDash(o))}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(w.prototype),"render",this).call(this,t,e,r,i,n,o);if(t===rt.SVG&&(this.virtualDom.type="geom"),o.break)return o;t=this.__preSet(o);return Object.assign(o,t)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,n=r.fillRule,o=r.stroke,a=r.strokeWidth,s=r.strokeDasharray,h=r.strokeDasharrayStr,l=r.strokeLinecap,c=r.strokeLinejoin,u=r.strokeMiterlimit,_=r.dx,f=r.dy,d=this.__cacheProps.list,p=this.isMulti,g=this.bbox;if(i.length<=1&&o.length<=1){r={fill:i[0],fillRule:n[0],stroke:o[0],strokeWidth:a[0],strokeDasharray:s[0],strokeDasharrayStr:h[0],strokeLinecap:l[0],strokeLinejoin:c[0],strokeMiterlimit:u[0],dx:_,dy:f,bbox:g};this.__renderOnePolygon(t,e,p,d,r)}else{for(var v=0,m=i.length;v<m;v++){var y=i[v];y&&(y={fill:y,fillRule:n[v],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,y))}for(var E=0,x=o.length;E<x;E++){var b=o[E];b&&(b={stroke:b,strokeWidth:a[E],strokeDasharray:s[E],strokeDasharrayStr:h[E],strokeLinecap:l[E],strokeLinejoin:c[E],strokeMiterlimit:u[E],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,b))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,n){var o=n.fill,a=n.stroke,s=n.strokeWidth,h=o&&"conic"===o.k,l=a&&"conic"===a.k,c=o&&"radial"===o.k&&Array.isArray(o.v),u=s&&0<s&&a&&"radial"===a.k&&Array.isArray(a.v);h||l?(h?this.__conicGradient(t,e,i,r,n):"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&l?Le.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,n,"fill"):"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&u?(Le.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke.v=n.stroke.v[0],this.__drawPolygon(t,e,r,i,n,!1,!0)):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!1,!0)):this.__drawPolygon(t,e,r,i,n,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,n,o,a){var s,h=n.fill,l=n.stroke,c=n.strokeWidth,u=n.fillRule,_=n.strokeDasharrayStr,f=n.strokeLinecap,d=n.strokeLinejoin,p=n.strokeMiterlimit,g=n.dx,v=n.dy;t===rt.CANVAS||t===rt.WEBGL?(this.__preSetCanvas(t,e,n),e.beginPath(),r?i.forEach(function(t){return C1(e,t,g,v)}):C1(e,i,g,v),o&&h&&"none"!==h&&e.fill(u),a&&l&&"none"!==l&&c&&0<c&&e.stroke(),e.closePath()):t===rt.SVG&&(s="",r?i.forEach(function(t){return s+=I1(t)}):s=I1(i),i=[["d",s]],(h&&"none"!==h||l&&"none"!==l)&&(o&&h&&"none"!==h?(i.push(["fill",h.v||h]),u&&"nonzero"!==u&&i.push(["fill-rule",u])):i.push(["fill","none"]),a&&l&&"none"!==l&&c&&0<c?(i.push(["stroke",l.v||l]),i.push(["stroke-width",c]),this.__propsStrokeStyle(i,_,f,d,p)):i.push(["stroke-width",0]),this.addGeom("path",i)))}},{key:"__inversePtList",value:function(t,e,o){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=te.calPoint([t[r],t[r+1]],o);e.push(n[0]),e.push(n[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=te.calPoint([t[r],t[r+1]],o);e.push(n[0]),e.push(n[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,n,o){var a=n.strokeWidth,s=n.strokeDasharrayStr,h=n.strokeLinecap,l=n.strokeLinejoin,c=n.strokeMiterlimit,u=n.dx,_=n.dy,f=Qt(n[o].v,4),d=f[0],p=f[1],n=f[2],f=f[3];p=ra.calMatrixByOrigin(p,[n,f]);var g,f=te.inverse(p);r=this.__inversePtList(r,i,f),t===rt.CANVAS||t===rt.WEBGL?(p&&(e.save(),f=this.matrixEvent,p=te.multiply(f,p),e.setTransform(p[0],p[1],p[4],p[5],p[12],p[13])),e.beginPath(),e[o+"Style"]!==d&&(e[o+"Style"]=d),i?r.forEach(function(t){return Tt.canvasPolygon(e,t,u,_)}):C1(e,r,u,_),e[o](),e.closePath(),p&&e.restore()):t===rt.SVG&&(g="",i?r.forEach(function(t){return g+=I1(t)}):g=I1(r),r=[["d",g]],"fill"===o?(r.push(["fill",d]),r.push(["strokeWidth",0])):"stroke"===o&&(r.push(["fill","none"]),r.push(["stroke",d]),r.push(["stroke-width",a]),this.__propsStrokeStyle(r,s,h,l,c)),r.push(["transform","matrix(".concat(S1(te.m2m6(p),","),")")]),this.addGeom("path",r))}},{key:"__conicGradient",value:function(t,r,e,i,n){var o,a,s,h,l=this,c=n.fill,u=n.bbox,_=n.dx,f=void 0===_?0:_,_=n.dy,d=void 0===_?0:_,p=c.v;t===rt.CANVAS||t===rt.WEBGL?(n=Qt(u,4),o=n[0],a=n[1],_=n[2],u=n[3],u=(s=Le.getCacheCanvas(n=_-o,_=u-a,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,n,_),it.getConicGradientImage(.5*n,.5*_,n,_,c.v.stop,u.data),s.ctx.putImageData(u,0,0),i?e.forEach(function(t){r.save(),r.beginPath(),C1(r,t,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,o+f,a+d),r.restore()}):(r.save(),r.beginPath(),C1(r,e,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,o+f,a+d),r.restore()),s.ctx.clearRect(0,0,n,_)):t===rt.SVG&&(i?e.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",I1(t)]]}]},e=r.add(t);l.__config[E1].push(t),p.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",I1(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(e={tagName:"clipPath",children:[{tagName:"path",props:[["d",I1(e)]]}]},h=r.add(e),this.__config[E1].push(e),p.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",I1(t[0])],["fill",t[1]],["clip-path","url(#"+h+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,n){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),n&&4!==n&&t.push(["stroke-miterlimit",n])}},{key:"__releaseWhenEmpty",value:function(){}},{key:"__offsetX",value:function(t,e,r){P(N(w.prototype),"__offsetX",this).call(this,t,e,r),this.__config[g1]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){P(N(w.prototype),"__offsetY",this).call(this,t,e,r),this.__config[g1]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){P(N(w.prototype),"__resizeX",this).call(this,t,e),this.__config[g1]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){P(N(w.prototype),"__resizeY",this).call(this,t,e),this.__config[g1]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=ue.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return R1(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return k1}},{key:"getRegister",value:function(t){if(!t||!ue.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!k1.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return k1[t]}},{key:"register",value:function(t,e){if(!(t&&ue.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof w))throw new Error("Invalid param");if(w.hasRegister(t))throw new Error("Geom has already register: ".concat(t));k1[t]=e}},{key:"hasRegister",value:function(t){return t&&k1.hasOwnProperty(t)}},{key:"delRegister",value:function(t){w.hasRegister(t)&&delete k1[t]}}]),w}(),sr=m.NODE_KEY,L1=sr.NODE_STYLE,D1=sr.NODE_CURRENT_STYLE,N1=sr.NODE_COMPUTED_STYLE,P1=sr.NODE_DOM_PARENT,F1=sr.NODE_MATRIX,B1=sr.NODE_MATRIX_EVENT,Y1=sr.NODE_STRUCT,H1=Vt.TYPE_VD,G1=Vt.TYPE_GM,W1=Vt.TYPE_CP,U1=[],X1=[],V1={};function K1(t){t instanceof J0?t.children.forEach(function(t){t instanceof J0?K1(t):t instanceof Ms&&t.__hasUpdate&&(t.__hasUpdate=!1,z1(t,t.props))}):t instanceof Ms&&t.__hasUpdate&&(t.__hasUpdate=!1,z1(t,t.props))}function z1(t,e,r){t.__nextState||r?!ue.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.state=r,t.__nextState=null;var i=t.shadow,n=t.shadowRoot,e=t.__cd,r=ts(t.render());(function(t,e,r){var n=q1(e,{},t),o=q1(r,{}),a=[],s=[];Object.keys(n).forEach(function(t){var e=n[t];o[t]||(e.json.key=V1)}),Object.keys(o).forEach(function(t){var e,r=n[t],i=o[t];r?(e=r.json,t=i.json,r=r.vd,e.$$type===W1&&t.$$type===W1?e.klass===t.klass&&(Z1(e,t,r),e.key=t.key=V1,s.push(r)):e.$$type===t.$$type&&e.tagName===t.tagName&&(t.$$type===G1&&e.props.multi!==t.props.multi||(t.__inheritAnimate=r),e.key=t.key=V1,t.$$type===H1&&a.push({vd:r,oj:e,nj:t}))):i.json.key=V1}),a.forEach(function(t){$1(t.vd,t.oj,t.nj)}),j1(t,e,r),s.forEach(function(t){J1(t)})})(i,e,r),t.__init(r);var o=t.shadowRoot;{var a;o instanceof bf?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){o[t]=n[t]}),o.__computedStyle=o.__config[N1]=n.computedStyle):(a=t.domParent,[L1,D1,N1,F1,B1].forEach(function(t){o.__config[t]=a.__config[t]}))}["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){o[t]=n[t]}),o.__config[P1]=n.domParent,o.__config[Y1]=n.__config[Y1],U1.push(t),ue.isObject(r)&&r.__placeholder||X1.push(i);r&&r.__placeholder&&delete r.__placeholder;r&&r.__inheritAnimate&&delete r.__inheritAnimate;r&&r.__animateRecords&&delete r.__animateRecords;var s=t.host;for(;s&&s.shadow===t;)(s.__shadowRoot=o).__hostRoot=s,s=(t=s).host}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,K1(t.shadow)):K1(t.shadow)}function j1(t,e,r){ue.isObject(r)&&(r.$$type===W1?r.key!==V1&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(Z1(e,r,t),J1(t)):r.$$type===G1&&e&&e.$$type===G1?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===H1&&e&&e.$$type===H1&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),$1(t,e,r)))}function $1(t,e,r){for(var i=e.children,n=r.children,o=i.length,a=n.length,s=t.children,h=0,l=0,c=0,u=Math.min(o,a);h<u;h++){var _=i[h+l],f=n[h+c];_.key===V1&&f.key===V1||(_.key===V1?(l++,h--,o--,u=Math.min(o,a)):f.key===V1?(c++,h--,a--,u=Math.min(o,a)):j1(s[h+l],_,f))}}function Z1(i,n,o){var a=(n.__placeholder=o).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(n.props).forEach(function(t){var e,r=n.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.listener[t]=r)):(t=t.slice(2).toLowerCase(),a.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),o.off(t,s[t]),o.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),o.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(n.props[t]=e,t=t.slice(2).toLowerCase(),delete a.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(n.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),z1(o,n.props,!ue.equal(i.props,n.props))}function q1(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return q1(t,r,i&&i[e])}):ue.isObject(t)&&(t.$$type!==H1&&t.$$type!==G1&&t.$$type!==W1||(t.$$type===H1&&q1(t.children,r,i&&i.children),e=t.props.key,ue.isNil(e)||""===e||(r.hasOwnProperty(e)&&Le.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function J1(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var Q1,tp={updateList:U1,check:K1,did:function(){U1.forEach(function(t){ue.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),U1.splice(0),X1.forEach(function(t){t.__destroy()}),X1=[]}},ep=ue.joinVd,rp=ue.joinDef,ip=ya.contain,np=ya.NONE,op=ya.TRANSFORM_ALL,ap=ya.OPACITY,sp=ya.FILTER,hp=ya.MIX_BLEND_MODE;function lp(t,e,r){var i=t.childNodes;!function(t,e,r){for(var i=e.length,n=r.length,o=0,a=t.childNodes;o<Math.min(i,n);o++)!function(e,t,r){if(t.tagName!==r.tagName)xp(e,"beforebegin",rp(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},n=0,o=(t.props||[]).length;n<o;n++){var a=Qt(t.props[n],2),s=a[0],a=a[1];i[s]=a}for(var h=0,l=(r.props||[]).length;h<l;h++){var c=Qt(r.props[h],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var _=e.childNodes,f=t.children.length,d=r.children.length,p=0;p<Math.min(f,d);p++)gp(e,p,t.children[p],r.children[p]);if(p<f)for(var g=f-1;p<=g;g--)Ep(e,_,g);else if(p<d)for(;p<d;p++)yp(e,_,p,ep(r.children[p]))}}(a[o],e[o],r[o]);if(o<i)for(var s=i-1;o<=s;s--)Ep(t,a,s);else if(o<n)for(;o<n;o++)yp(t,a,o,rp(r[o]))}(i[0],e.defs,r.defs),r.hasOwnProperty("lv")||pp(i[1],e.bb,r.bb),fp(t,e,r,!0)}function cp(t,e,r){"dom"===e.type?"dom"===r.type?fp(t,e,r):"geom"===r.type?dp(t,e,r):mp(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(!r.cache){for(var i=e.children.length,n=r.children.length,o=0;o<Math.min(i,n);o++)gp(t,o,e.children[o],r.children[o],!0);var a=t.childNodes;if(o<i)for(var s=i-1;o<=s;s--)Ep(t,a,s);else if(o<n)for(;o<n;o++)yp(t,a,o,ep(r.children[o]))}}(t,e,r):mp(t,r):"geom"===e.type?"dom"===r.type?dp(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)_p(t,0,r,r.lv);else if(r.hasOwnProperty("lv"))_p(t,0,r,r.lv);else{up(t,e,r),pp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,o=0,a=t.lastChild,s=a.childNodes;o<Math.min(i,n);o++)gp(a,o,e.children[o],r.children[o]);if(o<i)for(var h=i-1;o<=h;h--)Ep(a,s,h);else if(o<n)for(;o<n;o++)yp(a,s,o,ep(r.children[o]))}}(t,e,r):mp(t,r):"img"===e.type&&("img"===r.type?vp(t,e,r):mp(t,r))}function up(t,e,r){var i=r.transform,n=r.opacity,o=r.visibility,a=r.mask,s=r.overflow,h=r.filter,l=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==n&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.visibility!==o&&t.setAttribute("visibility",o),e.mask!==a&&(a?t.setAttribute("mask",a):t.removeAttribute("mask")),e.filter===h&&e.mixBlendMode===l||((l=(h?"filter:".concat(h,";"):"")+(l?"mix-blend-mode:".concat(l,";"):""))?t.setAttribute("style",l):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function _p(t,e,r,i){var n=r.transform,o=r.opacity,a=r.mask,s=r.filter,r=r.mixBlendMode;a?t.setAttribute("mask",a):t.removeAttribute("mask"),i!==np&&(ip(i,op)&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),ip(i,ap)&&(1!==o&&void 0!==o?t.setAttribute("opacity",o):t.removeAttribute("opacity")),(ip(i,sp)||ip(i,hp))&&((r=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",r):t.removeAttribute("style")))}function fp(t,e,r,i){if(r.cache)_p(t,0,r,r.lv);else{r.hasOwnProperty("lv")?_p(t,0,r,r.lv):(up(t,e,r),i||pp(t.firstChild,e.bb,r.bb));for(var n=e.children.length,o=r.children.length,a=0,s=t.lastChild,h=s.childNodes;a<Math.min(n,o);a++)cp(h[a],e.children[a],r.children[a]);if(a<n)for(var l=n-1;a<=l;l--)Ep(s,h,l);else if(a<o)for(;a<o;a++)yp(s,h,a,ep(r.children[a]))}}function dp(t,e,r){up(t,e,r),pp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,o=0,a=t.lastChild,s=a.childNodes;o<Math.min(i,n);o++)mp(s[o],r.children[o]);if(o<i)for(var h=i-1;o<=h;h--)Ep(a,s,h);else if(o<n)for(;o<n;o++)yp(a,s,o,ep(r.children[o]))}function pp(t,e,r){for(var i=e.length,n=r.length,o=0;o<Math.min(i,n);o++)gp(t,o,e[o],r[o]);var a=t.childNodes;if(o<i)for(var s=i-1;o<=s;s--)Ep(t,a,s);else if(o<n)for(;o<n;o++)yp(t,a,o,ep(r[o]))}function gp(t,e,r,i,n){t=t.childNodes;r.tagName!==i.tagName?mp(t[e],i):(vp(t[e],r,i),n&&r.content!==i.content&&(t[e].innerHTML=i.content))}function vp(e,t,r){if(!r.cache){for(var i={},n=0,o=(t.props||[]).length;n<o;n++){var a=Qt(t.props[n],2),s=a[0],a=a[1];i[s]=a}for(var h=0,l=(r.props||[]).length;h<l;h++){var c=Qt(r.props[h],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function mp(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=ep(t)})):r=ep(e),xp(t,"beforebegin",r),t.parentNode.removeChild(t)}function yp(t,e,r,i){r>=e.length?xp(t,"beforeend",i):xp(e[r],"beforebegin",i)}function Ep(t,e,r){e[r]&&t.removeChild(e[r])}function xp(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(Q1=Q1||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(Q1.childNodes[0],t)}}var bp=ue.isFunction,Tp=function(){function t(){_(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return f(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var t,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;e.length&&e.splice(0).forEach(function(t){var r=t.target,e=t.animate;r.isDestroyed||(Array.isArray(e)?e.forEach(function(t){var e=t.value,t=t.options;t.autoPlay=!1;t=r.animate(e,t);i.add(t,n)}):(t=e.value,(e=e.options).autoPlay=!1,e=r.animate(t,e),i.add(e,n)))}),e===this.__records2&&(t=this.__onList,(e=this.list2).length&&t.length&&e.forEach(function(e){t.forEach(function(t){e.off(t[0],t[1]),e.on(t[0],t[1])})}))}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,bp(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,bp(e)&&e(t))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,bp(e)&&e(t))}])}},{key:"finish",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,bp(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[];var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,bp(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[];var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,bp(r)&&r(t))}])}},{key:"on",value:function(t,e){if(bp(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(r,i){var n=this;this.list.forEach(function(e){function t(){var t=e.timestamp;t!==n.__lastTime[r]&&(n.__lastTime[r]=t,i())}t.__karasEventCb=i,e.on(r,t)})}},{key:"off",value:function(e,r){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.off(e[t],r);else this.list.forEach(function(t){t.off(e,r)})}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),Ap=Tt.canvasPolygon;var qt=0,fr=1,A=2,Jt=3,Zt=4,ft=function(_,t,f,d){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,n,o,a,s,h,l=Qt(t,4),c=l[2],u=l[3];0===c?(e=u.matrix,a=u.target,o=u.ctx,r=u.x,i=u.y,t=u.offsetWidth,n=u.offsetHeight,l=u.list,_.globalCompositeOperation="destination-in",_.globalAlpha=1,_.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]),_.fillStyle="#FFF",_.beginPath(),l?Ap(_,l):_.rect(r,i,t,n),_.fill(),_.closePath(),_.globalCompositeOperation="source-over",a.draw(),(_=o).setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(a.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,f,d),a.draw(),Le.releaseCacheCanvas(a.canvas)):1===c?(s=u.target,n=u.ctx,o=u.filter,_.filter&&((a=Le.getCacheCanvas(f,d,null,"filter")).ctx.filter=Tt.canvasFilter(o),a.ctx.drawImage(s.canvas,0,0,f,d,0,0,f,d),a.ctx.filter="none",a.draw(),s.ctx.globalAlpha=1,s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.ctx.drawImage(a.canvas,0,0,f,d,0,0,f,d),s.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,f,d),a.draw(),Le.releaseCacheCanvas(a.canvas)),(_=n).setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.globalAlpha=1,s.ctx.clearRect(0,0,f,d),s.draw(),Le.releaseCacheCanvas(s.canvas)):2===c?(s=u.mask,u.isClip?(u.target.draw(),(_=s.ctx).globalCompositeOperation="source-out",_.globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(u.target.canvas,0,0,f,d,0,0,f,d),s.draw(),_.globalCompositeOperation="source-over",u.target.ctx.setTransform(1,0,0,1,0,0),u.target.ctx.clearRect(0,0,f,d),u.target.draw(),Le.releaseCacheCanvas(u.target.canvas),(_=u.ctx).globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.draw(),Le.releaseCacheCanvas(s.canvas)):(s.draw(),h=u.target,(_=h.ctx).globalCompositeOperation="destination-in",_.globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.globalCompositeOperation="source-over",h.draw(),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.draw(),Le.releaseCacheCanvas(s.canvas),(_=u.ctx).globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(h.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),h.ctx.setTransform(1,0,0,1,0,0),h.ctx.clearRect(0,0,f,d),h.draw(),Le.releaseCacheCanvas(h.canvas))):3===c?(h=u.target,(_=u.ctx).globalCompositeOperation=u.mixBlendMode,h.draw(),_.setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(h.canvas,0,0,f,d,0,0,f,d),_.globalCompositeOperation="source-over",_.draw&&_.draw(!0),h.ctx.globalAlpha=1,h.ctx.setTransform(1,0,0,1,0,0),h.ctx.clearRect(0,0,f,d),h.draw(),Le.releaseCacheCanvas(h.canvas)):4===c&&(_=u.ctx)}),_},Mp=function t(e,r,i){_(this,t),this.uuid=Dn.genUuid(),this.time=Le.now(),this.texture=e,this.width=r,this.height=i},Op=function(){function s(t,e,r,i,n,o,a){_(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=n,this.height=o,this.bbox=a,this.available=!0,this.__page=new Mp(e,n,o),this.dx=-a[0],this.dy=-a[1],this.dbx=r-a[0],this.dby=i-a[1]}return f(s,[{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),Rp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",Sp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",Cp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Ip="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",kp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",wp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Lp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Dp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Np="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Pp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Fp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Bp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Yp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Hp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Gp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Wp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Up="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Xp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Vp=la.NA,Kp=la.LOCAL,zp=la.CHILD,jp=la.SELF,$p=la.getCache,Zp=qt,qp=fr,Jp=A,Qp=Jt,tg=Zt,eg=ft,sr=m.STYLE_KEY,rg=sr.DISPLAY,ig=sr.OPACITY,ng=sr.VISIBILITY,og=sr.FILTER,ag=sr.OVERFLOW,sg=sr.MIX_BLEND_MODE,hg=sr.FILL,lg=sr.TRANSFORM,cg=sr.TRANSFORM_ORIGIN,ug=sr.PERSPECTIVE,_g=sr.PERSPECTIVE_ORIGIN,fg=sr.PADDING_LEFT,dg=sr.PADDING_RIGHT,pg=sr.PADDING_TOP,gg=sr.PADDING_BOTTOM,vg=sr.BORDER_TOP_WIDTH,mg=sr.BORDER_RIGHT_WIDTH,yg=sr.BORDER_BOTTOM_WIDTH,Eg=sr.BORDER_LEFT_WIDTH,xg=sr.MATRIX,qt=m.NODE_KEY,bg=qt.NODE_CACHE,Tg=qt.NODE_CACHE_TOTAL,Ag=qt.NODE_CACHE_OVERFLOW,Mg=qt.NODE_CACHE_MASK,Og=qt.NODE_CACHE_FILTER,Rg=qt.NODE_MATRIX,Sg=qt.NODE_MATRIX_EVENT,Cg=qt.NODE_OPACITY,Ig=qt.NODE_COMPUTED_STYLE,kg=qt.NODE_CURRENT_STYLE,wg=qt.NODE_LIMIT_CACHE,Lg=qt.NODE_REFRESH_LV,Dg=qt.NODE_CACHE_STYLE,Ng=qt.NODE_DEFS_CACHE,Pg=qt.NODE_IS_MASK,Fg=qt.NODE_DOM_PARENT,Bg=qt.NODE_PERSPECTIVE_MATRIX,Yg=qt.NODE_VIRTUAL_DOM,Hg=qt.NODE_CACHE_AS_BITMAP,Gg=qt.NODE_STRUCT,fr=m.STRUCT_KEY,Wg=fr.STRUCT_NODE,Ug=fr.STRUCT_INDEX,Xg=fr.STRUCT_TOTAL,Vg=fr.STRUCT_HAS_MASK,Kg=fr.STRUCT_LV,zg=ya.NONE,jg=ya.TRANSFORM_ALL,$g=ya.OPACITY,Zg=ya.FILTER,qg=ya.REPAINT,Jg=ya.contain,Qg=ya.MIX_BLEND_MODE,tv=ya.PERSPECTIVE,ev=te.isE,rv=te.inverse,iv=te.multiply,nv=$t,ov=Y,av=ue.assignMatrix,sv=ue.transformBbox;function hv(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function lv(W,t,e,r,i,n,U,o,X,V){var a=e[Tg],s=e[Og],h=e[Mg],l=e[Ag],c=e[kg],u=e[Ig];if(a&&a.available){var _=e[Lg],f=e[Dg];Jg(_,jg)&&(f=t.__calMatrix(_,f,c,u,e),av(e[Rg],f)),Jg(_,$g)&&(e[Cg]=u[ig]=c[ig]),Jg(_,Zg)&&t.__calFilter(c,u),Jg(_,Qg)&&(u[sg]=c[sg])}else{for(var d,p,g=!0,v=t.__sx1,m=t.__sy1,y=[],E=[],x=1,b=i,T=r,A=r+(n||0)+1;T<A;T++){var M,O,R,S,C,I,k,w,L,D,N=U[T],P=N[Wg],F=N[Kg],B=N[Xg],Y=N[Vg];P instanceof Za||(O=(M=P.__config)[Lg],D=M[Tg],R=M[Og],S=M[Mg],C=M[Ag],I=M[Ig],w=M[Pg],"none"===I[rg]||T!==r&&w?T+=(B||0)+cv(U,T+1,Y||0):(T===r||(b<F?(q=k[Sg],ev(q)&&(q=null),y.push(q),x=k[Cg],E.push(x)):F<b&&(y.splice(-(L=b-F)),q=y[F-1],E.splice(-L),x=E[F-1])),b=F,N=(k=M)[kg],w=M[Dg],F=L=void 0,O<qg?(Jg(O,jg)?(L=P.__calMatrix(O,w,N,I,M),av(M[Rg],L)):L=M[Rg],Jg(O,$g)&&(I[ig]=N[ig]),F=I[ig],Jg(O,Zg)&&(P.__bbox=null,P.__calFilter(N,I)),L=M[Rg],Jg(O,Qg)&&(I[sg]=N[sg])):(P.__bbox=null,T===r&&P.__calFilter(N,I),L=P.__calMatrix(O,w,N,I,M),av(M[Rg],L),F=I[ig]=N[ig]),T===r?(F=1,p=L,L=te.identity()):ev(q)||(L=iv(q,L)),av(M[Sg],L),M[Cg]=x*F,F=void 0,F=(D=$p([S,R,C,D]))?(T+=(B||0)+cv(U,T+1,Y||0),D.bbox):P.bbox,F=sv(F,L,0,0),T===r?d=F.slice(0):hv(d,F,0,0)))}if(e[Tg]=a=la.getInstance(d,v,m),!a||!a.enabled)return;a.__available=!0;var c=a,H=c.dx,G=c.dy,K=c.dbx,z=c.dby,j=c.x,$=c.y,Z=a.ctx,q=null;b=i;for(var J={},Q={},tt=r,et=r+(n||0)+1;tt<et;tt++){var rt=U[tt],it=rt[Wg],nt=rt[Kg],ot=rt[Xg],at=rt[Vg];if(it instanceof Za)it.render(W,qg,Z,zp,H,G),Q.hasOwnProperty(tt)&&(Z=eg(Z,Q[tt],X,V));else{var st=it.__config,ht=st[Lg],lt=st[Tg],ct=st[Og],ut=st[Mg],_t=st[Ag],rt=st[Ig];if(J.hasOwnProperty(tt)){var ft=Qt(J[tt],3),dt=ft[0],pt=ft[1],gt=ft[2],vt=Le.getCacheCanvas(X,V,null,"mask2");gt.mask=vt,gt.isClip=it.isClip;for(var mt=tt+(ot||0)+1;--pt;)mt+=(U[mt][Xg]||0)+1;ft=Q[--mt]=Q[mt]||[];ft.push([dt,nt,Jp,gt]),ft.push([mt,nt,tg,{ctx:Z,target:vt}]),Z=vt.ctx}tt===r||(b<nt?(ev(q=yt)&&(q=null),y.push(q)):nt<b&&(y.splice(-(b-nt)),q=y[nt-1]));dt=rt[lg],gt=rt[cg],ft=rt[rg],vt=void 0;tt===r||ev(q)&&ev(dt)?vt=null:((gt=gt.slice(0))[0]+=K+it.__sx1-v+j,gt[1]+=z+it.__sy1-m+$,vt=ra.calMatrixByOrigin(dt,gt),ev(q)||(vt=iv(q,vt))),vt?Z.setTransform(vt[0],vt[1],vt[4],vt[5],vt[12],vt[13]):Z.setTransform(1,0,0,1,0,0),b=nt;var yt=vt,_t=$p([ut,ct,_t,lt]);tt!==r&&_t?(tt+=(ot||0)+cv(U,tt+1,at||0),"none"!==ft&&(lt=rt[sg],ov(lt)?Z.globalCompositeOperation=nv(lt):Z.globalCompositeOperation="source-over",Z.globalAlpha=st[Cg],la.drawCache(_t,a),Z.globalCompositeOperation="source-over")):(qg<=ht&&it.__calCache(W,Z,st[Fg],st[Dg],st[kg],rt,it.clientWidth,it.clientHeight,it.offsetWidth,it.offsetHeight,rt[vg],rt[mg],rt[yg],rt[Eg],rt[pg],rt[dg],rt[gg],rt[fg],it.__sx1,it.__sx2,it.__sx3,it.__sx4,it.__sx5,it.__sx6,it.__sy1,it.__sy2,it.__sy3,it.__sy4,it.__sy5,it.__sy6),_t=it.render(W,ht,Z,tt===r?Kp:zp,H,G),st[Lg]=qg,it=(rt=_t||{}).offscreenBlend,ht=rt.offscreenMask,st=rt.offscreenFilter,_t=rt.offscreenOverflow,it&&((Q[rt=tt+(ot||0)+cv(U,tt+1,at||0)]=Q[rt]||[]).push([tt,nt,Qp,it]),Z=it.target.ctx),ht&&(J[tt+(ot||0)+1]=[tt,at,ht],Z=ht.target.ctx),st&&((Q[ht=tt+(ot||0)+cv(U,tt+1,at||0)]=Q[ht]||[]).push([tt,nt,qp,st]),Z=st.target.ctx),_t&&((Q[st=tt+(ot||0)+cv(U,tt+1,at||0)]=Q[st]||[]).push([tt,nt,Zp,_t]),Z=_t.target.ctx),Q.hasOwnProperty(tt)&&(Z=eg(Z,Q[tt],X,V)),"none"===ft&&(tt+=(ot||0)+cv(U,tt+1,at||0)))}}av(e[Sg],p),e[Lg]=zg}a&&a.available&&(i=u[ag],n=u[og],u=a,"hidden"===i&&(l&&l.available&&!g||(e[Ag]=function(t,e){var r=t.bbox,i=e.bbox;if(!(i[0]>=r[0]&&i[1]>=r[1]&&i[2]<=r[2]&&i[3]<=r[3]))return la.genOverflow(e,t)}(t,u),g=!0),u=e[Ag]||u),n&&n.length&&(s&&s.available&&!g||(e[Og]=(s=u,la.genFilter(s,n)),g=!0),u=e[Og]||u),!o||h&&h.available&&!g||(e[Mg]=(e=u,u=function(t,e,r){for(var i,n,o={},a={},s=e.dx,h=e.dy,l=e.dbx,c=e.dby,u=e.x,_=e.y,f=e.ctx,d=t.__config[Gg],p=d[Ug],t=d[Xg],g=[],v=[],m=1,y=d[Kg],E=p,x=p+(t||0)+1;E<x;E++){var b=U[E],T=b[Wg],A=b[Kg],M=b[Xg],O=b[Vg];if(T instanceof Za)T.render(W,qg,f,zp,s,h),a.hasOwnProperty(E)&&(f=eg(f,a[E],X,V));else{var R=T.__config,S=R[Lg],C=R[Tg],I=R[Og],k=R[Mg],w=R[Ag],L=R[Ig];if(o.hasOwnProperty(E)){var D=Qt(o[E],3),N=D[0],P=D[1],b=D[2],F=Le.getCacheCanvas(X,V,null,"mask2");b.mask=F,b.isClip=T.isClip;for(var B=E+(M||0)+1;--P;)B+=(U[B][Xg]||0)+1;D=a[--B]=a[B]||[];D.push([N,A,Jp,b]),D.push([B,A,tg,{ctx:f,target:F}]),f=F.ctx}E===p||(y<A?(ev(i=n)&&(i=null),g.push(i),m=H,v.push(m)):A<y&&(g.splice(-(G=y-A)),i=g[A-1],v.splice(-G),m=v[A-1]));var Y,H,y=A,D=L[rg],F=L[lg],G=L[cg],I=$p([k,I,w,C]);I?(E+=(M||0)+cv(U,E+1,O||0),"none"!==D&&(Y=L[sg],ov(Y)?f.globalCompositeOperation=nv(Y):f.globalCompositeOperation="source-over",f.globalAlpha=R[Cg],la.drawCache(I,e,F,te.identity(),G.slice(0),i,r),f.globalCompositeOperation="source-over")):(w=R[kg],C=R[Dg],I=Y=void 0,S<qg?(Jg(S,jg)?(Y=T.__calMatrix(S,C,w,L,R),av(R[Rg],Y)):Y=R[Rg],Jg(S,$g)&&(L[ig]=w[ig]),I=L[ig],Jg(S,Zg)&&(T.__bbox=null,T.__calFilter(w,L)),Y=R[Rg],Jg(S,Qg)&&(L[sg]=w[sg])):(T.__bbox=null,E===p&&T.__calFilter(w,L),Y=T.__calMatrix(S,C,w,L,R),av(R[Rg],Y),I=L[ig]=w[ig]),E===p?(I=1,Y=te.identity()):i&&(Y=iv(i,Y)),av(R[Sg],Y),H=R[Cg]=m*I,I=void 0,E===p||ev(i)&&ev(F)?I=null:((G=G.slice(0))[0]+=l+T.__sx1-sx1+u,G[1]+=c+T.__sy1-sy1+_,I=ra.calMatrixByOrigin(F,G),ev(i)||(I=iv(i,I))),(I=(n=I)&&(ue.equalArr(I,r)?te.identity():(r=te.inverse(r),te.multiply(r,I))))?f.setTransform(I[0],I[1],I[4],I[5],I[12],I[13]):f.setTransform(1,0,0,1,0,0),qg<=S&&T.__calCache(W,f,R[Fg],R[Dg],R[kg],L,T.clientWidth,T.clientHeight,T.offsetWidth,T.offsetHeight,L[vg],L[mg],L[yg],L[Eg],L[pg],L[dg],L[gg],L[fg],T.__sx1,T.__sx2,T.__sx3,T.__sx4,T.__sx5,T.__sx6,T.__sy1,T.__sy2,T.__sy3,T.__sy4,T.__sy5,T.__sy6),I=T.render(W,S,f,zp,s,h),R[Lg]=qg,T=(L=I||{}).offscreenBlend,S=L.offscreenMask,R=L.offscreenFilter,I=L.offscreenOverflow,T&&((a[L=E+(M||0)+cv(U,E+1,O||0)]=a[L]||[]).push([E,A,Qp,T]),f=T.target.ctx),S&&(o[E+(M||0)+1]=[E,O,S],f=S.target.ctx),R&&((a[S=E+(M||0)+cv(U,E+1,O||0)]=a[S]||[]).push([E,A,qp,R]),f=R.target.ctx),I&&((a[R=E+(M||0)+cv(U,E+1,O||0)]=a[R]||[]).push([E,A,Zp,I]),f=I.target.ctx),a.hasOwnProperty(E)&&(f=eg(f,a[E],X,V)),"none"===D&&(E+=(M||0)+cv(U,E+1,O||0)))}}},la.genMask(e,t,u))))}function cv(t,e,r){for(var i=0;r--;){var n=t[e][Xg];i+=n||0,e+=n||0,i++,e++}return i}function uv(t,e,r,i){var n=e.lockOneChannel(),o=xe.createTexture(t,null,n,r,i),a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);e=t.checkFramebufferStatus(t.FRAMEBUFFER);return e!==t.FRAMEBUFFER_COMPLETE&&Le.error("Framebuffer object is incomplete: "+e.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[n,a,o]}function _v(t,e,r,i,n,o,a,s,h,l,c,u){var _,f={},d={},p=function(t,e,r,i,n,o){var a,s=t.__sx1,h=t.__sy1,l=(u=t.__config)[bg],c=(_=u[Ig])[og],u=_[ug],_=_[_g],f=l&&l.available?l.bbox.slice(0):t.bbox;u&&(a=ra.calPerspectiveMatrix(u,_));var d=[r],p=0;c.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t&&(p=oa.outerSize(e))}),n[r]=1;for(var g={};d.length;)for(var v=d.splice(0),m=0,y=v.length;m<y;m++)for(var E=v[m],x=E+1,b=E+(e[E][Xg]||0)+1;x<b;x++){var T=e[x],A=T[Wg],M=T[Xg];if(!A.isMask){var O=A.__sx1,R=A.__sy1,S=A.__config,C=S[wg],I=S[bg],k=S[Tg],w=S[Og],L=S[Mg],D=S[Ag],N=S[Ig],P=N[rg],F=N[ng],T=N[lg],S=N[cg],N=N[ig];if(C&&!o)return;"none"!==P?"hidden"!==F&&(i[x]=E,n[x]=n[E]*N,A instanceof Za||(C=void 0,N=void(F=P=0),(k=$p([L,w,D,k]))?(C=k.bbox.slice(0),P=k.dbx,F=k.dby,x+=M||0,N=!0):I&&I.available?(C=I.bbox.slice(0),P=I.dbx,F=I.dby):C=A.bbox,C&&(C[0]-=s,C[1]-=h,C[2]-=s,C[3]-=h,A=g[E],T&&!ev(T)&&((S=S.slice(0))[0]+=O-s+P,S[1]+=R-h+F,S=ra.calMatrixByOrigin(T,S),A=A?iv(A,S):S),A&&(g[x]=A),a&&(A=iv(a,A)),C=sv(C,A,p,p),M&&!N&&d.push(x),hv(f,C,s,h)))):x+=M||0}}return[f,a]}(r,a,n,f,d,(t.getParameter(t.MAX_TEXTURE_SIZE),h)),g=Qt(p,2),p=g[0],v=g[1];p||(_=!0);var m=(p=h||_?[0,0,c,u]:p)[2]-p[0],y=p[3]-p[1],g=Qt(uv(t,e,m,y),3),E=g[0],x=g[1],b=g[2],T=r.__sx1,A=r.__sy1,M=.5*m,O=.5*y,R=-p[0],S=-p[1],C=T-p[0],I=A-p[1];s&&s.available?e.addTexAndDrawWhenLimit(t,s,1,null,M,O,R,S):h&&(g=Le.getCacheCanvas(m,y,"__$$OVERSIZE$$__"),r.render(rt.WEBGL,0,t,Vp,0,0),s=e.lockOneChannel(),r=xe.createTexture(t,g.canvas,s),r=new Op(t,r,0,0,m,y,[0,0,m,y]),e.addTexAndDrawWhenLimit(t,r,1,null,M,O,0,0),e.refresh(t,M,O),g.ctx.setTransform(1,0,0,1,0,0),g.ctx.globalAlpha=1,g.ctx.clearRect(0,0,m,y),r.release(),e.releaseLockChannel(s));for(var k={},w=n+1,L=n+(o||0)+1;w<L;w++){var D,N,P,F,B,Y,H,G,W,U=a[w],X=U[Wg],V=U[Xg],K=U[Vg],z=X.__config,j=k[f[w]],$=d[w];X instanceof Za?(v&&(j=iv(v,j)),e.addTexAndDrawWhenLimit(t,z[bg],$,j,M,O,R,S)):(D=z[bg],H=z[Tg],G=z[Og],B=z[Mg],Y=z[Ag],N=z[Pg],P=(W=z[Ig])[rg],F=W[ng],U=W[lg],z=W[cg],W=W[sg],"none"!==P?"hidden"===F||N||(U&&!ev(U)&&(z=z.slice(0),D&&D.available?(z[0]+=D.sx1,z[1]+=D.sy1):(z[0]+=X.__sx1,z[1]+=X.__sy1),X=I-A,z[0]+=C-T,z[1]+=X,z=ra.calMatrixByOrigin(U,z),j=j?iv(j,z):z),j&&(k[w]=j),v&&(j=iv(v,j)),(B=$p([B,G,Y,H,D]))&&(ov(W)?(e.refresh(t,M,O),Y=(G=Qt(uv(t,e,m,y),3))[0],H=G[1],G=G[2],e.addTexAndDrawWhenLimit(t,B,$,j,M,O,R,S),e.refresh(t,M,O),E=(W=Qt(pv(t,e,E,Y,x,b,nv(W),m,y),3))[0],x=W[1],b=W[2],t.deleteFramebuffer(H),t.deleteTexture(G)):e.addTexAndDrawWhenLimit(t,B,$,j,M,O,R,S),B!==D&&(w+=(V||0)+cv(a,w+1,K||0)))):w+=(V||0)+cv(a,w+1,K||0))}e.refresh(t,M,O),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(x);p=new Op(t,b,T,A,m,y,p);return e.releaseLockChannel(E,p.page),[h||_,p]}function fv(s,h,t,e,r,i,n){var l=e.sx1,c=e.sy1,u=e.width,_=e.height,f=e.bbox,d=e;return r.forEach(function(t){var e,r,i,n,o,a=Qt(t,2),t=a[0],a=a[1];"blur"===t&&0<a?(r=function(t,e,r,i,n,o,a,s,h){var l=oa.kernelSize(i),c=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));for(;c<l;)l-=2;var u=oa.outerSizeByD(l);n+=2*u,o+=2*u;var _=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(_<n||_<o)){(h=h.slice(0))[0]-=u,h[1]-=u,h[2]+=u,h[3]+=u;for(var f=.5*n,d=.5*o,p=oa.gaussianWeight(i,l),g="",v="",m=Math.floor(.5*l),y=0;y<m;y++){var E=.01*(m-y);g+="\nv_texCoordsBlur[".concat(y,"] = a_texCoords + vec2(-").concat(E,", -").concat(E,") * u_direction;"),v+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(y,"]) * ").concat(p[y],";")}g+="\nv_texCoordsBlur[".concat(m,"] = a_texCoords;"),v+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(m,"]) * ").concat(p[m],";");for(var x=0;x<m;x++){var b=.01*(x+1);g+="\nv_texCoordsBlur[".concat(x+m+1,"] = a_texCoords + vec2(").concat(b,", ").concat(b,") * u_direction;"),v+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(x+m+1,"]) * ").concat(p[x+m+1],";")}g=Rp.replace("[3]","["+l+"]").replace(/}$/,g+"}"),v=Sp.replace("[3]","["+l+"]").replace(/}$/,v+"}");var T=xe.initShaders(t,g,v);t.useProgram(T);var A=Qt(uv(t,e,n,o),3),M=A[0],O=A[1],_=A[2],A=e.findExistTexChannel(r.page);-1===A?(A=e.lockOneChannel(),xe.bindTexture(t,r.page.texture,A)):e.lockChannel(A),_=xe.drawBlur(t,T,O,e,_,r.page.texture,M,A,n,o,f,d,u,l,i),t.deleteShader(T.vertexShader),t.deleteShader(T.fragmentShader),t.deleteProgram(T),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(O),e.releaseLockChannel(A);s=new Op(t,_,a,s,n,o,h);return e.releaseLockChannel(M,s.page),[s,n,o,h]}}(s,h,d,a,u,_,l,c,f))&&(e=Qt(r,4),d=e[0],u=e[1],_=e[2],f=e[3]):"hue-rotate"===t?(r=et.d2r(a%360),e=Math.cos(r),r=Math.sin(r),(r=dv(s,h,d,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],u,_,l,c,f))&&(i=Qt(r,4),d=i[0],u=i[1],_=i[2],f=i[3])):"saturate"===t&&100!==a?(i=dv(s,h,d,[.213+.787*(i=.01*a),.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0],u,_,l,c,f))&&(n=Qt(i,4),d=n[0],u=n[1],_=n[2],f=n[3]):"brightness"===t&&100!==a?(n=dv(s,h,d,[n=.01*a,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],u,_,l,c,f))&&(o=Qt(n,4),d=o[0],u=o[1],_=o[2],f=o[3]):"grayscale"===t&&0<a?((o=1-.01*a)<0?o=0:1<o&&(o=1),(o=dv(s,h,d,[.2126+.7874*o,.7152-.7152*o,.0722-.0722*o,0,0,.2126-.2126*o,.7152+.2848*o,.0722-.0722*o,0,0,.2126-.2126*o,.7152-.7152*o,.0722+.9278*o,0,0,0,0,0,1,0],u,_,l,c,f))&&(o=Qt(o,4),d=o[0],u=o[1],_=o[2],f=o[3])):"contrast"!==t||100===a||(a=dv(s,h,d,[t=.01*a,0,0,0,a=-.5*t,0,t,0,0,a,0,0,t,0,a,0,0,0,1,0],u,_,l,c,f))&&(a=Qt(a,4),d=a[0],u=a[1],_=a[2],f=a[3])}),s.useProgram(s.program),s.viewport(0,0,i,n),d}function dv(t,e,r,i,n,o,a,s,h){var l=Qt(uv(t,e,n,o),3),c=l[0],u=l[1],_=l[2],l=e.findExistTexChannel(r.page);-1===l?(l=e.lockOneChannel(),xe.bindTexture(t,r.page.texture,l)):e.lockChannel(l),t.useProgram(t.programCm),xe.drawCm(t,t.programCm,l,i),e.releaseLockChannel(l),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u);s=new Op(t,_,a,s,n,o,h.slice(0));return e.releaseLockChannel(c,s.page),[s,n,o,h]}function pv(t,e,r,i,n,o,a,s,h){"multiply"===(a=nv(a))?u=Ip:"screen"===a?u=kp:"overlay"===a?u=wp:"darken"===a?u=Lp:"lighten"===a?u=Dp:"color-dodge"===a?u=Np:"color-burn"===a?u=Pp:"hard-light"===a?u=Fp:"soft-light"===a?u=Bp:"difference"===a?u=Yp:"exclusion"===a?u=Hp:"hue"===a?u=Gp:"saturation"===a?u=Wp:"color"===a?u=Up:"luminosity"===a&&(u=Xp);var l=xe.initShaders(t,Cp,u);t.useProgram(l);var c=Qt(uv(t,e,s,h),3),a=c[0],u=c[1],c=c[2];return xe.drawMbm(t,l,r,i,s,h),t.useProgram(t.program),t.deleteShader(l.vertexShader),t.deleteShader(l.fragmentShader),t.deleteProgram(l),t.deleteFramebuffer(n),t.deleteTexture(o),e.releaseLockChannel(r),e.releaseLockChannel(i),[a,u,c]}var gv={renderCanvas:function(a,t,e){for(var s=e.__structs,h=e.width,l=e.height,r=[],i=0,n=s.length;i<n;i++){var o,c,u,_=s[i],f=_[Wg],d=_[Kg],p=_[Xg],g=_[Vg];f instanceof Za||(c=(o=f.__config)[Lg],u=o[Hg],_=o[Ig],qg<=c&&f.__calCache(a,t,o[Fg],o[Dg],o[kg],_,f.clientWidth,f.clientHeight,f.offsetWidth,f.offsetHeight,_[vg],_[mg],_[yg],_[Eg],_[pg],_[dg],_[gg],_[fg],f.__sx1,f.__sx2,f.__sx3,f.__sx4,f.__sx5,f.__sx6,f.__sy1,f.__sy2,f.__sy3,f.__sy4,f.__sy5,f.__sy6),u&&("none"!==_[rg]?r.push([i,d,p,f,o,g]):i+=(p||0)+cv(s,i+1,g||0)))}r.length&&(r.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),r.forEach(function(t){var e=Qt(t,6),r=e[0],i=e[1],n=e[2],o=e[3],t=e[4],e=e[5];lv(a,o,t,r,i,n||0,s,e,h,l)}));for(var v={},m={},y=0,E=s.length;y<E;y++){var x=s[y],b=x[Wg],T=x[Kg],A=x[Xg],M=x[Vg];if(b instanceof Za)b.render(a,qg,t,Vp,0,0),m.hasOwnProperty(y)&&(t=eg(t,m[y],h,l));else{var O=b.__config,R=O[Tg],S=O[Og],C=O[Mg],I=O[Ag],k=O[Lg],w=O[Ig],L=w[rg],D=w[sg],N=w[ig];if(v.hasOwnProperty(y)){var P=Qt(v[y],3),F=P[0],B=P[1],x=P[2],w=Le.getCacheCanvas(h,l,null,"mask2");x.mask=w,x.isClip=b.isClip;for(var Y=y+(A||0)+1;--B;)Y+=(s[Y][Xg]||0)+1;P=m[--Y]=m[Y]||[];P.push([F,T,Jp,x]),P.push([Y,T,tg,{ctx:t,target:w}]),t=w.ctx}var H,G,S=$p([C,S,I,R]);S?(y+=(A||0)+cv(s,(G=y)+1,M||0),"none"!==L&&(ov(D)?t.globalCompositeOperation=nv(D):t.globalCompositeOperation="source-over",I=O[Rg],D=(H=O[Sg]).slice(0),(O=O[Fg].matrixEvent)&&!ev(O)&&(I=iv(O,I)),ue.assignMatrix(H,I),la.draw(t,N,H,S),t.globalCompositeOperation="source-over",m.hasOwnProperty(y)&&(t=eg(t,m[y],h,l)),(S=!(S=R.isNew)&&!ue.equalArr(D,H)||S)&&function t(e,r,i,n,o){for(var a,s=[],h=o,l=n,c=r+1,u=r+(i||0)+1;c<u;c++){var _,f,d,p,g,v=e[c],m=v[Wg],y=v[Kg],E=v[Xg],x=v[Vg];m instanceof Za||(_=(g=m.__config)[Sg],f=g[Tg],d=g[kg],p=g[Ig],v=g[Dg],"none"!==p[rg]?(l<y?(ev(a=h)&&(a=null),s.push(a)):y<l&&(s.splice(-(l-y)),a=s[y-1]),l=y,_=_.slice(0),v[xg]=null,p=m.__calMatrix(qg,v,d,p,g),av(g[Rg],p),ev(a)||(p=iv(a,p)),av(g[Sg],p),h=p,f&&f.available&&((g=!(g=f.isNew)&&!ue.equalArr(_,p)||g)&&t(e,c,E||0,y,p),f.__isNew=!1,c+=(E||0)+cv(e,c+1,x||0))):c+=(E||0)+cv(e,c+1,x||0))}}(s,G,A||0,T,H),R.__isNew=!1)):(H=(G=b.render(a,k,t,Vp,0,0)||{}).offscreenBlend,R=G.offscreenMask,b=G.offscreenFilter,k=G.offscreenOverflow,H&&((m[G=y+(A||0)+cv(s,y+1,M||0)]=m[G]||[]).push([y,T,Qp,H]),t=H.target.ctx),R&&(v[y+(A||0)+1]=[y,M,R],t=R.target.ctx),b&&((m[R=y+(A||0)+cv(s,y+1,M||0)]=m[R]||[]).push([y,T,qp,b]),t=b.target.ctx),k&&((m[b=y+(A||0)+cv(s,y+1,M||0)]=m[b]||[]).push([y,T,Zp,k]),t=k.target.ctx),m.hasOwnProperty(y)&&(t=eg(t,m[y],h,l)),"none"===L&&(y+=(A||0)+cv(s,y+1,M||0)))}}},renderSvg:function(t,e,r,i){var n=r.__structs,o=r.width,a=r.height,s={};if(!i)for(var h=0,l=n.length;h<l;h++){var c=n[h],u=c[Wg],_=c[Xg],f=c[Vg],c=u.__config,u=c[Lg],c=c[Ng];f&&(qg<=u||Jg(u,jg|$g))&&(s[h+(_||0)+1+f-1]=u),u<qg&&(s.hasOwnProperty(h)?(f=s[h],!Jg(u,jg)&&f<qg&&!Jg(f,jg)&&c.forEach(function(t){e.addCache(t)})):c.forEach(function(t){e.addCache(t)}))}for(var d,p,g={},v=[],m=[],y=0,E=0,x=n.length;E<x;E++){var b=n[E],T=b[Wg],A=b[Xg],M=b[Vg],O=b[Kg],R=T.__config,S=R[Tg],C=R[Lg],I=R[Ng],k=R[Ig],b=k[rg];M&&"none"!==b&&(g[(F=(N=E+(A||0)+1)+M)-1]={index:E,start:N,end:F,isClip:n[N][Wg].isClip}),O<y?(v.splice(-(w=y-O)),d=v[O-1],m.splice(-w),p=m[O-1]):y<O&&(v.push(P[Rg]),L=P[Yg],m.push(L),p=L);var w,L,D,N,P=R,F=void 0;if(C<qg&&!(T instanceof Za)?(R[Lg]=zg,F=R[Yg],S&&S.available?(E+=A||0,F.cache=!0):(S&&(S.available=!0),F=R[Yg]=T.__virtualDom=ue.extend({},F),T instanceof J0&&!(T instanceof Gd)&&(F.children=[]),"none"===b?(E+=A||0,M&&(E+=M)):delete F.cache),N=R[kg],w=R[Ig],L=R[Dg],Jg(C,jg)&&(S=T.__calMatrix(C,L,N,w,R),L=R[Rg],av(L,S),!S||ev(S)?delete F.transform:F.transform="matrix("+ue.joinArr(te.m2m6(S),",")+")",d&&S&&(S=iv(d,S)),L=R[Sg],av(L,S)),Jg(C,$g)&&(1===(D=w[ig]=N[ig])?delete F.opacity:F.opacity=D),Jg(C,Zg)&&(D=T.__calFilter(N,w),(D=Tt.svgFilter(D))?F.filter=D:delete F.filter),Jg(C,Qg)&&(N=w[sg]=N[sg],ov(N)?F.mixBlendMode=nv(N):delete F.mixBlendMode),F.lv=C):(R[Ng]&&R[Ng].splice(0),T.render(t,C,e,Vp,0,0),F=R[Yg],"none"===(b=k[rg])&&(E+=A||0,M&&(E+=M))),g.hasOwnProperty(E)&&(s.hasOwnProperty(E)||qg<=C||Jg(C,jg|$g))){var A=g[E],M=A.index,C=A.start,B=A.end,Y=A.isClip,H=n[M][Wg],G=[];Y&&G.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(o,",0L").concat(o,",").concat(a,"L0,").concat(a,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var W=C;W<B;W++){var U=n[W][Wg],X=U.computedStyle,V=X[rg],K=X[ng],z=X[hg],X=U.virtualDom,j=X.children,$=X.opacity;if("none"!==V&&"hidden"!==K)for(var j=ue.clone(j),G=G.concat(j),Z=0,q=j.length;Z<q;Z++){var J=j[Z],Q=J.tagName,tt=J.props;if("path"===Q){if(Y)for(var et=0,rt=tt.length;et<rt;et++){var it=tt[et];"fill"===it[0]&&(it[1]=ue.int2invert(z[0]))}var nt=U.matrix,J=rv(H.matrix),nt=iv(J,nt);tt.push(["transform","matrix(".concat(ue.joinArr(te.m2m6(nt),","),")")]),ue.isNil($)||1===$||tt.push(["opacity",$])}else if("image"===Q){for(var ot,at=-1,st=0,ht=tt.length;st<ht;st++)if("transform"===tt[st][0]){at=st;break}-1===at?(ot=rv(H.matrix),ev(ot)||tt.push(["transform","matrix(".concat(ue.joinArr(te.m2m6(ot),","),")")])):(Q=tt[at][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),ot=rv(H.matrix),Q=iv(ot,Q),tt[at][1]="matrix(".concat(ue.joinArr(te.m2m6(Q),","),")"))}}}for(var lt=I.length-1;0<=lt;lt--)"mask"===I[lt].tagName&&I.splice(lt,1);M={tagName:"mask",props:[],children:G},C=e.add(M);I.push(M),H.virtualDom.mask="url(#"+C+")"}p&&!T.isMask&&p.children.push(F),0===E&&(d=R[Rg],p=F),y=O}},renderWebgl:function(t,p,e){for(var r,i,n,g=e.__structs,v=e.width,m=e.height,y=e.texCache,o=.5*v,a=.5*m,s=[],h=[],l=1,c=[],u=0,_=[],f=0,d=g.length;f<d;f++){var E=g[f],x=E[Wg],b=E[Kg],T=E[Xg],A=E[Vg];if(x instanceof Za)qg<=R&&x.render(t,qg,p,jp,0,0);else{var M=x.__config,O=M[Lg];0===f||(u<b?(r=S[Sg],ev(r)&&(r=null),s.push(r),l=S[Cg],h.push(l),i=S[Bg],ev(i)&&(i=null),c.push(i)):b<u&&(s.splice(-(L=u-b)),r=s[b-1],h.splice(-L),l=h[b-1],c.splice(-L),i=c[b-1]));var R=O,S=M,u=b,C=M[Tg],I=M[Ig];if("none"!==I[rg]){var k=void 0;if(O<qg){M[Lg]=zg,A&&((D=M[Mg])&&D.available||_.push(k=[f,b,T,x,M,null,A]));var w=M[kg],E=M[Dg],L=M[Sg];Jg(O,tv)&&x.__calPerspective(E,w,I,M);var D=void 0;Jg(O,jg)?(D=x.__calMatrix(O,E,w,I,M),E=M[Rg],av(E,D)):D=M[Rg],(ra.isPerspectiveMatrix(D)||i)&&(k?k[9]=!0:k=[f,b,T,x,M,null,null,null,null,!0]),i&&(D=iv(i,D)),r&&(D=iv(r,D)),av(L,D);D=void 0,D=Jg(O,$g)?I[ig]=w[ig]:I[ig];if(M[Cg]=l*D,Jg(O,Zg)&&(x.__bbox=null,D=x.__calFilter(w,I),k?k[7]=D:_.push(k=[f,b,T,x,M,null,A,D])),Jg(O,Qg)&&(I[sg]=w[sg]),C&&C.available){f+=T||0;continue}}else{O=x.render(t,O,p,jp,0,0);O&&Le.isWebGLTexture(O.texture)&&(N=x.__sx1,P=x.__sy1,F=x.offsetWidth,B=x.offsetHeight,Y=x.bbox,M[bg]=new Op(p,O.texture,N,P,F,B,Y),p.viewport(0,0,v,m),p.useProgram(p.program))}var N=M[wg],P=M[Hg],F=I[ag],B=I[og],Y=I[sg],I=I[lg],Y=ov(Y),I=ra.isPerspectiveMatrix(I)||i;(P||A||B.length||"hidden"===F&&T||Y||I)&&(Y&&(n=!0),k?(k[5]=N,k[7]=B,k[8]=F,k[9]=I):_.push([f,b,T,x,M,N,A,B,F,I]))}else f+=T||0}}var H,G,W,U={};_.length&&(_.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),_.forEach(function(t){var e,r=Qt(t,9),i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],h=r[5],l=r[6],c=r[7],u=r[8],_=s[bg],f=s[Tg],d=s[Og],t=s[Mg],r=s[Ag];f&&f.available||(o=(e=Qt(_v(p,y,a,0,i,o||0,g,_,h,0,v,m),2))[0],f=_=e[1],e=!0,(h=o)||(s[Tg]=_));"hidden"===u&&(r&&r.available&&!e||(f=function(t,e,r,i,n,o){var a=r.bbox.slice(0),s=i.bbox;if(!(s[0]>=a[0]&&s[1]>=a[1]&&s[2]<=a[2]&&s[3]<=a[3])){var h=a[2]-a[0],l=a[3]-a[1],c=Qt(uv(t,e,h,l),3),u=c[0],_=c[1],r=c[2],c=e.findExistTexChannel(i.page);-1===c?(c=e.lockOneChannel(),xe.bindTexture(t,i.page.texture,c)):e.lockChannel(c),t.useProgram(t.programOverflow),xe.drawOverflow(t,c,a[0]-s[0],a[1]-s[1],h,l,i.width,i.height),e.releaseLockChannel(c),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,n,o),t.deleteFramebuffer(_);a=new Op(t,r,i.sx1,i.sy1,h,l,a);return e.releaseLockChannel(u,a.page),a}}(p,y,a,f,v,m),e=!0,h||(s[Og]=f))),c.length&&(d&&d.available&&!e||(f=fv(p,y,0,d=f,c,v,m))!==d&&(e=!0,h||(s[Og]=f))),!l||t&&t.available&&!e||(f=function(t,e,r,i,n,o,a,s,h){var l=n.sx1,c=n.sy1,u=n.width,_=n.height,f=n.bbox,d=n.dx,p=n.dy,g=.5*u,v=.5*_,m=(x=i[Ig])[lg],y=x[cg],E=ev(m)?te.identity():((q=y.slice(0))[0]+=l+d,q[1]+=c+p,ra.calMatrixByOrigin(m,q));E=te.inverse(E);for(var x=(i=Qt(uv(t,e,u,_),3))[0],y=i[1],m=i[2],b=r.next,T=b.isClip,A=[];b&&b.isMask&&b.isClip===T;)A.push(b),b=b.next;for(var M=0,O=A.length;M<O;M++)for(var R=[],S=void 0,C=void 0,I=[],k=1,w=void 0,L=s,D=A[M].__config[Gg],N=D[Ug],P=N,F=N+(D[Xg]||0)+1;P<F;P++){var B=h[P],Y=B[Wg],H=B[Kg],G=B[Xg],W=B[Vg],U=Y.__config,X=U[bg],V=U[Ig],K=U[wg];if("none"!==V[rg])if(Y instanceof Za){if(X&&X.available)e.addTexAndDrawWhenLimit(t,X,k,e.last[2],g,v,0,0,!0);else if(K)return}else{var z=U[bg],j=U[Mg],$=U[Og],Z=U[Ag],B=U[Tg],V=U[Ig],Y=V[ig],X=V[lg],U=V[cg];P===N||(L<H?(ev(S=C)&&(S=null),R.push(S),k=w,I.push(k)):H<L&&(R.splice(-(V=L-H)),S=R[H-1],I.splice(-V),k=I[H-1]));L=H,$=$p([j,$,Z,B,z]);if($){Z=void 0,Z=ev(X)?te.identity():((B=U.slice(0))[0]+=$.bbox[0]+d,B[1]+=$.bbox[1]+p,ra.calMatrixByOrigin(X,B));Z=te.multiply(E,Z),console.log(Z);U=U.slice(0);U[0]+=$.bbox[0]+d,U[1]+=$.bbox[1]+p,C=ra.calMatrixByOrigin(X,U),ev(S)||(C=iv(S,C)),e.addTexAndDrawWhenLimit(t,$,w=k*Y,Z,g,v,d,p,!0),$!==z&&(P+=(G||0)+cv(h,P+1,W||0))}else if(K)return}else P+=(G||0)+cv(h,P+1,W||0)}e.refresh(t,g,v),t.deleteFramebuffer(y);var q=e.findExistTexChannel(n.page);return-1===q?(q=e.lockOneChannel(),xe.bindTexture(t,n.page.texture,q)):e.lockChannel(q),i=Qt(uv(t,e,u,_),3),r=i[0],y=i[1],n=i[2],i=T?t.programClip:t.programMask,t.useProgram(i),xe.drawMask(t,x,q,i),t.deleteTexture(m),e.releaseLockChannel(x),e.releaseLockChannel(q),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,o,a),t.deleteFramebuffer(y),f=new Op(t,n,l,c,u,_,f),e.releaseLockChannel(r,f.page),f}(p,y,a,s,f,v,m,n,g),h||(s[Mg]=f)),h&&(U[i]=f)})),n&&(H=(j=Qt(uv(p,y,v,m),3))[0],G=j[1],W=j[2]);for(var X,V,K,z,j,$=0,Z=g.length;$<Z;$++){var q,J,Q,tt,et,rt,it,nt,ot,at,st,ht,lt=g[$],ct=lt[Wg],ut=lt[Xg],_t=lt[Vg],ft=ct.__config;ct instanceof Za?(ot=ft[bg],rt=ft[wg],nt=(J=ft[Fg].__config)[Sg],tt=J[Cg],ot&&ot.available?y.addTexAndDrawWhenLimit(p,ot,tt,nt,o,a,0,0,!0):rt&&(ht=Le.getCacheCanvas(v,m,"__$$OVERSIZE$$__"),ct.render(t,0,p,Vp,0,0),et=y.lockOneChannel(),Q=xe.createTexture(p,ht.canvas,et),st=new Op(p,Q,0,0,v,m,[0,0,v,m]),y.addTexAndDrawWhenLimit(p,st,tt,nt,o,a,0,0,!0),y.refresh(p,o,a,!0),ht.ctx.setTransform(1,0,0,1,0,0),ht.ctx.globalAlpha=1,ht.ctx.clearRect(0,0,v,m),st.release(),y.releaseLockChannel(et))):(q=ft[Cg],lt=ft[Sg],J=ft[wg],ot=ft[bg],rt=ft[Tg],Q=ft[Og],tt=ft[Mg],nt=ft[Ag],ht=ft[Lg],et=(st=ft[Ig])[rg],ft=st[ng],st=st[sg],"none"!==et?(nt=$p([tt,Q,nt,rt,ot]))?(n&&ov(st)?(y.refresh(p,o,a,!0),rt=(at=Qt(uv(p,y,v,m),3))[0],it=at[1],at=at[2],y.addTexAndDrawWhenLimit(p,nt,q,lt,o,a,0,0,!0),y.refresh(p,o,a,!0),H=(rt=Qt(pv(p,y,H,rt,G,W,nv(st),v,m),3))[0],G=rt[1],W=rt[2],p.deleteFramebuffer(it),p.deleteTexture(at)):y.addTexAndDrawWhenLimit(p,nt,q,lt,o,a,0,0,!0),nt!==ot&&($+=(ut||0)+cv(g,$+1,_t||0))):U.hasOwnProperty($)?(it=U[$],n&&ov(st)?(y.refresh(p,o,a,!0),nt=(at=Qt(uv(p,y,v,m),3))[0],ot=at[1],at=at[2],y.addTexAndDrawWhenLimit(p,it,q,lt,o,a,0,0,!0),y.refresh(p,o,a,!0),H=(st=Qt(pv(p,y,H,nt,G,W,nv(st),v,m),3))[0],G=st[1],W=st[2],p.deleteFramebuffer(ot),p.deleteTexture(at)):y.addTexAndDrawWhenLimit(p,it,q,lt,o,a,0,0,!0),$+=(ut||0)+cv(g,$+1,_t||0)):J&&"none"!==et&&"hidden"!==ft&&(ft=Le.getCacheCanvas(v,m,"__$$OVERSIZE$$__"),ct.render(t,ht,p,Vp,0,0),ct=y.lockOneChannel(),ht=xe.createTexture(p,ft.canvas,ct),ht=new Op(p,ht,0,0,v,m,[0,0,v,m]),y.addTexAndDrawWhenLimit(p,ht,q,lt,o,a,0,0,!0),y.refresh(p,o,a,!0),ft.ctx.setTransform(1,0,0,1,0,0),ft.ctx.globalAlpha=1,ft.ctx.clearRect(0,0,v,m),ht.release(),y.releaseLockChannel(ct)):$+=(ut||0)+cv(g,$+1,_t||0))}y.refresh(p,o,a,!0),n&&(p.bindFramebuffer(p.FRAMEBUFFER,null),y.releaseLockChannel(H),p.deleteFramebuffer(G),X=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,X),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),p.STATIC_DRAW),V=p.getAttribLocation(p.program,"a_position"),p.vertexAttribPointer(V,2,p.FLOAT,!1,0,0),p.enableVertexAttribArray(V),K=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,K),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),p.STATIC_DRAW),z=p.getAttribLocation(p.program,"a_texCoords"),p.vertexAttribPointer(z,2,p.FLOAT,!1,0,0),p.enableVertexAttribArray(z),e=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,e),p.bufferData(p.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),p.STATIC_DRAW),j=p.getAttribLocation(p.program,"a_opacity"),p.vertexAttribPointer(j,1,p.FLOAT,!1,0,0),p.enableVertexAttribArray(j),j=p.getUniformLocation(p.program,"u_texture"),p.uniform1i(j,H),p.drawArrays(p.TRIANGLES,0,6),p.deleteBuffer(X),p.deleteBuffer(K),p.deleteBuffer(e),p.disableVertexAttribArray(V),p.disableVertexAttribArray(z),p.deleteTexture(W))}},vv="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",mv=function(){function e(t){_(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return f(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,n,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length?arguments[8]:void 0,l=this.__pages,c=this.__list,u=e.page;-1<l.indexOf(u)||(l.length>=this.__units-this.__lockUnits&&this.refresh(t,n,o,h),l.push(u)),c.push([e,r,i,a,s])}},{key:"refresh",value:function(t,e,r,i){var n=this.__pages,o=this.__list;if(n.length){var a=this.channels,s=this.locks,h={};a.forEach(function(t,e){t&&(t=t.uuid,h[t]=e)});var l=this.__units,c=new Array(l),u=[];if(n.forEach(function(t){var e=t.uuid;h.hasOwnProperty(e)?(e=h[e],c[e]=t):u.push(t)}),u.length){for(var _=0;_<l&&(c[_]||a[_]||s[_]||(c[_]=u.shift(),u.length));_++);var f=u.length;if(f){for(var d=[],p=0;p<l;p++)c[p]||s[p]||d.push([p,a[p]]);d.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var g=0;g<f;g++)c[d[g][0]]=u[g]}}for(var v={},m=0,y=c.length;m<y;m++){var E,x=c[m];x&&(!(E=a[m])||E[0]!==x||x.update?(x instanceof Mp?xe.bindTexture(t,x.texture,m):(E&&t.deleteTexture(E.texture),x.texture=xe.createTexture(t,x.canvas,m)),v[(a[m]=x).uuid]=m):v[x.uuid]=m,x.update=!1,x.time=Le.now())}xe.drawTextureCache(t,o,v,e,r,i),n.splice(0),o.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i=this.__units,n=[],o=0;o<i;o++)e[o]||n.push([o,t[o]]);if(n.length){n.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});var a=n[0][0];return t[a]=null,e[a]=!0,this.__lockUnits++,a}throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),e}(),A=m.STYLE_KEY,yv=A.TOP,Jt=A.RIGHT,Ev=A.BOTTOM,Zt=A.LEFT,xv=A.POSITION,bv=A.DISPLAY,Tv=A.VISIBILITY,Av=A.COLOR,Mv=A.WIDTH,Ov=A.HEIGHT,Rv=A.Z_INDEX,Sv=A.MARGIN_TOP,Cv=A.MARGIN_LEFT,Iv=A.MARGIN_BOTTOM,kv=A.PADDING_TOP,wv=A.PADDING_LEFT,Lv=A.PADDING_BOTTOM,Dv=A.BORDER_TOP_WIDTH,Nv=A.BORDER_LEFT_WIDTH,Pv=A.BORDER_BOTTOM_WIDTH,Fv=A.POINTER_EVENTS,ft=m.UPDATE_KEY,Bv=ft.UPDATE_NODE,Yv=ft.UPDATE_STYLE,Hv=ft.UPDATE_KEYS,Gv=ft.UPDATE_COMPONENT,Wv=ft.UPDATE_FOCUS,Uv=ft.UPDATE_MEASURE,Xv=ft.UPDATE_OVERWRITE,Vv=ft.UPDATE_LIST,Kv=ft.UPDATE_CONFIG,zv=ft.UPDATE_ADD_DOM,jv=ft.UPDATE_REMOVE_DOM,sr=m.NODE_KEY,$v=sr.NODE_TAG_NAME,Zv=sr.NODE_CACHE_STYLE,qv=sr.NODE_CACHE_PROPS,Jv=sr.NODE_CURRENT_STYLE,Qv=sr.NODE_COMPUTED_STYLE,tm=sr.NODE_CURRENT_PROPS,em=sr.NODE_DOM_PARENT,rm=sr.NODE_IS_MASK,im=sr.NODE_REFRESH_LV,nm=sr.NODE_IS_DESTROYED,om=sr.NODE_STYLE,am=sr.NODE_UPDATE_HASH,sm=sr.NODE_UNIQUE_UPDATE_ID,hm=sr.NODE_CACHE,lm=sr.NODE_CACHE_TOTAL,cm=sr.NODE_CACHE_FILTER,um=sr.NODE_CACHE_OVERFLOW,_m=sr.NODE_CACHE_MASK,fm=sr.NODE_STRUCT,qt=m.STRUCT_KEY,dm=qt.STRUCT_INDEX,pm=qt.STRUCT_TOTAL,gm=qt.STRUCT_NODE,vm=(o(fr={},yv,!0),o(fr,Jt,!0),o(fr,Ev,!0),o(fr,Zt,!0),fr),mm=ue.isNil,ym=ue.isObject,Em=ue.isFunction,xm=S.AUTO,bm=S.PX,Tm=S.PERCENT,Am=S.INHERIT,Mm=mn.isRelativeOrAbsolute,Om=mn.equalStyle,Rm=ya.contain,Sm=ya.getLevel,Cm=ya.isRepaint,Im=ya.NONE,km=ya.FILTER,wm=ya.PERSPECTIVE,Lm=ya.REPAINT,Dm=ya.REFLOW,Nm=ya.REBUILD,Pm=Rr.isIgnore,Fm=Rr.isGeom,Bm=Rr.isMeasure,Ym={canvas:"canvas",svg:"svg",webgl:"canvas"};var Hm=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function Gm(t,e){return t.currentStyle[e][1]!==xm}function Wm(t,e){var r=Gm(t,Mv)&&Gm(t,Ov);if(r&&e){t=t.domParent;if(t&&("flex"===t.currentStyle[bv]||"flex"===t.computedStyle[bv]))return}return r}function Um(t){return t.hasOwnProperty("__uniqueReflowId")}var Xm=0;function Vm(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=Xm,e[Xm++]={node:t,component:r,addDom:i})}var Km=0;function zm(t,e,r,i,n,o,a,s,h){var l,c=r[Bv],u=r[Yv],_=r[Xv],f=r[Wv],d=r[Gv],p=r[Uv],g=r[Vv],v=r[Hv],m=r[Kv],y=r[zv],E=r[jv];if(!m[nm]){_&&Object.assign(m[om],_),g&&!d&&(v=(v||[]).slice(0),l={},v.forEach(function(t){l[t]=!0}),g.forEach(function(t){var e=t[Yv],r=t[Xv];(t[Hv]||[]).forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,v.push(t))}),r&&Object.assign(m[om],r),e&&(u?Object.assign(u,e):u=e)}));var x,b,T,A,M=m[$v],O=m[Zv],R=m[qv],S=m[Jv],r=m[Qv],C=m[tm],_=m[em],g=m[rm],I=f||Im,k=p;if(!d&&u&&v)for(var w=0,L=v.length;w<L;w++){var D=v[w],N=u[D];if(c instanceof w1&&Fm(M,D))Om(D,N,C[D],c)||(I|=Lm,R[D]=void 0,C[D]=N);else if(!Om(D,N,S[D],c))if(Pm(D))O[D]=void 0,S[D]=N;else{if(vm.hasOwnProperty(D)){var P=S[xv];if("relative"!==P&&"absolute"!==P){delete u[D];continue}}else D===bv&&(A=!0);I|=Sm(D),Bm(D)&&(k=!0),O[D]=void 0,S[D]=N,D===Rv&&c!==e&&(x=!0),D===Tv&&(b=!0),D===Av&&(T=!0)}}if(I!==Im||d){if("none"!==r[bv]||A){if(x&&_&&delete _.__zIndexChildren,b||T)for(var F=e.__structs,p=c.__config[fm],B=p[dm]+1,Y=B+p[pm];B<Y;B++){var H=F[B],G=H[gm],W=H[pm],U=G.__config,X=U[Jv],H=void 0;b&&(G instanceof Za||X[Tv][1]===Am)&&(H=!0),(H=T&&(G instanceof Za||X[Av][1]===Am)?!0:H)?(U[im]|=Lm,G instanceof bf&&G.clearCache()):B+=W||0}if(g){for(var V=c.prev;V&&V.isMask;)V=V.prev;V&&V.__config[_m]&&V.__config[_m].release()}var K=_;if(A&&K){g=K.__config;if("none"===g[Jv][bv]||"none"===g[Qv][bv])return void(r[bv]="none")}!d&&Cm(I)?(x&&t===rt.SVG&&(I|=Lm,_&&jm(_)),x&&!d&&s&&_&&!_.hasOwnProperty("__uniqueZId")&&(s[Km]=!0,_.__uniqueZId=Km++,h.push(_))):(i.push({node:c,style:u,component:d,addDom:y,removeDom:E}),k&&n.push(c)),m[im]|=I,e.__rlv=d||y||E?Nm:Math.max(e.__rlv,I);t=Lm<=I||t===rt.SVG&&c instanceof w1;for(t&&m[hm]&&m[hm].release(),(t||Rm(I,wm))&&(m[lm]&&m[lm].release(),m[_m]&&m[_m].release(),m[um]&&m[um].release()),(t||Rm(I,km))&&m[cm]&&m[cm].release();K;){var z=K.__config;if(z.hasOwnProperty(sm)){var j=z[sm];if(o.hasOwnProperty(j))break;o[j]=!0}else o[Km]=!0,z[sm]=Km++,a.push(z);j=z[im];Lm<=j&&z[hm]&&z[hm].release(),z[lm]&&z[lm].release(),z[cm]&&z[cm].release(),z[_m]&&z[_m].release(),z[um]&&z[um].release(),K=z[em]}return!0}}else delete m[sm]}}function jm(t,e){var r=t.__config;e?r[im]|=Lm:r[lm].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof Ms?t.shadowRoot:t)instanceof Za||jm(t,!0)})}var $m=0,Zm=function(){t(n,J0);var i=e(n);function n(t,e,r){return _(this,n),(e=i.call(this,t,e)).__cd=r||[],e.__dom=null,e.__mw=0,e.__mh=0,e.__taskUp=[],e.__taskCp=[],e.__ref={},e.__reflowList=[{node:a(e)}],e.__animateController=new Tp,ys.mix(a(e)),e.__config[am]=e.__updateHash={},e.__uuid=$m++,e.__rlv=Nm,e}return f(n,[{key:"__initProps",value:function(){var t=this.props.width;mm(t)||0<(e=parseFloat(t)||0)&&(this.__width=e);var e=this.props.height;mm(e)||0<(e=parseFloat(e)||0)&&(this.__height=e)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?ue.joinSourceArray(e):ue.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+ue.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,n,o,a,s,h,l;return-1===["touchend","touchcancel"].indexOf(t.type)&&(a=this.dom,e=this.__scx,r=this.__scy,i=(l=a.getBoundingClientRect()).x,n=l.y,s=l.left,h=l.top,o=l.width,a=l.height,s=(l=t.touches?t.touches[0]:t).clientX-(s=i||s||0),h=l.clientY-(h=n||h||0),mm(e)?s*=this.width/o:s/=e,mm(r)?h*=this.height/a:h/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:h,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){t=this.__wrapEvent(t);return this.__emitEvent(t),t}}},{key:"appendTo",value:function(t){t=function(t){if(ue.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=vs.initRoot(this.__cd,this),this.__initProps();var o,a,e,r=(this.__root=this).tagName,r=Ym[r];"undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===r?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(r),this.__dom||(t.innerHTML=this.__genHtml(r),this.__dom=t.querySelector(r))),this.__defs=this.dom.__defs||Wd.getInstance(this.__uuid),this.width&&this.height||(r=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(r.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(r.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=rt.CANVAS):"svg"===this.tagName?this.__renderMode=rt.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",de),this.__renderMode=rt.WEBGL,t.program=xe.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=xe.initShaders(t,vv,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=xe.initShaders(t,vv,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=xe.initShaders(t,vv,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=xe.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.useProgram(t.program),t=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new mv(t)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof n&&this.dom.__root.destroy(),this.__eventCbList=(o=this.dom,a=n,e=[],Hm.forEach(function(n){function t(t){var e=o.__root;if(e&&e instanceof a)if(-1<["touchend","touchcancel","touchmove"].indexOf(n)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}o.addEventListener(n,t),e.push([n,t])}),e),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,n=this.ctx,o=this.defs,a=this.width,s=this.height;if(!r){if(o.clear(),e)this.__checkRoot(i,a,s),this.__computeMeasure(i,n);else if(!this.__checkUpdate(i,n,a,s))return;Le.measureText(),this.__checkReflow(a,s),i!==rt.CANVAS||this.props.noRender?i!==rt.SVG||this.props.noRender?i!==rt.WEBGL||this.props.noRender||(this.__clear(n,i),gv.renderWebgl(i,n,this)):(gv.renderSvg(i,o,this,e),(e=this.virtualDom).defs=o.value,this.dom.__vd?lp(this.dom,this.dom.__vd,e):this.dom.innerHTML=ue.joinVirtualDom(e),this.dom.__vd=e,this.dom.__defs=o):(this.__clear(n,i),gv.renderCanvas(i,n,this)),Em(t)&&t(),this.emit(ys.REFRESH,this.__rlv),this.__rlv=Im}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var e,t=this.dom;t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null);t=this.ctx;this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t!==this.width||e!==this.height?(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r)):Em(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var i,n=this,e=this.taskUp;this.isDestroyed||(e.length||(Js.nextFrame({__before:function(r){n.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){ym(t)&&Em(t.__before)&&t.__before(r)})},__after:function(e){n.isDestroyed||i.forEach(function(t){ym(t)&&Em(t.__after)?t.__after(e):Em(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,i=this,n=this.taskCp;this.isDestroyed||(n.length||(Js.__nextFrameCp({__before:function(e){i.isDestroyed||(r=n.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),tp.check(i),tp.updateList.length&&tp.updateList.forEach(function(t){var e=t.shadowRoot;e instanceof Za&&(e=e.domParent);var r={};r[Bv]=e,r[Yv]=e.currentStyle,r[Wv]=Dm,r[Uv]=!0,r[Gv]=t,r[Kv]=e.__config,i.__addUpdate(e,e.__config,i,i.__config,r)}))},__after:function(e){i.isDestroyed||(r.forEach(function(t){t.__after(e)}),tp.did())}}),this.__frameHook()),-1===n.indexOf(t)&&n.push(t))}},{key:"getTargetAtPoint",value:function(t,e,x){return function t(e,r,i,n,o){var a=e.__sx1,s=e.__sy1,h=e.offsetWidth,l=e.offsetHeight,c=e.matrixEvent,u=e.children,_=e.zIndexChildren,f=e.computedStyle,d=f[bv],f=f[Fv];if(x||"none"!==d){if(Array.isArray(_)){for(var p=0,g=u.length;p<g;p++)u[p].__index__=p;for(var v=_.length-1;0<=v;v--){var m=_[v];if(!(m instanceof karas.Text)){var y=n.slice();y.push(m.__index__);var E=o.slice();if(E.push(v),E=t(m,r,i,y,E))return E}}}if(x||"none"!==f)return et.pointInQuadrilateral(r,i,a,s,a+h,s,a+h,s+l,a,s+l,c)?{target:e,path:n,zPath:o}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,n=this.currentStyle,o=this.computedStyle;-1===["flex","block"].indexOf(n[bv])&&(o[bv]=n[bv]="block"),"absolute"===n[xv]&&(o[xv]=n[xv]="static"),n[Mv]=[e,bm],n[Ov]=[r,bm],o[Mv]=e,o[Ov]=r,t===rt.CANVAS||t===rt.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===rt.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,n){i=i[am];t===r?(i=r.__updateRoot)?(n[Wv]&&(i[Wv]|=n[Wv]),n[Uv]&&(i[Uv]=!0),n[Yv]&&(i[Vv]=i[Vv]||[]).push((o(t={},Yv,n[Yv]),o(t,Xv,n[Xv]),o(t,Hv,n[Hv]),t))):r.__updateRoot=n:e.hasOwnProperty(sm)?i.hasOwnProperty(e[sm])?(r=i[e[sm]],n[Wv]&&(r[Wv]|=n[Wv]),n[Uv]&&(r[Uv]=!0),n[Yv]&&(r[Vv]=r[Vv]||[]).push((o(r={},Yv,n[Yv]),o(r,Xv,n[Xv]),o(r,Hv,n[Hv]),r))):Le.error("Update process miss uniqueUpdateId"):(e[sm]=Km,i[Km++]=n)}},{key:"__checkUpdate",value:function(h,l,t,e){var c=this,r=[],i=[],n={},o=[],a={},s=[],u=c.__updateRoot,_=c.__updateHash;u&&(c.__updateRoot=null,(v=zm(h,c,u,i,r,n,o))&&c.__checkRoot(h,t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var g=zm(h,c,_[f[d]],i,r,n,o,a,s),v=v||g;c.__reflowList=i,Km=0,c.__updateHash=c.__config[am]={},o.forEach(function(t){delete t[sm]}),s.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(c.__structs))});var m={};r.forEach(function(t){var e=t.__config,r=e[sm],i=e[em];if(t!==c){if(m.hasOwnProperty(r))return;m[r]=!0}var n=t;if(t!==c&&(_[r][zv]||Rr.isMeasureInherit(_[r][Yv])))for(;i&&i!==c;){var o=i,a=o.__config[sm],s=o.currentStyle;if(!(i.__config.hasOwnProperty(sm)?(o=_[a][Yv],m[a]=!0,!!Rr.measureInheritList(o).length):Rr.isMeasureInherit(s)))break;i=(n=i).domParent}n.__computeMeasure(h,l,function(t){t.__config.hasOwnProperty(sm)&&(m[t.__config[sm]]=!0)})});for(var y=0,E=f.length;y<E;y++)delete _[f[y]][Kv][sm];return v}},{key:"__checkReflow",value:function(t,e){var C=this,r=this.__reflowList;if(r.length){for(var i,Q=this,n=[],tt={},o=Xm=0,a=r.length;o<a;o++){var s=r[o],h=s.node,l=s.component,c=s.addDom,u=s.removeDom;if(h===this){i=!0;break}if((h=c&&h instanceof Ms?h.shadowRoot:h).hasOwnProperty("__uniqueReflowId")||(h.__uniqueReflowId=Xm,tt[Xm++]=s),function(t,e,r,i,n){if(!n||"absolute"!==r.currentStyle[xv]){var o=r;if(-1<["inline","inlineBlock","inline-block"].indexOf(o.currentStyle[bv])||-1<["inline","inlineBlock","inline-block"].indexOf(o.computedStyle[bv])){do{if((o=o.domParent)===t)return 1;if(Um(o))return;if("absolute"===o.currentStyle[xv]||"absolute"===o.computedStyle[xv])return void Vm(o,e,i,n)}while(o&&(-1<["inline","inlineBlock","inline-block"].indexOf(o.currentStyle[bv])||-1<["inline","inlineBlock","inline-block"].indexOf(o.computedStyle[bv])));if(Wm(o,!0))return void Vm(o,e,i,n)}var a,s=o.domParent;if(!Um(s)){do{if(Um(s))return}while(("flex"!==s.computedStyle[bv]&&"flex"!==s.currentStyle[bv]||(a=s),"absolute"!==s.currentStyle[xv]&&"absolute"!==s.computedStyle[xv])&&(!Wm(s,!0)&&(s=s.domParent)));if((o=a?a:o)===t)return 1;for(s=o;s;){if("absolute"===s.currentStyle[xv]||"absolute"===s.computedStyle[xv]){if(s===t)break;if(Wm(s))break;return void Vm(s,e,i,n)}s=s.domParent}if(o!==r)Vm(o,e,i,n);else if(n){var h=!0,l=r.prev,c=r.next;if(!(h=l&&-1<["inline","inline-block","inlineBlock"].indexOf(l.currentStyle[bv])||c&&-1<["inline","inline-block","inlineBlock"].indexOf(c.currentStyle[bv])?!1:h)){if((o=r.domParent)===t)return 1;Vm(o,e,!1,!0)}}}}}(Q,tt,h,l,c)){i=!0,c&&(this.__zIndexChildren=null);break}u&&n.push(s)}if(Xm=0,this.__reflowList=[],i)return Wf.clearUniqueReflowId(tt),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){t=tt[t.__uniqueReflowId];return e.uniqueList.push(t),!0}},{uniqueList:n});var I=[],k=0,w=[],L=0;n.forEach(function(t){var e=t.node,r=t.component,i=t.addDom,n=t.removeDom,o=e.computedStyle,a=e.currentStyle,s=o[Rv],h=o[xv],l=o[bv],c="absolute"===h,u="absolute"===a[xv],_="none"===l,f="none"===a[bv];if(!_||!f){for(var d,p=e.domParent,g=p.__layoutData,t=g.x,v=g.y,o=g.h,l=p.width,m=p.computedStyle,g=e,y=(g=g.isShadowRoot?g.hostRoot:g).prev;y;){if(y instanceof Za||"absolute"!==y.computedStyle[xv]&&"none"!==y.computedStyle[bv]){v=y.y+y.outerHeight,d=!0;break}y=y.prev}n||(d||(v+=m[Sv]+m[Dv]+m[kv]),t+=m[Cv]+m[Nv]+m[wv]);var E,x=e;if(!n)if(u){for(x=x.domParent;x&&x!==Q&&!Mm(x);)if(x.parent)x=x.parent;else if(x.host)break;if(p.__layoutAbs(x=x||Q,null,e),i){g=p.__modifyStruct(Q,k);return k+=g[1],I.push(g),p.__updateStruct(Q.__structs),void(C.renderMode===rt.SVG&&jm(p))}if(c)return void(r?(E=e.__modifyStruct(Q,k),k+=E[1],I.push(E),(h===a[xv]||"static"!==h&&"static"!==a[xv])&&s===a[Rv]||(p.__updateStruct(Q.__structs),C.renderMode===rt.SVG&&jm(p))):(_||f)&&(e.__zIndexChildren=null,E=e.__modifyStruct(Q,k),k+=E[1],I.push(E)));p.__updateStruct(Q.__structs),C.renderMode===rt.SVG&&jm(p)}else{if(e.__layout({x:t,y:v,w:l,h:o}),v+=e.outerHeight,r)x=e;else for(x=x.domParent;x&&x!==Q&&!Mm(x);)if(x.parent)x=x.parent;else if(x.host)break;x=x||Q,e instanceof J0&&e.__layoutAbs(x,{x:t,y:v,w:l,h:o})}for(var b=e;b&&b!==Q;)if("relative"===(m=(b=b.domParent).computedStyle)[xv]){var T=b,A=T.ox,T=T.oy;A&&e.__offsetX(A),T&&e.__offsetY(T);break}for(var M=(e=e.isShadowRoot?e.hostRoot:e).next;M&&!M.hasOwnProperty("__uniqueReflowId");){if("absolute"!==M.computedStyle[xv]){var O=v-M.y;if(O)for(;M&&!M.hasOwnProperty("__uniqueReflowId");){var R=M,S=(R=R instanceof Ms?R.shadowRoot:R).computedStyle;"absolute"!==S[xv]&&"none"!==S[bv]&&R.__offsetY(O,!0,Lm),M=M.next}break}M=M.next}p.hasOwnProperty("__uniqueMergeOffsetId")||u&&_||(p.__uniqueMergeOffsetId=L++,w.push(p)),i||n?(n=p.__modifyStruct(Q,k),k+=n[1],I.push(n),C.renderMode===rt.SVG&&jm(p)):r?(r=e.__modifyStruct(Q,k),k+=r[1],I.push(r),(h===a[xv]||"static"!==h&&"static"!==a[xv])&&s===a[Rv]||(e.domParent.__updateStruct(Q.__structs),C.renderMode===rt.SVG&&jm(e.domParent))):(_||f)&&(e.__zIndexChildren=null,f=e.__modifyStruct(Q,k),k+=f[1],I.push(f))}});var et=[];w.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var e,r,i=t.flowChildren,n=t.absChildren,o=[],a=[],s=i.length,h=0;h<s;h++){var l=i[h],c=(l=l instanceof Ms?l.shadowRoot:l)instanceof bf;!e&&c&&l.hasOwnProperty("__uniqueReflowId")&&(e=!0,r=h);var u=c&&l.currentStyle,_=c&&"inline"===u[bv],f=c&&-1<["inlineBlock","inline-block"].indexOf(u[bv]),d=l;if(!c||_||f){if(o.length&&a.length&&e){var p=Wf.getMergeMarginTB(a,o);if(p)for(var g=Math.max(r,h-o.length+1);g<s;g++)i[g].__offsetY(p,!0,Lm)}a=[],o=[]}if(c&&!_){var v,m,y,E=c&&"none"===u[bv],x=void 0;if(!E&&l.flowChildren&&0===l.flowChildren.length&&(v=(y=l.computedStyle)[Sv],m=y[Iv],f=y[kv],_=y[Lv],c=y[Ov],u=y[Dv],y=y[Pv],f<=0&&_<=0&&c<=0&&u<=0&&y<=0&&(o.push(m),a.push(v),x=!0)),E||x){if(h===s-1){var b=Wf.getMergeMarginTB(a,o);if(b)for(var T=Math.max(r,h-o.length+1);T<s;T++)i[T].__offsetY(b,!0,Lm)}}else{x=l.computedStyle,l=x[Sv],x=x[Iv];if(o.length&&(a.push(l),e)){var A=Wf.getMergeMarginTB(a,o);if(A)for(var M=Math.max(r,h-o.length+1);M<s;M++)i[M].__offsetY(A,!0,Lm)}a=[],o=[x]}}}var O=t.currentStyle,R=O[Ov],S=t===Q||t.isShadowRoot||"absolute"===O[xv]||"relative"===O[xv];if(R[1]===xm&&d){var C,R=t.height+t.computedStyle[kv],I=d.y+d.outerHeight-t.y-R;if(I){t.__resizeY(I,Lm);for(var k=0,w=n.length;k<w;k++){var L=n[k],D=L.currentStyle,N=D[yv],P=D[Ev],D=D[Ov];if(N[1]===xm)if(P[1]===xm)for(var F=L.prev;F;){var B=F,Y=(B=B instanceof Ms?B.shadowRoot:B)instanceof bf,H=Y&&B.currentStyle;if(!(Y&&"absolute"===H[xv])){B=B.y+B.outerHeight-L.y;B&&L.__offsetY(B,!0,Lm);break}F=F.prev}else P[1]===bm?L.__offsetY(I,!0,Lm):P[1]===Tm&&(G=(1-.01*P[0])*I,L.__offsetY(G,!0,Lm));else if(N[1]===Tm)if(S){var G=.01*N[0]*I;L.__offsetY(G,!0,Lm)}else{if(!C)for(C=t.domParent;C&&C!==Q&&!C.isShadowRoot;){var W=C.currentStyle;if("absolute"===W[xv]||"relative"===W[xv])break;C=C.domParent}C.currentStyle[Ov][1]!==bm&&(N=.01*N[0]*I,L.__offsetY(N,!0,Lm))}if(D[1]===Tm)if(S)t.__layoutAbs(t,null,L);else{if(!C)for(C=t.domParent;C&&C!==Q&&!C.isShadowRoot;){var U=C.currentStyle;if("absolute"===U[xv]||"relative"===U[xv])break;C=C.domParent}et.push([t,C,L])}}return void Wf.offsetAndResizeByNodeOnY(t,Q,tt,I,et)}}for(var X=0,V=n.length;X<V;X++){var K=n[X],z=K.currentStyle,j=z[yv],z=z[Ev];if(j[1]===xm&&z[1]===xm)for(var $=K.prev;$;){var Z=$,q=(Z=Z instanceof Ms?Z.shadowRoot:Z)instanceof bf,J=q&&Z.currentStyle;if(!(q&&"absolute"===J[xv])){Z=Z.y+Z.outerHeight-K.y;Z&&K.__offsetY(Z,!0,Lm);break}$=$.prev}}}),et.forEach(function(t){t[0].__layoutAbs(t[1],null,t[2])});var _=0,f=0,d=!0,p=Q.__structs;if(I.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];if(d)d=!1,f=t[dm]+(t[pm]||0)+1,_+=e;else{for(var r=t[dm]+(t[pm]||0)+1+_,i=f;i<r;i++)p[i][dm]+=_;f=r,_+=e}}),_)for(var g=f,v=p.length;g<v;g++)p[g][dm]+=_;Wf.clearUniqueReflowId(tt)}}},{key:"__computeMeasure",value:function(e,r){mn.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},Js.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===rt.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===rt.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),n}(),$t=m.STYLE_KEY,qm=$t.STROKE_WIDTH,Jm=$t.BOX_SHADOW,Qm=$t.FONT_SIZE,ty=ue.isNil,ey=S.REM,ry=S.VW,iy=S.VH;function ny(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function oy(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function ay(t){return t<0?t=0:1<t&&(t=1),t}function sy(t,e,r,i,n,o,a,s,h){var l,c,u,_,s=7<arguments.length&&void 0!==s?s:0,h=8<arguments.length&&void 0!==h?h:1;return(0<s||h<1)&&(3===a?(c=Qt(et.sliceBezier2Both([[t,e],n,o,[r,i]],s,h),4),t=(l=Qt(c[0],2))[0],e=l[1],n=c[1],o=c[2],r=(l=Qt(c[3],2))[0],i=l[1]):2===a?(c=Qt(et.sliceBezier2Both([[t,e],o,[r,i]],s,h),3),t=(l=Qt(c[0],2))[0],e=l[1],o=c[1],r=(c=Qt(c[2],2))[0],i=c[1]):1===a?(u=Qt(et.sliceBezier2Both([[t,e],n,[r,i]],s,h),3),t=(_=Qt(u[0],2))[0],e=_[1],n=u[1],r=(_=Qt(u[2],2))[0],i=_[1]):(t+=(u=Math.abs(t-r))*s,e+=(_=Math.abs(e-i))*s,r-=u*(1-h),i-=_*(1-h))),[t,e,r,i,n,o]}var Y=function(){t(M,w1);var s=e(M);function M(t,e){var r,i,n;if(_(this,M),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):ty(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):ty(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):ty(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):ty(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return ay(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else ty(e.start)||(i=ay(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return ay(t=isNaN(t)?1:t)});for(var a=r.__end.length;a<r.__x1.length;a++)r.__end.push(1)}else ty(e.end)||(n=parseFloat(e.end),n=ay(n=isNaN(n)?1:n),r.__end=r.__x1.map(function(){return n}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],ty(e.x1)||(r.__x1=parseFloat(e.x1)||0),ty(e.y1)||(r.__y1=parseFloat(e.y1)||0),ty(e.x2)||(r.__x2=parseFloat(e.x2)||0),ty(e.y2)||(r.__y2=parseFloat(e.y2)||0),ty(e.start)||(r.__start=ay(parseFloat(e.start)||0)),ty(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=ay(t)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return f(M,[{key:"buildCache",value:function(e,r,i){var n,o=this,a=this.width,s=this.height,h=this.__cacheProps,l=this.isMulti;return["x1","x2"].forEach(function(t){(ty(h[t])||i)&&(n=!0,h[t]=ny(o[t],e,a,l))}),["y1","y2"].forEach(function(t){(ty(h[t])||i)&&(n=!0,h[t]=ny(o[t],r,s,l))}),["controlA","controlB"].forEach(function(t){(ty(h[t])||i)&&(n=!0,h[t]=function e(t,r,i,n,o,a){if(a){if(t)return t.map(function(t){return e(t,r,i,n,o)})}else if(t&&2<=t.length)return[r+t[0]*n,i+t[1]*o];return[]}(o[t],e,r,a,s,l))}),["start","end"].forEach(function(t){(ty(h[t])||i)&&(n=!0,h[t]=o[t])}),n}},{key:"render",value:function(l,t,c,e,r,i){var u=this,n=P(N(M.prototype),"render",this).call(this,l,t,c,e,r,i);if(n.break)return n;c=n.ctx;var _,o,a,s,h=n.sx3,f=n.sy3,d=n.stroke,p=n.strokeWidth,g=n.strokeDasharray,v=n.strokeDasharrayStr,m=n.strokeLinecap,y=n.strokeLinejoin,E=n.strokeMiterlimit,x=n.dx,b=n.dy,T=this.__cacheProps,A=this.isMulti;return this.buildCache(h,f)&&l===rt.SVG&&(_="",A?T.x1.forEach(function(t,e){var r=T.x2[e],i=T.y1[e],n=T.y2[e],o=T.controlA[e],a=T.controlB[e],s=T.start[e],h=T.end[e],e=oy(o,a);0===s&&1===h||(t=(h=Qt(sy(t,i,r,i,o,a,e,s,h,T.len),6))[0],i=h[1],r=h[2],i=h[3],o=h[4],a=h[5]),_+=Tt.svgLine(t,i,r,n,o,a,e)}):(o=oy(T.controlA,T.controlB),a=T.x1,s=T.y1,t=T.x2,e=T.y2,r=T.controlA,i=T.controlB,h=T.start,f=T.end,0===h&&1===f||(a=(f=Qt(sy(a,s,t,e,r,i,o,h,f,T.len),6))[0],s=f[1],t=f[2],e=f[3],r=f[4],i=f[5]),_=Tt.svgLine(a,s,t,e,r,i,o)),T.d=_),l===rt.CANVAS||l===rt.WEBGL?d.forEach(function(t,e){var r,i,n,o,a,s=p[e],h=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(u.__preSetCanvas(l,c,{stroke:t,strokeWidth:s,strokeDasharray:g[e],strokeLinecap:m[e],strokeLinejoin:y[e],strokeMiterlimit:E[e]}),h&&(c.strokeStyle=t.v[0]),c.beginPath(),A?T.x1.forEach(function(t,e){var r=T.x2[e],i=T.y1[e],n=T.y2[e],o=T.controlA[e],a=T.controlB[e],s=T.start[e],h=T.end[e],e=oy(o,a);0===s&&1===h||(t=(h=Qt(sy(t,i,r,i,o,a,e,s,h,T.len),6))[0],i=h[1],r=h[2],i=h[3],o=h[4],a=h[5]),Tt.canvasLine(c,t,i,r,n,o,a,e,x,b)}):(r=oy(T.controlA,T.controlB),i=T.x1,n=T.y1,o=T.x2,a=T.y2,s=T.controlA,e=T.controlB,h=T.start,t=T.end,0===h&&1===t||(i=(t=Qt(sy(i,n,o,a,s,e,r,h,t,T.len),6))[0],n=t[1],o=t[2],a=t[3],s=t[4],e=t[5]),Tt.canvasLine(c,i,n,o,a,s,e,r,x,b)),c.stroke(),c.closePath())}):l===rt.SVG&&d.forEach(function(t,e){var r=p[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),r=[["d",T.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];u.__propsStrokeStyle(r,v[e],m[e],y[e],E[e]),u.addGeom("path",r)}),n}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.root,i=this.__sx3,n=this.__sy3,o=this.currentStyle,a=o[qm],o=o[Jm];this.buildCache(i,n);var n=e.x1,s=e.y1,h=e.x2,l=e.y2,c=e.controlA,u=e.controlB,_=P(N(M.prototype),"bbox",this),f=0;a.forEach(function(t){f=t[1]===ey?Math.max(t[0]*r.computedStyle[Qm]*.5,f):t[1]===ry?Math.max(t[0]*r.width*.01*.5,f):t[1]===iy?Math.max(t[0]*r.height*.01*.5,f):Math.max(.5*t[0],f)}),f+=1;var o=Qt(this.__spreadBbox(o),2),d=o[0],p=o[1];return d+=f,p+=f,t||(n=[n],h=[h],s=[s],l=[l],c=[c],u=[u]),n.forEach(function(t,e){var r,i=s[e],n=h[e],o=l[e],a=c[e],e=u[e];(ty(a)||a.length<2)&&(ty(e)||e.length<2)?(_[0]=Math.min(_[0],t-d),_[0]=Math.min(_[0],n-d),_[1]=Math.min(_[1],i-p),_[1]=Math.min(_[1],o-p),_[2]=Math.max(_[2],t+d),_[2]=Math.max(_[2],n+d),_[3]=Math.max(_[3],i+p),_[3]=Math.max(_[3],o+p)):ty(a)||a.length<2?(r=et.bboxBezier(t,i,e[0],e[1],n,o),_[0]=Math.min(_[0],r[0]-d),_[0]=Math.min(_[0],r[2]-d),_[1]=Math.min(_[1],r[1]-p),_[1]=Math.min(_[1],r[3]-p),_[2]=Math.max(_[2],r[0]+d),_[2]=Math.max(_[2],r[2]+d),_[3]=Math.max(_[3],r[1]+p),_[3]=Math.max(_[3],r[3]+p)):ty(e)||e.length<2?(r=et.bboxBezier(t,i,a[0],a[1],n,o),_[0]=Math.min(_[0],r[0]-d),_[0]=Math.min(_[0],r[2]-d),_[1]=Math.min(_[1],r[1]-p),_[1]=Math.min(_[1],r[3]-p),_[2]=Math.max(_[2],r[0]+d),_[2]=Math.max(_[2],r[2]+d),_[3]=Math.max(_[3],r[1]+p),_[3]=Math.max(_[3],r[3]+p)):(o=et.bboxBezier(t,i,a[0],a[1],e[0],e[1],n,o),_[0]=Math.min(_[0],o[0]-d),_[0]=Math.min(_[0],o[2]-d),_[1]=Math.min(_[1],o[1]-p),_[1]=Math.min(_[1],o[3]-p),_[2]=Math.max(_[2],o[0]+d),_[2]=Math.max(_[2],o[2]+d),_[3]=Math.max(_[3],o[1]+p),_[3]=Math.max(_[3],o[3]+p))}),_}}]),M}(),A=m.STYLE_KEY,hy=A.STROKE_WIDTH,ly=A.BOX_SHADOW,cy=A.FONT_SIZE,uy=ue.isNil,_y=S.REM,fy=S.VW,dy=S.VH;function py(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function gy(t){return t<0?t=0:1<t&&(t=1),t}function vy(t,e){var r=[],i=0,n=[];if(e)i=[],t.forEach(function(t){t=vy(t);r.push(t.list),i.push(t.total),n.push([0].concat(t.increase))});else if(Array.isArray(t)){i=0,n.push(0);for(var o=0,a=0,s=t.length;a<s;a++){var h=t[a];if(Array.isArray(h)){o=a;break}}for(var l=t[o],c=o+1,u=t.length;c<u;c++){var _,f,d,p=t[c];Array.isArray(p)&&(2===p.length?(_=Math.abs(p[0]-l[0]),f=Math.abs(p[1]-l[1]),f=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(f),i+=f,n.push(i),l=p):4===p.length?(d=et.bezierLength([l,[p[0],p[1]],[p[2],p[3]]],2),r.push(d),i+=d,n.push(i),l=[p[2],p[3]]):6===p.length&&(d=et.bezierLength([l,[p[0],p[1]],[p[2],p[3]],[p[4],p[5]]],3),r.push(d),i+=d,n.push(i),l=[p[4],p[5]]))}}return{list:r,total:i,increase:n}}function my(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var n=r+(i-r>>1);return t[n]===e?n:t[n]>e?my(t,e,r,Math.max(n-1,r)):my(t,e,Math.min(n+1,i),i)}function yy(t,e,r,i){var n=2<arguments.length&&void 0!==r?r:0,o=3<arguments.length&&void 0!==i?i:1;if(0===n&&1===o)return t;if(o<=n)return[];var a=0,s=t.length-1;0<n&&(a=my(e.increase,n*e.total,a,s)),o<1&&(s=my(e.increase,o*e.total,a,s)),t=ue.clone(t);var h,l,c,u,_,f=1;return(o*=e.total)>e.increase[s]&&(r=t[s].slice(t[s].length-2),l=t[s+1],i=e.list[s],f=c=(o-e.increase[s])/i,2===l.length?(i=Math.abs(l[0]-r[0]),h=Math.abs(l[1]-r[1]),l[0]<r[0]&&(i=-i),l[1]<r[1]&&(h=-h),t[s+1]=[l[1]-(1-c)*i,l[1]-(1-c)*h]):4===l.length?(h=et.sliceBezier([r,[l[0],l[1]],[l[2],l[3]]],c),t[s+1]=[h[1][0],h[1][1],h[2][0],h[2][1]]):6===l.length&&(u=et.sliceBezier([r,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],c),t[s+1]=[u[1][0],u[1][1],u[2][0],u[2][1],u[3][0],u[3][1]])),(n*=e.total)>e.increase[a]&&(l=t[a].slice(t[a].length-2),c=t[a+1],u=e.list[a],a===s&&1!==f&&(u*=f),e=(n-e.increase[a])/u,2===c.length?(u=Math.abs(c[0]-l[0]),_=Math.abs(c[1]-l[1]),c[0]<l[0]&&(u=-u),c[1]<l[1]&&(_=-_),t[a]=[l[0]+e*u,l[1]+e*_]):4===c.length?(_=et.sliceBezier([[c[2],c[3]],[c[0],c[1]],l],1-e).reverse(),t[a]=_[0],t[a+1]=[_[1][0],_[1][1],_[2][0],_[2][1]]):6===c.length&&(e=et.sliceBezier([[c[4],c[5]],[c[2],c[3]],[c[0],c[1]],l],1-e).reverse(),t[a]=e[0],t[a+1]=[e[1][0],e[1][1],e[2][0],e[2][1],c[4],c[5]])),s<t.length-2&&(t=t.slice(0,s+2)),t=0<a?t.slice(a):t}var Ey=function(){t(h,w1);var s=e(h);function h(t,e){var r,i,n;if(_(this,h),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return gy(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else uy(e.start)||(i=gy(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return gy(t=isNaN(t)?1:t)});for(var a=r.__end.length;a<r.__points.length;a++)r.__end.push(1)}else uy(e.end)||(n=parseFloat(e.end),n=gy(n=isNaN(n)?1:n),r.__end=r.__points.map(function(){return n}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,uy(e.start)||(r.__start=gy(parseFloat(e.start)||0)),uy(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=gy(t));return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return f(h,[{key:"__getPoints",value:function(o,a,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var i=[],n=0;n<r;n++)n%2==0?i.push(o+t[n]*s):i.push(a+t[n]*h);return i}})}},{key:"buildCache",value:function(e,r){var t,i,n,o=this,a=this.width,s=this.height,h=this.points,l=this.controls,c=this.start,u=this.end,_=this.__cacheProps,f=this.isMulti;return uy(_.points)&&(t=!0,_.points=f?h.map(function(t){if(Array.isArray(t))return o.__getPoints(e,r,a,s,t)}):this.__getPoints(e,r,a,s,h)),uy(_.controls)&&(t=!0,_.controls=f?l.map(function(t){return Array.isArray(t)?o.__getPoints(e,r,a,s,t,!0):t}):this.__getPoints(e,r,a,s,l,!0)),uy(_.start)&&(i=!0,_.start=c),uy(_.end)&&(i=!0,_.end=u),t&&(u=_.points,n=_.controls,_.list2=f?u.filter(function(t){return Array.isArray(t)}).map(function(t,e){var r=n[e];if(Array.isArray(t))return t.map(function(t,e){return e?py(t,r&&r[e-1]):t})}):u.filter(function(t){return Array.isArray(t)}).map(function(t,e){return e?py(t,n[e-1]):t}),_.len=vy(_.list2,f)),(t||i)&&(_.list=f?_.list2.map(function(t,e){if(Array.isArray(t)){var r=_.len;return yy(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},_.start[e],_.end[e])}}):yy(_.list2,_.len,_.start,_.end)),t||i}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(h.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.sx3,o.sy3),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t,e,r,i,n,o,u,a,_,f,s,d;return this.__bbox||(t=this.isMulti,e=this.__cacheProps,r=this.root,i=this.__sx3,n=this.__sy3,o=(s=this.currentStyle)[hy],s=s[ly],this.buildCache(i,n),u=P(N(h.prototype),"bbox",this),a=0,o.forEach(function(t){a=t[1]===_y?Math.max(t[0]*r.computedStyle[cy]*.5,a):t[1]===fy?Math.max(t[0]*r.width*.01*.5,a):t[1]===dy?Math.max(t[0]*r.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=Qt(this.__spreadBbox(s),2),_=s[0],f=s[1],_+=a,f+=a,s=e.points,d=e.controls,t||(s=[s],d=[d]),s.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=d[e]||[],e=Qt(t[0],2),i=e[0],n=e[1],o=1,a=t.length;o<a;o++){var s=Qt(t[o],2),h=s[0],l=s[1],c=r[o-1];c&&4===c.length?(s=et.bboxBezier(i,n,c[0],c[1],c[2],c[3],h,l),u[0]=Math.min(u[0],s[0]-_),u[1]=Math.min(u[1],s[1]-f),u[2]=Math.max(u[2],s[2]+_),u[3]=Math.max(u[3],s[3]+f)):c&&2===c.length?(c=et.bboxBezier(i,n,c[0],c[1],h,l),u[0]=Math.min(u[0],c[0]-_),u[1]=Math.min(u[1],c[1]-f),u[2]=Math.max(u[2],c[2]+_),u[3]=Math.max(u[3],c[3]+f)):(u[0]=Math.min(u[0],i-_),u[1]=Math.min(u[1],n-f),u[2]=Math.max(u[2],i+_),u[3]=Math.max(u[3],n+f)),i=h,n=l}}),this.__bbox=u),this.__bbox}}]),h}(),ft=function(){t(a,Ey);var r=e(a);function a(t,e){return _(this,a),r.call(this,t,e)}return f(a,[{key:"__getPoints",value:function(t,e,r,i,n,o){n=P(N(a.prototype),"__getPoints",this).call(this,t,e,r,i,n,o);return o||n.push(n[0]),n}}]),a}(),sr=m.STYLE_KEY,xy=sr.STROKE_WIDTH,by=sr.BOX_SHADOW,Ty=sr.FONT_SIZE,Ay=ue.isNil,My=et.sectorPoints,Oy=S.REM,Ry=S.VW,Sy=S.VH;function Cy(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var qt=function(){t(O,w1);var r=e(O);function O(t,e){return _(this,O),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return Cy(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return Cy(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return Cy(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,Ay(e.begin)||(t.__begin=Cy(e.begin,0)),Ay(e.end)||(t.__end=Cy(e.end,0)),Ay(e.r)||(t.__r=Cy(e.r,1)),Ay(e.edge)||(t.__edge=!!e.edge),Ay(e.closure)||(t.__closure=!!e.closure)),t}return f(O,[{key:"buildCache",value:function(i,n,t){var e,o=this.width,r=this.begin,a=this.end,s=this.r,h=this.edge,l=this.closure,c=this.__cacheProps,u=this.isMulti;return(Ay(c.begin)||t)&&(e=!0,c.begin=(r||0)%360),(Ay(c.end)||t)&&(e=!0,c.end=(a||0)%360),(Ay(c.r)||t)&&(e=!0,c.r=u?s.map(function(t){return t*o*.5}):s*o*.5),s=c.r,(Ay(c.edge)||t)&&(e=!0,c.edge=h),(Ay(c.closure)||t)&&(e=!0,c.closure=l),e&&(u?(c.list=[],c.sList=[],r.forEach(function(t,e){var r=Ay(s[e])?.5*o:s[e],r=My(i,n,r,parseFloat(t||0)%360,parseFloat(a[e]||0)%360),t=r.slice(0);l[e]?(r.push(r[0].slice(0)),h&&t.push(t[0].slice(0))):(r.unshift([i,n]),r.push([i,n]),h&&(t.unshift([i,n]),t.push([i,n]))),c.list.push(r),c.sList.push(t)})):(r=(u=My(i,n,s,parseFloat(r||0),parseFloat(a||0))).slice(0),l?(u.push(u[0].slice(0)),h&&r.push(r[0].slice(0))):(u.unshift([i,n]),u.push([i,n]),h&&(r.unshift([i,n]),r.push([i,n]))),c.list=u,c.sList=r)),e}},{key:"render",value:function(t,e,r,i,n,o){n=P(N(O.prototype),"render",this).call(this,t,e,r,i,n,o);if(n.break)return n;this.buildCache(n.cx,n.cy),r=n.ctx;var a=n.fill,s=n.fillRule,h=n.stroke,l=n.strokeWidth,c=n.strokeDasharray,u=n.strokeDasharrayStr,_=n.strokeLinecap,f=n.strokeLinejoin,d=n.strokeMiterlimit,p=n.dx,g=n.dy,o=this.__cacheProps,v=o.list,m=o.sList,y=this.isMulti;if(a.length<=1&&h.length<=1){o={fill:a[0],fillRule:s[0],stroke:h[0],strokeWidth:l[0],strokeDasharray:c[0],strokeDasharrayStr:u[0],strokeLinecap:_[0],strokeLinejoin:f[0],strokeMiterlimit:d[0],dx:p,dy:g};this.__renderOneSector(t,r,y,v,m,o)}else{for(var E=0,x=a.length;E<x;E++){var b=a[E];b&&(b={fill:b,fillRule:s[E],dx:p,dy:g},this.__renderOneSector(t,r,y,v,m,b))}for(var T=0,A=h.length;T<A;T++){var M=h[T];M&&(M={stroke:M,strokeWidth:l[T],strokeDasharray:c[T],strokeDasharrayStr:u[T],strokeLinecap:_[T],strokeLinejoin:f[T],strokeMiterlimit:d[T],dx:p,dy:g},this.__renderOnePolygon(t,r,y,v,m,M))}}return n}},{key:"__renderOneSector",value:function(t,e,r,i,n,o){var a=o.fill,s=o.stroke,h=o.strokeWidth,l="conic"===a.k,c="conic"===s.k,u="radial"===a.k&&Array.isArray(a.v),_=0<h&&"radial"===s.k&&Array.isArray(s.v);l||c?(l?this.__conicGradient(t,e,i,r,o):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0),0<h&&c?Le.warn("Stroke style can not use conic-gradient"):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0)):u||_?(u?this.__radialEllipse(t,e,i,r,o,"fill"):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0),0<h&&_?(Le.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke=o.stroke.v[0],this.__drawPolygon(t,e,r,n,o,!1,!0)):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0)):(a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0,!1),0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,n,o,a,s,h){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,o,a,s,h),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<n&&(n=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(n,o,a,s,h),this.addGeom("path",n)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var e,t,r,i,n,o,a,s,h,l,c;return this.__bbox||(l=this.isMulti,s=this.__cacheProps,e=this.root,t=this.__sx3,n=this.__sy3,r=this.width,o=this.height,c=(h=this.currentStyle)[xy],h=h[by],this.buildCache(t=t+.5*r,r=n+.5*o),n=0,n=l?(i=0,s.r.forEach(function(t){i=Math.max(t,i)}),i):s.r,o=P(N(O.prototype),"bbox",this),a=0,c.forEach(function(t){a=t[1]===Oy?Math.max(t[0]*e.computedStyle[Ty]*.5,a):t[1]===Ry?Math.max(t[0]*e.width*.01*.5,a):t[1]===Sy?Math.max(t[0]*e.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(l=Qt(this.__spreadBbox(h),2))[0],c=l[1],h=t+n+(s+=a),l=r-n-(c+=a),c=r+n+c,o[0]=Math.min(o[0],t-n-s),o[1]=Math.min(o[1],l),o[2]=Math.max(o[2],h),o[3]=Math.max(o[3],c),this.__bbox=o),this.__bbox}}]),O}(),Jt=m.STYLE_KEY,Iy=Jt.STROKE_WIDTH,ky=Jt.BOX_SHADOW,wy=Jt.FONT_SIZE,Ly=ue.isNil,Dy=S.REM,Ny=S.VW,Py=S.VH;function Fy(t,e,r,i,n,o){var a=4<arguments.length&&void 0!==n?n:0,s=5<arguments.length&&void 0!==o?o:0;if(0===a||0===s)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];n=a*et.H,o=s*et.H;return[[t+a,e],[t+r-a,e],[t+r+n-a,e,t+r,e+s-o,t+r,e+s],[t+r,e+i-s],[t+r,e+i+o-s,t+r+n-a,e+i,t+r-a,e+i],[t+a,e+i],[t+a-n,e+i,t,e+i+o-s,t,e+i-s],[t,e+s],[t,e+s-o,t+a-n,e,t+a,e]]}function By(t){return t=parseFloat(t),t=isNaN(t)?0:t}var Zt=function(){t(l,w1);var r=e(l);function l(t,e){return _(this,l),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map(By)),Array.isArray(e.ry)&&(t.__ry=e.ry.map(By))):(t.__rx=t.__ry=0,Ly(e.rx)||(t.__rx=By(e.rx)),Ly(e.ry)||(t.__ry=By(e.ry))),t}return f(l,[{key:"buildCache",value:function(r,i,t){var e,n,o=this.width,a=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return(Ly(l.rx)||t)&&(e=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(s,.5)*o),(Ly(l.ry)||t)&&(e=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(h,.5)*a),e&&(h=l.rx,n=l.ry,l.list=c?h.map(function(t,e){return Fy(r,i,o,a,t,n[e])}):Fy(r,i,o,a,h,n)),e}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(l.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.sx3,o.sy3),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var e,t,r,i,n,o,a,s,h;return this.__bbox||(e=this.root,t=this.__sx3,r=this.__sy3,i=this.width,n=this.height,h=(o=this.currentStyle)[Iy],s=o[ky],this.buildCache(t,r),o=P(N(l.prototype),"bbox",this),a=0,h.forEach(function(t){a=t[1]===Dy?Math.max(t[0]*e.computedStyle[wy]*.5,a):t[1]===Ny?Math.max(t[0]*e.width*.01*.5,a):t[1]===Py?Math.max(t[0]*e.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(h=Qt(this.__spreadBbox(s),2))[0],h=h[1],s+=a,h+=a,o[0]=Math.min(o[0],t-s),o[1]=Math.min(o[1],r-h),o[2]=Math.max(o[2],t+i+s),o[3]=Math.max(o[3],r+n+h),this.__bbox=o),this.__bbox}}]),l}(),fr=m.STYLE_KEY,Yy=fr.STROKE_WIDTH,Hy=fr.BOX_SHADOW,Gy=fr.FONT_SIZE,Wy=ue.isNil,Uy=S.REM,Xy=S.VW,Vy=S.VH;function Ky(t){return t=parseFloat(t),t=isNaN(t)?1:t}var $t=function(){t(u,w1);var r=e(u);function u(t,e){return _(this,u),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map(Ky):Wy(e.r)||(t.__r=Ky(e.r))):(t.__r=1,Wy(e.r)||(t.__r=Ky(e.r))),t}return f(u,[{key:"buildCache",value:function(e,r,t){var i=this.width,n=this.r,o=this.__cacheProps,a=this.isMulti;(Wy(o.r)||t)&&(a?(o.r=n.map(function(t){return t*i*.5}),o.list=o.r.map(function(t){return et.ellipsePoints(e,r,t)})):(o.r=n*i*.5,o.list=et.ellipsePoints(e,r,o.r)))}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(u.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.cx,o.cy),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var e,t,r,i,n,o,a,s,h,l,c;return this.__bbox||(l=this.isMulti,s=this.__cacheProps,e=this.root,t=this.__sx3,n=this.__sy3,r=this.width,o=this.height,c=(h=this.currentStyle)[Yy],h=h[Hy],this.buildCache(t=t+.5*r,r=n+.5*o),n=0,n=l?(i=0,s.r.forEach(function(t){i=Math.max(t,i)}),i):s.r,o=P(N(u.prototype),"bbox",this),a=0,c.forEach(function(t){a=t[1]===Uy?Math.max(t[0]*e.computedStyle[Gy]*.5,a):t[1]===Xy?Math.max(t[0]*e.width*.01*.5,a):t[1]===Vy?Math.max(t[0]*e.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(l=Qt(this.__spreadBbox(h),2))[0],c=l[1],h=t+n+(s+=a),l=r-n-(c+=a),c=r+n+c,o[0]=Math.min(o[0],t-n-s),o[1]=Math.min(o[1],l),o[2]=Math.max(o[2],h),o[3]=Math.max(o[3],c),this.__bbox=o),this.__bbox}}]),u}(),A=m.STYLE_KEY,zy=A.STROKE_WIDTH,jy=A.BOX_SHADOW,$y=A.FONT_SIZE,Zy=ue.isNil,qy=S.REM,Jy=S.VW,Qy=S.VH;function tE(t){return t=parseFloat(t),t=isNaN(t)?1:t}var sr=function(){t(d,w1);var r=e(d);function d(t,e){return _(this,d),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(tE):Zy(e.rx)||(t.__rx=[tE(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(tE):Zy(e.ry)||(t.__ry=[tE(e.ry)])):(t.__rx=1,Zy(e.rx)||(t.__rx=tE(e.rx)),t.__ry=1,Zy(e.ry)||(t.__ry=tE(e.ry))),t}return f(d,[{key:"buildCache",value:function(r,i,t){var e,n,o=this.width,a=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return(Zy(l.rx)||t)&&(e=!0,l.rx=c?s.map(function(t){return t*o*.5}):s*o*.5),(Zy(l.ry)||t)&&(e=!0,l.ry=c?h.map(function(t){return t*a*.5}):h*a*.5),e&&(h=l.rx,n=l.ry,l.list=c?h.map(function(t,e){return et.ellipsePoints(r,i,t,n[e])}):et.ellipsePoints(r,i,h,n)),e}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(d.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.cx,o.cy),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,e,t,i,n,o,a,s,h,l,c,u,_,f;return this.__bbox||(c=this.isMulti,r=this.__cacheProps,e=this.root,i=this.__sx3,h=this.__sy3,n=this.width,_=this.height,f=(t=this.currentStyle)[zy],u=t[jy],this.buildCache(t=i+.5*n,i=h+.5*_),s=n=0,s=c?(a=o=0,r.rx.forEach(function(t,e){o=Math.max(t,o),a=Math.max(s,r.ry[e])}),n=o,a):(n=r.rx,r.ry),h=P(N(d.prototype),"bbox",this),l=0,f.forEach(function(t){l=t[1]===qy?Math.max(t[0]*e.computedStyle[$y]*.5,l):t[1]===Jy?Math.max(t[0]*e.width*.01*.5,l):t[1]===Qy?Math.max(t[0]*e.height*.01*.5,l):Math.max(.5*t[0],l)}),l+=1,c=(_=Qt(this.__spreadBbox(u),2))[0],f=_[1],u=t+n+(c+=l),_=i-s-(f+=l),f=i+s+f,h[0]=Math.min(h[0],t-n-c),h[1]=Math.min(h[1],_),h[2]=Math.max(h[2],u),h[3]=Math.max(h[3],f),this.__bbox=h),this.__bbox}}]),d}(),eE={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},rE={os:"offset",e:"easing"},iE={value:"v",options:"o"},nE={},oE={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},aE={};lr.DOM_KEY_SET.concat(lr.GEOM_KEY_SET).forEach(function(t){var e;eE.hasOwnProperty(t)?rE[eE[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),eE[t]=e,rE[e]=t)}),Object.keys(iE).forEach(function(t){nE[iE[t]]=t}),Object.keys(oE).forEach(function(t){aE[oE[t]]=t});var Jt={fullCssProperty:eE,abbrCssProperty:rE,fullAnimate:iE,abbrAnimate:nE,fullAnimateOption:oE,abbrAnimateOption:aE},sE=Vt.TYPE_VD,hE=Vt.TYPE_GM,lE=Vt.TYPE_CP,cE=ue.isNil,uE=ue.isFunction,_E=ue.isPrimitive,fE=ue.clone,dE=ue.extend,pE=Jt.abbrCssProperty,gE=Jt.abbrAnimateOption,vE=Jt.abbrAnimate;function mE(i,n){i&&Object.keys(i).forEach(function(t){var e,r;0===t.indexOf("var-")?(e=t.slice(4),n.hasOwnProperty(e)&&(r=n[e],i["var-"+r]=i[t])):n.hasOwnProperty(t)&&(r=n[t],i[r]=i[t],delete i[t])})}function yE(h,l){var t;h&&l&&(h.hasOwnProperty("vars")?(t=h.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&l.hasOwnProperty(e))for(var i=h,n=0,o=r.length;n<o;n++){var a=r[n];if(!i.hasOwnProperty(a)&&n!==o-1)return void Le.error("Slot miss "+a);if(n===o-1){var s=l[e];if(void 0===s)return;uE(s)&&(s=s(i(a))),i[a]=s}else i=i[a]}})):Object.keys(h).forEach(function(t){if(0===t.indexOf("var-")){var e=h[t];if(e){var r=t.slice(4);if(r&&e.id&&l.hasOwnProperty(e.id)){var i=l[e.id];if(void 0!==i){var n=h;if(-1<r.indexOf(".")){for(var o=r.split("."),a=o.length,s=0;s<a-1;s++){if(!n[r=o[s]])return void Le.warn("parseJson vars is not exist: "+e.id+", "+t+", "+o.slice(0,s).join("."));n=n[r]}r=o[a-1]}uE(i)&&(i=i(e)),n[r]=i}}}}}))}function EE(e,t,r,i,n){var o=4<arguments.length&&void 0!==n?n:{};if(_E(t)||t instanceof R||t instanceof Ms)return t;if(Array.isArray(t))return t.map(function(t){return EE(e,t,r,i,o)});var a=t.libraryId;if(!cE(a)){var s=o[a];if(!s)throw new Error("Link library miss id: "+a);!function(e,r){e.tagName=r.tagName,e.props=fE(r.props),e.children=r.children,e.library=r.library,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,i,n=e.init;n&&(i=(t=e.props=e.props||{}).style,dE(t,n),i&&(dE(i,n.style),t.style=i),e.init=null)}(t,s),t.libraryId=null}var h,l,c,u=t.library;Array.isArray(u)&&(o={},u.forEach(function(t){!function(t,e){var r=t.id;if(cE(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}(t,o)}),h=t,l=o,(c=i.vars)&&(h.hasOwnProperty("vars")?(_=h.vars,Array.isArray(_)||(_=[_]),Array.isArray(_)&&_.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&c.hasOwnProperty(e)&&"library"===r[0])for(var i=l,n=1,o=r.length;n<o;n++){var a,s,h=r[n];if(!i.hasOwnProperty(h)&&n!==o-1)return void Le.error("Library slot miss "+h);n===o-1?(a=c[e],uE(a)&&(a=a(i(h))),s=i[h],i[h]=1===n?Object.assign({id:s.id,tagName:s.tagName},a):a):i=i[h]}})):Object.keys(h).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=h[t],delete h[t],!e||(r=t.slice(12))&&e.id&&c.hasOwnProperty(e.id)&&(t=c[e.id],(t=uE(t)?t(e):t)&&t.tagName&&(l[r]=Object.assign({id:r},t))))})),t.library=null);var n=t.tagName,a=t.props,s=void 0===a?{}:a,u=t.children,_=void 0===u?[]:u,a=t.animate,u=void 0===a?[]:a;if(!n)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var f,d,a=s.style;return!1!==i.abbr&&mE(a,pE),yE(a,i.vars),yE(s,i.vars),yE(t,i.vars),n="$"===n.charAt(0)?e.createGm(n,s):/^[A-Z]/.test(n)?(t=Ms.getRegister(n),e.createCp(t,s,_.map(function(t){return t&&-1<[sE,hE,lE].indexOf(t.$$type)?t:EE(e,t,r,i,o)}))):e.createVd(n,s,_.map(function(t){return t&&-1<[sE,hE,lE].indexOf(t.$$type)?t:EE(e,t,r,i,o)})),u&&(Array.isArray(u)?(u.forEach(function(t){!1!==i.abbr&&mE(t,vE);var e=t.value,t=t.options;Array.isArray(e)&&e.length&&(d=!0,e.forEach(function(t){!1!==i.abbr&&mE(t,pE),yE(t,i.vars)})),t&&(!1!==i.abbr&&mE(t,gE),yE(t,i.vars))}),d&&(f={animate:u,target:n})):(!1!==i.abbr&&mE(u,vE),s=u.value,_=u.options,Array.isArray(s)&&s.length&&(s.forEach(function(t){!1!==i.abbr&&mE(t,pE),yE(t,i.vars)}),f={animate:u,target:n}),_&&(!1!==i.abbr&&mE(_,gE),yE(_,i.vars)))),f&&r.push(f),n}var xE={parse:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=(e=ue.clone(e)).fonts;n&&(n=!Array.isArray(n)?[n]:n).forEach(function(t){var e=t.fontFamily,t=t.data;e&&t&&bt.register(e,t)}),!1===e.abbr&&(i.abbr=!1),!1!==i.abbr&&Le.warn("Abbr in json is deprecated"),Le.isDom(r)||(i=r||{},r=null);var o=[],n=EE(t,e,o,i);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg");e=i.controller instanceof Tp?i.controller:n.animateController;t.render(n,r),o.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(o),e.__playAuto()):(e.__records2=e.__records2.concat(o),e.init(e.__records2,e.list2))}else o.length&&(n.__animateRecords={options:i,list:o,controller:i.controller instanceof Tp?i.controller:null});return n},loadAndParse:function(n,e,r,i){var t=e.fonts,o=e.components,a=e.imgs,s=[],h=[],l=[];t&&(t=!Array.isArray(t)?[t]:t).forEach(function(t){t=t.url;t&&s.push(t)}),o&&(o=!Array.isArray(o)?[o]:o).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&n.Component.hasRegister(e)&&!i||r&&h.push(t)}),a&&(a=!Array.isArray(a)?[a]:a).forEach(function(t){t=t.url;t&&l.push(t)});var c=s.length,u=h.length,_=l.length;if(!(c||u||_)){a=xE.parse(n,e,r,i);return i&&ue.isFunction(i.callback)&&i.callback(a),a}function f(){var t;d===c+u+_&&(t=xE.parse(n,e,r,i),i&&ue.isFunction(i.callback)&&i.callback(t))}var d=0;n.inject.loadFont(s,function(){d+=c,f()}),n.inject.loadComponent(h.map(function(t){return t.url}),function(){d+=u,h.forEach(function(t){t=t.tagName;t&&window[t]&&!n.Component.hasRegister(t)&&n.Component.register(t,window[t])}),f()}),n.inject.measureImg(l,function(){d+=_,f()})},abbr:Jt},fr={css:mn,reset:lr,unit:S,font:bt,abbr:_r},A={Animation:Tc,Controller:Tp,easing:hh,frame:Js},Jt={level:ya,change:Rr,Page:Dn,Cache:la};w1.register("$line",Y),w1.register("$polyline",Ey),w1.register("$polygon",ft),w1.register("$sector",qt),w1.register("$rect",Zt),w1.register("$circle",$t),w1.register("$ellipse",sr);m={version:"0.64.0",render:function(t,e){if(!(t instanceof Zm))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,n=arguments.length;i<n;i++)r.push(arguments[i]);return ue.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new Zm(t,e,r);if(wf.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:Vt.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:Vt.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:Vt.TYPE_CP}},parse:function(t,e,r){return xE.parse(this,t,e,r)},loadAndParse:function(t,e,r){return xE.loadAndParse(this,t,e,r)},mode:rt,Component:Ms,Node:R,Text:Za,Geom:w1,Xom:bf,Dom:J0,Img:Gd,Root:Zm,Event:ys,util:ue,inject:Le,style:fr,parser:xE,animate:A,math:y,builder:vs,updater:tp,refresh:Jt,enums:m,set debug(t){_e.flag=!!t}};return vs.ref({Xom:bf,Dom:J0,Img:Gd,Geom:w1,Component:Ms}),"undefined"!=typeof window?window.karas=m:"undefined"!=typeof self&&(self.karas=m),m});
//# sourceMappingURL=index.min.js.map
