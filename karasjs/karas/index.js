!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,r,n,i=tt(a);return e=o?(t=tt(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),r=this,!(n=e)||"object"!=typeof n&&"function"!=typeof n?_(r):n}}function et(t,e,r){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,SCALE_X:59,SCALE_Y:60,SKEW_X:61,SKEW_Y:62,ROTATE_Z:63,FILTER:64,BOX_SHADOW:65,POINTER_EVENTS:66,OVERFLOW:67,MIX_BLEND_MODE:68,FILL:69,STROKE:70,STROKE_WIDTH:71,STROKE_DASHARRAY:72,STROKE_DASHARRAY_STR:73,STROKE_LINECAP:74,STROKE_LINEJOIN:75,STROKE_MITERLIMIT:76,FILL_RULE:77,MATRIX:78,BORDER_TOP:79,BORDER_RIGHT:80,BORDER_BOTTOM:81,BORDER_LEFT:82,LETTER_SPACING:83,BACKGROUND_CLIP:84};function h(t){return t.replace(/[A-Z]/g,function(t){return t.toLowerCase()}).replace(/_([a-z])/g,function(t,e){return e.toUpperCase()})}var u={},f={},d={};Object.keys(s).forEach(function(t){var e=s[t],r=h(u[e]=t);f[e]=r,d[r]=e});var v={STYLE_KEY:s,STYLE_R_KEY:u,STYLE_RV_KEY:f,STYLE_V_KEY:d,style2Lower:h,style2Upper:function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toUpperCase()}).replace(/[a-z]/g,function(t){return t.toUpperCase()})},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_IMG:5,UPDATE_OVERWRITE:6,UPDATE_KEYS:7,UPDATE_LIST:8,UPDATE_CONFIG:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_BLUR_VALUE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6}},y=v.STRUCT_KEY,m=y.STRUCT_NODE,E=y.STRUCT_INDEX,M=y.STRUCT_CHILD_INDEX,O=y.STRUCT_LV,T=v.NODE_KEY,A=T.NODE_IS_DESTROYED,b=T.NODE_STRUCT,S=function(){function t(){g(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return l(t,[{key:"__structure",value:function(t,e,r){var n;return this.__config[b]=(c(n={},m,this),c(n,E,t),c(n,M,r),c(n,O,e),n)}},{key:"__modifyStruct",value:function(){return[this.__config[b],1]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[A]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[A]}}]),t}(),Xt={CANVAS:0,SVG:1},x={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7},R={info:{arial:{lhr:1.14990234375,blr:.9052734375},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},"宋体":{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)},register:function(t,e){var r=e||{},n=r.emSquare,i=void 0===n?2048:n,a=r.ascent,o=void 0===a?1854:a,s=r.descent,h=void 0===s?434:s,l=r.lineGap,c=void 0===l?67:l;this.info[t.toLowerCase()]={lhr:(o+h+c)/i,blr:o/i}}},k={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}};var I,N,w,Vt={identity:function(){return[1,0,0,1,0,0]},multiply:function(t,e){var r=1===t[0]&&0===t[1]&&0===t[2]&&1===t[3],n=1===e[0]&&0===e[1]&&0===e[2]&&1===e[3],i=0===t[4]&&0===t[5],a=0===e[4]&&0===e[5];if(r&&i)return e.slice(0);if(n&&a)return t.slice(0);if(r&&n)return(t=t.slice(0))[4]+=e[4],t[5]+=e[5],t;if(r||n){var o=r?e.slice(0):t.slice(0);return o[4]=t[0]*e[4]+t[2]*e[5]+t[4],o[5]=t[1]*e[4]+t[3]*e[5]+t[5],o}var s=[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],0,0];return i&&a||(a?(s[4]=t[4],s[5]=t[5]):(s[4]=t[0]*e[4]+t[2]*e[5]+t[4],s[5]=t[1]*e[4]+t[3]*e[5]+t[5])),s},calPoint:function(t,e){var r=Kt(t,2),n=r[0],i=r[1],a=Kt(e,6),o=a[0],s=a[1],h=a[2],l=a[3];return[o*n+h*i+a[4],s*n+l*i+a[5]]},int2convolution:function(t){var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(e*=3)%2==0&&e++,e},inverse:function(t){var e=Kt(t,6),r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5];if(1===r&&0===n&&0===i&&1===a&&0===o&&0===s)return t;var h=r*a-n*i;return 0==h?t:[a/h,-n/h,-i/h,r/h,(i*s-a*o)/h,(n*o-r*s)/h]},isE:function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}},C=v.STYLE_KEY,D=v.STYLE_KEY.TRANSFORM,P={}.toString;function L(e){return function(t){return P.call(t)==="[object "+e+"]"}}var F=L("Object"),B=L("String"),H=L("Function"),G=L("Number"),Y=L("Boolean"),W=L("Date");function U(t){return null==t}function K(t){return U(t)?"":t.toString()}function X(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=X(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var n="<g>";t.bb.forEach(function(t){n+=X(t)}),n+="</g><g",t.conClip&&(n+=' clip-path="'+t.conClip+'"'),n+=">",(t.children||[]).forEach(function(t){t.isMask||(n+=X(t))}),n+="</g>";var i=t.opacity,a=t.transform,o=t.visibility,s=t.mask,h=t.overflow,l=t.filter,c=t.mixBlendMode;return"<g"+(1!==i&&void 0!==i?' opacity="'+i+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l?' filter="'+l+'"':"")+(c?' style="mix-blend-mode:'+c+'"':"")+">"+n+"</g>"}}function V(t){var n="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(n+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){n+=" "+t[0]+'="'+t[1]+'"'}),n+=">",(t.children||[]).forEach(function(t){var e,r;n+=(r="<"+(e=t).tagName,(e.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+="></"+e.tagName+">")}),n+="</"+t.tagName+">"}function z(t,e){for(var r=t.length?t[0]:"",n=1,i=t.length;n<i;n++)r+=e+t[n];return r}var j=(c(I={},C.POSITION,!0),c(I,C.DISPLAY,!0),c(I,C.BACKGROUND_REPEAT,!0),c(I,C.FLEX_DIRECTION,!0),c(I,C.JUSTIFY_CONTENT,!0),c(I,C.ALIGN_ITEMS,!0),c(I,C.ALIGN_SELF,!0),c(I,C.OVERFLOW,!0),c(I,C.MIX_BLEND_MODE,!0),c(I,C.STROKE_LINECAP,!0),c(I,C.STROKE_LINEJOIN,!0),c(I,C.STROKE_MITERLIMIT,!0),c(I,C.FILL_RULE,!0),I),$=(c(N={},C.BACKGROUND_SIZE,!0),c(N,C.BACKGROUND_COLOR,!0),c(N,C.BORDER_TOP_COLOR,!0),c(N,C.BORDER_RIGHT_COLOR,!0),c(N,C.BORDER_BOTTOM_COLOR,!0),c(N,C.BORDER_LEFT_COLOR,!0),N),q=(c(w={},C.BORDER_TOP_LEFT_RADIUS,!0),c(w,C.BORDER_TOP_RIGHT_RADIUS,!0),c(w,C.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(w,C.BORDER_BOTTOM_LEFT_RADIUS,!0),c(w,C.TRANSFORM_ORIGIN,!0),w);var zt={isObject:F,isString:B,isFunction:H,isNumber:G,isBoolean:Y,isDate:W,isNil:U,isPrimitive:function(t){return zt.isNil(t)||zt.isBoolean(t)||zt.isString(t)||zt.isNumber(t)},isAuto:function(t){return U(t)||"auto"===t},stringify:K,joinSourceArray:function t(e){for(var r="",n=0,i=e.length;n<i;n++){var a=e[n];Array.isArray(a)?r+=t(a):r+=K(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=V(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=X(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=X(t))}),e+="</g>"},joinVd:X,joinDef:V,rgba2int:function(t){if(Array.isArray(t))return t;var e,r=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(r.push(parseInt(t.charAt(0)+t.charAt(0),16)),r.push(parseInt(t.charAt(1)+t.charAt(1),16)),r.push(parseInt(t.charAt(2)+t.charAt(2),16)),r[3]=1):6===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4),16)),r[3]=1):8===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4,6),16)),r.push(parseInt(t.slice(6),16)/255)):(r[0]=r[1]=r[2]=0,r[3]=1):(e=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(r=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],U(e[4])?r[3]=1:r[3]=parseFloat(e[4])):r=[0,0,0,0]:r=[0,0,0,0],r},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+z(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+z(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+z(t,",")+")";if(3===t.length)return"rgba("+z(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i))e[i[0]]=i[1];else for(var a=Object.keys(i),o=a.length-1;0<=o;o--){var s=a[o];e[s]=i[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),n=0,i=r.length;n<i;n++){var a=r[n];e.push([a,t[a]])}return e},clone:function e(r){if(U(r)||"object"!==o(r))return r;if(r.$$type===k.TYPE_VD||r.$$type===k.TYPE_GM||r.$$type===k.TYPE_CP)return r;if(zt.isDate(r))return new Date(r);var n=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){n[t]=e(r[t])}),n},cloneStyle:function(a,t){t=t||Object.keys(a);var o={};return t.forEach(function(t){var e=a[t];if(t===C.BACKGROUND_IMAGE)e.k?o[t]=zt.clone(e):o[t]=e;else if(j.hasOwnProperty(t))o[t]=e;else{var r=o[t]=e.slice(0);if($.hasOwnProperty(t))r[0]=r[0].slice(0);else if(q.hasOwnProperty(t))r[0]=r[0].slice(0),r[1]=r[1].slice(0);else if(t===D)for(var n=0,i=r.length;n<i;n++)r[n]=r[n].slice(0)}}),o},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++){var a=e[n],o=r[n],s=Array.isArray(a),h=Array.isArray(o);if(s&&h){if(!t(a,o))return!1}else{if(s||h)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(F(e)&&F(r)){for(var n={},i=0,a=Object.keys(e),o=a.length;i<o;i++){var s=a[i];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;n[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!n.hasOwnProperty(u))return!1}}else{if(W(e)&&W(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==o(e))return t;for(var n=0,i=(r=r||Object.keys(e)).length;n<i;){var a=r[n];t[a]=e[a],n++}return t},joinArr:z,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!Vt.isE(e)){var i=Kt(t,4),a=i[0],o=i[1],s=i[2],h=i[3];r&&(a-=r,s+=r),n&&(o-=n,h+=n);for(var l=[s,o,a,h,s,h],c=Kt(Vt.calPoint([a,o],e),2),u=a=c[0],_=o=c[1],f=a,d=o,p=0;p<6;p+=2)var v=l[p],y=l[p+1],g=Kt(Vt.calPoint([v,y],e),2),v=g[0],y=g[1],u=Math.min(u,v),f=Math.max(u,v),_=Math.min(_,y),d=Math.max(d,y);t=[u,_,f,d]}else(r||n)&&(t[0]-=r,t[1]-=n,t[2]+=r,t[3]+=n);return t},getMergeMarginTB:function(t,e){var r=0,n=t[0],i=t[0];t.forEach(function(t){r+=t,n=Math.max(n,t),i=Math.min(i,t)}),e.forEach(function(t){r+=t,n=Math.max(n,t),i=Math.min(i,t)});var a=0;return 0<n&&0<i?a=Math.max(n,i)-r:n<0&&i<0?a=Math.min(n,i)-r:0===n&&0===i||(a=n+i-r),a}},Z={position:/((-?[\d.]+(px|%)?)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var J={dotProduct:function(t,e,r,n){return t*r+e*n},crossProduct:function(t,e,r,n){return t*n-r*e}},Q=4*(Math.sqrt(2)-1)/3,rt=J.crossProduct,nt=v.STYLE_KEY,it=nt.WIDTH,at=nt.HEIGHT,ot=nt.TRANSFORM_ORIGIN;function st(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function ht(t,e,r,n){return Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2))}function lt(t,e){var r=Kt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Kt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return!(c<=n||u<=i||a<=h||o<=l)}function ct(t,e,r){var n=r.matrix,i=void 0===n?[1,0,0,1,0,0]:n,a=r.computedStyle,o=void 0===a?{}:a,s=o[it],h=o[at],l=o[ot],c=Kt(l=void 0===l?[.5*s,.5*h]:l,2),u=c[0],_=c[1],f=Kt(Vt.calPoint([t*s-u,e*h-_],i),2);return[(t=f[0])+u,(e=f[1])+_]}function ut(t){return t*Math.PI/180}function _t(t){var r=t.length,e=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(e,1/r)}function ft(t,e,r){var n=t,i=(2*e+r)/3,a=(e+2*r)/3;return(n(e)+3*n(i)+3*n(a)+n(r))*(r-e)/8}function dt(e,r){return function t(e,r,n,i){var a=3<arguments.length&&void 0!==i?i:.001,o=e,s=(r+n)/2,h=ft(o,r,n),l=ft(o,r,s),c=ft(o,s,n),u=l+c-h;return Math.abs(u)<=15*a?l+c+u/15:t(o,r,s,a/2)+t(o,s,n,a/2)}(function(t){return _t(pt(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function pt(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:1;return 2===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Kt(e,3),a=i[0],o=i[1],s=i[2],h=Kt(a,2),l=h[0],c=h[1],u=Kt(o,2),_=u[0],f=u[1],d=Kt(s,2),p=d[0],v=d[1],y=0,g=0,g=0===n?(y=Math.pow(1-t,2)*l+2*t*(1-t)*_+Math.pow(t,2)*p,Math.pow(1-t,2)*c+2*t*(1-t)*f+Math.pow(t,2)*v):1===n?(y=2*(1-t)*(_-l)+2*t*(p-_),2*(1-t)*(f-c)+2*t*(v-f)):2===n?(y=2*(p-2*_+l),2*(v-2*f+c)):y=0;return[y,g]}(t,e,i):3===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Kt(e,4),a=i[0],o=i[1],s=i[2],h=i[3],l=Kt(a,2),c=l[0],u=l[1],_=Kt(o,2),f=_[0],d=_[1],p=Kt(s,2),v=p[0],y=p[1],g=Kt(h,2),m=g[0],E=g[1],M=0,O=0,O=0===n?(M=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*f+3*(1-t)*Math.pow(t,2)*v+Math.pow(t,3)*m,Math.pow(1-t,3)*u+3*t*Math.pow(1-t,2)*d+3*(1-t)*Math.pow(t,2)*y+Math.pow(t,3)*E):1===n?(M=3*((1-t)*(1-t)*(f-c)+2*(1-t)*t*(v-f)+t*t*(m-v)),3*((1-t)*(1-t)*(d-u)+2*(1-t)*t*(y-d)+t*t*(E-y))):2===n?(M=6*(v-2*f+c)*(1-t)+6*(m-2*v+f)*t,6*(y-2*d+u)*(1-t)+6*(E-2*y+d)*t):3===n?(M=6*(m-3*v+3*f-c),6*(E-3*y+3*d-u)):M=0;return[M,O]}(t,e,i):void 0}function vt(e,r,t){for(var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,o=function(t){return _t(pt(t,e,r))},s=t*n,h=n,l=h,c=0;c<i;c++){var u=ft(o,0,h)-s;if(Math.abs(u)<a)break;var _=_t(pt(h,e,r,1));if(h-=u*_/(u*_t(pt(h,e,r,2))+_*_),Math.abs(h-l)<a)break;l=h}return pt(h,e,r,0)}function yt(t,e){var r=Kt(t,4),n=Kt(r[0],2),i=n[0],a=n[1],o=Kt(r[1],2),s=o[0],h=o[1],l=Kt(r[2],2),c=l[0],u=l[1],_=r[3],f=(s-i)*e+i,d=(h-a)*e+a,p=(c-s)*e+s,v=(u-h)*e+h,y=(p-f)*e+f,g=(v-d)*e+d;if(4===t.length){var m=Kt(_,2);return[[i,a],[f,d],[y,g],[(((m[0]-c)*e+c-p)*e+p-y)*e+y,(((m[1]-u)*e+u-v)*e+v-g)*e+g]]}if(3===t.length)return[[i,a],[f,d],[y,g]]}var jt={pointInPolygon:function(t,e,r){for(var n=Kt(r[0],2),i=n[0],a=n[1],o=Kt(r[0],2),s=o[0],h=o[1],l=r.length,c=1;c<l;c++)var u=Kt(r[c],2),_=u[0],f=u[1],i=Math.max(i,_),a=Math.max(a,f),s=Math.min(s,_),h=Math.min(h,f);if(t<s||e<h||i<t||a<e)return!1;for(var d=0,p=r.length;d<p;d++){var v=Kt(r[d],2),y=v[0],g=v[1],m=Kt(r[(d+1)%p],2),E=m[0],M=m[1];if(rt(E-y,M-g,t-y,e-g)<0)return!1}return!0},d2r:ut,r2d:function(t){return 180*t/Math.PI},H:Q,h:st,angleBySide:function(t,e,r){var n=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(n)},sideByAngle:function(t,e,r){var n=Math.cos(t);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*n)},pointsDistance:ht,triangleIncentre:function(t,e,r,n,i,a){var o=ht(r,n,i,a),s=ht(t,e,i,a),h=ht(t,e,r,n);return[(o*t+s*r+h*i)/(o+s+h),(o*e+s*n+h*a)/(o+s+h)]},ellipsePoints:function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,i=r*Q,a=n===r?i:n*Q;return[[t-r,e],[t-r,e-a,t-i,e-n,t,e-n],[t+i,e-n,t+r,e-a,t+r,e],[t+r,e+a,t+i,e+n,t,e+n],[t-i,e+n,t-r,e+a,t-r,e]]},sectorPoints:function t(e,r,n,i,a){var o;a<i&&(i=(o=[a,i])[0],a=o[1]);var s=[],h=Math.floor(i/90),l=Math.floor(a/90);if(h===l||l-h==1&&a%90==0){var c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b,x,S,R,k,I=st(ut(Math.abs(i-a)))*n,N=Math.sqrt(Math.pow(n,2)+Math.pow(I,2)),w=Math.atan(I/n);h<90?(c=[e+Math.sin(ut(i))*n,r-Math.cos(ut(i))*n],f=w+ut(i),u=[e+Math.sin(f)*N,r-Math.cos(f)*N],_=[e+Math.sin(ut(a))*n,r-Math.cos(ut(a))*n],f=ut(a)-w,d=[e+Math.sin(f)*N,r-Math.cos(f)*N],s.push(c),s.push(u.concat(d).concat(_))):h<180?(p=[e+Math.cos(ut(i-90))*n,r+Math.sin(ut(i-90))*n],g=w+ut(i-90),v=[e+Math.cos(g)*N,r+Math.sin(g)*N],y=[e+Math.cos(ut(a-90))*n,r+Math.sin(ut(a-90))*n],g=ut(a-90)-w,m=[e+Math.cos(g)*N,r+Math.sin(g)*N],s.push(p),s.push(v.concat(m).concat(y))):h<270?(E=[e-Math.sin(ut(i-180))*n,r+Math.cos(ut(i-180))*n],T=w+ut(i-180),M=[e-Math.sin(T)*N,r+Math.cos(T)*N],O=[e-Math.sin(ut(a-180))*n,r+Math.cos(ut(a-180))*n],T=ut(a-180)-w,A=[e-Math.sin(T)*N,r+Math.cos(T)*N],s.push(E),s.push(M.concat(A).concat(O))):(b=[e-Math.cos(ut(i-270))*n,r+Math.sin(ut(i-270))*n],R=w+ut(i-270),x=[e-Math.cos(R)*N,r+Math.sin(R)*N],S=[e-Math.cos(ut(a-270))*n,r+Math.sin(ut(a-270))*n],R=ut(a-270)-w,k=[e-Math.cos(R)*N,r+Math.sin(R)*N],s.push(b),s.push(x.concat(k).concat(S)))}else{for(var C,D,P,L,F=h,B=[];F<=l;F++)0===F?(C=t(e,r,n,i,90),B.push(C)):1===F?(h===F||90<a)&&(D=t(e,r,n,i<90?90:i,180<a?180:a),B.push(D)):2===F?(h===F||180<a)&&(P=t(e,r,n,i<180?180:i,270<a?270:a),B.push(P)):3===F&&(h===F||270<a)&&(L=t(e,r,n,i<270?270:i,a),B.push(L));s=B[0];for(var H=1,G=B.length;H<G;H++)s.push(B[H][1])}return s},getRectsIntersection:function(t,e){if(!lt(t,e))return null;var r=Kt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Kt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return[Math.max(n,h),Math.max(i,l),Math.min(a,c),Math.min(o,u)]},isRectsOverlap:lt,isRectsInside:function(t,e){var r=Kt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Kt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return n<=h&&i<=l&&c<=a&&u<=o},calCoordsInNode:ct,calPercentInNode:function(t,e,r){var n,i=r.computedStyle,a=i[it],o=i[at],s=Kt(i[ot],2),h=s[0],l=s[1],c=Math.atan((o-l)/(a-h)),u=Kt(ct(1,1,r),2),_=u[0],f=u[1],d=h<=_&&l<=f?(n=h===_?-Math.atan(1/0):Math.atan((f-l)/(_-h)))-c:h<=_&&f<l?(n=h===_?-Math.atan(1/0):Math.atan((l-f)/(_-h)))+c:_<h&&l<=f?(n=Math.atan((f-l)/(h-_)))-c:_<h&&f<l?(n=Math.atan((f-l)/(_-h)))<=c?n+Math.PI-c:-(d=Math.PI-n+c):0,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-l,2)),v=h<=t&&l<=e?h===t?-Math.atan(1/0):Math.atan((e-l)/(t-h)):h<=t&&e<l?h===t?-Math.atan(1/0):-Math.atan((e-l)/(h-t)):t<h&&l<=e?Math.PI-Math.atan((e-l)/(h-t)):Math.atan((e-l)/(t-h))-Math.PI;return(v-=d)>Math.PI?(v-=Math.PI,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>.5*Math.PI?(v=Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o]):0<=v?[(h+p*Math.cos(v))/a,(l+p*Math.sin(v))/o]:v>=.5*-Math.PI?(v=-v,[(h+p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>=-Math.PI?(v=Math.PI+v,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):(v=-Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o])},bboxBezier:function(t,e,r,n,i,a,o,s){return 4===arguments.length?[t,e,r,n]:6===arguments.length?(h=t,l=e,c=r,u=n,_=i,f=a,E=Math.min(h,_),M=Math.min(l,f),O=Math.max(h,_),T=Math.max(l,f),(c<E||u<M||O<c||T<u)&&(g=(v=1-(d=(h-c)/(h-2*c+_)))*v*h+2*v*d*c+d*d*_,m=(y=1-(p=(l-u)/(l-2*u+f)))*y*l+2*y*p*u+p*p*f,E=Math.min(E,g),M=Math.min(M,m),O=Math.min(O,g),T=Math.min(T,m)),[E,M,O,T]):8===arguments.length?(A=t,b=e,x=r,S=n,R=i,k=a,I=o,N=s,j=Math.min(A,I),$=Math.min(b,N),q=Math.max(A,I),Z=Math.max(b,N),(x<j||S<$||q<x||Z<S||R<j||k<$||q<R||Z<k)&&(F=(C=b-2*S+k)*C-(P=3*S-b-3*k+N)*(-b+S),0<(L=(w=A-2*x+R)*w-(D=3*x-A-3*R+I)*(-A+x))&&(0<(B=(-w-(L=Math.sqrt(L)))/D)&&B<1&&(G=(H=1-B)*H*H*A+3*H*H*B*x+3*H*B*B*R+B*B*B*I,j=Math.min(j,G),q=Math.max(q,G)),0<(B=(-w+L)/D)&&B<1&&(W=(Y=1-B)*Y*Y*A+3*Y*Y*B*x+3*Y*B*B*R+B*B*B*I,j=Math.min(j,W),q=Math.max(q,W))),0<F&&(0<(U=(-C-(F=Math.sqrt(F)))/P)&&U<1&&(X=(K=1-U)*K*K*b+3*K*K*U*S+3*K*U*U*k+U*U*U*N,$=Math.min($,X),Z=Math.max(Z,X)),0<(U=(-C+F)/P)&&U<1&&(z=(V=1-U)*V*V*b+3*V*V*U*S+3*V*U*U*k+U*U*U*N,$=Math.min($,z),Z=Math.max(Z,z)))),[j,$,q,Z]):void 0;var h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P,L,F,B,H,G,Y,W,U,K,X,V,z,j,$,q,Z},bezierLength:dt,pointAtBezier:function(t,e,r,n,i){return vt(t,e,dt(t,e,0,1),r,n,i)},pointAtBezierWithLength:vt,sliceBezier:yt,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=yt(t,r)),0<e&&(r<1&&(e/=r),t=yt(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,n){return 270<=n?(n=ut(n-=270),[t-Math.cos(n)*r,e-Math.sin(n)*r]):180<=n?(n=ut(n-=180),[t-Math.sin(n)*r,e+Math.cos(n)*r]):90<=n?(n=ut(n-=90),[t+Math.cos(n)*r,e+Math.sin(n)*r]):(n=ut(n),[t+Math.sin(n)*r,e-Math.cos(n)*r])}},gt=zt.rgba2int,mt=zt.isNil,Et=x.PX,Mt=x.PERCENT,Ot=jt.d2r;function Tt(t){if(/%$/.test(t)||/px$/.test(t)||/^-?[\d.]+$/.test(t))return[parseFloat(t),/%/.test(t)?Mt:Et];var e=[{top:0,left:0,center:50,right:100,bottom:100}[t],Mt];return mt(e[0])&&(e[0]=50),e}function At(t,e){for(var r,n=[],i=0,a=t.length;i<a;i++){var o,s=t[i];1<s.length?(o=s[1])[1]===Mt?n.push([s[0],.01*o[0]]):n.push([s[0],o[0]/e]):n.push([s[0]])}1===n.length&&n.push(zt.clone(n[0])),1===n[0].length&&n[0].push(0),1<n.length&&(1===n[r=n.length-1].length&&n[r].push(1));for(var h=n[0][1],l=1,c=n.length;l<c-1;l++){var u=n[l];if(1<u.length)h=u[1];else{for(var _=l+1,f=n[n.length-1][1];_<c-1;_++){var d=n[_];if(1<d.length){f=d[1];break}}for(var p=(f-h)/(_-l+1),v=l;v<_;v++){n[v].push(h+p*(v+1-l))}l=_}}for(var y=1,g=n.length;y<g;y++){var m=n[y],E=n[y-1];m[1]<E[1]&&(m[1]=E[1])}for(var M=0,O=n.length;M<O;M++){var T=n[M];if(1<T[1]){n.splice(M);var A,b,x,S,R,k=n[M-1];k&&k[1]<1&&(A=T[0][0]-k[0][0],b=T[0][1]-k[0][1],x=T[0][2]-k[0][2],S=T[0][3]-k[0][3],R=(1-k[1])/(T[1]-k[1]),n.push([[T[0][0]+A*R,T[0][1]+b*R,T[0][2]+x*R,T[0][3]+S*R],1]));break}}for(var I=n.length-1;0<=I;I--){var N=n[I];if(N[1]<0){n.splice(0,I+1);var w,C,D,P,L,F=n[I];F&&0<F[1]&&(w=F[0][0]-N[0][0],C=F[0][1]-N[0][1],D=F[0][2]-N[0][2],P=F[0][3]-N[0][3],L=-N[1]/(F[1]-N[1]),n.unshift([[N[0][0]+w*L,N[0][1]+C*L,N[0][2]+D*L,N[0][3]+P*L],0]));break}}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n}var bt={parseGradient:function(t){var e,r,n,i=Z.gradient.exec(t);if(i){var a,o,s,h,l,c,u,_,f,d,p,v={k:i[1]};"linear"===v.k?(a=/(-?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(i[2]))?v.d=(e=a[0].toLowerCase(),n=180,"to top"===e?n=0:"to top right"===e?n=45:"to right"===e?n=90:"to bottom right"===e?n=135:"to bottom"===e||("to bottom left"===e?n=225:"to left"===e?n=270:"to top left"===e?n=315:(r=/(-?[\d.]+)deg/.exec(e))&&(n=parseFloat(r[1]))),n%360):(o=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)/.exec(i[2]),v.d=o?[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])]:180):"radial"===v.k?(v.s=-1<i[2].indexOf("circle")?"circle":"ellipse",(s=/(closest|farthest)-(side|corner)/i.exec(i[2]))?v.z=s[0].toLowerCase():(h=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)(?:\s+([\d.]+))?/.exec(i[2]))?(v.z=[parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]),parseFloat(h[4])],mt(h[5])?v.z.push(1):v.z.push(parseFloat(h[5]))):v.z="farthest-corner",(l=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(c=Tt(l[1]),u=l[2]?Tt(l[2]):c,v.p=[c,u]):v.p=[[50,Mt],[50,Mt]]):"conic"===v.k&&(_=/(-?[\d.]+deg)/i.exec(i[2]),v.d=_?parseFloat(_[0])%360:0,(f=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(d=Tt(f[1]),p=f[2]?Tt(f[2]):d,v.p=[d,p]):v.p=[[50,Mt],[50,Mt]]);var y=i[2].match(/(-?[\d.]+(px|%))?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*(-?[\d.]+(px|%))?/gi);return v.v=y.map(function(t){var e=/((?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\)))/i.exec(t),r=[gt(e[1])],n=/-?[\d.]+(?:px|%)/.exec(t);return n&&(r[1]=[parseFloat(n[0])],/%$/.test(n[0])?r[1][1]=Mt:r[1][1]=Et),r}),v}},getLinear:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m;if(Array.isArray(e)){w=r+e[0]*o,C=n+e[1]*s,D=r+e[2]*o,P=n+e[3]*s;var E=At(t,Math.sqrt(Math.pow(D-w,2)+Math.pow(P-C,2)))}else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var M=Math.max(o,s),O=(l=M,c=i,u=a,v=270<=(h=e)?(_=Ot(360-h),f=c+Math.sin(_)*l,d=u+Math.cos(_)*l,p=c-Math.sin(_)*l,u-Math.cos(_)*l):180<=h?(y=Ot(h-180),f=c+Math.sin(y)*l,d=u-Math.cos(y)*l,p=c-Math.sin(y)*l,u+Math.cos(y)*l):90<=h?(g=Ot(180-h),f=c-Math.sin(g)*l,d=u-Math.cos(g)*l,p=c+Math.sin(g)*l,u+Math.cos(g)*l):(m=Ot(h),f=c-Math.sin(m)*l,d=u+Math.cos(m)*l,p=c+Math.sin(m)*l,u-Math.cos(m)*l),[f,d,p,v]);M*=2;var T=J.dotProduct(r-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/M,A=J.dotProduct(r+o-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/M,b=J.dotProduct(r+o-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/M,x=J.dotProduct(r-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/M,S=T,R=T,S=Math.min(S,Math.min(A,Math.min(b,x))),R=Math.max(R,Math.max(A,Math.max(b,x))),k=S/M,I=O[2]-O[0],N=O[3]-O[1],w=O[0]+I*k,C=O[1]+N*k,D=O[2]-I*k,P=O[3]-N*k;E=At(t,R-S)}return{x1:w,y1:C,x2:D,y2:P,stop:E}},getRadial:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b,x,S,R,k,I=Kt((h=e,l=r,c=n,u=o-i,_=s-a,f=i,d=a,p=o,v=s,A=0,Array.isArray(l)?(y=f+l[0]*u,g=d+l[1]*_,l[4]<=0?T=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(O=(M=Math.sqrt(Math.pow((l[2]-l[0])*u,2)+Math.pow((l[3]-l[1])*_,2)))*l[4],T=Math.max(M,O),A=l[2]>=l[0]?l[3]>=l[1]?Math.asin((l[3]-l[1])*_/M):-Math.asin((l[1]-l[3])*_/M):l[3]>=l[1]?Ot(180)-Math.asin((l[3]-l[1])*_/M):Math.asin((l[1]-l[3])*_/M)-Ot(180))):(y=c[0][1]===Et?f+c[0][0]:f+c[0][0]*u*.01,g=c[1][1]===Et?d+c[1][0]:d+c[1][0]*_*.01,m=1,"closest-corner"===l&&"circle"===h?T=y<=f||p<=y||g<=d||v<=g?Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(M=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,Math.sqrt(Math.pow(M,2)+Math.pow(O,2))):"closest-side"===l||"closest-corner"===l?y<=f||p<=y||g<=d||v<=g?T=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(E=1,M=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,T=Math.min(M,O),"closest-corner"===l&&(E=Math.sqrt(2)),M*=E,O*=E,T*=E):(M=y<=f?f-y+u:p<=y?y-p+u:y<f+.5*u?p-y:y-f,O=g<=d?d-g+_:v<=g?g-v+_:g<d+.5*_?v-g:g-d,T=Math.max(M,O),"farthest-side"!==l&&(m=Math.sqrt(2)),M*=m,O*=m,T*=m)),"circle"===h&&(M=O=T),[y,g,T,M,O,A]),6),N=I[0],w=I[1],C=I[2],D=I[3],P=I[4],L=I[5],F=1,B=1;return D===P&&!L||(S=[1,0,0,1,0,0],L&&(b=Math.sin(L),S=[x=Math.cos(L),b,-b,x,0,0]),D!==C&&(R=[F=D/C,0,0,1,0,0],S=Vt.multiply(S,R)),P!==C&&(k=[1,0,0,B=P/C,0,0],S=Vt.multiply(S,k))),{cx:N,cy:w,r:C,stop:At(t,C),scx:F,scy:B,matrix:S,d:L}},getConic:function(t,e,r,n,i,a,o){var s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,h=Kt(function(t,e,r,n,i,a){var o,s,h,l,c,u=i-r,_=a-n;o=e[0][1]===Et?r+e[0][0]:r+e[0][0]*u*.01;s=e[1][1]===Et?n+e[1][0]:n+e[1][0]*_*.01;l=r+.5*u<=o?o-r:i-o;c=n+.5*_<=s?s-n:a-s;return h=Math.sqrt(Math.pow(l,2)+Math.pow(c,2)),[o,s,h,t]}(e,r,n,i,a,o),4),l=h[0],c=h[1],u=h[2];return u<<=1,{cx:l,cy:c,r:u*=s,deg:h[3],stop:At(t,1)}}},xt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"border-box",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",alignSelf:"auto",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,scaleX:1,scaleY:1,skewX:0,skewY:0,rotateZ:0,filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal"},St={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},Rt=[],kt=[];Object.keys(xt).forEach(function(t){kt.push(t);var e=xt[t];Rt.push({k:t,v:e})});var It=[],Nt=[];Object.keys(St).forEach(function(t){Nt.push(t);var e=St[t];It.push({k:t,v:e})});var wt={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto"},Ct=[];Object.keys(wt).forEach(function(t){Ct.push(t)});var Dt={DOM:xt,GEOM:St,isValid:function(t){return xt.hasOwnProperty(t)||St.hasOwnProperty(t)},DOM_KEY_SET:kt,GEOM_KEY_SET:Nt,DOM_ENTRY_SET:Rt,GEOM_ENTRY_SET:It,INHERIT:wt,INHERIT_KEY_SET:Ct},Pt=zt.isNil;function Lt(t,e,r,n){Pt(t.flexGrow)&&(t.flexGrow=e||0),Pt(t.flexShrink)&&(t.flexShrink=r||0),Pt(t.flexBasis)&&(t.flexBasis=n||0)}var Ft={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderWidthTop","borderWidthRight","borderWidthBottom","borderWidthLeft"],borderColor:["borderColorTop","borderColorRight","borderColorBottom","borderColorLeft"],borderStyle:["borderStyleTop","borderStyleRight","borderStyleBottom","borderStyleLeft"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],scale:["scaleX","scaleY"],rotate:["rotateZ"],skew:["skewX","skewY"],toFull:function(n,t){var e,r,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A=this,b=n[t];if("background"===t)Pt(n.backgroundImage)&&((e=Z.gradient.exec(b))?(n.backgroundImage=e[0],b=b.replace(e[0],"")):(r=Z.img.exec(b))&&(n.backgroundImage=r[0],b=b.replace(r[0],""))),!Pt(n.backgroundRepeat)||(i=/(no-)?repeat(-[xy])?/i.exec(b))&&(n.backgroundRepeat=i[0].toLowerCase()),!Pt(n.backgroundColor)||(a=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(b))&&(n.backgroundColor=a[0],b=b.replace(a[0],"")),!Pt(n.backgroundPosition)||(o=b.match(Z.position))&&(n.backgroundPosition=o.join(" "),this.toFull(n,"backgroundPosition"));else if("flex"===t){"none"===b?Lt(n,0,0,"auto"):"auto"===b?Lt(n,1,1,"auto"):/^[\d.]+$/.test(b)?Lt(n,parseFloat(b),1,0):/^[\d.]+px$/i.test(b)?Lt(n,1,1,0):/^[\d.]+%$/.test(b)?Lt(n,1,1,b):/^[\d.]+\s+[\d.]+$/.test(b)?(s=b.split(/\s+/),Lt(n,parseFloat(s[0]),parseFloat(s[1]),0)):/^[\d.]+\s+[\d.]+%$/.test(b)?(h=b.split(/\s+/),Lt(n,parseFloat(h[0]),1,h[1])):/^[\d.]+\s+[\d.]+\s+[\d.]+(px|%)?$/.test(b)?(l=b.split(/\s+/),Lt(n,parseFloat(l[0]),parseFloat(l[1]),l[2])):/^[\d.]+\s+[\d.]+\s+(auto|none)$/.test(b)?(c=b.split(/\s+/),Lt(n,parseFloat(c[0]),parseFloat(c[1]),c[2])):Lt(n,0,1,"auto")}else if("borderRadius"===t){1===(b=b.toString().split("/")).length&&(b[1]=b[0]);for(var x=0;x<2;x++){var S=b[x].toString().split(/\s+/);0===S.length?b[x]=[0,0,0,0]:1===S.length?b[x]=[S[0],S[0],S[0],S[0]]:2===S.length?b[x]=[S[0],S[1],S[0],S[1]]:3===S.length?b[x]=[S[0],S[1],S[2],S[1]]:b[x]=S.slice(0,4)}this[t].forEach(function(t,e){Pt(n[t])&&(n[t]=b[0][e]+" "+b[1][e])})}else{"backgroundPosition"===t?(Array.isArray(b)||(b=[b]),u=this[t].map(function(t){return Pt(n[t])}),b.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),A[t].forEach(function(t,e){u[e]&&(n[t]=n[t]||[],n[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(_=b.toString().split(/\s*,\s*/)).length&&(_[1]=_[0]),this[t].forEach(function(t,e){Pt(n[t])&&(n[t]=_[e])})):"margin"===t||"padding"===t?(m=n,M=this[E=t],T=m[E],Pt(T)||(O=T.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi))&&(1===O.length?O[3]=O[2]=O[1]=O[0]:2===O.length?(O[2]=O[0],O[3]=O[1]):3===O.length&&(O[3]=O[1]),M.forEach(function(t,e){Pt(m[t])&&(m[t]=O[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(g=(f=n)[d=t],Pt(g)||(Pt(f[d+"Width"])&&(p=/\b[\d.]+px\b/i.exec(g),f[d+"Width"]=p?p[0]:0),Pt(f[d+"Style"])&&(v=/\b(solid|dashed|dotted)\b/i.exec(g),f[d+"Style"]=v?v[1]:"solid"),Pt(f[d+"Color"])&&((y=/#[0-9a-f]{3,8}/i.exec(g))&&-1<[4,7,9].indexOf(y[0].length)?f[d+"Color"]=y[0]:/\btransparent\b/i.test(g)?f[d+"Color"]="transparent":(y=/rgba?\s*\(.+\)/i.exec(g),f[d+"Color"]=y?y[0]:"transparent")))):this[t]&&this[t].forEach(function(t){Pt(n[t])&&(n[t]=b)})}}},Bt={list:[],data:{},charWidth:{}},Ht=v.STYLE_KEY,Gt=Ht.FONT_SIZE,Yt=Ht.FONT_FAMILY,Wt=Ht.FONT_WEIGHT,Ut={},$t={},qt=[],Zt=[];function Jt(t,e,r,n,i){var a,o;return(o=t?n[t]?n[t]:n[t]=document.createElement("canvas"):(a=n===Ut?qt:Zt).length?a.pop():document.createElement("canvas")).width=e,o.height=r,"undefined"!=typeof karas&&karas.debug&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",n===Ut?"canvas":"webgl"),t&&o.setAttribute("key",t),i&&o.setAttribute("message",i),document.body.appendChild(o)),{canvas:o,ctx:n===Ut?o.getContext("2d"):o.getContext("webgl")||o.getContext("experimental-webgl"),draw:function(){},available:!0,release:function(){n===Ut?qt.push(this.canvas):Zt.push(this.canvas),this.canvas=null,this.ctx=null}}}var Qt,te,ee={},re={measureText:function(){var t=Bt.list,l=Bt.data,c="",u=[],_=[];if(Object.keys(l).forEach(function(t){var e=l[t],r=e.key,n=e.style,i=e.s;if(i)for(var a="position:absolute;font-family:".concat(n[Yt],";font-size:").concat(n[Gt],"px;font-weight:").concat(n[Wt]),o=0,s=i.length;o<s;o++){u.push(r);var h=i.charAt(o);_.push(h),c+='<span style="'.concat(a,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}}),c){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=c;for(var r=e.childNodes,n=Bt.charWidth,i=0,a=r.length;i<a;i++){var o=r[i],s=u[i],h=_[i],f=window.getComputedStyle(o,null);n[s][h]=parseFloat(f.width)}t.forEach(function(t){return t.__measureCb()}),Bt.list=[],Bt.data={},document.body.removeChild(e)}},IMG:ee,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){var n,i,a,o,t,s;Array.isArray(e)?(n=0,i=e.length,a=[],e.forEach(function(t,e){re.measureImg(t,function(t){a[e]=t,++n===i&&r(a)})})):2===(o=ee[e]=ee[e]||{state:0,task:[]}).state?r&&r(o):1===o.state?r&&o.task.push(r):(o.state=1,r&&o.task.push(r),(t=new Image).onload=function(){o.state=2,o.success=!0,o.width=t.width,o.height=t.height,o.source=t,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},t.onerror=function(t){re.error("Measure img failed: "+e),o.state=2,o.success=!1,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},"data:"===e.substr(0,5)||(s=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&location.hostname!==s[1]&&(t.crossOrigin="anonymous"),t.src=e,"undefined"!=typeof karas&&karas.debug&&document.body.appendChild(t))},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(te=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(re.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),re.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},ie.toString=function(){return te.toString()},ie),cancelAnimationFrame:(Qt=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(re.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),re.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},ne.toString=function(){return Qt.toString()},ne),now:function(){return"undefined"!=typeof performance?(re.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(re.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&Ut.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,n){return Jt(r,t,e,Ut,n)},releaseCacheCanvas:function(t){qt.push(t)},delCacheCanvas:function(t){t&&delete Ut[t]},hasCacheWebgl:function(t){return t&&$t.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,n){return Jt(r,t,e,$t,n)},releaseCacheWebgl:function(t){Zt.push(t)},delCacheWebgl:function(t){t&&delete $t[t]},isDom:function(t){if(t){if(zt.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if(zt.isFunction(t.getElementsByTagName))return!0}return!1}};function ne(t){return Qt.apply(this,arguments)}function ie(t){return te.apply(this,arguments)}var ae=v.STYLE_KEY,oe=[[ae.BACKGROUND_COLOR],[ae.BORDER_BOTTOM_COLOR],[ae.BORDER_LEFT_COLOR],[ae.BORDER_RIGHT_COLOR],[ae.BORDER_TOP_COLOR],[ae.COLOR]],se=[[ae.FONT_SIZE],[ae.BORDER_BOTTOM_WIDTH],[ae.BORDER_LEFT_WIDTH],[ae.BORDER_RIGHT_WIDTH],[ae.BORDER_TOP_WIDTH],[ae.LEFT],[ae.TOP],[ae.RIGHT],[ae.BOTTOM],[ae.FLEX_BASIS],[ae.WIDTH],[ae.HEIGHT],[ae.LINE_HEIGHT],[ae.MARGIN_BOTTOM],[ae.MARGIN_LEFT],[ae.MARGIN_TOP],[ae.MARGIN_RIGHT],[ae.PADDING_TOP],[ae.PADDING_RIGHT],[ae.PADDING_BOTTOM],[ae.PADDING_LEFT],[ae.STROKE_WIDTH],[ae.STROKE_MITERLIMIT],[ae.LETTER_SPACING]],he=[[ae.BACKGROUND_IMAGE],[ae.FILL],[ae.STROKE]],le=[[ae.BORDER_TOP_LEFT_RADIUS],[ae.BORDER_TOP_RIGHT_RADIUS],[ae.BORDER_BOTTOM_RIGHT_RADIUS],[ae.BORDER_BOTTOM_LEFT_RADIUS]],ce={};oe.forEach(function(t){ce[t]=!0});var ue={};se.forEach(function(t){ue[t]=!0});var _e={};le.forEach(function(t){_e[t]=!0});var fe={};he.forEach(function(t){fe[t]=!0});var de=[[ae.TRANSLATE_X],[ae.TRANSLATE_Y],[ae.SKEW_X],[ae.SKEW_Y],[ae.SCALE_X],[ae.SCALE_Y],[ae.ROTATE_Z]],pe={};de.forEach(function(t){pe[t]=!0});var ve,ye,ge={KEY_COLOR:oe,KEY_EXPAND:de,KEY_GRADIENT:he,KEY_LENGTH:se,KEY_RADIUS:le,COLOR_HASH:ce,EXPAND_HASH:pe,GRADIENT_HASH:fe,LENGTH_HASH:ue,RADIUS_HASH:_e,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},me=Dt.DOM,Ee=Dt.GEOM,Me=x.INHERIT,Oe=v.STYLE_KEY,Te={},Ae=[],be=c({},Oe.POINTER_EVENTS,!0),xe=(c(ve={},Oe.TRANSFORM,!0),c(ve,Oe.TRANSLATE_X,!0),c(ve,Oe.TRANSLATE_Y,!0),c(ve,Oe.SKEW_X,!0),c(ve,Oe.SKEW_Y,!0),c(ve,Oe.SCALE_X,!0),c(ve,Oe.SCALE_Y,!0),c(ve,Oe.ROTATE_Z,!0),c(ve,Oe.COLOR,!0),c(ve,Oe.FONT_STYLE,!0),c(ve,Oe.STROKE_WIDTH,!0),c(ve,Oe.FILL,!0),c(ve,Oe.STROKE_DASHARRAY,!0),c(ve,Oe.STROKE_LINECAP,!0),c(ve,Oe.STROKE_LINEJOIN,!0),c(ve,Oe.STROKE_MITERLIMIT,!0),c(ve,Oe.BACKGROUND_COLOR,!0),c(ve,Oe.BACKGROUND_IMAGE,!0),c(ve,Oe.BACKGROUND_POSITION_X,!0),c(ve,Oe.BACKGROUND_POSITION_Y,!0),c(ve,Oe.BACKGROUND_REPEAT,!0),c(ve,Oe.BACKGROUND_SIZE,!0),c(ve,Oe.STROKE,!0),c(ve,Oe.BORDER_BOTTOM_COLOR,!0),c(ve,Oe.BORDER_LEFT_COLOR,!0),c(ve,Oe.BORDER_RIGHT_COLOR,!0),c(ve,Oe.BORDER_TOP_COLOR,!0),c(ve,Oe.BORDER_TOP_LEFT_RADIUS,!0),c(ve,Oe.BORDER_TOP_RIGHT_RADIUS,!0),c(ve,Oe.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(ve,Oe.BORDER_BOTTOM_LEFT_RADIUS,!0),c(ve,Oe.VISIBILITY,!0),c(ve,Oe.OPACITY,!0),c(ve,Oe.Z_INDEX,!0),c(ve,Oe.FILTER,!0),c(ve,Oe.BOX_SHADOW,!0),c(ve,Oe.OVERFLOW,!0),c(ve,Oe.BACKGROUND_CLIP,!0),ve),Se=(c(ye={},Oe.FONT_SIZE,!0),c(ye,Oe.FONT_WEIGHT,!0),c(ye,Oe.FONT_FAMILY,!0),ye),Re={GEOM:Te,GEOM_KEY_SET:Ae,IGNORE:be,REPAINT:xe,MEASURE:Se,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Re.addGeom(e,t,r)}):t&&(Te.hasOwnProperty(t)||Ae.push(t),(Te[t]=Te[t]||{})[e]=r||!0)}};function ke(t,e){return Te.hasOwnProperty(e)&&Te[e].hasOwnProperty(t)}Re.isIgnore=function(t){return be.hasOwnProperty(t)},Re.isGeom=ke,Re.isRepaint=function(t){return xe.hasOwnProperty(t)||ke(t)},Re.isMeasure=function(t){return Se.hasOwnProperty(t)},Re.isValid=function(t,e){return!!e&&(!!me.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Ee.hasOwnProperty(e))||!!Te.hasOwnProperty(e)&&Te[e].hasOwnProperty(t)))};var Ie,Ne,we,Ce=Re.MEASURE_KEY_SET=Object.keys(Se).map(function(t){return parseInt(t)}),De=Ce.length;Re.isMeasureInherit=function(t){for(var e=0;e<De;e++){var r=Ce[e];if(t.hasOwnProperty(r)&&t[r][1]===Me)return!0}return!1},Re.measureInheritList=function(t){for(var e=[],r=0;r<De;r++){var n=Ce[r];t.hasOwnProperty(n)&&t[n][1]===Me&&e.push(n)}return e},Re.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Re.addGeom("$circle",["r"]),Re.addGeom("$ellipse",["rx","ry"]),Re.addGeom("$rect",["rx","ry"]),Re.addGeom("$sector",["begin","end","edge","closure"]),Re.addGeom("$polyline",["points","controls","start","end"]),Re.addGeom("$polygon",["points","controls","start","end"]);var Pe=v.STYLE_KEY,Le=v.STYLE_RV_KEY,Fe=v.style2Upper,Be=v.STYLE_KEY,He=Be.POSITION,Ge=Be.WIDTH,Ye=Be.HEIGHT,We=Be.TRANSLATE_X,Ue=Be.TRANSLATE_Y,Ke=Be.SCALE_X,Xe=Be.SCALE_Y,Ve=Be.SKEW_X,ze=Be.SKEW_Y,je=Be.ROTATE_Z,$e=Be.TRANSFORM,qe=Be.TRANSFORM_ORIGIN,Ze=Be.BACKGROUND_IMAGE,Je=Be.BACKGROUND_COLOR,Qe=Be.BACKGROUND_POSITION_X,tr=Be.BACKGROUND_POSITION_Y,er=Be.BACKGROUND_SIZE,rr=Be.OPACITY,nr=Be.Z_INDEX,ir=Be.COLOR,ar=Be.FONT_SIZE,or=Be.FONT_FAMILY,sr=Be.FONT_WEIGHT,hr=Be.FONT_STYLE,lr=Be.LINE_HEIGHT,cr=Be.TEXT_ALIGN,ur=Be.FILTER,_r=Be.VISIBILITY,fr=Be.BOX_SHADOW,dr=Be.POINTER_EVENTS,pr=Be.FILL,vr=Be.STROKE,yr=Be.STROKE_WIDTH,gr=Be.STROKE_DASHARRAY,mr=Be.BORDER_TOP_WIDTH,Er=Be.BORDER_RIGHT_WIDTH,Mr=Be.BORDER_BOTTOM_WIDTH,Or=Be.BORDER_LEFT_WIDTH,Tr=Be.DISPLAY,Ar=Be.FLEX_DIRECTION,br=Be.FLEX_GROW,xr=Be.FLEX_SHRINK,Sr=Be.FLEX_BASIS,Rr=Be.JUSTIFY_CONTENT,kr=Be.ALIGN_SELF,Ir=Be.ALIGN_ITEMS,Nr=Be.MATRIX,wr=Be.LETTER_SPACING,Cr=Be.BACKGROUND_CLIP,Dr=x.AUTO,Pr=x.PX,Lr=x.PERCENT,Fr=x.NUMBER,Br=x.INHERIT,Hr=x.DEG,Gr=x.RGBA,Yr=x.STRING,Wr=zt.isNil,Ur=zt.rgba2int,Kr=zt.equalArr,Xr=Re.MEASURE_KEY_SET,Vr=Re.isGeom,zr=Re.GEOM,jr=Re.GEOM_KEY_SET,$r=ge.COLOR_HASH,qr=ge.LENGTH_HASH,Zr=ge.RADIUS_HASH,Jr=ge.GRADIENT_HASH,Qr=ge.EXPAND_HASH,tn=ge.GRADIENT_TYPE,en={translateX:We,translateY:Ue,scaleX:Ke,scaleY:Xe,skewX:Ve,skewY:ze,rotateZ:je,rotate:je};function rn(t,e,r){return"auto"===r?t[e]=[0,Dr]:"inherit"===r?t[e]=[0,Br]:/%$/.test(r)?(r=parseFloat(r)||0,t[e]=[r,Lr]):/px$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Pr]):/deg$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Hr]):(r=parseFloat(r)||0,t[e]=[r,Fr]),e!==Or&&e!==mr&&e!==Er&&e!==Mr&&e!==Ge&&e!==Ye&&e!==Sr||(t[e][0]=Math.max(t[e][0],0)),t}function nn(t,e){t===Ke||t===Xe?e[1]=Fr:t===We||t===Ue?e[1]===Fr&&(e[1]=Pr):e[1]===Fr&&(e[1]=Hr)}function an(t){for(var e=t[or].split(","),r="arial",n=0,i=e.length;n<i;n++)if(R.support(e[n])){r=e[n];break}return t[ar]*(R.info[r]||R.info.arial).lhr}function on(t,e,r){for(t*=.01;e;){var n=e.currentStyle[r];if(n[1]===Dr){if(r!==Ge)break;e=e.domParent}else{if(n[1]===Pr)return t*n[0];n[1]===Lr&&(t*=.01*n[0],e=e.domParent)}}return t}var sn=(c(Ie={},He,!0),c(Ie,Tr,!0),c(Ie,Pe.BACKGROUND_REPEAT,!0),c(Ie,Ar,!0),c(Ie,br,!0),c(Ie,xr,!0),c(Ie,Rr,!0),c(Ie,Ir,!0),c(Ie,kr,!0),c(Ie,Pe.OVERFLOW,!0),c(Ie,Pe.MIX_BLEND_MODE,!0),c(Ie,Pe.STROKE_LINECAP,!0),c(Ie,Pe.STROKE_LINEJOIN,!0),c(Ie,Pe.STROKE_MITERLIMIT,!0),c(Ie,Pe.FILL_RULE,!0),c(Ie,rr,!0),c(Ie,nr,!0),c(Ie,Cr,!0),Ie),hn=(c(Ne={},ir,!0),c(Ne,Je,!0),c(Ne,Pe.BORDER_TOP_COLOR,!0),c(Ne,Pe.BORDER_RIGHT_COLOR,!0),c(Ne,Pe.BORDER_BOTTOM_COLOR,!0),c(Ne,Pe.BORDER_LEFT_COLOR,!0),Ne),ln=(c(we={},Pe.BORDER_TOP_LEFT_RADIUS,!0),c(we,Pe.BORDER_TOP_RIGHT_RADIUS,!0),c(we,Pe.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(we,Pe.BORDER_BOTTOM_LEFT_RADIUS,!0),c(we,qe,!0),we);var cn={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!zt.isObject(a))return{};var e,_,r,n,i,o,s,h,l,c,u,f,d,p={},v=(a=zt.extend({},a)).border;if(v&&Ft.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){Ft.toFull(a,t)}),(v=a.borderWidth)&&Ft.toFull(a,"borderWidth"),(v=a.borderColor)&&Ft.toFull(a,"borderColor"),(v=a.borderStyle)&&Ft.toFull(a,"borderStyle"),(v=a.borderRadius)&&Ft.toFull(a,"borderRadius"),(v=a.background)&&Ft.toFull(a,"background"),v=a.backgroundPosition,Wr(v)||Ft.toFull(a,"backgroundPosition"),(v=a.flex)&&Ft.toFull(a,"flex"),v=a.margin,Wr(v)||Ft.toFull(a,"margin"),v=a.padding,Wr(v)||Ft.toFull(a,"padding"),["translate","scale","skew"].forEach(function(t){v=a[t],Wr(v)||Ft.toFull(a,t)}),v=a.rotate,Wr(v)||Ft.toFull(a,"rotate"),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ"].forEach(function(t){var e=a[t];!Wr(e)&&a.transform&&re.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,r=t.v;Wr(a[e])&&(a[e]=r)}),void 0!==(v=a.backgroundImage)&&(v?Array.isArray(v)?p[Ze]=v.map(function(t){return t?Z.gradient.test(t)?bt.parseGradient(t):Z.img.test(t)?Z.img.exec(t)[2]:null:null}):Z.gradient.test(v)?p[Ze]=[bt.parseGradient(v)]:Z.img.test(v)?p[Ze]=[Z.img.exec(v)[2]]:p[Ze]=[null]:p[Ze]=[null]),(v=a.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(v))&&-1<[4,7,9].indexOf(e[0].length)?p[Je]=[Ur(e[0]),Gr]:(e=/rgba?\s*\(.+\)/i.exec(v),p[Je]=[Ur(e?e[0]:[0,0,0,0]),Gr])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){v=a[t],Wr(v)||(t=e?tr:Qe,Array.isArray(v)?v.length?p[t]=v.map(function(t){if(/%$/.test(t)||/px$/i.test(t)||/^-?[\d.]+$/.test(t)){var e=[];return rn(e,0,t),e[0][1]===Fr&&(e[0][1]=Pr),e[0]}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Lr]}):p[t]=[0,Lr]:/%$/.test(v)||/px$/i.test(v)||/^-?[\d.]+$/.test(v)?(rn(p,t,v),(v=p[t])[1]===Fr&&(v[1]=Pr),p[t]=[v]):p[t]=[[{top:0,left:0,center:50,right:100,bottom:100}[v]||0,Lr]])}),v=a.backgroundSize){var y=p[er]=[];if(Array.isArray(v))v.length?y=v.map(function(t){if(!t)return[[0,Dr],[0,Dr]];var e=t.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],n=0;n<2;n++){var i=e[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(rn(r,n,i),r[n][1]===Fr&&(r[n][1]=Pr)):"0"===i||0===i?r.push([0,Pr]):"contain"===i||"cover"===i?r.push([i,Yr]):r.push([0,Dr])}return r}return[[0,Dr],[0,Dr]]}):y.push([[0,Dr],[0,Dr]]);else{var g=v.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(g){1===g.length&&("contain"===g[0]||"cover"===g[0]?g[1]=g[0]:g[1]="auto");for(var m=[],E=0;E<2;E++){var M=g[E];/%$/.test(M)||/px$/i.test(M)||/^-?[\d.]+$/.test(M)?(rn(m,E,M),m[E][1]===Fr&&(m[E][1]=Pr)):"0"===M||0===M?m.push([0,Pr]):"contain"===M||"cover"===M?m.push([M,Yr]):m.push([0,Dr])}y.push(m)}else y.push([[0,Dr],[0,Dr]])}}if(["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];Wr(e)||(p[Pe[Fe(t)]]=[Ur(e),Gr])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!Wr(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var n=0;n<2;n++){var i=r[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(rn(r,n,i),r[n][1]===Fr&&(r[n][1]=Pr)):r[n]=[0,Pr]}p[Pe[Fe(t)]]=r}}),(v=a.transform)&&(_=p[$e]=[],(r=(v||"").toString().match(/\w+\(.+?\)/g))&&r.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.indexOf("("),c=t.slice(0,l),u=t.slice(l+1,t.length-1);"matrix"===c?(6<(e=(e=u.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length&&(e=e.slice(0,6)),6===e.length&&_.push([Nr,e])):en.hasOwnProperty(c)?(nn(r=en[c],(n=rn([r,u],1,u))[1]),_.push(n)):{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)&&(1===(i=u.toString().split(/\s*,\s*/)).length&&(i[1]=i[0].slice(0)),a=Pe[Fe(c+"X")],o=Pe[Fe(c+"Y")],s=rn([a,i[0]],1,i[0]),h=rn([o,i[1]],1,i[1]),nn(a,s[1]),nn(o,h[1]),_.push(s),_.push(h))})),v=a.transformOrigin,!Wr(v)){var O=p[qe]=[],T=v.toString().match(Z.position);if(T){1===T.length&&(T[1]=T[0]);for(var A=0;A<2;A++){var b=T[A];/%$/.test(b)||/px$/i.test(b)||/^-?[\d.]+$/.test(b)?(rn(O,A,b),O[A][1]===Fr&&(O[A][1]=Pr)):(O.push([{top:0,left:0,center:50,right:100,bottom:100}[b],Lr]),Wr(O[A][0])&&(O[A][0]=50))}}else O.push([50,Lr]),O.push([50,Lr])}return["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e,r=a[t];Wr(r)||(e=en[t],rn(p,e,r),nn(e,p[e]))}),v=a.opacity,Wr(v)||(v=parseFloat(v),isNaN(v)?p[rr]=1:(v=Math.max(v,0),v=Math.min(v,1),p[rr]=v)),v=a.zIndex,Wr(v)||(p[nr]=parseInt(v)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height","flexBasis"].forEach(function(t){var e,r=a[t];Wr(r)||(e=Pe[Fe(t)],rn(p,e,r),(r=p[e])[1]===Fr&&(r[1]=Pr),{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),v=a.color,Wr(v)||(p[ir]="inherit"===v?[[],Br]:[Ur(v),Gr]),!(v=a.fontSize)&&0!==v||("inherit"===v?p[ar]=[0,Br]:/%$/.test(v)?(n=Math.max(0,parseFloat(v)),p[ar]=n?[n,Lr]:[16,Pr]):p[ar]=[Math.max(0,parseFloat(v))||16,Pr]),v=a.fontWeight,Wr(v)||(p[sr]="bold"===v?[700,Fr]:"normal"===v?[400,Fr]:"lighter"===v?[200,Fr]:"inherit"===v?[0,Br]:[Math.max(0,parseInt(v))||400,Fr]),(v=a.fontStyle)&&(p[hr]="inherit"===v?[0,Br]:[v,Yr]),(v=a.fontFamily)&&(p[or]="inherit"===v?[0,Br]:[v.replace(/['"]/,"").replace(/\s*,\s*/g,","),Yr]),(v=a.textAlign)&&(p[cr]="inherit"===v?[0,Br]:[v,Yr]),void 0!==(v=a.lineHeight)&&("inherit"===v?p[lr]=[0,Br]:"normal"===v?p[lr]=[0,Dr]:/px$/i.test(v)?p[lr]=[parseFloat(v),Pr]:(i=Math.max(0,parseFloat(v))||"normal",p[lr]="normal"===i?[null,Dr]:[i,Fr])),void 0!==(v=a.letterSpacing)&&("inherit"===v?p[wr]=[0,Br]:"normal"===v?p[wr]=[0,Pr]:/px$/i.test(v)?p[wr]=[parseFloat(v),Pr]:(o=Math.max(0,parseFloat(v))||0,p[wr]=[o,Pr])),void 0!==(v=a.fill)&&(v?Array.isArray(v)?v.length?p[pr]=v.map(function(t){return t?Z.gradient.test(t)?bt.parseGradient(t):Ur(t):"none"}):p[pr]=["none"]:Z.gradient.test(v)?p[pr]=[bt.parseGradient(v)]:p[pr]=[Ur(v)]:p[pr]=["none"]),void 0!==(v=a.stroke)&&(v?Array.isArray(v)?v.length?p[vr]=v.map(function(t){return t?Z.gradient.test(t)?bt.parseGradient(t):Ur(t):"none"}):p[vr]=["none"]:Z.gradient.test(v)?p[vr]=[bt.parseGradient(v)]:p[vr]=[Ur(v)]:p[vr]=["none"]),v=a.strokeWidth,Wr(v)||(Array.isArray(v)?v.length?p[yr]=v.map(function(t){var e=[];return rn(e,0,t),e[0][1]===Fr&&(e[0][1]=Pr),e[0]}):p[yr]=[0,Pr]:(rn(s=p[yr]=[],0,v),s[0][1]===Fr&&(s[0][1]=Pr))),v=a.strokeDasharray,Wr(v)||(Array.isArray(v)?p[gr]=v.map(function(t){var e=t.toString().match(/[\d.]+/g);return e?((e=e.map(function(t){return parseFloat(t)})).length%2==1&&e.push(e[e.length-1]),e):[]}):(h=v.toString().match(/[\d.]+/g))?((h=h.map(function(t){return parseFloat(t)})).length%2==1&&h.push(h[h.length-1]),p[gr]=[h]):p[gr]=[[]]),void 0!==(v=a.filter)&&(l=null,!(c=/\bblur\s*\(\s*([\d.]+)\s*(?:px)?\s*\)/i.exec(v||""))||(u=parseFloat(c[1])||0)&&(l=[["blur",u]]),p[ur]=l),(v=a.visibility)&&(p[_r]="inherit"===v?[0,Br]:[v,Yr]),(v=a.pointerEvents)&&(p[dr]="inherit"===v?[0,Br]:[v,Yr]),void 0!==(v=a.boxShadow)&&(f=null,(d=(v||"").match(/(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?\s*)?(-?[\d.]+(px)?\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&d.forEach(function(t){var e=/(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?\s*)?(-?[\d.]+(?:px)?\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){f=f||[];for(var r=[e[1],e[2],e[3]||0,e[4]||0,e[5]||"#000",e[6]||"outset"],n=0;n<4;n++)rn(r,n,r[n]),1<n&&r[n][0]<0&&(r[n]=0),r[n][1]===Fr&&(r[n]=r[n][0]);r[4]=Ur(r[4]),f.push(r)}}),p[fr]=f),["position","display","flexDirection","justifyContent","alignItems","alignSelf","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","flexGrow","flexShrink","zIndex","backgroundClip"].forEach(function(t){a.hasOwnProperty(t)&&(p[Pe[Fe(t)]]=a[t])}),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;a.hasOwnProperty(t)&&(e=a[t],p[Pe[Fe(t)]]=Array.isArray(e)?e:[e])}),jr.forEach(function(t){a.hasOwnProperty(t)&&(p[t]=a[t])}),p},computeMeasure:function(t,r){var n=t.currentStyle,i=t.computedStyle,e=t.parent,a=!r&&e.computedStyle;Xr.forEach(function(t){var e=n[t];e[1]===Br?i[t]=r?Dt.INHERIT[Le[t]]:a[t]:e[1]===Lr?i[t]=r?Dt.INHERIT[Le[t]]:a[t]*e[1]*.01:i[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,n=t.computedStyle,i=t.parent,a=!i,o=i&&i.computedStyle;[mr,Er,Mr,Or].forEach(function(t){n[t]=r[t][1]===Pr?Math.max(0,r[t][0]):0}),[He,Tr,Ar,Rr,Ir,kr,br,xr,Cr].forEach(function(t){n[t]=r[t]});var s=r[cr];s[1]===Br?n[cr]=a?"left":o[cr]:n[cr]=s[0];var h=r[lr];h[1]===Br?n[lr]=a?an(n):o[lr]:h[1]===Pr?n[lr]=Math.max(h[0],0)||an(n):h[1]===Fr?n[lr]=Math.max(h[0],0)*n[ar]||an(n):n[lr]=an(n);var l=r[wr];l[1]===Br?n[wr]=a?0:o[wr]:n[wr]=l[0]},setFontStyle:function(t){var e=t[ar];return(t[hr]||"normal")+" "+(t[sr]||"400")+" "+e+"px/"+e+"px "+(t[or]||"arial")},getBaseLine:function(t){for(var e=t[ar],r=t[or].split(","),n="arial",i=0,a=r.length;i<a;i++)if(R.support(r[i])){n=r[i];break}var o=e*(R.info[n]||R.info.arial).lhr;return.5*(t[lr]-o)+e*(R.info[r]||R.info.arial).blr},calRelative:function(t,e,r,n,i){return r[1]===Dr?r=0:-1<[Pr,Fr,Hr,Gr,Yr].indexOf(r[1])?r=r[0]:r[1]===Lr&&(r=on(r[0],n,i?Ge:Ye)),r},calAbsolute:function(t,e,r,n){return r[1]===Dr?r=0:-1<[Pr,Fr,Hr,Gr,Yr].indexOf(r[1])?r=r[0]:r[1]===Lr&&(r=r[0]*n*.01),r},equalStyle:function(t,e,r,n){if(!e||!r)return e===r;if(t===$e){if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var o=e[i],s=r[i];if(o[0]!==s[0])return!1;if(!Kr(o[1],s[1]))return!1}return!0}if(t===ur){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!Kr(e[h],r[h]))return!1}if(t===er){if(e.length!==r.length)return!1;for(var c=0,u=e.length;c<u;c++){var _=e[c],f=r[c];if(_[0][0]!==f[0][0]||_[0][1]!==f[0][1]||_[1][0]!==f[1][0]||_[1][1]!==f[1][1])return!1}return!0}if(t===qe||Zr.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Qe||t===tr||qr.hasOwnProperty(t)||Qr.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===fr)return Kr(e,r);if($r.hasOwnProperty(t))return e[1]===r[1]&&Kr(e[0],r[0]);if(Jr.hasOwnProperty(t)&&e.k===r.k&&tn.hasOwnProperty(e.k)){var d=e.v,p=r.v;if(e.d!==r.d||d.length!==p.length)return!1;for(var v=0,y=d.length;v<y;v++){var g=d[v],m=p[v];if(g.length!==m.length)return!1;for(var E=0;E<4;E++)if(g[0][E]!==m[0][E])return!1;if(1<g.length&&(g[1][0]!==m[1][0]||g[1][1]!==m[1][1]))return!1}return!0}return Vr(n.tagName,t)&&(n.isMulti||Array.isArray(e)&&Array.isArray(r))?Kr(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[He];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){for(var r={},n=0,i=(e=e||Object.keys(t).map(function(t){return zr.hasOwnProperty(t)||(t=parseInt(t)),t})).length;n<i;n++){var a=e[n],o=t[a];if(a===Ze)r[a]=o.map(function(t){return t.k?zt.clone(t):t});else if(a===pr||a===vr)r[a]=o.map(function(t){return t.k?zt.clone(t):t.slice(0)});else if(a===$e){if(o){for(var s=o.slice(0),h=0,l=s.length;h<l;h++)s[h]=s[h].slice(0),s[h][1]=s[h][1].slice(0);r[a]=s}}else if(a===fr)o&&(o=o.map(function(t){var e=t.slice(0);return e[4]=e[4].slice(0),e}),r[a]=o);else if(sn.hasOwnProperty(a))r[a]=o;else if(zr.hasOwnProperty(a))r[a]=zt.clone(o);else if(o){var c=r[a]=o.slice(0);if(a===Qe||a===tr)for(var u=0,_=c.length;u<_;u++)c[u]=c[u].slice(0);else if(a===er)for(var f=0,d=c.length;f<d;f++)c[f]=c[f].slice(0),c[f][0]=c[f][0].slice(0),c[f][1]=c[f][1].slice(0);else if(hn.hasOwnProperty(a))c[0]=c[0].slice(0);else if(ln.hasOwnProperty(a))c[0]=c[0].slice(0),c[1]=c[1].slice(0);else if(a===$e)for(var p=0,v=c.length;p<v;p++)c[p]=c[p].slice(0)}}return r}},un=v.STYLE_KEY,_n=un.COLOR,fn=un.FONT_WEIGHT,dn=un.FONT_FAMILY,pn=un.FONT_SIZE,vn=un.FONT_STYLE,yn=un.LETTER_SPACING,gn=function(){function a(t,e,r,n,i){g(this,a),this.__parent=t,this.__x=e,this.__y=r,this.__width=n,this.__content=i,this.__virtualDom={}}return l(a,[{key:"render",value:function(t,e,r,n,i,a,o,s){var h=this.content,l=this.x,c=this.y,u=this.parent,_=u.ox,f=u.oy;c+=cn.getBaseLine(r),l+=_+i,c+=f+a;var d,p=r[yn],v=0,y=h.length;if(t===Xt.CANVAS)if(p)for(;v<y;v++)e.fillText(h.charAt(v),l,c),l+=s[o+v]+p;else e.fillText(h,l,c);else t===Xt.SVG&&(d=[["x",l],["y",c],["fill",n[_n]],["font-family",r[dn]],["font-weight",r[fn]],["font-style",r[vn]],["font-size",r[pn]+"px"]],p&&d.push(["letter-spacing",p]),this.__virtualDom={type:"item",tagName:"text",props:d,content:zt.encodeHtml(h)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return cn.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),a}(),mn=v.STYLE_KEY,En=mn.DISPLAY,Mn=mn.LINE_HEIGHT,On=mn.FONT_SIZE,Tn=mn.FONT_FAMILY,An=mn.FONT_WEIGHT,bn=mn.COLOR,xn=mn.VISIBILITY,Sn=mn.TEXT_ALIGN,Rn=mn.LETTER_SPACING,kn=function(){t(n,S);var r=e(n);function n(t){var e;return g(this,n),(e=r.call(this)).__content=zt.isNil(t)?"":t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return l(n,[{key:"__computeMeasure",value:function(t,e){var r=this.content,n=this.computedStyle,i=this.charWidthList;i.splice(0),t===Xt.CANVAS&&(e.font=cn.setFontStyle(n));for(var a=this.__key=n[On]+","+n[Tn]+","+n[An],o=Bt.data[a]=Bt.data[a]||{key:a,style:n,hash:{},s:[]},s=Bt.charWidth[a]=Bt.charWidth[a]||{},h=0,l=!1,c=0,u=r.length;c<u;c++){var _=r.charAt(c),f=void 0;s.hasOwnProperty(_)?(f=s[_],i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):t===Xt.CANVAS?(f=s[_]=e.measureText(_).width,i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):(o.hash.hasOwnProperty(_)||(o.s+=_),o.hash[_]=!0,i.push(-1),l=!0)}this.__textWidth=h,l&&Bt.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,n=this.__key,i=Bt.charWidth[n],a=0,o=0,s=r.length;o<s;o++){r[o]<0&&(a+=t=r[o]=i[e.charAt(o)],this.__charWidth=Math.max(this.charWidth,t))}this.__textWidth=a}},{key:"__layout",value:function(t,e){var r=this,n=t.x,i=t.y,a=t.w;this.__x=this.__sx1=n,this.__y=this.__sy1=i;var o=this.isDestroyed,s=this.content,h=this.computedStyle,l=this.lineBoxes,c=this.charWidthList;if(!o&&"none"!==h[En]){this.__ox=this.__oy=0,l.splice(0);for(var u,_,f,d,p=0,v=0,y=0,g=s.length,m=0,E=h[Mn],M=h[Rn];v<g;){(y+=c[v]+M)===a?(u=new gn(this,n,i,y,s.slice(p,v+1)),l.push(u),m=Math.max(m,y),i+=E,v=p=v+1,y=0):a<y?(_=void 0,_=v===p?(v=p+1,y):y-c[v],f=new gn(this,n,i,_,s.slice(p,v)),l.push(f),m=Math.max(m,_),i+=E,p=v,y=0):v++}if(p<g&&p<v){for(y=0,v=p;v<g;v++)y+=c[v]+M;var O=new gn(this,n,i,y,s.slice(p,g));l.push(O),m=Math.max(m,y),i+=E}this.__width=m,this.__height=i-t.y,e||(d=h[Sn],-1<["center","right"].indexOf(d)&&l.forEach(function(t){var e=r.__width-t.width;0<e&&t.__offsetX("center"===d?.5*e:e)}))}}},{key:"__offsetX",value:function(e,t){et(tt(n.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){et(tt(n.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;e===Xt.SVG&&(this.__virtualDom={type:"text",children:[]});var h,l,c=this.isDestroyed,u=this.computedStyle,_=this.lineBoxes,f=this.cacheStyle,d=this.charWidthList;if(c||"none"===u[En]||"hidden"===u[xn])return!1;e===Xt.CANVAS&&(h=cn.setFontStyle(u),r.font!==h&&(r.font=h),l=f[bn],r.fillStyle!==l&&(r.fillStyle=l));var p=0;return _.forEach(function(t){t.render(e,r,u,f,o,s,p,d),p+=t.content.length}),e===Xt.SVG&&(this.virtualDom.children=_.map(function(t){return t.virtualDom})),!0}},{key:"__deepScan",value:function(t){t(this)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes;if(!t.length)return 0;var e=t[t.length-1];return e.y-this.y+e.baseLine}},{key:"currentStyle",get:function(){return this.parent.currentStyle}},{key:"computedStyle",get:function(){return this.parent.computedStyle}},{key:"cacheStyle",get:function(){return this.parent.__cacheStyle}},{key:"bbox",get:function(){if(this.content){var t=this.sx,e=this.sy;return[t,e,t+this.width,e+this.height]}}}]),n}();kn.prototype.__renderByMask=kn.prototype.render;var In={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a];if(Array.isArray(s)){i=a;break}}t.moveTo(e[i][0]+r,e[i][1]+n);for(var h=i+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+n):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n,c[4]+r,c[5]+n))}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=0,r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){e=r;break}}for(var a="M"+t[e][0]+","+t[e][1],o=e+1,s=t.length;o<s;o++){var h=t[o];Array.isArray(h)&&(2===h.length?a+="L"+h[0]+","+h[1]:4===h.length?a+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(a+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return a},canvasLine:function(t,e,r,n,i,a,o,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(a[0]+h,a[1]+l,o[0]+h,o[1],n+h,i+l),2):2===s?(t.quadraticCurveTo(o[0]+h,o[1]+l,n+h,i+l),2):1===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,n+h,i+l),2):(t.lineTo(n+h,i+l),1)},svgLine:function(t,e,r,n,i,a,o){return 3===o?"M"+t+","+e+"C"+i[0]+","+i[1]+" "+a[0]+","+a[1]+" "+r+","+n:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+n:1===o?"M"+t+","+e+"Q"+i[0]+","+i[1]+" "+r+","+n:"M"+t+","+e+"L"+r+","+n}};function Nn(t,e,r,n){var i=r-t,a=n-e,o=Math.atan(Math.abs(a)/Math.abs(i));return i<0&&0<=a?Math.PI-o:i<0&&a<0?o-Math.PI:0<=i&&0<=a?o:-o}function wn(t){var e=Math.sin(t),r=Math.cos(t),n=Vt.identity();return n[0]=n[3]=r,n[1]=e,n[2]=-e,n}function Cn(t,e){var r=Kt(t,6),n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],h=r[5],l=Kt(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=(a-n)*(h-i)-(s-n)*(o-i),v=(_-c)*(l[5]-u)-(d-c)*(f-u);return 0<p&&v<0||p<0&&0<v}var Dn={exchangeOrder:function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g=(c=Kt(t,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=[0,1,2],f<u&&f<p?(u=(r=[f,d,u,_])[0],_=r[1],f=r[2],d=r[3],y[0]=1,y[1]=0):p<f&&p<u&&(u=(n=[p,v,u,_])[0],_=n[1],p=n[2],v=n[3],y[0]=2,y[2]=0),u===f?d<_&&(u=(i=[f,d,u,_])[0],_=i[1],f=i[2],d=i[3],a=y[0],y[0]=y[1],y[1]=a):u===p&&v<_&&(u=(o=[p,v,u,_])[0],_=o[1],p=o[2],v=o[3],s=y[0],y[0]=y[2],y[2]=s),(f-u)*(v-_)-(p-u)*(d-_)<0&&(f=(h=[p,v,f,d])[0],d=h[1],p=h[2],v=h[3],l=y[1],y[1]=y[2],y[2]=l),[u,_,f,d,p,v,y]),m=Kt(g,7),E=m[0],M=m[1],O=m[2],T=m[3],A=m[4],b=m[5],x=Kt(function(t,e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,m[6]),6);return[[E,M,O,T,A,b],[x[0],x[1],x[2],x[3],x[4],x[5]]]},isOverflow:Cn,transform:function(t,e){var r,n=Kt(t,6),i=n[0],a=n[1],o=n[2],s=n[3],h=n[4],l=n[5],c=Kt(e,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=Cn(t,e),g=Vt.identity();g[4]=-i,g[5]=-a;var m=Nn(i,a,o,s);0!==m&&(r=wn(-m),g=Vt.multiply(r,g));var E=jt.pointsDistance(i,a,o,s),M=jt.pointsDistance(u,_,f,d),O=Vt.identity();O[4]=-u,O[5]=-_;var T=m=Nn(u,_,f,d);0!==m&&(r=wn(-m),O=Vt.multiply(r,O));var A=Math.abs(Vt.calPoint([h,l],g)[1]),b=Math.abs(Vt.calPoint([p,v],O)[1]);E===M&&A===b||(r=Vt.identity(),E!==M&&(r[0]=M/E),A!==b&&(r[3]=b/A),g=Vt.multiply(r,g)),O=g;var x=Kt(Vt.calPoint([i,a],O),2),S=x[0],R=x[1],k=Kt(Vt.calPoint([o,s],O),2),I=k[0],N=k[1],w=Kt(Vt.calPoint([h,l],O),2),C=w[0],D=w[1],P=jt.pointsDistance(S,R,I,N),L=jt.pointsDistance(S,R,C,D),F=jt.pointsDistance(C,D,I,N),B=jt.pointsDistance(u,_,f,d),H=jt.pointsDistance(u,_,p,v),G=jt.pointsDistance(p,v,f,d),Y=jt.angleBySide(F,P,L),W=jt.angleBySide(G,B,H);return Y!==W&&((r=Vt.identity())[2]=Math.tan(Y-.5*Math.PI)+Math.tan(.5*Math.PI-W),g=Vt.multiply(r,g)),y&&(g[1]=-g[1],g[3]=-g[3],g[5]=-g[5]),(r=0!==T?wn(T):Vt.identity())[4]=u,r[5]=_,g=Vt.multiply(r,g)}},Pn={matrix:Vt,tar:Dn,geom:jt},Ln=v.STYLE_KEY,Fn=Ln.TRANSLATE_X,Bn=Ln.TRANSLATE_Y,Hn=Ln.SCALE_X,Gn=Ln.SCALE_Y,Yn=Ln.SKEW_X,Wn=Ln.SKEW_Y,Un=Ln.ROTATE_Z,Kn=Ln.MATRIX,Xn=x.PX,Vn=x.PERCENT,zn=Pn.matrix,jn=Pn.geom,$n=zn.identity,qn=zn.calPoint,Zn=zn.multiply,Jn=zn.isE,Qn=jn.d2r,ti=jn.pointInPolygon;function ei(t,e,r){var i,a,o,n=(i=e,a=r,o=[],t.forEach(function(t){var e=Kt(t,2),r=e[0],n=e[1];o.push([r,function(t,e,r,n){if(t===Fn){if(e[1]===Vn)return e[0]*r*.01}else if(t===Bn){if(e[1]===Vn)return e[0]*n*.01}else if(t===Kn)return e;return e[0]}(r,n,i,a)])}),o),c=$n();return n.forEach(function(t){var e,r,n,i,a,o=Kt(t,2),s=o[0],h=o[1],l=$n();e=l,n=h,(r=s)===Fn?e[4]=n:r===Bn?e[5]=n:r===Hn?e[0]=n:r===Gn?e[3]=n:r===Yn?(n=Qn(n),e[2]=Math.tan(n)):r===Wn?(n=Qn(n),e[1]=Math.tan(n)):r===Un?(n=Qn(n),i=Math.sin(n),a=Math.cos(n),e[0]=e[3]=a,e[1]=i,e[2]=-i):r===Kn&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5]),c=Zn(c,l)}),c}function ri(t,e){var r=Kt(e,2),n=r[0],i=r[1];if(0===n&&0===i)return t.slice(0);var a=$n();a[4]=n,a[5]=i;var o=Zn(a,t),s=$n();return s[4]=-n,s[5]=-i,Zn(o,s)}var ni={calMatrix:ei,calOrigin:function(t,r,n){var i=[];return t.forEach(function(t,e){t[1]===Xn?i.push(t[0]):t[1]===Vn&&i.push(t[0]*(e?n:r)*.01)}),i},calMatrixByOrigin:ri,calMatrixWithOrigin:function(t,e,r,n){return ri(ei(t,r,n),e)},pointInQuadrilateral:function(t,e,r,n,i,a,o,s,h,l,c){if(!c||Jn(c))return r<=t&&n<=e&&t<=o&&e<=s;var u=Kt(qn([r,n],c),2);r=u[0],n=u[1];var _=Kt(qn([i,a],c),2);i=_[0],a=_[1];var f=Kt(qn([h,l],c),2);h=f[0],l=f[1];var d=Kt(qn([o,s],c),2);return o=d[0],s=d[1],ti(t,e,[[r,n],[i,a],[o,s],[h,l]])}},ii=jt.H;function ai(t,e,r,n,i,a,o,s){var h=1,l=1,c=1;t:for(var u=a;i<=u;u--)for(var _=s;o<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+n)%f)continue}if(1<r)if(u<(e+n)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function oi(t,e,r,n,i,a){var o=i-e,s=n-r,h=r-e,l=i-n;if("dotted"===t)return ai(o,h,l,s,a,a,Math.max(1,.25*a),2*a);var c=ai(o,h,l,s,a,3*a,Math.max(1,.25*a),2*a),u=c.n,_=c.ps,f=c.pd;return 1===u?ai(o,h,l,s,a,a,Math.max(1,.25*a),2*a):{n:u,ps:_,pd:f}}function si(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Kt(_,2),p=d[0],v=d[1],y=Kt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,K,X,V=u[G];V[1][0]<P?F.push(V):V[0][0]>L?H.push(V):V[1][0]>L&&V[0][0]<P?(W=P<i?s+Math.tan(e)*(P-n):h,U=a<L?s+Math.tan(r)*(o-L):h,F.push([V[0],[P,s],[P,W],V[3]]),P<L&&(i<P&&L<a?B.push([[P,s],[L,s],[L,h],[P,h]]):i<P?(B.push([[P,s],[a,s],[a,h],[P,h]]),B.push([[a,s],[L,s],[L,U],[a,h]])):L<a?(B.push([[P,s],[i,s],[i,h],[P,W]]),B.push([[i,s],[L,s],[L,h],[i,h]])):(B.push([[P,s],[i,s],[i,h],[P,W]]),B.push([[i,s],[a,s],[a,h],[i,h]]),B.push([[a,s],[L,s],[L,U],[a,h]]))),H.push([[L,s],V[1],V[2],[L,U]])):V[1][0]>L?(K=a<L?s+Math.tan(r)*(o-L):h,B.push([V[0],[L,s],[L,K],V[3]]),H.push([[L,s],V[1],V[2],[L,K]])):V[0][0]<P?(X=P<i?s+Math.tan(e)*(P-n):h,F.push([V[0],[P,s],[P,X],V[3]]),B.push([[P,s],V[1],V[2],[P,X]])):B.push(V)}F.length&&(E=i-n<p&&t<v,M=Math.atan((i-n)/(h-s)),T=(O=v)/p,A=s+v,x=(b=v-(h-s))/(p-(i-n)),R=Kt((S=hi(F[0][0],F[0][1],P,A,T,O,!0,Math.tan(M)*O))[0],2),C=R[0],D=R[1],E&&(I=Kt((k=hi(F[0][3],F[0][2],P,A,x,b,!0,Math.tan(M)*b))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=hi(t[0],t[1],P,A,T,O),E&&(n=hi(t[3],t[2],P,A,x,b)));for(var i=0,a=r.length;i<a;i++)mi(r[i],C,D,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),E){for(var o=0,s=n.length;o<s;o++)mi(n[o],N,w,0);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=o-a<g&&t<m,j=Math.atan((o-a)/(h-s)),q=($=m)/g,Z=s+m,Q=(J=m-(h-s))/(g-(o-a)),et=Kt((tt=li(H[ht-1][0],H[ht-1][1],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],z&&(nt=Kt((rt=li(H[ht-1][3],H[ht-1][2],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=li(t[0],t[1],L,Z,q,$),z&&(n=li(t[3],t[2],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)mi(r[i],ot,st,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),z){for(var o=0,s=n.length;o<s;o++)mi(n[o],it,at,1);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}})),F.concat(B).concat(H)}function hi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(-y+r)*i,T=(-E+r)*i,A=Math.atan(T/(n-M)),b=r-Math.sin(A)*a/i,x=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=jt.h(Math.abs(f-A))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*R/i,n-Math.cos(I)*R],[r-Math.sin(N)*R/i,n-Math.cos(N)*R],[b,x]]}function li(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(y-r)*i,T=(E-r)*i,A=Math.atan(O/(n-g)),b=r+Math.sin(A)*a/i,x=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(T/(n-M)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),A===f)return[[b,x]];var S=jt.h(Math.abs(A-f))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[b,x],[r+Math.sin(I)*R/i,n-Math.cos(I)*R],[r+Math.sin(N)*R/i,n-Math.cos(N)*R],[d,p]]}function ci(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Kt(_,2),p=d[0],v=d[1],y=Kt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,K,X,V=u[G];V[2][1]<P?F.push(V):V[1][1]>L?H.push(V):V[2][1]>L&&V[1][1]<P?(W=P<h?a+Math.tan(r)*(h-P):a,U=l<L?a+Math.tan(e)*(L-l):a,F.push([V[0],V[1],[o,P],[W,P]]),P<L&&(L<l&&h<P?B.push([[a,P],[o,P],[o,L],[a,L]]):h<P?(B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]])):L<l?(B.push([[W,P],[o,P],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,L],[a,L]])):(B.push([[W,P],[o,P],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]]))),H.push([[U,L],[o,L],V[2],V[3]])):V[2][1]>L?(K=l<L?a+Math.tan(e)*(L-l):a,B.push([V[0],V[1],[o,L],[K,L]]),H.push([[K,L],[o,L],V[2],V[3]])):V[1][1]<P?(X=P<h?a+Math.tan(r)*(h-P):a,F.push([V[0],V[1],[o,P],[X,P]]),B.push([[X,P],[o,P],V[2],V[3]])):B.push(V)}F.length&&(E=h-s<v&&t<p,M=Math.atan((o-a)/(h-s)),T=(O=v)/p,A=o-p,x=(b=v-(h-s))/(p-(o-a)),R=Kt((S=ui(F[0][1],F[0][2],A,P,T,O,!0,Math.tan(M)*O))[S.length-1],2),C=R[0],D=R[1],E&&(I=Kt((k=ui(F[0][0],F[0][3],A,P,x,b,!0,Math.tan(M)*b))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=ui(t[1],t[2],A,P,T,O),E&&(n=ui(t[0],t[3],A,P,x,b)));for(var i=0,a=r.length;i<a;i++)mi(r[i],C,D,2);if(E){for(var o=0,s=n.length;o<s;o++)mi(n[o],N,w,2);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=c-l<m&&t<g,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=o-g,Q=(J=m-(c-l))/(g-(o-a)),et=Kt((tt=_i(H[ht-1][1],H[ht-1][2],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],z&&(nt=Kt((rt=_i(H[ht-1][0],H[ht-1][3],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=_i(t[1],t[2],Z,L,q,$),z&&(n=_i(t[0],t[3],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)mi(r[i],ot,st,3);if(z){for(var o=0,s=n.length;o<s;o++)mi(n[o],it,at,3);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function ui(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(y-r)*i,T=(E-r)*i,A=Math.atan(T/(n-M)),b=r+Math.sin(A)*a/i,x=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=jt.h(Math.abs(f-A))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r+Math.sin(I)*R/i,w=n-Math.cos(I)*R,C=A-k;return[[b,x],[r+Math.sin(C)*R/i,n-Math.cos(C)*R],[N,w],[d,p]]}function _i(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(y-r)*i,T=(E-r)*i,A=Math.atan(O/(g-n)),b=r+Math.sin(A)*a/i,x=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(T/(M-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[b,x]];var S=jt.h(Math.abs(A-f))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r+Math.sin(I)*R/i,w=n+Math.cos(I)*R,C=f+k;return[[d,p],[r+Math.sin(C)*R/i,n+Math.cos(C)*R],[N,w],[b,x]]}function fi(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Kt(_,2),p=d[0],v=d[1],y=Kt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,K,X,V=u[G];V[2][0]<P?F.push(V):V[3][0]>L?H.push(V):V[2][0]>L&&V[3][0]<P?(W=P<i?c-Math.tan(e)*(P-n):h,U=a<L?c-Math.tan(r)*(o-L):l,F.push([V[0],[P,W],[P,c],V[3]]),P<L&&(i<P&&L<a?B.push([[P,l],[L,l],[L,c],[P,c]]):i<P?(B.push([[P,l],[a,l],[a,c],[P,c]]),B.push([[a,l],[L,U],[L,c],[a,c]])):L<a?(B.push([[P,W],[i,l],[i,c],[P,c]]),B.push([[i,l],[L,l],[L,c],[i,c]])):(B.push([[P,W],[i,l],[i,c],[P,c]]),B.push([[i,l],[a,l],[a,c],[i,c]]),B.push([[a,l],[L,U],[L,c],[a,c]]))),H.push([[L,U],V[1],V[2],[L,c]])):V[2][0]>L?(K=a<L?c-Math.tan(r)*(o-L):l,B.push([V[0],[L,K],[L,c],V[3]]),H.push([[L,K],V[1],V[2],[L,c]])):V[3][0]<P?(X=P<i?c-Math.tan(e)*(P-n):l,F.push([V[0],[P,X],[P,c],V[3]]),B.push([[P,X],V[1],V[2],[P,c]])):B.push(V)}F.length&&(E=i-n<p&&t<v,M=Math.atan((i-n)/(c-l)),T=(O=v)/p,A=c-v,x=(b=v-(c-l))/(p-(i-n)),R=Kt((S=di(F[0][3],F[0][2],P,A,T,O,!0,Math.tan(M)*O))[0],2),C=R[0],D=R[1],E&&(I=Kt((k=di(F[0][0],F[0][1],P,A,x,b,!0,Math.tan(M)*b))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=di(t[3],t[2],P,A,T,O),E&&(n=di(t[0],t[1],P,A,x,b)));for(var i=0,a=r.length;i<a;i++)mi(r[i],C,D,4);if(E){for(var o=0,s=n.length;o<s;o++)mi(n[o],N,w,4);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=o-a<g&&t<m,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=c-m,Q=(J=m-(c-l))/(g-(o-a)),et=Kt((tt=pi(H[ht-1][3],H[ht-1][2],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],z&&(nt=Kt((rt=pi(H[ht-1][0],H[ht-1][1],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=pi(t[3],t[2],L,Z,q,$),z&&(n=pi(t[0],t[1],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)mi(r[i],ot,st,5);if(z){for(var o=0,s=n.length;o<s;o++)mi(n[o],it,at,5);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),F.concat(B).concat(H)}function di(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(-y+r)*i,T=(-E+r)*i,A=Math.atan(T/(M-n)),b=r-Math.sin(A)*a/i,x=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(O/(g-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),f===A)return[[d,p]];var S=jt.h(Math.abs(f-A))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*R/i,n+Math.cos(I)*R],[r-Math.sin(N)*R/i,n+Math.cos(N)*R],[b,x]]}function pi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(y-r)*i,T=(E-r)*i,A=Math.atan(O/(g-n)),b=r+Math.sin(A)*a/i,x=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(T/(M-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[b,x]];var S=jt.h(Math.abs(A-f))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[b,x],[r+Math.sin(I)*R/i,n+Math.cos(I)*R],[r+Math.sin(N)*R/i,n+Math.cos(N)*R],[d,p]]}function vi(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Kt(_,2),p=d[0],v=d[1],y=Kt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,K,X,V=u[G];V[3][1]<P?F.push(V):V[0][1]>L?H.push(V):V[3][1]>L&&V[0][1]<P?(W=P<h?i-Math.tan(r)*(h-P):i,U=l<L?i-Math.tan(e)*(L-l):i,F.push([V[0],V[1],[W,P],[n,P]]),P<L&&(L<l&&h<P?B.push([[n,P],[i,P],[i,L],[n,L]]):h<P?(B.push([[n,P],[i,P],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]])):L<l?(B.push([[n,P],[W,P],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,L],[n,L]])):(B.push([[n,P],[W,P],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]]))),H.push([[n,L],[U,L],V[2],V[3]])):V[3][1]>L?(K=l<L?i-Math.tan(e)*(L-l):i,B.push([V[0],V[1],[K,L],[n,L]]),H.push([[n,L],[K,L],V[2],V[3]])):V[1][1]<P?(X=P<h?i-Math.tan(r)*(h-P):i,F.push([V[0],V[1],[X,P],[n,P]]),B.push([[n,P],[X,P],V[2],V[3]])):B.push(V)}F.length&&(E=h-s<v&&t<p,M=Math.atan((i-n)/(h-s)),T=(O=v)/p,A=n+p,x=(b=v-(h-s))/(p-(i-n)),R=Kt((S=yi(F[0][0],F[0][3],A,P,T,O,!0,Math.tan(M)*O))[S.length-1],2),C=R[0],D=R[1],E&&(I=Kt((k=yi(F[0][1],F[0][2],A,P,x,b,!0,Math.tan(M)*b))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=yi(t[0],t[3],A,P,T,O),E&&(n=yi(t[1],t[2],A,P,x,b)));for(var i=0,a=r.length;i<a;i++)mi(r[i],C,D,6);if(E){for(var o=0,s=n.length;o<s;o++)mi(n[o],N,w,6);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=c-l<m&&t<g,j=Math.atan((i-n)/(c-l)),q=($=m)/g,Z=n+g,Q=(J=m-(c-l))/(g-(i-n)),et=Kt((tt=gi(H[ht-1][0],H[ht-1][3],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],z&&(nt=Kt((rt=gi(H[ht-1][1],H[ht-1][2],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=gi(t[0],t[3],Z,L,q,$),z&&(n=gi(t[1],t[2],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)mi(r[i],ot,st,7);if(z){for(var o=0,s=n.length;o<s;o++)mi(n[o],it,at,7);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function yi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(r-y)*i,T=(r-E)*i,A=Math.atan(T/(n-M)),b=r-Math.sin(A)*a/i,x=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=jt.h(Math.abs(f-A))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r-Math.sin(I)*R/i,w=n-Math.cos(I)*R,C=A-k;return[[b,x],[r-Math.sin(C)*R/i,n-Math.cos(C)*R],[N,w],[d,p]]}function gi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Kt(t,2),y=v[0],g=v[1],m=Kt(e,2),E=m[0],M=m[1],O=(r-y)*i,T=(r-E)*i,A=Math.atan(O/(g-n)),b=r-Math.sin(A)*a/i,x=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(T/(M-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[b,x]];var S=jt.h(Math.abs(A-f))*a,R=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r-Math.sin(I)*R/i,w=n+Math.cos(I)*R,C=f+k;return[[d,p],[r-Math.sin(C)*R/i,n+Math.cos(C)*R],[N,w],[b,x]]}function mi(t,e,r,n){0===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===n?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===n||6===n?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===n&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Ei={calPoints:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var v=0===_||2===_?oi(e,i,a,o,s,t):oi(e,h,l,c,u,t),y=v.n,g=v.ps,m=v.pd;if(1<y){for(var E=0;E<y;E++){var M=E===y-1,O=void 0,T=void 0,A=void 0,b=(O=0===_||2===_?E?i+g*E+m*E:i:E?h+g*E+m*E:h)+g;0===_?b<=a?M?p.push([[i,h],[s,h],[o,l],[a,l]]):(T=h+(O-i)*Math.tan(r),A=h+(b-i)*Math.tan(r),p.push([[O,h],[b,h],[b,A],[O,T]])):o<=O?(T=h+(s-O)*Math.tan(n),A=h+(s-b)*Math.tan(n),M?p.push([[O,h],[s,h],[s,h],[O,T]]):p.push([[O,h],[b,h],[b,A],[O,T]])):O<a?(T=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,T]]),M?(p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[s,h],[s,h],[a,l]])):o<b?(A=h+(s-b)*Math.tan(n),p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[b,h],[b,A],[o,l]])):p.push([[a,h],[b,h],[b,l],[a,l]])):o<b?(T=h+(s-b)*Math.tan(n),O<a?(A=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,A]]),p.push([[a,h],[o,h],[o,l],[a,l]])):p.push([[O,h],[o,h],[o,l],[O,l]]),M?p.push([[o,h],[s,h],[s,h],[o,l]]):p.push([[o,h],[b,h],[b,T],[o,l]])):M?p.push([[O,h],[s,h],[o,l],[O,l]]):p.push([[O,h],[b,h],[b,l],[O,l]]):1===_?b<=l?M?p.push([[o,l],[s,h],[s,u],[o,c]]):(T=s-(O-h)*Math.tan(r),A=s-(b-h)*Math.tan(r),p.push([[T,O],[s,O],[s,b],[A,b]])):c<=O?(T=o+(O-c)*Math.tan(n),A=o+(b-c)*Math.tan(n),M?p.push([[T,O],[s,O],[s,u],[s,u]]):p.push([[T,O],[s,O],[s,b],[A,b]])):O<l?(T=o+(l-O)*Math.tan(r),p.push([[T,O],[s,O],[s,l],[o,l]]),M?(p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,u],[s,u]])):c<b?(A=o+(b-c)*Math.tan(n),p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,b],[A,b]])):p.push([[o,l],[s,l],[s,b],[o,b]])):c<b?(T=o+(b-c)*Math.tan(n),O<l?(A=o+(l-O)*Math.tan(r),p.push([[A,O],[s,O],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),M?p.push([[o,c],[s,c],[s,s],[s,s]]):p.push([[o,c],[s,c],[s,b],[T,b]])):(p.push([[o,O],[s,O],[s,c],[o,c]]),M?p.push([[o,c],[s,c],[s,u],[s,u]]):p.push([[o,c],[s,c],[s,b],[T,b]]))):M?p.push([[o,O],[s,O],[s,u],[o,c]]):p.push([[o,O],[s,O],[s,b],[o,b]]):2===_?b<=a?M?p.push([[i,u],[a,c],[o,c],[s,u]]):(T=u-(O-i)*Math.tan(r),A=u-(b-i)*Math.tan(r),p.push([[O,T],[b,A],[b,u],[O,u]])):o<=O?(T=u-(s-O)*Math.tan(n),A=u-(s-b)*Math.tan(n),M?p.push([[O,T],[s,u],[s,u],[O,u]]):p.push([[O,T],[b,A],[b,u],[O,u]])):O<a?(T=u-(O-i)*Math.tan(r),p.push([[O,T],[a,c],[a,u],[O,u]]),M?(p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[s,u],[s,u],[o,u]])):o<b?(A=u-(b-o)*Math.tan(n),p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[b,A],[b,u],[o,u]])):p.push([[a,c],[b,c],[b,u],[a,u]])):o<b?(T=u-(s-b)*Math.tan(n),O<a?(A=u-(O-o)*Math.tan(r),p.push([[O,A],[a,c],[a,u],[O,u]]),p.push([[a,c],[o,c],[o,u],[a,u]])):p.push([[O,c],[o,c],[o,u],[O,u]]),M?p.push([[o,c],[s,u],[s,u],[o,u]]):p.push([[o,c],[b,T],[b,u],[o,u]])):M?p.push([[O,c],[o,c],[s,u],[O,u]]):p.push([[O,c],[b,c],[b,u],[O,u]]):3===_&&(b<=l?M?p.push([[i,h],[a,l],[a,c],[i,u]]):(T=i+(O-h)*Math.tan(r),A=i+(b-h)*Math.tan(r),p.push([[i,O],[T,O],[A,b],[i,b]])):c<=O?(T=i+(u-O)*Math.tan(n),A=i+(u-b)*Math.tan(n),M?p.push([[i,O],[T,O],[i,u],[i,u]]):p.push([[i,O],[T,O],[A,b],[i,b]])):O<l?(T=i+(O-h)*Math.tan(r),p.push([[i,O],[T,O],[a,l],[i,l]]),M?(p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[i,u],[i,u]])):c<b?(A=i+(u-b)*Math.tan(n),p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[A,b],[i,b]])):p.push([[i,l],[a,l],[a,b],[i,b]])):c<b?(T=i+(u-b)*Math.tan(n),O<l?(A=i+(O-h)*Math.tan(r),p.push([[i,O],[A,O],[a,l],[i,h]]),p.push([[i,l],[a,l],[a,c],[i,c]])):p.push([[i,O],[a,O],[a,c],[i,c]]),M?p.push([[i,c],[a,c],[i,u],[i,u]]):p.push([[i,c],[a,c],[T,b],[i,b]])):M?p.push([[i,O],[a,O],[a,c],[i,u]]):p.push([[i,O],[a,O],[a,b],[i,b]]))}if(0===_)return si(t,r,n,i,a,o,s,h,l,0,0,p,f,d);if(1===_)return ci(t,r,n,0,0,o,s,h,l,c,u,p,f,d);if(2===_)return fi(t,r,n,i,a,o,s,0,l,c,u,p,f,d);if(3===_)return vi(t,r,n,i,a,0,0,h,l,c,u,p,f,d)}}return 0===_?(i<a&&p.push([[i,h],[a,h],[a,l],[i,h]]),p.push([[a,h],[o,h],[o,l],[a,l]]),o<s&&p.push([[o,h],[s,h],[s,h],[o,l]]),si(t,r,n,i,a,o,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),c<u&&p.push([[o,c],[s,c],[s,u],[s,u]]),ci(t,r,n,0,0,o,s,h,l,c,u,p,f,d)):2===_?(i<a&&p.push([[i,u],[a,c],[a,u],[i,u]]),p.push([[a,c],[o,c],[o,u],[a,u]]),o<s&&p.push([[o,c],[s,u],[s,u],[o,u]]),fi(t,r,n,i,a,o,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[i,h],[i,h],[a,l],[i,l]]),p.push([[i,l],[a,l],[a,c],[i,c]]),c<u&&p.push([[i,c],[a,c],[i,u],[i,u]]),vi(t,r,n,i,a,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,n,i,a,o,s){var h,l=Kt(i,2),c=l[0],u=l[1],_=Kt(a,2),f=_[0],d=_[1],p=Kt(o,2),v=p[0],y=p[1],g=Kt(s,2),m=g[0],E=g[1],c=Math.max(c,0),u=Math.max(u,0),f=Math.max(f,0),d=Math.max(d,0),v=Math.max(v,0),y=Math.max(y,0),m=Math.max(m,0),E=Math.max(E,0);if((0<c&&0<u||0<f&&0<d||0<v&&0<y||0<m&&0<E)&&(h=!0),h){var M=[];return 0<c&&0<u?(M.push([t,e+u]),M.push([t,e+u*(1-ii),t+c*(1-ii),e,t+c,e])):M.push([t,e]),0<f&&0<d?(M.push([t+r-f,e]),M.push([t+r-f*(1-ii),e,t+r,e+d*(1-ii),t+r,e+d])):M.push([t+r,e]),0<v&&0<y?(M.push([t+r,e+n-y]),M.push([t+r,e+n-y*(1-ii),t+r-v*(1-ii),e+n,t+r-v,e+n])):M.push([t+r,e+n]),0<m&&0<E?(M.push([t+m,e+n]),M.push([t+m*(1-ii),e+n,t,e+n-E*(1-ii),t,e+n-E])):M.push([t,e+n]),M}}},Mi=v.STYLE_KEY,Oi=Mi.SCALE_X,Ti=Mi.SCALE_Y,Ai=x.PERCENT,bi=x.NUMBER;var xi={matrixResize:function(t,e,r,n,i,a,o,s){if(t!==r||e!==n){var h=[[Oi,[r/t,bi]],[Ti,[n/e,bi]]],l=ni.calOrigin([[0,Ai],[0,Ai]],o,s);return l[0]+=i,l[1]+=a,ni.calMatrixWithOrigin(h,l,o,s)}}},Si=zt.isFunction,Ri=function(){function o(){g(this,o),this.__eHash={}}return l(o,[{key:"on",value:function(t,e){if(e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.on(t[r],e);else if(e){this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(n,i){if(Si(i)){var a=this;if(o.__karasEventCb=i,Array.isArray(n))for(var t=0,e=n.length;t<e;t++)a.once(n[t],i);else i&&a.on(n,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.apply(a,e),a.off(n,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e||a[i].__karasEventCb===e){a.splice(i,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)this.emit(t[i],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var l=o[s];Si(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o;e.__eHash={};for(var n=["on","once","off","emit"],i=n.length-1;0<=i;i--){var a=n[i];e[a]=r[a]}}}}]),o}();c(Ri,"REFRESH","refresh"),c(Ri,"PAUSE","pause"),c(Ri,"PLAY","play"),c(Ri,"FRAME","frame"),c(Ri,"FINISH","finish"),c(Ri,"CANCEL","cancel"),c(Ri,"BEGIN","begin"),c(Ri,"END","end");var ki,Ii=zt.isFunction;function Ni(t,e,r,n){if(n)for(var i=0;i<e;i++){var a=t[i];a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s.__before&&s.__before(r)}}var wi=new(function(){function t(){g(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return l(t,[{key:"__init",value:function(){var u=this,_=u.task,f=u.taskCp;re.cancelAnimationFrame(u.id);var d=u.__now=re.now();!function c(){re.cancelAnimationFrame(u.id),u.id=re.requestAnimationFrame(function(){if(!ki&&(_.length||f.length)){var t=u.__now=re.now(),e=t-d;if(0!==(e=Math.max(e,0))){d=t;var r=_.slice(0),n=f.splice(0),i=r.length,a=n.length;Ni(r,i,e),Ni(n,a,e);for(var o=u.__hookTask.splice(0),s=0,h=o.length;s<h;s++){var l=o[s];l&&l()}Ni(r,i,e,!0),Ni(n,a,e,!0),(_.length||f.length)&&c()}else(_.length||f.length)&&c()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Ii(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,n=e.length;r<n;r++){var i=e[r];if(i===t||i.__karasFramecb===t){e.splice(r,1);break}}e.length||(re.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,n=this;e&&((r=Ii(e)?{__after:function(t){e(t),n.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),n.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){ki=!0}},{key:"resume",value:function(){ki&&(this.__init(),ki=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),Ci=4,Di=1e-7,Pi=10,Li="function"==typeof Float32Array;function Fi(t,e){return 1-3*e+3*t}function Bi(t,e){return 3*e-6*t}function Hi(t,e,r){return((Fi(e,r)*t+Bi(e,r))*t+3*e)*t}function Gi(t,e,r){return 3*Fi(e,r)*t*t+2*Bi(e,r)*t+3*e}function Yi(t){return t}function Wi(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===r)return Yi;for(var s=new(Li?Float32Array:Array)(11),t=0;t<11;++t)s[t]=Hi(.1*t,a,o);function n(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var n=e+.1*((t-s[--r])/(s[r+1]-s[r])),i=Gi(n,a,o);return.001<=i?function(t,e,r,n){for(var i=0;i<Ci;++i){var a=Gi(e,r,n);if(0===a)return e;e-=(Hi(e,r,n)-t)/a}return e}(t,n,a,o):0===i?n:function(t,e,r,n,i){for(var a,o,s=0;0<(a=Hi(o=e+(r-e)/2,n,i)-t)?r=o:e=o,Math.abs(a)>Di&&++s<Pi;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:Hi(n(t),e,r)}}var Ui={linear:Wi(1,1,0,0),easeIn:Wi(.42,0,1,1),easeOut:Wi(0,0,.58,1),ease:Wi(.25,.1,.25,1),easeInOut:Wi(.42,0,.58,1),cubicBezier:Wi};Ui["ease-in"]=Ui.easeIn,Ui["ease-out"]=Ui.easeOut,Ui["ease-in-out"]=Ui.easeInOut;var Ki=v.STYLE_KEY,Xi=Ki.FILTER,Vi=Ki.TRANSFORM_ORIGIN,zi=Ki.BACKGROUND_POSITION_X,ji=Ki.BACKGROUND_POSITION_Y,$i=Ki.BOX_SHADOW,qi=Ki.TRANSLATE_X,Zi=Ki.BACKGROUND_SIZE,Ji=Ki.FONTSIZE,Qi=Ki.FLEX_BASIS,ta=Ki.FLEX_DIRECTION,ea=Ki.WIDTH,ra=Ki.HEIGHT,na=Ki.MARGIN_RIGHT,ia=Ki.MARGIN_TOP,aa=Ki.MARGIN_LEFT,oa=Ki.MARGIN_BOTTOM,sa=Ki.PADDING_LEFT,ha=Ki.PADDING_BOTTOM,la=Ki.PADDING_RIGHT,ca=Ki.PADDING_TOP,ua=Ki.TOP,_a=Ki.RIGHT,fa=Ki.BOTTOM,da=Ki.LEFT,pa=Ki.LINE_HEIGHT,va=Ki.OPACITY,ya=Ki.Z_INDEX,ga=Ki.TRANSFORM,ma=Ki.COLOR,Ea=Ki.FONT_WEIGHT,Ma=Ki.FONT_STYLE,Oa=Ki.FONT_FAMILY,Ta=Ki.TEXT_ALIGN,Aa=Ki.MATRIX,ba=v.UPDATE_KEY,xa=ba.UPDATE_NODE,Sa=ba.UPDATE_STYLE,Ra=ba.UPDATE_KEYS,ka=ba.UPDATE_CONFIG,Ia=v.KEY_FRAME_KEY,Na=Ia.FRAME_STYLE,wa=Ia.FRAME_TIME,Ca=Ia.FRAME_EASING,Da=Ia.FRAME_TRANSITION,Pa=x.AUTO,La=x.PX,Fa=x.PERCENT,Ba=x.INHERIT,Ha=x.RGBA,Ga=x.STRING,Ya=x.NUMBER,Wa=zt.isNil,Ua=zt.isFunction,Ka=zt.isNumber,Xa=zt.isObject,Va=zt.isString,za=zt.clone,ja=zt.equalArr,$a=Ui.linear,qa=cn.cloneStyle,Za=Re.isGeom,Ja=Re.GEOM,Qa=ge.COLOR_HASH,to=ge.LENGTH_HASH,eo=ge.RADIUS_HASH,ro=ge.GRADIENT_HASH,no=ge.EXPAND_HASH,io=ge.GRADIENT_TYPE,ao={};function oo(t,e,r,n,i){var a={};a[xa]=i,a[Sa]=t,a[Ra]=e,a[ka]=r[43],n.__addUpdate(i,r[43],n,r[44],a),r[16]=t,r[0]=!0,n.__frameHook()}function so(r,n,t,i,a){return t.forEach(function(t){var e=function(t,e,r,n,i){var a=[r],o=t[r],s=e[r];if(r===ga){if(!o&&!s)return;var h=o?o[0][1]:[1,0,0,1,0,0],l=s?s[0][1]:[1,0,0,1,0,0];if(ja(h,l))return;return a[1]=[l[0]-h[0],l[1]-h[1],l[2]-h[2],l[3]-h[3],l[4]-h[4],l[5]-h[5]],a}if(r===Xi)o&&o.length?s&&s.length?a[1]=s[0][1]-o[0][1]:a[1]=-o[0][1]:a[1]=s[0][1];else if(r===Vi){a[1]=[];for(var c=0;c<2;c++){var u,_,f=o[c],d=s[c];f[1]===d[1]?a[1].push(d[0]-f[0]):f[1]===La&&d[1]===Fa?(u=.01*d[0]*n[c?"outerHeight":"outerWidth"],a[1].push(u-f[0])):f[1]===Fa&&d[1]===La&&(_=100*d[0]/n[c?"outerHeight":"outerWidth"],a[1].push(_-f[0]))}if(ja(a[1],[0,0]))return}else if(r===zi||r===ji){a[1]=[];for(var p=Math.min(o.length,s.length),v=0;v<p;v++){var y=o[v],g=s[v];if(y&&g)if(y[1]===g[1]&&-1<[La,Fa].indexOf(y[1])){var m=g[0]-y[0];if(0==m)return;a[1].push(m)}else if(o[1]===La&&s[1]===Fa){var E=.01*g[0]*n[r===zi?"clientWidth":"clientHeight"];if(0==(E-=y[0]))return;a[1].push(E)}else if(o[1]===Fa&&s[1]===La){var M=100*g[0]/n[r===zi?"clientWidth":"clientHeight"];if(0==(M-=y[0]))return;a[1].push(M)}else a[1].push(null);else a[1].push(null)}}else if(r===$i){a[1]=[];for(var O=0,T=Math.min(o.length,s.length);O<T;O++){for(var A=o[O],b=s[O],x=[],S=0;S<4;S++)x.push(b[S]-A[S]);for(var R=[],k=0;k<4;k++)R.push(b[4][k]-A[4][k]);x.push(R),a[1].push(x)}}else if(no.hasOwnProperty(r)){if(o[1]===s[1]){var I=s[0]-o[0];if(0==I)return;a[1]=I}else if(o[1]===La&&s[1]===Fa){var N=.01*s[0]*n[r===qi?"outerWidth":"outerHeight"];if(0==(N-=o[0]))return;a[1]=N}else if(o[1]===Fa&&s[1]===La){var w=100*s[0]/n[r===qi?"outerWidth":"outerHeight"];if(0==(w-=o[0]))return;a[1]=w}}else if(r===Zi){a[1]=[];for(var C,D=Math.min(o.length,s.length),P=0;P<D;P++){var L=o[P],F=s[P];if(L&&F){for(var B=[],H=0;H<2;H++){var G,Y,W=L[H],U=F[H];W[1]===U[1]&&-1<[La,Fa].indexOf(W[1])?B.push(U[0]-W[0]):W[1]===La&&U[1]===Fa?(G=.01*U[0]*n[P?"clientWidth":"clientHeight"],B.push(G-W[0])):W[1]===Fa&&U[1]===La?(Y=100*U[0]/n[P?"clientWidth":"clientHeight"],B.push(Y-W[0])):B.push(0)}ja(B,[0,0])?a[1].push(null):(a[1].push(B),C=!0)}else a[1].push(null)}if(!C)return}else if(ro.hasOwnProperty(r)){a[1]=[];for(var K=Math.min(o.length,s.length),X=0;X<K;X++){var V=o[X],z=s[X];if(V&&z&&!Va(V)&&!Va(z))if(V.k===z.k){var j=[];if("linear"===V.k||"radial"===V.k||"conic"===V.k){var $=V.v,q=z.v;j[0]=[];for(var Z=n.clientWidth,J=ja($,q),Q=0,tt=Math.min($.length,q.length);Q<tt;Q++){var et=$[Q],rt=q[Q],nt=[];nt.push([rt[0][0]-et[0][0],rt[0][1]-et[0][1],rt[0][2]-et[0][2],rt[0][3]-et[0][3]]),et[1]&&rt[1]&&(et[1][1]===rt[1][1]?nt.push(rt[1][0]-et[1][0]):et[1][1]===La&&rt[1][1]===Fa?nt.push(rt[1][0]*Z*.01-et[1][0]):et[1][1]===Fa&&rt[1][1]===La&&nt.push(100*rt[1][0]/Z-et[1][0])),j[0].push(nt)}if("linear"===V.k){var it=Array.isArray(V.d);if(Array.isArray(z.d)!==it){a[1].push(null);continue}if(it){var at=[z.d[0]-V.d[0],z.d[1]-V.d[1],z.d[2]-V.d[2],z.d[3]-V.d[3]];if(J&&ja(at,[0,0,0,0])){a[1].push(null);continue}j[1]=at}else{var ot=z.d-V.d;if(J&&0==ot){a[1].push(null);continue}j[1]=ot}}else if("radial"===V.k){var st=Array.isArray(V.z);if(Array.isArray(z.z)!==st){a[1].push(null);continue}if(st){j[2]=[];for(var ht=0;ht<5;ht++){var lt=V.z[ht];void 0===lt&&(lt=1);var ct=z.z[ht];void 0===ct&&(ct=1),j[2].push(ct-lt)}J&&ja(a[4],[0,0,0,0,0])&&a[1].push(null)}else{j[2]=[];for(var ut=0;ut<2;ut++){var _t,ft,dt=V.p[ut],pt=z.p[ut];dt[1]===pt[1]?j[2].push(pt[0]-dt[0]):dt[1]===La&&pt[1]===Fa?(_t=.01*pt[0]*n[ut?"clientWidth":"clientHeight"],j[2].push(_t-dt[0])):dt[1]===Fa&&pt[1]===La&&(ft=100*pt[0]/n[ut?"clientWidth":"clientHeight"],j[2].push(ft-dt[0]))}J&&ja(a[3],[0,0])&&a[1].push(null)}}else if("conic"===V.k){j[1].push(s.d-o.d),j[2]=[];for(var vt=0;vt<2;vt++){var yt,gt,mt=o.p[vt],Et=s.p[vt];mt[1]===Et[1]?j[2].push(Et[0]-mt[0]):mt[1]===La&&Et[1]===Fa?(yt=.01*Et[0]*n[vt?"clientWidth":"clientHeight"],j[2].push(yt-mt[0])):mt[1]===Fa&&Et[1]===La&&(gt=100*Et[0]/n[vt?"clientWidth":"clientHeight"],j[2].push(gt-mt[0]))}J&&0!==a[2]&&ja(a[3],[0,0])&&a[1].push(null)}}else ja(s,V)&&a[1].push(null),j[0]=[z[0]-V[0],z[1]-V[1],z[2]-V[2],z[3]-V[3]];a[1].push(j)}else a[1].push(null);else a[1].push(null)}}else if(Qa.hasOwnProperty(r)){if(s=s[0],o=o[0],ja(s,o)||0===s[3]&&0===o[3])return;a[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}else if(eo.hasOwnProperty(r)){if(s[0][0]===o[0][0]&&s[0][1]===o[0][1]&&s[1][0]===o[1][0]&&s[1][1]===o[1][1])return;a[1]=[];for(var Mt=0;Mt<2;Mt++)s[Mt][1]===o[Mt][1]?a[1].push(s[Mt][0]-o[Mt][0]):o[Mt][1]===La&&s[Mt][1]===Fa?a[1].push(.01*s[Mt][0]*n[Mt?"outerHeight":"outerWidth"]-o[Mt][0]):o[Mt][1]===Fa&&s[Mt][1]===La?a[1].push(100*s[Mt][0]/n[Mt?"outerHeight":"outerWidth"]-o[Mt][0]):a[1].push(0)}else if(to.hasOwnProperty(r)){if(o[1]===Pa||s[1]===Pa)return;var Ot,Tt,At=n.computedStyle,bt=(n.domParent||n).computedStyle,xt=0;if(o[1]===s[1]?xt=s[0]-o[0]:o[1]===La&&s[1]===Fa?(r===Ji?Ot=s[0]*bt[r]*.01:r===Qi&&"row"===At[ta]||r===ea||-1<[da,_a,oa,aa,ia,na,ca,la,ha,sa].indexOf(r)?Ot=s[0]*bt[ea]*.01:(r===Qi||r===ra||-1<[ua,fa].indexOf(r))&&(Ot=s[0]*bt[ra]*.01),xt=Ot-o[0]):o[1]===Fa&&s[1]===La?(r===Ji?Tt=100*s[0]/bt[r]:r===Qi&&"row"===At[ta]||r===ea||-1<[da,_a,oa,aa,ia,na,ca,la,ha,sa].indexOf(r)?Tt=100*s[0]/bt[ea]:(r===Qi||r===ra||-1<[ua,fa].indexOf(r))&&(Tt=100*s[0]/bt[ra]),xt=Tt-o[0]):r===pa&&(o[1]===La&&s[1]===Ya?xt=s[0]*At[Ji]-o[0]:o[1]===Ya&&s[1]===La&&(xt=s[0]/At[Ji]-o[0])),0===xt||isNaN(xt))return;a[1]=xt}else if(Ja.hasOwnProperty(r)){if(Wa(o))return;if(Ja[r][i]&&Ua(Ja[r][i].calDiff)){var St=Ja[r][i].calDiff;if(n.isMulti){for(var Rt=[],kt=0,It=Math.min(o.length,s.length);kt<It;kt++)Rt.push(St(o[kt],s[kt]));return Rt}a[1]=St(o,s)}else if(n.isMulti)if("points"===r||"controls"===r){if(Wa(s)||Wa(o)||ja(o,s))return;a[1]=[];for(var Nt=0,wt=Math.min(o.length,s.length);Nt<wt;Nt++){var Ct=o[Nt],Dt=s[Nt];if(Wa(Ct)||Wa(Dt))a[1].push(null);else{for(var Pt=[],Lt=0,Ft=Math.min(Ct.length,Dt.length);Lt<Ft;Lt++){var Bt=Ct[Lt],Ht=Dt[Lt];if(Wa(Bt)||Wa(Ht))Pt.push(null);else{for(var Gt=[],Yt=0,Wt=Math.max(Bt.length,Ht.length);Yt<Wt;Yt++){var Ut=Bt[Yt],Kt=Ht[Yt];Wa(Ut)||Wa(Kt)?Gt.push(0):Gt.push(Kt-Ut)}Pt.push(Gt)}}a[1].push(Pt)}}}else if("controlA"===r||"controlB"===r){if(Wa(s)||Wa(o)||ja(o,s))return;a[1]=[];for(var Xt=0,Vt=Math.min(o.length,s.length);Xt<Vt;Xt++){var zt=o[Xt],jt=s[Xt];Wa(zt)||Wa(jt)?a[1].push(null):a[1].push([jt[0]-zt[0],jt[1]-zt[1]])}}else{if(s===o||ja(s,o)||"edge"===r||"closure"===r)return;for(var $t=[],qt=0,Zt=Math.min(o.length,s.length);qt<Zt;qt++){var Jt=o[qt],Qt=s[qt];(Wa(Jt)||Wa(Qt))&&$t.push(0),$t.push(Qt-Jt)}a[1]=$t}else if("points"===r||"controls"===r){if(Wa(s)||Wa(o)||ja(o,s))return;a[1]=[];for(var te=0,ee=Math.min(o.length,s.length);te<ee;te++){var re=o[te],ne=s[te];if(Wa(re)||Wa(ne))a[1].push(null);else{for(var ie=[],ae=0,oe=Math.max(re.length,ne.length);ae<oe;ae++){var se=re[ae],he=ne[ae];Wa(se)||Wa(he)?ie.push(0):ie.push(he-se)}a[1].push(ie)}}}else if("controlA"===r||"controlB"===r){if(Wa(s)||Wa(o)||ja(o,s))return;a[1]=[s[0]-o[0],s[1]-o[1]]}else{if(s===o||"edge"===r||"closure"===r)return;a[1]=s-o}}else{if(r!==va&&r!==ya)return;if(s===o)return;a[1]=s-o}return a}(r[Na],n[Na],t,i,a);e&&r[Da].push(e)}),n}function ho(t,e,k,I){var r,n,i,a,o,N=qa(t[Na],e),s=((r=t[Ca])&&(i=/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(r)?(n=r.match(/[\d.]+/g),Ui.cubicBezier(n[0],n[1],n[2],n[3])):(i=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(r))?(a=parseInt(i[1]),o=i[2],function(t){if(a&&0<a){var e=1/a;return("start"===o?Math.ceil(t/e):Math.floor(t/e))/a}return t}):Ui[r]),i);s&&s!==$a&&(k=s(k));for(var w=t[Da],C=I.tagName,h=0,l=w.length;h<l;h++)!function(t){var e=Kt(w[t],2),r=e[0],_=e[1],n=N[r];if(r===ga){n=n||(N[r]=[[Aa,[1,0,0,1,0,0]]]);for(var i=0;i<6;i++)n[0][1][i]+=_[i]*k}else if(ao.hasOwnProperty(r))_&&(n[0]+=_*k);else if(r===Xi)(n=n||(N[r]=[["blur",0]]))[0][1]+=_*k;else if(eo.hasOwnProperty(r))for(var a=0;a<2;a++)n[a][0]+=_[a]*k;else if(r===Vi)0!==_[0]&&(n[0][0]+=_[0]*k),0!==_[1]&&(n[1][0]+=_[1]*k);else if(r===$i)for(var o=0,s=Math.min(n.length,_.length);o<s;o++){for(var h=0;h<4;h++)n[o][h]+=_[o][h]*k;for(var l=0;l<4;l++)n[o][4][l]+=_[o][4][l]*k}else if(r===Zi)n.forEach(function(t,e){_[e]&&(t[0][0]+=_[e][0]*k,t[1][0]+=_[e][1]*k)});else if(r===zi||r===ji)n.forEach(function(t,e){_[e]&&(t[0]+=_[e]*k)});else if(ro.hasOwnProperty(r))n.forEach(function(t,e){var r=_[e];if(r){var n=Kt(r,4),i=n[0],a=n[1],o=n[2],s=n[3];if(io.hasOwnProperty(t.k)){for(var h=0,l=Math.min(t.v.length,i.length);h<l;h++){var c=t.v[h],u=i[h];c[0][0]+=u[0][0]*k,c[0][1]+=u[0][1]*k,c[0][2]+=u[0][2]*k,c[0][3]+=u[0][3]*k,c[1]&&u[1]&&(c[1][0]+=u[1]*k)}"linear"===t.k&&void 0!==t.d&&void 0!==a&&(Array.isArray(a)?(t.d[0]+=a[0]*k,t.d[1]+=a[1]*k,t.d[2]+=a[2]*k,t.d[3]+=a[3]*k):t.d+=a*k),"radial"===t.k?void 0!==t.z&&void 0!==s?(t.z[0]+=s[0]*k,t.z[1]+=s[1]*k,t.z[2]+=s[2]*k,t.z[3]+=s[3]*k,t.z[4]+=s[4]*k):void 0!==t.p&&void 0!==o&&(t.p[0][0]+=o[0]*k,t.p[1][0]+=o[1]*k):"conic"===t.k&&void 0!==t.d&&void 0!==a&&(t.d+=a*k,t.p[0][0]+=o[0]*k,t.p[1][0]+=o[1]*k)}else t[0]+=i[0]*k,t[1]+=i[1]*k,t[2]+=i[2]*k,t[3]+=i[3]*k}});else if(Qa.hasOwnProperty(r))(n=n[0])[0]+=_[0]*k,n[1]+=_[1]*k,n[2]+=_[2]*k,n[3]+=_[3]*k;else if(Ja.hasOwnProperty(r)){var c=N[r];if(Ja[r][C]&&Ua(Ja[r][C].calIncrease)){var u=Ja[r][C].calIncrease;I.isMulti?N[r]=c.map(function(t,e){return u(t,_[e],k)}):N[r]=u(c,_,k)}else if(I.isMulti)if("points"===r||"controls"===r)for(var f=0,d=Math.min(c.length,_.length);f<d;f++){var p=c[f],v=_[f];if(!Wa(p)&&!Wa(v))for(var y=0,g=Math.min(p.length,v.length);y<g;y++){var m=p[y],E=v[y];if(!Wa(m)&&!Wa(E))for(var M=0,O=Math.min(m.length,E.length);M<O;M++)Wa(m[M])||Wa(E[M])||(m[M]+=E[M]*k)}}else"controlA"===r||"controlB"===r?_.forEach(function(t,e){var r=c[e];if(!Wa(t)&&!Wa(r))for(var n=0,i=Math.min(r.length,t.length);n<i;n++){var a=r[n],o=t[n];Wa(a)||Wa(o)||(r[n]+=o*k)}}):_.forEach(function(t,e){Wa(t)||Wa(c[e])||(c[e]+=t*k)});else if("points"===r||"controls"===r)for(var T=0,A=Math.min(c.length,_.length);T<A;T++){var b=c[T],x=_[T];if(!Wa(b)&&!Wa(x))for(var S=0,R=Math.min(b.length,x.length);S<R;S++)Wa(b[S])||Wa(x[S])||(b[S]+=x[S]*k)}else"controlA"===r||"controlB"===r?(Wa(c[0])||Wa(_[0])||(c[0]+=_[0]*k),Wa(c[1])||Wa(_[1])||(c[1]+=_[1]*k)):Wa(c)||Wa(_)||(N[r]+=_*k)}else r!==va&&r!==ya||(N[r]+=_*k)}(h);return N}function lo(t,e){return Ua(t)&&(e=t,t={}),[t||{},e]}Object.assign(ao,to),Object.assign(ao,no);var co,uo=0,_o=12,fo=13,po=30,vo=31,yo=41,go=42,mo=function(){t(y,Ri);var v=e(y);function y(t,i,e){var r,a;g(this,y),(r=v.call(this)).__id=uo++,i=za(i||[]),i=Array.isArray(i)?i.filter(function(t){return t&&Xa(t)}):i&&Xa(i)?(a=[],Object.keys(i).forEach(function(t){var e=i[t];if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++){(a[r]=a[r]||{offset:r/(n-1)})[t]=e[r]}}),a):[],Ka(e)&&(r.__options={duration:e},e=r.__options);var n=r.__options=e||{duration:0},o=t.root,s=r.__config=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,o,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,n.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,o.__config,!1],h=r.iterations=n.iterations,l=r.duration=n.duration,c=Kt(r.__init(i,h,l,n.easing,t),4),u=c[0],_=c[1],f=c[2],d=c[3];s[_o]=u,s[fo]=_,s[po]=f,s[vo]=d,2===u.length&&(s[yo]=!0,s[go]=u[1][wa]);var p=parseInt(n.fps)||0;return p<=0&&(p=60),r.fps=p,r.spfLimit=n.spfLimit,r.delay=n.delay,r.endDelay=n.endDelay,r.playbackRate=n.playbackRate,r.fill=n.fill,r.iterations=n.iterations,r.direction=n.direction,r}return l(y,[{key:"__init",value:function(n,t,e,r,i){if(n.length<1)return[[],[],[],{}];for(var a,o=i.tagName,s=0,h=n.length;s<h;s++)(function(t,e){var r=n[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return n.splice(t,1),s=--t,h=--e;if(r.offset<=-1)return n.splice(t,1),s=--t,h=--e}Object.keys(r).forEach(function(t){Ft.hasOwnProperty(t)&&Ft.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Re.isValid(o,t)||delete r[t]}),s=t,h=e})(s,h);1===n.length?(n[0]=za(n[0]),1===n[0].offset?n.unshift({offset:0}):((a=za(n[0])).offset=1,n.push(a))):n.forEach(function(t,e){n[e]=za(t)});var l=n[0];l.hasOwnProperty("offset")&&0<l.offset?(l={offset:0},n.unshift(l)):l.offset=0;var c=n[n.length-1];c.hasOwnProperty("offset")&&c.offset<1?(c={offset:1},n.push(c)):c.offset=1;for(var u=1,_=n.length;u<_;u++){if(!(v=n[u]).hasOwnProperty("offset")){for(var f=void 0,d=u+1;d<_&&!(f=n[d]).hasOwnProperty("offset");d++);for(var p=d-u+1,v=n[u-1],y=(f.offset-v.offset)/p,g=u;g<d;g++){n[g].offset=v.offset+y*(g+1-u)}u=d}}var m=[];n.forEach(function(t){m.push(function(t,e,r){var n=t.offset,i=t.easing;delete t.offset,delete t.easing,t=cn.normalize(t);var a=[];return a[Na]=t,a[wa]=n*e,a[Ca]=i||r,a[Da]=[],a}(t,e,r))});var E,M,O,T,A,b,x,S,R=(M=i,O={},T=[],(E=m).forEach(function(t){var e=t[Na];Object.keys(e).forEach(function(t){void 0===e[t]||O.hasOwnProperty(t)||(O[t]=!0,Ja.hasOwnProperty(t)||(t=parseInt(t)),T.push(t))})}),E.forEach(function(t){var e=t[Na];T.forEach(function(t){e.hasOwnProperty(t)&&!Wa(e[t])||(Ja.hasOwnProperty(t)?e[t]=M.currentProps[t]:e[t]=M.currentStyle[t])})}),T);A=m,b=R,S=(x=i).computedStyle,A.forEach(function(t){var a=t[Na];b.forEach(function(t){var e,r,n,i=a[t];Wa(i)||(t===ga?(e=x.outerWidth,r=x.outerHeight,n=ni.calMatrix(i,e,r),a[t]=[[Aa,n]]):i[1]===Ba&&(t===ma?a[t]=[zt.rgba2int(S[t]),Ha]:to.hasOwnProperty(t)?a[t]=[S[t],La]:t===Ea?a[t]=[S[t],Ya]:t!==Ma&&t!==Oa&&t!==Ta||(a[t]=[S[t],Ga])))})});var k=i.style,I=i.props,N={};R.forEach(function(t){Za(o,t)&&(N[t]=I[t]),N[t]=k[t]});for(var w=m.length,C=m[0],D=1;D<w;D++)C=so(C,m[D],R,i,o);var P=za(m).reverse();P.forEach(function(t){t[wa]=e-t[wa],t[Da]=[]}),C=P[0];for(var L=1;L<w;L++){C=so(C,P[L],R,i,o)}return[m,P,R,N]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[15]=0;var n=r[16],i=r[po],a=r[10];if(t){if(r[14]=r[28]+r[17]+r[29],"finish"===r[22])return;r[22]="finish",r[40]||(r[16]={},e=!0)}else{if(r[21]=r[14]=0,"idle"===r[22])return;r[22]="idle",r[16]={},e=!0}e&&i.forEach(function(t){Ja.hasOwnProperty(t)?a.__currentProps[t]===n[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===n[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(Ri.FRAME,e,r),t[7]&&(t[7]=!1,this.emit(Ri.PLAY)),Ua(t[9])&&(t[9].call(this,e,r),t[9]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[20],n=t[34],i=t[35],a=t[14]=t[15];return n&&(!0===n?e=Math.min(e,1e3/i):0<n&&(e=Math.min(e,n))),1!==r&&0<r&&(e*=r),t[15]+=e,[a,e]}},{key:"play",value:function(t){var e,r,n=this.__config,i=n[23],a=n[17],o=n[22],s=n[_o];return i||a<=0||s.length<1||"running"===o||(this.__cancelTask(),n[9]=t,n[22]="running",n[7]=!0,this.__hasFin=!1,this.__hasCancel=!1,n[27]||(n[27]=!0,e=n[fo],r=n[36],n[32]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(r)?e:s,n[14]=n[15]=n[25]=0),wi.offFrame(this),wi.onFrame(this),n[24]=wi.__now),this}},{key:"__before",value:function(t){var e,r,n=this.__config,i=n[10],a=n[35],o=n[21],s=n[32],h=n[18],l=n[39],c=n[40],u=n[28],_=n[11],f=n[yo],d=n[go],p=n[17],v=n[29],y=s.length,g=Kt(n[37](n,t),2),m=g[0];if(t=g[1],!n[38]&&a<60){if((t=n[25]+=t)<1e3/a)return void(n[1]=!0);n[25]=0}if(n[38]=!1,!(0<o)&&m<u)return l&&oo((n[33]=s[0])[Na],n[po],n,_,i),n[45]=!0,void(n[2]=!0);0===o&&(m-=u),0!==m&&!n[45]||(n[45]=!1,n[3]=!0),r=f?(e=m<d?0:1,d):s[e=function t(e,r,n,i){if(e===r)return i[e][wa]>n?e-1:e;var a=e+(r-e>>1),o=i[a];return o[wa]===n?a:o[wa]>n?t(e,Math.max(a-1,e),n,i):t(Math.min(a+1,r),r,n,i)}(0,y-1,m,s)][wa];var E=e===y-1,M=0;E||(M=f?m/p:(m-r)/(s[e+1][wa]-r));var O,T,A=h-1<=o,b=s[e];if(n[33]=b,E)if(O=A&&m<p+v,T=qa(c||!A?b[Na]:n[vo],n[po]),A)O||(n[15]=0,h<=(o=++n[21])&&wi.offFrame(this));else{for(;n[15]>=p;)n[15]-=p,o=++n[21];n[6]=!0}else T=ho(b,n[po],M,i);oo(T,n[po],n,_,i),!E||O&&!A||(n[4]=!0,h<=o&&(n[5]=!0,this.__clean(!0)))}},{key:"__after",value:function(t){var e,r,n,i,a=this.__config;a[0]=!1,a[1]?a[1]=!1:(a[8].call(this,a,t,a[2]),a[2]=!1,a[3]&&(a[3]=!1,this.emit(Ri.BEGIN,a[21])),a[4]&&(a[4]=!1,this.emit(Ri.END,a[21]-1),e=a[36],r=a[_o],n=a[fo],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(i=a[21]%2==0,a[32]="alternate"===e?i?r:n:i?n:r)),a[6]&&(a[6]=!1,a[3]=!0),a[5]&&(a[3]=a[4]=a[2]=a[5]=a[1]=a[27]=!1,a[22]="finished",this.emit(Ri.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[23],n=e[17],i=this.pending;return r||n<=0||i||(e[22]="paused",this.__cancelTask(),t||this.emit(Ri.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[23],n=e[17],i=e[22];return r||n<=0||"paused"!==i?this:this.play(t)}},{key:"finish",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[_o];if(t||i<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,h=n[11],l=n[vo];return h&&(s=n[40]?(n[33]=o[o.length-1],o[o.length-1][Na]):l,h.addRefreshTask({__before:function(){n[0]=!0,oo(s,n[po],n,h,n[10]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Ri.FINISH)),Ua(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[_o];if(t||i<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=n[11],h=n[vo];return s&&s.addRefreshTask({__before:function(){n[0]=!0,oo(h,n[po],n,s,n[10]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Ri.CANCEL)),Ua(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var n=this.__config,i=n[23],a=n[17],o=n[_o],s=n[28],h=n[29];if(i||a<=0||o.length<1)return this;var l=Kt(lo(e,r),2);return e=l[0],r=l[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+h<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var n=this,i=this.__config,a=i[23],o=i[17],s=i[_o],h=i[28],l=i[29];if(a||o<=0||s.length<1)return this;var c=Kt(lo(e,r),2);return e=c[0],r=c[1],o+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){i[22]="paused",n.__cancelTask(),Ua(r)&&r.call(n,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[16],n=t[10];t[po].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],Ja.hasOwnProperty(t)?n.currentProps[t]=e:n.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var n=this.__config,i=n[17];if(n[22]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=n[28]);i<t&&n[21]<n[18]-1;)n[21]++,t-=i;return n[15]=t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[10]=t,this.__config[43]=t.__config}},{key:"__cancelTask",value:function(){wi.offFrame(this),this.__config[9]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[23]||(e.removeControl(),t?(e.__clean(),r[10]=null):wi.nextFrame({__before:function(){e.__clean(),r[10]=null}}),r[24]=0,r[23]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[22]&&"finished"!==t[22]&&re.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[10]}},{key:"root",get:function(){return this.__config[11]}},{key:"keys",get:function(){return this.__config[po]}},{key:"style",get:function(){return this.__config[16]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[17]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[17]!==t&&(e[17]=t,e[go]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[28]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[28]!==t&&(e[28]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[29]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[29]!==t&&(e[29]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[35]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[35]!==t&&(t<=0&&(t=60),e[35]=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[18]},set:function(t){t===1/0||zt.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[18]!==t&&(e[18]=t),t}},{key:"fill",get:function(){return this.__config[19]},set:function(t){t=t||"none";var e=this.__config;return e[19]!==t&&(e[19]=t,this.__checkModify()),e[39]={backwards:!0,both:!0}.hasOwnProperty(t),e[40]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[36]},set:function(t){t=t||"normal";var e=this.__config;return e[36]!==t&&(e[36]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[_o]}},{key:"framesR",get:function(){return this.__config[fo]}},{key:"playbackRate",get:function(){return this.__config[20]},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1);var e=this.__config;return e[20]!==t&&(e[20]=t),t}},{key:"easing",get:function(){return this.__config[26]}},{key:"startTime",get:function(){return this.__config[24]}},{key:"currentTime",get:function(){return this.__config[14]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[14]!==t&&(e[14]=t,e[15]=t),t}},{key:"nextTime",get:function(){return this.__config[15]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[15]!==t&&(e[15]=t),t}},{key:"pending",get:function(){return"running"!==this.__config[22]}},{key:"finished",get:function(){return"finished"===this.__config[22]}},{key:"playState",get:function(){return this.__config[22]}},{key:"playCount",get:function(){return this.__config[21]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[21]!==t&&(e[21]=t),t}},{key:"isDestroyed",get:function(){return this.__config[23]}},{key:"animating",get:function(){var t=this.__config,e=t[22];return"idle"!==e&&("finished"!==e||t[40]||t[39])}},{key:"spfLimit",get:function(){return this.__config[34]},set:function(t){t=zt.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[34]!==t&&(e[34]=t),t}},{key:"assigning",get:function(){return this.__config[0]}}]),y}(),Eo=v.STYLE_KEY,Mo=v.STYLE_KEY,Oo=Mo.TRANSLATE_X,To=Mo.TRANSLATE_Y,Ao=Mo.OPACITY,bo=Mo.FILTER,xo={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSFORM:4,TRANSFORM_ALL:7,OPACITY:8,FILTER:16,MIX_BLEND_MODE:32,REPAINT:64,REFLOW:128},So=(c(co={},Eo.SCALE_X,!0),c(co,Eo.SCALE_Y,!0),c(co,Eo.ROTATE_Z,!0),c(co,Eo.TRANSFORM,!0),c(co,Eo.TRANSFORM_ORIGIN,!0),co),Ro=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Re.isIgnore(t)?xo.NONE:t===Oo?xo.TRANSLATE_X:t===To?xo.TRANSLATE_Y:So.hasOwnProperty(t)?xo.TRANSFORM:t===Ao?xo.OPACITY:t===bo?xo.FILTER:Re.isRepaint(t)?xo.REPAINT:xo.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<xo.REFLOW},LAYOUT:1,OFFSET:0},xo);Ro.TRANSFORMS=So;var ko=[8,16,32,64,128,256,512,1024,2048,4096],Io=[8,8,8,8,8,4,2,1,1,1],No=ko[ko.length-1],wo={},Co=function(){function u(t,e){g(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,t*=e;var r=this.__canvas=re.getCacheCanvas(t,t,null,e);r&&(this.__offScreen=r),this.__grid=[];for(var n=0;n<this.__total;n++)this.__grid.push(1)}return l(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var n=0;n<t;n++){var i=r*t+n;if(e[i])return e[i]=0,this.__free--,i}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]=1,this.__free++}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"size",get:function(){return this.__size}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offScreen",get:function(){return this.__offScreen}},{key:"canvas",get:function(){return this.offScreen.canvas}},{key:"ctx",get:function(){return this.offScreen.ctx}}],[{key:"getInstance",value:function(t){if(!(No<t)){for(var e=ko[0],r=Io[0],n=0,i=ko.length;n<i&&(e=ko[n],r=Io[n],!(ko[n]>=t));n++);for(var a,o=wo[e]=wo[e]||[],s=0,h=o.length;s<h;s++){var l=o[s];if(l.free){a=l;break}}if(!a){if(!(a=new u(e,r)).offScreen)return void re.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(ko=t.SIZE,Io=t.NUMBER,No=ko[ko.length-1])},get:function(){return{SIZE:ko,NUMBER:Io}}},{key:"MAX",get:function(){return No}}]),u}(),Do=v.STYLE_KEY,Po=Do.TRANSFORM_ORIGIN,Lo=Do.TRANSFORM,Fo=v.NODE_KEY,Bo=Fo.NODE_OPACITY,Ho=Fo.NODE_CACHE,Go=Fo.NODE_CACHE_FILTER,Yo=Fo.NODE_CACHE_OVERFLOW;function Wo(t){var e=t.size,r=t.sx1,n=t.sy1,i=t.width,a=t.height,o=t.bbox,s=re.getCacheCanvas(i,a);return s.coords=[1,1],s.bbox=o,s.size=e,s.sx1=r,s.sy1=n,s.dx=t.dx,s.dy=t.dy,s.dbx=t.dbx,s.dby=t.dby,s.width=i,s.height=a,s}var Uo=function(){function p(t,e,r,n,i){g(this,p),this.__init(t,e,r,n,i)}return l(p,[{key:"__init",value:function(t,e,r,n,i){this.__width=t,this.__height=e,this.__bbox=r,this.__page=n,this.__pos=i;var a,o=Kt(n.getCoords(i),2),s=o[0],h=o[1];this.__coords=[s+1,h+1],n.canvas&&(this.__enabled=!0,(a=n.ctx).setTransform(1,0,0,1,0,0),a.globalAlpha=1,"undefined"!=typeof karas&&karas.debug&&(n.canvas.setAttribute("size",n.size),a.fillStyle="rgba(0, 0, 0, 0.1)",a.beginPath(),a.rect(s+1,h+1,n.size-2,n.size-2),a.closePath(),a.fill()))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=Kt(this.coords,2),n=r[0],i=r[1],a=this.bbox;this.dx=n-a[0],this.dy=i-a[1],this.dbx=t-a[0],this.dby=e-a[1]}},{key:"clear",value:function(){var t,e,r,n,i=this.ctx;this.enabled&&i&&this.available&&(i.setTransform(1,0,0,1,0,0),e=(t=Kt(this.coords,2))[0],r=t[1],n=this.page.size,i.clearRect(e-1,r-1,n,n)),this.__available=!1}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t){var e,r,n,i,a;zt.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]),e+=2,r+=2,(n=Co.getInstance(Math.max(e,r)))?(i=n.page,a=n.pos,this.__init(e,r,t,i,a)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"coords",get:function(){return this.__coords}}],[{key:"getInstance",value:function(t){if(!(isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3]))){var e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]);e+=2,r+=2;var n=Co.getInstance(Math.max(e,r));if(n)return new p(e,r,t,n.page,n.pos)}}},{key:"genBlur",value:function(t,e){var r=Kt(t.coords,2),n=r[0],i=r[1],a=t.size,o=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox,_=re.getCacheCanvas(l,c);return _.ctx.filter="blur(".concat(e,"px)"),_.ctx.drawImage(o,n-1,i-1,l,c,0,0,l,c),_.ctx.filter="none",_.draw(),_.bbox=u,_.coords=[1,1],_.size=a,_.sx1=s,_.sy1=h,_.dx=t.dx,_.dy=t.dy,_.dbx=t.dbx,_.dby=t.dby,_.width=l,_.height=c,_}},{key:"genMask",value:function(t,e,r,n,i){for(var o=Wo(t),a=[];e&&e.isMask;)a.push(e),e=e.next;var s=Kt(o.coords,2),h=s[0],l=s[1],c=o.ctx,u=o.dbx,_=o.dby;i[0]+=h+u,i[1]+=l+_;var f=ni.calMatrixByOrigin(n,i);return a.forEach(function(t){var e=t.__config,r=e[Yo],n=e[Go],i=e[Ho],a=r&&r.available&&r;(a=(a=a||n&&n.available&&n)||i&&i.available&&i)?(c.globalAlpha=e[Bo],p.drawCache(a,o,t.computedStyle[Lo],[1,0,0,1,0,0],t.computedStyle[Po].slice(0),f)):t.__hasContent&&re.error("CacheMask is oversize")}),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.globalCompositeOperation=r?"source-out":"source-in",p.drawCache(t,o),c.globalCompositeOperation="source-over",o.draw(c),o}},{key:"genOverflow",value:function(t,e){var r=t.bbox,n=e.sx,i=e.sy,a=e.outerWidth,o=e.outerHeight,s=n+a,h=i+o;if(r[0]<n||r[1]<i||r[2]>s||r[3]>h){var l=Wo(t),c=l.ctx;return c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,p.drawCache(t,l),l.draw(c),c.globalCompositeOperation="destination-in",c.fillStyle="#FFF",c.beginPath(),c.rect(n-r[0]+1,i-r[1]+1,a,o),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",l}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(zt.equalArr(e,r))return t;var n=r[0]-e[0],i=r[1]-e[1],a=p.getInstance(e);if(a&&a.enabled){var o=Kt(t.coords,2),s=o[0],h=o[1],l=t.canvas,c=t.width,u=t.height,_=Kt(a.coords,2),f=_[0],d=_[1];return a.sx1=t.sx1,a.sy1=t.sy1,a.dx=t.dx+n,a.dy=t.dy+i,a.dbx=t.dbx+n,a.dby=t.dby+i,a.ctx.drawImage(l,s-1,h-1,c,u,n+f-1,i+d-1,c,u),a.__available=!0,t.release(),a}}},{key:"drawCache",value:function(t,e,r,n,i,a){var o,s=Kt(e.coords,2),h=s[0],l=s[1],c=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,d=e.dby,p=Kt(t.coords,2),v=p[0],y=p[1],g=t.canvas,m=t.sx1,E=t.sy1,M=t.dbx,O=t.dby,T=t.width,A=t.height,b=h+m-c+f-M,x=l+E-u+d-O;r&&n&&i&&(i[0]+=b,i[1]+=x,o=ni.calMatrixByOrigin(r,i),n=Vt.multiply(n,o),a&&(n=zt.equalArr(n,a)?[1,0,0,1,0,0]:(a=Vt.inverse(a),Vt.multiply(a,n))),_.setTransform(n[0],n[1],n[2],n[3],n[4],n[5])),_.drawImage(g,v-1,y-1,T,A,b-1,x-1,T,A)}},{key:"draw",value:function(t,e,r,n){t.globalAlpha=e,t.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]);var i=Kt(n.coords,2),a=i[0],o=i[1],s=n.canvas,h=n.sx1,l=n.sy1,c=n.dbx,u=n.dby,_=n.width,f=n.height;t.drawImage(s,a-1,o-1,_,f,h-1-c,l-1-u,_,f)}},{key:"MAX",get:function(){return Co.MAX-2}}]),p}();c(Uo,"NUM",5);var Ko=v.STYLE_KEY,Xo=v.STYLE_RV_KEY,Vo=v.style2Upper,zo=v.STYLE_KEY,jo=zo.BORDER_TOP_LEFT_RADIUS,$o=zo.BORDER_TOP_RIGHT_RADIUS,qo=zo.BORDER_BOTTOM_LEFT_RADIUS,Zo=zo.BORDER_BOTTOM_RIGHT_RADIUS,Jo=zo.PADDING_LEFT,Qo=zo.PADDING_RIGHT,ts=zo.PADDING_TOP,es=zo.PADDING_BOTTOM,rs=zo.MARGIN_LEFT,ns=zo.MARGIN_TOP,is=zo.MARGIN_BOTTOM,as=zo.MARGIN_RIGHT,os=zo.BORDER_LEFT_WIDTH,ss=zo.BORDER_TOP_WIDTH,hs=zo.BORDER_BOTTOM_WIDTH,ls=zo.BORDER_RIGHT_WIDTH,cs=zo.TOP,us=zo.RIGHT,_s=zo.BOTTOM,fs=zo.LEFT,ds=zo.POSITION,ps=zo.DISPLAY,vs=zo.WIDTH,ys=zo.HEIGHT,gs=zo.MATRIX,ms=zo.TRANSLATE_X,Es=zo.TRANSLATE_Y,Ms=zo.TRANSFORM,Os=zo.SCALE_X,Ts=zo.SCALE_Y,As=zo.ROTATE_Z,bs=zo.SKEW_X,xs=zo.SKEW_Y,Ss=zo.TRANSFORM_ORIGIN,Rs=zo.BACKGROUND_POSITION_X,ks=zo.BACKGROUND_POSITION_Y,Is=zo.BACKGROUND_SIZE,Ns=zo.BACKGROUND_COLOR,ws=zo.BACKGROUND_IMAGE,Cs=zo.BACKGROUND_REPEAT,Ds=zo.BOX_SHADOW,Ps=zo.OPACITY,Ls=zo.Z_INDEX,Fs=zo.BORDER_TOP_STYLE,Bs=zo.BORDER_RIGHT_STYLE,Hs=zo.BORDER_BOTTOM_STYLE,Gs=zo.BORDER_LEFT_STYLE,Ys=zo.FILTER,Ws=zo.OVERFLOW,Us=zo.MIX_BLEND_MODE,Ks=zo.BORDER_TOP_COLOR,Xs=zo.BORDER_BOTTOM_COLOR,Vs=zo.BORDER_LEFT_COLOR,zs=zo.BORDER_RIGHT_COLOR,js=zo.FONT_STYLE,$s=zo.COLOR,qs=zo.VISIBILITY,Zs=zo.POINTER_EVENTS,Js=zo.BORDER_TOP,Qs=zo.BORDER_RIGHT,th=zo.BORDER_BOTTOM,eh=zo.BORDER_LEFT,rh=zo.BACKGROUND_CLIP,nh=v.UPDATE_KEY,ih=nh.UPDATE_NODE,ah=nh.UPDATE_FOCUS,oh=nh.UPDATE_STYLE,sh=nh.UPDATE_OVERWRITE,hh=nh.UPDATE_KEYS,lh=nh.UPDATE_CONFIG,ch=v.STRUCT_KEY.STRUCT_HAS_MASK,uh=v.NODE_KEY,_h=uh.NODE_TAG_NAME,fh=uh.NODE_CACHE_STYLE,dh=uh.NODE_CURRENT_STYLE,ph=uh.NODE_COMPUTED_STYLE,vh=uh.NODE_STYLE,yh=uh.NODE_STRUCT,gh=uh.NODE_OPACITY,mh=uh.NODE_MATRIX_EVENT,Eh=uh.NODE_MATRIX,Mh=uh.NODE_LIMIT_CACHE,Oh=uh.NODE_BLUR_VALUE,Th=uh.NODE_HAS_CONTENT,Ah=uh.NODE_REFRESH_LV,bh=uh.NODE_CACHE,xh=uh.NODE_CACHE_TOTAL,Sh=uh.NODE_CACHE_FILTER,Rh=uh.NODE_CACHE_MASK,kh=uh.NODE_CACHE_OVERFLOW,Ih=uh.NODE_IS_DESTROYED,Nh=uh.NODE_DEFS_CACHE,wh=uh.NODE_DOM_PARENT,Ch=x.AUTO,Dh=x.PX,Ph=x.PERCENT,Lh=x.STRING,Fh=x.INHERIT,Bh=zt.clone,Hh=zt.int2rgba,Gh=zt.rgba2int,Yh=zt.joinArr,Wh=zt.isNil,Uh=cn.calRelative,Kh=In.canvasPolygon,Xh=In.svgPolygon,Vh=Re.GEOM,zh=Ro.contain,jh=Ro.NONE,$h=Ro.TRANSFORM_ALL,qh=Ro.TRANSFORM,Zh=Ro.REFLOW,Jh=Ro.REPAINT,Qh=Ro.TRANSLATE_X,tl=Ro.TRANSLATE_Y,el=Ro.OPACITY,rl=Ro.FILTER;function nl(t,e,r,n,i,a,o){var s;t===Xt.CANVAS?(n.beginPath(),n.fillStyle!==r&&(n.fillStyle=r),e.forEach(function(t){Kh(n,t,a,o)}),n.fill(),n.closePath()):t===Xt.SVG&&(s="",e.forEach(function(t){s+=Xh(t)}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",r]]}))}function il(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d,p,v=13<arguments.length&&void 0!==f?f:"fill";Array.isArray(e)&&(g=e[1],d=e[2],p=e[3],e=e[0]);var y,g,m,E,M,O,T=Ei.calRadius(r,n,i,a,l,c,u,_);T=T||[[r,n],[r+i,n],[r+i,n+a],[r,n+a],[r,n]],g&&(y=[d,p],g=ni.calMatrixByOrigin(g,y),m=Vt.inverse(g),T=T.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Vt.calPoint([t[r],t[r+1]],m);e.push(i[0]),e.push(i[1])}return e})),t===Xt.CANVAS?(g&&(o.save(),E=h.matrixEvent,g=Vt.multiply(E,g),o.setTransform(g[0],g[1],g[2],g[3],g[4],g[5])),o.beginPath(),o.fillStyle!==e&&(o.fillStyle=e),Kh(o,T),o[v](),o.closePath(),g&&o.restore()):t===Xt.SVG&&(M=Xh(T),h.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",M],["fill",e]]}),g&&(O=h.virtualDom.bb)[O.length-1].props.push(["transform","matrix(".concat(Yh(g,","),")")]))}var al=[jo,$o,Zo,qo];function ol(t,e,r){return t[1]===Dh?t[0]:t[1]===Ph?(e-r)*t[0]*.01:0}var sl,hl,ll,cl,ul,_l=function(){t(x,S);var i=e(x);function x(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};g(this,x),r=i.call(this),Array.isArray(e)?r.props=zt.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];var n=r.__config;return n[_h]=t,n[fh]=r.__cacheStyle,n[dh]=r.__currentStyle,n[ph]=r.__computedStyle,n[Ah]=Zh,n[vh]=r.__style,n[mh]=[],n[Nh]=r.__cacheDefs,r.__frameAnimateList=[],r}return l(x,[{key:"__structure",value:function(t,e,r){var n=et(tt(x.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(n[ch]=this.__hasMask),this.__config[yh]=n}},{key:"__mp",value:function(n,i,a){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=Ko[Vo("margin"+t)],r=Ko[Vo("padding"+t)];i[e]=o.__mpWidth(n[e],a),i[r]=o.__mpWidth(n[r],a)})}},{key:"__mpWidth",value:function(t,e){return t[1]===Dh?t[0]:t[1]===Ph?t[0]*e*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[Jo]+r[Qo],this.__clientHeight=e+=r[ts]+r[es],this.__offsetWidth=t+=r[os]+r[ls],this.__offsetHeight=e+=r[ss]+r[hs],this.__outerWidth=t+r[rs]+r[as],this.__outerHeight=e+r[ns]+r[is]}},{key:"__layout",value:function(t,e,r){cn.computeReflow(this,this.isShadowRoot);var n,i,a,o,s,h,l,c,u,_=t.w,f=this.isDestroyed,d=this.currentStyle,p=this.computedStyle,v=this.__config,y=p[ps],g=d[vs],m=d[ds];if(this.__cancelCache(),this.__layoutData=Bh(t),v[Ah]=Zh,v[Mh]=!1,!e){var E=this.next;if(!this.isMask&&E&&E.isMask){for(var M=0;E&&E.isMask;)M++,E=E.next;this.__hasMask=M}}if(this.__ox=this.__oy=0,f||"none"===y)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=p[vs]=p[ys]=0,this.__x=t.x,this.__y=t.y,void this.__layoutNone();if(r||this.__mp(d,p,_),g[1]!==Ch)switch(g[1]){case Dh:_=g[0];break;case Ph:_*=.01*g[0]}"flex"===y?this.__layoutFlex(t,e):"inline"===y?this.__layoutInline(t,e):this.__layoutBlock(t,e),"relative"===m?(n=d[cs],i=d[us],a=d[_s],o=d[fs],s=this.parent,n[1]!==Ch?(h=Uh(d,cs,n,s),this.__offsetY(h),p[cs]=h,p[_s]="auto"):a[1]!==Ch?(l=Uh(d,_s,a,s),this.__offsetY(-l),p[_s]=l,p[cs]="auto"):p[cs]=p[_s]="auto",o[1]!==Ch?(c=Uh(d,fs,o,s,!0),this.__offsetX(c),p[fs]=c,p[us]="auto"):i[1]!==Ch?(u=Uh(d,us,i,s,!0),this.__offsetX(-u),p[us]=u,p[fs]="auto"):p[fs]=p[us]="auto"):"absolute"!==d[ds]&&(p[cs]=p[_s]=p[fs]=p[us]="auto"),this.__sx=this.x+this.ox,this.__sy=this.y+this.oy;var O=p[vs]=this.width,T=p[ys]=this.height;e&&this.__ioSize(O,T);var A,b=this.__animateRecords;b&&(this.__animateRecords=null,b.list.forEach(function(t){t.target.vd instanceof x&&(t.target=t.target.vd)}),A=b.controller||this.root.animateController,b.options&&!1===b.options.autoPlay?A.__records=A.__records.concat(b.list):(A.__auto=A.__auto.concat(b.list),A.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[ps]="none",t[ns]=t[as]=t[is]=t[rs]=t[ts]=t[Qo]=t[es]=t[Jo]=0}},{key:"__preLayout",value:function(t){var e=t.x,r=t.y,n=t.w,i=t.h,a=t.w2,o=t.h2;this.__x=e,this.__y=r;var s,h,l=this.currentStyle,c=this.computedStyle,u=l[vs],_=l[ys],f=c[ss],d=c[ls],p=c[hs],v=c[os],y=c[ns],g=c[as],m=c[is],E=c[rs],M=c[ts],O=c[Qo],T=c[es],A=c[Jo];if(void 0!==a)s=!0,n=a;else if(u[1]!==Ch)switch(s=!0,u[1]){case Dh:n=u[0];break;case Ph:n*=.01*u[0]}if(void 0!==o)h=!0,i=o;else if(_[1]!==Ch)switch(h=!0,_[1]){case Dh:i=_[0];break;case Ph:i*=.01*_[0]}return e+=v+E+A,t.x=e,r+=f+y+M,t.y=r,u[1]===Ch&&(n-=v+d+E+g+A+O),_[1]===Ch&&(i-=f+p+y+m+M+T),{fixedWidth:s,fixedHeight:h,x:e,y:r,w:n,h:i}}},{key:"__marginAuto",value:function(t,e){var r,n=t[ds],i=t[rs],a=t[as],o=t[vs];"absolute"===n||o===Ch||i[1]!==Ch||a[1]!==Ch||(r=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-r),!0)}},{key:"__calMatrix",value:function(t,e,n,i,r,a,o,s){var h,l,c,u,_,f,d,p=e[gs];return p&&t<Zh&&!zh(t,qh)?(u=l=0,zh(t,Qh)&&(h=n[ms],l=(h=Wh(h)?0:h[1]===Ph?h[0]*this.offsetWidth*.01:h[0])-(i[ms]||0),i[ms]=h,i[Ms][4]+=l,p[4]+=l),zh(t,tl)&&(c=n[Es],u=(c=Wh(c)?0:c[1]===Ph?c[0]*this.offsetHeight*.01:c[0])-(i[Es]||0),i[Es]=c,i[Ms][5]+=u,p[5]+=u),e[gs]=p):(void 0===r&&(r=this.__sx1,a=this.__sy1,o=this.offsetWidth,s=this.offsetHeight),void 0===e[Ss]&&(e[Ss]=!0,p=null,i[Ss]=ni.calOrigin(n[Ss],o,s)),void 0!==e[Ms]&&void 0!==e[ms]&&void 0!==e[Es]&&void 0!==e[As]&&void 0!==e[Os]&&void 0!==e[Ts]&&void 0!==e[bs]&&void 0!==e[xs]||(e[Ms]=e[ms]=e[Es]=e[As]=e[Os]=e[Ts]=e[bs]=e[xs]=!0,p=null,n[Ms]?_=ni.calMatrix(n[Ms],o,s):(f=[],[ms,Es,As,bs,xs,Os,Ts].forEach(function(t){delete i[t];var e,r=n[t];Wh(r)||(i[t]=r[0],e=t===Os||t===Ts,1===r[0]&&e||!e&&0===r[0]||(r[1]===Ph&&(t===ms?i[t]=r[0]*o*.01:t===Es&&(i[t]=r[0]*s*.01)),f.push([t,r])))}),f.length&&(_=ni.calMatrix(f,o,s))),i[Ms]=_||[1,0,0,1,0,0]),p||((d=i[Ss].slice(0))[0]+=r||0,d[1]+=a||0,p=e[gs]=ni.calMatrixByOrigin(i[Ms],d))),p}},{key:"__calCache",value:function(o,t,s,h,e,_,r,f,a,l,n,i,d,p,v,y,c,u,g,m,E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P){var L,F,B,H,G,Y,W,U,K,X,V,z,j=this;Jh<=t?(void 0===_[Rs]&&(_[Rs]=!0,L=r[Rs],f[Rs]=(L||[]).map(function(t){return t[1]===Dh?t[0]:t[0]+"%"})),void 0===_[ks]&&(_[ks]=!0,F=r[ks],f[ks]=(F||[]).map(function(t){return t[1]===Dh?t[0]:t[0]+"%"})),void 0===_[Is]&&(_[Is]=!0,f[Is]=(r[Is]||[]).map(function(t){return r=a,n=l,i=[],t.forEach(function(t,e){t[1]===Dh?i.push(t[0]):t[1]===Ph?i.push(t[0]*(e?n:r)*.01):t[1]===Ch?i.push(-1):t[1]===Lh&&i.push("contain"===t[0]?-2:-3)}),i;var r,n,i})),void 0===_[ws]&&(B=f[ws]=r[ws],_[ws]=B.map(function(t,e){if(!t)return null;if(zt.isString(t)){var r,n,i=j.__loadBgi[e]=j.__loadBgi[e]||{},a=re.IMG[ws];return a&&a.state===re.LOADED?(i.url=ws,i.source=a.source,i.width=a.width,i.height=a.height):i.url!==t&&(i.url=t,i.source=null,n=(r=j).root,re.measureImg(t,function(t){t.success&&t.url===i.url&&!j.isDestroyed&&(i.source=t.source,i.width=t.width,i.height=t.height,n.delRefreshTask(i.cb),n.addRefreshTask(i.cb={__before:function(){_[ws]=void 0;var t={};t[ih]=r,t[ah]=Jh,t[lh]=r.__config,n.__addUpdate(r,r.__config,n,n.__config,t)}}))},{ctx:s,root:n,width:D-w,height:P-C})),!0}return t&&t.k?j.__gradient(o,s,h,w,C,D,P,t):void 0})),void 0===_[Ds]&&(_[Ds]=!0,f[Ds]=r[Ds]),[Ps,Ls,Fs,Bs,Hs,Gs,Cs,Ys,Ws,Us].forEach(function(t){f[t]=r[t]}),[Ns,Ks,zs,Xs,Vs].forEach(function(t){void 0===_[t]&&(_[t]=Hh(f[t]=r[t][0]))}),void 0!==_[jo]&&void 0!==_[$o]&&void 0!==_[Zo]&&void 0!==_[qo]||(_[jo]=_[$o]=_[Zo]=_[qo]=!0,U=n,K=i,X=r,V=f,z=!0,al.forEach(function(t){V[t]=X[t].map(function(t,e){return 0<t[0]?(z=!1,t[1]===Dh?Math.max(0,t[0]):Math.max(0,t[0]*(e?K:U)*.01)):0})}),z||al.forEach(function(t,e){var r,n=e%2==0?0:1,i=n?K:U,a=V[t],o=V[al[(e+1)%4]];a[n]+o[n]>i&&(r=.5*i,a[n]>=r&&o[n]>=r?a[n]=o[n]=r:a[n]>r?a[n]=i-o[n]:o[n]>r&&(o[n]=i-a[n]))})),H=f[jo],G=f[$o],Y=f[Zo],W=f[qo],["Top","Right","Bottom","Left"].forEach(function(t){var e,r,n,i,a,o,s,h,l=Ko[Vo(t="border"+t)],c=Ko[Vo(t+"Width")],u=Ko[Vo(t+"Style")];void 0===_[c]&&(_[c]=!0,_[l]=void 0),void 0===_[u]&&(_[u]=!0,_[l]=void 0),void 0===_[l]&&(l===Js?0<d?(e=Math.atan(d/y),r=Math.atan(d/p),_[l]=Ei.calPoints(d,f[u],e,r,E,M,A,b,x,S,I,N,0,H,G)):_[l]=[]:l===Qs?0<p?(n=Math.atan(p/d),i=Math.atan(p/v),_[l]=Ei.calPoints(p,f[u],n,i,E,M,A,b,x,S,I,N,1,G,Y)):_[l]=[]:l===th?0<v?(a=Math.atan(v/y),o=Math.atan(v/p),_[l]=Ei.calPoints(v,f[u],a,o,E,M,A,b,x,S,I,N,2,W,Y)):_[l]=[]:l===eh&&(0<y?(s=Math.atan(y/d),h=Math.atan(y/v),_[l]=Ei.calPoints(y,f[u],s,h,E,M,A,b,x,S,I,N,3,H,W)):_[l]=[]))})):(zh(t,el)&&(f[Ps]=r[Ps]),zh(t,rl)&&(f[Ys]=r[Ys]));var $=e&&e.computedStyle;r[js][1]===Fh?f[js]=e?$[js]:"normal":_[js]||(f[js]=r[js][0]),_[js]=f[js],r[$s][1]===Fh?(f[$s]=e?$[$s]:[0,0,0,1],_[$s]=Hh(f[$s])):_[$s]||(f[$s]=Gh(r[$s][0]),_[$s]=Hh(f[$s])),r[qs][1]===Fh?f[qs]=e?$[qs]:"visible":_[qs]||(f[qs]=r[qs][0]),_[qs]=f[qs],r[Zs][1]===Fh?f[Zs]=e?$[Zs]:"auto":_[Zs]||(f[Zs]=r[Zs][0]),_[Zs]=f[Zs]}},{key:"__calContent",value:function(t,e,r,n){if(t===Xt.CANVAS){if(e<Jh)return this.__hasContent;if("hidden"!==r[qs]){var i=r[ws];if(Array.isArray(i))for(var a=0,o=i.length;a<o;a++)if(i[a])return!0;if(0<r[Ns][0][3]){var s=n[vs],h=n[ys],l=n[ts],c=n[Qo],u=n[es],_=n[Jo];if(s&&h||l||c||u||_)return!0}for(var f=["Top","Right","Bottom","Left"],d=0,p=f.length;d<p;d++){var v=f[d];if(0<n[Ko[Vo("border"+v+"Width")]]&&0<r[Ko[Vo("border"+v+"Color")]][3])return!0}var y=r[Ds];if(Array.isArray(y))for(var g=0,m=y.length;g<m;g++){var E=y[g];if(E&&(0<E[2]||0<E[3]))return!0}}}return!1}},{key:"__renderSelf",value:function(lt,c,ct,ut,u){var _,_t=this,t=this.isDestroyed,f=this.root,ft=this.__config,e=ft[bh],dt=ft[fh],pt=ft[dh],r=ft[ph];if(this.__renderSelfData=null,ft[Ah]=jh,t)return{isDestroyed:t,break:!0};if(lt===Xt.SVG&&(_=this.__virtualDom={bb:[],children:[],visibility:"visible"},ft[xh]?ft[xh].available||(ft[xh].available=!0):ft[xh]={available:!0,release:function(){this.available=!1,delete _.cache}}),"none"===r[ps])return{break:!0};var n=this.sx,i=this.sy,d=this.width,p=this.height,a=this.clientWidth,vt=this.clientHeight,o=this.offsetWidth,s=this.offsetHeight,v=this.outerWidth,y=this.outerHeight,h=this.__hasMask,l=r[ns],g=r[rs],m=r[ts],E=r[Qo],M=r[es],O=r[Jo],T=r[os],A=r[ls],b=r[ss],x=r[hs],S=r[rh],R=this.__sx1=n+g,yt=this.__sx2=R+T,k=this.__sx3=yt+O,I=this.__sx4=k+d,N=this.__sx5=I+E,w=this.__sx6=N+A,C=this.__sy1=i+l,gt=this.__sy2=C+b,D=this.__sy3=gt+m,P=this.__sy4=D+p,L=this.__sy5=P+M,F=this.__sy6=L+x,mt=R,Et=C,Mt=w,Ot=F;"padding-box"===S?(mt=yt,Et=gt,Mt=N,Ot=L):"content-box"===S&&(mt=k,Et=D,Mt=I,Ot=P),this.__bx1=mt,this.__by1=Et,this.__bx2=Mt,this.__by2=Ot;var B={x1:R,x2:yt,x3:k,x4:I,x5:N,x6:w,y1:C,y2:gt,y3:D,y4:P,y5:L,y6:F,bx1:mt,by1:Et,bx2:Mt,by2:Ot},H=ft[wh],G=this.__hasContent=ft[Th]=this.__calContent(lt,c,pt,r);this.__calMatrix(c,dt,pt,r,R,C,o,s);var Y,W=0,U=0;u&&lt===Xt.CANVAS&&(!G&&this.__releaseWhenEmpty(e)?(B.break=!0,ft[Mh]=!1):ft[Mh]||e&&e.available||(Y=this.bbox,e?e.reset(Y):e=Uo.getInstance(Y),e&&e.enabled?(e.__bbox=Y,e.__appendData(R,C),ct=e.ctx,W=e.dx,U=e.dy,mt+=W,Et+=U,Mt+=W,Ot+=U,W&&(B.x1=R+=W,B.x2=yt+=W,B.x3=k+=W,B.x4=I+=W,B.x5=N+=W,B.x6=w+=W),U&&(B.y1=C+=U,B.y2=gt+=U,B.y3=D+=U,B.y4=P+=U,B.y5=L+=U,B.y6=F+=U)):(ft[Mh]=!0,e=null),ft[bh]=e),B.dx=W,B.dy=U),this.__calCache(lt,c,ct,ut,this.parent,dt,pt,r,a,vt,o,s,b,A,x,T,m,E,M,O,R,yt,k,I,N,w,C,gt,D,P,L,F,mt,Et,Mt,Ot);var K=r[Ns],X=r[Ks],V=r[zs],z=r[Xs],j=r[Vs],$=r[jo],q=r[$o],Z=r[Zo],J=r[qo],Q=r[qs],Tt=r[Cs],At=r[ws],tt=r[Ps],et=r[Ys],bt=r[Is],rt=r[Ds],nt=r[Ws],it=r[Us];lt===Xt.CANVAS?(H&&(tt*=H.__config[gh]),ft[gh]=tt):lt===Xt.SVG&&(1===tt?delete _.opacity:_.opacity=tt,"normal"!==it?_.mixBlendMode=it:delete _.mixBlendMode);var at=this.__matrix=ft[Eh]=dt[gs],ot=this.__renderMatrix=at;H&&(at=Vt.multiply(H.matrixEvent,at));var st,ht,xt,St,Rt,kt,It,Nt,wt,Ct,Dt,Pt,Lt,Ft,Bt,Ht,Gt,Yt,Wt,Ut=this.__matrixEvent=ft[mh];return Ut[0]=at[0],Ut[1]=at[1],Ut[2]=at[2],Ut[3]=at[3],Ut[4]=at[4],Ut[5]=at[5],lt===Xt.SVG&&(!zh(c,$h)&&c<Jh||(Vt.isE(ot)?delete _.transform:_.transform="matrix("+Yh(ot,",")+")")),lt===Xt.SVG&&(_.visibility=Q),lt===Xt.CANVAS&&u&&(ft[Mh]||B.break)?{limitCache:!0}:(ft[Oh]=0,Array.isArray(et)&&et.forEach(function(t){var e,r,n,i,a,o,s=Kt(t,2),h=s[0],l=s[1];"blur"===h&&(ft[Oh]=l,lt===Xt.CANVAS&&0<l&&!u?(e=f.width,r=f.height,(n=re.getCacheCanvas(e,r)).ctx&&(st={ctx:ct,blur:l,target:n,matrix:at},ct=n.ctx)):lt===Xt.SVG&&(Jh<=c||zh(c,rl))&&(0<l&&0<d&&0<p?(a={tagName:"filter",props:[["x",-(i=Vt.int2convolution(l))/v],["y",-i/y],["width",1+2*i/v],["height",1+2*i/y]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",l]]}]},o=ut.add(a),ft[Nh].push(a),_.filter="url(#"+o+")"):delete _.filter))}),h&&(lt!==Xt.CANVAS||u||(st?ht=st:(xt=f.width,St=f.height,(Rt=re.getCacheCanvas(xt,St)).ctx&&(ht={ctx:ct,target:Rt,matrix:at},ct=Rt.ctx)))),"hidden"===nt?lt!==Xt.CANVAS||u?lt===Xt.SVG&&(It={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(R,",").concat(C,"L").concat(n+o,",").concat(i,"L").concat(n+o,",").concat(i+s,"L").concat(n,",").concat(i+s,",L").concat(n,",").concat(i)]]}]},Nt=ut.add(It),ft[Nh].push(It),_.overflow="url(#"+Nt+")"):(st||ht?kt=st||ht:(wt=f.width,Ct=f.height,(Dt=re.getCacheCanvas(wt,Ct)).ctx&&(kt={ctx:ct,target:Dt,matrix:at},ct=Dt.ctx)),kt.x=R,kt.y=C,kt.offsetWidth=o,kt.offsetHeight=s):lt===Xt.SVG&&delete _.overflow,"normal"===it||u||(st||ht||kt?Bt=st||ht||kt:(Pt=f.width,Lt=f.height,Ft=re.getCacheCanvas(Pt,Lt),Bt={ctx:ct,target:Ft,mixBlendMode:it,matrix:at},ct=Ft.ctx)),lt!==Xt.CANVAS||u||(B.offScreenFilter=st,B.offScreenMask=ht,B.offScreenOverflow=kt,B.offScreenBlend=Bt,ct.globalAlpha=tt,ct.setTransform(at[0],at[1],at[2],at[3],at[4],at[5])),"hidden"===Q&&lt===Xt.CANVAS?B.break=!0:((0<K[3]||At)&&(Ht=$.slice(0),Gt=q.slice(0),Yt=Z.slice(0),Wt=J.slice(0),"padding-box"===S?(Ht[0]-=T,Ht[1]-=b,Gt[0]-=A,Gt[1]-=b,Yt[0]-=A,Yt[1]-=x,Wt[0]-=T,Wt[1]-=x):"content-box"===S&&(Ht[0]-=T+O,Ht[1]-=b+m,Gt[0]-=A+E,Gt[1]-=b+m,Yt[0]-=A+E,Yt[1]-=x+M,Wt[0]-=T+O,Wt[1]-=x+M)),0<K[3]&&il(lt,dt[Ns],mt,Et,Mt-mt,Ot-Et,ct,ut,this,Ht,Gt,Yt,Wt),At&&At.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m;if(t)if(zt.isString(t)){var E=_t.__loadBgi[e];if(E.url===At[e]){var M=E.source,O=Mt-mt,T=Ot-Et;if(M){var A=E.width,b=E.height,x=Kt(bt[e],2),S=x[0],R=x[1];-1===S&&-1===R?(S=A,R=b):-2===S?O<A&&T<b?(R=b/T)<=(S=A/O)?R=(S=O)*b/A:S=(R=T)*A/b:O<A?R=(S=O)*b/A:T<b?S=(R=T)*A/b:(S=A,R=b):-3===S?A<O&&b<T?(S=A/O)<=(R=b/T)?R=(S=O)*b/A:S=(R=T)*A/b:A<O||!(b<T)&&(S=A/O)<=(R=b/T)?R=(S=O)*b/A:S=(R=T)*A/b:-1===S?S=R*A/b:-1===R&&(R=S*b/A);var k,I,N=mt+ol(pt[Rs][e],O,S),w=Et+ol(pt[ks][e],T,R),C=N<yt||w<gt||O<S||T<R,D=0,P=0,L=0,F=0;-1<["repeat-x","repeat"].indexOf(Tt[e])&&(0<(k=N-mt)&&(D=Math.ceil(k/S)),0<(k=mt+O-N-S)&&(P=Math.ceil(k/S))),-1<["repeat-y","repeat"].indexOf(Tt[e])&&(0<(I=w-Et)&&(L=Math.ceil(I/R)),0<(I=Et+T-w-R)&&(F=Math.ceil(I/R)));var B,H,G,Y,W,U,K,X,V=[];if(0<D)for(var z=0;z<D;z++){var j=N-(z+1)*S;V.push([j,w]),!C&&0===z&&j<mt&&(C=!0)}if(0<P)for(var $=0;$<P;$++){var q=N+($+1)*S;V.push([q,w]),!C&&$===P-1&&mt+O<q+S&&(C=!0)}if(0<L)for(var Z=0;Z<L;Z++){var J=w-(Z+1)*R;V.push([N,J]),!C&&0===Z&&J<Et&&(C=!0)}if(0<F)for(var Q=0;Q<F;Q++){var tt=w+(Q+1)*R;V.push([N,tt]),!C&&Q===F-1&&Et+vt<tt+S&&(C=!0)}if(0<D&&0<L)for(var et=0;et<D;et++)for(var rt=0;rt<L;rt++)V.push([N-(et+1)*S,w-(rt+1)*R]);if(0<P&&0<L)for(var nt=0;nt<P;nt++)for(var it=0;it<L;it++)V.push([N+(nt+1)*S,w-(it+1)*R]);if(0<D&&0<F)for(var at=0;at<D;at++)for(var ot=0;ot<F;ot++)V.push([N-(at+1)*S,w+(ot+1)*R]);if(0<P&&0<F)for(var st=0;st<P;st++)for(var ht=0;ht<F;ht++)V.push([N+(st+1)*S,w+(ht+1)*R]);lt===Xt.CANVAS?(C&&(ct.save(),il(lt,"#FFF",mt,Et,O,T,ct,ut,_t,Ht,Gt,Yt,Wt,"clip")),ct.drawImage(M,N,w,S,R),V.forEach(function(t){ct.drawImage(M,t[0],t[1],S,R)}),C&&ct.restore()):lt===Xt.SVG&&(B=xi.matrixResize(A,b,S,R,N,w,O,T),H=[["xlink:href",t],["x",N],["y",w],["width",A],["height",b]],B&&!Vt.isE(B)&&(G=!0,H.push(["transform","matrix("+Yh(B,",")+")"])),C&&(W=[yt,gt],U=[yt+O,gt+T],G&&(Y=Vt.inverse(B),W=Vt.calPoint(W,Y),U=Vt.calPoint(U,Y)),K={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(W[0],",").concat(W[1],"L").concat(U[0],",").concat(W[1],"L").concat(U[0],",").concat(U[1],"L").concat(W[0],",").concat(U[1],"L").concat(W[0],",").concat(W[1])],["fill","#FFF"]]}]},X=ut.add(K),ft[Nh].push(K),H.push(["clip-path","url(#"+X+")"])),_t.virtualDom.bb.push({type:"img",tagName:"image",props:H}),V.forEach(function(t){var e,r=Bh(H);!G||(e=xi.matrixResize(A,b,S,R,t[0],t[1],O,T))&&!Vt.isE(e)&&(r[5][1]="matrix("+Yh(e,",")+")"),r[1][1]=t[0],r[2][1]=t[1],_t.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}else{!t.k||(m=dt[ws][e])&&("conic"===m.k?(r=lt,n=m.v,o=Mt-(i=mt),s=Ot-(a=Et),h=ct,l=ut,c=_t,u=Ht,_=Gt,f=Yt,d=Wt,g=(g=Ei.calRadius(i,a,o,s,u,_,f,d))||[[i,a],[i+o,a],[i+o,a+s],[i,a+s],[i,a]],r===Xt.CANVAS?(p=h.globalAlpha,h.globalAlpha=.5*p,h.save(),h.beginPath(),Kh(h,g),h.clip(),h.closePath(),n.forEach(function(t){h.beginPath(),Kh(h,t[0]),h.fillStyle=t[1],h.fill(),h.closePath()}),h.restore(),h.globalAlpha=p):r===Xt.SVG&&(v={tagName:"clipPath",children:[{tagName:"path",props:[["d",Xh(g)],["fill","#FFF"]]}]},c.__config[Nh].push(v),y=l.add(v),n.forEach(function(t){c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Xh(t[0])],["fill",t[1]],["clip-path","url(#"+y+")"]]})}))):il(lt,m.v,mt,Et,Mt-mt,Ot-Et,ct,ut,_t,Ht,Gt,Yt,Wt))}}),rt&&rt.forEach(function(t){!function(t,e,r,n,i,a,o,s,h,l,c){var u=Kt(n,6),_=u[0],f=u[1],d=u[2],p=u[3],v=u[4],y=u[5],g=Hh(v),m=2*Math.abs(d)+2*Math.abs(p)+2*Math.abs(_)+2*Math.abs(f),E=[[a,o],[s,o],[s,h],[a,h],[a,o]],M=[[a-m,o-m],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m]];if(0<v[3]&&(0<d||0<p))if(t===Xt.CANVAS){if(e.save(),e.beginPath(),"inset"===y){var O=a+_+p,T=o+f+p,A=s+_-p,b=h+f-p,x=[[O,T],[A,T],[A,b],[O,b]],S=jt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[x[0][0],x[0][1],x[2][0],x[2][1]]);if(!S)return;S=[[S[0],S[1]],[S[2],S[1]],[S[2],S[3]],[S[0],S[3]],[S[0],S[1]]],p?(Kh(e,S),Kh(e,E.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Kh(e,E),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),Kh(e,S),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Kh(e,[[O,T],[A,T],[A,b],[a-m,b],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,b],[O,b],[O,T]])):(Kh(e,E),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Kh(e,[[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]]))}else{var R=a+_-p,k=o+f-p,I=s+_+p,N=h+f+p,w=[[R,k],[I,k],[I,N],[R,N]],C=jt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[w[0][0],w[0][1],w[2][0],w[2][1]]);p?(Kh(e,E),Kh(e,w.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Kh(e,w),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),C&&Kh(e,[[C[0],C[1]],[C[2],C[1]],[C[2],C[3]],[C[0],C[3]],[C[0],C[1]]].reverse()),Kh(e,E),Kh(e,w),Kh(e,M),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Kh(e,w)):(Kh(e,E),Kh(e,M),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Kh(e,E))}e.fill(),e.closePath(),e.restore()}else if(t===Xt.SVG){var D=Vt.int2convolution(d);if("inset"===y){var P,L,F,B,H,G,Y,W=a+_+p,U=o+f+p,K=s+_-p,X=h+f-p,V=[[W,U],[K,U],[K,X],[W,X]],z=jt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[V[0][0],V[0][1],V[2][0],V[2][1]]);if(!z)return;z=[[z[0],z[1]],[z[2],z[1]],[z[2],z[3]],[z[0],z[3]],[z[0],z[1]]],p?(P={tagName:"filter",props:[["x",-D/l],["y",-D/c],["width",1+2*D/l],["height",1+2*D/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},i.__config[Nh].push(P),L=r.add(P),F={tagName:"clipPath",children:[{tagName:"path",props:[["d",Xh(z)+Xh(E.slice(0).reverse())],["fill","#FFF"]]}]},B=r.add(F),i.__config[Nh].push(F),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Xh(E)],["fill",g],["clip-path","url(#"+B+")"]]}),P={tagName:"clipPath",children:[{tagName:"path",props:[["d",Xh(z)],["fill","#FFF"]]}]},B=r.add(P),i.__config[Nh].push(P),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Xh([[W,U],[K,U],[K,X],[a-m,X],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,X],[W,X],[W,U]])],["fill","#FFF"],["filter","url(#"+L+")"],["clip-path","url(#"+B+")"]]})):(H={tagName:"filter",props:[["x",-D/l],["y",-D/c],["width",1+2*D/l],["height",1+2*D/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},G=r.add(H),i.__config[Nh].push(H),H={tagName:"clipPath",children:[{tagName:"path",props:[["d",Xh(E)],["fill","#FFF"]]}]},Y=r.add(H),i.__config[Nh].push(H),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Xh([[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]])],["fill","#FFF"],["filter","url(#"+G+")"],["clip-path","url(#"+Y+")"]]}))}else{var j,$,q,Z,J,Q,tt=a+_-p,et=o+f-p,rt=s+_+p,nt=h+f+p,it=[[tt,et],[rt,et],[rt,nt],[tt,nt]],at=jt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[it[0][0],it[0][1],it[2][0],it[2][1]]);p?(j={tagName:"filter",props:[["x",-D/l],["y",-D/c],["width",1+2*D/l],["height",1+2*D/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},$=r.add(j),i.__config[Nh].push(j),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",Xh(E)+Xh(it.slice(0).reverse())],["fill","#FFF"]]}]},q=r.add(j),i.__config[Nh].push(j),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Xh(it)],["fill",g],["clip-path","url(#"+q+")"]]}),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",(at?Xh([[at[0],at[1]],[at[2],at[1]],[at[2],at[3]],[at[0],at[3]],[at[0],at[1]]].reverse()):"")+Xh(E)+Xh(it)+Xh(M)],["fill","#FFF"]]}]},q=r.add(j),i.__config[Nh].push(j),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Xh(it)],["fill","#FFF"],["filter","url(#"+$+")"],["clip-path","url(#"+q+")"]]})):(Z={tagName:"filter",props:[["x",-D/l],["y",-D/c],["width",1+2*D/l],["height",1+2*D/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},J=r.add(Z),i.__config[Nh].push(Z),Z={tagName:"clipPath",children:[{tagName:"path",props:[["d",Xh(E)+Xh(M)],["fill","#FFF"]]}]},Q=r.add(Z),i.__config[Nh].push(Z),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Xh(E)],["fill","#FFF"],["filter","url(#"+J+")"],["clip-path","url(#"+Q+")"]]}))}}}(lt,ct,ut,t,_t,R,C,w,F,v,y)}),0<b&&0<X[3]&&nl(lt,dt[Js],dt[Ks],ct,this,W,U),0<A&&0<V[3]&&nl(lt,dt[Qs],dt[zs],ct,this,W,U),0<x&&0<z[3]&&nl(lt,dt[th],dt[Xs],ct,this,W,U),0<T&&0<j[3]&&nl(lt,dt[eh],dt[Vs],ct,this,W,U),e&&e.enabled&&(e.__available=!0)),B)}},{key:"render",value:function(t,e,r,n,i){return this.__renderSelf(t,e,r,n,i)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(et(tt(x.prototype),"__destroy",this).call(this),t=this.root,this.animationList.forEach(function(t){return t.__destroy()}),this.__frameAnimateList.splice(0).forEach(function(t){wi.offFrame(t)}),t.delRefreshTask(this.__loadBgi.cb),t.delRefreshTask(this.__task),this.__matrix=this.__matrixEvent=this.__root=null,this.__cancelCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[ps]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener;return o.hasOwnProperty(a)&&(i=o[a]),e?(t.target=this,zt.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):this.willResponseEvent(t)?(zt.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,r=t.y,n=this.__sx1,i=this.__sy1,a=this.offsetWidth,o=this.offsetHeight,s=this.matrixEvent;if("none"!==this.computedStyle[Zs])return ni.pointInQuadrilateral(e,r,n,i,n+a,i,n+a,i+o,n,i+o,s)?(t.target||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d=a-n,p=o-i,v=s.k,y=s.v,g=s.d,m=s.s,E=s.z,M=s.p,O=n+.5*d,T=i+.5*p,A={k:v};return"linear"===v?(h=bt.getLinear(y,g,n,i,O,T,d,p),A.v=this.__getLg(t,e,r,h)):"radial"===v?(l=bt.getRadial(y,m,E,M,n,i,a,o))&&(A.v=this.__getRg(t,e,r,l),l.matrix&&(A.v=[A.v,l.matrix,l.cx,l.cy])):"conic"===v&&(c=this.bbox,u=Math.max(Math.abs(c[2]-c[0]),Math.abs(c[3]-c[1])),_=Math.max(Math.abs(d),Math.abs(p)),f=bt.getConic(y,g,M,n,i,a,o,u/_),A.v=this.__getCg(t,e,r,f)),A}},{key:"__getLg",value:function(t,e,r,n){if(t===Xt.CANVAS){var i=e.createLinearGradient(n.x1,n.y1,n.x2,n.y2);return n.stop.forEach(function(t){i.addColorStop(t[1],Hh(t[0]))}),i}if(t===Xt.SVG){var a={tagName:"linearGradient",props:[["x1",n.x1],["y1",n.y1],["x2",n.x2],["y2",n.y2]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Hh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[Nh].push(a),"url(#"+o+")"}}},{key:"__getRg",value:function(t,e,r,n){if(t===Xt.CANVAS){var i=e.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.r);return n.stop.forEach(function(t){i.addColorStop(t[1],Hh(t[0]))}),i}if(t===Xt.SVG){var a={tagName:"radialGradient",props:[["cx",n.cx],["cy",n.cy],["r",n.r]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Hh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[Nh].push(a),"url(#"+o+")"}}},{key:"__getCg",value:function(t,e,r,n){var i=n.cx,a=n.cy,o=n.r,s=n.deg,h=n.stop,l=h.length-1;h[l][1]<1&&h.push([h[l][0].slice(0),1]),0<h[0][1]&&h.unshift([h[0][0].slice(0),0]);for(var c=t===Xt.CANVAS?1.5:.5,u=[],_=0,f=h.length;_<f-1;_++)for(var d=360*h[_][1],p=360*h[_+1][1]-d,v=Math.ceil(p),y=p/v,g=h[_][0],m=h[_+1][0],E=[m[0]-g[0],m[1]-g[1],m[2]-g[2],m[3]-g[3]],M=[E[0]/v,E[1]/v,E[2]/v,E[3]/v],O=0;O<v;O++){var T=Kt(jt.pointOnCircle(i,a,o,d+y*O+s-c),2),A=T[0],b=T[1],x=Kt(jt.pointOnCircle(i,a,o,d+y*O+s+c),2),S=x[0],R=x[1];u.push([A,b,S,R,Math.round(g[0]+M[0]*O),Math.round(g[1]+M[1]*O),Math.round(g[2]+M[2]*O),Math.round(g[3]+M[3]*O)])}var k=u[0].slice(0),I=Kt(jt.pointOnCircle(i,a,o,s),2),N=I[0],w=I[1];k[2]=N,k[3]=w;var C=h[h.length-1][0];k[4]=C[0],k[5]=C[1],k[6]=C[2],k[7]=C[3],u.push(k);var D,P=[];if(t===Xt.CANVAS)for(var L=0,F=u.length;L<F;L++){var B,H=u[L];D&&((B=e.createLinearGradient(D[0],D[1],H[2],H[3])).addColorStop(0,Hh([D[4],D[5],D[6],D[7]])),B.addColorStop(1,Hh([H[4],H[5],H[6],H[7]])),P.push([[[i,a],[D[0],D[1]],[H[2],H[3]]],B])),D=H}else if(t===Xt.SVG)for(var G=0,Y=u.length;G<Y;G++){var W,U,K=u[G];D&&(W={tagName:"linearGradient",props:[["x1",D[0]],["y1",D[1]],["x2",K[2]],["y2",K[3]]],children:[{tagName:"stop",props:[["stop-color",Hh([D[4],D[5],D[6],D[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",Hh([K[4],K[5],K[6],K[7]])],["offset","100%"]]}]},U=r.add(W),this.__config[Nh].push(W),P.push([[[i,a],[D[0],D[1]],[K[2],K[3]]],"url(#"+U+")"])),D=K}return P}},{key:"__cancelCache",value:function(t){var e,r=this.__config,n=r[xh],i=r[Sh],a=r[Rh],o=r[kh];t||(r[fh]=this.__cacheStyle={},(e=r[bh])&&e.release()),n&&n.release(),i&&(re.releaseCacheCanvas(i.canvas),r[Sh]=null),a&&(re.releaseCacheCanvas(a.canvas),r[Rh]=null),o&&(re.releaseCacheCanvas(o.canvas),r[kh]=null)}},{key:"updateStyle",value:function(e,r){var n=this,i=n.root,a=n.__config,o=cn.normalize(e);i?i.addRefreshTask(n.__task={__before:function(){var t;a[Ih]||((t={})[ih]=n,t[oh]=o,t[sh]=e,t[hh]=Object.keys(o).map(function(t){return Vh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[lh]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){zt.isFunction(r)&&r.call(n,t)}}):(Object.assign(this.currentStyle,o),zt.isFunction(r)&&r.call(n,0))}},{key:"updateFormatStyleNoOverwrite",value:function(e,r){var n,i=this.root,a=this.__config;i&&(n=this,i.addRefreshTask(n.__task={__before:function(){var t;a[Ih]||((t={})[ih]=n,t[oh]=e,t[hh]=Object.keys(e).map(function(t){return Vh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[lh]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){zt.isFunction(r)&&r.call(n,t)}}))}},{key:"animate",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{},n=new mo(this,t,r);return this.isDestroyed?(n.__destroy(!0),n):(this.animationList.push(n),!1===r.autoPlay?n:n.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof mo&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(zt.isFunction(e)){var t={__after:function(t){e(t)},__karasFramecb:e};return this.__frameAnimateList.push(t),wi.onFrame(t),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,n=r.length;e<n;e++)r[e].__karasFramecb===t&&(r.splice(e,1),wi.offFrame(t))}},{key:"__computeMeasure",value:function(t,e,r,n){cn.computeMeasure(this,r),zt.isFunction(n)&&n(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){et(tt(x.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t),void 0!==r&&(this.__config[Ah]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t}},{key:"__offsetY",value:function(t,e,r){et(tt(x.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t),void 0!==r&&(this.__config[Ah]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t}},{key:"__resizeX",value:function(t,e){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,t<0&&(this.__config[Mh]=!1),void 0!==e&&(this.__config[Ah]|=e)}},{key:"__resizeY",value:function(t,e){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,t<0&&(this.__config[Mh]=!1),void 0!==e&&(this.__config[Ah]|=e)}},{key:"__spreadByBoxShadowAndFilter",value:function(t,e){var s=0,h=0;if(Array.isArray(t)&&t.forEach(function(t){var e,r=Kt(t,6),n=r[0],i=r[1],a=r[2],o=r[3];"inset"!==r[5]&&(e=Vt.int2convolution(a),e+=o,s=Math.max(s,n+e),h=Math.max(h,i+e))}),Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i,a=Kt(e[r],2),o=a[0],l=a[1];"blur"===o&&(i=Vt.int2convolution(l),s=Math.max(s,i),h=Math.max(h,i))}return[s,h]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},n=t?(n=Array.isArray(t)?t:[t]).map(function(t){return Ko[Vo(t)]}):Object.keys(e);return n.forEach(function(t){Vh.hasOwnProperty(t)?r[t]=e[t]:r[Xo[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,n=this.offsetHeight,i=this.matrixEvent,a=Vt.calPoint([t,e],i),o=Vt.calPoint([t+r,e],i),s=Vt.calPoint([t+r,e+n],i),h=Vt.calPoint([t,e+n],i);return{left:Math.min(a[0],Math.min(o[0],Math.min(s[0],h[0]))),top:Math.min(a[1],Math.min(o[1],Math.min(s[1],h[1]))),right:Math.max(a[0],Math.max(o[0],Math.max(s[0],h[0]))),bottom:Math.max(a[1],Math.max(o[1],Math.max(s[1],h[1]))),points:[a,o,s,h]}}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.clientWidth,n=this.clientHeight,i=this.currentStyle,a=i[ss],o=i[ls],s=i[hs],h=i[os],l=i[Ds],c=i[Ys],u=Kt(this.__spreadByBoxShadowAndFilter(l,c),2),_=u[0],f=u[1];return[t-_,e-f,t+(r+=h[0]+o[0])+_,e+(n+=a[0]+s[0])+f]}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"renderMatrix",get:function(){return this.__renderMatrix}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}}]),x}(),fl=v.STYLE_KEY.MARGIN_BOTTOM,dl=function(){function r(t,e){g(this,r),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return l(r,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var r=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.outerWidth}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}},{key:"marginBottom",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.computedStyle[fl])}),e}}]),r}(),pl=v.NODE_KEY.NODE_DOM_PARENT,vl=k.TYPE_VD,yl=k.TYPE_GM,gl=k.TYPE_CP;function ml(t,e,r,n,i){if(Array.isArray(t))return t.map(function(t){return ml(t,e,r,n)});if(zt.isObject(t)&&t.$$type){var a=t.tagName,o=t.props,s=t.children,h=t.klass,l=t.$$type,c=t.inheritAnimate,u=t.__animateRecords;if(l===gl&&t.placeholder)return t.value;if(l===vl){if("img"===a){if(_=new ll(a,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else _=new hl(a,o);if("p"===a)i=!0;else if("div"===a&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?Ml(_,ml(s,e,r,n,i)):[],_.__children=s}else if(l===yl)var _=new(cl.getRegister(a))(a,o);else{if(l!==gl)return new kn(t);(_=new h(o)).__tagName=_.__tagName||a}t.vd=_,u&&(_.__animateRecords=u).list.forEach(function(t){t.target=t.target.vd}),c&&zt.extendAnimate(c,_),_.__root=e,n&&(_.__host=n),l===gl&&_.__init();var f=o.ref;return zt.isString(f)&&f||zt.isNumber(f)?r.ref[f]=_:zt.isFunction(f)&&f(_),_}return new kn(t)}function El(t){if(Array.isArray(t))return t.map(El);if(!t||-1===[vl,yl,gl].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,n){if(Array.isArray(t))t.forEach(function(t){e(r,t,n)});else if(!t||t.$$type!==vl&&t.$$type!==yl)t&&t.$$type===gl?(r.push(t),n.lastText=null):zt.isNil(t)||""===t||(null!==n.lastText?r[r.length-1]=n.lastText+=t:r.push(t));else{if(-1<["canvas","svg"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg");t.$$type===vl&&El(t),r.push(t),n.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}function Ml(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(t)?t.forEach(function(t){Ml(e,t,n)}):(t instanceof sl||t instanceof ul||t instanceof kn)&&(t.__parent=e,t.__domParent=e,t instanceof kn&&Object.assign(t.__config,e.__config),t.__config&&(t.__config[pl]=e),n.prev&&((n.prev.__next=t).__prev=n.prev),(n.prev=t)instanceof ul&&((r=t.shadowRoot)instanceof kn&&(r.__parent=e,Object.assign(r.__config,e.__config)),r.__domParent=e,r.__config&&(r.__config[pl]=e))),t}var Ol={ref:function(t){sl=t.Xom,hl=t.Dom,ll=t.Img,cl=t.Geom,ul=t.Component},initRoot:function(t,e){return Ml(e,ml(El({children:t,$$type:vl}).children,e,e))},initCp:function(t,e,r){if(zt.isObject(t)){var n=ml(t,e,r,r);return Array.isArray(n)&&Ml(r,n),n}return new kn(t)},flattenJson:El,relation:Ml,build:ml},Tl=zt.isNil,Al=zt.isFunction,bl=zt.clone,xl=zt.extend;var Sl=function(){t(h,Ri);var r=e(h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return g(this,h),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=zt.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.__state={},t.__isMounted=!1,t.__taskList=[],t}return l(h,[{key:"setState",value:function(t,e){var r=this,n=this;if(Tl(t))t={};else{if(Al(t))return void e.call(n);if(0===Object.keys(t).length)return void(Al(e)&&e.call(n));var i=bl(n.state);t=xl(i,t)}var a,o,s=n.root;s&&n.__isMounted?n.__nextState?(Object.assign(n.__nextState,t),n.__taskList.push(e)):(n.__nextState=t,n.__taskList=[e],a=[],o=n.__task={__before:function(){a=n.__taskList.splice(0),function t(e){var r;e.__hasUpdate||(e.__hasUpdate=!0,(r=e.host)&&t(r))}(r)},__after:function(){a.forEach(function(t){Al(t)&&t.call(n)})}},s.addRefreshCp(o)):Al(e)&&(n.__state=t,e.call(n))}},{key:"__init",value:function(t){var r=this;this.__ref={};var e,n=this.root,i=t||Ol.flattenJson(this.render()),a=Ol.initCp(i,n,this);if(this.__cd=i,a instanceof kn)re.warn("Component render() return a text, should not inherit style/event");else if(a instanceof S){var o=cn.normalize(this.props.style),s=Object.keys(o);xl(a.style,o,s),xl(a.currentStyle,o,s),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)?(t=t.slice(2).toLowerCase(),a.listener[t]=e):/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))})}else{if(!(a instanceof h))throw new Error("Component render() must return a dom/text: "+this);re.warn("Component render() return a component: "+this.tagName+" -> "+a.tagName+", should not inherit style/event")}for((this.__shadow=a).__host=this;a instanceof h;)a=a.shadowRoot;(a.__host=this).__shadowRoot=a,this.__isMounted||(this.__isMounted=!0,e=this.componentDidMount,Al(e)&&n.once(Ri.REFRESH,function(){e.call(r)}))}},{key:"render",value:function(){re.warn("Component must implement render()!")}},{key:"__destroy",value:function(){var t;this.isDestroyed||(this.__isDestroyed=!0,t=this.componentWillUnmount,Al(t)&&(t.call(this),this.__isMounted=!1),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t){var e=this.shadowRoot;if(!(e instanceof kn))return e.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"__computeMeasure",value:function(t,e,r,n){var i=this.shadowRoot;i instanceof kn?i.__computeMeasure(t,e):i.__computeMeasure(t,e,!0,n)}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),h}();Object.keys(Re.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config"]).forEach(function(e){Object.defineProperty(Sl.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","__cancelCache","__structure","__modifyStruct","__updateStruct"].forEach(function(e){Sl.prototype[e]=function(){var t=this.shadowRoot;if(t&&Al(t[e]))return t[e].apply(t,arguments)}});var Rl={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},kl=v.STYLE_KEY,Il=kl.POSITION,Nl=kl.DISPLAY,wl=kl.FONT_WEIGHT,Cl=kl.MARGIN_LEFT,Dl=kl.MARGIN_TOP,Pl=kl.MARGIN_RIGHT,Ll=kl.MARGIN_BOTTOM,Fl=kl.PADDING_LEFT,Bl=kl.PADDING_BOTTOM,Hl=kl.PADDING_RIGHT,Gl=kl.PADDING_TOP,Yl=kl.BORDER_TOP_WIDTH,Wl=kl.BORDER_BOTTOM_WIDTH,Ul=kl.BORDER_RIGHT_WIDTH,Kl=kl.BORDER_LEFT_WIDTH,Xl=kl.TOP,Vl=kl.RIGHT,zl=kl.BOTTOM,jl=kl.LEFT,$l=kl.WIDTH,ql=kl.HEIGHT,Zl=kl.TEXT_ALIGN,Jl=kl.FLEX_DIRECTION,Ql=kl.FLEX_BASIS,tc=kl.FLEX_SHRINK,ec=kl.FLEX_GROW,rc=kl.ALIGN_SELF,nc=kl.ALIGN_ITEMS,ic=kl.JUSTIFY_CONTENT,ac=kl.Z_INDEX,oc=v.NODE_KEY,sc=oc.NODE_CURRENT_STYLE,hc=oc.NODE_STYLE,lc=oc.NODE_STRUCT,cc=oc.NODE_DOM_PARENT,uc=v.STRUCT_KEY,_c=uc.STRUCT_NUM,fc=uc.STRUCT_LV,dc=uc.STRUCT_TOTAL,pc=uc.STRUCT_CHILD_INDEX,vc=uc.STRUCT_INDEX,yc=x.AUTO,gc=x.PX,mc=x.PERCENT,Ec=cn.calAbsolute,Mc=cn.isRelativeOrAbsolute;function Oc(t){var i,a,o,s=[],h=[],l={},c=!1,u=t.children;u.forEach(function(t,e){var r,n=t;t instanceof Sl&&(t=t.shadowRoot),t instanceof _l&&t.isMask?void 0!==o?l[o].push(t):e&&(u[o=e-1].__iIndex=o,l[o]=[t],i=!0):(o=void 0,t instanceof _l&&Mc(t)?(n.__iIndex=e,r=n.__zIndex=t.currentStyle[ac],h.push(n),void 0===a?a=r:c||(r<a&&(c=!0),a=r)):s.push(n))}),c&&h.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__iIndex-e.__iIndex});var e=s.concat(h);if(i)for(var r=e.length-1;0<=r;r--){var n=e[r].__iIndex;l.hasOwnProperty(n)&&e.splice.apply(e,[r+1,0].concat(p(l[n])))}return e}var Tc=function(){t(u,_l);var o=e(u);function u(t,e,r){var n;g(this,u),(n=o.call(this,t,e)).__lineGroups=[];var i=_(n).style;i.display&&{flex:!0,block:!0,inline:!0,none:!0}.hasOwnProperty(i.display)||(Rl.INLINE.hasOwnProperty(n.tagName)?i.display="inline":i.display="block"),!i[wl]&&Rl.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),n.__style=cn.normalize(i,Dt.DOM_ENTRY_SET),n.__currentStyle=zt.extend({},n.__style),n.__children=r||[];var a=n.__config;return a[sc]=n.__currentStyle,a[hc]=n.__style,n}return l(u,[{key:"__structure",value:function(n,i,t){var e=et(tt(u.prototype),"__structure",this).call(this,n++,i,t),a=[e],r=this.__zIndexChildren=this.__zIndexChildren||Oc(this);r.forEach(function(t,e){var r=t.__structure(n,i+1,e);Array.isArray(r)?(n+=r.length,a=a.concat(r)):(n++,a.push(r))});var o=a.length-1;return e[_c]=r.length,e[dc]=o,a}},{key:"__modifyStruct",value:function(t,e){var r,n=1<arguments.length&&void 0!==e?e:0,i=this.__config,a=i[lc],o=a[dc]||0,s=this.__structure(a[vc],a[fc],a[pc]);(r=t.__structs).splice.apply(r,[a[vc]+n,a[dc]+1].concat(p(s)));var h,l=0;return this!==t&&(l=((a=i[lc])[dc]||0)-o,(h=i[cc].__config[lc])[dc]=h[dc]||0,h[dc]+=l),[a,l]}},{key:"__updateStruct",value:function(t){var e=this.__config[lc],r=e[vc],n=e[dc],i=void 0===n?0:n,a=this.__zIndexChildren=Oc(this);if(1!==a.length){a.forEach(function(t,e){t.__config[lc][pc]=e});for(var o,s=[],h=[],l=r+1;l<=r+i;l++){var c=t[l],u={child:c,list:t.slice(c[vc],c[vc]+c[dc]+1)};s.push(u),h.push(u),l+=c[dc]||0}s.sort(function(t,e){return t.child[pc]-e.child[pc]});for(var _,f=0,d=h.length;f<d;f++)if(h[f]!==s[f]){o=!0;break}o&&(_=[],s.forEach(function(t){_=_.concat(t.list)}),_.forEach(function(t,e){t[vc]=r+e+1}),t.splice.apply(t,[r+1,i].concat(p(_))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,n=this.currentStyle[$l];if(n[1]===gc)return t-n[0];if(n[1]===mc)return t-e*n[0]*.01;for(var i=0;i<r.length;i++){if(t<0)return t;var a=r[i];t-=a instanceof _l||a instanceof Sl?a.__tryLayInline(t,e):a.textWidth}return t}},{key:"__offsetX",value:function(e,r,n){et(tt(u.prototype),"__offsetX",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,n)})}},{key:"__offsetY",value:function(e,r,n){et(tt(u.prototype),"__offsetY",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,n)})}},{key:"__calAutoBasis",value:function(a,o,s,t){var e,r,n,i,h=0,l=0,c=0,u=this.flowChildren,_=this.currentStyle,f=_[$l],d=_[ql],p=_[Cl],v=_[Dl],y=_[Pl],g=_[Ll],m=_[Fl],E=_[Gl],M=_[Hl],O=_[Bl],T=_[Yl],A=_[Ul],b=_[Wl],x=_[Kl],S=a?f:d;return S[1]===gc&&(h=c=S[0],t&&(l=h)),u.forEach(function(t){var e,r,n,i;c=t instanceof _l||t instanceof Sl&&t.shadowRoot instanceof _l?(r=(e=t.__calAutoBasis(a,o,s,!0)).b,n=e.min,i=e.max,h=Math.max(h,r),l=Math.max(l,n),Math.max(c,i)):a?(l=Math.max(t.charWidth,l),Math.max(t.textWidth,c)):(cn.computeReflow(t),t.__layout({x:0,y:0,w:o,h:s},!0),l=Math.max(l,t.height),Math.max(c,t.height))}),a?(e=this.__calMp(p,o)+this.__calMp(y,o)+this.__calMp(m,o)+this.__calMp(M,o),r=x[0]+A[0]+e,h+=r,c+=r,l+=r):(n=this.__calMp(v,o)+this.__calMp(g,o)+this.__calMp(E,o)+this.__calMp(O,o),i=T[0]+b[0]+n,h+=i,c+=i,l+=i),{b:h,min:l,max:c}}},{key:"__calMp",value:function(t,e){var r=0;return t[1]===gc?r+=t[0]:t[1]===mc&&(t[0]*=.01*e,t[1]=gc,r+=t[0]),r}},{key:"__layoutNone",value:function(){et(tt(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof _l||t instanceof Sl&&t.shadowRoot instanceof _l)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(E,M){var t=this.flowChildren,e=this.currentStyle,r=this.computedStyle,O=this.lineGroups;O.splice(0);var n=r[Zl],i=this.__preLayout(E),a=i.fixedWidth,o=i.fixedHeight,T=i.x,A=i.y,b=i.w,x=i.h;if(a&&M)return this.__width=b,void this.__ioSize(b,this.height);var S=0,R=0,k=new dl(T,A),I=[],N=[],w=t.length;t.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g=t instanceof _l||t instanceof Sl&&t.shadowRoot instanceof _l,m=g&&"inline"===t.currentStyle[Nl];g&&!m||(I.length&&N.length&&((r=zt.getMergeMarginTB(N,I))&&(A+=r)),N=[],I=[]),g?m?T===E.x?(k.add(t),t.__layout({x:T,y:A,w:b,h:x},M),T+=t.outerWidth,M&&(S=Math.max(S,R),R=t.outerWidth)):(0<=t.__tryLayInline(b-T+E.x,b)?t.__layout({x:T,y:A,w:b,h:x},M):(O.push(k),M||k.verticalAlign(),T=E.x,A+=k.height+k.marginBottom,t.__layout({x:E.x,y:A,w:b,h:x},M),k=new dl(T,A),M&&(S=Math.max(S,R),R=0)),T+=t.outerWidth,k.add(t),M&&(R+=t.outerWidth)):(k.size&&(O.push(k),k.verticalAlign(),A+=k.height+k.marginBottom,k=new dl(E.x,A),M&&(S=Math.max(S,R),R=0)),t.__layout({x:E.x,y:A,w:b,h:x},M),T=E.x,!(n="none"===t.currentStyle[Nl])&&t.flowChildren&&0===t.flowChildren.length&&(o=(a=t.computedStyle)[Dl],s=a[Ll],h=a[Gl],l=a[Bl],c=a[ql],u=a[Yl],_=a[Wl],h<=0&&l<=0&&c<=0&&u<=0&&_<=0&&(I.push(s),N.push(o),i=!0)),A+=t.outerHeight,M&&(S=Math.max(S,t.outerWidth),R=0),n||i?e!==w-1||(f=zt.getMergeMarginTB(N,I))&&(A+=f):(p=(d=t.computedStyle)[Dl],v=d[Ll],I.length&&(N.push(p),(y=zt.getMergeMarginTB(N,I))&&(t.__offsetY(y,!0),A+=y)),N=[],I=[v])):T===E.x?(k.add(t),t.__layout({x:T,y:A,w:b,h:x},M),T+=t.width,M&&(S=Math.max(S,R),R=t.width)):(0<=t.__tryLayInline(b-T+E.x)?t.__layout({x:T,y:A,w:b,h:x},M):(O.push(k),k.verticalAlign(),T=E.x,A+=k.height+k.marginBottom,t.__layout({x:E.x,y:A,w:b,h:x},M),k=new dl(T,A),M&&(S=Math.max(S,R),R=0)),T+=t.width,k.add(t),M&&(R+=t.width))}),k.size&&(O.push(k),M?S=Math.max(S,R):k.verticalAlign(),A+=k.height);var s=this.__width=a||!M?b:S,h=this.__height=o?x:A-E.y;this.__ioSize(s,h),!M&&-1<["center","right"].indexOf(n)&&O.forEach(function(t){var e=b-t.width;0<e&&t.horizonAlign("center"===n?.5*e:e)}),M||this.__marginAuto(e,E)}},{key:"__layoutFlex",value:function(t,c){var x=this,e=this.flowChildren,r=this.currentStyle,n=r[Jl],i=r[ic],a=r[nc],o=this.__preLayout(t),s=o.fixedWidth,b=o.fixedHeight,S=o.x,R=o.y,k=o.w,I=o.h;if(s&&c)return this.__width=k,void this.__ioSize(k,this.height);var u=0,N="row"===n,w=[],C=[],D=[],P=[],L=0,F=0,B=0,_=0;if(e.forEach(function(t){if(t instanceof _l||t instanceof Sl&&t.shadowRoot instanceof _l){var e=t.__calAutoBasis(!!c||N,k,I),r=e.b,n=e.min,i=e.max;if(c)return void(N?u+=i:u=Math.max(u,i));var a=t.currentStyle,o=t.computedStyle,s=a[ec],h=a[tc],l=a[Ql];w.push(s),C.push(h),L+=s,F+=h,l[1]===yc?(D.push(i),B+=i):l[1]===gc?(o[Ql]=r=l[0],D.push(r),B+=r):l[1]===mc&&(r=o[Ql]=(N?k:I)*l[0]*.01,D.push(r),B+=r),_+=i,P.push(n)}else{if(c)return void(N?u+=t.textWidth:u=Math.max(u,t.textWidth));w.push(0),C.push(1),F+=1,N?(D.push(t.textWidth),B+=t.textWidth,_+=t.textWidth,P.push(t.charWidth)):(t.__layout({x:0,y:0,w:k,h:I},!0),D.push(t.height),B+=t.height,_+=t.height,P.push(t.height))}}),c){var h=this.__width=Math.min(u,k);this.__ioSize(h,this.height)}else{var H=0,G=(N?k:I)<_;e.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T=C[e],A=w[e];n=G?(r=B-(N?k:I),T?D[e]-r*T/F:D[e]):(i=(N?k:I)-B,A?D[e]+i*A/L:D[e]),n=Math.max(n,P[e]),t instanceof _l||t instanceof Sl&&t.shadowRoot instanceof _l?(a=t.currentStyle,o=t.computedStyle,s=a[Nl],h=a[Jl],l=a[$l],c=a[ql],"inline"===s&&(a[Nl]=o[Nl]="block"),N?("flex"===s&&"column"===h&&b&&c[1]===yc&&(c[0]=I,c[1]=gc),t.__layout({x:S,y:R,w:n,h:I})):("flex"===s&&"row"===h&&l[1]===yc&&(l[0]=k,l[1]=gc),t.__layout({x:S,y:R,w:k,h:n})),(G&&T||!G&&A)&&(u=o[Yl],_=o[Wl],f=o[Dl],d=o[Ll],p=o[Gl],v=o[Bl],y=o[Ul],g=o[Kl],m=o[Pl],E=o[Cl],M=o[Hl],O=o[Fl],N?(t.__width=n-E-m-O-M-g-y,t.__clientWidth=n-E-m-g-y,x.__offsetWidth=n-E-m,t.__outerWidth=n):(t.__height=n-f-d-p-v-u-_,t.__clientHeight=n-f-d-u-_,x.__offsetHeight=n-f-m,t.__outerHeight=n))):t.__layout({x:S,y:R,w:N?n:k,h:N?I:n}),H=N?(S+=t.outerWidth,Math.max(H,t.outerHeight)):(R+=t.outerHeight,Math.max(H,t.outerWidth))});var l=N?k-S+t.x:I-R+t.y;if(!G&&0===L&&0<l){var f=e.length;if("flex-end"===i)for(var d=0;d<f;d++){var p=e[d];N?p.__offsetX(l,!0):p.__offsetY(l,!0)}else if("center"===i)for(var v=.5*l,y=0;y<f;y++){var g=e[y];N?g.__offsetX(v,!0):g.__offsetY(v,!0)}else if("space-between"===i)for(var m=l/(f-1),E=1;E<f;E++){var M=e[E];N?M.__offsetX(m*E,!0):M.__offsetY(m*E,!0)}else if("space-around"===i)for(var O=l/(f+1),T=0;T<f;T++){var A=e[T];N?A.__offsetX(O*(T+1),!0):A.__offsetY(O*(T+1),!0)}}N?(b&&(H=I),R+=H):s&&(H=k),c||("stretch"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.computedStyle,c=t.currentStyle,u=c[rc],_=c[$l],f=c[ql],d=l[Yl],p=l[Wl],v=l[Dl],y=l[Ll],g=l[Gl],m=l[Bl],E=l[Ul],M=l[Kl],O=l[Pl],T=l[Cl],A=l[Hl],b=l[Fl];N?"flex-start"===u||("center"===u?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===u?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):f[1]===yc&&(n=t.height,i=(t.__height=l[ql]=H-v-y-g-m-d-p)-n,t.__clientHeight+=i,t.__outerHeight+=i)):"flex-start"===u||("center"===u?0!=(a=H-t.outerWidth)&&t.__offsetX(.5*a,!0):"flex-end"===u?0!=(o=H-t.outerWidth)&&t.__offsetX(o,!0):_[1]===yc&&(s=t.width,h=(t.__width=l[$l]=H-T-O-b-A-E-M)-s,t.__clientWidth+=h,x.__offsetWidth+=h,t.__outerWidth+=h))}):"center"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b=t.currentStyle[rc];N?"flex-start"===b||("flex-end"===b?0!=(e=H-t.outerHeight)&&t.__offsetY(e,!0):"stretch"===b?(r=t.computedStyle,n=t.currentStyle[ql],i=r[Yl],a=r[Wl],o=r[Dl],s=r[Ll],h=r[Gl],l=r[Bl],n[1]===yc&&(c=t.height,u=(t.__height=r[ql]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(.5*_,!0)):"flex-start"===b||("flex-end"===b?0!=(f=H-t.outerWidth)&&t.__offsetX(f,!0):"stretch"===b?(d=t.computedStyle,p=t.currentStyle[$l],v=d[Ul],y=d[Kl],g=d[Pl],m=d[Cl],E=d[Hl],M=d[Fl],p[1]===yc&&(O=t.width,T=(t.__width=d[$l]=H-m-g-M-E-v-y)-O,t.__clientWidth+=T,x.__offsetWidth+=T,t.__outerWidth+=T)):0!=(A=H-t.outerWidth)&&t.__offsetX(.5*A,!0))}):"flex-end"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b=t.currentStyle[rc];N?"flex-start"===b||("center"===b?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"stretch"===b?(r=t.computedStyle,n=t.currentStyle[ql],i=r[Yl],a=r[Wl],o=r[Dl],s=r[Ll],h=r[Gl],l=r[Bl],n[1]===yc&&(c=t.height,u=(t.__height=r[ql]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(_,!0)):"flex-start"===b||("center"===b?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"stretch"===b?(d=t.computedStyle,p=t.currentStyle[$l],v=d[Ul],y=d[Kl],g=d[Pl],m=d[Cl],E=d[Hl],M=d[Fl],p[1]===yc&&(O=t.width,T=(t.__width=d[$l]=H-m-g-M-E-v-y)-O,t.__clientWidth+=T,x.__offsetWidth+=T,t.__outerWidth+=T)):0!=(A=H-t.outerHeight)&&t.__offsetY(A,!0))}):e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b=t.currentStyle[rc];N?"flex-start"===b||("center"===b?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===b?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):"stretch"===b&&(n=t.computedStyle,i=t.currentStyle[ql],a=n[Yl],o=n[Wl],s=n[Dl],h=n[Ll],l=n[Gl],c=n[Bl],i[1]===yc&&(u=t.height,_=(t.__height=t.__height=n[ql]=H-s-h-l-c-a-o)-u,t.__clientHeight+=_,t.__outerHeight+=_))):"flex-start"===b||("center"===b?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"flex-end"===b?0!=(d=H-t.outerWidth)&&t.__offsetX(d,!0):"stretch"===b&&(p=t.computedStyle,v=t.currentStyle[$l],y=p[Ul],g=p[Kl],m=p[Pl],E=p[Cl],M=p[Hl],O=p[Fl],v[1]===yc&&(T=t.width,A=(t.__width=p[$l]=H-E-m-O-M-y-g)-T,t.__clientWidth+=A,x.__offsetWidth+=A,t.__outerWidth+=A)))}));var Y=this.__width=k,W=this.__height=b?I:R-t.y;this.__ioSize(Y,W),this.__marginAuto(r,t)}}},{key:"__layoutInline",value:function(e,r){var n=this,t=this.flowChildren,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[Zl],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new dl(c,u);t.forEach(function(t){t instanceof _l||t instanceof Sl&&t.shadowRoot instanceof _l?("inline"!==t.currentStyle[Nl]&&(t.currentStyle[Nl]=t.computedStyle[Nl]="inline",re.error("Inline can not contain block/flex")),c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,d=Math.max(d,p),p=t.outerWidth):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new dl(c,u),d=Math.max(d,p),p=0),c+=t.outerWidth,v.add(t),p+=t.outerWidth)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,d=Math.max(d,p),p=t.width):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new dl(c,u),d=Math.max(d,p),p=0),c+=t.width,v.add(t),p+=t.width)}),v.size&&(a.push(v),r||v.verticalAlign(),u+=v.height,d=Math.max(d,p));var y=this.__width=h?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=n.__width-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)})}},{key:"__layoutAbs",value:function(n,i,x){var S=n.sx,R=n.sy,k=n.clientWidth,I=n.clientHeight,t=n.computedStyle,e=this.isDestroyed,r=this.children,a=this.absChildren,o=t[Nl],s=t[Yl],h=t[Kl],l=t[Dl],c=t[Cl],N=t[Fl];e||"none"===o?this.__layoutNone():(S+=c+h,R+=l+s,a.forEach(function(t){if(x){var e=t;if(e instanceof Sl&&(e=t.shadowRoot),x!==e&&x!==t)return}var r=t.currentStyle,n=t.computedStyle;if("none"!==r[Nl]){t.__mp(r,n,k),"inline"===r[Nl]&&(r[Nl]=n[Nl]=t.style.display="block");var i,a,o,s,h,l,c,u,_,f,d,p=r[jl],v=r[Xl],y=r[Vl],g=r[zl],m=r[$l],E=r[ql],M=r[Nl],O=r[Jl];if(p[1]!==yc?(f=!0,n[jl]=Ec(r,"left",p,k)):n[jl]="auto",y[1]!==yc?(u=!0,n[Vl]=Ec(r,"right",y,k)):n[Vl]="auto",v[1]!==yc?(c=!0,n[Xl]=Ec(r,"top",v,I)):n[Xl]="auto",g[1]!==yc?(_=!0,n[zl]=Ec(r,"bottom",g,I)):n[zl]="auto",f&&u?(i=S+n[jl],o=S+k-n[Vl]-i):f&&m[1]!==yc?(i=S+n[jl],o=m[1]===gc?m[0]:k*m[0]*.01):u&&m[1]!==yc?(o=m[1]===gc?m[0]:k*m[0]*.01,i=S+k-n[Vl]-o,i-=n[Cl],i-=n[Pl],i-=n[Fl],i-=n[Hl],i-=r[Kl][0],i-=r[Ul][0]):f?i=S+n[jl]:u?(i=S+k-n[Vl],h=!0):(i=S+N,m[1]!==yc&&(o=m[1]===gc?m[0]:k*m[0]*.01)),c&&_)a=R+n[Xl],s=R+I-n[zl]-a;else if(c&&E[1]!==yc)a=R+n[Xl],s=E[1]===gc?E[0]:I*E[0]*.01;else if(_&&E[1]!==yc)s=E[1]===gc?E[0]:I*E[0]*.01,a=R+I-n[zl]-s,a-=n[Dl],a-=n[Ll],a-=n[Gl],a-=n[Bl],a-=r[Yl][0],a-=r[Wl][0];else if(c)a=R+n[Xl];else if(_)a=R+I-n[zl],l=!0;else{a=R;for(var T=t.prev;T;){if(T instanceof kn||"absolute"!==T.computedStyle[Il]){a=T.y+T.outerHeight;break}T=T.prev}E[1]!==yc&&(s=E[1]===gc?E[0]:I*E[0]*.01)}("block"===M&&void 0===o||"flex"===M&&(void 0===o||"column"===O&&void 0===s))&&(d=!0);var A=h?i-S:k+S-i,b=l?a-R:I+R-a;d&&(t.__layout({x:i,y:a,w:A,h:b},!0,!0),A=t.outerWidth),t.__layout({x:i,y:a,w:A,h:b,w2:o,h2:s},!1,!0),h&&t.__offsetX(-t.outerWidth,!0),l&&t.__offsetY(-t.outerHeight,!0)}else t.__layoutNone()}),r.forEach(function(t){if(x){var e=t;if(e instanceof Sl&&(e=t.shadowRoot),x!==e&&x!==t)return}var r;t instanceof u?t.__layoutAbs(Mc(t)?t:n,i):t instanceof Sl&&((r=t.shadowRoot)instanceof u&&r.__layoutAbs(r,i))}))}},{key:"__computeMeasure",value:function(e,r,t,n){et(tt(u.prototype),"__computeMeasure",this).call(this,e,r,t,n),this.children.forEach(function(t){t.__computeMeasure(e,r,!1,n)})}},{key:"render",value:function(t,e,r,n,i){var a=et(tt(u.prototype),"render",this).call(this,t,e,r,n,i);return t===Xt.SVG&&(this.virtualDom.type="dom"),a}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),et(tt(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return et(tt(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[Nl]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener,s=this.zIndexChildren;o.hasOwnProperty(a)&&(i=o[a]);for(var h=s.length-1;0<=h;h--){var l=s[h];if((l instanceof _l||l instanceof Sl&&l.shadowRoot instanceof _l)&&l.__emitEvent(t)){if(t.__stopPropagation)return;return zt.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0}}return et(tt(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){et(tt(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return t instanceof Sl&&(t=t.shadowRoot),t instanceof kn||"absolute"!==t.currentStyle[Il]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return t instanceof Sl&&(t=t.shadowRoot),t instanceof _l&&"absolute"===t.currentStyle[Il]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.height}}]),u}(),Ac=v.STYLE_KEY,bc=Ac.WIDTH,xc=Ac.HEIGHT,Sc=Ac.DISPLAY,Rc=Ac.BORDER_TOP_WIDTH,kc=Ac.BORDER_RIGHT_WIDTH,Ic=Ac.BORDER_LEFT_WIDTH,Nc=Ac.BORDER_BOTTOM_WIDTH,wc=(Ac.PADDING_TOP,Ac.PADDING_LEFT,Ac.BORDER_TOP_LEFT_RADIUS),Cc=Ac.BORDER_TOP_RIGHT_RADIUS,Dc=Ac.BORDER_BOTTOM_RIGHT_RADIUS,Pc=Ac.BORDER_BOTTOM_LEFT_RADIUS,Lc=Ac.VISIBILITY,Fc=Ac.BACKGROUND_IMAGE,Bc=Ac.BACKGROUND_COLOR,Hc=Ac.BOX_SHADOW,Gc=Ac.MIX_BLEND_MODE,Yc=v.UPDATE_KEY,Wc=Yc.UPDATE_NODE,Uc=Yc.UPDATE_FOCUS,Kc=Yc.UPDATE_IMG,Xc=Yc.UPDATE_CONFIG,Vc=v.NODE_KEY,zc=Vc.NODE_CACHE,jc=Vc.NODE_CACHE_TOTAL,$c=Vc.NODE_DEFS_CACHE,qc=Vc.NODE_IS_MASK,Zc=x.AUTO,Jc=x.PX,Qc=x.RGBA,tu=In.canvasPolygon,eu=In.svgPolygon,ru=function(){t(Q,Tc);var c=e(Q);function Q(t,e){var r;g(this,Q);var n=(r=c.call(this,t,e)).props.src,i=r.__loadImg={};n||(i.error=!0);var a,o,s,h=r.__isClip=!!r.props.clip,l=r.__isMask=h||!!r.props.mask;return l&&(o=(a=_(r)).style,s=a.currentStyle,o[Fc]=s[Fc]=[null],o[Bc]=s[Bc]=[[0,0,0,0],Qc],o[Rc]=s[Rc]=[0,Jc],o[kc]=s[kc]=[0,Jc],o[Ic]=s[Ic]=[0,Jc],o[Nc]=s[Nc]=[0,Jc],o[Hc]=s[Hc]=null,o[Gc]=s[Gc]="normal"),r.__config[qc]=l,r}return l(Q,[{key:"__preLayout",value:function(t){var e,r,n=et(tt(Q.prototype),"__preLayout",this).call(this,t),i=this.__loadImg;return i.error||(e=this.props.src,(r=re.IMG[e])&&r.state===re.LOADED&&(i.url=e,i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),n.fixedWidth&&n.fixedHeight||(i.error&&!this.props.placeholder?n.fixedWidth?n.h=n.w:n.fixedHeight?n.w=n.h:n.w=n.h=32:i.source?n.fixedWidth?n.h=n.w*i.height/i.width:n.fixedHeight?n.w=n.h*i.width/i.height:(n.w=i.width,n.h=i.height):n.w=n.h=0,n.fixedWidth=!0,n.fixedHeight=!0),n}},{key:"__addGeom",value:function(t,e){e=zt.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),et(tt(Q.prototype),"__destroy",this).call(this)}},{key:"__calContent",value:function(t,e,r,n){var i,a,o,s,h=et(tt(Q.prototype),"__calContent",this).call(this,t,e,r,n);return h||(i=this.__loadImg,o=(a=this.props).src,s=a.placeholder,"hidden"!==n[Lc]&&(n[bc]||n[xc])&&(i.error||(i.url===o||s)&&i.source)&&(h=!0)),h}},{key:"render",value:function(t,e,r,n,i){var a=this,o=et(tt(Q.prototype),"render",this).call(this,t,e,r,n,i),s=o.offScreenFilter,h=o.offScreenMask,l=o.offScreenOverflow,c=o.offScreenBlend,u=this.width,_=this.height,f=this.isDestroyed,d=this.props,p=d.src,v=d.placeholder,y=this.computedStyle,g=this.computedStyle,m=g[Sc],E=g[wc],M=g[Cc],O=g[Dc],T=g[Pc],A=g[Lc],b=this.virtualDom,x=this.__config,S=this.__loadImg,R=this.root;if(!i&&(s||h||l||c)&&(r=(s||h||l||c).target.ctx),t===Xt.CANVAS&&i&&(x[jc]=x[zc]),S.url===p||S.error||(S.url=p,S.source=null,S.error=null,S.cache=!1,re.measureImg(p,function(t){var n=a;if(t.url===S.url&&!n.isDestroyed){var e=function(){var t=n.currentStyle,e=t[bc],r=t[xc];R.delRefreshTask(n.__task),e[1]!==Zc&&r[1]!==Zc?R.addRefreshTask(n.__task={__before:function(){var t;n.isDestroyed||((t={})[Wc]=n,t[Uc]=Ro.REPAINT,t[Xc]=n.__config,R.__addUpdate(n,n.__config,R,R.__config,t))}}):R.addRefreshTask(n.__task={__before:function(){var t;n.isDestroyed||((t={})[Wc]=n,t[Uc]=Ro.REFLOW,t[Kc]=!0,t[Xc]=n.__config,R.__addUpdate(n,n.__config,R,R.__config,t))}})};if(t.success)S.source=t.source,S.width=t.width,S.height=t.height;else{if(v)return void re.measureImg(v,function(t){t.success&&(S.error=!0,S.source=t.source,S.width=t.width,S.height=t.height,e())},{ctx:r,root:R,width:u,height:_});S.error=!0}"none"!==y[Sc]&&e()}},{ctx:r,root:R,width:u,height:_})),f||"none"===m||"hidden"===A)return o;var k,I,N=x[zc];if(i&&N&&N.enabled&&(r=N.ctx),k=o.x3,I=o.y3,S.error&&!v&&Q.showError){var w=.02*Math.min(u,_),C=k+.7*u,D=I+.3*_,P=5*w,L=[[k+.15*u,I+.7*_],[k+.3*u,I+.4*_],[k+.5*u,I+.6*_],[k+.6*u,I+.5*_],[k+.9*u,I+.8*_],[k+.15*u,I+.8*_]];if(t===Xt.CANVAS){r.strokeStyle="#CCC",r.lineWidth=w,r.fillStyle="#DDD",r.beginPath(),r.moveTo(k,I),r.lineTo(k+u,I),r.lineTo(k+u,I+_),r.lineTo(k,I+_),r.lineTo(k,I),r.stroke(),r.closePath(),r.beginPath(),r.arc(C,D,P,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(L[0][0],L[0][1]);for(var F=1,B=L.length;F<B;F++){var H=L[F];r.lineTo(H[0],H[1])}r.lineTo(L[0][0],L[0][1]),r.fill(),r.closePath()}else if(t===Xt.SVG){this.__addGeom("rect",[["x",k],["y",I],["width",u],["height",_],["stroke","#CCC"],["stroke-width",w],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",C],["cy",D],["r",P],["fill","#DDD"]]);for(var G="",Y=0,W=L.length;Y<W;Y++){var U=L[Y];Y&&(G+=" "),G+=U[0]+","+U[1]}this.__addGeom("polygon",[["points",G],["fill","#DDD"]])}}else if((S.url===p||v)&&S.source){var K=S.source;if(K){var X,V,z,j=Ei.calRadius(k,I,u,_,E,M,O,T);if(t===Xt.CANVAS)j?(r.save(),r.beginPath(),tu(r,j),r.clip(),r.closePath(),r.drawImage(K,k,I,u,_),r.restore()):r.drawImage(K,k,I,u,_);else if(t===Xt.SVG){if(S.cache)return S.cache.cache=!0,b.children=[S.cache],void(!b.cache&&j&&(X={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",eu(j)],["fill","#FFF"]]}]},V=n.add(X),x[$c].push(X),b.conClip="url(#"+V+")"));u===S.width&&_===S.height||(z=xi.matrixResize(S.width,S.height,u,_,k,I,u,_));var $,q,Z=[["xlink:href",S.error?v:p],["x",k],["y",I],["width",S.width],["height",S.height]];j&&($={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",eu(j)],["fill","#FFF"]]}]},q=n.add($),x[$c].push($),b.conClip="url(#"+q+")",delete b.cache),z&&!zt.equalArr(z,[1,0,0,1,0,0])&&Z.push(["transform","matrix("+zt.joinArr(z,",")+")"]);var J={type:"img",tagName:"image",props:Z};b.children=[J],S.cache=J}}}return o}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source&&this.__loadImg.url!==this.props.src)return et(tt(Q.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"baseLine",get:function(){return this.height}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}}]),Q}();c(ru,"showError",!0);var nu,iu,au,ou=function(){function e(t){g(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return l(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),su=v.STYLE_KEY,hu=su.DISPLAY,lu=su.MARGIN_TOP,cu=su.MARGIN_LEFT,uu=su.PADDING_TOP,_u=su.PADDING_LEFT,fu=su.WIDTH,du=su.HEIGHT,pu=su.BORDER_TOP_WIDTH,vu=su.BORDER_RIGHT_WIDTH,yu=su.BORDER_BOTTOM_WIDTH,gu=su.BORDER_LEFT_WIDTH,mu=su.FILL,Eu=su.STROKE,Mu=su.STROKE_MITERLIMIT,Ou=su.STROKE_WIDTH,Tu=su.STROKE_LINECAP,Au=su.STROKE_LINEJOIN,bu=su.STROKE_DASHARRAY,xu=su.STROKE_DASHARRAY_STR,Su=su.FILL_RULE,Ru=su.VISIBILITY,ku=v.NODE_KEY,Iu=ku.NODE_CACHE_PROPS,Nu=ku.NODE_CURRENT_PROPS,wu=ku.NODE_CURRENT_STYLE,Cu=ku.NODE_IS_MASK,Du=ku.NODE_STYLE,Pu=ku.NODE_CACHE,Lu=ku.NODE_CACHE_TOTAL,Fu=ku.NODE_CACHE_FILTER,Bu=ku.NODE_CACHE_MASK,Hu=ku.NODE_CACHE_OVERFLOW,Gu=ku.NODE_DEFS_CACHE,Yu=(ku.NODE_CACHE_STYLE,x.AUTO),Wu=x.PX,Uu=x.PERCENT,Ku=zt.int2rgba,Xu=zt.isNil,Vu=zt.joinArr,zu=In.canvasPolygon,ju=In.svgPolygon,$u={},qu=function(){t(H,_l);var s=e(H);function H(t,e){var r;g(this,H),(r=s.call(this,t,e)).__isMulti=!!r.props.multi;var n=r.__isClip=!!r.props.clip,i=r.__isMask=n||!!r.props.mask,a=_(r).style;i&&(a.background=null,a.border=null,a.boxShadow=null,a.mixBlendMode="normal"),r.__style=cn.normalize(r.style,Dt.DOM_ENTRY_SET.concat(Dt.GEOM_ENTRY_SET)),r.__currentStyle=zt.extend({},r.__style),r.__currentProps=zt.clone(r.props);var o=r.__config;return o[Iu]=r.__cacheProps={},o[Nu]=r.__currentProps,o[wu]=r.__currentStyle,o[Cu]=i,o[Du]=r.__style,r}return l(H,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle[fu];return r[1]===Wu?t-r[0]:r[1]===Uu?t-e*r[0]*.01:t}},{key:"__calAutoBasis",value:function(t){var e,r,n=0,i=0,a=0,o=this.currentStyle,s=o[fu],h=o[du],l=o[pu],c=o[vu],u=o[yu],_=o[gu],f=t?s:h;return f[1]!==Yu&&(n=a+=f[0]),t?(n+=e=c[0]+_[0],a+=e,i+=e):(n+=r=l[0]+u[0],a+=r,i+=r),{b:n,min:i,max:a}}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),n=r.fixedWidth,i=r.fixedHeight,a=r.w,o=r.h;this.__height=i?o:0,e?this.__width=n?a:0:(this.__width=a,this.__ioSize(a,this.height),this.__marginAuto(this.currentStyle,t),this.__config[Iu]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,n=e.fixedHeight,i=e.x,a=e.y,o=e.w,s=e.h,h=this.__width=r?o:i-t.x,l=this.__height=n?s:a-t.y;this.__ioSize(h,l),this.__config[Iu]=this.__cacheProps={}}},{key:"__calCache",value:function(n,t,i,a,e,o,s,h,r,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P){var L,F,B=this;et(tt(H.prototype),"__calCache",this).call(this,n,t,i,a,e,o,s,h,r,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A,b,x,S,R,k,I,N,w,C,D,P),Xu(o[Ou])&&(o[Ou]=!0,L=s[Ou]||[],F=this.width,h[Ou]=L.map(function(t){return t[1]===Wu?t[0]:t[1]===Uu?t[0]*F*.01:0})),Xu(o[bu])&&(o[bu]=!0,h[bu]=s[bu]||[],o[xu]=h[bu].map(function(t){return Vu(t,",")})),[Tu,Au,Mu,Su].forEach(function(t){h[t]=s[t]}),[Eu,mu].forEach(function(t){var e,r;Xu(o[t])&&(e=s[t],h[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(Ku(t)):r.push("none"):r.push(B.__gradient(n,i,a,O,R,T,k,t))}),o[t]=r)})}},{key:"__calContent",value:function(t,e,r,n){return"hidden"!==n[Ru]}},{key:"__preSet",value:function(){var t=this.sx,e=this.sy,r=this.width,n=this.height,i=this.__cacheStyle,a=this.computedStyle,o=a[pu],s=a[gu],h=a[hu],l=a[lu],c=a[cu],u=a[uu],_=a[_u],f=a[Ru],d=t+s+c+_,p=e+o+l+u,v=d+.5*r,y=p+.5*n,g=i[mu],m=i[Eu],E=i[xu],M=a[Ou],O=a[Tu],T=a[Au],A=a[Mu];return{x:t,y:e,originX:d,originY:p,width:r,height:n,cx:v,cy:y,display:h,stroke:m,strokeWidth:M,strokeDasharray:a[bu],strokeDasharrayStr:E,strokeLinecap:O,strokeLinejoin:T,strokeMiterlimit:A,fill:g,visibility:f,fillRule:a[Su]}}},{key:"__preSetCanvas",value:function(t,e,r){var n=r.stroke,i=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,l=r.fill;t===Xt.CANVAS&&(l&&("linear"!==l.k&&("radial"!==l.k||Array.isArray(l.v))?"conic"===l.k||l.k||e.fillStyle===l||(e.fillStyle=l):e.fillStyle=l.v),n&&("linear"!==n.k&&("radial"!==n.k||Array.isArray(n.v))?"conic"===n.k||n.k||e.strokeStyle===n||(e.strokeStyle=n):e.strokeStyle=n.v),void 0!==i&&e.lineWidth!==i&&(e.lineWidth=i),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==h&&e.miterLimit!==h&&(e.miterLimit=h),zt.isFunction(e.getLineDash)?a&&!zt.equalArr(e.getLineDash(),a)&&e.setLineDash(a):a&&e.setLineDash(a))}},{key:"render",value:function(t,e,r,n,i){var a=this.__renderSelfData||et(tt(H.prototype),"render",this).call(this,t,e,r,n,i),o=this.__config,s=o[Pu],h=o[Fu],l=o[Bu],c=o[Hu];if(t===Xt.CANVAS&&i&&(o[Lu]=o[Pu]),e<Ro.REPAINT&&(s&&s.available||!Ro.contain(e,Ro.FILTER)&&h||l||c)&&(a.break=!0),t===Xt.SVG&&(this.virtualDom.type="geom"),a.break)return a;var u=this.__preSet();return Object.assign(a,u)}},{key:"__renderPolygon",value:function(t,e,r,n){var i=n.fill,a=n.fillRule,o=n.stroke,s=n.strokeWidth,h=n.strokeDasharray,l=n.strokeDasharrayStr,c=n.strokeLinecap,u=n.strokeLinejoin,_=n.strokeMiterlimit,f=n.dx,d=n.dy,p=this.__cacheProps.list,v=this.isMulti;if(i.length<=1&&o.length<=1){var y={fill:i[0],fillRule:a[0],stroke:o[0],strokeWidth:s[0],strokeDasharray:h[0],strokeDasharrayStr:l[0],strokeLinecap:c[0],strokeLinejoin:u[0],strokeMiterlimit:_[0],dx:f,dy:d};this.__renderOnePolygon(t,e,r,v,p,y)}else{for(var g=0,m=i.length;g<m;g++){var E,M=i[g];M&&(E={fill:M,fillRule:a[g],dx:f,dy:d},this.__renderOnePolygon(t,e,r,v,p,E))}for(var O=0,T=o.length;O<T;O++){var A,b=o[O];b&&(A={stroke:b,strokeWidth:s[O],strokeDasharray:h[O],strokeDasharrayStr:l[O],strokeLinecap:c[O],strokeLinejoin:u[O],strokeMiterlimit:_[O],dx:f,dy:d},this.__renderOnePolygon(t,e,r,v,p,A))}}}},{key:"__renderOnePolygon",value:function(t,e,r,n,i,a){var o=a.fill,s=a.stroke,h=a.strokeWidth,l=o&&"conic"===o.k,c=s&&"conic"===s.k,u=o&&"radial"===o.k&&Array.isArray(o.v),_=h&&0<h&&s&&"radial"===s.k&&Array.isArray(s.v);l||c?(l?this.__conicGradient(t,e,r,i,n,a):"none"!==o&&this.__drawPolygon(t,e,r,n,i,a,!0),h&&0<h&&c?re.warn("Stroke style can not use conic-gradient"):h&&0<h&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,a,!1,!0)):u||_?(u?this.__radialEllipse(t,e,r,i,n,a,"fill"):"none"!==o&&this.__drawPolygon(t,e,r,n,i,a,!0),h&&0<h&&_?(re.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke.v=a.stroke.v[0],this.__drawPolygon(t,e,r,n,i,a,!1,!0)):h&&0<h&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,a,!1,!0)):this.__drawPolygon(t,e,r,n,i,a,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,n,i,a,o,s){var h=a.fill,l=a.stroke,c=a.strokeWidth,u=a.fillRule,_=a.strokeDasharrayStr,f=a.strokeLinecap,d=a.strokeLinejoin,p=a.strokeMiterlimit,v=a.dx,y=a.dy;if(t===Xt.CANVAS)this.__preSetCanvas(t,e,a),e.beginPath(),n?i.forEach(function(t){return zu(e,t,v,y)}):zu(e,i,v,y),o&&h&&"none"!==h&&e.fill(u),s&&"none"!==l&&c&&0<c&&e.stroke(),e.closePath();else if(t===Xt.SVG){var g="";n?i.forEach(function(t){return g+=ju(t)}):g=ju(i);var m=[["d",g]];if(!(h&&"none"!==h||l&&"none"!==l))return;o&&h&&"none"!==h?(m.push(["fill",h.v||h]),u&&"nonzero"!==u&&m.push(["fill-rule",u])):m.push(["fill","none"]),s&&"none"!==l&&c&&0<c?(m.push(["stroke",l.v||l]),m.push(["stroke-width",c]),this.__propsStrokeStyle(m,_,f,d,p)):m.push(["stroke-width",0]),this.addGeom("path",m)}}},{key:"__inversePtList",value:function(t,e,a){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Vt.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Vt.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,n,i,a,o){var s=a.strokeWidth,h=a.strokeDasharrayStr,l=a.strokeLinecap,c=a.strokeLinejoin,u=a.strokeMiterlimit,_=a.dx,f=a.dy,d=Kt(a[o].v,4),p=d[0],v=d[1],y=[d[2],d[3]];v=ni.calMatrixByOrigin(v,y);var g,m,E,M=Vt.inverse(v);n=this.__inversePtList(n,i,M),t===Xt.CANVAS?(v&&(e.save(),g=this.matrixEvent,v=Vt.multiply(g,v),e.setTransform(v[0],v[1],v[2],v[3],v[4],v[5])),e.beginPath(),e[o+"Style"]!==p&&(e[o+"Style"]=p),i?n.forEach(function(t){return In.canvasPolygon(e,t,_,f)}):zu(e,n,_,f),e[o](),e.closePath(),v&&e.restore()):t===Xt.SVG&&(m="",i?n.forEach(function(t){return m+=ju(t)}):m=ju(n),E=[["d",m]],"fill"===o?(E.push(["fill",p]),E.push(["strokeWidth",0])):"stroke"===o&&(E.push(["fill","none"]),E.push(["stroke",p]),E.push(["stroke-width",s]),this.__propsStrokeStyle(E,h,l,c,u)),E.push(["transform","matrix(".concat(Vu(v,","),")")]),this.addGeom("path",E))}},{key:"__conicGradient",value:function(t,e,n,r,i,a){var o,s,h,l=this,c=a.fill,u=a.dx,_=a.dy,f=c.v;t===Xt.CANVAS?(o=e.globalAlpha,e.globalAlpha=.5*o,i?r.forEach(function(t){e.save(),e.beginPath(),zu(e,t,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),zu(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()}):(e.save(),e.beginPath(),zu(e,r,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),zu(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()),e.globalAlpha=o):t===Xt.SVG&&(i?r.forEach(function(t){var e={tagName:"clipPath",children:[{tagName:"path",props:[["d",ju(t)],["fill","#FFF"]]}]},r=n.add(e);l.__config[Gu].push(e),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ju(t[0])],["fill",t[1]],["clip-path","url(#"+r+")"]]})})}):(s={tagName:"clipPath",children:[{tagName:"path",props:[["d",ju(r)],["fill","#FFF"]]}]},h=n.add(s),this.__config[Gu].push(s),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ju(t[0])],["fill",t[1]],["clip-path","url(#"+h+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,n,i){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),n&&"miter"!==n&&t.push(["stroke-linejoin",n]),i&&4!==i&&t.push(["stroke-miterlimit",i])}},{key:"__releaseWhenEmpty",value:function(){}},{key:"addGeom",value:function(t,e){e=zt.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return Xu(e)?this["__"+t]:e}},{key:"baseLine",get:function(){return this.__height}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"getRegister",value:function(t){if(!$u.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return $u[t]}},{key:"register",value:function(t,e){if(H.hasRegister(t))throw new Error("Geom has already register: ".concat(t));$u[t]=e}},{key:"hasRegister",value:function(t){return $u.hasOwnProperty(t)}}]),H}(),Zu=v.NODE_KEY,Ju=Zu.NODE_COMPUTED_STYLE,Qu=Zu.NODE_DOM_PARENT,t_=Zu.NODE_MATRIX_EVENT,e_=Zu.NODE_STRUCT,r_=k.TYPE_VD,n_=k.TYPE_GM,i_=k.TYPE_CP,a_=[],o_=[],s_={};function h_(t){t instanceof iu&&t.children.forEach(function(t){t instanceof iu?h_(t):t instanceof au&&t.__hasUpdate&&(t.__hasUpdate=!1,l_(t,t.props))})}function l_(t,e,r){t.__nextState||r?!zt.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.__state=r,t.__nextState=null;var n=t.shadow,i=t.shadowRoot,a=t.__cd,o=Ol.flattenJson(t.render());(function(t,e,r){var o=f_(e,{},t),s=f_(r,{}),h=[],l=[];Object.keys(o).forEach(function(t){var e=o[t];s[t]||(e.json.key=s_)}),Object.keys(s).forEach(function(t){var e,r,n,i=o[t],a=s[t];i?(e=i.json,r=a.json,n=i.vd,e.$$type===i_&&r.$$type===i_?e.klass===r.klass&&(__(e,r,n),e.key=r.key=s_,l.push(n)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===n_&&e.props.multi!==r.props.multi||(r.inheritAnimate=n),e.key=r.key=s_,r.$$type===r_&&h.push({vd:n,oj:e,nj:r}))):a.json.key=s_}),h.forEach(function(t){u_(t.vd,t.oj,t.nj)}),c_(t,e,r),l.forEach(function(t){d_(t)})})(n,a,o),t.__init(o);var s=t.shadowRoot;s instanceof nu?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6","__bx1","__by1","__bx2","__by2","__computedStyle"].forEach(function(t){s[t]=i[t]}),s.__config[Ju]=i.computedStyle):s.__config[t_]=i.__config[t_];["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){s[t]=i[t]}),s.__config[Qu]=i.domParent,s.__config[e_]=i.__config[e_],a_.push(t),zt.isObject(o)&&o.placeholder||o_.push(n);o&&o.placeholder&&delete o.placeholder}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,h_(t.shadowRoot)):h_(t.shadowRoot)}function c_(t,e,r){if(zt.isObject(r))if(r.$$type===i_){if(r.key===s_)return;e.$$type===r.$$type&&e.klass===r.klass&&(__(e,r,t),d_(t))}else r.$$type===n_&&e.$$type===n_?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.inheritAnimate=t):r.$$type===r_&&e.$$type===r_&&(e.tagName===r.tagName&&(r.inheritAnimate=t),u_(t,e,r))}function u_(t,e,r){for(var n=e.children,i=r.children,a=n.length,o=i.length,s=t.children,h=0,l=0,c=0,u=Math.min(a,o);h<u;h++){var _=n[h+l],f=i[h+c];_.key===s_&&f.key===s_||(_.key===s_?(l++,h--,a--,u=Math.min(a,o)):f.key===s_?(c++,h--,o--,u=Math.min(a,o)):c_(s[h+l],_,f))}}function __(i,a,o){a.placeholder=!0;var s=(a.value=o).shadowRoot,h={};Object.keys(i.props).forEach(function(t){var e=i.props[t];h[t]=e}),Object.keys(a.props).forEach(function(t){var e,r,n=a.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=n,(e=h[t])?(delete h[t],e!==n&&(t=t.slice(2).toLowerCase(),s.listener[t]=n)):(t=t.slice(2).toLowerCase(),s.listener[t]=n)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=n,(r=h[t])?(delete h[t],r!==n&&(t=t.slice(2).toLowerCase(),o.off(t,h[t]),o.on(t,n)),delete h[t]):(t=t.slice(2).toLowerCase(),o.on(t,n)))}),Object.keys(h).forEach(function(t){var e=h[t];/^on[a-zA-Z]/.test(t)?(a.props[t]=e,t=t.slice(2).toLowerCase(),delete s.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(a.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),l_(o,a.props,!zt.equal(i.props,a.props))}function f_(t,r,n){var e;return Array.isArray(t)?t.forEach(function(t,e){return f_(t,r,n&&n[e])}):zt.isObject(t)&&(t.$$type!==r_&&t.$$type!==n_&&t.$$type!==i_||(t.$$type===r_&&f_(t.children,r,n&&n.children),e=t.props.key,zt.isNil(e)||""===e||(r.hasOwnProperty(e)&&re.error("Component "+n.tagName+" has duplicate key: "+e),r[e]={json:t,vd:n}))),r}function d_(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var p_,v_={ref:function(t){nu=t.Xom,iu=t.Dom,t.Img,t.Geom,au=t.Component},updateList:a_,check:h_,checkCp:l_,did:function(){a_.forEach(function(t){zt.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),a_.splice(0),o_.forEach(function(t){t.__destroy()}),o_=[]}},y_=zt.joinVd,g_=zt.joinDef,m_=Ro.contain,E_=Ro.NONE,M_=Ro.TRANSFORM_ALL,O_=Ro.OPACITY,T_=Ro.FILTER,A_=Ro.MIX_BLEND_MODE;function b_(t,e,r){var n=t.childNodes;!function(t,e,r){for(var n=e.length,i=r.length,a=0,o=t.childNodes;a<Math.min(n,i);a++)!function(e,t,r){if(t.tagName!==r.tagName)F_(e,"beforebegin",g_(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Kt(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Kt(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)});for(var d=e.childNodes,p=t.children.length,v=r.children.length,y=0;y<Math.min(p,v);y++)w_(e,y,t.children[y],r.children[y]);if(y<p)for(var g=p-1;y<=g;g--)L_(e,d,g);else if(y<v)for(;y<v;y++)P_(e,d,y,y_(r.children[y]))}}(o[a],e[a],r[a]);if(a<n)for(var s=n-1;a<=s;s--)L_(t,o,s);else if(a<i)for(;a<i;a++)P_(t,o,a,g_(r[a]))}(n[0],e.defs,r.defs),r.hasOwnProperty("lv")||N_(n[1],e.bb,r.bb),k_(t,e,r,!0)}function x_(t,e,r){"dom"===e.type?"dom"===r.type?k_(t,e,r):"geom"===r.type?I_(t,e,r):D_(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var n=e.children.length,i=r.children.length,a=0;a<Math.min(n,i);a++)w_(t,a,e.children[a],r.children[a],!0);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)L_(t,o,s);else if(a<i)for(;a<i;a++)P_(t,o,a,y_(r.children[a]))}(t,e,r):D_(t,r):"geom"===e.type?"dom"===r.type?I_(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return R_(t,0,r,r.lv);if(r.hasOwnProperty("lv"))R_(t,0,r,r.lv);else{S_(t,e,r),N_(t.firstChild,e.bb,r.bb);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)w_(o,a,e.children[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)L_(o,s,h);else if(a<i)for(;a<i;a++)P_(o,s,a,y_(r.children[a]))}}(t,e,r):D_(t,r):"img"===e.type&&("img"===r.type?C_(t,e,r):D_(t,r))}function S_(t,e,r){var n=r.transform,i=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,h=r.filter,l=r.conClip;e.transform!==n&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),e.opacity!==i&&(1!==i&&void 0!==i?t.setAttribute("opacity",i):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==h&&(h?t.setAttribute("filter",h):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==l&&(l?t.childNodes[1].setAttribute("clip-path",l):t.childNodes[1].removeAttribute("clip-path"))}function R_(t,e,r,n){var i=r.transform,a=r.opacity,o=r.mask,s=r.filter,h=r.mixBlendMode;o?t.setAttribute("mask",o):t.removeAttribute("mask"),n!==E_&&(m_(n,M_)&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),m_(n,O_)&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),m_(n,T_)&&(s?t.setAttribute("filter",s):t.removeAttribute("filter")),m_(n,A_)&&(h?t.setAttribute("style","mix-blend-mode:"+h):t.removeAttribute("style")))}function k_(t,e,r,n){if(r.cache)R_(t,0,r,r.lv);else{r.hasOwnProperty("lv")?R_(t,0,r,r.lv):(S_(t,e,r),n||N_(t.firstChild,e.bb,r.bb));for(var i=e.children.length,a=r.children.length,o=0,s=t.lastChild,h=s.childNodes;o<Math.min(i,a);o++)x_(h[o],e.children[o],r.children[o]);if(o<i)for(var l=i-1;o<=l;l--)L_(s,h,l);else if(o<a)for(;o<a;o++)P_(s,h,o,y_(r.children[o]))}}function I_(t,e,r){S_(t,e,r),N_(t.firstChild,e.bb,r.bb);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)D_(s[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)L_(o,s,h);else if(a<i)for(;a<i;a++)P_(o,s,a,y_(r.children[a]))}function N_(t,e,r){for(var n=e.length,i=r.length,a=0;a<Math.min(n,i);a++)w_(t,a,e[a],r[a]);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)L_(t,o,s);else if(a<i)for(;a<i;a++)P_(t,o,a,y_(r[a]))}function w_(t,e,r,n,i){var a=t.childNodes;r.tagName!==n.tagName?D_(a[e],n):(C_(a[e],r,n),i&&r.content!==n.content&&(a[e].innerHTML=n.content))}function C_(e,t,r){if(!r.cache){for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Kt(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Kt(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)})}}function D_(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=y_(t)})):r=y_(e),F_(t,"beforebegin",r),t.parentNode.removeChild(t)}function P_(t,e,r,n){r>=e.length?F_(t,"beforeend",n):F_(e[r],"beforebegin",n)}function L_(t,e,r){e[r]&&t.removeChild(e[r])}function F_(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(p_=p_||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(p_.childNodes[0],t)}}var B_=zt.isFunction,H_=function(){function t(){g(this,t),this.__records=[],this.__auto=[],this.__list=[]}return l(t,[{key:"add",value:function(t){-1===this.__list.indexOf(t)&&this.list.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);-1<e&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__auto=[],this.__list=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(t){var o=this,e=0<arguments.length&&void 0!==t?t:this.__records;e.length&&e.splice(0).forEach(function(t){var e,r,n,i=t.target,a=t.animate;Array.isArray(a)?a.forEach(function(t){var e=t.value,r=t.options;r.autoPlay=!1;var n=i.animate(e,r);o.add(n)}):(e=a.value,(r=a.options).autoPlay=!1,n=i.animate(e,r),o.add(n))})}},{key:"__playAuto",value:function(){this.init(this.__auto),this.__action("play")}},{key:"play",value:function(e){this.init();var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,B_(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,B_(e)&&e(t))}])}},{key:"cancel",value:function(e){var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,B_(e)&&e(t))}])}},{key:"finish",value:function(e){var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,B_(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndStop",[t,e,r&&function(t){n&&(n=!1,B_(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){n&&(n=!1,B_(r)&&r(t))}])}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"list",get:function(){return this.__list}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),G_=v.STYLE_KEY,Y_=G_.POSITION,W_=G_.DISPLAY,U_=G_.OPACITY,K_=G_.VISIBILITY,X_=G_.FILTER,V_=G_.OVERFLOW,z_=G_.MIX_BLEND_MODE,j_=G_.FILL,$_=G_.TRANSFORM,q_=G_.TRANSFORM_ORIGIN,Z_=v.NODE_KEY,J_=Z_.NODE_CACHE,Q_=Z_.NODE_CACHE_TOTAL,tf=Z_.NODE_CACHE_OVERFLOW,ef=Z_.NODE_CACHE_MASK,rf=Z_.NODE_CACHE_FILTER,nf=Z_.NODE_MATRIX,af=Z_.NODE_MATRIX_EVENT,of=Z_.NODE_OPACITY,sf=Z_.NODE_COMPUTED_STYLE,hf=Z_.NODE_CURRENT_STYLE,lf=Z_.NODE_LIMIT_CACHE,cf=Z_.NODE_BLUR_VALUE,uf=Z_.NODE_REFRESH_LV,_f=Z_.NODE_HAS_CONTENT,ff=Z_.NODE_CACHE_STYLE,df=Z_.NODE_DEFS_CACHE,pf=Z_.NODE_IS_MASK,vf=v.STRUCT_KEY,yf=vf.STRUCT_NODE,gf=vf.STRUCT_INDEX,mf=vf.STRUCT_TOTAL,Ef=vf.STRUCT_HAS_MASK,Mf=vf.STRUCT_LV,Of=Ro.NONE,Tf=Ro.TRANSFORM_ALL,Af=Ro.OPACITY,bf=Ro.FILTER,xf=Ro.REPAINT,Sf=Ro.contain,Rf=Ro.MIX_BLEND_MODE;function kf(t,R,e,r,k,I,N){var w=t.__sx1,C=t.__sy1,n=t.__config,i=n[J_],a=n[cf],D=i&&i.available?i.bbox.slice(0):t.bbox,P=[e],L=c({},e,a);for(I[e]=1;P.length;)P.splice(0).forEach(function(t){for(var e,r,n=t+1,i=t+(R[t][mf]||0)+1;n<i;n++){var a,o,s,h,l,c,u,_=R[n],f=_[yf],d=_[mf],p=f.__sx1,v=f.__sy1,y=f.__config,g=y[cf],m=y[lf],E=y[J_],M=y[Q_],O=y[sf],T=O[W_],A=O[K_],b=O[$_],x=O[q_],S=O[U_];if(m)return;"none"!==T?"hidden"!==A&&(k[n]=t,I[n]=I[t]*S,f instanceof kn||(a=void 0,s=o=0,M&&M.available?(a=M.bbox.slice(0),o=M.dbx,s=M.dby):E&&E.available?(a=E.bbox.slice(0),o=E.dbx,s=E.dby):a=f.bbox,a&&(a[0]-=w,a[1]-=C,a[2]-=w,a[3]-=C,u=N[t],h=(L[t]||0)+(g||0),b&&!Vt.isE(b)&&((l=x.slice(0))[0]+=p-w+o,l[1]+=v-C+s,c=ni.calMatrixByOrigin(b,l),u=u?Vt.multiply(u,c):c),u&&(N[n]=u),a=zt.transformBbox(a,u,h,h),d&&(L[n]=h,P.push(n),n+=d),D?(r=a,(e=D)[0]=Math.min(e[0],e[0]+r[0]),e[1]=Math.min(e[1],e[1]+r[1]),e[2]=Math.max(e[2],e[2]+r[2]),e[3]=Math.max(e[3],e[3]+r[3])):D=a))):n+=d||0}});if(!(D[2]-D[0]>Uo.MAX||D[3]-D[1]>Uo.MAX))return D;n[lf]=!0}function If(t,e,r){var n=t.computedStyle,i=n[$_],a=n[q_];return t.__config[ef]=Uo.genMask(e,t.next,r,i,a)}var Nf={renderCacheCanvas:function(tt,et,rt,t){for(var m,E,nt=t.__structs,it=t.width,at=t.height,M=[],O=[],T=1,A=[],b=0,x=0,e=nt.length;x<e;x++)(function(t){var e,r,n,i,a,o,s,h,l,c=nt[t],u=c[yf],_=c[Mf],f=c[mf],d=u.__config,p=d[uf],v=d[J_],y=d[Q_],g=d[sf];u instanceof kn?x=t:(0===t?A.push(u):b<_?(m=E[af],Vt.isE(m)&&(m=null),M.push(m),T=E[of],O.push(T),A.push(u)):_<b&&(e=b-_,M.splice(-e),m=M[_],O.splice(-e),T=O[_],A.splice(-e),E=A[_]),"none"===g[W_]?x=t+=f||0:(p<xf?(d[uf]=Of,r=d[hf],n=d[sf],i=d[ff],Sf(p,Tf)&&(a=u.__calMatrix(p,i,r,n),o=d[nf],a&&o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5]),m&&a&&(a=Vt.multiply(m,a)),(o=d[af])&&a&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5])),Sf(p,Af)&&(s=n[U_]=r[U_],d[of]=T*s),Sf(p,bf)&&(h=n[X_]=r[X_],d[cf]=0,Array.isArray(h)&&h.forEach(function(t){var e=Kt(t,2),r=e[0],n=e[1];"blur"===r&&(d[cf]=n)}),l=u.bbox,v=v?Uo.updateCache(v,l):Uo.getInstance(l),(d[J_]=v).enabled||re.warn("Downgrade for cache-filter change error")),Sf(p,Rf)&&(n[z_]=r[z_]),y&&y.available&&(t+=f||0)):u instanceof qu?(u.__renderSelfData=u.__renderSelf(tt,p,et,rt,!0),(v=d[J_])&&v.available&&u.render(tt,p,v.ctx,rt,!0)):u.render(tt,p,et,rt,!0),E=d,b=_,x=t))})(x);var r,n,i,a,o=function(d){for(var p=[0],v={0:{i:0}};p.length;)p.splice(0).forEach(function(t){for(var e,r=d[t],n=v[t],i=t+1,a=i+(r[mf]||0);i<a;i++){var o,s,h=d[i],l=h[yf],c=h[mf],u=h[Ef],_=l.__config,f=_[Q_];"none"!==_[sf][W_]?(o={i:i},s=s||o,e&&(o.p=e),e=o,l instanceof kn||!c||(f&&f.available||(v[i]=o,p.push(i)),i+=c||0)):(i+=c||0,u&&(i+=u))}n&&e&&(n.p&&(s.p=n.p),n.p=e)});for(var t=v[0],e=[];t;)e.push(t.i),t=t.p;return e.reverse()}(nt);if(o.length){for(var s=Math.max(1,Uo.NUM),h=nt[o[0]][Mf],l={},c={},u={},_=0,f=o.length-1;_<f;_++)c[o[_]]=_;for(var d=0,p=o.length-1;d<p;d++){var v=nt[o[d]],y=v[yf],g=v[Mf],S=v[gf],R=v[Ef],k=v[mf],I=y.__config,N=I[sf],w=N[Y_],C=N[K_],D=N[V_],P=N[z_];if(y instanceof kn)h=g,"hidden"!==C&&(l[g-1]=l[g-1]||0,l[g-1]++);else{var L,F,B,H,G,Y,W,U=I[_f],K=I[cf],X=I[lf],V=I[Q_],z=I[rf],j=I[ef],$=I[tf],q=I[J_],Z=void 0;if(g<h?("hidden"!==C&&U&&(l[g]=l[g]||0,l[g]++),L=l[g]||0,l[g]=0,l[g-1]=l[g-1]||0,!X&&(s<=L||("relative"===w||"absolute"===w)&&(U||L)||(R||0<K||"visible"!==D||"normal"!==P)&&(U||L))?(l[g-1]++,Z=!0):l[g-1]+=L):(l[g-1]=l[g-1]||0,!X&&(("relative"===w||"absolute"===w)&&U&&"hidden"!==C||V&&V.available||R||(0<K||"visible"!==D||"normal"!==P)&&U&&"hidden"!==C||V&&V.available)?(l[g-1]++,Z=!0):(U&&"hidden"!==C||V&&V.available)&&l[g-1]++),h=g,Z){if(V&&V.available||(V=I[Q_]=function(t,e,r,n,i,a,o){if(0===n)return e.__config[Q_]=o;var s={},h={},l={},c=kf(e,i,r,0,s,l,h);if(c&&(a?a.reset(c):a=e.__config[Q_]=Uo.getInstance(c),a&&a.enabled)){var u=e.__sx1,_=e.__sy1;a.__appendData(u,_),a.__available=!0;var f=a,d=Kt(f.coords,2),p=d[0],v=d[1],y=f.ctx,g=f.dbx,m=f.dby;o&&o.available&&(y.globalAlpha=1,y.setTransform(1,0,0,1,0,0),Uo.drawCache(o,a));for(var E=r+1,M=r+(n||0)+1;E<M;E++){var O,T,A,b,x,S,R,k,I,N=i[E],w=N[yf],C=N[mf],D=N[Ef],P=w.__config,L=P[J_],F=P[Q_],B=P[rf],H=P[ef],G=P[tf],Y=P[pf],W=P[sf],U=W[W_],K=W[K_],X=W[$_],V=W[q_],z=W[z_];Y||("none"!==U?"hidden"!==K&&(k=h[O=s[E]],T=l[E],w instanceof kn?(y.globalAlpha=l[O],A=h[O]||[1,0,0,1,0,0],y.setTransform(A[0],A[1],A[2],A[3],A[4],A[5]),w.render(t,0,y,null,p-u+g,v-_+m)):(X&&!Vt.isE(X)&&(b=V.slice(0),L&&L.available?(b[0]+=L.sx1,b[1]+=L.sy1):(b[0]+=w.__sx1,b[1]+=w.__sy1),x=-u+g+p,S=-_+m+v,b[0]+=x,b[1]+=S,R=ni.calMatrixByOrigin(X,b),k=k?Vt.multiply(k,R):R),k&&(h[E]=k),(I=(I=G||H||B)||(F&&F.available?F:null))?E+=C||0:L&&L.available&&(I=L),I&&(y.globalCompositeOperation="normal"!==z?"source-over":z.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()}),y.globalAlpha=T,k?y.setTransform(k[0],k[1],k[2],k[3],k[4],k[5]):y.setTransform(1,0,0,1,0,0),Uo.drawCache(I,a),I===H&&(E+=D)))):(E+=C||0,D&&(E+=D)))}return a}}(tt,y,S,k||0,nt,V,q)),(!V||!V.available)&&U)continue;var J=V;if(!(0<K)||z&&z.available||(J=I[rf]=(i=V,a=K,y.__config[rf]=Uo.genBlur(i,a))),"hidden"!==D||$&&$.available||(J=I[tf]=(n=J,(r=y).__config[tf]=Uo.genOverflow(n,r))),R&&(!j||!j.available)){for(var Q=void 0,ot=S+k;R--;)ot++,c.hasOwnProperty(ot)&&(Q=ot);var st=y.next.isClip;Q?u[Q]={target:J,node:y,isClip:st,__config:I,__hasContent:U}:U&&(I[ef]=If(y,J,st))}}u.hasOwnProperty(S)&&(B=(F=u[S]).target,H=F.node,G=F.isClip,Y=F.__config,W=F.__hasContent,H instanceof ru&&!W||(Y[ef]=If(H,B,G)))}}}for(var ht={},lt={},ct={},ut={},_t={},ft=0,dt=nt.length;ft<dt;ft++)(function(h){var t=nt[h],e=t[yf],r=t[mf],n=t[Ef],i=e.__config,a=i[of],o=i[af],s=i[cf],l=i[lf],c=i[J_],u=i[Q_],_=i[rf],f=i[ef],d=i[tf],p=i[uf],v=i[sf],y=v[W_],g=v[K_],m=v[V_],E=v[z_];if(e instanceof kn)et.globalAlpha=a,et.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]),e.render(tt,0,et,rt);else{var M,O,T,A,b=d||f||_;if(b=b||(u&&u.available?u:null)){if("none"===y)return h+=r||0,n&&(h+=n),ft=h;if(et.globalCompositeOperation="normal"===E?"source-over":E.replace(/[A-Z]/,function(t){return ft=h,"-"+t.toLowerCase()}),n){for(var x=h+(r||0)+1;n--;)x+=(nt[x][mf]||0)+1;h=x-1}h+=r||0,Uo.draw(et,a,o,b),et.globalCompositeOperation="source-over"}else{if(ut.hasOwnProperty(h)&&(et=ut[h].ctx),c&&c.available){if("none"===y)return h+=r||0,n&&(h+=n),ft=h;var S,R,k,I,N,w,C,D={};if(!s||(I=re.getCacheCanvas(it,at)).ctx&&(S={ctx:et,blur:s,target:I},et=I.ctx,D.offScreenFilter=S),n){for(var P,L=h+(r||0)+1;n--;)L+=(nt[L][mf]||0)+1;h=L-1,S?R=S:(P=re.getCacheCanvas(it,at)).ctx&&(R={ctx:et,target:P},et=P.ctx),D.offScreenMask=R}"hidden"===m&&(S||R?k=S||R:(N=re.getCacheCanvas(it,at)).ctx&&(k={ctx:et,target:N},et=N.ctx),D.offScreenOverflow=k),"normal"!==E&&(S||R||k?C=S||R||k:(w=re.getCacheCanvas(it,at),C={ctx:et,target:w,mixBlendMode:E},et=w.ctx),D.offScreenBlend=C),"hidden"!==g&&Uo.draw(et,a,o,c)}else if(l){if(D=e instanceof qu?e.__renderSelfData=e.__renderSelf(tt,p,et,rt):e.render(tt,p,et,rt),"none"===y)return h+=r||0,n&&(h+=n),ft=h;var F,B,H,G=D||{},Y=G.offScreenFilter,W=G.offScreenMask,U=G.offScreenOverflow,K=G.offScreenBlend;if(Y&&((ht[F=h+(r||0)]=ht[F]||[]).unshift(Y),et=Y.target.ctx),W){for(var X,V,z=h+(r||0)+1;n--;){var j=nt[z],$=j[mf],q=j[yf].currentStyle,Z=q[W_],J=q[K_];"none"!==Z?("hidden"!==J&&(X?V=z:X=V=z),z++):z+=($||0)+1}var Q=re.getCacheCanvas(it,at);ut[X]=Q,_t[V]={mask:Q,offScreenMask:W,isClip:nt[X][yf].isClip},et=W.target.ctx}K&&((ct[B=h+(r||0)]=ct[B]||[]).unshift(K),et=K.target.ctx),U&&((lt[H=h+(r||0)]=lt[H]||[]).unshift(U),et=U.target.ctx),e instanceof qu&&e.render(tt,e.__refreshLevel,et,rt)}else n&&(h+=r||0,h+=n);ht.hasOwnProperty(h)&&ht[h].forEach(function(t){var e,r=t.target,n=t.ctx,i=t.blur;et.filter&&((e=re.getCacheCanvas(it,at,null)).ctx.filter="blur(".concat(i,"px)"),e.ctx.drawImage(r.canvas,0,0),e.ctx.filter="none",r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,it,at),r.ctx.drawImage(e.canvas,0,0),e.ctx.clearRect(0,0,it,at)),ut.hasOwnProperty(h+1)||lt.hasOwnProperty(h)||ct.hasOwnProperty(h)||(n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),n.drawImage(r.canvas,0,0),r.draw(),r.ctx.filter="none",r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(r.canvas),et=n)}),lt.hasOwnProperty(h)&&lt[h].forEach(function(t){var e=t.matrix,r=t.target,n=t.ctx,i=t.x,a=t.y,o=t.offsetWidth,s=t.offsetHeight;et.globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.fillStyle="#FFF",et.beginPath(),et.rect(i,a,o,s),et.fill(),et.closePath(),et.globalCompositeOperation="source-over",ut.hasOwnProperty(h+1)||ct.hasOwnProperty(h)||(n.setTransform(1,0,0,1,0,0),n.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),n.globalAlpha=1,n.drawImage(r.canvas,0,0),et.setTransform(1,0,0,1,0,0),et.clearRect(0,0,it,at),re.releaseCacheCanvas(r.canvas),et=n)}),ct.hasOwnProperty(h)&&ct[h].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,ut.hasOwnProperty(h+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.globalAlpha=1,e.ctx.setTransform(1,0,0,1,0,0),e.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(e.canvas),(et=t.ctx).globalCompositeOperation="source-over")}),_t.hasOwnProperty(h)&&(O=(M=_t[h]).mask,T=M.offScreenMask,M.isClip?((et=O.ctx).globalCompositeOperation="source-out",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(T.target.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",T.target.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(T.target.canvas),(et=T.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),et.globalCompositeOperation="source-over",O.draw(et),O.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(O.canvas)):((et=T.target.ctx).globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",O.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(O.canvas),(et=T.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),A=T.target,et.drawImage(A.canvas,0,0),et.globalCompositeOperation="source-over",A.draw(et),A.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(T.target.canvas)))}}ft=h})(ft)},renderCanvas:function(I,N,w,t){for(var C=t.__structs,D=t.width,P=t.height,L={},F={},B={},H={},G={},Y=0,e=C.length;Y<e;Y++)(function(h){var t=C[h],e=t[yf],r=t[mf],n=t[Ef],i=e.__config,a=i[sf],o=i[uf];H.hasOwnProperty(h)&&(N=H[h].ctx);var s=void 0,s=e instanceof qu?e.__renderSelfData=e.__renderSelf(I,o,N,w):e.render(I,o,N,w);if("none"===a[W_])return h+=r||0,n&&(h+=n),Y=h;var l,c,u,_,f,d,p,v=s||{},y=v.offScreenFilter,g=v.offScreenMask,m=v.offScreenOverflow,E=v.offScreenBlend;if(y&&((L[l=h+(r||0)]=L[l]||[]).unshift(y),N=y.target.ctx),g){for(var M,O,T=h+(r||0)+1;n--;){var A=C[T],b=A[mf],x=A[yf].currentStyle,S=x[W_],R=x[K_];"none"!==S?("hidden"!==R&&(M?O=T:M=O=T),T++):T+=(b||0)+1}var k=re.getCacheCanvas(D,P);H[M]=k,G[O]={mask:k,offScreenMask:g,isClip:C[M][yf].isClip},N=g.target.ctx}E&&((B[c=h+(r||0)]=B[c]||[]).unshift(E),N=E.target.ctx),m&&((F[u=h+(r||0)]=F[u]||[]).unshift(m),N=m.target.ctx),e instanceof qu&&e.render(I,o,N,w),L.hasOwnProperty(h)&&L[h].forEach(function(t){var e,r=t.target,n=t.ctx,i=t.blur;N.filter&&((e=re.getCacheCanvas(D,P,null)).ctx.filter="blur(".concat(i,"px)"),e.ctx.drawImage(r.canvas,0,0),e.ctx.filter="none",r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,D,P),r.ctx.drawImage(e.canvas,0,0),e.ctx.clearRect(0,0,D,P)),H.hasOwnProperty(h+1)||F.hasOwnProperty(h)||B.hasOwnProperty(h)||(n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,n.drawImage(r.canvas,0,0),r.draw(),r.ctx.filter="none",r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,D,P),re.releaseCacheCanvas(r.canvas),N=n)}),F.hasOwnProperty(h)&&F[h].forEach(function(t){var e=t.matrix,r=t.target,n=t.ctx,i=t.x,a=t.y,o=t.offsetWidth,s=t.offsetHeight;N.globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),N.fillStyle="#FFF",N.beginPath(),N.rect(i,a,o,s),N.fill(),N.closePath(),N.globalCompositeOperation="source-over",H.hasOwnProperty(h+1)||B.hasOwnProperty(h)||(n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,n.drawImage(r.canvas,0,0),N.setTransform(1,0,0,1,0,0),N=n)}),B.hasOwnProperty(h)&&B[h].forEach(function(t){var e,r=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,H.hasOwnProperty(h+1)||((e=t.ctx).setTransform(1,0,0,1,0,0),e.globalAlpha=1,e.drawImage(r.canvas,0,0),r.draw(),r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,D,P),re.releaseCacheCanvas(r.canvas),(N=e).globalCompositeOperation="source-over")}),G.hasOwnProperty(h)&&(f=(_=G[h]).mask,d=_.offScreenMask,_.isClip?((N=f.ctx).globalCompositeOperation="source-out",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(d.target.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",d.target.ctx.clearRect(0,0,D,P),re.releaseCacheCanvas(d.target.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),N.globalCompositeOperation="source-over",f.draw(N),f.ctx.clearRect(0,0,D,P),re.releaseCacheCanvas(f.canvas)):((N=d.target.ctx).globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",f.ctx.clearRect(0,0,D,P),re.releaseCacheCanvas(f.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),p=d.target,N.drawImage(p.canvas,0,0),N.globalCompositeOperation="source-over",p.draw(N),p.ctx.clearRect(0,0,D,P),re.releaseCacheCanvas(d.target.canvas))),Y=h})(Y)},renderSvg:function(ot,st,ht,t,e){var lt=t.__structs,ct=t.width,ut=t.height,_t={};if(!e)for(var r=0,n=lt.length;r<n;r++){var i=lt[r],a=i[yf],o=i[mf],s=i[Ef],h=a.__config,l=h[uf],c=h[df];s&&(xf<=l||Sf(l,Tf|Af))&&(_t[r+(o||0)+1+s-1]=l),l<xf&&function(){var t,e=Sf(l,bf);_t.hasOwnProperty(r)?(t=_t[r],!Sf(l,Tf)&&t<xf&&!Sf(t,Tf)&&c.forEach(function(t){e&&"filter"===t.tagName&&"feGaussianBlur"===t.children[0].tagName||ht.addCache(t)})):c.forEach(function(t){e&&"filter"===t.tagName&&"feGaussianBlur"===t.children[0].tagName||ht.addCache(t)})}()}for(var ft,dt,pt,vt={},yt=[],gt=[],mt=0,Et=0,u=lt.length;Et<u;Et++)!function(t){var e,r,n,i=lt[t],l=i[yf],a=i[mf],o=i[Ef],s=i[Mf],c=l.__config,h=l.computedStyle[W_],u=c[Q_],_=c[uf],f=c[df];o&&"none"!==h&&(vt[(r=(e=t+(a||0)+1)+o)-1]={index:t,start:e,end:r,isClip:lt[e][yf].isClip}),s<mt?(yt.splice(s),ft=yt[s-1],gt.splice(s),dt=gt[s-1]):mt<s&&(yt.push(pt.__matrix),n=pt.virtualDom,gt.push(n),dt=n);var d=void 0;if(_<xf&&!(l instanceof kn)){c[uf]=Of,d=l.virtualDom,u&&u.available?(t+=a||0,d.cache=!0):(u&&(u.available=!0),d=l.__virtualDom=zt.extend({},d),l instanceof Tc&&!(l instanceof ru)&&(d.children=[]),delete d.cache,"none"===l.computedStyle[W_]&&(t+=a||0));var p,v,y,g,m=c[hf],E=c[sf],M=c[ff];if(Sf(_,Tf)&&(p=l.__calMatrix(_,M,m,E),v=c[nf],p&&v&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5]),!p||Vt.isE(p)?delete d.transform:d.transform="matrix("+zt.joinArr(p,",")+")",ft&&p&&(p=Vt.multiply(ft,p)),(v=c[af])&&p&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5])),Sf(_,Af)&&(1===(y=E[U_]=m[U_])?delete d.opacity:d.opacity=y),Sf(_,bf)){var O=E[X_]=m[X_];delete d.filter;for(var T=f.length-1;0<=T;T--){var A=f[T];if("filter"===A.tagName&&"feGaussianBlur"===A.children[0].tagName){ht.removeCache(A);break}}Array.isArray(O)&&O.forEach(function(t){var e,r,n,i,a,o=Kt(t,2),s=o[0],h=o[1];"blur"===s&&0<h&&(i={tagName:"filter",props:[["x",-(e=Vt.int2convolution(h))/(r=l.outerWidth)],["y",-e/(n=l.outerHeight)],["width",1+2*e/r],["height",1+2*e/n]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",h]]}]},a=ht.add(i),c[df].push(i),d.filter="url(#"+a+")")})}Sf(_,Rf)&&("normal"!==(g=E[z_]=m[z_])?d.mixBlendMode=g:delete d.mixBlendMode),d.lv=_}else c[df]&&c[df].splice(0),l instanceof qu&&(l.__renderSelfData=l.__renderSelf(ot,_,st,ht)),l.render(ot,_,st,ht),d=l.virtualDom,"none"===h&&(t+=a||0,o&&(t+=o));if(vt.hasOwnProperty(t)&&(_t.hasOwnProperty(t)||xf<=_||Sf(_,Tf|Af))){var b=vt[t],x=b.index,S=b.start,R=b.end,k=b.isClip,I=lt[x][yf],N=[];k&&N.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(ct,",0L").concat(ct,",").concat(ut,"L0,").concat(ut,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var w=S;w<R;w++){var C=lt[w][yf],D=C.computedStyle,P=D[W_],L=D[K_],F=D[j_],B=C.virtualDom,H=B.children,G=B.opacity;if("none"!==P&&"hidden"!==L){H=zt.clone(H),N=N.concat(H);for(var Y=0,W=H.length;Y<W;Y++){var U=H[Y],K=U.tagName,X=U.props;if("path"===K){if(k)for(var V=0,z=X.length;V<z;V++){var j=X[V];"fill"===j[0]&&(j[1]=zt.int2invert(F[0]))}var $=C.renderMatrix,q=Vt.inverse(I.renderMatrix),$=Vt.multiply(q,$);X.push(["transform","matrix(".concat($.join(","),")")]),zt.isNil(G)||1===G||X.push(["opacity",G])}else if("image"===K){for(var Z,J,Q,tt=-1,et=0,rt=X.length;et<rt;et++)if("transform"===X[et][0]){tt=et;break}-1===tt?(Z=Vt.inverse(I.renderMatrix),Vt.isE(Z)||X.push(["transform","matrix(".concat(Z.join(","),")")])):(Q=X[tt][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),J=Vt.inverse(I.renderMatrix),Q=Vt.multiply(J,Q),X[tt][1]="matrix(".concat(Q.join(","),")"))}}}}for(var nt=f.length-1;0<=nt;nt--){"mask"===f[nt].tagName&&f.splice(nt,1)}var it={tagName:"mask",props:[],children:N},at=ht.add(it);f.push(it),at="url(#"+at+")",I.virtualDom.mask=at}dt&&!l.isMask&&dt.children.push(d),0===t&&(ft=c[nf],dt=d),mt=s,pt=l,Et=t}(Et)}},wf=v.STYLE_KEY,Cf=wf.DISPLAY,Df=wf.TOP,Pf=wf.BOTTOM,Lf=wf.POSITION,Ff=wf.HEIGHT,Bf=x.AUTO,Hf=x.PX,Gf=x.PERCENT,Yf=Ro.REFLOW;var Wf,Uf={offsetAndResizeByNodeOnY:function(t,e,r,n,i){if(n){for(var a;;){for(;t.isShadowRoot;)t=t.host;var o,s=void 0,h=(a=t).domParent;h&&(o=h.computedStyle[Lf],s=h===e||h.isShadowRoot||"relative"===o||"absolute"===o);for(var l=t.next,c=void 0;l;){if("none"!==l.currentStyle[Cf])if("absolute"===l.currentStyle[Lf]){var u,_,f=l.currentStyle,d=f[Df],p=f[Pf],v=f[Ff];if(d[1]===Bf?p[1]===Bf||p[1]===Hf?(l.__offsetY(n,!0,Yf),l.__cancelCache()):p[1]===Gf&&(u=(1-.01*p[0])*n,l.__offsetY(u,!0,Yf),l.__cancelCache()):d[1]===Gf&&(_=.01*d[0]*n,l.__offsetY(_,!0,Yf),l.__cancelCache()),v[1]===Gf)if(s)h.__layoutAbs(h,null,l);else{if(!c)for(c=h;c&&c!==e&&!c.isShadowRoot;){var y=c.currentStyle;if("absolute"===y[Lf]||"relative"===y[Lf])break;c=c.domParent}i.push([h,c,l])}}else l.__offsetY(n,!0,Yf),l.__cancelCache();l=l.next}if(!h)break;var g=(t=h).currentStyle,m=void 0;if("absolute"===g[Lf]?g[Ff][1]!==Bf||g[Df][1]!==Bf&&g[Pf][1]!==Bf||(m=!0):g[Ff][1]===Bf&&(m=!0),!m)break;if(t.__resizeY(n,Yf),t.__cancelCache(),t===e)break}for(;a;)a.__cancelCache(!0),a=a.domParent}}},Kf=v.STYLE_KEY,Xf=Kf.TOP,Vf=Kf.RIGHT,zf=Kf.BOTTOM,jf=Kf.LEFT,$f=Kf.POSITION,qf=Kf.DISPLAY,Zf=Kf.VISIBILITY,Jf=Kf.COLOR,Qf=Kf.WIDTH,td=Kf.HEIGHT,ed=Kf.Z_INDEX,rd=Kf.MARGIN_TOP,nd=Kf.MARGIN_LEFT,id=Kf.MARGIN_BOTTOM,ad=Kf.PADDING_TOP,od=Kf.PADDING_LEFT,sd=Kf.PADDING_BOTTOM,hd=Kf.BORDER_TOP_WIDTH,ld=Kf.BORDER_LEFT_WIDTH,cd=Kf.BORDER_BOTTOM_WIDTH,ud=v.UPDATE_KEY,_d=ud.UPDATE_NODE,fd=ud.UPDATE_STYLE,dd=ud.UPDATE_KEYS,pd=ud.UPDATE_COMPONENT,vd=ud.UPDATE_FOCUS,yd=ud.UPDATE_IMG,gd=ud.UPDATE_MEASURE,md=ud.UPDATE_OVERWRITE,Ed=ud.UPDATE_LIST,Md=ud.UPDATE_CONFIG,Od=v.NODE_KEY,Td=Od.NODE_TAG_NAME,Ad=Od.NODE_CACHE_STYLE,bd=Od.NODE_CACHE_PROPS,xd=Od.NODE_CURRENT_STYLE,Sd=Od.NODE_COMPUTED_STYLE,Rd=Od.NODE_CURRENT_PROPS,kd=Od.NODE_DOM_PARENT,Id=Od.NODE_IS_MASK,Nd=Od.NODE_REFRESH_LV,wd=Od.NODE_IS_DESTROYED,Cd=Od.NODE_STYLE,Dd=Od.NODE_UPDATE_HASH,Pd=Od.NODE_UNIQUE_UPDATE_ID,Ld=Od.NODE_CACHE,Fd=Od.NODE_CACHE_TOTAL,Bd=Od.NODE_CACHE_FILTER,Hd=Od.NODE_CACHE_OVERFLOW,Gd=Od.NODE_CACHE_MASK,Yd=Od.NODE_STRUCT,Wd=v.STRUCT_KEY,Ud=Wd.STRUCT_INDEX,Kd=Wd.STRUCT_TOTAL,Xd=Wd.STRUCT_NODE,Vd=(c(Wf={},Xf,!0),c(Wf,Vf,!0),c(Wf,zf,!0),c(Wf,jf,!0),Wf),zd=zt.isNil,jd=zt.isObject,$d=zt.isFunction,qd=x.AUTO,Zd=x.PX,Jd=x.PERCENT,Qd=x.INHERIT,tp=cn.calRelative,ep=cn.isRelativeOrAbsolute,rp=cn.equalStyle,np=Ro.contain,ip=Ro.getLevel,ap=Ro.isRepaint,op=Ro.NONE,sp=Ro.FILTER,hp=Ro.REPAINT,lp=Ro.REFLOW,cp=Ro.LAYOUT,up=Ro.OFFSET,_p=Re.isIgnore,fp=Re.isGeom,dp=Re.isMeasure;function pp(t,e){return t.currentStyle[e][1]!==qd}function vp(t,e){var r=pp(t,Qf)&&pp(t,td);if(r&&e){var n=t.domParent;if(n&&("flex"===n.currentStyle[qf]||"flex"===n.computedStyle[qf]))return}return r}function yp(t,e){return t.hasOwnProperty("__uniqueReflowId")&&e[t.__uniqueReflowId]>=cp}function gp(t,e,r){var n,i,a;i=e,a=r,(n=t).hasOwnProperty("__uniqueReflowId")||(n.__uniqueReflowId=mp,i[mp++]={node:n,lv:cp,component:a}),e[t.__uniqueReflowId].lv|=cp}var mp=0;function Ep(t,e,r,n){var i=r;if("inline"===r.currentStyle[qf]||"inline"===r.computedStyle[qf]){var a=r.domParent;do{if((i=a)===t)return 1;if(yp(a,e))return;if("absolute"===a.currentStyle[$f]||"absolute"===a.computedStyle[$f])return void gp(a,e,n);if(vp(a,!0))return void gp(a,e,n);a=a.domParent}while(a&&("inline"===a.currentStyle[qf]||"inline"===a.computedStyle[qf]));if(vp(i,!0))return void gp(i,e,n)}var o,s=i.domParent;if(s&&!yp(s,e)){if(s===t&&("flex"===s.computedStyle[qf]||"flex"===s.currentStyle[qf]||"absolute"===s.computedStyle[$f]||"absolute"===s.currentStyle[$f]))return 1;do{if(s===t)break;if(yp(s,e))return;if("absolute"===s.currentStyle[$f]||"absolute"===s.computedStyle[$f])break;if(vp(s,!0))break;"flex"!==s.computedStyle[qf]&&"flex"!==s.currentStyle[qf]||(o=s),s=s.domParent}while(s);if(o&&(i=o),i===t)return 1;for(;s;){if("absolute"===s.currentStyle[$f]||"absolute"===s.computedStyle[$f]){if(vp(s))break;return void gp(s,e,n)}s=s.domParent}i!==r&&gp(i,e,n)}}var Mp=0;function Op(t,e,r,n,i,a,o,s,h){var l,c=r[_d],u=r[fd],_=r[md],f=r[vd],d=r[yd],p=r[pd],v=r[gd],y=r[Ed],g=r[dd],m=r[Md];if(!m[wd]){_&&Object.assign(m[Cd],_),y&&!p&&(g=(g||[]).slice(0),l={},g.forEach(function(t){l[t]=!0}),y.forEach(function(t){var e=t[fd],r=t[md];(t[dd]||[]).forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,g.push(t))}),r&&Object.assign(m[Cd],r),e&&(u?Object.assign(u,e):u=e)}));var E,M,O,T,A=m[Td],b=m[Ad],x=m[bd],S=m[xd],R=m[Sd],k=m[Rd],I=m[kd],N=m[Id],w=f||op,C=v;if(!p&&u&&g)for(var D=0,P=g.length;D<P;D++){var L=g[D],F=u[L];if(c instanceof qu&&fp(A,L))rp(L,F,k[L],c)||(w|=hp,x[L]=void 0,k[L]=F);else if(!rp(L,F,S[L],c))if(_p(L))b[L]=void 0,S[L]=F;else{if(Vd.hasOwnProperty(L)){var B=S[$f];if("relative"!==B&&"absolute"!==B){delete u[L];continue}}else L===qf&&(T=!0);w|=ip(L),dp(L)&&(C=!0),b[L]=void 0,S[L]=F,L===ed&&c!==e&&(E=!0),L===Zf&&(M=!0),L===Jf&&(O=!0)}}if(w!==op||p){if(E&&I&&delete I.__zIndexChildren,M||O)for(var H=e.__structs,G=c.__config[Yd],Y=G[Ud]+1,W=Y+G[Kd];Y<W;Y++){var U=H[Y],K=U[Xd],X=U[Kd],V=K.__config,z=V[xd],j=void 0;M&&(K instanceof kn||z[Zf][1]===Qd)&&(j=!0),O&&(K instanceof kn||z[Jf][1]===Qd)&&(j=!0),j?(V[Nd]|=hp,K instanceof _l&&K.__cancelCache()):Y+=X||0}if(N){for(var $=c.prev;$&&$.isMask;)$=$.prev;$&&$.__config[Gd]&&($.__config[Gd].release(),$.__config[Gd]=null)}!p&&ap(w)?(E&&t===Xt.SVG&&(w|=hp,I&&Tp(I)),E&&!p&&s&&I&&!I.hasOwnProperty("__uniqueZId")&&(s[Mp]=!0,I.__uniqueZId=Mp++,h.push(I))):(n.push({node:c,style:u,img:d,component:p}),C&&i.push(c)),m[Nd]|=w;var q=hp<=w||t===Xt.SVG&&c instanceof qu;if(q&&(m[Ld]&&m[Ld].release(),m[Fd]&&m[Fd].release(),m[Gd]&&(m[Gd].release(),m[Gd]=null),m[Hd]&&(m[Hd].release(),m[Hd]=null)),(q||np(w,sp))&&m[Bd]&&(m[Bd].release(),m[Bd]=null),"none"===R[qf]&&w<lp)return!1;var Z=I;if(T)for(;Z;){var J=Z.__config;if("none"===J[Sd][qf])return!(R[qf]="none");Z=J[kd]}for(Z=I;Z;){var Q=Z.__config;if(Q.hasOwnProperty(Pd)){var tt=Q[Pd];if(a.hasOwnProperty(tt))break;a[tt]=!0}else a[Mp]=!0,Q[Pd]=Mp++,o.push(Z);var et=Q[Nd];hp<=et&&Q[Ld]&&Q[Ld].release(),Q[Fd]&&Q[Fd].release(),Q[Bd]&&(Q[Bd].release(),Q[Bd]=null),Q[Gd]&&(Q[Gd].release(),Q[Gd]=null),Q[Hd]&&(Q[Hd].release(),Q[Hd]=null),Z=Q[kd]}return!0}delete m[Pd]}}function Tp(t,e){var r=t.__config;e?r[Nd]|=hp:r[Fd].release(),Array.isArray(t.children)&&t.children.forEach(function(t){t instanceof Sl&&(t=t.shadowRoot),t instanceof kn||Tp(t,!0)})}var Ap=0,bp=function(){t(a,Tc);var i=e(a);function a(t,e,r){var n;return g(this,a),(n=i.call(this,t,e)).__cd=r||[],n.__dom=null,n.__mw=0,n.__mh=0,n.__task=[],n.__taskCp=[],n.__ref={},n.__updateHash={},n.__reflowList=[{node:_(n)}],n.__animateController=new H_,Ri.mix(_(n)),n.__config[Dd]=n.__updateHash,n}return l(a,[{key:"__initProps",value:function(){var t,e=this.props.width;zd(e)||0<(t=parseFloat(e)||0)&&(this.__width=t);var r,n=this.props.height;zd(n)||0<(r=parseFloat(n)||0)&&(this.__height=r)}},{key:"__genHtml",value:function(){var r=this,n="<".concat(this.tagName);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(n+=function(t,e){var r=Array.isArray(e)?zt.joinSourceArray(e):zt.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+zt.encodeHtml(r,!0)+'"'}(t,e))}),n+="></".concat(this.tagName,">")}},{key:"__wrapEvent",value:function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f;return-1===["touchend","touchcancel"].indexOf(t.type)&&(e=this.dom,r=this.__scx,n=this.__scy,a=(i=e.getBoundingClientRect()).x,o=i.y,s=i.left,h=i.top,l=i.width,c=i.height,u=a||s||0,_=o||h||0,u=(f=t.touches?t.touches[0]:t).clientX-u,_=f.clientY-_,zd(r)?u*=this.width/l:u/=r,zd(n)?_*=this.height/c:_/=n),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:u,y:_,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e),e}}},{key:"appendTo",value:function(t){var e,n,i;t=function(t){if(zt.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Ol.initRoot(this.__cd,this),this.__initProps(),(this.__root=this).cache=!!this.props.cache,t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(this.tagName),this.__dom||(t.innerHTML=this.__genHtml(),this.__dom=t.querySelector(this.tagName))),this.__uuid=zd(this.__dom.__uuid)?Ap++:this.__dom.__uuid,this.__defs=this.dom.__defs||ou.getInstance(this.__uuid),this.width&&this.height||(e=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=Xt.CANVAS):"svg"===this.tagName&&(this.__renderMode=Xt.SVG),this.refresh(null,!0),this.dom.__root?this.dom.__root.destroy():(n=this.dom,i=a,["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(r){n.addEventListener(r,function(t){var e=n.__root;e&&e instanceof i&&(-1<["touchend","touchcancel","touchmove"].indexOf(r)?e.__touchstartTarget&&e.__touchstartTarget.__emitEvent(e.__wrapEvent(t),!0):e.__cb(t))})}),this.dom.__uuid=this.__uuid),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r,n=this.isDestroyed,i=this.renderMode,a=this.ctx,o=this.defs,s=this.width,h=this.height;if(!n){if(o.clear(),e)this.__checkRoot(s,h),this.__computeMeasure(i,a);else if(!this.__checkUpdate(i,a,s,h))return;re.measureText(),this.__checkReflow(s,h),i===Xt.CANVAS?(this.__clear(a),this.cache?Nf.renderCacheCanvas(i,a,o,this):Nf.renderCanvas(i,a,o,this)):i===Xt.SVG&&(Nf.renderSvg(i,a,o,this,e),(r=this.virtualDom).defs=o.value,this.dom.__root?b_(this.dom,this.dom.__vd,r):this.dom.innerHTML=zt.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=o),$d(t)&&t(),this.emit(Ri.REFRESH)}}},{key:"destroy",value:function(){this.__destroy();var t=this.dom;t&&(t.__root=null)}},{key:"scale",value:function(t,e){var r=0<arguments.length&&void 0!==t?t:1,n=1<arguments.length&&void 0!==e?e:r;this.__scx=r,this.__scy=n}},{key:"resize",value:function(t,e,r){t===this.width&&e===this.height||(this.__width=t,this.__hegiht=e,this.addRefreshTask(r||function(){}))}},{key:"addRefreshTask",value:function(t){var e,n;t&&((e=this.task).length||(wi.nextFrame({__before:function(r){(n=e.splice(0)).length&&n.forEach(function(t,e){jd(t)&&$d(t.__before)&&t.__before(r)})},__after:function(e){n.forEach(function(t){jd(t)&&$d(t.__after)?t.__after(e):$d(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.task,r=0,n=e.length;r<n;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,n=this,i=this.taskCp;i.length||(wi.__nextFrameCp({__before:function(e){(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),v_.check(n),v_.updateList.length&&v_.updateList.forEach(function(t){var e=t.shadowRoot;e instanceof kn&&(e=e.domParent);var r={};r[_d]=e,r[fd]=e.currentStyle,r[vd]=lp,r[gd]=!0,r[pd]=t,r[Md]=e.__config,n.__addUpdate(e,e.__config,n,n.__config,r)}))},__after:function(e){r.forEach(function(t){t.__after(e)}),v_.did()}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t)}},{key:"__checkRoot",value:function(t,e){var r=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(r[qf])&&(n[qf]=r[qf]="block"),"absolute"===r[$f]&&(n[$f]=r[$f]="static"),r[Qf]=[t,Zd],r[td]=[e,Zd],n[Qf]=t,n[td]=e}},{key:"__addUpdate",value:function(t,e,r,n,i){var a,o,s,h=n[Dd];t===r?(h=r.__updateRoot)?(i[yd]&&(h[yd]=i[yd]),i[vd]&&(h[vd]|=i[vd]),i[gd]&&(h[gd]=!0),i[fd]&&(h[Ed]=h[Ed]||[]).push((c(a={},fd,i[fd]),c(a,md,i[md]),c(a,dd,i[dd]),a))):r.__updateRoot=i:e.hasOwnProperty(Pd)?h.hasOwnProperty(e[Pd])?(o=h[e[Pd]],i[yd]&&(o[yd]=i[yd]),i[vd]&&(o[vd]|=i[vd]),i[gd]&&(o[gd]=!0),i[fd]&&(o[Ed]=o[Ed]||[]).push((c(s={},fd,i[fd]),c(s,md,i[md]),c(s,dd,i[dd]),s))):re.error("Update process miss uniqueUpdateId"):(e[Pd]=Mp,h[Mp++]=i)}},{key:"__checkUpdate",value:function(s,h,t,e){var l=this,r=[],n=[],i={},a=[],o={},c=[],u=l.__updateRoot,_=l.__updateHash;u&&(l.__updateRoot=null,y=Op(s,l,u,n,r,i,a),l.__checkRoot(t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var v=Op(s,l,_[f[d]],n,r,i,a,o,c),y=y||v;l.__reflowList=n,Mp=0,l.__updateHash=l.__config[Dd]={},a.forEach(function(t){delete t.__config[Pd]}),c.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(l.__structs))});var g={};r.forEach(function(t){var e=t.__config[Pd],r=t.domParent;if(!g.hasOwnProperty(e)){g[e]=!0;var n=t;if(Re.isMeasureInherit(_[e][fd]))for(;r&&r!==l;){var i,a=r.__config[Pd],o=r.currentStyle;if(!(r.__config.hasOwnProperty(Pd)?(i=_[a][fd],g[a]=!0,!!Re.measureInheritList(i).length):Re.isMeasureInherit(o)))break;r=(n=r).domParent}n.__computeMeasure(s,h,function(t){t.__config.hasOwnProperty(Pd)&&(g[t.__config[Pd]]=!0)})}});for(var m=0,E=f.length;m<E;m++)delete _[f[m]][Md][Pd];return y}},{key:"__checkReflow",value:function(t,e){var Z=this,r=this.__reflowList;if(r.length){for(var n,ft=this,dt={},i=mp=0,a=r.length;i<a;i++){var o=r[i],s=o.node,h=o.style,l=o.img,c=o.component;if(s===this){n=!0;break}var u=s.currentStyle,_=s.computedStyle;s.hasOwnProperty("__uniqueReflowId")||(s.__uniqueReflowId=mp,dt[mp++]={node:s,lv:up,img:l,component:c});var f=dt[s.__uniqueReflowId];if("absolute"===u[$f]&&"absolute"===_[$f])f.lv=cp;else if(u[$f]!==_[$f]){if(f.lv=cp,Ep(ft,dt,s,c)){n=!0;break}}else{var d=!0;if(h)for(var p=Object.keys(h),v=0,y=p.length;v<y;v++){var g=p[v];if(!Vd.hasOwnProperty(g)){d=!1;break}}if(!d||l||c){if(f.lv=cp,Ep(ft,dt,s,c)){n=!0;break}}else"relative"===_[$f]&&(f.lv|=up)}}if(mp=0,this.__reflowList=[],n)return r.forEach(function(t){return delete t.node.__uniqueReflowId}),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;var m=[];this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){var r,n=dt[t.__uniqueReflowId];return n.lv>=cp||(r=[],t.__deepScan(function(t,e){},{uniqueList:r}),r.forEach(function(t){e.uniqueList.push(t)})),e.uniqueList.push(n),!0}},{uniqueList:m});var J=[],Q=0,tt=[],et=0;m.forEach(function(t){var e=t.node,r=t.lv,n=t.component;if(cp<=r){var i=e.computedStyle,a=e.currentStyle,o=i[ed],s=i[$f],h=i[qf],l="absolute"===s,c="absolute"===a[$f],u="none"===h,_="none"===a[qf];if(u&&_)return;for(var f=e.domParent,d=f.__layoutData,p=d.x,v=d.y,y=d.h,g=f.width,m=f.computedStyle,E=e;n&&E.isShadowRoot;)E=E.host;var M=E.prev;M?(v=M.y,v+=M.outerHeight):(v=f.y,v+=m[rd]+m[hd]+m[ad]),p+=m[nd]+m[ld]+m[od];var O=e;if(c){for(O=O.domParent;O&&O!==ft&&!ep(O);)if(O.parent)O=O.parent;else if(O.host)break;var T,A,O=O||ft;if(n?f.__layoutAbs(O,null,n):f.__layoutAbs(O,null,e),l)return void(n?(T=e.__modifyStruct(ft,Q),Q+=T[1],J.push(T),(s===a[$f]||"static"!==s&&"static"!==a[$f])&&o===a[ed]||(f.__updateStruct(ft.__structs),Z.renderMode===Xt.SVG&&Tp(f))):(u||_)&&(e.__zIndexChildren=null,A=e.__modifyStruct(ft,Q),Q+=A[1],J.push(A)));f.__updateStruct(ft.__structs)}else{for(e.__layout({x:p,y:v,w:g,h:y}),v+=e.outerHeight,O=O.domParent;O&&O!==ft&&!ep(O);)if(O.parent)O=O.parent;else if(O.host)break;O=O||ft,e instanceof Tc&&e.__layoutAbs(O,{x:p,y:v,w:g,h:y})}for(var b=e;b&&b!==ft;)if("relative"===(m=(b=b.domParent).computedStyle)[$f]){var x=b.ox,S=b.oy;x&&e.__offsetX(x),S&&e.__offsetY(S);break}for(;e.isShadowRoot;)e=e.host;for(var R,k,I=e.next;I&&!I.hasOwnProperty("__uniqueReflowId");){if("absolute"!==I.computedStyle[$f]){var N=v-I.y;if(N)for(;I&&!I.hasOwnProperty("__uniqueReflowId");){var w=I;w instanceof Sl&&(w=w.shadowRoot);var C=w.computedStyle;"absolute"!==C[$f]&&"none"!==C[qf]&&(w.__offsetY(N,!0,lp),w.__cancelCache()),I=I.next}break}I=I.next}f.hasOwnProperty("__uniqueMergeOffsetId")||(f.__uniqueMergeOffsetId=et++,tt.push(f)),n?(R=e.__modifyStruct(ft,Q),Q+=R[1],J.push(R),(s===a[$f]||"static"!==s&&"static"!==a[$f])&&o===a[ed]||(e.domParent.__updateStruct(ft.__structs),Z.renderMode===Xt.SVG&&Tp(e.domParent))):(u||_)&&(e.__zIndexChildren=null,k=e.__modifyStruct(ft,Q),Q+=k[1],J.push(k))}else{var D=e.currentStyle,P=D[Xf],L=D[Vf],F=D[zf],B=D[jf],H=e.currentStyle,G=e.computedStyle,Y=G[Xf],W=G[Vf],U=G[zf],K=G[jf],X=e.computedStyle,V=e===Z?e:e.domParent,z=0;P[1]!==qd?(z=tp(H,"top",P,V),X[Xf]=z,X[zf]="auto"):F[1]!==qd?(z=-tp(H,"bottom",F,V),X[zf]=-z,X[Xf]="auto"):X[Xf]=X[zf]="auto";var j=0;"auto"!==Y?j=Y:"auto"!==U&&(j=-U),z!==j&&e.__offsetY(z-j,!1,lp);var $=0;B[1]!==qd?($=tp(H,"left",B,V),X[jf]=$,X[Vf]="auto"):L[1]!==qd?($=-tp(H,"right",L,V),X[Vf]=-$,X[jf]="auto"):X[jf]=X[Vf]="auto";var q=0;"auto"!==K?q=K:"auto"!==W&&(q=-W),$!==q&&e.__offsetX($-q,!1,lp)}});var pt=[];tt.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var e,r,n=t.flowChildren,i=t.absChildren,a=[],o=[],s=n.length,h=0;h<s;h++){var l=n[h];l instanceof Sl&&(l=l.shadowRoot);var c=l instanceof _l;!e&&c&&l.hasOwnProperty("__uniqueReflowId")&&(e=!0,r=h);var u=c&&l.currentStyle,_=c&&"inline"===u[qf],f=l;if(!c||_){if(a.length&&o.length&&e){var d=zt.getMergeMarginTB(o,a);if(d)for(var p=Math.max(r,h-a.length+1);p<s;p++)n[p].__offsetY(d,!0,lp),n[p].__cancelCache()}o=[],a=[]}if(c&&!_){var v,y,g,m,E,M,O,T,A=c&&"none"===u[qf],b=void 0;if(!A&&l.flowChildren&&0===l.flowChildren.length&&(y=(v=l.computedStyle)[rd],g=v[id],m=v[ad],E=v[sd],M=v[td],O=v[hd],T=v[cd],m<=0&&E<=0&&M<=0&&O<=0&&T<=0&&(a.push(g),o.push(y),b=!0)),A||b){if(h===s-1){var x=zt.getMergeMarginTB(o,a);if(x)for(var S=Math.max(r,h-a.length+1);S<s;S++)n[S].__offsetY(x,!0,lp),n[S].__cancelCache()}}else{var R=l.computedStyle,k=R[rd],I=R[id];if(a.length&&(o.push(k),e)){var N=zt.getMergeMarginTB(o,a);if(N)for(var w=Math.max(r,h-a.length+1);w<s;w++)n[w].__offsetY(N,!0,lp),n[w].__cancelCache()}o=[],a=[I]}}}var C=t.currentStyle,D=C[td],P=t===ft||t.isShadowRoot||"absolute"===C[$f]||"relative"===C[$f];if(D[1]===qd){var L,F=t.height+t.computedStyle[ad],B=f.y+f.outerHeight-t.y-F;if(B){t.__resizeY(B,lp);for(var H=0,G=i.length;H<G;H++){var Y,W,U=i[H],K=U.currentStyle,X=K[Xf],V=K[zf],z=K[td];if(X[1]===qd)if(V[1]===qd)for(var j=U.prev;j;){var $=j;$ instanceof Sl&&($=$.shadowRoot);var q=$ instanceof _l,Z=q&&$.currentStyle;if(!(q&&"absolute"===Z[$f])){var J=$.y+$.outerHeight-U.y;J&&(U.__offsetY(J,!0,lp),U.__cancelCache());break}j=j.prev}else V[1]===Zd?(U.__offsetY(B,!0,lp),U.__cancelCache()):V[1]===Jd&&(Y=(1-.01*V[0])*B,U.__offsetY(Y,!0,lp),U.__cancelCache());else if(X[1]===Jd)if(P){var Q=.01*X[0]*B;U.__offsetY(Q,!0,lp),U.__cancelCache()}else{if(!L)for(L=t.domParent;L&&L!==ft&&!L.isShadowRoot;){var tt=L.currentStyle;if("absolute"===tt[$f]||"relative"===tt[$f])break;L=L.domParent}L.currentStyle[td][1]!==Zd&&(W=.01*X[0]*B,U.__offsetY(W,!0,lp),U.__cancelCache())}if(z[1]===Jd)if(P)t.__layoutAbs(t,null,U);else{if(!L)for(L=t.domParent;L&&L!==ft&&!L.isShadowRoot;){var et=L.currentStyle;if("absolute"===et[$f]||"relative"===et[$f])break;L=L.domParent}pt.push([t,L,U])}}return void Uf.offsetAndResizeByNodeOnY(t,ft,dt,B,pt)}}for(var rt=0,nt=i.length;rt<nt;rt++){var it=i[rt],at=it.currentStyle,ot=at[Xf],st=at[zf];if(ot[1]===qd&&st[1]===qd)for(var ht=it.prev;ht;){var lt=ht;lt instanceof Sl&&(lt=lt.shadowRoot);var ct=lt instanceof _l,ut=ct&&lt.currentStyle;if(!(ct&&"absolute"===ut[$f])){var _t=lt.y+lt.outerHeight-it.y;_t&&(it.__offsetY(_t,!0,lp),it.__cancelCache());break}ht=ht.prev}}}),pt.forEach(function(t){t[0].__layoutAbs(t[1],null,t[2])});var E=0,M=0,O=!0,T=ft.__structs;if(J.forEach(function(t){var e=Kt(t,2),r=e[0],n=e[1];if(O)O=!1,M=r[Ud]+(r[Kd]||0)+1,E+=n;else{for(var i=r[Ud]+(r[Kd]||0)+1+E,a=M;a<i;a++)T[a][Ud]+=E;M=i,E+=n}}),E)for(var A=M,b=T.length;A<b;A++)T[A][Ud]+=E;r.forEach(function(t){return delete t.node.__uniqueReflowId})}}},{key:"__computeMeasure",value:function(e,r){cn.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},wi.__hookTask.push(t))}},{key:"__clear",value:function(t){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)}},{key:"dom",get:function(){return this.__dom}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),a}(),xp=v.STYLE_KEY,Sp=xp.STROKE_WIDTH,Rp=xp.BOX_SHADOW,kp=xp.FILTER,Ip=zt.isNil;function Np(t,e,r,n){return n?t.map(function(t){return e+t*r}):e+t*r}function wp(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function Cp(t){return t<0?t=0:1<t&&(t=1),t}function Dp(t,e,r,n,i,a,o,s,h){var l,c,u,_,f,d,p,v,y,g,m,E=7<arguments.length&&void 0!==s?s:0,M=8<arguments.length&&void 0!==h?h:1;return(0<E||M<1)&&(3===o?(l=Kt(jt.sliceBezier2Both([[t,e],i,a,[r,n]],E,M),4),t=(c=Kt(l[0],2))[0],e=c[1],i=l[1],a=l[2],r=(u=Kt(l[3],2))[0],n=u[1]):2===o?(_=Kt(jt.sliceBezier2Both([[t,e],a,[r,n]],E,M),3),t=(f=Kt(_[0],2))[0],e=f[1],a=_[1],r=(d=Kt(_[2],2))[0],n=d[1]):1===o?(p=Kt(jt.sliceBezier2Both([[t,e],i,[r,n]],E,M),3),t=(v=Kt(p[0],2))[0],e=v[1],i=p[1],r=(y=Kt(p[2],2))[0],n=y[1]):(t+=(g=Math.abs(t-r))*E,e+=(m=Math.abs(e-n))*E,r-=g*(1-M),n-=m*(1-M))),[t,e,r,n,i,a]}var Pp=function(){t(I,qu);var h=e(I);function I(t,e){var r,n,i,a;if(g(this,I),(r=h.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):Ip(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):Ip(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):Ip(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):Ip(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return Cp(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else{Ip(e.start)||(n=Cp(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),Cp(e)});for(var s=r.__end.length;s<r.__x1.length;s++)r.__end.push(1)}else{Ip(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=Cp(i),r.__end=r.__x1.map(function(){return i}))}}else{r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],Ip(e.x1)||(r.__x1=parseFloat(e.x1)||0),Ip(e.y1)||(r.__y1=parseFloat(e.y1)||0),Ip(e.x2)||(r.__x2=parseFloat(e.x2)||0),Ip(e.y2)||(r.__y2=parseFloat(e.y2)||0),Ip(e.start)||(r.__start=Cp(parseFloat(e.start)||0)),Ip(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=Cp(a)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB)}return r}return l(I,[{key:"buildCache",value:function(e,r){var n,i=this,a=this.width,o=this.height,s=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){Ip(s[t])&&(n=!0,s[t]=Np(i[t],e,a,h))}),["y1","y2"].forEach(function(t){Ip(s[t])&&(n=!0,s[t]=Np(i[t],r,o,h))}),["controlA","controlB"].forEach(function(t){Ip(s[t])&&(n=!0,s[t]=function e(t,r,n,i,a,o){if(o){if(t)return t.map(function(t){return e(t,r,n,i,a)})}else if(t&&2<=t.length)return[r+t[0]*i,n+t[1]*a];return[]}(i[t],e,r,a,o,h))}),["start","end"].forEach(function(t){Ip(s[t])&&(n=!0,s[t]=i[t])}),n}},{key:"render",value:function(d,t,p,e){var v=this,r=et(tt(I.prototype),"render",this).call(this,d,t,p,e);if(r.break)return r;var u,n,i,a,o,s,h,l,c,_,f,y=r.originX,g=r.originY,m=r.stroke,E=r.strokeWidth,M=r.strokeDasharray,O=r.strokeDasharrayStr,T=r.strokeLinecap,A=r.strokeLinejoin,b=r.strokeMiterlimit,x=r.dx,S=r.dy,R=this.__cacheProps,k=this.isMulti;return this.buildCache(y,g)&&d===Xt.SVG&&(u="",k?R.x1.forEach(function(t,e){var r,n=R.x2[e],i=R.y1[e],a=R.y2[e],o=R.controlA[e],s=R.controlB[e],h=R.start[e],l=R.end[e],c=wp(o,s);0===h&&1===l||(t=(r=Kt(Dp(t,i,n,i,o,s,c,h,l,R.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),u+=In.svgLine(t,i,n,a,o,s,c)}):(n=wp(R.controlA,R.controlB),s=R.x1,h=R.y1,l=R.x2,c=R.y2,_=R.controlA,f=R.controlB,i=R.start,a=R.end,0===i&&1===a||(s=(o=Kt(Dp(s,h,l,c,_,f,n,i,a,R.len),6))[0],h=o[1],l=o[2],c=o[3],_=o[4],f=o[5]),u=In.svgLine(s,h,l,c,_,f,n)),R.d=u),d===Xt.CANVAS?m.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_=E[e],f=0<_&&"radial"===t.k&&Array.isArray(t.v);0<_&&"none"!==t&&(v.__preSetCanvas(d,p,{stroke:t,strokeWidth:_,strokeDasharray:M[e],strokeLinecap:T[e],strokeLinejoin:A[e],strokeMiterlimit:b[e]}),f&&(p.strokeStyle=t.v[0]),p.beginPath(),k?R.x1.forEach(function(t,e){var r,n=R.x2[e],i=R.y1[e],a=R.y2[e],o=R.controlA[e],s=R.controlB[e],h=R.start[e],l=R.end[e],c=wp(o,s);0===h&&1===l||(t=(r=Kt(Dp(t,i,n,i,o,s,c,h,l,R.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),In.canvasLine(p,t,i,n,a,o,s,c,x,S)}):(r=wp(R.controlA,R.controlB),o=R.x1,s=R.y1,h=R.x2,l=R.y2,c=R.controlA,u=R.controlB,n=R.start,i=R.end,0===n&&1===i||(o=(a=Kt(Dp(o,s,h,l,c,u,r,n,i,R.len),6))[0],s=a[1],h=a[2],l=a[3],c=a[4],u=a[5]),In.canvasLine(p,o,s,h,l,c,u,r,x,S)),p.stroke(),p.closePath())}):d===Xt.SVG&&m.forEach(function(t,e){var r=E[e],n=0<r&&"radial"===t.k&&Array.isArray(t.v),i=[["d",R.d],["fill","none"],["stroke",n?t.v[0]:t.v||t],["stroke-width",r]];v.__propsStrokeStyle(i,O[e],T[e],A[e],b[e]),v.addGeom("path",i)}),r}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.currentStyle,n=r[Sp],i=r[Rp],a=r[kp],o=this.isMulti,s=this.__cacheProps;this.buildCache(t,e);var h=s.x1,c=s.y1,u=s.x2,_=s.y2,f=s.controlA,d=s.controlB,p=et(tt(I.prototype),"bbox",this),l=0;n.forEach(function(t){l=Math.max(t[0],l)});var v=Kt(this.__spreadByBoxShadowAndFilter(i,a),2),y=v[0],g=v[1];return y+=l,g+=l,o||(h=[h],u=[u],c=[c],_=[_],f=[f],d=[d]),h.forEach(function(t,e){var r,n,i,a=c[e],o=u[e],s=_[e],h=f[e],l=d[e];(Ip(h)||h.length<2)&&(Ip(l)||l.length<2)?(p[0]=Math.min(p[0],t-y),p[0]=Math.min(p[0],o-y),p[1]=Math.min(p[1],a-g),p[1]=Math.min(p[1],s-g),p[2]=Math.max(p[2],t+y),p[2]=Math.max(p[2],o+y),p[3]=Math.max(p[3],a+g),p[3]=Math.max(p[3],s+g)):Ip(h)||h.length<2?(r=jt.bboxBezier(t,a,l[0],l[1],o,s),p[0]=Math.min(p[0],r[0]-y),p[0]=Math.min(p[0],r[2]-y),p[1]=Math.min(p[1],r[1]-g),p[1]=Math.min(p[1],r[3]-g),p[2]=Math.max(p[2],r[0]+y),p[2]=Math.max(p[2],r[2]+y),p[3]=Math.max(p[3],r[1]+g),p[3]=Math.max(p[3],r[3]+g)):Ip(l)||l.length<2?(n=jt.bboxBezier(t,a,h[0],h[1],o,s),p[0]=Math.min(p[0],n[0]-y),p[0]=Math.min(p[0],n[2]-y),p[1]=Math.min(p[1],n[1]-g),p[1]=Math.min(p[1],n[3]-g),p[2]=Math.max(p[2],n[0]+y),p[2]=Math.max(p[2],n[2]+y),p[3]=Math.max(p[3],n[1]+g),p[3]=Math.max(p[3],n[3]+g)):(i=jt.bboxBezier(t,a,h[0],h[1],l[0],l[1],o,s),p[0]=Math.min(p[0],i[0]-y),p[0]=Math.min(p[0],i[2]-y),p[1]=Math.min(p[1],i[1]-g),p[1]=Math.min(p[1],i[3]-g),p[2]=Math.max(p[2],i[0]+y),p[2]=Math.max(p[2],i[2]+y),p[3]=Math.max(p[3],i[1]+g),p[3]=Math.max(p[3],i[3]+g))}),p}}]),I}(),Lp=v.STYLE_KEY,Fp=Lp.STROKE_WIDTH,Bp=Lp.BOX_SHADOW,Hp=Lp.FILTER,Gp=zt.isNil;function Yp(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Wp(t){return t<0?t=0:1<t&&(t=1),t}function Up(t,e){var r=[],n=0,i=[];if(e)n=[],t.forEach(function(t){var e=Up(t);r.push(e.list),n.push(e.total),i.push([0].concat(e.increase))});else if(Array.isArray(t)){n=0,i.push(0);for(var a=0,o=0,s=t.length;o<s;o++){var h=t[o];if(Array.isArray(h)){a=o;break}}for(var l=t[a],c=a+1,u=t.length;c<u;c++){var _,f,d,p,v,y=t[c];Array.isArray(y)&&(2===y.length?(_=Math.abs(y[0]-l[0]),f=Math.abs(y[1]-l[1]),d=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(d),n+=d,i.push(n),l=y):4===y.length?(p=jt.bezierLength([l,[y[0],y[1]],[y[2],y[3]]],2),r.push(p),n+=p,i.push(n),l=[y[2],y[3]]):6===y.length&&(v=jt.bezierLength([l,[y[0],y[1]],[y[2],y[3]],[y[4],y[5]]],3),r.push(v),n+=v,i.push(n),l=[y[4],y[5]]))}}return{list:r,total:n,increase:i}}function Kp(t,e,r,n){if(r===n)return t[r]>e?r-1:r;var i=r+(n-r>>1);return t[i]===e?i:t[i]>e?Kp(t,e,r,Math.max(i-1,r)):Kp(t,e,Math.min(i+1,n),n)}function Xp(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:0,a=3<arguments.length&&void 0!==n?n:1;if(0===i&&1===a)return t;if(a<=i)return[];var o=0,s=t.length-2;0<i&&(o=Kp(e.increase,i*e.total,o,s)),a<1&&(s=Kp(e.increase,a*e.total,o,s)),t=zt.clone(t);var h,l,c,u,_,f,d,p,v,y,g,m,E,M,O,T,A=1;return(a*=e.total)>e.increase[s]&&(h=t[s].slice(t[s].length-2),l=t[s+1],c=e.list[s],A=u=(a-e.increase[s])/c,2===l.length?(_=Math.abs(l[0]-h[0]),f=Math.abs(l[1]-h[1]),t[s+1]=[l[1]-(1-u)*_,l[1]-(1-u)*f]):4===l.length?(d=jt.sliceBezier([h,[l[0],l[1]],[l[2],l[3]]],u),t[s+1]=[d[1][0],d[1][1],d[2][0],d[2][1]]):6===l.length&&(p=jt.sliceBezier([h,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],u),t[s+1]=[p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]])),(i*=e.total)>e.increase[o]&&(v=t[o].slice(t[o].length-2),y=t[o+1],g=e.list[o],o===s&&1!==A&&(g*=A),m=(i-e.increase[o])/g,2===y.length?(E=Math.abs(y[0]-v[0]),M=Math.abs(y[1]-v[1]),t[o]=[v[0]+m*E,v[1]+m*M]):4===y.length?(O=jt.sliceBezier([[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=O[0],t[o+1]=[O[1][0],O[1][1],O[2][0],O[2][1]]):6===y.length&&(T=jt.sliceBezier([[y[4],y[5]],[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=T[0],t[o+1]=[T[1][0],T[1][1],T[2][0],T[2][1],y[4],y[5]])),s<t.length-2&&(t=t.slice(0,s+2)),0<o&&(t=t.slice(o)),t}var Vp=function(){t(u,qu);var h=e(u);function u(t,e){var r,n,i,a;if(g(this,u),(r=h.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return Wp(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else{Gp(e.start)||(n=Wp(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),Wp(e)});for(var s=r.__end.length;s<r.__points.length;s++)r.__end.push(1)}else{Gp(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=Wp(i),r.__end=r.__points.map(function(){return i}))}}else{r.__points=[],r.__controls=[],r.__start=0,r.__end=1,Gp(e.start)||(r.__start=Wp(parseFloat(e.start)||0)),Gp(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=Wp(a))}return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return l(u,[{key:"__getPoints",value:function(a,o,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var n=[],i=0;i<r;i++)i%2==0?n.push(a+t[i]*s):n.push(o+t[i]*h);return n}})}},{key:"buildCache",value:function(e,r){var t,n,i,a,o=this,s=this.width,h=this.height,l=this.points,c=this.controls,u=this.start,_=this.end,f=this.__cacheProps,d=this.isMulti;return Gp(f.points)&&(t=!0,f.points=d?l.map(function(t){if(Array.isArray(t))return o.__getPoints(e,r,s,h,t)}):this.__getPoints(e,r,s,h,l)),Gp(f.controls)&&(t=!0,f.controls=d?c.map(function(t){return Array.isArray(t)?o.__getPoints(e,r,s,h,t,!0):t}):this.__getPoints(e,r,s,h,c,!0)),Gp(f.start)&&(n=!0,f.start=u),Gp(f.end)&&(n=!0,f.end=_),t&&(i=f.points,a=f.controls,f.list2=d?i.filter(function(t){return Array.isArray(t)}).map(function(t,e){var r=a[e];if(Array.isArray(t))return t.map(function(t,e){return e?Yp(t,r&&r[e-1]):t})}):i.filter(function(t){return Array.isArray(t)}).map(function(t,e){return e?Yp(t,a[e-1]):t}),f.len=Up(f.list2,d)),(t||n)&&(f.list=d?f.list2.map(function(t,e){if(Array.isArray(t)){var r=f.len;return Xp(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},f.start[e],f.end[e])}}):Xp(f.list2,f.len,f.start,f.end)),t||n}},{key:"render",value:function(t,e,r,n,i){var a=et(tt(u.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.currentStyle,n=r[Fp],i=r[Bp],a=r[Hp],o=this.isMulti,s=this.__cacheProps;this.buildCache(t,e);var d=et(tt(u.prototype),"bbox",this),h=0;n.forEach(function(t){h=Math.max(t[0],h)});var l=Kt(this.__spreadByBoxShadowAndFilter(i,a),2),p=l[0],v=l[1];p+=h,v+=h;var c=s.points,y=s.controls;return o||(c=[c],y=[y]),c.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=y[e],n=Kt(t[0],2),i=n[0],a=n[1],o=1,s=t.length;o<s;o++){var h,l,c=Kt(t[o],2),u=c[0],_=c[1],f=r[o-1];f&&4===f.length?(h=jt.bboxBezier(i,a,f[0],f[1],f[2],f[3],u,_),d[0]=Math.min(d[0],h[0]-p),d[1]=Math.min(d[1],h[1]-v),d[2]=Math.max(d[2],h[2]+p),d[3]=Math.max(d[3],h[3]+v)):f&&2===f.length?(l=jt.bboxBezier(i,a,f[0],f[1],u,_),d[0]=Math.min(d[0],l[0]-p),d[1]=Math.min(d[1],l[1]-v),d[2]=Math.max(d[2],l[2]+p),d[3]=Math.max(d[3],l[3]+v)):(d[0]=Math.min(d[0],i-p),d[1]=Math.min(d[1],a-v),d[2]=Math.max(d[2],i+p),d[3]=Math.max(d[3],a+v)),i=u,a=_}}),d}}]),u}(),zp=function(){t(s,Vp);var r=e(s);function s(t,e){return g(this,s),r.call(this,t,e)}return l(s,[{key:"__getPoints",value:function(t,e,r,n,i,a){var o=et(tt(s.prototype),"__getPoints",this).call(this,t,e,r,n,i,a);return a||o.push(o[0]),o}}]),s}(),jp=v.STYLE_KEY,$p=jp.STROKE_WIDTH,qp=jp.BOX_SHADOW,Zp=jp.FILTER,Jp=zt.isNil,Qp=jt.sectorPoints;function tv(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var ev=function(){t(I,qu);var n=e(I);function I(t,e){var r;return g(this,I),(r=n.call(this,t,e)).isMulti?(r.__begin=[0],r.__end=[0],r.__r=[1],Array.isArray(e.begin)&&(r.__begin=e.begin.map(function(t){return tv(t,0)})),Array.isArray(e.end)&&(r.__end=e.end.map(function(t){return tv(t,0)})),Array.isArray(e.r)&&(r.__r=e.r.map(function(t){return tv(t,1)})),Array.isArray(e.edge)&&(r.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(r.__closure=e.closure.map(function(t){return!!t}))):(r.__begin=r.__end=0,r.__r=1,r.__edge=!1,r.__closure=!1,Jp(e.begin)||(r.__begin=tv(e.begin,0)),Jp(e.end)||(r.__end=tv(e.end,0)),Jp(e.r)||(r.__r=tv(e.r,1)),Jp(e.edge)||(r.__edge=!!e.edge),Jp(e.closure)||(r.__closure=!!e.closure)),r}return l(I,[{key:"buildCache",value:function(a,o){var t,e,r,s=this.width,n=this.begin,h=this.end,l=this.r,c=this.edge,u=this.closure,_=this.__cacheProps,i=this.isMulti;return Jp(_.begin)&&(t=!0,_.begin=(n||0)%360),Jp(_.end)&&(t=!0,_.end=(h||0)%360),Jp(_.r)&&(t=!0,_.r=i?l.map(function(t){return t*s*.5}):l*s*.5),l=_.r,Jp(_.edge)&&(t=!0,_.edge=c),Jp(_.closure)&&(t=!0,_.closure=u),t&&(i?(_.list=[],_.sList=[],n.forEach(function(t,e){var r=Jp(l[e])?.5*s:l[e],n=Qp(a,o,r,parseFloat(t||0)%360,parseFloat(h[e]||0)%360),i=n.slice(0);u[e]?(n.push(n[0].slice(0)),c&&i.push(i[0].slice(0))):(n.unshift([a,o]),n.push([a,o]),c&&(i.unshift([a,o]),i.push([a,o]))),_.list.push(n),_.sList.push(i)})):(r=(e=Qp(a,o,l,parseFloat(n||0),parseFloat(h||0))).slice(0),u?(e.push(e[0].slice(0)),c&&r.push(r[0].slice(0))):(e.unshift([a,o]),e.push([a,o]),c&&(r.unshift([a,o]),r.push([a,o]))),_.list=e,_.sList=r)),t}},{key:"render",value:function(t,e,r,n,i){var a=et(tt(I.prototype),"render",this).call(this,t,e,r,n,i);if(a.break)return a;this.buildCache(a.cx,a.cy);var o=a.fill,s=a.fillRule,h=a.stroke,l=a.strokeWidth,c=a.strokeDasharray,u=a.strokeDasharrayStr,_=a.strokeLinecap,f=a.strokeLinejoin,d=a.strokeMiterlimit,p=a.dx,v=a.dy,y=this.__cacheProps,g=y.list,m=y.sList,E=this.isMulti;if(o.length<=1&&h.length<=1){var M={fill:o[0],fillRule:s[0],stroke:h[0],strokeWidth:l[0],strokeDasharray:c[0],strokeDasharrayStr:u[0],strokeLinecap:_[0],strokeLinejoin:f[0],strokeMiterlimit:d[0],dx:p,dy:v};this.__renderOneSector(t,r,n,E,g,m,M)}else{for(var O=0,T=o.length;O<T;O++){var A,b=o[O];b&&(A={fill:b,fillRule:s[O],dx:p,dy:v},this.__renderOneSector(t,r,n,E,g,m,A))}for(var x=0,S=h.length;x<S;x++){var R,k=h[x];k&&(R={stroke:k,strokeWidth:l[x],strokeDasharray:c[x],strokeDasharrayStr:u[x],strokeLinecap:_[x],strokeLinejoin:f[x],strokeMiterlimit:d[x],dx:p,dy:v},this.__renderOnePolygon(t,r,n,E,g,m,R))}}return a}},{key:"__renderOneSector",value:function(t,e,r,n,i,a,o){var s=o.fill,h=o.stroke,l=o.strokeWidth,c="conic"===s.k,u="conic"===h.k,_="radial"===s.k&&Array.isArray(s.v),f=0<l&&"radial"===h.k&&Array.isArray(h.v);c||u?(c?this.__conicGradient(t,e,r,i,n,o):s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0),0<l&&u?re.warn("Stroke style can not use conic-gradient"):0<l&&h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0)):_||f?(_?this.__radialEllipse(t,e,r,i,n,o,"fill"):s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0),0<l&&f?(re.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke=o.stroke.v[0],this.__drawPolygon(t,e,r,n,a,o,!1,!0)):0<l&&h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0)):(s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0,!1),h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0))}},{key:"__genSector",value:function(t,e,r,n,i,a,o,s,h){var l,c;t?(l=[["d",e[0]],["fill",r.v||r],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(l,a,o,s,h),this.addGeom("path",l)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<i&&(c=[["d",e[1]],["fill","none"],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(c,a,o,s,h),this.addGeom("path",c)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.currentStyle,s=o[$p],h=o[qp],l=o[Zp],c=r+.5*i,u=n+.5*a;this.buildCache(c,u);var _,f=0,f=t?(_=0,e.r.forEach(function(t){_=Math.max(t,_)}),_):e.r,d=et(tt(I.prototype),"bbox",this),p=0;s.forEach(function(t){p=Math.max(t[0],p)});var v=Kt(this.__spreadByBoxShadowAndFilter(h,l),2),y=v[0],g=v[1],m=c-f-(y+=p),E=c+f+y,M=u-f-(g+=p),O=u+f+g;return d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],M),d[2]=Math.max(d[2],E),d[3]=Math.max(d[3],O),d}}]),I}(),rv=v.STYLE_KEY,nv=rv.STROKE_WIDTH,iv=rv.BOX_SHADOW,av=rv.FILTER,ov=zt.isNil;function sv(t,e,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;if(0===o||0===s)return[[t,e],[t+r,e],[t+r,e+n],[t,e+n],[t,e]];var h=o*jt.H,l=s*jt.H;return[[t+o,e],[t+r-o,e],[t+r+h-o,e,t+r,e+s-l,t+r,e+s],[t+r,e+n-s],[t+r,e+n+l-s,t+r+h-o,e+n,t+r-o,e+n],[t+o,e+n],[t+o-h,e+n,t,e+n+l-s,t,e+n-s],[t,e+s],[t,e+s-l,t+o-h,e,t+o,e]]}function hv(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var lv=function(){t(f,qu);var n=e(f);function f(t,e){var r;return g(this,f),(r=n.call(this,t,e)).isMulti?(r.__rx=[0],r.__ry=[0],Array.isArray(e.rx)&&(r.__rx=e.rx.map(hv)),Array.isArray(e.ry)&&(r.__ry=e.ry.map(hv))):(r.__rx=r.__ry=0,ov(e.rx)||(r.__rx=hv(e.rx)),ov(e.ry)||(r.__ry=hv(e.ry))),r}return l(f,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return ov(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),ov(l.ry)&&(t=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(h,.5)*o),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return sv(r,n,a,o,t,i[e])}):sv(r,n,a,o,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=et(tt(f.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.width,n=this.height,i=this.currentStyle,a=i[nv],o=i[iv],s=i[av];this.buildCache(t,e);var h=et(tt(f.prototype),"bbox",this),l=0;a.forEach(function(t){l=Math.max(t[0],l)});var c=Kt(this.__spreadByBoxShadowAndFilter(o,s),2),u=c[0],_=c[1];return u+=l,_+=l,h[0]=Math.min(h[0],t-u),h[1]=Math.min(h[1],e-_),h[2]=Math.max(h[2],t+r+u),h[3]=Math.max(h[3],e+n+_),h}}]),f}(),cv=v.STYLE_KEY,uv=cv.STROKE_WIDTH,_v=cv.BOX_SHADOW,fv=cv.FILTER,dv=zt.isNil;function pv(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var vv=function(){t(T,qu);var n=e(T);function T(t,e){var r;return g(this,T),(r=n.call(this,t,e)).isMulti?(r.__r=[1],Array.isArray(e.r)?r.__r=e.r.map(pv):dv(e.r)||(r.__r=pv(e.r))):(r.__r=1,dv(e.r)||(r.__r=pv(e.r))),r}return l(T,[{key:"buildCache",value:function(e,r){var n=this.width,t=this.r,i=this.__cacheProps,a=this.isMulti;dv(i.r)&&(a?(i.r=t.map(function(t){return t*n*.5}),i.list=i.r.map(function(t){return jt.ellipsePoints(e,r,t)})):(i.r=t*n*.5,i.list=jt.ellipsePoints(e,r,i.r)))}},{key:"render",value:function(t,e,r,n,i){var a=et(tt(T.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx3,n=this.__sy3,i=this.width,a=this.height,o=this.currentStyle,s=o[uv],h=o[_v],l=o[fv],c=r+.5*i,u=n+.5*a;this.buildCache(c,u);var _,f=0,f=t?(_=0,e.r.forEach(function(t){_=Math.max(t,_)}),_):e.r,d=et(tt(T.prototype),"bbox",this),p=0;s.forEach(function(t){p=Math.max(t[0],p)});var v=Kt(this.__spreadByBoxShadowAndFilter(h,l),2),y=v[0],g=v[1],m=c-f-(y+=p),E=c+f+y,M=u-f-(g+=p),O=u+f+g;return d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],M),d[2]=Math.max(d[2],E),d[3]=Math.max(d[3],O),d}}]),T}(),yv=v.STYLE_KEY,gv=yv.STROKE_WIDTH,mv=yv.BOX_SHADOW,Ev=yv.FILTER,Mv=zt.isNil;function Ov(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var Tv=function(){t(b,qu);var n=e(b);function b(t,e){var r;return g(this,b),(r=n.call(this,t,e)).isMulti?(r.__rx=[1],r.__ry=[1],Array.isArray(e.rx)?r.__rx=e.rx.map(Ov):Mv(e.rx)||(r.__rx=[Ov(e.rx)]),Array.isArray(e.ry)?r.__ry=e.ry.map(Ov):Mv(e.ry)||(r.__ry=[Ov(e.ry)])):(r.__rx=1,Mv(e.rx)||(r.__rx=Ov(e.rx)),r.__ry=1,Mv(e.ry)||(r.__ry=Ov(e.ry))),r}return l(b,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return Mv(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return t*a*.5}):s*a*.5),Mv(l.ry)&&(t=!0,l.ry=c?h.map(function(t){return t*o*.5}):h*o*.5),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return jt.ellipsePoints(r,n,t,i[e])}):jt.ellipsePoints(r,n,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=et(tt(b.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.isMulti,r=this.__cacheProps,e=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.currentStyle,s=o[gv],h=o[mv],l=o[Ev],c=e+.5*i,u=n+.5*a;this.buildCache(c,u);var _,f,d=0,p=0,p=t?(f=_=0,r.rx.forEach(function(t,e){_=Math.max(t,_),f=Math.max(p,r.ry[e])}),d=_,f):(d=r.rx,r.ry),v=et(tt(b.prototype),"bbox",this),y=0;s.forEach(function(t){y=Math.max(t[0],y)});var g=Kt(this.__spreadByBoxShadowAndFilter(h,l),2),m=g[0],E=g[1],M=c-d-(m+=y),O=c+d+m,T=u-p-(E+=y),A=u+p+E;return v[0]=Math.min(v[0],M),v[1]=Math.min(v[1],T),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),b}(),Av={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp"},bv={},xv={value:"v",options:"o"},Sv={},Rv={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},kv={};Dt.DOM_KEY_SET.concat(Dt.GEOM_KEY_SET).forEach(function(t){var e;Av.hasOwnProperty(t)?bv[Av[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),Av[t]=e,bv[e]=t)}),Object.keys(xv).forEach(function(t){Sv[xv[t]]=t}),Object.keys(Rv).forEach(function(t){kv[Rv[t]]=t});var Iv={fullCssProperty:Av,abbrCssProperty:bv,fullAnimate:xv,abbrAnimate:Sv,fullAnimateOption:Rv,abbrAnimateOption:kv},Nv=k.TYPE_VD,wv=k.TYPE_GM,Cv=k.TYPE_CP,Dv=zt.isNil,Pv=zt.isFunction,Lv=zt.isPrimitive,Fv=zt.clone,Bv=zt.extend,Hv=Iv.abbrCssProperty,Gv=Iv.abbrAnimateOption,Yv=Iv.abbrAnimate;function Wv(i,a){i&&Object.keys(i).forEach(function(t){var e,r,n;0===t.indexOf("var-")?(e=t.slice(4),a.hasOwnProperty(e)&&(r=a[e],i["var-"+r]=i[t])):a.hasOwnProperty(t)&&(n=a[t],i[n]=i[t],delete i[t])})}function Uv(s,h){s&&h&&Object.keys(s).forEach(function(t){if(0===t.indexOf("var-")){var e=s[t];if(!e)return;var r=t.slice(4);if(e.id&&h.hasOwnProperty(e.id)){var n=h[e.id];if(void 0===n)return;if(-1<r.indexOf(".")){for(var i=r.split("."),a=i.length,o=0;o<a-1;o++)r=i[o],s[r]?s=s[r]:re.error("parseJson vars is not exist: "+e.id+", "+t+", "+i.slice(0,o).join("."));r=i[a-1]}Pv(n)&&(n=n(e)),s[r]=n}}})}function Kv(e,r){e.tagName=r.tagName,e.props=Fv(r.props),e.children=r.children,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,n,i=e.init;i&&(n=(t=e.props=e.props||{}).style,Bv(t,i),n&&(Bv(n,i.style),t.style=n),e.init=null)}function Xv(r,t,n,i,e){var a=4<arguments.length&&void 0!==e?e:{};if(Lv(t)||t instanceof S)return t;if(Array.isArray(t))return t.map(function(t){return Xv(r,t,n,i,a)});var o=t.library,s=t.libraryId;if(Array.isArray(o))a={},o.forEach(function(t){!function(t,n){var e=t.id,r=t.children;if(Array.isArray(r)&&r.forEach(function(t){if(!Lv(t)){var e=t.libraryId;if(Dv(e))return;var r=n[e];if(!r)throw new Error("Link library item miss libraryId: "+e);Kv(t,r)}}),Dv(e))throw new Error("Library item miss id: "+JSON.stringify(t));n[e]=t}(t,a)}),t.library=null,t.libraryId=null;else if(!Dv(s)&&a){var h=a[s];if(!h)throw new Error("Link library miss id: "+s);Kv(t,h)}var l=t.tagName,c=t.props,u=void 0===c?{}:c,_=t.children,f=void 0===_?[]:_,d=t.animate,p=void 0===d?[]:d,v=t.__animateRecords;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var y,g,m,E,M,O=u.style;return Wv(O,Hv),Uv(O,i),Uv(u,i),Uv(t,i),y="$"===l.charAt(0)?r.createGm(l,u):r.createVd(l,u,f.map(function(t,e){return t&&-1<[Nv,wv,Cv].indexOf(t.$$type)?t:Xv(r,t,n,i,a)})),v&&(y.__animateRecords=v),p&&(Array.isArray(p)?(p.forEach(function(t){Wv(t,Yv);var e=t.value,r=t.options;Array.isArray(e)&&e.length&&(m=!0,e.forEach(function(t){Wv(t,Hv),Uv(t,i)})),r&&(Wv(r,Gv),Uv(r,i))}),m&&(g={animate:p,target:y})):(Wv(p,Yv),E=p.value,M=p.options,Array.isArray(E)&&E.length&&(E.forEach(function(t){Wv(t,Hv),Uv(t,i)}),g={animate:p,target:y}),M&&(Wv(M,Gv),Uv(M,i)))),g&&n.push(g),y}var Vv={parse:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:{};e=zt.clone(e),re.isDom(r)||(i=r||{},r=null);var a=[],o=Xv(t,e,a,i.vars);if(r){var s=e.tagName;if(-1===["canvas","svg"].indexOf(s))throw new Error("Parse dom must be canvas/svg");var h=i.controller instanceof H_?i.controller:o.animateController;t.render(o,r),a.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(h.__auto=h.__auto.concat(a),h.__playAuto()):h.__records=h.__records.concat(a)}else a.length&&(o.__animateRecords={options:i,list:a,controller:i.controller instanceof H_?i.controller:null});return o},abbr:Iv},zv={css:cn,reset:Dt,unit:x,font:R},jv={Animation:mo,Controller:H_,easing:Ui,frame:wi},$v={level:Ro,change:Re,Page:Co,Cache:Uo};qu.register("$line",Pp),qu.register("$polyline",Vp),qu.register("$polygon",zp),qu.register("$sector",ev),qu.register("$rect",lv),qu.register("$circle",vv),qu.register("$ellipse",Tv);var qv={version:"0.51.3",render:function(t,e){if(!(t instanceof bp))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],n=2,i=arguments.length;n<i;n++)r.push(arguments[n]);return zt.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];if(-1<["canvas","svg"].indexOf(t))return new bp(t,e,n);if(Rl.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:n,$$type:k.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:k.TYPE_GM}},createCp:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];return e.children=n,{klass:t,props:e,$$type:k.TYPE_CP}},parse:function(t,e,r){return Vv.parse(this,t,e,r)},mode:Xt,Component:Sl,Node:S,Text:kn,Geom:qu,Xom:_l,Dom:Tc,Img:ru,Root:bp,Event:Ri,util:zt,inject:re,style:zv,parser:Vv,animate:jv,math:Pn,builder:Ol,updater:v_,refresh:$v,enums:v};return Ol.ref({Xom:_l,Dom:Tc,Img:ru,Geom:qu,Component:Sl}),v_.ref({Xom:_l,Dom:Tc,Img:ru,Geom:qu,Component:Sl}),"undefined"!=typeof window&&(window.karas=qv),qv});
//# sourceMappingURL=index.min.js.map
