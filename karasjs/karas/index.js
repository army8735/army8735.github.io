!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}function Z(t,e,i){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw a}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function oe(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var x=function(){function t(){s(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__prev=null,this.__next=null,this.__parent=null,this.__host=null,this.__virtualDom={}}return h(t,[{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t}},{key:"__destroy",value:function(){this.__isDestroyed=!0,this.__parent=null}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),t}(),e={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7},o={arial:{lhr:1.14990234375,car:1.1171875,blr:.9052734375}},c={}.toString;function d(e){return function(t){return c.call(t)==="[object "+e+"]"}}function _(t){return p(t)?"":t.toString()}function p(t){return null==t}function v(t){if("item"===t.type||"img"===t.type){var e="";return t.props.forEach(function(t){e+=" ".concat(t[0],'="').concat(t[1],'"')}),"text"===t.tagName?"<text".concat(e,">").concat(t.content,"</text>"):"<".concat(t.tagName).concat(e,"/>")}if("text"===t.type){var i="";return t.children.forEach(function(t){i+=v(t)}),"<g>".concat(i,"</g>")}if("dom"===t.type||"geom"===t.type){var r="<g";t.bbMask&&(r+=' mask="'.concat(t.bbMask,'"')),r+=">",t.bb.forEach(function(t){r+=v(t)}),r+="</g><g>",t.children.forEach(function(t){t.isMask||(r+=v(t))}),r+="</g>";var n=t.opacity,a=t.transform,o=t.mask;return"<g".concat(1!==n?' opacity="'.concat(n,'"'):"").concat(a?' transform="'.concat(a,'"'):"").concat(o?' mask="'.concat(o,'"'):"",">").concat(r,"</g>")}}function y(t){var r="<".concat(t.tagName,' id="').concat(t.uuid,'"');return"mask"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),t.props.forEach(function(t){r+=" ".concat(t[0],'="').concat(t[1],'"')}),r+=">",t.children.forEach(function(t){var e,i;r+=(i="<".concat((e=t).tagName),e.props.forEach(function(t){i+=" ".concat(t[0],'="').concat(t[1],'"')}),i+="></".concat(e.tagName,">"))}),r+="</".concat(t.tagName,">")}var se={isObject:d("Object"),isString:d("String"),isFunction:d("Function"),isNumber:d("Number"),isBoolean:d("Boolean"),isDate:d("Date"),isNil:p,isPrimitive:function(t){return se.isNil(t)||se.isBoolean(t)||se.isString(t)||se.isNumber(t)},stringify:_,joinSourceArray:function(t){return function t(e){for(var i="",r=0,n=e.length;r<n;r++){var a=e[r];Array.isArray(a)?i+=t(a):i+=_(a)}return i}(t)},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=y(t)}),e+="</defs><g",t.bbMask&&(e+=' mask="'.concat(t.bbMask,'"')),e+=">",t.bb.forEach(function(t){e+=v(t)}),e+="</g><g>",t.children.forEach(function(t){t.isMask||(e+=v(t))}),e+="</g>"},joinVd:v,joinDef:y,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];if(t&&"transparent"!==t)if("#"===t.charAt(0))3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16))):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16))):e[0]=e[1]=e[2]=0,e[3]=1;else{var i=t.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d.]+))?\s*\)/i);i?(e=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],p(i[4])?e[3]=1:e[3]=parseFloat(i[4])):e=[0,0,0,0]}else e=[0,0,0,0];return e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba(".concat(t.join(","),")");if(3===t.length)return"rgba(".concat(t.join(","),",1)")}return t||"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n))e[n[0]]=n[1];else for(var a=Object.keys(n),o=a.length-1;0<=o;o--){var s=a[o];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],i=Object.keys(t),r=0,n=i.length;r<n;r++){var a=i[r];e.push([a,t[a]])}return e},clone:function e(i){if(p(i)||"object"!==n(i))return i;if(se.isDate(i))return new Date(i);var r=Array.isArray(i)?[]:{};return Object.keys(i).forEach(function(t){r[t]=e(i[t])}),r},equalArr:function t(e,i){if(e.length!==i.length)return!1;for(var r=0,n=e.length;r<n;r++){var a=e[r],o=i[r],s=Array.isArray(a),h=Array.isArray(o);if(s&&h){if(!t(a,o))return!1}else if(s||h)return!1;if(a!==o)return!1}return!0},extend:function(t,e){if(null===e||"object"!==n(e))return t;for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t}},S={position:/((-?[\d.]+(px|%)?)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};function k(t,e,i,r){return t*r-i*e}var w={vectorProduct:k,pointInLine:function(t,e,i,r,n,a){return t===i&&e===r||t===n&&e===a||(0===i&&0===r||(t-=i,e-=r,n-=i,a-=a),e===a/n*t&&(0<=n?0<=a?0<=t&&0<=e&&t<=n&&e<=a:0<=t&&e<0&&t<=n&&a<e:0<=a?t<0&&0<=e&&n<t&&e<=a:t<0&&e<0&&n<t&&a<e))},pointInPolygon:function(t,e,i){for(var r=ae(i[0],2),n=r[0],a=r[1],o=ae(i[0],2),s=o[0],h=o[1],u=i.length,l=1;l<u;l++){var c=ae(i[l],2),f=c[0],d=c[1];n=Math.max(n,f),a=Math.max(a,d),s=Math.min(s,f),h=Math.min(h,d)}if(t<s||e<h||n<t||a<e)return!1;for(var _=0,p=i.length;_<p;_++){var v=ae(i[_],2),y=v[0],g=v[1],m=ae(i[(_+1)%p],2);if(k(m[0]-y,m[1]-g,t-y,e-g)<0)return!1}return!0},transformPoint:function(t,e,i){var r=ae(t,6),n=r[0],a=r[1],o=r[2],s=r[3];return[n*e+o*i+r[4],a*e+s*i+r[5]]},d2r:function(t){return t*Math.PI/180},r2d:function(t){return 180*t/Math.PI},H:4*(Math.sqrt(2)-1)/3},te=se.rgba2int,ee=se.int2rgba,g=e.PX,ie=e.PERCENT,m=w.d2r;function b(t,e){for(var i=[],r=0,n=t.length;r<n;r++){var a=t[r];if(1<a.length){var o=ee(a[0]),s=a[1];s.unit===ie?i.push([o,.01*s.value]):i.push([o,s.value/e])}else i.push([ee(a[0])])}if(1===i[0].length&&i[0].push(0),1<i.length){var h=i.length-1;1===i[h].length&&i[h].push(1)}for(var u=i[0][1],l=1,c=i.length;l<c-1;l++){var f=i[l];if(1<f.length)u=f[1];else{for(var d=l+1,_=i[i.length-1][1];d<c-1;d++){var p=i[d];if(1<p.length){_=p[1];break}}for(var v=(_-u)/(d-l+1),y=l;y<d;y++){i[y].push(u+v*(y+1-l))}l=d}}for(var g=1,m=i.length;g<m;g++){var k=i[g],b=i[g-1];k[1]<b[1]&&(k[1]=b[1])}for(var x=0,w=i.length;x<w-1;x++){if(1<i[x][1]){i.splice(x+1);break}}for(var A=i.length-1;0<A;A--){if(i[A][1]<0){i.splice(0,A);break}}var S,M,E,T,R,P,C,O,L,W,N,F,D,I,B,H,z,G,X,j,Y,V,$,q,U,Z,Q,J,K,tt,et,it,rt,nt,at,ot,st,ht,ut,lt,ct,ft,dt,_t,pt,vt,yt,gt,mt,kt,bt,xt,wt,At,St,Mt,Et,Tt,Rt,Pt,Ct,Ot,Lt,Wt,Nt,Ft,Dt,It,Bt=i.length;if(1===Bt)i[0][1]=0;else{for(var Ht=!0,zt=!0,Gt=Bt-1;0<=Gt;Gt--){var Xt=i[Gt][1];0<Xt&&(Ht=!1),Xt<1&&(zt=!1)}if(Ht)i.splice(0,Bt-1),i[0][1]=0;else if(zt)i.splice(1),i[0][1]=0;else{var jt=i[0],Yt=i[Bt-1];if(2===Bt)jt[1]<0&&1<Yt[1]&&(vt=Yt,yt=e,gt=te((pt=jt)[0]),mt=te(vt[0]),kt=ae(gt,4),bt=kt[0],xt=kt[1],wt=kt[2],At=kt[3],St=void 0===At?1:At,Mt=ae(mt,4),Et=Mt[0],Tt=Mt[1],Rt=Mt[2],Pt=Mt[3],Ct=void 0===Pt?1:Pt,Ot=Math.abs(pt[1])*yt,Lt=vt[1]*yt,Wt=Ot/(Ot+Lt),Nt=Math.floor(bt+(Et-bt)*Wt),Ft=Math.floor(xt+(Tt-xt)*Wt),Dt=Math.floor(wt+(Rt-wt)*Wt),It=St+(Ct-St)*Wt,pt[0]="rgba(".concat(Nt,",").concat(Ft,",").concat(Dt,",").concat(It,")"),pt[1]=0,Wt=(yt+Ot)/(Ot+Lt),Nt=Math.floor(bt+(Et-bt)*Wt),Ft=Math.floor(xt+(Tt-xt)*Wt),Dt=Math.floor(wt+(Rt-wt)*Wt),It=St+(Ct-St)*Wt,vt[0]="rgba(".concat(Nt,",").concat(Ft,",").concat(Dt,",").concat(It,")"),vt[1]=1);else{if(jt[1]<0){var Vt=i[1],$t=te(jt[0]),qt=te(Vt[0]),Ut=($=$t,q=jt[1],U=qt,Z=Vt[1],Q=e,J=ae($,4),K=J[0],tt=J[1],et=J[2],it=J[3],rt=void 0===it?1:it,nt=ae(U,4),at=nt[0],ot=nt[1],st=nt[2],ht=nt[3],ut=void 0===ht?1:ht,lt=Math.abs(q)*Q,ct=lt/(Z*Q+lt),ft=Math.floor(K+(at-K)*ct),dt=Math.floor(tt+(ot-tt)*ct),_t=Math.floor(et+(st-et)*ct),[ft,dt,_t,rt+(ut-rt)*ct]);jt[0]="rgba(".concat(Ut[0],",").concat(Ut[1],",").concat(Ut[2],",").concat(Ut[3],")"),jt[1]=0}if(1<Yt[1]){var Zt=i[Bt-2],Qt=te(Zt[0]),Jt=te(Yt[0]),Kt=(S=Qt,M=Zt[1],E=Jt,T=Yt[1],R=e,P=ae(S,4),C=P[0],O=P[1],L=P[2],W=P[3],N=void 0===W?1:W,F=ae(E,4),D=F[0],I=F[1],B=F[2],H=F[3],z=void 0===H?1:H,X=(R-(G=M*R))/(T*R-G),j=Math.floor(C+(D-C)*X),Y=Math.floor(O+(I-O)*X),V=Math.floor(L+(B-L)*X),[j,Y,V,N+(z-N)*X]);Yt[0]="rgba(".concat(Kt[0],",").concat(Kt[1],",").concat(Kt[2],",").concat(Kt[3],")"),Yt[1]=1}}}}return i.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),i}var M={parseGradient:function(t){var e=S.gradient.exec(t);if(e){var i={k:e[1]},r=/(-?[\d.]+deg)|(to\s+[toprighbml]+)|circle|ellipse|at|closest|farthest|((closest|farthest)-(side|corner))/.exec(e[2]),n=e[2].match(/((#[0-9a-f]{3,6})|(rgba?\(.+?\)))\s*(-?[\d.]+(px|%))?/gi);if(i.v=n.map(function(t){var e=/((?:#[0-9a-f]{3,6})|(?:rgba?\(.+?\)))\s*(-?[\d.]+(?:px|%))?/i.exec(t),i=[te(e[1])];return e[2]&&(/%$/.test(e[2])?i[1]={value:parseFloat(e[2]),unit:ie,str:e[2]}:i[1]={value:parseFloat(e[2]),unit:g,str:e[2]}),i}),r){var a=e[2].indexOf(",");"linear"===i.k?i.d=function(t){var e=180;if("to top"===t)e=0;else if("to top right"===t)e=45;else if("to right"===t)e=90;else if("to bottom right"===t)e=135;else if("to bottom"!==t)if("to bottom left"===t)e=225;else if("to left"===t)e=270;else if("to top left"===t)e=315;else{var i=/(-?[\d.]+)deg/.exec(t);i&&(e=parseFloat(i[1]))}return e%360}(e[2].slice(0,a)):i.d=e[2].slice(0,a)}else"linear"===i.k?i.d=180:i.d="farthest-corner";return i}},getLinear:function(t,e,i,r,n,a){var o=m(e),s=Math.abs(n*Math.sin(o))+Math.abs(a*Math.cos(o)),h=ae(function(t,e,i,r){var n,a,o,s;if(270<=t){var h=m(360-t);n=i+Math.sin(h)*e,a=r+Math.cos(h)*e,o=i-Math.sin(h)*e,s=r-Math.cos(h)*e}else if(180<=t){var u=m(t-180);n=i+Math.sin(u)*e,a=r-Math.cos(u)*e,o=i-Math.sin(u)*e,s=r+Math.cos(u)*e}else if(90<=t){var l=m(180-t);n=i-Math.sin(l)*e,a=r-Math.cos(l)*e,o=i+Math.sin(l)*e,s=r+Math.cos(l)*e}else{var c=m(t);n=i-Math.sin(c)*e,a=r+Math.cos(c)*e,o=i+Math.sin(c)*e,s=r-Math.cos(c)*e}return[n,a,o,s]}(e,.5*s,i,r),4);return{x1:h[0],y1:h[1],x2:h[2],y2:h[3],stop:b(t,s)}},getRadial:function(t,e,i,r,n,a,o,s){var h=o-n,u=s-a,l=ae(function(t,e,i,r,n,a,o,s,h){var u,l,c,f="farthest-corner";if(/circle|ellipse|at|closest|farthest/i.test(t)){var d,_=t.indexOf("at"),p=t;if(-1<_&&(d=t.slice(_+2),p=t.slice(0,_-1)),(p=/(closest|farthest)-(side|corner)/.exec(p))?f=p[0]:(p=/\s+(-?[\d.]+(?:px|%))\s*(-?[\d.]+(?:px|%))?/.exec(p))&&(f=null,u=-1<p[1].indexOf("px")?.5*parseFloat(p[1]):parseFloat(p[1])*e*.005),d&&(p=/\s+(-?[\d.]+(?:px|%))\s*(-?[\d.]+(?:px|%))?/.exec(d))){r=-1<p[1].indexOf("px")?a+parseFloat(p[1]):a+parseFloat(p[1])*e*.01;var v=p[2]||p[1];n=-1<v.indexOf("px")?o+parseFloat(v):o+parseFloat(v)*i*.01}}if(f)if("closest-side"===f)u=r<=a||s<=r||n<=o||h<=n?0:(l=r<a+.5*e?r-a:s-r,c=n<o+.5*i?n-o:h-n,Math.min(l,c));else if("closest-corner"===f){var y,g;y=r<a+.5*e?r-a:s-r,g=n<o+.5*i?n-o:h-n,u=Math.sqrt(Math.pow(y,2)+Math.pow(g,2))}else if("farthest-side"===f)if(r<=a)u=a-r+e;else if(s<=r)u=r-s+e;else if(n<=o)u=o-n+i;else if(h<=r)u=n-h+i;else{var m=Math.max(s-r,r-a),k=Math.max(h-n,n-o);u=Math.max(m,k)}else{var b,x;b=r<a+.5*e?s-r:r-a,x=n<o+.5*i?h-n:n-o,u=Math.sqrt(Math.pow(b,2)+Math.pow(x,2))}return[u,r,n]}(e,h,u,i,r,n,a,o,s),3),c=l[0],f=l[1],d=l[2],_=b(t,2*c);if(c<=0){var p=_[_.length-1];p[1]=0,_=[p],f=n,d=a,c=h+u}return{cx:f,cy:d,r:c,stop:_}}},E=e.AUTO,T=e.PX,R=e.PERCENT,P=e.NUMBER,C=e.INHERIT,A=e.DEG,O=e.RGBA,L=e.STRING,W=se.isNil,N=se.rgba2int,F=se.int2rgba;function D(t,e,i,r){W(t.flexGrow)&&(t.flexGrow=e),W(t.flexShrink)&&(t.flexShrink=i),W(t.flexBasis)&&(t.flexBasis=r)}function I(i,r){var t=i[r];if(t){var n=t.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi);n&&(1===n.length?n[3]=n[2]=n[1]=n[0]:2===n.length?(n[2]=n[0],n[3]=n[1]):3===n.length&&(n[3]=n[1]),["Top","Right","Bottom","Left"].forEach(function(t,e){W(i[t=r+t])&&(i[t]=n[e])})),delete i[r]}}function B(t,e,i){return"auto"===i?t[e]={unit:E}:"inherit"===i?t[e]={unit:C}:/%$/.test(i)?(i=parseFloat(i)||0,t[e]={value:i,unit:R}):/px$/.test(i)?(i=parseFloat(i)||0,t[e]={value:i,unit:T}):/deg$/.test(i)?(i=parseFloat(i)||0,t[e]={value:i,unit:A}):(i=parseFloat(i)||0,t[e]={value:i,unit:P}),0===e.toString().indexOf("border")&&(t[e].value=Math.max(t[e].value,0)),t}function H(t,e){-1<t.indexOf("scale")?e.unit=P:-1<t.indexOf("translate")?e.unit===P&&(e.unit=T):e.unit===P&&(e.unit=A)}function z(t,e){var i=t.animateStyle,r=t.computedStyle,n=t.__currentStyle=i,a=e?null:t.parent.computedStyle,o=n.fontStyle,s=n.fontWeight,h=n.color;o.unit===C?r.fontStyle=e?"normal":a.fontStyle:r.fontStyle=o.value,s.unit===C?r.fontWeight=e?400:a.fontWeight:r.fontWeight=s.value,h.unit===C?r.color=e?"rgba(0,0,0,1)":a.color:r.color=F(h.value),["visibility","opacity","zIndex","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundRepeat"].forEach(function(t){r[t]=n[t]}),["backgroundColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"].forEach(function(t){r[t]=F(n[t].value)})}function G(t){return t.fontSize*o.arial.lhr}function X(t,e,i){for(t*=.01;e;){var r=e.currentStyle[i];if(r.unit===E){if("width"!==i)break;e=e.parent}else{if(r.unit===T)return t*r.value;r.unit===R&&(t*=.01*r.value,e=e.parent)}}return t}var j={normalize:function(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=r.border;if(i&&(["Top","Right","Bottom","Left"].forEach(function(t){W(r[t="border"+t])&&(r[t]=i)}),delete r.border),["Top","Right","Bottom","Left"].forEach(function(t){!function(t,e){var i="border".concat(e),r=t[i];if(!W(r)){if(W(t[i+"Width"])){var n=/\b[\d.]+px\b/i.exec(r);t[i+"Width"]=n?n[0]:0}if(W(t[i+"Style"])){var a=/\b(solid|dashed|dotted)\b/i.exec(r);t[i+"Style"]=a?a[1]:"solid"}if(W(t[i+"Color"])){var o=/#[0-9a-f]{3,6}/i.exec(r);o&&-1<[4,7].indexOf(o[0].length)?t[i+"Color"]=o[0]:/\btransparent\b/i.test(r)?t[i+"Color"]="transparent":(o=/rgba?\(.+\)/i.exec(r),t[i+"Color"]=o?o[0]:"transparent")}}}(r,t)}),(i=r.borderWidth)&&(["Top","Right","Bottom","Left"].forEach(function(t){W(r[t="border"+t+"Width"])&&(r[t]=i)}),delete r.borderWidth),(i=r.borderColor)&&(["Top","Right","Bottom","Left"].forEach(function(t){W(r[t="border"+t+"Color"])&&(r[t]=N(i))}),delete r.borderColor),(i=r.borderStyle)&&(["Top","Right","Bottom","Left"].forEach(function(t){W(r[t="border"+t+"Style"])&&(r[t]=i)}),delete r.borderStyle),(i=r.borderRadius)&&(["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){W(r[t="border"+t+"Radius"])&&(r[t]=i)}),delete r.borderRadius),i=r.background){if(W(r.backgroundImage)){var e=S.gradient.exec(i);if(e)r.backgroundImage=e[0],i=i.replace(e[0],"");else{var n=S.img.exec(i);n&&(r.backgroundImage=n[0],i=i.replace(n[0],""))}}if(W(r.backgroundRepeat)){var a=/(no-)?repeat(-[xy])?/i.exec(i);a&&(r.backgroundRepeat=a[0].toLowerCase())}if(W(r.backgroundColor)){var o=/^(transparent)|(#[0-9a-f]{3,6})|(rgba?\(.+?\))/i.exec(i);o&&(r.backgroundColor=o[0],i=i.replace(o[0],""))}if(W(r.backgroundPosition)){var s=i.match(S.position);s&&(r.backgroundPosition=s.join(" "))}delete r.background}if(i=r.backgroundPosition,!W(i)){1===(i=i.toString().split(/\s+/)).length&&(i[1]="50%");var h=ae(i,2);r.backgroundPositionX=h[0],r.backgroundPositionY=h[1],delete r.backgroundPosition}if(i=r.flex){if("none"===i)D(r,0,0,"auto");else if("auto"===i)D(r,1,1,"auto");else if(/^[\d.]+$/.test(i))D(r,Math.max(0,parseFloat(i)),1,0);else if(/^[\d.]+px$/.test(i))D(r,1,1,0);else if(/^[\d.]+%$/.test(i))D(r,1,1,i);else if(/^[\d.]+\s+[\d.]+$/.test(i)){var u=i.split(/\s+/);D(r,u[0],u[1],0)}else if(/^[\d.]+\s+[\d.]+%$/.test(i)){var l=i.split(/\s+/);D(r,l[0],1,l[1])}else D(r,0,1,"auto");delete r.flex}if(I(r,"margin"),I(r,"padding"),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e=r[t];!W(e)&&r.transform&&console.error('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,i=t.v;W(r[e])&&(r[e]=i)}),(i=r.backgroundImage)&&(S.gradient.test(i)?r.backgroundImage=M.parseGradient(i):S.img.test(i)&&(r.backgroundImage=S.img.exec(i)[2])),i=r.backgroundColor){var c=/^#[0-9a-f]{3,6}/i.exec(i);c&&-1<[4,7].indexOf(c[0].length)?r.backgroundColor={value:N(c[0]),unit:O}:(c=/rgba?\(.+\)/i.exec(i),r.backgroundColor={value:N(c?c[0]:[0,0,0,0]),unit:O})}if(["backgroundPositionX","backgroundPositionY"].forEach(function(t){i=r[t],W(i)||(/%$/.test(i)||/px$/.test(i)||/^-?[\d.]+$/.test(i)?(B(r,t,i),(i=r[t]).unit===P&&(i.unit=T)):r[t]={value:{top:0,left:0,center:50,right:100,bottom:100}[i],unit:R})}),i=r.backgroundSize){var f=i.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(f){1===f.length&&(f[1]=f[0]);for(var d=[],_=0;_<2;_++){var p=f[_];/%$/.test(p)||/px$/.test(p)||/^-?[\d.]+$/.test(p)?(B(d,_,p),d[_].unit===P&&(d[_].unit=T)):"0"===p||0===p?d.push({value:0,unit:T}):"contain"===p||"cover"===p?d.push({value:p,unit:L}):d.push({unit:E})}r.backgroundSize=d}}if(["Top","Right","Bottom","Left"].forEach(function(t){var e=r[t="border"+t+"Color"];W(e)||(r[t]={value:N(e),unit:O})}),i=r.transform){var v=i.toString().match(/\w+\(.+?\)/g);if(v){var y=[];v.forEach(function(t){var e=t.indexOf("("),i=t.slice(0,e),r=t.slice(e+1,t.length-1);if("matrix"===i){var n=r.toString().split(/\s*,\s*/);6<(n=n.map(function(t){return parseFloat(t)})).length&&(n=n.slice(0,6)),6===n.length&&y.push(["matrix",n])}else if({translateX:!0,translateY:!0,scaleX:!0,scaleY:!0,skewX:!0,skewY:!0,rotate:!0,rotateZ:!0}.hasOwnProperty(i)){"rotate"===i&&(i="rotateZ");var a=B([i,r],1,r);H(i,a[1]),y.push(a)}else if({translate:!0,scale:!0,skew:!0}.hasOwnProperty(i)){var o=r.toString().split(/\s*,\s*/);1===o.length&&(o[1]=o[0]);var s=B(["".concat(i,"X"),o[0]],1,o[0]),h=B(["".concat(i,"Y"),o[1]],1,o[1]);H(i,s[1]),H(i,h[1]),y.push(s),y.push(h)}}),r.transform=y}}if(i=r.transformOrigin,!W(i)){var g=i.toString().match(S.position);if(g){1===g.length&&(g[1]=g[0]);for(var m=[],k=0;k<2;k++){var b=g[k];/%$/.test(b)||/px$/.test(b)||/^-?[\d.]+$/.test(b)?(B(m,k,b),m[k].unit===P&&(m[k].unit=T)):(m.push({value:{top:0,left:0,center:50,right:100,bottom:100}[b],unit:R}),W(m[k].value)&&(m[k].value=50))}r.transformOrigin=m}}if(["translate","scale","skew"].forEach(function(t){if(i=r[t],!W(i)){var e=i.toString().split(/\s*,\s*/);1===e.length&&(e[1]=e[0]),r["".concat(t,"X")]=e[0],r["".concat(t,"Y")]=e[1],delete r[t]}}),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e=r[t];W(e)||(B(r,t,e),"rotate"===t&&(t="rotateZ",r.rotateZ=r.rotate,delete r.rotate),H(t,e=r[t]))}),(i=r.opacity)&&(i=parseFloat(i),isNaN(i)?r.opacity=1:(i=Math.max(i,0),i=Math.min(i,1),r.opacity=i)),(i=r.zIndex)&&(r.zIndex=parseInt(i)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","top","right","bottom","left","width","height","flexBasis","strokeWidth"].forEach(function(t){var e=r[t];W(e)||(B(r,t,e),(e=r[t]).unit===P&&(e.unit=T))}),(i=r.color)&&(r.color="inherit"===i?{unit:C}:{value:N(i),unit:O}),(i=r.fontSize)||0===i)if("inherit"===i)r.fontSize={unit:C};else if(/%$/.test(i)){var x=Math.max(0,parseFloat(i));r.fontSize=x?{value:x,unit:R}:{value:16,unit:T}}else r.fontSize={value:Math.max(0,parseFloat(i))||16,unit:T};if(!(i=r.fontWeight)&&0!==i||(r.fontWeight="bold"===i?{value:700,unit:P}:"normal"===i?{value:400,unit:P}:"lighter"===i?{value:200,unit:P}:"inherit"===i?{unit:C}:{value:Math.max(0,parseInt(i))||400,unit:P}),(i=r.fontStyle)&&(r.fontStyle="inherit"===i?{unit:C}:{value:i,unit:L}),(i=r.fontFamily)&&(r.fontFamily="inherit"===i?{unit:C}:{value:i,unit:L}),(i=r.textAlign)&&(r.textAlign="inherit"===i?{unit:C}:{value:i,unit:L}),(i=r.lineHeight)||0===i)if("inherit"===i)r.lineHeight={unit:C};else if("normal"===i)r.lineHeight={unit:E};else if(/px$/.test(i))r.lineHeight={value:parseFloat(i),unit:T};else{var w=Math.max(0,parseFloat(i))||"normal";r.lineHeight="normal"===w?{unit:E}:{value:w,unit:P}}if(i=r.strokeDasharray,!W(i)){var A=i.toString().match(/[\d.]+/g);A?((A=A.map(function(t){return parseFloat(t)})).length%2==1&&A.push(A[A.length-1]),r.strokeDasharray=A):r.strokeDasharray=[]}return(i=r.fill)&&(0<i.indexOf("-gradient(")?r.fill=M.parseGradient(i):r.fill=N(i)),(i=r.stroke)&&(0<i.indexOf("-gradient(")?r.stroke=M.parseGradient(i):r.stroke=N(i)),r},compute:function(t,e){var i=t.animateStyle,r=t.__currentStyle=i,n=t.__computedStyle={},a=e?null:t.parent.computedStyle,o=r.fontSize,s=r.fontFamily,h=r.textAlign,u=r.lineHeight;o.unit===C?n.fontSize=e?16:a.fontSize:o.unit===R?n.fontSize=e?16:a.fontSize*o.value*.01:n.fontSize=o.value,s.unit===C?n.fontFamily=e?"arial":a.fontFamily:n.fontFamily=s.value,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(t){n[t]=r[t].unit===T?r[t].value:0}),["position","display","flexDirection","justifyContent","alignItems","flexGrow","flexShrink"].forEach(function(t){n[t]=r[t]}),h.unit===C?n.textAlign=e?"left":a.textAlign:n.textAlign=e?"left":h.value,u.unit===C?n.lineHeight=e?G(n):a.lineHeight:u.unit===T?n.lineHeight=Math.max(u.value,0)||G(n):u.unit===P?n.lineHeight=Math.max(u.value,0)*n.fontSize||G(n):n.lineHeight=G(n),z(t,e)},repaint:z,setFontStyle:function(t){var e=t.fontStyle,i=t.fontWeight,r=t.fontSize,n=t.fontFamily;return"".concat(e||""," ").concat(i||""," ").concat(r,"px/").concat(r,"px ").concat(n)},getBaseLine:function(t){var e=t.fontSize*o.arial.lhr;return.5*(t.lineHeight-e)+t.fontSize*o.arial.blr},calRelative:function(t,e,i,r,n){return i.unit===E?i=0:-1<[T,P,A,O,L].indexOf(i.unit)?i=i.value:i.unit===R&&(i=X(i.value,r,n?"width":"height")),i},calAbsolute:function(t,e,i,r){return i.unit===E?i=0:-1<[T,P,A,O,L].indexOf(i.unit)?i=i.value:i.unit===R&&(i=i.value*r*.01),i}},he={CANVAS:0,SVG:1},Y=function(){function a(t,e,i,r,n){s(this,a),this.__parent=t,this.__x=e,this.__y=i,this.__width=r,this.__content=n,this.__virtualDom={}}return h(a,[{key:"render",value:function(t,e,i){var r=this.content,n=this.x,a=this.y,o=this.parent,s=o.ox,h=o.oy;a+=j.getBaseLine(i),n+=s,a+=h,t===he.CANVAS?e.fillText(r,n,a):t===he.SVG&&(this.__virtualDom={type:"item",tagName:"text",props:[["x",n],["y",a],["fill",i.color],["font-family",i.fontFamily],["font-weight",i.fontWeight],["font-style",i.fontStyle],["font-size","".concat(i.fontSize,"px")]],content:se.encodeHtml(r)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return j.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),a}(),V=function(){function _(t){var e;return s(this,_),(e=u(this,U(_).call(this))).__content=t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return t(_,x),h(_,[{key:"__measure",value:function(t,e){var i=this.content,r=this.computedStyle,n=this.charWidthList;n.splice(0),t===he.CANVAS&&(e.font=j.setFontStyle(r));for(var a=r.fontSize+","+r.fontFamily,o=_.MEASURE_TEXT.data[a]=_.MEASURE_TEXT.data[a]||{key:a,style:r,hash:{},s:[]},s=_.CHAR_WIDTH_CACHE[a]=_.CHAR_WIDTH_CACHE[a]||{},h=0,u=!1,l=0,c=i.length;l<c;l++){var f=i.charAt(l),d=void 0;s.hasOwnProperty(f)?(d=s[f],n.push(d),h+=d,this.__charWidth=Math.max(this.charWidth,d)):t===he.CANVAS?(d=s[f]=e.measureText(f).width,n.push(d),h+=d,this.__charWidth=Math.max(this.charWidth,d)):(o.hash.hasOwnProperty(f)||(o.s+=f),o.hash[f]=!0,n.push(-1),u=!0)}this.__textWidth=h,u&&_.MEASURE_TEXT.list.push(this)}},{key:"__measureCb",value:function(){for(var t=this.content,e=this.computedStyle,i=this.charWidthList,r=e.fontSize+","+e.fontFamily,n=_.CHAR_WIDTH_CACHE[r],a=0,o=0,s=i.length;o<s;o++)if(i[o]<0){var h=i[o]=n[t.charAt(o)];a+=h,this.__charWidth=Math.max(this.charWidth,h)}this.__textWidth=a}},{key:"__layout",value:function(t,e){var i=this,r=t.x,n=t.y,a=t.w;this.__x=r,this.__y=n;var o=this.isDestroyed,s=this.content,h=this.computedStyle,u=this.lineBoxes,l=this.charWidthList;if(!o&&"none"!==h.display){this.__ox=this.__oy=0,u.splice(0);for(var c=0,f=0,d=0,_=s.length,p=0;f<_;)if((d+=l[f])===a){var v=new Y(this,r,n,d,s.slice(c,f+1));u.push(v),p=Math.max(p,d),n+=h.lineHeight,f=c=f+1,d=0}else if(a<d){var y=void 0;y=f===c?(f=c+1,d):d-l[f];var g=new Y(this,r,n,y,s.slice(c,f));u.push(g),p=Math.max(p,y),n+=h.lineHeight,c=f,d=0}else f++;if(c<_&&c<f){for(d=0,f=c;f<_;f++)d+=l[f];var m=new Y(this,r,n,d,s.slice(c,_));u.push(m),p=Math.max(p,d),n+=h.lineHeight}if(this.__width=p,this.__height=n-t.y,!e){var k=h.textAlign;-1<["center","right"].indexOf(k)&&u.forEach(function(t){var e=i.__width-t.width;0<e&&t.__offsetX("center"===k?.5*e:e)})}}}},{key:"__offsetX",value:function(e,t){Z(U(_.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e,t){Z(U(_.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)})}},{key:"__renderByMask",value:function(t,e){this.render(t,e)}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,i){return this.__layout({x:t,y:e,w:i},!0),this.width}},{key:"render",value:function(e,i){var t=this.isDestroyed,r=this.computedStyle;t||"none"===r.display||(e===he.CANVAS&&(i.font=j.setFontStyle(r),i.fillStyle=r.color),this.lineBoxes.forEach(function(t){t.render(e,i,r)}),e===he.SVG&&(this.__virtualDom={type:"text",children:this.lineBoxes.map(function(t){return t.virtualDom})}))}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes;if(!t.length)return 0;var e=t[t.length-1];return e.y-this.y+e.baseLine}},{key:"currentStyle",get:function(){return this.parent.currentStyle}},{key:"computedStyle",get:function(){return this.parent.computedStyle}}]),_}();l(V,"CHAR_WIDTH_CACHE",{}),l(V,"MEASURE_TEXT",{list:[],data:{}});var $={identity:function(){for(var t=[],e=0;e<16;e++)t.push(e%5==0?1:0);return t},multiply:function(t,e){for(var i=[],r=0;r<4;r++)for(var n=[t[r],t[r+4],t[r+8],t[r+12]],a=0;a<4;a++){var o=4*a,s=[e[o],e[1+o],e[2+o],e[3+o]],h=n[0]*s[0]+n[1]*s[1]+n[2]*s[2]+n[3]*s[3];i[r+o]=h}return i},t43:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]},calPoint:function(t,e){var i=ae(t,2),r=i[0],n=i[1];return[e[0]*r+e[2]*n+e[4],e[1]*r+e[3]*n+e[5]]}};function q(t,e,i,r){return Math.atan((r-e)/(i-t))}function Q(t){var e=Math.sin(t),i=Math.cos(t),r=$.identity();return r[0]=r[5]=i,r[1]=e,r[4]=-e,r}var J={transform:function(t,e){var i=ae(t,6),r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],h=i[5],u=ae(e,6),l=u[0],c=u[1],f=u[2],d=u[3],_=u[4],p=u[5],v=l-r,y=f-a;l-=v,c-=y,f-=v,d-=y,_-=v,p-=y;var g=$.identity(),m=q(r,n,a,o),k=Q(-m);g=$.multiply(k,g);var b=Math.sqrt(Math.pow(a-r,2)+Math.pow(o-n,2)),x=Math.sqrt(Math.pow(f-l,2)+Math.pow(d-c,2))/b;(k=$.identity())[0]=k[5]=x,g=$.multiply(k,g),k=Q(-(m=q(l,c,f,d)));var w=ae($.calPoint([f,d],$.t43(k)),2),A=w[0],S=w[1],M=ae($.calPoint([_,p],$.t43(k)),2),E=M[0],T=M[1],R=Math.atan((A-E)/(T-S));x=T/$.calPoint([s,h],$.t43(g))[1],(k=$.identity())[5]=x,g=$.multiply(k,g);var P=ae($.calPoint([s,h],$.t43(g)),2),C=P[0],O=P[1];return m=Math.atan((E-C)/O),(k=$.identity())[4]=Math.tan(m),g=$.multiply(k,g),k=Q(-R),g=$.multiply(k,g),(k=$.identity())[12]=v,k[13]=y,g=$.multiply(k,g),$.t43(g)}},K={matrix:$,tar:J,geom:w},tt=e.PX,et=e.PERCENT,it=K.matrix,rt=K.geom,nt=rt.d2r,at=rt.transformPoint;function ot(t){var e=it.identity();return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}var ue={calMatrix:function(t,e,i,r){var n,a,o,s=ae(e,2),h=s[0],u=s[1],l=(n=i,a=r,o=[],t.forEach(function(t){var e=ae(t,2),i=e[0],r=e[1];o.push([i,function(t,e,i,r){if("translateX"===t){if(e.unit===et)return e.value*i*.01}else if("translateY"===t){if(e.unit===et)return e.value*r*.01}else if("matrix"===t)return e;return e.value}(i,r,n,a)])}),o),c=it.identity();c[12]=h,c[13]=u,l.forEach(function(t){var e=ae(t,2),i=e[0],r=e[1],n=it.identity();!function(t,e,i){if("translateX"===e)t[12]=i;else if("translateY"===e)t[13]=i;else if("scaleX"===e)t[0]=i;else if("scaleY"===e)t[5]=i;else if("skewX"===e)i=nt(i),t[4]=Math.tan(i);else if("skewY"===e)i=nt(i),t[1]=Math.tan(i);else if("rotateZ"===e){i=nt(i);var r=Math.sin(i),n=Math.cos(i);t[0]=t[5]=n,t[1]=r,t[4]=-r}else"matrix"===e&&(t[0]=i[0],t[1]=i[1],t[4]=i[2],t[5]=i[3],t[12]=i[4],t[13]=i[5])}(n,i,r),c=it.multiply(c,n)});var f=it.identity();return f[12]=-h,f[13]=-u,c=it.multiply(c,f),it.t43(c)},calOrigin:function(t,i,r){var n=[];return t.forEach(function(t,e){t.unit===tt?n.push(t.value):t.unit===et&&n.push(t.value*(e?r:i)*.01)}),n},pointInQuadrilateral:function(t,e,i,r,n,a,o,s,h,u,l){if(!l||se.equalArr(l,[1,0,0,1,0,0]))return i<=t&&r<=e&&t<=o&&e<=s;var c=ae(at(l,i,r),2);i=c[0],r=c[1];var f=ae(at(l,n,a),2);n=f[0],a=f[1];var d=ae(at(l,o,s),2);o=d[0],s=d[1];var _=ae(at(l,h,u),2);return h=_[0],u=_[1],rt.pointInPolygon(t,e,[[i,r],[n,a],[o,s],[h,u]])},mergeMatrix:function(t,e){var i=ot(t),r=ot(e),n=it.multiply(i,r);return[n[0],n[1],n[4],n[5],n[12],n[13]]}},st=w.H;function ht(t,e,i,r,n,a,o,s){var h=1,u=1,l=1;t:for(var c=a;n<=c;c--)for(var f=s;o<=f;f--){var d=c+f,_=Math.floor((t+f)/d),p=f;if(_*d<f+t)if(s<(p=(t-_*c)/(_-1)))continue;if(d=c+p,1<e&&c<e){if(c<e%d)continue;if(1<i)if(c<(e+r)%d)continue}if(1<i)if(c<(e+r)%d)continue;0<_&&(h=_,u=c,l=p);break t}return{n:h,ps:u,pd:l}}function ut(t,e,i,r,n,a){var o=n-e,s=r-i,h=i-e,u=n-r;if("dotted"===t)return ht(o,h,u,s,a,a,Math.max(1,.25*a),2*a);var l=ht(o,h,u,s,a,3*a,Math.max(1,.25*a),2*a),c=l.n,f=l.ps,d=l.pd;return 1===c?ht(o,h,u,s,a,a,Math.max(1,.25*a),2*a):{n:c,ps:f,pd:d}}var le={calDashed:ut,calPoints:function(t,e,i,r,n,a,o,s,h,u,l,c,f){var d=[];if(-1<["dashed","dotted"].indexOf(e)){var _=0===f||2===f?ut(e,n,a,o,s,t):ut(e,h,u,l,c,t),p=_.n,v=_.ps,y=_.pd;if(1<p){for(var g=0;g<p;g++){var m,k=g===p-1,b=void 0,x=void 0,w=void 0;m=(b=0===f||2===f?g?n+v*g+y*g:n:g?h+v*g+y*g:h)+v,0===f?m<a?k?d.push([n,h,s,h,o,u,a,u]):(x=h+(b-n)*Math.tan(i),w=h+(m-n)*Math.tan(i),d.push([b,h,m,h,m,w,b,x])):o<b?(x=h+(s-b)*Math.tan(r),w=h+(s-m)*Math.tan(r),k?d.push([b,h,s,h,b,x]):d.push([b,h,m,h,m,w,b,x])):b<a?(x=h+(b-n)*Math.tan(i),k?d.push([b,h,s,h,o,u,a,u,b,x]):o<m?d.push([b,h,m,h,o,u,a,u,b,x]):d.push([b,h,m,h,m,u,a,u,b,x])):o<m?(x=h+(s-m)*Math.tan(r),b<a?k?d.push([b,h,s,h,o,u,a,u,b,x]):d.push([b,h,m,h,m,x,o,u,a,u,b,x]):k?d.push([b,h,s,h,o,u,b,u]):d.push([b,h,m,h,m,x,o,u,b,u])):k?d.push([b,h,s,h,o,u,b,u]):d.push([b,h,m,h,m,u,b,u]):1===f?m<u?k?d.push([o,u,s,h,s,c,o,l]):(x=s-(m-h)*Math.tan(i),w=s-(b-h)*Math.tan(i),d.push([x,m,w,b,s,b,s,m])):l<b?(x=o+(b-l)*Math.tan(r),w=o+(m-l)*Math.tan(r),k?d.push([x,b,s,b,s,c]):d.push([x,b,s,b,s,m,w,m])):b<u?(x=o+(u-b)*Math.tan(i),k?d.push([o,u,x,b,s,b,s,c,o,c]):l<m?d.push([o,u,x,b,s,b,s,m,x,m,o,l]):d.push([o,u,x,b,s,b,s,m,o,m])):l<m?(x=o+(m-l)*Math.tan(r),b<u?k?d.push([o,u,x,b,s,b,s,c,o,l]):d.push([o,u,x,b,s,b,s,m,x,m,o,l]):k?d.push([o,b,s,b,s,c,o,l]):d.push([o,b,s,b,s,m,x,m,o,l])):k?d.push([o,b,s,b,s,c,o,l]):d.push([o,b,s,b,s,m,o,m]):2===f?m<a?k?d.push([n,c,a,l,o,l,s,c]):(x=c-(b-n)*Math.tan(i),w=c-(m-n)*Math.tan(i),d.push([b,x,m,w,m,c,b,c])):o<b?(x=c-(b-n)*Math.tan(r),w=c-(m-n)*Math.tan(r),k?d.push([b,x,s,c,b,c]):d.push([b,x,m,w,m,c,b,c])):b<a?(x=l+(b-n)*Math.tan(i),k?d.push([b,x,a,l,o,l,s,c,b,c]):o<m?d.push([b,x,a,l,o,l,m,c,b,c]):d.push([b,x,a,l,m,l,m,c,b,c])):o<m?(x=c-(s-m)*Math.tan(r),b<a?k?d.push([b,x,o,l,s,c,b,c]):d.push([b,x,o,l,m,x,m,c,b,c]):k?d.push([b,l,o,l,s,c,b,c]):d.push([b,l,o,l,m,x,m,c,b,c])):k?d.push([b,l,o,l,s,c,b,c]):d.push([b,l,m,l,m,c,b,c]):3===f&&(m<u?k?d.push([n,h,a,u,a,l,n,c]):(x=n+(b-h)*Math.tan(i),w=n+(m-h)*Math.tan(i),d.push([n,b,x,b,w,m,n,m])):l<b?(x=n+(c-b)*Math.tan(r),w=n+(c-m)*Math.tan(r),k?d.push([n,b,x,b,n,c]):d.push([n,b,x,b,w,m,n,m])):b<u?(x=n+(b-h)*Math.tan(i),k?d.push([n,b,x,b,a,u,a,l,n,c]):l<m?d.push([n,b,x,b,a,u,a,l,x,m,n,m]):d.push([n,b,x,b,a,u,a,m,n,m])):l<m?(x=n+(c-m)*Math.tan(r),b<u?k?d.push([n,b,x,b,a,u,a,l,n,c]):d.push([n,b,x,b,a,u,a,l,x,m,n,m]):k?d.push([n,b,a,b,a,l,n,c]):d.push([n,b,a,b,a,l,x,m,n,m])):k?d.push([n,b,a,b,a,l,n,c]):d.push([n,b,a,b,a,m,n,m]))}return d}}return 0===f?d.push([n,h,s,h,o,u,a,u]):1===f?d.push([o,u,s,h,s,c,o,l]):2===f?d.push([n,c,a,l,o,l,s,c]):3===f&&d.push([n,h,a,u,a,l,n,c]),d},calRadius:function(t,e,i,r,n,a,o,s){if(n||a||o||s){var h=[];return h.push([t+n,e]),h.push([t+i-a,e]),h.push([t+i-a*(1-st),e,t+i,e+a*(1-st),t+i,e+a]),h.push([t+i,e+r-o]),h.push([t+i,e+r-o*(1-st),t+i-o*(1-st),e+r,t+i-o,e+r]),h.push([t+s,e+r]),h.push([t+s*(1-st),e+r,t,e+r-s*(1-st),t,e+r-s]),h.push([t,e+n]),h.push([t,e+n*(1-st),t+n*(1-st),e,t+n,e]),h}},genRdRect:function(t,e,i,r,n,a,o,s){if(t!==he.CANVAS){for(var h="M".concat(s[0][1],",").concat(s[0][1]),u=1,l=s.length;u<l;u+=2){var c=s[u],f=s[u+1];h+="L".concat(c[0],",").concat(c[1]),h+="C".concat(f[0],",").concat(f[1],",").concat(f[2],",").concat(f[3],",").concat(f[4],",").concat(f[5])}return{type:"item",tagName:"path",props:[["d",h],["fill",i]]}}e.beginPath(),e.fillStyle=i,e.moveTo(s[0][0],s[0][1]);for(var d=1,_=s.length;d<_;d+=2){var p=s[d],v=s[d+1];e.lineTo(p[0],p[1]),e.bezierCurveTo(v[0],v[1],v[2],v[3],v[4],v[5])}e.fill(),e.closePath()}},lt=e.PERCENT,ct=e.NUMBER;var ce={matrixResize:function(t,e,i,r,n,a,o,s){if(t!==i||e!==r){var h=[["scaleX",{value:i/t,unit:ct}],["scaleY",{value:r/e,unit:ct}]],u=ue.calOrigin([{value:0,unit:lt},{value:0,unit:lt}],o,s);return u[0]+=n,u[1]+=a,ue.calMatrix(h,u,o,s)}}},ft=se.isFunction,dt=function(){function o(){s(this,o),this.__eHash={}}return h(o,[{key:"on",value:function(t,e){if(e){var i=this;if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)i.on(t[r],e);else if(e){i.__eHash.hasOwnProperty(t)||(i.__eHash[t]=[]);for(var a=0,o=i.__eHash[t],s=o.length;a<s;a++)if(o[a]===e)return i;i.__eHash[t].push(e)}return i}}},{key:"once",value:function(r,n){if(ft(n)){var a=this;if(o.__karasEventCb=n,Array.isArray(r))for(var t=0,e=r.length;t<e;t++)a.once(r[t],n);else n&&a.on(r,o);return this}function o(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.apply(a,e),a.off(r,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++)this.off(t[i],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e||a[n].__karasEventCb===e){a.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)this.emit(t[n],i);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var u=o[s];ft(u)&&u.apply(this,i)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],i=new o;e.__eHash={};for(var r=["on","once","off","emit"],n=r.length-1;0<=n;n--){var a=r[n];e[a]=i[a]}}}}]),o}();l(dt,"REFRESH","refresh"),l(dt,"PAUSE","pause"),l(dt,"PLAY","play"),l(dt,"FRAME","frame"),l(dt,"FINISH","finish"),l(dt,"CANCEL","cancel"),l(dt,"BEGIN","begin"),l(dt,"END","end");var _t={REPAINT:0,REFLOW:1},pt={GEOM:{x1:!0,y1:!0,x2:!0,y2:!0,controlA:!0,controlB:!0,r:!0,rx:!0,ry:!0,begin:!0,end:!0,points:!0,controls:!0},STYLE:{transform:!0,translateX:!0,translateY:!0,skewX:!0,skewY:!0,scaleX:!0,scaleY:!0,rotateZ:!0,color:!0,fontStyle:!0,strokeWidth:!0,fill:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0,backgroundSize:!0,stroke:!0,borderBottomColor:!0,borderLeftColor:!0,borderRightColor:!0,borderTopColor:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderBottomRightRadius:!0,borderBottomLeftRadius:!0,visibility:!0,opacity:!0,zIndex:!0}},vt=se.isNil,yt=se.isString,gt=se.isFunction,mt=se.clone,kt=se.extend;var bt=function(){function o(t,e,i){var r;return s(this,o),r=u(this,U(o).call(this)),yt(t)||(i=e,e=t,t=/(?:function|class)\s+([\w$]+)/.exec(r.constructor.toString())[1]),r.__tagName=t,e=e||[],Array.isArray(e)?(r.props=se.arr2hash(e),r.__props=e):(r.props=e,r.__props=se.hash2arr(e)),r.__children=i||[],r.__shadowRoot=null,r.__parent=null,r.__ref={},r.__state={},r}return t(o,dt),h(o,[{key:"setState",value:function(t,e){var i=this;vt(t)?this.state={}:kt(this.state,t);var r=this.root;if(r){r.delRefreshTask(this.__task);var n=this.shadowRoot;this.__task={before:function(){i.__init(),r.setRefreshLevel(_t.REFLOW)},after:function(){!function t(e,i){if(e!==i&&e.tagName===i.tagName&&i.tagName){e.animationList.forEach(function(t){t.__target=i}),i.__animationList=e.animationList.splice(0);var r=e.children,n=i.children;if(r&&n)for(var a=r.length,o=n.length,s=0,h=Math.min(a,o);s<h;s++)e=r[s],i=n[s],e instanceof bt&&(e=e.shadowRoot),i instanceof bt&&(i=i.shadowRoot),t(e,i)}}(n,i.shadowRoot),n instanceof x&&n.__destroy(),gt(e)&&e()}},r.addRefreshTask(this.__task)}else gt(e)&&e()}},{key:"__init",value:function(){for(var n=this,a=this.render();a instanceof o;)a=a.__init();if(a instanceof x){a.__host=this,a.__initRef(this);var t=mt(this.props.style)||{};j.normalize(t),kt(a.style,t),this.__props.forEach(function(t){var e=t[0],i=t[1];if(/^on[a-zA-Z]/.test(e)){e=e.slice(2).toLowerCase();var r=a.listener[e]=a.listener[e]||[];-1===r.indexOf(i)&&r.push(i)}else/^on-[a-zA-Z\d_$]/.test(e)&&(e=e.slice(3),n.on(e,function(){i.apply(void 0,arguments)}))})}else{var e="";vt(a)||(e=se.encodeHtml(a.toString())),(a=new V(e)).__parent=this.parent}return this.__shadowRoot=a}},{key:"__initRef",value:function(t){var e=this.props.ref;yt(e)?t.ref[e]=this:gt(e)&&e(t)}},{key:"render",value:function(){}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.children.splice(0),this.__shadowRoot=null,this.__parent=null}},{key:"__emitEvent",value:function(t,e){var i=this.shadowRoot;if(!(i instanceof V))return e?i.__emitEvent(t,e):i.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"__measure",value:function(t,e){var i=this.shadowRoot;i instanceof V?i.__measure(t,e):i.__measure(t,e,!0)}},{key:"__repaint",value:function(){var t=this.shadowRoot;t instanceof x&&t.__repaint(!0)}},{key:"tagName",get:function(){return this.__tagName}},{key:"children",get:function(){return this.__children}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){if(this.parent)return this.parent.root}},{key:"parent",get:function(){return this.__parent}},{key:"ref",get:function(){return this.__ref}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}}]),o}();Object.keys(pt.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","style","animating","animationList","animateStyle","currentStyle","computedStyle","animateProps","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth"]).forEach(function(e){Object.defineProperty(bt.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate"].forEach(function(e){bt.prototype[e]=function(){var t=this.shadowRoot;if(t&&gt(t[e]))return t[e].apply(t,arguments)}});var xt={cache:null,mask:null};function wt(t,e,i){var r;return xt[t]||((r=xt[t]=document.createElement("canvas")).style.position="absolute",r.style.left="9999px",r.style.top="-9999px",document.body.append(r)),(r=xt[t]).setAttribute("width",e),r.setAttribute("height",i),r.style.width=e+"px",r.style.height=i+"px",{canvas:r,ctx:r.getContext("2d"),draw:function(){}}}var At,St,Mt={},fe={measureText:function(t){var e=V.MEASURE_TEXT,i=e.list,u=e.data,l="",c=[],f=[];if(Object.keys(u).forEach(function(t){var e=u[t],i=e.key,r=e.style,n=e.s;if(n)for(var a="position:absolute;font-family:".concat(r.fontFamily,";font-size:").concat(r.fontSize,"px"),o=0,s=n.length;o<s;o++){c.push(i);var h=n.charAt(o);f.push(h),l+='<span style="'.concat(a,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}}),l){var r=document.createElement("div");r.style.position="absolute",r.style.left="99999px",r.style.top="-99999px",r.style.visibility="hidden",document.body.appendChild(r),r.innerHTML=l;for(var n=r.childNodes,a=V.CHAR_WIDTH_CACHE,o=V.MEASURE_TEXT,s=0,h=n.length;s<h;s++){var d=n[s],_=c[s],p=f[s],v=window.getComputedStyle(d,null);a[_][p]=parseFloat(v.width)}i.forEach(function(t){return t.__measureCb()}),t(),o.list=[],o.data={},document.body.removeChild(r)}else t()},measureImg:function(t,e){var i=Mt[t]=Mt[t]||{state:0,task:[]};if(2===i.state)e(i);else if(1===i.state)i.task.push(e);else{i.state=1,i.task.push(e);var r=new Image;if(r.onload=function(){i.state=2,i.success=!0,i.width=r.width,i.height=r.height,i.source=r,i.url=t,i.task.splice(0).forEach(function(t){return t(i)})},r.onerror=function(){i.state=2,i.success=!1,i.url=t,i.task.splice(0).forEach(function(t){return t(i)})},"data:"!==t.substr(0,5)){var n=/^(?:\w+:)?\/\/([^/:]+)/.exec(t);n&&location.hostname!==n[1]&&(r.crossOrigin="anonymous")}r.src=t}},warn:function(t){console.warn(t)},requestAnimationFrame:(St=function(t){var e;return"undefined"!=typeof requestAnimationFrame?(fe.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),fe.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Tt.toString=function(){return St.toString()},Tt),cancelAnimationFrame:(At=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(fe.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),fe.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},Et.toString=function(){return At.toString()},Et),now:function(){return"undefined"!=typeof performance?(fe.now=performance.now.bind(performance),performance.now()):(fe.now=Date.now.bind(Date),Date.now())},getCacheCanvas:function(t,e){return wt("cache",t,e)},getMaskCanvas:function(t,e){return wt("mask",t,e)},isDom:function(t){if(t){if(se.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if(se.isFunction(t.getElementsByTagName))return!0}return!1}};function Et(t){return At.apply(this,arguments)}function Tt(t){return St.apply(this,arguments)}var Rt=se.isFunction,Pt=se.isObject;function Ct(t,e,i){"before"===i?t.forEach(function(t){Pt(t)&&Rt(t.before)&&t.before(e)}):"after"===i&&t.forEach(function(t){Pt(t)&&Rt(t.after)?t.after(e):Rt(t)&&t(e)})}var Ot=new(function(){function t(){s(this,t),this.__aTask=[],this.__hookTask=[],this.__task=[],this.__now=null}return h(t,[{key:"__init",value:function(){var a=this,o=a.aTask,s=a.task;fe.cancelAnimationFrame(a.id);var h=a.__now=fe.now();!function n(){fe.cancelAnimationFrame(a.id),a.id=fe.requestAnimationFrame(function(){if(o.length||s.length){var t=a.__now=fe.now(),e=t-h;e=Math.max(e,0),h=t;var i=o.slice(0),r=s.slice(0);Ct(i,e,"before"),Ct(r,e,"before"),a.__hookTask.splice(0).forEach(function(t){return t()}),Ct(i,e,"after"),Ct(r,e,"after"),(o.length||s.length)&&n()}})}()}},{key:"__onFrame",value:function(t,e){if(t){var i=this.aTask,r=this.task;i.length||r.length||this.__init(),e.push(t)}}},{key:"__offFrame",value:function(t,e){if(t){for(var i=0,r=e.length;i<r;i++){var n=e[i];if(n===t||n.__karasFramecb===t){e.splice(i,1);break}}var a=this.aTask,o=this.task;a.length||o.length||(fe.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"onFrame",value:function(t){this.__onFrame(t,this.task)}},{key:"offFrame",value:function(t){this.__offFrame(t,this.task)}},{key:"__onFrameA",value:function(t){this.__onFrame(t,this.aTask)}},{key:"__offFrameA",value:function(t){this.__offFrame(t,this.aTask)}},{key:"__nextFrame",value:function(e,i){var r=this;if(e){var n=Rt(e)?function(t){e(t),i?r.__offFrameA(n):r.offFrame(n)}:{before:e.before,after:function(t){e.after(t),i?r.__offFrameA(n):r.offFrame(n)}};n.__karasFramecb=e,i?this.__onFrameA(n):this.onFrame(n)}}},{key:"nextFrame",value:function(t){this.__nextFrame(t)}},{key:"__nextFrameA",value:function(t){this.__nextFrame(t,!0)}},{key:"task",get:function(){return this.__task}},{key:"aTask",get:function(){return this.__aTask}}]),t}()),Lt=4,Wt=1e-7,Nt=10,Ft="function"==typeof Float32Array;function Dt(t,e){return 1-3*e+3*t}function It(t,e){return 3*e-6*t}function Bt(t){return 3*t}function Ht(t,e,i){return((Dt(e,i)*t+It(e,i))*t+Bt(e))*t}function zt(t,e,i){return 3*Dt(e,i)*t*t+2*It(e,i)*t+Bt(e)}function Gt(t){return t}function Xt(a,e,o,i){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===i)return Gt;for(var s=new(Ft?Float32Array:Array)(11),t=0;t<11;++t)s[t]=Ht(.1*t,a,o);function r(t){for(var e=0,i=1;10!==i&&s[i]<=t;++i)e+=.1;var r=e+.1*((t-s[--i])/(s[i+1]-s[i])),n=zt(r,a,o);return.001<=n?function(t,e,i,r){for(var n=0;n<Lt;++n){var a=zt(e,i,r);if(0===a)return e;e-=(Ht(e,i,r)-t)/a}return e}(t,r,a,o):0===n?r:function(t,e,i,r,n){for(var a,o,s=0;0<(a=Ht(o=e+(i-e)/2,r,n)-t)?i=o:e=o,Math.abs(a)>Wt&&++s<Nt;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:Ht(r(t),e,i)}}var jt={linear:Xt(1,1,0,0),easeIn:Xt(.42,0,1,1),easeOut:Xt(0,0,.58,1),ease:Xt(.25,.1,.25,1),easeInOut:Xt(.42,0,.58,1),cubicBezier:Xt},Yt=e.AUTO,Vt=e.PX,$t=e.PERCENT,qt=e.INHERIT,Ut=e.RGBA,Zt=e.STRING,Qt=e.NUMBER,Jt=se.isNil,Kt=se.isFunction,re=se.isNumber,ne=se.isObject,de=se.clone,_e=se.equalArr,pe=jt.linear,ve={};["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color"].forEach(function(t){ve[t]=!0});var ye={};["fontSize","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","bottom","left","right","top","flexBasis","width","height","lineHeight","marginBottom","marginLeft","marginRight","marginTop","paddingBottom","paddingLeft","paddingRight","paddingTop","strokeWidth"].forEach(function(t){ye[t]=!0});var ge={};["backgroundImage","fill","stroke"].forEach(function(t){ge[t]=!0});var me={linear:!0,radial:!0},ke={};function be(t,e,i){if("transform"===t)return _e(e[0][1],i[0][1]);if("transformOrigin"===t||"backgroundSize"===t)return e[0].value===i[0].value&&e[0].unit===i[0].unit&&e[1].value===i[1].value&&e[1].unit===i[1].unit;if("backgroundPositionX"===t||"backgroundPositionY"===t||ye.hasOwnProperty(t)||ke.hasOwnProperty(t))return e.value===i.value&&e.unit===i.unit;if(ve.hasOwnProperty(t))return e.unit===i.unit&&_e(e.value,i.value);if(ge.hasOwnProperty(t)&&e.k===i.k&&me.hasOwnProperty(e.k)){var r=e.v,n=i.v;if(e.d!==i.d||r.length!==n.length)return;for(var a=0,o=r.length;a<o;a++){var s=r[a],h=n[a];if(s.length!==h.length)return;for(var u=0;u<4;u++)if(s[0][u]!==h[0][u])return;if(1<s.length&&(s[1].value!==h[1].value||s[1].unit!==h[1].unit))return}return 1}if(pt.GEOM.hasOwnProperty(t)){if("points"===t||"controls"===t){if(e.length!==i.length)return;for(var l=0,c=e.length;l<c;l++)if(e[l]!==i[l]&&(e[l][0]!==i[l][0]||e[l][1]!==i[l][1]))return;return 1}if("controlA"===t||"controlB"===t)return e.length===i.length&&(e[0]===i[0]&&e[1]===i[1])}return e===i}function xe(t){return!pt.STYLE.hasOwnProperty(t)&&!pt.GEOM.hasOwnProperty(t)}function we(t,e,i){for(var r=!1,n=_t.REPAINT,a=0,o=i.length;a<o;a++){var s=i[a],h=t[s],u=e[s];if(Jt(h)||Jt(u)){if((!Jt(h)||!Jt(u))&&(r=!0,xe(s))){n=_t.REFLOW;break}}else if(!be(s,h,u)){if(r=!0,n!==_t.REPAINT)break;if(xe(s)){n=_t.REFLOW;break}}}return[r,n]}function Ae(i,t,e,r){e.setRefreshLevel(r),e.__frameHook();var n={},a={};Object.keys(i).forEach(function(t){var e=i[t];Jt(e)||(pt.GEOM.hasOwnProperty(t)&&(a[t]=e),n[t]=e)}),t.__style=n,t.__props=a}function Se(i,r,t,n){return t.forEach(function(t){var e=function(t,e,i,r){var n={k:i},a=t[i],o=e[i];if("transform"===i){if(!a&&!o)return;var s,h;if(s=a?a[0][1]:[1,0,0,1,0,0],h=o?o[0][1]:[1,0,0,1,0,0],_e(s,h))return;return n.v=[h[0]-s[0],h[1]-s[1],h[2]-s[2],h[3]-s[3],h[4]-s[4],h[5]-s[5]],n}if("transformOrigin"===i){n.v=[];for(var u=0;u<2;u++){var l=a[u],c=o[u];if(l.unit===c.unit)n.v.push(c.value-l.value);else if(l.unit===Vt&&c.unit===$t){var f=.01*c.value*r[u?"outerHeight":"outerWidth"];n.v.push(f-l.value)}else if(l.unit===$t&&c.unit===Vt){var d=100*c.value/r[u?"outerHeight":"outerWidth"];n.v.push(d-l.value)}}if(_e(n.v,[0,0]))return}else if("backgroundPositionX"===i||"backgroundPositionY"===i){if(a.unit===o.unit&&-1<[Vt,$t].indexOf(a.unit)){var _=o.value-a.value;if(0==_)return;n.v=_}else if(a.unit===Vt&&o.unit===$t){var p=.01*o.value*r["backgroundPositionX"===i?"innerWidth":"innerHeight"];if(0===(p-=a.value))return;n.v=p}else if(a.unit===$t&&o.unit===Vt){var v=100*o.value/r["backgroundPositionX"===i?"innerWidth":"innerHeight"];if(0===(v-=a.value))return;n.v=v}}else if(ke.hasOwnProperty(i)){if(a.unit===o.unit){var y=o.value-a.value;if(0==y)return;n.v=y}else if(a.unit===Vt&&o.unit===$t){var g=.01*o.value*r[/\w+X$/.test(i)?"outerWidth":"outerHeight"];if(0===(g-=a.value))return;n.v=g}else if(a.unit===$t&&o.unit===Vt){var m=100*o.value/r[/\w+X$/.test(i)?"outerWidth":"outerHeight"];if(0===(m-=a.value))return;n.v=m}}else if("backgroundSize"===i){n.v=[];for(var k=0;k<2;k++){var b=a[k],x=o[k];if(b.unit===x.unit&&-1<[Vt,$t].indexOf(b.unit))n.v.push(x.value-b.value);else if(b.unit===Vt&&x.unit===$t){var w=.01*x.value*r[k?"innerWidth":"innerHeight"];n.v.push(w-b.value)}else{if(b.unit!==$t||x.unit!==Vt)return n.n=a,n;var A=100*x.value/r[k?"innerWidth":"innerHeight"];n.v.push(A-b.value)}}if(_e(n.v,[0,0]))return}else if(ge.hasOwnProperty(i))if(a.k!==o.k)n.n=a;else if("linear"===a.k||"radial"===a.k){var S=a.v,M=o.v;if(_e(S,M))return;n.v=[];for(var E,T=r.innerWidth,R=0,P=Math.min(S.length,M.length);R<P;R++){var C=S[R],O=M[R],L=[];L.push([O[0][0]-C[0][0],O[0][1]-C[0][1],O[0][2]-C[0][2],O[0][3]-C[0][3]]),E=_e(L,[0,0,0,0]),C[1]&&O[1]?(C[1].unit===O[1].unit?L.push(O[1].value-C[1].value):C[1].unit===Vt&&O[1].unit===$t?L.push(O[1].value*T*.01-C[1].value):C[1].unit===$t&&O[1].unit===Vt&&L.push(100*O[1].value/T-C[1].value),E=E&&0===L[4]):(C[1]||O[1])&&(E=!1),n.v.push(L)}if("linear"===a.k){var W=o.d-a.d;if(E&&0==W)return;n.d=W}}else{if(_e(o,a))return;n.v=[o[0]-a[0],o[1]-a[1],o[2]-a[2],o[3]-a[3]]}else if(ve.hasOwnProperty(i)){if(o=o.value,a=a.value,_e(o,a)||0===o[3]&&0===a[3])return;n.v=[o[0]-a[0],o[1]-a[1],o[2]-a[2],o[3]-a[3]]}else if(ye.hasOwnProperty(i)){if(a.unit===Yt&&o.unit===Yt)return;if(a.unit===Yt||o.unit===Yt)return n.n=a,n;var N=r.computedStyle,F=(r.parent||r).computedStyle,D=0;if(a.unit===o.unit)D=o.value-a.value;else if(a.unit===Vt&&o.unit===$t){var I;"fontSize"===i?I=o.value*F[i]*.01:"flexBasis"===i&&"row"===N.flexDirection||"width"===i||/margin/.test(i)||/padding/.test(i)||-1<["left","right"].indexOf(i)?I=o.value*F.width*.01:("flexBasis"===i||"height"===i||-1<["top","bottom"].indexOf(i))&&(I=o.value*F.height*.01),D=I-a.value}else if(a.unit===$t&&o.unit===Vt){var B;"fontSize"===i?B=100*o.value/F[i]:"flexBasis"===i&&"row"===N.flexDirection||"width"===i||/margin/.test(i)||/padding/.test(i)||-1<["left","right"].indexOf(i)?B=100*o.value/F.width:("flexBasis"===i||"height"===i||-1<["top","bottom"].indexOf(i))&&(B=100*o.value/F.height),D=B-a.value}else"lineHeight"===i&&(a.unit===Vt&&o.unit===Qt?D=o.value*N.fontSize-a.value:a.unit===Qt&&o.unit===Vt&&(D=o.value/N.fontSize-a.value));if(0===D||isNaN(D))return;n.v=D}else if(pt.GEOM.hasOwnProperty(i))if(Jt(a))n.n=null;else if("points"===i||"controls"===i){if(Jt(o)||Jt(a))return a;if(_e(a,o))return;n.v=[];for(var H=0,z=Math.min(a.length,o.length);H<z;H++){var G=a[H],X=o[H];if(Jt(G)||Jt(X))n.v.push(X);else{for(var j=[],Y=0,V=Math.max(G.length,X.length);Y<V;Y++)Jt(G[Y])||Jt(X[Y])?j.push(X[Y]):j.push(X[Y]-G[Y]);n.v.push(j)}}}else if("controlA"===i||"controlB"===i){if(Jt(o)||Jt(a))return a;if(_e(a,o))return;n.v=[o[0]-a[0],o[1]-a[1]]}else{if(o===a)return;n.v=o-a}else if("opacity"===i||"zIndex"===i){if(o===a)return;n.v=o-a}else{if(o===a)return;n.n=a}return n}(i.style,r.style,t,n);e&&i.transition.push(e)}),r}function Me(t,v){var y=de(t.style),e=function(t){var e;if(/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)){var i=t.match(/[\d.]+/g);e=jt.cubicBezier(i[0],i[1],i[2],i[3])}else if(e=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(t)){var r=parseInt(e[1]),n=e[2];e=function(t){if(r&&0<r){var e=1/r;return("start"===n?Math.ceil(t/e):Math.floor(t/e))/r}return t}}else e=jt[t]||pe;return e}(t.easing);return e!==pe&&(v=e(v)),t.transition.forEach(function(t){var e=t.k,i=t.v,r=t.n,n=t.d,a=y[e];if(t.hasOwnProperty("n"))y[e]=r;else if("transform"===e){a=a||(y[e]=[["matrix",[1,0,0,1,0,0]]]);for(var o=0;o<6;o++)a[0][1][o]+=i[o]*v}else if("backgroundPositionX"===e||"backgroundPositionY"===e||ye.hasOwnProperty(e)||ke.hasOwnProperty(e))0!==i&&(a.value+=i*v);else if("transformOrigin"===e||"backgroundSize"===e)0!==i[0]&&(a[0].value+=i[0]*v),0!==i[1]&&(a[1].value+=i[1]*v);else if(ge.hasOwnProperty(e))if(me.hasOwnProperty(a.k)){for(var s=0,h=Math.min(a.v.length,i.length);s<h;s++){var u=a.v[s],l=i[s];u[0][0]+=l[0][0]*v,u[0][1]+=l[0][1]*v,u[0][2]+=l[0][2]*v,u[0][3]+=l[0][3]*v,u[1]&&l[1]&&(u[1].value+=l[1]*v)}"linear"===a.k&&void 0!==a.d&&void 0!==n&&(a.d+=n*v)}else a[0]+=i[0]*v,a[1]+=i[1]*v,a[2]+=i[2]*v,a[3]+=i[3]*v;else if(ve.hasOwnProperty(e))(a=a.value)[0]+=i[0]*v,a[1]+=i[1]*v,a[2]+=i[2]*v,a[3]+=i[3]*v;else if(pt.GEOM.hasOwnProperty(e)){var c=y[e];if("points"===e||"controls"===e){for(var f=0,d=Math.min(c.length,i.length);f<d;f++)if(!Jt(c[f])&&c[f].length)for(var _=0,p=Math.min(c[f].length,i[f].length);_<p;_++)Jt(c[f][_])||Jt(i[f][_])||(c[f][_]+=i[f][_]*v)}else"controlA"===e||"controlB"===e?(c[0]+=i[0]*v,c[1]+=i[1]*v):y[e]+=i*v}else"opacity"!==e&&"zIndex"!==e||(y[e]+=i*v)}),y}function Ee(t,e){return Kt(t)&&(e=t,t={}),[t||{},e]}["translateX","translateY","scaleX","scaleY","rotateZ","skewX","skewY"].forEach(function(t){ke[t]=!0});var Te=0,Re=function(){function o(t,n,e){var i;if(s(this,o),(i=u(this,U(o).call(this))).__id=Te++,i.__target=t,n=de(n||[]),Array.isArray(n))i.__list=n.filter(function(t){return t&&ne(t)});else if(n&&ne(n)){var a=[];Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++){(a[i]=a[i]||{offset:i/(r-1)})[t]=e[i]}}),i.__list=a}else i.__list=[];re(e)&&(i.__options={duration:e},e=i.__options);var r=i.__options=e||{};return i.__duration=Math.max(0,parseFloat(r.duration)||0),i.delay=r.delay,i.endDelay=r.endDelay,i.iterations=r.iterations,i.fps=r.fps,i.fill=r.fill,i.direction=r.direction,i.playbackRate=r.playbackRate,i.__easing=r.easing,i.playCount=0,i.spfLimit=r.spfLimit,i.__frames=[],i.__framesR=[],i.__startTime=null,i.currentTime=0,i.__nextTime=0,i.__fpsTime=0,i.__playState="idle",i.__isDestroyed=!1,i.__style={},i.__init(),i}return t(o,dt),h(o,[{key:"__init",value:function(){var i=this,e=this.iterations,o=this.duration,r=this.list,s=this.easing,t=this.target;if(!(e<1||r.length<1)){for(var n=0,a=r.length;n<a;n++){var h=r[n];h.hasOwnProperty("offset")&&(h.offset=parseFloat(h.offset)||0,h.offset=Math.max(0,h.offset),h.offset=Math.min(1,h.offset),(isNaN(h.offset)||h.offset<0||1<h.offset||h.offset<=-1)&&(r.splice(n,1),n--,a--))}1===r.length&&r.push(r[0]),r.forEach(function(t,e){r[e]=de(t)});var u=r[0];u.hasOwnProperty("offset")&&0<u.offset?(u={offset:0},r.unshift(u)):u.offset=0;var l=r[r.length-1];l.hasOwnProperty("offset")&&l.offset<1?(l={offset:1},r.push(l)):l.offset=1;for(var c=1,f=r.length;c<f;c++){var d=r[c];if(!d.hasOwnProperty("offset")){for(var _=void 0,p=c+1;p<f&&!(_=r[p]).hasOwnProperty("offset");p++);var v=p-c+1;d=r[c-1];for(var y=(_.offset-d.offset)/v,g=c;g<p;g++){r[g].offset=d.offset+y*(g+1-c)}c=p}}var m=[];r.forEach(function(t){var e,i,r,n,a;m.push((i=o,r=s,n=(e=t).offset,a=e.easing,delete e.offset,delete e.easing,j.normalize(e),{style:e,time:n*i,easing:a||r,transition:[]}))}),this.__frames=m;var k,b,x,w,A,S,M,E,T=this.__keys=(b=t,x={},w=[],(k=m).forEach(function(t){var i=t.style;Object.keys(i).forEach(function(t){var e=i[t];Jt(e)||x.hasOwnProperty(t)||(x[t]=!0,w.push(t))})}),k.forEach(function(t){var e=t.style;w.forEach(function(t){e.hasOwnProperty(t)||(pt.GEOM.hasOwnProperty(t)?e[t]=b.currentProps[t]:e[t]=b.currentStyle[t])})}),w);A=m,S=T,E=(M=t).computedStyle,A.forEach(function(t){var a=t.style;S.forEach(function(t){var e=a[t];if(!Jt(e))if("transform"===t){var i=M.outerWidth,r=M.outerHeight,n=ue.calMatrix(e,[0,0],i,r);a[t]=[["matrix",n]]}else e.unit===qt&&("color"===t?a[t]={value:se.rgba2int(E[t]),unit:Ut}:ye.hasOwnProperty(t)?a[t]={value:E[t],unit:Vt}:"fontWeight"===t?a[t]={value:E[t],unit:Qt}:"fontStyle"!==t&&"fontFamily"!==t&&"textAlign"!==t||(a[t]={value:E[t],unit:Zt}))})});for(var R=m.length,P=m[0],C=1;C<R;C++){P=Se(P,m[C],T,t)}var O=de(m).reverse();O.forEach(function(t){t.time=o-t.time,t.transition=[]}),P=O[0];for(var L=1;L<R;L++){P=Se(P,O[L],T,t)}this.__framesR=O,this.__clean=function(t){i.__cancelTask(),i.__nextTime=0,t?(i.__currentTime=i.delay+o+i.endDelay,i.__playCount=e,i.__playState="finished",i.__stayEnd()||(i.__style={})):(i.__playCount=i.__currentTime=0,i.__playState="idle",i.__style={})},this.__fin=function(t){i.__begin=i.__end=i.__isDelay=i.__finish=i.__inFps=i.__enterFrame=null,i.emit(dt.FINISH),Kt(t)&&t()},this.__frameCb=function(t,e){i.emit(dt.FRAME,t,e),i.__firstPlay&&(i.__firstPlay=!1,i.emit(dt.PLAY)),Kt(i.__playCb)&&(i.__playCb(t,e),i.__playCb=null)}}}},{key:"__calDiffTime",value:function(t){var e=this.playbackRate,i=this.spfLimit,r=this.fps;return this.__currentTime=this.__nextTime,i&&(!0===i?t=Math.min(t,1e3/r):0<i&&(t=Math.min(t,i))),1!==e&&0<e&&(t*=e),this.__nextTime+=t,this.__currentTime}},{key:"play",value:function(t){var x=this,e=this.isDestroyed,w=this.duration,i=this.playState,r=this.__frameCb,n=this.list;if(e||w<=0||n.length<1)return this;if("running"===i)return this;this.__cancelTask(),this.__playCb=t,this.__playState="running";var A=this.__firstPlay=!0;if(!this.__enterFrame){var S=this.frames,M=this.framesR,E=this.direction,T=this.delay,R=this.endDelay,P=this.keys,C=this.__clean,a=this.__fin,O=this.__stayEnd(),L=this.__stayBegin();this.__currentTime=this.__nextTime=this.__fpsTime=0;var W=S.length,N=this.__enterFrame={before:function(t){var e=x.root,i=x.style,r=x.fps,n=x.playCount,a=x.iterations;if(e){var o,s,h,u=x.__calDiffTime(t);if(!A&&r<60){if((t=x.__fpsTime+=t)<1e3/r)return void(x.__inFps=!0);x.__fpsTime=0}if(A=!1,0<n&&(T=0),u<T){if(L){var l=S[0].style,c=ae(we(l,i,P),2);o=c[0],s=c[1],o&&Ae(l,x,e,s)}return 0===u&&(x.__begin=!0),void(x.__isDelay=!0)}if("reverse"===E)h=M;else if({alternate:!0,"alternate-reverse":!0}.hasOwnProperty(E)){var f=n%2==0;h="alternate"===E?f?S:M:f?M:S}else h=S;0===(u-=T)&&(x.__begin=!0);var d,_=function t(e,i,r,n){if(e===i)return n[e].time>r?e-1:e;var a=e+(i-e>>1),o=n[a];return o.time===r?a:o.time>r?t(e,Math.max(a-1,e),r,n):t(Math.min(a+1,i),i,r,n)}(0,W-1,u,h),p=h[_],v=_===W-1,y=a-1<=n;if(v){if(d=u<w+R,O||!y){var g=ae(we(p=p.style,i,P),2);o=g[0],s=g[1]}else{var m=ae(we(p={},i,P),2);o=m[0],s=m[1]}y?d||(x.__nextTime=0,a<=(n=++x.__playCount)&&Ot.__offFrameA(N)):(x.__nextTime=u-w,n=++x.__playCount,x.__nextBegin=!0)}else{var k=h[_+1].time-p.time,b=ae(we(p=Me(p,(u-p.time)/k),i,P),2);o=b[0],s=b[1]}o&&Ae(p,x,e,s),!v||d&&!y||(x.__end=!0,a<=n&&(x.__finish=!0,C(!0)))}},after:function(t){x.__inFps?x.__inFps=!1:(r(t,x.__isDelay),x.__isDelay=!1,x.__begin&&(x.__begin=!1,x.emit(dt.BEGIN,x.playCount)),x.__end&&(x.__end=!1,x.emit(dt.END,x.playCount-1)),x.__finish&&(x.__finish=!1,a()),x.__nextBegin&&(x.__nextBegin=!1,x.__begin=!0))}}}return Ot.__onFrameA(this.__enterFrame),this.__startTime=Ot.__now,this}},{key:"pause",value:function(){var t=this.isDestroyed,e=this.duration,i=this.pending;return t||e<=0||i||(this.__playState="paused",this.__cancelTask(),this.emit(dt.PAUSE)),this}},{key:"finish",value:function(e){var t=this,i=this,r=i.isDestroyed,n=i.duration,a=i.playState,o=i.list;if(r||n<=0||o.length<1||"finished"===a||"idle"===a)return i;i.__cancelTask();var s=i.root,h=i.style,u=i.keys,l=i.frames,c=i.__frameCb,f=i.__clean,d=i.__fin;if(s){var _,p,v;if(i.__stayEnd()){var y=ae(we(v=l[l.length-1].style,h,u),2);_=y[0],p=y[1]}else{var g=ae(we(v={},h,u),2);_=g[0],p=g[1]}_?Ot.__nextFrameA(this.__enterFrame={before:function(){Ae(v,t,s,p),f(!0)},after:function(t){c(t),d(e)}}):(f(!0),d(e))}return i}},{key:"cancel",value:function(t){var e=this,i=this.isDestroyed,r=this.duration,n=this.playState,a=this.list;if(i||r<=0||"idle"===n||a.length<1)return this;this.__cancelTask();var o=this.root,s=this.style,h=this.keys,u=this.__frameCb,l=this.__clean;if(o){var c=ae(we({},s,h),2),f=c[0],d=c[1],_=function(){e.__cancelTask(),e.__begin=e.__end=e.__isDelay=e.__finish=e.__inFps=e.__enterFrame=null,e.emit(dt.CANCEL),Kt(t)&&t()};f?Ot.__nextFrameA(this.__enterFrame={before:function(){Ae({},e,o,d),l()},after:function(t){u(t),_()}}):(l(),_())}return this}},{key:"gotoAndPlay",value:function(t,e,i){var r=this.isDestroyed,n=this.duration,a=this.delay,o=this.endDelay;if(r||n<=0)return this;var s=ae(Ee(e,i),2);return e=s[0],i=s[1],this.__goto(t,e.isFrame,e.excludeDelay),n+a+o<t?this.finish(i):this.play(i)}},{key:"gotoAndStop",value:function(t,e,i){var r=this,n=this.isDestroyed,a=this.duration,o=this.delay,s=this.endDelay;if(n||a<=0)return this;var h=ae(Ee(e,i),2);return e=h[0],i=h[1],a+o+s<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(i):this.play(function(t){r.__playState="paused",r.__cancelTask(),Kt(i)&&i(t)})}},{key:"__goto",value:function(t,e,i){var r=this.duration,n=this.iterations,a=this.delay;if(this.__playState="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),i&&(t+=a);r<t&&this.playCount<n-1;)this.__playCount++,t-=r;return this.__nextTime=t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__cancelTask",value:function(){Ot.__offFrameA(this.__enterFrame),this.__playCb=null}},{key:"__destroy",value:function(){this.__clean&&this.__clean(),this.__startTime=null,this.__isDestroyed=!0,this.removeControl()}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__target}},{key:"root",get:function(){return this.target.root}},{key:"keys",get:function(){return this.__keys}},{key:"style",get:function(){return this.__style}},{key:"props",get:function(){return this.__props}},{key:"list",get:function(){return this.__list}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__duration},set:function(t){this.__duration=Math.max(0,parseFloat(t)||0)}},{key:"delay",get:function(){return this.__delay},set:function(t){this.__delay=Math.max(0,parseFloat(t)||0)}},{key:"endDelay",get:function(){return this.__endDelay},set:function(t){this.__endDelay=Math.max(0,parseFloat(t)||0)}},{key:"fps",get:function(){return this.__fps},set:function(t){(t=parseInt(t)||60)<=0&&(t=60),this.__fps=t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__iterations},set:function(t){t===1/0||se.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1)),this.__iterations=t}},{key:"fill",get:function(){return this.__fill},set:function(t){this.__fill=t||"none"}},{key:"direction",get:function(){return this.__direction},set:function(t){this.__direction=t||"normal"}},{key:"frames",get:function(){return this.__frames}},{key:"framesR",get:function(){return this.__framesR}},{key:"playbackRate",get:function(){return this.__playbackRate},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1),this.__playbackRate=t}},{key:"easing",get:function(){return this.__easing}},{key:"startTime",get:function(){return this.__startTime}},{key:"currentTime",get:function(){return this.__currentTime},set:function(t){0<=(t=parseFloat(t)||0)&&(this.__currentTime=this.__nextTime=t)}},{key:"pending",get:function(){return"running"!==this.playState}},{key:"finished",get:function(){return"finished"===this.playState}},{key:"playState",get:function(){return this.__playState}},{key:"playCount",get:function(){return this.__playCount},set:function(t){this.__playCount=Math.max(0,parseInt(t)||0)}},{key:"isDestroyed",get:function(){return this.__isDestroyed}},{key:"animating",get:function(){var t=this.playState,e=this.options;return"idle"!==t&&("finished"!==t||-1<["forwards","both"].indexOf(e.fill))}},{key:"spfLimit",get:function(){return this.__spfLimit},set:function(t){se.isNumber(t)?t=Math.max(t,parseInt(t)||0):this.__spfLimit=!!t}}]),o}(),Pe=e.AUTO,Ce=e.PX,Oe=e.PERCENT,Le=e.STRING,We=se.clone,Ne=se.int2rgba,Fe=se.equalArr,De=se.extend,Ie=j.calRelative,Be=j.compute,He=j.repaint;function ze(t,e,r,n,i){if(r=Ne(r),t===he.CANVAS)e.forEach(function(t){n.beginPath(),n.fillStyle=r,n.moveTo(t[0],t[1]);for(var e=2,i=t.length;e<i;e+=2)n.lineTo(t[e],t[e+1]);n.fill(),n.closePath()});else if(t===he.SVG){var a="";e.forEach(function(t){a+="M ".concat(t[0]," ").concat(t[1]);for(var e=2,i=t.length;e<i;e+=2)a+="L ".concat(t[e]," ").concat(t[e+1]," ")}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",a],["fill",r]]})}}function Ge(t,e,i,r,n,a,o,s,h,u,l,c){var f=le.calRadius(i,r,n,a,h,u,l,c),d=f?le.genRdRect(t,o,e,i,r,n,a,f):null;t===he.CANVAS?f||(o.beginPath(),o.fillStyle=e,o.rect(i,r,n,a),o.fill(),o.closePath()):t===he.SVG&&s.virtualDom.bb.push(d||{type:"item",tagName:"rect",props:[["x",i],["y",r],["width",n],["height",a],["fill",e]]})}function Xe(t,e,i){return"right"===t.value||"bottom"===t.value?e-i:"center"===t.value?.5*(e-i):t.unit===Ce?t.value:t.unit===Oe?(e-i)*t.value*.01:0}function je(t){return-1<["relative","absolute"].indexOf(t.computedStyle.position)}function Ye(t,e){var i=[];return function e(i,r,t,n){if(Array.isArray(t))t.forEach(function(t){e(i,r,t,n)});else if(t instanceof Ve){if(-1<["canvas","svg"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg");r.push(t),t.__parent=i,n.lastText=null,n.prev&&((n.prev.__next=t).__prev=n.prev),n.prev=t}else if(t instanceof bt)r.push(t),t.__parent=i,n.lastText=null,n.prev&&((n.prev.__next=t).__prev=n.prev),t.__init(),n.prev=t;else if(!se.isNil(t)&&""!==t)if(n.lastText)n.lastText.content+=t;else{var a=n.lastText=new V(t);r.push(a),a.__parent=i,n.prev&&((n.prev.__next=a).__prev=n.prev),n.prev=a}}(t,i,e,{lastText:null,prev:null}),i}var Ve=function(){function g(t){var n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return s(this,g),n=u(this,U(g).call(this)),Array.isArray(e)?(n.props=se.arr2hash(e),n.__props=e):(n.props=e,n.__props=se.hash2arr(e)),n.__tagName=t,n.__style=We(n.props.style)||{},n.__currentStyle=n.__style,n.__listener={},n.__props.forEach(function(t){var e=t[0],i=t[1];if(/^on[a-zA-Z]/.test(e)){e=e.slice(2).toLowerCase();var r=n.__listener[e]=n.__listener[e]||[];-1===r.indexOf(i)&&r.push(i)}}),n.__children=Ye(a(n),i),n.__matrix=null,n.__matrixEvent=null,n.__animationList=[],n.__loadBgi={cb:function(){}},n}return t(g,x),h(g,[{key:"__mp",value:function(r,n,a){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e="margin"+t,i="padding"+t;n[e]=o.__mpWidth(r[e],a),n[i]=o.__mpWidth(r[i],a)})}},{key:"__mpWidth",value:function(t,e){return t.unit===Ce?t.value:t.unit===Oe?t.value*e*.01:0}},{key:"__layout",value:function(t,e,i){var r=t.w,n=this.isDestroyed,a=this.currentStyle,o=this.computedStyle,s=a.display,h=a.width,u=a.position;if(n||"none"===s)o.width=o.height=0;else{if(i||this.__mp(a,o,r),h.unit!==Pe)switch(h.unit){case Ce:r=h.value;break;case Oe:r*=.01*h.value}if(this.__ox=this.__oy=0,"block"===s?this.__layoutBlock(t,e):"flex"===s?this.__layoutFlex(t,e):"inline"===s&&this.__layoutInline(t,e),"relative"===u){var l=a.top,c=a.right,f=a.bottom,d=a.left,_=this.parent;if(l.unit!==Pe){var p=Ie(a,"top",l,_);this.__offsetY(p),o.top=p,o.bottom="auto"}else if(f.unit!==Pe){var v=Ie(a,"bottom",f,_);this.__offsetY(-v),o.bottom=v,o.top="auto"}else o.top=o.bottom="auto";if(d.unit!==Pe){var y=Ie(a,"left",d,_,!0);this.__offsetX(y),o.left=y,o.right="auto"}else if(c.unit!==Pe){var g=Ie(a,"right",c,_,!0);this.__offsetX(-g),o.right=g,o.left="auto"}else o.left=o.right="auto"}else"absolute"!==a.position&&(o.top=o.bottom=o.left=o.right="auto");o.width=this.width,o.height=this.height;var m=this.__animateRecords;if(m){this.__animateRecords=null;var k=this.root.animateController;k.__records=k.records.concat(m)}}}},{key:"__preLayout",value:function(t){var e=t.x,i=t.y,r=t.w,n=t.h;this.__x=e,this.__y=i;var a,o,s=this.currentStyle,h=this.computedStyle,u=s.width,l=s.height,c=h.borderTopWidth,f=h.borderRightWidth,d=h.borderBottomWidth,_=h.borderLeftWidth,p=h.marginTop,v=h.marginRight,y=h.marginBottom,g=h.marginLeft,m=h.paddingTop,k=h.paddingRight,b=h.paddingBottom,x=h.paddingLeft;if(u.unit!==Pe)switch(a=!0,u.unit){case Ce:r=u.value;break;case Oe:r*=.01*u.value}if(l.unit!==Pe)switch(o=!0,l.unit){case Ce:n=l.value;break;case Oe:n*=.01*l.value}return e+=_+g+x,t.x=e,i+=c+p+m,t.y=i,u.unit===Pe&&(r-=_+f+g+v+x+k),l.unit===Pe&&(n-=c+d+p+y+m+b),{fixedWidth:a,fixedHeight:o,x:e,y:i,w:r,h:n}}},{key:"__marginAuto",value:function(t,e){var i=t.position,r=t.marginLeft,n=t.marginRight,a=t.width;if("absolute"!==i&&a!==Pe&&r.unit===Pe&&n.unit===Pe){var o=this.outerWidth;o<e.w&&this.__offsetX(.5*(e.w-o),!0)}}},{key:"render",value:function(t,e,i){var r=this;t===he.SVG&&(this.__virtualDom={bb:[],children:[],opacity:1});var n=this.isDestroyed,a=this.currentStyle,o=this.computedStyle,s=this.width,h=this.height,u=this.innerWidth,l=this.innerHeight,c=this.outerWidth,f=this.outerHeight;["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){!function(t,e,i,r,n){var a=r[i];if(a.unit===Ce){var o=Math.min(.5*t,.5*e);n[i]=Math.min(o,a.value)}else n[i]=0}(s,h,"border".concat(t,"Radius"),a,o)});for(var d=o.display,_=o.marginTop,p=o.marginLeft,v=o.paddingTop,y=o.paddingRight,g=o.paddingBottom,m=o.paddingLeft,k=o.backgroundColor,b=o.borderTopWidth,x=o.borderTopColor,w=o.borderTopStyle,A=o.borderRightWidth,S=o.borderRightColor,M=o.borderRightStyle,E=o.borderBottomWidth,T=o.borderBottomColor,R=o.borderBottomStyle,P=o.borderLeftWidth,C=o.borderLeftColor,O=o.borderLeftStyle,L=o.borderTopLeftRadius,W=o.borderTopRightRadius,N=o.borderBottomRightRadius,F=o.borderBottomLeftRadius,D=o.visibility,I=o.backgroundRepeat,B=o.opacity,H=a.backgroundImage,z=a.backgroundSize,G=a.backgroundPositionX,X=a.backgroundPositionY,j=a.transform,Y=a.transformOrigin,V=this.sx,$=this.sy,q=V+p,U=q+P,Z=U+s+m+y,Q=Z+A,J=$+_,K=J+b,tt=K+h+v+g,et=tt+E,it=this.parent,rt=B;it;)rt*=it.computedStyle.opacity,it=it.parent;t===he.CANVAS?e.globalAlpha=rt:this.__virtualDom.opacity=B;var nt=ue.calOrigin(Y,c,f);o.transformOrigin=nt.join(" "),nt[0]+=V,nt[1]+=$;var at=[1,0,0,1,0,0];if(this.__matrix=at,!n&&"none"!==d){if(it=this.parent,j)at=ue.calMatrix(j,nt,c,f),this.__matrix=at;else{var ot=[];["translateX","translateY","rotateZ","rotate","skewX","skewY","scaleX","scaleY"].forEach(function(t){var e=a[t];if(!se.isNil(e)){o[t]=e.value;var i=-1<t.indexOf("scale");1===e.value&&i||!i&&0===e.value||(e.unit===Oe&&("translateX"===t?o[t]=e.value*c*.01:"translateY"===t&&(o[t]=e.value*f*.01)),ot.push([t,e]))}}),ot.length&&(at=ue.calMatrix(ot,nt,c,f),this.__matrix=at)}for(o.transform="matrix("+at.join(", ")+")";it;){if(it.matrixEvent){at=ue.mergeMatrix(it.matrixEvent,at);break}it=it.parent}if(this.__matrixEvent=at,t===he.CANVAS?e.setTransform.apply(e,oe(at)):t===he.SVG&&(Fe(this.matrix,[1,0,0,1,0,0])||(this.virtualDom.transform="matrix(".concat(this.matrix.join(","),")"))),"hidden"!==D){var st,ht,ut;if(/,0\)$/.test(k)||Ge(t,k,U,K,u,l,e,this,L,W,N,F),o.backgroundPositionX=0,o.backgroundPositionY=0,st=u,ht=l,ut=[],z.forEach(function(t,e){t.unit===Ce?ut.push(t.value):t.unit===Oe?ut.push(t.value*(e?ht:st)*.01):t.unit===Pe?ut.push(-1):t.unit===Le&&ut.push("contain"===t.value?-2:-3)}),z=ut,o.backgroundSize=z.join(" "),H){var lt=this.__loadBgi;if(se.isString(H)){if(lt.url===H){var ct=lt.source;if(ct){var ft=lt.width,dt=lt.height,_t=ae(z,2),pt=_t[0],vt=_t[1];-1===pt&&-1===vt?(pt=ft,vt=dt):-2===pt?u<ft&&l<dt?(vt=dt/l)<=(pt=ft/u)?vt=(pt=u)*dt/ft:pt=(vt=l)*ft/dt:u<ft?vt=(pt=u)*dt/ft:l<dt?pt=(vt=l)*ft/dt:(pt=ft,vt=dt):-3===pt?ft<u&&dt<l?(pt=ft/u)<=(vt=dt/l)?vt=(pt=u)*dt/ft:pt=(vt=l)*ft/dt:ft<u||!(dt<l)&&(pt=ft/u)<=(vt=dt/l)?vt=(pt=u)*dt/ft:pt=(vt=l)*ft/dt:-1===pt?pt=vt*ft/dt:-1===vt&&(vt=pt*dt/ft);var yt=U+Xe(G,u,pt),gt=K+Xe(X,l,vt);o.backgroundPositionX=yt,o.backgroundPositionY=gt;var mt=0,kt=0,bt=0,xt=0;if(-1<["repeat-x","repeat"].indexOf(I)){var wt=yt-U;0<wt&&(mt=Math.ceil(wt/pt)),0<(wt=U+u-yt-pt)&&(kt=Math.ceil(wt/pt))}if(-1<["repeat-y","repeat"].indexOf(I)){var At=gt-K;0<At&&(bt=Math.ceil(At/vt)),0<(At=K+l-gt-vt)&&(xt=Math.ceil(At/vt))}var St=[];if(0<mt)for(var Mt=0;Mt<mt;Mt++)St.push([yt-(Mt+1)*pt,gt]);if(0<kt)for(var Et=0;Et<kt;Et++)St.push([yt+(Et+1)*pt,gt]);if(0<bt)for(var Tt=0;Tt<bt;Tt++)St.push([yt,gt-(Tt+1)*vt]);if(0<xt)for(var Rt=0;Rt<xt;Rt++)St.push([yt,gt+(Rt+1)*vt]);if(0<mt&&0<bt)for(var Pt=0;Pt<mt;Pt++)for(var Ct=0;Ct<bt;Ct++)St.push([yt-(Pt+1)*pt,gt-(Ct+1)*vt]);if(0<kt&&0<bt)for(var Ot=0;Ot<kt;Ot++)for(var Lt=0;Lt<bt;Lt++)St.push([yt+(Ot+1)*pt,gt-(Lt+1)*vt]);if(0<mt&&0<xt)for(var Wt=0;Wt<mt;Wt++)for(var Nt=0;Nt<xt;Nt++)St.push([yt-(Wt+1)*pt,gt+(Nt+1)*vt]);if(0<kt&&0<xt)for(var Ft=0;Ft<kt;Ft++)for(var Dt=0;Dt<xt;Dt++)St.push([yt+(Ft+1)*pt,gt+(Dt+1)*vt]);var It=-1<["repeat-x","repeat-y","repeat"].indexOf(I)||yt<U||gt<K||u<pt||l<vt;if(t===he.CANVAS){var Bt,Ht;if(It){var zt=this.root,Gt=zt.width,Xt=zt.height;Bt=fe.getCacheCanvas(Gt,Xt),(Ht=Bt.ctx).setTransform.apply(Ht,oe(at))}else Ht=e;if(Ht.drawImage(ct,yt,gt,pt,vt),St.forEach(function(t){Ht.drawImage(ct,t[0],t[1],pt,vt)}),It){Ht.globalCompositeOperation="destination-in",Ge(t,"#FFF",U,K,u,l,Ht,this,L,W,N,F),e.setTransform(1,0,0,1,0,0),e.drawImage(Bt.canvas,0,0),e.setTransform.apply(e,oe(at)),Ht.globalCompositeOperation="source-over";var jt=this.root,Yt=jt.width,Vt=jt.height;Ht.setTransform(1,0,0,1,0,0),Ht.clearRect(0,0,Yt,Vt)}}else if(t===he.SVG){var $t=ce.matrixResize(ft,dt,pt,vt,yt,gt,u,l);$t=$t&&$t.join(",");var qt,Ut=[["xlink:href",H],["x",yt],["y",gt],["width",ft],["height",dt]];if($t&&"1,0,0,1,0,0"!==$t&&(qt=!0,Ut.push(["transform","matrix("+$t+")"])),It){var Zt=i.add({tagName:"mask",props:[],children:[{tagName:"rect",props:[["x",U],["y",K],["width",u],["height",l],["fill","#FFF"]]}]});this.virtualDom.bbMask="url(#".concat(Zt,")")}this.virtualDom.bb.push({type:"img",tagName:"image",props:Ut}),St.forEach(function(t){var e=We(Ut);if(qt){var i=ce.matrixResize(ft,dt,pt,vt,t[0],t[1],u,l);i&&"1,0,0,1,0,0"!==i&&(i=i.join(","),e[5][1]="matrix("+i+")")}e[1][1]=t[0],e[2][1]=t[1],r.virtualDom.bb.push({type:"img",tagName:"image",props:e})})}o.backgroundSize="".concat(pt," ").concat(vt),o.backgroundPositionX=yt,o.backgroundPositionY=gt}}else lt.url=H,lt.source=null,fe.measureImg(H,function(t){t.success&&t.url===lt.url&&!r.__isDestroyed&&(lt.source=t.source,lt.width=t.width,lt.height=t.height,r.root.delRefreshTask(lt.cb),r.root.addRefreshTask(lt.cb))},{width:u,height:l});o.backgroundImage=H}else if(H.k){Ge(t,this.__gradient(t,e,i,U,K,Z,tt,u,l,"backgroundImage",H,o),U,K,u,l,e,this)}}if(0<b&&!/,0\)$/.test(x)){var Qt=Math.atan(b/P),Jt=Math.atan(b/A);ze(t,le.calPoints(b,w,Qt,Jt,q,U,Z,Q,J,K,tt,et,0),x,e,this)}if(0<A&&!/,0\)$/.test(S)){var Kt=Math.atan(A/b),te=Math.atan(A/E);ze(t,le.calPoints(A,M,Kt,te,q,U,Z,Q,J,K,tt,et,1),S,e,this)}if(0<E&&!/,0\)$/.test(T)){var ee=Math.atan(E/P),ie=Math.atan(E/A);ze(t,le.calPoints(E,R,ee,ie,q,U,Z,Q,J,K,tt,et,2),T,e,this)}if(0<P&&!/,0\)$/.test(C)){var re=Math.atan(P/b),ne=Math.atan(P/E);ze(t,le.calPoints(P,O,re,ne,q,U,Z,Q,J,K,tt,et,3),C,e,this)}}}}},{key:"__renderByMask",value:function(e,t,i){var r=this.prev,n=this.root;if(r&&r.isMask)if(e===he.CANVAS){var a=n.width,o=n.height,s=fe.getCacheCanvas(a,o);this.render(e,s.ctx);for(var h=[];r&&r.isMask;)h.unshift(r),r=r.prev;if(1===h.length)r=h[0],s.ctx.globalCompositeOperation="destination-in",r.render(e,s.ctx),s.draw(s.ctx),t.drawImage(s.canvas,0,0),s.draw(t);else{var u=fe.getMaskCanvas(a,o);h.forEach(function(t){t.render(e,u.ctx)}),u.draw(u.ctx),s.ctx.globalCompositeOperation="destination-in",s.ctx.drawImage(u.canvas,0,0),s.draw(s.ctx),t.drawImage(s.canvas,0,0),s.draw(t),u.ctx.globalCompositeOperation="source-over",u.ctx.clearRect(0,0,a,o),u.draw(u.ctx)}s.ctx.globalCompositeOperation="source-over",s.ctx.clearRect(0,0,a,o),s.draw(s.ctx)}else e===he.SVG&&(this.render(e,t,i),this.virtualDom.mask=r.maskId);else this.render(e,t,i)}},{key:"__destroy",value:function(){var t=this.props.ref;if(t){var e=this.host||this.root;e&&e.ref[t]&&delete e.ref[t]}this.animationList.forEach(function(t){return t.__destroy()}),this.root.delRefreshTask(this.__loadBgi.cb),Z(U(g.prototype),"__destroy",this).call(this),this.__matrix=this.__matrixEvent=null}},{key:"__emitEvent",value:function(e,t){var i=e.event.type,r=this.isDestroyed,n=this.listener,a=this.children,o=this.computedStyle;if(!r&&"none"!==o.display&&!e.__stopPropagation){var s,h;n.hasOwnProperty(i)&&(s=n[i]);var u=this.zIndexChildren;if(t){if(!this.isGeom){for(var l=u.length-1;0<=l;l--){var c=u[l];(c instanceof g&&je(c)||c instanceof bt&&c.shadowRoot instanceof g&&je(c.shadowRoot))&&c.__emitEvent(e,t)&&(h=!0)}if(!h)for(var f=a.length-1;0<=f;f--){var d=a[f];(d instanceof g&&!je(d)||d instanceof bt&&d.shadowRoot instanceof g&&!je(d.shadowRoot))&&d.__emitEvent(e,t)&&(h=!0)}}if(!h&&this.root.__touchstartTarget!==this)return;if(e.__stopPropagation)return;return-1<["touchmove","touchend","touchcancel"].indexOf(i)&&(e.target=this.root.__touchstartTarget),s&&s.forEach(function(t){e.__stopImmediatePropagation||t(e)}),!0}if(!this.isGeom){for(var _=u.length-1;0<=_;_--){var p=u[_];(p instanceof g&&je(p)||p instanceof bt&&p.shadowRoot instanceof g&&je(p.shadowRoot))&&p.__emitEvent(e)&&(h=!0)}if(!h)for(var v=a.length-1;0<=v;v--){var y=a[v];(y instanceof g&&!je(y)||y instanceof bt&&y.shadowRoot instanceof g&&!je(y.shadowRoot))&&y.__emitEvent(e)&&(h=!0)}}if(!e.__stopPropagation)return h||this.willResponseEvent(e)?(e.__hasEmitted=!0,s&&s.forEach(function(t){e.__stopImmediatePropagation||se.isFunction(t)&&t(e)}),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,i=t.y;if(!t.__hasEmitted){var r=this.sx,n=this.sy,a=this.outerWidth,o=this.outerHeight,s=this.matrixEvent;return ue.pointInQuadrilateral(e,i,r,n,r+a,n,r+a,n+o,r,n+o,s)?(t.target||(t.target=this,"touchstart"===t.event.type&&(this.root.__touchstartTarget=this)),!0):void 0}}},{key:"__gradient",value:function(t,e,i,r,n,a,o,s,h,u,l,c){var f=l.k,d=l.v,_=l.d;c[u]=f+"-gradient(";var p,v=r+.5*s,y=n+.5*h;if("linear"===f){var g=M.getLinear(d,_,v,y,s,h);p=this.__getLg(t,e,i,g),c[u]+=_+"deg"}else if("radial"===f){var m=M.getRadial(d,_,v,y,r,n,a,o);p=this.__getRg(t,e,i,m),c[u]+=_}return d.forEach(function(t){c[u]+=", "+Ne(t[0]),t[1]&&(c[u]+=" "+t[1].str)}),c[u]+=")",p}},{key:"__getLg",value:function(t,e,i,r){if(t===he.CANVAS){var n=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach(function(t){n.addColorStop(t[1],t[0])}),n}if(t===he.SVG){var a=i.add({tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",t[0]],["offset",100*t[1]+"%"]]}})});return"url(#".concat(a,")")}}},{key:"__getRg",value:function(t,e,i,r){if(t===he.CANVAS){var n=e.createRadialGradient(r.cx,r.cy,0,r.cx,r.cy,r.r);return r.stop.forEach(function(t){n.addColorStop(t[1],t[0])}),n}if(t===he.SVG){var a=i.add({tagName:"radialGradient",props:[["cx",r.cx],["cy",r.cy],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",t[0]],["offset",100*t[1]+"%"]]}})});return"url(#".concat(a,")")}}},{key:"animate",value:function(t,e,i){if(!this.isDestroyed){var r=new Re(this,t,e);return this.animationList.push(r),i&&this.root.animateController.add(r),e.hasOwnProperty("autoPlay")&&!e.autoPlay?r:r.play()}}},{key:"removeAnimate",value:function(t){if(t instanceof Re){var e=this.animationList.indexOf(t);-1<e&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1))}}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"__initRef",value:function(e){var t=this.props.ref;se.isString(t)?e.ref[t]=this:se.isFunction(t)&&t(e),this.children.forEach(function(t){(t instanceof g||t instanceof bt)&&t.__initRef(e)})}},{key:"__measure",value:function(e,i,t){Be(this,t),this.children.forEach(function(t){t.__measure(e,i)})}},{key:"__repaint",value:function(t){He(this,t),this.children.forEach(function(t){(t instanceof g||t instanceof bt)&&t.__repaint()})}},{key:"tagName",get:function(){return this.__tagName}},{key:"children",get:function(){return this.__children}},{key:"root",get:function(){return this.host?this.host.root:this.parent?this.parent.root:-1<["canvas","svg"].indexOf(this.tagName)?this:void 0}},{key:"host",get:function(){return this.__host?this.__host:this.parent?this.parent.host:void 0}},{key:"isGeom",get:function(){return"$"===this.tagName.charAt(0)}},{key:"innerWidth",get:function(){var t=this.computedStyle,e=t.display,i=t.paddingRight,r=t.paddingLeft;return"none"===e?0:this.width+r+i}},{key:"innerHeight",get:function(){var t=this.computedStyle,e=t.display,i=t.paddingTop,r=t.paddingBottom;return"none"===e?0:this.height+i+r}},{key:"outerWidth",get:function(){var t=this.computedStyle,e=t.display,i=t.borderLeftWidth,r=t.borderRightWidth,n=t.marginRight,a=t.marginLeft;return"none"===e?0:this.innerWidth+i+r+a+n}},{key:"outerHeight",get:function(){var t=this.computedStyle,e=t.display,i=t.borderTopWidth,r=t.borderBottomWidth,n=t.marginTop,a=t.marginBottom;return"none"===e?0:this.innerHeight+i+r+n+a}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"animateStyle",get:function(){var t=this.style,e=this.animationList,i=De({},t);return e.forEach(function(t){t.animating&&De(i,t.style)}),i}},{key:"currentStyle",get:function(){return this.__currentStyle}}]),g}(),$e=function(){function i(t,e){s(this,i),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return h(i,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var i=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==i&&t.__offsetY(i-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.width}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.height)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}}]),i}(),qe={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",textAlign:"inherit",transformOrigin:"center",visibility:"visible",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,scaleX:1,scaleY:1,skewX:0,skewY:0,rotateZ:0},Ue={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt"},Ze=[];Object.keys(qe).forEach(function(t){var e=qe[t];Ze.push({k:t,v:e})});var Qe=[];Object.keys(Ue).forEach(function(t){var e=Ue[t];Qe.push({k:t,v:e})});var Je={DOM:qe,GEOM:Ue,dom:Ze,geom:Qe};function Ke(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function ti(t,e){return!Array.isArray(t)||t.length<2||(e=e||function(){},function t(e,i,r,n){if(!(r<=i)){for(var a=i,o=r,s=a,h=e[s],u=!0;a<o;)if(u){for(;a<o;o--)if(n.call(e,h,e[o])){Ke(e,s,o),s=o,u=!u,a++;break}}else for(;a<o;a++)if(n.call(e,e[a],h)){Ke(e,s,a),s=a,u=!u,o--;break}t(e,i,s-1,n),t(e,s+1,r,n)}}(t,0,t.length-1,e)),t}var ei=e.AUTO,ii=e.PX,ri=e.PERCENT,ni=j.calAbsolute,ai={div:!0,span:!0,img:!0},oi={span:!0,img:!0};function si(t){return-1<["relative","absolute"].indexOf(t.computedStyle.position)}var hi,ui=function(){function c(t,e,i){var r;s(this,c),(r=u(this,U(c).call(this,t,e,i))).__lineGroups=[];var n=a(r).style;return n.display&&{flex:!0,block:!0,inline:!0,none:!0}.hasOwnProperty(n.display)||(oi.hasOwnProperty(r.tagName)?n.display="inline":n.display="block"),j.normalize(n,Je.dom),r}return t(c,Ve),h(c,[{key:"__tryLayInline",value:function(t,e){var i=this.flowChildren,r=this.currentStyle.width;if(r.unit===ii)return t-r.value;if(r.unit===ri)return t-e*r.value*.01;for(var n=0;n<i.length;n++){if(t<0)return t;var a=i[n];t-=a instanceof Ve||a instanceof bt?a.__tryLayInline(t,e):a.textWidth}return t}},{key:"__offsetX",value:function(e,i){Z(U(c.prototype),"__offsetX",this).call(this,e,i),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,i)})}},{key:"__offsetY",value:function(e,i){Z(U(c.prototype),"__offsetY",this).call(this,e,i),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,i)})}},{key:"__calAutoBasis",value:function(a,o,s,t){var h=0,u=0,l=0,e=this.flowChildren,i=this.currentStyle,r=this.computedStyle,n=i.width,c=i.height,f=i.marginLeft,d=i.marginTop,_=i.marginRight,p=i.marginBottom,v=i.paddingLeft,y=i.paddingTop,g=i.paddingRight,m=i.paddingBottom,k=r.borderTopWidth,b=r.borderRightWidth,x=r.borderBottomWidth,w=r.borderLeftWidth,A=a?n:c;if(A.unit===ii&&(h=l=A.value,t&&(u=h)),e.forEach(function(t){if(t instanceof Ve||t instanceof bt&&t.shadowRoot instanceof Ve){var e=t.__calAutoBasis(a,o,s,!0),i=e.b,r=e.min,n=e.max;h=Math.max(h,i),u=Math.max(u,r),l=Math.max(l,n)}else l=a?(u=Math.max(t.charWidth,u),Math.max(t.textWidth,l)):(t.__layout({x:0,y:0,w:o,h:s},!0),u=Math.max(u,t.height),Math.max(l,t.height))}),a){var S=b+w+(this.__calMp(f,o)+this.__calMp(_,o)+this.__calMp(v,o)+this.__calMp(g,o));h+=S,l+=S,u+=S}else{var M=k+x+(this.__calMp(d,o)+this.__calMp(p,o)+this.__calMp(y,o)+this.__calMp(m,o));h+=M,l+=M,u+=M}return{b:h,min:u,max:l}}},{key:"__calMp",value:function(t,e){var i=0;return t.unit===ii?i+=t.value:t.unit===ri&&(t.value*=.01*e,t.unit=ii,i+=t.value),i}},{key:"__layoutBlock",value:function(e,i){var t=this.flowChildren,r=this.currentStyle,n=this.computedStyle,a=this.lineGroups;a.splice(0);var o=n.textAlign,s=this.__preLayout(e),h=s.fixedWidth,u=s.fixedHeight,l=s.x,c=s.y,f=s.w,d=s.h;if(h&&i)this.__width=f;else{var _=0,p=0,v=new $e(l,c);t.forEach(function(t){t instanceof Ve||t instanceof bt&&t.shadowRoot instanceof Ve?"inline"===t.currentStyle.display?l===e.x?(v.add(t),t.__layout({x:l,y:c,w:f,h:d},i),l+=t.outerWidth,i&&(_=Math.max(_,p),p=t.outerWidth)):(0<=t.__tryLayInline(f-l+e.x,f)?t.__layout({x:l,y:c,w:f,h:d},i):(a.push(v),i||v.verticalAlign(),l=e.x,c+=v.height,t.__layout({x:e.x,y:c,w:f,h:d},i),v=new $e(l,c),i&&(_=Math.max(_,p),p=0)),l+=t.outerWidth,v.add(t),i&&(p+=t.outerWidth)):(v.size&&(a.push(v),v.verticalAlign(),c+=v.height,v=new $e(e.x,c),i&&(_=Math.max(_,p),p=0)),t.__layout({x:e.x,y:c,w:f,h:d},i),l=e.x,c+=t.outerHeight,i&&(_=Math.max(_,t.outerWidth),p=0)):l===e.x?(v.add(t),t.__layout({x:l,y:c,w:f,h:d},i),l+=t.width,i&&(_=Math.max(_,p),p=t.width)):(0<=t.__tryLayInline(f-l+e.x)?t.__layout({x:l,y:c,w:f,h:d},i):(a.push(v),v.verticalAlign(),l=e.x,c+=v.height,t.__layout({x:e.x,y:c,w:f,h:d},i),v=new $e(l,c),i&&(_=Math.max(_,p),p=0)),l+=t.width,v.add(t),i&&(p+=t.width))}),v.size&&(a.push(v),i?_=Math.max(_,p):v.verticalAlign(),c+=v.height),this.__width=h||!i?f:_,this.__height=u?d:c-e.y,!i&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=f-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)}),i||this.__marginAuto(r,e)}}},{key:"__layoutFlex",value:function(t,l){var e=this.flowChildren,i=this.currentStyle,r=i.flexDirection,n=i.justifyContent,a=i.alignItems,o=this.__preLayout(t),s=o.fixedWidth,S=o.fixedHeight,M=o.x,E=o.y,T=o.w,R=o.h;if(s&&l)this.__width=T;else{var c=0,P="row"===r,C=[],O=[],L=[],W=[],N=0,F=0,D=0,f=0;if(e.forEach(function(t){if(t instanceof Ve||t instanceof bt&&t.shadowRoot instanceof Ve){var e=t.__calAutoBasis(!!l||P,T,R),i=e.b,r=e.min,n=e.max;if(l)return void(P?c+=n:c=Math.max(c,n));var a=t.currentStyle,o=t.computedStyle,s=a.flexGrow,h=a.flexShrink,u=a.flexBasis;C.push(s),O.push(h),N+=s,F+=h,u.unit===ei?(L.push(n),D+=n):u.unit===ii?(o.flexBasis=i=u.value,L.push(i),D+=i):u.unit===ri&&(i=o.flexBasis=(P?T:R)*u.value*.01,L.push(i),D+=i),f+=n,W.push(r)}else{if(l)return void(P?c+=t.textWidth:c=Math.max(c,t.textWidth));C.push(0),O.push(1),F+=1,P?(L.push(t.textWidth),D+=t.textWidth,f+=t.textWidth,W.push(t.charWidth)):(t.__layout({x:0,y:0,w:T,h:R},!0),L.push(t.height),D+=t.height,f+=t.height,W.push(t.height))}}),l)this.__width=Math.min(c,T);else{var I=0,B=(P?T:R)<f;e.forEach(function(t,e){var i,r=O[e],n=C[e];if(B){var a=D-(P?T:R);i=r?L[e]-a*r/F:L[e]}else{var o=(P?T:R)-D;i=n?L[e]+o*n/N:L[e]}if(i=Math.max(i,W[e]),t instanceof Ve||t instanceof bt&&t.shadowRoot instanceof Ve){var s=t.currentStyle,h=t.computedStyle,u=s.display,l=s.flexDirection,c=s.width,f=s.height;if("inline"===u&&(s.display=h.display="block"),P?("flex"===u&&"column"===l&&S&&f.unit===ei&&(f.value=R,f.unit=ii),t.__layout({x:M,y:E,w:i,h:R})):("flex"===u&&"row"===l&&c.unit===ei&&(c.value=T,c.unit=ii),t.__layout({x:M,y:E,w:T,h:i})),B&&r||!B&&n){var d=h.borderTopWidth,_=h.borderRightWidth,p=h.borderBottomWidth,v=h.borderLeftWidth,y=h.marginTop,g=h.marginRight,m=h.marginBottom,k=h.marginLeft,b=h.paddingTop,x=h.paddingRight,w=h.paddingBottom,A=h.paddingLeft;P?t.__width=i-k-g-A-x-v-_:t.__height=i-y-m-b-w-d-p}}else t.__layout({x:M,y:E,w:P?i:T,h:P?R:i});I=P?(M+=t.outerWidth,Math.max(I,t.outerHeight)):(E+=t.outerHeight,Math.max(I,t.outerWidth))});var h=P?T-M+t.x:R-E+t.y;if(!B&&0===N&&0<h){var u=e.length;if("flex-end"===n)for(var d=0;d<u;d++){var _=e[d];P?_.__offsetX(h,!0):_.__offsetY(h,!0)}else if("center"===n)for(var p=.5*h,v=0;v<u;v++){var y=e[v];P?y.__offsetX(p,!0):y.__offsetY(p,!0)}else if("space-between"===n)for(var g=h/(u-1),m=1;m<u;m++){var k=e[m];P?k.__offsetX(g*m,!0):k.__offsetY(g*m,!0)}else if("space-around"===n)for(var b=h/(u+1),x=0;x<u;x++){var w=e[x];P?w.__offsetX(b*(x+1),!0):w.__offsetY(b*(x+1),!0)}}P?(S&&(I=R),E+=I):s&&(I=T),l||("stretch"===a?e.forEach(function(t){var e=t.computedStyle,i=t.currentStyle,r=e.borderTopWidth,n=e.borderRightWidth,a=e.borderBottomWidth,o=e.borderLeftWidth,s=e.marginTop,h=e.marginRight,u=e.marginBottom,l=e.marginLeft,c=e.paddingTop,f=e.paddingRight,d=e.paddingBottom,_=e.paddingLeft;P?i.height.unit===ei&&(t.__height=e.height=I-s-u-c-d-r-a):i.width.unit===ei&&(t.__width=e.width=I-l-h-_-f-n-o)}):"center"===a?e.forEach(function(t){var e=I-t.outerHeight;0<e&&t.__offsetY(.5*e,!0)}):"flex-end"===a&&e.forEach(function(t){var e=I-t.outerHeight;0<e&&t.__offsetY(e,!0)})),this.__width=T,this.__height=S?R:E-t.y,this.__marginAuto(i,t)}}}},{key:"__layoutInline",value:function(e,i){var r=this,t=this.flowChildren,n=this.computedStyle,a=this.lineGroups;a.splice(0);var o=n.textAlign,s=this.__preLayout(e),h=s.fixedWidth,u=s.fixedHeight,l=s.x,c=s.y,f=s.w,d=s.h;if(h&&i)this.__width=f;else{var _=0,p=0,v=new $e(l,c);t.forEach(function(t){t instanceof Ve||t instanceof bt&&t.shadowRoot instanceof Ve?("inline"!==t.computedStyle.display&&(t.currentStyle.display=t.computedStyle.display="inline",console.error("Inline can not contain block/flex")),l===e.x?(v.add(t),t.__layout({x:l,y:c,w:f,h:d},i),l+=t.outerWidth,_=Math.max(_,p),p=t.outerWidth):(0<=t.__tryLayInline(f-l+e.x,f)?t.__layout({x:l,y:c,w:f,h:d},i):(a.push(v),v.verticalAlign(),l=e.x,c+=v.height,t.__layout({x:e.x,y:c,w:f,h:d},i),v=new $e(l,c),_=Math.max(_,p),p=0),l+=t.outerWidth,v.add(t),p+=t.outerWidth)):l===e.x?(v.add(t),t.__layout({x:l,y:c,w:f,h:d},i),l+=t.width,_=Math.max(_,p),p=t.width):(0<=t.__tryLayInline(f-l+e.x)?t.__layout({x:l,y:c,w:f,h:d},i):(a.push(v),i||v.verticalAlign(),l=e.x,c+=v.height,t.__layout({x:e.x,y:c,w:f,h:d},i),v=new $e(l,c),_=Math.max(_,p),p=0),l+=t.width,v.add(t),p+=t.width)}),v.size&&(a.push(v),i||v.verticalAlign(),c+=v.height,_=Math.max(_,p)),this.__width=h?f:_,this.__height=u?d:c-e.y,!i&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=r.__width-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)})}}},{key:"__layoutAbs",value:function(i,r){var S=i.sx,M=i.sy,E=i.innerWidth,T=i.innerHeight,t=i.computedStyle,e=this.isDestroyed,n=this.children,a=this.absChildren,o=t.display,s=t.borderTopWidth,h=t.borderLeftWidth,u=t.marginTop,l=t.marginLeft,R=t.paddingLeft;e||"none"===o||(S+=l+h,M+=u+s,a.forEach(function(t){var e=t.currentStyle,i=t.computedStyle;t.__mp(e,i,E),"inline"===i.display&&(e.display=i.display="block");var r,n,a,o,s,h,u,l,c,f,d,_=e.left,p=e.top,v=e.right,y=e.bottom,g=e.width,m=e.height,k=e.display,b=e.flexDirection;if(_.unit!==ei?(f=!0,i.left=ni(e,"left",_,E)):i.left="auto",v.unit!==ei?(l=!0,i.right=ni(e,"right",v,E)):i.right="auto",p.unit!==ei?(u=!0,i.top=ni(e,"top",p,T)):i.top="auto",y.unit!==ei?(c=!0,i.bottom=ni(e,"bottom",y,T)):i.bottom="auto",f&&l?(r=S+i.left,a=S+E-i.right-r):f&&g.unit!==ei?(r=S+i.left,a=g.unit===ii?g.value:E*g.value*.01):l&&g.unit!==ei?(a=g.unit===ii?g.value:E*g.value*.01,r=S+E-i.right-a,r-=i.marginLeft,r-=i.marginRight,r-=i.paddingLeft,r-=i.paddingRight,r-=i.borderLeftWidth,r-=i.borderRightWidth):f?r=S+i.left:l?(r=S+E-i.right,s=!0):(r=S+R,g.unit!==ei&&(a=g.unit===ii?g.value:E*g.value*.01)),u&&c)n=M+i.top,o=M+T-i.bottom-n;else if(u&&m.unit!==ei)n=M+i.top,o=m.unit===ii?m.value:T*m.value*.01;else if(c&&m.unit!==ei)o=m.unit===ii?m.value:T*m.value*.01,n=M+T-i.bottom-o,n-=i.marginTop,n-=i.marginBottom,n-=i.paddingTop,n-=i.paddingBottom,n-=i.borderTopWidth,n-=i.borderBottomWidth;else if(u)n=M+i.top;else if(c)n=M+T-i.bottom,h=!0;else{n=M;for(var x=t.prev;x;){if(x instanceof V||"absolute"!==x.computedStyle.position){n=x.y+x.outerHeight;break}x=x.prev}x||(n=M),m.unit!==ei&&(o=m.unit===ii?m.value:T*m.value*.01)}void 0!==a&&(e.width={value:a,unit:ii}),void 0!==o&&(e.height={value:o,unit:ii}),("block"===k&&void 0===a||"flex"===k&&(void 0===a||"column"===b&&void 0===o))&&(d=!0);var w=s?r-S:E+S-r,A=h?n-M:T+M-n;d&&(t.__layout({x:r,y:n,w:w,h:A},!0,!0),w=t.outerWidth),t.__layout({x:r,y:n,w:w,h:A},!1,!0),s&&t.__offsetX(-t.outerWidth,!0),h&&t.__offsetY(-t.outerHeight,!0)}),n.forEach(function(t){if(t instanceof c)t.__layoutAbs(-1<["absolute","relative"].indexOf(t.computedStyle.position)?t:i,r);else if(t instanceof bt){var e=t.shadowRoot;e instanceof c&&e.__layoutAbs(e,r)}}))}},{key:"render",value:function(e,i,r){Z(U(c.prototype),"render",this).call(this,e,i,r),e===he.SVG&&(this.virtualDom.type="dom");var t=this.isDestroyed,n=this.computedStyle,a=n.display,o=n.visibility,s=this.flowChildren,h=this.children;if(!t&&"none"!==a&&"hidden"!==o){h.forEach(function(t){t.isMask&&t.__renderAsMask(e,i,r)}),s.forEach(function(t){!t.isMask&&(t instanceof V||"static"===t.computedStyle.position)&&t.__renderByMask(e,i,r)});var u=this.zIndexChildren;u.forEach(function(t){t instanceof V||!si(t)||t.__renderByMask(e,i,r)}),e===he.SVG&&(this.__virtualDom=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach(function(t){l(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},this.virtualDom,{children:u.map(function(t){return t.virtualDom})}))}}},{key:"__destroy",value:function(){this.children.forEach(function(t){t.__destroy()}),Z(U(c.prototype),"__destroy",this).call(this),this.children.splice(0),this.lineGroups.splice(0)}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return t instanceof bt&&(t=t.shadowRoot),t instanceof V||"absolute"!==t.computedStyle.position})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return t instanceof bt&&(t=t.shadowRoot),t instanceof Ve&&"absolute"===t.computedStyle.position})}},{key:"zIndexChildren",get:function(){var t=this.children.filter(function(t){return!t.isMask});return ti(t,function(t,e){if(!(t instanceof V))return!!(e instanceof V&&si(t))||(!!(t.computedStyle.zIndex>e.computedStyle.zIndex&&si(t)&&si(e))||(!("static"!==e.computedStyle.position||!si(t))||void 0))}),t}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.y}}],[{key:"isValid",value:function(t){return ai.hasOwnProperty(t)}}]),c}(),li=e.AUTO,ci=function(){function q(t,e){var i;s(this,q);var r=(i=u(this,U(q).call(this,t,e))).props.src,n=i.__loadImg={cb:function(){}};return r||(n.error=!0),i}return t(q,ui),h(q,[{key:"__preLayout",value:function(t){var e=Z(U(q.prototype),"__preLayout",this).call(this,t);if(e.fixedWidth&&e.fixedHeight)return e;var i=this.__loadImg;return i.error?e.fixedWidth?e.h=e.w:e.fixedHeight?e.w=e.h:e.w=e.h=32:i.source?e.fixedWidth?e.h=e.w*i.height/i.width:e.fixedHeight?e.w=e.h*i.width/i.height:(e.w=i.width,e.h=i.height):e.w=e.h=0,e.fixedWidth=!0,e.fixedHeight=!0,e}},{key:"__addGeom",value:function(t,e){e=se.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),Z(U(q.prototype),"__destroy",this).call(this)}},{key:"render",value:function(t,e,i){var a=this;Z(U(q.prototype),"render",this).call(this,t,e,i);var r=this.sx,n=this.sy,o=this.width,s=this.height,h=this.isDestroyed,u=this.props.src,l=this.computedStyle,c=l.display,f=l.borderTopWidth,d=l.borderLeftWidth,_=l.marginTop,p=l.marginLeft,v=l.paddingTop,y=l.paddingLeft,g=l.borderTopLeftRadius,m=l.borderTopRightRadius,k=l.borderBottomRightRadius,b=l.borderBottomLeftRadius;if(!h&&"none"!==c){var x=r+p+d+y,w=n+_+f+v,A=this.__loadImg;if(A.error){var S=.02*Math.min(o,s),M="#DDD",E=x+.7*o,T=w+.3*s,R=5*S,P=[[x+.15*o,w+.7*s],[x+.3*o,w+.4*s],[x+.5*o,w+.6*s],[x+.6*o,w+.5*s],[x+.9*o,w+.8*s],[x+.15*o,w+.8*s]];if(t===he.CANVAS){e.strokeStyle="#CCC",e.lineWidth=S,e.fillStyle=M,e.beginPath(),e.moveTo(x,w),e.lineTo(x+o,w),e.lineTo(x+o,w+s),e.lineTo(x,w+s),e.lineTo(x,w),e.stroke(),e.closePath(),e.beginPath(),e.arc(E,T,R,0,2*Math.PI),e.fill(),e.closePath(),e.beginPath(),e.moveTo(P[0][0],P[0][1]);for(var C=1,O=P.length;C<O;C++){var L=P[C];e.lineTo(L[0],L[1])}e.lineTo(P[0][0],P[0][1]),e.fill(),e.closePath()}else if(t===he.SVG){this.__addGeom("rect",[["x",x],["y",w],["width",o],["height",s],["stroke","#CCC"],["stroke-width",S],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",E],["cy",T],["r",R],["fill",M]]);for(var W="",N=0,F=P.length;N<F;N++){var D=P[N];W+="".concat(D[0],",").concat(D[1]," ")}this.__addGeom("polygon",[["points",W],["fill",M]])}}else if(A.url===u){var I=A.source;if(I){var B=le.calRadius(x,w,o,s,g,m,k,b);if(t===he.CANVAS)if(B){var H=this.root,z=H.width,G=H.height,X=fe.getCacheCanvas(z,G);X.ctx.drawImage(I,0,0,z,G),X.ctx.globalCompositeOperation="destination-in",le.genRdRect(t,X.ctx,"#FFF",r,n,z,G,B),X.draw(X.ctx),e.drawImage(X.canvas,0,0),X.draw(e),X.ctx.globalCompositeOperation="source-over",X.ctx.clearRect(0,0,z,G),X.draw(X.ctx)}else e.drawImage(I,x,w,o,s);else if(t===he.SVG){var j;o===A.width&&s===A.height||(j=ce.matrixResize(A.width,A.height,o,s,x,w,o,s));var Y=[["xlink:href",u],["x",x],["y",w],["width",A.width],["height",A.height]];if(B){var V=i.add({tagName:"mask",props:[],children:[le.genRdRect(t,e,"#FFF",x,w,o,s,B)]});Y.push(["mask","url(#".concat(V,")")])}j&&!se.equalArr(j,[1,0,0,1,0,0])&&Y.push(["transform","matrix("+j.join(",")+")"]),this.virtualDom.children.push({type:"img",tagName:"image",props:Y})}}}else{var $=this.__loadImg;$.url=u,$.source=null,$.error=null,fe.measureImg(u,function(t){if(t.url===$.url&&!a.__isDestroyed){t.success?($.source=t.source,$.width=t.width,$.height=t.height):$.error=!0;var e=a.root,i=a.currentStyle,r=i.width,n=i.height;e.delRefreshTask($.cb),e.delRefreshTask(a.__task),r.unit!==li&&n.unit!==li?e.addRefreshTask($.cb):e.addRefreshTask(a.__task={before:function(){e.setRefreshLevel(_t.REFLOW)}})}},{width:o,height:s})}}}},{key:"baseLine",get:function(){return this.height}}]),q}(),fi=se.joinVd,di=se.joinDef;function _i(t,e,i){var r=t.childNodes;!function(t,e,i){for(var r=e.length,n=i.length,a=0,o=t.childNodes;a<Math.min(r,n);a++)pi(o[a],e[a],i[a]);if(a<r)for(var s=r-1;a<=s;s--)Si(t,o,s);else if(a<n)for(;a<n;a++)Ai(t,o,a,di(i[a]))}(r[0],e.defs,i.defs),ki(r[1],e.bb,i.bb,e.bbMask,i.bbMask),gi(t,e,i,!0)}function pi(e,t,i){if(t.tagName!==i.tagName)Mi(e,"beforebegin",di(i)),e.parentNode.removeChild(e);else{t.uuid!==i.uuid&&e.setAttribute("id",i.uuid);for(var r={},n=0,a=t.props.length;n<a;n++){var o=ae(t.props[n],2),s=o[0],h=o[1];r[s]=h}for(var u=0,l=i.props.length;u<l;u++){var c=ae(i.props[u],2),f=c[0],d=c[1];r.hasOwnProperty(f)?(r[f]!==d&&e.setAttribute(f,d),delete r[f]):e.setAttribute(f,d)}Object.keys(r).forEach(function(t){e.removeAttribute(t)});for(var _=e.childNodes,p=t.children.length,v=i.children.length,y=0;y<Math.min(p,v);y++)bi(e,y,t.children[y],i.children[y]);if(y<p)for(var g=p-1;y<=g;g--)Si(e,_,g);else if(y<v)for(;y<v;y++)Ai(e,_,y,fi(i.children[y]))}}function vi(t,e,i){"dom"===e.type?"dom"===i.type?gi(t,e,i):"geom"===i.type?mi(t,e,i):wi(t,i):"text"===e.type?"text"===i.type?function(t,e,i){for(var r=e.children.length,n=i.children.length,a=0;a<Math.min(r,n);a++)bi(t,a,e.children[a],i.children[a],!0);var o=t.childNodes;if(a<r)for(var s=r-1;a<=s;s--)Si(t,o,s);else if(a<n)for(;a<n;a++)Ai(t,o,a,fi(i.children[a]))}(t,e,i):wi(t,i):"geom"===e.type?"dom"===i.type?mi(t,e,i):"geom"===i.type?function(t,e,i){yi(t,e,i),ki(t.firstChild,e.bb,i.bb,e.bbMask,i.bbMask);for(var r=e.children.length,n=i.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(r,n);a++)bi(o,a,e.children[a],i.children[a]);if(a<r)for(var h=r-1;a<=h;h--)Si(o,s,h);else if(a<n)for(;a<n;a++)Ai(o,s,a,fi(i.children[a]))}(t,e,i):wi(t,i):"img"===e.type&&("img"===i.type?xi(t,e,i):wi(t,i))}function yi(t,e,i){var r=i.transform,n=i.opacity,a=i.mask;e.transform!==r&&(r?t.setAttribute("transform",r):t.removeAttribute("transform")),e.opacity!==n&&(1!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.mask!==a&&(a?t.setAttribute("mask",a):t.removeAttribute("mask"))}function gi(t,e,i,r){yi(t,e,i),r||ki(t.firstChild,e.bb,i.bb,e.bbMask,i.bbMask);for(var n=e.children.length,a=i.children.length,o=0,s=t.lastChild,h=s.childNodes;o<Math.min(n,a);o++)vi(h[o],e.children[o],i.children[o]);if(o<n)for(var u=n-1;o<=u;u--)Si(s,h,u);else if(o<a)for(;o<a;o++)Ai(s,h,o,fi(i.children[o]))}function mi(t,e,i){yi(t,e,i),ki(t.firstChild,e.bb,i.bb,e.bbMask,i.bbMask);for(var r=e.children.length,n=i.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(r,n);a++)wi(s[a],i.children[a]);if(a<r)for(var h=r-1;a<=h;h--)Si(o,s,h);else if(a<n)for(;a<n;a++)Ai(o,s,a,fi(i.children[a]))}function ki(t,e,i,r,n){var a=e.length,o=i.length;r!==n&&(n?t.setAttribute("mask",n):t.removeAttribute("mask"));for(var s=0;s<Math.min(a,o);s++)bi(t,s,e[s],i[s]);var h=t.childNodes;if(s<a)for(var u=a-1;s<=u;u--)Si(t,h,u);else if(s<o)for(;s<o;s++)Ai(t,h,s,fi(i[s]))}function bi(t,e,i,r,n){var a=t.childNodes;i.tagName!==r.tagName?wi(a[e],r):(xi(a[e],i,r),n&&i.content!==r.content&&(a[e].innerHTML=r.content))}function xi(e,t,i){for(var r={},n=0,a=t.props.length;n<a;n++){var o=ae(t.props[n],2),s=o[0],h=o[1];r[s]=h}for(var u=0,l=i.props.length;u<l;u++){var c=ae(i.props[u],2),f=c[0],d=c[1];r.hasOwnProperty(f)?(r[f]!==d&&e.setAttribute(f,d),delete r[f]):e.setAttribute(f,d)}Object.keys(r).forEach(function(t){e.removeAttribute(t)})}function wi(t,e){var i;Array.isArray(e)?(i="",e.forEach(function(t){i+=fi(t)})):i=fi(e),Mi(t,"beforebegin",i),t.parentNode.removeChild(t)}function Ai(t,e,i,r){i>=e.length?Mi(t,"beforeend",r):Mi(e[i],"beforebegin",r)}function Si(t,e,i){e[i]&&t.removeChild(e[i])}function Mi(t,e,i){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,i);else switch(e){case"beforeend":t.innerHTML+=i;break;case"beforebegin":(hi=hi||document.createElement("svg")).innerHTML=i,t.parentNode.insertBefore(hi.childNodes[0],t)}}var Ei=function(){function e(t){s(this,e),this.id=t,this.count=0,this.list=[]}return h(e,[{key:"add",value:function(t){return t.uuid="karas-defs-".concat(this.id,"-").concat(this.count++),this.list.push(t),t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),Ti=se.isNil,Ri=se.isFunction,Pi=["playbackRate","iterations","fps","spfLimit","delay","endDelay","duration","direction","fill","playCount","currentTime","easing"];function Ci(e,i){Pi.forEach(function(t){e.hasOwnProperty(t)&&function(t,e,i,r){if(!Ti(e)){var n=t["var-"+i];if(n){var a=n.id;a&&r[a]||(t[i]=e)}else t[i]=e}}(i,e[t],t,e.vars)})}var Oi=function(){function t(){s(this,t),this.__records=[],this.__list=[]}return h(t,[{key:"__op",value:function(i){this.records.forEach(function(t){var e=t.animate;Array.isArray(e)?e.forEach(function(t){Ci(i,t.options)}):Ci(i,e.options)})}},{key:"add",value:function(t){-1===this.__list.indexOf(t)&&this.list.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);-1<e&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__list=[]}},{key:"__action",value:function(e,i){this.list.forEach(function(t){t[e].apply(t,i)})}},{key:"init",value:function(){var o=this,t=this.records;t.length&&t.splice(0).forEach(function(t){var n=t.target,e=t.animate;if(Array.isArray(e))e.forEach(function(t){var e=t.value,i=t.options;i.autoPlay=!1;var r=n.animate(e,i);o.add(r)});else{var i=e.value,r=e.options;r.autoPlay=!1;var a=n.animate(i,r);o.add(a)}})}},{key:"play",value:function(e){this.init();var i=!0;this.__action("play",[e&&function(t){i&&(i=!1,Ri(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"cancel",value:function(e){var i=!0;this.__action("cancel",[e&&function(t){i&&(i=!1,Ri(e)&&e(t))}])}},{key:"finish",value:function(e){var i=!0;this.__action("finish",[e&&function(t){i&&(i=!1,Ri(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,i){this.init();var r=!0;this.__action("gotoAndStop",[t,e,i&&function(t){r&&(r=!1,Ri(i)&&i(t))}])}},{key:"gotoAndPlay",value:function(t,e,i){this.init();var r=!0;this.__action("gotoAndPlay",[t,e,i&&function(t){r&&(r=!1,Ri(i)&&i(t))}])}},{key:"__set",value:function(e,i){this.list.forEach(function(t){t[e]=i})}},{key:"records",get:function(){return this.__records}},{key:"list",get:function(){return this.__list}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),Li=se.isNil,Wi=se.isObject,Ni=se.isFunction,Fi=e.PX;var Di=0,Ii=function(){function n(t,e,i){var r;return s(this,n),(r=u(this,U(n).call(this,t,e,i))).__node=null,r.__mw=0,r.__mh=0,r.__task=[],r.__ref={},r.__animateController=new Oi,r.__initRef(a(r)),dt.mix(a(r)),r}return t(n,ui),h(n,[{key:"__initProps",value:function(){var t=this.props.width;if(!Li(t)){var e=parseFloat(t)||0;0<e&&(this.__width=e)}var i=this.props.height;if(!Li(i)){var r=parseFloat(i)||0;0<r&&(this.__height=r)}}},{key:"__genHtml",value:function(){for(var t,e,i,r="<".concat(this.tagName),n=0,a=this.__props.length;n<a;n++){var o=ae(this.__props[n],2),s=o[0],h=o[1];/^on[a-zA-Z]/.test(s)||(r+=(t=s,e=h,i=Array.isArray(e)?se.joinSourceArray(e):se.stringify(e),"className"===t&&(t="class")," "+t+'="'+se.encodeHtml(i,!0)+'"'))}return r+="></".concat(this.tagName,">")}},{key:"__cb",value:function(t,e){if("touchmove"!==t.type||this.__touchstartTarget){var i,r;if(-1===["touchend","touchcancel"].indexOf(t.type)){var n=this.node.getBoundingClientRect(),a=n.x,o=n.y,s=n.left,h=n.top,u=n.width,l=n.height;i=a||s||0,r=o||h||0;var c=t.touches?t.touches[0]:t;i=c.pageX-i,r=c.pageY-r;var f=u/this.width,d=l/this.height;1!=f&&(i/=f),1!=d&&(r/=d)}var _={event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:i,y:r,__hasEmitted:!1};return this.__emitEvent(_,e),_}}},{key:"appendTo",value:function(t){if(t=function(t){if(se.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("can not find dom of selector: "+t);return e}if(!t)throw new Error("can not find dom: "+t);return t}(t),this.__initProps(),this.__refreshLevel=_t.REFLOW,t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__node=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__node=t.querySelector(this.tagName),this.__node||(t.innerHTML=this.__genHtml(),this.__node=t.querySelector(this.tagName))),this.__uuid=Li(this.__node.__uuid)?Di++:this.__node.__uuid,this.__defs=this.node.__defs||Ei.getInstance(this.__uuid),!this.width||!this.height){var e=window.getComputedStyle(t,null);this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height))}var i;"canvas"===this.tagName?(this.__ctx=this.__node.getContext("2d"),this.__renderMode=he.CANVAS):"svg"===this.tagName&&(this.__renderMode=he.SVG),this.refresh(),this.node.__root?this.node.__root.__destroy():(i=this.node,["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(e){i.addEventListener(e,function(t){i.__root.__cb(t,-1<["touchend","touchcancel","touchmove"].indexOf(e))})}),this.node.__uuid=this.__uuid),this.node.__root=this}},{key:"refresh",value:function(i){var r=this,t=this.isDestroyed,n=this.renderMode,a=this.ctx,o=this.defs,e=this.style;if(!t){o.clear(),-1===["flex","block"].indexOf(e.display)&&(e.display="block"),"absolute"===e.position&&(e.position="static"),e.width={value:this.width,unit:Fi},e.height={value:this.height,unit:Fi};var s=this.__refreshLevel;this.__refreshLevel=_t.REPAINT,s===_t.REFLOW&&this.__measure(n,a,!0),fe.measureText(function(){if(s===_t.REFLOW?(r.__layout({x:0,y:0,w:r.width,h:r.height}),r.__layoutAbs(r,{x:0,y:0,w:r.width,h:r.height})):r.__repaint(!0),n===he.CANVAS&&r.__clear(),r.render(n,a,o),n===he.SVG){var t=r.virtualDom,e=o;t.defs=e.value,r.node.__root?_i(r.node,r.node.__vd,t):r.node.innerHTML=se.joinVirtualDom(t),r.node.__vd=t,r.node.__defs=e}Ni(i)&&i(),r.emit(dt.REFRESH,s)})}}},{key:"addRefreshTask",value:function(t){var n=this;if(t){var a,o=this.task;if(!o.length)Ot.nextFrame(this.__rTask={before:function(e){if((a=o.splice(0)).length){a.forEach(function(t){Wi(t)&&Ni(t.before)&&t.before(e)}),n.refresh();var t=n.__hookTask;if(t){var i=Ot.__hookTask,r=i.indexOf(t);-1<r&&i.splice(r,1)}}},after:function(e){a.forEach(function(t){Wi(t)&&Ni(t.after)?t.after(e):Ni(t)&&t(e)})}});-1===o.indexOf(t)&&o.push(t)}}},{key:"delRefreshTask",value:function(t){if(t){for(var e=this.task,i=0,r=e.length;i<r;i++)if(e[i]===t){e.splice(i,1);break}e.length||Ot.offFrame(this.__rTask)}}},{key:"setRefreshLevel",value:function(t){t>this.__refreshLevel&&(this.__refreshLevel=t)}},{key:"__frameHook",value:function(){var t=this,e=this.__hookTask=this.__hookTask||function(){t.refresh()};-1===Ot.__hookTask.indexOf(e)&&Ot.__hookTask.push(e)}},{key:"__clear",value:function(){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),this.__ctx.setTransform(1,0,0,1,0,0),this.__ctx.clearRect(0,0,this.__mw,this.__mh)}},{key:"node",get:function(){return this.__node}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"task",get:function(){return this.__task}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),n}(),Bi=e.AUTO,Hi=e.PX,zi=e.PERCENT,Gi=se.clone,Xi=se.int2rgba,ji=se.isNil,Yi=se.extend,Vi={},$i=function(){function o(t,e){var i;s(this,o),(i=u(this,U(o).call(this,t,e))).__isMask=!!i.props.mask,i.__currentProps=i.props;var r=a(i),n=r.style;return r.isMask&&(n.visibility="visible",n.background=null,n.border=null,n.strokeWidth=0,n.stroke=null),j.normalize(i.style,Je.dom.concat(Je.geom)),i}return t(o,Ve),h(o,[{key:"__tryLayInline",value:function(t,e){var i=this.currentStyle.width;return i.unit===Hi?t-i.value:i.unit===zi?t-e*i.value*.01:t}},{key:"__calAutoBasis",value:function(t){var e=0,i=0,r=0,n=this.currentStyle,a=this.computedStyle,o=n.width,s=n.height,h=a.borderTopWidth,u=a.borderRightWidth,l=a.borderBottomWidth,c=a.borderLeftWidth,f=t?o:s;if(f.unit!==Bi&&(e=r+=f.value),t){var d=u+c;e+=d,r+=d,i+=d}else{var _=h+l;e+=_,r+=_,i+=_}return{b:e,min:i,max:r}}},{key:"__layoutBlock",value:function(t,e){var i=this.__preLayout(t),r=i.fixedWidth,n=i.fixedHeight,a=i.w,o=i.h;this.__height=n?o:0,e?this.__width=r?a:0:(this.__width=a,this.__marginAuto(this.currentStyle,t))}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),i=e.fixedWidth,r=e.fixedHeight,n=e.x,a=e.y,o=e.w,s=e.h;this.__width=i?o:n-t.x,this.__height=r?s:a-t.y}},{key:"__preRender",value:function(t,e,i){var r=this.sx,n=this.sy,a=this.width,o=this.height,s=this.currentStyle,h=this.computedStyle,u=s.strokeWidth,l=s.fill,c=s.stroke,f=s.strokeDasharray,d=s.strokeLinecap,_=h.borderTopWidth,p=h.borderLeftWidth,v=h.display,y=h.marginTop,g=h.marginLeft,m=h.paddingTop,k=h.paddingRight,b=h.paddingBottom,x=h.paddingLeft,w=h.visibility,A=r+p+g+x,S=n+_+y+m,M=A+.5*a,E=S+.5*o,T=a+x+k,R=o+m+b;return u=u.unit===Hi?u.value:u.unit===zi?u.value*a*.01:0,h.strokeWidth=u,!c||"linear"!==c.k&&"radial"!==c.k?h.stroke=c=Xi(c):c=this.__gradient(t,e,i,A,S,A+a,S+o,T,R,"stroke",c,h),!l||"linear"!==l.k&&"radial"!==l.k?h.fill=l=Xi(l):l=this.__gradient(t,e,i,A,S,A+a,S+o,T,R,"fill",l,h),h.strokeWidth=u,h.strokeDasharray=f.join(", "),h.strokeLinecap=d,{x:r,y:n,originX:A,originY:S,cx:M,cy:E,display:v,stroke:c,strokeWidth:u,strokeDasharray:f,strokeDasharrayStr:h.strokeDasharray,strokeLinecap:d,fill:l,visibility:w}}},{key:"render",value:function(t,e,i){Z(U(o.prototype),"render",this).call(this,t,e,i),t===he.SVG&&(this.virtualDom.type="geom");var r=this.isDestroyed,n=this.animateProps,a=this.computedStyle.display;return this.__currentProps=n,r||"none"===a?{isDestroyed:r,display:a}:this.__preRender(t,e,i)}},{key:"__renderAsMask",value:function(t,e,i){if(t===he.SVG){this.render(t,e,i);var r=this.virtualDom;r.isMask=!0;var n=Gi(r.children),T=this.matrixEvent;n.forEach(function(t){var e,i,r=0,n=1,a=t.props;if("rect"===t.tagName){for(var o=0,s=a.length;o<s;o++){var h=ae(a[o],2),u=h[0],l=h[1];"x"===u?(r=o,e=l):"y"===u&&(n=o,i=l)}var c=$.calPoint([e,i],T);a[r][1]=c[0],a[n][1]=c[1]}else if("circle"===t.tagName||"ellipse"===t.tagName){for(var f=0,d=a.length;f<d;f++){var _=ae(a[f],2),p=_[0],v=_[1];"cx"===p?(r=f,e=v):"cy"===p&&(n=f,i=v)}var y=$.calPoint([e,i],T);a[r][1]=y[0],a[n][1]=y[1]}else if("polyline"===t.tagName)for(var g=0,m=a.length;g<m;g++){var k=ae(a[g],2),b=k[0],x=k[1];if("points"===b){a[g][1]=x.replace(/([\d.]+),([\d.]+)/g,function(t,e,i){return $.calPoint([e,i],T).join(",")});break}}else if("path"===t.tagName)for(var w=0,A=a.length;w<A;w++){var S=ae(a[w],2),M=S[0],E=S[1];if("d"===M){a[w][1]=E.replace(/([\d.]+),([\d.]+)/g,function(t,e,i){return $.calPoint([e,i],T).join(",")});break}}});var a=this.prev;if(a&&a.isMask){var o=i.value;return(o=o[o.length-1]).children=o.children.concat(n),void(this.__maskId=a.maskId)}var s=i.add({tagName:"mask",props:[],children:n});this.__maskId="url(#".concat(s,")")}}},{key:"addGeom",value:function(t,e){e=se.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return ji(e)?this["__"+t]:e}},{key:"baseLine",get:function(){return this.__height}},{key:"isMask",get:function(){return this.__isMask}},{key:"maskId",get:function(){return this.__maskId}},{key:"animateProps",get:function(){var t=this.props,e=this.animationList,i=Yi({},t);return e.forEach(function(t){t.animating&&Yi(i,t.props)}),i}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"getRegister",value:function(t){if(!Vi.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return Vi[t]}},{key:"register",value:function(t,e){if(o.hasRegister(t))throw new Error("Geom has already register: ".concat(t));Vi[t]=e}},{key:"hasRegister",value:function(t){return Vi.hasOwnProperty(t)}}]),o}(),qi=function(){function T(t,e){var i;return s(this,T),(i=u(this,U(T).call(this,t,e))).__x1=i.__y1=0,i.__x2=i.__y2=1,i.__controlA=[],i.__controlB=[],void 0!==i.props.x1&&(i.__x1=parseFloat(i.props.x1)||0),void 0!==i.props.y1&&(i.__y1=parseFloat(i.props.y1)||0),void 0!==i.props.x2&&(i.__x2=parseFloat(i.props.x2)||0),void 0!==i.props.y2&&(i.__y2=parseFloat(i.props.y2)||0),Array.isArray(i.props.controlA)&&(i.__controlA=i.props.controlA),Array.isArray(i.props.controlB)&&(i.__controlB=i.props.controlB),i}return t(T,$i),h(T,[{key:"render",value:function(t,e,i){var r=Z(U(T.prototype),"render",this).call(this,t,e,i),n=r.isDestroyed,a=r.display,o=r.visibility,s=r.originX,h=r.originY,u=r.stroke,l=r.strokeWidth,c=r.strokeDasharray,f=r.strokeDasharrayStr,d=r.strokeLinecap;if(!n&&"none"!==a&&"hidden"!==o){var _=this.width,p=this.height,v=this.x1,y=this.y1,g=this.x2,m=this.y2,k=this.controlA,b=this.controlB;v=s+v*_,y=h+y*p,g=s+g*_,m=h+m*p;var x,w,A,S,M=0;if(2===k.length&&(M++,x=s+k[0]*_,w=h+k[1]*p),2===b.length&&(M+=2,A=s+b[0]*_,S=h+b[1]*p),t===he.CANVAS)e.strokeStyle=u,e.lineWidth=l,e.lineCap=d,e.setLineDash(c),e.beginPath(),e.moveTo(v,y),3===M?e.bezierCurveTo(x,w,A,S,g,m):2===M?e.quadraticCurveTo(A,S,g,m):1===M?e.quadraticCurveTo(x,w,g,m):e.lineTo(g,m),0<l&&e.stroke(),e.closePath();else if(t===he.SVG){var E=[["d",3===M?"M".concat(v,",").concat(y," C").concat(x,",").concat(w," ").concat(A,",").concat(S," ").concat(g,",").concat(m):2===M?"M".concat(v,",").concat(y," Q").concat(A,",").concat(S," ").concat(g,",").concat(m):1===M?"M".concat(v,",").concat(y," Q").concat(x,",").concat(w," ").concat(g,",").concat(m):"M".concat(v,",").concat(y," L").concat(g,",").concat(m)],["fill","none"],["stroke",u],["stroke-width",l]];c.length&&E.push(["stroke-dasharray",f]),"butt"!==d&&E.push(["stroke-linecap",d]),this.addGeom("path",E)}}}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}}]),T}(),Ui=function(){function H(t,e){var i;return s(this,H),(i=u(this,U(H).call(this,t,e))).__points=[],Array.isArray(i.props.points)&&(i.__points=i.props.points),i.__controls=[],Array.isArray(i.props.controls)&&(i.__controls=i.props.controls),i}return t(H,$i),h(H,[{key:"__getPoints",value:function(n,a,o,s,t,e){var i=[],h=[],u=!1;return t.forEach(function(t){i.push([n+t[0]*o,a+t[1]*s])}),e.forEach(function(i){if(!Array.isArray(i)||2!==i.length&&4!==i.length)h.push(null);else{var r=[];i.forEach(function(t,e){0===e||2===e?r.push(n+i[e]*o):r.push(a+i[e]*s)}),h.push(r),u=!0}}),[i,h,u]}},{key:"render",value:function(t,e,i){var r=Z(U(H.prototype),"render",this).call(this,t,e,i),n=r.isDestroyed,a=r.originX,o=r.originY,s=r.display,h=r.visibility,u=r.fill,l=r.stroke,c=r.strokeWidth,f=r.strokeDasharray,d=r.strokeDasharrayStr,_=r.strokeLinecap;if(!n&&"none"!==s&&"hidden"!==h){var p=this.width,v=this.height,y=this.points,g=this.controls,m=ae(this.__getPoints(a,o,p,v,y,g),3),k=m[0],b=m[1],x=m[2];if(y.length<2)console.error("Points must have at lease 2 item: "+y);else{for(var w=0,A=y.length;w<A;w++)if(!Array.isArray(y[w])||y[w].length<2)return void console.error("Each Point must have a coords: "+y[w]);if(t===he.CANVAS){e.strokeStyle=l,e.lineWidth=c,e.fillStyle=u,e.lineCap=_,e.setLineDash(f),e.beginPath(),e.moveTo(k[0][0],k[0][1]);for(var S=1,M=k.length;S<M;S++){var E=k[S],T=b[S-1];T&&T.length?4===T.length?e.bezierCurveTo(T[0],T[1],T[2],T[3],E[0],E[1]):e.quadraticCurveTo(T[0],T[1],E[0],E[1]):e.lineTo(E[0],E[1])}e.fill(),0<c&&e.stroke(),e.closePath()}else if(t===he.SVG){var R,P=[["fill",u],["stroke",l],["stroke-width",c]];if(x){for(var C="M".concat(k[0][0],",").concat(k[0][1]),O=1,L=k.length;O<L;O++){var W=k[O],N=b[O-1];N&&N.length?4===N.length?C+="C".concat(N[0],",").concat(N[1]," ").concat(N[2],",").concat(N[3]," ").concat(W[0],",").concat(W[1]):C+="Q".concat(N[0],",").concat(N[1]," ").concat(W[0],",").concat(W[1]):C+="L".concat(W[0],",").concat(W[1])}P.push(["d",C]),R="path"}else{for(var F="",D=0,I=k.length;D<I;D++){var B=k[D];D&&(F+=" "),F+="".concat(B[0],",").concat(B[1])}P.push(["points",F]),R="polyline"}f.length&&P.push(["stroke-dasharray",d]),"butt"!==_&&P.push(["stroke-linecap",_]),this.addGeom(R,P)}}}}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}}]),H}(),Zi=function(){function l(t,e){return s(this,l),u(this,U(l).call(this,t,e))}return t(l,Ui),h(l,[{key:"__getPoints",value:function(t,e,i,r,n,a){var o=ae(Z(U(l.prototype),"__getPoints",this).call(this,t,e,i,r,n,a),3),s=o[0],h=o[1],u=o[2];return s.push(s[0]),[s,h,u]}}]),l}(),Qi=.5*Math.PI;function Ji(t,e,i,r){return 0<=(r%=360)&&r<90?[t+Math.sin(r*Math.PI/180)*i,e-Math.cos(r*Math.PI/180)*i]:90<=r&&r<180?[t+Math.cos((r-90)*Math.PI/180)*i,e+Math.sin((r-90)*Math.PI/180)*i]:180<=r&&r<270?[t-Math.cos((270-r)*Math.PI/180)*i,e+Math.sin((270-r)*Math.PI/180)*i]:[t-Math.sin((360-r)*Math.PI/180)*i,e-Math.cos((360-r)*Math.PI/180)*i]}var Ki=function(){function C(t,e){var i;return s(this,C),(i=u(this,U(C).call(this,t,e))).__begin=0,i.__end=0,i.props.begin&&(i.__begin=parseFloat(i.props.begin),isNaN(i.begin)&&(i.__begin=0)),i.props.end&&(i.__end=parseFloat(i.props.end),isNaN(i.end)&&(i.__end=0)),i.__r=1,i.props.r&&(i.__r=parseFloat(i.props.r),isNaN(i.r)&&(i.__r=1)),i.__edge=!1,void 0!==i.props.edge&&(i.__edge=!!i.props.edge),i.__closure=!1,void 0!==i.props.closure&&(i.__closure=!!i.props.closure),i}return t(C,$i),h(C,[{key:"render",value:function(t,e,i){var r=Z(U(C.prototype),"render",this).call(this,t,e,i),n=r.isDestroyed,a=r.cx,o=r.cy,s=r.display,h=r.visibility,u=r.fill,l=r.stroke,c=r.strokeWidth,f=r.strokeDasharray,d=r.strokeDasharrayStr,_=r.strokeLinecap;if(!n&&"none"!==s&&"hidden"!==h){var p=this.width,v=this.height,y=this.begin,g=this.end,m=this.r,k=this.edge,b=this.closure;if(y!==g){var x,w,A,S,M=ae(Ji(a,o,m*=.5*Math.min(p,v),y),2);x=M[0],w=M[1];var E=ae(Ji(a,o,m,g),2);A=E[0],S=E[1];var T=180<g-y?1:0;if(t===he.CANVAS)e.strokeStyle=l,e.lineWidth=c,e.fillStyle=u,e.lineCap=_,e.setLineDash(f),e.beginPath(),e.arc(a,o,m,y*Math.PI/180-Qi,g*Math.PI/180-Qi),k?(T&&b||e.lineTo(a,o),e.lineTo(x,w),0<c&&e.stroke()):(0<c&&e.stroke(),T&&b||e.lineTo(a,o),e.lineTo(x,w)),e.fill(),e.closePath();else if(t===he.SVG)if(k){var R=[["d",b?"M".concat(x," ").concat(w," A").concat(m," ").concat(m," 0 ").concat(T," 1 ").concat(A," ").concat(S," z"):"M".concat(a," ").concat(o," L").concat(x," ").concat(w," A").concat(m," ").concat(m," 0 ").concat(T," 1 ").concat(A," ").concat(S," z")],["fill",u],["stroke",l],["stroke-width",c]];f.length&&R.push(["stroke-dasharray",d]),"butt"!==_&&R.push(["stroke-linecap",_]),this.addGeom("path",R)}else if(this.addGeom("path",[["d",b?"M".concat(x,",").concat(w," A").concat(m," ").concat(m," 0 ").concat(T," 1 ").concat(A,",").concat(S," z"):"M".concat(a,",").concat(o," L").concat(x,",").concat(w," A").concat(m," ").concat(m," 0 ").concat(T," 1 ").concat(A,",").concat(S," z")],["fill",u]]),0<c){var P=[["d","M".concat(x,",").concat(w," A").concat(m,",").concat(m," 0 ").concat(T," 1 ").concat(A,",").concat(S)],["fill","rgba(0,0,0,0)"],["stroke",l],["stroke-width",c]];f.length&&P.push(["stroke-dasharray",d]),"butt"!==_&&P.push(["stroke-linecap",_]),this.addGeom("path",P)}}}}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}}]),C}(),tr=function(){function x(t,e){var i;return s(this,x),(i=u(this,U(x).call(this,t,e))).__rx=0,i.props.rx&&(i.__rx=parseFloat(i.props.rx),isNaN(i.rx)&&(i.__rx=0)),i.__ry=0,i.props.ry&&(i.__ry=parseFloat(i.props.ry),isNaN(i.ry)&&(i.__ry=0)),i}return t(x,$i),h(x,[{key:"render",value:function(t,e,i){var r=Z(U(x.prototype),"render",this).call(this,t,e,i),n=r.isDestroyed,a=r.originX,o=r.originY,s=r.display,h=r.visibility,u=r.fill,l=r.stroke,c=r.strokeWidth,f=r.strokeDasharray,d=r.strokeDasharrayStr,_=r.strokeLinecap;if(!n&&"none"!==s&&"hidden"!==h){var p=this.width,v=this.height,y=this.rx,g=this.ry;if(y=Math.min(y,.5),g=Math.min(g,.5),y*=p,g*=v,t===he.CANVAS){if(e.strokeStyle=l,e.lineWidth=c,e.fillStyle=u,e.lineCap=_,e.setLineDash(f),e.beginPath(),0===y&&0===g)e.rect(a,o,p,v);else{var m=y*w.H,k=g*w.H;e.moveTo(a+y,o),e.lineTo(a+p-y,o),e.bezierCurveTo(a+p+m-y,o,a+p,o+g-k,a+p,o+g),e.lineTo(a+p,o+v-g),e.bezierCurveTo(a+p,o+v+k-g,a+p+m-y,o+v,a+p-y,o+v),e.lineTo(a+y,o+v),e.bezierCurveTo(a+y-m,o+v,a,o+v+k-g,a,o+v-g),e.lineTo(a,o+g),e.bezierCurveTo(a,o+g-k,a+y-m,o,a+y,o)}e.fill(),0<c&&e.stroke(),e.closePath()}else if(t===he.SVG){var b=[["x",a],["y",o],["width",p],["height",v],["fill",u],["stroke",l],["stroke-width",c]];y&&b.push(["rx",y]),g&&b.push(["ry",g]),f.length&&b.push(["stroke-dasharray",d]),"butt"!==_&&b.push(["stroke-linecap",_]),this.addGeom("rect",b)}}}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}}]),x}(),er=function(){function m(t,e){var i;return s(this,m),(i=u(this,U(m).call(this,t,e))).__r=1,i.props.r&&(i.__r=parseFloat(i.props.r),isNaN(i.r)&&(i.__r=1)),i}return t(m,$i),h(m,[{key:"render",value:function(t,e,i){var r=Z(U(m.prototype),"render",this).call(this,t,e,i),n=r.isDestroyed,a=r.cx,o=r.cy,s=r.display,h=r.visibility,u=r.fill,l=r.stroke,c=r.strokeWidth,f=r.strokeDasharray,d=r.strokeDasharrayStr,_=r.strokeLinecap;if(!n&&"none"!==s&&"hidden"!==h){var p=this.width,v=this.height,y=this.r;if(y*=.5*Math.min(p,v),t===he.CANVAS)e.strokeStyle=l,e.lineWidth=c,e.fillStyle=u,e.lineCap=_,e.setLineDash(f),e.beginPath(),e.arc(a,o,y,0,2*Math.PI),e.fill(),0<c&&e.stroke(),e.closePath();else if(t===he.SVG){var g=[["cx",a],["cy",o],["r",y],["fill",u],["stroke",l],["stroke-width",c]];f.length&&g.push(["stroke-dasharray",d]),"butt"!==_&&g.push(["stroke-linecap",_]),this.addGeom("circle",g)}}}},{key:"r",get:function(){return this.getProps("r")}}]),m}(),ir=function(){function x(t,e){var i;return s(this,x),(i=u(this,U(x).call(this,t,e))).__rx=1,i.props.rx&&(i.__rx=parseFloat(i.props.rx),isNaN(i.rx)&&(i.__rx=1)),i.__ry=1,i.props.ry&&(i.__ry=parseFloat(i.props.ry),isNaN(i.ry)&&(i.__ry=1)),i}return t(x,$i),h(x,[{key:"render",value:function(t,e,i){var r=Z(U(x.prototype),"render",this).call(this,t,e,i),n=r.isDestroyed,a=r.cx,o=r.cy,s=r.display,h=r.visibility,u=r.fill,l=r.stroke,c=r.strokeWidth,f=r.strokeDasharray,d=r.strokeDasharrayStr,_=r.strokeLinecap;if(!n&&"none"!==s&&"hidden"!==h){var p=this.width,v=this.height,y=this.rx,g=this.ry;if(y*=.5*p,g*=.5*v,t===he.CANVAS){if(e.strokeStyle=l,e.lineWidth=c,e.fillStyle=u,e.lineCap=_,e.setLineDash(f),e.beginPath(),e.ellipse)e.ellipse(a,o,y,g,0,0,2*Math.PI);else{var m=y*w.H,k=g*w.H;e.moveTo(a-y,o),e.bezierCurveTo(a-y,o-k,a-m,o-g,a,o-g),e.bezierCurveTo(a+m,o-g,a+y,o-k,a+y,o),e.bezierCurveTo(a+y,o+k,a+m,o+g,a,o+g),e.bezierCurveTo(a-m,o+g,a-y,o+k,a-y,o)}e.fill(),0<c&&e.stroke(),e.closePath()}else if(t===he.SVG){var b=[["cx",a],["cy",o],["rx",y],["ry",g],["fill",u],["stroke",l],["stroke-width",c]];f.length&&b.push(["stroke-dasharray",d]),"butt"!==_&&b.push(["stroke-linecap",_]),this.addGeom("ellipse",b)}}}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}}]),x}(),rr={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e"},nr={os:"offset",e:"easing"},ar={value:"v",options:"o"},or={},sr={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},hr={};Je.dom.concat(Je.geom).forEach(function(t){var e=t.k;if(rr.hasOwnProperty(e))nr[rr[e]]=e;else{var i=e.charAt(0)+e.replace(/[a-z]/g,"").toLowerCase();rr[e]=i,nr[i]=e}}),Object.keys(ar).forEach(function(t){or[ar[t]]=t}),Object.keys(sr).forEach(function(t){hr[sr[t]]=t});var ur={fullCssProperty:rr,abbrCssProperty:nr,fullAnimate:ar,abbrAnimate:or,fullAnimateOption:sr,abbrAnimateOption:hr},lr=se.isNil,cr=se.isFunction,fr=se.isPrimitive,dr=se.clone,_r=se.extend,pr=ur.abbrCssProperty,vr=ur.abbrAnimateOption,yr=ur.abbrAnimate;function gr(n,a){n&&Object.keys(n).forEach(function(t){if(0===t.indexOf("var-")){var e=t.slice(4);if(a.hasOwnProperty(e)){var i=a[e];n["var-"+i]=n[t]}}else if(a.hasOwnProperty(t)){var r=a[t];n[r]=n[t],delete n[t]}})}function mr(s,h){s&&h&&Object.keys(s).forEach(function(t){if(0===t.indexOf("var-")){var e=s[t],i=t.slice(4);if(e.id&&h.hasOwnProperty(e.id)){var r=h[e.id];if(lr(e))return;if(-1<i.indexOf(".")){for(var n=i.split("."),a=n.length,o=0;o<a-1;o++)i=n[o],s[i]?s=s[i]:console.error("parseJson vars is not exist: "+e.id+", "+t+", "+n.slice(0,o).join("."));i=n[a-1]}cr(r)&&(r=r(e)),s[i]=r}}})}function kr(e,i){e.tagName=i.tagName,e.props=dr(i.props),e.children=i.children,Object.keys(i).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=i[t])}),e.libraryId=null;var t=e.init;if(t){var r=e.props=e.props||{},n=r.style;_r(r,t),n&&(_r(n,t.style),r.style=n),e.init=null}}function br(e,t,i,r,n){var a=4<arguments.length&&void 0!==n?n:{};if(fr(t)||t instanceof x)return t;if(Array.isArray(t))return t.map(function(t){return br(e,t,i,r,a)});var o=t.library,s=t.libraryId;if(Array.isArray(o))a={},o.forEach(function(t){!function(t,r){var e=t.id,i=t.children;if(Array.isArray(i)&&i.forEach(function(t){if(!fr(t)){var e=t.libraryId;if(lr(e))return;var i=r[e];if(!i)throw new Error("Link library item miss id: "+e);kr(t,i)}}),lr(e))throw new Error("Library item miss id: "+e);r[e]=t}(t,a)}),t.library=null,t.libraryId=null;else if(!lr(s)&&a){var h=a[s];if(!h)throw new Error("Link library miss id: "+s);kr(t,h)}var u=t.tagName,l=t.props,c=void 0===l?{}:l,f=t.children,d=void 0===f?[]:f,_=t.animate,p=void 0===_?[]:_;if(!u)throw new Error("Dom must have a tagName: "+t);var v,y,g=c.style;if(gr(g,pr),mr(g,r),mr(c,r),mr(t,r),v="$"===u.charAt(0)?e.createGm(u,c):e.createVd(u,c,d.map(function(t){return br(e,t,i,r,a)})),p)if(Array.isArray(p)){var m;p.forEach(function(t){gr(t,yr);var e=t.value,i=t.options;Array.isArray(e)&&e.length&&(m=!0,e.forEach(function(t){gr(t,pr),mr(t,r)})),i&&(gr(i,vr),mr(i,r))}),m&&(y={animate:p,target:v})}else{gr(p,yr);var k=p.value,b=p.options;Array.isArray(k)&&k.length&&(k.forEach(function(t){gr(t,pr),mr(t,r)}),y={animate:p,target:v}),b&&(gr(b,vr),mr(b,r))}return y&&i.push(y),v}$i.register("$line",qi),$i.register("$polyline",Ui),$i.register("$polygon",Zi),$i.register("$sector",Ki),$i.register("$rect",tr),$i.register("$circle",er),$i.register("$ellipse",ir);var xr={version:"0.29.6",render:function(t,e){if(!(t instanceof Ii))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createVd:function(t,e,i){if(-1<["canvas","svg"].indexOf(t))return new Ii(t,e,i);if(ui.isValid(t))return"img"===t?new ci(t,e):new ui(t,e,i);throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return new($i.getRegister(t))(t,e)},createCp:function(t,e,i){return new t(e,i)},parse:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{};fe.isDom(e)||(r=e||{},e=null);var n=[],a=br(this,t,n,r.vars);if(e){var o=t.tagName;if(-1===["canvas","svg"].indexOf(o))throw new Error("Parse dom must be canvas/svg");var s=a.animateController;s.__records=n,this.render(a,e),s.__op(r),r.hasOwnProperty("autoPlay")&&!r.autoPlay||s.play()}else n.length&&(a.__animateRecords=n);return a},Root:Ii,Dom:ui,Img:ci,Geom:$i,mode:he,Component:bt,Event:dt,sort:ti,util:se,inject:fe,css:j,unit:e,reset:Je,abbr:ur,frame:Ot,easing:jt,level:_t,math:K};return"undefined"!=typeof window&&(window.karas=xr),xr});
//# sourceMappingURL=index.min.js.map
