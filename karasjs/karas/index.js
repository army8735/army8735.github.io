!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,r,n,i=et(a);return e=o?(t=et(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),r=this,!(n=e)||"object"!=typeof n&&"function"!=typeof n?h(r):n}}function rt(t,e,r){return(rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=et(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,SCALE_X:59,SCALE_Y:60,SKEW_X:61,SKEW_Y:62,ROTATE_Z:63,FILTER:64,BOX_SHADOW:65,POINTER_EVENTS:66,OVERFLOW:67,MIX_BLEND_MODE:68,FILL:69,STROKE:70,STROKE_WIDTH:71,STROKE_DASHARRAY:72,STROKE_DASHARRAY_STR:73,STROKE_LINECAP:74,STROKE_LINEJOIN:75,STROKE_MITERLIMIT:76,FILL_RULE:77,MATRIX:78,BORDER_TOP:79,BORDER_RIGHT:80,BORDER_BOTTOM:81,BORDER_LEFT:82};function u(t){return t.replace(/[A-Z]/g,function(t){return t.toLowerCase()}).replace(/_([a-z])/g,function(t,e){return e.toUpperCase()})}var f={},d={};Object.keys(s).forEach(function(t){var e=s[t];f[e]=t,d[e]=u(t)});var p={STYLE_KEY:s,STYLE_R_KEY:f,STYLE_RV_KEY:d,style2Lower:u,style2Upper:function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toUpperCase()}).replace(/[a-z]/g,function(t){return t.toUpperCase()})},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_IMG:5,UPDATE_OVERWRITE:6,UPDATE_KEYS:7,UPDATE_LIST:8,UPDATE_CONFIG:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_BLUR_VALUE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6}},v=p.STRUCT_KEY,y=v.STRUCT_NODE,m=v.STRUCT_INDEX,E=v.STRUCT_CHILD_INDEX,T=v.STRUCT_LV,O=p.NODE_KEY,M=O.NODE_IS_DESTROYED,A=O.NODE_STRUCT,b=function(){function t(){g(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return l(t,[{key:"__structure",value:function(t,e,r){var n;return this.__config[A]=(c(n={},y,this),c(n,m,t),c(n,E,r),c(n,T,e),n)}},{key:"__modifyStruct",value:function(){return[this.__config[A],1]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[M]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[M]}}]),t}(),Ye={CANVAS:0,SVG:1},R={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7},S={arial:{lhr:1.14990234375,car:1.1171875,blr:.9052734375}},k={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}};var I,N,w,We={identity:function(){return[1,0,0,1,0,0]},multiply:function(t,e){var r=1===t[0]&&0===t[1]&&0===t[2]&&1===t[3],n=1===e[0]&&0===e[1]&&0===e[2]&&1===e[3],i=0===t[4]&&0===t[5],a=0===e[4]&&0===e[5];if(r&&i)return e.slice(0);if(n&&a)return t.slice(0);if(r&&n)return(t=t.slice(0))[4]+=e[4],t[5]+=e[5],t;if(r||n){var o=r?e.slice(0):t.slice(0);return o[4]=t[0]*e[4]+t[2]*e[5]+t[4],o[5]=t[1]*e[4]+t[3]*e[5]+t[5],o}var s=[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],0,0];return i&&a||(a?(s[4]=t[4],s[5]=t[5]):(s[4]=t[0]*e[4]+t[2]*e[5]+t[4],s[5]=t[1]*e[4]+t[3]*e[5]+t[5])),s},calPoint:function(t,e){var r=Ge(t,2),n=r[0],i=r[1],a=Ge(e,6),o=a[0],s=a[1],h=a[2],l=a[3];return[o*n+h*i+a[4],s*n+l*i+a[5]]},int2convolution:function(t){var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(e*=3)%2==0&&e++,e},inverse:function(t){var e=Ge(t,6),r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5];if(1===r&&0===n&&0===i&&1===a&&0===o&&0===s)return t;var h,l,c=1,u=0,_=0,f=1,d=0,p=0;if(0===r)if(1===n)var v=[n,r,a,i,s,o,u,c,f,_,p,d],r=v[0],n=v[1],i=v[2],a=v[3],o=v[4],s=v[5],c=v[6],u=v[7],_=v[8],f=v[9],d=v[10],p=v[11];else{if(0===n)return[0,0,0,0,0,0];r=1,i+=i/n,o+=o/n,c+=c/n,_+=_/n,d+=d/n,n=0}return 0!==n&&(h=n/r,n=0,a-=i*h,s-=o*h,u-=c*h,f-=_*h,p-=d*h),1!==r&&(i/=r,o/=r,c/=r,_/=r,d/=r,r=1),0!==i&&(l=i/a,i=0,o-=s*l,c-=u*l,_-=f*l,d-=p*l),0===a?(s+=(a=1)-o,u+=1-c,f+=1-_,p+=1-d):1!==a&&(s/=a,u/=a,f/=a,p/=a,a=1),0!==o&&(d-=o,o=0),0!==s&&(p-=s,s=0),[c,u,_,f,d,p]},isE:function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}},D=p.STYLE_KEY,P=p.STYLE_KEY.TRANSFORM,C={}.toString;function L(e){return function(t){return C.call(t)==="[object "+e+"]"}}var F=L("Object"),B=L("String"),H=L("Function"),G=L("Number"),Y=L("Boolean"),W=L("Date");function U(t){return null==t}function X(t){return U(t)?"":t.toString()}function K(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=K(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var n="<g";t.bbClip&&(n+=' clip-path="'+t.bbClip+'"'),n+=">",t.bb.forEach(function(t){n+=K(t)}),n+="</g><g",t.conClip&&(n+=' clip-path="'+t.conClip+'"'),n+=">",(t.children||[]).forEach(function(t){t.isMask||(n+=K(t))}),n+="</g>";var i=t.opacity,a=t.transform,o=t.visibility,s=t.mask,h=t.overflow,l=t.filter,c=t.mixBlendMode;return"<g"+(1!==i&&void 0!==i?' opacity="'+i+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l?' filter="'+l+'"':"")+(c?' style="mix-blend-mode:'+c+'"':"")+">"+n+"</g>"}}function z(t){var n="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(n+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){n+=" "+t[0]+'="'+t[1]+'"'}),n+=">",(t.children||[]).forEach(function(t){var e,r;n+=(r="<"+(e=t).tagName,(e.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+="></"+e.tagName+">")}),n+="</"+t.tagName+">"}function V(t,e){for(var r=t.length?t[0]:"",n=1,i=t.length;n<i;n++)r+=e+t[n];return r}var j=(c(I={},D.POSITION,!0),c(I,D.DISPLAY,!0),c(I,D.BACKGROUND_REPEAT,!0),c(I,D.FLEX_DIRECTION,!0),c(I,D.JUSTIFY_CONTENT,!0),c(I,D.ALIGN_ITEMS,!0),c(I,D.ALIGN_SELF,!0),c(I,D.OVERFLOW,!0),c(I,D.MIX_BLEND_MODE,!0),c(I,D.STROKE_LINECAP,!0),c(I,D.STROKE_LINEJOIN,!0),c(I,D.STROKE_MITERLIMIT,!0),c(I,D.FILL_RULE,!0),I),$=(c(N={},D.BACKGROUND_SIZE,!0),c(N,D.BACKGROUND_COLOR,!0),c(N,D.BORDER_TOP_COLOR,!0),c(N,D.BORDER_RIGHT_COLOR,!0),c(N,D.BORDER_BOTTOM_COLOR,!0),c(N,D.BORDER_LEFT_COLOR,!0),N),q=(c(w={},D.BORDER_TOP_LEFT_RADIUS,!0),c(w,D.BORDER_TOP_RIGHT_RADIUS,!0),c(w,D.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(w,D.BORDER_BOTTOM_LEFT_RADIUS,!0),c(w,D.TRANSFORM_ORIGIN,!0),w);var Ue={isObject:F,isString:B,isFunction:H,isNumber:G,isBoolean:Y,isDate:W,isNil:U,isPrimitive:function(t){return Ue.isNil(t)||Ue.isBoolean(t)||Ue.isString(t)||Ue.isNumber(t)},isAuto:function(t){return U(t)||"auto"===t},stringify:X,joinSourceArray:function t(e){for(var r="",n=0,i=e.length;n<i;n++){var a=e[n];Array.isArray(a)?r+=t(a):r+=X(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=z(t)}),e+="</defs><g",t.bbClip&&(e+=' clip-path="'+t.bbClip+'"'),e+=">",t.bb.forEach(function(t){e+=K(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=K(t))}),e+="</g>"},joinVd:K,joinDef:z,rgba2int:function(t){if(Array.isArray(t))return t;var e,r=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(r.push(parseInt(t.charAt(0)+t.charAt(0),16)),r.push(parseInt(t.charAt(1)+t.charAt(1),16)),r.push(parseInt(t.charAt(2)+t.charAt(2),16)),r[3]=1):6===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4),16)),r[3]=1):8===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4,6),16)),r.push(parseInt(t.slice(6),16)/255)):(r[0]=r[1]=r[2]=0,r[3]=1):(e=t.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(r=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],U(e[4])?r[3]=1:r[3]=parseFloat(e[4])):r=[0,0,0,0]:r=[0,0,0,0],r},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+V(t,",")+")";if(3===t.length)return"rgba("+V(t,",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+V(t,",")+")";if(3===t.length)return"rgba("+V(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i))e[i[0]]=i[1];else for(var a=Object.keys(i),o=a.length-1;0<=o;o--){var s=a[o];e[s]=i[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),n=0,i=r.length;n<i;n++){var a=r[n];e.push([a,t[a]])}return e},clone:function e(r){if(U(r)||"object"!==o(r))return r;if(r.$$type===k.TYPE_VD||r.$$type===k.TYPE_GM||r.$$type===k.TYPE_CP)return r;if(Ue.isDate(r))return new Date(r);var n=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){n[t]=e(r[t])}),n},cloneStyle:function(a,t){t=t||Object.keys(a);var o={};return t.forEach(function(t){var e=a[t];if(t===D.BACKGROUND_IMAGE)e.k?o[t]=Ue.clone(e):o[t]=e;else if(j.hasOwnProperty(t))o[t]=e;else{var r=o[t]=e.slice(0);if($.hasOwnProperty(t))r[0]=r[0].slice(0);else if(q.hasOwnProperty(t))r[0]=r[0].slice(0),r[1]=r[1].slice(0);else if(t===P)for(var n=0,i=r.length;n<i;n++)r[n]=r[n].slice(0)}}),o},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++){var a=e[n],o=r[n],s=Array.isArray(a),h=Array.isArray(o);if(s&&h){if(!t(a,o))return!1}else{if(s||h)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(F(e)&&F(r)){for(var n={},i=0,a=Object.keys(e),o=a.length;i<o;i++){var s=a[i];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;n[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!n.hasOwnProperty(u))return!1}}else{if(W(e)&&W(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==o(e))return t;for(var n=0,i=(r=r||Object.keys(e)).length;n<i;){var a=r[n];t[a]=e[a],n++}return t},joinArr:V,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()})},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!We.isE(e)){var i=Ge(t,4),a=i[0],o=i[1],s=i[2],h=i[3];r&&(a-=r,s+=r),n&&(o-=n,h+=n);for(var l=[s,o,a,h,s,h],c=Ge(We.calPoint([a,o],e),2),u=a=c[0],_=o=c[1],f=a,d=o,p=0;p<6;p+=2)var v=l[p],y=l[p+1],g=Ge(We.calPoint([v,y],e),2),v=g[0],y=g[1],u=Math.min(u,v),f=Math.max(u,v),_=Math.min(_,y),d=Math.max(d,y);t=[u,_,f,d]}else(r||n)&&(t[0]-=r,t[1]-=n,t[2]+=r,t[3]+=n);return t}},Z={position:/((-?[\d.]+(px|%)?)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var J={dotProduct:function(t,e,r,n){return t*r+e*n},crossProduct:function(t,e,r,n){return t*n-r*e}},Q=4*(Math.sqrt(2)-1)/3,tt=J.crossProduct,nt=p.STYLE_KEY,it=nt.WIDTH,at=nt.HEIGHT,ot=nt.TRANSFORM_ORIGIN;function st(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function ht(t,e,r,n){return Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2))}function lt(t,e){var r=Ge(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Ge(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return!(c<=n||u<=i||a<=h||o<=l)}function ct(t,e,r){var n=r.matrix,i=void 0===n?[1,0,0,1,0,0]:n,a=r.computedStyle,o=void 0===a?{}:a,s=o[it],h=o[at],l=o[ot],c=Ge(l=void 0===l?[.5*s,.5*h]:l,2),u=c[0],_=c[1],f=Ge(We.calPoint([t*s-u,e*h-_],i),2);return[(t=f[0])+u,(e=f[1])+_]}function ut(t){return t*Math.PI/180}function _t(t){var r=t.length,e=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(e,1/r)}function ft(t,e,r){var n=t,i=(2*e+r)/3,a=(e+2*r)/3;return(n(e)+3*n(i)+3*n(a)+n(r))*(r-e)/8}function dt(e,r){return function t(e,r,n,i){var a=3<arguments.length&&void 0!==i?i:.001,o=e,s=(r+n)/2,h=ft(o,r,n),l=ft(o,r,s),c=ft(o,s,n),u=l+c-h;return Math.abs(u)<=15*a?l+c+u/15:t(o,r,s,a/2)+t(o,s,n,a/2)}(function(t){return _t(pt(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function pt(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:1;return 2===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Ge(e,3),a=i[0],o=i[1],s=i[2],h=Ge(a,2),l=h[0],c=h[1],u=Ge(o,2),_=u[0],f=u[1],d=Ge(s,2),p=d[0],v=d[1],y=0,g=0,g=0===n?(y=Math.pow(1-t,2)*l+2*t*(1-t)*_+Math.pow(t,2)*p,Math.pow(1-t,2)*c+2*t*(1-t)*f+Math.pow(t,2)*v):1===n?(y=2*(1-t)*(_-l)+2*t*(p-_),2*(1-t)*(f-c)+2*t*(v-f)):2===n?(y=2*(p-2*_+l),2*(v-2*f+c)):y=0;return[y,g]}(t,e,i):3===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Ge(e,4),a=i[0],o=i[1],s=i[2],h=i[3],l=Ge(a,2),c=l[0],u=l[1],_=Ge(o,2),f=_[0],d=_[1],p=Ge(s,2),v=p[0],y=p[1],g=Ge(h,2),m=g[0],E=g[1],T=0,O=0,O=0===n?(T=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*f+3*(1-t)*Math.pow(t,2)*v+Math.pow(t,3)*m,Math.pow(1-t,3)*u+3*t*Math.pow(1-t,2)*d+3*(1-t)*Math.pow(t,2)*y+Math.pow(t,3)*E):1===n?(T=3*((1-t)*(1-t)*(f-c)+2*(1-t)*t*(v-f)+t*t*(m-v)),3*((1-t)*(1-t)*(d-u)+2*(1-t)*t*(y-d)+t*t*(E-y))):2===n?(T=6*(v-2*f+c)*(1-t)+6*(m-2*v+f)*t,6*(y-2*d+u)*(1-t)+6*(E-2*y+d)*t):3===n?(T=6*(m-3*v+3*f-c),6*(E-3*y+3*d-u)):T=0;return[T,O]}(t,e,i):void 0}function vt(e,r,t){for(var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,o=function(t){return _t(pt(t,e,r))},s=t*n,h=n,l=h,c=0;c<i;c++){var u=ft(o,0,h)-s;if(Math.abs(u)<a)break;var _=_t(pt(h,e,r,1));if(h-=u*_/(u*_t(pt(h,e,r,2))+_*_),Math.abs(h-l)<a)break;l=h}return pt(h,e,r,0)}function yt(t,e){var r=Ge(t,4),n=Ge(r[0],2),i=n[0],a=n[1],o=Ge(r[1],2),s=o[0],h=o[1],l=Ge(r[2],2),c=l[0],u=l[1],_=r[3],f=(s-i)*e+i,d=(h-a)*e+a,p=(c-s)*e+s,v=(u-h)*e+h,y=(p-f)*e+f,g=(v-d)*e+d;if(4===t.length){var m=Ge(_,2);return[[i,a],[f,d],[y,g],[(((m[0]-c)*e+c-p)*e+p-y)*e+y,(((m[1]-u)*e+u-v)*e+v-g)*e+g]]}if(3===t.length)return[[i,a],[f,d],[y,g]]}var Xe={pointInPolygon:function(t,e,r){for(var n=Ge(r[0],2),i=n[0],a=n[1],o=Ge(r[0],2),s=o[0],h=o[1],l=r.length,c=1;c<l;c++)var u=Ge(r[c],2),_=u[0],f=u[1],i=Math.max(i,_),a=Math.max(a,f),s=Math.min(s,_),h=Math.min(h,f);if(t<s||e<h||i<t||a<e)return!1;for(var d=0,p=r.length;d<p;d++){var v=Ge(r[d],2),y=v[0],g=v[1],m=Ge(r[(d+1)%p],2),E=m[0],T=m[1];if(tt(E-y,T-g,t-y,e-g)<0)return!1}return!0},d2r:ut,r2d:function(t){return 180*t/Math.PI},H:Q,h:st,angleBySide:function(t,e,r){var n=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(n)},sideByAngle:function(t,e,r){var n=Math.cos(t);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*n)},pointsDistance:ht,triangleIncentre:function(t,e,r,n,i,a){var o=ht(r,n,i,a),s=ht(t,e,i,a),h=ht(t,e,r,n);return[(o*t+s*r+h*i)/(o+s+h),(o*e+s*n+h*a)/(o+s+h)]},ellipsePoints:function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,i=r*Q,a=n===r?i:n*Q;return[[t-r,e],[t-r,e-a,t-i,e-n,t,e-n],[t+i,e-n,t+r,e-a,t+r,e],[t+r,e+a,t+i,e+n,t,e+n],[t-i,e+n,t-r,e+a,t-r,e]]},sectorPoints:function t(e,r,n,i,a){var o;a<i&&(i=(o=[a,i])[0],a=o[1]);var s=[],h=Math.floor(i/90),l=Math.floor(a/90);if(h===l||l-h==1&&a%90==0){var c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b,R,x,S,k,I=st(ut(Math.abs(i-a)))*n,N=Math.sqrt(Math.pow(n,2)+Math.pow(I,2)),w=Math.atan(I/n);h<90?(c=[e+Math.sin(ut(i))*n,r-Math.cos(ut(i))*n],f=w+ut(i),u=[e+Math.sin(f)*N,r-Math.cos(f)*N],_=[e+Math.sin(ut(a))*n,r-Math.cos(ut(a))*n],f=ut(a)-w,d=[e+Math.sin(f)*N,r-Math.cos(f)*N],s.push(c),s.push(u.concat(d).concat(_))):h<180?(p=[e+Math.cos(ut(i-90))*n,r+Math.sin(ut(i-90))*n],g=w+ut(i-90),v=[e+Math.cos(g)*N,r+Math.sin(g)*N],y=[e+Math.cos(ut(a-90))*n,r+Math.sin(ut(a-90))*n],g=ut(a-90)-w,m=[e+Math.cos(g)*N,r+Math.sin(g)*N],s.push(p),s.push(v.concat(m).concat(y))):h<270?(E=[e-Math.sin(ut(i-180))*n,r+Math.cos(ut(i-180))*n],M=w+ut(i-180),T=[e-Math.sin(M)*N,r+Math.cos(M)*N],O=[e-Math.sin(ut(a-180))*n,r+Math.cos(ut(a-180))*n],M=ut(a-180)-w,A=[e-Math.sin(M)*N,r+Math.cos(M)*N],s.push(E),s.push(T.concat(A).concat(O))):(b=[e-Math.cos(ut(i-270))*n,r+Math.sin(ut(i-270))*n],S=w+ut(i-270),R=[e-Math.cos(S)*N,r+Math.sin(S)*N],x=[e-Math.cos(ut(a-270))*n,r+Math.sin(ut(a-270))*n],S=ut(a-270)-w,k=[e-Math.cos(S)*N,r+Math.sin(S)*N],s.push(b),s.push(R.concat(k).concat(x)))}else{for(var D,P,C,L,F=h,B=[];F<=l;F++)0===F?(D=t(e,r,n,i,90),B.push(D)):1===F?(h===F||90<a)&&(P=t(e,r,n,i<90?90:i,180<a?180:a),B.push(P)):2===F?(h===F||180<a)&&(C=t(e,r,n,i<180?180:i,270<a?270:a),B.push(C)):3===F&&(h===F||270<a)&&(L=t(e,r,n,i<270?270:i,a),B.push(L));s=B[0];for(var H=1,G=B.length;H<G;H++)s.push(B[H][1])}return s},getRectsIntersection:function(t,e){if(!lt(t,e))return null;var r=Ge(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Ge(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return[Math.max(n,h),Math.max(i,l),Math.min(a,c),Math.min(o,u)]},isRectsOverlap:lt,isRectsInside:function(t,e){var r=Ge(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Ge(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return n<=h&&i<=l&&c<=a&&u<=o},calCoordsInNode:ct,calPercentInNode:function(t,e,r){var n,i=r.computedStyle,a=i[it],o=i[at],s=Ge(i[ot],2),h=s[0],l=s[1],c=Math.atan((o-l)/(a-h)),u=Ge(ct(1,1,r),2),_=u[0],f=u[1],d=h<=_&&l<=f?(n=h===_?-Math.atan(1/0):Math.atan((f-l)/(_-h)))-c:h<=_&&f<l?(n=h===_?-Math.atan(1/0):Math.atan((l-f)/(_-h)))+c:_<h&&l<=f?(n=Math.atan((f-l)/(h-_)))-c:_<h&&f<l?(n=Math.atan((f-l)/(_-h)))<=c?n+Math.PI-c:-(d=Math.PI-n+c):0,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-l,2)),v=h<=t&&l<=e?h===t?-Math.atan(1/0):Math.atan((e-l)/(t-h)):h<=t&&e<l?h===t?-Math.atan(1/0):-Math.atan((e-l)/(h-t)):t<h&&l<=e?Math.PI-Math.atan((e-l)/(h-t)):Math.atan((e-l)/(t-h))-Math.PI;return(v-=d)>Math.PI?(v-=Math.PI,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>.5*Math.PI?(v=Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o]):0<=v?[(h+p*Math.cos(v))/a,(l+p*Math.sin(v))/o]:v>=.5*-Math.PI?(v=-v,[(h+p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>=-Math.PI?(v=Math.PI+v,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):(v=-Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o])},bboxBezier:function(t,e,r,n,i,a,o,s){return 4===arguments.length?[t,e,r,n]:6===arguments.length?(h=t,l=e,c=r,u=n,_=i,f=a,E=Math.min(h,_),T=Math.min(l,f),O=Math.max(h,_),M=Math.max(l,f),(c<E||u<T||O<c||M<u)&&(g=(v=1-(d=(h-c)/(h-2*c+_)))*v*h+2*v*d*c+d*d*_,m=(y=1-(p=(l-u)/(l-x*u+f)))*y*l+2*y*p*u+p*p*f,E=Math.min(E,g),T=Math.min(T,m),O=Math.min(O,g),M=Math.min(M,m)),[E,T,O,M]):8===arguments.length?(A=t,b=e,R=r,S=n,k=i,I=a,N=o,w=s,$=Math.min(A,N),q=Math.min(b,w),Z=Math.max(A,N),J=Math.max(b,w),(R<$||S<q||Z<R||J<S||k<$||I<q||Z<k||J<I)&&(B=(P=b-2*S+I)*P-(L=3*S-b-3*I+w)*(-b+S),0<(F=(D=A-2*R+k)*D-(C=3*R-A-3*k+N)*(-A+R))&&(0<(H=(-D-(F=Math.sqrt(F)))/C)&&H<1&&(Y=(G=1-H)*G*G*A+3*G*G*H*R+3*G*H*H*k+H*H*H*N,$=Math.min($,Y),Z=Math.max(Z,Y)),0<(H=(-D+F)/C)&&H<1&&(U=(W=1-H)*W*W*A+3*W*W*H*R+3*W*H*H*k+H*H*H*N,$=Math.min($,U),Z=Math.max(Z,U))),0<B&&(0<(X=(-P-(B=Math.sqrt(B)))/L)&&X<1&&(z=(K=1-X)*K*K*b+3*K*K*X*S+3*K*X*X*I+X*X*X*w,q=Math.min(q,z),J=Math.max(J,z)),0<(X=(-P+B)/L)&&X<1&&(j=(V=1-X)*V*V*b+3*V*V*X*S+3*V*X*X*I+X*X*X*w,q=Math.min(q,j),J=Math.max(J,j)))),[$,q,Z,J]):void 0;var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b,R,S,k,I,N,w,D,P,C,L,F,B,H,G,Y,W,U,X,K,z,V,j,$,q,Z,J},bezierLength:dt,pointAtBezier:function(t,e,r,n,i){return vt(t,e,dt(t,e,0,1),r,n,i)},pointAtBezierWithLength:vt,sliceBezier:yt,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=yt(t,r)),0<e&&(r<1&&(e/=r),t=yt(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,n){return 270<=n?(n=ut(n-=270),[t-Math.cos(n)*r,e-Math.sin(n)*r]):180<=n?(n=ut(n-=180),[t-Math.sin(n)*r,e+Math.cos(n)*r]):90<=n?(n=ut(n-=90),[t+Math.cos(n)*r,e+Math.sin(n)*r]):(n=ut(n),[t+Math.sin(n)*r,e-Math.cos(n)*r])}},gt=Ue.rgba2int,mt=Ue.isNil,Et=R.PX,Tt=R.PERCENT,Ot=Xe.d2r;function Mt(t){if(/%$/.test(t)||/px$/.test(t)||/^-?[\d.]+$/.test(t))return[parseFloat(t),/%/.test(t)?Tt:Et];var e=[{top:0,left:0,center:50,right:100,bottom:100}[t],Tt];return mt(e[0])&&(e[0]=50),e}function At(t,e){for(var r,n=[],i=0,a=t.length;i<a;i++){var o,s=t[i];1<s.length?(o=s[1])[1]===Tt?n.push([s[0],.01*o[0]]):n.push([s[0],o[0]/e]):n.push([s[0]])}1===n.length&&n.push(Ue.clone(n[0])),1===n[0].length&&n[0].push(0),1<n.length&&(1===n[r=n.length-1].length&&n[r].push(1));for(var h=n[0][1],l=1,c=n.length;l<c-1;l++){var u=n[l];if(1<u.length)h=u[1];else{for(var _=l+1,f=n[n.length-1][1];_<c-1;_++){var d=n[_];if(1<d.length){f=d[1];break}}for(var p=(f-h)/(_-l+1),v=l;v<_;v++){n[v].push(h+p*(v+1-l))}l=_}}for(var y=1,g=n.length;y<g;y++){var m=n[y],E=n[y-1];m[1]<E[1]&&(m[1]=E[1])}for(var T=0,O=n.length;T<O;T++){var M=n[T];if(1<M[1]){n.splice(T);var A,b,R,x,S,k=n[T-1];k&&k[1]<1&&(A=M[0][0]-k[0][0],b=M[0][1]-k[0][1],R=M[0][2]-k[0][2],x=M[0][3]-k[0][3],S=(1-k[1])/(M[1]-k[1]),n.push([[M[0][0]+A*S,M[0][1]+b*S,M[0][2]+R*S,M[0][3]+x*S],1]));break}}for(var I=n.length-1;0<=I;I--){var N=n[I];if(N[1]<0){n.splice(0,I+1);var w,D,P,C,L,F=n[I];F&&0<F[1]&&(w=F[0][0]-N[0][0],D=F[0][1]-N[0][1],P=F[0][2]-N[0][2],C=F[0][3]-N[0][3],L=-N[1]/(F[1]-N[1]),n.unshift([[N[0][0]+w*L,N[0][1]+D*L,N[0][2]+P*L,N[0][3]+C*L],0]));break}}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n}var bt={parseGradient:function(t){var e,r,n,i=Z.gradient.exec(t);if(i){var a,o,s,h,l,c,u,_,f,d,p,v={k:i[1]};"linear"===v.k?(a=/(-?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(i[2]))?v.d=(e=a[0].toLowerCase(),n=180,"to top"===e?n=0:"to top right"===e?n=45:"to right"===e?n=90:"to bottom right"===e?n=135:"to bottom"===e||("to bottom left"===e?n=225:"to left"===e?n=270:"to top left"===e?n=315:(r=/(-?[\d.]+)deg/.exec(e))&&(n=parseFloat(r[1]))),n%360):(o=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)/.exec(i[2]),v.d=o?[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])]:180):"radial"===v.k?(v.s=-1<i[2].indexOf("circle")?"circle":"ellipse",(s=/(closest|farthest)-(side|corner)/i.exec(i[2]))?v.z=s[0].toLowerCase():(h=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)(?:\s+([\d.]+))?/.exec(i[2]))?(v.z=[parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]),parseFloat(h[4])],mt(h[5])?v.z.push(1):v.z.push(parseFloat(h[5]))):v.z="farthest-corner",(l=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(c=Mt(l[1]),u=l[2]?Mt(l[2]):c,v.p=[c,u]):v.p=[[50,Tt],[50,Tt]]):"conic"===v.k&&(_=/(-?[\d.]+deg)/i.exec(i[2]),v.d=_?parseFloat(_[0])%360:0,(f=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(d=Mt(f[1]),p=f[2]?Mt(f[2]):d,v.p=[d,p]):v.p=[[50,Tt],[50,Tt]]);var y=i[2].match(/(-?[\d.]+(px|%))?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*(-?[\d.]+(px|%))?/gi);return v.v=y.map(function(t){var e=/((?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\)))/i.exec(t),r=[gt(e[1])],n=/-?[\d.]+(?:px|%)/.exec(t);return n&&(r[1]=[parseFloat(n[0])],/%$/.test(n[0])?r[1][1]=Tt:r[1][1]=Et),r}),v}},getLinear:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m;if(Array.isArray(e)){w=r+e[0]*o,D=n+e[1]*s,P=r+e[2]*o,C=n+e[3]*s;var E=At(t,Math.sqrt(Math.pow(P-w,2)+Math.pow(C-D,2)))}else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var T=Math.max(o,s),O=(l=T,c=i,u=a,v=270<=(h=e)?(_=Ot(360-h),f=c+Math.sin(_)*l,d=u+Math.cos(_)*l,p=c-Math.sin(_)*l,u-Math.cos(_)*l):180<=h?(y=Ot(h-180),f=c+Math.sin(y)*l,d=u-Math.cos(y)*l,p=c-Math.sin(y)*l,u+Math.cos(y)*l):90<=h?(g=Ot(180-h),f=c-Math.sin(g)*l,d=u-Math.cos(g)*l,p=c+Math.sin(g)*l,u+Math.cos(g)*l):(m=Ot(h),f=c-Math.sin(m)*l,d=u+Math.cos(m)*l,p=c+Math.sin(m)*l,u-Math.cos(m)*l),[f,d,p,v]);T*=2;var M=J.dotProduct(r-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/T,A=J.dotProduct(r+o-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/T,b=J.dotProduct(r+o-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/T,R=J.dotProduct(r-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/T,x=M,S=M,x=Math.min(x,Math.min(A,Math.min(b,R))),S=Math.max(S,Math.max(A,Math.max(b,R))),k=x/T,I=O[2]-O[0],N=O[3]-O[1],w=O[0]+I*k,D=O[1]+N*k,P=O[2]-I*k,C=O[3]-N*k;E=At(t,S-x)}return{x1:w,y1:D,x2:P,y2:C,stop:E}},getRadial:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b,R,x,S,k,I=Ge((h=e,l=r,c=n,u=o-i,_=s-a,f=i,d=a,p=o,v=s,A=0,Array.isArray(l)?(y=f+l[0]*u,g=d+l[1]*_,l[4]<=0?M=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(O=(T=Math.sqrt(Math.pow((l[2]-l[0])*u,2)+Math.pow((l[3]-l[1])*_,2)))*l[4],M=Math.max(T,O),A=l[2]>=l[0]?l[3]>=l[1]?Math.asin((l[3]-l[1])*_/T):-Math.asin((l[1]-l[3])*_/T):l[3]>=l[1]?Ot(180)-Math.asin((l[3]-l[1])*_/T):Math.asin((l[1]-l[3])*_/T)-Ot(180))):(y=c[0][1]===Et?f+c[0][0]:f+c[0][0]*u*.01,g=c[1][1]===Et?d+c[1][0]:d+c[1][0]*_*.01,m=1,"closest-corner"===l&&"circle"===h?M=y<=f||p<=y||g<=d||v<=g?Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(T=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,Math.sqrt(Math.pow(T,2)+Math.pow(O,2))):"closest-side"===l||"closest-corner"===l?y<=f||p<=y||g<=d||v<=g?M=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(E=1,T=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,M=Math.min(T,O),"closest-corner"===l&&(E=Math.sqrt(2)),T*=E,O*=E,M*=E):(T=y<=f?f-y+u:p<=y?y-p+u:y<f+.5*u?p-y:y-f,O=g<=d?d-g+_:v<=g?g-v+_:g<d+.5*_?v-g:g-d,M=Math.max(T,O),"farthest-side"!==l&&(m=Math.sqrt(2)),T*=m,O*=m,M*=m)),"circle"===h&&(T=O=M),[y,g,M,T,O,A]),6),N=I[0],w=I[1],D=I[2],P=I[3],C=I[4],L=I[5],F=1,B=1;return P===C&&!L||(x=[1,0,0,1,0,0],L&&(b=Math.sin(L),x=[R=Math.cos(L),b,-b,R,0,0]),P!==D&&(S=[F=P/D,0,0,1,0,0],x=We.multiply(x,S)),C!==D&&(k=[1,0,0,B=C/D,0,0],x=We.multiply(x,k))),{cx:N,cy:w,r:D,stop:At(t,D),scx:F,scy:B,matrix:x,d:L}},getConic:function(t,e,r,n,i,a,o){var s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,h=Ge(function(t,e,r,n,i,a){var o,s,h,l,c,u=i-r,_=a-n;o=e[0][1]===Et?r+e[0][0]:r+e[0][0]*u*.01;s=e[1][1]===Et?n+e[1][0]:n+e[1][0]*_*.01;l=r+.5*u<=o?o-r:i-o;c=n+.5*_<=s?s-n:a-s;return h=Math.sqrt(Math.pow(l,2)+Math.pow(c,2)),[o,s,h,t]}(e,r,n,i,a,o),4),l=h[0],c=h[1],u=h[2];return u<<=1,{cx:l,cy:c,r:u*=s,deg:h[3],stop:At(t,1)}}},Rt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",alignSelf:"auto",textAlign:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,scaleX:1,scaleY:1,skewX:0,skewY:0,rotateZ:0,filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal"},xt={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},St=[],kt=[];Object.keys(Rt).forEach(function(t){kt.push(t);var e=Rt[t];St.push({k:t,v:e})});var It=[],Nt=[];Object.keys(xt).forEach(function(t){Nt.push(t);var e=xt[t];It.push({k:t,v:e})});var wt={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto"},Dt=[];Object.keys(wt).forEach(function(t){Dt.push(t)});var Pt={DOM:Rt,GEOM:xt,isValid:function(t){return Rt.hasOwnProperty(t)||xt.hasOwnProperty(t)},DOM_KEY_SET:kt,GEOM_KEY_SET:Nt,DOM_ENTRY_SET:St,GEOM_ENTRY_SET:It,INHERIT:wt,INHERIT_KEY_SET:Dt},Ct=Ue.isNil;function Lt(t,e,r,n){Ct(t.flexGrow)&&(t.flexGrow=e||0),Ct(t.flexShrink)&&(t.flexShrink=r||0),Ct(t.flexBasis)&&(t.flexBasis=n||0)}var Ft={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderWidthTop","borderWidthRight","borderWidthBottom","borderWidthLeft"],borderColor:["borderColorTop","borderColorRight","borderColorBottom","borderColorLeft"],borderStyle:["borderStyleTop","borderStyleRight","borderStyleBottom","borderStyleLeft"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],scale:["scaleX","scaleY"],rotate:["rotateZ"],skew:["skewX","skewY"],toFull:function(r,t){var e,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T=r[t];if("background"===t)Ct(r.backgroundImage)&&((e=Z.gradient.exec(T))?(r.backgroundImage=e[0],T=T.replace(e[0],"")):(n=Z.img.exec(T))&&(r.backgroundImage=n[0],T=T.replace(n[0],""))),!Ct(r.backgroundRepeat)||(i=/(no-)?repeat(-[xy])?/i.exec(T))&&(r.backgroundRepeat=i[0].toLowerCase()),!Ct(r.backgroundColor)||(a=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(T))&&(r.backgroundColor=a[0],T=T.replace(a[0],"")),!Ct(r.backgroundPosition)||(o=T.match(Z.position))&&(r.backgroundPosition=o.join(" "),this.toFull(r,"backgroundPosition"));else if("flex"===t){"none"===T?Lt(r,0,0,"auto"):"auto"===T?Lt(r,1,1,"auto"):/^[\d.]+$/.test(T)?Lt(r,Math.max(0,parseFloat(T)),1,0):/^[\d.]+px$/i.test(T)?Lt(r,1,1,0):/^[\d.]+%$/.test(T)?Lt(r,1,1,T):/^[\d.]+\s+[\d.]+$/.test(T)?(s=T.split(/\s+/),Lt(r,s[0],s[1],0)):/^[\d.]+\s+[\d.]+%$/.test(T)?(h=T.split(/\s+/),Lt(r,h[0],1,h[1])):Lt(r,0,1,"auto")}else if("borderRadius"===t){1===(T=T.toString().split("/")).length&&(T[1]=T[0]);for(var O=0;O<2;O++){var M=T[O].toString().split(/\s+/);0===M.length?T[O]=[0,0,0,0]:1===M.length?T[O]=[M[0],M[0],M[0],M[0]]:2===M.length?T[O]=[M[0],M[1],M[0],M[1]]:3===M.length?T[O]=[M[0],M[1],M[2],M[1]]:T[O]=M.slice(0,4)}this[t].forEach(function(t,e){Ct(r[t])&&(r[t]=T[0][e]+" "+T[1][e])})}else{"backgroundPosition"===t?(1===(T=T.toString().split(/\s+/)).length&&(T[1]="50%"),this[t].forEach(function(t,e){Ct(r[t])&&(r[t]=T[e])})):-1<["translate","scale","skew"].indexOf(t)?(1===(l=T.toString().split(/\s*,\s*/)).length&&(l[1]=l[0]),this[t].forEach(function(t,e){Ct(r[t])&&(r[t]=l[e])})):"margin"===t||"padding"===t?(v=r,g=this[y=t],E=v[y],Ct(E)||(m=E.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi))&&(1===m.length?m[3]=m[2]=m[1]=m[0]:2===m.length?(m[2]=m[0],m[3]=m[1]):3===m.length&&(m[3]=m[1]),g.forEach(function(t,e){Ct(v[t])&&(v[t]=m[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(p=(c=r)[u=t],Ct(p)||(Ct(c[u+"Width"])&&(_=/\b[\d.]+px\b/i.exec(p),c[u+"Width"]=_?_[0]:0),Ct(c[u+"Style"])&&(f=/\b(solid|dashed|dotted)\b/i.exec(p),c[u+"Style"]=f?f[1]:"solid"),Ct(c[u+"Color"])&&((d=/#[0-9a-f]{3,8}/i.exec(p))&&-1<[4,7,9].indexOf(d[0].length)?c[u+"Color"]=d[0]:/\btransparent\b/i.test(p)?c[u+"Color"]="transparent":(d=/rgba?\s*\(.+\)/i.exec(p),c[u+"Color"]=d?d[0]:"transparent")))):this[t]&&this[t].forEach(function(t){Ct(r[t])&&(r[t]=T)})}}},Bt={list:[],data:{},charWidth:{}},Ht=p.STYLE_KEY,Gt=Ht.FONT_SIZE,Yt=Ht.FONT_FAMILY,Wt=Ht.FONT_WEIGHT,Ut={},Xt={},Kt=[],zt=[];function Vt(t,e,r,n,i){var a,o;return(o=t?n[t]?n[t]:n[t]=document.createElement("canvas"):(a=n===Ut?Kt:zt).length?a.pop():document.createElement("canvas")).width=e,o.height=r,"undefined"!=typeof karas&&karas.debug&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",n===Ut?"canvas":"webgl"),t&&o.setAttribute("key",t),i&&o.setAttribute("message",i),document.body.appendChild(o)),{canvas:o,ctx:n===Ut?o.getContext("2d"):o.getContext("webgl")||o.getContext("experimental-webgl"),draw:function(){},available:!0,release:function(){n===Ut?Kt.push(this.canvas):zt.push(this.canvas),this.canvas=null,this.ctx=null}}}var jt,$t,qt={},Ke={measureText:function(){var t=Bt.list,l=Bt.data,c="",u=[],_=[];if(Object.keys(l).forEach(function(t){var e=l[t],r=e.key,n=e.style,i=e.s;if(i)for(var a="position:absolute;font-family:".concat(n[Yt],";font-size:").concat(n[Gt],"px;font-weight:").concat(n[Wt]),o=0,s=i.length;o<s;o++){u.push(r);var h=i.charAt(o);_.push(h),c+='<span style="'.concat(a,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}}),c){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=c;for(var r=e.childNodes,n=Bt.charWidth,i=0,a=r.length;i<a;i++){var o=r[i],s=u[i],h=_[i],f=window.getComputedStyle(o,null);n[s][h]=parseFloat(f.width)}t.forEach(function(t){return t.__measureCb()}),Bt.list=[],Bt.data={},document.body.removeChild(e)}},IMG:qt,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){var n,i,a,o,t,s;Array.isArray(e)?(n=0,i=e.length,a=[],e.forEach(function(t,e){Ke.measureImg(t,function(t){a[e]=t,++n===i&&r(a)})})):2===(o=qt[e]=qt[e]||{state:0,task:[]}).state?r(o):1===o.state?o.task.push(r):(o.state=1,o.task.push(r),(t=new Image).onload=function(){o.state=2,o.success=!0,o.width=t.width,o.height=t.height,o.source=t,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},t.onerror=function(t){Ke.error("Measure img failed: "+e),o.state=2,o.success=!1,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},"data:"===e.substr(0,5)||(s=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&location.hostname!==s[1]&&(t.crossOrigin="anonymous"),t.src=e,"undefined"!=typeof karas&&karas.debug&&document.body.appendChild(t))},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:($t=function(t){var e;return"undefined"!=typeof requestAnimationFrame?(Ke.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Ke.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Jt.toString=function(){return $t.toString()},Jt),cancelAnimationFrame:(jt=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Ke.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Ke.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},Zt.toString=function(){return jt.toString()},Zt),now:function(){return"undefined"!=typeof performance?(Ke.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Ke.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&Ut.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,n){return Vt(r,t,e,Ut,n)},releaseCacheCanvas:function(t){Kt.push(t)},delCacheCanvas:function(t){t&&delete Ut[t]},hasCacheWebgl:function(t){return t&&Xt.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,n){return Vt(r,t,e,Xt,n)},releaseCacheWebgl:function(t){zt.push(t)},delCacheWebgl:function(t){t&&delete Xt[t]},isDom:function(t){if(t){if(Ue.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if(Ue.isFunction(t.getElementsByTagName))return!0}return!1}};function Zt(t){return jt.apply(this,arguments)}function Jt(t){return $t.apply(this,arguments)}var Qt=p.STYLE_KEY,te=[[Qt.BACKGROUND_COLOR],[Qt.BORDER_BOTTOM_COLOR],[Qt.BORDER_LEFT_COLOR],[Qt.BORDER_RIGHT_COLOR],[Qt.BORDER_TOP_COLOR],[Qt.COLOR]],ee=[[Qt.FONT_SIZE],[Qt.BORDER_BOTTOM_WIDTH],[Qt.BORDER_LEFT_WIDTH],[Qt.BORDER_RIGHT_WIDTH],[Qt.BORDER_TOP_WIDTH],[Qt.LEFT],[Qt.TOP],[Qt.RIGHT],[Qt.BOTTOM],[Qt.FLEX_BASIS],[Qt.WIDTH],[Qt.HEIGHT],[Qt.LINE_HEIGHT],[Qt.MARGIN_BOTTOM],[Qt.MARGIN_LEFT],[Qt.MARGIN_TOP],[Qt.MARGIN_RIGHT],[Qt.PADDING_TOP],[Qt.PADDING_RIGHT],[Qt.PADDING_BOTTOM],[Qt.PADDING_LEFT],[Qt.STROKE_WIDTH],[Qt.STROKE_MITERLIMIT]],re=[[Qt.BACKGROUND_IMAGE],[Qt.FILL],[Qt.STROKE]],ne=[[Qt.BORDER_TOP_LEFT_RADIUS],[Qt.BORDER_TOP_RIGHT_RADIUS],[Qt.BORDER_BOTTOM_RIGHT_RADIUS],[Qt.BORDER_BOTTOM_LEFT_RADIUS]],ie={};te.forEach(function(t){ie[t]=!0});var ae={};ee.forEach(function(t){ae[t]=!0});var oe={};ne.forEach(function(t){oe[t]=!0});var se={};re.forEach(function(t){se[t]=!0});var he=[[Qt.TRANSLATE_X],[Qt.TRANSLATE_Y],[Qt.SKEW_X],[Qt.SKEW_Y],[Qt.SCALE_X],[Qt.SCALE_Y],[Qt.ROTATE_Z]],le={};he.forEach(function(t){le[t]=!0});var ce,ue,_e={KEY_COLOR:te,KEY_EXPAND:he,KEY_GRADIENT:re,KEY_LENGTH:ee,KEY_RADIUS:ne,COLOR_HASH:ie,EXPAND_HASH:le,GRADIENT_HASH:se,LENGTH_HASH:ae,RADIUS_HASH:oe,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},fe=Pt.DOM,de=Pt.GEOM,pe=R.INHERIT,ve=p.STYLE_KEY,ye={},ge=[],me=c({},ve.POINTER_EVENTS,!0),Ee=(c(ce={},ve.TRANSFORM,!0),c(ce,ve.TRANSLATE_X,!0),c(ce,ve.TRANSLATE_Y,!0),c(ce,ve.SKEW_X,!0),c(ce,ve.SKEW_Y,!0),c(ce,ve.SCALE_X,!0),c(ce,ve.SCALE_Y,!0),c(ce,ve.ROTATE_Z,!0),c(ce,ve.COLOR,!0),c(ce,ve.FONT_STYLE,!0),c(ce,ve.STROKE_WIDTH,!0),c(ce,ve.FILL,!0),c(ce,ve.STROKE_DASHARRAY,!0),c(ce,ve.STROKE_LINECAP,!0),c(ce,ve.STROKE_LINEJOIN,!0),c(ce,ve.STROKE_MITERLIMIT,!0),c(ce,ve.BACKGROUND_COLOR,!0),c(ce,ve.BACKGROUND_IMAGE,!0),c(ce,ve.BACKGROUND_POSITION_X,!0),c(ce,ve.BACKGROUND_POSITION_Y,!0),c(ce,ve.BACKGROUND_REPEAT,!0),c(ce,ve.BACKGROUND_SIZE,!0),c(ce,ve.STROKE,!0),c(ce,ve.BORDER_BOTTOM_COLOR,!0),c(ce,ve.BORDER_LEFT_COLOR,!0),c(ce,ve.BORDER_RIGHT_COLOR,!0),c(ce,ve.BORDER_TOP_COLOR,!0),c(ce,ve.BORDER_TOP_LEFT_RADIUS,!0),c(ce,ve.BORDER_TOP_RIGHT_RADIUS,!0),c(ce,ve.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(ce,ve.BORDER_BOTTOM_LEFT_RADIUS,!0),c(ce,ve.VISIBILITY,!0),c(ce,ve.OPACITY,!0),c(ce,ve.Z_INDEX,!0),c(ce,ve.FILTER,!0),c(ce,ve.BOX_SHADOW,!0),c(ce,ve.OVERFLOW,!0),ce),Te=(c(ue={},ve.FONT_SIZE,!0),c(ue,ve.FONT_WEIGHT,!0),c(ue,ve.FONT_FAMILY,!0),ue),Oe={GEOM:ye,GEOM_KEY_SET:ge,IGNORE:me,REPAINT:Ee,MEASURE:Te,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Oe.addGeom(e,t,r)}):t&&(ye.hasOwnProperty(t)||ge.push(t),(ye[t]=ye[t]||{})[e]=r||!0)}};function Me(t,e){return ye.hasOwnProperty(e)&&ye[e].hasOwnProperty(t)}Oe.isIgnore=function(t){return me.hasOwnProperty(t)},Oe.isGeom=Me,Oe.isRepaint=function(t){return Ee.hasOwnProperty(t)||Me(t)},Oe.isMeasure=function(t){return Te.hasOwnProperty(t)},Oe.isValid=function(t,e){return!!e&&(!!fe.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!de.hasOwnProperty(e))||!!ye.hasOwnProperty(e)&&ye[e].hasOwnProperty(t)))};var Ae,be,Re,xe=Oe.MEASURE_KEY_SET=Object.keys(Te).map(function(t){return parseInt(t)}),Se=xe.length;Oe.isMeasureInherit=function(t){for(var e=0;e<Se;e++){var r=xe[e];if(t.hasOwnProperty(r)&&t[r][1]===pe)return!0}return!1},Oe.measureInheritList=function(t){for(var e=[],r=0;r<Se;r++){var n=xe[r];t.hasOwnProperty(n)&&t[n][1]===pe&&e.push(n)}return e},Oe.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Oe.addGeom("$circle",["r"]),Oe.addGeom("$ellipse",["rx","ry"]),Oe.addGeom("$rect",["rx","ry"]),Oe.addGeom("$sector",["begin","end","edge","closure"]),Oe.addGeom("$polyline",["points","controls","start","end"]),Oe.addGeom("$polygon",["points","controls","start","end"]);var ke=p.STYLE_KEY,Ie=p.STYLE_RV_KEY,Ne=p.style2Upper,we=p.STYLE_KEY,De=we.POSITION,Pe=we.WIDTH,Ce=we.HEIGHT,Le=we.TRANSLATE_X,Fe=we.TRANSLATE_Y,Be=we.SCALE_X,He=we.SCALE_Y,ze=we.SKEW_X,Ve=we.SKEW_Y,je=we.ROTATE_Z,$e=we.TRANSFORM,qe=we.TRANSFORM_ORIGIN,Ze=we.BACKGROUND_IMAGE,Je=we.BACKGROUND_COLOR,Qe=we.BACKGROUND_POSITION_X,tr=we.BACKGROUND_POSITION_Y,er=we.BACKGROUND_SIZE,rr=we.OPACITY,nr=we.Z_INDEX,ir=we.COLOR,ar=we.FONT_SIZE,or=we.FONT_FAMILY,sr=we.FONT_WEIGHT,hr=we.FONT_STYLE,lr=we.LINE_HEIGHT,cr=we.TEXT_ALIGN,ur=we.FILTER,_r=we.VISIBILITY,fr=we.BOX_SHADOW,dr=we.POINTER_EVENTS,pr=we.FILL,vr=we.STROKE,yr=we.STROKE_DASHARRAY,gr=we.BORDER_TOP_WIDTH,mr=we.BORDER_RIGHT_WIDTH,Er=we.BORDER_BOTTOM_WIDTH,Tr=we.BORDER_LEFT_WIDTH,Or=we.DISPLAY,Mr=we.FLEX_DIRECTION,Ar=we.FLEX_GROW,br=we.FLEX_SHRINK,Rr=we.FLEX_BASIS,xr=we.JUSTIFY_CONTENT,Sr=we.ALIGN_SELF,kr=we.ALIGN_ITEMS,Ir=we.MATRIX,Nr=R.AUTO,wr=R.PX,Dr=R.PERCENT,Pr=R.NUMBER,Cr=R.INHERIT,Lr=R.DEG,Fr=R.RGBA,Br=R.STRING,Hr=Ue.isNil,Gr=Ue.rgba2int,Yr=Ue.equalArr,Wr=Oe.MEASURE_KEY_SET,Ur=Oe.isGeom,Xr=Oe.GEOM,Kr=Oe.GEOM_KEY_SET,zr=_e.COLOR_HASH,Vr=_e.LENGTH_HASH,jr=_e.RADIUS_HASH,$r=_e.GRADIENT_HASH,qr=_e.EXPAND_HASH,Zr=_e.GRADIENT_TYPE,Jr={translateX:Le,translateY:Fe,scaleX:Be,scaleY:He,skewX:ze,skewY:Ve,rotateZ:je,rotate:je};function Qr(t,e,r){return"auto"===r?t[e]=[0,Nr]:"inherit"===r?t[e]=[0,Cr]:/%$/.test(r)?(r=parseFloat(r)||0,t[e]=[r,Dr]):/px$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,wr]):/deg$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Lr]):(r=parseFloat(r)||0,t[e]=[r,Pr]),e!==Tr&&e!==gr&&e!==mr&&e!==Er&&e!==Pe&&e!==Ce&&e!==Rr||(t[e][0]=Math.max(t[e][0],0)),t}function tn(t,e){t===Be||t===He?e[1]=Pr:t===Le||t===Fe?e[1]===Pr&&(e[1]=wr):e[1]===Pr&&(e[1]=Lr)}function en(t){return t[ar]*S.arial.lhr}function rn(t,e,r){for(t*=.01;e;){var n=e.currentStyle[r];if(n[1]===Nr){if(r!==Pe)break;e=e.domParent}else{if(n[1]===wr)return t*n[0];n[1]===Dr&&(t*=.01*n[0],e=e.domParent)}}return t}var nn=(c(Ae={},ke.POSITION,!0),c(Ae,ke.DISPLAY,!0),c(Ae,ke.BACKGROUND_REPEAT,!0),c(Ae,ke.FLEX_DIRECTION,!0),c(Ae,ke.FLEX_GROW,!0),c(Ae,ke.FLEX_SHRINK,!0),c(Ae,ke.JUSTIFY_CONTENT,!0),c(Ae,ke.ALIGN_ITEMS,!0),c(Ae,ke.ALIGN_SELF,!0),c(Ae,ke.OVERFLOW,!0),c(Ae,ke.MIX_BLEND_MODE,!0),c(Ae,ke.STROKE_LINECAP,!0),c(Ae,ke.STROKE_LINEJOIN,!0),c(Ae,ke.STROKE_MITERLIMIT,!0),c(Ae,ke.FILL_RULE,!0),c(Ae,ke.OPACITY,!0),c(Ae,ke.Z_INDEX,!0),Ae),an=(c(be={},ke.COLOR,!0),c(be,ke.BACKGROUND_SIZE,!0),c(be,ke.BACKGROUND_COLOR,!0),c(be,ke.BORDER_TOP_COLOR,!0),c(be,ke.BORDER_RIGHT_COLOR,!0),c(be,ke.BORDER_BOTTOM_COLOR,!0),c(be,ke.BORDER_LEFT_COLOR,!0),be),on=(c(Re={},ke.BORDER_TOP_LEFT_RADIUS,!0),c(Re,ke.BORDER_TOP_RIGHT_RADIUS,!0),c(Re,ke.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(Re,ke.BORDER_BOTTOM_LEFT_RADIUS,!0),c(Re,ke.TRANSFORM_ORIGIN,!0),Re);var sn={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!Ue.isObject(a))return{};var e,_,r,n,i,o,s,h,l,c,u,f={},d=(a=Ue.extend({},a)).border;if(d&&Ft.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){Ft.toFull(a,t)}),(d=a.borderWidth)&&Ft.toFull(a,"borderWidth"),(d=a.borderColor)&&Ft.toFull(a,"borderColor"),(d=a.borderStyle)&&Ft.toFull(a,"borderStyle"),(d=a.borderRadius)&&Ft.toFull(a,"borderRadius"),(d=a.background)&&Ft.toFull(a,"background"),d=a.backgroundPosition,Hr(d)||Ft.toFull(a,"backgroundPosition"),(d=a.flex)&&Ft.toFull(a,"flex"),d=a.margin,Hr(d)||Ft.toFull(a,"margin"),d=a.padding,Hr(d)||Ft.toFull(a,"padding"),d=a.backgroundRepeat,Hr(d)||Ft.toFull(a,"backgroundRepeat"),["translate","scale","skew"].forEach(function(t){d=a[t],Hr(d)||Ft.toFull(a,t)}),d=a.rotate,Hr(d)||Ft.toFull(a,"rotate"),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ"].forEach(function(t){var e=a[t];!Hr(e)&&a.transform&&Ke.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,r=t.v;Hr(a[e])&&(a[e]=r)}),void 0!==(d=a.backgroundImage)&&(d?Z.gradient.test(d)?f[Ze]=bt.parseGradient(d):Z.img.test(d)&&(f[Ze]=Z.img.exec(d)[2]):f[Ze]=null),(d=a.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(d))&&-1<[4,7,9].indexOf(e[0].length)?f[Je]=[Gr(e[0]),Fr]:(e=/rgba?\s*\(.+\)/i.exec(d),f[Je]=[Gr(e?e[0]:[0,0,0,0]),Fr])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){d=a[t],Hr(d)||(t=e?tr:Qe,/%$/.test(d)||/px$/i.test(d)||/^-?[\d.]+$/.test(d)?(Qr(f,t,d),(d=f[t])[1]===Pr&&(d[1]=wr)):f[t]=[{top:0,left:0,center:50,right:100,bottom:100}[d]||0,Dr])}),d=a.backgroundSize){var p=f[er]=[],v=d.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(v){1===v.length&&("contain"===v[0]||"cover"===v[0]?v[1]=v[0]:v[1]="auto");for(var y=0;y<2;y++){var g=v[y];/%$/.test(g)||/px$/i.test(g)||/^-?[\d.]+$/.test(g)?(Qr(p,y,g),p[y][1]===Pr&&(p[y][1]=wr)):"0"===g||0===g?p.push([0,wr]):"contain"===g||"cover"===g?p.push([g,Br]):p.push([0,Nr])}}else p.push([0,Nr]),p.push([0,Nr])}if(["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];Hr(e)||(f[ke[Ne(t)]]=[Gr(e),Fr])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!Hr(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var n=0;n<2;n++){var i=r[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(Qr(r,n,i),r[n][1]===Pr&&(r[n][1]=wr)):r[n]=[0,wr]}f[ke[Ne(t)]]=r}}),(d=a.transform)&&(_=f[$e]=[],(r=(d||"").toString().match(/\w+\(.+?\)/g))&&r.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.indexOf("("),c=t.slice(0,l),u=t.slice(l+1,t.length-1);"matrix"===c?(6<(e=(e=u.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length&&(e=e.slice(0,6)),6===e.length&&_.push([Ir,e])):Jr.hasOwnProperty(c)?(tn(r=Jr[c],(n=Qr([r,u],1,u))[1]),_.push(n)):{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)&&(1===(i=u.toString().split(/\s*,\s*/)).length&&(i[1]=i[0].slice(0)),a=ke[Ne(c+"X")],o=ke[Ne(c+"Y")],s=Qr([a,i[0]],1,i[0]),h=Qr([o,i[1]],1,i[1]),tn(a,s[1]),tn(o,h[1]),_.push(s),_.push(h))})),d=a.transformOrigin,!Hr(d)){var m=f[qe]=[],E=d.toString().match(Z.position);if(E){1===E.length&&(E[1]=E[0]);for(var T=0;T<2;T++){var O=E[T];/%$/.test(O)||/px$/i.test(O)||/^-?[\d.]+$/.test(O)?(Qr(m,T,O),m[T][1]===Pr&&(m[T][1]=wr)):(m.push([{top:0,left:0,center:50,right:100,bottom:100}[O],Dr]),Hr(m[T][0])&&(m[T][0]=50))}}else m.push([50,Dr]),m.push([50,Dr])}return["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e,r=a[t];Hr(r)||(e=Jr[t],Qr(f,e,r),tn(e,f[e]))}),d=a.opacity,Hr(d)||(d=parseFloat(d),isNaN(d)?f[rr]=1:(d=Math.max(d,0),d=Math.min(d,1),f[rr]=d)),d=a.zIndex,Hr(d)||(f[nr]=parseInt(d)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height","flexBasis","strokeWidth"].forEach(function(t){var e=a[t];Hr(e)||(t=ke[Ne(t)],Qr(f,t,e),(e=f[t])[1]===Pr&&(e[1]=wr))}),(d=a.color)&&(f[ir]="inherit"===d?[[],Cr]:[Gr(d),Fr]),!(d=a.fontSize)&&0!==d||("inherit"===d?f[ar]=[0,Cr]:/%$/.test(d)?(n=Math.max(0,parseFloat(d)),f[ar]=n?[n,Dr]:[16,wr]):f[ar]=[Math.max(0,parseFloat(d))||16,wr]),d=a.fontWeight,Hr(d)||(f[sr]="bold"===d?[700,Pr]:"normal"===d?[400,Pr]:"lighter"===d?[200,Pr]:"inherit"===d?[0,Cr]:[Math.max(0,parseInt(d))||400,Pr]),(d=a.fontStyle)&&(f[hr]="inherit"===d?[0,Cr]:[d,Br]),(d=a.fontFamily)&&(f[or]="inherit"===d?[0,Cr]:[d,Br]),(d=a.textAlign)&&(f[cr]="inherit"===d?[0,Cr]:[d,Br]),d=a.lineHeight,Hr(d)||("inherit"===d?f[lr]=[0,Cr]:"normal"===d?f[lr]=[0,Nr]:/px$/i.test(d)?f[lr]=[parseFloat(d),wr]:(i=Math.max(0,parseFloat(d))||"normal",f[lr]="normal"===i?[null,Nr]:[i,Pr])),d=a.strokeDasharray,Hr(d)||((o=d.toString().match(/[\d.]+/g))?((o=o.map(function(t){return parseFloat(t)})).length%2==1&&o.push(o[o.length-1]),f[yr]=o):f[yr]=[]),void 0!==(d=a.fill)&&(d?Z.gradient.test(d)?f[pr]=bt.parseGradient(d):f[pr]=Gr(d):f[pr]="none"),void 0!==(d=a.stroke)&&(d?Z.gradient.test(d)?f[vr]=bt.parseGradient(d):f[vr]=Gr(d):f[vr]="none"),void 0!==(d=a.filter)&&(s=null,!(h=/\bblur\s*\(\s*([\d.]+)\s*(?:px)?\s*\)/i.exec(d||""))||(l=parseFloat(h[1])||0)&&(s=[["blur",l]]),f[ur]=s),(d=a.visibility)&&(f[_r]="inherit"===d?[0,Cr]:[d,Br]),(d=a.pointerEvents)&&(f[dr]="inherit"===d?[0,Cr]:[d,Br]),void 0!==(d=a.boxShadow)&&(c=null,(u=(d||"").match(/(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?\s*)?(-?[\d.]+(px)?\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&u.forEach(function(t){var e=/(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?\s*)?(-?[\d.]+(?:px)?\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){c=c||[];for(var r=[e[1],e[2],e[3]||0,e[4]||0,e[5]||"#000",e[6]||"outset"],n=0;n<4;n++)Qr(r,n,r[n]),1<n&&r[n][0]<0&&(r[n]=0),r[n][1]===Pr&&(r[n]=r[n][0]);r[4]=Gr(r[4]),c.push(r)}}),f[fr]=c),["position","display","backgroundRepeat","flexDirection","justifyContent","alignItems","alignSelf","overflow","mixBlendMode","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","flexGrow","flexShrink","zIndex"].forEach(function(t){a.hasOwnProperty(t)&&(f[ke[Ne(t)]]=a[t])}),Kr.forEach(function(t){a.hasOwnProperty(t)&&(f[t]=a[t])}),f},computeMeasure:function(t,r){var n=t.currentStyle,i=t.computedStyle,e=t.parent,a=!r&&e.computedStyle;Wr.forEach(function(t){var e=n[t];e[1]===Cr?i[t]=r?Pt.INHERIT[Ie[t]]:a[t]:e[1]===Dr?i[t]=r?Pt.INHERIT[Ie[t]]:a[t]*e[1]*.01:i[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,n=t.computedStyle,i=t.parent,a=!i,o=i&&i.computedStyle;[gr,mr,Er,Tr].forEach(function(t){n[t]=r[t][1]===wr?Math.max(0,r[t][0]):0}),[De,Or,Mr,xr,kr,Sr,Ar,br].forEach(function(t){n[t]=r[t]});var s=r[cr];s[1]===Cr?n[cr]=a?"left":o[cr]:n[cr]=a?"left":s[0];var h=r[lr];h[1]===Cr?n[lr]=a?en(n):o[lr]:h[1]===wr?n[lr]=Math.max(h[0],0)||en(n):h[1]===Pr?n[lr]=Math.max(h[0],0)*n[ar]||en(n):n[lr]=en(n)},setFontStyle:function(t){var e=t[ar];return(t[hr]||"normal")+" "+(t[sr]||"400")+" "+e+"px/"+e+"px "+(t[or]||"arial")},getBaseLine:function(t){var e=t[ar],r=e*S.arial.lhr;return.5*(t[lr]-r)+e*S.arial.blr},calRelative:function(t,e,r,n,i){return r[1]===Nr?r=0:-1<[wr,Pr,Lr,Fr,Br].indexOf(r[1])?r=r[0]:r[1]===Dr&&(r=rn(r[0],n,i?Pe:Ce)),r},calAbsolute:function(t,e,r,n){return r[1]===Nr?r=0:-1<[wr,Pr,Lr,Fr,Br].indexOf(r[1])?r=r[0]:r[1]===Dr&&(r=r[0]*n*.01),r},equalStyle:function(t,e,r,n){if(!e||!r)return e===r;if(t===$e){if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var o=e[i],s=r[i];if(o[0]!==s[0])return!1;if(!Yr(o[1],s[1]))return!1}return!0}if(t===ur){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!Yr(e[h],r[h]))return!1}if(t===qe||t===er||jr.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Qe||t===tr||Vr.hasOwnProperty(t)||qr.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===fr)return Yr(e,r);if(zr.hasOwnProperty(t))return e[1]===r[1]&&Yr(e[0],r[0]);if($r.hasOwnProperty(t)&&e.k===r.k&&Zr.hasOwnProperty(e.k)){var c=e.v,u=r.v;if(e.d!==r.d||c.length!==u.length)return!1;for(var _=0,f=c.length;_<f;_++){var d=c[_],p=u[_];if(d.length!==p.length)return!1;for(var v=0;v<4;v++)if(d[0][v]!==p[0][v])return!1;if(1<d.length&&(d[1][0]!==p[1][0]||d[1][1]!==p[1][1]))return!1}return!0}return Ur(n.tagName,t)&&(n.isMulti||Array.isArray(e)&&Array.isArray(r))?Yr(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[De];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){for(var r={},n=0,i=(e=e||Object.keys(t).map(function(t){return Xr.hasOwnProperty(t)||(t=parseInt(t)),t})).length;n<i;n++){var a,o=e[n],s=t[o];if(o===Ze)s.k?r[o]=Ue.clone(s):(a=r[o]=s.slice(0))[0]=a[0].slice(0);else if(o===pr||o===vr)s.k?r[o]=Ue.clone(s):r[o]=s.slice(0);else if(o===$e){if(s){for(var h=s.slice(0),l=0,c=h.length;l<c;l++)h[l]=h[l].slice(0),h[l][1]=h[l][1].slice(0);r[o]=h}}else if(nn.hasOwnProperty(o))r[o]=s;else if(Xr.hasOwnProperty(o))r[o]=Ue.clone(s);else if(s){var u=r[o]=s.slice(0);if(an.hasOwnProperty(o))u[0]=u[0].slice(0);else if(on.hasOwnProperty(o))u[0]=u[0].slice(0),u[1]=u[1].slice(0);else if(o===$e)for(var _=0,f=u.length;_<f;_++)u[_]=u[_].slice(0)}}return r}},hn=p.STYLE_KEY,ln=hn.COLOR,cn=hn.FONT_WEIGHT,un=hn.FONT_FAMILY,_n=hn.FONT_SIZE,fn=hn.FONT_STYLE,dn=function(){function a(t,e,r,n,i){g(this,a),this.__parent=t,this.__x=e,this.__y=r,this.__width=n,this.__content=i,this.__virtualDom={}}return l(a,[{key:"render",value:function(t,e,r,n,i,a){var o=this.content,s=this.x,h=this.y,l=this.parent,c=l.ox,u=l.oy;h+=sn.getBaseLine(r),s+=c+i,h+=u+a,t===Ye.CANVAS?e.fillText(o,s,h):t===Ye.SVG&&(this.__virtualDom={type:"item",tagName:"text",props:[["x",s],["y",h],["fill",n[ln]],["font-family",r[un]],["font-weight",r[cn]],["font-style",r[fn]],["font-size",r[_n]+"px"]],content:Ue.encodeHtml(o)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return sn.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),a}(),pn=p.STYLE_KEY,vn=pn.DISPLAY,yn=pn.LINE_HEIGHT,gn=pn.FONT_SIZE,mn=pn.FONT_FAMILY,En=pn.FONT_WEIGHT,Tn=pn.COLOR,On=pn.VISIBILITY,Mn=pn.TEXT_ALIGN,An=function(){t(n,b);var r=e(n);function n(t){var e;return g(this,n),(e=r.call(this)).__content=Ue.isNil(t)?"":t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return l(n,[{key:"__computeMeasure",value:function(t,e){var r=this.content,n=this.computedStyle,i=this.charWidthList;i.splice(0),t===Ye.CANVAS&&(e.font=sn.setFontStyle(n));for(var a=this.__key=n[gn]+","+n[mn]+","+n[En],o=Bt.data[a]=Bt.data[a]||{key:a,style:n,hash:{},s:[]},s=Bt.charWidth[a]=Bt.charWidth[a]||{},h=0,l=!1,c=0,u=r.length;c<u;c++){var _=r.charAt(c),f=void 0;s.hasOwnProperty(_)?(f=s[_],i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):t===Ye.CANVAS?(f=s[_]=e.measureText(_).width,i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):(o.hash.hasOwnProperty(_)||(o.s+=_),o.hash[_]=!0,i.push(-1),l=!0)}this.__textWidth=h,l&&Bt.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,n=this.__key,i=Bt.charWidth[n],a=0,o=0,s=r.length;o<s;o++){r[o]<0&&(a+=t=r[o]=i[e.charAt(o)],this.__charWidth=Math.max(this.charWidth,t))}this.__textWidth=a}},{key:"__layout",value:function(t,e){var r=this,n=t.x,i=t.y,a=t.w;this.__x=this.__sx1=n,this.__y=this.__sy1=i;var o=this.isDestroyed,s=this.content,h=this.computedStyle,l=this.lineBoxes,c=this.charWidthList;if(!o&&"none"!==h[vn]){this.__ox=this.__oy=0,l.splice(0);for(var u,_,f,d,p=0,v=0,y=0,g=s.length,m=0;v<g;){(y+=c[v])===a?(u=new dn(this,n,i,y,s.slice(p,v+1)),l.push(u),m=Math.max(m,y),i+=h[yn],v=p=v+1,y=0):a<y?(_=void 0,_=v===p?(v=p+1,y):y-c[v],f=new dn(this,n,i,_,s.slice(p,v)),l.push(f),m=Math.max(m,_),i+=h[yn],p=v,y=0):v++}if(p<g&&p<v){for(y=0,v=p;v<g;v++)y+=c[v];var E=new dn(this,n,i,y,s.slice(p,g));l.push(E),m=Math.max(m,y),i+=h[yn]}this.__width=m,this.__height=i-t.y,e||(d=h[Mn],-1<["center","right"].indexOf(d)&&l.forEach(function(t){var e=r.__width-t.width;0<e&&t.__offsetX("center"===d?.5*e:e)}))}}},{key:"__offsetX",value:function(e,t){rt(et(n.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){rt(et(n.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;e===Ye.SVG&&(this.__virtualDom={type:"text",children:[]});var h,l,c=this.isDestroyed,u=this.computedStyle,_=this.lineBoxes,f=this.cacheStyle;return!c&&"none"!==u[vn]&&"hidden"!==u[On]&&(e===Ye.CANVAS&&(h=sn.setFontStyle(u),r.font!==h&&(r.font=h),l=f[Tn],r.fillStyle!==l&&(r.fillStyle=l)),_.forEach(function(t){t.render(e,r,u,f,o,s)}),e===Ye.SVG&&(this.virtualDom.children=_.map(function(t){return t.virtualDom})),!0)}},{key:"__deepScan",value:function(t){t(this)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes;if(!t.length)return 0;var e=t[t.length-1];return e.y-this.y+e.baseLine}},{key:"currentStyle",get:function(){return this.parent.currentStyle}},{key:"computedStyle",get:function(){return this.parent.computedStyle}},{key:"cacheStyle",get:function(){return this.parent.__cacheStyle}},{key:"bbox",get:function(){if(this.content){var t=this.sx,e=this.sy;return[t,e,t+this.width,e+this.height]}}}]),n}();An.prototype.__renderByMask=An.prototype.render;var bn={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a];if(Array.isArray(s)){i=a;break}}t.moveTo(e[i][0]+r,e[i][1]+n);for(var h=i+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+n):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n,c[4]+r,c[5]+n))}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=0,r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){e=r;break}}for(var a="M"+t[e][0]+","+t[e][1],o=e+1,s=t.length;o<s;o++){var h=t[o];Array.isArray(h)&&(2===h.length?a+="L"+h[0]+","+h[1]:4===h.length?a+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(a+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return a},canvasLine:function(t,e,r,n,i,a,o,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(a[0]+h,a[1]+l,o[0]+h,o[1],n+h,i+l),2):2===s?(t.quadraticCurveTo(o[0]+h,o[1]+l,n+h,i+l),2):1===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,n+h,i+l),2):(t.lineTo(n+h,i+l),1)},svgLine:function(t,e,r,n,i,a,o){return 3===o?"M"+t+","+e+"C"+i[0]+","+i[1]+" "+a[0]+","+a[1]+" "+r+","+n:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+n:1===o?"M"+t+","+e+"Q"+i[0]+","+i[1]+" "+r+","+n:"M"+t+","+e+"L"+r+","+n}};function Rn(t,e,r,n){var i=r-t,a=n-e,o=Math.atan(Math.abs(a)/Math.abs(i));return i<0&&0<=a?Math.PI-o:i<0&&a<0?o-Math.PI:0<=i&&0<=a?o:-o}function xn(t){var e=Math.sin(t),r=Math.cos(t),n=We.identity();return n[0]=n[3]=r,n[1]=e,n[2]=-e,n}function Sn(t,e){var r=Ge(t,6),n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],h=r[5],l=Ge(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=(a-n)*(h-i)-(s-n)*(o-i),v=(_-c)*(l[5]-u)-(d-c)*(f-u);return 0<p&&v<0||p<0&&0<v}var kn={exchangeOrder:function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g=(c=Ge(t,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=[0,1,2],f<u&&f<p?(u=(r=[f,d,u,_])[0],_=r[1],f=r[2],d=r[3],y[0]=1,y[1]=0):p<f&&p<u&&(u=(n=[p,v,u,_])[0],_=n[1],p=n[2],v=n[3],y[0]=2,y[2]=0),u===f?d<_&&(u=(i=[f,d,u,_])[0],_=i[1],f=i[2],d=i[3],a=y[0],y[0]=y[1],y[1]=a):u===p&&v<_&&(u=(o=[p,v,u,_])[0],_=o[1],p=o[2],v=o[3],s=y[0],y[0]=y[2],y[2]=s),(f-u)*(v-_)-(p-u)*(d-_)<0&&(f=(h=[p,v,f,d])[0],d=h[1],p=h[2],v=h[3],l=y[1],y[1]=y[2],y[2]=l),[u,_,f,d,p,v,y]),m=Ge(g,7),E=m[0],T=m[1],O=m[2],M=m[3],A=m[4],b=m[5],R=Ge(function(t,e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,m[6]),6);return[[E,T,O,M,A,b],[R[0],R[1],R[2],R[3],R[4],R[5]]]},isOverflow:Sn,transform:function(t,e){var r,n=Ge(t,6),i=n[0],a=n[1],o=n[2],s=n[3],h=n[4],l=n[5],c=Ge(e,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=Sn(t,e),g=We.identity();g[4]=-i,g[5]=-a;var m=Rn(i,a,o,s);0!==m&&(r=xn(-m),g=We.multiply(r,g));var E=Xe.pointsDistance(i,a,o,s),T=Xe.pointsDistance(u,_,f,d),O=We.identity();O[4]=-u,O[5]=-_;var M=m=Rn(u,_,f,d);0!==m&&(r=xn(-m),O=We.multiply(r,O));var A=Math.abs(We.calPoint([h,l],g)[1]),b=Math.abs(We.calPoint([p,v],O)[1]);E===T&&A===b||(r=We.identity(),E!==T&&(r[0]=T/E),A!==b&&(r[3]=b/A),g=We.multiply(r,g)),O=g;var R=Ge(We.calPoint([i,a],O),2),x=R[0],S=R[1],k=Ge(We.calPoint([o,s],O),2),I=k[0],N=k[1],w=Ge(We.calPoint([h,l],O),2),D=w[0],P=w[1],C=Xe.pointsDistance(x,S,I,N),L=Xe.pointsDistance(x,S,D,P),F=Xe.pointsDistance(D,P,I,N),B=Xe.pointsDistance(u,_,f,d),H=Xe.pointsDistance(u,_,p,v),G=Xe.pointsDistance(p,v,f,d),Y=Xe.angleBySide(F,C,L),W=Xe.angleBySide(G,B,H);return Y!==W&&((r=We.identity())[2]=Math.tan(Y-.5*Math.PI)+Math.tan(.5*Math.PI-W),g=We.multiply(r,g)),y&&(g[1]=-g[1],g[3]=-g[3],g[5]=-g[5]),(r=0!==M?xn(M):We.identity())[4]=u,r[5]=_,g=We.multiply(r,g)}},In={matrix:We,tar:kn,geom:Xe},Nn=p.STYLE_KEY,wn=Nn.TRANSLATE_X,Dn=Nn.TRANSLATE_Y,Pn=Nn.SCALE_X,Cn=Nn.SCALE_Y,Ln=Nn.SKEW_X,Fn=Nn.SKEW_Y,Bn=Nn.ROTATE_Z,Hn=Nn.MATRIX,Gn=R.PX,Yn=R.PERCENT,Wn=In.matrix,Un=In.geom,Xn=Wn.identity,Kn=Wn.calPoint,zn=Wn.multiply,Vn=Wn.isE,jn=Un.d2r,$n=Un.pointInPolygon;function qn(t,e,r){var i,a,o,n=(i=e,a=r,o=[],t.forEach(function(t){var e=Ge(t,2),r=e[0],n=e[1];o.push([r,function(t,e,r,n){if(t===wn){if(e[1]===Yn)return e[0]*r*.01}else if(t===Dn){if(e[1]===Yn)return e[0]*n*.01}else if(t===Hn)return e;return e[0]}(r,n,i,a)])}),o),c=Xn();return n.forEach(function(t){var e,r,n,i,a,o=Ge(t,2),s=o[0],h=o[1],l=Xn();e=l,n=h,(r=s)===wn?e[4]=n:r===Dn?e[5]=n:r===Pn?e[0]=n:r===Cn?e[3]=n:r===Ln?(n=jn(n),e[2]=Math.tan(n)):r===Fn?(n=jn(n),e[1]=Math.tan(n)):r===Bn?(n=jn(n),i=Math.sin(n),a=Math.cos(n),e[0]=e[3]=a,e[1]=i,e[2]=-i):r===Hn&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5]),c=zn(c,l)}),c}function Zn(t,e){var r=Ge(e,2),n=r[0],i=r[1];if(0===n&&0===i)return t;var a=Xn();a[4]=n,a[5]=i;var o=zn(a,t),s=Xn();return s[4]=-n,s[5]=-i,zn(o,s)}var Jn={calMatrix:qn,calOrigin:function(t,r,n){var i=[];return t.forEach(function(t,e){t[1]===Gn?i.push(t[0]):t[1]===Yn&&i.push(t[0]*(e?n:r)*.01)}),i},calMatrixByOrigin:Zn,calMatrixWithOrigin:function(t,e,r,n){return Zn(qn(t,r,n),e)},pointInQuadrilateral:function(t,e,r,n,i,a,o,s,h,l,c){if(!c||Vn(c))return r<=t&&n<=e&&t<=o&&e<=s;var u=Ge(Kn([r,n],c),2);r=u[0],n=u[1];var _=Ge(Kn([i,a],c),2);i=_[0],a=_[1];var f=Ge(Kn([h,l],c),2);h=f[0],l=f[1];var d=Ge(Kn([o,s],c),2);return o=d[0],s=d[1],$n(t,e,[[r,n],[i,a],[o,s],[h,l]])}},Qn=Xe.H;function ti(t,e,r,n,i,a,o,s){var h=1,l=1,c=1;t:for(var u=a;i<=u;u--)for(var _=s;o<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+n)%f)continue}if(1<r)if(u<(e+n)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function ei(t,e,r,n,i,a){var o=i-e,s=n-r,h=r-e,l=i-n;if("dotted"===t)return ti(o,h,l,s,a,a,Math.max(1,.25*a),2*a);var c=ti(o,h,l,s,a,3*a,Math.max(1,.25*a),2*a),u=c.n,_=c.ps,f=c.pd;return 1===u?ti(o,h,l,s,a,a,Math.max(1,.25*a),2*a):{n:u,ps:_,pd:f}}function ri(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Ge(_,2),p=d[0],v=d[1],y=Ge(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,b,R,x,S,k,I,N,w,D,P,C=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[1][0]<C?F.push(z):z[0][0]>L?H.push(z):z[1][0]>L&&z[0][0]<C?(W=C<i?s+Math.tan(e)*(C-n):h,U=a<L?s+Math.tan(r)*(o-L):h,F.push([z[0],[C,s],[C,W],z[3]]),C<L&&(i<C&&L<a?B.push([[C,s],[L,s],[L,h],[C,h]]):i<C?(B.push([[C,s],[a,s],[a,h],[C,h]]),B.push([[a,s],[L,s],[L,U],[a,h]])):L<a?(B.push([[C,s],[i,s],[i,h],[C,W]]),B.push([[i,s],[L,s],[L,h],[i,h]])):(B.push([[C,s],[i,s],[i,h],[C,W]]),B.push([[i,s],[a,s],[a,h],[i,h]]),B.push([[a,s],[L,s],[L,U],[a,h]]))),H.push([[L,s],z[1],z[2],[L,U]])):z[1][0]>L?(X=a<L?s+Math.tan(r)*(o-L):h,B.push([z[0],[L,s],[L,X],z[3]]),H.push([[L,s],z[1],z[2],[L,X]])):z[0][0]<C?(K=C<i?s+Math.tan(e)*(C-n):h,F.push([z[0],[C,s],[C,K],z[3]]),B.push([[C,s],z[1],z[2],[C,K]])):B.push(z)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=s+v,R=(b=v-(h-s))/(p-(i-n)),S=Ge((x=ni(F[0][0],F[0][1],C,A,M,O,!0,Math.tan(T)*O))[0],2),D=S[0],P=S[1],E&&(I=Ge((k=ni(F[0][3],F[0][2],C,A,R,b,!0,Math.tan(T)*b))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=x,E&&(n=k)):(r=ni(t[0],t[1],C,A,M,O),E&&(n=ni(t[3],t[2],C,A,R,b)));for(var i=0,a=r.length;i<a;i++)di(r[i],D,P,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),E){for(var o=0,s=n.length;o<s;o++)di(n[o],N,w,0);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=o-a<g&&t<m,j=Math.atan((o-a)/(h-s)),q=($=m)/g,Z=s+m,Q=(J=m-(h-s))/(g-(o-a)),et=Ge((tt=ii(H[ht-1][0],H[ht-1][1],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],V&&(nt=Ge((rt=ii(H[ht-1][3],H[ht-1][2],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=ii(t[0],t[1],L,Z,q,$),V&&(n=ii(t[3],t[2],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)di(r[i],ot,st,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),V){for(var o=0,s=n.length;o<s;o++)di(n[o],it,at,1);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}})),F.concat(B).concat(H)}function ni(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(n-T)),b=r-Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var x=Xe.h(Math.abs(f-A))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*S/i,n-Math.cos(I)*S],[r-Math.sin(N)*S/i,n-Math.cos(N)*S],[b,R]]}function ii(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(n-g)),b=r+Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(M/(n-T)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),A===f)return[[b,R]];var x=Xe.h(Math.abs(A-f))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=A+k,N=f-k;return[[b,R],[r+Math.sin(I)*S/i,n-Math.cos(I)*S],[r+Math.sin(N)*S/i,n-Math.cos(N)*S],[d,p]]}function ai(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Ge(_,2),p=d[0],v=d[1],y=Ge(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,b,R,x,S,k,I,N,w,D,P,C=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[2][1]<C?F.push(z):z[1][1]>L?H.push(z):z[2][1]>L&&z[1][1]<C?(W=C<h?a+Math.tan(r)*(h-C):a,U=l<L?a+Math.tan(e)*(L-l):a,F.push([z[0],z[1],[o,C],[W,C]]),C<L&&(L<l&&h<C?B.push([[a,C],[o,C],[o,L],[a,L]]):h<C?(B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]])):L<l?(B.push([[W,C],[o,C],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,L],[a,L]])):(B.push([[W,C],[o,C],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]]))),H.push([[U,L],[o,L],z[2],z[3]])):z[2][1]>L?(X=l<L?a+Math.tan(e)*(L-l):a,B.push([z[0],z[1],[o,L],[X,L]]),H.push([[X,L],[o,L],z[2],z[3]])):z[1][1]<C?(K=C<h?a+Math.tan(r)*(h-C):a,F.push([z[0],z[1],[o,C],[K,C]]),B.push([[K,C],[o,C],z[2],z[3]])):B.push(z)}F.length&&(E=h-s<v&&t<p,T=Math.atan((o-a)/(h-s)),M=(O=v)/p,A=o-p,R=(b=v-(h-s))/(p-(o-a)),S=Ge((x=oi(F[0][1],F[0][2],A,C,M,O,!0,Math.tan(T)*O))[x.length-1],2),D=S[0],P=S[1],E&&(I=Ge((k=oi(F[0][0],F[0][3],A,C,R,b,!0,Math.tan(T)*b))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=x,E&&(n=k)):(r=oi(t[1],t[2],A,C,M,O),E&&(n=oi(t[0],t[3],A,C,R,b)));for(var i=0,a=r.length;i<a;i++)di(r[i],D,P,2);if(E){for(var o=0,s=n.length;o<s;o++)di(n[o],N,w,2);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=c-l<m&&t<g,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=o-g,Q=(J=m-(c-l))/(g-(o-a)),et=Ge((tt=si(H[ht-1][1],H[ht-1][2],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],V&&(nt=Ge((rt=si(H[ht-1][0],H[ht-1][3],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=si(t[1],t[2],Z,L,q,$),V&&(n=si(t[0],t[3],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)di(r[i],ot,st,3);if(V){for(var o=0,s=n.length;o<s;o++)di(n[o],it,at,3);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function oi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(M/(n-T)),b=r+Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var x=Xe.h(Math.abs(f-A))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=f+k,N=r+Math.sin(I)*S/i,w=n-Math.cos(I)*S,D=A-k;return[[b,R],[r+Math.sin(D)*S/i,n-Math.cos(D)*S],[N,w],[d,p]]}function si(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),b=r+Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[b,R]];var x=Xe.h(Math.abs(A-f))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=A-k,N=r+Math.sin(I)*S/i,w=n+Math.cos(I)*S,D=f+k;return[[d,p],[r+Math.sin(D)*S/i,n+Math.cos(D)*S],[N,w],[b,R]]}function hi(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Ge(_,2),p=d[0],v=d[1],y=Ge(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,b,R,x,S,k,I,N,w,D,P,C=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[2][0]<C?F.push(z):z[3][0]>L?H.push(z):z[2][0]>L&&z[3][0]<C?(W=C<i?c-Math.tan(e)*(C-n):h,U=a<L?c-Math.tan(r)*(o-L):l,F.push([z[0],[C,W],[C,c],z[3]]),C<L&&(i<C&&L<a?B.push([[C,l],[L,l],[L,c],[C,c]]):i<C?(B.push([[C,l],[a,l],[a,c],[C,c]]),B.push([[a,l],[L,U],[L,c],[a,c]])):L<a?(B.push([[C,W],[i,l],[i,c],[C,c]]),B.push([[i,l],[L,l],[L,c],[i,c]])):(B.push([[C,W],[i,l],[i,c],[C,c]]),B.push([[i,l],[a,l],[a,c],[i,c]]),B.push([[a,l],[L,U],[L,c],[a,c]]))),H.push([[L,U],z[1],z[2],[L,c]])):z[2][0]>L?(X=a<L?c-Math.tan(r)*(o-L):l,B.push([z[0],[L,X],[L,c],z[3]]),H.push([[L,X],z[1],z[2],[L,c]])):z[3][0]<C?(K=C<i?c-Math.tan(e)*(C-n):l,F.push([z[0],[C,K],[C,c],z[3]]),B.push([[C,K],z[1],z[2],[C,c]])):B.push(z)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(c-l)),M=(O=v)/p,A=c-v,R=(b=v-(c-l))/(p-(i-n)),S=Ge((x=li(F[0][3],F[0][2],C,A,M,O,!0,Math.tan(T)*O))[0],2),D=S[0],P=S[1],E&&(I=Ge((k=li(F[0][0],F[0][1],C,A,R,b,!0,Math.tan(T)*b))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=x,E&&(n=k)):(r=li(t[3],t[2],C,A,M,O),E&&(n=li(t[0],t[1],C,A,R,b)));for(var i=0,a=r.length;i<a;i++)di(r[i],D,P,4);if(E){for(var o=0,s=n.length;o<s;o++)di(n[o],N,w,4);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=o-a<g&&t<m,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=c-m,Q=(J=m-(c-l))/(g-(o-a)),et=Ge((tt=ci(H[ht-1][3],H[ht-1][2],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],V&&(nt=Ge((rt=ci(H[ht-1][0],H[ht-1][1],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=ci(t[3],t[2],L,Z,q,$),V&&(n=ci(t[0],t[1],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)di(r[i],ot,st,5);if(V){for(var o=0,s=n.length;o<s;o++)di(n[o],it,at,5);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),F.concat(B).concat(H)}function li(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(T-n)),b=r-Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(O/(g-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),f===A)return[[d,p]];var x=Xe.h(Math.abs(f-A))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*S/i,n+Math.cos(I)*S],[r-Math.sin(N)*S/i,n+Math.cos(N)*S],[b,R]]}function ci(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),b=r+Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[b,R]];var x=Xe.h(Math.abs(A-f))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=A+k,N=f-k;return[[b,R],[r+Math.sin(I)*S/i,n+Math.cos(I)*S],[r+Math.sin(N)*S/i,n+Math.cos(N)*S],[d,p]]}function ui(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Ge(_,2),p=d[0],v=d[1],y=Ge(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,b,R,x,S,k,I,N,w,D,P,C=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[3][1]<C?F.push(z):z[0][1]>L?H.push(z):z[3][1]>L&&z[0][1]<C?(W=C<h?i-Math.tan(r)*(h-C):i,U=l<L?i-Math.tan(e)*(L-l):i,F.push([z[0],z[1],[W,C],[n,C]]),C<L&&(L<l&&h<C?B.push([[n,C],[i,C],[i,L],[n,L]]):h<C?(B.push([[n,C],[i,C],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]])):L<l?(B.push([[n,C],[W,C],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,L],[n,L]])):(B.push([[n,C],[W,C],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]]))),H.push([[n,L],[U,L],z[2],z[3]])):z[3][1]>L?(X=l<L?i-Math.tan(e)*(L-l):i,B.push([z[0],z[1],[X,L],[n,L]]),H.push([[n,L],[X,L],z[2],z[3]])):z[1][1]<C?(K=C<h?i-Math.tan(r)*(h-C):i,F.push([z[0],z[1],[K,C],[n,C]]),B.push([[n,C],[K,C],z[2],z[3]])):B.push(z)}F.length&&(E=h-s<v&&t<p,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=n+p,R=(b=v-(h-s))/(p-(i-n)),S=Ge((x=_i(F[0][0],F[0][3],A,C,M,O,!0,Math.tan(T)*O))[x.length-1],2),D=S[0],P=S[1],E&&(I=Ge((k=_i(F[0][1],F[0][2],A,C,R,b,!0,Math.tan(T)*b))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=x,E&&(n=k)):(r=_i(t[0],t[3],A,C,M,O),E&&(n=_i(t[1],t[2],A,C,R,b)));for(var i=0,a=r.length;i<a;i++)di(r[i],D,P,6);if(E){for(var o=0,s=n.length;o<s;o++)di(n[o],N,w,6);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=c-l<m&&t<g,j=Math.atan((i-n)/(c-l)),q=($=m)/g,Z=n+g,Q=(J=m-(c-l))/(g-(i-n)),et=Ge((tt=fi(H[ht-1][0],H[ht-1][3],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],V&&(nt=Ge((rt=fi(H[ht-1][1],H[ht-1][2],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=fi(t[0],t[3],Z,L,q,$),V&&(n=fi(t[1],t[2],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)di(r[i],ot,st,7);if(V){for(var o=0,s=n.length;o<s;o++)di(n[o],it,at,7);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function _i(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(M/(n-T)),b=r-Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var x=Xe.h(Math.abs(f-A))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=f+k,N=r-Math.sin(I)*S/i,w=n-Math.cos(I)*S,D=A-k;return[[b,R],[r-Math.sin(D)*S/i,n-Math.cos(D)*S],[N,w],[d,p]]}function fi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Ge(t,2),y=v[0],g=v[1],m=Ge(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(O/(g-n)),b=r-Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[b,R]];var x=Xe.h(Math.abs(A-f))*a,S=Math.sqrt(Math.pow(a,2)+Math.pow(x,2)),k=Math.atan(x/a),I=A-k,N=r-Math.sin(I)*S/i,w=n+Math.cos(I)*S,D=f+k;return[[d,p],[r-Math.sin(D)*S/i,n+Math.cos(D)*S],[N,w],[b,R]]}function di(t,e,r,n){0===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===n?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===n||6===n?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===n&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var pi={calPoints:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var v=0===_||2===_?ei(e,i,a,o,s,t):ei(e,h,l,c,u,t),y=v.n,g=v.ps,m=v.pd;if(1<y){for(var E=0;E<y;E++){var T=E===y-1,O=void 0,M=void 0,A=void 0,b=(O=0===_||2===_?E?i+g*E+m*E:i:E?h+g*E+m*E:h)+g;0===_?b<=a?T?p.push([[i,h],[s,h],[o,l],[a,l]]):(M=h+(O-i)*Math.tan(r),A=h+(b-i)*Math.tan(r),p.push([[O,h],[b,h],[b,A],[O,M]])):o<=O?(M=h+(s-O)*Math.tan(n),A=h+(s-b)*Math.tan(n),T?p.push([[O,h],[s,h],[s,h],[O,M]]):p.push([[O,h],[b,h],[b,A],[O,M]])):O<a?(M=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,M]]),T?(p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[s,h],[s,h],[a,l]])):o<b?(A=h+(s-b)*Math.tan(n),p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[b,h],[b,A],[o,l]])):p.push([[a,h],[b,h],[b,l],[a,l]])):o<b?(M=h+(s-b)*Math.tan(n),O<a?(A=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,A]]),p.push([[a,h],[o,h],[o,l],[a,l]])):p.push([[O,h],[o,h],[o,l],[O,l]]),T?p.push([[o,h],[s,h],[s,h],[o,l]]):p.push([[o,h],[b,h],[b,M],[o,l]])):T?p.push([[O,h],[s,h],[o,l],[O,l]]):p.push([[O,h],[b,h],[b,l],[O,l]]):1===_?b<=l?T?p.push([[o,l],[s,h],[s,u],[o,c]]):(M=s-(O-h)*Math.tan(r),A=s-(b-h)*Math.tan(r),p.push([[M,O],[s,O],[s,b],[A,b]])):c<=O?(M=o+(O-c)*Math.tan(n),A=o+(b-c)*Math.tan(n),T?p.push([[M,O],[s,O],[s,u],[s,u]]):p.push([[M,O],[s,O],[s,b],[A,b]])):O<l?(M=o+(l-O)*Math.tan(r),p.push([[M,O],[s,O],[s,l],[o,l]]),T?(p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,u],[s,u]])):c<b?(A=o+(b-c)*Math.tan(n),p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,b],[A,b]])):p.push([[o,l],[s,l],[s,b],[o,b]])):c<b?(M=o+(b-c)*Math.tan(n),O<l?(A=o+(l-O)*Math.tan(r),p.push([[A,O],[s,O],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,s],[s,s]]):p.push([[o,c],[s,c],[s,b],[M,b]])):(p.push([[o,O],[s,O],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,u],[s,u]]):p.push([[o,c],[s,c],[s,b],[M,b]]))):T?p.push([[o,O],[s,O],[s,u],[o,c]]):p.push([[o,O],[s,O],[s,b],[o,b]]):2===_?b<=a?T?p.push([[i,u],[a,c],[o,c],[s,u]]):(M=u-(O-i)*Math.tan(r),A=u-(b-i)*Math.tan(r),p.push([[O,M],[b,A],[b,u],[O,u]])):o<=O?(M=u-(s-O)*Math.tan(n),A=u-(s-b)*Math.tan(n),T?p.push([[O,M],[s,u],[s,u],[O,u]]):p.push([[O,M],[b,A],[b,u],[O,u]])):O<a?(M=u-(O-i)*Math.tan(r),p.push([[O,M],[a,c],[a,u],[O,u]]),T?(p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[s,u],[s,u],[o,u]])):o<b?(A=u-(b-o)*Math.tan(n),p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[b,A],[b,u],[o,u]])):p.push([[a,c],[b,c],[b,u],[a,u]])):o<b?(M=u-(s-b)*Math.tan(n),O<a?(A=u-(O-o)*Math.tan(r),p.push([[O,A],[a,c],[a,u],[O,u]]),p.push([[a,c],[o,c],[o,u],[a,u]])):p.push([[O,c],[o,c],[o,u],[O,u]]),T?p.push([[o,c],[s,u],[s,u],[o,u]]):p.push([[o,c],[b,M],[b,u],[o,u]])):T?p.push([[O,c],[o,c],[s,u],[O,u]]):p.push([[O,c],[b,c],[b,u],[O,u]]):3===_&&(b<=l?T?p.push([[i,h],[a,l],[a,c],[i,u]]):(M=i+(O-h)*Math.tan(r),A=i+(b-h)*Math.tan(r),p.push([[i,O],[M,O],[A,b],[i,b]])):c<=O?(M=i+(u-O)*Math.tan(n),A=i+(u-b)*Math.tan(n),T?p.push([[i,O],[M,O],[i,u],[i,u]]):p.push([[i,O],[M,O],[A,b],[i,b]])):O<l?(M=i+(O-h)*Math.tan(r),p.push([[i,O],[M,O],[a,l],[i,l]]),T?(p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[i,u],[i,u]])):c<b?(A=i+(u-b)*Math.tan(n),p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[A,b],[i,b]])):p.push([[i,l],[a,l],[a,b],[i,b]])):c<b?(M=i+(u-b)*Math.tan(n),O<l?(A=i+(O-h)*Math.tan(r),p.push([[i,O],[A,O],[a,l],[i,h]]),p.push([[i,l],[a,l],[a,c],[i,c]])):p.push([[i,O],[a,O],[a,c],[i,c]]),T?p.push([[i,c],[a,c],[i,u],[i,u]]):p.push([[i,c],[a,c],[M,b],[i,b]])):T?p.push([[i,O],[a,O],[a,c],[i,u]]):p.push([[i,O],[a,O],[a,b],[i,b]]))}if(0===_)return ri(t,r,n,i,a,o,s,h,l,0,0,p,f,d);if(1===_)return ai(t,r,n,0,0,o,s,h,l,c,u,p,f,d);if(2===_)return hi(t,r,n,i,a,o,s,0,l,c,u,p,f,d);if(3===_)return ui(t,r,n,i,a,0,0,h,l,c,u,p,f,d)}}return 0===_?(i<a&&p.push([[i,h],[a,h],[a,l],[i,h]]),p.push([[a,h],[o,h],[o,l],[a,l]]),o<s&&p.push([[o,h],[s,h],[s,h],[o,l]]),ri(t,r,n,i,a,o,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),c<u&&p.push([[o,c],[s,c],[s,u],[s,u]]),ai(t,r,n,0,0,o,s,h,l,c,u,p,f,d)):2===_?(i<a&&p.push([[i,u],[a,c],[a,u],[i,u]]),p.push([[a,c],[o,c],[o,u],[a,u]]),o<s&&p.push([[o,c],[s,u],[s,u],[o,u]]),hi(t,r,n,i,a,o,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[i,h],[i,h],[a,l],[i,l]]),p.push([[i,l],[a,l],[a,c],[i,c]]),c<u&&p.push([[i,c],[a,c],[i,u],[i,u]]),ui(t,r,n,i,a,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,n,i,a,o,s,h,l,c,u){var _,f=Ge(h,2),d=f[0],p=f[1],v=Ge(l,2),y=v[0],g=v[1],m=Ge(c,2),E=m[0],T=m[1],O=Ge(u,2),M=O[0],A=O[1];if(p-=i,y-=a,g-=i,E-=a,T-=o,M-=s,A-=o,(0<(d-=s)&&0<p||0<y&&0<g||0<E&&0<T||0<M&&0<A)&&(_=!0),_){var b=[];return 0<d&&0<p?(b.push([t,e+p]),b.push([t,e+p*(1-Qn),t+d*(1-Qn),e,t+d,e])):b.push([t,e]),0<y&&0<g?(b.push([t+r-y,e]),b.push([t+r-y*(1-Qn),e,t+r,e+g*(1-Qn),t+r,e+g])):b.push([t+r,e]),0<E&&0<T?(b.push([t+r,e+n-T]),b.push([t+r,e+n-T*(1-Qn),t+r-E*(1-Qn),e+n,t+r-E,e+n])):b.push([t+r,e+n]),0<M&&0<A?(b.push([t+M,e+n]),b.push([t+M*(1-Qn),e+n,t,e+n-A*(1-Qn),t,e+n-A])):b.push([t,e+n]),b}}},vi=p.STYLE_KEY,yi=vi.SCALE_X,gi=vi.SCALE_Y,mi=R.PERCENT,Ei=R.NUMBER;var Ti={matrixResize:function(t,e,r,n,i,a,o,s){if(t!==r||e!==n){var h=[[yi,[r/t,Ei]],[gi,[n/e,Ei]]],l=Jn.calOrigin([[0,mi],[0,mi]],o,s);return l[0]+=i,l[1]+=a,Jn.calMatrixWithOrigin(h,l,o,s)}}},Oi="\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nvarying vec2 vTextureCoord;\nuniform mat3 projectionMatrix;\n\nvoid main(void)\n{\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}",Mi="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 color = vec4(0.0);\n\n  // Sample top left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample top right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Average\n  color *= 0.25;\n\n  gl_FragColor = color;\n}";function Ai(t,e,r){var n=function(t,e,r){var n=bi(t,t.VERTEX_SHADER,e),i=bi(t,t.FRAGMENT_SHADER,r);if(!n||!i)return null;var a=t.createProgram();if(!a)return null;if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;var o=t.getProgramInfoLog(a);return Ke.error("Failed to link program: "+o),t.deleteProgram(a),t.deleteShader(i),t.deleteShader(n),null}(t,e,r);if(n)return t.useProgram(n),t.program=n,1;Ke.error("Failed to create program")}function bi(t,e,r){var n=t.createShader(e);if(null==n)return Ke.error("unable to create shader"),null;if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;var i=t.getShaderInfoLog(n);return Ke.error("Failed to compile shader: "+i),t.deleteShader(n),null}function Ri(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),e}var xi=function(){function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4;g(this,a),this.webgl=t;var n,i=this.gl=t.ctx;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,-1),Ai(i,Oi,Mi),this.vertexLocations=function(t){var e=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);var n=Float32Array.BYTES_PER_ELEMENT,i=t.getAttribLocation(t.program,"aVertexPosition");t.vertexAttribPointer(i,2,t.FLOAT,!1,4*n,0),t.enableVertexAttribArray(i);var a=t.getAttribLocation(t.program,"aTextureCoord");t.vertexAttribPointer(a,2,t.FLOAT,!1,4*n,2*n);var o=t.getUniformLocation(t.program,"projectionMatrix");return t.uniformMatrix3fv(o,!1,new Float32Array([1,0,0,0,1,0,0,0,1])),t.enableVertexAttribArray(a),{aPosition:i,aTexCoord:a}}(i),this.textureLocations={uSampler:(n=i).getUniformLocation(n.program,"uSampler"),uOffset:n.getUniformLocation(n.program,"uOffset"),uClamp:n.getUniformLocation(n.program,"filterClamp")},this._pixelSize={x:0,y:0},this.pixelSize=1,this._kernels=null,this._blur=e,this.quality=r,this.textures=[],this.framebuffers=[]}return l(a,[{key:"initBuffers",value:function(t,e,r){for(var n=0;n<2;n++){var i=Ri(t);this.textures.push(i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null);var a=t.createFramebuffer();this.framebuffers.push(a),t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}}},{key:"draw",value:function(t,e,r){var n=this.textureLocations,i=n.uOffset,a=n.uClamp,o=this.gl;o.uniform2f(i,e[0],e[1]),o.viewport(0,0,t.width,t.height),o.uniform4f(a,0,0,t.width,t.height),r&&o.bindFramebuffer(o.FRAMEBUFFER,null),o.drawArrays(o.TRIANGLE_STRIP,0,4)}},{key:"apply",value:function(t,e,r){var n=this.gl;this.initBuffers(n,e,r);var i=this.textureLocations.uSampler;n.uniform1i(i,0);var a=Ri(n);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.canvas);var o,s=this._pixelSize.x/e,h=this._pixelSize.y/r,l=this._quality-1;n.bindTexture(n.TEXTURE_2D,a);for(var c=0;c<l;c++){o=this._kernels[c]+.5,n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffers[c%2]);var u=new Float32Array([o*s,o*h]);this.draw(t.canvas,u,!1),n.bindTexture(n.TEXTURE_2D,this.textures[c%2])}o=this._kernels[l]+.5;var _=new Float32Array([o*s,o*h]);return this.draw(t.canvas,_,!0),this.webgl.draw(),t.ctx.clearRect(0,0,e,r),t.ctx.drawImage(n.canvas,0,0),t.draw(),this}},{key:"_generateKernels",value:function(){var t=this._blur,e=this._quality,r=[t];if(0<t)for(var n=t,i=t/e,a=1;a<e;a++)n-=i,r.push(n);this._kernels=r}},{key:"clear",value:function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}},{key:"kernels",get:function(){return this._kernels},set:function(t){Array.isArray(t)&&0<t.length?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)}},{key:"pixelSize",set:function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):(this._pixelSize.x=1,this._pixelSize.y=1)},get:function(){return this._pixelSize}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}},{key:"blur",get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()}}]),a}();var Si={gaussBlur:function(t,e,r,n,i){return new xi(e,r).apply(t,n,i)}},ki=Ue.isFunction,Ii=function(){function o(){g(this,o),this.__eHash={}}return l(o,[{key:"on",value:function(t,e){if(e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.on(t[r],e);else if(e){this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(n,i){if(ki(i)){var a=this;if(o.__karasEventCb=i,Array.isArray(n))for(var t=0,e=n.length;t<e;t++)a.once(n[t],i);else i&&a.on(n,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.apply(a,e),a.off(n,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e||a[i].__karasEventCb===e){a.splice(i,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)this.emit(t[i],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var l=o[s];ki(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o;e.__eHash={};for(var n=["on","once","off","emit"],i=n.length-1;0<=i;i--){var a=n[i];e[a]=r[a]}}}}]),o}();c(Ii,"REFRESH","refresh"),c(Ii,"PAUSE","pause"),c(Ii,"PLAY","play"),c(Ii,"FRAME","frame"),c(Ii,"FINISH","finish"),c(Ii,"CANCEL","cancel"),c(Ii,"BEGIN","begin"),c(Ii,"END","end");var Ni,wi=Ue.isFunction;function Di(t,e,r,n){if(n)for(var i=0;i<e;i++){var a=t[i];a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s.__before&&s.__before(r)}}var Pi=new(function(){function t(){g(this,t),this.__hookTask=[],this.__task=[],this.__now=null}return l(t,[{key:"__init",value:function(){var l=this,c=l.task;Ke.cancelAnimationFrame(l.id);var u=l.__now=Ke.now();!function h(){Ke.cancelAnimationFrame(l.id),l.id=Ke.requestAnimationFrame(function(){if(!Ni&&c.length){var t=l.__now=Ke.now(),e=t-u,e=Math.max(e,0);u=t;var r=c.slice(0),n=r.length;Di(r,n,e);for(var i=l.__hookTask.splice(0),a=0,o=i.length;a<o;a++){var s=i[a];s&&s()}Di(r,n,e,!0),c.length&&h()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),wi(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,n=e.length;r<n;r++){var i=e[r];if(i===t||i.__karasFramecb===t){e.splice(r,1);break}}e.length||(Ke.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,n=this;e&&((r=wi(e)?{__after:function(t){e(t),n.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),n.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"pause",value:function(){Ni=!0}},{key:"resume",value:function(){Ni&&(this.__init(),Ni=!1)}},{key:"task",get:function(){return this.__task}}]),t}()),Ci=4,Li=1e-7,Fi=10,Bi="function"==typeof Float32Array;function Hi(t,e){return 1-3*e+3*t}function Gi(t,e){return 3*e-6*t}function Yi(t,e,r){return((Hi(e,r)*t+Gi(e,r))*t+3*e)*t}function Wi(t,e,r){return 3*Hi(e,r)*t*t+2*Gi(e,r)*t+3*e}function Ui(t){return t}function Xi(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===r)return Ui;for(var s=new(Bi?Float32Array:Array)(11),t=0;t<11;++t)s[t]=Yi(.1*t,a,o);function n(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var n=e+.1*((t-s[--r])/(s[r+1]-s[r])),i=Wi(n,a,o);return.001<=i?function(t,e,r,n){for(var i=0;i<Ci;++i){var a=Wi(e,r,n);if(0===a)return e;e-=(Yi(e,r,n)-t)/a}return e}(t,n,a,o):0===i?n:function(t,e,r,n,i){for(var a,o,s=0;0<(a=Yi(o=e+(r-e)/2,n,i)-t)?r=o:e=o,Math.abs(a)>Li&&++s<Fi;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:Yi(n(t),e,r)}}var Ki,zi={linear:Xi(1,1,0,0),easeIn:Xi(.42,0,1,1),easeOut:Xi(0,0,.58,1),ease:Xi(.25,.1,.25,1),easeInOut:Xi(.42,0,.58,1),cubicBezier:Xi};zi["ease-in"]=zi.easeIn,zi["ease-out"]=zi.easeOut,zi["ease-in-out"]=zi.easeInOut;var Vi=p.STYLE_KEY,ji=Vi.FILTER,$i=Vi.TRANSFORM_ORIGIN,qi=Vi.BACKGROUND_POSITION_X,Zi=Vi.BACKGROUND_POSITION_Y,Ji=Vi.BOX_SHADOW,Qi=Vi.TRANSLATE_X,ta=Vi.BACKGROUND_SIZE,ea=Vi.FONTSIZE,ra=Vi.FLEX_BASIS,na=Vi.FLEX_DIRECTION,ia=Vi.WIDTH,aa=Vi.HEIGHT,oa=Vi.MARGIN_RIGHT,sa=Vi.MARGIN_TOP,ha=Vi.MARGIN_LEFT,la=Vi.MARGIN_BOTTOM,ca=Vi.PADDING_LEFT,ua=Vi.PADDING_BOTTOM,_a=Vi.PADDING_RIGHT,fa=Vi.PADDING_TOP,da=Vi.TOP,pa=Vi.RIGHT,va=Vi.BOTTOM,ya=Vi.LEFT,ga=Vi.LINE_HEIGHT,ma=Vi.OPACITY,Ea=Vi.Z_INDEX,Ta=Vi.TRANSFORM,Oa=Vi.COLOR,Ma=Vi.FONT_WEIGHT,Aa=Vi.FONT_STYLE,ba=Vi.FONT_FAMILY,Ra=Vi.TEXT_ALIGN,xa=Vi.MATRIX,Sa=p.UPDATE_KEY,ka=Sa.UPDATE_NODE,Ia=Sa.UPDATE_STYLE,Na=Sa.UPDATE_KEYS,wa=Sa.UPDATE_CONFIG,Da=p.KEY_FRAME_KEY,Pa=Da.FRAME_STYLE,Ca=Da.FRAME_TIME,La=Da.FRAME_EASING,Fa=Da.FRAME_TRANSITION,Ba=R.AUTO,Ha=R.PX,Ga=R.PERCENT,Ya=R.INHERIT,Wa=R.RGBA,Ua=R.STRING,Xa=R.NUMBER,Ka=Ue.isNil,za=Ue.isFunction,Va=Ue.isNumber,ja=Ue.isObject,$a=Ue.clone,qa=Ue.equalArr,Za=zi.linear,Ja=sn.cloneStyle,Qa=Oe.isGeom,to=Oe.GEOM,eo=_e.COLOR_HASH,ro=_e.LENGTH_HASH,no=_e.RADIUS_HASH,io=_e.GRADIENT_HASH,ao=_e.EXPAND_HASH,oo=_e.GRADIENT_TYPE,so=(c(Ki={},qi,!0),c(Ki,Zi,!0),Ki);function ho(t,e,r,n,i){var a={};a[ka]=i,a[Ia]=t,a[Na]=e,a[wa]=r[43],n.__addUpdate(i,r[43],n,r[44],a),r[16]=t,r[0]=!0,n.__frameHook()}function lo(r,n,t,i,a){return t.forEach(function(t){var e=function(t,e,r,n,i){var a=[r],o=t[r],s=e[r];if(r===Ta){if(!o&&!s)return;var h=o?o[0][1]:[1,0,0,1,0,0],l=s?s[0][1]:[1,0,0,1,0,0];if(qa(h,l))return;return a[1]=[l[0]-h[0],l[1]-h[1],l[2]-h[2],l[3]-h[3],l[4]-h[4],l[5]-h[5]],a}if(r===ji)o&&o.length?s&&s.length?a[1]=s[0][1]-o[0][1]:a[1]=-o[0][1]:a[1]=s[0][1];else if(r===$i){a[1]=[];for(var c=0;c<2;c++){var u,_,f=o[c],d=s[c];f[1]===d[1]?a[1].push(d[0]-f[0]):f[1]===Ha&&d[1]===Ga?(u=.01*d[0]*n[c?"outerHeight":"outerWidth"],a[1].push(u-f[0])):f[1]===Ga&&d[1]===Ha&&(_=100*d[0]/n[c?"outerHeight":"outerWidth"],a[1].push(_-f[0]))}if(qa(a[1],[0,0]))return}else if(r===qi||r===Zi){if(o[1]===s[1]&&-1<[Ha,Ga].indexOf(o[1])){var p=s[0]-o[0];if(0==p)return;a[1]=p}else if(o[1]===Ha&&s[1]===Ga){var v=.01*s[0]*n[r===qi?"clientWidth":"clientHeight"];if(0==(v-=o[0]))return;a[1]=v}else if(o[1]===Ga&&s[1]===Ha){var y=100*s[0]/n[r===qi?"clientWidth":"clientHeight"];if(0==(y-=o[0]))return;a[1]=y}}else if(r===Ji){a[1]=[];for(var g=0,m=Math.min(o.length,s.length);g<m;g++){for(var E=o[g],T=s[g],O=[],M=0;M<4;M++)O.push(T[M]-E[M]);for(var A=[],b=0;b<4;b++)A.push(T[4][b]-E[4][b]);O.push(A),a[1].push(O)}}else if(ao.hasOwnProperty(r)){if(o[1]===s[1]){var R=s[0]-o[0];if(0==R)return;a[1]=R}else if(o[1]===Ha&&s[1]===Ga){var x=.01*s[0]*n[r===Qi?"outerWidth":"outerHeight"];if(0==(x-=o[0]))return;a[1]=x}else if(o[1]===Ga&&s[1]===Ha){var S=100*s[0]/n[r===Qi?"outerWidth":"outerHeight"];if(0==(S-=o[0]))return;a[1]=S}}else if(r===ta){a[1]=[];for(var k=0;k<2;k++){var I=o[k],N=s[k];if(I[1]===N[1]&&-1<[Ha,Ga].indexOf(I[1]))a[1].push(N[0]-I[0]);else if(I[1]===Ha&&N[1]===Ga){var w=.01*N[0]*n[k?"clientWidth":"clientHeight"];a[1].push(w-I[0])}else{if(I[1]!==Ga||N[1]!==Ha)return;var D=100*N[0]/n[k?"clientWidth":"clientHeight"];a[1].push(D-I[0])}}if(qa(a[1],[0,0]))return}else if(io.hasOwnProperty(r)){if(o.k!==s.k)return;if("linear"===o.k||"radial"===o.k||"conic"===o.k){var P=o.v,C=s.v;a[1]=[];for(var L=n.clientWidth,F=qa(P,C),B=0,H=Math.min(P.length,C.length);B<H;B++){var G=P[B],Y=C[B],W=[];W.push([Y[0][0]-G[0][0],Y[0][1]-G[0][1],Y[0][2]-G[0][2],Y[0][3]-G[0][3]]),G[1]&&Y[1]&&(G[1][1]===Y[1][1]?W.push(Y[1][0]-G[1][0]):G[1][1]===Ha&&Y[1][1]===Ga?W.push(Y[1][0]*L*.01-G[1][0]):G[1][1]===Ga&&Y[1][1]===Ha&&W.push(100*Y[1][0]/L-G[1][0])),a[1].push(W)}if("linear"===o.k){var U=Array.isArray(o.d);if(Array.isArray(s.d)!==U)return;if(U){var X=[s.d[0]-o.d[0],s.d[1]-o.d[1],s.d[2]-o.d[2],s.d[3]-o.d[3]];if(F&&qa(X,[0,0,0,0]))return;a[2]=X}else{var K=s.d-o.d;if(F&&0==K)return;a[2]=K}}else if("radial"===o.k){var z=Array.isArray(o.z);if(Array.isArray(s.z)!==z)return;if(z){a[4]=[];for(var V=0;V<5;V++){var j=o.z[V];void 0===j&&(j=1);var $=s.z[V];void 0===$&&($=1),a[4].push($-j)}if(F&&qa(a[4],[0,0,0,0,0]))return}else{a[3]=[];for(var q=0;q<2;q++){var Z,J,Q=o.p[q],tt=s.p[q];Q[1]===tt[1]?a[3].push(tt[0]-Q[0]):Q[1]===Ha&&tt[1]===Ga?(Z=.01*tt[0]*n[q?"clientWidth":"clientHeight"],a[3].push(Z-Q[0])):Q[1]===Ga&&tt[1]===Ha&&(J=100*tt[0]/n[q?"clientWidth":"clientHeight"],a[3].push(J-Q[0]))}if(F&&qa(a[3],[0,0]))return}}else if("conic"===o.k){a[2]=s.d-o.d,a[3]=[];for(var et=0;et<2;et++){var rt,nt,it=o.p[et],at=s.p[et];it[1]===at[1]?a[3].push(at[0]-it[0]):it[1]===Ha&&at[1]===Ga?(rt=.01*at[0]*n[et?"clientWidth":"clientHeight"],a[3].push(rt-it[0])):it[1]===Ga&&at[1]===Ha&&(nt=100*at[0]/n[et?"clientWidth":"clientHeight"],a[3].push(nt-it[0]))}if(F&&0!==a[2]&&qa(a[3],[0,0]))return}}else{if(qa(s,o))return;a[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}}else if(eo.hasOwnProperty(r)){if(s=s[0],o=o[0],qa(s,o)||0===s[3]&&0===o[3])return;a[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}else if(no.hasOwnProperty(r)){if(s[0][0]===o[0][0]&&s[0][1]===o[0][1]&&s[1][0]===o[1][0]&&s[1][1]===o[1][1])return;a[1]=[];for(var ot=0;ot<2;ot++)s[ot][1]===o[ot][1]?a[1].push(s[ot][0]-o[ot][0]):o[ot][1]===Ha&&s[ot][1]===Ga?a[1].push(.01*s[ot][0]*n[ot?"outerHeight":"outerWidth"]-o[ot][0]):o[ot][1]===Ga&&s[ot][1]===Ha?a[1].push(100*s[ot][0]/n[ot?"outerHeight":"outerWidth"]-o[ot][0]):a[1].push(0)}else if(ro.hasOwnProperty(r)){if(o[1]===Ba||s[1]===Ba)return;var st,ht,lt=n.computedStyle,ct=(n.domParent||n).computedStyle,ut=0;if(o[1]===s[1]?ut=s[0]-o[0]:o[1]===Ha&&s[1]===Ga?(r===ea?st=s[0]*ct[r]*.01:r===ra&&"row"===lt[na]||r===ia||-1<[ya,pa,la,ha,sa,oa,fa,_a,ua,ca].indexOf(r)?st=s[0]*ct[ia]*.01:(r===ra||r===aa||-1<[da,va].indexOf(r))&&(st=s[0]*ct[aa]*.01),ut=st-o[0]):o[1]===Ga&&s[1]===Ha?(r===ea?ht=100*s[0]/ct[r]:r===ra&&"row"===lt[na]||r===ia||-1<[ya,pa,la,ha,sa,oa,fa,_a,ua,ca].indexOf(r)?ht=100*s[0]/ct[ia]:(r===ra||r===aa||-1<[da,va].indexOf(r))&&(ht=100*s[0]/ct[aa]),ut=ht-o[0]):r===ga&&(o[1]===Ha&&s[1]===Xa?ut=s[0]*lt[ea]-o[0]:o[1]===Xa&&s[1]===Ha&&(ut=s[0]/lt[ea]-o[0])),0===ut||isNaN(ut))return;a[1]=ut}else if(to.hasOwnProperty(r)){if(Ka(o))return;if(to[r][i]&&za(to[r][i].calDiff)){var _t=to[r][i].calDiff;if(n.isMulti){for(var ft=[],dt=0,pt=Math.min(o.length,s.length);dt<pt;dt++)ft.push(_t(o[dt],s[dt]));return ft}a[1]=_t(o,s)}else if(n.isMulti)if("points"===r||"controls"===r){if(Ka(s)||Ka(o)||qa(o,s))return;a[1]=[];for(var vt=0,yt=Math.min(o.length,s.length);vt<yt;vt++){var gt=o[vt],mt=s[vt];if(Ka(gt)||Ka(mt))a[1].push(null);else{for(var Et=[],Tt=0,Ot=Math.min(gt.length,mt.length);Tt<Ot;Tt++){var Mt=gt[Tt],At=mt[Tt];if(Ka(Mt)||Ka(At))Et.push(null);else{for(var bt=[],Rt=0,xt=Math.max(Mt.length,At.length);Rt<xt;Rt++){var St=Mt[Rt],kt=At[Rt];Ka(St)||Ka(kt)?bt.push(0):bt.push(kt-St)}Et.push(bt)}}a[1].push(Et)}}}else if("controlA"===r||"controlB"===r){if(Ka(s)||Ka(o)||qa(o,s))return;a[1]=[];for(var It=0,Nt=Math.min(o.length,s.length);It<Nt;It++){var wt=o[It],Dt=s[It];Ka(wt)||Ka(Dt)?a[1].push(null):a[1].push([Dt[0]-wt[0],Dt[1]-wt[1]])}}else{if(s===o||qa(s,o)||"edge"===r||"closure"===r)return;for(var Pt=[],Ct=0,Lt=Math.min(o.length,s.length);Ct<Lt;Ct++){var Ft=o[Ct],Bt=s[Ct];(Ka(Ft)||Ka(Bt))&&Pt.push(0),Pt.push(Bt-Ft)}a[1]=Pt}else if("points"===r||"controls"===r){if(Ka(s)||Ka(o)||qa(o,s))return;a[1]=[];for(var Ht=0,Gt=Math.min(o.length,s.length);Ht<Gt;Ht++){var Yt=o[Ht],Wt=s[Ht];if(Ka(Yt)||Ka(Wt))a[1].push(null);else{for(var Ut=[],Xt=0,Kt=Math.max(Yt.length,Wt.length);Xt<Kt;Xt++){var zt=Yt[Xt],Vt=Wt[Xt];Ka(zt)||Ka(Vt)?Ut.push(0):Ut.push(Vt-zt)}a[1].push(Ut)}}}else if("controlA"===r||"controlB"===r){if(Ka(s)||Ka(o)||qa(o,s))return;a[1]=[s[0]-o[0],s[1]-o[1]]}else{if(s===o||"edge"===r||"closure"===r)return;a[1]=s-o}}else{if(r!==ma&&r!==Ea)return;if(s===o)return;a[1]=s-o}return a}(r[Pa],n[Pa],t,i,a);e&&r[Fa].push(e)}),n}function co(t,e,L,F){var r,n,i,a,o,B=Ja(t[Pa],e),s=((r=t[La])&&(i=/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(r)?(n=r.match(/[\d.]+/g),zi.cubicBezier(n[0],n[1],n[2],n[3])):(i=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(r))?(a=parseInt(i[1]),o=i[2],function(t){if(a&&0<a){var e=1/a;return("start"===o?Math.ceil(t/e):Math.floor(t/e))/a}return t}):zi[r]),i);s&&s!==Za&&(L=s(L));for(var H=t[Fa],G=F.tagName,h=0,l=H.length;h<l;h++)!function(t){var e=Ge(H[t],5),r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=B[r];if(r===Ta){s=s||(B[r]=[[xa,[1,0,0,1,0,0]]]);for(var h=0;h<6;h++)s[0][1][h]+=n[h]*L}else if(so.hasOwnProperty(r))n&&(s[0]+=n*L);else if(r===ji)(s=s||(B[r]=[["blur",0]]))[0][1]+=n*L;else if(no.hasOwnProperty(r))for(var l=0;l<2;l++)s[l][0]+=n[l]*L;else if(r===$i||r===ta)0!==n[0]&&(s[0][0]+=n[0]*L),0!==n[1]&&(s[1][0]+=n[1]*L);else if(r===Ji)for(var c=0,u=Math.min(s.length,n.length);c<u;c++){for(var _=0;_<4;_++)s[c][_]+=n[c][_]*L;for(var f=0;f<4;f++)s[c][4][f]+=n[c][4][f]*L}else if(io.hasOwnProperty(r))if(oo.hasOwnProperty(s.k)){for(var d=0,p=Math.min(s.v.length,n.length);d<p;d++){var v=s.v[d],y=n[d];v[0][0]+=y[0][0]*L,v[0][1]+=y[0][1]*L,v[0][2]+=y[0][2]*L,v[0][3]+=y[0][3]*L,v[1]&&y[1]&&(v[1][0]+=y[1]*L)}"linear"===s.k&&void 0!==s.d&&void 0!==i&&(Array.isArray(i)?(s.d[0]+=i[0]*L,s.d[1]+=i[1]*L,s.d[2]+=i[2]*L,s.d[3]+=i[3]*L):s.d+=i*L),"radial"===s.k?void 0!==s.z&&void 0!==o?(s.z[0]+=o[0]*L,s.z[1]+=o[1]*L,s.z[2]+=o[2]*L,s.z[3]+=o[3]*L,s.z[4]+=o[4]*L):void 0!==s.p&&void 0!==a&&(s.p[0][0]+=a[0]*L,s.p[1][0]+=a[1]*L):"conic"===s.k&&void 0!==s.d&&void 0!==i&&(s.d+=i*L,s.p[0][0]+=a[0]*L,s.p[1][0]+=a[1]*L)}else s[0]+=n[0]*L,s[1]+=n[1]*L,s[2]+=n[2]*L,s[3]+=n[3]*L;else if(eo.hasOwnProperty(r))(s=s[0])[0]+=n[0]*L,s[1]+=n[1]*L,s[2]+=n[2]*L,s[3]+=n[3]*L;else if(to.hasOwnProperty(r)){var g=B[r];if(to[r][G]&&za(to[r][G].calIncrease)){var m=to[r][G].calIncrease;F.isMulti?B[r]=g.map(function(t,e){return m(t,n[e],L)}):B[r]=m(g,n,L)}else if(F.isMulti)if("points"===r||"controls"===r)for(var E=0,T=Math.min(g.length,n.length);E<T;E++){var O=g[E],M=n[E];if(!Ka(O)&&!Ka(M))for(var A=0,b=Math.min(O.length,M.length);A<b;A++){var R=O[A],x=M[A];if(!Ka(R)&&!Ka(x))for(var S=0,k=Math.min(R.length,x.length);S<k;S++)Ka(R[S])||Ka(x[S])||(R[S]+=x[S]*L)}}else"controlA"===r||"controlB"===r?n.forEach(function(t,e){var r=g[e];if(!Ka(t)&&!Ka(r))for(var n=0,i=Math.min(r.length,t.length);n<i;n++){var a=r[n],o=t[n];Ka(a)||Ka(o)||(r[n]+=o*L)}}):n.forEach(function(t,e){Ka(t)||Ka(g[e])||(g[e]+=t*L)});else if("points"===r||"controls"===r)for(var I=0,N=Math.min(g.length,n.length);I<N;I++){var w=g[I],D=n[I];if(!Ka(w)&&!Ka(D))for(var P=0,C=Math.min(w.length,D.length);P<C;P++)Ka(w[P])||Ka(D[P])||(w[P]+=D[P]*L)}else"controlA"===r||"controlB"===r?(Ka(g[0])||Ka(n[0])||(g[0]+=n[0]*L),Ka(g[1])||Ka(n[1])||(g[1]+=n[1]*L)):Ka(g)||Ka(n)||(B[r]+=n*L)}else r!==ma&&r!==Ea||(B[r]+=n*L)}(h);return B}function uo(t,e){return za(t)&&(e=t,t={}),[t||{},e]}Object.assign(so,ro),Object.assign(so,ao);var _o,fo=0,po=12,vo=13,yo=30,go=31,mo=41,Eo=42,To=function(){t(y,Ii);var v=e(y);function y(t,i,e){var r,a;g(this,y),(r=v.call(this)).__id=fo++,i=$a(i||[]),i=Array.isArray(i)?i.filter(function(t){return t&&ja(t)}):i&&ja(i)?(a=[],Object.keys(i).forEach(function(t){var e=i[t];if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++){(a[r]=a[r]||{offset:r/(n-1)})[t]=e[r]}}),a):[],Va(e)&&(r.__options={duration:e},e=r.__options);var n=r.__options=e||{duration:0},o=t.root,s=r.__config=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,o,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,n.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,o.__config,!1],h=r.iterations=n.iterations,l=r.duration=n.duration,c=Ge(r.__init(i,h,l,n.easing,t),4),u=c[0],_=c[1],f=c[2],d=c[3];s[po]=u,s[vo]=_,s[yo]=f,s[go]=d,2===u.length&&(s[mo]=!0,s[Eo]=u[1][Ca]);var p=parseInt(n.fps)||0;return p<=0&&(p=60),r.fps=p,r.spfLimit=n.spfLimit,r.delay=n.delay,r.endDelay=n.endDelay,r.playbackRate=n.playbackRate,r.fill=n.fill,r.iterations=n.iterations,r.direction=n.direction,r}return l(y,[{key:"__init",value:function(n,t,e,r,i){if(n.length<1)return[[],[],[],{}];for(var a,o=i.tagName,s=0,h=n.length;s<h;s++)(function(t,e){var r=n[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return n.splice(t,1),s=--t,h=--e;if(r.offset<=-1)return n.splice(t,1),s=--t,h=--e}Object.keys(r).forEach(function(t){Ft.hasOwnProperty(t)&&Ft.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Oe.isValid(o,t)||delete r[t]}),s=t,h=e})(s,h);1===n.length?(n[0]=$a(n[0]),1===n[0].offset?n.unshift({offset:0}):((a=$a(n[0])).offset=1,n.push(a))):n.forEach(function(t,e){n[e]=$a(t)});var l=n[0];l.hasOwnProperty("offset")&&0<l.offset?(l={offset:0},n.unshift(l)):l.offset=0;var c=n[n.length-1];c.hasOwnProperty("offset")&&c.offset<1?(c={offset:1},n.push(c)):c.offset=1;for(var u=1,_=n.length;u<_;u++){if(!(v=n[u]).hasOwnProperty("offset")){for(var f=void 0,d=u+1;d<_&&!(f=n[d]).hasOwnProperty("offset");d++);for(var p=d-u+1,v=n[u-1],y=(f.offset-v.offset)/p,g=u;g<d;g++){n[g].offset=v.offset+y*(g+1-u)}u=d}}var m=[];n.forEach(function(t){m.push(function(t,e,r){var n=t.offset,i=t.easing;delete t.offset,delete t.easing,t=sn.normalize(t);var a=[];return a[Pa]=t,a[Ca]=n*e,a[La]=i||r,a[Fa]=[],a}(t,e,r))});var E,T,O,M,A,b,R,x,S=(T=i,O={},M=[],(E=m).forEach(function(t){var e=t[Pa];Object.keys(e).forEach(function(t){void 0===e[t]||O.hasOwnProperty(t)||(O[t]=!0,to.hasOwnProperty(t)||(t=parseInt(t)),M.push(t))})}),E.forEach(function(t){var e=t[Pa];M.forEach(function(t){e.hasOwnProperty(t)&&!Ka(e[t])||(to.hasOwnProperty(t)?e[t]=T.currentProps[t]:e[t]=T.currentStyle[t])})}),M);A=m,b=S,x=(R=i).computedStyle,A.forEach(function(t){var a=t[Pa];b.forEach(function(t){var e,r,n,i=a[t];Ka(i)||(t===Ta?(e=R.outerWidth,r=R.outerHeight,n=Jn.calMatrix(i,e,r),a[t]=[[xa,n]]):i[1]===Ya&&(t===Oa?a[t]=[Ue.rgba2int(x[t]),Wa]:ro.hasOwnProperty(t)?a[t]=[x[t],Ha]:t===Ma?a[t]=[x[t],Xa]:t!==Aa&&t!==ba&&t!==Ra||(a[t]=[x[t],Ua])))})});var k=i.style,I=i.props,N={};S.forEach(function(t){Qa(o,t)&&(N[t]=I[t]),N[t]=k[t]});for(var w=m.length,D=m[0],P=1;P<w;P++)D=lo(D,m[P],S,i,o);var C=$a(m).reverse();C.forEach(function(t){t[Ca]=e-t[Ca],t[Fa]=[]}),D=C[0];for(var L=1;L<w;L++){D=lo(D,C[L],S,i,o)}return[m,C,S,N]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[15]=0;var n=r[16],i=r[yo],a=r[10];if(t){if(r[14]=r[28]+r[17]+r[29],"finish"===r[22])return;r[22]="finish",r[40]||(r[16]={},e=!0)}else{if(r[21]=r[14]=0,"idle"===r[22])return;r[22]="idle",r[16]={},e=!0}e&&i.forEach(function(t){to.hasOwnProperty(t)?a.__currentProps[t]===n[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===n[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(Ii.FRAME,e,r),t[7]&&(t[7]=!1,this.emit(Ii.PLAY)),za(t[9])&&(t[9].call(this,e,r),t[9]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[20],n=t[34],i=t[35],a=t[14]=t[15];return n&&(!0===n?e=Math.min(e,1e3/i):0<n&&(e=Math.min(e,n))),1!==r&&0<r&&(e*=r),t[15]+=e,a}},{key:"play",value:function(t){var e,r,n=this.__config,i=n[23],a=n[17],o=n[22],s=n[po];return i||a<=0||s.length<1||"running"===o||(this.__cancelTask(),n[9]=t,n[22]="running",n[7]=!0,this.__hasFin=!1,this.__hasCancel=!1,n[27]||(n[27]=!0,e=n[vo],r=n[36],n[32]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(r)?e:s,n[14]=n[15]=n[25]=0),Pi.offFrame(this),Pi.onFrame(this),n[24]=Pi.__now),this}},{key:"__before",value:function(t){var e,r,n=this.__config,i=n[10],a=n[35],o=n[21],s=n[32],h=n[18],l=n[39],c=n[40],u=n[28],_=n[11],f=n[mo],d=n[Eo],p=n[17],v=n[29],y=s.length,g=n[37](n,t);if(!n[38]&&a<60){if((t=n[25]+=t)<1e3/a)return void(n[1]=!0);n[25]=0}if(n[38]=!1,!(0<o)&&g<u)return l&&ho((n[33]=s[0])[Pa],n[yo],n,_,i),n[45]=!0,void(n[2]=!0);0===o&&(g-=u),0!==g&&!n[45]||(n[45]=!1,n[3]=!0),r=f?(e=g<d?0:1,d):s[e=function t(e,r,n,i){if(e===r)return i[e][Ca]>n?e-1:e;var a=e+(r-e>>1),o=i[a];return o[Ca]===n?a:o[Ca]>n?t(e,Math.max(a-1,e),n,i):t(Math.min(a+1,r),r,n,i)}(0,y-1,g,s)][Ca];var m=e===y-1,E=0;m||(E=f?g/p:(g-r)/(s[e+1][Ca]-r));var T,O,M=h-1<=o,A=s[e];n[33]=A,m?(T=g<p+v,O=Ja(c||!M?A[Pa]:n[go],n[yo]),M?T||(n[15]=0,h<=(o=++n[21])&&Pi.offFrame(this)):(n[15]=g-p,o=++n[21],n[6]=!0)):O=co(A,n[yo],E,i),ho(O,n[yo],n,_,i),!m||T&&!M||(n[4]=!0,h<=o&&(n[5]=!0,this.__clean(!0)))}},{key:"__after",value:function(t){var e,r,n,i,a=this.__config;a[0]=!1,a[1]?a[1]=!1:(a[8].call(this,a,t,a[2]),a[2]=!1,a[3]&&(a[3]=!1,this.emit(Ii.BEGIN,a[21])),a[4]&&(a[4]=!1,this.emit(Ii.END,a[21]-1),e=a[36],r=a[po],n=a[vo],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(i=a[21]%2==0,a[32]="alternate"===e?i?r:n:i?n:r)),a[6]&&(a[6]=!1,a[3]=!0),a[5]&&(a[3]=a[4]=a[2]=a[5]=a[1]=a[27]=!1,a[22]="finished",this.emit(Ii.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[23],n=e[17],i=this.pending;return r||n<=0||i||(e[22]="paused",this.__cancelTask(),t||this.emit(Ii.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[23],n=e[17],i=e[22];return r||n<=0||"paused"!==i?this:this.play(t)}},{key:"finish",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[po];if(t||i<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,h=n[11],l=n[go];return h&&(s=n[40]?(n[33]=o[o.length-1],o[o.length-1][Pa]):l,h.addRefreshTask({__before:function(){n[0]=!0,ho(s,n[yo],n,h,n[10]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Ii.FINISH)),za(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[po];if(t||i<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=n[11],h=n[go];return s&&s.addRefreshTask({__before:function(){n[0]=!0,ho(h,n[yo],n,s,n[10]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Ii.CANCEL)),za(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var n=this.__config,i=n[23],a=n[17],o=n[po],s=n[28],h=n[29];if(i||a<=0||o.length<1)return this;var l=Ge(uo(e,r),2);return e=l[0],r=l[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+h<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var n=this,i=this.__config,a=i[23],o=i[17],s=i[po],h=i[28],l=i[29];if(a||o<=0||s.length<1)return this;var c=Ge(uo(e,r),2);return e=c[0],r=c[1],o+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){i[22]="paused",n.__cancelTask(),za(r)&&r.call(n,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[16],n=t[10];t[yo].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],to.hasOwnProperty(t)?n.currentProps[t]=e:n.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var n=this.__config,i=n[17];if(n[22]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=n[28]);i<t&&n[21]<n[18]-1;)n[21]++,t-=i;return n[15]=t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[10]=t,this.__config[43]=t.__config}},{key:"__cancelTask",value:function(){Pi.offFrame(this),this.__config[9]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[23]||(e.removeControl(),t?(e.__clean(),r[10]=null):Pi.nextFrame({__before:function(){e.__clean(),r[10]=null}}),r[24]=0,r[23]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[22]&&"finished"!==t[22]&&Ke.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[10]}},{key:"root",get:function(){return this.__config[11]}},{key:"keys",get:function(){return this.__config[yo]}},{key:"style",get:function(){return this.__config[16]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[17]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[17]!==t&&(e[17]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[28]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[28]!==t&&(e[28]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[29]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[29]!==t&&(e[29]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[35]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[35]!==t&&(t<=0&&(t=60),e[35]=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[18]},set:function(t){t===1/0||Ue.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[18]!==t&&(e[18]=t),t}},{key:"fill",get:function(){return this.__config[19]},set:function(t){t=t||"none";var e=this.__config;return e[19]!==t&&(e[19]=t,this.__checkModify()),e[39]={backwards:!0,both:!0}.hasOwnProperty(t),e[40]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[36]},set:function(t){t=t||"normal";var e=this.__config;return e[36]!==t&&(e[36]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[po]}},{key:"framesR",get:function(){return this.__config[vo]}},{key:"playbackRate",get:function(){return this.__config[20]},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1);var e=this.__config;return e[20]!==t&&(e[20]=t),t}},{key:"easing",get:function(){return this.__config[26]}},{key:"startTime",get:function(){return this.__config[24]}},{key:"currentTime",get:function(){return this.__config[14]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[14]!==t&&(e[14]=t,e[15]=t),t}},{key:"pending",get:function(){return"running"!==this.__config[22]}},{key:"finished",get:function(){return"finished"===this.__config[22]}},{key:"playState",get:function(){return this.__config[22]}},{key:"playCount",get:function(){return this.__config[21]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[21]!==t&&(e[21]=t),t}},{key:"isDestroyed",get:function(){return this.__config[23]}},{key:"animating",get:function(){var t=this.__config,e=t[22];return"idle"!==e&&("finished"!==e||t[40]||t[39])}},{key:"spfLimit",get:function(){return this.__config[34]},set:function(t){t=Ue.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[34]!==t&&(e[34]=t),t}},{key:"assigning",get:function(){return this.__config[0]}}]),y}(),Oo=p.STYLE_KEY,Mo=p.STYLE_KEY,Ao=Mo.TRANSLATE_X,bo=Mo.TRANSLATE_Y,Ro=Mo.OPACITY,xo=Mo.FILTER,So={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSFORM:4,TRANSFORM_ALL:7,OPACITY:8,FILTER:16,MIX_BLEND_MODE:32,REPAINT:64,REFLOW:128},ko=(c(_o={},Oo.SCALE_X,!0),c(_o,Oo.SCALE_Y,!0),c(_o,Oo.ROTATE_Z,!0),c(_o,Oo.TRANSFORM,!0),c(_o,Oo.TRANSFORM_ORIGIN,!0),_o),Io=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Oe.isIgnore(t)?So.NONE:t===Ao?So.TRANSLATE_X:t===bo?So.TRANSLATE_Y:ko.hasOwnProperty(t)?So.TRANSFORM:t===Ro?So.OPACITY:t===xo?So.FILTER:Oe.isRepaint(t)?So.REPAINT:So.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<So.REFLOW}},So);Io.TRANSFORMS=ko;var No=[8,16,32,64,128,256,512,1024,2048,4096],wo=[8,8,8,8,8,4,2,1,1,1],Do=No[No.length-1],Po={},Co=function(){function u(t,e){g(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,t*=e;var r=this.__canvas=Ke.getCacheCanvas(t,t,null,e);r&&(this.__offScreen=r),this.__grid=[];for(var n=0;n<this.__total;n++)this.__grid.push(1)}return l(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var n=0;n<t;n++){var i=r*t+n;if(e[i])return e[i]=0,this.__free--,i}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]=1,this.__free++}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"size",get:function(){return this.__size}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offScreen",get:function(){return this.__offScreen}},{key:"canvas",get:function(){return this.offScreen.canvas}},{key:"ctx",get:function(){return this.offScreen.ctx}}],[{key:"getInstance",value:function(t){if(!(Do<t)){for(var e=No[0],r=wo[0],n=0,i=No.length;n<i&&(e=No[n],r=wo[n],!(No[n]>=t));n++);for(var a,o=Po[e]=Po[e]||[],s=0,h=o.length;s<h;s++){var l=o[s];if(l.free){a=l;break}}if(!a){if(!(a=new u(e,r)).offScreen)return void Ke.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(No=t.SIZE,wo=t.NUMBER,Do=No[No.length-1])},get:function(){return{SIZE:No,NUMBER:wo}}},{key:"MAX",get:function(){return Do}}]),u}(),Lo=p.STYLE_KEY,Fo=Lo.TRANSFORM_ORIGIN,Bo=Lo.TRANSFORM,Ho=p.NODE_KEY,Go=Ho.NODE_OPACITY,Yo=Ho.NODE_CACHE,Wo=Ho.NODE_CACHE_FILTER,Uo=Ho.NODE_CACHE_OVERFLOW;function Xo(t){var e=t.size,r=t.sx1,n=t.sy1,i=t.width,a=t.height,o=t.bbox,s=Ke.getCacheCanvas(i,a);return s.coords=[1,1],s.bbox=o,s.size=e,s.sx1=r,s.sy1=n,s.dbx=t.dbx,s.dby=t.dby,s.width=i,s.height=a,s}var Ko=function(){function p(t,e,r,n,i){g(this,p),this.__init(t,e,r,n,i)}return l(p,[{key:"__init",value:function(t,e,r,n,i){this.__width=t,this.__height=e,this.__bbox=r,this.__page=n,this.__pos=i;var a,o=Ge(n.getCoords(i),2),s=o[0],h=o[1];this.__coords=[s+1,h+1],n.canvas&&(this.__enabled=!0,(a=n.ctx).setTransform([1,0,0,1,0,0]),a.globalAlpha=1,"undefined"!=typeof karas&&karas.debug&&(n.canvas.setAttribute("size",n.size),a.fillStyle="rgba(0, 0, 0, 0.1)",a.beginPath(),a.rect(s+1,h+1,n.size-2,n.size-2),a.closePath(),a.fill()))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=Ge(this.coords,2),n=r[0],i=r[1],a=this.bbox;this.dx=n-a[0],this.dy=i-a[1],this.dbx=t-a[0],this.dby=e-a[1]}},{key:"clear",value:function(){var t,e,r,n,i=this.ctx;this.enabled&&i&&this.available&&(i.setTransform([1,0,0,1,0,0]),e=(t=Ge(this.coords,2))[0],r=t[1],n=this.page.size,i.clearRect(e-1,r-1,n,n)),this.__available=!1}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t){var e,r,n,i,a;Ue.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]),e+=2,r+=2,(n=Co.getInstance(Math.max(e,r)))?(i=n.page,a=n.pos,this.__init(e,r,t,i,a)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"coords",get:function(){return this.__coords}}],[{key:"getInstance",value:function(t){if(!(isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3]))){var e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]);e+=2,r+=2;var n=Co.getInstance(Math.max(e,r));if(n)return new p(e,r,t,n.page,n.pos)}}},{key:"genBlur",value:function(t,e){var r=Ge(t.coords,2),n=r[0],i=r[1],a=t.size,o=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox,_=Ke.getCacheCanvas(l,c);_.ctx.drawImage(o,n-1,i-1,l,c,0,0,l,c),_.draw();var f=Ke.getCacheWebgl(l,c);return Si.gaussBlur(_,f,e,l,c),f.bbox=u,f.coords=[1,1],f.size=a,f.sx1=s,f.sy1=h,f.dbx=t.dbx,f.dby=t.dby,f.width=l,f.height=c,f}},{key:"genMask",value:function(t,e,r,n,i){for(var o=Xo(t),a=[];e&&e.isMask;)a.push(e),e=e.next;var s=Ge(o.coords,2),h=s[0],l=s[1],c=o.ctx,u=o.dbx,_=o.dby;i[0]+=h+u,i[1]+=l+_;var f=Jn.calMatrixByOrigin(n,i);return a.forEach(function(t){var e=t.__config,r=e[Uo],n=e[Wo],i=e[Yo],a=r&&r.available&&r;(a=(a=a||n&&n.available&&n)||i&&i.available&&i)?(c.globalAlpha=e[Go],p.drawCache(a,o,t.computedStyle[Bo],[1,0,0,1,0,0],t.computedStyle[Fo].slice(0),f)):Ke.error("CacheMask is oversize")}),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.globalCompositeOperation=r?"source-out":"source-in",p.drawCache(t,o),c.globalCompositeOperation="source-over",o.draw(c),o}},{key:"genOverflow",value:function(t,e){var r=t.bbox,n=e.sx,i=e.sy,a=e.outerWidth,o=e.outerHeight,s=n+a,h=i+o;if(r[0]<n||r[1]<i||r[2]>s||r[3]>h){var l=Xo(t),c=l.ctx;return c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,p.drawCache(t,l),l.draw(c),c.globalCompositeOperation="destination-in",c.fillStyle="#FFF",c.beginPath(),c.rect(n-r[0]+1,i-r[1]+1,a,o),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",l}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(Ue.equalArr(e,r))return t;var n=r[0]-e[0],i=r[1]-e[1],a=p.getInstance(e);if(a&&a.enabled){var o=Ge(t.coords,2),s=o[0],h=o[1],l=t.canvas,c=t.width,u=t.height,_=Ge(a.coords,2),f=_[0],d=_[1];return a.sx1=t.sx1,a.sy1=t.sy1,a.dx=t.dx+n,a.dy=t.dy+i,a.dbx=t.dbx+n,a.dby=t.dby+i,a.ctx.drawImage(l,s-1,h-1,c,u,n+f-1,i+d-1,c,u),a.__available=!0,t.release(),a}}},{key:"drawCache",value:function(t,e,r,n,i,a){var o,s=Ge(e.coords,2),h=s[0],l=s[1],c=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,d=e.dby,p=Ge(t.coords,2),v=p[0],y=p[1],g=t.canvas,m=t.sx1,E=t.sy1,T=t.dbx,O=t.dby,M=t.width,A=t.height,b=h+m-c+f-T,R=l+E-u+d-O;r&&n&&i&&(i[0]+=b,i[1]+=R,o=Jn.calMatrixByOrigin(r,i),n=We.multiply(n,o),a&&(n=Ue.equalArr(n,a)?[1,0,0,1,0,0]:(a=We.inverse(a),We.multiply(n,a))),_.setTransform(n[0],n[1],n[2],n[3],n[4],n[5])),_.drawImage(g,v-1,y-1,M,A,b-1,R-1,M,A)}},{key:"draw",value:function(t,e,r,n){t.globalAlpha=e,t.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]);var i=Ge(n.coords,2),a=i[0],o=i[1],s=n.canvas,h=n.sx1,l=n.sy1,c=n.dbx,u=n.dby,_=n.width,f=n.height;t.drawImage(s,a-1,o-1,_,f,h-1-c,l-1-u,_,f)}},{key:"MAX",get:function(){return Co.MAX-2}}]),p}();c(Ko,"NUM",5);var zo=p.STYLE_KEY,Vo=p.STYLE_RV_KEY,jo=p.style2Upper,$o=p.STYLE_KEY,qo=$o.BORDER_TOP_LEFT_RADIUS,Zo=$o.BORDER_TOP_RIGHT_RADIUS,Jo=$o.BORDER_BOTTOM_LEFT_RADIUS,Qo=$o.BORDER_BOTTOM_RIGHT_RADIUS,ts=$o.PADDING_LEFT,es=$o.PADDING_RIGHT,rs=$o.PADDING_TOP,ns=$o.PADDING_BOTTOM,is=$o.MARGIN_LEFT,as=$o.MARGIN_TOP,os=$o.MARGIN_BOTTOM,ss=$o.MARGIN_RIGHT,hs=$o.BORDER_LEFT_WIDTH,ls=$o.BORDER_TOP_WIDTH,cs=$o.BORDER_BOTTOM_WIDTH,us=$o.BORDER_RIGHT_WIDTH,_s=$o.TOP,fs=$o.RIGHT,ds=$o.BOTTOM,ps=$o.LEFT,vs=$o.POSITION,ys=$o.DISPLAY,gs=$o.WIDTH,ms=$o.HEIGHT,Es=$o.MATRIX,Ts=$o.TRANSLATE_X,Os=$o.TRANSLATE_Y,Ms=$o.TRANSFORM,As=$o.SCALE_X,bs=$o.SCALE_Y,Rs=$o.ROTATE_Z,xs=$o.SKEW_X,Ss=$o.SKEW_Y,ks=$o.TRANSFORM_ORIGIN,Is=$o.BACKGROUND_POSITION_X,Ns=$o.BACKGROUND_POSITION_Y,ws=$o.BACKGROUND_SIZE,Ds=$o.BACKGROUND_COLOR,Ps=$o.BACKGROUND_IMAGE,Cs=$o.BACKGROUND_REPEAT,Ls=$o.BOX_SHADOW,Fs=$o.OPACITY,Bs=$o.Z_INDEX,Hs=$o.BORDER_TOP_STYLE,Gs=$o.BORDER_RIGHT_STYLE,Ys=$o.BORDER_BOTTOM_STYLE,Ws=$o.BORDER_LEFT_STYLE,Us=$o.FILTER,Xs=$o.OVERFLOW,Ks=$o.MIX_BLEND_MODE,zs=$o.BORDER_TOP_COLOR,Vs=$o.BORDER_BOTTOM_COLOR,js=$o.BORDER_LEFT_COLOR,$s=$o.BORDER_RIGHT_COLOR,qs=$o.FONT_STYLE,Zs=$o.COLOR,Js=$o.VISIBILITY,Qs=$o.POINTER_EVENTS,th=$o.BORDER_TOP,eh=$o.BORDER_RIGHT,rh=$o.BORDER_BOTTOM,nh=$o.BORDER_LEFT,ih=p.UPDATE_KEY,ah=ih.UPDATE_NODE,oh=ih.UPDATE_FOCUS,sh=ih.UPDATE_STYLE,hh=ih.UPDATE_OVERWRITE,lh=ih.UPDATE_KEYS,ch=ih.UPDATE_CONFIG,uh=p.STRUCT_KEY.STRUCT_HAS_MASK,_h=p.NODE_KEY,fh=_h.NODE_TAG_NAME,dh=_h.NODE_CACHE_STYLE,ph=_h.NODE_CURRENT_STYLE,vh=_h.NODE_COMPUTED_STYLE,yh=_h.NODE_STYLE,gh=_h.NODE_STRUCT,mh=_h.NODE_OPACITY,Eh=_h.NODE_MATRIX_EVENT,Th=_h.NODE_MATRIX,Oh=_h.NODE_LIMIT_CACHE,Mh=_h.NODE_BLUR_VALUE,Ah=_h.NODE_HAS_CONTENT,bh=_h.NODE_REFRESH_LV,Rh=_h.NODE_CACHE,xh=_h.NODE_CACHE_TOTAL,Sh=_h.NODE_CACHE_FILTER,kh=_h.NODE_CACHE_MASK,Ih=_h.NODE_CACHE_OVERFLOW,Nh=_h.NODE_IS_DESTROYED,wh=_h.NODE_DEFS_CACHE,Dh=R.AUTO,Ph=R.PX,Ch=R.PERCENT,Lh=R.STRING,Fh=R.INHERIT,Bh=Ue.clone,Hh=Ue.int2rgba,Gh=Ue.rgba2int,Yh=Ue.joinArr,Wh=Ue.isNil,Uh=sn.calRelative,Xh=bn.canvasPolygon,Kh=bn.svgPolygon,zh=Oe.GEOM,Vh=Io.contain,jh=Io.NONE,$h=Io.TRANSFORM_ALL,qh=Io.TRANSFORM,Zh=Io.REFLOW,Jh=Io.REPAINT,Qh=Io.TRANSLATE_X,tl=Io.TRANSLATE_Y,el=Io.OPACITY,rl=Io.FILTER;function nl(t,e,r,n,i,a,o){var s;t===Ye.CANVAS?(n.beginPath(),n.fillStyle!==r&&(n.fillStyle=r),e.forEach(function(t){Xh(n,t,a,o)}),n.fill(),n.closePath()):t===Ye.SVG&&(s="",e.forEach(function(t){s+=Kh(t)}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",r]]}))}function il(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y){var g,m,E=17<arguments.length&&void 0!==y?y:"fill";Array.isArray(e)&&(O=e[1],g=e[2],m=e[3],e=e[0]);var T,O,M,A,b,R=pi.calRadius(r,n,i,a,l,c,u,_,f,d,p,v);R=R||[[r,n],[r+i,n],[r+i,n+a],[r,n+a],[r,n]],O&&(T=[g,m],O=Jn.calMatrixByOrigin(O,T),M=We.inverse(O),R=R.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=We.calPoint([t[r],t[r+1]],M);e.push(i[0]),e.push(i[1])}return e})),t===Ye.CANVAS?(O&&(o.save(),o.setTransform(O[0],O[1],O[2],O[3],O[4],O[5])),o.beginPath(),o.fillStyle!==e&&(o.fillStyle=e),Xh(o,R),o[E](),o.closePath(),O&&o.restore()):t===Ye.SVG&&(A=Kh(R),h.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",A],["fill",e]]}),O&&(b=h.virtualDom.bb)[b.length-1].props.push(["transform","matrix(".concat(Yh(O,","),")")]))}var al=[qo,Zo,Qo,Jo];function ol(t,e,r){return t[1]===Ph?t[0]:t[1]===Ch?(e-r)*t[0]*.01:0}var sl,hl,ll,cl,ul,_l=function(){t(R,b);var i=e(R);function R(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};g(this,R),r=i.call(this),Array.isArray(e)?r.props=Ue.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];var n=r.__config;return n[fh]=t,n[dh]=r.__cacheStyle,n[ph]=r.__currentStyle,n[vh]=r.__computedStyle,n[bh]=Zh,n[yh]=r.__style,n[Eh]=[],n[wh]=r.__cacheDefs,r}return l(R,[{key:"__structure",value:function(t,e,r){var n=rt(et(R.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(n[uh]=this.__hasMask),this.__config[gh]=n}},{key:"__mp",value:function(n,i,a){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=zo[jo("margin"+t)],r=zo[jo("padding"+t)];i[e]=o.__mpWidth(n[e],a),i[r]=o.__mpWidth(n[r],a)})}},{key:"__mpWidth",value:function(t,e){return t[1]===Ph?t[0]:t[1]===Ch?t[0]*e*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[ts]+r[es],this.__clientHeight=e+=r[rs]+r[ns],this.__offsetWidth=t+=r[hs]+r[us],this.__offsetHeight=e+=r[ls]+r[cs],this.__outerWidth=t+r[is]+r[ss],this.__outerHeight=e+r[as]+r[os]}},{key:"__layout",value:function(t,e,r){sn.computeReflow(this,this.isShadowRoot);var n,i,a,o,s,h,l,c,u,_=t.w,f=this.isDestroyed,d=this.currentStyle,p=this.computedStyle,v=this.__config,y=p[ys],g=d[gs],m=d[vs];if(this.__cancelCache(),this.__layoutData=Bh(t),v[bh]=Zh,v[Oh]=!1,f||"none"===y)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=p[gs]=p[ms]=0,void this.__layoutNone();if(r||this.__mp(d,p,_),g[1]!==Dh)switch(g[1]){case Ph:_=g[0];break;case Ch:_*=.01*g[0]}this.__ox=this.__oy=0,"flex"===y?this.__layoutFlex(t,e):"inline"===y?this.__layoutInline(t,e):this.__layoutBlock(t,e),"relative"===m?(n=d[_s],i=d[fs],a=d[ds],o=d[ps],s=this.parent,n[1]!==Dh?(h=Uh(d,_s,n,s),this.__offsetY(h),p[_s]=h,p[ds]="auto"):a[1]!==Dh?(l=Uh(d,ds,a,s),this.__offsetY(-l),p[ds]=l,p[_s]="auto"):p[_s]=p[ds]="auto",o[1]!==Dh?(c=Uh(d,ps,o,s,!0),this.__offsetX(c),p[ps]=c,p[fs]="auto"):i[1]!==Dh?(u=Uh(d,fs,i,s,!0),this.__offsetX(-u),p[fs]=u,p[ps]="auto"):p[ps]=p[fs]="auto"):"absolute"!==d[vs]&&(p[_s]=p[ds]=p[ps]=p[fs]="auto"),this.__sx=this.x+this.ox,this.__sy=this.y+this.oy;var E=p[gs]=this.width,T=p[ms]=this.height;e&&this.__ioSize(E,T);var O=this.next;if(!this.isMask&&O&&O.isMask){for(var M=0;O&&O.isMask;)M++,O=O.next;this.__hasMask=M}var A,b=this.__animateRecords;b&&(this.__animateRecords=null,b.list.forEach(function(t){t.target.vd instanceof R&&(t.target=t.target.vd)}),A=b.controller||this.root.animateController,b.options&&!1===b.options.autoPlay?A.__records=A.__records.concat(b.list):(A.__auto=A.__auto.concat(b.list),A.__playAuto()))}},{key:"__layoutNone",value:function(){this.computedStyle[ys]="none"}},{key:"__preLayout",value:function(t){var e=t.x,r=t.y,n=t.w,i=t.h,a=t.w2,o=t.h2;this.__x=e,this.__y=r;var s,h,l=this.currentStyle,c=this.computedStyle,u=l[gs],_=l[ms],f=c[ls],d=c[us],p=c[cs],v=c[hs],y=c[as],g=c[ss],m=c[os],E=c[is],T=c[rs],O=c[es],M=c[ns],A=c[ts];if(void 0!==a)s=!0,n=a;else if(u[1]!==Dh)switch(s=!0,u[1]){case Ph:n=u[0];break;case Ch:n*=.01*u[0]}if(void 0!==o)h=!0,i=o;else if(_[1]!==Dh)switch(h=!0,_[1]){case Ph:i=_[0];break;case Ch:i*=.01*_[0]}return e+=v+E+A,t.x=e,r+=f+y+T,t.y=r,u[1]===Dh&&(n-=v+d+E+g+A+O),_[1]===Dh&&(i-=f+p+y+m+T+M),{fixedWidth:s,fixedHeight:h,x:e,y:r,w:n,h:i}}},{key:"__marginAuto",value:function(t,e){var r,n=t[vs],i=t[is],a=t[ss],o=t[gs];"absolute"===n||o===Dh||i[1]!==Dh||a[1]!==Dh||(r=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-r),!0)}},{key:"__calMatrix",value:function(t,e,n,i,r,a,o,s){var h,l,c,u,_,f,d,p=e[Es];return p&&t<Zh&&!Vh(t,qh)?(u=l=0,Vh(t,Qh)&&(h=n[Ts],l=(h=Wh(h)?0:h[1]===Ch?h[0]*this.outerWidth*.01:h[0])-(i[Ts]||0),i[Ts]=h,i[Ms][4]+=l,p[4]+=l),Vh(t,tl)&&(c=n[Os],u=(c=Wh(c)?0:c[1]===Ch?c[0]*this.outerHeight*.01:c[0])-(i[Os]||0),i[Os]=c,i[Ms][5]+=u,p[5]+=u),e[Es]=p):(void 0===r&&(r=this.sx,a=this.sy,o=this.outerWidth,s=this.outerHeight),void 0===e[ks]&&(e[ks]=!0,p=null,i[ks]=Jn.calOrigin(n[ks],o,s)),void 0!==e[Ms]&&void 0!==e[Ts]&&void 0!==e[Os]&&void 0!==e[Rs]&&void 0!==e[As]&&void 0!==e[bs]&&void 0!==e[xs]&&void 0!==e[Ss]||(e[Ms]=e[Ts]=e[Os]=e[Rs]=e[As]=e[bs]=e[xs]=e[Ss]=!0,p=null,n[Ms]?_=Jn.calMatrix(n[Ms],o,s):(f=[],[Ts,Os,Rs,xs,Ss,As,bs].forEach(function(t){delete i[t];var e,r=n[t];Wh(r)||(i[t]=r[0],e=t===As||t===bs,1===r[0]&&e||!e&&0===r[0]||(r[1]===Ch&&(t===Ts?i[t]=r[0]*o*.01:t===Os&&(i[t]=r[0]*s*.01)),f.push([t,r])))}),f.length&&(_=Jn.calMatrix(f,o,s))),i[Ms]=_||[1,0,0,1,0,0]),p||((d=i[ks].slice(0))[0]+=r||0,d[1]+=a||0,p=e[Es]=Jn.calMatrixByOrigin(i[Ms],d))),p}},{key:"__calCache",value:function(t,e,r,n,i,_,a,f,o,s,h,l,c,u,d,p,v,y,g,m,E,T,O,M,A,b,R,x,S,k){var I,N,w,D,P,C,L,F,B,H,G,Y,W,U,X,K,z,V,j=this;this.__calMatrix(e,_,a,f,o,s,c,u),Jh<=e?(void 0===_[Is]&&(_[Is]=!0,I=a[Is],f[Is]=I[1]===Ph?I[0]:I[0]+"%"),void 0===_[Ns]&&(_[Ns]=!0,N=a[Ns],f[Ns]=N[1]===Ph?N[0]:N[0]+"%"),void 0===_[ws]&&(_[ws]=!0,f[ws]=(X=a[ws],K=h,z=l,V=[],X.forEach(function(t,e){t[1]===Ph?V.push(t[0]):t[1]===Ch?V.push(t[0]*(e?z:K)*.01):t[1]===Dh?V.push(-1):t[1]===Lh&&V.push("contain"===t[0]?-2:-3)}),V)),void 0===_[Ps]&&(w=f[Ps]=a[Ps],Ue.isString(w)?(_[Ps]=!0,D=this.__loadBgi,(P=Ke.IMG[Ps])&&P.state===Ke.LOADED?(D.url=Ps,D.source=P.source,D.width=P.width,D.height=P.height):D.url!==w&&(D.url=w,D.source=null,Ke.measureImg(w,function(t){var e,r;t.success&&t.url===D.url&&!j.isDestroyed&&(D.source=t.source,D.width=t.width,D.height=t.height,(r=(e=j).root).delRefreshTask(D.cb),r.addRefreshTask(D.cb={__before:function(){_[Ps]=void 0;var t={};t[ah]=e,t[oh]=Jh,t[ch]=e.__config,r.__addUpdate(e,e.__config,r,r.__config,t)}}))},{width:h,height:l}))):w&&w.k&&(_[Ps]=this.__gradient(t,r,n,M,x,A,S,h,l,w))),void 0===_[Ls]&&(_[Ls]=!0,f[Ls]=a[Ls]),[Fs,Bs,Hs,Gs,Ys,Ws,Cs,Us,Xs,Ks].forEach(function(t){f[t]=a[t]}),[Ds,zs,$s,Vs,js].forEach(function(t){void 0===_[t]&&(_[t]=Hh(f[t]=a[t][0]))}),void 0!==_[qo]&&void 0!==_[Zo]&&void 0!==_[Qo]&&void 0!==_[Jo]||(_[qo]=_[Zo]=_[Qo]=_[Jo]=!0,H=c,G=u,Y=a,W=f,U=!0,al.forEach(function(t){W[t]=Y[t].map(function(t,e){return 0<t[0]?(U=!1,t[1]===Ph?Math.max(0,t[0]):Math.max(0,t[0]*(e?G:H)*.01)):0})}),U||al.forEach(function(t,e){var r,n=e%2==0?0:1,i=n?G:H,a=W[t],o=W[al[(e+1)%4]];a[n]+o[n]>i&&(r=.5*i,a[n]>=r&&o[n]>=r?a[n]=o[n]=r:a[n]>r?a[n]=i-o[n]:o[n]>r&&(o[n]=i-a[n]))})),C=f[qo],L=f[Zo],F=f[Qo],B=f[Jo],["Top","Right","Bottom","Left"].forEach(function(t){var e,r,n,i,a,o,s,h,l=zo[jo(t="border"+t)],c=zo[jo(t+"Width")],u=zo[jo(t+"Style")];void 0===_[c]&&(_[c]=!0,_[l]=void 0),void 0===_[u]&&(_[u]=!0,_[l]=void 0),void 0===_[l]&&(l===th?0<d?(e=Math.atan(d/y),r=Math.atan(d/p),_[l]=pi.calPoints(d,f[u],e,r,O,M,A,b,R,x,S,k,0,C,L)):_[l]=[]:l===eh?0<p?(n=Math.atan(p/d),i=Math.atan(p/v),_[l]=pi.calPoints(p,f[u],n,i,O,M,A,b,R,x,S,k,1,L,F)):_[l]=[]:l===rh?0<v?(a=Math.atan(v/y),o=Math.atan(v/p),_[l]=pi.calPoints(v,f[u],a,o,O,M,A,b,R,x,S,k,2,B,F)):_[l]=[]:l===nh&&(0<y?(s=Math.atan(y/d),h=Math.atan(y/v),_[l]=pi.calPoints(y,f[u],s,h,O,M,A,b,R,x,S,k,3,C,B)):_[l]=[]))})):(Vh(e,el)&&(f[Fs]=a[Fs]),Vh(e,rl)&&(f[Us]=a[Us]));var $=i&&i.computedStyle;if(a[qs][1]===Fh?f[qs]=i?$[qs]:"normal":_[qs]||(f[qs]=a[qs][0]),_[qs]=f[qs],a[Zs][1]===Fh?(f[Zs]=i?$[Zs]:[0,0,0,1],_[Zs]=Hh(f[Zs])):_[Zs]||(f[Zs]=Gh(a[Zs][0]),_[Zs]=Hh(f[Zs])),a[Js][1]===Fh?f[Js]=i?$[Js]:"visible":_[Js]||(f[Js]=a[Js][0]),_[Js]=f[Js],a[Qs][1]===Fh?f[Qs]=i?$[Qs]:"auto":_[Qs]||(f[Qs]=a[Qs][0]),_[Qs]=f[Qs],t===Ye.CANVAS){if(e<Jh)return this.__hasContent;if("hidden"!==f[Js]){var q=f[Ps];if(q){if(q.k)return!0;var Z=this.__loadBgi;if(q===Z.url&&Z.source)return!0}if(0<f[Ds][3]){var J=f[gs],Q=f[ms],tt=f[rs],et=f[es],rt=f[ns],nt=f[ts];if(J&&Q||tt||et||rt||nt)return!0}for(var it=["Top","Right","Bottom","Left"],at=0,ot=it.length;at<ot;at++){var st=it[at];if(0<f[zo[jo("border"+st+"Width")]]&&0<f[zo[jo("border"+st+"Color")]][3])return!0}var ht=f[Ls];if(Array.isArray(ht))for(var lt=0,ct=ht.length;lt<ct;lt++){var ut=ht[lt];if(ut&&(0<ut[2]||0<ut[3]))return!0}for(var _t=0,ft=al.length;_t<ft;_t++){var dt=f[al[_t]];if(0<dt[0]&&0<dt[1])return!0}}}return!1}},{key:"__renderSelf",value:function(c,u,_,f,d){var p,n=this,t=this.isDestroyed,e=this.currentStyle,r=this.computedStyle,i=this.__cacheStyle,v=this.root,y=this.__config,a=y[Rh];if(this.__renderSelfData=null,y[bh]=jh,t)return{isDestroyed:t,break:!0};if(c===Ye.SVG&&(p=this.__virtualDom={bb:[],children:[],visibility:"visible"},y[xh]?y[xh].available||(y[xh].available=!0):y[xh]={available:!0,release:function(){this.available=!1,delete p.cache}}),"none"===r[ys])return{break:!0};var o=this.sx,s=this.sy,h=this.width,l=this.height,g=this.clientWidth,m=this.clientHeight,E=this.outerWidth,T=this.outerHeight,O=this.__hasMask,M=r[as],A=r[is],b=r[rs],R=r[es],x=r[ns],S=r[ts],k=r[hs],I=r[us],N=r[ls],w=r[cs],D=this.__sx1=o+A,P=this.__sx2=D+k,C=this.__sx3=P+h+S+R,L=this.__sx4=C+I,F=this.__sy1=s+M,B=this.__sy2=F+N,H=this.__sy3=B+l+b+x,G=this.__sy4=H+w,Y={x1:D,x2:P,x3:C,x4:L,y1:F,y2:B,y3:H,y4:G},W=this.domParent,U=this.__hasContent=y[Ah]=this.__calCache(c,u,_,f,this.parent,i,e,r,o,s,g,m,E,T,N,I,w,k,b,R,x,S,D,P,C,L,F,B,H,G),X=r[Ds],K=r[zs],z=r[$s],V=r[Vs],j=r[js],$=r[qo],q=r[Zo],Z=r[Qo],J=r[Jo],Q=r[Js],tt=r[Cs],et=r[Ps],rt=r[Fs],nt=r[Us],it=r[ws],at=r[Ls],ot=r[Xs],st=r[Ks];c===Ye.CANVAS?(W&&(rt*=W.__config[mh]),y[mh]=rt):c===Ye.SVG&&(1===rt?delete p.opacity:p.opacity=rt,"normal"!==st?p.mixBlendMode=st:delete p.mixBlendMode);var ht=this.__matrix=y[Th]=i[Es],lt=this.__renderMatrix=ht;W&&(ht=We.multiply(W.matrixEvent,ht));var ct=this.__matrixEvent=y[Eh];if(ct[0]=ht[0],ct[1]=ht[1],ct[2]=ht[2],ct[3]=ht[3],ct[4]=ht[4],ct[5]=ht[5],c===Ye.SVG&&(!Vh(u,$h)&&u<Jh||(We.isE(lt)?delete p.transform:p.transform="matrix("+Yh(lt,",")+")")),"hidden"===Q&&c===Ye.CANVAS)return Y.break=!0,Y;c===Ye.SVG&&(p.visibility=Q);var ut,_t,ft,dt,pt,vt,yt,gt,mt,Et,Tt,Ot,Mt,At,bt,Rt,xt,St,kt,It,Nt,wt,Dt,Pt,Ct,Lt,Ft,Bt,Ht,Gt,Yt,Wt,Ut,Xt,Kt,zt,Vt,jt,$t,qt,Zt,Jt,Qt,te=0,ee=0;if(d&&c===Ye.CANVAS){if(!U&&this.__releaseWhenEmpty(a))return Y.break=!0,y[Oh]=!1,Y;if(y[Oh]||a&&a.available||(ut=this.bbox,a?a.reset(ut):a=Ko.getInstance(ut),a&&a.enabled?(a.__bbox=ut,a.__appendData(D,F),_t=a.dbx,ft=a.dby,_=a.ctx,pt=(dt=Ge(a.coords,2))[0],vt=dt[1],te=a.dx,ee=a.dy,Y.x1=D=pt+_t,Y.y1=F=vt+ft,te&&(Y.x2=P+=te,Y.x3=C+=te,Y.x4=L+=te),ee&&(Y.y2=B+=ee,Y.y3=H+=ee,Y.y4=G+=ee)):(y[Oh]=!0,a=null)),y[Rh]=a,y[Oh])return{limitCache:!0}}if(y[Mh]=0,Array.isArray(nt)&&nt.forEach(function(t){var e,r,n,i,a,o,s=Ge(t,2),h=s[0],l=s[1];"blur"===h&&(y[Mh]=l,c===Ye.CANVAS&&0<l&&!d?(e=v.width,r=v.height,(n=Ke.getCacheCanvas(e,r)).ctx&&(yt={ctx:_,blur:l,target:n,matrix:ht},_=n.ctx)):c===Ye.SVG&&(Zh<=u||Vh(u,rl))&&(0<l?(a={tagName:"filter",props:[["x",-(i=We.int2convolution(l))/E],["y",-i/T],["width",1+2*i/E],["height",1+2*i/T]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",l]]}]},o=f.add(a),y[wh].push(a),p.filter="url(#"+o+")"):delete p.filter))}),O&&(c!==Ye.CANVAS||d||(yt?gt=yt:(mt=v.width,Et=v.height,(Tt=Ke.getCacheCanvas(mt,Et)).ctx&&(gt={ctx:_,target:Tt,matrix:ht},_=Tt.ctx)))),"hidden"===ot?c!==Ye.CANVAS||d?c===Ye.SVG&&(Mt={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(o,",").concat(s,"L").concat(o+E,",").concat(s,"L").concat(o+E,",").concat(s+T,"L").concat(o,",").concat(s+T,",L").concat(o,",").concat(s)]]}]},At=f.add(Mt),y[wh].push(Mt),p.overflow="url(#"+At+")"):(yt||gt?Ot=yt||gt:(bt=v.width,Rt=v.height,(xt=Ke.getCacheCanvas(bt,Rt)).ctx&&(Ot={ctx:_,target:xt,matrix:ht},_=xt.ctx)),Ot.x=o,Ot.y=s,Ot.outerWidth=E,Ot.outerHeight=T):c===Ye.SVG&&delete p.overflow,"normal"===st||d||(yt||gt||Ot?Nt=yt||gt||Ot:(St=v.width,kt=v.height,It=Ke.getCacheCanvas(St,kt),Nt={ctx:_,target:It,mixBlendMode:st,matrix:ht},_=It.ctx)),c!==Ye.CANVAS||d||(_.globalAlpha=rt,_.setTransform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5])),0<X[3]&&il(c,i[Ds],P,B,g,m,_,f,this,N,I,w,k,$,q,Z,J),et)if(Ue.isString(et)){var re=this.__loadBgi;if(re.url===et){var ne=re.source;if(ne){var ie=re.width,ae=re.height,oe=Ge(it,2),se=oe[0],he=oe[1];-1===se&&-1===he?(se=ie,he=ae):-2===se?g<ie&&m<ae?(he=ae/m)<=(se=ie/g)?he=(se=g)*ae/ie:se=(he=m)*ie/ae:g<ie?he=(se=g)*ae/ie:m<ae?se=(he=m)*ie/ae:(se=ie,he=ae):-3===se?ie<g&&ae<m?(se=ie/g)<=(he=ae/m)?he=(se=g)*ae/ie:se=(he=m)*ie/ae:ie<g||!(ae<m)&&(se=ie/g)<=(he=ae/m)?he=(se=g)*ae/ie:se=(he=m)*ie/ae:-1===se?se=he*ie/ae:-1===he&&(he=se*ae/ie);var le,ce,ue=P+ol(e[Is],g,se),_e=B+ol(e[Ns],m,he),fe=ue<P||_e<B||g<se||m<he,de=0,pe=0,ve=0,ye=0;-1<["repeat-x","repeat"].indexOf(tt)&&(0<(le=ue-P)&&(de=Math.ceil(le/se)),0<(le=P+g-ue-se)&&(pe=Math.ceil(le/se))),-1<["repeat-y","repeat"].indexOf(tt)&&(0<(ce=_e-B)&&(ve=Math.ceil(ce/he)),0<(ce=B+m-_e-he)&&(ye=Math.ceil(ce/he)));var ge,me,Ee,Te,Oe,Me=[];if(0<de)for(var Ae=0;Ae<de;Ae++){var be=ue-(Ae+1)*se;Me.push([be,_e]),!fe&&0===Ae&&be<P&&(fe=!0)}if(0<pe)for(var Re=0;Re<pe;Re++){var xe=ue+(Re+1)*se;Me.push([xe,_e]),!fe&&Re===pe-1&&P+g<xe+se&&(fe=!0)}if(0<ve)for(var Se=0;Se<ve;Se++){var ke=_e-(Se+1)*he;Me.push([ue,ke]),!fe&&0===Se&&ke<B&&(fe=!0)}if(0<ye)for(var Ie=0;Ie<ye;Ie++){var Ne=_e+(Ie+1)*he;Me.push([ue,Ne]),!fe&&Ie===ye-1&&B+m<Ne+se&&(fe=!0)}if(0<de&&0<ve)for(var we=0;we<de;we++)for(var De=0;De<ve;De++)Me.push([ue-(we+1)*se,_e-(De+1)*he]);if(0<pe&&0<ve)for(var Pe=0;Pe<pe;Pe++)for(var Ce=0;Ce<ve;Ce++)Me.push([ue+(Pe+1)*se,_e-(Ce+1)*he]);if(0<de&&0<ye)for(var Le=0;Le<de;Le++)for(var Fe=0;Fe<ye;Fe++)Me.push([ue-(Le+1)*se,_e+(Fe+1)*he]);if(0<pe&&0<ye)for(var Be=0;Be<pe;Be++)for(var He=0;He<ye;He++)Me.push([ue+(Be+1)*se,_e+(He+1)*he]);c===Ye.CANVAS?(fe&&(_.save(),il(c,"#FFF",P,B,g,m,_,f,this,N,I,w,k,$,q,Z,J,"clip")),_.drawImage(ne,ue,_e,se,he),Me.forEach(function(t){_.drawImage(ne,t[0],t[1],se,he)}),fe&&_.restore()):c===Ye.SVG&&(ge=Ti.matrixResize(ie,ae,se,he,ue,_e,g,m),me=[["xlink:href",et],["x",ue],["y",_e],["width",ie],["height",ae]],ge&&!We.isE(ge)&&(Ee=!0,me.push(["transform","matrix("+Yh(ge,",")+")"])),fe&&(Te={tagName:"clipPath",children:[{tagName:"rect",props:[["x",P],["y",B],["width",g],["height",m],["fill","#FFF"]]}]},Oe=f.add(Te),y[wh].push(Te),this.virtualDom.bbClip="url(#"+Oe+")"),this.virtualDom.bb.push({type:"img",tagName:"image",props:me}),Me.forEach(function(t){var e,r=Bh(me);!Ee||(e=Ti.matrixResize(ie,ae,se,he,t[0],t[1],g,m))&&!We.isE(e)&&(r[5][1]="matrix("+Yh(e,",")+")"),r[1][1]=t[0],r[2][1]=t[1],n.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}else{!et.k||(wt=i[Ps])&&("conic"===wt.k?(Dt=c,Pt=wt.v,Ct=P,Lt=B,Ft=g,Bt=m,Ht=_,Gt=f,Yt=this,Wt=N,Ut=I,Xt=w,Kt=k,zt=$,Vt=q,jt=Z,$t=J,Qt=(Qt=pi.calRadius(Ct,Lt,Ft,Bt,Wt,Ut,Xt,Kt,zt,Vt,jt,$t))||[[Ct,Lt],[Ct+Ft,Lt],[Ct+Ft,Lt+Bt],[Ct,Lt+Bt],[Ct,Lt]],Dt===Ye.CANVAS?(qt=Ht.globalAlpha,Ht.globalAlpha=.5*qt,Ht.save(),Ht.beginPath(),Xh(Ht,Qt),Ht.clip(),Ht.closePath(),Pt.forEach(function(t){Ht.beginPath(),Xh(Ht,t[0]),Ht.fillStyle=t[1],Ht.fill(),Ht.closePath()}),Ht.restore(),Ht.globalAlpha=qt):Dt===Ye.SVG&&(Zt={tagName:"clipPath",children:[{tagName:"path",props:[["d",Kh(Qt)],["fill","#FFF"]]}]},Yt.__config[wh].push(Zt),Jt=Gt.add(Zt),Pt.forEach(function(t){Yt.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Kh(t[0])],["fill",t[1]],["clip-path","url(#"+Jt+")"]]})}))):il(c,wt.v,P,B,g,m,_,f,this,N,I,w,k,$,q,Z,J))}return at&&at.forEach(function(t){!function(t,e,r,n,i,a,o,s,h,l,c){var u=Ge(n,6),_=u[0],f=u[1],d=u[2],p=u[3],v=u[4],y=u[5],g=Hh(v),m=2*Math.abs(d)+2*Math.abs(p)+2*Math.abs(_)+2*Math.abs(f),E=[[a,o],[s,o],[s,h],[a,h],[a,o]],T=[[a-m,o-m],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m]];if(0<v[3]&&(0<d||0<p))if(t===Ye.CANVAS){if(e.save(),e.beginPath(),"inset"===y){var O=a+_+p,M=o+f+p,A=s+_-p,b=h+f-p,R=[[O,M],[A,M],[A,b],[O,b]],x=Xe.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[R[0][0],R[0][1],R[2][0],R[2][1]]);if(!x)return;x=[[x[0],x[1]],[x[2],x[1]],[x[2],x[3]],[x[0],x[3]],[x[0],x[1]]],p?(Xh(e,x),Xh(e,E.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Xh(e,E),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),Xh(e,x),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Xh(e,[[O,M],[A,M],[A,b],[a-m,b],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,b],[O,b],[O,M]])):(Xh(e,E),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Xh(e,[[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]]))}else{var S=a+_-p,k=o+f-p,I=s+_+p,N=h+f+p,w=[[S,k],[I,k],[I,N],[S,N]],D=Xe.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[w[0][0],w[0][1],w[2][0],w[2][1]]);p?(Xh(e,E),Xh(e,w.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Xh(e,w),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),D&&Xh(e,[[D[0],D[1]],[D[2],D[1]],[D[2],D[3]],[D[0],D[3]],[D[0],D[1]]].reverse()),Xh(e,E),Xh(e,w),Xh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Xh(e,w)):(Xh(e,E),Xh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Xh(e,E))}e.fill(),e.closePath(),e.restore()}else if(t===Ye.SVG){var P=We.int2convolution(d);if("inset"===y){var C,L,F,B,H,G,Y=a+_+p,W=o+f+p,U=s+_-p,X=h+f-p,K=[[Y,W],[U,W],[U,X],[Y,X]],z=Xe.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[K[0][0],K[0][1],K[2][0],K[2][1]]);if(!z)return;z=[[z[0],z[1]],[z[2],z[1]],[z[2],z[3]],[z[0],z[3]],[z[0],z[1]]],p?(C={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},i.__config[wh].push(C),L=r.add(C),F=r.add({tagName:"clipPath",children:[{tagName:"path",props:[["d",Kh(z)+Kh(E.slice(0).reverse())],["fill","#FFF"]]}]}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Kh(E)],["fill",g],["clip-path","url(#"+F+")"]]}),C={tagName:"clipPath",children:[{tagName:"path",props:[["d",Kh(z)],["fill","#FFF"]]}]},F=r.add(C),i.__config[wh].push(C),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Kh([[Y,W],[U,W],[U,X],[a-m,X],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,X],[Y,X],[Y,W]])],["fill","#FFF"],["filter","url(#"+L+")"],["clip-path","url(#"+F+")"]]})):(B={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},H=r.add(B),i.__config[wh].push(B),B={tagName:"clipPath",children:[{tagName:"path",props:[["d",Kh(E)],["fill","#FFF"]]}]},G=r.add(B),i.__config[wh].push(B),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Kh([[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]])],["fill","#FFF"],["filter","url(#"+H+")"],["clip-path","url(#"+G+")"]]}))}else{var V,j,$,q,Z,J,Q=a+_-p,tt=o+f-p,et=s+_+p,rt=h+f+p,nt=[[Q,tt],[et,tt],[et,rt],[Q,rt]],it=Xe.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[nt[0][0],nt[0][1],nt[2][0],nt[2][1]]);p?(V={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},j=r.add(V),i.__config[wh].push(V),V={tagName:"clipPath",children:[{tagName:"path",props:[["d",Kh(E)+Kh(nt.slice(0).reverse())],["fill","#FFF"]]}]},$=r.add(V),i.__config[wh].push(V),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Kh(nt)],["fill",g],["clip-path","url(#"+$+")"]]}),V={tagName:"clipPath",children:[{tagName:"path",props:[["d",(it?Kh([[it[0],it[1]],[it[2],it[1]],[it[2],it[3]],[it[0],it[3]],[it[0],it[1]]].reverse()):"")+Kh(E)+Kh(nt)+Kh(T)],["fill","#FFF"]]}]},$=r.add(V),i.__config[wh].push(V),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Kh(nt)],["fill","#FFF"],["filter","url(#"+j+")"],["clip-path","url(#"+$+")"]]})):(q={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},Z=r.add(q),i.__config[wh].push(q),q={tagName:"clipPath",children:[{tagName:"path",props:[["d",Kh(E)+Kh(T)],["fill","#FFF"]]}]},J=r.add(q),i.__config[wh].push(q),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Kh(E)],["fill","#FFF"],["filter","url(#"+Z+")"],["clip-path","url(#"+J+")"]]}))}}}(c,_,f,t,n,D,F,L,G,E,T)}),0<N&&0<K[3]&&nl(c,i[th],i[zs],_,this,te,ee),0<I&&0<z[3]&&nl(c,i[eh],i[$s],_,this,te,ee),0<w&&0<V[3]&&nl(c,i[rh],i[Vs],_,this,te,ee),0<k&&0<j[3]&&nl(c,i[nh],i[js],_,this,te,ee),a&&a.enabled&&(a.__available=!0),c!==Ye.CANVAS||d||(Y.offScreenFilter=yt,Y.offScreenMask=gt,Y.offScreenOverflow=Ot,Y.offScreenBlend=Nt),Y}},{key:"render",value:function(t,e,r,n,i){return this.__renderSelf(t,e,r,n,i)}},{key:"__destroy",value:function(){var t,e,r,n;this.isDestroyed||(rt(et(R.prototype),"__destroy",this).call(this),t=this.host,e=this.root,!(r=this.props.ref)||(n=t||e)&&n.ref[r]&&n.ref[r]===this&&delete n.ref[r],this.animationList.forEach(function(t){return t.__destroy()}),e.delRefreshTask(this.__loadBgi.cb),e.delRefreshTask(this.__task),this.__matrix=this.__matrixEvent=this.__root=null,this.__cancelCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[ys]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener;return o.hasOwnProperty(a)&&(i=o[a]),e?(t.target=this,Ue.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):this.willResponseEvent(t)?(Ue.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,r=t.y,n=this.__sx1,i=this.__sy1,a=this.offsetWidth,o=this.offsetHeight,s=this.matrixEvent;if("none"!==this.computedStyle[Qs])return Jn.pointInQuadrilateral(e,r,n,i,n+a,i,n+a,i+o,n,i+o,s)?(t.target||(t.target=this,"touchstart"===t.event.type&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,n,i,a,o,s,h,l){var c,u,_,f,d,p,v=l.k,y=l.v,g=l.d,m=l.s,E=l.z,T=l.p,O=n+.5*s,M=i+.5*h,A={k:v};return"linear"===v?(c=bt.getLinear(y,g,n,i,O,M,s,h),A.v=this.__getLg(t,e,r,c)):"radial"===v?(u=bt.getRadial(y,m,E,T,n,i,a,o))&&(A.v=this.__getRg(t,e,r,u),u.matrix&&(A.v=[A.v,u.matrix,u.cx,u.cy])):"conic"===v&&(_=this.bbox,f=Math.max(Math.abs(_[2]-_[0]),Math.abs(_[3]-_[1])),d=Math.max(Math.abs(a-n),Math.abs(o-i)),p=bt.getConic(y,g,T,n,i,a,o,f/d),A.v=this.__getCg(t,e,r,p)),A}},{key:"__getLg",value:function(t,e,r,n){if(t===Ye.CANVAS){var i=e.createLinearGradient(n.x1,n.y1,n.x2,n.y2);return n.stop.forEach(function(t){i.addColorStop(t[1],Hh(t[0]))}),i}if(t===Ye.SVG){var a={tagName:"linearGradient",props:[["x1",n.x1],["y1",n.y1],["x2",n.x2],["y2",n.y2]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Hh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[wh].push(a),"url(#"+o+")"}}},{key:"__getRg",value:function(t,e,r,n){if(t===Ye.CANVAS){var i=e.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.r);return n.stop.forEach(function(t){i.addColorStop(t[1],Hh(t[0]))}),i}if(t===Ye.SVG){var a={tagName:"radialGradient",props:[["cx",n.cx],["cy",n.cy],["r",n.r]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Hh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[wh].push(a),"url(#"+o+")"}}},{key:"__getCg",value:function(t,e,r,n){var i=n.cx,a=n.cy,o=n.r,s=n.deg,h=n.stop,l=h.length-1;h[l][1]<1&&h.push([h[l][0].slice(0),1]),0<h[0][1]&&h.unshift([h[0][0].slice(0),0]);for(var c=t===Ye.CANVAS?1.5:.5,u=[],_=0,f=h.length;_<f-1;_++)for(var d=360*h[_][1],p=360*h[_+1][1]-d,v=Math.ceil(p),y=p/v,g=h[_][0],m=h[_+1][0],E=[m[0]-g[0],m[1]-g[1],m[2]-g[2],m[3]-g[3]],T=[E[0]/v,E[1]/v,E[2]/v,E[3]/v],O=0;O<v;O++){var M=Ge(Xe.pointOnCircle(i,a,o,d+y*O+s-c),2),A=M[0],b=M[1],R=Ge(Xe.pointOnCircle(i,a,o,d+y*O+s+c),2),x=R[0],S=R[1];u.push([A,b,x,S,Math.round(g[0]+T[0]*O),Math.round(g[1]+T[1]*O),Math.round(g[2]+T[2]*O),Math.round(g[3]+T[3]*O)])}var k=u[0].slice(0),I=Ge(Xe.pointOnCircle(i,a,o,s),2),N=I[0],w=I[1];k[2]=N,k[3]=w;var D=h[h.length-1][0];k[4]=D[0],k[5]=D[1],k[6]=D[2],k[7]=D[3],u.push(k);var P,C=[];if(t===Ye.CANVAS)for(var L=0,F=u.length;L<F;L++){var B,H=u[L];P&&((B=e.createLinearGradient(P[0],P[1],H[2],H[3])).addColorStop(0,Hh([P[4],P[5],P[6],P[7]])),B.addColorStop(1,Hh([H[4],H[5],H[6],H[7]])),C.push([[[i,a],[P[0],P[1]],[H[2],H[3]]],B])),P=H}else if(t===Ye.SVG)for(var G=0,Y=u.length;G<Y;G++){var W,U,X=u[G];P&&(W={tagName:"linearGradient",props:[["x1",P[0]],["y1",P[1]],["x2",X[2]],["y2",X[3]]],children:[{tagName:"stop",props:[["stop-color",Hh([P[4],P[5],P[6],P[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",Hh([X[4],X[5],X[6],X[7]])],["offset","100%"]]}]},U=r.add(W),this.__config[wh].push(W),C.push([[[i,a],[P[0],P[1]],[X[2],X[3]]],"url(#"+U+")"])),P=X}return C}},{key:"__cancelCache",value:function(){var t=this.__config;t[dh]=this.__cacheStyle={};var e=t[Rh],r=t[xh],n=t[Sh],i=t[kh],a=t[Ih];e&&e.release(),r&&r.release(),n&&(Ke.releaseCacheCanvas(n.canvas),t[Sh]=null),i&&(Ke.releaseCacheCanvas(i.canvas),t[kh]=null),a&&(Ke.releaseCacheCanvas(a.canvas),t[Ih]=null)}},{key:"cancelCache",value:function(){this.__cancelCache();for(var t=this.domParent;t;)t.__cancelCache(),t=t.domParent}},{key:"updateStyle",value:function(e,r){var n=this,i=n.root,a=n.__config,o=sn.normalize(e);i?i.addRefreshTask(n.__task={__before:function(){var t;a[Nh]||((t={})[ah]=n,t[sh]=o,t[hh]=e,t[lh]=Object.keys(o).map(function(t){return zh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[ch]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){Ue.isFunction(r)&&r.call(n,t)}}):(Object.assign(this.currentStyle,o),Ue.isFunction(r)&&r.call(n,0))}},{key:"updateFormatStyleNoOverwrite",value:function(e,r){var n,i=this.root,a=this.__config;i&&(n=this,i.addRefreshTask(n.__task={__before:function(){var t;a[Nh]||((t={})[ah]=n,t[sh]=e,t[lh]=Object.keys(e).map(function(t){return zh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[ch]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){Ue.isFunction(r)&&r.call(n,t)}}))}},{key:"animate",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{};if(!this.isDestroyed){var n=new To(this,t,r);return this.animationList.push(n),!1===r.autoPlay?n:n.play()}}},{key:"removeAnimate",value:function(t){var e;t instanceof To&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"__computeMeasure",value:function(t,e,r,n){sn.computeMeasure(this,r),Ue.isFunction(n)&&n(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){rt(et(R.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t),void 0!==r&&(this.__config[bh]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t}},{key:"__offsetY",value:function(t,e,r){rt(et(R.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t),void 0!==r&&(this.__config[bh]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t}},{key:"__resizeX",value:function(t){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,t<0&&(this.__config[Oh]=!1)}},{key:"__resizeY",value:function(t){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,t<0&&(this.__config[Oh]=!1)}},{key:"__spreadByBoxShadowAndFilter",value:function(t,e){var s=0,h=0;if(Array.isArray(t)&&t.forEach(function(t){var e,r=Ge(t,6),n=r[0],i=r[1],a=r[2],o=r[3];"inset"!==r[5]&&(e=We.int2convolution(a),e+=o,s=Math.max(s,n+e),h=Math.max(h,i+e))}),Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i,a=Ge(e[r],2),o=a[0],l=a[1];"blur"===o&&(i=We.int2convolution(l),s=Math.max(s,i),h=Math.max(h,i))}return[s,h]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},n=t?(n=Array.isArray(t)?t:[t]).map(function(t){return zo[jo(t)]}):Object.keys(e);return n.forEach(function(t){zh.hasOwnProperty(t)?r[t]=e[t]:r[Vo[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,n=this.offsetHeight,i=this.matrixEvent,a=We.calPoint([t,e],i),o=We.calPoint([t+r,e],i),s=We.calPoint([t+r,e+n],i),h=We.calPoint([t,e+n],i);return{left:Math.min(a[0],Math.min(o[0],Math.min(s[0],h[0]))),top:Math.min(a[1],Math.min(o[1],Math.min(s[1],h[1]))),right:Math.max(a[0],Math.max(o[0],Math.max(s[0],h[0]))),bottom:Math.max(a[1],Math.max(o[1],Math.max(s[1],h[1]))),points:[a,o,s,h]}}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.clientWidth,n=this.clientHeight,i=this.computedStyle,a=i[ls],o=i[us],s=i[cs],h=i[hs],l=i[Ls],c=i[Us],u=Ge(this.__spreadByBoxShadowAndFilter(l,c),2),_=u[0],f=u[1];return[t-_,e-f,t+(r+=h+o)+_,e+(n+=a+s)+f]}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"renderMatrix",get:function(){return this.__renderMatrix}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}}]),R}(),fl=p.STYLE_KEY.MARGIN_BOTTOM,dl=function(){function r(t,e){g(this,r),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return l(r,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var r=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.outerWidth}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}},{key:"marginBottom",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.computedStyle[fl])}),e}}]),r}(),pl=p.NODE_KEY.NODE_DOM_PARENT,vl=k.TYPE_VD,yl=k.TYPE_GM,gl=k.TYPE_CP;function ml(t,e,r,n,i){if(Array.isArray(t))return t.map(function(t){return ml(t,e,r,n)});if(Ue.isObject(t)&&t.$$type){var a=t.tagName,o=t.props,s=t.children,h=t.klass,l=t.$$type,c=t.inherit,u=t.__animateRecords;if(l===gl&&t.placeholder)return t.value;if(l===vl){if("img"===a){if(_=new ll(a,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else _=new hl(a,o);if("p"===a)i=!0;else if("div"===a&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?Tl(_,ml(s,e,r,n,i)):[],_.__children=s}else if(l===yl)var _=new(cl.getRegister(a))(a,o);else{if(l!==gl)return new An(t);(_=new h(o)).__tagName=_.__tagName||a}t.vd=_,u&&(_.__animateRecords=u).list.forEach(function(t){t.target=_}),c&&Ue.extendAnimate(c,_),_.__root=e,n&&(_.__host=n),l===gl&&_.__init();var f=o.ref;return Ue.isString(f)&&f||Ue.isNumber(f)?r.ref[f]=_:Ue.isFunction(f)&&f(_),_}return new An(t)}function El(t){if(Array.isArray(t))return t.map(El);if(!t||-1===[vl,yl,gl].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,n){if(Array.isArray(t))t.forEach(function(t){e(r,t,n)});else if(!t||t.$$type!==vl&&t.$$type!==yl)t&&t.$$type===gl?(r.push(t),n.lastText=null):Ue.isNil(t)||""===t||(null!==n.lastText?r[r.length-1]=n.lastText+=t:r.push(t));else{if(-1<["canvas","svg"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg");t.$$type===vl&&El(t),r.push(t),n.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}function Tl(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(t)?t.forEach(function(t){Tl(e,t,n)}):(t instanceof sl||t instanceof ul||t instanceof An)&&(t.__parent=e,t.__domParent=e,t instanceof An&&Object.assign(t.__config,e.__config),t.__config&&(t.__config[pl]=e),n.prev&&((n.prev.__next=t).__prev=n.prev),(n.prev=t)instanceof ul&&((r=t.shadowRoot)instanceof An&&(r.__parent=e,Object.assign(r.__config,e.__config)),r.__domParent=e,r.__config&&(r.__config[pl]=e))),t}var Ol={ref:function(t){sl=t.Xom,hl=t.Dom,ll=t.Img,cl=t.Geom,ul=t.Component},initRoot:function(t,e){return Tl(e,ml(El({children:t,$$type:vl}).children,e,e))},initCp:function(t,e,r){if(Ue.isObject(t)){var n=ml(t,e,r,r);return Array.isArray(n)&&Tl(r,n),n}return new An(t)},flattenJson:El,relation:Tl,build:ml},Ml=Ue.isNil,Al=Ue.isFunction,bl=Ue.clone,Rl=Ue.extend;var xl=function(){t(h,Ii);var r=e(h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return g(this,h),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=Ue.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.__state={},t.__isMounted=!1,t}return l(h,[{key:"setState",value:function(t,e){var r=this,n=this;if(Ml(t))t={};else{if(Al(t))return void e.call(n);if(0===Object.keys(t).length)return void(Al(e)&&e.call(n));var i=bl(n.state);t=Rl(i,t)}var a=n.root;a&&n.__isMounted?(a.delRefreshTask(n.__task),this.__task={__before:function(){n.__nextState=t,function t(e){e.__hasUpdate=!0;var r=e.host;r&&t(r)}(r)},__after:function(){Al(e)&&e.call(n)},__state:!0},a.addRefreshTask(n.__task)):Al(e)&&(n.__state=t,e.call(n))}},{key:"__init",value:function(t){var e,r=this,n=this.root,i=t||Ol.flattenJson(this.render()),a=Ol.initCp(i,n,this);if(this.__cd=i,a instanceof An)Ke.warn("Component render() return a text, should not inherit style/event");else if(a instanceof b){var o=sn.normalize(this.props.style),s=Object.keys(o);Rl(a.style,o,s),Rl(a.currentStyle,o,s),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)?(t=t.slice(2).toLowerCase(),a.listener[t]=e):/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))})}else{if(!(a instanceof h))throw new Error("Component render() must return a dom/text: "+this);Ke.warn("Component render() return a component: "+this.tagName+" -> "+a.tagName+", should not inherit style/event")}for((this.__shadow=a).__host=this;a instanceof h;)a=a.shadowRoot;(a.__host=this).__shadowRoot=a,this.__isMounted||(this.__isMounted=!0,e=this.componentDidMount,Al(e)&&n.once(Ii.REFRESH,function(){e.call(r)}))}},{key:"render",value:function(){Ke.warn("Component must implement render()!")}},{key:"__destroy",value:function(){var t;this.isDestroyed||(this.__isDestroyed=!0,t=this.componentWillUnmount,Al(t)&&(t.call(this),this.__isMounted=!1),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__shadow=null,this.__shadowRoot=null,this.__parent=null)}},{key:"__emitEvent",value:function(t){var e=this.shadowRoot;if(!(e instanceof An))return e.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"__computeMeasure",value:function(t,e,r,n){var i=this.shadowRoot;i instanceof An?i.__computeMeasure(t,e):i.__computeMeasure(t,e,!0,n)}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),h}();Object.keys(Oe.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config"]).forEach(function(e){Object.defineProperty(xl.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","__cancelCache","__structure","__modifyStruct","__updateStruct"].forEach(function(e){xl.prototype[e]=function(){var t=this.shadowRoot;if(t&&Al(t[e]))return t[e].apply(t,arguments)}});var Sl={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},kl=p.STYLE_KEY,Il=kl.POSITION,Nl=kl.DISPLAY,wl=kl.FONT_WEIGHT,Dl=kl.MARGIN_LEFT,Pl=kl.MARGIN_TOP,Cl=kl.MARGIN_RIGHT,Ll=kl.MARGIN_BOTTOM,Fl=kl.PADDING_LEFT,Bl=kl.PADDING_BOTTOM,Hl=kl.PADDING_RIGHT,Gl=kl.PADDING_TOP,Yl=kl.BORDER_TOP_WIDTH,Wl=kl.BORDER_BOTTOM_WIDTH,Ul=kl.BORDER_RIGHT_WIDTH,Xl=kl.BORDER_LEFT_WIDTH,Kl=kl.TOP,zl=kl.RIGHT,Vl=kl.BOTTOM,jl=kl.LEFT,$l=kl.WIDTH,ql=kl.HEIGHT,Zl=kl.TEXT_ALIGN,Jl=kl.FLEX_DIRECTION,Ql=kl.FLEX_BASIS,tc=kl.FLEX_SHRINK,ec=kl.FLEX_GROW,rc=kl.ALIGN_SELF,nc=kl.ALIGN_ITEMS,ic=kl.JUSTIFY_CONTENT,ac=kl.Z_INDEX,oc=p.NODE_KEY,sc=oc.NODE_CURRENT_STYLE,hc=oc.NODE_STYLE,lc=oc.NODE_STRUCT,cc=oc.NODE_DOM_PARENT,uc=p.STRUCT_KEY,_c=uc.STRUCT_NUM,fc=uc.STRUCT_LV,dc=uc.STRUCT_TOTAL,pc=uc.STRUCT_CHILD_INDEX,vc=uc.STRUCT_INDEX,yc=R.AUTO,gc=R.PX,mc=R.PERCENT,Ec=sn.calAbsolute,Tc=sn.isRelativeOrAbsolute;Io.REFLOW;function Oc(t){var i,a,o,s=[],h=[],l={},c=!1,u=t.children;u.forEach(function(t,e){var r,n=t;t instanceof xl&&(t=t.shadowRoot),t instanceof _l&&t.isMask?void 0!==o?l[o].push(t):e&&(u[o=e-1].__iIndex=o,l[o]=[t],i=!0):(o=void 0,t instanceof _l&&Tc(t)?(n.__iIndex=e,r=n.__zIndex=t.currentStyle[ac],h.push(n),void 0===a?a=r:c||(r<a&&(c=!0),a=r)):s.push(n))}),c&&h.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__iIndex-e.__iIndex});var e=s.concat(h);if(i)for(var r=e.length-1;0<=r;r--){var n=e[r].__iIndex;l.hasOwnProperty(n)&&e.splice.apply(e,[r+1,0].concat(_(l[n])))}return e}var Mc=function(){t(u,_l);var o=e(u);function u(t,e,r){var n;g(this,u),(n=o.call(this,t,e)).__lineGroups=[];var i=h(n).style;i.display&&{flex:!0,block:!0,inline:!0,none:!0}.hasOwnProperty(i.display)||(Sl.INLINE.hasOwnProperty(n.tagName)?i.display="inline":i.display="block"),!i[wl]&&Sl.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),n.__style=sn.normalize(i,Pt.DOM_ENTRY_SET),n.__currentStyle=Ue.extend({},n.__style),n.__children=r||[];var a=n.__config;return a[sc]=n.__currentStyle,a[hc]=n.__style,n}return l(u,[{key:"__structure",value:function(n,i,t){var e=rt(et(u.prototype),"__structure",this).call(this,n++,i,t),a=[e],r=this.__zIndexChildren=this.__zIndexChildren||Oc(this);r.forEach(function(t,e){var r=t.__structure(n,i+1,e);Array.isArray(r)?(n+=r.length,a=a.concat(r)):(n++,a.push(r))});var o=a.length-1;return e[_c]=r.length,e[dc]=o,a}},{key:"__modifyStruct",value:function(t,e){var r,n=1<arguments.length&&void 0!==e?e:0,i=this.__config,a=i[lc],o=a[dc]||0,s=this.__structure(a[vc],a[fc],a[pc]);(r=t.__structs).splice.apply(r,[a[vc]+n,a[dc]+1].concat(_(s)));var h,l=0;return this!==t&&(l=((a=i[lc])[dc]||0)-o,(h=i[cc].__config[lc])[dc]=h[dc]||0,h[dc]+=l),[a,l]}},{key:"__updateStruct",value:function(t){var e=this.__config[lc],r=e[vc],n=e[dc],i=void 0===n?0:n,a=this.__zIndexChildren=Oc(this);if(1!==a.length){a.forEach(function(t,e){t.__config[lc][pc]=e});for(var o,s,h=[],l=r+1;l<=i;l++){var c=t[l];h.push({child:c,list:t.slice(c[vc],c[vc]+c[dc]+1)}),l+=c[dc]||0}h.sort(function(t,e){var r=t.child[pc]-e.child[pc];return r<0&&(o=!0),r}),o&&(s=[],h.forEach(function(t){s=s.concat(t.list)}),s.forEach(function(t,e){t[vc]=r+e+1}),t.splice.apply(t,[r+1,i].concat(_(s))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,n=this.currentStyle[$l];if(n[1]===gc)return t-n[0];if(n[1]===mc)return t-e*n[0]*.01;for(var i=0;i<r.length;i++){if(t<0)return t;var a=r[i];t-=a instanceof _l||a instanceof xl?a.__tryLayInline(t,e):a.textWidth}return t}},{key:"__offsetX",value:function(e,r,n){rt(et(u.prototype),"__offsetX",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,n)})}},{key:"__offsetY",value:function(e,r,n){rt(et(u.prototype),"__offsetY",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,n)})}},{key:"__calAutoBasis",value:function(a,o,s,t){var e,r,n,i,h=0,l=0,c=0,u=this.flowChildren,_=this.currentStyle,f=_[$l],d=_[ql],p=_[Dl],v=_[Pl],y=_[Cl],g=_[Ll],m=_[Fl],E=_[Gl],T=_[Hl],O=_[Bl],M=_[Yl],A=_[Ul],b=_[Wl],R=_[Xl],x=a?f:d;return x[1]===gc&&(h=c=x[0],t&&(l=h)),u.forEach(function(t){var e,r,n,i;c=t instanceof _l||t instanceof xl&&t.shadowRoot instanceof _l?(r=(e=t.__calAutoBasis(a,o,s,!0)).b,n=e.min,i=e.max,h=Math.max(h,r),l=Math.max(l,n),Math.max(c,i)):a?(l=Math.max(t.charWidth,l),Math.max(t.textWidth,c)):(sn.computeReflow(t),t.__layout({x:0,y:0,w:o,h:s},!0),l=Math.max(l,t.height),Math.max(c,t.height))}),a?(e=this.__calMp(p,o)+this.__calMp(y,o)+this.__calMp(m,o)+this.__calMp(T,o),r=R[0]+A[0]+e,h+=r,c+=r,l+=r):(n=this.__calMp(v,o)+this.__calMp(g,o)+this.__calMp(E,o)+this.__calMp(O,o),i=M[0]+b[0]+n,h+=i,c+=i,l+=i),{b:h,min:l,max:c}}},{key:"__calMp",value:function(t,e){var r=0;return t[1]===gc?r+=t[0]:t[1]===mc&&(t[0]*=.01*e,t[1]=gc,r+=t[0]),r}},{key:"__layoutNone",value:function(){rt(et(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof _l||t instanceof xl&&t.shadowRoot instanceof _l)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(e,r){var t=this.flowChildren,n=this.currentStyle,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[Zl],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new dl(c,u);t.forEach(function(t){t instanceof _l||t instanceof xl&&t.shadowRoot instanceof _l?"inline"===t.currentStyle[Nl]?c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,r&&(d=Math.max(d,p),p=t.outerWidth)):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new dl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.outerWidth,v.add(t),r&&(p+=t.outerWidth)):(v.size&&(a.push(v),v.verticalAlign(),u+=v.height+v.marginBottom,v=new dl(e.x,u),r&&(d=Math.max(d,p),p=0)),t.__layout({x:e.x,y:u,w:_,h:f},r),c=e.x,u+=t.outerHeight,r&&(d=Math.max(d,t.outerWidth),p=0)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,r&&(d=Math.max(d,p),p=t.width)):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new dl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.width,v.add(t),r&&(p+=t.width))}),v.size&&(a.push(v),r?d=Math.max(d,p):v.verticalAlign(),u+=v.height);var y=this.__width=h||!r?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),v.size&&(u+=v.marginBottom),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=_-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)}),r||this.__marginAuto(n,e)}},{key:"__layoutFlex",value:function(t,c){var R=this,e=this.flowChildren,r=this.currentStyle,n=r[Jl],i=r[ic],a=r[nc],o=this.__preLayout(t),s=o.fixedWidth,b=o.fixedHeight,x=o.x,S=o.y,k=o.w,I=o.h;if(s&&c)return this.__width=k,void this.__ioSize(k,this.height);var u=0,N="row"===n,w=[],D=[],P=[],C=[],L=0,F=0,B=0,_=0;if(e.forEach(function(t){if(t instanceof _l||t instanceof xl&&t.shadowRoot instanceof _l){var e=t.__calAutoBasis(!!c||N,k,I),r=e.b,n=e.min,i=e.max;if(c)return void(N?u+=i:u=Math.max(u,i));var a=t.currentStyle,o=t.computedStyle,s=a[ec],h=a[tc],l=a[Ql];w.push(s),D.push(h),L+=s,F+=h,l[1]===yc?(P.push(i),B+=i):l[1]===gc?(o[Ql]=r=l[0],P.push(r),B+=r):l[1]===mc&&(r=o[Ql]=(N?k:I)*l[0]*.01,P.push(r),B+=r),_+=i,C.push(n)}else{if(c)return void(N?u+=t.textWidth:u=Math.max(u,t.textWidth));w.push(0),D.push(1),F+=1,N?(P.push(t.textWidth),B+=t.textWidth,_+=t.textWidth,C.push(t.charWidth)):(t.__layout({x:0,y:0,w:k,h:I},!0),P.push(t.height),B+=t.height,_+=t.height,C.push(t.height))}}),c){var h=this.__width=Math.min(u,k);this.__ioSize(h,this.height)}else{var H=0,G=(N?k:I)<_;e.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M=D[e],A=w[e];n=G?(r=B-(N?k:I),M?P[e]-r*M/F:P[e]):(i=(N?k:I)-B,A?P[e]+i*A/L:P[e]),n=Math.max(n,C[e]),t instanceof _l||t instanceof xl&&t.shadowRoot instanceof _l?(a=t.currentStyle,o=t.computedStyle,s=a[Nl],h=a[Jl],l=a[$l],c=a[ql],"inline"===s&&(a[Nl]=o[Nl]="block"),N?("flex"===s&&"column"===h&&b&&c[1]===yc&&(c[0]=I,c[1]=gc),t.__layout({x:x,y:S,w:n,h:I})):("flex"===s&&"row"===h&&l[1]===yc&&(l[0]=k,l[1]=gc),t.__layout({x:x,y:S,w:k,h:n})),(G&&M||!G&&A)&&(u=o[Yl],_=o[Wl],f=o[Pl],d=o[Ll],p=o[Gl],v=o[Bl],y=o[Ul],g=o[Xl],m=o[Cl],E=o[Dl],T=o[Hl],O=o[Fl],N?(t.__width=n-E-m-O-T-g-y,t.__clientWidth=n-E-m-g-y,R.__offsetWidth=n-E-m,t.__outerWidth=n):(t.__height=n-f-d-p-v-u-_,t.__clientHeight=n-f-d-u-_,R.__offsetHeight=n-f-m,t.__outerHeight=n))):t.__layout({x:x,y:S,w:N?n:k,h:N?I:n}),H=N?(x+=t.outerWidth,Math.max(H,t.outerHeight)):(S+=t.outerHeight,Math.max(H,t.outerWidth))});var l=N?k-x+t.x:I-S+t.y;if(!G&&0===L&&0<l){var f=e.length;if("flex-end"===i)for(var d=0;d<f;d++){var p=e[d];N?p.__offsetX(l,!0):p.__offsetY(l,!0)}else if("center"===i)for(var v=.5*l,y=0;y<f;y++){var g=e[y];N?g.__offsetX(v,!0):g.__offsetY(v,!0)}else if("space-between"===i)for(var m=l/(f-1),E=1;E<f;E++){var T=e[E];N?T.__offsetX(m*E,!0):T.__offsetY(m*E,!0)}else if("space-around"===i)for(var O=l/(f+1),M=0;M<f;M++){var A=e[M];N?A.__offsetX(O*(M+1),!0):A.__offsetY(O*(M+1),!0)}}N?(b&&(H=I),S+=H):s&&(H=k),c||("stretch"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.computedStyle,c=t.currentStyle,u=c[rc],_=c[$l],f=c[ql],d=l[Yl],p=l[Wl],v=l[Pl],y=l[Ll],g=l[Gl],m=l[Bl],E=l[Ul],T=l[Xl],O=l[Cl],M=l[Dl],A=l[Hl],b=l[Fl];N?"flex-start"===u||("center"===u?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===u?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):f[1]===yc&&(n=t.height,i=(t.__height=l[ql]=H-v-y-g-m-d-p)-n,t.__clientHeight+=i,t.__outerHeight+=i)):"flex-start"===u||("center"===u?0!=(a=H-t.outerWidth)&&t.__offsetX(.5*a,!0):"flex-end"===u?0!=(o=H-t.outerWidth)&&t.__offsetX(o,!0):_[1]===yc&&(s=t.width,h=(t.__width=l[$l]=H-M-O-b-A-E-T)-s,t.__clientWidth+=h,R.__offsetWidth+=h,t.__outerWidth+=h))}):"center"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b=t.currentStyle[rc];N?"flex-start"===b||("flex-end"===b?0!=(e=H-t.outerHeight)&&t.__offsetY(e,!0):"stretch"===b?(r=t.computedStyle,n=t.currentStyle[ql],i=r[Yl],a=r[Wl],o=r[Pl],s=r[Ll],h=r[Gl],l=r[Bl],n[1]===yc&&(c=t.height,u=(t.__height=r[ql]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(.5*_,!0)):"flex-start"===b||("flex-end"===b?0!=(f=H-t.outerWidth)&&t.__offsetX(f,!0):"stretch"===b?(d=t.computedStyle,p=t.currentStyle[$l],v=d[Ul],y=d[Xl],g=d[Cl],m=d[Dl],E=d[Hl],T=d[Fl],p[1]===yc&&(O=t.width,M=(t.__width=d[$l]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,R.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerWidth)&&t.__offsetX(.5*A,!0))}):"flex-end"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b=t.currentStyle[rc];N?"flex-start"===b||("center"===b?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"stretch"===b?(r=t.computedStyle,n=t.currentStyle[ql],i=r[Yl],a=r[Wl],o=r[Pl],s=r[Ll],h=r[Gl],l=r[Bl],n[1]===yc&&(c=t.height,u=(t.__height=r[ql]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(_,!0)):"flex-start"===b||("center"===b?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"stretch"===b?(d=t.computedStyle,p=t.currentStyle[$l],v=d[Ul],y=d[Xl],g=d[Cl],m=d[Dl],E=d[Hl],T=d[Fl],p[1]===yc&&(O=t.width,M=(t.__width=d[$l]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,R.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerHeight)&&t.__offsetY(A,!0))}):e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b=t.currentStyle[rc];N?"flex-start"===b||("center"===b?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===b?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):"stretch"===b&&(n=t.computedStyle,i=t.currentStyle[ql],a=n[Yl],o=n[Wl],s=n[Pl],h=n[Ll],l=n[Gl],c=n[Bl],i[1]===yc&&(u=t.height,_=(t.__height=t.__height=n[ql]=H-s-h-l-c-a-o)-u,t.__clientHeight+=_,t.__outerHeight+=_))):"flex-start"===b||("center"===b?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"flex-end"===b?0!=(d=H-t.outerWidth)&&t.__offsetX(d,!0):"stretch"===b&&(p=t.computedStyle,v=t.currentStyle[$l],y=p[Ul],g=p[Xl],m=p[Cl],E=p[Dl],T=p[Hl],O=p[Fl],v[1]===yc&&(M=t.width,A=(t.__width=p[$l]=H-E-m-O-T-y-g)-M,t.__clientWidth+=A,R.__offsetWidth+=A,t.__outerWidth+=A)))}));var Y=this.__width=k,W=this.__height=b?I:S-t.y;this.__ioSize(Y,W),this.__marginAuto(r,t)}}},{key:"__layoutInline",value:function(e,r){var n=this,t=this.flowChildren,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[Zl],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new dl(c,u);t.forEach(function(t){t instanceof _l||t instanceof xl&&t.shadowRoot instanceof _l?("inline"!==t.currentStyle[Nl]&&(t.currentStyle[Nl]=t.computedStyle[Nl]="inline",Ke.error("Inline can not contain block/flex")),c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,d=Math.max(d,p),p=t.outerWidth):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new dl(c,u),d=Math.max(d,p),p=0),c+=t.outerWidth,v.add(t),p+=t.outerWidth)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,d=Math.max(d,p),p=t.width):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new dl(c,u),d=Math.max(d,p),p=0),c+=t.width,v.add(t),p+=t.width)}),v.size&&(a.push(v),r||v.verticalAlign(),u+=v.height,d=Math.max(d,p));var y=this.__width=h?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=n.__width-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)})}},{key:"__layoutAbs",value:function(n,i,R){var x=n.sx,S=n.sy,k=n.clientWidth,I=n.clientHeight,t=n.computedStyle,e=this.isDestroyed,r=this.children,a=this.absChildren,o=t[Nl],s=t[Yl],h=t[Xl],l=t[Pl],c=t[Dl],N=t[Fl];e||"none"===o?this.__layoutNone():(x+=c+h,S+=l+s,a.forEach(function(t){if(R){var e=t;if(e instanceof xl&&(e=t.shadowRoot),R!==e&&R!==t)return}var r=t.currentStyle,n=t.computedStyle;t.__mp(r,n,k),"inline"===r[Nl]&&(r[Nl]=n[Nl]=t.style.display="block");var i,a,o,s,h,l,c,u,_,f,d,p=r[jl],v=r[Kl],y=r[zl],g=r[Vl],m=r[$l],E=r[ql],T=r[Nl],O=r[Jl];if(p[1]!==yc?(f=!0,n[jl]=Ec(r,"left",p,k)):n[jl]="auto",y[1]!==yc?(u=!0,n[zl]=Ec(r,"right",y,k)):n[zl]="auto",v[1]!==yc?(c=!0,n[Kl]=Ec(r,"top",v,I)):n[Kl]="auto",g[1]!==yc?(_=!0,n[Vl]=Ec(r,"bottom",g,I)):n[Vl]="auto",f&&u?(i=x+n[jl],o=x+k-n[zl]-i):f&&m[1]!==yc?(i=x+n[jl],o=m[1]===gc?m[0]:k*m[0]*.01):u&&m[1]!==yc?(o=m[1]===gc?m[0]:k*m[0]*.01,i=x+k-n[zl]-o,i-=n[Dl],i-=n[Cl],i-=n[Fl],i-=n[Hl],i-=r[Xl][0],i-=r[Ul][0]):f?i=x+n[jl]:u?(i=x+k-n[zl],h=!0):(i=x+N,m[1]!==yc&&(o=m[1]===gc?m[0]:k*m[0]*.01)),c&&_)a=S+n[Kl],s=S+I-n[Vl]-a;else if(c&&E[1]!==yc)a=S+n[Kl],s=E[1]===gc?E[0]:I*E[0]*.01;else if(_&&E[1]!==yc)s=E[1]===gc?E[0]:I*E[0]*.01,a=S+I-n[Vl]-s,a-=n[Pl],a-=n[Ll],a-=n[Gl],a-=n[Bl],a-=r[Yl][0],a-=r[Wl][0];else if(c)a=S+n[Kl];else if(_)a=S+I-n[Vl],l=!0;else{a=S;for(var M=t.prev;M;){if(M instanceof An||"absolute"!==M.computedStyle[Il]){a=M.y+M.outerHeight;break}M=M.prev}M||(a=S),E[1]!==yc&&(s=E[1]===gc?E[0]:I*E[0]*.01)}("block"===T&&void 0===o||"flex"===T&&(void 0===o||"column"===O&&void 0===s))&&(d=!0);var A=h?i-x:k+x-i,b=l?a-S:I+S-a;d&&(t.__layout({x:i,y:a,w:A,h:b},!0,!0),A=t.outerWidth),t.__layout({x:i,y:a,w:A,h:b,w2:o,h2:s},!1,!0),h&&t.__offsetX(-t.outerWidth,!0),l&&t.__offsetY(-t.outerHeight,!0)}),r.forEach(function(t){if(R){var e=t;if(e instanceof xl&&(e=t.shadowRoot),R!==e&&R!==t)return}var r;t instanceof u?t.__layoutAbs(Tc(t)?t:n,i):t instanceof xl&&((r=t.shadowRoot)instanceof u&&r.__layoutAbs(r,i))}))}},{key:"__computeMeasure",value:function(e,r,t,n){rt(et(u.prototype),"__computeMeasure",this).call(this,e,r,t,n),this.children.forEach(function(t){t.__computeMeasure(e,r,!1,n)})}},{key:"render",value:function(t,e,r,n,i){var a=rt(et(u.prototype),"render",this).call(this,t,e,r,n,i);return t===Ye.SVG&&(this.virtualDom.type="dom"),a}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),rt(et(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return rt(et(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[Nl]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener,s=this.zIndexChildren;o.hasOwnProperty(a)&&(i=o[a]);for(var h=s.length-1;0<=h;h--){var l=s[h];if((l instanceof _l||l instanceof xl&&l.shadowRoot instanceof _l)&&l.__emitEvent(t)){if(t.__stopPropagation)return;return Ue.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0}}return rt(et(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__cancelCache",value:function(e){rt(et(u.prototype),"__cancelCache",this).call(this,e),e&&this.children.forEach(function(t){(t instanceof _l||t instanceof xl&&t.shadowRoot instanceof _l)&&t.__cancelCache(e)})}},{key:"__deepScan",value:function(e,r){rt(et(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return t instanceof xl&&(t=t.shadowRoot),t instanceof An||"absolute"!==t.currentStyle[Il]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return t instanceof xl&&(t=t.shadowRoot),t instanceof _l&&"absolute"===t.currentStyle[Il]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.y}}]),u}(),Ac=p.STYLE_KEY,bc=Ac.WIDTH,Rc=Ac.HEIGHT,xc=Ac.DISPLAY,Sc=Ac.BORDER_TOP_WIDTH,kc=Ac.BORDER_RIGHT_WIDTH,Ic=Ac.BORDER_LEFT_WIDTH,Nc=Ac.BORDER_BOTTOM_WIDTH,wc=Ac.PADDING_TOP,Dc=Ac.PADDING_LEFT,Pc=Ac.BORDER_TOP_LEFT_RADIUS,Cc=Ac.BORDER_TOP_RIGHT_RADIUS,Lc=Ac.BORDER_BOTTOM_RIGHT_RADIUS,Fc=Ac.BORDER_BOTTOM_LEFT_RADIUS,Bc=Ac.VISIBILITY,Hc=p.UPDATE_KEY,Gc=Hc.UPDATE_NODE,Yc=Hc.UPDATE_FOCUS,Wc=Hc.UPDATE_IMG,Uc=Hc.UPDATE_CONFIG,Xc=p.NODE_KEY,Kc=Xc.NODE_CACHE,zc=Xc.NODE_CACHE_TOTAL,Vc=Xc.NODE_DEFS_CACHE,jc=R.AUTO,$c=bn.canvasPolygon,qc=bn.svgPolygon,Zc=function(){t(tt,Mc);var a=e(tt);function tt(t,e){var r;g(this,tt);var n=(r=a.call(this,t,e)).props.src,i=r.__loadImg={};return n||(i.error=!0),r}return l(tt,[{key:"__preLayout",value:function(t){var e,r,n=rt(et(tt.prototype),"__preLayout",this).call(this,t),i=this.__loadImg;return i.error||(e=this.props.src,(r=Ke.IMG[e])&&r.state===Ke.LOADED&&(i.url=e,i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),n.fixedWidth&&n.fixedHeight||(i.error&&!this.props.placeholder?n.fixedWidth?n.h=n.w:n.fixedHeight?n.w=n.h:n.w=n.h=32:i.source?n.fixedWidth?n.h=n.w*i.height/i.width:n.fixedHeight?n.w=n.h*i.width/i.height:(n.w=i.width,n.h=i.height):n.w=n.h=0,n.fixedWidth=!0,n.fixedHeight=!0),n}},{key:"__addGeom",value:function(t,e){e=Ue.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),rt(et(tt.prototype),"__destroy",this).call(this)}},{key:"__calCache",value:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b){var R,x,S,k,I,N=rt(et(tt.prototype),"__calCache",this).call(this,t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b);return N||(R=this.computedStyle,x=this.__loadImg,k=(S=this.props).src,I=S.placeholder,"hidden"!==R[Bc]&&(R[bc]||R[Rc])&&(x.error||(x.url===k||I)&&x.source)&&(N=!0)),N}},{key:"render",value:function(t,e,r,n,i){var a=this,o=rt(et(tt.prototype),"render",this).call(this,t,e,r,n,i),s=this.width,h=this.height,l=this.isDestroyed,c=this.props,u=c.src,_=c.placeholder,f=this.computedStyle,d=this.computedStyle,p=d[xc],v=d[Sc],y=d[kc],g=d[Nc],m=d[Ic],E=d[wc],T=d[Dc],O=d[Pc],M=d[Cc],A=d[Lc],b=d[Fc],R=d[Bc],x=this.virtualDom,S=this.__config,k=this.__loadImg;if(t===Ye.CANVAS&&i&&(S[zc]=S[Kc]),k.url===u||k.error||(k.url=u,k.source=null,k.error=null,k.cache=!1,Ke.measureImg(u,function(t){var i=a;if(t.url===k.url&&!i.isDestroyed){var e=function(){var e=i.root,t=i.currentStyle,r=t[bc],n=t[Rc];e.delRefreshTask(i.__task),r[1]!==jc&&n[1]!==jc?e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[Gc]=i,t[Yc]=Io.REPAINT,t[Uc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}}):e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[Gc]=i,t[Yc]=Io.REFLOW,t[Wc]=!0,t[Uc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}})};if(t.success)k.source=t.source,k.width=t.width,k.height=t.height;else{if(_)return void Ke.measureImg(_,function(t){t.success&&(k.error=!0,k.source=t.source,k.width=t.width,k.height=t.height,e())});k.error=!0}"none"!==f[xc]&&e()}},{width:s,height:h})),l||"none"===p||"hidden"===R)return o;var I,N,w=S[Kc];if(i&&w&&w.enabled&&(r=w.ctx),I=o.x2+T,N=o.y2+E,k.error&&!_&&tt.showError){var D=.02*Math.min(s,h),P=I+.7*s,C=N+.3*h,L=5*D,F=[[I+.15*s,N+.7*h],[I+.3*s,N+.4*h],[I+.5*s,N+.6*h],[I+.6*s,N+.5*h],[I+.9*s,N+.8*h],[I+.15*s,N+.8*h]];if(t===Ye.CANVAS){r.strokeStyle="#CCC",r.lineWidth=D,r.fillStyle="#DDD",r.beginPath(),r.moveTo(I,N),r.lineTo(I+s,N),r.lineTo(I+s,N+h),r.lineTo(I,N+h),r.lineTo(I,N),r.stroke(),r.closePath(),r.beginPath(),r.arc(P,C,L,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(F[0][0],F[0][1]);for(var B=1,H=F.length;B<H;B++){var G=F[B];r.lineTo(G[0],G[1])}r.lineTo(F[0][0],F[0][1]),r.fill(),r.closePath()}else if(t===Ye.SVG){this.__addGeom("rect",[["x",I],["y",N],["width",s],["height",h],["stroke","#CCC"],["stroke-width",D],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",P],["cy",C],["r",L],["fill","#DDD"]]);for(var Y="",W=0,U=F.length;W<U;W++){var X=F[W];W&&(Y+=" "),Y+=X[0]+","+X[1]}this.__addGeom("polygon",[["points",Y],["fill","#DDD"]])}}else if((k.url===u||_)&&k.source){var K=k.source;if(K){var z,V,j,$=pi.calRadius(I,N,s,h,v,y,g,m,O,M,A,b);if(t===Ye.CANVAS)$?(r.save(),r.beginPath(),$c(r,$),r.clip(),r.closePath(),r.drawImage(K,I,N,s,h),r.restore()):r.drawImage(K,I,N,s,h);else if(t===Ye.SVG){if(k.cache)return k.cache.cache=!0,x.children=[k.cache],void(!x.cache&&$&&(z={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",qc($)],["fill","#FFF"]]}]},V=n.add(z),S[Vc].push(z),x.conClip="url(#"+V+")"));s===k.width&&h===k.height||(j=Ti.matrixResize(k.width,k.height,s,h,I,N,s,h));var q,Z,J=[["xlink:href",k.error?_:u],["x",I],["y",N],["width",k.width],["height",k.height]];$&&(q={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",qc($)],["fill","#FFF"]]}]},Z=n.add(q),S[Vc].push(q),x.conClip="url(#"+Z+")",delete x.cache),j&&!Ue.equalArr(j,[1,0,0,1,0,0])&&J.push(["transform","matrix("+Ue.joinArr(j,",")+")"]);var Q={type:"img",tagName:"image",props:J};x.children=[Q],k.cache=Q}}}return o}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source&&this.__loadImg.url!==this.props.src)return rt(et(tt.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"baseLine",get:function(){return this.height}}]),tt}();c(Zc,"showError",!0);var Jc,Qc,tu,eu=function(){function e(t){g(this,e),this.id=t,this.count=0,this.list=[]}return l(e,[{key:"add",value:function(t){return t.uuid="karas-defs-"+this.id+"-"+this.count++,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),ru=p.STYLE_KEY,nu=ru.DISPLAY,iu=ru.MARGIN_TOP,au=ru.MARGIN_LEFT,ou=ru.PADDING_TOP,su=ru.PADDING_LEFT,hu=ru.WIDTH,lu=ru.HEIGHT,cu=ru.BORDER_TOP_WIDTH,uu=ru.BORDER_RIGHT_WIDTH,_u=ru.BORDER_BOTTOM_WIDTH,fu=ru.BORDER_LEFT_WIDTH,du=ru.FILL,pu=ru.STROKE,vu=ru.STROKE_MITERLIMIT,yu=ru.STROKE_WIDTH,gu=ru.STROKE_LINECAP,mu=ru.STROKE_LINEJOIN,Eu=ru.STROKE_DASHARRAY,Tu=ru.STROKE_DASHARRAY_STR,Ou=ru.FILL_RULE,Mu=ru.VISIBILITY,Au=p.NODE_KEY,bu=Au.NODE_CACHE_PROPS,Ru=Au.NODE_CURRENT_PROPS,xu=Au.NODE_CURRENT_STYLE,Su=Au.NODE_IS_MASK,ku=Au.NODE_STYLE,Iu=Au.NODE_CACHE,Nu=Au.NODE_CACHE_TOTAL,wu=Au.NODE_CACHE_FILTER,Du=Au.NODE_CACHE_MASK,Pu=Au.NODE_CACHE_OVERFLOW,Cu=Au.NODE_DEFS_CACHE,Lu=R.AUTO,Fu=R.PX,Bu=R.PERCENT,Hu=Ue.int2rgba,Gu=Ue.isNil,Yu=Ue.joinArr,Wu=bn.canvasPolygon,Uu=bn.svgPolygon,Xu={},Ku=function(){t(w,_l);var s=e(w);function w(t,e){var r;g(this,w),(r=s.call(this,t,e)).__isMulti=!!r.props.multi,r.__isClip=!!r.props.clip,r.__isMask=r.__isClip||!!r.props.mask;var n=h(r),i=n.style,a=n.isMask;a&&(i.background=null,i.border=null,i.strokeWidth=0,i.stroke=null),r.__style=sn.normalize(r.style,Pt.DOM_ENTRY_SET.concat(Pt.GEOM_ENTRY_SET)),r.__currentStyle=Ue.extend({},r.__style),r.__currentProps=Ue.clone(r.props);var o=r.__config;return o[bu]=r.__cacheProps={},o[Ru]=r.__currentProps,o[xu]=r.__currentStyle,o[Su]=a,o[ku]=r.__style,r}return l(w,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle[hu];return r[1]===Fu?t-r[0]:r[1]===Bu?t-e*r[0]*.01:t}},{key:"__calAutoBasis",value:function(t){var e,r,n=0,i=0,a=0,o=this.currentStyle,s=(this.computedStyle,o[hu]),h=o[lu],l=o[cu],c=o[uu],u=o[_u],_=o[fu],f=t?s:h;return f[1]!==Lu&&(n=a+=f[0]),t?(n+=e=c[0]+_[0],a+=e,i+=e):(n+=r=l[0]+u[0],a+=r,i+=r),{b:n,min:i,max:a}}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),n=r.fixedWidth,i=r.fixedHeight,a=r.w,o=r.h;this.__height=i?o:0,e?this.__width=n?a:0:(this.__width=a,this.__ioSize(a,this.height),this.__marginAuto(this.currentStyle,t),this.__config[bu]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,n=e.fixedHeight,i=e.x,a=e.y,o=e.w,s=e.h,h=this.__width=r?o:i-t.x,l=this.__height=n?s:a-t.y;this.__ioSize(h,l),this.__config[bu]=this.__cacheProps={}}},{key:"__calCache",value:function(r,t,n,i,e,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b,R,x,S,k){var I,N=this;return rt(et(w.prototype),"__calCache",this).call(this,r,t,n,i,e,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,b,R,x,S,k),Gu(a[yu])&&(a[yu]=!0,(I=o[yu])[1]===Fu?s[yu]=I[0]:I[1]===Bu?s[yu]=I[0]*this.width*.01:s[yu]=0),Gu(a[Eu])&&(a[Eu]=!0,s[Eu]=o[Eu],a[Tu]=Yu(o[Eu],",")),[gu,mu,vu,Ou].forEach(function(t){s[t]=o[t]}),[pu,du].forEach(function(t){var e;Gu(a[t])&&(e=o[t],!(s[t]=e)||"linear"!==e.k&&"radial"!==e.k&&"conic"!==e.k?0<o[t][3]?a[t]=Hu(o[t]):a[t]="none":a[t]=N.__gradient(r,n,i,M+T,x+g,A-m,S-E,c,u,e))}),"hidden"!==s[Mu]}},{key:"__preSet",value:function(){var t=this.sx,e=this.sy,r=this.width,n=this.height,i=this.__cacheStyle,a=this.computedStyle,o=a[cu],s=a[fu],h=a[nu],l=a[iu],c=a[au],u=a[ou],_=a[su],f=a[Mu],d=t+s+c+_,p=e+o+l+u,v=d+.5*r,y=p+.5*n,g=i[du],m=i[pu],E=i[Tu],T=a[yu],O=a[gu],M=a[mu],A=a[vu];return{x:t,y:e,originX:d,originY:p,width:r,height:n,cx:v,cy:y,display:h,stroke:m,strokeWidth:T,strokeDasharray:a[Eu],strokeDasharrayStr:E,strokeLinecap:O,strokeLinejoin:M,strokeMiterlimit:A,fill:g,visibility:f,fillRule:a[Ou]}}},{key:"__preSetCanvas",value:function(t,e,r){var n=r.stroke,i=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,l=r.fill;t===Ye.CANVAS&&("linear"!==l.k&&("radial"!==l.k||Array.isArray(l.v))?"conic"===l.k||l.k||e.fillStyle===l||(e.fillStyle=l):e.fillStyle=l.v,"linear"!==n.k&&("radial"!==n.k||Array.isArray(n.v))?"conic"===n.k||n.k||e.strokeStyle===n||(e.strokeStyle=n):e.strokeStyle=n.v,e.lineWidth!==i&&(e.lineWidth=i),e.lineCap!==o&&(e.lineCap=o),e.lineJoin!==s&&(e.lineJoin=s),e.miterLimit!==h&&(e.miterLimit=h),Ue.isFunction(e.getLineDash)&&Ue.equalArr(e.getLineDash(),a)||e.setLineDash(a))}},{key:"render",value:function(t,e,r,n,i){var a=this.__renderSelfData||rt(et(w.prototype),"render",this).call(this,t,e,r,n,i),o=this[Iu],s=this[Nu],h=this[wu],l=this[Du],c=this[Pu];if(e<Io.REPAINT&&(s&&s.available||o&&o.available||!Io.contain(e,Io.FILTER)&&h||l||c)&&(a.break=!0),t===Ye.SVG&&(this.virtualDom.type="geom"),a.break)return a;var u=this.__preSet(t,r,n),_=a.x2,f=a.y2,d=u.originX,p=u.originY,v=this.computedStyle;return _+=v[su],f+=v[ou],u.dx=_-d,u.dy=f-p,this.__preSetCanvas(t,r,u),Object.assign(a,u)}},{key:"__renderPolygon",value:function(t,e,r,n){var i=n.fill,a=n.stroke,o=n.strokeWidth,s=n.dx,h=n.dy,l=this.__cacheProps.list,c=this.isMulti,u="conic"===i.k,_="conic"===a.k,f="radial"===i.k&&Array.isArray(i.v),d=0<o&&"radial"===a.k&&Array.isArray(a.v);u||_?(u?this.__conicGradient(t,e,r,l,c,n):"none"!==i&&this.__drawPolygon(t,e,r,c,l,s,h,n,!0),0<o&&_?Ke.warn("Stroke style can not use conic-gradient"):0<o&&"none"!==a&&this.__drawPolygon(t,e,r,c,l,s,h,n,!1,!0)):f||d?(f?this.__radialEllipse(t,e,r,l,c,n,"fill"):"none"!==i&&this.__drawPolygon(t,e,r,c,l,s,h,n,!0),0<o&&d?(Ke.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke.v=n.stroke.v[0],this.__drawPolygon(t,e,r,c,l,s,h,n,!1,!0)):0<o&&"none"!==a&&this.__drawPolygon(t,e,r,c,l,s,h,n,!1,!0)):this.__drawPolygon(t,e,r,c,l,s,h,n,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,n,i,a,o,s,h,l){var c=s.fill,u=s.stroke,_=s.strokeWidth,f=s.fillRule;if(t===Ye.CANVAS)e.beginPath(),n?i.forEach(function(t){return Wu(e,t,a,o)}):Wu(e,i,a,o),h&&c&&"none"!==c&&e.fill(f),l&&"none"!==u&&0<_&&e.stroke(),e.closePath();else if(t===Ye.SVG){var d=s.strokeDasharrayStr,p=s.strokeLinecap,v=s.strokeLinejoin,y=s.strokeMiterlimit,g="";n?i.forEach(function(t){return g+=Uu(t)}):g=Uu(i);var m=[["d",g]];if(!c||"none"===c&&!u||"none"===u)return;h&&c&&"none"!==c?(m.push(["fill",c.v||c]),"nonzero"!==f&&m.push(["fill-rule",f])):m.push(["fill","none"]),l&&"none"!==u&&0<_?(m.push(["stroke",u.v||u]),m.push(["stroke-width",_]),this.__propsStrokeStyle(m,d,p,v,y)):m.push(["stroke-width",0]),this.addGeom("path",m)}}},{key:"__inversePtList",value:function(t,e,a){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=We.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=We.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,n,i,a,o){var s,h,l=a.strokeWidth,c=a.strokeDasharrayStr,u=a.strokeLinecap,_=a.strokeLinejoin,f=a.strokeMiterlimit,d=a.dx,p=a.dy,v=Ge(a[o].v,4),y=v[0],g=v[1],m=[v[2],v[3]],g=Jn.calMatrixByOrigin(g,m),E=We.inverse(g);n=this.__inversePtList(n,i,E),t===Ye.CANVAS?(g&&(e.save(),e.setTransform(g[0],g[1],g[2],g[3],g[4],g[5])),e.beginPath(),e[o+"Style"]!==y&&(e[o+"Style"]=y),i?n.forEach(function(t){return bn.canvasPolygon(e,t,d,p)}):Wu(e,n,d,p),e[o](),e.closePath(),g&&e.restore()):t===Ye.SVG&&(s="",i?n.forEach(function(t){return s+=Uu(t)}):s=Uu(n),h=[["d",s]],"fill"===o?(h.push(["fill",y]),h.push(["strokeWidth",0])):"stroke"===o&&(h.push(["fill","none"]),h.push(["stroke",y]),h.push(["stroke-width",l]),this.__propsStrokeStyle(h,c,u,_,f)),h.push(["transform","matrix(".concat(Yu(g,","),")")]),this.addGeom("path",h))}},{key:"__conicGradient",value:function(t,e,n,r,i,a){var o,s,h,l=this,c=a.fill,u=a.dx,_=a.dy,f=c.v;t===Ye.CANVAS?(o=e.globalAlpha,e.globalAlpha=.5*o,i?r.forEach(function(t){e.save(),e.beginPath(),Wu(e,t,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),Wu(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()}):(e.save(),e.beginPath(),Wu(e,r,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),Wu(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()),e.globalAlpha=o):t===Ye.SVG&&(i?r.forEach(function(t){var e={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uu(t)],["fill","#FFF"]]}]},r=n.add(e);l.__config[Cu].push(e),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uu(t[0])],["fill",t[1]],["clip-path","url(#"+r+")"]]})})}):(s={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uu(r)],["fill","#FFF"]]}]},h=n.add(s),this.__config[Cu].push(s),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uu(t[0])],["fill",t[1]],["clip-path","url(#"+h+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,n,i){e&&t.push(["stroke-dasharray",e]),"butt"!==r&&t.push(["stroke-linecap",r]),"miter"!==n&&t.push(["stroke-linejoin",n]),4!==i&&t.push(["stroke-miterlimit",i])}},{key:"__cancelCache",value:function(t){rt(et(w.prototype),"__cancelCache",this).call(this,t),this.__config[bu]=this.__cacheProps={}}},{key:"__releaseWhenEmpty",value:function(){}},{key:"addGeom",value:function(t,e){e=Ue.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return Gu(e)?this["__"+t]:e}},{key:"baseLine",get:function(){return this.__height}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"getRegister",value:function(t){if(!Xu.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return Xu[t]}},{key:"register",value:function(t,e){if(w.hasRegister(t))throw new Error("Geom has already register: ".concat(t));Xu[t]=e}},{key:"hasRegister",value:function(t){return Xu.hasOwnProperty(t)}}]),w}(),zu=p.NODE_KEY,Vu=zu.NODE_COMPUTED_STYLE,ju=zu.NODE_DOM_PARENT,$u=zu.NODE_MATRIX_EVENT,qu=zu.NODE_STRUCT,Zu=k.TYPE_VD,Ju=k.TYPE_GM,Qu=k.TYPE_CP,t_=[],e_=[],r_={};function n_(t){t instanceof Qc&&t.children.forEach(function(t){t instanceof Qc?n_(t):t instanceof tu&&t.__hasUpdate&&(t.__hasUpdate=!1,i_(t,t.props))})}function i_(t,e,r){(t.__nextState||r)&&(!Ue.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state))?function(t,e,r){t.props=e,t.__state=r,t.__nextState=null;var n=t.shadow,i=t.shadowRoot,a=t.__cd,o=Ol.flattenJson(t.render());(function(t,e,r){var o=h_(e,{},t),s=h_(r,{}),h=[],l=[];Object.keys(o).forEach(function(t){var e=o[t];s[t]||(e.json.key=r_)}),Object.keys(s).forEach(function(t){var e,r,n,i=o[t],a=s[t];i?(e=i.json,r=a.json,n=i.vd,e.$$type===Qu&&r.$$type===Qu?e.klass===r.klass&&(s_(e,r,n),e.key=r.key=r_,l.push(n)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===Ju&&e.props.multi!==r.props.multi||(r.inherit=n),e.key=r.key=r_,r.$$type===Zu&&h.push({vd:n,oj:e,nj:r}))):a.json.key=r_}),h.forEach(function(t){o_(t.vd,t.oj,t.nj)}),a_(t,e,r),l.forEach(function(t){l_(t)})})(n,a,o),t.__init(o);var s=t.shadowRoot;s instanceof Jc?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sy1","__sy2","__sy3","__sy4","__computedStyle"].forEach(function(t){s[t]=i[t]}),s.__config[Vu]=i.computedStyle):s.__config[$u]=i.__config[$u];["__x","__y","__width","__height","__sx1","__layoutData","__parent","__domParent"].forEach(function(t){s[t]=i[t]}),s.__config[ju]=i.domParent,s.__config[qu]=i.__config[qu],t_.push(t),Ue.isObject(o)&&o.placeholder||e_.push(n);o&&o.placeholder&&delete o.placeholder}(t,e,t.__nextState||t.state):n_(t.shadowRoot)}function a_(t,e,r){if(Ue.isObject(r))if(r.$$type===Qu){if(r.key===r_)return;e.$$type===r.$$type&&e.klass===r.klass&&(s_(e,r,t),l_(t))}else r.$$type===Ju&&e.$$type===Ju?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.inherit=t):r.$$type===Zu&&e.$$type===Zu&&(e.tagName===r.tagName&&(r.inherit=t),o_(t,e,r))}function o_(t,e,r){for(var n=e.children,i=r.children,a=n.length,o=i.length,s=t.children,h=0,l=0,c=0,u=Math.min(a,o);h<u;h++){var _=n[h+l],f=i[h+c];_.key===r_&&f.key===r_||(_.key===r_?(l++,h--,a--,u=Math.min(a,o)):f.key===r_?(c++,h--,o--,u=Math.min(a,o)):a_(s[h+l],_,f))}}function s_(i,a,o){a.placeholder=!0;var s=(a.value=o).shadowRoot,h={};Object.keys(i.props).forEach(function(t){var e=i.props[t];h[t]=e}),Object.keys(a.props).forEach(function(t){var e,r,n=a.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=n,(e=h[t])?(delete h[t],e!==n&&(t=t.slice(2).toLowerCase(),s.listener[t]=n)):(t=t.slice(2).toLowerCase(),s.listener[t]=n)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=n,(r=h[t])?(delete h[t],r!==n&&(t=t.slice(2).toLowerCase(),o.off(t,h[t]),o.on(t,n)),delete h[t]):(t=t.slice(2).toLowerCase(),o.on(t,n)))}),Object.keys(h).forEach(function(t){var e=h[t];/^on[a-zA-Z]/.test(t)?(a.props[t]=e,t=t.slice(2).toLowerCase(),delete s.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(a.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),i_(o,a.props,!Ue.equal(i.props,a.props))}function h_(t,r,n){var e;return Array.isArray(t)?t.forEach(function(t,e){return h_(t,r,n&&n[e])}):Ue.isObject(t)&&(t.$$type!==Zu&&t.$$type!==Ju&&t.$$type!==Qu||(t.$$type===Zu&&h_(t.children,r,n&&n.children),e=t.props.key,Ue.isNil(e)||""===e||(r.hasOwnProperty(e)&&Ke.error("Component "+n.tagName+" has duplicate key: "+e),r[e]={json:t,vd:n}))),r}function l_(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var c_,u_={ref:function(t){Jc=t.Xom,Qc=t.Dom,t.Img,t.Geom,tu=t.Component},updateList:t_,check:n_,checkCp:i_,did:function(){t_.forEach(function(t){Ue.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),t_.splice(0),e_.forEach(function(t){t.__destroy()}),e_=[]}},__=Ue.joinVd,f_=Ue.joinDef,d_=Io.contain,p_=Io.NONE,v_=Io.TRANSFORM_ALL,y_=Io.OPACITY,g_=Io.FILTER,m_=Io.MIX_BLEND_MODE;function E_(t,e,r){var n=t.childNodes;!function(t,e,r){for(var n=e.length,i=r.length,a=0,o=t.childNodes;a<Math.min(n,i);a++)!function(e,t,r){if(t.tagName!==r.tagName)w_(e,"beforebegin",f_(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Ge(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Ge(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)});for(var d=e.childNodes,p=t.children.length,v=r.children.length,y=0;y<Math.min(p,v);y++)x_(e,y,t.children[y],r.children[y]);if(y<p)for(var g=p-1;y<=g;g--)N_(e,d,g);else if(y<v)for(;y<v;y++)I_(e,d,y,__(r.children[y]))}}(o[a],e[a],r[a]);if(a<n)for(var s=n-1;a<=s;s--)N_(t,o,s);else if(a<i)for(;a<i;a++)I_(t,o,a,f_(r[a]))}(n[0],e.defs,r.defs),r.hasOwnProperty("lv")||R_(n[1],e.bb,r.bb,e.bbClip,r.bbClip),A_(t,e,r,!0)}function T_(t,e,r){"dom"===e.type?"dom"===r.type?A_(t,e,r):"geom"===r.type?b_(t,e,r):k_(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var n=e.children.length,i=r.children.length,a=0;a<Math.min(n,i);a++)x_(t,a,e.children[a],r.children[a],!0);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)N_(t,o,s);else if(a<i)for(;a<i;a++)I_(t,o,a,__(r.children[a]))}(t,e,r):k_(t,r):"geom"===e.type?"dom"===r.type?b_(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return;if(r.hasOwnProperty("lv"))M_(t,0,r,r.lv);else{O_(t,e,r),R_(t.firstChild,e.bb,r.bb,e.bbClip,r.bbClip);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)x_(o,a,e.children[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)N_(o,s,h);else if(a<i)for(;a<i;a++)I_(o,s,a,__(r.children[a]))}}(t,e,r):k_(t,r):"img"===e.type&&("img"===r.type?S_(t,e,r):k_(t,r))}function O_(t,e,r){var n=r.transform,i=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,h=r.filter,l=r.conClip;e.transform!==n&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),e.opacity!==i&&(1!==i&&void 0!==i?t.setAttribute("opacity",i):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==h&&(h?t.setAttribute("filter",h):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==l&&(l?t.childNodes[1].setAttribute("clip-path",l):t.childNodes[1].removeAttribute("clip-path"))}function M_(t,e,r,n){var i,a,o,s,h;n!==p_&&(i=r.transform,a=r.opacity,o=r.mask,s=r.filter,h=r.mixBlendMode,d_(n,v_)&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),d_(n,y_)&&(1!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),d_(n,g_)&&(s?t.setAttribute("filter",s):t.removeAttribute("filter")),d_(n,m_)&&(h?t.setAttribute("style","mix-blend-mode:"+h):t.removeAttribute("style")),o?t.setAttribute("mask",o):t.removeAttribute("mask"))}function A_(t,e,r,n){if(r.cache)M_(t,0,r,r.lv);else{r.hasOwnProperty("lv")?M_(t,0,r,r.lv):(O_(t,e,r),n||R_(t.firstChild,e.bb,r.bb,e.bbClip,r.bbClip));for(var i=e.children.length,a=r.children.length,o=0,s=t.lastChild,h=s.childNodes;o<Math.min(i,a);o++)T_(h[o],e.children[o],r.children[o]);if(o<i)for(var l=i-1;o<=l;l--)N_(s,h,l);else if(o<a)for(;o<a;o++)I_(s,h,o,__(r.children[o]))}}function b_(t,e,r){O_(t,e,r),R_(t.firstChild,e.bb,r.bb,e.bbClip,r.bbClip);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)k_(s[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)N_(o,s,h);else if(a<i)for(;a<i;a++)I_(o,s,a,__(r.children[a]))}function R_(t,e,r,n,i){var a=e.length,o=r.length;n!==i&&(i?t.setAttribute("clip-path",i):t.removeAttribute("clip-path"));for(var s=0;s<Math.min(a,o);s++)x_(t,s,e[s],r[s]);var h=t.childNodes;if(s<a)for(var l=a-1;s<=l;l--)N_(t,h,l);else if(s<o)for(;s<o;s++)I_(t,h,s,__(r[s]))}function x_(t,e,r,n,i){var a=t.childNodes;r.tagName!==n.tagName?k_(a[e],n):(S_(a[e],r,n),i&&r.content!==n.content&&(a[e].innerHTML=n.content))}function S_(e,t,r){if(!r.cache){for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Ge(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Ge(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)})}}function k_(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=__(t)})):r=__(e),w_(t,"beforebegin",r),t.parentNode.removeChild(t)}function I_(t,e,r,n){r>=e.length?w_(t,"beforeend",n):w_(e[r],"beforebegin",n)}function N_(t,e,r){e[r]&&t.removeChild(e[r])}function w_(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(c_=c_||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(c_.childNodes[0],t)}}var D_=Ue.isFunction,P_=function(){function t(){g(this,t),this.__records=[],this.__auto=[],this.__list=[]}return l(t,[{key:"add",value:function(t){-1===this.__list.indexOf(t)&&this.list.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);-1<e&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__auto=[],this.__list=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(t){var o=this,e=0<arguments.length&&void 0!==t?t:this.__records;e.length&&e.splice(0).forEach(function(t){var e,r,n,i=t.target,a=t.animate;Array.isArray(a)?a.forEach(function(t){var e=t.value,r=t.options;r.autoPlay=!1;var n=i.animate(e,r);o.add(n)}):(e=a.value,(r=a.options).autoPlay=!1,n=i.animate(e,r),o.add(n))})}},{key:"__playAuto",value:function(){this.init(this.__auto),this.__action("play")}},{key:"play",value:function(e){this.init();var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,D_(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,D_(e)&&e(t))}])}},{key:"cancel",value:function(e){var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,D_(e)&&e(t))}])}},{key:"finish",value:function(e){var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,D_(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndStop",[t,e,r&&function(t){n&&(n=!1,D_(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){n&&(n=!1,D_(r)&&r(t))}])}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"list",get:function(){return this.__list}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),C_=p.STYLE_KEY,L_=C_.POSITION,F_=C_.DISPLAY,B_=C_.OPACITY,H_=C_.VISIBILITY,G_=C_.FILTER,Y_=C_.OVERFLOW,W_=C_.MIX_BLEND_MODE,U_=C_.FILL,X_=C_.TRANSFORM,K_=C_.TRANSFORM_ORIGIN,z_=p.NODE_KEY,V_=z_.NODE_CACHE,j_=z_.NODE_CACHE_TOTAL,$_=z_.NODE_CACHE_OVERFLOW,q_=z_.NODE_CACHE_MASK,Z_=z_.NODE_CACHE_FILTER,J_=z_.NODE_MATRIX,Q_=z_.NODE_MATRIX_EVENT,tf=z_.NODE_OPACITY,ef=z_.NODE_COMPUTED_STYLE,rf=z_.NODE_CURRENT_STYLE,nf=z_.NODE_LIMIT_CACHE,af=z_.NODE_BLUR_VALUE,of=z_.NODE_REFRESH_LV,sf=z_.NODE_HAS_CONTENT,hf=z_.NODE_CACHE_STYLE,lf=z_.NODE_DEFS_CACHE,cf=p.STRUCT_KEY,uf=cf.STRUCT_NODE,_f=cf.STRUCT_INDEX,ff=cf.STRUCT_TOTAL,df=cf.STRUCT_HAS_MASK,pf=cf.STRUCT_LV,vf=Io.TRANSFORM_ALL,yf=Io.OPACITY,gf=Io.FILTER,mf=Io.REPAINT,Ef=Io.contain,Tf=Io.MIX_BLEND_MODE;function Of(t,S,e,r,k,I){var N={},w=t.__sx1,D=t.__sy1,n=t.__config,i=n[V_],a=n[af],P=i&&i.available?i.bbox.slice(0):t.bbox,C=[e],L=c({},e,a);for(I[e]=1;C.length;)C.splice(0).forEach(function(t){for(var e,r,n=t+1,i=t+(S[t][ff]||0)+1;n<i;n++){var a,o,s,h,l,c,u,_=S[n],f=_[uf],d=_[ff],p=f.__sx1,v=f.__sy1,y=f.__config,g=y[af],m=y[nf],E=y[V_],T=y[j_],O=y[ef],M=O[F_],A=O[H_],b=O[X_],R=O[K_],x=O[B_];if(m)return;"none"!==M?"hidden"!==A&&(k[n]=t,I[n]=I[t]*x,a=void 0,s=o=0,T&&T.available?(n+=d||0,a=T.bbox.slice(0),o=T.dbx,s=T.dby):E&&E.available?(a=E.bbox.slice(0),o=E.dbx,s=E.dby):a=f.bbox,a&&(u=N[t],h=(L[t]||0)+(g||0),b&&!We.isE(b)&&((l=R.slice(0))[0]+=p-w+o,l[1]+=v-D+s,c=Jn.calMatrixByOrigin(b,l),u=u?We.multiply(u,c):c),u&&(N[n]=u),a=Ue.transformBbox(a,u,h,h),d&&(L[n]=h,C.push(n)),P?(r=a,(e=P)[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[2]),e[3]=Math.max(e[3],r[3])):P=a)):n+=d||0}});if(!(P[2]-P[0]>Ko.MAX||P[3]-P[1]>Ko.MAX))return P;n[nf]=!0}var Mf,Af={renderCacheCanvas:function(tt,et,rt,t){for(var m,E,nt=t.__structs,it=t.width,at=t.height,T=[],O=[],M=1,A=[],b=0,R=0,e=nt.length;R<e;R++)(function(t){var e,r,n,i,a,o,s,h,l,c=nt[t],u=c[uf],_=c[pf],f=c[ff],d=u.__config,p=d[of],v=d[V_],y=d[j_],g=d[ef];u instanceof An?R=t:(0===t?A.push(u):b<_?(m=E[Q_],We.isE(m)&&(m=null),T.push(m),M=E[tf],O.push(M),A.push(u)):_<b&&(e=b-_,T.splice(-e),m=T[_],O.splice(-e),M=O[_],A.splice(-e),E=A[_]),"none"===g[F_]?R=t+=f||0:(p<mf?(r=d[rf],n=d[ef],i=d[hf],Ef(p,vf)&&(a=u.__calMatrix(p,i,r,n),o=d[J_],a&&o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5]),m&&a&&(a=We.multiply(m,a)),(o=d[Q_])&&a&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5])),Ef(p,yf)&&(s=n[B_]=r[B_],d[tf]=M*s),Ef(p,gf)&&(h=n[G_]=r[G_],d[af]=0,Array.isArray(h)&&h.forEach(function(t){var e=Ge(t,2),r=e[0],n=e[1];"blur"===r&&(d[af]=n)}),l=u.bbox,v=v?Ko.updateCache(v,l):Ko.getInstance(l),(d[V_]=v).enabled||Ke.warn("Downgrade for cache-filter change error")),Ef(p,Tf)&&(n[W_]=r[W_]),y&&y.available&&(t+=f||0)):u instanceof Ku?(u.__renderSelfData=u.__renderSelf(tt,p,et,rt,!0),(v=d[V_])&&v.available&&u.render(tt,p,v.ctx,rt,!0)):u.render(tt,p,et,rt,!0),E=d,b=_,R=t))})(R);var r,n,i,a,o,s,h,l,c,u,_=function(f){for(var d=[0],p={0:{i:0}};d.length;)d.splice(0).forEach(function(t){for(var e,r=f[t],n=p[t],i=t+1,a=i+(r[ff]||0);i<a;i++){var o,s,h=f[i],l=h[uf],c=h[ff],u=l.__config,_=u[j_];"none"!==u[ef][F_]?(o={i:i},s=s||o,e&&(o.p=e),e=o,l instanceof An||!c||(_&&_.available||(p[i]=o,d.push(i)),i+=c||0)):i+=c||0}n&&e&&(n.p&&(s.p=n.p),n.p=e)});for(var t=p[0],e=[];t;)e.push(t.i),t=t.p;return e.reverse()}(nt);if(_.length)for(var f=Math.max(1,Ko.NUM),d=nt[_[0]][pf],p={},v=0,y=_.length-1;v<y;v++){var g=nt[_[v]],x=g[uf],S=g[pf],k=g[_f],I=g[df],N=g[ff],w=x.__config,D=w[ef],P=D[L_],C=D[H_],L=D[Y_],F=D[W_];if(x instanceof An)d=S,"hidden"!==C&&(p[S-1]=p[S-1]||0,p[S-1]++);else{var B,H=w[sf],G=w[af],Y=w[nf],W=w[j_],U=w[V_],X=void 0;if(S<d?("hidden"!==C&&H&&(p[S]=p[S]||0,p[S]++),B=p[S]||0,p[S]=0,p[S-1]=p[S-1]||0,!Y&&(f<=B||("relative"===P||"absolute"===P)&&(H||B)||(I||0<G||"visible"!==L||"normal"!==F)&&(H||B))?(p[S-1]++,X=!0):p[S-1]+=B):(p[S-1]=p[S-1]||0,!Y&&(("relative"===P||"absolute"===P)&&H&&"hidden"!==C||W&&W.available||(I||0<G||"visible"!==L||"normal"!==F)&&H&&"hidden"!==C||W&&W.available)?(p[S-1]++,X=!0):(H&&"hidden"!==C||W&&W.available)&&p[S-1]++),d=S,X){if(W&&W.available)continue;if(!(W=w[j_]=function(t,e,r,n,i,a,o){if(0===n)return e.__config[j_]=o;var s={},h={},l={},c=Of(e,i,r,0,s,l);if(c&&(a?a.reset(c):a=e.__config[j_]=Ko.getInstance(c),a&&a.enabled)){var u=e.__sx1,_=e.__sy1;a.__appendData(u,_),a.__available=!0;var f=a,d=Ge(f.coords,2),p=d[0],v=d[1],y=f.ctx,g=f.dbx,m=f.dby;o&&o.available&&(y.globalAlpha=1,y.setTransform(1,0,0,1,0,0),Ko.drawCache(o,a));for(var E=r+1,T=r+(n||0)+1;E<T;E++){var O,M,A,b,R,x,S,k,I,N=i[E],w=N[uf],D=N[ff],P=w.__config,C=P[V_],L=P[j_],F=P[Z_],B=P[q_],H=P[$_],G=P[ef],Y=G[F_],W=G[H_],U=G[X_],X=G[K_],K=G[W_];"none"!==Y?"hidden"!==W&&(k=h[O=s[E]],M=l[E],w instanceof An?(y.globalAlpha=l[O],A=h[O]||[1,0,0,1,0,0],y.setTransform(A[0],A[1],A[2],A[3],A[4],A[5]),w.render(t,0,y,null,p-u+g,v-_+m)):(U&&!We.isE(U)&&(b=X.slice(0),C&&C.available?(b[0]+=C.sx1,b[1]+=C.sy1):(b[0]+=w.__sx1,b[1]+=w.__sy1),R=-u+g+p,x=-_+m+v,b[0]+=R,b[1]+=x,S=Jn.calMatrixByOrigin(U,b),k=k?We.multiply(k,S):S),k&&(h[E]=k),(I=(I=H||B||F)||(L&&L.available?L:null))?E+=D||0:C&&C.available&&(I=C),I&&(y.globalCompositeOperation="normal"!==K?"source-over":K.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()}),y.globalAlpha=M,k?y.setTransform(k[0],k[1],k[2],k[3],k[4],k[5]):y.setTransform(1,0,0,1,0,0),Ko.drawCache(I,a)))):E+=D||0}return a}}(tt,x,k,N||0,nt,W,U)))continue;var K=W;0<G&&(c=W,u=G,K=x.__config[Z_]=Ko.genBlur(c,u)),I&&(a=K,o=(i=x).next.isClip,l=h=s=void 0,s=i.computedStyle,h=s[X_],l=s[K_],K=i.__config[q_]=Ko.genMask(a,i.next,o,h,l)),"hidden"===L&&(n=K,(r=x).__config[$_]=Ko.genOverflow(n,r))}}}for(var ot={},st={},ht={},lt={},ct={},ut=0,z=nt.length;ut<z;ut++)(function(s){var t=nt[s],e=t[uf],r=t[ff],n=t[df],i=e.__config,a=i[tf],o=i[Q_],h=i[af],l=i[nf],c=i[V_],u=i[j_],_=i[Z_],f=i[q_],d=i[$_],p=i[of],v=i[ef],y=v[F_],g=v[H_],m=v[Y_],E=v[W_];if(e instanceof An)et.globalAlpha=a,et.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]),e.render(tt,0,et,rt);else{var T,O,M,A,b=d||f||_;if(b=b||(u&&u.available?u:null)){if("none"===y)return ut=s+=r||0;if(et.globalCompositeOperation="normal"===E?"source-over":E.replace(/[A-Z]/,function(t){return ut=s,"-"+t.toLowerCase()}),n){for(var R=s+(r||0)+1;n--;)R+=(nt[R][ff]||0)+1;s=R-1}s+=r||0,Ko.draw(et,a,o,b),et.globalCompositeOperation="source-over"}else{if(lt.hasOwnProperty(s)&&(et=lt[s].ctx),c&&c.available){if("none"===y)return ut=s+=r||0;var x,S,k,I,N,w,D,P={};if(!h||(I=Ke.getCacheCanvas(it,at)).ctx&&(x={ctx:et,blur:h,target:I},et=I.ctx,P.offScreenFilter=x),n){for(var C,L=s+(r||0)+1;n--;)L+=(nt[L][ff]||0)+1;s=L-1,x?S=x:(C=Ke.getCacheCanvas(it,at)).ctx&&(S={ctx:et,target:C},et=C.ctx),P.offScreenMask=S}"hidden"===m&&(x||S?k=x||S:(N=Ke.getCacheCanvas(it,at)).ctx&&(k={ctx:et,target:N},et=N.ctx),P.offScreenOverflow=k),"normal"!==E&&(x||S||k?D=x||S||k:(w=Ke.getCacheCanvas(it,at),D={ctx:et,target:w,mixBlendMode:E},et=w.ctx),P.offScreenBlend=D),"hidden"!==g&&Ko.draw(et,a,o,c)}else if(l){if(P=e instanceof Ku?e.__renderSelfData=e.__renderSelf(tt,p,et,rt):e.render(tt,p,et,rt),"none"===y)return ut=s+=r||0;var F,B,H,G=P||{},Y=G.offScreenFilter,W=G.offScreenMask,U=G.offScreenOverflow,X=G.offScreenBlend;if(Y&&((ot[F=s+(r||0)]=ot[F]||[]).unshift(Y),et=Y.target.ctx),W){for(var K,z,V=s+(r||0)+1;n--;){var j=nt[V],$=j[ff],q=j[uf].currentStyle,Z=q[F_],J=q[H_];"none"!==Z?("hidden"!==J&&(K?z=V:K=z=V),V++):V+=($||0)+1}var Q=Ke.getCacheCanvas(it,at);lt[K]=Q,ct[z]={mask:Q,offScreenMask:W,isClip:nt[K][uf].isClip},et=W.target.ctx}X&&((ht[B=s+(r||0)]=ht[B]||[]).unshift(X),et=X.target.ctx),U&&((st[H=s+(r||0)]=st[H]||[]).unshift(U),et=U.target.ctx),e instanceof Ku&&e.render(tt,e.__refreshLevel,et,rt)}ot.hasOwnProperty(s)&&ot[s].forEach(function(t){var e,r=Ke.getCacheWebgl(it,at,"__$$blur$$__");Si.gaussBlur(t.target,r,t.blur,it,at).clear(),lt.hasOwnProperty(s+1)||st.hasOwnProperty(s)||ht.hasOwnProperty(s)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),Ke.releaseCacheCanvas(e.canvas),et=t.ctx)}),st.hasOwnProperty(s)&&st[s].forEach(function(t){var e=t.target,r=t.ctx,n=t.x,i=t.y,a=t.outerWidth,o=t.outerHeight;et.globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.fillStyle="#FFF",et.beginPath(),et.rect(n,i,a,o),et.fill(),et.closePath(),et.globalCompositeOperation="source-over",lt.hasOwnProperty(s+1)||ht.hasOwnProperty(s)||(r.drawImage(e.canvas,0,0),et.clearRect(0,0,it,at),Ke.releaseCacheCanvas(e.canvas),et=r)}),ht.hasOwnProperty(s)&&ht[s].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,lt.hasOwnProperty(s+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),Ke.releaseCacheCanvas(e.canvas),(et=t.ctx).globalCompositeOperation="source-over")}),ct.hasOwnProperty(s)&&(O=(T=ct[s]).mask,M=T.offScreenMask,T.isClip?((et=O.ctx).globalCompositeOperation="source-out",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(M.target.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",M.target.ctx.clearRect(0,0,it,at),Ke.releaseCacheCanvas(M.target.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),et.globalCompositeOperation="source-over",O.draw(et),O.ctx.clearRect(0,0,it,at),Ke.releaseCacheCanvas(O.canvas)):((et=M.target.ctx).globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",O.ctx.clearRect(0,0,it,at),Ke.releaseCacheCanvas(O.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),A=M.target,et.drawImage(A.canvas,0,0),et.globalCompositeOperation="source-over",A.draw(et),A.ctx.clearRect(0,0,it,at),Ke.releaseCacheCanvas(M.target.canvas)))}}ut=s})(ut)},renderCanvas:function(I,N,w,t){for(var D=t.__structs,P=t.width,C=t.height,L={},F={},B={},H={},G={},Y=0,e=D.length;Y<e;Y++)(function(h){var t=D[h],e=t[uf],r=t[ff],n=t[df],i=e.__config,a=i[ef],o=i[of];H.hasOwnProperty(h)&&(N=H[h].ctx);var s=void 0,s=e instanceof Ku?e.__renderSelfData=e.__renderSelf(I,o,N,w):e.render(I,o,N,w);if("none"===a[F_])return Y=h+=r||0;var l,c,u,_,f,d,p,v=s||{},y=v.offScreenFilter,g=v.offScreenMask,m=v.offScreenOverflow,E=v.offScreenBlend;if(y&&((L[l=h+(r||0)]=L[l]||[]).unshift(y),N=y.target.ctx),g){for(var T,O,M=h+(r||0)+1;n--;){var A=D[M],b=A[ff],R=A[uf].currentStyle,x=R[F_],S=R[H_];"none"!==x?("hidden"!==S&&(T?O=M:T=O=M),M++):M+=(b||0)+1}var k=Ke.getCacheCanvas(P,C);H[T]=k,G[O]={mask:k,offScreenMask:g,isClip:D[T][uf].isClip},N=g.target.ctx}E&&((B[c=h+(r||0)]=B[c]||[]).unshift(E),N=E.target.ctx),m&&((F[u=h+(r||0)]=F[u]||[]).unshift(m),N=m.target.ctx),e instanceof Ku&&e.render(I,o,N,w),L.hasOwnProperty(h)&&L[h].forEach(function(t){var e,r=Ke.getCacheWebgl(P,C,"__$$blur$$__");Si.gaussBlur(t.target,r,t.blur,P,C).clear(),H.hasOwnProperty(h+1)||F.hasOwnProperty(h)||B.hasOwnProperty(h)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,P,C),Ke.releaseCacheCanvas(e.canvas),N=t.ctx)}),F.hasOwnProperty(h)&&F[h].forEach(function(t){var e=t.matrix,r=t.target,n=t.ctx,i=t.x,a=t.y,o=t.outerWidth,s=t.outerHeight;N.globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),N.fillStyle="#FFF",N.beginPath(),N.rect(i,a,o,s),N.fill(),N.closePath(),N.globalCompositeOperation="source-over",H.hasOwnProperty(h+1)||B.hasOwnProperty(h)||(n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,n.drawImage(r.canvas,0,0),N.clearRect(0,0,P,C),Ke.releaseCacheCanvas(r.canvas),N=n)}),B.hasOwnProperty(h)&&B[h].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,H.hasOwnProperty(h+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,P,C),Ke.releaseCacheCanvas(e.canvas),(N=t.ctx).globalCompositeOperation="source-over")}),G.hasOwnProperty(h)&&(f=(_=G[h]).mask,d=_.offScreenMask,_.isClip?((N=f.ctx).globalCompositeOperation="source-out",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(d.target.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",d.target.ctx.clearRect(0,0,P,C),Ke.releaseCacheCanvas(d.target.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),N.globalCompositeOperation="source-over",f.draw(N),f.ctx.clearRect(0,0,P,C),Ke.releaseCacheCanvas(f.canvas)):((N=d.target.ctx).globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",f.ctx.clearRect(0,0,P,C),Ke.releaseCacheCanvas(f.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),p=d.target,N.drawImage(p.canvas,0,0),N.globalCompositeOperation="source-over",p.draw(N),p.ctx.clearRect(0,0,P,C),Ke.releaseCacheCanvas(d.target.canvas))),Y=h})(Y)},renderSvg:function(Q,tt,et,t){for(var rt,nt,it,at=t.__structs,ot=t.width,st=t.height,ht={},lt=[],ct=[],ut=0,_t=0,e=at.length;_t<e;_t++)!function(t){var e,r,n,i=at[t],l=i[uf],a=i[ff],o=i[df],s=i[pf],c=l.__config,h=c[j_],u=c[of],_=c[lf];o&&(ht[(r=(e=t+(a||0)+1)+o)-1]={index:t,start:e,end:r,isClip:at[e][uf].isClip}),s<ut?(lt.splice(s),rt=lt[s-1],ct.splice(s),nt=ct[s-1]):ut<s&&(lt.push(it.__matrix),n=it.virtualDom,ct.push(n),nt=n);var f=void 0;if(u<mf&&!(l instanceof An)){f=l.virtualDom;_.forEach(function(t){et.add(t)}),h&&h.available?(t+=a||0,f.cache=!0):(h&&(h.available=!0),f=l.__virtualDom=Ue.extend({},f),l instanceof Mc&&!(l instanceof Zc)&&(f.children=[]),delete f.cache,"none"===l.computedStyle[F_]&&(t+=a||0));var d,p,v,y,g=c[rf],m=c[ef],E=c[hf];if(Ef(u,vf)&&(d=l.__calMatrix(u,E,g,m),p=c[J_],d&&p&&(p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5]),!d||We.isE(d)?delete f.transform:f.transform="matrix("+Ue.joinArr(d,",")+")",rt&&d&&(d=We.multiply(rt,d)),(p=c[Q_])&&d&&(p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],p[4]=d[4],p[5]=d[5])),Ef(u,yf)&&(1===(v=m[B_]=g[B_])?delete f.opacity:f.opacity=v),Ef(u,gf)){var T=m[G_]=g[G_];delete f.filter;for(var O=_.length-1;0<=O;O--){var M=_[O];"filter"===M.tagName&&(et.removeCache(M),_.splice(O,1))}Array.isArray(T)&&T.forEach(function(t){var e,r,n,i,a,o=Ge(t,2),s=o[0],h=o[1];"blur"===s&&0<h&&(i={tagName:"filter",props:[["x",-(e=We.int2convolution(h))/(r=l.outerWidth)],["y",-e/(n=l.outerHeight)],["width",1+2*e/r],["height",1+2*e/n]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",h]]}]},a=et.add(i),c[lf].push(i),f.filter="url(#"+a+")")})}Ef(u,Tf)&&("normal"!==(y=m[W_]=g[W_])?f.mixBlendMode=y:delete f.mixBlendMode),f.lv=u}else{c[lf]&&c[lf].splice(0),l instanceof Ku&&(l.__renderSelfData=l.__renderSelf(Q,u,tt,et)),l.render(Q,u,tt,et),f=l.virtualDom,"none"===l.computedStyle[F_]&&(t+=a||0)}if(ht.hasOwnProperty(t)){var A=ht[t],b=A.index,R=A.start,x=A.end,S=A.isClip,k=at[b][uf],I=[];S&&I.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(ot,",0L").concat(ot,",").concat(st,"L0,").concat(st,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var N=R;N<x;N++){var w=at[N][uf],D=w.computedStyle,P=D[F_],C=D[H_],L=D[U_],F=w.virtualDom.children;if("none"!==P&&"hidden"!==C){I=I.concat(F);for(var B=0,H=F.length;B<H;B++){var G=F[B],Y=G.tagName,W=G.props;if("path"===Y){if(S)for(var U=0,X=W.length;U<X;U++){var K=W[U];"fill"===K[0]&&(K[1]=Ue.int2invert(L))}var z=w.renderMatrix,V=We.inverse(k.renderMatrix),z=We.multiply(z,V),j=W.length;j&&"transform"===W[j-1][0]?W[j-1][1]="matrix(".concat(z,")"):W.push(["transform","matrix(".concat(z,")")])}}}for(var $=_.length-1;0<=$;$--){var q=_[$];"mask"===q.tagName&&(et.removeCache(q),_.splice($,1))}var Z={tagName:"mask",props:[],children:I},J=et.add(Z);_.push(Z),J="url(#"+J+")",k.virtualDom.mask=J}}nt&&!l.isMask&&nt.children.push(f),0===t&&(rt=c[J_],nt=f),ut=s,it=l,_t=t}(_t)}},bf=p.STYLE_KEY,Rf=bf.TOP,xf=bf.RIGHT,Sf=bf.BOTTOM,kf=bf.LEFT,If=bf.POSITION,Nf=bf.DISPLAY,wf=bf.VISIBILITY,Df=bf.COLOR,Pf=bf.WIDTH,Cf=bf.HEIGHT,Lf=bf.Z_INDEX,Ff=bf.MARGIN_TOP,Bf=bf.MARGIN_LEFT,Hf=bf.PADDING_TOP,Gf=bf.PADDING_LEFT,Yf=bf.BORDER_TOP_WIDTH,Wf=bf.BORDER_LEFT_WIDTH,Uf=p.UPDATE_KEY,Xf=Uf.UPDATE_NODE,Kf=Uf.UPDATE_STYLE,zf=Uf.UPDATE_KEYS,Vf=Uf.UPDATE_COMPONENT,jf=Uf.UPDATE_FOCUS,$f=Uf.UPDATE_IMG,qf=Uf.UPDATE_MEASURE,Zf=Uf.UPDATE_OVERWRITE,Jf=Uf.UPDATE_LIST,Qf=Uf.UPDATE_CONFIG,td=p.NODE_KEY,ed=td.NODE_TAG_NAME,rd=td.NODE_CACHE_STYLE,nd=td.NODE_CACHE_PROPS,id=td.NODE_CURRENT_STYLE,ad=td.NODE_COMPUTED_STYLE,od=td.NODE_CURRENT_PROPS,sd=td.NODE_DOM_PARENT,hd=td.NODE_IS_MASK,ld=td.NODE_REFRESH_LV,cd=td.NODE_IS_DESTROYED,ud=td.NODE_STYLE,_d=td.NODE_UPDATE_HASH,fd=td.NODE_UNIQUE_UPDATE_ID,dd=td.NODE_CACHE,pd=td.NODE_CACHE_TOTAL,vd=td.NODE_CACHE_FILTER,yd=td.NODE_CACHE_OVERFLOW,gd=td.NODE_CACHE_MASK,md=td.NODE_STRUCT,Ed=p.STRUCT_KEY,Td=Ed.STRUCT_INDEX,Od=Ed.STRUCT_TOTAL,Md=Ed.STRUCT_NODE,Ad=(c(Mf={},Rf,!0),c(Mf,xf,!0),c(Mf,Sf,!0),c(Mf,kf,!0),Mf),bd=Ue.isNil,Rd=Ue.isObject,xd=Ue.isFunction,Sd=R.AUTO,kd=R.PX,Id=R.PERCENT,Nd=R.INHERIT,wd=sn.calRelative,Dd=sn.isRelativeOrAbsolute,Pd=sn.equalStyle,Cd=Io.contain,Ld=Io.getLevel,Fd=Io.isRepaint,Bd=Io.NONE,Hd=Io.FILTER,Gd=Io.REPAINT,Yd=Io.REFLOW,Wd=Oe.isIgnore,Ud=Oe.isGeom,Xd=Oe.isMeasure;function Kd(t,e,r){var n=t.currentStyle[r],i=t.computedStyle[r];if(n[1]===kd)return n[0]===i;if(n[1]!==Id)return!1;var a=t.domParent.__layoutData["width"===r?"w":"h"];return n[0]*a*.01===i}function zd(t){return Kd(t,0,Pf)&&Kd(t,0,Cf)}var Vd=1;function jd(t,e){return t.hasOwnProperty("__uniqueReflowId")&&e[t.__uniqueReflowId]>=Vd}function $d(t,e,r){var n,i,a;i=e,a=r,(n=t).hasOwnProperty("__uniqueReflowId")||(n.__uniqueReflowId=qd,i[qd++]={node:n,lv:Vd,component:a}),e[t.__uniqueReflowId].lv|=Vd}var qd=0;var Zd=0;function Jd(t,e,r,n,i,a,o,s,h){var l,c=r[Xf],u=r[Kf],_=r[Zf],f=r[jf],d=r[$f],p=r[Vf],v=r[qf],y=r[Jf],g=r[zf],m=r[Qf];if(!m[cd]){_&&Object.assign(m[ud],_),y&&!p&&(g=(g||[]).slice(0),l={},g.forEach(function(t){l[t]=!0}),y.forEach(function(t){var e=t[Kf],r=t[Zf];(t[zf]||[]).forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,g.push(t))}),r&&Object.assign(m[ud],r),e&&(u?Object.assign(u,e):u=e)}));var E,T,O,M,A=m[ed],b=m[rd],R=m[nd],x=m[id],S=m[ad],k=m[od],I=m[sd],N=m[hd],w=f||Bd,D=v;if(!p&&u&&g)for(var P=0,C=g.length;P<C;P++){var L=g[P],F=u[L];if(c instanceof Ku&&Ud(A,L))Pd(L,F,k[L],c)||(w|=Gd,R[L]=void 0,k[L]=F);else if(!Pd(L,F,x[L],c))if(Wd(L))b[L]=void 0,x[L]=F;else{if(Ad.hasOwnProperty(L)){var B=x[If];if("relative"!==B&&"absolute"!==B){delete u[L];continue}}else L===Nf&&(M=!0);w|=Ld(L),Xd(L)&&(D=!0),b[L]=void 0,x[L]=F,L===Lf&&c!==e&&(E=!0),L===wf&&(T=!0),L===Df&&(O=!0)}}if(w!==Bd||p){if(E&&I&&delete I.__zIndexChildren,T||O)for(var H=e.__structs,G=c.__config[md],Y=G[Td]+1,W=Y+G[Od];Y<W;Y++){var U=H[Y],X=U[Md],K=U[Od],z=X.__config,V=z[id],j=void 0;T&&(X instanceof An||V[wf][1]===Nd)&&(j=!0),O&&(X instanceof An||V[Df][1]===Nd)&&(j=!0),j?(z[ld]|=Gd,X instanceof _l&&X.__cancelCache()):Y+=K||0}if(N){for(var $=c.prev;$&&$.isMask;)$=$.prev;$&&$.__config[gd]&&($.__config[gd].release(),$.__config[gd]=null)}!p&&Fd(w)?(E&&t===Ye.SVG&&(w|=Gd,I&&Qd(I)),E&&!p&&s&&I&&!I.hasOwnProperty("__uniqueZId")&&(s[Zd]=!0,I.__uniqueZId=Zd++,h.push(I))):(n.push({node:c,style:u,img:d,component:p}),D&&i.push(c)),m[ld]=w;var q=Gd<=w||t===Ye.SVG&&c instanceof Ku;if(q&&(m[dd]&&m[dd].release(),m[pd]&&m[pd].release(),m[gd]&&(m[gd].release(),m[gd]=null),m[yd]&&(m[yd].release(),m[yd]=null)),(q||Cd(w,Hd))&&m[vd]&&(m[vd].release(),m[vd]=null),"none"===S[Nf]&&w<Yd)return!1;var Z=I;if(M)for(;Z;){var J=Z.__config;if("none"===J[ad][Nf])return!(S[Nf]="none");Z=J[sd]}for(Z=I;Z;){var Q=Z.__config;if(Q.hasOwnProperty(fd)){var tt=Q[fd];if(a.hasOwnProperty(tt))break;a[tt]=!0}else a[Zd]=!0,Q[fd]=Zd++,o.push(Z);var et=Q[ld];Gd<=et&&Q[dd]&&Q[dd].release(),Q[pd]&&Q[pd].release(),Q[vd]&&(Q[vd].release(),Q[vd]=null),Q[gd]&&(Q[gd].release(),Q[gd]=null),Q[yd]&&(Q[yd].release(),Q[yd]=null),Z=Q[sd]}return!0}delete m[fd]}}function Qd(t,e){var r=t.__config;e?r[ld]|=Gd:r[pd].release(),Array.isArray(t.children)&&t.children.forEach(function(t){t instanceof xl&&(t=t.shadowRoot),t instanceof An||Qd(t,!0)})}var tp=0,ep=function(){t(a,Mc);var i=e(a);function a(t,e,r){var n;return g(this,a),(n=i.call(this,t,e)).__cd=r||[],n.__dom=null,n.__mw=0,n.__mh=0,n.__task=[],n.__ref={},n.__updateHash={},n.__reflowList=[{node:h(n)}],n.__animateController=new P_,Ii.mix(h(n)),n.__config[_d]=n.__updateHash,n}return l(a,[{key:"__initProps",value:function(){var t,e=this.props.width;bd(e)||0<(t=parseFloat(e)||0)&&(this.__width=t);var r,n=this.props.height;bd(n)||0<(r=parseFloat(n)||0)&&(this.__height=r)}},{key:"__genHtml",value:function(){var r=this,n="<".concat(this.tagName);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(n+=function(t,e){var r=Array.isArray(e)?Ue.joinSourceArray(e):Ue.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+Ue.encodeHtml(r,!0)+'"'}(t,e))}),n+="></".concat(this.tagName,">")}},{key:"__wrapEvent",value:function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f;return-1===["touchend","touchcancel"].indexOf(t.type)&&(e=this.dom,r=this.__scx,n=this.__scy,a=(i=e.getBoundingClientRect()).x,o=i.y,s=i.left,h=i.top,l=i.width,c=i.height,u=a||s||0,_=o||h||0,u=(f=t.touches?t.touches[0]:t).clientX-u,_=f.clientY-_,bd(r)?u*=this.width/l:u/=r,bd(n)?_*=this.height/c:_/=n),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:u,y:_,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e),e}}},{key:"appendTo",value:function(t){var e,n;t=function(t){if(Ue.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Ol.initRoot(this.__cd,this),this.__initProps(),(this.__root=this).cache=!!this.props.cache,t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(this.tagName),this.__dom||(t.innerHTML=this.__genHtml(),this.__dom=t.querySelector(this.tagName))),this.__uuid=bd(this.__dom.__uuid)?tp++:this.__dom.__uuid,this.__defs=this.dom.__defs||eu.getInstance(this.__uuid),this.width&&this.height||(e=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=Ye.CANVAS):"svg"===this.tagName&&(this.__renderMode=Ye.SVG),this.refresh(null,!0),this.dom.__root?this.dom.__root.destroy():(n=this.dom,["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(r){n.addEventListener(r,function(t){var e=n.__root;-1<["touchend","touchcancel","touchmove"].indexOf(r)?e.__touchstartTarget&&e.__touchstartTarget.__emitEvent(e.__wrapEvent(t),!0):e.__cb(t)})}),this.dom.__uuid=this.__uuid),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r,n=this.isDestroyed,i=this.renderMode,a=this.ctx,o=this.defs,s=this.width,h=this.height;if(!n){if(o.clear(),e)this.__checkRoot(s,h),this.__computeMeasure(i,a);else if(!this.__checkUpdate(i,a,s,h))return;Ke.measureText(),this.__checkReflow(s,h),i===Ye.CANVAS?(this.__clear(a),this.cache?Af.renderCacheCanvas(i,a,o,this):Af.renderCanvas(i,a,o,this)):i===Ye.SVG&&(Af.renderSvg(i,a,o,this),(r=this.virtualDom).defs=o.value,this.dom.__root?E_(this.dom,this.dom.__vd,r):this.dom.innerHTML=Ue.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=o),xd(t)&&t(),this.emit(Ii.REFRESH)}}},{key:"destroy",value:function(){this.__destroy(),Pi.offFrame(this.__rTask);var t=this.dom;t&&(t.__root=null)}},{key:"scale",value:function(t,e){var r=0<arguments.length&&void 0!==t?t:1,n=1<arguments.length&&void 0!==e?e:r;this.__scx=r,this.__scy=n}},{key:"resize",value:function(t,e,r){t===this.width&&e===this.height||(this.__width=t,this.__hegiht=e,this.addRefreshTask(r||function(){}))}},{key:"addRefreshTask",value:function(t){var e,i,a=this;t&&((e=this.task).length||(Pi.nextFrame(this.__rTask={__before:function(r){var n;(i=e.splice(0)).length&&(n=[],i.forEach(function(t,e){Rd(t)&&xd(t.__before)&&(t.__state&&n.push(e),t.__before(r))}),n.length&&u_.check(a),u_.updateList.length&&u_.updateList.forEach(function(t){var e=t.shadowRoot;e instanceof An&&(e=e.domParent);var r={};r[Xf]=e,r[Kf]=e.currentStyle,r[jf]=Yd,r[qf]=!0,r[Vf]=t,r[Qf]=e.__config,a.__addUpdate(e,e.__config,a,a.__config,r)}))},__after:function(e){i.forEach(function(t){Rd(t)&&xd(t.__after)?t.__after(e):xd(t)&&t(e)}),u_.did()}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t){for(var e=this.task,r=0,n=e.length;r<n;r++)if(e[r]===t){e.splice(r,1);break}e.length||Pi.offFrame(this.__rTask)}}},{key:"__checkRoot",value:function(t,e){var r=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(r[Nf])&&(n[Nf]=r[Nf]="block"),"absolute"===r[If]&&(n[If]=r[If]="static"),r[Pf]=[t,kd],r[Cf]=[e,kd],n[Pf]=t,n[Cf]=e}},{key:"__addUpdate",value:function(t,e,r,n,i){var a,o,s,h=n[_d];t===r?(h=r.__updateRoot)?(i[$f]&&(h[$f]=i[$f]),i[jf]&&(h[jf]|=i[jf]),i[qf]&&(h[qf]=!0),i[Kf]&&(h[Jf]=h[Jf]||[]).push((c(a={},Kf,i[Kf]),c(a,Zf,i[Zf]),c(a,zf,i[zf]),a))):r.__updateRoot=i:e.hasOwnProperty(fd)?h.hasOwnProperty(e[fd])?(o=h[e[fd]],i[$f]&&(o[$f]=i[$f]),i[jf]&&(o[jf]|=i[jf]),i[qf]&&(o[qf]=!0),i[Kf]&&(o[Jf]=o[Jf]||[]).push((c(s={},Kf,i[Kf]),c(s,Zf,i[Zf]),c(s,zf,i[zf]),s))):Ke.error("Update process miss uniqueUpdateId"):(e[fd]=Zd,h[Zd++]=i)}},{key:"__checkUpdate",value:function(s,h,t,e){var l=this,r=[],n=[],i={},a=[],o={},c=[],u=l.__updateRoot,_=l.__updateHash;u&&(l.__updateRoot=null,y=Jd(s,l,u,n,r,i,a),l.__checkRoot(t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var v=Jd(s,l,_[f[d]],n,r,i,a,o,c),y=y||v;l.__reflowList=n,Zd=0,l.__updateHash=l.__config[_d]={},a.forEach(function(t){delete t.__config[fd]}),c.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(l.__structs))});var g={};r.forEach(function(t){var e=t.__config[fd],r=t.domParent;if(!g.hasOwnProperty(e)){g[e]=!0;var n=t;if(Oe.isMeasureInherit(_[e][Kf]))for(;r&&r!==l;){var i,a=r.__config[fd],o=r.currentStyle;if(!(r.__config.hasOwnProperty(fd)?(i=_[a][Kf],g[a]=!0,!!Oe.measureInheritList(i).length):Oe.isMeasureInherit(o)))break;r=(n=r).domParent}n.__computeMeasure(s,h,function(t){t.__config.hasOwnProperty(fd)&&(g[t.__config[fd]]=!0)})}});for(var m=0,E=f.length;m<E;m++)delete _[f[m]][Qf][fd];return y}},{key:"__checkReflow",value:function(t,e){var st=this,r=this.__reflowList;if(r.length){for(var n,ht=this,lt={},i=qd=0,a=r.length;i<a;i++){var o=r[i],s=o.node,h=o.style,l=o.img,c=o.component;if(s===this){n=!0;break}var u=s.currentStyle,_=s.computedStyle;s.hasOwnProperty("__uniqueReflowId")||(s.__uniqueReflowId=qd,lt[qd++]={node:s,lv:0,img:l,component:c});var f=lt[s.__uniqueReflowId];if("absolute"===u[If]&&"absolute"===_[If])f.lv=Vd;else if(u[If]!==_[If]){if(f.lv=Vd,R(s,c,!0)){n=!0;break}}else{var d=!0;if(h)for(var p=Object.keys(h),v=0,y=p.length;v<y;v++){var g=p[v];if(!Ad.hasOwnProperty(g)){d=!1;break}}if(!d||l||c){if(f.lv=Vd,R(s,c)){n=!0;break}}else"relative"===_[If]&&(f.lv|=0)}}if(qd=0,this.__reflowList=[],n)return r.forEach(function(t){return delete t.node.__uniqueReflowId}),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;var m=[];this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){var r,n=lt[t.__uniqueReflowId];return delete t.__uniqueReflowId,n.lv>=Vd||(r=[],t.__deepScan(function(t,e){},{uniqueList:r}),r.forEach(function(t){e.uniqueList.push(t)})),e.uniqueList.push(n),!0}},{uniqueList:m});var ct=[],ut=0;m.forEach(function(t){var e=t.node,r=t.lv,n=t.component;if(Vd<=r){var i=e.computedStyle,a=e.currentStyle,o=i[Lf],s=i[If],h=i[Nf],l="absolute"===s,c="absolute"===a[If],u="none"===h,_="none"===a[Nf];if(u&&_)return;for(var f=e.domParent,d=f.__layoutData,p=d.x,v=d.y,y=(d.w,d.h),g=f.width,m=f.computedStyle,E=e;n&&E.isShadowRoot;)E=E.host;var T=E.prev;T?(v=T.y,v+=T.outerHeight):(v=f.y,v+=m[Ff]+m[Yf]+m[Hf]),p+=m[Bf]+m[Wf]+m[Gf];var O,M=e.outerWidth,A=e.outerHeight,b=e;if(c){for(b=b.domParent;b&&b!==ht&&!Dd;)if(b.parent)b=b.parent;else if(b.host)break;var R,b=b||ht;if(n?f.__layoutAbs(b,null,n):f.__layoutAbs(b,null,e),l)return void(n&&(R=e.__modifyStruct(ht,ut),ut+=R[1],ct.push(R),(s===a[If]||"static"!==s&&"static"!==a[If])&&o===a[Lf]||(e.domParent.__updateStruct(ht.__structs),st.renderMode===Ye.SVG&&Qd(e.domParent))));O=!0}else e.__layout({x:p,y:v,w:g,h:y}),e instanceof Mc&&(!e.parent&&e.host&&(b=e),e.__layoutAbs(b,{x:p,y:v,w:g,h:y}));var x,S,k,I,N="absolute"===e.computedStyle[s];I=O?(x=-M,-A):(S=e.outerWidth,k=e.outerHeight,N?(x=S,k):(x=S-M,k-A));for(var w,D,P=e;P&&P!==ht;)if("relative"===(m=(P=P.domParent).computedStyle)[s]){var C=P.ox,L=P.oy;C&&e.__offsetX(C),L&&e.__offsetY(L);break}if(x||I){for(var F,B=e;;){for(;B.isShadowRoot;)B=B.host;for(var H=(F=B).next;H;)"absolute"===H.currentStyle[If]?H.currentStyle[Rf][1]===Sd&&H.currentStyle[Sf][1]===Sd&&(H.__offsetY(I,!0,Yd),H.__cancelCache()):(!H.hasOwnProperty("____uniqueReflowId")||lt[H.____uniqueReflowId]<Vd)&&(H.__offsetY(I,!0,Yd),H.__cancelCache()),H=H.next;if((B=B.parent)===ht)break;var G,Y=B.currentStyle,W="absolute"===Y[If];if(x&&(G=void 0,W&&(Y[Pf][1]!==Sd||Y[kf][1]!==Sd&&Y[xf][1]!==Sd||(G=!0)),G&&(B.__resizeX(x),B.__cancelCache(),B.__config[ld]|=Yd)),I){var U=void 0;if(W?Y[Cf][1]!==Sd||Y[Rf][1]!==Sd&&Y[Sf][1]!==Sd||(U=!0):Y[Cf][1]===Sd&&(U=!0),!U)break;B.__resizeY(I),B.__cancelCache(),B.__config[ld]|=Yd}}for(;F;)F.__cancelCache(),F=F.domParent}n?(w=e.__modifyStruct(ht,ut),ut+=w[1],ct.push(w),(s===a[If]||"static"!==s&&"static"!==a[If])&&o===a[Lf]||(e.domParent.__updateStruct(ht.__structs),st.renderMode===Ye.SVG&&Qd(e.domParent))):(u||_)&&(e.__zIndexChildren=null,D=e.__modifyStruct(ht,ut),ut+=D[1],ct.push(D))}else{var X=e.currentStyle,K=X[Rf],z=X[xf],V=X[Sf],j=X[kf],$=e.currentStyle,q=e.computedStyle,Z=q[Rf],J=q[xf],Q=q[Sf],tt=q[kf],et=e.computedStyle,rt=e===st?e:e.domParent,nt=0;K[1]!==Sd?(nt=wd($,"top",K,rt),et[Rf]=nt,et[Sf]="auto"):V[1]!==Sd?(nt=-wd($,"bottom",V,rt),et[Sf]=-nt,et[Rf]="auto"):et[Rf]=et[Sf]="auto";var it=0;"auto"!==Z?it=Z:"auto"!==Q&&(it=-Q),nt!==it&&e.__offsetY(nt-it,!1,Yd);var at=0;j[1]!==Sd?(at=wd($,"left",j,rt),et[kf]=at,et[xf]="auto"):z[1]!==Sd?(at=-wd($,"right",z,rt),et[xf]=-at,et[kf]="auto"):et[kf]=et[xf]="auto";var ot=0;"auto"!==tt?ot=tt:"auto"!==J&&(ot=-J),at!==ot&&e.__offsetX(at-ot,!1,Yd)}});var E=0,T=0,O=!0,M=ht.__structs;ct.forEach(function(t){var e=Ge(t,2),r=e[0],n=e[1];if(O)O=!1,T=r[Td]+(r[Od]||0)+1,E+=n;else{for(var i=r[Td]+(r[Od]||0)+1+E,a=T;a<i;a++)M[a][Td]+=E;T=i,E+=n}});for(var A=T,b=M.length;A<b;A++)M[A][Td]+=E;r.forEach(function(t){return delete t.node.__uniqueReflowId})}function R(t,e,r){if(!zd(t)||r){var n=t;if("inline"===t.currentStyle[Nf]||"inline"===t.computedStyle[Nf]){var i=t.domParent;do{if((n=i)===ht)return 1;if(jd(i,lt))return;if("absolute"===i.currentStyle[If]||"absolute"===i.computedStyle[If])return void $d(i,lt,e);if(zd(i))return void $d(i,lt,e);i=i.domParent}while(i&&("inline"===i.currentStyle[Nf]||"inline"===i.computedStyle[Nf]));if(zd(n))return void $d(n,lt,e)}var a=n.domParent;if(!a||!jd(a,lt)){if(a&&("flex"===a.computedStyle[Nf]||"flex"===a.currentStyle[Nf])){do{if((n=a)===ht)return 1;if(jd(a,lt))return;if("absolute"===a.currentStyle[If]||"absolute"===a.computedStyle[If])return void $d(a,lt,e);if(zd(a))return void $d(a,lt,e);a=a.domParent}while(a&&("flex"===a.computedStyle[Nf]||"flex"===a.currentStyle[Nf]));if(zd(n))return void $d(n,lt,e)}(a=n.domParent)&&jd(a,lt)||n!==t&&$d(n,lt,e)}}}}},{key:"__computeMeasure",value:function(e,r){sn.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},Pi.__hookTask.push(t))}},{key:"__clear",value:function(t){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)}},{key:"dom",get:function(){return this.__dom}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"task",get:function(){return this.__task}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),a}(),rp=p.STYLE_KEY,np=rp.PADDING_TOP,ip=rp.PADDING_LEFT,ap=rp.STROKE_WIDTH,op=rp.BOX_SHADOW,sp=rp.FILTER,hp=Ue.isNil;function lp(t,e,r,n){return n?t.map(function(t){return e+t*r}):e+t*r}function cp(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function up(t){return t<0?t=0:1<t&&(t=1),t}function _p(t,e,r,n,i,a,o,s,h){var l,c,u,_,f,d,p,v,y,g,m,E=7<arguments.length&&void 0!==s?s:0,T=8<arguments.length&&void 0!==h?h:1;return(0<E||T<1)&&(3===o?(l=Ge(Xe.sliceBezier2Both([[t,e],i,a,[r,n]],E,T),4),t=(c=Ge(l[0],2))[0],e=c[1],i=l[1],a=l[2],r=(u=Ge(l[3],2))[0],n=u[1]):2===o?(_=Ge(Xe.sliceBezier2Both([[t,e],a,[r,n]],E,T),3),t=(f=Ge(_[0],2))[0],e=f[1],a=_[1],r=(d=Ge(_[2],2))[0],n=d[1]):1===o?(p=Ge(Xe.sliceBezier2Both([[t,e],i,[r,n]],E,T),3),t=(v=Ge(p[0],2))[0],e=v[1],i=p[1],r=(y=Ge(p[2],2))[0],n=y[1]):(t+=(g=Math.abs(t-r))*E,e+=(m=Math.abs(e-n))*E,r-=g*(1-T),n-=m*(1-T))),[t,e,r,n,i,a]}var fp=function(){t(G,Ku);var h=e(G);function G(t,e){var r,n,i,a;if(g(this,G),(r=h.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):hp(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):hp(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):hp(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):hp(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return up(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else{hp(e.start)||(n=up(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),up(e)});for(var s=r.__end.length;s<r.__x1.length;s++)r.__end.push(1)}else{hp(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=up(i),r.__end=r.__x1.map(function(){return i}))}}else{r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],hp(e.x1)||(r.__x1=parseFloat(e.x1)||0),hp(e.y1)||(r.__y1=parseFloat(e.y1)||0),hp(e.x2)||(r.__x2=parseFloat(e.x2)||0),hp(e.y2)||(r.__y2=parseFloat(e.y2)||0),hp(e.start)||(r.__start=up(parseFloat(e.start)||0)),hp(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=up(a)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB)}return r}return l(G,[{key:"buildCache",value:function(e,r){var n,i=this,a=this.width,o=this.height,s=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){hp(s[t])&&(n=!0,s[t]=lp(i[t],e,a,h))}),["y1","y2"].forEach(function(t){hp(s[t])&&(n=!0,s[t]=lp(i[t],r,o,h))}),["controlA","controlB"].forEach(function(t){hp(s[t])&&(n=!0,s[t]=function e(t,r,n,i,a,o){if(o){if(t)return t.map(function(t){return e(t,r,n,i,a)})}else if(t&&2<=t.length)return[r+t[0]*i,n+t[1]*a];return[]}(i[t],e,r,a,o,h))}),["start","end"].forEach(function(t){hp(s[t])&&(n=!0,s[t]=i[t])}),n}},{key:"render",value:function(t,e,u,r){var n=rt(et(G.prototype),"render",this).call(this,t,e,u,r);if(n.break)return n;var _,i,a,o,s,h,l,c,f,d,p,v=n.originX,y=n.originY,g=n.stroke,m=n.strokeWidth,E=n.strokeDasharrayStr,T=n.strokeLinecap,O=n.strokeLinejoin,M=n.strokeMiterlimit,A=n.dx,b=n.dy,R=this.__cacheProps,x=this.isMulti;this.buildCache(v,y)&&t===Ye.SVG&&(_="",x?R.x1.forEach(function(t,e){var r,n=R.x2[e],i=R.y1[e],a=R.y2[e],o=R.controlA[e],s=R.controlB[e],h=R.start[e],l=R.end[e],c=cp(o,s);0===h&&1===l||(t=(r=Ge(_p(t,i,n,i,o,s,c,h,l,R.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),_+=bn.svgLine(t,i,n,a,o,s,c)}):(i=cp(R.controlA,R.controlB),h=R.x1,l=R.y1,c=R.x2,f=R.y2,d=R.controlA,p=R.controlB,a=R.start,o=R.end,0===a&&1===o||(h=(s=Ge(_p(h,l,c,f,d,p,i,a,o,R.len),6))[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5]),_=bn.svgLine(h,l,c,f,d,p,i)),R.d=_);var S,k,I,N,w,D,P,C,L,F,B,H=0<m&&"radial"===g.k&&Array.isArray(g.v);return t===Ye.CANVAS?0<m&&"none"!==g&&(H&&(u.strokeStyle=g.v[0]),u.beginPath(),x?R.x1.forEach(function(t,e){var r,n=R.x2[e],i=R.y1[e],a=R.y2[e],o=R.controlA[e],s=R.controlB[e],h=R.start[e],l=R.end[e],c=cp(o,s);0===h&&1===l||(t=(r=Ge(_p(t,i,n,i,o,s,c,h,l,R.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),bn.canvasLine(u,t,i,n,a,o,s,c,A,b)}):(S=cp(R.controlA,R.controlB),w=R.x1,D=R.y1,P=R.x2,C=R.y2,L=R.controlA,F=R.controlB,k=R.start,I=R.end,0===k&&1===I||(w=(N=Ge(_p(w,D,P,C,L,F,S,k,I,R.len),6))[0],D=N[1],P=N[2],C=N[3],L=N[4],F=N[5]),bn.canvasLine(u,w,D,P,C,L,F,S,A,b)),u.stroke(),u.closePath()):t===Ye.SVG&&(B=[["d",R.d],["fill","none"],["stroke",H?g.v[0]:g.v||g],["stroke-width",m]],this.__propsStrokeStyle(B,E,T,O,M),this.addGeom("path",B)),n}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[np],i=r[ip],a=r[ap],o=r[op],s=r[sp],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var _=l.x1,f=l.y1,d=l.x2,p=l.y2,v=l.controlA,y=l.controlB,g=rt(et(G.prototype),"bbox",this),m=.5*a,E=Ge(this.__spreadByBoxShadowAndFilter(o,s),2),T=E[0],O=E[1];return T+=m,O+=m,h||(_=[_],d=[d],f=[f],p=[p],v=[v],y=[y]),_.forEach(function(t,e){var r,n,i,a=f[e],o=d[e],s=p[e],h=v[e],l=y[e];(hp(h)||h.length<2)&&(hp(l)||l.length<2)?(g[0]=Math.min(g[0],t-T),g[0]=Math.min(g[0],o-T),g[1]=Math.min(g[1],a-O),g[1]=Math.min(g[1],s-O),g[2]=Math.max(g[2],t+T),g[2]=Math.max(g[2],o+T),g[3]=Math.max(g[3],a+O),g[3]=Math.max(g[3],s+O)):hp(h)||h.length<2?(r=Xe.bboxBezier(t,a,l[0],l[1],o,s),g[0]=Math.min(g[0],r[0]-T),g[0]=Math.min(g[0],r[2]-T),g[1]=Math.min(g[1],r[1]-O),g[1]=Math.min(g[1],r[3]-O),g[2]=Math.max(g[2],r[0]+T),g[2]=Math.max(g[2],r[2]+T),g[3]=Math.max(g[3],r[1]+O),g[3]=Math.max(g[3],r[3]+O)):hp(l)||l.length<2?(n=Xe.bboxBezier(t,a,h[0],h[1],o,s),g[0]=Math.min(g[0],n[0]-T),g[0]=Math.min(g[0],n[2]-T),g[1]=Math.min(g[1],n[1]-O),g[1]=Math.min(g[1],n[3]-O),g[2]=Math.max(g[2],n[0]+T),g[2]=Math.max(g[2],n[2]+T),g[3]=Math.max(g[3],n[1]+O),g[3]=Math.max(g[3],n[3]+O)):(i=Xe.bboxBezier(t,a,h[0],h[1],l[0],l[1],o,s),g[0]=Math.min(g[0],i[0]-T),g[0]=Math.min(g[0],i[2]-T),g[1]=Math.min(g[1],i[1]-O),g[1]=Math.min(g[1],i[3]-O),g[2]=Math.max(g[2],i[0]+T),g[2]=Math.max(g[2],i[2]+T),g[3]=Math.max(g[3],i[1]+O),g[3]=Math.max(g[3],i[3]+O))}),g}}]),G}(),dp=p.STYLE_KEY,pp=dp.PADDING_TOP,vp=dp.PADDING_LEFT,yp=dp.STROKE_WIDTH,gp=dp.BOX_SHADOW,mp=dp.FILTER,Ep=Ue.isNil;function Tp(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Op(t){return t<0?t=0:1<t&&(t=1),t}function Mp(t,e){var r=[],n=0,i=[];if(e)n=[],t.forEach(function(t){var e=Mp(t);r.push(e.list),n.push(e.total),i.push([0].concat(e.increase))});else if(Array.isArray(t)){n=0,i.push(0);for(var a=0,o=0,s=t.length;o<s;o++){var h=t[o];if(Array.isArray(h)){a=o;break}}for(var l=t[a],c=a+1,u=t.length;c<u;c++){var _,f,d,p,v,y=t[c];Array.isArray(y)&&(2===y.length?(_=Math.abs(y[0]-l[0]),f=Math.abs(y[1]-l[1]),d=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(d),n+=d,i.push(n),l=y):4===y.length?(p=Xe.bezierLength([l,[y[0],y[1]],[y[2],y[3]]],2),r.push(p),n+=p,i.push(n),l=[y[2],y[3]]):6===y.length&&(v=Xe.bezierLength([l,[y[0],y[1]],[y[2],y[3]],[y[4],y[5]]],3),r.push(v),n+=v,i.push(n),l=[y[4],y[5]]))}}return{list:r,total:n,increase:i}}function Ap(t,e,r,n){if(r===n)return t[r]>e?r-1:r;var i=r+(n-r>>1);return t[i]===e?i:t[i]>e?Ap(t,e,r,Math.max(i-1,r)):Ap(t,e,Math.min(i+1,n),n)}function bp(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:0,a=3<arguments.length&&void 0!==n?n:1;if(0===i&&1===a)return t;if(a<=i)return[];var o=0,s=t.length-2;0<i&&(o=Ap(e.increase,i*e.total,o,s)),a<1&&(s=Ap(e.increase,a*e.total,o,s)),t=Ue.clone(t);var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A=1;return(a*=e.total)>e.increase[s]&&(h=t[s].slice(t[s].length-2),l=t[s+1],c=e.list[s],A=u=(a-e.increase[s])/c,2===l.length?(_=Math.abs(l[0]-h[0]),f=Math.abs(l[1]-h[1]),t[s+1]=[l[1]-(1-u)*_,l[1]-(1-u)*f]):4===l.length?(d=Xe.sliceBezier([h,[l[0],l[1]],[l[2],l[3]]],u),t[s+1]=[d[1][0],d[1][1],d[2][0],d[2][1]]):6===l.length&&(p=Xe.sliceBezier([h,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],u),t[s+1]=[p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]])),(i*=e.total)>e.increase[o]&&(v=t[o].slice(t[o].length-2),y=t[o+1],g=e.list[o],o===s&&1!==A&&(g*=A),m=(i-e.increase[o])/g,2===y.length?(E=Math.abs(y[0]-v[0]),T=Math.abs(y[1]-v[1]),t[o]=[v[0]+m*E,v[1]+m*T]):4===y.length?(O=Xe.sliceBezier([[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=O[0],t[o+1]=[O[1][0],O[1][1],O[2][0],O[2][1]]):6===y.length&&(M=Xe.sliceBezier([[y[4],y[5]],[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=M[0],t[o+1]=[M[1][0],M[1][1],M[2][0],M[2][1],y[4],y[5]])),s<t.length-2&&(t=t.slice(0,s+2)),0<o&&(t=t.slice(o)),t}var Rp=function(){t(m,Ku);var h=e(m);function m(t,e){var r,n,i,a;if(g(this,m),(r=h.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return Op(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else{Ep(e.start)||(n=Op(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),Op(e)});for(var s=r.__end.length;s<r.__points.length;s++)r.__end.push(1)}else{Ep(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=Op(i),r.__end=r.__points.map(function(){return i}))}}else{r.__points=[],r.__controls=[],r.__start=0,r.__end=1,Ep(e.start)||(r.__start=Op(parseFloat(e.start)||0)),Ep(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=Op(a))}return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return l(m,[{key:"__getPoints",value:function(a,o,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var n=[],i=0;i<r;i++)i%2==0?n.push(a+t[i]*s):n.push(o+t[i]*h);return n}})}},{key:"buildCache",value:function(e,r){var t,n,i,a,o=this,s=this.width,h=this.height,l=this.points,c=this.controls,u=this.start,_=this.end,f=this.__cacheProps,d=this.isMulti;return Ep(f.points)&&(t=!0,f.points=d?l.map(function(t){if(Array.isArray(t))return o.__getPoints(e,r,s,h,t)}):this.__getPoints(e,r,s,h,l)),Ep(f.controls)&&(t=!0,f.controls=d?c.map(function(t){return Array.isArray(t)?o.__getPoints(e,r,s,h,t,!0):t}):this.__getPoints(e,r,s,h,c,!0)),Ep(f.start)&&(n=!0,f.start=u),Ep(f.end)&&(n=!0,f.end=_),t&&(i=f.points,a=f.controls,f.list2=d?i.filter(function(t){return Array.isArray(t)}).map(function(t,e){var r=a[e];if(Array.isArray(t))return t.map(function(t,e){return e?Tp(t,r&&r[e-1]):t})}):i.filter(function(t){return Array.isArray(t)}).map(function(t,e){return e?Tp(t,a[e-1]):t}),f.len=Mp(f.list2,d)),(t||n)&&(f.list=d?f.list2.map(function(t,e){if(Array.isArray(t)){var r=f.len;return bp(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},f.start[e],f.end[e])}}):bp(f.list2,f.len,f.start,f.end)),t||n}},{key:"render",value:function(t,e,r,n,i){var a=rt(et(m.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[pp],i=r[vp],a=r[yp],o=r[gp],s=r[mp],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var d=rt(et(m.prototype),"bbox",this),_=.5*a,f=Ge(this.__spreadByBoxShadowAndFilter(o,s),2),p=f[0],v=f[1];p+=_,v+=_;var y=l.points,g=l.controls;return h||(y=[y],g=[g]),y.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=g[e],n=Ge(t[0],2),i=n[0],a=n[1],o=1,s=t.length;o<s;o++){var h,l,c=Ge(t[o],2),u=c[0],_=c[1],f=r[o-1];f&&4===f.length?(h=Xe.bboxBezier(i,a,f[0],f[1],f[2],f[3],u,_),d[0]=Math.min(d[0],h[0]-p),d[1]=Math.min(d[1],h[1]-v),d[2]=Math.max(d[2],h[2]+p),d[3]=Math.max(d[3],h[3]+v)):f&&2===f.length?(l=Xe.bboxBezier(i,a,f[0],f[1],u,_),d[0]=Math.min(d[0],l[0]-p),d[1]=Math.min(d[1],l[1]-v),d[2]=Math.max(d[2],l[2]+p),d[3]=Math.max(d[3],l[3]+v)):(d[0]=Math.min(d[0],i-p),d[1]=Math.min(d[1],a-v),d[2]=Math.max(d[2],i+p),d[3]=Math.max(d[3],a+v)),i=u,a=_}}),d}}]),m}(),xp=function(){t(s,Rp);var r=e(s);function s(t,e){return g(this,s),r.call(this,t,e)}return l(s,[{key:"__getPoints",value:function(t,e,r,n,i,a){var o=rt(et(s.prototype),"__getPoints",this).call(this,t,e,r,n,i,a);return a||o.push(o[0]),o}}]),s}(),Sp=p.STYLE_KEY,kp=Sp.PADDING_TOP,Ip=Sp.PADDING_LEFT,Np=Sp.STROKE_WIDTH,wp=Sp.BOX_SHADOW,Dp=Sp.FILTER,Pp=Ue.isNil,Cp=Xe.sectorPoints;function Lp(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var Fp=function(){t(b,Ku);var n=e(b);function b(t,e){var r;return g(this,b),(r=n.call(this,t,e)).isMulti?(r.__begin=[0],r.__end=[0],r.__r=[1],Array.isArray(e.begin)&&(r.__begin=e.begin.map(function(t){return Lp(t,0)})),Array.isArray(e.end)&&(r.__end=e.end.map(function(t){return Lp(t,0)})),Array.isArray(e.r)&&(r.__r=e.r.map(function(t){return Lp(t,1)})),Array.isArray(e.edge)&&(r.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(r.__closure=e.closure.map(function(t){return!!t}))):(r.__begin=r.__end=0,r.__r=1,r.__edge=!1,r.__closure=!1,Pp(e.begin)||(r.__begin=Lp(e.begin,0)),Pp(e.end)||(r.__end=Lp(e.end,0)),Pp(e.r)||(r.__r=Lp(e.r,1)),Pp(e.edge)||(r.__edge=!!e.edge),Pp(e.closure)||(r.__closure=!!e.closure)),r}return l(b,[{key:"buildCache",value:function(a,o){var t,e,r,s=this.width,n=this.begin,h=this.end,l=this.r,c=this.edge,u=this.closure,_=this.__cacheProps,i=this.isMulti;return Pp(_.begin)&&(t=!0,_.begin=(n||0)%360),Pp(_.end)&&(t=!0,_.end=(h||0)%360),Pp(_.r)&&(t=!0,_.r=i?l.map(function(t){return t*s*.5}):l*s*.5),l=_.r,Pp(_.edge)&&(t=!0,_.edge=c),Pp(_.closure)&&(t=!0,_.closure=u),t&&(i?(_.list=[],_.sList=[],n.forEach(function(t,e){var r=Pp(l[e])?.5*s:l[e],n=Cp(a,o,r,parseFloat(t||0)%360,parseFloat(h[e]||0)%360),i=n.slice(0);u[e]?(n.push(n[0].slice(0)),c&&i.push(i[0].slice(0))):(n.unshift([a,o]),n.push([a,o]),c&&(i.unshift([a,o]),i.push([a,o]))),_.list.push(n),_.sList.push(i)})):(r=(e=Cp(a,o,l,parseFloat(n||0),parseFloat(h||0))).slice(0),u?(e.push(e[0].slice(0)),c&&r.push(r[0].slice(0))):(e.unshift([a,o]),e.push([a,o]),c&&(r.unshift([a,o]),r.push([a,o]))),_.list=e,_.sList=r)),t}},{key:"render",value:function(t,e,r,n,i){var a=rt(et(b.prototype),"render",this).call(this,t,e,r,n,i);if(a.break)return a;this.buildCache(a.cx,a.cy);var o=a.fill,s=a.stroke,h=a.strokeWidth,l=a.dx,c=a.dy,u=this.__cacheProps,_=u.list,f=u.sList,d=this.isMulti,p="conic"===o.k,v="conic"===s.k,y="radial"===o.k&&Array.isArray(o.v),g=0<h&&"radial"===s.k&&Array.isArray(s.v);return p||v?(p?this.__conicGradient(t,r,n,_,d,a):"none"!==o&&this.__drawPolygon(t,r,n,d,_,l,c,a,!0),0<h&&v?Ke.warn("Stroke style can not use conic-gradient"):0<h&&"none"!==s&&this.__drawPolygon(t,r,n,d,f,l,c,a,!1,!0)):y||g?(y?this.__radialEllipse(t,r,n,_,d,a,"fill"):"none"!==o&&this.__drawPolygon(t,r,n,d,_,l,c,a,!0),0<h&&g?(Ke.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke=a.stroke.v[0],this.__drawPolygon(t,r,n,d,f,l,c,a,!1,!0)):0<h&&"none"!==s&&this.__drawPolygon(t,r,n,d,f,l,c,a,!1,!0)):("none"!==o&&this.__drawPolygon(t,r,n,d,_,l,c,a,!0,!1),"none"!==s&&this.__drawPolygon(t,r,n,d,f,l,c,a,!1,!0)),a}},{key:"__genSector",value:function(t,e,r,n,i,a,o,s,h){var l,c;t?(l=[["d",e[0]],["fill",r.v||r],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(l,a,o,s,h),this.addGeom("path",l)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<i&&(c=[["d",e[1]],["fill","none"],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(c,a,o,s,h),this.addGeom("path",c)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[kp],h=o[Ip],l=o[Np],c=o[wp],u=o[Dp],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=rt(et(b.prototype),"bbox",this),y=.5*l,g=Ge(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),b}(),Bp=p.STYLE_KEY,Hp=Bp.PADDING_TOP,Gp=Bp.PADDING_LEFT,Yp=Bp.STROKE_WIDTH,Wp=Bp.BOX_SHADOW,Up=Bp.FILTER,Xp=Ue.isNil;function Kp(t,e,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;if(0===o||0===s)return[[t,e],[t+r,e],[t+r,e+n],[t,e+n],[t,e]];var h=o*Xe.H,l=s*Xe.H;return[[t+o,e],[t+r-o,e],[t+r+h-o,e,t+r,e+s-l,t+r,e+s],[t+r,e+n-s],[t+r,e+n+l-s,t+r+h-o,e+n,t+r-o,e+n],[t+o,e+n],[t+o-h,e+n,t,e+n+l-s,t,e+n-s],[t,e+s],[t,e+s-l,t+o-h,e,t+o,e]]}function zp(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var Vp=function(){t(y,Ku);var n=e(y);function y(t,e){var r;return g(this,y),(r=n.call(this,t,e)).isMulti?(r.__rx=[0],r.__ry=[0],Array.isArray(e.rx)&&(r.__rx=e.rx.map(zp)),Array.isArray(e.ry)&&(r.__ry=e.ry.map(zp))):(r.__rx=r.__ry=0,Xp(e.rx)||(r.__rx=zp(e.rx)),Xp(e.ry)||(r.__ry=zp(e.ry))),r}return l(y,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return Xp(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),Xp(l.ry)&&(t=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(h,.5)*o),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return Kp(r,n,a,o,t,i[e])}):Kp(r,n,a,o,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=rt(et(y.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.width,n=this.height,i=this.computedStyle,a=i[Hp],o=i[Gp],s=i[Yp],h=i[Wp],l=i[Up],c=t+o,u=e+a;this.buildCache(c,u);var _=rt(et(y.prototype),"bbox",this),f=.5*s,d=Ge(this.__spreadByBoxShadowAndFilter(h,l),2),p=d[0],v=d[1];return p+=f,v+=f,_[0]=Math.min(_[0],c-p),_[1]=Math.min(_[1],u-v),_[2]=Math.min(_[2],c+r+p),_[3]=Math.min(_[3],u+n+v),_}}]),y}(),jp=p.STYLE_KEY,$p=jp.PADDING_TOP,qp=jp.PADDING_LEFT,Zp=jp.STROKE_WIDTH,Jp=jp.BOX_SHADOW,Qp=jp.FILTER,tv=Ue.isNil;function ev(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var rv=function(){t(b,Ku);var n=e(b);function b(t,e){var r;return g(this,b),(r=n.call(this,t,e)).isMulti?(r.__r=[1],Array.isArray(e.r)?r.__r=e.r.map(ev):tv(e.r)||(r.__r=ev(e.r))):(r.__r=1,tv(e.r)||(r.__r=ev(e.r))),r}return l(b,[{key:"buildCache",value:function(e,r){var n=this.width,t=this.r,i=this.__cacheProps,a=this.isMulti;tv(i.r)&&(a?(i.r=t.map(function(t){return t*n*.5}),i.list=i.r.map(function(t){return Xe.ellipsePoints(e,r,t)})):(i.r=t*n*.5,i.list=Xe.ellipsePoints(e,r,i.r)))}},{key:"render",value:function(t,e,r,n,i){var a=rt(et(b.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[$p],h=o[qp],l=o[Zp],c=o[Jp],u=o[Qp],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=rt(et(b.prototype),"bbox",this),y=.5*l,g=Ge(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),b}(),nv=p.STYLE_KEY,iv=nv.PADDING_TOP,av=nv.PADDING_LEFT,ov=nv.STROKE_WIDTH,sv=nv.BOX_SHADOW,hv=nv.FILTER,lv=Ue.isNil;function cv(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var uv=function(){t(x,Ku);var n=e(x);function x(t,e){var r;return g(this,x),(r=n.call(this,t,e)).isMulti?(r.__rx=[1],r.__ry=[1],Array.isArray(e.rx)?r.__rx=e.rx.map(cv):lv(e.rx)||(r.__rx=[cv(e.rx)]),Array.isArray(e.ry)?r.__ry=e.ry.map(cv):lv(e.ry)||(r.__ry=[cv(e.ry)])):(r.__rx=1,lv(e.rx)||(r.__rx=cv(e.rx)),r.__ry=1,lv(e.ry)||(r.__ry=cv(e.ry))),r}return l(x,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return lv(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return t*a*.5}):s*a*.5),lv(l.ry)&&(t=!0,l.ry=c?h.map(function(t){return t*o*.5}):h*o*.5),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return Xe.ellipsePoints(r,n,t,i[e])}):Xe.ellipsePoints(r,n,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=rt(et(x.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.isMulti,r=this.__cacheProps,e=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[iv],h=o[av],l=o[ov],c=o[sv],u=o[hv],_=e+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p,v=0,y=0,y=t?(p=d=0,r.rx.forEach(function(t,e){d=Math.max(t,d),p=Math.max(y,r.ry[e])}),v=d,p):(v=r.rx,r.ry),g=rt(et(x.prototype),"bbox",this),m=.5*l,E=Ge(this.__spreadByBoxShadowAndFilter(c,u),2),T=E[0],O=E[1],M=_-v-(T+=m),A=_+v+T,b=f-y-(O+=m),R=f+y+O;return g[0]=Math.min(g[0],M),g[1]=Math.min(g[1],b),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],R),g}}]),x}(),_v={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of"},fv={os:"offset",e:"easing",ft:"filter",bd:"boxShadow",of:"overflow"},dv={value:"v",options:"o"},pv={},vv={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},yv={};Pt.DOM_KEY_SET.concat(Pt.GEOM_KEY_SET).forEach(function(t){var e;_v.hasOwnProperty(t)?fv[_v[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),_v[t]=e,fv[e]=t)}),Object.keys(dv).forEach(function(t){pv[dv[t]]=t}),Object.keys(vv).forEach(function(t){yv[vv[t]]=t});var gv={fullCssProperty:_v,abbrCssProperty:fv,fullAnimate:dv,abbrAnimate:pv,fullAnimateOption:vv,abbrAnimateOption:yv},mv=k.TYPE_VD,Ev=k.TYPE_GM,Tv=k.TYPE_CP,Ov=Ue.isNil,Mv=Ue.isFunction,Av=Ue.isPrimitive,bv=Ue.clone,Rv=Ue.extend,xv=gv.abbrCssProperty,Sv=gv.abbrAnimateOption,kv=gv.abbrAnimate;function Iv(i,a){i&&Object.keys(i).forEach(function(t){var e,r,n;0===t.indexOf("var-")?(e=t.slice(4),a.hasOwnProperty(e)&&(r=a[e],i["var-"+r]=i[t])):a.hasOwnProperty(t)&&(n=a[t],i[n]=i[t],delete i[t])})}function Nv(s,h){s&&h&&Object.keys(s).forEach(function(t){if(0===t.indexOf("var-")){var e=s[t];if(!e)return;var r=t.slice(4);if(e.id&&h.hasOwnProperty(e.id)){var n=h[e.id];if(void 0===n)return;if(-1<r.indexOf(".")){for(var i=r.split("."),a=i.length,o=0;o<a-1;o++)r=i[o],s[r]?s=s[r]:Ke.error("parseJson vars is not exist: "+e.id+", "+t+", "+i.slice(0,o).join("."));r=i[a-1]}Mv(n)&&(n=n(e)),s[r]=n}}})}function wv(e,r){e.tagName=r.tagName,e.props=bv(r.props),e.children=r.children,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,n,i=e.init;i&&(n=(t=e.props=e.props||{}).style,Rv(t,i),n&&(Rv(n,i.style),t.style=n),e.init=null)}function Dv(r,t,n,i,e){var a=4<arguments.length&&void 0!==e?e:{};if(Av(t)||t instanceof b)return t;if(Array.isArray(t))return t.map(function(t){return Dv(r,t,n,i,a)});var o=t.library,s=t.libraryId;if(Array.isArray(o))a={},o.forEach(function(t){!function(t,n){var e=t.id,r=t.children;if(Array.isArray(r)&&r.forEach(function(t){if(!Av(t)){var e=t.libraryId;if(Ov(e))return;var r=n[e];if(!r)throw new Error("Link library item miss libraryId: "+e);wv(t,r)}}),Ov(e))throw new Error("Library item miss id: "+JSON.stringify(t));n[e]=t}(t,a)}),t.library=null,t.libraryId=null;else if(!Ov(s)&&a){var h=a[s];if(!h)throw new Error("Link library miss id: "+s);wv(t,h)}var l=t.tagName,c=t.props,u=void 0===c?{}:c,_=t.children,f=void 0===_?[]:_,d=t.animate,p=void 0===d?[]:d,v=t.__animateRecords;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var y,g,m,E,T,O=u.style;return Iv(O,xv),Nv(O,i),Nv(u,i),Nv(t,i),y="$"===l.charAt(0)?r.createGm(l,u):r.createVd(l,u,f.map(function(t,e){return t&&-1<[mv,Ev,Tv].indexOf(t.$$type)?t:Dv(r,t,n,i,a)})),v&&(y.__animateRecords=v),p&&(Array.isArray(p)?(p.forEach(function(t){Iv(t,kv);var e=t.value,r=t.options;Array.isArray(e)&&e.length&&(m=!0,e.forEach(function(t){Iv(t,xv),Nv(t,i)})),r&&(Iv(r,Sv),Nv(r,i))}),m&&(g={animate:p,target:y})):(Iv(p,kv),E=p.value,T=p.options,Array.isArray(E)&&E.length&&(E.forEach(function(t){Iv(t,xv),Nv(t,i)}),g={animate:p,target:y}),T&&(Iv(T,Sv),Nv(T,i)))),g&&n.push(g),y}var Pv={parse:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:{};e=Ue.clone(e),Ke.isDom(r)||(i=r||{},r=null);var a=[],o=Dv(t,e,a,i.vars);if(r){var s=e.tagName;if(-1===["canvas","svg"].indexOf(s))throw new Error("Parse dom must be canvas/svg");var h=i.controller instanceof P_?i.controller:o.animateController;t.render(o,r),a.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(h.__auto=h.__auto.concat(a),h.__playAuto()):h.__records=h.__records.concat(a)}else a.length&&(o.__animateRecords={options:i,list:a,controller:i.controller instanceof P_?i.controller:null});return o},abbr:gv},Cv={css:sn,reset:Pt,unit:R,font:S},Lv={Animation:To,Controller:P_,easing:zi,frame:Pi},Fv={level:Io,change:Oe,Page:Co,Cache:Ko};Ku.register("$line",fp),Ku.register("$polyline",Rp),Ku.register("$polygon",xp),Ku.register("$sector",Fp),Ku.register("$rect",Vp),Ku.register("$circle",rv),Ku.register("$ellipse",uv);var Bv={version:"0.46.4",render:function(t,e){if(!(t instanceof ep))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],n=2,i=arguments.length;n<i;n++)r.push(arguments[n]);return Ue.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];if(-1<["canvas","svg"].indexOf(t))return new ep(t,e,n);if(Sl.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:n,$$type:k.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:k.TYPE_GM}},createCp:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];return e.children=n,{klass:t,props:e,$$type:k.TYPE_CP}},parse:function(t,e,r){return Pv.parse(this,t,e,r)},mode:Ye,Component:xl,Node:b,Text:An,Geom:Ku,Xom:_l,Dom:Mc,Img:Zc,Root:ep,Event:Ii,util:Ue,inject:Ke,style:Cv,parser:Pv,animate:Lv,math:In,builder:Ol,updater:u_,refresh:Fv,enums:p};return Ol.ref({Xom:_l,Dom:Mc,Img:Zc,Geom:Ku,Component:xl}),u_.ref({Xom:_l,Dom:Mc,Img:Zc,Geom:Ku,Component:xl}),"undefined"!=typeof window&&(window.karas=Bv),Bv});
//# sourceMappingURL=index.min.js.map
