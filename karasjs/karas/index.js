!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function bt(t){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=N(r);return t=i?(t=N(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?a(e):t}}function P(t,e,r){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(r):e.value}})(t,e,r||t)}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,o,n=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return n}}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var h={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,FILL:87,STROKE:88,STROKE_WIDTH:89,STROKE_DASHARRAY:90,STROKE_DASHARRAY_STR:91,STROKE_LINECAP:92,STROKE_LINEJOIN:93,STROKE_MITERLIMIT:94,FILL_RULE:95,MATRIX:96,BORDER_TOP:97,BORDER_RIGHT:98,BORDER_BOTTOM:99,BORDER_LEFT:100,TRANSLATE_PATH:101},l={};function c(t){return l[t]=l[t]||t.toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),l[t]}var u={};var p={},g={},m={};Object.keys(h).forEach(function(t){var e=h[t],t=c(p[e]=t);g[e]=t,m[t]=e});var v={STYLE_KEY:h,STYLE_R_KEY:p,STYLE_RV_KEY:g,STYLE_V_KEY:m,style2Lower:c,style2Upper:function(t){return u[t]=u[t]||t.replace(/([a-z\d_])([A-Z])/g,function(t,e,r){return e+"_"+r}).toUpperCase(),u[t]},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_OVERWRITE:5,UPDATE_KEYS:6,UPDATE_LIST:7,UPDATE_CONFIG:8,UPDATE_ADD_DOM:9,UPDATE_REMOVE_DOM:10},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_PLAY_CB:8,I_TARGET:9,I_ROOT:10,I_FRAMES:11,I_FRAMES_R:12,I_CURRENT_TIME:13,I_NEXT_TIME:14,I_STYLE:15,I_DURATION:16,I_ITERATIONS:17,I_FILL:18,I_PLAYBACK_RATE:19,I_PLAY_COUNT:20,I_PLAY_STATE:21,I_DESTROYED:22,I_START_TIME:23,I_FPS_TIME:24,I_EASING:25,I_ENTER_FRAME:26,I_DELAY:27,I_END_DELAY:28,I_KEYS:29,I_ORIGIN_STYLE:30,I_CURRENT_FRAMES:31,I_CURRENT_FRAME:32,I_SPF_LIMIT:33,I_FPS:34,I_DIRECTION:35,I_FIRST_ENTER:36,I_STAY_BEGIN:37,I_STAY_END:38,I_IS2:39,I_END_TIME:40,I_NODE_CONFIG:41,I_ROOT_CONFIG:42,I_OUT_BEGIN_DELAY:43,I_TIME_STAMP:44}},y=v.STRUCT_KEY,x=y.STRUCT_NODE,E=y.STRUCT_INDEX,b=y.STRUCT_CHILD_INDEX,M=y.STRUCT_LV,T=v.NODE_KEY,A=T.NODE_IS_DESTROYED,O=T.NODE_STRUCT,R=function(){function t(){_(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={},this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null}return f(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[O]=(n(i={},x,this),n(i,E,t),n(i,b,r),n(i,M,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[O],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[A]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[A]}}]),t}(),rt={CANVAS:0,SVG:1,WEBGL:2},w={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,w.PERCENT]:/px$/i.test(t)?[e,w.PX]:/deg$/i.test(t)?[e,w.DEG]:/rem$/i.test(t)?[e,w.REM]:/vw$/i.test(t)?[e,w.VW]:/vh$/i.test(t)?[e,w.VH]:/em$/i.test(t)?[e,w.EM]:/vw$/i.test(t)?[e,w.VW]:/vh$/i.test(t)?[e,w.VH]:/vmax$/i.test(t)?[e,w.VMAX]:/vmin$/i.test(t)?[e,w.VMIN]:[e,w.NUMBER]}},Mt={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375,padding:{1:1,f:.9}},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125,padding:{S:1,T:1,Z:1,c:1,f:.7,i:1,l:1,t:.9}},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06,padding:{f:.5}},simsun:{lhr:1.4,blr:1.06,padding:{f:.5}}},support:function(t){return this.info.hasOwnProperty(t)},register:function(t,e){var r=e||{},i=r.emSquare,o=void 0===i?2048:i,n=r.ascent,e=void 0===n?1854:n,i=r.descent,n=void 0===i?434:i,i=r.lineGap,i=void 0===i?67:i,r=r.padding,r=void 0===r?{}:r;this.info[t.toLowerCase()]={lhr:(e+n+i)/o,blr:e/o,padding:r}},addPadding:function(t,e){Object.assign(this.info[t.toLowerCase()].padding,e)}};Mt.info["宋体"]=Mt.info.simsun,Mt.info.pingfang=Mt.info["pingfang sc"];var S={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};function I(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function C(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var te={identity:I,multiply:function(t,e){if(C(t))return e;if(C(e))return t;for(var r=[],i=0;i<4;i++){var o=t[i]||0,n=t[i+4]||0,a=t[i+8]||0,s=t[i+12]||0;r[i]=o*e[0]+n*e[1]+a*e[2]+s*e[3],r[i+4]=o*e[4]+n*e[5]+a*e[6]+s*e[7],r[i+8]=o*e[8]+n*e[9]+a*e[10]+s*e[11],r[i+12]=o*e[12]+n*e[13]+a*e[14]+s*e[15]}return r},calPoint:function(t,e){var r=(p=Qt(t,4))[0],i=p[1],o=p[2],n=p[3];if(void 0===n&&(n=1),!e||C(e))return[r,i,o,n];if(16!==e.length)return o=Qt(e,6),g=o[0],a=o[1],n=o[2],e=o[3],[g*r+n*i+o[4],a*r+e*i+o[5]];var o=o||0,a=Qt(e,16),s=a[0],h=a[1],l=a[2],c=a[3],u=a[4],_=a[5],f=a[6],d=a[7],e=a[8],t=a[9],p=a[10],g=a[11];return[r*s+i*u+o*e+a[12],r*h+i*_+o*t+a[13],r*l+i*f+o*p+a[14],n*=r*c+i*d+o*g+a[15]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length)return function(t){var e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];var r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0==r)return I();r=1/r;for(var i=[],o=0;o<16;o++)i[o]=e[o]*r;return i}(t);var e=Qt(t,6),r=e[0],i=e[1],o=e[2],n=e[3],a=e[4],s=e[5];return 1===r&&0===i&&0===o&&1===n&&0===a&&0===s||0==(e=r*n-i*o)?t:[n/e,-i/e,-o/e,r/e,(o*s-n*a)/e,(i*a-r*s)/e]},isE:C,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}};var k={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},L=4*(Math.sqrt(2)-1)/3,D=k.crossProduct,F=te.calPoint,B=te.isE,Y=v.STYLE_KEY,H=Y.WIDTH,G=Y.HEIGHT,W=Y.TRANSFORM_ORIGIN;function U(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function X(t,e,r){for(var i=Qt(r[0],2),o=i[0],n=i[1],i=Qt(r[0],2),a=i[0],s=i[1],h=r.length,l=1;l<h;l++)var c=Qt(r[l],2),u=c[0],c=c[1],o=Math.max(o,u),n=Math.max(n,c),a=Math.min(a,u),s=Math.min(s,c);if(t<a||e<s||o<t||n<e)return!1;for(var _=0,f=r.length;_<f;_++){var d=Qt(r[_],2),p=d[0],g=d[1],m=Qt(r[(_+1)%f],2),d=m[0],m=m[1];if(D(d-p,m-g,t-p,e-g)<0)return!1}return!0}function V(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function K(t,e){var r=Qt(t,4),i=r[0],o=r[1],n=r[2],a=r[3],s=Qt(e,4),t=s[0],r=s[1],e=s[2],s=s[3];return!(e<=i||s<=o||n<=t||a<=r)}function z(t,e,r){var i=r.matrix,o=void 0===i?[1,0,0,1,0,0]:i,n=r.computedStyle,a=void 0===n?{}:n,i=a[H],r=a[G],n=a[W],a=Qt(n=void 0===n?[.5*i,.5*r]:n,2),n=a[0],a=a[1],o=Qt(F([t*i-n,e*r-a],o),2);return[(t=o[0])+n,(e=o[1])+a]}function j(t){return t*Math.PI/180}function $(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function Z(t,e,r){var i=t,o=(2*e+r)/3,t=(e+2*r)/3;return(i(e)+3*i(o)+3*i(t)+i(r))*(r-e)/8}function q(e,r){return function t(e,r,i,o){var n=3<arguments.length&&void 0!==o?o:.001,a=e,s=(r+i)/2,h=Z(a,r,i),o=Z(a,r,s),e=Z(a,s,i),h=o+e-h;return Math.abs(h)<=15*n?o+e+h/15:t(a,r,s,n/2)+t(a,s,i,n/2)}(function(t){return $(J(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function J(t,e,r,i){i=3<arguments.length&&void 0!==i?i:1;return 2===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,o=(h=Qt(e,3))[0],n=h[1],a=h[2],s=(l=Qt(o,2))[0],r=l[1],e=Qt(n,2),h=e[0],o=e[1],n=(l=Qt(a,2))[0],e=l[1],a=0,l=0,l=0===i?(a=Math.pow(1-t,2)*s+2*t*(1-t)*h+Math.pow(t,2)*n,Math.pow(1-t,2)*r+2*t*(1-t)*o+Math.pow(t,2)*e):1===i?(a=2*(1-t)*(h-s)+2*t*(n-h),2*(1-t)*(o-r)+2*t*(e-o)):2===i?(a=2*(n-2*h+s),2*(e-2*o+r)):a=0;return[a,l]}(t,e,i):3===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,o=(c=Qt(e,4))[0],n=c[1],a=c[2],s=c[3],h=(u=Qt(o,2))[0],l=u[1],r=Qt(n,2),e=r[0],c=r[1],u=(o=Qt(a,2))[0],n=o[1],r=Qt(s,2),a=r[0],o=r[1],s=0,r=0,r=0===i?(s=Math.pow(1-t,3)*h+3*t*Math.pow(1-t,2)*e+3*(1-t)*Math.pow(t,2)*u+Math.pow(t,3)*a,Math.pow(1-t,3)*l+3*t*Math.pow(1-t,2)*c+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*o):1===i?(s=3*((1-t)*(1-t)*(e-h)+2*(1-t)*t*(u-e)+t*t*(a-u)),3*((1-t)*(1-t)*(c-l)+2*(1-t)*t*(n-c)+t*t*(o-n))):2===i?(s=6*(u-2*e+h)*(1-t)+6*(a-2*u+e)*t,6*(n-2*c+l)*(1-t)+6*(o-2*n+c)*t):3===i?(s=6*(a-3*u+3*e-h),6*(o-3*n+3*c-l)):s=0;return[s,r]}(t,e,i):void 0}function Q(e,r,t){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,a=function(t){return $(J(t,e,r))},s=t*i,h=i,l=h,c=0;c<o;c++){var u=Z(a,0,h)-s;if(Math.abs(u)<n)break;var _=$(J(h,e,r,1));if(h-=u*_/(u*$(J(h,e,r,2))+_*_),Math.abs(h-l)<n)break;l=h}return J(h,e,r,0)}function tt(t,e){var r=Qt(t,4),i=Qt(r[0],2),o=i[0],n=i[1],a=Qt(r[1],2),s=a[0],h=a[1],l=Qt(r[2],2),c=l[0],u=l[1],_=r[3],i=(s-o)*e+o,a=(h-n)*e+n,l=(c-s)*e+s,r=(u-h)*e+h,s=(l-i)*e+i,h=(r-a)*e+a;if(4===t.length){_=Qt(_,2);return[[o,n],[i,a],[s,h],[(((_[0]-c)*e+c-l)*e+l-s)*e+s,(((_[1]-u)*e+u-r)*e+r-h)*e+h]]}if(3===t.length)return[[o,n],[i,a],[s,h]]}var et={pointInPolygon:X,pointInQuadrilateral:function(t,e,r,i,o,n,a,s,h,l,c){if(!c||B(c))return r<=t&&i<=e&&t<=a&&e<=s;var u=Qt(F([r,i],c),4);r=u[0],i=u[1];var _=u[3],f=Qt(F([o,n],c),4);o=f[0],n=f[1];var u=f[3],f=Qt(F([h,l],c),4);h=f[0],l=f[1];var f=f[3],c=Qt(F([a,s],c),4);return a=c[0],s=c[1],_&&1!==_&&(r/=_,i/=_),u&&1!==u&&(o/=u,n/=u),f&&1!==f&&(h/=f,l/=f),(c=c[3])&&1!==c&&(a/=c,s/=c),X(t,e,[[r,i],[o,n],[a,s],[h,l]])},d2r:j,r2d:function(t){return 180*t/Math.PI},H:L,h:U,angleBySide:function(t,e,r){return r=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(r)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:V,triangleIncentre:function(t,e,r,i,o,n){var a=V(r,i,o,n),s=V(t,e,o,n),h=V(t,e,r,i);return[(a*t+s*r+h*o)/(a+s+h),(a*e+s*i+h*n)/(a+s+h)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,o=r*L,n=i===r?o:i*L;return[[t-r,e],[t-r,e-n,t-o,e-i,t,e-i],[t+o,e-i,t+r,e-n,t+r,e],[t+r,e+n,t+o,e+i,t,e+i],[t-o,e+i,t-r,e+n,t-r,e]]},sectorPoints:function t(e,r,i,o,n){if(n<o&&(o=(v=[n,o])[0],n=v[1]),o===n)return[];var a=[],s=Math.floor(o/90),h=Math.floor(n/90);if(s===h||h-s==1&&n%90==0){var l,c,u,_,f,d,p,g,m=U(j(Math.abs(o-n)))*i,v=Math.sqrt(Math.pow(i,2)+Math.pow(m,2)),m=Math.atan(m/i);s<90?(l=[e+Math.sin(j(o))*i,r-Math.cos(j(o))*i],c=m+j(o),_=[e+Math.sin(c)*v,r-Math.cos(c)*v],u=[e+Math.sin(j(n))*i,r-Math.cos(j(n))*i],c=j(n)-m,c=[e+Math.sin(c)*v,r-Math.cos(c)*v],a.push(l),a.push(_.concat(c).concat(u))):s<180?(l=[e+Math.cos(j(o-90))*i,r+Math.sin(j(o-90))*i],_=m+j(o-90),c=[e+Math.cos(_)*v,r+Math.sin(_)*v],u=[e+Math.cos(j(n-90))*i,r+Math.sin(j(n-90))*i],_=j(n-90)-m,_=[e+Math.cos(_)*v,r+Math.sin(_)*v],a.push(l),a.push(c.concat(_).concat(u))):s<270?(f=[e-Math.sin(j(o-180))*i,r+Math.cos(j(o-180))*i],d=m+j(o-180),g=[e-Math.sin(d)*v,r+Math.cos(d)*v],p=[e-Math.sin(j(n-180))*i,r+Math.cos(j(n-180))*i],d=j(n-180)-m,d=[e-Math.sin(d)*v,r+Math.cos(d)*v],a.push(f),a.push(g.concat(d).concat(p))):(f=[e-Math.cos(j(o-270))*i,r+Math.sin(j(o-270))*i],g=m+j(o-270),d=[e-Math.cos(g)*v,r+Math.sin(g)*v],p=[e-Math.cos(j(n-270))*i,r+Math.sin(j(n-270))*i],g=j(n-270)-m,v=[e-Math.cos(g)*v,r+Math.sin(g)*v],a.push(f),a.push(d.concat(v).concat(p)))}else{for(var y,x,E=s,b=[];E<=h;E++)0===E?(y=t(e,r,i,o,90),b.push(y)):1===E?(s===E||90<n)&&(y=t(e,r,i,o<90?90:o,180<n?180:n),b.push(y)):2===E?(s===E||180<n)&&(x=t(e,r,i,o<180?180:o,270<n?270:n),b.push(x)):3===E&&(s===E||270<n)&&(x=t(e,r,i,o<270?270:o,n),b.push(x));for(var a=b[0],M=1,T=b.length;M<T;M++)a.push(b[M][1])}return a},getRectsIntersection:function(t,e){if(!K(t,e))return null;var r=(a=Qt(t,4))[0],i=a[1],o=a[2],n=a[3],t=(s=Qt(e,4))[0],a=s[1],e=s[2],s=s[3];return[Math.max(r,t),Math.max(i,a),Math.min(o,e),Math.min(n,s)]},isRectsOverlap:K,isRectsInside:function(t,e){var r=(a=Qt(t,4))[0],i=a[1],o=a[2],n=a[3],t=(s=Qt(e,4))[0],a=s[1],e=s[2],s=s[3];return r<=t&&i<=a&&e<=o&&s<=n},calCoordsInNode:z,calPercentInNode:function(t,e,r){var i,o=(h=r.computedStyle)[H],n=h[G],a=(l=Qt(h[W],2))[0],s=l[1],h=Math.atan((n-s)/(o-a)),r=(l=Qt(z(1,1,r),2))[0],l=l[1],c=a<=r&&s<=l?(i=a===r?-Math.atan(1/0):Math.atan((l-s)/(r-a)))-h:a<=r&&l<s?(i=a===r?-Math.atan(1/0):Math.atan((s-l)/(r-a)))+h:r<a&&s<=l?(i=Math.atan((l-s)/(a-r)))-h:r<a&&l<s?(i=Math.atan((l-s)/(r-a)))<=h?i+Math.PI-h:-(c=Math.PI-i+h):0,h=Math.sqrt(Math.pow(t-a,2)+Math.pow(e-s,2)),t=a<=t&&s<=e?a===t?-Math.atan(1/0):Math.atan((e-s)/(t-a)):a<=t&&e<s?a===t?-Math.atan(1/0):-Math.atan((e-s)/(a-t)):t<a&&s<=e?Math.PI-Math.atan((e-s)/(a-t)):Math.atan((e-s)/(t-a))-Math.PI;return(t-=c)>Math.PI?(t-=Math.PI,[(a-h*Math.cos(t))/o,(s-h*Math.sin(t))/n]):t>.5*Math.PI?(t=Math.PI-t,[(a-h*Math.cos(t))/o,(s+h*Math.sin(t))/n]):0<=t?[(a+h*Math.cos(t))/o,(s+h*Math.sin(t))/n]:t>=.5*-Math.PI?(t=-t,[(a+h*Math.cos(t))/o,(s-h*Math.sin(t))/n]):t>=-Math.PI?(t=Math.PI+t,[(a-h*Math.cos(t))/o,(s-h*Math.sin(t))/n]):(t=-Math.PI-t,[(a-h*Math.cos(t))/o,(s+h*Math.sin(t))/n])},bboxBezier:function(t,e,r,i,o,n,a,s){return 4===arguments.length?[t,e,r,i]:6===arguments.length?(h=t,c=e,d=r,_=i,u=o,p=n,m=Math.min(h,u),v=Math.min(c,p),y=Math.max(h,u),x=Math.max(c,p),(d<m||_<v||y<d||x<_)&&(d=(l=1-(f=(h-d)/(h-2*d+u)))*l*h+2*l*f*d+f*f*u,p=(u=1-(f=(c-_)/(c-2*_+p)))*u*c+2*u*f*_+f*f*p,m=Math.min(m,d),v=Math.min(v,p),y=Math.min(y,d),x=Math.min(x,p)),[m,v,y,x]):8===arguments.length?(h=t,l=e,c=r,u=i,_=o,f=n,d=a,p=s,m=Math.min(h,d),v=Math.min(l,p),y=Math.max(h,d),x=Math.max(l,p),(c<m||u<v||y<c||x<u||_<m||f<v||y<_||x<f)&&(r=(t=l-2*u+f)*t-(e=3*u-l-3*f+p)*(-l+u),0<(n=(i=h-2*c+_)*i-(o=3*c-h-3*_+d)*(-h+c))&&(0<(a=(-i-(n=Math.sqrt(n)))/o)&&a<1&&(s=(s=1-a)*s*s*h+3*s*s*a*c+3*s*a*a*_+a*a*a*d,m=Math.min(m,s),y=Math.max(y,s)),0<(a=(-i+n)/o)&&a<1&&(g=(g=1-a)*g*g*h+3*g*g*a*c+3*g*a*a*_+a*a*a*d,m=Math.min(m,g),y=Math.max(y,g))),0<r&&(0<(d=(-t-(r=Math.sqrt(r)))/e)&&d<1&&(g=(g=1-d)*g*g*l+3*g*g*d*u+3*g*d*d*f+d*d*d*p,v=Math.min(v,g),x=Math.max(x,g)),0<(d=(-t+r)/e)&&d<1&&(p=(e=1-d)*e*e*l+3*e*e*d*u+3*e*d*d*f+d*d*d*p,v=Math.min(v,p),x=Math.max(x,p)))),[m,v,y,x]):void 0;var h,l,c,u,_,f,d,p,g,m,v,y,x},bezierLength:q,pointAtBezier:function(t,e,r,i,o){return Q(t,e,q(t,e,0,1),r,i,o)},pointAtBezierWithLength:Q,sliceBezier:tt,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=tt(t,r)),0<e&&(r<1&&(e/=r),t=tt(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,i){return 270<=i?(i=j(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=j(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=j(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=j(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var it={getConicGradientImage:function(a,s,h,t,e,l){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");h=Math.floor(h),t=Math.floor(t);for(var c=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),u=0;u<t;u++)for(var r=function(t){for(var e=function(t,e){t-=a,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,u),r=void 0,r=0;r<c.length&&c[r].angle<=e;r++);var i=c[r-1],o=c[r];if(!i||!o)return"continue";var n=(e-i.angle)/(o.angle-i.angle),o=o.color.map(function(t,e){return n*(t-i.color[e])+i.color[e]}),t=4*(t+u*h);l[t]=o[0],l[1+t]=o[1],l[2+t]=o[2],l[3+t]=Math.min(255,255*o[3])},i=0;i<h;i++)r(i);return l}};function ot(t){var r="";return t.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t?r+="blur(".concat(e,"px)"):"hue-rotate"===t?r+="hue-rotate(".concat(e,"deg)"):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||(r+="".concat(t,"(").concat(e,"%)"))}),r}var Tt={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var o=-1,n=0,a=e.length;n<a;n++){var s=e[n];if(Array.isArray(s)&&s.length){o=n;break}}if(-1!==o){t.moveTo(e[o][0]+r,e[o][1]+i);for(var h=o+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+i):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i,c[4]+r,c[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var o=t[r];if(Array.isArray(o)&&o.length){e=r;break}}if(-1===e)return"";for(var n="M"+t[e][0]+","+t[e][1],a=e+1,s=t.length;a<s;a++){var h=t[a];Array.isArray(h)&&(2===h.length?n+="L"+h[0]+","+h[1]:4===h.length?n+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(n+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return n},canvasLine:function(t,e,r,i,o,n,a,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(n[0]+h,n[1]+l,a[0]+h,a[1],i+h,o+l),2):2===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,i+h,o+l),2):1===s?(t.quadraticCurveTo(n[0]+h,n[1]+l,i+h,o+l),2):(t.lineTo(i+h,o+l),1)},svgLine:function(t,e,r,i,o,n,a){return 3===a?"M"+t+","+e+"C"+o[0]+","+o[1]+" "+n[0]+","+n[1]+" "+r+","+i:2===a?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:1===a?"M"+t+","+e+"Q"+o[0]+","+o[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:ot,svgFilter:ot},nt=et.H,at=w.PX,st=w.PERCENT,ht=w.REM,lt=w.VW,ct=w.VH,ut=w.VMAX,_t=w.VMIN,ft=Tt.canvasPolygon,dt=Tt.svgPolygon,pt=v.STYLE_KEY,gt=pt.BORDER_LEFT_WIDTH,mt=pt.BORDER_TOP_WIDTH,vt=pt.BORDER_BOTTOM_WIDTH,yt=pt.PADDING_LEFT,xt=pt.PADDING_BOTTOM,Et=pt.PADDING_TOP,At=pt.BORDER_TOP_LEFT_RADIUS,Ot=pt.BORDER_TOP_RIGHT_RADIUS,Rt=pt.BORDER_BOTTOM_LEFT_RADIUS,wt=pt.BORDER_BOTTOM_RIGHT_RADIUS,St=pt.FONT_SIZE;function It(t,e,r,i,o,n,a,s){var h=1,l=1,c=1;t:for(var u=n;o<=u;u--)for(var _=s;a<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+i)%f)continue}if(1<r)if(u<(e+i)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function Ct(t,e,r,i,o,n){var a=o-e,s=i-r,r=r-e,e=o-i;if("dotted"===t)return It(a,r,e,s,n,n,Math.max(1,.25*n),2*n);o=It(a,r,e,s,n,3*n,Math.max(1,.25*n),2*n),i=o.n,t=o.ps,o=o.pd;return 1===i?It(a,r,e,s,n,n,Math.max(1,.25*n),2*n):{n:i,ps:t,pd:o}}function kt(t,e,r,i,o,n,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,M,T,A,O,R,w,S=o+p-(o-i),I=n-d+(a-n),C=[],k=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[1][0]<S?C.push(Y):Y[0][0]>I?L.push(Y):Y[1][0]>I&&Y[0][0]<S?(P=S<o?s+Math.tan(e)*(S-i):h,F=n<I?s+Math.tan(r)*(a-I):h,C.push([Y[0],[S,s],[S,P],Y[3]]),S<I&&(o<S&&I<n?k.push([[S,s],[I,s],[I,h],[S,h]]):o<S?(k.push([[S,s],[n,s],[n,h],[S,h]]),k.push([[n,s],[I,s],[I,F],[n,h]])):I<n?(k.push([[S,s],[o,s],[o,h],[S,P]]),k.push([[o,s],[I,s],[I,h],[o,h]])):(k.push([[S,s],[o,s],[o,h],[S,P]]),k.push([[o,s],[n,s],[n,h],[o,h]]),k.push([[n,s],[I,s],[I,F],[n,h]]))),L.push([[I,s],Y[1],Y[2],[I,F]])):Y[1][0]>I?(B=n<I?s+Math.tan(r)*(a-I):h,k.push([Y[0],[I,s],[I,B],Y[3]]),L.push([[I,s],Y[1],Y[2],[I,B]])):Y[0][0]<S?(B=S<o?s+Math.tan(e)*(S-i):h,C.push([Y[0],[S,s],[S,B],Y[3]]),k.push([[S,s],Y[1],Y[2],[S,B]])):k.push(Y)}C.length&&(m=o-i<p&&t<g,_=Math.atan((o-i)/(h-s)),b=(E=(v=g)-(h-s))/(p-(o-i)),p=Qt((M=Lt(C[0][0],C[0][1],S,x=s+g,y=v/p,v,!0,Math.tan(_)*v))[0],2),R=p[0],w=p[1],m&&(_=Qt((T=Lt(C[0][3],C[0][2],S,x,b,E,!0,Math.tan(_)*E))[0],2),A=_[0],O=_[1]),C.forEach(function(t,e){var r,i;0===e?(r=M,m&&(i=T)):(r=Lt(t[0],t[1],S,x,y,v),m&&(i=Lt(t[3],t[2],S,x,b,E)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],R,w,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),m){for(var a=0,s=i.length;a<s;a++)Xt(i[a],A,O,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=a-n<d&&t<f,t=Math.atan((a-n)/(h-s)),V=(X=(G=f)-(h-s))/(d-(a-n)),d=Qt((K=Dt(L[J-1][0],L[J-1][1],I,U=s+f,W=G/d,G,!0,Math.tan(t)*G))[K.length-1],2),Z=d[0],q=d[1],H&&(t=Qt((z=Dt(L[J-1][3],L[J-1][2],I,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Dt(t[0],t[1],I,U,W,G),H&&(i=Dt(t[3],t[2],I,U,V,X)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],Z,q,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),H){for(var a=0,s=i.length;a<s;a++)Xt(i[a],j,$,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),C.concat(k).concat(L)}function Lt(t,e,r,i,o,n,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(-u+r)*o,u=Math.atan((-c+r)*o/(i-e)),c=r-Math.sin(u)*n/o,e=i-Math.cos(u)*n;if(l=a?(f=Math.atan(s*o/n),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*n/o,i-Math.sin(l)*n):(f=Math.atan(t/(i-_)),h=r-Math.sin(f)*n/o,i-Math.cos(f)*n),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*n,_=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),n=Math.atan(t/n),f=f-n,n=u+n;return[[h,l],[r-Math.sin(f)*_/o,i-Math.cos(f)*_],[r-Math.sin(n)*_/o,i-Math.cos(n)*_],[c,e]]}function Dt(t,e,r,i,o,n,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*o,u=Math.atan((_-r)*o/(i-f)),_=r+Math.sin(u)*n/o,f=i-Math.cos(u)*n;if(c=a?(h=Math.atan(s*o/n),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*n/o,i-Math.sin(c)*n):(h=Math.atan(t/(i-e)),l=r+Math.sin(h)*n/o,i-Math.cos(h)*n),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*n,e=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),n=Math.atan(t/n),u+=n,n=h-n;return[[_,f],[r+Math.sin(u)*e/o,i-Math.cos(u)*e],[r+Math.sin(n)*e/o,i-Math.cos(n)*e],[l,c]]}function Nt(t,e,r,i,o,n,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,M,T,A,O,R,w,S=h+g-(h-s),I=l-f+(c-l),C=[],k=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[2][1]<S?C.push(Y):Y[1][1]>I?L.push(Y):Y[2][1]>I&&Y[1][1]<S?(P=S<h?n+Math.tan(r)*(h-S):n,F=l<I?n+Math.tan(e)*(I-l):n,C.push([Y[0],Y[1],[a,S],[P,S]]),S<I&&(I<l&&h<S?k.push([[n,S],[a,S],[a,I],[n,I]]):h<S?(k.push([[n,h],[a,h],[a,l],[n,l]]),k.push([[n,l],[a,l],[a,I],[F,I]])):I<l?(k.push([[P,S],[a,S],[a,h],[n,h]]),k.push([[n,h],[a,h],[a,I],[n,I]])):(k.push([[P,S],[a,S],[a,h],[n,h]]),k.push([[n,h],[a,h],[a,l],[n,l]]),k.push([[n,l],[a,l],[a,I],[F,I]]))),L.push([[F,I],[a,I],Y[2],Y[3]])):Y[2][1]>I?(B=l<I?n+Math.tan(e)*(I-l):n,k.push([Y[0],Y[1],[a,I],[B,I]]),L.push([[B,I],[a,I],Y[2],Y[3]])):Y[1][1]<S?(B=S<h?n+Math.tan(r)*(h-S):n,C.push([Y[0],Y[1],[a,S],[B,S]]),k.push([[B,S],[a,S],Y[2],Y[3]])):k.push(Y)}C.length&&(m=h-s<g&&t<p,_=Math.atan((a-n)/(h-s)),b=(E=(v=g)-(h-s))/(p-(a-n)),p=Qt((M=Pt(C[0][1],C[0][2],x=a-p,S,y=v/p,v,!0,Math.tan(_)*v))[M.length-1],2),R=p[0],w=p[1],m&&(_=Qt((T=Pt(C[0][0],C[0][3],x,S,b,E,!0,Math.tan(_)*E))[T.length-1],2),A=_[0],O=_[1]),C.forEach(function(t,e){var r,i;0===e?(r=M,m&&(i=T)):(r=Pt(t[1],t[2],x,S,y,v),m&&(i=Pt(t[0],t[3],x,S,b,E)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],R,w,2);if(m){for(var a=0,s=i.length;a<s;a++)Xt(i[a],A,O,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=c-l<f&&t<d,t=Math.atan((a-n)/(c-l)),V=(X=(G=f)-(c-l))/(d-(a-n)),d=Qt((K=Ft(L[J-1][1],L[J-1][2],U=a-d,I,W=G/d,G,!0,Math.tan(t)*G))[0],2),Z=d[0],q=d[1],H&&(t=Qt((z=Ft(L[J-1][0],L[J-1][3],U,I,V,X,!0,Math.tan(t)*X))[0],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Ft(t[1],t[2],U,I,W,G),H&&(i=Ft(t[0],t[3],U,I,V,X)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],Z,q,3);if(H){for(var a=0,s=i.length;a<s;a++)Xt(i[a],j,$,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),C.concat(k).concat(L)}function Pt(t,e,r,i,o,n,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(u-r)*o,u=Math.atan((c-r)*o/(i-e)),c=r+Math.sin(u)*n/o,e=i-Math.cos(u)*n;if(l=a?(f=Math.atan(s*o/n),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r+Math.cos(l)*n/o,i-Math.sin(l)*n):(f=Math.atan(t/(i-_)),h=r+Math.sin(f)*n/o,i-Math.cos(f)*n),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*n,_=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),t=Math.atan(t/n),n=f+t,f=r+Math.sin(n)*_/o,n=i-Math.cos(n)*_,t=u-t;return[[c,e],[r+Math.sin(t)*_/o,i-Math.cos(t)*_],[f,n],[h,l]]}function Ft(t,e,r,i,o,n,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*o,u=Math.atan((_-r)*o/(f-i)),_=r+Math.sin(u)*n/o,f=i+Math.cos(u)*n;if(c=a?(h=Math.atan(s*o/n),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*n/o,i+Math.sin(c)*n):(h=Math.atan(t/(e-i)),l=r+Math.sin(h)*n/o,i+Math.cos(h)*n),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*n,e=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),t=Math.atan(t/n),n=u-t,u=r+Math.sin(n)*e/o,n=i+Math.cos(n)*e,t=h+t;return[[l,c],[r+Math.sin(t)*e/o,i+Math.cos(t)*e],[u,n],[_,f]]}function Bt(t,e,r,i,o,n,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,M,T,A,O,R,w,S=o+p-(o-i),I=n-d+(a-n),C=[],k=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[2][0]<S?C.push(Y):Y[3][0]>I?L.push(Y):Y[2][0]>I&&Y[3][0]<S?(P=S<o?c-Math.tan(e)*(S-i):h,F=n<I?c-Math.tan(r)*(a-I):l,C.push([Y[0],[S,P],[S,c],Y[3]]),S<I&&(o<S&&I<n?k.push([[S,l],[I,l],[I,c],[S,c]]):o<S?(k.push([[S,l],[n,l],[n,c],[S,c]]),k.push([[n,l],[I,F],[I,c],[n,c]])):I<n?(k.push([[S,P],[o,l],[o,c],[S,c]]),k.push([[o,l],[I,l],[I,c],[o,c]])):(k.push([[S,P],[o,l],[o,c],[S,c]]),k.push([[o,l],[n,l],[n,c],[o,c]]),k.push([[n,l],[I,F],[I,c],[n,c]]))),L.push([[I,F],Y[1],Y[2],[I,c]])):Y[2][0]>I?(B=n<I?c-Math.tan(r)*(a-I):l,k.push([Y[0],[I,B],[I,c],Y[3]]),L.push([[I,B],Y[1],Y[2],[I,c]])):Y[3][0]<S?(B=S<o?c-Math.tan(e)*(S-i):l,C.push([Y[0],[S,B],[S,c],Y[3]]),k.push([[S,B],Y[1],Y[2],[S,c]])):k.push(Y)}C.length&&(m=o-i<p&&t<g,_=Math.atan((o-i)/(c-l)),b=(E=(v=g)-(c-l))/(p-(o-i)),p=Qt((M=Yt(C[0][3],C[0][2],S,x=c-g,y=v/p,v,!0,Math.tan(_)*v))[0],2),R=p[0],w=p[1],m&&(_=Qt((T=Yt(C[0][0],C[0][1],S,x,b,E,!0,Math.tan(_)*E))[0],2),A=_[0],O=_[1]),C.forEach(function(t,e){var r,i;0===e?(r=M,m&&(i=T)):(r=Yt(t[3],t[2],S,x,y,v),m&&(i=Yt(t[0],t[1],S,x,b,E)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],R,w,4);if(m){for(var a=0,s=i.length;a<s;a++)Xt(i[a],A,O,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=a-n<d&&t<f,t=Math.atan((a-n)/(c-l)),V=(X=(G=f)-(c-l))/(d-(a-n)),d=Qt((K=Ht(L[J-1][3],L[J-1][2],I,U=c-f,W=G/d,G,!0,Math.tan(t)*G))[K.length-1],2),Z=d[0],q=d[1],H&&(t=Qt((z=Ht(L[J-1][0],L[J-1][1],I,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Ht(t[3],t[2],I,U,W,G),H&&(i=Ht(t[0],t[1],I,U,V,X)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],Z,q,5);if(H){for(var a=0,s=i.length;a<s;a++)Xt(i[a],j,$,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),C.concat(k).concat(L)}function Yt(t,e,r,i,o,n,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(-u+r)*o,u=Math.atan((-c+r)*o/(e-i)),c=r-Math.sin(u)*n/o,e=i+Math.cos(u)*n;if(l=a?(f=Math.atan(s*o/n),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*n/o,i+Math.sin(l)*n):(f=Math.atan(t/(_-i)),h=r-Math.sin(f)*n/o,i+Math.cos(f)*n),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*n,_=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),n=Math.atan(t/n),f=f-n,n=u+n;return[[h,l],[r-Math.sin(f)*_/o,i+Math.cos(f)*_],[r-Math.sin(n)*_/o,i+Math.cos(n)*_],[c,e]]}function Ht(t,e,r,i,o,n,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*o,u=Math.atan((_-r)*o/(f-i)),_=r+Math.sin(u)*n/o,f=i+Math.cos(u)*n;if(c=a?(h=Math.atan(s*o/n),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*n/o,i+Math.sin(c)*n):(h=Math.atan(t/(e-i)),l=r+Math.sin(h)*n/o,i+Math.cos(h)*n),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*n,e=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),n=Math.atan(t/n),u+=n,n=h-n;return[[_,f],[r+Math.sin(u)*e/o,i+Math.cos(u)*e],[r+Math.sin(n)*e/o,i+Math.cos(n)*e],[l,c]]}function Gt(t,e,r,i,o,n,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var m,v,y,x,E,b,M,T,A,O,R,w,S=h+g-(h-s),I=l-f+(c-l),C=[],k=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[3][1]<S?C.push(Y):Y[0][1]>I?L.push(Y):Y[3][1]>I&&Y[0][1]<S?(P=S<h?o-Math.tan(r)*(h-S):o,F=l<I?o-Math.tan(e)*(I-l):o,C.push([Y[0],Y[1],[P,S],[i,S]]),S<I&&(I<l&&h<S?k.push([[i,S],[o,S],[o,I],[i,I]]):h<S?(k.push([[i,S],[o,S],[o,l],[i,l]]),k.push([[i,l],[o,l],[F,I],[i,I]])):I<l?(k.push([[i,S],[P,S],[o,h],[i,h]]),k.push([[i,h],[o,h],[o,I],[i,I]])):(k.push([[i,S],[P,S],[o,h],[i,h]]),k.push([[i,h],[o,h],[o,l],[i,l]]),k.push([[i,l],[o,l],[F,I],[i,I]]))),L.push([[i,I],[F,I],Y[2],Y[3]])):Y[3][1]>I?(B=l<I?o-Math.tan(e)*(I-l):o,k.push([Y[0],Y[1],[B,I],[i,I]]),L.push([[i,I],[B,I],Y[2],Y[3]])):Y[1][1]<S?(B=S<h?o-Math.tan(r)*(h-S):o,C.push([Y[0],Y[1],[B,S],[i,S]]),k.push([[i,S],[B,S],Y[2],Y[3]])):k.push(Y)}C.length&&(m=h-s<g&&t<p,_=Math.atan((o-i)/(h-s)),b=(E=(v=g)-(h-s))/(p-(o-i)),p=Qt((M=Wt(C[0][0],C[0][3],x=i+p,S,y=v/p,v,!0,Math.tan(_)*v))[M.length-1],2),R=p[0],w=p[1],m&&(_=Qt((T=Wt(C[0][1],C[0][2],x,S,b,E,!0,Math.tan(_)*E))[T.length-1],2),A=_[0],O=_[1]),C.forEach(function(t,e){var r,i;0===e?(r=M,m&&(i=T)):(r=Wt(t[0],t[3],x,S,y,v),m&&(i=Wt(t[1],t[2],x,S,b,E)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],R,w,6);if(m){for(var a=0,s=i.length;a<s;a++)Xt(i[a],A,O,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=c-l<f&&t<d,t=Math.atan((o-i)/(c-l)),V=(X=(G=f)-(c-l))/(d-(o-i)),d=Qt((K=Ut(L[J-1][0],L[J-1][3],U=i+d,I,W=G/d,G,!0,Math.tan(t)*G))[0],2),Z=d[0],q=d[1],H&&(t=Qt((z=Ut(L[J-1][1],L[J-1][2],U,I,V,X,!0,Math.tan(t)*X))[0],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Ut(t[0],t[3],U,I,W,G),H&&(i=Ut(t[1],t[2],U,I,V,X)));for(var o=0,n=r.length;o<n;o++)Xt(r[o],Z,q,7);if(H){for(var a=0,s=i.length;a<s;a++)Xt(i[a],j,$,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),C.concat(k).concat(L)}function Wt(t,e,r,i,o,n,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(r-u)*o,u=Math.atan((r-c)*o/(i-e)),c=r-Math.sin(u)*n/o,e=i-Math.cos(u)*n;if(l=a?(f=Math.atan(s*o/n),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*n/o,i-Math.sin(l)*n):(f=Math.atan(t/(i-_)),h=r-Math.sin(f)*n/o,i-Math.cos(f)*n),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*n,_=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),t=Math.atan(t/n),n=f+t,f=r-Math.sin(n)*_/o,n=i-Math.cos(n)*_,t=u-t;return[[c,e],[r-Math.sin(t)*_/o,i-Math.cos(t)*_],[f,n],[h,l]]}function Ut(t,e,r,i,o,n,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(r-u)*o,u=Math.atan((r-_)*o/(f-i)),_=r-Math.sin(u)*n/o,f=i+Math.cos(u)*n;if(c=a?(h=Math.atan(s*o/n),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r-Math.cos(c)*n/o,i+Math.sin(c)*n):(h=Math.atan(t/(e-i)),l=r-Math.sin(h)*n/o,i+Math.cos(h)*n),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*n,e=Math.sqrt(Math.pow(n,2)+Math.pow(t,2)),t=Math.atan(t/n),n=u-t,u=r-Math.sin(n)*e/o,n=i+Math.cos(n)*e,t=h+t;return[[l,c],[r-Math.sin(t)*e/o,i+Math.cos(t)*e],[u,n],[_,f]]}function Xt(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Vt=[At,Ot,wt,Rt];var Kt={calPoints:function(t,e,r,i,o,n,a,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var e=0===_||2===_?Ct(e,o,n,a,s,t):Ct(e,h,l,c,u,t),g=e.n,m=e.ps,v=e.pd;if(1<g){for(var y=0;y<g;y++){var x=y===g-1,E=void 0,b=void 0,M=void 0,T=(E=0===_||2===_?y?o+m*y+v*y:o:y?h+m*y+v*y:h)+m;0===_?T<=n?x?p.push([[o,h],[s,h],[a,l],[n,l]]):(b=h+(E-o)*Math.tan(r),M=h+(T-o)*Math.tan(r),p.push([[E,h],[T,h],[T,M],[E,b]])):a<=E?(b=h+(s-E)*Math.tan(i),M=h+(s-T)*Math.tan(i),x?p.push([[E,h],[s,h],[s,h],[E,b]]):p.push([[E,h],[T,h],[T,M],[E,b]])):E<n?(b=h+(E-o)*Math.tan(r),p.push([[E,h],[n,h],[n,l],[E,b]]),x?(p.push([[n,h],[a,h],[a,l],[n,l]]),p.push([[a,h],[s,h],[s,h],[n,l]])):a<T?(M=h+(s-T)*Math.tan(i),p.push([[n,h],[a,h],[a,l],[n,l]]),p.push([[a,h],[T,h],[T,M],[a,l]])):p.push([[n,h],[T,h],[T,l],[n,l]])):a<T?(b=h+(s-T)*Math.tan(i),E<n?(M=h+(E-o)*Math.tan(r),p.push([[E,h],[n,h],[n,l],[E,M]]),p.push([[n,h],[a,h],[a,l],[n,l]])):p.push([[E,h],[a,h],[a,l],[E,l]]),x?p.push([[a,h],[s,h],[s,h],[a,l]]):p.push([[a,h],[T,h],[T,b],[a,l]])):x?p.push([[E,h],[s,h],[a,l],[E,l]]):p.push([[E,h],[T,h],[T,l],[E,l]]):1===_?T<=l?x?p.push([[a,l],[s,h],[s,u],[a,c]]):(b=s-(E-h)*Math.tan(r),M=s-(T-h)*Math.tan(r),p.push([[b,E],[s,E],[s,T],[M,T]])):c<=E?(b=a+(E-c)*Math.tan(i),M=a+(T-c)*Math.tan(i),x?p.push([[b,E],[s,E],[s,u],[s,u]]):p.push([[b,E],[s,E],[s,T],[M,T]])):E<l?(b=a+(l-E)*Math.tan(r),p.push([[b,E],[s,E],[s,l],[a,l]]),x?(p.push([[a,l],[s,l],[s,c],[a,c]]),p.push([[a,c],[s,c],[s,u],[s,u]])):c<T?(M=a+(T-c)*Math.tan(i),p.push([[a,l],[s,l],[s,c],[a,c]]),p.push([[a,c],[s,c],[s,T],[M,T]])):p.push([[a,l],[s,l],[s,T],[a,T]])):c<T?(b=a+(T-c)*Math.tan(i),E<l?(M=a+(l-E)*Math.tan(r),p.push([[M,E],[s,E],[s,l],[a,l]]),p.push([[a,l],[s,l],[s,c],[a,c]]),x?p.push([[a,c],[s,c],[s,s],[s,s]]):p.push([[a,c],[s,c],[s,T],[b,T]])):(p.push([[a,E],[s,E],[s,c],[a,c]]),x?p.push([[a,c],[s,c],[s,u],[s,u]]):p.push([[a,c],[s,c],[s,T],[b,T]]))):x?p.push([[a,E],[s,E],[s,u],[a,c]]):p.push([[a,E],[s,E],[s,T],[a,T]]):2===_?T<=n?x?p.push([[o,u],[n,c],[a,c],[s,u]]):(b=u-(E-o)*Math.tan(r),M=u-(T-o)*Math.tan(r),p.push([[E,b],[T,M],[T,u],[E,u]])):a<=E?(b=u-(s-E)*Math.tan(i),M=u-(s-T)*Math.tan(i),x?p.push([[E,b],[s,u],[s,u],[E,u]]):p.push([[E,b],[T,M],[T,u],[E,u]])):E<n?(b=u-(E-o)*Math.tan(r),p.push([[E,b],[n,c],[n,u],[E,u]]),x?(p.push([[n,c],[a,c],[a,u],[n,u]]),p.push([[a,c],[s,u],[s,u],[a,u]])):a<T?(M=u-(T-a)*Math.tan(i),p.push([[n,c],[a,c],[a,u],[n,u]]),p.push([[a,c],[T,M],[T,u],[a,u]])):p.push([[n,c],[T,c],[T,u],[n,u]])):a<T?(b=u-(s-T)*Math.tan(i),E<n?(M=u-(E-a)*Math.tan(r),p.push([[E,M],[n,c],[n,u],[E,u]]),p.push([[n,c],[a,c],[a,u],[n,u]])):p.push([[E,c],[a,c],[a,u],[E,u]]),x?p.push([[a,c],[s,u],[s,u],[a,u]]):p.push([[a,c],[T,b],[T,u],[a,u]])):x?p.push([[E,c],[a,c],[s,u],[E,u]]):p.push([[E,c],[T,c],[T,u],[E,u]]):3===_&&(T<=l?x?p.push([[o,h],[n,l],[n,c],[o,u]]):(b=o+(E-h)*Math.tan(r),M=o+(T-h)*Math.tan(r),p.push([[o,E],[b,E],[M,T],[o,T]])):c<=E?(b=o+(u-E)*Math.tan(i),M=o+(u-T)*Math.tan(i),x?p.push([[o,E],[b,E],[o,u],[o,u]]):p.push([[o,E],[b,E],[M,T],[o,T]])):E<l?(b=o+(E-h)*Math.tan(r),p.push([[o,E],[b,E],[n,l],[o,l]]),x?(p.push([[o,l],[n,l],[n,c],[o,c]]),p.push([[o,c],[n,c],[o,u],[o,u]])):c<T?(M=o+(u-T)*Math.tan(i),p.push([[o,l],[n,l],[n,c],[o,c]]),p.push([[o,c],[n,c],[M,T],[o,T]])):p.push([[o,l],[n,l],[n,T],[o,T]])):c<T?(b=o+(u-T)*Math.tan(i),E<l?(M=o+(E-h)*Math.tan(r),p.push([[o,E],[M,E],[n,l],[o,h]]),p.push([[o,l],[n,l],[n,c],[o,c]])):p.push([[o,E],[n,E],[n,c],[o,c]]),x?p.push([[o,c],[n,c],[o,u],[o,u]]):p.push([[o,c],[n,c],[b,T],[o,T]])):x?p.push([[o,E],[n,E],[n,c],[o,u]]):p.push([[o,E],[n,E],[n,T],[o,T]]))}if(0===_)return kt(t,r,i,o,n,a,s,h,l,0,0,p,f,d);if(1===_)return Nt(t,r,i,0,0,a,s,h,l,c,u,p,f,d);if(2===_)return Bt(t,r,i,o,n,a,s,0,l,c,u,p,f,d);if(3===_)return Gt(t,r,i,o,n,0,0,h,l,c,u,p,f,d)}}return 0===_?(o<n&&p.push([[o,h],[n,h],[n,l],[o,h]]),p.push([[n,h],[a,h],[a,l],[n,l]]),a<s&&p.push([[a,h],[s,h],[s,h],[a,l]]),kt(t,r,i,o,n,a,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[a,l]]),p.push([[a,l],[s,l],[s,c],[a,c]]),c<u&&p.push([[a,c],[s,c],[s,u],[s,u]]),Nt(t,r,i,0,0,a,s,h,l,c,u,p,f,d)):2===_?(o<n&&p.push([[o,u],[n,c],[n,u],[o,u]]),p.push([[n,c],[a,c],[a,u],[n,u]]),a<s&&p.push([[a,c],[s,u],[s,u],[a,u]]),Bt(t,r,i,o,n,a,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[o,h],[o,h],[n,l],[o,l]]),p.push([[o,l],[n,l],[n,c],[o,c]]),c<u&&p.push([[o,c],[n,c],[o,u],[o,u]]),Gt(t,r,i,o,n,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,i,o,n,a,s){var h=(c=Qt(o,2))[0],l=c[1],o=(u=Qt(n,2))[0],c=u[1],u=(n=Qt(a,2))[0],a=n[1],s=(n=Qt(s,2))[0],n=n[1],h=Math.max(h,0),l=Math.max(l,0),o=Math.max(o,0),c=Math.max(c,0),u=Math.max(u,0),a=Math.max(a,0),s=Math.max(s,0),n=Math.max(n,0);if(_=0<h&&0<l||0<o&&0<c||0<u&&0<a||0<s&&0<n?!0:_){var _=[];return 0<h&&0<l?(_.push([t,e+l]),_.push([t,e+l*(1-nt),t+h*(1-nt),e,t+h,e])):_.push([t,e]),0<o&&0<c?(_.push([t+r-o,e]),_.push([t+r-o*(1-nt),e,t+r,e+c*(1-nt),t+r,e+c])):_.push([t+r,e]),0<u&&0<a?(_.push([t+r,e+i-a]),_.push([t+r,e+i-a*(1-nt),t+r-u*(1-nt),e+i,t+r-u,e+i])):_.push([t+r,e+i]),0<s&&0<n?(_.push([t+s,e+i]),_.push([t+s*(1-nt),e+i,t,e+i-n*(1-nt),t,e+i-n])):_.push([t,e+i]),_}},calBorderRadius:function(n,a,e,s,r){var i=!0;Vt.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===at?Math.max(0,t[0]):t[1]===st?Math.max(0,t[0]*(e?a:n)*.01):t[1]===ht?Math.max(0,t[0]*r.computedStyle[St]):t[1]===lt?Math.max(0,t[0]*r.width*.01):t[1]===ct?Math.max(0,t[0]*r.height*.01):t[1]===ut?Math.max(0,t[0]*Math.max(r.width,r.height)*.01):t[1]===_t?Math.max(0,t[0]*Math.min(r.width,r.height)*.01):0):0})}),i||Vt.forEach(function(t,e){var r=e%2==0?0:1,i=r?a:n,o=s[t],t=s[Vt[(e+1)%4]];o[r]+t[r]>i&&(o[r]>=(e=.5*i)&&t[r]>=e?o[r]=t[r]=e:o[r]>e?o[r]=i-t[r]:t[r]>e&&(t[r]=i-o[r]))})},calBorderRadiusInline:function(t,e,r){var i,o;t.length&&(i=t[0],o=t[t.length-1]);var n=i?i.outerWidth:0,a=i?i.outerHeight:0;n+=r[gt]+r[yt],a+=r[mt]+r[vt]+r[Et]+r[xt],[At,Rt].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===at?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:n)*.01),t=Math.min(e?a:n,t);return t})}),n=o?o.outerWidth:0,a=o?o.outerHeight:0,[Ot,wt].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===at?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:n)*.01),t=Math.min(e?a:n,t);return t})})},renderBorder:function(t,e,r,i,o,n,a){var s;e===rt.CANVAS||e===rt.WEBGL?(r.beginPath(),r.fillStyle!==o&&(r.fillStyle=o),i.forEach(function(t){ft(r,t,n,a)}),r.fill(),r.closePath()):e===rt.SVG&&(s="",i.forEach(function(t){s+=dt(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",o]]}))}},zt={TYPE_VD:Symbol("Dom"),TYPE_GM:Symbol("Geom"),TYPE_CP:Symbol("Component")},jt={}.toString;function $t(e){return function(t){return jt.call(t)==="[object "+e+"]"}}var Zt=$t("Object"),qt=$t("String"),Jt=$t("Function"),ee=$t("Number"),re=$t("Boolean"),ie=$t("Date"),oe={}.hasOwnProperty,ne=oe.toString,ae=ne.call(Object);function se(t){return null==t}function he(t){return se(t)?"":t.toString()}function le(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=le(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var i="<g>";t.bb.forEach(function(t){i+=le(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=le(t))}),i+="</g>";var o=t.opacity,n=t.transform,a=t.visibility,s=t.mask,h=t.overflow,l=t.filter,t=t.mixBlendMode;return"<g"+(1!==o&&void 0!==o?' opacity="'+o+'"':"")+(n?' transform="'+n+'"':"")+' visibility="'+a+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l||t?' style="':"")+(l?"filter:"+l+";":"")+(t?"mix-blend-mode:"+t+";":"")+(l||t?'"':"")+">"+i+"</g>"}}function ce(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function ue(t,e){for(var r=t.length?t[0]:"",i=1,o=t.length;i<o;i++)r+=e+t[i];return r}function _e(t){if(!t||"[object Object]"!==jt.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=oe.call(t,"constructor")&&t.constructor;return"function"==typeof t&&ne.call(t)===ae}var fe={isObject:Zt,isString:qt,isFunction:Jt,isNumber:ee,isBoolean:re,isDate:ie,isNil:se,isPrimitive:function(t){return fe.isNil(t)||fe.isBoolean(t)||fe.isString(t)||fe.isNumber(t)},isAuto:function(t){return se(t)||"auto"===t},isPlainObject:_e,stringify:he,joinSourceArray:function t(e){for(var r="",i=0,o=e.length;i<o;i++){var n=e[i];Array.isArray(n)?r+=t(n):r+=he(n)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=ce(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=le(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=le(t))}),e+="</g>"},joinVd:le,joinDef:ce,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],se(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+ue(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+ue(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+ue(t,",")+")";if(3===t.length)return"rgba("+ue(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var o=t[r];if(Array.isArray(o))e[o[0]]=o[1];else for(var n=Object.keys(o),a=n.length-1;0<=a;a--){var s=n[a];e[s]=o[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,o=r.length;i<o;i++){var n=r[i];e.push([n,t[n]])}return e},clone:function e(r){if(se(r)||"object"!==bt(r))return r;if(r.$$type===zt.TYPE_VD||r.$$type===zt.TYPE_GM||r.$$type===zt.TYPE_CP)return r;if(fe.isDate(r))return new Date(r);if(!_e(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,o=e.length;i<o;i++){var n=e[i],a=r[i],s=Array.isArray(n),h=Array.isArray(a);if(s&&h){if(!t(n,a))return!1}else{if(s||h)return!1;if(n!==a)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(Zt(e)&&Zt(r)){for(var i={},o=0,n=Object.keys(e),a=n.length;o<a;o++){var s=n[o];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;i[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!i.hasOwnProperty(u))return!1}}else{if(ie(e)&&ie(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==bt(e))return t;for(var i=0,o=(r=r||Object.keys(e)).length;i<o;){var n=r[i];t[n]=e[n],i++}return t},joinArr:ue,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!te.isE(e)){var o=Qt(t,4),n=o[0],a=o[1],s=o[2],o=o[3];r&&(n-=r,s+=r),i&&(a-=i,o+=i);var h=[s,a,n,o,s,o],o=Qt(te.calPoint([n,a],e),4),n=o[0],a=o[1];(d=o[3])&&1!==d&&(n/=d,a/=d);for(var l=n,c=a,u=n,_=a,f=0;f<6;f+=2){var d,p=h[f],g=h[f+1],m=Qt(te.calPoint([p,g],e),4),p=m[0],g=m[1];(d=m[3])&&1!==d&&(p/=d,g/=d),l=Math.min(l,p),u=Math.max(u,p),c=Math.min(c,g),_=Math.max(_,g)}t=[l,c,u,_]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},de={flag:!1},pe={list:[],data:{},charWidth:{},padding:{},ELLIPSIS:"…"},ge={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},me=te.calPoint;function ve(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;r=t.getShaderInfoLog(e);throw t.deleteShader(e),new Error("Failed to compile shader: "+r)}function ye(t,e,r,i){var o=Qt(t,4),n=o[0],a=o[1],t=o[2],o=o[3];return void 0===t&&(t=0),(o=void 0===o?1:o)&&1!==o&&(n/=o,a/=o,t/=o),a===r?a=0:(a=(a-r)/r,i&&(a=-a)),[(n=n===e?0:(n-e)/e)*o,a*o,t*o,o]}function xe(t,e,r,i,o){var n=t.createTexture();return Ee(t,n,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&o?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,o,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n}function Ee(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var be,Me={initShaders:function(t,e,r){if(!(r=function(t,e,r){var i=ve(t,t.VERTEX_SHADER,e),o=ve(t,t.FRAGMENT_SHADER,r);if(!i||!o)return null;e=t.createProgram();if(!e)return null;if(e.vertexShader=i,e.fragmentShader=o,t.attachShader(e,i),t.attachShader(e,o),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return e;r=t.getProgramInfoLog(e);throw t.deleteProgram(e),t.deleteShader(o),t.deleteShader(i),new Error("Failed to link program: "+r)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),r},createTexture:xe,bindTexture:Ee,drawTextureCache:function(r,t,y,x,E,b){var M,T=[],A=[],O=[],R=[0],w=[R];t.forEach(function(t,e){var r=Qt(t,5),i=r[0],o=r[1],n=r[2],a=r[3],s=r[4];e?(v=y[i.page.uuid],M!==v&&(R=[0,M=v],w.push(R))):(M=y[i.page.uuid],R[1]=M);var h=i.x,l=i.y,c=i.width,u=i.height,_=i.page,f=i.bbox,d=f[0],p=f[1],g=d+(a||0),m=p+u+(s||0),t=d+c+(a||0),r=p+(s||0),e=Qt(me([g,m],n),4),v=e[0],i=e[1],f=e[3],d=Qt(me([t,m],n),4),a=d[0],p=d[1],s=d[3],e=Qt(me([t,r],n),4),m=e[0],d=e[1],t=e[3],e=Qt(me([g,r],n),4),g=e[0],r=e[1],n=e[3],e=Qt(ye([v,i,0,f],x,E,b),2),v=e[0],i=e[1],e=Qt(ye([a,p,0,s],x,E,b),2),a=e[0],p=e[1],e=Qt(ye([m,d,0,t],x,E,b),2),m=e[0],d=e[1],e=Qt(ye([g,r,0,n],x,E,b),2),g=e[0],r=e[1];T.push(v,i,0,f,g,r,0,n,a,p,0,s,g,r,0,n,a,p,0,s,m,d,0,t);t=h/_.width,u=(l+u)/_.height,c=(h+c)/_.width,_=l/_.height;A.push(t,u,t,_,c,u,t,_,c,u,c,_),O.push(o,o,o,o,o,o),R[0]++});var e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(T),r.STATIC_DRAW);var i=r.getAttribLocation(r.program,"a_position");r.vertexAttribPointer(i,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i);var o=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,new Float32Array(A),r.STATIC_DRAW);var n=r.getAttribLocation(r.program,"a_texCoords");r.vertexAttribPointer(n,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n);var a=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(O),r.STATIC_DRAW),t=r.getAttribLocation(r.program,"a_opacity"),r.vertexAttribPointer(t,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t);var s=r.getUniformLocation(r.program,"u_texture"),h=0;w.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];r.uniform1i(s,e),r.drawArrays(r.TRIANGLES,h,t*=6),h+=t}),r.deleteBuffer(e),r.deleteBuffer(o),r.deleteBuffer(a),r.disableVertexAttribArray(i),r.disableVertexAttribArray(n),r.disableVertexAttribArray(t)},drawBlur:function(e,t,r,i,o,n,a,s,h,l,c,u,_,f,d){var p=(g=Qt(ye([_,l-_],c,u),2))[0],g=g[1],c=(_=Qt(ye([h-_,_],c,u),2))[0],u=_[1],_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([p,u,p,g,c,u,p,g,c,u,c,g]),e.STATIC_DRAW),u=e.getAttribLocation(t,"a_position"),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(u),c=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),g=e.getAttribLocation(t,"a_texCoords"),e.vertexAttribPointer(g,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(g);var m=e.getUniformLocation(t,"u_direction");e.uniform2f(m,0,0);var v=e.getUniformLocation(t,"u_texture");e.uniform1i(v,s),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW);for(var y=100/Math.max(h,l),x=h/l,E=[],b=0;b<3;b++){var M=xe(e,null,s,h,l);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,M,0),l<=h?e.uniform2f(m,y,0):e.uniform2f(m,y*x,0),e.uniform1i(v,a),e.drawArrays(e.TRIANGLES,0,6),E.push(o);var T=xe(e,null,a,h,l);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,T,0),l<=h?e.uniform2f(m,0,y*x):e.uniform2f(m,0,y),e.uniform1i(v,s),e.drawArrays(e.TRIANGLES,0,6),o=T,E.push(M)}return e.deleteBuffer(_),e.deleteBuffer(c),e.disableVertexAttribArray(u),e.disableVertexAttribArray(g),E.forEach(function(t){return e.deleteTexture(t)}),o},drawOverflow:function(t,e,r,i,o,n,a,s){var h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(t.programOverflow,"a_position");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);var c=r/a,l=i/s,a=(o+r)/a,i=(n+i)/s,s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([c,l,c,i,a,l,c,i,a,l,a,i]),t.STATIC_DRAW),i=t.getAttribLocation(t.programOverflow,"a_texCoords"),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i),i=t.getUniformLocation(t.programOverflow,"u_texture"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(h)},drawMask:function(t,e,r,i){var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var n=t.getAttribLocation(i,"a_position");t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(i,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.getUniformLocation(i,"u_texture1");t.uniform1i(h,r),i=t.getUniformLocation(i,"u_texture2"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(a),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,o,n){var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);var c=t.getUniformLocation(e,"u_texture1");t.uniform1i(c,r),e=t.getUniformLocation(e,"u_texture2"),t.uniform1i(e,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(h),t.disableVertexAttribArray(s),t.disableVertexAttribArray(l)},drawCm:function(t,e,r,i){var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var n=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.getUniformLocation(e,"u_texture");t.uniform1i(h,r),e=t.getUniformLocation(e,"u_m"),t.uniform1fv(e,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(a),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)}},Te={},Ae={},Oe=[],Re=[],we="function"==typeof OffscreenCanvas&&fe.isFunction(OffscreenCanvas.prototype.getContext);function Se(t,e,r,i,o){var n;return(n=t?i[t]||(i[t]=!de.flag&&we?new OffscreenCanvas(e,r):document.createElement("canvas")):(n=i===Te?Oe:Re).length?n.pop():!de.flag&&we?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,n.height=r,de.flag&&(n.style.width=e+"px",n.style.height=r+"px",n.setAttribute("type",i===Te?"canvas":"webgl"),t&&n.setAttribute("key",t),o&&n.setAttribute("message",o),document.body.appendChild(n)),o=i===Te?n.getContext("2d"):n.getContext("webgl",ge)||n.getContext("experimental-webgl",ge),{canvas:n,ctx:o,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===Te?Oe:Re).push(this.canvas),this.available=!1}}}var Ie,Ce,ke={},Le={},De={},Ne={measureText:function(){var t=pe.list,c=pe.data,u="",_=[],f=[],d=[];if(Object.keys(c).forEach(function(t){var e=c[t],r=e.ff,i=e.fs,o=e.fw,n=e.s;if(n){_.push(t),f.push(n.length);for(var a="position:absolute;font-family:".concat(r,";font-size:").concat(i,"px;font-weight:").concat(o),s=0,h=n.length;s<h;s++){var l=n.charAt(s);d.push(l),u+='<span style="'.concat(a,'">').concat(l.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}c[t].s=""}}),u){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=u;for(var r,i=e.childNodes,o=pe.charWidth,n=0,a=0,s=0,h=i.length;s<h;s++){var l=i[s];0===n&&(r=_[a]),++n===f[a]&&(a++,n=0);var p=d[s],l=window.getComputedStyle(l,null);o[r][p]=parseFloat(l.width)}t.forEach(function(t){return t.__measureCb()}),pe.list=[],pe.data={},de.flag||document.body.removeChild(e)}},measureTextSync:function(t,e,r,i,o){i="position:absolute;font-family:".concat(e,";font-size:").concat(r,"px;font-weight:").concat(i),i='<span style="'.concat(i,'">').concat(o,'</span><span style="').concat(i,'">').concat(o).concat(o,"</span>"),o=document.createElement("div");o.style.position="absolute",o.style.left="99999px",o.style.top="-99999px",o.style.visibility="hidden",document.body.appendChild(o),o.innerHTML=i;o=o.childNodes;return 2*parseFloat(window.getComputedStyle(o[0],null).width)-parseFloat(window.getComputedStyle(o[1],null).width)},IMG:ke,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,o=e.length,n=[];e.forEach(function(t,e){Ne.measureImg(t,function(t){n[e]=t,++i===o&&r(n)})})}else{if(!e||!fe.isString(e))return Ne.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,a,s=ke[e]=ke[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(a=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&("undefined"!=typeof location&&location.hostname===a[1]||(t.crossOrigin="anonymous")),t.src=e,de.flag&&"undefined"!=typeof document&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Ce=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(Ne.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Ne.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Fe.toString=function(){return Ce.toString()},Fe),cancelAnimationFrame:(Ie=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Ne.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Ne.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},Pe.toString=function(){return Ie.toString()},Pe),now:function(){return"undefined"!=typeof performance?(Ne.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Ne.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&Te.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return Se(r,t,e,Te,i)},releaseCacheCanvas:function(t){Oe.push(t)},delCacheCanvas:function(t){t&&delete Te[t]},hasCacheWebgl:function(t){return t&&Ae.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return Se(r,t,e,Ae,i)},releaseCacheWebgl:function(t){Re.push(t)},delCacheWebgl:function(t){t&&delete Ae[t]},isDom:function(t){if(t){if(fe.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(fe.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},checkSupportFontFamily:function(t){if("arial"===(t=t.toLowerCase())||"serif"===t||"sans-serif"===t||"sansserif"===t)return!0;if(!Mt.info.hasOwnProperty(t))return!1;if(Mt.info[t].hasOwnProperty("checked"))return Mt.info[t].checked;var e=Ne.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__"),r=e.ctx;r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",be||(r.clearRect(0,0,16,16),r.font="16px arial",r.fillText("a",8,8),e.draw(),be=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),r.font="16px "+t,r.fillText("a",8,8),e.draw();for(var i=r.getImageData(0,0,16,16).data,o=0,n=i.length;o<n;o++)if(be[o]!==i[o])return Mt.info[t].checked=!0;return Mt.info[t].checked=!1},loadFont:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,o=t.length,n=[];t.forEach(function(t,e){Ne.loadFont(t,function(t){n[e]=t,++i===o&&r(n)})})}else{if(!t||!fe.isString(t))return Ne.error("Load font invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e=Le[t]=Le[t]||{state:0,task:[]};2===e.state?r&&r(e):1===e.state?r&&e.task.push(r):(e.state=1,r&&e.task.push(r),new FontFace(t,"url(".concat(t,")")).load().then(function(){e.state=2,e.success=!0,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}).catch(function(){e.state=2,e.success=!1,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,o=t.length,n=[];t.forEach(function(t,e){Ne.loadComponent(t,function(t){n[e]=t,++i===o&&r(n)})})}else{if(!t||!fe.isString(t))return Ne.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,a=De[t]=De[t]||{state:0,task:[]};2===a.state?r&&r(a):1===a.state?r&&a.task.push(r):(a.state=1,r&&a.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){a.state=2,a.success=!0,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},e.onerror=function(){a.state=2,a.success=!1,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function Pe(t){return Ie.apply(this,arguments)}function Fe(t){return Ce.apply(this,arguments)}var Be=fe.rgba2int,Ye=fe.isNil,He=w.PX,Ge=w.PERCENT,We=w.DEG,Ue=w.NUMBER,Xe=w.REM,Ve=w.VW,Ke=w.VH,ze=w.VMAX,je=w.VMIN,$e=w.calUnit,Ze=et.d2r,qe=Tt.canvasPolygon,Je=Tt.svgPolygon,Qe=v.STYLE_KEY.FONT_SIZE,tr=v.NODE_KEY.NODE_DEFS_CACHE;function er(t){if(/^[-+]?[\d.]/.test(t)){var e=$e(t);return-1<[Ue,We].indexOf(e[1])&&(e[1]=He),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,Ge]}function rr(t,e,r){for(var i,o=[],n=t[0][0],a=0,s=t.length;a<s;a++){var h,l=t[a];1<l.length?(h=l[1])[1]===Ge?o.push([l[0],.01*h[0]]):h[1]===Xe?o.push([l[0],h[0]*r.computedStyle[Qe]/e]):h[1]===Ve?o.push([l[0],h[0]*r.width/e]):h[1]===Ke?o.push([l[0],h[0]*r.height/e]):h[1]===ze?o.push([l[0],h[0]*Math.max(r.width,r.height)/e]):h[1]===je?o.push([l[0],h[0]*Math.min(r.width,r.height)/e]):o.push([l[0],h[0]/e]):o.push([l[0]])}1===o.length&&o.push(fe.clone(o[0])),1===o[0].length&&o[0].push(0),1<o.length&&(1===o[i=o.length-1].length&&o[i].push(1));for(var c=o[0][1],u=1,_=o.length;u<_-1;u++){var f=o[u];if(1<f.length)c=f[1];else{for(var d=u+1,p=o[o.length-1][1];d<_-1;d++){var g=o[d];if(1<g.length){p=g[1];break}}for(var m=(p-c)/(d-u+1),v=u;v<d;v++)o[v].push(c+m*(v+1-u));u=d}}for(var y=1,x=o.length;y<x;y++){var E=o[y],b=o[y-1];E[1]<b[1]&&(E[1]=b[1])}for(var M=0,T=o.length;M<T;M++){var A=o[M];if(1<A[1]){o.splice(M);var O,R,w,S,I=o[M-1];I&&I[1]<1&&(O=A[0][0]-I[0][0],R=A[0][1]-I[0][1],w=A[0][2]-I[0][2],S=A[0][3]-I[0][3],I=(1-I[1])/(A[1]-I[1]),o.push([[A[0][0]+O*I,A[0][1]+R*I,A[0][2]+w*I,A[0][3]+S*I],1]));break}}for(var C=o.length-1;0<=C;C--){var k=o[C];if(k[1]<0){o.splice(0,C+1);var L,D,N,P,F=o[C];F&&0<F[1]&&(L=F[0][0]-k[0][0],D=F[0][1]-k[0][1],N=F[0][2]-k[0][2],P=F[0][3]-k[0][3],F=-k[1]/(F[1]-k[1]),o.unshift([[k[0][0]+L*F,k[0][1]+D*F,k[0][2]+N*F,k[0][3]+P*F],0]));break}}return o.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),o.length||o.push([n,0]),o}function ir(t,e,r,i,o,n){var a=t[0],t=t[1],a=a[1]===Ge?e+a[0]*i*.01:a[1]===Xe?e+a[0]*n.computedStyle[Qe]:a[1]===Ve?e+a[0]*n.width*.01:a[1]===Ke?e+a[0]*n.height*.01:a[1]===ze?e+a[0]*Math.max(n.width,n.height)*.01:a[1]===je?e+a[0]*Math.min(n.width,n.height)*.01:e+a[0],t=t[1]===Ge?r+t[0]*o*.01:t[1]===Xe?r+t[0]*n.computedStyle[Qe]:t[1]===Ve?r+t[0]*n.width*.01:t[1]===Ke?r+t[0]*n.height*.01:t[1]===Ke?r+t[0]*Math.max(n.width,n.height)*.01:t[1]===Ke?r+t[0]*Math.min(n.width,n.height)*.01:r+t[0];return[a,t]}var or={parseGradient:function(t){var e=S.gradient.exec(t);if(e){var r,i,o,n,a,s,h={k:e[1]};"linear"===h.k?(t=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(e[2]))?h.d=(o=t[0].toLowerCase(),r=180,"to top"===o?r=0:"to top right"===o?r=45:"to right"===o?r=90:"to bottom right"===o?r=135:"to bottom"===o||("to bottom left"===o?r=225:"to left"===o?r=270:"to top left"===o?r=315:(o=/([-+]?[\d.]+)deg/.exec(o))&&(r=parseFloat(o[1]))),r%360):(i=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(e[2]),h.d=i?[parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4])]:180):"radial"===h.k?(h.s=-1<e[2].indexOf("circle")?"circle":"ellipse",(o=/(closest|farthest)-(side|corner)/i.exec(e[2]))?h.z=o[0].toLowerCase():(n=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(e[2]))?(h.z=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4])],r=!Ye(n[5]),i=!Ye(n[6]),o=!Ye(n[7]),r&&i&&o?(h.z.push(parseFloat(n[5])),h.z.push(parseFloat(n[6])),h.z.push(parseFloat(n[7]))):r&&i?(h.z.push(parseFloat(n[5])),h.z.push(parseFloat(n[6])),h.z.push(1)):r?(h.z.push(h.z[0]),h.z.push(h.z[1]),h.z.push(parseFloat(n[5]))):(h.z.push(h.z[0]),h.z.push(h.z[1]),h.z.push(1))):h.z="farthest-corner",(n=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(a=er(n[1]),s=n[2]?er(n[2]):a,h.p=[a,s]):h.p=[[50,Ge],[50,Ge]]):"conic"===h.k&&(a=/([-+]?[\d.]+deg)/i.exec(e[2]),h.d=a?parseFloat(a[0])%360:0,(s=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(a=er(s[1]),s=s[2]?er(s[2]):a,h.p=[a,s]):h.p=[[50,Ge],[50,Ge]]);e=e[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[];return h.v=e.map(function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),e=[Be(e[0])],t=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);return t&&(t=$e(t[0]),-1<[Ue,We].indexOf(t[1])&&(t[1]=He),e[1]=t),e}),h}},getLinear:function(t,e,r,i,o,n,a,s,h){var l,c,u=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,_=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0;if(r+=u,i+=_,o+=u,n+=_,Array.isArray(e))var f=r+e[0]*a,d=i+e[1]*s,p=r+e[2]*a,g=i+e[3]*s,m=rr(t,Math.sqrt(Math.pow(p-f,2)+Math.pow(g-d,2)));else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var v=Math.max(a,s),y=(E=v,u=o,_=n,E=270<=(o=e)?(n=Ze(360-o),l=u+Math.sin(n)*E,y=_+Math.cos(n)*E,x=u-Math.sin(n)*E,_-Math.cos(n)*E):180<=o?(c=Ze(o-180),l=u+Math.sin(c)*E,y=_-Math.cos(c)*E,x=u-Math.sin(c)*E,_+Math.cos(c)*E):90<=o?(c=Ze(180-o),l=u-Math.sin(c)*E,y=_-Math.cos(c)*E,x=u+Math.sin(c)*E,_+Math.cos(c)*E):(o=Ze(o),l=u-Math.sin(o)*E,y=_+Math.cos(o)*E,x=u+Math.sin(o)*E,_-Math.cos(o)*E),[l,y,x,E]);v*=2;var x=k.dotProduct(r-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/v,E=k.dotProduct(r+a-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/v,a=k.dotProduct(r+a-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/v,r=k.dotProduct(r-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/v,i=x,s=x,i=Math.min(x,Math.min(E,Math.min(a,r))),s=Math.max(s,Math.max(E,Math.max(a,r))),a=i/v,r=y[2]-y[0],v=y[3]-y[1];f=y[0]+r*a,d=y[1]+v*a,p=y[2]-r*a,g=y[3]-v*a,m=rr(t,s-i,h)}return{x1:f,y1:d,x2:p,y2:g,stop:m}},getRadial:function(t,e,r,i,o,n,a,s,h){var l,c,u,i=(p=e,_=r,l=i,c=a-o,e=s-n,r=o,i=n,o=a,n=s,a=h,s=0,Array.isArray(_)?(f=r+_[0]*c,d=i+_[1]*e,y=r+_[4]*c,x=i+_[5]*e,_[6]<=0?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-n),Math.min(Math.abs(f-n))))):(v=(m=Math.sqrt(Math.pow((_[2]-_[0])*c,2)+Math.pow((_[3]-_[1])*e,2)))*_[6],g=Math.max(m,v),m!==v&&(s=_[2]>=_[0]?_[3]>=_[1]?Math.asin((_[3]-_[1])*e/m):-Math.asin((_[1]-_[3])*e/m):_[3]>=_[1]?Ze(180)-Math.asin((_[3]-_[1])*e/m):Math.asin((_[1]-_[3])*e/m)-Ze(180)))):(y=f=(l=Qt(ir(l,r,i,c,e,a),2))[0],x=d=l[1],a=1,"closest-corner"===_&&"circle"===p?g=f<=r||o<=f||d<=i||n<=d?Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-n),Math.min(Math.abs(f-n))))):(m=f<r+.5*c?f-r:o-f,v=d<i+.5*e?d-i:n-d,Math.sqrt(Math.pow(m,2)+Math.pow(v,2))):"closest-side"===_||"closest-corner"===_?f<=r||o<=f||d<=i||n<=d?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-n),Math.min(Math.abs(f-n))))):(l=1,m=f<r+.5*c?f-r:o-f,v=d<i+.5*e?d-i:n-d,g=Math.min(m,v),m*=l="closest-corner"===_?Math.sqrt(2):l,v*=l,g*=l):(m=f<=r?r-f+c:o<=f?f-o+c:f<r+.5*c?o-f:f-r,v=d<=i?i-d+e:n<=d?d-n+e:d<i+.5*e?n-d:d-i,g=Math.max(m,v),m*=a="farthest-side"!==_?Math.sqrt(2):a,v*=a,g*=a)),[f,d,g,m="circle"===p?v=g:m,v,y,x,s]),_=Qt(i,8),a=_[0],f=_[1],d=_[2],p=_[3],g=_[4],m=_[5],v=_[6],y=_[7],x=1,s=1;return p===g&&!y||(u=[1,0,0,1,0,0],y&&(i=Math.sin(y),u=[_=Math.cos(y),i,0,0,-i,_,0,0,0,0,1,0,0,0,0,1]),p!==d&&(u=te.multiply(u,[x=p/d,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),g!==d&&(u=te.multiply(u,[1,0,0,0,0,s=g/d,0,0,0,0,1,0,0,0,0,1]))),{cx:a,cy:f,tx:m,ty:v,r:d,stop:rr(t,d,h),scx:x,scy:s,matrix:u,d:y}},getConic:function(t,e,r,i,o,n,a,s,h){var l=function(t,e,r,i,o,n,a){var s=o-r,h=n-i,e=Qt(ir(e,r,i,s,h,a),2),a=e[0],e=e[1];o=r+.5*s<=a?a-r:o-a;n=i+.5*h<=e?e-i:n-e;return n=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),[a,e,n,t]}(e,r,i,o,n,a,h),c=Qt(l,4),e=c[0],r=c[1],l=c[2];return l<<=1,{cx:e,cy:r,w:n-i,h:a-o,r:l*=s,deg:c[3],stop:rr(t,1,h)}},renderConic:function(e,t,r,i,o,n,a,s,h,l,c,u,_){if(l=(l=Kt.calRadius(o,n,a,s,h,l,c,u))||[[o,n],[o+a,n],[o+a,n+s],[o,n+s],[o,n]],t===rt.CANVAS||t===rt.WEBGL){c=Ne.getCacheCanvas(a,s,"__$$CONIC_GRADIENT$$__"),u=c.ctx.getImageData(0,0,a,s);it.getConicGradientImage(i.cx-o,i.cy-n,i.w,i.h,i.stop,u.data),c.ctx.putImageData(u,0,0),r.save(),r.beginPath(),qe(r,l),r.clip(),r.closePath(),r.drawImage(c.canvas,o,n),r.restore(),c.ctx.clearRect(0,0,a,s)}else if(t===rt.SVG){if(_){var f={tagName:"symbol",props:[],children:[]};return e.__config[tr].push(f),i.forEach(function(t){f.children.push({type:"item",tagName:"path",props:[["d",Je(t[0])],["fill",t[1]]]})}),r.add(f)}l={tagName:"clipPath",children:[{tagName:"path",props:[["d",Je(l)]]}]};e.__config[tr].push(l);var d=r.add(l);i.forEach(function(t){e.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Je(t[0])],["fill",t[1]],["clip-path","url(#"+d+")"]]})})}}},nr={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit"},ar={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},sr=[],hr=[];Object.keys(nr).forEach(function(t){hr.push(t);var e=nr[t];sr.push({k:t,v:e})});var lr=[],cr=[];Object.keys(ar).forEach(function(t){cr.push(t);var e=ar[t];lr.push({k:t,v:e})});var ur={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:1,textStrokeOver:"none"},_r=[];Object.keys(ur).forEach(function(t){_r.push(t)});var fr={DOM:nr,GEOM:ar,isValid:function(t){return nr.hasOwnProperty(t)||ar.hasOwnProperty(t)},DOM_KEY_SET:hr,GEOM_KEY_SET:cr,DOM_ENTRY_SET:sr,GEOM_ENTRY_SET:lr,INHERIT:ur,INHERIT_KEY_SET:_r},dr=fe.isNil;function pr(t,e,r,i){dr(t.flexGrow)&&(t.flexGrow=e||0),dr(t.flexShrink)&&(t.flexShrink=r||0),dr(t.flexBasis)&&(t.flexBasis=i||0)}var gr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(i,t){var e,o,n,a,r,s,h,l,c,u,_,f,d,p,g,m,v,y,x=this,E=i[t];if("background"===t)Array.isArray(E)?(r=E.length,!dr(i.backgroundColor)||(e=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(E[r-1]))&&(i.backgroundColor=e[0],E=E.slice(0,r-1)),o=[],n=[],a=[],E.forEach(function(t){var e,r;dr(i.backgroundImage)&&((e=S.gradient.exec(t))?(o.push(e[0]),t=t.replace(e[0],"")):(r=S.img.exec(E))&&(o.push(r[0]),t=t.replace(r[0],""))),!dr(i.backgroundRepeat)||(r=/(no-?)?repeat(-?[xy])?/i.exec(t))&&n.push(r[0].toLowerCase()),!dr(i.backgroundPosition)||(t=t.match(S.position))&&a.push(t.join(" "))}),o.length&&(i.backgroundImage=o),n.length&&(i.backgroundRepeat=n),a.length&&(i.backgroundPosition=a,this.toFull(i,"backgroundPosition"))):(dr(i.backgroundImage)&&((r=S.gradient.exec(E))?(i.backgroundImage=r[0],E=E.replace(r[0],"")):(s=S.img.exec(E))&&(i.backgroundImage=s[0],E=E.replace(s[0],""))),!dr(i.backgroundRepeat)||(s=/(no-?)?repeat(-?[xy])?/i.exec(E))&&(i.backgroundRepeat=s[0].toLowerCase()),!dr(i.backgroundColor)||(h=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(E))&&(i.backgroundColor=h[0],E=E.replace(h[0],"")),!dr(i.backgroundPosition)||(h=E.match(S.position))&&(i.backgroundPosition=h.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===E?pr(i,0,0,"auto"):"auto"===E?pr(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(E)?(l=E.split(/\s+/),pr(i,parseFloat(l[0]),parseFloat(l[1]),l[2])):/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(E)?(l=E.split(/\s+/),pr(i,parseFloat(l[0]),parseFloat(l[1]),l[2])):/^[\d.]+\s+[\d.]+$/.test(E)?(f=E.split(/\s+/),pr(i,parseFloat(f[0]),parseFloat(f[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(E)?(d=E.split(/\s+/),pr(i,parseFloat(d[0]),1,d[1])):/^[\d.]+$/.test(E)?pr(i,parseFloat(E),1,0):/^[\d.]+[pxremvwhina%]+/i.test(E)?pr(i,1,1,E):pr(i,0,1,"auto");else if("flexFlow"===t)(E=E.toString().split(/\s+/)).length&&(dr(i.flexDirection),i.flexDirection=E[0],1<E.length&&(i.flexWrap=E[1]));else if("borderRadius"===t){1===(E=E.toString().split("/")).length&&(E[1]=E[0]);for(var b=0;b<2;b++){var M=E[b].toString().split(/\s+/);0===M.length?E[b]=[0,0,0,0]:1===M.length?E[b]=[M[0],M[0],M[0],M[0]]:2===M.length?E[b]=[M[0],M[1],M[0],M[1]]:3===M.length?E[b]=[M[0],M[1],M[2],M[1]]:E[b]=M.slice(0,4)}this[t].forEach(function(t,e){dr(i[t])&&(i[t]=E[0][e]+" "+E[1][e])})}else"backgroundPosition"===t?(Array.isArray(E)||(E=[E]),c=this[t].map(function(t){return dr(i[t])}),E.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),x[t].forEach(function(t,e){c[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(u=E.toString().split(/\s*,\s*/)).length&&(u[1]=u[0]),this[t].forEach(function(t,e){dr(i[t])&&(i[t]=u[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(_=E.toString().split(/\s*,\s*/)).length?_[2]=_[1]=_[0]:2===_.length&&(_[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){dr(i[t])&&(i[t]=_[e])})):"margin"===t||"padding"===t?(g=i,v=this[m=t],m=g[m],dr(m)||(y=m.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi))&&(1===y.length?y[3]=y[2]=y[1]=y[0]:2===y.length?(y[2]=y[0],y[3]=y[1]):3===y.length&&(y[3]=y[1]),v.forEach(function(t,e){dr(g[t])&&(g[t]=y[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(m=(f=i)[d=t],dr(m)||(dr(f[d+"Width"])&&(v=/\b[\d.]+[pxremvwhina%]*\b/i.exec(m),f[d+"Width"]=v?v[0]:0),dr(f[d+"Style"])&&(p=/\b(solid|dashed|dotted)\b/i.exec(m),f[d+"Style"]=p?p[1]:"solid"),dr(f[d+"Color"])&&((p=/#[0-9a-f]{3,8}/i.exec(m))&&-1<[4,7,9].indexOf(p[0].length)?f[d+"Color"]=p[0]:/\btransparent\b/i.test(m)?f[d+"Color"]="transparent":(p=/rgba?\s*\(.+\)/i.exec(m),f[d+"Color"]=p?p[0]:"transparent")))):"textStroke"===t?((p=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(E))&&(i.textStrokeWidth=p[1]),(p=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(E))&&(i.textStrokeColor=p[0]),/\bfill\b/i.test(E)?i.textStrokeOver="fill":i.textStrokeOver="none"):this[t]&&this[t].forEach(function(t){dr(i[t])&&(i[t]=E)});return i}},mr=v.STYLE_KEY,y=[[mr.BACKGROUND_COLOR],[mr.BORDER_BOTTOM_COLOR],[mr.BORDER_LEFT_COLOR],[mr.BORDER_RIGHT_COLOR],[mr.BORDER_TOP_COLOR],[mr.COLOR],[mr.TEXT_STROKE_COLOR]],T=[[mr.FONT_SIZE],[mr.BORDER_BOTTOM_WIDTH],[mr.BORDER_LEFT_WIDTH],[mr.BORDER_RIGHT_WIDTH],[mr.BORDER_TOP_WIDTH],[mr.LEFT],[mr.TOP],[mr.RIGHT],[mr.BOTTOM],[mr.FLEX_BASIS],[mr.WIDTH],[mr.HEIGHT],[mr.LINE_HEIGHT],[mr.MARGIN_BOTTOM],[mr.MARGIN_LEFT],[mr.MARGIN_TOP],[mr.MARGIN_RIGHT],[mr.PADDING_TOP],[mr.PADDING_RIGHT],[mr.PADDING_BOTTOM],[mr.PADDING_LEFT],[mr.STROKE_WIDTH],[mr.STROKE_MITERLIMIT],[mr.LETTER_SPACING],[mr.PERSPECTIVE],[mr.TEXT_STROKE_WIDTH]],Y=[[mr.BACKGROUND_IMAGE],[mr.FILL],[mr.STROKE]],pt=[[mr.BORDER_TOP_LEFT_RADIUS],[mr.BORDER_TOP_RIGHT_RADIUS],[mr.BORDER_BOTTOM_RIGHT_RADIUS],[mr.BORDER_BOTTOM_LEFT_RADIUS]],vr={};y.forEach(function(t){vr[t]=!0});var yr={};T.forEach(function(t){yr[t]=!0});var xr={};pt.forEach(function(t){xr[t]=!0});var Er={};Y.forEach(function(t){Er[t]=!0});var qt=[[mr.TRANSLATE_X],[mr.TRANSLATE_Y],[mr.TRANSLATE_Z],[mr.SKEW_X],[mr.SKEW_Y],[mr.SCALE_X],[mr.SCALE_Y],[mr.SCALE_Z],[mr.ROTATE_X],[mr.ROTATE_Y],[mr.ROTATE_Z]],br={};qt.forEach(function(t){br[t]=!0});var Jt={KEY_COLOR:y,KEY_EXPAND:qt,KEY_GRADIENT:Y,KEY_LENGTH:T,KEY_RADIUS:pt,COLOR_HASH:vr,EXPAND_HASH:br,GRADIENT_HASH:Er,LENGTH_HASH:yr,RADIUS_HASH:xr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},Mr=fr.DOM,Tr=fr.GEOM,Ar=w.INHERIT,ee=v.STYLE_KEY,Or={},Rr=[],wr=n({},ee.POINTER_EVENTS,!0),Sr=(n(re={},ee.TRANSFORM,!0),n(re,ee.TRANSLATE_X,!0),n(re,ee.TRANSLATE_Y,!0),n(re,ee.SKEW_X,!0),n(re,ee.SKEW_Y,!0),n(re,ee.SCALE_X,!0),n(re,ee.SCALE_Y,!0),n(re,ee.ROTATE_Z,!0),n(re,ee.COLOR,!0),n(re,ee.FONT_STYLE,!0),n(re,ee.STROKE_WIDTH,!0),n(re,ee.FILL,!0),n(re,ee.STROKE_DASHARRAY,!0),n(re,ee.STROKE_LINECAP,!0),n(re,ee.STROKE_LINEJOIN,!0),n(re,ee.STROKE_MITERLIMIT,!0),n(re,ee.BACKGROUND_COLOR,!0),n(re,ee.BACKGROUND_IMAGE,!0),n(re,ee.BACKGROUND_POSITION_X,!0),n(re,ee.BACKGROUND_POSITION_Y,!0),n(re,ee.BACKGROUND_REPEAT,!0),n(re,ee.BACKGROUND_SIZE,!0),n(re,ee.STROKE,!0),n(re,ee.BORDER_BOTTOM_COLOR,!0),n(re,ee.BORDER_LEFT_COLOR,!0),n(re,ee.BORDER_RIGHT_COLOR,!0),n(re,ee.BORDER_TOP_COLOR,!0),n(re,ee.BORDER_TOP_LEFT_RADIUS,!0),n(re,ee.BORDER_TOP_RIGHT_RADIUS,!0),n(re,ee.BORDER_BOTTOM_RIGHT_RADIUS,!0),n(re,ee.BORDER_BOTTOM_LEFT_RADIUS,!0),n(re,ee.VISIBILITY,!0),n(re,ee.OPACITY,!0),n(re,ee.Z_INDEX,!0),n(re,ee.FILTER,!0),n(re,ee.BOX_SHADOW,!0),n(re,ee.OVERFLOW,!0),n(re,ee.BACKGROUND_CLIP,!0),n(re,ee.TEXT_STROKE_WIDTH,!0),n(re,ee.TEXT_STROKE_COLOR,!0),n(re,ee.TEXT_STROKE_OVER,!0),re),Ir=(n(ur={},ee.FONT_SIZE,!0),n(ur,ee.FONT_WEIGHT,!0),n(ur,ee.FONT_FAMILY,!0),ur),Cr={GEOM:Or,GEOM_KEY_SET:Rr,IGNORE:wr,REPAINT:Sr,MEASURE:Ir,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Cr.addGeom(e,t,r)}):t&&(Or.hasOwnProperty(t)||Rr.push(t),(Or[t]=Or[t]||{})[e]=r||!0)},isIgnore:function(t){return wr.hasOwnProperty(t)},isGeom:function(t,e){return t&&e&&Or.hasOwnProperty(e)&&Or[e].hasOwnProperty(t)},isRepaint:function(t,e){return Sr.hasOwnProperty(t)||Cr.isGeom(e,t)},isMeasure:function(t){return Ir.hasOwnProperty(t)},isValid:function(t,e){return!!e&&(!!Mr.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Tr.hasOwnProperty(e))||(Or.hasOwnProperty(e)?Or[e].hasOwnProperty(t):"translatePath"===e)))}},kr=Cr.MEASURE_KEY_SET=Object.keys(Ir).map(function(t){return parseInt(t)}),Lr=kr.length;Cr.isMeasureInherit=function(t){if(t)for(var e=0;e<Lr;e++){var r=kr[e];if(t.hasOwnProperty(r)&&t[r][1]===Ar)return!0}return!1},Cr.measureInheritList=function(t){for(var e=[],r=0;r<Lr;r++){var i=kr[r];t.hasOwnProperty(i)&&t[i][1]===Ar&&e.push(i)}return e},Cr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Cr.addGeom("$circle",["r"]),Cr.addGeom("$ellipse",["rx","ry"]),Cr.addGeom("$rect",["rx","ry"]),Cr.addGeom("$sector",["begin","end","edge","closure"]),Cr.addGeom("$polyline",["points","controls","start","end"]),Cr.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var Dr=v.STYLE_KEY,Nr=v.STYLE_RV_KEY,Pr=v.style2Upper,mr=v.STYLE_KEY,Fr=mr.POSITION,Br=mr.WIDTH,Yr=mr.HEIGHT,Hr=mr.TRANSLATE_X,Gr=mr.TRANSLATE_Y,Wr=mr.TRANSLATE_Z,Ur=mr.SCALE_X,Xr=mr.SCALE_Y,Vr=mr.SCALE_Z,y=mr.SKEW_X,qt=mr.SKEW_Y,Y=mr.ROTATE_X,T=mr.ROTATE_Y,pt=mr.ROTATE_Z,Kr=mr.ROTATE_3D,zr=mr.PERSPECTIVE,re=mr.PERSPECTIVE_ORIGIN,jr=mr.TRANSFORM,$r=mr.TRANSFORM_ORIGIN,Zr=mr.BACKGROUND_IMAGE,qr=mr.BACKGROUND_COLOR,Jr=mr.BACKGROUND_POSITION_X,Qr=mr.BACKGROUND_POSITION_Y,ti=mr.BACKGROUND_SIZE,ei=mr.OPACITY,ri=mr.Z_INDEX,ii=mr.COLOR,oi=mr.FONT_SIZE,ni=mr.FONT_FAMILY,ai=mr.FONT_WEIGHT,si=mr.FONT_STYLE,hi=mr.LINE_HEIGHT,li=mr.TEXT_ALIGN,ci=mr.FILTER,ui=mr.VISIBILITY,_i=mr.BOX_SHADOW,fi=mr.POINTER_EVENTS,di=mr.FILL,pi=mr.STROKE,gi=mr.STROKE_WIDTH,mi=mr.STROKE_DASHARRAY,vi=mr.BORDER_TOP_WIDTH,yi=mr.BORDER_RIGHT_WIDTH,xi=mr.BORDER_BOTTOM_WIDTH,Ei=mr.BORDER_LEFT_WIDTH,bi=mr.DISPLAY,Mi=mr.FLEX_DIRECTION,Ti=mr.FLEX_GROW,Ai=mr.FLEX_SHRINK,Oi=mr.FLEX_BASIS,Ri=mr.JUSTIFY_CONTENT,wi=mr.ALIGN_SELF,Si=mr.ALIGN_ITEMS,Ii=mr.MATRIX,Ci=mr.LETTER_SPACING,ee=mr.BACKGROUND_CLIP,ki=mr.WHITE_SPACE,ur=mr.TEXT_OVERFLOW,Li=mr.LINE_CLAMP,Di=mr.ORDER,Ni=mr.FLEX_WRAP,Pi=mr.ALIGN_CONTENT,Fi=mr.TRANSLATE_PATH,Bi=mr.TEXT_STROKE_COLOR,Yi=mr.TEXT_STROKE_WIDTH,Hi=mr.TEXT_STROKE_OVER,Gi=w.AUTO,Wi=w.PX,Ui=w.PERCENT,Xi=w.NUMBER,Vi=w.INHERIT,Ki=w.DEG,zi=w.RGBA,ji=w.STRING,$i=w.REM,Zi=w.VW,qi=w.VH,Ji=w.VMAX,Qi=w.VMIN,to=w.calUnit,eo=fe.isNil,ro=fe.rgba2int,io=fe.equalArr,oo=Cr.MEASURE_KEY_SET,no=Cr.isGeom,ao=Cr.GEOM,so=Cr.GEOM_KEY_SET,ho=Jt.COLOR_HASH,lo=Jt.LENGTH_HASH,co=Jt.RADIUS_HASH,uo=Jt.GRADIENT_HASH,_o=Jt.EXPAND_HASH,fo=Jt.GRADIENT_TYPE,po={translateX:Hr,translateY:Gr,translateZ:Wr,scaleX:Ur,scaleY:Xr,scaleZ:Vr,skewX:y,skewY:qt,rotateX:Y,rotateY:T,rotateZ:pt,rotate:pt};function go(t,e){t===Ur||t===Xr||t===Vr?e[1]=Xi:t===Hr||t===Gr||t===Wr?e[1]===Xi&&(e[1]=Wi):t===zr?-1<[Xi,Ui,Ki].indexOf(e[1])&&(e[1]=Wi):e[1]===Xi&&(e[1]=Ki)}function mo(t){for(var e=t.split(","),r="arial",i=0,o=e.length;i<o;i++)if(Mt.support(e[i])){r=e[i];break}return r}function vo(t){var e=mo(t[ni]);return t[oi]*(Mt.info[e]||Mt.info.arial).lhr}function yo(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Gi){if(r!==Br)break;e=e.domParent}else{if(i[1]===Wi)return t*i[0];if(i[1]===Ui)t*=.01*i[0],e=e.domParent;else{if(i[1]===$i)return t*i[0]*e.root.computedStyle[oi];if(i[1]===Zi)return t*i[0]*e.root.width*.01;if(i[1]===qi)return t*i[0]*e.root.height*.01;if(i[1]===Ji)return t*i[0]*Math.max(e.root.width,e.root.height)*.01;if(i[1]===Qi)return t*i[0]*Math.min(e.root.width,e.root.height)*.01}}}return t}var xo=(n(mr={},Fr,!0),n(mr,bi,!0),n(mr,Dr.BACKGROUND_REPEAT,!0),n(mr,Mi,!0),n(mr,Ti,!0),n(mr,Ai,!0),n(mr,Ni,!0),n(mr,Ri,!0),n(mr,Si,!0),n(mr,wi,!0),n(mr,Dr.OVERFLOW,!0),n(mr,Dr.MIX_BLEND_MODE,!0),n(mr,Dr.STROKE_LINECAP,!0),n(mr,Dr.STROKE_LINEJOIN,!0),n(mr,Dr.STROKE_MITERLIMIT,!0),n(mr,Dr.FILL_RULE,!0),n(mr,ei,!0),n(mr,ri,!0),n(mr,ee,!0),n(mr,ur,!0),n(mr,Li,!0),mr),Eo=(n(y={},ii,!0),n(y,Bi,!0),n(y,qr,!0),n(y,Dr.BORDER_TOP_COLOR,!0),n(y,Dr.BORDER_RIGHT_COLOR,!0),n(y,Dr.BORDER_BOTTOM_COLOR,!0),n(y,Dr.BORDER_LEFT_COLOR,!0),y),bo=(n(qt={},Dr.BORDER_TOP_LEFT_RADIUS,!0),n(qt,Dr.BORDER_TOP_RIGHT_RADIUS,!0),n(qt,Dr.BORDER_BOTTOM_RIGHT_RADIUS,!0),n(qt,Dr.BORDER_BOTTOM_LEFT_RADIUS,!0),n(qt,$r,!0),n(qt,re,!0),qt);var Mo={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!fe.isObject(a))return{};var u,e,r,i,o,n,s,h,l,c,_,f={},d=(a=fe.extend({},a)).border;return d&&gr.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){gr.toFull(a,t)}),(d=a.borderWidth)&&gr.toFull(a,"borderWidth"),(d=a.borderColor)&&gr.toFull(a,"borderColor"),(d=a.borderStyle)&&gr.toFull(a,"borderStyle"),(d=a.borderRadius)&&gr.toFull(a,"borderRadius"),(d=a.background)&&gr.toFull(a,"background"),d=a.backgroundPosition,eo(d)||gr.toFull(a,"backgroundPosition"),(d=a.flex)&&gr.toFull(a,"flex"),(d=a.flexFlow)&&gr.toFull(a,"flexFlow"),d=a.margin,eo(d)||gr.toFull(a,"margin"),d=a.padding,eo(d)||gr.toFull(a,"padding"),(d=a.textStroke)&&gr.toFull(a,"textStroke"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){d=a[t],eo(d)||gr.toFull(a,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){var e=a[t];!eo(e)&&a.transform&&Ne.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;eo(a[e])&&(a[e]=t)}),void 0!==(d=a.backgroundImage)&&(d?Array.isArray(d)?f[Zr]=d.map(function(t){return t?S.gradient.test(t)?or.parseGradient(t):S.img.test(t)?S.img.exec(t)[2]:null:null}):S.gradient.test(d)?f[Zr]=[or.parseGradient(d)]:S.img.test(d)?f[Zr]=[S.img.exec(d)[2]]:f[Zr]=[null]:f[Zr]=[null]),(d=a.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(d))&&-1<[4,7,9].indexOf(e[0].length)?f[qr]=[ro(e[0]),zi]:(e=/rgba?\s*\(.+\)/i.exec(d),f[qr]=[ro(e?e[0]:[0,0,0,0]),zi])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){d=a[t],eo(d)||(t=e?Qr:Jr,Array.isArray(d)||(d=[d]),f[t]=d.map(function(t){if(/^[-+]?[\d.]/.test(t)){var e=to(t);return-1<[Xi,Ki].indexOf(e[1])&&(e[1]=Wi),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Ui]}))}),(d=a.backgroundSize)&&(Array.isArray(d)||(d=[d]),f[ti]=d.map(function(t){if(!t)return[[0,Gi],[0,Gi]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],i=0;i<2;i++){var o,n=e[i];/^[-+]?[\d.]/.test(n)?(o=to(n),-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),r.push(o)):"contain"===n||"cover"===n?r.push([n,ji]):r.push([0,Gi])}return r}return[[0,Gi],[0,Gi]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];eo(e)||(f[Dr[Pr(t)]]=[ro(e),zi])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!eo(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var o=r[i];/^[-+]?[\d.]/.test(o)?(o=to(o),-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),o[0]<0&&(o[0]=0),r[i]=o):r[i]=[0,Wi]}f[Dr[Pr(t)]]=r}}),(d=a.transform)&&(u=f[jr]=[],(e=(d||"").toString().match(/\w+\(.+?\)/g))&&e.forEach(function(t){var e,r,i,o,n,a,s,h,l=t.indexOf("("),c=t.slice(0,l),t=t.slice(l+1,t.length-1);"matrix"===c?6===(e=6<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,6):e).length&&u.push([Ii,[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]]):"matrix3d"===c?16===(e=16<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,16):e).length&&u.push([Ii,e]):"perspective"===c?((r=to(t))[0]<0&&(r[0]=0),go(zr,r),u.push([zr,r])):"rotate3d"===c?4===(o=t.toString().split(/\s*,\s*/)).length&&(i=to(o[3]),go(Kr,i),o[0]=parseFloat(o[0]),o[1]=parseFloat(o[1]),o[2]=parseFloat(o[2]),o[3]=i,u.push([Kr,o])):po.hasOwnProperty(c)?(go(a=po[c],s=to(t)),u.push([a,s])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)?{translate3d:!0,scale3d:!0}.hasOwnProperty(c)&&(1===(r=t.toString().split(/\s*,\s*/)).length?(r[1]="scale3d"===c?[1]:[0],r[2]="scale3d"===c?[1]:[0]):2===r.length&&(r[2]="scale3d"===c?[1]:[0]),3===r.length&&(i=Dr[Pr(c+"X")],o=Dr[Pr(c+"Y")],n=Dr[Pr(c+"Z")],a=to(r[0]),s=to(r[1]),h=to(r[2]),go(i,a),go(o,s),go(n,h),u.push([i,a]),u.push([o,s]),u.push([n,h]))):(1===(n=t.toString().split(/\s*,\s*/)).length&&(n[1]="scale"===c?n[0]:[0]),2===n.length&&(h=Dr[Pr(c+"X")],t=Dr[Pr(c+"Y")],c=to(n[0]),n=to(n[1]),go(h,c),go(t,n),u.push([h,c]),u.push([t,n])))})),d=a.perspective,eo(d)||((r=to(d))[0]<0&&(r[0]=0),go(zr,r),f[zr]=r),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(d=a[t],!eo(d)){var e=f[Dr[Pr(t)]]=[],r=d.toString().match(S.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var o,n=r[i];/^[-+]?[\d.]/.test(n)?(o=to(n),-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),e.push(o)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[n],Ui]),eo(e[i][0])&&(e[i][0]=50))}}else e.push([50,Ui]),e.push([50,Ui])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=a[t];eo(e)||(go(t=po[t],e=to(e)),f[t]=e)}),!(d=a.rotate3d)||4===(i=d.toString().split(/\s*,\s*/)).length&&(r=to(i[3]),go(Kr,r),i[0]=parseFloat(i[0]),i[1]=parseFloat(i[1]),i[2]=parseFloat(i[2]),i[3]=r,f[Kr]=i),d=a.opacity,eo(d)||(d=parseFloat(d),isNaN(d)?f[ei]=1:(d=Math.max(d,0),d=Math.min(d,1),f[ei]=d)),d=a.zIndex,eo(d)||(f[ri]=parseInt(d)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=a[t];eo(r)||("auto"===r?r=[0,Gi]:(r=to(r),-1<[Xi,Ki].indexOf(r[1])&&(r[1]=Wi)),e=Dr[Pr(t)],f[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),d=a.flexBasis,eo(d)||("content"===d?f[Oi]=[d,ji]:/^[\d.]/.test(d)?((i=f[Oi]=to(d))[0]=Math.max(i[0],0),-1<[Xi,Ki].indexOf(i[1])&&(i[1]=Wi)):f[Oi]=[0,Gi]),d=a.order,eo(d)||(f[Di]=parseInt(d)||0),d=a.color,eo(d)||(f[ii]="inherit"===d?[[],Vi]:[ro(d),zi]),d=a.textStrokeColor,eo(d)||(f[Bi]="inherit"===d?[[],Vi]:[ro(d),zi]),!(d=a.fontSize)&&0!==d||("inherit"===d||(o=to(d))<0?f[oi]=[0,Vi]:(-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),f[oi]=o)),d=a.textStrokeWidth,eo(d)||("inherit"===d||(n=to(d))<0?f[Yi]=[0,Vi]:(-1<[Xi,Ki,Ui].indexOf(n[1])&&(n[1]=Wi),f[Yi]=n)),d=a.textStrokeOver,eo(d)||("inherit"===d?f[Hi]=[0,Vi]:(n=d.toString(),f[Hi]=[n="none"!==n&&"fill"!==n?"none":n,ji])),d=a.fontWeight,eo(d)||(f[ai]="bold"===d?[700,Xi]:"normal"===d?[400,Xi]:"lighter"===d?[200,Xi]:"inherit"===d?[0,Vi]:[Math.max(0,parseInt(d))||400,Xi]),(d=a.fontStyle)&&(f[si]="inherit"===d?[0,Vi]:[d,ji]),(d=a.fontFamily)&&(f[ni]="inherit"===d?[0,Vi]:[d.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),ji]),(d=a.textAlign)&&(f[li]="inherit"===d?[0,Vi]:[d,ji]),void 0!==(d=a.lineHeight)&&("inherit"===d?f[hi]=[0,Vi]:"normal"===d?f[hi]=[0,Gi]:/^[\d.]+/i.test(d)?(s=to(d),-1<[Ki].indexOf(s[1])&&(s[1]=Xi),f[hi]=s):(s=Math.max(0,parseFloat(d))||"normal",f[hi]="normal"===s?[null,Gi]:[s,Xi])),void 0!==(d=a.letterSpacing)&&("inherit"===d?f[Ci]=[0,Vi]:"normal"===d?f[Ci]=[0,Wi]:/^[-+]?[\d.]/.test(d)?(h=to(d),-1<[Xi,Ki].indexOf(h[1])&&(h[1]=Wi),f[Ci]=h):f[Ci]=[parseFloat(d)||0,Wi]),(d=a.whiteSpace)&&(f[ki]="inherit"===d?[0,Vi]:[d,ji]),void 0!==(d=a.lineClamp)&&(d=parseInt(d)||0,f[Li]=Math.max(0,d)),void 0!==(d=a.fill)&&(d?Array.isArray(d)?d.length?f[di]=d.map(function(t){return t?S.gradient.test(t)?or.parseGradient(t):ro(t):"none"}):f[di]=["none"]:S.gradient.test(d)?f[di]=[or.parseGradient(d)]:f[di]=[ro(d)]:f[di]=["none"]),void 0!==(d=a.stroke)&&(d?Array.isArray(d)?d.length?f[pi]=d.map(function(t){return t?S.gradient.test(t)?or.parseGradient(t):ro(t):"none"}):f[pi]=["none"]:S.gradient.test(d)?f[pi]=[or.parseGradient(d)]:f[pi]=[ro(d)]:f[pi]=["none"]),d=a.strokeWidth,eo(d)||(Array.isArray(d)||(d=[d]),f[gi]=d.map(function(t){t=to(t);return-1<[Xi,Ki].indexOf(t[1])&&(t[1]=Wi),t[0]=Math.max(t[0],0),t})),d=a.strokeDasharray,eo(d)||(Array.isArray(d)?f[mi]=d.map(function(t){t=t.toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(h=d.toString().match(/[\d.]+/g))?((h=h.map(function(t){return parseFloat(t)})).length%2==1&&h.push(h[h.length-1]),f[mi]=[h]):f[mi]=[[]]),void 0!==(d=a.filter)&&(_=(d||"").toString().match(/\b[\w-]+\s*\(\s*[-+]?[\d.]+\s*[pxremvwhdg%]*\s*\)\s*/gi),l=null,_&&(l=[],_.forEach(function(t){var e=/([\w-]+)\s*\(\s*([-+]?[\d.]+\s*[pxremvwhdg%]*)\s*\)\s*/i.exec(t);e&&(t=e[1].toLowerCase(),e=to(e[2]),"blur"===t?e[0]<=0||-1<[Ki,Ui].indexOf(e[1])||(e[1]===Xi&&(e[1]=Wi),l.push([t,e])):"hue-rotate"===t?-1!==[Xi,Ki].indexOf(e[1])&&(e[1]=Ki,l.push([t,e])):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||-1!==[Xi,Ui].indexOf(e[1])&&(e[0]=Math.max(e[0],0),e[1]=Ui,l.push([t,e])))})),f[ci]=l),(d=a.visibility)&&(f[ui]="inherit"===d?[0,Vi]:[d,ji]),(d=a.pointerEvents)&&(f[fi]="inherit"===d?[0,Vi]:[d,ji]),void 0!==(d=a.boxShadow)&&(c=null,(_=(d||"").match(/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&_.forEach(function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){c=c||[];for(var r=[],i=0;i<4;i++){var o=to(e[i+1]);-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),1<i&&o[0]<0&&(o=0),r.push(o)}r.push(ro(e[5])),r.push(e[6]||"outset"),c.push(r)}}),f[_i]=c),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){a.hasOwnProperty(t)&&(f[Dr[Pr(t)]]=a[t])}),["flexGrow","flexShrink"].forEach(function(t){a.hasOwnProperty(t)&&(f[Dr[Pr(t)]]=Math.max(parseFloat(a[t])||0,0))}),d=a.zIndex,eo(d)||(f[ri]=parseFloat(d)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;a.hasOwnProperty(t)&&(e=a[t],f[Dr[Pr(t)]]=Array.isArray(e)?e:[e])}),so.forEach(function(t){a.hasOwnProperty(t)&&(f[t]=a[t])}),f},computeMeasure:function(r,i){var o=r.currentStyle,n=r.computedStyle,t=r.domParent,a=!i&&t.computedStyle;oo.forEach(function(t){var e=o[t];t===ni?e[1]===Vi?n[t]=mo(i?fr.INHERIT[Nr[t]]:a[t]):n[t]=mo(e[0]):e[1]===Vi?n[t]=i?fr.INHERIT[Nr[t]]:a[t]:e[1]===Ui?n[t]=i?fr.INHERIT[Nr[t]]:a[t]*e[0]*.01:e[1]===$i?n[t]=i?fr.INHERIT[Nr[t]]:r.root.computedStyle[oi]*e[0]:e[1]===Zi?n[t]=i?fr.INHERIT[Nr[t]]:.01*r.root.width*e[0]:e[1]===qi?n[t]=i?fr.INHERIT[Nr[t]]:.01*r.root.height*e[0]:e[1]===Ji?n[t]=i?fr.INHERIT[Nr[t]]:.01*Math.max(r.root.width,r.root.height)*e[0]:e[1]===Qi?n[t]=i?fr.INHERIT[Nr[t]]:.01*Math.min(r.root.width,r.root.height)*e[0]:n[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,i=t.computedStyle,o=t.domParent,n=t.root,a=n.computedStyle[oi],s=!o,h=o&&o.computedStyle;[vi,yi,xi,Ei].forEach(function(t){var e=r[t];e[1]===Wi?i[t]=e[0]:e[1]===$i?i[t]=e[0]*a:e[1]===Zi?i[t]=e[0]*n.width*.01:e[1]===qi?i[t]=e[0]*n.height*.01:e[1]===Ji?i[t]=e[0]*Math.max(n.width,n.height)*.01:e[1]===Qi?i[t]=e[0]*Math.min(n.width,n.height)*.01:i[t]=0}),[Fr,bi,Mi,Ri,Si,wi,Ti,Ai,Li,Di,Ni,Pi].forEach(function(t){i[t]=r[t]});var l=r[li];if(l[1]===Vi?i[li]=s?"left":h[li]:i[li]=l[0],t=i[oi],(l=r[hi])[1]===Vi)if(s)i[hi]=vo(i);else{for(var c,u=o;u&&(c=u.currentStyle[hi])[1]===Vi;)u=u.domParent;-1<[Gi,Vi].indexOf(c[1])?i[hi]=vo(i):c[1]===Xi?i[hi]=Math.max(c[0],0)*t:i[hi]=h[hi]}else l[1]===Wi?i[hi]=Math.max(l[0],0)||vo(i):l[1]===Ui?i[hi]=Math.max(l[0]*t*.01,0)||vo(i):l[1]===$i?i[hi]=Math.max(l[0]*a,0)||vo(i):l[1]===Zi?i[hi]=Math.max(l[0]*n.width*.01,0)||vo(i):l[1]===qi?i[hi]=Math.max(l[0]*n.height*.01,0)||vo(i):l[1]===Ji?i[hi]=Math.max(l[0]*Math.max(n.width,n.height)*.01,0)||vo(i):l[1]===Qi?i[hi]=Math.max(l[0]*Math.min(n.width,n.height)*.01,0)||vo(i):l[1]===Xi?i[hi]=Math.max(l[0],0)*t||vo(i):i[hi]=vo(i);(l=r[Ci])[1]===Vi?i[Ci]=s?0:h[Ci]:l[1]===Ui?i[Ci]=.01*t*l[0]:l[1]===$i?i[Ci]=a*l[0]:l[1]===Zi?i[Ci]=.01*n.width*l[0]:l[1]===qi?i[Ci]=.01*n.height*l[0]:l[1]===Ji?i[Ci]=.01*Math.max(n.width,n.height)*l[0]:l[1]===Qi?i[Ci]=.01*Math.min(n.width,n.height)*l[0]:i[Ci]=l[0],(l=r[ki])[1]===Vi?i[ki]=s?"normal":h[ki]:i[ki]=l[0]},setFontStyle:function(t){var e=t[oi]||0,r=t[ni]||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t[si]||"normal")+" "+(t[ai]||"400")+" "+e+"px/"+e+"px "+r},getFontFamily:mo,getBaseLine:function(t){var e=t[oi],r=mo(t[ni]),i=e*(Mt.info[r]||Mt.info.arial).lhr;return.5*(t[hi]-i)+e*(Mt.info[r]||Mt.info.arial).blr},calRelative:function(t,e,r,i,o){return r[1]===Gi?r=0:-1<[Wi,Xi].indexOf(r[1])?r=r[0]:r[1]===Ui?r=yo(r[0],i,o?Br:Yr):r[1]===$i?r=r[0]*i.root.computedStyle[oi]:r[1]===Zi?r=r[0]*i.root.width*.01:r[1]===qi?r=r[0]*i.root.height*.01:r[1]===Ji?r=r[0]*Math.max(i.root.width,i.root.height)*.01:r[1]===Qi&&(r=r[0]*Math.min(i.root.width,i.root.height)*.01),r},calAbsolute:function(t,e,r,i,o){return r[1]===Gi?r=0:-1<[Wi,Xi,Ki,zi,ji].indexOf(r[1])?r=r[0]:r[1]===Ui?r=r[0]*i*.01:r[1]===$i?r=r[0]*o.computedStyle[oi]:r[1]===Zi?r=r[0]*o.width*.01:r[1]===qi?r=r[0]*o.height*.01:r[1]===Ji?r=r[0]*Math.max(o.width,o.height)*.01:r[1]===Qi&&(r=r[0]*Math.min(o.width,o.height)*.01),r},equalStyle:function(t,e,r,i){if(!e||!r)return e===r;if(t===jr){if(e.length!==r.length)return!1;for(var o=0,n=e.length;o<n;o++){var a=e[o],s=r[o];if(a[0]!==s[0])return!1;if(!io(a[1],s[1]))return!1}return!0}if(t===ci){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!io(e[h],r[h]))return!1}if(t===ti){if(e.length!==r.length)return!1;for(var c=0,u=e.length;c<u;c++){var _=e[c],f=r[c];if(_[0][0]!==f[0][0]||_[0][1]!==f[0][1]||_[1][0]!==f[1][0]||_[1][1]!==f[1][1])return!1}return!0}if(t===$r||co.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Jr||t===Qr||lo.hasOwnProperty(t)||_o.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===_i)return io(e,r);if(ho.hasOwnProperty(t))return e[1]===r[1]&&io(e[0],r[0]);if(uo.hasOwnProperty(t)&&e.k===r.k&&fo.hasOwnProperty(e.k)){var d=e.v,p=r.v;if(e.d!==r.d||d.length!==p.length)return!1;for(var g=0,m=d.length;g<m;g++){var v=d[g],y=p[g];if(v.length!==y.length)return!1;for(var x=0;x<4;x++)if(v[0][x]!==y[0][x])return!1;if(1<v.length&&(v[1][0]!==y[1][0]||v[1][1]!==y[1][1]))return!1}return!0}return no(i.tagName,t)&&(i.isMulti||Array.isArray(e)&&Array.isArray(r))?io(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[Fr])||"absolute"===t},cloneStyle:function(t,e){for(var r={},i=0,o=(e=e||Object.keys(t).map(function(t){return t=!ao.hasOwnProperty(t)?parseInt(t):t})).length;i<o;i++){var n=e[i],a=t[n];if(n===Zr)r[n]=a.map(function(t){return t&&t.k?fe.clone(t):t});else if(n===di||n===pi)r[n]=a.map(function(t){return t&&t.k?fe.clone(t):t.slice(0)});else if(n===jr||n===ci){if(a){for(var s=a.slice(0),h=0,l=s.length;h<l;h++)s[h]=s[h].slice(0),s[h][1]=s[h][1].slice(0);r[n]=s}}else if(n===_i)a&&(a=a.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),r[n]=a);else if(n===Fi)a&&(r[n]=a.map(function(t){return t.slice(0)}));else if(xo.hasOwnProperty(n))r[n]=a;else if(ao.hasOwnProperty(n))r[n]=fe.clone(a);else if(a){var c=r[n]=a.slice(0);if(n===Jr||n===Qr)for(var u=0,_=c.length;u<_;u++)c[u]=c[u].slice(0);else if(n===ti)for(var f=0,d=c.length;f<d;f++)c[f]=c[f].slice(0),c[f][0]=c[f][0].slice(0),c[f][1]=c[f][1].slice(0);else if(Eo.hasOwnProperty(n))c[0]=c[0].slice(0);else if(bo.hasOwnProperty(n))c[0]=c[0].slice(0),c[1]=c[1].slice(0);else if(n===jr)for(var p=0,g=c.length;p<g;p++)c[p]=c[p].slice(0);else n===Kr&&(c[3]=c[3].slice(0))}}return r}},Y=v.STYLE_KEY,To=Y.COLOR,Ao=Y.FONT_WEIGHT,Oo=Y.FONT_FAMILY,Ro=Y.FONT_SIZE,wo=Y.FONT_STYLE,So=Y.LETTER_SPACING,Io=Y.TEXT_STROKE_COLOR,Co=Y.TEXT_STROKE_WIDTH,ko=Y.TEXT_STROKE_OVER,Lo=function(){function h(t,e,r,i,o,n,a,s){_(this,h),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,this.__width=o,this.__height=n,this.__content=a,this.__wList=s,this.__virtualDom={}}return f(h,[{key:"render",value:function(t,e,r,i,o,n){var a=this.content,s=this.x,h=this.y,l=this.parent,c=this.wList,u=this.width,_=l.ox,l=l.oy;h+=Mo.getBaseLine(r),h+=l+n,this.__endX=(s+=_+o)+u,this.__endY=h;var f=r[So],d=r[Co],p=r[Io],g=0,m=a.length;if(t===rt.CANVAS||t===rt.WEBGL){var v="fill"===r[ko];if(f)for(;g<m;g++)v&&e.fillText(a.charAt(g),s,h),d&&(0<p[3]||3===p.length)&&e.strokeText(a.charAt(g),s,h),v||e.fillText(a.charAt(g),s,h),s+=c[g]+f;else v&&e.fillText(a,s,h),d&&(0<p[3]||3===p.length)&&e.strokeText(a,s,h),v||e.fillText(a,s,h)}else t===rt.SVG&&(t=[["x",s],["y",h],["fill",i[To]],["font-family",r[Oo]],["font-weight",r[Ao]],["font-style",r[wo]],["font-size",r[Ro]+"px"]],d&&(0<p[3]||3===p.length)&&(t.push(["stroke",i[Io]]),t.push(["stroke-width",r[Co]])),f&&t.push(["letter-spacing",f]),this.__virtualDom={type:"item",tagName:"text",props:t,content:fe.encodeHtml(a)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return this.parent.baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"wList",get:function(){return this.__wList}}]),h}(),Do=[8,16,32,64,128,256,512,1024,2048,4096,8192],No=[128,64,32,16,8,4,2,1,1,1,1],Po=Do[Do.length-1],Fo={},Bo=0,Yo=function(){function u(t,e){_(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;e=this.__canvas=Ne.getCacheCanvas(t,t,null,e);e&&(this.__offscreen=e),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=Bo++,this.__update=!1,this.time=0}return f(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var o=r*t+i;if(e[o])return e[o]=0,this.__free--,o}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(Po<t)){for(var e=Do[0],r=No[0],i=0,o=Do.length;i<o&&(e=Do[i],r=No[i],!(Do[i]>=t));i++);for(var n,a=Fo[e]=Fo[e]||[],s=0,h=a.length;s<h;s++){var l=a[s];if(l.free){n=l;break}}if(!n){if(!(n=new u(e,r)).offscreen)return void Ne.error("Can not create off-screen for page");a.push(n)}var c=n.add();return{page:n,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:Do,NUMBER:No}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(Do=t.SIZE,No=t.NUMBER,Po=Do[Do.length-1])}},{key:"MAX",get:function(){return Po}},{key:"genUuid",value:function(){return Bo++}}]),u}();function Ho(t,e,r,i){t=r-t,i-=e,e=Math.atan(Math.abs(i)/Math.abs(t));return t<0&&0<=i?Math.PI-e:t<0&&i<0?e-Math.PI:0<=t&&0<=i?e:-e}function Go(t){var e=Math.sin(t),r=Math.cos(t),t=te.identity();return t[0]=t[5]=r,t[1]=e,t[4]=-e,t}function Wo(t,e){var r=Qt(t,6),i=r[0],o=r[1],n=r[2],a=r[3],s=r[4],h=r[5],l=Qt(e,6),c=l[0],u=l[1],t=l[2],r=l[3],e=l[4],o=(n-i)*(h-o)-(s-i)*(a-o),u=(t-c)*(l[5]-u)-(e-c)*(r-u);return 0<o&&u<0||o<0&&0<u}T={exchangeOrder:function(t,e){var r,i,o,n=(o=Qt(l=t,6),n=o[0],c=o[1],a=o[2],s=o[3],h=o[4],t=o[5],l=[0,1,2],a<n&&a<h?(n=(o=[a,s,n,c])[0],c=o[1],a=o[2],s=o[3],l[0]=1,l[1]=0):h<a&&h<n&&(n=(r=[h,t,n,c])[0],c=r[1],h=r[2],t=r[3],l[0]=2,l[2]=0),n===a?s<c&&(n=(r=[a,s,n,c])[0],c=r[1],a=r[2],s=r[3],r=l[0],l[0]=l[1],l[1]=r):n===h&&t<c&&(n=(i=[h,t,n,c])[0],c=i[1],h=i[2],t=i[3],i=l[0],l[0]=l[2],l[2]=i),(a-n)*(t-c)-(h-n)*(s-c)<0&&(a=(i=[h,t,a,s])[0],s=i[1],h=i[2],t=i[3],i=l[1],l[1]=l[2],l[2]=i),[n,c,a,s,h,t,l]),a=(c=Qt(n,7))[0],s=c[1],h=c[2],t=c[3],l=c[4],n=c[5],c=Qt(function(t,e){for(var r=[],i=0,o=e.length;i<o;i++){var n=e[i];r.push(t[2*n]),r.push(t[2*n+1])}return r}(e,c[6]),6);return[[a,s,h,t,l,n],[c[0],c[1],c[2],c[3],c[4],c[5]]]},isOverflow:Wo,transform:function(t,e){var r,i=(x=Qt(t,6))[0],o=x[1],n=x[2],a=x[3],s=x[4],h=x[5],l=Qt(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=l[5],g=Wo(t,e),m=te.identity();m[12]=-i,m[13]=-o;var v=Ho(i,o,n,a);0!==v&&(r=Go(-v),m=te.multiply(r,m));var y=et.pointsDistance(i,o,n,a),x=et.pointsDistance(c,u,_,f);return(l=te.identity())[12]=-c,l[13]=-u,t=v=Ho(c,u,_,f),0!==v&&(r=Go(-v),l=te.multiply(r,l)),e=Math.abs(te.calPoint([s,h],m)[1]),v=Math.abs(te.calPoint([d,p],l)[1]),y===x&&e===v||(r=te.identity(),y!==x&&(r[0]=x/y),e!==v&&(r[5]=v/e),m=te.multiply(r,m)),l=m,i=Qt(te.calPoint([i,o],l),2),o=i[0],i=i[1],n=Qt(te.calPoint([n,a],l),2),a=n[0],n=n[1],s=Qt(te.calPoint([s,h],l),2),h=s[0],l=s[1],s=et.pointsDistance(o,i,a,n),i=et.pointsDistance(o,i,h,l),l=et.pointsDistance(h,l,a,n),a=et.pointsDistance(c,u,_,f),n=et.pointsDistance(c,u,d,p),f=et.pointsDistance(d,p,_,f),i=et.angleBySide(l,s,i),n=et.angleBySide(f,a,n),i!==n&&((r=te.identity())[4]=Math.tan(i-.5*Math.PI)+Math.tan(.5*Math.PI-n),m=te.multiply(r,m)),g&&(m[1]=-m[1],m[5]=-m[5],m[13]=-m[13]),(r=0!==t?Go(t):te.identity())[12]=c,r[13]=u,te.multiply(r,m)}};function Uo(t,e){return e<t?1:t<e?-1:0}var Xo=function(t,e){void 0===e&&(e=!1),this._compare=t=void 0===t?Uo:t,this._root=null,this._size=0,this._noDuplicates=!!e},pt={size:{configurable:!0}};Xo.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},Xo.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},Xo.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},Xo.prototype.splay=function(t){for(var e,r,i,o;t.parent;)(r=(e=t.parent).parent)&&r.parent?((o=r.parent).left===r?o.left=t:o.right=t,t.parent=o):(t.parent=null,this._root=t),i=t.left,o=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(i?(r.right=i).parent=r:r.right=null,(t.left=r).parent=t)),o?(e.left=o).parent=e:e.left=null,(t.right=e).parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(o?(r.left=o).parent=r:r.left=null,(t.right=r).parent=t)),i?(e.right=i).parent=e:e.right=null,(t.left=e).parent=t)},Xo.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},Xo.prototype.minNode=function(t){if(t=void 0===t?this._root:t)for(;t.left;)t=t.left;return t},Xo.prototype.maxNode=function(t){if(t=void 0===t?this._root:t)for(;t.right;)t=t.right;return t},Xo.prototype.insert=function(t,e){var r=this._root,i=null,o=this._compare;if(this._noDuplicates)for(;r;){if(0===o((i=r).key,t))return;r=o(r.key,t)<0?r.right:r.left}else for(;r;)r=o((i=r).key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:i},i?o(i.key,r.key)<0?i.right=r:i.left=r:this._root=r,this.splay(r),this._size++,r},Xo.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var i=r(e.key,t);if(i<0)e=e.right;else{if(!(0<i))return e;e=e.left}}return null},Xo.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var i=r(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},Xo.prototype.remove=function(t){var e=this.find(t);return!!e&&(this.splay(e),e.left?e.right?((t=this.minNode(e.right)).parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t):this.replace(e,e.left):this.replace(e,e.right),this._size--,!0)},Xo.prototype.removeNode=function(t){return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0);var e},Xo.prototype.erase=function(t){var e,r=this.find(t);r&&(this.splay(r),e=r.left,t=r.right,r=null,e&&(e.parent=null,r=this.maxNode(e),this.splay(r),this._root=r),t&&(e?r.right=t:this._root=t,t.parent=r),this._size--)},Xo.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},Xo.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)e=(t=e).parent;return e},Xo.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)e=(t=e).parent;return e},Xo.prototype.forEach=function(t){for(var e=this._root,r=[],i=!1,o=0;!i;)e?(r.push(e),e=e.left):0<r.length?(t(e=r.pop(),o++),e=e.right):i=!0;return this},Xo.prototype.range=function(t,e,r,i){for(var o=[],n=this._compare,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(0<n((a=o.pop()).key,e))break;if(0<=n(a.key,t)&&r.call(i,a))return this;a=a.right}return this},Xo.prototype.keys=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.key),t=t.right):i=!0;return r},Xo.prototype.values=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.data),t=t.right):i=!0;return r},Xo.prototype.at=function(t){for(var e=this._root,r=[],i=!1,o=0;!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),o===t)return e;o++,e=e.right}else i=!0;return null},Xo.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return r&&function t(e,r,i,o,n){if(o<=i)return;var a=e[i+o>>1];var s=i-1;var h=o+1;for(;;){for(;n(e[++s],a)<0;);for(;0<n(e[--h],a););if(h<=s)break;var l=e[s];e[s]=e[h],e[h]=l,l=r[s],r[s]=r[h],r[h]=l}t(e,r,i,h,n);t(e,r,h+1,o,n)}(t,e,0,i-1,this._compare),this._root=function t(e,r,i,o,n){var a=n-o;if(0<a){var s=o+Math.floor(a/2),h=r[s],a=i[s],e={key:h,data:a,parent:e};return e.left=t(e,r,i,o,s),e.right=t(e,r,i,s+1,n),e}return null}(null,t,e,0,i),this._size=i,this},Xo.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},Xo.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},Xo.prototype.isEmpty=function(){return null===this._root},pt.size.get=function(){return this._size},Xo.createTree=function(t,e,r,i,o){return new Xo(r,o).load(t,e,i)},Object.defineProperties(Xo.prototype,pt);var Vo=0,Ko=1,zo=2,jo=3,$o=0,Zo=1,qo=2,Jo=3;function Qo(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!tn(e,r)||e.isVertical()?e.prevInResult:e));e=tn(t,r);t.resultTransition=e?function(t,e){var r,i=!t.inOut,o=!t.otherInOut;switch(e){case $o:r=i&&o;break;case Zo:r=i||o;break;case Jo:r=i^o;break;case qo:r=t.isSubject?i&&!o:o&&!i}return r?1:-1}(t,r):0}function tn(t,e){switch(t.type){case Vo:switch(e){case $o:return!t.otherInOut;case Zo:return t.otherInOut;case qo:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case Jo:return!0}break;case zo:return e===$o||e===Zo;case jo:return e===qo;case Ko:return!1}return!1}var en=function(t,e,r,i,o){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=i,this.type=o||Vo,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},ee={inResult:{configurable:!0}};function rn(t,e){return t[0]===e[0]&&t[1]===e[1]}en.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?0<(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]):0<(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])},en.prototype.isAbove=function(t){return!this.isBelow(t)},en.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},ee.inResult.get=function(){return 0!==this.resultTransition},en.prototype.clone=function(){var t=new en(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties(en.prototype,ee);var ur=11102230246251565e-32,on=134217729,nn=(3+8*ur)*ur;function an(t,e,r,i,o){var n,a,s,h,l=e[0],c=i[0],u=0,_=0;l<c==-l<c?(n=l,l=e[++u]):(n=c,c=i[++_]);var f=0;if(u<t&&_<r)for(l<c==-l<c?(s=n-((a=l+n)-l),l=e[++u]):(s=n-((a=c+n)-c),c=i[++_]),n=a,0!==s&&(o[f++]=s);u<t&&_<r;)l<c==-l<c?(s=n-((a=n+l)-(h=a-n))+(l-h),l=e[++u]):(s=n-((a=n+c)-(h=a-n))+(c-h),c=i[++_]),n=a,0!==s&&(o[f++]=s);for(;u<t;)s=n-((a=n+l)-(h=a-n))+(l-h),l=e[++u],n=a,0!==s&&(o[f++]=s);for(;_<r;)s=n-((a=n+c)-(h=a-n))+(c-h),c=i[++_],n=a,0!==s&&(o[f++]=s);return 0===n&&0!==f||(o[f++]=n),f}function sn(t){return new Float64Array(t)}var hn=(3+16*ur)*ur,ln=(2+12*ur)*ur,cn=(9+64*ur)*ur*ur,un=sn(4),_n=sn(8),fn=sn(12),dn=sn(16),pn=sn(4);function gn(t,e,r,i,o,n,a){var s,h,l,c,u,_,f,d,p,g,m=t-o,v=r-o,y=e-n,x=i-n,E=m*x,b=on*m,M=b-(b-m),T=m-M;un[0]=(f=T*(l=x-(h=(b=on*x)-(b-x)))-(E-M*h-T*h-M*l))-((c=f-(p=(T=y-(M=(b=on*y)-(b-y)))*(l=v-(h=(b=on*v)-(b-v)))-((d=y*v)-M*h-T*h-M*l)))+(s=f-c))+(s-p),un[1]=(_=E-((u=E+c)-(s=u-E))+(c-s))-((c=_-d)+(s=_-c))+(s-d),un[2]=u-((g=u+c)-(s=g-u))+(c-s),un[3]=g;var A=function(t,e){for(var r=e[0],i=1;i<t;i++)r+=e[i];return r}(4,un),O=ln*a;if(O<=A||O<=-A)return A;if(t=t-(m+(s=t-m))+(s-o),o=r-(v+(s=r-v))+(s-o),e=e-(y+(s=e-y))+(s-n),n=i-(x+(s=i-x))+(s-n),0==t&&0==e&&0==o&&0==n)return A;if((O=cn*a+nn*Math.abs(A))<=(A+=m*n+x*t-(y*o+v*e))||O<=-A)return A;pn[0]=(f=(T=t-(M=(b=on*t)-(b-t)))*(l=x-(h=(b=on*x)-(b-x)))-((E=t*x)-M*h-T*h-M*l))-((c=f-(p=(T=e-(M=(b=on*e)-(b-e)))*(l=v-(h=(b=on*v)-(b-v)))-((d=e*v)-M*h-T*h-M*l)))+(s=f-c))+(s-p),pn[1]=(_=E-((u=E+c)-(s=u-E))+(c-s))-((c=_-d)+(s=_-c))+(s-d),pn[2]=u-((g=u+c)-(s=g-u))+(c-s),pn[3]=g;v=an(4,un,4,pn,_n);pn[0]=(f=(T=m-(M=(b=on*m)-(b-m)))*(l=n-(h=(b=on*n)-(b-n)))-((E=m*n)-M*h-T*h-M*l))-((c=f-(p=(T=y-(M=(b=on*y)-(b-y)))*(l=o-(h=(b=on*o)-(b-o)))-((d=y*o)-M*h-T*h-M*l)))+(s=f-c))+(s-p),pn[1]=(_=E-((u=E+c)-(s=u-E))+(c-s))-((c=_-d)+(s=_-c))+(s-d),pn[2]=u-((g=u+c)-(s=g-u))+(c-s),pn[3]=g;v=an(v,_n,4,pn,fn);pn[0]=(f=(T=t-(M=(b=on*t)-(b-t)))*(l=n-(h=(b=on*n)-(b-n)))-((E=t*n)-M*h-T*h-M*l))-((c=f-(p=(T=e-(M=(b=on*e)-(b-e)))*(l=o-(h=(b=on*o)-(b-o)))-((d=e*o)-M*h-T*h-M*l)))+(s=f-c))+(s-p),pn[1]=(_=E-((u=E+c)-(s=u-E))+(c-s))-((c=_-d)+(s=_-c))+(s-d),pn[2]=u-((g=u+c)-(s=g-u))+(c-s),pn[3]=g;v=an(v,fn,4,pn,dn);return dn[v-1]}function mn(t,e,r){var i,o,n,a,s,h,e=(i=t[0],o=t[1],n=e[0],a=e[1],s=r[0],h=r[1],r=(t=(o-h)*(n-s))-(e=(i-s)*(a-h)),0==t||0==e||0<t!=0<e?r:(e=Math.abs(t+e),Math.abs(r)>=hn*e?r:-gn(i,o,n,a,s,h,e)));return 0<e?-1:e<0?1:0}function vn(t,e){var r=t.point,i=e.point;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:(e=e,r=r,(t=t).left===e.left?0===mn(r,t.otherEvent.point,e.otherEvent.point)?!t.isSubject&&e.isSubject?1:-1:t.isBelow(e.otherEvent.point)?-1:1:t.left?1:-1)}function yn(t,e,r){var i=new en(e,!1,t,t.isSubject),e=new en(e,!0,t.otherEvent,t.isSubject);return rn(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=e.contourId=t.contourId,0<vn(e,t.otherEvent)&&(t.otherEvent.left=!0,e.left=!1),t.otherEvent.otherEvent=e,t.otherEvent=i,r.push(e),r.push(i),r}function xn(t,e){return t[0]*e[1]-t[1]*e[0]}function En(t,e){return t[0]*e[0]+t[1]*e[1]}function bn(t,e,r){var i=function(t,e,r,i,o){var n=[e[0]-t[0],e[1]-t[1]],a=[i[0]-r[0],i[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var h=[r[0]-t[0],r[1]-t[1]],l=xn(n,a),c=En(n,n);if(0<l*l){e=xn(h,a)/l;if(e<0||1<e)return null;i=xn(h,n)/l;return i<0||1<i?null:0==e||1==e?o?null:[s(t,e,n)]:0==i||1==i?o?null:[s(r,i,a)]:[s(t,e,n)]}return 0<(l=xn(h,n))*l?null:(h=En(n,h)/c,a=h+En(n,a)/c,c=Math.min(h,a),a=Math.max(h,a),c<=1&&0<=a?1===c?o?null:[s(t,0<c?c:0,n)]:0===a?o?null:[s(t,a<1?a:1,n)]:o&&0===c&&1===a?null:[s(t,0<c?c:0,n),s(t,a<1?a:1,n)]:null)}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),o=i?i.length:0;if(0===o)return 0;if(1===o&&(rn(t.point,e.point)||rn(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===o&&t.isSubject===e.isSubject)return 0;if(1===o)return rn(t.point,i[0])||rn(t.otherEvent.point,i[0])||yn(t,i[0],r),rn(e.point,i[0])||rn(e.otherEvent.point,i[0])||yn(e,i[0],r),1;var n=[],o=!1,i=!1;return rn(t.point,e.point)?o=!0:1===vn(t,e)?n.push(e,t):n.push(t,e),rn(t.otherEvent.point,e.otherEvent.point)?i=!0:1===vn(t.otherEvent,e.otherEvent)?n.push(e.otherEvent,t.otherEvent):n.push(t.otherEvent,e.otherEvent),o&&i||o?(e.type=Ko,t.type=e.inOut===t.inOut?zo:jo,o&&!i&&yn(n[1].otherEvent,n[0].point,r),2):(i?yn(n[0],n[1].point,r):n[0]!==n[3].otherEvent?(yn(n[0],n[1].point,r),yn(n[1],n[2].point,r)):(yn(n[0],n[1].point,r),yn(n[3].otherEvent,n[2].point,r)),3)}function Mn(t,e){if(t===e)return 0;if(0!==mn(t.point,t.otherEvent.point,e.point)||0!==mn(t.point,t.otherEvent.point,e.otherEvent.point))return rn(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===vn(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,i=e.point;return r[0]===i[0]&&r[1]===i[1]?(r=t.otherEvent.point,i=e.otherEvent.point,r[0]===i[0]&&r[1]===i[1]?0:t.contourId>e.contourId?1:-1):1===vn(t,e)?1:-1}var Tn=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function An(t){for(var c=function(t){for(var e,r,i=[],o=0,n=t.length;o<n;o++)((e=t[o]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var a=!1;!a;)for(a=!0,o=0,n=i.length;o<n;o++)o+1<n&&1===vn(i[o],i[o+1])&&(r=i[o],i[o]=i[o+1],i[o+1]=r,a=!1);for(o=0,n=i.length;o<n;o++)(e=i[o]).otherPos=o;for(o=0,n=i.length;o<n;o++)(e=i[o]).left||(r=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=r);return i}(t),u={},_=[],e=function(){if(!u[f]){var t,e,r,i,o=_.length,n=(t=c[f],e=_,r=o,l=new Tn,null!=t.prevInResult?(t=(i=t.prevInResult).outputContourId,0<i.resultTransition?null!=(i=e[t]).holeOf?(e[i=i.holeOf].holeIds.push(r),l.holeOf=i,l.depth=e[t].depth):(e[t].holeIds.push(r),l.holeOf=t,l.depth=e[t].depth+1):(l.holeOf=null,l.depth=e[t].depth)):(l.holeOf=null,l.depth=0),l),a=function(t){u[t]=!0,c[t].outputContourId=o},s=f,h=f,l=c[f].point;for(n.points.push(l);a(s),a(s=c[s].otherPos),n.points.push(c[s].point),(s=function(t,e,r,i){var o,n=t+1,a=e[t].point,s=e.length;for(n<s&&(o=e[n].point);n<s&&o[0]===a[0]&&o[1]===a[1];){if(!r[n])return n;o=e[++n].point}for(n=t-1;r[n]&&i<n;)n--;return n}(s,c,u,h))!=h;);_.push(n)}},f=0,r=c.length;f<r;f++)e();return _}Tn.prototype.isExterior=function(){return null==this.holeOf};var On=Rn,mr=Rn;function Rn(t,e){if(!(this instanceof Rn))return new Rn(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||wn,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this._down(r)}function wn(t,e){return t<e?-1:e<t?1:0}Rn.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];0<t;){var o=t-1>>1,n=e[o];if(0<=r(i,n))break;e[t]=n,t=o}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,o=e[t];t<i;){var n=1+(t<<1),a=n+1,s=e[n];if(a<this.length&&r(e[a],s)<0&&(s=e[n=a]),0<=r(s,o))break;e[t]=s,t=n}e[t]=o}},On.default=mr;var Sn=Math.max,In=Math.min,Cn=0;function kn(t,e,r,i,o,n){for(var a=0,s=t.length-1;a<s;a++){var h=t[a],l=t[a+1],c=new en(h,!1,void 0,e),u=new en(l,!1,c,e);c.otherEvent=u,h[0]===l[0]&&h[1]===l[1]||(c.contourId=u.contourId=r,n||(c.isExteriorRing=!1,u.isExteriorRing=!1),0<vn(c,u)?u.left=!0:c.left=!0,l=h[0],h=h[1],o[0]=In(o[0],l),o[1]=In(o[1],h),o[2]=Sn(o[2],l),o[3]=Sn(o[3],h),i.push(c),i.push(u))}}var Ln=[];function Dn(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var i=(n=e,o=r,s=null,(a=t).length*n.length==0&&(o===$o?s=Ln:o===qo?s=a:o!==Zo&&o!==Jo||(s=0===a.length?n:a)),s);if(i)return i===Ln?null:i;var o,n,a,s,h=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],c=function(t,e,r,i,o){for(var n,a,s,h,l=new On(null,vn),c=0,u=t.length;c<u;c++)for(s=0,h=(n=t[c]).length;s<h;s++)(a=0===s)&&Cn++,kn(n[s],!0,Cn,l,r,a);for(c=0,u=e.length;c<u;c++)for(s=0,h=(n=e[c]).length;s<h;s++)a=0===s,(a=o===qo?!1:a)&&Cn++,kn(n[s],!1,Cn,l,i,a);return l}(t,e,h,l,r);if(o=t,n=e,a=r,s=null,((t=h)[0]>(e=l)[2]||e[0]>t[2]||t[1]>e[3]||e[1]>t[3])&&(a===$o?s=Ln:a===qo?s=o:a!==Zo&&a!==Jo||(s=o.concat(n))),i=s)return i===Ln?null:i;for(var u=An(function(t,e,r,i){for(var o=new Xo(Mn),n=[],a=Math.min(e[2],r[2]);0!==t.length;){var s,h,l,c,u,_=t.pop();if(n.push(_),i===$o&&_.point[0]>a||i===qo&&_.point[0]>e[2])break;_.left?(l=h=o.insert(_),h=h!==(s=o.minNode())?o.prev(h):null,l=o.next(l),Qo(_,c=h?h.key:null,i),l&&2===bn(_,l.key,t)&&(Qo(_,c,i),Qo(_,l.key,i)),h&&2===bn(h.key,_,t)&&(Qo(c,(u=(u=h)!==s?o.prev(u):null)?u.key:null,i),Qo(_,c,i))):(_=_.otherEvent,l=h=o.find(_),h&&l&&(h=h!==s?o.prev(h):null,l=o.next(l),o.remove(_),l&&h&&bn(h.key,l.key,t)))}return n}(c,h,l,r)),_=[],f=0;f<u.length;f++){var d=u[f];if(d.isExterior()){for(var p=[d.points],g=0;g<d.holeIds.length;g++){var m=d.holeIds[g];p.push(u[m].points)}_.push(p)}}return _}function Nn(t,e){return Dn(t,e,Zo)}function Pn(t,e){return Dn(t,e,qo)}function Fn(t,e){return Dn(t,e,Jo)}function Bn(t,e){return Dn(t,e,$o)}var y={matrix:te,tar:T,vector:k,geom:et,booleanOperations:{union:Nn,diff:Pn,intersection:Bn,xor:Fn}},re=v.STYLE_KEY,Yn=re.TRANSLATE_X,Hn=re.TRANSLATE_Y,Gn=re.TRANSLATE_Z,Wn=re.SCALE_X,Un=re.SCALE_Y,Xn=re.SCALE_Z,Vn=re.SKEW_X,Kn=re.SKEW_Y,zn=re.ROTATE_X,jn=re.ROTATE_Y,$n=re.ROTATE_Z,Zn=re.ROTATE_3D,qn=re.PERSPECTIVE,Jn=re.MATRIX,Qn=re.FONT_SIZE,ta=w.PX,ea=w.PERCENT,ra=w.REM,ia=w.VW,oa=w.VH,na=w.VMAX,aa=w.VMIN,qt=y.matrix,sa=qt.identity,ha=qt.multiply,la=qt.isE,ca=y.geom.d2r;function ua(t,e,r,i){var o,n,a,s,t=(o=e,n=r,a=i,s=[],t.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];s.push([t,function(t,e,r,i,o){if(t===Yn||t===Gn){if(e[1]===ea)return e[0]*r*.01;if(e[1]===ra)return e[0]*o.computedStyle[Qn];if(e[1]===ia)return e[0]*o.width*.01;if(e[1]===oa)return e[0]*o.height*.01;if(e[1]===na)return e[0]*Math.max(o.width,o.height)*.01;if(e[1]===aa)return e[0]*Math.min(o.width,o.height)*.01}else if(t===Hn){if(e[1]===ea)return e[0]*i*.01;if(e[1]===ra)return e[0]*o.computedStyle[Qn];if(e[1]===ia)return e[0]*o.width*.01;if(e[1]===oa)return e[0]*o.height*.01;if(e[1]===na)return e[0]*Math.max(o.width,o.height)*.01;if(e[1]===aa)return e[0]*Math.min(o.width,o.height)*.01}else{if(t===Jn)return e;if(t===Zn)return e}return e[0]}(t,e,o,n,a)])}),s),g=sa();return t.forEach(function(t){var e,r,i,o,n,a,s,h,l,c,u,_=Qt(t,2),f=_[0],d=_[1],p=sa();e=p,i=d,(r=f)===Yn?e[12]=i:r===Hn?e[13]=i:r===Gn?e[14]=i:r===Wn?e[0]=i:r===Un?e[5]=i:r===Xn?e[10]=i:r===Vn?(i=ca(i),e[4]=Math.tan(i)):r===Kn?(i=ca(i),e[1]=Math.tan(i)):r===zn?(i=ca(i),n=Math.sin(i),o=Math.cos(i),e[5]=e[10]=o,e[6]=n,e[9]=-n):r===jn?(i=ca(i),s=Math.sin(i),u=Math.cos(i),e[0]=e[10]=u,e[8]=s,e[2]=-s):r===$n?(i=ca(i),l=Math.sin(i),h=Math.cos(i),e[0]=e[5]=h,e[1]=l,e[4]=-l):r===Zn?(t=(c=Qt(i,4))[0],_=c[1],d=c[2],f=c[3],f=ca(f[0]),o=Math.sin(f),n=Math.cos(f),!t||_||d?!_||t||d?!d||t||_?(1!==(u=Math.sqrt(t*t+_*_+d*d))&&(t*=a=1/u,_*=a,d*=a),s=t*_,h=_*d,l=d*t,c=t*o,f=_*o,u=d*o,e[0]=t*t*(a=1-n)+n,e[1]=s*a+u,e[2]=l*a-f,e[3]=0,e[4]=s*a-u,e[5]=_*_*a+n,e[6]=h*a+c,e[7]=0,e[8]=l*a+f,e[9]=h*a-c,e[10]=d*d*a+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(d<0&&(o=-o),e[0]=n,e[4]=-o,e[1]=o,e[5]=n):(_<0&&(o=-o),e[0]=n,e[8]=o,e[2]=-o,e[10]=n):(t<0&&(o=-o),e[5]=n,e[9]=-o,e[6]=o,e[10]=n)):r===qn&&0<i?(i=Math.max(i,1),e[11]=-1/i):r===Jn&&fe.assignMatrix(e,i),g=ha(g,p)}),g}function _a(t,e){var r=Qt(e,2),i=r[0],e=r[1],r=t.slice(0);return 0===i&&0===e||la(t)?r:(r=ha([1,0,0,0,0,1,0,0,0,0,1,0,i,e,0,1],r),r=ha(r,[1,0,0,0,0,1,0,0,0,0,1,0,-i,-e,0,1]))}var fa={calMatrix:ua,calOrigin:function(t,r,i,o){var n=[];return t.forEach(function(t,e){t[1]===ta?n.push(t[0]):t[1]===ea?n.push(t[0]*(e?i:r)*.01):t[1]===ra?n.push(t[0]*o.computedStyle[Qn]):t[1]===ia?n.push(t[0]*o.width*.01):t[1]===oa?n.push(t[0]*o.height*.01):t[1]===na?n.push(t[0]*Math.max(o.width,o.height)*.01):t[1]===aa&&n.push(t[0]*Math.min(o.width,o.height)*.01)}),n},calMatrixByPerspective:function(t,e){return t=!la(e)?ha(e,t):t},calPerspectiveMatrix:function(t,e){if(t&&0<t){var r=sa();t=Math.max(t,1),r[11]=-1/t;t=Qt(e,2),e=t[0],t=t[1];return(e||t)&&(r=ha([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=ha(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r}},calMatrixByOrigin:_a,calMatrixWithOrigin:function(t,e,r,i){return _a(ua(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}};function da(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function pa(t){return 3*Math.floor(.5*t)}var ga={kernelSize:da,outerSize:function(t){return pa(da(t))},outerSizeByD:pa,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),o=0,n=i;0<=n;n--){var a=Math.pow(Math.E,-Math.pow(n,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(a),o+=a}for(var s=1;s<=i;s++){var h=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(h),o+=h}if(1!==o)for(var l=0;l<e;l++)r[l]/=o;return r}},Y=v.STYLE_KEY,ma=Y.TRANSFORM_ORIGIN,va=Y.TRANSFORM;function ya(t,e){var r=t.size,i=t.sx1,o=t.sy1,n=t.width,a=t.height,s=t.bbox,e=Ne.getCacheCanvas(n,a,null,e);return e.x=0,e.y=0,e.bbox=s,e.size=r,e.sx1=i,e.sy1=o,e.dx=t.dx,e.dy=t.dy,e.dbx=t.dbx,e.dby=t.dby,e.width=n,e.height=a,e}var xa=function(){function p(t,e,r,i,o,n,a){_(this,p),this.__init(t,e,r,i,o,n,a)}return f(p,[{key:"__init",value:function(t,e,r,i,o,n,a){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=o;r=Qt(i.getCoords(o),2),o=r[0],r=r[1];this.__x=o,this.__y=r,this.__appendData(n,a),this.__isNew=!0,i.canvas&&(this.__enabled=!0,(a=i.ctx).setTransform(1,0,0,1,0,0),a.globalAlpha=1,de.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,o,n,a;fe.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),o=Math.ceil(t[3]-t[1]),(a=Yo.getInstance(Math.max(i,o)))?(n=a.page,a=a.pos,this.__init(i,o,t,n,a,e,r)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return Yo.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),o=Math.ceil(t[3]-t[1]),n=Yo.getInstance(Math.max(i,o));if(n)return new p(i,o,t,n.page,n.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=0;e.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t&&(r=ga.outerSize(e))});var i=t.x,o=t.y,n=t.size,a=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox;(u=u.slice(0))[0]-=r,u[1]-=r,u[2]+=r,u[3]+=r;var _=Ne.getCacheCanvas(l+2*r,c+2*r,null,"filter");return _.ctx.filter=Tt.canvasFilter(e),_.ctx.drawImage(a,i,o,l,c,r,r,l,c),_.ctx.filter="none",_.draw(),_.bbox=u,_.x=0,_.y=0,_.size=n,_.sx1=s-r,_.sy1=h-r,_.dx=t.dx,_.dy=t.dy,_.dbx=t.dbx,_.dby=t.dby,_.width=l+2*r,_.height=c+2*r,_}},{key:"genMask",value:function(t,e,r){for(var i=ya(t,"mask1"),o=[],n=e.computedStyle,a=n[va],s=n[ma],h=e.next,l=h.isClip;h&&h.isMask;)o.push(h),h=h.next;var c=i.x,u=i.y,_=i.ctx,f=i.dbx,n=i.dby;s[0]+=c+f+e.__sx1-t.sx1,s[1]+=u+n+e.__sy1-t.sy1;var d=fa.calMatrixByOrigin(a,s);return o.forEach(function(t){r(t,i,d)}),_.setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.globalCompositeOperation=l?"source-out":"source-in",p.drawCache(t,i),_.globalCompositeOperation="source-over",i.draw(_),i}},{key:"genOverflow",value:function(t,e){var r=t.bbox,i=e.sx,o=e.sy,n=e.outerWidth,a=e.outerHeight;if(r[0]<i||r[1]<o||r[2]>i+n||r[3]>o+a){var s=ya(t,"overflow"),e=s.ctx;return e.setTransform(1,0,0,1,0,0),e.globalAlpha=1,p.drawCache(t,s),s.draw(e),e.globalCompositeOperation="destination-in",e.fillStyle="#FFF",e.beginPath(),e.rect(i-r[0],o-r[1],n,a),e.fill(),e.closePath(),e.globalCompositeOperation="source-over",s}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(fe.equalArr(e,r))return t;var i=r[0]-e[0],o=r[1]-e[1],n=p.getInstance(e);if(n&&n.enabled){var a=t.x,s=t.y,h=t.canvas,l=t.width,c=t.height,r=n.x,e=n.y;return n.sx1=t.sx1,n.sy1=t.sy1,n.dx=t.dx+i,n.dy=t.dy+o,n.dbx=t.dbx+i,n.dby=t.dby+o,n.ctx.drawImage(h,a,s,l,c,i+r,o+e,l,c),n.__available=!0,t.release(),n}}},{key:"drawCache",value:function(t,e,r,i,o,n,a){var s=e.x,h=e.y,l=e.sx1,c=e.sy1,u=e.ctx,_=e.dbx,f=e.dby,d=t.x,p=t.y,g=t.canvas,m=t.sx1,v=t.sy1,y=t.dbx,x=t.dby,e=t.width,t=t.height,y=s+m-l+_-y,x=h+v-c+f-x;r&&i&&o&&(o[0]+=y,o[1]+=x,o=fa.calMatrixByOrigin(r,o),i=te.multiply(i,o),te.isE(n)||(i=te.multiply(n,i)),a&&(i=fe.equalArr(i,a)?te.identity():(a=te.inverse(a),te.multiply(a,i))),u.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),u.drawImage(g,d,p,e,t,y,x,e,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var o=i.x,n=i.y,a=i.canvas,s=i.sx1,h=i.sy1,l=i.dbx,e=i.dby,r=i.width,i=i.height;t.drawImage(a,o,n,r,i,s-l,h-e,r,i)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),p}();n(xa,"NA",0),n(xa,"LOCAL",1),n(xa,"CHILD",2),n(xa,"SELF",3);var pt=v.STYLE_KEY,ee=v.STYLE_KEY,Ea=ee.TRANSLATE_X,ba=ee.TRANSLATE_Y,Ma=ee.TRANSLATE_Z,Ta=ee.OPACITY,Aa=ee.FILTER,Oa=ee.PERSPECTIVE,Ra=ee.PERSPECTIVE_ORIGIN,wa={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},Sa=(n(ur={},pt.SCALE_X,!0),n(ur,pt.SCALE_Y,!0),n(ur,pt.SCALE_Z,!0),n(ur,pt.ROTATE_X,!0),n(ur,pt.ROTATE_Y,!0),n(ur,pt.ROTATE_Z,!0),n(ur,pt.ROTATE_3D,!0),n(ur,pt.TRANSFORM,!0),n(ur,pt.TRANSFORM_ORIGIN,!0),ur),Ia=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Cr.isIgnore(t)?wa.NONE:t===Ea?wa.TRANSLATE_X:t===ba?wa.TRANSLATE_Y:t===Ma?wa.TRANSLATE_Z:Sa.hasOwnProperty(t)?wa.TRANSFORM:t===Ta?wa.OPACITY:t===Aa?wa.FILTER:t===Oa||t===Ra?wa.PERSPECTIVE:Cr.isRepaint(t)?wa.REPAINT:wa.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<wa.REFLOW},isRebuild:function(t){return wa.REBUILD<=t}},wa);Ia.TRANSFORMS=Sa;var mr=v.STYLE_KEY,Ca=mr.DISPLAY,ka=mr.LINE_HEIGHT,La=mr.FONT_SIZE,Da=mr.FONT_FAMILY,Na=mr.FONT_STYLE,Pa=mr.FONT_WEIGHT,Fa=mr.COLOR,Ba=mr.VISIBILITY,Ya=mr.LETTER_SPACING,Ha=mr.OVERFLOW,Ga=mr.WHITE_SPACE,Wa=mr.TEXT_OVERFLOW,Ua=mr.WIDTH,Xa=mr.TEXT_STROKE_COLOR,Va=mr.TEXT_STROKE_WIDTH,T=v.NODE_KEY,Ka=T.NODE_CACHE,za=T.NODE_LIMIT_CACHE,ja=T.NODE_DOM_PARENT,$a=T.NODE_MATRIX_EVENT,Za=T.NODE_OPACITY,qa=T.NODE_VIRTUAL_DOM,re=v.UPDATE_KEY,Ja=re.UPDATE_NODE,Qa=re.UPDATE_MEASURE,ts=re.UPDATE_FOCUS,es=re.UPDATE_CONFIG,rs=pe.ELLIPSIS,is=w.AUTO,os=w.REM,ns=w.VW,as=w.VH,ss=w.VMAX,hs=w.VMIN,ls=function(){t(i,R);var r=e(i);function i(t){var e;return _(this,i),(e=r.call(this)).__content=fe.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return f(i,[{key:"__computeMeasure",value:function(t,e){var r=this.content,i=this.computedStyle,o=this.charWidthList;o.splice(0);for(var n=i[Da].split(","),a="arial",s=0,h=n.length;s<h;s++)if(Ne.checkSupportFontFamily(n[s])){a=n[s];break}this.__ff=a;for(var l=i[La],c=i[Pa],u=this.__key=i[La]+","+a+","+c,_=pe.data[u]=pe.data[u]||{ff:a,fs:l,fw:c,hash:{},s:""},f=pe.charWidth[u]=pe.charWidth[u]||{},d=0,p=!1,g=this.domParent;"inline"===g.currentStyle[Ca];)g=g.domParent;for(var m=(this.__bp=g).computedStyle,v=0,y=m[Da].split(","),x=y.length;v<x;v++)if(Ne.checkSupportFontFamily(y[v])){a=n[v];break}var E=m[La],l=m[Pa],c=this.__pKey=E+",arial,"+l,u=pe.charWidth[c]=pe.charWidth[c]||{};t===rt.CANVAS||t===rt.WEBGL?(t===rt.WEBGL&&(e=Ne.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__").ctx),u.hasOwnProperty(rs)||(e.font=Mo.setFontStyle(m),u[rs]=e.measureText(rs).width),e.font=Mo.setFontStyle(i)):t===rt.SVG&&(u.hasOwnProperty(rs)||(u[rs]=0,(pe.data[c]=pe.data[c]||{ff:"arial",fs:E,fw:l,hash:{},s:""}).s+=rs,p=!0));for(var b=0,M=r.length;b<M;b++){var T=r.charAt(b),A=void 0;f.hasOwnProperty(T)?(A=f[T],o.push(A),d+=A,this.__charWidth=Math.max(this.charWidth,A)):t===rt.CANVAS||t===rt.WEBGL?(A=f[T]=e.measureText(T).width,o.push(A),d+=A,this.__charWidth=Math.max(this.charWidth,A)):(_.hash.hasOwnProperty(T)||(_.s+=T),_.hash[T]=!0,o.push(-1),p=!0)}this.__textWidth=d,p&&pe.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,i=this.__key,o=pe.charWidth[i],n=0,a=0,s=r.length;a<s;a++)r[a]<0&&(n+=t=r[a]=o[e.charAt(a)],this.__charWidth=Math.max(this.charWidth,t));this.__textWidth=n}},{key:"__layout",value:function(t){var e=this.__config[Ka];e&&e.release();var r=t.x,i=t.y,o=t.w,n=t.lx,a=void 0===n?r:n,s=t.lineBoxManager,e=t.endSpace,h=void 0===e?0:e,n=t.lineClamp,l=void 0===n?0:n,e=t.lineClampCount,c=void 0===e?0:e;this.__x=this.__sx1=r,this.__y=this.__sy1=i;var n=this.isDestroyed,u=this.content,e=this.currentStyle,_=this.computedStyle,f=this.textBoxes,d=this.charWidthList,p=this.root,g=this.__ff,m=this.__key;if(f.splice(0),this.__config[za]=!1,n||"none"===e[Ca]||!u)return c;var v,y,x,E,b=this.__ox=this.__oy=0,M=0,T=r-a,A=T,O=u.length,R=0,w=_[ka],S=_[Ya],n=_[Ga],I=_[La],C=_[Pa],k=Mt.info[g].padding,L=!!k,D=pe.charWidth[this.__pKey][rs],N=0;if("nowrap"===n){var P,F,e=this.__bp.currentStyle,B=e[Ca],n=e[Ha],Y=e[Ua],e=e[Wa];if("hidden"===n)for(;M<O;){if(o<(A+=d[M]+S)){("block"===B||"flex"===B||Y[1]!==is)&&(P=!0);break}M++}else for(;M<O;)A+=d[M++]+S;P&&"ellipsis"===e?(i=(F=Qt(this.__lineBack(A,o,T,h,D,S,b,M,O,N,w,a,r,i,R,f,u,d,s),2))[0],R=F[1]):(F=new Lo(this,f.length,r,i,A-T,w,u,d),f.push(F),s.addItem(F),R=A-T,i+=w)}else{for(;M<O;){var H,G,W,U=d[M]+S;if(A+=U,L&&((H=u[M])===v&&k.hasOwnProperty(H)&&k[H]&&(W=void 0,G=pe.padding[m]=pe.padding[m]||{},pe.padding.hasOwnProperty(m)&&G.hasOwnProperty(H)&&(W=!0,A-=G[H]),W||(W=0,p.renderMode===rt.CANVAS?(p.ctx.font=Mo.setFontStyle(_),W=2*p.ctx.measureText(H).width-p.ctx.measureText(H+H).width,W*=k[H]):p.renderMode===rt.SVG&&(W=Ne.measureTextSync(m,g,I,C,H),W*=k[H]),A-=W,G[H]=W)),v=H),0!==U)if(A===o){if(l&&l-1<=N+c){var X=Qt(this.__lineBack(A,o,T,h,D,S,b,M,O,N,w,a,r,i,R,f,u,d,s),2);i=X[0],R=X[1],N++;break}X=void 0;M===O-1&&o-h<A&&M&&(A-=d[M--]),M++,N?(X=new Lo(this,f.length,a,i,A,w,u.slice(b,M),d.slice(b,M)),R=Math.max(R,A)):X=new Lo(this,f.length,r,i,R=A-T,w,u.slice(b,M),d.slice(b,M)),f.push(X),s.addItem(X,!0),i+=Math.max(w,s.lineHeight),b=M,A=0,N++,v=null}else if(o+1e-10<A){if(l&&l-1<=N+c){var V=Qt(this.__lineBack(A,o,T,h,D,S,b,M,O,N,w,a,r,i,R,f,u,d,s),2);i=V[0],R=V[1],N++;break}X=void 0,X=M<=b?A:A-d[M--];M++;V=void 0;N?(V=new Lo(this,f.length,a,i,X,w,u.slice(b,M),d.slice(b,M)),R=Math.max(R,X)):V=new Lo(this,f.length,r,i,R=X-T,w,u.slice(b,M),d.slice(b,M)),f.push(V),s.addItem(V,!0),i+=Math.max(w,s.lineHeight),b=M,A=0,N++,v=null}else M++;else M++}N&&(this.__x=this.__sx1=a),b<O&&(!l||N+c<l)&&(N?(o-h<A&&b<O-1&&(y=!0,A-=d[O-1]),E=new Lo(this,f.length,a,i,A,w,u.slice(b,y?O-1:O),d.slice(b,y?O-1:O)),R=Math.max(R,A),f.push(E),s.addItem(E),i+=Math.max(w,s.lineHeight),y&&(y=d[O-1],E=new Lo(this,f.length,a,i,y,w,u.slice(O-1),d.slice(O-1)),R=Math.max(R,y),f.push(E),s.setNewLine(),s.addItem(E),i+=w,N++)):(b&&o-h<A&&(x=!0,A-=d[O-1]),E=new Lo(this,f.length,r,i,R=A-T,w,u.slice(b,x?O-1:O),d.slice(b,x?O-1:O)),f.push(E),s.addItem(E),i+=Math.max(w,s.lineHeight),x&&(x=d[O-1],E=new Lo(this,f.length,a,i,x,w,u.slice(O-1),d.slice(O-1)),R=Math.max(R,x),f.push(E),s.setNewLine(),s.addItem(E),i+=w,N++)))}return this.__width=R,this.__height=i-t.y,this.__baseLine=Mo.getBaseLine(_),N}},{key:"__lineBack",value:function(t,e,r,i,o,n,a,s,h,l,c,u,_,f,d,p,g,m,v){for(;a<=s;s--)if((t-=m[s]+n)+o+i<=e&&s){var y=new Lo(this,p.length,l?u:_,f,d=t-(l?0:r),c,g.slice(a,s),m.slice(a,s));p.push(y),v.addItem(y,!0),f+=Math.max(c,v.lineHeight),this.__ellipsis=!0;break}if(s<0){var x=v.lineBox;if(x.size){var E=x.list;t:for(var b=E.length-1;0<=b;b--){var M=E[b],T=M.content,A=M.wList,O=M.width;if(t-O+o<=e||!b)for(var R=A.length-1;0<=R;R--){if(!R&&!b||t+o<=e){M.__content=T,M.__width=O,M.parent.__ellipsis=!0;break t}var w=A[R];M.__endY-=w,O-=w,T=T.slice(0,R),t-=w,A.pop()}else t-=O;E.pop(),M.parent.textBoxes.pop()}}else{x=new Lo(this,p.length,l?u:_,f,d=t-(l?0:r),c,g.charAt(a),m.slice(a,a+1));p.push(x),v.addItem(x,!0),f+=Math.max(c,v.lineHeight),this.__ellipsis=!0}}return[f,d]}},{key:"__offsetX",value:function(e,t){P(N(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){P(N(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.charWidthList[0]}},{key:"__inlineSize",value:function(){var r,i;this.textBoxes.forEach(function(t,e){i=e?(r=Math.min(r,t.x),Math.max(i,t.x+t.width)):(r=t.x,t.x+t.width)}),this.__x=r,this.__sx=this.__sx1=r+this.ox,this.__width=i-r}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=this.isDestroyed,s=this.computedStyle,h=this.textBoxes,l=this.cacheStyle,c=this.__ellipsis,u=this.__bp,_=this.__config;if(e===rt.SVG&&(_[qa]=this.__virtualDom={type:"text",children:[]}),!a&&"none"!==s[Ca]&&"hidden"!==s[Ba]&&h.length){if(e===rt.CANVAS||e===rt.WEBGL){if(e===rt.WEBGL)if(i){var f=this.sx,d=this.sy,a=this.bbox,i=_[Ka];if(i?i.reset(a,f,d):i=xa.getInstance(a,f,d),!i||!i.enabled)return void(_[za]=!0);(_[Ka]=i).__available=!0,r=i.ctx,o+=i.dx,n+=i.dy,_[za]=!1}else{var p=this.root,g=Ne.getCacheCanvas(p.width,p.height,"__$$OVERSIZE$$__");r=g.ctx;var p=_[ja].__config,g=p[$a],p=p[Za];r.setTransform(g[0],g[1],g[4],g[5],g[12],g[13]),r.globalAlpha=p}var g=Mo.setFontStyle(s);r.font!==g&&(r.font=g);p=l[Fa];r.fillStyle!==p&&(r.fillStyle=p);var g=s[Va];r.lineWidth!==g&&(r.lineWidth=g);p=l[Xa];r.strokeStyle!==p&&(r.strokeStyle=p)}h.forEach(function(t){t.render(e,r,s,l,o,n)}),e===rt.SVG&&(this.virtualDom.children=h.map(function(t){return t.virtualDom})),c&&(p=(g=h[h.length-1]).endX,c=g.endY,h=u.computedStyle,e===rt.CANVAS||e===rt.WEBGL?(g=Mo.setFontStyle(h),r.font!==g&&(r.font=g),g=u.__cacheStyle[Fa],r.fillStyle!==g&&(r.fillStyle=g),r.fillText(rs,p,c)):e===rt.SVG&&(h=[["x",p],["y",c],["fill",u.__cacheStyle[Fa]],["font-family",h[Da]],["font-weight",h[Pa]],["font-style",h[Na]],["font-size",h[La]+"px"]],this.virtualDom.children.push({type:"item",tagName:"text",props:h,content:rs})))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(i.prototype),"__destroy",this).call(this),(t=this.__config[Ka])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,e){var o=this;i!==o.__content?(root.delRefreshTask(o.__task),root.addRefreshTask(o.__task={__before:function(){o.__content=i;var t={},e=o.domParent;t[Ja]=e,t[Qa]=!0,t[ts]=Ia.REFLOW,t[es]=e.__config;var r=e.root;r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(t){fe.isFunction(e)&&e(t)}})):fe.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"firstCharWidth",get:function(){return this.charWidthList[0]||0}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,o=this.root,n=this.currentStyle[Va],a=0,a=n[1]===os?Math.max(n[0]*o.computedStyle[La]*.5,a):n[1]===ns?Math.max(n[0]*o.width*.01*.5,a):n[1]===as?Math.max(n[0]*o.height*.01*.5,a):n[1]===ss?Math.max(n[0]*Math.max(o.width,o.height)*.01*.5,a):n[1]===hs?Math.max(n[0]*Math.min(o.width,o.height)*.01*.5,a):Math.max(.5*n[0],a);return[t-(a+=1),e-a,t+r+a,e+i+a]}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}();ls.prototype.__renderByMask=ls.prototype.render;var cs=zt.TYPE_VD,us=zt.TYPE_GM,_s=zt.TYPE_CP;function fs(t){if(Array.isArray(t))return t.map(fs);if(!t||-1===[cs,us,_s].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==cs&&t.$$type!==us)t&&t.$$type===_s?(r.push(t),i.lastText=null):fe.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===cs&&fs(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var ds,ps,gs,ms,vs,qt=v.NODE_KEY,ys=qt.NODE_DOM_PARENT,xs=qt.NODE_STYLE,Es=qt.NODE_CURRENT_STYLE,bs=qt.NODE_COMPUTED_STYLE,Ms=qt.NODE_MATRIX,Ts=qt.NODE_MATRIX_EVENT,As=zt.TYPE_VD,Os=zt.TYPE_GM,Rs=zt.TYPE_CP;function ws(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return ws(t,e,r,i)});if(fe.isObject(t)&&t.$$type){var o,n=t.tagName,a=t.props,s=t.children,h=t.klass,l=t.$$type,c=t.__inheritAnimate,u=t.__animateRecords;if(l===Rs&&t.__placeholder)return t.__placeholder;if(l===As){if("img"===n){if(o=new gs(n,a),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else o=new ps(n,a);if("p"===n)i=!0;else if("div"===n&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?Ss(o,ws(s,e,r,i)):[],o.__children=s}else if(l===Os)fe.isString(n)?o=new(ms.getRegister(n))(n,a):n&&(o=new n("$",a));else{if(l!==Rs)return new ls(t);(o=new h(a)).__tagName=n||o.__tagName}(t.vd=o).__json=t,u&&((o.__animateRecords=u).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),c&&(fe.extendAnimate(c,o),delete t.__inheritAnimate),o.__root=e,o.__host=r,l===Rs&&o.__init();a=a.ref;return fe.isString(a)&&a||fe.isNumber(a)?r.ref[a]=o:fe.isFunction(a)&&a(o),o}return new ls(t)}function Ss(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){Ss(e,t,i)}):(r instanceof ds||r instanceof vs||r instanceof ls)&&(r.__parent=e,r.__domParent=e,r instanceof ls&&[xs,Es,bs,Ms,Ts].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[ys]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof vs&&((t=r.shadowRoot)instanceof ls&&(t.__parent=e,[xs,Es,bs,Ms,Ts].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[ys]=e))),r}var Is={ref:function(t){ds=t.Xom,ps=t.Dom,gs=t.Img,ms=t.Geom,vs=t.Component},initRoot:function(t,e){return t=fs({tagName:e.tagName,props:{},children:t,$$type:As}),e.__json=t,Ss(e.__host=e,ws(t.children,e,e))},initDom:function(t,e,r,i){return Ss(i,ws(t,e,r))},initCp:function(t,e,r){return fe.isObject(t)?ws(t,e,r):new ls(t)},initCp2:function(t,e,r,i){var o=new t.klass(t.props);return o.__tagName=t.tagName||o.__tagName,o.__root=e,o.__host=r,o.__json=t,o.__init(),Ss(i,o)},relation:Ss},Cs=fe.isFunction,ks=function(){function a(){_(this,a),this.__eHash={}}return f(a,[{key:"on",value:function(t,e){if(Cs(e)){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else{this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var o=0,n=this.__eHash[t],a=n.length;o<a;o++)if(n[o]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,o){if(Cs(o)){var n=this;if(a.__karasEventCb=o,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)n.once(i[t],o);else o&&n.on(i,a);return this}function a(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];o.apply(n,e),n.off(i,a)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var o=0,n=this.__eHash[t],a=n.length;o<a;o++)if(n[o]===e||n[o].__karasEventCb===e){n.splice(o,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var o=0,n=t.length;o<n;o++)this.emit(t[o],r);else if(this.__eHash.hasOwnProperty(t)){var a=this.__eHash[t];if(a.length)for(var s=0,h=(a=a.slice()).length;s<h;s++){var l=a[s];Cs(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new a;e.__eHash={};for(var i=["on","once","off","emit"],o=i.length-1;0<=o;o--){var n=i[o];e[n]=r[n]}}}}]),a}();n(ks,"REFRESH","refresh"),n(ks,"PAUSE","pause"),n(ks,"PLAY","play"),n(ks,"FRAME","frame"),n(ks,"FINISH","finish"),n(ks,"CANCEL","cancel"),n(ks,"BEGIN","begin"),n(ks,"END","end");var Ls=fe.isNil,Ds=fe.isFunction,Ns=fe.clone,Ps=fe.extend,Fs={};var Bs=function(){t(n,ks);var r=e(n);function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _(this,n),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=fe.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return f(n,[{key:"setState",value:function(t,e){var r=this,i=this;if(Ls(t))t={};else{if(Ds(t))return;if(0===Object.keys(t).length)return void(Ds(e)&&e.call(i));var o=Ns(i.state);t=Ps(o,t)}var n,a=i.root;a&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],n=[],o=i.__task={__before:function(){n=i.__taskList.splice(0),function t(e){e.__hasUpdate||(e.__hasUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){n.forEach(function(t){Ds(t)&&t.call(i)})}},a.addRefreshCp(o)):Ds(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this;this.__ref={};var e=this.root,i=t||fs(this.render()),o=Is.initCp(i,e,this);if(this.__cd=i,!(o instanceof ls))if(o instanceof R){t=Mo.normalize(this.props.style),i=Object.keys(t);Ps(o.style,t,i),Ps(o.currentStyle,t,i),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),o.listener[t]=e)})}else if(!(o instanceof n))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=o).__host=this;o instanceof n;)o.__hostRoot=this,o=(o.shadow.__host=o).shadow;((this.__shadowRoot=o).__hostRoot=this).__isMounted||(this.__isMounted=!0,Ds(this.componentDidMount)&&e.once(ks.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){Ne.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,Ds(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof ls))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return Fs}},{key:"getRegister",value:function(t){if(!t||!fe.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!Fs.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return Fs[t]}},{key:"register",value:function(t,e){if(!(t&&fe.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof n))throw new Error("Invalid param: Component register");if(n.hasRegister(t))throw new Error("Component has already register: ".concat(t));Fs[t]=e}},{key:"hasRegister",value:function(t){return t&&Fs.hasOwnProperty(t)}},{key:"delRegister",value:function(t){n.hasRegister(t)&&delete Fs[t]}}]),n}();Object.keys(Cr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(Bs.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){Bs.prototype[e]=function(){var t=this.shadowRoot;if(t&&Ds(t[e]))return t[e].apply(t,arguments)}});var Y=v.STYLE_KEY,Ys=Y.SCALE_X,Hs=Y.SCALE_Y,Gs=w.PERCENT,Ws=w.NUMBER;var Us={matrixResize:function(t,e,r,i,o,n,a,s){if(t!==r||e!==i){i=[[Ys,[r/t,Ws]],[Hs,[i/e,Ws]]],e=fa.calOrigin([[0,Gs],[0,Gs]],a,s);return e[0]+=o,e[1]+=n,fa.calMatrixWithOrigin(i,e,a,s)}}},ee=v.STYLE_KEY,Xs=ee.BACKGROUND_POSITION_X,Vs=ee.BACKGROUND_POSITION_Y,Ks=ee.FONT_SIZE,zs=v.NODE_KEY.NODE_DEFS_CACHE,js=fe.clone,$s=fe.joinArr,Zs=Tt.canvasPolygon,qs=Tt.svgPolygon,Js=w.AUTO,Qs=w.PX,th=w.PERCENT,eh=w.STRING,rh=w.REM,ih=w.VW,oh=w.VH,nh=w.VMAX,ah=w.VMIN;function sh(t,e,r,i,o,n,a,s,h,l,c,u,_){var f,d,p,g,m=13<arguments.length&&void 0!==arguments[13]?arguments[13]:"fill",v=14<arguments.length&&void 0!==arguments[14]&&arguments[14],y=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,x=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(d=i[1],f=i[2],g=i[3],i=i[0]),o=(o=o||Kt.calRadius(n,a,s,h,l,c,u,_))||[[n,a],[n+s,a],[n+s,a+h],[n,a+h],[n,a]],d&&(d=fa.calMatrixByOrigin(d,[f,g]),p=te.inverse(d),o=o.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var o=te.calPoint([t[r],t[r+1]],p);e.push(o[0]),e.push(o[1])}return e})),e===rt.CANVAS||e===rt.WEBGL)d&&(r.save(),g=t.matrixEvent,d=te.multiply(g,d),r.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),Zs(r,o,y,x),r[m](),r.closePath(),d&&r.restore();else if(e===rt.SVG){o=qs(o);if(v){v={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",o],["fill",i]]}]};return t.__config[zs].push(v),r.add(v)}t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",o],["fill",i]]}),d&&(t=t.virtualDom.bb)[t.length-1].props.push(["transform","matrix(".concat($s(te.m2m6(d),","),")")])}}function hh(t,e,r,i){if(Array.isArray(t)){if(t[1]===Qs)return t[0];if(t[1]===th)return(e-r)*t[0]*.01;if(t[1]===rh)return t[0]*i.computedStyle[Ks];if(t[1]===ih)return t[0]*i.width*.01;if(t[1]===oh)return t[0]*i.height*.01;if(t[1]===nh)return t[0]*Math.max(i.width,i.height)*.01;if(t[1]===ah)return t[0]*Math.min(i.width,i.height)*.01}return 0}var lh,ch={renderBgc:sh,renderImage:function(i,t,e,r,o,n,a,s,h,l,c,u,_,f,d,p,g,m){var v=18<arguments.length&&void 0!==arguments[18]?arguments[18]:0,y=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0,x=r.source;if(x){var E=(a+=v)-(o+=v),b=(s+=y)-(n+=y),M=r.width,T=r.height,d=Qt(d[f]||[],2),A=d[0],O=d[1];-1===A&&-1===O?(A=M,O=T):-2===A?E<M&&b<T?(O=T/b)<=(A=M/E)?O=(A=E)*T/M:A=(O=b)*M/T:E<M?O=(A=E)*T/M:b<T?A=(O=b)*M/T:(A=M,O=T):-3===A?M<E&&T<b?(A=M/E)<=(O=T/b)?O=(A=E)*T/M:A=(O=b)*M/T:M<E||!(T<b)&&(A=M/E)<=(O=T/b)?O=(A=E)*T/M:A=(O=b)*M/T:-1===A?A=O*M/T:-1===O&&(O=A*T/M);var R=o+hh(_[Xs][f],E,A,i.root),w=n+hh(_[Vs][f],b,O,i.root),S=R<o||w<n||o+E<R+A||n+b<w+O,I=0,C=0,k=0,L=0;-1<["repeat-x","repeatX","repeat"].indexOf(p[f])&&(0<(_=R-o)&&(I=Math.ceil(_/A)),0<(_=o+E-R-A)&&(C=Math.ceil(_/A))),-1<["repeat-y","repeatY","repeat"].indexOf(p[f])&&(0<(f=w-n)&&(k=Math.ceil(f/O)),0<(f=n+b-w-O)&&(L=Math.ceil(f/O)));var D=[];if(0<I)for(var N=0;N<I;N++){var P=R-(N+1)*A;D.push([P,w]),!S&&0===N&&P<o&&(S=!0)}if(0<C)for(var F=0;F<C;F++){var B=R+(F+1)*A;D.push([B,w]),!S&&F===C-1&&o+E<B+A&&(S=!0)}if(0<k)for(var Y=0;Y<k;Y++){var H=w-(Y+1)*O;D.push([R,H]),!S&&0===Y&&H<n&&(S=!0)}if(0<L)for(var G=0;G<L;G++){var W=w+(G+1)*O;D.push([R,W]),!S&&G===L-1&&n+b<W+A&&(S=!0)}if(0<I&&0<k)for(var U=0;U<I;U++)for(var X=0;X<k;X++)D.push([R-(U+1)*A,w-(X+1)*O]);if(0<C&&0<k)for(var V=0;V<C;V++)for(var K=0;K<k;K++)D.push([R+(V+1)*A,w-(K+1)*O]);if(0<I&&0<L)for(var z=0;z<I;z++)for(var j=0;j<L;j++)D.push([R-(z+1)*A,w+(j+1)*O]);if(0<C&&0<L)for(var $=0;$<C;$++)for(var Z=0;Z<L;Z++)D.push([R+($+1)*A,w+(Z+1)*O]);if(t===rt.CANVAS||t===rt.WEBGL)S&&(e.save(),sh(this,t,e,"#FFF",null,o,n,E,b,h,l,c,u,"clip")),e.drawImage(x,R,w,A,O),D.forEach(function(t){e.drawImage(x,t[0],t[1],A,O)}),S&&e.restore();else if(t===rt.SVG){var q,t=Us.matrixResize(M,T,A,O,R,w,E,b),J=[["xlink:href",r.url],["x",R],["y",w],["width",M],["height",T]];if(t&&!te.isE(t)&&(q=!0,J.push(["transform","matrix("+$s(te.m2m6(t),",")+")"])),S&&(r=[o,n],s=[a,s],q&&(t=te.inverse(t),r=te.calPoint(r,t),s=te.calPoint(s,t)),s={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(r[0],",").concat(r[1],"L").concat(s[0],",").concat(r[1],"L").concat(s[0],",").concat(s[1],"L").concat(r[0],",").concat(s[1],"L").concat(r[0],",").concat(r[1])],["fill","#FFF"]]}]},r=e.add(s),g[zs].push(s),J.push(["clip-path","url(#"+r+")"])),m){var Q={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:J}]};return i.__config[zs].push(Q),D.forEach(function(t){var e,r=js(J);!q||(e=Us.matrixResize(M,T,A,O,t[0],t[1],E,b))&&!te.isE(e)&&(r[5][1]="matrix("+$s(te.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],Q.children.push({type:"img",tagName:"image",props:r})}),e.add(Q)}i.virtualDom.bb.push({type:"img",tagName:"image",props:J}),D.forEach(function(t){var e,r=js(J);!q||(e=Us.matrixResize(M,T,A,O,t[0],t[1],E,b))&&!te.isE(e)&&(r[5][1]="matrix("+$s(te.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],i.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}},calBackgroundSize:function(t,r,i,o){var n=[];return t.forEach(function(t,e){t[1]===Qs?n.push(t[0]):t[1]===th?n.push(t[0]*(e?i:r)*.01):t[1]===rh?n.push(t[0]*o.computedStyle[Ks]):t[1]===ih?n.push(t[0]*o.width*.01):t[1]===oh?n.push(t[0]*o.height*.01):t[1]===nh?n.push(t[0]*Math.max(o.width,o.height)*.01):t[1]===ah?n.push(t[0]*Math.min(o.width,o.height)*.01):t[1]===Js?n.push(-1):t[1]===eh&&n.push("contain"===t[0]?-2:-3)}),n}},uh=fe.isFunction;function _h(t,e,r,i){if(i)for(var o=0;o<e;o++){var n=t[o];n[1]?n[1](r):n.__after&&n.__after(r)}else for(var a=0;a<e;a++){var s=t[a];s[0]?s[0](r):s.__before&&s.__before(r)}}var fh=new(function(){function t(){_(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return f(t,[{key:"__init",value:function(){var c=this,u=c.task,_=c.taskCp;Ne.cancelAnimationFrame(c.id);var f=c.__now=Ne.now();!function l(){Ne.cancelAnimationFrame(c.id),c.id=Ne.requestAnimationFrame(function(){if(!lh&&(u.length||_.length)){var t=(o=c.__now=Ne.now())-f,t=Math.max(t,0);f=o;var e=u.slice(0),r=_.splice(0),i=e.length,o=r.length;_h(e,i,t,!1),_h(r,o,t,!1);for(var n=c.__hookTask.splice(0),a=0,s=n.length;a<s;a++){var h=n[a];h&&h()}_h(e,i,t,!0),_h(r,o,t,!0),(u.length||_.length)&&l()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),uh(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var o=e[r];if(o===t||o.__karasFramecb===t){e.splice(r,1);break}}e.length||(Ne.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=uh(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){lh=!0}},{key:"resume",value:function(){lh&&(this.__init(),lh=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),dh=4,ph=1e-7,gh=10,mh="function"==typeof Float32Array;function vh(t,e){return 1-3*e+3*t}function yh(t,e,r){return((vh(e,r)*t+(3*r-6*e))*t+3*e)*t}function xh(t,e,r){return 3*vh(e,r)*t*t+2*(3*r-6*e)*t+3*e}function Eh(t){return t}function bh(n,e,a,r){if(!(0<=n&&n<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(n===e&&a===r)return Eh;for(var s=new(mh?Float32Array:Array)(11),t=0;t<11;++t)s[t]=yh(.1*t,n,a);function i(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var i=e+.1*((t-s[--r])/(s[r+1]-s[r])),o=xh(i,n,a);return.001<=o?function(t,e,r,i){for(var o=0;o<dh;++o){var n=xh(e,r,i);if(0===n)return e;e-=(yh(e,r,i)-t)/n}return e}(t,i,n,a):0===o?i:function(t,e,r,i,o){for(var n,a,s=0;0<(n=yh(a=e+(r-e)/2,i,o)-t)?r=a:e=a,Math.abs(n)>ph&&++s<gh;);return a}(t,e,e+.1,n,a)}return function(t){return 0===t||1===t?t:yh(i(t),e,r)}}var Mh={linear:bh(1,1,0,0),easeIn:bh(.42,0,1,1),easeOut:bh(0,0,.58,1),ease:bh(.25,.1,.25,1),easeInOut:bh(.42,0,.58,1),cubicBezier:bh,getEasing:function(t,e,r,i){return 4===arguments.length?bh(t,e,r,i):Array.isArray(t)&&4===t.length?bh(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?o=bh((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(o=this[t]),o):void 0;var o}};Mh["ease-in"]=Mh.easeIn,Mh["ease-out"]=Mh.easeOut,Mh["ease-in-out"]=Mh.easeInOut;var pt=v.STYLE_KEY,Th=pt.FILTER,Ah=pt.TRANSFORM_ORIGIN,Oh=pt.PERSPECTIVE_ORIGIN,Rh=pt.BACKGROUND_CLIP,wh=pt.BACKGROUND_POSITION_X,Sh=pt.BACKGROUND_POSITION_Y,Ih=pt.BOX_SHADOW,Ch=pt.TRANSLATE_X,kh=pt.TRANSLATE_Y,Lh=pt.TRANSLATE_Z,Dh=pt.BACKGROUND_SIZE,Nh=pt.FONT_SIZE,Ph=pt.FLEX_BASIS,Fh=pt.FLEX_DIRECTION,Bh=pt.WIDTH,Yh=pt.HEIGHT,Hh=pt.TOP,Gh=pt.BOTTOM,Wh=pt.LINE_HEIGHT,Uh=pt.OPACITY,Xh=pt.Z_INDEX,Vh=pt.TRANSFORM,Kh=pt.COLOR,zh=pt.FONT_WEIGHT,jh=pt.FONT_STYLE,$h=pt.FONT_FAMILY,Zh=pt.TEXT_ALIGN,qh=pt.MATRIX,Jh=pt.ROTATE_3D,Qh=pt.TRANSLATE_PATH,tl=pt.TEXT_STROKE_COLOR,el=pt.TEXT_STROKE_OVER,ur=v.UPDATE_KEY,rl=ur.UPDATE_NODE,il=ur.UPDATE_STYLE,ol=ur.UPDATE_KEYS,nl=ur.UPDATE_CONFIG,mr=v.KEY_FRAME_KEY,al=mr.FRAME_STYLE,sl=mr.FRAME_TIME,hl=mr.FRAME_EASING,ll=mr.FRAME_TRANSITION,T=v.ANIMATE_KEY,cl=T.I_ASSIGNING,ul=T.I_IN_FPS,_l=T.I_IS_DELAY,fl=T.I_BEGIN,dl=T.I_END,pl=T.I_FINISHED,gl=T.I_NEXT_END,ml=T.I_FIRST_PLAY,vl=T.I_PLAY_CB,yl=T.I_TARGET,xl=T.I_ROOT,El=T.I_FRAMES,bl=T.I_FRAMES_R,Ml=T.I_CURRENT_TIME,Tl=T.I_NEXT_TIME,Al=T.I_STYLE,Ol=T.I_DURATION,Rl=T.I_ITERATIONS,wl=T.I_FILL,Sl=T.I_PLAYBACK_RATE,Il=T.I_PLAY_COUNT,Cl=T.I_PLAY_STATE,kl=T.I_DESTROYED,Ll=T.I_START_TIME,Dl=T.I_FPS_TIME,Nl=T.I_EASING,Pl=T.I_ENTER_FRAME,Fl=T.I_DELAY,Bl=T.I_END_DELAY,Yl=T.I_KEYS,Hl=T.I_ORIGIN_STYLE,Gl=T.I_CURRENT_FRAMES,Wl=T.I_CURRENT_FRAME,Ul=T.I_SPF_LIMIT,Xl=T.I_FPS,Vl=T.I_DIRECTION,Kl=T.I_FIRST_ENTER,zl=T.I_STAY_BEGIN,jl=T.I_STAY_END,$l=T.I_IS2,Zl=T.I_END_TIME,ql=T.I_NODE_CONFIG,Jl=T.I_ROOT_CONFIG,Ql=T.I_OUT_BEGIN_DELAY,tc=T.I_TIME_STAMP,ec=w.AUTO,rc=w.PX,ic=w.PERCENT,oc=w.INHERIT,nc=w.RGBA,ac=w.STRING,sc=w.NUMBER,hc=w.REM,lc=w.VW,cc=w.VH,uc=w.VMAX,_c=w.VMIN,fc=w.calUnit,dc=fe.isNil,pc=fe.isFunction,gc=fe.isNumber,mc=fe.isObject,vc=fe.isString,yc=fe.clone,xc=fe.equalArr,Ec=Mh.linear,bc=Mo.cloneStyle,Mc=Cr.isGeom,Tc=Cr.GEOM,Ac=Jt.COLOR_HASH,Oc=Jt.LENGTH_HASH,Rc=Jt.RADIUS_HASH,wc=Jt.GRADIENT_HASH,Sc=Jt.EXPAND_HASH,Ic=Jt.GRADIENT_TYPE,Cc={};function kc(t,e,r,i,o){var n={};n[rl]=o,n[il]=t,n[ol]=e,n[nl]=r[ql],i.__addUpdate(o,r[ql],i,r[Jl],n),r[Al]=t,r[cl]=!0,i.__frameHook()}function Lc(t,e,r,i){return t[1]===rc?e[1]===ic?.01*e[0]*r-t[0]:e[1]===hc?e[0]*i.computedStyle[Nh]-t[0]:e[1]===lc?e[0]*i.width*.01-t[0]:e[1]===cc?e[0]*i.height*.01-t[0]:e[1]===uc?e[0]*Math.max(i.width,i.height)*.01-t[0]:e[1]===_c?e[0]*Math.min(i.width,i.height)*.01-t[0]:void 0:t[1]===ic?e[1]===rc?100*e[0]/r-t[0]:e[1]===hc?e[0]*i.computedStyle[Nh]*100/r-t[0]:e[1]===lc?e[0]*i.width/r-t[0]:e[1]===cc?e[0]*i.height/r-t[0]:e[1]===uc?e[0]*Math.max(i.width,i.height)/r-t[0]:e[1]===_c?e[0]*Math.min(i.width,i.height)/r-t[0]:void 0:t[1]===hc?e[1]===rc?e[0]/i.computedStyle[Nh]-t[0]:e[1]===ic?.01*e[0]*r/i.computedStyle[Nh]-t[0]:e[1]===lc?e[0]*i.width*.01/i.computedStyle[Nh]-t[0]:e[1]===cc?e[0]*i.height*.01/i.computedStyle[Nh]-t[0]:e[1]===uc?e[0]*Math.max(i.width,i.height)*.01/i.computedStyle[Nh]-t[0]:e[1]===_c?e[0]*Math.min(i.width,i.height)*.01/i.computedStyle[Nh]-t[0]:void 0:t[1]===lc?e[1]===rc?100*e[0]/i.width-t[0]:e[1]===hc?100*e[0]*i.computedStyle[Nh]/i.width-t[0]:e[1]===ic?e[0]*r/i.width-t[0]:e[1]===cc?e[0]*i.height/i.width-t[0]:e[1]===uc?e[0]*Math.max(i.width,i.height)/i.width-t[0]:e[1]===_c?e[0]*Math.min(i.width,i.height)/i.width-t[0]:void 0:t[1]===cc?e[1]===rc?100*e[0]/i.height-t[0]:e[1]===hc?100*e[0]*i.computedStyle[Nh]/i.height-t[0]:e[1]===lc?e[0]*i.width/i.height-t[0]:e[1]===ic?e[0]*r/i.height-t[0]:e[1]===uc?e[0]*Math.max(i.width,i.height)/i.height-t[0]:e[1]===_c?e[0]*Math.min(i.width,i.height)/i.height-t[0]:void 0:t[1]===uc?e[1]===rc?100*e[0]/Math.max(i.width,i.height)-t[0]:e[1]===hc?100*e[0]*i.computedStyle[Nh]/Math.max(i.width,i.height)-t[0]:e[1]===ic?e[0]*r/Math.max(i.width,i.height)-t[0]:e[1]===lc?e[0]*i.width/Math.max(i.width,i.height)-t[0]:e[1]===cc?e[0]*i.height/Math.max(i.width,i.height)-t[0]:e[1]===_c?e[0]*Math.min(i.width,i.height)/Math.max(i.width,i.height)-t[0]:void 0:t[1]===_c?e[1]===rc?100*e[0]/Math.min(i.width,i.height)-t[0]:e[1]===hc?100*e[0]*i.computedStyle[Nh]/Math.min(i.width,i.height)-t[0]:e[1]===ic?e[0]*r/Math.min(i.width,i.height)-t[0]:e[1]===lc?e[0]*i.width/Math.min(i.width,i.height)-t[0]:e[1]===cc?e[0]*i.height/Math.min(i.width,i.height)-t[0]:e[1]===uc?e[0]*Math.max(i.width,i.height)/Math.min(i.width,i.height)-t[0]:void 0:void 0}function Dc(e,r,t,i,o){return t.forEach(function(t){t=function(t,e,r,n,i){var o=[r],a=t[r],s=e[r];if(r===Vh){if(!a&&!s)return;var h=a?a[0][1]:te.identity(),e=s?s[0][1]:te.identity();return xc(h,e)?void 0:(o[1]=[e[0]-h[0],e[1]-h[1],e[2]-h[2],e[3]-h[3],e[4]-h[4],e[5]-h[5],e[6]-h[6],e[7]-h[7],e[8]-h[8],e[9]-h[9],e[10]-h[10],e[11]-h[11],e[12]-h[12],e[13]-h[13],e[14]-h[14],e[15]-h[15]],o)}if(r===Jh){if(xc(a,s))return;o[1]=[s[0]-s[0],s[1]-a[1],s[2]-a[2],[s[3][0]-a[3][0],s[3][1]]]}else if(r===Th){var l={},c={},u={};a&&a.forEach(function(t){u[t[0]]=!0,l[t[0]]=t[1]}),s&&s.forEach(function(t){u[t[0]]=!0,c[t[0]]=t[1]});var _,f={};if(Object.keys(u).forEach(function(t){var e,r,i,o;"blur"===t?_=(l[t]?c[t]?(r=Lc(l[t],c[t],0,n.root),f[t]=[r,l[t][1]]):f[t]=[-l[t][0],l[t][1]]:f[t]=c[t].slice(0),!0):"hue-rotate"===t?(e=dc(c[t])?0:c[t][0],(r=dc(l[t])?0:l[t][0])!==e&&(f[t]=[e-r,ic],_=!0)):"saturate"===t||"brightness"===t||"contrast"===t?(i=dc(c[t])?100:c[t][0],(o=dc(l[t])?100:l[t][0])!==i&&(f[t]=[i-o,ic],_=!0)):"grayscale"===t&&(i=dc(c[t])?0:c[t][0],(o=dc(l[t])?0:l[t][0])!==i&&(f[t]=[i-o,ic],_=!0))}),!_)return;o[1]=f}else if(r===Ah||r===Oh){o[1]=[];for(var d=0;d<2;d++){var p=a[d],g=s[d];p[1]===g[1]?o[1].push(g[0]-p[0]):(g=Lc(p,g,n[d?"outerHeight":"outerWidth"],n.root),o[1].push(g||0))}if(xc(o[1],[0,0]))return}else if(r===wh||r===Sh){o[1]=[];for(var m=Math.min(a.length,s.length),v=0;v<m;v++){var y=a[v],x=s[v];if(y&&x)if(y[1]===x[1]){var E=x[0]-y[0];if(!E)return void o[1].push(null);o[1].push(E)}else{E=r===wh?"offsetWidth":"offsetHeight";-1<["padding-box","paddingBox"].indexOf(n.computedStyle[Rh])?E=r===wh?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(n.computedStyle[Rh])&&(E=r===wh?"width":"height");E=Lc(y,x,n[E],n.root);if(!E)return void o[1].push(null);o[1].push(E)}else o[1].push(null)}}else if(r===Ih){o[1]=[];for(var b=0,M=Math.min(a.length,s.length);b<M;b++){for(var T=a[b],A=s[b],O=[],R=0;R<4;R++)O.push(A[R]-T[R]);for(var w=[],S=0;S<4;S++)w.push(A[4][S]-T[4][S]);O.push(w),o[1].push(O)}}else if(Sc.hasOwnProperty(r))if(a[1]===s[1]){var I=s[0]-a[0];if(0==I)return;o[1]=I}else{var C=Lc(a,s,n[r===Ch||r===Lh?"outerWidth":"outerHeight"],n.root);if(!C)return;o[1]=C}else if(r===Dh){o[1]=[];for(var k,L=Math.min(a.length,s.length),D=0;D<L;D++){var N=a[D],P=s[D];if(N&&P){for(var F=[],B=0;B<2;B++){var Y,H=N[B],G=P[B];H[1]===G[1]?F.push(G[0]-H[0]):(Y=D?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(n.computedStyle[Rh])?Y=D?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(n.computedStyle[Rh])&&(Y=D?"width":"height"),Y=Lc(H,G,n[Y],n.root),F.push(Y||0))}xc(F,[0,0])?o[1].push(null):(o[1].push(F),k=!0)}else o[1].push(null)}if(!k)return}else if(wc.hasOwnProperty(r)){o[1]=[];for(var W=Math.min(a.length,s.length),U=0;U<W;U++){var X=a[U],V=s[U];if(X&&V&&!vc(X)&&!vc(V))if(X.k===V.k){var K=[];if("linear"===X.k||"radial"===X.k||"conic"===X.k){var z=X.v,j=V.v;K[0]=[];for(var $=n.clientWidth,Z=xc(z,j),q=0,J=Math.min(z.length,j.length);q<J;q++){var Q=z[q],tt=j[q],et=[];et.push([tt[0][0]-Q[0][0],tt[0][1]-Q[0][1],tt[0][2]-Q[0][2],tt[0][3]-Q[0][3]]),Q[1]&&tt[1]&&(Q[1][1]===tt[1][1]?et.push(tt[1][0]-Q[1][0]):(tt=Lc(Q[1],tt[1],$,n.root),et.push(tt||0))),K[0].push(et)}if("linear"===X.k){var rt=Array.isArray(X.d);if(Array.isArray(V.d)!==rt){o[1].push(null);continue}if(rt){rt=[V.d[0]-X.d[0],V.d[1]-X.d[1],V.d[2]-X.d[2],V.d[3]-X.d[3]];if(Z&&xc(rt,[0,0,0,0])){o[1].push(null);continue}K[1]=rt}else{var it=V.d-X.d;if(Z&&0==it){o[1].push(null);continue}K[1]=it}}else if("radial"===X.k){it=Array.isArray(X.z);if(Array.isArray(V.z)!==it){o[1].push(null);continue}if(it){K[2]=[];for(var ot=0;ot<5;ot++){var nt=X.z[ot];void 0===nt&&(nt=1);var at=V.z[ot];void 0===at&&(at=1),K[2].push(at-nt)}Z&&xc(o[4],[0,0,0,0,0])&&o[1].push(null)}else{K[2]=[];for(var st=0;st<2;st++){var ht=X.p[st],lt=V.p[st];ht[1]===lt[1]?K[2].push(lt[0]-ht[0]):(lt=Lc(ht,lt,n[st?"clientWidth":"clientHeight"],n.root),K[2].push(lt||0))}Z&&xc(o[3],[0,0])&&o[1].push(null)}}else if("conic"===X.k){K[1].push(s.d-a.d),K[2]=[];for(var ct=0;ct<2;ct++){var ut=a.p[ct],_t=s.p[ct];ut[1]===_t[1]?K[2].push(_t[0]-ut[0]):(_t=Lc(ut,_t,n[ct?"clientWidth":"clientHeight"],n.root),K[2].push(_t||0))}Z&&0!==o[2]&&xc(o[3],[0,0])&&o[1].push(null)}}else xc(s,X)&&o[1].push(null),K[0]=[V[0]-X[0],V[1]-X[1],V[2]-X[2],V[3]-X[3]];o[1].push(K)}else o[1].push(null);else o[1].push(null)}}else if(Ac.hasOwnProperty(r)){if(s=s[0],a=a[0],xc(s,a)||0===s[3]&&0===a[3])return;o[1]=[s[0]-a[0],s[1]-a[1],s[2]-a[2],s[3]-a[3]]}else if(Rc.hasOwnProperty(r)){if(s[0][0]===a[0][0]&&s[0][1]===a[0][1]&&s[1][0]===a[1][0]&&s[1][1]===a[1][1])return;o[1]=[];for(var ft,dt=0;dt<2;dt++)s[dt][1]===a[dt][1]?o[1].push(s[dt][0]-a[dt][0]):(ft=Lc(a[dt],s[dt],n[dt?"outerHeight":"outerWidth"],n.root),o[1].push(ft||0))}else if(Oc.hasOwnProperty(r)){if(a[1]===ec||s[1]===ec)return;h=n.computedStyle,I=(n.domParent||n).computedStyle,C=0;if(a[1]===s[1]?C=s[0]-a[0]:r===Wh?C=Lc(a,s,h[Nh],n.root):r===Nh?C=Lc(a,s,I[Nh],n.root):r===Ph&&-1<["column","column-reverse","columnReverse"].indexOf(h[Fh])||-1<[Yh,Hh,Gh].indexOf(r)?a[1]!==ec&&s[1]!==ec&&(C=Lc(a,s,I[Yh],n.root)):a[1]!==ec&&s[1]!==ec&&(C=Lc(a,s,I[Bh],n.root)),0===C||isNaN(C))return;o[1]=C}else if(Tc.hasOwnProperty(r)){if(dc(a))return;if(Tc[r][i]&&pc(Tc[r][i].calDiff)){var pt=Tc[r][i].calDiff;if(n.isMulti){for(var gt=[],mt=0,vt=Math.min(a.length,s.length);mt<vt;mt++)gt.push(pt(a[mt],s[mt]));return gt}o[1]=pt(a,s)}else if(n.isMulti)if("points"===r||"controls"===r){if(dc(s)||!s.length||dc(a)||!a.length||xc(a,s))return;o[1]=[];for(var yt=0,xt=Math.min(a.length,s.length);yt<xt;yt++){var Et=a[yt],bt=s[yt];if(dc(Et)||!Et.length||dc(bt)||!bt.length)o[1].push(null);else{for(var Mt=[],Tt=0,At=Math.min(Et.length,bt.length);Tt<At;Tt++){var Ot=Et[Tt],Rt=bt[Tt];if(dc(Ot)||dc(Rt))Mt.push(null);else{for(var wt=[],St=0,It=Math.max(Ot.length,Rt.length);St<It;St++){var Ct=Ot[St],kt=Rt[St];dc(Ct)||dc(kt)?wt.push(0):wt.push(kt-Ct)}Mt.push(wt)}}o[1].push(Mt)}}}else if("controlA"===r||"controlB"===r){if(dc(s)||!s.length||dc(a)||!a.length||xc(a,s))return;o[1]=[];for(var Lt=0,Dt=Math.min(a.length,s.length);Lt<Dt;Lt++){var Nt=a[Lt],Pt=s[Lt];dc(Nt)||!Nt.length||dc(Pt)||!Pt.length?o[1].push(null):o[1].push([Pt[0]-Nt[0],Pt[1]-Nt[1]])}}else{if(s===a||xc(s,a)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var Ft=[],Bt=0,Yt=Math.min(a.length,s.length);Bt<Yt;Bt++){var Ht=a[Bt],Gt=s[Bt];(dc(Ht)||dc(Gt))&&Ft.push(0),Ft.push(Gt-Ht)}o[1]=Ft}else if("points"===r||"controls"===r){if(dc(s)||!s.length||dc(a)||!a.length||xc(a,s))return;o[1]=[];for(var Wt=0,Ut=Math.min(a.length,s.length);Wt<Ut;Wt++){var Xt=a[Wt],Vt=s[Wt];if(dc(Xt)||!Xt.length||dc(Vt)||!Vt.length)o[1].push(null);else{for(var Kt=[],zt=0,jt=Math.max(Xt.length,Vt.length);zt<jt;zt++){var $t=Xt[zt],Zt=Vt[zt];dc($t)||dc(Zt)?Kt.push(0):Kt.push(Zt-$t)}o[1].push(Kt)}}}else if("controlA"===r||"controlB"===r){if(dc(s)||!s.length||dc(a)||!a.length||xc(a,s))return;o[1]=[s[0]-a[0],s[1]-a[1]]}else{if(s===a||"edge"===r||"closure"===r||"booleanOperations"===r)return;o[1]=s-a}}else if(r===Uh||r===Xh){if(s===a)return;o[1]=s-a}else{if(r!==Qh||!a)return;var qt="offsetWidth",Jt="offsetHeight";-1<["padding-box","paddingBox"].indexOf(n.computedStyle[Rh])?(qt="clientWidth",Jt="clientHeight"):-1<["content-box","contentBox"].indexOf(n.computedStyle[Rh])&&(qt="width",Jt="height"),o[1]=a.map(function(t,e){var r=Qt(t,2),t=r[0],r=r[1];return r===ic?e%2==0?[.01*(parseFloat(t)||0)*n[qt],rc]:[.01*(parseFloat(t)||0)*n[Jt],rc]:r===hc?[(parseFloat(t)||0)*root.computedStyle[Nh]*100,rc]:r===lc?[.01*(parseFloat(t)||0)*root.width,rc]:r===cc?[.01*(parseFloat(t)||0)*root.height,rc]:r===uc?[.01*(parseFloat(t)||0)*Math.max(root.width,root.height),rc]:r===_c?[.01*(parseFloat(t)||0)*Math.min(root.width,root.height),rc]:[parseFloat(t)||0,rc]})}return o}(e[al],r[al],t,i,o);t&&e[ll].push(t)}),r}function Nc(t,e,I,C){var r,i,o,k=bc(t[al],e),o=(e=t[hl],o=e?(o=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(o[1]),i=o[2],function(t){if(r&&0<r){var e=1/r;return("start"===i?Math.ceil(t/e):Math.floor(t/e))/r}return t}):Mh.getEasing(e):o);o&&o!==Ec&&(I=o(I));for(var L=t[ll],n=0,a=L.length;n<a;n++)!function(t){var e=Qt(L[t],2),t=e[0],l=e[1],r=k[t];if(t===Vh)for(var r=r||(k[t]=[[qh,te.identity()]]),i=0;i<16;i++)r[0][1][i]+=l[i]*I;else if(t===Qh){var o=1-I;8===l.length?(k[Ch]=[l[0][0]*o*o*o+3*l[2][0]*I*o*o+3*l[4][0]*I*I*o+l[6][0]*I*I*I,rc],k[kh]=[l[1][0]*o*o*o+3*l[3][0]*I*o*o+3*l[5][0]*I*I*o+l[7][0]*I*I*I,rc]):6===l.length&&(k[Ch]=[l[0][0]*o*o+2*l[2][0]*I*o+l[4][0]*I*I,rc],k[kh]=[l[1][0]*o*o+3*l[3][0]*I*o+l[5][0]*I*I,rc])}else if(t===Jh)r[0]+=l[0]*I,r[1]+=l[1]*I,r[2]+=l[2]*I,r[3][0]+=l[3][0]*I;else if(Cc.hasOwnProperty(t))l&&(r[0]+=l*I);else if(t===Th){r=r||(k[t]=[]);var n={};r.forEach(function(t){n[t[0]]=t[1]}),Object.keys(l).forEach(function(t){var e;n.hasOwnProperty(t)?n[t][0]+=l[t][0]*I:"blur"===t||"hue-rotate"===t||"grayscale"===t?((e=l[t].slice(0))[0]*=I,r.push([t,e])):"saturate"!==t&&"brightness"!==t&&"contrast"!==t||((e=l[t].slice(0))[0]=100+e[0]*I,r.push([t,e]))})}else if(Rc.hasOwnProperty(t))for(var a=0;a<2;a++)r[a][0]+=l[a]*I;else if(t===Ah||t===Oh)0!==l[0]&&(r[0][0]+=l[0]*I),0!==l[1]&&(r[1][0]+=l[1]*I);else if(t===Ih)for(var s=0,h=Math.min(r.length,l.length);s<h;s++){for(var c=0;c<4;c++)r[s][c]+=l[s][c]*I;for(var u=0;u<4;u++)r[s][4][u]+=l[s][4][u]*I}else if(t===Dh)r.forEach(function(t,e){l[e]&&(t[0][0]+=l[e][0]*I,t[1][0]+=l[e][1]*I)});else if(t===wh||t===Sh)r.forEach(function(t,e){l[e]&&(t[0]+=l[e]*I)});else if(wc.hasOwnProperty(t))r.forEach(function(t,e){var r=l[e];if(r){var i=Qt(r,4),o=i[0],e=i[1],r=i[2],i=i[3];if(Ic.hasOwnProperty(t.k)){for(var n=0,a=Math.min(t.v.length,o.length);n<a;n++){var s=t.v[n],h=o[n];s[0][0]+=h[0][0]*I,s[0][1]+=h[0][1]*I,s[0][2]+=h[0][2]*I,s[0][3]+=h[0][3]*I,s[1]&&h[1]&&(s[1][0]+=h[1]*I)}"linear"===t.k&&void 0!==t.d&&void 0!==e&&(Array.isArray(e)?(t.d[0]+=e[0]*I,t.d[1]+=e[1]*I,t.d[2]+=e[2]*I,t.d[3]+=e[3]*I):t.d+=e*I),"radial"===t.k?void 0!==t.z&&void 0!==i?(t.z[0]+=i[0]*I,t.z[1]+=i[1]*I,t.z[2]+=i[2]*I,t.z[3]+=i[3]*I,t.z[4]+=i[4]*I):void 0!==t.p&&void 0!==r&&(t.p[0][0]+=r[0]*I,t.p[1][0]+=r[1]*I):"conic"===t.k&&void 0!==t.d&&void 0!==e&&(t.d+=e*I,t.p[0][0]+=r[0]*I,t.p[1][0]+=r[1]*I)}else t[0]+=o[0]*I,t[1]+=o[1]*I,t[2]+=o[2]*I,t[3]+=o[3]*I}});else if(Ac.hasOwnProperty(t))(r=r[0])[0]+=l[0]*I,r[1]+=l[1]*I,r[2]+=l[2]*I,r[3]+=l[3]*I;else if(Tc.hasOwnProperty(t)){var _=k[t],o=C.tagName;if(Tc[t][o]&&pc(Tc[t][o].calIncrease)){var f=Tc[t][o].calIncrease;C.isMulti?k[t]=_.map(function(t,e){return f(t,l[e],I)}):k[t]=f(_,l,I)}else if(C.isMulti)if("points"===t||"controls"===t)for(var d=0,p=Math.min(_.length,l.length);d<p;d++){var g=_[d],m=l[d];if(!dc(g)&&!dc(m))for(var v=0,y=Math.min(g.length,m.length);v<y;v++){var x=g[v],E=m[v];if(!dc(x)&&!dc(E))for(var b=0,M=Math.min(x.length,E.length);b<M;b++)dc(x[b])||dc(E[b])||(x[b]+=E[b]*I)}}else"controlA"===t||"controlB"===t?l.forEach(function(t,e){var r=_[e];if(!dc(t)&&!dc(r))for(var i=0,o=Math.min(r.length,t.length);i<o;i++){var n=r[i],a=t[i];dc(n)||dc(a)||(r[i]+=a*I)}}):l.forEach(function(t,e){dc(t)||dc(_[e])||(_[e]+=t*I)});else if("points"===t||"controls"===t)for(var T=0,A=Math.min(_.length,l.length);T<A;T++){var O=_[T],R=l[T];if(!dc(O)&&!dc(R))for(var w=0,S=Math.min(O.length,R.length);w<S;w++)dc(O[w])||dc(R[w])||(O[w]+=R[w]*I)}else"controlA"===t||"controlB"===t?(dc(_[0])||dc(l[0])||(_[0]+=l[0]*I),dc(_[1])||dc(l[1])||(_[1]+=l[1]*I)):dc(_)||dc(l)||(k[t]+=l*I)}else t!==Uh&&t!==Xh||(k[t]+=l*I,t===Uh&&(k[t]<0?k[t]=0:1<k[t]&&(k[t]=1)))}(n);return k}function Pc(t,e){return pc(t)&&(e=t,t={}),[t||{},e]}function Fc(t,e,r,i){t.emit(ks.FRAME,r,i),e[ml]&&(e[ml]=!1,t.emit(ks.PLAY));var o=e[vl];pc(o)&&(o.call(t,r,i),e[vl]===o&&(e[vl]=null))}Object.assign(Cc,Oc),Object.assign(Cc,Sc);var Bc=0,Yc=function(){t(c,ks);var l=e(c);function c(t,o,e){var r,n;_(this,c),(r=l.call(this)).__id=Bc++,o=yc(o||[]),o=Array.isArray(o)?o.filter(function(t){return t&&mc(t)}):o&&mc(o)?(n=[],Object.keys(o).forEach(function(t){var e=o[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(n[r]=n[r]||{offset:r/(i-1)})[t]=e[r]}),n):[],gc(e)&&(r.__options={duration:e},e=r.__options);var i=r.__options=e||{duration:0},a=t.root,s=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,null,t,a,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,i.easing,!1,0,0,null,null,null,null,!1,60,"normal",!0,!1,!1,!1,0,t.__config,a&&a.__config,!1],h=r.iterations=i.iterations,e=r.duration=i.duration,a=Qt(r.__init(o,h,e,i.easing,t),4),h=a[0],e=a[1],t=a[2],a=a[3];s[El]=h,s[bl]=e,s[Yl]=t,s[Hl]=a,2===h.length&&(s[$l]=!0,s[Zl]=h[1][sl]);a=parseInt(i.fps)||0;return r.fps=a=a<=0?60:a,r.spfLimit=i.spfLimit,r.delay=i.delay,r.endDelay=i.endDelay,r.playbackRate=i.playbackRate,r.fill=i.fill,r.iterations=i.iterations,r.direction=i.direction,s[Gl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i.direction)?e:h,s[tc]=fh.__now,r[0]=r.__before,r[1]=r.__after,r}return f(c,[{key:"__init",value:function(i,t,a,s,e){if(i.length<1)return[[],[],[],{}];for(var o=e.tagName,n=0,h=i.length;n<h;n++)(function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),n=--t,h=--e;if(r.offset<=-1)return i.splice(t,1),n=--t,h=--e}Object.keys(r).forEach(function(t){gr.hasOwnProperty(t)&&gr.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Cr.isValid(o,t)||delete r[t]}),n=t,h=e})(n,h);1===i.length?(i[0]=yc(i[0]),1===i[0].offset?i.unshift({offset:0}):((r=yc(i[0])).offset=1,i.push(r))):i.forEach(function(t,e){i[e]=yc(t)});var r=i[0];r.hasOwnProperty("offset")&&0<r.offset?i.unshift(r={offset:0}):r.offset=0;r=i[i.length-1];r.hasOwnProperty("offset")&&r.offset<1?i.push(r={offset:1}):r.offset=1;for(var l=1,c=i.length;l<c;l++)if(!(f=i[l]).hasOwnProperty("offset")){for(var u=void 0,_=l+1;_<c&&!(u=i[_]).hasOwnProperty("offset");_++);for(var f=i[l-1],d=(u.offset-f.offset)/(_-l+1),p=l;p<_;p++)i[p].offset=f.offset+d*(p+1-l);l=_}var g=[];i.forEach(function(t){var e,r,i,o,n;g.push((r=a,i=s,n=(o=e=t).offset,t=o.easing,delete e.offset,delete e.easing,o=e.translatePath,e=Mo.normalize(e),Array.isArray(o)&&-1<[6,8].indexOf(o.length)&&(e[Qh]=o.map(function(t){return fc(t)})),(o=[])[al]=e,o[sl]=n*r,o[hl]=t||i,o[ll]=[],o))});var m,v,y,x,E,b,M=(m=e,v={},y=[],(r=g).forEach(function(t){var e=t[al];Object.keys(e).forEach(function(t){void 0===e[t]||v.hasOwnProperty(t)||(v[t]=!0,(t=!Tc.hasOwnProperty(t)?parseInt(t):t)===Qh&&(v.hasOwnProperty(Ch)||y.push(Ch),v.hasOwnProperty(kh)||y.push(kh),v[Ch]=v[kh]=!0),y.push(t))})}),r.forEach(function(t){var e=t[al];y.forEach(function(t){e.hasOwnProperty(t)&&!dc(e[t])||(Tc.hasOwnProperty(t)?e[t]=m.getProps(t):e[t]=m.currentStyle[t])})}),y);x=M,b=(E=e).computedStyle,g.forEach(function(t){var o=t[al];x.forEach(function(t){var e,r,i=o[t];dc(i)||(t===Vh?(e=E.outerWidth,r=E.outerHeight,r=fa.calMatrix(i,e,r),o[t]=[[qh,r]]):i[1]===oc&&(t===Kh||t===tl?o[t]=[fe.rgba2int(b[t]),nc]:Oc.hasOwnProperty(t)?o[t]=[b[t],rc]:t===zh?o[t]=[b[t],sc]:t!==jh&&t!==$h&&t!==Zh&&t!==el||(o[t]=[b[t],ac])))})});var T=yc(g).reverse(),A=e.style,O=e.props,R={};M.forEach(function(t){Mc(o,t)&&(R[t]=O[t]),R[t]=A[t]});for(var w=g.length,S=g[0],I=1;I<w;I++)S=Dc(S,g[I],M,e,o);T.forEach(function(t){t[sl]=a-t[sl],t[ll]=[]}),S=T[0];for(var C=1;C<w;C++)S=Dc(S,T[C],M,e,o);return[g,T,M,R]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[Tl]=0;var i=r[Al],o=r[Yl],n=r[yl];if(t){if(r[Ml]=r[Fl]+r[Ol]*r[Rl]+r[Bl],"finish"===r[Cl])return;r[Cl]="finish",r[jl]||(r[Al]={},e=!0)}else{if(r[Il]=r[Ml]=0,"idle"===r[Cl])return;r[Cl]="idle",r[Al]={},e=!0}e&&o.forEach(function(t){Tc.hasOwnProperty(t)?n.__currentProps[t]===i[t]&&(n.__currentProps[t]=n.props[t]):n.__currentStyle[t]===i[t]&&(n.__currentStyle[t]=n.style[t])})}},{key:"play",value:function(t){var e=this.__config,r=e[kl],i=e[Ol],o=e[Cl],n=e[El];return r||i<=0||n.length<1||"running"===o||(this.__cancelTask(),e[vl]=t,e[Cl]="running",e[ml]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[Pl]||(e[Pl]=!0,o=e[bl],t=e[Vl],e[Gl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(t)?o:n,e[Ml]=e[Tl]=e[Dl]=0),fh.onFrame(this),e[Ll]=fh.__now,e[dl]=!1),this}},{key:"__before",value:function(t){var e=this.__config;e[tc]=fh.__now;var r,i,o,n,a,s,h,l=e[yl],c=e[Xl],u=0,_=e[Gl],f=e[Rl],d=e[zl],p=e[jl],g=e[Fl],m=e[xl],v=e[$l],y=e[Zl],x=e[Ol],E=e[Bl],b=_.length,i=Qt((i=t,o=(r=e)[Sl],n=r[Ul],a=r[Xl],s=r[Ml]=r[Tl],n&&(!0===n?i=Math.min(i,1e3/a):0<n&&(i=Math.min(i,n))),1!==o&&0<o&&(i*=o),r[Tl]+=i,[s,i]),2),M=i[0];if(t=i[1],!e[Kl]&&c<60){if((t=e[Dl]+=t)<1e3/c)return void(e[ul]=!0);e[Dl]=0}if(e[Kl]=!1,M<g)return d&&kc((e[Wl]=_[0])[al],e[Yl],e,m,l),e[Ql]=!0,void(e[_l]=!0);for(0!==(M-=g)&&!e[Ql]||(e[Ql]=!1,e[fl]=!0);x<=M&&u<f-1;)M-=x,u++;e[Il]<u&&(h=e[fl]=!0),e[Il]=u,h&&(d=e[Vl],T=e[El],g=e[bl],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(d)&&(h=u%2==0,_=e[Gl]="alternate"===d?h?T:g:h?g:T));var T=f-1<=u,y=v?(R=M<y?0:1,y):_[R=function t(e,r,i,o){if(e===r)return o[e][sl]>i?e-1:e;var n=e+(r-e>>1),a=o[n];return a[sl]===i?n:a[sl]>i?t(e,Math.max(n-1,e),i,o):t(Math.min(n+1,r),r,i,o)}(0,b-1,M,_)][sl],T=T&&R===b-1,b=0;T||(b=v?M/x:(M-y)/(_[R+1][sl]-y));var A,O,R=_[R];e[Wl]=R,T?(E=M<x+E,A=bc(p?R[al]:e[Hl],e[Yl]),e[gl]=!0,E||(e[Il]++,e[pl]=!0,fh.offFrame(this),O=!0,e[Tl]=0)):A=Nc(R,e[Yl],b,l),kc(A,e[Yl],e,m,l),O&&(O=e[vl],this.__clean(!0),O&&(e[vl]=O))}},{key:"__after",value:function(t){var e=this.__config;e[cl]=!1,e[ul]?e[ul]=!1:(Fc(this,e,t,e[_l]),e[_l]=!1,e[fl]&&(e[fl]=!1,this.emit(ks.BEGIN,e[Il])),e[gl]&&!e[dl]&&(e[dl]=!0,this.emit(ks.END,e[Il]-1)),e[pl]&&(e[fl]=e[dl]=e[_l]=e[pl]=e[ul]=e[Pl]=!1,e[Cl]="finished",this.emit(ks.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[kl],i=e[Ol],o=this.pending;return r||i<=0||o||(e[Cl]="paused",this.__cancelTask(),t||this.emit(ks.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[kl],i=e[Ol],e=e[Cl];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[kl],o=i[Ol],n=i[Cl],a=i[El];if(t||o<=0||a.length<1||"finished"===n||"idle"===n)return r;r.__cancelTask();var s,h=i[xl],n=i[Hl];return h&&(s=i[jl]?(i[Wl]=a[a.length-1],a[a.length-1][al]):n,h.addRefreshTask({__before:function(){i[cl]=!0,kc(s,i[Yl],i,h,i[yl]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[cl]=!1,Fc(r,i,t),i[fl]=i[dl]=i[_l]=i[pl]=i[ul]=i[Pl]=!1,r.emit(ks.FINISH)),pc(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[kl],o=i[Ol],n=i[Cl],a=i[El];if(t||o<=0||"idle"===n||a.length<1)return r;r.__cancelTask();var s=i[xl],h=i[Hl];return s&&s.addRefreshTask({__before:function(){i[cl]=!0,kc(h,i[Yl],i,s,i[yl]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[cl]=!1,Fc(r,i,t),i[fl]=i[dl]=i[_l]=i[pl]=i[ul]=i[Pl]=!1,r.emit(ks.CANCEL)),pc(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,o=i[kl],n=i[Ol],a=i[El],s=i[Fl],i=i[Bl];if(o||n<=0||a.length<1)return this;a=Qt(Pc(e,r),2);return e=a[0],r=a[1],this.__goto(t,e.isFrame,e.excludeDelay),n+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,o=this.__config,n=o[kl],a=o[Ol],s=o[El],h=o[Fl],l=o[Bl];if(n||a<=0||s.length<1)return this;s=Qt(Pc(e,r),2);return e=s[0],r=s[1],a+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){o[Cl]="paused",i.__cancelTask(),pc(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[Al],i=t[yl];t[Yl].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],Tc.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,o=i[Rl],n=i[Ol];if(i[Cl]="paused",isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=i[Fl]),i[Tl]=t,t-=i[Fl];for(var a=0;n<=t&&a<o-1;)a++,t-=n;i[Il]=a,i[Pl]=!0;var s=i[El],h=i[bl],e=i[Vl];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(r=a%2==0,i[Gl]="alternate"===e?r?s:h:r?h:s),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[yl]=t,this.__config[ql]=t.__config}},{key:"__cancelTask",value:function(){fh.offFrame(this),this.__config[vl]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[kl]||(e.removeControl(),t?(e.__clean(),r[yl]=null):fh.nextFrame({__before:function(){e.__clean(),r[yl]=null}}),r[Ll]=0,r[kl]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[Cl]&&"finished"!==t[Cl]&&Ne.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[yl]}},{key:"root",get:function(){return this.__config[xl]}},{key:"keys",get:function(){return this.__config[Yl]}},{key:"style",get:function(){return this.__config[Al]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[Ol]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Ol]!==t&&(e[Ol]=t,e[Zl]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[Fl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Fl]!==t&&(e[Fl]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[Bl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Bl]!==t&&(e[Bl]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[Xl]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[Xl]!==t&&(e[Xl]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[Rl]},set:function(t){t===1/0||fe.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[Rl]!==t&&(e[Rl]=t),t}},{key:"fill",get:function(){return this.__config[wl]},set:function(t){var e=this.__config;return e[wl]!==(t=t||"none")&&(e[wl]=t,this.__checkModify()),e[zl]={backwards:!0,both:!0}.hasOwnProperty(t),e[jl]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[Vl]},set:function(t){var e=this.__config;return e[Vl]!==(t=t||"normal")&&(e[Vl]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[El]}},{key:"framesR",get:function(){return this.__config[bl]}},{key:"playbackRate",get:function(){return this.__config[Sl]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[Sl]!==(t=t<=0?1:t)&&(e[Sl]=t),t}},{key:"easing",get:function(){return this.__config[Nl]}},{key:"startTime",get:function(){return this.__config[Ll]}},{key:"currentTime",get:function(){return this.__config[Ml]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Ml]!==t&&(e[Ml]=t,e[Tl]=t),t}},{key:"nextTime",get:function(){return this.__config[Tl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Tl]!==t&&(e[Tl]=t),t}},{key:"timestamp",get:function(){return this.__config[tc]}},{key:"pending",get:function(){return"running"!==this.__config[Cl]}},{key:"finished",get:function(){return"finished"===this.__config[Cl]}},{key:"playState",get:function(){return this.__config[Cl]}},{key:"playCount",get:function(){return this.__config[Il]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[Il]!==t&&(e[Il]=t),t}},{key:"isDestroyed",get:function(){return this.__config[kl]}},{key:"animating",get:function(){var t=this.__config,e=t[Cl];return"idle"!==e&&("finished"!==e||t[jl]||t[zl])}},{key:"spfLimit",get:function(){return this.__config[Ul]},set:function(t){t=fe.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[Ul]!==t&&(e[Ul]=t),t}},{key:"assigning",get:function(){return this.__config[cl]}}]),c}(),Hc=v.NODE_KEY.NODE_DEFS_CACHE,Gc=fe.int2rgba,Wc=Tt.canvasPolygon,Uc=Tt.svgPolygon;var Xc={renderBoxShadow:function(t,e,r,i,o,n,a,s,h,l){var c=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,u=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0;o+=c,n+=u,a+=c,s+=u;var _,f,d=Qt(i,6),p=d[0],g=d[1],m=d[2],v=d[3],y=d[4],x=d[5],E=Gc(y),b=2*Math.abs(m)+2*Math.abs(v)+2*Math.abs(p)+2*Math.abs(g),M=[[o,n],[a,n],[a,s],[o,s],[o,n]],T=[[o-b,n-b],[o-b,s+b],[a+b,s+b],[a+b,n-b],[o-b,n-b]];if(0<y[3]&&(0<m||0<v))if(e===rt.CANVAS|e===rt.WEBGL){if(r.save(),r.beginPath(),"inset"===x){c=o+p+v,u=n+g+v,i=a+p-v,d=s+g-v,y=[[c,u],[i,u],[i,d],[c,d]],y=et.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[y[0][0],y[0][1],y[2][0],y[2][1]]);if(!y)return;y=[[y[0],y[1]],[y[2],y[1]],[y[2],y[3]],[y[0],y[3]],[y[0],y[1]]],v?(Wc(r,y),Wc(r,M.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==E&&(r.fillStyle=E),Wc(r,M),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),Wc(r,y),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=E,r.shadowBlur=m,Wc(r,[[c,u],[i,u],[i,d],[o-b,d],[o-b,s+b],[a+b,s+b],[a+b,n-b],[o-b,n-b],[o-b,d],[c,d],[c,u]])):(Wc(r,M),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=p,r.shadowOffsetY=g,r.shadowColor=E,r.shadowBlur=m,Wc(r,[[o,n],[a,n],[a,s],[o-b,s],[o-b,s+b],[a+b,s+b],[a+b,n-b],[o-b,n-b],[o-b,s],[o,s],[o,n]]))}else{var A=o+p-v,O=n+g-v,R=a+p+v,w=s+g+v,S=[[A,O],[R,O],[R,w],[A,w]],I=et.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[S[0][0],S[0][1],S[2][0],S[2][1]]);v?(Wc(r,M),Wc(r,S.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==E&&(r.fillStyle=E),Wc(r,S),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),I&&Wc(r,[[I[0],I[1]],[I[2],I[1]],[I[2],I[3]],[I[0],I[3]],[I[0],I[1]]].reverse()),Wc(r,M),Wc(r,S),Wc(r,T),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=E,r.shadowBlur=m,Wc(r,S)):(Wc(r,M),Wc(r,T),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=p,r.shadowOffsetY=g,r.shadowColor=E,r.shadowBlur=m,Wc(r,M))}r.fill(),r.closePath(),r.restore()}else e===rt.SVG&&(O=ga.outerSize(m),"inset"===x?(e=et.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[(S=[[R=o+p+v,A=n+g+v],[w=a+p-v,A],[w,I=s+g-v],[R,I]])[0][0],S[0][1],S[2][0],S[2][1]]))&&(e=[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]],v?(t.__config[Hc].push(x={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*m],["flood-color",E]]}]}),_=r.add(x),S={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uc(e)+Uc(M.slice(0).reverse())],["fill","#FFF"]]}]},f=r.add(S),t.__config[Hc].push(S),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uc(M)],["fill",E],["clip-path","url(#"+f+")"]]}),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uc(e)],["fill","#FFF"]]}]},f=r.add(x),t.__config[Hc].push(x),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uc([[R,A],[w,A],[w,I],[o-b,I],[o-b,s+b],[a+b,s+b],[a+b,n-b],[o-b,n-b],[o-b,I],[R,I],[R,A]])],["fill","#FFF"],["filter","url(#"+_+")"],["clip-path","url(#"+f+")"]]})):(_=r.add(A={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",p],["dy",g],["stdDeviation",.5*m],["flood-color",E]]}]}),t.__config[Hc].push(A),A={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uc(M)],["fill","#FFF"]]}]},f=r.add(A),t.__config[Hc].push(A),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uc([[o,n],[a,n],[a,s],[o-b,s],[o-b,s+b],[a+b,s+b],[a+b,n-b],[o-b,n-b],[o-b,s],[o,s],[o,n]])],["fill","#FFF"],["filter","url(#"+_+")"],["clip-path","url(#"+f+")"]]}))):(s=et.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[(a=[[o=o+p-v,n=n+g-v],[a=a+p+v,n],[a,n=s+g+v],[o,n]])[0][0],a[0][1],a[2][0],a[2][1]]),v?(n=r.add(o={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*m],["flood-color",E]]}]}),t.__config[Hc].push(o),o={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uc(M)+Uc(a.slice(0).reverse())],["fill","#FFF"]]}]},v=r.add(o),t.__config[Hc].push(o),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uc(a)],["fill",E],["clip-path","url(#"+v+")"]]}),o={tagName:"clipPath",children:[{tagName:"path",props:[["d",(s?Uc([[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()):"")+Uc(M)+Uc(a)+Uc(T)],["fill","#FFF"]]}]},v=r.add(o),t.__config[Hc].push(o),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uc(a)],["fill","#FFF"],["filter","url(#"+n+")"],["clip-path","url(#"+v+")"]]})):(E=r.add(m={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",p],["dy",g],["stdDeviation",.5*m],["flood-color",E]]}]}),t.__config[Hc].push(m),m={tagName:"clipPath",children:[{tagName:"path",props:[["d",Uc(M)+Uc(T)],["fill","#FFF"]]}]},r=r.add(m),t.__config[Hc].push(m),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Uc(M)],["fill","#FFF"],["filter","url(#"+E+")"],["clip-path","url(#"+r+")"]]}))))}},Vc={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,"color-dodge":!0,"color-burn":!0,"hard-light":!0,"soft-light":!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};function Kc(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})}var re=Kc,qt=function(t){return Vc.hasOwnProperty(Kc(t))},Y=v.STYLE_KEY,zc=Y.MARGIN_LEFT,jc=Y.MARGIN_RIGHT,$c=Y.PADDING_LEFT,Zc=Y.PADDING_RIGHT,qc=Y.BORDER_LEFT_WIDTH,Jc=Y.BORDER_RIGHT_WIDTH;var Qc={getInlineBox:function(t,e,r,i,o,n,a,s,h,l,c,u,_,f,d,p,g,m,v){var y=0,x=0;"paddingBox"===c||"padding-box"===c?(y=u,x=f):"contentBox"!==c&&"content-box"!==c&&(y=u+p,x=f+m);for(var E,p=u+p,f=f+m,m=o.baseLine-n,b=r.x,M=(r instanceof Lo?r.parent:r).domParent;M!==t;)r===M.contentBoxList[0]&&(b-=(E=M.computedStyle)[zc]+E[$c]+E[qc]),M=M.domParent;n=b,h&&("paddingBox"===c||"padding-box"===c?b-=d:"contentBox"!==c&&"content-box"!==c&&(b-=d+v),n-=d+v);for(var v=o.y+m-y,y=o.y+m-p,T=i.x+i.outerWidth,M=(i instanceof Lo?i.parent:i).domParent;M!==t;){var A=M.contentBoxList;i===A[A.length-1]&&(T+=(A=M.computedStyle)[jc]+A[Zc]+A[Jc]),M=M.domParent}return p=T,l&&("paddingBox"===c||"padding-box"===c?T+=_:"contentBox"!==c&&"content-box"!==c&&(T+=_+g),p+=_+g),x=o.y+m+a-s+x,f=o.y+m+a-s+f,b+=t.ox,T+=t.ox,n+=t.ox,p+=t.ox,[b,v+=t.oy,T,x+=t.oy,n,y+=t.oy,p,f+=t.oy]},getInlineWidth:function(t,e){for(var r=0,i=e.length,o=0;o<i;o++){var n=e[o];r+=n.width;for(var a=(n instanceof Lo?n.parent:n).domParent;a!==t;){var s,h=a.contentBoxList;n===h[0]&&(r+=(s=a.computedStyle)[zc]+s[$c]+s[qc]),n===h[h.length-1]&&(r+=(h=a.computedStyle)[jc]+h[Zc]+h[Jc]),a=a.domParent}}return r}},tu=Tt.svgPolygon,eu=rt.CANVAS,ru=rt.SVG,iu=rt.WEBGL,ou=xa.LOCAL,nu=v.STYLE_KEY,au=v.STYLE_RV_KEY,su=v.style2Upper,ee=v.STYLE_KEY,hu=ee.BORDER_TOP_LEFT_RADIUS,lu=ee.BORDER_TOP_RIGHT_RADIUS,cu=ee.BORDER_BOTTOM_LEFT_RADIUS,uu=ee.BORDER_BOTTOM_RIGHT_RADIUS,_u=ee.PADDING_LEFT,fu=ee.PADDING_RIGHT,du=ee.PADDING_TOP,pu=ee.PADDING_BOTTOM,gu=ee.MARGIN_LEFT,mu=ee.MARGIN_TOP,vu=ee.MARGIN_BOTTOM,yu=ee.MARGIN_RIGHT,xu=ee.BORDER_LEFT_WIDTH,Eu=ee.BORDER_TOP_WIDTH,bu=ee.BORDER_BOTTOM_WIDTH,Mu=ee.BORDER_RIGHT_WIDTH,Tu=ee.TOP,Au=ee.RIGHT,Ou=ee.BOTTOM,Ru=ee.LEFT,wu=ee.POSITION,Su=ee.DISPLAY,Iu=ee.WIDTH,Cu=ee.HEIGHT,ku=ee.MATRIX,Lu=ee.TRANSLATE_X,Du=ee.TRANSLATE_Y,Nu=ee.TRANSLATE_Z,Pu=ee.TRANSFORM,Fu=ee.SCALE_X,Bu=ee.SCALE_Y,Yu=ee.SCALE_Z,Hu=ee.ROTATE_X,Gu=ee.ROTATE_Y,Wu=ee.ROTATE_Z,Uu=ee.SKEW_X,Xu=ee.SKEW_Y,Vu=ee.PERSPECTIVE,Ku=ee.PERSPECTIVE_ORIGIN,zu=ee.ROTATE_3D,ju=ee.TRANSFORM_ORIGIN,$u=ee.BACKGROUND_POSITION_X,Zu=ee.BACKGROUND_POSITION_Y,qu=ee.BACKGROUND_SIZE,Ju=ee.BACKGROUND_COLOR,Qu=ee.BACKGROUND_IMAGE,t_=ee.BACKGROUND_REPEAT,e_=ee.BOX_SHADOW,r_=ee.OPACITY,i_=ee.Z_INDEX,o_=ee.BORDER_TOP_STYLE,n_=ee.BORDER_RIGHT_STYLE,a_=ee.BORDER_BOTTOM_STYLE,s_=ee.BORDER_LEFT_STYLE,h_=ee.FILTER,l_=ee.OVERFLOW,c_=ee.MIX_BLEND_MODE,u_=ee.TEXT_OVERFLOW,__=ee.BORDER_TOP_COLOR,f_=ee.BORDER_BOTTOM_COLOR,d_=ee.BORDER_LEFT_COLOR,p_=ee.BORDER_RIGHT_COLOR,g_=ee.FONT_STYLE,m_=ee.COLOR,v_=ee.VISIBILITY,y_=ee.POINTER_EVENTS,x_=ee.BORDER_TOP,E_=ee.BORDER_RIGHT,b_=ee.BORDER_BOTTOM,M_=ee.BORDER_LEFT,T_=ee.BACKGROUND_CLIP,A_=ee.FONT_SIZE,O_=ee.FONT_FAMILY,R_=ee.LINE_HEIGHT,w_=ee.TEXT_STROKE_COLOR,S_=ee.TEXT_STROKE_WIDTH,I_=ee.TEXT_STROKE_OVER,pt=v.UPDATE_KEY,C_=pt.UPDATE_NODE,k_=pt.UPDATE_FOCUS,L_=pt.UPDATE_STYLE,D_=pt.UPDATE_OVERWRITE,N_=pt.UPDATE_KEYS,P_=pt.UPDATE_CONFIG,F_=pt.UPDATE_REMOVE_DOM,B_=v.STRUCT_KEY.STRUCT_HAS_MASK,ur=v.NODE_KEY,Y_=ur.NODE_TAG_NAME,H_=ur.NODE_CACHE_STYLE,G_=ur.NODE_CURRENT_STYLE,W_=ur.NODE_COMPUTED_STYLE,U_=ur.NODE_STYLE,X_=ur.NODE_STRUCT,V_=ur.NODE_OPACITY,K_=ur.NODE_MATRIX_EVENT,z_=ur.NODE_MATRIX,j_=ur.NODE_LIMIT_CACHE,$_=ur.NODE_HAS_CONTENT,Z_=ur.NODE_REFRESH_LV,q_=ur.NODE_CACHE,J_=ur.NODE_CACHE_TOTAL,Q_=ur.NODE_CACHE_FILTER,tf=ur.NODE_CACHE_MASK,ef=ur.NODE_CACHE_OVERFLOW,rf=ur.NODE_IS_DESTROYED,of=ur.NODE_DEFS_CACHE,nf=ur.NODE_DOM_PARENT,af=ur.NODE_IS_INLINE,sf=ur.NODE_PERSPECTIVE_MATRIX,hf=ur.NODE_IS_MASK,lf=ur.NODE_VIRTUAL_DOM,cf=ur.NODE_CACHE_AS_BITMAP,uf=w.AUTO,_f=w.PX,ff=w.PERCENT,df=w.INHERIT,pf=w.NUMBER,gf=w.REM,mf=w.VW,vf=w.VH,yf=w.VMAX,xf=w.VMIN,Ef=w.DEG,bf=fe.int2rgba,Mf=fe.rgba2int,Tf=fe.joinArr,Af=fe.isNil,Of=Mo.calRelative,Rf=Cr.GEOM,wf=re,Sf=qt,If=te.point2d,Cf=Ia.contain,kf=Ia.NONE,Lf=Ia.TRANSFORM,Df=Ia.REFLOW,Nf=Ia.REPAINT,Pf=Ia.TRANSLATE_X,Ff=Ia.TRANSLATE_Y,Bf=Ia.TRANSLATE_Z;function Yf(t){for(var e=0,r=t.flowChildren,i=r.length,o=0;o<i;o++){var n=r[o];if(!(n instanceof Hf||n instanceof Bs&&n.shadowRoot instanceof Hf))break;if(n.flowChildren.length){e+=Yf(n);break}n.__config[af]&&(e+=n.outerWidth)}return e}var Hf=function(){t(n,R);var o=e(n);function n(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_(this,n),r=o.call(this),Array.isArray(e)?r.props=fe.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];var i=r.__isClip=!!r.props.clip,e=r.__isMask=i||!!r.props.mask,i=r.__config;return i[Y_]=t,i[H_]=r.__cacheStyle,i[G_]=r.__currentStyle,i[W_]=r.__computedStyle,i[Z_]=Df,i[U_]=r.__style,i[z_]=[],i[K_]=[],i[of]=r.__cacheDefs,i[hf]=e,r.__frameAnimateList=[],r.__contentBoxList=[],i[cf]=r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r}return f(n,[{key:"__structure",value:function(t,e,r){r=P(N(n.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(r[B_]=this.__hasMask),this.__config[X_]=r}},{key:"__mp",value:function(r,i,o){var n=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=nu[su("margin"+t)],t=nu[su("padding"+t)];i[e]=n.__mpWidth(r[e],o),i[t]=n.__mpWidth(r[t],o)})}},{key:"__mpWidth",value:function(t,e){return t[1]===_f?t[0]:t[1]===ff?t[0]*e*.01:t[1]===gf?t[0]*this.root.computedStyle[A_]:t[1]===mf?t[0]*this.root.width*.01:t[1]===vf?t[0]*this.root.height*.01:t[1]===yf?t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===xf?t[0]*Math.min(this.root.width,this.root.height)*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[_u]+r[fu],this.__clientHeight=e+=r[du]+r[pu],this.__offsetWidth=t+=r[xu]+r[Mu],this.__offsetHeight=e+=r[Eu]+r[bu],this.__outerWidth=t+r[gu]+r[yu],this.__outerHeight=e+r[mu]+r[vu]}},{key:"__calMp",value:function(t,e,r){var i=0;return t[1]===_f?i+=t[0]:t[1]!==ff||r?t[1]===gf?i+=t[0]*this.root.computedStyle[A_]:t[1]===mf?i+=t[0]*this.root.width*.01:t[1]===vf?i+=t[0]*this.root.height*.01:t[1]===yf?i+=t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===xf&&(i+=t[0]*Math.min(this.root.width,this.root.height)*.01):(t[0]*=.01*e,t[1]=_f,i+=t[0]),i}},{key:"__addMp",value:function(t,e,r,i,o){var n,a,s=r[gu],h=r[mu],l=r[yu],c=r[vu],u=r[_u],_=r[du],f=r[fu],d=r[pu],p=r[Eu],g=r[Mu],m=r[bu],r=r[xu];return i=t?(n=this.__calMp(s,e,!o)+this.__calMp(l,e,!o)+this.__calMp(u,e,!o)+this.__calMp(f,e,!o),r[1]===_f?n+=r[0]:r[1]===gf?n+=r[0]*this.root.computedStyle[A_]:r[1]===mf?n+=r[0]*this.root.width*.01:r[1]===vf?n+=r[0]*this.root.height*.01:r[1]===yf?n+=r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===xf&&(n+=r[0]*Math.min(this.root.width,this.root.height)*.01),g[1]===_f?n+=g[0]:g[1]===gf?n+=g[0]*this.root.computedStyle[A_]:g[1]===mf?n+=g[0]*this.root.width*.01:g[1]===vf?n+=g[0]*this.root.height*.01:g[1]===yf?n+=g[0]*Math.max(this.root.width,this.root.height)*.01:g[1]===xf&&(n+=g[0]*Math.min(this.root.width,this.root.height)*.01),i.map(function(t){return t+n})):(a=this.__calMp(h,e,!o)+this.__calMp(c,e,!o)+this.__calMp(_,e,!o)+this.__calMp(d,e,!o),p[1]===_f?a+=p[0]:p[1]===gf?a+=p[0]*this.root.computedStyle[A_]:p[1]===mf?a+=p[0]*this.root.width*.01:p[1]===vf?a+=p[0]*this.root.height*.01:p[1]===yf?a+=p[0]*Math.max(this.root.width,this.root.height)*.01:p[1]===xf&&(a+=p[0]*Math.min(this.root.width,this.root.height)*.01),m[1]===_f?a+=m[0]:m[1]===gf?a+=m[0]*this.root.computedStyle[A_]:m[1]===mf?a+=m[0]*this.root.width*.01:m[1]===vf?a+=m[0]*this.root.height*.01:m[1]===yf?a+=m[0]*Math.max(this.root.width,this.root.height)*.01:m[1]===xf&&(a+=m[0]*Math.min(this.root.width,this.root.height)*.01),i.map(function(t){return t+a}))}},{key:"__layout",value:function(t,e,r){Mo.computeReflow(this,this.isShadowRoot);var i=t.w,o=this.isDestroyed,n=this.currentStyle,a=this.computedStyle,s=this.__config,h=a[Su],l=n[Iu],c=n[wu];if(this.clearCache(),this.__layoutData={x:t.x,y:t.y,w:t.w,h:t.h,lx:t.lx},s[Z_]=Df,s[j_]=!1,s[af]=!1,!e){var u=this.next;if(!this.isMask&&u&&u.isMask){for(var _=0;u&&u.isMask;)_++,u=u.next;this.__hasMask=_}}if(this.__ox=this.__oy=0,o||"none"===h)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=a[Iu]=a[Cu]=0,this.__x=t.x,this.__y=t.y,void this.__layoutNone();if(r||this.__mp(n,a,i),l[1]!==uf)if(this.__isRealInline()&&"inline"===n[Su])l[0]=0,l[1]=uf;else switch(l[1]){case _f:i=l[0];break;case ff:i*=.01*l[0];break;case gf:i=l[0]*this.root.computedStyle[A_];break;case mf:i=l[0]*this.root.width*.01;break;case vf:i=l[0]*this.root.height*.01;break;case yf:i=l[0]*Math.max(this.root.width,this.root.height)*.01;break;case xf:i=l[0]*Math.min(this.root.width,this.root.height)*.01}var f,d=0;"flex"===h?this.__layoutFlex(t,e):"inlineBlock"===h||"inline-block"===h?d=this.__layoutInline(t,e):"inline"===h?d=this.__layoutInline(t,e,!0):this.__layoutBlock(t,e),"relative"===c?(f=n[Tu],o=n[Au],h=n[Ou],t=n[Ru],e=this.parent,f[1]!==uf?(f=Of(n,Tu,f,e),this.__offsetY(f),a[Tu]=f,a[Ou]="auto"):h[1]!==uf?(h=Of(n,Ou,h,e),this.__offsetY(-h),a[Ou]=h,a[Tu]="auto"):a[Tu]=a[Ou]="auto",t[1]!==uf?(t=Of(n,Ru,t,e,!0),this.__offsetX(t),a[Ru]=t,a[Au]="auto"):o[1]!==uf?(p=Of(n,Au,o,e,!0),this.__offsetX(-p),a[Au]=p,a[Ru]="auto"):a[Ru]=a[Au]="auto"):"absolute"!==c&&(a[Tu]=a[Ou]=a[Ru]=a[Au]="auto");var p=this.__sx=this.x+this.ox,c=this.__sy=this.y+this.oy;return s[af]||(p=this.__sx1=p+a[gu],p=this.__sx2=p+a[xu],p=this.__sx3=p+a[_u],p=this.__sx4=p+this.width,p=this.__sx5=p+a[fu],this.__sx6=p+a[Mu],c=this.__sy1=c+a[mu],c=this.__sy2=c+a[Eu],c=this.__sy3=c+a[du],c=this.__sy4=c+this.height,c=this.__sy5=c+a[pu],this.__sy6=c+a[bu]),a[Iu]=this.width,a[Cu]=this.height,r||this.__execAr(),d}},{key:"__execAr",value:function(){var t,e=this.__animateRecords;e&&(this.__animateRecords=null,e.list.forEach(function(t){t.target.vd instanceof n&&(t.target=t.target.vd)}),t=e.controller||this.root.animateController,e.options&&!1===e.options.autoPlay?(t.__records2=t.__records2.concat(e.list),t.init(t.__records2,t.list2)):(t.__records=t.__records.concat(e.list),t.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[Su]="none",t[mu]=t[yu]=t[vu]=t[gu]=t[du]=t[fu]=t[pu]=t[_u]=0}},{key:"__preLayout",value:function(t,e){var r=t.x,i=t.y,o=t.w,n=t.h,a=t.w2,s=t.h2,h=t.w3,l=t.h3,c=t.lx,u=t.nowrap,_=t.lineBoxManager,f=t.endSpace,d=void 0===f?0:f;this.__x=r,this.__y=i;var p,g,m=this.currentStyle,v=this.computedStyle,y=m[Iu],x=m[Cu],E=v[Eu],b=v[Mu],M=v[bu],T=v[xu],A=v[mu],O=v[yu],R=v[vu],w=v[gu],S=v[du],f=v[fu],m=v[pu],v=v[_u];if(void 0!==a)p=!0,o=a;else if(void 0!==h)p=!0,o=h;else if(y[1]!==uf)switch(p=!0,y[1]){case _f:o=y[0];break;case ff:o*=.01*y[0];break;case gf:o=y[0]*this.root.computedStyle[A_];break;case mf:o=y[0]*this.root.width*.01;break;case vf:o=y[0]*this.root.height*.01;break;case yf:o=y[0]*Math.max(this.root.width,this.root.height)*.01;break;case xf:o=y[0]*Math.min(this.root.width,this.root.height)*.01}if(void 0!==s)g=!0,n=s;else if(void 0!==l)g=!0,n=l;else if(x[1]!==uf)switch(g=!0,x[1]){case _f:n=x[0];break;case ff:n*=.01*x[0];break;case gf:n=x[0]*this.root.computedStyle[A_];break;case mf:n=x[0]*this.root.width*.01;break;case vf:n=x[0]*this.root.height*.01;break;case yf:n=x[0]*Math.max(this.root.width,this.root.height)*.01;break;case xf:n=x[0]*Math.min(this.root.width,this.root.height)*.01}t.x=r+=T+w+v,e||(i+=E+A+S),t.y=i;t=e?f+b+O:0;return e||(y[1]!==uf&&void 0===h||(o-=T+b+w+O+v+f),x[1]!==uf&&void 0===l||(n-=E+M+A+R+S+m)),{fixedWidth:p,fixedHeight:g,x:r,y:i,w:o,h:n,lx:c,lineBoxManager:_,nowrap:u,endSpace:d,selfEndSpace:t}}},{key:"__marginAuto",value:function(t,e){var r=t[wu],i=t[Su],o=t[gu],n=t[yu],t=t[Iu];"absolute"===r||"block"!==i&&"flex"!==i||t[1]===uf&&"img"!==this.tagName||o[1]!==uf||n[1]!==uf||(n=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-n),!0)}},{key:"__calMatrix",value:function(t,e,i,o,r,n,a,s,h){var l=this;if(r[af])return o[ju]=[n,a],e[ku]=te.identity();var c,u,_,f,d,p=e[ku];return p&&t<Df&&!Cf(t,Lf)?(f=u=c=0,Cf(t,Pf)&&(r=i[Lu],c=(r=Af(r)?0:r[1]===ff?r[0]*this.offsetWidth*.01:r[1]===gf?r[0]*this.root.computedStyle[A_]:r[1]===mf?r[0]*this.root.width*.01:r[1]===vf?r[0]*this.root.height*.01:r[1]===yf?r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===xf?r[0]*Math.min(this.root.width,this.root.height)*.01:r[0])-(o[Lu]||0),o[Lu]=r,o[Pu][12]+=c,p[12]+=c),Cf(t,Ff)&&(c=i[Du],u=(c=Af(c)?0:c[1]===ff?c[0]*this.offsetHeight*.01:c[1]===gf?c[0]*this.root.computedStyle[A_]:c[1]===mf?c[0]*this.root.width*.01:c[1]===vf?c[0]*this.root.height*.01:c[1]===yf?c[0]*Math.max(this.root.width,this.root.height)*.01:c[1]===xf?c[0]*Math.min(this.root.width,this.root.height)*.01:c[0])-(o[Du]||0),o[Du]=c,o[Pu][13]+=u,p[13]+=u),Cf(t,Bf)&&(t=i[Nu],f=(t=Af(t)?0:t[1]===ff?t[0]*this.offsetWidth*.01:t[1]===gf?t[0]*this.root.computedStyle[A_]:t[1]===mf?t[0]*this.root.width*.01:t[1]===vf?t[0]*this.root.height*.01:t[1]===yf?t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===xf?t[0]*Math.min(this.root.width,this.root.height)*.01:t[0])-(o[Nu]||0),o[Nu]=t,o[Pu][14]+=f,p[14]+=f),e[ku]=p):(void 0===n&&(n=this.__sx1,a=this.__sy1,s=this.offsetWidth,h=this.offsetHeight),void 0===e[ju]&&(e[ju]=!0,p=null,o[ju]=fa.calOrigin(i[ju],s,h,this.root)),void 0!==e[Pu]&&void 0!==e[Lu]&&void 0!==e[Du]&&void 0!==e[Nu]&&void 0!==e[Hu]&&void 0!==e[Gu]&&void 0!==e[Wu]&&void 0!==e[zu]&&void 0!==e[Fu]&&void 0!==e[Bu]&&void 0!==e[Yu]&&void 0!==e[Uu]&&void 0!==e[Xu]||(e[Pu]=e[Lu]=e[Du]=e[Nu]=e[Hu]=e[Gu]=e[Wu]=e[Fu]=e[Bu]=e[Yu]=e[Uu]=e[Xu]=!0,p=null,i[Pu]?d=fa.calMatrix(i[Pu],s,h,this.root):(_=[],[Lu,Du,Nu,Hu,Gu,Wu,zu,Uu,Xu,Fu,Bu,Yu].forEach(function(t){delete o[t];var e=i[t];if(!Af(e)){if(t===zu)return o[t]=[e[0],e[1],e[2],e[3][0]],0===e[3][0]?void 0:void _.push([t,e]);o[t]=e[0];var r=t===Fu||t===Bu||t===Yu;1===e[0]&&r||!r&&0===e[0]||(e[1]===ff?t===Lu||t===Nu?o[t]=e[0]*s*.01:t===Du&&(o[t]=e[0]*h*.01):e[1]===gf?t!==Lu&&t!==Nu&&t!==Du||(o[t]=e[0]*l.root.computedStyle[A_]):e[1]===mf?t!==Lu&&t!==Nu&&t!==Du||(o[t]=e[0]*l.root.width*.01):e[1]===vf?t!==Lu&&t!==Nu&&t!==Du||(o[t]=e[0]*l.root.height*.01):e[1]===yf?t!==Lu&&t!==Nu&&t!==Du||(o[t]=e[0]*Math.max(l.root.width,l.root.height)*.01):e[1]!==xf||t!==Lu&&t!==Nu&&t!==Du||(o[t]=e[0]*Math.min(l.root.width,l.root.height)*.01),_.push([t,e]))}}),_.length&&(d=fa.calMatrix(_,s,h,this.root))),o[Pu]=d||te.identity()),p||(f=o[Pu],(d=o[ju].slice(0))[0]+=n||0,d[1]+=a||0,p=e[ku]=fa.calMatrixByOrigin(f,d))),p}},{key:"__calCache",value:function(t,n,e,s,r,h,i,o,a,l,c,u,_,f,d,p,g,m,v,y,x,E,b,M,T,A,O,R,w,S){var I=this,C=v,k=T,L=M,D=S,N=h[T_]=r[T_];"paddingBox"===N||"padding-box"===N?(C=y,k=A,L=b,D=w):"contentBox"!==N&&"content-box"!==N||(C=x,k=O,L=E,D=R);var P,F=this.__config[af];F&&!this.contentBoxList.length&&(F=!1),[r_,i_,o_,n_,a_,s_,t_,l_,c_,u_,T_].forEach(function(t){h[t]=r[t]}),Af(s[h_])&&(s[h_]=!0,this.__calFilter(r,h)),Af(s[$u])&&(s[$u]=!0,R=r[$u],h[$u]=(R||[]).map(function(t){return t[1]===_f?t[0]:t[1]===gf?t[0]*I.root.computedStyle[A_]:t[1]===mf?t[0]*I.root.width*.01:t[1]===vf?t[0]*I.root.height*.01:t[1]===yf?t[0]*Math.max(I.root.width,I.root.height)*.01:t[1]===xf?t[0]*Math.min(I.root.width,I.root.height)*.01:t[1]===ff?t[0]+"%":void 0})),Af(s[Zu])&&(s[Zu]=!0,P=r[Zu],h[Zu]=(P||[]).map(function(t){return t[1]===_f?t[0]:t[1]===gf?t[0]*I.root.computedStyle[A_]:t[1]===mf?t[0]*I.root.width*.01:t[1]===vf?t[0]*I.root.height*.01:t[1]===yf?t[0]*Math.max(I.root.width,I.root.height)*.01:t[1]===xf?t[0]*Math.min(I.root.width,I.root.height)*.01:t[1]===ff?t[0]+"%":void 0})),Af(s[qu])&&(s[qu]=!0,h[qu]=(r[qu]||[]).map(function(t){return ch.calBackgroundSize(t,L-C,D-k,I.root)})),Af(s[Qu])&&(P=h[Qu]=r[Qu].slice(0),s[Qu]=P.map(function(t,e){if(!t)return null;if(fe.isString(t)){var r,i,o=I.__loadBgi[e]=I.__loadBgi[e]||{},e=Ne.IMG[Qu];return e&&e.state===Ne.LOADED?(o.url=Qu,o.source=e.source,o.width=e.width,o.height=e.height):o.url!==t&&(o.url=t,o.source=null,i=(r=I).root,Ne.measureImg(t,function(t){t.success&&t.url===o.url&&!I.isDestroyed&&(o.source=t.source,o.width=t.width,o.height=t.height,i.delRefreshTask(o.cb),i.addRefreshTask(o.cb={__before:function(){s[Qu]=void 0;var t={};t[C_]=r,t[k_]=Nf,t[P_]=r.__config,i.__addUpdate(r,r.__config,i,i.__config,t)}}))},{ctx:n,root:i,width:L-C,height:D-k})),!0}return!(F||!t.k)||void 0})),Af(s[e_])&&(s[e_]=!0,h[e_]=(r[e_]||[]).map(function(t){return t.map(function(t,e){if(3<e)return t;var r=t[0];return t[1]===ff?r*=e%2==0?.01*(L-C):.01*(D-k):t[1]===gf?r*=I.root.computedStyle[A_]:t[1]===mf?r=r*I.root.width*.01:t[1]===vf?r=r*I.root.height*.01:t[1]===yf?r=r*Math.max(I.root.width,I.root.height)*.01:t[1]===xf&&(r=r*Math.min(I.root.width,I.root.height)*.01),r})})),[Ju,__,p_,f_,d_].forEach(function(t){Af(s[t])&&(s[t]=bf(h[t]=r[t][0]))}),(Af(s[hu])||Af(s[lu])||Af(s[uu])||Af(s[cu]))&&(s[hu]=s[lu]=s[uu]=s[cu]=!0,F?Kt.calBorderRadiusInline(this.contentBoxList,r,h,this.root):Kt.calBorderRadius(a,l,r,h,this.root));var B=h[hu],Y=h[lu],H=h[uu],G=h[cu];["Top","Right","Bottom","Left"].forEach(function(t){var e,r,i,o,n=nu[su(t="border"+t)],a=nu[su(t+"Width")],t=nu[su(t+"Style")];Af(s[a])&&(s[a]=!0,s[n]=void 0),Af(s[t])&&(s[t]=!0,s[n]=void 0),Af(s[n])&&(n===x_?0<c?F||(e=Math.atan(c/f),r=Math.atan(c/u),s[n]=Kt.calPoints(c,h[t],e,r,v,y,b,M,T,A,w,S,0,B,Y)):s[n]=[]:n===E_?0<u?F||(e=Math.atan(u/c),r=Math.atan(u/_),s[n]=Kt.calPoints(u,h[t],e,r,v,y,b,M,T,A,w,S,1,Y,H)):s[n]=[]:n===b_?0<_?F||(i=Math.atan(_/f),o=Math.atan(_/u),s[n]=Kt.calPoints(_,h[t],i,o,v,y,b,M,T,A,w,S,2,G,H)):s[n]=[]:n===M_&&(0<f?F||(i=Math.atan(f/c),o=Math.atan(f/_),s[n]=Kt.calPoints(f,h[t],i,o,v,y,b,M,T,A,w,S,3,B,G)):s[n]=[]))});a=e&&e.computedStyle;return r[g_][1]===df?h[g_]=e?a[g_]:"normal":Af(s[g_])&&(h[g_]=r[g_][0]),s[g_]=h[g_],r[m_][1]===df?(h[m_]=e?a[m_]:[0,0,0,1],s[m_]=bf(h[m_])):Af(s[m_])&&(h[m_]=Mf(r[m_][0]),s[m_]=bf(h[m_])),r[w_][1]===df?(h[w_]=e?a[w_]:[0,0,0,1],s[w_]=bf(h[w_])):Af(s[w_])&&(h[w_]=Mf(r[w_][0]),s[w_]=bf(h[w_])),r[S_][1]===df?(h[S_]=e?a[S_]:0,s[S_]=!0):Af(s[S_])&&(l=(l=r[S_])[1]===gf?l[0]*this.root.computedStyle[A_]:l[1]===mf?l[0]*this.root.width*.01:l[1]===vf?l[0]*this.root.height*.01:l[1]===yf?l[0]*Math.max(this.root.width,this.root.height)*.01:l[1]===xf?l[0]*Math.min(this.root.width,this.root.height)*.01:l[0],h[S_]=l,s[S_]=!0),r[I_][1]===df?s[I_]=h[I_]=e?a[I_]:"none":s[I_]=h[I_]=r[I_][0],r[v_][1]===df?h[v_]=e?a[v_]:"visible":Af(s[v_])&&(h[v_]=r[v_][0]),s[v_]=h[v_],r[y_][1]===df?h[y_]=e?a[y_]:"auto":Af(s[y_])&&(h[y_]=r[y_][0]),s[y_]=h[y_],this.__bx1=C,this.__bx2=L,this.__by1=k,this.__by2=D,[C,k,L,D]}},{key:"__calPerspective",value:function(t,e,r,i,o,n){var a,s,h;Af(t[Vu])&&(h=t[Vu]=!0,s=0,s=(a=e[Vu])[1]===gf?a[0]*this.root.computedStyle[A_]:a[1]===mf?a[0]*this.root.width*.01:a[1]===vf?a[0]*this.root.height*.01:a[1]===yf?a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===xf?a[0]*Math.min(this.root.width,this.root.height)*.01:a[0],r[Vu]=s),Af(t[Ku])&&(h=t[Ku]=!0,r[Ku]=fa.calOrigin(e[Ku],this.offsetWidth,this.offsetHeight,this.root)),h&&(void 0===o&&(o=this.__sx1,n=this.__sy1),(h=r[Ku].slice(0))[0]+=o||0,h[1]+=n||0,i[sf]=fa.calPerspectiveMatrix(r[Vu],h))}},{key:"__calFilter",value:function(t,e){var r=this;return e[h_]=(t[h_]||[]).map(function(t){var e=Qt(t,2),t=e[0],e=e[1];return e[1]===_f||e[1]===Ef||e[1]===ff||e[1]===pf?e=e[0]:e[1]===gf?e=e[0]*r.root.computedStyle[A_]:e[1]===mf?e=e[0]*r.root.width*.01:e[1]===vf?e=e[0]*r.root.height*.01:e[1]===yf?e=e[0]*Math.max(r.root.width,r.root.height)*.01:e[1]===xf&&(e=e[0]*Math.min(r.root.width,r.root.height)*.01),[t,e]})}},{key:"__calContent",value:function(t,e,r,i){if(t===eu||t===iu){if(e<Nf)return this.__hasContent;if("hidden"!==r[v_]){var o=r[Qu];if(Array.isArray(o))for(var n=0,a=o.length;n<a;n++)if(o[n])return!0;if(0<r[Ju][0][3]){var s=i[Iu],h=i[Cu],l=i[du],c=i[fu],t=i[pu],e=i[_u];if(s&&h||l||c||t||e)return!0}for(var u=["Top","Right","Bottom","Left"],_=0,f=u.length;_<f;_++){var d=u[_];if(0<i[nu[su("border"+d+"Width")]]&&0<r[nu[su("border"+d+"Color")]][0][3])return!0}var p=r[e_];if(Array.isArray(p))for(var g=0,m=p.length;g<m;g++){var v=p[g];if(v&&(0<v[2]||0<v[3]))return!0}}}return!1}},{key:"render",value:function(O,t,R,e){var w,S=this,I=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,C=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.isDestroyed,i=this.root,k=this.__config,o=k[q_],L=k[H_],a=k[G_],D=k[W_];if(k[Z_]=kf,this.__bbox=null,r)return{isDestroyed:r,break:!0};O===ru&&(w=k[lf]=this.__virtualDom={bb:[],children:[],visibility:"visible"},k[J_]?k[J_].available||(k[J_].available=!0):k[J_]={available:!0,release:function(){this.available=!1,delete w.cache}});var n=D[Su];if("none"===n)return{break:!0};var s,h,l,c,u=this.clientWidth,_=this.clientHeight,f=this.offsetWidth,d=this.offsetHeight,p=this.__hasMask,N=D[du],P=D[fu],F=D[pu],B=D[_u],Y=D[xu],H=D[Mu],G=D[Eu],W=D[bu],g=k[af],m=this.__sx1,v=this.__sx2,y=this.__sx3,x=this.__sx4,E=this.__sx5,b=this.__sx6,M=this.__sy1,T=this.__sy2,A=this.__sy3,U=this.__sy4,X=this.__sy5,V=this.__sy6,K={ctx:R,x1:m,x2:v,x3:y,x4:x,x5:E,x6:b,y1:M,y2:T,y3:A,y4:U,y5:X,y6:V,sx1:m,sx2:v,sx3:y,sx4:x,sx5:E,sx6:b,sy1:M,sy2:T,sy3:A,sy4:U,sy5:X,sy6:V},z=k[nf];O===iu&&this.__calPerspective(L,a,D,k),r=e&&O===eu?k[z_]:this.__calMatrix(t,L,a,D,k,m,M,f,d),c=e&&O===eu?(s=this.__bx1,l=this.__bx2,h=this.__by1,this.__by2):(ot=Qt(this.__calCache(O,R,z,L,a,D,u,_,f,d,G,H,W,Y,N,P,F,B,m,v,y,x,E,b,M,T,A,U,X,V),4),s=ot[0],h=ot[1],l=ot[2],ot[3]),K.bx1=s,K.by1=h,K.bx2=l,K.by2=c;E=this.__hasContent=k[$_]=this.__calContent(O,t,a,D);e&&O===iu?!E&&this.__releaseWhenEmpty(o,D)?(K.break=!0,k[j_]=!1):k[j_]||(lt=this.bbox,o?o.reset(lt,m,M):o=xa.getInstance(lt,m,M),o&&o.enabled?(o.__bbox=lt,R=o.ctx,I+=o.dx,C+=o.dy,K.ctx=R):(k[j_]=!0,K.limitCache=K.break=!(o=null)),k[q_]=o):O===iu&&(ct=Ne.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),K.ctx=R=ct.ctx),K.dx=I,K.dy=C;var j,$,Z,q,J,Q=D[Ju],tt=D[__],et=D[p_],rt=D[f_],it=D[d_],T=D[hu],A=D[lu],U=D[uu],X=D[cu],ot=D[v_],nt=D[t_],at=D[Qu],t=D[r_],E=D[h_],st=D[qu],ht=D[e_],lt=D[l_],ct=D[c_],ut=D[T_];if(e&&O===eu?t=k[V_]:O===eu||O===iu?(z&&(t*=z.__config[V_]),k[V_]=t):O===ru&&(1===t?delete w.opacity:w.opacity=t),O===ru&&(te.isE(r)?delete w.transform:w.transform="matrix("+Tf(te.m2m6(r),",")+")",w.visibility=ot),O===eu&&e?r=k[K_]:(j=k[z_],fe.assignMatrix(j,r),z&&(z.perspectiveMatrix&&(r=te.multiply(z.perspectiveMatrix,r)),r=te.multiply(z.matrixEvent,r)),j=k[K_],fe.assignMatrix(j,r)),K.limitCache)return K;"normal"!==ct&&Sf(ct)?(ct=wf(ct),O===eu&&e!==ou?(j=i.width,$=i.height,j=Ne.getCacheCanvas(j,$,null,"blend"),$={ctx:R,target:j,mixBlendMode:ct,matrix:r},R=j.ctx):O===ru&&(w.mixBlendMode=ct)):O===ru&&delete w.mixBlendMode,p&&O===eu&&e!==ou&&(q=i.width,Z=i.height,q=Ne.getCacheCanvas(q,Z,null,"mask1"),Z={ctx:R,target:q,matrix:r},R=q.ctx),E&&E.length?O===eu&&e!==ou?(q=i.width,J=i.height,q=Ne.getCacheCanvas(q,J,null,"filter"),J={ctx:R,filter:E,target:q,matrix:r},R=q.ctx):O===ru&&(w.filter=Tt.svgFilter(E)):O===ru&&delete w.filter;var _t,ft,dt,pt=T.slice(0),gt=A.slice(0),mt=U.slice(0),vt=X.slice(0);if("padding-box"===ut||"paddingBox"===ut?(pt[0]-=Y,pt[1]-=G,gt[0]-=H,gt[1]-=G,mt[0]-=H,mt[1]-=W,vt[0]-=Y,vt[1]-=W):"content-box"!==ut&&"contentBox"!==ut||(pt[0]-=Y+B,pt[1]-=G+N,gt[0]-=H+P,gt[1]-=G+N,mt[0]-=H+P,mt[1]-=W+F,vt[0]-=Y+B,vt[1]-=W+F),"hidden"===lt&&"inline"!==n?(ft=Kt.calRadius(s,h,l-s,c-h,pt,gt,mt,vt),O===eu&&e!==ou?(n=i.width,_t=i.height,n=Ne.getCacheCanvas(n,_t,null,"overflow"),_t={ctx:R,target:n,matrix:r},R=n.ctx,_t.x=m,_t.y=M,_t.offsetWidth=f,_t.offsetHeight=d,_t.list=ft):O===ru&&(f={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",tu(ft)||"M".concat(m,",").concat(M,"L").concat(m+f,",").concat(M,"L").concat(m+f,",").concat(M+d,"L").concat(m,",").concat(M+d,",L").concat(m,",").concat(M)]]}]},d=R.add(f),k[of].push(f),w.overflow="url(#"+d+")")):O===ru&&delete w.overflow,O===eu&&(K.offscreenBlend=$,K.offscreenMask=Z,K.offscreenFilter=J,K.offscreenOverflow=_t,(K.ctx=R).globalAlpha=t,e||R.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])),("hidden"===ot||K.break)&&(O===eu||O===iu))return K.break=!0,K;if(o&&o.enabled&&(o.__available=!0),g){var yt=this.contentBoxList,xt=yt.length,Et=at.some(function(t){return t});if(xt){g=function(){var p,o,t=D[A_],e=D[O_],g=D[R_],n=0,m=0,v=[];Et&&(n=Qc.getInlineWidth(S,yt),m=g,"paddingBox"===ut||"padding-box"===ut?(n+=B+P,m+=N+F):"contentBox"!==ut&&"content-box"!==ut&&(n+=B+P+Y+H,m+=N+F+G+W),O!==eu&&O!==iu||(p=Ne.getCacheCanvas(n,m,"__$$INLINE_BGI$$__")),o=at.length,at.slice(0).reverse().forEach(function(t,e){var r,i;t&&(e=o-1-e,fe.isString(t)?(r=S.__loadBgi[e]).url===at[e]&&(i=ch.renderImage(S,O,p&&p.ctx||R,r,0,0,n,m,pt,gt,mt,vt,a,e,st,nt,k,!0,I,C),O===ru&&i&&v.push(i)):!t.k||(i=S.__gradient(O,R,0,0,n,m,t,I,C))&&("conic"===i.k?(t=or.renderConic(S,O,p&&p.ctx||R,i.v,0,0,n,g,pt,gt,mt,vt,!0),O===ru&&t&&v.push(t)):(i=ch.renderBgc(S,O,p&&p.ctx||R,i.v,null,0,0,n,m,pt,gt,mt,vt,"fill",!0),O===ru&&i&&v.push(i))))}));for(var e=Mo.getFontFamily(e),y=Mo.getBaseLine(D),x=t*(Mt.info[e].lgr||0),E=!0,b=yt[0],M=b.parentLineBox,T=0,A=0;A<xt;A++){var _=yt[A];_.parentLineBox!==M&&function(){var t=Qt(Qc.getInlineBox(S,yt,b,yt[A-1],M,y,g,x,E,!1,ut,N,P,F,B,G,H,W,Y),8),i=t[0],o=t[1],e=t[2],r=t[3],n=t[4],a=t[5],s=t[6],h=t[7];E&&(t=Yf(S),i-=t,n-=t),0<Q[3]&&ch.renderBgc(S,O,R,L[Ju],null,i,o,e-i,r-o,pt,[0,0],[0,0],vt,"fill",!1,I,C);var l,c,u=e-i;O!==eu&&O!==iu||!p?O===ru&&v.length&&v.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(T,",",0,"L").concat(u+T,",",0,"L").concat(u+T,",").concat(m,"L").concat(T,",").concat(m,",L").concat(T,",",0)]]}]},r=R.add(e),k[of].push(e),w.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-T],["y",o],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,T,0,u,m,i+I,o+C,u,m),T+=u,ht&&ht.forEach(function(t){Xc.renderBoxShadow(S,O,R,t,n,a,s,h,s-n,h-a,I,C)}),0<G&&0<tt[3]&&(r=Math.atan(G/Y),e=Math.atan(G/H),e=Kt.calPoints(G,D[o_],r,e,n,n+Y,s,s,a,a+G,h-W,h,0,E?pt:[0,0],[0,0]),Kt.renderBorder(S,O,R,e,L[__],I,C)),0<W&&0<rt[3]&&(c=Math.atan(W/Y),l=Math.atan(W/H),c=Kt.calPoints(W,D[a_],c,l,n,n+Y,s,s,a,a+G,h-W,h,2,E?pt:[0,0],[0,0]),Kt.renderBorder(S,O,R,c,L[f_],I,C)),E&&0<Y&&0<it[3]&&(l=Math.atan(Y/G),c=Math.atan(Y/W),c=Kt.calPoints(Y,D[s_],l,c,n,n+Y,s-H,s,a,a+G,h-W,h,3,pt,gt),Kt.renderBorder(S,O,R,c,L[d_],I,C)),E=!1,M=(b=_).parentLineBox}(),A===xt-1&&function(){var t=Qt(Qc.getInlineBox(S,yt,b,yt[A],M,y,g,x,E,!0,ut,N,P,F,B,G,H,W,Y),8),i=t[0],o=t[1],e=t[2],r=t[3],n=t[4],a=t[5],s=t[6],h=t[7];E&&(l=Yf(S),i-=l,n-=l);var l=function t(e){for(var r=0,i=e.flowChildren,o=i.length-1;0<=o;o--){var n=i[o];if(!(n instanceof Hf||n instanceof Bs&&n.shadowRoot instanceof Hf))break;if(n.flowChildren.length){r+=t(n);break}r+=n.outerWidth}return r}(S);e+=l,s+=l,0<Q[3]&&ch.renderBgc(S,O,R,L[Ju],null,i,o,e-i,r-o,E?pt:[0,0],gt,mt,E?vt:[0,0],"fill",!1,I,C);var c,u,_,f,d=e-i;O!==eu&&O!==iu||!p?O===ru&&v.length&&v.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(T,",",0,"L").concat(d+T,",",0,"L").concat(d+T,",").concat(m,"L").concat(T,",").concat(m,",L").concat(T,",",0)]]}]},r=R.add(e),k[of].push(e),w.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-T],["y",o],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,T,0,d,m,i+I,o+C,d,m),ht&&ht.forEach(function(t){Xc.renderBoxShadow(S,O,R,t,n,a,s,h,s-n,h-a,I,C)}),0<G&&0<tt[3]&&(u=Math.atan(G/Y),c=Math.atan(G/H),u=Kt.calPoints(G,D[o_],u,c,n,n,s-H,s,a,a+G,h-W,h,0,E?pt:[0,0],gt),Kt.renderBorder(S,O,R,u,L[__],I,C)),0<H&&0<et[3]&&(c=Math.atan(H/G),u=Math.atan(H/W),u=Kt.calPoints(H,D[n_],c,u,n,n+Y,s-H,s,a,a+G,h-W,h,1,pt,gt),Kt.renderBorder(S,O,R,u,L[p_],I,C)),0<W&&0<rt[3]&&(f=Math.atan(W/Y),_=Math.atan(W/H),f=Kt.calPoints(W,D[a_],f,_,n,n,s-H,s,a,a+G,h-W,h,2,E?pt:[0,0],gt),Kt.renderBorder(S,O,R,f,L[f_],I,C)),E&&0<Y&&0<it[3]&&(_=Math.atan(Y/G),f=Math.atan(Y/W),f=Kt.calPoints(Y,D[s_],_,f,n,n+Y,s-H,s,a,a+G,h-W,h,3,pt,gt),Kt.renderBorder(S,O,R,f,L[d_],I,C))}()}return p&&p.ctx.clearRect(0,0,n,m),{v:K}}();if("object"===bt(g))return g.v}else if(s===l||h===c)return K}return 0<Q[3]&&ch.renderBgc(this,O,R,L[Ju],ft,s,h,l-s,c-h,pt,gt,mt,vt,"fill",!1,I,C),at&&(dt=at.length,at.slice(0).reverse().forEach(function(t,e){var r;t&&(e=dt-1-e,fe.isString(t)?(r=S.__loadBgi[e]).url===at[e]&&ch.renderImage(S,O,R,r,s,h,l,c,pt,gt,mt,vt,a,e,st,nt,k,!1,I,C):!t.k||(t=S.__gradient(O,R,s,h,l,c,t,I,C))&&("conic"===t.k?or.renderConic(S,O,R,t.v,s,h,l-s,c-h,pt,gt,mt,vt):ch.renderBgc(S,O,R,t.v,ft,s,h,l-s,c-h,pt,gt,mt,vt,"fill",!1,I,C)))})),ht&&ht.forEach(function(t){Xc.renderBoxShadow(S,O,R,t,m,M,b,V,b-m,V-M,I,C)}),0<G&&0<tt[3]&&Kt.renderBorder(this,O,R,L[x_],L[__],I,C),0<H&&0<et[3]&&Kt.renderBorder(this,O,R,L[E_],L[p_],I,C),0<W&&0<rt[3]&&Kt.renderBorder(this,O,R,L[b_],L[f_],I,C),0<Y&&0<it[3]&&Kt.renderBorder(this,O,R,L[M_],L[d_],I,C),K}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(n.prototype),"__destroy",this).call(this),t=this.root,this.clearAnimate(),this.clearFrameAnimate(),t&&t.delRefreshTask(this.__loadBgi.cb),t&&t.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,o=this.isMask;if(!(r||"none"===i[Su]||t.__stopPropagation||o)){var n,a=t.event.type,r=this.listener,o=this.__hasMask;if(r.hasOwnProperty(a)&&(n=r[a]),e)return"none"!==i[y_]&&fe.isFunction(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0;if(this.willResponseEvent(t)){if(o){for(var s,h=this.next,o=h.isClip;h&&h.isMask;){if(h.willResponseEvent(t,!0)){s=!0;break}h=h.next}if(!o&&!s)return}return fe.isFunction(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,o=this.__sx1,n=this.__sy1,a=this.offsetWidth,s=this.offsetHeight,h=this.matrixEvent,l=this.computedStyle;if("none"!==l[y_])return et.pointInQuadrilateral(r,i,o,n,o+a,n,o+a,n+s,o,n+s,h)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,i,o,n,a){var s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=o-r,c=n-i;if(l&&c){var u=a.k,_=a.v,f=a.d,d=a.s,p=a.z,g=a.p,m={k:u};return"linear"===u?(a=or.getLinear(_,f,r,i,r+.5*l,i+.5*c,l,c,this.root,s,h),m.v=this.__getLg(t,e,a)):"radial"===u?(p=or.getRadial(_,d,p,g,r,i,o,n,this.root,s,h))&&(m.v=this.__getRg(t,e,p),p.matrix&&(m.v=[m.v,p.matrix,p.cx,p.cy])):"conic"===u&&(u=this.bbox,u=Math.max(Math.abs(u[2]-u[0]),Math.abs(u[3]-u[1])),c=Math.max(Math.abs(l),Math.abs(c)),h=or.getConic(_,f,g,r,i,o,n,u/c,this.root,s,h),m.v=this.__getCg(t,e,h)),m}}},{key:"__getLg",value:function(t,e,r){if(t===eu||t===iu){var i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach(function(t){i.addColorStop(t[1],bf(t[0]))}),i}if(t===ru){r={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",bf(t[0])],["offset",100*t[1]+"%"]]}})},e=e.add(r);return this.__config[of].push(r),"url(#"+e+")"}}},{key:"__getRg",value:function(t,e,r){if(t===eu||t===iu){var i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r);return r.stop.forEach(function(t){i.addColorStop(t[1],bf(t[0]))}),i}if(t===ru){t={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",bf(t[0])],["offset",100*t[1]+"%"]]}})};r.tx!==r.cx&&t.props.push(["fx",r.cx]),r.ty!==r.cy&&t.props.push(["fy",r.cy]);e=e.add(t);return this.__config[of].push(t),"url(#"+e+")"}}},{key:"__getCg",value:function(t,e,r){var i=r.cx,o=r.cy,n=r.r,a=r.deg,s=r.stop,h=s.length-1;s[h][1]<1&&s.push([s[h][0].slice(0),1]),0<s[0][1]&&s.unshift([s[0][0].slice(0),0]);var l=[];if(t===eu||t===iu)return r;if(t===ru){for(var c,u=[],_=0,f=s.length;_<f-1;_++)for(var d=360*s[_][1],p=360*s[_+1][1]-d,g=Math.ceil(p),m=p/g,v=s[_][0],p=s[_+1][0],p=[p[0]-v[0],p[1]-v[1],p[2]-v[2],p[3]-v[3]],y=[p[0]/g,p[1]/g,p[2]/g,p[3]/g],x=0;x<g;x++){var E=Qt(et.pointOnCircle(i,o,n,d+m*x+a-.5),2),b=E[0],M=E[1],T=Qt(et.pointOnCircle(i,o,n,d+m*x+a+.5),2),E=T[0],T=T[1];u.push([b,M,E,T,Math.round(v[0]+y[0]*x),Math.round(v[1]+y[1]*x),Math.round(v[2]+y[2]*x),Math.round(v[3]+y[3]*x)])}h=u[0].slice(0),r=Qt(et.pointOnCircle(i,o,n,a),2),t=r[0],r=r[1];h[2]=t,h[3]=r;r=s[s.length-1][0];h[4]=r[0],h[5]=r[1],h[6]=r[2],h[7]=r[3],u.push(h);for(var A=0,O=u.length;A<O;A++){var R,w,S=u[A];c&&(R={tagName:"linearGradient",props:[["x1",c[0]],["y1",c[1]],["x2",S[2]],["y2",S[3]]],children:[{tagName:"stop",props:[["stop-color",bf([c[4],c[5],c[6],c[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",bf([S[4],S[5],S[6],S[7]])],["offset","100%"]]}]},w=e.add(R),this.__config[of].push(R),l.push([[[i,o],[c[0],c[1]],[S[2],S[3]]],"url(#"+w+")"])),c=S}}return l}},{key:"clearCache",value:function(t){var e=this.__config,r=e[J_],i=e[Q_],o=e[tf],n=e[ef];t||(e[H_]=this.__cacheStyle={},(e=e[q_])&&e.release()),r&&r.release(),i&&i.release(),o&&o.release(),n&&n.release()}},{key:"updateStyle",value:function(e,r){var i=this,o=i.root,n=i.__config,a=Mo.normalize(e);o?o.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,n[rf]||((t={})[C_]=i,t[L_]=a,t[D_]=e,t[N_]=Object.keys(a).map(function(t){return t=!Rf.hasOwnProperty(t)?parseInt(t):t}),t[P_]=n,o.__addUpdate(i,n,o,o.__config,t))},__after:function(t){fe.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,a),fe.isFunction(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,o=i.root,n=i.__config;o?o.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,n[rf]||((t={})[C_]=i,t[L_]=e,t[N_]=Object.keys(e).map(function(t){return t=!Rf.hasOwnProperty(t)?parseInt(t):t}),t[P_]=n,o.__addUpdate(i,n,o,o.__config,t))},__after:function(t){fe.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),fe.isFunction(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new Yc(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof Yc&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(fe.isFunction(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var o={__after:function(t){e(t)},__karasFramecb:e};return t.push(o),fh.onFrame(o),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void fh.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){fh.offFrame(t)})}},{key:"__computeMeasure",value:function(t,e,r){Mo.computeMeasure(this),fe.isFunction(r)&&r(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){P(N(n.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[Z_]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t}},{key:"__offsetY",value:function(t,e,r){P(N(n.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t,this.clearCache()),void 0!==r&&(this.__config[Z_]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t}},{key:"__resizeX",value:function(t,e){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[j_]=!1),void 0!==e&&(this.__config[Z_]|=e),this.clearCache()}},{key:"__resizeY",value:function(t,e){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[j_]=!1),void 0!==e&&(this.__config[Z_]|=e),this.clearCache()}},{key:"__spreadBbox",value:function(t){var n=0,a=0;return Array.isArray(t)&&t.forEach(function(t){var e=Qt(t,6),r=e[0],i=e[1],o=e[2],t=e[3];"inset"!==e[5]&&(o=ga.outerSize(o),o+=t,n=Math.max(n,r+o),a=Math.max(a,i+o))}),[n,a]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=t?(i=Array.isArray(t)?t:[t]).map(function(t){return nu[su(t)]}):Object.keys(e);return i.forEach(function(t){Rf.hasOwnProperty(t)?r[t]=e[t]:r[au[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,o=this.matrixEvent,n=If(te.calPoint([t,e],o)),a=If(te.calPoint([t+r,e],o)),r=If(te.calPoint([t+r,e+i],o)),o=If(te.calPoint([t,e+i],o));return{left:Math.min(n[0],Math.min(a[0],Math.min(r[0],o[0]))),top:Math.min(n[1],Math.min(a[1],Math.min(r[1],o[1]))),right:Math.max(n[0],Math.max(a[0],Math.max(r[0],o[0]))),bottom:Math.max(n[1],Math.max(a[1],Math.max(r[1],o[1]))),points:[n,a,r,o]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var o=this;if(o.isDestroyed)return Ne.warn("Remove target is destroyed."),void(fe.isFunction(e)&&e());var n=o.root,a=o.domParent,t=o.isShadowRoot?o.hostRoot:o;-1!==a.children.indexOf(t)?(n.delRefreshTask(o.__task),n.addRefreshTask(o.__task={__before:function(){o.__task=null;var t=a.__json,e=t.children.indexOf((o.isShadowRoot?o.hostRoot:o).__json),r=a.zIndexChildren,i=r.indexOf(o.isShadowRoot?o.hostRoot:o);if(-1===e||-1===i)throw new Error("Remove index Exception.");t.children.splice(e,1),a.children.splice(e,1),r.splice(i,1),o.__prev&&(o.__prev.__next=o.__next);i={};i[C_]=o,i[k_]=Ia.REFLOW,i[F_]=!0,i[P_]=o.__config,n.__addUpdate(o,o.__config,n,n.__config,i)},__after:function(t){(o.isShadowRoot?o.hostRoot:o).__destroy(),fe.isFunction(e)&&e.call(o,t)}})):fe.isFunction(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,o,n,a,s,h,l;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.clientWidth,i=this.clientHeight,o=(l=this.currentStyle)[Eu],n=l[Mu],a=l[bu],s=l[xu],h=l[e_],h=(l=Qt(this.__spreadBbox(h),2))[0],l=l[1],r+=s[0]+n[0],i+=o[0]+a[0],this.__bbox=[t-h-1,e-l-1,t+r+h+1,e+i+l+1]),this.__bbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[z_]}},{key:"matrixEvent",get:function(){return this.__config[K_]}},{key:"perspectiveMatrix",get:function(){return this.__config[sf]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseLine",get:function(){return this.offsetHeight}},{key:"firstBaseLine",get:function(){return this.offsetHeight}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[cf]=this.__cacheAsBitmap=!!t}}]),n}(),mr=v.STYLE_KEY,Gf=mr.DISPLAY,Wf=mr.MARGIN_LEFT,Uf=mr.BORDER_LEFT_WIDTH,Xf=mr.PADDING_LEFT,Vf=mr.PADDING_RIGHT,Kf=mr.BORDER_RIGHT_WIDTH,zf=mr.MARGIN_RIGHT,jf=function(){function o(t,e,r,i){_(this,o),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseLine=i}return f(o,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(){var r=this.baseLine;this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseLine=Math.max(e,this.__baseLine)}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){var t=this.list,e=t.length;if(e){for(var r=t[0],e=t[e-1],i=r.x,o=(r instanceof Lo?r.parent:r).domParent;;){var n=o.contentBoxList,a=o.computedStyle,s=a[Gf],h=a[Wf],l=a[Uf],a=a[Xf];if("inline"!==s)break;r===n[0]&&(i-=h+l+a),o=o.domParent}for(var c=e.x+e.outerWidth,o=(e instanceof Lo?e.parent:e).domParent;;){var u=o.contentBoxList,_=o.computedStyle,f=_[Gf],d=_[zf],p=_[Kf],_=_[Vf];if("inline"!==f)break;r===u[u.length-1]&&(c+=d+p+_),o=o.domParent}return c-i}return 0}},{key:"height",get:function(){return this.lineHeight}},{key:"baseLine",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),Math.max(this.__baseLine,e)}},{key:"lineHeight",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),Math.max(this.__lineHeight,e)}}]),o}(),$f=function(){function o(t,e,r,i){_(this,o),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__maxX=t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseLine=i,this.__isEnd=!0}return f(o,[{key:"genLineBox",value:function(t,e){e=new jf(t,e,this.__lineHeight,this.__baseLine);return this.list.push(e),this.__isEnd=!0,e}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseLine,i);if(this.__isNewLine){i=new jf(t,e,r,i);return this.list.push(i),this.__isEnd=!0,this.__isNewLine=!1,i}}},{key:"setLbOrGenLineBoxByInline",value:function(t,e,r,i){var o,n=Math.max(this.__lineHeight,r),a=Math.max(this.__baseLine,i),s=this.list;if(this.__isNewLine)return o=new jf(t,e,n,a),s.push(o),this.__isEnd=!0,this.__isNewLine=!1,o;(o=s[s.length-1]).__setLB(r,i)}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__maxX=Math.max(this.__maxX,e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i){this.list.forEach(function(t){var e=r-t.width;0<e&&("center"===i&&(e*=.5),t.__offsetX(e),t.list.forEach(function(t){t.__offsetX(e,!0)}))})}},{key:"verticalAlign",value:function(){this.list.forEach(function(t){t.verticalAlign()})}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseLine",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseLine}return 0}},{key:"firstBaseLine",get:function(){var t=this.list;return t.length?t[0].baseLine:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}}]),o}(),Zf={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},T=v.STYLE_KEY,qf=T.DISPLAY,Jf=T.TOP,Qf=T.BOTTOM,t0=T.POSITION,e0=T.HEIGHT,r0=w.AUTO,i0=w.PX,o0=w.PERCENT,n0=Ia.REFLOW;var a0={offsetAndResizeByNodeOnY:function(t,e,r,i,o){if(i){for(;;){for(;t.isShadowRoot;)t=t.host;var n=t,a=void 0,s=t.domParent;s&&(p=s.computedStyle[t0],a=s===e||s.isShadowRoot||"relative"===p||"absolute"===p);for(var h=t.next,l=void 0;h;){if("none"!==h.currentStyle[qf])if("absolute"===h.currentStyle[t0]){var c=h.currentStyle,u=c[Jf],_=c[Qf],c=c[e0];if(u[1]===r0?_[1]===r0||_[1]===i0?(h.__offsetY(i,!0,n0),h.clearCache()):_[1]===o0&&(_=(1-.01*_[0])*i,h.__offsetY(_,!0,n0),h.clearCache()):u[1]===o0&&(u=.01*u[0]*i,h.__offsetY(u,!0,n0),h.clearCache()),c[1]===o0)if(a)s.__layoutAbs(s,null,h);else{if(!l)for(l=s;l&&l!==e&&!l.isShadowRoot;){var f=l.currentStyle;if("absolute"===f[t0]||"relative"===f[t0])break;l=l.domParent}o.push([s,l,h])}}else h.__offsetY(i,!0,n0),h.clearCache();h=h.next}if(!s)break;var d=(t=s).currentStyle,p=void 0;if("absolute"===d[t0]?d[e0][1]!==r0||d[Jf][1]!==r0&&d[Qf][1]!==r0||(p=!0):d[e0][1]===r0&&(p=!0),!p)break;if(t.__resizeY(i,n0),t.clearCache(),t===e)break}for(;n;)n.clearCache(!0),n=n.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMarginTB:function(t,e){var r=0,i=t[0],o=t[0];return t.forEach(function(t){r+=t,i=Math.max(i,t),o=Math.min(o,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),o=Math.min(o,t)}),(e=0)<i&&0<o?e=Math.max(i,o)-r:i<0&&o<0?e=Math.min(i,o)-r:0===i&&0===o||(e=i+o-r),e}},Jt=v.STYLE_KEY,s0=Jt.POSITION,h0=Jt.DISPLAY,l0=Jt.FONT_WEIGHT,c0=Jt.MARGIN_LEFT,u0=Jt.MARGIN_TOP,_0=Jt.MARGIN_RIGHT,f0=Jt.MARGIN_BOTTOM,d0=Jt.PADDING_LEFT,p0=Jt.PADDING_BOTTOM,g0=Jt.PADDING_RIGHT,m0=Jt.PADDING_TOP,v0=Jt.BORDER_TOP_WIDTH,y0=Jt.BORDER_BOTTOM_WIDTH,x0=Jt.BORDER_RIGHT_WIDTH,E0=Jt.BORDER_LEFT_WIDTH,b0=Jt.TOP,M0=Jt.RIGHT,T0=Jt.BOTTOM,A0=Jt.LEFT,O0=Jt.WIDTH,R0=Jt.HEIGHT,w0=Jt.TEXT_ALIGN,S0=Jt.FLEX_DIRECTION,I0=Jt.FLEX_BASIS,C0=Jt.FLEX_SHRINK,k0=Jt.FLEX_GROW,L0=Jt.ALIGN_SELF,D0=Jt.ALIGN_ITEMS,N0=Jt.JUSTIFY_CONTENT,P0=Jt.Z_INDEX,F0=Jt.WHITE_SPACE,B0=Jt.LINE_HEIGHT,Y0=Jt.LINE_CLAMP,H0=Jt.ORDER,G0=Jt.FLEX_WRAP,W0=Jt.ALIGN_CONTENT,U0=Jt.OVERFLOW,X0=Jt.FONT_SIZE,Y=v.NODE_KEY,V0=Y.NODE_CURRENT_STYLE,K0=Y.NODE_STYLE,z0=Y.NODE_STRUCT,j0=Y.NODE_DOM_PARENT,$0=Y.NODE_IS_INLINE,ee=v.UPDATE_KEY,Z0=ee.UPDATE_NODE,q0=ee.UPDATE_FOCUS,J0=ee.UPDATE_ADD_DOM,Q0=ee.UPDATE_CONFIG,t1=ee.UPDATE_MEASURE,pt=v.STRUCT_KEY,e1=pt.STRUCT_NUM,r1=pt.STRUCT_LV,i1=pt.STRUCT_TOTAL,o1=pt.STRUCT_CHILD_INDEX,n1=pt.STRUCT_INDEX,a1=w.AUTO,s1=w.PX,h1=w.PERCENT,l1=w.REM,c1=w.VW,u1=w.VH,_1=w.VMAX,f1=w.VMIN,d1=Mo.calAbsolute,p1=Mo.isRelativeOrAbsolute;function g1(t){var i,o,n=[],a={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof Bs?t.shadowRoot:t)instanceof Hf&&t.isMask?void 0!==o?a[o].push(t):e&&(s[o=e-1].__iIndex=o,a[o]=[t],i=!0):(o=void 0,t instanceof Hf?(r.__zIndex=t.currentStyle[P0],p1(t)&&(r.__aIndex=!0)):r.__zIndex=0,n.push(r),r.__iIndex=e)}),n.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=n.length-1;0<=e;e--){var r=n[e].__iIndex;a.hasOwnProperty(r)&&n.splice.apply(n,[e+1,0].concat(d(a[r])))}return n}function m1(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof Bs&&(t=t.shadowRoot),r.__order=t instanceof Hf?t.currentStyle[H0]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}var v1=function(){t(u,Hf);var o=e(u);function u(t,e,r){_(this,u);var i,e=a(i=o.call(this,t,e)).style;e.display&&{flex:!0,block:!0,inline:!0,inlineBlock:!0,"inline-block":!0,none:!0}.hasOwnProperty(e.display)||(Zf.INLINE.hasOwnProperty(i.tagName)?e.display="inline":e.display="block"),!e[l0]&&Zf.BOLD.hasOwnProperty(t)&&(e.fontWeight=700),i.__style=Mo.normalize(e,fr.DOM_ENTRY_SET),i.__currentStyle=fe.extend({},i.__style),i.__children=r||[],i.__flexLine=[];r=i.__config;return r[V0]=i.__currentStyle,r[K0]=i.__style,i}return f(u,[{key:"__structure",value:function(r,i,t){var e=P(N(u.prototype),"__structure",this).call(this,r++,i,t),o=[e],n=this.__zIndexChildren=this.__zIndexChildren||g1(this);n.forEach(function(t,e){e=t.__structure(r,i+1,e);Array.isArray(e)?(r+=e.length,o=o.concat(e)):(r++,o.push(e))});t=o.length-1;return e[e1]=n.length,e[i1]=t,o}},{key:"__modifyStruct",value:function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.__config,o=i[z0],n=o[i1]||0,a=this.__structure(o[n1],o[r1],o[o1]);(e=t.__structs).splice.apply(e,[o[n1]+r,n+1].concat(d(a)));a=0;return this!==t&&(a=((o=i[z0])[i1]||0)-n,(i=i[j0].__config[z0])[i1]=i[i1]||0,i[i1]+=a),[o,a]}},{key:"__updateStruct",value:function(t){var e=this.__config[z0],r=e[n1],e=e[i1],i=void 0===e?0:e,e=this.__zIndexChildren=g1(this);if(1!==e.length){e.forEach(function(t,e){t.__config[z0][o1]=e});for(var o,n=[],a=[],s=r+1;s<=r+i;s++){var h=t[s],l={child:h,list:t.slice(h[n1],h[n1]+h[i1]+1)};n.push(l),a.push(l),s+=h[i1]||0}n.sort(function(t,e){return t.child[o1]-e.child[o1]});for(var c,u=0,_=a.length;u<_;u++)if(a[u]!==n[u]){o=!0;break}o&&(c=[],n.forEach(function(t){c=c.concat(t.list)}),c.forEach(function(t,e){t[n1]=r+e+1}),t.splice.apply(t,[r+1,i].concat(d(c))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,i=this.currentStyle,o=i[h0],n=i[O0],a=i[c0],s=i[_0],h=i[d0],l=i[g0],c=i[E0],i=i[x0];if("inline"===o)r.length&&((o=(o=r[0])instanceof Bs?o.shadowRoot:o)instanceof Hf?t=o.__tryLayInline(t,e):t-=o.firstCharWidth);else{if(n[1]===s1)t-=n[0];else if(n[1]===h1)t-=e*n[0]*.01;else if(n[1]===l1)t-=n[0]*this.root.computedStyle[X0];else if(n[1]===c1)t-=n[0]*this.root.width*.01;else if(n[1]===u1)t-=n[0]*this.root.height*.01;else if(n[1]===_1)t-=n[0]*Math.max(this.root.width,this.root.height)*.01;else if(n[1]===f1)t-=n[0]*Math.min(this.root.width,this.root.height)*.01;else for(var u=0;u<r.length;u++){if(t<0)return t;var _=r[u];(_=_ instanceof Bs?_.shadowRoot:_)instanceof Hf?t=_.__tryLayInline(t,e):t-=_.textWidth}s[1]===s1?t-=s[0]:s[1]===h1?t-=s[0]*e*.01:s[1]===l1?t-=s[0]*this.root.computedStyle[X0]:s[1]===c1?t-=s[0]*this.root.width*.01:s[1]===u1?t-=s[0]*this.root.height*.01:s[1]===_1?t-=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===f1&&(t-=s[0]*Math.min(this.root.width,this.root.height)*.01),l[1]===s1?t-=l[0]:l[1]===h1?t-=l[0]*e*.01:l[1]===l1?t-=l[0]*this.root.computedStyle[X0]:l[1]===c1?t-=l[0]*this.root.width*.01:l[1]===u1?t-=l[0]*this.root.height*.01:l[1]===_1?t-=l[0]*Math.max(this.root.width,this.root.height)*.01:l[1]===f1&&(t-=l[0]*Math.min(this.root.width,this.root.height)*.01),i[1]===s1?t-=i[0]:i[1]===l1?t-=i[0]*this.root.computedStyle[X0]:i[1]===c1?t-=i[0]*this.root.width*.01:i[1]===u1?t-=i[0]*this.root.height*.01:i[1]===_1?t-=i[0]*Math.max(this.root.width,this.root.height)*.01:i[1]===f1&&(t-=i[0]*Math.min(this.root.width,this.root.height)*.01)}return a[1]===s1?t-=a[0]:a[1]===h1?t-=a[0]*e*.01:a[1]===l1?t-=a[0]*this.root.computedStyle[X0]:a[1]===c1?t-=a[0]*this.root.width*.01:a[1]===u1?t-=a[0]*this.root.height*.01:a[1]===_1?t-=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===f1&&(t-=a[0]*Math.min(this.root.width,this.root.height)*.01),h[1]===s1?t-=h[0]:h[1]===h1?t-=h[0]*e*.01:h[1]===l1?t-=h[0]*this.root.computedStyle[X0]:h[1]===c1?t-=h[0]*this.root.width*.01:h[1]===u1?t-=h[0]*this.root.height*.01:h[1]===_1?t-=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===f1&&(t-=h[0]*Math.min(this.root.width,this.root.height)*.01),c[1]===s1?t-=c[0]:c[1]===l1?t-=c[0]*this.root.computedStyle[X0]:c[1]===c1?t-=c[0]*this.root.width*.01:c[1]===u1?t-=c[0]*this.root.height*.01:c[1]===_1?t-=c[0]*Math.max(this.root.width,this.root.height)*.01:c[1]===f1&&(t-=c[0]*Math.min(this.root.width,this.root.height)*.01),t}},{key:"__offsetX",value:function(e,r,i){P(N(u.prototype),"__offsetX",this).call(this,e,r,i),r&&!this.__config[$0]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){P(N(u.prototype),"__offsetY",this).call(this,e,r,i),r&&!this.__config[$0]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calMinMax",value:function(n,t){Mo.computeReflow(this,this.isShadowRoot);var i,a,s,h,l,c=0,u=0,e=this.flowChildren,r=this.currentStyle,o=this.computedStyle,_=t.x,f=t.y,d=t.w,p=t.h,g=t.lineBoxManager,m=r[h0],v=r[S0],y=r[O0],t=r[R0],x=o[B0],t=n?y:t;return t[1]===s1?c=u=t[0]:t[1]===l1?c=u=t[0]*this.root.computedStyle[X0]:t[1]===c1?c=u=t[0]*this.root.width*.01:t[1]===u1?c=u=t[0]*this.root.height*.01:t[1]===_1?c=u=t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===f1?c=u=t[0]*Math.min(this.root.width,this.root.height)*.01:"flex"===m?(i="column"!==v,(e=m1(e)).forEach(function(t){var e,r;t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf?(e=t.currentStyle,r=t.computedStyle,"block"!==e[h0]&&"flex"!==e[h0]&&(e[h0]=r[h0]="block"),e=Qt(t.__calMinMax(n,{x:_,y:f,w:d,h:p}),2),e=(r=Qt(e[1],2))[0],r=r[1],n?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):n?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new $f(_,f,x,Mo.getBaseLine(o)),t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):"block"===m?(s=a=0,h=new $f(_,f,x,Mo.getBaseLine(o)),l=e.length,e.forEach(function(t,e){var r,i,o;t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf?(r=(i=Qt(t.__calMinMax(n,{x:_,y:f,w:d,h:p,lineBoxManager:h}),2))[0],i=(o=Qt(i[1],2))[0],o=o[1],"block"!==r&&"flex"!==r||!h.isEnd||(h.setNotEnd(),h.setNewLine()),n?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,o),a=s=0):(a+=i,s+=o,c=Math.max(c,a),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=a,u+=s,a=s=0,c+=i,u+=o):(a=Math.max(a,i),s=Math.max(s,o),e===l-1&&(c+=a,u+=s))):n?(a+=t.charWidth,s+=t.textWidth,c=Math.max(c,a),u=Math.max(u,s)):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:h}),a=Math.max(a,t.height),s=Math.max(s,t.height),e===l-1&&(c+=a,u+=s))})):("inlineBlock"!==m&&"inline-block"!==m||(g=new $f(_,f,x,Mo.getBaseLine(o))),e.forEach(function(t){var e,r;t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf?(e=Qt(t.__calMinMax(n,{x:_,y:f,w:d,h:p,lineBoxManager:g}),2),e=(r=Qt(e[1],2))[0],r=r[1],n?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r))):n?(c+=t.charWidth,u+=t.textWidth):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:g}),c=Math.max(c,t.height),u=Math.max(u,t.height))})),[m,this.__addMp(n,d,r,[c,u])]}},{key:"__calBasis",value:function(n,t,e){Mo.computeReflow(this,this.isShadowRoot);var r,i,a,s,h,l,o=0,c=0,u=0,_=this.flowChildren,f=this.currentStyle,d=this.computedStyle,p=t.x,g=t.y,m=t.w,v=t.h,y=f[h0],x=f[S0],E=f[O0],b=f[R0],M=f[I0],T=d[B0],A=n?E:b,t=M[1]===a1,E=-1<[s1,h1,l1,c1,u1,_1,f1].indexOf(M[1]),b=!t&&!E;return E?M[1]===s1?o=r=M[0]:M[1]===h1?o=r=(n?m:v)*M[0]*.01:M[1]===l1?o=r=M[0]*this.root.computedStyle[X0]:M[1]===c1?o=r=M[0]*this.root.width*.01:M[1]===u1?o=r=M[0]*this.root.height*.01:M[1]===_1?o=r=M[0]*Math.max(this.root.width,this.root.height)*.01:M[1]===f1&&(o=r=M[0]*Math.min(this.root.width,this.root.height)*.01):-1<[s1,h1,l1,c1,u1,_1,f1].indexOf(A[1])&&t?A[1]===s1?o=r=A[0]:A[1]===h1?o=r=.01*A[0]*(n?m:v):A[1]===l1?o=r=A[0]*this.root.computedStyle[X0]:A[1]===c1?o=r=A[0]*this.root.width*.01:A[1]===u1?o=r=A[0]*this.root.height*.01:A[1]===_1?o=r=A[0]*Math.max(this.root.width,this.root.height)*.01:A[1]===f1&&(o=r=A[0]*Math.min(this.root.width,this.root.height)*.01):t&&(b=!0),"flex"===y?(i="column"!==x,(_=m1(_)).forEach(function(t){var e,r;t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf?(e=t.currentStyle,r=t.computedStyle,"block"!==e[h0]&&"flex"!==e[h0]&&(e[h0]=r[h0]="block"),e=Qt(t.__calMinMax(n,{x:p,y:g,w:m,h:v}),2),e=(r=Qt(e[1],2))[0],r=r[1],n?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):n?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new $f(p,g,T,Mo.getBaseLine(d)),t.__layout({x:p,y:g,w:m,h:v,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):(s=a=0,h=this.__lineBoxManager=new $f(p,g,T,Mo.getBaseLine(d)),l=_.length,_.forEach(function(t,e){var r,i,o;t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf?(r=(i=Qt(t.__calMinMax(n,{x:p,y:g,w:m,h:v,lineBoxManager:h}),2))[0],i=(o=Qt(i[1],2))[0],o=o[1],"block"!==r&&"flex"!==r||!h.isEnd||(h.setNotEnd(),h.setNewLine()),n?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,o),a=s=0):(a+=i,s+=o,c=Math.max(c,a),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=a,u+=s,a=s=0,c+=i,u+=o):(a=Math.max(a,i),s=Math.max(s,o),e===l-1&&(c+=a,u+=s))):n?(a+=t.charWidth,s+=t.textWidth,c=Math.max(c,a),u=Math.max(u,s)):(t.__layout({x:p,y:g,w:m,h:v,lineBoxManager:h}),a=Math.max(a,t.height),s=Math.max(s,t.height),e===l-1&&(c+=a,u+=s))})),r&&(u=Math.max(r,u)),b&&(o=u),this.__addMp(n,m,f,[o,c,u],!0)}},{key:"__layoutNone",value:function(){P(N(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(_,f){var d=this.flowChildren,t=this.currentStyle,e=this.computedStyle,r=this.__preLayout(_),i=r.fixedWidth,o=r.fixedHeight,p=r.x,g=r.y,m=r.w,v=r.h;if(i&&f)return this.__width=m,void this.__ioSize(m,this.height);var n=e[w0],y=e[F0],x=e[Y0],r=e[B0],x=x||0,E=0,b=this.__lineBoxManager=new $f(p,g,r,Mo.getBaseLine(e)),M=0,T=0,A=[],O=[],R=d.length;d.forEach(function(t,e){var r,i,o,n,a,s,h=t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf,l=h&&"inline"===t.currentStyle[h0],c=h&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[h0]),u="img"===t.tagName;h&&!l&&!c||(A.length&&O.length&&((n=a0.getMergeMarginTB(O,A))&&(g+=n)),O=[],A=[]),h?c||l?p===_.x||l&&"nowrap"===y?(t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(M=Math.max(M,T),T=t.outerWidth,M=Math.max(M,T))):(-1e-10<=t.__tryLayInline(m+_.x-p,m)?(t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),(c||u)&&b.addItem(t),p=b.lastX,g=b.lastY):(E++,p=_.x,g=b.endY,b.setNewLine(),E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(M=Math.max(M,T),T=0)),f&&(T+=t.outerWidth,M=Math.max(M,T))):(p!==_.x&&d[e-1]instanceof ls&&E++,p=_.x,b.isEnd&&(g=b.endY,b.setNotEnd(),b.setNewLine()),t.__layout({x:p,y:g,w:m,h:v},f),!(r="none"===t.currentStyle[h0])&&t.flowChildren&&0===t.flowChildren.length&&(o=(a=t.computedStyle)[u0],n=a[f0],h=a[m0],l=a[p0],c=a[R0],u=a[v0],a=a[y0],h<=0&&l<=0&&c<=0&&u<=0&&a<=0&&(A.push(n),O.push(o),i=!0)),g+=t.outerHeight,b.__lastY=g,f&&(M=Math.max(M,t.outerWidth),T=0),r||i?e!==R-1||(s=a0.getMergeMarginTB(O,A))&&(g+=s):(s=(e=t.computedStyle)[u0],e=e[f0],A.length&&(O.push(s),(s=a0.getMergeMarginTB(O,A))&&(t.__offsetY(s,!0),g+=s)),O=[],A=[e])):x&&x<=E||(p===_.x||"nowrap"===y?(E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),p=b.lastX,g=b.lastY,f&&(M=Math.max(M,T),T=t.width,M=Math.max(M,T))):(-1e-10<=t.__tryLayInline(m-p+_.x)?(E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),p=b.lastX,g=b.lastY):(E++,p=_.x,g=b.endY,b.setNewLine(),E=t.__layout({x:p,y:g,w:m,h:v,lx:_.x,lineBoxManager:b,lineClamp:x,lineClampCount:E},f),p=b.lastX,g=b.lastY,f&&(M=Math.max(M,t.width),T=0)),f&&(T+=t.width,M=Math.max(M,T))))}),b.isEnd&&(g=b.endY);var a=this.__width=i||!f?m:M,o=this.__height=o?v:g-_.y;this.__ioSize(a,o),f||(b.verticalAlign(),-1<["center","right"].indexOf(n)&&(b.horizonAlign(a,n),d.forEach(function(t){(t=t instanceof Bs?t.shadowRoot:t)instanceof ls&&t.__inlineSize()})),b.domList.forEach(function(t){t.__inlineSize(a,n)}),this.__marginAuto(t,_))}},{key:"__layoutFlex",value:function(r,h){var o=this,t=this.flowChildren,e=this.currentStyle,l=this.computedStyle,n=this.__flexLine,i=this.__preLayout(r),a=i.fixedWidth,s=i.fixedHeight,c=i.x,u=i.y,_=i.w,f=i.h;if(a&&h)return this.__width=_,void this.__ioSize(_,this.height);n.splice(0);var d=l[S0],p=l[N0],g=l[D0],m=l[Y0],v=l[G0],i=l[W0],y=l[B0],x=l[w0],m=m||0,E=0,b=-1===["column","column-reverse","columnReverse"].indexOf(d),M=[],T=[],A=[],O=[],R=[],w=m1(t);if(w.forEach(function(t){var e,r,i,o,n,a,s;t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf?(n=t.currentStyle,e=t.computedStyle,"block"!==n[h0]&&"flex"!==n[h0]&&(n[h0]=e[h0]="block"),r=(o=Qt(t.__calBasis(!!h||b,{x:c,y:u,w:_,h:f},h),3))[0],a=o[1],i=o[2],h?b?E+=i:E=Math.max(E,i):(o=n[k0],n=n[C0],e[I0]=r,M.push(o),T.push(n),A.push(r),O.push(i),R.push(a))):h?b?E+=t.textWidth:E=Math.max(E,t.textWidth):(M.push(0),T.push(1),b?(s=t.charWidth,a=t.textWidth,A.push(a),O.push(a),R.push(s)):(s=new $f(c,u,y,Mo.getBaseLine(l)),t.__layout({x:c,y:u,w:_,h:void 0,lineBoxManager:s,lineClamp:m,lineClampCount:0}),t=t.height,A.push(t),R.push(t)))}),h){t=this.__width=Math.min(E,_);this.__ioSize(t,this.height)}else{var S=b?_:f,I="wrap"===v||-1<["wrap-reverse","wrapReverse"].indexOf(v),C=[],k=0,L=[];A.forEach(function(t,e){var r=R[e],i=O[e],t=t<r?r:i<t?i:t;L.push(t),I?S<k+t?k=k?(n.push(C),C=[w[e]],t):(C.push(w[e]),n.push(C),C=[],0):(C.push(w[e]),k+=t):C.push(w[e])}),C.length&&n.push(C);var D=0,N={x:c,y:u,w:_,h:f},P=[];n.forEach(function(t){var e=t.length,r=D+e,i=Qt(o.__layoutFlexLine(N,b,S,a,s,m,0,y,l,p,g,w.slice(D,r),t,x,M.slice(D,r),T.slice(D,r),A.slice(D,r),L.slice(D,r),R.slice(D,r)),3),t=i[0],r=i[1],i=i[2];b?N.y=r:N.x=t,c=Math.max(c,t),u=Math.max(u,r),P.push(i),D+=e});var F=this.__width=_,B=this.__height=s?f:u-r.y;this.__ioSize(F,B),"row-reverse"===d||"rowReverse"===d?n.forEach(function(t){t.forEach(function(t){var e=F-t.outerWidth-2*(t.x-r.x);e&&t.__offsetX(e,!0)})}):"column-reverse"!==d&&"columnReverse"!==d||n.forEach(function(t){t.forEach(function(t){var e=B-t.outerHeight-2*(t.y-r.y);e&&t.__offsetY(e,!0)})});var Y,H,G,W,U,d=n.length;if(-1<["wrapReverse","wrap-reverse"].indexOf(v)&&1<d){var X=0,V=[];P.forEach(function(t){V.push(X),X+=t});for(var K=0,z=d-1;0<=z;z--)!function(t){var e=n[t],r=V[t],i=K-r;i&&e.forEach(function(t){b?t.__offsetY(i,!0):t.__offsetX(i,!0)}),K+=P[t]}(z);n.reverse()}!h&&1<d&&(s&&b||!b)&&(0<(H=b?B-(u-r.y):F-(c-r.x))&&("center"===i?(G=.5*H,w.forEach(function(t){b?t.__offsetY(G,!0):t.__offsetX(G,!0)})):"flex-start"===i||"flexStart"===i||("flex-end"===i||"flexEnd"===i?w.forEach(function(t){b?t.__offsetY(H,!0):t.__offsetX(H,!0)}):"space-between"===i||"spaceBetween"===i?(W=H/(d-1),n.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(W,!0):t.__offsetX(W,!0)})})):"space-around"===i||"spaceAround"===i?(U=H/(d+1),n.forEach(function(t,e){t.forEach(function(t){b?t.__offsetY(U*(e+1),!0):t.__offsetX(U*(e+1),!0)})})):(Y=H/d,n.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(Y*e,!0):t.__offsetX(Y*e,!0)})}))))),h||(1<d?n.forEach(function(t,e){e=P[e];Y&&(e+=Y),o.__crossAlign(t,g,b,e)}):d&&(d=P[0],b?s&&(d=f):d=_,this.__crossAlign(n[0],g,b,d))),this.__marginAuto(e,r)}}},{key:"__layoutFlexLine",value:function(t,i,e,r,o,n,a,s,h,l,c,u,_,f,d,p,g,m,v){var y=this,x=t.x,E=t.y,b=t.w,M=t.h,T=0;m.forEach(function(t){T+=t});var A=e<=T,O=[];g.forEach(function(t,e){A?(!p[e]||g[e]<m[e])&&(O[e]=m[e]):(!d[e]||g[e]>m[e])&&(O[e]=m[e])});var R=0;g.forEach(function(t,e){void 0!==O[e]?R+=O[e]:R+=t});var e=1/0,e=i?b:o?M:R,R=Math.abs(e-R),w=0;(A?function(){for(var i=p.map(function(t,e){if(void 0===O[e]){e=t*g[e];return w+=e,e}});;){w<1&&(R*=w);var o=void 0,n=0;if(i.forEach(function(t,e){var r;t&&(r=t/w*R,(r=g[e]-r)<v[e]?(O[e]=v[e],i[e]=0,o=!0,R-=g[e]-v[e]):(O[e]=r,n+=t))}),!o)break;w=n}}:function(){for(var i=d.map(function(t,e){if(void 0===O[e])return w+=t,t});;){w<1&&(R*=w);var o=void 0,n=0;if(i.forEach(function(t,e){var r;t&&(r=t/w*R,(r=g[e]+r)<v[e]?(O[e]=v[e],i[e]=0,o=!0,R-=g[e]-v[e]):(O[e]=r,n+=t))}),!o)break;w=n}})();var S=0,I=[];u.forEach(function(t,e){var r=O[e];t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf?i?t.__layout({x:x,y:E,w:r,h:M,w3:r}):t.__layout({x:x,y:E,w:b,h:r,h3:r}):(e=y.__lineBoxManager=new $f(x,E,s,Mo.getBaseLine(h)),I.push(e),t.__layout({x:x,y:E,w:i?r:b,h:i?M:r,lineBoxManager:e,lineClamp:n,lineClampCount:a})),S=i?(x+=t.outerWidth,Math.max(S,t.outerHeight)):(E+=t.outerHeight,Math.max(S,t.outerWidth))});var C=i?b-x+t.x:M-E+t.y;if(0<C){var k=u.length;if("flexEnd"===l||"flex-end"===l)for(var L=0;L<k;L++){var D=u[L];i?D.__offsetX(C,!0):D.__offsetY(C,!0)}else if("center"===l)for(var N=.5*C,P=0;P<k;P++){var F=u[P];i?F.__offsetX(N,!0):F.__offsetY(N,!0)}else if("spaceBetween"===l||"space-between"===l)for(var B=C/(k-1),Y=1;Y<k;Y++){var H=u[Y];i?H.__offsetX(B*Y,!0):H.__offsetY(B*Y,!0)}else if("spaceAround"===l||"space-around"===l)for(var G=C/(k+1),W=0;W<k;W++){var U=u[W];i?U.__offsetX(G*(W+1),!0):U.__offsetY(G*(W+1),!0)}}return i?E+=S:x+=S,-1<["center","right"].indexOf(f)&&I.forEach(function(t){t.horizonAlign(t.width,f)}),[x,E,S]}},{key:"__crossAlign",value:function(t,w,S,I){var C=0;t.forEach(function(t){C=Math.max(C,t.firstBaseLine)}),t.forEach(function(t){var e,r,i,o,n,a,s,h,l,c,u,_,f,d,p,g,m,v,y,x,E,b,M,T,A,O,R=t.currentStyle[L0];S?"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(a=I-t.outerHeight)&&t.__offsetY(a,!0):"center"===R?0!=(s=I-t.outerHeight)&&t.__offsetY(.5*s,!0):"stretch"===R?(e=t.computedStyle,h=t.currentStyle[R0],r=e[v0],i=e[y0],o=e[u0],n=e[f0],a=e[m0],s=e[p0],h[1]===a1&&(h=t.height,h=(t.__height=e[R0]=I-o-n-a-s-r-i)-h,t.__sy4+=h,t.__sy5+=h,t.__sy6+=h,t.__height+=h,t.__clientHeight+=h,t.__offsetHeight+=h,t.__outerHeight+=h)):"baseline"===R?0!=(c=C-t.firstBaseLine)&&t.__offsetY(c,!0):"flexStart"===w||"flex-start"===R||("center"===w?0!=(u=I-t.outerHeight)&&t.__offsetY(.5*u,!0):"flexEnd"===w||"flex-end"===w?0!=(_=I-t.outerHeight)&&t.__offsetY(_,!0):"baseline"===w?0!=(l=C-t.firstBaseLine)&&t.__offsetY(l,!0):(f=t.computedStyle,u=(c=t.currentStyle)[h0],_=c[S0],l=c[R0],S&&"flex"===u&&"column"===_&&l[1]===a1&&t.outerHeight<I&&t.__layout(Object.assign(t.__layoutData,{h3:I})),d=f[v0],p=f[y0],c=f[u0],u=f[f0],_=f[m0],f=f[p0],l[1]===a1&&(g=t.height,t.__sy4+=m=I-c-u-_-f-d-p-g,t.__sy5+=m,t.__sy6+=m,t.__height+=m,t.__clientHeight+=m,t.__offsetHeight+=m,t.__outerHeight+=m)))):"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(v=I-t.outerWidth)&&t.__offsetX(v,!0):"center"===R?0!=(y=I-t.outerWidth)&&t.__offsetX(.5*y,!0):"stretch"===R?(f=t.computedStyle,d=t.currentStyle[O0],p=f[x0],x=f[E0],g=f[_0],m=f[c0],v=f[g0],y=f[d0],d[1]===a1&&(O=t.width,E=(t.__width=f[O0]=I-m-g-y-v-p-x)-O,t.__sx4+=E,t.__sx5+=E,t.__sx6+=E,t.__width+=E,t.__clientWidth+=E,t.__offsetWidth+=E,t.__outerWidth+=E)):"baseline"===w?0!=(b=C-t.firstBaseLine)&&t.__offsetX(b,!0):"flexStart"===w||"flex-start"===R||("center"===w?0!=(M=I-t.outerWidth)&&t.__offsetX(.5*M,!0):"flexEnd"===w||"flex-end"===w?0!=(T=I-t.outerWidth)&&t.__offsetX(T,!0):"baseline"===w?0!=(A=C-t.firstBaseLine)&&t.__offsetX(A,!0):(x=t.computedStyle,O=t.currentStyle[O0],E=x[x0],b=x[E0],R=x[_0],M=x[c0],T=x[g0],A=x[d0],O[1]===a1&&(O=t.width,O=(t.__width=x[O0]=I-M-R-A-T-E-b)-O,t.__sx4+=O,t.__sx5+=O,t.__sx6+=O,t.__width+=O,t.__clientWidth+=O,t.__offsetWidth+=O,t.__outerWidth+=O))))})}},{key:"__layoutInline",value:function(t,s,h){var e=this.flowChildren,r=this.currentStyle,i=this.computedStyle,o=this.__preLayout(t,h),n=o.fixedWidth,a=o.fixedHeight,l=o.x,c=o.y,u=o.w,_=o.h,f=o.lx,d=o.lineBoxManager,p=o.nowrap,g=o.endSpace,m=o.selfEndSpace;if(n&&s)return this.__width=u,void this.__ioSize(u,this.height);var v=r[O0],y=i[w0],x=i[F0],E=i[Y0],b=i[B0],M=i[c0],T=i[_0],A=i[E0],O=i[x0],o=i[d0],r=i[g0],R=t.lineClampCount||0;(h=h&&!this.__isRealInline()?!1:h)?(this.__config[$0]=!0,this.__lineBoxManager=d,w=Mo.getBaseLine(i),(M||T||o||r||A||O)&&d.isNewLine?d.genLineBoxByInlineIfNewLine(l,c,b,w):d.setLbByInlineIfNotNewLine(b,w),E=t.lineClamp||0):(d=this.__lineBoxManager=new $f(l,c,b,Mo.getBaseLine(i)),f=l,g=m=R=0),h&&(this.__contentBoxList=[],d.pushContentBoxList(this));var w,S,I,C=!1,k=e.length;return e.forEach(function(t,e){var r=t instanceof Hf||t instanceof Bs&&t.shadowRoot instanceof Hf,i=r&&"inline"===t.currentStyle[h0],o=r&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[h0]),n=r&&t.__isRealInline(),a=h&&e===k-1;a&&(g+=m),r?(i||o||(t.currentStyle[h0]=t.computedStyle[h0]="inlineBlock",o=!0,Ne.warn("Inline can not contain block/flex")),l===f||!e||i&&"nowrap"===x?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),t.__isIbFull?(o&&u[1]===a1&&(C=!0),d.addItem(t),l=f,c+=t.outerHeight,d.setNotEnd()):(!o&&n||d.addItem(t),l=d.lastX,c=d.lastY)):-1e-10<=("nowrap"===x?0:t.__tryLayInline(u-l+f,u-(a?g:0)))?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,nowrap:"nowrap"===x,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),!o&&n||d.addItem(t),l=d.lastX,c=d.lastY):(i&&R++,l=f,c=d.endY,d.setNewLine(),R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),t.__isIbFull?(d.addItem(t),l=f,c+=t.outerHeight,d.setNotEnd()):(!o&&n||d.addItem(t),l=d.lastX,c=d.lastY))):(o=d.size,l!==f&&e&&"nowrap"!==x?(e=(n=!e&&p||"nowrap"===x)?0:t.__tryLayInline(u+f-l),!n&&0<=e&&a&&g&&1===t.content.length&&((a=e-g)<0&&(e=a)),-1e-10<=e?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),l=d.lastX,c=d.lastY):(R++,l=f,c=d.endY,d.setNewLine(),R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),l=d.lastX,c=d.lastY,!h&&1<d.size-o&&v[1]===a1&&(C=!0))):(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:E,lineClampCount:R},s),l=d.lastX,c=d.lastY,!h&&1<d.size-o&&v[1]===a1&&(C=!0)))}),c=d.endY,this.__isIbFull=C,h?(m&&d.addX(m),e.length||(w=i[c0],b=i[d0],S=i[E0],d.addX(w+b+S)),d.popContentBoxList(),s&&this.__inlineSize()):(S=d.__maxX-t.x,I=this.__width=n?u:C?Math.max(u,S):S,t=this.__height=a?_:c-t.y,this.__ioSize(I,t)),s||h||(d.verticalAlign(),-1<["center","right"].indexOf(y)&&(d.horizonAlign(I,y),e.forEach(function(t){(t=t instanceof Bs?t.shadowRoot:t)instanceof ls&&t.__inlineSize()})),d.domList.forEach(function(t){t.__inlineSize(I,y)})),h?R:0}},{key:"__inlineSize",value:function(t,e){var r,i,o,n,a,s,h,l,c,u,_,f,d,p,g,m,v=this.contentBoxList,y=this.computedStyle,x=this.__ox,E=this.__oy,b=y[u0],M=y[_0],T=y[f0],A=y[c0],O=y[m0],R=y[g0],w=y[p0],S=y[d0],I=y[v0],C=y[x0],k=y[y0],L=y[E0],D=y[B0],N=v.length;N?(v.forEach(function(t,e){e?(o=Math.min(o,t.x),h=Math.min(h,t.x),_=Math.min(_,t.x),g=Math.min(g,t.x),e===N-1?(r=a=c=d=Math.max(r,t.x+t.outerWidth),i=s=u=p=Math.max(i,t.y+t.outerHeight),a+=R,s+=w,c+=R+C,u+=w+k,d+=C+R+M,p+=k+w+T):r=a=c=d=Math.max(r,t.x+t.outerWidth)):(o=t.x,n=t.y,g=(_=(h=o-S)-L)-A,m=(f=(l=n-O)-I)-b,r=a=c=d=t.x+t.outerWidth,i=s=u=p=t.y+t.outerHeight,e===N-1&&(a+=R,s+=w,c+=R+C,u+=w+k,d+=C+R+M,p+=k+w+T))}),this.__x=g,this.__y=m,this.__width=y[O0]=r-o,this.__height=y[R0]=Math.max(D,i-n),this.__clientWidth=a-h,this.__clientHeight=s-l,this.__offsetWidth=c-_,this.__offsetHeight=u-f,this.__outerWidth=d-g,this.__outerHeight=p-m,this.__sx=g+x,this.__sy=m+E,this.__sx1=_+x,this.__sy1=f+E,this.__sx2=h+x,this.__sy2=l+E,this.__sx3=o+x,this.__sy3=n+E,this.__sx4=r+x,this.__sy4=i+E,this.__sx5=a+x,this.__sy5=s+E,this.__sx6=c+x,this.__sy6=u+E,-1<["center","right"].indexOf(e)&&this.children.forEach(function(t){t instanceof ls&&t.__inlineSize()})):(-1<["center","right"].indexOf(e)&&(t=t,"center"===e&&(t*=.5),t&&this.__offsetX(t,!0)),this.__width=y[O0]=0,D=this.__height=y[R0]=D,this.__ioSize(0,D),this.__sy-=b+O+I,this.__sx1=this.sx+A,this.__sy1=this.sy+b,this.__sx2=this.__sx1+L,this.__sy2=this.__sy1+I,this.__sx4=this.__sx3=this.__sx2+S,this.__sy4=this.__sy3=this.__sy2+O,this.__sx5=this.__sx4+R,this.__sy5=this.__sy4+D+w,this.__sx6=this.__sx5+C,this.__sy6=this.__sy5+k,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+A+M,this.__outerHeight=this.__offsetHeight+b+T)}},{key:"__layoutAbs",value:function(r,i,M){var T=this,A=r.sx,O=r.sy,R=r.clientWidth,w=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,o=this.children,n=this.absChildren,a=t[h0],s=t[v0],h=t[E0],l=t[u0],c=t[c0],S=t[d0],I=t[m0];e||"none"===a?this.__layoutNone():(A+=c+h,O+=l+s,n.forEach(function(t){if(M){var e=t;if(t instanceof Bs&&(e=t.shadowRoot),M!==e&&M!==t)return}var r=t.currentStyle,i=t.computedStyle;if("none"!==r[h0]){t.__mp(r,i,R),"block"!==r[h0]&&"flex"!==r[h0]&&(r[h0]=i[h0]="block");var o,n,a,s,h,l,c,u,_,f,d=r[A0],p=r[b0],g=r[M0],m=r[T0],v=r[O0],y=r[R0],x=r[h0],e=r[S0];if(d[1]!==a1?(_=!0,i[A0]=d1(r,"left",d,R,T.root)):i[A0]="auto",g[1]!==a1?(c=!0,i[M0]=d1(r,"right",g,R,T.root)):i[M0]="auto",p[1]!==a1?(l=!0,i[b0]=d1(r,"top",p,w,T.root)):i[b0]="auto",m[1]!==a1?(u=!0,i[T0]=d1(r,"bottom",m,w,T.root)):i[T0]="auto",_&&c?(o=A+i[A0],n=A+R-i[M0]-o):_?(o=A+i[A0],v[1]!==a1&&(n=v[1]===h1?v[0]*R*.01:v[1]===l1?v[0]*T.root.computedStyle[X0]:v[1]===c1?v[0]*T.root.width*.01:v[1]===u1?v[0]*T.root.height*.01:v[1]===_1?v[0]*Math.max(T.root.width,T.root.height)*.01:v[1]===f1?v[0]*Math.min(T.root.width,T.root.height)*.01:v[0])):c?(v[1]!==a1?n=v[1]===h1?v[0]*R*.01:v[1]===l1?v[0]*T.root.computedStyle[X0]:v[1]===c1?v[0]*T.root.width*.01:v[1]===u1?v[0]*T.root.height*.01:v[1]===_1?v[0]*Math.max(T.root.width,T.root.height)*.01:v[1]===f1?v[0]*Math.min(T.root.width,T.root.height)*.01:v[0]:s=!0,o=A+R-i[M0]-(n||0),o-=i[c0],o-=i[_0],o-=i[d0],o-=i[g0],o-=r[E0][0],o-=r[x0][0]):(o=A+S,v[1]!==a1&&(n=v[1]===h1?v[0]*R*.01:v[1]===l1?v[0]*T.root.computedStyle[X0]:v[1]===c1?v[0]*T.root.width*.01:v[1]===u1?v[0]*T.root.height*.01:v[1]===_1?v[0]*Math.max(T.root.width,T.root.height)*.01:v[1]===f1?v[0]*Math.min(T.root.width,T.root.height)*.01:v[0])),l&&u)E=O+i[b0],a=O+w-i[T0]-E;else if(l)E=O+i[b0],y[1]!==a1&&(a=y[1]===h1?y[0]*w*.01:y[1]===l1?y[0]*T.root.computedStyle[X0]:y[1]===c1?y[0]*T.root.width*.01:y[1]===u1?y[0]*T.root.height*.01:y[1]===_1?y[0]*Math.max(T.root.width,T.root.height)*.01:y[1]===f1?y[0]*Math.min(T.root.width,T.root.height)*.01:y[0]);else if(u)y[1]!==a1?a=y[1]===h1?y[0]*w*.01:y[1]===l1?y[0]*T.root.computedStyle[X0]:y[1]===c1?y[0]*T.root.width*.01:y[1]===u1?y[0]*T.root.height*.01:y[1]===_1?y[0]*Math.max(T.root.width,T.root.height)*.01:y[1]===f1?y[0]*Math.min(T.root.width,T.root.height)*.01:y[0]:h=!0,E=O+w-i[T0]-(a||0),E-=i[u0],E-=i[f0],E-=i[m0],E-=i[p0],E-=r[v0][0],E-=r[y0][0];else{for(var E=O+I,b=t.prev;b;){if(b instanceof ls||"absolute"!==b.computedStyle[s0]){E=b.y+b.outerHeight;break}b=b.prev}y[1]===h1?a=y[0]*w*.01:y[1]===l1?a=y[0]*T.root.computedStyle[X0]:y[1]===c1?a=y[0]*T.root.width*.01:y[1]===u1?a=y[0]*T.root.height*.01:y[1]===_1?a=y[0]*Math.max(T.root.width,T.root.height)*.01:y[1]===f1?a=y[0]*Math.min(T.root.width,T.root.height)*.01:y[1]===s1&&(a=y[0])}(("block"===x||-1<["inlineBlock","inline-block"].indexOf(x))&&void 0===n||"flex"===x&&(void 0===n||"column"===e&&void 0===a))&&(f=!0);x=s?o-A:R+A-o,e=h?E-O:w+O-E;f&&(t.__layout({x:o,y:E,w:x,h:e},!0,!0),x=t.outerWidth),t.__layout({x:o,y:E,w:x,h:e,w2:n,h2:a},!1,!0),s&&t.__offsetX(-t.outerWidth,!0),h&&t.__offsetY(-t.outerHeight,!0)}else t.__layoutNone()}),o.forEach(function(t){if(M){var e=t;if(t instanceof Bs&&(e=t.shadowRoot),M!==e&&M!==t)return}t instanceof u?t.__layoutAbs(p1(t)?t:r,i):t instanceof Bs&&((t=t.shadowRoot)instanceof u&&t.__layoutAbs(t,i))}),this.__execAr())}},{key:"__computeMeasure",value:function(e,r,i){P(N(u.prototype),"__computeMeasure",this).call(this,e,r,i),this.children.forEach(function(t){t.__computeMeasure(e,r,i)})}},{key:"render",value:function(t,e,r,i,o,n){n=P(N(u.prototype),"render",this).call(this,t,e,r,i,o,n);return t===rt.SVG&&(this.virtualDom.type="dom"),n}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),P(N(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return P(N(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,i=this.computedStyle,e=this.isMask;if(!(r||"none"===i[h0]||t.__stopPropagation||e)&&("hidden"!==i[U0]||this.willResponseEvent(t,!0))){var o,e=t.event.type,i=this.listener,n=this.zIndexChildren;i.hasOwnProperty(e)&&(o=i[e]);for(var a=n.length-1;0<=a;a--){var s=n[a];if((s instanceof Hf||s instanceof Bs&&s.shadowRoot instanceof Hf)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(fe.isFunction(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0)}return P(N(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){P(N(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(r,e){var i=this;if(!fe.isNil(r)&&!i.isDestroyed){var o,n=i.root,t=i.host;if(!(-1<[zt.TYPE_VD,zt.TYPE_GM,zt.TYPE_CP].indexOf(r.$$type)))throw new Error("Invalid parameter in appendChild.");r.vd&&(n.delRefreshTask(r.vd.__task),r.vd.remove()),o=zt.TYPE_CP===r.$$type?Is.initCp2(r,n,t,i):Is.initDom(r,n,t,i),n.addRefreshTask(o.__task={__before:function(){o.__task=null,i.__json.children.push(r);var t=i.children.length;t&&(((e=i.children[t-1]).__next=o).__prev=e),i.children.push(o),i.__zIndexChildren=null;var e={};e[Z0]=o,e[q0]=Ia.REFLOW,e[J0]=!0,e[t1]=!0,e[Q0]=o.__config,n.__addUpdate(o,o.__config,n,n.__config,e)},__after:function(t){fe.isFunction(e)&&e.call(o,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!fe.isNil(e)&&!i.isDestroyed){var o,n=i.root,t=i.host;if(!(-1<[zt.TYPE_VD,zt.TYPE_GM,zt.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(n.delRefreshTask(e.vd.__task),e.vd.remove()),o=zt.TYPE_CP===e.$$type?Is.initCp2(e,n,t,i):Is.initDom(e,n,t,i),n.addRefreshTask(o.__task={__before:function(){o.__task=null,i.__json.children.unshift(e),i.children.length&&(((t=i.children[0]).__prev=o).__next=t),i.children.unshift(o),i.__zIndexChildren=null;var t={};t[Z0]=o,t[q0]=Ia.REFLOW,t[J0]=!0,t[t1]=!0,t[Q0]=o.__config,n.__addUpdate(o,o.__config,n,n.__config,t)},__after:function(t){fe.isFunction(r)&&r.call(o,t)}})}}},{key:"insertBefore",value:function(a,e){var s=this;if(!fe.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[zt.TYPE_VD,zt.TYPE_GM,zt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertBefore.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=zt.TYPE_CP===a.$$type?Is.initCp2(a,l,t,c):Is.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,o=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===o){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,a),h.__next=s,h.__prev=s.__prev,s.__prev=h,c.children.splice(e,0,h)):(i&&(((n=c.children[0]).__prev=h).__next=n),r.unshift(a),c.children.unshift(h)),c.__zIndexChildren=null;var n={};n[Z0]=h,n[q0]=Ia.REFLOW,n[J0]=!0,n[t1]=!0,n[Q0]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,n)},__after:function(t){fe.isFunction(e)&&e.call(h,t)}})}}},{key:"insertAfter",value:function(a,e){var s=this;if(!fe.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[zt.TYPE_VD,zt.TYPE_GM,zt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertAfter.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=zt.TYPE_CP===a.$$type?Is.initCp2(a,l,t,c):Is.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,o=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===o){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,a),h.__prev=s,h.__next=s.__next,s.__next=h,c.children.splice(e+1,0,h)):(i&&(((n=c.children[i-1]).__next=h).__prev=n),r.push(a),c.children.push(h)),c.__zIndexChildren=null;var n={};n[Z0]=h,n[q0]=Ia.REFLOW,n[J0]=!0,n[t1]=!0,n[Q0]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,n)},__after:function(t){fe.isFunction(e)&&e.call(h,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof Hf||t instanceof Bs))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return Ne.warn("Remove parent is destroyed."),void(fe.isFunction(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Bs?t.shadowRoot:t)instanceof ls||"absolute"!==t.currentStyle[s0]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Bs?t.shadowRoot:t)instanceof Hf&&"absolute"===t.currentStyle[s0]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[u0]+t[v0]+t[m0]+this.lineBoxManager.baseLine}},{key:"firstBaseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[u0]+t[v0]+t[m0]+this.lineBoxManager.firstBaseLine}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),u}(),ur=v.STYLE_KEY,y1=ur.WIDTH,x1=ur.HEIGHT,E1=ur.DISPLAY,b1=ur.BORDER_TOP_WIDTH,M1=ur.BORDER_RIGHT_WIDTH,T1=ur.BORDER_LEFT_WIDTH,A1=ur.BORDER_BOTTOM_WIDTH,O1=ur.BORDER_TOP_LEFT_RADIUS,R1=ur.BORDER_TOP_RIGHT_RADIUS,w1=ur.BORDER_BOTTOM_RIGHT_RADIUS,S1=ur.BORDER_BOTTOM_LEFT_RADIUS,I1=ur.VISIBILITY,C1=ur.BACKGROUND_IMAGE,k1=ur.BACKGROUND_COLOR,L1=ur.BOX_SHADOW,D1=ur.MIX_BLEND_MODE,N1=ur.MARGIN_TOP,P1=ur.MARGIN_RIGHT,F1=ur.MARGIN_BOTTOM,B1=ur.MARGIN_LEFT,Y1=ur.PADDING_TOP,H1=ur.PADDING_RIGHT,G1=ur.PADDING_BOTTOM,W1=ur.PADDING_LEFT,U1=ur.FONT_SIZE,X1=ur.FLEX_BASIS,mr=v.UPDATE_KEY,V1=mr.UPDATE_NODE,K1=mr.UPDATE_FOCUS,z1=mr.UPDATE_CONFIG,T=v.NODE_KEY,j1=T.NODE_CACHE,$1=T.NODE_DEFS_CACHE,Z1=T.NODE_IS_MASK,q1=w.AUTO,J1=w.PX,Q1=w.PERCENT,td=w.REM,ed=w.VW,rd=w.VH,id=w.VMAX,od=w.VMIN,nd=w.RGBA,ad=Tt.canvasPolygon,sd=Tt.svgPolygon,hd=fe.isFunction,ld=function(){t(D,v1);var i=e(D);function D(t,e){_(this,D);var r,t=(r=i.call(this,t,e)).props.src,e=r.__loadImg={src:t};return t||(e.error=!0),r.__config[Z1]&&(e=(t=a(r)).style,t=t.currentStyle,e[C1]=t[C1]=[null],e[k1]=t[k1]=[[0,0,0,0],nd],e[b1]=t[b1]=[0,J1],e[M1]=t[M1]=[0,J1],e[T1]=t[T1]=[0,J1],e[A1]=t[A1]=[0,J1],e[L1]=t[L1]=null,e[D1]=t[D1]="normal"),r}return f(D,[{key:"__preLayout",value:function(t){var e=P(N(D.prototype),"__preLayout",this).call(this,t),r=this.__loadImg;return r.error||(t=r.src,(t=Ne.IMG[t])&&t.state===Ne.LOADED&&(r.source=t.source,r.width=t.width,r.height=t.height),r.cache=!1),e.fixedWidth&&e.fixedHeight||(r.error&&!this.props.placeholder?e.fixedWidth?e.h=e.w:e.fixedHeight?e.w=e.h:e.w=e.h=32:r.source?e.fixedWidth?e.h=e.w*r.height/r.width:e.fixedHeight?e.w=e.h*r.width/r.height:(e.w=r.width,e.h=r.height):e.w=e.h=0,e.fixedWidth=!0,e.fixedHeight=!0),e}},{key:"__addGeom",value:function(t,e){e=fe.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),P(N(D.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){e=P(N(D.prototype),"__calContent",this).call(this,t,e,r,i);return e||(r=this.__loadImg,"hidden"!==i[I1]&&(i[y1]||i[x1])&&r.source&&(e=!0)),e}},{key:"render",value:function(t,e,r,i){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=P(N(D.prototype),"render",this).call(this,t,e,r,i,o,n);t===rt.WEBGL&&(o=a.dx,n=a.dy);var s=a.offscreenBlend,h=a.offscreenMask,l=a.offscreenFilter,c=a.offscreenOverflow,u=this.width,_=this.height,f=this.isDestroyed,d=this.props.placeholder,p=this.computedStyle,g=this.computedStyle,m=g[E1],v=g[O1],y=g[R1],x=g[w1],E=g[S1],b=g[I1],M=this.virtualDom,T=this.__config,e=this.__loadImg,g=this.root;if(s&&(r=s.target.ctx),h&&(r=h.target.ctx),l&&(r=l.target.ctx),c&&(r=c.target.ctx),e.source||e.error||e.loading||this.__loadAndRefresh(e,g,r,d,p,u,_),f||"none"===m||"hidden"===b)return a;l=T[j1];i&&l&&l.enabled&&(r=l.ctx);c=a.x3+o,g=a.y3+n,p=e.source;if(e.error&&!d&&D.showError){var f=.02*Math.min(u,_),m=c+.7*u,b=g+.3*_,i=5*f,A=[[c+.15*u,g+.7*_],[c+.3*u,g+.4*_],[c+.5*u,g+.6*_],[c+.6*u,g+.5*_],[c+.9*u,g+.8*_],[c+.15*u,g+.8*_]];if(t===rt.CANVAS||t===rt.WEBGL){r.strokeStyle="#CCC",r.lineWidth=f,r.fillStyle="#DDD",r.beginPath(),r.moveTo(c,g),r.lineTo(c+u,g),r.lineTo(c+u,g+_),r.lineTo(c,g+_),r.lineTo(c,g),r.stroke(),r.closePath(),r.beginPath();l=et.ellipsePoints(m,b,i,i);Tt.canvasPolygon(r,l,0,0),r.fill(),r.closePath(),r.beginPath(),r.moveTo(A[0][0],A[0][1]);for(var O=1,R=A.length;O<R;O++){var w=A[O];r.lineTo(w[0],w[1])}r.lineTo(A[0][0],A[0][1]),r.fill(),r.closePath()}else if(t===rt.SVG){this.__addGeom("rect",[["x",c],["y",g],["width",u],["height",_],["stroke","#CCC"],["stroke-width",f],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",m],["cy",b],["r",i],["fill","#DDD"]]);for(var S="",I=0,C=A.length;I<C;I++){var k=A[I];I&&(S+=" "),S+=k[0]+","+k[1]}this.__addGeom("polygon",[["points",S],["fill","#DDD"]])}}else if(p){var L,E=Kt.calRadius(c,g,u,_,v,y,x,E);if(t===rt.CANVAS||t===rt.WEBGL)E?(r.save(),r.beginPath(),ad(r,E,o,n),r.clip(),r.closePath(),r.drawImage(p,c,g,u,_),r.restore()):r.drawImage(p,c,g,u,_);else if(t===rt.SVG){if(e.cache)return e.cache.cache=!0,M.children=[e.cache],void(!M.cache&&E&&(p={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",sd(E)],["fill","#FFF"]]}]},t=r.add(p),T[$1].push(p),M.conClip="url(#"+t+")"));u===e.width&&_===e.height||(L=Us.matrixResize(e.width,e.height,u,_,c,g,u,_));c=[["xlink:href",e.error?d:e.src],["x",c],["y",g],["width",e.width],["height",e.height]];E&&(g={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",sd(E)],["fill","#FFF"]]}]},E=r.add(g),T[$1].push(g),M.conClip="url(#"+E+")",delete M.cache),L&&!te.isE(L)&&c.push(["transform","matrix("+fe.joinArr(te.m2m6(L),",")+")"]);c={type:"img",tagName:"image",props:c};M.children=[c],e.cache=c}}return a}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return P(N(D.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[y1],o=r[x1],n=r[B1],a=r[P1],s=r[W1],h=r[H1],l=r[T1],r=r[M1];return i[1]===J1?t-=i[0]:i[1]===Q1?t-=e*i[0]*.01:i[1]===td?t-=i[0]*this.root.computedStyle[U1]:i[1]===ed?t-=i[0]*this.root.width*.01:i[1]===rd?t-=i[0]*this.root.height*.01:i[1]===id?t-=i[0]*Math.max(this.root.width,this.root.height)*.01:i[1]===od?t-=i[0]*Math.min(this.root.width,this.root.height)*.01:(i=this.__loadImg).source&&(o[1]===J1?t-=i.width*o[0]/i.height:o[1]===Q1?t-=i.width*o[0]*e*.01/i.height:o[1]===td?t-=i.width*o[0]*this.root.computedStyle[U1]/i.height:o[1]===ed?t-=i.width*o[0]*this.root.width*.01/i.height:o[1]===rd?t-=i.width*o[0]*this.root.height*.01/i.height:o[1]===id?t-=o[0]*Math.max(this.root.width,this.root.height)*.01/i.height:o[1]===od?t-=o[0]*Math.min(this.root.width,this.root.height)*.01/i.height:t-=i.width),n[1]===J1?t-=n[0]:n[1]===Q1?t-=n[0]*e*.01:n[1]===td?t-=n[0]*this.root.computedStyle[U1]:n[1]===ed?t-=n[0]*this.root.width*.01:n[1]===rd?t-=n[0]*this.root.height*.01:n[1]===id?t-=n[0]*Math.max(this.root.width,this.root.height)*.01:n[1]===od&&(t-=n[0]*Math.min(this.root.width,this.root.height)*.01),s[1]===J1?t-=s[0]:s[1]===Q1?t-=s[0]*e*.01:s[1]===td?t-=s[0]*this.root.computedStyle[U1]:s[1]===ed?t-=s[0]*this.root.width*.01:s[1]===rd?t-=s[0]*this.root.height*.01:s[1]===id?t-=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===od&&(t-=s[0]*Math.min(this.root.width,this.root.height)*.01),l[1]===J1?t-=l[0]:l[1]===td?t-=l[0]*this.root.computedStyle[U1]:l[1]===ed?t-=l[0]*this.root.width*.01:l[1]===rd?t-=l[0]*this.root.height*.01:l[1]===id?t-=l[0]*Math.max(this.root.width,this.root.height)*.01:l[1]===od&&(t-=l[0]*Math.min(this.root.width,this.root.height)*.01),a[1]===J1?t-=a[0]:a[1]===Q1?t-=a[0]*e*.01:a[1]===td?t-=a[0]*this.root.computedStyle[U1]:a[1]===ed?t-=a[0]*this.root.width*.01:a[1]===rd?t-=a[0]*this.root.height*.01:a[1]===id?t-=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===od&&(t-=a[0]*Math.min(this.root.width,this.root.height)*.01),h[1]===J1?t-=h[0]:h[1]===Q1?t-=h[0]*e*.01:h[1]===td?t-=h[0]*this.root.computedStyle[U1]:h[1]===ed?t-=h[0]*this.root.width*.01:h[1]===rd?t-=h[0]*this.root.height*.01:h[1]===id?t-=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===od&&(t-=h[0]*Math.min(this.root.width,this.root.height)*.01),r[1]===J1?t-=r[0]:r[1]===td?t-=r[0]*this.root.computedStyle[U1]:r[1]===ed?t-=r[0]*this.root.width*.01:r[1]===rd?t-=r[0]*this.root.height*.01:r[1]===id?t-=r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===od&&(t-=r[0]*Math.min(this.root.width,this.root.height)*.01),t}},{key:"__calBasis",value:function(t,e){var r=0,i=0,o=0,n=this.currentStyle,a=this.__loadImg,s=e.w,h=e.h,l=n[X1],c=n[y1],u=n[x1],_=n[B1],f=n[N1],d=n[P1],p=n[F1],g=n[W1],m=n[Y1],v=n[H1],y=n[G1],x=n[b1],E=n[M1],b=n[A1],e=n[T1],n=t?c:u,c=t?u:c;return-1<[J1,Q1,td,ed,rd,id,od].indexOf(l[1])?l[1]===J1?r=o=i=l[0]:l[1]===Q1?r=o=i=.01*l[0]*(t?s:h):l[1]===td?r=o=i=l[0]*this.root.computedStyle[U1]:l[1]===ed?r=o=i=l[0]*this.root.width*.01:l[1]===rd?r=o=i=l[0]*this.root.height*.01:l[1]===id?r=o=i=l[0]*Math.max(this.root.width,this.root.height)*.01:l[1]===od&&(r=o=i=l[0]*Math.min(this.root.width,this.root.height)*.01):-1<[J1,Q1,td,ed,rd,id,od].indexOf(n[1])?n[1]===J1?r=o=i=n[0]:n[1]===Q1?r=o=i=.01*n[0]*(t?s:h):n[1]===td?r=o=i=n[0]*this.root.computedStyle[U1]:n[1]===ed?r=o=i=n[0]*this.root.width*.01:n[1]===rd?r=o=i=n[0]*this.root.height*.01:n[1]===id?r=o=i=n[0]*Math.max(this.root.width,this.root.height)*.01:n[1]===od&&(r=o=i=n[0]*Math.min(this.root.width,this.root.height)*.01):(a.source||a.error)&&(r=o=i=c[1]!==q1?(c[1]===J1?c=c[0]:c[1]===Q1?c=.01*c[0]*(t?h:s):c[1]===td?c=c[0]*this.root.computedStyle[U1]:c[1]===ed?c=c[0]*this.root.width*.01:c[1]===rd?c=c[0]*this.root.height*.01:c[1]===id?c=c[0]*Math.max(this.root.width,this.root.height)*.01:c[1]===od&&(c=c[0]*Math.min(this.root.width,this.root.height)*.01),h=a.width/a.height,t?c*h:c/h):t?a.width:a.height),t?(v=this.__calMp(_,s)+this.__calMp(d,s)+this.__calMp(g,s)+this.__calMp(v,s),r+=v=e[0]+E[0]+v,o+=v,i+=v):(s=this.__calMp(f,s)+this.__calMp(p,s)+this.__calMp(m,s)+this.__calMp(y,s),r+=s=x[0]+b[0]+s,o+=s,i+=s),[r,i,o]}},{key:"__loadAndRefresh",value:function(r,i,o,n,a,s,h,l){var c=this;(r.source||r.error)&&(i.delRefreshTask(c.__task),i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[V1]=c,t[K1]=Ia.REFLOW,t[z1]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,Ne.measureImg(r.src,function(t){if(t.url===r.src&&!c.isDestroyed){var e=function(){var t=c.currentStyle,e=t[y1],t=t[x1];i.delRefreshTask(c.__task),e[1]!==q1&&t[1]!==q1?i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[V1]=c,t[K1]=Ia.REPAINT,t[z1]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){hd(l)&&l.call(c)}}):i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[V1]=c,t[K1]=Ia.REFLOW,t[z1]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){hd(l)&&l.call(c)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(n)return void Ne.measureImg(n,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:o,root:i,width:s,height:h});r.error=!0}"none"!==a[E1]&&e()}},{ctx:o,root:i,width:s,height:h})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,o=this.root;t===i.src||!t&&i.error?hd(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,o,o.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,o.delRefreshTask(r.__task),o.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[V1]=r,t[K1]=Ia.REFLOW,t[z1]=r.__config,o.__addUpdate(r,r.__config,o,r.__config,t))},__after:function(t){hd(e)&&e(t)}}))}},{key:"appendChild",value:function(){Ne.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}}]),D}();n(ld,"showError",!0);var cd=function(){function e(t){_(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return f(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),Jt=v.STYLE_KEY,ud=Jt.DISPLAY,_d=Jt.MARGIN_TOP,fd=Jt.MARGIN_RIGHT,dd=Jt.MARGIN_BOTTOM,pd=Jt.MARGIN_LEFT,gd=Jt.PADDING_TOP,md=Jt.PADDING_RIGHT,vd=Jt.PADDING_BOTTOM,yd=Jt.PADDING_LEFT,xd=Jt.WIDTH,Ed=Jt.HEIGHT,bd=Jt.BORDER_TOP_WIDTH,Md=Jt.BORDER_RIGHT_WIDTH,Td=Jt.BORDER_BOTTOM_WIDTH,Ad=Jt.BORDER_LEFT_WIDTH,Od=Jt.FILL,Rd=Jt.STROKE,wd=Jt.STROKE_MITERLIMIT,Sd=Jt.STROKE_WIDTH,Id=Jt.STROKE_LINECAP,Cd=Jt.STROKE_LINEJOIN,kd=Jt.STROKE_DASHARRAY,Ld=Jt.STROKE_DASHARRAY_STR,Dd=Jt.FILL_RULE,Nd=Jt.VISIBILITY,Pd=Jt.FONT_SIZE,Fd=Jt.FLEX_BASIS,Y=v.NODE_KEY,Bd=Y.NODE_CACHE_PROPS,Yd=Y.NODE_CURRENT_PROPS,Hd=Y.NODE_CURRENT_STYLE,Gd=Y.NODE_STYLE,Wd=Y.NODE_DEFS_CACHE,Ud=w.PX,Xd=w.PERCENT,Vd=w.REM,Kd=w.VW,zd=w.VH,jd=w.VMAX,$d=w.VMIN,Zd=fe.int2rgba,qd=fe.isNil,Jd=fe.joinArr,Qd=Tt.canvasPolygon,tp=Tt.svgPolygon,ep={},rp=function(){t(k,Hf);var r=e(k);function k(t,e){_(this,k),(t=r.call(this,t,e)).__isMulti=!!t.props.multi,t.__style=Mo.normalize(t.style,fr.DOM_ENTRY_SET.concat(fr.GEOM_ENTRY_SET)),t.__currentStyle=fe.extend({},t.__style),t.__currentProps=fe.clone(t.props);e=t.__config;return e[Bd]=t.__cacheProps={},e[Yd]=t.__currentProps,e[Hd]=t.__currentStyle,e[Gd]=t.__style,t}return f(k,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[xd],o=r[pd],n=r[fd],a=r[yd],s=r[md],h=r[Ad],r=r[Md];return i[1]===Ud?t-=i[0]:i[1]===Xd?t-=e*i[0]*.01:i[1]===Vd?t-=i[0]*this.root.computedStyle[Pd]:i[1]===Kd?t-=i[0]*this.root.width*.01:i[1]===zd?t-=i[0]*this.root.height*.01:i[1]===jd?t-=i[0]*Math.max(this.root.width,this.root.height)*.01:i[1]===$d&&(t-=i[0]*Math.min(this.root.width,this.root.height)*.01),o[1]===Ud?t-=o[0]:o[1]===Xd?t-=o[0]*e*.01:o[1]===Vd?t-=o[0]*this.root.computedStyle[Pd]:o[1]===Kd?t-=o[0]*this.root.width*.01:o[1]===zd?t-=o[0]*this.root.height*.01:o[1]===jd?t-=o[0]*Math.max(this.root.width,this.root.height)*.01:o[1]===$d&&(t-=o[0]*Math.min(this.root.width,this.root.height)*.01),a[1]===Ud?t-=a[0]:a[1]===Xd?t-=a[0]*e*.01:a[1]===Vd?t-=a[0]*this.root.computedStyle[Pd]:a[1]===Kd?t-=a[0]*this.root.width*.01:a[1]===zd?t-=a[0]*this.root.height*.01:a[1]===jd?t-=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===$d&&(t-=a[0]*Math.min(this.root.width,this.root.height)*.01),h[1]===Ud?t-=h[0]:h[1]===Vd?t-=h[0]*this.root.computedStyle[Pd]:h[1]===Kd?t-=h[0]*this.root.width*.01:h[1]===zd?t-=h[0]*this.root.height*.01:h[1]===jd?t-=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===$d&&(t-=h[0]*Math.min(this.root.width,this.root.height)*.01),n[1]===Ud?t-=n[0]:n[1]===Xd?t-=n[0]*e*.01:n[1]===Vd?t-=n[0]*this.root.computedStyle[Pd]:n[1]===Kd?t-=n[0]*this.root.width*.01:n[1]===zd?t-=n[0]*this.root.height*.01:n[1]===jd?t-=n[0]*Math.max(this.root.width,this.root.height)*.01:n[1]===$d&&(t-=n[0]*Math.min(this.root.width,this.root.height)*.01),s[1]===Ud?t-=s[0]:s[1]===Xd?t-=s[0]*e*.01:s[1]===Vd?t-=s[0]*this.root.computedStyle[Pd]:s[1]===Kd?t-=s[0]*this.root.width*.01:s[1]===zd?t-=s[0]*this.root.height*.01:s[1]===jd?t-=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===$d&&(t-=s[0]*Math.min(this.root.width,this.root.height)*.01),r[1]===Ud?t-=r[0]:r[1]===Vd?t-=r[0]*this.root.computedStyle[Pd]:r[1]===Kd?t-=r[0]*this.root.width*.01:r[1]===zd?t-=r[0]*this.root.height*.01:r[1]===jd?t-=r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===$d&&(t-=r[0]*Math.min(this.root.width,this.root.height)*.01),t}},{key:"__calMinMax",value:function(t,e){Mo.computeReflow(this,this.isShadowRoot);var r=0,i=0,o=this.currentStyle,n=o[xd],a=o[Ed],s=o[ud],a=t?n:a;return a[1]===Ud?r=i=a[0]:a[1]===Vd?r=i=a[0]*this.root.computedStyle[Pd]:a[1]===Kd?r=i=a[0]*this.root.width*.01:a[1]===zd?r=i=a[0]*this.root.height*.01:a[1]===jd?r=i=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===$d&&(r=i=a[0]*Math.min(this.root.width,this.root.height)*.01),[s,this.__addMp(t,e.w,o,[r,i])]}},{key:"__calBasis",value:function(t,e){var r=0,i=0,o=0,n=this.currentStyle,a=e.w,s=e.h,h=n[Fd],l=n[xd],c=n[Ed],u=n[pd],_=n[_d],f=n[fd],d=n[dd],p=n[yd],g=n[gd],m=n[md],v=n[vd],y=n[bd],x=n[Md],e=n[Td],n=n[Ad],c=t?l:c;return-1<[Ud,Xd,Vd,Kd,zd,jd,$d].indexOf(h[1])?h[1]===Ud?r=o=i=h[0]:h[1]===Xd?r=o=i=.01*h[0]*(t?a:s):h[1]===Vd?r=o=i=h[0]*this.root.computedStyle[Pd]:h[1]===Kd?r=o=i=h[0]*this.root.width*.01:h[1]===zd?r=o=i=h[0]*this.root.height*.01:h[1]===jd?r=o=i=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===$d&&(r=o=i=h[0]*Math.min(this.root.width,this.root.height)*.01):-1<[Ud,Xd,Vd,Kd,zd,jd,$d].indexOf(c[1])&&(c[1]===Ud?r=o=i=c[0]:c[1]===Xd?r=o=i=.01*c[0]*(t?a:s):c[1]===Vd?r=o=i=c[0]*this.root.computedStyle[Pd]:c[1]===Kd?r=o=i=c[0]*this.root.width*.01:c[1]===zd?r=o=i=c[0]*this.root.height*.01:c[1]===jd?r=o=i=c[0]*Math.max(this.root.width,this.root.height)*.01:c[1]===$d&&(r=o=i=c[0]*Math.min(this.root.width,this.root.height)*.01)),t?(m=this.__calMp(u,a)+this.__calMp(f,a)+this.__calMp(p,a)+this.__calMp(m,a),r+=m=n[0]+x[0]+m,o+=m,i+=m):(a=this.__calMp(_,a)+this.__calMp(d,a)+this.__calMp(g,a)+this.__calMp(v,a),r+=a=y[0]+e[0]+a,o+=a,i+=a),[r,i,o]}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),i=r.fixedWidth,o=r.fixedHeight,n=r.w,r=r.h;this.__height=o?r:0,e?this.__width=i?n:0:(this.__width=n,this.__ioSize(n,this.height),this.__marginAuto(this.currentStyle,t),this.__config[Bd]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,i=e.fixedHeight,o=e.x,n=e.y,a=e.w,e=e.h,o=this.__width=r?a:o-t.x,t=this.__height=i?e:n-t.y;this.__ioSize(o,t),this.__config[Bd]=this.__cacheProps={}}},{key:"__calCache",value:function(i,o,t,n,a,s,e,r,h,l,c,u,_,f,d,p,g,m,v,y,x,E,b,M,T,A,O,R,w,S){var I,C=this,w=P(N(k.prototype),"__calCache",this).call(this,i,o,t,n,a,s,e,r,h,l,c,u,_,f,d,p,g,m,v,y,x,E,b,M,T,A,O,R,w,S);return qd(n[Sd])&&(n[Sd]=!0,S=a[Sd]||[],I=this.width,s[Sd]=S.map(function(t){return t[1]===Ud?t[0]:t[1]===Xd?t[0]*I*.01:t[1]===Vd?t[0]*C.root.computedStyle[Pd]:t[1]===Kd?t[0]*C.root.width*.01:t[1]===zd?t[0]*C.root.height*.01:t[1]===jd?t[0]*Math.max(C.root.width,C.root.height)*.01:t[1]===$d?t[0]*Math.min(C.root.width,C.root.height)*.01:0})),qd(n[kd])&&(n[kd]=!0,s[kd]=a[kd]||[],n[Ld]=s[kd].map(function(t){return Jd(t,",")})),[Id,Cd,wd,Dd].forEach(function(t){s[t]=a[t]}),[Rd,Od].forEach(function(t){var e,r;qd(n[t])&&(e=a[t],s[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(Zd(t)):r.push("none"):r.push(C.__gradient(i,o,x,O,E,R,t))}),n[t]=r)}),w}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[Nd]}},{key:"__preSet",value:function(t){var e=this.width,r=this.height,i=this.__cacheStyle,o=this.computedStyle,n=t.sx3+.5*e,a=t.sy3+.5*r,s=i[Od],h=i[Rd],l=i[Ld],e=o[Sd],t=o[Id],r=o[Cd],i=o[wd];return{cx:n,cy:a,stroke:h,strokeWidth:e,strokeDasharray:o[kd],strokeDasharrayStr:l,strokeLinecap:t,strokeLinejoin:r,strokeMiterlimit:i,fill:s,fillRule:o[Dd]}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,o=r.strokeWidth,n=r.strokeDasharray,a=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,r=r.fill;t!==rt.CANVAS&&t!==rt.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==o&&e.lineWidth!==o&&(e.lineWidth=o),void 0!==a&&e.lineCap!==a&&(e.lineCap=a),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==h&&e.miterLimit!==h&&(e.miterLimit=h),fe.isFunction(e.getLineDash)?n&&!fe.equalArr(e.getLineDash(),n)&&e.setLineDash(n):n&&e.setLineDash(n))}},{key:"render",value:function(t,e,r,i,o,n){n=P(N(k.prototype),"render",this).call(this,t,e,r,i,o,n);if(t===rt.SVG&&(this.virtualDom.type="geom"),n.break)return n;t=this.__preSet(n);return Object.assign(n,t)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,o=r.fillRule,n=r.stroke,a=r.strokeWidth,s=r.strokeDasharray,h=r.strokeDasharrayStr,l=r.strokeLinecap,c=r.strokeLinejoin,u=r.strokeMiterlimit,_=r.dx,f=r.dy,d=this.__cacheProps.list,p=this.isMulti,g=this.bbox;if(i.length<=1&&n.length<=1){r={fill:i[0],fillRule:o[0],stroke:n[0],strokeWidth:a[0],strokeDasharray:s[0],strokeDasharrayStr:h[0],strokeLinecap:l[0],strokeLinejoin:c[0],strokeMiterlimit:u[0],dx:_,dy:f,bbox:g};this.__renderOnePolygon(t,e,p,d,r)}else{for(var m=0,v=i.length;m<v;m++){var y=i[m];y&&(y={fill:y,fillRule:o[m],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,y))}for(var x=0,E=n.length;x<E;x++){var b=n[x];b&&(b={stroke:b,strokeWidth:a[x],strokeDasharray:s[x],strokeDasharrayStr:h[x],strokeLinecap:l[x],strokeLinejoin:c[x],strokeMiterlimit:u[x],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,b))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,o){var n=o.fill,a=o.stroke,s=o.strokeWidth,h=n&&"conic"===n.k,l=a&&"conic"===a.k,c=n&&"radial"===n.k&&Array.isArray(n.v),u=s&&0<s&&a&&"radial"===a.k&&Array.isArray(a.v);h||l?(h?this.__conicGradient(t,e,i,r,o):"none"!==n&&this.__drawPolygon(t,e,r,i,o,!0),s&&0<s&&l?Ne.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,o,"fill"):"none"!==n&&this.__drawPolygon(t,e,r,i,o,!0),s&&0<s&&u?(Ne.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke.v=o.stroke.v[0],this.__drawPolygon(t,e,r,i,o,!1,!0)):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!1,!0)):this.__drawPolygon(t,e,r,i,o,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,o,n,a){var s,h=o.fill,l=o.stroke,c=o.strokeWidth,u=o.fillRule,_=o.strokeDasharrayStr,f=o.strokeLinecap,d=o.strokeLinejoin,p=o.strokeMiterlimit,g=o.dx,m=o.dy;t===rt.CANVAS||t===rt.WEBGL?(this.__preSetCanvas(t,e,o),e.beginPath(),r?i.forEach(function(t){return Qd(e,t,g,m)}):Qd(e,i,g,m),n&&h&&"none"!==h&&e.fill(u),a&&l&&"none"!==l&&c&&0<c&&e.stroke(),e.closePath()):t===rt.SVG&&(s="",r?i.forEach(function(t){return s+=tp(t)}):s=tp(i),i=[["d",s]],(h&&"none"!==h||l&&"none"!==l)&&(n&&h&&"none"!==h?(i.push(["fill",h.v||h]),u&&"nonzero"!==u&&i.push(["fill-rule",u])):i.push(["fill","none"]),a&&l&&"none"!==l&&c&&0<c?(i.push(["stroke",l.v||l]),i.push(["stroke-width",c]),this.__propsStrokeStyle(i,_,f,d,p)):i.push(["stroke-width",0]),this.addGeom("path",i)))}},{key:"__inversePtList",value:function(t,e,n){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var o=te.calPoint([t[r],t[r+1]],n);e.push(o[0]),e.push(o[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var o=te.calPoint([t[r],t[r+1]],n);e.push(o[0]),e.push(o[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,o,n){var a=o.strokeWidth,s=o.strokeDasharrayStr,h=o.strokeLinecap,l=o.strokeLinejoin,c=o.strokeMiterlimit,u=o.dx,_=o.dy,f=Qt(o[n].v,4),d=f[0],p=f[1],o=f[2],f=f[3];p=fa.calMatrixByOrigin(p,[o,f]);var g,f=te.inverse(p);r=this.__inversePtList(r,i,f),t===rt.CANVAS||t===rt.WEBGL?(p&&(e.save(),f=this.matrixEvent,p=te.multiply(f,p),e.setTransform(p[0],p[1],p[4],p[5],p[12],p[13])),e.beginPath(),e[n+"Style"]!==d&&(e[n+"Style"]=d),i?r.forEach(function(t){return Tt.canvasPolygon(e,t,u,_)}):Qd(e,r,u,_),e[n](),e.closePath(),p&&e.restore()):t===rt.SVG&&(g="",i?r.forEach(function(t){return g+=tp(t)}):g=tp(r),r=[["d",g]],"fill"===n?(r.push(["fill",d]),r.push(["strokeWidth",0])):"stroke"===n&&(r.push(["fill","none"]),r.push(["stroke",d]),r.push(["stroke-width",a]),this.__propsStrokeStyle(r,s,h,l,c)),r.push(["transform","matrix(".concat(Jd(te.m2m6(p),","),")")]),this.addGeom("path",r))}},{key:"__conicGradient",value:function(t,r,e,i,o){var n,a,s,h,l=this,c=o.fill,u=o.bbox,_=o.dx,f=void 0===_?0:_,_=o.dy,d=void 0===_?0:_,p=c.v;t===rt.CANVAS||t===rt.WEBGL?(o=Qt(u,4),n=o[0],a=o[1],_=o[2],u=o[3],u=(s=Ne.getCacheCanvas(o=_-n,_=u-a,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,o,_),it.getConicGradientImage(.5*o,.5*_,o,_,c.v.stop,u.data),s.ctx.putImageData(u,0,0),i?e.forEach(function(t){r.save(),r.beginPath(),Qd(r,t,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,n+f,a+d),r.restore()}):(r.save(),r.beginPath(),Qd(r,e,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,n+f,a+d),r.restore()),s.ctx.clearRect(0,0,o,_)):t===rt.SVG&&(i?e.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",tp(t)]]}]},e=r.add(t);l.__config[Wd].push(t),p.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",tp(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(e={tagName:"clipPath",children:[{tagName:"path",props:[["d",tp(e)]]}]},h=r.add(e),this.__config[Wd].push(e),p.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",tp(t[0])],["fill",t[1]],["clip-path","url(#"+h+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,o){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),o&&4!==o&&t.push(["stroke-miterlimit",o])}},{key:"__releaseWhenEmpty",value:function(t,e){return"hidden"===e[Nd]}},{key:"__offsetX",value:function(t,e,r){P(N(k.prototype),"__offsetX",this).call(this,t,e,r),this.__config[Bd]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){P(N(k.prototype),"__offsetY",this).call(this,t,e,r),this.__config[Bd]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){P(N(k.prototype),"__resizeX",this).call(this,t,e),this.__config[Bd]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){P(N(k.prototype),"__resizeY",this).call(this,t,e),this.__config[Bd]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=fe.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return qd(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return ep}},{key:"getRegister",value:function(t){if(!t||!fe.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!ep.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return ep[t]}},{key:"register",value:function(t,e){if(!(t&&fe.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof k))throw new Error("Invalid param");if(k.hasRegister(t))throw new Error("Geom has already register: ".concat(t));ep[t]=e}},{key:"hasRegister",value:function(t){return t&&ep.hasOwnProperty(t)}},{key:"delRegister",value:function(t){k.hasRegister(t)&&delete ep[t]}}]),k}(),ee=v.NODE_KEY,ip=ee.NODE_STYLE,op=ee.NODE_CURRENT_STYLE,np=ee.NODE_COMPUTED_STYLE,ap=ee.NODE_DOM_PARENT,sp=ee.NODE_MATRIX,hp=ee.NODE_MATRIX_EVENT,lp=ee.NODE_STRUCT,cp=zt.TYPE_VD,up=zt.TYPE_GM,_p=zt.TYPE_CP,fp=[],dp=[],pp={};function gp(t){t instanceof v1?t.children.forEach(function(t){t instanceof v1?gp(t):t instanceof Bs&&t.__hasUpdate&&(t.__hasUpdate=!1,mp(t,t.props))}):t instanceof Bs&&t.__hasUpdate&&(t.__hasUpdate=!1,mp(t,t.props))}function mp(t,e,r){t.__nextState||r?!fe.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.state=r,t.__nextState=null;var i=t.shadow,o=t.shadowRoot,e=t.__cd,r=fs(t.render());(function(t,e,r){var o=Ep(e,{},t),n=Ep(r,{}),a=[],s=[];Object.keys(o).forEach(function(t){var e=o[t];n[t]||(e.json.key=pp)}),Object.keys(n).forEach(function(t){var e,r=o[t],i=n[t];r?(e=r.json,t=i.json,r=r.vd,e.$$type===_p&&t.$$type===_p?e.klass===t.klass&&(xp(e,t,r),e.key=t.key=pp,s.push(r)):e.$$type===t.$$type&&e.tagName===t.tagName&&(t.$$type===up&&e.props.multi!==t.props.multi||(t.__inheritAnimate=r),e.key=t.key=pp,t.$$type===cp&&a.push({vd:r,oj:e,nj:t}))):i.json.key=pp}),a.forEach(function(t){yp(t.vd,t.oj,t.nj)}),vp(t,e,r),s.forEach(function(t){bp(t)})})(i,e,r),t.__init(r);var n=t.shadowRoot;{var a;n instanceof Hf?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){n[t]=o[t]}),n.__computedStyle=n.__config[np]=o.computedStyle):(a=t.domParent,[ip,op,np,sp,hp].forEach(function(t){n.__config[t]=a.__config[t]}))}["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){n[t]=o[t]}),n.__config[ap]=o.domParent,n.__config[lp]=o.__config[lp],fp.push(t),fe.isObject(r)&&r.__placeholder||dp.push(i);r&&r.__placeholder&&delete r.__placeholder;r&&r.__inheritAnimate&&delete r.__inheritAnimate;r&&r.__animateRecords&&delete r.__animateRecords;var s=t.host;for(;s&&s.shadow===t;)(s.__shadowRoot=n).__hostRoot=s,s=(t=s).host}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,gp(t.shadow)):gp(t.shadow)}function vp(t,e,r){fe.isObject(r)&&(r.$$type===_p?r.key!==pp&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(xp(e,r,t),bp(t)):r.$$type===up&&e&&e.$$type===up?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===cp&&e&&e.$$type===cp&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),yp(t,e,r)))}function yp(t,e,r){for(var i=e.children,o=r.children,n=i.length,a=o.length,s=t.children,h=0,l=0,c=0,u=Math.min(n,a);h<u;h++){var _=i[h+l],f=o[h+c];_.key===pp&&f.key===pp||(_.key===pp?(l++,h--,n--,u=Math.min(n,a)):f.key===pp?(c++,h--,a--,u=Math.min(n,a)):vp(s[h+l],_,f))}}function xp(i,o,n){var a=(o.__placeholder=n).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(o.props).forEach(function(t){var e,r=o.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.listener[t]=r)):(t=t.slice(2).toLowerCase(),a.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),n.off(t,s[t]),n.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),n.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(o.props[t]=e,t=t.slice(2).toLowerCase(),delete a.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(o.props[t]=e,t=t.slice(2).toLowerCase(),n.off(t,e))}),mp(n,o.props,!fe.equal(i.props,o.props))}function Ep(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return Ep(t,r,i&&i[e])}):fe.isObject(t)&&(t.$$type!==cp&&t.$$type!==up&&t.$$type!==_p||(t.$$type===cp&&Ep(t.children,r,i&&i.children),e=t.props.key,fe.isNil(e)||""===e||(r.hasOwnProperty(e)&&Ne.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function bp(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var Mp,Tp={updateList:fp,check:gp,did:function(){fp.forEach(function(t){fe.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),fp.splice(0),dp.forEach(function(t){t.__destroy()}),dp=[]}},Ap=fe.joinVd,Op=fe.joinDef,Rp=Ia.contain,wp=Ia.NONE,Sp=Ia.TRANSFORM_ALL,Ip=Ia.OPACITY,Cp=Ia.FILTER,kp=Ia.MIX_BLEND_MODE;function Lp(t,e,r){var i=t.childNodes;!function(t,e,r){for(var i=e.length,o=r.length,n=0,a=t.childNodes;n<Math.min(i,o);n++)!function(e,t,r){if(t.tagName!==r.tagName)Vp(e,"beforebegin",Op(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},o=0,n=(t.props||[]).length;o<n;o++){var a=Qt(t.props[o],2),s=a[0],a=a[1];i[s]=a}for(var h=0,l=(r.props||[]).length;h<l;h++){var c=Qt(r.props[h],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var _=e.childNodes,f=t.children.length,d=r.children.length,p=0;p<Math.min(f,d);p++)Hp(e,p,t.children[p],r.children[p]);if(p<f)for(var g=f-1;p<=g;g--)Xp(e,_,g);else if(p<d)for(;p<d;p++)Up(e,_,p,Ap(r.children[p]))}}(a[n],e[n],r[n]);if(n<i)for(var s=i-1;n<=s;s--)Xp(t,a,s);else if(n<o)for(;n<o;n++)Up(t,a,n,Op(r[n]))}(i[0],e.defs,r.defs),r.hasOwnProperty("lv")||Yp(i[1],e.bb,r.bb),Fp(t,e,r,!0)}function Dp(t,e,r){"dom"===e.type?"dom"===r.type?Fp(t,e,r):"geom"===r.type?Bp(t,e,r):Wp(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(!r.cache){for(var i=e.children.length,o=r.children.length,n=0;n<Math.min(i,o);n++)Hp(t,n,e.children[n],r.children[n],!0);var a=t.childNodes;if(n<i)for(var s=i-1;n<=s;s--)Xp(t,a,s);else if(n<o)for(;n<o;n++)Up(t,a,n,Ap(r.children[n]))}}(t,e,r):Wp(t,r):"geom"===e.type?"dom"===r.type?Bp(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)Pp(t,0,r,r.lv);else if(r.hasOwnProperty("lv"))Pp(t,0,r,r.lv);else{Np(t,e,r),Yp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,o=r.children.length,n=0,a=t.lastChild,s=a.childNodes;n<Math.min(i,o);n++)Hp(a,n,e.children[n],r.children[n]);if(n<i)for(var h=i-1;n<=h;h--)Xp(a,s,h);else if(n<o)for(;n<o;n++)Up(a,s,n,Ap(r.children[n]))}}(t,e,r):Wp(t,r):"img"===e.type&&("img"===r.type?Gp(t,e,r):Wp(t,r))}function Np(t,e,r){var i=r.transform,o=r.opacity,n=r.visibility,a=r.mask,s=r.overflow,h=r.filter,l=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==o&&(1!==o&&void 0!==o?t.setAttribute("opacity",o):t.removeAttribute("opacity")),e.visibility!==n&&t.setAttribute("visibility",n),e.mask!==a&&(a?t.setAttribute("mask",a):t.removeAttribute("mask")),e.filter===h&&e.mixBlendMode===l||((l=(h?"filter:".concat(h,";"):"")+(l?"mix-blend-mode:".concat(l,";"):""))?t.setAttribute("style",l):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function Pp(t,e,r,i){var o=r.transform,n=r.opacity,a=r.mask,s=r.filter,r=r.mixBlendMode;a?t.setAttribute("mask",a):t.removeAttribute("mask"),i!==wp&&(Rp(i,Sp)&&(o?t.setAttribute("transform",o):t.removeAttribute("transform")),Rp(i,Ip)&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),(Rp(i,Cp)||Rp(i,kp))&&((r=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",r):t.removeAttribute("style")))}function Fp(t,e,r,i){if(r.cache)Pp(t,0,r,r.lv);else{r.hasOwnProperty("lv")?Pp(t,0,r,r.lv):(Np(t,e,r),i||Yp(t.firstChild,e.bb,r.bb));for(var o=e.children.length,n=r.children.length,a=0,s=t.lastChild,h=s.childNodes;a<Math.min(o,n);a++)Dp(h[a],e.children[a],r.children[a]);if(a<o)for(var l=o-1;a<=l;l--)Xp(s,h,l);else if(a<n)for(;a<n;a++)Up(s,h,a,Ap(r.children[a]))}}function Bp(t,e,r){Np(t,e,r),Yp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,o=r.children.length,n=0,a=t.lastChild,s=a.childNodes;n<Math.min(i,o);n++)Wp(s[n],r.children[n]);if(n<i)for(var h=i-1;n<=h;h--)Xp(a,s,h);else if(n<o)for(;n<o;n++)Up(a,s,n,Ap(r.children[n]))}function Yp(t,e,r){for(var i=e.length,o=r.length,n=0;n<Math.min(i,o);n++)Hp(t,n,e[n],r[n]);var a=t.childNodes;if(n<i)for(var s=i-1;n<=s;s--)Xp(t,a,s);else if(n<o)for(;n<o;n++)Up(t,a,n,Ap(r[n]))}function Hp(t,e,r,i,o){t=t.childNodes;r.tagName!==i.tagName?Wp(t[e],i):(Gp(t[e],r,i),o&&r.content!==i.content&&(t[e].innerHTML=i.content))}function Gp(e,t,r){if(!r.cache){for(var i={},o=0,n=(t.props||[]).length;o<n;o++){var a=Qt(t.props[o],2),s=a[0],a=a[1];i[s]=a}for(var h=0,l=(r.props||[]).length;h<l;h++){var c=Qt(r.props[h],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function Wp(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=Ap(t)})):r=Ap(e),Vp(t,"beforebegin",r),t.parentNode.removeChild(t)}function Up(t,e,r,i){r>=e.length?Vp(t,"beforeend",i):Vp(e[r],"beforebegin",i)}function Xp(t,e,r){e[r]&&t.removeChild(e[r])}function Vp(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(Mp=Mp||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(Mp.childNodes[0],t)}}var Kp=fe.isFunction,zp=function(){function t(){_(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return f(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var t,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;e.length&&e.splice(0).forEach(function(t){var r=t.target,e=t.animate;r.isDestroyed||(Array.isArray(e)?e.forEach(function(t){var e=t.value,t=t.options;t.autoPlay=!1;t=r.animate(e,t);i.add(t,o)}):(t=e.value,(e=e.options).autoPlay=!1,e=r.animate(t,e),i.add(e,o)))}),e===this.__records2&&(t=this.__onList,(e=this.list2).length&&t.length&&e.forEach(function(e){t.forEach(function(t){e.off(t[0],t[1]),e.on(t[0],t[1])})}))}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"finish",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,Kp(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Kp(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Kp(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Kp(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Kp(r)&&r(t))}])}},{key:"on",value:function(t,e){if(Kp(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(r,i){var o=this;this.list.forEach(function(e){function t(){var t=e.timestamp;t!==o.__lastTime[r]&&(o.__lastTime[r]=t,i())}t.__karasEventCb=i,e.on(r,t)})}},{key:"off",value:function(e,r){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.off(e[t],r);else this.list.forEach(function(t){t.off(e,r)})}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),jp=Tt.canvasPolygon;var pt=0,ur=1,mr=2,T=3,Jt=4,Y=function(_,t,f,d){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,o,n,a,s,h,l=Qt(t,4),c=l[2],u=l[3];0===c?(e=u.matrix,a=u.target,n=u.ctx,r=u.x,i=u.y,t=u.offsetWidth,o=u.offsetHeight,l=u.list,_.globalCompositeOperation="destination-in",_.globalAlpha=1,_.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]),_.fillStyle="#FFF",_.beginPath(),l?jp(_,l):_.rect(r,i,t,o),_.fill(),_.closePath(),_.globalCompositeOperation="source-over",a.draw(),(_=n).setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(a.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,f,d),a.draw(),Ne.releaseCacheCanvas(a.canvas)):1===c?(s=u.target,o=u.ctx,n=u.filter,_.filter&&((a=Ne.getCacheCanvas(f,d,null,"filter")).ctx.filter=Tt.canvasFilter(n),a.ctx.drawImage(s.canvas,0,0,f,d,0,0,f,d),a.ctx.filter="none",a.draw(),s.ctx.globalAlpha=1,s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.ctx.drawImage(a.canvas,0,0,f,d,0,0,f,d),s.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,f,d),a.draw(),Ne.releaseCacheCanvas(a.canvas)),(_=o).setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.globalAlpha=1,s.ctx.clearRect(0,0,f,d),s.draw(),Ne.releaseCacheCanvas(s.canvas)):2===c?(s=u.mask,u.isClip?(u.target.draw(),(_=s.ctx).globalCompositeOperation="source-out",_.globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(u.target.canvas,0,0,f,d,0,0,f,d),s.draw(),_.globalCompositeOperation="source-over",u.target.ctx.setTransform(1,0,0,1,0,0),u.target.ctx.clearRect(0,0,f,d),u.target.draw(),Ne.releaseCacheCanvas(u.target.canvas),(_=u.ctx).globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.draw(),Ne.releaseCacheCanvas(s.canvas)):(s.draw(),h=u.target,(_=h.ctx).globalCompositeOperation="destination-in",_.globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.globalCompositeOperation="source-over",h.draw(),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.draw(),Ne.releaseCacheCanvas(s.canvas),(_=u.ctx).globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(h.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),h.ctx.setTransform(1,0,0,1,0,0),h.ctx.clearRect(0,0,f,d),h.draw(),Ne.releaseCacheCanvas(h.canvas))):3===c?(h=u.target,(_=u.ctx).globalCompositeOperation=u.mixBlendMode,h.draw(),_.setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(h.canvas,0,0,f,d,0,0,f,d),_.globalCompositeOperation="source-over",_.draw&&_.draw(!0),h.ctx.globalAlpha=1,h.ctx.setTransform(1,0,0,1,0,0),h.ctx.clearRect(0,0,f,d),h.draw(),Ne.releaseCacheCanvas(h.canvas)):4===c&&(_=u.ctx)}),_},$p=function t(e,r,i){_(this,t),this.uuid=Yo.genUuid(),this.time=Ne.now(),this.texture=e,this.width=r,this.height=i},Zp=function(){function s(t,e,r,i,o,n,a){_(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=o,this.height=n,this.bbox=a,this.available=!0,this.__page=new $p(e,o,n),this.dx=-a[0],this.dy=-a[1],this.dbx=r-a[0],this.dby=i-a[1]}return f(s,[{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),qp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",Jp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",Qp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",tg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",eg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",rg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ig="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",og="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ng="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ag="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",sg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",hg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",lg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",cg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ug="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",_g="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",fg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",dg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",pg=xa.NA,gg=xa.LOCAL,mg=xa.CHILD,vg=xa.SELF,yg=xa.getCache,xg=pt,Eg=ur,bg=mr,Mg=T,Tg=Jt,Ag=Y,ee=v.STYLE_KEY,Og=ee.DISPLAY,Rg=ee.OPACITY,wg=ee.VISIBILITY,Sg=ee.FILTER,Ig=ee.OVERFLOW,Cg=ee.MIX_BLEND_MODE,kg=ee.FILL,Lg=ee.TRANSFORM,Dg=ee.TRANSFORM_ORIGIN,Ng=ee.PERSPECTIVE,Pg=ee.PERSPECTIVE_ORIGIN,Fg=ee.PADDING_LEFT,Bg=ee.PADDING_RIGHT,Yg=ee.PADDING_TOP,Hg=ee.PADDING_BOTTOM,Gg=ee.BORDER_TOP_WIDTH,Wg=ee.BORDER_RIGHT_WIDTH,Ug=ee.BORDER_BOTTOM_WIDTH,Xg=ee.BORDER_LEFT_WIDTH,Vg=ee.MATRIX,pt=v.NODE_KEY,Kg=pt.NODE_CACHE,zg=pt.NODE_CACHE_TOTAL,jg=pt.NODE_CACHE_OVERFLOW,$g=pt.NODE_CACHE_MASK,Zg=pt.NODE_CACHE_FILTER,qg=pt.NODE_MATRIX,Jg=pt.NODE_MATRIX_EVENT,Qg=pt.NODE_OPACITY,tm=pt.NODE_COMPUTED_STYLE,em=pt.NODE_CURRENT_STYLE,rm=pt.NODE_LIMIT_CACHE,im=pt.NODE_REFRESH_LV,om=pt.NODE_CACHE_STYLE,nm=pt.NODE_DEFS_CACHE,am=pt.NODE_IS_MASK,sm=pt.NODE_DOM_PARENT,hm=pt.NODE_PERSPECTIVE_MATRIX,lm=pt.NODE_VIRTUAL_DOM,cm=pt.NODE_CACHE_AS_BITMAP,um=pt.NODE_STRUCT,ur=v.STRUCT_KEY,_m=ur.STRUCT_NODE,fm=ur.STRUCT_INDEX,dm=ur.STRUCT_TOTAL,pm=ur.STRUCT_HAS_MASK,gm=ur.STRUCT_LV,mm=Ia.NONE,vm=Ia.TRANSFORM_ALL,ym=Ia.OPACITY,xm=Ia.FILTER,Em=Ia.REPAINT,bm=Ia.contain,Mm=Ia.MIX_BLEND_MODE,Tm=Ia.PERSPECTIVE,Am=te.isE,Om=te.inverse,Rm=te.multiply,wm=re,Sm=qt,Im=fe.assignMatrix,Cm=fe.transformBbox;function km(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function Lm(W,t,e,r,i,o,U,n,X,V){var a=e[zg],s=e[Zg],h=e[$g],l=e[jg],c=e[em],u=e[tm];if(a&&a.available){var _=e[im],f=e[om];bm(_,vm)&&(f=t.__calMatrix(_,f,c,u,e),Im(e[qg],f)),bm(_,ym)&&(e[Qg]=u[Rg]=c[Rg]),bm(_,xm)&&t.__calFilter(c,u),bm(_,Mm)&&(u[Cg]=c[Cg])}else{for(var d,p,g=!0,m=t.__sx1,v=t.__sy1,y=[],x=[],E=1,b=i,M=r,T=r+(o||0)+1;M<T;M++){var A,O,R,w,S,I,C,k,L,D,N=U[M],P=N[_m],F=N[gm],B=N[dm],Y=N[pm];P instanceof ls||(O=(A=P.__config)[im],D=A[zg],R=A[Zg],w=A[$g],S=A[jg],I=A[tm],k=A[am],"none"===I[Og]||M!==r&&k?M+=(B||0)+Dm(U,M+(B||0)+1,Y||0):(M===r||(b<F?(q=C[Jg],Am(q)&&(q=null),y.push(q),E=C[Qg],x.push(E)):F<b&&(y.splice(-(L=b-F)),q=y[F-1],x.splice(-L),E=x[F-1])),b=F,N=(C=A)[em],k=A[om],F=L=void 0,O<Em?(bm(O,vm)?(L=P.__calMatrix(O,k,N,I,A),Im(A[qg],L)):L=A[qg],bm(O,ym)&&(I[Rg]=N[Rg]),F=I[Rg],bm(O,xm)&&(P.__bbox=null,P.__calFilter(N,I)),L=A[qg],bm(O,Mm)&&(I[Cg]=N[Cg])):(P.__bbox=null,M===r&&P.__calFilter(N,I),L=P.__calMatrix(O,k,N,I,A),Im(A[qg],L),F=I[Rg]=N[Rg]),M===r?(F=1,p=L,L=te.identity()):Am(q)||(L=Rm(q,L)),Im(A[Jg],L),A[Qg]=E*F,F=void 0,F=(D=yg([w,R,S,D]))?(M+=(B||0)+Dm(U,M+(B||0)+1,Y||0),D.bbox):P.bbox,F=Cm(F,L,0,0),M===r?d=F.slice(0):km(d,F,0,0)))}if(e[zg]=a=xa.getInstance(d,m,v),!a||!a.enabled)return;a.__available=!0;var c=a,H=c.dx,G=c.dy,K=c.dbx,z=c.dby,j=c.x,$=c.y,Z=a.ctx,q=null;b=i;for(var J={},Q={},tt=r,et=r+(o||0)+1;tt<et;tt++){var rt=U[tt],it=rt[_m],ot=rt[gm],nt=rt[dm],at=rt[pm];if(it instanceof ls)it.render(W,Em,Z,mg,H,G),Q.hasOwnProperty(tt)&&(Z=Ag(Z,Q[tt],X,V));else{var st=it.__config,ht=st[im],lt=st[zg],ct=st[Zg],ut=st[$g],_t=st[jg],rt=st[tm];if(J.hasOwnProperty(tt)){var ft=Qt(J[tt],3),dt=ft[0],pt=ft[1],gt=ft[2],mt=Ne.getCacheCanvas(X,V,null,"mask2");gt.mask=mt,gt.isClip=it.isClip;for(var vt=tt+(nt||0)+1;--pt;)vt+=(U[vt][dm]||0)+1;ft=Q[--vt]=Q[vt]||[];ft.push([dt,ot,bg,gt]),ft.push([vt,ot,Tg,{ctx:Z,target:mt}]),Z=mt.ctx}tt===r||(b<ot?(Am(q=yt)&&(q=null),y.push(q)):ot<b&&(y.splice(-(b-ot)),q=y[ot-1]));dt=rt[Lg],gt=rt[Dg],ft=rt[Og],mt=void 0;tt===r||Am(q)&&Am(dt)?mt=null:((gt=gt.slice(0))[0]+=K+it.__sx1-m+j,gt[1]+=z+it.__sy1-v+$,mt=fa.calMatrixByOrigin(dt,gt),Am(q)||(mt=Rm(q,mt))),mt?Z.setTransform(mt[0],mt[1],mt[4],mt[5],mt[12],mt[13]):Z.setTransform(1,0,0,1,0,0),b=ot;var yt=mt,_t=yg([ut,ct,_t,lt]);tt!==r&&_t?(tt+=(nt||0)+Dm(U,tt+(nt||0)+1,at||0),"none"!==ft&&(lt=rt[Cg],Sm(lt)?Z.globalCompositeOperation=wm(lt):Z.globalCompositeOperation="source-over",Z.globalAlpha=st[Qg],xa.drawCache(_t,a),Z.globalCompositeOperation="source-over")):(Em<=ht&&it.__calCache(W,Z,st[sm],st[om],st[em],rt,it.clientWidth,it.clientHeight,it.offsetWidth,it.offsetHeight,rt[Gg],rt[Wg],rt[Ug],rt[Xg],rt[Yg],rt[Bg],rt[Hg],rt[Fg],it.__sx1,it.__sx2,it.__sx3,it.__sx4,it.__sx5,it.__sx6,it.__sy1,it.__sy2,it.__sy3,it.__sy4,it.__sy5,it.__sy6),_t=it.render(W,ht,Z,tt===r?gg:mg,H,G),st[im]=Em,it=(rt=_t||{}).offscreenBlend,ht=rt.offscreenMask,st=rt.offscreenFilter,_t=rt.offscreenOverflow,it&&((Q[rt=tt+(nt||0)+Dm(U,tt+(nt||0)+1,at||0)]=Q[rt]||[]).push([tt,ot,Mg,it]),Z=it.target.ctx),ht&&(J[tt+(nt||0)+1]=[tt,at,ht],Z=ht.target.ctx),st&&((Q[ht=tt+(nt||0)+Dm(U,tt+(nt||0)+1,at||0)]=Q[ht]||[]).push([tt,ot,Eg,st]),Z=st.target.ctx),_t&&((Q[st=tt+(nt||0)+Dm(U,tt+(nt||0)+1,at||0)]=Q[st]||[]).push([tt,ot,xg,_t]),Z=_t.target.ctx),Q.hasOwnProperty(tt)&&(Z=Ag(Z,Q[tt],X,V)),"none"===ft&&(tt+=(nt||0)+Dm(U,tt+(nt||0)+1,at||0)))}}Im(e[Jg],p),e[im]=mm}a&&a.available&&(i=u[Ig],o=u[Sg],u=a,"hidden"===i&&(l&&l.available&&!g||(e[jg]=function(t,e){var r=t.bbox,i=e.bbox;if(!(i[0]>=r[0]&&i[1]>=r[1]&&i[2]<=r[2]&&i[3]<=r[3]))return xa.genOverflow(e,t)}(t,u),g=!0),u=e[jg]||u),o&&o.length&&(s&&s.available&&!g||(e[Zg]=(s=u,xa.genFilter(s,o)),g=!0),u=e[Zg]||u),!n||h&&h.available&&!g||(e[$g]=(e=u,u=function(t,e,r){for(var i,o,n={},a={},s=e.dx,h=e.dy,l=e.dbx,c=e.dby,u=e.x,_=e.y,f=e.ctx,d=t.__config[um],p=d[fm],t=d[dm],g=[],m=[],v=1,y=d[gm],x=p,E=p+(t||0)+1;x<E;x++){var b=U[x],M=b[_m],T=b[gm],A=b[dm],O=b[pm];if(M instanceof ls)M.render(W,Em,f,mg,s,h),a.hasOwnProperty(x)&&(f=Ag(f,a[x],X,V));else{var R=M.__config,w=R[im],S=R[zg],I=R[Zg],C=R[$g],k=R[jg],L=R[tm];if(n.hasOwnProperty(x)){var D=Qt(n[x],3),N=D[0],P=D[1],b=D[2],F=Ne.getCacheCanvas(X,V,null,"mask2");b.mask=F,b.isClip=M.isClip;for(var B=x+(A||0)+1;--P;)B+=(U[B][dm]||0)+1;D=a[--B]=a[B]||[];D.push([N,T,bg,b]),D.push([B,T,Tg,{ctx:f,target:F}]),f=F.ctx}x===p||(y<T?(Am(i=o)&&(i=null),g.push(i),v=H,m.push(v)):T<y&&(g.splice(-(G=y-T)),i=g[T-1],m.splice(-G),v=m[T-1]));var Y,H,y=T,D=L[Og],F=L[Lg],G=L[Dg],I=yg([C,I,k,S]);I?(x+=(A||0)+Dm(U,x+(A||0)+1,O||0),"none"!==D&&(Y=L[Cg],Sm(Y)?f.globalCompositeOperation=wm(Y):f.globalCompositeOperation="source-over",f.globalAlpha=R[Qg],xa.drawCache(I,e,F,te.identity(),G.slice(0),i,r),f.globalCompositeOperation="source-over")):(k=R[em],S=R[om],I=Y=void 0,w<Em?(bm(w,vm)?(Y=M.__calMatrix(w,S,k,L,R),Im(R[qg],Y)):Y=R[qg],bm(w,ym)&&(L[Rg]=k[Rg]),I=L[Rg],bm(w,xm)&&(M.__bbox=null,M.__calFilter(k,L)),Y=R[qg],bm(w,Mm)&&(L[Cg]=k[Cg])):(M.__bbox=null,x===p&&M.__calFilter(k,L),Y=M.__calMatrix(w,S,k,L,R),Im(R[qg],Y),I=L[Rg]=k[Rg]),x===p?(I=1,Y=te.identity()):i&&(Y=Rm(i,Y)),Im(R[Jg],Y),H=R[Qg]=v*I,I=void 0,x===p||Am(i)&&Am(F)?I=null:((G=G.slice(0))[0]+=l+M.__sx1-sx1+u,G[1]+=c+M.__sy1-sy1+_,I=fa.calMatrixByOrigin(F,G),Am(i)||(I=Rm(i,I))),(I=(o=I)&&(fe.equalArr(I,r)?te.identity():(r=te.inverse(r),te.multiply(r,I))))?f.setTransform(I[0],I[1],I[4],I[5],I[12],I[13]):f.setTransform(1,0,0,1,0,0),Em<=w&&M.__calCache(W,f,R[sm],R[om],R[em],L,M.clientWidth,M.clientHeight,M.offsetWidth,M.offsetHeight,L[Gg],L[Wg],L[Ug],L[Xg],L[Yg],L[Bg],L[Hg],L[Fg],M.__sx1,M.__sx2,M.__sx3,M.__sx4,M.__sx5,M.__sx6,M.__sy1,M.__sy2,M.__sy3,M.__sy4,M.__sy5,M.__sy6),I=M.render(W,w,f,mg,s,h),R[im]=Em,M=(L=I||{}).offscreenBlend,w=L.offscreenMask,R=L.offscreenFilter,I=L.offscreenOverflow,M&&((a[L=x+(A||0)+Dm(U,x+(A||0)+1,O||0)]=a[L]||[]).push([x,T,Mg,M]),f=M.target.ctx),w&&(n[x+(A||0)+1]=[x,O,w],f=w.target.ctx),R&&((a[w=x+(A||0)+Dm(U,x+(A||0)+1,O||0)]=a[w]||[]).push([x,T,Eg,R]),f=R.target.ctx),I&&((a[R=x+(A||0)+Dm(U,x+(A||0)+1,O||0)]=a[R]||[]).push([x,T,xg,I]),f=I.target.ctx),a.hasOwnProperty(x)&&(f=Ag(f,a[x],X,V)),"none"===D&&(x+=(A||0)+Dm(U,x+(A||0)+1,O||0)))}}},xa.genMask(e,t,u))))}function Dm(t,e,r){for(var i=0;r--;){var o=t[e][dm];i+=o||0,e+=o||0,i++,e++}return i}function Nm(t,e,r,i){var o=e.lockOneChannel(),n=Me.createTexture(t,null,o,r,i),a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);e=t.checkFramebufferStatus(t.FRAMEBUFFER);return e!==t.FRAMEBUFFER_COMPLETE&&Ne.error("Framebuffer object is incomplete: "+e.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[o,a,n]}function Pm(t,e,r,i,o,n,a,s,h,l,c,u){var _,f={},d={},p=function(t,e,r,i,o,n){var a,s=t.__sx1,h=t.__sy1,l=(u=t.__config)[Kg],c=(_=u[tm])[Sg],u=_[Ng],_=_[Pg],f=(l&&l.available?l:t).bbox.slice(0);u&&(a=fa.calPerspectiveMatrix(u,_));var d=[r],p=0;c.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t&&(p=ga.outerSize(e))}),o[r]=1;for(var g={};d.length;)for(var m=d.splice(0),v=0,y=m.length;v<y;v++)for(var x=m[v],E=x+1,b=x+(e[x][dm]||0)+1;E<b;E++){var M=e[E],T=M[_m],A=M[dm];if(!T.isMask){var O=T.__sx1,R=T.__sy1,w=T.__config,S=w[rm],I=w[Kg],C=w[zg],k=w[Zg],L=w[$g],D=w[jg],N=w[tm],P=N[Og],F=N[wg],M=N[Lg],w=N[Dg],N=N[Rg];if(S&&!n)return;"none"!==P?"hidden"!==F&&(i[E]=x,o[E]=o[x]*N,T instanceof ls||(S=void 0,N=void(F=P=0),(C=yg([L,k,D,C]))?(S=C.bbox.slice(0),P=C.dbx,F=C.dby,E+=A||0,N=!0):I&&I.available?(S=I.bbox.slice(0),P=I.dbx,F=I.dby):S=T.bbox.slice(0),S&&(S[0]-=s,S[1]-=h,S[2]-=s,S[3]-=h,T=g[x],M&&!Am(M)&&((w=w.slice(0))[0]+=O-s+P,w[1]+=R-h+F,w=fa.calMatrixByOrigin(M,w),T=T?Rm(T,w):w),T&&(g[E]=T),a&&(T=Rm(a,T)),S=Cm(S,T,p,p),A&&!N&&d.push(E),km(f,S,s,h)))):E+=A||0}}return[f,a]}(r,a,o,f,d,(t.getParameter(t.MAX_TEXTURE_SIZE),h)),g=Qt(p,2),p=g[0],m=g[1];p||(_=!0);var v=(p=h||_?[0,0,c,u]:p)[2]-p[0],y=p[3]-p[1],g=Qt(Nm(t,e,v,y),3),x=g[0],E=g[1],b=g[2],M=r.__sx1,T=r.__sy1,A=.5*v,O=.5*y,R=-p[0],w=-p[1],S=M-p[0],I=T-p[1];s&&s.available?e.addTexAndDrawWhenLimit(t,s,1,null,A,O,R,w):h&&(g=Ne.getCacheCanvas(v,y,"__$$OVERSIZE$$__"),r.render(rt.WEBGL,0,t,pg,0,0),s=e.lockOneChannel(),r=Me.createTexture(t,g.canvas,s),r=new Zp(t,r,0,0,v,y,[0,0,v,y]),e.addTexAndDrawWhenLimit(t,r,1,null,A,O,0,0),e.refresh(t,A,O),g.ctx.setTransform(1,0,0,1,0,0),g.ctx.globalAlpha=1,g.ctx.clearRect(0,0,v,y),r.release(),e.releaseLockChannel(s));for(var C={},k=o+1,L=o+(n||0)+1;k<L;k++){var D,N,P,F,B,Y,H,G,W,U=a[k],X=U[_m],V=U[dm],K=U[pm],z=X.__config,j=C[f[k]],$=d[k];X instanceof ls?(m&&(j=Rm(m,j)),e.addTexAndDrawWhenLimit(t,z[Kg],$,j,A,O,R,w)):(D=z[Kg],H=z[zg],G=z[Zg],B=z[$g],Y=z[jg],F=z[am],N=(W=z[tm])[Og],P=W[wg],U=W[Lg],z=W[Dg],W=W[Cg],"none"!==N?"hidden"===P||F||(U&&!Am(U)&&(F=z.slice(0),D&&D.available?(F[0]+=D.sx1,F[1]+=D.sy1):(F[0]+=X.__sx1,F[1]+=X.__sy1),z=I-T,F[0]+=S-M,F[1]+=z,F=fa.calMatrixByOrigin(U,F),j=j?Rm(j,F):F),j&&(C[k]=j),m&&(j=Rm(m,j)),(B=yg([B,G,Y,H,D]))?(Sm(W)?(e.refresh(t,A,O),Y=(G=Qt(Nm(t,e,v,y),3))[0],H=G[1],G=G[2],e.addTexAndDrawWhenLimit(t,B,$,j,A,O,R,w),e.refresh(t,A,O),x=(W=Qt(Ym(t,e,x,Y,E,b,wm(W),v,y),3))[0],E=W[1],b=W[2],t.deleteFramebuffer(H),t.deleteTexture(G)):e.addTexAndDrawWhenLimit(t,B,$,j,A,O,R,w),B!==D&&(k+=(V||0)+Dm(a,k+(V||0)+1,K||0))):X.__hookGlRender&&X.__hookGlRender(t,$,A,O,R,w)):k+=(V||0)+Dm(a,k+(V||0)+1,K||0))}e.refresh(t,A,O),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(E);p=new Zp(t,b,M,T,v,y,p);return e.releaseLockChannel(x,p.page),[h||_,p]}function Fm(s,h,t,e,r,i,o){var l=e.sx1,c=e.sy1,u=e.width,_=e.height,f=e.bbox,d=e;return r.forEach(function(t){var e,r,i,o,n,a=Qt(t,2),t=a[0],a=a[1];"blur"===t&&0<a?(r=function(t,e,r,i,o,n,a,s,h){var l=ga.kernelSize(i),c=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));for(;c<l;)l-=2;var u=ga.outerSizeByD(l);o+=2*u,n+=2*u;var _=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(_<o||_<n)){(h=h.slice(0))[0]-=u,h[1]-=u,h[2]+=u,h[3]+=u;for(var f=.5*o,d=.5*n,p=ga.gaussianWeight(i,l),g="",m="",v=Math.floor(.5*l),y=0;y<v;y++){var x=.01*(v-y);g+="v_texCoordsBlur[".concat(y,"] = a_texCoords + vec2(-").concat(x,", -").concat(x,") * u_direction;"),m+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(y,"]) * ").concat(p[y],";")}g+="v_texCoordsBlur[".concat(v,"] = a_texCoords;"),m+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(v,"]) * ").concat(p[v],";");for(var E=0;E<v;E++){var b=.01*(E+1);g+="v_texCoordsBlur[".concat(E+v+1,"] = a_texCoords + vec2(").concat(b,", ").concat(b,") * u_direction;"),m+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(E+v+1,"]) * ").concat(p[E+v+1],";")}g=qp.replace("[3]","["+l+"]").replace(/}$/,g+"}"),m=Jp.replace("[3]","["+l+"]").replace(/}$/,m+"}");var M=Me.initShaders(t,g,m);t.useProgram(M);var T=Qt(Nm(t,e,o,n),3),A=T[0],O=T[1],_=T[2],T=e.findExistTexChannel(r.page);-1===T?(T=e.lockOneChannel(),Me.bindTexture(t,r.page.texture,T)):e.lockChannel(T),_=Me.drawBlur(t,M,O,e,_,r.page.texture,A,T,o,n,f,d,u,l,i),t.deleteShader(M.vertexShader),t.deleteShader(M.fragmentShader),t.deleteProgram(M),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(O),e.releaseLockChannel(T);s=new Zp(t,_,a,s,o,n,h);return e.releaseLockChannel(A,s.page),[s,o,n,h]}}(s,h,d,a,u,_,l,c,f))&&(e=Qt(r,4),d=e[0],u=e[1],_=e[2],f=e[3]):"hue-rotate"===t?(r=et.d2r(a%360),e=Math.cos(r),r=Math.sin(r),(r=Bm(s,h,d,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],u,_,l,c,f))&&(i=Qt(r,4),d=i[0],u=i[1],_=i[2],f=i[3])):"saturate"===t&&100!==a?(i=Bm(s,h,d,[.213+.787*(i=.01*a),.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0],u,_,l,c,f))&&(o=Qt(i,4),d=o[0],u=o[1],_=o[2],f=o[3]):"brightness"===t&&100!==a?(o=Bm(s,h,d,[o=.01*a,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0],u,_,l,c,f))&&(n=Qt(o,4),d=n[0],u=n[1],_=n[2],f=n[3]):"grayscale"===t&&0<a?((n=1-.01*a)<0?n=0:1<n&&(n=1),(n=Bm(s,h,d,[.2126+.7874*n,.7152-.7152*n,.0722-.0722*n,0,0,.2126-.2126*n,.7152+.2848*n,.0722-.0722*n,0,0,.2126-.2126*n,.7152-.7152*n,.0722+.9278*n,0,0,0,0,0,1,0],u,_,l,c,f))&&(n=Qt(n,4),d=n[0],u=n[1],_=n[2],f=n[3])):"contrast"!==t||100===a||(a=Bm(s,h,d,[t=.01*a,0,0,0,a=-.5*t,0,t,0,0,a,0,0,t,0,a,0,0,0,1,0],u,_,l,c,f))&&(a=Qt(a,4),d=a[0],u=a[1],_=a[2],f=a[3])}),s.useProgram(s.program),s.viewport(0,0,i,o),d}function Bm(t,e,r,i,o,n,a,s,h){var l=Qt(Nm(t,e,o,n),3),c=l[0],u=l[1],_=l[2],l=e.findExistTexChannel(r.page);-1===l?(l=e.lockOneChannel(),Me.bindTexture(t,r.page.texture,l)):e.lockChannel(l),t.useProgram(t.programCm),Me.drawCm(t,t.programCm,l,i),e.releaseLockChannel(l),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u);s=new Zp(t,_,a,s,o,n,h.slice(0));return e.releaseLockChannel(c,s.page),[s,o,n,h]}function Ym(t,e,r,i,o,n,a,s,h){"multiply"===(a=wm(a))?u=tg:"screen"===a?u=eg:"overlay"===a?u=rg:"darken"===a?u=ig:"lighten"===a?u=og:"color-dodge"===a?u=ng:"color-burn"===a?u=ag:"hard-light"===a?u=sg:"soft-light"===a?u=hg:"difference"===a?u=lg:"exclusion"===a?u=cg:"hue"===a?u=ug:"saturation"===a?u=_g:"color"===a?u=fg:"luminosity"===a&&(u=dg);var l=Me.initShaders(t,Qp,u);t.useProgram(l);var c=Qt(Nm(t,e,s,h),3),a=c[0],u=c[1],c=c[2];return Me.drawMbm(t,l,r,i,s,h),t.useProgram(t.program),t.deleteShader(l.vertexShader),t.deleteShader(l.fragmentShader),t.deleteProgram(l),t.deleteFramebuffer(o),t.deleteTexture(n),e.releaseLockChannel(r),e.releaseLockChannel(i),[a,u,c]}var Hm={renderCanvas:function(a,t,e){for(var s=e.__structs,h=e.width,l=e.height,r=[],i=0,o=s.length;i<o;i++){var n,c,u,_=s[i],f=_[_m],d=_[gm],p=_[dm],g=_[pm];f instanceof ls||(c=(n=f.__config)[im],u=n[cm],_=n[tm],Em<=c&&f.__calCache(a,t,n[sm],n[om],n[em],_,f.clientWidth,f.clientHeight,f.offsetWidth,f.offsetHeight,_[Gg],_[Wg],_[Ug],_[Xg],_[Yg],_[Bg],_[Hg],_[Fg],f.__sx1,f.__sx2,f.__sx3,f.__sx4,f.__sx5,f.__sx6,f.__sy1,f.__sy2,f.__sy3,f.__sy4,f.__sy5,f.__sy6),u&&("none"!==_[Og]?r.push([i,d,p,f,n,g]):i+=(p||0)+Dm(s,i+(p||0)+1,g||0)))}r.length&&(r.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),r.forEach(function(t){var e=Qt(t,6),r=e[0],i=e[1],o=e[2],n=e[3],t=e[4],e=e[5];Lm(a,n,t,r,i,o||0,s,e,h,l)}));for(var m={},v={},y=0,x=s.length;y<x;y++){var E=s[y],b=E[_m],M=E[gm],T=E[dm],A=E[pm];if(b instanceof ls)b.render(a,Em,t,pg,0,0),v.hasOwnProperty(y)&&(t=Ag(t,v[y],h,l));else{var O=b.__config,R=O[zg],w=O[Zg],S=O[$g],I=O[jg],C=O[im],k=O[tm],L=k[Og],D=k[Cg],N=k[Rg];if(m.hasOwnProperty(y)){var P=Qt(m[y],3),F=P[0],B=P[1],E=P[2],k=Ne.getCacheCanvas(h,l,null,"mask2");E.mask=k,E.isClip=b.isClip;for(var Y=y+(T||0)+1;--B;)Y+=(s[Y][dm]||0)+1;P=v[--Y]=v[Y]||[];P.push([F,M,bg,E]),P.push([Y,M,Tg,{ctx:t,target:k}]),t=k.ctx}var H,G,w=yg([S,w,I,R]);w?(y+=(T||0)+Dm(s,(G=y)+(T||0)+1,A||0),"none"!==L&&(Sm(D)?t.globalCompositeOperation=wm(D):t.globalCompositeOperation="source-over",I=O[qg],D=(H=O[Jg]).slice(0),(O=O[sm].matrixEvent)&&!Am(O)&&(I=Rm(O,I)),fe.assignMatrix(H,I),xa.draw(t,N,H,w),t.globalCompositeOperation="source-over",v.hasOwnProperty(y)&&(t=Ag(t,v[y],h,l)),(w=!(w=R.isNew)&&!fe.equalArr(D,H)||w)&&function t(e,r,i,o,n){for(var a,s=[],h=n,l=o,c=r+1,u=r+(i||0)+1;c<u;c++){var _,f,d,p,g,m=e[c],v=m[_m],y=m[gm],x=m[dm],E=m[pm];v instanceof ls||(_=(g=v.__config)[Jg],f=g[zg],d=g[em],p=g[tm],m=g[om],"none"!==p[Og]?(l<y?(Am(a=h)&&(a=null),s.push(a)):y<l&&(s.splice(-(l-y)),a=s[y-1]),l=y,_=_.slice(0),m[Vg]=null,p=v.__calMatrix(Em,m,d,p,g),Im(g[qg],p),Am(a)||(p=Rm(a,p)),Im(g[Jg],p),h=p,f&&f.available&&((g=!(g=f.isNew)&&!fe.equalArr(_,p)||g)&&t(e,c,x||0,y,p),f.__isNew=!1,c+=(x||0)+Dm(e,c+(x||0)+1,E||0))):c+=(x||0)+Dm(e,c+(x||0)+1,E||0))}}(s,G,T||0,M,H),R.__isNew=!1)):(H=(G=b.render(a,C,t,pg,0,0)||{}).offscreenBlend,R=G.offscreenMask,b=G.offscreenFilter,C=G.offscreenOverflow,H&&((v[G=y+(T||0)+Dm(s,y+(T||0)+1,A||0)]=v[G]||[]).push([y,M,Mg,H]),t=H.target.ctx),R&&(m[y+(T||0)+1]=[y,A,R],t=R.target.ctx),b&&((v[R=y+(T||0)+Dm(s,y+(T||0)+1,A||0)]=v[R]||[]).push([y,M,Eg,b]),t=b.target.ctx),C&&((v[b=y+(T||0)+Dm(s,y+(T||0)+1,A||0)]=v[b]||[]).push([y,M,xg,C]),t=C.target.ctx),v.hasOwnProperty(y)&&(t=Ag(t,v[y],h,l)),"none"===L&&(y+=(T||0)+Dm(s,y+(T||0)+1,A||0)))}}},renderSvg:function(t,e,r,i){var o=r.__structs,n=r.width,a=r.height,s={};if(!i)for(var h=0,l=o.length;h<l;h++){var c=o[h],u=c[_m],_=c[dm],f=c[pm],c=u.__config,u=c[im],c=c[nm];f&&(Em<=u||bm(u,vm|ym))&&(s[h+(_||0)+1+f-1]=u),u<Em&&(s.hasOwnProperty(h)?(f=s[h],!bm(u,vm)&&f<Em&&!bm(f,vm)&&c.forEach(function(t){e.addCache(t)})):c.forEach(function(t){e.addCache(t)}))}for(var d,p,g={},m=[],v=[],y=0,x=0,E=o.length;x<E;x++){var b=o[x],M=b[_m],T=b[dm],A=b[pm],O=b[gm],R=M.__config,w=R[zg],S=R[im],I=R[nm],C=R[tm],b=C[Og];A&&"none"!==b&&(g[(F=(N=x+(T||0)+1)+A)-1]={index:x,start:N,end:F,isClip:o[N][_m].isClip}),O<y?(m.splice(-(k=y-O)),d=m[O-1],v.splice(-k),p=v[O-1]):y<O&&(m.push(P[qg]),L=P[lm],v.push(L),p=L);var k,L,D,N,P=R,F=void 0;if(S<Em&&!(M instanceof ls)?(R[im]=mm,F=R[lm],w&&w.available?(x+=T||0,F.cache=!0):(w&&(w.available=!0),F=R[lm]=M.__virtualDom=fe.extend({},F),M instanceof v1&&!(M instanceof ld)&&(F.children=[]),"none"===b?(x+=T||0,A&&(x+=A)):delete F.cache),N=R[em],k=R[tm],L=R[om],bm(S,vm)&&(w=M.__calMatrix(S,L,N,k,R),L=R[qg],Im(L,w),!w||Am(w)?delete F.transform:F.transform="matrix("+fe.joinArr(te.m2m6(w),",")+")",d&&w&&(w=Rm(d,w)),L=R[Jg],Im(L,w)),bm(S,ym)&&(1===(D=k[Rg]=N[Rg])?delete F.opacity:F.opacity=D),bm(S,xm)&&(D=M.__calFilter(N,k),(D=Tt.svgFilter(D))?F.filter=D:delete F.filter),bm(S,Mm)&&(N=k[Cg]=N[Cg],Sm(N)?F.mixBlendMode=wm(N):delete F.mixBlendMode),F.lv=S):(R[nm]&&R[nm].splice(0),M.render(t,S,e,pg,0,0),F=R[lm],"none"===(b=C[Og])&&(x+=T||0,A&&(x+=A))),g.hasOwnProperty(x)&&(s.hasOwnProperty(x)||Em<=S||bm(S,vm|ym))){var T=g[x],A=T.index,S=T.start,B=T.end,Y=T.isClip,H=o[A][_m],G=[];Y&&G.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(n,",0L").concat(n,",").concat(a,"L0,").concat(a,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var W=S;W<B;W++){var U=o[W][_m],X=U.computedStyle,V=X[Og],K=X[wg],z=X[kg],X=U.virtualDom,j=X.children,$=X.opacity;if("none"!==V&&"hidden"!==K)for(var j=fe.clone(j),G=G.concat(j),Z=0,q=j.length;Z<q;Z++){var J=j[Z],Q=J.tagName,tt=J.props;if("path"===Q){if(Y)for(var et=0,rt=tt.length;et<rt;et++){var it=tt[et];"fill"===it[0]&&(it[1]=fe.int2invert(z[0]))}var ot=U.matrix,J=Om(H.matrix),ot=Rm(J,ot);tt.push(["transform","matrix(".concat(fe.joinArr(te.m2m6(ot),","),")")]),fe.isNil($)||1===$||tt.push(["opacity",$])}else if("image"===Q){for(var nt,at=-1,st=0,ht=tt.length;st<ht;st++)if("transform"===tt[st][0]){at=st;break}-1===at?(nt=Om(H.matrix),Am(nt)||tt.push(["transform","matrix(".concat(fe.joinArr(te.m2m6(nt),","),")")])):(Q=tt[at][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),nt=Om(H.matrix),Q=Rm(nt,Q),tt[at][1]="matrix(".concat(fe.joinArr(te.m2m6(Q),","),")"))}}}for(var lt=I.length-1;0<=lt;lt--)"mask"===I[lt].tagName&&I.splice(lt,1);A={tagName:"mask",props:[],children:G},S=e.add(A);I.push(A),H.virtualDom.mask="url(#"+S+")"}p&&!M.isMask&&p.children.push(F),0===x&&(d=R[qg],p=F),y=O}},renderWebgl:function(t,v,e){for(var r,i,o,y=e.__structs,x=e.width,E=e.height,b=e.texCache,n=.5*x,a=.5*E,s=[],h=[],l=1,c=[],u=0,_=[],f=0,d=y.length;f<d;f++){var p=y[f],g=p[_m],m=p[gm],M=p[dm],T=p[pm];if(g instanceof ls)Em<=R&&g.render(t,Em,v,vg,0,0);else{var A=g.__config,O=A[im];0===f||(u<m?(r=w[Jg],Am(r)&&(r=null),s.push(r),l=w[Qg],h.push(l),i=w[hm],Am(i)&&(i=null),c.push(i)):m<u&&(s.splice(-(L=u-m)),r=s[m-1],h.splice(-L),l=h[m-1],c.splice(-L),i=c[m-1]));var R=O,w=A,u=m,S=A[zg],I=A[tm];if("none"!==I[Og]){var C=void 0;if(O<Em){A[im]=mm,T&&((D=A[$g])&&D.available||_.push(C=[f,m,M,g,A,null,T]));var k=A[em],p=A[om],L=A[Jg];bm(O,Tm)&&g.__calPerspective(p,k,I,A);var D=void 0;bm(O,vm)?(D=g.__calMatrix(O,p,k,I,A),Im(A[qg],D)):D=A[qg],(fa.isPerspectiveMatrix(D)||i)&&(C?C[9]=!0:C=[f,m,M,g,A,null,null,null,null,!0]),i&&(D=Rm(i,D)),r&&(D=Rm(r,D)),Im(L,D);D=void 0,D=bm(O,ym)?I[Rg]=k[Rg]:I[Rg];if(A[Qg]=l*D,bm(O,xm)&&(g.__bbox=null,D=g.__calFilter(k,I),C?C[7]=D:_.push(C=[f,m,M,g,A,null,T,D])),bm(O,Mm)&&(I[Cg]=k[Cg]),S&&S.available){f+=M||0;continue}}else{O=g.render(t,O,v,vg,0,0);O&&Ne.isWebGLTexture(O.texture)&&(N=g.__sx1,P=g.__sy1,F=g.offsetWidth,B=g.offsetHeight,Y=g.bbox,A[Kg]=new Zp(v,O.texture,N,P,F,B,Y),v.viewport(0,0,x,E),v.useProgram(v.program))}var N=A[rm],P=A[cm],F=I[Ig],B=I[Sg],Y=I[Cg],I=I[Lg],Y=Sm(Y),I=fa.isPerspectiveMatrix(I)||i;(P||T||B.length||"hidden"===F&&M||Y||I)&&(Y&&(o=!0),C?(C[5]=N,C[7]=B,C[8]=F,C[9]=I,C[10]=P):_.push([f,m,M,g,A,N,T,B,F,I,P]))}else f+=M||0}}var H,G,W,U,X={};_.length&&(_.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),H={},_.forEach(function(t){var e=Qt(t,11),r=e[0],i=e[1],o=e[2],n=e[3],a=e[4],s=e[5],h=e[6],l=e[7],c=e[8],u=e[9],_=e[10];if(u){for(var f=a[sm];f;){var d=f.__config,p=d[um][fm];if(H[p])break;(fa.isPerspectiveMatrix(d[qg])||d[hm])&&(H[p]=!0),f=d[sm]}if(!(H[r]||h||l.length||"hidden"===c||_))return}var g,m=a[Kg],t=a[zg],e=a[Zg],u=a[$g],_=a[jg];t&&t.available||(o=(g=Qt(Pm(v,b,n,0,r,o||0,y,m,s,0,x,E),2))[0],t=m=g[1],g=!0,(s=o)||(a[zg]=m));"hidden"===c&&(_&&_.available&&!g||(_=function(t,e,r,i,o,n){var a=r.bbox.slice(0),s=i.bbox;if(!(s[0]>=a[0]&&s[1]>=a[1]&&s[2]<=a[2]&&s[3]<=a[3])){var h=a[2]-a[0],l=a[3]-a[1],c=Qt(Nm(t,e,h,l),3),u=c[0],_=c[1],r=c[2],c=e.findExistTexChannel(i.page);-1===c?(c=e.lockOneChannel(),Me.bindTexture(t,i.page.texture,c)):e.lockChannel(c),t.useProgram(t.programOverflow),Me.drawOverflow(t,c,a[0]-s[0],a[1]-s[1],h,l,i.width,i.height),e.releaseLockChannel(c),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,o,n),t.deleteFramebuffer(_);a=new Zp(t,r,i.sx1,i.sy1,h,l,a);return e.releaseLockChannel(u,a.page),a}}(v,b,n,t,x,E))&&(t=_,g=!0,s||(a[Zg]=t))),l.length&&(e&&e.available&&!g||(t=Fm(v,b,0,e=t,l,x,E))!==e&&(g=!0,s||(a[Zg]=t))),!h||u&&u.available&&!g||(t=function(t,e,r,i,o,n,a,s,h){var l=o.sx1,c=o.sy1,u=o.width,_=o.height,f=o.bbox,d=o.dx,p=o.dy,g=.5*u,m=.5*_,v=(E=i[tm])[Lg],y=E[Dg],x=Am(v)?te.identity():((q=y.slice(0))[0]+=l+d,q[1]+=c+p,fa.calMatrixByOrigin(v,q));x=te.inverse(x);for(var E=(i=Qt(Nm(t,e,u,_),3))[0],y=i[1],v=i[2],b=r.next,M=b.isClip,T=[];b&&b.isMask&&b.isClip===M;)T.push(b),b=b.next;for(var A=0,O=T.length;A<O;A++)for(var R=[],w=void 0,S=void 0,I=[],C=1,k=void 0,L=s,D=T[A].__config[um],N=D[fm],P=N,F=N+(D[dm]||0)+1;P<F;P++){var B=h[P],Y=B[_m],H=B[gm],G=B[dm],W=B[pm],U=Y.__config,X=U[Kg],V=U[tm],K=U[rm];if("none"!==V[Og])if(Y instanceof ls){if(X&&X.available)e.addTexAndDrawWhenLimit(t,X,C,e.last[2],g,m,0,0,!0);else if(K)return}else{var z=U[Kg],j=U[$g],$=U[Zg],Z=U[jg],B=U[zg],V=U[tm],Y=V[Rg],X=V[Lg],U=V[Dg];P===N||(L<H?(Am(w=S)&&(w=null),R.push(w),C=k,I.push(C)):H<L&&(R.splice(-(V=L-H)),w=R[H-1],I.splice(-V),C=I[H-1]));L=H,$=yg([j,$,Z,B,z]);if($){Z=void 0,Z=Am(X)?te.identity():((B=U.slice(0))[0]+=$.bbox[0]+d,B[1]+=$.bbox[1]+p,fa.calMatrixByOrigin(X,B));Z=te.multiply(x,Z);U=U.slice(0);U[0]+=$.bbox[0]+d,U[1]+=$.bbox[1]+p,S=fa.calMatrixByOrigin(X,U),Am(w)||(S=Rm(w,S)),e.addTexAndDrawWhenLimit(t,$,k=C*Y,Z,g,m,d,p,!0),$!==z&&(P+=(G||0)+Dm(h,P+(G||0)+1,W||0))}else if(K)return}else P+=(G||0)+Dm(h,P+(G||0)+1,W||0)}e.refresh(t,g,m),t.deleteFramebuffer(y);var q=e.findExistTexChannel(o.page);return-1===q?(q=e.lockOneChannel(),Me.bindTexture(t,o.page.texture,q)):e.lockChannel(q),i=Qt(Nm(t,e,u,_),3),r=i[0],y=i[1],o=i[2],i=M?t.programClip:t.programMask,t.useProgram(i),Me.drawMask(t,E,q,i),t.deleteTexture(v),e.releaseLockChannel(E),e.releaseLockChannel(q),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,n,a),t.deleteFramebuffer(y),f=new Zp(t,o,l,c,u,_,f),e.releaseLockChannel(r,f.page),f}(v,b,n,a,t,x,E,i,y),s||(a[$g]=t)),s&&(X[r]=t)})),o&&(G=($=Qt(Nm(v,b,x,E),3))[0],W=$[1],U=$[2]);for(var V,K,z,j,$,Z=0,q=y.length;Z<q;Z++){var J,Q,tt,et,rt,it,ot,nt,at,st,ht,lt,ct=y[Z],ut=ct[_m],_t=ct[dm],ft=ct[pm],dt=ut.__config;ut instanceof ls?(nt=dt[Kg],rt=dt[rm],ot=(Q=dt[sm].__config)[Jg],et=Q[Qg],nt&&nt.available?b.addTexAndDrawWhenLimit(v,nt,et,ot,n,a,0,0,!0):rt&&(lt=Ne.getCacheCanvas(x,E,"__$$OVERSIZE$$__"),ut.render(t,0,v,pg,0,0),ht=b.lockOneChannel(),tt=Me.createTexture(v,lt.canvas,ht),st=new Zp(v,tt,0,0,x,E,[0,0,x,E]),b.addTexAndDrawWhenLimit(v,st,et,ot,n,a,0,0,!0),b.refresh(v,n,a,!0),lt.ctx.setTransform(1,0,0,1,0,0),lt.ctx.globalAlpha=1,lt.ctx.clearRect(0,0,x,E),st.release(),b.releaseLockChannel(ht))):(J=dt[Qg],ct=dt[Jg],Q=dt[rm],nt=dt[Kg],rt=dt[zg],tt=dt[Zg],et=dt[$g],ot=dt[jg],lt=dt[im],ht=(st=dt[tm])[Og],dt=st[wg],st=st[Cg],"none"!==ht?(ot=yg([et,tt,ot,rt,nt]))?(o&&Sm(st)?(b.refresh(v,n,a,!0),rt=(at=Qt(Nm(v,b,x,E),3))[0],it=at[1],at=at[2],b.addTexAndDrawWhenLimit(v,ot,J,ct,n,a,0,0,!0),b.refresh(v,n,a,!0),G=(rt=Qt(Ym(v,b,G,rt,W,U,wm(st),x,E),3))[0],W=rt[1],U=rt[2],v.deleteFramebuffer(it),v.deleteTexture(at)):b.addTexAndDrawWhenLimit(v,ot,J,ct,n,a,0,0,!0),ot!==nt&&(Z+=(_t||0)+Dm(y,Z+(_t||0)+1,ft||0))):X.hasOwnProperty(Z)?(it=X[Z],o&&Sm(st)?(b.refresh(v,n,a,!0),ot=(at=Qt(Nm(v,b,x,E),3))[0],nt=at[1],at=at[2],b.addTexAndDrawWhenLimit(v,it,J,ct,n,a,0,0,!0),b.refresh(v,n,a,!0),G=(st=Qt(Ym(v,b,G,ot,W,U,wm(st),x,E),3))[0],W=st[1],U=st[2],v.deleteFramebuffer(nt),v.deleteTexture(at)):b.addTexAndDrawWhenLimit(v,it,J,ct,n,a,0,0,!0),Z+=(_t||0)+Dm(y,Z+(_t||0)+1,ft||0)):Q&&"none"!==ht&&"hidden"!==dt?(ht=Ne.getCacheCanvas(x,E,"__$$OVERSIZE$$__"),ut.render(t,lt,v,pg,0,0),dt=b.lockOneChannel(),lt=Me.createTexture(v,ht.canvas,dt),lt=new Zp(v,lt,0,0,x,E,[0,0,x,E]),b.addTexAndDrawWhenLimit(v,lt,J,ct,n,a,0,0,!0),b.refresh(v,n,a,!0),ht.ctx.setTransform(1,0,0,1,0,0),ht.ctx.globalAlpha=1,ht.ctx.clearRect(0,0,x,E),lt.release(),b.releaseLockChannel(dt)):ut.__hookGlRender&&ut.__hookGlRender(v,J,n,a,0,0,!0):Z+=(_t||0)+Dm(y,Z+(_t||0)+1,ft||0))}b.refresh(v,n,a,!0),o&&(v.bindFramebuffer(v.FRAMEBUFFER,null),b.releaseLockChannel(G),v.deleteFramebuffer(W),V=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,V),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),v.STATIC_DRAW),K=v.getAttribLocation(v.program,"a_position"),v.vertexAttribPointer(K,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(K),z=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,z),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),v.STATIC_DRAW),j=v.getAttribLocation(v.program,"a_texCoords"),v.vertexAttribPointer(j,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(j),e=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,e),v.bufferData(v.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),v.STATIC_DRAW),$=v.getAttribLocation(v.program,"a_opacity"),v.vertexAttribPointer($,1,v.FLOAT,!1,0,0),v.enableVertexAttribArray($),$=v.getUniformLocation(v.program,"u_texture"),v.uniform1i($,G),v.drawArrays(v.TRIANGLES,0,6),v.deleteBuffer(V),v.deleteBuffer(z),v.deleteBuffer(e),v.disableVertexAttribArray(K),v.disableVertexAttribArray(j),v.deleteTexture(U))}},Gm="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Wm=function(){function e(t){_(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return f(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,o,n){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length?arguments[8]:void 0,l=this.__pages,c=this.__list,u=e.page;-1<l.indexOf(u)||(l.length>=this.__units-this.__lockUnits&&this.refresh(t,o,n,h),l.push(u)),c.push([e,r,i,a,s])}},{key:"refresh",value:function(t,e,r,i){var o=this.__pages,n=this.__list;if(o.length){var a=this.channels,s=this.locks,h={};a.forEach(function(t,e){t&&(t=t.uuid,h[t]=e)});var l=this.__units,c=new Array(l),u=[];if(o.forEach(function(t){var e=t.uuid;h.hasOwnProperty(e)?(e=h[e],c[e]=t):u.push(t)}),u.length){for(var _=0;_<l&&(c[_]||a[_]||s[_]||(c[_]=u.shift(),u.length));_++);var f=u.length;if(f){for(var d=[],p=0;p<l;p++)c[p]||s[p]||d.push([p,a[p]]);d.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var g=0;g<f;g++)c[d[g][0]]=u[g]}}for(var m={},v=0,y=c.length;v<y;v++){var x,E=c[v];E&&((x=a[v])&&x===E&&!E.update||(E instanceof $p?Me.bindTexture(t,E.texture,v):(!x||x instanceof $p||t.deleteTexture(x.texture),E.texture=Me.createTexture(t,E.canvas,v)),a[v]=E),m[E.uuid]=v,E.update=!1,E.time=Ne.now())}Me.drawTextureCache(t,n,m,e,r,i),o.splice(0),n.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i=this.__units,o=[],n=0;n<i;n++)e[n]||o.push([n,t[n]]);if(o.length){o.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});var a=o[0][0];return t[a]=null,e[a]=!0,this.__lockUnits++,a}throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),e}(),mr=v.STYLE_KEY,Um=mr.TOP,T=mr.RIGHT,Xm=mr.BOTTOM,Jt=mr.LEFT,Vm=mr.POSITION,Km=mr.DISPLAY,zm=mr.VISIBILITY,jm=mr.COLOR,$m=mr.WIDTH,Zm=mr.HEIGHT,qm=mr.Z_INDEX,Jm=mr.MARGIN_TOP,Qm=mr.MARGIN_LEFT,tv=mr.MARGIN_BOTTOM,ev=mr.PADDING_TOP,rv=mr.PADDING_LEFT,iv=mr.PADDING_BOTTOM,ov=mr.BORDER_TOP_WIDTH,nv=mr.BORDER_LEFT_WIDTH,av=mr.BORDER_BOTTOM_WIDTH,sv=mr.POINTER_EVENTS,Y=v.UPDATE_KEY,hv=Y.UPDATE_NODE,lv=Y.UPDATE_STYLE,cv=Y.UPDATE_KEYS,uv=Y.UPDATE_COMPONENT,_v=Y.UPDATE_FOCUS,fv=Y.UPDATE_MEASURE,dv=Y.UPDATE_OVERWRITE,pv=Y.UPDATE_LIST,gv=Y.UPDATE_CONFIG,mv=Y.UPDATE_ADD_DOM,vv=Y.UPDATE_REMOVE_DOM,ee=v.NODE_KEY,yv=ee.NODE_TAG_NAME,xv=ee.NODE_CACHE_STYLE,Ev=ee.NODE_CACHE_PROPS,bv=ee.NODE_CURRENT_STYLE,Mv=ee.NODE_COMPUTED_STYLE,Tv=ee.NODE_CURRENT_PROPS,Av=ee.NODE_DOM_PARENT,Ov=ee.NODE_IS_MASK,Rv=ee.NODE_REFRESH_LV,wv=ee.NODE_IS_DESTROYED,Sv=ee.NODE_STYLE,Iv=ee.NODE_UPDATE_HASH,Cv=ee.NODE_UNIQUE_UPDATE_ID,kv=ee.NODE_CACHE,Lv=ee.NODE_CACHE_TOTAL,Dv=ee.NODE_CACHE_FILTER,Nv=ee.NODE_CACHE_OVERFLOW,Pv=ee.NODE_CACHE_MASK,Fv=ee.NODE_STRUCT,pt=v.STRUCT_KEY,Bv=pt.STRUCT_INDEX,Yv=pt.STRUCT_TOTAL,Hv=pt.STRUCT_NODE,Gv=(n(ur={},Um,!0),n(ur,T,!0),n(ur,Xm,!0),n(ur,Jt,!0),ur),Wv=fe.isNil,Uv=fe.isObject,Xv=fe.isFunction,Vv=w.AUTO,Kv=w.PX,zv=w.PERCENT,jv=w.INHERIT,$v=Mo.isRelativeOrAbsolute,Zv=Mo.equalStyle,qv=Ia.contain,Jv=Ia.getLevel,Qv=Ia.isRepaint,ty=Ia.NONE,ey=Ia.FILTER,ry=Ia.PERSPECTIVE,iy=Ia.REPAINT,oy=Ia.REFLOW,ny=Ia.REBUILD,ay=Cr.isIgnore,sy=Cr.isGeom,hy=Cr.isMeasure,ly={canvas:"canvas",svg:"svg",webgl:"canvas"};var cy=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function uy(t,e){return t.currentStyle[e][1]!==Vv}function _y(t,e){var r=uy(t,$m)&&uy(t,Zm);if(r&&e){t=t.domParent;if(t&&("flex"===t.currentStyle[Km]||"flex"===t.computedStyle[Km]))return}return r}function fy(t){return t.hasOwnProperty("__uniqueReflowId")}var dy=0;function py(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=dy,e[dy++]={node:t,component:r,addDom:i})}var gy=0;function my(t,e,r,i,o,n,a,s,h){var l,c=r[hv],u=r[lv],_=r[dv],f=r[_v],d=r[uv],p=r[fv],g=r[pv],m=r[cv],v=r[gv],y=r[mv],x=r[vv];if(!v[wv]){_&&Object.assign(v[Sv],_),g&&!d&&(m=(m||[]).slice(0),l={},m.forEach(function(t){l[t]=!0}),g.forEach(function(t){var e=t[lv],r=t[dv];(t[cv]||[]).forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,m.push(t))}),r&&Object.assign(v[Sv],r),e&&(u?Object.assign(u,e):u=e)}));var E,b,M,T,A=v[yv],O=v[xv],R=v[Ev],w=v[bv],r=v[Mv],S=v[Tv],_=v[Av],g=v[Ov],I=f||ty,C=p;if(!d&&u&&m)for(var k=0,L=m.length;k<L;k++){var D=m[k],N=u[D];if(c instanceof rp&&sy(A,D))Zv(D,N,S[D],c)||(I|=iy,R[D]=void 0,S[D]=N);else if(!Zv(D,N,w[D],c))if(ay(D))O[D]=void 0,w[D]=N;else{if(Gv.hasOwnProperty(D)){var P=w[Vm];if("relative"!==P&&"absolute"!==P){delete u[D];continue}}else D===Km&&(T=!0);I|=Jv(D),hy(D)&&(C=!0),O[D]=void 0,w[D]=N,D===qm&&c!==e&&(E=!0),D===zm&&(b=!0),D===jm&&(M=!0)}}if(I!==ty||d){if("none"!==r[Km]||T){if(E&&_&&delete _.__zIndexChildren,b||M)for(var F=e.__structs,p=c.__config[Fv],B=p[Bv]+1,Y=B+p[Yv];B<Y;B++){var H=F[B],G=H[Hv],W=H[Yv],U=G.__config,X=U[bv],H=void 0;b&&(G instanceof ls||X[zm][1]===jv)&&(H=!0),(H=M&&(G instanceof ls||X[jm][1]===jv)?!0:H)?(U[Rv]|=iy,G instanceof Hf&&G.clearCache()):B+=W||0}if(g){for(var V=c.prev;V&&V.isMask;)V=V.prev;V&&V.__config[Pv]&&V.__config[Pv].release()}var K=_;if(T&&K){g=K.__config;if("none"===g[bv][Km]||"none"===g[Mv][Km])return void(r[Km]="none")}!d&&Qv(I)?(E&&t===rt.SVG&&(I|=iy,_&&vy(_)),E&&!d&&s&&_&&!_.hasOwnProperty("__uniqueZId")&&(s[gy]=!0,_.__uniqueZId=gy++,h.push(_))):(i.push({node:c,style:u,component:d,addDom:y,removeDom:x}),C&&o.push(c)),v[Rv]|=I,e.__rlv=d||y||x?ny:Math.max(e.__rlv,I);t=iy<=I||t===rt.SVG&&c instanceof rp;for(t&&v[kv]&&v[kv].release(),(t||qv(I,ry))&&(v[Lv]&&v[Lv].release(),v[Pv]&&v[Pv].release(),v[Nv]&&v[Nv].release()),(t||qv(I,ey))&&v[Dv]&&v[Dv].release();K;){var z=K.__config;if(z.hasOwnProperty(Cv)){var j=z[Cv];if(n.hasOwnProperty(j))break;n[j]=!0}else n[gy]=!0,z[Cv]=gy++,a.push(z);j=z[Rv];iy<=j&&z[kv]&&z[kv].release(),z[Lv]&&z[Lv].release(),z[Dv]&&z[Dv].release(),z[Pv]&&z[Pv].release(),z[Nv]&&z[Nv].release(),K=z[Av]}return!0}}else delete v[Cv]}}function vy(t,e){var r=t.__config;e?r[Rv]|=iy:r[Lv].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof Bs?t.shadowRoot:t)instanceof ls||vy(t,!0)})}var yy=0,xy=function(){t(o,v1);var i=e(o);function o(t,e,r){return _(this,o),(e=i.call(this,t,e)).__cd=r||[],e.__dom=null,e.__mw=0,e.__mh=0,e.__taskUp=[],e.__taskCp=[],e.__ref={},e.__reflowList=[{node:a(e)}],e.__animateController=new zp,ks.mix(a(e)),e.__config[Iv]=e.__updateHash={},e.__uuid=yy++,e.__rlv=ny,e}return f(o,[{key:"__initProps",value:function(){var t=this.props.width;Wv(t)||0<(e=parseFloat(t)||0)&&(this.__width=e);var e=this.props.height;Wv(e)||0<(e=parseFloat(e)||0)&&(this.__height=e)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?fe.joinSourceArray(e):fe.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+fe.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,o,n,a,s,h,l;return-1===["touchend","touchcancel"].indexOf(t.type)&&(a=this.dom,e=this.__scx,r=this.__scy,i=(l=a.getBoundingClientRect()).x,o=l.y,s=l.left,h=l.top,n=l.width,a=l.height,s=(l=t.touches?t.touches[0]:t).clientX-(s=i||s||0),h=l.clientY-(h=o||h||0),Wv(e)?s*=this.width/n:s/=e,Wv(r)?h*=this.height/a:h/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:h,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){t=this.__wrapEvent(t);return this.__emitEvent(t),t}}},{key:"appendTo",value:function(t){t=function(t){if(fe.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Is.initRoot(this.__cd,this),this.__initProps();var e=(this.__root=this).tagName,e=ly[e];"undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===e?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(e),this.__dom||(t.innerHTML=this.__genHtml(e),this.__dom=t.querySelector(e))),this.__defs=this.dom.__defs||cd.getInstance(this.__uuid),this.width&&this.height||(e=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height)));var n,a,r,t=Object.assign({},ge,this.props.contextAttributes);"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d",t),this.__renderMode=rt.CANVAS):"svg"===this.tagName?this.__renderMode=rt.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",t),this.__renderMode=rt.WEBGL,t.program=Me.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=Me.initShaders(t,Gm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=Me.initShaders(t,Gm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=Me.initShaders(t,Gm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=Me.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.useProgram(t.program),t=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new Wm(t)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof o&&this.dom.__root.destroy(),this.__eventCbList=(n=this.dom,a=o,r=[],cy.forEach(function(o){function t(t){var e=n.__root;if(e&&e instanceof a)if(-1<["touchend","touchcancel","touchmove"].indexOf(o)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}n.addEventListener(o,t),r.push([o,t])}),r),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,o=this.ctx,n=this.defs,a=this.width,s=this.height;if(!r){if(n.clear(),e)this.__checkRoot(i,a,s),this.__computeMeasure(i,o);else if(!this.__checkUpdate(i,o,a,s))return;Ne.measureText(),this.__checkReflow(a,s),i!==rt.CANVAS||this.props.noRender?i!==rt.SVG||this.props.noRender?i!==rt.WEBGL||this.props.noRender||(this.__clear(o,i),Hm.renderWebgl(i,o,this)):(Hm.renderSvg(i,n,this,e),(e=this.virtualDom).defs=n.value,this.dom.__vd?Lp(this.dom,this.dom.__vd,e):this.dom.innerHTML=fe.joinVirtualDom(e),this.dom.__vd=e,this.dom.__defs=n):(this.__clear(o,i),Hm.renderCanvas(i,o,this)),Xv(t)&&t(),this.emit(ks.REFRESH,this.__rlv),this.__rlv=ty}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var e,t=this.dom;t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null);t=this.ctx;this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t!==this.width||e!==this.height?(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r)):Xv(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var i,o=this,e=this.taskUp;this.isDestroyed||(e.length||(fh.nextFrame({__before:function(r){o.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){Uv(t)&&Xv(t.__before)&&t.__before(r)})},__after:function(e){o.isDestroyed||i.forEach(function(t){Uv(t)&&Xv(t.__after)?t.__after(e):Xv(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,o=this,i=this.taskCp;this.isDestroyed||(i.length||(fh.__nextFrameCp({__before:function(e){o.isDestroyed||(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),Tp.check(o),Tp.updateList.length&&Tp.updateList.forEach(function(t){var e=t.root,r=t.shadowRoot;r instanceof ls&&(r=r.domParent);var i={};i[hv]=r,i[lv]=r.currentStyle,i[_v]=oy,i[fv]=!0,i[uv]=t,i[gv]=r.__config,o.__addUpdate(r,r.__config,e,e.__config,i)}))},__after:function(e){o.isDestroyed||(r.forEach(function(t){t.__after(e)}),Tp.did())}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t))}},{key:"getTargetAtPoint",value:function(t,e,E){return function t(e,r,i,o,n){var a=e.__sx1,s=e.__sy1,h=e.offsetWidth,l=e.offsetHeight,c=e.matrixEvent,u=e.children,_=e.zIndexChildren,f=e.computedStyle,d=f[Km],f=f[sv];if(E||"none"!==d){if(Array.isArray(_)){for(var p=0,g=u.length;p<g;p++)u[p].__index__=p;for(var m=_.length-1;0<=m;m--){var v=_[m];if(!(v instanceof karas.Text)){var y=o.slice();y.push(v.__index__);var x=n.slice();if(x.push(m),x=t(v,r,i,y,x))return x}}}if(E||"none"!==f)return et.pointInQuadrilateral(r,i,a,s,a+h,s,a+h,s+l,a,s+l,c)?{target:e,path:o,zPath:n}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,o=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(o[Km])&&(n[Km]=o[Km]="block"),"absolute"===o[Vm]&&(n[Vm]=o[Vm]="static"),o[$m]=[e,Kv],o[Zm]=[r,Kv],n[$m]=e,n[Zm]=r,t===rt.CANVAS||t===rt.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===rt.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,o){i=i[Iv];t===r?(i=r.__updateRoot)?(o[_v]&&(i[_v]|=o[_v]),o[fv]&&(i[fv]=!0),o[lv]&&(i[pv]=i[pv]||[]).push((n(t={},lv,o[lv]),n(t,dv,o[dv]),n(t,cv,o[cv]),t))):r.__updateRoot=o:e.hasOwnProperty(Cv)?i.hasOwnProperty(e[Cv])?(r=i[e[Cv]],o[_v]&&(r[_v]|=o[_v]),o[fv]&&(r[fv]=!0),o[lv]&&(r[pv]=r[pv]||[]).push((n(r={},lv,o[lv]),n(r,dv,o[dv]),n(r,cv,o[cv]),r))):Ne.error("Update process miss uniqueUpdateId"):(e[Cv]=gy,i[gy++]=o)}},{key:"__checkUpdate",value:function(h,l,t,e){var c=this,r=[],i=[],o={},n=[],a={},s=[],u=c.__updateRoot,_=c.__updateHash;u&&(c.__updateRoot=null,(m=my(h,c,u,i,r,o,n))&&c.__checkRoot(h,t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var g=my(h,c,_[f[d]],i,r,o,n,a,s),m=m||g;c.__reflowList=i,gy=0,c.__updateHash=c.__config[Iv]={},n.forEach(function(t){delete t[Cv]}),s.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(c.__structs))});var v={};r.forEach(function(t){var e=t.__config,r=e[Cv],i=e[Av];if(t!==c){if(v.hasOwnProperty(r))return;v[r]=!0}var o=t;if(t!==c&&(_[r][mv]||Cr.isMeasureInherit(_[r][lv])))for(;i&&i!==c;){var n=i,a=n.__config[Cv],s=n.currentStyle;if(!(i.__config.hasOwnProperty(Cv)?(n=_[a][lv],v[a]=!0,!!Cr.measureInheritList(n).length):Cr.isMeasureInherit(s)))break;i=(o=i).domParent}o.__computeMeasure(h,l,function(t){t.__config.hasOwnProperty(Cv)&&(v[t.__config[Cv]]=!0)})});for(var y=0,x=f.length;y<x;y++)delete _[f[y]][gv][Cv];return m}},{key:"__checkReflow",value:function(t,e){var S=this,r=this.__reflowList;if(r.length){for(var i,Q=this,o=[],tt={},n=dy=0,a=r.length;n<a;n++){var s=r[n],h=s.node,l=s.component,c=s.addDom,u=s.removeDom;if(h===this){i=!0;break}if((h=c&&h instanceof Bs?h.shadowRoot:h).hasOwnProperty("__uniqueReflowId")||(h.__uniqueReflowId=dy,tt[dy++]=s),function(t,e,r,i,o){if(!o||"absolute"!==r.currentStyle[Vm]){var n=r;if(-1<["inline","inlineBlock","inline-block"].indexOf(n.currentStyle[Km])||-1<["inline","inlineBlock","inline-block"].indexOf(n.computedStyle[Km])){do{if((n=n.domParent)===t)return 1;if(fy(n))return;if("absolute"===n.currentStyle[Vm]||"absolute"===n.computedStyle[Vm])return void py(n,e,i,o)}while(n&&(-1<["inline","inlineBlock","inline-block"].indexOf(n.currentStyle[Km])||-1<["inline","inlineBlock","inline-block"].indexOf(n.computedStyle[Km])));if(_y(n,!0))return void py(n,e,i,o)}var a,s=n.domParent;if(!fy(s)){do{if(fy(s))return}while(("flex"!==s.computedStyle[Km]&&"flex"!==s.currentStyle[Km]||(a=s),"absolute"!==s.currentStyle[Vm]&&"absolute"!==s.computedStyle[Vm])&&(!_y(s,!0)&&(s=s.domParent)));if((n=a?a:n)===t)return 1;for(s=n;s;){if("absolute"===s.currentStyle[Vm]||"absolute"===s.computedStyle[Vm]){if(s===t)break;if(_y(s))break;return void py(s,e,i,o)}s=s.domParent}if(n!==r)py(n,e,i,o);else if(o){var h=!0,l=r.prev,c=r.next;if(!(h=l&&-1<["inline","inline-block","inlineBlock"].indexOf(l.currentStyle[Km])||c&&-1<["inline","inline-block","inlineBlock"].indexOf(c.currentStyle[Km])?!1:h)){if((n=r.domParent)===t)return 1;py(n,e,!1,!0)}}}}}(Q,tt,h,l,c)){i=!0,c&&(this.__zIndexChildren=null);break}u&&o.push(s)}if(dy=0,this.__reflowList=[],i)return a0.clearUniqueReflowId(tt),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){t=tt[t.__uniqueReflowId];return e.uniqueList.push(t),!0}},{uniqueList:o});var I=[],C=0,k=[],L=0;o.forEach(function(t){var e=t.node,r=t.component,i=t.addDom,o=t.removeDom,n=e.computedStyle,a=e.currentStyle,s=n[qm],h=n[Vm],l=n[Km],c="absolute"===h,u="absolute"===a[Vm],_="none"===l,f="none"===a[Km];if(!_||!f){for(var d,p=e.domParent,g=p.__layoutData,t=g.x,m=g.y,n=g.h,l=p.width,v=p.computedStyle,g=e,y=(g=g.isShadowRoot?g.hostRoot:g).prev;y;){if(y instanceof ls||"absolute"!==y.computedStyle[Vm]&&"none"!==y.computedStyle[Km]){m=y.y+y.outerHeight,d=!0;break}y=y.prev}o||(d||(m+=v[Jm]+v[ov]+v[ev]),t+=v[Qm]+v[nv]+v[rv]);var x,E=e;if(!o)if(u){for(E=E.domParent;E&&E!==Q&&!$v(E);)if(E.parent)E=E.parent;else if(E.host)break;if(p.__layoutAbs(E=E||Q,null,e),i){g=p.__modifyStruct(Q,C);return C+=g[1],I.push(g),p.__updateStruct(Q.__structs),void(S.renderMode===rt.SVG&&vy(p))}if(c)return void(r?(x=e.__modifyStruct(Q,C),C+=x[1],I.push(x),(h===a[Vm]||"static"!==h&&"static"!==a[Vm])&&s===a[qm]||(p.__updateStruct(Q.__structs),S.renderMode===rt.SVG&&vy(p))):(_||f)&&(e.__zIndexChildren=null,x=e.__modifyStruct(Q,C),C+=x[1],I.push(x)));p.__updateStruct(Q.__structs),S.renderMode===rt.SVG&&vy(p)}else{if(e.__layout({x:t,y:m,w:l,h:n}),m+=e.outerHeight,r)E=e;else for(E=E.domParent;E&&E!==Q&&!$v(E);)if(E.parent)E=E.parent;else if(E.host)break;E=E||Q,e instanceof v1&&e.__layoutAbs(E,{x:t,y:m,w:l,h:n})}for(var b=e;b&&b!==Q;)if("relative"===(v=(b=b.domParent).computedStyle)[Vm]){var M=b,T=M.ox,M=M.oy;T&&e.__offsetX(T),M&&e.__offsetY(M);break}for(var A=(e=e.isShadowRoot?e.hostRoot:e).next;A&&!A.hasOwnProperty("__uniqueReflowId");){if("absolute"!==A.computedStyle[Vm]){var O=m-A.y;if(O)for(;A&&!A.hasOwnProperty("__uniqueReflowId");){var R=A,w=(R=R instanceof Bs?R.shadowRoot:R).computedStyle;"absolute"!==w[Vm]&&"none"!==w[Km]&&R.__offsetY(O,!0,iy),A=A.next}break}A=A.next}p.hasOwnProperty("__uniqueMergeOffsetId")||u&&_||(p.__uniqueMergeOffsetId=L++,k.push(p)),i||o?(o=p.__modifyStruct(Q,C),C+=o[1],I.push(o),S.renderMode===rt.SVG&&vy(p)):r?(r=e.__modifyStruct(Q,C),C+=r[1],I.push(r),(h===a[Vm]||"static"!==h&&"static"!==a[Vm])&&s===a[qm]||(e.domParent.__updateStruct(Q.__structs),S.renderMode===rt.SVG&&vy(e.domParent))):(_||f)&&(e.__zIndexChildren=null,f=e.__modifyStruct(Q,C),C+=f[1],I.push(f))}});var et=[];k.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var e,r,i=t.flowChildren,o=t.absChildren,n=[],a=[],s=i.length,h=0;h<s;h++){var l=i[h],c=(l=l instanceof Bs?l.shadowRoot:l)instanceof Hf;!e&&c&&l.hasOwnProperty("__uniqueReflowId")&&(e=!0,r=h);var u=c&&l.currentStyle,_=c&&"inline"===u[Km],f=c&&-1<["inlineBlock","inline-block"].indexOf(u[Km]),d=l;if(!c||_||f){if(n.length&&a.length&&e){var p=a0.getMergeMarginTB(a,n);if(p)for(var g=Math.max(r,h-n.length+1);g<s;g++)i[g].__offsetY(p,!0,iy)}a=[],n=[]}if(c&&!_){var m,v,y,x=c&&"none"===u[Km],E=void 0;if(!x&&l.flowChildren&&0===l.flowChildren.length&&(m=(y=l.computedStyle)[Jm],v=y[tv],f=y[ev],_=y[iv],c=y[Zm],u=y[ov],y=y[av],f<=0&&_<=0&&c<=0&&u<=0&&y<=0&&(n.push(v),a.push(m),E=!0)),x||E){if(h===s-1){var b=a0.getMergeMarginTB(a,n);if(b)for(var M=Math.max(r,h-n.length+1);M<s;M++)i[M].__offsetY(b,!0,iy)}}else{E=l.computedStyle,l=E[Jm],E=E[tv];if(n.length&&(a.push(l),e)){var T=a0.getMergeMarginTB(a,n);if(T)for(var A=Math.max(r,h-n.length+1);A<s;A++)i[A].__offsetY(T,!0,iy)}a=[],n=[E]}}}var O=t.currentStyle,R=O[Zm],w=t===Q||t.isShadowRoot||"absolute"===O[Vm]||"relative"===O[Vm];if(R[1]===Vv&&d){var S,R=t.height+t.computedStyle[ev],I=d.y+d.outerHeight-t.y-R;if(I){t.__resizeY(I,iy);for(var C=0,k=o.length;C<k;C++){var L=o[C],D=L.currentStyle,N=D[Um],P=D[Xm],D=D[Zm];if(N[1]===Vv)if(P[1]===Vv)for(var F=L.prev;F;){var B=F,Y=(B=B instanceof Bs?B.shadowRoot:B)instanceof Hf,H=Y&&B.currentStyle;if(!(Y&&"absolute"===H[Vm])){B=B.y+B.outerHeight-L.y;B&&L.__offsetY(B,!0,iy);break}F=F.prev}else P[1]===Kv?L.__offsetY(I,!0,iy):P[1]===zv&&(G=(1-.01*P[0])*I,L.__offsetY(G,!0,iy));else if(N[1]===zv)if(w){var G=.01*N[0]*I;L.__offsetY(G,!0,iy)}else{if(!S)for(S=t.domParent;S&&S!==Q&&!S.isShadowRoot;){var W=S.currentStyle;if("absolute"===W[Vm]||"relative"===W[Vm])break;S=S.domParent}S.currentStyle[Zm][1]!==Kv&&(N=.01*N[0]*I,L.__offsetY(N,!0,iy))}if(D[1]===zv)if(w)t.__layoutAbs(t,null,L);else{if(!S)for(S=t.domParent;S&&S!==Q&&!S.isShadowRoot;){var U=S.currentStyle;if("absolute"===U[Vm]||"relative"===U[Vm])break;S=S.domParent}et.push([t,S,L])}}return void a0.offsetAndResizeByNodeOnY(t,Q,tt,I,et)}}for(var X=0,V=o.length;X<V;X++){var K=o[X],z=K.currentStyle,j=z[Um],z=z[Xm];if(j[1]===Vv&&z[1]===Vv)for(var $=K.prev;$;){var Z=$,q=(Z=Z instanceof Bs?Z.shadowRoot:Z)instanceof Hf,J=q&&Z.currentStyle;if(!(q&&"absolute"===J[Vm])){Z=Z.y+Z.outerHeight-K.y;Z&&K.__offsetY(Z,!0,iy);break}$=$.prev}}}),et.forEach(function(t){t[0].__layoutAbs(t[1],null,t[2])});var _=0,f=0,d=!0,p=Q.__structs;if(I.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];if(d)d=!1,f=t[Bv]+(t[Yv]||0)+1,_+=e;else{for(var r=t[Bv]+(t[Yv]||0)+1+_,i=f;i<r;i++)p[i][Bv]+=_;f=r,_+=e}}),_)for(var g=f,m=p.length;g<m;g++)p[g][Bv]+=_;a0.clearUniqueReflowId(tt)}}},{key:"__computeMeasure",value:function(e,r){Mo.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},fh.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===rt.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===rt.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),o}(),re=v.STYLE_KEY,Ey=re.STROKE_WIDTH,by=re.BOX_SHADOW,My=re.FONT_SIZE,Ty=fe.isNil,Ay=w.REM,Oy=w.VW,Ry=w.VH,wy=w.VMAX,Sy=w.VMIN;function Iy(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function Cy(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function ky(t,e,r,i,o,n,a,s,h){var l,c,u,_,f=7<arguments.length&&void 0!==s?s:0,s=8<arguments.length&&void 0!==h?h:1;return 0===f&&1===s?[t,e,r,i,o,n]:f===s?[]:(s<f&&(f=(h=[s,f])[0],s=h[1]),f=Math.max(0,f),s=Math.min(1,s),3===a?(c=Qt(et.sliceBezier2Both([[t,e],o,n,[r,i]],f,s),4),t=(l=Qt(c[0],2))[0],e=l[1],o=c[1],n=c[2],r=(l=Qt(c[3],2))[0],i=l[1]):2===a?(c=Qt(et.sliceBezier2Both([[t,e],n,[r,i]],f,s),3),t=(l=Qt(c[0],2))[0],e=l[1],n=c[1],r=(c=Qt(c[2],2))[0],i=c[1]):1===a?(u=Qt(et.sliceBezier2Both([[t,e],o,[r,i]],f,s),3),t=(_=Qt(u[0],2))[0],e=_[1],o=u[1],r=(_=Qt(u[2],2))[0],i=_[1]):(t+=(u=r-t)*f,e+=(_=i-e)*f,r+=u*(1-s),i+=_*(1-s)),[t,e,r,i,o,n])}var qt=function(){t(A,rp);var s=e(A);function A(t,e){var r,i,o;if(_(this,A),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):Ty(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):Ty(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):Ty(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):Ty(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var n=r.__start.length;n<r.__x1.length;n++)r.__start.push(0)}else Ty(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var a=r.__end.length;a<r.__x1.length;a++)r.__end.push(1)}else Ty(e.end)||(o=parseFloat(e.end),isNaN(o)&&(o=1),r.__end=r.__x1.map(function(){return o}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],Ty(e.x1)||(r.__x1=parseFloat(e.x1)||0),Ty(e.y1)||(r.__y1=parseFloat(e.y1)||0),Ty(e.x2)||(r.__x2=parseFloat(e.x2)||0),Ty(e.y2)||(r.__y2=parseFloat(e.y2)||0),Ty(e.start)||(r.__start=parseFloat(e.start)||0),Ty(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return f(A,[{key:"buildCache",value:function(e,r,i){var o,n=this,a=this.width,s=this.height,h=this.__cacheProps,l=this.isMulti;return["x1","x2"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=Iy(n[t],e,a,l))}),["y1","y2"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=Iy(n[t],r,s,l))}),["controlA","controlB"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=function e(t,r,i,o,n,a){if(a){if(t)return t.map(function(t){return e(t,r,i,o,n)})}else if(t&&2<=t.length)return[r+t[0]*o,i+t[1]*n];return[]}(n[t],e,r,a,s,l))}),["start","end"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=n[t])}),o}},{key:"render",value:function(l,t,c,e,r,i){var u=this,o=P(N(A.prototype),"render",this).call(this,l,t,c,e,r,i);if(o.break)return o;c=o.ctx;var _,n,a,s,h=o.sx3,f=o.sy3,d=o.stroke,p=o.strokeWidth,g=o.strokeDasharray,m=o.strokeDasharrayStr,v=o.strokeLinecap,y=o.strokeLinejoin,x=o.strokeMiterlimit,E=o.dx,b=o.dy,M=this.__cacheProps,T=this.isMulti;return this.buildCache(h,f)&&l===rt.SVG&&(_="",T?M.x1.forEach(function(t,e){var r=M.x2[e],i=M.y1[e],o=M.y2[e],n=M.controlA[e],a=M.controlB[e],s=M.start[e],h=M.end[e],e=Cy(n,a);0===s&&1===h||(t=(h=Qt(ky(t,i,r,i,n,a,e,s,h,M.len),6))[0],i=h[1],r=h[2],i=h[3],n=h[4],a=h[5]),_+=Tt.svgLine(t,i,r,o,n,a,e)}):(n=Cy(M.controlA,M.controlB),a=M.x1,s=M.y1,t=M.x2,e=M.y2,r=M.controlA,i=M.controlB,h=M.start,f=M.end,0===h&&1===f||(a=(f=Qt(ky(a,s,t,e,r,i,n,h,f,M.len),6))[0],s=f[1],t=f[2],e=f[3],r=f[4],i=f[5]),_=Tt.svgLine(a,s,t,e,r,i,n)),M.d=_),l===rt.CANVAS||l===rt.WEBGL?d.forEach(function(t,e){var r,i,o,n,a,s=p[e],h=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(u.__preSetCanvas(l,c,{stroke:t,strokeWidth:s,strokeDasharray:g[e],strokeLinecap:v[e],strokeLinejoin:y[e],strokeMiterlimit:x[e]}),h&&(c.strokeStyle=t.v[0]),c.beginPath(),T?M.x1.forEach(function(t,e){var r=M.x2[e],i=M.y1[e],o=M.y2[e],n=M.controlA[e],a=M.controlB[e],s=M.start[e],h=M.end[e],e=Cy(n,a);0===s&&1===h||(t=(h=Qt(ky(t,i,r,i,n,a,e,s,h,M.len),6))[0],i=h[1],r=h[2],i=h[3],n=h[4],a=h[5]),Tt.canvasLine(c,t,i,r,o,n,a,e,E,b)}):(r=Cy(M.controlA,M.controlB),i=M.x1,o=M.y1,n=M.x2,a=M.y2,s=M.controlA,e=M.controlB,h=M.start,t=M.end,0===h&&1===t||(i=(t=Qt(ky(i,o,n,a,s,e,r,h,t,M.len),6))[0],o=t[1],n=t[2],a=t[3],s=t[4],e=t[5]),Tt.canvasLine(c,i,o,n,a,s,e,r,E,b)),c.stroke(),c.closePath())}):l===rt.SVG&&d.forEach(function(t,e){var r=p[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),r=[["d",M.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];u.__propsStrokeStyle(r,m[e],v[e],y[e],x[e]),u.addGeom("path",r)}),o}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.root,i=this.__sx3,o=this.__sy3,n=this.currentStyle,a=n[Ey],n=n[by];this.buildCache(i,o);var o=e.x1,s=e.y1,h=e.x2,l=e.y2,c=e.controlA,u=e.controlB,_=P(N(A.prototype),"bbox",this),f=0;a.forEach(function(t){f=t[1]===Ay?Math.max(t[0]*r.computedStyle[My]*.5,f):t[1]===Oy?Math.max(t[0]*r.width*.01*.5,f):t[1]===Ry?Math.max(t[0]*r.height*.01*.5,f):t[1]===wy||t[1]===Sy?Math.max(t[0]*Math.max(r.width,r.height)*.01*.5,f):Math.max(.5*t[0],f)}),f+=1;var n=Qt(this.__spreadBbox(n),2),d=n[0],p=n[1];return d+=f,p+=f,t||(o=[o],h=[h],s=[s],l=[l],c=[c],u=[u]),o.forEach(function(t,e){var r,i=s[e],o=h[e],n=l[e],a=c[e],e=u[e];(Ty(a)||a.length<2)&&(Ty(e)||e.length<2)?(_[0]=Math.min(_[0],t-d),_[0]=Math.min(_[0],o-d),_[1]=Math.min(_[1],i-p),_[1]=Math.min(_[1],n-p),_[2]=Math.max(_[2],t+d),_[2]=Math.max(_[2],o+d),_[3]=Math.max(_[3],i+p),_[3]=Math.max(_[3],n+p)):Ty(a)||a.length<2?(r=et.bboxBezier(t,i,e[0],e[1],o,n),_[0]=Math.min(_[0],r[0]-d),_[0]=Math.min(_[0],r[2]-d),_[1]=Math.min(_[1],r[1]-p),_[1]=Math.min(_[1],r[3]-p),_[2]=Math.max(_[2],r[0]+d),_[2]=Math.max(_[2],r[2]+d),_[3]=Math.max(_[3],r[1]+p),_[3]=Math.max(_[3],r[3]+p)):Ty(e)||e.length<2?(r=et.bboxBezier(t,i,a[0],a[1],o,n),_[0]=Math.min(_[0],r[0]-d),_[0]=Math.min(_[0],r[2]-d),_[1]=Math.min(_[1],r[1]-p),_[1]=Math.min(_[1],r[3]-p),_[2]=Math.max(_[2],r[0]+d),_[2]=Math.max(_[2],r[2]+d),_[3]=Math.max(_[3],r[1]+p),_[3]=Math.max(_[3],r[3]+p)):(n=et.bboxBezier(t,i,a[0],a[1],e[0],e[1],o,n),_[0]=Math.min(_[0],n[0]-d),_[0]=Math.min(_[0],n[2]-d),_[1]=Math.min(_[1],n[1]-p),_[1]=Math.min(_[1],n[3]-p),_[2]=Math.max(_[2],n[0]+d),_[2]=Math.max(_[2],n[2]+d),_[3]=Math.max(_[3],n[1]+p),_[3]=Math.max(_[3],n[3]+p))}),_}}]),A}(),mr=v.STYLE_KEY,Ly=mr.STROKE_WIDTH,Dy=mr.BOX_SHADOW,Ny=mr.FONT_SIZE,Py=fe.isNil,Fy=w.REM,By=w.VW,Yy=w.VH,Hy=w.VMAX,Gy=w.VMIN;function Wy(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Uy(t,e){var r=[],i=0,o=[];if(e)i=[],t.forEach(function(t){t=Uy(t);r.push(t.list),i.push(t.total),o.push([0].concat(t.increase))});else if(Array.isArray(t)){i=0,o.push(0);for(var n=0,a=0,s=t.length;a<s;a++){var h=t[a];if(Array.isArray(h)){n=a;break}}for(var l=t[n],c=n+1,u=t.length;c<u;c++){var _,f,d,p=t[c];Array.isArray(p)&&(2===p.length?(_=Math.abs(p[0]-l[0]),f=Math.abs(p[1]-l[1]),f=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(f),i+=f,o.push(i),l=p):4===p.length?(d=et.bezierLength([l,[p[0],p[1]],[p[2],p[3]]],2),r.push(d),i+=d,o.push(i),l=[p[2],p[3]]):6===p.length&&(d=et.bezierLength([l,[p[0],p[1]],[p[2],p[3]],[p[4],p[5]]],3),r.push(d),i+=d,o.push(i),l=[p[4],p[5]]))}}return{list:r,total:i,increase:o}}function Xy(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var o=r+(i-r>>1);return t[o]===e?o:t[o]>e?Xy(t,e,r,Math.max(o-1,r)):Xy(t,e,Math.min(o+1,i),i)}function Vy(t,e,r,i){var o=2<arguments.length&&void 0!==r?r:0,n=3<arguments.length&&void 0!==i?i:1;if(0===o&&1===n)return t;if(o===n)return[];for(n<o&&(o=(s=[n,o])[0],n=s[1]);1<n-o;)n--;for(;n<0||o<0;)n++,o++;for(;1<=n&&1<=o;)n--,o--;var a=t.length;t=fe.clone(t);var s,h,l,c,u,_,f,d=[],p=1<o?o-1:o,g=1<n?n-1:n,m=Xy(e.increase,p*e.total,0,a-1),v=Xy(e.increase,g*e.total,0,a-1),y=o<0,x=1<n,r=1;(g*=e.total)>e.increase[v]&&(i=t[v].slice(t[v].length-2),s=t[v+1],c=e.list[v],r=c=(g-e.increase[v])/c,2===s.length?(h=s[0]-i[0],l=s[1]-i[1],h=x?[i[0]+c*h,i[1]+c*l]:[s[0]-(c=1-c)*h,s[1]-c*l]):4===s.length?h=[(l=et.sliceBezier([i,[s[0],s[1]],[s[2],s[3]]],c))[1][0],l[1][1],l[2][0],l[2][1]]:6===s.length&&(h=[(_=et.sliceBezier([i,[s[0],s[1]],[s[2],s[3]],[s[4],s[5]]],c))[1][0],_[1][1],_[2][0],_[2][1],_[3][0],_[3][1]])),(p*=e.total)>e.increase[m]&&(c=t[m].slice(t[m].length-2),_=e.list[m],m!==v||y||x||1===r||(_*=r,h&&(u=h)),u=u||t[m+1],e=(p-e.increase[m])/_,2===u.length?(_=u[0]-c[0],f=u[1]-c[1],y?d.push([u[0]-(e=1-e)*_,u[1]-e*f]):d.push([c[0]+e*_,c[1]+e*f]),d.push(u)):4===u.length?(f=et.sliceBezier([[u[2],u[3]],[u[0],u[1]],c],1-e).reverse(),d.push(f[0]),d.push([f[1][0],f[1][1],f[2][0],f[2][1]]),m!==v||y||x||(h=null)):6===u.length&&(e=et.sliceBezier([[u[4],u[5]],[u[2],u[3]],[u[0],u[1]],c],1-e).reverse(),d.push(e[0]),d.push([e[1][0],e[1][1],e[2][0],e[2][1],u[4],u[5]]),m!==v||y||x||(h=null)));for(var E=m+2;E<=v+(y||x?a:0);E++)d.push(t[E%a]);return h&&d.push(h),d}var Ky=function(){t(h,rp);var s=e(h);function h(t,e){var r,i,o;if(_(this,h),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var n=r.__start.length;n<r.__points.length;n++)r.__start.push(0)}else Py(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var a=r.__end.length;a<r.__points.length;a++)r.__end.push(1)}else Py(e.end)||(o=parseFloat(e.end),isNaN(o)&&(o=1),r.__end=r.__points.map(function(){return o}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,Py(e.start)||(r.__start=parseFloat(e.start)||0),Py(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t);return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return f(h,[{key:"__getPoints",value:function(n,a,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var i=[],o=0;o<r;o++)o%2==0?i.push(n+t[o]*s):i.push(a+t[o]*h);return i}})}},{key:"__reprocessing",value:function(t){return t}},{key:"__needRebuildSE",value:function(){}},{key:"buildCache",value:function(e,r){var t,i,o,n=this,a=this.width,s=this.height,h=this.points,l=this.controls,c=this.start,u=this.end,_=this.__cacheProps,f=this.isMulti;return Py(_.points)&&(t=!0,_.points=f?h.map(function(t){if(Array.isArray(t))return n.__getPoints(e,r,a,s,t)}):this.__getPoints(e,r,a,s,h)),Py(_.controls)&&(t=!0,_.controls=f?l.map(function(t){return Array.isArray(t)?n.__getPoints(e,r,a,s,t,!0):t}):this.__getPoints(e,r,a,s,l,!0)),Py(_.start)&&(i=!0,_.start=c),Py(_.end)&&(i=!0,_.end=u),this.__needRebuildSE(_)&&(i=!0),t&&(u=_.points,o=_.controls,_.list2=f?u.map(function(t,e){var r=o[e];if(Array.isArray(t))return t.map(function(t,e){return e?Wy(t,r&&r[e-1]):t})}):u.map(function(t,e){return e?Wy(t,o[e-1]):t}),_.len=Uy(_.list2,f)),(t||i)&&(_.list=f?_.list2.map(function(t,e){if(Array.isArray(t)){var r=_.len;return Vy(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},_.start[e],_.end[e])}}):Vy(_.list2,_.len,_.start,_.end),_.list=this.__reprocessing(_.list,f)),t||i}},{key:"render",value:function(t,e,r,i,o,n){n=P(N(h.prototype),"render",this).call(this,t,e,r,i,o,n);return n.break||(this.buildCache(n.sx3,n.sy3),r=n.ctx,this.__renderPolygon(t,r,n)),n}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t,e,r,i,o,n,u,a,_,f,s,d;return this.__bbox||(t=this.isMulti,e=this.__cacheProps,r=this.root,i=this.__sx3,o=this.__sy3,n=(s=this.currentStyle)[Ly],s=s[Dy],this.buildCache(i,o),u=P(N(h.prototype),"bbox",this),a=0,n.forEach(function(t){a=t[1]===Fy?Math.max(t[0]*r.computedStyle[Ny]*.5,a):t[1]===By?Math.max(t[0]*r.width*.01*.5,a):t[1]===Yy?Math.max(t[0]*r.height*.01*.5,a):t[1]===Hy||t[1]===Gy?Math.max(t[0]*Math.max(r.width,r.height)*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=Qt(this.__spreadBbox(s),2),_=s[0],f=s[1],_+=a,f+=a,s=e.points,d=e.controls,t||(s=[s],d=[d]),s.forEach(function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=d[e]||[],e=Qt(t[0],2),i=e[0],o=e[1],n=1,a=t.length;n<a;n++){var s=Qt(t[n],2),h=s[0],l=s[1],c=r[n-1];c&&4===c.length?(s=et.bboxBezier(i,o,c[0],c[1],c[2],c[3],h,l),u[0]=Math.min(u[0],s[0]-_),u[1]=Math.min(u[1],s[1]-f),u[2]=Math.max(u[2],s[2]+_),u[3]=Math.max(u[3],s[3]+f)):c&&2===c.length?(c=et.bboxBezier(i,o,c[0],c[1],h,l),u[0]=Math.min(u[0],c[0]-_),u[1]=Math.min(u[1],c[1]-f),u[2]=Math.max(u[2],c[2]+_),u[3]=Math.max(u[3],c[3]+f)):(u[0]=Math.min(u[0],i-_),u[1]=Math.min(u[1],o-f),u[2]=Math.max(u[2],i+_),u[3]=Math.max(u[3],o+f)),i=h,o=l}}),this.__bbox=u),this.__bbox}}]),h}(),Y=function(){t(a,Ky);var r=e(a);function a(t,e){return _(this,a),t=r.call(this,t,e),e.booleanOperations&&(t.__booleanOperations=e.booleanOperations),t}return f(a,[{key:"__getPoints",value:function(t,e,r,i,o,n){o=P(N(a.prototype),"__getPoints",this).call(this,t,e,r,i,o,n);return n||o.push(o[0]),o}},{key:"__reprocessing",value:function(n,t){if(!t)return n;var a=this.booleanOperations,s=n.length;if(!Array.isArray(a)&&a)for(var e=a,a=[a],r=1;r<s-1;r++)a.push(e);if(Array.isArray(a)&&a.length){t=function(){for(var t,e=[],r=0;r<s-1;r++){var i=n[r],o=n[r+1];switch(a[r]){case"intersection":i&&i.length&&o&&o.length?Bn([i],[o]).forEach(function(t){e.push(t[0])}):e.push(null),t=!0;break;case"union":i&&i.length||o&&o.length?i&&i.length?o&&o.length?Nn([i],[o]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(o):e.push(null),t=!0;break;case"diff":i&&i.length?o&&o.length?Pn([i],[o]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(null),t=!0;break;case"xor":i&&i.length||o&&o.length?i&&i.length?o&&o.length?Fn([i],[o]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(o):e.push(null),t=!0;break;default:e.push(n[r]),t=!1}}return t||e.push(n[s-1]),{v:e}}();if("object"===bt(t))return t.v}return n}},{key:"__needRebuildSE",value:function(t){if(fe.isNil(t.booleanOperations))return t.booleanOperations=!0}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),a}(),ee=v.STYLE_KEY,zy=ee.STROKE_WIDTH,jy=ee.BOX_SHADOW,$y=ee.FONT_SIZE,Zy=fe.isNil,qy=et.sectorPoints,Jy=w.REM,Qy=w.VW,tx=w.VH,ex=w.VMAX,rx=w.VMIN;function ix(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var pt=function(){t(O,rp);var r=e(O);function O(t,e){return _(this,O),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return ix(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return ix(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return ix(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,Zy(e.begin)||(t.__begin=ix(e.begin,0)),Zy(e.end)||(t.__end=ix(e.end,0)),Zy(e.r)||(t.__r=ix(e.r,1)),Zy(e.edge)||(t.__edge=!!e.edge),Zy(e.closure)||(t.__closure=!!e.closure)),t}return f(O,[{key:"buildCache",value:function(i,o,t){var e,n=this.width,r=this.begin,a=this.end,s=this.r,h=this.edge,l=this.closure,c=this.__cacheProps,u=this.isMulti;return(Zy(c.begin)||t)&&(e=!0,c.begin=(r||0)%360),(Zy(c.end)||t)&&(e=!0,c.end=(a||0)%360),(Zy(c.r)||t)&&(e=!0,c.r=u?s.map(function(t){return t*n*.5}):s*n*.5),s=c.r,(Zy(c.edge)||t)&&(e=!0,c.edge=h),(Zy(c.closure)||t)&&(e=!0,c.closure=l),e&&(u?(c.list=[],c.sList=[],r.forEach(function(t,e){var r=Zy(s[e])?.5*n:s[e],r=qy(i,o,r,parseFloat(t||0)%360,parseFloat(a[e]||0)%360),t=r.slice(0);l[e]?(r.push(r[0].slice(0)),h&&t.push(t[0].slice(0))):(r.unshift([i,o]),r.push([i,o]),h&&(t.unshift([i,o]),t.push([i,o]))),c.list.push(r),c.sList.push(t)})):(r=(u=qy(i,o,s,parseFloat(r||0),parseFloat(a||0))).slice(0),l?(u.push(u[0].slice(0)),h&&r.push(r[0].slice(0))):(u.unshift([i,o]),u.push([i,o]),h&&(r.unshift([i,o]),r.push([i,o]))),c.list=u,c.sList=r)),e}},{key:"render",value:function(t,e,r,i,o,n){o=P(N(O.prototype),"render",this).call(this,t,e,r,i,o,n);if(o.break)return o;this.buildCache(o.cx,o.cy),r=o.ctx;var a=o.fill,s=o.fillRule,h=o.stroke,l=o.strokeWidth,c=o.strokeDasharray,u=o.strokeDasharrayStr,_=o.strokeLinecap,f=o.strokeLinejoin,d=o.strokeMiterlimit,p=o.dx,g=o.dy,n=this.__cacheProps,m=n.list,v=n.sList,y=this.isMulti;if(a.length<=1&&h.length<=1){n={fill:a[0],fillRule:s[0],stroke:h[0],strokeWidth:l[0],strokeDasharray:c[0],strokeDasharrayStr:u[0],strokeLinecap:_[0],strokeLinejoin:f[0],strokeMiterlimit:d[0],dx:p,dy:g};this.__renderOneSector(t,r,y,m,v,n)}else{for(var x=0,E=a.length;x<E;x++){var b=a[x];b&&(b={fill:b,fillRule:s[x],dx:p,dy:g},this.__renderOneSector(t,r,y,m,v,b))}for(var M=0,T=h.length;M<T;M++){var A=h[M];A&&(A={stroke:A,strokeWidth:l[M],strokeDasharray:c[M],strokeDasharrayStr:u[M],strokeLinecap:_[M],strokeLinejoin:f[M],strokeMiterlimit:d[M],dx:p,dy:g},this.__renderOnePolygon(t,r,y,m,v,A))}}return o}},{key:"__renderOneSector",value:function(t,e,r,i,o,n){var a=n.fill,s=n.stroke,h=n.strokeWidth,l="conic"===a.k,c="conic"===s.k,u="radial"===a.k&&Array.isArray(a.v),_=0<h&&"radial"===s.k&&Array.isArray(s.v);l||c?(l?this.__conicGradient(t,e,i,r,n):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),0<h&&c?Ne.warn("Stroke style can not use conic-gradient"):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,o,n,!1,!0)):u||_?(u?this.__radialEllipse(t,e,i,r,n,"fill"):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),0<h&&_?(Ne.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke=n.stroke.v[0],this.__drawPolygon(t,e,r,o,n,!1,!0)):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,o,n,!1,!0)):(a&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0,!1),0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,o,n,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,o,n,a,s,h){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",o]],this.__propsStrokeStyle(t,n,a,s,h),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<o&&(o=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",o]],this.__propsStrokeStyle(o,n,a,s,h),this.addGeom("path",o)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var e,t,r,i,o,n,a,s,h,l,c;return this.__bbox||(l=this.isMulti,s=this.__cacheProps,e=this.root,t=this.__sx3,o=this.__sy3,r=this.width,n=this.height,c=(h=this.currentStyle)[zy],h=h[jy],this.buildCache(t=t+.5*r,r=o+.5*n),o=0,o=l?(i=0,s.r.forEach(function(t){i=Math.max(t,i)}),i):s.r,n=P(N(O.prototype),"bbox",this),a=0,c.forEach(function(t){a=t[1]===Jy?Math.max(t[0]*e.computedStyle[$y]*.5,a):t[1]===Qy?Math.max(t[0]*e.width*.01*.5,a):t[1]===tx?Math.max(t[0]*e.height*.01*.5,a):t[1]===ex||t[1]===rx?Math.max(t[0]*Math.max(e.width,e.height)*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(l=Qt(this.__spreadBbox(h),2))[0],c=l[1],h=t+o+(s+=a),l=r-o-(c+=a),c=r+o+c,n[0]=Math.min(n[0],t-o-s),n[1]=Math.min(n[1],l),n[2]=Math.max(n[2],h),n[3]=Math.max(n[3],c),this.__bbox=n),this.__bbox}}]),O}(),T=v.STYLE_KEY,ox=T.STROKE_WIDTH,nx=T.BOX_SHADOW,ax=T.FONT_SIZE,sx=fe.isNil,hx=w.REM,lx=w.VW,cx=w.VH,ux=w.VMAX,_x=w.VMIN;function fx(t,e,r,i,o,n){var a=4<arguments.length&&void 0!==o?o:0,s=5<arguments.length&&void 0!==n?n:0;if(0===a||0===s)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];o=a*et.H,n=s*et.H;return[[t+a,e],[t+r-a,e],[t+r+o-a,e,t+r,e+s-n,t+r,e+s],[t+r,e+i-s],[t+r,e+i+n-s,t+r+o-a,e+i,t+r-a,e+i],[t+a,e+i],[t+a-o,e+i,t,e+i+n-s,t,e+i-s],[t,e+s],[t,e+s-n,t+a-o,e,t+a,e]]}function dx(t){return t=parseFloat(t),t=isNaN(t)?0:t}var Jt=function(){t(l,rp);var r=e(l);function l(t,e){return _(this,l),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map(dx)),Array.isArray(e.ry)&&(t.__ry=e.ry.map(dx))):(t.__rx=t.__ry=0,sx(e.rx)||(t.__rx=dx(e.rx)),sx(e.ry)||(t.__ry=dx(e.ry))),t}return f(l,[{key:"buildCache",value:function(r,i,t){var e,o,n=this.width,a=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return(sx(l.rx)||t)&&(e=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*n}):Math.min(s,.5)*n),(sx(l.ry)||t)&&(e=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(h,.5)*a),e&&(h=l.rx,o=l.ry,l.list=c?h.map(function(t,e){return fx(r,i,n,a,t,o[e])}):fx(r,i,n,a,h,o)),e}},{key:"render",value:function(t,e,r,i,o,n){n=P(N(l.prototype),"render",this).call(this,t,e,r,i,o,n);return n.break||(this.buildCache(n.sx3,n.sy3),r=n.ctx,this.__renderPolygon(t,r,n)),n}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var e,t,r,i,o,n,a,s,h;return this.__bbox||(e=this.root,t=this.__sx3,r=this.__sy3,i=this.width,o=this.height,h=(n=this.currentStyle)[ox],s=n[nx],this.buildCache(t,r),n=P(N(l.prototype),"bbox",this),a=0,h.forEach(function(t){a=t[1]===hx?Math.max(t[0]*e.computedStyle[ax]*.5,a):t[1]===lx?Math.max(t[0]*e.width*.01*.5,a):t[1]===cx?Math.max(t[0]*e.height*.01*.5,a):t[1]===ux||t[1]===_x?Math.max(t[0]*Math.max(e.width,e.height)*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(h=Qt(this.__spreadBbox(s),2))[0],h=h[1],s+=a,h+=a,n[0]=Math.min(n[0],t-s),n[1]=Math.min(n[1],r-h),n[2]=Math.max(n[2],t+i+s),n[3]=Math.max(n[3],r+o+h),this.__bbox=n),this.__bbox}}]),l}(),ur=v.STYLE_KEY,px=ur.STROKE_WIDTH,gx=ur.BOX_SHADOW,mx=ur.FONT_SIZE,vx=fe.isNil,yx=w.REM,xx=w.VW,Ex=w.VH,bx=w.VMAX,Mx=w.VMIN;function Tx(t){return t=parseFloat(t),t=isNaN(t)?1:t}var re=function(){t(u,rp);var r=e(u);function u(t,e){return _(this,u),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map(Tx):vx(e.r)||(t.__r=Tx(e.r))):(t.__r=1,vx(e.r)||(t.__r=Tx(e.r))),t}return f(u,[{key:"buildCache",value:function(e,r,t){var i=this.width,o=this.r,n=this.__cacheProps,a=this.isMulti;(vx(n.r)||t)&&(a?(n.r=o.map(function(t){return t*i*.5}),n.list=n.r.map(function(t){return et.ellipsePoints(e,r,t,t)})):(n.r=o*i*.5,n.list=et.ellipsePoints(e,r,n.r,n.r)))}},{key:"render",value:function(t,e,r,i,o,n){n=P(N(u.prototype),"render",this).call(this,t,e,r,i,o,n);return n.break||(this.buildCache(n.cx,n.cy),r=n.ctx,this.__renderPolygon(t,r,n)),n}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var e,t,r,i,o,n,a,s,h,l,c;return this.__bbox||(l=this.isMulti,s=this.__cacheProps,e=this.root,t=this.__sx3,o=this.__sy3,r=this.width,n=this.height,c=(h=this.currentStyle)[px],h=h[gx],this.buildCache(t=t+.5*r,r=o+.5*n),o=0,o=l?(i=0,s.r.forEach(function(t){i=Math.max(t,i)}),i):s.r,n=P(N(u.prototype),"bbox",this),a=0,c.forEach(function(t){a=t[1]===yx?Math.max(t[0]*e.computedStyle[mx]*.5,a):t[1]===xx?Math.max(t[0]*e.width*.01*.5,a):t[1]===Ex?Math.max(t[0]*e.height*.01*.5,a):t[1]===bx||t[1]===Mx?Math.max(t[0]*Math.max(e.width,e.height)*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(l=Qt(this.__spreadBbox(h),2))[0],c=l[1],h=t+o+(s+=a),l=r-o-(c+=a),c=r+o+c,n[0]=Math.min(n[0],t-o-s),n[1]=Math.min(n[1],l),n[2]=Math.max(n[2],h),n[3]=Math.max(n[3],c),this.__bbox=n),this.__bbox}}]),u}(),mr=v.STYLE_KEY,Ax=mr.STROKE_WIDTH,Ox=mr.BOX_SHADOW,Rx=mr.FONT_SIZE,wx=fe.isNil,Sx=w.REM,Ix=w.VW,Cx=w.VH,kx=w.VMAX,Lx=w.VMIN;function Dx(t){return t=parseFloat(t),t=isNaN(t)?1:t}var ee=function(){t(d,rp);var r=e(d);function d(t,e){return _(this,d),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(Dx):wx(e.rx)||(t.__rx=[Dx(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(Dx):wx(e.ry)||(t.__ry=[Dx(e.ry)])):(t.__rx=1,wx(e.rx)||(t.__rx=Dx(e.rx)),t.__ry=1,wx(e.ry)||(t.__ry=Dx(e.ry))),t}return f(d,[{key:"buildCache",value:function(r,i,t){var e,o,n=this.width,a=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return(wx(l.rx)||t)&&(e=!0,l.rx=c?s.map(function(t){return t*n*.5}):s*n*.5),(wx(l.ry)||t)&&(e=!0,l.ry=c?h.map(function(t){return t*a*.5}):h*a*.5),e&&(h=l.rx,o=l.ry,l.list=c?h.map(function(t,e){return et.ellipsePoints(r,i,t,o[e])}):et.ellipsePoints(r,i,h,o)),e}},{key:"render",value:function(t,e,r,i,o,n){n=P(N(d.prototype),"render",this).call(this,t,e,r,i,o,n);return n.break||(this.buildCache(n.cx,n.cy),r=n.ctx,this.__renderPolygon(t,r,n)),n}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,e,t,i,o,n,a,s,h,l,c,u,_,f;return this.__bbox||(c=this.isMulti,r=this.__cacheProps,e=this.root,i=this.__sx3,h=this.__sy3,o=this.width,_=this.height,f=(t=this.currentStyle)[Ax],u=t[Ox],this.buildCache(t=i+.5*o,i=h+.5*_),s=o=0,s=c?(a=n=0,r.rx.forEach(function(t,e){n=Math.max(t,n),a=Math.max(s,r.ry[e])}),o=n,a):(o=r.rx,r.ry),h=P(N(d.prototype),"bbox",this),l=0,f.forEach(function(t){l=t[1]===Sx?Math.max(t[0]*e.computedStyle[Rx]*.5,l):t[1]===Ix?Math.max(t[0]*e.width*.01*.5,l):t[1]===Cx?Math.max(t[0]*e.height*.01*.5,l):t[1]===kx||t[1]===Lx?Math.max(t[0]*Math.max(e.width,e.height)*.01*.5,l):Math.max(.5*t[0],l)}),l+=1,c=(_=Qt(this.__spreadBbox(u),2))[0],f=_[1],u=t+o+(c+=l),_=i-s-(f+=l),f=i+s+f,h[0]=Math.min(h[0],t-o-c),h[1]=Math.min(h[1],_),h[2]=Math.max(h[2],u),h[3]=Math.max(h[3],f),this.__bbox=h),this.__bbox}}]),d}(),Nx={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},Px={os:"offset",e:"easing"},Fx={value:"v",options:"o"},Bx={},Yx={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},Hx={};fr.DOM_KEY_SET.concat(fr.GEOM_KEY_SET).forEach(function(t){var e;Nx.hasOwnProperty(t)?Px[Nx[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),Nx[t]=e,Px[e]=t)}),Object.keys(Fx).forEach(function(t){Bx[Fx[t]]=t}),Object.keys(Yx).forEach(function(t){Hx[Yx[t]]=t});var T={fullCssProperty:Nx,abbrCssProperty:Px,fullAnimate:Fx,abbrAnimate:Bx,fullAnimateOption:Yx,abbrAnimateOption:Hx},Gx=zt.TYPE_VD,Wx=zt.TYPE_GM,Ux=zt.TYPE_CP,Xx=fe.isNil,Vx=fe.isFunction,Kx=fe.isPrimitive,zx=fe.clone,jx=fe.extend,$x=T.abbrCssProperty,Zx=T.abbrAnimateOption,qx=T.abbrAnimate;function Jx(i,o){i&&Object.keys(i).forEach(function(t){var e,r;0===t.indexOf("var-")?(e=t.slice(4),o.hasOwnProperty(e)&&(r=o[e],i["var-"+r]=i[t])):o.hasOwnProperty(t)&&(r=o[t],i[r]=i[t],delete i[t])})}function Qx(h,l){var t;h&&l&&(h.hasOwnProperty("vars")?(t=h.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&l.hasOwnProperty(e))for(var i=h,o=0,n=r.length;o<n;o++){var a=r[o];if(!i.hasOwnProperty(a)&&o!==n-1)return void Ne.error("Slot miss "+a);if(o===n-1){var s=l[e];if(void 0===s)return;Vx(s)&&(s=s(i(a))),i[a]=s}else i=i[a]}})):Object.keys(h).forEach(function(t){if(0===t.indexOf("var-")){var e=h[t];if(e){var r=t.slice(4);if(r&&e.id&&l.hasOwnProperty(e.id)){var i=l[e.id];if(void 0!==i){var o=h;if(-1<r.indexOf(".")){for(var n=r.split("."),a=n.length,s=0;s<a-1;s++){if(!o[r=n[s]])return void Ne.warn("parseJson vars is not exist: "+e.id+", "+t+", "+n.slice(0,s).join("."));o=o[r]}r=n[a-1]}Vx(i)&&(i=i(e)),o[r]=i}}}}}))}function tE(e,t,r,o,i){var n=4<arguments.length&&void 0!==i?i:{};if(Kx(t)||t instanceof R||t instanceof Bs)return t;if(Array.isArray(t))return t.map(function(t){return tE(e,t,r,o,n)});var a=t.libraryId;if(!Xx(a)){var s=n[a];if(!s)throw new Error("Link library miss id: "+a);!function(e,r){e.tagName=r.tagName,e.props=zx(r.props),e.children=r.children,e.library=r.library,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,i,o=e.init;o&&(i=(t=e.props=e.props||{}).style,jx(t,o),i&&(jx(i,o.style),t.style=i),e.init=null)}(t,s),t.libraryId=null}var h,l,c,u=t.library;Array.isArray(u)&&(n={},u.forEach(function(t){!function(t,e){var r=t.id;if(Xx(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}(t,n)}),h=t,l=n,(c=o.vars)&&(h.hasOwnProperty("vars")?(_=h.vars,Array.isArray(_)||(_=[_]),Array.isArray(_)&&_.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&c.hasOwnProperty(e)&&"library"===r[0])for(var i=l,o=1,n=r.length;o<n;o++){var a,s,h=r[o];if(!i.hasOwnProperty(h)&&o!==n-1)return void Ne.error("Library slot miss "+h);o===n-1?(a=c[e],Vx(a)&&(a=a(i(h))),s=i[h],i[h]=1===o?Object.assign({id:s.id,tagName:s.tagName},a):a):i=i[h]}})):Object.keys(h).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=h[t],delete h[t],!e||(r=t.slice(12))&&e.id&&c.hasOwnProperty(e.id)&&(t=c[e.id],(t=Vx(t)?t(e):t)&&t.tagName&&(l[r]=Object.assign({id:r},t))))})),t.library=null);var i=t.tagName,a=t.props,s=void 0===a?{}:a,u=t.children,_=void 0===u?[]:u,a=t.animate,u=void 0===a?[]:a;if(!i)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var f,a=s.style;if(!1!==o.abbr&&Jx(a,$x),Qx(a,o.vars),Qx(s,o.vars),Qx(t,o.vars),!Array.isArray(_))throw new Error("children must be an array");return _="$"===i.charAt(0)?e.createGm(i,s):/^[A-Z]/.test(i)?(t=Bs.getRegister(i),e.createCp(t,s,_.map(function(t){return t&&-1<[Gx,Wx,Ux].indexOf(t.$$type)?t:tE(e,t,r,o,n)}))):e.createVd(i,s,_.map(function(t){return t&&-1<[Gx,Wx,Ux].indexOf(t.$$type)?t:tE(e,t,r,o,n)})),u&&((u=!Array.isArray(u)?[u]:u).forEach(function(t){!1!==o.abbr&&Jx(t,qx);var e,r,i=t.value,t=t.options;Array.isArray(i)&&i.length&&(f=!0,i.forEach(function(t){!1!==o.abbr&&Jx(t,$x),Qx(t,o.vars)})),t&&(!1!==o.abbr&&Jx(t,Zx),Qx(t,o.vars),e=t,r=o,["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach(function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}))}),f&&r.push({animate:u,target:_})),_}var eE={parse:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(e){var o=(e=!i.singleton&&!e.singleton?fe.clone(e):e).fonts;o&&(o=!Array.isArray(o)?[o]:o).forEach(function(t){var e=t.fontFamily,t=t.data;e&&t&&Mt.register(e,t)}),!1===e.abbr&&(i.abbr=!1),!1!==i.abbr&&Ne.warn("Abbr in json is deprecated"),Ne.isDom(r)||(i=r||{},r=null);var n=[],o=tE(t,e,n,i);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg");e=i.controller instanceof zp?i.controller:o.animateController;t.render(o,r),n.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(n),e.__playAuto()):(e.__records2=e.__records2.concat(n),e.init(e.__records2,e.list2))}else n.length&&(o.__animateRecords={options:i,list:n,controller:i.controller instanceof zp?i.controller:null});return o}},loadAndParse:function(o,e,r,i){var t=e.fonts,n=e.components,a=e.imgs,s=[],h=[],l=[];t&&(t=!Array.isArray(t)?[t]:t).forEach(function(t){t=t.url;t&&s.push(t)}),n&&(n=!Array.isArray(n)?[n]:n).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&o.Component.hasRegister(e)&&!i||r&&h.push(t)}),a&&(a=!Array.isArray(a)?[a]:a).forEach(function(t){t=t.url;t&&l.push(t)});var c=s.length,u=h.length,_=l.length;if(!(c||u||_)){a=eE.parse(o,e,r,i);return i&&fe.isFunction(i.callback)&&i.callback(a),a}function f(){var t;d===c+u+_&&(t=eE.parse(o,e,r,i),i&&fe.isFunction(i.callback)&&i.callback(t))}var d=0;o.inject.loadFont(s,function(){d+=c,f()}),o.inject.loadComponent(h.map(function(t){return t.url}),function(){d+=u,h.forEach(function(t){t=t.tagName;t&&window[t]&&!o.Component.hasRegister(t)&&o.Component.register(t,window[t])}),f()}),o.inject.measureImg(l,function(){d+=_,f()})},abbr:T},ur={css:Mo,reset:fr,unit:w,font:Mt,abbr:gr,transform:fa},mr={Animation:Yc,Controller:zp,easing:Mh,frame:fh},T={level:Ia,change:Cr,Page:Yo,Cache:xa};rp.register("$line",qt),rp.register("$polyline",Ky),rp.register("$polygon",Y),rp.register("$sector",pt),rp.register("$rect",Jt),rp.register("$circle",re),rp.register("$ellipse",ee);v={version:"0.68.0",render:function(t,e){if(!(t instanceof xy))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,o=arguments.length;i<o;i++)r.push(arguments[i]);return fe.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?t instanceof rp?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new xy(t,e,r);if(Zf.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:zt.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:zt.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:zt.TYPE_CP}},parse:function(t,e,r){return eE.parse(this,t,e,r)},loadAndParse:function(t,e,r){return eE.loadAndParse(this,t,e,r)},mode:rt,Component:Bs,Node:R,Text:ls,Geom:rp,Xom:Hf,Dom:v1,Img:ld,Root:xy,Event:ks,util:fe,inject:Ne,style:ur,parser:eE,animate:mr,math:y,builder:Is,updater:Tp,refresh:T,enums:v,set debug(t){de.flag=!!t}};return Is.ref({Xom:Hf,Dom:v1,Img:ld,Geom:rp,Component:Bs}),"undefined"!=typeof window?window.karas=v:"undefined"!=typeof self&&(self.karas=v),v});
