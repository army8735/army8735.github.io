!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=F(r),e=(t=i?(t=F(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}}function N(){return(N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(i)return i=Object.getOwnPropertyDescriptor(i,e),i.get?i.get.call(arguments.length<3?t:r):i.value}).apply(this,arguments)}function Bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var c={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,WRITING_MODE:87,FILL:88,STROKE:89,STROKE_WIDTH:90,STROKE_DASHARRAY:91,STROKE_DASHARRAY_STR:92,STROKE_LINECAP:93,STROKE_LINEJOIN:94,STROKE_MITERLIMIT:95,FILL_RULE:96,MATRIX:97,BORDER_TOP:98,BORDER_RIGHT:99,BORDER_BOTTOM:100,BORDER_LEFT:101,TRANSLATE_PATH:102},v={};function m(t){return v[t]=v[t]||t.toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),v[t]}var y={};var E={},x={},b={},A=(Object.keys(c).forEach(function(t){var e=c[t],t=m(E[e]=t);x[e]=t,b[t]=e}),{STYLE_KEY:c,STYLE_R_KEY:E,STYLE_RV_KEY:x,STYLE_V_KEY:b,style2Lower:m,style2Upper:function(t){return y[t]=y[t]||t.replace(/([a-z\d_])([A-Z])/g,function(t,e,r){return e+"_"+r}).toUpperCase(),y[t]},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_COMPONENT:3,UPDATE_OVERWRITE:4,UPDATE_KEYS:5,UPDATE_LIST:6,UPDATE_CONFIG:7,UPDATE_ADD_DOM:8,UPDATE_REMOVE_DOM:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_PLAY_CB:8,I_TARGET:9,I_ROOT:10,I_FRAMES:11,I_FRAMES_R:12,I_CURRENT_TIME:13,I_NEXT_TIME:14,I_STYLE:15,I_DURATION:16,I_ITERATIONS:17,I_FILL:18,I_PLAYBACK_RATE:19,I_PLAY_COUNT:20,I_PLAY_STATE:21,I_DESTROYED:22,I_START_TIME:23,I_FPS_TIME:24,I_EASING:25,I_ENTER_FRAME:26,I_DELAY:27,I_END_DELAY:28,I_KEYS:29,I_ORIGIN_STYLE:30,I_CURRENT_FRAMES:31,I_CURRENT_FRAME:32,I_SPF_LIMIT:33,I_FPS:34,I_DIRECTION:35,I_FIRST_ENTER:36,I_STAY_BEGIN:37,I_STAY_END:38,I_IS2:39,I_END_TIME:40,I_NODE_CONFIG:41,I_ROOT_CONFIG:42,I_OUT_BEGIN_DELAY:43,I_TIME_STAMP:44},ELLIPSIS:"â€¦"}),T=A.STRUCT_KEY,R=T.STRUCT_NODE,M=T.STRUCT_INDEX,O=T.STRUCT_CHILD_INDEX,S=T.STRUCT_LV,T=A.NODE_KEY,C=T.NODE_IS_DESTROYED,I=T.NODE_STRUCT,k=function(){function t(){_(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__sx=0,this.__sy=0,this.__width=0,this.__height=0,this.__baseline=0,this.__verticalBaseline=0,this.__config={},this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null,this.__virtualDom=null,this.__bbox=null,this.__filterBbox=null}return f(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[I]=(o(i={},R,this),o(i,M,t),o(i,O,r),o(i,S,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[I],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[C]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseline",get:function(){return this.__baseline}},{key:"verticalBaseline",get:function(){return this.__verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[C]}},{key:"isReplaced",get:function(){return!1}}]),t}(),et={CANVAS:0,SVG:1,WEBGL:2},r={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,GRADIENT:14,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,r.PERCENT]:/px$/i.test(t)?[e,r.PX]:/deg$/i.test(t)?[e,r.DEG]:/rem$/i.test(t)?[e,r.REM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/em$/i.test(t)?[e,r.EM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/vmax$/i.test(t)?[e,r.VMAX]:/vmin$/i.test(t)?[e,r.VMIN]:[e,r.NUMBER]}},yt={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},simsun:{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)&&this.info[t].checked},register:function(t,e){var e=e||{},r=e.emSquare,r=void 0===r?2048:r,i=e.ascent,i=void 0===i?1854:i,n=e.descent,n=void 0===n?434:n,e=e.lineGap,e=void 0===e?0:e;this.info[t.toLowerCase()]={lhr:(i+n+e)/r,blr:i/r}},hasRegister:function(t){return this.info.hasOwnProperty(t)},hasChecked:function(t){return this.hasRegister(t)&&this.info[t].hasOwnProperty("checked")},setChecked:function(t,e){return this.info[t].checked=e},addPadding:function(t,e){Object.assign(this.info[t.toLowerCase()].padding,e)}};yt.info["å®‹ä½“"]=yt.info.simsun,yt.info.pingfang=yt.info["pingfang sc"];var w={TYPE_VD:Symbol("Dom"),TYPE_GM:Symbol("Geom"),TYPE_CP:Symbol("Component")};function D(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function L(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var Ht={identity:D,multiply:function(t,e){if(L(t))return e;if(L(e))return t;for(var r=[],i=0;i<4;i++){var n=t[i]||0,o=t[i+4]||0,a=t[i+8]||0,s=t[i+12]||0;r[i]=n*e[0]+o*e[1]+a*e[2]+s*e[3],r[i+4]=n*e[4]+o*e[5]+a*e[6]+s*e[7],r[i+8]=n*e[8]+o*e[9]+a*e[10]+s*e[11],r[i+12]=n*e[12]+o*e[13]+a*e[14]+s*e[15]}return r},calPoint:function(t,e){var r,u,c,_,f,d,p,g,i=(t=Bt(t,4))[0],n=t[1],o=t[2];if(void 0===(t=t[3])&&(t=1),!e||L(e))return[i,n,o,t];if(16===e.length)return o=o||0,a=(r=Bt(e,16))[0],h=r[1],u=r[2],c=r[3],s=r[4],v=r[5],_=r[6],f=r[7],l=r[8],d=r[9],p=r[10],g=r[11],[i*a+n*s+o*l+r[12],i*h+n*v+o*d+r[13],i*u+n*_+o*p+r[14],t*=i*c+n*f+o*g+r[15]];var a=Bt(e,6),s=a[0],l=a[1],h=a[2],v=a[3];return[s*i+h*n+a[4],l*i+v*n+a[5]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length){var e=t,r=[],i=(r[0]=e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10],r[4]=-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10],r[8]=e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9],r[12]=-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9],r[1]=-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10],r[5]=e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10],r[9]=-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9],r[13]=e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9],r[2]=e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6],r[6]=-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6],r[10]=e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5],r[14]=-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5],r[3]=-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6],r[7]=e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6],r[11]=-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5],r[15]=e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5],e[0]*r[0]+e[1]*r[4]+e[2]*r[8]+e[3]*r[12]);if(0==i)return D();i=1/i;for(var u=[],n=0;n<16;n++)u[n]=r[n]*i;return u}var o=(e=Bt(t,6))[0],a=e[1],s=e[2],l=e[3],c=e[4],_=e[5];if(1===o&&0===a&&0===s&&1===l&&0===c&&0===_)return t;var h=o*l-a*s;return 0==h?t:[l/h,-a/h,-s/h,o/h,(s*_-l*c)/h,(a*c-o*_)/h]},isE:L,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}},P={}.toString;function B(e){return function(t){return P.call(t)==="[object "+e+"]"}}var H=B("Object"),T=B("String"),t=B("Function"),e=B("Number"),i=B("Boolean"),Y=B("Date"),G={}.hasOwnProperty,W=G.toString,U=W.call(Object);function X(t){return null==t}function V(t){return X(t)?"":t.toString()}function z(t){var e,r,i,n,o,a,s,l,h;return"item"===t.type||"img"===t.type?(e="",(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"):"text"===t.type?(r="",(t.children||[]).forEach(function(t){r+=z(t)}),"<g>"+r+"</g>"):"dom"===t.type||"geom"===t.type?(i="<g>",t.bb.forEach(function(t){i+=z(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=z(t))}),i+="</g>",n=t.opacity,o=t.transform,a=t.visibility,s=t.mask,l=t.overflow,h=t.filter,t=t.mixBlendMode,"<g"+(1!==n&&void 0!==n?' opacity="'+n+'"':"")+(o?' transform="'+o+'"':"")+' visibility="'+a+'"'+(s?' mask="'+s+'"':"")+(l?' clip-path="'+l+'"':"")+(h||t?' style="':"")+(h?"filter:"+h+";":"")+(t?"mix-blend-mode:"+t+";":"")+(h||t?'"':"")+">"+i+"</g>"):void 0}function K(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function j(t,e){for(var r=t.length?t[0]:"",i=1,n=t.length;i<n;i++)r+=e+t[i];return r}function $(t){if(!t||"[object Object]"!==P.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=G.call(t,"constructor")&&t.constructor;return"function"==typeof t&&W.call(t)===U}function Z(t){return 1===t.length?"0"+t:t}var Tt={isObject:H,isString:T,isFunction:t,isNumber:e,isBoolean:i,isDate:Y,isNil:X,isPrimitive:function(t){return Tt.isNil(t)||Tt.isBoolean(t)||Tt.isString(t)||Tt.isNumber(t)},isAuto:function(t){return X(t)||"auto"===t},isPlainObject:$,stringify:V,joinSourceArray:function t(e){for(var r="",i=0,n=e.length;i<n;i++){var o=e[i];Array.isArray(o)?r+=t(o):r+=V(o)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=K(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=z(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=z(t))}),e+="</g>"},joinVd:z,joinDef:K,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],X(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+j(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+j(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+j(t,",")+")";if(3===t.length)return"rgba("+j(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n))e[n[0]]=n[1];else for(var o=Object.keys(n),a=o.length-1;0<=a;a--){var s=o[a];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,n=r.length;i<n;i++){var o=r[i];e.push([o,t[o]])}return e},clone:function e(r){if(X(r)||"object"!==mt(r))return r;if(r.$$type===w.TYPE_VD||r.$$type===w.TYPE_GM||r.$$type===w.TYPE_CP)return r;if(Tt.isDate(r))return new Date(r);if(!$(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,n=e.length;i<n;i++){var o=e[i],a=r[i],s=Array.isArray(o),l=Array.isArray(a);if(s&&l){if(!t(o,a))return!1}else{if(s||l)return!1;if(o!==a)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(H(e)&&H(r)){for(var i={},n=0,o=Object.keys(e),u=o.length;n<u;n++){var a=o[n];if(!r.hasOwnProperty(a)||!t(e[a],r[a]))return!1;i[a]=!0}for(var s=0,l=Object.keys(r),c=l.length;s<c;s++){var _=l[s];if(!i.hasOwnProperty(_))return!1}}else{if(Y(e)&&Y(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var h=0,f=e.length;h<f;h++)if(!t(e[h],r[h]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==mt(e))return t;for(var i=0,n=(r=r||Object.keys(e)).length;i<n;){var o=r[i];t[o]=e[o],i++}return t},joinArr:j,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!Ht.isE(e)){var n=Bt(t,4),o=n[0],a=n[1],s=n[2],n=n[3],h=(r&&(o-=r,s+=r),i&&(a-=i,n+=i),[s,a,o,n,s,n]),s=Bt(Ht.calPoint([o,a],e),4),o=s[0],a=s[1];(l=s[3])&&1!==l&&(o/=l,a/=l);for(var u=o,c=a,_=o,f=a,d=0;d<6;d+=2){var l,p=h[d],g=h[d+1],v=Bt(Ht.calPoint([p,g],e),4),p=v[0],g=v[1];(l=v[3])&&1!==l&&(p/=l,g/=l),u=Math.min(u,p),_=Math.max(_,p),c=Math.min(c,g),f=Math.max(f,g)}t=[u,c,_,f]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},prefixHex:Z,replaceRgba2Hex:function(t){return(t||"").replace(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)/gi,function(t,e,r,i,n){e="#"+Z(parseInt(e).toString(16))+Z(parseInt(r).toString(16))+Z(parseInt(i).toString(16));return n&&(e+=Z(Math.floor(255*parseFloat(n)).toString(16))),e})}},q={flag:!1},J={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},Q=Ht.calPoint;function tt(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(e),t.deleteShader(e),new Error("Failed to compile shader: "+r);return e}function rt(t,e,r,i){var t=Bt(t,4),n=t[0],o=t[1],a=t[2],t=t[3];return void 0===a&&(a=0),(t=void 0===t?1:t)&&1!==t&&(n/=t,o/=t,a/=t),o===r?o=0:(o=(o-r)/r,i&&(o=-o)),[(n=n===e?0:(n-e)/e)*t,o*t,a*t,t]}function it(t,e,r,i,n){var o=t.createTexture();return nt(t,o,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,n,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),o}function nt(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var ot,ft={initShaders:function(t,e,r){if(!(e=function(t,e,r){e=tt(t,t.VERTEX_SHADER,e),r=tt(t,t.FRAGMENT_SHADER,r);if(!e||!r)return null;var i=t.createProgram();if(!i)return null;if(i.vertexShader=e,i.fragmentShader=r,t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return i;var n=t.getProgramInfoLog(i);throw t.deleteProgram(i),t.deleteShader(r),t.deleteShader(e),new Error("Failed to link program: "+n)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),e},createTexture:it,bindTexture:nt,drawTextureCache:function(r,t,T,y,E,x){var b,R=[],M=[],O=[],A=[0],S=[A],t=(t.forEach(function(t,e){var t=Bt(t,5),r=t[0],i=t[1],n=t[2],o=t[3],t=t[4],e=(e?(e=T[r.page.uuid],b!==e&&(A=[0,b=e],S.push(A))):(b=T[r.page.uuid],A[1]=b),r.x),u=r.y,c=r.width,_=r.height,f=r.page,r=r.bbox,a=r[0],r=r[1],s=a+(o||0),l=r+_+(t||0),a=a+c+(o||0),o=r+(t||0),r=Bt(Q([s,l],n),4),t=r[0],d=r[1],r=r[3],l=Bt(Q([a,l],n),4),p=l[0],g=l[1],l=l[3],a=Bt(Q([a,o],n),4),v=a[0],m=a[1],a=a[3],s=Bt(Q([s,o],n),4),o=s[0],n=s[1],s=s[3],h=Bt(rt([t,d,0,r],y,E,x),2),t=h[0],d=h[1],h=Bt(rt([p,g,0,l],y,E,x),2),p=h[0],g=h[1],h=Bt(rt([v,m,0,a],y,E,x),2),v=h[0],m=h[1],h=Bt(rt([o,n,0,s],y,E,x),2),o=h[0],n=h[1],h=(R.push(t,d,0,r,o,n,0,s,p,g,0,l,o,n,0,s,p,g,0,l,v,m,0,a),e/f.width),t=(u+_)/f.height,d=(e+c)/f.width,r=u/f.height;M.push(h,t,h,r,d,t,h,r,d,t,d,r),O.push(i,i,i,i,i,i),A[0]++}),r.createBuffer()),e=(r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,new Float32Array(R),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_position")),o=(r.vertexAttribPointer(e,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(e),r.createBuffer()),i=(r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,new Float32Array(M),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_texCoords")),a=(r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i),r.createBuffer()),n=(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(O),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_opacity")),s=(r.vertexAttribPointer(n,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n),r.getUniformLocation(r.program,"u_texture")),l=0;S.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];r.uniform1i(s,t),r.drawArrays(r.TRIANGLES,l,e*=6),l+=e}),r.deleteBuffer(t),r.deleteBuffer(o),r.deleteBuffer(a),r.disableVertexAttribArray(e),r.disableVertexAttribArray(i),r.disableVertexAttribArray(n)},drawBlur:function(e,u,c,_,f,d,p,t,r,i,n,o,a,s){for(var l=(r=Bt(rt([i,r+i,0,1],a,s,!1),2))[0],r=r[1],i=(t=Bt(rt([t+i,i,0,1],a,s,!1),2))[0],a=t[1],s=e.createBuffer(),t=(e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([l,a,l,r,i,a,l,r,i,a,i,r]),e.STATIC_DRAW),e.getAttribLocation(u,"a_position")),l=(e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t),e.createBuffer()),a=(e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),e.getAttribLocation(u,"a_texCoords")),h=(e.vertexAttribPointer(a,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(a),e.getUniformLocation(u,"u_direction")),g=(e.uniform2f(h,0,0),e.getUniformLocation(u,"u_texture")),v=(e.uniform1i(g,p),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW),100/Math.max(n,o)),m=n/o,y=[],E=0;E<3;E++){var x=it(e,null,p,n,o),b=(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,x,0),o<=n?e.uniform2f(h,v,0):e.uniform2f(h,v*m,0),e.uniform1i(g,d),e.drawArrays(e.TRIANGLES,0,6),y.push(_),it(e,null,d,n,o));e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,b,0),o<=n?e.uniform2f(h,0,v*m):e.uniform2f(h,0,v),e.uniform1i(g,p),e.drawArrays(e.TRIANGLES,0,6),_=b,y.push(x)}return e.deleteBuffer(s),e.deleteBuffer(l),e.disableVertexAttribArray(t),e.disableVertexAttribArray(a),y.forEach(function(t){return e.deleteTexture(t)}),_},drawOverflow:function(t,u,e,r,i,n,o,a){var s=t.createBuffer(),l=(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_position")),l=(t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l),e/o),h=r/a,i=(i+e)/o,e=(n+r)/a,o=t.createBuffer(),n=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([l,h,l,e,i,h,l,e,i,h,i,e]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_texCoords")),r=(t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),t.getUniformLocation(t.programOverflow,"u_texture"));t.uniform1i(r,u),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(s)},drawMask:function(t,e,r,i){var n=t.createBuffer(),o=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_position")),a=(t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(i,"u_texture1")),l=(t.uniform1i(l,r),t.getUniformLocation(i,"u_texture2"));t.uniform1i(l,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(a),t.disableVertexAttribArray(o),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,h,u){var n=t.createBuffer(),o=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),a=(t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture1")),l=(t.uniform1i(l,r),t.getUniformLocation(e,"u_texture2"));t.uniform1i(l,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(a),t.disableVertexAttribArray(o),t.disableVertexAttribArray(s)},drawCm:function(t,e,r,i){var n=t.createBuffer(),o=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),a=(t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture")),l=(t.uniform1i(l,r),t.getUniformLocation(e,"u_m"));t.uniform1fv(l,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(a),t.disableVertexAttribArray(o),t.disableVertexAttribArray(s)},drawDropShadow:function(t,e,u,r,c,_,i,f,d,n){var o=t.createBuffer(),a=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),s=(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.createBuffer()),l=(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),h=(t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l),t.getUniformLocation(e,"u_texture")),h=(t.uniform1i(h,i),t.getUniformLocation(e,"u_color"));return t.uniform1fv(h,new Float32Array([n[0]/255,n[1]/255,n[2]/255,n[3]])),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(s),t.disableVertexAttribArray(a),t.disableVertexAttribArray(l),r}},at={},st={},lt=[],ht=[],ut="function"==typeof OffscreenCanvas&&Tt.isFunction(OffscreenCanvas.prototype.getContext);function ct(t,e,r,i,n){var o;return(o=t?i[t]||(i[t]=!q.flag&&ut?new OffscreenCanvas(e,r):document.createElement("canvas")):(o=i===at?lt:ht).length?o.pop():!q.flag&&ut?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,o.height=r,q.flag&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",i===at?"canvas":"webgl"),t&&o.setAttribute("key",t),n&&o.setAttribute("message",n),document.body.appendChild(o)),e=i===at?o.getContext("2d"):o.getContext("webgl",J)||o.getContext("experimental-webgl",J),{canvas:o,ctx:e,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===at?lt:ht).push(this.canvas),this.available=!1}}}var _t,dt={},pt={},gt={};function vt(){(_t=document.createElement("div")).style.position="absolute",_t.style.left="99999px",_t.style.top="-99999px",_t.style.visibility="hidden",_t.style.whiteSpace="nowrap",document.body.appendChild(_t)}var Et,xt,Rt={measureTextSync:function(t,e,r,i){return _t||vt(),_t.style.fontFamily=e,_t.style.fontSize=r+"px",_t.style.fontWeight=i,_t.innerHTML=t.replace(/</g,"&lt;").replace(/[ \n]/g,"&nbsp;"),parseFloat(window.getComputedStyle(_t,null).width)},measureTextListMax:function(t,e,r,i){_t||vt(),_t.style.fontFamily=e,_t.style.fontSize=r+"px",_t.style.fontWeight=i;for(var n="",o=0,a=t.length;o<a;o++)n+='<span style="position:absolute">'+t.charAt(o).replace("<","&lt;").replace(/[ \n]/,"&nbsp;")+"</span>";_t.innerHTML=n;for(var s=0,l=_t.childNodes,h=0,u=l.length;h<u;h++)var c=l[h],s=Math.max(s,parseFloat(window.getComputedStyle(c,null).width));return s},IMG:dt,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,o=[];e.forEach(function(t,e){Rt.measureImg(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!e||!Tt.isString(e))return Rt.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,a,s=dt[e]=dt[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(a=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&("undefined"!=typeof location&&location.hostname===a[1]||(t.crossOrigin="anonymous")),t.src=e,q.flag&&"undefined"!=typeof document&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(xt=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(Rt.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Rt.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},At.toString=function(){return xt.toString()},At),cancelAnimationFrame:(Et=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Rt.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Rt.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},bt.toString=function(){return Et.toString()},bt),now:function(){return"undefined"!=typeof performance?(Rt.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Rt.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&at.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return ct(r,t,e,at,i)},releaseCacheCanvas:function(t){lt.push(t)},delCacheCanvas:function(t){t&&delete at[t]},hasCacheWebgl:function(t){return t&&st.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return ct(r,t,e,st,i)},releaseCacheWebgl:function(t){ht.push(t)},delCacheWebgl:function(t){t&&delete st[t]},isDom:function(t){if(t){if(Tt.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(Tt.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},defaultFontFamily:"arial",getFontCanvas:function(){return Rt.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__")},checkSupportFontFamily:function(t){if((t=t.toLowerCase())===this.defaultFontFamily||"serif"===t||"sans-serif"===t||"sansserif"===t)return!0;if(!yt.info.hasOwnProperty(t))return!1;if(yt.info[t].hasOwnProperty("checked"))return yt.info[t].checked;for(var e=Rt.getFontCanvas(),r=e.ctx,i=(r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",ot||(r.clearRect(0,0,16,16),r.font="16px "+this.defaultFontFamily,r.fillText("a",8,8),e.draw(),ot=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),r.font="16px "+t,r.fillText("a",8,8),e.draw(),r.getImageData(0,0,16,16).data),n=0,o=i.length;n<o;n++)if(ot[n]!==i[n])return yt.info[t].checked=!0;return yt.info[t].checked=!1},loadFont:function(t,e,r){if(Tt.isFunction(e)&&(r=e,e=t),Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,o=[];e.forEach(function(t,e){Rt.loadFont(t.fontFamily,t.url,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!e||!Tt.isString(e))return Rt.error("Load font invalid: "+e),void(r&&r({state:2,success:!1,url:e}));t=t||e;var a,s=pt[e]=pt[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),/url\(/.test(e)||(e="url(".concat(e,")")),(a=new FontFace(t,e)).load().then(function(){document.fonts.add(a),s.state=2,s.success=!0,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})}).catch(function(){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,o=[];t.forEach(function(t,e){Rt.loadComponent(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!t||!Tt.isString(t))return Rt.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,a=gt[t]=gt[t]||{state:0,task:[]};2===a.state?r&&r(a):1===a.state?r&&a.task.push(r):(a.state=1,r&&a.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){a.state=2,a.success=!0,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},e.onerror=function(){a.state=2,a.success=!1,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function bt(t){return Et.apply(this,arguments)}function At(t){return xt.apply(this,arguments)}var Mt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit",writingMode:"inherit"},Ot={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},St=[],Ct=[],It=(Object.keys(Mt).forEach(function(t){Ct.push(t);var e=Mt[t];St.push({k:t,v:e})}),[]),kt=[],T=(Object.keys(Ot).forEach(function(t){kt.push(t);var e=Ot[t];It.push({k:t,v:e})}),{get fontFamily(){return Rt.defaultFontFamily},fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:1,textStrokeOver:"none",writingMode:"horizontalTb"}),wt=[],Dt=(Object.keys(T).forEach(function(t){wt.push(t)}),{DOM:Mt,GEOM:Ot,isValid:function(t){return Mt.hasOwnProperty(t)||Ot.hasOwnProperty(t)},DOM_KEY_SET:Ct,GEOM_KEY_SET:kt,DOM_ENTRY_SET:St,GEOM_ENTRY_SET:It,INHERIT:T,INHERIT_KEY_SET:wt,VALID_STRING_VALUE:{position:["static","relative","absolute"],display:["block","inlineBlock","inline","flex","none"],flexDirection:["row","column","rowReverse","columnReverse"],flexWrap:["wrap","wrapReverse","nowrap"],justifyContent:["flexStart","center","flexEnd","spaceBetween","spaceAround","spaceEvenly"],alignItems:["stretch","flexStart","center","flexEnd","baseline"],alignSelf:["auto","stretch","flexStart","center","flexEnd","baseline"],overflow:["visible","hidden"],mixBlendMode:["normal","multiply","screen","overlay","darken","lighten","colorDodge","colorBurn","hardLight","softLight","difference","exclusion","hue","saturation","color","luminosity"],borderTopStyle:["solid","dashed","dotted"],borderRightStyle:["solid","dashed","dotted"],borderBottomStyle:["solid","dashed","dotted"],borderLeftStyle:["solid","dashed","dotted"],backgroundClip:["borderBox","paddingBox","contentBox"],textOverflow:["clip","ellipsis"],alignContent:["stretch","flexStart","center","flexEnd","spaceBetween","spaceAround"]}}),Lt={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i,han:/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/,punctuation:/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/};var Ft={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},Nt=4*(Math.sqrt(2)-1)/3,Pt=Ft.crossProduct,Yt=Ht.calPoint,Gt=Ht.isE,t=A.STYLE_KEY,Wt=t.WIDTH,Ut=t.HEIGHT,Xt=t.TRANSFORM_ORIGIN;function Vt(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function zt(t,e,r){for(var i=Bt(r[0],2),n=i[0],u=i[1],i=Bt(r[0],2),c=i[0],_=i[1],f=r.length,o=1;o<f;o++)var a=Bt(r[o],2),d=a[0],a=a[1],n=Math.max(n,d),u=Math.max(u,a),c=Math.min(c,d),_=Math.min(_,a);if(t<c||e<_||n<t||u<e)return!1;for(var s=0,p=r.length;s<p;s++){var l=Bt(r[s],2),g=l[0],l=l[1],h=Bt(r[(s+1)%p],2),v=h[0],h=h[1];if(Pt(v-g,h-l,t-g,e-l)<0)return!1}return!0}function Kt(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function jt(t,e){var t=Bt(t,4),r=t[0],i=t[1],n=t[2],t=t[3],e=Bt(e,4),o=e[0],a=e[1],s=e[2],e=e[3];return!(s<=r||e<=i||n<=o||t<=a)}function $t(t,e,r){var i=r.matrix,i=void 0===i?[1,0,0,1,0,0]:i,r=r.computedStyle,r=void 0===r?{}:r,n=r[Wt],o=r[Ut],r=r[Xt],r=Bt(r=void 0===r?[.5*n,.5*o]:r,2),a=r[0],r=r[1],n=Bt(Yt([t*n-a,e*o-r],i),2);return[(t=n[0])+a,(e=n[1])+r]}function Zt(t){return t*Math.PI/180}function qt(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function Jt(t,e,r){var i=(2*e+r)/3,n=(e+2*r)/3;return(t(e)+3*t(i)+3*t(n)+t(r))*(r-e)/8}function Qt(e,r){return function t(e,r,i,n){var n=3<arguments.length&&void 0!==n?n:.001,o=(r+i)/2,a=Jt(e,r,i),s=Jt(e,r,o),l=Jt(e,o,i),a=s+l-a;return Math.abs(a)<=15*n?s+l+a/15:t(e,r,o,n/2)+t(e,o,i,n/2)}(function(t){return qt(te(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function te(t,e,r,i){i=3<arguments.length&&void 0!==i?i:1;return 2===r?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Bt(e,3),i=e[0],n=e[1],e=e[2],o=(i=Bt(i,2))[0],i=i[1],a=(n=Bt(n,2))[0],n=n[1],e=Bt(e,2),s=e[0],e=e[1],l=0,h=0,h=0===r?(l=Math.pow(1-t,2)*o+2*t*(1-t)*a+Math.pow(t,2)*s,Math.pow(1-t,2)*i+2*t*(1-t)*n+Math.pow(t,2)*e):1===r?(l=2*(1-t)*(a-o)+2*t*(s-a),2*(1-t)*(n-i)+2*t*(e-n)):2===r?(l=2*(s-2*a+o),2*(e-2*n+i)):l=0;return[l,h]}(t,e,i):3===r?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Bt(e,4),i=e[0],n=e[1],o=e[2],e=e[3],a=(i=Bt(i,2))[0],i=i[1],s=(n=Bt(n,2))[0],n=n[1],l=(o=Bt(o,2))[0],o=o[1],e=Bt(e,2),u=e[0],e=e[1],h=0,c=0,c=0===r?(h=Math.pow(1-t,3)*a+3*t*Math.pow(1-t,2)*s+3*(1-t)*Math.pow(t,2)*l+Math.pow(t,3)*u,Math.pow(1-t,3)*i+3*t*Math.pow(1-t,2)*n+3*(1-t)*Math.pow(t,2)*o+Math.pow(t,3)*e):1===r?(h=3*((1-t)*(1-t)*(s-a)+2*(1-t)*t*(l-s)+t*t*(u-l)),3*((1-t)*(1-t)*(n-i)+2*(1-t)*t*(o-n)+t*t*(e-o))):2===r?(h=6*(l-2*s+a)*(1-t)+6*(u-2*l+s)*t,6*(o-2*n+i)*(1-t)+6*(e-2*o+n)*t):3===r?(h=6*(u-3*l+3*s-a),6*(e-3*o+3*n-i)):h=0;return[h,c]}(t,e,i):void 0}function ee(e,r,h){for(var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,c=function(t){return qt(te(t,e,r))},_=h*t,n=t,o=n,a=0;a<u;a++){var s=Jt(c,0,n)-_;if(Math.abs(s)<i)break;var l=qt(te(n,e,r,1));if(n-=s*l/(s*qt(te(n,e,r,2))+l*l),Math.abs(n-o)<i)break;o=n}return te(n,e,r,0)}function re(u,t){var e=Bt(u,4),r=Bt(e[0],2),i=r[0],r=r[1],n=Bt(e[1],2),o=n[0],n=n[1],a=Bt(e[2],2),c=a[0],a=a[1],e=e[3],s=(o-i)*t+i,l=(n-r)*t+r,o=(c-o)*t+o,n=(a-n)*t+n,h=(o-s)*t+s,_=(n-l)*t+l;return 4===u.length?[[i,r],[s,l],[h,_],[((((e=Bt(e,2))[0]-c)*t+c-o)*t+o-h)*t+h,(((e[1]-a)*t+a-n)*t+n-_)*t+_]]:3===u.length?[[i,r],[s,l],[h,_]]:void 0}var ie={pointInPolygon:zt,pointInQuadrilateral:function(u,c,t,e,r,i,n,o,_,f,a){var s,l,h;return a&&!Gt(a)?(t=(s=Bt(Yt([t,e],a),4))[0],e=s[1],s=s[3],r=(l=Bt(Yt([r,i],a),4))[0],i=l[1],l=l[3],_=(h=Bt(Yt([_,f],a),4))[0],f=h[1],h=h[3],n=(a=Bt(Yt([n,o],a),4))[0],o=a[1],s&&1!==s&&(t/=s,e/=s),l&&1!==l&&(r/=l,i/=l),h&&1!==h&&(_/=h,f/=h),(s=a[3])&&1!==s&&(n/=s,o/=s),zt(u,c,[[t,e],[r,i],[n,o],[_,f]])):t<=u&&e<=c&&u<=n&&c<=o},d2r:Zt,r2d:function(t){return 180*t/Math.PI},H:Nt,h:Vt,angleBySide:function(t,e,r){return t=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(t)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:Kt,triangleIncentre:function(t,e,r,i,n,o){var a=Kt(r,i,n,o),s=Kt(t,e,n,o),l=Kt(t,e,r,i);return[(a*t+s*r+l*n)/(a+s+l),(a*e+s*i+l*o)/(a+s+l)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,n=r*Nt,o=i===r?n:i*Nt;return[[t-r,e],[t-r,e-o,t-n,e-i,t,e-i],[t+n,e-i,t+r,e-o,t+r,e],[t+r,e+o,t+n,e+i,t,e+i],[t-n,e+i,t-r,e+o,t-r,e]]},sectorPoints:function u(t,e,r,i,n){if(n<i&&(i=(l=[n,i])[0],n=l[1]),i===n)return[];var o=[],c=Math.floor(i/90),_=Math.floor(n/90);if(c===_||_-c==1&&n%90==0){var f,a,d,s,l=Vt(Zt(Math.abs(i-n)))*r,h=Math.sqrt(Math.pow(r,2)+Math.pow(l,2)),l=Math.atan(l/r);c<90?(f=[t+Math.sin(Zt(i))*r,e-Math.cos(Zt(i))*r],a=l+Zt(i),s=[t+Math.sin(a)*h,e-Math.cos(a)*h],d=[t+Math.sin(Zt(n))*r,e-Math.cos(Zt(n))*r],a=Zt(n)-l,a=[t+Math.sin(a)*h,e-Math.cos(a)*h],o.push(f),o.push(s.concat(a).concat(d))):c<180?(f=[t+Math.cos(Zt(i-90))*r,e+Math.sin(Zt(i-90))*r],s=l+Zt(i-90),a=[t+Math.cos(s)*h,e+Math.sin(s)*h],d=[t+Math.cos(Zt(n-90))*r,e+Math.sin(Zt(n-90))*r],s=Zt(n-90)-l,s=[t+Math.cos(s)*h,e+Math.sin(s)*h],o.push(f),o.push(a.concat(s).concat(d))):c<270?(f=[t-Math.sin(Zt(i-180))*r,e+Math.cos(Zt(i-180))*r],a=l+Zt(i-180),s=[t-Math.sin(a)*h,e+Math.cos(a)*h],d=[t-Math.sin(Zt(n-180))*r,e+Math.cos(Zt(n-180))*r],a=Zt(n-180)-l,a=[t-Math.sin(a)*h,e+Math.cos(a)*h],o.push(f),o.push(s.concat(a).concat(d))):(f=[t-Math.cos(Zt(i-270))*r,e+Math.sin(Zt(i-270))*r],s=l+Zt(i-270),a=[t-Math.cos(s)*h,e+Math.sin(s)*h],d=[t-Math.cos(Zt(n-270))*r,e+Math.sin(Zt(n-270))*r],s=Zt(n-270)-l,l=[t-Math.cos(s)*h,e+Math.sin(s)*h],o.push(f),o.push(a.concat(l).concat(d)))}else{for(var p,g,v=c,m=[];v<=_;v++)0===v?(p=u(t,e,r,i,90),m.push(p)):1===v?(c===v||90<n)&&(p=u(t,e,r,i<90?90:i,180<n?180:n),m.push(p)):2===v?(c===v||180<n)&&(g=u(t,e,r,i<180?180:i,270<n?270:n),m.push(g)):3===v&&(c===v||270<n)&&(g=u(t,e,r,i<270?270:i,n),m.push(g));for(var o=m[0],y=1,E=m.length;y<E;y++)o.push(m[y][1])}return o},getRectsIntersection:function(t,e){if(!jt(t,e))return null;var r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3],o=(e=Bt(e,4))[0],a=e[1],s=e[2],e=e[3];return[Math.max(r,o),Math.max(i,a),Math.min(n,s),Math.min(t,e)]},isRectsOverlap:jt,isRectsInside:function(t,e){var r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3],o=(e=Bt(e,4))[0],a=e[1],s=e[2],e=e[3];return r<=o&&i<=a&&s<=n&&e<=t},calCoordsInNode:$t,calPercentInNode:function(t,e,r){var i,n=(s=r.computedStyle)[Wt],o=s[Ut],a=(s=Bt(s[Xt],2))[0],s=s[1],l=Math.atan((o-s)/(n-a)),h=(r=Bt($t(1,1,r),2))[0],r=r[1],u=a<=h&&s<=r?(i=a===h?-Math.atan(1/0):Math.atan((r-s)/(h-a)))-l:a<=h&&r<s?(i=a===h?-Math.atan(1/0):Math.atan((s-r)/(h-a)))+l:h<a&&s<=r?(i=Math.atan((r-s)/(a-h)))-l:h<a&&r<s?(i=Math.atan((r-s)/(h-a)))<=l?i+Math.PI-l:-(u=Math.PI-i+l):0,r=Math.sqrt(Math.pow(t-a,2)+Math.pow(e-s,2)),h=a<=t&&s<=e?a===t?-Math.atan(1/0):Math.atan((e-s)/(t-a)):a<=t&&e<s?a===t?-Math.atan(1/0):-Math.atan((e-s)/(a-t)):t<a&&s<=e?Math.PI-Math.atan((e-s)/(a-t)):Math.atan((e-s)/(t-a))-Math.PI;return(h-=u)>Math.PI?(h-=Math.PI,[(a-r*Math.cos(h))/n,(s-r*Math.sin(h))/o]):h>.5*Math.PI?(h=Math.PI-h,[(a-r*Math.cos(h))/n,(s+r*Math.sin(h))/o]):0<=h?[(a+r*Math.cos(h))/n,(s+r*Math.sin(h))/o]:h>=.5*-Math.PI?(h=-h,[(a+r*Math.cos(h))/n,(s-r*Math.sin(h))/o]):h>=-Math.PI?(h=Math.PI+h,[(a-r*Math.cos(h))/n,(s-r*Math.sin(h))/o]):(h=-Math.PI-h,[(a-r*Math.cos(h))/n,(s+r*Math.sin(h))/o])},bboxBezier:function(u,c,_,f,d,t,e,p){return 4===arguments.length?[u,c,_,f]:6===arguments.length?(s=u,i=c,n=_,o=f,r=d,g=t,v=Math.min(s,r),m=Math.min(i,g),y=Math.max(s,r),E=Math.max(i,g),(n<v||o<m||y<n||E<o)&&(s=(a=1-(l=(s-n)/(s-2*n+r)))*a*s+2*a*l*n+l*l*r,l=(n=1-(a=(i-o)/(i-2*o+g)))*n*i+2*n*a*o+a*a*g,v=Math.min(v,s),m=Math.min(m,l),y=Math.min(y,s),E=Math.min(E,l)),[v,m,y,E]):8===arguments.length?(r=u,i=c,n=_,o=f,a=d,g=t,s=e,l=p,v=Math.min(r,s),m=Math.min(i,l),y=Math.max(r,s),E=Math.max(i,l),(n<v||o<m||y<n||E<o||a<v||g<m||y<a||E<g)&&(_=(u=i-2*o+g)*u-(c=3*o-i-3*g+l)*(-i+o),0<(t=(f=r-2*n+a)*f-(d=3*n-r-3*a+s)*(-r+n))&&(0<(e=(-f-(t=Math.sqrt(t)))/d)&&e<1&&(h=(h=1-e)*h*h*r+3*h*h*e*n+3*h*e*e*a+e*e*e*s,v=Math.min(v,h),y=Math.max(y,h)),0<(e=(-f+t)/d)&&e<1&&(f=(h=1-e)*h*h*r+3*h*h*e*n+3*h*e*e*a+e*e*e*s,v=Math.min(v,f),y=Math.max(y,f))),0<_&&(0<(t=(-u-(_=Math.sqrt(_)))/c)&&t<1&&(r=(d=1-t)*d*d*i+3*d*d*t*o+3*d*t*t*g+t*t*t*l,m=Math.min(m,r),E=Math.max(E,r)),0<(t=(-u+_)/c)&&t<1&&(h=(n=1-t)*n*n*i+3*n*n*t*o+3*n*t*t*g+t*t*t*l,m=Math.min(m,h),E=Math.max(E,h)))),[v,m,y,E]):void 0;var r,i,n,o,a,g,s,l,h,v,m,y,E},bezierLength:Qt,pointAtBezier:function(t,e,r,i,n){return ee(t,e,Qt(t,e,0,1),r,i,n)},pointAtBezierWithLength:ee,sliceBezier:re,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=re(t,r)),0<e&&(r<1&&(e/=r),t=re(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,i){return 270<=i?(i=Zt(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=Zt(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=Zt(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=Zt(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var ne={getConicGradientImage:function(a,s,l,t,e,h){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");l=Math.floor(l),t=Math.floor(t);for(var u=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),c=0;c<t;c++)for(var r=function(t){for(var e=function(t,e){t-=a,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,c),r=void 0,r=0;r<u.length&&u[r].angle<=e;r++);var i=u[r-1],n=u[r];if(!i||!n)return"continue";var o=(e-i.angle)/(n.angle-i.angle),n=n.color.map(function(t,e){return o*(t-i.color[e])+i.color[e]}),t=4*(t+c*l);h[t]=n[0],h[1+t]=n[1],h[2+t]=n[2],h[3+t]=Math.min(255,255*n[3])},i=0;i<l;i++)r(i);return h}},oe=Tt.int2rgba;function ae(t){var r="";return t.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];"blur"===e?r+="blur(".concat(t,"px)"):"dropShadow"===e?r+="drop-shadow(".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(oe(t[4]),")"):"hueRotate"===e?r+="hue-rotate(".concat(t,"deg)"):"saturate"!==e&&"brightness"!==e&&"grayscale"!==e&&"contrast"!==e&&"sepia"!==e&&"invert"!==e||(r+="".concat(e,"(").concat(t,"%)"))}),r}var se={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var n=-1,o=0,h=e.length;o<h;o++){var a=e[o];if(Array.isArray(a)&&a.length){n=o;break}}if(-1!==n){t.moveTo(e[n][0]+r,e[n][1]+i);for(var s=n+1,u=e.length;s<u;s++){var l=e[s];Array.isArray(l)&&(2===l.length?t.lineTo(l[0]+r,l[1]+i):4===l.length?t.quadraticCurveTo(l[0]+r,l[1]+i,l[2]+r,l[3]+i):6===l.length&&t.bezierCurveTo(l[0]+r,l[1]+i,l[2]+r,l[3]+i,l[4]+r,l[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)&&n.length){e=r;break}}if(-1===e)return"";for(var o="M"+t[e][0]+","+t[e][1],a=e+1,s=t.length;a<s;a++){var l=t[a];Array.isArray(l)&&(2===l.length?o+="L"+l[0]+","+l[1]:4===l.length?o+="Q"+l[0]+","+l[1]+" "+l[2]+","+l[3]:6===l.length&&(o+="C"+l[0]+","+l[1]+" "+l[2]+","+l[3]+" "+l[4]+","+l[5]))}return o},canvasLine:function(t,e,h,r,i,n,o,a){var s=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+s,h+l),3===a?(t.bezierCurveTo(n[0]+s,n[1]+l,o[0]+s,o[1],r+s,i+l),2):2===a?(t.quadraticCurveTo(o[0]+s,o[1]+l,r+s,i+l),2):1===a?(t.quadraticCurveTo(n[0]+s,n[1]+l,r+s,i+l),2):(t.lineTo(r+s,i+l),1)},svgLine:function(t,e,r,i,n,o,a){return 3===a?"M"+t+","+e+"C"+n[0]+","+n[1]+" "+o[0]+","+o[1]+" "+r+","+i:2===a?"M"+t+","+e+"Q"+o[0]+","+o[1]+" "+r+","+i:1===a?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:ae,svgFilter:ae},le=ie.H,he=r.PX,ue=r.PERCENT,ce=r.REM,_e=r.VW,fe=r.VH,de=r.VMAX,pe=r.VMIN,ge=se.canvasPolygon,ve=se.svgPolygon,e=A.STYLE_KEY,me=e.BORDER_LEFT_WIDTH,ye=e.BORDER_TOP_WIDTH,Ee=e.BORDER_BOTTOM_WIDTH,xe=e.PADDING_LEFT,be=e.PADDING_BOTTOM,Ae=e.PADDING_TOP,Te=e.BORDER_TOP_LEFT_RADIUS,Re=e.BORDER_TOP_RIGHT_RADIUS,Me=e.BORDER_BOTTOM_LEFT_RADIUS,Oe=e.BORDER_BOTTOM_RIGHT_RADIUS,Se=e.FONT_SIZE;function Ce(t,e,r,i,u,c,_,n){var f=1,d=1,p=1;t:for(var o=c;u<=o;o--)for(var a=n;_<=a;a--){var s=o+a,l=Math.floor((t+a)/s),h=a;if(l*s<a+t)if(n<(h=(t-l*o)/(l-1)))continue;if(s=o+h,1<e&&o<e){if(o<e%s)continue;if(1<r)if(o<(e+i)%s)continue}if(1<r)if(o<(e+i)%s)continue;0<l&&(f=l,d=o,p=h);break t}return{n:f,ps:d,pd:p}}function Ie(t,e,r,i,n,o){var a=n-e,s=i-r,r=r-e,e=n-i;return"dotted"===t?Ce(a,r,e,s,o,o,Math.max(1,.25*o),2*o):(i=(n=Ce(a,r,e,s,o,3*o,Math.max(1,.25*o),2*o)).n,t=n.ps,n=n.pd,1===i?Ce(a,r,e,s,o,o,Math.max(1,.25*o),2*o):{n:i,ps:t,pd:n})}function ke(u,c,_,f,t,e,d,r,i,p,g,v,n,m){var n=Bt(n,2),o=n[0],n=n[1],m=Bt(m,2),y=m[0],m=m[1];if(!(o&&n||y&&m))return v;for(var l=t+o-(t-f),h=e-y+(d-e),E=[],a=[],x=[],b=0,A=v.length;b<A;b++){var T,R,s=v[b];s[1][0]<l?E.push(s):s[0][0]>h?x.push(s):s[1][0]>h&&s[0][0]<l?(T=l<t?r+Math.tan(c)*(l-f):i,R=e<h?r+Math.tan(_)*(d-h):i,E.push([s[0],[l,r],[l,T],s[3]]),l<h&&(t<l&&h<e?a.push([[l,r],[h,r],[h,i],[l,i]]):t<l?(a.push([[l,r],[e,r],[e,i],[l,i]]),a.push([[e,r],[h,r],[h,R],[e,i]])):h<e?(a.push([[l,r],[t,r],[t,i],[l,T]]),a.push([[t,r],[h,r],[h,i],[t,i]])):(a.push([[l,r],[t,r],[t,i],[l,T]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[e,r],[h,r],[h,R],[e,i]]))),x.push([[h,r],s[1],s[2],[h,R]])):s[1][0]>h?(T=e<h?r+Math.tan(_)*(d-h):i,a.push([s[0],[h,r],[h,T],s[3]]),x.push([[h,r],s[1],s[2],[h,T]])):s[0][0]<l?(R=l<t?r+Math.tan(c)*(l-f):i,E.push([s[0],[l,r],[l,R],s[3]]),a.push([[l,r],s[1],s[2],[l,R]])):a.push(s)}E.length&&(M=t-f<o&&u<n,V=Math.atan((t-f)/(i-r)),k=(I=(O=n)-(i-r))/(o-(t-f)),n=Bt((w=we(E[0][0],E[0][1],l,C=r+n,S=O/o,O,!0,Math.tan(V)*O))[0],2),N=n[0],P=n[1],M&&(o=Bt((D=we(E[0][3],E[0][2],l,C,k,I,!0,Math.tan(V)*I))[0],2),L=o[0],F=o[1]),E.forEach(function(t,e){var r,i;0===e?(r=w,M&&(i=D)):(r=we(t[0],t[1],l,C,S,O),M&&(i=we(t[3],t[2],l,C,k,I)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],N,P,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),M){for(var a=0,s=i.length;a<s;a++)Ue(i[a],L,F,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var M,O,S,C,I,k,w,D,L,F,N,P,B,H,Y,G,W,U,X,V,z,K,j,$,Z,q=x.length;return q&&(B=d-e<y&&u<m,n=Math.atan((d-e)/(i-r)),U=(W=(H=m)-(i-r))/(y-(d-e)),V=Bt((X=De(x[q-1][0],x[q-1][1],h,G=r+m,Y=H/y,H,!0,Math.tan(n)*H))[X.length-1],2),$=V[0],Z=V[1],B&&(o=Bt((z=De(x[q-1][3],x[q-1][2],h,G,U,W,!0,Math.tan(n)*W))[z.length-1],2),K=o[0],j=o[1]),x.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=z)):(r=De(t[0],t[1],h,G,Y,H),B&&(i=De(t[3],t[2],h,G,U,W)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],$,Z,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),B){for(var a=0,s=i.length;a<s;a++)Ue(i[a],K,j,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),E.concat(a).concat(x)}function we(t,u,e,r,i,n,o,a){var s,c,t=Bt(t,2),l=t[0],t=t[1],u=Bt(u,2),h=u[0],u=u[1],l=(-l+e)*i,h=Math.atan((-h+e)*i/(r-u)),u=e-Math.sin(h)*n/i,_=r-Math.cos(h)*n;if(a=o?(o=Math.atan(a*i/n),a=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(a/(1+a)),s=.5*Math.PI-o,c=e-Math.cos(o)*n/i,r-Math.sin(o)*n):(s=Math.atan(l/(r-t)),c=e-Math.sin(s)*n/i,r-Math.cos(s)*n),s===h)return[[c,a]];o=ie.h(Math.abs(s-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),t=Math.atan(o/n),o=s-t,n=h+t;return[[c,a],[e-Math.sin(o)*l/i,r-Math.cos(o)*l],[e-Math.sin(n)*l/i,r-Math.cos(n)*l],[u,_]]}function De(t,e,r,i,n,o,a,s){var l,u,t=Bt(t,2),c=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,c=Math.atan((c-r)*n/(i-t)),t=r+Math.sin(c)*o/n,_=i-Math.cos(c)*o;if(s=a?(a=Math.atan(s*n/o),s=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(s/(1+s)),l=.5*Math.PI-a,u=r+Math.cos(a)*o/n,i-Math.sin(a)*o):(l=Math.atan(h/(i-e)),u=r+Math.sin(l)*o/n,i-Math.cos(l)*o),c===l)return[[t,_]];a=ie.h(Math.abs(c-l))*o,h=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),e=Math.atan(a/o),a=c+e,o=l-e;return[[t,_],[r+Math.sin(a)*h/n,i-Math.cos(a)*h],[r+Math.sin(o)*h/n,i-Math.cos(o)*h],[u,s]]}function Le(u,c,_,f,d,t,e,p,r,i,g,v,n,m){var n=Bt(n,2),y=n[0],n=n[1],m=Bt(m,2),E=m[0],m=m[1];if(!(y&&n||E&&m))return v;for(var l=r+n-(r-p),h=i-m+(g-i),o=[],a=[],x=[],b=0,A=v.length;b<A;b++){var T,R,s=v[b];s[2][1]<l?o.push(s):s[1][1]>h?x.push(s):s[2][1]>h&&s[1][1]<l?(T=l<r?t+Math.tan(_)*(r-l):t,R=i<h?t+Math.tan(c)*(h-i):t,o.push([s[0],s[1],[e,l],[T,l]]),l<h&&(h<i&&r<l?a.push([[t,l],[e,l],[e,h],[t,h]]):r<l?(a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[t,i],[e,i],[e,h],[R,h]])):h<i?(a.push([[T,l],[e,l],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,h],[t,h]])):(a.push([[T,l],[e,l],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[t,i],[e,i],[e,h],[R,h]]))),x.push([[R,h],[e,h],s[2],s[3]])):s[2][1]>h?(T=i<h?t+Math.tan(c)*(h-i):t,a.push([s[0],s[1],[e,h],[T,h]]),x.push([[T,h],[e,h],s[2],s[3]])):s[1][1]<l?(R=l<r?t+Math.tan(_)*(r-l):t,o.push([s[0],s[1],[e,l],[R,l]]),a.push([[R,l],[e,l],s[2],s[3]])):a.push(s)}o.length&&(M=r-p<n&&u<y,z=Math.atan((e-t)/(r-p)),k=(I=(O=n)-(r-p))/(y-(e-t)),n=Bt((w=Fe(o[0][1],o[0][2],C=e-y,l,S=O/y,O,!0,Math.tan(z)*O))[w.length-1],2),N=n[0],P=n[1],M&&(p=Bt((D=Fe(o[0][0],o[0][3],C,l,k,I,!0,Math.tan(z)*I))[D.length-1],2),L=p[0],F=p[1]),o.forEach(function(t,e){var r,i;0===e?(r=w,M&&(i=D)):(r=Fe(t[1],t[2],C,l,S,O),M&&(i=Fe(t[0],t[3],C,l,k,I)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],N,P,2);if(M){for(var a=0,s=i.length;a<s;a++)Ue(i[a],L,F,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var M,O,S,C,I,k,w,D,L,F,N,P,B,H,Y,G,W,U,X,V,z,K,j,$,Z,q=x.length;return q&&(B=g-i<m&&u<E,y=Math.atan((e-t)/(g-i)),U=(W=(H=m)-(g-i))/(E-(e-t)),n=Bt((X=Ne(x[q-1][1],x[q-1][2],G=e-E,h,Y=H/E,H,!0,Math.tan(y)*H))[0],2),$=n[0],Z=n[1],B&&(z=Bt((V=Ne(x[q-1][0],x[q-1][3],G,h,U,W,!0,Math.tan(y)*W))[0],2),K=z[0],j=z[1]),x.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=V)):(r=Ne(t[1],t[2],G,h,Y,H),B&&(i=Ne(t[0],t[3],G,h,U,W)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],$,Z,3);if(B){for(var a=0,s=i.length;a<s;a++)Ue(i[a],K,j,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),o.concat(a).concat(x)}function Fe(t,u,e,r,i,n,o,a){var c,t=Bt(t,2),s=t[0],t=t[1],u=Bt(u,2),l=u[0],u=u[1],s=(s-e)*i,l=Math.atan((l-e)*i/(r-u)),u=e+Math.sin(l)*n/i,_=r-Math.cos(l)*n;if(a=o?(o=Math.atan(a*i/n),a=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(a/(1+a)),h=.5*Math.PI-o,c=e+Math.cos(o)*n/i,r-Math.sin(o)*n):(h=Math.atan(s/(r-t)),c=e+Math.sin(h)*n/i,r-Math.cos(h)*n),h===l)return[[c,a]];var o=ie.h(Math.abs(h-l))*n,s=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),t=Math.atan(o/n),o=h+t,n=e+Math.sin(o)*s/i,h=r-Math.cos(o)*s,o=l-t;return[[u,_],[e+Math.sin(o)*s/i,r-Math.cos(o)*s],[n,h],[c,a]]}function Ne(t,e,r,i,n,o,a,u){var s,c,t=Bt(t,2),l=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,l=Math.atan((l-r)*n/(t-i)),t=r+Math.sin(l)*o/n,_=i+Math.cos(l)*o;if(u=a?(a=Math.atan(u*n/o),u=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(u/(1+u)),s=.5*Math.PI-a,c=r+Math.cos(a)*o/n,i+Math.sin(a)*o):(s=Math.atan(h/(e-i)),c=r+Math.sin(s)*o/n,i+Math.cos(s)*o),l===s)return[[t,_]];a=ie.h(Math.abs(l-s))*o,h=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),e=Math.atan(a/o),a=l-e,o=r+Math.sin(a)*h/n,l=i+Math.cos(a)*h,a=s+e;return[[c,u],[r+Math.sin(a)*h/n,i+Math.cos(a)*h],[o,l],[t,_]]}function Pe(u,c,_,f,t,e,d,p,g,r,i,v,n,m){var n=Bt(n,2),o=n[0],n=n[1],m=Bt(m,2),y=m[0],m=m[1];if(!(o&&n||y&&m))return v;for(var l=t+o-(t-f),h=e-y+(d-e),E=[],a=[],x=[],b=0,A=v.length;b<A;b++){var T,R,s=v[b];s[2][0]<l?E.push(s):s[3][0]>h?x.push(s):s[2][0]>h&&s[3][0]<l?(T=l<t?i-Math.tan(c)*(l-f):g,R=e<h?i-Math.tan(_)*(d-h):r,E.push([s[0],[l,T],[l,i],s[3]]),l<h&&(t<l&&h<e?a.push([[l,r],[h,r],[h,i],[l,i]]):t<l?(a.push([[l,r],[e,r],[e,i],[l,i]]),a.push([[e,r],[h,R],[h,i],[e,i]])):h<e?(a.push([[l,T],[t,r],[t,i],[l,i]]),a.push([[t,r],[h,r],[h,i],[t,i]])):(a.push([[l,T],[t,r],[t,i],[l,i]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[e,r],[h,R],[h,i],[e,i]]))),x.push([[h,R],s[1],s[2],[h,i]])):s[2][0]>h?(T=e<h?i-Math.tan(_)*(d-h):r,a.push([s[0],[h,T],[h,i],s[3]]),x.push([[h,T],s[1],s[2],[h,i]])):s[3][0]<l?(R=l<t?i-Math.tan(c)*(l-f):r,E.push([s[0],[l,R],[l,i],s[3]]),a.push([[l,R],s[1],s[2],[l,i]])):a.push(s)}E.length&&(M=t-f<o&&u<n,V=Math.atan((t-f)/(i-r)),k=(I=(O=n)-(i-r))/(o-(t-f)),n=Bt((w=Be(E[0][3],E[0][2],l,C=i-n,S=O/o,O,!0,Math.tan(V)*O))[0],2),N=n[0],P=n[1],M&&(o=Bt((D=Be(E[0][0],E[0][1],l,C,k,I,!0,Math.tan(V)*I))[0],2),L=o[0],F=o[1]),E.forEach(function(t,e){var r,i;0===e?(r=w,M&&(i=D)):(r=Be(t[3],t[2],l,C,S,O),M&&(i=Be(t[0],t[1],l,C,k,I)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],N,P,4);if(M){for(var a=0,s=i.length;a<s;a++)Ue(i[a],L,F,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var M,O,S,C,I,k,w,D,L,F,N,P,B,H,Y,G,W,U,X,V,z,K,j,$,Z,q=x.length;return q&&(B=d-e<y&&u<m,n=Math.atan((d-e)/(i-r)),U=(W=(H=m)-(i-r))/(y-(d-e)),V=Bt((X=He(x[q-1][3],x[q-1][2],h,G=i-m,Y=H/y,H,!0,Math.tan(n)*H))[X.length-1],2),$=V[0],Z=V[1],B&&(o=Bt((z=He(x[q-1][0],x[q-1][1],h,G,U,W,!0,Math.tan(n)*W))[z.length-1],2),K=o[0],j=o[1]),x.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=z)):(r=He(t[3],t[2],h,G,Y,H),B&&(i=He(t[0],t[1],h,G,U,W)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],$,Z,5);if(B){for(var a=0,s=i.length;a<s;a++)Ue(i[a],K,j,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),E.concat(a).concat(x)}function Be(t,u,e,r,i,n,o,a){var s,c,t=Bt(t,2),l=t[0],t=t[1],u=Bt(u,2),h=u[0],u=u[1],l=(-l+e)*i,h=Math.atan((-h+e)*i/(u-r)),u=e-Math.sin(h)*n/i,_=r+Math.cos(h)*n;if(a=o?(o=Math.atan(a*i/n),a=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(a/(1+a)),s=.5*Math.PI-o,c=e-Math.cos(o)*n/i,r+Math.sin(o)*n):(s=Math.atan(l/(t-r)),c=e-Math.sin(s)*n/i,r+Math.cos(s)*n),s===h)return[[c,a]];o=ie.h(Math.abs(s-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),t=Math.atan(o/n),o=s-t,n=h+t;return[[c,a],[e-Math.sin(o)*l/i,r+Math.cos(o)*l],[e-Math.sin(n)*l/i,r+Math.cos(n)*l],[u,_]]}function He(t,e,r,i,n,o,a,s){var l,u,t=Bt(t,2),c=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,c=Math.atan((c-r)*n/(t-i)),t=r+Math.sin(c)*o/n,_=i+Math.cos(c)*o;if(s=a?(a=Math.atan(s*n/o),s=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(s/(1+s)),l=.5*Math.PI-a,u=r+Math.cos(a)*o/n,i+Math.sin(a)*o):(l=Math.atan(h/(e-i)),u=r+Math.sin(l)*o/n,i+Math.cos(l)*o),c===l)return[[t,_]];a=ie.h(Math.abs(c-l))*o,h=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),e=Math.atan(a/o),a=c+e,o=l-e;return[[t,_],[r+Math.sin(a)*h/n,i+Math.cos(a)*h],[r+Math.sin(o)*h/n,i+Math.cos(o)*h],[u,s]]}function Ye(u,c,_,t,e,f,d,p,r,i,g,v,n,m){var n=Bt(n,2),y=n[0],n=n[1],m=Bt(m,2),E=m[0],m=m[1];if(!(y&&n||E&&m))return v;for(var l=r+n-(r-p),h=i-m+(g-i),o=[],a=[],x=[],b=0,A=v.length;b<A;b++){var T,R,s=v[b];s[3][1]<l?o.push(s):s[0][1]>h?x.push(s):s[3][1]>h&&s[0][1]<l?(T=l<r?e-Math.tan(_)*(r-l):e,R=i<h?e-Math.tan(c)*(h-i):e,o.push([s[0],s[1],[T,l],[t,l]]),l<h&&(h<i&&r<l?a.push([[t,l],[e,l],[e,h],[t,h]]):r<l?(a.push([[t,l],[e,l],[e,i],[t,i]]),a.push([[t,i],[e,i],[R,h],[t,h]])):h<i?(a.push([[t,l],[T,l],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,h],[t,h]])):(a.push([[t,l],[T,l],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[t,i],[e,i],[R,h],[t,h]]))),x.push([[t,h],[R,h],s[2],s[3]])):s[3][1]>h?(T=i<h?e-Math.tan(c)*(h-i):e,a.push([s[0],s[1],[T,h],[t,h]]),x.push([[t,h],[T,h],s[2],s[3]])):s[1][1]<l?(R=l<r?e-Math.tan(_)*(r-l):e,o.push([s[0],s[1],[R,l],[t,l]]),a.push([[t,l],[R,l],s[2],s[3]])):a.push(s)}o.length&&(M=r-p<n&&u<y,z=Math.atan((e-t)/(r-p)),k=(I=(O=n)-(r-p))/(y-(e-t)),n=Bt((w=Ge(o[0][0],o[0][3],C=t+y,l,S=O/y,O,!0,Math.tan(z)*O))[w.length-1],2),N=n[0],P=n[1],M&&(p=Bt((D=Ge(o[0][1],o[0][2],C,l,k,I,!0,Math.tan(z)*I))[D.length-1],2),L=p[0],F=p[1]),o.forEach(function(t,e){var r,i;0===e?(r=w,M&&(i=D)):(r=Ge(t[0],t[3],C,l,S,O),M&&(i=Ge(t[1],t[2],C,l,k,I)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],N,P,6);if(M){for(var a=0,s=i.length;a<s;a++)Ue(i[a],L,F,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var M,O,S,C,I,k,w,D,L,F,N,P,B,H,Y,G,W,U,X,V,z,K,j,$,Z,q=x.length;return q&&(B=g-i<m&&u<E,y=Math.atan((e-t)/(g-i)),U=(W=(H=m)-(g-i))/(E-(e-t)),n=Bt((X=We(x[q-1][0],x[q-1][3],G=t+E,h,Y=H/E,H,!0,Math.tan(y)*H))[0],2),$=n[0],Z=n[1],B&&(z=Bt((V=We(x[q-1][1],x[q-1][2],G,h,U,W,!0,Math.tan(y)*W))[0],2),K=z[0],j=z[1]),x.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=V)):(r=We(t[0],t[3],G,h,Y,H),B&&(i=We(t[1],t[2],G,h,U,W)));for(var n=0,o=r.length;n<o;n++)Ue(r[n],$,Z,7);if(B){for(var a=0,s=i.length;a<s;a++)Ue(i[a],K,j,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),o.concat(a).concat(x)}function Ge(t,u,e,r,i,n,o,a){var c,t=Bt(t,2),s=t[0],t=t[1],u=Bt(u,2),l=u[0],u=u[1],s=(e-s)*i,l=Math.atan((e-l)*i/(r-u)),u=e-Math.sin(l)*n/i,_=r-Math.cos(l)*n;if(a=o?(o=Math.atan(a*i/n),a=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(a/(1+a)),h=.5*Math.PI-o,c=e-Math.cos(o)*n/i,r-Math.sin(o)*n):(h=Math.atan(s/(r-t)),c=e-Math.sin(h)*n/i,r-Math.cos(h)*n),h===l)return[[c,a]];var o=ie.h(Math.abs(h-l))*n,s=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),t=Math.atan(o/n),o=h+t,n=e-Math.sin(o)*s/i,h=r-Math.cos(o)*s,o=l-t;return[[u,_],[e-Math.sin(o)*s/i,r-Math.cos(o)*s],[n,h],[c,a]]}function We(t,e,r,i,n,o,a,u){var s,c,t=Bt(t,2),l=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(r-h)*n,l=Math.atan((r-l)*n/(t-i)),t=r-Math.sin(l)*o/n,_=i+Math.cos(l)*o;if(u=a?(a=Math.atan(u*n/o),u=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(u/(1+u)),s=.5*Math.PI-a,c=r-Math.cos(a)*o/n,i+Math.sin(a)*o):(s=Math.atan(h/(e-i)),c=r-Math.sin(s)*o/n,i+Math.cos(s)*o),l===s)return[[t,_]];a=ie.h(Math.abs(l-s))*o,h=Math.sqrt(Math.pow(o,2)+Math.pow(a,2)),e=Math.atan(a/o),a=l-e,o=r-Math.sin(a)*h/n,l=i+Math.cos(a)*h,a=s+e;return[[c,u],[r-Math.sin(a)*h/n,i+Math.cos(a)*h],[o,l],[t,_]]}function Ue(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Xe=[Te,Re,Oe,Me];var Ve={calPoints:function(u,c,_,f,t,d,e,r,i,n,o,a,p,g,v){var s=[];if("none"===c)return s;if(-1<["dashed","dotted"].indexOf(c)){var c=0===p||2===p?Ie(c,t,d,e,r,u):Ie(c,i,n,o,a,u),m=c.n,y=c.ps,E=c.pd;if(1<m){for(var x=0;x<m;x++){var b=x===m-1,l=void 0,A=void 0,T=void 0,h=(l=0===p||2===p?x?t+y*x+E*x:t:x?i+y*x+E*x:i)+y;0===p?h<=d?b?s.push([[t,i],[r,i],[e,n],[d,n]]):(A=i+(l-t)*Math.tan(_),T=i+(h-t)*Math.tan(_),s.push([[l,i],[h,i],[h,T],[l,A]])):e<=l?(A=i+(r-l)*Math.tan(f),T=i+(r-h)*Math.tan(f),b?s.push([[l,i],[r,i],[r,i],[l,A]]):s.push([[l,i],[h,i],[h,T],[l,A]])):l<d?(A=i+(l-t)*Math.tan(_),s.push([[l,i],[d,i],[d,n],[l,A]]),b?(s.push([[d,i],[e,i],[e,n],[d,n]]),s.push([[e,i],[r,i],[r,i],[d,n]])):e<h?(T=i+(r-h)*Math.tan(f),s.push([[d,i],[e,i],[e,n],[d,n]]),s.push([[e,i],[h,i],[h,T],[e,n]])):s.push([[d,i],[h,i],[h,n],[d,n]])):e<h?(A=i+(r-h)*Math.tan(f),l<d?(T=i+(l-t)*Math.tan(_),s.push([[l,i],[d,i],[d,n],[l,T]]),s.push([[d,i],[e,i],[e,n],[d,n]])):s.push([[l,i],[e,i],[e,n],[l,n]]),b?s.push([[e,i],[r,i],[r,i],[e,n]]):s.push([[e,i],[h,i],[h,A],[e,n]])):b?s.push([[l,i],[r,i],[e,n],[l,n]]):s.push([[l,i],[h,i],[h,n],[l,n]]):1===p?h<=n?b?s.push([[e,n],[r,i],[r,a],[e,o]]):(A=r-(l-i)*Math.tan(_),T=r-(h-i)*Math.tan(_),s.push([[A,l],[r,l],[r,h],[T,h]])):o<=l?(A=e+(l-o)*Math.tan(f),T=e+(h-o)*Math.tan(f),b?s.push([[A,l],[r,l],[r,a],[r,a]]):s.push([[A,l],[r,l],[r,h],[T,h]])):l<n?(A=e+(n-l)*Math.tan(_),s.push([[A,l],[r,l],[r,n],[e,n]]),b?(s.push([[e,n],[r,n],[r,o],[e,o]]),s.push([[e,o],[r,o],[r,a],[r,a]])):o<h?(T=e+(h-o)*Math.tan(f),s.push([[e,n],[r,n],[r,o],[e,o]]),s.push([[e,o],[r,o],[r,h],[T,h]])):s.push([[e,n],[r,n],[r,h],[e,h]])):o<h?(A=e+(h-o)*Math.tan(f),l<n?(T=e+(n-l)*Math.tan(_),s.push([[T,l],[r,l],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,o],[e,o]]),b?s.push([[e,o],[r,o],[r,r],[r,r]]):s.push([[e,o],[r,o],[r,h],[A,h]])):(s.push([[e,l],[r,l],[r,o],[e,o]]),b?s.push([[e,o],[r,o],[r,a],[r,a]]):s.push([[e,o],[r,o],[r,h],[A,h]]))):b?s.push([[e,l],[r,l],[r,a],[e,o]]):s.push([[e,l],[r,l],[r,h],[e,h]]):2===p?h<=d?b?s.push([[t,a],[d,o],[e,o],[r,a]]):(A=a-(l-t)*Math.tan(_),T=a-(h-t)*Math.tan(_),s.push([[l,A],[h,T],[h,a],[l,a]])):e<=l?(A=a-(r-l)*Math.tan(f),T=a-(r-h)*Math.tan(f),b?s.push([[l,A],[r,a],[r,a],[l,a]]):s.push([[l,A],[h,T],[h,a],[l,a]])):l<d?(A=a-(l-t)*Math.tan(_),s.push([[l,A],[d,o],[d,a],[l,a]]),b?(s.push([[d,o],[e,o],[e,a],[d,a]]),s.push([[e,o],[r,a],[r,a],[e,a]])):e<h?(T=a-(h-e)*Math.tan(f),s.push([[d,o],[e,o],[e,a],[d,a]]),s.push([[e,o],[h,T],[h,a],[e,a]])):s.push([[d,o],[h,o],[h,a],[d,a]])):e<h?(A=a-(r-h)*Math.tan(f),l<d?(T=a-(l-e)*Math.tan(_),s.push([[l,T],[d,o],[d,a],[l,a]]),s.push([[d,o],[e,o],[e,a],[d,a]])):s.push([[l,o],[e,o],[e,a],[l,a]]),b?s.push([[e,o],[r,a],[r,a],[e,a]]):s.push([[e,o],[h,A],[h,a],[e,a]])):b?s.push([[l,o],[e,o],[r,a],[l,a]]):s.push([[l,o],[h,o],[h,a],[l,a]]):3===p&&(h<=n?b?s.push([[t,i],[d,n],[d,o],[t,a]]):(A=t+(l-i)*Math.tan(_),T=t+(h-i)*Math.tan(_),s.push([[t,l],[A,l],[T,h],[t,h]])):o<=l?(A=t+(a-l)*Math.tan(f),T=t+(a-h)*Math.tan(f),b?s.push([[t,l],[A,l],[t,a],[t,a]]):s.push([[t,l],[A,l],[T,h],[t,h]])):l<n?(A=t+(l-i)*Math.tan(_),s.push([[t,l],[A,l],[d,n],[t,n]]),b?(s.push([[t,n],[d,n],[d,o],[t,o]]),s.push([[t,o],[d,o],[t,a],[t,a]])):o<h?(T=t+(a-h)*Math.tan(f),s.push([[t,n],[d,n],[d,o],[t,o]]),s.push([[t,o],[d,o],[T,h],[t,h]])):s.push([[t,n],[d,n],[d,h],[t,h]])):o<h?(A=t+(a-h)*Math.tan(f),l<n?(T=t+(l-i)*Math.tan(_),s.push([[t,l],[T,l],[d,n],[t,i]]),s.push([[t,n],[d,n],[d,o],[t,o]])):s.push([[t,l],[d,l],[d,o],[t,o]]),b?s.push([[t,o],[d,o],[t,a],[t,a]]):s.push([[t,o],[d,o],[A,h],[t,h]])):b?s.push([[t,l],[d,l],[d,o],[t,a]]):s.push([[t,l],[d,l],[d,h],[t,h]]))}if(0===p)return ke(u,_,f,t,d,e,r,i,n,0,0,s,g,v);if(1===p)return Le(u,_,f,0,0,e,r,i,n,o,a,s,g,v);if(2===p)return Pe(u,_,f,t,d,e,r,0,n,o,a,s,g,v);if(3===p)return Ye(u,_,f,t,d,0,0,i,n,o,a,s,g,v)}}return 0===p?(t<d&&s.push([[t,i],[d,i],[d,n],[t,i]]),s.push([[d,i],[e,i],[e,n],[d,n]]),e<r&&s.push([[e,i],[r,i],[r,i],[e,n]]),ke(u,_,f,t,d,e,r,i,n,0,0,s,g,v)):1===p?(i<n&&s.push([[r,i],[r,i],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,o],[e,o]]),o<a&&s.push([[e,o],[r,o],[r,a],[r,a]]),Le(u,_,f,0,0,e,r,i,n,o,a,s,g,v)):2===p?(t<d&&s.push([[t,a],[d,o],[d,a],[t,a]]),s.push([[d,o],[e,o],[e,a],[d,a]]),e<r&&s.push([[e,o],[r,a],[r,a],[e,a]]),Pe(u,_,f,t,d,e,r,0,n,o,a,s,g,v)):3===p?(i<n&&s.push([[t,i],[t,i],[d,n],[t,n]]),s.push([[t,n],[d,n],[d,o],[t,o]]),o<a&&s.push([[t,o],[d,o],[t,a],[t,a]]),Ye(u,_,f,t,d,0,0,i,n,o,a,s,g,v)):void 0},calRadius:function(t,e,r,i,n,o,a,s){var l,h=(n=Bt(n,2))[0],n=n[1],u=(o=Bt(o,2))[0],o=o[1],c=(a=Bt(a,2))[0],a=a[1],_=(s=Bt(s,2))[0],s=s[1],h=Math.max(h,0),n=Math.max(n,0),u=Math.max(u,0),o=Math.max(o,0),c=Math.max(c,0),a=Math.max(a,0),_=Math.max(_,0),s=Math.max(s,0);if(l=0<h&&0<n||0<u&&0<o||0<c&&0<a||0<_&&0<s?!0:l)return l=[],0<h&&0<n?(l.push([t,e+n]),l.push([t,e+n*(1-le),t+h*(1-le),e,t+h,e])):l.push([t,e]),0<u&&0<o?(l.push([t+r-u,e]),l.push([t+r-u*(1-le),e,t+r,e+o*(1-le),t+r,e+o])):l.push([t+r,e]),0<c&&0<a?(l.push([t+r,e+i-a]),l.push([t+r,e+i-a*(1-le),t+r-c*(1-le),e+i,t+r-c,e+i])):l.push([t+r,e+i]),0<_&&0<s?(l.push([t+_,e+i]),l.push([t+_*(1-le),e+i,t,e+i-s*(1-le),t,e+i-s])):l.push([t,e+i]),l},calBorderRadius:function(o,a,e,s,r){var i=!0;Xe.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===he?Math.max(0,t[0]):t[1]===ue?Math.max(0,t[0]*(e?a:o)*.01):t[1]===ce?Math.max(0,t[0]*r.computedStyle[Se]):t[1]===_e?Math.max(0,t[0]*r.width*.01):t[1]===fe?Math.max(0,t[0]*r.height*.01):t[1]===de?Math.max(0,t[0]*Math.max(r.width,r.height)*.01):t[1]===pe?Math.max(0,t[0]*Math.min(r.width,r.height)*.01):0):0})}),i||Xe.forEach(function(t,e){var r,i=e%2==0?0:1,n=i?a:o,t=s[t],e=s[Xe[(e+1)%4]];t[i]+e[i]>n&&(t[i]>=(r=.5*n)&&e[i]>=r?t[i]=e[i]=r:t[i]>r?t[i]=n-e[i]:e[i]>r&&(e[i]=n-t[i]))})},calBorderRadiusInline:function(t,e,r){t.length&&(i=t[0],(n=t[t.length-1]).isEllipsis&&(n=t[t.length-2]));var i,n,o=i?i.outerWidth:0,a=i?i.outerHeight:0;o+=r[me]+r[xe],a+=r[ye]+r[Ee]+r[Ae]+r[be],[Te,Me].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===he?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:o)*.01);t=Math.min(e?a:o,t);return t})}),o=n?n.outerWidth:0,a=n?n.outerHeight:0,[Re,Oe].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===he?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:o)*.01);t=Math.min(e?a:o,t);return t})})},renderBorder:function(t,e,r,i,n,o,a){var s;e===et.CANVAS||e===et.WEBGL?(r.beginPath(),r.fillStyle!==n&&(r.fillStyle=n),i.forEach(function(t){ge(r,t,o,a)}),r.fill(),r.closePath()):e===et.SVG&&(s="",i.forEach(function(t){s+=ve(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",n]]}))}},ze=Tt.rgba2int,Ke=Tt.isNil,je=r.PX,$e=r.PERCENT,Ze=r.DEG,qe=r.NUMBER,Je=r.REM,Qe=r.VW,tr=r.VH,er=r.VMAX,rr=r.VMIN,ir=r.calUnit,nr=ie.d2r,or=se.canvasPolygon,ar=A.STYLE_KEY.FONT_SIZE;function sr(t){var e;return/^[-+]?[\d.]/.test(t)?(e=ir(t),-1<[qe,Ze].indexOf(e[1])&&(e[1]=je),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,$e]}function lr(u,t,e){for(var c,r=[],_=u[0][0],f=0,d=u.length;f<d;f++){var i,n=u[f];1<n.length?(i=n[1])[1]===$e?r.push([n[0],.01*i[0]]):i[1]===Je?r.push([n[0],i[0]*e.computedStyle[ar]/t]):i[1]===Qe?r.push([n[0],i[0]*e.width/t]):i[1]===tr?r.push([n[0],i[0]*e.height/t]):i[1]===er?r.push([n[0],i[0]*Math.max(e.width,e.height)/t]):i[1]===rr?r.push([n[0],i[0]*Math.min(e.width,e.height)/t]):r.push([n[0],i[0]/t]):r.push([n[0]])}1===r.length&&r.push(Tt.clone(r[0])),1===r[0].length&&r[0].push(0),1<r.length&&(1===r[c=r.length-1].length&&r[c].push(1));for(var p=r[0][1],o=1,g=r.length;o<g-1;o++){var v=r[o];if(1<v.length)p=v[1];else{for(var m=o+1,y=r[r.length-1][1];m<g-1;m++){var E=r[m];if(1<E.length){y=E[1];break}}for(var x=(y-p)/(m-o+1),b=o;b<m;b++)r[b].push(p+x*(b+1-o));o=m}}for(var A=1,T=r.length;A<T;A++){var R=r[A],M=r[A-1];R[1]<M[1]&&(R[1]=M[1])}for(var O=0,S=r.length;O<S;O++){var a=r[O];if(1<a[1]){r.splice(O);var C,I,k,w,s=r[O-1];s&&s[1]<1&&(C=a[0][0]-s[0][0],I=a[0][1]-s[0][1],k=a[0][2]-s[0][2],w=a[0][3]-s[0][3],s=(1-s[1])/(a[1]-s[1]),r.push([[a[0][0]+C*s,a[0][1]+I*s,a[0][2]+k*s,a[0][3]+w*s],1]));break}}for(var D=r.length-1;0<=D;D--){var l=r[D];if(l[1]<0){r.splice(0,D+1);var L,F,N,P,h=r[D];h&&0<h[1]&&(L=h[0][0]-l[0][0],F=h[0][1]-l[0][1],N=h[0][2]-l[0][2],P=h[0][3]-l[0][3],h=-l[1]/(h[1]-l[1]),r.unshift([[l[0][0]+L*h,l[0][1]+F*h,l[0][2]+N*h,l[0][3]+P*h],0]));break}}return r.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),r.length||r.push([_,0]),r}function hr(t,e,r,i,n,o){var a=t[0],t=t[1],i=a[1]===$e?e+a[0]*i*.01:a[1]===Je?e+a[0]*o.computedStyle[ar]:a[1]===Qe?e+a[0]*o.width*.01:a[1]===tr?e+a[0]*o.height*.01:a[1]===er?e+a[0]*Math.max(o.width,o.height)*.01:a[1]===rr?e+a[0]*Math.min(o.width,o.height)*.01:e+a[0],e=t[1]===$e?r+t[0]*n*.01:t[1]===Je?r+t[0]*o.computedStyle[ar]:t[1]===Qe?r+t[0]*o.width*.01:t[1]===tr?r+t[0]*o.height*.01:t[1]===tr?r+t[0]*Math.max(o.width,o.height)*.01:t[1]===tr?r+t[0]*Math.min(o.width,o.height)*.01:r+t[0];return[i,e]}var ur={parseGradient:function(t){var e,r,i,n,o,a;if(t=Lt.gradient.exec(t))return"linear"===(e={k:t[1]}).k?(o=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(t[2]))?e.d=(o=o[0].toLowerCase(),a=180,"to top"===o?a=0:"to top right"===o?a=45:"to right"===o?a=90:"to bottom right"===o?a=135:"to bottom"===o||("to bottom left"===o?a=225:"to left"===o?a=270:"to top left"===o?a=315:(o=/([-+]?[\d.]+)deg/.exec(o))&&(a=parseFloat(o[1]))),a%360):(o=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(t[2]),e.d=o?[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])]:180):"radial"===e.k?(e.s=-1<t[2].indexOf("circle")?"circle":"ellipse",(a=/(closest|farthest)-(side|corner)/i.exec(t[2]))?e.z=a[0].toLowerCase():(o=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(t[2]))?(e.z=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])],r=!Ke(o[5]),n=!Ke(o[6]),i=!Ke(o[7]),r&&n&&i?(e.z.push(parseFloat(o[5])),e.z.push(parseFloat(o[6])),e.z.push(parseFloat(o[7]))):r&&n?(e.z.push(parseFloat(o[5])),e.z.push(parseFloat(o[6])),e.z.push(1)):r?(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(parseFloat(o[5]))):(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(1))):e.z="farthest-corner",(i=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(n=sr(i[1]),r=i[2]?sr(i[2]):n,e.p=[n,r]):e.p=[[50,$e],[50,$e]]):"conic"===e.k&&(i=/([-+]?[\d.]+deg)/i.exec(t[2]),e.d=i?parseFloat(i[0])%360:0,(n=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(r=sr(n[1]),i=n[2]?sr(n[2]):r,e.p=[r,i]):e.p=[[50,$e],[50,$e]]),n=t[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[],e.v=n.map(function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),e=[ze(e[0])],t=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);return t&&(t=ir(t[0]),-1<[qe,Ze].indexOf(t[1])&&(t[1]=je),e[1]=t),e}),e},getLinear:function(u,t,e,r,i,n,o,c,_){if(e+=a=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,r+=l=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,i+=a,n+=l,Array.isArray(t))var f=e+t[0]*o,d=r+t[1]*c,p=e+t[2]*o,g=r+t[3]*c,v=lr(u,Math.sqrt(Math.pow(p-f,2)+Math.pow(g-d,2)));else{for(;360<=t;)t-=360;for(;t<0;)t+=360;var a=Math.max(o,c),i=(l=a,i=i,n=n,h=270<=(h=t)?(s=nr(360-h),m=i+Math.sin(s)*l,y=n+Math.cos(s)*l,E=i-Math.sin(s)*l,n-Math.cos(s)*l):180<=h?(s=nr(h-180),m=i+Math.sin(s)*l,y=n-Math.cos(s)*l,E=i-Math.sin(s)*l,n+Math.cos(s)*l):90<=h?(s=nr(180-h),m=i-Math.sin(s)*l,y=n-Math.cos(s)*l,E=i+Math.sin(s)*l,n+Math.cos(s)*l):(s=nr(h),m=i-Math.sin(s)*l,y=n+Math.cos(s)*l,E=i+Math.sin(s)*l,n-Math.cos(s)*l),[m,y,E,h]),n=(a*=2,Ft.dotProduct(e-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/a),s=Ft.dotProduct(e+o-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/a,l=Ft.dotProduct(e+o-i[0],r+c-i[1],i[2]-i[0],i[3]-i[1])/a,m=Ft.dotProduct(e-i[0],r+c-i[1],i[2]-i[0],i[3]-i[1])/a,y=n,E=Math.min(n,Math.min(s,Math.min(l,m))),y=Math.max(y,Math.max(s,Math.max(l,m))),h=E/a,o=i[2]-i[0],e=i[3]-i[1];f=i[0]+o*h,d=i[1]+e*h,p=i[2]-o*h,g=i[3]-e*h,v=lr(u,y-E,_)}return{x1:f,y1:d,x2:p,y2:g,stop:v}},getRadial:function(u,c,t,_,e,r,i,f,d){c=c,t=t,_=_,a=i-e,s=f-r,e=e+=y=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,r=r+=E=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,y=i+=y,i=f+=E,E=d,f=0,Array.isArray(t)?(l=e+t[0]*a,h=r+t[1]*s,p=e+t[4]*a,g=r+t[5]*s,t[6]<=0?v=Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(n=(o=Math.sqrt(Math.pow((t[2]-t[0])*a,2)+Math.pow((t[3]-t[1])*s,2)))*t[6],v=Math.max(o,n),o!==n&&(f=t[2]>=t[0]?t[3]>=t[1]?Math.asin((t[3]-t[1])*s/o):-Math.asin((t[1]-t[3])*s/o):t[3]>=t[1]?nr(180)-Math.asin((t[3]-t[1])*s/o):Math.asin((t[1]-t[3])*s/o)-nr(180)))):(p=l=(_=Bt(hr(_,e,r,a,s,E),2))[0],g=h=_[1],E=1,"closest-corner"===t&&"circle"===c?v=l<=e||y<=l||h<=r||i<=h?Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(o=l<e+.5*a?l-e:y-l,n=h<r+.5*s?h-r:i-h,Math.sqrt(Math.pow(o,2)+Math.pow(n,2))):"closest-side"===t||"closest-corner"===t?l<=e||y<=l||h<=r||i<=h?v=Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(_=1,o=l<e+.5*a?l-e:y-l,n=h<r+.5*s?h-r:i-h,v=Math.min(o,n),o*=_="closest-corner"===t?Math.sqrt(2):_,n*=_,v*=_):(o=l<=e?e-l+a:y<=l?l-y+a:l<e+.5*a?y-l:l-e,n=h<=r?r-h+s:i<=h?h-i+s:h<r+.5*s?i-h:h-r,v=Math.max(o,n),o*=E="farthest-side"!==t?Math.sqrt(2):E,n*=E,v*=E));var p,g,n,v,o,m,_=[l,h,v,o="circle"===c?n=v:o,n,p,g,f],a=Bt(_,8),y=a[0],e=a[1],s=a[2],i=a[3],r=a[4],t=a[5],E=a[6],l=a[7],h=1,c=1;return i===r&&!l||(m=[1,0,0,1,0,0],l&&(v=Math.sin(l),m=[o=Math.cos(l),v,0,0,-v,o,0,0,0,0,1,0,0,0,0,1]),i!==s&&(m=Ht.multiply(m,[h=i/s,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),r!==s&&(m=Ht.multiply(m,[1,0,0,0,0,c=r/s,0,0,0,0,1,0,0,0,0,1]))),{cx:y,cy:e,tx:t,ty:E,r:s,stop:lr(u,s,d),scx:h,scy:c,matrix:m,d:l}},getConic:function(t,e,r,i,n,o,a,s,l){var e=function(t,e,r,i,n,o,a){var s=n-r,l=o-i,e=Bt(hr(e,r,i,s,l,a),2),a=e[0],e=e[1];s=r+.5*s<=a?a-r:n-a;r=i+.5*l<=e?e-i:o-e;return n=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),[a,e,n,t]}(e,r,i,n,o,a,l),e=(r=Bt(e,4))[0],h=r[1],u=r[2];return{cx:e,cy:h,w:o-i,h:a-n,r:(u<<1)*s,deg:r[3],stop:lr(t,1,l)}},renderConic:function(u,t,e,r,i,n,o,a,s,l,h,c,_){s=(s=Ve.calRadius(i,n,o,a,s,l,h,c))||[[i,n],[i+o,n],[i+o,n+a],[i,n+a],[i,n]],t!==et.CANVAS&&t!==et.WEBGL||(h=(l=Rt.getCacheCanvas(o,a,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,o,a),ne.getConicGradientImage(r.cx-i,r.cy-n,r.w,r.h,r.stop,h.data),l.ctx.putImageData(h,0,0),e.save(),e.beginPath(),or(e,s),e.clip(),e.closePath(),e.drawImage(l.canvas,i,n),e.restore(),l.ctx.clearRect(0,0,o,a))}},cr=Tt.isNil;function _r(t,e,r,i){cr(t.flexGrow)&&(t.flexGrow=e||0),cr(t.flexShrink)&&(t.flexShrink=r||0),cr(t.flexBasis)&&(t.flexBasis=i||0)}var fr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(i,t){var u,c,_,f,d,p,e,r,n,g,v,o,a,s,m=this,l=i[t];if("background"===t)Array.isArray(l)?(a=l.length,!cr(i.backgroundColor)||(o=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(l[a-1]))&&(i.backgroundColor=o[0],l=l.slice(0,a-1)),u=[],c=[],_=[],l.forEach(function(t){var e;cr(i.backgroundImage)&&((e=Lt.gradient.exec(t))?(u.push(e[0]),t=t.replace(e[0],"")):(e=Lt.img.exec(l))&&(u.push(e[0]),t=t.replace(e[0],""))),!cr(i.backgroundRepeat)||(e=/(no-?)?repeat(-?[xy])?/i.exec(t))&&c.push(e[0].toLowerCase()),!cr(i.backgroundPosition)||(e=t.match(Lt.position))&&_.push(e.join(" "))}),u.length&&(i.backgroundImage=u),c.length&&(i.backgroundRepeat=c),_.length&&(i.backgroundPosition=_,this.toFull(i,"backgroundPosition"))):(cr(i.backgroundImage)&&((o=Lt.gradient.exec(l))?(i.backgroundImage=o[0],l=l.replace(o[0],"")):(a=Lt.img.exec(l))&&(i.backgroundImage=a[0],l=l.replace(a[0],""))),!cr(i.backgroundRepeat)||(o=/(no-?)?repeat(-?[xy])?/i.exec(l))&&(i.backgroundRepeat=o[0].toLowerCase()),!cr(i.backgroundColor)||(a=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(l))&&(i.backgroundColor=a[0],l=l.replace(a[0],"")),!cr(i.backgroundPosition)||(o=l.match(Lt.position))&&(i.backgroundPosition=o.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===l?_r(i,0,0,"auto"):"auto"===l?_r(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(l)||/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(l)?(a=l.split(/\s+/),_r(i,parseFloat(a[0]),parseFloat(a[1]),a[2])):/^[\d.]+\s+[\d.]+$/.test(l)?(o=l.split(/\s+/),_r(i,parseFloat(o[0]),parseFloat(o[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(l)?(a=l.split(/\s+/),_r(i,parseFloat(a[0]),1,a[1])):/^[\d.]+$/.test(l)?_r(i,parseFloat(l),1,0):/^[\d.]+[pxremvwhina%]+/i.test(l)?_r(i,1,1,l):_r(i,0,1,"auto");else if("flexFlow"===t)(l=l.toString().split(/\s+/)).length&&(cr(i.flexDirection),i.flexDirection=l[0],1<l.length&&(i.flexWrap=l[1]));else if("borderRadius"===t){1===(l=l.toString().split("/")).length&&(l[1]=l[0]);for(var y=0;y<2;y++){var h=l[y].toString().split(/\s+/);0===h.length?l[y]=[0,0,0,0]:1===h.length?l[y]=[h[0],h[0],h[0],h[0]]:2===h.length?l[y]=[h[0],h[1],h[0],h[1]]:3===h.length?l[y]=[h[0],h[1],h[2],h[1]]:l[y]=h.slice(0,4)}this[t].forEach(function(t,e){cr(i[t])&&(i[t]=l[0][e]+" "+l[1][e])})}else"backgroundPosition"===t?(Array.isArray(l)||(l=[l]),f=this[t].map(function(t){return cr(i[t])}),l.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),m[t].forEach(function(t,e){f[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(d=l.toString().split(/\s*,\s*/)).length&&(d[1]=d[0]),this[t].forEach(function(t,e){cr(i[t])&&(i[t]=d[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(p=l.toString().split(/\s*,\s*/)).length?p[2]=p[1]=p[0]:2===p.length&&(p[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){cr(i[t])&&(i[t]=p[e])})):"margin"===t||"padding"===t?(v=i,a=this[o=t],o=v[o],cr(o)||(s=o.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi))&&(1===s.length?s[3]=s[2]=s[1]=s[0]:2===s.length?(s[2]=s[0],s[3]=s[1]):3===s.length&&(s[3]=s[1]),a.forEach(function(t,e){cr(v[t])&&(v[t]=s[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(g=(e=i)[r=t],cr(g)||(cr(e[r+"Width"])&&(n=/\b[\d.]+[pxremvwhina%]*\b/i.exec(g),e[r+"Width"]=n?n[0]:0),cr(e[r+"Style"])&&(n=/\b(solid|dashed|dotted)\b/i.exec(g),e[r+"Style"]=n?n[1]:"solid"),cr(e[r+"Color"])&&((n=/#[0-9a-f]{3,8}/i.exec(g))&&-1<[4,7,9].indexOf(n[0].length)?e[r+"Color"]=n[0]:/\btransparent\b/i.test(g)?e[r+"Color"]="transparent":(n=/rgba?\s*\(.+\)/i.exec(g),e[r+"Color"]=n?n[0]:"transparent")))):"textStroke"===t?((g=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(l))&&(i.textStrokeWidth=g[1]),(e=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(l))&&(i.textStrokeColor=e[0]),/\bfill\b/i.test(l)?i.textStrokeOver="fill":i.textStrokeOver="none"):this[t]&&this[t].forEach(function(t){cr(i[t])&&(i[t]=l)});return i}},i=A.STYLE_KEY,T=[[i.BACKGROUND_COLOR],[i.BORDER_BOTTOM_COLOR],[i.BORDER_LEFT_COLOR],[i.BORDER_RIGHT_COLOR],[i.BORDER_TOP_COLOR],[i.COLOR],[i.TEXT_STROKE_COLOR]],t=[[i.FONT_SIZE],[i.BORDER_BOTTOM_WIDTH],[i.BORDER_LEFT_WIDTH],[i.BORDER_RIGHT_WIDTH],[i.BORDER_TOP_WIDTH],[i.LEFT],[i.TOP],[i.RIGHT],[i.BOTTOM],[i.FLEX_BASIS],[i.WIDTH],[i.HEIGHT],[i.LINE_HEIGHT],[i.MARGIN_BOTTOM],[i.MARGIN_LEFT],[i.MARGIN_TOP],[i.MARGIN_RIGHT],[i.PADDING_TOP],[i.PADDING_RIGHT],[i.PADDING_BOTTOM],[i.PADDING_LEFT],[i.STROKE_WIDTH],[i.STROKE_MITERLIMIT],[i.LETTER_SPACING],[i.PERSPECTIVE],[i.TEXT_STROKE_WIDTH]],e=[[i.BACKGROUND_IMAGE],[i.FILL],[i.STROKE]],dr=[[i.BORDER_TOP_LEFT_RADIUS],[i.BORDER_TOP_RIGHT_RADIUS],[i.BORDER_BOTTOM_RIGHT_RADIUS],[i.BORDER_BOTTOM_LEFT_RADIUS]],pr={},gr=(T.forEach(function(t){pr[t]=!0}),{}),vr=(t.forEach(function(t){gr[t]=!0}),{}),mr=(dr.forEach(function(t){vr[t]=!0}),{}),i=(e.forEach(function(t){mr[t]=!0}),[[i.TRANSLATE_X],[i.TRANSLATE_Y],[i.TRANSLATE_Z],[i.SKEW_X],[i.SKEW_Y],[i.SCALE_X],[i.SCALE_Y],[i.SCALE_Z],[i.ROTATE_X],[i.ROTATE_Y],[i.ROTATE_Z]]),yr={},T=(i.forEach(function(t){yr[t]=!0}),{KEY_COLOR:T,KEY_EXPAND:i,KEY_GRADIENT:e,KEY_LENGTH:t,KEY_RADIUS:dr,COLOR_HASH:pr,EXPAND_HASH:yr,GRADIENT_HASH:mr,LENGTH_HASH:gr,RADIUS_HASH:vr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}}),Er=Dt.DOM,xr=Dt.GEOM,i=A.STYLE_KEY,br={},Ar=[],Tr=o({},i.POINTER_EVENTS,!0),Rr=(o(e={},i.TRANSFORM,!0),o(e,i.TRANSLATE_X,!0),o(e,i.TRANSLATE_Y,!0),o(e,i.SKEW_X,!0),o(e,i.SKEW_Y,!0),o(e,i.SCALE_X,!0),o(e,i.SCALE_Y,!0),o(e,i.ROTATE_Z,!0),o(e,i.COLOR,!0),o(e,i.FONT_STYLE,!0),o(e,i.STROKE_WIDTH,!0),o(e,i.FILL,!0),o(e,i.STROKE_DASHARRAY,!0),o(e,i.STROKE_LINECAP,!0),o(e,i.STROKE_LINEJOIN,!0),o(e,i.STROKE_MITERLIMIT,!0),o(e,i.BACKGROUND_COLOR,!0),o(e,i.BACKGROUND_IMAGE,!0),o(e,i.BACKGROUND_POSITION_X,!0),o(e,i.BACKGROUND_POSITION_Y,!0),o(e,i.BACKGROUND_REPEAT,!0),o(e,i.BACKGROUND_SIZE,!0),o(e,i.STROKE,!0),o(e,i.BORDER_BOTTOM_COLOR,!0),o(e,i.BORDER_LEFT_COLOR,!0),o(e,i.BORDER_RIGHT_COLOR,!0),o(e,i.BORDER_TOP_COLOR,!0),o(e,i.BORDER_TOP_LEFT_RADIUS,!0),o(e,i.BORDER_TOP_RIGHT_RADIUS,!0),o(e,i.BORDER_BOTTOM_RIGHT_RADIUS,!0),o(e,i.BORDER_BOTTOM_LEFT_RADIUS,!0),o(e,i.VISIBILITY,!0),o(e,i.OPACITY,!0),o(e,i.Z_INDEX,!0),o(e,i.FILTER,!0),o(e,i.BOX_SHADOW,!0),o(e,i.OVERFLOW,!0),o(e,i.BACKGROUND_CLIP,!0),o(e,i.TEXT_STROKE_WIDTH,!0),o(e,i.TEXT_STROKE_COLOR,!0),o(e,i.TEXT_STROKE_OVER,!0),e),Mr={GEOM:br,GEOM_KEY_SET:Ar,IGNORE:Tr,REPAINT:Rr,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Mr.addGeom(e,t,r)}):t&&(br.hasOwnProperty(t)||Ar.push(t),(br[t]=br[t]||{})[e]=r||!0)},isIgnore:function(t){return Tr.hasOwnProperty(t)},isGeom:function(t,e){return t&&e&&br.hasOwnProperty(e)&&br[e].hasOwnProperty(t)},isRepaint:function(t,e){return Rr.hasOwnProperty(t)||Mr.isGeom(e,t)},isValid:function(t,e){return!!e&&(!!Er.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!xr.hasOwnProperty(e))||(br.hasOwnProperty(e)?br[e].hasOwnProperty(t):"translatePath"===e)))}};function Or(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function Sr(t){return 3*Math.floor(.5*t)}Mr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Mr.addGeom("$circle",["r"]),Mr.addGeom("$ellipse",["rx","ry"]),Mr.addGeom("$rect",["rx","ry"]),Mr.addGeom("$sector",["begin","end","edge","closure"]),Mr.addGeom("$polyline",["points","controls","start","end"]),Mr.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var Cr={kernelSize:Or,outerSize:function(t){return Sr(Or(t))},outerSizeByD:Sr,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),n=0,o=i;0<=o;o--){var a=Math.pow(Math.E,-Math.pow(o,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(a),n+=a}for(var s=1;s<=i;s++){var l=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(l),n+=l}if(1!==n)for(var h=0;h<e;h++)r[h]/=n;return r}},Ir=A.STYLE_KEY,kr=A.style2Upper,t=A.STYLE_KEY,wr=t.POSITION,Dr=t.WIDTH,Lr=t.HEIGHT,Fr=t.TRANSLATE_X,Nr=t.TRANSLATE_Y,Pr=t.TRANSLATE_Z,Br=t.SCALE_X,Hr=t.SCALE_Y,Yr=t.SCALE_Z,dr=t.SKEW_X,i=t.SKEW_Y,e=t.ROTATE_X,Gr=t.ROTATE_Y,Wr=t.ROTATE_Z,Ur=t.ROTATE_3D,Xr=t.PERSPECTIVE,Vr=t.PERSPECTIVE_ORIGIN,zr=t.TRANSFORM,Kr=t.TRANSFORM_ORIGIN,jr=t.BACKGROUND_IMAGE,$r=t.BACKGROUND_COLOR,Zr=t.BACKGROUND_POSITION_X,qr=t.BACKGROUND_POSITION_Y,Jr=t.BACKGROUND_SIZE,Qr=t.OPACITY,ti=t.Z_INDEX,ei=t.COLOR,ri=t.FONT_SIZE,ii=t.FONT_FAMILY,ni=t.FONT_WEIGHT,oi=t.FONT_STYLE,ai=t.LINE_HEIGHT,si=t.TEXT_ALIGN,li=t.FILTER,hi=t.VISIBILITY,ui=t.BOX_SHADOW,ci=t.POINTER_EVENTS,_i=t.FILL,fi=t.STROKE,di=t.STROKE_WIDTH,pi=t.STROKE_DASHARRAY,gi=t.DISPLAY,vi=t.FLEX_DIRECTION,mi=t.FLEX_GROW,yi=t.FLEX_SHRINK,Ei=t.FLEX_BASIS,xi=t.JUSTIFY_CONTENT,bi=t.ALIGN_SELF,Ai=t.ALIGN_ITEMS,Ti=t.MATRIX,Ri=t.LETTER_SPACING,n=t.BACKGROUND_CLIP,Mi=t.WHITE_SPACE,Oi=t.TEXT_OVERFLOW,Si=t.LINE_CLAMP,Ci=t.ORDER,Ii=t.FLEX_WRAP,ki=t.TRANSLATE_PATH,wi=t.TEXT_STROKE_COLOR,Di=t.TEXT_STROKE_WIDTH,Li=t.TEXT_STROKE_OVER,Fi=t.WRITING_MODE,Ni=r.AUTO,Pi=r.PX,Bi=r.PERCENT,Hi=r.NUMBER,Yi=r.INHERIT,Gi=r.DEG,Wi=r.RGBA,Ui=r.STRING,Xi=r.REM,Vi=r.VW,zi=r.VH,Ki=r.VMAX,ji=r.VMIN,$i=r.GRADIENT,Zi=r.calUnit,qi=Tt.isNil,Ji=Tt.rgba2int,Qi=Tt.equalArr,tn=Tt.replaceRgba2Hex,en=Mr.isGeom,rn=Mr.GEOM,nn=Mr.GEOM_KEY_SET,on=Dt.VALID_STRING_VALUE,an=T.COLOR_HASH,sn=T.LENGTH_HASH,ln=T.RADIUS_HASH,hn=T.GRADIENT_HASH,un=T.EXPAND_HASH,cn=T.GRADIENT_TYPE,_n={translateX:Fr,translateY:Nr,translateZ:Pr,scaleX:Br,scaleY:Hr,scaleZ:Yr,skewX:dr,skewY:i,rotateX:e,rotateY:Gr,rotateZ:Wr,rotate:Wr};function fn(t,e){t===Br||t===Hr||t===Yr?e[1]=Hi:t===Fr||t===Nr||t===Pr?e[1]===Hi&&(e[1]=Pi):t===Xr?-1<[Hi,Bi,Gi].indexOf(e[1])&&(e[1]=Pi):e[1]===Hi&&(e[1]=Gi)}function dn(t){return-1<(t=(t=qi(t)?"":t).toString()).indexOf("-")?t.toString().toLowerCase().replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()}):t}function pn(t){for(var e=t.split(/\s*,\s*/),r=Rt.defaultFontFamily,i=0,n=e.length;i<n;i++){var o=e[i].replace(/^['"]/,"").replace(/['"]$/,"");if(yt.hasRegister(o)){if(!yt.hasChecked(o)){var a=Rt.checkSupportFontFamily(o);if(yt.setChecked(o,a)){r=o;break}}if(yt.support(o)){r=o;break}}}return r}function gn(t){var e=t[ri],r=pn(t[ii]),i=vn(t,r);return.5*(t[ai]-i)+e*(yt.info[r]||yt.info[Rt.defaultFontFamily]||yt.info.arial).blr}function vn(t,e){return e=e||pn(t[ii]),t[ri]*(yt.info[e]||yt.info[Rt.defaultFontFamily]||yt.info.arial).lhr}function mn(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Ni){if(r!==Dr)break;e=e.domParent}else{if(i[1]===Pi)return t*i[0];if(i[1]===Bi)t*=.01*i[0],e=e.domParent;else{if(i[1]===Xi)return t*i[0]*e.root.computedStyle[ri];if(i[1]===Vi)return t*i[0]*e.root.width*.01;if(i[1]===zi)return t*i[0]*e.root.height*.01;if(i[1]===Ki)return t*i[0]*Math.max(e.root.width,e.root.height)*.01;if(i[1]===ji)return t*i[0]*Math.min(e.root.width,e.root.height)*.01}}}return t}o(t={},wr,!0),o(t,gi,!0),o(t,Ir.BACKGROUND_REPEAT,!0),o(t,vi,!0),o(t,mi,!0),o(t,yi,!0),o(t,Ii,!0),o(t,xi,!0),o(t,Ai,!0),o(t,bi,!0),o(t,Ir.OVERFLOW,!0),o(t,Ir.MIX_BLEND_MODE,!0),o(t,Ir.STROKE_LINECAP,!0),o(t,Ir.STROKE_LINEJOIN,!0),o(t,Ir.STROKE_MITERLIMIT,!0),o(t,Ir.FILL_RULE,!0),o(t,Qr,!0),o(t,ti,!0),o(t,n,!0),o(t,Oi,!0),o(t,Si,!0);var yn=t,En=(o(dr={},$r,!0),o(dr,Ir.BORDER_TOP_COLOR,!0),o(dr,Ir.BORDER_RIGHT_COLOR,!0),o(dr,Ir.BORDER_BOTTOM_COLOR,!0),o(dr,Ir.BORDER_LEFT_COLOR,!0),dr),xn=(o(i={},Ir.BORDER_TOP_LEFT_RADIUS,!0),o(i,Ir.BORDER_TOP_RIGHT_RADIUS,!0),o(i,Ir.BORDER_BOTTOM_RIGHT_RADIUS,!0),o(i,Ir.BORDER_BOTTOM_LEFT_RADIUS,!0),o(i,Kr,!0),o(i,Vr,!0),i);var bn={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!Tt.isObject(a))return{};var l,s,e,r,h,i,u={},c=(a=Tt.extend({},a)).border;return c&&fr.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){fr.toFull(a,t)}),(c=a.borderWidth)&&fr.toFull(a,"borderWidth"),(c=a.borderColor)&&fr.toFull(a,"borderColor"),(c=a.borderStyle)&&fr.toFull(a,"borderStyle"),(c=a.borderRadius)&&fr.toFull(a,"borderRadius"),(c=a.background)&&fr.toFull(a,"background"),c=a.backgroundPosition,qi(c)||fr.toFull(a,"backgroundPosition"),(c=a.flex)&&fr.toFull(a,"flex"),(c=a.flexFlow)&&fr.toFull(a,"flexFlow"),c=a.margin,qi(c)||fr.toFull(a,"margin"),c=a.padding,qi(c)||fr.toFull(a,"padding"),(c=a.textStroke)&&fr.toFull(a,"textStroke"),(c=a.rotate3d)&&fr.toFull(a,"rotate3d"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){c=a[t],qi(c)||fr.toFull(a,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){void 0!==a[t]&&a.transform&&Rt.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;qi(a[e])&&(a[e]=t)}),void 0!==(c=a.backgroundImage)&&(c?Array.isArray(c)?u[jr]=c.map(function(t){return t?Lt.gradient.test(t)?[ur.parseGradient(t),$i]:Lt.img.test(t)?[Lt.img.exec(t)[2],Ui]:null:null}):Lt.gradient.test(c)?u[jr]=[[ur.parseGradient(c),$i]]:Lt.img.test(c)?u[jr]=[[Lt.img.exec(c)[2],Ui]]:u[jr]=[null]:u[jr]=[null]),void 0!==(c=a.backgroundColor)&&(c=c||"transparent",(t=/^#[0-9a-f]{3,8}/i.exec(c))&&-1<[4,7,9].indexOf(t[0].length)?u[$r]=[Ji(t[0]),Wi]:(t=/rgba?\s*\(.+\)/i.exec(c),u[$r]=[Ji(t?t[0]:[0,0,0,0]),Wi])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){void 0!==(c=a[t])&&(c=c||0,t=e?qr:Zr,Array.isArray(c)||(c=[c]),u[t]=c.map(function(t){var e;return/^[-+]?[\d.]/.test(t)?(e=Zi(t),-1<[Hi,Gi].indexOf(e[1])&&(e[1]=Pi),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Bi]}))}),void 0!==(c=a.backgroundSize)&&(Array.isArray(c)||(c=[c]),u[Jr]=c.map(function(t){if(!t)return[[0,Ni],[0,Ni]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0].toLowerCase()||"cover"===e[0].toLowerCase()?e[1]=e[0].toLowerCase():e[1]="auto");for(var r=[],i=0;i<2;i++){var n,o=e[i].toLowerCase();/^[-+]?[\d.]/.test(o)?(n=Zi(o),-1<[Hi,Gi].indexOf(n[1])&&(n[1]=Pi),r.push(n)):"contain"===o||"cover"===o?r.push([o,Ui]):r.push([0,Ni])}return r}return[[0,Ni],[0,Ni]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];void 0!==e&&(u[Ir[kr(t)]]=[Ji(e||"transparent"),Wi])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){if(void 0!==(e=a[t="border"+t+"Radius"])){var e,r=(e=e||0).toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n=r[i];/^[-+]?[\d.]/.test(n)?(n=Zi(n),-1<[Hi,Gi].indexOf(n[1])&&(n[1]=Pi),n[0]<0&&(n[0]=0),r[i]=n):r[i]=[0,Pi]}u[Ir[kr(t)]]=r}}),null===(c=a.transform)?u[zr]=null:void 0!==c&&(l=u[zr]=[],(t=(c||"").toString().match(/\w+\(.+?\)/g))&&t.forEach(function(t){var e,r,i,n,o,a=t.indexOf("("),s=t.slice(0,a),a=t.slice(a+1,t.length-1);"matrix"===s?6===(t=6<(t=(t=a.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,6):t).length&&l.push([Ti,[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]]):"matrix3d"===s?16===(t=16<(t=(t=a.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,16):t).length&&l.push([Ti,t]):"perspective"===s?((t=Zi(a))[0]<0&&(t[0]=0),fn(Xr,t),l.push([Xr,t])):"rotate3d"===s?4===(t=a.toString().split(/\s*,\s*/)).length&&(o=Zi(t[3]),fn(Ur,o),t[0]=parseFloat(t[0].replace("(","")),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=o,l.push([Ur,t])):_n.hasOwnProperty(s)?(fn(o=_n[s],t=Zi(a)),l.push([o,t])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(s)?{translate3d:!0,scale3d:!0}.hasOwnProperty(s)&&(1===(o=a.toString().split(/\s*,\s*/)).length?(o[1]="scale3d"===s?[1]:[0],o[2]="scale3d"===s?[1]:[0]):2===o.length&&(o[2]="scale3d"===s?[1]:[0]),3===o.length&&(t=Ir[kr(s+"X")],e=Ir[kr(s+"Y")],r=Ir[kr(s+"Z")],i=Zi(o[0]),n=Zi(o[1]),o=Zi(o[2]),fn(t,i),fn(e,n),fn(r,o),l.push([t,i]),l.push([e,n]),l.push([r,o]))):(1===(t=a.toString().split(/\s*,\s*/)).length&&(t[1]="scale"===s?t[0]:[0]),2===t.length&&(i=Ir[kr(s+"X")],e=Ir[kr(s+"Y")],n=Zi(t[0]),r=Zi(t[1]),fn(i,n),fn(e,r),l.push([i,n]),l.push([e,r])))})),void 0!==(c=a.perspective)&&((t=Zi(c||0))[0]<0&&(t[0]=0),fn(Xr,t),u[Xr]=t),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(void 0!==(c=a[t])){null===c&&(c="");var e=u[Ir[kr(t)]]=[],r=c.toString().match(Lt.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n,o=r[i];/^[-+]?[\d.]/.test(o)?(n=Zi(o),-1<[Hi,Gi].indexOf(n[1])&&(n[1]=Pi),e.push(n)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[o],Bi]),qi(e[i][0])&&(e[i][0]=50))}}else e.push([50,Bi]),e.push([50,Bi])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=a[t];void 0!==e&&(null===e&&(e=0===t.indexOf("scale")?1:0),fn(t=_n[t],e=Zi(e)),u[t]=e)}),void 0!==(c=a.rotate3d)&&(4===(t=(c||"").toString().split(/\s*,\s*/)).length&&(e=Zi(t[3]),fn(Ur,e),t[0]=parseFloat(t[0].replace("(","")),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=e),u[Ur]=t),void 0!==(c=a.opacity)&&(null===c&&(c=1),c=parseFloat(c),isNaN(c)?u[Qr]=1:(c=Math.max(c,0),c=Math.min(c,1),u[Qr]=c)),void 0!==(c=a.zIndex)&&(u[ti]=parseInt(c)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=a[t];void 0!==r&&("auto"===r?r=[0,Ni]:(r=Zi(r||0),-1<[Hi,Gi].indexOf(r[1])&&(r[1]=Pi)),e=Ir[kr(t)],u[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),void 0!==(c=a.flexBasis)&&(/content/i.test(c)?u[Ei]=[c,Ui]:/^[\d.]/.test(c)?((e=u[Ei]=Zi(c))[0]=Math.max(e[0],0),-1<[Hi,Gi].indexOf(e[1])&&(e[1]=Pi)):u[Ei]=[0,Ni]),void 0!==(c=a.order)&&(u[Ci]=parseInt(c)||0),void 0!==(c=a.color)&&(/inherit/i.test(c)?u[ei]=[[],Yi]:Lt.gradient.test(c)?u[ei]=[ur.parseGradient(c),$i]:u[ei]=[Ji(c),Wi]),void 0!==(c=a.textStrokeColor)&&(/inherit/i.test(c)?u[wi]=[[],Yi]:Lt.gradient.test(c)?u[wi]=[ur.parseGradient(c),$i]:u[wi]=[Ji(c),Wi]),void 0!==(c=a.fontSize)&&(/inherit/i.test(c)||(r=Zi(c))<0?u[ri]=[0,Yi]:(-1<[Hi,Gi].indexOf(r[1])&&(r[1]=Pi),u[ri]=r)),void 0!==(c=a.textStrokeWidth)&&(/inherit/i.test(c)||(i=Zi(c))<0?u[Di]=[0,Yi]:(-1<[Hi,Gi,Bi].indexOf(i[1])&&(i[1]=Pi),u[Di]=i)),void 0!==(c=a.textStrokeOver)&&(null===c||/inherit/i.test(c)?u[Li]=[0,Yi]:(t=Dt.INHERIT.textStrokeOver,/fill/i.test(c)&&(t="fill"),u[Li]=[t,Ui])),void 0!==(c=a.fontWeight)&&(/bold/i.test(c)?u[ni]=[700,Hi]:/normal/i.test(c)?u[ni]=[400,Hi]:/lighter/i.test(c)?u[ni]=[200,Hi]:/inherit/i.test(c)?u[ni]=[0,Yi]:u[ni]=[Math.max(0,parseInt(c))||400,Hi]),void 0!==(c=a.fontStyle)&&(null===c||/inherit/i.test(c)?u[oi]=[0,Yi]:(e=Dt.INHERIT.fontStyle,/italic/i.test(c)?e="italic":/oblique/i.test(c)&&(e="oblique"),u[oi]=[e,Ui])),void 0!==(c=a.fontFamily)&&(null===c||/inherit/i.test(c)?u[ii]=[0,Yi]:u[ii]=[c.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),Ui]),void 0!==(c=a.writingMode)&&(null===c||/inherit/i.test(c)?u[Fi]=[0,Yi]:(r=Dt.INHERIT.writingMode,/vertical-?rl/i.test(c)?r="verticalRl":/vertical-?lr/i.test(c)&&(r="verticalLr"),u[Fi]=[r,Ui])),void 0!==(c=a.textAlign)&&(null===c||/inherit/i.test(c)?u[si]=[0,Yi]:(i="left",/center/i.test(c)?i="center":/right/i.test(c)&&(i="right"),u[si]=[i,Ui])),void 0!==(c=a.lineHeight)&&(/inherit/i.test(c)?u[ai]=[0,Yi]:/normal/i.test(c)?u[ai]=[0,Ni]:/^[\d.]+/i.test(c)?(t=Zi(c),-1<[Gi].indexOf(t[1])&&(t[1]=Hi),u[ai]=t):(e=Math.max(0,parseFloat(c))||"normal",u[ai]="normal"===e?[null,Ni]:[e,Hi])),void 0!==(c=a.letterSpacing)&&(null===c||/inherit/i.test(c)?u[Ri]=[0,Yi]:/normal/i.test(c)?u[Ri]=[0,Pi]:/^[-+]?[\d.]/.test(c)?(r=Zi(c),-1<[Hi,Gi].indexOf(r[1])&&(r[1]=Pi),u[Ri]=r):u[Ri]=[parseFloat(c)||0,Pi]),void 0!==(c=a.whiteSpace)&&(null===c||/inherit/i.test(c)?u[Mi]=[0,Yi]:u[Mi]=[c,Ui]),void 0!==(c=a.lineClamp)&&(c=parseInt(c)||0,u[Si]=Math.max(0,c)),void 0!==(c=a.fill)&&(c?Array.isArray(c)?c.length?u[_i]=c.map(function(t){return t?Lt.gradient.test(t)?[ur.parseGradient(t),$i]:[Ji(t),Wi]:["none",Ui]}):u[_i]=[["none",Ui]]:Lt.gradient.test(c)?u[_i]=[[ur.parseGradient(c),$i]]:u[_i]=[[Ji(c),Wi]]:u[_i]=[["none",Ui]]),void 0!==(c=a.stroke)&&(c?Array.isArray(c)?c.length?u[fi]=c.map(function(t){return t?Lt.gradient.test(t)?[ur.parseGradient(t),$i]:[Ji(t),Wi]:["none",Ui]}):u[fi]=[["none",Ui]]:Lt.gradient.test(c)?u[fi]=[[ur.parseGradient(c),$i]]:u[fi]=[[Ji(c),Wi]]:u[fi]=[["none",Ui]]),void 0!==(c=a.strokeWidth)&&(Array.isArray(c)||(c=[c]),u[di]=c.map(function(t){t=Zi(t);return-1<[Hi,Gi].indexOf(t[1])&&(t[1]=Pi),t[0]=Math.max(t[0],0),t})),void 0!==(c=a.strokeDasharray)&&(Array.isArray(c)?u[pi]=c.map(function(t){t=(t||"").toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(i=(c||"").toString().match(/[\d.]+/g))?((i=i.map(function(t){return parseFloat(t)})).length%2==1&&i.push(i[i.length-1]),u[pi]=[i]):u[pi]=[[]]),void 0!==(c=a.filter)&&(s=null,(t=(tn(c)||"").match(/[\w-]+\s*\(.+?\)/gi))&&t.forEach(function(t){var e=/([\w-]+)\s*\((\s*.+\s*)\)/i.exec(t);if(e){var r=e[1].toLowerCase(),e=e[2];if("drop-shadow"===r||"dropshadow"===r){var i=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?/i.exec(t);if(i){s=s||[];for(var n=[],o=1;o<=4;o++){var a=i[o];a?(a=Zi(a),-1<[Hi,Gi].indexOf(a[1])&&(a[1]=Pi),2<o&&a[0]<0&&(a=0),n.push(a)):n.push([0,1])}t=/#[a-f\d]{3,8}/i.exec(t);t?n.push(Ji(t[0])):n.push([0,0,0,1]),s.push(["dropShadow",n])}}else{t=/([-+]?[\d.]+\s*[pxremvwhdg%]*)/i.exec(e);t&&(s=s||[],e=Zi(t[0]),"blur"===r?-1<[Gi,Bi].indexOf(e[1])||(e[1]===Hi&&(e[1]=Pi),e[0]=Math.max(e[0],0),s.push([r,e])):"hue-rotate"===r||"huerotate"===r?-1!==[Hi,Gi].indexOf(e[1])&&(e[1]=Gi,s.push(["hueRotate",e])):"saturate"!==r&&"brightness"!==r&&"grayscale"!==r&&"contrast"!==r&&"sepia"!==r&&"invert"!==r||-1!==[Hi,Bi].indexOf(e[1])&&(e[0]=Math.max(e[0],0),e[1]=Bi,s.push([r,e])))}}}),u[li]=s),void 0!==(c=a.visibility)&&(null===c||/inherit/i.test(c)?u[hi]=[0,Yi]:(e=Dt.INHERIT.visibility,/hidden/i.test(c)&&(e="hidden"),u[hi]=[e,Ui])),void 0!==(c=a.pointerEvents)&&(null===c||/inherit/i.test(c)?u[ci]=[0,Yi]:(r=Dt.INHERIT.pointerEvents,/none/i.test(c)&&(r="none"),u[ci]=[r,Ui])),void 0!==(c=a.boxShadow)&&(h=null,(i=(tn(c)||"").split(","))&&i.forEach(function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?/i.exec(t);if(e){h=h||[];for(var r=[],i=1;i<=4;i++){var n=e[i];n?(n=Zi(n),-1<[Hi,Gi].indexOf(n[1])&&(n[1]=Pi),2<i&&n[0]<0&&(n=0),r.push(n)):r.push([0,1])}var o=/#[a-f\d]{3,8}/i.exec(t);o?r.push(Ji(o[0])):r.push([0,0,0,1]),r.push(/inset/i.test(t)?"inset":"outset"),h.push(r)}}),u[ui]=h),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){var e;a.hasOwnProperty(t)&&(u[Ir[kr(t)]]=(e=dn(e=a[t=t]),t=on[t],-1<(e=t.indexOf(e))?t[e]:t[0]))}),["flexGrow","flexShrink"].forEach(function(t){a.hasOwnProperty(t)&&(u[Ir[kr(t)]]=Math.max(parseFloat(a[t])||0,0))}),void 0!==(c=a.zIndex)&&(u[ti]=parseFloat(c)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var r;a.hasOwnProperty(t)&&(r=a[t],Array.isArray(r)||(r=[r]),"backgroundRepeat"===t&&r.forEach(function(t,e){t&&(r[e]=dn(t))}),u[Ir[kr(t)]]=r)}),nn.forEach(function(t){a.hasOwnProperty(t)&&(u[t]=a[t])}),u},setFontStyle:function(t){var e=t[ri]||0,r=t[ii]||Rt.defaultFontFamily||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t[oi]||"normal")+" "+(t[ni]||"400")+" "+e+"px/"+e+"px "+r},getFontFamily:pn,getBaseline:gn,getVerticalBaseline:function(t){return t[ai]-gn(t)},calRelative:function(t,e,r,i,n){return r[1]===Ni?r=0:-1<[Pi,Hi].indexOf(r[1])?r=r[0]:r[1]===Bi?r=mn(r[0],i,n?Dr:Lr):r[1]===Xi?r=r[0]*i.root.computedStyle[ri]:r[1]===Vi?r=r[0]*i.root.width*.01:r[1]===zi?r=r[0]*i.root.height*.01:r[1]===Ki?r=r[0]*Math.max(i.root.width,i.root.height)*.01:r[1]===ji&&(r=r[0]*Math.min(i.root.width,i.root.height)*.01),r},equalStyle:function(t,e,r,u){if(!e||!r)return e===r;if(t===zr){if(e.length!==r.length)return!1;for(var i=0,c=e.length;i<c;i++){var _=e[i],f=r[i];if(_[0]!==f[0])return!1;if(!Qi(_[1],f[1]))return!1}return!0}if(t===li){if(e.length!==r.length)return!1;for(var n=0,d=e.length;n<d;n++)if(!Qi(e[n],r[n]))return!1}if(t===Jr){if(e.length!==r.length)return!1;for(var o=0,p=e.length;o<p;o++){var a=e[o],s=r[o];if(a[0][0]!==s[0][0]||a[0][1]!==s[0][1]||a[1][0]!==s[1][0]||a[1][1]!==s[1][1])return!1}return!0}if(t===Kr||ln.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Zr||t===qr||sn.hasOwnProperty(t)||un.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===ui)return Qi(e,r);if(t===ei||t===wi){if(e[1]!==r[1])return!1;if(e[1]===Wi)return Qi(e[0],r[0])}if(an.hasOwnProperty(t))return e[1]===r[1]&&Qi(e[0],r[0]);if(hn.hasOwnProperty(t)&&e.k===r.k&&cn.hasOwnProperty(e.k)){var g=e.v,v=r.v;if(e.d!==r.d||g.length!==v.length)return!1;for(var l=0,m=g.length;l<m;l++){var h=g[l],y=v[l];if(h.length!==y.length)return!1;for(var E=0;E<4;E++)if(h[0][E]!==y[0][E])return!1;if(1<h.length&&(h[1][0]!==y[1][0]||h[1][1]!==y[1][1]))return!1}return!0}return en(u.tagName,t)&&(u.isMulti||Array.isArray(e)&&Array.isArray(r))?Qi(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[wr])||"absolute"===t},cloneStyle:function(u,c){for(var t={},_=0,f=(c=c||Object.keys(u).map(function(t){return t=rn.hasOwnProperty(t)?t:parseInt(t)})).length;_<f;_++){var e=c[_],r=u[e];if(e===jr)t[e]=r.map(function(t){return t[1]===$i?[Tt.clone(t[0]),t[1]]:t});else if(e===_i||e===fi)t[e]=r.map(function(t){return t[1]===$i?[Tt.clone(t[0]),t[1]]:t[1]===Wi?[t[0].slice(0),t[1]]:t});else if(e===zr){if(r){for(var i=r.slice(0),n=0,d=i.length;n<d;n++)i[n]=i[n].slice(0),i[n][1]=i[n][1].slice(0);t[e]=i}}else if(e===li){if(r){for(var o=r.slice(0),a=0,p=o.length;a<p;a++){o[a]=o[a].slice(0);var g=o[a][0];o[a][1]=o[a][1].slice(0),"dropShadow"===g&&function(){var r=o[a][1];r.forEach(function(t,e){r[e]=r[e].slice(0)})}()}t[e]=o}}else if(e===ui)r&&(r=r.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),t[e]=r);else if(e===ki)r&&(t[e]=r.map(function(t){return t.slice(0)}));else if(e===ei||e===wi)r&&(r[1]===$i?t[e]=[Tt.clone(r[0]),r[1]]:r[1]===Wi?t[e]=[r[0].slice(0),r[1]]:t[e]=r.slice(0));else if(yn.hasOwnProperty(e))t[e]=r;else if(rn.hasOwnProperty(e))t[e]=Tt.clone(r);else if(r){var s=t[e]=r.slice(0);if(e===Zr||e===qr)for(var l=0,v=s.length;l<v;l++)s[l]=s[l].slice(0);else if(e===Jr)for(var h=0,m=s.length;h<m;h++)s[h]=s[h].slice(0),s[h][0]=s[h][0].slice(0),s[h][1]=s[h][1].slice(0);else if(En.hasOwnProperty(e))s[0]=s[0].slice(0);else if(xn.hasOwnProperty(e))s[0]=s[0].slice(0),s[1]=s[1].slice(0);else if(e===zr)for(var y=0,E=s.length;y<E;y++)s[y]=s[y].slice(0);else e===Ur&&(s[3]=s[3].slice(0))}}return t},calNormalLineHeight:vn,spreadBoxShadow:function(t,e){var a,s,l,h,r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3];return Array.isArray(e)&&(h=l=s=a=0,e.forEach(function(t){var t=Bt(t,6),e=t[0],r=t[1],i=t[2],n=t[3],o=t[4];"inset"!==t[5]&&0<o[3]&&(t=Cr.outerSize(i),t+=n,a=Math.min(a,e-t),s=Math.min(s,e-t),l=Math.max(l,e+t),h=Math.max(h,r+t))}),r+=a,i+=s,n+=l,t+=h),[r,i,n,t]},spreadFilter:function(t,e){var i=(t=Bt(t,4))[0],n=t[1],o=t[2],a=t[3];return Array.isArray(e)&&e.forEach(function(t){var e,t=Bt(t,2),r=t[0],t=t[1];"blur"===r&&0<t?(e=Cr.kernelSize(t),(e=Cr.outerSizeByD(e))&&(i-=e,n-=e,o+=e,a+=e)):"dropShadow"===r&&(e=Cr.kernelSize(t[2]),r=Cr.outerSizeByD(e),(t[0]||t[1]||r)&&((t[0]<=0||0<t[0]&&t[0]<r)&&(i+=t[0]-r),(t[1]<=0||0<t[1]&&t[1]<r)&&(n+=t[1]-r),(t[0]<0&&-t[0]<r||0<=t[0])&&(o+=t[0]+r),(t[1]<0&&-t[1]<r||0<=t[1])&&(a+=t[1]+r)))}),[i,n,o,a]}};function An(t,e,r,i){r-=t,t=i-e,i=Math.atan(Math.abs(t)/Math.abs(r));return r<0&&0<=t?Math.PI-i:r<0&&t<0?i-Math.PI:0<=r&&0<=t?i:-i}function Tn(t){var e=Math.sin(t),t=Math.cos(t),r=Ht.identity();return r[0]=r[5]=t,r[1]=e,r[4]=-e,r}function Rn(t,e){var t=Bt(t,6),r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],t=t[5],e=Bt(e,6),s=e[0],l=e[1],h=e[2],u=e[3],c=e[4],n=(n-r)*(t-i)-(a-r)*(o-i),t=(h-s)*(e[5]-l)-(c-s)*(u-l);return 0<n&&t<0||n<0&&0<t}e={exchangeOrder:function(t,e){i=(t=Bt(t=t,6))[0],n=t[1],o=t[2],a=t[3],s=t[4],t=t[5],l=[0,1,2],o<i&&o<s?(i=(r=[o,a,i,n])[0],n=r[1],o=r[2],a=r[3],l[0]=1,l[1]=0):s<o&&s<i&&(i=(r=[s,t,i,n])[0],n=r[1],s=r[2],t=r[3],l[0]=2,l[2]=0),i===o?a<n&&(i=(r=[o,a,i,n])[0],n=r[1],o=r[2],a=r[3],r=l[0],l[0]=l[1],l[1]=r):i===s&&t<n&&(i=(r=[s,t,i,n])[0],n=r[1],s=r[2],t=r[3],r=l[0],l[0]=l[2],l[2]=r),(o-i)*(t-n)-(s-i)*(a-n)<0&&(o=(r=[s,t,o,a])[0],a=r[1],s=r[2],t=r[3],r=l[1],l[1]=l[2],l[2]=r);var r=[i,n,o,a,s,t,l],i=Bt(r,7),n=i[0],o=i[1],a=i[2],s=i[3],t=i[4],l=i[5],e=Bt(function(t,e){for(var r=[],i=0,n=e.length;i<n;i++){var o=e[i];r.push(t[2*o]),r.push(t[2*o+1])}return r}(e,i[6]),6);return[[n,o,a,s,t,l],[e[0],e[1],e[2],e[3],e[4],e[5]]]},isOverflow:Rn,transform:function(u,t){var e,r=(n=Bt(u,6))[0],c=n[1],i=n[2],_=n[3],f=n[4],n=n[5],d=(o=Bt(t,6))[0],p=o[1],g=o[2],v=o[3],m=o[4],o=o[5],u=Rn(u,t);(t=Ht.identity())[12]=-r,t[13]=-c;0!==(s=An(r,c,i,_))&&(e=Tn(-s),t=Ht.multiply(e,t));var y=ie.pointsDistance(r,c,i,_),a=ie.pointsDistance(d,p,g,v),E=((h=Ht.identity())[12]=-d,h[13]=-p,s=An(d,p,g,v)),s=(0!==s&&(e=Tn(-s),h=Ht.multiply(e,h)),Math.abs(Ht.calPoint([f,n],t)[1])),l=Math.abs(Ht.calPoint([m,o],h)[1]),h=(y===a&&s===l||(e=Ht.identity(),y!==a&&(e[0]=a/y),s!==l&&(e[5]=l/s),t=Ht.multiply(e,t)),t),y=(a=Bt(Ht.calPoint([r,c],h),2))[0],l=a[1],r=(s=Bt(Ht.calPoint([i,_],h),2))[0],c=s[1],i=(a=Bt(Ht.calPoint([f,n],h),2))[0],_=a[1],s=ie.pointsDistance(y,l,r,c),f=ie.pointsDistance(y,l,i,_),n=ie.pointsDistance(i,_,r,c),h=ie.pointsDistance(d,p,g,v),a=ie.pointsDistance(d,p,m,o),y=ie.pointsDistance(m,o,g,v),l=ie.angleBySide(n,s,f),i=ie.angleBySide(y,h,a);return l!==i&&((e=Ht.identity())[4]=Math.tan(l-.5*Math.PI)+Math.tan(.5*Math.PI-i),t=Ht.multiply(e,t)),u&&(t[1]=-t[1],t[5]=-t[5],t[13]=-t[13]),(e=0!==E?Tn(E):Ht.identity())[12]=d,e[13]=p,Ht.multiply(e,t)}};function Mn(t,e){return e<t?1:t<e?-1:0}function On(t,e){void 0===e&&(e=!1),this._compare=t=void 0===t?Mn:t,this._root=null,this._size=0,this._noDuplicates=!!e}Gr={size:{configurable:!0}};On.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},On.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},On.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},On.prototype.splay=function(t){for(var e,r,i,n;t.parent;)(r=(e=t.parent).parent)&&r.parent?((i=r.parent).left===r?i.left=t:i.right=t,t.parent=i):(t.parent=null,this._root=t),i=t.left,n=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(i?(r.right=i).parent=r:r.right=null,(t.left=r).parent=t)),n?(e.left=n).parent=e:e.left=null,(t.right=e).parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(n?(r.left=n).parent=r:r.left=null,(t.right=r).parent=t)),i?(e.right=i).parent=e:e.right=null,(t.left=e).parent=t)},On.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},On.prototype.minNode=function(t){if(t=void 0===t?this._root:t)for(;t.left;)t=t.left;return t},On.prototype.maxNode=function(t){if(t=void 0===t?this._root:t)for(;t.right;)t=t.right;return t},On.prototype.insert=function(t,e){var r=this._root,i=null,n=this._compare;if(this._noDuplicates)for(;r;){if(0===n((i=r).key,t))return;r=n(r.key,t)<0?r.right:r.left}else for(;r;)r=n((i=r).key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:i},i?n(i.key,r.key)<0?i.right=r:i.left=r:this._root=r,this.splay(r),this._size++,r},On.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var i=r(e.key,t);if(i<0)e=e.right;else{if(!(0<i))return e;e=e.left}}return null},On.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var i=r(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},On.prototype.remove=function(t){var e,t=this.find(t);return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0)},On.prototype.removeNode=function(t){return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0);var e},On.prototype.erase=function(t){var e,r,t=this.find(t);t&&(this.splay(t),e=t.left,t=t.right,r=null,e&&(e.parent=null,r=this.maxNode(e),this.splay(r),this._root=r),t&&(e?r.right=t:this._root=t,t.parent=r),this._size--)},On.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},On.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)e=(t=e).parent;return e},On.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)e=(t=e).parent;return e},On.prototype.forEach=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)e?(r.push(e),e=e.left):0<r.length?(t(e=r.pop(),n++),e=e.right):i=!0;return this},On.prototype.range=function(t,e,r,i){for(var n=[],o=this._compare,a=this._root;0!==n.length||a;)if(a)n.push(a),a=a.left;else{if(0<o((a=n.pop()).key,e))break;if(0<=o(a.key,t)&&r.call(i,a))return this;a=a.right}return this},On.prototype.keys=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.key),t=t.right):i=!0;return r},On.prototype.values=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.data),t=t.right):i=!0;return r},On.prototype.at=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},On.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return r&&function t(e,r,i,n,o){if(n<=i)return;var a=e[i+n>>1];var s=i-1;var l=n+1;for(;;){for(;o(e[++s],a)<0;);for(;0<o(e[--l],a););if(l<=s)break;var h=e[s];e[s]=e[l],e[l]=h,h=r[s],r[s]=r[l],r[l]=h}t(e,r,i,l,o);t(e,r,l+1,n,o)}(t,e,0,i-1,this._compare),this._root=function t(e,r,i,n,o){var a=o-n;{var s,l;if(0<a)return a=n+Math.floor(a/2),l=r[a],s=i[a],(l={key:l,data:s,parent:e}).left=t(l,r,i,n,a),l.right=t(l,r,i,a+1,o),l}return null}(null,t,e,0,i),this._size=i,this},On.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},On.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},On.prototype.isEmpty=function(){return null===this._root},Gr.size.get=function(){return this._size},On.createTree=function(t,e,r,i,n){return new On(r,n).load(t,e,i)},Object.defineProperties(On.prototype,Gr);var Sn=0,Cn=1,In=2,kn=3,wn=0,Dn=1,Ln=2,Fn=3;function Nn(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!Pn(e,r)||e.isVertical()?e.prevInResult:e));e=Pn(t,r);t.resultTransition=e?function(t,e){var r,i=!t.inOut,n=!t.otherInOut;switch(e){case wn:r=i&&n;break;case Dn:r=i||n;break;case Fn:r=i^n;break;case Ln:r=t.isSubject?i&&!n:n&&!i}return r?1:-1}(t,r):0}function Pn(t,e){switch(t.type){case Sn:switch(e){case wn:return!t.otherInOut;case Dn:return t.otherInOut;case Ln:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case Fn:return!0}break;case In:return e===wn||e===Dn;case kn:return e===Ln;case Cn:return!1}return!1}function Bn(t,e,r,i,n){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=i,this.type=n||Sn,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0}Wr={inResult:{configurable:!0}};function Hn(t,e){return t[0]===e[0]&&t[1]===e[1]}Bn.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?0<(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]):0<(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])},Bn.prototype.isAbove=function(t){return!this.isBelow(t)},Bn.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},Wr.inResult.get=function(){return 0!==this.resultTransition},Bn.prototype.clone=function(){var t=new Bn(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties(Bn.prototype,Wr);var Yn=134217729;function Gn(u,t,c,_,f){var e,r,i,n,o=t[0],a=_[0],s=0,l=0,h=(o<a==-o<a?(e=o,o=t[++s]):(e=a,a=_[++l]),0);if(s<u&&l<c)for(o<a==-o<a?(i=e-((r=o+e)-o),o=t[++s]):(i=e-((r=a+e)-a),a=_[++l]),e=r,0!==i&&(f[h++]=i);s<u&&l<c;)o<a==-o<a?(i=e-((r=e+o)-(n=r-e))+(o-n),o=t[++s]):(i=e-((r=e+a)-(n=r-e))+(a-n),a=_[++l]),e=r,0!==i&&(f[h++]=i);for(;s<u;)i=e-((r=e+o)-(n=r-e))+(o-n),o=t[++s],e=r,0!==i&&(f[h++]=i);for(;l<c;)i=e-((r=e+a)-(n=r-e))+(a-n),a=_[++l],e=r,0!==i&&(f[h++]=i);return 0===e&&0!==h||(f[h++]=e),h}function Wn(t){return new Float64Array(t)}var Un=Wn(4),Xn=Wn(8),Vn=Wn(12),zn=Wn(16),Kn=Wn(4);function jn(u,c,_,f,t,d,p){var e,r,i,n,o,g,v,m,y,E,x=u-t,b=_-t,A=c-d,T=f-d,a=x*T,s=Yn*x,l=s-(s-x),h=x-l,R=(Un[0]=(v=h*(i=T-(r=(s=Yn*T)-(s-T)))-(a-l*r-h*r-l*i))-((n=v-(y=(h=A-(l=(s=Yn*A)-(s-A)))*(i=b-(r=(s=Yn*b)-(s-b)))-((m=A*b)-l*r-h*r-l*i)))+(e=v-n))+(e-y),Un[1]=(g=a-((o=a+n)-(e=o-a))+(n-e))-((n=g-m)+(e=g-n))+(e-m),Un[2]=o-((E=o+n)-(e=E-o))+(n-e),Un[3]=E,function(t,e){for(var r=e[0],i=1;i<t;i++)r+=e[i];return r}(4,Un)),M=22204460492503146e-32*p;if(M<=R||M<=-R)return R;if(u=u-(x+(e=u-x))+(e-t),_=_-(b+(e=_-b))+(e-t),t=c-(A+(e=c-A))+(e-d),c=f-(T+(e=f-T))+(e-d),0==u&&0==t&&0==_&&0==c)return R;if((M=11093356479670487e-47*p+33306690738754706e-32*Math.abs(R))<=(R+=x*c+T*u-(A*_+b*t))||M<=-R)return R;Kn[0]=(v=(h=u-(l=(s=Yn*u)-(s-u)))*(i=T-(r=(s=Yn*T)-(s-T)))-((a=u*T)-l*r-h*r-l*i))-((n=v-(y=(h=t-(l=(s=Yn*t)-(s-t)))*(i=b-(r=(s=Yn*b)-(s-b)))-((m=t*b)-l*r-h*r-l*i)))+(e=v-n))+(e-y),Kn[1]=(g=a-((o=a+n)-(e=o-a))+(n-e))-((n=g-m)+(e=g-n))+(e-m),Kn[2]=o-((E=o+n)-(e=E-o))+(n-e),Kn[3]=E;f=Gn(4,Un,4,Kn,Xn),Kn[0]=(v=(h=x-(l=(s=Yn*x)-(s-x)))*(i=c-(r=(s=Yn*c)-(s-c)))-((a=x*c)-l*r-h*r-l*i))-((n=v-(y=(h=A-(l=(s=Yn*A)-(s-A)))*(i=_-(r=(s=Yn*_)-(s-_)))-((m=A*_)-l*r-h*r-l*i)))+(e=v-n))+(e-y),Kn[1]=(g=a-((o=a+n)-(e=o-a))+(n-e))-((n=g-m)+(e=g-n))+(e-m),Kn[2]=o-((E=o+n)-(e=E-o))+(n-e),Kn[3]=E,d=Gn(f,Xn,4,Kn,Vn),Kn[0]=(v=(h=u-(l=(s=Yn*u)-(s-u)))*(i=c-(r=(s=Yn*c)-(s-c)))-((a=u*c)-l*r-h*r-l*i))-((n=v-(y=(h=t-(l=(s=Yn*t)-(s-t)))*(i=_-(r=(s=Yn*_)-(s-_)))-((m=t*_)-l*r-h*r-l*i)))+(e=v-n))+(e-y),Kn[1]=(g=a-((o=a+n)-(e=o-a))+(n-e))-((n=g-m)+(e=g-n))+(e-m),Kn[2]=o-((E=o+n)-(e=E-o))+(n-e),Kn[3]=E,p=Gn(d,Vn,4,Kn,zn);return zn[p-1]}function $n(t,e,r){i=t[0],t=t[1],n=e[0],e=e[1],o=r[0],r=r[1],s=(a=(t-r)*(n-o))-(l=(i-o)*(e-r));var i,n,o,a,s,l=0==a||0==l||0<a!=0<l?s:(a=Math.abs(a+l),Math.abs(s)>=33306690738754716e-32*a?s:-jn(i,t,n,e,o,r,a));return 0<l?-1:l<0?1:0}function Zn(t,e){var r=t.point,i=e.point;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:(i=e,e=r,(r=t).left===i.left?0===$n(e,r.otherEvent.point,i.otherEvent.point)?!r.isSubject&&i.isSubject?1:-1:r.isBelow(i.otherEvent.point)?-1:1:r.left?1:-1)}function qn(t,e,r){var i=new Bn(e,!1,t,t.isSubject),e=new Bn(e,!0,t.otherEvent,t.isSubject);return Hn(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=e.contourId=t.contourId,0<Zn(e,t.otherEvent)&&(t.otherEvent.left=!0,e.left=!1),t.otherEvent.otherEvent=e,t.otherEvent=i,r.push(e),r.push(i),r}function Jn(t,e){return t[0]*e[1]-t[1]*e[0]}function Qn(t,e){return t[0]*e[0]+t[1]*e[1]}function to(t,e,r){var i=function(t,e,r,i,n){function o(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}e=[e[0]-t[0],e[1]-t[1]],i=[i[0]-r[0],i[1]-r[1]];var a=[r[0]-t[0],r[1]-t[1]],s=Jn(e,i),u=Qn(e,e);if(0<s*s){var l=Jn(a,i)/s;if(l<0||1<l)return null;var h=Jn(a,e)/s;return h<0||1<h?null:0==l||1==l?n?null:[o(t,l,e)]:0==h||1==h?n?null:[o(r,h,i)]:[o(t,l,e)]}return 0<(s=Jn(a,e))*s?null:(r=Qn(e,a)/u,h=r+Qn(e,i)/u,l=Math.min(r,h),s=Math.max(r,h),l<=1&&0<=s?1===l?n?null:[o(t,0<l?l:0,e)]:0===s?n?null:[o(t,s<1?s:1,e)]:n&&0===l&&1===s?null:[o(t,0<l?l:0,e),o(t,s<1?s:1,e)]:null)}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),n=i?i.length:0;if(0===n)return 0;if(1===n&&(Hn(t.point,e.point)||Hn(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===n&&t.isSubject===e.isSubject)return 0;if(1===n)return Hn(t.point,i[0])||Hn(t.otherEvent.point,i[0])||qn(t,i[0],r),Hn(e.point,i[0])||Hn(e.otherEvent.point,i[0])||qn(e,i[0],r),1;var n=[],i=!1,o=!1;return Hn(t.point,e.point)?i=!0:1===Zn(t,e)?n.push(e,t):n.push(t,e),Hn(t.otherEvent.point,e.otherEvent.point)?o=!0:1===Zn(t.otherEvent,e.otherEvent)?n.push(e.otherEvent,t.otherEvent):n.push(t.otherEvent,e.otherEvent),i&&o||i?(e.type=Cn,t.type=e.inOut===t.inOut?In:kn,i&&!o&&qn(n[1].otherEvent,n[0].point,r),2):(o?qn(n[0],n[1].point,r):n[0]!==n[3].otherEvent?(qn(n[0],n[1].point,r),qn(n[1],n[2].point,r)):(qn(n[0],n[1].point,r),qn(n[3].otherEvent,n[2].point,r)),3)}function eo(t,e){if(t===e)return 0;if(0!==$n(t.point,t.otherEvent.point,e.point)||0!==$n(t.point,t.otherEvent.point,e.otherEvent.point))return Hn(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===Zn(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,i=e.point;return r[0]===i[0]&&r[1]===i[1]?(r=t.otherEvent.point,i=e.otherEvent.point,r[0]===i[0]&&r[1]===i[1]?0:t.contourId>e.contourId?1:-1):1===Zn(t,e)?1:-1}function ro(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null}function io(t){for(var u=function(t){for(var e,r,i=[],n=0,o=t.length;n<o;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var a=!1;!a;)for(a=!0,n=0,o=i.length;n<o;n++)n+1<o&&1===Zn(i[n],i[n+1])&&(r=i[n],i[n]=i[n+1],i[n+1]=r,a=!1);for(n=0,o=i.length;n<o;n++)(e=i[n]).otherPos=n;for(n=0,o=i.length;n<o;n++)(e=i[n]).left||(r=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=r);return i}(t),c={},_=[],e=function(){if(!c[f]){var t,e,r,i,n=_.length,o=(h=u[f],t=_,e=n,i=new ro,null!=h.prevInResult?(r=(h=h.prevInResult).outputContourId,0<h.resultTransition?null!=(h=t[r]).holeOf?(t[h=h.holeOf].holeIds.push(e),i.holeOf=h,i.depth=t[r].depth):(t[r].holeIds.push(e),i.holeOf=r,i.depth=t[r].depth+1):(i.holeOf=null,i.depth=t[r].depth)):(i.holeOf=null,i.depth=0),i),a=function(t){c[t]=!0,t<u.length&&u[t]&&(u[t].outputContourId=n)},s=f,l=f,h=u[f].point;for(o.points.push(h);;)if(a(s),a(s=u[s].otherPos),o.points.push(u[s].point),(s=function(t,e,r,i){var n,o=t+1,a=e[t].point,s=e.length;for(o<s&&(n=e[o].point);o<s&&n[0]===a[0]&&n[1]===a[1];){if(!r[o])return o;++o<s&&(n=e[o].point)}for(o=t-1;r[o]&&i<o;)o--;return o}(s,u,c,l))==l||s>=u.length||!u[s])break;_.push(o)}},f=0,r=u.length;f<r;f++)e();return _}ro.prototype.isExterior=function(){return null==this.holeOf};var no=oo,gi=oo;function oo(t,e){if(!(this instanceof oo))return new oo(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||ao,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this._down(r)}function ao(t,e){return t<e?-1:e<t?1:0}oo.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t;if(0!==this.length)return t=this.data[0],this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];0<t;){var n=t-1>>1,o=e[n];if(0<=r(i,o))break;e[t]=o,t=n}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&r(e[a],s)<0&&(s=e[o=a]),0<=r(s,n))break;e[t]=s,t=o}e[t]=n}},no.default=gi;var so=Math.max,lo=Math.min,ho=0;function uo(t,e,r,i,n,u){for(var o=0,c=t.length-1;o<c;o++){var a=t[o],s=t[o+1],l=new Bn(a,!1,void 0,e),h=new Bn(s,!1,l,e);l.otherEvent=h,a[0]===s[0]&&a[1]===s[1]||(l.contourId=h.contourId=r,u||(l.isExteriorRing=!1,h.isExteriorRing=!1),0<Zn(l,h)?h.left=!0:l.left=!0,s=a[0],a=a[1],n[0]=lo(n[0],s),n[1]=lo(n[1],a),n[2]=so(n[2],s),n[3]=so(n[3],a),i.push(l),i.push(h))}}var co=[];function _o(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);s=e,i=r,h=null,(l=t).length*s.length==0&&(i===wn?h=co:i===Ln?h=l:i!==Dn&&i!==Fn||(h=0===l.length?s:l));var i=h;if(i)return i===co?null:i;var n,u,o,a,s=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],h=function(t,e,r,u,c){for(var i,n,o,a,s=new no(null,Zn),l=0,h=t.length;l<h;l++)for(o=0,a=(i=t[l]).length;o<a;o++)(n=0===o)&&ho++,uo(i[o],!0,ho,s,r,n);for(l=0,h=e.length;l<h;l++)for(o=0,a=(i=e[l]).length;o<a;o++)n=0===o,(n=c===Ln?!1:n)&&ho++,uo(i[o],!1,ho,s,u,n);return s}(t,e,s,l,r);if(t=t,e=e,o=r,a=null,((n=s)[0]>(u=l)[2]||u[0]>n[2]||n[1]>u[3]||u[1]>n[3])&&(o===wn?a=co:o===Ln?a=t:o!==Dn&&o!==Fn||(a=t.concat(e))),i=a)return i===co?null:i;for(var c=io(function(t,e,u,r){for(var i=new On(eo),c=[],_=Math.min(e[2],u[2]);0!==t.length;){var n,o,a,s,l,h=t.pop();if(c.push(h),r===wn&&h.point[0]>_||r===Ln&&h.point[0]>e[2])break;h.left?(a=o=i.insert(h),o=o!==(n=i.minNode())?i.prev(o):null,a=i.next(a),Nn(h,s=o?o.key:null,r),a&&2===to(h,a.key,t)&&(Nn(h,s,r),Nn(a.key,h,r)),o&&2===to(o.key,h,t)&&(Nn(s,(l=(l=o)!==n?i.prev(l):null)?l.key:null,r),Nn(h,s,r))):(h=h.otherEvent,a=o=i.find(h),o&&a&&(o=o!==n?i.prev(o):null,a=i.next(a),i.remove(h),a&&o&&to(o.key,a.key,t)))}return c}(h,s,l,r)),_=[],f=0;f<c.length;f++){var d=c[f];if(d.isExterior()){for(var p=[d.points],g=0;g<d.holeIds.length;g++){var v=d.holeIds[g];p.push(c[v].points)}_.push(p)}}return _}function fo(t,e){return _o(t,e,Dn)}function po(t,e){return _o(t,e,Ln)}function go(t,e){return _o(t,e,Fn)}function vo(t,e){return _o(t,e,wn)}var vi={matrix:Ht,tar:e,vector:Ft,geom:ie,booleanOperations:{union:fo,diff:po,intersection:vo,xor:go}},mi=A.STYLE_KEY,mo=mi.TRANSLATE_X,yo=mi.TRANSLATE_Y,Eo=mi.TRANSLATE_Z,xo=mi.SCALE_X,bo=mi.SCALE_Y,Ao=mi.SCALE_Z,To=mi.SKEW_X,Ro=mi.SKEW_Y,Mo=mi.ROTATE_X,Oo=mi.ROTATE_Y,So=mi.ROTATE_Z,Co=mi.ROTATE_3D,Io=mi.PERSPECTIVE,ko=mi.MATRIX,wo=mi.FONT_SIZE,Do=r.PERCENT,Lo=r.REM,Fo=r.VW,No=r.VH,Po=r.VMAX,Bo=r.VMIN,yi=vi.matrix,Ho=yi.identity,Yo=yi.multiply,Go=yi.isE,Wo=vi.geom.d2r;function Uo(t,e,r,i){n=e,o=r,a=i,s=[],t.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];s.push([e,function(t,e,r,i,n){if(t===mo||t===Eo){if(e[1]===Do)return e[0]*r*.01;if(e[1]===Lo)return e[0]*n.computedStyle[wo];if(e[1]===Fo)return e[0]*n.width*.01;if(e[1]===No)return e[0]*n.height*.01;if(e[1]===Po)return e[0]*Math.max(n.width,n.height)*.01;if(e[1]===Bo)return e[0]*Math.min(n.width,n.height)*.01}else if(t===yo){if(e[1]===Do)return e[0]*i*.01;if(e[1]===Lo)return e[0]*n.computedStyle[wo];if(e[1]===Fo)return e[0]*n.width*.01;if(e[1]===No)return e[0]*n.height*.01;if(e[1]===Po)return e[0]*Math.max(n.width,n.height)*.01;if(e[1]===Bo)return e[0]*Math.min(n.width,n.height)*.01}else{if(t===ko)return e;if(t===Co)return e}return e[0]}(e,t,n,o,a)])});var n,o,a,s,e=s,g=Ho();return e.forEach(function(t){var e,r,i,n,o,a,s,l,u,c,_,f,d,t=Bt(t,2),h=t[0],t=t[1],p=Ho();e=p,t=t,(h=h)===mo?e[12]=t:h===yo?e[13]=t:h===Eo?e[14]=t:h===xo?e[0]=t:h===bo?e[5]=t:h===Ao?e[10]=t:h===To?(t=Wo(t),e[4]=Math.tan(t)):h===Ro?(t=Wo(t),e[1]=Math.tan(t)):h===Mo?(t=Wo(t),r=Math.sin(t),a=Math.cos(t),e[5]=e[10]=a,e[6]=r,e[9]=-r):h===Oo?(t=Wo(t),a=Math.sin(t),r=Math.cos(t),e[0]=e[10]=r,e[8]=a,e[2]=-a):h===So?(t=Wo(t),r=Math.sin(t),a=Math.cos(t),e[0]=e[5]=a,e[1]=r,e[4]=-r):h===Co?(r=(a=Bt(t,4))[0],i=a[1],n=a[2],a=a[3],a=Wo(a[0]),o=Math.sin(a),a=Math.cos(a),!r||i||n?!i||r||n?!n||r||i?(1!==(l=Math.sqrt(r*r+i*i+n*n))&&(r*=l=1/l,i*=l,n*=l),l=r*i,u=i*n,c=n*r,_=r*o,f=i*o,d=n*o,e[0]=r*r*(s=1-a)+a,e[1]=l*s+d,e[2]=c*s-f,e[3]=0,e[4]=l*s-d,e[5]=i*i*s+a,e[6]=u*s+_,e[7]=0,e[8]=c*s+f,e[9]=u*s-_,e[10]=n*n*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(n<0&&(o=-o),e[0]=a,e[4]=-o,e[1]=o,e[5]=a):(i<0&&(o=-o),e[0]=a,e[8]=o,e[2]=-o,e[10]=a):(r<0&&(o=-o),e[5]=a,e[9]=-o,e[6]=o,e[10]=a)):h===Io&&0<t?(t=Math.max(t,1),e[11]=-1/t):h===ko&&Tt.assignMatrix(e,t),g=Yo(g,p)}),g}function Xo(t,e){var e=Bt(e,2),r=e[0],e=e[1],i=t.slice(0);return 0===r&&0===e||Go(t)?i:(i=Yo([1,0,0,0,0,1,0,0,0,0,1,0,r,e,0,1],i),Yo(i,[1,0,0,0,0,1,0,0,0,0,1,0,-r,-e,0,1]))}var Vo={calMatrix:Uo,calMatrixByPerspective:function(t,e){return t=Go(e)?t:Yo(e,t)},calPerspectiveMatrix:function(t,e){var r;if(t&&0<t)return r=Ho(),t=Math.max(t,1),r[11]=-1/t,e=(t=Bt(e,2))[0],t=t[1],(e||t)&&(r=Yo([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=Yo(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r},calMatrixByOrigin:Xo,calMatrixWithOrigin:function(t,e,r,i){return Xo(Uo(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}},Ii=A.STYLE_KEY,zo=Ii.COLOR,Ko=Ii.FONT_WEIGHT,jo=Ii.FONT_FAMILY,$o=Ii.FONT_SIZE,Zo=Ii.FONT_STYLE,qo=Ii.LETTER_SPACING,Jo=Ii.TEXT_STROKE_COLOR,Qo=Ii.TEXT_STROKE_WIDTH,ta=Ii.TEXT_STROKE_OVER,ea=Ii.ROTATE_Z,ra=Ii.LINE_HEIGHT,ia=r.DEG;function na(t){return Lt.han.test(t)&&!Lt.punctuation.test(t)}var oa=function(){function l(t,e,r,i,n,o,a){var s=7<arguments.length&&void 0!==arguments[7]&&arguments[7];_(this,l),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,s?(this.__width=o,this.__height=n):(this.__width=n,this.__height=o),this.__content=a,this.__virtualDom={},this.__parentLineBox=null,this.__isVertical=s}return f(l,[{key:"render",value:function(u,t,e,c,_,f){var d,p=this.content,r=this.x,i=this.y,n=this.parent,g=this.width,o=this.height,v=this.isVertical,m=n.ox,y=n.oy,n=n.parent,E=bn.getBaseline(e),x=bn.getVerticalBaseline(e),b=(v?r+=x:i+=E,r+=m+_,i+=y+f,v?(this.__endX=r,this.__endY=i+o):(this.__endX=r+g,this.__endY=i),e[qo]),A=e[Qo],a=e[Jo],T=e[$o],m=e[ra],s=n.matrixEvent,R=0,M=0,O=(v&&(d=[[ea,[90,ia]]],R=.6*x,M=.2*x),0),S=p.length;if(u===et.CANVAS||u===et.WEBGL){var l="fill"===e[ta];if(b)for(;O<S;O++){var C,I=p.charAt(O);v?(na(I)?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),l&&t.fillText(I,r-R,i-M),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(I,r-R,i-M),l||t.fillText(I,r-R,i-M)):(C=Vo.calMatrixWithOrigin(d,[r,i],0,0),C=Ht.multiply(s,C),t.setTransform(C[0],C[1],C[4],C[5],C[12],C[13]),l&&t.fillText(I,r,i),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(I,r,i),l||t.fillText(I,r,i)),i+=t.measureText(I).width+b):(l&&t.fillText(I,r,i),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(I,r,i),l||t.fillText(I,r,i),r+=t.measureText(I).width+b)}else if(v){for(var k=na(p.charAt(0)),w=0,h=0,D=p.length,L=1;L<D;L++){var F,N,P=na(p.charAt(L));P!==k?(k?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),F=p.slice(w,L),l&&t.fillText(F,r-R,i+h+E-M),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(F,r-R,i+h+E-M),l||t.fillText(F,r-R,i+h+E-M),h+=T):(F=Vo.calMatrixWithOrigin(d,[r,i+h],0,0),F=Ht.multiply(s,F),t.setTransform(F[0],F[1],F[4],F[5],F[12],F[13]),N=p.slice(w,L),l&&t.fillText(N,r,i+h),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(N,r,i+h),l||t.fillText(N,r,i+h),h+=t.measureText(N).width),w=L,k=!k):P&&(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),N=p.slice(w,L),l&&t.fillText(N,r-R,i+h+E-M),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(N,r-R,i+h+E-M),l||t.fillText(N,r-R,i+h+E-M),h+=T,w=L)}w<D&&(y=p.slice(w,D),k?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),l&&t.fillText(y,r-R,i+h+E-M),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(y,r-R,i+h+E-M),l||t.fillText(y,r-R,i+h+E-M)):(o=Vo.calMatrixWithOrigin(d,[r,i+h],0,0),o=Ht.multiply(s,o),t.setTransform(o[0],o[1],o[4],o[5],o[12],o[13]),l&&t.fillText(y,r,i+h),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(y,r,i+h),l||t.fillText(y,r,i+h)))}else l&&t.fillText(p,r,i),A&&(0<a[3]||3===a.length||a.k)&&t.strokeText(p,r,i),l||t.fillText(p,r,i)}else u===et.SVG&&(v&&(r+=.5*m-x),o=[["x",r],["y",i],["fill",g=(g=c[zo]).k?n.__gradient(u,t,n.__bx1,n.__by1,n.__bx2,n.__by2,g,_,f).v:g],["font-family",e[jo]],["font-weight",e[Ko]],["font-style",e[Zo]],["font-size",e[$o]+"px"]],A&&(0<a[3]||3===a.length||a.k)&&((y=c[Jo]).k&&(y=n.__gradient(u,t,n.__bx1,n.__by1,n.__bx2,n.__by2,y,_,f).v),o.push(["stroke",y]),o.push(["stroke-width",e[Qo]])),b&&o.push(["letter-spacing",b]),v&&o.push(["writing-mode","vertical-lr"]),this.__virtualDom={type:"item",tagName:"text",props:o,content:Tt.encodeHtml(p)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"offsetWidth",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"offsetHeight",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseline",get:function(){return this.parent.baseline}},{key:"verticalBaseline",get:function(){return this.parent.verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isVertical",get:function(){return this.__isVertical}}]),l}(),xi=A.STYLE_KEY,aa=xi.FONT_SIZE,sa=xi.FONT_FAMILY,la=xi.FONT_WEIGHT,ha=xi.FONT_STYLE,ua=xi.COLOR,ca=A.NODE_KEY.NODE_VIRTUAL_DOM,_a=et.CANVAS,fa=et.SVG,da=et.WEBGL,pa=function(){d(a,k);var o=p(a);function a(t,e,r,i){var n;return _(this,a),(n=o.call(this)).__x=n.__sx1=t,n.__y=n.__sy1=e,n.__width=r,(n.__parent=n.__domParent=i).__ellipsis=l(n),n.__parentLineBox=null,n.__baseline=bn.getBaseline(i.computedStyle),n.isEllipsis=!0,n}return f(a,[{key:"render",value:function(t,h,e,u){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,c=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,i=this.x,n=this.y,o=this.parent,a=o.ox,s=o.oy,l=o.computedStyle,_=o.cacheStyle[ua];i+=a+r,n=n+bn.getBaseline(l)+(s+c),t===_a||t===da?(a=bn.setFontStyle(l),e.font!==a&&(e.font=a),e.fillStyle!==_&&(e.fillStyle=_),e.fillText("â€¦",i,n)):t===fa&&(r=[["x",i],["y",n],["fill",_],["font-family",l[sa]],["font-weight",l[la]],["font-style",l[ha]],["font-size",l[aa]+"px"]],s=this.__config[ca]=this.__virtualDom={type:"text",children:[{type:"item",tagName:"text",props:r,content:"â€¦"}]},o.virtualDom.children.push(s))}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),a}(),ga=[8,16,32,64,128,256,512,1024,2048,4096,8192],va=[128,64,32,16,8,4,2,1,1,1,1],ma=ga[ga.length-1],ya={},Ea=0,xa=function(){function c(t,e){_(this,c),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;t=this.__canvas=Rt.getCacheCanvas(t,t,null,e);t&&(this.__offscreen=t),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=Ea++,this.__update=!1,this.time=0}return f(c,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var n=r*t+i;if(e[n])return e[n]=0,this.__free--,n}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(ma<t)){for(var e=ga[0],r=va[0],i=0,n=ga.length;i<n&&(e=ga[i],r=va[i],!(ga[i]>=t));i++);for(var o,a=ya[e]=ya[e]||[],s=0,l=a.length;s<l;s++){var h=a[s];if(h.free){o=h;break}}if(!o){if(!(o=new c(e,r)).offscreen)return void Rt.error("Can not create off-screen for page");a.push(o)}var u=o.add();return{page:o,pos:u}}}},{key:"CONFIG",get:function(){return{SIZE:ga,NUMBER:va}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(ga=t.SIZE,va=t.NUMBER,ma=ga[ga.length-1])}},{key:"MAX",get:function(){return ma}},{key:"genUuid",value:function(){return Ea++}}]),c}(),Ai=A.STYLE_KEY,ba=Ai.TRANSFORM_ORIGIN,Aa=Ai.TRANSFORM,Ta=bn.spreadFilter;function Ra(t,e,r){var i=t.size,n=t.sx1,o=t.sy1,a=t.bbox,s=(r=r||a)[2]-r[0],l=r[3]-r[1],h=r[0]-a[0],a=r[1]-a[1],e=Rt.getCacheCanvas(s,l,null,e);return e.x=0,e.y=0,e.bbox=r,e.size=i,e.sx1=n,e.sy1=o,e.dx=-r[0],e.dy=-r[1],e.dbx=t.dbx-h,e.dby=t.dby-a,e.width=s,e.height=l,e}var Ma=function(){function p(t,e,r,i,n,o,a){_(this,p),this.__init(t,e,r,i,n,o,a)}return f(p,[{key:"__init",value:function(t,e,r,i,n,o,a){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=n;t=Bt(i.getCoords(n),2),e=t[0],r=t[1];this.__x=e,this.__y=r,this.__appendData(o,a),this.__isNew=!0,i.canvas&&(this.__enabled=!0,(n=i.ctx).setTransform(1,0,0,1,0,0),n.globalAlpha=1,q.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,n,o,a;Tt.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),(a=xa.getInstance(Math.max(i,n)))?(o=a.page,a=a.pos,this.__init(i,n,t,o,a,e,r)):this.__enabled=!1)}},{key:"resetBbox",value:function(t){}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return xa.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),o=xa.getInstance(Math.max(i,n));if(o)return new p(i,n,t,o.page,o.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=t.x,u=t.y,c=t.size,_=t.canvas,f=t.sx1,d=t.sy1,i=t.width,n=t.height,o=t.bbox,a=o[0]-(o=Ta(o,e))[0],s=o[2]-o[0],l=o[3]-o[1],h=Rt.getCacheCanvas(s,l,null,"filter");return h.ctx.filter=se.canvasFilter(e),h.ctx.drawImage(_,r,u,i,n,a,a,i,n),h.ctx.filter="none",h.draw(),h.bbox=o,h.x=0,h.y=0,h.size=c,h.sx1=f,h.sy1=d,h.dx=-o[0],h.dy=-o[1],h.dbx=t.dbx+a,h.dby=t.dby+a,h.width=s,h.height=l,h}},{key:"genMask",value:function(t,e,r){for(var i=Ra(t,"mask1"),n=[],o=e.computedStyle,a=o[Aa],o=o[ba],s=e.next,l=s.isClip;s&&s.isMask;)n.push(s),s=s.next;var u=i.x,c=i.y,h=i.ctx,_=i.dbx,f=i.dby,d=(o[0]+=u+_+e.__sx1-t.sx1,o[1]+=c+f+e.__sy1-t.sy1,Vo.calMatrixByOrigin(a,o));return n.forEach(function(t){r(t,i,d)}),h.setTransform(1,0,0,1,0,0),h.globalAlpha=1,h.globalCompositeOperation=l?"source-out":"source-in",p.drawCache(t,i),h.globalCompositeOperation="source-over",i.draw(h),i}},{key:"genOverflow",value:function(t,e){var r=t.bbox,i=e.__sx1,n=e.__sy1,o=e.clientWidth,e=e.clientHeight,a=i+o,s=n+e;if(r[0]<i||r[1]<n||r[2]>a||r[3]>s)return(i=(r=Ra(t,"overflow",[i,n,a,s])).ctx).setTransform(1,0,0,1,0,0),i.globalAlpha=1,p.drawCache(t,r),r.draw(i),i.globalCompositeOperation="destination-in",i.fillStyle="#FFF",i.beginPath(),i.rect(0,0,o,e),i.fill(),i.closePath(),i.globalCompositeOperation="source-over",r}},{key:"drawCache",value:function(t,e,r,i,n,o,a){var s=e.x,u=e.y,l=e.sx1,c=e.sy1,_=e.ctx,f=e.dbx,e=e.dby,d=t.x,p=t.y,g=t.canvas,h=t.sx1,v=t.sy1,m=t.dbx,y=t.dby,E=t.width,t=t.height,s=s+h-l+f-m,h=u+v-c+e-y;r&&i&&n&&(n[0]+=s,n[1]+=h,l=Vo.calMatrixByOrigin(r,n),i=Ht.multiply(i,l),Ht.isE(o)||(i=Ht.multiply(o,i)),a&&(i=Tt.equalArr(i,a)?Ht.identity():(a=Ht.inverse(a),Ht.multiply(a,i))),_.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),_.drawImage(g,d,p,E,t,s,h,E,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var e=i.x,r=i.y,n=i.canvas,o=i.sx1,a=i.sy1,s=i.dbx,l=i.dby,h=i.width,i=i.height;t.drawImage(n,e,r,h,i,o-s,a-l,h,i)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),p}(),bi=(o(Ma,"NA",0),o(Ma,"LOCAL",1),o(Ma,"CHILD",2),o(Ma,"SELF",3),A.STYLE_KEY),n=A.STYLE_KEY,Oa=n.TRANSLATE_X,Sa=n.TRANSLATE_Y,Ca=n.TRANSLATE_Z,Ia=n.OPACITY,ka=n.FILTER,wa=n.PERSPECTIVE,Da=n.PERSPECTIVE_ORIGIN,La={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},Fa=(o(Oi={},bi.SCALE_X,!0),o(Oi,bi.SCALE_Y,!0),o(Oi,bi.SCALE_Z,!0),o(Oi,bi.ROTATE_X,!0),o(Oi,bi.ROTATE_Y,!0),o(Oi,bi.ROTATE_Z,!0),o(Oi,bi.ROTATE_3D,!0),o(Oi,bi.TRANSFORM,!0),o(Oi,bi.TRANSFORM_ORIGIN,!0),Oi),Na=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Mr.isIgnore(t)?La.NONE:t===Oa?La.TRANSLATE_X:t===Sa?La.TRANSLATE_Y:t===Ca?La.TRANSLATE_Z:Fa.hasOwnProperty(t)?La.TRANSFORM:t===Ia?La.OPACITY:t===ka?La.FILTER:t===wa||t===Da?La.PERSPECTIVE:Mr.isRepaint(t)?La.REPAINT:La.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<La.REFLOW},isRebuild:function(t){return La.REBUILD<=t}},La),t=(Na.TRANSFORMS=Fa,A.STYLE_KEY),Pa=t.DISPLAY,Ba=t.POSITION,Ha=t.LINE_HEIGHT,Ya=t.FONT_SIZE,Ga=t.FONT_FAMILY,Wa=t.FONT_WEIGHT,Ua=t.COLOR,Xa=t.VISIBILITY,Va=t.LETTER_SPACING,za=t.OVERFLOW,Ka=t.WHITE_SPACE,ja=t.TEXT_OVERFLOW,$a=t.WIDTH,Za=t.TEXT_STROKE_COLOR,qa=t.TEXT_STROKE_WIDTH,Ja=t.MARGIN_LEFT,Qa=t.MARGIN_RIGHT,ts=t.PADDING_LEFT,es=t.PADDING_RIGHT,rs=t.BORDER_LEFT_WIDTH,is=t.BORDER_RIGHT_WIDTH,ns=t.FILTER,dr=A.NODE_KEY,os=dr.NODE_CACHE,as=dr.NODE_LIMIT_CACHE,ss=dr.NODE_DOM_PARENT,ls=dr.NODE_MATRIX_EVENT,hs=dr.NODE_OPACITY,us=dr.NODE_VIRTUAL_DOM,Vr=A.UPDATE_KEY,cs=Vr.UPDATE_NODE,_s=Vr.UPDATE_FOCUS,fs=Vr.UPDATE_CONFIG,ds=A.ELLIPSIS,ps=r.AUTO,gs=et.CANVAS,vs=et.SVG,ms=et.WEBGL;function ys(u,t,e,r,c,i,_,f,d,p,g){if(r<=e)return[0,0,!1];var n=e,o=r,v=0,a=!1;if(g&&-1<[gs,ms].indexOf(t)){for(var m=0;n<r;n++){var y=u.measureText(c.charAt(n)).width+g;if(e<n&&i+1e-10<m+y){a=!0;break}m+=y}return[n-e,m,a||i+1e-10<m]}var s=Math.round(i/_);for(s<=0?s=1:r-e<s&&(s=r-e);n<o;){var l=void 0,h=c.slice(e,e+s);if(t===gs||t===ms?l=u.measureText(h).width:t===vs&&(l=Rt.measureTextSync(h,f,d,p)),g&&(l+=s*g),l===i){v=i,a=!0;break}if(i+1e-10<l){if(a=!0,1===s){v=l;break}if(n===o-1||n-e==s-1){s=n-e;break}o=s-1,h=Math.round((l-i)/_);(s-=h=h<=0?1:h)<n-e&&(s=n-e)}else{if(v=l,s===r-e)break;n=s+e,h=Math.round((i-l)/_);o-e<(s+=h=h<=0?1:h)&&(s=o-e)}}return[s,v,a]}function Es(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}var xs=function(){d(i,k);var r=p(i);function i(t){var e;return _(this,i),(e=r.call(this)).__content=Tt.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidth=0,e.__textWidth=0,e.__bp=null,e.__widthHash={},e}return f(i,[{key:"__layout",value:function(t){var u=this.__config[os],e=(u&&u.release(),t.x),r=t.y,u=t.w,c=t.h,i=t.lx,_=void 0===i?e:i,i=t.ly,f=void 0===i?r:i,d=t.lineBoxManager,i=t.endSpace,n=void 0===i?0:i,i=t.lineClamp,p=void 0===i?0:i,i=t.lineClampCount,g=void 0===i?0:i,i=t.isVertical,o=void 0!==i&&i,i=(this.__x=this.__sx=this.__sx1=e,this.__y=this.__sy=this.__sy1=r,this.isDestroyed),v=this.content,a=this.computedStyle,m=this.textBoxes,y=this.root;if(m.splice(0),this.__config[as]=!1,i||"none"===a[Pa]||!v||p&&p<=g)return g;for(var s=this.__ox=this.__oy=0,E=v.length,x=0,b=a[Ha],A=a[Va],i=a[Ka],T=a[Ya],R=a[Wa],M=a[Ga],O=o?c:u,S=o?r-f:e-_,C=this.domParent;"inline"===C.computedStyle[Pa];)C=C.domParent;var I,c=(this.__bp=C).computedStyle[ja],k=(bn.getFontFamily(M),y.renderMode),w=(k!==gs&&k!==ms||((I=(k===ms?Rt.getFontCanvas():y).ctx).font=bn.setFontStyle(a)),.8*T+A),l=0;if("nowrap"===i){var D,y=this.textWidth,i=C.computedStyle,L=i[Ba],i=i[za],F=C.currentStyle[$a];(D="hidden"===i?("absolute"!==L||F[1]!==ps)&&u+1e-10-S-n<y:D)&&"ellipsis"===c?(r=Bt(this.__lineBack(I,k,s,E,v,u-n-S,w,e,r,x,n,b,m,d,M,T,R,A),1)[0],l++):(i=new oa(this,m.length,e,r,y,b,v,o),m.push(i),d.addItem(i,!1),o?e+=b:r+=b,D&&l++),x=y}else{for(;s<E;){var h=s?O:O-S;p&&p-1<=l+g&&(h-=n);var N=Bt(ys(I,k,s,E,v,h,w,M,T,R,A),3),P=N[0],B=N[1],N=N[2];if(p&&N&&p-1<=l+g){var H=Bt(this.__lineBack(I,k,s,s+P,v,h-n,w,l?_:e,r,x,n,b,m,d,M,T,R,A),2);r=H[0],x=H[1],l++;break}if(s+P===E&&n&&h+1e-10<B+n&&1<P){H=Bt(ys(I,k,s,E,v,h-n,w,M,T,R,A),3),P=H[0],B=H[1],N=H[2];if(p&&N&&p-1<=l+g){h=Bt(this.__lineBack(I,k,s,s+P,v,h-n,w,l?_:e,r,x,n,b,m,d,M,T,R,A),2);r=h[0],x=h[1],l++;break}}x=Math.max(x,B),h=new oa(this,m.length,l&&!o?_:e,l&&o?f:r,B,b,v.slice(s,s+P),o);m.push(h),d.addItem(h,N),o?e+=Math.max(b,d.verticalLineHeight):r+=Math.max(b,d.lineHeight),s+=P,N&&l++}l&&(o?this.__y=this.__sy1=f:this.__x=this.__sx1=_)}return o?(this.__width=e-t.x,this.__height=x,this.__verticalBaseline=bn.getVerticalBaseline(a)):(this.__width=x,this.__height=r-t.y,this.__baseline=bn.getBaseline(a)),g+l}},{key:"__layoutNone",value:function(){this.__width=this.__height=this.__baseline=this.__verticalBaseline=0,this.__textBoxes.splice(0)}},{key:"__lineBack",value:function(t,e,u,c,_,r,f,i,d,p,g,v,m,n,y,E,x,b){var A=this.__bp,T=A.computedStyle,o=e===gs||e===ms?(a=bn.setFontStyle(T),t.font!==a&&(t.font=a),t.measureText(ds).width):Rt.measureTextSync(ds,T[Ga],T[Ya],T[Wa]);e!==gs&&e!==ms||(a=bn.setFontStyle(this.computedStyle),t.font!==a&&(t.font=a));var a=Bt(ys(t,e,u,c,_,r-o-g,f,y,E,x,b),2),c=a[0],y=a[1];if(r+1e-10-g<y+o){var R=n.lineBox;if(!n.isNewLine&&R&&R.size)for(var M=R.list,O=M.length-1;0<=O;O--){var S=M[O];if(S instanceof oa){var C,s,I,k=S.content,w=S.width,D=S.parent;if(!O||w+o+1e-10+g<=r)return h=k.length,C=(s=D.computedStyle)[Ha],N=s[Va],I=s[Ya],F=s[Wa],s=s[Ga],e!==gs&&e!==ms||(t.font=bn.setFontStyle(D.computedStyle)),h=(D=Bt(ys(t,e,0,h,k,r-o+w-g,f,s,I,F,N),2))[0],s=D[1],h!==k.length&&(S.__content=k.slice(0,h),i-=w-s,S.__width=s),R.__resetLb(T[Ha],bn.getBaseline(T)),I=new pa(i+g,d,o,A),n.addItem(I,!0),[d+=Math.max(C,n.lineHeight),p=Math.max(p,s+o)];var L=M.pop(),F=(r+=w,i-=w,L.parent.textBoxes),N=F.indexOf(L),P=(-1<N&&F.splice(N,1),L.parent.parent),B=M[M.length-1];for(B instanceof oa&&(B=B.parent.parent);P!==A&&P!==B;){var l=P.contentBoxList||[],H=l.indexOf(L),l=(-1<H&&l.splice(H,1),P.computedStyle),H=l[Ja]+l[Qa]+l[ts]+l[es]+l[rs]+l[is];i-=H,r+=H,P.__layoutNone(),P=P.domParent}D=B.contentBoxList||[],k=D.indexOf(L);-1<k&&D.splice(k,1)}else{if(!O)break;var h=M.pop();i-=h.outerWidth,r+=h.outerWidth,h.__layoutNone()}}}E=new oa(this,m.length,i,d,y,v,_.slice(u,u+c)),m.push(E),n.addItem(E,!1),x=new pa(i+y+g,d,o,A);return n.addItem(x,!0),[d+=Math.max(v,n.lineHeight),p=Math.max(p,y+o)]}},{key:"__backtrack",value:function(u,c,_,f,t,d,p,g,v,m){for(var e=_.list,r=e.length-1;0<=r;r--){var i=e[r];if(i instanceof oa){var n,y,o=i.content,E=i.width,a=i.parent;if(!r||E+p+1e-10+d<=t)return h=o.length,A=(n=a.computedStyle)[Va],y=n[Ya],b=n[Wa],n=n[Ga],m!==gs&&m!==ms||(v.font=bn.setFontStyle(a.computedStyle)),h=(a=Bt(ys(v,m,0,h,o,t-p-d+E,.8*y+A,n,y,b,A),2))[0],n=a[1],h!==o.length&&(i.__content=o.slice(0,h),i.__width=n),_.__resetLb(g[Ha],bn.getBaseline(g)),y=new pa(i.x+n+d,i.y,p,u),void c.addItem(y,!0);var x=e.pop(),b=(t+=E,x.parent.textBoxes),A=b.indexOf(x),s=(-1<A&&b.splice(A,1),x.parent.parent),T=e[e.length-1];for(T instanceof oa&&(T=T.parent.parent);s!==u&&s!==T;){var l=s.contentBoxList||[],R=l.indexOf(x),l=(-1<R&&l.splice(R,1),s.computedStyle);t+=l[Ja]+l[Qa]+l[ts]+l[es]+l[rs]+l[is],s.__layoutNone(),s=s.domParent}a=T.contentBoxList||[],o=a.indexOf(x);-1<o&&a.splice(o,1)}else{if(!r)break;var h=e.pop();t+=h.outerWidth,h.__layoutNone()}}}},{key:"__offsetX",value:function(e,t){N(F(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){N(F(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.firstCharWidth}},{key:"__inlineSize",value:function(r){var i,n;this.textBoxes.forEach(function(t,e){n=e?(i=Math.min(i,r?t.y:t.x),Math.max(n,(r?t.y:t.x)+t.width)):(i=r?t.y:t.x,(r?t.y:t.x)+t.width)}),r?(this.__y=i,this.__sy=this.__sy1=i+this.oy,this.__sx=this.__sx1,this.height=n-i):(this.__x=i,this.__sx=this.__sx1=i+this.ox,this.__sy=this.__sy1,this.__width=n-i)}},{key:"render",value:function(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=this.isDestroyed,a=this.computedStyle,u=this.textBoxes,c=this.cacheStyle,s=this.__config;if(e===vs&&(s[us]=this.__virtualDom={type:"text",children:[]}),t>=Na.REPAINT&&(this.__bbox=null,this.__filterBbox=null),!o&&"none"!==a[Pa]&&"hidden"!==a[Xa]&&u.length){if(e===gs||e===ms){if(e===ms)if(i){var t=this.sx,o=this.sy,i=this.bbox,l=s[os];if(l?l.reset(i,t,o):l=Ma.getInstance(i,t,o),!l||!l.enabled)return void(s[as]=!0);(s[os]=l).__available=!0,r=l.ctx,n+=l.dx,h+=l.dy,s[as]=!1}else{i=this.root,t=Rt.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),o=(r=t.ctx,s[ss].__config),l=o[ls],i=o[hs];r.setTransform(l[0],l[1],l[4],l[5],l[12],l[13]),r.globalAlpha=i}t=bn.setFontStyle(a),s=(r.font!==t&&(r.font=t),c[Ua]),l=(s.k&&(s=(o=this.parent).__gradient(e,r,o.__bx1,o.__by1,o.__bx2,o.__by2,s,n,h).v),r.fillStyle!==s&&(r.fillStyle=s),a[qa]),i=(r.lineWidth!==l&&(r.lineWidth=l),c[Za]);i.k&&(i=(t=this.parent).__gradient(e,r,t.__bx1,t.__by1,t.__bx2,t.__by2,i,n,h).v),r.strokeStyle!==i&&(r.strokeStyle=i)}u.forEach(function(t){t.render(e,r,a,c,n,h)}),e===vs&&(this.virtualDom.children=u.map(function(t){return t.virtualDom}))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(N(F(i.prototype),"__destroy",this).call(this),(t=this.__config[os])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,e){var n=this;i!==n.__content?(root.delRefreshTask(n.__task),root.addRefreshTask(n.__task={__before:function(){n.__content=i;var t={},e=n.domParent,r=(t[cs]=e,t[_s]=Na.REFLOW,t[fs]=e.__config,e.root);r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(t){Tt.isFunction(e)&&e(t)}})):Tt.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,o=r[Ga],a=r[Ya],u=r[Wa],c=r[Va],s=Es(o,a,u,c),t=(t.hasOwnProperty(s)||(t[s]={}),t[s]);if(!t.hasOwnProperty("charWidth")){var l=0;if(i===gs||i===ms){(n=i===ms?Rt.getFontCanvas().ctx:n).font=bn.setFontStyle(r);for(var h=0,_=e.length;h<_;h++)l=Math.max(l,n.measureText(e.charAt([h])).width)}else i===vs&&(l=Rt.measureTextListMax(e,o,a,u));t.charWidth=l+c}return t.charWidth}},{key:"firstCharWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,o=r[Ga],a=r[Ya],s=r[Wa],l=r[Va],h=Es(o,a,s,l),t=(t.hasOwnProperty(h)||(t[h]={}),t[h]);return t.hasOwnProperty("firstCharWidth")||(i===gs||i===ms?((n=i===ms?Rt.getFontCanvas().ctx:n).font=bn.setFontStyle(r),t.firstCharWidth=n.measureText(e.charAt(0)).width+l):i===vs&&(t.firstCharWidth=Rt.measureTextSync(e.charAt(0),o,a,s)+l)),t.firstCharWidth}},{key:"textWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,o=r[Ga],a=r[Ya],s=r[Wa],l=r[Va],h=Es(o,a,s,l),t=(t.hasOwnProperty(h)||(t[h]={}),t[h]);return t.hasOwnProperty("textWidth")||(i===gs||i===ms?((n=i===ms?Rt.getFontCanvas().ctx:n).font=bn.setFontStyle(r),t.textWidth=n.measureText(e).width+l*e.length):i===vs&&(t.textWidth=Rt.measureTextSync(e,o,a,s)+l*e.length)),t.textWidth}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,n=this.computedStyle[qa];return[t-n,e-n,t+r+n,e+i+n]}},{key:"filterBbox",get:function(){var t,e;return this.__filterBbox||(t=this.bbox,e=this.computedStyle[ns],this.__filterBbox=bn.spreadFilter(t,e)),this.__filterBbox}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}(),bs=(xs.prototype.__renderByMask=xs.prototype.render,w.TYPE_VD),As=w.TYPE_GM,Ts=w.TYPE_CP;function Rs(t){if(Array.isArray(t))return t.map(Rs);if(!t||-1===[bs,As,Ts].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==bs&&t.$$type!==As)t&&t.$$type===Ts?(r.push(t),i.lastText=null):Tt.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===bs&&Rs(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var Ms,Os,Ss,Cs,Is,i=A.NODE_KEY,ks=i.NODE_DOM_PARENT,ws=i.NODE_STYLE,Ds=i.NODE_CURRENT_STYLE,Ls=i.NODE_COMPUTED_STYLE,Fs=i.NODE_MATRIX,Ns=i.NODE_MATRIX_EVENT,Ps=w.TYPE_VD,Bs=w.TYPE_GM,Hs=w.TYPE_CP;function Ys(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return Ys(t,e,r,i)});if(Tt.isObject(t)&&t.$$type){var n,o=t.tagName,a=t.props,s=t.children,u=t.klass,l=t.$$type,h=t.__inheritAnimate,c=t.__animateRecords;if(l===Hs&&t.__placeholder)return t.__placeholder;if(l===Ps){if("img"===o){if(n=new Ss(o,a),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else n=new Os(o,a);if("p"===o)i=!0;else if("div"===o&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?Gs(n,Ys(s,e,r,i)):[],n.__children=s}else if(l===Bs)Tt.isString(o)?n=new(Cs.getRegister(o))(o,a):o&&(n=new o("$",a));else{if(l!==Hs)return new xs(t);(n=new u(a)).__tagName=o||n.__tagName}(t.vd=n).__json=t,c&&((n.__animateRecords=c).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),h&&(Tt.extendAnimate(h,n),delete t.__inheritAnimate),n.__root=e,n.__host=r,l===Hs&&n.__init();s=a.ref;return Tt.isString(s)&&s||Tt.isNumber(s)?r.ref[s]=n:Tt.isFunction(s)&&s(n),n}return new xs(t)}function Gs(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){Gs(e,t,i)}):(r instanceof Ms||r instanceof Is||r instanceof xs)&&(r.__parent=e,r.__domParent=e,r instanceof xs&&[ws,Ds,Ls,Fs,Ns].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[ks]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof Is&&((t=r.shadowRoot)instanceof xs&&(t.__parent=e,[ws,Ds,Ls,Fs,Ns].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[ks]=e))),r}var Ws={ref:function(t){Ms=t.Xom,Os=t.Dom,Ss=t.Img,Cs=t.Geom,Is=t.Component},initRoot:function(t,e){return t=Rs({tagName:e.tagName,props:{},children:t,$$type:Ps}),e.__json=t,e.__host=e,t=Ys(t.children,e,e),Gs(e,t)},initDom:function(t,e,r,i){return Gs(i,Ys(t,e,r))},initCp:function(t,e,r){return Tt.isObject(t)?Ys(t,e,r):new xs(t)},initCp2:function(t,e,r,i){var n=new t.klass(t.props);return n.__tagName=t.tagName||n.__tagName,n.__root=e,n.__host=r,n.__json=t,n.__init(),Gs(i,n)},relation:Gs},Us=Tt.isFunction,Xs=function(){function a(){_(this,a),this.__eHash={}}return f(a,[{key:"on",value:function(t,e){if(Us(e)){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else{this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var n=0,o=this.__eHash[t],a=o.length;n<a;n++)if(o[n]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,n){if(Us(n)){var o=this;if(a.__karasEventCb=n,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)o.once(i[t],n);else n&&o.on(i,a);return this}function a(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(o,e),o.off(i,a)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,o=this.__eHash[t],a=o.length;n<a;n++)if(o[n]===e||o[n].__karasEventCb===e){o.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)this.emit(t[n],r);else if(this.__eHash.hasOwnProperty(t)){var a=this.__eHash[t];if(a.length)for(var s=0,h=(a=a.slice()).length;s<h;s++){var l=a[s];Us(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--)for(var e=t<0||arguments.length<=t?void 0:arguments[t],r=new a,i=(e.__eHash={},["on","once","off","emit"]),n=i.length-1;0<=n;n--){var o=i[n];e[o]=r[o]}}}]),a}(),Vs=(o(Xs,"REFRESH","refresh"),o(Xs,"PAUSE","pause"),o(Xs,"PLAY","play"),o(Xs,"FRAME","frame"),o(Xs,"FINISH","finish"),o(Xs,"CANCEL","cancel"),o(Xs,"BEGIN","begin"),o(Xs,"END","end"),Tt.isNil),zs=Tt.isFunction,Ks=Tt.clone,js=Tt.extend,$s={};var Zs=function(){d(o,Xs);var r=p(o);function o(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _(this,o),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=Tt.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return f(o,[{key:"setState",value:function(t,e){var r=this,i=this;if(Vs(t))t={};else{if(zs(t))return;if(0===Object.keys(t).length)return void(zs(e)&&e.call(i));var n=Ks(i.state);t=js(n,t)}var o,a,n=i.root;n&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],o=[],a=i.__task={__before:function(){o=i.__taskList.splice(0),function t(e){e.__hasCpUpdate||(e.__hasCpUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){o.forEach(function(t){zs(t)&&t.call(i)})}},n.addRefreshCp(a)):zs(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this,e=(this.__ref={},this.root),t=t||Rs(this.render()),i=Ws.initCp(t,e,this);if(this.__cd=t,!(i instanceof xs))if(i instanceof k){var t=bn.normalize(this.props.style),n=Object.keys(t);js(i.style,t,n),js(i.currentStyle,t,n),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),i.listener[t]=e)})}else if(!(i instanceof o))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=i).__host=this;i instanceof o;)i.__hostRoot=this,i=(i.shadow.__host=i).shadow;((this.__shadowRoot=i).__hostRoot=this).__isMounted||(this.__isMounted=!0,zs(this.componentDidMount)&&e.once(Xs.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){Rt.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,zs(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof xs))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return $s}},{key:"getRegister",value:function(t){if(!t||!Tt.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!$s.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return $s[t]}},{key:"register",value:function(t,e){if(!(t&&Tt.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof o))throw new Error("Invalid param: Component register");if(o.hasRegister(t))throw new Error("Component has already register: ".concat(t));$s[t]=e}},{key:"hasRegister",value:function(t){return t&&$s.hasOwnProperty(t)}},{key:"delRegister",value:function(t){o.hasRegister(t)&&delete $s[t]}}]),o}(),Gr=(Object.keys(Mr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseline","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(Zs.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__computeReflow","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){Zs.prototype[e]=function(){var t=this.shadowRoot;if(t&&zs(t[e]))return t[e].apply(t,arguments)}}),A.STYLE_KEY),qs=Gr.MARGIN_TOP,Js=Gr.MARGIN_LEFT,Qs=Gr.MARGIN_RIGHT,tl=Gr.MARGIN_BOTTOM,el=Gr.PADDING_TOP,rl=Gr.PADDING_LEFT,il=Gr.PADDING_RIGHT,nl=Gr.PADDING_BOTTOM,ol=Gr.BORDER_TOP_WIDTH,al=Gr.BORDER_LEFT_WIDTH,sl=Gr.BORDER_RIGHT_WIDTH,ll=Gr.BORDER_BOTTOM_WIDTH;var hl={getInlineBox:function(t,e,u,c,r,i,n,_,f,d,p,o,g,v,m,y,E,x,b,A){for(var a,T,s,R,M,O,S,C,I,k=0,w=0,D=e?y+A:g+E,L=e?v+x:m+b,l=("paddingBox"===o?(k=e?y:g,w=e?v:m):"borderBox"===o&&(k=D,w=L),n=e?i.verticalBaseline-n:i.baseline-n,e?(a=i.x+n-k+f,T=c.y,M=i.x+n-D+f):(a=c.x,T=i.y+n-k,O=i.y+n-D),(c instanceof oa?c.parent:c).domParent);l!==t;)c===l.contentBoxList[0]&&(e?T-=(I=l.computedStyle)[qs]+I[el]+I[ol]:a-=(I=l.computedStyle)[Js]+I[rl]+I[al]),l=l.domParent;for(e?(O=T,d&&(O-=g+E,"paddingBox"===o?T-=g:"borderBox"===o&&(T-=g+E)),s=i.x+n+_+w,S=i.x+n+_+L,R=r.y+r.outerHeight):(M=a,d&&(M-=y+A,"paddingBox"===o?a-=y:"borderBox"===o&&(a-=y+A)),s=r.x+r.outerWidth,R=i.y+n+_+w-f,C=i.y+n+_+L-f),l=(r instanceof oa?r.parent:r).domParent;l!==t;){var h=l.contentBoxList;r===h[h.length-1]&&(e?R+=(h=l.computedStyle)[tl]+h[nl]+h[ll]:s+=(h=l.computedStyle)[Qs]+h[il]+h[sl]),l=l.domParent}return e?(C=R,p&&(C+=m+b,"paddingBox"===o?R+=m:"borderBox"===o&&(R+=m+b))):(S=s,p&&(S+=v+x,"paddingBox"===o?s+=v:"borderBox"===o&&(s+=v+x))),a+=t.ox,s+=t.ox,M+=t.ox,S+=t.ox,[a,T+=t.oy,s,R+=t.oy,M,O+=t.oy,S,C+=t.oy]},getInlineWidth:function(t,e,r){var i=0,n=e.length;e[n-1]instanceof pa&&n--;for(var o=0;o<n;o++)for(var a=e[o],s=(i+=r?a.height:a.width,(a instanceof oa?a.parent:a).domParent);s!==t;){var l,h=s.contentBoxList;a===h[0]&&(i+=r?(l=s.computedStyle)[qs]+l[el]+l[ol]:(l=s.computedStyle)[Js]+l[rl]+l[al]),a===h[h.length-1]&&(i+=r?(h=s.computedStyle)[tl]+h[nl]+h[ll]:(h=s.computedStyle)[Qs]+h[il]+h[sl]),s=s.domParent}return i}},Wr=A.STYLE_KEY,ul=Wr.SCALE_X,cl=Wr.SCALE_Y,_l=r.NUMBER;var fl={matrixResize:function(t,e,r,i,n,o,a,s){if(t!==r||e!==i)return Vo.calMatrixWithOrigin([[ul,[r/t,_l]],[cl,[i/e,_l]]],[n,o],a,s)}},gi=A.STYLE_KEY,dl=gi.BACKGROUND_POSITION_X,pl=gi.BACKGROUND_POSITION_Y,gl=(gi.FONT_SIZE,A.NODE_KEY.NODE_DEFS_CACHE),vl=Tt.clone,ml=Tt.joinArr,yl=se.canvasPolygon,El=se.svgPolygon;function xl(t,e,r,i,n,o,a,h,u,c,s,_,f){var d,p,l,g,v=13<arguments.length&&void 0!==arguments[13]?arguments[13]:"fill",m=14<arguments.length&&void 0!==arguments[14]&&arguments[14],y=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,E=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(l=i[1],d=i[2],p=i[3],i=i[0]),n=(n=n||Ve.calRadius(o,a,h,u,c,s,_,f))||[[o,a],[o+h,a],[o+h,a+u],[o,a+u],[o,a]],l&&(l=Vo.calMatrixByOrigin(l,[d,p]),g=Ht.inverse(l),n=n.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r],t[r+1]],g);e.push(n[0]),e.push(n[1])}return e})),e===et.CANVAS||e===et.WEBGL)l&&(r.save(),c=t.matrixEvent,l=Ht.multiply(c,l),r.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),yl(r,n,y,E),r[v](),r.closePath(),l&&r.restore();else if(e===et.SVG){s=El(n);if(m)return t.__config[gl].push(_={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",s],["fill",i]]}]}),r.add(_);t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",i]]}),l&&(f=t.virtualDom.bb)[f.length-1].props.push(["transform","matrix(".concat(ml(Ht.m2m6(l),","),")")])}}var bl,Al={renderBgc:xl,renderImage:function(u,c,_,f,d,p,g,v,m,y,E,x,t,b,A,T,R,M){var O=18<arguments.length&&void 0!==arguments[18]?arguments[18]:0,e=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0,S=f.source;if(S){var i=(g+=O)-(d+=O),n=(v+=e)-(p+=e),o=f.width,a=f.height,O=Bt(A[b]||[],2),s=O[0],l=O[1],r=(-1===s&&-1===l?(s=o,l=a):-2===s?i<o&&n<a?(l=a/n)<=(s=o/i)?l=(s=i)*a/o:s=(l=n)*o/a:i<o?l=(s=i)*a/o:n<a?s=(l=n)*o/a:(s=o,l=a):-3===s?o<i&&a<n?(s=o/i)<=(l=a/n)?l=(s=i)*a/o:s=(l=n)*o/a:o<i||!(a<n)&&(s=o/i)<=(l=a/n)?l=(s=i)*a/o:s=(l=n)*o/a:-1===s?s=l*o/a:-1===l&&(l=s*a/o),t[dl][b]||0),h=(/%/.test(r)&&(r=(i-s)*parseFloat(r)*.01),r+=d,t[pl][b]||0),C=(/%/.test(h)&&(h=(n-l)*parseFloat(h)*.01),h+=p,r<d||h<p||d+i<r+s||p+n<h+l),I=0,k=0,w=0,D=0,L=(-1<["repeatX","repeat"].indexOf(T[b])&&(0<(e=r-d)&&(I=Math.ceil(e/s)),0<(e=d+i-r-s)&&(k=Math.ceil(e/s))),-1<["repeatY","repeat"].indexOf(T[b])&&(0<(A=h-p)&&(w=Math.ceil(A/l)),0<(A=p+n-h-l)&&(D=Math.ceil(A/l))),[]);if(0<I)for(var F=0;F<I;F++){var N=r-(F+1)*s;L.push([N,h]),!C&&0===F&&N<d&&(C=!0)}if(0<k)for(var P=0;P<k;P++){var B=r+(P+1)*s;L.push([B,h]),!C&&P===k-1&&d+i<B+s&&(C=!0)}if(0<w)for(var H=0;H<w;H++){var Y=h-(H+1)*l;L.push([r,Y]),!C&&0===H&&Y<p&&(C=!0)}if(0<D)for(var G=0;G<D;G++){var W=h+(G+1)*l;L.push([r,W]),!C&&G===D-1&&p+n<W+s&&(C=!0)}if(0<I&&0<w)for(var U=0;U<I;U++)for(var X=0;X<w;X++)L.push([r-(U+1)*s,h-(X+1)*l]);if(0<k&&0<w)for(var V=0;V<k;V++)for(var z=0;z<w;z++)L.push([r+(V+1)*s,h-(z+1)*l]);if(0<I&&0<D)for(var K=0;K<I;K++)for(var j=0;j<D;j++)L.push([r-(K+1)*s,h+(j+1)*l]);if(0<k&&0<D)for(var $=0;$<k;$++)for(var Z=0;Z<D;Z++)L.push([r+($+1)*s,h+(Z+1)*l]);if(c===et.CANVAS||c===et.WEBGL)C&&(_.save(),xl(this,c,_,"#FFF",null,d,p,i,n,m,y,E,x,"clip")),_.drawImage(S,r,h,s,l),L.forEach(function(t){_.drawImage(S,t[0],t[1],s,l)}),C&&_.restore();else if(c===et.SVG){var q,J,O=fl.matrixResize(o,a,s,l,r,h,i,n),Q=[["xlink:href",f.url],["x",r],["y",h],["width",o],["height",a]];if(O&&!Ht.isE(O)&&(q=!0,Q.push(["transform","matrix("+ml(Ht.m2m6(O),",")+")"])),C&&(t=[d,p],e=[g,v],q&&(T=Ht.inverse(O),t=Ht.calPoint(t,T),e=Ht.calPoint(e,T)),b={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(t[0],",").concat(t[1],"L").concat(e[0],",").concat(t[1],"L").concat(e[0],",").concat(e[1],"L").concat(t[0],",").concat(e[1],"L").concat(t[0],",").concat(t[1])],["fill","#FFF"]]}]},A=_.add(b),R[gl].push(b),Q.push(["clip-path","url(#"+A+")"])),M)return J={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:Q}]},u.__config[gl].push(J),L.forEach(function(t){var e,r=vl(Q);!q||(e=fl.matrixResize(o,a,s,l,t[0],t[1],i,n))&&!Ht.isE(e)&&(r[5][1]="matrix("+ml(Ht.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],J.children.push({type:"img",tagName:"image",props:r})}),_.add(J);u.virtualDom.bb.push({type:"img",tagName:"image",props:Q}),L.forEach(function(t){var e,r=vl(Q);!q||(e=fl.matrixResize(o,a,s,l,t[0],t[1],i,n))&&!Ht.isE(e)&&(r[5][1]="matrix("+ml(Ht.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],u.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}}},Tl=Tt.isFunction;function Rl(t,e,r,i){if(i)for(var n=0;n<e;n++){var o=t[n];o[1]?o[1](r):o.__after&&o.__after(r)}else for(var a=0;a<e;a++){var s=t[a];s[0]?s[0](r):s.__before&&s.__before(r)}}var Ml=new(function(){function t(){_(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return f(t,[{key:"__init",value:function(){var u=this,c=u.task,_=u.taskCp,f=(Rt.cancelAnimationFrame(u.id),u.__now=Rt.now());!function h(){Rt.cancelAnimationFrame(u.id),u.id=Rt.requestAnimationFrame(function(){if(!bl&&(c.length||_.length)){var t=(e=u.__now=Rt.now())-f,t=Math.max(t,0);f=e;for(var e=c.slice(0),r=_.splice(0),i=e.length,n=r.length,o=(Rl(e,i,t,!1),Rl(r,n,t,!1),u.__hookTask.splice(0)),a=0,s=o.length;a<s;a++){var l=o[a];l&&l()}Rl(e,i,t,!0),Rl(r,n,t,!0),(c.length||_.length)&&h()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Tl(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var n=e[r];if(n===t||n.__karasFramecb===t){e.splice(r,1);break}}e.length||(Rt.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=Tl(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){bl=!0}},{key:"resume",value:function(){bl&&(this.__init(),bl=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),Ol=4,Sl=1e-7,Cl=10,Il="function"==typeof Float32Array;function kl(t,e){return 1-3*e+3*t}function wl(t,e,r){return((kl(e,r)*t+(3*r-6*e))*t+3*e)*t}function Dl(t,e,r){return 3*kl(e,r)*t*t+2*(3*r-6*e)*t+3*e}function Ll(t){return t}function Fl(y,e,E,r){if(!(0<=y&&y<=1&&0<=E&&E<=1))throw new Error("bezier x values must be in [0, 1] range");if(y===e&&E===r)return Ll;for(var x=new(Il?Float32Array:Array)(11),t=0;t<11;++t)x[t]=wl(.1*t,y,E);function i(t){for(var e=0,r=1;10!==r&&x[r]<=t;++r)e+=.1;var i=e+.1*((t-x[--r])/(x[r+1]-x[r])),n=Dl(i,y,E);if(.001<=n){for(var u=t,o=i,a=y,s=E,c=0;c<Ol;++c){var _=Dl(o,a,s);if(0===_)return o;o-=(wl(o,a,s)-u)/_}return o}if(0===n)return i;for(var f,l,d=t,h=e,p=e+.1,g=y,v=E,m=0;0<(f=wl(l=h+(p-h)/2,g,v)-d)?p=l:h=l,Math.abs(f)>Sl&&++m<Cl;);return l}return function(t){return 0===t||1===t?t:wl(i(t),e,r)}}var Nl={linear:Fl(1,1,0,0),easeIn:Fl(.42,0,1,1),easeOut:Fl(0,0,.58,1),ease:Fl(.25,.1,.25,1),easeInOut:Fl(.42,0,.58,1),cubicBezier:Fl,getEasing:function(t,e,r,i){return 4===arguments.length?Fl(t,e,r,i):Array.isArray(t)&&4===t.length?Fl(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?n=Fl((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(n=this[t]),n):void 0;var n}},e=(Nl["ease-in"]=Nl.easeIn,Nl["ease-out"]=Nl.easeOut,Nl["ease-in-out"]=Nl.easeInOut,A.STYLE_KEY),Pl=e.FILTER,Bl=e.TRANSFORM_ORIGIN,Hl=e.PERSPECTIVE_ORIGIN,Yl=e.BACKGROUND_CLIP,Gl=e.BACKGROUND_POSITION_X,Wl=e.BACKGROUND_POSITION_Y,Ul=e.BOX_SHADOW,Xl=e.TRANSLATE_X,Vl=e.TRANSLATE_Y,zl=e.TRANSLATE_Z,Kl=e.BACKGROUND_SIZE,jl=e.FONT_SIZE,$l=e.FLEX_BASIS,Zl=e.FLEX_DIRECTION,ql=e.WIDTH,Jl=e.HEIGHT,Ql=e.TOP,th=e.BOTTOM,eh=e.LINE_HEIGHT,rh=e.OPACITY,ih=e.Z_INDEX,nh=e.TRANSFORM,oh=e.COLOR,ah=e.FONT_WEIGHT,sh=e.FONT_STYLE,lh=e.FONT_FAMILY,hh=e.TEXT_ALIGN,uh=e.MATRIX,ch=e.ROTATE_3D,_h=e.TRANSLATE_PATH,fh=e.TEXT_STROKE_COLOR,dh=e.TEXT_STROKE_OVER,mi=A.UPDATE_KEY,ph=mi.UPDATE_NODE,gh=mi.UPDATE_STYLE,vh=mi.UPDATE_KEYS,mh=mi.UPDATE_CONFIG,yi=A.KEY_FRAME_KEY,yh=yi.FRAME_STYLE,Eh=yi.FRAME_TIME,xh=yi.FRAME_EASING,bh=yi.FRAME_TRANSITION,Ii=A.ANIMATE_KEY,Ah=Ii.I_ASSIGNING,Th=Ii.I_IN_FPS,Rh=Ii.I_IS_DELAY,Mh=Ii.I_BEGIN,Oh=Ii.I_END,Sh=Ii.I_FINISHED,Ch=Ii.I_NEXT_END,Ih=Ii.I_FIRST_PLAY,kh=Ii.I_PLAY_CB,wh=Ii.I_TARGET,Dh=Ii.I_ROOT,Lh=Ii.I_FRAMES,Fh=Ii.I_FRAMES_R,Nh=Ii.I_CURRENT_TIME,Ph=Ii.I_NEXT_TIME,Bh=Ii.I_STYLE,Hh=Ii.I_DURATION,Yh=Ii.I_ITERATIONS,Gh=Ii.I_FILL,Wh=Ii.I_PLAYBACK_RATE,Uh=Ii.I_PLAY_COUNT,Xh=Ii.I_PLAY_STATE,Vh=Ii.I_DESTROYED,zh=Ii.I_START_TIME,Kh=Ii.I_FPS_TIME,jh=Ii.I_EASING,$h=Ii.I_ENTER_FRAME,Zh=Ii.I_DELAY,qh=Ii.I_END_DELAY,Jh=Ii.I_KEYS,Qh=Ii.I_ORIGIN_STYLE,tu=Ii.I_CURRENT_FRAMES,eu=Ii.I_CURRENT_FRAME,ru=Ii.I_SPF_LIMIT,iu=Ii.I_FPS,nu=Ii.I_DIRECTION,ou=Ii.I_FIRST_ENTER,au=Ii.I_STAY_BEGIN,su=Ii.I_STAY_END,lu=Ii.I_IS2,hu=Ii.I_END_TIME,uu=Ii.I_NODE_CONFIG,cu=Ii.I_ROOT_CONFIG,_u=Ii.I_OUT_BEGIN_DELAY,fu=Ii.I_TIME_STAMP,du=r.AUTO,pu=r.PX,gu=r.PERCENT,vu=r.INHERIT,mu=r.RGBA,yu=r.STRING,Eu=r.NUMBER,xu=r.REM,bu=r.VW,Au=r.VH,Tu=r.VMAX,Ru=r.VMIN,Mu=r.GRADIENT,Ou=r.calUnit,Su=Tt.isNil,Cu=Tt.isFunction,Iu=Tt.isNumber,ku=Tt.isObject,wu=Tt.clone,Du=Tt.equalArr,Lu=Nl.linear,Fu=bn.cloneStyle,Nu=Mr.isGeom,Pu=Mr.GEOM,Bu=T.COLOR_HASH,Hu=T.LENGTH_HASH,Yu=T.RADIUS_HASH,Gu=T.GRADIENT_HASH,Wu=T.EXPAND_HASH,Uu=T.GRADIENT_TYPE,Xu={};function Vu(t,e,r,i,n){var o={};o[ph]=n,o[gh]=t,o[vh]=e,o[mh]=r[uu],i.__addUpdate(n,r[uu],i,r[cu],o),r[Bh]=t,r[Ah]=!0,i.__frameHook()}function zu(t,e,r,i){return t[1]===pu?e[1]===gu?.01*e[0]*r-t[0]:e[1]===xu?e[0]*i.computedStyle[jl]-t[0]:e[1]===bu?e[0]*i.width*.01-t[0]:e[1]===Au?e[0]*i.height*.01-t[0]:e[1]===Tu?e[0]*Math.max(i.width,i.height)*.01-t[0]:e[1]===Ru?e[0]*Math.min(i.width,i.height)*.01-t[0]:void 0:t[1]===gu?e[1]===pu?100*e[0]/r-t[0]:e[1]===xu?e[0]*i.computedStyle[jl]*100/r-t[0]:e[1]===bu?e[0]*i.width/r-t[0]:e[1]===Au?e[0]*i.height/r-t[0]:e[1]===Tu?e[0]*Math.max(i.width,i.height)/r-t[0]:e[1]===Ru?e[0]*Math.min(i.width,i.height)/r-t[0]:void 0:t[1]===xu?e[1]===pu?e[0]/i.computedStyle[jl]-t[0]:e[1]===gu?.01*e[0]*r/i.computedStyle[jl]-t[0]:e[1]===bu?e[0]*i.width*.01/i.computedStyle[jl]-t[0]:e[1]===Au?e[0]*i.height*.01/i.computedStyle[jl]-t[0]:e[1]===Tu?e[0]*Math.max(i.width,i.height)*.01/i.computedStyle[jl]-t[0]:e[1]===Ru?e[0]*Math.min(i.width,i.height)*.01/i.computedStyle[jl]-t[0]:void 0:t[1]===bu?e[1]===pu?100*e[0]/i.width-t[0]:e[1]===xu?100*e[0]*i.computedStyle[jl]/i.width-t[0]:e[1]===gu?e[0]*r/i.width-t[0]:e[1]===Au?e[0]*i.height/i.width-t[0]:e[1]===Tu?e[0]*Math.max(i.width,i.height)/i.width-t[0]:e[1]===Ru?e[0]*Math.min(i.width,i.height)/i.width-t[0]:void 0:t[1]===Au?e[1]===pu?100*e[0]/i.height-t[0]:e[1]===xu?100*e[0]*i.computedStyle[jl]/i.height-t[0]:e[1]===bu?e[0]*i.width/i.height-t[0]:e[1]===gu?e[0]*r/i.height-t[0]:e[1]===Tu?e[0]*Math.max(i.width,i.height)/i.height-t[0]:e[1]===Ru?e[0]*Math.min(i.width,i.height)/i.height-t[0]:void 0:t[1]===Tu?e[1]===pu?100*e[0]/Math.max(i.width,i.height)-t[0]:e[1]===xu?100*e[0]*i.computedStyle[jl]/Math.max(i.width,i.height)-t[0]:e[1]===gu?e[0]*r/Math.max(i.width,i.height)-t[0]:e[1]===bu?e[0]*i.width/Math.max(i.width,i.height)-t[0]:e[1]===Au?e[0]*i.height/Math.max(i.width,i.height)-t[0]:e[1]===Ru?e[0]*Math.min(i.width,i.height)/Math.max(i.width,i.height)-t[0]:void 0:t[1]===Ru?e[1]===pu?100*e[0]/Math.min(i.width,i.height)-t[0]:e[1]===xu?100*e[0]*i.computedStyle[jl]/Math.min(i.width,i.height)-t[0]:e[1]===gu?e[0]*r/Math.min(i.width,i.height)-t[0]:e[1]===bu?e[0]*i.width/Math.min(i.width,i.height)-t[0]:e[1]===Au?e[0]*i.height/Math.min(i.width,i.height)-t[0]:e[1]===Tu?e[0]*Math.max(i.width,i.height)/Math.min(i.width,i.height)-t[0]:void 0:void 0}function Ku(t,e,r){if(t.k===e.k&&Uu.hasOwnProperty(t.k)){for(var u=t.v,c=e.v,i=[[]],n=Du(u,c),_=0,f=Math.min(u.length,c.length);_<f;_++){var o=u[_],a=c[_],d=[];d.push([a[0][0]-o[0][0],a[0][1]-o[0][1],a[0][2]-o[0][2],a[0][3]-o[0][3]]),o[1]&&a[1]&&(o[1][1]===a[1][1]?d.push(a[1][0]-o[1][0]):(o=zu(o[1],a[1],r.clientWidth,r.root),d.push(o||0))),i[0].push(d)}if("linear"===t.k){var s=Array.isArray(t.d);if(Array.isArray(e.d)!==s)return;if(s){s=[e.d[0]-t.d[0],e.d[1]-t.d[1],e.d[2]-t.d[2],e.d[3]-t.d[3]];if(n&&Du(s,[0,0,0,0]))return;i[1]=s}else{s=e.d-t.d;if(n&&0==s)return;i[1]=s}}else if("radial"===t.k){s=Array.isArray(t.z);if(Array.isArray(e.z)!==s)return;if(i[2]=[],s){if(n&&Du(t.z,e.z))return;for(var p=0;p<5;p++){var g=t.z[p],v=(void 0===g&&(g=1),e.z[p]);void 0===v&&(v=1),i[2].push(v-g)}}else{if(n&&t.z===e.z&&t.s===e.s&&Du(t.p,e.p))return;for(var l=0;l<2;l++){var h=t.p[l],m=e.p[l];h[1]===m[1]?i[2].push(m[0]-h[0]):(h=zu(h,m,r[l?"clientWidth":"clientHeight"],r.root),i[2].push(h||0))}}}else if("conic"===t.k){if(n&&t.d===e.d&&Du(t.p,e.p))return;i[1]=e.d-t.d,i[2]=[];for(var y=0;y<2;y++){var E=t.p[y],x=e.p[y];E[1]===x[1]?i[2].push(x[0]-E[0]):(E=zu(E,x,r[y?"clientWidth":"clientHeight"],r.root),i[2].push(E||0))}}return i}}function ju(e,r,t,i,n){return t.forEach(function(t){t=function(t,e,r,i,u){var n=[r],o=t[r],a=e[r];if(r===nh){if(!o&&!a)return;t=o?o[0][1]:Ht.identity(),e=a?a[0][1]:Ht.identity();return Du(t,e)?void 0:(n[1]=[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8],e[9]-t[9],e[10]-t[10],e[11]-t[11],e[12]-t[12],e[13]-t[13],e[14]-t[14],e[15]-t[15]],n)}if(r===ch){if(Du(o,a))return;n[1]=[a[0]-a[0],a[1]-o[1],a[2]-o[2],[a[3][0]-o[3][0],a[3][1]]]}else if(r===Pl){for(var c=Math.max(o?o.length:0,a?a.length:0),_=[],f=0;f<c;f++){var s=o?o[f]:null,l=a?a[f]:null;if(Su(s)||Su(l)||s[0]!==l[0])_.push(null);else{var d,p=s[0];if("blur"===p)s[1][1]===l[1][1]?_.push(l[1][0]-s[1][0]):(d=zu(s[1],l[1],0,i.root),_.push(d));else if("hueRotate"===p||"saturate"===p||"brightness"===p||"contrast"===p||"sepia"===p||"invert"===p||"grayscale"===p)_.push(l[1][0]-s[1][0]);else if("dropShadow"===p){for(var g=[],v=0;v<4;v++){var m=s[1][v],y=l[1][v];m[1]===y[1]?g.push(y[0]-m[0]):g.push(zu(m,y,1===v?taraget.clientHeight:i.clientWidth,i.root))}g.push([l[1][4][0]-s[1][4][0],l[1][4][1]-s[1][4][1],l[1][4][2]-s[1][4][2],l[1][4][3]-s[1][4][3]]),_.push(g)}}}n[1]=_}else if(r===Bl||r===Hl){n[1]=[];for(var E=0;E<2;E++){var x=o[E],b=a[E];x[1]===b[1]?n[1].push(b[0]-x[0]):(x=zu(x,b,i[E?"outerHeight":"outerWidth"],i.root),n[1].push(x||0))}if(Du(n[1],[0,0]))return}else if(r===Gl||r===Wl){n[1]=[];for(var A=Math.min(o.length,a.length),T=0;T<A;T++){var R=o[T],M=a[T];if(R&&M)if(R[1]===M[1]){var O=M[0]-R[0];if(!O)return void n[1].push(null);n[1].push(O)}else{O=r===Gl?"offsetWidth":"offsetHeight",R=(-1<["padding-box","paddingBox"].indexOf(i.computedStyle[Yl])?O=r===Gl?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[Yl])&&(O=r===Gl?"width":"height"),zu(R,M,i[O],i.root));if(!R)return void n[1].push(null);n[1].push(R)}else n[1].push(null)}}else if(r===Ul){n[1]=[];for(var S=0,C=Math.min(o.length,a.length);S<C;S++){for(var I=o[S],k=a[S],w=[],D=0;D<4;D++)w.push(k[D]-I[D]);for(var L=[],F=0;F<4;F++)L.push(k[4][F]-I[4][F]);w.push(L),n[1].push(w)}}else if(Wu.hasOwnProperty(r))if(o[1]===a[1]){e=a[0]-o[0];if(0==e)return;n[1]=e}else{t=zu(o,a,i[r===Xl||r===zl?"outerWidth":"outerHeight"],i.root);if(!t)return;n[1]=t}else if(r===Kl){n[1]=[];for(var N,P=Math.min(o.length,a.length),B=0;B<P;B++){var H=o[B],Y=a[B];if(H&&Y){for(var G=[],W=0;W<2;W++){var U,X=H[W],V=Y[W];X[1]===V[1]?G.push(V[0]-X[0]):(U=B?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(i.computedStyle[Yl])?U=B?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[Yl])&&(U=B?"width":"height"),X=zu(X,V,i[U],i.root),G.push(X||0))}Du(G,[0,0])?n[1].push(null):(n[1].push(G),N=!0)}else n[1].push(null)}if(!N)return}else if(Gu.hasOwnProperty(r)){n[1]=[];for(var z=Math.min(o.length,a.length),K=0;K<z;K++){var h=o[K],j=a[K];if(h&&j&&h[1]===j[1]){var $=h[1]===Mu,h=h[0],j=j[0],Z=[];if($){$=Ku(h,j,i);if(!$){n[1].push(null);continue}Z=$}else Du(j,h)&&n[1].push(null),Z[0]=[j[0]-h[0],j[1]-h[1],j[2]-h[2],j[3]-h[3]];n[1].push(Z)}else n[1].push(null)}}else if(Bu.hasOwnProperty(r)){if(a[1]!==o[1])return;e=a[1]===Mu,a=a[0],o=o[0];if(e){t=Ku(o,a,i);if(!t)return;n[1]=t}else{if(Du(a,o)||0===a[3]&&0===o[3])return;n[1]=[a[0]-o[0],a[1]-o[1],a[2]-o[2],a[3]-o[3]]}}else if(Yu.hasOwnProperty(r)){if(a[0][0]===o[0][0]&&a[0][1]===o[0][1]&&a[1][0]===o[1][0]&&a[1][1]===o[1][1])return;n[1]=[];for(var q,J=0;J<2;J++)a[J][1]===o[J][1]?n[1].push(a[J][0]-o[J][0]):(q=zu(o[J],a[J],i[J?"outerHeight":"outerWidth"],i.root),n[1].push(q||0))}else if(Hu.hasOwnProperty(r)){if(o[1]===du||a[1]===du)return;var e=i.computedStyle,t=(i.domParent||i).computedStyle,Q=0;if(o[1]===a[1]?Q=a[0]-o[0]:r===eh?Q=zu(o,a,e[jl],i.root):r===jl?Q=zu(o,a,t[jl],i.root):r===$l&&-1<["column","column-reverse","columnReverse"].indexOf(e[Zl])||-1<[Jl,Ql,th].indexOf(r)?o[1]!==du&&a[1]!==du&&(Q=zu(o,a,t[Jl],i.root)):o[1]!==du&&a[1]!==du&&(Q=zu(o,a,t[ql],i.root)),0===Q||isNaN(Q))return;n[1]=Q}else if(Pu.hasOwnProperty(r)){if(Su(o))return;if(Pu[r][u]&&Cu(Pu[r][u].calDiff)){var tt=Pu[r][u].calDiff;if(i.isMulti){for(var et=[],rt=0,it=Math.min(o.length,a.length);rt<it;rt++)et.push(tt(o[rt],a[rt]));return et}n[1]=tt(o,a)}else if(i.isMulti)if("points"===r||"controls"===r){if(Su(a)||!a.length||Su(o)||!o.length||Du(o,a))return;n[1]=[];for(var nt=0,ot=Math.min(o.length,a.length);nt<ot;nt++){var at=o[nt],st=a[nt];if(Su(at)||!at.length||Su(st)||!st.length)n[1].push(null);else{for(var lt=[],ht=0,ut=Math.min(at.length,st.length);ht<ut;ht++){var ct=at[ht],_t=st[ht];if(Su(ct)||Su(_t))lt.push(null);else{for(var ft=[],dt=0,pt=Math.max(ct.length,_t.length);dt<pt;dt++){var gt=ct[dt],vt=_t[dt];Su(gt)||Su(vt)?ft.push(0):ft.push(vt-gt)}lt.push(ft)}}n[1].push(lt)}}}else if("controlA"===r||"controlB"===r){if(Su(a)||!a.length||Su(o)||!o.length||Du(o,a))return;n[1]=[];for(var mt=0,yt=Math.min(o.length,a.length);mt<yt;mt++){var Et=o[mt],xt=a[mt];Su(Et)||!Et.length||Su(xt)||!xt.length?n[1].push(null):n[1].push([xt[0]-Et[0],xt[1]-Et[1]])}}else{if(a===o||Du(a,o)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var bt=[],At=0,Tt=Math.min(o.length,a.length);At<Tt;At++){var Rt=o[At],Mt=a[At];(Su(Rt)||Su(Mt))&&bt.push(0),bt.push(Mt-Rt)}n[1]=bt}else if("points"===r||"controls"===r){if(Su(a)||!a.length||Su(o)||!o.length||Du(o,a))return;n[1]=[];for(var Ot=0,St=Math.min(o.length,a.length);Ot<St;Ot++){var Ct=o[Ot],It=a[Ot];if(Su(Ct)||!Ct.length||Su(It)||!It.length)n[1].push(null);else{for(var kt=[],wt=0,Dt=Math.max(Ct.length,It.length);wt<Dt;wt++){var Lt=Ct[wt],Ft=It[wt];Su(Lt)||Su(Ft)?kt.push(0):kt.push(Ft-Lt)}n[1].push(kt)}}}else if("controlA"===r||"controlB"===r){if(Su(a)||!a.length||Su(o)||!o.length||Du(o,a))return;n[1]=[a[0]-o[0],a[1]-o[1]]}else{if(a===o||"edge"===r||"closure"===r||"booleanOperations"===r)return;n[1]=a-o}}else if(r===rh||r===ih){if(a===o)return;n[1]=a-o}else{if(r!==_h||!o)return;var Nt="offsetWidth",Pt="offsetHeight";-1<["padding-box","paddingBox"].indexOf(i.computedStyle[Yl])?(Nt="clientWidth",Pt="clientHeight"):-1<["content-box","contentBox"].indexOf(i.computedStyle[Yl])&&(Nt="width",Pt="height"),n[1]=o.map(function(t,e){var t=Bt(t,2),r=t[0],t=t[1];return t===gu?e%2==0?[.01*(parseFloat(r)||0)*i[Nt],pu]:[.01*(parseFloat(r)||0)*i[Pt],pu]:t===xu?[(parseFloat(r)||0)*root.computedStyle[jl]*100,pu]:t===bu?[.01*(parseFloat(r)||0)*root.width,pu]:t===Au?[.01*(parseFloat(r)||0)*root.height,pu]:t===Tu?[.01*(parseFloat(r)||0)*Math.max(root.width,root.height),pu]:t===Ru?[.01*(parseFloat(r)||0)*Math.min(root.width,root.height),pu]:[parseFloat(r)||0,pu]})}return n}(e[yh],r[yh],t,i,n);t&&e[bh].push(t)}),r}function $u(t,e,L,F){for(var r,i,n,N=Fu(t[yh],e),P=(e=t[xh],n=e?(n=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(n[1]),i=n[2],function(t){var e;return r&&0<r?(e=1/r,("start"===i?Math.ceil(t/e):Math.floor(t/e))/r):t}):Nl.getEasing(e):n,n&&n!==Lu&&(L=n(L)),t[bh]),o=0,a=P.length;o<a;o++)!function(t){var t=Bt(P[t],2),e=t[0],u=t[1],r=N[e];if(e===nh)for(var r=r||(N[e]=[[uh,Ht.identity()]]),h=0;h<16;h++)r[0][1][h]+=u[h]*L;else if(e===_h){t=1-L;8===u.length?(N[Xl]=[u[0][0]*t*t*t+3*u[2][0]*L*t*t+3*u[4][0]*L*L*t+u[6][0]*L*L*L,pu],N[Vl]=[u[1][0]*t*t*t+3*u[3][0]*L*t*t+3*u[5][0]*L*L*t+u[7][0]*L*L*L,pu]):6===u.length&&(N[Xl]=[u[0][0]*t*t+2*u[2][0]*L*t+u[4][0]*L*L,pu],N[Vl]=[u[1][0]*t*t+3*u[3][0]*L*t+u[5][0]*L*L,pu])}else if(e===ch)r[0]+=u[0]*L,r[1]+=u[1]*L,r[2]+=u[2]*L,r[3][0]+=u[3][0]*L;else if(Xu.hasOwnProperty(e))u&&(r[0]+=u*L);else if(e===Pl){r=r||(N[e]=[]);for(var c=0,_=u.length;c<_;c++){var i,n,f,o=u[c];o&&(n=r[c][0],i=r[c][1],"dropShadow"===n?(i[0][0]+=o[0]*L,i[1][0]+=o[1]*L,i[2][0]+=o[2]*L,i[3][0]+=o[3]*L,n=i[4],f=o[4],n[0]+=f[0]*L,n[1]+=f[1]*L,n[2]+=f[2]*L,n[3]+=f[3]*L):i[0]+=o*L)}}else if(Yu.hasOwnProperty(e))for(var d=0;d<2;d++)r[d][0]+=u[d]*L;else if(e===Bl||e===Hl)0!==u[0]&&(r[0][0]+=u[0]*L),0!==u[1]&&(r[1][0]+=u[1]*L);else if(e===Ul)for(var a=0,p=Math.min(r.length,u.length);a<p;a++){for(var g=0;g<4;g++)r[a][g]+=u[a][g]*L;for(var v=0;v<4;v++)r[a][4][v]+=u[a][4][v]*L}else if(e===Kl)r.forEach(function(t,e){u[e]&&(t[0][0]+=u[e][0]*L,t[1][0]+=u[e][1]*L)});else if(e===Gl||e===Wl)r.forEach(function(t,e){u[e]&&(t[0]+=u[e]*L)});else if(Gu.hasOwnProperty(e))r.forEach(function(t,e){e=u[e];if(e)if(t[1]===Mu&&Uu.hasOwnProperty(t[0].k)){t=t[0];for(var r=Bt(e,4),i=r[0],n=r[1],o=r[2],r=r[3],a=0,s=Math.min(t.v.length,i.length);a<s;a++){var l=t.v[a],h=i[a];l[0][0]+=h[0][0]*L,l[0][1]+=h[0][1]*L,l[0][2]+=h[0][2]*L,l[0][3]+=h[0][3]*L,l[1]&&h[1]&&(l[1][0]+=h[1]*L)}"linear"===t.k&&void 0!==t.d&&void 0!==n&&(Array.isArray(n)?(t.d[0]+=n[0]*L,t.d[1]+=n[1]*L,t.d[2]+=n[2]*L,t.d[3]+=n[3]*L):t.d+=n*L),"radial"===t.k?void 0!==t.z&&void 0!==r?(t.z[0]+=r[0]*L,t.z[1]+=r[1]*L,t.z[2]+=r[2]*L,t.z[3]+=r[3]*L,t.z[4]+=r[4]*L):void 0!==t.p&&void 0!==o&&(t.p[0][0]+=o[0]*L,t.p[1][0]+=o[1]*L):"conic"===t.k&&void 0!==t.d&&void 0!==n&&(t.d+=n*L,t.p[0][0]+=o[0]*L,t.p[1][0]+=o[1]*L)}else{t=t[0];r=e[0];t[0]+=r[0]*L,t[1]+=r[1]*L,t[2]+=r[2]*L,t[3]+=r[3]*L}});else if(Bu.hasOwnProperty(e))(r=r[0])[0]+=u[0]*L,r[1]+=u[1]*L,r[2]+=u[2]*L,r[3]+=u[3]*L;else if(Pu.hasOwnProperty(e)){var s=N[e],t=F.tagName;if(Pu[e][t]&&Cu(Pu[e][t].calIncrease)){var m=Pu[e][t].calIncrease;F.isMulti?N[e]=s.map(function(t,e){return m(t,u[e],L)}):N[e]=m(s,u,L)}else if(F.isMulti)if("points"===e||"controls"===e)for(var y=0,E=Math.min(s.length,u.length);y<E;y++){var x=s[y],b=u[y];if(!Su(x)&&!Su(b))for(var A=0,T=Math.min(x.length,b.length);A<T;A++){var R=x[A],M=b[A];if(!Su(R)&&!Su(M))for(var l=0,O=Math.min(R.length,M.length);l<O;l++)Su(R[l])||Su(M[l])||(R[l]+=M[l]*L)}}else"controlA"===e||"controlB"===e?u.forEach(function(t,e){var r=s[e];if(!Su(t)&&!Su(r))for(var i=0,n=Math.min(r.length,t.length);i<n;i++){var o=r[i],a=t[i];Su(o)||Su(a)||(r[i]+=a*L)}}):u.forEach(function(t,e){Su(t)||Su(s[e])||(s[e]+=t*L)});else if("points"===e||"controls"===e)for(var S=0,C=Math.min(s.length,u.length);S<C;S++){var I=s[S],k=u[S];if(!Su(I)&&!Su(k))for(var w=0,D=Math.min(I.length,k.length);w<D;w++)Su(I[w])||Su(k[w])||(I[w]+=k[w]*L)}else"controlA"===e||"controlB"===e?(Su(s[0])||Su(u[0])||(s[0]+=u[0]*L),Su(s[1])||Su(u[1])||(s[1]+=u[1]*L)):Su(s)||Su(u)||(N[e]+=u*L)}else e!==rh&&e!==ih||(N[e]+=u*L,e===rh&&(N[e]<0?N[e]=0:1<N[e]&&(N[e]=1)))}(o);return N}function Zu(t,e){return Cu(t)&&(e=t,t={}),[t||{},e]}function qu(t,e,r,i){t.emit(Xs.FRAME,r,i),e[Ih]&&(e[Ih]=!1,t.emit(Xs.PLAY));var n=e[kh];Cu(n)&&(n.call(t,r,i),e[kh]===n&&(e[kh]=null))}Object.assign(Xu,Hu),Object.assign(Xu,Wu);var Ju=0,Qu=function(){d(u,Xs);var h=p(u);function u(t,n,e){_(this,u),(r=h.call(this)).__id=Ju++,n=wu(n||[]),n=Array.isArray(n)?n.filter(function(t){return t&&ku(t)}):n&&ku(n)?(o=[],Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(o[r]=o[r]||{offset:r/(i-1)})[t]=e[r]}),o):[],Iu(e)&&(r.__options={duration:e},e=r.__options);var r,o,e=r.__options=e||{duration:0},i=t.root,i=r.__config=[!1,!1,!1,!0,!1,!1,!1,!0,null,t,i,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,e.easing,!1,0,0,null,null,null,null,!1,60,"normal",!0,!1,!1,!1,0,t.__config,i&&i.__config,!1],a=r.iterations=e.iterations,s=r.duration=e.duration,a=Bt(r.__init(n,a,s,e.easing,t),4),s=a[0],t=a[1],l=a[2],a=a[3],l=(i[Lh]=s,i[Fh]=t,i[Jh]=l,i[Qh]=a,2===s.length&&(i[lu]=!0,i[hu]=s[1][Eh]),parseInt(e.fps)||0);return r.fps=l=l<=0?60:l,r.spfLimit=e.spfLimit,r.delay=e.delay,r.endDelay=e.endDelay,r.playbackRate=e.playbackRate,r.fill=e.fill,r.iterations=e.iterations,r.direction=e.direction,i[tu]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(e.direction)?t:s,i[fu]=Ml.__now,r[0]=r.__before,r[1]=r.__after,r}return f(u,[{key:"__init",value:function(i,u,c,_,t){if(i.length<1)return[[],[],[],{}];for(var f=t.tagName,n=0,o=i.length;n<o;n++)!function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),n=--t,o=--e;if(r.offset<=-1)return i.splice(t,1),n=--t,o=--e}Object.keys(r).forEach(function(t){fr.hasOwnProperty(t)&&fr.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Mr.isValid(f,t)||delete r[t]}),n=t,o=e}(n,o);1===i.length?(i[0]=wu(i[0]),1===i[0].offset?i.unshift({offset:0}):((e=wu(i[0])).offset=1,i.push(e))):i.forEach(function(t,e){i[e]=wu(t)});var e=i[0],e=(e.hasOwnProperty("offset")&&0<e.offset?i.unshift(e={offset:0}):e.offset=0,i[i.length-1]);e.hasOwnProperty("offset")&&e.offset<1?i.push(e={offset:1}):e.offset=1;for(var r=1,d=i.length;r<d;r++)if(!(g=i[r]).hasOwnProperty("offset")){for(var p=void 0,a=r+1;a<d&&!(p=i[a]).hasOwnProperty("offset");a++);for(var g=i[r-1],v=(p.offset-g.offset)/(a-r+1),m=r;m<a;m++)i[m].offset=g.offset+v*(m+1-r);r=a}for(var y,s,l,E,x,b,h=[],A=(i.forEach(function(t){var e,r,i,n,o;h.push((e=c,r=_,i=(t=t).offset,n=(n=t).easing,delete t.offset,delete t.easing,o=t.translatePath,t=bn.normalize(t),Array.isArray(o)&&-1<[6,8].indexOf(o.length)&&(t[_h]=o.map(function(t){return Ou(t)})),(o=[])[yh]=t,o[Eh]=i*e,o[xh]=n||r,o[bh]=[],o))}),y=t,s={},l=[],(e=h).forEach(function(t){var e=t[yh];Object.keys(e).forEach(function(t){void 0===e[t]||s.hasOwnProperty(t)||(s[t]=!0,(t=Pu.hasOwnProperty(t)?t:parseInt(t))===_h&&(s.hasOwnProperty(Xl)||l.push(Xl),s.hasOwnProperty(Vl)||l.push(Vl),s[Xl]=s[Vl]=!0),l.push(t))})}),e.forEach(function(t){var e=t[yh];l.forEach(function(t){e.hasOwnProperty(t)&&!Su(e[t])||(Pu.hasOwnProperty(t)?e[t]=y.getProps(t):e[t]=y.currentStyle[t])})}),l),T=(E=A,b=(x=t).computedStyle,h.forEach(function(t){var n=t[yh];E.forEach(function(t){var e,r,i=n[t];Su(i)||(t===nh?(r=x.outerWidth,e=x.outerHeight,r=Vo.calMatrix(i,r,e),n[t]=[[uh,r]]):i[1]===vu&&(t===oh||t===fh?n[t]=[Tt.rgba2int(b[t]),mu]:Hu.hasOwnProperty(t)?n[t]=[b[t],pu]:t===ah?n[t]=[b[t],Eu]:t!==sh&&t!==lh&&t!==hh&&t!==dh||(n[t]=[b[t],yu])))})}),wu(h).reverse()),R=t.style,M=t.props,O={},S=(A.forEach(function(t){Nu(f,t)&&(O[t]=M[t]),O[t]=R[t]}),h.length),C=h[0],I=1;I<S;I++)C=ju(C,h[I],A,t,f);T.forEach(function(t){t[Eh]=c-t[Eh],t[bh]=[]}),C=T[0];for(var k=1;k<S;k++)C=ju(C,T[k],A,t,f);return[h,T,A,O]}},{key:"__clean",value:function(t){var e,r=this.__config,i=(this.__cancelTask(),r[Ph]=0,r[Bh]),n=r[Jh],o=r[wh];if(t){if(r[Nh]=r[Zh]+r[Hh]*r[Yh]+r[qh],"finish"===r[Xh])return;r[Xh]="finish",r[su]||(r[Bh]={},e=!0)}else{if(r[Uh]=r[Nh]=0,"idle"===r[Xh])return;r[Xh]="idle",r[Bh]={},e=!0}e&&n.forEach(function(t){Pu.hasOwnProperty(t)?o.__currentProps[t]===i[t]&&(o.__currentProps[t]=o.props[t]):o.__currentStyle[t]===i[t]&&(o.__currentStyle[t]=o.style[t])})}},{key:"play",value:function(t){var e=this.__config,r=e[Vh],i=e[Hh],n=e[Xh],o=e[Lh];return r||i<=0||o.length<1||"running"===n||(this.__cancelTask(),e[kh]=t,e[Xh]="running",e[Ih]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[$h]||(e[$h]=!0,r=e[Fh],i=e[nu],e[tu]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i)?r:o,e[Nh]=e[Ph]=e[Kh]=0),Ml.onFrame(this),e[zh]=Ml.__now,e[Oh]=!1),this}},{key:"__before",value:function(t){var e=this.__config,u=(e[fu]=Ml.__now,e[wh]),c=e[iu],r=0,i=e[tu],_=e[Yh],f=e[au],d=e[su],p=e[Zh],g=e[Dh],v=e[lu],m=e[hu],y=e[Hh],E=e[qh],x=i.length;h=t,o=(a=e)[Wh],n=a[ru],s=a[iu],b=a[Nh]=a[Ph],n&&(!0===n?h=Math.min(h,1e3/s):0<n&&(h=Math.min(h,n))),1!==o&&0<o&&(h*=o),a[Ph]+=h;var n,o,a,b,s=Bt([b,h],2),l=s[0];if(t=s[1],!e[ou]&&c<60){if((t=e[Kh]+=t)<1e3/c)return void(e[Th]=!0);e[Kh]=0}if(e[ou]=!1,l<p)return f&&Vu((e[eu]=i[0])[yh],e[Jh],e,g,u),e[Mh]=!1,e[_u]=!0,void(e[Rh]=!0);for(l-=p,e[_u]&&(e[_u]=!1,e[Mh]=!0);y<=l&&r<_-1;)l-=y,r++;e[Uh]<r&&(M=e[Mh]=!0),e[Uh]=r,M&&(n=e[nu],o=e[Lh],a=e[Fh],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(n)&&(b=r%2==0,i=e[tu]="alternate"===n?b?o:a:b?a:o));var A,h=_-1<=r,s=v?(A=l<m?0:1,m):i[A=function t(e,r,i,n){var o,a;return e===r?n[e][Eh]>i?e-1:e:(a=n[o=e+(r-e>>1)])[Eh]===i?o:a[Eh]>i?t(e,Math.max(o-1,e),i,n):t(Math.min(o+1,r),r,i,n)}(0,x-1,l,i)][Eh],t=h&&A===x-1,c=0;t||(c=v?l/y:(l-s)/(i[A+1][Eh]-s));var T,R,M,f=i[A];e[eu]=f,t?(p=l<y+E,T=Fu(d?f[yh]:e[Qh],e[Jh]),e[Ch]=!0,p||(e[Uh]++,e[Sh]=!0,Ml.offFrame(this),R=!0,e[Ph]=0)):T=$u(f,e[Jh],c,u),Vu(T,e[Jh],e,g,u),R&&(M=e[kh],this.__clean(!0),M&&(e[kh]=M))}},{key:"__after",value:function(t){var e=this.__config;e[Ah]=!1,e[Th]?e[Th]=!1:(qu(this,e,t,e[Rh]),e[Rh]=!1,e[Mh]&&(e[Mh]=!1,this.emit(Xs.BEGIN,e[Uh])),e[Ch]&&!e[Oh]&&(e[Oh]=!0,this.emit(Xs.END,e[Uh]-1)),e[Sh]&&(e[Mh]=e[Oh]=e[Rh]=e[Sh]=e[Th]=e[$h]=!1,e[Xh]="finished",this.emit(Xs.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[Vh],i=e[Hh],n=this.pending;return r||i<=0||n||(e[Xh]="paused",this.__cancelTask(),t||this.emit(Xs.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[Vh],i=e[Hh],e=e[Xh];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[Vh],n=i[Hh],o=i[Xh],a=i[Lh];if(t||n<=0||a.length<1||"finished"===o||"idle"===o)return r;r.__cancelTask();var s,l=i[Dh],t=i[Qh];return l&&(s=i[su]?(i[eu]=a[a.length-1],a[a.length-1][yh]):t,l.addRefreshTask({__before:function(){i[Ah]=!0,Vu(s,i[Jh],i,l,i[wh]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[Ah]=!1,qu(r,i,t),i[Mh]=i[Oh]=i[Rh]=i[Sh]=i[Th]=i[$h]=!1,r.emit(Xs.FINISH)),Cu(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[Vh],n=i[Hh],o=i[Xh],a=i[Lh];if(t||n<=0||"idle"===o||a.length<1)return r;r.__cancelTask();var s=i[Dh],l=i[Qh];return s&&s.addRefreshTask({__before:function(){i[Ah]=!0,Vu(l,i[Jh],i,s,i[wh]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[Ah]=!1,qu(r,i,t),i[Mh]=i[Oh]=i[Rh]=i[Sh]=i[Th]=i[$h]=!1,r.emit(Xs.CANCEL)),Cu(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,n=i[Vh],o=i[Hh],a=i[Lh],s=i[Zh],i=i[qh];if(n||o<=0||a.length<1)return this;n=Bt(Zu(e,r),2);return e=n[0],r=n[1],this.__goto(t,e.isFrame,e.excludeDelay),o+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,n=this.__config,o=n[Vh],a=n[Hh],s=n[Lh],l=n[Zh],h=n[qh];if(o||a<=0||s.length<1)return this;o=Bt(Zu(e,r),2);return e=o[0],r=o[1],a+l+h<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){n[Xh]="paused",i.__cancelTask(),Cu(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[Bh],i=t[wh];t[Jh].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],Pu.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,n=i[Yh],o=i[Hh];if(i[Xh]="paused",isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=i[Zh]),i[Ph]=t,t-=i[Zh];for(var a=0;o<=t&&a<n-1;)a++,t-=o;i[Uh]=a,i[$h]=!0;var s,e=i[Lh],r=i[Fh],l=i[nu];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(l)&&(s=a%2==0,i[tu]="alternate"===l?s?e:r:s?r:e),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[wh]=t,this.__config[uu]=t.__config}},{key:"__cancelTask",value:function(){Ml.offFrame(this),this.__config[kh]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[Vh]||(e.removeControl(),t?(e.__clean(),r[wh]=null):Ml.nextFrame({__before:function(){e.__clean(),r[wh]=null}}),r[zh]=0,r[Vh]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[Xh]&&"finished"!==t[Xh]&&Rt.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[wh]}},{key:"root",get:function(){return this.__config[Dh]}},{key:"keys",get:function(){return this.__config[Jh]}},{key:"style",get:function(){return this.__config[Bh]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[Hh]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Hh]!==t&&(e[Hh]=t,e[hu]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[Zh]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Zh]!==t&&(e[Zh]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[qh]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[qh]!==t&&(e[qh]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[iu]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[iu]!==t&&(e[iu]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[Yh]},set:function(t){t===1/0||Tt.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[Yh]!==t&&(e[Yh]=t),t}},{key:"fill",get:function(){return this.__config[Gh]},set:function(t){var e=this.__config;return e[Gh]!==(t=t||"none")&&(e[Gh]=t,this.__checkModify()),e[au]={backwards:!0,both:!0}.hasOwnProperty(t),e[su]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[nu]},set:function(t){var e=this.__config;return e[nu]!==(t=t||"normal")&&(e[nu]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[Lh]}},{key:"framesR",get:function(){return this.__config[Fh]}},{key:"playbackRate",get:function(){return this.__config[Wh]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[Wh]!==(t=t<=0?1:t)&&(e[Wh]=t),t}},{key:"easing",get:function(){return this.__config[jh]}},{key:"startTime",get:function(){return this.__config[zh]}},{key:"currentTime",get:function(){return this.__config[Nh]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Nh]!==t&&(e[Nh]=t,e[Ph]=t),t}},{key:"nextTime",get:function(){return this.__config[Ph]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Ph]!==t&&(e[Ph]=t),t}},{key:"timestamp",get:function(){return this.__config[fu]}},{key:"pending",get:function(){return"running"!==this.__config[Xh]}},{key:"finished",get:function(){return"finished"===this.__config[Xh]}},{key:"playState",get:function(){return this.__config[Xh]}},{key:"playCount",get:function(){return this.__config[Uh]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[Uh]!==t&&(e[Uh]=t),t}},{key:"isDestroyed",get:function(){return this.__config[Vh]}},{key:"animating",get:function(){var t=this.__config,e=t[Xh];return"idle"!==e&&("finished"!==e||t[su]||t[au])}},{key:"spfLimit",get:function(){return this.__config[ru]},set:function(t){t=Tt.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[ru]!==t&&(e[ru]=t),t}},{key:"assigning",get:function(){return this.__config[Ah]}}]),u}(),tc=A.NODE_KEY.NODE_DEFS_CACHE,ec=Tt.int2rgba,rc=se.canvasPolygon,ic=se.svgPolygon;var nc={renderBoxShadow:function(u,c,t,_,e,r,f,i,d,p){var g,v,m;e+=n=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,r+=y=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,f+=n,i+=y;var y=(n=Bt(_,6))[0],_=n[1],E=n[2],x=n[3],b=n[4],n=n[5],A=ec(b),o=2*Math.abs(E)+2*Math.abs(x)+2*Math.abs(y)+2*Math.abs(_),a=[[e,r],[f,r],[f,i],[e,i],[e,r]],T=[[e-o,r-o],[e-o,i+o],[f+o,i+o],[f+o,r-o],[e-o,r-o]];if(0<b[3])if(c===et.CANVAS||c===et.WEBGL){if(t.save(),t.beginPath(),"inset"===n){var b=e+y+x,R=r+_+x,s=f+y-x,l=i+_-x,h=[[b,R],[s,R],[s,l],[b,l]],h=ie.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[h[0][0],h[0][1],h[2][0],h[2][1]]);if(!h)return;h=[[h[0],h[1]],[h[2],h[1]],[h[2],h[3]],[h[0],h[3]],[h[0],h[1]]],x?(rc(t,h),rc(t,a.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==A&&(t.fillStyle=A),rc(t,a),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),rc(t,h),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=A,t.shadowBlur=E,rc(t,[[b,R],[s,R],[s,l],[e-o,l],[e-o,i+o],[f+o,i+o],[f+o,r-o],[e-o,r-o],[e-o,l],[b,l],[b,R]])):(rc(t,a),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=y,t.shadowOffsetY=_,t.shadowColor=A,t.shadowBlur=E,rc(t,[[e,r],[f,r],[f,i],[e-o,i],[e-o,i+o],[f+o,i+o],[f+o,r-o],[e-o,r-o],[e-o,i],[e,i],[e,r]]))}else{var h=e+y-x,s=r+_-x,l=f+y+x,b=i+_+x,R=[[h,s],[l,s],[l,b],[h,b]],s=ie.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[R[0][0],R[0][1],R[2][0],R[2][1]]);x?(rc(t,a),rc(t,R.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==A&&(t.fillStyle=A),rc(t,R),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),s&&rc(t,[[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()),rc(t,a),rc(t,R),rc(t,T),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=A,t.shadowBlur=E,rc(t,R)):(rc(t,a),rc(t,T),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=y,t.shadowOffsetY=_,t.shadowColor=A,t.shadowBlur=E,rc(t,a))}t.fill(),t.closePath(),t.restore()}else c===et.SVG&&(l=Cr.outerSize(E),"inset"===n?(n=ie.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[(c=[[h=e+y+x,b=r+_+x],[s=f+y-x,b],[s,R=i+_-x],[h,R]])[0][0],c[0][1],c[2][0],c[2][1]]))&&(n=[[n[0],n[1]],[n[2],n[1]],[n[2],n[3]],[n[0],n[3]],[n[0],n[1]]],x?(u.__config[tc].push(c={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*E],["flood-color",A]]}]}),g=t.add(c),m={tagName:"clipPath",children:[{tagName:"path",props:[["d",ic(n)+ic(a.slice(0).reverse())],["fill","#FFF"]]}]},v=t.add(m),u.__config[tc].push(m),u.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ic(a)],["fill",A],["clip-path","url(#"+v+")"]]}),c={tagName:"clipPath",children:[{tagName:"path",props:[["d",ic(n)],["fill","#FFF"]]}]},v=t.add(c),u.__config[tc].push(c),u.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ic([[h,b],[s,b],[s,R],[e-o,R],[e-o,i+o],[f+o,i+o],[f+o,r-o],[e-o,r-o],[e-o,R],[h,R],[h,b]])],["fill","#FFF"],["filter","url(#"+g+")"],["clip-path","url(#"+v+")"]]})):(n=t.add(m={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",y],["dy",_],["stdDeviation",.5*E],["flood-color",A]]}]}),u.__config[tc].push(m),m={tagName:"clipPath",children:[{tagName:"path",props:[["d",ic(a)],["fill","#FFF"]]}]},c=t.add(m),u.__config[tc].push(m),u.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ic([[e,r],[f,r],[f,i],[e-o,i],[e-o,i+o],[f+o,i+o],[f+o,r-o],[e-o,r-o],[e-o,i],[e,i],[e,r]])],["fill","#FFF"],["filter","url(#"+n+")"],["clip-path","url(#"+c+")"]]}))):(v=ie.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[(g=[[s=e+y-x,R=r+_-x],[h=f+y+x,R],[h,b=i+_+x],[s,b]])[0][0],g[0][1],g[2][0],g[2][1]]),x?(o=t.add(m={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*E],["flood-color",A]]}]}),u.__config[tc].push(m),m={tagName:"clipPath",children:[{tagName:"path",props:[["d",ic(a)+ic(g.slice(0).reverse())],["fill","#FFF"]]}]},n=t.add(m),u.__config[tc].push(m),u.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ic(g)],["fill",A],["clip-path","url(#"+n+")"]]}),m={tagName:"clipPath",children:[{tagName:"path",props:[["d",(v?ic([[v[0],v[1]],[v[2],v[1]],[v[2],v[3]],[v[0],v[3]],[v[0],v[1]]].reverse()):"")+ic(a)+ic(g)+ic(T)],["fill","#FFF"]]}]},n=t.add(m),u.__config[tc].push(m),u.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ic(g)],["fill","#FFF"],["filter","url(#"+o+")"],["clip-path","url(#"+n+")"]]})):(e=t.add(c={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",y],["dy",_],["stdDeviation",.5*E],["flood-color",A]]}]}),u.__config[tc].push(c),c={tagName:"clipPath",children:[{tagName:"path",props:[["d",ic(a)+ic(T)],["fill","#FFF"]]}]},r=t.add(c),u.__config[tc].push(c),u.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",ic(a)],["fill","#FFF"],["filter","url(#"+e+")"],["clip-path","url(#"+r+")"]]}))))}},oc={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,colorDodge:!0,colorBurn:!0,hardLight:!0,softLight:!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};var xi=function(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})},Ai=function(t){return oc.hasOwnProperty(t)},ac=se.svgPolygon,sc=et.CANVAS,lc=et.SVG,hc=et.WEBGL,uc=Ma.LOCAL,cc=A.STYLE_KEY,_c=A.STYLE_RV_KEY,fc=A.style2Upper,n=A.STYLE_KEY,dc=n.BORDER_TOP_LEFT_RADIUS,pc=n.BORDER_TOP_RIGHT_RADIUS,gc=n.BORDER_BOTTOM_LEFT_RADIUS,vc=n.BORDER_BOTTOM_RIGHT_RADIUS,mc=n.PADDING_LEFT,yc=n.PADDING_RIGHT,Ec=n.PADDING_TOP,xc=n.PADDING_BOTTOM,bc=n.MARGIN_LEFT,Ac=n.MARGIN_TOP,Tc=n.MARGIN_BOTTOM,Rc=n.MARGIN_RIGHT,Mc=n.BORDER_LEFT_WIDTH,Oc=n.BORDER_TOP_WIDTH,Sc=n.BORDER_BOTTOM_WIDTH,Cc=n.BORDER_RIGHT_WIDTH,Ic=n.TOP,kc=n.RIGHT,wc=n.BOTTOM,Dc=n.LEFT,Lc=n.POSITION,Fc=n.DISPLAY,Nc=n.WIDTH,Pc=n.HEIGHT,Bc=n.MATRIX,Hc=n.TRANSLATE_X,Yc=n.TRANSLATE_Y,Gc=n.TRANSLATE_Z,Wc=n.TRANSFORM,Uc=n.SCALE_X,Xc=n.SCALE_Y,Vc=n.SCALE_Z,zc=n.ROTATE_X,Kc=n.ROTATE_Y,jc=n.ROTATE_Z,$c=n.SKEW_X,Zc=n.SKEW_Y,qc=n.PERSPECTIVE,Jc=n.PERSPECTIVE_ORIGIN,Qc=n.ROTATE_3D,t_=n.TRANSFORM_ORIGIN,e_=n.BACKGROUND_POSITION_X,r_=n.BACKGROUND_POSITION_Y,i_=n.BACKGROUND_SIZE,n_=n.BACKGROUND_COLOR,o_=n.BACKGROUND_IMAGE,a_=n.BACKGROUND_REPEAT,s_=n.BOX_SHADOW,l_=n.OPACITY,h_=n.Z_INDEX,u_=n.BORDER_TOP_STYLE,c_=n.BORDER_RIGHT_STYLE,__=n.BORDER_BOTTOM_STYLE,f_=n.BORDER_LEFT_STYLE,d_=n.FILTER,p_=n.OVERFLOW,g_=n.MIX_BLEND_MODE,v_=n.TEXT_OVERFLOW,m_=n.BORDER_TOP_COLOR,y_=n.BORDER_BOTTOM_COLOR,E_=n.BORDER_LEFT_COLOR,x_=n.BORDER_RIGHT_COLOR,b_=n.FONT_STYLE,A_=n.COLOR,T_=n.VISIBILITY,R_=n.POINTER_EVENTS,M_=n.BORDER_TOP,O_=n.BORDER_RIGHT,S_=n.BORDER_BOTTOM,C_=n.BORDER_LEFT,I_=n.BACKGROUND_CLIP,k_=n.FONT_SIZE,w_=n.FONT_FAMILY,D_=n.LINE_HEIGHT,L_=n.TEXT_STROKE_COLOR,F_=n.TEXT_STROKE_WIDTH,N_=n.TEXT_STROKE_OVER,P_=n.FONT_WEIGHT,B_=n.FLEX_DIRECTION,H_=n.JUSTIFY_CONTENT,Y_=n.ALIGN_ITEMS,G_=n.ALIGN_SELF,W_=n.FLEX_GROW,U_=n.FLEX_SHRINK,X_=n.LINE_CLAMP,V_=n.ORDER,z_=n.FLEX_WRAP,K_=n.ALIGN_CONTENT,j_=n.TEXT_ALIGN,$_=n.LETTER_SPACING,Z_=n.WHITE_SPACE,q_=n.WRITING_MODE,bi=A.UPDATE_KEY,J_=bi.UPDATE_NODE,Q_=bi.UPDATE_FOCUS,tf=bi.UPDATE_STYLE,ef=bi.UPDATE_OVERWRITE,rf=bi.UPDATE_KEYS,nf=bi.UPDATE_CONFIG,of=bi.UPDATE_REMOVE_DOM,af=A.STRUCT_KEY.STRUCT_HAS_MASK,Oi=A.NODE_KEY,sf=Oi.NODE_TAG_NAME,lf=Oi.NODE_CACHE_STYLE,hf=Oi.NODE_CURRENT_STYLE,uf=Oi.NODE_COMPUTED_STYLE,cf=Oi.NODE_STYLE,_f=Oi.NODE_STRUCT,ff=Oi.NODE_OPACITY,df=Oi.NODE_MATRIX_EVENT,pf=Oi.NODE_MATRIX,gf=Oi.NODE_LIMIT_CACHE,vf=Oi.NODE_HAS_CONTENT,mf=Oi.NODE_REFRESH_LV,yf=Oi.NODE_CACHE,Ef=Oi.NODE_CACHE_TOTAL,xf=Oi.NODE_CACHE_FILTER,bf=Oi.NODE_CACHE_MASK,Af=Oi.NODE_CACHE_OVERFLOW,Tf=Oi.NODE_IS_DESTROYED,Rf=Oi.NODE_DEFS_CACHE,Mf=Oi.NODE_DOM_PARENT,Of=Oi.NODE_IS_INLINE,Sf=Oi.NODE_PERSPECTIVE_MATRIX,Cf=Oi.NODE_IS_MASK,If=Oi.NODE_VIRTUAL_DOM,kf=Oi.NODE_CACHE_AS_BITMAP,wf=r.AUTO,Df=r.PX,Lf=r.PERCENT,Ff=r.INHERIT,Nf=r.NUMBER,Pf=r.RGBA,Bf=r.STRING,Hf=r.REM,Yf=r.VW,Gf=r.VH,Wf=r.VMAX,Uf=r.VMIN,Xf=r.DEG,Vf=r.GRADIENT,zf=Tt.int2rgba,Kf=Tt.rgba2int,jf=Tt.joinArr,$f=Tt.isNil,Zf=Tt.isFunction,qf=bn.calRelative,Jf=bn.getFontFamily,Qf=bn.calNormalLineHeight,t0=bn.spreadBoxShadow,e0=bn.spreadFilter,r0=Mr.GEOM,i0=xi,n0=Ai,o0=Ht.point2d,a0=Na.contain,s0=Na.NONE,l0=Na.TRANSFORM,h0=Na.REFLOW,u0=Na.REPAINT,c0=Na.TRANSLATE_X,_0=Na.TRANSLATE_Y,f0=Na.TRANSLATE_Z;function d0(t){for(var e=0,r=t.flowChildren,i=r.length,n=0;n<i;n++){var o=r[n];if(!(o instanceof p0||o instanceof Zs&&o.shadowRoot instanceof p0))break;if(o.flowChildren&&o.flowChildren.length){e+=d0(o);break}o.__config[Of]&&(e+=o.outerWidth)}return e}var p0=function(){d(o,k);var n=p(o);function o(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=(_(this,o),r=n.call(this),Array.isArray(e)?r.props=Tt.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[],r.__isClip=!!r.props.clip),e=r.__isMask=e||!!r.props.mask,i=r.__config;return i[sf]=t,i[lf]=r.__cacheStyle,i[hf]=r.__currentStyle,i[uf]=r.__computedStyle,i[mf]=h0,i[cf]=r.__style,i[pf]=[],i[df]=[],i[Rf]=r.__cacheDefs,i[Cf]=e,r.__frameAnimateList=[],r.__contentBoxList=[],i[kf]=r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r.__layoutData=null,r.__hasComputeReflow=!1,r.__parentLineBox=null,r}return f(o,[{key:"__structure",value:function(t,e,r){t=N(F(o.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(t[af]=this.__hasMask),this.__config[_f]=t}},{key:"__mp",value:function(r,i,n){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=cc[fc("margin"+t)],t=cc[fc("padding"+t)];i[e]=o.__calSize(r[e],n,!0),i[t]=o.__calSize(r[t],n,!0)})}},{key:"__calSize",value:function(t,e,r){return t[1]===Df?t[0]:t[1]===Lf&&r?t[0]*e*.01:t[1]===Hf?t[0]*this.root.computedStyle[k_]:t[1]===Yf?t[0]*this.root.width*.01:t[1]===Gf?t[0]*this.root.height*.01:t[1]===Wf?t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===Uf?t[0]*Math.min(this.root.width,this.root.height)*.01:0}},{key:"__computeReflow",value:function(){var r=this;if(!this.__hasComputeReflow){this.__hasComputeReflow=!0;var i=this.currentStyle,n=this.computedStyle,t=this.domParent,o=!t,a=t&&t.computedStyle,e=([k_,w_,P_,q_].forEach(function(t){var e=i[t];t===w_?e[1]===Ff?n[t]=Jf(o?Dt.INHERIT[_c[t]]:a[t]):n[t]=Jf(e[0]):e[1]===Ff?n[t]=o?Dt.INHERIT[_c[t]]:a[t]:e[1]===Lf?n[t]=o?Dt.INHERIT[_c[t]]:a[t]*e[0]*.01:e[1]===Hf?n[t]=o?Dt.INHERIT[_c[t]]:r.root.computedStyle[k_]*e[0]:e[1]===Yf?n[t]=o?Dt.INHERIT[_c[t]]:.01*r.root.width*e[0]:e[1]===Gf?n[t]=o?Dt.INHERIT[_c[t]]:.01*r.root.height*e[0]:e[1]===Wf?n[t]=o?Dt.INHERIT[_c[t]]:.01*Math.max(r.root.width,r.root.height)*e[0]:e[1]===Uf?n[t]=o?Dt.INHERIT[_c[t]]:.01*Math.min(r.root.width,r.root.height)*e[0]:n[t]=e[0]}),[Oc,Cc,Sc,Mc].forEach(function(t){var e=i[t];n[t]=r.__calSize(e,0,!1)}),[Lc,Fc,B_,H_,Y_,G_,W_,U_,X_,V_,z_,K_,p_,v_].forEach(function(t){n[t]=i[t]}),a&&n[q_]!==a[q_]&&"inline"===n[Fc]&&(n[Fc]="inlineBlock"),("absolute"===n[Lc]||a&&"flex"===a[Fc])&&-1===["block","flex"].indexOf(n[Fc])&&(n[Fc]="block"),i[j_]),e=(e[1]===Ff?n[j_]=o?"left":a[j_]:n[j_]=e[0],n[k_]),s=i[D_];if(s[1]===Ff)if(o)n[D_]=Qf(n,null);else{for(var l,h=t;h&&(l=h.currentStyle[D_])[1]===Ff;)h=h.domParent;-1<[wf,Ff].indexOf(l[1])?n[D_]=Qf(n,null):l[1]===Nf?n[D_]=Math.max(l[0],0)*e:n[D_]=a[D_]}else s[1]===Nf?n[D_]=Math.max(s[0],0)*e||Qf(n,null):(t=Math.max(this.__calSize(s,e,!0),0),n[D_]=t||Qf(n,null));s=i[$_],t=(s[1]===Ff?n[$_]=o?0:a[$_]:n[$_]=this.__calSize(s,e,!0),i[Z_]);t[1]===Ff?n[Z_]=o?"normal":a[Z_]:n[Z_]=t[0]}}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;$f(t)||(this.__width=r[Nc]=t,this.__clientWidth=t+=r[mc]+r[yc],this.__offsetWidth=t+=r[Mc]+r[Cc],this.__outerWidth=t+r[bc]+r[Rc]),$f(e)||(this.__height=r[Pc]=e,this.__clientHeight=e+=r[Ec]+r[xc],this.__offsetHeight=e+=r[Oc]+r[Sc],this.__outerHeight=e+r[Ac]+r[Tc])}},{key:"__addMBP",value:function(t,e,r,i,n,o){var a,s=r[bc],l=r[Ac],h=r[Rc],u=r[Tc],c=r[mc],_=r[Ec],f=r[yc],r=r[xc],d=i[Oc],p=i[Cc],g=i[Sc],i=i[Mc],v=this.__calSize(s,e,o)+this.__calSize(h,e,o)+this.__calSize(c,e,o)+this.__calSize(f,e,o)+i+p;return n=t?n.map(function(t){return t+v}):(a=this.__calSize(l,e,o)+this.__calSize(u,e,o)+this.__calSize(_,e,o)+this.__calSize(r,e,o)+d+g,n.map(function(t){return t+a}))}},{key:"__layout",value:function(t,e,r,i){this.__computeReflow();var n=t.w,o=this.isDestroyed,a=this.currentStyle,s=this.computedStyle,u=this.__config,l=(this.__ellipsis&&(this.__ellipsis=null),this.__parentLineBox=null,this.__isIbFull=!1,s[Fc]),c=s[Lc];if(this.__layoutData={x:t.x,y:t.y,w:n,h:t.h,lx:t.lx,ly:t.ly,isVertical:t.isVertical},!e&&!r&&!i){this.clearCache(),u[mf]=h0,u[gf]=!1,u[Of]=!1;var h=this.next;if(!this.isMask&&h&&h.isMask){for(var _=0;h&&h.isMask;)_++,h=h.next;this.__hasMask=_}}if(this.__ox=this.__oy=0,o||"none"===l)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=s[Nc]=s[Pc]=0,this.__x=t.x,this.__y=t.y,this.__layoutNone(),void(this.__hasComputeReflow=!1);"absolute"!==c&&this.__mp(a,s,n);o=t.lineClampCount||0;return"flex"===l?(t.lineClampCount=0,this.__layoutFlex(t,e,r,i)):"inlineBlock"===l?(t.lineClampCount=0,this.__layoutInline(t,e,r,i)):"inline"===l?o=this.__layoutInline(t,e,r,i,!0):(t.lineClampCount=0,this.__layoutBlock(t,e,r,i)),e||r||i||("relative"===c?(n=a[Ic],l=a[kc],t=a[wc],e=a[Dc],r=this.parent,n[1]!==wf?(i=qf(a,Ic,n,r),this.__offsetY(i),s[Ic]=i,s[wc]="auto"):t[1]!==wf?(n=qf(a,wc,t,r),this.__offsetY(-n),s[wc]=n,s[Ic]="auto"):s[Ic]=s[wc]="auto",e[1]!==wf?(i=qf(a,Dc,e,r,!0),this.__offsetX(i),s[Dc]=i,s[kc]="auto"):l[1]!==wf?(t=qf(a,kc,l,r,!0),this.__offsetX(-t),s[kc]=t,s[Dc]="auto"):s[Dc]=s[kc]="auto"):"absolute"!==c&&(s[Ic]=s[wc]=s[Dc]=s[kc]="auto"),n=this.__sx=this.x+this.ox,e=this.__sy=this.y+this.oy,u[Of]||(n=this.__sx1=n+s[bc],n=this.__sx2=n+s[Mc],n=this.__sx3=n+s[mc],n=this.__sx4=n+this.width,n=this.__sx5=n+s[yc],this.__sx6=n+s[Cc],e=this.__sy1=e+s[Ac],e=this.__sy2=e+s[Oc],e=this.__sy3=e+s[Ec],e=this.__sy4=e+this.height,e=this.__sy5=e+s[xc],this.__sy6=e+s[Sc]),s[Nc]=this.width,s[Pc]=this.height,"absolute"!==c&&this.__execAr(),this.__hasComputeReflow=!1),o}},{key:"__execAr",value:function(){var t,e=this.__animateRecords;e&&(this.__animateRecords=null,e.list.forEach(function(t){t.target.vd instanceof o&&(t.target=t.target.vd)}),t=e.controller||this.root.animateController,e.options&&!1===e.options.autoPlay?(t.__records2=t.__records2.concat(e.list),t.init(t.__records2,t.list2)):(t.__records=t.__records.concat(e.list),t.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[Fc]="none",t[Ac]=t[Rc]=t[Tc]=t[bc]=t[Oc]=t[Cc]=t[Sc]=t[Mc]=t[Ec]=t[yc]=t[xc]=t[mc]=t[Nc]=t[Pc]=this.__width=this.__height=0}},{key:"__preLayout",value:function(t,e){var r,i,n=t.x,o=t.y,a=t.w,s=t.h,u=t.w2,c=t.h2,_=t.w3,f=t.h3,d=t.lx,p=t.ly,g=t.lineBoxManager,v=t.endSpace,v=void 0===v?0:v,m=t.isVertical,l=(this.__x=n,this.__y=o,this.currentStyle),h=this.computedStyle,y=l[Nc],l=l[Pc],E=h[Oc],x=h[Cc],b=h[Sc],A=h[Mc],T=h[Ac],R=h[Rc],M=h[Tc],O=h[bc],S=h[Ec],C=h[yc],I=h[xc],k=h[mc],h=0===h[q_].indexOf("vertical"),u=(void 0!==u?(r=!0,a=u):void 0!==_?(r=!0,a=_):y[1]===wf||e||(a=this.__calSize(y,a,r=!0)),void 0!==c?(i=!0,s=c):void 0!==f?(i=!0,s=f):l[1]===wf||e||(s=this.__calSize(l,s,i=!0)),e?h?o+=E+T+S:n+=A+O+k:(n+=A+O+k,o+=E+T+S),t.x=n,t.y=o,0);return e||(y[1]!==wf&&void 0===_||(a-=A+x+O+R+k+C),l[1]!==wf&&void 0===f||(s-=E+b+T+M+S+I)),{fixedWidth:r,fixedHeight:i,x:n,y:o,w:a,h:s,lx:d,ly:p,lineBoxManager:g,endSpace:v,selfEndSpace:u=e?h?I+b+M:C+x+R:u,isParentVertical:m,isVertical:h}}},{key:"__marginAuto",value:function(t,e,r){var i=t[Lc],n=t[Fc],o=t[Ac],a=t[Tc],s=t[bc],l=t[Rc],h=t[Nc],t=t[Pc];"absolute"===i||"block"!==n&&"flex"!==n||(r?t[1]===wf&&!this.isReplaced||o[1]!==wf||a[1]!==wf||(i=this.outerHeight)<e.h&&this.__offsetY(.5*(e.h-i),!0):h[1]===wf&&!this.isReplaced||s[1]!==wf||l[1]!==wf||(n=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-n),!0))}},{key:"__calMatrix",value:function(t,e,i,n,r,u,c,o,a){var _=this;if(r[Of])return n[t_]=[u,c],e[Bc]=Ht.identity();var s,f,d,p,l,h,r=e[Bc];return r&&t<h0&&!a0(t,l0)?(f=h=s=0,a0(t,c0)&&(l=i[Hc],s=(l=$f(l)?0:this.__calSize(l,this.offsetWidth,!0))-(n[Hc]||0),n[Hc]=l,n[Wc][12]+=s,r[12]+=s),a0(t,_0)&&(l=i[Yc],h=(l=$f(l)?0:this.__calSize(l,this.offsetHeight,!0))-(n[Yc]||0),n[Yc]=l,n[Wc][13]+=h,r[13]+=h),a0(t,f0)&&(s=i[Gc],f=(s=$f(s)?0:this.__calSize(s,this.offsetWidth,!0))-(n[Gc]||0),n[Gc]=s,n[Wc][14]+=f,r[14]+=f),e[Bc]=r):(void 0===u&&(u=this.__sx1,c=this.__sy1,o=this.offsetWidth,a=this.offsetHeight),void 0===e[t_]&&(e[t_]=!0,r=null,n[t_]=i[t_].map(function(t,e){return _.__calSize(t,e?a:o,!0)})),void 0!==e[Wc]&&void 0!==e[Hc]&&void 0!==e[Yc]&&void 0!==e[Gc]&&void 0!==e[zc]&&void 0!==e[Kc]&&void 0!==e[jc]&&void 0!==e[Qc]&&void 0!==e[Uc]&&void 0!==e[Xc]&&void 0!==e[Vc]&&void 0!==e[$c]&&void 0!==e[Zc]||(e[Wc]=e[Hc]=e[Yc]=e[Gc]=e[zc]=e[Kc]=e[jc]=e[Uc]=e[Xc]=e[Vc]=e[$c]=e[Zc]=!0,r=null,i[Wc]?d=Vo.calMatrix(i[Wc],o,a,this.root):(p=[],[Hc,Yc,Gc,zc,Kc,jc,Qc,$c,Zc,Uc,Xc,Vc].forEach(function(t){delete n[t];var e=i[t];if(!$f(e)){if(t===Qc)return n[t]=[e[0],e[1],e[2],e[3][0]],0===e[3][0]?void 0:void p.push([t,e]);n[t]=e[0];var r=t===Uc||t===Xc||t===Vc;1===e[0]&&r||!r&&0===e[0]||(r=t===Hc||t===Gc?o:a,n[t]=_.__calSize(e,r,!0),p.push([t,e]))}}),p.length&&(d=Vo.calMatrix(p,o,a,this.root))),n[Wc]=d||Ht.identity()),r||(l=n[Wc],(h=n[t_].slice(0))[0]+=u||0,h[1]+=c||0,r=e[Bc]=Vo.calMatrixByOrigin(l,h))),r}},{key:"__calCache",value:function(u,c,t,o,e,n,_,f,r,d,p,g,v,m,y,E,x,b,A,T,i,a,R,M,O,S,C,I,k,w){var s=this,l=A,h=O,D=M,L=w,F=n[I_]=e[I_],N=("paddingBox"===F?(l=T,h=S,D=R,L=k):"contentBox"===F&&(l=i,h=C,D=a,L=I),this.__config[Of]),P=(N&&!this.contentBoxList.length&&(N=!1),[l_,h_,u_,c_,__,f_,a_,p_,g_,v_,I_].forEach(function(t){n[t]=e[t]}),$f(o[d_])&&(o[d_]=!0,this.__calFilter(e,n)),$f(o[e_])&&(o[e_]=!0,F=e[e_],n[e_]=(F||[]).map(function(t){return t[1]===Lf?t[0]+"%":s.__calSize(t,D-l,!0)})),$f(o[r_])&&(o[r_]=!0,i=e[r_],n[r_]=(i||[]).map(function(t){return t[1]===Lf?t[0]+"%":s.__calSize(t,L-h,!0)})),$f(o[i_])&&(o[i_]=!0,n[i_]=(e[i_]||[]).map(function(t){if(Array.isArray(t))return t.map(function(t,e){return t[1]===wf?-1:t[1]===Bf?"contain"===t[0]?-2:-3:s.__calSize(t,e?L-h:D-l,!0)})})),$f(o[o_])&&(C=e[o_],n[o_]=C.map(function(t){return t?t[0]:null}),o[o_]=C.map(function(t,e){return t?t[1]===Bf?(r=s.__loadBgi[e]=s.__loadBgi[e]||{},(e=Rt.IMG[t[0]])&&e.state===Rt.LOADED?(r.url=t[0],r.source=e.source,r.width=e.width,r.height=e.height):r.url!==t[0]&&(r.url=t[0],r.source=null,n=(i=s).root,Rt.measureImg(t[0],function(t){t.success&&t.url===r.url&&!s.isDestroyed&&(r.source=t.source,r.width=t.width,r.height=t.height,n.delRefreshTask(r.cb),n.addRefreshTask(r.cb={__before:function(){o[o_]=void 0;var t={};t[J_]=i,t[Q_]=u0,t[nf]=i.__config,n.__addUpdate(i,i.__config,n,n.__config,t)}}))},{ctx:c,root:n,width:D-l,height:L-h})),!0):!(N||!t[0]||t[1]!==Vf)||void 0:null;var r,i,n})),$f(o[s_])&&(o[s_]=!0,n[s_]=(e[s_]||[]).map(function(t){return t.map(function(t,e){return 3<e?t:s.__calSize(t,0===e?D-l:L-h,!0)})})),[n_,m_,x_,y_,E_].forEach(function(t){$f(o[t])&&(o[t]=zf(n[t]=e[t][0]))}),($f(o[dc])||$f(o[pc])||$f(o[vc])||$f(o[gc]))&&(o[dc]=o[pc]=o[vc]=o[gc]=!0,N?Ve.calBorderRadiusInline(this.contentBoxList,e,n,this.root):Ve.calBorderRadius(r,d,e,n,this.root)),n[dc]),B=n[pc],H=n[vc],Y=n[gc],a=(["Top","Right","Bottom","Left"].forEach(function(t){var e,r=cc[fc(t="border"+t)],i=cc[fc(t+"Width")],t=cc[fc(t+"Style")];$f(o[i])&&(o[i]=!0,o[r]=void 0),$f(o[t])&&(o[t]=!0,o[r]=void 0),$f(o[r])&&(r===M_?0<p?N||(i=Math.atan(p/m),e=Math.atan(p/g),o[r]=Ve.calPoints(p,n[t],i,e,A,T,R,M,O,S,k,w,0,P,B)):o[r]=[]:r===O_?0<g?N||(i=Math.atan(g/p),e=Math.atan(g/v),o[r]=Ve.calPoints(g,n[t],i,e,A,T,R,M,O,S,k,w,1,B,H)):o[r]=[]:r===S_?0<v?N||(i=Math.atan(v/m),e=Math.atan(v/g),o[r]=Ve.calPoints(v,n[t],i,e,A,T,R,M,O,S,k,w,2,Y,H)):o[r]=[]:r===C_&&(0<m?N||(i=Math.atan(m/p),e=Math.atan(m/v),o[r]=Ve.calPoints(m,n[t],i,e,A,T,R,M,O,S,k,w,3,P,Y)):o[r]=[]))}),t&&t.computedStyle),I=(e[b_][1]===Ff?n[b_]=t?a[b_]:"normal":$f(o[b_])&&(n[b_]=e[b_][0]),o[b_]=n[b_],e[A_]),i=(I[1]===Ff?(F=n[A_]=t?a[A_]:[0,0,0,1]).k?o[A_]=F:o[A_]=zf(n[A_]):$f(o[A_])&&(I[1]===Vf?o[A_]=n[A_]=I[0]:I[1]===Pf&&(o[A_]=zf(n[A_]=Kf(I[0])))),e[L_]);return i[1]===Ff?(C=n[L_]=t?a[L_]:[0,0,0,1]).k?o[L_]=C:o[L_]=zf(n[L_]):$f(o[L_])&&(i[1]===Vf?o[L_]=n[L_]=i[0]:i[1]===Pf&&(o[L_]=zf(n[L_]=Kf(i[0])))),e[F_][1]===Ff?(n[F_]=t?a[F_]:0,o[F_]=!0):$f(o[F_])&&(r=(r=e[F_])[1]===Hf?r[0]*this.root.computedStyle[k_]:r[1]===Yf?r[0]*this.root.width*.01:r[1]===Gf?r[0]*this.root.height*.01:r[1]===Wf?r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===Uf?r[0]*Math.min(this.root.width,this.root.height)*.01:r[0],n[F_]=r,o[F_]=!0),e[N_][1]===Ff?o[N_]=n[N_]=t?a[N_]:"none":o[N_]=n[N_]=e[N_][0],e[T_][1]===Ff?n[T_]=t?a[T_]:"visible":$f(o[T_])&&(n[T_]=e[T_][0]),o[T_]=n[T_],e[R_][1]===Ff?n[R_]=t?a[R_]:"auto":$f(o[R_])&&(n[R_]=e[R_][0]),o[R_]=n[R_],this.__bx1=l,this.__bx2=D,this.__by1=h,this.__by2=L,[l,h,D,L]}},{key:"__calPerspective",value:function(t,e,r,i,n,o){var a,s,l=this;$f(t[qc])&&(a=t[qc]=!0,s=e[qc],s=this.__calSize(s,this.clientWidth,!0),r[qc]=s),$f(t[Jc])&&(a=t[Jc]=!0,r[Jc]=e[Jc].map(function(t,e){return l.__calSize(t,e?l.offsetHeight:l.offsetWidth,!0)})),a&&(void 0===n&&(n=this.__sx1,o=this.__sy1),(s=r[Jc].slice(0))[0]+=n||0,s[1]+=o||0,i[Sf]=Vo.calPerspectiveMatrix(r[qc],s))}},{key:"__calFilter",value:function(t,e){var r=this;return e[d_]=(t[d_]||[]).map(function(t){var t=Bt(t,2),e=t[0],t=t[1];return"dropShadow"!==e?[e,t=t[1]===Xf||t[1]===Lf||t[1]===Nf?t[0]:r.__calSize(t,r.root.width,!1)]:[e,t.map(function(t,e){return 3<e?t:r.__calSize(t,0===e?r.__bx2-r.__bx1:r.__by2-r.__by1,!0)})]})}},{key:"__calContent",value:function(t,e,r,i){if(t===sc||t===hc){if(e<u0)return this.__hasContent;if("hidden"!==r[T_]){var n=r[o_];if(Array.isArray(n))for(var o=0,u=n.length;o<u;o++)if(n[o])return!0;if(0<r[n_][0][3]){var t=i[Nc],e=i[Pc],c=i[Ec],_=i[yc],f=i[xc],d=i[mc];if(t&&e||c||_||f||d)return!0}for(var a=["Top","Right","Bottom","Left"],s=0,p=a.length;s<p;s++){var g=a[s];if(0<i[cc[fc("border"+g+"Width")]]&&0<r[cc[fc("border"+g+"Color")]][0][3])return!0}var l=r[s_];if(Array.isArray(l))for(var h=0,v=l.length;h<v;h++){var m=l[h];if(m&&0<m[4][3])return!0}}}return!1}},{key:"render",value:function(T,t,R,e){var L,M=this,O=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,S=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.isDestroyed,i=this.root,C=this.__config,n=C[yf],F=C[lf],o=C[hf],I=C[uf];if(C[mf]=s0,u0<=t&&(this.__bbox=null,this.__filterBbox=null),r)return{isDestroyed:r,break:!0};T===lc&&(L=C[If]=this.__virtualDom={bb:[],children:[],visibility:"visible"},C[Ef]?C[Ef].available||(C[Ef].available=!0):C[Ef]={available:!0,release:function(){this.available=!1,delete L.cache}});r=I[Fc];if("none"===r)return{break:!0};var a,s,l,h,u,c,_,f=this.clientWidth,d=this.clientHeight,p=this.offsetWidth,g=this.offsetHeight,v=this.__hasMask,N=I[Ec],P=I[yc],B=I[xc],H=I[mc],k=I[Mc],Y=I[Cc],w=I[Oc],D=I[Sc],m=C[Of],y=this.__sx1,E=this.__sx2,x=this.__sx3,b=this.__sx4,A=this.__sx5,G=this.__sx6,W=this.__sy1,U=this.__sy2,X=this.__sy3,V=this.__sy4,z=this.__sy5,K=this.__sy6,j={ctx:R,x1:y,x2:E,x3:x,x4:b,x5:A,x6:G,y1:W,y2:U,y3:X,y4:V,y5:z,y6:K,sx1:y,sx2:E,sx3:x,sx4:b,sx5:A,sx6:G,sy1:W,sy2:U,sy3:X,sy4:V,sy5:z,sy6:K,dx:O,dy:S},$=C[Mf],d=(T===hc&&this.__calPerspective(F,o,I,C),a=e&&T===sc?C[pf]:this.__calMatrix(t,F,o,I,C,y,W,p,g),u=e&&T===sc?(s=this.__bx1,h=this.__bx2,l=this.__by1,this.__by2):(f=Bt(this.__calCache(T,R,$,F,o,I,f,d,p,g,w,Y,D,k,N,P,B,H,y,E,x,b,A,G,W,U,X,V,z,K),4),s=f[0],l=f[1],h=f[2],f[3]),j.bx1=s,j.by1=l,j.bx2=h,j.by2=u,this.__hasContent=C[vf]=this.__calContent(T,t,o,I)),Z=(e&&T===hc?!d&&this.__releaseWhenEmpty(n,I)?(j.break=!0,C[gf]=!1):C[gf]||(E=this.bbox,n?n.reset(E,y,W):n=Ma.getInstance(E,y,W),n&&n.enabled?(n.__bbox=E,R=n.ctx,O+=n.dx,S+=n.dy,j.ctx=R):(C[gf]=!0,j.limitCache=j.break=!(n=null)),C[yf]=n):T===hc&&(x=Rt.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),j.ctx=R=x.ctx),j.dx=O,j.dy=S,I[n_]),q=I[m_],J=I[x_],Q=I[y_],tt=I[E_],b=I[dc],A=I[pc],U=I[vc],X=I[gc],V=I[T_],et=I[a_],rt=I[o_],z=I[l_],f=I[d_],it=I[i_],nt=I[s_],t=I[p_],o=I[g_],ot=I[I_],at=0===I[q_].indexOf("vertical");if(e&&T===sc?z=C[ff]:T===sc||T===hc?($&&(z*=$.__config[ff]),C[ff]=z):T===lc&&(1===z?delete L.opacity:L.opacity=z),T===lc&&(Ht.isE(a)?delete L.transform:L.transform="matrix("+jf(Ht.m2m6(a),",")+")",L.visibility=V),T===sc&&e?a=C[df]:(d=C[pf],Tt.assignMatrix(d,a),$&&($.perspectiveMatrix&&(a=Ht.multiply($.perspectiveMatrix,a)),a=Ht.multiply($.matrixEvent,a)),d=C[df],Tt.assignMatrix(d,a)),j.limitCache)return j;"normal"!==o&&n0(o)?(o=i0(o),T===sc&&e!==uc?(E=i.width,x=i.height,$=Rt.getCacheCanvas(E,x,null,"blend"),c={ctx:R,target:$,mixBlendMode:o,matrix:a},R=$.ctx):T===lc&&(L.mixBlendMode=o)):T===lc&&delete L.mixBlendMode,v&&T===sc&&e!==uc&&(d=i.width,E=i.height,x=Rt.getCacheCanvas(d,E,null,"mask1"),_={ctx:R,target:x,matrix:a},R=x.ctx);f&&f.length?T===sc&&e!==uc?($=i.width,o=i.height,v=Rt.getCacheCanvas($,o,null,"filter"),st={ctx:R,filter:f,target:v,matrix:a},R=v.ctx):T===lc&&(L.filter=se.svgFilter(f)):T===lc&&delete L.filter;var st,lt,ht,ut,ct=b.slice(0),_t=A.slice(0),ft=U.slice(0),dt=X.slice(0);if("paddingBox"===ot?(ct[0]-=k,ct[1]-=w,_t[0]-=Y,_t[1]-=w,ft[0]-=Y,ft[1]-=D,dt[0]-=k,dt[1]-=D):"contentBox"===ot&&(ct[0]-=k+H,ct[1]-=w+N,_t[0]-=Y+P,_t[1]-=w+N,ft[0]-=Y+P,ft[1]-=D+B,dt[0]-=k+H,dt[1]-=D+B),"hidden"===t&&"inline"!==r?(ht=Ve.calRadius(s,l,h-s,u-l,ct,_t,ft,dt),T===sc&&e!==uc?(d=i.width,E=i.height,x=Rt.getCacheCanvas(d,E,null,"overflow"),lt={ctx:R,target:x,matrix:a},R=x.ctx,lt.x=y,lt.y=W,lt.offsetWidth=p,lt.offsetHeight=g,lt.list=ht):T===lc&&($={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ac(ht)||"M".concat(y,",").concat(W,"L").concat(y+p,",").concat(W,"L").concat(y+p,",").concat(W+g,"L").concat(y,",").concat(W+g,",L").concat(y,",").concat(W)]]}]},o=R.add($),C[Rf].push($),L.overflow="url(#"+o+")")):T===lc&&delete L.overflow,T===sc&&(j.offscreenBlend=c,j.offscreenMask=_,j.offscreenFilter=st,j.offscreenOverflow=lt,(j.ctx=R).globalAlpha=z,e||R.setTransform(a[0],a[1],a[4],a[5],a[12],a[13])),("hidden"===V||j.break)&&(T===sc||T===hc))return j.break=!0,j;if(n&&n.enabled&&(n.__available=!0),m){var pt=this.contentBoxList,gt=pt.length,vt=(pt[gt-1]instanceof pa&&gt--,rt.some(function(t){return t}));if(gt){v=function(){for(var c,i,t=I[k_],e=I[w_],_=I[D_],f=0,d=0,p=[],r=(vt&&(f=hl.getInlineWidth(M,pt,at),d=_,at&&(f=(r=[d,f])[0],d=r[1]),"paddingBox"===ot||"padding-box"===ot?at?(f+=N+B,d+=H+P):(f+=H+P,d+=N+B):"contentBox"!==ot&&"content-box"!==ot&&(at?(f+=N+B+w+D,d+=H+P+k+Y):(f+=H+P+k+Y,d+=N+B+w+D)),T!==sc&&T!==hc||(c=Rt.getCacheCanvas(f,d,"__$$INLINE_BGI$$__")),i=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=i-1-e,Tt.isString(t)?(r=M.__loadBgi[e]).url===t&&(r=Al.renderImage(M,T,c&&c.ctx||R,r,0,0,f,d,ct,_t,ft,dt,I,e,it,et,C,!0,O,S),T===lc&&r&&p.push(r)):!t.k||(e=M.__gradient(T,R,0,0,f,d,t,O,S))&&("conic"===e.k?ur.renderConic(M,T,c&&c.ctx||R,e.v,0,0,f,_,ct,_t,ft,dt,!0):(r=Al.renderBgc(M,T,c&&c.ctx||R,e.v,null,0,0,f,d,ct,_t,ft,dt,"fill",!0),T===lc&&r&&p.push(r))))})),bn.getFontFamily(e)),x=t*(yt.info[r].lgr||0)*.5,b=at?bn.getVerticalBaseline(I):bn.getBaseline(I),g=!0,v=pt[0],m=v.parentLineBox,y=0,E=0;E<gt;E++){var A=pt[E];A.parentLineBox!==m&&!function(){var t=Bt(hl.getInlineBox(M,at,pt,v,pt[E-1],m,b,_,x,g,!1,ot,N,P,B,H,w,Y,D,k),8),i=t[0],n=t[1],e=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],h=(g&&(t=d0(M),i-=t,o-=t),0<Z[3]&&Al.renderBgc(M,T,R,F[n_],null,i,n,e-i,r-n,ct,[0,0],[0,0],dt,"fill",!1,O,S),e-i),u=r-n;T!==sc&&T!==hc||!c?T===lc&&p.length&&p.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",at?"M".concat(0,",",y,"L").concat(d,",").concat(y,"L").concat(d,",").concat(u+y,"L",0,",").concat(u+y,",L",0,",").concat(y):"M".concat(y,",",0,"L").concat(h+y,",",0,"L").concat(h+y,",").concat(d,"L").concat(y,",").concat(d,",L").concat(y,",",0)]]}]},r=R.add(e),C[Rf].push(e),L.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",at?i:i-y],["y",at?n-y:n],["clip-path","url(#"+r+")"]]}))}):at?R.drawImage(c.canvas,0,y,f,u,i+O,n+S,f,u):R.drawImage(c.canvas,y,0,h,d,i+O,n+S,h,d),y+=at?u:h,nt&&nt.forEach(function(t){nc.renderBoxShadow(M,T,R,t,o,a,s,l,s-o,l-a,O,S)}),0<w&&0<q[3]&&(t=Math.atan(w/k),e=Math.atan(w/Y),r=Ve.calPoints(w,I[u_],t,e,o,o+k,s,s,a,a+w,l-D,l,0,g?ct:[0,0],[0,0]),Ve.renderBorder(M,T,R,r,F[m_],O,S)),0<D&&0<Q[3]&&(t=Math.atan(D/k),e=Math.atan(D/Y),r=Ve.calPoints(D,I[__],t,e,o,o+k,s,s,a,a+w,l-D,l,2,g?ct:[0,0],[0,0]),Ve.renderBorder(M,T,R,r,F[y_],O,S)),g&&0<k&&0<tt[3]&&(t=Math.atan(k/w),e=Math.atan(k/D),r=Ve.calPoints(k,I[f_],t,e,o,o+k,s-Y,s,a,a+w,l-D,l,3,ct,_t),Ve.renderBorder(M,T,R,r,F[E_],O,S)),g=!1,m=(v=A).parentLineBox}(),E===gt-1&&function(){var t=Bt(hl.getInlineBox(M,at,pt,v,pt[E],m,b,_,x,g,!0,ot,N,P,B,H,w,Y,D,k),8),i=t[0],n=t[1],e=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],t=(g&&(t=d0(M),i-=t,o-=t),function t(e){for(var r=0,i=e.flowChildren,n=i.length-1;0<=n;n--){var o=i[n];if(!(o instanceof p0||o instanceof Zs&&o.shadowRoot instanceof p0))break;if(o.flowChildren&&o.flowChildren.length){r+=t(o);break}r+=o.outerWidth}return r}(M)),h=(e+=t,s+=t,0<Z[3]&&Al.renderBgc(M,T,R,F[n_],null,i,n,e-i,r-n,g?ct:[0,0],_t,ft,g?dt:[0,0],"fill",!1,O,S),e-i),u=r-n;T!==sc&&T!==hc||!c?T===lc&&p.length&&p.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",at?"M".concat(0,",",y,"L").concat(d,",").concat(y,"L").concat(d,",").concat(u+y,"L",0,",").concat(u+y,",L",0,",").concat(y):"M".concat(y,",",0,"L").concat(h+y,",",0,"L").concat(h+y,",").concat(d,"L").concat(y,",").concat(d,",L").concat(y,",",0)]]}]},r=R.add(e),C[Rf].push(e),L.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",at?i:i-y],["y",at?n-y:n],["clip-path","url(#"+r+")"]]}))}):at?R.drawImage(c.canvas,0,y,f,u,i+O,n+S,f,u):R.drawImage(c.canvas,y,0,h,d,i+O,n+S,h,d),nt&&nt.forEach(function(t){nc.renderBoxShadow(M,T,R,t,o,a,s,l,s-o,l-a,O,S)}),0<w&&0<q[3]&&(t=Math.atan(w/k),e=Math.atan(w/Y),r=Ve.calPoints(w,I[u_],t,e,o,o,s-Y,s,a,a+w,l-D,l,0,g?ct:[0,0],_t),Ve.renderBorder(M,T,R,r,F[m_],O,S)),0<Y&&0<J[3]&&(t=Math.atan(Y/w),e=Math.atan(Y/D),r=Ve.calPoints(Y,I[c_],t,e,o,o+k,s-Y,s,a,a+w,l-D,l,1,ct,_t),Ve.renderBorder(M,T,R,r,F[x_],O,S)),0<D&&0<Q[3]&&(t=Math.atan(D/k),e=Math.atan(D/Y),r=Ve.calPoints(D,I[__],t,e,o,o,s-Y,s,a,a+w,l-D,l,2,g?ct:[0,0],_t),Ve.renderBorder(M,T,R,r,F[y_],O,S)),g&&0<k&&0<tt[3]&&(t=Math.atan(k/w),e=Math.atan(k/D),r=Ve.calPoints(k,I[f_],t,e,o,o+k,s-Y,s,a,a+w,l-D,l,3,ct,_t),Ve.renderBorder(M,T,R,r,F[E_],O,S))}()}return c&&c.ctx.clearRect(0,0,f,d),{v:j}}();if("object"===mt(v))return v.v}else if(s===h||l===u)return j}return 0<Z[3]&&Al.renderBgc(this,T,R,F[n_],ht,s,l,h-s,u-l,ct,_t,ft,dt,"fill",!1,O,S),rt&&(ut=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=ut-1-e,Tt.isString(t)?(r=M.__loadBgi[e]).url===t&&Al.renderImage(M,T,R,r,s,l,h,u,ct,_t,ft,dt,I,e,it,et,C,!1,O,S):!t.k||(r=M.__gradient(T,R,s,l,h,u,t,O,S))&&("conic"===r.k?ur.renderConic(M,T,R,r.v,s,l,h-s,u-l,ct,_t,ft,dt):Al.renderBgc(M,T,R,r.v,ht,s,l,h-s,u-l,ct,_t,ft,dt,"fill",!1,O,S)))})),nt&&nt.forEach(function(t){nc.renderBoxShadow(M,T,R,t,y,W,G,K,G-y,K-W,O,S)}),0<w&&0<q[3]&&Ve.renderBorder(this,T,R,F[M_],F[m_],O,S),0<Y&&0<J[3]&&Ve.renderBorder(this,T,R,F[O_],F[x_],O,S),0<D&&0<Q[3]&&Ve.renderBorder(this,T,R,F[S_],F[y_],O,S),0<k&&0<tt[3]&&Ve.renderBorder(this,T,R,F[C_],F[E_],O,S),j}},{key:"__destroy",value:function(){var t;this.isDestroyed||(N(F(o.prototype),"__destroy",this).call(this),t=this.root,this.clearAnimate(),this.clearFrameAnimate(),t&&t.delRefreshTask(this.__loadBgi.cb),t&&t.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,n=this.isMask;if(!(r||"none"===i[Fc]||t.__stopPropagation||n)){var o,r=t.event.type,n=this.listener,a=this.__hasMask;if(n.hasOwnProperty(r)&&(o=n[r]),e)return"none"!==i[R_]&&Zf(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0;if(this.willResponseEvent(t)){if(a){for(var s,l=this.next,n=l.isClip;l&&l.isMask;){if(l.willResponseEvent(t,!0)){s=!0;break}l=l.next}if(!n&&!s)return}return Zf(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,n=this.__sx1,o=this.__sy1,a=this.offsetWidth,s=this.offsetHeight,l=this.matrixEvent,h=this.computedStyle;if("none"!==h[R_])return ie.pointInQuadrilateral(r,i,n,o,n+a,o,n+a,o+s,n,o+s,l)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(h,u,t,e,c,_,r){var i,f,n,o,a,s,l,d=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,p=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,g=c-t,v=_-e;if(g&&v)return l=r.k,i=r.v,f=r.d,o=r.s,a=r.z,r=r.p,n={k:l},"linear"===l?(s=ur.getLinear(i,f,t,e,t+.5*g,e+.5*v,g,v,this.root,d,p),n.v=this.__getLg(h,u,s)):"radial"===l?(s=ur.getRadial(i,o,a,r,t,e,c,_,this.root,d,p))&&(n.v=this.__getRg(h,u,s),s.matrix&&(n.v=[n.v,s.matrix,s.cx,s.cy])):"conic"===l&&(o=this.bbox,a=Math.max(Math.abs(o[2]-o[0]),Math.abs(o[3]-o[1])),s=Math.max(Math.abs(g),Math.abs(v)),l=ur.getConic(i,f,r,t,e,c,_,a/s,this.root,d,p),n.v=this.__getCg(h,u,l)),n}},{key:"__getLg",value:function(t,e,r){var i;return t===sc||t===hc?(i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2),r.stop.forEach(function(t){i.addColorStop(t[1],zf(t[0]))}),i):t===lc?(t={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",zf(t[0])],["offset",100*t[1]+"%"]]}})},r=e.add(t),this.__config[Rf].push(t),"url(#"+r+")"):void 0}},{key:"__getRg",value:function(t,e,r){var i;return t===sc||t===hc?(i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r),r.stop.forEach(function(t){i.addColorStop(t[1],zf(t[0]))}),i):t===lc?(t={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",zf(t[0])],["offset",100*t[1]+"%"]]}})},r.tx!==r.cx&&t.props.push(["fx",r.cx]),r.ty!==r.cy&&t.props.push(["fy",r.cy]),r=e.add(t),this.__config[Rf].push(t),"url(#"+r+")"):void 0}},{key:"__getCg",value:function(t,e,r){var i=r.stop,n=i.length-1;i[n][1]<1&&i.push([i[n][0].slice(0),1]),0<i[0][1]&&i.unshift([i[0][0].slice(0),0]);return t===sc||t===hc?r:[]}},{key:"clearCache",value:function(t){var e=this.__config,r=e[Ef],i=e[xf],n=e[bf],o=e[Af];t||(e[lf]=this.__cacheStyle={},(t=e[yf])&&t.release()),r&&r.release(),i&&i.release(),n&&n.release(),o&&o.release()}},{key:"updateStyle",value:function(e,r){var i=this,n=i.root,o=i.__config,a=bn.normalize(e);n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,o[Tf]||((t={})[J_]=i,t[tf]=a,t[ef]=e,t[rf]=Object.keys(a).map(function(t){return t=r0.hasOwnProperty(t)?t:parseInt(t)}),t[nf]=o,n.__addUpdate(i,o,n,n.__config,t))},__after:function(t){Zf(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,a),Zf(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,n=i.root,o=i.__config;n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,o[Tf]||((t={})[J_]=i,t[tf]=e,t[rf]=Object.keys(e).map(function(t){return t=r0.hasOwnProperty(t)?t:parseInt(t)}),t[nf]=o,n.__addUpdate(i,o,n,n.__config,t))},__after:function(t){Zf(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),Zf(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new Qu(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof Qu&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(Zf(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var n={__after:function(t){e(t)},__karasFramecb:e};return t.push(n),Ml.onFrame(n),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void Ml.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){Ml.offFrame(t)})}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){"none"!==this.computedStyle[Fc]&&(N(F(o.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[mf]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t)}},{key:"__offsetY",value:function(t,e,r){"none"!==this.computedStyle[Fc]&&(N(F(o.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData&&(this.__layoutData.y+=t),this.clearCache()),void 0!==r&&(this.__config[mf]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t)}},{key:"__resizeX",value:function(t,e){"none"!==this.computedStyle[Fc]&&(this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData&&(this.__layoutData.w+=t),this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[gf]=!1),void 0!==e&&(this.__config[mf]|=e),this.clearCache())}},{key:"__resizeY",value:function(t,e){"none"!==this.computedStyle[Fc]&&(this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[gf]=!1),void 0!==e&&(this.__config[mf]|=e),this.clearCache())}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=t?(i=Array.isArray(t)?t:[t]).map(function(t){return cc[fc(t)]}):Object.keys(e);return i.forEach(function(t){r0.hasOwnProperty(t)?r[t]=e[t]:r[_c[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(t){var e=[],t=(e=t?this.bbox:[t=this.__sx1,r=this.__sy1,t+this.offsetWidth,r+this.offsetHeight],this.matrixEvent),r=o0(Ht.calPoint([e[0],e[1]],t)),i=o0(Ht.calPoint([e[2],e[1]],t)),n=o0(Ht.calPoint([e[2],e[3]],t)),e=o0(Ht.calPoint([e[0],e[3]],t));return{left:Math.min(r[0],Math.min(i[0],Math.min(n[0],e[0]))),top:Math.min(r[1],Math.min(i[1],Math.min(n[1],e[1]))),right:Math.max(r[0],Math.max(i[0],Math.max(n[0],e[0]))),bottom:Math.max(r[1],Math.max(i[1],Math.max(n[1],e[1]))),points:[r,i,n,e]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var n=this;if(n.isDestroyed)return Rt.warn("Remove target is destroyed."),void(Zf(e)&&e());var o=n.root,a=n.domParent,t=n.isShadowRoot?n.hostRoot:n;-1!==a.children.indexOf(t)?(o.delRefreshTask(n.__task),o.addRefreshTask(n.__task={__before:function(){n.__task=null;var t=a.__json,e=t.children.indexOf((n.isShadowRoot?n.hostRoot:n).__json),r=a.zIndexChildren,i=r.indexOf(n.isShadowRoot?n.hostRoot:n);if(-1===e||-1===i)throw new Error("Remove index Exception.");t.children.splice(e,1),a.children.splice(e,1),r.splice(i,1),n.__prev&&(n.__prev.__next=n.__next);t={};t[J_]=n,t[Q_]=h0,t[of]=!0,t[nf]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,t)},__after:function(t){(n.isShadowRoot?n.hostRoot:n).__destroy(),Zf(e)&&e.call(n,t)}})):Zf(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,n;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,n=this.computedStyle[s_],this.__bbox=t0([t,e,t+r,e+i],n)),this.__bbox}},{key:"filterBbox",get:function(){var t,e;return this.__filterBbox||(t=this.bbox,e=this.computedStyle[d_],this.__filterBbox=e0(t,e)),this.__filterBbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[pf]}},{key:"matrixEvent",get:function(){return this.__config[df]}},{key:"perspectiveMatrix",get:function(){return this.__config[Sf]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"cacheStyle",get:function(){return this.__cacheStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseline",get:function(){return this.offsetHeight}},{key:"firstBaseline",get:function(){return this.offsetHeight}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[kf]=this.__cacheAsBitmap=!!t}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),o}(),t=A.STYLE_KEY,g0=t.DISPLAY,v0=t.MARGIN_TOP,m0=t.MARGIN_BOTTOM,y0=t.MARGIN_LEFT,E0=t.MARGIN_RIGHT,x0=t.BORDER_TOP_WIDTH,b0=t.BORDER_BOTTOM_WIDTH,A0=t.BORDER_LEFT_WIDTH,T0=t.BORDER_RIGHT_WIDTH,R0=t.PADDING_TOP,M0=t.PADDING_BOTTOM,O0=t.PADDING_LEFT,S0=t.PADDING_RIGHT,C0=t.LINE_HEIGHT,I0=function(){function o(t,e,r,i,n){_(this,o),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseline=i,this.__isVertical=n,this.__bOffset=0}return f(o,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(r){var i,n=r?this.verticalBaseline:this.baseline,t=r?this.verticalLineHeight:this.lineHeight,o=t,e=(this.list.length&&this.list.forEach(function(t){var e;t instanceof oa||(i=!0),r?(e=t.verticalBaseline)!==n&&(t.__offsetX(e=n-e,!0),o=Math.max(o,t.offsetWidth+e)):(e=t.baseline)!==n&&(t.__offsetY(e=n-e,!0),o=Math.max(o,t.offsetHeight+e))}),0);return i&&(e=r?this.__baseline:Math.max(0,this.__lineHeight-this.__baseline)),e=t<o?Math.max(e,o-t):e}},{key:"__offsetX",value:function(e,t){this.__x+=e,t&&this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"__offsetY",value:function(e,t){this.__y+=e,t&&this.list.forEach(function(t){t.__offsetY(e,!0)})}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseline=Math.max(e,this.__baseline)}},{key:"__resetLb",value:function(i,n){this.list.forEach(function(t){for(var e=t,r=(e=t instanceof oa?t.parent.parent:e).computedStyle;"inline"===r[g0];)i=Math.max(i,r[C0]),n=Math.max(n,bn.getBaseline(r)),r=(e=e.domParent).computedStyle}),this.__lineHeight=i,this.__baseline=n}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.x+this.width}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){if(this.isVertical)return this.verticalLineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],t=t[e-1],i=r.x,n=(r instanceof oa?r.parent:r).domParent;;){var o=n.contentBoxList,a=n.computedStyle,u=a[g0],c=a[y0],_=a[A0],a=a[O0];if("inline"!==u)break;r===o[0]&&(i-=c+_+a),n=n.domParent}for(var s=t.x+t.outerWidth,n=(t instanceof oa?t.parent:t).domParent;;){var l=n.contentBoxList,h=n.computedStyle,f=h[g0],d=h[E0],p=h[T0],h=h[S0];if("inline"!==f)break;r===l[l.length-1]&&(s+=d+p+h),n=n.domParent}return s-i}return 0}},{key:"height",get:function(){if(!this.isVertical)return this.lineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],t=t[e-1],i=r.y,n=(r instanceof oa?r.parent:r).domParent;;){var o=n.contentBoxList,a=n.computedStyle,u=a[g0],c=a[v0],_=a[x0],a=a[R0];if("inline"!==u)break;r===o[0]&&(i-=c+_+a),n=n.domParent}for(var s=t.y+t.outerHeight,n=(t instanceof oa?t.parent:t).domParent;;){var l=n.contentBoxList,h=n.computedStyle,f=h[g0],d=h[m0],p=h[b0],h=h[M0];if("inline"!==f)break;r===l[l.length-1]&&(s+=d+p+h),n=n.domParent}return s-i}return 0}},{key:"bOffset",get:function(){return this.__bOffset}},{key:"baseline",get:function(){var e=this.__baseline;return this.list.forEach(function(t){e=Math.max(e,t.baseline)}),e}},{key:"verticalBaseline",get:function(){var e=this.__baseline;return this.list.forEach(function(t){e=Math.max(e,t.verticalBaseline)}),e}},{key:"lineHeight",get:function(){var e=this.__lineHeight;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"verticalLineHeight",get:function(){var e=this.__lineHeight;return this.list.forEach(function(t){e=Math.max(e,t.outerWidth)}),e}},{key:"isVertical",get:function(){return this.__isVertical}}]),o}(),k0=function(){function o(t,e,r,i,n){_(this,o),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__max=n?e:t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseline=i,this.__isEnd=!0,this.__spreadList=[],this.__isVertical=n}return f(o,[{key:"genLineBox",value:function(t,e){t=new I0(t,e,this.__lineHeight,this.__baseline,this.isVertical);return this.list.push(t),this.__isEnd=!0,t}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseline,i);if(this.__isNewLine)return t=new I0(t,e,r,i,this.isVertical),this.list.push(t),this.__isEnd=!0,this.__isNewLine=!1,t}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r,i=this.isVertical;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):i?(this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__max=Math.max(this.__max,i?e.y+e.outerHeight:e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i,n){this.list.forEach(function(t){var e=r-(n?t.height:t.width);0<e&&("center"===i&&(e*=.5),n?t.__offsetY(e,!0):t.__offsetX(e,!0))})}},{key:"verticalAlign",value:function(e){var r=this.__spreadList,i=(r.splice(0),0);return this.list.forEach(function(t){i&&(t.__bOffset=i,e?t.__offsetX(i,!0):t.__offsetY(i,!0)),i+=t.verticalAlign(e),r.push(i)}),i}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"addY",value:function(t){this.__lastY+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e,!1)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endX",get:function(){var t=this.list,e=t.length;return e?t[e-1].endX:this.__x}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseline",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseline+t[e-1].bOffset}return 0}},{key:"firstBaseline",get:function(){var t=this.list;return t.length?t[0].baseline:0}},{key:"verticalBaseline",get:function(){var t=this.list;return t.length?t[0].baseline+t[0].bOffset:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"verticalLineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].verticalLineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}},{key:"spreadList",get:function(){return this.__spreadList}},{key:"isVertical",get:function(){return this.__isVertical}},{key:"max",get:function(){return this.__max}}]),o}(),w0={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},dr=A.STYLE_KEY,D0=dr.DISPLAY,L0=dr.TOP,F0=dr.BOTTOM,N0=dr.POSITION,P0=dr.HEIGHT,B0=r.AUTO,H0=r.PX,Y0=r.PERCENT,G0=Na.REFLOW;var W0={offsetAndResizeByNodeOnY:function(t,e,u,r,c){if(r){for(;;){for(;t.isShadowRoot;)t=t.host;for(var i=t,_=void 0,n=t.domParent,o=(n&&(h=n.computedStyle[N0],_=n===e||n.isShadowRoot||"relative"===h||"absolute"===h),t.next),a=void 0;o;){if("none"!==o.computedStyle[D0])if("absolute"===o.currentStyle[N0]){var s=o.currentStyle,f=s[L0],l=s[F0],s=s[P0];if(f[1]===B0?l[1]===B0||l[1]===H0?(o.__offsetY(r,!0,G0),o.clearCache()):l[1]===Y0&&(l=(1-.01*l[0])*r,o.__offsetY(l,!0,G0),o.clearCache()):f[1]===Y0&&(l=.01*f[0]*r,o.__offsetY(l,!0,G0),o.clearCache()),s[1]===Y0)if(_)n.__layoutAbs(n,n.__layoutData,o);else{if(!a)for(a=n;a&&a!==e&&!a.isShadowRoot;){var d=a.currentStyle;if("absolute"===d[N0]||"relative"===d[N0])break;a=a.domParent}c.push([n,a,o])}}else o.__offsetY(r,!0,G0),o.clearCache();o=o.next}if(!n)break;var h=(t=n).currentStyle,p=void 0;if("absolute"===h[N0]?h[P0][1]!==B0||h[L0][1]!==B0&&h[F0][1]!==B0||(p=!0):h[P0][1]===B0&&(p=!0),!p)break;if(t.__resizeY(r,G0),t.clearCache(),t===e)break}for(;i;)i.clearCache(!0),i=i.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMargin:function(t,e){var r=0,i=t[0],n=t[0],t=(t.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),0);return 0<i&&0<n?t=Math.max(i,n)-r:i<0&&n<0?t=Math.min(i,n)-r:0===i&&0===n||(t=i+n-r),t}},Vr=A.STYLE_KEY,U0=Vr.POSITION,X0=Vr.DISPLAY,V0=Vr.MARGIN_LEFT,z0=Vr.MARGIN_TOP,K0=Vr.MARGIN_RIGHT,j0=Vr.MARGIN_BOTTOM,$0=Vr.PADDING_LEFT,Z0=Vr.PADDING_BOTTOM,q0=Vr.PADDING_RIGHT,J0=Vr.PADDING_TOP,Q0=Vr.BORDER_TOP_WIDTH,td=Vr.BORDER_BOTTOM_WIDTH,ed=Vr.BORDER_RIGHT_WIDTH,rd=Vr.BORDER_LEFT_WIDTH,id=Vr.TOP,nd=Vr.RIGHT,od=Vr.BOTTOM,ad=Vr.LEFT,sd=Vr.WIDTH,ld=Vr.HEIGHT,hd=Vr.TEXT_ALIGN,ud=Vr.FLEX_DIRECTION,cd=Vr.FLEX_BASIS,_d=Vr.FLEX_SHRINK,fd=Vr.FLEX_GROW,dd=Vr.ALIGN_SELF,pd=Vr.ALIGN_ITEMS,gd=Vr.JUSTIFY_CONTENT,vd=Vr.Z_INDEX,md=Vr.WHITE_SPACE,yd=Vr.LINE_HEIGHT,Ed=Vr.LINE_CLAMP,xd=Vr.ORDER,bd=Vr.FLEX_WRAP,Ad=Vr.ALIGN_CONTENT,Td=Vr.OVERFLOW,Rd=Vr.FONT_SIZE,Md=Vr.FONT_FAMILY,Od=Vr.FONT_WEIGHT,Sd=Vr.WRITING_MODE,i=A.NODE_KEY,Cd=i.NODE_CURRENT_STYLE,Id=i.NODE_STYLE,kd=i.NODE_STRUCT,wd=i.NODE_DOM_PARENT,Dd=i.NODE_IS_INLINE,Gr=A.UPDATE_KEY,Ld=Gr.UPDATE_NODE,Fd=Gr.UPDATE_FOCUS,Nd=Gr.UPDATE_ADD_DOM,Pd=Gr.UPDATE_CONFIG,Wr=A.STRUCT_KEY,Bd=Wr.STRUCT_NUM,Hd=Wr.STRUCT_LV,Yd=Wr.STRUCT_TOTAL,Gd=Wr.STRUCT_CHILD_INDEX,Wd=Wr.STRUCT_INDEX,Ud=A.ELLIPSIS,Xd=r.AUTO,Vd=r.PX,zd=r.PERCENT,Kd=r.REM,jd=r.VW,$d=r.VH,Zd=r.VMAX,qd=r.VMIN,Jd=bn.isRelativeOrAbsolute,Qd=bn.getBaseline,tp=bn.getVerticalBaseline,ep=Tt.extend,rp=Tt.isNil,ip=Tt.isFunction,np=et.CANVAS,op=et.SVG,ap=et.WEBGL;function sp(t){var i,n,o=[],a={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof Zs?t.shadowRoot:t)instanceof p0&&t.isMask?void 0!==n?a[n].push(t):e&&(s[n=e-1].__iIndex=n,a[n]=[t],i=!0):(n=void 0,t instanceof p0?(r.__zIndex=t.currentStyle[vd],Jd(t)&&(r.__aIndex=!0)):r.__zIndex=0,o.push(r),r.__iIndex=e)}),o.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=o.length-1;0<=e;e--){var r=o[e].__iIndex;a.hasOwnProperty(r)&&o.splice.apply(o,[e+1,0].concat(g(a[r])))}return o}function lp(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof Zs&&(t=t.shadowRoot),r.__order=t instanceof p0?t.currentStyle[xd]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}function hp(t,u,c,e,_){var r,i=t.computedStyle,n=t.root,o=n.renderMode,a=c.list;a.forEach(function(t){e-=t.outerWidth}),o!==np&&o!==ap||(r=(o===ap?Rt.getFontCanvas():n).ctx);for(var f=o===np||o===ap?(n=bn.setFontStyle(i),r.font!==n&&(r.font=n),r.measureText(Ud).width):Rt.measureTextSync(Ud,i[Md],i[Rd],i[Od]),s=a.length-1;0<=s;s--){var l,d,h=a[s];if(!s||e+h.outerWidth>=f+1e-10){h instanceof oa?h.parent.__backtrack(t,u,c,h,e,_,f,i,r,o):(l=new pa(h.x+h.outerWidth+_,h.y,f,t),u.addItem(l,!0));break}h instanceof oa?-1<(d=(l=h.parent).textBoxes.indexOf(h))&&l.textBoxes.splice(d,1):h.__layoutNone(),a.pop(),e+=h.outerWidth}}var up=function(){d(u,p0);var n=p(u);function u(t,e,r){_(this,u);var i=l(e=n.call(this,t,e)).style,t=(i.display&&{flex:!0,block:!0,inline:!0,"inline-block":!0,inlineBlock:!0,none:!0}.hasOwnProperty(i.display)||(w0.INLINE.hasOwnProperty(e.tagName)?i.display="inline":i.display="block"),!i[Od]&&w0.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),e.__style=bn.normalize(i,Dt.DOM_ENTRY_SET),e.__currentStyle=ep({},e.__style),e.__children=r||[],e.__flexLine=[],e.__ellipsis=null,e.__config);return t[Cd]=e.__currentStyle,t[Id]=e.__style,e}return f(u,[{key:"__structure",value:function(r,i,t){var t=N(F(u.prototype),"__structure",this).call(this,r++,i,t),n=[t],e=this.__zIndexChildren=this.__zIndexChildren||sp(this),o=(e.forEach(function(t,e){t=t.__structure(r,i+1,e);Array.isArray(t)?(r+=t.length,n=n.concat(t)):(r++,n.push(t))}),n.length-1);return t[Bd]=e.length,t[Yd]=o,n}},{key:"__modifyStruct",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=this.__config,i=r[kd],n=i[Yd]||0,o=this.__structure(i[Wd],i[Hd],i[Gd]),a=((a=t.__structs).splice.apply(a,[i[Wd]+e,n+1].concat(g(o))),0);return this!==t&&(a=((i=r[kd])[Yd]||0)-n,(e=r[wd].__config[kd])[Yd]=e[Yd]||0,e[Yd]+=a),[i,a]}},{key:"__updateStruct",value:function(t){var e=this.__config[kd],r=e[Wd],e=e[Yd],i=void 0===e?0:e,e=this.__zIndexChildren=sp(this);if(1!==e.length){e.forEach(function(t,e){t.__config[kd][Gd]=e});for(var u,n=[],o=[],a=r+1;a<=r+i;a++){var s=t[a],c={child:s,list:t.slice(s[Wd],s[Wd]+s[Yd]+1)};n.push(c),o.push(c),a+=s[Yd]||0}n.sort(function(t,e){return t.child[Gd]-e.child[Gd]});for(var l,h=0,_=o.length;h<_;h++)if(o[h]!==n[h]){u=!0;break}u&&(l=[],n.forEach(function(t){l=l.concat(t.list)}),l.forEach(function(t,e){t[Wd]=r+e+1}),t.splice.apply(t,[r+1,i].concat(g(l))))}}},{key:"__tryLayInline",value:function(t,e,r){this.__computeReflow();var i=this.flowChildren,n=this.currentStyle,o=n[X0],a=n[sd],u=n[ld],c=n[V0],_=n[K0],f=n[z0],d=n[j0],p=n[$0],g=n[q0],v=n[J0],n=n[Z0],s=this.computedStyle,m=s[rd],y=s[ed],E=s[Q0],s=s[td];if("inline"===o)i.length&&((o=(o=i[0])instanceof Zs?o.shadowRoot:o)instanceof p0?t=o.__tryLayInline(t,e,r):t-=o.firstCharWidth);else{if(a[1]!==Xd)t-=r?this.__calSize(u,e,!0):this.__calSize(a,e,!0);else for(var l=0;l<i.length;l++){if(t<0)return t;var h=i[l];(h=h instanceof Zs?h.shadowRoot:h)instanceof p0?t=h.__tryLayInline(t,e,r):t-=h.textWidth}t=r?(t-=this.__calSize(d,e,!0))-this.__calSize(n,e,!0)-s:(t-=this.__calSize(_,e,!0))-this.__calSize(g,e,!0)-y}return t=r?(t-=this.__calSize(f,e,!0))-this.__calSize(v,e,!0)-E:(t-=this.__calSize(c,e,!0))-this.__calSize(p,e,!0)-m}},{key:"__offsetX",value:function(e,r,i){N(F(u.prototype),"__offsetX",this).call(this,e,r,i);var t=this.__ellipsis;t&&t.__offsetX(e,r),r&&!this.__config[Dd]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){N(F(u.prototype),"__offsetY",this).call(this,e,r,i);var t=this.__ellipsis;t&&t.__offsetY(e,r),r&&!this.__config[Dd]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calBasis",value:function(n,_,f,e,r){var d,p,g,v=this,t=(this.__computeReflow(),0),o=0,a=0,m=this.flowChildren,y=this.currentStyle,i=this.computedStyle,s=e.x,l=e.y,h=e.w,u=e.h,E=y[ud],x=y[cd],b=y[sd],A=y[ld],T=i[yd],R=i[X0],M=i[Ed],c=0===i[Sd].indexOf("vertical"),b=n?b:A,A=x[1]===Xd,O=-1<[Vd,zd,Kd,jd,$d,Zd,qd].indexOf(x[1]),S=!A&&!O,C=(O?t=d=this.__calSize(x,n?h:u,!0):A&&-1<[Vd,zd,Kd,jd,$d,Zd,qd].indexOf(b[1])?t=d=this.__calSize(b,n?h:u,!0):A&&(S=!0),0),I=0,M=M||0;return n?("flex"===R?(p=-1===["column","columnReverse"].indexOf(E),(m=lp(m)).forEach(function(t){var e,r;t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0?(r=(e=Bt(t.__calBasis(n,_,f,{x:s,y:l,w:h,h:u},!1),3))[1],e=e[2],p?(o+=r,a+=e):(o=Math.max(o,r),a=Math.max(a,e))):(c&&(r=v.__lineBoxManager=new k0(s,l,T,(c?tp:Qd)(i),c),t.__layout({x:s,y:l,w:h,h:u,lineBoxManager:r,lineClamp:M,isVertical:c}),o+=t.width,a+=t.width),p?(o+=t.charWidth,a+=t.textWidth):(o=Math.max(o,t.charWidth),a=Math.max(a,t.textWidth)))})):c?(O=this.__lineBoxManager=new k0(s,l,T,(c?tp:Qd)(i),c),this.__layout({x:s,y:l,w:h,h:u,lineBoxManager:O,lineClamp:M,isVertical:c},_,!1,!0),o=a=t=this.width):(g=e.lineBoxManager,"inline"!==R&&(g=this.__lineBoxManager=new k0(s,l,T,(c?tp:Qd)(i),c)),m.forEach(function(t){var e,r,i;t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0?(e=(r=Bt(t.__calBasis(n,_,f,{x:s,y:l,w:h,h:u,lineBoxManager:g},!1),3))[1],r=r[2],"block"===(i=t.computedStyle[X0])||"flex"===i?(o=Math.max(o,e),a=Math.max(a,r),C=I=0):(C+=e,I+=r,o=Math.max(o,C),a=Math.max(a,I))):(C+=t.charWidth,I+=t.textWidth,o=Math.max(o,C),a=Math.max(a,I))})),d&&(a=Math.max(d,a)),S&&(t=a)):(this.__layout({x:s,y:l,w:h,h:u,isVertical:c},_,!0,!1),o=a=t=this.height),this.__addMBP(n,h,y,i,[t,o,a],r)}},{key:"__layoutNone",value:function(){N(F(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(t,C,I,k){var y,E,x,b,w,D,L,F,N,P,B,e,r,i,n,o,a,H=this,s=this.flowChildren,l=this.currentStyle,h=this.computedStyle,u=h[hd],Y=h[md],A=h[Ed],c=h[yd],G=h[Td],_=this.__preLayout(t,!1),f=_.fixedWidth,d=_.fixedHeight,T=_.x,R=_.y,M=_.w,O=_.h,p=_.isParentVertical,S=_.isVertical;C&&(f&&!S||d&&S)?S?this.__ioSize(void 0,O):this.__ioSize(M,void 0):I&&d?this.__ioSize(void 0,O):k&&f?this.__ioSize(M,void 0):(A=A||0,y=0,E=this.__lineBoxManager=new k0(T,R,c,(S?tp:Qd)(h),S),b=x=0,w=T,D=R,L=[],F=[],N=s.length,s.forEach(function(t,u){var e=t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0,r=(e&&t.__computeReflow(),e&&"inline"===t.computedStyle[X0]),i=e&&"inlineBlock"===t.computedStyle[X0],n=r&&t.__isRealInline(),o=y;if(e&&!r&&!i||(L.length&&F.length&&((l=W0.getMergeMargin(F,L))&&(S?T+=l:R+=l)),F=[],L=[]),e)if(i||r)if(P||B)t.__layoutNone();else if(S&&R===D||!S&&T===w||!u||"nowrap"===Y)y=t.__layout({x:T,y:R,w:M,h:O,lx:w,ly:D,lineBoxManager:E,lineClamp:A,lineClampCount:y,isVertical:S},C,I,k),t.__isIbFull&&y++,t.__isIbFull&&"nowrap"!==Y?(E.addItem(t,!0),S?(T+=t.outerWidth,R=D):(T=w,R+=t.outerHeight),E.setNotEnd()):(!i&&n||E.addItem(t,!1),T=E.lastX,R=E.lastY),!C&&"hidden"===G&&"nowrap"===Y&&(S&&O+1e-10<R-D||!S&&M+1e-10<T-w||o<y)?B=!0:A&&A<=y&&(P=!0),C&&("nowrap"===Y?b+=S?t.outerHeight:t.outerWidth:(b=S?t.outerHeight:t.outerWidth,o<y&&(b=Math.max(b,S?O:M))),x=Math.max(x,b));else if(-1e-10<=t.__tryLayInline(S?O+D-R:M+w-T,S?O:M,S))y=t.__layout({x:T,y:R,w:M,h:O,lx:w,ly:D,lineBoxManager:E,lineClamp:A,lineClampCount:y,isVertical:S},C,I,k),!i&&n||E.addItem(t,!1),T=E.lastX,R=E.lastY,A&&A<=y&&(P=!0),C&&(x=(i||y===o?b+=S?t.outerHeight:t.outerWidth:(x=Math.max(x,S?O:M),b=S?R-D:T-w),Math.max(x,b)));else{if(y++,R=S?(T=E.endX,D):(T=w,E.endY),E.setNewLine(),A&&A<=y)return t.__layoutNone(),P=!0,e=(l=E.list)[l.length-1],void hp(H,E,e,S?O:M,0);y=t.__layout({x:T,y:R,w:M,h:O,lx:w,ly:D,lineBoxManager:E,lineClamp:A,lineClampCount:y,isVertical:S},C,I,k),t.__isIbFull?(E.addItem(t,!1),S?(T+=t.outerWidth,R=D):(T=w,R+=t.outerHeight),E.setNotEnd(),y++):(!i&&n||E.addItem(t,!1),T=E.lastX,R=E.lastY),A&&A<=y&&(P=!0),C&&(x=Math.max(x,b),x=Math.max(x,S?O:M),b=S?t.outerHeight:t.outerWidth,x=Math.max(x,b))}else{B=!1,(S&&D<R||!S&&w<T)&&y++,A&&A<=y&&(P=!0),S?R=D:T=w,E.isEnd&&(S?T=E.endX:R=E.endY,E.setNotEnd(),E.setNewLine()),t.__layout({x:T,y:R,w:M,h:O,isVertical:S},C,I,k);var c,_,f,d,p,a,s,g,l,v,h,m,r="none"===t.currentStyle[X0];!r&&t.flowChildren&&0===t.flowChildren.length&&(e=(l=t.computedStyle)[z0],i=l[K0],n=l[j0],h=l[V0],m=l[J0],s=l[q0],_=l[Z0],a=l[$0],g=l[sd],f=l[ld],d=l[Q0],v=l[ed],p=l[td],l=l[rd],S&&a<=0&&s<=0&&g<=0&&l<=0&&v<=0?(L.push(i),F.push(h),c=!0):!S&&m<=0&&_<=0&&f<=0&&d<=0&&p<=0&&(L.push(n),F.push(e),c=!0)),S?(T+=t.outerWidth,E.__lastX=T):(R+=t.outerHeight,E.__lastY=R),C&&(x=Math.max(x,S?t.outerHeight:t.outerWidth),b=0),r||c?u!==N-1||(a=W0.getMergeMargin(F,L))&&(S?T+=a:R+=a):(g=(s=t.computedStyle)[z0],l=s[K0],v=s[j0],i=s[V0],L.length&&(S?(F.push(i),(h=W0.getMergeMargin(F,L))&&(t.__offsetX(h,!0),T+=h)):(F.push(g),(m=W0.getMergeMargin(F,L))&&(t.__offsetY(m,!0),R+=m))),F=[],L=[S?l:v])}else if(P||B)t.__layoutNone();else if(S&&R===D||!S&&T===w||!u||"nowrap"===Y)y=t.__layout({x:T,y:R,w:M,h:O,lx:w,ly:D,lineBoxManager:E,lineClamp:A,lineClampCount:y,isVertical:S}),T=E.lastX,R=E.lastY,!C&&"hidden"===G&&"nowrap"===Y&&(S&&O+1e-10<R-D||!S&&M+1e-10<T-w||o<y)?B=!0:A&&A<=y&&(P=!0),C&&("nowrap"===Y?b+=S?t.height:t.width:(b=S?t.height:t.width,o<y&&(b=Math.max(b,S?O:M))),x=Math.max(x,b));else if(-1e-10<=t.__tryLayInline(S?O+D-R:M+w-T))y=t.__layout({x:T,y:R,w:M,h:O,lx:w,ly:D,lineBoxManager:E,lineClamp:A,lineClampCount:y,isVertical:S}),T=E.lastX,R=E.lastY,A&&A<=y&&(P=!0),C&&(x=(y===o?b+=S?t.height:t.width:(x=Math.max(x,S?O:M),b=S?R-D:T-w),Math.max(x,b)));else{if(y++,R=S?(T=E.endX,D):(T=w,E.endY),E.setNewLine(),A&&A<=y)return t.__layoutNone(),P=!0,f=(_=E.list)[_.length-1],void hp(H,E,f,S?O:M,0);y=t.__layout({x:T,y:R,w:M,h:O,lx:w,ly:D,lineBoxManager:E,lineClamp:A,lineClampCount:y,isVertical:S}),T=E.lastX,R=E.lastY,A&&A<=y&&(P=!0),C&&(x=Math.max(x,b),x=Math.max(x,S?O:M),b=S?t.height:t.width,x=Math.max(x,b))}}),E.isEnd&&(S?T=E.endX:R=E.endY),a=o=0,o=f||!C&&!p&&!S?M:!C||S?T-t.x:x,a=d||!C&&p&&S?O:C&&S?x:R-t.y,this.__ioSize(o,a),C||((_=E.verticalAlign(S))&&(S&&!f?this.__resizeX(_):S||d||this.__resizeY(_),e=0,r=E.spreadList,n=i=!1,s.forEach(function(t){(t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0)&&-1<["block","flex"].indexOf(t.computedStyle[X0])?n&&(i=!0,S?t.__offsetX(r[e],!0):t.__offsetY(r[e],!0)):(i&&e++,i=!(n=!0))})),I||k||(-1<["center","right"].indexOf(u)&&(E.horizonAlign(S?a:o,u,S),s.forEach(function(t){(t=t instanceof Zs?t.shadowRoot:t)instanceof xs&&t.__inlineSize(S)})),E.domList.forEach(function(t){t.__inlineSize(S?a:o,u,S)}),this.__marginAuto(l,t,S))))}},{key:"__layoutFlex",value:function(r,_,f,d){var a=this,e=this.flowChildren,p=this.currentStyle,s=this.computedStyle,n=this.__flexLine,g=s[ud],v=s[gd],m=s[pd],y=s[Ed],E=s[bd],x=s[Ad],b=s[yd],A=s[hd],t=this.__preLayout(r,!1),T=t.fixedWidth,R=t.fixedHeight,M=t.x,O=t.y,l=t.w,h=t.h,S=t.isParentVertical,u=t.isVertical;if(_&&(T&&!u||R&&u))u?this.__ioSize(void 0,h):this.__ioSize(l,void 0);else if(f&&R)this.__ioSize(void 0,h);else if(d&&T)this.__ioSize(l,void 0);else{n.splice(0);var i,y=y||0,c=-1===["column","columnReverse"].indexOf(g),C=[],I=[],k=[],w=[],D=[],L=lp(e),F=(L.forEach(function(t){var e,r,i,n,o,a;t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0?(o=t.currentStyle,i=t.computedStyle,a=(r=Bt(t.__calBasis(c,_,f,{x:M,y:O,w:l,h:h},!0),3))[0],e=r[1],r=r[2],n=o[fd],o=o[_d],i[cd]=a,C.push(n),I.push(o),k.push(a),w.push(r),D.push(e)):(C.push(0),I.push(1),c&&u||!c&&!u?(i=new k0(M,O,b,(u?tp:Qd)(s),u),t.__layout({x:M,y:O,w:l,h:h,lineBoxManager:i,lineClamp:y,lineClampCount:0,isVertical:u},_,f,d),n=u?t.width:t.height,k.push(n),w.push(n),D.push(n)):(o=t.charWidth,a=t.textWidth,k.push(a),w.push(a),D.push(o)))}),c?l:h),N=-1<["wrap","wrapReverse"].indexOf(E),o=[],P=0,B=[],H=(k.forEach(function(t,e){var r=D[e],i=w[e],r=t<r?r:i<t?i:t;B.push(r),N?F<P+r?P=P?(n.push(o),o=[L[e]],r):(o.push(L[e]),n.push(o),o=[],0):(o.push(L[e]),P+=r):o.push(L[e])}),o.length&&n.push(o),0),Y={x:M,y:O,w:l,h:h},G=[];if(n.forEach(function(t){var e=t.length,r=H+e,t=Bt(a.__layoutFlexLine(Y,c,_,f,d,u,F,T,R,y,0,b,s,v,m,L.slice(H,r),t,A,C.slice(H,r),I.slice(H,r),k.slice(H,r),B.slice(H,r),D.slice(H,r)),3),r=t[0],i=t[1],t=t[2];c?Y.y=i:Y.x=r,M=Math.max(M,r),O=Math.max(O,i),G.push(t),H+=e}),_)return i=0,n.forEach(function(t){var e=0;t.forEach(function(t){c?e+=u?t.outerHeight:t.outerWidth:e=Math.max(e,u?t.outerHeight:t.outerWidth),t instanceof xs&&(u?t.textWidth>h&&(i=Math.max(i,h)):t.textWidth>l&&(i=Math.max(i,l)))}),i=Math.max(i,e)}),void(u?this.__ioSize(void 0,i):this.__ioSize(i,void 0));var W=0,U=0,W=T||!_&&!S&&!u?l:M-r.x,U=R||!_&&S&&u?h:O-r.y;if(this.__ioSize(W,U),!f&&!d){"rowReverse"===g?n.forEach(function(t){t.forEach(function(t){var e=W-t.outerWidth-2*(t.x-r.x);e&&t.__offsetX(e,!0)})}):"columnReverse"===g&&n.forEach(function(t){t.forEach(function(t){var e=U-t.outerHeight-2*(t.y-r.y);e&&t.__offsetY(e,!0)})});var X,V,z,K,j,t=n.length;if("wrapReverse"===E&&1<t){for(var $=0,Z=[],q=(G.forEach(function(t){Z.push($),$+=t}),0),J=t-1;0<=J;J--)!function(t){var e=n[t],r=Z[t],i=q-r;i&&e.forEach(function(t){c?t.__offsetY(i,!0):t.__offsetX(i,!0)}),q+=G[t]}(J);n.reverse()}1<t&&(R&&c||!c)&&(0<(V=c?U-(O-r.y):W-(M-r.x))&&("center"===x?(z=.5*V,L.forEach(function(t){c?t.__offsetY(z,!0):t.__offsetX(z,!0)})):"flexStart"===x||("flexEnd"===x?L.forEach(function(t){c?t.__offsetY(V,!0):t.__offsetX(V,!0)}):"spaceBetween"===x?(K=V/(t-1),n.forEach(function(t,e){e&&t.forEach(function(t){c?t.__offsetY(K,!0):t.__offsetX(K,!0)})})):"spaceAround"===x?(j=V/(t+1),n.forEach(function(t,e){t.forEach(function(t){c?t.__offsetY(j*(e+1),!0):t.__offsetX(j*(e+1),!0)})})):(X=V/t,n.forEach(function(t,e){e&&t.forEach(function(t){c?t.__offsetY(X*e,!0):t.__offsetX(X*e,!0)})}))))),f||d||(1<t?n.forEach(function(t,e){e=G[e];X&&(e+=X),a.__crossAlign(t,m,c,e)}):t&&(e=G[0],c?R&&(e=h):e=l,this.__crossAlign(n[0],m,c,e)),this.__marginAuto(p,r,u))}}}},{key:"__layoutFlexLine",value:function(e,o,_,a,f,s,r,d,p,g,v,m,y,E,x,b,A,T,R,M,i,O,S){var C=this,l=e.x,h=e.y,I=e.w,k=e.h,w=0,D=(O.forEach(function(t){w+=t}),r<=w),u=[],n=(i.forEach(function(t,e){D?(!M[e]||i[e]<O[e])&&(u[e]=O[e]):(!R[e]||i[e]>O[e])&&(u[e]=O[e])}),0),r=(i.forEach(function(t,e){void 0!==u[e]?n+=u[e]:n+=t}),1/0),r=o?I:p?k:n,n=Math.abs(r-n),c=0;if(D)for(var L=M.map(function(t,e){if(void 0===u[e])return t=t*i[e],c+=t,t});;){c<1&&(n*=c);var F=void 0,N=0;if(L.forEach(function(t,e){var r;t&&(r=t/c*n,(r=i[e]-r)<S[e]?(u[e]=S[e],L[e]=0,F=!0,n-=i[e]-S[e]):(u[e]=r,N+=t))}),!F)break;c=N}else for(var P=R.map(function(t,e){if(void 0===u[e])return c+=t,t});;){c<1&&(n*=c);var B=void 0,H=0;if(P.forEach(function(t,e){var r;t&&(r=t/c*n,(r=i[e]+r)<S[e]?(u[e]=S[e],P[e]=0,B=!0,n-=i[e]-S[e]):(u[e]=r,H+=t))}),!B)break;c=H}var Y=0,G=[],W=(b.forEach(function(t,e){var r,i,n,e=u[e];t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0?o?t.__layout({x:l,y:h,w:e,h:k,w3:e,isVertical:s},_,a,f):(r=(n=t.currentStyle)[dd],n=n[sd],_||a||f||(i=n[1]!==Xd||"stretch"===r||"auto"===r&&"stretch"===x||i)?t.__layout({x:l,y:h,w:I,h:e,h3:e,isVertical:s},_,a,f):(t.__layout({x:l,y:h,w:I,h:e,h3:e,isVertical:s},!0,a,f),t.__layout({x:l,y:h,w:I,w3:t.outerWidth,h:e,h3:e,isVertical:s},_,a,f))):(n=C.__lineBoxManager=new k0(l,h,m,(s?tp:Qd)(y),s),G.push(n),t.__layout({x:l,y:h,w:o?e:I,h:o?k:e,lineBoxManager:n,lineClamp:g,lineClampCount:v,isVertical:s})),Y=o?(l+=t.outerWidth,Math.max(Y,t.outerHeight)):(h+=t.outerHeight,Math.max(Y,t.outerWidth))}),o?I-l+e.x:k-h+e.y);if(!_&&!a&&!f&&0<W){var t=b.length;if("flexEnd"===E)for(var U=0;U<t;U++){var X=b[U];o?X.__offsetX(W,!0):X.__offsetY(W,!0)}else if("center"===E)for(var V=.5*W,z=0;z<t;z++){var K=b[z];o?K.__offsetX(V,!0):K.__offsetY(V,!0)}else if("spaceBetween"===E)for(var j=W/(t-1),$=1;$<t;$++){var Z=b[$];o?Z.__offsetX(j*$,!0):Z.__offsetY(j*$,!0)}else if("spaceAround"===E)for(var q=.5*W/t,J=0;J<t;J++){var Q=b[J];o?Q.__offsetX(q*(2*J+1),!0):Q.__offsetY(q*(2*J+1),!0)}else if("spaceEvenly"===E)for(var tt=W/(t+1),et=0;et<t;et++){var rt=b[et];o?rt.__offsetX(tt*(et+1),!0):rt.__offsetY(tt*(et+1),!0)}}return o?h+=Y:l+=Y,!_&&!a&&!f&&-1<["center","right"].indexOf(T)&&G.forEach(function(t){t.horizonAlign(s?t.height:t.width,T,s)}),[l,h,Y]}},{key:"__crossAlign",value:function(t,u,c,_){var f=0;t.forEach(function(t){f=Math.max(f,t.firstBaseline)}),t.forEach(function(t){var e,r,i,n,o,a,s,l,h=t.currentStyle[dd];c?"flexStart"===h||("flexEnd"===h?0!=(i=_-t.outerHeight)&&t.__offsetY(i,!0):"center"===h?0!=(i=_-t.outerHeight)&&t.__offsetY(.5*i,!0):"stretch"===h?(i=t.computedStyle,n=t.currentStyle[ld],a=i[Q0],s=i[td],o=i[z0],l=i[j0],r=i[J0],e=i[Z0],n[1]===Xd&&(n=t.height,i=(t.__height=i[ld]=_-o-l-r-e-a-s)-n,t.__sy4+=i,t.__sy5+=i,t.__sy6+=i,t.__height+=i,t.__clientHeight+=i,t.__offsetHeight+=i,t.__outerHeight+=i)):"baseline"===h?0!=(o=f-t.firstBaseline)&&t.__offsetY(o,!0):"flexStart"===u||("center"===u?0!=(l=_-t.outerHeight)&&t.__offsetY(.5*l,!0):"flexEnd"===u?0!=(r=_-t.outerHeight)&&t.__offsetY(r,!0):"baseline"===u?0!=(e=f-t.firstBaseline)&&t.__offsetY(e,!0):(a=t.computedStyle,n=(s=t.currentStyle)[X0],i=s[ud],o=s[ld],c&&"flex"===n&&"column"===i&&o[1]===Xd&&t.outerHeight<_&&t.__layout(Object.assign(t.__layoutData,{h3:_})),l=a[Q0],r=a[td],e=a[z0],s=a[j0],n=a[J0],i=a[Z0],o[1]===Xd&&(a=t.height,t.__sy4+=o=_-e-s-n-i-l-r-a,t.__sy5+=o,t.__sy6+=o,t.__height+=o,t.__clientHeight+=o,t.__offsetHeight+=o,t.__outerHeight+=o)))):"flexStart"===h||("flexEnd"===h?0!=(e=_-t.outerWidth)&&t.__offsetX(e,!0):"center"===h?0!=(s=_-t.outerWidth)&&t.__offsetX(.5*s,!0):"stretch"===h?(n=t.computedStyle,i=t.currentStyle[sd],l=n[ed],r=n[rd],a=n[K0],o=n[V0],e=n[q0],s=n[$0],i[1]===Xd&&(h=t.width,i=(t.__width=n[sd]=_-o-a-s-e-l-r)-h,t.__sx4+=i,t.__sx5+=i,t.__sx6+=i,t.__width+=i,t.__clientWidth+=i,t.__offsetWidth+=i,t.__outerWidth+=i)):"baseline"===u?0!=(n=f-t.firstBaseline)&&t.__offsetX(n,!0):"flexStart"===u||("center"===u?0!=(o=_-t.outerWidth)&&t.__offsetX(.5*o,!0):"flexEnd"===u?0!=(a=_-t.outerWidth)&&t.__offsetX(a,!0):"baseline"===u?0!=(s=f-t.firstBaseline)&&t.__offsetX(s,!0):(e=t.computedStyle,l=t.currentStyle[sd],r=e[ed],h=e[rd],i=e[K0],n=e[V0],o=e[q0],a=e[$0],l[1]===Xd&&(s=t.width,l=(t.__width=e[sd]=_-n-i-a-o-r-h)-s,t.__sx4+=l,t.__sx5+=l,t.__sx6+=l,t.__width+=l,t.__clientWidth+=l,t.__offsetWidth+=l,t.__outerWidth+=l))))})}},{key:"__layoutInline",value:function(e,g,v,m,y){var r=this.flowChildren,i=this.currentStyle,t=this.computedStyle,n=t[hd],E=t[md],s=t[Ed],o=t[yd],a=t[z0],x=t[j0],b=t[V0],A=t[K0],T=t[Q0],R=t[td],M=t[rd],O=t[ed],S=t[J0],C=t[Z0],I=t[$0],k=t[q0],l=e.lineClampCount||0,w=this.__preLayout(e,y),D=w.fixedWidth,L=w.fixedHeight,h=w.x,u=w.y,c=w.w,_=w.h,f=w.lx,F=w.ly,d=w.lineBoxManager,N=w.endSpace,P=w.selfEndSpace,p=w.isVertical;if(g&&(D&&!p||L&&p))return p?this.__ioSize(void 0,_):this.__ioSize(c,void 0),l;var B=i[sd];if(!(y=y&&!this.__isRealInline()?!1:y)){if(v&&L)return this.__ioSize(void 0,_),l;if(m&&D)return this.__ioSize(c,void 0),l}y?(this.__config[Dd]=!0,this.__lineBoxManager=d,w=(p?tp:Qd)(t),(p&&(a||x||S||C||T||R)||!p&&(b||A||I||k||M||O))&&d.isNewLine?d.genLineBoxByInlineIfNewLine(h,u,o,w):d.setLbByInlineIfNotNewLine(o,w),s=e.lineClamp||0):(d=this.__lineBoxManager=new k0(h,u,o,(p?tp:Qd)(t),p),f=h,F=u,N=P=l=0),y&&(this.contentBoxList.splice(0),d.pushContentBoxList(this));for(var H=this;"inline"===H.computedStyle[X0];)H=H.domParent;var Y,G,W,U=H.computedStyle[Td],X=!1,V=r.length,z=!1,K=!1;return r.forEach(function(t,e){if(z||K)t.__layoutNone();else{var r=t instanceof p0||t instanceof Zs&&t.shadowRoot instanceof p0,i=(r&&t.__computeReflow(),r&&"inline"===t.computedStyle[X0]),n=r&&"inlineBlock"===t.computedStyle[X0],o=i&&t.__isRealInline(),a=(y&&!Y&&("nowrap"===E||!r&&e===V-1||s&&e===V-1||l===s-1)&&(Y=!0,N+=P),l);if(r)if(i||n||(t.currentStyle[X0]=t.computedStyle[X0]="inlineBlock",n=!0,Rt.warn("Inline can not contain block/flex")),p&&u===F||!p&&h===f||!e||"nowrap"===E)l=t.__layout({x:h,y:u,w:c,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isVertical:p},g,v,m),t.__isIbFull&&l++,t.__isIbFull&&"nowrap"!==E?((p&&_[1]===Xd||!p&&c[1]===Xd)&&(X=!0),d.addItem(t,!0),p?(h+=t.outerWidth,u=F):(h=f,u+=t.outerHeight),d.setNotEnd()):(!n&&o||d.addItem(t,!1),h=d.lastX,u=d.lastY),!g&&"hidden"===U&&"nowrap"===E&&(p&&_+1e-10<u-F||!p&&c+1e-10<h-f||a<l)?K=!0:s&&s<=l&&(z=!0);else if(-1e-10<=t.__tryLayInline(p?_+F-u-N:c+f-h-N,p?_:c,p))l=t.__layout({x:h,y:u,w:c,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isVertical:p},g,v,m),!n&&o||d.addItem(t,!1),h=d.lastX,u=d.lastY,s&&s<=l&&(z=!0);else{if(l++,u=p?(h=d.endX,F):(h=f,d.endY),d.setNewLine(),s&&s<=l)return t.__layoutNone(),z=!0,i=(r=d.list)[r.length-1],void hp(H,d,i,c,N);l=t.__layout({x:h,y:u,w:c,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isVertical:p},g,v,m),t.__isIbFull?(d.addItem(t,!0),p?(h+=t.outerWidth,u=F):(h=f,u+=t.outerHeight),d.setNotEnd(),l++):(!n&&o||d.addItem(t,!1),h=d.lastX,u=d.lastY),s&&s<=l&&(z=!0)}else{r=d.size;if(p&&u===F||!p&&h===f||!e||"nowrap"===E)l=t.__layout({x:h,y:u,w:c,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isVertical:p},g,v,m),h=d.lastX,u=d.lastY,!y&&1<d.size-r&&B[1]===Xd&&(X=!0),!g&&"hidden"===U&&"nowrap"===E&&(p&&_+1e-10<u-F||!p&&c+1e-10<h-f||a<l)?K=!0:s&&s<=l&&(z=!0);else if(-1e-10<=t.__tryLayInline(p?_+F-u-N:c+f-h-N))l=t.__layout({x:h,y:u,w:c,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isVertical:p},g,v,m),h=d.lastX,u=d.lastY,s&&s<=l&&(z=!0);else{if(l++,u=p?(h=d.endX,F):(h=f,d.endY),d.setNewLine(),s&&s<=l)return t.__layoutNone(),z=!0,n=(i=d.list)[i.length-1],void hp(H,d,n,c,N);l=t.__layout({x:h,y:u,w:c,h:_,lx:f,ly:F,lineBoxManager:d,endSpace:N,lineClamp:s,lineClampCount:l,isVertical:p},g,v,m),h=d.lastX,u=d.lastY,!y&&1<d.size-r&&B[1]===Xd&&(X=!0),s&&s<=l&&(z=!0)}}}}),p?h=d.endX:u=d.endY,this.__isIbFull=X,y?(P&&(p?d.addY(P):d.addX(P)),r.length||(i=t[z0],a=t[V0],x=t[J0],S=t[$0],C=t[Q0],T=t[rd],p?d.addY(i+x+C):d.addX(a+S+T)),d.popContentBoxList(),g&&this.__inlineSize(0,"left",p)):(R=d.max-(p?e.y:e.x),W=p?(G=D?c:h-e.x,L?_:X?Math.max(_,R):R):(G=D?c:X?Math.max(c,R):R,L?_:u-e.y),this.__ioSize(G,W)),g||y||((b=d.verticalAlign(p))&&(p&&!D?this.__resizeX(b):p||L||this.__resizeY(b)),v||m||(-1<["center","right"].indexOf(n)&&(d.horizonAlign(p?W:G,n,p),r.forEach(function(t){(t=t instanceof Zs?t.shadowRoot:t)instanceof xs&&t.__inlineSize(p)})),d.domList.forEach(function(t){t.__inlineSize(p?W:G,n,p)}))),l}},{key:"__inlineSize",value:function(u,c,_){var r,f,i,d,n,o,p,g,a,v,m,y,E,x,b,A,T,R=this.contentBoxList,t=this.computedStyle,e=this.__ox,s=this.__oy,M=t[X0],O=t[z0],S=t[K0],C=t[j0],I=t[V0],k=t[J0],l=t[q0],h=t[Z0],w=t[$0],D=t[Q0],L=t[ed],F=t[td],N=t[rd],P=t[yd];"none"!==M&&((T=R.length)?(R.forEach(function(t,e){e?(i=Math.min(i,t.x),p=Math.min(p,t.x),m=Math.min(m,t.x),b=Math.min(b,t.x),e===T-1?(r=n=a=E=Math.max(r,t.x+t.outerWidth),f=o=v=x=Math.max(f,t.y+t.outerHeight),n+=l,o+=h,a+=l+L,v+=h+F,E+=L+l+S,x+=F+h+C):r=n=a=E=Math.max(r,t.x+t.outerWidth)):(i=t.x,d=t.y,b=(m=(p=i-w)-N)-I,A=(y=(g=d-k)-D)-O,r=n=a=E=t.x+t.outerWidth,f=o=v=x=t.y+t.outerHeight,e===T-1&&(n+=l,o+=h,a+=l+L,v+=h+F,E+=L+l+S,x+=F+h+C))}),this.__x=b,this.__y=A,this.__width=t[sd]=r-i,this.__height=t[ld]=Math.max(P,f-d),this.__clientWidth=n-p,this.__clientHeight=o-g,this.__offsetWidth=a-m,this.__offsetHeight=v-y,this.__outerWidth=E-b,this.__outerHeight=x-A,this.__sx=b+e,this.__sy=A+s,this.__sx1=m+e,this.__sy1=y+s,this.__sx2=p+e,this.__sy2=g+s,this.__sx3=i+e,this.__sy3=d+s,this.__sx4=r+e,this.__sy4=f+s,this.__sx5=n+e,this.__sy5=o+s,this.__sx6=a+e,this.__sy6=v+s,-1<["center","right"].indexOf(c)&&this.children.forEach(function(t){t instanceof xs&&t.__inlineSize(_)})):(R=M=0,-1<["center","right"].indexOf(c)&&(t=u,"center"===c&&(t*=.5),0<t&&(_?this.__offsetY(t,!0):this.__offsetX(t,!0))),_?(this.__ioSize(M=P,0),this.__sx-=I+w+N):(this.__ioSize(0,R=P),this.__sy-=O+k+D),this.__sx1=this.__sx+I,this.__sy1=this.__sy+O,this.__sx2=this.__sx1+N,this.__sy2=this.__sy1+D,this.__sx4=this.__sx3=this.__sx2+w,this.__sy4=this.__sy3=this.__sy2+k,this.__sx5=this.__sx4+M+l,this.__sy5=this.__sy4+R+h,this.__sx6=this.__sx5+L,this.__sy6=this.__sy5+F,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+I+S,this.__outerHeight=this.__offsetHeight+O+C))}},{key:"__layoutAbs",value:function(r,y,E){var x=this,b=r.sx,A=r.sy,T=r.clientWidth,R=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,i=this.children,n=this.absChildren,o=t[X0],a=t[Q0],s=t[rd],l=t[z0],h=t[V0],M=t[$0],O=t[J0];e||"none"===o?this.__layoutNone():(b+=h+s,A+=l+a,n.forEach(function(t){if(E){var e=t;if(t instanceof Zs&&(e=t.shadowRoot),E!==e&&E!==t)return}var e=t.currentStyle,r=t.computedStyle;if(t.isDestroyed||"none"===e[X0])t.__layoutNone();else{t.__computeReflow(),t.__mp(e,r,T);var i,n,o,u,c,_,f,d,p,a=e[ad],g=e[id],v=e[nd],m=e[od],s=e[sd],e=e[ld];if(a[1]!==Xd?r[ad]=x.__calSize(a,T,p=!0):r[ad]="auto",v[1]!==Xd?r[nd]=x.__calSize(v,T,f=!0):r[nd]="auto",g[1]!==Xd?r[id]=x.__calSize(g,R,_=!0):r[id]="auto",m[1]!==Xd?r[od]=x.__calSize(m,R,d=!0):r[od]="auto",p&&f?(i=b+r[ad],n=T-r[nd]-r[ad]):p?(i=b+r[ad],s[1]!==Xd&&(n=x.__calSize(s,T,!0))):f?(s[1]!==Xd?n=x.__calSize(s,T,!0):u=!0,i=b+T-r[nd]-(n||0),i=(i=(i=(i=(i=(i-=r[V0])-r[K0])-r[$0])-r[q0])-r[rd])-r[ed]):(i=b+M,s[1]!==Xd&&(n=x.__calSize(s,T,!0))),_&&d)l=A+r[id],o=R-r[id]-r[od];else if(_)l=A+r[id],e[1]!==Xd&&(o=x.__calSize(e,R,!0));else if(d)e[1]!==Xd?o=x.__calSize(e,R,!0):c=!0,l=A+R-r[od]-(o||0),l=(l=(l=(l=(l=(l-=r[z0])-r[j0])-r[J0])-r[Z0])-r[Q0])-r[td];else{for(var l=A+O,h=t.prev;h;){if(h instanceof xs||"absolute"!==h.computedStyle[U0]){l=h.y+h.outerHeight;break}h=h.prev}e[1]!==Xd&&(o=x.__calSize(e,R,!0))}a=u?i-b:T+b-i,v=c?l-A:R+A-l;void 0===n&&(t.__layout({x:i,y:l,w:a,h:v,isVertical:y.isVertical},!0,!1),a=t.outerWidth),t.__layout({x:i,y:l,w:a,h:v,w2:n,h2:o,isVertical:y.isVertical},!1,!1),u&&t.__offsetX(-t.outerWidth,!0),c&&t.__offsetY(-t.outerHeight,!0)}}),i.forEach(function(t){if(E){var e=t;if(t instanceof Zs&&(e=t.shadowRoot),E!==e&&E!==t)return}t instanceof u?t.__layoutAbs(Jd(t)?t:r,y):t instanceof Zs&&((e=t.shadowRoot)instanceof u&&e.__layoutAbs(e,y))}),this.__execAr())}},{key:"render",value:function(t,e,r,i,n,o){var r=N(F(u.prototype),"render",this).call(this,t,e,r,i,n,o),a=this.__ellipsis;return a&&a.render(t,e,r.ctx,i,n,o),t===op&&(this.virtualDom.type="dom"),r}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),this.__ellipsis&&this.__ellipsis.__destroy(),N(F(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return N(F(u.prototype),"__emitEvent",this).call(this,t,e);var e=this.isDestroyed,r=this.computedStyle,i=this.isMask;if(!(e||"none"===r[X0]||t.__stopPropagation||i)&&("hidden"!==r[Td]||this.willResponseEvent(t,!0))){var n,e=t.event.type,i=this.listener,o=this.zIndexChildren;i.hasOwnProperty(e)&&(n=i[e]);for(var a=o.length-1;0<=a;a--){var s=o[a];if((s instanceof p0||s instanceof Zs&&s.shadowRoot instanceof p0)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(ip(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0)}return N(F(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){N(F(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(e,r){var i=this;if(!rp(e)&&!i.isDestroyed){var n,o=i.root,t=i.host;if(!(-1<[w.TYPE_VD,w.TYPE_GM,w.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in appendChild.");e.vd&&(o.delRefreshTask(e.vd.__task),e.vd.remove()),n=w.TYPE_CP===e.$$type?Ws.initCp2(e,o,t,i):Ws.initDom(e,o,t,i),o.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.push(e);var t=i.children.length,t=(t&&(((t=i.children[t-1]).__next=n).__prev=t),i.children.push(n),i.__zIndexChildren=null,{});t[Ld]=n,t[Fd]=Na.REFLOW,t[Nd]=!0,t[Pd]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,t)},__after:function(t){ip(r)&&r.call(n,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!rp(e)&&!i.isDestroyed){var n,o=i.root,t=i.host;if(!(-1<[w.TYPE_VD,w.TYPE_GM,w.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(o.delRefreshTask(e.vd.__task),e.vd.remove()),n=w.TYPE_CP===e.$$type?Ws.initCp2(e,o,t,i):Ws.initDom(e,o,t,i),o.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.unshift(e);i.children.length&&(((t=i.children[0]).__prev=n).__next=t),i.children.unshift(n),i.__zIndexChildren=null;var t={};t[Ld]=n,t[Fd]=Na.REFLOW,t[Nd]=!0,t[Pd]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,t)},__after:function(t){ip(r)&&r.call(n,t)}})}}},{key:"insertBefore",value:function(a,e){var s=this;if(!rp(a)&&!s.isDestroyed&&s.domParent){var l,h=s.root,u=s.domParent,t=u.hostRoot;if(!(-1<[w.TYPE_VD,w.TYPE_GM,w.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertBefore.");a.vd&&(h.delRefreshTask(a.vd.__task),a.vd.remove()),l=w.TYPE_CP===a.$$type?Ws.initCp2(a,h,t,u):Ws.initDom(a,h,t,u),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=u.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,a),l.__next=s,l.__prev=s.__prev,s.__prev=l,u.children.splice(e,0,l)):(i&&(((o=u.children[0]).__prev=l).__next=o),r.unshift(a),u.children.unshift(l)),u.__zIndexChildren=null;var o={};o[Ld]=l,o[Fd]=Na.REFLOW,o[Nd]=!0,o[Pd]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,o)},__after:function(t){ip(e)&&e.call(l,t)}})}}},{key:"insertAfter",value:function(a,e){var s=this;if(!rp(a)&&!s.isDestroyed&&s.domParent){var l,h=s.root,u=s.domParent,t=u.hostRoot;if(!(-1<[w.TYPE_VD,w.TYPE_GM,w.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertAfter.");a.vd&&(h.delRefreshTask(a.vd.__task),a.vd.remove()),l=w.TYPE_CP===a.$$type?Ws.initCp2(a,h,t,u):Ws.initDom(a,h,t,u),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=u.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,a),l.__prev=s,l.__next=s.__next,s.__next=l,u.children.splice(e+1,0,l)):(i&&(((o=u.children[i-1]).__next=l).__prev=o),r.push(a),u.children.push(l)),u.__zIndexChildren=null;var o={};o[Ld]=l,o[Fd]=Na.REFLOW,o[Nd]=!0,o[Pd]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,o)},__after:function(t){ip(e)&&e.call(l,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof p0||t instanceof Zs))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return Rt.warn("Remove parent is destroyed."),void(ip(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Zs?t.shadowRoot:t)instanceof xs||"absolute"!==t.currentStyle[U0]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Zs?t.shadowRoot:t)instanceof p0&&"absolute"===t.currentStyle[U0]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseline",get:function(){var t=this.computedStyle,e=t[z0],r=t[Q0],i=t[J0],t=t[Sd];return this.lineBoxManager&&this.lineBoxManager.size&&0!==t.indexOf("vertical")?e+r+i+this.lineBoxManager.baseline:this.offsetHeight}},{key:"firstBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[z0]+t[Q0]+t[J0]+this.lineBoxManager.firstBaseline}},{key:"verticalBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return 0;var t=this.computedStyle,e=t[V0],r=t[rd],i=t[$0],t=t[Sd];return this.lineBoxManager&&this.lineBoxManager.size&&-1!==t.indexOf("vertical")?e+r+i+this.lineBoxManager.verticalBaseline:0}}]),u}(),gi=A.STYLE_KEY,cp=gi.WIDTH,_p=gi.HEIGHT,fp=gi.DISPLAY,dp=gi.BORDER_TOP_WIDTH,pp=gi.BORDER_RIGHT_WIDTH,gp=gi.BORDER_LEFT_WIDTH,vp=gi.BORDER_BOTTOM_WIDTH,mp=gi.BORDER_TOP_LEFT_RADIUS,yp=gi.BORDER_TOP_RIGHT_RADIUS,Ep=gi.BORDER_BOTTOM_RIGHT_RADIUS,xp=gi.BORDER_BOTTOM_LEFT_RADIUS,bp=gi.VISIBILITY,Ap=gi.BACKGROUND_IMAGE,Tp=gi.BACKGROUND_COLOR,Rp=gi.BOX_SHADOW,Mp=gi.MIX_BLEND_MODE,Op=gi.MARGIN_RIGHT,Sp=gi.MARGIN_LEFT,Cp=gi.PADDING_RIGHT,Ip=gi.PADDING_LEFT,kp=gi.FONT_SIZE,wp=gi.FLEX_BASIS,e=A.UPDATE_KEY,Dp=e.UPDATE_NODE,Lp=e.UPDATE_FOCUS,Fp=e.UPDATE_CONFIG,mi=A.NODE_KEY,Np=mi.NODE_CACHE,Pp=mi.NODE_DEFS_CACHE,Bp=mi.NODE_IS_MASK,Hp=r.AUTO,Yp=r.PX,Gp=r.PERCENT,Wp=r.REM,Up=r.VW,Xp=r.VH,Vp=r.VMAX,zp=r.VMIN,Kp=r.RGBA,jp=se.canvasPolygon,$p=se.svgPolygon,Zp=Tt.isFunction,qp=function(){d(L,up);var i=p(L);function L(t,e){_(this,L);var e=(t=i.call(this,t,e)).props.src,r=t.__loadImg={src:e};return e?(e=Rt.IMG[e])&&e.state===Rt.LOADED&&(r.source=e.source,r.width=e.width,r.height=e.height):r.error=!0,t.__config[Bp]&&(r=(e=l(t)).style,e=e.currentStyle,r[Ap]=e[Ap]=[null],r[Tp]=e[Tp]=[[0,0,0,0],Kp],r[dp]=e[dp]=[0,Yp],r[pp]=e[pp]=[0,Yp],r[gp]=e[gp]=[0,Yp],r[vp]=e[vp]=[0,Yp],r[Rp]=e[Rp]=null,r[Mp]=e[Mp]="normal"),t}return f(L,[{key:"__preLayout",value:function(t,e){var r,t=N(F(L.prototype),"__preLayout",this).call(this,t,!1),i=this.__loadImg;return i.error||(r=i.src,(r=Rt.IMG[r])&&r.state===Rt.LOADED&&(i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),t.fixedWidth&&t.fixedHeight||(i.error&&!this.props.placeholder?t.fixedWidth?t.h=t.w:t.fixedHeight?t.w=t.h:t.w=t.h=32:i.source?t.fixedWidth?t.h=t.w*i.height/i.width:t.fixedHeight?t.w=t.h*i.width/i.height:(t.w=i.width,t.h=i.height):t.w=t.h=0,t.fixedWidth=!0,t.fixedHeight=!0),t}},{key:"__addGeom",value:function(t,e){e=Tt.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),N(F(L.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){t=N(F(L.prototype),"__calContent",this).call(this,t,e,r,i);return t||(e=this.__loadImg,"hidden"!==i[bp]&&(i[cp]||i[_p])&&e.source&&(t=!0)),t}},{key:"render",value:function(t,e,r,u){var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,_=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,e=N(F(L.prototype),"render",this).call(this,t,e,r,u,c,_),i=(t===et.WEBGL&&(c=e.dx,_=e.dy),e.offscreenBlend),n=e.offscreenMask,o=e.offscreenFilter,f=e.offscreenOverflow,a=this.width,s=this.height,d=this.isDestroyed,p=this.props.placeholder,g=this.computedStyle,l=this.computedStyle,v=l[fp],m=l[mp],y=l[yp],E=l[Ep],x=l[xp],l=l[bp],b=this.virtualDom,A=this.__config,h=this.__loadImg,T=this.root;if(i&&(r=i.target.ctx),n&&(r=n.target.ctx),o&&(r=o.target.ctx),f&&(r=f.target.ctx),h.source||h.error||h.loading||this.__loadAndRefresh(h,T,r,p,g,a,s),d||"none"===v||"hidden"===l)return e;i=A[Np],u&&i&&i.enabled&&(r=i.ctx),n=e.x3+c,o=e.y3+_,f=h.source;if(h.error&&!p&&L.showError){var T=.02*Math.min(a,s),g=n+.7*a,d=o+.3*s,v=5*T,R=[[n+.15*a,o+.7*s],[n+.3*a,o+.4*s],[n+.5*a,o+.6*s],[n+.6*a,o+.5*s],[n+.9*a,o+.8*s],[n+.15*a,o+.8*s]];if(t===et.CANVAS||t===et.WEBGL){r.strokeStyle="#CCC",r.lineWidth=T,r.fillStyle="#DDD",r.beginPath(),r.moveTo(n,o),r.lineTo(n+a,o),r.lineTo(n+a,o+s),r.lineTo(n,o+s),r.lineTo(n,o),r.stroke(),r.closePath(),r.beginPath();l=ie.ellipsePoints(g,d,v,v);se.canvasPolygon(r,l,0,0),r.fill(),r.closePath(),r.beginPath(),r.moveTo(R[0][0],R[0][1]);for(var M=1,O=R.length;M<O;M++){var S=R[M];r.lineTo(S[0],S[1])}r.lineTo(R[0][0],R[0][1]),r.fill(),r.closePath()}else if(t===et.SVG){this.__addGeom("rect",[["x",n],["y",o],["width",a],["height",s],["stroke","#CCC"],["stroke-width",T],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",g],["cy",d],["r",v],["fill","#DDD"]]);for(var C="",I=0,k=R.length;I<k;I++){var w=R[I];I&&(C+=" "),C+=w[0]+","+w[1]}this.__addGeom("polygon",[["points",C],["fill","#DDD"]])}}else if(f){var D,u=Ve.calRadius(n,o,a,s,m,y,E,x);if(t===et.CANVAS||t===et.WEBGL)u?(r.save(),r.beginPath(),jp(r,u,c,_),r.clip(),r.closePath(),r.drawImage(f,n,o,a,s),r.restore()):r.drawImage(f,n,o,a,s);else if(t===et.SVG){if(h.cache)return h.cache.cache=!0,b.children=[h.cache],void(!b.cache&&u&&(i={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",$p(u)],["fill","#FFF"]]}]},l=r.add(i),A[Pp].push(i),b.conClip="url(#"+l+")"));a===h.width&&s===h.height||(D=fl.matrixResize(h.width,h.height,a,s,n,o,a,s));T=[["xlink:href",h.error?p:h.src],["x",n],["y",o],["width",h.width],["height",h.height]],v=(u&&(g={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",$p(u)],["fill","#FFF"]]}]},d=r.add(g),A[Pp].push(g),b.conClip="url(#"+d+")",delete b.cache),D&&!Ht.isE(D)&&T.push(["transform","matrix("+Tt.joinArr(Ht.m2m6(D),",")+")"]),{type:"img",tagName:"image",props:T});b.children=[v],h.cache=v}}return e}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return N(F(L.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[cp],n=r[_p],o=r[Sp],a=r[Op],s=r[Ip],r=r[Cp],l=this.computedStyle,h=l[gp],l=l[pp];return i[1]!==Hp?t-=this.__calSize(i,e,!0):(i=this.__loadImg).source&&(n[1]===Yp?t-=i.width*n[0]/i.height:n[1]===Gp?t-=i.width*n[0]*e*.01/i.height:n[1]===Wp?t-=i.width*n[0]*this.root.computedStyle[kp]/i.height:n[1]===Up?t-=i.width*n[0]*this.root.width*.01/i.height:n[1]===Xp?t-=i.width*n[0]*this.root.height*.01/i.height:n[1]===Vp?t-=n[0]*Math.max(this.root.width,this.root.height)*.01/i.height:n[1]===zp?t-=n[0]*Math.min(this.root.width,this.root.height)*.01/i.height:t-=i.width),t=(t=(t=(t-=this.__calSize(a,e,!0))-this.__calSize(r,e,!0)-l)-this.__calSize(o,e,!0))-this.__calSize(s,e,!0)-h}},{key:"__calBasis",value:function(t,u,c,e,_){this.__computeReflow();var r=0,i=0,n=0,o=this.currentStyle,f=this.computedStyle,d=this.__loadImg,a=e.w,p=e.h,s=o[wp],l=o[cp],h=o[_p],g=t?l:h,h=t?h:l;return-1<[Yp,Gp,Wp,Up,Xp,Vp,zp].indexOf(s[1])?r=n=i=this.__calSize(s,t?a:p,!0):-1<[Yp,Gp,Wp,Up,Xp,Vp,zp].indexOf(g[1])?r=n=i=this.__calSize(g,t?a:p,!0):(d.source||d.error)&&(l=this.__preLayout(e),r=n=i=h[1]!==Hp?(h=this.__calSize(h,t?p:a,!0),s=l.w/l.h,t?h*s:h/s):t?l.w:l.h),this.__addMBP(t,a,o,f,[r,i,n],_)}},{key:"__loadAndRefresh",value:function(r,i,n,o,a,s,l,h){var u=this;(r.source||r.error)&&(i.delRefreshTask(u.__task),i.addRefreshTask(u.__task={__before:function(){var t;u.__task=null,u.isDestroyed||((t={})[Dp]=u,t[Lp]=Na.REFLOW,t[Fp]=u.__config,i.__addUpdate(u,u.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,Rt.measureImg(r.src,function(t){if(t.url===r.src&&!u.isDestroyed){var e=function(){var t=u.currentStyle,e=t[cp],t=t[_p];i.delRefreshTask(u.__task),e[1]!==Hp&&t[1]!==Hp?i.addRefreshTask(u.__task={__before:function(){var t;u.__task=null,u.isDestroyed||((t={})[Dp]=u,t[Lp]=Na.REPAINT,t[Fp]=u.__config,i.__addUpdate(u,u.__config,i,i.__config,t))},__after:function(){Zp(h)&&h.call(u)}}):i.addRefreshTask(u.__task={__before:function(){var t;u.__task=null,u.isDestroyed||((t={})[Dp]=u,t[Lp]=Na.REFLOW,t[Fp]=u.__config,i.__addUpdate(u,u.__config,i,i.__config,t))},__after:function(){Zp(h)&&h.call(u)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(o)return void Rt.measureImg(o,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:n,root:i,width:s,height:l});r.error=!0}"none"!==a[fp]&&e()}},{ctx:n,root:i,width:s,height:l})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,n=this.root;t===i.src||!t&&i.error?Zp(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,n,n.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,n.delRefreshTask(r.__task),n.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[Dp]=r,t[Lp]=Na.REFLOW,t[Fp]=r.__config,n.__addUpdate(r,r.__config,n,r.__config,t))},__after:function(t){Zp(e)&&e(t)}}))}},{key:"appendChild",value:function(){Rt.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}},{key:"isReplaced",get:function(){return!0}}]),L}(),Jp=(o(qp,"showError",!0),function(){function e(t){_(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return f(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}()),yi=A.STYLE_KEY,Qp=yi.MARGIN_RIGHT,t1=yi.MARGIN_LEFT,e1=yi.PADDING_RIGHT,r1=yi.PADDING_LEFT,i1=yi.WIDTH,n1=yi.HEIGHT,o1=yi.BORDER_RIGHT_WIDTH,a1=yi.BORDER_LEFT_WIDTH,s1=yi.FILL,l1=yi.STROKE,h1=yi.STROKE_MITERLIMIT,u1=yi.STROKE_WIDTH,c1=yi.STROKE_LINECAP,_1=yi.STROKE_LINEJOIN,f1=yi.STROKE_DASHARRAY,d1=yi.STROKE_DASHARRAY_STR,p1=yi.FILL_RULE,g1=yi.VISIBILITY,v1=yi.FLEX_BASIS,Ii=A.NODE_KEY,m1=Ii.NODE_CACHE_PROPS,y1=Ii.NODE_CURRENT_PROPS,E1=Ii.NODE_CURRENT_STYLE,x1=Ii.NODE_STYLE,b1=Ii.NODE_DEFS_CACHE,A1=r.AUTO,T1=r.PX,R1=r.PERCENT,M1=r.REM,O1=r.VW,S1=r.VH,C1=r.VMAX,I1=r.VMIN,k1=r.RGBA,w1=r.GRADIENT,D1=Tt.int2rgba,L1=Tt.isNil,F1=Tt.joinArr,N1=se.canvasPolygon,P1=se.svgPolygon,B1={},H1=function(){d(w,p0);var r=p(w);function w(t,e){_(this,w),(t=r.call(this,t,e)).__isMulti=!!t.props.multi,t.__style=bn.normalize(t.style,Dt.DOM_ENTRY_SET.concat(Dt.GEOM_ENTRY_SET)),t.__currentStyle=Tt.extend({},t.__style),t.__currentProps=Tt.clone(t.props);e=t.__config;return e[m1]=t.__cacheProps={},e[y1]=t.__currentProps,e[E1]=t.__currentStyle,e[x1]=t.__style,t}return f(w,[{key:"__tryLayInline",value:function(t,e){this.__computeReflow();var r=this.currentStyle,i=r[i1],n=r[t1],o=r[Qp],a=r[r1],r=r[e1],s=this.computedStyle,l=s[a1],s=s[o1];return i[1]!==A1&&(t-=this.__calSize(i,e,!0)),t=(t=(t=(t-=this.__calSize(o,e,!0))-this.__calSize(r,e,!0)-s)-this.__calSize(n,e,!0))-this.__calSize(a,e,!0)-l}},{key:"__calBasis",value:function(t,u,c,e,r){this.__computeReflow();var i=0,n=0,o=0,a=this.currentStyle,_=this.computedStyle,s=e.w,e=e.h,l=a[v1],h=a[i1],f=a[n1],h=t?h:f;return-1<[T1,R1,M1,O1,S1,C1,I1].indexOf(l[1])?i=o=n=this.__calSize(l,t?s:e,!0):-1<[T1,R1,M1,O1,S1,C1,I1].indexOf(h[1])&&(i=o=n=this.__calSize(h,t?s:e,!0)),this.__addMBP(t,s,a,_,[i,n,o],r)}},{key:"__layoutBlock",value:function(t,e,r,i){var n=this.__preLayout(t,!1),o=n.fixedWidth,a=n.fixedHeight,u=n.w,c=n.h,s=n.isParentVertical,n=n.isVertical,l=0,h=0;this.__ioSize(l=!o&&(e||s||n)?l:u,h=a||!e&&s&&n?c:h),e||r||i||(this.__marginAuto(this.currentStyle,t),this.__config[m1]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t,e,r,i){this.__layoutBlock(t,e,r,i)}},{key:"__layoutInline",value:function(t,e,r){var t=this.__preLayout(t,!1),i=t.fixedWidth,n=t.fixedHeight,o=(t.x,t.y,t.w),t=t.h;this.__ioSize(i?o:0,n?t:0),this.__config[m1]=this.__cacheProps={}}},{key:"__calCache",value:function(t,e,r,n,o,a,i,s,l,u,c,_,f,d,p,g,v,m,y,E,x,b,A,T,R,M,O,S,C,I){var h,k=this,t=N(F(w.prototype),"__calCache",this).call(this,t,e,r,n,o,a,i,s,l,u,c,_,f,d,p,g,v,m,y,E,x,b,A,T,R,M,O,S,C,I);return L1(n[u1])&&(n[u1]=!0,e=o[u1]||[],h=this.width,a[u1]=e.map(function(t){return k.__calSize(t,h,!0)})),L1(n[f1])&&(n[f1]=!0,a[f1]=o[f1]||[],n[d1]=a[f1].map(function(t){return F1(t,",")})),[c1,_1,h1,p1].forEach(function(t){a[t]=o[t]}),[s1,l1].forEach(function(t){var e,r,i;L1(n[t])&&(e=o[t],r=a[t]=[],i=n[t]=[],Array.isArray(e)&&e.forEach(function(t){t&&t[1]===w1?(r.push(t[0]),i.push(!0)):t&&t[1]===k1&&0<t[0][3]?(r.push(t[0]),i.push(D1(t[0]))):(r.push("none"),i.push("none"))}))}),t}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[g1]}},{key:"__preSet",value:function(e,r){var i=this,t=this.width,n=this.height,o=this.__cacheStyle,a=this.computedStyle,t=r.sx3+.5*t,n=r.sy3+.5*n,o=o[d1],s=a[s1],l=a[l1],h=a[u1],u=a[c1],c=a[_1],_=a[h1],f=a[f1],a=a[p1];return{cx:t,cy:n,stroke:l=l.map(function(t){return t.k?i.__gradient(e,r.ctx,r.x3,r.y3,r.x4,r.y4,t,r.dx,r.dy):D1(t)}),strokeWidth:h,strokeDasharray:f,strokeDasharrayStr:o,strokeLinecap:u,strokeLinejoin:c,strokeMiterlimit:_,fill:s=s.map(function(t){return t.k?i.__gradient(e,r.ctx,r.x3,r.y3,r.x4,r.y4,t,r.dx,r.dy):D1(t)}),fillRule:a}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,n=r.strokeWidth,o=r.strokeDasharray,a=r.strokeLinecap,s=r.strokeLinejoin,l=r.strokeMiterlimit,r=r.fill;t!==et.CANVAS&&t!==et.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==n&&e.lineWidth!==n&&(e.lineWidth=n),void 0!==a&&e.lineCap!==a&&(e.lineCap=a),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==l&&e.miterLimit!==l&&(e.miterLimit=l),Tt.isFunction(e.getLineDash)?o&&!Tt.equalArr(e.getLineDash(),o)&&e.setLineDash(o):o&&e.setLineDash(o))}},{key:"render",value:function(t,e,r,i,n,o){e=N(F(w.prototype),"render",this).call(this,t,e,r,i,n,o);if(t===et.SVG&&(this.virtualDom.type="geom"),e.break)return e;r=this.__preSet(t,e);return Object.assign(e,r)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,u=r.fillRule,n=r.stroke,c=r.strokeWidth,_=r.strokeDasharray,f=r.strokeDasharrayStr,d=r.strokeLinecap,p=r.strokeLinejoin,g=r.strokeMiterlimit,o=r.dx,v=r.dy,m=this.__cacheProps.list,y=this.isMulti,E=this.bbox;if(i.length<=1&&n.length<=1){r={fill:i[0],fillRule:u[0],stroke:n[0],strokeWidth:c[0],strokeDasharray:_[0],strokeDasharrayStr:f[0],strokeLinecap:d[0],strokeLinejoin:p[0],strokeMiterlimit:g[0],dx:o,dy:v,bbox:E};this.__renderOnePolygon(t,e,y,m,r)}else{for(var a=0,x=i.length;a<x;a++){var s=i[a];s&&(s={fill:s,fillRule:u[a],dx:o,dy:v,bbox:E},this.__renderOnePolygon(t,e,y,m,s))}for(var l=0,b=n.length;l<b;l++){var h=n[l];h&&(h={stroke:h,strokeWidth:c[l],strokeDasharray:_[l],strokeDasharrayStr:f[l],strokeLinecap:d[l],strokeLinejoin:p[l],strokeMiterlimit:g[l],dx:o,dy:v,bbox:E},this.__renderOnePolygon(t,e,y,m,h))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,n){var o=n.fill,a=n.stroke,s=n.strokeWidth,l=o&&"conic"===o.k,h=a&&"conic"===a.k,u=o&&"radial"===o.k&&Array.isArray(o.v),c=s&&0<s&&a&&"radial"===a.k&&Array.isArray(a.v);l||h?(l?this.__conicGradient(t,e,i,r,n):"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&h?Rt.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!1,!0)):u||c?(u?this.__radialEllipse(t,e,i,r,n,"fill"):"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&c?(Rt.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke.v=n.stroke.v[0],this.__drawPolygon(t,e,r,i,n,!1,!0)):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!1,!0)):this.__drawPolygon(t,e,r,i,n,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,n,u,c){var o,a=n.fill,s=n.stroke,l=n.strokeWidth,h=n.fillRule,_=n.strokeDasharrayStr,f=n.strokeLinecap,d=n.strokeLinejoin,p=n.strokeMiterlimit,g=n.dx,v=n.dy;t===et.CANVAS||t===et.WEBGL?(this.__preSetCanvas(t,e,n),e.beginPath(),r?i.forEach(function(t){return N1(e,t,g,v)}):N1(e,i,g,v),u&&a&&"none"!==a&&e.fill(h),c&&s&&"none"!==s&&l&&0<l&&e.stroke(),e.closePath()):t===et.SVG&&(o="",r?i.forEach(function(t){return o+=P1(t)}):o=P1(i),n=[["d",o]],(a&&"none"!==a||s&&"none"!==s)&&(u&&a&&"none"!==a?(n.push(["fill",a.v||a]),h&&"nonzero"!==h&&n.push(["fill-rule",h])):n.push(["fill","none"]),c&&s&&"none"!==s&&l&&0<l?(n.push(["stroke",s.v||s]),n.push(["stroke-width",l]),this.__propsStrokeStyle(n,_,f,d,p)):n.push(["stroke-width",0]),this.addGeom("path",n)))}},{key:"__inversePtList",value:function(t,e,o){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r],t[r+1]],o);e.push(n[0]),e.push(n[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r],t[r+1]],o);e.push(n[0]),e.push(n[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,n,o){var a,u=n.strokeWidth,c=n.strokeDasharrayStr,_=n.strokeLinecap,f=n.strokeLinejoin,d=n.strokeMiterlimit,p=n.dx,g=n.dy,n=Bt(n[o].v,4),s=n[0],l=n[1],h=n[2],n=n[3],h=(l=Vo.calMatrixByOrigin(l,[h,n]),Ht.inverse(l));r=this.__inversePtList(r,i,h),t===et.CANVAS||t===et.WEBGL?(l&&(e.save(),n=this.matrixEvent,l=Ht.multiply(n,l),e.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])),e.beginPath(),e[o+"Style"]!==s&&(e[o+"Style"]=s),i?r.forEach(function(t){return se.canvasPolygon(e,t,p,g)}):N1(e,r,p,g),e[o](),e.closePath(),l&&e.restore()):t===et.SVG&&(a="",i?r.forEach(function(t){return a+=P1(t)}):a=P1(r),h=[["d",a]],"fill"===o?(h.push(["fill",s]),h.push(["strokeWidth",0])):"stroke"===o&&(h.push(["fill","none"]),h.push(["stroke",s]),h.push(["stroke-width",u]),this.__propsStrokeStyle(h,c,_,f,d)),h.push(["transform","matrix(".concat(F1(Ht.m2m6(l),","),")")]),this.addGeom("path",h))}},{key:"__conicGradient",value:function(u,r,t,c,e){var i,n,o,_,f=this,a=e.fill,s=e.bbox,l=e.dx,h=void 0===l?0:l,l=e.dy,d=void 0===l?0:l,p=a.v;u===et.CANVAS||u===et.WEBGL?(e=Bt(s,4),i=e[0],n=e[1],l=e[2],s=e[3],s=(o=Rt.getCacheCanvas(e=l-i,l=s-n,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,e,l),ne.getConicGradientImage(.5*e,.5*l,e,l,a.v.stop,s.data),o.ctx.putImageData(s,0,0),c?t.forEach(function(t){r.save(),r.beginPath(),N1(r,t,h,d),r.clip(),r.closePath(),r.drawImage(o.canvas,i+h,n+d),r.restore()}):(r.save(),r.beginPath(),N1(r,t,h,d),r.clip(),r.closePath(),r.drawImage(o.canvas,i+h,n+d),r.restore()),o.ctx.clearRect(0,0,e,l)):u===et.SVG&&(c?t.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",P1(t)]]}]},e=r.add(t);f.__config[b1].push(t),p.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",P1(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(a={tagName:"clipPath",children:[{tagName:"path",props:[["d",P1(t)]]}]},_=r.add(a),this.__config[b1].push(a),p.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",P1(t[0])],["fill",t[1]],["clip-path","url(#"+_+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,n){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),n&&4!==n&&t.push(["stroke-miterlimit",n])}},{key:"__releaseWhenEmpty",value:function(t,e){return"hidden"===e[g1]}},{key:"__offsetX",value:function(t,e,r){N(F(w.prototype),"__offsetX",this).call(this,t,e,r),this.__config[m1]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){N(F(w.prototype),"__offsetY",this).call(this,t,e,r),this.__config[m1]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){N(F(w.prototype),"__resizeX",this).call(this,t,e),this.__config[m1]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){N(F(w.prototype),"__resizeY",this).call(this,t,e),this.__config[m1]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=Tt.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return L1(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return B1}},{key:"getRegister",value:function(t){if(!t||!Tt.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!B1.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return B1[t]}},{key:"register",value:function(t,e){if(!(t&&Tt.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof w))throw new Error("Invalid param");if(w.hasRegister(t))throw new Error("Geom has already register: ".concat(t));B1[t]=e}},{key:"hasRegister",value:function(t){return t&&B1.hasOwnProperty(t)}},{key:"delRegister",value:function(t){w.hasRegister(t)&&delete B1[t]}}]),w}(),T=A.NODE_KEY,Y1=T.NODE_STYLE,G1=T.NODE_CURRENT_STYLE,W1=T.NODE_COMPUTED_STYLE,U1=T.NODE_DOM_PARENT,X1=T.NODE_MATRIX,V1=T.NODE_MATRIX_EVENT,z1=T.NODE_STRUCT,K1=w.TYPE_VD,j1=w.TYPE_GM,$1=w.TYPE_CP,Z1=[],q1=[],J1={};function Q1(t){t instanceof up?t.children.forEach(function(t){t instanceof up?Q1(t):t instanceof Zs&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,tg(t,t.props))}):t instanceof Zs&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,tg(t,t.props))}function tg(t,e,r){if(t.__nextState||r){r=!Tt.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state);if(r)for(var i,n=t,r=e,o=t.__nextState||t.state,r=(n.props=r,n.state=o,n.__nextState=null,n.shadow),a=n.shadowRoot,o=n.__cd,s=Rs(n.render()),l=(function(t,e,r){var n=ng(e,{},t),o=ng(r,{}),a=[],s=[];Object.keys(n).forEach(function(t){var e=n[t];o[t]||(e.json.key=J1)}),Object.keys(o).forEach(function(t){var e,r,i=n[t],t=o[t];i?(e=i.json,r=t.json,i=i.vd,e.$$type===$1&&r.$$type===$1?e.klass===r.klass&&(ig(e,r,i),e.key=r.key=J1,s.push(i)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===j1&&e.props.multi!==r.props.multi||(r.__inheritAnimate=i),e.key=r.key=J1,r.$$type===K1&&a.push({vd:i,oj:e,nj:r}))):t.json.key=J1}),a.forEach(function(t){rg(t.vd,t.oj,t.nj)}),eg(t,e,r),s.forEach(function(t){og(t)})}(r,o,s),n.__init(s),n.shadowRoot),h=(l instanceof p0?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){l[t]=a[t]}),l.__computedStyle=l.__config[W1]=a.computedStyle):(i=n.domParent,[Y1,G1,W1,X1,V1].forEach(function(t){l.__config[t]=i.__config[t]})),["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){l[t]=a[t]}),l.__config[U1]=a.domParent,l.__config[z1]=a.__config[z1],Z1.push(n),Tt.isObject(s)&&s.__placeholder||q1.push(r),s&&s.__placeholder&&delete s.__placeholder,s&&s.__inheritAnimate&&delete s.__inheritAnimate,s&&s.__animateRecords&&delete s.__animateRecords,n.host);h&&h.shadow===n;)(h.__shadowRoot=l).__hostRoot=h,h=(n=h).host;else t.props=e,t.state=t.__nextState||t.state,Q1(t.shadow)}else Q1(t.shadow)}function eg(t,e,r){Tt.isObject(r)&&(r.$$type===$1?r.key!==J1&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(ig(e,r,t),og(t)):r.$$type===j1&&e&&e.$$type===j1?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===K1&&e&&e.$$type===K1&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),rg(t,e,r)))}function rg(u,c,_){for(var t=c.children,e=_.children,r=t.length,i=e.length,f=u.children,n=0,o=0,a=0,s=Math.min(r,i);n<s;n++){var l=t[n+o],h=e[n+a];l.key===J1&&h.key===J1||(l.key===J1?(o++,n--,r--,s=Math.min(r,i)):h.key===J1?(a++,n--,i--,s=Math.min(r,i)):eg(f[n+o],l,h))}}function ig(i,n,o){var a=(n.__placeholder=o).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(n.props).forEach(function(t){var e,r=n.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.listener[t]=r)):(t=t.slice(2).toLowerCase(),a.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),o.off(t,s[t]),o.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),o.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(n.props[t]=e,t=t.slice(2).toLowerCase(),delete a.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(n.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),tg(o,n.props,!Tt.equal(i.props,n.props))}function ng(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return ng(t,r,i&&i[e])}):Tt.isObject(t)&&(t.$$type!==K1&&t.$$type!==j1&&t.$$type!==$1||(t.$$type===K1&&ng(t.children,r,i&&i.children),e=t.props.key,Tt.isNil(e)||""===e||(r.hasOwnProperty(e)&&Rt.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function og(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var ag,sg={updateList:Z1,check:Q1,did:function(){Z1.forEach(function(t){Tt.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),Z1.splice(0),q1.forEach(function(t){t.__destroy()}),q1=[]}},lg=Tt.joinVd,hg=Tt.joinDef,ug=Na.contain,cg=Na.NONE,_g=Na.TRANSFORM_ALL,fg=Na.OPACITY,dg=Na.FILTER,pg=Na.MIX_BLEND_MODE;function gg(t,e,r){for(var u=t.childNodes,i=u[0],c=e.defs,n=r.defs,o=c.length,a=n.length,s=0,l=i.childNodes;s<Math.min(o,a);s++)!function(e,t,r){if(t.tagName!==r.tagName)Sg(e,"beforebegin",hg(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},n=0,u=(t.props||[]).length;n<u;n++){var o=Bt(t.props[n],2),c=o[0],o=o[1];i[c]=o}for(var a=0,_=(r.props||[]).length;a<_;a++){var s=Bt(r.props[a],2),l=s[0],s=s[1];i.hasOwnProperty(l)?(i[l]!==s&&e.setAttribute(l,s),delete i[l]):e.setAttribute(l,s)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var f=e.childNodes,d=t.children.length,p=r.children.length,h=0;h<Math.min(d,p);h++)Ag(e,h,t.children[h],r.children[h]);if(h<d)for(var g=d-1;h<=g;g--)Og(e,f,g);else if(h<p)for(;h<p;h++)Mg(e,f,h,lg(r.children[h]))}}(l[s],c[s],n[s]);if(s<o)for(var h=o-1;s<=h;h--)Og(i,l,h);else if(s<a)for(;s<a;s++)Mg(i,l,s,hg(n[s]));r.hasOwnProperty("lv")||bg(u[1],e.bb,r.bb),Eg(t,e,r,!0)}function vg(t,e,r){if("dom"===e.type)"dom"===r.type?Eg(t,e,r):"geom"===r.type?xg(t,e,r):Rg(t,r);else if("text"===e.type)if("text"===r.type){var i=t,u=e,n=r;if(!n.cache){for(var c=u.children.length,_=n.children.length,o=0;o<Math.min(c,_);o++)Ag(i,o,u.children[o],n.children[o],!0);var f=i.childNodes;if(o<c)for(var d=c-1;o<=d;d--)Og(i,f,d);else if(o<_)for(;o<_;o++)Mg(i,f,o,lg(n.children[o]))}}else Rg(t,r);else if("geom"===e.type)if("dom"===r.type)xg(t,e,r);else if("geom"===r.type){var a=t,s=e,l=r;if(l.cache)yg(a,0,l,l.lv);else if(l.hasOwnProperty("lv"))yg(a,0,l,l.lv);else{mg(a,s,l),bg(a.firstChild,s.bb,l.bb);for(var p=s.children.length,g=l.children.length,h=0,v=a.lastChild,m=v.childNodes;h<Math.min(p,g);h++)Ag(v,h,s.children[h],l.children[h]);if(h<p)for(var y=p-1;h<=y;y--)Og(v,m,y);else if(h<g)for(;h<g;h++)Mg(v,m,h,lg(l.children[h]))}}else Rg(t,r);else"img"===e.type?"img"===r.type?Tg(t,e,r):Rg(t,r):"item"===e.type&&"item"===r.type&&Tg(t,e,r)}function mg(t,e,r){var i=r.transform,n=r.opacity,o=r.visibility,a=r.mask,s=r.overflow,l=r.filter,h=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==n&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.visibility!==o&&t.setAttribute("visibility",o),e.mask!==a&&(a?t.setAttribute("mask",a):t.removeAttribute("mask")),e.filter===l&&e.mixBlendMode===h||((i=(l?"filter:".concat(l,";"):"")+(h?"mix-blend-mode:".concat(h,";"):""))?t.setAttribute("style",i):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function yg(t,e,r,i){var n=r.transform,o=r.opacity,a=r.mask,s=r.filter,r=r.mixBlendMode;a?t.setAttribute("mask",a):t.removeAttribute("mask"),i!==cg&&(ug(i,_g)&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),ug(i,fg)&&(1!==o&&void 0!==o?t.setAttribute("opacity",o):t.removeAttribute("opacity")),(ug(i,dg)||ug(i,pg))&&((a=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",a):t.removeAttribute("style")))}function Eg(t,e,r,i){if(r.cache)yg(t,0,r,r.lv);else{r.hasOwnProperty("lv")?yg(t,0,r,r.lv):(mg(t,e,r),i||bg(t.firstChild,e.bb,r.bb));for(var n=e.children.length,o=r.children.length,a=0,s=t.lastChild,l=s.childNodes;a<Math.min(n,o);a++)vg(l[a],e.children[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)Og(s,l,h);else if(a<o)for(;a<o;a++)Mg(s,l,a,lg(r.children[a]))}}function xg(t,e,r){mg(t,e,r),bg(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,o=0,a=t.lastChild,s=a.childNodes;o<Math.min(i,n);o++)Rg(s[o],r.children[o]);if(o<i)for(var l=i-1;o<=l;l--)Og(a,s,l);else if(o<n)for(;o<n;o++)Mg(a,s,o,lg(r.children[o]))}function bg(t,e,r){for(var i=e.length,n=r.length,o=0;o<Math.min(i,n);o++)Ag(t,o,e[o],r[o]);var a=t.childNodes;if(o<i)for(var s=i-1;o<=s;s--)Og(t,a,s);else if(o<n)for(;o<n;o++)Mg(t,a,o,lg(r[o]))}function Ag(t,e,r,i,n){t=t.childNodes;r.tagName!==i.tagName?Rg(t[e],i):(Tg(t[e],r,i),n&&r.content!==i.content&&(t[e].innerHTML=i.content))}function Tg(e,t,r){if(!r.cache){for(var i={},n=0,o=(t.props||[]).length;n<o;n++){var a=Bt(t.props[n],2),u=a[0],a=a[1];i[u]=a}for(var s=0,c=(r.props||[]).length;s<c;s++){var l=Bt(r.props[s],2),h=l[0],l=l[1];i.hasOwnProperty(h)?(i[h]!==l&&e.setAttribute(h,l),delete i[h]):e.setAttribute(h,l)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function Rg(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=lg(t)})):r=lg(e),Sg(t,"beforebegin",r),t.parentNode.removeChild(t)}function Mg(t,e,r,i){r>=e.length?Sg(t,"beforeend",i):Sg(e[r],"beforebegin",i)}function Og(t,e,r){e[r]&&t.removeChild(e[r])}function Sg(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(ag=ag||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(ag.childNodes[0],t)}}var Cg=Tt.isFunction,Ig=function(){function t(){_(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return f(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var t,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;e.length&&e.splice(0).forEach(function(t){var e,r=t.target,t=t.animate;r.isDestroyed||(Array.isArray(t)?t.forEach(function(t){var e=t.value,t=t.options,e=(t.autoPlay=!1,r.animate(e,t));i.add(e,n)}):(e=t.value,(t=t.options).autoPlay=!1,e=r.animate(e,t),i.add(e,n)))}),e===this.__records2&&(t=this.__onList,(e=this.list2).length&&t.length&&e.forEach(function(e){t.forEach(function(t){e.off(t[0],t[1]),e.on(t[0],t[1])})}))}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,Cg(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,Cg(e)&&e(t))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,Cg(e)&&e(t))}])}},{key:"finish",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,Cg(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Cg(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Cg(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Cg(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Cg(r)&&r(t))}])}},{key:"on",value:function(t,e){if(Cg(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(r,i){var n=this;this.list.forEach(function(e){function t(){var t=e.timestamp;t!==n.__lastTime[r]&&(n.__lastTime[r]=t,i())}t.__karasEventCb=i,e.on(r,t)})}},{key:"off",value:function(e,r){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.off(e[t],r);else this.list.forEach(function(t){t.off(e,r)})}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),kg=se.canvasPolygon;var n=0,bi=1,Oi=2,t=3,dr=4,Vr=function(u,t,c,_){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,n,o,a,s,l,t=Bt(t,4),h=t[2],t=t[3];0===h?(r=t.matrix,e=t.target,l=t.ctx,n=t.x,o=t.y,a=t.offsetWidth,s=t.offsetHeight,i=t.list,u.globalCompositeOperation="destination-in",u.globalAlpha=1,u.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),u.fillStyle="#FFF",u.beginPath(),i?kg(u,i):u.rect(n,o,a,s),u.fill(),u.closePath(),u.globalCompositeOperation="source-over",e.draw(),(u=l).setTransform(1,0,0,1,0,0),u.globalAlpha=1,c&&_&&u.drawImage(e.canvas,0,0,c,_,0,0,c,_),u.draw&&u.draw(!0),e.ctx.setTransform(1,0,0,1,0,0),e.ctx.clearRect(0,0,c,_),e.draw(),Rt.releaseCacheCanvas(e.canvas)):1===h?(r=t.target,i=t.ctx,n=t.filter,u.filter&&((o=Rt.getCacheCanvas(c,_,null,"filter2")).ctx.filter=se.canvasFilter(n),c&&_&&o.ctx.drawImage(r.canvas,0,0,c,_,0,0,c,_),o.ctx.filter="none",o.draw(),r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,c,_),c&&_&&r.ctx.drawImage(o.canvas,0,0,c,_,0,0,c,_),r.draw(),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,c,_),o.draw(),Rt.releaseCacheCanvas(o.canvas)),(u=i).setTransform(1,0,0,1,0,0),u.globalAlpha=1,c&&_&&u.drawImage(r.canvas,0,0,c,_,0,0,c,_),u.draw&&u.draw(!0),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,c,_),r.draw(),Rt.releaseCacheCanvas(r.canvas)):2===h?(a=t.mask,t.isClip?(t.target.draw(),(u=a.ctx).globalCompositeOperation="source-out",u.globalAlpha=1,u.setTransform(1,0,0,1,0,0),c&&_&&u.drawImage(t.target.canvas,0,0,c,_,0,0,c,_),a.draw(),u.globalCompositeOperation="source-over",t.target.ctx.setTransform(1,0,0,1,0,0),t.target.ctx.clearRect(0,0,c,_),t.target.draw(),Rt.releaseCacheCanvas(t.target.canvas),(u=t.ctx).globalAlpha=1,u.setTransform(1,0,0,1,0,0),c&&_&&u.drawImage(a.canvas,0,0,c,_,0,0,c,_),u.draw&&u.draw(!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,c,_),a.draw(),Rt.releaseCacheCanvas(a.canvas)):(a.draw(),s=t.target,(u=s.ctx).globalCompositeOperation="destination-in",u.globalAlpha=1,u.setTransform(1,0,0,1,0,0),c&&_&&u.drawImage(a.canvas,0,0,c,_,0,0,c,_),u.globalCompositeOperation="source-over",s.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,c,_),a.draw(),Rt.releaseCacheCanvas(a.canvas),(u=t.ctx).globalAlpha=1,u.setTransform(1,0,0,1,0,0),c&&_&&u.drawImage(s.canvas,0,0,c,_,0,0,c,_),u.draw&&u.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,c,_),s.draw(),Rt.releaseCacheCanvas(s.canvas))):3===h?(l=t.target,(u=t.ctx).globalCompositeOperation=t.mixBlendMode,l.draw(),u.setTransform(1,0,0,1,0,0),u.globalAlpha=1,c&&_&&u.drawImage(l.canvas,0,0,c,_,0,0,c,_),u.globalCompositeOperation="source-over",u.draw&&u.draw(!0),l.ctx.globalAlpha=1,l.ctx.setTransform(1,0,0,1,0,0),l.ctx.clearRect(0,0,c,_),l.draw(),Rt.releaseCacheCanvas(l.canvas)):4===h&&(u=t.ctx)}),u},wg=f(function t(e,r,i){_(this,t),this.uuid=xa.genUuid(),this.time=Rt.now(),this.texture=e,this.width=r,this.height=i}),Dg=function(){function s(t,e,r,i,n,o,a){_(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=n,this.height=o,this.bbox=a,this.available=!0,this.__page=new wg(e,n,o),this.reOffset()}return f(s,[{key:"reOffset",value:function(){var t=this.bbox;this.dx=-t[0],this.dy=-t[1],this.dbx=this.sx1-t[0],this.dby=this.sy1-t[1]}},{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),Lg="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",Fg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",Ng="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Pg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Bg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Hg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Yg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Gg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Wg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Ug="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Xg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Vg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",zg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Kg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",jg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",$g="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Zg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",qg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Jg=Ma.NA,Qg=Ma.LOCAL,tv=Ma.CHILD,ev=Ma.SELF,rv=Ma.getCache,iv=n,nv=bi,ov=Oi,av=t,sv=dr,lv=Vr,i=A.STYLE_KEY,hv=i.DISPLAY,uv=i.OPACITY,cv=i.VISIBILITY,_v=i.FILTER,fv=i.OVERFLOW,dv=i.MIX_BLEND_MODE,pv=i.FILL,gv=i.TRANSFORM,vv=i.TRANSFORM_ORIGIN,mv=i.PERSPECTIVE,yv=i.PERSPECTIVE_ORIGIN,Ev=i.PADDING_LEFT,xv=i.PADDING_RIGHT,bv=i.PADDING_TOP,Av=i.PADDING_BOTTOM,Tv=i.BORDER_TOP_WIDTH,Rv=i.BORDER_RIGHT_WIDTH,Mv=i.BORDER_BOTTOM_WIDTH,Ov=i.BORDER_LEFT_WIDTH,Sv=i.MATRIX,Gr=A.NODE_KEY,Cv=Gr.NODE_CACHE,Iv=Gr.NODE_CACHE_TOTAL,kv=Gr.NODE_CACHE_OVERFLOW,wv=Gr.NODE_CACHE_MASK,Dv=Gr.NODE_CACHE_FILTER,Lv=Gr.NODE_MATRIX,Fv=Gr.NODE_MATRIX_EVENT,Nv=Gr.NODE_OPACITY,Pv=Gr.NODE_COMPUTED_STYLE,Bv=Gr.NODE_CURRENT_STYLE,Hv=Gr.NODE_LIMIT_CACHE,Yv=Gr.NODE_REFRESH_LV,Gv=Gr.NODE_CACHE_STYLE,Wv=Gr.NODE_DEFS_CACHE,Uv=Gr.NODE_IS_MASK,Xv=Gr.NODE_DOM_PARENT,Vv=Gr.NODE_PERSPECTIVE_MATRIX,zv=Gr.NODE_VIRTUAL_DOM,Kv=Gr.NODE_CACHE_AS_BITMAP,jv=Gr.NODE_STRUCT,Wr=A.STRUCT_KEY,$v=Wr.STRUCT_NODE,Zv=Wr.STRUCT_INDEX,qv=Wr.STRUCT_TOTAL,Jv=Wr.STRUCT_HAS_MASK,Qv=Wr.STRUCT_LV,tm=Na.NONE,em=Na.TRANSFORM_ALL,rm=Na.OPACITY,im=Na.FILTER,nm=Na.REPAINT,om=Na.contain,am=Na.MIX_BLEND_MODE,sm=Na.PERSPECTIVE,lm=Ht.isE,hm=Ht.inverse,um=Ht.multiply,cm=xi,_m=Ai,fm=Tt.assignMatrix,dm=Tt.transformBbox;function pm(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function gm(t,e,r){for(var i=0;r--;){var n=t[e][qv];i+=n||0,e+=n||0,i++,e++}return i}function vm(t,e,r,i){var e=e.lockOneChannel(),n=ft.createTexture(t,null,e,r,i),o=t.createFramebuffer(),a=(t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.checkFramebufferStatus(t.FRAMEBUFFER));return a!==t.FRAMEBUFFER_COMPLETE&&Rt.error("Framebuffer object is incomplete: "+a.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[e,o,n]}function mm(t,e,u,c,_,f,d,p,g,v,m,y){for(var E,x,b={},A={},r=function(u,c,_,f,d,p){var g,v=u.__sx1,m=u.__sy1,y=(t=u.__config)[Cv],E=(t=t[Pv])[_v],x=t[mv],t=t[yv],b=y&&y.available?y.bbox:u.filterBbox;b=b.slice(0),x&&(g=Vo.calPerspectiveMatrix(x,t));for(var A=[_],T=0,R=(E.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];"blur"===e&&(T=Cr.outerSize(t))}),d[_]=1,{});A.length;)for(var M=A.splice(0),O=0,S=M.length;O<S;O++)for(var e=M[O],r=e+1,C=e+(c[e][qv]||0)+1;r<C;r++){var i=c[r],n=i[$v],i=i[qv];if(!n.isMask){var I=n.__sx1,k=n.__sy1,o=n.__config,a=o[Hv],s=o[Cv],w=o[Iv],l=o[Dv],h=o[wv],D=o[kv],o=o[Pv],L=o[hv],F=o[cv],N=o[gv],P=o[vv],o=o[uv];if(a&&!p)return;"none"!==L?"hidden"!==F&&(f[r]=e,d[r]=d[e]*o,a=void 0,o=void(F=L=0),n instanceof xs?a=n.bbox:(h=rv([h,l,D,w]))?(a=h.bbox,L=h.dbx,F=h.dby,r+=i||0,o=!0):s&&s.available?(a=s.bbox,L=s.dbx,F=s.dby):a=n.filterBbox,a&&((a=a.slice(0))[0]-=v,a[1]-=m,a[2]-=v,a[3]-=m,l=R[e],N&&!lm(N)&&((D=P.slice(0))[0]+=I-v+L,D[1]+=k-m+F,w=Vo.calMatrixByOrigin(N,D),l=l?um(l,w):w),l&&(R[r]=l),g&&(l=um(g,l)),a=dm(a,l,T,T),i&&!o&&A.push(r),pm(b,a,v,m))):r+=i||0}}return[b,g]}(u,d,_,b,A,(t.getParameter(t.MAX_TEXTURE_SIZE),g)),r=Bt(r,2),i=r[0],T=r[1],R=(i||(E=!0),(i=g||E?[0,0,m,y]:i)[2]-i[0]),M=i[3]-i[1],r=Bt(vm(t,e,R,M),3),O=r[0],S=r[1],C=r[2],I=u.__sx1,k=u.__sy1,n=.5*R,o=.5*M,w=-i[0],D=-i[1],L=I-i[0],F=k-i[1],N=(p&&p.available?e.addTexAndDrawWhenLimit(t,p,1,null,n,o,w,D,!1):g&&(r=Rt.getCacheCanvas(R,M,"__$$OVERSIZE$$__"),u.render(et.WEBGL,0,t,Jg,0,0),p=e.lockOneChannel(),x=ft.createTexture(t,r.canvas,p),x=new Dg(t,x,0,0,R,M,[0,0,R,M]),e.addTexAndDrawWhenLimit(t,x,1,null,n,o,0,0,!1),e.refresh(t,n,o),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,R,M),x.release(),e.releaseLockChannel(p)),{}),a=_+1,P=_+(f||0)+1;a<P;a++){var B,H,Y,G,W,U,X,s,V,z,K=d[a],j=K[$v],$=K[qv],K=K[Jv],l=j.__config,h=N[b[a]],Z=A[a];j instanceof xs?(T&&(h=um(T,h)),e.addTexAndDrawWhenLimit(t,l[Cv],Z,h,n,o,w,D,!1)):(B=l[Cv],H=l[Iv],Y=l[Dv],z=l[wv],G=l[kv],V=l[Uv],s=(l=l[Pv])[hv],U=l[cv],X=l[gv],W=l[vv],l=l[dv],"none"!==s?("hidden"!==U&&!V||j.hookGlRender)&&(X&&!lm(X)&&(s=W.slice(0),B&&B.available?(s[0]+=B.sx1,s[1]+=B.sy1):(s[0]+=j.__sx1,s[1]+=j.__sy1),U=F-k,s[0]+=L-I,s[1]+=U,V=Vo.calMatrixByOrigin(X,s),h=h?um(h,V):V),h&&(N[a]=h),T&&(h=um(T,h)),(W=rv([z,Y,G,H,B]))&&(_m(l)?(e.refresh(t,n,o),X=(U=Bt(vm(t,e,R,M),3))[0],s=U[1],V=U[2],e.addTexAndDrawWhenLimit(t,W,Z,h,n,o,w,D,!1),e.refresh(t,n,o),O=(z=Bt(bm(t,e,O,X,S,C,cm(l),R,M),3))[0],S=z[1],C=z[2],t.deleteFramebuffer(s),t.deleteTexture(V)):e.addTexAndDrawWhenLimit(t,W,Z,h,n,o,w,D,!1),W!==B&&(a+=($||0)+gm(d,a+($||0)+1,K||0))),j.hookGlRender&&j.hookGlRender(t,Z,h,n,o,w,D,!1)):a+=($||0)+gm(d,a+($||0)+1,K||0))}u.hookGlRender&&u.hookGlRender(t,1,null,n,o,w,D,!1),e.refresh(t,n,o),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,m,y),t.deleteFramebuffer(S);r=new Dg(t,C,I,k,R,M,i);return e.releaseLockChannel(O,r.page),[g||E,r]}function ym(n,o,r,t,e,i,_){var a=t.sx1,s=t.sy1,l=t.width,h=t.height,u=t.bbox,c=t;return e.forEach(function(t){var e,r,t=Bt(t,2),i=t[0],t=t[1];"blur"===i&&0<t?(r=Em(n,o,c,t,l,h,a,s,u))&&(r=Bt(r,4),c=r[0],l=r[1],h=r[2],u=r[3]):"dropShadow"===i?(r=function(t,e,u,r,i,n,c,_,o){e.refresh(t,.5*i,.5*n);var r=Bt(r,5),f=r[0],d=r[1],a=r[2],r=r[4],s=Bt(vm(t,e,i,n),3),p=s[0],l=s[1],s=s[2],h=e.findExistTexChannel(u.page);-1===h?(h=e.lockOneChannel(),ft.bindTexture(t,u.page.texture,h)):e.lockChannel(h);t.useProgram(t.programDs),s=ft.drawDropShadow(t,t.programDs,l,s,u.page.texture,p,h,i,n,r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(l);r=o,l=new Dg(t,s,c,_,i,n,o.slice(0)),a=Em(t,e,l,a,i,n,c,_,o);{var g;if(e.releaseLockChannel(h),t.useProgram(t.program),a)return t.deleteTexture(s),h=Bt(a,4),l=h[0],i=h[1],n=h[2],o=h[3],(f||d)&&(o[0]+=f,o[1]+=d,o[2]+=f,o[3]+=d,l.sx1=o[0],l.sy1=o[1],l.reOffset()),pm(s=r.slice(0),o,0,0),i=s[2]-s[0],n=s[3]-s[1],a=.5*i,h=.5*n,f=-s[0],d=-s[1],r=Bt(vm(t,e,i,n),3),o=r[0],g=r[1],r=r[2],e.addTexAndDrawWhenLimit(t,u,1,null,a,h,f,d,!1),e.addTexAndDrawWhenLimit(t,l,1,null,a,h,f,d,!1),e.refresh(t,a,h,!1),e.releaseLockChannel(p),e.releaseLockChannel(o),t.deleteFramebuffer(g),u=new Dg(t,r,c,_,i,n,s),e.releaseLockChannel(o,l.page),[u,i,n,s]}}(n,o,c,t,l,h,a,s,u))&&(r=Bt(r,4),c=r[0],l=r[1],h=r[2],u=r[3]):"hueRotate"===i?(r=ie.d2r(t%360),e=Math.cos(r),r=Math.sin(r),(e=xm(n,o,c,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],l,h,a,s,u))&&(r=Bt(e,4),c=r[0],l=r[1],h=r[2],u=r[3])):"saturate"===i&&100!==t?(r=xm(n,o,c,[.213+.787*(e=.01*t),.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0],l,h,a,s,u))&&(e=Bt(r,4),c=e[0],l=e[1],h=e[2],u=e[3]):"brightness"===i&&100!==t?(e=xm(n,o,c,[r=.01*t,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],l,h,a,s,u))&&(r=Bt(e,4),c=r[0],l=r[1],h=r[2],u=r[3]):"grayscale"===i&&0<t?((e=1-.01*(t=Math.min(t,100)))<0?e=0:1<e&&(e=1),(r=xm(n,o,c,[.2126+.7874*e,.7152-.7152*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152+.2848*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152-.7152*e,.0722+.9278*e,0,0,0,0,0,1,0],l,h,a,s,u))&&(e=Bt(r,4),c=e[0],l=e[1],h=e[2],u=e[3])):"contrast"===i&&100!==t?(r=xm(n,o,c,[r=.01*t,0,0,0,e=-.5*r+.5,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],l,h,a,s,u))&&(e=Bt(r,4),c=e[0],l=e[1],h=e[2],u=e[3]):"sepia"===i&&0<t?((r=1-.01*(t=Math.min(t,100)))<0?r=0:1<r&&(r=1),(e=xm(n,o,c,[.393+.607*r,.769-.769*r,.189-.189*r,0,0,.349-.349*r,.686+.314*r,.168-.168*r,0,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,0,1,0],l,h,a,s,u))&&(r=Bt(e,4),c=r[0],l=r[1],h=r[2],u=r[3])):"invert"===i&&0<t&&(e=.01*(t=Math.min(t,100)),(i=xm(n,o,c,[r=1-2*e,0,0,0,e,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],l,h,a,s,u))&&(t=Bt(i,4),c=t[0],l=t[1],h=t[2],u=t[3]))}),n.useProgram(n.program),n.viewport(0,0,i,_),c}function Em(t,e,u,r,c,_,f,d,i){for(var n=Cr.kernelSize(r),p=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));p<n;)n-=2;var o=Cr.outerSizeByD(n),a=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(a<c||a<_)){for(var a=i.slice(0),i=(a[0]-=o,a[1]-=o,a[2]+=o,a[3]+=o,c+2*o),g=_+2*o,v=.5*i,m=.5*g,y=Cr.gaussianWeight(r,n),s="",l="",h=Math.floor(.5*n),E=0;E<h;E++){var x=.01*(h-E);s+="v_texCoordsBlur[".concat(E,"] = a_texCoords + vec2(-").concat(x,", -").concat(x,") * u_direction;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(E,"]) * ").concat(y[E],";")}s+="v_texCoordsBlur[".concat(h,"] = a_texCoords;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(h,"]) * ").concat(y[h],";");for(var b=0;b<h;b++){var A=.01*(b+1);s+="v_texCoordsBlur[".concat(b+h+1,"] = a_texCoords + vec2(").concat(A,", ").concat(A,") * u_direction;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(b+h+1,"]) * ").concat(y[b+h+1],";")}s=Lg.replace("[3]","["+n+"]").replace(/}$/,s+"}"),l=Fg.replace("[3]","["+n+"]").replace(/}$/,l+"}"),r=ft.initShaders(t,s,l);t.useProgram(r);var T=Bt(vm(t,e,i,g),3),R=T[0],M=T[1],T=T[2],O=e.findExistTexChannel(u.page),u=(-1===O?(O=e.lockOneChannel(),ft.bindTexture(t,u.page.texture,O)):e.lockChannel(O),T=ft.drawBlur(t,r,M,T,u.page.texture,R,O,c,_,o,i,g,v,m),t.deleteShader(r.vertexShader),t.deleteShader(r.fragmentShader),t.deleteProgram(r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(M),e.releaseLockChannel(O),new Dg(t,T,f,d,i,g,a));return e.releaseLockChannel(R,u.page),[u,i,g,a]}}function xm(t,e,r,i,n,o,a,u,s){var l=Bt(vm(t,e,n,o),3),c=l[0],_=l[1],l=l[2],h=e.findExistTexChannel(r.page),r=(-1===h?(h=e.lockOneChannel(),ft.bindTexture(t,r.page.texture,h)):e.lockChannel(h),t.useProgram(t.programCm),ft.drawCm(t,t.programCm,h,i),e.releaseLockChannel(h),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(_),new Dg(t,l,a,u,n,o,s.slice(0)));return e.releaseLockChannel(c,r.page),[r,n,o,s]}function bm(t,e,r,i,n,o,a,s,l){"multiply"===(a=cm(a))?h=Pg:"screen"===a?h=Bg:"overlay"===a?h=Hg:"darken"===a?h=Yg:"lighten"===a?h=Gg:"color-dodge"===a?h=Wg:"color-burn"===a?h=Ug:"hard-light"===a?h=Xg:"soft-light"===a?h=Vg:"difference"===a?h=zg:"exclusion"===a?h=Kg:"hue"===a?h=jg:"saturation"===a?h=$g:"color"===a?h=Zg:"luminosity"===a&&(h=qg);a=ft.initShaders(t,Ng,h);t.useProgram(a);var h=Bt(vm(t,e,s,l),3),u=h[0],c=h[1],h=h[2];return ft.drawMbm(t,a,r,i,s,l),t.useProgram(t.program),t.deleteShader(a.vertexShader),t.deleteShader(a.fragmentShader),t.deleteProgram(a),t.deleteFramebuffer(n),t.deleteTexture(o),e.releaseLockChannel(r),e.releaseLockChannel(i),[u,c,h]}var Am={renderCanvas:function(xt,t,h){for(var Et=h.__structs,bt=h.width,At=h.height,u=[],c=0,_=Et.length;c<_;c++){var f,d,p,e,g=Et[c],r=g[$v],v=g[Qv],m=g[qv],g=g[Jv];r instanceof xs||(d=(f=r.__config)[Yv],p=f[Kv],e=f[Pv],nm<=d&&r.__calCache(xt,t,f[Xv],f[Gv],f[Bv],e,r.clientWidth,r.clientHeight,r.offsetWidth,r.offsetHeight,e[Tv],e[Rv],e[Mv],e[Ov],e[bv],e[xv],e[Av],e[Ev],r.__sx1,r.__sx2,r.__sx3,r.__sx4,r.__sx5,r.__sx6,r.__sy1,r.__sy2,r.__sy3,r.__sy4,r.__sy5,r.__sy6),p&&("none"!==e[hv]?u.push([c,v,m,r,f,g]):c+=(m||0)+gm(Et,c+(m||0)+1,g||0)))}u.length&&(u.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),u.forEach(function(h){var h=Bt(h,6),u=h[0],c=h[1],_=h[2],f=h[3],t=h[4],h=h[5],G=xt,e=u,u=c,c=_||0,Y=Et,_=h,W=bt,U=At,d=t[Iv],h=t[Dv],p=t[wv],g=t[kv],v=t[Bv],m=t[Pv];if(d&&d.available){var y=t[Yv],r=t[Gv];om(y,em)&&(r=f.__calMatrix(y,r,v,m,t),fm(t[Lv],r)),om(y,rm)&&(t[Nv]=m[uv]=v[uv]),om(y,im)&&f.__calFilter(v,m),om(y,am)&&(m[dv]=v[dv])}else{for(var E,x,b,A=!0,T=f.__sx1,R=f.__sy1,M=[],O=[],S=1,C=u,I=e,k=e+(c||0)+1;I<k;I++){var i,w,D,L,F,N,P,B,H,X,V=Y[I],z=V[$v],K=V[Qv],j=V[qv],V=V[Jv];z instanceof xs?(i=z.bbox,pm(E,i=lm(o)?i:dm(i,o,0,0),0,0)):(X=(i=z.__config)[Yv],w=i[Iv],D=i[Dv],L=i[wv],F=i[kv],N=i[Pv],P=i[Uv],"none"===N[hv]||I!==e&&P?I+=(j||0)+gm(Y,I+(j||0)+1,V||0):(I===e||(C<K?(o=b[Fv],lm(o)&&(o=null),M.push(o),S=b[Nv],O.push(S)):K<C&&(M.splice(-(P=C-K)),o=M[K-1],O.splice(-P),S=O[K-1])),C=K,P=(b=i)[Bv],K=i[Gv],H=B=void 0,X<nm?(om(X,em)?(B=z.__calMatrix(X,K,P,N,i),fm(i[Lv],B)):B=i[Lv],om(X,rm)&&(N[uv]=P[uv]),H=N[uv],om(X,im)&&(z.__bbox=null,z.__filterBbox=null,z.__calFilter(P,N)),B=i[Lv],om(X,am)&&(N[dv]=P[dv])):(z.__bbox=null,z.__filterBbox=null,I===e&&z.__calFilter(P,N),B=z.__calMatrix(X,K,P,N,i),fm(i[Lv],B),H=N[uv]=P[uv]),I===e?(H=1,x=B,B=Ht.identity()):lm(o)||(B=um(o,B)),fm(i[Fv],B),X=void(i[Nv]=S*H),X=(K=e<I&&rv([L,D,F,w]))?(I+=(j||0)+gm(Y,I+(j||0)+1,V||0),K.bbox):I===e?z.bbox:z.filterBbox,X=dm(X,B,0,0),I===e?E=X.slice(0):pm(E,X,0,0)))}if(t[Iv]=d=Ma.getInstance(E,T,R),!d||!d.enabled)return;d.__available=!0;for(var $,r=d,Z=r.dx,q=r.dy,J=r.dbx,Q=r.dby,tt=r.x,et=r.y,n=d.ctx,o=null,C=u,rt={},it={},a=e,nt=e+(c||0)+1;a<nt;a++){var ot=Y[a],s=ot[$v],at=ot[Qv],st=ot[qv],ot=ot[Jv];if(s instanceof xs)s.render(G,nm,n,tv,Z,q),it.hasOwnProperty(a)&&(n=lv(n,it[a],W,U));else{var lt=s.__config,ht=lt[Yv],ut=lt[Iv],ct=lt[Dv],_t=lt[wv],ft=lt[kv],l=lt[Pv];if(rt.hasOwnProperty(a)){for(var dt=Bt(rt[a],3),pt=dt[0],gt=dt[1],dt=dt[2],vt=Rt.getCacheCanvas(W,U,null,"mask2"),mt=(dt.mask=vt,dt.isClip=s.isClip,a+(st||0)+1);--gt;)mt+=(Y[mt][qv]||0)+1;var yt=it[--mt]=it[mt]||[];yt.push([pt,at,ov,dt]),yt.push([mt,at,sv,{ctx:n,target:vt}]),n=vt.ctx}a===e||(C<at?(lm(o=$)&&(o=null),M.push(o)):at<C&&(M.splice(-(C-at)),o=M[at-1]));var pt=l[gv],dt=l[vv],yt=l[hv],vt=void 0,_t=(a===e||lm(o)&&lm(pt)?vt=null:((dt=dt.slice(0))[0]+=J+s.__sx1-T+tt,dt[1]+=Q+s.__sy1-R+et,vt=Vo.calMatrixByOrigin(pt,dt),lm(o)||(vt=um(o,vt))),vt?n.setTransform(vt[0],vt[1],vt[4],vt[5],vt[12],vt[13]):n.setTransform(1,0,0,1,0,0),C=at,$=vt,rv([_t,ct,ft,ut]));a!==e&&_t?(a+=(st||0)+gm(Y,a+(st||0)+1,ot||0),"none"!==yt&&(ct=l[dv],_m(ct)?n.globalCompositeOperation=cm(ct):n.globalCompositeOperation="source-over",n.globalAlpha=lt[Nv],Ma.drawCache(_t,d),n.globalCompositeOperation="source-over")):(nm<=ht&&s.__calCache(G,n,lt[Xv],lt[Gv],lt[Bv],l,s.clientWidth,s.clientHeight,s.offsetWidth,s.offsetHeight,l[Tv],l[Rv],l[Mv],l[Ov],l[bv],l[xv],l[Av],l[Ev],s.__sx1,s.__sx2,s.__sx3,s.__sx4,s.__sx5,s.__sx6,s.__sy1,s.__sy2,s.__sy3,s.__sy4,s.__sy5,s.__sy6),ft=s.render(G,ht,n,a===e?Qg:tv,Z,q),lt[Yv]=nm,ct=(ut=ft||{}).offscreenBlend,_t=ut.offscreenMask,l=ut.offscreenFilter,s=ut.offscreenOverflow,ct&&((it[ht=a+(st||0)+gm(Y,a+(st||0)+1,ot||0)]=it[ht]||[]).push([a,at,av,ct]),n=ct.target.ctx),_t&&(rt[a+(st||0)+1]=[a,ot,_t],n=_t.target.ctx),l&&((it[lt=a+(st||0)+gm(Y,a+(st||0)+1,ot||0)]=it[lt]||[]).push([a,at,nv,l]),n=l.target.ctx),s&&((it[ft=a+(st||0)+gm(Y,a+(st||0)+1,ot||0)]=it[ft]||[]).push([a,at,iv,s]),n=s.target.ctx),it.hasOwnProperty(a)&&(n=lv(n,it[a],W,U)),"none"===yt&&(a+=(st||0)+gm(Y,a+(st||0)+1,ot||0)))}}fm(t[Fv],x),t[Yv]=tm}d&&d.available&&(y=m[fv],v=m[_v],r=d,"hidden"===y&&(g&&g.available&&!A||(t[kv]=Ma.genOverflow(r,f),A=!0),r=t[kv]||r),v&&v.length&&(h&&h.available&&!A||(t[Dv]=Ma.genFilter(r,v),A=!0),r=t[Dv]||r),!_||p&&p.available&&!A||(t[wv]=Ma.genMask(r,f,function(u,c,_){for(var f,d,p,g={},t={},v=c.dx,m=c.dy,y=c.dbx,E=c.dby,x=c.x,b=c.y,e=c.ctx,u=u.__config[jv],A=u[Zv],T=u[qv],R=[],M=[],O=1,S=u[Qv],r=A,C=A+(T||0)+1;r<C;r++){var I=Y[r],i=I[$v],k=I[Qv],n=I[qv],I=I[Jv];if(i instanceof xs)i.render(G,nm,e,tv,v,m),t.hasOwnProperty(r)&&(e=lv(e,t[r],W,U));else{var o=i.__config,w=o[Yv],a=o[Iv],s=o[Dv],D=o[wv],l=o[kv],h=o[Pv];if(g.hasOwnProperty(r)){for(var L=Bt(g[r],3),F=L[0],N=L[1],L=L[2],P=Rt.getCacheCanvas(W,U,null,"mask2"),B=(L.mask=P,L.isClip=i.isClip,r+(n||0)+1);--N;)B+=(Y[B][qv]||0)+1;var H=t[--B]=t[B]||[];H.push([F,k,ov,L]),H.push([B,k,sv,{ctx:e,target:P}]),e=P.ctx}r===A||(S<k?(lm(f=d)&&(f=null),R.push(f),O=p,M.push(O)):k<S&&(R.splice(-(F=S-k)),f=R[k-1],M.splice(-F),O=M[k-1]));var S=k,L=h[hv],H=h[gv],P=h[vv],D=rv([D,s,l,a]);D?(r+=(n||0)+gm(Y,r+(n||0)+1,I||0),"none"!==L&&(s=h[dv],_m(s)?e.globalCompositeOperation=cm(s):e.globalCompositeOperation="source-over",e.globalAlpha=o[Nv],Ma.drawCache(D,c,H,Ht.identity(),P.slice(0),f,_),e.globalCompositeOperation="source-over")):(l=o[Bv],a=o[Gv],D=s=void 0,w<nm?(om(w,em)?(s=i.__calMatrix(w,a,l,h,o),fm(o[Lv],s)):s=o[Lv],om(w,rm)&&(h[uv]=l[uv]),D=h[uv],om(w,im)&&(i.__bbox=null,i.__filterBbox=null,i.__calFilter(l,h)),s=o[Lv],om(w,am)&&(h[dv]=l[dv])):(i.__bbox=null,i.__filterBbox=null,r===A&&i.__calFilter(l,h),s=i.__calMatrix(w,a,l,h,o),fm(o[Lv],s),D=h[uv]=l[uv]),r===A?(D=1,s=Ht.identity()):f&&(s=um(f,s)),fm(o[Fv],s),a=void(p=o[Nv]=O*D),r===A||lm(f)&&lm(H)?a=null:((P=P.slice(0))[0]+=y+i.__sx1-sx1+x,P[1]+=E+i.__sy1-sy1+b,a=Vo.calMatrixByOrigin(H,P),lm(f)||(a=um(f,a))),(a=(d=a)&&(Tt.equalArr(a,_)?Ht.identity():(_=Ht.inverse(_),Ht.multiply(_,a))))?e.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]):e.setTransform(1,0,0,1,0,0),nm<=w&&i.__calCache(G,e,o[Xv],o[Gv],o[Bv],h,i.clientWidth,i.clientHeight,i.offsetWidth,i.offsetHeight,h[Tv],h[Rv],h[Mv],h[Ov],h[bv],h[xv],h[Av],h[Ev],i.__sx1,i.__sx2,i.__sx3,i.__sx4,i.__sx5,i.__sx6,i.__sy1,i.__sy2,i.__sy3,i.__sy4,i.__sy5,i.__sy6),l=i.render(G,w,e,tv,v,m),o[Yv]=nm,D=(s=l||{}).offscreenBlend,a=s.offscreenMask,h=s.offscreenFilter,i=s.offscreenOverflow,D&&((t[w=r+(n||0)+gm(Y,r+(n||0)+1,I||0)]=t[w]||[]).push([r,k,av,D]),e=D.target.ctx),a&&(g[r+(n||0)+1]=[r,I,a],e=a.target.ctx),h&&((t[o=r+(n||0)+gm(Y,r+(n||0)+1,I||0)]=t[o]||[]).push([r,k,nv,h]),e=h.target.ctx),i&&((t[l=r+(n||0)+gm(Y,r+(n||0)+1,I||0)]=t[l]||[]).push([r,k,iv,i]),e=i.target.ctx),t.hasOwnProperty(r)&&(e=lv(e,t[r],W,U)),"none"===L&&(r+=(n||0)+gm(Y,r+(n||0)+1,I||0)))}}})))}));for(var y={},i={},n=0,E=Et.length;n<E;n++){var o=Et[n],x=o[$v],b=o[Qv],a=o[qv],o=o[Jv];if(x instanceof xs)x.render(xt,nm,t,Jg,0,0),i.hasOwnProperty(n)&&(t=lv(t,i[n],bt,At));else{var s=x.__config,A=s[Iv],l=s[Dv],T=s[wv],R=s[kv],M=s[Yv],O=s[Pv],S=O[hv],C=O[dv],O=O[uv];if(y.hasOwnProperty(n)){for(var I=Bt(y[n],3),k=I[0],w=I[1],I=I[2],D=Rt.getCacheCanvas(bt,At,null,"mask2"),L=(I.mask=D,I.isClip=x.isClip,n+(a||0)+1);--w;)L+=(Et[L][qv]||0)+1;var F=i[--L]=i[L]||[];F.push([k,b,ov,I]),F.push([L,b,sv,{ctx:t,target:D}]),t=D.ctx}k=rv([T,l,R,A]);if(k){I=n;n+=(a||0)+gm(Et,n+(a||0)+1,o||0),"none"!==S&&(_m(C)?t.globalCompositeOperation=cm(C):t.globalCompositeOperation="source-over",F=s[Lv],T=(D=s[Fv]).slice(0),(l=s[Xv].matrixEvent)&&!lm(l)&&(F=um(l,F)),Tt.assignMatrix(D,F),Ma.draw(t,O,D,k),t.globalCompositeOperation="source-over",i.hasOwnProperty(n)&&(t=lv(t,i[n],bt,At)),(R=!(R=A.isNew)&&!Tt.equalArr(T,D)||R)&&function u(t,c,_,f,d){for(var e,p=[],g=d,v=f,r=c+1,m=c+(_||0)+1;r<m;r++){var i,y,n,E,x,o,a=(h=t[r])[$v],s=h[Qv],l=h[qv],h=h[Jv];a instanceof xs||(y=(i=a.__config)[Fv],n=i[Iv],E=i[Bv],x=i[Pv],o=i[Gv],"none"!==x[hv]?(v<s?(lm(e=g)&&(e=null),p.push(e)):s<v&&(p.splice(-(v-s)),e=p[s-1]),v=s,y=y.slice(0),o[Sv]=null,a=a.__calMatrix(nm,o,E,x,i),fm(i[Lv],a),lm(e)||(a=um(e,a)),fm(i[Fv],a),g=a,n&&n.available&&((o=!(o=n.isNew)&&!Tt.equalArr(y,a)||o)&&u(t,r,l||0,s,a),n.__isNew=!1,r+=(l||0)+gm(t,r+(l||0)+1,h||0))):r+=(l||0)+gm(t,r+(l||0)+1,h||0))}}(Et,I,a||0,b,D),A.__isNew=!1)}else{C=x.render(xt,M,t,Jg,0,0)||{},s=C.offscreenBlend,l=C.offscreenMask,O=C.offscreenFilter,T=C.offscreenOverflow;if(s&&((i[R=n+(a||0)+gm(Et,n+(a||0)+1,o||0)]=i[R]||[]).push([n,b,av,s]),t=s.target.ctx),l&&(y[n+(a||0)+1]=[n,o,l],t=l.target.ctx),O&&((i[A=n+(a||0)+gm(Et,n+(a||0)+1,o||0)]=i[A]||[]).push([n,b,nv,O]),t=O.target.ctx),T&&((i[x=n+(a||0)+gm(Et,n+(a||0)+1,o||0)]=i[x]||[]).push([n,b,iv,T]),t=T.target.ctx),i.hasOwnProperty(n)&&(t=lv(t,i[n],bt,At)),"none"===S){for(var N=(a||0)+gm(Et,n+(a||0)+1,o||0),P=n+1;P<=n+N;P++)i.hasOwnProperty(P)&&(t=lv(t,i[P],bt,At));n+=N}}}}},renderSvg:function(u,c,_,f){var d=_.__structs,p=_.width,g=_.height,v={};if(!f)for(var m=0,y=d.length;m<y;m++){var E=d[m],x=E[$v],b=E[qv],E=E[Jv],x=x.__config,A=x[Yv],x=x[Wv];E&&(nm<=A||om(A,em|rm))&&(v[m+(b||0)+1+E-1]=A),A<nm&&(v.hasOwnProperty(m)?(b=v[m],!om(A,em)&&b<nm&&!om(b,em)&&x.forEach(function(t){c.addCache(t)})):x.forEach(function(t){c.addCache(t)}))}for(var T,R,M,O={},S=[],C=[],I=0,t=0,k=d.length;t<k;t++){var w,D,L,e=d[t],r=e[$v],F=e[qv],N=e[Jv],e=e[Qv],i=r.__config,n=i[Iv],o=i[Yv],P=i[Wv],B=i[Pv],H=B[hv],a=(N&&"none"!==H&&(O[(w=(D=t+(F||0)+1)+N)-1]={index:t,start:D,end:w,isClip:d[D][$v].isClip}),e<I?(S.splice(-(w=I-e)),T=S[e-1],C.splice(-w),R=C[e-1]):I<e&&(S.push(M[Lv]),D=M[zv],C.push(D),R=D),M=i,void 0);if(o<nm&&!(r instanceof xs)?(i[Yv]=tm,a=i[zv],n&&n.available?(t+=F||0,a.cache=!0):(n&&(n.available=!0),a=i[zv]=r.__virtualDom=Tt.extend({},a),r instanceof up&&!(r instanceof qp)&&(a.children=[]),"none"===H?(t+=F||0,N&&(t+=N)):delete a.cache),n=i[Bv],s=i[Pv],l=i[Gv],om(o,em)&&(l=r.__calMatrix(o,l,n,s,i),L=i[Lv],fm(L,l),!l||lm(l)?delete a.transform:a.transform="matrix("+Tt.joinArr(Ht.m2m6(l),",")+")",T&&l&&(l=um(T,l)),L=i[Fv],fm(L,l)),om(o,rm)&&(1===(L=s[uv]=n[uv])?delete a.opacity:a.opacity=L),om(o,im)&&(l=r.__calFilter(n,s),(l=se.svgFilter(l))?a.filter=l:delete a.filter),om(o,am)&&(l=s[dv]=n[dv],_m(l)?a.mixBlendMode=cm(l):delete a.mixBlendMode),a.lv=o):(i[Wv]&&i[Wv].splice(0),r.render(u,o,c,Jg,0,0),a=i[zv],"none"===(H=B[hv])&&(t+=F||0,N&&(t+=N))),O.hasOwnProperty(t)&&(v.hasOwnProperty(t)||nm<=o||om(o,em|rm))){var s=O[t],n=s.index,l=s.start,Y=s.end,G=s.isClip,W=d[n][$v],U=[];G&&U.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(p,",0L").concat(p,",").concat(g,"L0,").concat(g,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var X=l;X<Y;X++){var V=d[X][$v],z=V.computedStyle,K=z[hv],j=z[cv],$=z[pv],z=V.virtualDom,Z=z.children,q=z.opacity;if("none"!==K&&"hidden"!==j)for(var Z=Tt.clone(Z),U=U.concat(Z),J=0,Q=Z.length;J<Q;J++){var tt=Z[J],et=tt.tagName,h=tt.props;if("path"===et){if(G)for(var rt=0,it=h.length;rt<it;rt++){var nt=h[rt];"fill"===nt[0]&&(nt[1]=Tt.int2invert($[0]))}var tt=V.matrix,ot=hm(W.matrix),tt=um(ot,tt);h.push(["transform","matrix(".concat(Tt.joinArr(Ht.m2m6(tt),","),")")]),Tt.isNil(q)||1===q||h.push(["opacity",q])}else if("image"===et){for(var at=-1,st=0,lt=h.length;st<lt;st++)if("transform"===h[st][0]){at=st;break}-1===at?(ot=hm(W.matrix),lm(ot)||h.push(["transform","matrix(".concat(Tt.joinArr(Ht.m2m6(ot),","),")")])):(tt=h[at][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),et=hm(W.matrix),tt=um(et,tt),h[at][1]="matrix(".concat(Tt.joinArr(Ht.m2m6(tt),","),")"))}}}for(var ht=P.length-1;0<=ht;ht--)"mask"===P[ht].tagName&&P.splice(ht,1);B={tagName:"mask",props:[],children:U},H=c.add(B);P.push(B),W.virtualDom.mask="url(#"+H+")"}R&&!r.isMask&&R.children.push(a),0===t&&(T=i[Lv],R=a),I=e}},renderWebgl:function(a,m,s){for(var l,h,u,c,_,b=s.__structs,y=s.width,E=s.height,x=s.texCache,t=.5*y,e=.5*E,f=[],d=[],p=1,g=[],v=0,A=[],T=0,R=b.length;T<R;T++){var r,M,O,S,C,I,k,w,D,L,F,i,N=b[T],n=N[$v],P=N[Qv],B=N[qv],N=N[Jv];n instanceof xs?nm<=u&&n.render(a,nm,m,ev,0,0):(k=(r=n.__config)[Yv],M=(0===T||(v<P?(l=c[Fv],lm(l)&&(l=null),f.push(l),p=c[Nv],d.push(p),h=c[Vv],lm(h)&&(h=null),g.push(h)):P<v&&(f.splice(-(M=v-P)),l=f[P-1],d.splice(-M),p=d[P-1],g.splice(-M),h=g[P-1])),u=k,v=P,(c=r)[Iv]),"none"!==(i=r[Pv])[hv]?(k<nm?(r[Yv]=tm,I=r[Bv],C=r[Gv],O=r[Fv],S=void(om(k,sm)&&n.__calPerspective(C,I,i,r)),om(k,em)?(S=n.__calMatrix(k,C,I,i,r),fm(r[Lv],S)):S=r[Lv],h&&(S=um(h,S)),l&&(S=um(l,S)),C=void fm(O,S),C=om(k,rm)?i[uv]=I[uv]:i[uv],r[Nv]=p*C,om(k,im)&&(n.__bbox=null,n.__filterBbox=null,n.__calFilter(I,i)),om(k,am)&&(i[dv]=I[dv]),M&&M.available&&(T+=B||0)):(O=n.render(a,k,m,ev,0,0))&&Rt.isWebGLTexture(O.texture)&&(S=n.__sx1,C=n.__sy1,I=n.offsetWidth,k=n.offsetHeight,w=n.bbox,r[Cv]=new Dg(m,O.texture,S,C,I,k,w),m.viewport(0,0,y,E),m.useProgram(m.program)),k=r[Hv],w=r[Kv],D=i[fv],L=i[_v],F=i[dv],i=i[gv],F=_m(F),i=Vo.isPerspectiveMatrix(i)||h,(w||N||L.length||"hidden"===D&&B||F||i)&&(F&&(_=!0),A.push([T,P,B,n,r,k,N,L,D,i,w]))):T+=B||0)}var H,Y,G,W,U={};A.length&&(A.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),H={},A.forEach(function(t){var t=Bt(t,11),e=t[0],u=t[1],r=t[2],i=t[3],n=t[4],o=t[5],c=t[6],a=t[7],_=t[8],s=t[9],t=t[10];if(s){for(var f=n[Xv];f;){var l=f.__config,d=l[jv][Zv];if(H[d])break;(Vo.isPerspectiveMatrix(l[Lv])||l[Vv])&&(H[d]=!0),f=l[Xv]}if(!(H[e]||c||a.length||"hidden"===_||t))return}var h,s=n[Cv],t=n[Iv],p=n[Dv],g=n[wv],v=n[kv],s=(t&&t.available||(s=(r=Bt(mm(m,x,i,0,e,r||0,b,s,o,0,y,E),2))[0],t=r=r[1],h=!0,(o=s)||(n[Iv]=r)),t);"hidden"===_&&(v&&v.available&&!h?s=v:(r=function(t,e,r,i,u,c){var n,o=i.bbox,a=r.__sx1,s=r.__sy1,l=r.clientWidth,r=r.clientHeight,h=a+l,_=s+r;if(!(o[0]>=a&&o[1]>=s&&o[2]<=h&&_))return a=[a,s,h,_],s=Bt(vm(t,e,l,r),3),h=s[0],_=s[1],s=s[2],-1===(n=e.findExistTexChannel(i.page))?(n=e.lockOneChannel(),ft.bindTexture(t,i.page.texture,n)):e.lockChannel(n),t.useProgram(t.programOverflow),ft.drawOverflow(t,n,a[0]-o[0],a[1]-o[1],l,r,i.width,i.height),e.releaseLockChannel(n),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,u,c),t.deleteFramebuffer(_),o=new Dg(t,s,i.sx1,i.sy1,l,r,a),e.releaseLockChannel(h,o.page),o}(m,x,i,s,y,E))&&(s=r,h=!0,o||(n[kv]=s))),a.length&&(p&&p.available&&!h?s=p:(s=ym(m,x,0,t=s,a,y,E))!==t&&(h=!0,o||(n[Dv]=s))),!c||g&&g.available&&!h||(s=function(t,e,r,i,n,u,c,_,f){var d=n.sx1,p=n.sy1,g=n.width,v=n.height,m=n.bbox,y=n.dx,E=n.dy,x=.5*g,b=.5*v,A=(i=i[Pv])[gv],i=i[vv],T=lm(A)?Ht.identity():((i=i.slice(0))[0]+=d+y,i[1]+=p+E,Vo.calMatrixByOrigin(A,i));T=Ht.inverse(T);for(var i=(A=Bt(vm(t,e,g,v),3))[0],R=A[1],A=A[2],M=r.next,O=M.isClip,S=[];M&&M.isMask&&M.isClip===O;)S.push(M),M=M.next;for(var C=0,I=S.length;C<I;C++)for(var k=[],w=void 0,D=void 0,L=[],F=1,N=void 0,P=_,B=S[C].__config[jv],H=B[Zv],o=H,Y=H+(B[qv]||0)+1;o<Y;o++){var G=f[o],W=G[$v],a=G[Qv],U=G[qv],G=G[Jv],s=W.__config,l=s[Cv],X=s[Pv],V=s[Hv];if("none"!==X[hv])if(W instanceof xs){if(l&&l.available)e.addTexAndDrawWhenLimit(t,l,F,e.last[2],x,b,0,0,!0);else if(V)return}else{var X=s[Cv],W=s[wv],l=s[Dv],z=s[kv],K=s[Iv],s=s[Pv],j=s[uv],$=s[gv],s=s[vv],h=(o===H||(P<a?(lm(w=D)&&(w=null),k.push(w),F=N,L.push(F)):a<P&&(k.splice(-(h=P-a)),w=k[a-1],L.splice(-h),F=L[a-1])),P=a,rv([W,l,z,K,X]));if(h){a=void 0,a=lm($)?Ht.identity():((W=s.slice(0))[0]+=h.bbox[0]+y,W[1]+=h.bbox[1]+E,Vo.calMatrixByOrigin($,W)),l=(a=Ht.multiply(T,a),s.slice(0));l[0]+=h.bbox[0]+y,l[1]+=h.bbox[1]+E,D=Vo.calMatrixByOrigin($,l),lm(w)||(D=um(w,D)),e.addTexAndDrawWhenLimit(t,h,N=F*j,a,x,b,y,E,!0),h!==X&&(o+=(U||0)+gm(f,o+(U||0)+1,G||0))}else if(V)return}else o+=(U||0)+gm(f,o+(U||0)+1,G||0)}e.refresh(t,x,b),t.deleteFramebuffer(R),-1===(r=e.findExistTexChannel(n.page))?(r=e.lockOneChannel(),ft.bindTexture(t,n.page.texture,r)):e.lockChannel(r);var n=(R=Bt(vm(t,e,g,v),3))[0],Z=R[1],R=R[2],q=O?t.programClip:t.programMask,q=(t.useProgram(q),ft.drawMask(t,i,r,q),t.deleteTexture(A),e.releaseLockChannel(i),e.releaseLockChannel(r),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,u,c),t.deleteFramebuffer(Z),new Dg(t,R,d,p,g,v,m));return e.releaseLockChannel(n,q.page),q}(m,x,i,n,s,y,E,u,b),o||(n[wv]=s)),o&&(U[e]=s)})),_&&(Y=(s=Bt(vm(m,x,y,E),3))[0],G=s[1],W=s[2]);for(var X,V,z,K,j,$=0,Z=b.length;$<Z;$++){var q,J,Q,tt,et,rt,it,nt,ot,at,st,lt,ht,ut=b[$],ct=ut[$v],_t=ut[qv],ut=ut[Jv],o=ct.__config;ct instanceof xs?(Q=o[Cv],et=o[Hv],J=(q=o[Xv].__config)[Fv],q=q[Nv],Q&&Q.available?x.addTexAndDrawWhenLimit(m,Q,q,J,t,e,0,0,!0):et&&(Q=Rt.getCacheCanvas(y,E,"__$$OVERSIZE$$__"),ct.render(a,0,m,Jg,0,0),et=x.lockOneChannel(),tt=ft.createTexture(m,Q.canvas,et),tt=new Dg(m,tt,0,0,y,E,[0,0,y,E]),x.addTexAndDrawWhenLimit(m,tt,q,J,t,e,0,0,!0),x.refresh(m,t,e,!0),Q.ctx.setTransform(1,0,0,1,0,0),Q.ctx.globalAlpha=1,Q.ctx.clearRect(0,0,y,E),tt.release(),x.releaseLockChannel(et))):(q=o[Nv],J=o[Fv],Q=o[Hv],tt=o[Cv],et=o[Iv],st=o[Dv],lt=o[wv],ot=o[kv],rt=o[Yv],it=(o=o[Pv])[hv],nt=o[cv],o=o[dv],"none"!==it?((lt=rv([lt,st,ot,et,tt]))?(_&&_m(o)?(x.refresh(m,t,e,!0),ot=(st=Bt(vm(m,x,y,E),3))[0],at=st[1],st=st[2],x.addTexAndDrawWhenLimit(m,lt,q,J,t,e,0,0,!0),x.refresh(m,t,e,!0),Y=(ot=Bt(bm(m,x,Y,ot,G,W,cm(o),y,E),3))[0],G=ot[1],W=ot[2],m.deleteFramebuffer(at),m.deleteTexture(st)):x.addTexAndDrawWhenLimit(m,lt,q,J,t,e,0,0,!0),lt!==tt&&($+=(_t||0)+gm(b,$+(_t||0)+1,ut||0))):U.hasOwnProperty($)?(ot=U[$],_&&_m(o)?(x.refresh(m,t,e,!0),st=(at=Bt(vm(m,x,y,E),3))[0],lt=at[1],ht=at[2],x.addTexAndDrawWhenLimit(m,ot,q,J,t,e,0,0,!0),x.refresh(m,t,e,!0),Y=(st=Bt(bm(m,x,Y,st,G,W,cm(o),y,E),3))[0],G=st[1],W=st[2],m.deleteFramebuffer(lt),m.deleteTexture(ht)):x.addTexAndDrawWhenLimit(m,ot,q,J,t,e,0,0,!0),$+=(_t||0)+gm(b,$+(_t||0)+1,ut||0)):Q&&"none"!==it&&"hidden"!==nt&&(o=Rt.getCacheCanvas(y,E,"__$$OVERSIZE$$__"),ct.render(a,rt,m,Jg,0,0),st=x.lockOneChannel(),lt=ft.createTexture(m,o.canvas,st),ht=new Dg(m,lt,0,0,y,E,[0,0,y,E]),x.addTexAndDrawWhenLimit(m,ht,q,J,t,e,0,0,!0),x.refresh(m,t,e,!0),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.globalAlpha=1,o.ctx.clearRect(0,0,y,E),ht.release(),x.releaseLockChannel(st)),ct.hookGlRender&&ct.hookGlRender(m,q,J,t,e,0,0,!0)):$+=(_t||0)+gm(b,$+(_t||0)+1,ut||0))}x.refresh(m,t,e,!0),_&&(m.bindFramebuffer(m.FRAMEBUFFER,null),x.releaseLockChannel(Y),m.deleteFramebuffer(G),s=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,s),m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),m.STATIC_DRAW),X=m.getAttribLocation(m.program,"a_position"),m.vertexAttribPointer(X,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(X),V=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,V),m.bufferData(m.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),m.STATIC_DRAW),z=m.getAttribLocation(m.program,"a_texCoords"),m.vertexAttribPointer(z,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(z),K=m.createBuffer(),m.bindBuffer(m.ARRAY_BUFFER,K),m.bufferData(m.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),m.STATIC_DRAW),j=m.getAttribLocation(m.program,"a_opacity"),m.vertexAttribPointer(j,1,m.FLOAT,!1,0,0),m.enableVertexAttribArray(j),j=m.getUniformLocation(m.program,"u_texture"),m.uniform1i(j,Y),m.drawArrays(m.TRIANGLES,0,6),m.deleteBuffer(s),m.deleteBuffer(V),m.deleteBuffer(K),m.disableVertexAttribArray(X),m.disableVertexAttribArray(z),m.deleteTexture(W))}},Tm="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Rm=function(){function e(t){_(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return f(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,n,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,h=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,u=8<arguments.length?arguments[8]:void 0,s=this.__pages,c=this.__list,l=e.page;-1<s.indexOf(l)||(s.length>=this.__units-this.__lockUnits&&this.refresh(t,n,o,u),s.push(l)),c.push([e,r,i,a,h])}},{key:"refresh",value:function(t,u,c,_){var f=this.__pages,d=this.__list;if(f.length){var e=this.channels,p=this.locks,g={},v=(e.forEach(function(t,e){t&&(t=t.uuid,g[t]=e)}),this.__units),r=new Array(v),i=[];if(f.forEach(function(t){var e=t.uuid;g.hasOwnProperty(e)?(e=g[e],r[e]=t):i.push(t)}),i.length){for(var n=0;n<v&&(r[n]||e[n]||p[n]||(r[n]=i.shift(),i.length));n++);var m=i.length;if(m){for(var y=[],o=0;o<v;o++)r[o]||p[o]||y.push([o,e[o]]);y.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var a=0;a<m;a++)r[y[a][0]]=i[a]}}for(var E={},s=0,x=r.length;s<x;s++){var l,h=r[s];h&&((l=e[s])&&l===h&&!h.update||(h instanceof wg?ft.bindTexture(t,h.texture,s):(!l||l instanceof wg||t.deleteTexture(l.texture),h.texture=ft.createTexture(t,h.canvas,s)),e[s]=h),E[h.uuid]=s,h.update=!1,h.time=Rt.now())}ft.drawTextureCache(t,d,E,u,c,_),f.splice(0),d.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i,n=this.__units,o=[],a=0;a<n;a++)e[a]||o.push([a,t[a]]);if(o.length)return o.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]}),t[i=o[0][0]]=null,e[i]=!0,this.__lockUnits++,i;throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),e}(),gi=A.STYLE_KEY,Mm=gi.TOP,e=gi.RIGHT,Om=gi.BOTTOM,mi=gi.LEFT,Sm=gi.POSITION,Cm=gi.DISPLAY,Im=gi.VISIBILITY,km=gi.COLOR,wm=gi.WIDTH,Dm=gi.HEIGHT,Lm=gi.Z_INDEX,Fm=gi.MARGIN_TOP,Nm=gi.MARGIN_LEFT,Pm=gi.MARGIN_BOTTOM,Bm=gi.PADDING_TOP,Hm=gi.PADDING_LEFT,Ym=gi.PADDING_BOTTOM,Gm=gi.BORDER_TOP_WIDTH,Wm=gi.BORDER_LEFT_WIDTH,Um=gi.BORDER_BOTTOM_WIDTH,Xm=gi.POINTER_EVENTS,Vm=gi.WRITING_MODE,yi=A.UPDATE_KEY,zm=yi.UPDATE_NODE,Km=yi.UPDATE_STYLE,jm=yi.UPDATE_KEYS,$m=yi.UPDATE_COMPONENT,Zm=yi.UPDATE_FOCUS,qm=yi.UPDATE_OVERWRITE,Jm=yi.UPDATE_LIST,Qm=yi.UPDATE_CONFIG,ty=yi.UPDATE_ADD_DOM,ey=yi.UPDATE_REMOVE_DOM,Ii=A.NODE_KEY,ry=Ii.NODE_TAG_NAME,iy=Ii.NODE_CACHE_STYLE,ny=Ii.NODE_CACHE_PROPS,oy=Ii.NODE_CURRENT_STYLE,ay=Ii.NODE_COMPUTED_STYLE,sy=Ii.NODE_CURRENT_PROPS,ly=Ii.NODE_DOM_PARENT,hy=Ii.NODE_IS_MASK,uy=Ii.NODE_REFRESH_LV,cy=Ii.NODE_IS_DESTROYED,_y=Ii.NODE_STYLE,fy=Ii.NODE_UPDATE_HASH,dy=Ii.NODE_UNIQUE_UPDATE_ID,py=Ii.NODE_CACHE,gy=Ii.NODE_CACHE_TOTAL,vy=Ii.NODE_CACHE_FILTER,my=Ii.NODE_CACHE_OVERFLOW,yy=Ii.NODE_CACHE_MASK,Ey=Ii.NODE_STRUCT,T=A.STRUCT_KEY,xy=T.STRUCT_INDEX,by=T.STRUCT_TOTAL,Ay=T.STRUCT_NODE,Ty=(o(n={},Mm,!0),o(n,e,!0),o(n,Om,!0),o(n,mi,!0),n),Ry=Tt.isNil,My=Tt.isObject,Oy=Tt.isFunction,Sy=r.AUTO,Cy=r.PX,Iy=r.PERCENT,ky=r.INHERIT,wy=bn.isRelativeOrAbsolute,Dy=bn.equalStyle,Ly=Na.contain,Fy=Na.getLevel,Ny=Na.isRepaint,Py=Na.NONE,By=Na.FILTER,Hy=Na.PERSPECTIVE,Yy=Na.REPAINT,Gy=Na.REFLOW,Wy=Na.REBUILD,Uy=Mr.isIgnore,Xy=Mr.isGeom,Vy={canvas:"canvas",svg:"svg",webgl:"canvas"};var zy=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function Ky(t,e){return t.currentStyle[e][1]!==Sy}function jy(t,e){var r=Ky(t,wm)&&Ky(t,Dm);if(r&&e){e=t.domParent;if(e&&("flex"===e.currentStyle[Cm]||"flex"===e.computedStyle[Cm]))return}return r}function $y(t){return t.hasOwnProperty("__uniqueReflowId")}var Zy=0;function qy(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=Zy,e[Zy++]={node:t,component:r,addDom:i})}var Jy=0;function Qy(u,c,t,_,f,d,p,g){var e=t[zm],i=t[Km],v=t[qm],m=t[Zm],r=t[$m],n=t[Jm],o=t[jm],a=t[Qm],y=t[ty],t=t[ey];if(!a[cy]){v&&Object.assign(a[_y],v),n&&!r&&(o=(o||[]).slice(0),E={},o.forEach(function(t){E[t]=!0}),n.forEach(function(t){var e=t[Km],r=t[qm];(t[jm]||[]).forEach(function(t){E.hasOwnProperty(t)||(E[t]=!0,o.push(t))}),r&&Object.assign(a[_y],r),e&&(i?Object.assign(i,e):i=e)}));var E,x,b,A,T,R=a[ry],M=a[iy],O=a[ny],S=a[oy],v=a[ay],C=a[sy],n=a[ly],I=a[hy],s=m||Py;if(!r&&i&&o)for(var k=0,w=o.length;k<w;k++){var l=o[k],D=i[l];if(e instanceof H1&&Xy(R,l))Dy(l,D,C[l],e)||(s|=Yy,O[l]=void 0,C[l]=D);else if(!Dy(l,D,S[l],e))if(Uy(l))M[l]=void 0,S[l]=D;else{if(Ty.hasOwnProperty(l)){var L=S[Sm];if("relative"!==L&&"absolute"!==L){delete i[l];continue}}else l===Cm&&(T=!0);s|=Fy(l),M[l]=void 0,S[l]=D,l===Lm&&e!==c&&(x=!0),l===Im&&(b=!0),l===km&&(A=!0)}}if(s!==Py||r){if("none"!==v[Cm]||T){if(x&&n&&delete n.__zIndexChildren,b||A)for(var F=c.__structs,m=e.__config[Ey],N=m[xy]+1,P=N+m[by];N<P;N++){var B=F[N],H=B[Ay],B=B[by],Y=H.__config,G=Y[oy],W=void 0;b&&(H instanceof xs||G[Im][1]===ky)&&(W=!0),(W=A&&(H instanceof xs||G[km][1]===ky)?!0:W)?(Y[uy]|=Yy,H instanceof p0&&H.clearCache()):N+=B||0}if(I){for(var U=e.prev;U&&U.isMask;)U=U.prev;U&&U.__config[yy]&&U.__config[yy].release()}var X=n;if(T&&X){m=X.__config;if("none"===m[oy][Cm]||"none"===m[ay][Cm])return void(v[Cm]="none")}!r&&Ny(s)?(x&&u===et.SVG&&(s|=Yy,n&&tE(n)),x&&!r&&p&&n&&!n.hasOwnProperty("__uniqueZId")&&(p[Jy]=!0,n.__uniqueZId=Jy++,g.push(n))):_.push({node:e,style:i,component:r,addDom:y,removeDom:t}),a[uy]|=s,c.__rlv=r||y||t?Wy:Math.max(c.__rlv,s);I=Yy<=s||u===et.SVG&&e instanceof H1;for(I&&a[py]&&a[py].release(),(I||Ly(s,Hy))&&(a[gy]&&a[gy].release(),a[yy]&&a[yy].release(),a[my]&&a[my].release()),(I||Ly(s,By))&&a[vy]&&a[vy].release();X;){var h=X.__config;if(h.hasOwnProperty(dy)){var V=h[dy];if(f.hasOwnProperty(V))break;f[V]=!0}else f[Jy]=!0,h[dy]=Jy++,d.push(h);V=h[uy];Yy<=V&&h[py]&&h[py].release(),h[gy]&&h[gy].release(),h[vy]&&h[vy].release(),h[yy]&&h[yy].release(),h[my]&&h[my].release(),X=h[ly]}return!0}}else delete a[dy]}}function tE(t,e){var r=t.__config;e?r[uy]|=Yy:r[gy].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof Zs?t.shadowRoot:t)instanceof xs||tE(t,!0)})}var eE=0,rE=function(){d(n,up);var i=p(n);function n(t,e,r){return _(this,n),(t=i.call(this,t,e)).__cd=r||[],t.__dom=null,t.__mw=0,t.__mh=0,t.__taskUp=[],t.__taskCp=[],t.__ref={},t.__reflowList=[{node:l(t)}],t.__animateController=new Ig,Xs.mix(l(t)),t.__config[fy]=t.__updateHash={},t.__uuid=eE++,t.__rlv=Wy,t}return f(n,[{key:"__initProps",value:function(){var t=this.props.width,t=(Ry(t)||0<(t=parseFloat(t)||0)&&(this.__width=t),this.props.height);Ry(t)||0<(t=parseFloat(t)||0)&&(this.__height=t)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?Tt.joinSourceArray(e):Tt.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+Tt.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,n,o,a,s,l,h;return-1===["touchend","touchcancel"].indexOf(t.type)&&(a=this.dom,e=this.__scx,r=this.__scy,s=(a=a.getBoundingClientRect()).x,i=a.y,l=a.left,n=a.top,o=a.width,a=a.height,s=(h=t.touches?t.touches[0]:t).clientX-(s=s||l||0),l=h.clientY-(l=i||n||0),Ry(e)?s*=this.width/o:s/=e,Ry(r)?l*=this.height/a:l/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:l,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget)return t=this.__wrapEvent(t),this.__emitEvent(t),t}},{key:"appendTo",value:function(t){t=function(t){if(Tt.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Ws.initRoot(this.__cd,this),this.__initProps();var o,a,e,r=(this.__root=this).tagName,r=Vy[r],r=("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===r?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(r),this.__dom||(t.innerHTML=this.__genHtml(r),this.__dom=t.querySelector(r))),this.__defs=this.dom.__defs||Jp.getInstance(this.__uuid),this.width&&this.height||(r=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(r.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(r.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),this.width&&this.height||Rt.warn("Karas render target with a width or height of 0."),Object.assign({},J,this.props.contextAttributes));"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d",r),this.__renderMode=et.CANVAS):"svg"===this.tagName?this.__renderMode=et.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",r),this.__renderMode=et.WEBGL,t.program=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=ft.initShaders(t,Tm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=ft.initShaders(t,Tm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=ft.initShaders(t,Tm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.programDs=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_color[4];void main(){vec4 c=texture2D(u_texture,v_texCoords);gl_FragColor=vec4(u_color[0]*c.a,u_color[1]*c.a,u_color[2]*c.a,u_color[3]*c.a);}"),t.useProgram(t.program),r=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new Rm(r)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof n&&this.dom.__root.destroy(),this.__eventCbList=(o=this.dom,a=n,e=[],zy.forEach(function(n){function t(t){var e=o.__root;if(e&&e instanceof a)if(-1<["touchend","touchcancel","touchmove"].indexOf(n)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}o.addEventListener(n,t),e.push([n,t])}),e),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,n=this.ctx,o=this.defs,a=this.width,s=this.height;if(!r){if(o.clear(),e)this.__checkRoot(i,a,s);else if(!this.__checkUpdate(i,n,a,s))return;this.__checkReflow(a,s),i!==et.CANVAS||this.props.noRender?i!==et.SVG||this.props.noRender?i!==et.WEBGL||this.props.noRender||(this.__clear(n,i),Am.renderWebgl(i,n,this)):(Am.renderSvg(i,o,this,e),(r=this.virtualDom).defs=o.value,this.dom.__vd?gg(this.dom,this.dom.__vd,r):this.dom.innerHTML=Tt.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=o):(this.__clear(n,i),Am.renderCanvas(i,n,this)),Oy(t)&&t(),this.emit(Xs.REFRESH,this.__rlv),this.__rlv=Py}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var e,t=this.dom,t=(t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null),this.ctx);this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t!==this.width||e!==this.height?(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r)):Oy(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var i,n=this,e=this.taskUp;this.isDestroyed||(e.length||(Ml.nextFrame({__before:function(r){n.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){My(t)&&Oy(t.__before)&&t.__before(r)})},__after:function(e){n.isDestroyed||i.forEach(function(t){My(t)&&Oy(t.__after)?t.__after(e):Oy(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"addForceRefreshTask",value:function(t){this.__hasRootUpdate=!0,this.addRefreshTask(t)}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,n=this,i=this.taskCp;this.isDestroyed||(i.length||(Ml.__nextFrameCp({__before:function(e){n.isDestroyed||(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),sg.check(n),sg.updateList.length&&sg.updateList.forEach(function(t){var e=t.root,r=t.shadowRoot,i=(r instanceof xs&&(r=r.domParent),{});i[zm]=r,i[Km]=r.currentStyle,i[Zm]=Gy,i[$m]=t,i[Qm]=r.__config,n.__addUpdate(r,r.__config,e,e.__config,i)}))},__after:function(e){n.isDestroyed||(r.forEach(function(t){t.__after(e)}),sg.did())}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t))}},{key:"getTargetAtPoint",value:function(t,e,x){return function u(t,e,r,c,_){var i=t.__sx1,n=t.__sy1,f=t.offsetWidth,d=t.offsetHeight,p=t.matrixEvent,g=t.children,o=t.zIndexChildren,a=t.computedStyle,v=a[Cm],a=a[Xm];if(x||"none"!==v){if(Array.isArray(o)){for(var s=0,m=g.length;s<m;s++)g[s].__index__=s;for(var l=o.length-1;0<=l;l--)if(!((h=o[l])instanceof karas.Text)){var h,y=c.slice(),E=(y.push(h.__index__),_.slice());if(E.push(l),h=u(h,e,r,y,E))return h}}if(x||"none"!==a)return ie.pointInQuadrilateral(e,r,i,n,i+f,n,i+f,n+d,i,n+d,p)?{target:t,path:c,zPath:_}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,n=this.currentStyle,o=this.computedStyle;-1===["flex","block"].indexOf(n[Cm])&&(o[Cm]=n[Cm]="block"),"absolute"===n[Sm]&&(o[Sm]=n[Sm]="static"),n[wm]=[e,Cy],n[Dm]=[r,Cy],o[wm]=e,o[Dm]=r,t===et.CANVAS||t===et.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===et.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,n){i=i[fy];t===r?(i=r.__updateRoot)?(n[Zm]&&(i[Zm]|=n[Zm]),n[Km]&&(i[Jm]=i[Jm]||[]).push((o(t={},Km,n[Km]),o(t,qm,n[qm]),o(t,jm,n[jm]),t))):r.__updateRoot=n:e.hasOwnProperty(dy)?i.hasOwnProperty(e[dy])?(t=i[e[dy]],n[Zm]&&(t[Zm]|=n[Zm]),n[Km]&&(t[Jm]=t[Jm]||[]).push((o(r={},Km,n[Km]),o(r,qm,n[qm]),o(r,jm,n[jm]),r))):Rt.error("Update process miss uniqueUpdateId"):(e[dy]=Jy,i[Jy++]=n)}},{key:"__checkUpdate",value:function(t,u,c,_){for(var e=this,r=[],i={},n=[],f={},d=[],p=e.__updateRoot,o=e.__updateHash,a=e.__hasRootUpdate,s=(e.__hasRootUpdate=!1,p&&(e.__updateRoot=null,(a=Qy(t,e,p,r,i,n))&&e.__checkRoot(t,c,_)),Object.keys(o)),l=0,g=s.length;l<g;l++)var v=Qy(t,e,o[s[l]],r,i,n,f,d),a=a||v;e.__reflowList=r,Jy=0,e.__updateHash=e.__config[fy]={},n.forEach(function(t){delete t[dy]}),d.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(e.__structs))});for(var h=0,m=s.length;h<m;h++)delete o[s[h]][Qm][dy];return a}},{key:"__checkReflow",value:function(i,a){var S=this,t=this.__reflowList;if(t.length){for(var s,l,J=this,h=[],Q={},u=Zy=0,c=t.length;u<c;u++){var e=t[u],r=e.node,_=e.component,f=e.addDom,d=e.removeDom;if(r===this){s=!0;break}if((r=f&&r instanceof Zs?r.shadowRoot:r).hasOwnProperty("__uniqueReflowId")||(r.__uniqueReflowId=Zy,Q[Zy++]=e),function(t,e,r,i,n){if(!n||"absolute"!==r.currentStyle[Sm]){var o=r;if(-1<["inline","inlineBlock"].indexOf(o.currentStyle[Cm])||-1<["inline","inlineBlock"].indexOf(o.computedStyle[Cm])){do{if((o=o.domParent)===t)return 1;if($y(o))return;if("absolute"===o.currentStyle[Sm]||"absolute"===o.computedStyle[Sm])return void qy(o,e,i,n)}while(o&&(-1<["inline","inlineBlock"].indexOf(o.currentStyle[Cm])||-1<["inline","inlineBlock"].indexOf(o.computedStyle[Cm])));if(jy(o,!0))return void qy(o,e,i,n)}var a,s=o.domParent;if(!$y(s)){do{if($y(s))return}while(("flex"!==s.computedStyle[Cm]&&"flex"!==s.currentStyle[Cm]||(a=s),"absolute"!==s.currentStyle[Sm]&&"absolute"!==s.computedStyle[Sm])&&(!jy(s,!0)&&(s=s.domParent)));if((o=a?a:o)===t)return 1;for(s=o;s;){if("absolute"===s.currentStyle[Sm]||"absolute"===s.computedStyle[Sm]){if(s===t)break;if(jy(s))break;return void qy(s,e,i,n)}s=s.domParent}if(o!==r)qy(o,e,i,n);else if(n){var l=!0,h=r.prev,u=r.next;if(!(l=h&&-1<["inline","inlineBlock"].indexOf(h.currentStyle[Cm])||u&&-1<["inline","inlineBlock"].indexOf(u.currentStyle[Cm])?!1:l)){if((o=r.domParent)===t)return 1;qy(o,e,!1,!0)}}}}}(J,Q,r,_,f)){s=!0,f&&(this.__zIndexChildren=null);break}d&&h.push(e)}if(Zy=0,this.__reflowList=[],s)return W0.clearUniqueReflowId(Q),l=0===this.currentStyle[Vm].indexOf("vertical"),this.__layout({x:0,y:0,w:i,h:a,isVertical:l},!1,!1),this.__layoutAbs(this,{x:0,y:0,w:i,h:a,isVertical:l}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId"))return t=Q[t.__uniqueReflowId],e.uniqueList.push(t),!0},{uniqueList:h});var C=[],I=0,k=[],w=0,tt=(h.forEach(function(t){var e=t.node,u=t.component,c=t.addDom,t=t.removeDom,r=e.computedStyle,i=e.currentStyle,_=r[Lm],f=r[Sm],r=r[Cm],n="absolute"===f,d="absolute"===i[Sm],r="none"===r,p="none"===i[Cm];if(!r||!p){for(var g,o=e.domParent,v=o.__layoutData,m=v.x,y=v.y,v=v.h,E=o.width,x=o.computedStyle,a=e,s=(a=a.isShadowRoot?a.hostRoot:a).prev;s;){if(s instanceof xs||"absolute"!==s.computedStyle[Sm]&&"none"!==s.computedStyle[Cm]){y=s.y+s.outerHeight,g=!0;break}s=s.prev}t||(g||(y+=x[Fm]+x[Gm]+x[Bm]),m+=x[Nm]+x[Wm]+x[Hm]);var l=e;if(!t)if(d){for(l=l.domParent;l&&l!==J&&!wy(l);)if(l.parent)l=l.parent;else if(l.host)break;l=l||J;if(o.__layoutAbs(l,o.__layoutData,e),c)return a=o.__modifyStruct(J,I),I+=a[1],C.push(a),o.__updateStruct(J.__structs),void(S.renderMode===et.SVG&&tE(o));if(n)return void(u?(a=e.__modifyStruct(J,I),I+=a[1],C.push(a),(f===i[Sm]||"static"!==f&&"static"!==i[Sm])&&_===i[Lm]||(o.__updateStruct(J.__structs),S.renderMode===et.SVG&&tE(o))):(r||p)&&(e.__zIndexChildren=null,n=e.__modifyStruct(J,I),I+=n[1],C.push(n)));o.__updateStruct(J.__structs),S.renderMode===et.SVG&&tE(o)}else{if(e.__layout({x:m,y:y,w:E,h:v},!1,!1),y+=e.outerHeight,u)l=e;else for(l=l.domParent;l&&l!==J&&!wy(l);)if(l.parent)l=l.parent;else if(l.host)break;l=l||J,e instanceof up&&e.__layoutAbs(l,{x:m,y:y,w:E,h:v})}for(var b=e;b&&b!==J;)if("relative"===(x=(b=b.domParent).computedStyle)[Sm]){var A=b,T=A.ox,A=A.oy;T&&e.__offsetX(T),A&&e.__offsetY(A);break}for(var h=(e=e.isShadowRoot?e.hostRoot:e).next;h&&!h.hasOwnProperty("__uniqueReflowId");){if("absolute"!==h.computedStyle[Sm]){var R=y-h.y;if(R)for(;h&&!h.hasOwnProperty("__uniqueReflowId");){var M=h,O=(M=M instanceof Zs?M.shadowRoot:M).computedStyle;"absolute"!==O[Sm]&&"none"!==O[Cm]&&M.__offsetY(R,!0,Yy),h=h.next}break}h=h.next}o.hasOwnProperty("__uniqueMergeOffsetId")||d&&r||(o.__uniqueMergeOffsetId=w++,k.push(o)),c||t?(a=o.__modifyStruct(J,I),I+=a[1],C.push(a),S.renderMode===et.SVG&&tE(o)):u?(n=e.__modifyStruct(J,I),I+=n[1],C.push(n),(f===i[Sm]||"static"!==f&&"static"!==i[Sm])&&_===i[Lm]||(e.domParent.__updateStruct(J.__structs),S.renderMode===et.SVG&&tE(e.domParent))):(r||p)&&(e.__zIndexChildren=null,m=e.__modifyStruct(J,I),I+=m[1],C.push(m))}}),[]),n=(k.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var u,c,_=t.flowChildren,f=t.absChildren,e=[],r=[],d=_.length,i=0;i<d;i++){var n=_[i],o=(n=n instanceof Zs?n.shadowRoot:n)instanceof p0,p=(!u&&o&&n.hasOwnProperty("__uniqueReflowId")&&(u=!0,c=i),o&&n.currentStyle),g=o&&"inline"===p[Cm],v=o&&"inlineBlock"===p[Cm],m=n;if(!o||g||v){if(e.length&&r.length&&u){var y=W0.getMergeMargin(r,e);if(y)for(var E=Math.max(c,i-e.length+1);E<d;E++)_[E].__offsetY(y,!0,Yy)}r=[],e=[]}if(o&&!g){var x,b,v=o&&"none"===p[Cm],g=void 0;if(!v&&n.flowChildren&&0===n.flowChildren.length&&(p=(o=n.computedStyle)[Fm],x=o[Pm],R=o[Bm],M=o[Ym],O=o[Dm],b=o[Gm],o=o[Um],R<=0&&M<=0&&O<=0&&b<=0&&o<=0&&(e.push(x),r.push(p),g=!0)),v||g){if(i===d-1){var A=W0.getMergeMargin(r,e);if(A)for(var T=Math.max(c,i-e.length+1);T<d;T++)_[T].__offsetY(A,!0,Yy)}}else{var R=n.computedStyle,M=R[Fm],O=R[Pm];if(e.length&&(r.push(M),u)){var S=W0.getMergeMargin(r,e);if(S)for(var C=Math.max(c,i-e.length+1);C<d;C++)_[C].__offsetY(S,!0,Yy)}r=[],e=[O]}}}var I=t.currentStyle,k=I[Dm],w=t===J||t.isShadowRoot||"absolute"===I[Sm]||"relative"===I[Sm];if(k[1]===Sy&&m){var a,I=t.height+t.computedStyle[Bm],s=m.y+m.outerHeight-t.y-I;if(s){t.__resizeY(s,Yy);for(var D=0,L=f.length;D<L;D++){var l=f[D],F=l.currentStyle,N=F[Mm],h=F[Om],F=F[Dm];if(N[1]===Sy)if(h[1]===Sy)for(var P=l.prev;P;){var B=P,H=(B=B instanceof Zs?B.shadowRoot:B)instanceof p0,Y=H&&B.currentStyle;if(!(H&&"absolute"===Y[Sm])){H=B.y+B.outerHeight-l.y;H&&l.__offsetY(H,!0,Yy);break}P=P.prev}else h[1]===Cy?l.__offsetY(s,!0,Yy):h[1]===Iy&&(h=(1-.01*h[0])*s,l.__offsetY(h,!0,Yy));else if(N[1]===Iy)if(w){var h=.01*N[0]*s;l.__offsetY(h,!0,Yy)}else{if(!a)for(a=t.domParent;a&&a!==J&&!a.isShadowRoot;){var G=a.currentStyle;if("absolute"===G[Sm]||"relative"===G[Sm])break;a=a.domParent}a.currentStyle[Dm][1]!==Cy&&(h=.01*N[0]*s,l.__offsetY(h,!0,Yy))}if(F[1]===Iy)if(w)t.__layoutAbs(t,t.__layoutData,l);else{if(!a)for(a=t.domParent;a&&a!==J&&!a.isShadowRoot;){var W=a.currentStyle;if("absolute"===W[Sm]||"relative"===W[Sm])break;a=a.domParent}tt.push([t,a,l])}}return void W0.offsetAndResizeByNodeOnY(t,J,Q,s,tt)}}for(var U=0,X=f.length;U<X;U++){var V=f[U],z=V.currentStyle,K=z[Mm],z=z[Om];if(K[1]===Sy&&z[1]===Sy)for(var j=V.prev;j;){var $=j,Z=($=$ instanceof Zs?$.shadowRoot:$)instanceof p0,q=Z&&$.currentStyle;if(!(Z&&"absolute"===q[Sm])){Z=$.y+$.outerHeight-V.y;Z&&V.__offsetY(Z,!0,Yy);break}j=j.prev}}}),tt.forEach(function(t){t[0].__layoutAbs(t[1],t[0].__layoutData,t[2])}),0),o=0,p=!0,g=J.__structs;if(C.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];if(p)p=!1,o=e[xy]+(e[by]||0)+1,n+=t;else{for(var r=e[xy]+(e[by]||0)+1+n,i=o;i<r;i++)g[i][xy]+=n;o=r,n+=t}}),n)for(var v=o,m=g.length;v<m;v++)g[v][xy]+=n;W0.clearUniqueReflowId(Q)}}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},Ml.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===et.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===et.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),n}(),iE=A.STYLE_KEY.STROKE_WIDTH,nE=Tt.isNil;function oE(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function aE(t,e){var r=0;return t&&2<=t.length&&r++,e&&2<=e.length&&(r+=2),r}function sE(t,e,r,i,n,o,u,a,s){var l,h,a=7<arguments.length&&void 0!==a?a:0,s=8<arguments.length&&void 0!==s?s:1;return 0===a&&1===s?[t,e,r,i,n,o]:a===s?[]:(s<a&&(a=(h=[s,a])[0],s=h[1]),a=Math.max(0,a),s=Math.min(1,s),3===u?(h=Bt(ie.sliceBezier2Both([[t,e],n,o,[r,i]],a,s),4),t=(l=Bt(h[0],2))[0],e=l[1],n=h[1],o=h[2],r=(l=Bt(h[3],2))[0],i=l[1]):2===u?(h=Bt(ie.sliceBezier2Both([[t,e],o,[r,i]],a,s),3),t=(l=Bt(h[0],2))[0],e=l[1],o=h[1],r=(l=Bt(h[2],2))[0],i=l[1]):1===u?(h=Bt(ie.sliceBezier2Both([[t,e],n,[r,i]],a,s),3),t=(l=Bt(h[0],2))[0],e=l[1],n=h[1],r=(u=Bt(h[2],2))[0],i=u[1]):(t+=(l=r-t)*a,e+=(h=i-e)*a,r+=l*(1-s),i+=h*(1-s)),[t,e,r,i,n,o])}var bi=function(){d(R,H1);var s=p(R);function R(t,e){var r,i,n;if(_(this,R),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):nE(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):nE(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):nE(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):nE(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else nE(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var a=r.__end.length;a<r.__x1.length;a++)r.__end.push(1)}else nE(e.end)||(n=parseFloat(e.end),isNaN(n)&&(n=1),r.__end=r.__x1.map(function(){return n}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],nE(e.x1)||(r.__x1=parseFloat(e.x1)||0),nE(e.y1)||(r.__y1=parseFloat(e.y1)||0),nE(e.x2)||(r.__x2=parseFloat(e.x2)||0),nE(e.y2)||(r.__y2=parseFloat(e.y2)||0),nE(e.start)||(r.__start=parseFloat(e.start)||0),nE(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return f(R,[{key:"buildCache",value:function(e,r,i){var n,o=this,a=this.width,s=this.height,l=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){(nE(l[t])||i)&&(n=!0,l[t]=oE(o[t],e,a,h))}),["y1","y2"].forEach(function(t){(nE(l[t])||i)&&(n=!0,l[t]=oE(o[t],r,s,h))}),["controlA","controlB"].forEach(function(t){(nE(l[t])||i)&&(n=!0,l[t]=function e(t,r,i,n,o,a){if(a){if(t)return t.map(function(t){return e(t,r,i,n,o)})}else if(t&&2<=t.length)return[r+t[0]*n,i+t[1]*o];return[]}(o[t],e,r,a,s,h))}),["start","end"].forEach(function(t){(nE(l[t])||i)&&(n=!0,l[t]=o[t])}),n}},{key:"render",value:function(h,t,u,e,r,a){var f=this,t=N(F(R.prototype),"render",this).call(this,h,t,u,e,r,a);if(t.break)return t;u=t.ctx;var c,s,i,n,o,l,d,p,e=t.sx3,r=t.sy3,a=t.stroke,g=t.strokeWidth,v=t.strokeDasharray,m=t.strokeDasharrayStr,y=t.strokeLinecap,E=t.strokeLinejoin,x=t.strokeMiterlimit,b=t.dx,A=t.dy,_=this.__cacheProps,T=this.isMulti;return this.buildCache(e,r)&&h===et.SVG&&(c="",T?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],n=_.y2[e],o=_.controlA[e],a=_.controlB[e],s=_.start[e],e=_.end[e],l=aE(o,a);0===s&&1===e||(t=(s=Bt(sE(t,i,r,i,o,a,l,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],o=s[4],a=s[5]),c+=se.svgLine(t,i,r,n,o,a,l)}):(e=aE(_.controlA,_.controlB),r=_.x1,n=_.y1,o=_.x2,l=_.y2,d=_.controlA,p=_.controlB,i=_.start,s=_.end,0===i&&1===s||(r=(i=Bt(sE(r,n,o,l,d,p,e,i,s,_.len),6))[0],n=i[1],o=i[2],l=i[3],d=i[4],p=i[5]),c=se.svgLine(r,n,o,l,d,p,e)),_.d=c),h===et.CANVAS||h===et.WEBGL?a.forEach(function(t,e){var r,i,n,o,a,s=g[e],l=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(f.__preSetCanvas(h,u,{stroke:t,strokeWidth:s,strokeDasharray:v[e],strokeLinecap:y[e],strokeLinejoin:E[e],strokeMiterlimit:x[e]}),l&&(u.strokeStyle=t.v[0]),u.beginPath(),T?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],n=_.y2[e],o=_.controlA[e],a=_.controlB[e],s=_.start[e],e=_.end[e],l=aE(o,a);0===s&&1===e||(t=(s=Bt(sE(t,i,r,i,o,a,l,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],o=s[4],a=s[5]),se.canvasLine(u,t,i,r,n,o,a,l,b,A)}):(s=aE(_.controlA,_.controlB),e=_.x1,l=_.y1,t=_.x2,n=_.y2,o=_.controlA,a=_.controlB,i=_.start,r=_.end,0===i&&1===r||(e=(i=Bt(sE(e,l,t,n,o,a,s,i,r,_.len),6))[0],l=i[1],t=i[2],n=i[3],o=i[4],a=i[5]),se.canvasLine(u,e,l,t,n,o,a,s,b,A)),u.stroke(),u.closePath())}):h===et.SVG&&a.forEach(function(t,e){var r=g[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),i=[["d",_.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];f.__propsStrokeStyle(i,m[e],y[e],E[e],x[e]),f.addGeom("path",i)}),t}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx3,i=this.__sy3,n=this.computedStyle[iE],r=(this.buildCache(r,i),e.x1),s=e.y1,l=e.x2,h=e.y2,u=e.controlA,c=e.controlB,_=N(F(R.prototype),"bbox",this),f=0;return n.forEach(function(t){f=Math.max(f,t)}),f=Math.ceil(.5*f)+1,t||(r=[r],l=[l],s=[s],h=[h],u=[u],c=[c]),r.forEach(function(t,e){var r,i=s[e],n=l[e],o=h[e],a=u[e],e=c[e];(nE(a)||a.length<2)&&(nE(e)||e.length<2)?(_[0]=Math.min(_[0],t-f),_[0]=Math.min(_[0],n-f),_[1]=Math.min(_[1],i-f),_[1]=Math.min(_[1],o-f),_[2]=Math.max(_[2],t+f),_[2]=Math.max(_[2],n+f),_[3]=Math.max(_[3],i+f),_[3]=Math.max(_[3],o+f)):nE(a)||a.length<2?(r=ie.bboxBezier(t,i,e[0],e[1],n,o),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f)):nE(e)||e.length<2?(r=ie.bboxBezier(t,i,a[0],a[1],n,o),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f)):(r=ie.bboxBezier(t,i,a[0],a[1],e[0],e[1],n,o),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f))}),_}}]),R}(),lE=A.STYLE_KEY.STROKE_WIDTH,hE=Tt.isNil;function uE(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function cE(t,u){var e=[],r=0,i=[];if(u)r=[],t.forEach(function(t){t=cE(t);e.push(t.list),r.push(t.total),i.push([0].concat(t.increase))});else if(Array.isArray(t)){r=0,i.push(0);for(var n=0,o=0,c=t.length;o<c;o++){var _=t[o];if(Array.isArray(_)){n=o;break}}for(var a=t[n],f=n+1,d=t.length;f<d;f++){var s,l,h=t[f];Array.isArray(h)&&(2===h.length?(l=Math.abs(h[0]-a[0]),s=Math.abs(h[1]-a[1]),l=Math.sqrt(Math.pow(l,2)+Math.pow(s,2)),e.push(l),r+=l,i.push(r),a=h):4===h.length?(s=ie.bezierLength([a,[h[0],h[1]],[h[2],h[3]]],2),e.push(s),r+=s,i.push(r),a=[h[2],h[3]]):6===h.length&&(l=ie.bezierLength([a,[h[0],h[1]],[h[2],h[3]],[h[4],h[5]]],3),e.push(l),r+=l,i.push(r),a=[h[4],h[5]]))}}return{list:e,total:r,increase:i}}function _E(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var n=r+(i-r>>1);return t[n]===e?n:t[n]>e?_E(t,e,r,Math.max(n-1,r)):_E(t,e,Math.min(n+1,i),i)}function fE(t,e,r,u){var i=2<arguments.length&&void 0!==r?r:0,n=3<arguments.length&&void 0!==u?u:1;if(0===i&&1===n)return t;if(i===n)return[];for(n<i&&(i=(r=[n,i])[0],n=r[1]);1<n-i;)n--;for(;n<0||i<0;)n++,i++;for(;1<=n&&1<=i;)n--,i--;var o,a,s,l,h,c=t.length,_=(t=Tt.clone(t),[]),u=1<i?i-1:i,r=1<n?n-1:n,f=_E(e.increase,u*e.total,0,c-1),d=_E(e.increase,r*e.total,0,c-1),p=i<0,g=1<n,v=1;(r*=e.total)>e.increase[d]&&(a=t[d].slice(t[d].length-2),s=t[d+1],h=e.list[d],v=r=(r-e.increase[d])/h,2===s.length?(h=s[0]-a[0],o=s[1]-a[1],o=g?[a[0]+r*h,a[1]+r*o]:[s[0]-(r=1-r)*h,s[1]-r*o]):4===s.length?o=[(h=ie.sliceBezier([a,[s[0],s[1]],[s[2],s[3]]],r))[1][0],h[1][1],h[2][0],h[2][1]]:6===s.length&&(o=[(h=ie.sliceBezier([a,[s[0],s[1]],[s[2],s[3]],[s[4],s[5]]],r))[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]])),(u*=e.total)>e.increase[f]&&(a=t[f].slice(t[f].length-2),s=e.list[f],f!==d||p||g||1===v||(s*=v,o&&(l=o)),l=l||t[f+1],r=(u-e.increase[f])/s,2===l.length?(h=l[0]-a[0],v=l[1]-a[1],p?_.push([l[0]-(r=1-r)*h,l[1]-r*v]):_.push([a[0]+r*h,a[1]+r*v]),_.push(l)):4===l.length?(u=ie.sliceBezier([[l[2],l[3]],[l[0],l[1]],a],1-r).reverse(),_.push(u[0]),_.push([u[1][0],u[1][1],u[2][0],u[2][1]]),f!==d||p||g||(o=null)):6===l.length&&(e=ie.sliceBezier([[l[4],l[5]],[l[2],l[3]],[l[0],l[1]],a],1-r).reverse(),_.push(e[0]),_.push([e[1][0],e[1][1],e[2][0],e[2][1],l[4],l[5]]),f!==d||p||g||(o=null)));for(var m=f+2;m<=d+(p||g?c:0);m++)_.push(t[m%c]);return o&&_.push(o),_}var dE=function(){d(l,H1);var s=p(l);function l(t,e){var r,i,n;if(_(this,l),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else hE(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var a=r.__end.length;a<r.__points.length;a++)r.__end.push(1)}else hE(e.end)||(n=parseFloat(e.end),isNaN(n)&&(n=1),r.__end=r.__points.map(function(){return n}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,hE(e.start)||(r.__start=parseFloat(e.start)||0),hE(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t);return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return f(l,[{key:"__getPoints",value:function(o,a,s,l,t,h){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(h){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var i=[],n=0;n<r;n++)n%2==0?i.push(o+t[n]*s):i.push(a+t[n]*l);return i}})}},{key:"__reprocessing",value:function(t){return t}},{key:"__needRebuildSE",value:function(){}},{key:"buildCache",value:function(e,r){var t,i,n,u=this,o=this.width,a=this.height,s=this.points,c=this.controls,_=this.start,f=this.end,l=this.__cacheProps,h=this.isMulti;return hE(l.points)&&(t=!0,l.points=h?s.map(function(t){if(Array.isArray(t))return u.__getPoints(e,r,o,a,t)}):this.__getPoints(e,r,o,a,s)),hE(l.controls)&&(t=!0,l.controls=h?c.map(function(t){return Array.isArray(t)?u.__getPoints(e,r,o,a,t,!0):t}):this.__getPoints(e,r,o,a,c,!0)),hE(l.start)&&(i=!0,l.start=_),hE(l.end)&&(i=!0,l.end=f),this.__needRebuildSE(l)&&(i=!0),t&&(s=l.points,n=l.controls,l.list2=h?s.map(function(t,e){var r=n[e];if(Array.isArray(t))return t.map(function(t,e){return e?uE(t,r&&r[e-1]):t})}):s.map(function(t,e){return e?uE(t,n[e-1]):t}),l.len=cE(l.list2,h)),(t||i)&&(l.list=h?l.list2.map(function(t,e){if(Array.isArray(t))return fE(t,{list:(t=l.len).list[e],total:t.total[e],increase:t.increase[e]},l.start[e],l.end[e])}):fE(l.list2,l.len,l.start,l.end),l.list=this.__reprocessing(l.list,h)),t||i}},{key:"render",value:function(t,e,r,i,n,o){e=N(F(l.prototype),"render",this).call(this,t,e,r,i,n,o);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t,e,r,i,c,_,n,f;return this.__bbox||(t=this.isMulti,e=this.__cacheProps,n=this.__sx3,r=this.__sy3,i=this.computedStyle[lE],this.buildCache(n,r),c=N(F(l.prototype),"bbox",this),_=0,i.forEach(function(t){_=Math.max(_,t)}),_=Math.ceil(.5*_)+1,n=e.points,f=e.controls,t||(n=[n],f=[f]),n.forEach(function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=f[e]||[],e=Bt(t[0],2),i=e[0],n=e[1],o=1,u=t.length;o<u;o++){var a,s=Bt(t[o],2),l=s[0],s=s[1],h=r[o-1];h&&4===h.length?(a=ie.bboxBezier(i,n,h[0],h[1],h[2],h[3],l,s),c[0]=Math.min(c[0],a[0]-_),c[1]=Math.min(c[1],a[1]-_),c[2]=Math.max(c[2],a[2]+_),c[3]=Math.max(c[3],a[3]+_)):h&&2===h.length?(a=ie.bboxBezier(i,n,h[0],h[1],l,s),c[0]=Math.min(c[0],a[0]-_),c[1]=Math.min(c[1],a[1]-_),c[2]=Math.max(c[2],a[2]+_),c[3]=Math.max(c[3],a[3]+_)):(c[0]=Math.min(c[0],i-_),c[1]=Math.min(c[1],n-_),c[2]=Math.max(c[2],i+_),c[3]=Math.max(c[3],n+_)),i=l,n=s}}),this.__bbox=c),this.__bbox}}]),l}(),Oi=function(){d(a,dE);var r=p(a);function a(t,e){return _(this,a),t=r.call(this,t,e),e.booleanOperations&&(t.__booleanOperations=e.booleanOperations),t}return f(a,[{key:"__getPoints",value:function(t,e,r,i,n,o){t=N(F(a.prototype),"__getPoints",this).call(this,t,e,r,i,n,o);return o||t.push(t[0]),t}},{key:"__reprocessing",value:function(o,t){if(!t)return o;var a=this.booleanOperations,s=o.length;if(!Array.isArray(a)&&a)for(var e=a,a=[a],r=1;r<s-1;r++)a.push(e);if(Array.isArray(a)&&a.length){t=function(){for(var t,e=[],r=0;r<s-1;r++){var i=o[r],n=o[r+1];switch(a[r]){case"intersection":i&&i.length&&n&&n.length?vo([i],[n]).forEach(function(t){e.push(t[0])}):e.push(null),t=!0;break;case"union":i&&i.length||n&&n.length?i&&i.length?n&&n.length?fo([i],[n]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(n):e.push(null),t=!0;break;case"diff":i&&i.length?n&&n.length?po([i],[n]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(null),t=!0;break;case"xor":i&&i.length||n&&n.length?i&&i.length?n&&n.length?go([i],[n]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(n):e.push(null),t=!0;break;default:e.push(o[r]),t=!1}}return t||e.push(o[s-1]),{v:e}}();if("object"===mt(t))return t.v}return o}},{key:"__needRebuildSE",value:function(t){if(Tt.isNil(t.booleanOperations))return t.booleanOperations=!0}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),a}(),t=A.STYLE_KEY,pE=t.STROKE_WIDTH,gE=t.BOX_SHADOW,vE=Tt.isNil,mE=ie.sectorPoints;function yE(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var dr=function(){d(M,H1);var r=p(M);function M(t,e){return _(this,M),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return yE(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return yE(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return yE(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,vE(e.begin)||(t.__begin=yE(e.begin,0)),vE(e.end)||(t.__end=yE(e.end,0)),vE(e.r)||(t.__r=yE(e.r,1)),vE(e.edge)||(t.__edge=!!e.edge),vE(e.closure)||(t.__closure=!!e.closure)),t}return f(M,[{key:"buildCache",value:function(i,n,t){var e,o=this.width,r=this.begin,u=this.end,a=this.r,s=this.edge,c=this.closure,l=this.__cacheProps,h=this.isMulti;return(vE(l.begin)||t)&&(e=!0,l.begin=(r||0)%360),(vE(l.end)||t)&&(e=!0,l.end=(u||0)%360),(vE(l.r)||t)&&(e=!0,l.r=h?a.map(function(t){return t*o*.5}):a*o*.5),a=l.r,(vE(l.edge)||t)&&(e=!0,l.edge=s),(vE(l.closure)||t)&&(e=!0,l.closure=c),e&&(h?(l.list=[],l.sList=[],r.forEach(function(t,e){var r=vE(a[e])?.5*o:a[e],r=mE(i,n,r,parseFloat(t||0)%360,parseFloat(u[e]||0)%360),t=r.slice(0);c[e]?(r.push(r[0].slice(0)),s&&t.push(t[0].slice(0))):(r.unshift([i,n]),r.push([i,n]),s&&(t.unshift([i,n]),t.push([i,n]))),l.list.push(r),l.sList.push(t)})):(h=(t=mE(i,n,a,parseFloat(r||0),parseFloat(u||0))).slice(0),c?(t.push(t[0].slice(0)),s&&h.push(h[0].slice(0))):(t.unshift([i,n]),t.push([i,n]),s&&(h.unshift([i,n]),h.push([i,n]))),l.list=t,l.sList=h)),e}},{key:"render",value:function(t,e,r,i,u,c){e=N(F(M.prototype),"render",this).call(this,t,e,r,i,u,c);if(e.break)return e;this.buildCache(e.cx,e.cy),r=e.ctx;var n=e.fill,_=e.fillRule,o=e.stroke,f=e.strokeWidth,d=e.strokeDasharray,p=e.strokeDasharrayStr,g=e.strokeLinecap,v=e.strokeLinejoin,m=e.strokeMiterlimit,y=e.dx,E=e.dy,i=this.__cacheProps,x=i.list,b=i.sList,A=this.isMulti;if(n.length<=1&&o.length<=1){u={fill:n[0],fillRule:_[0],stroke:o[0],strokeWidth:f[0],strokeDasharray:d[0],strokeDasharrayStr:p[0],strokeLinecap:g[0],strokeLinejoin:v[0],strokeMiterlimit:m[0],dx:y,dy:E};this.__renderOneSector(t,r,A,x,b,u)}else{for(var a=0,T=n.length;a<T;a++){var s=n[a];s&&(s={fill:s,fillRule:_[a],dx:y,dy:E},this.__renderOneSector(t,r,A,x,b,s))}for(var l=0,R=o.length;l<R;l++){var h=o[l];h&&(h={stroke:h,strokeWidth:f[l],strokeDasharray:d[l],strokeDasharrayStr:p[l],strokeLinecap:g[l],strokeLinejoin:v[l],strokeMiterlimit:m[l],dx:y,dy:E},this.__renderOnePolygon(t,r,A,x,b,h))}}return e}},{key:"__renderOneSector",value:function(t,e,r,i,n,o){var a=o.fill,s=o.stroke,l=o.strokeWidth,h="conic"===a.k,u="conic"===s.k,c="radial"===a.k&&Array.isArray(a.v),_=0<l&&"radial"===s.k&&Array.isArray(s.v);h||u?(h?this.__conicGradient(t,e,i,r,o):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0),0<l&&u?Rt.warn("Stroke style can not use conic-gradient"):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0)):c||_?(c?this.__radialEllipse(t,e,i,r,o,"fill"):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0),0<l&&_?(Rt.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke=o.stroke.v[0],this.__drawPolygon(t,e,r,n,o,!1,!0)):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0)):(a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0,!1),0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,n,o,a,s,l){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,o,a,s,l),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<n&&(t=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,o,a,s,l),this.addGeom("path",t)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t,e,r,i,n,o,a,s,l,h;return this.__bbox||(s=this.isMulti,l=this.__cacheProps,e=this.__sx3,n=this.__sy3,i=this.width,a=this.height,h=(t=this.computedStyle)[pE],t[gE],this.buildCache(t=e+.5*i,e=n+.5*a),i=0,i=s?(r=0,l.r.forEach(function(t){r=Math.max(t,r)}),r):l.r,n=N(F(M.prototype),"bbox",this),o=0,h.forEach(function(t){o=Math.max(o,t)}),a=t-i-(o=Math.ceil(.5*o)+1),s=t+i-o,l=e-i+o,h=e+i+o,n[0]=Math.min(n[0],a),n[1]=Math.min(n[1],l),n[2]=Math.max(n[2],s),n[3]=Math.max(n[3],h),this.__bbox=n),this.__bbox}}]),M}(),EE=A.STYLE_KEY.STROKE_WIDTH,xE=Tt.isNil;function bE(t,e,r,i,n,o){n=4<arguments.length&&void 0!==n?n:0,o=5<arguments.length&&void 0!==o?o:0;if(0===n||0===o)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];var a=n*ie.H,s=o*ie.H;return[[t+n,e],[t+r-n,e],[t+r+a-n,e,t+r,e+o-s,t+r,e+o],[t+r,e+i-o],[t+r,e+i+s-o,t+r+a-n,e+i,t+r-n,e+i],[t+n,e+i],[t+n-a,e+i,t,e+i+s-o,t,e+i-o],[t,e+o],[t,e+o-s,t+n-a,e,t+n,e]]}function AE(t){return t=parseFloat(t),t=isNaN(t)?0:t}var Vr=function(){d(s,H1);var r=p(s);function s(t,e){return _(this,s),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map(AE)),Array.isArray(e.ry)&&(t.__ry=e.ry.map(AE))):(t.__rx=t.__ry=0,xE(e.rx)||(t.__rx=AE(e.rx)),xE(e.ry)||(t.__ry=AE(e.ry))),t}return f(s,[{key:"buildCache",value:function(r,i,t){var e,n,o=this.width,a=this.height,s=this.rx,u=this.ry,l=this.__cacheProps,h=this.isMulti;return(xE(l.rx)||t)&&(e=!0,l.rx=h?s.map(function(t){return Math.min(t,.5)*o}):Math.min(s,.5)*o),(xE(l.ry)||t)&&(e=!0,l.ry=h?s.map(function(t){return Math.min(t,.5)*a}):Math.min(u,.5)*a),e&&(t=l.rx,n=l.ry,l.list=h?t.map(function(t,e){return bE(r,i,o,a,t,n[e])}):bE(r,i,o,a,t,n)),e}},{key:"render",value:function(t,e,r,i,n,o){e=N(F(s.prototype),"render",this).call(this,t,e,r,i,n,o);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t,e,r,i,n,o,a;return this.__bbox||(t=this.__sx3,e=this.__sy3,r=this.width,i=this.height,n=this.computedStyle[EE],this.buildCache(t,e),o=N(F(s.prototype),"bbox",this),a=0,n.forEach(function(t){a=Math.max(a,t)}),a=Math.ceil(.5*a)+1,o[0]=Math.min(o[0],t-a),o[1]=Math.min(o[1],e-a),o[2]=Math.max(o[2],t+r+a),o[3]=Math.max(o[3],e+i+a),this.__bbox=o),this.__bbox}}]),s}(),TE=A.STYLE_KEY.STROKE_WIDTH,RE=Tt.isNil;function ME(t){return t=parseFloat(t),t=isNaN(t)?1:t}var i=function(){d(h,H1);var r=p(h);function h(t,e){return _(this,h),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map(ME):RE(e.r)||(t.__r=ME(e.r))):(t.__r=1,RE(e.r)||(t.__r=ME(e.r))),t}return f(h,[{key:"buildCache",value:function(e,r,t){var i=this.width,n=this.r,o=this.__cacheProps,a=this.isMulti;(RE(o.r)||t)&&(a?(o.r=n.map(function(t){return t*i*.5}),o.list=o.r.map(function(t){return ie.ellipsePoints(e,r,t,t)})):(o.r=n*i*.5,o.list=ie.ellipsePoints(e,r,o.r,o.r)))}},{key:"render",value:function(t,e,r,i,n,o){e=N(F(h.prototype),"render",this).call(this,t,e,r,i,n,o);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t,e,r,i,n,o,a,s,l;return this.__bbox||(o=this.isMulti,a=this.__cacheProps,l=this.__sx3,r=this.__sy3,t=this.width,i=this.height,s=this.computedStyle[TE],this.buildCache(l=l+.5*t,t=r+.5*i),r=0,r=o?(e=0,a.r.forEach(function(t){e=Math.max(t,e)}),e):a.r,i=N(F(h.prototype),"bbox",this),n=0,s.forEach(function(t){n=Math.max(n,t)}),o=l-r-(n=Math.ceil(.5*n)+1),a=t-r-n,s=l+r+n,l=t+r+n,i[0]=Math.min(i[0],o),i[1]=Math.min(i[1],a),i[2]=Math.max(i[2],s),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),h}(),OE=A.STYLE_KEY.STROKE_WIDTH,SE=Tt.isNil;function CE(t){return t=parseFloat(t),t=isNaN(t)?1:t}var Gr=function(){d(c,H1);var r=p(c);function c(t,e){return _(this,c),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(CE):SE(e.rx)||(t.__rx=[CE(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(CE):SE(e.ry)||(t.__ry=[CE(e.ry)])):(t.__rx=1,SE(e.rx)||(t.__rx=CE(e.rx)),t.__ry=1,SE(e.ry)||(t.__ry=CE(e.ry))),t}return f(c,[{key:"buildCache",value:function(r,i,t){var e,n,o=this.width,a=this.height,s=this.rx,u=this.ry,l=this.__cacheProps,h=this.isMulti;return(SE(l.rx)||t)&&(e=!0,l.rx=h?s.map(function(t){return t*o*.5}):s*o*.5),(SE(l.ry)||t)&&(e=!0,l.ry=h?u.map(function(t){return t*a*.5}):u*a*.5),e&&(s=l.rx,n=l.ry,l.list=h?s.map(function(t,e){return ie.ellipsePoints(r,i,t,n[e])}):ie.ellipsePoints(r,i,s,n)),e}},{key:"render",value:function(t,e,r,i,n,o){e=N(F(c.prototype),"render",this).call(this,t,e,r,i,n,o);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,t,i,u,n,e,o,a,s,l,h;return this.__bbox||(a=this.isMulti,r=this.__cacheProps,l=this.__sx3,h=this.__sy3,t=this.width,e=this.height,s=this.computedStyle[OE],this.buildCache(l=l+.5*t,t=h+.5*e),n=h=0,n=a?(u=i=0,r.rx.forEach(function(t,e){i=Math.max(t,i),u=Math.max(n,r.ry[e])}),h=i,u):(h=r.rx,r.ry),e=N(F(c.prototype),"bbox",this),o=0,s.forEach(function(t){o=Math.max(o,t)}),a=l-h-(o=Math.ceil(.5*o)+1),s=l+h-o,l=t-n+o,h=t+n+o,e[0]=Math.min(e[0],a),e[1]=Math.min(e[1],l),e[2]=Math.max(e[2],s),e[3]=Math.max(e[3],h),this.__bbox=e),this.__bbox}}]),c}(),IE={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},kE={os:"offset",e:"easing"},wE={value:"v",options:"o"},DE={},LE={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},FE={},Wr=(Dt.DOM_KEY_SET.concat(Dt.GEOM_KEY_SET).forEach(function(t){var e;IE.hasOwnProperty(t)?kE[IE[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),IE[t]=e,kE[e]=t)}),Object.keys(wE).forEach(function(t){DE[wE[t]]=t}),Object.keys(LE).forEach(function(t){FE[LE[t]]=t}),{fullCssProperty:IE,abbrCssProperty:kE,fullAnimate:wE,abbrAnimate:DE,fullAnimateOption:LE,abbrAnimateOption:FE}),NE=w.TYPE_VD,PE=w.TYPE_GM,BE=w.TYPE_CP,HE=Tt.isNil,YE=Tt.isFunction,GE=Tt.isPrimitive,WE=Tt.clone,UE=Tt.extend,XE=Wr.abbrCssProperty,VE=Wr.abbrAnimateOption,zE=Wr.abbrAnimate;function KE(r,i){r&&Object.keys(r).forEach(function(t){var e;0===t.indexOf("var-")?(e=t.slice(4),i.hasOwnProperty(e)&&(e=i[e],r["var-"+e]=r[t])):i.hasOwnProperty(t)&&(e=i[t],r[e]=r[t],delete r[t])})}function jE(l,h){var t;l&&h&&(l.hasOwnProperty("vars")?(t=l.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&h.hasOwnProperty(e))for(var i=l,n=0,o=r.length;n<o;n++){var a=r[n];if(!i.hasOwnProperty(a)&&n!==o-1)return void Rt.error("Slot miss "+a);if(n===o-1){var s=h[e];if(void 0===s)return;YE(s)&&(s=s(i(a))),i[a]=s}else i=i[a]}})):Object.keys(l).forEach(function(t){if(0===t.indexOf("var-")){var e=l[t];if(e){var r=t.slice(4);if(r&&e.id&&h.hasOwnProperty(e.id)){var i=h[e.id];if(void 0!==i){var n=l;if(-1<r.indexOf(".")){for(var o=r.split("."),a=o.length,s=0;s<a-1;s++){if(!n[r=o[s]])return void Rt.warn("parseJson vars is not exist: "+e.id+", "+t+", "+o.slice(0,s).join("."));n=n[r]}r=o[a-1]}YE(i)&&(i=i(e)),n[r]=i}}}}}))}function $E(e,t,u,n,r){var i=4<arguments.length&&void 0!==r?r:{};if(GE(t)||t instanceof k||t instanceof Zs)return t;if(Array.isArray(t))return t.map(function(t){return $E(e,t,u,n,i)});var o,a,r=t.libraryId;if(!HE(r)){var s=i[r];if(!s)throw new Error("Link library miss id: "+r);a=s,(o=t).tagName=a.tagName,o.props=WE(a.props),o.children=a.children,o.library=a.library,Object.keys(a).forEach(function(t){0!==t.indexOf("var-")||o.hasOwnProperty(t)||(o[t]=a[t])}),o.libraryId=null,(r=o.init)&&(l=(s=o.props=o.props||{}).style,UE(s,r),l&&(UE(l,r.style),s.style=l),o.init=null),t.libraryId=null}var c,_,f,r=t.library,l=(Array.isArray(r)&&(i={},r.forEach(function(t){var e=i,r=t.id;if(HE(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}),c=t,_=i,(f=n.vars)&&(c.hasOwnProperty("vars")?(s=c.vars,Array.isArray(s)||(s=[s]),Array.isArray(s)&&s.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&f.hasOwnProperty(e)&&"library"===r[0])for(var i=_,n=1,o=r.length;n<o;n++){var a,s,l=r[n];if(!i.hasOwnProperty(l)&&n!==o-1)return void Rt.error("Library slot miss "+l);n===o-1?(a=f[e],YE(a)&&(a=a(i(l))),s=i[l],i[l]=1===n?Object.assign({id:s.id,tagName:s.tagName},a):a):i=i[l]}})):Object.keys(c).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=c[t],delete c[t],!e||(t=t.slice(12))&&e.id&&f.hasOwnProperty(e.id)&&(r=f[e.id],(r=YE(r)?r(e):r)&&r.tagName&&(_[t]=Object.assign({id:t},r))))})),t.library=null),t.tagName),r=t.props,r=void 0===r?{}:r,d=t.children,d=void 0===d?[]:d,h=t.animate,h=void 0===h?[]:h;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var p,g=r.style;if(!1!==n.abbr&&KE(g,XE),jE(g,n.vars),jE(r,n.vars),jE(t,n.vars),!Array.isArray(d))throw new Error("children must be an array");return t="$"===l.charAt(0)?e.createGm(l,r):/^[A-Z]/.test(l)?(g=Zs.getRegister(l),e.createCp(g,r,d.map(function(t){return t&&-1<[NE,PE,BE].indexOf(t.$$type)?t:$E(e,t,u,n,i)}))):e.createVd(l,r,d.map(function(t){return t&&-1<[NE,PE,BE].indexOf(t.$$type)?t:$E(e,t,u,n,i)})),h&&((h=Array.isArray(h)?h:[h]).forEach(function(t){!1!==n.abbr&&KE(t,zE);var e,r,i=t.value,t=t.options;Array.isArray(i)&&i.length&&(p=!0,i.forEach(function(t){!1!==n.abbr&&KE(t,XE),jE(t,n.vars)})),t&&(!1!==n.abbr&&KE(t,VE),jE(t,n.vars),e=t,r=n,["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach(function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}))}),p&&u.push({animate:h,target:t})),t}var ZE={parse:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(e){var n=e.fonts,n=(n&&(n=Array.isArray(n)?n:[n]).forEach(function(t){var e=t.fontFamily,t=t.data;e&&t&&yt.register(e,t)}),!1===e.abbr&&(i.abbr=!1),!1!==i.abbr&&Rt.warn("Abbr in json is deprecated"),Rt.isDom(r)||(i=r||{},r=null),[]),o=$E(t,e=i.singleton||e.singleton?e:Tt.clone(e),n,i);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg/webgl");e=i.controller instanceof Ig?i.controller:o.animateController;t.render(o,r),n.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(n),e.__playAuto()):(e.__records2=e.__records2.concat(n),e.init(e.__records2,e.list2))}else n.length&&(o.__animateRecords={options:i,list:n,controller:i.controller instanceof Ig?i.controller:null});return o}},loadAndParse:function(n,e,u,r){function t(){var t;h===_+f+d&&(t=ZE.parse(n,e,u,r),r&&Tt.isFunction(r.callback)&&r.callback(t))}var i=e.fonts,o=e.components,a=e.imgs,s=[],l=[],c=[],_=(i&&(i=Array.isArray(i)?i:[i]).forEach(function(t){t.url&&s.push(t)}),o&&(o=Array.isArray(o)?o:[o]).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&n.Component.hasRegister(e)&&!i||r&&l.push(t)}),a&&(a=Array.isArray(a)?a:[a]).forEach(function(t){t=t.url;t&&c.push(t)}),s.length),f=l.length,d=c.length,h=0;_||f||d?(n.inject.loadFont(s,function(){h+=_,t()}),n.inject.loadComponent(l.map(function(t){return t.url}),function(){h+=f,l.forEach(function(t){t=t.tagName;t&&window[t]&&!n.Component.hasRegister(t)&&n.Component.register(t,window[t])}),t()}),n.inject.measureImg(c,function(){h+=d,t()})):t()},abbr:Wr},xi={css:bn,reset:Dt,unit:r,font:yt,abbr:fr,transform:Vo},Ai={Animation:Qu,Controller:Ig,easing:Nl,frame:Ml},gi={level:Na,change:Mr,Page:xa,Cache:Ma},yi=(H1.register("$line",bi),H1.register("$polyline",dE),H1.register("$polygon",Oi),H1.register("$sector",dr),H1.register("$rect",Vr),H1.register("$circle",i),H1.register("$ellipse",Gr),{version:"0.73.0-beta",render:function(t,e){if(!(t instanceof rE))throw new Error("Render dom must be canvas/svg/webgl");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,n=arguments.length;i<n;i++)r.push(arguments[i]);return Tt.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?t instanceof H1?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new rE(t,e,r);if(w0.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:w.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:w.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:w.TYPE_CP}},parse:function(t,e,r){return ZE.parse(this,t,e,r)},loadAndParse:function(t,e,r){return ZE.loadAndParse(this,t,e,r)},mode:et,Component:Zs,Node:k,Text:xs,Geom:H1,Xom:p0,Dom:up,Img:qp,Root:rE,Event:Xs,util:Tt,inject:Rt,style:xi,parser:ZE,animate:Ai,math:vi,builder:Ws,updater:sg,refresh:gi,enums:A,set debug(t){q.flag=!!t}});return Ws.ref({Xom:p0,Dom:up,Img:qp,Geom:H1,Component:Zs}),"undefined"!=typeof window?window.karas=yi:"undefined"!=typeof self&&(self.karas=yi),yi});
//# sourceMappingURL=index.min.js.map
