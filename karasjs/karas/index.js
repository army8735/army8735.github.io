!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function at(t){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,r,n,i=at(a);return e=o?(t=at(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),r=this,!(n=e)||"object"!=typeof n&&"function"!=typeof n?h(r):n}}function ot(t,e,r){return(ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=at(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function Pt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,SCALE_X:59,SCALE_Y:60,SKEW_X:61,SKEW_Y:62,ROTATE_Z:63,FILTER:64,BOX_SHADOW:65,POINTER_EVENTS:66,OVERFLOW:67,MIX_BLEND_MODE:68,FILL:69,STROKE:70,STROKE_WIDTH:71,STROKE_DASHARRAY:72,STROKE_DASHARRAY_STR:73,STROKE_LINECAP:74,STROKE_LINEJOIN:75,STROKE_MITERLIMIT:76,FILL_RULE:77,MATRIX:78,BORDER_TOP:79,BORDER_RIGHT:80,BORDER_BOTTOM:81,BORDER_LEFT:82,LETTER_SPACING:83};function u(t){return t.replace(/[A-Z]/g,function(t){return t.toLowerCase()}).replace(/_([a-z])/g,function(t,e){return e.toUpperCase()})}var f={},d={};Object.keys(s).forEach(function(t){var e=s[t];f[e]=t,d[e]=u(t)});var p={STYLE_KEY:s,STYLE_R_KEY:f,STYLE_RV_KEY:d,style2Lower:u,style2Upper:function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toUpperCase()}).replace(/[a-z]/g,function(t){return t.toUpperCase()})},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_IMG:5,UPDATE_OVERWRITE:6,UPDATE_KEYS:7,UPDATE_LIST:8,UPDATE_CONFIG:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_BLUR_VALUE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6}},v=p.STRUCT_KEY,y=v.STRUCT_NODE,m=v.STRUCT_INDEX,E=v.STRUCT_CHILD_INDEX,T=v.STRUCT_LV,O=p.NODE_KEY,M=O.NODE_IS_DESTROYED,A=O.NODE_STRUCT,S=function(){function t(){g(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return l(t,[{key:"__structure",value:function(t,e,r){var n;return this.__config[A]=(c(n={},y,this),c(n,m,t),c(n,E,r),c(n,T,e),n)}},{key:"__modifyStruct",value:function(){return[this.__config[A],1]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[M]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[M]}}]),t}(),Ct={CANVAS:0,SVG:1},R={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7},b={info:{arial:{lhr:1.14990234375,blr:.9052734375},"pingfang sc":{lhr:1.4,blr:1.06}},register:function(t,e){var r=e||{},n=r.emSquare,i=void 0===n?2048:n,a=r.ascent,o=void 0===a?1854:a,s=r.descent,h=void 0===s?434:s,l=r.lineGap,c=void 0===l?67:l;this.info[t.toLowerCase()]={lhr:(o+h+c)/i,blr:o/i}}},k={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}};var I,N,w,Lt={identity:function(){return[1,0,0,1,0,0]},multiply:function(t,e){var r=1===t[0]&&0===t[1]&&0===t[2]&&1===t[3],n=1===e[0]&&0===e[1]&&0===e[2]&&1===e[3],i=0===t[4]&&0===t[5],a=0===e[4]&&0===e[5];if(r&&i)return e.slice(0);if(n&&a)return t.slice(0);if(r&&n)return(t=t.slice(0))[4]+=e[4],t[5]+=e[5],t;if(r||n){var o=r?e.slice(0):t.slice(0);return o[4]=t[0]*e[4]+t[2]*e[5]+t[4],o[5]=t[1]*e[4]+t[3]*e[5]+t[5],o}var s=[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],0,0];return i&&a||(a?(s[4]=t[4],s[5]=t[5]):(s[4]=t[0]*e[4]+t[2]*e[5]+t[4],s[5]=t[1]*e[4]+t[3]*e[5]+t[5])),s},calPoint:function(t,e){var r=Pt(t,2),n=r[0],i=r[1],a=Pt(e,6),o=a[0],s=a[1],h=a[2],l=a[3];return[o*n+h*i+a[4],s*n+l*i+a[5]]},int2convolution:function(t){var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(e*=3)%2==0&&e++,e},inverse:function(t){var e=Pt(t,6),r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5];if(1===r&&0===n&&0===i&&1===a&&0===o&&0===s)return t;var h,l,c=1,u=0,_=0,f=1,d=0,p=0;if(0===r)if(1===n)var v=[n,r,a,i,s,o,u,c,f,_,p,d],r=v[0],n=v[1],i=v[2],a=v[3],o=v[4],s=v[5],c=v[6],u=v[7],_=v[8],f=v[9],d=v[10],p=v[11];else{if(0===n)return[0,0,0,0,0,0];r=1,i+=i/n,o+=o/n,c+=c/n,_+=_/n,d+=d/n,n=0}return 0!==n&&(h=n/r,n=0,a-=i*h,s-=o*h,u-=c*h,f-=_*h,p-=d*h),1!==r&&(i/=r,o/=r,c/=r,_/=r,d/=r,r=1),0!==i&&(l=i/a,i=0,o-=s*l,c-=u*l,_-=f*l,d-=p*l),0===a?(s+=(a=1)-o,u+=1-c,f+=1-_,p+=1-d):1!==a&&(s/=a,u/=a,f/=a,p/=a,a=1),0!==o&&(d-=o,o=0),0!==s&&(p-=s,s=0),[c,u,_,f,d,p]},isE:function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}},D=p.STYLE_KEY,P=p.STYLE_KEY.TRANSFORM,C={}.toString;function L(e){return function(t){return C.call(t)==="[object "+e+"]"}}var F=L("Object"),B=L("String"),H=L("Function"),G=L("Number"),Y=L("Boolean"),W=L("Date");function U(t){return null==t}function X(t){return U(t)?"":t.toString()}function K(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=K(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var n="<g>";t.bb.forEach(function(t){n+=K(t)}),n+="</g><g",t.conClip&&(n+=' clip-path="'+t.conClip+'"'),n+=">",(t.children||[]).forEach(function(t){t.isMask||(n+=K(t))}),n+="</g>";var i=t.opacity,a=t.transform,o=t.visibility,s=t.mask,h=t.overflow,l=t.filter,c=t.mixBlendMode;return"<g"+(1!==i&&void 0!==i?' opacity="'+i+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l?' filter="'+l+'"':"")+(c?' style="mix-blend-mode:'+c+'"':"")+">"+n+"</g>"}}function z(t){var n="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(n+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){n+=" "+t[0]+'="'+t[1]+'"'}),n+=">",(t.children||[]).forEach(function(t){var e,r;n+=(r="<"+(e=t).tagName,(e.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+="></"+e.tagName+">")}),n+="</"+t.tagName+">"}function V(t,e){for(var r=t.length?t[0]:"",n=1,i=t.length;n<i;n++)r+=e+t[n];return r}var j=(c(I={},D.POSITION,!0),c(I,D.DISPLAY,!0),c(I,D.BACKGROUND_REPEAT,!0),c(I,D.FLEX_DIRECTION,!0),c(I,D.JUSTIFY_CONTENT,!0),c(I,D.ALIGN_ITEMS,!0),c(I,D.ALIGN_SELF,!0),c(I,D.OVERFLOW,!0),c(I,D.MIX_BLEND_MODE,!0),c(I,D.STROKE_LINECAP,!0),c(I,D.STROKE_LINEJOIN,!0),c(I,D.STROKE_MITERLIMIT,!0),c(I,D.FILL_RULE,!0),I),$=(c(N={},D.BACKGROUND_SIZE,!0),c(N,D.BACKGROUND_COLOR,!0),c(N,D.BORDER_TOP_COLOR,!0),c(N,D.BORDER_RIGHT_COLOR,!0),c(N,D.BORDER_BOTTOM_COLOR,!0),c(N,D.BORDER_LEFT_COLOR,!0),N),q=(c(w={},D.BORDER_TOP_LEFT_RADIUS,!0),c(w,D.BORDER_TOP_RIGHT_RADIUS,!0),c(w,D.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(w,D.BORDER_BOTTOM_LEFT_RADIUS,!0),c(w,D.TRANSFORM_ORIGIN,!0),w);var Ft={isObject:F,isString:B,isFunction:H,isNumber:G,isBoolean:Y,isDate:W,isNil:U,isPrimitive:function(t){return Ft.isNil(t)||Ft.isBoolean(t)||Ft.isString(t)||Ft.isNumber(t)},isAuto:function(t){return U(t)||"auto"===t},stringify:X,joinSourceArray:function t(e){for(var r="",n=0,i=e.length;n<i;n++){var a=e[n];Array.isArray(a)?r+=t(a):r+=X(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=z(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=K(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=K(t))}),e+="</g>"},joinVd:K,joinDef:z,rgba2int:function(t){if(Array.isArray(t))return t;var e,r=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(r.push(parseInt(t.charAt(0)+t.charAt(0),16)),r.push(parseInt(t.charAt(1)+t.charAt(1),16)),r.push(parseInt(t.charAt(2)+t.charAt(2),16)),r[3]=1):6===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4),16)),r[3]=1):8===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4,6),16)),r.push(parseInt(t.slice(6),16)/255)):(r[0]=r[1]=r[2]=0,r[3]=1):(e=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(r=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],U(e[4])?r[3]=1:r[3]=parseFloat(e[4])):r=[0,0,0,0]:r=[0,0,0,0],r},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+V(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+V(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+V(t,",")+")";if(3===t.length)return"rgba("+V(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i))e[i[0]]=i[1];else for(var a=Object.keys(i),o=a.length-1;0<=o;o--){var s=a[o];e[s]=i[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),n=0,i=r.length;n<i;n++){var a=r[n];e.push([a,t[a]])}return e},clone:function e(r){if(U(r)||"object"!==o(r))return r;if(r.$$type===k.TYPE_VD||r.$$type===k.TYPE_GM||r.$$type===k.TYPE_CP)return r;if(Ft.isDate(r))return new Date(r);var n=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){n[t]=e(r[t])}),n},cloneStyle:function(a,t){t=t||Object.keys(a);var o={};return t.forEach(function(t){var e=a[t];if(t===D.BACKGROUND_IMAGE)e.k?o[t]=Ft.clone(e):o[t]=e;else if(j.hasOwnProperty(t))o[t]=e;else{var r=o[t]=e.slice(0);if($.hasOwnProperty(t))r[0]=r[0].slice(0);else if(q.hasOwnProperty(t))r[0]=r[0].slice(0),r[1]=r[1].slice(0);else if(t===P)for(var n=0,i=r.length;n<i;n++)r[n]=r[n].slice(0)}}),o},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++){var a=e[n],o=r[n],s=Array.isArray(a),h=Array.isArray(o);if(s&&h){if(!t(a,o))return!1}else{if(s||h)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(F(e)&&F(r)){for(var n={},i=0,a=Object.keys(e),o=a.length;i<o;i++){var s=a[i];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;n[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!n.hasOwnProperty(u))return!1}}else{if(W(e)&&W(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==o(e))return t;for(var n=0,i=(r=r||Object.keys(e)).length;n<i;){var a=r[n];t[a]=e[a],n++}return t},joinArr:V,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()})},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!Lt.isE(e)){var i=Pt(t,4),a=i[0],o=i[1],s=i[2],h=i[3];r&&(a-=r,s+=r),n&&(o-=n,h+=n);for(var l=[s,o,a,h,s,h],c=Pt(Lt.calPoint([a,o],e),2),u=a=c[0],_=o=c[1],f=a,d=o,p=0;p<6;p+=2)var v=l[p],y=l[p+1],g=Pt(Lt.calPoint([v,y],e),2),v=g[0],y=g[1],u=Math.min(u,v),f=Math.max(u,v),_=Math.min(_,y),d=Math.max(d,y);t=[u,_,f,d]}else(r||n)&&(t[0]-=r,t[1]-=n,t[2]+=r,t[3]+=n);return t}},Z={position:/((-?[\d.]+(px|%)?)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var J={dotProduct:function(t,e,r,n){return t*r+e*n},crossProduct:function(t,e,r,n){return t*n-r*e}},Q=4*(Math.sqrt(2)-1)/3,tt=J.crossProduct,et=p.STYLE_KEY,rt=et.WIDTH,nt=et.HEIGHT,it=et.TRANSFORM_ORIGIN;function st(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function ht(t,e,r,n){return Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2))}function lt(t,e){var r=Pt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Pt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return!(c<=n||u<=i||a<=h||o<=l)}function ct(t,e,r){var n=r.matrix,i=void 0===n?[1,0,0,1,0,0]:n,a=r.computedStyle,o=void 0===a?{}:a,s=o[rt],h=o[nt],l=o[it],c=Pt(l=void 0===l?[.5*s,.5*h]:l,2),u=c[0],_=c[1],f=Pt(Lt.calPoint([t*s-u,e*h-_],i),2);return[(t=f[0])+u,(e=f[1])+_]}function ut(t){return t*Math.PI/180}function _t(t){var r=t.length,e=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(e,1/r)}function ft(t,e,r){var n=t,i=(2*e+r)/3,a=(e+2*r)/3;return(n(e)+3*n(i)+3*n(a)+n(r))*(r-e)/8}function dt(e,r){return function t(e,r,n,i){var a=3<arguments.length&&void 0!==i?i:.001,o=e,s=(r+n)/2,h=ft(o,r,n),l=ft(o,r,s),c=ft(o,s,n),u=l+c-h;return Math.abs(u)<=15*a?l+c+u/15:t(o,r,s,a/2)+t(o,s,n,a/2)}(function(t){return _t(pt(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function pt(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:1;return 2===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Pt(e,3),a=i[0],o=i[1],s=i[2],h=Pt(a,2),l=h[0],c=h[1],u=Pt(o,2),_=u[0],f=u[1],d=Pt(s,2),p=d[0],v=d[1],y=0,g=0,g=0===n?(y=Math.pow(1-t,2)*l+2*t*(1-t)*_+Math.pow(t,2)*p,Math.pow(1-t,2)*c+2*t*(1-t)*f+Math.pow(t,2)*v):1===n?(y=2*(1-t)*(_-l)+2*t*(p-_),2*(1-t)*(f-c)+2*t*(v-f)):2===n?(y=2*(p-2*_+l),2*(v-2*f+c)):y=0;return[y,g]}(t,e,i):3===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=Pt(e,4),a=i[0],o=i[1],s=i[2],h=i[3],l=Pt(a,2),c=l[0],u=l[1],_=Pt(o,2),f=_[0],d=_[1],p=Pt(s,2),v=p[0],y=p[1],g=Pt(h,2),m=g[0],E=g[1],T=0,O=0,O=0===n?(T=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*f+3*(1-t)*Math.pow(t,2)*v+Math.pow(t,3)*m,Math.pow(1-t,3)*u+3*t*Math.pow(1-t,2)*d+3*(1-t)*Math.pow(t,2)*y+Math.pow(t,3)*E):1===n?(T=3*((1-t)*(1-t)*(f-c)+2*(1-t)*t*(v-f)+t*t*(m-v)),3*((1-t)*(1-t)*(d-u)+2*(1-t)*t*(y-d)+t*t*(E-y))):2===n?(T=6*(v-2*f+c)*(1-t)+6*(m-2*v+f)*t,6*(y-2*d+u)*(1-t)+6*(E-2*y+d)*t):3===n?(T=6*(m-3*v+3*f-c),6*(E-3*y+3*d-u)):T=0;return[T,O]}(t,e,i):void 0}function vt(e,r,t){for(var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,o=function(t){return _t(pt(t,e,r))},s=t*n,h=n,l=h,c=0;c<i;c++){var u=ft(o,0,h)-s;if(Math.abs(u)<a)break;var _=_t(pt(h,e,r,1));if(h-=u*_/(u*_t(pt(h,e,r,2))+_*_),Math.abs(h-l)<a)break;l=h}return pt(h,e,r,0)}function yt(t,e){var r=Pt(t,4),n=Pt(r[0],2),i=n[0],a=n[1],o=Pt(r[1],2),s=o[0],h=o[1],l=Pt(r[2],2),c=l[0],u=l[1],_=r[3],f=(s-i)*e+i,d=(h-a)*e+a,p=(c-s)*e+s,v=(u-h)*e+h,y=(p-f)*e+f,g=(v-d)*e+d;if(4===t.length){var m=Pt(_,2);return[[i,a],[f,d],[y,g],[(((m[0]-c)*e+c-p)*e+p-y)*e+y,(((m[1]-u)*e+u-v)*e+v-g)*e+g]]}if(3===t.length)return[[i,a],[f,d],[y,g]]}var Bt={pointInPolygon:function(t,e,r){for(var n=Pt(r[0],2),i=n[0],a=n[1],o=Pt(r[0],2),s=o[0],h=o[1],l=r.length,c=1;c<l;c++)var u=Pt(r[c],2),_=u[0],f=u[1],i=Math.max(i,_),a=Math.max(a,f),s=Math.min(s,_),h=Math.min(h,f);if(t<s||e<h||i<t||a<e)return!1;for(var d=0,p=r.length;d<p;d++){var v=Pt(r[d],2),y=v[0],g=v[1],m=Pt(r[(d+1)%p],2),E=m[0],T=m[1];if(tt(E-y,T-g,t-y,e-g)<0)return!1}return!0},d2r:ut,r2d:function(t){return 180*t/Math.PI},H:Q,h:st,angleBySide:function(t,e,r){var n=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(n)},sideByAngle:function(t,e,r){var n=Math.cos(t);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*n)},pointsDistance:ht,triangleIncentre:function(t,e,r,n,i,a){var o=ht(r,n,i,a),s=ht(t,e,i,a),h=ht(t,e,r,n);return[(o*t+s*r+h*i)/(o+s+h),(o*e+s*n+h*a)/(o+s+h)]},ellipsePoints:function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,i=r*Q,a=n===r?i:n*Q;return[[t-r,e],[t-r,e-a,t-i,e-n,t,e-n],[t+i,e-n,t+r,e-a,t+r,e],[t+r,e+a,t+i,e+n,t,e+n],[t-i,e+n,t-r,e+a,t-r,e]]},sectorPoints:function t(e,r,n,i,a){var o;a<i&&(i=(o=[a,i])[0],a=o[1]);var s=[],h=Math.floor(i/90),l=Math.floor(a/90);if(h===l||l-h==1&&a%90==0){var c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k,I=st(ut(Math.abs(i-a)))*n,N=Math.sqrt(Math.pow(n,2)+Math.pow(I,2)),w=Math.atan(I/n);h<90?(c=[e+Math.sin(ut(i))*n,r-Math.cos(ut(i))*n],f=w+ut(i),u=[e+Math.sin(f)*N,r-Math.cos(f)*N],_=[e+Math.sin(ut(a))*n,r-Math.cos(ut(a))*n],f=ut(a)-w,d=[e+Math.sin(f)*N,r-Math.cos(f)*N],s.push(c),s.push(u.concat(d).concat(_))):h<180?(p=[e+Math.cos(ut(i-90))*n,r+Math.sin(ut(i-90))*n],g=w+ut(i-90),v=[e+Math.cos(g)*N,r+Math.sin(g)*N],y=[e+Math.cos(ut(a-90))*n,r+Math.sin(ut(a-90))*n],g=ut(a-90)-w,m=[e+Math.cos(g)*N,r+Math.sin(g)*N],s.push(p),s.push(v.concat(m).concat(y))):h<270?(E=[e-Math.sin(ut(i-180))*n,r+Math.cos(ut(i-180))*n],M=w+ut(i-180),T=[e-Math.sin(M)*N,r+Math.cos(M)*N],O=[e-Math.sin(ut(a-180))*n,r+Math.cos(ut(a-180))*n],M=ut(a-180)-w,A=[e-Math.sin(M)*N,r+Math.cos(M)*N],s.push(E),s.push(T.concat(A).concat(O))):(x=[e-Math.cos(ut(i-270))*n,r+Math.sin(ut(i-270))*n],b=w+ut(i-270),R=[e-Math.cos(b)*N,r+Math.sin(b)*N],S=[e-Math.cos(ut(a-270))*n,r+Math.sin(ut(a-270))*n],b=ut(a-270)-w,k=[e-Math.cos(b)*N,r+Math.sin(b)*N],s.push(x),s.push(R.concat(k).concat(S)))}else{for(var D,P,C,L,F=h,B=[];F<=l;F++)0===F?(D=t(e,r,n,i,90),B.push(D)):1===F?(h===F||90<a)&&(P=t(e,r,n,i<90?90:i,180<a?180:a),B.push(P)):2===F?(h===F||180<a)&&(C=t(e,r,n,i<180?180:i,270<a?270:a),B.push(C)):3===F&&(h===F||270<a)&&(L=t(e,r,n,i<270?270:i,a),B.push(L));s=B[0];for(var H=1,G=B.length;H<G;H++)s.push(B[H][1])}return s},getRectsIntersection:function(t,e){if(!lt(t,e))return null;var r=Pt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Pt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return[Math.max(n,h),Math.max(i,l),Math.min(a,c),Math.min(o,u)]},isRectsOverlap:lt,isRectsInside:function(t,e){var r=Pt(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=Pt(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return n<=h&&i<=l&&c<=a&&u<=o},calCoordsInNode:ct,calPercentInNode:function(t,e,r){var n,i=r.computedStyle,a=i[rt],o=i[nt],s=Pt(i[it],2),h=s[0],l=s[1],c=Math.atan((o-l)/(a-h)),u=Pt(ct(1,1,r),2),_=u[0],f=u[1],d=h<=_&&l<=f?(n=h===_?-Math.atan(1/0):Math.atan((f-l)/(_-h)))-c:h<=_&&f<l?(n=h===_?-Math.atan(1/0):Math.atan((l-f)/(_-h)))+c:_<h&&l<=f?(n=Math.atan((f-l)/(h-_)))-c:_<h&&f<l?(n=Math.atan((f-l)/(_-h)))<=c?n+Math.PI-c:-(d=Math.PI-n+c):0,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-l,2)),v=h<=t&&l<=e?h===t?-Math.atan(1/0):Math.atan((e-l)/(t-h)):h<=t&&e<l?h===t?-Math.atan(1/0):-Math.atan((e-l)/(h-t)):t<h&&l<=e?Math.PI-Math.atan((e-l)/(h-t)):Math.atan((e-l)/(t-h))-Math.PI;return(v-=d)>Math.PI?(v-=Math.PI,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>.5*Math.PI?(v=Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o]):0<=v?[(h+p*Math.cos(v))/a,(l+p*Math.sin(v))/o]:v>=.5*-Math.PI?(v=-v,[(h+p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>=-Math.PI?(v=Math.PI+v,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):(v=-Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o])},bboxBezier:function(t,e,r,n,i,a,o,s){return 4===arguments.length?[t,e,r,n]:6===arguments.length?(h=t,l=e,c=r,u=n,_=i,f=a,E=Math.min(h,_),T=Math.min(l,f),O=Math.max(h,_),M=Math.max(l,f),(c<E||u<T||O<c||M<u)&&(g=(v=1-(d=(h-c)/(h-2*c+_)))*v*h+2*v*d*c+d*d*_,m=(y=1-(p=(l-u)/(l-x*u+f)))*y*l+2*y*p*u+p*p*f,E=Math.min(E,g),T=Math.min(T,m),O=Math.min(O,g),M=Math.min(M,m)),[E,T,O,M]):8===arguments.length?(A=t,R=e,S=r,b=n,k=i,I=a,N=o,w=s,$=Math.min(A,N),q=Math.min(R,w),Z=Math.max(A,N),J=Math.max(R,w),(S<$||b<q||Z<S||J<b||k<$||I<q||Z<k||J<I)&&(B=(P=R-2*b+I)*P-(L=3*b-R-3*I+w)*(-R+b),0<(F=(D=A-2*S+k)*D-(C=3*S-A-3*k+N)*(-A+S))&&(0<(H=(-D-(F=Math.sqrt(F)))/C)&&H<1&&(Y=(G=1-H)*G*G*A+3*G*G*H*S+3*G*H*H*k+H*H*H*N,$=Math.min($,Y),Z=Math.max(Z,Y)),0<(H=(-D+F)/C)&&H<1&&(U=(W=1-H)*W*W*A+3*W*W*H*S+3*W*H*H*k+H*H*H*N,$=Math.min($,U),Z=Math.max(Z,U))),0<B&&(0<(X=(-P-(B=Math.sqrt(B)))/L)&&X<1&&(z=(K=1-X)*K*K*R+3*K*K*X*b+3*K*X*X*I+X*X*X*w,q=Math.min(q,z),J=Math.max(J,z)),0<(X=(-P+B)/L)&&X<1&&(j=(V=1-X)*V*V*R+3*V*V*X*b+3*V*X*X*I+X*X*X*w,q=Math.min(q,j),J=Math.max(J,j)))),[$,q,Z,J]):void 0;var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R,S,b,k,I,N,w,D,P,C,L,F,B,H,G,Y,W,U,X,K,z,V,j,$,q,Z,J},bezierLength:dt,pointAtBezier:function(t,e,r,n,i){return vt(t,e,dt(t,e,0,1),r,n,i)},pointAtBezierWithLength:vt,sliceBezier:yt,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=yt(t,r)),0<e&&(r<1&&(e/=r),t=yt(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,n){return 270<=n?(n=ut(n-=270),[t-Math.cos(n)*r,e-Math.sin(n)*r]):180<=n?(n=ut(n-=180),[t-Math.sin(n)*r,e+Math.cos(n)*r]):90<=n?(n=ut(n-=90),[t+Math.cos(n)*r,e+Math.sin(n)*r]):(n=ut(n),[t+Math.sin(n)*r,e-Math.cos(n)*r])}},gt=Ft.rgba2int,mt=Ft.isNil,Et=R.PX,Tt=R.PERCENT,Ot=Bt.d2r;function Mt(t){if(/%$/.test(t)||/px$/.test(t)||/^-?[\d.]+$/.test(t))return[parseFloat(t),/%/.test(t)?Tt:Et];var e=[{top:0,left:0,center:50,right:100,bottom:100}[t],Tt];return mt(e[0])&&(e[0]=50),e}function At(t,e){for(var r,n=[],i=0,a=t.length;i<a;i++){var o,s=t[i];1<s.length?(o=s[1])[1]===Tt?n.push([s[0],.01*o[0]]):n.push([s[0],o[0]/e]):n.push([s[0]])}1===n.length&&n.push(Ft.clone(n[0])),1===n[0].length&&n[0].push(0),1<n.length&&(1===n[r=n.length-1].length&&n[r].push(1));for(var h=n[0][1],l=1,c=n.length;l<c-1;l++){var u=n[l];if(1<u.length)h=u[1];else{for(var _=l+1,f=n[n.length-1][1];_<c-1;_++){var d=n[_];if(1<d.length){f=d[1];break}}for(var p=(f-h)/(_-l+1),v=l;v<_;v++){n[v].push(h+p*(v+1-l))}l=_}}for(var y=1,g=n.length;y<g;y++){var m=n[y],E=n[y-1];m[1]<E[1]&&(m[1]=E[1])}for(var T=0,O=n.length;T<O;T++){var M=n[T];if(1<M[1]){n.splice(T);var A,x,R,S,b,k=n[T-1];k&&k[1]<1&&(A=M[0][0]-k[0][0],x=M[0][1]-k[0][1],R=M[0][2]-k[0][2],S=M[0][3]-k[0][3],b=(1-k[1])/(M[1]-k[1]),n.push([[M[0][0]+A*b,M[0][1]+x*b,M[0][2]+R*b,M[0][3]+S*b],1]));break}}for(var I=n.length-1;0<=I;I--){var N=n[I];if(N[1]<0){n.splice(0,I+1);var w,D,P,C,L,F=n[I];F&&0<F[1]&&(w=F[0][0]-N[0][0],D=F[0][1]-N[0][1],P=F[0][2]-N[0][2],C=F[0][3]-N[0][3],L=-N[1]/(F[1]-N[1]),n.unshift([[N[0][0]+w*L,N[0][1]+D*L,N[0][2]+P*L,N[0][3]+C*L],0]));break}}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n}var xt={parseGradient:function(t){var e,r,n,i=Z.gradient.exec(t);if(i){var a,o,s,h,l,c,u,_,f,d,p,v={k:i[1]};"linear"===v.k?(a=/(-?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(i[2]))?v.d=(e=a[0].toLowerCase(),n=180,"to top"===e?n=0:"to top right"===e?n=45:"to right"===e?n=90:"to bottom right"===e?n=135:"to bottom"===e||("to bottom left"===e?n=225:"to left"===e?n=270:"to top left"===e?n=315:(r=/(-?[\d.]+)deg/.exec(e))&&(n=parseFloat(r[1]))),n%360):(o=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)/.exec(i[2]),v.d=o?[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])]:180):"radial"===v.k?(v.s=-1<i[2].indexOf("circle")?"circle":"ellipse",(s=/(closest|farthest)-(side|corner)/i.exec(i[2]))?v.z=s[0].toLowerCase():(h=/(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)\s+(-?[\d.]+)(?:\s+([\d.]+))?/.exec(i[2]))?(v.z=[parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]),parseFloat(h[4])],mt(h[5])?v.z.push(1):v.z.push(parseFloat(h[5]))):v.z="farthest-corner",(l=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(c=Mt(l[1]),u=l[2]?Mt(l[2]):c,v.p=[c,u]):v.p=[[50,Tt],[50,Tt]]):"conic"===v.k&&(_=/(-?[\d.]+deg)/i.exec(i[2]),v.d=_?parseFloat(_[0])%360:0,(f=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(d=Mt(f[1]),p=f[2]?Mt(f[2]):d,v.p=[d,p]):v.p=[[50,Tt],[50,Tt]]);var y=i[2].match(/(-?[\d.]+(px|%))?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*(-?[\d.]+(px|%))?/gi);return v.v=y.map(function(t){var e=/((?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\)))/i.exec(t),r=[gt(e[1])],n=/-?[\d.]+(?:px|%)/.exec(t);return n&&(r[1]=[parseFloat(n[0])],/%$/.test(n[0])?r[1][1]=Tt:r[1][1]=Et),r}),v}},getLinear:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m;if(Array.isArray(e)){w=r+e[0]*o,D=n+e[1]*s,P=r+e[2]*o,C=n+e[3]*s;var E=At(t,Math.sqrt(Math.pow(P-w,2)+Math.pow(C-D,2)))}else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var T=Math.max(o,s),O=(l=T,c=i,u=a,v=270<=(h=e)?(_=Ot(360-h),f=c+Math.sin(_)*l,d=u+Math.cos(_)*l,p=c-Math.sin(_)*l,u-Math.cos(_)*l):180<=h?(y=Ot(h-180),f=c+Math.sin(y)*l,d=u-Math.cos(y)*l,p=c-Math.sin(y)*l,u+Math.cos(y)*l):90<=h?(g=Ot(180-h),f=c-Math.sin(g)*l,d=u-Math.cos(g)*l,p=c+Math.sin(g)*l,u+Math.cos(g)*l):(m=Ot(h),f=c-Math.sin(m)*l,d=u+Math.cos(m)*l,p=c+Math.sin(m)*l,u-Math.cos(m)*l),[f,d,p,v]);T*=2;var M=J.dotProduct(r-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/T,A=J.dotProduct(r+o-O[0],n-O[1],O[2]-O[0],O[3]-O[1])/T,x=J.dotProduct(r+o-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/T,R=J.dotProduct(r-O[0],n+s-O[1],O[2]-O[0],O[3]-O[1])/T,S=M,b=M,S=Math.min(S,Math.min(A,Math.min(x,R))),b=Math.max(b,Math.max(A,Math.max(x,R))),k=S/T,I=O[2]-O[0],N=O[3]-O[1],w=O[0]+I*k,D=O[1]+N*k,P=O[2]-I*k,C=O[3]-N*k;E=At(t,b-S)}return{x1:w,y1:D,x2:P,y2:C,stop:E}},getRadial:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k,I=Pt((h=e,l=r,c=n,u=o-i,_=s-a,f=i,d=a,p=o,v=s,A=0,Array.isArray(l)?(y=f+l[0]*u,g=d+l[1]*_,l[4]<=0?M=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(O=(T=Math.sqrt(Math.pow((l[2]-l[0])*u,2)+Math.pow((l[3]-l[1])*_,2)))*l[4],M=Math.max(T,O),A=l[2]>=l[0]?l[3]>=l[1]?Math.asin((l[3]-l[1])*_/T):-Math.asin((l[1]-l[3])*_/T):l[3]>=l[1]?Ot(180)-Math.asin((l[3]-l[1])*_/T):Math.asin((l[1]-l[3])*_/T)-Ot(180))):(y=c[0][1]===Et?f+c[0][0]:f+c[0][0]*u*.01,g=c[1][1]===Et?d+c[1][0]:d+c[1][0]*_*.01,m=1,"closest-corner"===l&&"circle"===h?M=y<=f||p<=y||g<=d||v<=g?Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(T=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,Math.sqrt(Math.pow(T,2)+Math.pow(O,2))):"closest-side"===l||"closest-corner"===l?y<=f||p<=y||g<=d||v<=g?M=Math.min(Math.abs(y-f),Math.min(Math.abs(g-d),Math.min(Math.abs(g-v),Math.min(Math.abs(y-v))))):(E=1,T=y<f+.5*u?y-f:p-y,O=g<d+.5*_?g-d:v-g,M=Math.min(T,O),"closest-corner"===l&&(E=Math.sqrt(2)),T*=E,O*=E,M*=E):(T=y<=f?f-y+u:p<=y?y-p+u:y<f+.5*u?p-y:y-f,O=g<=d?d-g+_:v<=g?g-v+_:g<d+.5*_?v-g:g-d,M=Math.max(T,O),"farthest-side"!==l&&(m=Math.sqrt(2)),T*=m,O*=m,M*=m)),"circle"===h&&(T=O=M),[y,g,M,T,O,A]),6),N=I[0],w=I[1],D=I[2],P=I[3],C=I[4],L=I[5],F=1,B=1;return P===C&&!L||(S=[1,0,0,1,0,0],L&&(x=Math.sin(L),S=[R=Math.cos(L),x,-x,R,0,0]),P!==D&&(b=[F=P/D,0,0,1,0,0],S=Lt.multiply(S,b)),C!==D&&(k=[1,0,0,B=C/D,0,0],S=Lt.multiply(S,k))),{cx:N,cy:w,r:D,stop:At(t,D),scx:F,scy:B,matrix:S,d:L}},getConic:function(t,e,r,n,i,a,o){var s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1,h=Pt(function(t,e,r,n,i,a){var o,s,h,l,c,u=i-r,_=a-n;o=e[0][1]===Et?r+e[0][0]:r+e[0][0]*u*.01;s=e[1][1]===Et?n+e[1][0]:n+e[1][0]*_*.01;l=r+.5*u<=o?o-r:i-o;c=n+.5*_<=s?s-n:a-s;return h=Math.sqrt(Math.pow(l,2)+Math.pow(c,2)),[o,s,h,t]}(e,r,n,i,a,o),4),l=h[0],c=h[1],u=h[2];return u<<=1,{cx:l,cy:c,r:u*=s,deg:h[3],stop:At(t,1)}}},Rt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",alignSelf:"auto",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,scaleX:1,scaleY:1,skewX:0,skewY:0,rotateZ:0,filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal"},St={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},bt=[],kt=[];Object.keys(Rt).forEach(function(t){kt.push(t);var e=Rt[t];bt.push({k:t,v:e})});var It=[],Nt=[];Object.keys(St).forEach(function(t){Nt.push(t);var e=St[t];It.push({k:t,v:e})});var wt={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto"},Dt=[];Object.keys(wt).forEach(function(t){Dt.push(t)});var Ht={DOM:Rt,GEOM:St,isValid:function(t){return Rt.hasOwnProperty(t)||St.hasOwnProperty(t)},DOM_KEY_SET:kt,GEOM_KEY_SET:Nt,DOM_ENTRY_SET:bt,GEOM_ENTRY_SET:It,INHERIT:wt,INHERIT_KEY_SET:Dt},Gt=Ft.isNil;function Yt(t,e,r,n){Gt(t.flexGrow)&&(t.flexGrow=e||0),Gt(t.flexShrink)&&(t.flexShrink=r||0),Gt(t.flexBasis)&&(t.flexBasis=n||0)}var Wt={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderWidthTop","borderWidthRight","borderWidthBottom","borderWidthLeft"],borderColor:["borderColorTop","borderColorRight","borderColorBottom","borderColorLeft"],borderStyle:["borderStyleTop","borderStyleRight","borderStyleBottom","borderStyleLeft"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],scale:["scaleX","scaleY"],rotate:["rotateZ"],skew:["skewX","skewY"],toFull:function(n,t){var e,r,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O=this,M=n[t];if("background"===t)Gt(n.backgroundImage)&&((e=Z.gradient.exec(M))?(n.backgroundImage=e[0],M=M.replace(e[0],"")):(r=Z.img.exec(M))&&(n.backgroundImage=r[0],M=M.replace(r[0],""))),!Gt(n.backgroundRepeat)||(i=/(no-)?repeat(-[xy])?/i.exec(M))&&(n.backgroundRepeat=i[0].toLowerCase()),!Gt(n.backgroundColor)||(a=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(M))&&(n.backgroundColor=a[0],M=M.replace(a[0],"")),!Gt(n.backgroundPosition)||(o=M.match(Z.position))&&(n.backgroundPosition=o.join(" "),this.toFull(n,"backgroundPosition"));else if("flex"===t){"none"===M?Yt(n,0,0,"auto"):"auto"===M?Yt(n,1,1,"auto"):/^[\d.]+$/.test(M)?Yt(n,Math.max(0,parseFloat(M)),1,0):/^[\d.]+px$/i.test(M)?Yt(n,1,1,0):/^[\d.]+%$/.test(M)?Yt(n,1,1,M):/^[\d.]+\s+[\d.]+$/.test(M)?(s=M.split(/\s+/),Yt(n,s[0],s[1],0)):/^[\d.]+\s+[\d.]+%$/.test(M)?(h=M.split(/\s+/),Yt(n,h[0],1,h[1])):Yt(n,0,1,"auto")}else if("borderRadius"===t){1===(M=M.toString().split("/")).length&&(M[1]=M[0]);for(var A=0;A<2;A++){var x=M[A].toString().split(/\s+/);0===x.length?M[A]=[0,0,0,0]:1===x.length?M[A]=[x[0],x[0],x[0],x[0]]:2===x.length?M[A]=[x[0],x[1],x[0],x[1]]:3===x.length?M[A]=[x[0],x[1],x[2],x[1]]:M[A]=x.slice(0,4)}this[t].forEach(function(t,e){Gt(n[t])&&(n[t]=M[0][e]+" "+M[1][e])})}else{"backgroundPosition"===t?(Array.isArray(M)||(M=[M]),l=this[t].map(function(t){return Gt(n[t])}),M.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),O[t].forEach(function(t,e){l[e]&&(n[t]=n[t]||[],n[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(c=M.toString().split(/\s*,\s*/)).length&&(c[1]=c[0]),this[t].forEach(function(t,e){Gt(n[t])&&(n[t]=c[e])})):"margin"===t||"padding"===t?(y=n,m=this[g=t],T=y[g],Gt(T)||(E=T.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi))&&(1===E.length?E[3]=E[2]=E[1]=E[0]:2===E.length?(E[2]=E[0],E[3]=E[1]):3===E.length&&(E[3]=E[1]),m.forEach(function(t,e){Gt(y[t])&&(y[t]=E[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(v=(u=n)[_=t],Gt(v)||(Gt(u[_+"Width"])&&(f=/\b[\d.]+px\b/i.exec(v),u[_+"Width"]=f?f[0]:0),Gt(u[_+"Style"])&&(d=/\b(solid|dashed|dotted)\b/i.exec(v),u[_+"Style"]=d?d[1]:"solid"),Gt(u[_+"Color"])&&((p=/#[0-9a-f]{3,8}/i.exec(v))&&-1<[4,7,9].indexOf(p[0].length)?u[_+"Color"]=p[0]:/\btransparent\b/i.test(v)?u[_+"Color"]="transparent":(p=/rgba?\s*\(.+\)/i.exec(v),u[_+"Color"]=p?p[0]:"transparent")))):this[t]&&this[t].forEach(function(t){Gt(n[t])&&(n[t]=M)})}}},Ut={list:[],data:{},charWidth:{}},Xt=p.STYLE_KEY,Kt=Xt.FONT_SIZE,zt=Xt.FONT_FAMILY,Vt=Xt.FONT_WEIGHT,jt={},$t={},qt=[],Zt=[];function Jt(t,e,r,n,i){var a,o;return(o=t?n[t]?n[t]:n[t]=document.createElement("canvas"):(a=n===jt?qt:Zt).length?a.pop():document.createElement("canvas")).width=e,o.height=r,"undefined"!=typeof karas&&karas.debug&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",n===jt?"canvas":"webgl"),t&&o.setAttribute("key",t),i&&o.setAttribute("message",i),document.body.appendChild(o)),{canvas:o,ctx:n===jt?o.getContext("2d"):o.getContext("webgl")||o.getContext("experimental-webgl"),draw:function(){},available:!0,release:function(){n===jt?qt.push(this.canvas):Zt.push(this.canvas),this.canvas=null,this.ctx=null}}}var Qt,te,ee={},re={measureText:function(){var t=Ut.list,l=Ut.data,c="",u=[],_=[];if(Object.keys(l).forEach(function(t){var e=l[t],r=e.key,n=e.style,i=e.s;if(i)for(var a="position:absolute;font-family:".concat(n[zt],";font-size:").concat(n[Kt],"px;font-weight:").concat(n[Vt]),o=0,s=i.length;o<s;o++){u.push(r);var h=i.charAt(o);_.push(h),c+='<span style="'.concat(a,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}}),c){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=c;for(var r=e.childNodes,n=Ut.charWidth,i=0,a=r.length;i<a;i++){var o=r[i],s=u[i],h=_[i],f=window.getComputedStyle(o,null);n[s][h]=parseFloat(f.width)}t.forEach(function(t){return t.__measureCb()}),Ut.list=[],Ut.data={},document.body.removeChild(e)}},IMG:ee,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){var n,i,a,o,t,s;Array.isArray(e)?(n=0,i=e.length,a=[],e.forEach(function(t,e){re.measureImg(t,function(t){a[e]=t,++n===i&&r(a)})})):2===(o=ee[e]=ee[e]||{state:0,task:[]}).state?r&&r(o):1===o.state?r&&o.task.push(r):(o.state=1,r&&o.task.push(r),(t=new Image).onload=function(){o.state=2,o.success=!0,o.width=t.width,o.height=t.height,o.source=t,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},t.onerror=function(t){re.error("Measure img failed: "+e),o.state=2,o.success=!1,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},"data:"===e.substr(0,5)||(s=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&location.hostname!==s[1]&&(t.crossOrigin="anonymous"),t.src=e,"undefined"!=typeof karas&&karas.debug&&document.body.appendChild(t))},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(te=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(re.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),re.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},ie.toString=function(){return te.toString()},ie),cancelAnimationFrame:(Qt=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(re.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),re.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},ne.toString=function(){return Qt.toString()},ne),now:function(){return"undefined"!=typeof performance?(re.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(re.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&jt.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,n){return Jt(r,t,e,jt,n)},releaseCacheCanvas:function(t){qt.push(t)},delCacheCanvas:function(t){t&&delete jt[t]},hasCacheWebgl:function(t){return t&&$t.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,n){return Jt(r,t,e,$t,n)},releaseCacheWebgl:function(t){Zt.push(t)},delCacheWebgl:function(t){t&&delete $t[t]},isDom:function(t){if(t){if(Ft.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if(Ft.isFunction(t.getElementsByTagName))return!0}return!1}};function ne(t){return Qt.apply(this,arguments)}function ie(t){return te.apply(this,arguments)}var ae=p.STYLE_KEY,oe=[[ae.BACKGROUND_COLOR],[ae.BORDER_BOTTOM_COLOR],[ae.BORDER_LEFT_COLOR],[ae.BORDER_RIGHT_COLOR],[ae.BORDER_TOP_COLOR],[ae.COLOR]],se=[[ae.FONT_SIZE],[ae.BORDER_BOTTOM_WIDTH],[ae.BORDER_LEFT_WIDTH],[ae.BORDER_RIGHT_WIDTH],[ae.BORDER_TOP_WIDTH],[ae.LEFT],[ae.TOP],[ae.RIGHT],[ae.BOTTOM],[ae.FLEX_BASIS],[ae.WIDTH],[ae.HEIGHT],[ae.LINE_HEIGHT],[ae.MARGIN_BOTTOM],[ae.MARGIN_LEFT],[ae.MARGIN_TOP],[ae.MARGIN_RIGHT],[ae.PADDING_TOP],[ae.PADDING_RIGHT],[ae.PADDING_BOTTOM],[ae.PADDING_LEFT],[ae.STROKE_WIDTH],[ae.STROKE_MITERLIMIT],[ae.LETTER_SPACING]],he=[[ae.BACKGROUND_IMAGE],[ae.FILL],[ae.STROKE]],le=[[ae.BORDER_TOP_LEFT_RADIUS],[ae.BORDER_TOP_RIGHT_RADIUS],[ae.BORDER_BOTTOM_RIGHT_RADIUS],[ae.BORDER_BOTTOM_LEFT_RADIUS]],ce={};oe.forEach(function(t){ce[t]=!0});var ue={};se.forEach(function(t){ue[t]=!0});var _e={};le.forEach(function(t){_e[t]=!0});var fe={};he.forEach(function(t){fe[t]=!0});var de=[[ae.TRANSLATE_X],[ae.TRANSLATE_Y],[ae.SKEW_X],[ae.SKEW_Y],[ae.SCALE_X],[ae.SCALE_Y],[ae.ROTATE_Z]],pe={};de.forEach(function(t){pe[t]=!0});var ve,ye,ge={KEY_COLOR:oe,KEY_EXPAND:de,KEY_GRADIENT:he,KEY_LENGTH:se,KEY_RADIUS:le,COLOR_HASH:ce,EXPAND_HASH:pe,GRADIENT_HASH:fe,LENGTH_HASH:ue,RADIUS_HASH:_e,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},me=Ht.DOM,Ee=Ht.GEOM,Te=R.INHERIT,Oe=p.STYLE_KEY,Me={},Ae=[],xe=c({},Oe.POINTER_EVENTS,!0),Re=(c(ve={},Oe.TRANSFORM,!0),c(ve,Oe.TRANSLATE_X,!0),c(ve,Oe.TRANSLATE_Y,!0),c(ve,Oe.SKEW_X,!0),c(ve,Oe.SKEW_Y,!0),c(ve,Oe.SCALE_X,!0),c(ve,Oe.SCALE_Y,!0),c(ve,Oe.ROTATE_Z,!0),c(ve,Oe.COLOR,!0),c(ve,Oe.FONT_STYLE,!0),c(ve,Oe.STROKE_WIDTH,!0),c(ve,Oe.FILL,!0),c(ve,Oe.STROKE_DASHARRAY,!0),c(ve,Oe.STROKE_LINECAP,!0),c(ve,Oe.STROKE_LINEJOIN,!0),c(ve,Oe.STROKE_MITERLIMIT,!0),c(ve,Oe.BACKGROUND_COLOR,!0),c(ve,Oe.BACKGROUND_IMAGE,!0),c(ve,Oe.BACKGROUND_POSITION_X,!0),c(ve,Oe.BACKGROUND_POSITION_Y,!0),c(ve,Oe.BACKGROUND_REPEAT,!0),c(ve,Oe.BACKGROUND_SIZE,!0),c(ve,Oe.STROKE,!0),c(ve,Oe.BORDER_BOTTOM_COLOR,!0),c(ve,Oe.BORDER_LEFT_COLOR,!0),c(ve,Oe.BORDER_RIGHT_COLOR,!0),c(ve,Oe.BORDER_TOP_COLOR,!0),c(ve,Oe.BORDER_TOP_LEFT_RADIUS,!0),c(ve,Oe.BORDER_TOP_RIGHT_RADIUS,!0),c(ve,Oe.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(ve,Oe.BORDER_BOTTOM_LEFT_RADIUS,!0),c(ve,Oe.VISIBILITY,!0),c(ve,Oe.OPACITY,!0),c(ve,Oe.Z_INDEX,!0),c(ve,Oe.FILTER,!0),c(ve,Oe.BOX_SHADOW,!0),c(ve,Oe.OVERFLOW,!0),ve),Se=(c(ye={},Oe.FONT_SIZE,!0),c(ye,Oe.FONT_WEIGHT,!0),c(ye,Oe.FONT_FAMILY,!0),ye),be={GEOM:Me,GEOM_KEY_SET:Ae,IGNORE:xe,REPAINT:Re,MEASURE:Se,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){be.addGeom(e,t,r)}):t&&(Me.hasOwnProperty(t)||Ae.push(t),(Me[t]=Me[t]||{})[e]=r||!0)}};function ke(t,e){return Me.hasOwnProperty(e)&&Me[e].hasOwnProperty(t)}be.isIgnore=function(t){return xe.hasOwnProperty(t)},be.isGeom=ke,be.isRepaint=function(t){return Re.hasOwnProperty(t)||ke(t)},be.isMeasure=function(t){return Se.hasOwnProperty(t)},be.isValid=function(t,e){return!!e&&(!!me.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Ee.hasOwnProperty(e))||!!Me.hasOwnProperty(e)&&Me[e].hasOwnProperty(t)))};var Ie,Ne,we,De=be.MEASURE_KEY_SET=Object.keys(Se).map(function(t){return parseInt(t)}),Pe=De.length;be.isMeasureInherit=function(t){for(var e=0;e<Pe;e++){var r=De[e];if(t.hasOwnProperty(r)&&t[r][1]===Te)return!0}return!1},be.measureInheritList=function(t){for(var e=[],r=0;r<Pe;r++){var n=De[r];t.hasOwnProperty(n)&&t[n][1]===Te&&e.push(n)}return e},be.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),be.addGeom("$circle",["r"]),be.addGeom("$ellipse",["rx","ry"]),be.addGeom("$rect",["rx","ry"]),be.addGeom("$sector",["begin","end","edge","closure"]),be.addGeom("$polyline",["points","controls","start","end"]),be.addGeom("$polygon",["points","controls","start","end"]);var Ce=p.STYLE_KEY,Le=p.STYLE_RV_KEY,Fe=p.style2Upper,Be=p.STYLE_KEY,He=Be.POSITION,Ge=Be.WIDTH,Ye=Be.HEIGHT,We=Be.TRANSLATE_X,Ue=Be.TRANSLATE_Y,Xe=Be.SCALE_X,Ke=Be.SCALE_Y,ze=Be.SKEW_X,Ve=Be.SKEW_Y,je=Be.ROTATE_Z,$e=Be.TRANSFORM,qe=Be.TRANSFORM_ORIGIN,Ze=Be.BACKGROUND_IMAGE,Je=Be.BACKGROUND_COLOR,Qe=Be.BACKGROUND_POSITION_X,tr=Be.BACKGROUND_POSITION_Y,er=Be.BACKGROUND_SIZE,rr=Be.OPACITY,nr=Be.Z_INDEX,ir=Be.COLOR,ar=Be.FONT_SIZE,or=Be.FONT_FAMILY,sr=Be.FONT_WEIGHT,hr=Be.FONT_STYLE,lr=Be.LINE_HEIGHT,cr=Be.TEXT_ALIGN,ur=Be.FILTER,_r=Be.VISIBILITY,fr=Be.BOX_SHADOW,dr=Be.POINTER_EVENTS,pr=Be.FILL,vr=Be.STROKE,yr=Be.STROKE_WIDTH,gr=Be.STROKE_DASHARRAY,mr=Be.BORDER_TOP_WIDTH,Er=Be.BORDER_RIGHT_WIDTH,Tr=Be.BORDER_BOTTOM_WIDTH,Or=Be.BORDER_LEFT_WIDTH,Mr=Be.DISPLAY,Ar=Be.FLEX_DIRECTION,xr=Be.FLEX_GROW,Rr=Be.FLEX_SHRINK,Sr=Be.FLEX_BASIS,br=Be.JUSTIFY_CONTENT,kr=Be.ALIGN_SELF,Ir=Be.ALIGN_ITEMS,Nr=Be.MATRIX,wr=Be.LETTER_SPACING,Dr=R.AUTO,Pr=R.PX,Cr=R.PERCENT,Lr=R.NUMBER,Fr=R.INHERIT,Br=R.DEG,Hr=R.RGBA,Gr=R.STRING,Yr=Ft.isNil,Wr=Ft.rgba2int,Ur=Ft.equalArr,Xr=be.MEASURE_KEY_SET,Kr=be.isGeom,zr=be.GEOM,Vr=be.GEOM_KEY_SET,jr=ge.COLOR_HASH,$r=ge.LENGTH_HASH,qr=ge.RADIUS_HASH,Zr=ge.GRADIENT_HASH,Jr=ge.EXPAND_HASH,Qr=ge.GRADIENT_TYPE,tn={translateX:We,translateY:Ue,scaleX:Xe,scaleY:Ke,skewX:ze,skewY:Ve,rotateZ:je,rotate:je};function en(t,e,r){return"auto"===r?t[e]=[0,Dr]:"inherit"===r?t[e]=[0,Fr]:/%$/.test(r)?(r=parseFloat(r)||0,t[e]=[r,Cr]):/px$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Pr]):/deg$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Br]):(r=parseFloat(r)||0,t[e]=[r,Lr]),e!==Or&&e!==mr&&e!==Er&&e!==Tr&&e!==Ge&&e!==Ye&&e!==Sr||(t[e][0]=Math.max(t[e][0],0)),t}function rn(t,e){t===Xe||t===Ke?e[1]=Lr:t===We||t===Ue?e[1]===Lr&&(e[1]=Pr):e[1]===Lr&&(e[1]=Br)}function nn(t){var e=t[or];return t[ar]*(b.info[e]||b.info.arial).lhr}function an(t,e,r){for(t*=.01;e;){var n=e.currentStyle[r];if(n[1]===Dr){if(r!==Ge)break;e=e.domParent}else{if(n[1]===Pr)return t*n[0];n[1]===Cr&&(t*=.01*n[0],e=e.domParent)}}return t}var on=(c(Ie={},Ce.POSITION,!0),c(Ie,Ce.DISPLAY,!0),c(Ie,Ce.BACKGROUND_REPEAT,!0),c(Ie,Ce.FLEX_DIRECTION,!0),c(Ie,Ce.FLEX_GROW,!0),c(Ie,Ce.FLEX_SHRINK,!0),c(Ie,Ce.JUSTIFY_CONTENT,!0),c(Ie,Ce.ALIGN_ITEMS,!0),c(Ie,Ce.ALIGN_SELF,!0),c(Ie,Ce.OVERFLOW,!0),c(Ie,Ce.MIX_BLEND_MODE,!0),c(Ie,Ce.STROKE_LINECAP,!0),c(Ie,Ce.STROKE_LINEJOIN,!0),c(Ie,Ce.STROKE_MITERLIMIT,!0),c(Ie,Ce.FILL_RULE,!0),c(Ie,Ce.OPACITY,!0),c(Ie,Ce.Z_INDEX,!0),Ie),sn=(c(Ne={},Ce.COLOR,!0),c(Ne,Ce.BACKGROUND_COLOR,!0),c(Ne,Ce.BORDER_TOP_COLOR,!0),c(Ne,Ce.BORDER_RIGHT_COLOR,!0),c(Ne,Ce.BORDER_BOTTOM_COLOR,!0),c(Ne,Ce.BORDER_LEFT_COLOR,!0),Ne),hn=(c(we={},Ce.BORDER_TOP_LEFT_RADIUS,!0),c(we,Ce.BORDER_TOP_RIGHT_RADIUS,!0),c(we,Ce.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(we,Ce.BORDER_BOTTOM_LEFT_RADIUS,!0),c(we,Ce.TRANSFORM_ORIGIN,!0),we);var ln={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!Ft.isObject(a))return{};var e,_,r,n,i,o,s,h,l,c,u,f,d,p={},v=(a=Ft.extend({},a)).border;if(v&&Wt.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){Wt.toFull(a,t)}),(v=a.borderWidth)&&Wt.toFull(a,"borderWidth"),(v=a.borderColor)&&Wt.toFull(a,"borderColor"),(v=a.borderStyle)&&Wt.toFull(a,"borderStyle"),(v=a.borderRadius)&&Wt.toFull(a,"borderRadius"),(v=a.background)&&Wt.toFull(a,"background"),v=a.backgroundPosition,Yr(v)||Wt.toFull(a,"backgroundPosition"),(v=a.flex)&&Wt.toFull(a,"flex"),v=a.margin,Yr(v)||Wt.toFull(a,"margin"),v=a.padding,Yr(v)||Wt.toFull(a,"padding"),["translate","scale","skew"].forEach(function(t){v=a[t],Yr(v)||Wt.toFull(a,t)}),v=a.rotate,Yr(v)||Wt.toFull(a,"rotate"),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ"].forEach(function(t){var e=a[t];!Yr(e)&&a.transform&&re.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,r=t.v;Yr(a[e])&&(a[e]=r)}),void 0!==(v=a.backgroundImage)&&(v?Array.isArray(v)?p[Ze]=v.map(function(t){return t?Z.gradient.test(t)?xt.parseGradient(t):Z.img.test(t)?Z.img.exec(t)[2]:null:null}):Z.gradient.test(v)?p[Ze]=[xt.parseGradient(v)]:Z.img.test(v)?p[Ze]=[Z.img.exec(v)[2]]:p[Ze]=[null]:p[Ze]=[null]),(v=a.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(v))&&-1<[4,7,9].indexOf(e[0].length)?p[Je]=[Wr(e[0]),Hr]:(e=/rgba?\s*\(.+\)/i.exec(v),p[Je]=[Wr(e?e[0]:[0,0,0,0]),Hr])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){v=a[t],Yr(v)||(t=e?tr:Qe,Array.isArray(v)?v.length?p[t]=v.map(function(t){if(/%$/.test(t)||/px$/i.test(t)||/^-?[\d.]+$/.test(t)){var e=[];return en(e,0,t),e[0][1]===Lr&&(e[0][1]=Pr),e[0]}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Cr]}):p[t]=[0,Cr]:/%$/.test(v)||/px$/i.test(v)||/^-?[\d.]+$/.test(v)?(en(p,t,v),(v=p[t])[1]===Lr&&(v[1]=Pr),p[t]=[v]):p[t]=[[{top:0,left:0,center:50,right:100,bottom:100}[v]||0,Cr]])}),v=a.backgroundSize){var y=p[er]=[];if(Array.isArray(v))v.length?y=v.map(function(t){if(!t)return[[0,Dr],[0,Dr]];var e=t.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],n=0;n<2;n++){var i=e[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(en(r,n,i),r[n][1]===Lr&&(r[n][1]=Pr)):"0"===i||0===i?r.push([0,Pr]):"contain"===i||"cover"===i?r.push([i,Gr]):r.push([0,Dr])}return r}return[[0,Dr],[0,Dr]]}):y.push([[0,Dr],[0,Dr]]);else{var g=v.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(g){1===g.length&&("contain"===g[0]||"cover"===g[0]?g[1]=g[0]:g[1]="auto");for(var m=[],E=0;E<2;E++){var T=g[E];/%$/.test(T)||/px$/i.test(T)||/^-?[\d.]+$/.test(T)?(en(m,E,T),m[E][1]===Lr&&(m[E][1]=Pr)):"0"===T||0===T?m.push([0,Pr]):"contain"===T||"cover"===T?m.push([T,Gr]):m.push([0,Dr])}y.push(m)}else y.push([[0,Dr],[0,Dr]])}}if(["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];Yr(e)||(p[Ce[Fe(t)]]=[Wr(e),Hr])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!Yr(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var n=0;n<2;n++){var i=r[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(en(r,n,i),r[n][1]===Lr&&(r[n][1]=Pr)):r[n]=[0,Pr]}p[Ce[Fe(t)]]=r}}),(v=a.transform)&&(_=p[$e]=[],(r=(v||"").toString().match(/\w+\(.+?\)/g))&&r.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.indexOf("("),c=t.slice(0,l),u=t.slice(l+1,t.length-1);"matrix"===c?(6<(e=(e=u.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length&&(e=e.slice(0,6)),6===e.length&&_.push([Nr,e])):tn.hasOwnProperty(c)?(rn(r=tn[c],(n=en([r,u],1,u))[1]),_.push(n)):{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)&&(1===(i=u.toString().split(/\s*,\s*/)).length&&(i[1]=i[0].slice(0)),a=Ce[Fe(c+"X")],o=Ce[Fe(c+"Y")],s=en([a,i[0]],1,i[0]),h=en([o,i[1]],1,i[1]),rn(a,s[1]),rn(o,h[1]),_.push(s),_.push(h))})),v=a.transformOrigin,!Yr(v)){var O=p[qe]=[],M=v.toString().match(Z.position);if(M){1===M.length&&(M[1]=M[0]);for(var A=0;A<2;A++){var x=M[A];/%$/.test(x)||/px$/i.test(x)||/^-?[\d.]+$/.test(x)?(en(O,A,x),O[A][1]===Lr&&(O[A][1]=Pr)):(O.push([{top:0,left:0,center:50,right:100,bottom:100}[x],Cr]),Yr(O[A][0])&&(O[A][0]=50))}}else O.push([50,Cr]),O.push([50,Cr])}return["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e,r=a[t];Yr(r)||(e=tn[t],en(p,e,r),rn(e,p[e]))}),v=a.opacity,Yr(v)||(v=parseFloat(v),isNaN(v)?p[rr]=1:(v=Math.max(v,0),v=Math.min(v,1),p[rr]=v)),v=a.zIndex,Yr(v)||(p[nr]=parseInt(v)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height","flexBasis"].forEach(function(t){var e=a[t];Yr(e)||(t=Ce[Fe(t)],en(p,t,e),(e=p[t])[1]===Lr&&(e[1]=Pr))}),(v=a.color)&&(p[ir]="inherit"===v?[[],Fr]:[Wr(v),Hr]),!(v=a.fontSize)&&0!==v||("inherit"===v?p[ar]=[0,Fr]:/%$/.test(v)?(n=Math.max(0,parseFloat(v)),p[ar]=n?[n,Cr]:[16,Pr]):p[ar]=[Math.max(0,parseFloat(v))||16,Pr]),v=a.fontWeight,Yr(v)||(p[sr]="bold"===v?[700,Lr]:"normal"===v?[400,Lr]:"lighter"===v?[200,Lr]:"inherit"===v?[0,Fr]:[Math.max(0,parseInt(v))||400,Lr]),(v=a.fontStyle)&&(p[hr]="inherit"===v?[0,Fr]:[v,Gr]),(v=a.fontFamily)&&(p[or]="inherit"===v?[0,Fr]:[v,Gr]),(v=a.textAlign)&&(p[cr]="inherit"===v?[0,Fr]:[v,Gr]),void 0!==(v=a.lineHeight)&&("inherit"===v?p[lr]=[0,Fr]:"normal"===v?p[lr]=[0,Dr]:/px$/i.test(v)?p[lr]=[parseFloat(v),Pr]:(i=Math.max(0,parseFloat(v))||"normal",p[lr]="normal"===i?[null,Dr]:[i,Lr])),void 0!==(v=a.letterSpacing)&&("inherit"===v?p[wr]=[0,Fr]:"normal"===v?p[wr]=[0,Pr]:/px$/i.test(v)?p[wr]=[parseFloat(v),Pr]:(o=Math.max(0,parseFloat(v))||0,p[wr]=[o,Pr])),void 0!==(v=a.fill)&&(v?Array.isArray(v)?v.length?p[pr]=v.map(function(t){return t?Z.gradient.test(t)?xt.parseGradient(t):Wr(t):"none"}):p[pr]=["none"]:Z.gradient.test(v)?p[pr]=[xt.parseGradient(v)]:p[pr]=[Wr(v)]:p[pr]=["none"]),void 0!==(v=a.stroke)&&(v?Array.isArray(v)?v.length?p[vr]=v.map(function(t){return t?Z.gradient.test(t)?xt.parseGradient(t):Wr(t):"none"}):p[vr]=["none"]:Z.gradient.test(v)?p[vr]=[xt.parseGradient(v)]:p[vr]=[Wr(v)]:p[vr]=["none"]),v=a.strokeWidth,Yr(v)||(Array.isArray(v)?v.length?p[yr]=v.map(function(t){var e=[];return en(e,0,t),e[0][1]===Lr&&(e[0][1]=Pr),e[0]}):p[yr]=[0,Pr]:(en(s=p[yr]=[],0,v),s[0][1]===Lr&&(s[0][1]=Pr))),v=a.strokeDasharray,Yr(v)||(Array.isArray(v)?p[gr]=v.map(function(t){var e=t.toString().match(/[\d.]+/g);return e?((e=e.map(function(t){return parseFloat(t)})).length%2==1&&e.push(e[e.length-1]),e):[]}):(h=v.toString().match(/[\d.]+/g))?((h=h.map(function(t){return parseFloat(t)})).length%2==1&&h.push(h[h.length-1]),p[gr]=[h]):p[gr]=[[]]),void 0!==(v=a.filter)&&(l=null,!(c=/\bblur\s*\(\s*([\d.]+)\s*(?:px)?\s*\)/i.exec(v||""))||(u=parseFloat(c[1])||0)&&(l=[["blur",u]]),p[ur]=l),(v=a.visibility)&&(p[_r]="inherit"===v?[0,Fr]:[v,Gr]),(v=a.pointerEvents)&&(p[dr]="inherit"===v?[0,Fr]:[v,Gr]),void 0!==(v=a.boxShadow)&&(f=null,(d=(v||"").match(/(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?\s*)?(-?[\d.]+(px)?\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&d.forEach(function(t){var e=/(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?\s*)?(-?[\d.]+(?:px)?\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){f=f||[];for(var r=[e[1],e[2],e[3]||0,e[4]||0,e[5]||"#000",e[6]||"outset"],n=0;n<4;n++)en(r,n,r[n]),1<n&&r[n][0]<0&&(r[n]=0),r[n][1]===Lr&&(r[n]=r[n][0]);r[4]=Wr(r[4]),f.push(r)}}),p[fr]=f),["position","display","flexDirection","justifyContent","alignItems","alignSelf","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","flexGrow","flexShrink","zIndex"].forEach(function(t){a.hasOwnProperty(t)&&(p[Ce[Fe(t)]]=a[t])}),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;a.hasOwnProperty(t)&&(e=a[t],p[Ce[Fe(t)]]=Array.isArray(e)?e:[e])}),Vr.forEach(function(t){a.hasOwnProperty(t)&&(p[t]=a[t])}),p},computeMeasure:function(t,r){var n=t.currentStyle,i=t.computedStyle,e=t.parent,a=!r&&e.computedStyle;Xr.forEach(function(t){var e=n[t];e[1]===Fr?i[t]=r?Ht.INHERIT[Le[t]]:a[t]:e[1]===Cr?i[t]=r?Ht.INHERIT[Le[t]]:a[t]*e[1]*.01:i[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,n=t.computedStyle,i=t.parent,a=!i,o=i&&i.computedStyle;[mr,Er,Tr,Or].forEach(function(t){n[t]=r[t][1]===Pr?Math.max(0,r[t][0]):0}),[He,Mr,Ar,br,Ir,kr,xr,Rr].forEach(function(t){n[t]=r[t]});var s=r[cr];s[1]===Fr?n[cr]=a?"left":o[cr]:n[cr]=s[0];var h=r[lr];h[1]===Fr?n[lr]=a?nn(n):o[lr]:h[1]===Pr?n[lr]=Math.max(h[0],0)||nn(n):h[1]===Lr?n[lr]=Math.max(h[0],0)*n[ar]||nn(n):n[lr]=nn(n);var l=r[wr];l[1]===Fr?n[wr]=a?0:o[wr]:n[wr]=l[0]},setFontStyle:function(t){var e=t[ar];return(t[hr]||"normal")+" "+(t[sr]||"400")+" "+e+"px/"+e+"px "+(t[or]||"arial")},getBaseLine:function(t){var e=t[ar],r=t[or],n=e*(b.info[r]||b.info.arial).lhr;return.5*(t[lr]-n)+e*(b.info[r]||b.info.arial).blr},calRelative:function(t,e,r,n,i){return r[1]===Dr?r=0:-1<[Pr,Lr,Br,Hr,Gr].indexOf(r[1])?r=r[0]:r[1]===Cr&&(r=an(r[0],n,i?Ge:Ye)),r},calAbsolute:function(t,e,r,n){return r[1]===Dr?r=0:-1<[Pr,Lr,Br,Hr,Gr].indexOf(r[1])?r=r[0]:r[1]===Cr&&(r=r[0]*n*.01),r},equalStyle:function(t,e,r,n){if(!e||!r)return e===r;if(t===$e){if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var o=e[i],s=r[i];if(o[0]!==s[0])return!1;if(!Ur(o[1],s[1]))return!1}return!0}if(t===ur){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!Ur(e[h],r[h]))return!1}if(t===er){if(e.length!==r.length)return!1;for(var c=0,u=e.length;c<u;c++){var _=e[c],f=r[c];if(_[0][0]!==f[0][0]||_[0][1]!==f[0][1]||_[1][0]!==f[1][0]||_[1][1]!==f[1][1])return!1}return!0}if(t===qe||qr.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Qe||t===tr||$r.hasOwnProperty(t)||Jr.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===fr)return Ur(e,r);if(jr.hasOwnProperty(t))return e[1]===r[1]&&Ur(e[0],r[0]);if(Zr.hasOwnProperty(t)&&e.k===r.k&&Qr.hasOwnProperty(e.k)){var d=e.v,p=r.v;if(e.d!==r.d||d.length!==p.length)return!1;for(var v=0,y=d.length;v<y;v++){var g=d[v],m=p[v];if(g.length!==m.length)return!1;for(var E=0;E<4;E++)if(g[0][E]!==m[0][E])return!1;if(1<g.length&&(g[1][0]!==m[1][0]||g[1][1]!==m[1][1]))return!1}return!0}return Kr(n.tagName,t)&&(n.isMulti||Array.isArray(e)&&Array.isArray(r))?Ur(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[He];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){for(var r={},n=0,i=(e=e||Object.keys(t).map(function(t){return zr.hasOwnProperty(t)||(t=parseInt(t)),t})).length;n<i;n++){var a=e[n],o=t[a];if(a===Ze)r[a]=o.map(function(t){return t.k?Ft.clone(t):t});else if(a===pr||a===vr)r[a]=o.map(function(t){return t.k?Ft.clone(t):t.slice(0)});else if(a===$e){if(o){for(var s=o.slice(0),h=0,l=s.length;h<l;h++)s[h]=s[h].slice(0),s[h][1]=s[h][1].slice(0);r[a]=s}}else if(a===fr)o&&(o=o.map(function(t){var e=t.slice(0);return e[4]=e[4].slice(0),e}),r[a]=o);else if(on.hasOwnProperty(a))r[a]=o;else if(zr.hasOwnProperty(a))r[a]=Ft.clone(o);else if(o){var c=r[a]=o.slice(0);if(a===Qe||a===tr)for(var u=0,_=c.length;u<_;u++)c[u]=c[u].slice(0);else if(a===er)for(var f=0,d=c.length;f<d;f++)c[f]=c[f].slice(0),c[f][0]=c[f][0].slice(0),c[f][1]=c[f][1].slice(0);else if(sn.hasOwnProperty(a))c[0]=c[0].slice(0);else if(hn.hasOwnProperty(a))c[0]=c[0].slice(0),c[1]=c[1].slice(0);else if(a===$e)for(var p=0,v=c.length;p<v;p++)c[p]=c[p].slice(0)}}return r}},cn=p.STYLE_KEY,un=cn.COLOR,_n=cn.FONT_WEIGHT,fn=cn.FONT_FAMILY,dn=cn.FONT_SIZE,pn=cn.FONT_STYLE,vn=cn.LETTER_SPACING,yn=function(){function a(t,e,r,n,i){g(this,a),this.__parent=t,this.__x=e,this.__y=r,this.__width=n,this.__content=i,this.__virtualDom={}}return l(a,[{key:"render",value:function(t,e,r,n,i,a,o,s){var h=this.content,l=this.x,c=this.y,u=this.parent,_=u.ox,f=u.oy;c+=ln.getBaseLine(r),l+=_+i,c+=f+a;var d,p=r[vn],v=0,y=h.length;if(t===Ct.CANVAS)if(p)for(;v<y;v++)e.fillText(h.charAt(v),l,c),l+=s[o+v]+p;else e.fillText(h,l,c);else t===Ct.SVG&&(d=[["x",l],["y",c],["fill",n[un]],["font-family",r[fn]],["font-weight",r[_n]],["font-style",r[pn]],["font-size",r[dn]+"px"]],p&&d.push(["letter-spacing",p]),this.__virtualDom={type:"item",tagName:"text",props:d,content:Ft.encodeHtml(h)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return ln.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),a}(),gn=p.STYLE_KEY,mn=gn.DISPLAY,En=gn.LINE_HEIGHT,Tn=gn.FONT_SIZE,On=gn.FONT_FAMILY,Mn=gn.FONT_WEIGHT,An=gn.COLOR,xn=gn.VISIBILITY,Rn=gn.TEXT_ALIGN,Sn=gn.LETTER_SPACING,bn=function(){t(n,S);var r=e(n);function n(t){var e;return g(this,n),(e=r.call(this)).__content=Ft.isNil(t)?"":t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return l(n,[{key:"__computeMeasure",value:function(t,e){var r=this.content,n=this.computedStyle,i=this.charWidthList;i.splice(0),t===Ct.CANVAS&&(e.font=ln.setFontStyle(n));for(var a=this.__key=n[Tn]+","+n[On]+","+n[Mn],o=Ut.data[a]=Ut.data[a]||{key:a,style:n,hash:{},s:[]},s=Ut.charWidth[a]=Ut.charWidth[a]||{},h=0,l=!1,c=0,u=r.length;c<u;c++){var _=r.charAt(c),f=void 0;s.hasOwnProperty(_)?(f=s[_],i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):t===Ct.CANVAS?(f=s[_]=e.measureText(_).width,i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):(o.hash.hasOwnProperty(_)||(o.s+=_),o.hash[_]=!0,i.push(-1),l=!0)}this.__textWidth=h,l&&Ut.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,n=this.__key,i=Ut.charWidth[n],a=0,o=0,s=r.length;o<s;o++){r[o]<0&&(a+=t=r[o]=i[e.charAt(o)],this.__charWidth=Math.max(this.charWidth,t))}this.__textWidth=a}},{key:"__layout",value:function(t,e){var r=this,n=t.x,i=t.y,a=t.w;this.__x=this.__sx1=n,this.__y=this.__sy1=i;var o=this.isDestroyed,s=this.content,h=this.computedStyle,l=this.lineBoxes,c=this.charWidthList;if(!o&&"none"!==h[mn]){this.__ox=this.__oy=0,l.splice(0);for(var u,_,f,d,p=0,v=0,y=0,g=s.length,m=0,E=h[En],T=h[Sn];v<g;){(y+=c[v]+T)===a?(u=new yn(this,n,i,y,s.slice(p,v+1)),l.push(u),m=Math.max(m,y),i+=E,v=p=v+1,y=0):a<y?(_=void 0,_=v===p?(v=p+1,y):y-c[v],f=new yn(this,n,i,_,s.slice(p,v)),l.push(f),m=Math.max(m,_),i+=E,p=v,y=0):v++}if(p<g&&p<v){for(y=0,v=p;v<g;v++)y+=c[v]+T;var O=new yn(this,n,i,y,s.slice(p,g));l.push(O),m=Math.max(m,y),i+=E}this.__width=m,this.__height=i-t.y,e||(d=h[Rn],-1<["center","right"].indexOf(d)&&l.forEach(function(t){var e=r.__width-t.width;0<e&&t.__offsetX("center"===d?.5*e:e)}))}}},{key:"__offsetX",value:function(e,t){ot(at(n.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){ot(at(n.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;e===Ct.SVG&&(this.__virtualDom={type:"text",children:[]});var h,l,c=this.isDestroyed,u=this.computedStyle,_=this.lineBoxes,f=this.cacheStyle,d=this.charWidthList;if(c||"none"===u[mn]||"hidden"===u[xn])return!1;e===Ct.CANVAS&&(h=ln.setFontStyle(u),r.font!==h&&(r.font=h),l=f[An],r.fillStyle!==l&&(r.fillStyle=l));var p=0;return _.forEach(function(t){t.render(e,r,u,f,o,s,p,d),p+=t.content.length}),e===Ct.SVG&&(this.virtualDom.children=_.map(function(t){return t.virtualDom})),!0}},{key:"__deepScan",value:function(t){t(this)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes;if(!t.length)return 0;var e=t[t.length-1];return e.y-this.y+e.baseLine}},{key:"currentStyle",get:function(){return this.parent.currentStyle}},{key:"computedStyle",get:function(){return this.parent.computedStyle}},{key:"cacheStyle",get:function(){return this.parent.__cacheStyle}},{key:"bbox",get:function(){if(this.content){var t=this.sx,e=this.sy;return[t,e,t+this.width,e+this.height]}}}]),n}();bn.prototype.__renderByMask=bn.prototype.render;var kn={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a];if(Array.isArray(s)){i=a;break}}t.moveTo(e[i][0]+r,e[i][1]+n);for(var h=i+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+n):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n,c[4]+r,c[5]+n))}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=0,r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){e=r;break}}for(var a="M"+t[e][0]+","+t[e][1],o=e+1,s=t.length;o<s;o++){var h=t[o];Array.isArray(h)&&(2===h.length?a+="L"+h[0]+","+h[1]:4===h.length?a+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(a+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return a},canvasLine:function(t,e,r,n,i,a,o,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(a[0]+h,a[1]+l,o[0]+h,o[1],n+h,i+l),2):2===s?(t.quadraticCurveTo(o[0]+h,o[1]+l,n+h,i+l),2):1===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,n+h,i+l),2):(t.lineTo(n+h,i+l),1)},svgLine:function(t,e,r,n,i,a,o){return 3===o?"M"+t+","+e+"C"+i[0]+","+i[1]+" "+a[0]+","+a[1]+" "+r+","+n:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+n:1===o?"M"+t+","+e+"Q"+i[0]+","+i[1]+" "+r+","+n:"M"+t+","+e+"L"+r+","+n}};function In(t,e,r,n){var i=r-t,a=n-e,o=Math.atan(Math.abs(a)/Math.abs(i));return i<0&&0<=a?Math.PI-o:i<0&&a<0?o-Math.PI:0<=i&&0<=a?o:-o}function Nn(t){var e=Math.sin(t),r=Math.cos(t),n=Lt.identity();return n[0]=n[3]=r,n[1]=e,n[2]=-e,n}function wn(t,e){var r=Pt(t,6),n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],h=r[5],l=Pt(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=(a-n)*(h-i)-(s-n)*(o-i),v=(_-c)*(l[5]-u)-(d-c)*(f-u);return 0<p&&v<0||p<0&&0<v}var Dn={exchangeOrder:function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g=(c=Pt(t,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=[0,1,2],f<u&&f<p?(u=(r=[f,d,u,_])[0],_=r[1],f=r[2],d=r[3],y[0]=1,y[1]=0):p<f&&p<u&&(u=(n=[p,v,u,_])[0],_=n[1],p=n[2],v=n[3],y[0]=2,y[2]=0),u===f?d<_&&(u=(i=[f,d,u,_])[0],_=i[1],f=i[2],d=i[3],a=y[0],y[0]=y[1],y[1]=a):u===p&&v<_&&(u=(o=[p,v,u,_])[0],_=o[1],p=o[2],v=o[3],s=y[0],y[0]=y[2],y[2]=s),(f-u)*(v-_)-(p-u)*(d-_)<0&&(f=(h=[p,v,f,d])[0],d=h[1],p=h[2],v=h[3],l=y[1],y[1]=y[2],y[2]=l),[u,_,f,d,p,v,y]),m=Pt(g,7),E=m[0],T=m[1],O=m[2],M=m[3],A=m[4],x=m[5],R=Pt(function(t,e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,m[6]),6);return[[E,T,O,M,A,x],[R[0],R[1],R[2],R[3],R[4],R[5]]]},isOverflow:wn,transform:function(t,e){var r,n=Pt(t,6),i=n[0],a=n[1],o=n[2],s=n[3],h=n[4],l=n[5],c=Pt(e,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=wn(t,e),g=Lt.identity();g[4]=-i,g[5]=-a;var m=In(i,a,o,s);0!==m&&(r=Nn(-m),g=Lt.multiply(r,g));var E=Bt.pointsDistance(i,a,o,s),T=Bt.pointsDistance(u,_,f,d),O=Lt.identity();O[4]=-u,O[5]=-_;var M=m=In(u,_,f,d);0!==m&&(r=Nn(-m),O=Lt.multiply(r,O));var A=Math.abs(Lt.calPoint([h,l],g)[1]),x=Math.abs(Lt.calPoint([p,v],O)[1]);E===T&&A===x||(r=Lt.identity(),E!==T&&(r[0]=T/E),A!==x&&(r[3]=x/A),g=Lt.multiply(r,g)),O=g;var R=Pt(Lt.calPoint([i,a],O),2),S=R[0],b=R[1],k=Pt(Lt.calPoint([o,s],O),2),I=k[0],N=k[1],w=Pt(Lt.calPoint([h,l],O),2),D=w[0],P=w[1],C=Bt.pointsDistance(S,b,I,N),L=Bt.pointsDistance(S,b,D,P),F=Bt.pointsDistance(D,P,I,N),B=Bt.pointsDistance(u,_,f,d),H=Bt.pointsDistance(u,_,p,v),G=Bt.pointsDistance(p,v,f,d),Y=Bt.angleBySide(F,C,L),W=Bt.angleBySide(G,B,H);return Y!==W&&((r=Lt.identity())[2]=Math.tan(Y-.5*Math.PI)+Math.tan(.5*Math.PI-W),g=Lt.multiply(r,g)),y&&(g[1]=-g[1],g[3]=-g[3],g[5]=-g[5]),(r=0!==M?Nn(M):Lt.identity())[4]=u,r[5]=_,g=Lt.multiply(r,g)}},Pn={matrix:Lt,tar:Dn,geom:Bt},Cn=p.STYLE_KEY,Ln=Cn.TRANSLATE_X,Fn=Cn.TRANSLATE_Y,Bn=Cn.SCALE_X,Hn=Cn.SCALE_Y,Gn=Cn.SKEW_X,Yn=Cn.SKEW_Y,Wn=Cn.ROTATE_Z,Un=Cn.MATRIX,Xn=R.PX,Kn=R.PERCENT,zn=Pn.matrix,Vn=Pn.geom,jn=zn.identity,$n=zn.calPoint,qn=zn.multiply,Zn=zn.isE,Jn=Vn.d2r,Qn=Vn.pointInPolygon;function ti(t,e,r){var i,a,o,n=(i=e,a=r,o=[],t.forEach(function(t){var e=Pt(t,2),r=e[0],n=e[1];o.push([r,function(t,e,r,n){if(t===Ln){if(e[1]===Kn)return e[0]*r*.01}else if(t===Fn){if(e[1]===Kn)return e[0]*n*.01}else if(t===Un)return e;return e[0]}(r,n,i,a)])}),o),c=jn();return n.forEach(function(t){var e,r,n,i,a,o=Pt(t,2),s=o[0],h=o[1],l=jn();e=l,n=h,(r=s)===Ln?e[4]=n:r===Fn?e[5]=n:r===Bn?e[0]=n:r===Hn?e[3]=n:r===Gn?(n=Jn(n),e[2]=Math.tan(n)):r===Yn?(n=Jn(n),e[1]=Math.tan(n)):r===Wn?(n=Jn(n),i=Math.sin(n),a=Math.cos(n),e[0]=e[3]=a,e[1]=i,e[2]=-i):r===Un&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5]),c=qn(c,l)}),c}function ei(t,e){var r=Pt(e,2),n=r[0],i=r[1];if(0===n&&0===i)return t.slice(0);var a=jn();a[4]=n,a[5]=i;var o=qn(a,t),s=jn();return s[4]=-n,s[5]=-i,qn(o,s)}var ri={calMatrix:ti,calOrigin:function(t,r,n){var i=[];return t.forEach(function(t,e){t[1]===Xn?i.push(t[0]):t[1]===Kn&&i.push(t[0]*(e?n:r)*.01)}),i},calMatrixByOrigin:ei,calMatrixWithOrigin:function(t,e,r,n){return ei(ti(t,r,n),e)},pointInQuadrilateral:function(t,e,r,n,i,a,o,s,h,l,c){if(!c||Zn(c))return r<=t&&n<=e&&t<=o&&e<=s;var u=Pt($n([r,n],c),2);r=u[0],n=u[1];var _=Pt($n([i,a],c),2);i=_[0],a=_[1];var f=Pt($n([h,l],c),2);h=f[0],l=f[1];var d=Pt($n([o,s],c),2);return o=d[0],s=d[1],Qn(t,e,[[r,n],[i,a],[o,s],[h,l]])}},ni=Bt.H;function ii(t,e,r,n,i,a,o,s){var h=1,l=1,c=1;t:for(var u=a;i<=u;u--)for(var _=s;o<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+n)%f)continue}if(1<r)if(u<(e+n)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function ai(t,e,r,n,i,a){var o=i-e,s=n-r,h=r-e,l=i-n;if("dotted"===t)return ii(o,h,l,s,a,a,Math.max(1,.25*a),2*a);var c=ii(o,h,l,s,a,3*a,Math.max(1,.25*a),2*a),u=c.n,_=c.ps,f=c.pd;return 1===u?ii(o,h,l,s,a,a,Math.max(1,.25*a),2*a):{n:u,ps:_,pd:f}}function oi(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[1][0]<C?F.push(z):z[0][0]>L?H.push(z):z[1][0]>L&&z[0][0]<C?(W=C<i?s+Math.tan(e)*(C-n):h,U=a<L?s+Math.tan(r)*(o-L):h,F.push([z[0],[C,s],[C,W],z[3]]),C<L&&(i<C&&L<a?B.push([[C,s],[L,s],[L,h],[C,h]]):i<C?(B.push([[C,s],[a,s],[a,h],[C,h]]),B.push([[a,s],[L,s],[L,U],[a,h]])):L<a?(B.push([[C,s],[i,s],[i,h],[C,W]]),B.push([[i,s],[L,s],[L,h],[i,h]])):(B.push([[C,s],[i,s],[i,h],[C,W]]),B.push([[i,s],[a,s],[a,h],[i,h]]),B.push([[a,s],[L,s],[L,U],[a,h]]))),H.push([[L,s],z[1],z[2],[L,U]])):z[1][0]>L?(X=a<L?s+Math.tan(r)*(o-L):h,B.push([z[0],[L,s],[L,X],z[3]]),H.push([[L,s],z[1],z[2],[L,X]])):z[0][0]<C?(K=C<i?s+Math.tan(e)*(C-n):h,F.push([z[0],[C,s],[C,K],z[3]]),B.push([[C,s],z[1],z[2],[C,K]])):B.push(z)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=s+v,R=(x=v-(h-s))/(p-(i-n)),b=Pt((S=si(F[0][0],F[0][1],C,A,M,O,!0,Math.tan(T)*O))[0],2),D=b[0],P=b[1],E&&(I=Pt((k=si(F[0][3],F[0][2],C,A,R,x,!0,Math.tan(T)*x))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=si(t[0],t[1],C,A,M,O),E&&(n=si(t[3],t[2],C,A,R,x)));for(var i=0,a=r.length;i<a;i++)gi(r[i],D,P,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),E){for(var o=0,s=n.length;o<s;o++)gi(n[o],N,w,0);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=o-a<g&&t<m,j=Math.atan((o-a)/(h-s)),q=($=m)/g,Z=s+m,Q=(J=m-(h-s))/(g-(o-a)),et=Pt((tt=hi(H[ht-1][0],H[ht-1][1],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=hi(H[ht-1][3],H[ht-1][2],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=hi(t[0],t[1],L,Z,q,$),V&&(n=hi(t[3],t[2],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)gi(r[i],ot,st,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),V){for(var o=0,s=n.length;o<s;o++)gi(n[o],it,at,1);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}})),F.concat(B).concat(H)}function si(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(n-T)),x=r-Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*b/i,n-Math.cos(I)*b],[r-Math.sin(N)*b/i,n-Math.cos(N)*b],[x,R]]}function hi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(n-g)),x=r+Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(M/(n-T)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[x,R],[r+Math.sin(I)*b/i,n-Math.cos(I)*b],[r+Math.sin(N)*b/i,n-Math.cos(N)*b],[d,p]]}function li(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[2][1]<C?F.push(z):z[1][1]>L?H.push(z):z[2][1]>L&&z[1][1]<C?(W=C<h?a+Math.tan(r)*(h-C):a,U=l<L?a+Math.tan(e)*(L-l):a,F.push([z[0],z[1],[o,C],[W,C]]),C<L&&(L<l&&h<C?B.push([[a,C],[o,C],[o,L],[a,L]]):h<C?(B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]])):L<l?(B.push([[W,C],[o,C],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,L],[a,L]])):(B.push([[W,C],[o,C],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]]))),H.push([[U,L],[o,L],z[2],z[3]])):z[2][1]>L?(X=l<L?a+Math.tan(e)*(L-l):a,B.push([z[0],z[1],[o,L],[X,L]]),H.push([[X,L],[o,L],z[2],z[3]])):z[1][1]<C?(K=C<h?a+Math.tan(r)*(h-C):a,F.push([z[0],z[1],[o,C],[K,C]]),B.push([[K,C],[o,C],z[2],z[3]])):B.push(z)}F.length&&(E=h-s<v&&t<p,T=Math.atan((o-a)/(h-s)),M=(O=v)/p,A=o-p,R=(x=v-(h-s))/(p-(o-a)),b=Pt((S=ci(F[0][1],F[0][2],A,C,M,O,!0,Math.tan(T)*O))[S.length-1],2),D=b[0],P=b[1],E&&(I=Pt((k=ci(F[0][0],F[0][3],A,C,R,x,!0,Math.tan(T)*x))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=ci(t[1],t[2],A,C,M,O),E&&(n=ci(t[0],t[3],A,C,R,x)));for(var i=0,a=r.length;i<a;i++)gi(r[i],D,P,2);if(E){for(var o=0,s=n.length;o<s;o++)gi(n[o],N,w,2);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=c-l<m&&t<g,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=o-g,Q=(J=m-(c-l))/(g-(o-a)),et=Pt((tt=ui(H[ht-1][1],H[ht-1][2],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=ui(H[ht-1][0],H[ht-1][3],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=ui(t[1],t[2],Z,L,q,$),V&&(n=ui(t[0],t[3],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)gi(r[i],ot,st,3);if(V){for(var o=0,s=n.length;o<s;o++)gi(n[o],it,at,3);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function ci(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(M/(n-T)),x=r+Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r+Math.sin(I)*b/i,w=n-Math.cos(I)*b,D=A-k;return[[x,R],[r+Math.sin(D)*b/i,n-Math.cos(D)*b],[N,w],[d,p]]}function ui(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),x=r+Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r+Math.sin(I)*b/i,w=n+Math.cos(I)*b,D=f+k;return[[d,p],[r+Math.sin(D)*b/i,n+Math.cos(D)*b],[N,w],[x,R]]}function _i(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[2][0]<C?F.push(z):z[3][0]>L?H.push(z):z[2][0]>L&&z[3][0]<C?(W=C<i?c-Math.tan(e)*(C-n):h,U=a<L?c-Math.tan(r)*(o-L):l,F.push([z[0],[C,W],[C,c],z[3]]),C<L&&(i<C&&L<a?B.push([[C,l],[L,l],[L,c],[C,c]]):i<C?(B.push([[C,l],[a,l],[a,c],[C,c]]),B.push([[a,l],[L,U],[L,c],[a,c]])):L<a?(B.push([[C,W],[i,l],[i,c],[C,c]]),B.push([[i,l],[L,l],[L,c],[i,c]])):(B.push([[C,W],[i,l],[i,c],[C,c]]),B.push([[i,l],[a,l],[a,c],[i,c]]),B.push([[a,l],[L,U],[L,c],[a,c]]))),H.push([[L,U],z[1],z[2],[L,c]])):z[2][0]>L?(X=a<L?c-Math.tan(r)*(o-L):l,B.push([z[0],[L,X],[L,c],z[3]]),H.push([[L,X],z[1],z[2],[L,c]])):z[3][0]<C?(K=C<i?c-Math.tan(e)*(C-n):l,F.push([z[0],[C,K],[C,c],z[3]]),B.push([[C,K],z[1],z[2],[C,c]])):B.push(z)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(c-l)),M=(O=v)/p,A=c-v,R=(x=v-(c-l))/(p-(i-n)),b=Pt((S=fi(F[0][3],F[0][2],C,A,M,O,!0,Math.tan(T)*O))[0],2),D=b[0],P=b[1],E&&(I=Pt((k=fi(F[0][0],F[0][1],C,A,R,x,!0,Math.tan(T)*x))[0],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=fi(t[3],t[2],C,A,M,O),E&&(n=fi(t[0],t[1],C,A,R,x)));for(var i=0,a=r.length;i<a;i++)gi(r[i],D,P,4);if(E){for(var o=0,s=n.length;o<s;o++)gi(n[o],N,w,4);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=o-a<g&&t<m,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=c-m,Q=(J=m-(c-l))/(g-(o-a)),et=Pt((tt=di(H[ht-1][3],H[ht-1][2],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=di(H[ht-1][0],H[ht-1][1],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=di(t[3],t[2],L,Z,q,$),V&&(n=di(t[0],t[1],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)gi(r[i],ot,st,5);if(V){for(var o=0,s=n.length;o<s;o++)gi(n[o],it,at,5);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),F.concat(B).concat(H)}function fi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(T-n)),x=r-Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(O/(g-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*b/i,n+Math.cos(I)*b],[r-Math.sin(N)*b/i,n+Math.cos(N)*b],[x,R]]}function di(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),x=r+Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[x,R],[r+Math.sin(I)*b/i,n+Math.cos(I)*b],[r+Math.sin(N)*b/i,n+Math.cos(N)*b],[d,p]]}function pi(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=Pt(_,2),p=d[0],v=d[1],y=Pt(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,x,R,S,b,k,I,N,w,D,P,C=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,z=u[G];z[3][1]<C?F.push(z):z[0][1]>L?H.push(z):z[3][1]>L&&z[0][1]<C?(W=C<h?i-Math.tan(r)*(h-C):i,U=l<L?i-Math.tan(e)*(L-l):i,F.push([z[0],z[1],[W,C],[n,C]]),C<L&&(L<l&&h<C?B.push([[n,C],[i,C],[i,L],[n,L]]):h<C?(B.push([[n,C],[i,C],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]])):L<l?(B.push([[n,C],[W,C],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,L],[n,L]])):(B.push([[n,C],[W,C],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]]))),H.push([[n,L],[U,L],z[2],z[3]])):z[3][1]>L?(X=l<L?i-Math.tan(e)*(L-l):i,B.push([z[0],z[1],[X,L],[n,L]]),H.push([[n,L],[X,L],z[2],z[3]])):z[1][1]<C?(K=C<h?i-Math.tan(r)*(h-C):i,F.push([z[0],z[1],[K,C],[n,C]]),B.push([[n,C],[K,C],z[2],z[3]])):B.push(z)}F.length&&(E=h-s<v&&t<p,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=n+p,R=(x=v-(h-s))/(p-(i-n)),b=Pt((S=vi(F[0][0],F[0][3],A,C,M,O,!0,Math.tan(T)*O))[S.length-1],2),D=b[0],P=b[1],E&&(I=Pt((k=vi(F[0][1],F[0][2],A,C,R,x,!0,Math.tan(T)*x))[k.length-1],2),N=I[0],w=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=vi(t[0],t[3],A,C,M,O),E&&(n=vi(t[1],t[2],A,C,R,x)));for(var i=0,a=r.length;i<a;i++)gi(r[i],D,P,6);if(E){for(var o=0,s=n.length;o<s;o++)gi(n[o],N,w,6);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(V=c-l<m&&t<g,j=Math.atan((i-n)/(c-l)),q=($=m)/g,Z=n+g,Q=(J=m-(c-l))/(g-(i-n)),et=Pt((tt=yi(H[ht-1][0],H[ht-1][3],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],V&&(nt=Pt((rt=yi(H[ht-1][1],H[ht-1][2],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,V&&(n=rt)):(r=yi(t[0],t[3],Z,L,q,$),V&&(n=yi(t[1],t[2],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)gi(r[i],ot,st,7);if(V){for(var o=0,s=n.length;o<s;o++)gi(n[o],it,at,7);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function vi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(M/(n-T)),x=r-Math.sin(A)*a/i,R=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Bt.h(Math.abs(f-A))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r-Math.sin(I)*b/i,w=n-Math.cos(I)*b,D=A-k;return[[x,R],[r-Math.sin(D)*b/i,n-Math.cos(D)*b],[N,w],[d,p]]}function yi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=Pt(t,2),y=v[0],g=v[1],m=Pt(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(O/(g-n)),x=r-Math.sin(A)*a/i,R=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[x,R]];var S=Bt.h(Math.abs(A-f))*a,b=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r-Math.sin(I)*b/i,w=n+Math.cos(I)*b,D=f+k;return[[d,p],[r-Math.sin(D)*b/i,n+Math.cos(D)*b],[N,w],[x,R]]}function gi(t,e,r,n){0===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===n?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===n||6===n?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===n&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var mi={calPoints:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var v=0===_||2===_?ai(e,i,a,o,s,t):ai(e,h,l,c,u,t),y=v.n,g=v.ps,m=v.pd;if(1<y){for(var E=0;E<y;E++){var T=E===y-1,O=void 0,M=void 0,A=void 0,x=(O=0===_||2===_?E?i+g*E+m*E:i:E?h+g*E+m*E:h)+g;0===_?x<=a?T?p.push([[i,h],[s,h],[o,l],[a,l]]):(M=h+(O-i)*Math.tan(r),A=h+(x-i)*Math.tan(r),p.push([[O,h],[x,h],[x,A],[O,M]])):o<=O?(M=h+(s-O)*Math.tan(n),A=h+(s-x)*Math.tan(n),T?p.push([[O,h],[s,h],[s,h],[O,M]]):p.push([[O,h],[x,h],[x,A],[O,M]])):O<a?(M=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,M]]),T?(p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[s,h],[s,h],[a,l]])):o<x?(A=h+(s-x)*Math.tan(n),p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[x,h],[x,A],[o,l]])):p.push([[a,h],[x,h],[x,l],[a,l]])):o<x?(M=h+(s-x)*Math.tan(n),O<a?(A=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,A]]),p.push([[a,h],[o,h],[o,l],[a,l]])):p.push([[O,h],[o,h],[o,l],[O,l]]),T?p.push([[o,h],[s,h],[s,h],[o,l]]):p.push([[o,h],[x,h],[x,M],[o,l]])):T?p.push([[O,h],[s,h],[o,l],[O,l]]):p.push([[O,h],[x,h],[x,l],[O,l]]):1===_?x<=l?T?p.push([[o,l],[s,h],[s,u],[o,c]]):(M=s-(O-h)*Math.tan(r),A=s-(x-h)*Math.tan(r),p.push([[M,O],[s,O],[s,x],[A,x]])):c<=O?(M=o+(O-c)*Math.tan(n),A=o+(x-c)*Math.tan(n),T?p.push([[M,O],[s,O],[s,u],[s,u]]):p.push([[M,O],[s,O],[s,x],[A,x]])):O<l?(M=o+(l-O)*Math.tan(r),p.push([[M,O],[s,O],[s,l],[o,l]]),T?(p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,u],[s,u]])):c<x?(A=o+(x-c)*Math.tan(n),p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,x],[A,x]])):p.push([[o,l],[s,l],[s,x],[o,x]])):c<x?(M=o+(x-c)*Math.tan(n),O<l?(A=o+(l-O)*Math.tan(r),p.push([[A,O],[s,O],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,s],[s,s]]):p.push([[o,c],[s,c],[s,x],[M,x]])):(p.push([[o,O],[s,O],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,u],[s,u]]):p.push([[o,c],[s,c],[s,x],[M,x]]))):T?p.push([[o,O],[s,O],[s,u],[o,c]]):p.push([[o,O],[s,O],[s,x],[o,x]]):2===_?x<=a?T?p.push([[i,u],[a,c],[o,c],[s,u]]):(M=u-(O-i)*Math.tan(r),A=u-(x-i)*Math.tan(r),p.push([[O,M],[x,A],[x,u],[O,u]])):o<=O?(M=u-(s-O)*Math.tan(n),A=u-(s-x)*Math.tan(n),T?p.push([[O,M],[s,u],[s,u],[O,u]]):p.push([[O,M],[x,A],[x,u],[O,u]])):O<a?(M=u-(O-i)*Math.tan(r),p.push([[O,M],[a,c],[a,u],[O,u]]),T?(p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[s,u],[s,u],[o,u]])):o<x?(A=u-(x-o)*Math.tan(n),p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[x,A],[x,u],[o,u]])):p.push([[a,c],[x,c],[x,u],[a,u]])):o<x?(M=u-(s-x)*Math.tan(n),O<a?(A=u-(O-o)*Math.tan(r),p.push([[O,A],[a,c],[a,u],[O,u]]),p.push([[a,c],[o,c],[o,u],[a,u]])):p.push([[O,c],[o,c],[o,u],[O,u]]),T?p.push([[o,c],[s,u],[s,u],[o,u]]):p.push([[o,c],[x,M],[x,u],[o,u]])):T?p.push([[O,c],[o,c],[s,u],[O,u]]):p.push([[O,c],[x,c],[x,u],[O,u]]):3===_&&(x<=l?T?p.push([[i,h],[a,l],[a,c],[i,u]]):(M=i+(O-h)*Math.tan(r),A=i+(x-h)*Math.tan(r),p.push([[i,O],[M,O],[A,x],[i,x]])):c<=O?(M=i+(u-O)*Math.tan(n),A=i+(u-x)*Math.tan(n),T?p.push([[i,O],[M,O],[i,u],[i,u]]):p.push([[i,O],[M,O],[A,x],[i,x]])):O<l?(M=i+(O-h)*Math.tan(r),p.push([[i,O],[M,O],[a,l],[i,l]]),T?(p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[i,u],[i,u]])):c<x?(A=i+(u-x)*Math.tan(n),p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[A,x],[i,x]])):p.push([[i,l],[a,l],[a,x],[i,x]])):c<x?(M=i+(u-x)*Math.tan(n),O<l?(A=i+(O-h)*Math.tan(r),p.push([[i,O],[A,O],[a,l],[i,h]]),p.push([[i,l],[a,l],[a,c],[i,c]])):p.push([[i,O],[a,O],[a,c],[i,c]]),T?p.push([[i,c],[a,c],[i,u],[i,u]]):p.push([[i,c],[a,c],[M,x],[i,x]])):T?p.push([[i,O],[a,O],[a,c],[i,u]]):p.push([[i,O],[a,O],[a,x],[i,x]]))}if(0===_)return oi(t,r,n,i,a,o,s,h,l,0,0,p,f,d);if(1===_)return li(t,r,n,0,0,o,s,h,l,c,u,p,f,d);if(2===_)return _i(t,r,n,i,a,o,s,0,l,c,u,p,f,d);if(3===_)return pi(t,r,n,i,a,0,0,h,l,c,u,p,f,d)}}return 0===_?(i<a&&p.push([[i,h],[a,h],[a,l],[i,h]]),p.push([[a,h],[o,h],[o,l],[a,l]]),o<s&&p.push([[o,h],[s,h],[s,h],[o,l]]),oi(t,r,n,i,a,o,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),c<u&&p.push([[o,c],[s,c],[s,u],[s,u]]),li(t,r,n,0,0,o,s,h,l,c,u,p,f,d)):2===_?(i<a&&p.push([[i,u],[a,c],[a,u],[i,u]]),p.push([[a,c],[o,c],[o,u],[a,u]]),o<s&&p.push([[o,c],[s,u],[s,u],[o,u]]),_i(t,r,n,i,a,o,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[i,h],[i,h],[a,l],[i,l]]),p.push([[i,l],[a,l],[a,c],[i,c]]),c<u&&p.push([[i,c],[a,c],[i,u],[i,u]]),pi(t,r,n,i,a,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,n,i,a,o,s,h,l,c,u){var _,f=Pt(h,2),d=f[0],p=f[1],v=Pt(l,2),y=v[0],g=v[1],m=Pt(c,2),E=m[0],T=m[1],O=Pt(u,2),M=O[0],A=O[1];if(p-=i,y-=a,g-=i,E-=a,T-=o,M-=s,A-=o,(0<(d-=s)&&0<p||0<y&&0<g||0<E&&0<T||0<M&&0<A)&&(_=!0),_){var x=[];return 0<d&&0<p?(x.push([t,e+p]),x.push([t,e+p*(1-ni),t+d*(1-ni),e,t+d,e])):x.push([t,e]),0<y&&0<g?(x.push([t+r-y,e]),x.push([t+r-y*(1-ni),e,t+r,e+g*(1-ni),t+r,e+g])):x.push([t+r,e]),0<E&&0<T?(x.push([t+r,e+n-T]),x.push([t+r,e+n-T*(1-ni),t+r-E*(1-ni),e+n,t+r-E,e+n])):x.push([t+r,e+n]),0<M&&0<A?(x.push([t+M,e+n]),x.push([t+M*(1-ni),e+n,t,e+n-A*(1-ni),t,e+n-A])):x.push([t,e+n]),x}}},Ei=p.STYLE_KEY,Ti=Ei.SCALE_X,Oi=Ei.SCALE_Y,Mi=R.PERCENT,Ai=R.NUMBER;var xi={matrixResize:function(t,e,r,n,i,a,o,s){if(t!==r||e!==n){var h=[[Ti,[r/t,Ai]],[Oi,[n/e,Ai]]],l=ri.calOrigin([[0,Mi],[0,Mi]],o,s);return l[0]+=i,l[1]+=a,ri.calMatrixWithOrigin(h,l,o,s)}}},Ri="\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nvarying vec2 vTextureCoord;\nuniform mat3 projectionMatrix;\n\nvoid main(void)\n{\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}",Si="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 color = vec4(0.0);\n\n  // Sample top left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample top right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Average\n  color *= 0.25;\n\n  gl_FragColor = color;\n}";function bi(t,e,r){var n=function(t,e,r){var n=ki(t,t.VERTEX_SHADER,e),i=ki(t,t.FRAGMENT_SHADER,r);if(!n||!i)return null;var a=t.createProgram();if(!a)return null;if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;var o=t.getProgramInfoLog(a);return re.error("Failed to link program: "+o),t.deleteProgram(a),t.deleteShader(i),t.deleteShader(n),null}(t,e,r);if(n)return t.useProgram(n),t.program=n,1;re.error("Failed to create program")}function ki(t,e,r){var n=t.createShader(e);if(null==n)return re.error("unable to create shader"),null;if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;var i=t.getShaderInfoLog(n);return re.error("Failed to compile shader: "+i),t.deleteShader(n),null}function Ii(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),e}var Ni=function(){function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4;g(this,a),this.webgl=t;var n,i=this.gl=t.ctx;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,-1),bi(i,Ri,Si),this.vertexLocations=function(t){var e=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);var n=Float32Array.BYTES_PER_ELEMENT,i=t.getAttribLocation(t.program,"aVertexPosition");t.vertexAttribPointer(i,2,t.FLOAT,!1,4*n,0),t.enableVertexAttribArray(i);var a=t.getAttribLocation(t.program,"aTextureCoord");t.vertexAttribPointer(a,2,t.FLOAT,!1,4*n,2*n);var o=t.getUniformLocation(t.program,"projectionMatrix");return t.uniformMatrix3fv(o,!1,new Float32Array([1,0,0,0,1,0,0,0,1])),t.enableVertexAttribArray(a),{aPosition:i,aTexCoord:a}}(i),this.textureLocations={uSampler:(n=i).getUniformLocation(n.program,"uSampler"),uOffset:n.getUniformLocation(n.program,"uOffset"),uClamp:n.getUniformLocation(n.program,"filterClamp")},this._pixelSize={x:0,y:0},this.pixelSize=1,this._kernels=null,this._blur=e,this.quality=r,this.textures=[],this.framebuffers=[]}return l(a,[{key:"initBuffers",value:function(t,e,r){for(var n=0;n<2;n++){var i=Ii(t);this.textures.push(i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null);var a=t.createFramebuffer();this.framebuffers.push(a),t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}}},{key:"draw",value:function(t,e,r){var n=this.textureLocations,i=n.uOffset,a=n.uClamp,o=this.gl;o.uniform2f(i,e[0],e[1]),o.viewport(0,0,t.width,t.height),o.uniform4f(a,0,0,t.width,t.height),r&&o.bindFramebuffer(o.FRAMEBUFFER,null),o.drawArrays(o.TRIANGLE_STRIP,0,4)}},{key:"apply",value:function(t,e,r){var n=this.gl;this.initBuffers(n,e,r);var i=this.textureLocations.uSampler;n.uniform1i(i,0);var a=Ii(n);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.canvas);var o,s=this._pixelSize.x/e,h=this._pixelSize.y/r,l=this._quality-1;n.bindTexture(n.TEXTURE_2D,a);for(var c=0;c<l;c++){o=this._kernels[c]+.5,n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffers[c%2]);var u=new Float32Array([o*s,o*h]);this.draw(t.canvas,u,!1),n.bindTexture(n.TEXTURE_2D,this.textures[c%2])}o=this._kernels[l]+.5;var _=new Float32Array([o*s,o*h]);return this.draw(t.canvas,_,!0),this.webgl.draw(),t.ctx.clearRect(0,0,e,r),t.ctx.drawImage(n.canvas,0,0),t.draw(),this}},{key:"_generateKernels",value:function(){var t=this._blur,e=this._quality,r=[t];if(0<t)for(var n=t,i=t/e,a=1;a<e;a++)n-=i,r.push(n);this._kernels=r}},{key:"clear",value:function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}},{key:"kernels",get:function(){return this._kernels},set:function(t){Array.isArray(t)&&0<t.length?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)}},{key:"pixelSize",set:function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):(this._pixelSize.x=1,this._pixelSize.y=1)},get:function(){return this._pixelSize}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}},{key:"blur",get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()}}]),a}();var wi={gaussBlur:function(t,e,r,n,i){return new Ni(e,r).apply(t,n,i)}},Di=Ft.isFunction,Pi=function(){function o(){g(this,o),this.__eHash={}}return l(o,[{key:"on",value:function(t,e){if(e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.on(t[r],e);else if(e){this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(n,i){if(Di(i)){var a=this;if(o.__karasEventCb=i,Array.isArray(n))for(var t=0,e=n.length;t<e;t++)a.once(n[t],i);else i&&a.on(n,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.apply(a,e),a.off(n,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e||a[i].__karasEventCb===e){a.splice(i,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)this.emit(t[i],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var l=o[s];Di(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o;e.__eHash={};for(var n=["on","once","off","emit"],i=n.length-1;0<=i;i--){var a=n[i];e[a]=r[a]}}}}]),o}();c(Pi,"REFRESH","refresh"),c(Pi,"PAUSE","pause"),c(Pi,"PLAY","play"),c(Pi,"FRAME","frame"),c(Pi,"FINISH","finish"),c(Pi,"CANCEL","cancel"),c(Pi,"BEGIN","begin"),c(Pi,"END","end");var Ci,Li=Ft.isFunction;function Fi(t,e,r,n){if(n)for(var i=0;i<e;i++){var a=t[i];a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s.__before&&s.__before(r)}}var Bi=new(function(){function t(){g(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return l(t,[{key:"__init",value:function(){var u=this,_=u.task,f=u.taskCp;re.cancelAnimationFrame(u.id);var d=u.__now=re.now();!function c(){re.cancelAnimationFrame(u.id),u.id=re.requestAnimationFrame(function(){if(!Ci&&(_.length||f.length)){var t=u.__now=re.now(),e=t-d,e=Math.max(e,0);d=t;var r=_.slice(0),n=f.splice(0),i=r.length,a=n.length;Fi(r,i,e),Fi(n,a,e);for(var o=u.__hookTask.splice(0),s=0,h=o.length;s<h;s++){var l=o[s];l&&l()}Fi(r,i,e,!0),Fi(n,a,e,!0),(_.length||f.length)&&c()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Li(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,n=e.length;r<n;r++){var i=e[r];if(i===t||i.__karasFramecb===t){e.splice(r,1);break}}e.length||(re.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,n=this;e&&((r=Li(e)?{__after:function(t){e(t),n.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),n.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){Ci=!0}},{key:"resume",value:function(){Ci&&(this.__init(),Ci=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),Hi=4,Gi=1e-7,Yi=10,Wi="function"==typeof Float32Array;function Ui(t,e){return 1-3*e+3*t}function Xi(t,e){return 3*e-6*t}function Ki(t,e,r){return((Ui(e,r)*t+Xi(e,r))*t+3*e)*t}function zi(t,e,r){return 3*Ui(e,r)*t*t+2*Xi(e,r)*t+3*e}function Vi(t){return t}function ji(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===r)return Vi;for(var s=new(Wi?Float32Array:Array)(11),t=0;t<11;++t)s[t]=Ki(.1*t,a,o);function n(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var n=e+.1*((t-s[--r])/(s[r+1]-s[r])),i=zi(n,a,o);return.001<=i?function(t,e,r,n){for(var i=0;i<Hi;++i){var a=zi(e,r,n);if(0===a)return e;e-=(Ki(e,r,n)-t)/a}return e}(t,n,a,o):0===i?n:function(t,e,r,n,i){for(var a,o,s=0;0<(a=Ki(o=e+(r-e)/2,n,i)-t)?r=o:e=o,Math.abs(a)>Gi&&++s<Yi;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:Ki(n(t),e,r)}}var $i={linear:ji(1,1,0,0),easeIn:ji(.42,0,1,1),easeOut:ji(0,0,.58,1),ease:ji(.25,.1,.25,1),easeInOut:ji(.42,0,.58,1),cubicBezier:ji};$i["ease-in"]=$i.easeIn,$i["ease-out"]=$i.easeOut,$i["ease-in-out"]=$i.easeInOut;var qi=p.STYLE_KEY,Zi=qi.FILTER,Ji=qi.TRANSFORM_ORIGIN,Qi=qi.BACKGROUND_POSITION_X,ta=qi.BACKGROUND_POSITION_Y,ea=qi.BOX_SHADOW,ra=qi.TRANSLATE_X,na=qi.BACKGROUND_SIZE,ia=qi.FONTSIZE,aa=qi.FLEX_BASIS,oa=qi.FLEX_DIRECTION,sa=qi.WIDTH,ha=qi.HEIGHT,la=qi.MARGIN_RIGHT,ca=qi.MARGIN_TOP,ua=qi.MARGIN_LEFT,_a=qi.MARGIN_BOTTOM,fa=qi.PADDING_LEFT,da=qi.PADDING_BOTTOM,pa=qi.PADDING_RIGHT,va=qi.PADDING_TOP,ya=qi.TOP,ga=qi.RIGHT,ma=qi.BOTTOM,Ea=qi.LEFT,Ta=qi.LINE_HEIGHT,Oa=qi.OPACITY,Ma=qi.Z_INDEX,Aa=qi.TRANSFORM,xa=qi.COLOR,Ra=qi.FONT_WEIGHT,Sa=qi.FONT_STYLE,ba=qi.FONT_FAMILY,ka=qi.TEXT_ALIGN,Ia=qi.MATRIX,Na=p.UPDATE_KEY,wa=Na.UPDATE_NODE,Da=Na.UPDATE_STYLE,Pa=Na.UPDATE_KEYS,Ca=Na.UPDATE_CONFIG,La=p.KEY_FRAME_KEY,Fa=La.FRAME_STYLE,Ba=La.FRAME_TIME,Ha=La.FRAME_EASING,Ga=La.FRAME_TRANSITION,Ya=R.AUTO,Wa=R.PX,Ua=R.PERCENT,Xa=R.INHERIT,Ka=R.RGBA,za=R.STRING,Va=R.NUMBER,ja=Ft.isNil,$a=Ft.isFunction,qa=Ft.isNumber,Za=Ft.isObject,Ja=Ft.isString,Qa=Ft.clone,to=Ft.equalArr,eo=$i.linear,ro=ln.cloneStyle,no=be.isGeom,io=be.GEOM,ao=ge.COLOR_HASH,oo=ge.LENGTH_HASH,so=ge.RADIUS_HASH,ho=ge.GRADIENT_HASH,lo=ge.EXPAND_HASH,co=ge.GRADIENT_TYPE,uo={};function _o(t,e,r,n,i){var a={};a[wa]=i,a[Da]=t,a[Pa]=e,a[Ca]=r[43],n.__addUpdate(i,r[43],n,r[44],a),r[16]=t,r[0]=!0,n.__frameHook()}function fo(r,n,t,i,a){return t.forEach(function(t){var e=function(t,e,r,n,i){var a=[r],o=t[r],s=e[r];if(r===Aa){if(!o&&!s)return;var h=o?o[0][1]:[1,0,0,1,0,0],l=s?s[0][1]:[1,0,0,1,0,0];if(to(h,l))return;return a[1]=[l[0]-h[0],l[1]-h[1],l[2]-h[2],l[3]-h[3],l[4]-h[4],l[5]-h[5]],a}if(r===Zi)o&&o.length?s&&s.length?a[1]=s[0][1]-o[0][1]:a[1]=-o[0][1]:a[1]=s[0][1];else if(r===Ji){a[1]=[];for(var c=0;c<2;c++){var u,_,f=o[c],d=s[c];f[1]===d[1]?a[1].push(d[0]-f[0]):f[1]===Wa&&d[1]===Ua?(u=.01*d[0]*n[c?"outerHeight":"outerWidth"],a[1].push(u-f[0])):f[1]===Ua&&d[1]===Wa&&(_=100*d[0]/n[c?"outerHeight":"outerWidth"],a[1].push(_-f[0]))}if(to(a[1],[0,0]))return}else if(r===Qi||r===ta){a[1]=[];for(var p=Math.min(o.length,s.length),v=0;v<p;v++){var y=o[v],g=s[v];if(y&&g)if(y[1]===g[1]&&-1<[Wa,Ua].indexOf(y[1])){var m=g[0]-y[0];if(0==m)return;a[1].push(m)}else if(o[1]===Wa&&s[1]===Ua){var E=.01*g[0]*n[r===Qi?"clientWidth":"clientHeight"];if(0==(E-=y[0]))return;a[1].push(E)}else if(o[1]===Ua&&s[1]===Wa){var T=100*g[0]/n[r===Qi?"clientWidth":"clientHeight"];if(0==(T-=y[0]))return;a[1].push(T)}else a[1].push(null);else a[1].push(null)}}else if(r===ea){a[1]=[];for(var O=0,M=Math.min(o.length,s.length);O<M;O++){for(var A=o[O],x=s[O],R=[],S=0;S<4;S++)R.push(x[S]-A[S]);for(var b=[],k=0;k<4;k++)b.push(x[4][k]-A[4][k]);R.push(b),a[1].push(R)}}else if(lo.hasOwnProperty(r)){if(o[1]===s[1]){var I=s[0]-o[0];if(0==I)return;a[1]=I}else if(o[1]===Wa&&s[1]===Ua){var N=.01*s[0]*n[r===ra?"outerWidth":"outerHeight"];if(0==(N-=o[0]))return;a[1]=N}else if(o[1]===Ua&&s[1]===Wa){var w=100*s[0]/n[r===ra?"outerWidth":"outerHeight"];if(0==(w-=o[0]))return;a[1]=w}}else if(r===na){a[1]=[];for(var D,P=Math.min(o.length,s.length),C=0;C<P;C++){var L=o[C],F=s[C];if(L&&F){for(var B=[],H=0;H<2;H++){var G,Y,W=L[H],U=F[H];W[1]===U[1]&&-1<[Wa,Ua].indexOf(W[1])?B.push(U[0]-W[0]):W[1]===Wa&&U[1]===Ua?(G=.01*U[0]*n[C?"clientWidth":"clientHeight"],B.push(G-W[0])):W[1]===Ua&&U[1]===Wa?(Y=100*U[0]/n[C?"clientWidth":"clientHeight"],B.push(Y-W[0])):B.push(0)}to(B,[0,0])?a[1].push(null):(a[1].push(B),D=!0)}else a[1].push(null)}if(!D)return}else if(ho.hasOwnProperty(r)){a[1]=[];for(var X=Math.min(o.length,s.length),K=0;K<X;K++){var z=o[K],V=s[K];if(z&&V&&!Ja(z)&&!Ja(V))if(z.k===V.k){var j=[];if("linear"===z.k||"radial"===z.k||"conic"===z.k){var $=z.v,q=V.v;j[0]=[];for(var Z=n.clientWidth,J=to($,q),Q=0,tt=Math.min($.length,q.length);Q<tt;Q++){var et=$[Q],rt=q[Q],nt=[];nt.push([rt[0][0]-et[0][0],rt[0][1]-et[0][1],rt[0][2]-et[0][2],rt[0][3]-et[0][3]]),et[1]&&rt[1]&&(et[1][1]===rt[1][1]?nt.push(rt[1][0]-et[1][0]):et[1][1]===Wa&&rt[1][1]===Ua?nt.push(rt[1][0]*Z*.01-et[1][0]):et[1][1]===Ua&&rt[1][1]===Wa&&nt.push(100*rt[1][0]/Z-et[1][0])),j[0].push(nt)}if("linear"===z.k){var it=Array.isArray(z.d);if(Array.isArray(V.d)!==it){a[1].push(null);continue}if(it){var at=[V.d[0]-z.d[0],V.d[1]-z.d[1],V.d[2]-z.d[2],V.d[3]-z.d[3]];if(J&&to(at,[0,0,0,0])){a[1].push(null);continue}j[1]=at}else{var ot=V.d-z.d;if(J&&0==ot){a[1].push(null);continue}j[1]=ot}}else if("radial"===z.k){var st=Array.isArray(z.z);if(Array.isArray(V.z)!==st){a[1].push(null);continue}if(st){j[2]=[];for(var ht=0;ht<5;ht++){var lt=z.z[ht];void 0===lt&&(lt=1);var ct=V.z[ht];void 0===ct&&(ct=1),j[2].push(ct-lt)}J&&to(a[4],[0,0,0,0,0])&&a[1].push(null)}else{j[2]=[];for(var ut=0;ut<2;ut++){var _t,ft,dt=z.p[ut],pt=V.p[ut];dt[1]===pt[1]?j[2].push(pt[0]-dt[0]):dt[1]===Wa&&pt[1]===Ua?(_t=.01*pt[0]*n[ut?"clientWidth":"clientHeight"],j[2].push(_t-dt[0])):dt[1]===Ua&&pt[1]===Wa&&(ft=100*pt[0]/n[ut?"clientWidth":"clientHeight"],j[2].push(ft-dt[0]))}J&&to(a[3],[0,0])&&a[1].push(null)}}else if("conic"===z.k){j[1].push(s.d-o.d),j[2]=[];for(var vt=0;vt<2;vt++){var yt,gt,mt=o.p[vt],Et=s.p[vt];mt[1]===Et[1]?j[2].push(Et[0]-mt[0]):mt[1]===Wa&&Et[1]===Ua?(yt=.01*Et[0]*n[vt?"clientWidth":"clientHeight"],j[2].push(yt-mt[0])):mt[1]===Ua&&Et[1]===Wa&&(gt=100*Et[0]/n[vt?"clientWidth":"clientHeight"],j[2].push(gt-mt[0]))}J&&0!==a[2]&&to(a[3],[0,0])&&a[1].push(null)}}else to(s,z)&&a[1].push(null),j[0]=[V[0]-z[0],V[1]-z[1],V[2]-z[2],V[3]-z[3]];a[1].push(j)}else a[1].push(null);else a[1].push(null)}}else if(ao.hasOwnProperty(r)){if(s=s[0],o=o[0],to(s,o)||0===s[3]&&0===o[3])return;a[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}else if(so.hasOwnProperty(r)){if(s[0][0]===o[0][0]&&s[0][1]===o[0][1]&&s[1][0]===o[1][0]&&s[1][1]===o[1][1])return;a[1]=[];for(var Tt=0;Tt<2;Tt++)s[Tt][1]===o[Tt][1]?a[1].push(s[Tt][0]-o[Tt][0]):o[Tt][1]===Wa&&s[Tt][1]===Ua?a[1].push(.01*s[Tt][0]*n[Tt?"outerHeight":"outerWidth"]-o[Tt][0]):o[Tt][1]===Ua&&s[Tt][1]===Wa?a[1].push(100*s[Tt][0]/n[Tt?"outerHeight":"outerWidth"]-o[Tt][0]):a[1].push(0)}else if(oo.hasOwnProperty(r)){if(o[1]===Ya||s[1]===Ya)return;var Ot,Mt,At=n.computedStyle,xt=(n.domParent||n).computedStyle,Rt=0;if(o[1]===s[1]?Rt=s[0]-o[0]:o[1]===Wa&&s[1]===Ua?(r===ia?Ot=s[0]*xt[r]*.01:r===aa&&"row"===At[oa]||r===sa||-1<[Ea,ga,_a,ua,ca,la,va,pa,da,fa].indexOf(r)?Ot=s[0]*xt[sa]*.01:(r===aa||r===ha||-1<[ya,ma].indexOf(r))&&(Ot=s[0]*xt[ha]*.01),Rt=Ot-o[0]):o[1]===Ua&&s[1]===Wa?(r===ia?Mt=100*s[0]/xt[r]:r===aa&&"row"===At[oa]||r===sa||-1<[Ea,ga,_a,ua,ca,la,va,pa,da,fa].indexOf(r)?Mt=100*s[0]/xt[sa]:(r===aa||r===ha||-1<[ya,ma].indexOf(r))&&(Mt=100*s[0]/xt[ha]),Rt=Mt-o[0]):r===Ta&&(o[1]===Wa&&s[1]===Va?Rt=s[0]*At[ia]-o[0]:o[1]===Va&&s[1]===Wa&&(Rt=s[0]/At[ia]-o[0])),0===Rt||isNaN(Rt))return;a[1]=Rt}else if(io.hasOwnProperty(r)){if(ja(o))return;if(io[r][i]&&$a(io[r][i].calDiff)){var St=io[r][i].calDiff;if(n.isMulti){for(var bt=[],kt=0,It=Math.min(o.length,s.length);kt<It;kt++)bt.push(St(o[kt],s[kt]));return bt}a[1]=St(o,s)}else if(n.isMulti)if("points"===r||"controls"===r){if(ja(s)||ja(o)||to(o,s))return;a[1]=[];for(var Nt=0,wt=Math.min(o.length,s.length);Nt<wt;Nt++){var Dt=o[Nt],Pt=s[Nt];if(ja(Dt)||ja(Pt))a[1].push(null);else{for(var Ct=[],Lt=0,Ft=Math.min(Dt.length,Pt.length);Lt<Ft;Lt++){var Bt=Dt[Lt],Ht=Pt[Lt];if(ja(Bt)||ja(Ht))Ct.push(null);else{for(var Gt=[],Yt=0,Wt=Math.max(Bt.length,Ht.length);Yt<Wt;Yt++){var Ut=Bt[Yt],Xt=Ht[Yt];ja(Ut)||ja(Xt)?Gt.push(0):Gt.push(Xt-Ut)}Ct.push(Gt)}}a[1].push(Ct)}}}else if("controlA"===r||"controlB"===r){if(ja(s)||ja(o)||to(o,s))return;a[1]=[];for(var Kt=0,zt=Math.min(o.length,s.length);Kt<zt;Kt++){var Vt=o[Kt],jt=s[Kt];ja(Vt)||ja(jt)?a[1].push(null):a[1].push([jt[0]-Vt[0],jt[1]-Vt[1]])}}else{if(s===o||to(s,o)||"edge"===r||"closure"===r)return;for(var $t=[],qt=0,Zt=Math.min(o.length,s.length);qt<Zt;qt++){var Jt=o[qt],Qt=s[qt];(ja(Jt)||ja(Qt))&&$t.push(0),$t.push(Qt-Jt)}a[1]=$t}else if("points"===r||"controls"===r){if(ja(s)||ja(o)||to(o,s))return;a[1]=[];for(var te=0,ee=Math.min(o.length,s.length);te<ee;te++){var re=o[te],ne=s[te];if(ja(re)||ja(ne))a[1].push(null);else{for(var ie=[],ae=0,oe=Math.max(re.length,ne.length);ae<oe;ae++){var se=re[ae],he=ne[ae];ja(se)||ja(he)?ie.push(0):ie.push(he-se)}a[1].push(ie)}}}else if("controlA"===r||"controlB"===r){if(ja(s)||ja(o)||to(o,s))return;a[1]=[s[0]-o[0],s[1]-o[1]]}else{if(s===o||"edge"===r||"closure"===r)return;a[1]=s-o}}else{if(r!==Oa&&r!==Ma)return;if(s===o)return;a[1]=s-o}return a}(r[Fa],n[Fa],t,i,a);e&&r[Ga].push(e)}),n}function po(t,e,k,I){var r,n,i,a,o,N=ro(t[Fa],e),s=((r=t[Ha])&&(i=/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(r)?(n=r.match(/[\d.]+/g),$i.cubicBezier(n[0],n[1],n[2],n[3])):(i=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(r))?(a=parseInt(i[1]),o=i[2],function(t){if(a&&0<a){var e=1/a;return("start"===o?Math.ceil(t/e):Math.floor(t/e))/a}return t}):$i[r]),i);s&&s!==eo&&(k=s(k));for(var w=t[Ga],D=I.tagName,h=0,l=w.length;h<l;h++)!function(t){var e=Pt(w[t],2),r=e[0],_=e[1],n=N[r];if(r===Aa){n=n||(N[r]=[[Ia,[1,0,0,1,0,0]]]);for(var i=0;i<6;i++)n[0][1][i]+=_[i]*k}else if(uo.hasOwnProperty(r))_&&(n[0]+=_*k);else if(r===Zi)(n=n||(N[r]=[["blur",0]]))[0][1]+=_*k;else if(so.hasOwnProperty(r))for(var a=0;a<2;a++)n[a][0]+=_[a]*k;else if(r===Ji)0!==_[0]&&(n[0][0]+=_[0]*k),0!==_[1]&&(n[1][0]+=_[1]*k);else if(r===ea)for(var o=0,s=Math.min(n.length,_.length);o<s;o++){for(var h=0;h<4;h++)n[o][h]+=_[o][h]*k;for(var l=0;l<4;l++)n[o][4][l]+=_[o][4][l]*k}else if(r===na)n.forEach(function(t,e){_[e]&&(t[0][0]+=_[e][0]*k,t[1][0]+=_[e][1]*k)});else if(r===Qi||r===ta)n.forEach(function(t,e){_[e]&&(t[0]+=_[e]*k)});else if(ho.hasOwnProperty(r))n.forEach(function(t,e){var r=_[e];if(r){var n=Pt(r,4),i=n[0],a=n[1],o=n[2],s=n[3];if(co.hasOwnProperty(t.k)){for(var h=0,l=Math.min(t.v.length,i.length);h<l;h++){var c=t.v[h],u=i[h];c[0][0]+=u[0][0]*k,c[0][1]+=u[0][1]*k,c[0][2]+=u[0][2]*k,c[0][3]+=u[0][3]*k,c[1]&&u[1]&&(c[1][0]+=u[1]*k)}"linear"===t.k&&void 0!==t.d&&void 0!==a&&(Array.isArray(a)?(t.d[0]+=a[0]*k,t.d[1]+=a[1]*k,t.d[2]+=a[2]*k,t.d[3]+=a[3]*k):t.d+=a*k),"radial"===t.k?void 0!==t.z&&void 0!==s?(t.z[0]+=s[0]*k,t.z[1]+=s[1]*k,t.z[2]+=s[2]*k,t.z[3]+=s[3]*k,t.z[4]+=s[4]*k):void 0!==t.p&&void 0!==o&&(t.p[0][0]+=o[0]*k,t.p[1][0]+=o[1]*k):"conic"===t.k&&void 0!==t.d&&void 0!==a&&(t.d+=a*k,t.p[0][0]+=o[0]*k,t.p[1][0]+=o[1]*k)}else t[0]+=i[0]*k,t[1]+=i[1]*k,t[2]+=i[2]*k,t[3]+=i[3]*k}});else if(ao.hasOwnProperty(r))(n=n[0])[0]+=_[0]*k,n[1]+=_[1]*k,n[2]+=_[2]*k,n[3]+=_[3]*k;else if(io.hasOwnProperty(r)){var c=N[r];if(io[r][D]&&$a(io[r][D].calIncrease)){var u=io[r][D].calIncrease;I.isMulti?N[r]=c.map(function(t,e){return u(t,_[e],k)}):N[r]=u(c,_,k)}else if(I.isMulti)if("points"===r||"controls"===r)for(var f=0,d=Math.min(c.length,_.length);f<d;f++){var p=c[f],v=_[f];if(!ja(p)&&!ja(v))for(var y=0,g=Math.min(p.length,v.length);y<g;y++){var m=p[y],E=v[y];if(!ja(m)&&!ja(E))for(var T=0,O=Math.min(m.length,E.length);T<O;T++)ja(m[T])||ja(E[T])||(m[T]+=E[T]*k)}}else"controlA"===r||"controlB"===r?_.forEach(function(t,e){var r=c[e];if(!ja(t)&&!ja(r))for(var n=0,i=Math.min(r.length,t.length);n<i;n++){var a=r[n],o=t[n];ja(a)||ja(o)||(r[n]+=o*k)}}):_.forEach(function(t,e){ja(t)||ja(c[e])||(c[e]+=t*k)});else if("points"===r||"controls"===r)for(var M=0,A=Math.min(c.length,_.length);M<A;M++){var x=c[M],R=_[M];if(!ja(x)&&!ja(R))for(var S=0,b=Math.min(x.length,R.length);S<b;S++)ja(x[S])||ja(R[S])||(x[S]+=R[S]*k)}else"controlA"===r||"controlB"===r?(ja(c[0])||ja(_[0])||(c[0]+=_[0]*k),ja(c[1])||ja(_[1])||(c[1]+=_[1]*k)):ja(c)||ja(_)||(N[r]+=_*k)}else r!==Oa&&r!==Ma||(N[r]+=_*k)}(h);return N}function vo(t,e){return $a(t)&&(e=t,t={}),[t||{},e]}Object.assign(uo,oo),Object.assign(uo,lo);var yo,go=0,mo=12,Eo=13,To=30,Oo=31,Mo=41,Ao=42,xo=function(){t(y,Pi);var v=e(y);function y(t,i,e){var r,a;g(this,y),(r=v.call(this)).__id=go++,i=Qa(i||[]),i=Array.isArray(i)?i.filter(function(t){return t&&Za(t)}):i&&Za(i)?(a=[],Object.keys(i).forEach(function(t){var e=i[t];if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++){(a[r]=a[r]||{offset:r/(n-1)})[t]=e[r]}}),a):[],qa(e)&&(r.__options={duration:e},e=r.__options);var n=r.__options=e||{duration:0},o=t.root,s=r.__config=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,o,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,n.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,o.__config,!1],h=r.iterations=n.iterations,l=r.duration=n.duration,c=Pt(r.__init(i,h,l,n.easing,t),4),u=c[0],_=c[1],f=c[2],d=c[3];s[mo]=u,s[Eo]=_,s[To]=f,s[Oo]=d,2===u.length&&(s[Mo]=!0,s[Ao]=u[1][Ba]);var p=parseInt(n.fps)||0;return p<=0&&(p=60),r.fps=p,r.spfLimit=n.spfLimit,r.delay=n.delay,r.endDelay=n.endDelay,r.playbackRate=n.playbackRate,r.fill=n.fill,r.iterations=n.iterations,r.direction=n.direction,r}return l(y,[{key:"__init",value:function(n,t,e,r,i){if(n.length<1)return[[],[],[],{}];for(var a,o=i.tagName,s=0,h=n.length;s<h;s++)(function(t,e){var r=n[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return n.splice(t,1),s=--t,h=--e;if(r.offset<=-1)return n.splice(t,1),s=--t,h=--e}Object.keys(r).forEach(function(t){Wt.hasOwnProperty(t)&&Wt.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||be.isValid(o,t)||delete r[t]}),s=t,h=e})(s,h);1===n.length?(n[0]=Qa(n[0]),1===n[0].offset?n.unshift({offset:0}):((a=Qa(n[0])).offset=1,n.push(a))):n.forEach(function(t,e){n[e]=Qa(t)});var l=n[0];l.hasOwnProperty("offset")&&0<l.offset?(l={offset:0},n.unshift(l)):l.offset=0;var c=n[n.length-1];c.hasOwnProperty("offset")&&c.offset<1?(c={offset:1},n.push(c)):c.offset=1;for(var u=1,_=n.length;u<_;u++){if(!(v=n[u]).hasOwnProperty("offset")){for(var f=void 0,d=u+1;d<_&&!(f=n[d]).hasOwnProperty("offset");d++);for(var p=d-u+1,v=n[u-1],y=(f.offset-v.offset)/p,g=u;g<d;g++){n[g].offset=v.offset+y*(g+1-u)}u=d}}var m=[];n.forEach(function(t){m.push(function(t,e,r){var n=t.offset,i=t.easing;delete t.offset,delete t.easing,t=ln.normalize(t);var a=[];return a[Fa]=t,a[Ba]=n*e,a[Ha]=i||r,a[Ga]=[],a}(t,e,r))});var E,T,O,M,A,x,R,S,b=(T=i,O={},M=[],(E=m).forEach(function(t){var e=t[Fa];Object.keys(e).forEach(function(t){void 0===e[t]||O.hasOwnProperty(t)||(O[t]=!0,io.hasOwnProperty(t)||(t=parseInt(t)),M.push(t))})}),E.forEach(function(t){var e=t[Fa];M.forEach(function(t){e.hasOwnProperty(t)&&!ja(e[t])||(io.hasOwnProperty(t)?e[t]=T.currentProps[t]:e[t]=T.currentStyle[t])})}),M);A=m,x=b,S=(R=i).computedStyle,A.forEach(function(t){var a=t[Fa];x.forEach(function(t){var e,r,n,i=a[t];ja(i)||(t===Aa?(e=R.outerWidth,r=R.outerHeight,n=ri.calMatrix(i,e,r),a[t]=[[Ia,n]]):i[1]===Xa&&(t===xa?a[t]=[Ft.rgba2int(S[t]),Ka]:oo.hasOwnProperty(t)?a[t]=[S[t],Wa]:t===Ra?a[t]=[S[t],Va]:t!==Sa&&t!==ba&&t!==ka||(a[t]=[S[t],za])))})});var k=i.style,I=i.props,N={};b.forEach(function(t){no(o,t)&&(N[t]=I[t]),N[t]=k[t]});for(var w=m.length,D=m[0],P=1;P<w;P++)D=fo(D,m[P],b,i,o);var C=Qa(m).reverse();C.forEach(function(t){t[Ba]=e-t[Ba],t[Ga]=[]}),D=C[0];for(var L=1;L<w;L++){D=fo(D,C[L],b,i,o)}return[m,C,b,N]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[15]=0;var n=r[16],i=r[To],a=r[10];if(t){if(r[14]=r[28]+r[17]+r[29],"finish"===r[22])return;r[22]="finish",r[40]||(r[16]={},e=!0)}else{if(r[21]=r[14]=0,"idle"===r[22])return;r[22]="idle",r[16]={},e=!0}e&&i.forEach(function(t){io.hasOwnProperty(t)?a.__currentProps[t]===n[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===n[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(Pi.FRAME,e,r),t[7]&&(t[7]=!1,this.emit(Pi.PLAY)),$a(t[9])&&(t[9].call(this,e,r),t[9]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[20],n=t[34],i=t[35],a=t[14]=t[15];return n&&(!0===n?e=Math.min(e,1e3/i):0<n&&(e=Math.min(e,n))),1!==r&&0<r&&(e*=r),t[15]+=e,[a,e]}},{key:"play",value:function(t){var e,r,n=this.__config,i=n[23],a=n[17],o=n[22],s=n[mo];return i||a<=0||s.length<1||"running"===o||(this.__cancelTask(),n[9]=t,n[22]="running",n[7]=!0,this.__hasFin=!1,this.__hasCancel=!1,n[27]||(n[27]=!0,e=n[Eo],r=n[36],n[32]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(r)?e:s,n[14]=n[15]=n[25]=0),Bi.offFrame(this),Bi.onFrame(this),n[24]=Bi.__now),this}},{key:"__before",value:function(t){var e,r,n=this.__config,i=n[10],a=n[35],o=n[21],s=n[32],h=n[36],l=n[18],c=n[39],u=n[40],_=n[28],f=n[11],d=n[Mo],p=n[Ao],v=n[17],y=n[29],g=s.length,m=Pt(n[37](n,t),2),E=m[0];if(t=m[1],!n[38]&&a<60){if((t=n[25]+=t)<1e3/a)return void(n[1]=!0);n[25]=0}if(n[38]=!1,!(0<o)&&E<_)return c&&_o((n[33]=s[0])[Fa],n[To],n,f,i),n[45]=!0,void(n[2]=!0);0===o&&(E-=_),0!==E&&!n[45]||(n[45]=!1,n[3]=!0),r=d?(e=E<p?0:1,p):s[e=function t(e,r,n,i){if(e===r)return i[e][Ba]>n?e-1:e;var a=e+(r-e>>1),o=i[a];return o[Ba]===n?a:o[Ba]>n?t(e,Math.max(a-1,e),n,i):t(Math.min(a+1,r),r,n,i)}(0,g-1,E,s)][Ba];var T=e===g-1,O=0;T||(O=d?E/v:(E-r)/(s[e+1][Ba]-r));var M,A,x,R=l-1<=o,S=s[e];n[33]=S,T?(A=E<v+y,x=u&&R?ro(S[Fa],n[To]):R?ro(n[Oo],n[To]):(M=E-v,n[15]=M+t,o=++n[21],n[6]=!0,"alternate"!==h&&"alternate-reverse"!==h?(S=s[0],O=M/(s[1][Ba]-S[Ba]),po(S,n[To],O,i)):ro(S[Fa],n[To])),R&&(A||(n[15]=0,l<=(o=++n[21])&&Bi.offFrame(this)))):x=po(S,n[To],O,i),_o(x,n[To],n,f,i),!T||A&&!R||(n[4]=!0,l<=o&&(n[5]=!0,this.__clean(!0)))}},{key:"__after",value:function(t){var e,r,n,i,a=this.__config;a[0]=!1,a[1]?a[1]=!1:(a[8].call(this,a,t,a[2]),a[2]=!1,a[3]&&(a[3]=!1,this.emit(Pi.BEGIN,a[21])),a[4]&&(a[4]=!1,this.emit(Pi.END,a[21]-1),e=a[36],r=a[mo],n=a[Eo],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(i=a[21]%2==0,a[32]="alternate"===e?i?r:n:i?n:r)),a[6]&&(a[6]=!1,a[3]=!0),a[5]&&(a[3]=a[4]=a[2]=a[5]=a[1]=a[27]=!1,a[22]="finished",this.emit(Pi.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[23],n=e[17],i=this.pending;return r||n<=0||i||(e[22]="paused",this.__cancelTask(),t||this.emit(Pi.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[23],n=e[17],i=e[22];return r||n<=0||"paused"!==i?this:this.play(t)}},{key:"finish",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[mo];if(t||i<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,h=n[11],l=n[Oo];return h&&(s=n[40]?(n[33]=o[o.length-1],o[o.length-1][Fa]):l,h.addRefreshTask({__before:function(){n[0]=!0,_o(s,n[To],n,h,n[10]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Pi.FINISH)),$a(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[mo];if(t||i<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=n[11],h=n[Oo];return s&&s.addRefreshTask({__before:function(){n[0]=!0,_o(h,n[To],n,s,n[10]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,n[0]=!1,n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Pi.CANCEL)),$a(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var n=this.__config,i=n[23],a=n[17],o=n[mo],s=n[28],h=n[29];if(i||a<=0||o.length<1)return this;var l=Pt(vo(e,r),2);return e=l[0],r=l[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+h<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var n=this,i=this.__config,a=i[23],o=i[17],s=i[mo],h=i[28],l=i[29];if(a||o<=0||s.length<1)return this;var c=Pt(vo(e,r),2);return e=c[0],r=c[1],o+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){i[22]="paused",n.__cancelTask(),$a(r)&&r.call(n,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[16],n=t[10];t[To].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],io.hasOwnProperty(t)?n.currentProps[t]=e:n.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var n=this.__config,i=n[17];if(n[22]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=n[28]);i<t&&n[21]<n[18]-1;)n[21]++,t-=i;return n[15]=t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[10]=t,this.__config[43]=t.__config}},{key:"__cancelTask",value:function(){Bi.offFrame(this),this.__config[9]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[23]||(e.removeControl(),t?(e.__clean(),r[10]=null):Bi.nextFrame({__before:function(){e.__clean(),r[10]=null}}),r[24]=0,r[23]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[22]&&"finished"!==t[22]&&re.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[10]}},{key:"root",get:function(){return this.__config[11]}},{key:"keys",get:function(){return this.__config[To]}},{key:"style",get:function(){return this.__config[16]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[17]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[17]!==t&&(e[17]=t,e[Ao]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[28]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[28]!==t&&(e[28]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[29]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[29]!==t&&(e[29]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[35]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[35]!==t&&(t<=0&&(t=60),e[35]=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[18]},set:function(t){t===1/0||Ft.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[18]!==t&&(e[18]=t),t}},{key:"fill",get:function(){return this.__config[19]},set:function(t){t=t||"none";var e=this.__config;return e[19]!==t&&(e[19]=t,this.__checkModify()),e[39]={backwards:!0,both:!0}.hasOwnProperty(t),e[40]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[36]},set:function(t){t=t||"normal";var e=this.__config;return e[36]!==t&&(e[36]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[mo]}},{key:"framesR",get:function(){return this.__config[Eo]}},{key:"playbackRate",get:function(){return this.__config[20]},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1);var e=this.__config;return e[20]!==t&&(e[20]=t),t}},{key:"easing",get:function(){return this.__config[26]}},{key:"startTime",get:function(){return this.__config[24]}},{key:"currentTime",get:function(){return this.__config[14]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[14]!==t&&(e[14]=t,e[15]=t),t}},{key:"nextTime",get:function(){return this.__config[15]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[15]!==t&&(e[15]=t),t}},{key:"pending",get:function(){return"running"!==this.__config[22]}},{key:"finished",get:function(){return"finished"===this.__config[22]}},{key:"playState",get:function(){return this.__config[22]}},{key:"playCount",get:function(){return this.__config[21]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[21]!==t&&(e[21]=t),t}},{key:"isDestroyed",get:function(){return this.__config[23]}},{key:"animating",get:function(){var t=this.__config,e=t[22];return"idle"!==e&&("finished"!==e||t[40]||t[39])}},{key:"spfLimit",get:function(){return this.__config[34]},set:function(t){t=Ft.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[34]!==t&&(e[34]=t),t}},{key:"assigning",get:function(){return this.__config[0]}}]),y}(),Ro=p.STYLE_KEY,So=p.STYLE_KEY,bo=So.TRANSLATE_X,ko=So.TRANSLATE_Y,Io=So.OPACITY,No=So.FILTER,wo={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSFORM:4,TRANSFORM_ALL:7,OPACITY:8,FILTER:16,MIX_BLEND_MODE:32,REPAINT:64,REFLOW:128},Do=(c(yo={},Ro.SCALE_X,!0),c(yo,Ro.SCALE_Y,!0),c(yo,Ro.ROTATE_Z,!0),c(yo,Ro.TRANSFORM,!0),c(yo,Ro.TRANSFORM_ORIGIN,!0),yo),Po=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return be.isIgnore(t)?wo.NONE:t===bo?wo.TRANSLATE_X:t===ko?wo.TRANSLATE_Y:Do.hasOwnProperty(t)?wo.TRANSFORM:t===Io?wo.OPACITY:t===No?wo.FILTER:be.isRepaint(t)?wo.REPAINT:wo.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<wo.REFLOW}},wo);Po.TRANSFORMS=Do;var Co=[8,16,32,64,128,256,512,1024,2048,4096],Lo=[8,8,8,8,8,4,2,1,1,1],Fo=Co[Co.length-1],Bo={},Ho=function(){function u(t,e){g(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,t*=e;var r=this.__canvas=re.getCacheCanvas(t,t,null,e);r&&(this.__offScreen=r),this.__grid=[];for(var n=0;n<this.__total;n++)this.__grid.push(1)}return l(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var n=0;n<t;n++){var i=r*t+n;if(e[i])return e[i]=0,this.__free--,i}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]=1,this.__free++}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"size",get:function(){return this.__size}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offScreen",get:function(){return this.__offScreen}},{key:"canvas",get:function(){return this.offScreen.canvas}},{key:"ctx",get:function(){return this.offScreen.ctx}}],[{key:"getInstance",value:function(t){if(!(Fo<t)){for(var e=Co[0],r=Lo[0],n=0,i=Co.length;n<i&&(e=Co[n],r=Lo[n],!(Co[n]>=t));n++);for(var a,o=Bo[e]=Bo[e]||[],s=0,h=o.length;s<h;s++){var l=o[s];if(l.free){a=l;break}}if(!a){if(!(a=new u(e,r)).offScreen)return void re.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(Co=t.SIZE,Lo=t.NUMBER,Fo=Co[Co.length-1])},get:function(){return{SIZE:Co,NUMBER:Lo}}},{key:"MAX",get:function(){return Fo}}]),u}(),Go=p.STYLE_KEY,Yo=Go.TRANSFORM_ORIGIN,Wo=Go.TRANSFORM,Uo=p.NODE_KEY,Xo=Uo.NODE_OPACITY,Ko=Uo.NODE_CACHE,zo=Uo.NODE_CACHE_FILTER,Vo=Uo.NODE_CACHE_OVERFLOW;function jo(t){var e=t.size,r=t.sx1,n=t.sy1,i=t.width,a=t.height,o=t.bbox,s=re.getCacheCanvas(i,a);return s.coords=[1,1],s.bbox=o,s.size=e,s.sx1=r,s.sy1=n,s.dx=t.dx,s.dy=t.dy,s.dbx=t.dbx,s.dby=t.dby,s.width=i,s.height=a,s}var $o=function(){function p(t,e,r,n,i){g(this,p),this.__init(t,e,r,n,i)}return l(p,[{key:"__init",value:function(t,e,r,n,i){this.__width=t,this.__height=e,this.__bbox=r,this.__page=n,this.__pos=i;var a,o=Pt(n.getCoords(i),2),s=o[0],h=o[1];this.__coords=[s+1,h+1],n.canvas&&(this.__enabled=!0,(a=n.ctx).setTransform([1,0,0,1,0,0]),a.globalAlpha=1,"undefined"!=typeof karas&&karas.debug&&(n.canvas.setAttribute("size",n.size),a.fillStyle="rgba(0, 0, 0, 0.1)",a.beginPath(),a.rect(s+1,h+1,n.size-2,n.size-2),a.closePath(),a.fill()))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=Pt(this.coords,2),n=r[0],i=r[1],a=this.bbox;this.dx=n-a[0],this.dy=i-a[1],this.dbx=t-a[0],this.dby=e-a[1]}},{key:"clear",value:function(){var t,e,r,n,i=this.ctx;this.enabled&&i&&this.available&&(i.setTransform([1,0,0,1,0,0]),e=(t=Pt(this.coords,2))[0],r=t[1],n=this.page.size,i.clearRect(e-1,r-1,n,n)),this.__available=!1}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t){var e,r,n,i,a;Ft.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]),e+=2,r+=2,(n=Ho.getInstance(Math.max(e,r)))?(i=n.page,a=n.pos,this.__init(e,r,t,i,a)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"coords",get:function(){return this.__coords}}],[{key:"getInstance",value:function(t){if(!(isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3]))){var e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]);e+=2,r+=2;var n=Ho.getInstance(Math.max(e,r));if(n)return new p(e,r,t,n.page,n.pos)}}},{key:"genBlur",value:function(t,e){var r=Pt(t.coords,2),n=r[0],i=r[1],a=t.size,o=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox,_=re.getCacheCanvas(l,c);_.ctx.drawImage(o,n-1,i-1,l,c,0,0,l,c),_.draw();var f=re.getCacheWebgl(l,c);return wi.gaussBlur(_,f,e,l,c),f.bbox=u,f.coords=[1,1],f.size=a,f.sx1=s,f.sy1=h,f.dbx=t.dbx,f.dby=t.dby,f.width=l,f.height=c,f}},{key:"genMask",value:function(t,e,r,n,i){for(var o=jo(t),a=[];e&&e.isMask;)a.push(e),e=e.next;var s=Pt(o.coords,2),h=s[0],l=s[1],c=o.ctx,u=o.dbx,_=o.dby;i[0]+=h+u,i[1]+=l+_;var f=ri.calMatrixByOrigin(n,i);return a.forEach(function(t){var e=t.__config,r=e[Vo],n=e[zo],i=e[Ko],a=r&&r.available&&r;(a=(a=a||n&&n.available&&n)||i&&i.available&&i)?(c.globalAlpha=e[Xo],p.drawCache(a,o,t.computedStyle[Wo],[1,0,0,1,0,0],t.computedStyle[Yo].slice(0),f)):re.error("CacheMask is oversize")}),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.globalCompositeOperation=r?"source-out":"source-in",p.drawCache(t,o),c.globalCompositeOperation="source-over",o.draw(c),o}},{key:"genOverflow",value:function(t,e){var r=t.bbox,n=e.sx,i=e.sy,a=e.outerWidth,o=e.outerHeight,s=n+a,h=i+o;if(r[0]<n||r[1]<i||r[2]>s||r[3]>h){var l=jo(t),c=l.ctx;return c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,p.drawCache(t,l),l.draw(c),c.globalCompositeOperation="destination-in",c.fillStyle="#FFF",c.beginPath(),c.rect(n-r[0]+1,i-r[1]+1,a,o),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",l}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(Ft.equalArr(e,r))return t;var n=r[0]-e[0],i=r[1]-e[1],a=p.getInstance(e);if(a&&a.enabled){var o=Pt(t.coords,2),s=o[0],h=o[1],l=t.canvas,c=t.width,u=t.height,_=Pt(a.coords,2),f=_[0],d=_[1];return a.sx1=t.sx1,a.sy1=t.sy1,a.dx=t.dx+n,a.dy=t.dy+i,a.dbx=t.dbx+n,a.dby=t.dby+i,a.ctx.drawImage(l,s-1,h-1,c,u,n+f-1,i+d-1,c,u),a.__available=!0,t.release(),a}}},{key:"drawCache",value:function(t,e,r,n,i,a){var o,s=Pt(e.coords,2),h=s[0],l=s[1],c=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,d=e.dby,p=Pt(t.coords,2),v=p[0],y=p[1],g=t.canvas,m=t.sx1,E=t.sy1,T=t.dbx,O=t.dby,M=t.width,A=t.height,x=h+m-c+f-T,R=l+E-u+d-O;r&&n&&i&&(i[0]+=x,i[1]+=R,o=ri.calMatrixByOrigin(r,i),n=Lt.multiply(n,o),a&&(n=Ft.equalArr(n,a)?[1,0,0,1,0,0]:(a=Lt.inverse(a),Lt.multiply(a,n))),_.setTransform(n[0],n[1],n[2],n[3],n[4],n[5])),_.drawImage(g,v-1,y-1,M,A,x-1,R-1,M,A)}},{key:"draw",value:function(t,e,r,n){t.globalAlpha=e,t.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]);var i=Pt(n.coords,2),a=i[0],o=i[1],s=n.canvas,h=n.sx1,l=n.sy1,c=n.dbx,u=n.dby,_=n.width,f=n.height;t.drawImage(s,a-1,o-1,_,f,h-1-c,l-1-u,_,f)}},{key:"MAX",get:function(){return Ho.MAX-2}}]),p}();c($o,"NUM",5);var qo=p.STYLE_KEY,Zo=p.STYLE_RV_KEY,Jo=p.style2Upper,Qo=p.STYLE_KEY,ts=Qo.BORDER_TOP_LEFT_RADIUS,es=Qo.BORDER_TOP_RIGHT_RADIUS,rs=Qo.BORDER_BOTTOM_LEFT_RADIUS,ns=Qo.BORDER_BOTTOM_RIGHT_RADIUS,is=Qo.PADDING_LEFT,as=Qo.PADDING_RIGHT,os=Qo.PADDING_TOP,ss=Qo.PADDING_BOTTOM,hs=Qo.MARGIN_LEFT,ls=Qo.MARGIN_TOP,cs=Qo.MARGIN_BOTTOM,us=Qo.MARGIN_RIGHT,_s=Qo.BORDER_LEFT_WIDTH,fs=Qo.BORDER_TOP_WIDTH,ds=Qo.BORDER_BOTTOM_WIDTH,ps=Qo.BORDER_RIGHT_WIDTH,vs=Qo.TOP,ys=Qo.RIGHT,gs=Qo.BOTTOM,ms=Qo.LEFT,Es=Qo.POSITION,Ts=Qo.DISPLAY,Os=Qo.WIDTH,Ms=Qo.HEIGHT,As=Qo.MATRIX,xs=Qo.TRANSLATE_X,Rs=Qo.TRANSLATE_Y,Ss=Qo.TRANSFORM,bs=Qo.SCALE_X,ks=Qo.SCALE_Y,Is=Qo.ROTATE_Z,Ns=Qo.SKEW_X,ws=Qo.SKEW_Y,Ds=Qo.TRANSFORM_ORIGIN,Ps=Qo.BACKGROUND_POSITION_X,Cs=Qo.BACKGROUND_POSITION_Y,Ls=Qo.BACKGROUND_SIZE,Fs=Qo.BACKGROUND_COLOR,Bs=Qo.BACKGROUND_IMAGE,Hs=Qo.BACKGROUND_REPEAT,Gs=Qo.BOX_SHADOW,Ys=Qo.OPACITY,Ws=Qo.Z_INDEX,Us=Qo.BORDER_TOP_STYLE,Xs=Qo.BORDER_RIGHT_STYLE,Ks=Qo.BORDER_BOTTOM_STYLE,zs=Qo.BORDER_LEFT_STYLE,Vs=Qo.FILTER,js=Qo.OVERFLOW,$s=Qo.MIX_BLEND_MODE,qs=Qo.BORDER_TOP_COLOR,Zs=Qo.BORDER_BOTTOM_COLOR,Js=Qo.BORDER_LEFT_COLOR,Qs=Qo.BORDER_RIGHT_COLOR,th=Qo.FONT_STYLE,eh=Qo.COLOR,rh=Qo.VISIBILITY,nh=Qo.POINTER_EVENTS,ih=Qo.BORDER_TOP,ah=Qo.BORDER_RIGHT,oh=Qo.BORDER_BOTTOM,sh=Qo.BORDER_LEFT,hh=p.UPDATE_KEY,lh=hh.UPDATE_NODE,ch=hh.UPDATE_FOCUS,uh=hh.UPDATE_STYLE,_h=hh.UPDATE_OVERWRITE,fh=hh.UPDATE_KEYS,dh=hh.UPDATE_CONFIG,ph=p.STRUCT_KEY.STRUCT_HAS_MASK,vh=p.NODE_KEY,yh=vh.NODE_TAG_NAME,gh=vh.NODE_CACHE_STYLE,mh=vh.NODE_CURRENT_STYLE,Eh=vh.NODE_COMPUTED_STYLE,Th=vh.NODE_STYLE,Oh=vh.NODE_STRUCT,Mh=vh.NODE_OPACITY,Ah=vh.NODE_MATRIX_EVENT,xh=vh.NODE_MATRIX,Rh=vh.NODE_LIMIT_CACHE,Sh=vh.NODE_BLUR_VALUE,bh=vh.NODE_HAS_CONTENT,kh=vh.NODE_REFRESH_LV,Ih=vh.NODE_CACHE,Nh=vh.NODE_CACHE_TOTAL,wh=vh.NODE_CACHE_FILTER,Dh=vh.NODE_CACHE_MASK,Ph=vh.NODE_CACHE_OVERFLOW,Ch=vh.NODE_IS_DESTROYED,Lh=vh.NODE_DEFS_CACHE,Fh=R.AUTO,Bh=R.PX,Hh=R.PERCENT,Gh=R.STRING,Yh=R.INHERIT,Wh=Ft.clone,Uh=Ft.int2rgba,Xh=Ft.rgba2int,Kh=Ft.joinArr,zh=Ft.isNil,Vh=ln.calRelative,jh=kn.canvasPolygon,$h=kn.svgPolygon,qh=be.GEOM,Zh=Po.contain,Jh=Po.NONE,Qh=Po.TRANSFORM_ALL,tl=Po.TRANSFORM,el=Po.REFLOW,rl=Po.REPAINT,nl=Po.TRANSLATE_X,il=Po.TRANSLATE_Y,al=Po.OPACITY,ol=Po.FILTER;function sl(t,e,r,n,i,a,o){var s;t===Ct.CANVAS?(n.beginPath(),n.fillStyle!==r&&(n.fillStyle=r),e.forEach(function(t){jh(n,t,a,o)}),n.fill(),n.closePath()):t===Ct.SVG&&(s="",e.forEach(function(t){s+=$h(t)}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",r]]}))}function hl(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y){var g,m,E=17<arguments.length&&void 0!==y?y:"fill";Array.isArray(e)&&(O=e[1],g=e[2],m=e[3],e=e[0]);var T,O,M,A,x,R,S=mi.calRadius(r,n,i,a,l,c,u,_,f,d,p,v);S=S||[[r,n],[r+i,n],[r+i,n+a],[r,n+a],[r,n]],O&&(T=[g,m],O=ri.calMatrixByOrigin(O,T),M=Lt.inverse(O),S=S.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Lt.calPoint([t[r],t[r+1]],M);e.push(i[0]),e.push(i[1])}return e})),t===Ct.CANVAS?(O&&(o.save(),A=h.matrixEvent,O=Lt.multiply(A,O),o.setTransform(O[0],O[1],O[2],O[3],O[4],O[5])),o.beginPath(),o.fillStyle!==e&&(o.fillStyle=e),jh(o,S),o[E](),o.closePath(),O&&o.restore()):t===Ct.SVG&&(x=$h(S),h.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",x],["fill",e]]}),O&&(R=h.virtualDom.bb)[R.length-1].props.push(["transform","matrix(".concat(Kh(O,","),")")]))}var ll=[ts,es,ns,rs];function cl(t,e,r){return t[1]===Bh?t[0]:t[1]===Hh?(e-r)*t[0]*.01:0}var ul,_l,fl,dl,pl,vl=function(){t(R,S);var i=e(R);function R(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};g(this,R),r=i.call(this),Array.isArray(e)?r.props=Ft.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];var n=r.__config;return n[yh]=t,n[gh]=r.__cacheStyle,n[mh]=r.__currentStyle,n[Eh]=r.__computedStyle,n[kh]=el,n[Th]=r.__style,n[Ah]=[],n[Lh]=r.__cacheDefs,r}return l(R,[{key:"__structure",value:function(t,e,r){var n=ot(at(R.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(n[ph]=this.__hasMask),this.__config[Oh]=n}},{key:"__mp",value:function(n,i,a){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=qo[Jo("margin"+t)],r=qo[Jo("padding"+t)];i[e]=o.__mpWidth(n[e],a),i[r]=o.__mpWidth(n[r],a)})}},{key:"__mpWidth",value:function(t,e){return t[1]===Bh?t[0]:t[1]===Hh?t[0]*e*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[is]+r[as],this.__clientHeight=e+=r[os]+r[ss],this.__offsetWidth=t+=r[_s]+r[ps],this.__offsetHeight=e+=r[fs]+r[ds],this.__outerWidth=t+r[hs]+r[us],this.__outerHeight=e+r[ls]+r[cs]}},{key:"__layout",value:function(t,e,r){ln.computeReflow(this,this.isShadowRoot);var n,i,a,o,s,h,l,c,u,_=t.w,f=this.isDestroyed,d=this.currentStyle,p=this.computedStyle,v=this.__config,y=p[Ts],g=d[Os],m=d[Es];if(this.__cancelCache(),this.__layoutData=Wh(t),v[kh]=el,v[Rh]=!1,!e){var E=this.next;if(!this.isMask&&E&&E.isMask){for(var T=0;E&&E.isMask;)T++,E=E.next;this.__hasMask=T}}if(f||"none"===y)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=p[Os]=p[Ms]=0,void this.__layoutNone();if(r||this.__mp(d,p,_),g[1]!==Fh)switch(g[1]){case Bh:_=g[0];break;case Hh:_*=.01*g[0]}this.__ox=this.__oy=0,"flex"===y?this.__layoutFlex(t,e):"inline"===y?this.__layoutInline(t,e):this.__layoutBlock(t,e),"relative"===m?(n=d[vs],i=d[ys],a=d[gs],o=d[ms],s=this.parent,n[1]!==Fh?(h=Vh(d,vs,n,s),this.__offsetY(h),p[vs]=h,p[gs]="auto"):a[1]!==Fh?(l=Vh(d,gs,a,s),this.__offsetY(-l),p[gs]=l,p[vs]="auto"):p[vs]=p[gs]="auto",o[1]!==Fh?(c=Vh(d,ms,o,s,!0),this.__offsetX(c),p[ms]=c,p[ys]="auto"):i[1]!==Fh?(u=Vh(d,ys,i,s,!0),this.__offsetX(-u),p[ys]=u,p[ms]="auto"):p[ms]=p[ys]="auto"):"absolute"!==d[Es]&&(p[vs]=p[gs]=p[ms]=p[ys]="auto"),this.__sx=this.x+this.ox,this.__sy=this.y+this.oy;var O=p[Os]=this.width,M=p[Ms]=this.height;e&&this.__ioSize(O,M);var A,x=this.__animateRecords;x&&(this.__animateRecords=null,x.list.forEach(function(t){t.target.vd instanceof R&&(t.target=t.target.vd)}),A=x.controller||this.root.animateController,x.options&&!1===x.options.autoPlay?A.__records=A.__records.concat(x.list):(A.__auto=A.__auto.concat(x.list),A.__playAuto()))}},{key:"__layoutNone",value:function(){this.computedStyle[Ts]="none"}},{key:"__preLayout",value:function(t){var e=t.x,r=t.y,n=t.w,i=t.h,a=t.w2,o=t.h2;this.__x=e,this.__y=r;var s,h,l=this.currentStyle,c=this.computedStyle,u=l[Os],_=l[Ms],f=c[fs],d=c[ps],p=c[ds],v=c[_s],y=c[ls],g=c[us],m=c[cs],E=c[hs],T=c[os],O=c[as],M=c[ss],A=c[is];if(void 0!==a)s=!0,n=a;else if(u[1]!==Fh)switch(s=!0,u[1]){case Bh:n=u[0];break;case Hh:n*=.01*u[0]}if(void 0!==o)h=!0,i=o;else if(_[1]!==Fh)switch(h=!0,_[1]){case Bh:i=_[0];break;case Hh:i*=.01*_[0]}return e+=v+E+A,t.x=e,r+=f+y+T,t.y=r,u[1]===Fh&&(n-=v+d+E+g+A+O),_[1]===Fh&&(i-=f+p+y+m+T+M),{fixedWidth:s,fixedHeight:h,x:e,y:r,w:n,h:i}}},{key:"__marginAuto",value:function(t,e){var r,n=t[Es],i=t[hs],a=t[us],o=t[Os];"absolute"===n||o===Fh||i[1]!==Fh||a[1]!==Fh||(r=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-r),!0)}},{key:"__calMatrix",value:function(t,e,n,i,r,a,o,s){var h,l,c,u,_,f,d,p=e[As];return p&&t<el&&!Zh(t,tl)?(u=l=0,Zh(t,nl)&&(h=n[xs],l=(h=zh(h)?0:h[1]===Hh?h[0]*this.outerWidth*.01:h[0])-(i[xs]||0),i[xs]=h,i[Ss][4]+=l,p[4]+=l),Zh(t,il)&&(c=n[Rs],u=(c=zh(c)?0:c[1]===Hh?c[0]*this.outerHeight*.01:c[0])-(i[Rs]||0),i[Rs]=c,i[Ss][5]+=u,p[5]+=u),e[As]=p):(void 0===r&&(r=this.sx,a=this.sy,o=this.outerWidth,s=this.outerHeight),void 0===e[Ds]&&(e[Ds]=!0,p=null,i[Ds]=ri.calOrigin(n[Ds],o,s)),void 0!==e[Ss]&&void 0!==e[xs]&&void 0!==e[Rs]&&void 0!==e[Is]&&void 0!==e[bs]&&void 0!==e[ks]&&void 0!==e[Ns]&&void 0!==e[ws]||(e[Ss]=e[xs]=e[Rs]=e[Is]=e[bs]=e[ks]=e[Ns]=e[ws]=!0,p=null,n[Ss]?_=ri.calMatrix(n[Ss],o,s):(f=[],[xs,Rs,Is,Ns,ws,bs,ks].forEach(function(t){delete i[t];var e,r=n[t];zh(r)||(i[t]=r[0],e=t===bs||t===ks,1===r[0]&&e||!e&&0===r[0]||(r[1]===Hh&&(t===xs?i[t]=r[0]*o*.01:t===Rs&&(i[t]=r[0]*s*.01)),f.push([t,r])))}),f.length&&(_=ri.calMatrix(f,o,s))),i[Ss]=_||[1,0,0,1,0,0]),p||((d=i[Ds].slice(0))[0]+=r||0,d[1]+=a||0,p=e[As]=ri.calMatrixByOrigin(i[Ss],d))),p}},{key:"__calCache",value:function(i,t,a,o,e,_,r,f,n,s,h,l,c,u,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k){var I,N,w,D,P,C,L,F,B,H,G,Y,W=this;this.__calMatrix(t,_,r,f,n,s,c,u),rl<=t?(void 0===_[Ps]&&(_[Ps]=!0,I=r[Ps],f[Ps]=(I||[]).map(function(t){return t[1]===Bh?t[0]:t[0]+"%"})),void 0===_[Cs]&&(_[Cs]=!0,N=r[Cs],f[Cs]=(N||[]).map(function(t){return t[1]===Bh?t[0]:t[0]+"%"})),void 0===_[Ls]&&(_[Ls]=!0,f[Ls]=(r[Ls]||[]).map(function(t){return r=h,n=l,i=[],t.forEach(function(t,e){t[1]===Bh?i.push(t[0]):t[1]===Hh?i.push(t[0]*(e?n:r)*.01):t[1]===Fh?i.push(-1):t[1]===Gh&&i.push("contain"===t[0]?-2:-3)}),i;var r,n,i})),void 0===_[Bs]&&(w=f[Bs]=r[Bs],_[Bs]=w.map(function(t,e){if(!t)return null;if(Ft.isString(t)){var n=W.__loadBgi[e]=W.__loadBgi[e]||{},r=re.IMG[Bs];return r&&r.state===re.LOADED?(n.url=Bs,n.source=r.source,n.width=r.width,n.height=r.height):n.url!==t&&(n.url=t,n.source=null,re.measureImg(t,function(t){var e,r;t.success&&t.url===n.url&&!W.isDestroyed&&(n.source=t.source,n.width=t.width,n.height=t.height,(r=(e=W).root).delRefreshTask(n.cb),r.addRefreshTask(n.cb={__before:function(){_[Bs]=void 0;var t={};t[lh]=e,t[ch]=rl,t[dh]=e.__config,r.__addUpdate(e,e.__config,r,r.__config,t)}}))},{width:h,height:l})),!0}return t&&t.k?W.__gradient(i,a,o,M,S,A,b,h,l,t):void 0})),void 0===_[Gs]&&(_[Gs]=!0,f[Gs]=r[Gs]),[Ys,Ws,Us,Xs,Ks,zs,Hs,Vs,js,$s].forEach(function(t){f[t]=r[t]}),[Fs,qs,Qs,Zs,Js].forEach(function(t){void 0===_[t]&&(_[t]=Uh(f[t]=r[t][0]))}),void 0!==_[ts]&&void 0!==_[es]&&void 0!==_[ns]&&void 0!==_[rs]||(_[ts]=_[es]=_[ns]=_[rs]=!0,F=c,B=u,H=r,G=f,Y=!0,ll.forEach(function(t){G[t]=H[t].map(function(t,e){return 0<t[0]?(Y=!1,t[1]===Bh?Math.max(0,t[0]):Math.max(0,t[0]*(e?B:F)*.01)):0})}),Y||ll.forEach(function(t,e){var r,n=e%2==0?0:1,i=n?B:F,a=G[t],o=G[ll[(e+1)%4]];a[n]+o[n]>i&&(r=.5*i,a[n]>=r&&o[n]>=r?a[n]=o[n]=r:a[n]>r?a[n]=i-o[n]:o[n]>r&&(o[n]=i-a[n]))})),D=f[ts],P=f[es],C=f[ns],L=f[rs],["Top","Right","Bottom","Left"].forEach(function(t){var e,r,n,i,a,o,s,h,l=qo[Jo(t="border"+t)],c=qo[Jo(t+"Width")],u=qo[Jo(t+"Style")];void 0===_[c]&&(_[c]=!0,_[l]=void 0),void 0===_[u]&&(_[u]=!0,_[l]=void 0),void 0===_[l]&&(l===ih?0<d?(e=Math.atan(d/y),r=Math.atan(d/p),_[l]=mi.calPoints(d,f[u],e,r,O,M,A,x,R,S,b,k,0,D,P)):_[l]=[]:l===ah?0<p?(n=Math.atan(p/d),i=Math.atan(p/v),_[l]=mi.calPoints(p,f[u],n,i,O,M,A,x,R,S,b,k,1,P,C)):_[l]=[]:l===oh?0<v?(a=Math.atan(v/y),o=Math.atan(v/p),_[l]=mi.calPoints(v,f[u],a,o,O,M,A,x,R,S,b,k,2,L,C)):_[l]=[]:l===sh&&(0<y?(s=Math.atan(y/d),h=Math.atan(y/v),_[l]=mi.calPoints(y,f[u],s,h,O,M,A,x,R,S,b,k,3,D,L)):_[l]=[]))})):(Zh(t,al)&&(f[Ys]=r[Ys]),Zh(t,ol)&&(f[Vs]=r[Vs]));var U=e&&e.computedStyle;if(r[th][1]===Yh?f[th]=e?U[th]:"normal":_[th]||(f[th]=r[th][0]),_[th]=f[th],r[eh][1]===Yh?(f[eh]=e?U[eh]:[0,0,0,1],_[eh]=Uh(f[eh])):_[eh]||(f[eh]=Xh(r[eh][0]),_[eh]=Uh(f[eh])),r[rh][1]===Yh?f[rh]=e?U[rh]:"visible":_[rh]||(f[rh]=r[rh][0]),_[rh]=f[rh],r[nh][1]===Yh?f[nh]=e?U[nh]:"auto":_[nh]||(f[nh]=r[nh][0]),_[nh]=f[nh],i===Ct.CANVAS){if(t<rl)return this.__hasContent;if("hidden"!==f[rh]){var X=f[Bs];if(X)for(var K=0,z=X.length;K<z;K++){var V=X[K];if(V){if(V.k)return!0;var j=this.__loadBgi[K];if(V===j.url&&j.source)return!0}}if(0<f[Fs][3]){var $=f[Os],q=f[Ms],Z=f[os],J=f[as],Q=f[ss],tt=f[is];if($&&q||Z||J||Q||tt)return!0}for(var et=["Top","Right","Bottom","Left"],rt=0,nt=et.length;rt<nt;rt++){var it=et[rt];if(0<f[qo[Jo("border"+it+"Width")]]&&0<f[qo[Jo("border"+it+"Color")]][3])return!0}var at=f[Gs];if(Array.isArray(at))for(var ot=0,st=at.length;ot<st;ot++){var ht=at[ot];if(ht&&(0<ht[2]||0<ht[3]))return!0}for(var lt=0,ct=ll.length;lt<ct;lt++){var ut=f[ll[lt]];if(0<ut[0]&&0<ut[1])return!0}}}return!1}},{key:"__renderSelf",value:function(ut,c,_t,ft,u){var _,dt=this,t=this.isDestroyed,pt=this.currentStyle,e=this.computedStyle,vt=this.__cacheStyle,f=this.root,yt=this.__config,r=yt[Ih];if(this.__renderSelfData=null,yt[kh]=Jh,t)return{isDestroyed:t,break:!0};if(ut===Ct.SVG&&(_=this.__virtualDom={bb:[],children:[],visibility:"visible"},yt[Nh]?yt[Nh].available||(yt[Nh].available=!0):yt[Nh]={available:!0,release:function(){this.available=!1,delete _.cache}}),"none"===e[Ts])return{break:!0};var n=this.sx,i=this.sy,d=this.width,p=this.height,gt=this.clientWidth,mt=this.clientHeight,v=this.outerWidth,y=this.outerHeight,a=this.__hasMask,o=e[ls],s=e[hs],h=e[os],l=e[as],g=e[ss],m=e[is],Et=e[_s],Tt=e[ps],Ot=e[fs],Mt=e[ds],E=this.__sx1=n+s,At=this.__sx2=E+Et,T=this.__sx3=At+d+m+l,O=this.__sx4=T+Tt,M=this.__sy1=i+o,xt=this.__sy2=M+Ot,A=this.__sy3=xt+p+h+g,x=this.__sy4=A+Mt,R={x1:E,x2:At,x3:T,x4:O,y1:M,y2:xt,y3:A,y4:x},S=this.domParent,b=this.__hasContent=yt[bh]=this.__calCache(ut,c,_t,ft,this.parent,vt,pt,e,n,i,gt,mt,v,y,Ot,Tt,Mt,Et,h,l,g,m,E,At,T,O,M,xt,A,x),k=e[Fs],I=e[qs],N=e[Qs],w=e[Zs],D=e[Js],Rt=e[ts],St=e[es],bt=e[ns],kt=e[rs],P=e[rh],It=e[Hs],Nt=e[Bs],C=e[Ys],L=e[Vs],wt=e[Ls],F=e[Gs],B=e[js],H=e[$s];ut===Ct.CANVAS?(S&&(C*=S.__config[Mh]),yt[Mh]=C):ut===Ct.SVG&&(1===C?delete _.opacity:_.opacity=C,"normal"!==H?_.mixBlendMode=H:delete _.mixBlendMode);var G=this.__matrix=yt[xh]=vt[As],Y=this.__renderMatrix=G;S&&(G=Lt.multiply(S.matrixEvent,G));var W=this.__matrixEvent=yt[Ah];if(W[0]=G[0],W[1]=G[1],W[2]=G[2],W[3]=G[3],W[4]=G[4],W[5]=G[5],ut===Ct.SVG&&(!Zh(c,Qh)&&c<rl||(Lt.isE(Y)?delete _.transform:_.transform="matrix("+Kh(Y,",")+")")),"hidden"===P&&ut===Ct.CANVAS)return u||(_t.globalAlpha=C,_t.setTransform(G[0],G[1],G[2],G[3],G[4],G[5])),R.break=!0,R;ut===Ct.SVG&&(_.visibility=P);var U,X,K,z,V,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht,lt,ct=0,Dt=0;if(u&&ut===Ct.CANVAS){if(!b&&this.__releaseWhenEmpty(r))return R.break=!0,yt[Rh]=!1,R;if(yt[Rh]||r&&r.available||(U=this.bbox,r?r.reset(U):r=$o.getInstance(U),r&&r.enabled?(r.__bbox=U,r.__appendData(E,M),X=r.dbx,K=r.dby,_t=r.ctx,V=(z=Pt(r.coords,2))[0],j=z[1],ct=r.dx,Dt=r.dy,R.x1=E=V+X,R.y1=M=j+K,ct&&(R.x2=At+=ct,R.x3=T+=ct,R.x4=O+=ct),Dt&&(R.y2=xt+=Dt,R.y3=A+=Dt,R.y4=x+=Dt)):(yt[Rh]=!0,r=null)),yt[Ih]=r,yt[Rh])return{limitCache:!0}}return yt[Sh]=0,Array.isArray(L)&&L.forEach(function(t){var e,r,n,i,a,o,s=Pt(t,2),h=s[0],l=s[1];"blur"===h&&(yt[Sh]=l,ut===Ct.CANVAS&&0<l&&!u?(e=f.width,r=f.height,(n=re.getCacheCanvas(e,r)).ctx&&($={ctx:_t,blur:l,target:n,matrix:G},_t=n.ctx)):ut===Ct.SVG&&(rl<=c||Zh(c,ol))&&(0<l&&0<d&&0<p?(a={tagName:"filter",props:[["x",-(i=Lt.int2convolution(l))/v],["y",-i/y],["width",1+2*i/v],["height",1+2*i/y]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",l]]}]},o=ft.add(a),yt[Lh].push(a),_.filter="url(#"+o+")"):delete _.filter))}),a&&(ut!==Ct.CANVAS||u||($?q=$:(Z=f.width,J=f.height,(Q=re.getCacheCanvas(Z,J)).ctx&&(q={ctx:_t,target:Q,matrix:G},_t=Q.ctx)))),"hidden"===B?ut!==Ct.CANVAS||u?ut===Ct.SVG&&(et={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(n,",").concat(i,"L").concat(n+v,",").concat(i,"L").concat(n+v,",").concat(i+y,"L").concat(n,",").concat(i+y,",L").concat(n,",").concat(i)]]}]},rt=ft.add(et),yt[Lh].push(et),_.overflow="url(#"+rt+")"):($||q?tt=$||q:(nt=f.width,it=f.height,(at=re.getCacheCanvas(nt,it)).ctx&&(tt={ctx:_t,target:at,matrix:G},_t=at.ctx)),tt.x=n,tt.y=i,tt.outerWidth=v,tt.outerHeight=y):ut===Ct.SVG&&delete _.overflow,"normal"===H||u||($||q||tt?lt=$||q||tt:(ot=f.width,st=f.height,ht=re.getCacheCanvas(ot,st),lt={ctx:_t,target:ht,mixBlendMode:H,matrix:G},_t=ht.ctx)),ut!==Ct.CANVAS||u||(_t.globalAlpha=C,_t.setTransform(G[0],G[1],G[2],G[3],G[4],G[5])),0<k[3]&&hl(ut,vt[Fs],At,xt,gt,mt,_t,ft,this,Ot,Tt,Mt,Et,Rt,St,bt,kt),Nt&&Nt.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M;if(t)if(Ft.isString(t)){var A=dt.__loadBgi[e];if(A.url===Nt[e]){var x=A.source;if(x){var R=A.width,S=A.height,b=Pt(wt[e],2),k=b[0],I=b[1];-1===k&&-1===I?(k=R,I=S):-2===k?gt<R&&mt<S?(I=S/mt)<=(k=R/gt)?I=(k=gt)*S/R:k=(I=mt)*R/S:gt<R?I=(k=gt)*S/R:mt<S?k=(I=mt)*R/S:(k=R,I=S):-3===k?R<gt&&S<mt?(k=R/gt)<=(I=S/mt)?I=(k=gt)*S/R:k=(I=mt)*R/S:R<gt||!(S<mt)&&(k=R/gt)<=(I=S/mt)?I=(k=gt)*S/R:k=(I=mt)*R/S:-1===k?k=I*R/S:-1===I&&(I=k*S/R);var N,w,D=At+cl(pt[Ps][e],gt,k),P=xt+cl(pt[Cs][e],mt,I),C=D<At||P<xt||gt<k||mt<I,L=0,F=0,B=0,H=0;-1<["repeat-x","repeat"].indexOf(It[e])&&(0<(N=D-At)&&(L=Math.ceil(N/k)),0<(N=At+gt-D-k)&&(F=Math.ceil(N/k))),-1<["repeat-y","repeat"].indexOf(It[e])&&(0<(w=P-xt)&&(B=Math.ceil(w/I)),0<(w=xt+mt-P-I)&&(H=Math.ceil(w/I)));var G,Y,W,U,X,K,z,V,j=[];if(0<L)for(var $=0;$<L;$++){var q=D-($+1)*k;j.push([q,P]),!C&&0===$&&q<At&&(C=!0)}if(0<F)for(var Z=0;Z<F;Z++){var J=D+(Z+1)*k;j.push([J,P]),!C&&Z===F-1&&At+gt<J+k&&(C=!0)}if(0<B)for(var Q=0;Q<B;Q++){var tt=P-(Q+1)*I;j.push([D,tt]),!C&&0===Q&&tt<xt&&(C=!0)}if(0<H)for(var et=0;et<H;et++){var rt=P+(et+1)*I;j.push([D,rt]),!C&&et===H-1&&xt+mt<rt+k&&(C=!0)}if(0<L&&0<B)for(var nt=0;nt<L;nt++)for(var it=0;it<B;it++)j.push([D-(nt+1)*k,P-(it+1)*I]);if(0<F&&0<B)for(var at=0;at<F;at++)for(var ot=0;ot<B;ot++)j.push([D+(at+1)*k,P-(ot+1)*I]);if(0<L&&0<H)for(var st=0;st<L;st++)for(var ht=0;ht<H;ht++)j.push([D-(st+1)*k,P+(ht+1)*I]);if(0<F&&0<H)for(var lt=0;lt<F;lt++)for(var ct=0;ct<H;ct++)j.push([D+(lt+1)*k,P+(ct+1)*I]);ut===Ct.CANVAS?(C&&(_t.save(),hl(ut,"#FFF",At,xt,gt,mt,_t,ft,dt,Ot,Tt,Mt,Et,Rt,St,bt,kt,"clip")),_t.drawImage(x,D,P,k,I),j.forEach(function(t){_t.drawImage(x,t[0],t[1],k,I)}),C&&_t.restore()):ut===Ct.SVG&&(G=xi.matrixResize(R,S,k,I,D,P,gt,mt),Y=[["xlink:href",t],["x",D],["y",P],["width",R],["height",S]],G&&!Lt.isE(G)&&(W=!0,Y.push(["transform","matrix("+Kh(G,",")+")"])),C&&(X=[At,xt],K=[At+gt,xt+mt],W&&(U=Lt.inverse(G),X=Lt.calPoint(X,U),K=Lt.calPoint(K,U)),z={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(X[0],",").concat(X[1],"L").concat(K[0],",").concat(X[1],"L").concat(K[0],",").concat(K[1],"L").concat(X[0],",").concat(K[1],"L").concat(X[0],",").concat(X[1])],["fill","#FFF"]]}]},V=ft.add(z),yt[Lh].push(z),Y.push(["clip-path","url(#"+V+")"])),dt.virtualDom.bb.push({type:"img",tagName:"image",props:Y}),j.forEach(function(t){var e,r=Wh(Y);!W||(e=xi.matrixResize(R,S,k,I,t[0],t[1],gt,mt))&&!Lt.isE(e)&&(r[5][1]="matrix("+Kh(e,",")+")"),r[1][1]=t[0],r[2][1]=t[1],dt.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}else{!t.k||(M=vt[Bs][e])&&("conic"===M.k?(r=ut,n=M.v,i=At,a=xt,o=gt,s=mt,h=_t,l=ft,c=dt,u=Ot,_=Tt,f=Mt,d=Et,p=Rt,v=St,y=bt,g=kt,O=(O=mi.calRadius(i,a,o,s,u,_,f,d,p,v,y,g))||[[i,a],[i+o,a],[i+o,a+s],[i,a+s],[i,a]],r===Ct.CANVAS?(m=h.globalAlpha,h.globalAlpha=.5*m,h.save(),h.beginPath(),jh(h,O),h.clip(),h.closePath(),n.forEach(function(t){h.beginPath(),jh(h,t[0]),h.fillStyle=t[1],h.fill(),h.closePath()}),h.restore(),h.globalAlpha=m):r===Ct.SVG&&(E={tagName:"clipPath",children:[{tagName:"path",props:[["d",$h(O)],["fill","#FFF"]]}]},c.__config[Lh].push(E),T=l.add(E),n.forEach(function(t){c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",$h(t[0])],["fill",t[1]],["clip-path","url(#"+T+")"]]})}))):hl(ut,M.v,At,xt,gt,mt,_t,ft,dt,Ot,Tt,Mt,Et,Rt,St,bt,kt))}}),F&&F.forEach(function(t){!function(t,e,r,n,i,a,o,s,h,l,c){var u=Pt(n,6),_=u[0],f=u[1],d=u[2],p=u[3],v=u[4],y=u[5],g=Uh(v),m=2*Math.abs(d)+2*Math.abs(p)+2*Math.abs(_)+2*Math.abs(f),E=[[a,o],[s,o],[s,h],[a,h],[a,o]],T=[[a-m,o-m],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m]];if(0<v[3]&&(0<d||0<p))if(t===Ct.CANVAS){if(e.save(),e.beginPath(),"inset"===y){var O=a+_+p,M=o+f+p,A=s+_-p,x=h+f-p,R=[[O,M],[A,M],[A,x],[O,x]],S=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[R[0][0],R[0][1],R[2][0],R[2][1]]);if(!S)return;S=[[S[0],S[1]],[S[2],S[1]],[S[2],S[3]],[S[0],S[3]],[S[0],S[1]]],p?(jh(e,S),jh(e,E.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),jh(e,E),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),jh(e,S),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,jh(e,[[O,M],[A,M],[A,x],[a-m,x],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,x],[O,x],[O,M]])):(jh(e,E),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,jh(e,[[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]]))}else{var b=a+_-p,k=o+f-p,I=s+_+p,N=h+f+p,w=[[b,k],[I,k],[I,N],[b,N]],D=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[w[0][0],w[0][1],w[2][0],w[2][1]]);p?(jh(e,E),jh(e,w.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),jh(e,w),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),D&&jh(e,[[D[0],D[1]],[D[2],D[1]],[D[2],D[3]],[D[0],D[3]],[D[0],D[1]]].reverse()),jh(e,E),jh(e,w),jh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,jh(e,w)):(jh(e,E),jh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,jh(e,E))}e.fill(),e.closePath(),e.restore()}else if(t===Ct.SVG){var P=Lt.int2convolution(d);if("inset"===y){var C,L,F,B,H,G,Y,W=a+_+p,U=o+f+p,X=s+_-p,K=h+f-p,z=[[W,U],[X,U],[X,K],[W,K]],V=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[z[0][0],z[0][1],z[2][0],z[2][1]]);if(!V)return;V=[[V[0],V[1]],[V[2],V[1]],[V[2],V[3]],[V[0],V[3]],[V[0],V[1]]],p?(C={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},i.__config[Lh].push(C),L=r.add(C),F={tagName:"clipPath",children:[{tagName:"path",props:[["d",$h(V)+$h(E.slice(0).reverse())],["fill","#FFF"]]}]},B=r.add(F),i.__config[Lh].push(F),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",$h(E)],["fill",g],["clip-path","url(#"+B+")"]]}),C={tagName:"clipPath",children:[{tagName:"path",props:[["d",$h(V)],["fill","#FFF"]]}]},B=r.add(C),i.__config[Lh].push(C),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",$h([[W,U],[X,U],[X,K],[a-m,K],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,K],[W,K],[W,U]])],["fill","#FFF"],["filter","url(#"+L+")"],["clip-path","url(#"+B+")"]]})):(H={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},G=r.add(H),i.__config[Lh].push(H),H={tagName:"clipPath",children:[{tagName:"path",props:[["d",$h(E)],["fill","#FFF"]]}]},Y=r.add(H),i.__config[Lh].push(H),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",$h([[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]])],["fill","#FFF"],["filter","url(#"+G+")"],["clip-path","url(#"+Y+")"]]}))}else{var j,$,q,Z,J,Q,tt=a+_-p,et=o+f-p,rt=s+_+p,nt=h+f+p,it=[[tt,et],[rt,et],[rt,nt],[tt,nt]],at=Bt.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[it[0][0],it[0][1],it[2][0],it[2][1]]);p?(j={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]},$=r.add(j),i.__config[Lh].push(j),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",$h(E)+$h(it.slice(0).reverse())],["fill","#FFF"]]}]},q=r.add(j),i.__config[Lh].push(j),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",$h(it)],["fill",g],["clip-path","url(#"+q+")"]]}),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",(at?$h([[at[0],at[1]],[at[2],at[1]],[at[2],at[3]],[at[0],at[3]],[at[0],at[1]]].reverse()):"")+$h(E)+$h(it)+$h(T)],["fill","#FFF"]]}]},q=r.add(j),i.__config[Lh].push(j),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",$h(it)],["fill","#FFF"],["filter","url(#"+$+")"],["clip-path","url(#"+q+")"]]})):(Z={tagName:"filter",props:[["x",-P/l],["y",-P/c],["width",1+2*P/l],["height",1+2*P/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]},J=r.add(Z),i.__config[Lh].push(Z),Z={tagName:"clipPath",children:[{tagName:"path",props:[["d",$h(E)+$h(T)],["fill","#FFF"]]}]},Q=r.add(Z),i.__config[Lh].push(Z),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",$h(E)],["fill","#FFF"],["filter","url(#"+J+")"],["clip-path","url(#"+Q+")"]]}))}}}(ut,_t,ft,t,dt,E,M,O,x,v,y)}),0<Ot&&0<I[3]&&sl(ut,vt[ih],vt[qs],_t,this,ct,Dt),0<Tt&&0<N[3]&&sl(ut,vt[ah],vt[Qs],_t,this,ct,Dt),0<Mt&&0<w[3]&&sl(ut,vt[oh],vt[Zs],_t,this,ct,Dt),0<Et&&0<D[3]&&sl(ut,vt[sh],vt[Js],_t,this,ct,Dt),r&&r.enabled&&(r.__available=!0),ut!==Ct.CANVAS||u||(R.offScreenFilter=$,R.offScreenMask=q,R.offScreenOverflow=tt,R.offScreenBlend=lt),R}},{key:"render",value:function(t,e,r,n,i){return this.__renderSelf(t,e,r,n,i)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(ot(at(R.prototype),"__destroy",this).call(this),t=this.root,this.animationList.forEach(function(t){return t.__destroy()}),t.delRefreshTask(this.__loadBgi.cb),t.delRefreshTask(this.__task),this.__matrix=this.__matrixEvent=this.__root=null,this.__cancelCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[Ts]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener;return o.hasOwnProperty(a)&&(i=o[a]),e?(t.target=this,Ft.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):this.willResponseEvent(t)?(Ft.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,r=t.y,n=this.__sx1,i=this.__sy1,a=this.offsetWidth,o=this.offsetHeight,s=this.matrixEvent;if("none"!==this.computedStyle[nh])return ri.pointInQuadrilateral(e,r,n,i,n+a,i,n+a,i+o,n,i+o,s)?(t.target||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,n,i,a,o,s,h,l){var c,u,_,f,d,p,v=l.k,y=l.v,g=l.d,m=l.s,E=l.z,T=l.p,O=n+.5*s,M=i+.5*h,A={k:v};return"linear"===v?(c=xt.getLinear(y,g,n,i,O,M,s,h),A.v=this.__getLg(t,e,r,c)):"radial"===v?(u=xt.getRadial(y,m,E,T,n,i,a,o))&&(A.v=this.__getRg(t,e,r,u),u.matrix&&(A.v=[A.v,u.matrix,u.cx,u.cy])):"conic"===v&&(_=this.bbox,f=Math.max(Math.abs(_[2]-_[0]),Math.abs(_[3]-_[1])),d=Math.max(Math.abs(a-n),Math.abs(o-i)),p=xt.getConic(y,g,T,n,i,a,o,f/d),A.v=this.__getCg(t,e,r,p)),A}},{key:"__getLg",value:function(t,e,r,n){if(t===Ct.CANVAS){var i=e.createLinearGradient(n.x1,n.y1,n.x2,n.y2);return n.stop.forEach(function(t){i.addColorStop(t[1],Uh(t[0]))}),i}if(t===Ct.SVG){var a={tagName:"linearGradient",props:[["x1",n.x1],["y1",n.y1],["x2",n.x2],["y2",n.y2]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Uh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[Lh].push(a),"url(#"+o+")"}}},{key:"__getRg",value:function(t,e,r,n){if(t===Ct.CANVAS){var i=e.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.r);return n.stop.forEach(function(t){i.addColorStop(t[1],Uh(t[0]))}),i}if(t===Ct.SVG){var a={tagName:"radialGradient",props:[["cx",n.cx],["cy",n.cy],["r",n.r]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",Uh(t[0])],["offset",100*t[1]+"%"]]}})},o=r.add(a);return this.__config[Lh].push(a),"url(#"+o+")"}}},{key:"__getCg",value:function(t,e,r,n){var i=n.cx,a=n.cy,o=n.r,s=n.deg,h=n.stop,l=h.length-1;h[l][1]<1&&h.push([h[l][0].slice(0),1]),0<h[0][1]&&h.unshift([h[0][0].slice(0),0]);for(var c=t===Ct.CANVAS?1.5:.5,u=[],_=0,f=h.length;_<f-1;_++)for(var d=360*h[_][1],p=360*h[_+1][1]-d,v=Math.ceil(p),y=p/v,g=h[_][0],m=h[_+1][0],E=[m[0]-g[0],m[1]-g[1],m[2]-g[2],m[3]-g[3]],T=[E[0]/v,E[1]/v,E[2]/v,E[3]/v],O=0;O<v;O++){var M=Pt(Bt.pointOnCircle(i,a,o,d+y*O+s-c),2),A=M[0],x=M[1],R=Pt(Bt.pointOnCircle(i,a,o,d+y*O+s+c),2),S=R[0],b=R[1];u.push([A,x,S,b,Math.round(g[0]+T[0]*O),Math.round(g[1]+T[1]*O),Math.round(g[2]+T[2]*O),Math.round(g[3]+T[3]*O)])}var k=u[0].slice(0),I=Pt(Bt.pointOnCircle(i,a,o,s),2),N=I[0],w=I[1];k[2]=N,k[3]=w;var D=h[h.length-1][0];k[4]=D[0],k[5]=D[1],k[6]=D[2],k[7]=D[3],u.push(k);var P,C=[];if(t===Ct.CANVAS)for(var L=0,F=u.length;L<F;L++){var B,H=u[L];P&&((B=e.createLinearGradient(P[0],P[1],H[2],H[3])).addColorStop(0,Uh([P[4],P[5],P[6],P[7]])),B.addColorStop(1,Uh([H[4],H[5],H[6],H[7]])),C.push([[[i,a],[P[0],P[1]],[H[2],H[3]]],B])),P=H}else if(t===Ct.SVG)for(var G=0,Y=u.length;G<Y;G++){var W,U,X=u[G];P&&(W={tagName:"linearGradient",props:[["x1",P[0]],["y1",P[1]],["x2",X[2]],["y2",X[3]]],children:[{tagName:"stop",props:[["stop-color",Uh([P[4],P[5],P[6],P[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",Uh([X[4],X[5],X[6],X[7]])],["offset","100%"]]}]},U=r.add(W),this.__config[Lh].push(W),C.push([[[i,a],[P[0],P[1]],[X[2],X[3]]],"url(#"+U+")"])),P=X}return C}},{key:"__cancelCache",value:function(){var t=this.__config;t[gh]=this.__cacheStyle={};var e=t[Ih],r=t[Nh],n=t[wh],i=t[Dh],a=t[Ph];e&&e.release(),r&&r.release(),n&&(re.releaseCacheCanvas(n.canvas),t[wh]=null),i&&(re.releaseCacheCanvas(i.canvas),t[Dh]=null),a&&(re.releaseCacheCanvas(a.canvas),t[Ph]=null)}},{key:"cancelCache",value:function(){this.__cancelCache();for(var t=this.domParent;t;)t.__cancelCache(),t=t.domParent}},{key:"updateStyle",value:function(e,r){var n=this,i=n.root,a=n.__config,o=ln.normalize(e);i?i.addRefreshTask(n.__task={__before:function(){var t;a[Ch]||((t={})[lh]=n,t[uh]=o,t[_h]=e,t[fh]=Object.keys(o).map(function(t){return qh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[dh]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){Ft.isFunction(r)&&r.call(n,t)}}):(Object.assign(this.currentStyle,o),Ft.isFunction(r)&&r.call(n,0))}},{key:"updateFormatStyleNoOverwrite",value:function(e,r){var n,i=this.root,a=this.__config;i&&(n=this,i.addRefreshTask(n.__task={__before:function(){var t;a[Ch]||((t={})[lh]=n,t[uh]=e,t[fh]=Object.keys(e).map(function(t){return qh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[dh]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){Ft.isFunction(r)&&r.call(n,t)}}))}},{key:"animate",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{};if(!this.isDestroyed){var n=new xo(this,t,r);return this.animationList.push(n),!1===r.autoPlay?n:n.play()}}},{key:"removeAnimate",value:function(t){var e;t instanceof xo&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"__computeMeasure",value:function(t,e,r,n){ln.computeMeasure(this,r),Ft.isFunction(n)&&n(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){ot(at(R.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t),void 0!==r&&(this.__config[kh]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t}},{key:"__offsetY",value:function(t,e,r){ot(at(R.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t),void 0!==r&&(this.__config[kh]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t}},{key:"__resizeX",value:function(t){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,t<0&&(this.__config[Rh]=!1)}},{key:"__resizeY",value:function(t){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,t<0&&(this.__config[Rh]=!1)}},{key:"__spreadByBoxShadowAndFilter",value:function(t,e){var s=0,h=0;if(Array.isArray(t)&&t.forEach(function(t){var e,r=Pt(t,6),n=r[0],i=r[1],a=r[2],o=r[3];"inset"!==r[5]&&(e=Lt.int2convolution(a),e+=o,s=Math.max(s,n+e),h=Math.max(h,i+e))}),Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i,a=Pt(e[r],2),o=a[0],l=a[1];"blur"===o&&(i=Lt.int2convolution(l),s=Math.max(s,i),h=Math.max(h,i))}return[s,h]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},n=t?(n=Array.isArray(t)?t:[t]).map(function(t){return qo[Jo(t)]}):Object.keys(e);return n.forEach(function(t){qh.hasOwnProperty(t)?r[t]=e[t]:r[Zo[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,n=this.offsetHeight,i=this.matrixEvent,a=Lt.calPoint([t,e],i),o=Lt.calPoint([t+r,e],i),s=Lt.calPoint([t+r,e+n],i),h=Lt.calPoint([t,e+n],i);return{left:Math.min(a[0],Math.min(o[0],Math.min(s[0],h[0]))),top:Math.min(a[1],Math.min(o[1],Math.min(s[1],h[1]))),right:Math.max(a[0],Math.max(o[0],Math.max(s[0],h[0]))),bottom:Math.max(a[1],Math.max(o[1],Math.max(s[1],h[1]))),points:[a,o,s,h]}}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.clientWidth,n=this.clientHeight,i=this.computedStyle,a=i[fs],o=i[ps],s=i[ds],h=i[_s],l=i[Gs],c=i[Vs],u=Pt(this.__spreadByBoxShadowAndFilter(l,c),2),_=u[0],f=u[1];return[t-_,e-f,t+(r+=h+o)+_,e+(n+=a+s)+f]}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"renderMatrix",get:function(){return this.__renderMatrix}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}}]),R}(),yl=p.STYLE_KEY.MARGIN_BOTTOM,gl=function(){function r(t,e){g(this,r),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return l(r,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var r=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.outerWidth}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}},{key:"marginBottom",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.computedStyle[yl])}),e}}]),r}(),ml=p.NODE_KEY.NODE_DOM_PARENT,El=k.TYPE_VD,Tl=k.TYPE_GM,Ol=k.TYPE_CP;function Ml(t,e,r,n,i){if(Array.isArray(t))return t.map(function(t){return Ml(t,e,r,n)});if(Ft.isObject(t)&&t.$$type){var a=t.tagName,o=t.props,s=t.children,h=t.klass,l=t.$$type,c=t.inherit,u=t.__animateRecords;if(l===Ol&&t.placeholder)return t.value;if(l===El){if("img"===a){if(_=new fl(a,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else _=new _l(a,o);if("p"===a)i=!0;else if("div"===a&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?xl(_,Ml(s,e,r,n,i)):[],_.__children=s}else if(l===Tl)var _=new(dl.getRegister(a))(a,o);else{if(l!==Ol)return new bn(t);(_=new h(o)).__tagName=_.__tagName||a}t.vd=_,u&&(_.__animateRecords=u).list.forEach(function(t){t.target=t.target.vd}),c&&Ft.extendAnimate(c,_),_.__root=e,n&&(_.__host=n),l===Ol&&_.__init();var f=o.ref;return Ft.isString(f)&&f||Ft.isNumber(f)?r.ref[f]=_:Ft.isFunction(f)&&f(_),_}return new bn(t)}function Al(t){if(Array.isArray(t))return t.map(Al);if(!t||-1===[El,Tl,Ol].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,n){if(Array.isArray(t))t.forEach(function(t){e(r,t,n)});else if(!t||t.$$type!==El&&t.$$type!==Tl)t&&t.$$type===Ol?(r.push(t),n.lastText=null):Ft.isNil(t)||""===t||(null!==n.lastText?r[r.length-1]=n.lastText+=t:r.push(t));else{if(-1<["canvas","svg"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg");t.$$type===El&&Al(t),r.push(t),n.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}function xl(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(t)?t.forEach(function(t){xl(e,t,n)}):(t instanceof ul||t instanceof pl||t instanceof bn)&&(t.__parent=e,t.__domParent=e,t instanceof bn&&Object.assign(t.__config,e.__config),t.__config&&(t.__config[ml]=e),n.prev&&((n.prev.__next=t).__prev=n.prev),(n.prev=t)instanceof pl&&((r=t.shadowRoot)instanceof bn&&(r.__parent=e,Object.assign(r.__config,e.__config)),r.__domParent=e,r.__config&&(r.__config[ml]=e))),t}var Rl={ref:function(t){ul=t.Xom,_l=t.Dom,fl=t.Img,dl=t.Geom,pl=t.Component},initRoot:function(t,e){return xl(e,Ml(Al({children:t,$$type:El}).children,e,e))},initCp:function(t,e,r){if(Ft.isObject(t)){var n=Ml(t,e,r,r);return Array.isArray(n)&&xl(r,n),n}return new bn(t)},flattenJson:Al,relation:xl,build:Ml},Sl=Ft.isNil,bl=Ft.isFunction,kl=Ft.clone,Il=Ft.extend;var Nl=function(){t(h,Pi);var r=e(h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return g(this,h),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=Ft.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.__state={},t.__isMounted=!1,t.__taskList=[],t}return l(h,[{key:"setState",value:function(t,e){var r=this,n=this;if(Sl(t))t={};else{if(bl(t))return void e.call(n);if(0===Object.keys(t).length)return void(bl(e)&&e.call(n));var i=kl(n.state);t=Il(i,t)}var a,o,s=n.root;s&&n.__isMounted?n.__nextState?(Object.assign(n.__nextState,t),n.__taskList.push(e)):(n.__nextState=t,n.__taskList=[e],a=[],o=n.__task={__before:function(){a=n.__taskList.splice(0),function t(e){var r;e.__hasUpdate||(e.__hasUpdate=!0,(r=e.host)&&t(r))}(r)},__after:function(){a.forEach(function(t){bl(t)&&t.call(n)})}},s.addRefreshCp(o)):bl(e)&&(n.__state=t,e.call(n))}},{key:"__init",value:function(t){var r=this;this.__ref={};var e,n=this.root,i=t||Rl.flattenJson(this.render()),a=Rl.initCp(i,n,this);if(this.__cd=i,a instanceof bn)re.warn("Component render() return a text, should not inherit style/event");else if(a instanceof S){var o=ln.normalize(this.props.style),s=Object.keys(o);Il(a.style,o,s),Il(a.currentStyle,o,s),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)?(t=t.slice(2).toLowerCase(),a.listener[t]=e):/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))})}else{if(!(a instanceof h))throw new Error("Component render() must return a dom/text: "+this);re.warn("Component render() return a component: "+this.tagName+" -> "+a.tagName+", should not inherit style/event")}for((this.__shadow=a).__host=this;a instanceof h;)a=a.shadowRoot;(a.__host=this).__shadowRoot=a,this.__isMounted||(this.__isMounted=!0,e=this.componentDidMount,bl(e)&&n.once(Pi.REFRESH,function(){e.call(r)}))}},{key:"render",value:function(){re.warn("Component must implement render()!")}},{key:"__destroy",value:function(){var t;this.isDestroyed||(this.__isDestroyed=!0,t=this.componentWillUnmount,bl(t)&&(t.call(this),this.__isMounted=!1),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__shadow=null,this.__shadowRoot=null,this.__parent=null)}},{key:"__emitEvent",value:function(t){var e=this.shadowRoot;if(!(e instanceof bn))return e.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"__computeMeasure",value:function(t,e,r,n){var i=this.shadowRoot;i instanceof bn?i.__computeMeasure(t,e):i.__computeMeasure(t,e,!0,n)}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),h}();Object.keys(be.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config"]).forEach(function(e){Object.defineProperty(Nl.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","__cancelCache","__structure","__modifyStruct","__updateStruct"].forEach(function(e){Nl.prototype[e]=function(){var t=this.shadowRoot;if(t&&bl(t[e]))return t[e].apply(t,arguments)}});var wl={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},Dl=p.STYLE_KEY,Pl=Dl.POSITION,Cl=Dl.DISPLAY,Ll=Dl.FONT_WEIGHT,Fl=Dl.MARGIN_LEFT,Bl=Dl.MARGIN_TOP,Hl=Dl.MARGIN_RIGHT,Gl=Dl.MARGIN_BOTTOM,Yl=Dl.PADDING_LEFT,Wl=Dl.PADDING_BOTTOM,Ul=Dl.PADDING_RIGHT,Xl=Dl.PADDING_TOP,Kl=Dl.BORDER_TOP_WIDTH,zl=Dl.BORDER_BOTTOM_WIDTH,Vl=Dl.BORDER_RIGHT_WIDTH,jl=Dl.BORDER_LEFT_WIDTH,$l=Dl.TOP,ql=Dl.RIGHT,Zl=Dl.BOTTOM,Jl=Dl.LEFT,Ql=Dl.WIDTH,tc=Dl.HEIGHT,ec=Dl.TEXT_ALIGN,rc=Dl.FLEX_DIRECTION,nc=Dl.FLEX_BASIS,ic=Dl.FLEX_SHRINK,ac=Dl.FLEX_GROW,oc=Dl.ALIGN_SELF,sc=Dl.ALIGN_ITEMS,hc=Dl.JUSTIFY_CONTENT,lc=Dl.Z_INDEX,cc=p.NODE_KEY,uc=cc.NODE_CURRENT_STYLE,_c=cc.NODE_STYLE,fc=cc.NODE_STRUCT,dc=cc.NODE_DOM_PARENT,pc=p.STRUCT_KEY,vc=pc.STRUCT_NUM,yc=pc.STRUCT_LV,gc=pc.STRUCT_TOTAL,mc=pc.STRUCT_CHILD_INDEX,Ec=pc.STRUCT_INDEX,Tc=R.AUTO,Oc=R.PX,Mc=R.PERCENT,Ac=ln.calAbsolute,xc=ln.isRelativeOrAbsolute;function Rc(t){var i,a,o,s=[],h=[],l={},c=!1,u=t.children;u.forEach(function(t,e){var r,n=t;t instanceof Nl&&(t=t.shadowRoot),t instanceof vl&&t.isMask?void 0!==o?l[o].push(t):e&&(u[o=e-1].__iIndex=o,l[o]=[t],i=!0):(o=void 0,t instanceof vl&&xc(t)?(n.__iIndex=e,r=n.__zIndex=t.currentStyle[lc],h.push(n),void 0===a?a=r:c||(r<a&&(c=!0),a=r)):s.push(n))}),c&&h.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__iIndex-e.__iIndex});var e=s.concat(h);if(i)for(var r=e.length-1;0<=r;r--){var n=e[r].__iIndex;l.hasOwnProperty(n)&&e.splice.apply(e,[r+1,0].concat(_(l[n])))}return e}var Sc=function(){t(u,vl);var o=e(u);function u(t,e,r){var n;g(this,u),(n=o.call(this,t,e)).__lineGroups=[];var i=h(n).style;i.display&&{flex:!0,block:!0,inline:!0,none:!0}.hasOwnProperty(i.display)||(wl.INLINE.hasOwnProperty(n.tagName)?i.display="inline":i.display="block"),!i[Ll]&&wl.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),n.__style=ln.normalize(i,Ht.DOM_ENTRY_SET),n.__currentStyle=Ft.extend({},n.__style),n.__children=r||[];var a=n.__config;return a[uc]=n.__currentStyle,a[_c]=n.__style,n}return l(u,[{key:"__structure",value:function(n,i,t){var e=ot(at(u.prototype),"__structure",this).call(this,n++,i,t),a=[e],r=this.__zIndexChildren=this.__zIndexChildren||Rc(this);r.forEach(function(t,e){var r=t.__structure(n,i+1,e);Array.isArray(r)?(n+=r.length,a=a.concat(r)):(n++,a.push(r))});var o=a.length-1;return e[vc]=r.length,e[gc]=o,a}},{key:"__modifyStruct",value:function(t,e){var r,n=1<arguments.length&&void 0!==e?e:0,i=this.__config,a=i[fc],o=a[gc]||0,s=this.__structure(a[Ec],a[yc],a[mc]);(r=t.__structs).splice.apply(r,[a[Ec]+n,a[gc]+1].concat(_(s)));var h,l=0;return this!==t&&(l=((a=i[fc])[gc]||0)-o,(h=i[dc].__config[fc])[gc]=h[gc]||0,h[gc]+=l),[a,l]}},{key:"__updateStruct",value:function(t){var e=this.__config[fc],r=e[Ec],n=e[gc],i=void 0===n?0:n,a=this.__zIndexChildren=Rc(this);if(1!==a.length){a.forEach(function(t,e){t.__config[fc][mc]=e});for(var o,s,h=[],l=r+1;l<=i;l++){var c=t[l];h.push({child:c,list:t.slice(c[Ec],c[Ec]+c[gc]+1)}),l+=c[gc]||0}h.sort(function(t,e){var r=t.child[mc]-e.child[mc];return r<0&&(o=!0),r}),o&&(s=[],h.forEach(function(t){s=s.concat(t.list)}),s.forEach(function(t,e){t[Ec]=r+e+1}),t.splice.apply(t,[r+1,i].concat(_(s))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,n=this.currentStyle[Ql];if(n[1]===Oc)return t-n[0];if(n[1]===Mc)return t-e*n[0]*.01;for(var i=0;i<r.length;i++){if(t<0)return t;var a=r[i];t-=a instanceof vl||a instanceof Nl?a.__tryLayInline(t,e):a.textWidth}return t}},{key:"__offsetX",value:function(e,r,n){ot(at(u.prototype),"__offsetX",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,n)})}},{key:"__offsetY",value:function(e,r,n){ot(at(u.prototype),"__offsetY",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,n)})}},{key:"__calAutoBasis",value:function(a,o,s,t){var e,r,n,i,h=0,l=0,c=0,u=this.flowChildren,_=this.currentStyle,f=_[Ql],d=_[tc],p=_[Fl],v=_[Bl],y=_[Hl],g=_[Gl],m=_[Yl],E=_[Xl],T=_[Ul],O=_[Wl],M=_[Kl],A=_[Vl],x=_[zl],R=_[jl],S=a?f:d;return S[1]===Oc&&(h=c=S[0],t&&(l=h)),u.forEach(function(t){var e,r,n,i;c=t instanceof vl||t instanceof Nl&&t.shadowRoot instanceof vl?(r=(e=t.__calAutoBasis(a,o,s,!0)).b,n=e.min,i=e.max,h=Math.max(h,r),l=Math.max(l,n),Math.max(c,i)):a?(l=Math.max(t.charWidth,l),Math.max(t.textWidth,c)):(ln.computeReflow(t),t.__layout({x:0,y:0,w:o,h:s},!0),l=Math.max(l,t.height),Math.max(c,t.height))}),a?(e=this.__calMp(p,o)+this.__calMp(y,o)+this.__calMp(m,o)+this.__calMp(T,o),r=R[0]+A[0]+e,h+=r,c+=r,l+=r):(n=this.__calMp(v,o)+this.__calMp(g,o)+this.__calMp(E,o)+this.__calMp(O,o),i=M[0]+x[0]+n,h+=i,c+=i,l+=i),{b:h,min:l,max:c}}},{key:"__calMp",value:function(t,e){var r=0;return t[1]===Oc?r+=t[0]:t[1]===Mc&&(t[0]*=.01*e,t[1]=Oc,r+=t[0]),r}},{key:"__layoutNone",value:function(){ot(at(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof vl||t instanceof Nl&&t.shadowRoot instanceof vl)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(e,r){var t=this.flowChildren,n=this.currentStyle,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[ec],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new gl(c,u);t.forEach(function(t){t instanceof vl||t instanceof Nl&&t.shadowRoot instanceof vl?"inline"===t.currentStyle[Cl]?c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,r&&(d=Math.max(d,p),p=t.outerWidth)):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new gl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.outerWidth,v.add(t),r&&(p+=t.outerWidth)):(v.size&&(a.push(v),v.verticalAlign(),u+=v.height+v.marginBottom,v=new gl(e.x,u),r&&(d=Math.max(d,p),p=0)),t.__layout({x:e.x,y:u,w:_,h:f},r),c=e.x,u+=t.outerHeight,r&&(d=Math.max(d,t.outerWidth),p=0)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,r&&(d=Math.max(d,p),p=t.width)):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new gl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.width,v.add(t),r&&(p+=t.width))}),v.size&&(a.push(v),r?d=Math.max(d,p):v.verticalAlign(),u+=v.height);var y=this.__width=h||!r?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),v.size&&(u+=v.marginBottom),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=_-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)}),r||this.__marginAuto(n,e)}},{key:"__layoutFlex",value:function(t,c){var R=this,e=this.flowChildren,r=this.currentStyle,n=r[rc],i=r[hc],a=r[sc],o=this.__preLayout(t),s=o.fixedWidth,x=o.fixedHeight,S=o.x,b=o.y,k=o.w,I=o.h;if(s&&c)return this.__width=k,void this.__ioSize(k,this.height);var u=0,N="row"===n,w=[],D=[],P=[],C=[],L=0,F=0,B=0,_=0;if(e.forEach(function(t){if(t instanceof vl||t instanceof Nl&&t.shadowRoot instanceof vl){var e=t.__calAutoBasis(!!c||N,k,I),r=e.b,n=e.min,i=e.max;if(c)return void(N?u+=i:u=Math.max(u,i));var a=t.currentStyle,o=t.computedStyle,s=a[ac],h=a[ic],l=a[nc];w.push(s),D.push(h),L+=s,F+=h,l[1]===Tc?(P.push(i),B+=i):l[1]===Oc?(o[nc]=r=l[0],P.push(r),B+=r):l[1]===Mc&&(r=o[nc]=(N?k:I)*l[0]*.01,P.push(r),B+=r),_+=i,C.push(n)}else{if(c)return void(N?u+=t.textWidth:u=Math.max(u,t.textWidth));w.push(0),D.push(1),F+=1,N?(P.push(t.textWidth),B+=t.textWidth,_+=t.textWidth,C.push(t.charWidth)):(t.__layout({x:0,y:0,w:k,h:I},!0),P.push(t.height),B+=t.height,_+=t.height,C.push(t.height))}}),c){var h=this.__width=Math.min(u,k);this.__ioSize(h,this.height)}else{var H=0,G=(N?k:I)<_;e.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M=D[e],A=w[e];n=G?(r=B-(N?k:I),M?P[e]-r*M/F:P[e]):(i=(N?k:I)-B,A?P[e]+i*A/L:P[e]),n=Math.max(n,C[e]),t instanceof vl||t instanceof Nl&&t.shadowRoot instanceof vl?(a=t.currentStyle,o=t.computedStyle,s=a[Cl],h=a[rc],l=a[Ql],c=a[tc],"inline"===s&&(a[Cl]=o[Cl]="block"),N?("flex"===s&&"column"===h&&x&&c[1]===Tc&&(c[0]=I,c[1]=Oc),t.__layout({x:S,y:b,w:n,h:I})):("flex"===s&&"row"===h&&l[1]===Tc&&(l[0]=k,l[1]=Oc),t.__layout({x:S,y:b,w:k,h:n})),(G&&M||!G&&A)&&(u=o[Kl],_=o[zl],f=o[Bl],d=o[Gl],p=o[Xl],v=o[Wl],y=o[Vl],g=o[jl],m=o[Hl],E=o[Fl],T=o[Ul],O=o[Yl],N?(t.__width=n-E-m-O-T-g-y,t.__clientWidth=n-E-m-g-y,R.__offsetWidth=n-E-m,t.__outerWidth=n):(t.__height=n-f-d-p-v-u-_,t.__clientHeight=n-f-d-u-_,R.__offsetHeight=n-f-m,t.__outerHeight=n))):t.__layout({x:S,y:b,w:N?n:k,h:N?I:n}),H=N?(S+=t.outerWidth,Math.max(H,t.outerHeight)):(b+=t.outerHeight,Math.max(H,t.outerWidth))});var l=N?k-S+t.x:I-b+t.y;if(!G&&0===L&&0<l){var f=e.length;if("flex-end"===i)for(var d=0;d<f;d++){var p=e[d];N?p.__offsetX(l,!0):p.__offsetY(l,!0)}else if("center"===i)for(var v=.5*l,y=0;y<f;y++){var g=e[y];N?g.__offsetX(v,!0):g.__offsetY(v,!0)}else if("space-between"===i)for(var m=l/(f-1),E=1;E<f;E++){var T=e[E];N?T.__offsetX(m*E,!0):T.__offsetY(m*E,!0)}else if("space-around"===i)for(var O=l/(f+1),M=0;M<f;M++){var A=e[M];N?A.__offsetX(O*(M+1),!0):A.__offsetY(O*(M+1),!0)}}N?(x&&(H=I),b+=H):s&&(H=k),c||("stretch"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.computedStyle,c=t.currentStyle,u=c[oc],_=c[Ql],f=c[tc],d=l[Kl],p=l[zl],v=l[Bl],y=l[Gl],g=l[Xl],m=l[Wl],E=l[Vl],T=l[jl],O=l[Hl],M=l[Fl],A=l[Ul],x=l[Yl];N?"flex-start"===u||("center"===u?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===u?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):f[1]===Tc&&(n=t.height,i=(t.__height=l[tc]=H-v-y-g-m-d-p)-n,t.__clientHeight+=i,t.__outerHeight+=i)):"flex-start"===u||("center"===u?0!=(a=H-t.outerWidth)&&t.__offsetX(.5*a,!0):"flex-end"===u?0!=(o=H-t.outerWidth)&&t.__offsetX(o,!0):_[1]===Tc&&(s=t.width,h=(t.__width=l[Ql]=H-M-O-x-A-E-T)-s,t.__clientWidth+=h,R.__offsetWidth+=h,t.__outerWidth+=h))}):"center"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x=t.currentStyle[oc];N?"flex-start"===x||("flex-end"===x?0!=(e=H-t.outerHeight)&&t.__offsetY(e,!0):"stretch"===x?(r=t.computedStyle,n=t.currentStyle[tc],i=r[Kl],a=r[zl],o=r[Bl],s=r[Gl],h=r[Xl],l=r[Wl],n[1]===Tc&&(c=t.height,u=(t.__height=r[tc]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(.5*_,!0)):"flex-start"===x||("flex-end"===x?0!=(f=H-t.outerWidth)&&t.__offsetX(f,!0):"stretch"===x?(d=t.computedStyle,p=t.currentStyle[Ql],v=d[Vl],y=d[jl],g=d[Hl],m=d[Fl],E=d[Ul],T=d[Yl],p[1]===Tc&&(O=t.width,M=(t.__width=d[Ql]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,R.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerWidth)&&t.__offsetX(.5*A,!0))}):"flex-end"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x=t.currentStyle[oc];N?"flex-start"===x||("center"===x?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"stretch"===x?(r=t.computedStyle,n=t.currentStyle[tc],i=r[Kl],a=r[zl],o=r[Bl],s=r[Gl],h=r[Xl],l=r[Wl],n[1]===Tc&&(c=t.height,u=(t.__height=r[tc]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(_,!0)):"flex-start"===x||("center"===x?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"stretch"===x?(d=t.computedStyle,p=t.currentStyle[Ql],v=d[Vl],y=d[jl],g=d[Hl],m=d[Fl],E=d[Ul],T=d[Yl],p[1]===Tc&&(O=t.width,M=(t.__width=d[Ql]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,R.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerHeight)&&t.__offsetY(A,!0))}):e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x=t.currentStyle[oc];N?"flex-start"===x||("center"===x?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===x?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):"stretch"===x&&(n=t.computedStyle,i=t.currentStyle[tc],a=n[Kl],o=n[zl],s=n[Bl],h=n[Gl],l=n[Xl],c=n[Wl],i[1]===Tc&&(u=t.height,_=(t.__height=t.__height=n[tc]=H-s-h-l-c-a-o)-u,t.__clientHeight+=_,t.__outerHeight+=_))):"flex-start"===x||("center"===x?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"flex-end"===x?0!=(d=H-t.outerWidth)&&t.__offsetX(d,!0):"stretch"===x&&(p=t.computedStyle,v=t.currentStyle[Ql],y=p[Vl],g=p[jl],m=p[Hl],E=p[Fl],T=p[Ul],O=p[Yl],v[1]===Tc&&(M=t.width,A=(t.__width=p[Ql]=H-E-m-O-T-y-g)-M,t.__clientWidth+=A,R.__offsetWidth+=A,t.__outerWidth+=A)))}));var Y=this.__width=k,W=this.__height=x?I:b-t.y;this.__ioSize(Y,W),this.__marginAuto(r,t)}}},{key:"__layoutInline",value:function(e,r){var n=this,t=this.flowChildren,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[ec],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new gl(c,u);t.forEach(function(t){t instanceof vl||t instanceof Nl&&t.shadowRoot instanceof vl?("inline"!==t.currentStyle[Cl]&&(t.currentStyle[Cl]=t.computedStyle[Cl]="inline",re.error("Inline can not contain block/flex")),c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,d=Math.max(d,p),p=t.outerWidth):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new gl(c,u),d=Math.max(d,p),p=0),c+=t.outerWidth,v.add(t),p+=t.outerWidth)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,d=Math.max(d,p),p=t.width):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new gl(c,u),d=Math.max(d,p),p=0),c+=t.width,v.add(t),p+=t.width)}),v.size&&(a.push(v),r||v.verticalAlign(),u+=v.height,d=Math.max(d,p));var y=this.__width=h?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=n.__width-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)})}},{key:"__layoutAbs",value:function(n,i,R){var S=n.sx,b=n.sy,k=n.clientWidth,I=n.clientHeight,t=n.computedStyle,e=this.isDestroyed,r=this.children,a=this.absChildren,o=t[Cl],s=t[Kl],h=t[jl],l=t[Bl],c=t[Fl],N=t[Yl];e||"none"===o?this.__layoutNone():(S+=c+h,b+=l+s,a.forEach(function(t){if(R){var e=t;if(e instanceof Nl&&(e=t.shadowRoot),R!==e&&R!==t)return}var r=t.currentStyle,n=t.computedStyle;t.__mp(r,n,k),"inline"===r[Cl]&&(r[Cl]=n[Cl]=t.style.display="block");var i,a,o,s,h,l,c,u,_,f,d,p=r[Jl],v=r[$l],y=r[ql],g=r[Zl],m=r[Ql],E=r[tc],T=r[Cl],O=r[rc];if(p[1]!==Tc?(f=!0,n[Jl]=Ac(r,"left",p,k)):n[Jl]="auto",y[1]!==Tc?(u=!0,n[ql]=Ac(r,"right",y,k)):n[ql]="auto",v[1]!==Tc?(c=!0,n[$l]=Ac(r,"top",v,I)):n[$l]="auto",g[1]!==Tc?(_=!0,n[Zl]=Ac(r,"bottom",g,I)):n[Zl]="auto",f&&u?(i=S+n[Jl],o=S+k-n[ql]-i):f&&m[1]!==Tc?(i=S+n[Jl],o=m[1]===Oc?m[0]:k*m[0]*.01):u&&m[1]!==Tc?(o=m[1]===Oc?m[0]:k*m[0]*.01,i=S+k-n[ql]-o,i-=n[Fl],i-=n[Hl],i-=n[Yl],i-=n[Ul],i-=r[jl][0],i-=r[Vl][0]):f?i=S+n[Jl]:u?(i=S+k-n[ql],h=!0):(i=S+N,m[1]!==Tc&&(o=m[1]===Oc?m[0]:k*m[0]*.01)),c&&_)a=b+n[$l],s=b+I-n[Zl]-a;else if(c&&E[1]!==Tc)a=b+n[$l],s=E[1]===Oc?E[0]:I*E[0]*.01;else if(_&&E[1]!==Tc)s=E[1]===Oc?E[0]:I*E[0]*.01,a=b+I-n[Zl]-s,a-=n[Bl],a-=n[Gl],a-=n[Xl],a-=n[Wl],a-=r[Kl][0],a-=r[zl][0];else if(c)a=b+n[$l];else if(_)a=b+I-n[Zl],l=!0;else{a=b;for(var M=t.prev;M;){if(M instanceof bn||"absolute"!==M.computedStyle[Pl]){a=M.y+M.outerHeight;break}M=M.prev}M||(a=b),E[1]!==Tc&&(s=E[1]===Oc?E[0]:I*E[0]*.01)}("block"===T&&void 0===o||"flex"===T&&(void 0===o||"column"===O&&void 0===s))&&(d=!0);var A=h?i-S:k+S-i,x=l?a-b:I+b-a;d&&(t.__layout({x:i,y:a,w:A,h:x},!0,!0),A=t.outerWidth),t.__layout({x:i,y:a,w:A,h:x,w2:o,h2:s},!1,!0),h&&t.__offsetX(-t.outerWidth,!0),l&&t.__offsetY(-t.outerHeight,!0)}),r.forEach(function(t){if(R){var e=t;if(e instanceof Nl&&(e=t.shadowRoot),R!==e&&R!==t)return}var r;t instanceof u?t.__layoutAbs(xc(t)?t:n,i):t instanceof Nl&&((r=t.shadowRoot)instanceof u&&r.__layoutAbs(r,i))}))}},{key:"__computeMeasure",value:function(e,r,t,n){ot(at(u.prototype),"__computeMeasure",this).call(this,e,r,t,n),this.children.forEach(function(t){t.__computeMeasure(e,r,!1,n)})}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(u.prototype),"render",this).call(this,t,e,r,n,i);return t===Ct.SVG&&(this.virtualDom.type="dom"),a}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),ot(at(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return ot(at(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[Cl]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener,s=this.zIndexChildren;o.hasOwnProperty(a)&&(i=o[a]);for(var h=s.length-1;0<=h;h--){var l=s[h];if((l instanceof vl||l instanceof Nl&&l.shadowRoot instanceof vl)&&l.__emitEvent(t)){if(t.__stopPropagation)return;return Ft.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0}}return ot(at(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__cancelCache",value:function(e){ot(at(u.prototype),"__cancelCache",this).call(this,e),e&&this.children.forEach(function(t){(t instanceof vl||t instanceof Nl&&t.shadowRoot instanceof vl)&&t.__cancelCache(e)})}},{key:"__deepScan",value:function(e,r){ot(at(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return t instanceof Nl&&(t=t.shadowRoot),t instanceof bn||"absolute"!==t.currentStyle[Pl]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return t instanceof Nl&&(t=t.shadowRoot),t instanceof vl&&"absolute"===t.currentStyle[Pl]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.y}}]),u}(),bc=p.STYLE_KEY,kc=bc.WIDTH,Ic=bc.HEIGHT,Nc=bc.DISPLAY,wc=bc.BORDER_TOP_WIDTH,Dc=bc.BORDER_RIGHT_WIDTH,Pc=bc.BORDER_LEFT_WIDTH,Cc=bc.BORDER_BOTTOM_WIDTH,Lc=bc.PADDING_TOP,Fc=bc.PADDING_LEFT,Bc=bc.BORDER_TOP_LEFT_RADIUS,Hc=bc.BORDER_TOP_RIGHT_RADIUS,Gc=bc.BORDER_BOTTOM_RIGHT_RADIUS,Yc=bc.BORDER_BOTTOM_LEFT_RADIUS,Wc=bc.VISIBILITY,Uc=p.UPDATE_KEY,Xc=Uc.UPDATE_NODE,Kc=Uc.UPDATE_FOCUS,zc=Uc.UPDATE_IMG,Vc=Uc.UPDATE_CONFIG,jc=p.NODE_KEY,$c=jc.NODE_CACHE,qc=jc.NODE_CACHE_TOTAL,Zc=jc.NODE_DEFS_CACHE,Jc=R.AUTO,Qc=kn.canvasPolygon,tu=kn.svgPolygon,eu=function(){t(it,Sc);var a=e(it);function it(t,e){var r;g(this,it);var n=(r=a.call(this,t,e)).props.src,i=r.__loadImg={};return n||(i.error=!0),r}return l(it,[{key:"__preLayout",value:function(t){var e,r,n=ot(at(it.prototype),"__preLayout",this).call(this,t),i=this.__loadImg;return i.error||(e=this.props.src,(r=re.IMG[e])&&r.state===re.LOADED&&(i.url=e,i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),n.fixedWidth&&n.fixedHeight||(i.error&&!this.props.placeholder?n.fixedWidth?n.h=n.w:n.fixedHeight?n.w=n.h:n.w=n.h=32:i.source?n.fixedWidth?n.h=n.w*i.height/i.width:n.fixedHeight?n.w=n.h*i.width/i.height:(n.w=i.width,n.h=i.height):n.w=n.h=0,n.fixedWidth=!0,n.fixedHeight=!0),n}},{key:"__addGeom",value:function(t,e){e=Ft.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),ot(at(it.prototype),"__destroy",this).call(this)}},{key:"__calCache",value:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x){var R,S,b,k,I,N=ot(at(it.prototype),"__calCache",this).call(this,t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x);return N||(R=this.computedStyle,S=this.__loadImg,k=(b=this.props).src,I=b.placeholder,"hidden"!==R[Wc]&&(R[kc]||R[Ic])&&(S.error||(S.url===k||I)&&S.source)&&(N=!0)),N}},{key:"render",value:function(t,e,r,n,i){var a=this,o=ot(at(it.prototype),"render",this).call(this,t,e,r,n,i),s=o.offScreenFilter,h=o.offScreenMask,l=o.offScreenOverflow,c=o.offScreenBlend,u=this.width,_=this.height,f=this.isDestroyed,d=this.props,p=d.src,v=d.placeholder,y=this.computedStyle,g=this.computedStyle,m=g[Nc],E=g[wc],T=g[Dc],O=g[Cc],M=g[Pc],A=g[Lc],x=g[Fc],R=g[Bc],S=g[Hc],b=g[Gc],k=g[Yc],I=g[Wc],N=this.virtualDom,w=this.__config,D=this.__loadImg;if(!i&&(s||h||l||c)&&(r=(s||h||l||c).target.ctx),t===Ct.CANVAS&&i&&(w[qc]=w[$c]),D.url===p||D.error||(D.url=p,D.source=null,D.error=null,D.cache=!1,re.measureImg(p,function(t){var i=a;if(t.url===D.url&&!i.isDestroyed){var e=function(){var e=i.root,t=i.currentStyle,r=t[kc],n=t[Ic];e.delRefreshTask(i.__task),r[1]!==Jc&&n[1]!==Jc?e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[Xc]=i,t[Kc]=Po.REPAINT,t[Vc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}}):e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[Xc]=i,t[Kc]=Po.REFLOW,t[zc]=!0,t[Vc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}})};if(t.success)D.source=t.source,D.width=t.width,D.height=t.height;else{if(v)return void re.measureImg(v,function(t){t.success&&(D.error=!0,D.source=t.source,D.width=t.width,D.height=t.height,e())});D.error=!0}"none"!==y[Nc]&&e()}},{width:u,height:_})),f||"none"===m||"hidden"===I)return o;var P,C,L=w[$c];if(i&&L&&L.enabled&&(r=L.ctx),P=o.x2+x,C=o.y2+A,D.error&&!v&&it.showError){var F=.02*Math.min(u,_),B=P+.7*u,H=C+.3*_,G=5*F,Y=[[P+.15*u,C+.7*_],[P+.3*u,C+.4*_],[P+.5*u,C+.6*_],[P+.6*u,C+.5*_],[P+.9*u,C+.8*_],[P+.15*u,C+.8*_]];if(t===Ct.CANVAS){r.strokeStyle="#CCC",r.lineWidth=F,r.fillStyle="#DDD",r.beginPath(),r.moveTo(P,C),r.lineTo(P+u,C),r.lineTo(P+u,C+_),r.lineTo(P,C+_),r.lineTo(P,C),r.stroke(),r.closePath(),r.beginPath(),r.arc(B,H,G,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(Y[0][0],Y[0][1]);for(var W=1,U=Y.length;W<U;W++){var X=Y[W];r.lineTo(X[0],X[1])}r.lineTo(Y[0][0],Y[0][1]),r.fill(),r.closePath()}else if(t===Ct.SVG){this.__addGeom("rect",[["x",P],["y",C],["width",u],["height",_],["stroke","#CCC"],["stroke-width",F],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",B],["cy",H],["r",G],["fill","#DDD"]]);for(var K="",z=0,V=Y.length;z<V;z++){var j=Y[z];z&&(K+=" "),K+=j[0]+","+j[1]}this.__addGeom("polygon",[["points",K],["fill","#DDD"]])}}else if((D.url===p||v)&&D.source){var $=D.source;if($){var q,Z,J,Q=mi.calRadius(P,C,u,_,E,T,O,M,R,S,b,k);if(t===Ct.CANVAS)Q?(r.save(),r.beginPath(),Qc(r,Q),r.clip(),r.closePath(),r.drawImage($,P,C,u,_),r.restore()):r.drawImage($,P,C,u,_);else if(t===Ct.SVG){if(D.cache)return D.cache.cache=!0,N.children=[D.cache],void(!N.cache&&Q&&(q={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",tu(Q)],["fill","#FFF"]]}]},Z=n.add(q),w[Zc].push(q),N.conClip="url(#"+Z+")"));u===D.width&&_===D.height||(J=xi.matrixResize(D.width,D.height,u,_,P,C,u,_));var tt,et,rt=[["xlink:href",D.error?v:p],["x",P],["y",C],["width",D.width],["height",D.height]];Q&&(tt={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",tu(Q)],["fill","#FFF"]]}]},et=n.add(tt),w[Zc].push(tt),N.conClip="url(#"+et+")",delete N.cache),J&&!Ft.equalArr(J,[1,0,0,1,0,0])&&rt.push(["transform","matrix("+Ft.joinArr(J,",")+")"]);var nt={type:"img",tagName:"image",props:rt};N.children=[nt],D.cache=nt}}}return o}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source&&this.__loadImg.url!==this.props.src)return ot(at(it.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"baseLine",get:function(){return this.height}}]),it}();c(eu,"showError",!0);var ru,nu,iu,au=function(){function e(t){g(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return l(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),ou=p.STYLE_KEY,su=ou.DISPLAY,hu=ou.MARGIN_TOP,lu=ou.MARGIN_LEFT,cu=ou.PADDING_TOP,uu=ou.PADDING_LEFT,_u=ou.WIDTH,fu=ou.HEIGHT,du=ou.BORDER_TOP_WIDTH,pu=ou.BORDER_RIGHT_WIDTH,vu=ou.BORDER_BOTTOM_WIDTH,yu=ou.BORDER_LEFT_WIDTH,gu=ou.FILL,mu=ou.STROKE,Eu=ou.STROKE_MITERLIMIT,Tu=ou.STROKE_WIDTH,Ou=ou.STROKE_LINECAP,Mu=ou.STROKE_LINEJOIN,Au=ou.STROKE_DASHARRAY,xu=ou.STROKE_DASHARRAY_STR,Ru=ou.FILL_RULE,Su=ou.VISIBILITY,bu=p.NODE_KEY,ku=bu.NODE_CACHE_PROPS,Iu=bu.NODE_CURRENT_PROPS,Nu=bu.NODE_CURRENT_STYLE,wu=bu.NODE_IS_MASK,Du=bu.NODE_STYLE,Pu=bu.NODE_CACHE,Cu=bu.NODE_CACHE_TOTAL,Lu=bu.NODE_CACHE_FILTER,Fu=bu.NODE_CACHE_MASK,Bu=bu.NODE_CACHE_OVERFLOW,Hu=bu.NODE_DEFS_CACHE,Gu=R.AUTO,Yu=R.PX,Wu=R.PERCENT,Uu=Ft.int2rgba,Xu=Ft.isNil,Ku=Ft.joinArr,zu=kn.canvasPolygon,Vu=kn.svgPolygon,ju={},$u=function(){t(D,vl);var s=e(D);function D(t,e){var r;g(this,D),(r=s.call(this,t,e)).__isMulti=!!r.props.multi,r.__isClip=!!r.props.clip,r.__isMask=r.__isClip||!!r.props.mask;var n=h(r),i=n.style,a=n.isMask;a&&(i.background=null,i.border=null,i.strokeWidth=0,i.stroke=null),r.__style=ln.normalize(r.style,Ht.DOM_ENTRY_SET.concat(Ht.GEOM_ENTRY_SET)),r.__currentStyle=Ft.extend({},r.__style),r.__currentProps=Ft.clone(r.props);var o=r.__config;return o[ku]=r.__cacheProps={},o[Iu]=r.__currentProps,o[Nu]=r.__currentStyle,o[wu]=a,o[Du]=r.__style,r}return l(D,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle[_u];return r[1]===Yu?t-r[0]:r[1]===Wu?t-e*r[0]*.01:t}},{key:"__calAutoBasis",value:function(t){var e,r,n=0,i=0,a=0,o=this.currentStyle,s=(this.computedStyle,o[_u]),h=o[fu],l=o[du],c=o[pu],u=o[vu],_=o[yu],f=t?s:h;return f[1]!==Gu&&(n=a+=f[0]),t?(n+=e=c[0]+_[0],a+=e,i+=e):(n+=r=l[0]+u[0],a+=r,i+=r),{b:n,min:i,max:a}}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),n=r.fixedWidth,i=r.fixedHeight,a=r.w,o=r.h;this.__height=i?o:0,e?this.__width=n?a:0:(this.__width=a,this.__ioSize(a,this.height),this.__marginAuto(this.currentStyle,t),this.__config[ku]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,n=e.fixedHeight,i=e.x,a=e.y,o=e.w,s=e.h,h=this.__width=r?o:i-t.x,l=this.__height=n?s:a-t.y;this.__ioSize(h,l),this.__config[ku]=this.__cacheProps={}}},{key:"__calCache",value:function(n,t,i,a,e,o,s,h,r,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k){var I,N,w=this;return ot(at(D.prototype),"__calCache",this).call(this,n,t,i,a,e,o,s,h,r,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,x,R,S,b,k),Xu(o[Tu])&&(o[Tu]=!0,I=s[Tu]||[],N=this.width,h[Tu]=I.map(function(t){return t[1]===Yu?t[0]:t[1]===Wu?t[0]*N*.01:0})),Xu(o[Au])&&(o[Au]=!0,h[Au]=s[Au]||[],o[xu]=h[Au].map(function(t){return Ku(t,",")})),[Ou,Mu,Eu,Ru].forEach(function(t){h[t]=s[t]}),[mu,gu].forEach(function(t){var e,r;Xu(o[t])&&(e=s[t],h[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(Uu(t)):r.push("none"):r.push(w.__gradient(n,i,a,M+T,S+g,A-m,b-E,c,u,t))}),o[t]=r)}),"hidden"!==h[Su]}},{key:"__preSet",value:function(){var t=this.sx,e=this.sy,r=this.width,n=this.height,i=this.__cacheStyle,a=this.computedStyle,o=a[du],s=a[yu],h=a[su],l=a[hu],c=a[lu],u=a[cu],_=a[uu],f=a[Su],d=t+s+c+_,p=e+o+l+u,v=d+.5*r,y=p+.5*n,g=i[gu],m=i[mu],E=i[xu],T=a[Tu],O=a[Ou],M=a[Mu],A=a[Eu];return{x:t,y:e,originX:d,originY:p,width:r,height:n,cx:v,cy:y,display:h,stroke:m,strokeWidth:T,strokeDasharray:a[Au],strokeDasharrayStr:E,strokeLinecap:O,strokeLinejoin:M,strokeMiterlimit:A,fill:g,visibility:f,fillRule:a[Ru]}}},{key:"__preSetCanvas",value:function(t,e,r){var n=r.stroke,i=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,l=r.fill;t===Ct.CANVAS&&(l&&("linear"!==l.k&&("radial"!==l.k||Array.isArray(l.v))?"conic"===l.k||l.k||e.fillStyle===l||(e.fillStyle=l):e.fillStyle=l.v),n&&("linear"!==n.k&&("radial"!==n.k||Array.isArray(n.v))?"conic"===n.k||n.k||e.strokeStyle===n||(e.strokeStyle=n):e.strokeStyle=n.v),void 0!==i&&e.lineWidth!==i&&(e.lineWidth=i),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==h&&e.miterLimit!==h&&(e.miterLimit=h),Ft.isFunction(e.getLineDash)?a&&!Ft.equalArr(e.getLineDash(),a)&&e.setLineDash(a):a&&e.setLineDash(a))}},{key:"render",value:function(t,e,r,n,i){var a=this.__renderSelfData||ot(at(D.prototype),"render",this).call(this,t,e,r,n,i),o=this.__config,s=o[Pu],h=o[Lu],l=o[Fu],c=o[Bu];if(t===Ct.CANVAS&&i&&(o[Cu]=o[Pu]),e<Po.REPAINT&&(s&&s.available||!Po.contain(e,Po.FILTER)&&h||l||c)&&(a.break=!0),t===Ct.SVG&&(this.virtualDom.type="geom"),a.break)return a;var u=this.__preSet(t,r,n),_=a.x2,f=a.y2,d=u.originX,p=u.originY,v=this.computedStyle;return _+=v[uu],f+=v[cu],u.dx=_-d,u.dy=f-p,Object.assign(a,u)}},{key:"__renderPolygon",value:function(t,e,r,n){var i=n.fill,a=n.fillRule,o=n.stroke,s=n.strokeWidth,h=n.strokeDasharray,l=n.strokeDasharrayStr,c=n.strokeLinecap,u=n.strokeLinejoin,_=n.strokeMiterlimit,f=n.dx,d=n.dy,p=this.__cacheProps.list,v=this.isMulti;if(i.length<=1&&o.length<=1){var y={fill:i[0],fillRule:a[0],stroke:o[0],strokeWidth:s[0],strokeDasharray:h[0],strokeDasharrayStr:l[0],strokeLinecap:c[0],strokeLinejoin:u[0],strokeMiterlimit:_[0],dx:f,dy:d};this.__renderOnePolygon(t,e,r,v,p,y)}else{for(var g=0,m=i.length;g<m;g++){var E,T=i[g];T&&(E={fill:T,fillRule:a[g],dx:f,dy:d},this.__renderOnePolygon(t,e,r,v,p,E))}for(var O=0,M=o.length;O<M;O++){var A,x=o[O];x&&(A={stroke:x,strokeWidth:s[O],strokeDasharray:h[O],strokeDasharrayStr:l[O],strokeLinecap:c[O],strokeLinejoin:u[O],strokeMiterlimit:_[O],dx:f,dy:d},this.__renderOnePolygon(t,e,r,v,p,A))}}}},{key:"__renderOnePolygon",value:function(t,e,r,n,i,a){var o=a.fill,s=a.stroke,h=a.strokeWidth,l=o&&"conic"===o.k,c=s&&"conic"===s.k,u=o&&"radial"===o.k&&Array.isArray(o.v),_=h&&0<h&&s&&"radial"===s.k&&Array.isArray(s.v);l||c?(l?this.__conicGradient(t,e,r,i,n,a):"none"!==o&&this.__drawPolygon(t,e,r,n,i,a,!0),h&&0<h&&c?re.warn("Stroke style can not use conic-gradient"):h&&0<h&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,a,!1,!0)):u||_?(u?this.__radialEllipse(t,e,r,i,n,a,"fill"):"none"!==o&&this.__drawPolygon(t,e,r,n,i,a,!0),h&&0<h&&_?(re.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke.v=a.stroke.v[0],this.__drawPolygon(t,e,r,n,i,a,!1,!0)):h&&0<h&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,a,!1,!0)):this.__drawPolygon(t,e,r,n,i,a,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,n,i,a,o,s){var h=a.fill,l=a.stroke,c=a.strokeWidth,u=a.fillRule,_=a.strokeDasharrayStr,f=a.strokeLinecap,d=a.strokeLinejoin,p=a.strokeMiterlimit,v=a.dx,y=a.dy;if(t===Ct.CANVAS)this.__preSetCanvas(t,e,a),e.beginPath(),n?i.forEach(function(t){return zu(e,t,v,y)}):zu(e,i,v,y),o&&h&&"none"!==h&&e.fill(u),s&&"none"!==l&&c&&0<c&&e.stroke(),e.closePath();else if(t===Ct.SVG){var g="";n?i.forEach(function(t){return g+=Vu(t)}):g=Vu(i);var m=[["d",g]];if(!(h&&"none"!==h||l&&"none"!==l))return;o&&h&&"none"!==h?(m.push(["fill",h.v||h]),u&&"nonzero"!==u&&m.push(["fill-rule",u])):m.push(["fill","none"]),s&&"none"!==l&&c&&0<c?(m.push(["stroke",l.v||l]),m.push(["stroke-width",c]),this.__propsStrokeStyle(m,_,f,d,p)):m.push(["stroke-width",0]),this.addGeom("path",m)}}},{key:"__inversePtList",value:function(t,e,a){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Lt.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,n=t.length;r<n;r+=2){var i=Lt.calPoint([t[r],t[r+1]],a);e.push(i[0]),e.push(i[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,n,i,a,o){var s=a.strokeWidth,h=a.strokeDasharrayStr,l=a.strokeLinecap,c=a.strokeLinejoin,u=a.strokeMiterlimit,_=a.dx,f=a.dy,d=Pt(a[o].v,4),p=d[0],v=d[1],y=[d[2],d[3]];v=ri.calMatrixByOrigin(v,y);var g,m,E,T=Lt.inverse(v);n=this.__inversePtList(n,i,T),t===Ct.CANVAS?(v&&(e.save(),g=this.matrixEvent,v=Lt.multiply(g,v),e.setTransform(v[0],v[1],v[2],v[3],v[4],v[5])),e.beginPath(),e[o+"Style"]!==p&&(e[o+"Style"]=p),i?n.forEach(function(t){return kn.canvasPolygon(e,t,_,f)}):zu(e,n,_,f),e[o](),e.closePath(),v&&e.restore()):t===Ct.SVG&&(m="",i?n.forEach(function(t){return m+=Vu(t)}):m=Vu(n),E=[["d",m]],"fill"===o?(E.push(["fill",p]),E.push(["strokeWidth",0])):"stroke"===o&&(E.push(["fill","none"]),E.push(["stroke",p]),E.push(["stroke-width",s]),this.__propsStrokeStyle(E,h,l,c,u)),E.push(["transform","matrix(".concat(Ku(v,","),")")]),this.addGeom("path",E))}},{key:"__conicGradient",value:function(t,e,n,r,i,a){var o,s,h,l=this,c=a.fill,u=a.dx,_=a.dy,f=c.v;t===Ct.CANVAS?(o=e.globalAlpha,e.globalAlpha=.5*o,i?r.forEach(function(t){e.save(),e.beginPath(),zu(e,t,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),zu(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()}):(e.save(),e.beginPath(),zu(e,r,u,_),e.clip(),e.closePath(),f.forEach(function(t){e.beginPath(),zu(e,t[0],u,_),e.fillStyle=t[1],e.fill(),e.closePath()}),e.restore()),e.globalAlpha=o):t===Ct.SVG&&(i?r.forEach(function(t){var e={tagName:"clipPath",children:[{tagName:"path",props:[["d",Vu(t)],["fill","#FFF"]]}]},r=n.add(e);l.__config[Hu].push(e),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Vu(t[0])],["fill",t[1]],["clip-path","url(#"+r+")"]]})})}):(s={tagName:"clipPath",children:[{tagName:"path",props:[["d",Vu(r)],["fill","#FFF"]]}]},h=n.add(s),this.__config[Hu].push(s),f.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Vu(t[0])],["fill",t[1]],["clip-path","url(#"+h+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,n,i){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),n&&"miter"!==n&&t.push(["stroke-linejoin",n]),i&&4!==i&&t.push(["stroke-miterlimit",i])}},{key:"__cancelCache",value:function(t){ot(at(D.prototype),"__cancelCache",this).call(this,t),this.__config[ku]=this.__cacheProps={}}},{key:"__releaseWhenEmpty",value:function(){}},{key:"addGeom",value:function(t,e){e=Ft.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return Xu(e)?this["__"+t]:e}},{key:"baseLine",get:function(){return this.__height}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"getRegister",value:function(t){if(!ju.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return ju[t]}},{key:"register",value:function(t,e){if(D.hasRegister(t))throw new Error("Geom has already register: ".concat(t));ju[t]=e}},{key:"hasRegister",value:function(t){return ju.hasOwnProperty(t)}}]),D}(),qu=p.NODE_KEY,Zu=qu.NODE_COMPUTED_STYLE,Ju=qu.NODE_DOM_PARENT,Qu=qu.NODE_MATRIX_EVENT,t_=qu.NODE_STRUCT,e_=k.TYPE_VD,r_=k.TYPE_GM,n_=k.TYPE_CP,i_=[],a_=[],o_={};function s_(t){t instanceof nu&&t.children.forEach(function(t){t instanceof nu?s_(t):t instanceof iu&&t.__hasUpdate&&(t.__hasUpdate=!1,h_(t,t.props))})}function h_(t,e,r){t.__nextState||r?!Ft.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.__state=r,t.__nextState=null;var n=t.shadow,i=t.shadowRoot,a=t.__cd,o=Rl.flattenJson(t.render());(function(t,e,r){var o=__(e,{},t),s=__(r,{}),h=[],l=[];Object.keys(o).forEach(function(t){var e=o[t];s[t]||(e.json.key=o_)}),Object.keys(s).forEach(function(t){var e,r,n,i=o[t],a=s[t];i?(e=i.json,r=a.json,n=i.vd,e.$$type===n_&&r.$$type===n_?e.klass===r.klass&&(u_(e,r,n),e.key=r.key=o_,l.push(n)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===r_&&e.props.multi!==r.props.multi||(r.inherit=n),e.key=r.key=o_,r.$$type===e_&&h.push({vd:n,oj:e,nj:r}))):a.json.key=o_}),h.forEach(function(t){c_(t.vd,t.oj,t.nj)}),l_(t,e,r),l.forEach(function(t){f_(t)})})(n,a,o),t.__init(o);var s=t.shadowRoot;s instanceof ru?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sy1","__sy2","__sy3","__sy4","__computedStyle"].forEach(function(t){s[t]=i[t]}),s.__config[Zu]=i.computedStyle):s.__config[Qu]=i.__config[Qu];["__x","__y","__width","__height","__sx1","__layoutData","__parent","__domParent"].forEach(function(t){s[t]=i[t]}),s.__config[Ju]=i.domParent,s.__config[t_]=i.__config[t_],i_.push(t),Ft.isObject(o)&&o.placeholder||a_.push(n);o&&o.placeholder&&delete o.placeholder}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,s_(t.shadowRoot)):s_(t.shadowRoot)}function l_(t,e,r){if(Ft.isObject(r))if(r.$$type===n_){if(r.key===o_)return;e.$$type===r.$$type&&e.klass===r.klass&&(u_(e,r,t),f_(t))}else r.$$type===r_&&e.$$type===r_?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.inherit=t):r.$$type===e_&&e.$$type===e_&&(e.tagName===r.tagName&&(r.inherit=t),c_(t,e,r))}function c_(t,e,r){for(var n=e.children,i=r.children,a=n.length,o=i.length,s=t.children,h=0,l=0,c=0,u=Math.min(a,o);h<u;h++){var _=n[h+l],f=i[h+c];_.key===o_&&f.key===o_||(_.key===o_?(l++,h--,a--,u=Math.min(a,o)):f.key===o_?(c++,h--,o--,u=Math.min(a,o)):l_(s[h+l],_,f))}}function u_(i,a,o){a.placeholder=!0;var s=(a.value=o).shadowRoot,h={};Object.keys(i.props).forEach(function(t){var e=i.props[t];h[t]=e}),Object.keys(a.props).forEach(function(t){var e,r,n=a.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=n,(e=h[t])?(delete h[t],e!==n&&(t=t.slice(2).toLowerCase(),s.listener[t]=n)):(t=t.slice(2).toLowerCase(),s.listener[t]=n)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=n,(r=h[t])?(delete h[t],r!==n&&(t=t.slice(2).toLowerCase(),o.off(t,h[t]),o.on(t,n)),delete h[t]):(t=t.slice(2).toLowerCase(),o.on(t,n)))}),Object.keys(h).forEach(function(t){var e=h[t];/^on[a-zA-Z]/.test(t)?(a.props[t]=e,t=t.slice(2).toLowerCase(),delete s.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(a.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),h_(o,a.props,!Ft.equal(i.props,a.props))}function __(t,r,n){var e;return Array.isArray(t)?t.forEach(function(t,e){return __(t,r,n&&n[e])}):Ft.isObject(t)&&(t.$$type!==e_&&t.$$type!==r_&&t.$$type!==n_||(t.$$type===e_&&__(t.children,r,n&&n.children),e=t.props.key,Ft.isNil(e)||""===e||(r.hasOwnProperty(e)&&re.error("Component "+n.tagName+" has duplicate key: "+e),r[e]={json:t,vd:n}))),r}function f_(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var d_,p_={ref:function(t){ru=t.Xom,nu=t.Dom,t.Img,t.Geom,iu=t.Component},updateList:i_,check:s_,checkCp:h_,did:function(){i_.forEach(function(t){Ft.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),i_.splice(0),a_.forEach(function(t){t.__destroy()}),a_=[]}},v_=Ft.joinVd,y_=Ft.joinDef,g_=Po.contain,m_=Po.NONE,E_=Po.TRANSFORM_ALL,T_=Po.OPACITY,O_=Po.FILTER,M_=Po.MIX_BLEND_MODE;function A_(t,e,r){var n=t.childNodes;!function(t,e,r){for(var n=e.length,i=r.length,a=0,o=t.childNodes;a<Math.min(n,i);a++)!function(e,t,r){if(t.tagName!==r.tagName)L_(e,"beforebegin",y_(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Pt(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Pt(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)});for(var d=e.childNodes,p=t.children.length,v=r.children.length,y=0;y<Math.min(p,v);y++)N_(e,y,t.children[y],r.children[y]);if(y<p)for(var g=p-1;y<=g;g--)C_(e,d,g);else if(y<v)for(;y<v;y++)P_(e,d,y,v_(r.children[y]))}}(o[a],e[a],r[a]);if(a<n)for(var s=n-1;a<=s;s--)C_(t,o,s);else if(a<i)for(;a<i;a++)P_(t,o,a,y_(r[a]))}(n[0],e.defs,r.defs),r.hasOwnProperty("lv")||I_(n[1],e.bb,r.bb),b_(t,e,r,!0)}function x_(t,e,r){"dom"===e.type?"dom"===r.type?b_(t,e,r):"geom"===r.type?k_(t,e,r):D_(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var n=e.children.length,i=r.children.length,a=0;a<Math.min(n,i);a++)N_(t,a,e.children[a],r.children[a],!0);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)C_(t,o,s);else if(a<i)for(;a<i;a++)P_(t,o,a,v_(r.children[a]))}(t,e,r):D_(t,r):"geom"===e.type?"dom"===r.type?k_(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return S_(t,0,r,r.lv);if(r.hasOwnProperty("lv"))S_(t,0,r,r.lv);else{R_(t,e,r),I_(t.firstChild,e.bb,r.bb);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)N_(o,a,e.children[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)C_(o,s,h);else if(a<i)for(;a<i;a++)P_(o,s,a,v_(r.children[a]))}}(t,e,r):D_(t,r):"img"===e.type&&("img"===r.type?w_(t,e,r):D_(t,r))}function R_(t,e,r){var n=r.transform,i=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,h=r.filter,l=r.conClip;e.transform!==n&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),e.opacity!==i&&(1!==i&&void 0!==i?t.setAttribute("opacity",i):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==h&&(h?t.setAttribute("filter",h):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==l&&(l?t.childNodes[1].setAttribute("clip-path",l):t.childNodes[1].removeAttribute("clip-path"))}function S_(t,e,r,n){var i=r.transform,a=r.opacity,o=r.mask,s=r.filter,h=r.mixBlendMode;o?t.setAttribute("mask",o):t.removeAttribute("mask"),n!==m_&&(g_(n,E_)&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),g_(n,T_)&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),g_(n,O_)&&(s?t.setAttribute("filter",s):t.removeAttribute("filter")),g_(n,M_)&&(h?t.setAttribute("style","mix-blend-mode:"+h):t.removeAttribute("style")))}function b_(t,e,r,n){if(r.cache)S_(t,0,r,r.lv);else{r.hasOwnProperty("lv")?S_(t,0,r,r.lv):(R_(t,e,r),n||I_(t.firstChild,e.bb,r.bb));for(var i=e.children.length,a=r.children.length,o=0,s=t.lastChild,h=s.childNodes;o<Math.min(i,a);o++)x_(h[o],e.children[o],r.children[o]);if(o<i)for(var l=i-1;o<=l;l--)C_(s,h,l);else if(o<a)for(;o<a;o++)P_(s,h,o,v_(r.children[o]))}}function k_(t,e,r){R_(t,e,r),I_(t.firstChild,e.bb,r.bb);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)D_(s[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)C_(o,s,h);else if(a<i)for(;a<i;a++)P_(o,s,a,v_(r.children[a]))}function I_(t,e,r){for(var n=e.length,i=r.length,a=0;a<Math.min(n,i);a++)N_(t,a,e[a],r[a]);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)C_(t,o,s);else if(a<i)for(;a<i;a++)P_(t,o,a,v_(r[a]))}function N_(t,e,r,n,i){var a=t.childNodes;r.tagName!==n.tagName?D_(a[e],n):(w_(a[e],r,n),i&&r.content!==n.content&&(a[e].innerHTML=n.content))}function w_(e,t,r){if(!r.cache){for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=Pt(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=Pt(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)})}}function D_(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=v_(t)})):r=v_(e),L_(t,"beforebegin",r),t.parentNode.removeChild(t)}function P_(t,e,r,n){r>=e.length?L_(t,"beforeend",n):L_(e[r],"beforebegin",n)}function C_(t,e,r){e[r]&&t.removeChild(e[r])}function L_(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(d_=d_||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(d_.childNodes[0],t)}}var F_=Ft.isFunction,B_=function(){function t(){g(this,t),this.__records=[],this.__auto=[],this.__list=[]}return l(t,[{key:"add",value:function(t){-1===this.__list.indexOf(t)&&this.list.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);-1<e&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__auto=[],this.__list=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(t){var o=this,e=0<arguments.length&&void 0!==t?t:this.__records;e.length&&e.splice(0).forEach(function(t){var e,r,n,i=t.target,a=t.animate;Array.isArray(a)?a.forEach(function(t){var e=t.value,r=t.options;r.autoPlay=!1;var n=i.animate(e,r);o.add(n)}):(e=a.value,(r=a.options).autoPlay=!1,n=i.animate(e,r),o.add(n))})}},{key:"__playAuto",value:function(){this.init(this.__auto),this.__action("play")}},{key:"play",value:function(e){this.init();var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,F_(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,F_(e)&&e(t))}])}},{key:"cancel",value:function(e){var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,F_(e)&&e(t))}])}},{key:"finish",value:function(e){var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,F_(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndStop",[t,e,r&&function(t){n&&(n=!1,F_(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){n&&(n=!1,F_(r)&&r(t))}])}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"list",get:function(){return this.__list}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),H_=p.STYLE_KEY,G_=H_.POSITION,Y_=H_.DISPLAY,W_=H_.OPACITY,U_=H_.VISIBILITY,X_=H_.FILTER,K_=H_.OVERFLOW,z_=H_.MIX_BLEND_MODE,V_=H_.FILL,j_=H_.TRANSFORM,$_=H_.TRANSFORM_ORIGIN,q_=p.NODE_KEY,Z_=q_.NODE_CACHE,J_=q_.NODE_CACHE_TOTAL,Q_=q_.NODE_CACHE_OVERFLOW,tf=q_.NODE_CACHE_MASK,ef=q_.NODE_CACHE_FILTER,rf=q_.NODE_MATRIX,nf=q_.NODE_MATRIX_EVENT,af=q_.NODE_OPACITY,of=q_.NODE_COMPUTED_STYLE,sf=q_.NODE_CURRENT_STYLE,hf=q_.NODE_LIMIT_CACHE,lf=q_.NODE_BLUR_VALUE,cf=q_.NODE_REFRESH_LV,uf=q_.NODE_HAS_CONTENT,_f=q_.NODE_CACHE_STYLE,ff=q_.NODE_DEFS_CACHE,df=p.STRUCT_KEY,pf=df.STRUCT_NODE,vf=df.STRUCT_INDEX,yf=df.STRUCT_TOTAL,gf=df.STRUCT_HAS_MASK,mf=df.STRUCT_LV,Ef=Po.TRANSFORM_ALL,Tf=Po.OPACITY,Of=Po.FILTER,Mf=Po.REPAINT,Af=Po.contain,xf=Po.MIX_BLEND_MODE;function Rf(t,b,e,r,k,I){var N={},w=t.__sx1,D=t.__sy1,n=t.__config,i=n[Z_],a=n[lf],P=i&&i.available?i.bbox.slice(0):t.bbox,C=[e],L=c({},e,a);for(I[e]=1;C.length;)C.splice(0).forEach(function(t){for(var e,r,n=t+1,i=t+(b[t][yf]||0)+1;n<i;n++){var a,o,s,h,l,c,u,_=b[n],f=_[pf],d=_[yf],p=f.__sx1,v=f.__sy1,y=f.__config,g=y[lf],m=y[hf],E=y[Z_],T=y[J_],O=y[of],M=O[Y_],A=O[U_],x=O[j_],R=O[$_],S=O[W_];if(m)return;"none"!==M?"hidden"!==A&&(k[n]=t,I[n]=I[t]*S,a=void 0,s=o=0,T&&T.available?(n+=d||0,a=T.bbox.slice(0),o=T.dbx,s=T.dby):E&&E.available?(a=E.bbox.slice(0),o=E.dbx,s=E.dby):a=f.bbox,a&&(u=N[t],h=(L[t]||0)+(g||0),x&&!Lt.isE(x)&&((l=R.slice(0))[0]+=p-w+o,l[1]+=v-D+s,c=ri.calMatrixByOrigin(x,l),u=u?Lt.multiply(u,c):c),u&&(N[n]=u),a=Ft.transformBbox(a,u,h,h),d&&(L[n]=h,C.push(n)),P?(r=a,(e=P)[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[2]),e[3]=Math.max(e[3],r[3])):P=a)):n+=d||0}});if(!(P[2]-P[0]>$o.MAX||P[3]-P[1]>$o.MAX))return P;n[hf]=!0}function Sf(t,e,r){var n=t.computedStyle,i=n[j_],a=n[$_];return t.__config[tf]=$o.genMask(e,t.next,r,i,a)}var bf,kf={renderCacheCanvas:function(tt,et,rt,t){for(var m,E,nt=t.__structs,it=t.width,at=t.height,T=[],O=[],M=1,A=[],x=0,R=0,e=nt.length;R<e;R++)(function(t){var e,r,n,i,a,o,s,h,l,c=nt[t],u=c[pf],_=c[mf],f=c[yf],d=u.__config,p=d[cf],v=d[Z_],y=d[J_],g=d[of];u instanceof bn?R=t:(0===t?A.push(u):x<_?(m=E[nf],Lt.isE(m)&&(m=null),T.push(m),M=E[af],O.push(M),A.push(u)):_<x&&(e=x-_,T.splice(-e),m=T[_],O.splice(-e),M=O[_],A.splice(-e),E=A[_]),"none"===g[Y_]?R=t+=f||0:(p<Mf?(r=d[sf],n=d[of],i=d[_f],Af(p,Ef)&&(a=u.__calMatrix(p,i,r,n),o=d[rf],a&&o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5]),m&&a&&(a=Lt.multiply(m,a)),(o=d[nf])&&a&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5])),Af(p,Tf)&&(s=n[W_]=r[W_],d[af]=M*s),Af(p,Of)&&(h=n[X_]=r[X_],d[lf]=0,Array.isArray(h)&&h.forEach(function(t){var e=Pt(t,2),r=e[0],n=e[1];"blur"===r&&(d[lf]=n)}),l=u.bbox,v=v?$o.updateCache(v,l):$o.getInstance(l),(d[Z_]=v).enabled||re.warn("Downgrade for cache-filter change error")),Af(p,xf)&&(n[z_]=r[z_]),y&&y.available&&(t+=f||0)):u instanceof $u?(u.__renderSelfData=u.__renderSelf(tt,p,et,rt,!0),(v=d[Z_])&&v.available&&u.render(tt,p,v.ctx,rt,!0)):u.render(tt,p,et,rt,!0),E=d,x=_,R=t))})(R);var r,n,i,a,o=function(d){for(var p=[0],v={0:{i:0}};p.length;)p.splice(0).forEach(function(t){for(var e,r=d[t],n=v[t],i=t+1,a=i+(r[yf]||0);i<a;i++){var o,s,h=d[i],l=h[pf],c=h[yf],u=h[gf],_=l.__config,f=_[J_];"none"!==_[of][Y_]?(o={i:i},s=s||o,e&&(o.p=e),e=o,l instanceof bn||!c||(f&&f.available||(v[i]=o,p.push(i)),i+=c||0)):(i+=c||0,u&&(i+=u))}n&&e&&(n.p&&(s.p=n.p),n.p=e)});for(var t=v[0],e=[];t;)e.push(t.i),t=t.p;return e.reverse()}(nt);if(o.length){for(var s=Math.max(1,$o.NUM),h=nt[o[0]][mf],l={},c={},u={},_=0,f=o.length-1;_<f;_++)c[o[_]]=_;for(var d=0,p=o.length-1;d<p;d++){var v=nt[o[d]],y=v[pf],g=v[mf],S=v[vf],b=v[gf],k=v[yf],I=y.__config,N=I[of],w=N[G_],D=N[U_],P=N[K_],C=N[z_];if(y instanceof bn)h=g,"hidden"!==D&&(l[g-1]=l[g-1]||0,l[g-1]++);else{var L,F,B,H,G,Y,W,U=I[uf],X=I[lf],K=I[hf],z=I[J_],V=I[ef],j=I[tf],$=I[Q_],q=I[Z_],Z=void 0;if(g<h?("hidden"!==D&&U&&(l[g]=l[g]||0,l[g]++),L=l[g]||0,l[g]=0,l[g-1]=l[g-1]||0,!K&&(s<=L||("relative"===w||"absolute"===w)&&(U||L)||(b||0<X||"visible"!==P||"normal"!==C)&&(U||L))?(l[g-1]++,Z=!0):l[g-1]+=L):(l[g-1]=l[g-1]||0,!K&&(("relative"===w||"absolute"===w)&&U&&"hidden"!==D||z&&z.available||b||(0<X||"visible"!==P||"normal"!==C)&&U&&"hidden"!==D||z&&z.available)?(l[g-1]++,Z=!0):(U&&"hidden"!==D||z&&z.available)&&l[g-1]++),h=g,Z){if(z&&z.available||(z=I[J_]=function(t,e,r,n,i,a,o){if(0===n)return e.__config[J_]=o;var s={},h={},l={},c=Rf(e,i,r,0,s,l);if(c&&(a?a.reset(c):a=e.__config[J_]=$o.getInstance(c),a&&a.enabled)){var u=e.__sx1,_=e.__sy1;a.__appendData(u,_),a.__available=!0;var f=a,d=Pt(f.coords,2),p=d[0],v=d[1],y=f.ctx,g=f.dbx,m=f.dby;o&&o.available&&(y.globalAlpha=1,y.setTransform(1,0,0,1,0,0),$o.drawCache(o,a));for(var E=r+1,T=r+(n||0)+1;E<T;E++){var O,M,A,x,R,S,b,k,I,N=i[E],w=N[pf],D=N[yf],P=N[gf],C=w.__config,L=C[Z_],F=C[J_],B=C[ef],H=C[tf],G=C[Q_],Y=C[of],W=Y[Y_],U=Y[U_],X=Y[j_],K=Y[$_],z=Y[z_];"none"!==W?"hidden"!==U&&(k=h[O=s[E]],M=l[E],w instanceof bn?(y.globalAlpha=l[O],A=h[O]||[1,0,0,1,0,0],y.setTransform(A[0],A[1],A[2],A[3],A[4],A[5]),w.render(t,0,y,null,p-u+g,v-_+m)):(X&&!Lt.isE(X)&&(x=K.slice(0),L&&L.available?(x[0]+=L.sx1,x[1]+=L.sy1):(x[0]+=w.__sx1,x[1]+=w.__sy1),R=-u+g+p,S=-_+m+v,x[0]+=R,x[1]+=S,b=ri.calMatrixByOrigin(X,x),k=k?Lt.multiply(k,b):b),k&&(h[E]=k),(I=(I=G||H||B)||(F&&F.available?F:null))?E+=D||0:L&&L.available&&(I=L),I&&(y.globalCompositeOperation="normal"!==z?"source-over":z.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()}),y.globalAlpha=M,k?y.setTransform(k[0],k[1],k[2],k[3],k[4],k[5]):y.setTransform(1,0,0,1,0,0),$o.drawCache(I,a),I===H&&(E+=P)))):(E+=D||0,P&&(E+=P))}return a}}(tt,y,S,k||0,nt,z,q)),(!z||!z.available)&&U)continue;var J=z;if(!(0<X)||V&&V.available||(J=I[ef]=(i=z,a=X,y.__config[ef]=$o.genBlur(i,a))),"hidden"!==P||$&&$.available||(J=I[Q_]=(n=J,(r=y).__config[Q_]=$o.genOverflow(n,r))),b&&(!j||!j.available)){for(var Q=void 0,ot=S+k;b--;)ot++,c.hasOwnProperty(ot)&&(Q=ot);var st=y.next.isClip;Q?u[Q]={target:J,node:y,isClip:st,__config:I,__hasContent:U}:U&&(I[tf]=Sf(y,J,st))}}u.hasOwnProperty(S)&&(B=(F=u[S]).target,H=F.node,G=F.isClip,Y=F.__config,W=F.__hasContent,H instanceof eu&&!W||(Y[tf]=Sf(H,B,G)))}}}for(var ht={},lt={},ct={},ut={},_t={},ft=0,dt=nt.length;ft<dt;ft++)(function(s){var t=nt[s],e=t[pf],r=t[yf],n=t[gf],i=e.__config,a=i[af],o=i[nf],h=i[lf],l=i[hf],c=i[Z_],u=i[J_],_=i[ef],f=i[tf],d=i[Q_],p=i[cf],v=i[of],y=v[Y_],g=v[U_],m=v[K_],E=v[z_];if(e instanceof bn)et.globalAlpha=a,et.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]),e.render(tt,0,et,rt);else{var T,O,M,A,x=d||f||_;if(x=x||(u&&u.available?u:null)){if("none"===y)return s+=r||0,n&&(s+=n),ft=s;if(et.globalCompositeOperation="normal"===E?"source-over":E.replace(/[A-Z]/,function(t){return ft=s,"-"+t.toLowerCase()}),n){for(var R=s+(r||0)+1;n--;)R+=(nt[R][yf]||0)+1;s=R-1}s+=r||0,$o.draw(et,a,o,x),et.globalCompositeOperation="source-over"}else{if(ut.hasOwnProperty(s)&&(et=ut[s].ctx),c&&c.available){if("none"===y)return s+=r||0,n&&(s+=n),ft=s;var S,b,k,I,N,w,D,P={};if(!h||(I=re.getCacheCanvas(it,at)).ctx&&(S={ctx:et,blur:h,target:I},et=I.ctx,P.offScreenFilter=S),n){for(var C,L=s+(r||0)+1;n--;)L+=(nt[L][yf]||0)+1;s=L-1,S?b=S:(C=re.getCacheCanvas(it,at)).ctx&&(b={ctx:et,target:C},et=C.ctx),P.offScreenMask=b}"hidden"===m&&(S||b?k=S||b:(N=re.getCacheCanvas(it,at)).ctx&&(k={ctx:et,target:N},et=N.ctx),P.offScreenOverflow=k),"normal"!==E&&(S||b||k?D=S||b||k:(w=re.getCacheCanvas(it,at),D={ctx:et,target:w,mixBlendMode:E},et=w.ctx),P.offScreenBlend=D),"hidden"!==g&&$o.draw(et,a,o,c)}else if(l){if(P=e instanceof $u?e.__renderSelfData=e.__renderSelf(tt,p,et,rt):e.render(tt,p,et,rt),"none"===y)return s+=r||0,n&&(s+=n),ft=s;var F,B,H,G=P||{},Y=G.offScreenFilter,W=G.offScreenMask,U=G.offScreenOverflow,X=G.offScreenBlend;if(Y&&((ht[F=s+(r||0)]=ht[F]||[]).unshift(Y),et=Y.target.ctx),W){for(var K,z,V=s+(r||0)+1;n--;){var j=nt[V],$=j[yf],q=j[pf].currentStyle,Z=q[Y_],J=q[U_];"none"!==Z?("hidden"!==J&&(K?z=V:K=z=V),V++):V+=($||0)+1}var Q=re.getCacheCanvas(it,at);ut[K]=Q,_t[z]={mask:Q,offScreenMask:W,isClip:nt[K][pf].isClip},et=W.target.ctx}X&&((ct[B=s+(r||0)]=ct[B]||[]).unshift(X),et=X.target.ctx),U&&((lt[H=s+(r||0)]=lt[H]||[]).unshift(U),et=U.target.ctx),e instanceof $u&&e.render(tt,e.__refreshLevel,et,rt)}else n&&(s+=r||0,s+=n);ht.hasOwnProperty(s)&&ht[s].forEach(function(t){var e,r=re.getCacheWebgl(it,at,"__$$blur$$__");wi.gaussBlur(t.target,r,t.blur,it,at).clear(),ut.hasOwnProperty(s+1)||lt.hasOwnProperty(s)||ct.hasOwnProperty(s)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(e.canvas),et=t.ctx)}),lt.hasOwnProperty(s)&&lt[s].forEach(function(t){var e=t.target,r=t.ctx,n=t.x,i=t.y,a=t.outerWidth,o=t.outerHeight;et.globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.fillStyle="#FFF",et.beginPath(),et.rect(n,i,a,o),et.fill(),et.closePath(),et.globalCompositeOperation="source-over",ut.hasOwnProperty(s+1)||ct.hasOwnProperty(s)||(r.drawImage(e.canvas,0,0),et.clearRect(0,0,it,at),re.releaseCacheCanvas(e.canvas),et=r)}),ct.hasOwnProperty(s)&&ct[s].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,ut.hasOwnProperty(s+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(e.canvas),(et=t.ctx).globalCompositeOperation="source-over")}),_t.hasOwnProperty(s)&&(O=(T=_t[s]).mask,M=T.offScreenMask,T.isClip?((et=O.ctx).globalCompositeOperation="source-out",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(M.target.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",M.target.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(M.target.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),et.globalCompositeOperation="source-over",O.draw(et),O.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(O.canvas)):((et=M.target.ctx).globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",O.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(O.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),A=M.target,et.drawImage(A.canvas,0,0),et.globalCompositeOperation="source-over",A.draw(et),A.ctx.clearRect(0,0,it,at),re.releaseCacheCanvas(M.target.canvas)))}}ft=s})(ft)},renderCanvas:function(I,N,w,t){for(var D=t.__structs,P=t.width,C=t.height,L={},F={},B={},H={},G={},Y=0,e=D.length;Y<e;Y++)(function(h){var t=D[h],e=t[pf],r=t[yf],n=t[gf],i=e.__config,a=i[of],o=i[cf];H.hasOwnProperty(h)&&(N=H[h].ctx);var s=void 0,s=e instanceof $u?e.__renderSelfData=e.__renderSelf(I,o,N,w):e.render(I,o,N,w);if("none"===a[Y_])return h+=r||0,n&&(h+=n),Y=h;var l,c,u,_,f,d,p,v=s||{},y=v.offScreenFilter,g=v.offScreenMask,m=v.offScreenOverflow,E=v.offScreenBlend;if(y&&((L[l=h+(r||0)]=L[l]||[]).unshift(y),N=y.target.ctx),g||n){for(var T,O,M=h+(r||0)+1;n--;){var A=D[M],x=A[yf],R=A[pf].currentStyle,S=R[Y_],b=R[U_];"none"!==S?("hidden"!==b&&(T?O=M:T=O=M),M++):M+=(x||0)+1}var k=re.getCacheCanvas(P,C);H[T]=k,G[O]={mask:k,offScreenMask:g,isClip:D[T][pf].isClip},N=g.target.ctx}E&&((B[c=h+(r||0)]=B[c]||[]).unshift(E),N=E.target.ctx),m&&((F[u=h+(r||0)]=F[u]||[]).unshift(m),N=m.target.ctx),e instanceof $u&&e.render(I,o,N,w),L.hasOwnProperty(h)&&L[h].forEach(function(t){var e,r=re.getCacheWebgl(P,C,"__$$blur$$__");wi.gaussBlur(t.target,r,t.blur,P,C).clear(),H.hasOwnProperty(h+1)||F.hasOwnProperty(h)||B.hasOwnProperty(h)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,P,C),re.releaseCacheCanvas(e.canvas),N=t.ctx)}),F.hasOwnProperty(h)&&F[h].forEach(function(t){var e=t.matrix,r=t.target,n=t.ctx,i=t.x,a=t.y,o=t.outerWidth,s=t.outerHeight;N.globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),N.fillStyle="#FFF",N.beginPath(),N.rect(i,a,o,s),N.fill(),N.closePath(),N.globalCompositeOperation="source-over",H.hasOwnProperty(h+1)||B.hasOwnProperty(h)||(n.setTransform(1,0,0,1,0,0),n.globalAlpha=1,n.drawImage(r.canvas,0,0),N.clearRect(0,0,P,C),re.releaseCacheCanvas(r.canvas),N=n)}),B.hasOwnProperty(h)&&B[h].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,H.hasOwnProperty(h+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,P,C),re.releaseCacheCanvas(e.canvas),(N=t.ctx).globalCompositeOperation="source-over")}),G.hasOwnProperty(h)&&(f=(_=G[h]).mask,d=_.offScreenMask,_.isClip?((N=f.ctx).globalCompositeOperation="source-out",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(d.target.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",d.target.ctx.clearRect(0,0,P,C),re.releaseCacheCanvas(d.target.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),N.globalCompositeOperation="source-over",f.draw(N),f.ctx.clearRect(0,0,P,C),re.releaseCacheCanvas(f.canvas)):((N=d.target.ctx).globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",f.ctx.clearRect(0,0,P,C),re.releaseCacheCanvas(f.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),p=d.target,N.drawImage(p.canvas,0,0),N.globalCompositeOperation="source-over",p.draw(N),p.ctx.clearRect(0,0,P,C),re.releaseCacheCanvas(d.target.canvas))),Y=h})(Y)},renderSvg:function(tt,et,rt,t,e){var nt=t.__structs,it=t.width,at=t.height,ot={};if(!e)for(var r=0,n=nt.length;r<n;r++){var i=nt[r],a=i[pf],o=i[yf],s=i[gf],h=a.__config,l=h[cf],c=h[ff];s&&(Mf<=l||Af(l,Ef|Tf))&&(ot[r+(o||0)+1+s-1]=l),l<Mf&&function(){var t,e=Af(l,Of);ot.hasOwnProperty(r)?(t=ot[r],!Af(l,Ef)&&t<Mf&&!Af(t,Ef)&&c.forEach(function(t){e&&"filter"===t.tagName&&"feGaussianBlur"===t.children[0].tagName||rt.addCache(t)})):c.forEach(function(t){e&&"filter"===t.tagName&&"feGaussianBlur"===t.children[0].tagName||rt.addCache(t)})}()}for(var st,ht,lt,ct={},ut=[],_t=[],ft=0,dt=0,u=nt.length;dt<u;dt++)!function(t){var e,r,n,i=nt[t],l=i[pf],a=i[yf],o=i[gf],s=i[mf],c=l.__config,h=l.computedStyle[Y_],u=c[J_],_=c[cf],f=c[ff];o&&"none"!==h&&(ct[(r=(e=t+(a||0)+1)+o)-1]={index:t,start:e,end:r,isClip:nt[e][pf].isClip}),s<ft?(ut.splice(s),st=ut[s-1],_t.splice(s),ht=_t[s-1]):ft<s&&(ut.push(lt.__matrix),n=lt.virtualDom,_t.push(n),ht=n);var d=void 0;if(_<Mf&&!(l instanceof bn)){d=l.virtualDom;u&&u.available?(t+=a||0,d.cache=!0):(u&&(u.available=!0),d=l.__virtualDom=Ft.extend({},d),l instanceof Sc&&!(l instanceof eu)&&(d.children=[]),delete d.cache,"none"===l.computedStyle[Y_]&&(t+=a||0));var p,v,y,g,m=c[sf],E=c[of],T=c[_f];if(Af(_,Ef)&&(p=l.__calMatrix(_,T,m,E),v=c[rf],p&&v&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5]),!p||Lt.isE(p)?delete d.transform:d.transform="matrix("+Ft.joinArr(p,",")+")",st&&p&&(p=Lt.multiply(st,p)),(v=c[nf])&&p&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5])),Af(_,Tf)&&(1===(y=E[W_]=m[W_])?delete d.opacity:d.opacity=y),Af(_,Of)){var O=E[X_]=m[X_];delete d.filter;for(var M=f.length-1;0<=M;M--){var A=f[M];if("filter"===A.tagName&&"feGaussianBlur"===A.children[0].tagName){rt.removeCache(A);break}}Array.isArray(O)&&O.forEach(function(t){var e,r,n,i,a,o=Pt(t,2),s=o[0],h=o[1];"blur"===s&&0<h&&(i={tagName:"filter",props:[["x",-(e=Lt.int2convolution(h))/(r=l.outerWidth)],["y",-e/(n=l.outerHeight)],["width",1+2*e/r],["height",1+2*e/n]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",h]]}]},a=rt.add(i),c[ff].push(i),d.filter="url(#"+a+")")})}Af(_,xf)&&("normal"!==(g=E[z_]=m[z_])?d.mixBlendMode=g:delete d.mixBlendMode),d.lv=_}else c[ff]&&c[ff].splice(0),l instanceof $u&&(l.__renderSelfData=l.__renderSelf(tt,_,et,rt)),l.render(tt,_,et,rt),d=l.virtualDom,"none"===h&&(t+=a||0,o&&(t+=o));if(ct.hasOwnProperty(t)&&(ot.hasOwnProperty(t)||Mf<=_||Af(_,Ef|Tf))){var x=ct[t],R=x.index,S=x.start,b=x.end,k=x.isClip,I=nt[R][pf],N=[];k&&N.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(it,",0L").concat(it,",").concat(at,"L0,").concat(at,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var w=S;w<b;w++){var D=nt[w][pf],P=D.computedStyle,C=P[Y_],L=P[U_],F=P[V_],B=D.virtualDom,H=B.children,G=B.opacity;if("none"!==C&&"hidden"!==L){H=Ft.clone(H),N=N.concat(H);for(var Y=0,W=H.length;Y<W;Y++){var U=H[Y],X=U.tagName,K=U.props;if("path"===X){if(k)for(var z=0,V=K.length;z<V;z++){var j=K[z];"fill"===j[0]&&(j[1]=Ft.int2invert(F[0]))}var $=D.renderMatrix,q=Lt.inverse(I.renderMatrix),$=Lt.multiply(q,$);K.push(["transform","matrix(".concat($.join(","),")")]),Ft.isNil(G)||1===G||K.push(["opacity",G])}}}}for(var Z=f.length-1;0<=Z;Z--){"mask"===f[Z].tagName&&f.splice(Z,1)}var J={tagName:"mask",props:[],children:N},Q=rt.add(J);f.push(J),Q="url(#"+Q+")",I.virtualDom.mask=Q}ht&&!l.isMask&&ht.children.push(d),0===t&&(st=c[rf],ht=d),ft=s,lt=l,dt=t}(dt)}},If=p.STYLE_KEY,Nf=If.TOP,wf=If.RIGHT,Df=If.BOTTOM,Pf=If.LEFT,Cf=If.POSITION,Lf=If.DISPLAY,Ff=If.VISIBILITY,Bf=If.COLOR,Hf=If.WIDTH,Gf=If.HEIGHT,Yf=If.Z_INDEX,Wf=If.MARGIN_TOP,Uf=If.MARGIN_LEFT,Xf=If.PADDING_TOP,Kf=If.PADDING_LEFT,zf=If.BORDER_TOP_WIDTH,Vf=If.BORDER_LEFT_WIDTH,jf=p.UPDATE_KEY,$f=jf.UPDATE_NODE,qf=jf.UPDATE_STYLE,Zf=jf.UPDATE_KEYS,Jf=jf.UPDATE_COMPONENT,Qf=jf.UPDATE_FOCUS,td=jf.UPDATE_IMG,ed=jf.UPDATE_MEASURE,rd=jf.UPDATE_OVERWRITE,nd=jf.UPDATE_LIST,id=jf.UPDATE_CONFIG,ad=p.NODE_KEY,od=ad.NODE_TAG_NAME,sd=ad.NODE_CACHE_STYLE,hd=ad.NODE_CACHE_PROPS,ld=ad.NODE_CURRENT_STYLE,cd=ad.NODE_COMPUTED_STYLE,ud=ad.NODE_CURRENT_PROPS,_d=ad.NODE_DOM_PARENT,fd=ad.NODE_IS_MASK,dd=ad.NODE_REFRESH_LV,pd=ad.NODE_IS_DESTROYED,vd=ad.NODE_STYLE,yd=ad.NODE_UPDATE_HASH,gd=ad.NODE_UNIQUE_UPDATE_ID,md=ad.NODE_CACHE,Ed=ad.NODE_CACHE_TOTAL,Td=ad.NODE_CACHE_FILTER,Od=ad.NODE_CACHE_OVERFLOW,Md=ad.NODE_CACHE_MASK,Ad=ad.NODE_STRUCT,xd=p.STRUCT_KEY,Rd=xd.STRUCT_INDEX,Sd=xd.STRUCT_TOTAL,bd=xd.STRUCT_NODE,kd=(c(bf={},Nf,!0),c(bf,wf,!0),c(bf,Df,!0),c(bf,Pf,!0),bf),Id=Ft.isNil,Nd=Ft.isObject,wd=Ft.isFunction,Dd=R.AUTO,Pd=R.PX,Cd=R.PERCENT,Ld=R.INHERIT,Fd=ln.calRelative,Bd=ln.isRelativeOrAbsolute,Hd=ln.equalStyle,Gd=Po.contain,Yd=Po.getLevel,Wd=Po.isRepaint,Ud=Po.NONE,Xd=Po.FILTER,Kd=Po.REPAINT,zd=Po.REFLOW,Vd=be.isIgnore,jd=be.isGeom,$d=be.isMeasure;function qd(t,e){var r=t.currentStyle[e],n=t.computedStyle[e];if(r[1]===Pd)return r[0]===n;if(r[1]!==Cd)return!1;var i=t.domParent.__layoutData["width"===e?"w":"h"];return r[0]*i*.01===n}function Zd(t){return qd(t,Hf)&&qd(t,Gf)}var Jd=1;function Qd(t,e){return t.hasOwnProperty("__uniqueReflowId")&&e[t.__uniqueReflowId]>=Jd}function tp(t,e,r){var n,i,a;i=e,a=r,(n=t).hasOwnProperty("__uniqueReflowId")||(n.__uniqueReflowId=ep,i[ep++]={node:n,lv:Jd,component:a}),e[t.__uniqueReflowId].lv|=Jd}var ep=0;var rp=0;function np(t,e,r,n,i,a,o,s,h){var l,c=r[$f],u=r[qf],_=r[rd],f=r[Qf],d=r[td],p=r[Jf],v=r[ed],y=r[nd],g=r[Zf],m=r[id];if(!m[pd]){_&&Object.assign(m[vd],_),y&&!p&&(g=(g||[]).slice(0),l={},g.forEach(function(t){l[t]=!0}),y.forEach(function(t){var e=t[qf],r=t[rd];(t[Zf]||[]).forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,g.push(t))}),r&&Object.assign(m[vd],r),e&&(u?Object.assign(u,e):u=e)}));var E,T,O,M,A=m[od],x=m[sd],R=m[hd],S=m[ld],b=m[cd],k=m[ud],I=m[_d],N=m[fd],w=f||Ud,D=v;if(!p&&u&&g)for(var P=0,C=g.length;P<C;P++){var L=g[P],F=u[L];if(c instanceof $u&&jd(A,L))Hd(L,F,k[L],c)||(w|=Kd,R[L]=void 0,k[L]=F);else if(!Hd(L,F,S[L],c))if(Vd(L))x[L]=void 0,S[L]=F;else{if(kd.hasOwnProperty(L)){var B=S[Cf];if("relative"!==B&&"absolute"!==B){delete u[L];continue}}else L===Lf&&(M=!0);w|=Yd(L),$d(L)&&(D=!0),x[L]=void 0,S[L]=F,L===Yf&&c!==e&&(E=!0),L===Ff&&(T=!0),L===Bf&&(O=!0)}}if(w!==Ud||p){if(E&&I&&delete I.__zIndexChildren,T||O)for(var H=e.__structs,G=c.__config[Ad],Y=G[Rd]+1,W=Y+G[Sd];Y<W;Y++){var U=H[Y],X=U[bd],K=U[Sd],z=X.__config,V=z[ld],j=void 0;T&&(X instanceof bn||V[Ff][1]===Ld)&&(j=!0),O&&(X instanceof bn||V[Bf][1]===Ld)&&(j=!0),j?(z[dd]|=Kd,X instanceof vl&&X.__cancelCache()):Y+=K||0}if(N){for(var $=c.prev;$&&$.isMask;)$=$.prev;$&&$.__config[Md]&&($.__config[Md].release(),$.__config[Md]=null)}!p&&Wd(w)?(E&&t===Ct.SVG&&(w|=Kd,I&&ip(I)),E&&!p&&s&&I&&!I.hasOwnProperty("__uniqueZId")&&(s[rp]=!0,I.__uniqueZId=rp++,h.push(I))):(n.push({node:c,style:u,img:d,component:p}),D&&i.push(c)),m[dd]|=w;var q=Kd<=w||t===Ct.SVG&&c instanceof $u;if(q&&(m[md]&&m[md].release(),m[Ed]&&m[Ed].release(),m[Md]&&(m[Md].release(),m[Md]=null),m[Od]&&(m[Od].release(),m[Od]=null)),(q||Gd(w,Xd))&&m[Td]&&(m[Td].release(),m[Td]=null),"none"===b[Lf]&&w<zd)return!1;var Z=I;if(M)for(;Z;){var J=Z.__config;if("none"===J[cd][Lf])return!(b[Lf]="none");Z=J[_d]}for(Z=I;Z;){var Q=Z.__config;if(Q.hasOwnProperty(gd)){var tt=Q[gd];if(a.hasOwnProperty(tt))break;a[tt]=!0}else a[rp]=!0,Q[gd]=rp++,o.push(Z);var et=Q[dd];Kd<=et&&Q[md]&&Q[md].release(),Q[Ed]&&Q[Ed].release(),Q[Td]&&(Q[Td].release(),Q[Td]=null),Q[Md]&&(Q[Md].release(),Q[Md]=null),Q[Od]&&(Q[Od].release(),Q[Od]=null),Z=Q[_d]}return!0}delete m[gd]}}function ip(t,e){var r=t.__config;e?r[dd]|=Kd:r[Ed].release(),Array.isArray(t.children)&&t.children.forEach(function(t){t instanceof Nl&&(t=t.shadowRoot),t instanceof bn||ip(t,!0)})}var ap=0,op=function(){t(a,Sc);var i=e(a);function a(t,e,r){var n;return g(this,a),(n=i.call(this,t,e)).__cd=r||[],n.__dom=null,n.__mw=0,n.__mh=0,n.__task=[],n.__taskCp=[],n.__ref={},n.__updateHash={},n.__reflowList=[{node:h(n)}],n.__animateController=new B_,Pi.mix(h(n)),n.__config[yd]=n.__updateHash,n}return l(a,[{key:"__initProps",value:function(){var t,e=this.props.width;Id(e)||0<(t=parseFloat(e)||0)&&(this.__width=t);var r,n=this.props.height;Id(n)||0<(r=parseFloat(n)||0)&&(this.__height=r)}},{key:"__genHtml",value:function(){var r=this,n="<".concat(this.tagName);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(n+=function(t,e){var r=Array.isArray(e)?Ft.joinSourceArray(e):Ft.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+Ft.encodeHtml(r,!0)+'"'}(t,e))}),n+="></".concat(this.tagName,">")}},{key:"__wrapEvent",value:function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f;return-1===["touchend","touchcancel"].indexOf(t.type)&&(e=this.dom,r=this.__scx,n=this.__scy,a=(i=e.getBoundingClientRect()).x,o=i.y,s=i.left,h=i.top,l=i.width,c=i.height,u=a||s||0,_=o||h||0,u=(f=t.touches?t.touches[0]:t).clientX-u,_=f.clientY-_,Id(r)?u*=this.width/l:u/=r,Id(n)?_*=this.height/c:_/=n),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:u,y:_,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e),e}}},{key:"appendTo",value:function(t){var e,n,i;t=function(t){if(Ft.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Rl.initRoot(this.__cd,this),this.__initProps(),(this.__root=this).cache=!!this.props.cache,t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(this.tagName),this.__dom||(t.innerHTML=this.__genHtml(),this.__dom=t.querySelector(this.tagName))),this.__uuid=Id(this.__dom.__uuid)?ap++:this.__dom.__uuid,this.__defs=this.dom.__defs||au.getInstance(this.__uuid),this.width&&this.height||(e=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=Ct.CANVAS):"svg"===this.tagName&&(this.__renderMode=Ct.SVG),this.refresh(null,!0),this.dom.__root?this.dom.__root.destroy():(n=this.dom,i=a,["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(r){n.addEventListener(r,function(t){var e=n.__root;e&&e instanceof i&&(-1<["touchend","touchcancel","touchmove"].indexOf(r)?e.__touchstartTarget&&e.__touchstartTarget.__emitEvent(e.__wrapEvent(t),!0):e.__cb(t))})}),this.dom.__uuid=this.__uuid),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r,n=this.isDestroyed,i=this.renderMode,a=this.ctx,o=this.defs,s=this.width,h=this.height;if(!n){if(o.clear(),e)this.__checkRoot(s,h),this.__computeMeasure(i,a);else if(!this.__checkUpdate(i,a,s,h))return;re.measureText(),this.__checkReflow(s,h),i===Ct.CANVAS?(this.__clear(a),this.cache?kf.renderCacheCanvas(i,a,o,this):kf.renderCanvas(i,a,o,this)):i===Ct.SVG&&(kf.renderSvg(i,a,o,this,e),(r=this.virtualDom).defs=o.value,this.dom.__root?A_(this.dom,this.dom.__vd,r):this.dom.innerHTML=Ft.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=o),wd(t)&&t(),this.emit(Pi.REFRESH)}}},{key:"destroy",value:function(){this.__destroy();var t=this.dom;t&&(t.__root=null)}},{key:"scale",value:function(t,e){var r=0<arguments.length&&void 0!==t?t:1,n=1<arguments.length&&void 0!==e?e:r;this.__scx=r,this.__scy=n}},{key:"resize",value:function(t,e,r){t===this.width&&e===this.height||(this.__width=t,this.__hegiht=e,this.addRefreshTask(r||function(){}))}},{key:"addRefreshTask",value:function(t){var e,n;t&&((e=this.task).length||(Bi.nextFrame({__before:function(r){(n=e.splice(0)).length&&n.forEach(function(t,e){Nd(t)&&wd(t.__before)&&t.__before(r)})},__after:function(e){n.forEach(function(t){Nd(t)&&wd(t.__after)?t.__after(e):wd(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.task,r=0,n=e.length;r<n;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,n=this,i=this.taskCp;i.length||(Bi.__nextFrameCp({__before:function(e){(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),p_.check(n),p_.updateList.length&&p_.updateList.forEach(function(t){var e=t.shadowRoot;e instanceof bn&&(e=e.domParent);var r={};r[$f]=e,r[qf]=e.currentStyle,r[Qf]=zd,r[ed]=!0,r[Jf]=t,r[id]=e.__config,n.__addUpdate(e,e.__config,n,n.__config,r)}))},__after:function(e){r.forEach(function(t){t.__after(e)}),p_.did()}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t)}},{key:"__checkRoot",value:function(t,e){var r=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(r[Lf])&&(n[Lf]=r[Lf]="block"),"absolute"===r[Cf]&&(n[Cf]=r[Cf]="static"),r[Hf]=[t,Pd],r[Gf]=[e,Pd],n[Hf]=t,n[Gf]=e}},{key:"__addUpdate",value:function(t,e,r,n,i){var a,o,s,h=n[yd];t===r?(h=r.__updateRoot)?(i[td]&&(h[td]=i[td]),i[Qf]&&(h[Qf]|=i[Qf]),i[ed]&&(h[ed]=!0),i[qf]&&(h[nd]=h[nd]||[]).push((c(a={},qf,i[qf]),c(a,rd,i[rd]),c(a,Zf,i[Zf]),a))):r.__updateRoot=i:e.hasOwnProperty(gd)?h.hasOwnProperty(e[gd])?(o=h[e[gd]],i[td]&&(o[td]=i[td]),i[Qf]&&(o[Qf]|=i[Qf]),i[ed]&&(o[ed]=!0),i[qf]&&(o[nd]=o[nd]||[]).push((c(s={},qf,i[qf]),c(s,rd,i[rd]),c(s,Zf,i[Zf]),s))):re.error("Update process miss uniqueUpdateId"):(e[gd]=rp,h[rp++]=i)}},{key:"__checkUpdate",value:function(s,h,t,e){var l=this,r=[],n=[],i={},a=[],o={},c=[],u=l.__updateRoot,_=l.__updateHash;u&&(l.__updateRoot=null,y=np(s,l,u,n,r,i,a),l.__checkRoot(t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var v=np(s,l,_[f[d]],n,r,i,a,o,c),y=y||v;l.__reflowList=n,rp=0,l.__updateHash=l.__config[yd]={},a.forEach(function(t){delete t.__config[gd]}),c.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(l.__structs))});var g={};r.forEach(function(t){var e=t.__config[gd],r=t.domParent;if(!g.hasOwnProperty(e)){g[e]=!0;var n=t;if(be.isMeasureInherit(_[e][qf]))for(;r&&r!==l;){var i,a=r.__config[gd],o=r.currentStyle;if(!(r.__config.hasOwnProperty(gd)?(i=_[a][qf],g[a]=!0,!!be.measureInheritList(i).length):be.isMeasureInherit(o)))break;r=(n=r).domParent}n.__computeMeasure(s,h,function(t){t.__config.hasOwnProperty(gd)&&(g[t.__config[gd]]=!0)})}});for(var m=0,E=f.length;m<E;m++)delete _[f[m]][id][gd];return y}},{key:"__checkReflow",value:function(t,e){var ht=this,r=this.__reflowList;if(r.length){for(var n,lt=this,ct={},i=ep=0,a=r.length;i<a;i++){var o=r[i],s=o.node,h=o.style,l=o.img,c=o.component;if(s===this){n=!0;break}var u=s.currentStyle,_=s.computedStyle;s.hasOwnProperty("__uniqueReflowId")||(s.__uniqueReflowId=ep,ct[ep++]={node:s,lv:0,img:l,component:c});var f=ct[s.__uniqueReflowId];if("absolute"===u[Cf]&&"absolute"===_[Cf])f.lv=Jd;else if(u[Cf]!==_[Cf]){if(f.lv=Jd,R(s,c,!0)){n=!0;break}}else{var d=!0;if(h)for(var p=Object.keys(h),v=0,y=p.length;v<y;v++){var g=p[v];if(!kd.hasOwnProperty(g)){d=!1;break}}if(!d||l||c){if(f.lv=Jd,R(s,c)){n=!0;break}}else"relative"===_[Cf]&&(f.lv|=0)}}if(ep=0,this.__reflowList=[],n)return r.forEach(function(t){return delete t.node.__uniqueReflowId}),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;var m=[];this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){var r,n=ct[t.__uniqueReflowId];return delete t.__uniqueReflowId,n.lv>=Jd||(r=[],t.__deepScan(function(t,e){},{uniqueList:r}),r.forEach(function(t){e.uniqueList.push(t)})),e.uniqueList.push(n),!0}},{uniqueList:m});var ut=[],_t=0;m.forEach(function(t){var e=t.node,r=t.lv,n=t.component;if(Jd<=r){var i=e.computedStyle,a=e.currentStyle,o=i[Yf],s=i[Cf],h=i[Lf],l="absolute"===s,c="absolute"===a[Cf],u="none"===h,_="none"===a[Lf];if(u&&_)return;for(var f=e.domParent,d=f.__layoutData,p=d.x,v=d.y,y=(d.w,d.h),g=f.width,m=f.computedStyle,E=e;n&&E.isShadowRoot;)E=E.host;var T=E.prev;T?(v=T.y,v+=T.outerHeight):(v=f.y,v+=m[Wf]+m[zf]+m[Xf]),p+=m[Uf]+m[Vf]+m[Kf];var O,M=e.outerWidth,A=e.outerHeight,x=e;if(c){for(x=x.domParent;x&&x!==lt&&!Bd;)if(x.parent)x=x.parent;else if(x.host)break;var R,S,x=x||lt;if(n?f.__layoutAbs(x,null,n):f.__layoutAbs(x,null,e),l)return void(n?(R=e.__modifyStruct(lt,_t),_t+=R[1],ut.push(R),(s===a[Cf]||"static"!==s&&"static"!==a[Cf])&&o===a[Yf]||(e.domParent.__updateStruct(lt.__structs),ht.renderMode===Ct.SVG&&ip(e.domParent))):(u||_)&&(e.__zIndexChildren=null,S=e.__modifyStruct(lt,_t),_t+=S[1],ut.push(S)));O=!0}else e.__layout({x:p,y:v,w:g,h:y}),e instanceof Sc&&(!e.parent&&e.host&&(x=e),e.__layoutAbs(x,{x:p,y:v,w:g,h:y}));var b,k,I,N,w="absolute"===e.computedStyle[Cf];N=O?(b=-M,-A):(k=e.outerWidth,I=e.outerHeight,w?(b=k,I):(b=k-M,I-A));for(var D,P,C=e;C&&C!==lt;)if("relative"===(m=(C=C.domParent).computedStyle)[Cf]){var L=C.ox,F=C.oy;L&&e.__offsetX(L),F&&e.__offsetY(F);break}if(b||N){for(var B,H=e;;){for(;H.isShadowRoot;)H=H.host;for(var G=(B=H).next;G;)"absolute"===G.currentStyle[Cf]?G.currentStyle[Nf][1]===Dd&&G.currentStyle[Df][1]===Dd&&(G.__offsetY(N,!0,zd),G.__cancelCache()):(!G.hasOwnProperty("____uniqueReflowId")||ct[G.____uniqueReflowId]<Jd)&&(G.__offsetY(N,!0,zd),G.__cancelCache()),G=G.next;if((H=H.parent)===lt)break;var Y,W=H.currentStyle,U="absolute"===W[Cf];if(b&&(Y=void 0,U&&(W[Hf][1]!==Dd||W[Pf][1]!==Dd&&W[wf][1]!==Dd||(Y=!0)),Y&&(H.__resizeX(b),H.__cancelCache(),H.__config[dd]|=zd)),N){var X=void 0;if(U?W[Gf][1]!==Dd||W[Nf][1]!==Dd&&W[Df][1]!==Dd||(X=!0):W[Gf][1]===Dd&&(X=!0),!X)break;H.__resizeY(N),H.__cancelCache(),H.__config[dd]|=zd}}for(;B;)B.__cancelCache(),B.__config[dd]|=zd,B=B.domParent}n?(D=e.__modifyStruct(lt,_t),_t+=D[1],ut.push(D),(s===a[Cf]||"static"!==s&&"static"!==a[Cf])&&o===a[Yf]||(e.domParent.__updateStruct(lt.__structs),ht.renderMode===Ct.SVG&&ip(e.domParent))):(u||_)&&(e.__zIndexChildren=null,P=e.__modifyStruct(lt,_t),_t+=P[1],ut.push(P))}else{var K=e.currentStyle,z=K[Nf],V=K[wf],j=K[Df],$=K[Pf],q=e.currentStyle,Z=e.computedStyle,J=Z[Nf],Q=Z[wf],tt=Z[Df],et=Z[Pf],rt=e.computedStyle,nt=e===ht?e:e.domParent,it=0;z[1]!==Dd?(it=Fd(q,"top",z,nt),rt[Nf]=it,rt[Df]="auto"):j[1]!==Dd?(it=-Fd(q,"bottom",j,nt),rt[Df]=-it,rt[Nf]="auto"):rt[Nf]=rt[Df]="auto";var at=0;"auto"!==J?at=J:"auto"!==tt&&(at=-tt),it!==at&&e.__offsetY(it-at,!1,zd);var ot=0;$[1]!==Dd?(ot=Fd(q,"left",$,nt),rt[Pf]=ot,rt[wf]="auto"):V[1]!==Dd?(ot=-Fd(q,"right",V,nt),rt[wf]=-ot,rt[Pf]="auto"):rt[Pf]=rt[wf]="auto";var st=0;"auto"!==et?st=et:"auto"!==Q&&(st=-Q),ot!==st&&e.__offsetX(ot-st,!1,zd)}});var E=0,T=0,O=!0,M=lt.__structs;ut.forEach(function(t){var e=Pt(t,2),r=e[0],n=e[1];if(O)O=!1,T=r[Rd]+(r[Sd]||0)+1,E+=n;else{for(var i=r[Rd]+(r[Sd]||0)+1+E,a=T;a<i;a++)M[a][Rd]+=E;T=i,E+=n}});for(var A=T,x=M.length;A<x;A++)M[A][Rd]+=E;r.forEach(function(t){return delete t.node.__uniqueReflowId})}function R(t,e,r){if(!Zd(t)||r){var n=t;if("inline"===t.currentStyle[Lf]||"inline"===t.computedStyle[Lf]){var i=t.domParent;do{if((n=i)===lt)return 1;if(Qd(i,ct))return;if("absolute"===i.currentStyle[Cf]||"absolute"===i.computedStyle[Cf])return void tp(i,ct,e);if(Zd(i))return void tp(i,ct,e);i=i.domParent}while(i&&("inline"===i.currentStyle[Lf]||"inline"===i.computedStyle[Lf]));if(Zd(n))return void tp(n,ct,e)}var a=n.domParent;if(!a||!Qd(a,ct)){if(a&&("flex"===a.computedStyle[Lf]||"flex"===a.currentStyle[Lf])){do{if((n=a)===lt)return 1;if(Qd(a,ct))return;if("absolute"===a.currentStyle[Cf]||"absolute"===a.computedStyle[Cf])return void tp(a,ct,e);if(Zd(a))return void tp(a,ct,e);a=a.domParent}while(a&&("flex"===a.computedStyle[Lf]||"flex"===a.currentStyle[Lf]));if(Zd(n))return void tp(n,ct,e)}(a=n.domParent)&&Qd(a,ct)||n!==t&&tp(n,ct,e)}}}}},{key:"__computeMeasure",value:function(e,r){ln.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},Bi.__hookTask.push(t))}},{key:"__clear",value:function(t){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)}},{key:"dom",get:function(){return this.__dom}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),a}(),sp=p.STYLE_KEY,hp=sp.PADDING_TOP,lp=sp.PADDING_LEFT,cp=sp.STROKE_WIDTH,up=sp.BOX_SHADOW,_p=sp.FILTER,fp=Ft.isNil;function dp(t,e,r,n){return n?t.map(function(t){return e+t*r}):e+t*r}function pp(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function vp(t){return t<0?t=0:1<t&&(t=1),t}function yp(t,e,r,n,i,a,o,s,h){var l,c,u,_,f,d,p,v,y,g,m,E=7<arguments.length&&void 0!==s?s:0,T=8<arguments.length&&void 0!==h?h:1;return(0<E||T<1)&&(3===o?(l=Pt(Bt.sliceBezier2Both([[t,e],i,a,[r,n]],E,T),4),t=(c=Pt(l[0],2))[0],e=c[1],i=l[1],a=l[2],r=(u=Pt(l[3],2))[0],n=u[1]):2===o?(_=Pt(Bt.sliceBezier2Both([[t,e],a,[r,n]],E,T),3),t=(f=Pt(_[0],2))[0],e=f[1],a=_[1],r=(d=Pt(_[2],2))[0],n=d[1]):1===o?(p=Pt(Bt.sliceBezier2Both([[t,e],i,[r,n]],E,T),3),t=(v=Pt(p[0],2))[0],e=v[1],i=p[1],r=(y=Pt(p[2],2))[0],n=y[1]):(t+=(g=Math.abs(t-r))*E,e+=(m=Math.abs(e-n))*E,r-=g*(1-T),n-=m*(1-T))),[t,e,r,n,i,a]}var gp=function(){t(I,$u);var h=e(I);function I(t,e){var r,n,i,a;if(g(this,I),(r=h.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):fp(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):fp(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):fp(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):fp(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return vp(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else{fp(e.start)||(n=vp(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),vp(e)});for(var s=r.__end.length;s<r.__x1.length;s++)r.__end.push(1)}else{fp(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=vp(i),r.__end=r.__x1.map(function(){return i}))}}else{r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],fp(e.x1)||(r.__x1=parseFloat(e.x1)||0),fp(e.y1)||(r.__y1=parseFloat(e.y1)||0),fp(e.x2)||(r.__x2=parseFloat(e.x2)||0),fp(e.y2)||(r.__y2=parseFloat(e.y2)||0),fp(e.start)||(r.__start=vp(parseFloat(e.start)||0)),fp(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=vp(a)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB)}return r}return l(I,[{key:"buildCache",value:function(e,r){var n,i=this,a=this.width,o=this.height,s=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=dp(i[t],e,a,h))}),["y1","y2"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=dp(i[t],r,o,h))}),["controlA","controlB"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=function e(t,r,n,i,a,o){if(o){if(t)return t.map(function(t){return e(t,r,n,i,a)})}else if(t&&2<=t.length)return[r+t[0]*i,n+t[1]*a];return[]}(i[t],e,r,a,o,h))}),["start","end"].forEach(function(t){fp(s[t])&&(n=!0,s[t]=i[t])}),n}},{key:"render",value:function(d,t,p,e){var v=this,r=ot(at(I.prototype),"render",this).call(this,d,t,p,e);if(r.break)return r;var u,n,i,a,o,s,h,l,c,_,f,y=r.originX,g=r.originY,m=r.stroke,E=r.strokeWidth,T=r.strokeDasharray,O=r.strokeDasharrayStr,M=r.strokeLinecap,A=r.strokeLinejoin,x=r.strokeMiterlimit,R=r.dx,S=r.dy,b=this.__cacheProps,k=this.isMulti;return this.buildCache(y,g)&&d===Ct.SVG&&(u="",k?b.x1.forEach(function(t,e){var r,n=b.x2[e],i=b.y1[e],a=b.y2[e],o=b.controlA[e],s=b.controlB[e],h=b.start[e],l=b.end[e],c=pp(o,s);0===h&&1===l||(t=(r=Pt(yp(t,i,n,i,o,s,c,h,l,b.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),u+=kn.svgLine(t,i,n,a,o,s,c)}):(n=pp(b.controlA,b.controlB),s=b.x1,h=b.y1,l=b.x2,c=b.y2,_=b.controlA,f=b.controlB,i=b.start,a=b.end,0===i&&1===a||(s=(o=Pt(yp(s,h,l,c,_,f,n,i,a,b.len),6))[0],h=o[1],l=o[2],c=o[3],_=o[4],f=o[5]),u=kn.svgLine(s,h,l,c,_,f,n)),b.d=u),d===Ct.CANVAS?m.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_=E[e],f=0<_&&"radial"===t.k&&Array.isArray(t.v);0<_&&"none"!==t&&(v.__preSetCanvas(d,p,{stroke:t,strokeWidth:_,strokeDasharray:T[e],strokeLinecap:M[e],strokeLinejoin:A[e],strokeMiterlimit:x[e]}),f&&(p.strokeStyle=t.v[0]),p.beginPath(),k?b.x1.forEach(function(t,e){var r,n=b.x2[e],i=b.y1[e],a=b.y2[e],o=b.controlA[e],s=b.controlB[e],h=b.start[e],l=b.end[e],c=pp(o,s);0===h&&1===l||(t=(r=Pt(yp(t,i,n,i,o,s,c,h,l,b.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),kn.canvasLine(p,t,i,n,a,o,s,c,R,S)}):(r=pp(b.controlA,b.controlB),o=b.x1,s=b.y1,h=b.x2,l=b.y2,c=b.controlA,u=b.controlB,n=b.start,i=b.end,0===n&&1===i||(o=(a=Pt(yp(o,s,h,l,c,u,r,n,i,b.len),6))[0],s=a[1],h=a[2],l=a[3],c=a[4],u=a[5]),kn.canvasLine(p,o,s,h,l,c,u,r,R,S)),p.stroke(),p.closePath())}):d===Ct.SVG&&m.forEach(function(t,e){var r=E[e],n=0<r&&"radial"===t.k&&Array.isArray(t.v),i=[["d",b.d],["fill","none"],["stroke",n?t.v[0]:t.v||t],["stroke-width",r]];v.__propsStrokeStyle(i,O[e],M[e],A[e],x[e]),v.addGeom("path",i)}),r}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[hp],i=r[lp],a=r[cp],o=r[up],s=r[_p],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var _=l.x1,f=l.y1,d=l.x2,p=l.y2,v=l.controlA,y=l.controlB,g=ot(at(I.prototype),"bbox",this),m=.5*a,E=Pt(this.__spreadByBoxShadowAndFilter(o,s),2),T=E[0],O=E[1];return T+=m,O+=m,h||(_=[_],d=[d],f=[f],p=[p],v=[v],y=[y]),_.forEach(function(t,e){var r,n,i,a=f[e],o=d[e],s=p[e],h=v[e],l=y[e];(fp(h)||h.length<2)&&(fp(l)||l.length<2)?(g[0]=Math.min(g[0],t-T),g[0]=Math.min(g[0],o-T),g[1]=Math.min(g[1],a-O),g[1]=Math.min(g[1],s-O),g[2]=Math.max(g[2],t+T),g[2]=Math.max(g[2],o+T),g[3]=Math.max(g[3],a+O),g[3]=Math.max(g[3],s+O)):fp(h)||h.length<2?(r=Bt.bboxBezier(t,a,l[0],l[1],o,s),g[0]=Math.min(g[0],r[0]-T),g[0]=Math.min(g[0],r[2]-T),g[1]=Math.min(g[1],r[1]-O),g[1]=Math.min(g[1],r[3]-O),g[2]=Math.max(g[2],r[0]+T),g[2]=Math.max(g[2],r[2]+T),g[3]=Math.max(g[3],r[1]+O),g[3]=Math.max(g[3],r[3]+O)):fp(l)||l.length<2?(n=Bt.bboxBezier(t,a,h[0],h[1],o,s),g[0]=Math.min(g[0],n[0]-T),g[0]=Math.min(g[0],n[2]-T),g[1]=Math.min(g[1],n[1]-O),g[1]=Math.min(g[1],n[3]-O),g[2]=Math.max(g[2],n[0]+T),g[2]=Math.max(g[2],n[2]+T),g[3]=Math.max(g[3],n[1]+O),g[3]=Math.max(g[3],n[3]+O)):(i=Bt.bboxBezier(t,a,h[0],h[1],l[0],l[1],o,s),g[0]=Math.min(g[0],i[0]-T),g[0]=Math.min(g[0],i[2]-T),g[1]=Math.min(g[1],i[1]-O),g[1]=Math.min(g[1],i[3]-O),g[2]=Math.max(g[2],i[0]+T),g[2]=Math.max(g[2],i[2]+T),g[3]=Math.max(g[3],i[1]+O),g[3]=Math.max(g[3],i[3]+O))}),g}}]),I}(),mp=p.STYLE_KEY,Ep=mp.PADDING_TOP,Tp=mp.PADDING_LEFT,Op=mp.STROKE_WIDTH,Mp=mp.BOX_SHADOW,Ap=mp.FILTER,xp=Ft.isNil;function Rp(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Sp(t){return t<0?t=0:1<t&&(t=1),t}function bp(t,e){var r=[],n=0,i=[];if(e)n=[],t.forEach(function(t){var e=bp(t);r.push(e.list),n.push(e.total),i.push([0].concat(e.increase))});else if(Array.isArray(t)){n=0,i.push(0);for(var a=0,o=0,s=t.length;o<s;o++){var h=t[o];if(Array.isArray(h)){a=o;break}}for(var l=t[a],c=a+1,u=t.length;c<u;c++){var _,f,d,p,v,y=t[c];Array.isArray(y)&&(2===y.length?(_=Math.abs(y[0]-l[0]),f=Math.abs(y[1]-l[1]),d=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(d),n+=d,i.push(n),l=y):4===y.length?(p=Bt.bezierLength([l,[y[0],y[1]],[y[2],y[3]]],2),r.push(p),n+=p,i.push(n),l=[y[2],y[3]]):6===y.length&&(v=Bt.bezierLength([l,[y[0],y[1]],[y[2],y[3]],[y[4],y[5]]],3),r.push(v),n+=v,i.push(n),l=[y[4],y[5]]))}}return{list:r,total:n,increase:i}}function kp(t,e,r,n){if(r===n)return t[r]>e?r-1:r;var i=r+(n-r>>1);return t[i]===e?i:t[i]>e?kp(t,e,r,Math.max(i-1,r)):kp(t,e,Math.min(i+1,n),n)}function Ip(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:0,a=3<arguments.length&&void 0!==n?n:1;if(0===i&&1===a)return t;if(a<=i)return[];var o=0,s=t.length-2;0<i&&(o=kp(e.increase,i*e.total,o,s)),a<1&&(s=kp(e.increase,a*e.total,o,s)),t=Ft.clone(t);var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A=1;return(a*=e.total)>e.increase[s]&&(h=t[s].slice(t[s].length-2),l=t[s+1],c=e.list[s],A=u=(a-e.increase[s])/c,2===l.length?(_=Math.abs(l[0]-h[0]),f=Math.abs(l[1]-h[1]),t[s+1]=[l[1]-(1-u)*_,l[1]-(1-u)*f]):4===l.length?(d=Bt.sliceBezier([h,[l[0],l[1]],[l[2],l[3]]],u),t[s+1]=[d[1][0],d[1][1],d[2][0],d[2][1]]):6===l.length&&(p=Bt.sliceBezier([h,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],u),t[s+1]=[p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]])),(i*=e.total)>e.increase[o]&&(v=t[o].slice(t[o].length-2),y=t[o+1],g=e.list[o],o===s&&1!==A&&(g*=A),m=(i-e.increase[o])/g,2===y.length?(E=Math.abs(y[0]-v[0]),T=Math.abs(y[1]-v[1]),t[o]=[v[0]+m*E,v[1]+m*T]):4===y.length?(O=Bt.sliceBezier([[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=O[0],t[o+1]=[O[1][0],O[1][1],O[2][0],O[2][1]]):6===y.length&&(M=Bt.sliceBezier([[y[4],y[5]],[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=M[0],t[o+1]=[M[1][0],M[1][1],M[2][0],M[2][1],y[4],y[5]])),s<t.length-2&&(t=t.slice(0,s+2)),0<o&&(t=t.slice(o)),t}var Np=function(){t(m,$u);var h=e(m);function m(t,e){var r,n,i,a;if(g(this,m),(r=h.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return Sp(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else{xp(e.start)||(n=Sp(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),Sp(e)});for(var s=r.__end.length;s<r.__points.length;s++)r.__end.push(1)}else{xp(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=Sp(i),r.__end=r.__points.map(function(){return i}))}}else{r.__points=[],r.__controls=[],r.__start=0,r.__end=1,xp(e.start)||(r.__start=Sp(parseFloat(e.start)||0)),xp(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=Sp(a))}return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return l(m,[{key:"__getPoints",value:function(a,o,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var n=[],i=0;i<r;i++)i%2==0?n.push(a+t[i]*s):n.push(o+t[i]*h);return n}})}},{key:"buildCache",value:function(e,r){var t,n,i,a,o=this,s=this.width,h=this.height,l=this.points,c=this.controls,u=this.start,_=this.end,f=this.__cacheProps,d=this.isMulti;return xp(f.points)&&(t=!0,f.points=d?l.map(function(t){if(Array.isArray(t))return o.__getPoints(e,r,s,h,t)}):this.__getPoints(e,r,s,h,l)),xp(f.controls)&&(t=!0,f.controls=d?c.map(function(t){return Array.isArray(t)?o.__getPoints(e,r,s,h,t,!0):t}):this.__getPoints(e,r,s,h,c,!0)),xp(f.start)&&(n=!0,f.start=u),xp(f.end)&&(n=!0,f.end=_),t&&(i=f.points,a=f.controls,f.list2=d?i.filter(function(t){return Array.isArray(t)}).map(function(t,e){var r=a[e];if(Array.isArray(t))return t.map(function(t,e){return e?Rp(t,r&&r[e-1]):t})}):i.filter(function(t){return Array.isArray(t)}).map(function(t,e){return e?Rp(t,a[e-1]):t}),f.len=bp(f.list2,d)),(t||n)&&(f.list=d?f.list2.map(function(t,e){if(Array.isArray(t)){var r=f.len;return Ip(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},f.start[e],f.end[e])}}):Ip(f.list2,f.len,f.start,f.end)),t||n}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(m.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[Ep],i=r[Tp],a=r[Op],o=r[Mp],s=r[Ap],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var d=ot(at(m.prototype),"bbox",this),_=.5*a,f=Pt(this.__spreadByBoxShadowAndFilter(o,s),2),p=f[0],v=f[1];p+=_,v+=_;var y=l.points,g=l.controls;return h||(y=[y],g=[g]),y.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=g[e],n=Pt(t[0],2),i=n[0],a=n[1],o=1,s=t.length;o<s;o++){var h,l,c=Pt(t[o],2),u=c[0],_=c[1],f=r[o-1];f&&4===f.length?(h=Bt.bboxBezier(i,a,f[0],f[1],f[2],f[3],u,_),d[0]=Math.min(d[0],h[0]-p),d[1]=Math.min(d[1],h[1]-v),d[2]=Math.max(d[2],h[2]+p),d[3]=Math.max(d[3],h[3]+v)):f&&2===f.length?(l=Bt.bboxBezier(i,a,f[0],f[1],u,_),d[0]=Math.min(d[0],l[0]-p),d[1]=Math.min(d[1],l[1]-v),d[2]=Math.max(d[2],l[2]+p),d[3]=Math.max(d[3],l[3]+v)):(d[0]=Math.min(d[0],i-p),d[1]=Math.min(d[1],a-v),d[2]=Math.max(d[2],i+p),d[3]=Math.max(d[3],a+v)),i=u,a=_}}),d}}]),m}(),wp=function(){t(s,Np);var r=e(s);function s(t,e){return g(this,s),r.call(this,t,e)}return l(s,[{key:"__getPoints",value:function(t,e,r,n,i,a){var o=ot(at(s.prototype),"__getPoints",this).call(this,t,e,r,n,i,a);return a||o.push(o[0]),o}}]),s}(),Dp=p.STYLE_KEY,Pp=Dp.PADDING_TOP,Cp=Dp.PADDING_LEFT,Lp=Dp.STROKE_WIDTH,Fp=Dp.BOX_SHADOW,Bp=Dp.FILTER,Hp=Ft.isNil,Gp=Bt.sectorPoints;function Yp(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var Wp=function(){t(I,$u);var n=e(I);function I(t,e){var r;return g(this,I),(r=n.call(this,t,e)).isMulti?(r.__begin=[0],r.__end=[0],r.__r=[1],Array.isArray(e.begin)&&(r.__begin=e.begin.map(function(t){return Yp(t,0)})),Array.isArray(e.end)&&(r.__end=e.end.map(function(t){return Yp(t,0)})),Array.isArray(e.r)&&(r.__r=e.r.map(function(t){return Yp(t,1)})),Array.isArray(e.edge)&&(r.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(r.__closure=e.closure.map(function(t){return!!t}))):(r.__begin=r.__end=0,r.__r=1,r.__edge=!1,r.__closure=!1,Hp(e.begin)||(r.__begin=Yp(e.begin,0)),Hp(e.end)||(r.__end=Yp(e.end,0)),Hp(e.r)||(r.__r=Yp(e.r,1)),Hp(e.edge)||(r.__edge=!!e.edge),Hp(e.closure)||(r.__closure=!!e.closure)),r}return l(I,[{key:"buildCache",value:function(a,o){var t,e,r,s=this.width,n=this.begin,h=this.end,l=this.r,c=this.edge,u=this.closure,_=this.__cacheProps,i=this.isMulti;return Hp(_.begin)&&(t=!0,_.begin=(n||0)%360),Hp(_.end)&&(t=!0,_.end=(h||0)%360),Hp(_.r)&&(t=!0,_.r=i?l.map(function(t){return t*s*.5}):l*s*.5),l=_.r,Hp(_.edge)&&(t=!0,_.edge=c),Hp(_.closure)&&(t=!0,_.closure=u),t&&(i?(_.list=[],_.sList=[],n.forEach(function(t,e){var r=Hp(l[e])?.5*s:l[e],n=Gp(a,o,r,parseFloat(t||0)%360,parseFloat(h[e]||0)%360),i=n.slice(0);u[e]?(n.push(n[0].slice(0)),c&&i.push(i[0].slice(0))):(n.unshift([a,o]),n.push([a,o]),c&&(i.unshift([a,o]),i.push([a,o]))),_.list.push(n),_.sList.push(i)})):(r=(e=Gp(a,o,l,parseFloat(n||0),parseFloat(h||0))).slice(0),u?(e.push(e[0].slice(0)),c&&r.push(r[0].slice(0))):(e.unshift([a,o]),e.push([a,o]),c&&(r.unshift([a,o]),r.push([a,o]))),_.list=e,_.sList=r)),t}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(I.prototype),"render",this).call(this,t,e,r,n,i);if(a.break)return a;this.buildCache(a.cx,a.cy);var o=a.fill,s=a.fillRule,h=a.stroke,l=a.strokeWidth,c=a.strokeDasharray,u=a.strokeDasharrayStr,_=a.strokeLinecap,f=a.strokeLinejoin,d=a.strokeMiterlimit,p=a.dx,v=a.dy,y=this.__cacheProps,g=y.list,m=y.sList,E=this.isMulti;if(o.length<=1&&h.length<=1){var T={fill:o[0],fillRule:s[0],stroke:h[0],strokeWidth:l[0],strokeDasharray:c[0],strokeDasharrayStr:u[0],strokeLinecap:_[0],strokeLinejoin:f[0],strokeMiterlimit:d[0],dx:p,dy:v};this.__renderOneSector(t,r,n,E,g,m,T)}else{for(var O=0,M=o.length;O<M;O++){var A,x=o[O];x&&(A={fill:x,fillRule:s[O],dx:p,dy:v},this.__renderOneSector(t,r,n,E,g,m,A))}for(var R=0,S=h.length;R<S;R++){var b,k=h[R];k&&(b={stroke:k,strokeWidth:l[R],strokeDasharray:c[R],strokeDasharrayStr:u[R],strokeLinecap:_[R],strokeLinejoin:f[R],strokeMiterlimit:d[R],dx:p,dy:v},this.__renderOnePolygon(t,r,n,E,g,m,b))}}return a}},{key:"__renderOneSector",value:function(t,e,r,n,i,a,o){var s=o.fill,h=o.stroke,l=o.strokeWidth,c="conic"===s.k,u="conic"===h.k,_="radial"===s.k&&Array.isArray(s.v),f=0<l&&"radial"===h.k&&Array.isArray(h.v);c||u?(c?this.__conicGradient(t,e,r,i,n,o):s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0),0<l&&u?re.warn("Stroke style can not use conic-gradient"):0<l&&h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0)):_||f?(_?this.__radialEllipse(t,e,r,i,n,o,"fill"):s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0),0<l&&f?(re.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke=o.stroke.v[0],this.__drawPolygon(t,e,r,n,a,o,!1,!0)):0<l&&h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0)):(s&&"none"!==s&&this.__drawPolygon(t,e,r,n,i,o,!0,!1),h&&"none"!==h&&this.__drawPolygon(t,e,r,n,a,o,!1,!0))}},{key:"__genSector",value:function(t,e,r,n,i,a,o,s,h){var l,c;t?(l=[["d",e[0]],["fill",r.v||r],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(l,a,o,s,h),this.addGeom("path",l)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<i&&(c=[["d",e[1]],["fill","none"],["stroke",n.v||n],["stroke-width",i]],this.__propsStrokeStyle(c,a,o,s,h),this.addGeom("path",c)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[Pp],h=o[Cp],l=o[Lp],c=o[Fp],u=o[Bp],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=ot(at(I.prototype),"bbox",this),y=.5*l,g=Pt(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),I}(),Up=p.STYLE_KEY,Xp=Up.PADDING_TOP,Kp=Up.PADDING_LEFT,zp=Up.STROKE_WIDTH,Vp=Up.BOX_SHADOW,jp=Up.FILTER,$p=Ft.isNil;function qp(t,e,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;if(0===o||0===s)return[[t,e],[t+r,e],[t+r,e+n],[t,e+n],[t,e]];var h=o*Bt.H,l=s*Bt.H;return[[t+o,e],[t+r-o,e],[t+r+h-o,e,t+r,e+s-l,t+r,e+s],[t+r,e+n-s],[t+r,e+n+l-s,t+r+h-o,e+n,t+r-o,e+n],[t+o,e+n],[t+o-h,e+n,t,e+n+l-s,t,e+n-s],[t,e+s],[t,e+s-l,t+o-h,e,t+o,e]]}function Zp(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var Jp=function(){t(y,$u);var n=e(y);function y(t,e){var r;return g(this,y),(r=n.call(this,t,e)).isMulti?(r.__rx=[0],r.__ry=[0],Array.isArray(e.rx)&&(r.__rx=e.rx.map(Zp)),Array.isArray(e.ry)&&(r.__ry=e.ry.map(Zp))):(r.__rx=r.__ry=0,$p(e.rx)||(r.__rx=Zp(e.rx)),$p(e.ry)||(r.__ry=Zp(e.ry))),r}return l(y,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return $p(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),$p(l.ry)&&(t=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(h,.5)*o),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return qp(r,n,a,o,t,i[e])}):qp(r,n,a,o,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(y.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.originX,a.originY),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.width,n=this.height,i=this.computedStyle,a=i[Xp],o=i[Kp],s=i[zp],h=i[Vp],l=i[jp],c=t+o,u=e+a;this.buildCache(c,u);var _=ot(at(y.prototype),"bbox",this),f=.5*s,d=Pt(this.__spreadByBoxShadowAndFilter(h,l),2),p=d[0],v=d[1];return p+=f,v+=f,_[0]=Math.min(_[0],c-p),_[1]=Math.min(_[1],u-v),_[2]=Math.min(_[2],c+r+p),_[3]=Math.min(_[3],u+n+v),_}}]),y}(),Qp=p.STYLE_KEY,tv=Qp.PADDING_TOP,ev=Qp.PADDING_LEFT,rv=Qp.STROKE_WIDTH,nv=Qp.BOX_SHADOW,iv=Qp.FILTER,av=Ft.isNil;function ov(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var sv=function(){t(x,$u);var n=e(x);function x(t,e){var r;return g(this,x),(r=n.call(this,t,e)).isMulti?(r.__r=[1],Array.isArray(e.r)?r.__r=e.r.map(ov):av(e.r)||(r.__r=ov(e.r))):(r.__r=1,av(e.r)||(r.__r=ov(e.r))),r}return l(x,[{key:"buildCache",value:function(e,r){var n=this.width,t=this.r,i=this.__cacheProps,a=this.isMulti;av(i.r)&&(a?(i.r=t.map(function(t){return t*n*.5}),i.list=i.r.map(function(t){return Bt.ellipsePoints(e,r,t)})):(i.r=t*n*.5,i.list=Bt.ellipsePoints(e,r,i.r)))}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(x.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[tv],h=o[ev],l=o[rv],c=o[nv],u=o[iv],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=ot(at(x.prototype),"bbox",this),y=.5*l,g=Pt(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),x}(),hv=p.STYLE_KEY,lv=hv.PADDING_TOP,cv=hv.PADDING_LEFT,uv=hv.STROKE_WIDTH,_v=hv.BOX_SHADOW,fv=hv.FILTER,dv=Ft.isNil;function pv(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var vv=function(){t(S,$u);var n=e(S);function S(t,e){var r;return g(this,S),(r=n.call(this,t,e)).isMulti?(r.__rx=[1],r.__ry=[1],Array.isArray(e.rx)?r.__rx=e.rx.map(pv):dv(e.rx)||(r.__rx=[pv(e.rx)]),Array.isArray(e.ry)?r.__ry=e.ry.map(pv):dv(e.ry)||(r.__ry=[pv(e.ry)])):(r.__rx=1,dv(e.rx)||(r.__rx=pv(e.rx)),r.__ry=1,dv(e.ry)||(r.__ry=pv(e.ry))),r}return l(S,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return dv(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return t*a*.5}):s*a*.5),dv(l.ry)&&(t=!0,l.ry=c?h.map(function(t){return t*o*.5}):h*o*.5),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return Bt.ellipsePoints(r,n,t,i[e])}):Bt.ellipsePoints(r,n,e,i)),t}},{key:"render",value:function(t,e,r,n,i){var a=ot(at(S.prototype),"render",this).call(this,t,e,r,n,i);return a.break||(this.buildCache(a.cx,a.cy),this.__renderPolygon(t,r,n,a)),a}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.isMulti,r=this.__cacheProps,e=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[lv],h=o[cv],l=o[uv],c=o[_v],u=o[fv],_=e+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p,v=0,y=0,y=t?(p=d=0,r.rx.forEach(function(t,e){d=Math.max(t,d),p=Math.max(y,r.ry[e])}),v=d,p):(v=r.rx,r.ry),g=ot(at(S.prototype),"bbox",this),m=.5*l,E=Pt(this.__spreadByBoxShadowAndFilter(c,u),2),T=E[0],O=E[1],M=_-v-(T+=m),A=_+v+T,x=f-y-(O+=m),R=f+y+O;return g[0]=Math.min(g[0],M),g[1]=Math.min(g[1],x),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],R),g}}]),S}(),yv={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of"},gv={os:"offset",e:"easing",ft:"filter",bd:"boxShadow",of:"overflow"},mv={value:"v",options:"o"},Ev={},Tv={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},Ov={};Ht.DOM_KEY_SET.concat(Ht.GEOM_KEY_SET).forEach(function(t){var e;yv.hasOwnProperty(t)?gv[yv[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),yv[t]=e,gv[e]=t)}),Object.keys(mv).forEach(function(t){Ev[mv[t]]=t}),Object.keys(Tv).forEach(function(t){Ov[Tv[t]]=t});var Mv={fullCssProperty:yv,abbrCssProperty:gv,fullAnimate:mv,abbrAnimate:Ev,fullAnimateOption:Tv,abbrAnimateOption:Ov},Av=k.TYPE_VD,xv=k.TYPE_GM,Rv=k.TYPE_CP,Sv=Ft.isNil,bv=Ft.isFunction,kv=Ft.isPrimitive,Iv=Ft.clone,Nv=Ft.extend,wv=Mv.abbrCssProperty,Dv=Mv.abbrAnimateOption,Pv=Mv.abbrAnimate;function Cv(i,a){i&&Object.keys(i).forEach(function(t){var e,r,n;0===t.indexOf("var-")?(e=t.slice(4),a.hasOwnProperty(e)&&(r=a[e],i["var-"+r]=i[t])):a.hasOwnProperty(t)&&(n=a[t],i[n]=i[t],delete i[t])})}function Lv(s,h){s&&h&&Object.keys(s).forEach(function(t){if(0===t.indexOf("var-")){var e=s[t];if(!e)return;var r=t.slice(4);if(e.id&&h.hasOwnProperty(e.id)){var n=h[e.id];if(void 0===n)return;if(-1<r.indexOf(".")){for(var i=r.split("."),a=i.length,o=0;o<a-1;o++)r=i[o],s[r]?s=s[r]:re.error("parseJson vars is not exist: "+e.id+", "+t+", "+i.slice(0,o).join("."));r=i[a-1]}bv(n)&&(n=n(e)),s[r]=n}}})}function Fv(e,r){e.tagName=r.tagName,e.props=Iv(r.props),e.children=r.children,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,n,i=e.init;i&&(n=(t=e.props=e.props||{}).style,Nv(t,i),n&&(Nv(n,i.style),t.style=n),e.init=null)}function Bv(r,t,n,i,e){var a=4<arguments.length&&void 0!==e?e:{};if(kv(t)||t instanceof S)return t;if(Array.isArray(t))return t.map(function(t){return Bv(r,t,n,i,a)});var o=t.library,s=t.libraryId;if(Array.isArray(o))a={},o.forEach(function(t){!function(t,n){var e=t.id,r=t.children;if(Array.isArray(r)&&r.forEach(function(t){if(!kv(t)){var e=t.libraryId;if(Sv(e))return;var r=n[e];if(!r)throw new Error("Link library item miss libraryId: "+e);Fv(t,r)}}),Sv(e))throw new Error("Library item miss id: "+JSON.stringify(t));n[e]=t}(t,a)}),t.library=null,t.libraryId=null;else if(!Sv(s)&&a){var h=a[s];if(!h)throw new Error("Link library miss id: "+s);Fv(t,h)}var l=t.tagName,c=t.props,u=void 0===c?{}:c,_=t.children,f=void 0===_?[]:_,d=t.animate,p=void 0===d?[]:d,v=t.__animateRecords;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var y,g,m,E,T,O=u.style;return Cv(O,wv),Lv(O,i),Lv(u,i),Lv(t,i),y="$"===l.charAt(0)?r.createGm(l,u):r.createVd(l,u,f.map(function(t,e){return t&&-1<[Av,xv,Rv].indexOf(t.$$type)?t:Bv(r,t,n,i,a)})),v&&(y.__animateRecords=v),p&&(Array.isArray(p)?(p.forEach(function(t){Cv(t,Pv);var e=t.value,r=t.options;Array.isArray(e)&&e.length&&(m=!0,e.forEach(function(t){Cv(t,wv),Lv(t,i)})),r&&(Cv(r,Dv),Lv(r,i))}),m&&(g={animate:p,target:y})):(Cv(p,Pv),E=p.value,T=p.options,Array.isArray(E)&&E.length&&(E.forEach(function(t){Cv(t,wv),Lv(t,i)}),g={animate:p,target:y}),T&&(Cv(T,Dv),Lv(T,i)))),g&&n.push(g),y}var Hv={parse:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:{};e=Ft.clone(e),re.isDom(r)||(i=r||{},r=null);var a=[],o=Bv(t,e,a,i.vars);if(r){var s=e.tagName;if(-1===["canvas","svg"].indexOf(s))throw new Error("Parse dom must be canvas/svg");var h=i.controller instanceof B_?i.controller:o.animateController;t.render(o,r),a.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(h.__auto=h.__auto.concat(a),h.__playAuto()):h.__records=h.__records.concat(a)}else a.length&&(o.__animateRecords={options:i,list:a,controller:i.controller instanceof B_?i.controller:null});return o},abbr:Mv},Gv={css:ln,reset:Ht,unit:R,font:b},Yv={Animation:xo,Controller:B_,easing:$i,frame:Bi},Wv={level:Po,change:be,Page:Ho,Cache:$o};$u.register("$line",gp),$u.register("$polyline",Np),$u.register("$polygon",wp),$u.register("$sector",Wp),$u.register("$rect",Jp),$u.register("$circle",sv),$u.register("$ellipse",vv);var Uv={version:"0.47.7",render:function(t,e){if(!(t instanceof op))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],n=2,i=arguments.length;n<i;n++)r.push(arguments[n]);return Ft.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];if(-1<["canvas","svg"].indexOf(t))return new op(t,e,n);if(wl.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:n,$$type:k.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:k.TYPE_GM}},createCp:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];return e.children=n,{klass:t,props:e,$$type:k.TYPE_CP}},parse:function(t,e,r){return Hv.parse(this,t,e,r)},mode:Ct,Component:Nl,Node:S,Text:bn,Geom:$u,Xom:vl,Dom:Sc,Img:eu,Root:op,Event:Pi,util:Ft,inject:re,style:Gv,parser:Hv,animate:Yv,math:Pn,builder:Rl,updater:p_,refresh:Wv,enums:p};return Rl.ref({Xom:vl,Dom:Sc,Img:eu,Geom:$u,Component:Nl}),p_.ref({Xom:vl,Dom:Sc,Img:eu,Geom:$u,Component:Nl}),"undefined"!=typeof window&&(window.karas=Uv),Uv});
//# sourceMappingURL=index.min.js.map
