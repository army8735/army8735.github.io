!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,r,n,i=et(a);return e=o?(t=et(this).constructor,Reflect.construct(i,arguments,t)):i.apply(this,arguments),r=this,!(n=e)||"object"!=typeof n&&"function"!=typeof n?h(r):n}}function rt(t,e,r){return(rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=et(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,SCALE_X:59,SCALE_Y:60,SKEW_X:61,SKEW_Y:62,ROTATE_Z:63,FILTER:64,BOX_SHADOW:65,POINTER_EVENTS:66,OVERFLOW:67,MIX_BLEND_MODE:68,FILL:69,STROKE:70,STROKE_WIDTH:71,STROKE_DASHARRAY:72,STROKE_DASHARRAY_STR:73,STROKE_LINECAP:74,STROKE_LINEJOIN:75,STROKE_MITERLIMIT:76,FILL_RULE:77,MATRIX:78,BORDER_TOP:79,BORDER_RIGHT:80,BORDER_BOTTOM:81,BORDER_LEFT:82};function u(t){return t.replace(/[A-Z]/g,function(t){return t.toLowerCase()}).replace(/_([a-z])/g,function(t,e){return e.toUpperCase()})}var f={},d={};Object.keys(s).forEach(function(t){var e=s[t];f[e]=t,d[e]=u(t)});var p={STYLE_KEY:s,STYLE_R_KEY:f,STYLE_RV_KEY:d,style2Lower:u,style2Upper:function(t){return t.replace(/[A-Z]/g,function(t){return"_"+t.toUpperCase()}).replace(/[a-z]/g,function(t){return t.toUpperCase()})},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_IMG:5,UPDATE_OVERWRITE:6,UPDATE_KEYS:7,UPDATE_LIST:8,UPDATE_CONFIG:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_BLUR_VALUE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6}},v=p.STRUCT_KEY,y=v.STRUCT_NODE,m=v.STRUCT_INDEX,E=v.STRUCT_CHILD_INDEX,T=v.STRUCT_LV,O=p.NODE_KEY,M=O.NODE_IS_DESTROYED,A=O.NODE_STRUCT,R=function(){function t(){g(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return l(t,[{key:"__structure",value:function(t,e,r){var n;return this.__config[A]=(c(n={},y,this),c(n,m,t),c(n,E,r),c(n,T,e),n)}},{key:"__modifyStruct",value:function(){return[this.__config[A],1]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[M]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[M]}}]),t}(),ye={CANVAS:0,SVG:1},b={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7},S={arial:{lhr:1.14990234375,car:1.1171875,blr:.9052734375}},k={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}};var I,N,D,ge={identity:function(){return[1,0,0,1,0,0]},multiply:function(t,e){var r=1===t[0]&&0===t[1]&&0===t[2]&&1===t[3],n=1===e[0]&&0===e[1]&&0===e[2]&&1===e[3],i=0===t[4]&&0===t[5],a=0===e[4]&&0===e[5];if(r&&i)return e.slice(0);if(n&&a)return t.slice(0);if(r&&n)return(t=t.slice(0))[4]+=e[4],t[5]+=e[5],t;if(r||n){var o=r?e.slice(0):t.slice(0);return o[4]=t[0]*e[4]+t[2]*e[5]+t[4],o[5]=t[1]*e[4]+t[3]*e[5]+t[5],o}var s=[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],0,0];return i&&a||(a?(s[4]=t[4],s[5]=t[5]):(s[4]=t[0]*e[4]+t[2]*e[5]+t[4],s[5]=t[1]*e[4]+t[3]*e[5]+t[5])),s},calPoint:function(t,e){var r=ve(t,2),n=r[0],i=r[1],a=ve(e,6),o=a[0],s=a[1],h=a[2],l=a[3];return[o*n+h*i+a[4],s*n+l*i+a[5]]},int2convolution:function(t){var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(e*=3)%2==0&&e++,e},inverse:function(t){var e=ve(t,6),r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5];if(1===r&&0===n&&0===i&&1===a&&0===o&&0===s)return t;var h,l,c=1,u=0,_=0,f=1,d=0,p=0;if(0===r)if(1===n)var v=[n,r,a,i,s,o,u,c,f,_,p,d],r=v[0],n=v[1],i=v[2],a=v[3],o=v[4],s=v[5],c=v[6],u=v[7],_=v[8],f=v[9],d=v[10],p=v[11];else{if(0===n)return[0,0,0,0,0,0];r=1,i+=i/n,o+=o/n,c+=c/n,_+=_/n,d+=d/n,n=0}return 0!==n&&(h=n/r,n=0,a-=i*h,s-=o*h,u-=c*h,f-=_*h,p-=d*h),1!==r&&(i/=r,o/=r,c/=r,_/=r,d/=r,r=1),0!==i&&(l=i/a,i=0,o-=s*l,c-=u*l,_-=f*l,d-=p*l),0===a?(s+=(a=1)-o,u+=1-c,f+=1-_,p+=1-d):1!==a&&(s/=a,u/=a,f/=a,p/=a,a=1),0!==o&&(d-=o,o=0),0!==s&&(p-=s,s=0),[c,u,_,f,d,p]},isE:function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}},w=p.STYLE_KEY,C=p.STYLE_KEY.TRANSFORM,P={}.toString;function L(e){return function(t){return P.call(t)==="[object "+e+"]"}}var F=L("Object"),B=L("String"),H=L("Function"),G=L("Number"),Y=L("Boolean"),W=L("Date");function U(t){return null==t}function X(t){return U(t)?"":t.toString()}function K(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=K(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var n="<g";t.bbClip&&(n+=' clip-path="'+t.bbClip+'"'),n+=">",t.bb.forEach(function(t){n+=K(t)}),n+="</g><g",t.conClip&&(n+=' clip-path="'+t.conClip+'"'),n+=">",(t.children||[]).forEach(function(t){t.isMask||(n+=K(t))}),n+="</g>";var i=t.opacity,a=t.transform,o=t.visibility,s=t.mask,h=t.overflow,l=t.filter,c=t.mixBlendMode;return"<g"+(1!==i&&void 0!==i?' opacity="'+i+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l?' filter="'+l+'"':"")+(c?' style="mix-blend-mode:'+c+'"':"")+">"+n+"</g>"}}function V(t){var n="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(n+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){n+=" "+t[0]+'="'+t[1]+'"'}),n+=">",(t.children||[]).forEach(function(t){var e,r;n+=(r="<"+(e=t).tagName,(e.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+="></"+e.tagName+">")}),n+="</"+t.tagName+">"}function z(t,e){for(var r=t.length?t[0]:"",n=1,i=t.length;n<i;n++)r+=e+t[n];return r}var j=(c(I={},w.POSITION,!0),c(I,w.DISPLAY,!0),c(I,w.BACKGROUND_REPEAT,!0),c(I,w.FLEX_DIRECTION,!0),c(I,w.JUSTIFY_CONTENT,!0),c(I,w.ALIGN_ITEMS,!0),c(I,w.ALIGN_SELF,!0),c(I,w.OVERFLOW,!0),c(I,w.MIX_BLEND_MODE,!0),c(I,w.STROKE_LINECAP,!0),c(I,w.STROKE_LINEJOIN,!0),c(I,w.STROKE_MITERLIMIT,!0),c(I,w.FILL_RULE,!0),I),$=(c(N={},w.BACKGROUND_SIZE,!0),c(N,w.BACKGROUND_COLOR,!0),c(N,w.BORDER_TOP_COLOR,!0),c(N,w.BORDER_RIGHT_COLOR,!0),c(N,w.BORDER_BOTTOM_COLOR,!0),c(N,w.BORDER_LEFT_COLOR,!0),N),q=(c(D={},w.BORDER_TOP_LEFT_RADIUS,!0),c(D,w.BORDER_TOP_RIGHT_RADIUS,!0),c(D,w.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(D,w.BORDER_BOTTOM_LEFT_RADIUS,!0),c(D,w.TRANSFORM_ORIGIN,!0),D);var me={isObject:F,isString:B,isFunction:H,isNumber:G,isBoolean:Y,isDate:W,isNil:U,isPrimitive:function(t){return me.isNil(t)||me.isBoolean(t)||me.isString(t)||me.isNumber(t)},isAuto:function(t){return U(t)||"auto"===t},stringify:X,joinSourceArray:function t(e){for(var r="",n=0,i=e.length;n<i;n++){var a=e[n];Array.isArray(a)?r+=t(a):r+=X(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=V(t)}),e+="</defs><g",t.bbClip&&(e+=' clip-path="'+t.bbClip+'"'),e+=">",t.bb.forEach(function(t){e+=K(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=K(t))}),e+="</g>"},joinVd:K,joinDef:V,rgba2int:function(t){if(Array.isArray(t))return t;var e,r=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(r.push(parseInt(t.charAt(0)+t.charAt(0),16)),r.push(parseInt(t.charAt(1)+t.charAt(1),16)),r.push(parseInt(t.charAt(2)+t.charAt(2),16)),r[3]=1):6===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4),16)),r[3]=1):8===t.length?(r.push(parseInt(t.slice(0,2),16)),r.push(parseInt(t.slice(2,4),16)),r.push(parseInt(t.slice(4,6),16)),r.push(parseInt(t.slice(6),16)/255)):(r[0]=r[1]=r[2]=0,r[3]=1):(e=t.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(r=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],U(e[4])?r[3]=1:r[3]=parseFloat(e[4])):r=[0,0,0,0]:r=[0,0,0,0],r},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+z(t,",")+")";if(3===t.length)return"rgba("+z(t,",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+z(t,",")+")";if(3===t.length)return"rgba("+z(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i))e[i[0]]=i[1];else for(var a=Object.keys(i),o=a.length-1;0<=o;o--){var s=a[o];e[s]=i[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),n=0,i=r.length;n<i;n++){var a=r[n];e.push([a,t[a]])}return e},clone:function e(r){if(U(r)||"object"!==o(r))return r;if(r.$$type===k.TYPE_VD||r.$$type===k.TYPE_GM||r.$$type===k.TYPE_CP)return r;if(me.isDate(r))return new Date(r);var n=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){n[t]=e(r[t])}),n},cloneStyle:function(a,t){t=t||Object.keys(a);var o={};return t.forEach(function(t){var e=a[t];if(t===w.BACKGROUND_IMAGE)e.k?o[t]=me.clone(e):o[t]=e;else if(j.hasOwnProperty(t))o[t]=e;else{var r=o[t]=e.slice(0);if($.hasOwnProperty(t))r[0]=r[0].slice(0);else if(q.hasOwnProperty(t))r[0]=r[0].slice(0),r[1]=r[1].slice(0);else if(t===C)for(var n=0,i=r.length;n<i;n++)r[n]=r[n].slice(0)}}),o},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++){var a=e[n],o=r[n],s=Array.isArray(a),h=Array.isArray(o);if(s&&h){if(!t(a,o))return!1}else{if(s||h)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(F(e)&&F(r)){for(var n={},i=0,a=Object.keys(e),o=a.length;i<o;i++){var s=a[i];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;n[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!n.hasOwnProperty(u))return!1}}else{if(W(e)&&W(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==o(e))return t;for(var n=0,i=(r=r||Object.keys(e)).length;n<i;){var a=r[n];t[a]=e[a],n++}return t},joinArr:z,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()})},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!ge.isE(e)){var i=ve(t,4),a=i[0],o=i[1],s=i[2],h=i[3];r&&(a-=r,s+=r),n&&(o-=n,h+=n);for(var l=[s,o,a,h,s,h],c=ve(ge.calPoint([a,o],e),2),u=a=c[0],_=o=c[1],f=a,d=o,p=0;p<6;p+=2)var v=l[p],y=l[p+1],g=ve(ge.calPoint([v,y],e),2),v=g[0],y=g[1],u=Math.min(u,v),f=Math.max(u,v),_=Math.min(_,y),d=Math.max(d,y);t=[u,_,f,d]}else(r||n)&&(t[0]-=r,t[1]-=n,t[2]+=r,t[3]+=n);return t}},Z={position:/((-?[\d.]+(px|%)?)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i},J=4*(Math.sqrt(2)-1)/3;function Q(t,e,r,n){return t*n-r*e}function tt(t,e,r,n){return Math.sqrt(Math.pow(r-t,2)+Math.pow(n-e,2))}function nt(t,e){var r=ve(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=ve(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return!(c<=n||u<=i||a<=h||o<=l)}function it(t,e,r){var n=r.matrix,i=void 0===n?[1,0,0,1,0,0]:n,a=r.computedStyle,o=void 0===a?{}:a,s=o.width,h=o.height,l=o.transformOrigin,c=ve(l=void 0===l?[.5*s,.5*h]:l,2),u=c[0],_=c[1],f=ve(ge.calPoint([t*s-u,e*h-_],i),2);return[(t=f[0])+u,(e=f[1])+_]}function at(t){var r=t.length,e=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(e,1/r)}function ot(t,e,r){var n=t,i=(2*e+r)/3,a=(e+2*r)/3;return(n(e)+3*n(i)+3*n(a)+n(r))*(r-e)/8}function st(e,r){return function t(e,r,n,i){var a=3<arguments.length&&void 0!==i?i:.001,o=e,s=(r+n)/2,h=ot(o,r,n),l=ot(o,r,s),c=ot(o,s,n),u=l+c-h;return Math.abs(u)<=15*a?l+c+u/15:t(o,r,s,a/2)+t(o,s,n,a/2)}(function(t){return at(ht(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function ht(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:1;return 2===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=ve(e,3),a=i[0],o=i[1],s=i[2],h=ve(a,2),l=h[0],c=h[1],u=ve(o,2),_=u[0],f=u[1],d=ve(s,2),p=d[0],v=d[1],y=0,g=0,g=0===n?(y=Math.pow(1-t,2)*l+2*t*(1-t)*_+Math.pow(t,2)*p,Math.pow(1-t,2)*c+2*t*(1-t)*f+Math.pow(t,2)*v):1===n?(y=2*(1-t)*(_-l)+2*t*(p-_),2*(1-t)*(f-c)+2*t*(v-f)):2===n?(y=2*(p-2*_+l),2*(v-2*f+c)):y=0;return[y,g]}(t,e,i):3===r?function(t,e,r){var n=2<arguments.length&&void 0!==r?r:1,i=ve(e,4),a=i[0],o=i[1],s=i[2],h=i[3],l=ve(a,2),c=l[0],u=l[1],_=ve(o,2),f=_[0],d=_[1],p=ve(s,2),v=p[0],y=p[1],g=ve(h,2),m=g[0],E=g[1],T=0,O=0,O=0===n?(T=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*f+3*(1-t)*Math.pow(t,2)*v+Math.pow(t,3)*m,Math.pow(1-t,3)*u+3*t*Math.pow(1-t,2)*d+3*(1-t)*Math.pow(t,2)*y+Math.pow(t,3)*E):1===n?(T=3*((1-t)*(1-t)*(f-c)+2*(1-t)*t*(v-f)+t*t*(m-v)),3*((1-t)*(1-t)*(d-u)+2*(1-t)*t*(y-d)+t*t*(E-y))):2===n?(T=6*(v-2*f+c)*(1-t)+6*(m-2*v+f)*t,6*(y-2*d+u)*(1-t)+6*(E-2*y+d)*t):3===n?(T=6*(m-3*v+3*f-c),6*(E-3*y+3*d-u)):T=0;return[T,O]}(t,e,i):void 0}function lt(e,r,t){for(var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,o=function(t){return at(ht(t,e,r))},s=t*n,h=n,l=h,c=0;c<i;c++){var u=ot(o,0,h)-s;if(Math.abs(u)<a)break;var _=at(ht(h,e,r,1));if(h-=u*_/(u*at(ht(h,e,r,2))+_*_),Math.abs(h-l)<a)break;l=h}return ht(h,e,r,0)}function ct(t,e){var r=ve(t,4),n=ve(r[0],2),i=n[0],a=n[1],o=ve(r[1],2),s=o[0],h=o[1],l=ve(r[2],2),c=l[0],u=l[1],_=r[3],f=(s-i)*e+i,d=(h-a)*e+a,p=(c-s)*e+s,v=(u-h)*e+h,y=(p-f)*e+f,g=(v-d)*e+d;if(4===t.length){var m=ve(_,2);return[[i,a],[f,d],[y,g],[(((m[0]-c)*e+c-p)*e+p-y)*e+y,(((m[1]-u)*e+u-v)*e+v-g)*e+g]]}if(3===t.length)return[[i,a],[f,d],[y,g]]}var Ee={vectorProduct:Q,pointInPolygon:function(t,e,r){for(var n=ve(r[0],2),i=n[0],a=n[1],o=ve(r[0],2),s=o[0],h=o[1],l=r.length,c=1;c<l;c++)var u=ve(r[c],2),_=u[0],f=u[1],i=Math.max(i,_),a=Math.max(a,f),s=Math.min(s,_),h=Math.min(h,f);if(t<s||e<h||i<t||a<e)return!1;for(var d=0,p=r.length;d<p;d++){var v=ve(r[d],2),y=v[0],g=v[1],m=ve(r[(d+1)%p],2);if(Q(m[0]-y,m[1]-g,t-y,e-g)<0)return!1}return!0},d2r:function(t){return t*Math.PI/180},r2d:function(t){return 180*t/Math.PI},H:J,h:function(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3},angleBySide:function(t,e,r){var n=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(n)},pointsDistance:tt,triangleIncentre:function(t,e,r,n,i,a){var o=tt(r,n,i,a),s=tt(t,e,i,a),h=tt(t,e,r,n);return[(o*t+s*r+h*i)/(o+s+h),(o*e+s*n+h*a)/(o+s+h)]},ellipsePoints:function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,i=r*J,a=n===r?i:n*J;return[[t-r,e],[t-r,e-a,t-i,e-n,t,e-n],[t+i,e-n,t+r,e-a,t+r,e],[t+r,e+a,t+i,e+n,t,e+n],[t-i,e+n,t-r,e+a,t-r,e]]},getRectsIntersection:function(t,e){if(!nt(t,e))return null;var r=ve(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=ve(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return[Math.max(n,h),Math.max(i,l),Math.min(a,c),Math.min(o,u)]},isRectsOverlap:nt,isRectsInside:function(t,e){var r=ve(t,4),n=r[0],i=r[1],a=r[2],o=r[3],s=ve(e,4),h=s[0],l=s[1],c=s[2],u=s[3];return n<=h&&i<=l&&c<=a&&u<=o},calCoordsInNode:it,calPercentInNode:function(t,e,r){var n,i=r.computedStyle,a=i.width,o=i.height,s=ve(i.transformOrigin,2),h=s[0],l=s[1],c=Math.atan((o-l)/(a-h)),u=ve(it(1,1,r),2),_=u[0],f=u[1],d=h<=_&&l<=f?(n=h===_?-Math.atan(1/0):Math.atan((f-l)/(_-h)))-c:h<=_&&f<l?(n=h===_?-Math.atan(1/0):Math.atan((l-f)/(_-h)))+c:_<h&&l<=f?(n=Math.atan((f-l)/(h-_)))-c:_<h&&f<l?(n=Math.atan((f-l)/(_-h)))<=c?n+Math.PI-c:-(d=Math.PI-n+c):0,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-l,2)),v=h<=t&&l<=e?h===t?-Math.atan(1/0):Math.atan((e-l)/(t-h)):h<=t&&e<l?h===t?-Math.atan(1/0):-Math.atan((e-l)/(h-t)):t<h&&l<=e?Math.PI-Math.atan((e-l)/(h-t)):Math.atan((e-l)/(t-h))-Math.PI;return(v-=d)>Math.PI?(v-=Math.PI,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>.5*Math.PI?(v=Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o]):0<=v?[(h+p*Math.cos(v))/a,(l+p*Math.sin(v))/o]:v>=.5*-Math.PI?(v=-v,[(h+p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):v>=-Math.PI?(v=Math.PI+v,[(h-p*Math.cos(v))/a,(l-p*Math.sin(v))/o]):(v=-Math.PI-v,[(h-p*Math.cos(v))/a,(l+p*Math.sin(v))/o])},bboxBezier:function(t,e,r,n,i,a,o,s){return 4===arguments.length?[t,e,r,n]:6===arguments.length?(h=t,l=e,c=r,u=n,_=i,f=a,E=Math.min(h,_),T=Math.min(l,f),O=Math.max(h,_),M=Math.max(l,f),(c<E||u<T||O<c||M<u)&&(g=(v=1-(d=(h-c)/(h-2*c+_)))*v*h+2*v*d*c+d*d*_,m=(y=1-(p=(l-u)/(l-x*u+f)))*y*l+2*y*p*u+p*p*f,E=Math.min(E,g),T=Math.min(T,m),O=Math.min(O,g),M=Math.min(M,m)),[E,T,O,M]):8===arguments.length?(A=t,R=e,b=r,S=n,k=i,I=a,N=o,D=s,$=Math.min(A,N),q=Math.min(R,D),Z=Math.max(A,N),J=Math.max(R,D),(b<$||S<q||Z<b||J<S||k<$||I<q||Z<k||J<I)&&(B=(C=R-2*S+I)*C-(L=3*S-R-3*I+D)*(-R+S),0<(F=(w=A-2*b+k)*w-(P=3*b-A-3*k+N)*(-A+b))&&(0<(H=(-w-(F=Math.sqrt(F)))/P)&&H<1&&(Y=(G=1-H)*G*G*A+3*G*G*H*b+3*G*H*H*k+H*H*H*N,$=Math.min($,Y),Z=Math.max(Z,Y)),0<(H=(-w+F)/P)&&H<1&&(U=(W=1-H)*W*W*A+3*W*W*H*b+3*W*H*H*k+H*H*H*N,$=Math.min($,U),Z=Math.max(Z,U))),0<B&&(0<(X=(-C-(B=Math.sqrt(B)))/L)&&X<1&&(V=(K=1-X)*K*K*R+3*K*K*X*S+3*K*X*X*I+X*X*X*D,q=Math.min(q,V),J=Math.max(J,V)),0<(X=(-C+B)/L)&&X<1&&(j=(z=1-X)*z*z*R+3*z*z*X*S+3*z*X*X*I+X*X*X*D,q=Math.min(q,j),J=Math.max(J,j)))),[$,q,Z,J]):void 0;var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R,b,S,k,I,N,D,w,C,P,L,F,B,H,G,Y,W,U,X,K,V,z,j,$,q,Z,J},bezierLength:st,pointAtBezier:function(t,e,r,n,i){return lt(t,e,st(t,e,0,1),r,n,i)},pointAtBezierWithLength:lt,sliceBezier:ct,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=ct(t,r)),0<e&&(r<1&&(e/=r),t=ct(t.reverse(),1-e).reverse())),t}},te=me.rgba2int,ee=me.int2rgba,ut=me.isNil,_t=b.PX,re=b.PERCENT,ft=Ee.d2r;function dt(t){if(/%$/.test(t)||/px$/.test(t)||/^-?[\d.]+$/.test(t))return[parseFloat(t),/%/.test(t)?re:_t];var e=[{top:0,left:0,center:50,right:100,bottom:100}[t],re];return ut(e[0])&&(e[0]=50),e}function pt(t,e){for(var r,n=[],i=0,a=t.length;i<a;i++){var o,s,h=t[i];1<h.length?(o=ee(h[0]),(s=h[1])[1]===re?n.push([o,.01*s[0]]):n.push([o,s[0]/e])):n.push([ee(h[0])])}1===n[0].length&&n[0].push(0),1<n.length&&(1===n[r=n.length-1].length&&n[r].push(1));for(var l=n[0][1],c=1,u=n.length;c<u-1;c++){var _=n[c];if(1<_.length)l=_[1];else{for(var f=c+1,d=n[n.length-1][1];f<u-1;f++){var p=n[f];if(1<p.length){d=p[1];break}}for(var v=(d-l)/(f-c+1),y=c;y<f;y++){n[y].push(l+v*(y+1-c))}c=f}}for(var g=1,m=n.length;g<m;g++){var E=n[g],T=n[g-1];E[1]<T[1]&&(E[1]=T[1])}for(var O=0,M=n.length;O<M-1;O++){if(1<n[O][1]){n.splice(O+1);break}}for(var A=n.length-1;0<A;A--){if(n[A][1]<0){n.splice(0,A);break}}var R,b,S,x,k,I,N,D,w,C,P,L,F,B,H,G,Y,W,U,X,K,V,z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht,lt,ct,ut,_t,ft,dt,pt,vt,yt,gt,mt,Et,Tt,Ot,Mt,At,Rt,bt,St,xt,kt,It,Nt,Dt,wt,Ct,Pt,Lt,Ft,Bt,Ht=n.length;if(1===Ht)n[0][1]=0;else{for(var Gt,Yt,Wt,Ut,Xt,Kt,Vt,zt,jt,$t,qt=!0,Zt=!0,Jt=Ht-1;0<=Jt;Jt--){var Qt=n[Jt][1];0<Qt&&(qt=!1),Qt<1&&(Zt=!1)}qt?(n.splice(0,Ht-1),n[0][1]=0):Zt?(n.splice(1),n[0][1]=0):(Gt=n[0],Yt=n[Ht-1],2===Ht?Gt[1]<0&&1<Yt[1]&&(vt=Yt,yt=e,gt=te((pt=Gt)[0]),mt=te(vt[0]),Et=ve(gt,4),Tt=Et[0],Ot=Et[1],Mt=Et[2],At=Et[3],Rt=void 0===At?1:At,bt=ve(mt,4),St=bt[0],xt=bt[1],kt=bt[2],It=bt[3],Nt=void 0===It?1:It,Dt=Math.abs(pt[1])*yt,wt=vt[1]*yt,Ct=Dt/(Dt+wt),Pt=Math.floor(Tt+(St-Tt)*Ct),Lt=Math.floor(Ot+(xt-Ot)*Ct),Ft=Math.floor(Mt+(kt-Mt)*Ct),Bt=Rt+(Nt-Rt)*Ct,pt[0]="rgba("+Pt+","+Lt+","+Ft+","+Bt+")",pt[1]=0,Ct=(yt+Dt)/(Dt+wt),Pt=Math.floor(Tt+(St-Tt)*Ct),Lt=Math.floor(Ot+(xt-Ot)*Ct),Ft=Math.floor(Mt+(kt-Mt)*Ct),Bt=Rt+(Nt-Rt)*Ct,vt[0]="rgba("+Pt+","+Lt+","+Ft+","+Bt+")",vt[1]=1):(Gt[1]<0&&(Wt=n[1],Ut=te(Gt[0]),Xt=te(Wt[0]),z=Ut,j=Gt[1],$=Xt,q=Wt[1],Z=e,J=ve(z,4),Q=J[0],tt=J[1],et=J[2],rt=J[3],nt=void 0===rt?1:rt,it=ve($,4),at=it[0],ot=it[1],st=it[2],ht=it[3],lt=void 0===ht?1:ht,ct=Math.abs(j)*Z,ut=ct/(q*Z+ct),_t=Math.floor(Q+(at-Q)*ut),ft=Math.floor(tt+(ot-tt)*ut),dt=Math.floor(et+(st-et)*ut),Kt=[_t,ft,dt,nt+(lt-nt)*ut],Gt[0]="rgba("+Kt[0]+","+Kt[1]+","+Kt[2]+","+Kt[3]+")",Gt[1]=0),1<Yt[1]&&(Vt=n[Ht-2],zt=te(Vt[0]),jt=te(Yt[0]),R=zt,b=Vt[1],S=jt,x=Yt[1],k=e,I=ve(R,4),N=I[0],D=I[1],w=I[2],C=I[3],P=void 0===C?1:C,L=ve(S,4),F=L[0],B=L[1],H=L[2],G=L[3],Y=void 0===G?1:G,U=(k-(W=b*k))/(x*k-W),X=Math.floor(N+(F-N)*U),K=Math.floor(D+(B-D)*U),V=Math.floor(w+(H-w)*U),$t=[X,K,V,P+(Y-P)*U],Yt[0]="rgba("+$t[0]+","+$t[1]+","+$t[2]+","+$t[3]+")",Yt[1]=1)))}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n}var vt={parseGradient:function(t){var e,r,n,i=Z.gradient.exec(t);if(i){var a,o,s,h,l,c={k:i[1]};"linear"===c.k?(a=/(-?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(i[2]),c.d=a?(e=a[0].toLowerCase(),n=180,"to top"===e?n=0:"to top right"===e?n=45:"to right"===e?n=90:"to bottom right"===e?n=135:"to bottom"===e||("to bottom left"===e?n=225:"to left"===e?n=270:"to top left"===e?n=315:(r=/(-?[\d.]+)deg/.exec(e))&&(n=parseFloat(r[1]))),n%360):180):"radial"===c.k&&(c.s=-1<i[2].indexOf("ellipse")?"ellipse":"circle",o=/(closest|farthest)-(side|corner)/i.exec(i[2]),c.z=o?o[0].toLowerCase():"farthest-corner",(s=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(i[2]))?(h=dt(s[1]),l=s[2]?dt(s[2]):h,c.p=[h,l]):c.p=[[50,re],[50,re]]);var u=i[2].match(/((#[0-9a-f]{3,6})|(rgba?\(.+?\)))\s*(-?[\d.]+(px|%))?/gi);return c.v=u.map(function(t){var e=/((?:#[0-9a-f]{3,6})|(?:rgba?\(.+?\)))\s*(-?[\d.]+(?:px|%))?/i.exec(t),r=[te(e[1])];return e[2]&&(r[1]=[parseFloat(e[2])],/%$/.test(e[2])?r[1][1]=re:r[1][1]=_t),r}),c}},getLinear:function(t,e,r,n,i,a){var o,s,h,l,c,u,_,f,d,p,v,y,g=ft(e),m=Math.abs(i*Math.sin(g))+Math.abs(a*Math.cos(g)),E=ve((s=.5*m,h=r,l=n,d=270<=(o=e)?(c=ft(360-o),u=h+Math.sin(c)*s,_=l+Math.cos(c)*s,f=h-Math.sin(c)*s,l-Math.cos(c)*s):180<=o?(p=ft(o-180),u=h+Math.sin(p)*s,_=l-Math.cos(p)*s,f=h-Math.sin(p)*s,l+Math.cos(p)*s):90<=o?(v=ft(180-o),u=h-Math.sin(v)*s,_=l-Math.cos(v)*s,f=h+Math.sin(v)*s,l+Math.cos(v)*s):(y=ft(o),u=h-Math.sin(y)*s,_=l+Math.cos(y)*s,f=h+Math.sin(y)*s,l-Math.cos(y)*s),[u,_,f,d]),4);return{x1:E[0],y1:E[1],x2:E[2],y2:E[3],stop:pt(t,m)}},getRadial:function(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R,b,S=o-i,x=s-a,k=ve((h=r,c=S,u=x,_=i,f=a,d=o,p=s,A=(l=n)[0][1]===_t?_+l[0][0]:_+l[0][0]*c*.01,R=l[1][1]===_t?f+l[1][0]:f+l[1][0]*u*.01,["closest-side"===h?A<=_||d<=A||R<=f||p<=R?0:(v=A<_+.5*c?A-_:d-A,y=R<f+.5*u?R-f:p-R,Math.min(v,y)):"closest-corner"===h?(g=A<_+.5*c?A-_:d-A,m=R<f+.5*u?R-f:p-R,Math.sqrt(Math.pow(g,2)+Math.pow(m,2))):"farthest-side"===h?A<=_?_-A+c:d<=A?A-d+c:R<=f?f-R+u:p<=A?R-p+u:(E=Math.max(d-A,A-_),T=Math.max(p-R,R-f),Math.max(E,T)):(O=A<_+.5*c?d-A:A-_,M=R<f+.5*u?p-R:R-f,Math.sqrt(Math.pow(O,2)+Math.pow(M,2))),A,R]),3),I=k[0],N=k[1],D=k[2],w=pt(t,2*I);return I<=0&&((b=w[w.length-1])[1]=0,w=[b],N=i,D=a,I=S+x),{cx:N,cy:D,r:I,stop:w}}},yt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",alignSelf:"auto",textAlign:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,scaleX:1,scaleY:1,skewX:0,skewY:0,rotateZ:0,filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal"},gt={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},mt=[],Et=[];Object.keys(yt).forEach(function(t){Et.push(t);var e=yt[t];mt.push({k:t,v:e})});var Tt=[],Ot=[];Object.keys(gt).forEach(function(t){Ot.push(t);var e=gt[t];Tt.push({k:t,v:e})});var Mt={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto"},At=[];Object.keys(Mt).forEach(function(t){At.push(t)});var Rt={DOM:yt,GEOM:gt,isValid:function(t){return yt.hasOwnProperty(t)||gt.hasOwnProperty(t)},DOM_KEY_SET:Et,GEOM_KEY_SET:Ot,DOM_ENTRY_SET:mt,GEOM_ENTRY_SET:Tt,INHERIT:Mt,INHERIT_KEY_SET:At},bt=me.isNil;function St(t,e,r,n){bt(t.flexGrow)&&(t.flexGrow=e||0),bt(t.flexShrink)&&(t.flexShrink=r||0),bt(t.flexBasis)&&(t.flexBasis=n||0)}var xt={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderWidthTop","borderWidthRight","borderWidthBottom","borderWidthLeft"],borderColor:["borderColorTop","borderColorRight","borderColorBottom","borderColorLeft"],borderStyle:["borderStyleTop","borderStyleRight","borderStyleBottom","borderStyleLeft"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],scale:["scaleX","scaleY"],rotate:["rotateZ"],skew:["skewX","skewY"],toFull:function(r,t){var e,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T=r[t];if("background"===t)bt(r.backgroundImage)&&((e=Z.gradient.exec(T))?(r.backgroundImage=e[0],T=T.replace(e[0],"")):(n=Z.img.exec(T))&&(r.backgroundImage=n[0],T=T.replace(n[0],""))),!bt(r.backgroundRepeat)||(i=/(no-)?repeat(-[xy])?/i.exec(T))&&(r.backgroundRepeat=i[0].toLowerCase(),this.toFull(r,"backgroundRepeat")),!bt(r.backgroundColor)||(a=/^(transparent)|(#[0-9a-f]{3,6})|(rgba?\(.+?\))/i.exec(T))&&(r.backgroundColor=a[0],T=T.replace(a[0],"")),!bt(r.backgroundPosition)||(o=T.match(Z.position))&&(r.backgroundPosition=o.join(" "),this.toFull(r,"backgroundPosition"));else if("flex"===t){"none"===T?St(r,0,0,"auto"):"auto"===T?St(r,1,1,"auto"):/^[\d.]+$/.test(T)?St(r,Math.max(0,parseFloat(T)),1,0):/^[\d.]+px$/i.test(T)?St(r,1,1,0):/^[\d.]+%$/.test(T)?St(r,1,1,T):/^[\d.]+\s+[\d.]+$/.test(T)?(s=T.split(/\s+/),St(r,s[0],s[1],0)):/^[\d.]+\s+[\d.]+%$/.test(T)?(h=T.split(/\s+/),St(r,h[0],1,h[1])):St(r,0,1,"auto")}else if("borderRadius"===t){1===(T=T.toString().split("/")).length&&(T[1]=T[0]);for(var O=0;O<2;O++){var M=T[O].toString().split(/\s+/);0===M.length?T[O]=[0,0,0,0]:1===M.length?T[O]=[M[0],M[0],M[0],M[0]]:2===M.length?T[O]=[M[0],M[1],M[0],M[1]]:3===M.length?T[O]=[M[0],M[1],M[2],M[1]]:T[O]=M.slice(0,4)}this[t].forEach(function(t,e){bt(r[t])&&(r[t]=T[0][e]+" "+T[1][e])})}else{"backgroundPosition"===t?(1===(T=T.toString().split(/\s+/)).length&&(T[1]="50%"),this[t].forEach(function(t,e){bt(r[t])&&(r[t]=T[e])})):-1<["translate","scale","skew"].indexOf(t)?(1===(l=T.toString().split(/\s*,\s*/)).length&&(l[1]=l[0]),this[t].forEach(function(t,e){bt(r[t])&&(r[t]=l[e])})):"margin"===t||"padding"===t?(v=r,g=this[y=t],E=v[y],bt(E)||(m=E.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi))&&(1===m.length?m[3]=m[2]=m[1]=m[0]:2===m.length?(m[2]=m[0],m[3]=m[1]):3===m.length&&(m[3]=m[1]),g.forEach(function(t,e){bt(v[t])&&(v[t]=m[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(p=(c=r)[u=t],bt(p)||(bt(c[u+"Width"])&&(_=/\b[\d.]+px\b/i.exec(p),c[u+"Width"]=_?_[0]:0),bt(c[u+"Style"])&&(f=/\b(solid|dashed|dotted)\b/i.exec(p),c[u+"Style"]=f?f[1]:"solid"),bt(c[u+"Color"])&&((d=/#[0-9a-f]{3,6}/i.exec(p))&&-1<[4,7].indexOf(d[0].length)?c[u+"Color"]=d[0]:/\btransparent\b/i.test(p)?c[u+"Color"]="transparent":(d=/rgba?\(.+\)/i.exec(p),c[u+"Color"]=d?d[0]:"transparent")))):this[t]&&this[t].forEach(function(t){bt(r[t])&&(r[t]=T)})}}},kt=p.STYLE_KEY,It=kt.FONT_SIZE,Nt=kt.FONT_FAMILY,Dt=kt.FONT_WEIGHT,wt={},Ct={},Pt=[],Lt=[];function Ft(t,e,r,n,i){var a,o;return(o=t?n[t]?n[t]:n[t]=document.createElement("canvas"):(a=n===wt?Pt:Lt).length?a.pop():document.createElement("canvas")).width=e,o.height=r,"undefined"!=typeof karas&&karas.debug&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",n===wt?"canvas":"webgl"),t&&o.setAttribute("key",t),i&&o.setAttribute("message",i),document.body.appendChild(o)),{canvas:o,ctx:n===wt?o.getContext("2d"):o.getContext("webgl")||o.getContext("experimental-webgl"),draw:function(){},available:!0,release:function(){n===wt?Pt.push(this.canvas):Lt.push(this.canvas),this.canvas=null,this.ctx=null}}}var Bt,Ht,Gt={},Te={measureText:function(){var t=yn.MEASURE_TEXT,e=t.list,l=t.data,c="",u=[],_=[];if(Object.keys(l).forEach(function(t){var e=l[t],r=e.key,n=e.style,i=e.s;if(i)for(var a="position:absolute;font-family:".concat(n[Nt],";font-size:").concat(n[It],"px;font-weight:").concat(n[Dt]),o=0,s=i.length;o<s;o++){u.push(r);var h=i.charAt(o);_.push(h),c+='<span style="'.concat(a,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}}),c){var r=document.createElement("div");r.style.position="absolute",r.style.left="99999px",r.style.top="-99999px",r.style.visibility="hidden",document.body.appendChild(r),r.innerHTML=c;for(var n=r.childNodes,i=yn.CHAR_WIDTH_CACHE,a=yn.MEASURE_TEXT,o=0,s=n.length;o<s;o++){var h=n[o],f=u[o],d=_[o],p=window.getComputedStyle(h,null);i[f][d]=parseFloat(p.width)}e.forEach(function(t){return t.__measureCb()}),a.list=[],a.data={},document.body.removeChild(r)}},IMG:Gt,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){var n,i,a,o,t,s;Array.isArray(e)?(n=0,i=e.length,a=[],e.forEach(function(t,e){Te.measureImg(t,function(t){a[e]=t,++n===i&&r(a)})})):2===(o=Gt[e]=Gt[e]||{state:0,task:[]}).state?r(o):1===o.state?o.task.push(r):(o.state=1,o.task.push(r),(t=new Image).onload=function(){o.state=2,o.success=!0,o.width=t.width,o.height=t.height,o.source=t,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},t.onerror=function(t){Te.error("Measure img failed: "+e),o.state=2,o.success=!1,o.url=e,o.task.splice(0).forEach(function(t){return t(o)})},"data:"===e.substr(0,5)||(s=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&location.hostname!==s[1]&&(t.crossOrigin="anonymous"),t.src=e,"undefined"!=typeof karas&&karas.debug&&document.body.appendChild(t))},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Ht=function(t){var e;return"undefined"!=typeof requestAnimationFrame?(Te.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Te.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Wt.toString=function(){return Ht.toString()},Wt),cancelAnimationFrame:(Bt=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Te.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Te.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},Yt.toString=function(){return Bt.toString()},Yt),now:function(){return"undefined"!=typeof performance?(Te.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Te.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&wt.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,n){return Ft(r,t,e,wt,n)},releaseCacheCanvas:function(t){Pt.push(t)},delCacheCanvas:function(t){t&&delete wt[t]},hasCacheWebgl:function(t){return t&&Ct.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,n){return Ft(r,t,e,Ct,n)},releaseCacheWebgl:function(t){Lt.push(t)},delCacheWebgl:function(t){t&&delete Ct[t]},isDom:function(t){if(t){if(me.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if(me.isFunction(t.getElementsByTagName))return!0}return!1}};function Yt(t){return Bt.apply(this,arguments)}function Wt(t){return Ht.apply(this,arguments)}var Ut=p.STYLE_KEY,Xt=[[Ut.BACKGROUND_COLOR],[Ut.BORDER_BOTTOM_COLOR],[Ut.BORDER_LEFT_COLOR],[Ut.BORDER_RIGHT_COLOR],[Ut.BORDER_TOP_COLOR],[Ut.COLOR]],Kt=[[Ut.FONT_SIZE],[Ut.BORDER_BOTTOM_WIDTH],[Ut.BORDER_LEFT_WIDTH],[Ut.BORDER_RIGHT_WIDTH],[Ut.BORDER_TOP_WIDTH],[Ut.LEFT],[Ut.TOP],[Ut.RIGHT],[Ut.BOTTOM],[Ut.FLEX_BASIS],[Ut.WIDTH],[Ut.HEIGHT],[Ut.LINE_HEIGHT],[Ut.MARGIN_BOTTOM],[Ut.MARGIN_LEFT],[Ut.MARGIN_TOP],[Ut.MARGIN_RIGHT],[Ut.PADDING_TOP],[Ut.PADDING_RIGHT],[Ut.PADDING_BOTTOM],[Ut.PADDING_LEFT],[Ut.STROKE_WIDTH],[Ut.STROKE_MITERLIMIT]],Vt=[[Ut.BACKGROUND_IMAGE],[Ut.FILL],[Ut.STROKE]],zt=[[Ut.BORDER_TOP_LEFT_RADIUS],[Ut.BORDER_TOP_RIGHT_RADIUS],[Ut.BORDER_BOTTOM_RIGHT_RADIUS],[Ut.BORDER_BOTTOM_LEFT_RADIUS]],jt={};Xt.forEach(function(t){jt[t]=!0});var $t={};Kt.forEach(function(t){$t[t]=!0});var qt={};zt.forEach(function(t){qt[t]=!0});var Zt={};Vt.forEach(function(t){Zt[t]=!0});var Jt=[[Ut.TRANSLATE_X],[Ut.TRANSLATE_Y],[Ut.SKEW_X],[Ut.SKEW_Y],[Ut.SCALE_X],[Ut.SCALE_Y],[Ut.ROTATE_Z]],Qt={};Jt.forEach(function(t){Qt[t]=!0});var ne,ie,ae={KEY_COLOR:Xt,KEY_EXPAND:Jt,KEY_GRADIENT:Vt,KEY_LENGTH:Kt,KEY_RADIUS:zt,COLOR_HASH:jt,EXPAND_HASH:Qt,GRADIENT_HASH:Zt,LENGTH_HASH:$t,RADIUS_HASH:qt,GRADIENT_TYPE:{linear:!0,radial:!0}},oe=Rt.DOM,se=Rt.GEOM,he=b.INHERIT,le=p.STYLE_KEY,ce={},ue=[],_e=c({},le.POINTER_EVENTS,!0),fe=(c(ne={},le.TRANSFORM,!0),c(ne,le.TRANSLATE_X,!0),c(ne,le.TRANSLATE_Y,!0),c(ne,le.SKEW_X,!0),c(ne,le.SKEW_Y,!0),c(ne,le.SCALE_X,!0),c(ne,le.SCALE_Y,!0),c(ne,le.ROTATE_Z,!0),c(ne,le.COLOR,!0),c(ne,le.FONT_STYLE,!0),c(ne,le.STROKE_WIDTH,!0),c(ne,le.FILL,!0),c(ne,le.STROKE_DASHARRAY,!0),c(ne,le.STROKE_LINECAP,!0),c(ne,le.STROKE_LINEJOIN,!0),c(ne,le.STROKE_MITERLIMIT,!0),c(ne,le.BACKGROUND_COLOR,!0),c(ne,le.BACKGROUND_IMAGE,!0),c(ne,le.BACKGROUND_POSITION_X,!0),c(ne,le.BACKGROUND_POSITION_Y,!0),c(ne,le.BACKGROUND_REPEAT,!0),c(ne,le.BACKGROUND_SIZE,!0),c(ne,le.STROKE,!0),c(ne,le.BORDER_BOTTOM_COLOR,!0),c(ne,le.BORDER_LEFT_COLOR,!0),c(ne,le.BORDER_RIGHT_COLOR,!0),c(ne,le.BORDER_TOP_COLOR,!0),c(ne,le.BORDER_TOP_LEFT_RADIUS,!0),c(ne,le.BORDER_TOP_RIGHT_RADIUS,!0),c(ne,le.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(ne,le.BORDER_BOTTOM_LEFT_RADIUS,!0),c(ne,le.VISIBILITY,!0),c(ne,le.OPACITY,!0),c(ne,le.Z_INDEX,!0),c(ne,le.FILTER,!0),c(ne,le.BOX_SHADOW,!0),c(ne,le.OVERFLOW,!0),ne),de=(c(ie={},le.FONT_SIZE,!0),c(ie,le.FONT_WEIGHT,!0),c(ie,le.FONT_FAMILY,!0),ie),pe={GEOM:ce,GEOM_KEY_SET:ue,IGNORE:_e,REPAINT:fe,MEASURE:de,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){pe.addGeom(e,t,r)}):t&&(ce.hasOwnProperty(t)||ue.push(t),(ce[t]=ce[t]||{})[e]=r||!0)}};function Oe(t,e){return ce.hasOwnProperty(e)&&ce[e].hasOwnProperty(t)}pe.isIgnore=function(t){return _e.hasOwnProperty(t)},pe.isGeom=Oe,pe.isRepaint=function(t){return fe.hasOwnProperty(t)||Oe(t)},pe.isMeasure=function(t){return de.hasOwnProperty(t)},pe.isValid=function(t,e){return!!e&&(!!oe.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!se.hasOwnProperty(e))||!!ce.hasOwnProperty(e)&&ce[e].hasOwnProperty(t)))};var Me,Ae,Re,be=pe.MEASURE_KEY_SET=Object.keys(de).map(function(t){return parseInt(t)}),Se=be.length;pe.isMeasureInherit=function(t){for(var e=0;e<Se;e++){var r=be[e];if(t.hasOwnProperty(r)&&t[r][1]===he)return!0}return!1},pe.measureInheritList=function(t){for(var e=[],r=0;r<Se;r++){var n=be[r];t.hasOwnProperty(n)&&t[n][1]===he&&e.push(n)}return e},pe.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),pe.addGeom("$circle",["r"]),pe.addGeom("$ellipse",["rx","ry"]),pe.addGeom("$rect",["rx","ry"]),pe.addGeom("$sector",["begin","end","edge","closure"]),pe.addGeom("$polyline",["points","controls","start","end"]),pe.addGeom("$polygon",["points","controls","start","end"]);var xe=p.STYLE_KEY,ke=p.STYLE_RV_KEY,Ie=p.style2Upper,Ne=p.STYLE_KEY,De=Ne.POSITION,we=Ne.WIDTH,Ce=Ne.HEIGHT,Pe=Ne.TRANSLATE_X,Le=Ne.TRANSLATE_Y,Fe=Ne.SCALE_X,Be=Ne.SCALE_Y,He=Ne.SKEW_X,Ge=Ne.SKEW_Y,Ye=Ne.ROTATE_Z,We=Ne.TRANSFORM,Ue=Ne.TRANSFORM_ORIGIN,Xe=Ne.BACKGROUND_IMAGE,Ke=Ne.BACKGROUND_COLOR,Ve=Ne.BACKGROUND_POSITION_X,ze=Ne.BACKGROUND_POSITION_Y,je=Ne.BACKGROUND_SIZE,$e=Ne.OPACITY,qe=Ne.Z_INDEX,Ze=Ne.COLOR,Je=Ne.FONT_SIZE,Qe=Ne.FONT_FAMILY,tr=Ne.FONT_WEIGHT,er=Ne.FONT_STYLE,rr=Ne.LINE_HEIGHT,nr=Ne.TEXT_ALIGN,ir=Ne.FILTER,ar=Ne.VISIBILITY,or=Ne.BOX_SHADOW,sr=Ne.POINTER_EVENTS,hr=Ne.FILL,lr=Ne.STROKE,cr=Ne.STROKE_DASHARRAY,ur=Ne.BORDER_TOP_WIDTH,_r=Ne.BORDER_RIGHT_WIDTH,fr=Ne.BORDER_BOTTOM_WIDTH,dr=Ne.BORDER_LEFT_WIDTH,pr=Ne.DISPLAY,vr=Ne.FLEX_DIRECTION,yr=Ne.FLEX_GROW,gr=Ne.FLEX_SHRINK,mr=Ne.FLEX_BASIS,Er=Ne.JUSTIFY_CONTENT,Tr=Ne.ALIGN_SELF,Or=Ne.ALIGN_ITEMS,Mr=Ne.MATRIX,Ar=b.AUTO,Rr=b.PX,br=b.PERCENT,Sr=b.NUMBER,xr=b.INHERIT,kr=b.DEG,Ir=b.RGBA,Nr=b.STRING,Dr=me.isNil,wr=me.rgba2int,Cr=me.equalArr,Pr=pe.MEASURE_KEY_SET,Lr=pe.isGeom,Fr=pe.GEOM,Br=pe.GEOM_KEY_SET,Hr=ae.COLOR_HASH,Gr=ae.LENGTH_HASH,Yr=ae.RADIUS_HASH,Wr=ae.GRADIENT_HASH,Ur=ae.EXPAND_HASH,Xr=ae.GRADIENT_TYPE,Kr={translateX:Pe,translateY:Le,scaleX:Fe,scaleY:Be,skewX:He,skewY:Ge,rotateZ:Ye,rotate:Ye};function Vr(t,e,r){return"auto"===r?t[e]=[0,Ar]:"inherit"===r?t[e]=[0,xr]:/%$/.test(r)?(r=parseFloat(r)||0,t[e]=[r,br]):/px$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,Rr]):/deg$/i.test(r)?(r=parseFloat(r)||0,t[e]=[r,kr]):(r=parseFloat(r)||0,t[e]=[r,Sr]),e!==dr&&e!==ur&&e!==_r&&e!==fr&&e!==we&&e!==Ce&&e!==mr||(t[e][0]=Math.max(t[e][0],0)),t}function zr(t,e){t===Fe||t===Be?e[1]=Sr:t===Pe||t===Le?e[1]===Sr&&(e[1]=Rr):e[1]===Sr&&(e[1]=kr)}function jr(t){return t[Je]*S.arial.lhr}function $r(t,e,r){for(t*=.01;e;){var n=e.currentStyle[r];if(n[1]===Ar){if(r!==we)break;e=e.domParent}else{if(n[1]===Rr)return t*n[0];n[1]===br&&(t*=.01*n[0],e=e.domParent)}}return t}var qr=(c(Me={},xe.POSITION,!0),c(Me,xe.DISPLAY,!0),c(Me,xe.BACKGROUND_REPEAT,!0),c(Me,xe.FLEX_DIRECTION,!0),c(Me,xe.FLEX_GROW,!0),c(Me,xe.FLEX_SHRINK,!0),c(Me,xe.JUSTIFY_CONTENT,!0),c(Me,xe.ALIGN_ITEMS,!0),c(Me,xe.ALIGN_SELF,!0),c(Me,xe.OVERFLOW,!0),c(Me,xe.MIX_BLEND_MODE,!0),c(Me,xe.STROKE_LINECAP,!0),c(Me,xe.STROKE_LINEJOIN,!0),c(Me,xe.STROKE_MITERLIMIT,!0),c(Me,xe.FILL_RULE,!0),c(Me,xe.OPACITY,!0),c(Me,xe.Z_INDEX,!0),Me),Zr=(c(Ae={},xe.COLOR,!0),c(Ae,xe.BACKGROUND_SIZE,!0),c(Ae,xe.BACKGROUND_COLOR,!0),c(Ae,xe.BORDER_TOP_COLOR,!0),c(Ae,xe.BORDER_RIGHT_COLOR,!0),c(Ae,xe.BORDER_BOTTOM_COLOR,!0),c(Ae,xe.BORDER_LEFT_COLOR,!0),Ae),Jr=(c(Re={},xe.BORDER_TOP_LEFT_RADIUS,!0),c(Re,xe.BORDER_TOP_RIGHT_RADIUS,!0),c(Re,xe.BORDER_BOTTOM_RIGHT_RADIUS,!0),c(Re,xe.BORDER_BOTTOM_LEFT_RADIUS,!0),c(Re,xe.TRANSFORM_ORIGIN,!0),Re);var Qr={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!me.isObject(a))return{};var e,_,r,n,i,o,s,h,l,c,u,f={},d=(a=me.extend({},a)).border;if(d&&xt.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){xt.toFull(a,t)}),(d=a.borderWidth)&&xt.toFull(a,"borderWidth"),(d=a.borderColor)&&xt.toFull(a,"borderColor"),(d=a.borderStyle)&&xt.toFull(a,"borderStyle"),(d=a.borderRadius)&&xt.toFull(a,"borderRadius"),(d=a.background)&&xt.toFull(a,"background"),d=a.backgroundPosition,Dr(d)||xt.toFull(a,"backgroundPosition"),(d=a.flex)&&xt.toFull(a,"flex"),d=a.margin,Dr(d)||xt.toFull(a,"margin"),d=a.padding,Dr(d)||xt.toFull(a,"padding"),d=a.backgroundRepeat,Dr(d)||xt.toFull(a,"backgroundRepeat"),["translate","scale","skew"].forEach(function(t){d=a[t],Dr(d)||xt.toFull(a,t)}),d=a.rotate,Dr(d)||xt.toFull(a,"rotate"),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ"].forEach(function(t){var e=a[t];!Dr(e)&&a.transform&&Te.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,r=t.v;Dr(a[e])&&(a[e]=r)}),void 0!==(d=a.backgroundImage)&&(Z.gradient.test(d)?f[Xe]=vt.parseGradient(d):Z.img.test(d)?f[Xe]=Z.img.exec(d)[2]:f[Xe]=null),(d=a.backgroundColor)&&((e=/^#[0-9a-f]{3,6}/i.exec(d))&&-1<[4,7].indexOf(e[0].length)?f[Ke]=[wr(e[0]),Ir]:(e=/rgba?\(.+\)/i.exec(d),f[Ke]=[wr(e?e[0]:[0,0,0,0]),Ir])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){d=a[t],Dr(d)||(t=e?ze:Ve,/%$/.test(d)||/px$/i.test(d)||/^-?[\d.]+$/.test(d)?(Vr(f,t,d),(d=f[t])[1]===Sr&&(d[1]=Rr)):f[t]=[{top:0,left:0,center:50,right:100,bottom:100}[d]||0,br])}),d=a.backgroundSize){var p=f[je]=[],v=d.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(v){1===v.length&&("contain"===v[0]||"cover"===v[0]?v[1]=v[0]:v[1]="auto");for(var y=0;y<2;y++){var g=v[y];/%$/.test(g)||/px$/i.test(g)||/^-?[\d.]+$/.test(g)?(Vr(p,y,g),p[y][1]===Sr&&(p[y][1]=Rr)):"0"===g||0===g?p.push([0,Rr]):"contain"===g||"cover"===g?p.push([g,Nr]):p.push([0,Ar])}}else p.push([0,Ar]),p.push([0,Ar])}if(["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];Dr(e)||(f[xe[Ie(t)]]=[wr(e),Ir])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!Dr(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var n=0;n<2;n++){var i=r[n];/%$/.test(i)||/px$/i.test(i)||/^-?[\d.]+$/.test(i)?(Vr(r,n,i),r[n][1]===Sr&&(r[n][1]=Rr)):r[n]=[0,Rr]}f[xe[Ie(t)]]=r}}),(d=a.transform)&&(_=f[We]=[],(r=(d||"").toString().match(/\w+\(.+?\)/g))&&r.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.indexOf("("),c=t.slice(0,l),u=t.slice(l+1,t.length-1);"matrix"===c?(6<(e=(e=u.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length&&(e=e.slice(0,6)),6===e.length&&_.push([Mr,e])):Kr.hasOwnProperty(c)?(zr(r=Kr[c],(n=Vr([r,u],1,u))[1]),_.push(n)):{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)&&(1===(i=u.toString().split(/\s*,\s*/)).length&&(i[1]=i[0].slice(0)),a=xe[Ie(c+"X")],o=xe[Ie(c+"Y")],s=Vr([a,i[0]],1,i[0]),h=Vr([o,i[1]],1,i[1]),zr(a,s),zr(o,h),_.push(s),_.push(h))})),d=a.transformOrigin,!Dr(d)){var m=f[Ue]=[],E=d.toString().match(Z.position);if(E){1===E.length&&(E[1]=E[0]);for(var T=0;T<2;T++){var O=E[T];/%$/.test(O)||/px$/i.test(O)||/^-?[\d.]+$/.test(O)?(Vr(m,T,O),m[T][1]===Sr&&(m[T][1]=Rr)):(m.push([{top:0,left:0,center:50,right:100,bottom:100}[O],br]),Dr(m[T][0])&&(m[T][0]=50))}}else m.push([50,br]),m.push([50,br])}return["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e,r=a[t];Dr(r)||(e=Kr[t],Vr(f,e,r),zr(e,f[e]))}),d=a.opacity,Dr(d)||(d=parseFloat(d),isNaN(d)?f[$e]=1:(d=Math.max(d,0),d=Math.min(d,1),f[$e]=d)),d=a.zIndex,Dr(d)||(f[qe]=parseInt(d)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height","flexBasis","strokeWidth"].forEach(function(t){var e=a[t];Dr(e)||(t=xe[Ie(t)],Vr(f,t,e),(e=f[t])[1]===Sr&&(e[1]=Rr))}),(d=a.color)&&(f[Ze]="inherit"===d?[[],xr]:[wr(d),Ir]),!(d=a.fontSize)&&0!==d||("inherit"===d?f[Je]=[0,xr]:/%$/.test(d)?(n=Math.max(0,parseFloat(d)),f[Je]=n?[n,br]:[16,Rr]):f[Je]=[Math.max(0,parseFloat(d))||16,Rr]),d=a.fontWeight,Dr(d)||(f[tr]="bold"===d?[700,Sr]:"normal"===d?[400,Sr]:"lighter"===d?[200,Sr]:"inherit"===d?[0,xr]:[Math.max(0,parseInt(d))||400,Sr]),(d=a.fontStyle)&&(f[er]="inherit"===d?[0,xr]:[d,Nr]),(d=a.fontFamily)&&(f[Qe]="inherit"===d?[0,xr]:[d,Nr]),(d=a.textAlign)&&(f[nr]="inherit"===d?[0,xr]:[d,Nr]),d=a.lineHeight,Dr(d)||("inherit"===d?f[rr]=[0,xr]:"normal"===d?f[rr]=[0,Ar]:/px$/i.test(d)?f[rr]=[parseFloat(d),Rr]:(i=Math.max(0,parseFloat(d))||"normal",f[rr]="normal"===i?[null,Ar]:[i,Sr])),d=a.strokeDasharray,Dr(d)||((o=d.toString().match(/[\d.]+/g))?((o=o.map(function(t){return parseFloat(t)})).length%2==1&&o.push(o[o.length-1]),f[cr]=o):f[cr]=[]),(d=a.fill)&&(0<d.indexOf("-gradient(")?f[hr]=vt.parseGradient(d):f[hr]=wr(d)),d=a.stroke,Dr(d)||(0<d.indexOf("-gradient(")?f[lr]=vt.parseGradient(d):f[lr]=wr(d)),void 0!==(d=a.filter)&&(s=null,!(h=/\bblur\s*\(\s*([\d.]+)\s*(?:px)?\s*\)/i.exec(d||""))||(l=parseFloat(h[1])||0)&&(s=[["blur",l]]),f[ir]=s),(d=a.visibility)&&(f[ar]="inherit"===d?[0,xr]:[d,Nr]),(d=a.pointerEvents)&&(f[sr]="inherit"===d?[0,xr]:[d,Nr]),void 0!==(d=a.boxShadow)&&(c=null,(u=(d||"").match(/(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?)\s+(-?[\d.]+(px)?\s*)?(-?[\d.]+(px)?\s*)?(((transparent)|(#[0-9a-f]{3,6})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&u.forEach(function(t){var e=/(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?)\s+(-?[\d.]+(?:px)?\s*)?(-?[\d.]+(?:px)?\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,6})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){c=c||[];for(var r=[e[1],e[2],e[3]||0,e[4]||0,e[5]||"#000",e[6]||"outset"],n=0;n<4;n++)Vr(r,n,r[n]),1<n&&r[n][0]<0&&(r[n]=0),r[n][1]===Sr&&(r[n]=r[n][0]);r[4]=wr(r[4]),c.push(r)}}),f[or]=c),["position","display","backgroundRepeat","flexDirection","justifyContent","alignItems","alignSelf","overflow","mixBlendMode","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","flexGrow","flexShrink","zIndex"].forEach(function(t){a.hasOwnProperty(t)&&(f[xe[Ie(t)]]=a[t])}),Br.forEach(function(t){a.hasOwnProperty(t)&&(f[t]=a[t])}),f},computeMeasure:function(t,r){var n=t.currentStyle,i=t.computedStyle,e=t.parent,a=!r&&e.computedStyle;Pr.forEach(function(t){var e=n[t];e[1]===xr?i[t]=r?Rt.INHERIT[ke[t]]:a[t]:e[1]===br?i[t]=r?Rt.INHERIT[ke[t]]:a[t]*e[1]*.01:i[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,n=t.computedStyle,i=t.parent,a=!i,o=i&&i.computedStyle;[ur,_r,fr,dr].forEach(function(t){n[t]=r[t][1]===Rr?Math.max(0,r[t][0]):0}),[De,pr,vr,Er,Or,Tr,yr,gr].forEach(function(t){n[t]=r[t]});var s=r[nr];s[1]===xr?n[nr]=a?"left":o[nr]:n[nr]=a?"left":s[0];var h=r[rr];h[1]===xr?n[rr]=a?jr(n):o[rr]:h[1]===Rr?n[rr]=Math.max(h[0],0)||jr(n):h[1]===Sr?n[rr]=Math.max(h[0],0)*n[Je]||jr(n):n[rr]=jr(n)},setFontStyle:function(t){var e=t[Je];return(t[er]||"normal")+" "+(t[tr]||"400")+" "+e+"px/"+e+"px "+(t[Qe]||"arial")},getBaseLine:function(t){var e=t[Je],r=e*S.arial.lhr;return.5*(t[rr]-r)+e*S.arial.blr},calRelative:function(t,e,r,n,i){return r[1]===Ar?r=0:-1<[Rr,Sr,kr,Ir,Nr].indexOf(r[1])?r=r[0]:r[1]===br&&(r=$r(r[0],n,i?we:Ce)),r},calAbsolute:function(t,e,r,n){return r[1]===Ar?r=0:-1<[Rr,Sr,kr,Ir,Nr].indexOf(r[1])?r=r[0]:r[1]===br&&(r=r[0]*n*.01),r},equalStyle:function(t,e,r,n){if(!e||!r)return e===r;if(t===We){if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var o=e[i],s=r[i];if(o[0]!==s[0])return!1;if(!Cr(o[1],s[1]))return!1}return!0}if(t===ir){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!Cr(e[h],r[h]))return!1}if(t===Ue||t===je||Yr.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Ve||t===ze||Gr.hasOwnProperty(t)||Ur.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===or)return Cr(e,r);if(Hr.hasOwnProperty(t))return e[1]===r[1]&&Cr(e[0],r[0]);if(Wr.hasOwnProperty(t)&&e.k===r.k&&Xr.hasOwnProperty(e.k)){var c=e.v,u=r.v;if(e.d!==r.d||c.length!==u.length)return!1;for(var _=0,f=c.length;_<f;_++){var d=c[_],p=u[_];if(d.length!==p.length)return!1;for(var v=0;v<4;v++)if(d[0][v]!==p[0][v])return!1;if(1<d.length&&(d[1][0]!==p[1][0]||d[1][1]!==p[1][1]))return!1}return!0}return Lr(n.tagName,t)&&(n.isMulti||Array.isArray(e)&&Array.isArray(r))?Cr(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[De];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){for(var r={},n=0,i=(e=e||Object.keys(t).map(function(t){return Fr.hasOwnProperty(t)||(t=parseInt(t)),t})).length;n<i;n++){var a,o=e[n],s=t[o];if(o===Xe)s.k?r[o]=me.clone(s):(a=r[o]=s.slice(0))[0]=a[0].slice(0);else if(o===hr||o===lr)s.k?r[o]=me.clone(s):r[o]=s.slice(0);else if(o===We){if(s){for(var h=s.slice(0),l=0,c=h.length;l<c;l++)h[l]=h[l].slice(0),h[l][1]=h[l][1].slice(0);r[o]=h}}else if(qr.hasOwnProperty(o))r[o]=s;else if(Fr.hasOwnProperty(o))r[o]=me.clone(s);else if(s){var u=r[o]=s.slice(0);if(Zr.hasOwnProperty(o))u[0]=u[0].slice(0);else if(Jr.hasOwnProperty(o))u[0]=u[0].slice(0),u[1]=u[1].slice(0);else if(o===We)for(var _=0,f=u.length;_<f;_++)u[_]=u[_].slice(0)}}return r}},tn=p.STYLE_KEY,en=tn.COLOR,rn=tn.FONT_WEIGHT,nn=tn.FONT_FAMILY,an=tn.FONT_SIZE,on=tn.FONT_STYLE,sn=function(){function a(t,e,r,n,i){g(this,a),this.__parent=t,this.__x=e,this.__y=r,this.__width=n,this.__content=i,this.__virtualDom={}}return l(a,[{key:"render",value:function(t,e,r,n,i,a){var o=this.content,s=this.x,h=this.y,l=this.parent,c=l.ox,u=l.oy;h+=Qr.getBaseLine(r),s+=c+i,h+=u+a,t===ye.CANVAS?e.fillText(o,s,h):t===ye.SVG&&(this.__virtualDom={type:"item",tagName:"text",props:[["x",s],["y",h],["fill",n[en]],["font-family",r[nn]],["font-weight",r[rn]],["font-style",r[on]],["font-size",r[an]+"px"]],content:me.encodeHtml(o)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return Qr.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),a}(),hn=p.STYLE_KEY,ln=hn.DISPLAY,cn=hn.LINE_HEIGHT,un=hn.FONT_SIZE,_n=hn.FONT_FAMILY,fn=hn.FONT_WEIGHT,dn=hn.COLOR,pn=hn.VISIBILITY,vn=hn.TEXT_ALIGN,yn=function(){t(d,R);var r=e(d);function d(t){var e;return g(this,d),(e=r.call(this)).__content=me.isNil(t)?"":t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return l(d,[{key:"__computeMeasure",value:function(t,e){var r=this.content,n=this.computedStyle,i=this.charWidthList;i.splice(0),t===ye.CANVAS&&(e.font=Qr.setFontStyle(n));for(var a=this.__key=n[un]+","+n[_n]+","+n[fn],o=d.MEASURE_TEXT.data[a]=d.MEASURE_TEXT.data[a]||{key:a,style:n,hash:{},s:[]},s=d.CHAR_WIDTH_CACHE[a]=d.CHAR_WIDTH_CACHE[a]||{},h=0,l=!1,c=0,u=r.length;c<u;c++){var _=r.charAt(c),f=void 0;s.hasOwnProperty(_)?(f=s[_],i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):t===ye.CANVAS?(f=s[_]=e.measureText(_).width,i.push(f),h+=f,this.__charWidth=Math.max(this.charWidth,f)):(o.hash.hasOwnProperty(_)||(o.s+=_),o.hash[_]=!0,i.push(-1),l=!0)}this.__textWidth=h,l&&d.MEASURE_TEXT.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,n=this.__key,i=d.CHAR_WIDTH_CACHE[n],a=0,o=0,s=r.length;o<s;o++){r[o]<0&&(a+=t=r[o]=i[e.charAt(o)],this.__charWidth=Math.max(this.charWidth,t))}this.__textWidth=a}},{key:"__layout",value:function(t,e){var r=this,n=t.x,i=t.y,a=t.w;this.__x=this.__sx1=n,this.__y=this.__sy1=i;var o=this.isDestroyed,s=this.content,h=this.computedStyle,l=this.lineBoxes,c=this.charWidthList;if(!o&&"none"!==h[ln]){this.__ox=this.__oy=0,l.splice(0);for(var u,_,f,d,p=0,v=0,y=0,g=s.length,m=0;v<g;){(y+=c[v])===a?(u=new sn(this,n,i,y,s.slice(p,v+1)),l.push(u),m=Math.max(m,y),i+=h[cn],v=p=v+1,y=0):a<y?(_=void 0,_=v===p?(v=p+1,y):y-c[v],f=new sn(this,n,i,_,s.slice(p,v)),l.push(f),m=Math.max(m,_),i+=h[cn],p=v,y=0):v++}if(p<g&&p<v){for(y=0,v=p;v<g;v++)y+=c[v];var E=new sn(this,n,i,y,s.slice(p,g));l.push(E),m=Math.max(m,y),i+=h[cn]}this.__width=m,this.__height=i-t.y,e||(d=h[vn],-1<["center","right"].indexOf(d)&&l.forEach(function(t){var e=r.__width-t.width;0<e&&t.__offsetX("center"===d?.5*e:e)}))}}},{key:"__offsetX",value:function(e,t){rt(et(d.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){rt(et(d.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;e===ye.SVG&&(this.__virtualDom={type:"text",children:[]});var h,l,c=this.isDestroyed,u=this.computedStyle,_=this.lineBoxes,f=this.cacheStyle;return!c&&"none"!==u[ln]&&"hidden"!==u[pn]&&(e===ye.CANVAS&&(h=Qr.setFontStyle(u),r.font!==h&&(r.font=h),l=f[dn],r.fillStyle!==l&&(r.fillStyle=l)),_.forEach(function(t){t.render(e,r,u,f,o,s)}),e===ye.SVG&&(this.virtualDom.children=_.map(function(t){return t.virtualDom})),!0)}},{key:"__deepScan",value:function(t){t(this)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes;if(!t.length)return 0;var e=t[t.length-1];return e.y-this.y+e.baseLine}},{key:"currentStyle",get:function(){return this.parent.currentStyle}},{key:"computedStyle",get:function(){return this.parent.computedStyle}},{key:"cacheStyle",get:function(){return this.parent.__cacheStyle}},{key:"bbox",get:function(){if(this.content){var t=this.sx,e=this.sy;return[t,e,t+this.width,e+this.height]}}}]),d}();c(yn,"CHAR_WIDTH_CACHE",{}),c(yn,"MEASURE_TEXT",{list:[],data:{}}),yn.prototype.__renderByMask=yn.prototype.render;var gn=.5*Math.PI;var mn={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var i=0,a=0,o=e.length;a<o;a++){var s=e[a];if(Array.isArray(s)){i=a;break}}t.moveTo(e[i][0]+r,e[i][1]+n);for(var h=i+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+n):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+n,c[2]+r,c[3]+n,c[4]+r,c[5]+n))}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=0,r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){e=r;break}}for(var a="M"+t[e][0]+","+t[e][1],o=e+1,s=t.length;o<s;o++){var h=t[o];Array.isArray(h)&&(2===h.length?a+="L"+h[0]+","+h[1]:4===h.length?a+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(a+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return a},canvasLine:function(t,e,r,n,i,a,o,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(a[0]+h,a[1]+l,o[0]+h,o[1],n+h,i+l),2):2===s?(t.quadraticCurveTo(o[0]+h,o[1]+l,n+h,i+l),2):1===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,n+h,i+l),2):(t.lineTo(n+h,i+l),1)},svgLine:function(t,e,r,n,i,a,o){return 3===o?"M"+t+","+e+"C"+i[0]+","+i[1]+" "+a[0]+","+a[1]+" "+r+","+n:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+n:1===o?"M"+t+","+e+"Q"+i[0]+","+i[1]+" "+r+","+n:"M"+t+","+e+"L"+r+","+n},canvasSector:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=14<arguments.length&&void 0!==arguments[14]?arguments[14]:0,p=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0;t.arc(e+d,r+p,n,l*Math.PI/180-gn,c*Math.PI/180-gn),_?(u&&f||t.lineTo(e+d,r+p),t.lineTo(i+d,a+p),0<h&&t.stroke()):(0<h&&t.stroke(),u&&f||t.lineTo(e+d,r+p),t.lineTo(i+d,a+p))},svgSector:function(t,e,r,n,i,a,o,s,h,l,c){var u;return(!l||0<s)&&(u="M"+n+","+i+"A"+r+","+r+" 0 "+h+" 1 "+a+","+o),[c&&h?"M"+n+","+i+"A"+r+","+r+" 0 "+h+" 1 "+a+","+o+"z":"M"+t+","+e+"L"+n+","+i+"A"+r+","+r+" 0 "+h+" 1 "+a+","+o+"z",u]}};function En(t,e,r,n){var i=r-t,a=n-e,o=Math.atan(Math.abs(a)/Math.abs(i));return i<0&&0<=a?Math.PI-o:i<0&&a<0?o-Math.PI:0<=i&&0<=a?o:-o}function Tn(t){var e=Math.sin(t),r=Math.cos(t),n=ge.identity();return n[0]=n[3]=r,n[1]=e,n[2]=-e,n}function On(t,e){var r=ve(t,6),n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],h=r[5],l=ve(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=(a-n)*(h-i)-(s-n)*(o-i),v=(_-c)*(l[5]-u)-(d-c)*(f-u);return 0<p&&v<0||p<0&&0<v}var Mn={exchangeOrder:function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g=(c=ve(t,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=[0,1,2],f<u&&f<p?(u=(r=[f,d,u,_])[0],_=r[1],f=r[2],d=r[3],y[0]=1,y[1]=0):p<f&&p<u&&(u=(n=[p,v,u,_])[0],_=n[1],p=n[2],v=n[3],y[0]=2,y[2]=0),u===f?d<_&&(u=(i=[f,d,u,_])[0],_=i[1],f=i[2],d=i[3],a=y[0],y[0]=y[1],y[1]=a):u===p&&v<_&&(u=(o=[p,v,u,_])[0],_=o[1],p=o[2],v=o[3],s=y[0],y[0]=y[2],y[2]=s),(f-u)*(v-_)-(p-u)*(d-_)<0&&(f=(h=[p,v,f,d])[0],d=h[1],p=h[2],v=h[3],l=y[1],y[1]=y[2],y[2]=l),[u,_,f,d,p,v,y]),m=ve(g,7),E=m[0],T=m[1],O=m[2],M=m[3],A=m[4],R=m[5],b=ve(function(t,e){for(var r=[],n=0,i=e.length;n<i;n++){var a=e[n];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,m[6]),6);return[[E,T,O,M,A,R],[b[0],b[1],b[2],b[3],b[4],b[5]]]},isOverflow:On,transform:function(t,e){var r,n=ve(t,6),i=n[0],a=n[1],o=n[2],s=n[3],h=n[4],l=n[5],c=ve(e,6),u=c[0],_=c[1],f=c[2],d=c[3],p=c[4],v=c[5],y=On(t,e),g=ge.identity();g[4]=-i,g[5]=-a;var m=En(i,a,o,s);0!==m&&(r=Tn(-m),g=ge.multiply(r,g));var E=Ee.pointsDistance(i,a,o,s),T=Ee.pointsDistance(u,_,f,d),O=ge.identity();O[4]=-u,O[5]=-_;var M=m=En(u,_,f,d);0!==m&&(r=Tn(-m),O=ge.multiply(r,O));var A=Math.abs(ge.calPoint([h,l],g)[1]),R=Math.abs(ge.calPoint([p,v],O)[1]);E===T&&A===R||(r=ge.identity(),E!==T&&(r[0]=T/E),A!==R&&(r[3]=R/A),g=ge.multiply(r,g)),O=g;var b=ve(ge.calPoint([i,a],O),2),S=b[0],x=b[1],k=ve(ge.calPoint([o,s],O),2),I=k[0],N=k[1],D=ve(ge.calPoint([h,l],O),2),w=D[0],C=D[1],P=Ee.pointsDistance(S,x,I,N),L=Ee.pointsDistance(S,x,w,C),F=Ee.pointsDistance(w,C,I,N),B=Ee.pointsDistance(u,_,f,d),H=Ee.pointsDistance(u,_,p,v),G=Ee.pointsDistance(p,v,f,d),Y=Ee.angleBySide(F,P,L),W=Ee.angleBySide(G,B,H);return Y!==W&&((r=ge.identity())[2]=Math.tan(Y-.5*Math.PI)+Math.tan(.5*Math.PI-W),g=ge.multiply(r,g)),y&&(g[1]=-g[1],g[3]=-g[3],g[5]=-g[5]),(r=0!==M?Tn(M):ge.identity())[4]=u,r[5]=_,g=ge.multiply(r,g)}},An={matrix:ge,tar:Mn,geom:Ee},Rn=p.STYLE_KEY,bn=Rn.TRANSLATE_X,Sn=Rn.TRANSLATE_Y,xn=Rn.SCALE_X,kn=Rn.SCALE_Y,In=Rn.SKEW_X,Nn=Rn.SKEW_Y,Dn=Rn.ROTATE_Z,wn=Rn.MATRIX,Cn=b.PX,Pn=b.PERCENT,Ln=An.matrix,Fn=An.geom,Bn=Ln.identity,Hn=Ln.calPoint,Gn=Ln.multiply,Yn=Ln.isE,Wn=Fn.d2r,Un=Fn.pointInPolygon;function Xn(t,e,r){var i,a,o,n=(i=e,a=r,o=[],t.forEach(function(t){var e=ve(t,2),r=e[0],n=e[1];o.push([r,function(t,e,r,n){if(t===bn){if(e[1]===Pn)return e[0]*r*.01}else if(t===Sn){if(e[1]===Pn)return e[0]*n*.01}else if(t===wn)return e;return e[0]}(r,n,i,a)])}),o),c=Bn();return n.forEach(function(t){var e,r,n,i,a,o=ve(t,2),s=o[0],h=o[1],l=Bn();e=l,n=h,(r=s)===bn?e[4]=n:r===Sn?e[5]=n:r===xn?e[0]=n:r===kn?e[3]=n:r===In?(n=Wn(n),e[2]=Math.tan(n)):r===Nn?(n=Wn(n),e[1]=Math.tan(n)):r===Dn?(n=Wn(n),i=Math.sin(n),a=Math.cos(n),e[0]=e[3]=a,e[1]=i,e[2]=-i):r===wn&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5]),c=Gn(c,l)}),c}function Kn(t,e){var r=ve(e,2),n=r[0],i=r[1];if(0===n&&0===i)return t;var a=Bn();a[4]=n,a[5]=i;var o=Gn(a,t),s=Bn();return s[4]=-n,s[5]=-i,Gn(o,s)}var Vn={calMatrix:Xn,calOrigin:function(t,r,n){var i=[];return t.forEach(function(t,e){t[1]===Cn?i.push(t[0]):t[1]===Pn&&i.push(t[0]*(e?n:r)*.01)}),i},calMatrixByOrigin:Kn,calMatrixWithOrigin:function(t,e,r,n){return Kn(Xn(t,r,n),e)},pointInQuadrilateral:function(t,e,r,n,i,a,o,s,h,l,c){if(!c||Yn(c))return r<=t&&n<=e&&t<=o&&e<=s;var u=ve(Hn([r,n],c),2);r=u[0],n=u[1];var _=ve(Hn([i,a],c),2);i=_[0],a=_[1];var f=ve(Hn([h,l],c),2);h=f[0],l=f[1];var d=ve(Hn([o,s],c),2);return o=d[0],s=d[1],Un(t,e,[[r,n],[i,a],[o,s],[h,l]])}},zn=Ee.H;function jn(t,e,r,n,i,a,o,s){var h=1,l=1,c=1;t:for(var u=a;i<=u;u--)for(var _=s;o<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+n)%f)continue}if(1<r)if(u<(e+n)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function $n(t,e,r,n,i,a){var o=i-e,s=n-r,h=r-e,l=i-n;if("dotted"===t)return jn(o,h,l,s,a,a,Math.max(1,.25*a),2*a);var c=jn(o,h,l,s,a,3*a,Math.max(1,.25*a),2*a),u=c.n,_=c.ps,f=c.pd;return 1===u?jn(o,h,l,s,a,a,Math.max(1,.25*a),2*a):{n:u,ps:_,pd:f}}function qn(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=ve(_,2),p=d[0],v=d[1],y=ve(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,R,b,S,x,k,I,N,D,w,C,P=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,V=u[G];V[1][0]<P?F.push(V):V[0][0]>L?H.push(V):V[1][0]>L&&V[0][0]<P?(W=P<i?s+Math.tan(e)*(P-n):h,U=a<L?s+Math.tan(r)*(o-L):h,F.push([V[0],[P,s],[P,W],V[3]]),P<L&&(i<P&&L<a?B.push([[P,s],[L,s],[L,h],[P,h]]):i<P?(B.push([[P,s],[a,s],[a,h],[P,h]]),B.push([[a,s],[L,s],[L,U],[a,h]])):L<a?(B.push([[P,s],[i,s],[i,h],[P,W]]),B.push([[i,s],[L,s],[L,h],[i,h]])):(B.push([[P,s],[i,s],[i,h],[P,W]]),B.push([[i,s],[a,s],[a,h],[i,h]]),B.push([[a,s],[L,s],[L,U],[a,h]]))),H.push([[L,s],V[1],V[2],[L,U]])):V[1][0]>L?(X=a<L?s+Math.tan(r)*(o-L):h,B.push([V[0],[L,s],[L,X],V[3]]),H.push([[L,s],V[1],V[2],[L,X]])):V[0][0]<P?(K=P<i?s+Math.tan(e)*(P-n):h,F.push([V[0],[P,s],[P,K],V[3]]),B.push([[P,s],V[1],V[2],[P,K]])):B.push(V)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=s+v,b=(R=v-(h-s))/(p-(i-n)),x=ve((S=Zn(F[0][0],F[0][1],P,A,M,O,!0,Math.tan(T)*O))[0],2),w=x[0],C=x[1],E&&(I=ve((k=Zn(F[0][3],F[0][2],P,A,b,R,!0,Math.tan(T)*R))[0],2),N=I[0],D=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=Zn(t[0],t[1],P,A,M,O),E&&(n=Zn(t[3],t[2],P,A,b,R)));for(var i=0,a=r.length;i<a;i++)hi(r[i],w,C,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),E){for(var o=0,s=n.length;o<s;o++)hi(n[o],N,D,0);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=o-a<g&&t<m,j=Math.atan((o-a)/(h-s)),q=($=m)/g,Z=s+m,Q=(J=m-(h-s))/(g-(o-a)),et=ve((tt=Jn(H[ht-1][0],H[ht-1][1],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],z&&(nt=ve((rt=Jn(H[ht-1][3],H[ht-1][2],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=Jn(t[0],t[1],L,Z,q,$),z&&(n=Jn(t[3],t[2],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)hi(r[i],ot,st,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),z){for(var o=0,s=n.length;o<s;o++)hi(n[o],it,at,1);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}})),F.concat(B).concat(H)}function Zn(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(n-T)),R=r-Math.sin(A)*a/i,b=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Ee.h(Math.abs(f-A))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*x/i,n-Math.cos(I)*x],[r-Math.sin(N)*x/i,n-Math.cos(N)*x],[R,b]]}function Jn(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(n-g)),R=r+Math.sin(A)*a/i,b=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(M/(n-T)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),A===f)return[[R,b]];var S=Ee.h(Math.abs(A-f))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[R,b],[r+Math.sin(I)*x/i,n-Math.cos(I)*x],[r+Math.sin(N)*x/i,n-Math.cos(N)*x],[d,p]]}function Qn(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=ve(_,2),p=d[0],v=d[1],y=ve(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,R,b,S,x,k,I,N,D,w,C,P=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,V=u[G];V[2][1]<P?F.push(V):V[1][1]>L?H.push(V):V[2][1]>L&&V[1][1]<P?(W=P<h?a+Math.tan(r)*(h-P):a,U=l<L?a+Math.tan(e)*(L-l):a,F.push([V[0],V[1],[o,P],[W,P]]),P<L&&(L<l&&h<P?B.push([[a,P],[o,P],[o,L],[a,L]]):h<P?(B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]])):L<l?(B.push([[W,P],[o,P],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,L],[a,L]])):(B.push([[W,P],[o,P],[o,h],[a,h]]),B.push([[a,h],[o,h],[o,l],[a,l]]),B.push([[a,l],[o,l],[o,L],[U,L]]))),H.push([[U,L],[o,L],V[2],V[3]])):V[2][1]>L?(X=l<L?a+Math.tan(e)*(L-l):a,B.push([V[0],V[1],[o,L],[X,L]]),H.push([[X,L],[o,L],V[2],V[3]])):V[1][1]<P?(K=P<h?a+Math.tan(r)*(h-P):a,F.push([V[0],V[1],[o,P],[K,P]]),B.push([[K,P],[o,P],V[2],V[3]])):B.push(V)}F.length&&(E=h-s<v&&t<p,T=Math.atan((o-a)/(h-s)),M=(O=v)/p,A=o-p,b=(R=v-(h-s))/(p-(o-a)),x=ve((S=ti(F[0][1],F[0][2],A,P,M,O,!0,Math.tan(T)*O))[S.length-1],2),w=x[0],C=x[1],E&&(I=ve((k=ti(F[0][0],F[0][3],A,P,b,R,!0,Math.tan(T)*R))[k.length-1],2),N=I[0],D=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=ti(t[1],t[2],A,P,M,O),E&&(n=ti(t[0],t[3],A,P,b,R)));for(var i=0,a=r.length;i<a;i++)hi(r[i],w,C,2);if(E){for(var o=0,s=n.length;o<s;o++)hi(n[o],N,D,2);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=c-l<m&&t<g,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=o-g,Q=(J=m-(c-l))/(g-(o-a)),et=ve((tt=ei(H[ht-1][1],H[ht-1][2],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],z&&(nt=ve((rt=ei(H[ht-1][0],H[ht-1][3],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=ei(t[1],t[2],Z,L,q,$),z&&(n=ei(t[0],t[3],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)hi(r[i],ot,st,3);if(z){for(var o=0,s=n.length;o<s;o++)hi(n[o],it,at,3);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function ti(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(M/(n-T)),R=r+Math.sin(A)*a/i,b=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r+Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Ee.h(Math.abs(f-A))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r+Math.sin(I)*x/i,D=n-Math.cos(I)*x,w=A-k;return[[R,b],[r+Math.sin(w)*x/i,n-Math.cos(w)*x],[N,D],[d,p]]}function ei(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),R=r+Math.sin(A)*a/i,b=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[R,b]];var S=Ee.h(Math.abs(A-f))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r+Math.sin(I)*x/i,D=n+Math.cos(I)*x,w=f+k;return[[d,p],[r+Math.sin(w)*x/i,n+Math.cos(w)*x],[N,D],[R,b]]}function ri(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=ve(_,2),p=d[0],v=d[1],y=ve(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,R,b,S,x,k,I,N,D,w,C,P=i+p-(i-n),L=a-g+(o-a),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,V=u[G];V[2][0]<P?F.push(V):V[3][0]>L?H.push(V):V[2][0]>L&&V[3][0]<P?(W=P<i?c-Math.tan(e)*(P-n):h,U=a<L?c-Math.tan(r)*(o-L):l,F.push([V[0],[P,W],[P,c],V[3]]),P<L&&(i<P&&L<a?B.push([[P,l],[L,l],[L,c],[P,c]]):i<P?(B.push([[P,l],[a,l],[a,c],[P,c]]),B.push([[a,l],[L,U],[L,c],[a,c]])):L<a?(B.push([[P,W],[i,l],[i,c],[P,c]]),B.push([[i,l],[L,l],[L,c],[i,c]])):(B.push([[P,W],[i,l],[i,c],[P,c]]),B.push([[i,l],[a,l],[a,c],[i,c]]),B.push([[a,l],[L,U],[L,c],[a,c]]))),H.push([[L,U],V[1],V[2],[L,c]])):V[2][0]>L?(X=a<L?c-Math.tan(r)*(o-L):l,B.push([V[0],[L,X],[L,c],V[3]]),H.push([[L,X],V[1],V[2],[L,c]])):V[3][0]<P?(K=P<i?c-Math.tan(e)*(P-n):l,F.push([V[0],[P,K],[P,c],V[3]]),B.push([[P,K],V[1],V[2],[P,c]])):B.push(V)}F.length&&(E=i-n<p&&t<v,T=Math.atan((i-n)/(c-l)),M=(O=v)/p,A=c-v,b=(R=v-(c-l))/(p-(i-n)),x=ve((S=ni(F[0][3],F[0][2],P,A,M,O,!0,Math.tan(T)*O))[0],2),w=x[0],C=x[1],E&&(I=ve((k=ni(F[0][0],F[0][1],P,A,b,R,!0,Math.tan(T)*R))[0],2),N=I[0],D=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=ni(t[3],t[2],P,A,M,O),E&&(n=ni(t[0],t[1],P,A,b,R)));for(var i=0,a=r.length;i<a;i++)hi(r[i],w,C,4);if(E){for(var o=0,s=n.length;o<s;o++)hi(n[o],N,D,4);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=o-a<g&&t<m,j=Math.atan((o-a)/(c-l)),q=($=m)/g,Z=c-m,Q=(J=m-(c-l))/(g-(o-a)),et=ve((tt=ii(H[ht-1][3],H[ht-1][2],L,Z,q,$,!0,Math.tan(j)*$))[tt.length-1],2),ot=et[0],st=et[1],z&&(nt=ve((rt=ii(H[ht-1][0],H[ht-1][1],L,Z,Q,J,!0,Math.tan(j)*J))[rt.length-1],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=ii(t[3],t[2],L,Z,q,$),z&&(n=ii(t[0],t[1],L,Z,Q,J)));for(var i=0,a=r.length;i<a;i++)hi(r[i],ot,st,5);if(z){for(var o=0,s=n.length;o<s;o++)hi(n[o],it,at,5);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[3],t[3]=n[2].concat(n[1]).concat(n[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),F.concat(B).concat(H)}function ni(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(-y+r)*i,M=(-E+r)*i,A=Math.atan(M/(T-n)),R=r-Math.sin(A)*a/i,b=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(O/(g-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),f===A)return[[d,p]];var S=Ee.h(Math.abs(f-A))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f-k,N=A+k;return[[d,p],[r-Math.sin(I)*x/i,n+Math.cos(I)*x],[r-Math.sin(N)*x/i,n+Math.cos(N)*x],[R,b]]}function ii(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(y-r)*i,M=(E-r)*i,A=Math.atan(O/(g-n)),R=r+Math.sin(A)*a/i,b=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r+Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r+Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[R,b]];var S=Ee.h(Math.abs(A-f))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A+k,N=f-k;return[[R,b],[r+Math.sin(I)*x/i,n+Math.cos(I)*x],[r+Math.sin(N)*x/i,n+Math.cos(N)*x],[d,p]]}function ai(t,e,r,n,i,a,o,s,h,l,c,u,_,f){var d=ve(_,2),p=d[0],v=d[1],y=ve(f,2),g=y[0],m=y[1];if(!(p&&v||g&&m))return u;for(var E,T,O,M,A,R,b,S,x,k,I,N,D,w,C,P=h+v-(h-s),L=l-m+(c-l),F=[],B=[],H=[],G=0,Y=u.length;G<Y;G++){var W,U,X,K,V=u[G];V[3][1]<P?F.push(V):V[0][1]>L?H.push(V):V[3][1]>L&&V[0][1]<P?(W=P<h?i-Math.tan(r)*(h-P):i,U=l<L?i-Math.tan(e)*(L-l):i,F.push([V[0],V[1],[W,P],[n,P]]),P<L&&(L<l&&h<P?B.push([[n,P],[i,P],[i,L],[n,L]]):h<P?(B.push([[n,P],[i,P],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]])):L<l?(B.push([[n,P],[W,P],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,L],[n,L]])):(B.push([[n,P],[W,P],[i,h],[n,h]]),B.push([[n,h],[i,h],[i,l],[n,l]]),B.push([[n,l],[i,l],[U,L],[n,L]]))),H.push([[n,L],[U,L],V[2],V[3]])):V[3][1]>L?(X=l<L?i-Math.tan(e)*(L-l):i,B.push([V[0],V[1],[X,L],[n,L]]),H.push([[n,L],[X,L],V[2],V[3]])):V[1][1]<P?(K=P<h?i-Math.tan(r)*(h-P):i,F.push([V[0],V[1],[K,P],[n,P]]),B.push([[n,P],[K,P],V[2],V[3]])):B.push(V)}F.length&&(E=h-s<v&&t<p,T=Math.atan((i-n)/(h-s)),M=(O=v)/p,A=n+p,b=(R=v-(h-s))/(p-(i-n)),x=ve((S=oi(F[0][0],F[0][3],A,P,M,O,!0,Math.tan(T)*O))[S.length-1],2),w=x[0],C=x[1],E&&(I=ve((k=oi(F[0][1],F[0][2],A,P,b,R,!0,Math.tan(T)*R))[k.length-1],2),N=I[0],D=I[1]),F.forEach(function(t,e){var r,n;0===e?(r=S,E&&(n=k)):(r=oi(t[0],t[3],A,P,M,O),E&&(n=oi(t[1],t[2],A,P,b,R)));for(var i=0,a=r.length;i<a;i++)hi(r[i],w,C,6);if(E){for(var o=0,s=n.length;o<s;o++)hi(n[o],N,D,6);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var z,j,$,q,Z,J,Q,tt,et,rt,nt,it,at,ot,st,ht=H.length;return ht&&(z=c-l<m&&t<g,j=Math.atan((i-n)/(c-l)),q=($=m)/g,Z=n+g,Q=(J=m-(c-l))/(g-(i-n)),et=ve((tt=si(H[ht-1][0],H[ht-1][3],Z,L,q,$,!0,Math.tan(j)*$))[0],2),ot=et[0],st=et[1],z&&(nt=ve((rt=si(H[ht-1][1],H[ht-1][2],Z,L,Q,J,!0,Math.tan(j)*J))[0],2),it=nt[0],at=nt[1]),H.forEach(function(t,e){var r,n;e===ht-1?(r=tt,z&&(n=rt)):(r=si(t[0],t[3],Z,L,q,$),z&&(n=si(t[1],t[2],Z,L,Q,J)));for(var i=0,a=r.length;i<a;i++)hi(r[i],ot,st,7);if(z){for(var o=0,s=n.length;o<s;o++)hi(n[o],it,at,7);1===n.length?(t[2]=n[0],t.pop()):(t[2]=n[0],t[3]=n[1].concat(n[2]).concat(n[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),F.concat(B).concat(H)}function oi(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(M/(n-T)),R=r-Math.sin(A)*a/i,b=n-Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n-Math.sin(_)*a):(f=Math.atan(O/(n-g)),d=r-Math.sin(f)*a/i,n-Math.cos(f)*a),f===A)return[[d,p]];var S=Ee.h(Math.abs(f-A))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=f+k,N=r-Math.sin(I)*x/i,D=n-Math.cos(I)*x,w=A-k;return[[R,b],[r-Math.sin(w)*x/i,n-Math.cos(w)*x],[N,D],[d,p]]}function si(t,e,r,n,i,a,o,s){var h,l,c,u,_,f,d,p,v=ve(t,2),y=v[0],g=v[1],m=ve(e,2),E=m[0],T=m[1],O=(r-y)*i,M=(r-E)*i,A=Math.atan(O/(g-n)),R=r-Math.sin(A)*a/i,b=n+Math.cos(A)*a;if(p=o?(h=s*i,l=Math.atan(h/a),u=(c=Math.sqrt(Math.tan(l)/2))/(1+c),_=2*Math.atan(u),f=.5*Math.PI-_,d=r-Math.cos(_)*a/i,n+Math.sin(_)*a):(f=Math.atan(M/(T-n)),d=r-Math.sin(f)*a/i,n+Math.cos(f)*a),A===f)return[[R,b]];var S=Ee.h(Math.abs(A-f))*a,x=Math.sqrt(Math.pow(a,2)+Math.pow(S,2)),k=Math.atan(S/a),I=A-k,N=r-Math.sin(I)*x/i,D=n+Math.cos(I)*x,w=f+k;return[[d,p],[r-Math.sin(w)*x/i,n+Math.cos(w)*x],[N,D],[R,b]]}function hi(t,e,r,n){0===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===n?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===n?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===n?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===n||6===n?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===n&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var li={calPoints:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var v=0===_||2===_?$n(e,i,a,o,s,t):$n(e,h,l,c,u,t),y=v.n,g=v.ps,m=v.pd;if(1<y){for(var E=0;E<y;E++){var T=E===y-1,O=void 0,M=void 0,A=void 0,R=(O=0===_||2===_?E?i+g*E+m*E:i:E?h+g*E+m*E:h)+g;0===_?R<=a?T?p.push([[i,h],[s,h],[o,l],[a,l]]):(M=h+(O-i)*Math.tan(r),A=h+(R-i)*Math.tan(r),p.push([[O,h],[R,h],[R,A],[O,M]])):o<=O?(M=h+(s-O)*Math.tan(n),A=h+(s-R)*Math.tan(n),T?p.push([[O,h],[s,h],[s,h],[O,M]]):p.push([[O,h],[R,h],[R,A],[O,M]])):O<a?(M=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,M]]),T?(p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[s,h],[s,h],[a,l]])):o<R?(A=h+(s-R)*Math.tan(n),p.push([[a,h],[o,h],[o,l],[a,l]]),p.push([[o,h],[R,h],[R,A],[o,l]])):p.push([[a,h],[R,h],[R,l],[a,l]])):o<R?(M=h+(s-R)*Math.tan(n),O<a?(A=h+(O-i)*Math.tan(r),p.push([[O,h],[a,h],[a,l],[O,A]]),p.push([[a,h],[o,h],[o,l],[a,l]])):p.push([[O,h],[o,h],[o,l],[O,l]]),T?p.push([[o,h],[s,h],[s,h],[o,l]]):p.push([[o,h],[R,h],[R,M],[o,l]])):T?p.push([[O,h],[s,h],[o,l],[O,l]]):p.push([[O,h],[R,h],[R,l],[O,l]]):1===_?R<=l?T?p.push([[o,l],[s,h],[s,u],[o,c]]):(M=s-(O-h)*Math.tan(r),A=s-(R-h)*Math.tan(r),p.push([[M,O],[s,O],[s,R],[A,R]])):c<=O?(M=o+(O-c)*Math.tan(n),A=o+(R-c)*Math.tan(n),T?p.push([[M,O],[s,O],[s,u],[s,u]]):p.push([[M,O],[s,O],[s,R],[A,R]])):O<l?(M=o+(l-O)*Math.tan(r),p.push([[M,O],[s,O],[s,l],[o,l]]),T?(p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,u],[s,u]])):c<R?(A=o+(R-c)*Math.tan(n),p.push([[o,l],[s,l],[s,c],[o,c]]),p.push([[o,c],[s,c],[s,R],[A,R]])):p.push([[o,l],[s,l],[s,R],[o,R]])):c<R?(M=o+(R-c)*Math.tan(n),O<l?(A=o+(l-O)*Math.tan(r),p.push([[A,O],[s,O],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,s],[s,s]]):p.push([[o,c],[s,c],[s,R],[M,R]])):(p.push([[o,O],[s,O],[s,c],[o,c]]),T?p.push([[o,c],[s,c],[s,u],[s,u]]):p.push([[o,c],[s,c],[s,R],[M,R]]))):T?p.push([[o,O],[s,O],[s,u],[o,c]]):p.push([[o,O],[s,O],[s,R],[o,R]]):2===_?R<=a?T?p.push([[i,u],[a,c],[o,c],[s,u]]):(M=u-(O-i)*Math.tan(r),A=u-(R-i)*Math.tan(r),p.push([[O,M],[R,A],[R,u],[O,u]])):o<=O?(M=u-(s-O)*Math.tan(n),A=u-(s-R)*Math.tan(n),T?p.push([[O,M],[s,u],[s,u],[O,u]]):p.push([[O,M],[R,A],[R,u],[O,u]])):O<a?(M=u-(O-i)*Math.tan(r),p.push([[O,M],[a,c],[a,u],[O,u]]),T?(p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[s,u],[s,u],[o,u]])):o<R?(A=u-(R-o)*Math.tan(n),p.push([[a,c],[o,c],[o,u],[a,u]]),p.push([[o,c],[R,A],[R,u],[o,u]])):p.push([[a,c],[R,c],[R,u],[a,u]])):o<R?(M=u-(s-R)*Math.tan(n),O<a?(A=u-(O-o)*Math.tan(r),p.push([[O,A],[a,c],[a,u],[O,u]]),p.push([[a,c],[o,c],[o,u],[a,u]])):p.push([[O,c],[o,c],[o,u],[O,u]]),T?p.push([[o,c],[s,u],[s,u],[o,u]]):p.push([[o,c],[R,M],[R,u],[o,u]])):T?p.push([[O,c],[o,c],[s,u],[O,u]]):p.push([[O,c],[R,c],[R,u],[O,u]]):3===_&&(R<=l?T?p.push([[i,h],[a,l],[a,c],[i,u]]):(M=i+(O-h)*Math.tan(r),A=i+(R-h)*Math.tan(r),p.push([[i,O],[M,O],[A,R],[i,R]])):c<=O?(M=i+(u-O)*Math.tan(n),A=i+(u-R)*Math.tan(n),T?p.push([[i,O],[M,O],[i,u],[i,u]]):p.push([[i,O],[M,O],[A,R],[i,R]])):O<l?(M=i+(O-h)*Math.tan(r),p.push([[i,O],[M,O],[a,l],[i,l]]),T?(p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[i,u],[i,u]])):c<R?(A=i+(u-R)*Math.tan(n),p.push([[i,l],[a,l],[a,c],[i,c]]),p.push([[i,c],[a,c],[A,R],[i,R]])):p.push([[i,l],[a,l],[a,R],[i,R]])):c<R?(M=i+(u-R)*Math.tan(n),O<l?(A=i+(O-h)*Math.tan(r),p.push([[i,O],[A,O],[a,l],[i,h]]),p.push([[i,l],[a,l],[a,c],[i,c]])):p.push([[i,O],[a,O],[a,c],[i,c]]),T?p.push([[i,c],[a,c],[i,u],[i,u]]):p.push([[i,c],[a,c],[M,R],[i,R]])):T?p.push([[i,O],[a,O],[a,c],[i,u]]):p.push([[i,O],[a,O],[a,R],[i,R]]))}if(0===_)return qn(t,r,n,i,a,o,s,h,l,0,0,p,f,d);if(1===_)return Qn(t,r,n,0,0,o,s,h,l,c,u,p,f,d);if(2===_)return ri(t,r,n,i,a,o,s,0,l,c,u,p,f,d);if(3===_)return ai(t,r,n,i,a,0,0,h,l,c,u,p,f,d)}}return 0===_?(i<a&&p.push([[i,h],[a,h],[a,l],[i,h]]),p.push([[a,h],[o,h],[o,l],[a,l]]),o<s&&p.push([[o,h],[s,h],[s,h],[o,l]]),qn(t,r,n,i,a,o,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[o,l]]),p.push([[o,l],[s,l],[s,c],[o,c]]),c<u&&p.push([[o,c],[s,c],[s,u],[s,u]]),Qn(t,r,n,0,0,o,s,h,l,c,u,p,f,d)):2===_?(i<a&&p.push([[i,u],[a,c],[a,u],[i,u]]),p.push([[a,c],[o,c],[o,u],[a,u]]),o<s&&p.push([[o,c],[s,u],[s,u],[o,u]]),ri(t,r,n,i,a,o,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[i,h],[i,h],[a,l],[i,l]]),p.push([[i,l],[a,l],[a,c],[i,c]]),c<u&&p.push([[i,c],[a,c],[i,u],[i,u]]),ai(t,r,n,i,a,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,n,i,a,o,s,h,l,c,u){var _,f=ve(h,2),d=f[0],p=f[1],v=ve(l,2),y=v[0],g=v[1],m=ve(c,2),E=m[0],T=m[1],O=ve(u,2),M=O[0],A=O[1];if(p-=i,y-=a,g-=i,E-=a,T-=o,M-=s,A-=o,(0<(d-=s)&&0<p||0<y&&0<g||0<E&&0<T||0<M&&0<A)&&(_=!0),_){var R=[];return 0<d&&0<p?(R.push([t,e+p]),R.push([t,e+p*(1-zn),t+d*(1-zn),e,t+d,e])):R.push([t,e]),0<y&&0<g?(R.push([t+r-y,e]),R.push([t+r-y*(1-zn),e,t+r,e+g*(1-zn),t+r,e+g])):R.push([t+r,e]),0<E&&0<T?(R.push([t+r,e+n-T]),R.push([t+r,e+n-T*(1-zn),t+r-E*(1-zn),e+n,t+r-E,e+n])):R.push([t+r,e+n]),0<M&&0<A?(R.push([t+M,e+n]),R.push([t+M*(1-zn),e+n,t,e+n-A*(1-zn),t,e+n-A])):R.push([t,e+n]),R}}},ci=p.STYLE_KEY,ui=ci.SCALE_X,_i=ci.SCALE_Y,fi=b.PERCENT,di=b.NUMBER;var pi={matrixResize:function(t,e,r,n,i,a,o,s){if(t!==r||e!==n){var h=[[ui,[r/t,di]],[_i,[n/e,di]]],l=Vn.calOrigin([[0,fi],[0,fi]],o,s);return l[0]+=i,l[1]+=a,Vn.calMatrixWithOrigin(h,l,o,s)}}},vi="\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nvarying vec2 vTextureCoord;\nuniform mat3 projectionMatrix;\n\nvoid main(void)\n{\n  gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n  vTextureCoord = aTextureCoord;\n}",yi="\n#ifdef GL_ES\nprecision mediump float;\n#endif\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 color = vec4(0.0);\n\n  // Sample top left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample top right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom right pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Sample bottom left pixel\n  color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n  // Average\n  color *= 0.25;\n\n  gl_FragColor = color;\n}";function gi(t,e,r){var n=function(t,e,r){var n=mi(t,t.VERTEX_SHADER,e),i=mi(t,t.FRAGMENT_SHADER,r);if(!n||!i)return null;var a=t.createProgram();if(!a)return null;if(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;var o=t.getProgramInfoLog(a);return Te.error("Failed to link program: "+o),t.deleteProgram(a),t.deleteShader(i),t.deleteShader(n),null}(t,e,r);if(n)return t.useProgram(n),t.program=n,1;Te.error("Failed to create program")}function mi(t,e,r){var n=t.createShader(e);if(null==n)return Te.error("unable to create shader"),null;if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))return n;var i=t.getShaderInfoLog(n);return Te.error("Failed to compile shader: "+i),t.deleteShader(n),null}function Ei(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),e}var Ti=function(){function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:4;g(this,a),this.webgl=t;var n,i=this.gl=t.ctx;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,-1),gi(i,vi,yi),this.vertexLocations=function(t){var e=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]),r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW);var n=Float32Array.BYTES_PER_ELEMENT,i=t.getAttribLocation(t.program,"aVertexPosition");t.vertexAttribPointer(i,2,t.FLOAT,!1,4*n,0),t.enableVertexAttribArray(i);var a=t.getAttribLocation(t.program,"aTextureCoord");t.vertexAttribPointer(a,2,t.FLOAT,!1,4*n,2*n);var o=t.getUniformLocation(t.program,"projectionMatrix");return t.uniformMatrix3fv(o,!1,new Float32Array([1,0,0,0,1,0,0,0,1])),t.enableVertexAttribArray(a),{aPosition:i,aTexCoord:a}}(i),this.textureLocations={uSampler:(n=i).getUniformLocation(n.program,"uSampler"),uOffset:n.getUniformLocation(n.program,"uOffset"),uClamp:n.getUniformLocation(n.program,"filterClamp")},this._pixelSize={x:0,y:0},this.pixelSize=1,this._kernels=null,this._blur=e,this.quality=r,this.textures=[],this.framebuffers=[]}return l(a,[{key:"initBuffers",value:function(t,e,r){for(var n=0;n<2;n++){var i=Ei(t);this.textures.push(i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null);var a=t.createFramebuffer();this.framebuffers.push(a),t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)}}},{key:"draw",value:function(t,e,r){var n=this.textureLocations,i=n.uOffset,a=n.uClamp,o=this.gl;o.uniform2f(i,e[0],e[1]),o.viewport(0,0,t.width,t.height),o.uniform4f(a,0,0,t.width,t.height),r&&o.bindFramebuffer(o.FRAMEBUFFER,null),o.drawArrays(o.TRIANGLE_STRIP,0,4)}},{key:"apply",value:function(t,e,r){var n=this.gl;this.initBuffers(n,e,r);var i=this.textureLocations.uSampler;n.uniform1i(i,0);var a=Ei(n);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.canvas);var o,s=this._pixelSize.x/e,h=this._pixelSize.y/r,l=this._quality-1;n.bindTexture(n.TEXTURE_2D,a);for(var c=0;c<l;c++){o=this._kernels[c]+.5,n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffers[c%2]);var u=new Float32Array([o*s,o*h]);this.draw(t.canvas,u,!1),n.bindTexture(n.TEXTURE_2D,this.textures[c%2])}o=this._kernels[l]+.5;var _=new Float32Array([o*s,o*h]);return this.draw(t.canvas,_,!0),this.webgl.draw(),t.ctx.clearRect(0,0,e,r),t.ctx.drawImage(n.canvas,0,0),t.draw(),this}},{key:"_generateKernels",value:function(){var t=this._blur,e=this._quality,r=[t];if(0<t)for(var n=t,i=t/e,a=1;a<e;a++)n-=i,r.push(n);this._kernels=r}},{key:"clear",value:function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}},{key:"kernels",get:function(){return this._kernels},set:function(t){Array.isArray(t)&&0<t.length?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)}},{key:"pixelSize",set:function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):(this._pixelSize.x=1,this._pixelSize.y=1)},get:function(){return this._pixelSize}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()}},{key:"blur",get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()}}]),a}();var Oi={gaussBlur:function(t,e,r,n,i){return new Ti(e,r).apply(t,n,i)}},Mi=me.isFunction,Ai=function(){function o(){g(this,o),this.__eHash={}}return l(o,[{key:"on",value:function(t,e){if(e){var r=this;if(Array.isArray(t))for(var n=0,i=t.length;n<i;n++)r.on(t[n],e);else if(e){r.__eHash.hasOwnProperty(t)||(r.__eHash[t]=[]);for(var a=0,o=r.__eHash[t],s=o.length;a<s;a++)if(o[a]===e)return r;r.__eHash[t].push(e)}return r}}},{key:"once",value:function(n,i){if(Mi(i)){var a=this;if(o.__karasEventCb=i,Array.isArray(n))for(var t=0,e=n.length;t<e;t++)a.once(n[t],i);else i&&a.on(n,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];i.apply(a,e),a.off(n,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var i=0,a=this.__eHash[t],o=a.length;i<o;i++)if(a[i]===e||a[i].__karasEventCb===e){a.splice(i,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)this.emit(t[i],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var l=o[s];Mi(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o;e.__eHash={};for(var n=["on","once","off","emit"],i=n.length-1;0<=i;i--){var a=n[i];e[a]=r[a]}}}}]),o}();c(Ai,"REFRESH","refresh"),c(Ai,"PAUSE","pause"),c(Ai,"PLAY","play"),c(Ai,"FRAME","frame"),c(Ai,"FINISH","finish"),c(Ai,"CANCEL","cancel"),c(Ai,"BEGIN","begin"),c(Ai,"END","end");var Ri,bi=me.isFunction;function Si(t,e,r,n){if(n)for(var i=0;i<e;i++){var a=t[i];a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s.__before&&s.__before(r)}}var xi=new(function(){function t(){g(this,t),this.__hookTask=[],this.__task=[],this.__now=null}return l(t,[{key:"__init",value:function(){var h=this,l=h.task;Te.cancelAnimationFrame(h.id);var c=h.__now=Te.now();!function s(){Te.cancelAnimationFrame(h.id),h.id=Te.requestAnimationFrame(function(){if(!Ri&&l.length){var t=h.__now=Te.now(),e=t-c,e=Math.max(e,0);c=t;var r=l.slice(0),n=r.length;Si(r,n,e);for(var i=h.__hookTask.splice(0),a=0,o=i.length;a<o;a++)i[a]();Si(r,n,e,!0),l.length&&s()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),bi(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,n=e.length;r<n;r++){var i=e[r];if(i===t||i.__karasFramecb===t){e.splice(r,1);break}}e.length||(Te.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,n=this;e&&((r=bi(e)?{__after:function(t){e(t),n.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),n.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"pause",value:function(){Ri=!0}},{key:"resume",value:function(){Ri&&(this.__init(),Ri=!1)}},{key:"task",get:function(){return this.__task}}]),t}()),ki=4,Ii=1e-7,Ni=10,Di="function"==typeof Float32Array;function wi(t,e){return 1-3*e+3*t}function Ci(t,e){return 3*e-6*t}function Pi(t,e,r){return((wi(e,r)*t+Ci(e,r))*t+3*e)*t}function Li(t,e,r){return 3*wi(e,r)*t*t+2*Ci(e,r)*t+3*e}function Fi(t){return t}function Bi(a,e,o,r){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===r)return Fi;for(var s=new(Di?Float32Array:Array)(11),t=0;t<11;++t)s[t]=Pi(.1*t,a,o);function n(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var n=e+.1*((t-s[--r])/(s[r+1]-s[r])),i=Li(n,a,o);return.001<=i?function(t,e,r,n){for(var i=0;i<ki;++i){var a=Li(e,r,n);if(0===a)return e;e-=(Pi(e,r,n)-t)/a}return e}(t,n,a,o):0===i?n:function(t,e,r,n,i){for(var a,o,s=0;0<(a=Pi(o=e+(r-e)/2,n,i)-t)?r=o:e=o,Math.abs(a)>Ii&&++s<Ni;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:Pi(n(t),e,r)}}var Hi,Gi={linear:Bi(1,1,0,0),easeIn:Bi(.42,0,1,1),easeOut:Bi(0,0,.58,1),ease:Bi(.25,.1,.25,1),easeInOut:Bi(.42,0,.58,1),cubicBezier:Bi},Yi=p.STYLE_KEY,Wi=Yi.FILTER,Ui=Yi.TRANSFORM_ORIGIN,Xi=Yi.BACKGROUND_POSITION_X,Ki=Yi.BACKGROUND_POSITION_Y,Vi=Yi.BOX_SHADOW,zi=Yi.TRANSLATE_X,ji=Yi.BACKGROUND_SIZE,$i=Yi.FONTSIZE,qi=Yi.FLEX_BASIS,Zi=Yi.FLEX_DIRECTION,Ji=Yi.WIDTH,Qi=Yi.HEIGHT,ta=Yi.MARGIN_RIGHT,ea=Yi.MARGIN_TOP,ra=Yi.MARGIN_LEFT,na=Yi.MARGIN_BOTTOM,ia=Yi.PADDING_LEFT,aa=Yi.PADDING_BOTTOM,oa=Yi.PADDING_RIGHT,sa=Yi.PADDING_TOP,ha=Yi.TOP,la=Yi.RIGHT,ca=Yi.BOTTOM,ua=Yi.LEFT,_a=Yi.LINE_HEIGHT,fa=Yi.OPACITY,da=Yi.Z_INDEX,pa=Yi.TRANSFORM,va=Yi.COLOR,ya=Yi.FONT_WEIGHT,ga=Yi.FONT_STYLE,ma=Yi.FONT_FAMILY,Ea=Yi.TEXT_ALIGN,Ta=Yi.MATRIX,Oa=p.UPDATE_KEY,Ma=Oa.UPDATE_NODE,Aa=Oa.UPDATE_STYLE,Ra=Oa.UPDATE_KEYS,ba=Oa.UPDATE_CONFIG,Sa=p.KEY_FRAME_KEY,xa=Sa.FRAME_STYLE,ka=Sa.FRAME_TIME,Ia=Sa.FRAME_EASING,Na=Sa.FRAME_TRANSITION,Da=b.AUTO,wa=b.PX,Ca=b.PERCENT,Pa=b.INHERIT,La=b.RGBA,Fa=b.STRING,Ba=b.NUMBER,Ha=me.isNil,Ga=me.isFunction,Ya=me.isNumber,Wa=me.isObject,Ua=me.clone,Xa=me.equalArr,Ka=Gi.linear,Va=Qr.cloneStyle,za=pe.isGeom,ja=pe.GEOM,$a=ae.COLOR_HASH,qa=ae.LENGTH_HASH,Za=ae.RADIUS_HASH,Ja=ae.GRADIENT_HASH,Qa=ae.EXPAND_HASH,to=ae.GRADIENT_TYPE,eo=(c(Hi={},Xi,!0),c(Hi,Ki,!0),Hi);function ro(t,e,r,n,i){var a={};a[Ma]=i,a[Aa]=t,a[Ra]=e,a[ba]=r[43],n.__addUpdate(i,r[43],n,r[44],a),r[16]=t,r[0]=!0,n.__frameHook()}function no(r,n,t,i,a){return t.forEach(function(t){var e=function(t,e,r,n,i){var a=[r],o=t[r],s=e[r];if(r===pa){if(!o&&!s)return;var h=o?o[0][1]:[1,0,0,1,0,0],l=s?s[0][1]:[1,0,0,1,0,0];if(Xa(h,l))return;return a[1]=[l[0]-h[0],l[1]-h[1],l[2]-h[2],l[3]-h[3],l[4]-h[4],l[5]-h[5]],a}if(r===Wi)o&&o.length?s&&s.length?a[1]=s[0][1]-o[0][1]:a[1]=-o[0][1]:a[1]=s[0][1];else if(r===Ui){a[1]=[];for(var c=0;c<2;c++){var u,_,f=o[c],d=s[c];f[1]===d[1]?a[1].push(d[0]-f[0]):f[1]===wa&&d[1]===Ca?(u=.01*d[0]*n[c?"outerHeight":"outerWidth"],a[1].push(u-f[0])):f[1]===Ca&&d[1]===wa&&(_=100*d[0]/n[c?"outerHeight":"outerWidth"],a[1].push(_-f[0]))}if(Xa(a[1],[0,0]))return}else if(r===Xi||r===Ki){if(o[1]===s[1]&&-1<[wa,Ca].indexOf(o[1])){var p=s[0]-o[0];if(0==p)return;a[1]=p}else if(o[1]===wa&&s[1]===Ca){var v=.01*s[0]*n[r===Xi?"clientWidth":"clientHeight"];if(0==(v-=o[0]))return;a[1]=v}else if(o[1]===Ca&&s[1]===wa){var y=100*s[0]/n[r===Xi?"clientWidth":"clientHeight"];if(0==(y-=o[0]))return;a[1]=y}}else if(r===Vi){a[1]=[];for(var g=0,m=Math.min(o.length,s.length);g<m;g++){for(var E=o[g],T=s[g],O=[],M=0;M<4;M++)O.push(T[M]-E[M]);for(var A=[],R=0;R<4;R++)A.push(T[4][R]-E[4][R]);O.push(A),a[1].push(O)}}else if(Qa.hasOwnProperty(r)){if(o[1]===s[1]){var b=s[0]-o[0];if(0==b)return;a[1]=b}else if(o[1]===wa&&s[1]===Ca){var S=.01*s[0]*n[r===zi?"outerWidth":"outerHeight"];if(0==(S-=o[0]))return;a[1]=S}else if(o[1]===Ca&&s[1]===wa){var x=100*s[0]/n[r===zi?"outerWidth":"outerHeight"];if(0==(x-=o[0]))return;a[1]=x}}else if(r===ji){a[1]=[];for(var k=0;k<2;k++){var I=o[k],N=s[k];if(I[1]===N[1]&&-1<[wa,Ca].indexOf(I[1]))a[1].push(N[0]-I[0]);else if(I[1]===wa&&N[1]===Ca){var D=.01*N[0]*n[k?"clientWidth":"clientHeight"];a[1].push(D-I[0])}else{if(I[1]!==Ca||N[1]!==wa)return;var w=100*N[0]/n[k?"clientWidth":"clientHeight"];a[1].push(w-I[0])}}if(Xa(a[1],[0,0]))return}else if(Ja.hasOwnProperty(r)){if(o.k!==s.k)return;if("linear"===o.k||"radial"===o.k){var C=o.v,P=s.v;if(Xa(C,P))return;a[1]=[];for(var L,F=n.clientWidth,B=0,H=Math.min(C.length,P.length);B<H;B++){var G=C[B],Y=P[B],W=[];W.push([Y[0][0]-G[0][0],Y[0][1]-G[0][1],Y[0][2]-G[0][2],Y[0][3]-G[0][3]]),L=Xa(W,[0,0,0,0]),G[1]&&Y[1]?(G[1][1]===Y[1][1]?W.push(Y[1][0]-G[1][0]):G[1][1]===wa&&Y[1][1]===Ca?W.push(Y[1][0]*F*.01-G[1][0]):G[1][1]===Ca&&Y[1][1]===wa&&W.push(100*Y[1][0]/F-G[1][0]),L=L&&0===W[4]):(G[1]||Y[1])&&(L=!1),a[1].push(W)}if("linear"===o.k){var U=s.d-o.d;if(L&&0==U)return;a[2]=U}else{a[3]=[];for(var X=0;X<2;X++){var K,V,z=o.p[X],j=s.p[X];z[1]===j[1]?a[3].push(j[0]-z[0]):z[1]===wa&&j[1]===Ca?(K=.01*j[0]*n[X?"clientWidth":"clientHeight"],a[3].push(K-z[0])):z[1]===Ca&&j[1]===wa&&(V=100*j[0]/n[X?"clientWidth":"clientHeight"],a[3].push(V-z[0]))}if(L&&Xa(a[3],[0,0]))return}}else{if(Xa(s,o))return;a[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}}else if($a.hasOwnProperty(r)){if(s=s[0],o=o[0],Xa(s,o)||0===s[3]&&0===o[3])return;a[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}else if(Za.hasOwnProperty(r)){if(s[0][0]===o[0][0]&&s[0][1]===o[0][1]&&s[1][0]===o[1][0]&&s[1][1]===o[1][1])return;a[1]=[];for(var $=0;$<2;$++)s[$][1]===o[$][1]?a[1].push(s[$][0]-o[$][0]):o[$][1]===wa&&s[$][1]===Ca?a[1].push(.01*s[$][0]*n[$?"outerHeight":"outerWidth"]-o[$][0]):o[$][1]===Ca&&s[$][1]===wa?a[1].push(100*s[$][0]/n[$?"outerHeight":"outerWidth"]-o[$][0]):a[1].push(0)}else if(qa.hasOwnProperty(r)){if(o[1]===Da||s[1]===Da)return;var q,Z,J=n.computedStyle,Q=(n.domParent||n).computedStyle,tt=0;if(o[1]===s[1]?tt=s[0]-o[0]:o[1]===wa&&s[1]===Ca?(r===$i?q=s[0]*Q[r]*.01:r===qi&&"row"===J[Zi]||r===Ji||-1<[ua,la,na,ra,ea,ta,sa,oa,aa,ia].indexOf(r)?q=s[0]*Q[Ji]*.01:(r===qi||r===Qi||-1<[ha,ca].indexOf(r))&&(q=s[0]*Q[Qi]*.01),tt=q-o[0]):o[1]===Ca&&s[1]===wa?(r===$i?Z=100*s[0]/Q[r]:r===qi&&"row"===J[Zi]||r===Ji||-1<[ua,la,na,ra,ea,ta,sa,oa,aa,ia].indexOf(r)?Z=100*s[0]/Q[Ji]:(r===qi||r===Qi||-1<[ha,ca].indexOf(r))&&(Z=100*s[0]/Q[Qi]),tt=Z-o[0]):r===_a&&(o[1]===wa&&s[1]===Ba?tt=s[0]*J[$i]-o[0]:o[1]===Ba&&s[1]===wa&&(tt=s[0]/J[$i]-o[0])),0===tt||isNaN(tt))return;a[1]=tt}else if(ja.hasOwnProperty(r)){if(Ha(o))return;if(ja[r][i]&&Ga(ja[r][i].calDiff)){var et=ja[r][i].calDiff;if(n.isMulti){for(var rt=[],nt=0,it=Math.min(o.length,s.length);nt<it;nt++)rt.push(et(o[nt],s[nt]));return rt}a[1]=et(o,s)}else if(n.isMulti)if("points"===r||"controls"===r){if(Ha(s)||Ha(o)||Xa(o,s))return;a[1]=[];for(var at=0,ot=Math.min(o.length,s.length);at<ot;at++){var st=o[at],ht=s[at];if(Ha(st)||Ha(ht))a[1].push(null);else{for(var lt=[],ct=0,ut=Math.min(st.length,ht.length);ct<ut;ct++){var _t=st[ct],ft=ht[ct];if(Ha(_t)||Ha(ft))lt.push(null);else{for(var dt=[],pt=0,vt=Math.max(_t.length,ft.length);pt<vt;pt++){var yt=_t[pt],gt=ft[pt];Ha(yt)||Ha(gt)?dt.push(0):dt.push(gt-yt)}lt.push(dt)}}a[1].push(lt)}}}else if("controlA"===r||"controlB"===r){if(Ha(s)||Ha(o)||Xa(o,s))return;a[1]=[];for(var mt=0,Et=Math.min(o.length,s.length);mt<Et;mt++){var Tt=o[mt],Ot=s[mt];Ha(Tt)||Ha(Ot)?a[1].push(null):a[1].push([Ot[0]-Tt[0],Ot[1]-Tt[1]])}}else{if(s===o||Xa(s,o)||"edge"===r||"closure"===r)return;for(var Mt=[],At=0,Rt=Math.min(o.length,s.length);At<Rt;At++){var bt=o[At],St=s[At];(Ha(bt)||Ha(St))&&Mt.push(0),Mt.push(St-bt)}a[1]=Mt}else if("points"===r||"controls"===r){if(Ha(s)||Ha(o)||Xa(o,s))return;a[1]=[];for(var xt=0,kt=Math.min(o.length,s.length);xt<kt;xt++){var It=o[xt],Nt=s[xt];if(Ha(It)||Ha(Nt))a[1].push(null);else{for(var Dt=[],wt=0,Ct=Math.max(It.length,Nt.length);wt<Ct;wt++){var Pt=It[wt],Lt=Nt[wt];Ha(Pt)||Ha(Lt)?Dt.push(0):Dt.push(Lt-Pt)}a[1].push(Dt)}}}else if("controlA"===r||"controlB"===r){if(Ha(s)||Ha(o)||Xa(o,s))return;a[1]=[s[0]-o[0],s[1]-o[1]]}else{if(s===o||"edge"===r||"closure"===r)return;a[1]=s-o}}else{if(r!==fa&&r!==da)return;if(s===o)return;a[1]=s-o}return a}(r[xa],n[xa],t,i,a);e&&r[Na].push(e)}),n}function io(t,e,P,L){var r,n,i,a,o,F=Va(t[xa],e),s=((r=t[Ia])&&(i=/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(r)?(n=r.match(/[\d.]+/g),Gi.cubicBezier(n[0],n[1],n[2],n[3])):(i=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(r))?(a=parseInt(i[1]),o=i[2],function(t){if(a&&0<a){var e=1/a;return("start"===o?Math.ceil(t/e):Math.floor(t/e))/a}return t}):Gi[r]),i);s&&s!==Ka&&(P=s(P));for(var B=t[Na],H=L.tagName,h=0,l=B.length;h<l;h++)!function(t){var e=ve(B[t],4),r=e[0],n=e[1],i=e[2],a=e[3],o=F[r];if(r===pa){o=o||(F[r]=[[Ta,[1,0,0,1,0,0]]]);for(var s=0;s<6;s++)o[0][1][s]+=n[s]*P}else if(eo.hasOwnProperty(r))n&&(o[0]+=n*P);else if(r===Wi)(o=o||(F[r]=[["blur",0]]))[0][1]+=n*P;else if(Za.hasOwnProperty(r))for(var h=0;h<2;h++)o[h][0]+=n[h]*P;else if(r===Ui||r===ji)0!==n[0]&&(o[0][0]+=n[0]*P),0!==n[1]&&(o[1][0]+=n[1]*P);else if(r===Vi)for(var l=0,c=Math.min(o.length,n.length);l<c;l++){for(var u=0;u<4;u++)o[l][u]+=n[l][u]*P;for(var _=0;_<4;_++)o[l][4][_]+=n[l][4][_]*P}else if(Ja.hasOwnProperty(r))if(to.hasOwnProperty(o.k)){for(var f=0,d=Math.min(o.v.length,n.length);f<d;f++){var p=o.v[f],v=n[f];p[0][0]+=v[0][0]*P,p[0][1]+=v[0][1]*P,p[0][2]+=v[0][2]*P,p[0][3]+=v[0][3]*P,p[1]&&v[1]&&(p[1][0]+=v[1]*P)}"linear"===o.k&&void 0!==o.d&&void 0!==i&&(o.d+=i*P),"radial"===o.k&&void 0!==o.p&&void 0!==a&&(o.p[0][0]+=a[0]*P,o.p[1][0]+=a[1]*P)}else o[0]+=n[0]*P,o[1]+=n[1]*P,o[2]+=n[2]*P,o[3]+=n[3]*P;else if($a.hasOwnProperty(r))(o=o[0])[0]+=n[0]*P,o[1]+=n[1]*P,o[2]+=n[2]*P,o[3]+=n[3]*P;else if(ja.hasOwnProperty(r)){var y=F[r];if(ja[r][H]&&Ga(ja[r][H].calIncrease)){var g=ja[r][H].calIncrease;L.isMulti?F[r]=y.map(function(t,e){return g(t,n[e],P)}):F[r]=g(y,n,P)}else if(L.isMulti)if("points"===r||"controls"===r)for(var m=0,E=Math.min(y.length,n.length);m<E;m++){var T=y[m],O=n[m];if(!Ha(T)&&!Ha(O))for(var M=0,A=Math.min(T.length,O.length);M<A;M++){var R=T[M],b=O[M];if(!Ha(R)&&!Ha(b))for(var S=0,x=Math.min(R.length,b.length);S<x;S++)Ha(R[S])||Ha(b[S])||(R[S]+=b[S]*P)}}else"controlA"===r||"controlB"===r?n.forEach(function(t,e){var r=y[e];if(!Ha(t)&&!Ha(r))for(var n=0,i=Math.min(r.length,t.length);n<i;n++){var a=r[n],o=t[n];Ha(a)||Ha(o)||(r[n]+=o*P)}}):n.forEach(function(t,e){Ha(t)||Ha(y[e])||(y[e]+=t*P)});else if("points"===r||"controls"===r)for(var k=0,I=Math.min(y.length,n.length);k<I;k++){var N=y[k],D=n[k];if(!Ha(N)&&!Ha(D))for(var w=0,C=Math.min(N.length,D.length);w<C;w++)Ha(N[w])||Ha(D[w])||(N[w]+=D[w]*P)}else"controlA"===r||"controlB"===r?(Ha(y[0])||Ha(n[0])||(y[0]+=n[0]*P),Ha(y[1])||Ha(n[1])||(y[1]+=n[1]*P)):Ha(y)||Ha(n)||(F[r]+=n*P)}else r!==fa&&r!==da||(F[r]+=n*P)}(h);return F}function ao(t,e){return Ga(t)&&(e=t,t={}),[t||{},e]}Object.assign(eo,qa),Object.assign(eo,Qa);var oo,so=0,ho=12,lo=13,co=30,uo=31,_o=41,fo=42,po=function(){t(y,Ai);var v=e(y);function y(t,i,e){var r,a;g(this,y),(r=v.call(this)).__id=so++,i=Ua(i||[]),i=Array.isArray(i)?i.filter(function(t){return t&&Wa(t)}):i&&Wa(i)?(a=[],Object.keys(i).forEach(function(t){var e=i[t];if(Array.isArray(e))for(var r=0,n=e.length;r<n;r++){(a[r]=a[r]||{offset:r/(n-1)})[t]=e[r]}}),a):[],Ya(e)&&(r.__options={duration:e},e=r.__options);var n=r.__options=e||{duration:0},o=t.root,s=r.__config=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,o,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,n.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,o.__config],h=r.iterations=n.iterations,l=r.duration=n.duration,c=ve(r.__init(i,h,l,n.easing,t),4),u=c[0],_=c[1],f=c[2],d=c[3];s[ho]=u,s[lo]=_,s[co]=f,s[uo]=d,2===u.length&&(s[_o]=!0,s[fo]=u[1][ka]);var p=parseInt(n.fps)||0;return p<=0&&(p=60),r.fps=p,r.spfLimit=n.spfLimit,r.delay=n.delay,r.endDelay=n.endDelay,r.playbackRate=n.playbackRate,r.fill=n.fill,r.iterations=n.iterations,r.direction=n.direction,r}return l(y,[{key:"__init",value:function(n,t,e,r,i){if(n.length<1)return[[],[],[],{}];for(var a,o=i.tagName,s=0,h=n.length;s<h;s++)(function(t,e){var r=n[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return n.splice(t,1),s=--t,h=--e;if(r.offset<=-1)return n.splice(t,1),s=--t,h=--e}Object.keys(r).forEach(function(t){xt.hasOwnProperty(t)&&xt.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||pe.isValid(o,t)||delete r[t]}),s=t,h=e})(s,h);1===n.length?(n[0]=Ua(n[0]),1===n[0].offset?n.unshift({offset:0}):((a=Ua(n[0])).offset=1,n.push(a))):n.forEach(function(t,e){n[e]=Ua(t)});var l=n[0];l.hasOwnProperty("offset")&&0<l.offset?(l={offset:0},n.unshift(l)):l.offset=0;var c=n[n.length-1];c.hasOwnProperty("offset")&&c.offset<1?(c={offset:1},n.push(c)):c.offset=1;for(var u=1,_=n.length;u<_;u++){if(!(v=n[u]).hasOwnProperty("offset")){for(var f=void 0,d=u+1;d<_&&!(f=n[d]).hasOwnProperty("offset");d++);for(var p=d-u+1,v=n[u-1],y=(f.offset-v.offset)/p,g=u;g<d;g++){n[g].offset=v.offset+y*(g+1-u)}u=d}}var m=[];n.forEach(function(t){m.push(function(t,e,r){var n=t.offset,i=t.easing;delete t.offset,delete t.easing,t=Qr.normalize(t);var a=[];return a[xa]=t,a[ka]=n*e,a[Ia]=i||r,a[Na]=[],a}(t,e,r))});var E,T,O,M,A,R,b,S,x=(T=i,O={},M=[],(E=m).forEach(function(t){var e=t[xa];Object.keys(e).forEach(function(t){void 0===e[t]||O.hasOwnProperty(t)||(O[t]=!0,ja.hasOwnProperty(t)||(t=parseInt(t)),M.push(t))})}),E.forEach(function(t){var e=t[xa];M.forEach(function(t){e.hasOwnProperty(t)&&!Ha(e[t])||(ja.hasOwnProperty(t)?e[t]=T.currentProps[t]:e[t]=T.currentStyle[t])})}),M);A=m,R=x,S=(b=i).computedStyle,A.forEach(function(t){var a=t[xa];R.forEach(function(t){var e,r,n,i=a[t];Ha(i)||(t===pa?(e=b.outerWidth,r=b.outerHeight,n=Vn.calMatrix(i,e,r),a[t]=[[Ta,n]]):i[1]===Pa&&(t===va?a[t]=[me.rgba2int(S[t]),La]:qa.hasOwnProperty(t)?a[t]=[S[t],wa]:t===ya?a[t]=[S[t],Ba]:t!==ga&&t!==ma&&t!==Ea||(a[t]=[S[t],Fa])))})});var k=i.style,I=i.props,N={};x.forEach(function(t){za(o,t)&&(N[t]=I[t]),N[t]=k[t]});for(var D=m.length,w=m[0],C=1;C<D;C++)w=no(w,m[C],x,i,o);var P=Ua(m).reverse();P.forEach(function(t){t[ka]=e-t[ka],t[Na]=[]}),w=P[0];for(var L=1;L<D;L++){w=no(w,P[L],x,i,o)}return[m,P,x,N]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[15]=0;var n=r[16],i=r[co],a=r[10];t?(r[14]=r[28]+r[17]+r[29],r[40]||(r[16]={},e=!0)):(r[21]=r[14]=0,r[22]="idle",r[16]={},e=!0),e&&i.forEach(function(t){ja.hasOwnProperty(t)?a.__currentProps[t]===n[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===n[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(Ai.FRAME,e,r),t[7]&&(t[7]=!1,this.emit(Ai.PLAY)),Ga(t[9])&&(t[9].call(this,e,r),t[9]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[20],n=t[34],i=t[35],a=t[14]=t[15];return n&&(!0===n?e=Math.min(e,1e3/i):0<n&&(e=Math.min(e,n))),1!==r&&0<r&&(e*=r),t[15]+=e,a}},{key:"play",value:function(t){var e,r,n=this.__config,i=n[23],a=n[17],o=n[22],s=n[ho];return i||a<=0||s.length<1||"running"===o||(this.__cancelTask(),n[9]=t,n[22]="running",n[7]=!0,this.__hasFin=!1,this.__hasCancel=!1,n[27]||(n[27]=!0,e=n[lo],r=n[36],n[32]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(r)?e:s,n[14]=n[15]=n[25]=0),xi.offFrame(this),xi.onFrame(this),n[24]=xi.__now),this}},{key:"__before",value:function(t){var e,r,n=this.__config,i=n[10],a=n[35],o=n[21],s=n[32],h=n[18],l=n[39],c=n[40],u=n[28],_=n[11],f=n[_o],d=n[fo],p=n[17],v=n[29],y=s.length,g=n[37](n,t);if(!n[38]&&a<60){if((t=n[25]+=t)<1e3/a)return void(n[1]=!0);n[25]=0}if(n[38]=!1,0<o)u=0;else if(g<u){return l&&ro((n[33]=s[0])[xa],n[co],n,_,i),0===g&&(n[3]=!0),void(n[2]=!0)}0===(g-=u)&&(n[3]=!0),r=f?(e=g<d?0:1,d):s[e=function t(e,r,n,i){if(e===r)return i[e][ka]>n?e-1:e;var a=e+(r-e>>1),o=i[a];return o[ka]===n?a:o[ka]>n?t(e,Math.max(a-1,e),n,i):t(Math.min(a+1,r),r,n,i)}(0,y-1,g,s)][ka];var m=e===y-1,E=0;m||(E=f?g/p:(g-r)/(s[e+1][ka]-r));var T,O,M=h-1<=o,A=s[e];n[33]=A,m?(T=g<p+v,O=Va(c||!M?A[xa]:n[uo],n[co]),M?T||(n[15]=0,h<=(o=++n[21])&&xi.offFrame(this)):(n[15]=g-p,o=++n[21],n[6]=!0)):O=io(A,n[co],E,i),ro(O,n[co],n,_,i),!m||T&&!M||(n[4]=!0,h<=o&&(n[5]=!0,this.__clean(!0)))}},{key:"__after",value:function(t){var e,r,n,i,a=this.__config;a[0]=!1,a[1]?a[1]=!1:(a[8].call(this,a,t,a[2]),a[2]=!1,a[3]&&(a[3]=!1,this.emit(Ai.BEGIN,a[21])),a[4]&&(a[4]=!1,this.emit(Ai.END,a[21]-1),e=a[36],r=a[ho],n=a[lo],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(i=a[21]%2==0,a[32]="alternate"===e?i?r:n:i?n:r)),a[6]&&(a[6]=!1,a[3]=!0),a[5]&&(a[3]=a[4]=a[2]=a[5]=a[1]=a[27]=!1,a[22]="finished",this.emit(Ai.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[23],n=e[17],i=this.pending;return r||n<=0||i||(e[22]="paused",this.__cancelTask(),t||this.emit(Ai.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[23],n=e[17],i=e[22];return r||n<=0||"paused"!==i?this:this.play(t)}},{key:"finish",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[ho];if(t||i<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,h=n[11],l=n[uo];return h&&(s=n[40]?(n[33]=o[o.length-1],o[o.length-1][xa]):l,h.addRefreshTask({__before:function(){n[0]=!0,ro(s,n[co],n,h,n[10]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,n[0]=!1,n[22]="finished",n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Ai.FINISH)),Ga(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,n=r.__config,t=n[23],i=n[17],a=n[22],o=n[ho];if(t||i<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=n[11],h=n[uo];return s&&s.addRefreshTask({__before:function(){n[0]=!0,ro(h,n[co],n,s,n[10]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,n[0]=!1,n[22]="idle",n[8].call(r,n,t),n[3]=n[4]=n[2]=n[5]=n[1]=n[27]=!1,r.emit(Ai.CANCEL)),Ga(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var n=this.__config,i=n[23],a=n[17],o=n[ho],s=n[28],h=n[29];if(i||a<=0||o.length<1)return this;var l=ve(ao(e,r),2);return e=l[0],r=l[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+h<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var n=this,i=this.__config,a=i[23],o=i[17],s=i[ho],h=i[28],l=i[29];if(a||o<=0||s.length<1)return this;var c=ve(ao(e,r),2);return e=c[0],r=c[1],o+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){i[22]="paused",n.__cancelTask(),Ga(r)&&r.call(n,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[16],n=t[10];t[co].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],ja.hasOwnProperty(t)?n.currentProps[t]=e:n.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var n=this.__config,i=n[17];if(n[22]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=n[28]);i<t&&n[21]<n[18]-1;)n[21]++,t-=i;return n[15]=t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[10]=t,this.__config[43]=t.__config}},{key:"__cancelTask",value:function(){xi.offFrame(this),this.__config[9]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[23]||(e.removeControl(),t?(e.__clean(),r[10]=null):xi.nextFrame({__before:function(){e.__clean(),r[10]=null}}),r[24]=0,r[23]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[22]&&"finished"!==t[22]&&Te.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[10]}},{key:"root",get:function(){return this.__config[11]}},{key:"keys",get:function(){return this.__config[co]}},{key:"style",get:function(){return this.__config[16]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[17]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[17]!==t&&(e[17]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[28]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[28]!==t&&(e[28]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[29]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[29]!==t&&(e[29]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[35]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[35]!==t&&(t<=0&&(t=60),e[35]=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[18]},set:function(t){t===1/0||me.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[18]!==t&&(e[18]=t),t}},{key:"fill",get:function(){return this.__config[19]},set:function(t){t=t||"none";var e=this.__config;return e[19]!==t&&(e[19]=t,this.__checkModify()),e[39]={backwards:!0,both:!0}.hasOwnProperty(t),e[40]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[36]},set:function(t){t=t||"normal";var e=this.__config;return e[36]!==t&&(e[36]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[ho]}},{key:"framesR",get:function(){return this.__config[lo]}},{key:"playbackRate",get:function(){return this.__config[20]},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1);var e=this.__config;return e[20]!==t&&(e[20]=t),t}},{key:"easing",get:function(){return this.__config[26]}},{key:"startTime",get:function(){return this.__config[24]}},{key:"currentTime",get:function(){return this.__config[14]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[14]!==t&&(e[14]=t,e[15]=t),t}},{key:"pending",get:function(){return"running"!==this.__config[22]}},{key:"finished",get:function(){return"finished"===this.__config[22]}},{key:"playState",get:function(){return this.__config[22]}},{key:"playCount",get:function(){return this.__config[21]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[21]!==t&&(e[21]=t),t}},{key:"isDestroyed",get:function(){return this.__config[23]}},{key:"animating",get:function(){var t=this.__config,e=t[22];return"idle"!==e&&("finished"!==e||t[40]||t[39])}},{key:"spfLimit",get:function(){return this.__config[34]},set:function(t){t=me.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[34]!==t&&(e[34]=t),t}},{key:"assigning",get:function(){return this.__config[0]}}]),y}(),vo=p.STYLE_KEY,yo=p.STYLE_KEY,go=yo.TRANSLATE_X,mo=yo.TRANSLATE_Y,Eo=yo.OPACITY,To=yo.FILTER,Oo={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSFORM:4,TRANSFORM_ALL:7,OPACITY:8,FILTER:16,MIX_BLEND_MODE:32,REPAINT:64,REFLOW:128},Mo=(c(oo={},vo.SCALE_X,!0),c(oo,vo.SCALE_Y,!0),c(oo,vo.ROTATE_Z,!0),c(oo,vo.TRANSFORM,!0),c(oo,vo.TRANSFORM_ORIGIN,!0),oo),Ao=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return pe.isIgnore(t)?Oo.NONE:t===go?Oo.TRANSLATE_X:t===mo?Oo.TRANSLATE_Y:Mo.hasOwnProperty(t)?Oo.TRANSFORM:t===Eo?Oo.OPACITY:t===To?Oo.FILTER:pe.isRepaint(t)?Oo.REPAINT:Oo.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<Oo.REFLOW}},Oo);Ao.TRANSFORMS=Mo;var Ro=[8,16,32,64,128,256,512,1024,2048,4096],bo=[8,8,8,8,8,4,2,1,1,1],So=Ro[Ro.length-1],xo={},ko=function(){function u(t,e){g(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,t*=e;var r=this.__canvas=Te.getCacheCanvas(t,t,null,e);r&&(this.__offScreen=r),this.__grid=[];for(var n=0;n<this.__total;n++)this.__grid.push(1)}return l(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var n=0;n<t;n++){var i=r*t+n;if(e[i])return e[i]=0,this.__free--,i}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]=1,this.__free++}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"size",get:function(){return this.__size}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offScreen",get:function(){return this.__offScreen}},{key:"canvas",get:function(){return this.offScreen.canvas}},{key:"ctx",get:function(){return this.offScreen.ctx}}],[{key:"getInstance",value:function(t){if(!(So<t)){for(var e=Ro[0],r=bo[0],n=0,i=Ro.length;n<i&&(e=Ro[n],r=bo[n],!(Ro[n]>=t));n++);for(var a,o=xo[e]=xo[e]||[],s=0,h=o.length;s<h;s++){var l=o[s];if(l.free){a=l;break}}if(!a){if(!(a=new u(e,r)).offScreen)return void Te.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(Ro=t.SIZE,bo=t.NUMBER,So=Ro[Ro.length-1])},get:function(){return{SIZE:Ro,NUMBER:bo}}},{key:"MAX",get:function(){return So}}]),u}(),Io=p.STYLE_KEY,No=Io.TRANSFORM_ORIGIN,Do=Io.TRANSFORM,wo=p.NODE_KEY,Co=wo.NODE_OPACITY,Po=wo.NODE_CACHE,Lo=wo.NODE_CACHE_FILTER,Fo=wo.NODE_CACHE_OVERFLOW;function Bo(t){var e=t.size,r=t.sx1,n=t.sy1,i=t.width,a=t.height,o=t.bbox,s=Te.getCacheCanvas(i,a);return s.coords=[1,1],s.bbox=o,s.size=e,s.sx1=r,s.sy1=n,s.dbx=t.dbx,s.dby=t.dby,s.width=i,s.height=a,s}var Ho=function(){function p(t,e,r,n,i){g(this,p),this.__init(t,e,r,n,i)}return l(p,[{key:"__init",value:function(t,e,r,n,i){this.__width=t,this.__height=e,this.__bbox=r,this.__page=n,this.__pos=i;var a,o=ve(n.getCoords(i),2),s=o[0],h=o[1];this.__coords=[s+1,h+1],n.canvas&&(this.__enabled=!0,(a=n.ctx).setTransform([1,0,0,1,0,0]),a.globalAlpha=1,"undefined"!=typeof karas&&karas.debug&&(n.canvas.setAttribute("size",n.size),a.fillStyle="rgba(0, 0, 0, 0.1)",a.beginPath(),a.rect(s+1,h+1,n.size-2,n.size-2),a.closePath(),a.fill()))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=ve(this.coords,2),n=r[0],i=r[1],a=this.bbox;this.dx=n-a[0],this.dy=i-a[1],this.dbx=t-a[0],this.dby=e-a[1]}},{key:"clear",value:function(){var t,e,r,n,i=this.ctx;this.enabled&&i&&this.available&&(i.setTransform([1,0,0,1,0,0]),e=(t=ve(this.coords,2))[0],r=t[1],n=this.page.size,i.clearRect(e-1,r-1,n,n)),this.__available=!1}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t){var e,r,n,i,a;me.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]),e+=2,r+=2,(n=ko.getInstance(Math.max(e,r)))?(i=n.page,a=n.pos,this.__init(e,r,t,i,a)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"coords",get:function(){return this.__coords}}],[{key:"getInstance",value:function(t){if(!(isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3]))){var e=Math.ceil(t[2]-t[0]),r=Math.ceil(t[3]-t[1]);e+=2,r+=2;var n=ko.getInstance(Math.max(e,r));if(n)return new p(e,r,t,n.page,n.pos)}}},{key:"genBlur",value:function(t,e){var r=ve(t.coords,2),n=r[0],i=r[1],a=t.size,o=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox,_=Te.getCacheCanvas(l,c);_.ctx.drawImage(o,n-1,i-1,l,c,0,0,l,c),_.draw();var f=Te.getCacheWebgl(l,c);return Oi.gaussBlur(_,f,e,l,c),f.bbox=u,f.coords=[1,1],f.size=a,f.sx1=s,f.sy1=h,f.dbx=t.dbx,f.dby=t.dby,f.width=l,f.height=c,f}},{key:"genMask",value:function(t,e,r,n,i){for(var o=Bo(t),a=[];e&&e.isMask;)a.push(e),e=e.next;var s=ve(o.coords,2),h=s[0],l=s[1],c=o.ctx,u=o.dbx,_=o.dby;i[0]+=h+u,i[1]+=l+_;var f=Vn.calMatrixByOrigin(n,i);return a.forEach(function(t){var e=t.__config,r=e[Fo],n=e[Lo],i=e[Po],a=r&&r.available&&r;(a=(a=a||n&&n.available&&n)||i&&i.available&&i)?(c.globalAlpha=e[Co],p.drawCache(a,o,t.computedStyle[Do],[1,0,0,1,0,0],t.computedStyle[No].slice(0),f)):Te.error("CacheMask is oversize")}),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.globalCompositeOperation=r?"source-out":"source-in",p.drawCache(t,o),c.globalCompositeOperation="source-over",o.draw(c),o}},{key:"genOverflow",value:function(t,e){var r=t.bbox,n=e.sx,i=e.sy,a=e.outerWidth,o=e.outerHeight,s=n+a,h=i+o;if(r[0]<n||r[1]<i||r[2]>s||r[3]>h){var l=Bo(t),c=l.ctx;return c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,p.drawCache(t,l),l.draw(c),c.globalCompositeOperation="destination-in",c.fillStyle="#FFF",c.beginPath(),c.rect(n-r[0]+1,i-r[1]+1,a,o),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",l}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(me.equalArr(e,r))return t;var n=r[0]-e[0],i=r[1]-e[1],a=p.getInstance(e);if(a&&a.enabled){var o=ve(t.coords,2),s=o[0],h=o[1],l=t.canvas,c=t.width,u=t.height,_=ve(a.coords,2),f=_[0],d=_[1];return a.sx1=t.sx1,a.sy1=t.sy1,a.dx=t.dx+n,a.dy=t.dy+i,a.dbx=t.dbx+n,a.dby=t.dby+i,a.ctx.drawImage(l,s-1,h-1,c,u,n+f-1,i+d-1,c,u),a.__available=!0,t.release(),a}}},{key:"drawCache",value:function(t,e,r,n,i,a){var o,s=ve(e.coords,2),h=s[0],l=s[1],c=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,d=e.dby,p=ve(t.coords,2),v=p[0],y=p[1],g=t.canvas,m=t.sx1,E=t.sy1,T=t.dbx,O=t.dby,M=t.width,A=t.height,R=h+m-c+f-T,b=l+E-u+d-O;r&&n&&i&&(i[0]+=R,i[1]+=b,o=Vn.calMatrixByOrigin(r,i),n=ge.multiply(n,o),a&&(n=me.equalArr(n,a)?[1,0,0,1,0,0]:(a=ge.inverse(a),ge.multiply(n,a))),_.setTransform(n[0],n[1],n[2],n[3],n[4],n[5])),_.drawImage(g,v-1,y-1,M,A,R-1,b-1,M,A)}},{key:"draw",value:function(t,e,r,n){t.globalAlpha=e,t.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]);var i=ve(n.coords,2),a=i[0],o=i[1],s=n.canvas,h=n.sx1,l=n.sy1,c=n.dbx,u=n.dby,_=n.width,f=n.height;t.drawImage(s,a-1,o-1,_,f,h-1-c,l-1-u,_,f)}},{key:"MAX",get:function(){return ko.MAX-2}}]),p}();c(Ho,"NUM",5);var Go=p.STYLE_KEY,Yo=p.STYLE_RV_KEY,Wo=p.style2Upper,Uo=p.STYLE_KEY,Xo=Uo.BORDER_TOP_LEFT_RADIUS,Ko=Uo.BORDER_TOP_RIGHT_RADIUS,Vo=Uo.BORDER_BOTTOM_LEFT_RADIUS,zo=Uo.BORDER_BOTTOM_RIGHT_RADIUS,jo=Uo.PADDING_LEFT,$o=Uo.PADDING_RIGHT,qo=Uo.PADDING_TOP,Zo=Uo.PADDING_BOTTOM,Jo=Uo.MARGIN_LEFT,Qo=Uo.MARGIN_TOP,ts=Uo.MARGIN_BOTTOM,es=Uo.MARGIN_RIGHT,rs=Uo.BORDER_LEFT_WIDTH,ns=Uo.BORDER_TOP_WIDTH,is=Uo.BORDER_BOTTOM_WIDTH,as=Uo.BORDER_RIGHT_WIDTH,os=Uo.TOP,ss=Uo.RIGHT,hs=Uo.BOTTOM,ls=Uo.LEFT,cs=Uo.POSITION,us=Uo.DISPLAY,_s=Uo.WIDTH,fs=Uo.HEIGHT,ds=Uo.MATRIX,ps=Uo.TRANSLATE_X,vs=Uo.TRANSLATE_Y,ys=Uo.TRANSFORM,gs=Uo.SCALE_X,ms=Uo.SCALE_Y,Es=Uo.ROTATE_Z,Ts=Uo.SKEW_X,Os=Uo.SKEW_Y,Ms=Uo.TRANSFORM_ORIGIN,As=Uo.BACKGROUND_POSITION_X,Rs=Uo.BACKGROUND_POSITION_Y,bs=Uo.BACKGROUND_SIZE,Ss=Uo.BACKGROUND_COLOR,xs=Uo.BACKGROUND_IMAGE,ks=Uo.BACKGROUND_REPEAT,Is=Uo.BOX_SHADOW,Ns=Uo.OPACITY,Ds=Uo.Z_INDEX,ws=Uo.BORDER_TOP_STYLE,Cs=Uo.BORDER_RIGHT_STYLE,Ps=Uo.BORDER_BOTTOM_STYLE,Ls=Uo.BORDER_LEFT_STYLE,Fs=Uo.FILTER,Bs=Uo.OVERFLOW,Hs=Uo.MIX_BLEND_MODE,Gs=Uo.BORDER_TOP_COLOR,Ys=Uo.BORDER_BOTTOM_COLOR,Ws=Uo.BORDER_LEFT_COLOR,Us=Uo.BORDER_RIGHT_COLOR,Xs=Uo.FONT_STYLE,Ks=Uo.COLOR,Vs=Uo.VISIBILITY,zs=Uo.POINTER_EVENTS,js=Uo.BORDER_TOP,$s=Uo.BORDER_RIGHT,qs=Uo.BORDER_BOTTOM,Zs=Uo.BORDER_LEFT,Js=p.UPDATE_KEY,Qs=Js.UPDATE_NODE,th=Js.UPDATE_FOCUS,eh=Js.UPDATE_STYLE,rh=Js.UPDATE_OVERWRITE,nh=Js.UPDATE_KEYS,ih=Js.UPDATE_CONFIG,ah=p.STRUCT_KEY.STRUCT_HAS_MASK,oh=p.NODE_KEY,sh=oh.NODE_TAG_NAME,hh=oh.NODE_CACHE_STYLE,lh=oh.NODE_CURRENT_STYLE,ch=oh.NODE_COMPUTED_STYLE,uh=oh.NODE_STYLE,_h=oh.NODE_STRUCT,fh=oh.NODE_OPACITY,dh=oh.NODE_MATRIX_EVENT,ph=oh.NODE_MATRIX,vh=oh.NODE_LIMIT_CACHE,yh=oh.NODE_BLUR_VALUE,gh=oh.NODE_HAS_CONTENT,mh=oh.NODE_REFRESH_LV,Eh=oh.NODE_CACHE,Th=oh.NODE_CACHE_TOTAL,Oh=oh.NODE_CACHE_FILTER,Mh=oh.NODE_CACHE_MASK,Ah=oh.NODE_CACHE_OVERFLOW,Rh=oh.NODE_IS_DESTROYED,bh=b.AUTO,Sh=b.PX,xh=b.PERCENT,kh=b.STRING,Ih=b.INHERIT,Nh=me.clone,Dh=me.int2rgba,wh=me.rgba2int,Ch=me.joinArr,Ph=me.isNil,Lh=Qr.calRelative,Fh=mn.canvasPolygon,Bh=mn.svgPolygon,Hh=pe.GEOM,Gh=Ao.contain,Yh=Ao.NONE,Wh=Ao.TRANSFORM_ALL,Uh=Ao.TRANSFORM,Xh=Ao.REFLOW,Kh=Ao.REPAINT,Vh=Ao.TRANSLATE_X,zh=Ao.TRANSLATE_Y,jh=Ao.OPACITY,$h=Ao.FILTER;function qh(t,e,r,n,i,a,o){var s;t===ye.CANVAS?(n.beginPath(),n.fillStyle!==r&&(n.fillStyle=r),e.forEach(function(t){Fh(n,t,a,o)}),n.fill(),n.closePath()):t===ye.SVG&&(s="",e.forEach(function(t){s+=Bh(t)}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",r]]}))}function Zh(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v){var y,g=16<arguments.length&&void 0!==v?v:"fill",m=li.calRadius(r,n,i,a,h,l,c,u,_,f,d,p);t===ye.CANVAS?(o.beginPath(),o.fillStyle!==e&&(o.fillStyle=e),m?Fh(o,m):o.rect(r,n,i,a),o[g](),o.closePath()):t===ye.SVG&&(m?(y=Bh(m),s.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",y],["fill",e]]})):s.virtualDom.bb.push({type:"item",tagName:"rect",props:[["x",r],["y",n],["width",i],["height",a],["fill",e]]}))}var Jh=[Xo,Ko,zo,Vo];function Qh(t,e,r){return t[1]===Sh?t[0]:t[1]===xh?(e-r)*t[0]*.01:0}var tl,el,rl,nl,il,al=function(){t(b,R);var i=e(b);function b(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};g(this,b),r=i.call(this),Array.isArray(e)?r.props=me.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={};var n=r.__config;return n[sh]=t,n[hh]=r.__cacheStyle,n[lh]=r.__currentStyle,n[ch]=r.__computedStyle,n[mh]=Xh,n[uh]=r.__style,n[dh]=[],r}return l(b,[{key:"__structure",value:function(t,e,r){var n=rt(et(b.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(n[ah]=this.__hasMask),this.__config[_h]=n}},{key:"__mp",value:function(n,i,a){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=Go[Wo("margin"+t)],r=Go[Wo("padding"+t)];i[e]=o.__mpWidth(n[e],a),i[r]=o.__mpWidth(n[r],a)})}},{key:"__mpWidth",value:function(t,e){return t[1]===Sh?t[0]:t[1]===xh?t[0]*e*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[jo]+r[$o],this.__clientHeight=e+=r[qo]+r[Zo],this.__offsetWidth=t+=r[rs]+r[as],this.__offsetHeight=e+=r[ns]+r[is],this.__outerWidth=t+r[Jo]+r[es],this.__outerHeight=e+r[Qo]+r[ts]}},{key:"__layout",value:function(t,e,r){Qr.computeReflow(this,this.isShadowRoot);var n,i,a,o,s,h,l,c,u,_=t.w,f=this.isDestroyed,d=this.currentStyle,p=this.computedStyle,v=this.__config,y=p[us],g=d[_s],m=d[cs];if(this.__cancelCache(),this.__layoutData=Nh(t),v[mh]=Xh,v[vh]=!1,f||"none"===y)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=p[_s]=p[fs]=0,void this.__layoutNone();if(r||this.__mp(d,p,_),g[1]!==bh)switch(g[1]){case Sh:_=g[0];break;case xh:_*=.01*g[0]}this.__ox=this.__oy=0,"flex"===y?this.__layoutFlex(t,e):"inline"===y?this.__layoutInline(t,e):this.__layoutBlock(t,e),"relative"===m?(n=d[os],i=d[ss],a=d[hs],o=d[ls],s=this.parent,n[1]!==bh?(h=Lh(d,os,n,s),this.__offsetY(h),p[os]=h,p[hs]="auto"):a[1]!==bh?(l=Lh(d,hs,a,s),this.__offsetY(-l),p[hs]=l,p[os]="auto"):p[os]=p[hs]="auto",o[1]!==bh?(c=Lh(d,ls,o,s,!0),this.__offsetX(c),p[ls]=c,p[ss]="auto"):i[1]!==bh?(u=Lh(d,ss,i,s,!0),this.__offsetX(-u),p[ss]=u,p[ls]="auto"):p[ls]=p[ss]="auto"):"absolute"!==d[cs]&&(p[os]=p[hs]=p[ls]=p[ss]="auto"),this.__sx=this.x+this.ox,this.__sy=this.y+this.oy;var E=p[_s]=this.width,T=p[fs]=this.height;e&&this.__ioSize(E,T);var O=this.next;if(!this.isMask&&O&&O.isMask){for(var M=0;O&&O.isMask;)M++,O=O.next;this.__hasMask=M}var A,R=this.__animateRecords;R&&(this.__animateRecords=null,R.list.forEach(function(t){t.target.vd instanceof b&&(t.target=t.target.vd)}),A=R.controller||this.root.animateController,R.options&&!1===R.options.autoPlay?A.__records=A.__records.concat(R.list):(A.__auto=A.__auto.concat(R.list),A.__playAuto()))}},{key:"__layoutNone",value:function(){this.computedStyle[us]="none"}},{key:"__preLayout",value:function(t){var e=t.x,r=t.y,n=t.w,i=t.h,a=t.w2,o=t.h2;this.__x=e,this.__y=r;var s,h,l=this.currentStyle,c=this.computedStyle,u=l[_s],_=l[fs],f=c[ns],d=c[as],p=c[is],v=c[rs],y=c[Qo],g=c[es],m=c[ts],E=c[Jo],T=c[qo],O=c[$o],M=c[Zo],A=c[jo];if(void 0!==a)s=!0,n=a;else if(u[1]!==bh)switch(s=!0,u[1]){case Sh:n=u[0];break;case xh:n*=.01*u[0]}if(void 0!==o)h=!0,i=o;else if(_[1]!==bh)switch(h=!0,_[1]){case Sh:i=_[0];break;case xh:i*=.01*_[0]}return e+=v+E+A,t.x=e,r+=f+y+T,t.y=r,u[1]===bh&&(n-=v+d+E+g+A+O),_[1]===bh&&(i-=f+p+y+m+T+M),{fixedWidth:s,fixedHeight:h,x:e,y:r,w:n,h:i}}},{key:"__marginAuto",value:function(t,e){var r,n=t[cs],i=t[Jo],a=t[es],o=t[_s];"absolute"===n||o===bh||i[1]!==bh||a[1]!==bh||(r=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-r),!0)}},{key:"__calMatrix",value:function(t,e,n,i,r,a,o,s){var h,l,c,u,_,f,d,p=e[ds];return p&&t<Xh&&!Gh(t,Uh)?(u=l=0,Gh(t,Vh)&&(h=n[ps],l=(h=Ph(h)?0:h[1]===xh?h[0]*this.outerWidth*.01:h[0])-(i[ps]||0),i[ps]=h,i[ys][4]+=l,p[4]+=l),Gh(t,zh)&&(c=n[vs],u=(c=Ph(c)?0:c[1]===xh?c[0]*this.outerHeight*.01:c[0])-(i[vs]||0),i[vs]=c,i[ys][5]+=u,p[5]+=u),e[ds]=p):(void 0===r&&(r=this.sx,a=this.sy,o=this.outerWidth,s=this.outerHeight),void 0===e[Ms]&&(e[Ms]=!0,p=null,i[Ms]=Vn.calOrigin(n[Ms],o,s)),void 0!==e[ys]&&void 0!==e[ps]&&void 0!==e[vs]&&void 0!==e[Es]&&void 0!==e[gs]&&void 0!==e[ms]&&void 0!==e[Ts]&&void 0!==e[Os]||(e[ys]=e[ps]=e[vs]=e[Es]=e[gs]=e[ms]=e[Ts]=e[Os]=!0,p=null,n[ys]?_=Vn.calMatrix(n[ys],o,s):(f=[],[ps,vs,Es,Ts,Os,gs,ms].forEach(function(t){delete i[t];var e,r=n[t];Ph(r)||(i[t]=r[0],e=t===gs||t===ms,1===r[0]&&e||!e&&0===r[0]||(r[1]===xh&&(t===ps?i[t]=r[0]*o*.01:t===vs&&(i[t]=r[0]*s*.01)),f.push([t,r])))}),f.length&&(_=Vn.calMatrix(f,o,s))),i[ys]=_||[1,0,0,1,0,0]),p||((d=i[Ms].slice(0))[0]+=r||0,d[1]+=a||0,p=e[ds]=Vn.calMatrixByOrigin(i[ys],d))),p}},{key:"__calCache",value:function(t,e,r,n,i,_,a,f,o,s,h,l,c,u,d,p,v,y,g,m,E,T,O,M,A,R){var b,S,x,k,I,N,D,w,C,P,L,F,B,H,G,Y,W,U,X=this;this.__calMatrix(e,_,a,f,o,s,c,u),Kh<=e?(void 0===_[As]&&(_[As]=!0,b=a[As],f[As]=b[1]===Sh?b[0]:b[0]+"%"),void 0===_[Rs]&&(_[Rs]=!0,S=a[Rs],f[Rs]=S[1]===Sh?S[0]:S[0]+"%"),void 0===_[bs]&&(_[bs]=!0,f[bs]=(G=a[bs],Y=h,W=l,U=[],G.forEach(function(t,e){t[1]===Sh?U.push(t[0]):t[1]===xh?U.push(t[0]*(e?W:Y)*.01):t[1]===bh?U.push(-1):t[1]===kh&&U.push("contain"===t[0]?-2:-3)}),U)),void 0===_[xs]&&(x=f[xs]=a[xs],me.isString(x)?(_[xs]=!0,k=this.__loadBgi,(I=Te.IMG[xs])&&I.state===Te.LOADED?(k.url=xs,k.source=I.source,k.width=I.width,k.height=I.height):k.url!==x&&(k.url=x,k.source=null,Te.measureImg(x,function(t){var e,r;t.success&&t.url===k.url&&!X.isDestroyed&&(k.source=t.source,k.width=t.width,k.height=t.height,(r=(e=X).root).delRefreshTask(k.cb),r.addRefreshTask(k.cb={__before:function(){_[xs]=void 0;var t={};t[Qs]=e,t[th]=Kh,t[ih]=e.__config,r.__addUpdate(e,e.__config,r,r.__config,t)}}))},{width:h,height:l}))):x&&x.k&&(_[xs]=this.__gradient(t,r,n,m,M,E,A,h,l,x))),void 0===_[Is]&&(_[Is]=!0,f[Is]=a[Is]),[Ns,Ds,ws,Cs,Ps,Ls,ks,Fs,Bs,Hs].forEach(function(t){f[t]=a[t]}),[Ss,Gs,Us,Ys,Ws].forEach(function(t){void 0===_[t]&&(_[t]=Dh(f[t]=a[t][0]))}),void 0!==_[Xo]&&void 0!==_[Ko]&&void 0!==_[zo]&&void 0!==_[Vo]||(_[Xo]=_[Ko]=_[zo]=_[Vo]=!0,P=c,L=u,F=a,B=f,H=!0,Jh.forEach(function(t){B[t]=F[t].map(function(t,e){return 0<t[0]?(H=!1,t[1]===Sh?Math.max(0,t[0]):Math.max(0,t[0]*(e?L:P)*.01)):0})}),H||Jh.forEach(function(t,e){var r,n=e%2==0?0:1,i=n?L:P,a=B[t],o=B[Jh[(e+1)%4]];a[n]+o[n]>i&&(r=.5*i,a[n]>=r&&o[n]>=r?a[n]=o[n]=r:a[n]>r?a[n]=i-o[n]:o[n]>r&&(o[n]=i-a[n]))})),N=f[Xo],D=f[Ko],w=f[zo],C=f[Vo],["Top","Right","Bottom","Left"].forEach(function(t){var e,r,n,i,a,o,s,h,l=Go[Wo(t="border"+t)],c=Go[Wo(t+"Width")],u=Go[Wo(t+"Style")];void 0===_[c]&&(_[c]=!0,_[l]=void 0),void 0===_[u]&&(_[u]=!0,_[l]=void 0),void 0===_[l]&&(l===js?0<d?(e=Math.atan(d/y),r=Math.atan(d/p),_[l]=li.calPoints(d,f[u],e,r,g,m,E,T,O,M,A,R,0,N,D)):_[l]=[]:l===$s?0<p?(n=Math.atan(p/d),i=Math.atan(p/v),_[l]=li.calPoints(p,f[u],n,i,g,m,E,T,O,M,A,R,1,D,w)):_[l]=[]:l===qs?0<v?(a=Math.atan(v/y),o=Math.atan(v/p),_[l]=li.calPoints(v,f[u],a,o,g,m,E,T,O,M,A,R,2,C,w)):_[l]=[]:l===Zs&&(0<y?(s=Math.atan(y/d),h=Math.atan(y/v),_[l]=li.calPoints(y,f[u],s,h,g,m,E,T,O,M,A,R,3,N,C)):_[l]=[]))})):(Gh(e,jh)&&(f[Ns]=a[Ns]),Gh(e,$h)&&(f[Fs]=a[Fs]));var K=i&&i.computedStyle;if(a[Xs][1]===Ih?f[Xs]=i?K[Xs]:"normal":_[Xs]||(f[Xs]=a[Xs][0]),_[Xs]=f[Xs],a[Ks][1]===Ih?(f[Ks]=i?K[Ks]:[0,0,0,1],_[Ks]=Dh(f[Ks])):_[Ks]||(f[Ks]=wh(a[Ks][0]),_[Ks]=Dh(f[Ks])),a[Vs][1]===Ih?f[Vs]=i?K[Vs]:"visible":_[Vs]||(f[Vs]=a[Vs][0]),_[Vs]=f[Vs],a[zs][1]===Ih?f[zs]=i?K[zs]:"auto":_[zs]||(f[zs]=a[zs][0]),_[zs]=f[zs],t===ye.CANVAS){if(e<Kh)return this.__hasContent;if("hidden"!==f[Vs]){var V=f[xs];if(V){if(V.k)return!0;var z=this.__loadBgi;if(V===z.url&&z.source)return!0}if(0<f[Ss][3]){var j=f[_s],$=f[fs];if(j&&$)return!0}for(var q=["Top","Right","Bottom","Left"],Z=0,J=q.length;Z<J;Z++){var Q=q[Z];if(0<f[Go[Wo("border"+Q+"Width")]]&&0<f[Go[Wo("border"+Q+"Color")]][3])return!0}var tt=f[Is];if(Array.isArray(tt))for(var et=0,rt=tt.length;et<rt;et++){var nt=tt[et];if(nt&&(0<nt[2]||0<nt[3]))return!0}for(var it=0,at=Jh.length;it<at;it++){var ot=f[Jh[it]];if(0<ot[0]&&0<ot[1])return!0}}}return!1}},{key:"__renderSelf",value:function(l,c,u,_,f){var d,n=this,t=this.isDestroyed,e=this.currentStyle,r=this.computedStyle,i=this.__cacheStyle,p=this.root,v=this.__config,a=v[Eh];if(this.__renderSelfData=null,v[mh]=Yh,t)return{isDestroyed:t,break:!0};if(l===ye.SVG&&(d=this.__virtualDom={bb:[],children:[],visibility:"visible"},v[Th]?v[Th].available||(v[Th].available=!0):v[Th]={available:!0,release:function(){this.available=!1,delete d.cache}}),"none"===r[us])return{break:!0};var o=this.sx,s=this.sy,h=this.width,y=this.height,g=this.clientWidth,m=this.clientHeight,E=this.outerWidth,T=this.outerHeight,O=this.__hasMask,M=r[Qo],A=r[Jo],R=r[qo],b=r[$o],S=r[Zo],x=r[jo],k=r[rs],I=r[as],N=r[ns],D=r[is],w=this.__sx1=o+A,C=this.__sx2=w+k,P=this.__sx3=C+h+x+b,L=this.__sx4=P+I,F=this.__sy1=s+M,B=this.__sy2=F+N,H=this.__sy3=B+y+R+S,G=this.__sy4=H+D,Y={x1:w,x2:C,x3:P,x4:L,y1:F,y2:B,y3:H,y4:G},W=this.domParent,U=this.__hasContent=v[gh]=this.__calCache(l,c,u,_,this.parent,i,e,r,o,s,g,m,E,T,N,I,D,k,w,C,P,L,F,B,H,G),X=r[Ss],K=r[Gs],V=r[Us],z=r[Ys],j=r[Ws],$=r[Xo],q=r[Ko],Z=r[zo],J=r[Vo],Q=r[Vs],tt=r[ks],et=r[xs],rt=r[Ns],nt=r[Fs],it=r[bs],at=r[Is],ot=r[Bs],st=r[Hs];l===ye.CANVAS?(W&&(rt*=W.__config[fh]),v[fh]=rt):l===ye.SVG&&(1===rt?delete d.opacity:d.opacity=rt,"normal"!==st?d.mixBlendMode=st:delete d.mixBlendMode);var ht=this.__matrix=v[ph]=i[ds],lt=this.__renderMatrix=ht;W&&(ht=ge.multiply(W.matrixEvent,ht));var ct=this.__matrixEvent=v[dh];if(ct[0]=ht[0],ct[1]=ht[1],ct[2]=ht[2],ct[3]=ht[3],ct[4]=ht[4],ct[5]=ht[5],l===ye.SVG&&(!Gh(c,Wh)&&c<Kh||(ge.isE(lt)?delete d.transform:d.transform="matrix("+Ch(lt,",")+")")),"hidden"===Q&&l===ye.CANVAS)return Y.break=!0,Y;l===ye.SVG&&(d.visibility=Q);var ut,_t,ft,dt,pt,vt,yt,gt,mt,Et,Tt,Ot,Mt,At,Rt,bt,St,xt,kt,It,Nt=0,Dt=0;if(f&&l===ye.CANVAS){if(!U&&this.__releaseWhenEmpty(a))return Y.break=!0,v[vh]=!1,Y;if(v[vh]||a&&a.available||(ut=this.bbox,a?a.reset(ut):a=Ho.getInstance(ut),a&&a.enabled?(a.__bbox=ut,a.__appendData(w,F),_t=a.dbx,ft=a.dby,u=a.ctx,pt=(dt=ve(a.coords,2))[0],vt=dt[1],Nt=a.dx,Dt=a.dy,Y.x1=w=pt+_t,Y.y1=F=vt+ft,Nt&&(Y.x2=C+=Nt,Y.x3=P+=Nt,Y.x4=L+=Nt),Dt&&(Y.y2=B+=Dt,Y.y3=H+=Dt,Y.y4=G+=Dt)):(v[vh]=!0,a=null)),v[Eh]=a,v[vh])return{limitCache:!0}}if(v[yh]=0,Array.isArray(nt)&&nt.forEach(function(t){var e,r,n,i,a,o=ve(t,2),s=o[0],h=o[1];"blur"===s&&(v[yh]=h,l===ye.CANVAS&&0<h&&!f?(e=p.width,r=p.height,(n=Te.getCacheCanvas(e,r)).ctx&&(yt={ctx:u,blur:h,target:n},u=n.ctx)):l===ye.SVG&&(Xh<=c||Gh(c,$h))&&(0<h?(i=ge.int2convolution(h),a=_.add({tagName:"filter",props:[["x",-i/E],["y",-i/T],["width",1+2*i/E],["height",1+2*i/T]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",h]]}]}),d.filter="url(#"+a+")"):delete d.filter))}),O&&(l!==ye.CANVAS||f||(yt?gt=yt:(mt=p.width,Et=p.height,(Tt=Te.getCacheCanvas(mt,Et)).ctx&&(gt={ctx:u,target:Tt},u=Tt.ctx)))),"hidden"===ot?l!==ye.CANVAS||f?l===ye.SVG&&(Mt=_.add({tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(o,",").concat(s,"L").concat(o+E,",").concat(s,"L").concat(o+E,",").concat(s+T,"L").concat(o,",").concat(s+T,",L").concat(o,",").concat(s)]]}]}),d.overflow="url(#"+Mt+")"):(yt||gt?Ot=yt||gt:(At=p.width,Rt=p.height,(bt=Te.getCacheCanvas(At,Rt)).ctx&&(Ot={ctx:u,target:bt},u=bt.ctx)),Ot.x=o,Ot.y=s,Ot.outerWidth=E,Ot.outerHeight=T):l===ye.SVG&&delete d.overflow,"normal"===st||f||(yt||gt||Ot?It=yt||gt||Ot:(St=p.width,xt=p.height,kt=Te.getCacheCanvas(St,xt),It={ctx:u,target:kt,mixBlendMode:st},u=kt.ctx)),l!==ye.CANVAS||f||(u.globalAlpha=rt,u.setTransform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5])),0<X[3]&&Zh(l,i[Ss],C,B,g,m,u,this,N,I,D,k,$,q,Z,J),et)if(me.isString(et)){var wt=this.__loadBgi;if(wt.url===et){var Ct=wt.source;if(Ct){var Pt=wt.width,Lt=wt.height,Ft=ve(it,2),Bt=Ft[0],Ht=Ft[1];-1===Bt&&-1===Ht?(Bt=Pt,Ht=Lt):-2===Bt?g<Pt&&m<Lt?(Ht=Lt/m)<=(Bt=Pt/g)?Ht=(Bt=g)*Lt/Pt:Bt=(Ht=m)*Pt/Lt:g<Pt?Ht=(Bt=g)*Lt/Pt:m<Lt?Bt=(Ht=m)*Pt/Lt:(Bt=Pt,Ht=Lt):-3===Bt?Pt<g&&Lt<m?(Bt=Pt/g)<=(Ht=Lt/m)?Ht=(Bt=g)*Lt/Pt:Bt=(Ht=m)*Pt/Lt:Pt<g||!(Lt<m)&&(Bt=Pt/g)<=(Ht=Lt/m)?Ht=(Bt=g)*Lt/Pt:Bt=(Ht=m)*Pt/Lt:-1===Bt?Bt=Ht*Pt/Lt:-1===Ht&&(Ht=Bt*Lt/Pt);var Gt,Yt,Wt=C+Qh(e[As],g,Bt),Ut=B+Qh(e[Rs],m,Ht),Xt=Wt<C||Ut<B||g<Bt||m<Ht,Kt=0,Vt=0,zt=0,jt=0;-1<["repeat-x","repeat"].indexOf(tt)&&(0<(Gt=Wt-C)&&(Kt=Math.ceil(Gt/Bt)),0<(Gt=C+g-Wt-Bt)&&(Vt=Math.ceil(Gt/Bt))),-1<["repeat-y","repeat"].indexOf(tt)&&(0<(Yt=Ut-B)&&(zt=Math.ceil(Yt/Ht)),0<(Yt=B+m-Ut-Ht)&&(jt=Math.ceil(Yt/Ht)));var $t,qt,Zt,Jt,Qt=[];if(0<Kt)for(var te=0;te<Kt;te++){var ee=Wt-(te+1)*Bt;Qt.push([ee,Ut]),!Xt&&0===te&&ee<C&&(Xt=!0)}if(0<Vt)for(var re=0;re<Vt;re++){var ne=Wt+(re+1)*Bt;Qt.push([ne,Ut]),!Xt&&re===Vt-1&&C+g<ne+Bt&&(Xt=!0)}if(0<zt)for(var ie=0;ie<zt;ie++){var ae=Ut-(ie+1)*Ht;Qt.push([Wt,ae]),!Xt&&0===ie&&ae<B&&(Xt=!0)}if(0<jt)for(var oe=0;oe<jt;oe++){var se=Ut+(oe+1)*Ht;Qt.push([Wt,se]),!Xt&&oe===jt-1&&B+m<se+Bt&&(Xt=!0)}if(0<Kt&&0<zt)for(var he=0;he<Kt;he++)for(var le=0;le<zt;le++)Qt.push([Wt-(he+1)*Bt,Ut-(le+1)*Ht]);if(0<Vt&&0<zt)for(var ce=0;ce<Vt;ce++)for(var ue=0;ue<zt;ue++)Qt.push([Wt+(ce+1)*Bt,Ut-(ue+1)*Ht]);if(0<Kt&&0<jt)for(var _e=0;_e<Kt;_e++)for(var fe=0;fe<jt;fe++)Qt.push([Wt-(_e+1)*Bt,Ut+(fe+1)*Ht]);if(0<Vt&&0<jt)for(var de=0;de<Vt;de++)for(var pe=0;pe<jt;pe++)Qt.push([Wt+(de+1)*Bt,Ut+(pe+1)*Ht]);l===ye.CANVAS?(Xt&&(u.save(),Zh(l,"#FFF",C,B,g,m,u,this,N,I,D,k,$,q,Z,J,"clip")),u.drawImage(Ct,Wt,Ut,Bt,Ht),Qt.forEach(function(t){u.drawImage(Ct,t[0],t[1],Bt,Ht)}),Xt&&u.restore()):l===ye.SVG&&($t=pi.matrixResize(Pt,Lt,Bt,Ht,Wt,Ut,g,m),qt=[["xlink:href",et],["x",Wt],["y",Ut],["width",Pt],["height",Lt]],$t&&!ge.isE($t)&&(Zt=!0,qt.push(["transform","matrix("+Ch($t,",")+")"])),Xt&&(Jt=_.add({tagName:"clipPath",children:[{tagName:"rect",props:[["x",C],["y",B],["width",g],["height",m],["fill","#FFF"]]}]}),this.virtualDom.bbClip="url(#"+Jt+")"),this.virtualDom.bb.push({type:"img",tagName:"image",props:qt}),Qt.forEach(function(t){var e,r=Nh(qt);!Zt||(e=pi.matrixResize(Pt,Lt,Bt,Ht,t[0],t[1],g,m))&&!ge.isE(e)&&(r[5][1]="matrix("+Ch(e,",")+")"),r[1][1]=t[0],r[2][1]=t[1],n.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}else et.k&&Zh(l,i[xs],C,B,g,m,u,this,N,I,D,k,$,q,Z,J);return at&&at.forEach(function(t){!function(t,e,r,n,i,a,o,s,h,l,c){var u=ve(n,6),_=u[0],f=u[1],d=u[2],p=u[3],v=u[4],y=u[5],g=Dh(v),m=2*Math.abs(d)+2*Math.abs(p)+2*Math.abs(_)+2*Math.abs(f),E=[[a,o],[s,o],[s,h],[a,h],[a,o]],T=[[a-m,o-m],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m]];if(0<v[3]&&(0<d||0<p))if(t===ye.CANVAS){if(e.save(),e.beginPath(),"inset"===y){var O=a+_+p,M=o+f+p,A=s+_-p,R=h+f-p,b=[[O,M],[A,M],[A,R],[O,R]],S=Ee.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[b[0][0],b[0][1],b[2][0],b[2][1]]);if(!S)return;S=[[S[0],S[1]],[S[2],S[1]],[S[2],S[3]],[S[0],S[3]],[S[0],S[1]]],p?(Fh(e,S),Fh(e,E.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Fh(e,E),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),Fh(e,S),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Fh(e,[[O,M],[A,M],[A,R],[a-m,R],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,R],[O,R],[O,M]])):(Fh(e,E),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Fh(e,[[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]]))}else{var x=a+_-p,k=o+f-p,I=s+_+p,N=h+f+p,D=[[x,k],[I,k],[I,N],[x,N]],w=Ee.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[D[0][0],D[0][1],D[2][0],D[2][1]]);p?(Fh(e,E),Fh(e,D.slice(0).reverse()),e.clip(),e.closePath(),e.beginPath(),e.fillStyle!==g&&(e.fillStyle=g),Fh(e,D),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),w&&Fh(e,[[w[0],w[1]],[w[2],w[1]],[w[2],w[3]],[w[0],w[3]],[w[0],w[1]]].reverse()),Fh(e,E),Fh(e,D),Fh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowColor=g,e.shadowBlur=d,Fh(e,D)):(Fh(e,E),Fh(e,T),e.clip(),e.closePath(),e.beginPath(),"#FFF"!==e.fillStyle&&(e.fillStyle="#FFF"),e.shadowOffsetX=_,e.shadowOffsetY=f,e.shadowColor=g,e.shadowBlur=d,Fh(e,E))}e.fill(),e.closePath(),e.restore()}else if(t===ye.SVG){var C=ge.int2convolution(d);if("inset"===y){var P,L,F,B,H=a+_+p,G=o+f+p,Y=s+_-p,W=h+f-p,U=[[H,G],[Y,G],[Y,W],[H,W]],X=Ee.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[U[0][0],U[0][1],U[2][0],U[2][1]]);if(!X)return;X=[[X[0],X[1]],[X[2],X[1]],[X[2],X[3]],[X[0],X[3]],[X[0],X[1]]],p?(P=r.add({tagName:"filter",props:[["x",-C/l],["y",-C/c],["width",1+2*C/l],["height",1+2*C/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]}),L=r.add({tagName:"clipPath",children:[{tagName:"path",props:[["d",Bh(X)+Bh(E.slice(0).reverse())],["fill","#FFF"]]}]}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bh(E)],["fill",g],["clip-path","url(#"+L+")"]]}),L=r.add({tagName:"clipPath",children:[{tagName:"path",props:[["d",Bh(X)],["fill","#FFF"]]}]}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bh([[H,G],[Y,G],[Y,W],[a-m,W],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,W],[H,W],[H,G]])],["fill","#FFF"],["filter","url(#"+P+")"],["clip-path","url(#"+L+")"]]})):(F=r.add({tagName:"filter",props:[["x",-C/l],["y",-C/c],["width",1+2*C/l],["height",1+2*C/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]}),B=r.add({tagName:"clipPath",children:[{tagName:"path",props:[["d",Bh(E)],["fill","#FFF"]]}]}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bh([[a,o],[s,o],[s,h],[a-m,h],[a-m,h+m],[s+m,h+m],[s+m,o-m],[a-m,o-m],[a-m,h],[a,h],[a,o]])],["fill","#FFF"],["filter","url(#"+F+")"],["clip-path","url(#"+B+")"]]}))}else{var K,V,z,j,$=a+_-p,q=o+f-p,Z=s+_+p,J=h+f+p,Q=[[$,q],[Z,q],[Z,J],[$,J]],tt=Ee.getRectsIntersection([E[0][0],E[0][1],E[2][0],E[2][1]],[Q[0][0],Q[0][1],Q[2][0],Q[2][1]]);p?(K=r.add({tagName:"filter",props:[["x",-C/l],["y",-C/c],["width",1+2*C/l],["height",1+2*C/c]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*d],["flood-color",g]]}]}),V=r.add({tagName:"clipPath",children:[{tagName:"path",props:[["d",Bh(E)+Bh(Q.slice(0).reverse())],["fill","#FFF"]]}]}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bh(Q)],["fill",g],["clip-path","url(#"+V+")"]]}),V=r.add({tagName:"clipPath",children:[{tagName:"path",props:[["d",(tt?Bh([[tt[0],tt[1]],[tt[2],tt[1]],[tt[2],tt[3]],[tt[0],tt[3]],[tt[0],tt[1]]].reverse()):"")+Bh(E)+Bh(Q)+Bh(T)],["fill","#FFF"]]}]}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bh(Q)],["fill","#FFF"],["filter","url(#"+K+")"],["clip-path","url(#"+V+")"]]})):(z=r.add({tagName:"filter",props:[["x",-C/l],["y",-C/c],["width",1+2*C/l],["height",1+2*C/c]],children:[{tagName:"feDropShadow",props:[["dx",_],["dy",f],["stdDeviation",.5*d],["flood-color",g]]}]}),j=r.add({tagName:"clipPath",children:[{tagName:"path",props:[["d",Bh(E)+Bh(T)],["fill","#FFF"]]}]}),i.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Bh(E)],["fill","#FFF"],["filter","url(#"+z+")"],["clip-path","url(#"+j+")"]]}))}}}(l,u,_,t,n,w,F,L,G,E,T)}),0<N&&0<K[3]&&qh(l,i[js],i[Gs],u,this,Nt,Dt),0<I&&0<V[3]&&qh(l,i[$s],i[Us],u,this,Nt,Dt),0<D&&0<z[3]&&qh(l,i[qs],i[Ys],u,this,Nt,Dt),0<k&&0<j[3]&&qh(l,i[Zs],i[Ws],u,this,Nt,Dt),a&&a.enabled&&(a.__available=!0),l!==ye.CANVAS||f||(Y.offScreenFilter=yt,Y.offScreenMask=gt,Y.offScreenOverflow=Ot,Y.offScreenBlend=It),Y}},{key:"render",value:function(t,e,r,n,i){return this.__renderSelf(t,e,r,n,i)}},{key:"__destroy",value:function(){var t,e,r,n;this.isDestroyed||(rt(et(b.prototype),"__destroy",this).call(this),t=this.host,e=this.root,!(r=this.props.ref)||(n=t||e)&&n.ref[r]&&n.ref[r]===this&&delete n.ref[r],this.animationList.forEach(function(t){return t.__destroy()}),e.delRefreshTask(this.__loadBgi.cb),e.delRefreshTask(this.__task),this.__matrix=this.__matrixEvent=this.__root=null,this.__cancelCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[us]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener;return o.hasOwnProperty(a)&&(i=o[a]),e?(t.target=this,me.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):this.willResponseEvent(t)?(me.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,r=t.y,n=this.__sx1,i=this.__sy1,a=this.offsetWidth,o=this.offsetHeight,s=this.matrixEvent;if("none"!==this.computedStyle[zs])return Vn.pointInQuadrilateral(e,r,n,i,n+a,i,n+a,i+o,n,i+o,s)?(t.target||(t.target=this,"touchstart"===t.event.type&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,n,i,a,o,s,h,l){var c,u,_,f=l.k,d=l.v,p=l.d,v=l.s,y=l.z,g=l.p,m=n+.5*s,E=i+.5*h;return"linear"===f?(c=vt.getLinear(d,p,m,E,s,h),u=this.__getLg(t,e,r,c)):"radial"===f&&(_=vt.getRadial(d,v,y,g,n,i,a,o),u=this.__getRg(t,e,r,_)),u}},{key:"__getLg",value:function(t,e,r,n){if(t===ye.CANVAS){var i=e.createLinearGradient(n.x1,n.y1,n.x2,n.y2);return n.stop.forEach(function(t){i.addColorStop(t[1],t[0])}),i}if(t===ye.SVG)return"url(#"+r.add({tagName:"linearGradient",props:[["x1",n.x1],["y1",n.y1],["x2",n.x2],["y2",n.y2]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",t[0]],["offset",100*t[1]+"%"]]}})})+")"}},{key:"__cancelCache",value:function(){var t=this.__config;t[hh]=this.__cacheStyle={};var e=t[Eh],r=t[Th],n=t[Oh],i=t[Mh],a=t[Ah];e&&e.release(),r&&r.release(),n&&(Te.releaseCacheCanvas(n.canvas),t[Oh]=null),i&&(Te.releaseCacheCanvas(i.canvas),t[Mh]=null),a&&(Te.releaseCacheCanvas(a.canvas),t[Ah]=null)}},{key:"cancelCache",value:function(){this.__cancelCache();for(var t=this.domParent;t;)t.__cancelCache(),t=t.domParent}},{key:"__getRg",value:function(t,e,r,n){if(t===ye.CANVAS){var i=e.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.r);return n.stop.forEach(function(t){i.addColorStop(t[1],t[0])}),i}if(t===ye.SVG)return"url(#"+r.add({tagName:"radialGradient",props:[["cx",n.cx],["cy",n.cy],["r",n.r]],children:n.stop.map(function(t){return{tagName:"stop",props:[["stop-color",t[0]],["offset",100*t[1]+"%"]]}})})+")"}},{key:"updateStyle",value:function(e,r){var n=this,i=n.root,a=n.__config,o=Qr.normalize(e);i?i.addRefreshTask(n.__task={__before:function(){var t;a[Rh]||((t={})[Qs]=n,t[eh]=o,t[rh]=e,t[nh]=Object.keys(o).map(function(t){return Hh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[ih]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){me.isFunction(r)&&r.call(n,t)}}):(Object.assign(this.currentStyle,o),me.isFunction(r)&&r.call(n,0))}},{key:"updateFormatStyleNoOverwrite",value:function(e,r){var n,i=this.root,a=this.__config;i&&(n=this,i.addRefreshTask(n.__task={__before:function(){var t;a[Rh]||((t={})[Qs]=n,t[eh]=e,t[nh]=Object.keys(e).map(function(t){return Hh.hasOwnProperty(t)||(t=parseInt(t)),t}),t[ih]=a,i.__addUpdate(n,a,i,i.__config,t))},__after:function(t){me.isFunction(r)&&r.call(n,t)}}))}},{key:"animate",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:{};if(!this.isDestroyed){var n=new po(this,t,r);return this.animationList.push(n),!1===r.autoPlay?n:n.play()}}},{key:"removeAnimate",value:function(t){var e;t instanceof po&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"__computeMeasure",value:function(t,e,r,n){Qr.computeMeasure(this,r),me.isFunction(n)&&n(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){rt(et(b.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t),void 0!==r&&(this.__config[mh]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t}},{key:"__offsetY",value:function(t,e,r){rt(et(b.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t),void 0!==r&&(this.__config[mh]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t}},{key:"__resizeX",value:function(t){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,t<0&&(this.__config[vh]=!1)}},{key:"__resizeY",value:function(t){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,t<0&&(this.__config[vh]=!1)}},{key:"__spreadByBoxShadowAndFilter",value:function(t,e){var s=0,h=0;if(Array.isArray(t)&&t.forEach(function(t){var e,r=ve(t,6),n=r[0],i=r[1],a=r[2],o=r[3];"inset"!==r[5]&&(e=ge.int2convolution(a),e+=o,s=Math.max(s,n+e),h=Math.max(h,i+e))}),Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i,a=ve(e[r],2),o=a[0],l=a[1];"blur"===o&&(i=ge.int2convolution(l),s=Math.max(s,i),h=Math.max(h,i))}return[s,h]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},n=t?(n=Array.isArray(t)?t:[t]).map(function(t){return Go[Wo(t)]}):Object.keys(e);return n.forEach(function(t){Hh.hasOwnProperty(t)?r[t]=e[t]:r[Yo[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,n=this.offsetHeight,i=this.matrixEvent,a=ge.calPoint([t,e],i),o=ge.calPoint([t+r,e],i),s=ge.calPoint([t+r,e+n],i),h=ge.calPoint([t,e+n],i);return{left:Math.min(a[0],Math.min(o[0],Math.min(s[0],h[0]))),top:Math.min(a[1],Math.min(o[1],Math.min(s[1],h[1]))),right:Math.max(a[0],Math.max(o[0],Math.max(s[0],h[0]))),bottom:Math.max(a[1],Math.max(o[1],Math.max(s[1],h[1]))),points:[a,o,s,h]}}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.clientWidth,n=this.clientHeight,i=this.computedStyle,a=i[ns],o=i[as],s=i[is],h=i[rs],l=i[Is],c=i[Fs],u=ve(this.__spreadByBoxShadowAndFilter(l,c),2),_=u[0],f=u[1];return[t-_,e-f,t+(r+=h+o)+_,e+(n+=a+s)+f]}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"renderMatrix",get:function(){return this.__renderMatrix}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}}]),b}(),ol=p.STYLE_KEY.MARGIN_BOTTOM,sl=function(){function r(t,e){g(this,r),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return l(r,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var r=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.outerWidth}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}},{key:"marginBottom",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.computedStyle[ol])}),e}}]),r}(),hl=p.NODE_KEY.NODE_DOM_PARENT,ll=k.TYPE_VD,cl=k.TYPE_GM,ul=k.TYPE_CP;function _l(t,e,r,n,i){if(Array.isArray(t))return t.map(function(t){return _l(t,e,r,n)});if(me.isObject(t)&&t.$$type){var a=t.tagName,o=t.props,s=t.children,h=t.klass,l=t.$$type,c=t.inherit,u=t.__animateRecords;if(l===ul&&t.placeholder)return t.value;if(l===ll){if("img"===a){if(_=new rl(a,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else _=new el(a,o);if("p"===a)i=!0;else if("div"===a&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?dl(_,_l(s,e,r,n,i)):[],_.__children=s}else if(l===cl)var _=new(nl.getRegister(a))(a,o);else{if(l!==ul)return new yn(t);(_=new h(o)).__tagName=_.__tagName||a}t.vd=_,u&&(_.__animateRecords=u).list.forEach(function(t){t.target=_}),c&&me.extendAnimate(c,_),_.__root=e,n&&(_.__host=n),l===ul&&_.__init();var f=o.ref;return me.isString(f)&&f||me.isNumber(f)?r.ref[f]=_:me.isFunction(f)&&f(_),_}return new yn(t)}function fl(t){if(Array.isArray(t))return t.map(fl);if(!t||-1===[ll,cl,ul].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,n){if(Array.isArray(t))t.forEach(function(t){e(r,t,n)});else if(!t||t.$$type!==ll&&t.$$type!==cl)t&&t.$$type===ul?(r.push(t),n.lastText=null):me.isNil(t)||""===t||(null!==n.lastText?r[r.length-1]=n.lastText+=t:r.push(t));else{if(-1<["canvas","svg"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg");t.$$type===ll&&fl(t),r.push(t),n.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}function dl(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(t)?t.forEach(function(t){dl(e,t,n)}):(t instanceof tl||t instanceof il||t instanceof yn)&&(t.__parent=e,t.__domParent=e,t instanceof yn&&Object.assign(t.__config,e.__config),t.__config&&(t.__config[hl]=e),n.prev&&((n.prev.__next=t).__prev=n.prev),(n.prev=t)instanceof il&&((r=t.shadowRoot)instanceof yn&&(r.__parent=e,Object.assign(r.__config,e.__config)),r.__domParent=e,r.__config&&(r.__config[hl]=e))),t}var pl={ref:function(t){tl=t.Xom,el=t.Dom,rl=t.Img,nl=t.Geom,il=t.Component},initRoot:function(t,e){return dl(e,_l(fl({children:t,$$type:ll}).children,e,e))},initCp:function(t,e,r){if(me.isObject(t)){var n=_l(t,e,r,r);return Array.isArray(n)&&dl(r,n),n}return new yn(t)},flattenJson:fl,relation:dl,build:_l},vl=me.isNil,yl=me.isFunction,gl=me.clone,ml=me.extend;var El=function(){t(h,Ai);var r=e(h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return g(this,h),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=me.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.__state={},t.__isMounted=!1,t}return l(h,[{key:"setState",value:function(t,e){var r=this,n=this;if(vl(t))t={};else{if(yl(t))return void e.call(n);if(0===Object.keys(t).length)return void(yl(e)&&e.call(n));var i=gl(n.state);t=ml(i,t)}var a=n.root;a&&n.__isMounted?(a.delRefreshTask(n.__task),this.__task={__before:function(){n.__nextState=t,function t(e){e.__hasUpdate=!0;var r=e.host;r&&t(r)}(r)},__after:function(){yl(e)&&e.call(n)},__state:!0},a.addRefreshTask(n.__task)):yl(e)&&(n.__state=t,e.call(n))}},{key:"__init",value:function(t){var e,r=this,n=this.root,i=t||pl.flattenJson(this.render()),a=pl.initCp(i,n,this);if(this.__cd=i,a instanceof yn)Te.warn("Component render() return a text, should not inherit style/event");else if(a instanceof R){var o=Qr.normalize(this.props.style),s=Object.keys(o);ml(a.style,o,s),ml(a.currentStyle,o,s),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)?(t=t.slice(2).toLowerCase(),a.listener[t]=e):/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))})}else{if(!(a instanceof h))throw new Error("Component render() must return a dom/text: "+this);Te.warn("Component render() return a component: "+this.tagName+" -> "+a.tagName+", should not inherit style/event")}for((this.__shadow=a).__host=this;a instanceof h;)a=a.shadowRoot;(a.__host=this).__shadowRoot=a,this.__isMounted||(this.__isMounted=!0,e=this.componentDidMount,yl(e)&&n.once(Ai.REFRESH,function(){e.call(r)}))}},{key:"render",value:function(){Te.warn("Component must implement render()!")}},{key:"__destroy",value:function(){var t;this.isDestroyed||(this.__isDestroyed=!0,t=this.componentWillUnmount,yl(t)&&(t.call(this),this.__isMounted=!1),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__shadow=null,this.__shadowRoot=null,this.__parent=null)}},{key:"__emitEvent",value:function(t){var e=this.shadowRoot;if(!(e instanceof yn))return e.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"__computeMeasure",value:function(t,e,r,n){var i=this.shadowRoot;i instanceof yn?i.__computeMeasure(t,e):i.__computeMeasure(t,e,!0,n)}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),h}();Object.keys(pe.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config"]).forEach(function(e){Object.defineProperty(El.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","__cancelCache","__structure","__modifyStruct","__updateStruct"].forEach(function(e){El.prototype[e]=function(){var t=this.shadowRoot;if(t&&yl(t[e]))return t[e].apply(t,arguments)}});var Tl={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},Ol=p.STYLE_KEY,Ml=Ol.POSITION,Al=Ol.DISPLAY,Rl=Ol.FONT_WEIGHT,bl=Ol.MARGIN_LEFT,Sl=Ol.MARGIN_TOP,xl=Ol.MARGIN_RIGHT,kl=Ol.MARGIN_BOTTOM,Il=Ol.PADDING_LEFT,Nl=Ol.PADDING_BOTTOM,Dl=Ol.PADDING_RIGHT,wl=Ol.PADDING_TOP,Cl=Ol.BORDER_TOP_WIDTH,Pl=Ol.BORDER_BOTTOM_WIDTH,Ll=Ol.BORDER_RIGHT_WIDTH,Fl=Ol.BORDER_LEFT_WIDTH,Bl=Ol.TOP,Hl=Ol.RIGHT,Gl=Ol.BOTTOM,Yl=Ol.LEFT,Wl=Ol.WIDTH,Ul=Ol.HEIGHT,Xl=Ol.TEXT_ALIGN,Kl=Ol.FLEX_DIRECTION,Vl=Ol.FLEX_BASIS,zl=Ol.FLEX_SHRINK,jl=Ol.FLEX_GROW,$l=Ol.ALIGN_SELF,ql=Ol.ALIGN_ITEMS,Zl=Ol.JUSTIFY_CONTENT,Jl=Ol.Z_INDEX,Ql=p.NODE_KEY,tc=Ql.NODE_CURRENT_STYLE,ec=Ql.NODE_STYLE,rc=Ql.NODE_STRUCT,nc=Ql.NODE_DOM_PARENT,ic=p.STRUCT_KEY,ac=ic.STRUCT_NUM,oc=ic.STRUCT_LV,sc=ic.STRUCT_TOTAL,hc=ic.STRUCT_CHILD_INDEX,lc=ic.STRUCT_INDEX,cc=b.AUTO,uc=b.PX,_c=b.PERCENT,fc=Qr.calAbsolute,dc=Qr.isRelativeOrAbsolute;Ao.REFLOW;function pc(t){var i,a,o,s=[],h=[],l={},c=!1,u=t.children;u.forEach(function(t,e){var r,n=t;t instanceof El&&(t=t.shadowRoot),t instanceof al&&t.isMask?void 0!==o?l[o].push(t):e&&(u[o=e-1].__iIndex=o,l[o]=[t],i=!0):(o=void 0,t instanceof al&&dc(t)?(n.__iIndex=e,r=n.__zIndex=t.currentStyle[Jl],h.push(n),void 0===a?a=r:c||(r<a&&(c=!0),a=r)):s.push(n))}),c&&h.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__iIndex-e.__iIndex});var e=s.concat(h);if(i)for(var r=e.length-1;0<=r;r--){var n=e[r].__iIndex;l.hasOwnProperty(n)&&e.splice.apply(e,[r+1,0].concat(_(l[n])))}return e}var vc=function(){t(u,al);var o=e(u);function u(t,e,r){var n;g(this,u),(n=o.call(this,t,e)).__lineGroups=[];var i=h(n).style;i.display&&{flex:!0,block:!0,inline:!0,none:!0}.hasOwnProperty(i.display)||(Tl.INLINE.hasOwnProperty(n.tagName)?i.display="inline":i.display="block"),!i[Rl]&&Tl.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),n.__style=Qr.normalize(i,Rt.DOM_ENTRY_SET),n.__currentStyle=me.extend({},n.__style),n.__children=r||[];var a=n.__config;return a[tc]=n.__currentStyle,a[ec]=n.__style,n}return l(u,[{key:"__structure",value:function(n,i,t){var e=rt(et(u.prototype),"__structure",this).call(this,n++,i,t),a=[e],r=this.__zIndexChildren=this.__zIndexChildren||pc(this);r.forEach(function(t,e){var r=t.__structure(n,i+1,e);Array.isArray(r)?(n+=r.length,a=a.concat(r)):(n++,a.push(r))});var o=a.length-1;return e[ac]=r.length,e[sc]=o,a}},{key:"__modifyStruct",value:function(t,e){var r,n=1<arguments.length&&void 0!==e?e:0,i=this.__config,a=i[rc],o=a[sc]||0,s=this.__structure(a[lc],a[oc],a[hc]);(r=t.__structs).splice.apply(r,[a[lc]+n,a[sc]+1].concat(_(s)));var h,l=0;return this!==t&&(l=((a=i[rc])[sc]||0)-o,(h=i[nc].__config[rc])[sc]=h[sc]||0,h[sc]+=l),[a,l]}},{key:"__updateStruct",value:function(t){var e=this.__config[rc],r=e[lc],n=e[sc],i=void 0===n?0:n,a=this.__zIndexChildren=pc(this);if(1!==a.length){a.forEach(function(t,e){t.__config[rc][hc]=e});for(var o,s,h=[],l=r+1;l<=i;l++){var c=t[l];h.push({child:c,list:t.slice(c[lc],c[lc]+c[sc]+1)}),l+=c[sc]||0}h.sort(function(t,e){var r=t.child[hc]-e.child[hc];return r<0&&(o=!0),r}),o&&(s=[],h.forEach(function(t){s=s.concat(t.list)}),s.forEach(function(t,e){t[lc]=r+e+1}),t.splice.apply(t,[r+1,i].concat(_(s))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,n=this.currentStyle[Wl];if(n[1]===uc)return t-n[0];if(n[1]===_c)return t-e*n[0]*.01;for(var i=0;i<r.length;i++){if(t<0)return t;var a=r[i];t-=a instanceof al||a instanceof El?a.__tryLayInline(t,e):a.textWidth}return t}},{key:"__offsetX",value:function(e,r,n){rt(et(u.prototype),"__offsetX",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,n)})}},{key:"__offsetY",value:function(e,r,n){rt(et(u.prototype),"__offsetY",this).call(this,e,r,n),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,n)})}},{key:"__calAutoBasis",value:function(a,o,s,t){var e,r,n,i,h=0,l=0,c=0,u=this.flowChildren,_=this.currentStyle,f=_[Wl],d=_[Ul],p=_[bl],v=_[Sl],y=_[xl],g=_[kl],m=_[Il],E=_[wl],T=_[Dl],O=_[Nl],M=_[Cl],A=_[Ll],R=_[Pl],b=_[Fl],S=a?f:d;return S[1]===uc&&(h=c=S[0],t&&(l=h)),u.forEach(function(t){var e,r,n,i;c=t instanceof al||t instanceof El&&t.shadowRoot instanceof al?(r=(e=t.__calAutoBasis(a,o,s,!0)).b,n=e.min,i=e.max,h=Math.max(h,r),l=Math.max(l,n),Math.max(c,i)):a?(l=Math.max(t.charWidth,l),Math.max(t.textWidth,c)):(Qr.computeReflow(t),t.__layout({x:0,y:0,w:o,h:s},!0),l=Math.max(l,t.height),Math.max(c,t.height))}),a?(e=this.__calMp(p,o)+this.__calMp(y,o)+this.__calMp(m,o)+this.__calMp(T,o),r=b[0]+A[0]+e,h+=r,c+=r,l+=r):(n=this.__calMp(v,o)+this.__calMp(g,o)+this.__calMp(E,o)+this.__calMp(O,o),i=M[0]+R[0]+n,h+=i,c+=i,l+=i),{b:h,min:l,max:c}}},{key:"__calMp",value:function(t,e){var r=0;return t[1]===uc?r+=t[0]:t[1]===_c&&(t[0]*=.01*e,t[1]=uc,r+=t[0]),r}},{key:"__layoutNone",value:function(){rt(et(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof al||t instanceof El&&t.shadowRoot instanceof al)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(e,r){var t=this.flowChildren,n=this.currentStyle,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[Xl],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new sl(c,u);t.forEach(function(t){t instanceof al||t instanceof El&&t.shadowRoot instanceof al?"inline"===t.currentStyle[Al]?c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,r&&(d=Math.max(d,p),p=t.outerWidth)):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new sl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.outerWidth,v.add(t),r&&(p+=t.outerWidth)):(v.size&&(a.push(v),v.verticalAlign(),u+=v.height+v.marginBottom,v=new sl(e.x,u),r&&(d=Math.max(d,p),p=0)),t.__layout({x:e.x,y:u,w:_,h:f},r),c=e.x,u+=t.outerHeight,r&&(d=Math.max(d,t.outerWidth),p=0)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,r&&(d=Math.max(d,p),p=t.width)):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height+v.marginBottom,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new sl(c,u),r&&(d=Math.max(d,p),p=0)),c+=t.width,v.add(t),r&&(p+=t.width))}),v.size&&(a.push(v),r?d=Math.max(d,p):v.verticalAlign(),u+=v.height);var y=this.__width=h||!r?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),v.size&&(u+=v.marginBottom),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=_-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)}),r||this.__marginAuto(n,e)}},{key:"__layoutFlex",value:function(t,c){var b=this,e=this.flowChildren,r=this.currentStyle,n=r[Kl],i=r[Zl],a=r[ql],o=this.__preLayout(t),s=o.fixedWidth,R=o.fixedHeight,S=o.x,x=o.y,k=o.w,I=o.h;if(s&&c)return this.__width=k,void this.__ioSize(k,this.height);var u=0,N="row"===n,D=[],w=[],C=[],P=[],L=0,F=0,B=0,_=0;if(e.forEach(function(t){if(t instanceof al||t instanceof El&&t.shadowRoot instanceof al){var e=t.__calAutoBasis(!!c||N,k,I),r=e.b,n=e.min,i=e.max;if(c)return void(N?u+=i:u=Math.max(u,i));var a=t.currentStyle,o=t.computedStyle,s=a[jl],h=a[zl],l=a[Vl];D.push(s),w.push(h),L+=s,F+=h,l[1]===cc?(C.push(i),B+=i):l[1]===uc?(o[Vl]=r=l[0],C.push(r),B+=r):l[1]===_c&&(r=o[Vl]=(N?k:I)*l[0]*.01,C.push(r),B+=r),_+=i,P.push(n)}else{if(c)return void(N?u+=t.textWidth:u=Math.max(u,t.textWidth));D.push(0),w.push(1),F+=1,N?(C.push(t.textWidth),B+=t.textWidth,_+=t.textWidth,P.push(t.charWidth)):(t.__layout({x:0,y:0,w:k,h:I},!0),C.push(t.height),B+=t.height,_+=t.height,P.push(t.height))}}),c){var h=this.__width=Math.min(u,k);this.__ioSize(h,this.height)}else{var H=0,G=(N?k:I)<_;e.forEach(function(t,e){var r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M=w[e],A=D[e];n=G?(r=B-(N?k:I),M?C[e]-r*M/F:C[e]):(i=(N?k:I)-B,A?C[e]+i*A/L:C[e]),n=Math.max(n,P[e]),t instanceof al||t instanceof El&&t.shadowRoot instanceof al?(a=t.currentStyle,o=t.computedStyle,s=a[Al],h=a[Kl],l=a[Wl],c=a[Ul],"inline"===s&&(a[Al]=o[Al]="block"),N?("flex"===s&&"column"===h&&R&&c[1]===cc&&(c[0]=I,c[1]=uc),t.__layout({x:S,y:x,w:n,h:I})):("flex"===s&&"row"===h&&l[1]===cc&&(l[0]=k,l[1]=uc),t.__layout({x:S,y:x,w:k,h:n})),(G&&M||!G&&A)&&(u=o[Cl],_=o[Pl],f=o[Sl],d=o[kl],p=o[wl],v=o[Nl],y=o[Ll],g=o[Fl],m=o[xl],E=o[bl],T=o[Dl],O=o[Il],N?(t.__width=n-E-m-O-T-g-y,t.__clientWidth=n-E-m-g-y,b.__offsetWidth=n-E-m,t.__outerWidth=n):(t.__height=n-f-d-p-v-u-_,t.__clientHeight=n-f-d-u-_,b.__offsetHeight=n-f-m,t.__outerHeight=n))):t.__layout({x:S,y:x,w:N?n:k,h:N?I:n}),H=N?(S+=t.outerWidth,Math.max(H,t.outerHeight)):(x+=t.outerHeight,Math.max(H,t.outerWidth))});var l=N?k-S+t.x:I-x+t.y;if(!G&&0===L&&0<l){var f=e.length;if("flex-end"===i)for(var d=0;d<f;d++){var p=e[d];N?p.__offsetX(l,!0):p.__offsetY(l,!0)}else if("center"===i)for(var v=.5*l,y=0;y<f;y++){var g=e[y];N?g.__offsetX(v,!0):g.__offsetY(v,!0)}else if("space-between"===i)for(var m=l/(f-1),E=1;E<f;E++){var T=e[E];N?T.__offsetX(m*E,!0):T.__offsetY(m*E,!0)}else if("space-around"===i)for(var O=l/(f+1),M=0;M<f;M++){var A=e[M];N?A.__offsetX(O*(M+1),!0):A.__offsetY(O*(M+1),!0)}}N?(R&&(H=I),x+=H):s&&(H=k),c||("stretch"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l=t.computedStyle,c=t.currentStyle,u=c[$l],_=c[Wl],f=c[Ul],d=l[Cl],p=l[Pl],v=l[Sl],y=l[kl],g=l[wl],m=l[Nl],E=l[Ll],T=l[Fl],O=l[xl],M=l[bl],A=l[Dl],R=l[Il];N?"flex-start"===u||("center"===u?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===u?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):f[1]===cc&&(n=t.height,i=(t.__height=l[Ul]=H-v-y-g-m-d-p)-n,t.__clientHeight+=i,t.__outerHeight+=i)):"flex-start"===u||("center"===u?0!=(a=H-t.outerWidth)&&t.__offsetX(.5*a,!0):"flex-end"===u?0!=(o=H-t.outerWidth)&&t.__offsetX(o,!0):_[1]===cc&&(s=t.width,h=(t.__width=l[Wl]=H-M-O-R-A-E-T)-s,t.__clientWidth+=h,b.__offsetWidth+=h,t.__outerWidth+=h))}):"center"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R=t.currentStyle[$l];N?"flex-start"===R||("flex-end"===R?0!=(e=H-t.outerHeight)&&t.__offsetY(e,!0):"stretch"===R?(r=t.computedStyle,n=t.currentStyle[Ul],i=r[Cl],a=r[Pl],o=r[Sl],s=r[kl],h=r[wl],l=r[Nl],n[1]===cc&&(c=t.height,u=(t.__height=r[Ul]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(.5*_,!0)):"flex-start"===R||("flex-end"===R?0!=(f=H-t.outerWidth)&&t.__offsetX(f,!0):"stretch"===R?(d=t.computedStyle,p=t.currentStyle[Wl],v=d[Ll],y=d[Fl],g=d[xl],m=d[bl],E=d[Dl],T=d[Il],p[1]===cc&&(O=t.width,M=(t.__width=d[Wl]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,b.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerWidth)&&t.__offsetX(.5*A,!0))}):"flex-end"===a?e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R=t.currentStyle[$l];N?"flex-start"===R||("center"===R?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"stretch"===R?(r=t.computedStyle,n=t.currentStyle[Ul],i=r[Cl],a=r[Pl],o=r[Sl],s=r[kl],h=r[wl],l=r[Nl],n[1]===cc&&(c=t.height,u=(t.__height=r[Ul]=H-o-s-h-l-i-a)-c,t.__clientHeight+=u,t.__outerHeight+=u)):0!=(_=H-t.outerHeight)&&t.__offsetY(_,!0)):"flex-start"===R||("center"===R?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"stretch"===R?(d=t.computedStyle,p=t.currentStyle[Wl],v=d[Ll],y=d[Fl],g=d[xl],m=d[bl],E=d[Dl],T=d[Il],p[1]===cc&&(O=t.width,M=(t.__width=d[Wl]=H-m-g-T-E-v-y)-O,t.__clientWidth+=M,b.__offsetWidth+=M,t.__outerWidth+=M)):0!=(A=H-t.outerHeight)&&t.__offsetY(A,!0))}):e.forEach(function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R=t.currentStyle[$l];N?"flex-start"===R||("center"===R?0!=(e=H-t.outerHeight)&&t.__offsetY(.5*e,!0):"flex-end"===R?0!=(r=H-t.outerHeight)&&t.__offsetY(r,!0):"stretch"===R&&(n=t.computedStyle,i=t.currentStyle[Ul],a=n[Cl],o=n[Pl],s=n[Sl],h=n[kl],l=n[wl],c=n[Nl],i[1]===cc&&(u=t.height,_=(t.__height=t.__height=n[Ul]=H-s-h-l-c-a-o)-u,t.__clientHeight+=_,t.__outerHeight+=_))):"flex-start"===R||("center"===R?0!=(f=H-t.outerWidth)&&t.__offsetX(.5*f,!0):"flex-end"===R?0!=(d=H-t.outerWidth)&&t.__offsetX(d,!0):"stretch"===R&&(p=t.computedStyle,v=t.currentStyle[Wl],y=p[Ll],g=p[Fl],m=p[xl],E=p[bl],T=p[Dl],O=p[Il],v[1]===cc&&(M=t.width,A=(t.__width=p[Wl]=H-E-m-O-T-y-g)-M,t.__clientWidth+=A,b.__offsetWidth+=A,t.__outerWidth+=A)))}));var Y=this.__width=k,W=this.__height=R?I:x-t.y;this.__ioSize(Y,W),this.__marginAuto(r,t)}}},{key:"__layoutInline",value:function(e,r){var n=this,t=this.flowChildren,i=this.computedStyle,a=this.lineGroups;a.splice(0);var o=i[Xl],s=this.__preLayout(e),h=s.fixedWidth,l=s.fixedHeight,c=s.x,u=s.y,_=s.w,f=s.h;if(h&&r)return this.__width=_,void this.__ioSize(_,this.height);var d=0,p=0,v=new sl(c,u);t.forEach(function(t){t instanceof al||t instanceof El&&t.shadowRoot instanceof al?("inline"!==t.currentStyle[Al]&&(t.currentStyle[Al]=t.computedStyle[Al]="inline",Te.error("Inline can not contain block/flex")),c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.outerWidth,d=Math.max(d,p),p=t.outerWidth):(0<=t.__tryLayInline(_-c+e.x,_)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new sl(c,u),d=Math.max(d,p),p=0),c+=t.outerWidth,v.add(t),p+=t.outerWidth)):c===e.x?(v.add(t),t.__layout({x:c,y:u,w:_,h:f},r),c+=t.width,d=Math.max(d,p),p=t.width):(0<=t.__tryLayInline(_-c+e.x)?t.__layout({x:c,y:u,w:_,h:f},r):(a.push(v),r||v.verticalAlign(),c=e.x,u+=v.height,t.__layout({x:e.x,y:u,w:_,h:f},r),v=new sl(c,u),d=Math.max(d,p),p=0),c+=t.width,v.add(t),p+=t.width)}),v.size&&(a.push(v),r||v.verticalAlign(),u+=v.height,d=Math.max(d,p));var y=this.__width=h?_:d,g=this.__height=l?f:u-e.y;this.__ioSize(y,g),!r&&-1<["center","right"].indexOf(o)&&a.forEach(function(t){var e=n.__width-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)})}},{key:"__layoutAbs",value:function(n,i,b){var S=n.sx,x=n.sy,k=n.clientWidth,I=n.clientHeight,t=n.computedStyle,e=this.isDestroyed,r=this.children,a=this.absChildren,o=t[Al],s=t[Cl],h=t[Fl],l=t[Sl],c=t[bl],N=t[Il];e||"none"===o?this.__layoutNone():(S+=c+h,x+=l+s,a.forEach(function(t){if(b){var e=t;if(e instanceof El&&(e=t.shadowRoot),b!==e&&b!==t)return}var r=t.currentStyle,n=t.computedStyle;t.__mp(r,n,k),"inline"===r[Al]&&(r[Al]=n[Al]=t.style.display="block");var i,a,o,s,h,l,c,u,_,f,d,p=r[Yl],v=r[Bl],y=r[Hl],g=r[Gl],m=r[Wl],E=r[Ul],T=r[Al],O=r[Kl];if(p[1]!==cc?(f=!0,n[Yl]=fc(r,"left",p,k)):n[Yl]="auto",y[1]!==cc?(u=!0,n[Hl]=fc(r,"right",y,k)):n[Hl]="auto",v[1]!==cc?(c=!0,n[Bl]=fc(r,"top",v,I)):n[Bl]="auto",g[1]!==cc?(_=!0,n[Gl]=fc(r,"bottom",g,I)):n[Gl]="auto",f&&u?(i=S+n[Yl],o=S+k-n[Hl]-i):f&&m[1]!==cc?(i=S+n[Yl],o=m[1]===uc?m[0]:k*m[0]*.01):u&&m[1]!==cc?(o=m[1]===uc?m[0]:k*m[0]*.01,i=S+k-n[Hl]-o,i-=n[bl],i-=n[xl],i-=n[Il],i-=n[Dl],i-=r[Fl][0],i-=r[Ll][0]):f?i=S+n[Yl]:u?(i=S+k-n[Hl],h=!0):(i=S+N,m[1]!==cc&&(o=m[1]===uc?m[0]:k*m[0]*.01)),c&&_)a=x+n[Bl],s=x+I-n[Gl]-a;else if(c&&E[1]!==cc)a=x+n[Bl],s=E[1]===uc?E[0]:I*E[0]*.01;else if(_&&E[1]!==cc)s=E[1]===uc?E[0]:I*E[0]*.01,a=x+I-n[Gl]-s,a-=n[Sl],a-=n[kl],a-=n[wl],a-=n[Nl],a-=r[Cl][0],a-=r[Pl][0];else if(c)a=x+n[Bl];else if(_)a=x+I-n[Gl],l=!0;else{a=x;for(var M=t.prev;M;){if(M instanceof yn||"absolute"!==M.computedStyle[Ml]){a=M.y+M.outerHeight;break}M=M.prev}M||(a=x),E[1]!==cc&&(s=E[1]===uc?E[0]:I*E[0]*.01)}("block"===T&&void 0===o||"flex"===T&&(void 0===o||"column"===O&&void 0===s))&&(d=!0);var A=h?i-S:k+S-i,R=l?a-x:I+x-a;d&&(t.__layout({x:i,y:a,w:A,h:R},!0,!0),A=t.outerWidth),t.__layout({x:i,y:a,w:A,h:R,w2:o,h2:s},!1,!0),h&&t.__offsetX(-t.outerWidth,!0),l&&t.__offsetY(-t.outerHeight,!0)}),r.forEach(function(t){if(b){var e=t;if(e instanceof El&&(e=t.shadowRoot),b!==e&&b!==t)return}var r;t instanceof u?t.__layoutAbs(dc(t)?t:n,i):t instanceof El&&((r=t.shadowRoot)instanceof u&&r.__layoutAbs(r,i))}))}},{key:"__computeMeasure",value:function(e,r,t,n){rt(et(u.prototype),"__computeMeasure",this).call(this,e,r,t,n),this.children.forEach(function(t){t.__computeMeasure(e,r,!1,n)})}},{key:"render",value:function(t,e,r,n,i){var a=rt(et(u.prototype),"render",this).call(this,t,e,r,n,i);return t===ye.SVG&&(this.virtualDom.type="dom"),a}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),rt(et(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return rt(et(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,n=this.computedStyle;if(!r&&"none"!==n[Al]&&!t.__stopPropagation){var i,a=t.event.type,o=this.listener,s=this.zIndexChildren;o.hasOwnProperty(a)&&(i=o[a]);for(var h=s.length-1;0<=h;h--){var l=s[h];if((l instanceof al||l instanceof El&&l.shadowRoot instanceof al)&&l.__emitEvent(t)){if(t.__stopPropagation)return;return me.isFunction(i)&&!t.__stopImmediatePropagation&&i.call(this,t),!0}}return rt(et(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__cancelCache",value:function(e){rt(et(u.prototype),"__cancelCache",this).call(this,e),e&&this.children.forEach(function(t){(t instanceof al||t instanceof El&&t.shadowRoot instanceof al)&&t.__cancelCache(e)})}},{key:"__deepScan",value:function(e,r){rt(et(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return t instanceof El&&(t=t.shadowRoot),t instanceof yn||"absolute"!==t.currentStyle[Ml]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return t instanceof El&&(t=t.shadowRoot),t instanceof al&&"absolute"===t.currentStyle[Ml]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.y}}]),u}(),yc=p.STYLE_KEY,gc=yc.WIDTH,mc=yc.HEIGHT,Ec=yc.DISPLAY,Tc=yc.BORDER_TOP_WIDTH,Oc=yc.BORDER_RIGHT_WIDTH,Mc=yc.BORDER_LEFT_WIDTH,Ac=yc.BORDER_BOTTOM_WIDTH,Rc=yc.PADDING_TOP,bc=yc.PADDING_LEFT,Sc=yc.BORDER_TOP_LEFT_RADIUS,xc=yc.BORDER_TOP_RIGHT_RADIUS,kc=yc.BORDER_BOTTOM_RIGHT_RADIUS,Ic=yc.BORDER_BOTTOM_LEFT_RADIUS,Nc=yc.VISIBILITY,Dc=p.UPDATE_KEY,wc=Dc.UPDATE_NODE,Cc=Dc.UPDATE_FOCUS,Pc=Dc.UPDATE_IMG,Lc=Dc.UPDATE_CONFIG,Fc=p.NODE_KEY,Bc=Fc.NODE_CACHE,Hc=Fc.NODE_CACHE_TOTAL,Gc=b.AUTO,Yc=mn.canvasPolygon,Wc=mn.svgPolygon,Uc=function(){t(tt,vc);var a=e(tt);function tt(t,e){var r;g(this,tt);var n=(r=a.call(this,t,e)).props.src,i=r.__loadImg={};return n||(i.error=!0),r}return l(tt,[{key:"__preLayout",value:function(t){var e,r,n=rt(et(tt.prototype),"__preLayout",this).call(this,t),i=this.__loadImg;return i.error||(e=this.props.src,(r=Te.IMG[e])&&r.state===Te.LOADED&&(i.url=e,i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),n.fixedWidth&&n.fixedHeight||(i.error&&!this.props.placeholder?n.fixedWidth?n.h=n.w:n.fixedHeight?n.w=n.h:n.w=n.h=32:i.source?n.fixedWidth?n.h=n.w*i.height/i.width:n.fixedHeight?n.w=n.h*i.width/i.height:(n.w=i.width,n.h=i.height):n.w=n.h=0,n.fixedWidth=!0,n.fixedHeight=!0),n}},{key:"__addGeom",value:function(t,e){e=me.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),rt(et(tt.prototype),"__destroy",this).call(this)}},{key:"__calCache",value:function(t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R){var b,S,x,k,I,N=rt(et(tt.prototype),"__calCache",this).call(this,t,e,r,n,i,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R);return N||(b=this.computedStyle,S=this.__loadImg,k=(x=this.props).src,I=x.placeholder,"hidden"!==b[Nc]&&(b[gc]||b[mc])&&(S.error||(S.url===k||I)&&S.source)&&(N=!0)),N}},{key:"render",value:function(t,e,r,n,i){var a=this,o=rt(et(tt.prototype),"render",this).call(this,t,e,r,n,i),s=this.width,h=this.height,l=this.isDestroyed,c=this.props,u=c.src,_=c.placeholder,f=this.computedStyle,d=this.computedStyle,p=d[Ec],v=d[Tc],y=d[Oc],g=d[Ac],m=d[Mc],E=d[Rc],T=d[bc],O=d[Sc],M=d[xc],A=d[kc],R=d[Ic],b=d[Nc],S=this.virtualDom,x=this.__config,k=this.__loadImg;if(t===ye.CANVAS&&i&&(x[Hc]=x[Bc]),k.url===u||k.error||(k.url=u,k.source=null,k.error=null,k.cache=!1,Te.measureImg(u,function(t){var i=a;if(t.url===k.url&&!i.isDestroyed){var e=function(){var e=i.root,t=i.currentStyle,r=t[gc],n=t[mc];e.delRefreshTask(i.__task),r[1]!==Gc&&n[1]!==Gc?e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[wc]=i,t[Cc]=Ao.REPAINT,t[Lc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}}):e.addRefreshTask(i.__task={__before:function(){var t;i.isDestroyed||((t={})[wc]=i,t[Cc]=Ao.REFLOW,t[Pc]=!0,t[Lc]=i.__config,e.__addUpdate(i,i.__config,e,e.__config,t))}})};if(t.success)k.source=t.source,k.width=t.width,k.height=t.height;else{if(_)return void Te.measureImg(_,function(t){t.success&&(k.error=!0,k.source=t.source,k.width=t.width,k.height=t.height,e())});k.error=!0}"none"!==f[Ec]&&e()}},{width:s,height:h})),l||"none"===p||"hidden"===b)return o;var I,N,D=x[Bc];if(i&&D&&D.enabled&&(r=D.ctx),I=o.x2+T,N=o.y2+E,k.error&&!_&&tt.showError){var w=.02*Math.min(s,h),C=I+.7*s,P=N+.3*h,L=5*w,F=[[I+.15*s,N+.7*h],[I+.3*s,N+.4*h],[I+.5*s,N+.6*h],[I+.6*s,N+.5*h],[I+.9*s,N+.8*h],[I+.15*s,N+.8*h]];if(t===ye.CANVAS){r.strokeStyle="#CCC",r.lineWidth=w,r.fillStyle="#DDD",r.beginPath(),r.moveTo(I,N),r.lineTo(I+s,N),r.lineTo(I+s,N+h),r.lineTo(I,N+h),r.lineTo(I,N),r.stroke(),r.closePath(),r.beginPath(),r.arc(C,P,L,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(F[0][0],F[0][1]);for(var B=1,H=F.length;B<H;B++){var G=F[B];r.lineTo(G[0],G[1])}r.lineTo(F[0][0],F[0][1]),r.fill(),r.closePath()}else if(t===ye.SVG){this.__addGeom("rect",[["x",I],["y",N],["width",s],["height",h],["stroke","#CCC"],["stroke-width",w],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",C],["cy",P],["r",L],["fill","#DDD"]]);for(var Y="",W=0,U=F.length;W<U;W++){var X=F[W];W&&(Y+=" "),Y+=X[0]+","+X[1]}this.__addGeom("polygon",[["points",Y],["fill","#DDD"]])}}else if((k.url===u||_)&&k.source){var K=k.source;if(K){var V,z,j,$=li.calRadius(I,N,s,h,v,y,g,m,O,M,A,R);if(t===ye.CANVAS)$?(r.save(),r.beginPath(),Yc(r,$),r.clip(),r.closePath(),r.drawImage(K,I,N,s,h),r.restore()):r.drawImage(K,I,N,s,h);else if(t===ye.SVG){if(k.cache)return k.cache.cache=!0,S.children=[k.cache],void(!S.cache&&$&&(V=Wc($),z=n.add({tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",V],["fill","#FFF"]]}]}),S.conClip="url(#"+z+")"));s===k.width&&h===k.height||(j=pi.matrixResize(k.width,k.height,s,h,I,N,s,h));var q,Z,J=[["xlink:href",k.error?_:u],["x",I],["y",N],["width",k.width],["height",k.height]];$&&(q=Wc($),Z=n.add({tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",q],["fill","#FFF"]]}]}),S.conClip="url(#"+Z+")",delete S.cache),j&&!me.equalArr(j,[1,0,0,1,0,0])&&J.push(["transform","matrix("+me.joinArr(j,",")+")"]);var Q={type:"img",tagName:"image",props:J};S.children=[Q],k.cache=Q}}}return o}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source&&this.__loadImg.url!==this.props.src)return rt(et(tt.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"baseLine",get:function(){return this.height}}]),tt}();c(Uc,"showError",!0);var Xc,Kc,Vc,zc=function(){function e(t){g(this,e),this.id=t,this.count=0,this.list=[]}return l(e,[{key:"add",value:function(t){return t.uuid="karas-defs-"+this.id+"-"+this.count++,this.list.push(t),t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),jc=p.STYLE_KEY,$c=jc.DISPLAY,qc=jc.MARGIN_TOP,Zc=jc.MARGIN_LEFT,Jc=jc.PADDING_TOP,Qc=jc.PADDING_LEFT,tu=jc.WIDTH,eu=jc.HEIGHT,ru=jc.BORDER_TOP_WIDTH,nu=jc.BORDER_RIGHT_WIDTH,iu=jc.BORDER_BOTTOM_WIDTH,au=jc.BORDER_LEFT_WIDTH,ou=jc.FILL,su=jc.STROKE,hu=jc.STROKE_MITERLIMIT,lu=jc.STROKE_WIDTH,cu=jc.STROKE_LINECAP,uu=jc.STROKE_LINEJOIN,_u=jc.STROKE_DASHARRAY,fu=jc.STROKE_DASHARRAY_STR,du=jc.FILL_RULE,pu=jc.VISIBILITY,vu=p.NODE_KEY,yu=vu.NODE_CACHE_PROPS,gu=vu.NODE_CURRENT_PROPS,mu=vu.NODE_CURRENT_STYLE,Eu=vu.NODE_IS_MASK,Tu=vu.NODE_STYLE,Ou=vu.NODE_CACHE,Mu=vu.NODE_CACHE_TOTAL,Au=vu.NODE_CACHE_FILTER,Ru=vu.NODE_CACHE_MASK,bu=vu.NODE_CACHE_OVERFLOW,Su=b.AUTO,xu=b.PX,ku=b.PERCENT,Iu=me.int2rgba,Nu=me.isNil,Du={},wu=function(){t(x,al);var s=e(x);function x(t,e){var r;g(this,x),(r=s.call(this,t,e)).__isMulti=!!r.props.multi,r.__isClip=!!r.props.clip,r.__isMask=r.__isClip||!!r.props.mask;var n=h(r),i=n.style,a=n.isMask;a&&(i.background=null,i.border=null,i.strokeWidth=0,i.stroke=null),r.__style=Qr.normalize(r.style,Rt.DOM_ENTRY_SET.concat(Rt.GEOM_ENTRY_SET)),r.__currentStyle=me.extend({},r.__style),r.__currentProps=me.clone(r.props);var o=r.__config;return o[yu]=r.__cacheProps={},o[gu]=r.__currentProps,o[mu]=r.__currentStyle,o[Eu]=a,o[Tu]=r.__style,r}return l(x,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle[tu];return r[1]===xu?t-r[0]:r[1]===ku?t-e*r[0]*.01:t}},{key:"__calAutoBasis",value:function(t){var e,r,n=0,i=0,a=0,o=this.currentStyle,s=(this.computedStyle,o[tu]),h=o[eu],l=o[ru],c=o[nu],u=o[iu],_=o[au],f=t?s:h;return f[1]!==Su&&(n=a+=f[0]),t?(n+=e=c[0]+_[0],a+=e,i+=e):(n+=r=l[0]+u[0],a+=r,i+=r),{b:n,min:i,max:a}}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),n=r.fixedWidth,i=r.fixedHeight,a=r.w,o=r.h;this.__height=i?o:0,e?this.__width=n?a:0:(this.__width=a,this.__ioSize(a,this.height),this.__marginAuto(this.currentStyle,t),this.__config[yu]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,n=e.fixedHeight,i=e.x,a=e.y,o=e.w,s=e.h,h=this.__width=r?o:i-t.x,l=this.__height=n?s:a-t.y;this.__ioSize(h,l),this.__config[yu]=this.__cacheProps={}}},{key:"__calCache",value:function(r,t,n,i,e,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R){var b,S=this;return rt(et(x.prototype),"__calCache",this).call(this,r,t,n,i,e,a,o,s,h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A,R),[su,ou].forEach(function(t){var e;Nu(a[t])&&(e=o[t],!(s[t]=e)||"linear"!==e.k&&"radial"!==e.k?a[t]=Iu(o[t]):a[t]=S.__gradient(r,n,i,m,M,E,A,c,u,e))}),Nu(a[lu])&&(a[lu]=!0,(b=o[lu])[1]===xu?s[lu]=b[0]:b[1]===ku?s[lu]=b[0]*this.width*.01:s[lu]=0),Nu(a[_u])&&(a[_u]=!0,s[_u]=o[_u],a[fu]=me.joinArr(o[_u],",")),[cu,uu,hu,du].forEach(function(t){s[t]=o[t]}),"hidden"!==s[pu]}},{key:"__preSet",value:function(){var t=this.sx,e=this.sy,r=this.width,n=this.height,i=this.__cacheStyle,a=this.computedStyle,o=a[ru],s=a[au],h=a[$c],l=a[qc],c=a[Zc],u=a[Jc],_=a[Qc],f=a[pu],d=t+s+c+_,p=e+o+l+u,v=d+.5*r,y=p+.5*n,g=i[ou],m=i[su],E=i[fu],T=a[lu],O=a[cu],M=a[uu],A=a[hu];return{x:t,y:e,originX:d,originY:p,cx:v,cy:y,display:h,stroke:m,strokeWidth:T,strokeDasharray:a[_u],strokeDasharrayStr:E,strokeLinecap:O,strokeLinejoin:M,strokeMiterlimit:A,fill:g,visibility:f,fillRule:a[du]}}},{key:"__preSetCanvas",value:function(t,e,r){var n=r.stroke,i=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,l=r.fill;t===ye.CANVAS&&(e.fillStyle!==l&&(e.fillStyle=l),e.strokeStyle!==n&&(e.strokeStyle=n),e.lineWidth!==i&&(e.lineWidth=i),e.lineCap!==o&&(e.lineCap=o),e.lineJoin!==s&&(e.lineJoin=s),e.miterLimit!==h&&(e.miterLimit=h),me.isFunction(e.getLineDash)&&me.equalArr(e.getLineDash(),a)||e.setLineDash(a))}},{key:"render",value:function(t,e,r,n){var i=this.__renderSelfData||rt(et(x.prototype),"render",this).call(this,t,e,r,n),a=this[Ou],o=this[Mu],s=this[Au],h=this[Ru],l=this[bu];if(e<Ao.REPAINT&&(o&&o.available||a&&a.available||!Ao.contain(e,Ao.FILTER)&&s||h||l)&&(i.break=!0),t===ye.SVG&&(this.virtualDom.type="geom"),i.break)return i;var c=this.__preSet(t,r,n),u=i.x2,_=i.y2,f=c.originX,d=c.originY,p=this.computedStyle;return u+=p[Qc],_+=p[Jc],c.dx=u-f,c.dy=_-d,this.__preSetCanvas(t,r,c),Object.assign(i,c)}},{key:"__propsStrokeStyle",value:function(t,e,r,n,i){e&&t.push(["stroke-dasharray",e]),"butt"!==r&&t.push(["stroke-linecap",r]),"miter"!==n&&t.push(["stroke-linejoin",n]),4!==i&&t.push(["stroke-miterlimit",i])}},{key:"__cancelCache",value:function(t){rt(et(x.prototype),"__cancelCache",this).call(this,t),this.__config[yu]=this.__cacheProps={}}},{key:"__releaseWhenEmpty",value:function(){}},{key:"addGeom",value:function(t,e){e=me.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return Nu(e)?this["__"+t]:e}},{key:"baseLine",get:function(){return this.__height}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"getRegister",value:function(t){if(!Du.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return Du[t]}},{key:"register",value:function(t,e){if(x.hasRegister(t))throw new Error("Geom has already register: ".concat(t));Du[t]=e}},{key:"hasRegister",value:function(t){return Du.hasOwnProperty(t)}}]),x}(),Cu=p.NODE_KEY,Pu=Cu.NODE_COMPUTED_STYLE,Lu=Cu.NODE_DOM_PARENT,Fu=Cu.NODE_MATRIX_EVENT,Bu=Cu.NODE_STRUCT,Hu=k.TYPE_VD,Gu=k.TYPE_GM,Yu=k.TYPE_CP,Wu=[],Uu=[],Xu={};function Ku(t){t instanceof Kc&&t.children.forEach(function(t){t instanceof Kc?Ku(t):t instanceof Vc&&t.__hasUpdate&&(t.__hasUpdate=!1,Vu(t,t.props))})}function Vu(t,e,r){(t.__nextState||r)&&(!me.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state))?function(t,e,r){t.props=e,t.__state=r,t.__nextState=null;var n=t.shadow,i=t.shadowRoot,a=t.__cd,o=pl.flattenJson(t.render());(function(t,e,r){var o=qu(e,{},t),s=qu(r,{}),h=[],l=[];Object.keys(o).forEach(function(t){var e=o[t];s[t]||(e.json.key=Xu)}),Object.keys(s).forEach(function(t){var e,r,n,i=o[t],a=s[t];i?(e=i.json,r=a.json,n=i.vd,e.$$type===Yu&&r.$$type===Yu?e.klass===r.klass&&($u(e,r,n),e.key=r.key=Xu,l.push(n)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===Gu&&e.props.multi!==r.props.multi||(r.inherit=n),e.key=r.key=Xu,r.$$type===Hu&&h.push({vd:n,oj:e,nj:r}))):a.json.key=Xu}),h.forEach(function(t){ju(t.vd,t.oj,t.nj)}),zu(t,e,r),l.forEach(function(t){Zu(t)})})(n,a,o),t.__init(o);var s=t.shadowRoot;s instanceof Xc?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sy1","__sy2","__sy3","__sy4","__computedStyle"].forEach(function(t){s[t]=i[t]}),s.__config[Pu]=i.computedStyle):s.__config[Fu]=i.__config[Fu];["__x","__y","__width","__height","__sx1","__layoutData","__parent","__domParent"].forEach(function(t){s[t]=i[t]}),s.__config[Lu]=i.domParent,s.__config[Bu]=i.__config[Bu],Wu.push(t),me.isObject(o)&&o.placeholder||Uu.push(n);o&&o.placeholder&&delete o.placeholder}(t,e,t.__nextState||t.state):Ku(t.shadowRoot)}function zu(t,e,r){if(me.isObject(r))if(r.$$type===Yu){if(r.key===Xu)return;e.$$type===r.$$type&&e.klass===r.klass&&($u(e,r,t),Zu(t))}else r.$$type===Gu&&e.$$type===Gu?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.inherit=t):r.$$type===Hu&&e.$$type===Hu&&(e.tagName===r.tagName&&(r.inherit=t),ju(t,e,r))}function ju(t,e,r){for(var n=e.children,i=r.children,a=n.length,o=i.length,s=t.children,h=0,l=0,c=0,u=Math.min(a,o);h<u;h++){var _=n[h+l],f=i[h+c];_.key===Xu&&f.key===Xu||(_.key===Xu?(l++,h--,a--,u=Math.min(a,o)):f.key===Xu?(c++,h--,o--,u=Math.min(a,o)):zu(s[h+l],_,f))}}function $u(i,a,o){a.placeholder=!0;var s=(a.value=o).shadowRoot,h={};Object.keys(i.props).forEach(function(t){var e=i.props[t];h[t]=e}),Object.keys(a.props).forEach(function(t){var e,r,n=a.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=n,(e=h[t])?(delete h[t],e!==n&&(t=t.slice(2).toLowerCase(),s.listener[t]=n)):(t=t.slice(2).toLowerCase(),s.listener[t]=n)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=n,(r=h[t])?(delete h[t],r!==n&&(t=t.slice(2).toLowerCase(),o.off(t,h[t]),o.on(t,n)),delete h[t]):(t=t.slice(2).toLowerCase(),o.on(t,n)))}),Object.keys(h).forEach(function(t){var e=h[t];/^on[a-zA-Z]/.test(t)?(a.props[t]=e,t=t.slice(2).toLowerCase(),delete s.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(a.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),Vu(o,a.props,!me.equal(i.props,a.props))}function qu(t,r,n){var e;return Array.isArray(t)?t.forEach(function(t,e){return qu(t,r,n&&n[e])}):me.isObject(t)&&(t.$$type!==Hu&&t.$$type!==Gu&&t.$$type!==Yu||(t.$$type===Hu&&qu(t.children,r,n&&n.children),e=t.props.key,me.isNil(e)||""===e||(r.hasOwnProperty(e)&&Te.error("Component "+n.tagName+" has duplicate key: "+e),r[e]={json:t,vd:n}))),r}function Zu(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var Ju,Qu={ref:function(t){Xc=t.Xom,Kc=t.Dom,t.Img,t.Geom,Vc=t.Component},updateList:Wu,check:Ku,checkCp:Vu,did:function(){Wu.forEach(function(t){me.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),Wu.splice(0),Uu.forEach(function(t){t.__destroy()}),Uu=[]}},t_=me.joinVd,e_=me.joinDef,r_=Ao.contain,n_=Ao.NONE,i_=Ao.TRANSFORM_ALL,a_=Ao.OPACITY,o_=Ao.FILTER,s_=Ao.MIX_BLEND_MODE;function h_(t,e,r){var n=t.childNodes;!function(t,e,r){for(var n=e.length,i=r.length,a=0,o=t.childNodes;a<Math.min(n,i);a++)!function(e,t,r){if(t.tagName!==r.tagName)E_(e,"beforebegin",e_(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=ve(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=ve(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)});for(var d=e.childNodes,p=t.children.length,v=r.children.length,y=0;y<Math.min(p,v);y++)p_(e,y,t.children[y],r.children[y]);if(y<p)for(var g=p-1;y<=g;g--)m_(e,d,g);else if(y<v)for(;y<v;y++)g_(e,d,y,t_(r.children[y]))}}(o[a],e[a],r[a]);if(a<n)for(var s=n-1;a<=s;s--)m_(t,o,s);else if(a<i)for(;a<i;a++)g_(t,o,a,e_(r[a]))}(n[0],e.defs,r.defs),r.hasOwnProperty("lv")||d_(n[1],e.bb,r.bb,e.bbClip,r.bbClip),__(t,e,r,!0)}function l_(t,e,r){"dom"===e.type?"dom"===r.type?__(t,e,r):"geom"===r.type?f_(t,e,r):y_(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var n=e.children.length,i=r.children.length,a=0;a<Math.min(n,i);a++)p_(t,a,e.children[a],r.children[a],!0);var o=t.childNodes;if(a<n)for(var s=n-1;a<=s;s--)m_(t,o,s);else if(a<i)for(;a<i;a++)g_(t,o,a,t_(r.children[a]))}(t,e,r):y_(t,r):"geom"===e.type?"dom"===r.type?f_(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return;if(r.hasOwnProperty("lv"))u_(t,0,r,r.lv);else{c_(t,e,r),d_(t.firstChild,e.bb,r.bb,e.bbClip,r.bbClip);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)p_(o,a,e.children[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)m_(o,s,h);else if(a<i)for(;a<i;a++)g_(o,s,a,t_(r.children[a]))}}(t,e,r):y_(t,r):"img"===e.type&&("img"===r.type?v_(t,e,r):y_(t,r))}function c_(t,e,r){var n=r.transform,i=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,h=r.filter,l=r.conClip;e.transform!==n&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),e.opacity!==i&&(1!==i&&void 0!==i?t.setAttribute("opacity",i):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==h&&(h?t.setAttribute("filter",h):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==l&&(l?t.childNodes[1].setAttribute("clip-path",l):t.childNodes[1].removeAttribute("clip-path"))}function u_(t,e,r,n){var i,a,o,s,h;n!==n_&&(i=r.transform,a=r.opacity,o=r.mask,s=r.filter,h=r.mixBlendMode,r_(n,i_)&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),r_(n,a_)&&(1!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),r_(n,o_)&&(s?t.setAttribute("filter",s):t.removeAttribute("filter")),r_(n,s_)&&(h?t.setAttribute("style","mix-blend-mode:"+h):t.removeAttribute("style")),o?t.setAttribute("mask",o):t.removeAttribute("mask"))}function __(t,e,r,n){if(r.cache)u_(t,0,r,r.lv);else{r.hasOwnProperty("lv")?u_(t,0,r,r.lv):(c_(t,e,r),n||d_(t.firstChild,e.bb,r.bb,e.bbClip,r.bbClip));for(var i=e.children.length,a=r.children.length,o=0,s=t.lastChild,h=s.childNodes;o<Math.min(i,a);o++)l_(h[o],e.children[o],r.children[o]);if(o<i)for(var l=i-1;o<=l;l--)m_(s,h,l);else if(o<a)for(;o<a;o++)g_(s,h,o,t_(r.children[o]))}}function f_(t,e,r){c_(t,e,r),d_(t.firstChild,e.bb,r.bb,e.bbClip,r.bbClip);for(var n=e.children.length,i=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(n,i);a++)y_(s[a],r.children[a]);if(a<n)for(var h=n-1;a<=h;h--)m_(o,s,h);else if(a<i)for(;a<i;a++)g_(o,s,a,t_(r.children[a]))}function d_(t,e,r,n,i){var a=e.length,o=r.length;n!==i&&(i?t.setAttribute("clip-path",i):t.removeAttribute("clip-path"));for(var s=0;s<Math.min(a,o);s++)p_(t,s,e[s],r[s]);var h=t.childNodes;if(s<a)for(var l=a-1;s<=l;l--)m_(t,h,l);else if(s<o)for(;s<o;s++)g_(t,h,s,t_(r[s]))}function p_(t,e,r,n,i){var a=t.childNodes;r.tagName!==n.tagName?y_(a[e],n):(v_(a[e],r,n),i&&r.content!==n.content&&(a[e].innerHTML=n.content))}function v_(e,t,r){if(!r.cache){for(var n={},i=0,a=(t.props||[]).length;i<a;i++){var o=ve(t.props[i],2),s=o[0],h=o[1];n[s]=h}for(var l=0,c=(r.props||[]).length;l<c;l++){var u=ve(r.props[l],2),_=u[0],f=u[1];n.hasOwnProperty(_)?(n[_]!==f&&e.setAttribute(_,f),delete n[_]):e.setAttribute(_,f)}Object.keys(n).forEach(function(t){e.removeAttribute(t)})}}function y_(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=t_(t)})):r=t_(e),E_(t,"beforebegin",r),t.parentNode.removeChild(t)}function g_(t,e,r,n){r>=e.length?E_(t,"beforeend",n):E_(e[r],"beforebegin",n)}function m_(t,e,r){e[r]&&t.removeChild(e[r])}function E_(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(Ju=Ju||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(Ju.childNodes[0],t)}}var T_=me.isFunction,O_=function(){function t(){g(this,t),this.__records=[],this.__auto=[],this.__list=[]}return l(t,[{key:"add",value:function(t){-1===this.__list.indexOf(t)&&this.list.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);-1<e&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__auto=[],this.__list=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(t){var o=this,e=0<arguments.length&&void 0!==t?t:this.__records;e.length&&e.splice(0).forEach(function(t){var e,r,n,i=t.target,a=t.animate;Array.isArray(a)?a.forEach(function(t){var e=t.value,r=t.options;r.autoPlay=!1;var n=i.animate(e,r);o.add(n)}):(e=a.value,(r=a.options).autoPlay=!1,n=i.animate(e,r),o.add(n))})}},{key:"__playAuto",value:function(){this.init(this.__auto),this.__action("play")}},{key:"play",value:function(e){this.init();var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,T_(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,T_(e)&&e(t))}])}},{key:"cancel",value:function(e){var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,T_(e)&&e(t))}])}},{key:"finish",value:function(e){var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,T_(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndStop",[t,e,r&&function(t){n&&(n=!1,T_(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.init();var n=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){n&&(n=!1,T_(r)&&r(t))}])}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"list",get:function(){return this.__list}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),M_=p.STYLE_KEY,A_=M_.POSITION,R_=M_.DISPLAY,b_=M_.OPACITY,S_=M_.VISIBILITY,x_=M_.FILTER,k_=M_.OVERFLOW,I_=M_.MIX_BLEND_MODE,N_=M_.FILL,D_=M_.TRANSFORM,w_=M_.TRANSFORM_ORIGIN,C_=p.NODE_KEY,P_=C_.NODE_CACHE,L_=C_.NODE_CACHE_TOTAL,F_=C_.NODE_CACHE_OVERFLOW,B_=C_.NODE_CACHE_MASK,H_=C_.NODE_CACHE_FILTER,G_=C_.NODE_MATRIX,Y_=C_.NODE_MATRIX_EVENT,W_=C_.NODE_OPACITY,U_=C_.NODE_COMPUTED_STYLE,X_=C_.NODE_CURRENT_STYLE,K_=C_.NODE_LIMIT_CACHE,V_=C_.NODE_BLUR_VALUE,z_=C_.NODE_REFRESH_LV,j_=C_.NODE_HAS_CONTENT,$_=C_.NODE_CACHE_STYLE,q_=p.STRUCT_KEY,Z_=q_.STRUCT_NODE,J_=q_.STRUCT_INDEX,Q_=q_.STRUCT_TOTAL,tf=q_.STRUCT_HAS_MASK,ef=q_.STRUCT_LV,rf=Ao.TRANSFORM_ALL,nf=Ao.OPACITY,af=Ao.FILTER,of=Ao.REPAINT,sf=Ao.contain,hf=Ao.MIX_BLEND_MODE;function lf(t,x,e,r,k,I){var N={},D=t.__sx1,w=t.__sy1,n=t.__config,i=n[P_],a=n[V_],C=i&&i.available?i.bbox.slice(0):t.bbox,P=[e],L=c({},e,a);for(I[e]=1;P.length;)P.splice(0).forEach(function(t){for(var e,r,n=t+1,i=t+(x[t][Q_]||0)+1;n<i;n++){var a,o,s,h,l,c,u,_=x[n],f=_[Z_],d=_[Q_],p=f.__sx1,v=f.__sy1,y=f.__config,g=y[V_],m=y[K_],E=y[P_],T=y[L_],O=y[U_],M=O[R_],A=O[S_],R=O[D_],b=O[w_],S=O[b_];if(m)return;"none"!==M?"hidden"!==A&&(k[n]=t,I[n]=I[t]*S,a=void 0,s=o=0,T&&T.available?(n+=d||0,a=T.bbox.slice(0),o=T.dbx,s=T.dby):E&&E.available?(a=E.bbox.slice(0),o=E.dbx,s=E.dby):a=f.bbox,a&&(u=N[t],h=(L[t]||0)+(g||0),R&&!ge.isE(R)&&((l=b.slice(0))[0]+=p-D+o,l[1]+=v-w+s,c=Vn.calMatrixByOrigin(R,l),u=u?ge.multiply(u,c):c),u&&(N[n]=u),a=me.transformBbox(a,u,h,h),d&&(L[n]=h,P.push(n)),C?(r=a,(e=C)[0]=Math.min(e[0],r[0]),e[1]=Math.min(e[1],r[1]),e[2]=Math.max(e[2],r[2]),e[3]=Math.max(e[3],r[3])):C=a)):n+=d||0}});if(!(C[2]-C[0]>Ho.MAX||C[3]-C[1]>Ho.MAX))return C;n[K_]=!0}var cf,uf={renderCacheCanvas:function(tt,et,rt,t){for(var m,E,nt=t.__structs,it=t.width,at=t.height,T=[],O=[],M=1,A=[],R=0,b=0,e=nt.length;b<e;b++)(function(t){var e,r,n,i,a,o,s,h,l,c=nt[t],u=c[Z_],_=c[ef],f=c[Q_],d=u.__config,p=d[z_],v=d[P_],y=d[L_],g=d[U_];u instanceof yn?b=t:(0===t?A.push(u):R<_?(m=E[Y_],ge.isE(m)&&(m=null),T.push(m),M=E[W_],O.push(M),A.push(u)):_<R&&(e=R-_,T.splice(-e),m=T[_],O.splice(-e),M=O[_],A.splice(-e),E=A[_]),"none"===g[R_]?b=t+=f||0:(p<of?(r=d[X_],n=d[U_],i=d[$_],sf(p,rf)&&(a=u.__calMatrix(p,i,r,n),o=d[G_],a&&o&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5]),m&&a&&(a=ge.multiply(m,a)),(o=d[Y_])&&a&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5])),sf(p,nf)&&(s=n[b_]=r[b_],d[W_]=M*s),sf(p,af)&&(h=n[x_]=r[x_],d[V_]=0,Array.isArray(h)&&h.forEach(function(t){var e=ve(t,2),r=e[0],n=e[1];"blur"===r&&(d[V_]=n)}),l=u.bbox,v=v?Ho.updateCache(v,l):Ho.getInstance(l),(d[P_]=v).enabled||Te.warn("Downgrade for cache-filter change error")),sf(p,hf)&&(n[I_]=r[I_]),y&&y.available&&(t+=f||0)):u instanceof wu?(u.__renderSelfData=u.__renderSelf(tt,p,et,rt,!0),(v=d[P_])&&v.available&&u.render(tt,p,v.ctx,rt,!0)):u.render(tt,p,et,rt,!0),E=d,R=_,b=t))})(b);var r,n,i,a,o,s,h,l,c,u,_=function(f){for(var d=[0],p={0:{i:0}};d.length;)d.splice(0).forEach(function(t){for(var e,r=f[t],n=p[t],i=t+1,a=i+(r[Q_]||0);i<a;i++){var o,s,h=f[i],l=h[Z_],c=h[Q_],u=l.__config,_=u[L_];"none"!==u[U_][R_]?(o={i:i},s=s||o,e&&(o.p=e),e=o,l instanceof yn||!c||(_&&_.available||(p[i]=o,d.push(i)),i+=c||0)):i+=c||0}n&&e&&(n.p&&(s.p=n.p),n.p=e)});for(var t=p[0],e=[];t;)e.push(t.i),t=t.p;return e.reverse()}(nt);if(_.length)for(var f=Math.max(1,Ho.NUM),d=nt[_[0]][ef],p={},v=0,y=_.length-1;v<y;v++){var g=nt[_[v]],S=g[Z_],x=g[ef],k=g[J_],I=g[tf],N=g[Q_],D=S.__config,w=D[U_],C=w[A_],P=w[S_],L=w[k_],F=w[I_];if(S instanceof yn)d=x,"hidden"!==P&&(p[x-1]=p[x-1]||0,p[x-1]++);else{var B,H=D[j_],G=D[V_],Y=D[K_],W=D[L_],U=D[P_],X=void 0;if(x<d?("hidden"!==P&&H&&(p[x]=p[x]||0,p[x]++),B=p[x]||0,p[x]=0,p[x-1]=p[x-1]||0,!Y&&(f<=B||("relative"===C||"absolute"===C)&&(H||B)||(I||0<G||"visible"!==L||"normal"!==F)&&(H||B))?(p[x-1]++,X=!0):p[x-1]+=B):(p[x-1]=p[x-1]||0,!Y&&(("relative"===C||"absolute"===C)&&H&&"hidden"!==P||W&&W.available||(I||0<G||"visible"!==L||"normal"!==F)&&H&&"hidden"!==P||W&&W.available)?(p[x-1]++,X=!0):(H&&"hidden"!==P||W&&W.available)&&p[x-1]++),d=x,X){if(W&&W.available)continue;if(!(W=D[L_]=function(t,e,r,n,i,a,o){if(0===n)return e.__config[L_]=o;var s={},h={},l={},c=lf(e,i,r,0,s,l);if(c&&(a?a.reset(c):a=e.__config[L_]=Ho.getInstance(c),a&&a.enabled)){var u=e.__sx1,_=e.__sy1;a.__appendData(u,_),a.__available=!0;var f=a,d=ve(f.coords,2),p=d[0],v=d[1],y=f.ctx,g=f.dbx,m=f.dby;o&&o.available&&(y.globalAlpha=1,y.setTransform(1,0,0,1,0,0),Ho.drawCache(o,a));for(var E=r+1,T=r+(n||0)+1;E<T;E++){var O,M,A,R,b,S,x,k,I,N=i[E],D=N[Z_],w=N[Q_],C=D.__config,P=C[P_],L=C[L_],F=C[H_],B=C[B_],H=C[F_],G=C[U_],Y=G[R_],W=G[S_],U=G[D_],X=G[w_],K=G[I_];"none"!==Y?"hidden"!==W&&(k=h[O=s[E]],M=l[E],D instanceof yn?(y.globalAlpha=l[O],A=h[O]||[1,0,0,1,0,0],y.setTransform(A[0],A[1],A[2],A[3],A[4],A[5]),D.render(t,0,y,null,p-u+g,v-_+m)):(U&&!ge.isE(U)&&(R=X.slice(0),P&&P.available?(R[0]+=P.sx1,R[1]+=P.sy1):(R[0]+=D.__sx1,R[1]+=D.__sy1),b=-u+g+p,S=-_+m+v,R[0]+=b,R[1]+=S,x=Vn.calMatrixByOrigin(U,R),k=k?ge.multiply(k,x):x),k&&(h[E]=k),(I=(I=H||B||F)||(L&&L.available?L:null))?E+=w||0:P&&P.available&&(I=P),I&&(y.globalCompositeOperation="normal"!==K?"source-over":K.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()}),y.globalAlpha=M,k?y.setTransform(k[0],k[1],k[2],k[3],k[4],k[5]):y.setTransform(1,0,0,1,0,0),Ho.drawCache(I,a)))):E+=w||0}return a}}(tt,S,k,N||0,nt,W,U)))continue;var K=W;0<G&&(c=W,u=G,K=S.__config[H_]=Ho.genBlur(c,u)),I&&(a=K,o=(i=S).next.isClip,l=h=s=void 0,s=i.computedStyle,h=s[D_],l=s[w_],K=i.__config[B_]=Ho.genMask(a,i.next,o,h,l)),"hidden"===L&&(n=K,(r=S).__config[F_]=Ho.genOverflow(n,r))}}}for(var ot={},st={},ht={},lt={},ct={},ut=0,V=nt.length;ut<V;ut++)(function(s){var t=nt[s],e=t[Z_],r=t[Q_],n=t[tf],i=e.__config,a=i[W_],o=i[Y_],h=i[V_],l=i[K_],c=i[P_],u=i[L_],_=i[H_],f=i[B_],d=i[F_],p=i[z_],v=i[U_],y=v[R_],g=v[S_],m=v[k_],E=v[I_];if(e instanceof yn)et.globalAlpha=a,et.setTransform(o[0],o[1],o[2],o[3],o[4],o[5]),e.render(tt,0,et,rt);else{var T,O,M,A,R=d||f||_;if(R=R||(u&&u.available?u:null)){if("none"===y)return ut=s+=r||0;if(et.globalCompositeOperation="normal"===E?"source-over":E.replace(/[A-Z]/,function(t){return ut=s,"-"+t.toLowerCase()}),n){for(var b=s+(r||0)+1;n--;)b+=(nt[b][Q_]||0)+1;s=b-1}s+=r||0,Ho.draw(et,a,o,R),et.globalCompositeOperation="source-over"}else{if(lt.hasOwnProperty(s)&&(et=lt[s].ctx),c&&c.available){if("none"===y)return ut=s+=r||0;var S,x,k,I,N,D,w,C={};if(!h||(I=Te.getCacheCanvas(it,at)).ctx&&(S={ctx:et,blur:h,target:I},et=I.ctx,C.offScreenFilter=S),n){for(var P,L=s+(r||0)+1;n--;)L+=(nt[L][Q_]||0)+1;s=L-1,S?x=S:(P=Te.getCacheCanvas(it,at)).ctx&&(x={ctx:et,target:P},et=P.ctx),C.offScreenMask=x}"hidden"===m&&(S||x?k=S||x:(N=Te.getCacheCanvas(it,at)).ctx&&(k={ctx:et,target:N},et=N.ctx),C.offScreenOverflow=k),"normal"!==E&&(S||x||k?w=S||x||k:(D=Te.getCacheCanvas(it,at),w={ctx:et,target:D,mixBlendMode:E},et=D.ctx),C.offScreenBlend=w),"hidden"!==g&&Ho.draw(et,a,o,c)}else if(l){if(C=e instanceof wu?e.__renderSelfData=e.__renderSelf(tt,p,et,rt):e.render(tt,p,et,rt),"none"===y)return ut=s+=r||0;var F,B,H,G=C||{},Y=G.offScreenFilter,W=G.offScreenMask,U=G.offScreenOverflow,X=G.offScreenBlend;if(Y&&((ot[F=s+(r||0)]=ot[F]||[]).unshift(Y),et=Y.target.ctx),W){for(var K,V,z=s+(r||0)+1;n--;){var j=nt[z],$=j[Q_],q=j[Z_].currentStyle,Z=q[R_],J=q[S_];"none"!==Z?("hidden"!==J&&(K?V=z:K=V=z),z++):z+=($||0)+1}var Q=Te.getCacheCanvas(it,at);lt[K]=Q,ct[V]={mask:Q,offScreenMask:W,isClip:nt[K][Z_].isClip},et=W.target.ctx}X&&((ht[B=s+(r||0)]=ht[B]||[]).unshift(X),et=X.target.ctx),U&&((st[H=s+(r||0)]=st[H]||[]).unshift(U),et=U.target.ctx),e instanceof wu&&e.render(tt,e.__refreshLevel,et,rt)}ot.hasOwnProperty(s)&&ot[s].forEach(function(t){var e,r=Te.getCacheWebgl(it,at,"__$$blur$$__");Oi.gaussBlur(t.target,r,t.blur,it,at).clear(),lt.hasOwnProperty(s+1)||st.hasOwnProperty(s)||ht.hasOwnProperty(s)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),Te.releaseCacheCanvas(e.canvas),et=t.ctx)}),st.hasOwnProperty(s)&&st[s].forEach(function(t){var e=t.target,r=t.ctx,n=t.x,i=t.y,a=t.outerWidth,o=t.outerHeight;et.globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.fillStyle="#FFF",et.beginPath(),et.rect(n,i,a,o),et.fill(),et.closePath(),et.globalCompositeOperation="source-over",lt.hasOwnProperty(s+1)||ht.hasOwnProperty(s)||(r.drawImage(e.canvas,0,0),et.clearRect(0,0,it,at),Te.releaseCacheCanvas(e.canvas),et=r)}),ht.hasOwnProperty(s)&&ht[s].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,lt.hasOwnProperty(s+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,it,at),Te.releaseCacheCanvas(e.canvas),(et=t.ctx).globalCompositeOperation="source-over")}),ct.hasOwnProperty(s)&&(O=(T=ct[s]).mask,M=T.offScreenMask,T.isClip?((et=O.ctx).globalCompositeOperation="source-out",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(M.target.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",M.target.ctx.clearRect(0,0,it,at),Te.releaseCacheCanvas(M.target.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),et.globalCompositeOperation="source-over",O.draw(et),O.ctx.clearRect(0,0,it,at),Te.releaseCacheCanvas(O.canvas)):((et=M.target.ctx).globalCompositeOperation="destination-in",et.globalAlpha=1,et.setTransform(1,0,0,1,0,0),et.drawImage(O.canvas,0,0),O.draw(et),et.globalCompositeOperation="source-over",O.ctx.clearRect(0,0,it,at),Te.releaseCacheCanvas(O.canvas),(et=M.ctx).globalAlpha=1,et.setTransform(1,0,0,1,0,0),A=M.target,et.drawImage(A.canvas,0,0),et.globalCompositeOperation="source-over",A.draw(et),A.ctx.clearRect(0,0,it,at),Te.releaseCacheCanvas(M.target.canvas)))}}ut=s})(ut)},renderCanvas:function(I,N,D,t){for(var w=t.__structs,C=t.width,P=t.height,L={},F={},B={},H={},G={},Y=0,e=w.length;Y<e;Y++)(function(s){var t=w[s],e=t[Z_],r=t[Q_],n=t[tf],i=e.__config,a=i[U_],o=i[z_];H.hasOwnProperty(s)&&(N=H[s].ctx);var h=void 0,h=e instanceof wu?e.__renderSelfData=e.__renderSelf(I,o,N,D):e.render(I,o,N,D);if("none"===a[R_])return Y=s+=r||0;var l,c,u,_,f,d,p,v=h||{},y=v.offScreenFilter,g=v.offScreenMask,m=v.offScreenOverflow,E=v.offScreenBlend;if(y&&((L[l=s+(r||0)]=L[l]||[]).unshift(y),N=y.target.ctx),g){for(var T,O,M=s+(r||0)+1;n--;){var A=w[M],R=A[Q_],b=A[Z_].currentStyle,S=b[R_],x=b[S_];"none"!==S?("hidden"!==x&&(T?O=M:T=O=M),M++):M+=(R||0)+1}var k=Te.getCacheCanvas(C,P);H[T]=k,G[O]={mask:k,offScreenMask:g,isClip:w[T][Z_].isClip},N=g.target.ctx}E&&((B[c=s+(r||0)]=B[c]||[]).unshift(E),N=E.target.ctx),m&&((F[u=s+(r||0)]=F[u]||[]).unshift(m),N=m.target.ctx),e instanceof wu&&e.render(I,o,N,D),L.hasOwnProperty(s)&&L[s].forEach(function(t){var e,r=Te.getCacheWebgl(C,P,"__$$blur$$__");Oi.gaussBlur(t.target,r,t.blur,C,P).clear(),H.hasOwnProperty(s+1)||F.hasOwnProperty(s)||B.hasOwnProperty(s)||(e=t.target,t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,C,P),Te.releaseCacheCanvas(e.canvas),N=t.ctx)}),F.hasOwnProperty(s)&&F[s].forEach(function(t){var e=t.target,r=t.ctx,n=t.x,i=t.y,a=t.outerWidth,o=t.outerHeight;N.globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.fillStyle="#FFF",N.beginPath(),N.rect(n,i,a,o),N.fill(),N.closePath(),N.globalCompositeOperation="source-over",H.hasOwnProperty(s+1)||B.hasOwnProperty(s)||(r.drawImage(e.canvas,0,0),N.clearRect(0,0,C,P),Te.releaseCacheCanvas(e.canvas),N=r)}),B.hasOwnProperty(s)&&B[s].forEach(function(t){var e=t.target;t.ctx.globalCompositeOperation=t.mixBlendMode,H.hasOwnProperty(s+1)||(t.ctx.drawImage(e.canvas,0,0),e.draw(),e.ctx.clearRect(0,0,C,P),Te.releaseCacheCanvas(e.canvas),(N=t.ctx).globalCompositeOperation="source-over")}),G.hasOwnProperty(s)&&(f=(_=G[s]).mask,d=_.offScreenMask,_.isClip?((N=f.ctx).globalCompositeOperation="source-out",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(d.target.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",d.target.ctx.clearRect(0,0,C,P),Te.releaseCacheCanvas(d.target.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),N.globalCompositeOperation="source-over",f.draw(N),f.ctx.clearRect(0,0,C,P),Te.releaseCacheCanvas(f.canvas)):((N=d.target.ctx).globalCompositeOperation="destination-in",N.globalAlpha=1,N.setTransform(1,0,0,1,0,0),N.drawImage(f.canvas,0,0),f.draw(N),N.globalCompositeOperation="source-over",f.ctx.clearRect(0,0,C,P),Te.releaseCacheCanvas(f.canvas),(N=d.ctx).globalAlpha=1,N.setTransform(1,0,0,1,0,0),p=d.target,N.drawImage(p.canvas,0,0),N.globalCompositeOperation="source-over",p.draw(N),p.ctx.clearRect(0,0,C,P),Te.releaseCacheCanvas(d.target.canvas))),Y=s})(Y)},renderSvg:function(z,j,$,t){for(var q,Z,J,Q=t.__structs,tt=t.width,et=t.height,rt={},nt=[],it=[],at=0,ot=0,e=Q.length;ot<e;ot++)!function(t){var e,r,n,i=Q[t],h=i[Z_],a=i[Q_],o=i[tf],s=i[ef],l=h.__config,c=l[L_],u=l[z_];o&&(rt[(r=(e=t+(a||0)+1)+o)-1]={index:t,start:e,end:r,isClip:Q[e][Z_].isClip}),s<at?(nt.splice(s),q=nt[s-1],it.splice(s),Z=it[s-1]):at<s&&(nt.push(J.__matrix),n=J.virtualDom,it.push(n),Z=n);var _,f,d,p,v,y,g,m,E=void 0;if(u<of&&!(h instanceof yn)?(E=h.virtualDom,c&&c.available?(t+=a||0,E.cache=!0):(c&&(c.available=!0),E=h.__virtualDom=me.extend({},E),h instanceof vc&&!(h instanceof Uc)&&(E.children=[]),delete E.cache,"none"===h.computedStyle[R_]&&(t+=a||0)),_=l[X_],f=l[U_],d=l[$_],sf(u,rf)&&(p=h.__calMatrix(u,d,_,f),v=l[G_],p&&v&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5]),!p||ge.isE(p)?delete E.transform:E.transform="matrix("+me.joinArr(p,",")+")",q&&p&&(p=ge.multiply(q,p)),(v=l[Y_])&&p&&(v[0]=p[0],v[1]=p[1],v[2]=p[2],v[3]=p[3],v[4]=p[4],v[5]=p[5])),sf(u,nf)&&(1===(y=f[b_]=_[b_])?delete E.opacity:E.opacity=y),sf(u,af)&&(g=f[x_]=_[x_],delete E.filter,Array.isArray(g)&&g.forEach(function(t){var e,r,n,i,a=ve(t,2),o=a[0],s=a[1];"blur"===o&&0<s&&(e=ge.int2convolution(s),r=h.outerWidth,n=h.outerHeight,i=$.add({tagName:"filter",props:[["x",-e/r],["y",-e/n],["width",1+2*e/r],["height",1+2*e/n]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",s]]}]}),E.filter="url(#"+i+")")})),sf(u,hf)&&("normal"!==(m=f[I_]=_[I_])?E.mixBlendMode=m:delete E.mixBlendMode),E.lv=u):(h instanceof wu&&(h.__renderSelfData=h.__renderSelf(z,u,j,$)),h.render(z,u,j,$),E=h.virtualDom,"none"===h.computedStyle[R_]&&(t+=a||0)),rt.hasOwnProperty(t)){var T=rt[t],O=T.index,M=T.start,A=T.end,R=T.isClip,b=Q[O][Z_],S=[];R&&S.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(tt,",0L").concat(tt,",").concat(et,"L0,").concat(et,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var x=M;x<A;x++){var k=Q[x][Z_],I=k.computedStyle,N=I[R_],D=I[S_],w=I[N_],C=k.virtualDom.children;if("none"!==N&&"hidden"!==D){S=S.concat(C);for(var P=0,L=C.length;P<L;P++){var F=C[P],B=F.tagName,H=F.props;if("path"===B){if(R)for(var G=0,Y=H.length;G<Y;G++){var W=H[G];"fill"===W[0]&&(W[1]=me.int2invert(w))}var U=k.renderMatrix,X=ge.inverse(b.renderMatrix),U=ge.multiply(U,X),K=H.length;K&&"transform"===H[K-1][0]?H[K-1][1]="matrix(".concat(U,")"):H.push(["transform","matrix(".concat(U,")")])}}}var V="url(#"+(V=$.add({tagName:"mask",props:[],children:S}))+")";b.virtualDom.mask=V}}Z&&!h.isMask&&Z.children.push(E),0===t&&(q=l[G_],Z=E),at=s,J=h,ot=t}(ot)}},_f=p.STYLE_KEY,ff=_f.TOP,df=_f.RIGHT,pf=_f.BOTTOM,vf=_f.LEFT,yf=_f.POSITION,gf=_f.DISPLAY,mf=_f.VISIBILITY,Ef=_f.COLOR,Tf=_f.WIDTH,Of=_f.HEIGHT,Mf=_f.Z_INDEX,Af=_f.MARGIN_TOP,Rf=_f.MARGIN_LEFT,bf=_f.PADDING_TOP,Sf=_f.PADDING_LEFT,xf=_f.BORDER_TOP_WIDTH,kf=_f.BORDER_LEFT_WIDTH,If=p.UPDATE_KEY,Nf=If.UPDATE_NODE,Df=If.UPDATE_STYLE,wf=If.UPDATE_KEYS,Cf=If.UPDATE_COMPONENT,Pf=If.UPDATE_FOCUS,Lf=If.UPDATE_IMG,Ff=If.UPDATE_MEASURE,Bf=If.UPDATE_OVERWRITE,Hf=If.UPDATE_LIST,Gf=If.UPDATE_CONFIG,Yf=p.NODE_KEY,Wf=Yf.NODE_TAG_NAME,Uf=Yf.NODE_CACHE_STYLE,Xf=Yf.NODE_CACHE_PROPS,Kf=Yf.NODE_CURRENT_STYLE,Vf=Yf.NODE_COMPUTED_STYLE,zf=Yf.NODE_CURRENT_PROPS,jf=Yf.NODE_DOM_PARENT,$f=Yf.NODE_IS_MASK,qf=Yf.NODE_REFRESH_LV,Zf=Yf.NODE_IS_DESTROYED,Jf=Yf.NODE_STYLE,Qf=Yf.NODE_UPDATE_HASH,td=Yf.NODE_UNIQUE_UPDATE_ID,ed=Yf.NODE_CACHE,rd=Yf.NODE_CACHE_TOTAL,nd=Yf.NODE_CACHE_FILTER,id=Yf.NODE_CACHE_OVERFLOW,ad=Yf.NODE_CACHE_MASK,od=Yf.NODE_STRUCT,sd=p.STRUCT_KEY,hd=sd.STRUCT_INDEX,ld=sd.STRUCT_TOTAL,cd=sd.STRUCT_NODE,ud=(c(cf={},ff,!0),c(cf,df,!0),c(cf,pf,!0),c(cf,vf,!0),cf),_d=me.isNil,fd=me.isObject,dd=me.isFunction,pd=b.AUTO,vd=b.PX,yd=b.PERCENT,gd=b.INHERIT,md=Qr.calRelative,Ed=Qr.isRelativeOrAbsolute,Td=Qr.equalStyle,Od=Ao.contain,Md=Ao.getLevel,Ad=Ao.isRepaint,Rd=Ao.NONE,bd=Ao.FILTER,Sd=Ao.REPAINT,xd=Ao.REFLOW,kd=pe.isIgnore,Id=pe.isGeom,Nd=pe.isMeasure;function Dd(t,e,r){var n=t.currentStyle[r],i=t.computedStyle[r];if(n[1]===vd)return n[0]===i;if(n[1]!==yd)return!1;var a=t.domParent.__layoutData["width"===r?"w":"h"];return n[0]*a*.01===i}function wd(t){return Dd(t,0,Tf)&&Dd(t,0,Of)}var Cd=1;function Pd(t,e){return t.hasOwnProperty("__uniqueReflowId")&&e[t.__uniqueReflowId]>=Cd}function Ld(t,e,r){var n,i,a;i=e,a=r,(n=t).hasOwnProperty("__uniqueReflowId")||(n.__uniqueReflowId=Fd,i[Fd++]={node:n,lv:Cd,component:a}),e[t.__uniqueReflowId].lv|=Cd}var Fd=0;var Bd=0;function Hd(t,e,r,n,i,a,o,s,h){var l,c=r[Nf],u=r[Df],_=r[Bf],f=r[Pf],d=r[Lf],p=r[Cf],v=r[Ff],y=r[Hf],g=r[wf],m=r[Gf];if(!m[Zf]){_&&Object.assign(m[Jf],_),y&&!p&&(g=g.slice(0),l={},g.forEach(function(t){l[t]=!0}),y.forEach(function(t){var e=t[Df],r=t[Bf];t[wf].forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,g.push(t))}),r&&Object.assign(m[Jf],r),e&&Object.assign(u,e)}));var E,T,O,M,A=m[Wf],R=m[Uf],b=m[Xf],S=m[Kf],x=m[Vf],k=m[zf],I=m[jf],N=m[$f],D=f||Rd,w=v;if(!p&&u&&g)for(var C=0,P=g.length;C<P;C++){var L=g[C],F=u[L];if(c instanceof wu&&Id(A,L))Td(L,F,k[L],c)||(D|=Sd,b[L]=void 0,k[L]=F);else if(!Td(L,F,S[L],c))if(kd(L))R[L]=void 0,S[L]=F;else{if(ud.hasOwnProperty(L)){var B=S[yf];if("relative"!==B&&"absolute"!==B){delete u[L];continue}}else L===gf&&(M=!0);D|=Md(L),Nd(L)&&(w=!0),R[L]=void 0,S[L]=F,L===Mf&&c!==e&&(E=!0),L===mf&&(T=!0),L===Ef&&(O=!0)}}if(D!==Rd||p){if(E&&I&&delete I.__zIndexChildren,T||O)for(var H=e.__structs,G=c.__config[od],Y=G[hd]+1,W=Y+G[ld];Y<W;Y++){var U=H[Y],X=U[cd],K=U[ld],V=X.__config,z=V[Kf],j=void 0;T&&(X instanceof yn||z[mf][1]===gd)&&(j=!0),O&&(X instanceof yn||z[Ef][1]===gd)&&(j=!0),j?(V[qf]|=Sd,X instanceof al&&X.__cancelCache()):Y+=K||0}if(N){for(var $=c.prev;$&&$.isMask;)$=$.prev;$&&$.__config[ad]&&($.__config[ad].release(),$.__config[ad]=null)}!p&&Ad(D)?(E&&t===ye.SVG&&(D|=Sd,I&&Gd(I)),E&&!p&&s&&I&&!I.hasOwnProperty("__uniqueZId")&&(s[Bd]=!0,I.__uniqueZId=Bd++,h.push(I))):(n.push({node:c,style:u,img:d,component:p}),w&&i.push(c)),m[qf]=D;var q=Sd<=D||t===ye.SVG&&c instanceof wu;if(q&&(m[ed]&&m[ed].release(),m[rd]&&m[rd].release(),m[ad]&&(m[ad].release(),m[ad]=null),m[id]&&(m[id].release(),m[id]=null)),(q||Od(D,bd))&&m[nd]&&(m[nd].release(),m[nd]=null),"none"===x[gf]&&D<xd)return!1;var Z=I;if(M)for(;Z;){var J=Z.__config;if("none"===J[Vf][gf])return!(x[gf]="none");Z=J[jf]}for(Z=I;Z;){var Q=Z.__config;if(Q.hasOwnProperty(td)){var tt=Q[td];if(a.hasOwnProperty(tt))break;a[tt]=!0}else a[Bd]=!0,Q[td]=Bd++,o.push(Z);var et=Q[qf];Sd<=et&&Q[ed]&&Q[ed].release(),Q[rd]&&Q[rd].release(),Q[nd]&&(Q[nd].release(),Q[nd]=null),Q[ad]&&(Q[ad].release(),Q[ad]=null),Q[id]&&(Q[id].release(),Q[id]=null),Z=Q[jf]}return!0}delete m[td]}}function Gd(t,e){var r=t.__config;e?r[qf]|=Sd:r[rd].release(),Array.isArray(t.children)&&t.children.forEach(function(t){t instanceof El&&(t=t.shadowRoot),t instanceof yn||Gd(t,!0)})}var Yd=0,Wd=function(){t(a,vc);var i=e(a);function a(t,e,r){var n;return g(this,a),(n=i.call(this,t,e)).__cd=r||[],n.__dom=null,n.__mw=0,n.__mh=0,n.__task=[],n.__ref={},n.__updateHash={},n.__reflowList=[{node:h(n)}],n.__animateController=new O_,Ai.mix(h(n)),n.__config[Qf]=n.__updateHash,n}return l(a,[{key:"__initProps",value:function(){var t,e=this.props.width;_d(e)||0<(t=parseFloat(e)||0)&&(this.__width=t);var r,n=this.props.height;_d(n)||0<(r=parseFloat(n)||0)&&(this.__height=r)}},{key:"__genHtml",value:function(){var r=this,n="<".concat(this.tagName);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(n+=function(t,e){var r=Array.isArray(e)?me.joinSourceArray(e):me.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+me.encodeHtml(r,!0)+'"'}(t,e))}),n+="></".concat(this.tagName,">")}},{key:"__wrapEvent",value:function(t){var e,r,n,i,a,o,s,h,l,c,u,_,f;return-1===["touchend","touchcancel"].indexOf(t.type)&&(e=this.dom,r=this.__scx,n=this.__scy,a=(i=e.getBoundingClientRect()).x,o=i.y,s=i.left,h=i.top,l=i.width,c=i.height,u=a||s||0,_=o||h||0,u=(f=t.touches?t.touches[0]:t).clientX-u,_=f.clientY-_,_d(r)?u*=this.width/l:u/=r,_d(n)?_*=this.height/c:_/=n),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:u,y:_,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e),e}}},{key:"appendTo",value:function(t){var e,n;t=function(t){if(me.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=pl.initRoot(this.__cd,this),this.__initProps(),(this.__root=this).cache=!!this.props.cache,t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(this.tagName),this.__dom||(t.innerHTML=this.__genHtml(),this.__dom=t.querySelector(this.tagName))),this.__uuid=_d(this.__dom.__uuid)?Yd++:this.__dom.__uuid,this.__defs=this.dom.__defs||zc.getInstance(this.__uuid),this.width&&this.height||(e=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=ye.CANVAS):"svg"===this.tagName&&(this.__renderMode=ye.SVG),this.refresh(null,!0),this.dom.__root?this.dom.__root.destroy():(n=this.dom,["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(r){n.addEventListener(r,function(t){var e=n.__root;-1<["touchend","touchcancel","touchmove"].indexOf(r)?e.__touchstartTarget&&e.__touchstartTarget.__emitEvent(e.__wrapEvent(t),!0):e.__cb(t)})}),this.dom.__uuid=this.__uuid),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r,n=this.isDestroyed,i=this.renderMode,a=this.ctx,o=this.defs,s=this.width,h=this.height;if(!n){if(o.clear(),e)this.__checkRoot(s,h),this.__computeMeasure(i,a);else if(!this.__checkUpdate(i,a,s,h))return;Te.measureText(),this.__checkReflow(s,h),i===ye.CANVAS?(this.__clear(a),this.cache?uf.renderCacheCanvas(i,a,o,this):uf.renderCanvas(i,a,o,this)):i===ye.SVG&&(uf.renderSvg(i,a,o,this),(r=this.virtualDom).defs=o.value,this.dom.__root?h_(this.dom,this.dom.__vd,r):this.dom.innerHTML=me.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=o),dd(t)&&t(),this.emit(Ai.REFRESH)}}},{key:"destroy",value:function(){this.__destroy(),xi.offFrame(this.__rTask);var t=this.dom;t&&(t.__root=null)}},{key:"scale",value:function(t,e){var r=0<arguments.length&&void 0!==t?t:1,n=1<arguments.length&&void 0!==e?e:r;this.__scx=r,this.__scy=n}},{key:"resize",value:function(t,e,r){t===this.width&&e===this.height||(this.__width=t,this.__hegiht=e,this.addRefreshTask(r||function(){}))}},{key:"addRefreshTask",value:function(t){var e,i,a=this;t&&((e=this.task).length||(xi.nextFrame(this.__rTask={__before:function(r){var n;(i=e.splice(0)).length&&(n=[],i.forEach(function(t,e){fd(t)&&dd(t.__before)&&(t.__state&&n.push(e),t.__before(r))}),n.length&&Qu.check(a),Qu.updateList.length&&Qu.updateList.forEach(function(t){var e=t.shadowRoot;e instanceof yn&&(e=e.domParent);var r={};r[Nf]=e,r[Df]=e.currentStyle,r[Pf]=xd,r[Ff]=!0,r[Cf]=t,r[Gf]=e.__config,a.__addUpdate(e,e.__config,a,a.__config,r)}))},__after:function(e){i.forEach(function(t){fd(t)&&dd(t.__after)?t.__after(e):dd(t)&&t(e)}),Qu.did()}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t){for(var e=this.task,r=0,n=e.length;r<n;r++)if(e[r]===t){e.splice(r,1);break}e.length||xi.offFrame(this.__rTask)}}},{key:"__checkRoot",value:function(t,e){var r=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(r[gf])&&(n[gf]=r[gf]="block"),"absolute"===r[yf]&&(n[yf]=r[yf]="static"),r[Tf]=[t,vd],r[Of]=[e,vd],n[Tf]=t,n[Of]=e}},{key:"__addUpdate",value:function(t,e,r,n,i){var a,o,s,h=n[Qf];t===r?(h=r.__updateRoot)?(i[Lf]&&(h[Lf]=i[Lf]),i[Pf]&&(h[Pf]|=i[Pf]),i[Ff]&&(h[Ff]=!0),i[Df]&&(h[Hf]=h[Hf]||[]).push((c(a={},Df,i[Df]),c(a,Bf,i[Bf]),c(a,wf,i[wf]),a))):r.__updateRoot=i:e.hasOwnProperty(td)?h.hasOwnProperty(e[td])?(o=h[e[td]],i[Lf]&&(o[Lf]=i[Lf]),i[Pf]&&(o[Pf]|=i[Pf]),i[Ff]&&(o[Ff]=!0),i[Df]&&(o[Hf]=o[Hf]||[]).push((c(s={},Df,i[Df]),c(s,Bf,i[Bf]),c(s,wf,i[wf]),s))):Te.error("Update process miss uniqueUpdateId"):(e[td]=Bd,h[Bd++]=i)}},{key:"__checkUpdate",value:function(s,h,t,e){var l=this,r=[],n=[],i={},a=[],o={},c=[],u=l.__updateRoot,_=l.__updateHash;u&&(l.__updateRoot=null,y=Hd(s,l,u,n,r,i,a),l.__checkRoot(t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var v=Hd(s,l,_[f[d]],n,r,i,a,o,c),y=y||v;l.__reflowList=n,Bd=0,l.__updateHash=l.__config[Qf]={},a.forEach(function(t){delete t.__config[td]}),c.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(l.__structs))});var g={};r.forEach(function(t){var e=t.__config[td],r=t.domParent;if(!g.hasOwnProperty(e)){g[e]=!0;var n=t;if(pe.isMeasureInherit(_[e][Df]))for(;r&&r!==l;){var i,a=r.__config[td],o=r.currentStyle;if(!(r.__config.hasOwnProperty(td)?(i=_[a][Df],g[a]=!0,!!pe.measureInheritList(i).length):pe.isMeasureInherit(o)))break;r=(n=r).domParent}n.__computeMeasure(s,h,function(t){t.__config.hasOwnProperty(td)&&(g[t.__config[td]]=!0)})}});for(var m=0,E=f.length;m<E;m++)delete _[f[m]][Gf][td];return y}},{key:"__checkReflow",value:function(t,e){var st=this,r=this.__reflowList;if(r.length){for(var n,ht=this,lt={},i=Fd=0,a=r.length;i<a;i++){var o=r[i],s=o.node,h=o.style,l=o.img,c=o.component;if(s===this){n=!0;break}var u=s.currentStyle,_=s.computedStyle;s.hasOwnProperty("__uniqueReflowId")||(s.__uniqueReflowId=Fd,lt[Fd++]={node:s,lv:0,img:l,component:c});var f=lt[s.__uniqueReflowId];if("absolute"===u[yf]&&"absolute"===_[yf])f.lv=Cd;else if(u[yf]!==_[yf]){if(f.lv=Cd,b(s,c,!0)){n=!0;break}}else{var d=!0;if(h)for(var p=Object.keys(h),v=0,y=p.length;v<y;v++){var g=p[v];if(!ud.hasOwnProperty(g)){d=!1;break}}if(!d||l||c){if(f.lv=Cd,b(s,c)){n=!0;break}}else"relative"===_[yf]&&(f.lv|=0)}}if(Fd=0,this.__reflowList=[],n)return r.forEach(function(t){return delete t.node.__uniqueReflowId}),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;var m=[];this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){var r,n=lt[t.__uniqueReflowId];return delete t.__uniqueReflowId,n.lv>=Cd||(r=[],t.__deepScan(function(t,e){},{uniqueList:r}),r.forEach(function(t){e.uniqueList.push(t)})),e.uniqueList.push(n),!0}},{uniqueList:m});var ct=[],ut=0;m.forEach(function(t){var e=t.node,r=t.lv,n=t.component;if(Cd<=r){var i=e.computedStyle,a=e.currentStyle,o=i[Mf],s=i[yf],h=i[gf],l="absolute"===s,c="absolute"===a[yf],u="none"===h,_="none"===a[gf];if(u&&_)return;for(var f=e.domParent,d=f.__layoutData,p=d.x,v=d.y,y=(d.w,d.h),g=f.width,m=f.computedStyle,E=e;n&&E.isShadowRoot;)E=E.host;var T=E.prev;T?(v=T.y,v+=T.outerHeight):(v=f.y,v+=m[Af]+m[xf]+m[bf]),p+=m[Rf]+m[kf]+m[Sf];var O,M=e.outerWidth,A=e.outerHeight,R=e;if(c){for(R=R.domParent;R&&R!==ht&&!Ed;)if(R.parent)R=R.parent;else if(R.host)break;var b,R=R||ht;if(n?f.__layoutAbs(R,null,n):f.__layoutAbs(R,null,e),l)return void(n&&(b=e.__modifyStruct(ht,ut),ut+=b[1],ct.push(b),(s===a[yf]||"static"!==s&&"static"!==a[yf])&&o===a[Mf]||(e.domParent.__updateStruct(ht.__structs),st.renderMode===ye.SVG&&Gd(e.domParent))));O=!0}else e.__layout({x:p,y:v,w:g,h:y}),e instanceof vc&&(!e.parent&&e.host&&(R=e),e.__layoutAbs(R,{x:p,y:v,w:g,h:y}));var S,x,k,I,N="absolute"===e.computedStyle[s];I=O?(S=-M,-A):(x=e.outerWidth,k=e.outerHeight,N?(S=x,k):(S=x-M,k-A));for(var D,w,C=e;C&&C!==ht;)if("relative"===(m=(C=C.domParent).computedStyle)[s]){var P=C.ox,L=C.oy;P&&e.__offsetX(P),L&&e.__offsetY(L);break}if(S||I){for(var F,B=e;;){for(;B.isShadowRoot;)B=B.host;for(var H=(F=B).next;H;)"absolute"===H.currentStyle[yf]?H.currentStyle[ff][1]===pd&&H.currentStyle[pf][1]===pd&&(H.__offsetY(I,!0,xd),H.__cancelCache()):(!H.hasOwnProperty("____uniqueReflowId")||lt[H.____uniqueReflowId]<Cd)&&(H.__offsetY(I,!0,xd),H.__cancelCache()),H=H.next;if((B=B.parent)===ht)break;var G,Y=B.currentStyle,W="absolute"===Y[yf];if(S&&(G=void 0,W&&(Y[Tf][1]!==pd||Y[vf][1]!==pd&&Y[df][1]!==pd||(G=!0)),G&&(B.__resizeX(S),B.__cancelCache(),B.__config[qf]|=xd)),I){var U=void 0;if(W?Y[Of][1]!==pd||Y[ff][1]!==pd&&Y[pf][1]!==pd||(U=!0):Y[Of][1]===pd&&(U=!0),!U)break;B.__resizeY(I),B.__cancelCache(),B.__config[qf]|=xd}}for(;F;)F.__cancelCache(),F=F.domParent}n?(D=e.__modifyStruct(ht,ut),ut+=D[1],ct.push(D),(s===a[yf]||"static"!==s&&"static"!==a[yf])&&o===a[Mf]||(e.domParent.__updateStruct(ht.__structs),st.renderMode===ye.SVG&&Gd(e.domParent))):(u||_)&&(e.__zIndexChildren=null,w=e.__modifyStruct(ht,ut),ut+=w[1],ct.push(w))}else{var X=e.currentStyle,K=X[ff],V=X[df],z=X[pf],j=X[vf],$=e.currentStyle,q=e.computedStyle,Z=q[ff],J=q[df],Q=q[pf],tt=q[vf],et=e.computedStyle,rt=e===st?e:e.domParent,nt=0;K[1]!==pd?(nt=md($,"top",K,rt),et[ff]=nt,et[pf]="auto"):z[1]!==pd?(nt=-md($,"bottom",z,rt),et[pf]=-nt,et[ff]="auto"):et[ff]=et[pf]="auto";var it=0;"auto"!==Z?it=Z:"auto"!==Q&&(it=-Q),nt!==it&&e.__offsetY(nt-it,!1,xd);var at=0;j[1]!==pd?(at=md($,"left",j,rt),et[vf]=at,et[df]="auto"):V[1]!==pd?(at=-md($,"right",V,rt),et[df]=-at,et[vf]="auto"):et[vf]=et[df]="auto";var ot=0;"auto"!==tt?ot=tt:"auto"!==J&&(ot=-J),at!==ot&&e.__offsetX(at-ot,!1,xd)}});var E=0,T=0,O=!0,M=ht.__structs;ct.forEach(function(t){var e=ve(t,2),r=e[0],n=e[1];if(O)O=!1,T=r[hd]+(r[ld]||0)+1,E+=n;else{for(var i=r[hd]+(r[ld]||0)+1+E,a=T;a<i;a++)M[a][hd]+=E;T=i,E+=n}});for(var A=T,R=M.length;A<R;A++)M[A][hd]+=E;r.forEach(function(t){return delete t.node.__uniqueReflowId})}function b(t,e,r){if(!wd(t)||r){var n=t;if("inline"===t.currentStyle[gf]||"inline"===t.computedStyle[gf]){var i=t.domParent;do{if((n=i)===ht)return 1;if(Pd(i,lt))return;if("absolute"===i.currentStyle[yf]||"absolute"===i.computedStyle[yf])return void Ld(i,lt,e);if(wd(i))return void Ld(i,lt,e);i=i.domParent}while(i&&("inline"===i.currentStyle[gf]||"inline"===i.computedStyle[gf]));if(wd(n))return void Ld(n,lt,e)}var a=n.domParent;if(!a||!Pd(a,lt)){if(a&&("flex"===a.computedStyle[gf]||"flex"===a.currentStyle[gf])){do{if((n=a)===ht)return 1;if(Pd(a,lt))return;if("absolute"===a.currentStyle[yf]||"absolute"===a.computedStyle[yf])return void Ld(a,lt,e);if(wd(a))return void Ld(a,lt,e);a=a.domParent}while(a&&("flex"===a.computedStyle[gf]||"flex"===a.currentStyle[gf]));if(wd(n))return void Ld(n,lt,e)}(a=n.domParent)&&Pd(a,lt)||n!==t&&Ld(n,lt,e)}}}}},{key:"__computeMeasure",value:function(e,r){Qr.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},xi.__hookTask.push(t))}},{key:"__clear",value:function(t){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)}},{key:"dom",get:function(){return this.__dom}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"task",get:function(){return this.__task}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),a}(),Ud=p.STYLE_KEY,Xd=Ud.PADDING_TOP,Kd=Ud.PADDING_LEFT,Vd=Ud.STROKE_WIDTH,zd=Ud.BOX_SHADOW,jd=Ud.FILTER,$d=me.isNil;function qd(t,e,r,n){return n?t.map(function(t){return e+t*r}):e+t*r}function Zd(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function Jd(t){return t<0?t=0:1<t&&(t=1),t}function Qd(t,e,r,n,i,a,o,s,h){var l,c,u,_,f,d,p,v,y,g,m,E=7<arguments.length&&void 0!==s?s:0,T=8<arguments.length&&void 0!==h?h:1;return(0<E||T<1)&&(3===o?(l=ve(Ee.sliceBezier2Both([[t,e],i,a,[r,n]],E,T),4),t=(c=ve(l[0],2))[0],e=c[1],i=l[1],a=l[2],r=(u=ve(l[3],2))[0],n=u[1]):2===o?(_=ve(Ee.sliceBezier2Both([[t,e],a,[r,n]],E,T),3),t=(f=ve(_[0],2))[0],e=f[1],a=_[1],r=(d=ve(_[2],2))[0],n=d[1]):1===o?(p=ve(Ee.sliceBezier2Both([[t,e],i,[r,n]],E,T),3),t=(v=ve(p[0],2))[0],e=v[1],i=p[1],r=(y=ve(p[2],2))[0],n=y[1]):(t+=(g=Math.abs(t-r))*E,e+=(m=Math.abs(e-n))*E,r-=g*(1-T),n-=m*(1-T))),[t,e,r,n,i,a]}var tp=function(){t(H,wu);var h=e(H);function H(t,e){var r,n,i,a;if(g(this,H),(r=h.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):$d(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):$d(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):$d(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):$d(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return Jd(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else{$d(e.start)||(n=Jd(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),Jd(e)});for(var s=r.__end.length;s<r.__x1.length;s++)r.__end.push(1)}else{$d(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=Jd(i),r.__end=r.__x1.map(function(){return i}))}}else{r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],$d(e.x1)||(r.__x1=parseFloat(e.x1)||0),$d(e.y1)||(r.__y1=parseFloat(e.y1)||0),$d(e.x2)||(r.__x2=parseFloat(e.x2)||0),$d(e.y2)||(r.__y2=parseFloat(e.y2)||0),$d(e.start)||(r.__start=Jd(parseFloat(e.start)||0)),$d(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=Jd(a)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB)}return r}return l(H,[{key:"buildCache",value:function(e,r){var n,i=this,a=this.width,o=this.height,s=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){$d(s[t])&&(n=!0,s[t]=qd(i[t],e,a,h))}),["y1","y2"].forEach(function(t){$d(s[t])&&(n=!0,s[t]=qd(i[t],r,o,h))}),["controlA","controlB"].forEach(function(t){$d(s[t])&&(n=!0,s[t]=function e(t,r,n,i,a,o){if(o){if(t)return t.map(function(t){return e(t,r,n,i,a)})}else if(t&&2<=t.length)return[r+t[0]*i,n+t[1]*a];return[]}(i[t],e,r,a,o,h))}),["start","end"].forEach(function(t){$d(s[t])&&(n=!0,s[t]=i[t])}),n}},{key:"render",value:function(t,e,u,r){var n=rt(et(H.prototype),"render",this).call(this,t,e,u,r);if(n.break)return n;var _,i,a,o,s,h,l,c,f,d,p,v,y,g,m,E,T,O,M,A,R,b,S=n.originX,x=n.originY,k=n.stroke,I=n.strokeWidth,N=n.strokeDasharrayStr,D=n.strokeLinecap,w=n.strokeLinejoin,C=n.strokeMiterlimit,P=n.dx,L=n.dy,F=this.__cacheProps,B=this.isMulti;return this.buildCache(S,x)&&t===ye.SVG&&(_="",B?F.x1.forEach(function(t,e){var r,n=F.x2[e],i=F.y1[e],a=F.y2[e],o=F.controlA[e],s=F.controlB[e],h=F.start[e],l=F.end[e],c=Zd(o,s);0===h&&1===l||(t=(r=ve(Qd(t,i,n,i,o,s,c,h,l,F.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),_+=mn.svgLine(t,i,n,a,o,s,c)}):(i=Zd(F.controlA,F.controlB),h=F.x1,l=F.y1,c=F.x2,f=F.y2,d=F.controlA,p=F.controlB,a=F.start,o=F.end,0===a&&1===o||(h=(s=ve(Qd(h,l,c,f,d,p,i,a,o,F.len),6))[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5]),_=mn.svgLine(h,l,c,f,d,p,i)),F.d=_),t===ye.CANVAS?0<I&&(u.beginPath(),B?F.x1.forEach(function(t,e){var r,n=F.x2[e],i=F.y1[e],a=F.y2[e],o=F.controlA[e],s=F.controlB[e],h=F.start[e],l=F.end[e],c=Zd(o,s);0===h&&1===l||(t=(r=ve(Qd(t,i,n,i,o,s,c,h,l,F.len),6))[0],i=r[1],n=r[2],i=r[3],o=r[4],s=r[5]),mn.canvasLine(u,t,i,n,a,o,s,c,P,L)}):(v=Zd(F.controlA,F.controlB),E=F.x1,T=F.y1,O=F.x2,M=F.y2,A=F.controlA,R=F.controlB,y=F.start,g=F.end,0===y&&1===g||(E=(m=ve(Qd(E,T,O,M,A,R,v,y,g,F.len),6))[0],T=m[1],O=m[2],M=m[3],A=m[4],R=m[5]),mn.canvasLine(u,E,T,O,M,A,R,v,P,L)),u.stroke(),u.closePath()):t===ye.SVG&&(b=[["d",F.d],["fill","none"],["stroke",k],["stroke-width",I]],this.__propsStrokeStyle(b,N,D,w,C),this.addGeom("path",b)),n}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[Xd],i=r[Kd],a=r[Vd],o=r[zd],s=r[jd],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var _=l.x1,f=l.y1,d=l.x2,p=l.y2,v=l.controlA,y=l.controlB,g=rt(et(H.prototype),"bbox",this),m=.5*a,E=ve(this.__spreadByBoxShadowAndFilter(o,s),2),T=E[0],O=E[1];return T+=m,O+=m,h||(_=[_],d=[d],f=[f],p=[p],v=[v],y=[y]),_.forEach(function(t,e){var r,n,i,a=f[e],o=d[e],s=p[e],h=v[e],l=y[e];($d(h)||h.length<2)&&($d(l)||l.length<2)?(g[0]=Math.min(g[0],t-T),g[0]=Math.min(g[0],o-T),g[1]=Math.min(g[1],a-O),g[1]=Math.min(g[1],s-O),g[2]=Math.max(g[2],t+T),g[2]=Math.max(g[2],o+T),g[3]=Math.max(g[3],a+O),g[3]=Math.max(g[3],s+O)):$d(h)||h.length<2?(r=Ee.bboxBezier(t,a,l[0],l[1],o,s),g[0]=Math.min(g[0],r[0]-T),g[0]=Math.min(g[0],r[2]-T),g[1]=Math.min(g[1],r[1]-O),g[1]=Math.min(g[1],r[3]-O),g[2]=Math.max(g[2],r[0]+T),g[2]=Math.max(g[2],r[2]+T),g[3]=Math.max(g[3],r[1]+O),g[3]=Math.max(g[3],r[3]+O)):$d(l)||l.length<2?(n=Ee.bboxBezier(t,a,h[0],h[1],o,s),g[0]=Math.min(g[0],n[0]-T),g[0]=Math.min(g[0],n[2]-T),g[1]=Math.min(g[1],n[1]-O),g[1]=Math.min(g[1],n[3]-O),g[2]=Math.max(g[2],n[0]+T),g[2]=Math.max(g[2],n[2]+T),g[3]=Math.max(g[3],n[1]+O),g[3]=Math.max(g[3],n[3]+O)):(i=Ee.bboxBezier(t,a,h[0],h[1],l[0],l[1],o,s),g[0]=Math.min(g[0],i[0]-T),g[0]=Math.min(g[0],i[2]-T),g[1]=Math.min(g[1],i[1]-O),g[1]=Math.min(g[1],i[3]-O),g[2]=Math.max(g[2],i[0]+T),g[2]=Math.max(g[2],i[2]+T),g[3]=Math.max(g[3],i[1]+O),g[3]=Math.max(g[3],i[3]+O))}),g}}]),H}(),ep=p.STYLE_KEY,rp=ep.PADDING_TOP,np=ep.PADDING_LEFT,ip=ep.STROKE_WIDTH,ap=ep.BOX_SHADOW,op=ep.FILTER,sp=me.isNil;function hp(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function lp(t){return t<0?t=0:1<t&&(t=1),t}function cp(t,e){var r=[],n=0,i=[];if(e)n=[],t.forEach(function(t){var e=cp(t);r.push(e.list),n.push(e.total),i.push([0].concat(e.increase))});else if(Array.isArray(t)){n=0,i.push(0);for(var a=0,o=0,s=t.length;o<s;o++){var h=t[o];if(Array.isArray(h)){a=o;break}}for(var l=t[a],c=a+1,u=t.length;c<u;c++){var _,f,d,p,v,y=t[c];Array.isArray(y)&&(2===y.length?(_=Math.abs(y[0]-l[0]),f=Math.abs(y[1]-l[1]),d=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(d),n+=d,i.push(n),l=y):4===y.length?(p=Ee.bezierLength([l,[y[0],y[1]],[y[2],y[3]]],2),r.push(p),n+=p,i.push(n),l=[y[2],y[3]]):6===y.length&&(v=Ee.bezierLength([l,[y[0],y[1]],[y[2],y[3]],[y[4],y[5]]],3),r.push(v),n+=v,i.push(n),l=[y[4],y[5]]))}}return{list:r,total:n,increase:i}}function up(t,e,r,n){if(r===n)return t[r]>e?r-1:r;var i=r+(n-r>>1);return t[i]===e?i:t[i]>e?up(t,e,r,Math.max(i-1,r)):up(t,e,Math.min(i+1,n),n)}function _p(t,e,r,n){var i=2<arguments.length&&void 0!==r?r:0,a=3<arguments.length&&void 0!==n?n:1;if(0===i&&1===a)return t;if(a<=i)return[];var o=0,s=t.length-2;0<i&&(o=up(e.increase,i*e.total,o,s)),a<1&&(s=up(e.increase,a*e.total,o,s)),t=me.clone(t);var h,l,c,u,_,f,d,p,v,y,g,m,E,T,O,M,A=1;return(a*=e.total)>e.increase[s]&&(h=t[s].slice(t[s].length-2),l=t[s+1],c=e.list[s],A=u=(a-e.increase[s])/c,2===l.length?(_=Math.abs(l[0]-h[0]),f=Math.abs(l[1]-h[1]),t[s+1]=[l[1]-(1-u)*_,l[1]-(1-u)*f]):4===l.length?(d=Ee.sliceBezier([h,[l[0],l[1]],[l[2],l[3]]],u),t[s+1]=[d[1][0],d[1][1],d[2][0],d[2][1]]):6===l.length&&(p=Ee.sliceBezier([h,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],u),t[s+1]=[p[1][0],p[1][1],p[2][0],p[2][1],p[3][0],p[3][1]])),(i*=e.total)>e.increase[o]&&(v=t[o].slice(t[o].length-2),y=t[o+1],g=e.list[o],o===s&&1!==A&&(g*=A),m=(i-e.increase[o])/g,2===y.length?(E=Math.abs(y[0]-v[0]),T=Math.abs(y[1]-v[1]),t[o]=[v[0]+m*E,v[1]+m*T]):4===y.length?(O=Ee.sliceBezier([[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=O[0],t[o+1]=[O[1][0],O[1][1],O[2][0],O[2][1]]):6===y.length&&(M=Ee.sliceBezier([[y[4],y[5]],[y[2],y[3]],[y[0],y[1]],v],1-m).reverse(),t[o]=M[0],t[o+1]=[M[1][0],M[1][1],M[2][0],M[2][1],y[4],y[5]])),s<t.length-2&&(t=t.slice(0,s+2)),0<o&&(t=t.slice(o)),t}var fp=function(){t(O,wu);var h=e(O);function O(t,e){var r,n,i,a;if(g(this,O),(r=h.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return lp(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else{sp(e.start)||(n=lp(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return n}))}if(Array.isArray(e.end)){r.__end=e.end.map(function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),lp(e)});for(var s=r.__end.length;s<r.__points.length;s++)r.__end.push(1)}else{sp(e.end)||(i=parseFloat(e.end),isNaN(i)&&(i=1),i=lp(i),r.__end=r.__points.map(function(){return i}))}}else{r.__points=[],r.__controls=[],r.__start=0,r.__end=1,sp(e.start)||(r.__start=lp(parseFloat(e.start)||0)),sp(e.end)||(a=parseFloat(e.end),isNaN(a)&&(a=1),r.__end=lp(a))}return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return l(O,[{key:"__getPoints",value:function(a,o,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var n=[],i=0;i<r;i++)i%2==0?n.push(a+t[i]*s):n.push(o+t[i]*h);return n}})}},{key:"buildCache",value:function(e,r){var t,n,i,a=this,o=this.width,s=this.height,h=this.points,l=this.controls,c=this.start,u=this.end,_=this.__cacheProps,f=this.isMulti;return sp(_.points)&&(t=!0,_.points=f?h.map(function(t){if(Array.isArray(t))return a.__getPoints(e,r,o,s,t)}):this.__getPoints(e,r,o,s,h)),sp(_.controls)&&(t=!0,_.controls=f?l.map(function(t){return Array.isArray(t)?a.__getPoints(e,r,o,s,t,!0):t}):this.__getPoints(e,r,o,s,l,!0)),sp(_.start)&&(t=!0,_.start=c),sp(_.end)&&(t=!0,_.end=u),t&&(n=_.points,i=_.controls,_.list=f?n.filter(function(t){return Array.isArray(t)}).map(function(t,e){var r=i[e];if(Array.isArray(t))return t.map(function(t,e){return e?hp(t,r&&r[e-1]):t})}):n.filter(function(t){return Array.isArray(t)}).map(function(t,e){return e?hp(t,i[e-1]):t}),_.len=cp(_.list,f)),t}},{key:"render",value:function(t,e,r,n){var i=rt(et(O.prototype),"render",this).call(this,t,e,r,n);if(i.break)return i;var a=i.originX,o=i.originY,s=i.fill,h=i.stroke,l=i.strokeWidth,c=i.strokeDasharrayStr,u=i.strokeLinecap,_=i.strokeLinejoin,f=i.strokeMiterlimit,d=i.fillRule,p=i.dx,v=i.dy,y=this.__cacheProps,g=this.isMulti;this.buildCache(a,o);var m,E,T=y.list;return y.list2=g?T.map(function(t,e){if(Array.isArray(t)){var r=y.len;return _p(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},y.start[e],y.end[e])}}):_p(T,y.len,y.start,y.end),t===ye.SVG&&(g?(m="",y.list2.forEach(function(t){return m+=mn.svgPolygon(t)}),y.d=m):y.d=mn.svgPolygon(y.list2)),t===ye.CANVAS?(r.beginPath(),g?y.list2.forEach(function(t){return mn.canvasPolygon(r,t,p,v)}):mn.canvasPolygon(r,y.list2,p,v),r.fill("evenodd"===d?d:"nonzero"),0<l&&r.stroke(),r.closePath()):t===ye.SVG&&(E=[["d",y.d],["fill",s],["stroke",h],["stroke-width",l]],"evenodd"===d&&E.push(["fill-rule","evenodd"]),this.__propsStrokeStyle(E,c,u,_,f),this.addGeom("path",E)),i}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.computedStyle,n=r[rp],i=r[np],a=r[ip],o=r[ap],s=r[op],h=this.isMulti,l=this.__cacheProps,c=t+i,u=e+n;this.buildCache(c,u);var d=rt(et(O.prototype),"bbox",this),_=.5*a,f=ve(this.__spreadByBoxShadowAndFilter(o,s),2),p=f[0],v=f[1];p+=_,v+=_;var y=l.points,g=l.controls;return h||(y=[y],g=[g]),y.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=g[e],n=ve(t[0],2),i=n[0],a=n[1],o=1,s=t.length;o<s;o++){var h,l,c=ve(t[o],2),u=c[0],_=c[1],f=r[o-1];f&&4===f.length?(h=Ee.bboxBezier(i,a,f[0],f[1],f[2],f[3],u,_),d[0]=Math.min(d[0],h[0]-p),d[1]=Math.min(d[1],h[1]-v),d[2]=Math.max(d[2],h[2]+p),d[3]=Math.max(d[3],h[3]+v)):f&&2===f.length?(l=Ee.bboxBezier(i,a,f[0],f[1],u,_),d[0]=Math.min(d[0],l[0]-p),d[1]=Math.min(d[1],l[1]-v),d[2]=Math.max(d[2],l[2]+p),d[3]=Math.max(d[3],l[3]+v)):(d[0]=Math.min(d[0],i-p),d[1]=Math.min(d[1],u-v),d[2]=Math.max(d[2],i+p),d[3]=Math.max(d[3],u+v)),i=u,a=_}}),d}}]),O}(),dp=function(){t(s,fp);var r=e(s);function s(t,e){return g(this,s),r.call(this,t,e)}return l(s,[{key:"__getPoints",value:function(t,e,r,n,i,a){var o=rt(et(s.prototype),"__getPoints",this).call(this,t,e,r,n,i,a);return a||o.push(o[0]),o}}]),s}(),pp=p.STYLE_KEY,vp=pp.PADDING_TOP,yp=pp.PADDING_LEFT,gp=pp.STROKE_WIDTH,mp=pp.BOX_SHADOW,Ep=pp.FILTER,Tp=me.isNil;function Op(t,e,r,n){return r=Math.max(r,0),0<=(n%=360)&&n<90?[t+Math.sin(n*Math.PI/180)*r,e-Math.cos(n*Math.PI/180)*r]:90<=n&&n<180?[t+Math.cos((n-90)*Math.PI/180)*r,e+Math.sin((n-90)*Math.PI/180)*r]:180<=n&&n<270?[t-Math.cos((270-n)*Math.PI/180)*r,e+Math.sin((270-n)*Math.PI/180)*r]:[t-Math.sin((360-n)*Math.PI/180)*r,e-Math.cos((360-n)*Math.PI/180)*r]}function Mp(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var Ap=function(){t(I,wu);var n=e(I);function I(t,e){var r;return g(this,I),(r=n.call(this,t,e)).isMulti?(r.__begin=[0],r.__end=[0],r.__r=[1],Array.isArray(e.begin)&&(r.__begin=e.begin.map(function(t){return Mp(t,0)})),Array.isArray(e.end)&&(r.__end=e.end.map(function(t){return Mp(t,0)})),Array.isArray(e.r)&&(r.__r=e.r.map(function(t){return Mp(t,1)})),Array.isArray(e.edge)&&(r.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(r.__closure=e.closure.map(function(t){return!!t}))):(r.__begin=r.__end=0,r.__r=1,r.__edge=!1,r.__closure=!1,Tp(e.begin)||(r.__begin=Mp(e.begin,0)),Tp(e.end)||(r.__end=Mp(e.end,0)),Tp(e.r)||(r.__r=Mp(e.r,1)),Tp(e.edge)||(r.__edge=!!e.edge),Tp(e.closure)||(r.__closure=!!e.closure)),r}return l(I,[{key:"buildCache",value:function(c,u){var t,e,r,n,i,a,o,s,_=this.width,h=this.begin,f=this.end,d=this.r,l=this.edge,p=this.closure,v=this.__cacheProps,y=this.isMulti;return Tp(v.begin)&&(t=!0,v.begin=h),Tp(v.end)&&(t=!0,v.end=f),Tp(v.r)&&(t=!0,v.r=y?d.map(function(t){return t*_*.5}):d*_*.5),d=v.r,Tp(v.edge)&&(t=!0,v.edge=l),Tp(v.closure)&&(t=!0,v.closure=p),t&&(y?(v.x1=[],v.x2=[],v.y1=[],v.y2=[],v.large=[],v.d=[],h.forEach(function(t,e){var r=Tp(d[e])?.5*_:d[e],n=ve(Op(c,u,r,t),2),i=n[0],a=n[1],o=ve(Op(c,u,r,f[e]||0),2),s=o[0],h=o[1],l=180<(f[e]||0)-t?1:0;v.x1.push(i),v.x2.push(s),v.y1.push(a),v.y2.push(h),v.large.push(l)})):(r=(e=ve(Op(c,u,d,h),2))[0],n=e[1],a=(i=ve(Op(c,u,d,f),2))[0],o=i[1],s=180<f-h?1:0,v.x1=r,v.x2=a,v.y1=n,v.y2=o,v.large=s)),t}},{key:"render",value:function(t,e,r,n){var i=this,a=rt(et(I.prototype),"render",this).call(this,t,e,r,n);if(a.break)return a;var o=a.cx,s=a.cy,h=a.fill,l=a.stroke,c=a.strokeWidth,u=a.strokeDasharrayStr,_=a.strokeLinecap,f=a.strokeLinejoin,d=a.strokeMiterlimit,p=a.dx,v=a.dy,y=this.width,g=this.__cacheProps,m=this.isMulti;this.buildCache(o,s);var E=g.begin,T=g.end,O=g.r,M=g.x1,A=g.y1,R=g.x2,b=g.y2,S=g.edge,x=g.large,k=g.closure;return t===ye.CANVAS?(r.beginPath(),m?E.forEach(function(t,e){return mn.canvasSector(r,o,s,O[e],M[e],A[e],R[e],b[e],c,t[e],T[e],x[e],S[e],k[e],p,v)}):mn.canvasSector(r,o,s,O,M,A,R,b,c,E,T,x,S,k,p,v),r.fill(),r.closePath()):t===ye.SVG&&(m?E.forEach(function(t,e){var r=Tp(O[e])?.5*y:O[e];i.__genSector(S[e],mn.svgSector(o,s,r,M[e],A[e],R[e],b[e],c,x[e],S[e],k[e]),h,l,c,u,_,f,d)}):this.__genSector(S,mn.svgSector(o,s,O,M,A,R,b,c,x,S,k),h,l,c,u,_,f,d)),a}},{key:"__genSector",value:function(t,e,r,n,i,a,o,s,h){var l,c;t?(l=[["d",e[0]],["fill",r],["stroke",n],["stroke-width",i]],this.__propsStrokeStyle(l,a,o,s,h),this.addGeom("path",l)):(this.addGeom("path",[["d",e[0]],["fill",r]]),0<i&&(c=[["d",e[1]],["fill","none"],["stroke",n],["stroke-width",i]],this.__propsStrokeStyle(c,a,o,s,h),this.addGeom("path",c)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[vp],h=o[yp],l=o[gp],c=o[mp],u=o[Ep],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=rt(et(I.prototype),"bbox",this),y=.5*l,g=ve(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),I}(),Rp=p.STYLE_KEY,bp=Rp.PADDING_TOP,Sp=Rp.PADDING_LEFT,xp=Rp.STROKE_WIDTH,kp=Rp.BOX_SHADOW,Ip=Rp.FILTER,Np=me.isNil;function Dp(t,e,r,n,i,a){var o=4<arguments.length&&void 0!==i?i:0,s=5<arguments.length&&void 0!==a?a:0;if(0===o||0===s)return[[t,e],[t+r,e],[t+r,e+n],[t,e+n],[t,e]];var h=o*Ee.H,l=s*Ee.H;return[[t+o,e],[t+r-o,e],[t+r+h-o,e,t+r,e+s-l,t+r,e+s],[t+r,e+n-s],[t+r,e+n+l-s,t+r+h-o,e+n,t+r-o,e+n],[t+o,e+n],[t+o-h,e+n,t,e+n+l-s,t,e+n-s],[t,e+s],[t,e+s-l,t+o-h,e,t+o,e]]}function wp(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var Cp=function(){t(T,wu);var n=e(T);function T(t,e){var r;return g(this,T),(r=n.call(this,t,e)).isMulti?(r.__rx=[0],r.__ry=[0],Array.isArray(e.rx)&&(r.__rx=e.rx.map(wp)),Array.isArray(e.ry)&&(r.__ry=e.ry.map(wp))):(r.__rx=r.__ry=0,Np(e.rx)||(r.__rx=wp(e.rx)),Np(e.ry)||(r.__ry=wp(e.ry))),r}return l(T,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return Np(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),Np(l.ry)&&(t=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(h,.5)*o),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return Dp(r,n,a,o,t,i[e])}):Dp(r,n,a,o,e,i)),t}},{key:"render",value:function(t,e,r,n){var i=rt(et(T.prototype),"render",this).call(this,t,e,r,n);if(i.break)return i;var a=i.originX,o=i.originY,s=i.fill,h=i.stroke,l=i.strokeWidth,c=i.strokeDasharrayStr,u=i.strokeLinecap,_=i.strokeLinejoin,f=i.strokeMiterlimit,d=i.dx,p=i.dy,v=this.__cacheProps,y=this.isMulti;this.buildCache(a,o);var g,m,E=v.list;return t===ye.CANVAS?(r.beginPath(),y?E.forEach(function(t){return mn.canvasPolygon(r,t,d,p)}):mn.canvasPolygon(r,E,d,p),r.fill(),0<l&&r.stroke(),r.closePath()):t===ye.SVG&&(g="",y?E.forEach(function(t){return g+=mn.svgPolygon(t)}):g=mn.svgPolygon(E),m=[["d",g],["fill",s],["stroke",h],["stroke-width",l]],this.__propsStrokeStyle(m,c,u,_,f),this.addGeom("path",m)),i}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.__sx2,e=this.__sy2,r=this.width,n=this.height,i=this.computedStyle,a=i[bp],o=i[Sp],s=i[xp],h=i[kp],l=i[Ip],c=t+o,u=e+a;this.buildCache(c,u);var _=rt(et(T.prototype),"bbox",this),f=.5*s,d=ve(this.__spreadByBoxShadowAndFilter(h,l),2),p=d[0],v=d[1];return p+=f,v+=f,_[0]=Math.min(_[0],c-p),_[1]=Math.min(_[1],u-v),_[2]=Math.min(_[2],c+r+p),_[3]=Math.min(_[3],u+n+v),_}}]),T}(),Pp=p.STYLE_KEY,Lp=Pp.PADDING_TOP,Fp=Pp.PADDING_LEFT,Bp=Pp.STROKE_WIDTH,Hp=Pp.BOX_SHADOW,Gp=Pp.FILTER,Yp=me.isNil;function Wp(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var Up=function(){t(R,wu);var n=e(R);function R(t,e){var r;return g(this,R),(r=n.call(this,t,e)).isMulti?(r.__r=[1],Array.isArray(e.r)?r.__r=e.r.map(Wp):Yp(e.r)||(r.__r=Wp(e.r))):(r.__r=1,Yp(e.r)||(r.__r=Wp(e.r))),r}return l(R,[{key:"buildCache",value:function(e,r){var n=this.width,t=this.r,i=this.__cacheProps,a=this.isMulti;Yp(i.r)&&(a?(i.r=t.map(function(t){return t*n*.5}),i.list=i.r.map(function(t){return Ee.ellipsePoints(e,r,t)})):(i.r=t*n*.5,i.list=Ee.ellipsePoints(e,r,i.r)))}},{key:"render",value:function(t,e,r,n){var i=rt(et(R.prototype),"render",this).call(this,t,e,r,n);if(i.break)return i;var a=i.cx,o=i.cy,s=i.fill,h=i.stroke,l=i.strokeWidth,c=i.strokeDasharrayStr,u=i.strokeLinecap,_=i.strokeLinejoin,f=i.strokeMiterlimit,d=i.dx,p=i.dy,v=this.__cacheProps,y=this.isMulti;this.buildCache(a,o);var g,m,E=v.list;return t===ye.CANVAS?(r.beginPath(),y?E.forEach(function(t){return mn.canvasPolygon(r,t,d,p)}):mn.canvasPolygon(r,E,d,p),r.fill(),0<l&&r.stroke(),r.closePath()):t===ye.SVG&&(g="",y?E.forEach(function(t){return g+=mn.svgPolygon(t)}):g=mn.svgPolygon(E),m=[["d",g],["fill",s],["stroke",h],["stroke-width",l]],this.__propsStrokeStyle(m,c,u,_,f),this.addGeom("path",m)),i}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[Lp],h=o[Fp],l=o[Bp],c=o[Hp],u=o[Gp],_=r+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p=0,p=t?(d=0,e.r.forEach(function(t){d=Math.max(t,d)}),d):e.r,v=rt(et(R.prototype),"bbox",this),y=.5*l,g=ve(this.__spreadByBoxShadowAndFilter(c,u),2),m=g[0],E=g[1],T=_-p-(m+=y),O=_+p+m,M=f-p-(E+=y),A=f+p+E;return v[0]=Math.min(v[0],T),v[1]=Math.min(v[1],M),v[2]=Math.max(v[2],O),v[3]=Math.max(v[3],A),v}}]),R}(),Xp=p.STYLE_KEY,Kp=Xp.PADDING_TOP,Vp=Xp.PADDING_LEFT,zp=Xp.STROKE_WIDTH,jp=Xp.BOX_SHADOW,$p=Xp.FILTER,qp=me.isNil;function Zp(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var Jp=function(){t(S,wu);var n=e(S);function S(t,e){var r;return g(this,S),(r=n.call(this,t,e)).isMulti?(r.__rx=[1],r.__ry=[1],Array.isArray(e.rx)?r.__rx=e.rx.map(Zp):qp(e.rx)||(r.__rx=[Zp(e.rx)]),Array.isArray(e.ry)?r.__ry=e.ry.map(Zp):qp(e.ry)||(r.__ry=[Zp(e.ry)])):(r.__rx=1,qp(e.rx)||(r.__rx=Zp(e.rx)),r.__ry=1,qp(e.ry)||(r.__ry=Zp(e.ry))),r}return l(S,[{key:"buildCache",value:function(r,n){var t,e,i,a=this.width,o=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return qp(l.rx)&&(t=!0,l.rx=c?s.map(function(t){return t*a*.5}):s*a*.5),qp(l.ry)&&(t=!0,l.ry=c?h.map(function(t){return t*o*.5}):h*o*.5),t&&(e=l.rx,i=l.ry,l.list=c?e.map(function(t,e){return Ee.ellipsePoints(r,n,t,i[e])}):Ee.ellipsePoints(r,n,e,i)),t}},{key:"render",value:function(t,e,r,n){var i=rt(et(S.prototype),"render",this).call(this,t,e,r,n);if(i.break)return i;var a=i.cx,o=i.cy,s=i.fill,h=i.stroke,l=i.strokeWidth,c=i.strokeDasharrayStr,u=i.strokeLinecap,_=i.strokeLinejoin,f=i.strokeMiterlimit,d=i.dx,p=i.dy,v=this.__cacheProps,y=this.isMulti;this.buildCache(a,o);var g,m,E=v.list;return t===ye.CANVAS?(r.beginPath(),y?E.forEach(function(t){return mn.canvasPolygon(r,t,d,p)}):mn.canvasPolygon(r,E,d,p),r.fill(),0<l&&r.stroke(),r.closePath()):t===ye.SVG&&(g="",y?E.forEach(function(t){return g+=mn.svgPolygon(t)}):g=mn.svgPolygon(E),m=[["d",g],["fill",s],["stroke",h],["stroke-width",l]],this.__propsStrokeStyle(m,c,u,_,f),this.addGeom("path",m)),i}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t=this.isMulti,r=this.__cacheProps,e=this.__sx2,n=this.__sy2,i=this.width,a=this.height,o=this.computedStyle,s=o[Kp],h=o[Vp],l=o[zp],c=o[jp],u=o[$p],_=e+h+.5*i,f=n+s+.5*a;this.buildCache(_,f);var d,p,v=0,y=0,y=t?(p=d=0,r.rx.forEach(function(t,e){d=Math.max(t,d),p=Math.max(y,r.ry[e])}),v=d,p):(v=r.rx,r.ry),g=rt(et(S.prototype),"bbox",this),m=.5*l,E=ve(this.__spreadByBoxShadowAndFilter(c,u),2),T=E[0],O=E[1],M=_-v-(T+=m),A=_+v+T,R=f-y-(O+=m),b=f+y+O;return g[0]=Math.min(g[0],M),g[1]=Math.min(g[1],R),g[2]=Math.max(g[2],A),g[3]=Math.max(g[3],b),g}}]),S}(),Qp={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of"},tv={os:"offset",e:"easing",ft:"filter",bd:"boxShadow",of:"overflow"},ev={value:"v",options:"o"},rv={},nv={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},iv={};Rt.DOM_KEY_SET.concat(Rt.GEOM_KEY_SET).forEach(function(t){var e;Qp.hasOwnProperty(t)?tv[Qp[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),Qp[t]=e,tv[e]=t)}),Object.keys(ev).forEach(function(t){rv[ev[t]]=t}),Object.keys(nv).forEach(function(t){iv[nv[t]]=t});var av={fullCssProperty:Qp,abbrCssProperty:tv,fullAnimate:ev,abbrAnimate:rv,fullAnimateOption:nv,abbrAnimateOption:iv},ov=k.TYPE_VD,sv=k.TYPE_GM,hv=k.TYPE_CP,lv=me.isNil,cv=me.isFunction,uv=me.isPrimitive,_v=me.clone,fv=me.extend,dv=av.abbrCssProperty,pv=av.abbrAnimateOption,vv=av.abbrAnimate;function yv(i,a){i&&Object.keys(i).forEach(function(t){var e,r,n;0===t.indexOf("var-")?(e=t.slice(4),a.hasOwnProperty(e)&&(r=a[e],i["var-"+r]=i[t])):a.hasOwnProperty(t)&&(n=a[t],i[n]=i[t],delete i[t])})}function gv(s,h){s&&h&&Object.keys(s).forEach(function(t){if(0===t.indexOf("var-")){var e=s[t];if(!e)return;var r=t.slice(4);if(e.id&&h.hasOwnProperty(e.id)){var n=h[e.id];if(void 0===n)return;if(-1<r.indexOf(".")){for(var i=r.split("."),a=i.length,o=0;o<a-1;o++)r=i[o],s[r]?s=s[r]:Te.error("parseJson vars is not exist: "+e.id+", "+t+", "+i.slice(0,o).join("."));r=i[a-1]}cv(n)&&(n=n(e)),s[r]=n}}})}function mv(e,r){e.tagName=r.tagName,e.props=_v(r.props),e.children=r.children,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,n,i=e.init;i&&(n=(t=e.props=e.props||{}).style,fv(t,i),n&&(fv(n,i.style),t.style=n),e.init=null)}function Ev(r,t,n,i,e){var a=4<arguments.length&&void 0!==e?e:{};if(uv(t)||t instanceof R)return t;if(Array.isArray(t))return t.map(function(t){return Ev(r,t,n,i,a)});var o=t.library,s=t.libraryId;if(Array.isArray(o))a={},o.forEach(function(t){!function(t,n){var e=t.id,r=t.children;if(Array.isArray(r)&&r.forEach(function(t){if(!uv(t)){var e=t.libraryId;if(lv(e))return;var r=n[e];if(!r)throw new Error("Link library item miss libraryId: "+e);mv(t,r)}}),lv(e))throw new Error("Library item miss id: "+JSON.stringify(t));n[e]=t}(t,a)}),t.library=null,t.libraryId=null;else if(!lv(s)&&a){var h=a[s];if(!h)throw new Error("Link library miss id: "+s);mv(t,h)}var l=t.tagName,c=t.props,u=void 0===c?{}:c,_=t.children,f=void 0===_?[]:_,d=t.animate,p=void 0===d?[]:d,v=t.__animateRecords;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var y,g,m,E,T,O=u.style;return yv(O,dv),gv(O,i),gv(u,i),gv(t,i),y="$"===l.charAt(0)?r.createGm(l,u):r.createVd(l,u,f.map(function(t,e){return t&&-1<[ov,sv,hv].indexOf(t.$$type)?t:Ev(r,t,n,i,a)})),v&&(y.__animateRecords=v),p&&(Array.isArray(p)?(p.forEach(function(t){yv(t,vv);var e=t.value,r=t.options;Array.isArray(e)&&e.length&&(m=!0,e.forEach(function(t){yv(t,dv),gv(t,i)})),r&&(yv(r,pv),gv(r,i))}),m&&(g={animate:p,target:y})):(yv(p,vv),E=p.value,T=p.options,Array.isArray(E)&&E.length&&(E.forEach(function(t){yv(t,dv),gv(t,i)}),g={animate:p,target:y}),T&&(yv(T,pv),gv(T,i)))),g&&n.push(g),y}var Tv={parse:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:{};e=me.clone(e),Te.isDom(r)||(i=r||{},r=null);var a=[],o=Ev(t,e,a,i.vars);if(r){var s=e.tagName;if(-1===["canvas","svg"].indexOf(s))throw new Error("Parse dom must be canvas/svg");var h=i.controller instanceof O_?i.controller:o.animateController;t.render(o,r),a.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(h.__auto=h.__auto.concat(a),h.__playAuto()):h.__records=h.__records.concat(a)}else a.length&&(o.__animateRecords={options:i,list:a,controller:i.controller instanceof O_?i.controller:null});return o},abbr:av},Ov={css:Qr,reset:Rt,unit:b,font:S},Mv={Animation:po,Controller:O_,easing:Gi,frame:xi},Av={level:Ao,change:pe,Page:ko,Cache:Ho};wu.register("$line",tp),wu.register("$polyline",fp),wu.register("$polygon",dp),wu.register("$sector",Ap),wu.register("$rect",Cp),wu.register("$circle",Up),wu.register("$ellipse",Jp);var Rv={version:"0.44.8",render:function(t,e){if(!(t instanceof Wd))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],n=2,i=arguments.length;n<i;n++)r.push(arguments[n]);return me.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];if(-1<["canvas","svg"].indexOf(t))return new Wd(t,e,n);if(Tl.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:n,$$type:k.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:k.TYPE_GM}},createCp:function(t,e,r){var n=2<arguments.length&&void 0!==r?r:[];return e.children=n,{klass:t,props:e,$$type:k.TYPE_CP}},parse:function(t,e,r){return Tv.parse(this,t,e,r)},mode:ye,Component:El,Node:R,Text:yn,Geom:wu,Xom:al,Dom:vc,Img:Uc,Root:Wd,Event:Ai,util:me,inject:Te,style:Ov,parser:Tv,animate:Mv,math:An,builder:pl,updater:Qu,refresh:Av,enums:p};return pl.ref({Xom:al,Dom:vc,Img:Uc,Geom:wu,Component:El}),Qu.ref({Xom:al,Dom:vc,Img:Uc,Geom:wu,Component:El}),"undefined"!=typeof window&&(window.karas=Rv),Rv});
//# sourceMappingURL=index.min.js.map
