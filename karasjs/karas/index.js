!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(a){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e,i,r,n=U(a);return e=o?(t=U(this).constructor,Reflect.construct(n,arguments,t)):n.apply(this,arguments),i=this,!(r=e)||"object"!=typeof r&&"function"!=typeof r?s(i):r}}function Z(t,e,i){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var i=[],r=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(t){n=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw a}}return i}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var x=function(){function t(){h(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__prev=null,this.__next=null,this.__parent=null,this.__root=null,this.__host=null}return u(t,[{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t}},{key:"__destroy",value:function(){this.__isDestroyed=!0,this.__parent=null}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),t}(),c={}.toString;function f(e){return function(t){return c.call(t)==="[object "+e+"]"}}function d(t){return p(t)?"":t.toString()}function p(t){return null==t}function _(t){if("item"===t.type||"img"===t.type){var e="";return t.props.forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var i="";return t.children.forEach(function(t){i+=_(t)}),"<g>"+i+"</g>"}if("dom"===t.type||"geom"===t.type){var r="<g";t.bbMask&&(r+=' mask="'+t.bbMask+'"'),r+=">",t.bb.forEach(function(t){r+=_(t)}),r+="</g><g",t.conMask&&(r+=' mask="'+t.conMask+'"'),r+=">",t.children.forEach(function(t){t.isMask||(r+=_(t))}),r+="</g>";var n=t.opacity,a=t.transform,o=t.mask,s=t.filter;return"<g"+(1!==n?' opacity="'+n+'"':"")+(a?' transform="'+a+'"':"")+(o?' mask="'+o+'"':"")+(s?' filter="'+s+'"':"")+">"+r+"</g>"}}function y(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),t.props.forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",t.children.forEach(function(t){var e,i;r+=(i="<"+(e=t).tagName,e.props.forEach(function(t){i+=" "+t[0]+'="'+t[1]+'"'}),i+="></"+e.tagName+">")}),r+="</"+t.tagName+">"}function v(t,e){for(var i=t.length?t[0]:"",r=1,n=t.length;r<n;r++)i+=e+t[r];return i}var be={isObject:f("Object"),isString:f("String"),isFunction:f("Function"),isNumber:f("Number"),isBoolean:f("Boolean"),isDate:f("Date"),isNil:p,isPrimitive:function(t){return be.isNil(t)||be.isBoolean(t)||be.isString(t)||be.isNumber(t)},stringify:d,joinSourceArray:function t(e){for(var i="",r=0,n=e.length;r<n;r++){var a=e[r];Array.isArray(a)?i+=t(a):i+=d(a)}return i},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=y(t)}),e+="</defs><g",t.bbMask&&(e+=' mask="'+t.bbMask+'"'),e+=">",t.bb.forEach(function(t){e+=_(t)}),e+="</g><g",t.conMask&&(e+=' mask="'+t.conMask+'"'),e+=">",t.children.forEach(function(t){t.isMask||(e+=_(t))}),e+="</g>"},joinVd:_,joinDef:y,rgba2int:function(t){if(Array.isArray(t))return t;var e,i=[];return t&&"transparent"!==t?"#"===t.charAt(0)?(3===(t=t.slice(1)).length?(i.push(parseInt(t.charAt(0)+t.charAt(0),16)),i.push(parseInt(t.charAt(1)+t.charAt(1),16)),i.push(parseInt(t.charAt(2)+t.charAt(2),16))):6===t.length?(i.push(parseInt(t.slice(0,2),16)),i.push(parseInt(t.slice(2,4),16)),i.push(parseInt(t.slice(4),16))):i[0]=i[1]=i[2]=0,i[3]=1):(e=t.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(i=[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])],p(e[4])?i[3]=1:i[3]=parseFloat(e[4])):i=[0,0,0,0]:i=[0,0,0,0],i},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+v(t,",")+")";if(3===t.length)return"rgba("+v(t,",")+",1)"}return t||"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n))e[n[0]]=n[1];else for(var a=Object.keys(n),o=a.length-1;0<=o;o--){var s=a[o];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],i=Object.keys(t),r=0,n=i.length;r<n;r++){var a=i[r];e.push([a,t[a]])}return e},clone:function e(i){if(p(i)||"object"!==a(i))return i;if(be.isDate(i))return new Date(i);var r=Array.isArray(i)?[]:{};return Object.keys(i).forEach(function(t){r[t]=e(i[t])}),r},equalArr:function t(e,i){if(e.length!==i.length)return!1;for(var r=0,n=e.length;r<n;r++){var a=e[r],o=i[r],s=Array.isArray(a),h=Array.isArray(o);if(s&&h){if(!t(a,o))return!1}else if(s||h)return!1;if(a!==o)return!1}return!0},extend:function(t,e,i){if(null===e||"object"!==a(e))return t;for(var r=(i=i||Object.keys(e)).length;r--;){var n=i[r];t[n]=e[n]}return t},joinArr:v};var g={init:function(t,e,i){var r=t.props.ref;be.isString(r)&&r?i.ref[r]=t:be.isFunction(r)&&r(t),t.__root=e,t.__host=i}},xe={CANVAS:0,SVG:1},m={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7};var Me={identity:function(){return[1,0,0,1,0,0]},multiply:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},calPoint:function(t,e){var i=me(t,2),r=i[0],n=i[1];return[e[0]*r+e[2]*n+e[4],e[1]*r+e[3]*n+e[5]]}};function k(t,e,i,r){return t*r-i*e}function b(t,e,i,r){return Math.sqrt(Math.pow(i-t,2)+Math.pow(r-e,2))}var X={vectorProduct:k,pointInPolygon:function(t,e,i){for(var r=me(i[0],2),n=r[0],a=r[1],o=me(i[0],2),s=o[0],h=o[1],u=i.length,l=1;l<u;l++)var c=me(i[l],2),f=c[0],d=c[1],n=Math.max(n,f),a=Math.max(a,d),s=Math.min(s,f),h=Math.min(h,d);if(t<s||e<h||n<t||a<e)return!1;for(var p=0,_=i.length;p<_;p++){var y=me(i[p],2),v=y[0],g=y[1],m=me(i[(p+1)%_],2);if(k(m[0]-v,m[1]-g,t-v,e-g)<0)return!1}return!0},transformPoint:function(t,e,i){var r=me(t,6),n=r[0],a=r[1],o=r[2],s=r[3];return[n*e+o*i+r[4],a*e+s*i+r[5]]},d2r:function(t){return t*Math.PI/180},r2d:function(t){return 180*t/Math.PI},H:4*(Math.sqrt(2)-1)/3,h:function(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3},angleBySide:function(t,e,i){var r=(Math.pow(e,2)+Math.pow(i,2)-Math.pow(t,2))/(2*e*i);return Math.acos(r)},pointsDistance:b,triangleIncentre:function(t,e,i,r,n,a){var o=b(i,r,n,a),s=b(t,e,n,a),h=b(t,e,i,r);return[(o*t+s*i+h*n)/(o+s+h),(o*e+s*r+h*a)/(o+s+h)]}};function j(t,e,i,r){var n=i-t,a=r-e,o=Math.atan(Math.abs(a)/Math.abs(n));return n<0&&0<=a?Math.PI-o:n<0&&a<0?o-Math.PI:0<=n&&0<=a?o:-o}function Y(t){var e=Math.sin(t),i=Math.cos(t),r=Me.identity();return r[0]=r[3]=i,r[1]=e,r[2]=-e,r}function V(t,e){var i=me(t,6),r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],h=i[5],u=me(e,6),l=u[0],c=u[1],f=u[2],d=u[3],p=u[4],_=(a-r)*(h-n)-(s-r)*(o-n),y=(f-l)*(u[5]-c)-(p-l)*(d-c);return 0<_&&y<0||_<0&&0<y}var M={exchangeOrder:function(t,e){var i,r,n,a,o,s,h,u,l,c,f,d,p,_,y,v,g=(l=me(t,6),c=l[0],f=l[1],d=l[2],p=l[3],_=l[4],y=l[5],v=[0,1,2],d<c&&d<_?(c=(i=[d,p,c,f])[0],f=i[1],d=i[2],p=i[3],v[0]=1,v[1]=0):_<d&&_<c&&(c=(r=[_,y,c,f])[0],f=r[1],_=r[2],y=r[3],v[0]=2,v[2]=0),c===d?p<f&&(c=(n=[d,p,c,f])[0],f=n[1],d=n[2],p=n[3],a=v[0],v[0]=v[1],v[1]=a):c===_&&y<f&&(c=(o=[_,y,c,f])[0],f=o[1],_=o[2],y=o[3],s=v[0],v[0]=v[2],v[2]=s),(d-c)*(y-f)-(_-c)*(p-f)<0&&(d=(h=[_,y,d,p])[0],p=h[1],_=h[2],y=h[3],u=v[1],v[1]=v[2],v[2]=u),[c,f,d,p,_,y,v]),m=me(g,7),k=m[0],b=m[1],x=m[2],M=m[3],w=m[4],S=m[5],A=me(function(t,e){for(var i=[],r=0,n=e.length;r<n;r++){var a=e[r];i.push(t[2*a]),i.push(t[2*a+1])}return i}(e,m[6]),6);return[[k,b,x,M,w,S],[A[0],A[1],A[2],A[3],A[4],A[5]]]},isOverflow:V,transform:function(t,e){var i,r=me(t,6),n=r[0],a=r[1],o=r[2],s=r[3],h=r[4],u=r[5],l=me(e,6),c=l[0],f=l[1],d=l[2],p=l[3],_=l[4],y=l[5],v=V(t,e),g=Me.identity();g[4]=-n,g[5]=-a;var m=j(n,a,o,s);0!==m&&(i=Y(-m),g=Me.multiply(i,g));var k=X.pointsDistance(n,a,o,s),b=X.pointsDistance(c,f,d,p),x=Me.identity();x[4]=-c,x[5]=-f;var M=m=j(c,f,d,p);0!==m&&(i=Y(-m),x=Me.multiply(i,x));var w=Math.abs(Me.calPoint([h,u],g)[1]),S=Math.abs(Me.calPoint([_,y],x)[1]);k===b&&w===S||(i=Me.identity(),k!==b&&(i[0]=b/k),w!==S&&(i[3]=S/w),g=Me.multiply(i,g)),x=g;var A=me(Me.calPoint([n,a],x),2),E=A[0],P=A[1],R=me(Me.calPoint([o,s],x),2),T=R[0],L=R[1],C=me(Me.calPoint([h,u],x),2),O=C[0],W=C[1],N=X.pointsDistance(E,P,T,L),I=X.pointsDistance(E,P,O,W),D=X.pointsDistance(O,W,T,L),B=X.pointsDistance(c,f,d,p),F=X.pointsDistance(c,f,_,y),H=X.pointsDistance(_,y,d,p),z=X.angleBySide(D,N,I),G=X.angleBySide(H,B,F);return z!==G&&((i=Me.identity())[2]=Math.tan(z-.5*Math.PI)+Math.tan(.5*Math.PI-G),g=Me.multiply(i,g)),v&&(g[1]=-g[1],g[3]=-g[3],g[5]=-g[5]),(i=0!==M?Y(M):Me.identity())[4]=c,i[5]=f,g=Me.multiply(i,g)}},w={matrix:Me,tar:M,geom:X},S=m.PX,A=m.PERCENT,E=w.matrix,P=w.geom,R=P.d2r,T=P.transformPoint;function L(t,e,i){var n,a,o,r=(n=e,a=i,o=[],t.forEach(function(t){var e=me(t,2),i=e[0],r=e[1];o.push([i,function(t,e,i,r){if("translateX"===t){if(e.unit===A)return e.value*i*.01}else if("translateY"===t){if(e.unit===A)return e.value*r*.01}else if("matrix"===t)return e;return e.value}(i,r,n,a)])}),o),l=E.identity();return r.forEach(function(t){var e,i,r,n,a,o=me(t,2),s=o[0],h=o[1],u=E.identity();e=u,r=h,"translateX"===(i=s)?e[4]=r:"translateY"===i?e[5]=r:"scaleX"===i?e[0]=r:"scaleY"===i?e[3]=r:"skewX"===i?(r=R(r),e[2]=Math.tan(r)):"skewY"===i?(r=R(r),e[1]=Math.tan(r)):"rotateZ"===i?(r=R(r),n=Math.sin(r),a=Math.cos(r),e[0]=e[3]=a,e[1]=n,e[2]=-n):"matrix"===i&&(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5]),l=E.multiply(l,u)}),l}function C(t,e){var i=me(e,2),r=i[0],n=i[1];if(0===r&&0===n)return t;var a=E.identity();a[4]=r,a[5]=n;var o=E.multiply(a,t),s=E.identity();return s[4]=-r,s[5]=-n,o=E.multiply(o,s)}var we={calMatrix:L,calOrigin:function(t,i,r){var n=[];return t.forEach(function(t,e){t.unit===S?n.push(t.value):t.unit===A&&n.push(t.value*(e?r:i)*.01)}),n},calMatrixByOrigin:C,calMatrixWithOrigin:function(t,e,i,r){return C(L(t,i,r),e)},pointInQuadrilateral:function(t,e,i,r,n,a,o,s,h,u,l){if(!l||be.equalArr(l,[1,0,0,1,0,0]))return i<=t&&r<=e&&t<=o&&e<=s;var c=me(T(l,i,r),2);i=c[0],r=c[1];var f=me(T(l,n,a),2);n=f[0],a=f[1];var d=me(T(l,o,s),2);o=d[0],s=d[1];var p=me(T(l,h,u),2);return h=p[0],u=p[1],P.pointInPolygon(t,e,[[i,r],[n,a],[o,s],[h,u]])}},O={position:/((-?[\d.]+(px|%)?)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i},te=be.rgba2int,ee=be.int2rgba,W=be.isNil,N=m.PX,ie=m.PERCENT,I=X.d2r;function D(t){if(/%$/.test(t)||/px$/.test(t)||/^-?[\d.]+$/.test(t))return{value:parseFloat(t),unit:/%/.test(t)?ie:N};var e={value:{top:0,left:0,center:50,right:100,bottom:100}[t],unit:ie};return W(e.value)&&(e.value=50),e}function B(t,e){for(var i,r=[],n=0,a=t.length;n<a;n++){var o,s,h=t[n];1<h.length?(o=ee(h[0]),(s=h[1]).unit===ie?r.push([o,.01*s.value]):r.push([o,s.value/e])):r.push([ee(h[0])])}1===r[0].length&&r[0].push(0),1<r.length&&(1===r[i=r.length-1].length&&r[i].push(1));for(var u=r[0][1],l=1,c=r.length;l<c-1;l++){var f=r[l];if(1<f.length)u=f[1];else{for(var d=l+1,p=r[r.length-1][1];d<c-1;d++){var _=r[d];if(1<_.length){p=_[1];break}}for(var y=(p-u)/(d-l+1),v=l;v<d;v++){r[v].push(u+y*(v+1-l))}l=d}}for(var g=1,m=r.length;g<m;g++){var k=r[g],b=r[g-1];k[1]<b[1]&&(k[1]=b[1])}for(var x=0,M=r.length;x<M-1;x++){if(1<r[x][1]){r.splice(x+1);break}}for(var w=r.length-1;0<w;w--){if(r[w][1]<0){r.splice(0,w);break}}var S,A,E,P,R,T,L,C,O,W,N,I,D,B,F,H,z,G,X,j,Y,V,q,$,U,Z,Q,J,K,tt,et,it,rt,nt,at,ot,st,ht,ut,lt,ct,ft,dt,pt,_t,yt,vt,gt,mt,kt,bt,xt,Mt,wt,St,At,Et,Pt,Rt,Tt,Lt,Ct,Ot,Wt,Nt,It,Dt,Bt,Ft=r.length;if(1===Ft)r[0][1]=0;else{for(var Ht,zt,Gt,Xt,jt,Yt,Vt,qt,$t,Ut,Zt=!0,Qt=!0,Jt=Ft-1;0<=Jt;Jt--){var Kt=r[Jt][1];0<Kt&&(Zt=!1),Kt<1&&(Qt=!1)}Zt?(r.splice(0,Ft-1),r[0][1]=0):Qt?(r.splice(1),r[0][1]=0):(Ht=r[0],zt=r[Ft-1],2===Ft?Ht[1]<0&&1<zt[1]&&(yt=zt,vt=e,gt=te((_t=Ht)[0]),mt=te(yt[0]),kt=me(gt,4),bt=kt[0],xt=kt[1],Mt=kt[2],wt=kt[3],St=void 0===wt?1:wt,At=me(mt,4),Et=At[0],Pt=At[1],Rt=At[2],Tt=At[3],Lt=void 0===Tt?1:Tt,Ct=Math.abs(_t[1])*vt,Ot=yt[1]*vt,Wt=Ct/(Ct+Ot),Nt=Math.floor(bt+(Et-bt)*Wt),It=Math.floor(xt+(Pt-xt)*Wt),Dt=Math.floor(Mt+(Rt-Mt)*Wt),Bt=St+(Lt-St)*Wt,_t[0]="rgba("+Nt+","+It+","+Dt+","+Bt+")",_t[1]=0,Wt=(vt+Ct)/(Ct+Ot),Nt=Math.floor(bt+(Et-bt)*Wt),It=Math.floor(xt+(Pt-xt)*Wt),Dt=Math.floor(Mt+(Rt-Mt)*Wt),Bt=St+(Lt-St)*Wt,yt[0]="rgba("+Nt+","+It+","+Dt+","+Bt+")",yt[1]=1):(Ht[1]<0&&(Gt=r[1],Xt=te(Ht[0]),jt=te(Gt[0]),q=Xt,$=Ht[1],U=jt,Z=Gt[1],Q=e,J=me(q,4),K=J[0],tt=J[1],et=J[2],it=J[3],rt=void 0===it?1:it,nt=me(U,4),at=nt[0],ot=nt[1],st=nt[2],ht=nt[3],ut=void 0===ht?1:ht,lt=Math.abs($)*Q,ct=lt/(Z*Q+lt),ft=Math.floor(K+(at-K)*ct),dt=Math.floor(tt+(ot-tt)*ct),pt=Math.floor(et+(st-et)*ct),Yt=[ft,dt,pt,rt+(ut-rt)*ct],Ht[0]="rgba("+Yt[0]+","+Yt[1]+","+Yt[2]+","+Yt[3]+")",Ht[1]=0),1<zt[1]&&(Vt=r[Ft-2],qt=te(Vt[0]),$t=te(zt[0]),S=qt,A=Vt[1],E=$t,P=zt[1],R=e,T=me(S,4),L=T[0],C=T[1],O=T[2],W=T[3],N=void 0===W?1:W,I=me(E,4),D=I[0],B=I[1],F=I[2],H=I[3],z=void 0===H?1:H,X=(R-(G=A*R))/(P*R-G),j=Math.floor(L+(D-L)*X),Y=Math.floor(C+(B-C)*X),V=Math.floor(O+(F-O)*X),Ut=[j,Y,V,N+(z-N)*X],zt[0]="rgba("+Ut[0]+","+Ut[1]+","+Ut[2]+","+Ut[3]+")",zt[1]=1)))}return r.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),r}var F={parseGradient:function(t){var e,i,r,n=O.gradient.exec(t);if(n){var a,o,s,h,u,l={k:n[1]};"linear"===l.k?(a=/(-?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(n[2]),l.d=a?(e=a[0].toLowerCase(),r=180,"to top"===e?r=0:"to top right"===e?r=45:"to right"===e?r=90:"to bottom right"===e?r=135:"to bottom"===e||("to bottom left"===e?r=225:"to left"===e?r=270:"to top left"===e?r=315:(i=/(-?[\d.]+)deg/.exec(e))&&(r=parseFloat(i[1]))),r%360):180):"radial"===l.k&&(l.s=-1<n[2].indexOf("ellipse")?"ellipse":"circle",o=/(closest|farthest)-(side|corner)/i.exec(n[2]),l.z=o?o[0].toLowerCase():"farthest-corner",(s=/at\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center))(?:\s+((?:-?[\d.]+(?:px|%)?)|(?:left|top|right|bottom|center)))?/i.exec(n[2]))?(h=D(s[1]),u=s[2]?D(s[2]):h,l.p=[h,u]):l.p=[{value:50,unit:ie},{value:50,unit:ie}]);var c=n[2].match(/((#[0-9a-f]{3,6})|(rgba?\(.+?\)))\s*(-?[\d.]+(px|%))?/gi);return l.v=c.map(function(t){var e=/((?:#[0-9a-f]{3,6})|(?:rgba?\(.+?\)))\s*(-?[\d.]+(?:px|%))?/i.exec(t),i=[te(e[1])];return e[2]&&(i[1]={value:parseFloat(e[2])},/%$/.test(e[2])?i[1].unit=ie:i[1].unit=N),i}),l}},getLinear:function(t,e,i,r,n,a){var o,s,h,u,l,c,f,d,p,_,y,v,g=I(e),m=Math.abs(n*Math.sin(g))+Math.abs(a*Math.cos(g)),k=me((s=.5*m,h=i,u=r,p=270<=(o=e)?(l=I(360-o),c=h+Math.sin(l)*s,f=u+Math.cos(l)*s,d=h-Math.sin(l)*s,u-Math.cos(l)*s):180<=o?(_=I(o-180),c=h+Math.sin(_)*s,f=u-Math.cos(_)*s,d=h-Math.sin(_)*s,u+Math.cos(_)*s):90<=o?(y=I(180-o),c=h-Math.sin(y)*s,f=u-Math.cos(y)*s,d=h+Math.sin(y)*s,u+Math.cos(y)*s):(v=I(o),c=h-Math.sin(v)*s,f=u+Math.cos(v)*s,d=h+Math.sin(v)*s,u-Math.cos(v)*s),[c,f,d,p]),4);return{x1:k[0],y1:k[1],x2:k[2],y2:k[3],stop:B(t,m)}},getRadial:function(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y,v,g,m,k,b,x,M,w,S,A,E=o-n,P=s-a,R=me((h=i,l=E,c=P,f=n,d=a,p=o,_=s,w=(u=r)[0].unit===N?f+u[0].value:f+u[0].value*l*.01,S=u[1].unit===N?d+u[1].value:d+u[1].value*c*.01,["closest-side"===h?w<=f||p<=w||S<=d||_<=S?0:(y=w<f+.5*l?w-f:p-w,v=S<d+.5*c?S-d:_-S,Math.min(y,v)):"closest-corner"===h?(g=w<f+.5*l?w-f:p-w,m=S<d+.5*c?S-d:_-S,Math.sqrt(Math.pow(g,2)+Math.pow(m,2))):"farthest-side"===h?w<=f?f-w+l:p<=w?w-p+l:S<=d?d-S+c:_<=w?S-_+c:(k=Math.max(p-w,w-f),b=Math.max(_-S,S-d),Math.max(k,b)):(x=w<f+.5*l?p-w:w-f,M=S<d+.5*c?_-S:S-d,Math.sqrt(Math.pow(x,2)+Math.pow(M,2))),w,S]),3),T=R[0],L=R[1],C=R[2],O=B(t,2*T);return T<=0&&((A=O[O.length-1])[1]=0,O=[A],L=n,C=a,T=E+P),{cx:L,cy:C,r:T,stop:O}}},H=X.H;function z(t,e,i,r,n,a,o,s){var h=1,u=1,l=1;t:for(var c=a;n<=c;c--)for(var f=s;o<=f;f--){var d=c+f,p=Math.floor((t+f)/d),_=f;if(p*d<f+t)if(s<(_=(t-p*c)/(p-1)))continue;if(d=c+_,1<e&&c<e){if(c<e%d)continue;if(1<i)if(c<(e+r)%d)continue}if(1<i)if(c<(e+r)%d)continue;0<p&&(h=p,u=c,l=_);break t}return{n:h,ps:u,pd:l}}function G(t,e,i,r,n,a){var o=n-e,s=r-i,h=i-e,u=n-r;if("dotted"===t)return z(o,h,u,s,a,a,Math.max(1,.25*a),2*a);var l=z(o,h,u,s,a,3*a,Math.max(1,.25*a),2*a),c=l.n,f=l.ps,d=l.pd;return 1===c?z(o,h,u,s,a,a,Math.max(1,.25*a),2*a):{n:c,ps:f,pd:d}}function q(t,e,i,r,n,a,o,s,h,u,l,c,f,d){var p=me(f,2),_=p[0],y=p[1],v=me(d,2),g=v[0],m=v[1];if(!(_&&y||g&&m))return c;for(var k,b,x,M,w,S,A,E=n+_-(n-r),P=a-g+(o-a),R=[],T=[],L=[],C=0,O=c.length;C<O;C++){var W,N,I,D,B=c[C];B[1][0]<E?R.push(B):B[0][0]>P?L.push(B):B[1][0]>P&&B[0][0]<E?(W=E<n?s+Math.tan(e)*(E-r):h,N=a<P?s+Math.tan(i)*(o-P):h,R.push([B[0],[E,s],[E,W],B[3]]),E<P&&(n<E&&P<a?T.push([[E,s],[P,s],[P,h],[E,h]]):n<E?(T.push([[E,s],[a,s],[a,h],[E,h]]),T.push([[a,s],[P,s],[P,N],[a,h]])):P<a?(T.push([[E,s],[n,s],[n,h],[E,W]]),T.push([[n,s],[P,s],[P,h],[n,h]])):(T.push([[E,s],[n,s],[n,h],[E,W]]),T.push([[n,s],[a,s],[a,h],[n,h]]),T.push([[a,s],[P,s],[P,N],[a,h]]))),L.push([[P,s],B[1],B[2],[P,N]])):B[1][0]>P?(I=a<P?s+Math.tan(i)*(o-P):h,T.push([B[0],[P,s],[P,I],B[3]]),L.push([[P,s],B[1],B[2],[P,I]])):B[0][0]<E?(D=E<n?s+Math.tan(e)*(E-r):h,R.push([B[0],[E,s],[E,D],B[3]]),T.push([[E,s],B[1],B[2],[E,D]])):T.push(B)}R.length&&(k=n-r<_&&t<y,b=Math.atan((n-r)/(h-s)),M=(x=y)/_,w=s+y,A=(S=y-(h-s))/(_-(n-r)),R.forEach(function(t,e){var i,r;0===e?(i=$(t[0],t[1],E,w,M,x,!0,Math.tan(b)*x),k&&(r=$(t[3],t[2],E,w,A,S,!0,Math.tan(b)*S))):(i=$(t[0],t[1],E,w,M,x),k&&(r=$(t[3],t[2],E,w,A,S))),t[0]=i[0],t[1]=i[1].concat(i[2]).concat(i[3]),k&&(1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[3],t[3]=r[2].concat(r[1]).concat(r[0])))}));var F,H,z,G,X,j,Y,V=L.length;return V&&(F=o-a<g&&t<m,H=Math.atan((o-a)/(h-s)),G=(z=m)/g,X=s+m,Y=(j=m-(h-s))/(g-(o-a)),L.forEach(function(t,e){var i,r;e===V-1?(i=Q(t[0],t[1],P,X,G,z,!0,Math.tan(H)*z),F&&(r=Q(t[3],t[2],P,X,Y,j,!0,Math.tan(H)*j))):(i=Q(t[0],t[1],P,X,G,z),F&&(r=Q(t[3],t[2],P,X,Y,j))),t[0]=i[0],t[1]=i[1].concat(i[2]).concat(i[3]),F&&(1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[3],t[3]=r[2].concat(r[1]).concat(r[0])))})),R.concat(T).concat(L)}function $(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(-v+i)*n,M=(-k+i)*n,w=Math.atan(M/(r-b)),S=i-Math.sin(w)*a/n,A=r-Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i-Math.cos(f)*a/n,r-Math.sin(f)*a):(d=Math.atan(x/(r-g)),p=i-Math.sin(d)*a/n,r-Math.cos(d)*a),d===w)return[[p,_]];var E=X.h(Math.abs(d-w))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=d-R,L=w+R;return[[p,_],[i-Math.sin(T)*P/n,r-Math.cos(T)*P],[i-Math.sin(L)*P/n,r-Math.cos(L)*P],[S,A]]}function Q(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(v-i)*n,M=(k-i)*n,w=Math.atan(x/(r-g)),S=i+Math.sin(w)*a/n,A=r-Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i+Math.cos(f)*a/n,r-Math.sin(f)*a):(d=Math.atan(M/(r-b)),p=i+Math.sin(d)*a/n,r-Math.cos(d)*a),w===d)return[[S,A]];var E=X.h(Math.abs(w-d))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=w+R,L=d-R;return[[S,A],[i+Math.sin(T)*P/n,r-Math.cos(T)*P],[i+Math.sin(L)*P/n,r-Math.cos(L)*P],[p,_]]}function J(t,e,i,r,n,a,o,s,h,u,l,c,f,d){var p=me(f,2),_=p[0],y=p[1],v=me(d,2),g=v[0],m=v[1];if(!(_&&y||g&&m))return c;for(var k,b,x,M,w,S,A,E=h+y-(h-s),P=u-m+(l-u),R=[],T=[],L=[],C=0,O=c.length;C<O;C++){var W,N,I,D,B=c[C];B[2][1]<E?R.push(B):B[1][1]>P?L.push(B):B[2][1]>P&&B[1][1]<E?(W=E<h?a+Math.tan(i)*(h-E):a,N=u<P?a+Math.tan(e)*(P-u):a,R.push([B[0],B[1],[o,E],[W,E]]),E<P&&(P<u&&h<E?T.push([[a,E],[o,E],[o,P],[a,P]]):h<E?(T.push([[a,h],[o,h],[o,u],[a,u]]),T.push([[a,u],[o,u],[o,P],[N,P]])):P<u?(T.push([[W,E],[o,E],[o,h],[a,h]]),T.push([[a,h],[o,h],[o,P],[a,P]])):(T.push([[W,E],[o,E],[o,h],[a,h]]),T.push([[a,h],[o,h],[o,u],[a,u]]),T.push([[a,u],[o,u],[o,P],[N,P]]))),L.push([[N,P],[o,P],B[2],B[3]])):B[2][1]>P?(I=u<P?a+Math.tan(e)*(P-u):a,T.push([B[0],B[1],[o,P],[I,P]]),L.push([[I,P],[o,P],B[2],B[3]])):B[1][1]<E?(D=E<h?a+Math.tan(i)*(h-E):a,R.push([B[0],B[1],[o,E],[D,E]]),T.push([[D,E],[o,E],B[2],B[3]])):T.push(B)}R.length&&(k=h-s<y&&t<_,b=Math.atan((o-a)/(h-s)),M=(x=y)/_,w=o-_,A=(S=y-(h-s))/(_-(o-a)),R.forEach(function(t,e){var i,r;0===e?(i=K(t[1],t[2],w,E,M,x,!0,Math.tan(b)*x),k&&(r=K(t[0],t[3],w,E,A,S,!0,Math.tan(b)*S))):(i=K(t[1],t[2],w,E,M,x),k&&(r=K(t[0],t[3],w,E,A,S))),k?1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[0],t[3]=r[1].concat(r[2]).concat(r[3])):(t[2]=t[3],t[3]=t[0]),t[0]=i[3],t[1]=i[2].concat(i[1]).concat(i[0])}));var F,H,z,G,X,j,Y,V=L.length;return V&&(F=l-u<m&&t<g,H=Math.atan((o-a)/(l-u)),G=(z=m)/g,X=o-g,Y=(j=m-(l-u))/(g-(o-a)),L.forEach(function(t,e){var i,r;e===V-1?(i=tt(t[1],t[2],X,P,G,z,!0,Math.tan(H)*z),F&&(r=tt(t[0],t[3],X,P,Y,j,!0,Math.tan(H)*j))):(i=tt(t[1],t[2],X,P,G,z),F&&(r=tt(t[0],t[3],X,P,Y,j))),F?1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[0],t[3]=r[1].concat(r[2]).concat(r[3])):(t[2]=t[3],t[3]=t[0]),t[0]=i[3],t[1]=i[2].concat(i[1]).concat(i[0])})),R.concat(T).concat(L)}function K(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(v-i)*n,M=(k-i)*n,w=Math.atan(M/(r-b)),S=i+Math.sin(w)*a/n,A=r-Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i+Math.cos(f)*a/n,r-Math.sin(f)*a):(d=Math.atan(x/(r-g)),p=i+Math.sin(d)*a/n,r-Math.cos(d)*a),d===w)return[[p,_]];var E=X.h(Math.abs(d-w))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=d+R,L=i+Math.sin(T)*P/n,C=r-Math.cos(T)*P,O=w-R;return[[S,A],[i+Math.sin(O)*P/n,r-Math.cos(O)*P],[L,C],[p,_]]}function tt(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(v-i)*n,M=(k-i)*n,w=Math.atan(x/(g-r)),S=i+Math.sin(w)*a/n,A=r+Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i+Math.cos(f)*a/n,r+Math.sin(f)*a):(d=Math.atan(M/(b-r)),p=i+Math.sin(d)*a/n,r+Math.cos(d)*a),w===d)return[[S,A]];var E=X.h(Math.abs(w-d))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=w-R,L=i+Math.sin(T)*P/n,C=r+Math.cos(T)*P,O=d+R;return[[p,_],[i+Math.sin(O)*P/n,r+Math.cos(O)*P],[L,C],[S,A]]}function et(t,e,i,r,n,a,o,s,h,u,l,c,f,d){var p=me(f,2),_=p[0],y=p[1],v=me(d,2),g=v[0],m=v[1];if(!(_&&y||g&&m))return c;for(var k,b,x,M,w,S,A,E=n+_-(n-r),P=a-g+(o-a),R=[],T=[],L=[],C=0,O=c.length;C<O;C++){var W,N,I,D,B=c[C];B[2][0]<E?R.push(B):B[3][0]>P?L.push(B):B[2][0]>P&&B[3][0]<E?(W=E<n?l-Math.tan(e)*(E-r):h,N=a<P?l-Math.tan(i)*(o-P):u,R.push([B[0],[E,W],[E,l],B[3]]),E<P&&(n<E&&P<a?T.push([[E,u],[P,u],[P,l],[E,l]]):n<E?(T.push([[E,u],[a,u],[a,l],[E,l]]),T.push([[a,u],[P,N],[P,l],[a,l]])):P<a?(T.push([[E,W],[n,u],[n,l],[E,l]]),T.push([[n,u],[P,u],[P,l],[n,l]])):(T.push([[E,W],[n,u],[n,l],[E,l]]),T.push([[n,u],[a,u],[a,l],[n,l]]),T.push([[a,u],[P,N],[P,l],[a,l]]))),L.push([[P,N],B[1],B[2],[P,l]])):B[2][0]>P?(I=a<P?l-Math.tan(i)*(o-P):u,T.push([B[0],[P,I],[P,l],B[3]]),L.push([[P,I],B[1],B[2],[P,l]])):B[3][0]<E?(D=E<n?l-Math.tan(e)*(E-r):u,R.push([B[0],[E,D],[E,l],B[3]]),T.push([[E,D],B[1],B[2],[E,l]])):T.push(B)}R.length&&(k=n-r<_&&t<y,b=Math.atan((n-r)/(l-u)),M=(x=y)/_,w=l-y,A=(S=y-(l-u))/(_-(n-r)),R.forEach(function(t,e){var i,r;0===e?(i=it(t[3],t[2],E,w,M,x,!0,Math.tan(b)*x),k&&(r=it(t[0],t[1],E,w,A,S,!0,Math.tan(b)*S))):(i=it(t[3],t[2],E,w,M,x),k&&(r=it(t[0],t[1],E,w,A,S))),k?1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[3],t[3]=r[2].concat(r[1]).concat(r[0])):(t[2]=t[1],t[3]=t[0]),t[0]=i[0],t[1]=i[1].concat(i[2]).concat(i[3])}));var F,H,z,G,X,j,Y,V=L.length;return V&&(F=o-a<g&&t<m,H=Math.atan((o-a)/(l-u)),G=(z=m)/g,X=l-m,Y=(j=m-(l-u))/(g-(o-a)),L.forEach(function(t,e){var i,r;e===V-1?(i=rt(t[3],t[2],P,X,G,z,!0,Math.tan(H)*z),F&&(r=rt(t[0],t[1],P,X,Y,j,!0,Math.tan(H)*j))):(i=rt(t[3],t[2],P,X,G,z),F&&(r=rt(t[0],t[1],P,X,Y,j))),F?1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[3],t[3]=r[2].concat(r[1]).concat(r[0])):(t[2]=t[1],t[3]=t[0]),t[0]=i[0],t[1]=i[1].concat(i[2]).concat(i[3])})),R.concat(T).concat(L)}function it(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(-v+i)*n,M=(-k+i)*n,w=Math.atan(M/(b-r)),S=i-Math.sin(w)*a/n,A=r+Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i-Math.cos(f)*a/n,r+Math.sin(f)*a):(d=Math.atan(x/(g-r)),p=i-Math.sin(d)*a/n,r+Math.cos(d)*a),d===w)return[[p,_]];var E=X.h(Math.abs(d-w))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=d-R,L=w+R;return[[p,_],[i-Math.sin(T)*P/n,r+Math.cos(T)*P],[i-Math.sin(L)*P/n,r+Math.cos(L)*P],[S,A]]}function rt(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(v-i)*n,M=(k-i)*n,w=Math.atan(x/(g-r)),S=i+Math.sin(w)*a/n,A=r+Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i+Math.cos(f)*a/n,r+Math.sin(f)*a):(d=Math.atan(M/(b-r)),p=i+Math.sin(d)*a/n,r+Math.cos(d)*a),w===d)return[[S,A]];var E=X.h(Math.abs(w-d))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=w+R,L=d-R;return[[S,A],[i+Math.sin(T)*P/n,r+Math.cos(T)*P],[i+Math.sin(L)*P/n,r+Math.cos(L)*P],[p,_]]}function nt(t,e,i,r,n,a,o,s,h,u,l,c,f,d){var p=me(f,2),_=p[0],y=p[1],v=me(d,2),g=v[0],m=v[1];if(!(_&&y||g&&m))return c;for(var k,b,x,M,w,S,A,E=h+y-(h-s),P=u-m+(l-u),R=[],T=[],L=[],C=0,O=c.length;C<O;C++){var W,N,I,D,B=c[C];B[3][1]<E?R.push(B):B[0][1]>P?L.push(B):B[3][1]>P&&B[0][1]<E?(W=E<h?n-Math.tan(i)*(h-E):n,N=u<P?n-Math.tan(e)*(P-u):n,R.push([B[0],B[1],[W,E],[r,E]]),E<P&&(P<u&&h<E?T.push([[r,E],[n,E],[n,P],[r,P]]):h<E?(T.push([[r,E],[n,E],[n,u],[r,u]]),T.push([[r,u],[n,u],[N,P],[r,P]])):P<u?(T.push([[r,E],[W,E],[n,h],[r,h]]),T.push([[r,h],[n,h],[n,P],[r,P]])):(T.push([[r,E],[W,E],[n,h],[r,h]]),T.push([[r,h],[n,h],[n,u],[r,u]]),T.push([[r,u],[n,u],[N,P],[r,P]]))),L.push([[r,P],[N,P],B[2],B[3]])):B[3][1]>P?(I=u<P?n-Math.tan(e)*(P-u):n,T.push([B[0],B[1],[I,P],[r,P]]),L.push([[r,P],[I,P],B[2],B[3]])):B[1][1]<E?(D=E<h?n-Math.tan(i)*(h-E):n,R.push([B[0],B[1],[D,E],[r,E]]),T.push([[r,E],[D,E],B[2],B[3]])):T.push(B)}R.length&&(k=h-s<y&&t<_,b=Math.atan((n-r)/(h-s)),M=(x=y)/_,w=r+_,A=(S=y-(h-s))/(_-(n-r)),R.forEach(function(t,e){var i,r;0===e?(i=at(t[0],t[3],w,E,M,x,!0,Math.tan(b)*x),k&&(r=at(t[1],t[2],w,E,A,S,!0,Math.tan(b)*S))):(i=at(t[0],t[3],w,E,M,x),k&&(r=at(t[1],t[2],w,E,A,S))),k?1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[0],t[3]=r[1].concat(r[2]).concat(r[3])):t[3]=t[1],t[0]=i[3],t[1]=i[2].concat(i[1]).concat(i[0])}));var F,H,z,G,X,j,Y,V=L.length;return V&&(F=l-u<m&&t<g,H=Math.atan((n-r)/(l-u)),G=(z=m)/g,X=r+g,Y=(j=m-(l-u))/(g-(n-r)),L.forEach(function(t,e){var i,r;e===V-1?(i=ot(t[0],t[3],X,P,G,z,!0,Math.tan(H)*z),F&&(r=ot(t[1],t[2],X,P,Y,j,!0,Math.tan(H)*j))):(i=ot(t[0],t[3],X,P,G,z),F&&(r=ot(t[1],t[2],X,P,Y,j))),F?1===r.length?(t[2]=r[0],t.pop()):(t[2]=r[0],t[3]=r[1].concat(r[2]).concat(r[3])):t[3]=t[1],t[0]=i[3],t[1]=i[2].concat(i[1]).concat(i[0])})),R.concat(T).concat(L)}function at(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(i-v)*n,M=(i-k)*n,w=Math.atan(M/(r-b)),S=i-Math.sin(w)*a/n,A=r-Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i-Math.cos(f)*a/n,r-Math.sin(f)*a):(d=Math.atan(x/(r-g)),p=i-Math.sin(d)*a/n,r-Math.cos(d)*a),d===w)return[[p,_]];var E=X.h(Math.abs(d-w))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=d+R,L=i-Math.sin(T)*P/n,C=r-Math.cos(T)*P,O=w-R;return[[S,A],[i-Math.sin(O)*P/n,r-Math.cos(O)*P],[L,C],[p,_]]}function ot(t,e,i,r,n,a,o,s){var h,u,l,c,f,d,p,_,y=me(t,2),v=y[0],g=y[1],m=me(e,2),k=m[0],b=m[1],x=(i-v)*n,M=(i-k)*n,w=Math.atan(x/(g-r)),S=i-Math.sin(w)*a/n,A=r+Math.cos(w)*a;if(_=o?(h=s*n,u=Math.atan(h/a),c=(l=Math.sqrt(Math.tan(u)/2))/(1+l),f=2*Math.atan(c),d=.5*Math.PI-f,p=i-Math.cos(f)*a/n,r+Math.sin(f)*a):(d=Math.atan(M/(b-r)),p=i-Math.sin(d)*a/n,r+Math.cos(d)*a),w===d)return[[S,A]];var E=X.h(Math.abs(w-d))*a,P=Math.sqrt(Math.pow(a,2)+Math.pow(E,2)),R=Math.atan(E/a),T=w-R,L=i-Math.sin(T)*P/n,C=r+Math.cos(T)*P,O=d+R;return[[p,_],[i-Math.sin(O)*P/n,r+Math.cos(O)*P],[L,C],[S,A]]}var Se={calPoints:function(t,e,i,r,n,a,o,s,h,u,l,c,f,d,p){var _=[];if(-1<["dashed","dotted"].indexOf(e)){var y=0===f||2===f?G(e,n,a,o,s,t):G(e,h,u,l,c,t),v=y.n,g=y.ps,m=y.pd;if(1<v){for(var k=0;k<v;k++){var b=k===v-1,x=void 0,M=void 0,w=void 0,S=(x=0===f||2===f?k?n+g*k+m*k:n:k?h+g*k+m*k:h)+g;0===f?S<a?b?_.push([[n,h],[s,h],[o,u],[a,u]]):(M=h+(x-n)*Math.tan(i),w=h+(S-n)*Math.tan(i),_.push([[x,h],[S,h],[S,w],[x,M]])):o<x?(M=h+(s-x)*Math.tan(r),w=h+(s-S)*Math.tan(r),b?_.push([[x,h],[s,h],[s,h],[x,M]]):_.push([[x,h],[S,h],[S,w],[x,M]])):x<a?(M=h+(x-n)*Math.tan(i),_.push([[x,h],[a,h],[a,u],[x,M]]),b?(_.push([[a,h],[o,h],[o,u],[a,u]]),_.push([[o,h],[s,h],[s,h],[a,u]])):o<S?(w=h+(s-S)*Math.tan(r),_.push([[a,h],[o,h],[o,u],[a,u]]),_.push([[o,h],[S,h],[S,w],[o,u]])):_.push([[a,h],[S,h],[S,u],[a,u]])):o<S?(M=h+(s-S)*Math.tan(r),x<a?(w=h+(x-n)*Math.tan(i),_.push([[x,h],[a,h],[a,u],[x,w]]),_.push([[a,h],[o,h],[o,u],[a,u]])):_.push([[x,h],[o,h],[o,u],[x,u]]),b?_.push([[o,h],[s,h],[s,h],[o,u]]):_.push([[o,h],[S,h],[S,M],[o,u]])):b?_.push([[x,h],[s,h],[o,u],[x,u]]):_.push([[x,h],[S,h],[S,u],[x,u]]):1===f?S<u?b?_.push([[o,u],[s,h],[s,c],[o,l]]):(M=s-(S-h)*Math.tan(i),w=s-(x-h)*Math.tan(i),_.push([[M,S],[w,x],[s,x],[s,S]])):l<x?(M=o+(x-l)*Math.tan(r),w=o+(S-l)*Math.tan(r),b?_.push([[M,x],[s,x],[s,c],[s,c]]):_.push([[M,x],[s,x],[s,S],[w,S]])):x<u?(M=o+(u-x)*Math.tan(i),_.push([[M,x],[s,x],[s,u],[o,u]]),b?(_.push([[o,u],[s,u],[s,l],[o,l]]),_.push([[o,l],[s,l],[s,c],[s,c]])):l<S?(w=o+(S-l)*Math.tan(r),_.push([[o,u],[s,u],[s,l],[o,l]]),_.push([[o,l],[s,l],[s,S],[w,S]])):_.push([[o,u],[s,u],[s,S],[o,S]])):l<S?(M=o+(S-l)*Math.tan(r),x<u?(w=o+(u-x)*Math.tan(i),_.push([[w,x],[s,x],[s,u],[o,u]]),_.push([[o,u],[s,u],[s,l],[o,l]]),b?_.push([[o,l],[s,l],[s,s],[s,s]]):_.push([[o,l],[s,l],[s,S],[M,S]])):(_.push([[o,x],[s,x],[s,l],[o,l]]),b?_.push([[o,l],[s,l],[s,c],[s,c]]):_.push([[o,l],[s,l],[s,S],[M,S]]))):b?_.push([[o,x],[s,x],[s,c],[o,l]]):_.push([[o,x],[s,x],[s,S],[o,S]]):2===f?S<a?b?_.push([[n,c],[a,l],[o,l],[s,c]]):(M=c-(x-n)*Math.tan(i),w=c-(S-n)*Math.tan(i),_.push([[x,M],[S,w],[S,c],[x,c]])):o<x?(M=c-(x-n)*Math.tan(r),w=c-(S-n)*Math.tan(r),b?_.push([[x,M],[s,c],[s,c],[x,c]]):_.push([[x,M],[S,w],[S,c],[x,c]])):x<a?(M=c-(x-n)*Math.tan(i),_.push([[x,M],[a,l],[a,c],[x,c]]),b?(_.push([[a,l],[o,l],[o,c],[a,c]]),_.push([[o,l],[s,c],[s,c],[o,c]])):o<S?(w=c-(S-n)*Math.tan(r),_.push([[a,l],[o,l],[o,c],[a,c]]),_.push([[o,l],[S,w],[S,c],[o,c]])):_.push([[a,l],[S,l],[S,c],[a,c]])):o<S?(M=c-(s-S)*Math.tan(r),x<a?(w=c-(x-n)*Math.tan(i),_.push([[x,w],[a,l],[a,c],[x,c]]),_.push([[a,l],[o,l],[o,c],[a,c]])):_.push([[x,l],[o,l],[o,c],[x,c]]),b?_.push([[o,l],[s,c],[s,c],[o,c]]):_.push([[o,l],[S,M],[S,c],[o,c]])):b?_.push([[x,l],[o,l],[s,c],[x,c]]):_.push([[x,l],[S,l],[S,c],[x,c]]):3===f&&(S<u?b?_.push([[n,h],[a,u],[a,l],[n,c]]):(M=n+(x-h)*Math.tan(i),w=n+(S-h)*Math.tan(i),_.push([[n,x],[M,x],[w,S],[n,S]])):l<x?(M=n+(c-x)*Math.tan(r),w=n+(c-S)*Math.tan(r),b?_.push([[n,x],[M,x],[n,c],[n,c]]):_.push([[n,x],[M,x],[w,S],[n,S]])):x<u?(M=n+(x-h)*Math.tan(i),_.push([[n,x],[M,x],[a,u],[n,u]]),b?(_.push([[n,u],[a,u],[a,l],[n,l]]),_.push([[n,l],[a,l],[n,c],[n,c]])):l<S?(w=n+(c-S)*Math.tan(r),_.push([[n,u],[a,u],[a,l],[n,l]]),_.push([[n,l],[a,l],[w,S],[n,S]])):_.push([[n,u],[a,u],[a,S],[n,S]])):l<S?(M=n+(c-S)*Math.tan(r),x<u?(w=n+(x-h)*Math.tan(i),_.push([[n,x],[w,x],[a,u],[n,h]]),_.push([[n,u],[a,u],[a,l],[n,l]])):_.push([[n,x],[a,x],[a,l],[n,l]]),b?_.push([[n,l],[a,l],[n,c],[n,c]]):_.push([[n,l],[a,l],[M,S],[n,S]])):b?_.push([[n,x],[a,x],[a,l],[n,c]]):_.push([[n,x],[a,x],[a,S],[n,S]]))}if(0===f)return q(t,i,r,n,a,o,s,h,u,0,0,_,d,p);if(1===f)return J(t,i,r,0,0,o,s,h,u,l,c,_,d,p);if(2===f)return et(t,i,r,n,a,o,s,0,u,l,c,_,d,p);if(3===f)return nt(t,i,r,n,a,0,0,h,u,l,c,_,d,p)}}return 0===f?(n<a&&_.push([[n,h],[a,h],[a,u],[n,h]]),_.push([[a,h],[o,h],[o,u],[a,u]]),o<s&&_.push([[o,h],[s,h],[s,h],[o,u]]),q(t,i,r,n,a,o,s,h,u,0,0,_,d,p)):1===f?(h<u&&_.push([[s,h],[s,h],[s,u],[o,u]]),_.push([[o,u],[s,u],[s,l],[o,l]]),l<c&&_.push([[o,l],[s,l],[s,c],[s,c]]),J(t,i,r,0,0,o,s,h,u,l,c,_,d,p)):2===f?(n<a&&_.push([[n,c],[a,l],[a,c],[n,c]]),_.push([[a,l],[o,l],[o,c],[a,c]]),o<s&&_.push([[o,l],[s,c],[s,c],[o,c]]),et(t,i,r,n,a,o,s,0,u,l,c,_,d,p)):3===f?(h<u&&_.push([[n,h],[n,h],[a,u],[n,u]]),_.push([[n,u],[a,u],[a,l],[n,l]]),l<c&&_.push([[n,l],[a,l],[n,c],[n,c]]),nt(t,i,r,n,a,0,0,h,u,l,c,_,d,p)):void 0},calRadius:function(t,e,i,r,n,a,o,s,h,u,l,c){var f,d=me(h,2),p=d[0],_=d[1],y=me(u,2),v=y[0],g=y[1],m=me(l,2),k=m[0],b=m[1],x=me(c,2),M=x[0],w=x[1];if(_-=n,v-=a,g-=n,k-=a,b-=o,M-=s,w-=o,(0<(p-=s)&&0<_||0<v&&0<g||0<k&&0<b||0<M&&0<w)&&(f=!0),f){var S=[];return 0<p&&0<_?(S.push([t,e+_]),S.push([t,e+_*(1-H),t+p*(1-H),e,t+p,e])):S.push([t,e]),0<v&&0<g?(S.push([t+i-v,e]),S.push([t+i-v*(1-H),e,t+i,e+g*(1-H),t+i,e+g])):S.push([t+i,e]),0<k&&0<b?(S.push([t+i,e+r-b]),S.push([t+i,e+r-b*(1-H),t+i-k*(1-H),e+r,t+i-k,e+r])):S.push([t+i,e+r]),0<M&&0<w?(S.push([t+M,e+r]),S.push([t+M*(1-H),e+r,t,e+r-w*(1-H),t,e+r-w])):S.push([t,e+r]),S}}},st={arial:{lhr:1.14990234375,car:1.1171875,blr:.9052734375}},ht=m.AUTO,ut=m.PX,lt=m.PERCENT,ct=m.NUMBER,ft=m.INHERIT,dt=m.DEG,pt=m.RGBA,_t=m.STRING,yt=be.isNil,vt=be.rgba2int;function gt(t,e,i,r){yt(t.flexGrow)&&(t.flexGrow=e),yt(t.flexShrink)&&(t.flexShrink=i),yt(t.flexBasis)&&(t.flexBasis=r)}function mt(i,r){var n,t=i[r];t&&((n=t.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi))&&(1===n.length?n[3]=n[2]=n[1]=n[0]:2===n.length?(n[2]=n[0],n[3]=n[1]):3===n.length&&(n[3]=n[1]),["Top","Right","Bottom","Left"].forEach(function(t,e){yt(i[t=r+t])&&(i[t]=n[e])})),delete i[r])}function kt(t,e,i){return"auto"===i?t[e]={unit:ht}:"inherit"===i?t[e]={unit:ft}:/%$/.test(i)?(i=parseFloat(i)||0,t[e]={value:i,unit:lt}):/px$/.test(i)?(i=parseFloat(i)||0,t[e]={value:i,unit:ut}):/deg$/.test(i)?(i=parseFloat(i)||0,t[e]={value:i,unit:dt}):(i=parseFloat(i)||0,t[e]={value:i,unit:ct}),0===e.toString().indexOf("border")&&(t[e].value=Math.max(t[e].value,0)),t}function bt(t,e){-1<t.indexOf("scale")?e.unit=ct:-1<t.indexOf("translate")?e.unit===ct&&(e.unit=ut):e.unit===ct&&(e.unit=dt)}function xt(t){return t.fontSize*st.arial.lhr}function Mt(t,e,i){for(t*=.01;e;){var r=e.currentStyle[i];if(r.unit===ht){if("width"!==i)break;e=e.parent}else{if(r.unit===ut)return t*r.value;r.unit===lt&&(t*=.01*r.value,e=e.parent)}}return t}var wt={normalize:function(s){var t,e,i,r,n,a,o,h,u,l,c,f,d,p,_,y,v=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],g=(s=be.extend({},s)).border;if(g&&(["Top","Right","Bottom","Left"].forEach(function(t){yt(s[t="border"+t])&&(s[t]=g)}),delete s.border),["Top","Right","Bottom","Left"].forEach(function(t){var e,i,r,n,a,o;o=(e=s)[a="border"+t],yt(o)||(yt(e[a+"Width"])&&(i=/\b[\d.]+px\b/i.exec(o),e[a+"Width"]=i?i[0]:0),yt(e[a+"Style"])&&(r=/\b(solid|dashed|dotted)\b/i.exec(o),e[a+"Style"]=r?r[1]:"solid"),yt(e[a+"Color"])&&((n=/#[0-9a-f]{3,6}/i.exec(o))&&-1<[4,7].indexOf(n[0].length)?e[a+"Color"]=n[0]:/\btransparent\b/i.test(o)?e[a+"Color"]="transparent":(n=/rgba?\(.+\)/i.exec(o),e[a+"Color"]=n?n[0]:"transparent")))}),(g=s.borderWidth)&&(["Top","Right","Bottom","Left"].forEach(function(t){yt(s[t="border"+t+"Width"])&&(s[t]=g)}),delete s.borderWidth),(g=s.borderColor)&&(["Top","Right","Bottom","Left"].forEach(function(t){yt(s[t="border"+t+"Color"])&&(s[t]=vt(g))}),delete s.borderColor),(g=s.borderStyle)&&(["Top","Right","Bottom","Left"].forEach(function(t){yt(s[t="border"+t+"Style"])&&(s[t]=g)}),delete s.borderStyle),g=s.borderRadius){1===(g=g.toString().split("/")).length&&(g[1]=g[0]);for(var m=0;m<2;m++){var k=g[m].toString().split(/\s+/);0===k.length?g[m]=[0,0,0,0]:1===k.length?g[m]=[k[0],k[0],k[0],k[0]]:2===k.length?g[m]=[k[0],k[1],k[0],k[1]]:3===k.length?g[m]=[k[0],k[1],k[2],k[1]]:g[m]=k.slice(0,4)}["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t,e){yt(s[t="border"+t+"Radius"])&&(s[t]=g[0][e]+" "+g[1][e])}),delete s.borderRadius}if((g=s.background)&&(yt(s.backgroundImage)&&((t=O.gradient.exec(g))?(s.backgroundImage=t[0],g=g.replace(t[0],"")):(e=O.img.exec(g))&&(s.backgroundImage=e[0],g=g.replace(e[0],""))),!yt(s.backgroundRepeat)||(i=/(no-)?repeat(-[xy])?/i.exec(g))&&(s.backgroundRepeat=i[0].toLowerCase()),!yt(s.backgroundColor)||(r=/^(transparent)|(#[0-9a-f]{3,6})|(rgba?\(.+?\))/i.exec(g))&&(s.backgroundColor=r[0],g=g.replace(r[0],"")),!yt(s.backgroundPosition)||(n=g.match(O.position))&&(s.backgroundPositionX=n[0],s.backgroundPositionY=1<n.length?n[1]:n[0]),delete s.background),g=s.backgroundPosition,yt(g)||(1===(g=g.toString().split(/\s+/)).length&&(g[1]="50%"),a=me(g,2),s.backgroundPositionX=a[0],s.backgroundPositionY=a[1],delete s.backgroundPosition),(g=s.flex)&&("none"===g?gt(s,0,0,"auto"):"auto"===g?gt(s,1,1,"auto"):/^[\d.]+$/.test(g)?gt(s,Math.max(0,parseFloat(g)),1,0):/^[\d.]+px$/.test(g)?gt(s,1,1,0):/^[\d.]+%$/.test(g)?gt(s,1,1,g):/^[\d.]+\s+[\d.]+$/.test(g)?(o=g.split(/\s+/),gt(s,o[0],o[1],0)):/^[\d.]+\s+[\d.]+%$/.test(g)?(h=g.split(/\s+/),gt(s,h[0],1,h[1])):gt(s,0,1,"auto"),delete s.flex),mt(s,"margin"),mt(s,"padding"),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e=s[t];!yt(e)&&s.transform&&console.error('Can not use expand style "'.concat(t,'" with transform'))}),v.forEach(function(t){var e=t.k,i=t.v;yt(s[e])&&(s[e]=i)}),(g=s.backgroundImage)&&(O.gradient.test(g)?s.backgroundImage=F.parseGradient(g):O.img.test(g)&&(s.backgroundImage=O.img.exec(g)[2])),(g=s.backgroundColor)&&((u=/^#[0-9a-f]{3,6}/i.exec(g))&&-1<[4,7].indexOf(u[0].length)?s.backgroundColor={value:vt(u[0]),unit:pt}:(u=/rgba?\(.+\)/i.exec(g),s.backgroundColor={value:vt(u?u[0]:[0,0,0,0]),unit:pt})),["backgroundPositionX","backgroundPositionY"].forEach(function(t){g=s[t],yt(g)||(/%$/.test(g)||/px$/.test(g)||/^-?[\d.]+$/.test(g)?(kt(s,t,g),(g=s[t]).unit===ct&&(g.unit=ut)):s[t]={value:{top:0,left:0,center:50,right:100,bottom:100}[g],unit:lt})}),g=s.backgroundSize){var b=s.backgroundSize=[],x=g.toString().match(/\b(?:(-?[\d.]+(px|%)?)|(contain|cover|auto))/gi);if(x){1===x.length&&("contain"===x[0]||"cover"===x[0]?x[1]=x[0]:x[1]="auto");for(var M=0;M<2;M++){var w=x[M];/%$/.test(w)||/px$/.test(w)||/^-?[\d.]+$/.test(w)?(kt(b,M,w),b[M].unit===ct&&(b[M].unit=ut)):"0"===w||0===w?b.push({value:0,unit:ut}):"contain"===w||"cover"===w?b.push({value:w,unit:_t}):b.push({unit:ht})}}else b.push({unit:ht}),b[1]=b[0]}if(["Top","Right","Bottom","Left"].forEach(function(t){var e=s[t="border"+t+"Color"];yt(e)||(s[t]={value:vt(e),unit:pt})}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=s[t="border"+t+"Radius"];if(!yt(e)){var i=e.toString().split(/\s+/);1===i.length&&(i[1]=i[0]);for(var r=0;r<2;r++){var n=i[r];/%$/.test(n)||/px$/.test(n)||/^-?[\d.]+$/.test(n)?(kt(i,r,n),i[r].unit===ct&&(i[r].unit=ut)):i[r]={value:0,unit:ut}}s[t]=i}}),(g=s.transform)&&(l=s.transform=[],(c=g.toString().match(/\w+\(.+?\)/g))&&c.forEach(function(t){var e,i,r,n,a,o=t.indexOf("("),s=t.slice(0,o),h=t.slice(o+1,t.length-1);"matrix"===s?(6<(e=(e=h.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length&&(e=e.slice(0,6)),6===e.length&&l.push(["matrix",e])):!{translateX:!0,translateY:!0,scaleX:!0,scaleY:!0,skewX:!0,skewY:!0,rotate:!0,rotateZ:!0}.hasOwnProperty(s)?{translate:!0,scale:!0,skew:!0}.hasOwnProperty(s)&&(1===(r=h.toString().split(/\s*,\s*/)).length&&(r[1]=r[0]),n=kt([s+"X",r[0]],1,r[0]),a=kt([s+"Y",r[1]],1,r[1]),bt(s,n[1]),bt(s,a[1]),l.push(n),l.push(a)):("rotate"===s&&(s="rotateZ"),bt(s,(i=kt([s,h],1,h))[1]),l.push(i))})),g=s.transformOrigin,!yt(g)){var S=s.transformOrigin=[],A=g.toString().match(O.position);if(A){1===A.length&&(A[1]=A[0]);for(var E=0;E<2;E++){var P=A[E];/%$/.test(P)||/px$/.test(P)||/^-?[\d.]+$/.test(P)?(kt(S,E,P),S[E].unit===ct&&(S[E].unit=ut)):(S.push({value:{top:0,left:0,center:50,right:100,bottom:100}[P],unit:lt}),yt(S[E].value)&&(S[E].value=50))}}else S.push({value:50,unit:lt}),S[1]=S[0]}return["translate","scale","skew"].forEach(function(t){var e;g=s[t],yt(g)||(1===(e=g.toString().split(/\s*,\s*/)).length&&(e[1]=e[0]),s[t+"X"]=e[0],s[t+"Y"]=e[1],delete s[t])}),["translateX","translateY","scaleX","scaleY","skewX","skewY","rotateZ","rotate"].forEach(function(t){var e=s[t];yt(e)||(kt(s,t,e),"rotate"===t&&(t="rotateZ",s.rotateZ=s.rotate,delete s.rotate),bt(t,e=s[t]))}),(g=s.opacity)&&(g=parseFloat(g),isNaN(g)?s.opacity=1:(g=Math.max(g,0),g=Math.min(g,1),s.opacity=g)),(g=s.zIndex)&&(s.zIndex=parseInt(g)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height","flexBasis","strokeWidth"].forEach(function(t){var e=s[t];yt(e)||(kt(s,t,e),(e=s[t]).unit===ct&&(e.unit=ut))}),(g=s.color)&&(s.color="inherit"===g?{unit:ft}:{value:vt(g),unit:pt}),!(g=s.fontSize)&&0!==g||("inherit"===g?s.fontSize={unit:ft}:/%$/.test(g)?(f=Math.max(0,parseFloat(g)),s.fontSize=f?{value:f,unit:lt}:{value:16,unit:ut}):s.fontSize={value:Math.max(0,parseFloat(g))||16,unit:ut}),!(g=s.fontWeight)&&0!==g||(s.fontWeight="bold"===g?{value:700,unit:ct}:"normal"===g?{value:400,unit:ct}:"lighter"===g?{value:200,unit:ct}:"inherit"===g?{unit:ft}:{value:Math.max(0,parseInt(g))||400,unit:ct}),(g=s.fontStyle)&&(s.fontStyle="inherit"===g?{unit:ft}:{value:g,unit:_t}),(g=s.fontFamily)&&(s.fontFamily="inherit"===g?{unit:ft}:{value:g,unit:_t}),(g=s.textAlign)&&(s.textAlign="inherit"===g?{unit:ft}:{value:g,unit:_t}),!(g=s.lineHeight)&&0!==g||("inherit"===g?s.lineHeight={unit:ft}:"normal"===g?s.lineHeight={unit:ht}:/px$/.test(g)?s.lineHeight={value:parseFloat(g),unit:ut}:(d=Math.max(0,parseFloat(g))||"normal",s.lineHeight="normal"===d?{unit:ht}:{value:d,unit:ct})),g=s.strokeDasharray,yt(g)||((p=g.toString().match(/[\d.]+/g))?((p=p.map(function(t){return parseFloat(t)})).length%2==1&&p.push(p[p.length-1]),s.strokeDasharray=p):s.strokeDasharray=[]),(g=s.fill)&&(0<g.indexOf("-gradient(")?s.fill=F.parseGradient(g):s.fill=vt(g)),(g=s.stroke)&&(0<g.indexOf("-gradient(")?s.stroke=F.parseGradient(g):s.stroke=vt(g)),(g=s.filter)&&(s.filter=[],!(_=/\bblur\s*\(\s*([\d.]+)\s*(?:px)?\s*\)/.exec(g))||(y=parseFloat(_[1])||0)&&s.filter.push(["blur",y])),(g=s.visibility)&&(s.visibility="inherit"===g?{unit:ft}:{value:g,unit:_t}),s},compute:function(t,e,i,r){var n=e?null:t.parent.computedStyle,a=i.fontSize,o=i.fontFamily,s=i.fontWeight,h=i.textAlign,u=i.lineHeight;a.unit===ft?r.fontSize=e?16:n.fontSize:a.unit===lt?r.fontSize=e?16:n.fontSize*a.value*.01:r.fontSize=a.value,o.unit===ft?r.fontFamily=e?"arial":n.fontFamily:r.fontFamily=o.value,s.unit===ft?r.fontWeight=e?400:n.fontWeight:r.fontWeight=s.value,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(t){r[t]=i[t].unit===ut?Math.max(0,i[t].value):0}),["position","display","flexDirection","justifyContent","alignItems","flexGrow","flexShrink"].forEach(function(t){r[t]=i[t]}),h.unit===ft?r.textAlign=e?"left":n.textAlign:r.textAlign=e?"left":h.value,u.unit===ft?r.lineHeight=e?xt(r):n.lineHeight:u.unit===ut?r.lineHeight=Math.max(u.value,0)||xt(r):u.unit===ct?r.lineHeight=Math.max(u.value,0)*r.fontSize||xt(r):r.lineHeight=xt(r)},setFontStyle:function(t){var e=t.fontStyle,i=t.fontWeight,r=t.fontSize;return(e||"")+" "+(i||"")+" "+r+"px/"+r+"px "+(t.fontFamily||"")},getBaseLine:function(t){var e=t.fontSize*st.arial.lhr;return.5*(t.lineHeight-e)+t.fontSize*st.arial.blr},calRelative:function(t,e,i,r,n){return i.unit===ht?i=0:-1<[ut,ct,dt,pt,_t].indexOf(i.unit)?i=i.value:i.unit===lt&&(i=Mt(i.value,r,n?"width":"height")),i},calAbsolute:function(t,e,i,r){return i.unit===ht?i=0:-1<[ut,ct,dt,pt,_t].indexOf(i.unit)?i=i.value:i.unit===lt&&(i=i.value*r*.01),i}},St=m.PERCENT,At=m.NUMBER;var Ae={matrixResize:function(t,e,i,r,n,a,o,s){if(t!==i||e!==r){var h=[["scaleX",{value:i/t,unit:At}],["scaleY",{value:r/e,unit:At}]],u=we.calOrigin([{value:0,unit:St},{value:0,unit:St}],o,s);return u[0]+=n,u[1]+=a,we.calMatrixWithOrigin(h,u,o,s)}}},Et=be.isFunction,Pt=function(){function o(){h(this,o),this.__eHash={}}return u(o,[{key:"on",value:function(t,e){if(e){var i=this;if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)i.on(t[r],e);else if(e){i.__eHash.hasOwnProperty(t)||(i.__eHash[t]=[]);for(var a=0,o=i.__eHash[t],s=o.length;a<s;a++)if(o[a]===e)return i;i.__eHash[t].push(e)}return i}}},{key:"once",value:function(r,n){if(Et(n)){var a=this;if(o.__karasEventCb=n,Array.isArray(r))for(var t=0,e=r.length;t<e;t++)a.once(r[t],n);else n&&a.on(r,o);return this}function o(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];n.apply(a,e),a.off(r,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++)this.off(t[i],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e||a[n].__karasEventCb===e){a.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)this.emit(t[n],i);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var u=o[s];Et(u)&&u.apply(this,i)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],i=new o;e.__eHash={};for(var r=["on","once","off","emit"],n=r.length-1;0<=n;n--){var a=r[n];e[a]=i[a]}}}}]),o}();t(Pt,"REFRESH","refresh"),t(Pt,"PAUSE","pause"),t(Pt,"PLAY","play"),t(Pt,"FRAME","frame"),t(Pt,"FINISH","finish"),t(Pt,"CANCEL","cancel"),t(Pt,"BEGIN","begin"),t(Pt,"END","end");var Rt=function(){function a(t,e,i,r,n){h(this,a),this.__parent=t,this.__x=e,this.__y=i,this.__width=r,this.__content=n,this.__virtualDom={}}return u(a,[{key:"render",value:function(t,e,i,r){var n=this.content,a=this.x,o=this.y,s=this.parent,h=s.ox,u=s.oy;o+=wt.getBaseLine(i),a+=h,o+=u,t===xe.CANVAS?e.fillText(n,a,o):t===xe.SVG&&(this.__virtualDom={type:"item",tagName:"text",props:[["x",a],["y",o],["fill",r.color],["font-family",i.fontFamily],["font-weight",i.fontWeight],["font-style",i.fontStyle],["font-size",i.fontSize+"px"]],content:be.encodeHtml(n)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return wt.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),a}(),Tt=function(){e(p,x);var i=l(p);function p(t){var e;return h(this,p),(e=i.call(this)).__content=t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return u(p,[{key:"__measure",value:function(t,e){var i=this.content,r=this.computedStyle,n=this.charWidthList;n.splice(0),t===xe.CANVAS&&(e.font=wt.setFontStyle(r));for(var a=r.fontSize+","+r.fontFamily,o=p.MEASURE_TEXT.data[a]=p.MEASURE_TEXT.data[a]||{key:a,style:r,hash:{},s:[]},s=p.CHAR_WIDTH_CACHE[a]=p.CHAR_WIDTH_CACHE[a]||{},h=0,u=!1,l=0,c=i.length;l<c;l++){var f=i.charAt(l),d=void 0;s.hasOwnProperty(f)?(d=s[f],n.push(d),h+=d,this.__charWidth=Math.max(this.charWidth,d)):t===xe.CANVAS?(d=s[f]=e.measureText(f).width,n.push(d),h+=d,this.__charWidth=Math.max(this.charWidth,d)):(o.hash.hasOwnProperty(f)||(o.s+=f),o.hash[f]=!0,n.push(-1),u=!0)}this.__textWidth=h,u&&p.MEASURE_TEXT.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,i=this.computedStyle,r=this.charWidthList,n=i.fontSize+","+i.fontFamily,a=p.CHAR_WIDTH_CACHE[n],o=0,s=0,h=r.length;s<h;s++){r[s]<0&&(o+=t=r[s]=a[e.charAt(s)],this.__charWidth=Math.max(this.charWidth,t))}this.__textWidth=o}},{key:"__layout",value:function(t,e){var i=this,r=t.x,n=t.y,a=t.w;this.__x=r,this.__y=n;var o=this.isDestroyed,s=this.content,h=this.computedStyle,u=this.lineBoxes,l=this.charWidthList;if(!o&&"none"!==h.display){this.__ox=this.__oy=0,u.splice(0);for(var c,f,d,p,_=0,y=0,v=0,g=s.length,m=0;y<g;){(v+=l[y])===a?(c=new Rt(this,r,n,v,s.slice(_,y+1)),u.push(c),m=Math.max(m,v),n+=h.lineHeight,y=_=y+1,v=0):a<v?(f=void 0,f=y===_?(y=_+1,v):v-l[y],d=new Rt(this,r,n,f,s.slice(_,y)),u.push(d),m=Math.max(m,f),n+=h.lineHeight,_=y,v=0):y++}if(_<g&&_<y){for(v=0,y=_;y<g;y++)v+=l[y];var k=new Rt(this,r,n,v,s.slice(_,g));u.push(k),m=Math.max(m,v),n+=h.lineHeight}this.__width=m,this.__height=n-t.y,e||(p=h.textAlign,-1<["center","right"].indexOf(p)&&u.forEach(function(t){var e=i.__width-t.width;0<e&&t.__offsetX("center"===p?.5*e:e)}))}}},{key:"__offsetX",value:function(e,t){Z(U(p.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e,t){Z(U(p.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)})}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,i){return this.__layout({x:t,y:e,w:i},!0),this.width}},{key:"render",value:function(e,i){e===xe.SVG&&(this.__virtualDom={type:"text",children:[]});var t,r,n=this.isDestroyed,a=this.computedStyle,o=this.lineBoxes,s=this.cacheStyle;n||"none"===a.display||"hidden"===a.visibility||(e===xe.CANVAS&&(t=wt.setFontStyle(a),i.font!==t&&(i.font=t),r=s.color,i.fillStyle!==r&&(i.fillStyle=r)),o.forEach(function(t){t.render(e,i,a,s)}),e===xe.SVG&&(this.virtualDom.children=o.map(function(t){return t.virtualDom})))}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes;if(!t.length)return 0;var e=t[t.length-1];return e.y-this.y+e.baseLine}},{key:"currentStyle",get:function(){return this.parent.currentStyle}},{key:"computedStyle",get:function(){return this.parent.computedStyle}},{key:"cacheStyle",get:function(){return this.parent.__cacheStyle}}]),p}();t(Tt,"CHAR_WIDTH_CACHE",{}),t(Tt,"MEASURE_TEXT",{list:[],data:{}}),Tt.prototype.__renderByMask=Tt.prototype.render;var Lt={cache:null,mask:null};function Ct(t,e,i){var r;return Lt[t]||((r=Lt[t]=document.createElement("canvas")).style.position="absolute",r.style.left="9999px",r.style.top="-9999px",document.body.append(r)),(r=Lt[t]).setAttribute("width",e),r.setAttribute("height",i),r.style.width=e+"px",r.style.height=i+"px",{canvas:r,ctx:r.getContext("2d"),draw:function(){}}}var Ot,Wt,Nt={},Ee={measureText:function(t){var e=Tt.MEASURE_TEXT,i=e.list,u=e.data,l="",c=[],f=[];if(Object.keys(u).forEach(function(t){var e=u[t],i=e.key,r=e.style,n=e.s;if(n)for(var a="position:absolute;font-family:".concat(r.fontFamily,";font-size:").concat(r.fontSize,"px"),o=0,s=n.length;o<s;o++){c.push(i);var h=n.charAt(o);f.push(h),l+='<span style="'.concat(a,'">').concat(h.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}}),l){var r=document.createElement("div");r.style.position="absolute",r.style.left="99999px",r.style.top="-99999px",r.style.visibility="hidden",document.body.appendChild(r),r.innerHTML=l;for(var n=r.childNodes,a=Tt.CHAR_WIDTH_CACHE,o=Tt.MEASURE_TEXT,s=0,h=n.length;s<h;s++){var d=n[s],p=c[s],_=f[s],y=window.getComputedStyle(d,null);a[p][_]=parseFloat(y.width)}i.forEach(function(t){return t.__measureCb()}),t(),o.list=[],o.data={},document.body.removeChild(r)}else t()},IMG:Nt,INIT:0,LOADED:2,LOADING:1,measureImg:function(t,e){var i,r,n=Nt[t]=Nt[t]||{state:0,task:[]};2===n.state?e(n):1===n.state?n.task.push(e):(n.state=1,n.task.push(e),(i=new Image).onload=function(){n.state=2,n.success=!0,n.width=i.width,n.height=i.height,n.source=i,n.url=t,n.task.splice(0).forEach(function(t){return t(n)})},i.onerror=function(){n.state=2,n.success=!1,n.url=t,n.task.splice(0).forEach(function(t){return t(n)})},"data:"===t.substr(0,5)||(r=/^(?:\w+:)?\/\/([^/:]+)/.exec(t))&&location.hostname!==r[1]&&(i.crossOrigin="anonymous"),i.src=t)},warn:function(t){console.warn(t)},requestAnimationFrame:(Wt=function(t){var e;return"undefined"!=typeof requestAnimationFrame?(Ee.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Ee.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Dt.toString=function(){return Wt.toString()},Dt),cancelAnimationFrame:(Ot=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Ee.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Ee.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},It.toString=function(){return Ot.toString()},It),now:function(){return"undefined"!=typeof performance?(Ee.now=performance.now.bind(performance),performance.now()):(Ee.now=Date.now.bind(Date),Date.now())},getCacheCanvas:function(t,e){return Ct("cache",t,e)},getMaskCanvas:function(t,e){return Ct("mask",t,e)},isDom:function(t){if(t){if(be.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if(be.isFunction(t.getElementsByTagName))return!0}return!1}};function It(t){return Ot.apply(this,arguments)}function Dt(t){return Wt.apply(this,arguments)}var Bt=be.isFunction,Ft=be.isObject;function Ht(t,e,i){"before"===i?t.forEach(function(t){Ft(t)&&Bt(t.before)&&t.before(e)}):"after"===i&&t.forEach(function(t){Ft(t)&&Bt(t.after)?t.after(e):Bt(t)&&t(e)})}var zt=new(function(){function t(){h(this,t),this.__hookTask=[],this.__task=[],this.__now=null}return u(t,[{key:"__init",value:function(){var n=this,a=n.task;Ee.cancelAnimationFrame(n.id);var o=n.__now=Ee.now();!function r(){Ee.cancelAnimationFrame(n.id),n.id=Ee.requestAnimationFrame(function(){var t,e,i;a.length&&(e=(t=n.__now=Ee.now())-o,e=Math.max(e,0),o=t,Ht(i=a.slice(0),e,"before"),n.__hookTask.splice(0).forEach(function(t){return t()}),Ht(i,e,"after"),a.length&&r())})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,i=0,r=e.length;i<r;i++){var n=e[i];if(n===t||n.__karasFramecb===t){e.splice(i,1);break}}e.length||(Ee.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var i,r=this;e&&((i=Bt(e)?function(t){e(t),r.offFrame(i)}:{before:e.before,after:function(t){e.after&&e.after(t),r.offFrame(i)}}).__karasFramecb=e,this.onFrame(i))}},{key:"task",get:function(){return this.__task}},{key:"aTask",get:function(){return this.__aTask}}]),t}()),Gt=4,Xt=1e-7,jt=10,Yt="function"==typeof Float32Array;function Vt(t,e){return 1-3*e+3*t}function qt(t,e){return 3*e-6*t}function $t(t,e,i){return((Vt(e,i)*t+qt(e,i))*t+3*e)*t}function Ut(t,e,i){return 3*Vt(e,i)*t*t+2*qt(e,i)*t+3*e}function Zt(t){return t}function Qt(a,e,o,i){if(!(0<=a&&a<=1&&0<=o&&o<=1))throw new Error("bezier x values must be in [0, 1] range");if(a===e&&o===i)return Zt;for(var s=new(Yt?Float32Array:Array)(11),t=0;t<11;++t)s[t]=$t(.1*t,a,o);function r(t){for(var e=0,i=1;10!==i&&s[i]<=t;++i)e+=.1;var r=e+.1*((t-s[--i])/(s[i+1]-s[i])),n=Ut(r,a,o);return.001<=n?function(t,e,i,r){for(var n=0;n<Gt;++n){var a=Ut(e,i,r);if(0===a)return e;e-=($t(e,i,r)-t)/a}return e}(t,r,a,o):0===n?r:function(t,e,i,r,n){for(var a,o,s=0;0<(a=$t(o=e+(i-e)/2,r,n)-t)?i=o:e=o,Math.abs(a)>Xt&&++s<jt;);return o}(t,e,e+.1,a,o)}return function(t){return 0===t||1===t?t:$t(r(t),e,i)}}var Jt={linear:Qt(1,1,0,0),easeIn:Qt(.42,0,1,1),easeOut:Qt(0,0,.58,1),ease:Qt(.25,.1,.25,1),easeInOut:Qt(.42,0,.58,1),cubicBezier:Qt},Kt={REPAINT:0,REFLOW:1},re={GEOM:{x1:!0,y1:!0,x2:!0,y2:!0,controlA:!0,controlB:!0,r:!0,rx:!0,ry:!0,begin:!0,end:!0,points:!0,controls:!0},STYLE:{transform:!0,translateX:!0,translateY:!0,skewX:!0,skewY:!0,scaleX:!0,scaleY:!0,rotateZ:!0,color:!0,fontStyle:!0,strokeWidth:!0,fill:!0,strokeDasharray:!0,strokeLinecap:!0,strokeLinejoin:!0,strokeMiterlimit:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0,backgroundSize:!0,stroke:!0,borderBottomColor:!0,borderLeftColor:!0,borderRightColor:!0,borderTopColor:!0,borderTopLeftRadius:!0,borderTopRightRadius:!0,borderBottomRightRadius:!0,borderBottomLeftRadius:!0,visibility:!0,opacity:!0,zIndex:!0,filter:!0}},ne=m.AUTO,ae=m.PX,oe=m.PERCENT,se=m.INHERIT,he=m.RGBA,ue=m.STRING,le=m.NUMBER,ce=be.isNil,fe=be.isFunction,de=be.isNumber,pe=be.isObject,_e=be.clone,ye=be.equalArr,ve=Jt.linear,ge={};["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color"].forEach(function(t){ge[t]=!0});var Pe={};["fontSize","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","bottom","left","right","top","flexBasis","width","height","lineHeight","marginBottom","marginLeft","marginRight","marginTop","paddingBottom","paddingLeft","paddingRight","paddingTop","strokeWidth","strokeMiterlimit"].forEach(function(t){Pe[t]=!0});var Re={};["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"].forEach(function(t){Re[t]=!0});var Te={};["backgroundImage","fill","stroke"].forEach(function(t){Te[t]=!0});var Le={linear:!0,radial:!0},Ce={};function Oe(t){return!re.STYLE.hasOwnProperty(t)&&!re.GEOM.hasOwnProperty(t)}function We(t,e,i){for(var r=!1,n=Kt.REPAINT,a=0,o=i.length;a<o;a++){var s=i[a],h=t[s],u=e[s];if(ce(h)||ce(u)){if((!ce(h)||!ce(u))&&(r=!0,Oe(s))){n=Kt.REFLOW;break}}else if(!function(t,e,i){if("transform"===t)return ye(e[0][1],i[0][1]);if("filter"===t){if(e.length!==i.length)return;for(var r=0,n=e.length;r<n;r++)if(!ye(e[r],i[r]))return}else{if("transformOrigin"===t||"backgroundSize"===t)return e[0].value===i[0].value&&e[0].unit===i[0].unit&&e[1].value===i[1].value&&e[1].unit===i[1].unit;if("backgroundPositionX"===t||"backgroundPositionY"===t||Pe.hasOwnProperty(t)||Ce.hasOwnProperty(t))return e.value===i.value&&e.unit===i.unit;if(Re.hasOwnProperty(t))return e[0].value===i[0].value&&e[0].unit===i[0].unit&&e[1].value===i[1].value&&e[1].unit===i[1].unit;if(ge.hasOwnProperty(t))return e.unit===i.unit&&ye(e.value,i.value);if(Te.hasOwnProperty(t)&&e.k===i.k&&Le.hasOwnProperty(e.k)){var a=e.v,o=i.v;if(e.d!==i.d||a.length!==o.length)return;for(var s=0,h=a.length;s<h;s++){var u=a[s],l=o[s];if(u.length!==l.length)return;for(var c=0;c<4;c++)if(u[0][c]!==l[0][c])return;if(1<u.length&&(u[1].value!==l[1].value||u[1].unit!==l[1].unit))return}return 1}if(re.GEOM.hasOwnProperty(t)){if("points"===t||"controls"===t){if(e.length!==i.length)return;for(var f=0,d=e.length;f<d;f++)if(e[f]!==i[f]&&(e[f][0]!==i[f][0]||e[f][1]!==i[f][1]))return;return 1}if("controlA"===t||"controlB"===t)return e.length===i.length&&(e[0]===i[0]&&e[1]===i[1])}}return e===i}(s,h,u)){if(r=!0,n!==Kt.REPAINT)break;if(Oe(s)){n=Kt.REFLOW;break}}}return[r,n]}function Ne(i,t,e,r){e.setRefreshLevel(r),e.__frameHook();var n={},a=t.target;t.keys.forEach(function(t){var e=i[t];n[t]=e,re.GEOM.hasOwnProperty(t)?(a.currentProps[t]=e,a.__cacheProps[t]=void 0):(a.currentStyle[t]=e,a.__cacheStyle[t]=void 0)}),t.__style=n}function Ie(i,r,t,n){return t.forEach(function(t){var e=function(t,e,i,r){var n={k:i},a=t[i],o=e[i];if("transform"===i){if(!a&&!o)return;var s=a?a[0][1]:[1,0,0,1,0,0],h=o?o[0][1]:[1,0,0,1,0,0];if(ye(s,h))return;return n.v=[h[0]-s[0],h[1]-s[1],h[2]-s[2],h[3]-s[3],h[4]-s[4],h[5]-s[5]],n}if("filter"===i)a&&a.length?o&&o.length?n.v=o[0][1]-a[0][1]:n.v=-a[0][1]:n.v=o[0][1];else if("transformOrigin"===i){n.v=[];for(var u=0;u<2;u++){var l,c,f=a[u],d=o[u];f.unit===d.unit?n.v.push(d.value-f.value):f.unit===ae&&d.unit===oe?(l=.01*d.value*r[u?"outerHeight":"outerWidth"],n.v.push(l-f.value)):f.unit===oe&&d.unit===ae&&(c=100*d.value/r[u?"outerHeight":"outerWidth"],n.v.push(c-f.value))}if(ye(n.v,[0,0]))return}else if("backgroundPositionX"===i||"backgroundPositionY"===i){if(a.unit===o.unit&&-1<[ae,oe].indexOf(a.unit)){var p=o.value-a.value;if(0==p)return;n.v=p}else if(a.unit===ae&&o.unit===oe){var _=.01*o.value*r["backgroundPositionX"===i?"innerWidth":"innerHeight"];if(0===(_-=a.value))return;n.v=_}else if(a.unit===oe&&o.unit===ae){var y=100*o.value/r["backgroundPositionX"===i?"innerWidth":"innerHeight"];if(0===(y-=a.value))return;n.v=y}}else if(Ce.hasOwnProperty(i)){if(a.unit===o.unit){var v=o.value-a.value;if(0==v)return;n.v=v}else if(a.unit===ae&&o.unit===oe){var g=.01*o.value*r[/\w+X$/.test(i)?"outerWidth":"outerHeight"];if(0===(g-=a.value))return;n.v=g}else if(a.unit===oe&&o.unit===ae){var m=100*o.value/r[/\w+X$/.test(i)?"outerWidth":"outerHeight"];if(0===(m-=a.value))return;n.v=m}}else if("backgroundSize"===i){n.v=[];for(var k=0;k<2;k++){var b=a[k],x=o[k];if(b.unit===x.unit&&-1<[ae,oe].indexOf(b.unit))n.v.push(x.value-b.value);else if(b.unit===ae&&x.unit===oe){var M=.01*x.value*r[k?"innerWidth":"innerHeight"];n.v.push(M-b.value)}else{if(b.unit!==oe||x.unit!==ae)return n.n=a,n;var w=100*x.value/r[k?"innerWidth":"innerHeight"];n.v.push(w-b.value)}}if(ye(n.v,[0,0]))return}else if(Te.hasOwnProperty(i))if(a.k!==o.k)n.n=a;else if("linear"===a.k||"radial"===a.k){var S=a.v,A=o.v;if(ye(S,A))return;n.v=[];for(var E,P=r.innerWidth,R=0,T=Math.min(S.length,A.length);R<T;R++){var L=S[R],C=A[R],O=[];O.push([C[0][0]-L[0][0],C[0][1]-L[0][1],C[0][2]-L[0][2],C[0][3]-L[0][3]]),E=ye(O,[0,0,0,0]),L[1]&&C[1]?(L[1].unit===C[1].unit?O.push(C[1].value-L[1].value):L[1].unit===ae&&C[1].unit===oe?O.push(C[1].value*P*.01-L[1].value):L[1].unit===oe&&C[1].unit===ae&&O.push(100*C[1].value/P-L[1].value),E=E&&0===O[4]):(L[1]||C[1])&&(E=!1),n.v.push(O)}if("linear"===a.k){var W=o.d-a.d;if(E&&0==W)return;n.d=W}else{n.p=[];for(var N=0;N<2;N++){var I,D,B=a.p[N],F=o.p[N];B.unit===F.unit?n.p.push(F.value-B.value):B.unit===ae&&F.unit===oe?(I=.01*F.value*r[N?"innerWidth":"innerHeight"],n.p.push(I-B.value)):B.unit===oe&&F.unit===ae&&(D=100*F.value/r[N?"innerWidth":"innerHeight"],n.p.push(D-B.value))}if(E&&ye(n.p,[0,0]))return}}else{if(ye(o,a))return;n.v=[o[0]-a[0],o[1]-a[1],o[2]-a[2],o[3]-a[3]]}else if(ge.hasOwnProperty(i)){if(o=o.value,a=a.value,ye(o,a)||0===o[3]&&0===a[3])return;n.v=[o[0]-a[0],o[1]-a[1],o[2]-a[2],o[3]-a[3]]}else if(Re.hasOwnProperty(i)){if(o[0].value===a[0].value&&o[0].unit===a[0].unit&&o[1].value===a[1].value&&o[1].unit===a[1].unit)return;r.computedStyle;n.v=[];for(var H=0;H<2;H++)o[H].unit===a[H].unit?n.v.push(o[H].value-a[H].value):a[H].unit===ae&&o[H].unit===oe?n.v.push(.01*o[H].value*r[H?"outerHeight":"outerWidth"]-a[H].value):a[H].unit===oe&&o[H].unit===ae?n.v.push(100*o[H].value/r[H?"outerHeight":"outerWidth"]-a[H].value):n.v.push(0)}else if(Pe.hasOwnProperty(i)){if(a.unit===ne&&o.unit===ne)return;if(a.unit===ne||o.unit===ne)return n.n=a,n;var z,G,X=r.computedStyle,j=(r.parent||r).computedStyle,Y=0;if(a.unit===o.unit?Y=o.value-a.value:a.unit===ae&&o.unit===oe?("fontSize"===i?z=o.value*j[i]*.01:"flexBasis"===i&&"row"===X.flexDirection||"width"===i||/margin/.test(i)||/padding/.test(i)||-1<["left","right"].indexOf(i)?z=o.value*j.width*.01:("flexBasis"===i||"height"===i||-1<["top","bottom"].indexOf(i))&&(z=o.value*j.height*.01),Y=z-a.value):a.unit===oe&&o.unit===ae?("fontSize"===i?G=100*o.value/j[i]:"flexBasis"===i&&"row"===X.flexDirection||"width"===i||/margin/.test(i)||/padding/.test(i)||-1<["left","right"].indexOf(i)?G=100*o.value/j.width:("flexBasis"===i||"height"===i||-1<["top","bottom"].indexOf(i))&&(G=100*o.value/j.height),Y=G-a.value):"lineHeight"===i&&(a.unit===ae&&o.unit===le?Y=o.value*X.fontSize-a.value:a.unit===le&&o.unit===ae&&(Y=o.value/X.fontSize-a.value)),0===Y||isNaN(Y))return;n.v=Y}else if(re.GEOM.hasOwnProperty(i))if(ce(a))n.n=null;else if("points"===i||"controls"===i){if(ce(o)||ce(a))return a;if(ye(a,o))return;n.v=[];for(var V=0,q=Math.min(a.length,o.length);V<q;V++){var $=a[V],U=o[V];if(ce($)||ce(U))n.v.push(U);else{for(var Z=[],Q=0,J=Math.max($.length,U.length);Q<J;Q++)ce($[Q])||ce(U[Q])?Z.push(U[Q]):Z.push(U[Q]-$[Q]);n.v.push(Z)}}}else if("controlA"===i||"controlB"===i){if(ce(o)||ce(a))return a;if(ye(a,o))return;n.v=[o[0]-a[0],o[1]-a[1]]}else{if(o===a)return;n.v=o-a}else if("opacity"===i||"zIndex"===i){if(o===a)return;n.v=o-a}else{if(o===a)return;n.n=a}return n}(i.style,r.style,t,n);e&&i.transition.push(e)}),r}function De(t,g){var e,i,r,n,a,m=_e(t.style),o=(e=t.easing,r=/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(e)?(i=e.match(/[\d.]+/g),Jt.cubicBezier(i[0],i[1],i[2],i[3])):(r=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(n=parseInt(r[1]),a=r[2],function(t){if(n&&0<n){var e=1/n;return("start"===a?Math.ceil(t/e):Math.floor(t/e))/n}return t}):Jt[e]||ve);return o!==ve&&(g=o(g)),t.transition.forEach(function(t){var e=t.k,i=t.v,r=t.n,n=t.d,a=t.p,o=m[e];if(t.hasOwnProperty("n"))m[e]=r;else if("transform"===e){o=o||(m[e]=[["matrix",[1,0,0,1,0,0]]]);for(var s=0;s<6;s++)o[0][1][s]+=i[s]*g}else if("filter"===e)(o=o||(m[e]=[["blur",0]]))[0][1]+=i*g;else if(Re.hasOwnProperty(e))for(var h=0;h<2;h++)o[h].value+=i[h]*g;else if("backgroundPositionX"===e||"backgroundPositionY"===e||Pe.hasOwnProperty(e)||Ce.hasOwnProperty(e))0!==i&&(o.value+=i*g);else if("transformOrigin"===e||"backgroundSize"===e)0!==i[0]&&(o[0].value+=i[0]*g),0!==i[1]&&(o[1].value+=i[1]*g);else if(Te.hasOwnProperty(e))if(Le.hasOwnProperty(o.k)){for(var u=0,l=Math.min(o.v.length,i.length);u<l;u++){var c=o.v[u],f=i[u];c[0][0]+=f[0][0]*g,c[0][1]+=f[0][1]*g,c[0][2]+=f[0][2]*g,c[0][3]+=f[0][3]*g,c[1]&&f[1]&&(c[1].value+=f[1]*g)}"linear"===o.k&&void 0!==o.d&&void 0!==n&&(o.d+=n*g),"radial"===o.k&&void 0!==o.p&&void 0!==a&&(o.p[0].value+=a[0]*g,o.p[1].value+=a[1]*g)}else o[0]+=i[0]*g,o[1]+=i[1]*g,o[2]+=i[2]*g,o[3]+=i[3]*g;else if(ge.hasOwnProperty(e))(o=o.value)[0]+=i[0]*g,o[1]+=i[1]*g,o[2]+=i[2]*g,o[3]+=i[3]*g;else if(re.GEOM.hasOwnProperty(e)){var d=m[e];if("points"===e||"controls"===e){for(var p=0,_=Math.min(d.length,i.length);p<_;p++)if(!ce(d[p])&&d[p].length)for(var y=0,v=Math.min(d[p].length,i[p].length);y<v;y++)ce(d[p][y])||ce(i[p][y])||(d[p][y]+=i[p][y]*g)}else"controlA"===e||"controlB"===e?(d[0]+=i[0]*g,d[1]+=i[1]*g):m[e]+=i*g}else"opacity"!==e&&"zIndex"!==e||(m[e]+=i*g)}),m}function Be(t,e){return fe(t)&&(e=t,t={}),[t||{},e]}["translateX","translateY","scaleX","scaleY","rotateZ","skewX","skewY"].forEach(function(t){Ce[t]=!0});var Fe=0,He=function(){e(s,Pt);var o=l(s);function s(t,n,e){var i,a;h(this,s),(i=o.call(this)).__id=Fe++,i.__target=t,n=_e(n||[]),Array.isArray(n)?i.__list=n.filter(function(t){return t&&pe(t)}):n&&pe(n)?(a=[],Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var i=0,r=e.length;i<r;i++){(a[i]=a[i]||{offset:i/(r-1)})[t]=e[i]}}),i.__list=a):i.__list=[],de(e)&&(i.__options={duration:e},e=i.__options);var r=i.__options=e||{};return i.__duration=Math.max(0,parseFloat(r.duration)||0),i.delay=r.delay,i.endDelay=r.endDelay,i.iterations=r.iterations,i.fps=r.fps,i.fill=r.fill,i.direction=r.direction,i.playbackRate=r.playbackRate,i.__easing=r.easing,i.playCount=0,i.spfLimit=r.spfLimit,i.__frames=[],i.__framesR=[],i.__startTime=null,i.currentTime=0,i.__nextTime=0,i.__fpsTime=0,i.__playState="idle",i.__isDestroyed=!1,i.__style={},i.__init(),i}return u(s,[{key:"__init",value:function(){var r=this,n=this.iterations,o=this.duration,i=this.list,s=this.easing,a=this.target;if(!(n<1||i.length<1)){for(var t,e=0,h=i.length;e<h;e++){var u=i[e];u.hasOwnProperty("offset")&&(u.offset=parseFloat(u.offset)||0,u.offset=Math.max(0,u.offset),u.offset=Math.min(1,u.offset),(isNaN(u.offset)||u.offset<0||1<u.offset||u.offset<=-1)&&(i.splice(e,1),e--,h--))}1===i.length?(i[0]=_e(i[0]),1===i[0].offset?i.unshift({offset:0}):((t=_e(i[0])).offset=1,i.push(t))):i.forEach(function(t,e){i[e]=_e(t)});var l=i[0];l.hasOwnProperty("offset")&&0<l.offset?(l={offset:0},i.unshift(l)):l.offset=0;var c=i[i.length-1];c.hasOwnProperty("offset")&&c.offset<1?(c={offset:1},i.push(c)):c.offset=1;for(var f=1,d=i.length;f<d;f++){if(!(v=i[f]).hasOwnProperty("offset")){for(var p=void 0,_=f+1;_<d&&!(p=i[_]).hasOwnProperty("offset");_++);for(var y=_-f+1,v=i[f-1],g=(p.offset-v.offset)/y,m=f;m<_;m++){i[m].offset=v.offset+g*(m+1-f)}f=_}}var k=[];i.forEach(function(t){var e,i,r,n,a;k.push((i=o,r=s,n=(e=t).offset,a=e.easing,delete e.offset,delete e.easing,{style:e=wt.normalize(e),time:n*i,easing:a||r,transition:[]}))}),this.__frames=k;var b,x,M,w,S,A,E,P,R=this.__keys=(x=a,M={},w=[],(b=k).forEach(function(t){var i=t.style;Object.keys(i).forEach(function(t){var e=i[t];ce(e)||M.hasOwnProperty(t)||(M[t]=!0,w.push(t))})}),b.forEach(function(t){var e=t.style;w.forEach(function(t){e.hasOwnProperty(t)||(re.GEOM.hasOwnProperty(t)?e[t]=x.currentProps[t]:e[t]=x.currentStyle[t])})}),w);S=k,A=R,P=(E=a).computedStyle,S.forEach(function(t){var a=t.style;A.forEach(function(t){var e,i,r,n=a[t];ce(n)||("transform"===t?(e=E.outerWidth,i=E.outerHeight,r=we.calMatrix(n,e,i),a[t]=[["matrix",r]]):n.unit===se&&("color"===t?a[t]={value:be.rgba2int(P[t]),unit:he}:Pe.hasOwnProperty(t)?a[t]={value:P[t],unit:ae}:"fontWeight"===t?a[t]={value:P[t],unit:le}:"fontStyle"!==t&&"fontFamily"!==t&&"textAlign"!==t||(a[t]={value:P[t],unit:ue})))})});for(var T=k.length,L=k[0],C=1;C<T;C++)L=Ie(L,k[C],R,a);var O=_e(k).reverse();O.forEach(function(t){t.time=o-t.time,t.transition=[]}),L=O[0];for(var W=1;W<T;W++){L=Ie(L,O[W],R,a)}this.__framesR=O,this.__clean=function(t){var e;r.__cancelTask(),r.__nextTime=0;var i=r.style;t?(r.__currentTime=r.delay+o+r.endDelay,r.__playCount=n,r.__playState="finished",r.__stayEnd()||(r.__style={},e=!0)):(r.__playCount=r.__currentTime=0,r.__playState="idle",r.__style={},e=!0),e&&R.forEach(function(t){re.GEOM.hasOwnProperty(t)?a.__currentProps[t]===i[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===i[t]&&(a.__currentStyle[t]=a.style[t])})},this.__fin=function(t){r.__begin=r.__end=r.__isDelay=r.__finish=r.__inFps=r.__enterFrame=null,r.emit(Pt.FINISH),fe(t)&&t()},this.__frameCb=function(t,e){r.emit(Pt.FRAME,t,e),r.__firstPlay&&(r.__firstPlay=!1,r.emit(Pt.PLAY)),fe(r.__playCb)&&(r.__playCb(t,e),r.__playCb=null)}}}},{key:"__calDiffTime",value:function(t){var e=this.playbackRate,i=this.spfLimit,r=this.fps;return this.__currentTime=this.__nextTime,i&&(!0===i?t=Math.min(t,1e3/r):0<i&&(t=Math.min(t,i))),1!==e&&0<e&&(t*=e),this.__nextTime+=t,this.__currentTime}},{key:"play",value:function(t){var b=this,e=this.isDestroyed,x=this.duration,i=this.playState,r=this.__frameCb,n=this.list;if(e||x<=0||n.length<1)return this;if("running"===i)return this;this.__cancelTask(),this.__playCb=t,this.__playState="running";var M,w,S,A,E,P,R,a,T,L,C,O,W=this.__firstPlay=!0;return this.__enterFrame||(M=this.frames,w=this.framesR,S=this.direction,A=this.delay,E=this.endDelay,P=this.keys,R=this.__clean,a=this.__fin,T=this.__stayEnd(),L=this.__stayBegin(),this.__currentTime=this.__nextTime=this.__fpsTime=0,C=M.length,O=this.__enterFrame={before:function(t){var e=b.root,i=b.style,r=b.fps,n=b.playCount,a=b.iterations;if(e){var o,s,h,u,l,c,f=b.__calDiffTime(t);if(!W&&r<60){if((t=b.__fpsTime+=t)<1e3/r)return void(b.__inFps=!0);b.__fpsTime=0}if(W=!1,0<n&&(A=0),f<A)return L&&(h=(s=me(We(o=M[0].style,i,P),2))[0],u=s[1],h&&Ne(o,b,e,u)),0===f&&(b.__begin=!0),void(b.__isDelay=!0);c="reverse"===S?w:{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(S)?(l=n%2==0,"alternate"===S?l?M:w:l?w:M):M,0===(f-=A)&&(b.__begin=!0);var d,p,_,y,v=function t(e,i,r,n){if(e===i)return n[e].time>r?e-1:e;var a=e+(i-e>>1),o=n[a];return o.time===r?a:o.time>r?t(e,Math.max(a-1,e),r,n):t(Math.min(a+1,i),i,r,n)}(0,C-1,f,c),g=c[v],m=v===C-1,k=a-1<=n;m?(d=f<x+E,h=(p=me(We(g=T||!k?g.style:{},i,P),2))[0],u=p[1],k?d||(b.__nextTime=0,a<=(n=++b.__playCount)&&zt.offFrame(O)):(b.__nextTime=f-x,n=++b.__playCount,b.__nextBegin=!0)):(_=c[v+1].time-g.time,h=(y=me(We(g=De(g,(f-g.time)/_),i,P),2))[0],u=y[1]),h&&Ne(g,b,e,u),!m||d&&!k||(b.__end=!0,a<=n&&(b.__finish=!0,R(!0)))}},after:function(t){b.__inFps?b.__inFps=!1:(r(t,b.__isDelay),b.__isDelay=!1,b.__begin&&(b.__begin=!1,b.emit(Pt.BEGIN,b.playCount)),b.__end&&(b.__end=!1,b.emit(Pt.END,b.playCount-1)),b.__finish&&(b.__finish=!1,a()),b.__nextBegin&&(b.__nextBegin=!1,b.__begin=!0))}}),zt.onFrame(this.__enterFrame),this.__startTime=zt.__now,this}},{key:"pause",value:function(){var t=this.isDestroyed,e=this.duration,i=this.pending;return t||e<=0||i||(this.__playState="paused",this.__cancelTask(),this.emit(Pt.PAUSE)),this}},{key:"resume",value:function(t){var e=this.isDestroyed,i=this.duration,r=this.playState;return e||i<=0||"paused"!==r?this:this.play(t)}},{key:"finish",value:function(e){var t=this,i=this,r=i.isDestroyed,n=i.duration,a=i.playState,o=i.list;if(r||n<=0||o.length<1||"finished"===a||"idle"===a)return i;i.__cancelTask();var s,h,u,l,c,f=i.root,d=i.style,p=i.keys,_=i.frames,y=i.__frameCb,v=i.__clean,g=i.__fin;return f&&(l=i.__stayEnd()?(u=(h=me(We(s=_[_.length-1].style,d,p),2))[0],h[1]):(u=(c=me(We(s={},d,p),2))[0],c[1]),u?zt.nextFrame(this.__enterFrame={before:function(){Ne(s,t,f,l),v(!0)},after:function(t){y(t),g(e)}}):(v(!0),g(e))),i}},{key:"cancel",value:function(t){var e=this,i=this.isDestroyed,r=this.duration,n=this.playState,a=this.list;if(i||r<=0||"idle"===n||a.length<1)return this;this.__cancelTask();var o,s,h,u,l=this.root,c=this.style,f=this.keys,d=this.__frameCb,p=this.__clean;return l&&(s=(o=me(We({},c,f),2))[0],h=o[1],u=function(){e.__cancelTask(),e.__begin=e.__end=e.__isDelay=e.__finish=e.__inFps=e.__enterFrame=null,e.emit(Pt.CANCEL),fe(t)&&t()},s?zt.nextFrame(this.__enterFrame={before:function(){Ne({},e,l,h),p()},after:function(t){d(t),u()}}):(p(),u())),this}},{key:"gotoAndPlay",value:function(t,e,i){var r=this.isDestroyed,n=this.duration,a=this.delay,o=this.endDelay;if(r||n<=0)return this;var s=me(Be(e,i),2);return e=s[0],i=s[1],this.__goto(t,e.isFrame,e.excludeDelay),n+a+o<t?this.finish(i):this.play(i)}},{key:"gotoAndStop",value:function(t,e,i){var r=this,n=this.isDestroyed,a=this.duration,o=this.delay,s=this.endDelay;if(n||a<=0)return this;var h=me(Be(e,i),2);return e=h[0],i=h[1],a+o+s<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(i):this.play(function(t){r.__playState="paused",r.__cancelTask(),fe(i)&&i(t)})}},{key:"__goto",value:function(t,e,i){var r=this.duration,n=this.iterations,a=this.delay;if(this.__playState="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),i&&(t+=a);r<t&&this.playCount<n-1;)this.__playCount++,t-=r;return this.__nextTime=t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__cancelTask",value:function(){zt.offFrame(this.__enterFrame),this.__playCb=null}},{key:"__destroy",value:function(){var t=this;zt.nextFrame({before:function(){t.__clean(),t.__target=null}}),t.__startTime=null,t.__isDestroyed=!0,t.removeControl()}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__target}},{key:"root",get:function(){return this.target.root}},{key:"keys",get:function(){return this.__keys}},{key:"style",get:function(){return this.__style}},{key:"list",get:function(){return this.__list}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__duration},set:function(t){this.__duration=Math.max(0,parseFloat(t)||0)}},{key:"delay",get:function(){return this.__delay},set:function(t){this.__delay=Math.max(0,parseFloat(t)||0)}},{key:"endDelay",get:function(){return this.__endDelay},set:function(t){this.__endDelay=Math.max(0,parseFloat(t)||0)}},{key:"fps",get:function(){return this.__fps},set:function(t){(t=parseInt(t)||60)<=0&&(t=60),this.__fps=t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__iterations},set:function(t){t===1/0||be.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1)),this.__iterations=t}},{key:"fill",get:function(){return this.__fill},set:function(t){this.__fill=t||"none"}},{key:"direction",get:function(){return this.__direction},set:function(t){this.__direction=t||"normal"}},{key:"frames",get:function(){return this.__frames}},{key:"framesR",get:function(){return this.__framesR}},{key:"playbackRate",get:function(){return this.__playbackRate},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1),this.__playbackRate=t}},{key:"easing",get:function(){return this.__easing}},{key:"startTime",get:function(){return this.__startTime}},{key:"currentTime",get:function(){return this.__currentTime},set:function(t){0<=(t=parseFloat(t)||0)&&(this.__currentTime=this.__nextTime=t)}},{key:"pending",get:function(){return"running"!==this.playState}},{key:"finished",get:function(){return"finished"===this.playState}},{key:"playState",get:function(){return this.__playState}},{key:"playCount",get:function(){return this.__playCount},set:function(t){this.__playCount=Math.max(0,parseInt(t)||0)}},{key:"isDestroyed",get:function(){return this.__isDestroyed}},{key:"animating",get:function(){var t=this.playState;return"idle"!==t&&("finished"!==t||this.__stayEnd())}},{key:"spfLimit",get:function(){return this.__spfLimit},set:function(t){be.isNumber(t)||/^\d/.test(t)?this.__spfLimit=Math.max(t,parseInt(t)||0):this.__spfLimit=!!t}}]),s}();var ze={genCanvasPolygon:function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"fill";t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var r=1,n=e.length;r<n;r++){var a=e[r];2===a.length?t.lineTo(a[0],a[1]):4===a.length?t.quadraticCurveTo(a[0],a[1],a[2],a[3]):6===a.length&&t.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}t[i](),t.closePath()},genSvgPolygon:function(t){for(var e="M"+t[0][0]+","+t[0][1],i=1,r=t.length;i<r;i++){var n=t[i];2===n.length?e+="L"+n[0]+","+n[1]:4===n.length?e+="Q"+n[0]+","+n[1]+","+n[2]+","+n[3]:6===n.length&&(e+="C"+n[0]+","+n[1]+","+n[2]+","+n[3]+","+n[4]+","+n[5])}return e}},Ge=m.AUTO,Xe=m.PX,je=m.PERCENT,Ye=m.STRING,Ve=m.INHERIT,qe=be.clone,$e=be.int2rgba,Ue=be.equalArr,Ze=be.extend,Qe=be.joinArr,Je=wt.normalize,Ke=wt.calRelative,ti=wt.compute,ei=ze.genCanvasPolygon,ii=ze.genSvgPolygon;function ri(t,e,i,r,n){var a;t===xe.CANVAS?(r.fillStyle!==i&&(r.fillStyle=i),e.forEach(function(t){ei(r,t)})):t===xe.SVG&&(a="",e.forEach(function(t){a+=ii(t)}),n.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",a],["fill",i]]}))}function ni(t,e,i,r,n,a,o,s,h,u,l,c,f,d,p,_,y){var v,g=16<arguments.length&&void 0!==y?y:"fill",m=Se.calRadius(i,r,n,a,h,u,l,c,f,d,p,_);t===xe.CANVAS?(o.fillStyle!==e&&(o.fillStyle=e),m?ei(o,m,g):(o.beginPath(),o.rect(i,r,n,a),o[g](),o.closePath())):t===xe.SVG&&(m?(v=ii(m),s.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",v],["fill",e]]})):s.virtualDom.bb.push({type:"item",tagName:"rect",props:[["x",i],["y",r],["width",n],["height",a],["fill",e]]}))}var ai=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"];function oi(t,e,i){return t.unit===Xe?t.value:t.unit===je?(e-i)*t.value*.01:0}var si=function(){e(r,x);var i=l(r);function r(t){var n,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return h(this,r),n=i.call(this),Array.isArray(e)?(n.props=be.arr2hash(e),n.__props=e):(n.props=e,n.__props=be.hash2arr(e)),n.__tagName=t,n.__style=n.props.style||{},n.__currentStyle={},n.__computedStyle={},n.__listener={},n.__props.forEach(function(t){var e,i=t[0],r=t[1];/^on[a-zA-Z]/.test(i)&&(i=i.slice(2).toLowerCase(),-1===(e=n.__listener[i]=n.__listener[i]||[]).indexOf(r)&&e.push(r))}),n.__animationList=[],n.__loadBgi={cb:function(){}},n.__cacheStyle={},n}return u(r,[{key:"__mp",value:function(r,n,a){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e="margin"+t,i="padding"+t;n[e]=o.__mpWidth(r[e],a),n[i]=o.__mpWidth(r[i],a)})}},{key:"__mpWidth",value:function(t,e){return t.unit===Xe?t.value:t.unit===je?t.value*e*.01:0}},{key:"__layout",value:function(t,e,i){var r,n,a,o,s,h,u,l,c,f=t.w,d=this.isDestroyed,p=this.currentStyle,_=this.computedStyle,y=p.display,v=p.width,g=p.position;if(d||"none"===y)_.width=_.height=0;else{if(i||this.__mp(p,_,f),v.unit!==Ge)switch(v.unit){case Xe:f=v.value;break;case je:f*=.01*v.value}this.__ox=this.__oy=0,"flex"===y?this.__layoutFlex(t,e):"inline"===y?this.__layoutInline(t,e):this.__layoutBlock(t,e),"relative"===g?(r=p.top,n=p.right,a=p.bottom,o=p.left,s=this.parent,r.unit!==Ge?(h=Ke(p,"top",r,s),this.__offsetY(h),_.top=h,_.bottom="auto"):a.unit!==Ge?(u=Ke(p,"bottom",a,s),this.__offsetY(-u),_.bottom=u,_.top="auto"):_.top=_.bottom="auto",o.unit!==Ge?(l=Ke(p,"left",o,s,!0),this.__offsetX(l),_.left=l,_.right="auto"):n.unit!==Ge?(c=Ke(p,"right",n,s,!0),this.__offsetX(-c),_.right=c,_.left="auto"):_.left=_.right="auto"):"absolute"!==p.position&&(_.top=_.bottom=_.left=_.right="auto"),_.width=this.width,_.height=this.height,this.__cacheStyle={},this.__cacheProps={};var m,k=this.__animateRecords;k&&(this.__animateRecords=null,(m=this.root.animateController).__records=m.records.concat(k))}}},{key:"__preLayout",value:function(t){var e=t.x,i=t.y,r=t.w,n=t.h,a=t.w2,o=t.h2;this.__x=e,this.__y=i;var s,h,u=this.currentStyle,l=this.computedStyle,c=u.width,f=u.height,d=l.borderTopWidth,p=l.borderRightWidth,_=l.borderBottomWidth,y=l.borderLeftWidth,v=l.marginTop,g=l.marginRight,m=l.marginBottom,k=l.marginLeft,b=l.paddingTop,x=l.paddingRight,M=l.paddingBottom,w=l.paddingLeft;if(void 0!==a)s=!0,r=a;else if(c.unit!==Ge)switch(s=!0,c.unit){case Xe:r=c.value;break;case je:r*=.01*c.value}if(void 0!==o)h=!0,n=o;else if(f.unit!==Ge)switch(h=!0,f.unit){case Xe:n=f.value;break;case je:n*=.01*f.value}return e+=y+k+w,t.x=e,i+=d+v+b,t.y=i,c.unit===Ge&&(r-=y+p+k+g+w+x),f.unit===Ge&&(n-=d+_+v+m+b+M),{fixedWidth:s,fixedHeight:h,x:e,y:i,w:r,h:n}}},{key:"__marginAuto",value:function(t,e){var i,r=t.position,n=t.marginLeft,a=t.marginRight,o=t.width;"absolute"===r||o===Ge||n.unit!==Ge||a.unit!==Ge||(i=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-i),!0)}},{key:"render",value:function(o,e,s){var h=this;o===xe.SVG&&(this.__virtualDom={bb:[],children:[],opacity:1});var t=this.isDestroyed,r=this.currentStyle,n=this.computedStyle,i=this.width,a=this.height,u=this.innerWidth,l=this.innerHeight,c=this.outerWidth,f=this.outerHeight,d=this.__cacheStyle,p=this.parent;if(!t&&"none"!==n.display){var _,y,v,g,m,k,b,x,M,w,S,A,E,P,R,T=this.sx,L=this.sy,C=n.marginTop,O=n.marginLeft,W=n.paddingTop,N=n.paddingRight,I=n.paddingBottom,D=n.paddingLeft,B=n.borderLeftWidth,F=n.borderRightWidth,H=n.borderTopWidth,z=n.borderBottomWidth,G=T+O,X=G+B,j=X+i+D+N,Y=j+F,V=L+C,q=V+H,$=q+a+W+I,U=$+z,Z=r.backgroundPositionX,Q=r.backgroundPositionY,J=d.matrix;void 0===d.transformOrigin&&(J=!(d.transformOrigin=!0),n.transformOrigin=we.calOrigin(r.transformOrigin,c,f)),void 0!==d.transform&&void 0!==d.translateX&&void 0!==d.translateY&&void 0!==d.rotateZ&&void 0!==d.scaleX&&void 0!==d.scaleY&&void 0!==d.skewX&&void 0!==d.skewY||(d.transform=d.translateX=d.translateY=d.rotateZ=d.scaleX=d.scaleY=d.skewX=d.skewY=!0,J=!1,r.transform?_=we.calMatrix(r.transform,c,f):(y=[],["translateX","translateY","rotateZ","rotate","skewX","skewY","scaleX","scaleY"].forEach(function(t){var e,i=r[t];be.isNil(i)||(n[t]=i.value,e=-1<t.indexOf("scale"),1===i.value&&e||!e&&0===i.value||(i.unit===je&&("translateX"===t?n[t]=i.value*c*.01:"translateY"===t&&(n[t]=i.value*f*.01)),y.push([t,i])))}),y.length&&(_=we.calMatrix(y,c,f))),this.__matrix=n.transform=_||[1,0,0,1,0,0]),void 0===d.backgroundPositionX&&(d.backgroundPositionX=!0,n.backgroundPositionX=Z.unit===Xe?Z.value:Z.value*u),void 0===d.backgroundPositionY&&(d.backgroundPositionY=!0,n.backgroundPositionY=Q.unit===Xe?Q.value:Q.value*u),void 0===d.backgroundSize&&(d.backgroundSize=!0,n.backgroundSize=(v=r.backgroundSize,g=u,m=l,k=[],v.forEach(function(t,e){t.unit===Xe?k.push(t.value):t.unit===je?k.push(t.value*(e?m:g)*.01):t.unit===Ge?k.push(-1):t.unit===Ye&&k.push("contain"===t.value?-2:-3)}),k)),void 0===d.backgroundImage&&(b=n.backgroundImage=r.backgroundImage,be.isString(b)?(d.backgroundImage=!0,x=this.__loadBgi,(M=Ee.IMG[b])&&M.state===Ee.LOADED&&(x.url=b,x.source=M.source,x.width=M.width,x.height=M.height),x.url!==b&&(x.url=b,x.source=null,Ee.measureImg(b,function(t){t.success&&t.url===x.url&&!h.__isDestroyed&&(x.source=t.source,x.width=t.width,x.height=t.height,h.root.delRefreshTask(x.cb),h.root.addRefreshTask(x.cb))},{width:u,height:l}))):b&&b.k&&(d.backgroundImage=this.__gradient(o,e,s,X,q,j,$,u,l,b))),["opacity","zIndex","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundRepeat","filter"].forEach(function(t){n[t]=r[t]}),["backgroundColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"].forEach(function(t){void 0===d[t]&&(d[t]=$e(n[t]=r[t].value))}),p?(w=p.computedStyle,["fontStyle","color","visibility"].forEach(function(t){r[t].unit===Ve?n[t]=w[t]:n[t]=r[t].value,"color"===t&&(d.color=$e(n.color))})):(["fontStyle","color","visibility"].forEach(function(t){r[t].unit!==Ve&&(n[t]=r[t].value,"color"===t&&(d.color=$e(n.color)))}),4===r.fontStyle.unit&&(n.fontStyle="normal"),4===r.fontWeight.unit&&(n.fontWeight=400),4===r.color.unit&&(n.color=[0,0,0,1],d.color="rgba(0,0,0,1)"),4===r.visibility.unit&&(n.visibility="visible")),void 0!==d.borderTopLeftRadius&&void 0!==d.borderTopRightRadius&&void 0!==d.borderBottomRightRadius&&void 0!==d.borderBottomLeftRadius||(d.borderTopLeftRadius=d.borderTopRightRadius=d.borderBottomRightRadius=d.borderBottomLeftRadius=!0,S=c,A=f,E=r,P=n,R=!0,ai.forEach(function(t){P[t]=E[t].map(function(t,e){return 0<t.value?(R=!1,t.unit===Xe?Math.max(0,t.value):Math.max(0,t.value*(e?A:S)*.01)):0})}),R||ai.forEach(function(t,e){var i,r=e%2==0?0:1,n=r?A:S,a=P[t],o=P[ai[(e+1)%4]];a[r]+o[r]>n&&(i=.5*n,a[r]>=i&&o[r]>=i?a[r]=o[r]=i:a[r]>i?a[r]=n-o[r]:o[r]>i&&(o[r]=n-a[r]))}));var K,tt,et,it=n.backgroundColor,rt=n.borderTopColor,nt=n.borderTopStyle,at=n.borderRightColor,ot=n.borderRightStyle,st=n.borderBottomColor,ht=n.borderBottomStyle,ut=n.borderLeftColor,lt=n.borderLeftStyle,ct=n.borderTopLeftRadius,ft=n.borderTopRightRadius,dt=n.borderBottomRightRadius,pt=n.borderBottomLeftRadius,_t=n.visibility,yt=n.backgroundRepeat,vt=n.backgroundImage,gt=n.opacity,mt=n.filter,kt=n.backgroundSize,bt=n.transformOrigin,xt=n.transform;o===xe.CANVAS?((K=p||this.host&&this.host.parent)&&(gt*=K.__opacity),this.__opacity=gt,e.globalAlpha!==gt&&(e.globalAlpha=gt)):this.__virtualDom.opacity=gt;var Mt,wt,St,At,Et,Pt,Rt,Tt,Lt,Ct,Ot,Wt,Nt=tt=J||((et=bt.slice(0))[0]+=T,et[1]+=L,tt=xt,d.matrix=we.calMatrixByOrigin(tt,et));if(p&&(tt=Ue(tt,[1,0,0,1,0,0])?p.matrixEvent:Me.multiply(p.matrixEvent,tt)),this.__matrixEvent=tt,o===xe.CANVAS?e.setTransform.apply(e,ke(tt)):o===xe.SVG&&(Ue(Nt,[1,0,0,1,0,0])||(this.virtualDom.transform="matrix("+Qe(Nt,",")+")")),"hidden"!==_t){if(0<it[3]&&ni(o,d.backgroundColor,X,q,u,l,e,this,H,F,z,B,ct,ft,dt,pt),vt)if(be.isString(vt)){var It=this.__loadBgi;if(It.url===vt){var Dt=It.source;if(Dt){var Bt=It.width,Ft=It.height,Ht=me(kt,2),zt=Ht[0],Gt=Ht[1];-1===zt&&-1===Gt?(zt=Bt,Gt=Ft):-2===zt?u<Bt&&l<Ft?(Gt=Ft/l)<=(zt=Bt/u)?Gt=(zt=u)*Ft/Bt:zt=(Gt=l)*Bt/Ft:u<Bt?Gt=(zt=u)*Ft/Bt:l<Ft?zt=(Gt=l)*Bt/Ft:(zt=Bt,Gt=Ft):-3===zt?Bt<u&&Ft<l?(zt=Bt/u)<=(Gt=Ft/l)?Gt=(zt=u)*Ft/Bt:zt=(Gt=l)*Bt/Ft:Bt<u||!(Ft<l)&&(zt=Bt/u)<=(Gt=Ft/l)?Gt=(zt=u)*Ft/Bt:zt=(Gt=l)*Bt/Ft:-1===zt?zt=Gt*Bt/Ft:-1===Gt&&(Gt=zt*Ft/Bt);var Xt,jt,Yt=X+oi(Z,u,zt),Vt=q+oi(Q,l,Gt),qt=Yt<X||Vt<q||u<zt||l<Gt,$t=0,Ut=0,Zt=0,Qt=0;-1<["repeat-x","repeat"].indexOf(yt)&&(0<(Xt=Yt-X)&&($t=Math.ceil(Xt/zt)),0<(Xt=X+u-Yt-zt)&&(Ut=Math.ceil(Xt/zt))),-1<["repeat-y","repeat"].indexOf(yt)&&(0<(jt=Vt-q)&&(Zt=Math.ceil(jt/Gt)),0<(jt=q+l-Vt-Gt)&&(Qt=Math.ceil(jt/Gt)));var Jt,Kt,te,ee,ie=[];if(0<$t)for(var re=0;re<$t;re++){var ne=Yt-(re+1)*zt;ie.push([ne,Vt]),!qt&&0===re&&ne<X&&(qt=!0)}if(0<Ut)for(var ae=0;ae<Ut;ae++){var oe=Yt+(ae+1)*zt;ie.push([oe,Vt]),!qt&&ae===Ut-1&&X+u<oe+zt&&(qt=!0)}if(0<Zt)for(var se=0;se<Zt;se++){var he=Vt-(se+1)*Gt;ie.push([Yt,he]),!qt&&0===se&&he<q&&(qt=!0)}if(0<Qt)for(var ue=0;ue<Qt;ue++){var le=Vt+(ue+1)*Gt;ie.push([Yt,le]),!qt&&ue===Qt-1&&q+l<le+zt&&(qt=!0)}if(0<$t&&0<Zt)for(var ce=0;ce<$t;ce++)for(var fe=0;fe<Zt;fe++)ie.push([Yt-(ce+1)*zt,Vt-(fe+1)*Gt]);if(0<Ut&&0<Zt)for(var de=0;de<Ut;de++)for(var pe=0;pe<Zt;pe++)ie.push([Yt+(de+1)*zt,Vt-(pe+1)*Gt]);if(0<$t&&0<Qt)for(var _e=0;_e<$t;_e++)for(var ye=0;ye<Qt;ye++)ie.push([Yt-(_e+1)*zt,Vt+(ye+1)*Gt]);if(0<Ut&&0<Qt)for(var ve=0;ve<Ut;ve++)for(var ge=0;ge<Qt;ge++)ie.push([Yt+(ve+1)*zt,Vt+(ge+1)*Gt]);o===xe.CANVAS?(qt&&(e.save(),ni(o,"#FFF",X,q,u,l,e,this,H,F,z,B,ct,ft,dt,pt,"clip")),e.drawImage(Dt,Yt,Vt,zt,Gt),ie.forEach(function(t){e.drawImage(Dt,t[0],t[1],zt,Gt)}),qt&&e.restore()):o===xe.SVG&&(Jt=Ae.matrixResize(Bt,Ft,zt,Gt,Yt,Vt,u,l),Kt=[["xlink:href",vt],["x",Yt],["y",Vt],["width",Bt],["height",Ft]],Jt&&!Ue(Jt,[1,0,0,1,0,0])&&(te=!0,Kt.push(["transform","matrix("+Qe(Jt,",")+")"])),qt&&(ee=s.add({tagName:"mask",props:[],children:[{tagName:"rect",props:[["x",X],["y",q],["width",u],["height",l],["fill","#FFF"]]}]}),this.virtualDom.bbMask="url(#"+ee+")"),this.virtualDom.bb.push({type:"img",tagName:"image",props:Kt}),ie.forEach(function(t){var e,i=qe(Kt);!te||(e=Ae.matrixResize(Bt,Ft,zt,Gt,t[0],t[1],u,l))&&!Ue(e,[1,0,0,1,0,0])&&(i[5][1]="matrix("+Qe(e,",")+")"),i[1][1]=t[0],i[2][1]=t[1],h.virtualDom.bb.push({type:"img",tagName:"image",props:i})}))}}}else vt.k&&ni(o,d.backgroundImage,X,q,u,l,e,this,H,F,z,B,ct,ft,dt,pt);0<H&&0<rt[3]&&(Mt=Math.atan(H/B),wt=Math.atan(H/F),St=Se.calPoints(H,nt,Mt,wt,G,X,j,Y,V,q,$,U,0,ct,ft),ri(o,St,d.borderTopColor,e,this)),0<F&&0<at[3]&&(At=Math.atan(F/H),Et=Math.atan(F/z),Pt=Se.calPoints(F,ot,At,Et,G,X,j,Y,V,q,$,U,1,ft,dt),ri(o,Pt,d.borderRightColor,e,this)),0<z&&0<st[3]&&(Rt=Math.atan(z/B),Tt=Math.atan(z/F),Lt=Se.calPoints(z,ht,Rt,Tt,G,X,j,Y,V,q,$,U,2,pt,dt),ri(o,Lt,d.borderBottomColor,e,this)),0<B&&0<ut[3]&&(Ct=Math.atan(B/H),Ot=Math.atan(B/z),Wt=Se.calPoints(B,lt,Ct,Ot,G,X,j,Y,V,q,$,U,3,ct,pt),ri(o,Wt,d.borderLeftColor,e,this)),mt&&mt.forEach(function(t){var e,i,r=me(t,2),n=r[0],a=r[1];"blur"===n&&0<a&&o===xe.SVG&&(e=Math.floor(3*a*Math.sqrt(2*Math.PI)/4+.5),(e*=3)%2==0&&e++,i=s.add({tagName:"filter",props:[["x",-e/c],["y",-e/f],["width",1+2*e/c],["height",1+2*e/f]],children:[{tagName:"feGaussianBlur",props:[["stdDeviation",a]]}]}),h.virtualDom.filter="url(#"+i+")")})}}}},{key:"__renderByMask",value:function(e,t,i){var r=this.prev,n=this.root;if(r&&r.isMask)if(e===xe.CANVAS){var a=n.width,o=n.height,s=Ee.getCacheCanvas(a,o);this.render(e,s.ctx);for(var h,u=[];r&&r.isMask;)u.unshift(r),r=r.prev;1===u.length?(r=u[0],s.ctx.globalCompositeOperation="destination-in",r.render(e,s.ctx),s.draw(s.ctx),t.drawImage(s.canvas,0,0),s.draw(t)):(h=Ee.getMaskCanvas(a,o),u.forEach(function(t){t.render(e,h.ctx)}),h.draw(h.ctx),s.ctx.globalCompositeOperation="destination-in",s.ctx.drawImage(h.canvas,0,0),s.draw(s.ctx),t.drawImage(s.canvas,0,0),s.draw(t),h.ctx.globalCompositeOperation="source-over",h.ctx.clearRect(0,0,a,o),h.draw(h.ctx)),s.ctx.globalCompositeOperation="source-over",s.ctx.clearRect(0,0,a,o),s.draw(s.ctx)}else e===xe.SVG&&(this.render(e,t,i),this.virtualDom.mask=r.maskId);else this.render(e,t,i)}},{key:"__destroy",value:function(){var t,e=this.props.ref;!e||(t=this.host||this.root)&&t.ref[e]&&delete t.ref[e],this.animationList.forEach(function(t){return t.__destroy()}),this.root.delRefreshTask(this.__loadBgi.cb),this.root.delRefreshTask(this.__task),Z(U(r.prototype),"__destroy",this).call(this),this.__matrix=this.__matrixEvent=this.__root=null}},{key:"__emitEvent",value:function(e,t){var i=this.isDestroyed,r=this.computedStyle;if(!i&&"none"!==r.display&&!e.__stopPropagation){var n,a=e.event.type,o=this.listener;return o.hasOwnProperty(a)&&(n=o[a]),t?(e.target=this,n&&n.forEach(function(t){be.isFunction(t)&&!e.__stopImmediatePropagation&&t(e)}),!0):this.willResponseEvent(e)?(n&&n.forEach(function(t){be.isFunction(t)&&!e.__stopImmediatePropagation&&t(e)}),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,i=t.y,r=this.sx,n=this.sy,a=this.outerWidth,o=this.outerHeight,s=this.matrixEvent;if(we.pointInQuadrilateral(e,i,r,n,r+a,n,r+a,n+o,r,n+o,s))return t.target||(t.target=this,"touchstart"===t.event.type&&(this.root.__touchstartTarget=this)),!0}},{key:"__gradient",value:function(t,e,i,r,n,a,o,s,h,u){var l,c,f,d=u.k,p=u.v,_=u.d,y=u.s,v=u.z,g=u.p,m=r+.5*s,k=n+.5*h;return"linear"===d?(l=F.getLinear(p,_,m,k,s,h),c=this.__getLg(t,e,i,l)):"radial"===d&&(f=F.getRadial(p,y,v,g,r,n,a,o),c=this.__getRg(t,e,i,f)),c}},{key:"__getLg",value:function(t,e,i,r){if(t===xe.CANVAS){var n=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach(function(t){n.addColorStop(t[1],t[0])}),n}if(t===xe.SVG)return"url(#"+i.add({tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",t[0]],["offset",100*t[1]+"%"]]}})})+")"}},{key:"__getRg",value:function(t,e,i,r){if(t===xe.CANVAS){var n=e.createRadialGradient(r.cx,r.cy,0,r.cx,r.cy,r.r);return r.stop.forEach(function(t){n.addColorStop(t[1],t[0])}),n}if(t===xe.SVG)return"url(#"+i.add({tagName:"radialGradient",props:[["cx",r.cx],["cy",r.cy],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",t[0]],["offset",100*t[1]+"%"]]}})})+")"}},{key:"updateStyle",value:function(e,t){var i=this.root,r=this.__style,n=this.__currentStyle,a=this.__cacheStyle;if(i){var o=Kt.REPAINT;for(var s in e)if(e.hasOwnProperty(s)&&(a[s]=void 0,re.STYLE.hasOwnProperty(s))){o=Kt.REFLOW;break}i.addRefreshTask(this.__task={before:function(){var t=Je(e);Ze(r,t),Ze(n,t),i.setRefreshLevel(o)},after:t})}}},{key:"animate",value:function(t,e,i){if(!this.isDestroyed){var r=new He(this,t,e);return this.animationList.push(r),i&&this.root.animateController.add(r),e.hasOwnProperty("autoPlay")&&!e.autoPlay?r:r.play()}}},{key:"removeAnimate",value:function(t){var e;t instanceof He&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"__init",value:function(t,e){g.init(this,t,e)}},{key:"__measure",value:function(t,e,i){ti(this,i,this.currentStyle,this.computedStyle)}},{key:"tagName",get:function(){return this.__tagName}},{key:"innerWidth",get:function(){var t=this.computedStyle,e=t.display,i=t.paddingRight,r=t.paddingLeft;return"none"===e?0:this.width+r+i}},{key:"innerHeight",get:function(){var t=this.computedStyle,e=t.display,i=t.paddingTop,r=t.paddingBottom;return"none"===e?0:this.height+i+r}},{key:"outerWidth",get:function(){var t=this.computedStyle,e=t.display,i=t.borderLeftWidth,r=t.borderRightWidth,n=t.marginRight,a=t.marginLeft;return"none"===e?0:this.innerWidth+i+r+a+n}},{key:"outerHeight",get:function(){var t=this.computedStyle,e=t.display,i=t.borderTopWidth,r=t.borderBottomWidth,n=t.marginTop,a=t.marginBottom;return"none"===e?0:this.innerHeight+i+r+n+a}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}}]),r}(),hi=function(){function i(t,e){h(this,i),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return u(i,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var i=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==i&&t.__offsetY(i-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.width}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.height)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}}]),i}(),ui={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",textAlign:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,scaleX:1,scaleY:1,skewX:0,skewY:0,rotateZ:0,filter:null},li={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4},ci=[],fi=[];Object.keys(ui).forEach(function(t){fi.push(t);var e=ui[t];ci.push({k:t,v:e})});var di=[],pi=[];Object.keys(li).forEach(function(t){pi.push(t);var e=li[t];di.push({k:t,v:e})});var _i={DOM:ui,GEOM:li,domKey:fi,geomKey:pi,dom:ci,geom:di},yi=be.isNil,vi=be.isString,gi=be.isFunction,mi=be.extend,ki=function(){e(s,Pt);var n=l(s);function s(t,e,i){var r;return h(this,s),r=n.call(this),vi(t)||(i=e,e=t,t=/(?:function|class)\s+([\w$]+)/.exec(r.constructor.toString())[1]),r.__tagName=t,e=e||[],Array.isArray(e)?(r.props=be.arr2hash(e),r.__props=e):(r.props=e,r.__props=be.hash2arr(e)),r.__children=i||[],r.__parent=null,r.__host=null,r.__ref={},r.__state={},r.__isMount=!1,r}return u(s,[{key:"setState",value:function(t,e){var i=this;yi(t)?this.state={}:mi(this.state,t);var r,n=this.root;n?(n.delRefreshTask(this.__task),r=this.shadowRoot,this.__task={before:function(){i.__init(n,i),n.setRefreshLevel(Kt.REFLOW)},after:function(){r instanceof x&&r.__destroy(),gi(e)&&e()}},n.addRefreshTask(this.__task)):gi(e)&&e()}},{key:"__create",value:function(){for(var t,e,i,a=this,o=this.render();o instanceof s;)o=o.render();return o instanceof x?(t=wt.normalize(this.props.style||{}),e=Object.keys(t),mi(o.style,t,e),mi(o.currentStyle,t,e),this.__props.forEach(function(t){var e,i=me(t,2),r=i[0],n=i[1];/^on[a-zA-Z]/.test(r)?(r=r.slice(2).toLowerCase(),-1===(e=o.listener[r]=o.listener[r]||[]).indexOf(n)&&e.push(n)):/^on-[a-zA-Z\d_$]/.test(r)&&(r=r.slice(3),a.on(r,function(){n.apply(void 0,arguments)}))})):(i="",yi(o)||(i=be.encodeHtml(o.toString())),o=new Tt(i)),this.__shadowRoot=o}},{key:"__init",value:function(t,e){g.init(this,t,e);var i=this.__create();i instanceof Tt?(i.__parent=this.parent,i.__host=e):i.__init(t,this)}},{key:"render",value:function(){}},{key:"__destroy",value:function(){var t=this.componentWillUnmount;gi(t)&&(t.call(this),this.__isMount=!1),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.children.splice(0),this.__shadowRoot=null,this.__parent=null}},{key:"__emitEvent",value:function(t){var e=this.shadowRoot;if(!(e instanceof Tt))return e.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"__measure",value:function(t,e){var i,r=this,n=this.root;this.__isMount||(this.__isMount=!0,i=this.componentDidMount,gi(i)&&n.once(Pt.REFRESH,function(){i.call(r)}));var a=this.shadowRoot;a instanceof Tt?a.__measure(t,e):a.__measure(t,e,!0)}},{key:"tagName",get:function(){return this.__tagName}},{key:"children",get:function(){return this.__children}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"parent",get:function(){return this.__parent}},{key:"ref",get:function(){return this.__ref}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}}]),s}();Object.keys(re.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","style","animating","animationList","animateStyle","currentStyle","computedStyle","animateProps","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth"]).forEach(function(e){Object.defineProperty(ki.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle"].forEach(function(e){ki.prototype[e]=function(){var t=this.shadowRoot;if(t&&gi(t[e]))return t[e].apply(t,arguments)}});var bi=m.AUTO,xi=m.PX,Mi=m.PERCENT,wi=wt.calAbsolute,Si={div:!0,span:!0,img:!0},Ai={span:!0,img:!0};function Ei(t,e){var i=[];return function e(i,r,t,n){if(Array.isArray(t))t.forEach(function(t){e(i,r,t,n)});else if(t instanceof si){if(-1<["canvas","svg"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg");r.push(t),t.__parent=i,n.lastText=null,n.prev&&((n.prev.__next=t).__prev=n.prev),n.prev=t}else{var a;t instanceof ki?(r.push(t),t.__parent=i,n.lastText=null,n.prev&&((n.prev.__next=t).__prev=n.prev),n.prev=t):be.isNil(t)||""===t||(n.lastText?n.lastText.content+=t:(a=n.lastText=new Tt(t),r.push(a),a.__parent=i,n.prev&&((n.prev.__next=a).__prev=n.prev),n.prev=a))}}(t,i,e,{lastText:null,prev:null}),i}var Pi,Ri=function(){e(c,si);var a=l(c);function c(t,e,i){var r;h(this,c),(r=a.call(this,t,e)).__lineGroups=[];var n=s(r).style;return n.display&&{flex:!0,block:!0,inline:!0,none:!0}.hasOwnProperty(n.display)||(Ai.hasOwnProperty(r.tagName)?n.display="inline":n.display="block"),r.__style=wt.normalize(n,_i.dom),r.__currentStyle=be.extend({},r.__style),r.__children=i||[],r}return u(c,[{key:"__tryLayInline",value:function(t,e){var i=this.flowChildren,r=this.currentStyle.width;if(r.unit===xi)return t-r.value;if(r.unit===Mi)return t-e*r.value*.01;for(var n=0;n<i.length;n++){if(t<0)return t;var a=i[n];t-=a instanceof si||a instanceof ki?a.__tryLayInline(t,e):a.textWidth}return t}},{key:"__offsetX",value:function(e,i){Z(U(c.prototype),"__offsetX",this).call(this,e,i),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,i)})}},{key:"__offsetY",value:function(e,i){Z(U(c.prototype),"__offsetY",this).call(this,e,i),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,i)})}},{key:"__calAutoBasis",value:function(a,o,s,t){var e,i,h=0,u=0,l=0,r=this.flowChildren,n=this.currentStyle,c=this.computedStyle,f=n.width,d=n.height,p=n.marginLeft,_=n.marginTop,y=n.marginRight,v=n.marginBottom,g=n.paddingLeft,m=n.paddingTop,k=n.paddingRight,b=n.paddingBottom,x=c.borderTopWidth,M=c.borderRightWidth,w=c.borderBottomWidth,S=c.borderLeftWidth,A=a?f:d;return A.unit===xi&&(h=l=A.value,t&&(u=h)),r.forEach(function(t){var e,i,r,n;l=t instanceof si||t instanceof ki&&t.shadowRoot instanceof si?(i=(e=t.__calAutoBasis(a,o,s,!0)).b,r=e.min,n=e.max,h=Math.max(h,i),u=Math.max(u,r),Math.max(l,n)):a?(u=Math.max(t.charWidth,u),Math.max(t.textWidth,l)):(t.__layout({x:0,y:0,w:o,h:s},!0),u=Math.max(u,t.height),Math.max(l,t.height))}),a?(e=M+S+(this.__calMp(p,o)+this.__calMp(y,o)+this.__calMp(g,o)+this.__calMp(k,o)),h+=e,l+=e,u+=e):(i=x+w+(this.__calMp(_,o)+this.__calMp(v,o)+this.__calMp(m,o)+this.__calMp(b,o)),h+=i,l+=i,u+=i),{b:h,min:u,max:l}}},{key:"__calMp",value:function(t,e){var i=0;return t.unit===xi?i+=t.value:t.unit===Mi&&(t.value*=.01*e,t.unit=xi,i+=t.value),i}},{key:"__layoutBlock",value:function(e,i){var t=this.flowChildren,r=this.currentStyle,n=this.computedStyle,a=this.lineGroups;a.splice(0);var o,s,h,u=n.textAlign,l=this.__preLayout(e),c=l.fixedWidth,f=l.fixedHeight,d=l.x,p=l.y,_=l.w,y=l.h;c&&i?this.__width=_:(s=o=0,h=new hi(d,p),t.forEach(function(t){t instanceof si||t instanceof ki&&t.shadowRoot instanceof si?"inline"===t.currentStyle.display?d===e.x?(h.add(t),t.__layout({x:d,y:p,w:_,h:y},i),d+=t.outerWidth,i&&(o=Math.max(o,s),s=t.outerWidth)):(0<=t.__tryLayInline(_-d+e.x,_)?t.__layout({x:d,y:p,w:_,h:y},i):(a.push(h),i||h.verticalAlign(),d=e.x,p+=h.height,t.__layout({x:e.x,y:p,w:_,h:y},i),h=new hi(d,p),i&&(o=Math.max(o,s),s=0)),d+=t.outerWidth,h.add(t),i&&(s+=t.outerWidth)):(h.size&&(a.push(h),h.verticalAlign(),p+=h.height,h=new hi(e.x,p),i&&(o=Math.max(o,s),s=0)),t.__layout({x:e.x,y:p,w:_,h:y},i),d=e.x,p+=t.outerHeight,i&&(o=Math.max(o,t.outerWidth),s=0)):d===e.x?(h.add(t),t.__layout({x:d,y:p,w:_,h:y},i),d+=t.width,i&&(o=Math.max(o,s),s=t.width)):(0<=t.__tryLayInline(_-d+e.x)?t.__layout({x:d,y:p,w:_,h:y},i):(a.push(h),h.verticalAlign(),d=e.x,p+=h.height,t.__layout({x:e.x,y:p,w:_,h:y},i),h=new hi(d,p),i&&(o=Math.max(o,s),s=0)),d+=t.width,h.add(t),i&&(s+=t.width))}),h.size&&(a.push(h),i?o=Math.max(o,s):h.verticalAlign(),p+=h.height),this.__width=c||!i?_:o,this.__height=f?y:p-e.y,!i&&-1<["center","right"].indexOf(u)&&a.forEach(function(t){var e=_-t.width;0<e&&t.horizonAlign("center"===u?.5*e:e)}),i||this.__marginAuto(r,e))}},{key:"__layoutFlex",value:function(t,l){var e=this.flowChildren,i=this.currentStyle,r=i.flexDirection,n=i.justifyContent,a=i.alignItems,o=this.__preLayout(t),s=o.fixedWidth,S=o.fixedHeight,A=o.x,E=o.y,P=o.w,R=o.h;if(s&&l)this.__width=P;else{var c=0,T="row"===r,L=[],C=[],O=[],W=[],N=0,I=0,D=0,f=0;if(e.forEach(function(t){if(t instanceof si||t instanceof ki&&t.shadowRoot instanceof si){var e=t.__calAutoBasis(!!l||T,P,R),i=e.b,r=e.min,n=e.max;if(l)return void(T?c+=n:c=Math.max(c,n));var a=t.currentStyle,o=t.computedStyle,s=a.flexGrow,h=a.flexShrink,u=a.flexBasis;L.push(s),C.push(h),N+=s,I+=h,u.unit===bi?(O.push(n),D+=n):u.unit===xi?(o.flexBasis=i=u.value,O.push(i),D+=i):u.unit===Mi&&(i=o.flexBasis=(T?P:R)*u.value*.01,O.push(i),D+=i),f+=n,W.push(r)}else{if(l)return void(T?c+=t.textWidth:c=Math.max(c,t.textWidth));L.push(0),C.push(1),I+=1,T?(O.push(t.textWidth),D+=t.textWidth,f+=t.textWidth,W.push(t.charWidth)):(t.__layout({x:0,y:0,w:P,h:R},!0),O.push(t.height),D+=t.height,f+=t.height,W.push(t.height))}}),l)this.__width=Math.min(c,P);else{var B=0,F=(T?P:R)<f;e.forEach(function(t,e){var i,r,n,a,o,s,h,u,l,c,f,d,p,_,y,v,g,m,k,b,x,M=C[e],w=L[e];r=F?(i=D-(T?P:R),M?O[e]-i*M/I:O[e]):(n=(T?P:R)-D,w?O[e]+n*w/N:O[e]),r=Math.max(r,W[e]),t instanceof si||t instanceof ki&&t.shadowRoot instanceof si?(a=t.currentStyle,o=t.computedStyle,s=a.display,h=a.flexDirection,u=a.width,l=a.height,"inline"===s&&(a.display=o.display="block"),T?("flex"===s&&"column"===h&&S&&l.unit===bi&&(l.value=R,l.unit=xi),t.__layout({x:A,y:E,w:r,h:R})):("flex"===s&&"row"===h&&u.unit===bi&&(u.value=P,u.unit=xi),t.__layout({x:A,y:E,w:P,h:r})),(F&&M||!F&&w)&&(c=o.borderTopWidth,f=o.borderRightWidth,d=o.borderBottomWidth,p=o.borderLeftWidth,_=o.marginTop,y=o.marginRight,v=o.marginBottom,g=o.marginLeft,m=o.paddingTop,k=o.paddingRight,b=o.paddingBottom,x=o.paddingLeft,T?t.__width=r-g-y-x-k-p-f:t.__height=r-_-v-m-b-c-d)):t.__layout({x:A,y:E,w:T?r:P,h:T?R:r}),B=T?(A+=t.outerWidth,Math.max(B,t.outerHeight)):(E+=t.outerHeight,Math.max(B,t.outerWidth))});var h=T?P-A+t.x:R-E+t.y;if(!F&&0===N&&0<h){var u=e.length;if("flex-end"===n)for(var d=0;d<u;d++){var p=e[d];T?p.__offsetX(h,!0):p.__offsetY(h,!0)}else if("center"===n)for(var _=.5*h,y=0;y<u;y++){var v=e[y];T?v.__offsetX(_,!0):v.__offsetY(_,!0)}else if("space-between"===n)for(var g=h/(u-1),m=1;m<u;m++){var k=e[m];T?k.__offsetX(g*m,!0):k.__offsetY(g*m,!0)}else if("space-around"===n)for(var b=h/(u+1),x=0;x<u;x++){var M=e[x];T?M.__offsetX(b*(x+1),!0):M.__offsetY(b*(x+1),!0)}}T?(S&&(B=R),E+=B):s&&(B=P),l||("stretch"===a?e.forEach(function(t){var e=t.computedStyle,i=t.currentStyle,r=e.borderTopWidth,n=e.borderRightWidth,a=e.borderBottomWidth,o=e.borderLeftWidth,s=e.marginTop,h=e.marginRight,u=e.marginBottom,l=e.marginLeft,c=e.paddingTop,f=e.paddingRight,d=e.paddingBottom,p=e.paddingLeft;T?i.height.unit===bi&&(t.__height=e.height=B-s-u-c-d-r-a):i.width.unit===bi&&(t.__width=e.width=B-l-h-p-f-n-o)}):"center"===a?e.forEach(function(t){var e=B-t.outerHeight;0<e&&t.__offsetY(.5*e,!0)}):"flex-end"===a&&e.forEach(function(t){var e=B-t.outerHeight;0<e&&t.__offsetY(e,!0)})),this.__width=P,this.__height=S?R:E-t.y,this.__marginAuto(i,t)}}}},{key:"__layoutInline",value:function(e,i){var r=this,t=this.flowChildren,n=this.computedStyle,a=this.lineGroups;a.splice(0);var o,s,h,u=n.textAlign,l=this.__preLayout(e),c=l.fixedWidth,f=l.fixedHeight,d=l.x,p=l.y,_=l.w,y=l.h;c&&i?this.__width=_:(s=o=0,h=new hi(d,p),t.forEach(function(t){t instanceof si||t instanceof ki&&t.shadowRoot instanceof si?("inline"!==t.computedStyle.display&&(t.currentStyle.display=t.computedStyle.display="inline",console.error("Inline can not contain block/flex")),d===e.x?(h.add(t),t.__layout({x:d,y:p,w:_,h:y},i),d+=t.outerWidth,o=Math.max(o,s),s=t.outerWidth):(0<=t.__tryLayInline(_-d+e.x,_)?t.__layout({x:d,y:p,w:_,h:y},i):(a.push(h),h.verticalAlign(),d=e.x,p+=h.height,t.__layout({x:e.x,y:p,w:_,h:y},i),h=new hi(d,p),o=Math.max(o,s),s=0),d+=t.outerWidth,h.add(t),s+=t.outerWidth)):d===e.x?(h.add(t),t.__layout({x:d,y:p,w:_,h:y},i),d+=t.width,o=Math.max(o,s),s=t.width):(0<=t.__tryLayInline(_-d+e.x)?t.__layout({x:d,y:p,w:_,h:y},i):(a.push(h),i||h.verticalAlign(),d=e.x,p+=h.height,t.__layout({x:e.x,y:p,w:_,h:y},i),h=new hi(d,p),o=Math.max(o,s),s=0),d+=t.width,h.add(t),s+=t.width)}),h.size&&(a.push(h),i||h.verticalAlign(),p+=h.height,o=Math.max(o,s)),this.__width=c?_:o,this.__height=f?y:p-e.y,!i&&-1<["center","right"].indexOf(u)&&a.forEach(function(t){var e=r.__width-t.width;0<e&&t.horizonAlign("center"===u?.5*e:e)}))}},{key:"__layoutAbs",value:function(i,r){var S=i.sx,A=i.sy,E=i.innerWidth,P=i.innerHeight,t=i.computedStyle,e=this.isDestroyed,n=this.children,a=this.absChildren,o=t.display,s=t.borderTopWidth,h=t.borderLeftWidth,u=t.marginTop,l=t.marginLeft,R=t.paddingLeft;e||"none"===o||(S+=l+h,A+=u+s,a.forEach(function(t){var e=t.currentStyle,i=t.computedStyle;t.__mp(e,i,E),"inline"===i.display&&(e.display=i.display="block");var r,n,a,o,s,h,u,l,c,f,d,p=e.left,_=e.top,y=e.right,v=e.bottom,g=e.width,m=e.height,k=e.display,b=e.flexDirection;if(p.unit!==bi?(f=!0,i.left=wi(e,"left",p,E)):i.left="auto",y.unit!==bi?(l=!0,i.right=wi(e,"right",y,E)):i.right="auto",_.unit!==bi?(u=!0,i.top=wi(e,"top",_,P)):i.top="auto",v.unit!==bi?(c=!0,i.bottom=wi(e,"bottom",v,P)):i.bottom="auto",f&&l?(r=S+i.left,a=S+E-i.right-r):f&&g.unit!==bi?(r=S+i.left,a=g.unit===xi?g.value:E*g.value*.01):l&&g.unit!==bi?(a=g.unit===xi?g.value:E*g.value*.01,r=S+E-i.right-a,r-=i.marginLeft,r-=i.marginRight,r-=i.paddingLeft,r-=i.paddingRight,r-=i.borderLeftWidth,r-=i.borderRightWidth):f?r=S+i.left:l?(r=S+E-i.right,s=!0):(r=S+R,g.unit!==bi&&(a=g.unit===xi?g.value:E*g.value*.01)),u&&c)n=A+i.top,o=A+P-i.bottom-n;else if(u&&m.unit!==bi)n=A+i.top,o=m.unit===xi?m.value:P*m.value*.01;else if(c&&m.unit!==bi)o=m.unit===xi?m.value:P*m.value*.01,n=A+P-i.bottom-o,n-=i.marginTop,n-=i.marginBottom,n-=i.paddingTop,n-=i.paddingBottom,n-=i.borderTopWidth,n-=i.borderBottomWidth;else if(u)n=A+i.top;else if(c)n=A+P-i.bottom,h=!0;else{n=A;for(var x=t.prev;x;){if(x instanceof Tt||"absolute"!==x.computedStyle.position){n=x.y+x.outerHeight;break}x=x.prev}x||(n=A),m.unit!==bi&&(o=m.unit===xi?m.value:P*m.value*.01)}("block"===k&&void 0===a||"flex"===k&&(void 0===a||"column"===b&&void 0===o))&&(d=!0);var M=s?r-S:E+S-r,w=h?n-A:P+A-n;d&&(t.__layout({x:r,y:n,w:M,h:w},!0,!0),M=t.outerWidth),t.__layout({x:r,y:n,w:M,h:w,w2:a,h2:o},!1,!0),s&&t.__offsetX(-t.outerWidth,!0),h&&t.__offsetY(-t.outerHeight,!0)}),n.forEach(function(t){var e;t instanceof c?t.__layoutAbs(-1<["absolute","relative"].indexOf(t.computedStyle.position)?t:i,r):t instanceof ki&&((e=t.shadowRoot)instanceof c&&e.__layoutAbs(e,r))}))}},{key:"render",value:function(e,i,r){Z(U(c.prototype),"render",this).call(this,e,i,r),e===xe.SVG&&(this.virtualDom.type="dom");var t,n=this.isDestroyed,a=this.computedStyle.display,o=this.children;!n&&"none"!==a&&o.length&&(o.forEach(function(t){t.isMask&&t.__renderAsMask(e,i,r)}),(t=this.zIndexChildren).forEach(function(t){t.__renderByMask(e,i,r)}),e===xe.SVG&&(this.virtualDom.children=t.map(function(t){return t.virtualDom})))}},{key:"__init",value:function(e,i){Z(U(c.prototype),"__init",this).call(this,e,i),(this.__children=Ei(this,this.children)).forEach(function(t){(t instanceof si||t instanceof ki)&&t.__init(e,i)})}},{key:"__measure",value:function(e,i,t){Z(U(c.prototype),"__measure",this).call(this,e,i,t),this.children.forEach(function(t){t.__measure(e,i)})}},{key:"__destroy",value:function(){this.children.forEach(function(t){t.__destroy()}),Z(U(c.prototype),"__destroy",this).call(this),this.children.splice(0),this.lineGroups.splice(0)}},{key:"__emitEvent",value:function(e,t){if(t)return Z(U(c.prototype),"__emitEvent",this).call(this,e,t);var i=this.isDestroyed,r=this.computedStyle;if(!i&&"none"!==r.display&&!e.__stopPropagation){var n,a=e.event.type,o=this.listener,s=this.zIndexChildren;o.hasOwnProperty(a)&&(n=o[a]);for(var h=s.length-1;0<=h;h--){var u=s[h];if((u instanceof si||u instanceof ki&&u.shadowRoot instanceof si)&&u.__emitEvent(e)){if(e.__stopPropagation)return;return n&&n.forEach(function(t){be.isFunction(t)&&!e.__stopImmediatePropagation&&t(e)}),!0}}return Z(U(c.prototype),"__emitEvent",this).call(this,e)}}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return t instanceof ki&&(t=t.shadowRoot),t instanceof Tt||t.computedStyle&&"absolute"!==t.computedStyle.position})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return t instanceof ki&&(t=t.shadowRoot),t instanceof si&&t.computedStyle&&"absolute"===t.computedStyle.position})}},{key:"zIndexChildren",get:function(){var n,a=[],o=[],s=!1;return this.children.forEach(function(t,e){var i,r=t;t instanceof ki&&(t=t.shadowRoot),!t.isMask&&t.computedStyle&&(t instanceof si&&-1<["relative","absolute"].indexOf(t.computedStyle.position)?(r.__iIndex=e,i=r.__zIndex=t.currentStyle.zIndex,o.push(r),void 0===n?n=i:s||(i<n&&(s=!0),n=i)):a.push(r))}),s&&o.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__iIndex-e.__iIndex}),a.concat(o)}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.y}}],[{key:"isValid",value:function(t){return Si.hasOwnProperty(t)}}]),c}(),Ti=m.AUTO,Li=ze.genCanvasPolygon,Ci=ze.genSvgPolygon,Oi=function(){e($,Ri);var a=l($);function $(t,e){var i;h(this,$);var r=(i=a.call(this,t,e)).props.src,n=i.__loadImg={cb:function(){}};return r||(n.error=!0),i}return u($,[{key:"__preLayout",value:function(t){var e,i,r=Z(U($.prototype),"__preLayout",this).call(this,t),n=this.__loadImg;return n.error||(e=this.props.src,(i=Ee.IMG[e])&&i.state===Ee.LOADED&&(n.url=e,n.source=i.source,n.width=i.width,n.height=i.height)),r.fixedWidth&&r.fixedHeight||(n.error?r.fixedWidth?r.h=r.w:r.fixedHeight?r.w=r.h:r.w=r.h=32:n.source?r.fixedWidth?r.h=r.w*n.height/n.width:r.fixedHeight?r.w=r.h*n.width/n.height:(r.w=n.width,r.h=n.height):r.w=r.h=0,r.fixedWidth=!0,r.fixedHeight=!0),r}},{key:"__addGeom",value:function(t,e){e=be.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),Z(U($.prototype),"__destroy",this).call(this)}},{key:"render",value:function(t,e,i){var a=this;Z(U($.prototype),"render",this).call(this,t,e,i);var r=this.sx,n=this.sy,o=this.width,s=this.height,h=this.isDestroyed,u=this.props.src,l=this.computedStyle,c=l.display,f=l.borderTopWidth,d=l.borderRightWidth,p=l.borderBottomWidth,_=l.borderLeftWidth,y=l.marginTop,v=l.marginLeft,g=l.paddingTop,m=l.paddingLeft,k=l.borderTopLeftRadius,b=l.borderTopRightRadius,x=l.borderBottomRightRadius,M=l.borderBottomLeftRadius,w=l.visibility;if(!h&&"none"!==c&&"hidden"!==w){var S,A,E,P,R,T,L,C=r+v+_+m,O=n+y+f+g,W=this.__loadImg;if(W.error){var N=.02*Math.min(o,s),I="#DDD",D=C+.7*o,B=O+.3*s,F=5*N,H=[[C+.15*o,O+.7*s],[C+.3*o,O+.4*s],[C+.5*o,O+.6*s],[C+.6*o,O+.5*s],[C+.9*o,O+.8*s],[C+.15*o,O+.8*s]];if(t===xe.CANVAS){e.strokeStyle="#CCC",e.lineWidth=N,e.fillStyle=I,e.beginPath(),e.moveTo(C,O),e.lineTo(C+o,O),e.lineTo(C+o,O+s),e.lineTo(C,O+s),e.lineTo(C,O),e.stroke(),e.closePath(),e.beginPath(),e.arc(D,B,F,0,2*Math.PI),e.fill(),e.closePath(),e.beginPath(),e.moveTo(H[0][0],H[0][1]);for(var z=1,G=H.length;z<G;z++){var X=H[z];e.lineTo(X[0],X[1])}e.lineTo(H[0][0],H[0][1]),e.fill(),e.closePath()}else if(t===xe.SVG){this.__addGeom("rect",[["x",C],["y",O],["width",o],["height",s],["stroke","#CCC"],["stroke-width",N],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",D],["cy",B],["r",F],["fill",I]]);for(var j="",Y=0,V=H.length;Y<V;Y++){var q=H[Y];Y&&(j+=" "),j+=q[0]+","+q[1]}this.__addGeom("polygon",[["points",j],["fill",I]])}}else{W.url===u?(S=W.source)&&(A=Se.calRadius(C,O,o,s,f,d,p,_,k,b,x,M),t===xe.CANVAS?A?(e.save(),Li(e,A,"clip"),e.drawImage(S,C,O,o,s),e.restore()):e.drawImage(S,C,O,o,s):t===xe.SVG&&(o===W.width&&s===W.height||(E=Ae.matrixResize(W.width,W.height,o,s,C,O,o,s)),P=[["xlink:href",u],["x",C],["y",O],["width",W.width],["height",W.height]],A&&(R=Ci(A),T=i.add({tagName:"mask",props:[],children:[{type:"item",tagName:"path",props:[["d",R],["fill","#FFF"]]}]}),this.virtualDom.conMask="url(#"+T+")"),E&&!be.equalArr(E,[1,0,0,1,0,0])&&P.push(["transform","matrix("+be.joinArr(E,",")+")"]),this.virtualDom.children.push({type:"img",tagName:"image",props:P}))):((L=this.__loadImg).url=u,L.source=null,L.error=null,Ee.measureImg(u,function(t){var e,i,r,n;t.url!==L.url||a.__isDestroyed||(t.success?(L.source=t.source,L.width=t.width,L.height=t.height):L.error=!0,e=a.root,r=(i=a.currentStyle).width,n=i.height,e.delRefreshTask(L.cb),e.delRefreshTask(a.__task),r.unit!==Ti&&n.unit!==Ti?e.addRefreshTask(L.cb):e.addRefreshTask(a.__task={before:function(){e.setRefreshLevel(Kt.REFLOW)}}))},{width:o,height:s}))}}}},{key:"baseLine",get:function(){return this.height}}]),$}(),Wi=be.joinVd,Ni=be.joinDef;function Ii(t,e,i){var r=t.childNodes;!function(t,e,i){for(var r=e.length,n=i.length,a=0,o=t.childNodes;a<Math.min(r,n);a++)!function(e,t,i){if(t.tagName!==i.tagName)qi(e,"beforebegin",Ni(i)),e.parentNode.removeChild(e);else{t.uuid!==i.uuid&&e.setAttribute("id",i.uuid);for(var r={},n=0,a=t.props.length;n<a;n++){var o=me(t.props[n],2),s=o[0],h=o[1];r[s]=h}for(var u=0,l=i.props.length;u<l;u++){var c=me(i.props[u],2),f=c[0],d=c[1];r.hasOwnProperty(f)?(r[f]!==d&&e.setAttribute(f,d),delete r[f]):e.setAttribute(f,d)}Object.keys(r).forEach(function(t){e.removeAttribute(t)});for(var p=e.childNodes,_=t.children.length,y=i.children.length,v=0;v<Math.min(_,y);v++)Gi(e,v,t.children[v],i.children[v]);if(v<_)for(var g=_-1;v<=g;g--)Vi(e,p,g);else if(v<y)for(;v<y;v++)Yi(e,p,v,Wi(i.children[v]))}}(o[a],e[a],i[a]);if(a<r)for(var s=r-1;a<=s;s--)Vi(t,o,s);else if(a<n)for(;a<n;a++)Yi(t,o,a,Ni(i[a]))}(r[0],e.defs,i.defs),zi(r[1],e.bb,i.bb,e.bbMask,i.bbMask),Fi(t,e,i,!0)}function Di(t,e,i){"dom"===e.type?"dom"===i.type?Fi(t,e,i):"geom"===i.type?Hi(t,e,i):ji(t,i):"text"===e.type?"text"===i.type?function(t,e,i){for(var r=e.children.length,n=i.children.length,a=0;a<Math.min(r,n);a++)Gi(t,a,e.children[a],i.children[a],!0);var o=t.childNodes;if(a<r)for(var s=r-1;a<=s;s--)Vi(t,o,s);else if(a<n)for(;a<n;a++)Yi(t,o,a,Wi(i.children[a]))}(t,e,i):ji(t,i):"geom"===e.type?"dom"===i.type?Hi(t,e,i):"geom"===i.type?function(t,e,i){Bi(t,e,i),zi(t.firstChild,e.bb,i.bb,e.bbMask,i.bbMask);for(var r=e.children.length,n=i.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(r,n);a++)Gi(o,a,e.children[a],i.children[a]);if(a<r)for(var h=r-1;a<=h;h--)Vi(o,s,h);else if(a<n)for(;a<n;a++)Yi(o,s,a,Wi(i.children[a]))}(t,e,i):ji(t,i):"img"===e.type&&("img"===i.type?Xi(t,e,i):ji(t,i))}function Bi(t,e,i){var r=i.transform,n=i.opacity,a=i.mask,o=i.filter,s=i.conMask;e.transform!==r&&(r?t.setAttribute("transform",r):t.removeAttribute("transform")),e.opacity!==n&&(1!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.mask!==a&&(a?t.setAttribute("mask",a):t.removeAttribute("mask")),e.filter!==o&&(o?t.setAttribute("filter",o):t.removeAttribute("filter")),e.conMask!==s&&(s?t.childNodes[1].setAttribute("mask",s):t.childNodes[1].removeAttribute("mask"))}function Fi(t,e,i,r){Bi(t,e,i),r||zi(t.firstChild,e.bb,i.bb,e.bbMask,i.bbMask);for(var n=e.children.length,a=i.children.length,o=0,s=t.lastChild,h=s.childNodes;o<Math.min(n,a);o++)Di(h[o],e.children[o],i.children[o]);if(o<n)for(var u=n-1;o<=u;u--)Vi(s,h,u);else if(o<a)for(;o<a;o++)Yi(s,h,o,Wi(i.children[o]))}function Hi(t,e,i){Bi(t,e,i),zi(t.firstChild,e.bb,i.bb,e.bbMask,i.bbMask);for(var r=e.children.length,n=i.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(r,n);a++)ji(s[a],i.children[a]);if(a<r)for(var h=r-1;a<=h;h--)Vi(o,s,h);else if(a<n)for(;a<n;a++)Yi(o,s,a,Wi(i.children[a]))}function zi(t,e,i,r,n){var a=e.length,o=i.length;r!==n&&(n?t.setAttribute("mask",n):t.removeAttribute("mask"));for(var s=0;s<Math.min(a,o);s++)Gi(t,s,e[s],i[s]);var h=t.childNodes;if(s<a)for(var u=a-1;s<=u;u--)Vi(t,h,u);else if(s<o)for(;s<o;s++)Yi(t,h,s,Wi(i[s]))}function Gi(t,e,i,r,n){var a=t.childNodes;i.tagName!==r.tagName?ji(a[e],r):(Xi(a[e],i,r),n&&i.content!==r.content&&(a[e].innerHTML=r.content))}function Xi(e,t,i){for(var r={},n=0,a=t.props.length;n<a;n++){var o=me(t.props[n],2),s=o[0],h=o[1];r[s]=h}for(var u=0,l=i.props.length;u<l;u++){var c=me(i.props[u],2),f=c[0],d=c[1];r.hasOwnProperty(f)?(r[f]!==d&&e.setAttribute(f,d),delete r[f]):e.setAttribute(f,d)}Object.keys(r).forEach(function(t){e.removeAttribute(t)})}function ji(t,e){var i;Array.isArray(e)?(i="",e.forEach(function(t){i+=Wi(t)})):i=Wi(e),qi(t,"beforebegin",i),t.parentNode.removeChild(t)}function Yi(t,e,i,r){i>=e.length?qi(t,"beforeend",r):qi(e[i],"beforebegin",r)}function Vi(t,e,i){e[i]&&t.removeChild(e[i])}function qi(t,e,i){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,i);else switch(e){case"beforeend":t.innerHTML+=i;break;case"beforebegin":(Pi=Pi||document.createElement("svg")).innerHTML=i,t.parentNode.insertBefore(Pi.childNodes[0],t)}}var $i=function(){function e(t){h(this,e),this.id=t,this.count=0,this.list=[]}return u(e,[{key:"add",value:function(t){return t.uuid="karas-defs-"+this.id+"-"+this.count++,this.list.push(t),t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),Ui=be.isNil,Zi=be.isFunction,Qi=["playbackRate","iterations","fps","spfLimit","delay","endDelay","duration","direction","fill","playCount","currentTime","easing"];function Ji(s,h){Qi.forEach(function(t){var e,i,r,n,a,o;s.hasOwnProperty(t)&&(e=h,i=s[t],r=t,n=s.vars,Ui(i)||((a=e["var-"+r])&&(o=a.id)&&n[o]||(e[r]=i)))})}var Ki=function(){function t(){h(this,t),this.__records=[],this.__list=[]}return u(t,[{key:"__op",value:function(i){this.records.forEach(function(t){var e=t.animate;Array.isArray(e)?e.forEach(function(t){Ji(i,t.options)}):Ji(i,e.options)})}},{key:"add",value:function(t){-1===this.__list.indexOf(t)&&this.list.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);-1<e&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__list=[]}},{key:"__action",value:function(e,i){this.list.forEach(function(t){t[e].apply(t,i)})}},{key:"init",value:function(){var o=this,t=this.records;t.length&&t.splice(0).forEach(function(t){var e,i,r,n=t.target,a=t.animate;Array.isArray(a)?a.forEach(function(t){var e=t.value,i=t.options;i.autoPlay=!1;var r=n.animate(e,i);o.add(r)}):(e=a.value,(i=a.options).autoPlay=!1,r=n.animate(e,i),o.add(r))})}},{key:"play",value:function(e){this.init();var i=!0;this.__action("play",[e&&function(t){i&&(i=!1,Zi(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var i=!0;this.__action("resume",[e&&function(t){i&&(i=!1,Zi(e)&&e(t))}])}},{key:"cancel",value:function(e){var i=!0;this.__action("cancel",[e&&function(t){i&&(i=!1,Zi(e)&&e(t))}])}},{key:"finish",value:function(e){var i=!0;this.__action("finish",[e&&function(t){i&&(i=!1,Zi(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,i){this.init();var r=!0;this.__action("gotoAndStop",[t,e,i&&function(t){r&&(r=!1,Zi(i)&&i(t))}])}},{key:"gotoAndPlay",value:function(t,e,i){this.init();var r=!0;this.__action("gotoAndPlay",[t,e,i&&function(t){r&&(r=!1,Zi(i)&&i(t))}])}},{key:"__set",value:function(e,i){this.list.forEach(function(t){t[e]=i})}},{key:"records",get:function(){return this.__records}},{key:"list",get:function(){return this.__list}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),tr=be.isNil,er=be.isObject,ir=be.isFunction,rr=m.PX;var nr=0,ar=function(){e(a,Ri);var n=l(a);function a(t,e,i){var r;return h(this,a),(r=n.call(this,t,e,i)).__node=null,r.__mw=0,r.__mh=0,r.__sx=1,r.__sy=1,r.__task=[],r.__ref={},r.__animateController=new Ki,r.__init(s(r),s(r)),Pt.mix(s(r)),r}return u(a,[{key:"__initProps",value:function(){var t,e=this.props.width;tr(e)||0<(t=parseFloat(e)||0)&&(this.__width=t);var i,r=this.props.height;tr(r)||0<(i=parseFloat(r)||0)&&(this.__height=i)}},{key:"__genHtml",value:function(){for(var t,e,i,r="<".concat(this.tagName),n=0,a=this.__props.length;n<a;n++){var o=me(this.__props[n],2),s=o[0],h=o[1];/^on[a-zA-Z]/.test(s)||(r+=(t=s,e=h,i=Array.isArray(e)?be.joinSourceArray(e):be.stringify(e),"className"===t&&(t="class")," "+t+'="'+be.encodeHtml(i,!0)+'"'))}return r+="></".concat(this.tagName,">")}},{key:"__wrapEvent",value:function(t){var e,i,r,n,a,o,s,h,u,l,c;return-1===["touchend","touchcancel"].indexOf(t.type)&&(e=this.node,i=this.__sx,r=this.__sy,a=(n=e.getBoundingClientRect()).x,o=n.y,s=n.left,h=n.top,u=a||s||0,l=o||h||0,u=(c=t.touches?t.touches[0]:t).pageX-u,l=c.pageY-l,1!==i&&(u/=i),1!==r&&(l/=r)),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:u,y:l,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e),e}}},{key:"appendTo",value:function(t){var e,r;t=function(t){if(be.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("can not find dom of selector: "+t);return e}if(!t)throw new Error("can not find dom: "+t);return t}(t),this.__initProps(),this.__refreshLevel=Kt.REFLOW,t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__node=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__node=t.querySelector(this.tagName),this.__node||(t.innerHTML=this.__genHtml(),this.__node=t.querySelector(this.tagName))),this.__uuid=tr(this.__node.__uuid)?nr++:this.__node.__uuid,this.__defs=this.node.__defs||$i.getInstance(this.__uuid),this.width&&this.height||(e=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(e.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(e.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__node.getContext("2d"),this.__renderMode=xe.CANVAS):"svg"===this.tagName&&(this.__renderMode=xe.SVG),this.refresh(),this.node.__root?this.node.__root.destroy():(r=this.node,["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(i){r.addEventListener(i,function(t){var e=r.__root;-1<["touchend","touchcancel","touchmove"].indexOf(i)?e.__touchstartTarget.__emitEvent(e.__wrapEvent(t),!0):e.__cb(t)})}),this.node.__uuid=this.__uuid),this.node.__root=this}},{key:"refresh",value:function(e){var i,r=this,t=this.isDestroyed,n=this.renderMode,a=this.ctx,o=this.defs,s=this.style,h=this.currentStyle,u=this.computedStyle;t||(o.clear(),-1===["flex","block"].indexOf(s.display)&&(u.display=h.display=s.display="block"),"absolute"===s.position&&(u.position=h.positoin=s.position="static"),h.width=s.width={value:this.width,unit:rr},h.height=s.height={value:this.height,unit:rr},i=this.__refreshLevel,this.__refreshLevel=Kt.REPAINT,i===Kt.REFLOW&&this.__measure(n,a,!0),Ee.measureText(function(){var t;i===Kt.REFLOW&&(r.__layout({x:0,y:0,w:r.width,h:r.height}),r.__layoutAbs(r,{x:0,y:0,w:r.width,h:r.height})),n===xe.CANVAS&&r.__clear(),r.render(n,a,o),n===xe.SVG&&((t=r.virtualDom).defs=o.value,r.node.__root?Ii(r.node,r.node.__vd,t):r.node.innerHTML=be.joinVirtualDom(t),r.node.__vd=t,r.node.__defs=o),ir(e)&&e(),r.emit(Pt.REFRESH,i)}))}},{key:"destroy",value:function(){this.__destroy(),zt.offFrame(this.__rTask);var t=this.node;t&&(t.__root=null)}},{key:"scale",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:1,r=1<arguments.length&&void 0!==e?e:i;this.__sx=i,this.__sy=r}},{key:"addRefreshTask",value:function(t){var n,a,o=this;t&&((n=this.task).length||zt.nextFrame(this.__rTask={before:function(e){var t,i,r;(a=n.splice(0)).length&&(a.forEach(function(t){er(t)&&ir(t.before)&&t.before(e)}),o.refresh(),!(t=o.__hookTask)||-1<(r=(i=zt.__hookTask).indexOf(t))&&i.splice(r,1))},after:function(e){a.forEach(function(t){er(t)&&ir(t.after)?t.after(e):ir(t)&&t(e)})}}),-1===n.indexOf(t)&&n.push(t))}},{key:"delRefreshTask",value:function(t){if(t){for(var e=this.task,i=0,r=e.length;i<r;i++)if(e[i]===t){e.splice(i,1);break}e.length||zt.offFrame(this.__rTask)}}},{key:"setRefreshLevel",value:function(t){t>this.__refreshLevel&&(this.__refreshLevel=t)}},{key:"__frameHook",value:function(){var t=this,e=this.__hookTask=this.__hookTask||function(){t.refresh()};-1===zt.__hookTask.indexOf(e)&&zt.__hookTask.push(e)}},{key:"__clear",value:function(){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),this.__ctx.setTransform(1,0,0,1,0,0),this.__ctx.clearRect(0,0,this.__mw,this.__mh)}},{key:"node",get:function(){return this.__node}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"task",get:function(){return this.__task}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),a}(),or=m.AUTO,sr=m.PX,hr=m.PERCENT,ur=be.clone,lr=be.int2rgba,cr=be.isNil,fr=be.joinArr,dr={},pr=function(){e(o,si);var a=l(o);function o(t,e){var i;h(this,o),(i=a.call(this,t,e)).__isMask=!!i.props.mask;var r=s(i),n=r.style;return r.isMask&&(n.visibility="visible",n.background=null,n.border=null,n.strokeWidth=0,n.stroke=null),i.__style=wt.normalize(i.style,_i.dom.concat(_i.geom)),i.__currentStyle=be.extend({},i.__style),i.__currentProps=be.clone(i.props),i.__cacheProps={},i}return u(o,[{key:"__tryLayInline",value:function(t,e){var i=this.currentStyle.width;return i.unit===sr?t-i.value:i.unit===hr?t-e*i.value*.01:t}},{key:"__calAutoBasis",value:function(t){var e,i,r=0,n=0,a=0,o=this.currentStyle,s=this.computedStyle,h=o.width,u=o.height,l=s.borderTopWidth,c=s.borderRightWidth,f=s.borderBottomWidth,d=s.borderLeftWidth,p=t?h:u;return p.unit!==or&&(r=a+=p.value),t?(r+=e=c+d,a+=e,n+=e):(r+=i=l+f,a+=i,n+=i),{b:r,min:n,max:a}}},{key:"__layoutBlock",value:function(t,e){var i=this.__preLayout(t),r=i.fixedWidth,n=i.fixedHeight,a=i.w,o=i.h;this.__height=n?o:0,e?this.__width=r?a:0:(this.__width=a,this.__marginAuto(this.currentStyle,t))}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),i=e.fixedWidth,r=e.fixedHeight,n=e.x,a=e.y,o=e.w,s=e.h;this.__width=i?o:n-t.x,this.__height=r?s:a-t.y}},{key:"__preRender",value:function(t,e,i){var r,n,a,o,s=this.sx,h=this.sy,u=this.width,l=this.height,c=this.__cacheStyle,f=this.currentStyle,d=this.computedStyle,p=d.borderTopWidth,_=d.borderLeftWidth,y=d.display,v=d.marginTop,g=d.marginLeft,m=d.paddingTop,k=d.paddingRight,b=d.paddingBottom,x=d.paddingLeft,M=d.visibility,w=s+_+g+x,S=h+p+v+m,A=w+.5*u,E=S+.5*l,P=u+x+k,R=l+m+b;void 0===c.stroke&&(r=f.stroke,!(d.stroke=r)||"linear"!==r.k&&"radial"!==r.k?c.stroke=lr(f.stroke):c.stroke=this.__gradient(t,e,i,w,S,w+u,S+l,P,R,r)),void 0===c.fill&&(n=f.fill,!(d.fill=n)||"linear"!==n.k&&"radial"!==n.k?c.fill=lr(f.fill):c.fill=this.__gradient(t,e,i,w,S,w+u,S+l,P,R,n)),void 0===c.strokeWidth&&(c.strokeWidth=!0,(a=f.strokeWidth).unit===sr?d.strokeWidth=a.value:a.unit===hr?d.strokeWidth=a.value*u*.01:d.strokeWidth=0),void 0===c.strokeWidth&&(c.strokeWidth=!0,(o=f.strokeWidth).unit===sr?d.strokeWidth=o.value:o.unit===hr?d.strokeWidth=o.value*u*.01:d.strokeWidth=0),void 0===c.strokeDasharray&&(c.strokeDasharray=!0,d.strokeDasharray=f.strokeDasharray,c.strokeDasharrayStr=be.joinArr(f.strokeDasharray,",")),["strokeLinecap","strokeLinejoin","strokeMiterlimit"].forEach(function(t){d[t]=f[t]});var T=c.fill,L=c.stroke,C=c.strokeDasharrayStr,O=d.strokeWidth,W=d.strokeLinecap,N=d.strokeLinejoin,I=d.strokeMiterlimit,D=d.strokeDasharray;return t===xe.CANVAS&&(e.fillStyle!==T&&(e.fillStyle=T),e.strokeStyle!==L&&(e.strokeStyle=L),e.lineWidth!==O&&(e.lineWidth=O),e.lineCap!==W&&(e.lineCap=W),e.lineJoin!==N&&(e.lineJoin=N),e.miterLimit!==I&&(e.miterLimit=I),be.equalArr(e.getLineDash(),D)||e.setLineDash(D)),{x:s,y:h,originX:w,originY:S,cx:A,cy:E,display:y,stroke:L,strokeWidth:O,strokeDasharray:D,strokeDasharrayStr:C,strokeLinecap:W,strokeLinejoin:N,strokeMiterlimit:I,fill:T,visibility:M}}},{key:"render",value:function(t,e,i){Z(U(o.prototype),"render",this).call(this,t,e,i),t===xe.SVG&&(this.virtualDom.type="geom");var r=this.isDestroyed,n=this.computedStyle.display;return r||"none"===n?{isDestroyed:r,display:n}:this.__preRender(t,e,i)}},{key:"__renderAsMask",value:function(t,e,i){if(t===xe.SVG){this.render(t,e,i);var r=this.virtualDom;r.isMask=!0;var n=ur(r.children),P=this.matrixEvent;n.forEach(function(t){var e,i,r=0,n=1,a=t.props;if("rect"===t.tagName){for(var o=0,s=a.length;o<s;o++){var h=me(a[o],2),u=h[0],l=h[1];"x"===u?(r=o,e=l):"y"===u&&(n=o,i=l)}var c=Me.calPoint([e,i],P);a[r][1]=c[0],a[n][1]=c[1]}else if("circle"===t.tagName||"ellipse"===t.tagName){for(var f=0,d=a.length;f<d;f++){var p=me(a[f],2),_=p[0],y=p[1];"cx"===_?(r=f,e=y):"cy"===_&&(n=f,i=y)}var v=Me.calPoint([e,i],P);a[r][1]=v[0],a[n][1]=v[1]}else if("polyline"===t.tagName)for(var g=0,m=a.length;g<m;g++){var k=me(a[g],2),b=k[0],x=k[1];if("points"===b){a[g][1]=x.replace(/([\d.]+),([\d.]+)/g,function(t,e,i){return fr(Me.calPoint([e,i],P),",")});break}}else if("path"===t.tagName)for(var M=0,w=a.length;M<w;M++){var S=me(a[M],2),A=S[0],E=S[1];if("d"===A){a[M][1]=E.replace(/([\d.]+),([\d.]+)/g,function(t,e,i){return fr(Me.calPoint([e,i],P),",")});break}}});var a=this.prev;if(a&&a.isMask){var o=i.value;return(o=o[o.length-1]).children=o.children.concat(n),void(this.__maskId=a.maskId)}var s=i.add({tagName:"mask",props:[],children:n});this.__maskId="url(#"+s+")"}}},{key:"addGeom",value:function(t,e){e=be.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return cr(e)?this["__"+t]:e}},{key:"baseLine",get:function(){return this.__height}},{key:"isMask",get:function(){return this.__isMask}},{key:"maskId",get:function(){return this.__maskId}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"getRegister",value:function(t){if(!dr.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return dr[t]}},{key:"register",value:function(t,e){if(o.hasRegister(t))throw new Error("Geom has already register: ".concat(t));dr[t]=e}},{key:"hasRegister",value:function(t){return dr.hasOwnProperty(t)}}]),o}(),_r=function(){e(L,pr);var r=l(L);function L(t,e){var i;return h(this,L),(i=r.call(this,t,e)).__x1=i.__y1=0,i.__x2=i.__y2=1,i.__controlA=[],i.__controlB=[],void 0!==i.props.x1&&(i.__x1=parseFloat(i.props.x1)||0),void 0!==i.props.y1&&(i.__y1=parseFloat(i.props.y1)||0),void 0!==i.props.x2&&(i.__x2=parseFloat(i.props.x2)||0),void 0!==i.props.y2&&(i.__y2=parseFloat(i.props.y2)||0),Array.isArray(i.props.controlA)&&(i.__controlA=i.props.controlA),Array.isArray(i.props.controlB)&&(i.__controlB=i.props.controlB),i}return u(L,[{key:"render",value:function(t,e,i){var r,n,a,o,s,h,u,l,c,f,d,p,_,y,v,g=Z(U(L.prototype),"render",this).call(this,t,e,i),m=g.isDestroyed,k=g.display,b=g.visibility,x=g.originX,M=g.originY,w=g.stroke,S=g.strokeWidth,A=g.strokeDasharray,E=g.strokeDasharrayStr,P=g.strokeLinecap,R=g.strokeLinejoin,T=g.strokeMiterlimit;m||"none"===k||"hidden"===b||(r=this.width,n=this.height,a=this.x1,o=this.y1,s=this.x2,h=this.y2,u=this.controlA,l=this.controlB,void 0===(c=this.__cacheProps).x1&&(a=x+a*r),void 0===c.x2&&(s=x+s*r),void 0===c.y1&&(o=M+o*n),void 0===c.y2&&(h=M+h*n),void 0===c.controlA&&(2===u.length?c.controlA=[x+u[0]*r,M+u[1]*n]:c.controlA=[]),void 0===c.controlB&&(2===l.length?c.controlB=[x+l[0]*r,M+l[1]*n]:c.controlB=[]),f=0,2===c.controlA.length&&(f++,d=c.controlA[0],p=c.controlA[1]),2===c.controlB.length&&(f+=2,_=c.controlB[0],y=c.controlB[1]),t===xe.CANVAS?(e.beginPath(),e.moveTo(a,o),3===f?e.bezierCurveTo(d,p,_,y,s,h):2===f?e.quadraticCurveTo(_,y,s,h):1===f?e.quadraticCurveTo(d,p,s,h):e.lineTo(s,h),0<S&&e.stroke(),e.closePath()):t===xe.SVG&&(v=[["d",3===f?"M"+a+","+o+" C"+d+","+p+" "+_+","+y+" "+s+","+h:2===f?"M"+a+","+o+" Q"+_+","+y+" "+s+","+h:1===f?"M"+a+","+o+" Q"+d+","+p+" "+s+","+h:"M"+a+","+o+" L"+s+","+h],["fill","none"],["stroke",w],["stroke-width",S]],A.length&&v.push(["stroke-dasharray",E]),"butt"!==P&&v.push(["stroke-linecap",P]),"miter"!==R&&v.push(["stroke-linejoin",R]),4!==T&&v.push(["stroke-miterlimit",T]),this.addGeom("path",v)))}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}}]),L}(),yr=function(){e(D,pr);var r=l(D);function D(t,e){var i;return h(this,D),(i=r.call(this,t,e)).__points=[],Array.isArray(i.props.points)&&(i.__points=i.props.points),i.__controls=[],Array.isArray(i.props.controls)&&(i.__controls=i.props.controls),i}return u(D,[{key:"__getPoints",value:function(r,n,a,o,t){return t.map(function(t){for(var e=[],i=0;i<t.length;i++)0===i||2===i?e.push(r+t[i]*a):e.push(n+t[i]*o);return e})}},{key:"render",value:function(t,e,i){var r=Z(U(D.prototype),"render",this).call(this,t,e,i),n=r.isDestroyed,a=r.originX,o=r.originY,s=r.display,h=r.visibility,u=r.fill,l=r.stroke,c=r.strokeWidth,f=r.strokeDasharray,d=r.strokeDasharrayStr,p=r.strokeLinecap,_=r.strokeLinejoin,y=r.strokeMiterlimit;if(!n&&"none"!==s&&"hidden"!==h){var v=this.width,g=this.height,m=this.points,k=this.controls,b=this.__cacheProps;if(void 0===b.points&&(b.points=this.__getPoints(a,o,v,g,m)),void 0===b.controls&&(b.controls=this.__getPoints(a,o,v,g,k)),b.points.length<2)console.error("Points must have at lease 2 item: "+m);else{for(var x=0,M=b.points.length;x<M;x++){var w=b.points[x];if(!Array.isArray(w)||w.length<2)return void console.error("Each Point must have a coords: "+w)}var S=b.points,A=b.controls;if(t===xe.CANVAS){e.beginPath(),e.moveTo(S[0][0],S[0][1]);for(var E=1,P=S.length;E<P;E++){var R=S[E],T=A[E-1];T&&T.length?4===T.length?e.bezierCurveTo(T[0],T[1],T[2],T[3],R[0],R[1]):e.quadraticCurveTo(T[0],T[1],R[0],R[1]):e.lineTo(R[0],R[1])}e.fill(),0<c&&e.stroke(),e.closePath()}else if(t===xe.SVG){for(var L=[["fill",u],["stroke",l],["stroke-width",c]],C="M"+S[0][0]+","+S[0][1],O=1,W=S.length;O<W;O++){var N=S[O],I=A[O-1];I&&I.length?4===I.length?C+="C"+I[0]+","+I[1]+" "+I[2]+","+I[3]+" "+N[0]+","+N[1]:C+="Q"+I[0]+","+I[1]+" "+N[0]+","+N[1]:C+="L"+N[0]+","+N[1]}L.push(["d",C]),f.length&&L.push(["stroke-dasharray",d]),"butt"!==p&&L.push(["stroke-linecap",p]),"miter"!==_&&L.push(["stroke-linejoin",_]),4!==y&&L.push(["stroke-miterlimit",y]),this.addGeom("path",L)}}}}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}}]),D}(),vr=function(){e(s,yr);var i=l(s);function s(t,e){return h(this,s),i.call(this,t,e)}return u(s,[{key:"__getPoints",value:function(t,e,i,r,n,a){var o=Z(U(s.prototype),"__getPoints",this).call(this,t,e,i,r,n,a);return o.push(o[0]),o}}]),s}(),gr=.5*Math.PI;function mr(t,e,i,r){return 0<=(r%=360)&&r<90?[t+Math.sin(r*Math.PI/180)*i,e-Math.cos(r*Math.PI/180)*i]:90<=r&&r<180?[t+Math.cos((r-90)*Math.PI/180)*i,e+Math.sin((r-90)*Math.PI/180)*i]:180<=r&&r<270?[t-Math.cos((270-r)*Math.PI/180)*i,e+Math.sin((270-r)*Math.PI/180)*i]:[t-Math.sin((360-r)*Math.PI/180)*i,e-Math.cos((360-r)*Math.PI/180)*i]}var kr=function(){e(B,pr);var r=l(B);function B(t,e){var i;return h(this,B),(i=r.call(this,t,e)).__begin=0,i.__end=0,i.props.begin&&(i.__begin=parseFloat(i.props.begin),isNaN(i.begin)&&(i.__begin=0)),i.props.end&&(i.__end=parseFloat(i.props.end),isNaN(i.end)&&(i.__end=0)),i.__r=1,i.props.r&&(i.__r=parseFloat(i.props.r),isNaN(i.r)&&(i.__r=1)),i.__edge=!1,void 0!==i.props.edge&&(i.__edge=!!i.props.edge),i.__closure=!1,void 0!==i.props.closure&&(i.__closure=!!i.props.closure),i}return u(B,[{key:"render",value:function(t,e,i){var r,n,a,o,s,h,u,l,c,f,d,p,_,y,v,g,m,k,b,x,M,w=Z(U(B.prototype),"render",this).call(this,t,e,i),S=w.isDestroyed,A=w.cx,E=w.cy,P=w.display,R=w.visibility,T=w.fill,L=w.stroke,C=w.strokeWidth,O=w.strokeDasharray,W=w.strokeDasharrayStr,N=w.strokeLinecap,I=w.strokeLinejoin,D=w.strokeMiterlimit;S||"none"===P||"hidden"===R||(r=this.width,n=this.height,a=this.begin,o=this.end,s=this.r,h=this.edge,u=this.closure,l=this.__cacheProps,a!==o&&(void 0!==l.r&&void 0!==l.begin&&void 0!==l.end||(l.begin=l.end=!0,l.r=s*=.5*Math.min(r,n),f=(c=me(mr(A,E,s,a),2))[0],d=c[1],_=(p=me(mr(A,E,s,o),2))[0],y=p[1],l.x1=f,l.x2=_,l.y1=d,l.y2=y),s=l.r,v=l.x1,g=l.y1,m=l.x2,k=l.y2,b=180<o-a?1:0,t===xe.CANVAS?(e.beginPath(),e.arc(A,E,s,a*Math.PI/180-gr,o*Math.PI/180-gr),h?(b&&u||e.lineTo(A,E),e.lineTo(v,g),0<C&&e.stroke()):(0<C&&e.stroke(),b&&u||e.lineTo(A,E),e.lineTo(v,g)),e.fill(),e.closePath()):t===xe.SVG&&(h?(x=[["d",u?"M"+v+","+g+" A"+s+","+s+" 0 "+b+" 1 "+m+","+k+" z":"M"+A+","+E+" L"+v+","+g+" A"+s+" "+s+" 0 "+b+" 1 "+m+","+k+" z"],["fill",T],["stroke",L],["stroke-width",C]],O.length&&x.push(["stroke-dasharray",W]),"butt"!==N&&x.push(["stroke-linecap",N]),"miter"!==I&&x.push(["stroke-linejoin",I]),4!==D&&x.push(["stroke-miterlimit",D]),this.addGeom("path",x)):(this.addGeom("path",[["d",u?"M"+v+","+g+" A"+s+","+s+" 0 "+b+" 1 "+m+","+k+" z":"M"+A+","+E+" L"+v+","+g+" A"+s+" "+s+" 0 "+b+" 1 "+m+","+k+" z"],["fill",T]]),0<C&&(M=[["d","M"+v+","+g+" A"+s+","+s+" 0 "+b+" 1 "+m+","+k],["fill","rgba(0,0,0,0)"],["stroke",L],["stroke-width",C]],O.length&&M.push(["stroke-dasharray",W]),"butt"!==N&&M.push(["stroke-linecap",N]),"miter"!==I&&M.push(["stroke-linejoin",I]),4!==D&&M.push(["stroke-miterlimit",D]),this.addGeom("path",M))))))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}}]),B}(),br=function(){e(A,pr);var r=l(A);function A(t,e){var i;return h(this,A),(i=r.call(this,t,e)).__rx=0,i.props.rx&&(i.__rx=parseFloat(i.props.rx),isNaN(i.rx)&&(i.__rx=0)),i.__ry=0,i.props.ry&&(i.__ry=parseFloat(i.props.ry),isNaN(i.ry)&&(i.__ry=0)),i}return u(A,[{key:"render",value:function(t,e,i){var r,n,a,o,s,h,u,l,c,f=Z(U(A.prototype),"render",this).call(this,t,e,i),d=f.isDestroyed,p=f.originX,_=f.originY,y=f.display,v=f.visibility,g=f.fill,m=f.stroke,k=f.strokeWidth,b=f.strokeDasharray,x=f.strokeDasharrayStr,M=f.strokeLinecap,w=f.strokeLinejoin,S=f.strokeMiterlimit;d||"none"===y||"hidden"===v||(r=this.width,n=this.height,a=this.rx,o=this.ry,void 0===(s=this.__cacheProps).rx&&(a=Math.min(a,.5),a*=r,(s.rx=a)&&(s.ox=a*X.H)),void 0===s.ry&&(o=Math.min(o,.5),o*=n,(s.ry=o)&&(s.oy=o*X.H)),t===xe.CANVAS?(e.beginPath(),0===s.rx&&0===s.ry?(e.rect(p,_,r,n),e.closePath(),e.fill()):(l=[[p+a,_],[p+r-a,_],[p+r+(h=s.ox)-a,_,p+r,_+o-(u=s.oy),p+r,_+o],[p+r,_+n-o],[p+r,_+n+u-o,p+r+h-a,_+n,p+r-a,_+n],[p+a,_+n],[p+a-h,_+n,p,_+n+u-o,p,_+n-o],[p,_+o],[p,_+o-u,p+a-h,_,p+a,_]],ze.genCanvasPolygon(e,l)),0<k&&e.stroke()):t===xe.SVG&&(c=[["x",p],["y",_],["width",r],["height",n],["fill",g],["stroke",m],["stroke-width",k]],a&&c.push(["rx",a]),o&&c.push(["ry",o]),b.length&&c.push(["stroke-dasharray",x]),"butt"!==M&&c.push(["stroke-linecap",M]),"miter"!==w&&c.push(["stroke-linejoin",w]),4!==S&&c.push(["stroke-miterlimit",S]),this.addGeom("rect",c)))}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}}]),A}(),xr=function(){e(x,pr);var r=l(x);function x(t,e){var i;return h(this,x),(i=r.call(this,t,e)).__r=1,i.props.r&&(i.__r=parseFloat(i.props.r),isNaN(i.r)&&(i.__r=1)),i}return u(x,[{key:"render",value:function(t,e,i){var r,n,a,o,s,h=Z(U(x.prototype),"render",this).call(this,t,e,i),u=h.isDestroyed,l=h.cx,c=h.cy,f=h.display,d=h.visibility,p=h.fill,_=h.stroke,y=h.strokeWidth,v=h.strokeDasharray,g=h.strokeDasharrayStr,m=h.strokeLinecap,k=h.strokeLinejoin,b=h.strokeMiterlimit;u||"none"===f||"hidden"===d||(r=this.width,n=this.height,a=this.r,void 0===(o=this.__cacheProps).r&&(a*=.5*Math.min(r,n),o.r=a),t===xe.CANVAS?(e.beginPath(),e.arc(l,c,o.r,0,2*Math.PI),e.fill(),0<y&&e.stroke(),e.closePath()):t===xe.SVG&&(s=[["cx",l],["cy",c],["r",o.r],["fill",p],["stroke",_],["stroke-width",y]],v.length&&s.push(["stroke-dasharray",g]),"butt"!==m&&s.push(["stroke-linecap",m]),"miter"!==k&&s.push(["stroke-linejoin",k]),4!==b&&s.push(["stroke-miterlimit",b]),this.addGeom("circle",s)))}},{key:"r",get:function(){return this.getProps("r")}}]),x}(),Mr=function(){e(A,pr);var r=l(A);function A(t,e){var i;return h(this,A),(i=r.call(this,t,e)).__rx=1,i.props.rx&&(i.__rx=parseFloat(i.props.rx),isNaN(i.rx)&&(i.__rx=1)),i.__ry=1,i.props.ry&&(i.__ry=parseFloat(i.props.ry),isNaN(i.ry)&&(i.__ry=1)),i}return u(A,[{key:"render",value:function(t,e,i){var r,n,a,o,s,h,u,l,c,f=Z(U(A.prototype),"render",this).call(this,t,e,i),d=f.isDestroyed,p=f.cx,_=f.cy,y=f.display,v=f.visibility,g=f.fill,m=f.stroke,k=f.strokeWidth,b=f.strokeDasharray,x=f.strokeDasharrayStr,M=f.strokeLinecap,w=f.strokeLinejoin,S=f.strokeMiterlimit;d||"none"===y||"hidden"===v||(r=this.width,n=this.height,a=this.rx,o=this.ry,void 0===(s=this.__cacheProps).rx&&(a*=.5*r,(s.rx=a)&&(s.ox=a*X.H)),void 0===s.ry&&(o*=.5*n,(s.ry=o)&&(s.oy=o*X.H)),t===xe.CANVAS?(e.beginPath(),e.ellipse?(e.ellipse(p,_,s.rx,s.ry,0,0,2*Math.PI),e.closePath(),e.fill()):(h=s.ox,l=[[p-a,_],[p-a,_-(u=s.oy),p-h,_-o,p,_-o],[p+h,_-o,p+a,_-u,p+a,_],[p+a,_+u,p+h,_+o,p,_+o],[p-h,_+o,p-a,_+u,p-a,_]],ze.genCanvasPolygon(e,l)),0<k&&e.stroke()):t===xe.SVG&&(c=[["cx",p],["cy",_],["rx",a],["ry",o],["fill",g],["stroke",m],["stroke-width",k]],b.length&&c.push(["stroke-dasharray",x]),"butt"!==M&&c.push(["stroke-linecap",M]),"miter"!==w&&c.push(["stroke-linejoin",w]),4!==S&&c.push(["stroke-miterlimit",S]),this.addGeom("ellipse",c)))}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}}]),A}(),wr={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e"},Sr={os:"offset",e:"easing"},Ar={value:"v",options:"o"},Er={},Pr={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},Rr={};_i.dom.concat(_i.geom).forEach(function(t){var e,i=t.k;wr.hasOwnProperty(i)?Sr[wr[i]]=i:(e=i.charAt(0)+i.replace(/[a-z]/g,"").toLowerCase(),wr[i]=e,Sr[e]=i)}),Object.keys(Ar).forEach(function(t){Er[Ar[t]]=t}),Object.keys(Pr).forEach(function(t){Rr[Pr[t]]=t});var Tr={fullCssProperty:wr,abbrCssProperty:Sr,fullAnimate:Ar,abbrAnimate:Er,fullAnimateOption:Pr,abbrAnimateOption:Rr},Lr=be.isNil,Cr=be.isFunction,Or=be.isPrimitive,Wr=be.clone,Nr=be.extend,Ir=Tr.abbrCssProperty,Dr=Tr.abbrAnimateOption,Br=Tr.abbrAnimate;function Fr(n,a){n&&Object.keys(n).forEach(function(t){var e,i,r;0===t.indexOf("var-")?(e=t.slice(4),a.hasOwnProperty(e)&&(i=a[e],n["var-"+i]=n[t])):a.hasOwnProperty(t)&&(r=a[t],n[r]=n[t],delete n[t])})}function Hr(s,h){s&&h&&Object.keys(s).forEach(function(t){if(0===t.indexOf("var-")){var e=s[t],i=t.slice(4);if(e.id&&h.hasOwnProperty(e.id)){var r=h[e.id];if(Lr(e))return;if(-1<i.indexOf(".")){for(var n=i.split("."),a=n.length,o=0;o<a-1;o++)i=n[o],s[i]?s=s[i]:console.error("parseJson vars is not exist: "+e.id+", "+t+", "+n.slice(0,o).join("."));i=n[a-1]}Cr(r)&&(r=r(e)),s[i]=r}}})}function zr(e,i){e.tagName=i.tagName,e.props=Wr(i.props),e.children=i.children,Object.keys(i).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=i[t])}),e.libraryId=null;var t,r,n=e.init;n&&(r=(t=e.props=e.props||{}).style,Nr(t,n),r&&(Nr(r,n.style),t.style=r),e.init=null)}function Gr(e,t,i,r,n){var a=4<arguments.length&&void 0!==n?n:{};if(Or(t)||t instanceof x)return t;if(Array.isArray(t))return t.map(function(t){return Gr(e,t,i,r,a)});var o=t.library,s=t.libraryId;if(Array.isArray(o))a={},o.forEach(function(t){!function(t,r){var e=t.id,i=t.children;if(Array.isArray(i)&&i.forEach(function(t){if(!Or(t)){var e=t.libraryId;if(Lr(e))return;var i=r[e];if(!i)throw new Error("Link library item miss id: "+e);zr(t,i)}}),Lr(e))throw new Error("Library item miss id: "+e);r[e]=t}(t,a)}),t.library=null,t.libraryId=null;else if(!Lr(s)&&a){var h=a[s];if(!h)throw new Error("Link library miss id: "+s);zr(t,h)}var u=t.tagName,l=t.props,c=void 0===l?{}:l,f=t.children,d=void 0===f?[]:f,p=t.animate,_=void 0===p?[]:p;if(!u)throw new Error("Dom must have a tagName: "+t);var y,v,g,m,k,b=c.style;return Fr(b,Ir),Hr(b,r),Hr(c,r),Hr(t,r),y="$"===u.charAt(0)?e.createGm(u,c):e.createVd(u,c,d.map(function(t){return Gr(e,t,i,r,a)})),_&&(Array.isArray(_)?(_.forEach(function(t){Fr(t,Br);var e=t.value,i=t.options;Array.isArray(e)&&e.length&&(g=!0,e.forEach(function(t){Fr(t,Ir),Hr(t,r)})),i&&(Fr(i,Dr),Hr(i,r))}),g&&(v={animate:_,target:y})):(Fr(_,Br),m=_.value,k=_.options,Array.isArray(m)&&m.length&&(m.forEach(function(t){Fr(t,Ir),Hr(t,r)}),v={animate:_,target:y}),k&&(Fr(k,Dr),Hr(k,r)))),v&&i.push(v),y}pr.register("$line",_r),pr.register("$polyline",yr),pr.register("$polygon",vr),pr.register("$sector",kr),pr.register("$rect",br),pr.register("$circle",xr),pr.register("$ellipse",Mr);var Xr={version:"0.34.0",render:function(t,e){if(!(t instanceof ar))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createVd:function(t,e,i){if(-1<["canvas","svg"].indexOf(t))return new ar(t,e,i);if(Ri.isValid(t))return"img"===t?new Oi(t,e):new Ri(t,e,i);throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return new(pr.getRegister(t))(t,e)},createCp:function(t,e,i){return new t(e,i)},parse:function(t,e,i){var r=2<arguments.length&&void 0!==i?i:{};Ee.isDom(e)||(r=e||{},e=null);var n=[],a=Gr(this,t,n,r.vars);if(e){var o=t.tagName;if(-1===["canvas","svg"].indexOf(o))throw new Error("Parse dom must be canvas/svg");var s=a.animateController;s.__records=n,this.render(a,e),s.__op(r),r.hasOwnProperty("autoPlay")&&!r.autoPlay||s.play()}else n.length&&(a.__animateRecords=n);return a},Root:ar,Dom:Ri,Img:Oi,Geom:pr,mode:xe,Component:ki,Event:Pt,util:be,inject:Ee,css:wt,unit:m,reset:_i,abbr:Tr,frame:zt,easing:Jt,level:Kt,math:w,Controller:Ki};return"undefined"!=typeof window&&(window.karas=Xr),Xr});
//# sourceMappingURL=index.min.js.map
