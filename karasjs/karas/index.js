!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=N(r);return t=i?(t=N(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!=typeof t&&"function"!=typeof t?a(e):t}}function P(t,e,r){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){t=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(t){e=Object.getOwnPropertyDescriptor(t,e);return e.get?e.get.call(r):e.value}})(t,e,r||t)}function Qt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,o=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,n=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var h={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,FILL:87,STROKE:88,STROKE_WIDTH:89,STROKE_DASHARRAY:90,STROKE_DASHARRAY_STR:91,STROKE_LINECAP:92,STROKE_LINEJOIN:93,STROKE_MITERLIMIT:94,FILL_RULE:95,MATRIX:96,BORDER_TOP:97,BORDER_RIGHT:98,BORDER_BOTTOM:99,BORDER_LEFT:100,TRANSLATE_PATH:101},l={};function c(t){return l[t]=l[t]||t.toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),l[t]}var u={};var p={},g={},v={};Object.keys(h).forEach(function(t){var e=h[t],t=c(p[e]=t);g[e]=t,v[t]=e});var m={STYLE_KEY:h,STYLE_R_KEY:p,STYLE_RV_KEY:g,STYLE_V_KEY:v,style2Lower:c,style2Upper:function(t){return u[t]=u[t]||t.replace(/([a-z\d_])([A-Z])/g,function(t,e,r){return e+"_"+r}).toUpperCase(),u[t]},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_OVERWRITE:5,UPDATE_KEYS:6,UPDATE_LIST:7,UPDATE_CONFIG:8,UPDATE_ADD_DOM:9,UPDATE_REMOVE_DOM:10},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_FRAME_CB:8,I_PLAY_CB:9,I_TARGET:10,I_ROOT:11,I_FRAMES:12,I_FRAMES_R:13,I_CURRENT_TIME:14,I_NEXT_TIME:15,I_STYLE:16,I_DURATION:17,I_ITERATIONS:18,I_FILL:19,I_PLAYBACK_RATE:20,I_PLAY_COUNT:21,I_PLAY_STATE:22,I_DESTROYED:23,I_START_TIME:24,I_FPS_TIME:25,I_EASING:26,I_ENTER_FRAME:27,I_DELAY:28,I_END_DELAY:29,I_KEYS:30,I_ORIGIN_STYLE:31,I_CURRENT_FRAMES:32,I_CURRENT_FRAME:33,I_SPF_LIMIT:34,I_FPS:35,I_DIRECTION:36,I_CAL_DIFF_TIME:37,I_FIRST_ENTER:38,I_STAY_BEGIN:39,I_STAY_END:40,I_IS2:41,I_END_TIME:42,I_NODE_CONFIG:43,I_ROOT_CONFIG:44,I_OUT_BEGIN_DELAY:45,I_TIME_STAMP:46}},y=m.STRUCT_KEY,E=y.STRUCT_NODE,x=y.STRUCT_INDEX,b=y.STRUCT_CHILD_INDEX,T=y.STRUCT_LV,A=m.NODE_KEY,M=A.NODE_IS_DESTROYED,O=A.NODE_STRUCT,R=function(){function t(){_(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={}}return f(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[O]=(o(i={},E,this),o(i,x,t),o(i,b,r),o(i,T,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[O],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[M]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[M]}}]),t}(),rt={CANVAS:0,SVG:1,WEBGL:2},S={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,S.PERCENT]:/px$/i.test(t)?[e,S.PX]:/deg$/i.test(t)?[e,S.DEG]:/rem$/i.test(t)?[e,S.REM]:/vw$/i.test(t)?[e,S.VW]:/vh$/i.test(t)?[e,S.VH]:/em$/i.test(t)?[e,S.EM]:/vw$/i.test(t)?[e,S.VW]:/vh$/i.test(t)?[e,S.VH]:[e,S.NUMBER]}},bt={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375,padding:{1:1,f:.9}},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125,padding:{S:1,T:1,Z:1,c:1,f:.7,i:1,l:1,t:.9}},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06,padding:{f:.5}},simsun:{lhr:1.4,blr:1.06,padding:{f:.5}}},support:function(t){return this.info.hasOwnProperty(t)},register:function(t,e){var r=e||{},i=r.emSquare,n=void 0===i?2048:i,o=r.ascent,e=void 0===o?1854:o,i=r.descent,o=void 0===i?434:i,i=r.lineGap,i=void 0===i?67:i,r=r.padding,r=void 0===r?{}:r;this.info[t.toLowerCase()]={lhr:(e+o+i)/n,blr:e/n,padding:r}},addPadding:function(t,e){Object.assign(this.info[t.toLowerCase()].padding,e)}};bt.info["宋体"]=bt.info.simsun;var C={position:/(([-+]?[\d.]+[pxremvwh%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};function I(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function k(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var te={identity:I,multiply:function(t,e){if(k(t))return e;if(k(e))return t;for(var r=[],i=0;i<4;i++){var n=t[i]||0,o=t[i+4]||0,a=t[i+8]||0,s=t[i+12]||0;r[i]=n*e[0]+o*e[1]+a*e[2]+s*e[3],r[i+4]=n*e[4]+o*e[5]+a*e[6]+s*e[7],r[i+8]=n*e[8]+o*e[9]+a*e[10]+s*e[11],r[i+12]=n*e[12]+o*e[13]+a*e[14]+s*e[15]}return r},calPoint:function(t,e){var r=(p=Qt(t,4))[0],i=p[1],n=p[2],o=p[3];if(void 0===o&&(o=1),!e||k(e))return[r,i,n,o];if(16!==e.length)return n=Qt(e,6),g=n[0],a=n[1],o=n[2],e=n[3],[g*r+o*i+n[4],a*r+e*i+n[5]];var n=n||0,a=Qt(e,16),s=a[0],h=a[1],l=a[2],c=a[3],u=a[4],_=a[5],f=a[6],d=a[7],e=a[8],t=a[9],p=a[10],g=a[11];return[r*s+i*u+n*e+a[12],r*h+i*_+n*t+a[13],r*l+i*f+n*p+a[14],o*=r*c+i*d+n*g+a[15]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length)return function(t){var e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];var r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0==r)return I();r=1/r;for(var i=[],n=0;n<16;n++)i[n]=e[n]*r;return i}(t);var e=Qt(t,6),r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5];return 1===r&&0===i&&0===n&&1===o&&0===a&&0===s||0==(e=r*o-i*n)?t:[o/e,-i/e,-n/e,r/e,(n*s-o*a)/e,(i*a-r*s)/e]},isE:k,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}};var w={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},L=4*(Math.sqrt(2)-1)/3,D=w.crossProduct,F=te.calPoint,B=te.isE,Y=m.STYLE_KEY,H=Y.WIDTH,G=Y.HEIGHT,W=Y.TRANSFORM_ORIGIN;function U(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function X(t,e,r){for(var i=Qt(r[0],2),n=i[0],o=i[1],i=Qt(r[0],2),a=i[0],s=i[1],h=r.length,l=1;l<h;l++)var c=Qt(r[l],2),u=c[0],c=c[1],n=Math.max(n,u),o=Math.max(o,c),a=Math.min(a,u),s=Math.min(s,c);if(t<a||e<s||n<t||o<e)return!1;for(var _=0,f=r.length;_<f;_++){var d=Qt(r[_],2),p=d[0],g=d[1],v=Qt(r[(_+1)%f],2),d=v[0],v=v[1];if(D(d-p,v-g,t-p,e-g)<0)return!1}return!0}function V(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function K(t,e){var r=Qt(t,4),i=r[0],n=r[1],o=r[2],a=r[3],s=Qt(e,4),t=s[0],r=s[1],e=s[2],s=s[3];return!(e<=i||s<=n||o<=t||a<=r)}function z(t,e,r){var i=r.matrix,n=void 0===i?[1,0,0,1,0,0]:i,o=r.computedStyle,a=void 0===o?{}:o,i=a[H],r=a[G],o=a[W],a=Qt(o=void 0===o?[.5*i,.5*r]:o,2),o=a[0],a=a[1],n=Qt(F([t*i-o,e*r-a],n),2);return[(t=n[0])+o,(e=n[1])+a]}function j(t){return t*Math.PI/180}function $(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function Z(t,e,r){var i=t,n=(2*e+r)/3,t=(e+2*r)/3;return(i(e)+3*i(n)+3*i(t)+i(r))*(r-e)/8}function q(e,r){return function t(e,r,i,n){var o=3<arguments.length&&void 0!==n?n:.001,a=e,s=(r+i)/2,h=Z(a,r,i),n=Z(a,r,s),e=Z(a,s,i),h=n+e-h;return Math.abs(h)<=15*o?n+e+h/15:t(a,r,s,o/2)+t(a,s,i,o/2)}(function(t){return $(J(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function J(t,e,r,i){i=3<arguments.length&&void 0!==i?i:1;return 2===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,n=(h=Qt(e,3))[0],o=h[1],a=h[2],s=(l=Qt(n,2))[0],r=l[1],e=Qt(o,2),h=e[0],n=e[1],o=(l=Qt(a,2))[0],e=l[1],a=0,l=0,l=0===i?(a=Math.pow(1-t,2)*s+2*t*(1-t)*h+Math.pow(t,2)*o,Math.pow(1-t,2)*r+2*t*(1-t)*n+Math.pow(t,2)*e):1===i?(a=2*(1-t)*(h-s)+2*t*(o-h),2*(1-t)*(n-r)+2*t*(e-n)):2===i?(a=2*(o-2*h+s),2*(e-2*n+r)):a=0;return[a,l]}(t,e,i):3===r?function(t,e,r){var i=2<arguments.length&&void 0!==r?r:1,n=(c=Qt(e,4))[0],o=c[1],a=c[2],s=c[3],h=(u=Qt(n,2))[0],l=u[1],r=Qt(o,2),e=r[0],c=r[1],u=(n=Qt(a,2))[0],o=n[1],r=Qt(s,2),a=r[0],n=r[1],s=0,r=0,r=0===i?(s=Math.pow(1-t,3)*h+3*t*Math.pow(1-t,2)*e+3*(1-t)*Math.pow(t,2)*u+Math.pow(t,3)*a,Math.pow(1-t,3)*l+3*t*Math.pow(1-t,2)*c+3*(1-t)*Math.pow(t,2)*o+Math.pow(t,3)*n):1===i?(s=3*((1-t)*(1-t)*(e-h)+2*(1-t)*t*(u-e)+t*t*(a-u)),3*((1-t)*(1-t)*(c-l)+2*(1-t)*t*(o-c)+t*t*(n-o))):2===i?(s=6*(u-2*e+h)*(1-t)+6*(a-2*u+e)*t,6*(o-2*c+l)*(1-t)+6*(n-2*o+c)*t):3===i?(s=6*(a-3*u+3*e-h),6*(n-3*o+3*c-l)):s=0;return[s,r]}(t,e,i):void 0}function Q(e,r,t){for(var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,a=function(t){return $(J(t,e,r))},s=t*i,h=i,l=h,c=0;c<n;c++){var u=Z(a,0,h)-s;if(Math.abs(u)<o)break;var _=$(J(h,e,r,1));if(h-=u*_/(u*$(J(h,e,r,2))+_*_),Math.abs(h-l)<o)break;l=h}return J(h,e,r,0)}function tt(t,e){var r=Qt(t,4),i=Qt(r[0],2),n=i[0],o=i[1],a=Qt(r[1],2),s=a[0],h=a[1],l=Qt(r[2],2),c=l[0],u=l[1],_=r[3],i=(s-n)*e+n,a=(h-o)*e+o,l=(c-s)*e+s,r=(u-h)*e+h,s=(l-i)*e+i,h=(r-a)*e+a;if(4===t.length){_=Qt(_,2);return[[n,o],[i,a],[s,h],[(((_[0]-c)*e+c-l)*e+l-s)*e+s,(((_[1]-u)*e+u-r)*e+r-h)*e+h]]}if(3===t.length)return[[n,o],[i,a],[s,h]]}var et={pointInPolygon:X,pointInQuadrilateral:function(t,e,r,i,n,o,a,s,h,l,c){if(!c||B(c))return r<=t&&i<=e&&t<=a&&e<=s;var u=Qt(F([r,i],c),4);r=u[0],i=u[1];var _=u[3],f=Qt(F([n,o],c),4);n=f[0],o=f[1];var u=f[3],f=Qt(F([h,l],c),4);h=f[0],l=f[1];var f=f[3],c=Qt(F([a,s],c),4);return a=c[0],s=c[1],_&&1!==_&&(r/=_,i/=_),u&&1!==u&&(n/=u,o/=u),f&&1!==f&&(h/=f,l/=f),(c=c[3])&&1!==c&&(a/=c,s/=c),X(t,e,[[r,i],[n,o],[a,s],[h,l]])},d2r:j,r2d:function(t){return 180*t/Math.PI},H:L,h:U,angleBySide:function(t,e,r){return r=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(r)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:V,triangleIncentre:function(t,e,r,i,n,o){var a=V(r,i,n,o),s=V(t,e,n,o),h=V(t,e,r,i);return[(a*t+s*r+h*n)/(a+s+h),(a*e+s*i+h*o)/(a+s+h)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,n=r*L,o=i===r?n:i*L;return[[t-r,e],[t-r,e-o,t-n,e-i,t,e-i],[t+n,e-i,t+r,e-o,t+r,e],[t+r,e+o,t+n,e+i,t,e+i],[t-n,e+i,t-r,e+o,t-r,e]]},sectorPoints:function t(e,r,i,n,o){if(o<n&&(n=(m=[o,n])[0],o=m[1]),n===o)return[];var a=[],s=Math.floor(n/90),h=Math.floor(o/90);if(s===h||h-s==1&&o%90==0){var l,c,u,_,f,d,p,g,v=U(j(Math.abs(n-o)))*i,m=Math.sqrt(Math.pow(i,2)+Math.pow(v,2)),v=Math.atan(v/i);s<90?(l=[e+Math.sin(j(n))*i,r-Math.cos(j(n))*i],c=v+j(n),_=[e+Math.sin(c)*m,r-Math.cos(c)*m],u=[e+Math.sin(j(o))*i,r-Math.cos(j(o))*i],c=j(o)-v,c=[e+Math.sin(c)*m,r-Math.cos(c)*m],a.push(l),a.push(_.concat(c).concat(u))):s<180?(l=[e+Math.cos(j(n-90))*i,r+Math.sin(j(n-90))*i],_=v+j(n-90),c=[e+Math.cos(_)*m,r+Math.sin(_)*m],u=[e+Math.cos(j(o-90))*i,r+Math.sin(j(o-90))*i],_=j(o-90)-v,_=[e+Math.cos(_)*m,r+Math.sin(_)*m],a.push(l),a.push(c.concat(_).concat(u))):s<270?(f=[e-Math.sin(j(n-180))*i,r+Math.cos(j(n-180))*i],d=v+j(n-180),g=[e-Math.sin(d)*m,r+Math.cos(d)*m],p=[e-Math.sin(j(o-180))*i,r+Math.cos(j(o-180))*i],d=j(o-180)-v,d=[e-Math.sin(d)*m,r+Math.cos(d)*m],a.push(f),a.push(g.concat(d).concat(p))):(f=[e-Math.cos(j(n-270))*i,r+Math.sin(j(n-270))*i],g=v+j(n-270),d=[e-Math.cos(g)*m,r+Math.sin(g)*m],p=[e-Math.cos(j(o-270))*i,r+Math.sin(j(o-270))*i],g=j(o-270)-v,m=[e-Math.cos(g)*m,r+Math.sin(g)*m],a.push(f),a.push(d.concat(m).concat(p)))}else{for(var y,E,x=s,b=[];x<=h;x++)0===x?(y=t(e,r,i,n,90),b.push(y)):1===x?(s===x||90<o)&&(y=t(e,r,i,n<90?90:n,180<o?180:o),b.push(y)):2===x?(s===x||180<o)&&(E=t(e,r,i,n<180?180:n,270<o?270:o),b.push(E)):3===x&&(s===x||270<o)&&(E=t(e,r,i,n<270?270:n,o),b.push(E));for(var a=b[0],T=1,A=b.length;T<A;T++)a.push(b[T][1])}return a},getRectsIntersection:function(t,e){if(!K(t,e))return null;var r=(a=Qt(t,4))[0],i=a[1],n=a[2],o=a[3],t=(s=Qt(e,4))[0],a=s[1],e=s[2],s=s[3];return[Math.max(r,t),Math.max(i,a),Math.min(n,e),Math.min(o,s)]},isRectsOverlap:K,isRectsInside:function(t,e){var r=(a=Qt(t,4))[0],i=a[1],n=a[2],o=a[3],t=(s=Qt(e,4))[0],a=s[1],e=s[2],s=s[3];return r<=t&&i<=a&&e<=n&&s<=o},calCoordsInNode:z,calPercentInNode:function(t,e,r){var i,n=(h=r.computedStyle)[H],o=h[G],a=(l=Qt(h[W],2))[0],s=l[1],h=Math.atan((o-s)/(n-a)),r=(l=Qt(z(1,1,r),2))[0],l=l[1],c=a<=r&&s<=l?(i=a===r?-Math.atan(1/0):Math.atan((l-s)/(r-a)))-h:a<=r&&l<s?(i=a===r?-Math.atan(1/0):Math.atan((s-l)/(r-a)))+h:r<a&&s<=l?(i=Math.atan((l-s)/(a-r)))-h:r<a&&l<s?(i=Math.atan((l-s)/(r-a)))<=h?i+Math.PI-h:-(c=Math.PI-i+h):0,h=Math.sqrt(Math.pow(t-a,2)+Math.pow(e-s,2)),t=a<=t&&s<=e?a===t?-Math.atan(1/0):Math.atan((e-s)/(t-a)):a<=t&&e<s?a===t?-Math.atan(1/0):-Math.atan((e-s)/(a-t)):t<a&&s<=e?Math.PI-Math.atan((e-s)/(a-t)):Math.atan((e-s)/(t-a))-Math.PI;return(t-=c)>Math.PI?(t-=Math.PI,[(a-h*Math.cos(t))/n,(s-h*Math.sin(t))/o]):t>.5*Math.PI?(t=Math.PI-t,[(a-h*Math.cos(t))/n,(s+h*Math.sin(t))/o]):0<=t?[(a+h*Math.cos(t))/n,(s+h*Math.sin(t))/o]:t>=.5*-Math.PI?(t=-t,[(a+h*Math.cos(t))/n,(s-h*Math.sin(t))/o]):t>=-Math.PI?(t=Math.PI+t,[(a-h*Math.cos(t))/n,(s-h*Math.sin(t))/o]):(t=-Math.PI-t,[(a-h*Math.cos(t))/n,(s+h*Math.sin(t))/o])},bboxBezier:function(t,e,r,i,n,o,a,s){return 4===arguments.length?[t,e,r,i]:6===arguments.length?(h=t,c=e,d=r,_=i,u=n,p=o,v=Math.min(h,u),m=Math.min(c,p),y=Math.max(h,u),E=Math.max(c,p),(d<v||_<m||y<d||E<_)&&(d=(l=1-(f=(h-d)/(h-2*d+u)))*l*h+2*l*f*d+f*f*u,p=(u=1-(f=(c-_)/(c-2*_+p)))*u*c+2*u*f*_+f*f*p,v=Math.min(v,d),m=Math.min(m,p),y=Math.min(y,d),E=Math.min(E,p)),[v,m,y,E]):8===arguments.length?(h=t,l=e,c=r,u=i,_=n,f=o,d=a,p=s,v=Math.min(h,d),m=Math.min(l,p),y=Math.max(h,d),E=Math.max(l,p),(c<v||u<m||y<c||E<u||_<v||f<m||y<_||E<f)&&(r=(t=l-2*u+f)*t-(e=3*u-l-3*f+p)*(-l+u),0<(o=(i=h-2*c+_)*i-(n=3*c-h-3*_+d)*(-h+c))&&(0<(a=(-i-(o=Math.sqrt(o)))/n)&&a<1&&(s=(s=1-a)*s*s*h+3*s*s*a*c+3*s*a*a*_+a*a*a*d,v=Math.min(v,s),y=Math.max(y,s)),0<(a=(-i+o)/n)&&a<1&&(g=(g=1-a)*g*g*h+3*g*g*a*c+3*g*a*a*_+a*a*a*d,v=Math.min(v,g),y=Math.max(y,g))),0<r&&(0<(d=(-t-(r=Math.sqrt(r)))/e)&&d<1&&(g=(g=1-d)*g*g*l+3*g*g*d*u+3*g*d*d*f+d*d*d*p,m=Math.min(m,g),E=Math.max(E,g)),0<(d=(-t+r)/e)&&d<1&&(p=(e=1-d)*e*e*l+3*e*e*d*u+3*e*d*d*f+d*d*d*p,m=Math.min(m,p),E=Math.max(E,p)))),[v,m,y,E]):void 0;var h,l,c,u,_,f,d,p,g,v,m,y,E},bezierLength:q,pointAtBezier:function(t,e,r,i,n){return Q(t,e,q(t,e,0,1),r,i,n)},pointAtBezierWithLength:Q,sliceBezier:tt,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=tt(t,r)),0<e&&(r<1&&(e/=r),t=tt(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,i){return 270<=i?(i=j(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=j(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=j(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=j(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var it={getConicGradientImage:function(a,s,h,t,e,l){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");h=Math.floor(h),t=Math.floor(t);for(var c=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),u=0;u<t;u++)for(var r=function(t){for(var e=function(t,e){t-=a,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,u),r=void 0,r=0;r<c.length&&c[r].angle<=e;r++);var i=c[r-1],n=c[r];if(!i||!n)return"continue";var o=(e-i.angle)/(n.angle-i.angle),n=n.color.map(function(t,e){return o*(t-i.color[e])+i.color[e]}),t=4*(t+u*h);l[t]=n[0],l[1+t]=n[1],l[2+t]=n[2],l[3+t]=Math.min(255,255*n[3])},i=0;i<h;i++)r(i);return l}};function nt(t){var r="";return t.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t?r+="blur(".concat(e,"px)"):"hue-rotate"===t?r+="hue-rotate(".concat(e,"deg)"):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||(r+="".concat(t,"(").concat(e,"%)"))}),r}var Tt={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var n=-1,o=0,a=e.length;o<a;o++){var s=e[o];if(Array.isArray(s)&&s.length){n=o;break}}if(-1!==n){t.moveTo(e[n][0]+r,e[n][1]+i);for(var h=n+1,l=e.length;h<l;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+i):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i,c[4]+r,c[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)&&n.length){e=r;break}}if(-1===e)return"";for(var o="M"+t[e][0]+","+t[e][1],a=e+1,s=t.length;a<s;a++){var h=t[a];Array.isArray(h)&&(2===h.length?o+="L"+h[0]+","+h[1]:4===h.length?o+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(o+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return o},canvasLine:function(t,e,r,i,n,o,a,s){var h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+h,r+l),3===s?(t.bezierCurveTo(o[0]+h,o[1]+l,a[0]+h,a[1],i+h,n+l),2):2===s?(t.quadraticCurveTo(a[0]+h,a[1]+l,i+h,n+l),2):1===s?(t.quadraticCurveTo(o[0]+h,o[1]+l,i+h,n+l),2):(t.lineTo(i+h,n+l),1)},svgLine:function(t,e,r,i,n,o,a){return 3===a?"M"+t+","+e+"C"+n[0]+","+n[1]+" "+o[0]+","+o[1]+" "+r+","+i:2===a?"M"+t+","+e+"Q"+o[0]+","+o[1]+" "+r+","+i:1===a?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:nt,svgFilter:nt},ot=et.H,at=S.PX,st=S.PERCENT,ht=S.REM,lt=S.VW,ct=S.VH,ut=Tt.canvasPolygon,_t=Tt.svgPolygon,ft=m.STYLE_KEY,dt=ft.BORDER_LEFT_WIDTH,pt=ft.BORDER_TOP_WIDTH,gt=ft.BORDER_BOTTOM_WIDTH,vt=ft.PADDING_LEFT,mt=ft.PADDING_BOTTOM,yt=ft.PADDING_TOP,Et=ft.BORDER_TOP_LEFT_RADIUS,At=ft.BORDER_TOP_RIGHT_RADIUS,Mt=ft.BORDER_BOTTOM_LEFT_RADIUS,Ot=ft.BORDER_BOTTOM_RIGHT_RADIUS,Rt=ft.FONT_SIZE;function St(t,e,r,i,n,o,a,s){var h=1,l=1,c=1;t:for(var u=o;n<=u;u--)for(var _=s;a<=_;_--){var f=u+_,d=Math.floor((t+_)/f),p=_;if(d*f<_+t)if(s<(p=(t-d*u)/(d-1)))continue;if(f=u+p,1<e&&u<e){if(u<e%f)continue;if(1<r)if(u<(e+i)%f)continue}if(1<r)if(u<(e+i)%f)continue;0<d&&(h=d,l=u,c=p);break t}return{n:h,ps:l,pd:c}}function Ct(t,e,r,i,n,o){var a=n-e,s=i-r,r=r-e,e=n-i;if("dotted"===t)return St(a,r,e,s,o,o,Math.max(1,.25*o),2*o);n=St(a,r,e,s,o,3*o,Math.max(1,.25*o),2*o),i=n.n,t=n.ps,n=n.pd;return 1===i?St(a,r,e,s,o,o,Math.max(1,.25*o),2*o):{n:i,ps:t,pd:n}}function It(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=n+p-(n-i),I=o-d+(a-o),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[1][0]<C?k.push(Y):Y[0][0]>I?L.push(Y):Y[1][0]>I&&Y[0][0]<C?(P=C<n?s+Math.tan(e)*(C-i):h,F=o<I?s+Math.tan(r)*(a-I):h,k.push([Y[0],[C,s],[C,P],Y[3]]),C<I&&(n<C&&I<o?w.push([[C,s],[I,s],[I,h],[C,h]]):n<C?(w.push([[C,s],[o,s],[o,h],[C,h]]),w.push([[o,s],[I,s],[I,F],[o,h]])):I<o?(w.push([[C,s],[n,s],[n,h],[C,P]]),w.push([[n,s],[I,s],[I,h],[n,h]])):(w.push([[C,s],[n,s],[n,h],[C,P]]),w.push([[n,s],[o,s],[o,h],[n,h]]),w.push([[o,s],[I,s],[I,F],[o,h]]))),L.push([[I,s],Y[1],Y[2],[I,F]])):Y[1][0]>I?(B=o<I?s+Math.tan(r)*(a-I):h,w.push([Y[0],[I,s],[I,B],Y[3]]),L.push([[I,s],Y[1],Y[2],[I,B]])):Y[0][0]<C?(B=C<n?s+Math.tan(e)*(C-i):h,k.push([Y[0],[C,s],[C,B],Y[3]]),w.push([[C,s],Y[1],Y[2],[C,B]])):w.push(Y)}k.length&&(v=n-i<p&&t<g,_=Math.atan((n-i)/(h-s)),b=(x=(m=g)-(h-s))/(p-(n-i)),p=Qt((T=kt(k[0][0],k[0][1],C,E=s+g,y=m/p,m,!0,Math.tan(_)*m))[0],2),R=p[0],S=p[1],v&&(_=Qt((A=kt(k[0][3],k[0][2],C,E,b,x,!0,Math.tan(_)*x))[0],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=kt(t[0],t[1],C,E,y,m),v&&(i=kt(t[3],t[2],C,E,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=a-o<d&&t<f,t=Math.atan((a-o)/(h-s)),V=(X=(G=f)-(h-s))/(d-(a-o)),d=Qt((K=wt(L[J-1][0],L[J-1][1],I,U=s+f,W=G/d,G,!0,Math.tan(t)*G))[K.length-1],2),Z=d[0],q=d[1],H&&(t=Qt((z=wt(L[J-1][3],L[J-1][2],I,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=wt(t[0],t[1],I,U,W,G),H&&(i=wt(t[3],t[2],I,U,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),k.concat(w).concat(L)}function kt(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(-u+r)*n,u=Math.atan((-c+r)*n/(i-e)),c=r-Math.sin(u)*o/n,e=i-Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*o/n,i-Math.sin(l)*o):(f=Math.atan(t/(i-_)),h=r-Math.sin(f)*o/n,i-Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),f=f-o,o=u+o;return[[h,l],[r-Math.sin(f)*_/n,i-Math.cos(f)*_],[r-Math.sin(o)*_/n,i-Math.cos(o)*_],[c,e]]}function wt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(i-f)),_=r+Math.sin(u)*o/n,f=i-Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*o/n,i-Math.sin(c)*o):(h=Math.atan(t/(i-e)),l=r+Math.sin(h)*o/n,i-Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),u+=o,o=h-o;return[[_,f],[r+Math.sin(u)*e/n,i-Math.cos(u)*e],[r+Math.sin(o)*e/n,i-Math.cos(o)*e],[l,c]]}function Lt(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=h+g-(h-s),I=l-f+(c-l),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[2][1]<C?k.push(Y):Y[1][1]>I?L.push(Y):Y[2][1]>I&&Y[1][1]<C?(P=C<h?o+Math.tan(r)*(h-C):o,F=l<I?o+Math.tan(e)*(I-l):o,k.push([Y[0],Y[1],[a,C],[P,C]]),C<I&&(I<l&&h<C?w.push([[o,C],[a,C],[a,I],[o,I]]):h<C?(w.push([[o,h],[a,h],[a,l],[o,l]]),w.push([[o,l],[a,l],[a,I],[F,I]])):I<l?(w.push([[P,C],[a,C],[a,h],[o,h]]),w.push([[o,h],[a,h],[a,I],[o,I]])):(w.push([[P,C],[a,C],[a,h],[o,h]]),w.push([[o,h],[a,h],[a,l],[o,l]]),w.push([[o,l],[a,l],[a,I],[F,I]]))),L.push([[F,I],[a,I],Y[2],Y[3]])):Y[2][1]>I?(B=l<I?o+Math.tan(e)*(I-l):o,w.push([Y[0],Y[1],[a,I],[B,I]]),L.push([[B,I],[a,I],Y[2],Y[3]])):Y[1][1]<C?(B=C<h?o+Math.tan(r)*(h-C):o,k.push([Y[0],Y[1],[a,C],[B,C]]),w.push([[B,C],[a,C],Y[2],Y[3]])):w.push(Y)}k.length&&(v=h-s<g&&t<p,_=Math.atan((a-o)/(h-s)),b=(x=(m=g)-(h-s))/(p-(a-o)),p=Qt((T=Dt(k[0][1],k[0][2],E=a-p,C,y=m/p,m,!0,Math.tan(_)*m))[T.length-1],2),R=p[0],S=p[1],v&&(_=Qt((A=Dt(k[0][0],k[0][3],E,C,b,x,!0,Math.tan(_)*x))[A.length-1],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=Dt(t[1],t[2],E,C,y,m),v&&(i=Dt(t[0],t[3],E,C,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,2);if(v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=c-l<f&&t<d,t=Math.atan((a-o)/(c-l)),V=(X=(G=f)-(c-l))/(d-(a-o)),d=Qt((K=Nt(L[J-1][1],L[J-1][2],U=a-d,I,W=G/d,G,!0,Math.tan(t)*G))[0],2),Z=d[0],q=d[1],H&&(t=Qt((z=Nt(L[J-1][0],L[J-1][3],U,I,V,X,!0,Math.tan(t)*X))[0],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Nt(t[1],t[2],U,I,W,G),H&&(i=Nt(t[0],t[3],U,I,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,3);if(H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),k.concat(w).concat(L)}function Dt(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(u-r)*n,u=Math.atan((c-r)*n/(i-e)),c=r+Math.sin(u)*o/n,e=i-Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r+Math.cos(l)*o/n,i-Math.sin(l)*o):(f=Math.atan(t/(i-_)),h=r+Math.sin(f)*o/n,i-Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=f+t,f=r+Math.sin(o)*_/n,o=i-Math.cos(o)*_,t=u-t;return[[c,e],[r+Math.sin(t)*_/n,i-Math.cos(t)*_],[f,o],[h,l]]}function Nt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(f-i)),_=r+Math.sin(u)*o/n,f=i+Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*o/n,i+Math.sin(c)*o):(h=Math.atan(t/(e-i)),l=r+Math.sin(h)*o/n,i+Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=u-t,u=r+Math.sin(o)*e/n,o=i+Math.cos(o)*e,t=h+t;return[[l,c],[r+Math.sin(t)*e/n,i+Math.cos(t)*e],[u,o],[_,f]]}function Pt(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=n+p-(n-i),I=o-d+(a-o),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[2][0]<C?k.push(Y):Y[3][0]>I?L.push(Y):Y[2][0]>I&&Y[3][0]<C?(P=C<n?c-Math.tan(e)*(C-i):h,F=o<I?c-Math.tan(r)*(a-I):l,k.push([Y[0],[C,P],[C,c],Y[3]]),C<I&&(n<C&&I<o?w.push([[C,l],[I,l],[I,c],[C,c]]):n<C?(w.push([[C,l],[o,l],[o,c],[C,c]]),w.push([[o,l],[I,F],[I,c],[o,c]])):I<o?(w.push([[C,P],[n,l],[n,c],[C,c]]),w.push([[n,l],[I,l],[I,c],[n,c]])):(w.push([[C,P],[n,l],[n,c],[C,c]]),w.push([[n,l],[o,l],[o,c],[n,c]]),w.push([[o,l],[I,F],[I,c],[o,c]]))),L.push([[I,F],Y[1],Y[2],[I,c]])):Y[2][0]>I?(B=o<I?c-Math.tan(r)*(a-I):l,w.push([Y[0],[I,B],[I,c],Y[3]]),L.push([[I,B],Y[1],Y[2],[I,c]])):Y[3][0]<C?(B=C<n?c-Math.tan(e)*(C-i):l,k.push([Y[0],[C,B],[C,c],Y[3]]),w.push([[C,B],Y[1],Y[2],[C,c]])):w.push(Y)}k.length&&(v=n-i<p&&t<g,_=Math.atan((n-i)/(c-l)),b=(x=(m=g)-(c-l))/(p-(n-i)),p=Qt((T=Ft(k[0][3],k[0][2],C,E=c-g,y=m/p,m,!0,Math.tan(_)*m))[0],2),R=p[0],S=p[1],v&&(_=Qt((A=Ft(k[0][0],k[0][1],C,E,b,x,!0,Math.tan(_)*x))[0],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=Ft(t[3],t[2],C,E,y,m),v&&(i=Ft(t[0],t[1],C,E,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,4);if(v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=a-o<d&&t<f,t=Math.atan((a-o)/(c-l)),V=(X=(G=f)-(c-l))/(d-(a-o)),d=Qt((K=Bt(L[J-1][3],L[J-1][2],I,U=c-f,W=G/d,G,!0,Math.tan(t)*G))[K.length-1],2),Z=d[0],q=d[1],H&&(t=Qt((z=Bt(L[J-1][0],L[J-1][1],I,U,V,X,!0,Math.tan(t)*X))[z.length-1],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Bt(t[3],t[2],I,U,W,G),H&&(i=Bt(t[0],t[1],I,U,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,5);if(H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),k.concat(w).concat(L)}function Ft(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(-u+r)*n,u=Math.atan((-c+r)*n/(e-i)),c=r-Math.sin(u)*o/n,e=i+Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*o/n,i+Math.sin(l)*o):(f=Math.atan(t/(_-i)),h=r-Math.sin(f)*o/n,i+Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),f=f-o,o=u+o;return[[h,l],[r-Math.sin(f)*_/n,i+Math.cos(f)*_],[r-Math.sin(o)*_/n,i+Math.cos(o)*_],[c,e]]}function Bt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(u-r)*n,u=Math.atan((_-r)*n/(f-i)),_=r+Math.sin(u)*o/n,f=i+Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r+Math.cos(c)*o/n,i+Math.sin(c)*o):(h=Math.atan(t/(e-i)),l=r+Math.sin(h)*o/n,i+Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),o=Math.atan(t/o),u+=o,o=h-o;return[[_,f],[r+Math.sin(u)*e/n,i+Math.cos(u)*e],[r+Math.sin(o)*e/n,i+Math.cos(o)*e],[l,c]]}function Yt(t,e,r,i,n,o,a,s,h,l,c,u,_,f){var d=Qt(_,2),p=d[0],g=d[1],_=Qt(f,2),d=_[0],f=_[1];if(!(p&&g||d&&f))return u;for(var v,m,y,E,x,b,T,A,M,O,R,S,C=h+g-(h-s),I=l-f+(c-l),k=[],w=[],L=[],D=0,N=u.length;D<N;D++){var P,F,B,Y=u[D];Y[3][1]<C?k.push(Y):Y[0][1]>I?L.push(Y):Y[3][1]>I&&Y[0][1]<C?(P=C<h?n-Math.tan(r)*(h-C):n,F=l<I?n-Math.tan(e)*(I-l):n,k.push([Y[0],Y[1],[P,C],[i,C]]),C<I&&(I<l&&h<C?w.push([[i,C],[n,C],[n,I],[i,I]]):h<C?(w.push([[i,C],[n,C],[n,l],[i,l]]),w.push([[i,l],[n,l],[F,I],[i,I]])):I<l?(w.push([[i,C],[P,C],[n,h],[i,h]]),w.push([[i,h],[n,h],[n,I],[i,I]])):(w.push([[i,C],[P,C],[n,h],[i,h]]),w.push([[i,h],[n,h],[n,l],[i,l]]),w.push([[i,l],[n,l],[F,I],[i,I]]))),L.push([[i,I],[F,I],Y[2],Y[3]])):Y[3][1]>I?(B=l<I?n-Math.tan(e)*(I-l):n,w.push([Y[0],Y[1],[B,I],[i,I]]),L.push([[i,I],[B,I],Y[2],Y[3]])):Y[1][1]<C?(B=C<h?n-Math.tan(r)*(h-C):n,k.push([Y[0],Y[1],[B,C],[i,C]]),w.push([[i,C],[B,C],Y[2],Y[3]])):w.push(Y)}k.length&&(v=h-s<g&&t<p,_=Math.atan((n-i)/(h-s)),b=(x=(m=g)-(h-s))/(p-(n-i)),p=Qt((T=Ht(k[0][0],k[0][3],E=i+p,C,y=m/p,m,!0,Math.tan(_)*m))[T.length-1],2),R=p[0],S=p[1],v&&(_=Qt((A=Ht(k[0][1],k[0][2],E,C,b,x,!0,Math.tan(_)*x))[A.length-1],2),M=_[0],O=_[1]),k.forEach(function(t,e){var r,i;0===e?(r=T,v&&(i=A)):(r=Ht(t[0],t[3],E,C,y,m),v&&(i=Ht(t[1],t[2],E,C,b,x)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],R,S,6);if(v){for(var a=0,s=i.length;a<s;a++)Wt(i[a],M,O,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var H,G,W,U,X,V,K,z,j,$,Z,q,J=L.length;return J&&(H=c-l<f&&t<d,t=Math.atan((n-i)/(c-l)),V=(X=(G=f)-(c-l))/(d-(n-i)),d=Qt((K=Gt(L[J-1][0],L[J-1][3],U=i+d,I,W=G/d,G,!0,Math.tan(t)*G))[0],2),Z=d[0],q=d[1],H&&(t=Qt((z=Gt(L[J-1][1],L[J-1][2],U,I,V,X,!0,Math.tan(t)*X))[0],2),j=t[0],$=t[1]),L.forEach(function(t,e){var r,i;e===J-1?(r=K,H&&(i=z)):(r=Gt(t[0],t[3],U,I,W,G),H&&(i=Gt(t[1],t[2],U,I,V,X)));for(var n=0,o=r.length;n<o;n++)Wt(r[n],Z,q,7);if(H){for(var a=0,s=i.length;a<s;a++)Wt(i[a],j,$,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),k.concat(w).concat(L)}function Ht(t,e,r,i,n,o,a,s){var h,l,c=Qt(t,2),u=c[0],_=c[1],t=Qt(e,2),c=t[0],e=t[1],t=(r-u)*n,u=Math.atan((r-c)*n/(i-e)),c=r-Math.sin(u)*o/n,e=i-Math.cos(u)*o;if(l=a?(f=Math.atan(s*n/o),h=Math.sqrt(Math.tan(f)/2),l=2*Math.atan(h/(1+h)),f=.5*Math.PI-l,h=r-Math.cos(l)*o/n,i-Math.sin(l)*o):(f=Math.atan(t/(i-_)),h=r-Math.sin(f)*o/n,i-Math.cos(f)*o),f===u)return[[h,l]];var t=et.h(Math.abs(f-u))*o,_=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=f+t,f=r-Math.sin(o)*_/n,o=i-Math.cos(o)*_,t=u-t;return[[c,e],[r-Math.sin(t)*_/n,i-Math.cos(t)*_],[f,o],[h,l]]}function Gt(t,e,r,i,n,o,a,s){var h,l,c,u=Qt(t,2),_=u[0],f=u[1],t=Qt(e,2),u=t[0],e=t[1],t=(r-u)*n,u=Math.atan((r-_)*n/(f-i)),_=r-Math.sin(u)*o/n,f=i+Math.cos(u)*o;if(c=a?(h=Math.atan(s*n/o),l=Math.sqrt(Math.tan(h)/2),c=2*Math.atan(l/(1+l)),h=.5*Math.PI-c,l=r-Math.cos(c)*o/n,i+Math.sin(c)*o):(h=Math.atan(t/(e-i)),l=r-Math.sin(h)*o/n,i+Math.cos(h)*o),u===h)return[[_,f]];t=et.h(Math.abs(u-h))*o,e=Math.sqrt(Math.pow(o,2)+Math.pow(t,2)),t=Math.atan(t/o),o=u-t,u=r-Math.sin(o)*e/n,o=i+Math.cos(o)*e,t=h+t;return[[l,c],[r-Math.sin(t)*e/n,i+Math.cos(t)*e],[u,o],[_,f]]}function Wt(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Ut=[Et,At,Ot,Mt];var Xt={calPoints:function(t,e,r,i,n,o,a,s,h,l,c,u,_,f,d){var p=[];if(-1<["dashed","dotted"].indexOf(e)){var e=0===_||2===_?Ct(e,n,o,a,s,t):Ct(e,h,l,c,u,t),g=e.n,v=e.ps,m=e.pd;if(1<g){for(var y=0;y<g;y++){var E=y===g-1,x=void 0,b=void 0,T=void 0,A=(x=0===_||2===_?y?n+v*y+m*y:n:y?h+v*y+m*y:h)+v;0===_?A<=o?E?p.push([[n,h],[s,h],[a,l],[o,l]]):(b=h+(x-n)*Math.tan(r),T=h+(A-n)*Math.tan(r),p.push([[x,h],[A,h],[A,T],[x,b]])):a<=x?(b=h+(s-x)*Math.tan(i),T=h+(s-A)*Math.tan(i),E?p.push([[x,h],[s,h],[s,h],[x,b]]):p.push([[x,h],[A,h],[A,T],[x,b]])):x<o?(b=h+(x-n)*Math.tan(r),p.push([[x,h],[o,h],[o,l],[x,b]]),E?(p.push([[o,h],[a,h],[a,l],[o,l]]),p.push([[a,h],[s,h],[s,h],[o,l]])):a<A?(T=h+(s-A)*Math.tan(i),p.push([[o,h],[a,h],[a,l],[o,l]]),p.push([[a,h],[A,h],[A,T],[a,l]])):p.push([[o,h],[A,h],[A,l],[o,l]])):a<A?(b=h+(s-A)*Math.tan(i),x<o?(T=h+(x-n)*Math.tan(r),p.push([[x,h],[o,h],[o,l],[x,T]]),p.push([[o,h],[a,h],[a,l],[o,l]])):p.push([[x,h],[a,h],[a,l],[x,l]]),E?p.push([[a,h],[s,h],[s,h],[a,l]]):p.push([[a,h],[A,h],[A,b],[a,l]])):E?p.push([[x,h],[s,h],[a,l],[x,l]]):p.push([[x,h],[A,h],[A,l],[x,l]]):1===_?A<=l?E?p.push([[a,l],[s,h],[s,u],[a,c]]):(b=s-(x-h)*Math.tan(r),T=s-(A-h)*Math.tan(r),p.push([[b,x],[s,x],[s,A],[T,A]])):c<=x?(b=a+(x-c)*Math.tan(i),T=a+(A-c)*Math.tan(i),E?p.push([[b,x],[s,x],[s,u],[s,u]]):p.push([[b,x],[s,x],[s,A],[T,A]])):x<l?(b=a+(l-x)*Math.tan(r),p.push([[b,x],[s,x],[s,l],[a,l]]),E?(p.push([[a,l],[s,l],[s,c],[a,c]]),p.push([[a,c],[s,c],[s,u],[s,u]])):c<A?(T=a+(A-c)*Math.tan(i),p.push([[a,l],[s,l],[s,c],[a,c]]),p.push([[a,c],[s,c],[s,A],[T,A]])):p.push([[a,l],[s,l],[s,A],[a,A]])):c<A?(b=a+(A-c)*Math.tan(i),x<l?(T=a+(l-x)*Math.tan(r),p.push([[T,x],[s,x],[s,l],[a,l]]),p.push([[a,l],[s,l],[s,c],[a,c]]),E?p.push([[a,c],[s,c],[s,s],[s,s]]):p.push([[a,c],[s,c],[s,A],[b,A]])):(p.push([[a,x],[s,x],[s,c],[a,c]]),E?p.push([[a,c],[s,c],[s,u],[s,u]]):p.push([[a,c],[s,c],[s,A],[b,A]]))):E?p.push([[a,x],[s,x],[s,u],[a,c]]):p.push([[a,x],[s,x],[s,A],[a,A]]):2===_?A<=o?E?p.push([[n,u],[o,c],[a,c],[s,u]]):(b=u-(x-n)*Math.tan(r),T=u-(A-n)*Math.tan(r),p.push([[x,b],[A,T],[A,u],[x,u]])):a<=x?(b=u-(s-x)*Math.tan(i),T=u-(s-A)*Math.tan(i),E?p.push([[x,b],[s,u],[s,u],[x,u]]):p.push([[x,b],[A,T],[A,u],[x,u]])):x<o?(b=u-(x-n)*Math.tan(r),p.push([[x,b],[o,c],[o,u],[x,u]]),E?(p.push([[o,c],[a,c],[a,u],[o,u]]),p.push([[a,c],[s,u],[s,u],[a,u]])):a<A?(T=u-(A-a)*Math.tan(i),p.push([[o,c],[a,c],[a,u],[o,u]]),p.push([[a,c],[A,T],[A,u],[a,u]])):p.push([[o,c],[A,c],[A,u],[o,u]])):a<A?(b=u-(s-A)*Math.tan(i),x<o?(T=u-(x-a)*Math.tan(r),p.push([[x,T],[o,c],[o,u],[x,u]]),p.push([[o,c],[a,c],[a,u],[o,u]])):p.push([[x,c],[a,c],[a,u],[x,u]]),E?p.push([[a,c],[s,u],[s,u],[a,u]]):p.push([[a,c],[A,b],[A,u],[a,u]])):E?p.push([[x,c],[a,c],[s,u],[x,u]]):p.push([[x,c],[A,c],[A,u],[x,u]]):3===_&&(A<=l?E?p.push([[n,h],[o,l],[o,c],[n,u]]):(b=n+(x-h)*Math.tan(r),T=n+(A-h)*Math.tan(r),p.push([[n,x],[b,x],[T,A],[n,A]])):c<=x?(b=n+(u-x)*Math.tan(i),T=n+(u-A)*Math.tan(i),E?p.push([[n,x],[b,x],[n,u],[n,u]]):p.push([[n,x],[b,x],[T,A],[n,A]])):x<l?(b=n+(x-h)*Math.tan(r),p.push([[n,x],[b,x],[o,l],[n,l]]),E?(p.push([[n,l],[o,l],[o,c],[n,c]]),p.push([[n,c],[o,c],[n,u],[n,u]])):c<A?(T=n+(u-A)*Math.tan(i),p.push([[n,l],[o,l],[o,c],[n,c]]),p.push([[n,c],[o,c],[T,A],[n,A]])):p.push([[n,l],[o,l],[o,A],[n,A]])):c<A?(b=n+(u-A)*Math.tan(i),x<l?(T=n+(x-h)*Math.tan(r),p.push([[n,x],[T,x],[o,l],[n,h]]),p.push([[n,l],[o,l],[o,c],[n,c]])):p.push([[n,x],[o,x],[o,c],[n,c]]),E?p.push([[n,c],[o,c],[n,u],[n,u]]):p.push([[n,c],[o,c],[b,A],[n,A]])):E?p.push([[n,x],[o,x],[o,c],[n,u]]):p.push([[n,x],[o,x],[o,A],[n,A]]))}if(0===_)return It(t,r,i,n,o,a,s,h,l,0,0,p,f,d);if(1===_)return Lt(t,r,i,0,0,a,s,h,l,c,u,p,f,d);if(2===_)return Pt(t,r,i,n,o,a,s,0,l,c,u,p,f,d);if(3===_)return Yt(t,r,i,n,o,0,0,h,l,c,u,p,f,d)}}return 0===_?(n<o&&p.push([[n,h],[o,h],[o,l],[n,h]]),p.push([[o,h],[a,h],[a,l],[o,l]]),a<s&&p.push([[a,h],[s,h],[s,h],[a,l]]),It(t,r,i,n,o,a,s,h,l,0,0,p,f,d)):1===_?(h<l&&p.push([[s,h],[s,h],[s,l],[a,l]]),p.push([[a,l],[s,l],[s,c],[a,c]]),c<u&&p.push([[a,c],[s,c],[s,u],[s,u]]),Lt(t,r,i,0,0,a,s,h,l,c,u,p,f,d)):2===_?(n<o&&p.push([[n,u],[o,c],[o,u],[n,u]]),p.push([[o,c],[a,c],[a,u],[o,u]]),a<s&&p.push([[a,c],[s,u],[s,u],[a,u]]),Pt(t,r,i,n,o,a,s,0,l,c,u,p,f,d)):3===_?(h<l&&p.push([[n,h],[n,h],[o,l],[n,l]]),p.push([[n,l],[o,l],[o,c],[n,c]]),c<u&&p.push([[n,c],[o,c],[n,u],[n,u]]),Yt(t,r,i,n,o,0,0,h,l,c,u,p,f,d)):void 0},calRadius:function(t,e,r,i,n,o,a,s){var h=(c=Qt(n,2))[0],l=c[1],n=(u=Qt(o,2))[0],c=u[1],u=(o=Qt(a,2))[0],a=o[1],s=(o=Qt(s,2))[0],o=o[1],h=Math.max(h,0),l=Math.max(l,0),n=Math.max(n,0),c=Math.max(c,0),u=Math.max(u,0),a=Math.max(a,0),s=Math.max(s,0),o=Math.max(o,0);if(_=0<h&&0<l||0<n&&0<c||0<u&&0<a||0<s&&0<o?!0:_){var _=[];return 0<h&&0<l?(_.push([t,e+l]),_.push([t,e+l*(1-ot),t+h*(1-ot),e,t+h,e])):_.push([t,e]),0<n&&0<c?(_.push([t+r-n,e]),_.push([t+r-n*(1-ot),e,t+r,e+c*(1-ot),t+r,e+c])):_.push([t+r,e]),0<u&&0<a?(_.push([t+r,e+i-a]),_.push([t+r,e+i-a*(1-ot),t+r-u*(1-ot),e+i,t+r-u,e+i])):_.push([t+r,e+i]),0<s&&0<o?(_.push([t+s,e+i]),_.push([t+s*(1-ot),e+i,t,e+i-o*(1-ot),t,e+i-o])):_.push([t,e+i]),_}},calBorderRadius:function(o,a,e,s,r){var i=!0;Ut.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===at?Math.max(0,t[0]):t[1]===st?Math.max(0,t[0]*(e?a:o)*.01):t[1]===ht?Math.max(0,t[0]*r.computedStyle[Rt]):t[1]===lt?Math.max(0,t[0]*r.width*.01):t[1]===ct?Math.max(0,t[0]*r.height*.01):0):0})}),i||Ut.forEach(function(t,e){var r=e%2==0?0:1,i=r?a:o,n=s[t],t=s[Ut[(e+1)%4]];n[r]+t[r]>i&&(n[r]>=(e=.5*i)&&t[r]>=e?n[r]=t[r]=e:n[r]>e?n[r]=i-t[r]:t[r]>e&&(t[r]=i-n[r]))})},calBorderRadiusInline:function(t,e,r){var i,n;t.length&&(i=t[0],n=t[t.length-1]);var o=i?i.outerWidth:0,a=i?i.outerHeight:0;o+=r[dt]+r[vt],a+=r[pt]+r[gt]+r[yt]+r[mt],[Et,Mt].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===at?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:o)*.01),t=Math.min(e?a:o,t);return t})}),o=n?n.outerWidth:0,a=n?n.outerHeight:0,[At,Ot].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===at?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:o)*.01),t=Math.min(e?a:o,t);return t})})},renderBorder:function(t,e,r,i,n,o,a){var s;e===rt.CANVAS||e===rt.WEBGL?(r.beginPath(),r.fillStyle!==n&&(r.fillStyle=n),i.forEach(function(t){ut(r,t,o,a)}),r.fill(),r.closePath()):e===rt.SVG&&(s="",i.forEach(function(t){s+=_t(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",n]]}))}},Vt={TYPE_VD:{_:1},TYPE_GM:{_:2},TYPE_CP:{_:3}},Kt={}.toString;function zt(e){return function(t){return Kt.call(t)==="[object "+e+"]"}}var jt=zt("Object"),$t=zt("String"),Zt=zt("Function"),qt=zt("Number"),Jt=zt("Boolean"),ee=zt("Date"),re={}.hasOwnProperty,ie=re.toString,ne=ie.call(Object);function oe(t){return null==t}function ae(t){return oe(t)?"":t.toString()}function se(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach(function(t){r+=se(t)}),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var i="<g>";t.bb.forEach(function(t){i+=se(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=se(t))}),i+="</g>";var n=t.opacity,o=t.transform,a=t.visibility,s=t.mask,h=t.overflow,l=t.filter,t=t.mixBlendMode;return"<g"+(1!==n&&void 0!==n?' opacity="'+n+'"':"")+(o?' transform="'+o+'"':"")+' visibility="'+a+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l||t?' style="':"")+(l?"filter:"+l+";":"")+(t?"mix-blend-mode:"+t+";":"")+(l||t?'"':"")+">"+i+"</g>"}}function he(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function le(t,e){for(var r=t.length?t[0]:"",i=1,n=t.length;i<n;i++)r+=e+t[i];return r}function ce(t){if(!t||"[object Object]"!==Kt.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=re.call(t,"constructor")&&t.constructor;return"function"==typeof t&&ie.call(t)===ne}var ue={isObject:jt,isString:$t,isFunction:Zt,isNumber:qt,isBoolean:Jt,isDate:ee,isNil:oe,isPrimitive:function(t){return ue.isNil(t)||ue.isBoolean(t)||ue.isString(t)||ue.isNumber(t)},isAuto:function(t){return oe(t)||"auto"===t},isPlainObject:ce,stringify:ae,joinSourceArray:function t(e){for(var r="",i=0,n=e.length;i<n;i++){var o=e[i];Array.isArray(o)?r+=t(o):r+=ae(o)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=he(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=se(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=se(t))}),e+="</g>"},joinVd:se,joinDef:he,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],oe(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+le(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+le(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+le(t,",")+")";if(3===t.length)return"rgba("+le(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n))e[n[0]]=n[1];else for(var o=Object.keys(n),a=o.length-1;0<=a;a--){var s=o[a];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,n=r.length;i<n;i++){var o=r[i];e.push([o,t[o]])}return e},clone:function e(r){if(oe(r)||"object"!==xt(r))return r;if(r.$$type===Vt.TYPE_VD||r.$$type===Vt.TYPE_GM||r.$$type===Vt.TYPE_CP)return r;if(ue.isDate(r))return new Date(r);if(!ce(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,n=e.length;i<n;i++){var o=e[i],a=r[i],s=Array.isArray(o),h=Array.isArray(a);if(s&&h){if(!t(o,a))return!1}else{if(s||h)return!1;if(o!==a)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(jt(e)&&jt(r)){for(var i={},n=0,o=Object.keys(e),a=o.length;n<a;n++){var s=o[n];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;i[s]=!0}for(var h=0,l=Object.keys(r),c=l.length;h<c;h++){var u=l[h];if(!i.hasOwnProperty(u))return!1}}else{if(ee(e)&&ee(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==xt(e))return t;for(var i=0,n=(r=r||Object.keys(e)).length;i<n;){var o=r[i];t[o]=e[o],i++}return t},joinArr:le,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!te.isE(e)){var n=Qt(t,4),o=n[0],a=n[1],s=n[2],n=n[3];r&&(o-=r,s+=r),i&&(a-=i,n+=i);var h=[s,a,o,n,s,n],n=Qt(te.calPoint([o,a],e),4),o=n[0],a=n[1];(d=n[3])&&1!==d&&(o/=d,a/=d);for(var l=o,c=a,u=o,_=a,f=0;f<6;f+=2){var d,p=h[f],g=h[f+1],v=Qt(te.calPoint([p,g],e),4),p=v[0],g=v[1];(d=v[3])&&1!==d&&(p/=d,g/=d),l=Math.min(l,p),u=Math.max(u,p),c=Math.min(c,g),_=Math.max(_,g)}t=[l,c,u,_]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},_e={flag:!1},fe={list:[],data:{},charWidth:{},padding:{},ELLIPSIS:"…"},de={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},pe=te.calPoint;function ge(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS))return e;r=t.getShaderInfoLog(e);throw t.deleteShader(e),new Error("Failed to compile shader: "+r)}function ve(t,e,r,i){var n=Qt(t,4),o=n[0],a=n[1],t=n[2],n=n[3];return void 0===t&&(t=0),(n=void 0===n?1:n)&&1!==n&&(o/=n,a/=n,t/=n),a===r?a=0:(a=(a-r)/r,i&&(a=-a)),[(o=o===e?0:(o-e)/e)*n,a*n,t*n,n]}function me(t,e,r,i,n){var o=t.createTexture();return ye(t,o,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,n,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),o}function ye(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var Ee,xe={initShaders:function(t,e,r){if(!(r=function(t,e,r){var i=ge(t,t.VERTEX_SHADER,e),n=ge(t,t.FRAGMENT_SHADER,r);if(!i||!n)return null;e=t.createProgram();if(!e)return null;if(e.vertexShader=i,e.fragmentShader=n,t.attachShader(e,i),t.attachShader(e,n),t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS))return e;r=t.getProgramInfoLog(e);throw t.deleteProgram(e),t.deleteShader(n),t.deleteShader(i),new Error("Failed to link program: "+r)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),r},createTexture:me,bindTexture:ye,drawTextureCache:function(r,t,y,E,x,b){var T,A=[],M=[],O=[],R=[0],S=[R];t.forEach(function(t,e){var r=Qt(t,5),i=r[0],n=r[1],o=r[2],a=r[3],s=r[4];e?(m=y[i.page.uuid],T!==m&&(R=[0,T=m],S.push(R))):(T=y[i.page.uuid],R[1]=T);var h=i.x,l=i.y,c=i.width,u=i.height,_=i.page,f=i.bbox,d=f[0],p=f[1],g=d+(a||0),v=p+u+(s||0),t=d+c+(a||0),r=p+(s||0),e=Qt(pe([g,v],o),4),m=e[0],i=e[1],f=e[3],d=Qt(pe([t,v],o),4),a=d[0],p=d[1],s=d[3],e=Qt(pe([t,r],o),4),v=e[0],d=e[1],t=e[3],e=Qt(pe([g,r],o),4),g=e[0],r=e[1],o=e[3],e=Qt(ve([m,i,0,f],E,x,b),2),m=e[0],i=e[1],e=Qt(ve([a,p,0,s],E,x,b),2),a=e[0],p=e[1],e=Qt(ve([v,d,0,t],E,x,b),2),v=e[0],d=e[1],e=Qt(ve([g,r,0,o],E,x,b),2),g=e[0],r=e[1];A.push(m,i,0,f,g,r,0,o,a,p,0,s,g,r,0,o,a,p,0,s,v,d,0,t);t=h/_.width,u=(l+u)/_.height,c=(h+c)/_.width,_=l/_.height;M.push(t,u,t,_,c,u,t,_,c,u,c,_),O.push(n,n,n,n,n,n),R[0]++});var e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(A),r.STATIC_DRAW);var i=r.getAttribLocation(r.program,"a_position");r.vertexAttribPointer(i,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i);var n=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,new Float32Array(M),r.STATIC_DRAW);var o=r.getAttribLocation(r.program,"a_texCoords");r.vertexAttribPointer(o,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(o);var a=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(O),r.STATIC_DRAW),t=r.getAttribLocation(r.program,"a_opacity"),r.vertexAttribPointer(t,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(t);var s=r.getUniformLocation(r.program,"u_texture"),h=0;S.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];r.uniform1i(s,e),r.drawArrays(r.TRIANGLES,h,t*=6),h+=t}),r.deleteBuffer(e),r.deleteBuffer(n),r.deleteBuffer(a),r.disableVertexAttribArray(i),r.disableVertexAttribArray(o),r.disableVertexAttribArray(t)},drawBlur:function(e,t,r,i,n,o,a,s,h,l,c,u,_,f,d){var p=(g=Qt(ve([_,l-_],c,u),2))[0],g=g[1],c=(_=Qt(ve([h-_,_],c,u),2))[0],u=_[1],_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([p,u,p,g,c,u,p,g,c,u,c,g]),e.STATIC_DRAW),u=e.getAttribLocation(t,"a_position"),e.vertexAttribPointer(u,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(u),c=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),g=e.getAttribLocation(t,"a_texCoords"),e.vertexAttribPointer(g,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(g);var v=e.getUniformLocation(t,"u_direction");e.uniform2f(v,0,0);var m=e.getUniformLocation(t,"u_texture");e.uniform1i(m,s),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW);for(var y=100/Math.max(h,l),E=h/l,x=[],b=0;b<3;b++){var T=me(e,null,s,h,l);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,T,0),l<=h?e.uniform2f(v,y,0):e.uniform2f(v,y*E,0),e.uniform1i(m,a),e.drawArrays(e.TRIANGLES,0,6),x.push(n);var A=me(e,null,a,h,l);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,A,0),l<=h?e.uniform2f(v,0,y*E):e.uniform2f(v,0,y),e.uniform1i(m,s),e.drawArrays(e.TRIANGLES,0,6),n=A,x.push(T)}return e.deleteBuffer(_),e.deleteBuffer(c),e.disableVertexAttribArray(u),e.disableVertexAttribArray(g),x.forEach(function(t){return e.deleteTexture(t)}),n},drawOverflow:function(t,e,r,i,n,o,a,s){var h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(t.programOverflow,"a_position");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);var c=r/a,l=i/s,a=(n+r)/a,i=(o+i)/s,s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([c,l,c,i,a,l,c,i,a,l,a,i]),t.STATIC_DRAW),i=t.getAttribLocation(t.programOverflow,"a_texCoords"),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i),i=t.getUniformLocation(t.programOverflow,"u_texture"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(h)},drawMask:function(t,e,r,i){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var o=t.getAttribLocation(i,"a_position");t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(i,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.getUniformLocation(i,"u_texture1");t.uniform1i(h,r),i=t.getUniformLocation(i,"u_texture2"),t.uniform1i(i,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(a),t.disableVertexAttribArray(o),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,n,o){var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);var c=t.getUniformLocation(e,"u_texture1");t.uniform1i(c,r),e=t.getUniformLocation(e,"u_texture2"),t.uniform1i(e,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(h),t.disableVertexAttribArray(s),t.disableVertexAttribArray(l)},drawCm:function(t,e,r,i){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var o=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var h=t.getUniformLocation(e,"u_texture");t.uniform1i(h,r),e=t.getUniformLocation(e,"u_m"),t.uniform1fv(e,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(a),t.disableVertexAttribArray(o),t.disableVertexAttribArray(s)}},be={},Te={},Ae=[],Me=[],Oe="function"==typeof OffscreenCanvas&&ue.isFunction(OffscreenCanvas.prototype.getContext);function Re(t,e,r,i,n){var o;return(o=t?i[t]||(i[t]=!_e.flag&&Oe?new OffscreenCanvas(e,r):document.createElement("canvas")):(o=i===be?Ae:Me).length?o.pop():!_e.flag&&Oe?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,o.height=r,_e.flag&&(o.style.width=e+"px",o.style.height=r+"px",o.setAttribute("type",i===be?"canvas":"webgl"),t&&o.setAttribute("key",t),n&&o.setAttribute("message",n),document.body.appendChild(o)),n=i===be?o.getContext("2d"):o.getContext("webgl",de)||o.getContext("experimental-webgl",de),{canvas:o,ctx:n,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===be?Ae:Me).push(this.canvas),this.available=!1}}}var Se,Ce,Ie={},ke={},we={},Le={measureText:function(){var t=fe.list,c=fe.data,u="",_=[],f=[],d=[];if(Object.keys(c).forEach(function(t){var e=c[t],r=e.ff,i=e.fs,n=e.fw,o=e.s;if(o){_.push(t),f.push(o.length);for(var a="position:absolute;font-family:".concat(r,";font-size:").concat(i,"px;font-weight:").concat(n),s=0,h=o.length;s<h;s++){var l=o.charAt(s);d.push(l),u+='<span style="'.concat(a,'">').concat(l.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}c[t].s=""}}),u){var e=document.createElement("div");e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=u;for(var r,i=e.childNodes,n=fe.charWidth,o=0,a=0,s=0,h=i.length;s<h;s++){var l=i[s];0===o&&(r=_[a]),++o===f[a]&&(a++,o=0);var p=d[s],l=window.getComputedStyle(l,null);n[r][p]=parseFloat(l.width)}t.forEach(function(t){return t.__measureCb()}),fe.list=[],fe.data={},_e.flag||document.body.removeChild(e)}},measureTextSync:function(t,e,r,i,n){i="position:absolute;font-family:".concat(e,";font-size:").concat(r,"px;font-weight:").concat(i),i='<span style="'.concat(i,'">').concat(n,'</span><span style="').concat(i,'">').concat(n).concat(n,"</span>"),n=document.createElement("div");n.style.position="absolute",n.style.left="99999px",n.style.top="-99999px",n.style.visibility="hidden",document.body.appendChild(n),n.innerHTML=i;n=n.childNodes;return 2*parseFloat(window.getComputedStyle(n[0],null).width)-parseFloat(window.getComputedStyle(n[1],null).width)},IMG:Ie,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,o=[];e.forEach(function(t,e){Le.measureImg(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!e||!ue.isString(e))return Le.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,a,s=Ie[e]=Ie[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(a=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&("undefined"!=typeof location&&location.hostname===a[1]||(t.crossOrigin="anonymous")),t.src=e,_e.flag&&"undefined"!=typeof document&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Ce=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(Le.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Le.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Ne.toString=function(){return Ce.toString()},Ne),cancelAnimationFrame:(Se=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Le.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Le.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},De.toString=function(){return Se.toString()},De),now:function(){return"undefined"!=typeof performance?(Le.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Le.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&be.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return Re(r,t,e,be,i)},releaseCacheCanvas:function(t){Ae.push(t)},delCacheCanvas:function(t){t&&delete be[t]},hasCacheWebgl:function(t){return t&&Te.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return Re(r,t,e,Te,i)},releaseCacheWebgl:function(t){Me.push(t)},delCacheWebgl:function(t){t&&delete Te[t]},isDom:function(t){if(t){if(ue.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(ue.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},checkSupportFontFamily:function(t){if("arial"===(t=t.toLowerCase())||"serif"===t||"sans-serif"===t||"sansserif"===t)return!0;if(!bt.info.hasOwnProperty(t))return!1;if(bt.info[t].hasOwnProperty("checked"))return bt.info[t].checked;var e=Le.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__"),r=e.ctx;r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",Ee||(r.clearRect(0,0,16,16),r.font="16px arial",r.fillText("a",8,8),e.draw(),Ee=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),r.font="16px "+t,r.fillText("a",8,8),e.draw();for(var i=r.getImageData(0,0,16,16).data,n=0,o=i.length;n<o;n++)if(Ee[n]!==i[n])return bt.info[t].checked=!0;return bt.info[t].checked=!1},loadFont:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,o=[];t.forEach(function(t,e){Le.loadFont(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!t||!ue.isString(t))return Le.error("Load font invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e=ke[t]=ke[t]||{state:0,task:[]};2===e.state?r&&r(e):1===e.state?r&&e.task.push(r):(e.state=1,r&&e.task.push(r),new FontFace(t,"url(".concat(t,")")).load().then(function(){e.state=2,e.success=!0,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}).catch(function(){e.state=2,e.success=!1,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,o=[];t.forEach(function(t,e){Le.loadComponent(t,function(t){o[e]=t,++i===n&&r(o)})})}else{if(!t||!ue.isString(t))return Le.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,a=we[t]=we[t]||{state:0,task:[]};2===a.state?r&&r(a):1===a.state?r&&a.task.push(r):(a.state=1,r&&a.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){a.state=2,a.success=!0,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},e.onerror=function(){a.state=2,a.success=!1,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function De(t){return Se.apply(this,arguments)}function Ne(t){return Ce.apply(this,arguments)}var Pe=ue.rgba2int,Fe=ue.isNil,Be=S.PX,Ye=S.PERCENT,He=S.DEG,Ge=S.NUMBER,We=S.REM,Ue=S.VW,Xe=S.VH,Ve=S.calUnit,Ke=et.d2r,ze=Tt.canvasPolygon,je=Tt.svgPolygon,$e=m.STYLE_KEY.FONT_SIZE,Ze=m.NODE_KEY.NODE_DEFS_CACHE;function qe(t){if(/^[-+]?[\d.]/.test(t)){var e=Ve(t);return-1<[Ge,He].indexOf(e[1])&&(e[1]=Be),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,Ye]}function Je(t,e,r){for(var i,n=[],o=t[0][0],a=0,s=t.length;a<s;a++){var h,l=t[a];1<l.length?(h=l[1])[1]===Ye?n.push([l[0],.01*h[0]]):h[1]===We?n.push([l[0],h[0]*r.computedStyle[$e]/e]):h[1]===Ue?n.push([l[0],h[0]*r.width/e]):h[1]===Xe?n.push([l[0],h[0]*r.height/e]):n.push([l[0],h[0]/e]):n.push([l[0]])}1===n.length&&n.push(ue.clone(n[0])),1===n[0].length&&n[0].push(0),1<n.length&&(1===n[i=n.length-1].length&&n[i].push(1));for(var c=n[0][1],u=1,_=n.length;u<_-1;u++){var f=n[u];if(1<f.length)c=f[1];else{for(var d=u+1,p=n[n.length-1][1];d<_-1;d++){var g=n[d];if(1<g.length){p=g[1];break}}for(var v=(p-c)/(d-u+1),m=u;m<d;m++)n[m].push(c+v*(m+1-u));u=d}}for(var y=1,E=n.length;y<E;y++){var x=n[y],b=n[y-1];x[1]<b[1]&&(x[1]=b[1])}for(var T=0,A=n.length;T<A;T++){var M=n[T];if(1<M[1]){n.splice(T);var O,R,S,C,I=n[T-1];I&&I[1]<1&&(O=M[0][0]-I[0][0],R=M[0][1]-I[0][1],S=M[0][2]-I[0][2],C=M[0][3]-I[0][3],I=(1-I[1])/(M[1]-I[1]),n.push([[M[0][0]+O*I,M[0][1]+R*I,M[0][2]+S*I,M[0][3]+C*I],1]));break}}for(var k=n.length-1;0<=k;k--){var w=n[k];if(w[1]<0){n.splice(0,k+1);var L,D,N,P,F=n[k];F&&0<F[1]&&(L=F[0][0]-w[0][0],D=F[0][1]-w[0][1],N=F[0][2]-w[0][2],P=F[0][3]-w[0][3],F=-w[1]/(F[1]-w[1]),n.unshift([[w[0][0]+L*F,w[0][1]+D*F,w[0][2]+N*F,w[0][3]+P*F],0]));break}}return n.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),n.length||n.push([o,0]),n}function Qe(t,e,r,i,n,o){var a=t[0],t=t[1],a=a[1]===Ye?e+a[0]*i*.01:a[1]===We?e+a[0]*o.computedStyle[$e]:a[1]===Ue?e+a[0]*o.width*.01:a[1]===Xe?e+a[0]*o.height*.01:e+a[0],t=t[1]===Ye?r+t[0]*n*.01:t[1]===We?r+t[0]*o.computedStyle[$e]:t[1]===Ue?r+t[0]*o.width*.01:t[1]===Xe?r+t[0]*o.height*.01:r+t[0];return[a,t]}var tr={parseGradient:function(t){var e=C.gradient.exec(t);if(e){var r,i,n,o,a,s,h={k:e[1]};"linear"===h.k?(t=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(e[2]))?h.d=(n=t[0].toLowerCase(),r=180,"to top"===n?r=0:"to top right"===n?r=45:"to right"===n?r=90:"to bottom right"===n?r=135:"to bottom"===n||("to bottom left"===n?r=225:"to left"===n?r=270:"to top left"===n?r=315:(n=/([-+]?[\d.]+)deg/.exec(n))&&(r=parseFloat(n[1]))),r%360):(i=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(e[2]),h.d=i?[parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]),parseFloat(i[4])]:180):"radial"===h.k?(h.s=-1<e[2].indexOf("circle")?"circle":"ellipse",(n=/(closest|farthest)-(side|corner)/i.exec(e[2]))?h.z=n[0].toLowerCase():(o=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(e[2]))?(h.z=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])],r=!Fe(o[5]),i=!Fe(o[6]),n=!Fe(o[7]),r&&i&&n?(h.z.push(parseFloat(o[5])),h.z.push(parseFloat(o[6])),h.z.push(parseFloat(o[7]))):r&&i?(h.z.push(parseFloat(o[5])),h.z.push(parseFloat(o[6])),h.z.push(1)):r?(h.z.push(h.z[0]),h.z.push(h.z[1]),h.z.push(parseFloat(o[5]))):(h.z.push(h.z[0]),h.z.push(h.z[1]),h.z.push(1))):h.z="farthest-corner",(o=/at\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(a=qe(o[1]),s=o[2]?qe(o[2]):a,h.p=[a,s]):h.p=[[50,Ye],[50,Ye]]):"conic"===h.k&&(a=/([-+]?[\d.]+deg)/i.exec(e[2]),h.d=a?parseFloat(a[0])%360:0,(s=/at\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwh%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]))?(a=qe(s[1]),s=s[2]?qe(s[2]):a,h.p=[a,s]):h.p=[[50,Ye],[50,Ye]]);e=e[2].match(/([-+]?[\d.]+[pxremvwh%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwh%]+)?/gi)||[];return h.v=e.map(function(t){var e=/((?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\)))/i.exec(t),e=[Pe(e[1])],t=/[-+]?[\d.]+[pxremvwh%]+/.exec(t);return t&&(t=Ve(t[0]),-1<[Ge,He].indexOf(t[1])&&(t[1]=Be),e[1]=t),e}),h}},getLinear:function(t,e,r,i,n,o,a,s,h){var l,c,u=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,_=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0;if(r+=u,i+=_,n+=u,o+=_,Array.isArray(e))var f=r+e[0]*a,d=i+e[1]*s,p=r+e[2]*a,g=i+e[3]*s,v=Je(t,Math.sqrt(Math.pow(p-f,2)+Math.pow(g-d,2)));else{for(;360<=e;)e-=360;for(;e<0;)e+=360;var m=Math.max(a,s),y=(x=m,u=n,_=o,x=270<=(n=e)?(o=Ke(360-n),l=u+Math.sin(o)*x,y=_+Math.cos(o)*x,E=u-Math.sin(o)*x,_-Math.cos(o)*x):180<=n?(c=Ke(n-180),l=u+Math.sin(c)*x,y=_-Math.cos(c)*x,E=u-Math.sin(c)*x,_+Math.cos(c)*x):90<=n?(c=Ke(180-n),l=u-Math.sin(c)*x,y=_-Math.cos(c)*x,E=u+Math.sin(c)*x,_+Math.cos(c)*x):(n=Ke(n),l=u-Math.sin(n)*x,y=_+Math.cos(n)*x,E=u+Math.sin(n)*x,_-Math.cos(n)*x),[l,y,E,x]);m*=2;var E=w.dotProduct(r-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/m,x=w.dotProduct(r+a-y[0],i-y[1],y[2]-y[0],y[3]-y[1])/m,a=w.dotProduct(r+a-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/m,r=w.dotProduct(r-y[0],i+s-y[1],y[2]-y[0],y[3]-y[1])/m,i=E,s=E,i=Math.min(E,Math.min(x,Math.min(a,r))),s=Math.max(s,Math.max(x,Math.max(a,r))),a=i/m,r=y[2]-y[0],m=y[3]-y[1];f=y[0]+r*a,d=y[1]+m*a,p=y[2]-r*a,g=y[3]-m*a,v=Je(t,s-i,h)}return{x1:f,y1:d,x2:p,y2:g,stop:v}},getRadial:function(t,e,r,i,n,o,a,s,h){var l,c,u,i=(p=e,_=r,l=i,c=a-n,e=s-o,r=n,i=o,n=a,o=s,a=h,s=0,Array.isArray(_)?(f=r+_[0]*c,d=i+_[1]*e,y=r+_[4]*c,E=i+_[5]*e,_[6]<=0?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-o),Math.min(Math.abs(f-o))))):(m=(v=Math.sqrt(Math.pow((_[2]-_[0])*c,2)+Math.pow((_[3]-_[1])*e,2)))*_[6],g=Math.max(v,m),v!==m&&(s=_[2]>=_[0]?_[3]>=_[1]?Math.asin((_[3]-_[1])*e/v):-Math.asin((_[1]-_[3])*e/v):_[3]>=_[1]?Ke(180)-Math.asin((_[3]-_[1])*e/v):Math.asin((_[1]-_[3])*e/v)-Ke(180)))):(y=f=(l=Qt(Qe(l,r,i,c,e,a),2))[0],E=d=l[1],a=1,"closest-corner"===_&&"circle"===p?g=f<=r||n<=f||d<=i||o<=d?Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-o),Math.min(Math.abs(f-o))))):(v=f<r+.5*c?f-r:n-f,m=d<i+.5*e?d-i:o-d,Math.sqrt(Math.pow(v,2)+Math.pow(m,2))):"closest-side"===_||"closest-corner"===_?f<=r||n<=f||d<=i||o<=d?g=Math.min(Math.abs(f-r),Math.min(Math.abs(d-i),Math.min(Math.abs(d-o),Math.min(Math.abs(f-o))))):(l=1,v=f<r+.5*c?f-r:n-f,m=d<i+.5*e?d-i:o-d,g=Math.min(v,m),v*=l="closest-corner"===_?Math.sqrt(2):l,m*=l,g*=l):(v=f<=r?r-f+c:n<=f?f-n+c:f<r+.5*c?n-f:f-r,m=d<=i?i-d+e:o<=d?d-o+e:d<i+.5*e?o-d:d-i,g=Math.max(v,m),v*=a="farthest-side"!==_?Math.sqrt(2):a,m*=a,g*=a)),[f,d,g,v="circle"===p?m=g:v,m,y,E,s]),_=Qt(i,8),a=_[0],f=_[1],d=_[2],p=_[3],g=_[4],v=_[5],m=_[6],y=_[7],E=1,s=1;return p===g&&!y||(u=[1,0,0,1,0,0],y&&(i=Math.sin(y),u=[_=Math.cos(y),i,0,0,-i,_,0,0,0,0,1,0,0,0,0,1]),p!==d&&(u=te.multiply(u,[E=p/d,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),g!==d&&(u=te.multiply(u,[1,0,0,0,0,s=g/d,0,0,0,0,1,0,0,0,0,1]))),{cx:a,cy:f,tx:v,ty:m,r:d,stop:Je(t,d,h),scx:E,scy:s,matrix:u,d:y}},getConic:function(t,e,r,i,n,o,a,s,h){var l=function(t,e,r,i,n,o,a){var s=n-r,h=o-i,e=Qt(Qe(e,r,i,s,h,a),2),a=e[0],e=e[1];n=r+.5*s<=a?a-r:n-a;o=i+.5*h<=e?e-i:o-e;return o=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),[a,e,o,t]}(e,r,i,n,o,a,h),c=Qt(l,4),e=c[0],r=c[1],l=c[2];return l<<=1,{cx:e,cy:r,w:o-i,h:a-n,r:l*=s,deg:c[3],stop:Je(t,1,h)}},renderConic:function(e,t,r,i,n,o,a,s,h,l,c,u,_){if(l=(l=Xt.calRadius(n,o,a,s,h,l,c,u))||[[n,o],[n+a,o],[n+a,o+s],[n,o+s],[n,o]],t===rt.CANVAS||t===rt.WEBGL){c=Le.getCacheCanvas(a,s,"__$$CONIC_GRADIENT$$__"),u=c.ctx.getImageData(0,0,a,s);it.getConicGradientImage(i.cx-n,i.cy-o,i.w,i.h,i.stop,u.data),c.ctx.putImageData(u,0,0),r.save(),r.beginPath(),ze(r,l),r.clip(),r.closePath(),r.drawImage(c.canvas,n,o),r.restore(),c.ctx.clearRect(0,0,a,s)}else if(t===rt.SVG){if(_){var f={tagName:"symbol",props:[],children:[]};return e.__config[Ze].push(f),i.forEach(function(t){f.children.push({type:"item",tagName:"path",props:[["d",je(t[0])],["fill",t[1]]]})}),r.add(f)}l={tagName:"clipPath",children:[{tagName:"path",props:[["d",je(l)]]}]};e.__config[Ze].push(l);var d=r.add(l);i.forEach(function(t){e.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",je(t[0])],["fill",t[1]],["clip-path","url(#"+d+")"]]})})}}},er={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit"},rr={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},ir=[],nr=[];Object.keys(er).forEach(function(t){nr.push(t);var e=er[t];ir.push({k:t,v:e})});var or=[],ar=[];Object.keys(rr).forEach(function(t){ar.push(t);var e=rr[t];or.push({k:t,v:e})});var sr={fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:1,textStrokeOver:"none"},hr=[];Object.keys(sr).forEach(function(t){hr.push(t)});var lr={DOM:er,GEOM:rr,isValid:function(t){return er.hasOwnProperty(t)||rr.hasOwnProperty(t)},DOM_KEY_SET:nr,GEOM_KEY_SET:ar,DOM_ENTRY_SET:ir,GEOM_ENTRY_SET:or,INHERIT:sr,INHERIT_KEY_SET:hr},cr=ue.isNil;function ur(t,e,r,i){cr(t.flexGrow)&&(t.flexGrow=e||0),cr(t.flexShrink)&&(t.flexShrink=r||0),cr(t.flexBasis)&&(t.flexBasis=i||0)}var _r={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(i,t){var e,n,o,a,r,s,h,l,c,u,_,f,d,p,g,v,m,y,E=this,x=i[t];if("background"===t)Array.isArray(x)?(r=x.length,!cr(i.backgroundColor)||(e=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(x[r-1]))&&(i.backgroundColor=e[0],x=x.slice(0,r-1)),n=[],o=[],a=[],x.forEach(function(t){var e,r;cr(i.backgroundImage)&&((e=C.gradient.exec(t))?(n.push(e[0]),t=t.replace(e[0],"")):(r=C.img.exec(x))&&(n.push(r[0]),t=t.replace(r[0],""))),!cr(i.backgroundRepeat)||(r=/(no-?)?repeat(-?[xy])?/i.exec(t))&&o.push(r[0].toLowerCase()),!cr(i.backgroundPosition)||(t=t.match(C.position))&&a.push(t.join(" "))}),n.length&&(i.backgroundImage=n),o.length&&(i.backgroundRepeat=o),a.length&&(i.backgroundPosition=a,this.toFull(i,"backgroundPosition"))):(cr(i.backgroundImage)&&((r=C.gradient.exec(x))?(i.backgroundImage=r[0],x=x.replace(r[0],"")):(s=C.img.exec(x))&&(i.backgroundImage=s[0],x=x.replace(s[0],""))),!cr(i.backgroundRepeat)||(s=/(no-?)?repeat(-?[xy])?/i.exec(x))&&(i.backgroundRepeat=s[0].toLowerCase()),!cr(i.backgroundColor)||(h=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(x))&&(i.backgroundColor=h[0],x=x.replace(h[0],"")),!cr(i.backgroundPosition)||(h=x.match(C.position))&&(i.backgroundPosition=h.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===x?ur(i,0,0,"auto"):"auto"===x?ur(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(x)?(l=x.split(/\s+/),ur(i,parseFloat(l[0]),parseFloat(l[1]),l[2])):/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwh%]*/.test(x)?(l=x.split(/\s+/),ur(i,parseFloat(l[0]),parseFloat(l[1]),l[2])):/^[\d.]+\s+[\d.]+$/.test(x)?(f=x.split(/\s+/),ur(i,parseFloat(f[0]),parseFloat(f[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwh%]+/.test(x)?(d=x.split(/\s+/),ur(i,parseFloat(d[0]),1,d[1])):/^[\d.]+$/.test(x)?ur(i,parseFloat(x),1,0):/^[\d.]+[pxremvwh%]+/i.test(x)?ur(i,1,1,x):ur(i,0,1,"auto");else if("flexFlow"===t)(x=x.toString().split(/\s+/)).length&&(cr(i.flexDirection),i.flexDirection=x[0],1<x.length&&(i.flexWrap=x[1]));else if("borderRadius"===t){1===(x=x.toString().split("/")).length&&(x[1]=x[0]);for(var b=0;b<2;b++){var T=x[b].toString().split(/\s+/);0===T.length?x[b]=[0,0,0,0]:1===T.length?x[b]=[T[0],T[0],T[0],T[0]]:2===T.length?x[b]=[T[0],T[1],T[0],T[1]]:3===T.length?x[b]=[T[0],T[1],T[2],T[1]]:x[b]=T.slice(0,4)}this[t].forEach(function(t,e){cr(i[t])&&(i[t]=x[0][e]+" "+x[1][e])})}else"backgroundPosition"===t?(Array.isArray(x)||(x=[x]),c=this[t].map(function(t){return cr(i[t])}),x.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),E[t].forEach(function(t,e){c[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(u=x.toString().split(/\s*,\s*/)).length&&(u[1]=u[0]),this[t].forEach(function(t,e){cr(i[t])&&(i[t]=u[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(_=x.toString().split(/\s*,\s*/)).length?_[2]=_[1]=_[0]:2===_.length&&(_[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){cr(i[t])&&(i[t]=_[e])})):"margin"===t||"padding"===t?(g=i,m=this[v=t],v=g[v],cr(v)||(y=v.toString().match(/([-+]?[\d.]+[pxremvwh%]*)|(auto)/gi))&&(1===y.length?y[3]=y[2]=y[1]=y[0]:2===y.length?(y[2]=y[0],y[3]=y[1]):3===y.length&&(y[3]=y[1]),m.forEach(function(t,e){cr(g[t])&&(g[t]=y[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(v=(f=i)[d=t],cr(v)||(cr(f[d+"Width"])&&(m=/\b[\d.]+[pxremvwh%]*\b/i.exec(v),f[d+"Width"]=m?m[0]:0),cr(f[d+"Style"])&&(p=/\b(solid|dashed|dotted)\b/i.exec(v),f[d+"Style"]=p?p[1]:"solid"),cr(f[d+"Color"])&&((p=/#[0-9a-f]{3,8}/i.exec(v))&&-1<[4,7,9].indexOf(p[0].length)?f[d+"Color"]=p[0]:/\btransparent\b/i.test(v)?f[d+"Color"]="transparent":(p=/rgba?\s*\(.+\)/i.exec(v),f[d+"Color"]=p?p[0]:"transparent")))):"textStroke"===t?((p=/(?:^|\s)([-+]?[\d.]+[pxremvwh%]*)/.exec(x))&&(i.textStrokeWidth=p[1]),(p=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(x))&&(i.textStrokeColor=p[0]),/\bfill\b/i.test(x)?i.textStrokeOver="fill":i.textStrokeOver="none"):this[t]&&this[t].forEach(function(t){cr(i[t])&&(i[t]=x)});return i}},fr=m.STYLE_KEY,y=[[fr.BACKGROUND_COLOR],[fr.BORDER_BOTTOM_COLOR],[fr.BORDER_LEFT_COLOR],[fr.BORDER_RIGHT_COLOR],[fr.BORDER_TOP_COLOR],[fr.COLOR],[fr.TEXT_STROKE_COLOR]],A=[[fr.FONT_SIZE],[fr.BORDER_BOTTOM_WIDTH],[fr.BORDER_LEFT_WIDTH],[fr.BORDER_RIGHT_WIDTH],[fr.BORDER_TOP_WIDTH],[fr.LEFT],[fr.TOP],[fr.RIGHT],[fr.BOTTOM],[fr.FLEX_BASIS],[fr.WIDTH],[fr.HEIGHT],[fr.LINE_HEIGHT],[fr.MARGIN_BOTTOM],[fr.MARGIN_LEFT],[fr.MARGIN_TOP],[fr.MARGIN_RIGHT],[fr.PADDING_TOP],[fr.PADDING_RIGHT],[fr.PADDING_BOTTOM],[fr.PADDING_LEFT],[fr.STROKE_WIDTH],[fr.STROKE_MITERLIMIT],[fr.LETTER_SPACING],[fr.PERSPECTIVE],[fr.TEXT_STROKE_WIDTH]],Y=[[fr.BACKGROUND_IMAGE],[fr.FILL],[fr.STROKE]],ft=[[fr.BORDER_TOP_LEFT_RADIUS],[fr.BORDER_TOP_RIGHT_RADIUS],[fr.BORDER_BOTTOM_RIGHT_RADIUS],[fr.BORDER_BOTTOM_LEFT_RADIUS]],dr={};y.forEach(function(t){dr[t]=!0});var pr={};A.forEach(function(t){pr[t]=!0});var gr={};ft.forEach(function(t){gr[t]=!0});var vr={};Y.forEach(function(t){vr[t]=!0});var $t=[[fr.TRANSLATE_X],[fr.TRANSLATE_Y],[fr.TRANSLATE_Z],[fr.SKEW_X],[fr.SKEW_Y],[fr.SCALE_X],[fr.SCALE_Y],[fr.SCALE_Z],[fr.ROTATE_X],[fr.ROTATE_Y],[fr.ROTATE_Z]],mr={};$t.forEach(function(t){mr[t]=!0});var Zt={KEY_COLOR:y,KEY_EXPAND:$t,KEY_GRADIENT:Y,KEY_LENGTH:A,KEY_RADIUS:ft,COLOR_HASH:dr,EXPAND_HASH:mr,GRADIENT_HASH:vr,LENGTH_HASH:pr,RADIUS_HASH:gr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},yr=lr.DOM,Er=lr.GEOM,xr=S.INHERIT,qt=m.STYLE_KEY,br={},Tr=[],Ar=o({},qt.POINTER_EVENTS,!0),Mr=(o(Jt={},qt.TRANSFORM,!0),o(Jt,qt.TRANSLATE_X,!0),o(Jt,qt.TRANSLATE_Y,!0),o(Jt,qt.SKEW_X,!0),o(Jt,qt.SKEW_Y,!0),o(Jt,qt.SCALE_X,!0),o(Jt,qt.SCALE_Y,!0),o(Jt,qt.ROTATE_Z,!0),o(Jt,qt.COLOR,!0),o(Jt,qt.FONT_STYLE,!0),o(Jt,qt.STROKE_WIDTH,!0),o(Jt,qt.FILL,!0),o(Jt,qt.STROKE_DASHARRAY,!0),o(Jt,qt.STROKE_LINECAP,!0),o(Jt,qt.STROKE_LINEJOIN,!0),o(Jt,qt.STROKE_MITERLIMIT,!0),o(Jt,qt.BACKGROUND_COLOR,!0),o(Jt,qt.BACKGROUND_IMAGE,!0),o(Jt,qt.BACKGROUND_POSITION_X,!0),o(Jt,qt.BACKGROUND_POSITION_Y,!0),o(Jt,qt.BACKGROUND_REPEAT,!0),o(Jt,qt.BACKGROUND_SIZE,!0),o(Jt,qt.STROKE,!0),o(Jt,qt.BORDER_BOTTOM_COLOR,!0),o(Jt,qt.BORDER_LEFT_COLOR,!0),o(Jt,qt.BORDER_RIGHT_COLOR,!0),o(Jt,qt.BORDER_TOP_COLOR,!0),o(Jt,qt.BORDER_TOP_LEFT_RADIUS,!0),o(Jt,qt.BORDER_TOP_RIGHT_RADIUS,!0),o(Jt,qt.BORDER_BOTTOM_RIGHT_RADIUS,!0),o(Jt,qt.BORDER_BOTTOM_LEFT_RADIUS,!0),o(Jt,qt.VISIBILITY,!0),o(Jt,qt.OPACITY,!0),o(Jt,qt.Z_INDEX,!0),o(Jt,qt.FILTER,!0),o(Jt,qt.BOX_SHADOW,!0),o(Jt,qt.OVERFLOW,!0),o(Jt,qt.BACKGROUND_CLIP,!0),o(Jt,qt.TEXT_STROKE_WIDTH,!0),o(Jt,qt.TEXT_STROKE_COLOR,!0),o(Jt,qt.TEXT_STROKE_OVER,!0),Jt),Or=(o(sr={},qt.FONT_SIZE,!0),o(sr,qt.FONT_WEIGHT,!0),o(sr,qt.FONT_FAMILY,!0),sr),Rr={GEOM:br,GEOM_KEY_SET:Tr,IGNORE:Ar,REPAINT:Mr,MEASURE:Or,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Rr.addGeom(e,t,r)}):t&&(br.hasOwnProperty(t)||Tr.push(t),(br[t]=br[t]||{})[e]=r||!0)},isIgnore:function(t){return Ar.hasOwnProperty(t)},isGeom:function(t,e){return t&&e&&br.hasOwnProperty(e)&&br[e].hasOwnProperty(t)},isRepaint:function(t,e){return Mr.hasOwnProperty(t)||Rr.isGeom(e,t)},isMeasure:function(t){return Or.hasOwnProperty(t)},isValid:function(t,e){return!!e&&(!!yr.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Er.hasOwnProperty(e))||(br.hasOwnProperty(e)?br[e].hasOwnProperty(t):"translatePath"===e)))}},Sr=Rr.MEASURE_KEY_SET=Object.keys(Or).map(function(t){return parseInt(t)}),Cr=Sr.length;Rr.isMeasureInherit=function(t){if(t)for(var e=0;e<Cr;e++){var r=Sr[e];if(t.hasOwnProperty(r)&&t[r][1]===xr)return!0}return!1},Rr.measureInheritList=function(t){for(var e=[],r=0;r<Cr;r++){var i=Sr[r];t.hasOwnProperty(i)&&t[i][1]===xr&&e.push(i)}return e},Rr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Rr.addGeom("$circle",["r"]),Rr.addGeom("$ellipse",["rx","ry"]),Rr.addGeom("$rect",["rx","ry"]),Rr.addGeom("$sector",["begin","end","edge","closure"]),Rr.addGeom("$polyline",["points","controls","start","end"]),Rr.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var Ir=m.STYLE_KEY,kr=m.STYLE_RV_KEY,wr=m.style2Upper,fr=m.STYLE_KEY,Lr=fr.POSITION,Dr=fr.WIDTH,Nr=fr.HEIGHT,Pr=fr.TRANSLATE_X,Fr=fr.TRANSLATE_Y,Br=fr.TRANSLATE_Z,Yr=fr.SCALE_X,Hr=fr.SCALE_Y,Gr=fr.SCALE_Z,y=fr.SKEW_X,$t=fr.SKEW_Y,Y=fr.ROTATE_X,A=fr.ROTATE_Y,ft=fr.ROTATE_Z,Wr=fr.ROTATE_3D,Ur=fr.PERSPECTIVE,Jt=fr.PERSPECTIVE_ORIGIN,Xr=fr.TRANSFORM,Vr=fr.TRANSFORM_ORIGIN,Kr=fr.BACKGROUND_IMAGE,zr=fr.BACKGROUND_COLOR,jr=fr.BACKGROUND_POSITION_X,$r=fr.BACKGROUND_POSITION_Y,Zr=fr.BACKGROUND_SIZE,qr=fr.OPACITY,Jr=fr.Z_INDEX,Qr=fr.COLOR,ti=fr.FONT_SIZE,ei=fr.FONT_FAMILY,ri=fr.FONT_WEIGHT,ii=fr.FONT_STYLE,ni=fr.LINE_HEIGHT,oi=fr.TEXT_ALIGN,ai=fr.FILTER,si=fr.VISIBILITY,hi=fr.BOX_SHADOW,li=fr.POINTER_EVENTS,ci=fr.FILL,ui=fr.STROKE,_i=fr.STROKE_WIDTH,fi=fr.STROKE_DASHARRAY,di=fr.BORDER_TOP_WIDTH,pi=fr.BORDER_RIGHT_WIDTH,gi=fr.BORDER_BOTTOM_WIDTH,vi=fr.BORDER_LEFT_WIDTH,mi=fr.DISPLAY,yi=fr.FLEX_DIRECTION,Ei=fr.FLEX_GROW,xi=fr.FLEX_SHRINK,bi=fr.FLEX_BASIS,Ti=fr.JUSTIFY_CONTENT,Ai=fr.ALIGN_SELF,Mi=fr.ALIGN_ITEMS,Oi=fr.MATRIX,Ri=fr.LETTER_SPACING,qt=fr.BACKGROUND_CLIP,Si=fr.WHITE_SPACE,sr=fr.TEXT_OVERFLOW,Ci=fr.LINE_CLAMP,Ii=fr.ORDER,ki=fr.FLEX_WRAP,wi=fr.ALIGN_CONTENT,Li=fr.TRANSLATE_PATH,Di=fr.TEXT_STROKE_COLOR,Ni=fr.TEXT_STROKE_WIDTH,Pi=fr.TEXT_STROKE_OVER,Fi=S.AUTO,Bi=S.PX,Yi=S.PERCENT,Hi=S.NUMBER,Gi=S.INHERIT,Wi=S.DEG,Ui=S.RGBA,Xi=S.STRING,Vi=S.REM,Ki=S.VW,zi=S.VH,ji=S.calUnit,$i=ue.isNil,Zi=ue.rgba2int,qi=ue.equalArr,Ji=Rr.MEASURE_KEY_SET,Qi=Rr.isGeom,tn=Rr.GEOM,en=Rr.GEOM_KEY_SET,rn=Zt.COLOR_HASH,nn=Zt.LENGTH_HASH,on=Zt.RADIUS_HASH,an=Zt.GRADIENT_HASH,sn=Zt.EXPAND_HASH,hn=Zt.GRADIENT_TYPE,ln={translateX:Pr,translateY:Fr,translateZ:Br,scaleX:Yr,scaleY:Hr,scaleZ:Gr,skewX:y,skewY:$t,rotateX:Y,rotateY:A,rotateZ:ft,rotate:ft};function cn(t,e){t===Yr||t===Hr||t===Gr?e[1]=Hi:t===Pr||t===Fr||t===Br?e[1]===Hi&&(e[1]=Bi):t===Ur?-1<[Hi,Yi,Wi].indexOf(e[1])&&(e[1]=Bi):e[1]===Hi&&(e[1]=Wi)}function un(t){for(var e=t.split(","),r="arial",i=0,n=e.length;i<n;i++)if(bt.support(e[i])){r=e[i];break}return r}function _n(t){var e=un(t[ei]);return t[ti]*(bt.info[e]||bt.info.arial).lhr}function fn(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Fi){if(r!==Dr)break;e=e.domParent}else{if(i[1]===Bi)return t*i[0];if(i[1]===Yi)t*=.01*i[0],e=e.domParent;else{if(i[1]===Vi)return t*i[0]*e.root.computedStyle[ti];if(i[1]===Ki)return t*i[0]*e.root.width*.01;if(i[1]===zi)return t*i[0]*e.root.height*.01}}}return t}var dn=(o(fr={},Lr,!0),o(fr,mi,!0),o(fr,Ir.BACKGROUND_REPEAT,!0),o(fr,yi,!0),o(fr,Ei,!0),o(fr,xi,!0),o(fr,ki,!0),o(fr,Ti,!0),o(fr,Mi,!0),o(fr,Ai,!0),o(fr,Ir.OVERFLOW,!0),o(fr,Ir.MIX_BLEND_MODE,!0),o(fr,Ir.STROKE_LINECAP,!0),o(fr,Ir.STROKE_LINEJOIN,!0),o(fr,Ir.STROKE_MITERLIMIT,!0),o(fr,Ir.FILL_RULE,!0),o(fr,qr,!0),o(fr,Jr,!0),o(fr,qt,!0),o(fr,sr,!0),o(fr,Ci,!0),fr),pn=(o(y={},Qr,!0),o(y,Di,!0),o(y,zr,!0),o(y,Ir.BORDER_TOP_COLOR,!0),o(y,Ir.BORDER_RIGHT_COLOR,!0),o(y,Ir.BORDER_BOTTOM_COLOR,!0),o(y,Ir.BORDER_LEFT_COLOR,!0),y),gn=(o($t={},Ir.BORDER_TOP_LEFT_RADIUS,!0),o($t,Ir.BORDER_TOP_RIGHT_RADIUS,!0),o($t,Ir.BORDER_BOTTOM_RIGHT_RADIUS,!0),o($t,Ir.BORDER_BOTTOM_LEFT_RADIUS,!0),o($t,Vr,!0),o($t,Jt,!0),$t);var vn={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!ue.isObject(a))return{};var u,e,r,i,n,o,s,h,l,c,_,f={},d=(a=ue.extend({},a)).border;return d&&_r.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){_r.toFull(a,t)}),(d=a.borderWidth)&&_r.toFull(a,"borderWidth"),(d=a.borderColor)&&_r.toFull(a,"borderColor"),(d=a.borderStyle)&&_r.toFull(a,"borderStyle"),(d=a.borderRadius)&&_r.toFull(a,"borderRadius"),(d=a.background)&&_r.toFull(a,"background"),d=a.backgroundPosition,$i(d)||_r.toFull(a,"backgroundPosition"),(d=a.flex)&&_r.toFull(a,"flex"),(d=a.flexFlow)&&_r.toFull(a,"flexFlow"),d=a.margin,$i(d)||_r.toFull(a,"margin"),d=a.padding,$i(d)||_r.toFull(a,"padding"),(d=a.textStroke)&&_r.toFull(a,"textStroke"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){d=a[t],$i(d)||_r.toFull(a,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){var e=a[t];!$i(e)&&a.transform&&Le.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;$i(a[e])&&(a[e]=t)}),void 0!==(d=a.backgroundImage)&&(d?Array.isArray(d)?f[Kr]=d.map(function(t){return t?C.gradient.test(t)?tr.parseGradient(t):C.img.test(t)?C.img.exec(t)[2]:null:null}):C.gradient.test(d)?f[Kr]=[tr.parseGradient(d)]:C.img.test(d)?f[Kr]=[C.img.exec(d)[2]]:f[Kr]=[null]:f[Kr]=[null]),(d=a.backgroundColor)&&((e=/^#[0-9a-f]{3,8}/i.exec(d))&&-1<[4,7,9].indexOf(e[0].length)?f[zr]=[Zi(e[0]),Ui]:(e=/rgba?\s*\(.+\)/i.exec(d),f[zr]=[Zi(e?e[0]:[0,0,0,0]),Ui])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){d=a[t],$i(d)||(t=e?$r:jr,Array.isArray(d)||(d=[d]),f[t]=d.map(function(t){if(/^[-+]?[\d.]/.test(t)){var e=ji(t);return-1<[Hi,Wi].indexOf(e[1])&&(e[1]=Bi),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Yi]}))}),(d=a.backgroundSize)&&(Array.isArray(d)||(d=[d]),f[Zr]=d.map(function(t){if(!t)return[[0,Fi],[0,Fi]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwh%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],i=0;i<2;i++){var n,o=e[i];/^[-+]?[\d.]/.test(o)?(n=ji(o),-1<[Hi,Wi].indexOf(n[1])&&(n[1]=Bi),r.push(n)):"contain"===o||"cover"===o?r.push([o,Xi]):r.push([0,Fi])}return r}return[[0,Fi],[0,Fi]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];$i(e)||(f[Ir[wr(t)]]=[Zi(e),Ui])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){var e=a[t="border"+t+"Radius"];if(!$i(e)){var r=e.toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n=r[i];/^[-+]?[\d.]/.test(n)?(n=ji(n),-1<[Hi,Wi].indexOf(n[1])&&(n[1]=Bi),n[0]<0&&(n[0]=0),r[i]=n):r[i]=[0,Bi]}f[Ir[wr(t)]]=r}}),(d=a.transform)&&(u=f[Xr]=[],(e=(d||"").toString().match(/\w+\(.+?\)/g))&&e.forEach(function(t){var e,r,i,n,o,a,s,h,l=t.indexOf("("),c=t.slice(0,l),t=t.slice(l+1,t.length-1);"matrix"===c?6===(e=6<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,6):e).length&&u.push([Oi,[e[0],e[1],0,0,e[2],e[3],0,0,0,0,1,0,e[4],e[5],0,1]]):"matrix3d"===c?16===(e=16<(e=(e=t.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?e.slice(0,16):e).length&&u.push([Oi,e]):"perspective"===c?((r=ji(t))[0]<0&&(r[0]=0),cn(Ur,r),u.push([Ur,r])):"rotate3d"===c?4===(n=t.toString().split(/\s*,\s*/)).length&&(i=ji(n[3]),cn(Wr,i),n[0]=parseFloat(n[0]),n[1]=parseFloat(n[1]),n[2]=parseFloat(n[2]),n[3]=i,u.push([Wr,n])):ln.hasOwnProperty(c)?(cn(a=ln[c],s=ji(t)),u.push([a,s])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(c)?{translate3d:!0,scale3d:!0}.hasOwnProperty(c)&&(1===(r=t.toString().split(/\s*,\s*/)).length?(r[1]="scale3d"===c?[1]:[0],r[2]="scale3d"===c?[1]:[0]):2===r.length&&(r[2]="scale3d"===c?[1]:[0]),3===r.length&&(i=Ir[wr(c+"X")],n=Ir[wr(c+"Y")],o=Ir[wr(c+"Z")],a=ji(r[0]),s=ji(r[1]),h=ji(r[2]),cn(i,a),cn(n,s),cn(o,h),u.push([i,a]),u.push([n,s]),u.push([o,h]))):(1===(o=t.toString().split(/\s*,\s*/)).length&&(o[1]="scale"===c?o[0]:[0]),2===o.length&&(h=Ir[wr(c+"X")],t=Ir[wr(c+"Y")],c=ji(o[0]),o=ji(o[1]),cn(h,c),cn(t,o),u.push([h,c]),u.push([t,o])))})),d=a.perspective,$i(d)||((r=ji(d))[0]<0&&(r[0]=0),cn(Ur,r),f[Ur]=r),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(d=a[t],!$i(d)){var e=f[Ir[wr(t)]]=[],r=d.toString().match(C.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n,o=r[i];/^[-+]?[\d.]/.test(o)?(n=ji(o),-1<[Hi,Wi].indexOf(n[1])&&(n[1]=Bi),e.push(n)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[o],Yi]),$i(e[i][0])&&(e[i][0]=50))}}else e.push([50,Yi]),e.push([50,Yi])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=a[t];$i(e)||(cn(t=ln[t],e=ji(e)),f[t]=e)}),!(d=a.rotate3d)||4===(i=d.toString().split(/\s*,\s*/)).length&&(r=ji(i[3]),cn(Wr,r),i[0]=parseFloat(i[0]),i[1]=parseFloat(i[1]),i[2]=parseFloat(i[2]),i[3]=r,f[Wr]=i),d=a.opacity,$i(d)||(d=parseFloat(d),isNaN(d)?f[qr]=1:(d=Math.max(d,0),d=Math.min(d,1),f[qr]=d)),d=a.zIndex,$i(d)||(f[Jr]=parseInt(d)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=a[t];$i(r)||("auto"===r?r=[0,Fi]:(r=ji(r),-1<[Hi,Wi].indexOf(r[1])&&(r[1]=Bi)),e=Ir[wr(t)],f[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),d=a.flexBasis,$i(d)||("content"===d?f[bi]=[d,Xi]:/^[\d.]/.test(d)?((i=f[bi]=ji(d))[0]=Math.max(i[0],0),-1<[Hi,Wi].indexOf(i[1])&&(i[1]=Bi)):f[bi]=[0,Fi]),d=a.order,$i(d)||(f[Ii]=parseInt(d)||0),d=a.color,$i(d)||(f[Qr]="inherit"===d?[[],Gi]:[Zi(d),Ui]),d=a.textStrokeColor,$i(d)||(f[Di]="inherit"===d?[[],Gi]:[Zi(d),Ui]),!(d=a.fontSize)&&0!==d||("inherit"===d||(n=ji(d))<0?f[ti]=[0,Gi]:(-1<[Hi,Wi].indexOf(n[1])&&(n[1]=Bi),f[ti]=n)),d=a.textStrokeWidth,$i(d)||("inherit"===d||(o=ji(d))<0?f[Ni]=[0,Gi]:(-1<[Hi,Wi,Yi].indexOf(o[1])&&(o[1]=Bi),f[Ni]=o)),d=a.textStrokeOver,$i(d)||("inherit"===d?f[Pi]=[0,Gi]:(o=d.toString(),f[Pi]=[o="none"!==o&&"fill"!==o?"none":o,Xi])),d=a.fontWeight,$i(d)||(f[ri]="bold"===d?[700,Hi]:"normal"===d?[400,Hi]:"lighter"===d?[200,Hi]:"inherit"===d?[0,Gi]:[Math.max(0,parseInt(d))||400,Hi]),(d=a.fontStyle)&&(f[ii]="inherit"===d?[0,Gi]:[d,Xi]),(d=a.fontFamily)&&(f[ei]="inherit"===d?[0,Gi]:[d.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),Xi]),(d=a.textAlign)&&(f[oi]="inherit"===d?[0,Gi]:[d,Xi]),void 0!==(d=a.lineHeight)&&("inherit"===d?f[ni]=[0,Gi]:"normal"===d?f[ni]=[0,Fi]:/^[\d.]+/i.test(d)?(s=ji(d),-1<[Wi].indexOf(s[1])&&(s[1]=Hi),f[ni]=s):(s=Math.max(0,parseFloat(d))||"normal",f[ni]="normal"===s?[null,Fi]:[s,Hi])),void 0!==(d=a.letterSpacing)&&("inherit"===d?f[Ri]=[0,Gi]:"normal"===d?f[Ri]=[0,Bi]:/^[-+]?[\d.]/.test(d)?(h=ji(d),-1<[Hi,Wi].indexOf(h[1])&&(h[1]=Bi),f[Ri]=h):f[Ri]=[parseFloat(d)||0,Bi]),(d=a.whiteSpace)&&(f[Si]="inherit"===d?[0,Gi]:[d,Xi]),void 0!==(d=a.lineClamp)&&(d=parseInt(d)||0,f[Ci]=Math.max(0,d)),void 0!==(d=a.fill)&&(d?Array.isArray(d)?d.length?f[ci]=d.map(function(t){return t?C.gradient.test(t)?tr.parseGradient(t):Zi(t):"none"}):f[ci]=["none"]:C.gradient.test(d)?f[ci]=[tr.parseGradient(d)]:f[ci]=[Zi(d)]:f[ci]=["none"]),void 0!==(d=a.stroke)&&(d?Array.isArray(d)?d.length?f[ui]=d.map(function(t){return t?C.gradient.test(t)?tr.parseGradient(t):Zi(t):"none"}):f[ui]=["none"]:C.gradient.test(d)?f[ui]=[tr.parseGradient(d)]:f[ui]=[Zi(d)]:f[ui]=["none"]),d=a.strokeWidth,$i(d)||(Array.isArray(d)||(d=[d]),f[_i]=d.map(function(t){t=ji(t);return-1<[Hi,Wi].indexOf(t[1])&&(t[1]=Bi),t[0]=Math.max(t[0],0),t})),d=a.strokeDasharray,$i(d)||(Array.isArray(d)?f[fi]=d.map(function(t){t=t.toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(h=d.toString().match(/[\d.]+/g))?((h=h.map(function(t){return parseFloat(t)})).length%2==1&&h.push(h[h.length-1]),f[fi]=[h]):f[fi]=[[]]),void 0!==(d=a.filter)&&(_=(d||"").toString().match(/\b[\w-]+\s*\(\s*[-+]?[\d.]+\s*[pxremvwhdg%]*\s*\)\s*/gi),l=null,_&&(l=[],_.forEach(function(t){var e=/([\w-]+)\s*\(\s*([-+]?[\d.]+\s*[pxremvwhdg%]*)\s*\)\s*/i.exec(t);e&&(t=e[1].toLowerCase(),e=ji(e[2]),"blur"===t?e[0]<=0||-1<[Wi,Yi].indexOf(e[1])||(e[1]===Hi&&(e[1]=Bi),l.push([t,e])):"hue-rotate"===t?-1!==[Hi,Wi].indexOf(e[1])&&(e[1]=Wi,l.push([t,e])):"saturate"!==t&&"brightness"!==t&&"grayscale"!==t&&"contrast"!==t||-1!==[Hi,Yi].indexOf(e[1])&&(e[0]=Math.max(e[0],0),e[1]=Yi,l.push([t,e])))})),f[ai]=l),(d=a.visibility)&&(f[si]="inherit"===d?[0,Gi]:[d,Xi]),(d=a.pointerEvents)&&(f[li]="inherit"===d?[0,Gi]:[d,Xi]),void 0!==(d=a.boxShadow)&&(c=null,(_=(d||"").match(/([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*\s*)?([-+]?[\d.]+[pxremvwh%]*\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&_.forEach(function(t){var e=/([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*)\s*([-+]?[\d.]+[pxremvwh%]*\s*)?([-+]?[\d.]+[pxremvwh%]*\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){c=c||[];for(var r=[],i=0;i<4;i++){var n=ji(e[i+1]);-1<[Hi,Wi].indexOf(n[1])&&(n[1]=Bi),1<i&&n[0]<0&&(n=0),r.push(n)}r.push(Zi(e[5])),r.push(e[6]||"outset"),c.push(r)}}),f[hi]=c),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){a.hasOwnProperty(t)&&(f[Ir[wr(t)]]=a[t])}),["flexGrow","flexShrink"].forEach(function(t){a.hasOwnProperty(t)&&(f[Ir[wr(t)]]=Math.max(parseFloat(a[t])||0,0))}),d=a.zIndex,$i(d)||(f[Jr]=parseFloat(d)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;a.hasOwnProperty(t)&&(e=a[t],f[Ir[wr(t)]]=Array.isArray(e)?e:[e])}),en.forEach(function(t){a.hasOwnProperty(t)&&(f[t]=a[t])}),f},computeMeasure:function(r,i){var n=r.currentStyle,o=r.computedStyle,t=r.domParent,a=!i&&t.computedStyle;Ji.forEach(function(t){var e=n[t];t===ei?e[1]===Gi?o[t]=un(i?lr.INHERIT[kr[t]]:a[t]):o[t]=un(e[0]):e[1]===Gi?o[t]=i?lr.INHERIT[kr[t]]:a[t]:e[1]===Yi?o[t]=i?lr.INHERIT[kr[t]]:a[t]*e[0]*.01:e[1]===Vi?o[t]=i?lr.INHERIT[kr[t]]:r.root.computedStyle[ti]*e[0]:e[1]===Ki?o[t]=i?lr.INHERIT[kr[t]]:.01*r.root.width*e[0]:e[1]===zi?o[t]=i?lr.INHERIT[kr[t]]:.01*r.root.height*e[0]:o[t]=e[0]})},computeReflow:function(t,e){var r=t.currentStyle,i=t.computedStyle,n=t.domParent,o=t.root,a=o.computedStyle[ti],s=!n,h=n&&n.computedStyle;[di,pi,gi,vi].forEach(function(t){var e=r[t];e[1]===Bi?i[t]=e[0]:e[1]===Vi?i[t]=e[0]*a:e[1]===Ki?i[t]=e[0]*o.width*.01:e[1]===zi?i[t]=e[0]*o.height*.01:i[t]=0}),[Lr,mi,yi,Ti,Mi,Ai,Ei,xi,Ci,Ii,ki,wi].forEach(function(t){i[t]=r[t]});var l=r[oi];if(l[1]===Gi?i[oi]=s?"left":h[oi]:i[oi]=l[0],t=i[ti],(l=r[ni])[1]===Gi)if(s)i[ni]=_n(i);else{for(var c,u=n;u&&(c=u.currentStyle[ni])[1]===Gi;)u=u.domParent;-1<[Fi,Gi].indexOf(c[1])?i[ni]=_n(i):c[1]===Hi?i[ni]=Math.max(c[0],0)*t:i[ni]=h[ni]}else l[1]===Bi?i[ni]=Math.max(l[0],0)||_n(i):l[1]===Yi?i[ni]=Math.max(l[0]*t*.01,0)||_n(i):l[1]===Vi?i[ni]=Math.max(l[0]*a,0)||_n(i):l[1]===Ki?i[ni]=Math.max(l[0]*o.width*.01,0)||_n(i):l[1]===zi?i[ni]=Math.max(l[0]*o.height*.01,0)||_n(i):l[1]===Hi?i[ni]=Math.max(l[0],0)*t||_n(i):i[ni]=_n(i);(l=r[Ri])[1]===Gi?i[Ri]=s?0:h[Ri]:l[1]===Yi?i[Ri]=.01*t*l[0]:l[1]===Vi?i[Ri]=a*l[0]:l[1]===Ki?i[Ri]=.01*o.width*l[0]:l[1]===zi?i[Ri]=.01*o.height*l[0]:i[Ri]=l[0],(l=r[Si])[1]===Gi?i[Si]=s?"normal":h[Si]:i[Si]=l[0]},setFontStyle:function(t){var e=t[ti];return(t[ii]||"normal")+" "+(t[ri]||"400")+" "+e+"px/"+e+"px "+(t[ei]||"arial")},getFontFamily:un,getBaseLine:function(t){var e=t[ti],r=un(t[ei]),i=e*(bt.info[r]||bt.info.arial).lhr;return.5*(t[ni]-i)+e*(bt.info[r]||bt.info.arial).blr},calRelative:function(t,e,r,i,n){return r[1]===Fi?r=0:-1<[Bi,Hi].indexOf(r[1])?r=r[0]:r[1]===Yi?r=fn(r[0],i,n?Dr:Nr):r[1]===Vi?r=r[0]*i.root.computedStyle[ti]:r[1]===Ki?r=r[0]*i.root.width*.01:r[1]===zi&&(r=r[0]*i.root.height*.01),r},calAbsolute:function(t,e,r,i,n){return r[1]===Fi?r=0:-1<[Bi,Hi,Wi,Ui,Xi].indexOf(r[1])?r=r[0]:r[1]===Yi?r=r[0]*i*.01:r[1]===Vi?r=r[0]*n.computedStyle[ti]:r[1]===Ki?r=r[0]*n.width*.01:r[1]===zi&&(r=r[0]*n.height*.01),r},equalStyle:function(t,e,r,i){if(!e||!r)return e===r;if(t===Xr){if(e.length!==r.length)return!1;for(var n=0,o=e.length;n<o;n++){var a=e[n],s=r[n];if(a[0]!==s[0])return!1;if(!qi(a[1],s[1]))return!1}return!0}if(t===ai){if(e.length!==r.length)return!1;for(var h=0,l=e.length;h<l;h++)if(!qi(e[h],r[h]))return!1}if(t===Zr){if(e.length!==r.length)return!1;for(var c=0,u=e.length;c<u;c++){var _=e[c],f=r[c];if(_[0][0]!==f[0][0]||_[0][1]!==f[0][1]||_[1][0]!==f[1][0]||_[1][1]!==f[1][1])return!1}return!0}if(t===Vr||on.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===jr||t===$r||nn.hasOwnProperty(t)||sn.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===hi)return qi(e,r);if(rn.hasOwnProperty(t))return e[1]===r[1]&&qi(e[0],r[0]);if(an.hasOwnProperty(t)&&e.k===r.k&&hn.hasOwnProperty(e.k)){var d=e.v,p=r.v;if(e.d!==r.d||d.length!==p.length)return!1;for(var g=0,v=d.length;g<v;g++){var m=d[g],y=p[g];if(m.length!==y.length)return!1;for(var E=0;E<4;E++)if(m[0][E]!==y[0][E])return!1;if(1<m.length&&(m[1][0]!==y[1][0]||m[1][1]!==y[1][1]))return!1}return!0}return Qi(i.tagName,t)&&(i.isMulti||Array.isArray(e)&&Array.isArray(r))?qi(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[Lr])||"absolute"===t},cloneStyle:function(t,e){for(var r={},i=0,n=(e=e||Object.keys(t).map(function(t){return t=!tn.hasOwnProperty(t)?parseInt(t):t})).length;i<n;i++){var o=e[i],a=t[o];if(o===Kr)r[o]=a.map(function(t){return t&&t.k?ue.clone(t):t});else if(o===ci||o===ui)r[o]=a.map(function(t){return t&&t.k?ue.clone(t):t.slice(0)});else if(o===Xr||o===ai){if(a){for(var s=a.slice(0),h=0,l=s.length;h<l;h++)s[h]=s[h].slice(0),s[h][1]=s[h][1].slice(0);r[o]=s}}else if(o===hi)a&&(a=a.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),r[o]=a);else if(o===Li)a&&(r[o]=a.map(function(t){return t.slice(0)}));else if(dn.hasOwnProperty(o))r[o]=a;else if(tn.hasOwnProperty(o))r[o]=ue.clone(a);else if(a){var c=r[o]=a.slice(0);if(o===jr||o===$r)for(var u=0,_=c.length;u<_;u++)c[u]=c[u].slice(0);else if(o===Zr)for(var f=0,d=c.length;f<d;f++)c[f]=c[f].slice(0),c[f][0]=c[f][0].slice(0),c[f][1]=c[f][1].slice(0);else if(pn.hasOwnProperty(o))c[0]=c[0].slice(0);else if(gn.hasOwnProperty(o))c[0]=c[0].slice(0),c[1]=c[1].slice(0);else if(o===Xr)for(var p=0,g=c.length;p<g;p++)c[p]=c[p].slice(0);else o===Wr&&(c[3]=c[3].slice(0))}}return r}},Y=m.STYLE_KEY,mn=Y.COLOR,yn=Y.FONT_WEIGHT,En=Y.FONT_FAMILY,xn=Y.FONT_SIZE,bn=Y.FONT_STYLE,Tn=Y.LETTER_SPACING,An=Y.TEXT_STROKE_COLOR,Mn=Y.TEXT_STROKE_WIDTH,On=Y.TEXT_STROKE_OVER,Rn=function(){function h(t,e,r,i,n,o,a,s){_(this,h),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,this.__width=n,this.__height=o,this.__content=a,this.__wList=s,this.__virtualDom={}}return f(h,[{key:"render",value:function(t,e,r,i,n,o){var a=this.content,s=this.x,h=this.y,l=this.parent,c=this.wList,u=this.width,_=l.ox,l=l.oy;h+=vn.getBaseLine(r),h+=l+o,this.__endX=(s+=_+n)+u,this.__endY=h;var f=r[Tn],d=r[Mn],p=r[An],g=0,v=a.length;if(t===rt.CANVAS||t===rt.WEBGL){var m="fill"===r[On];if(f)for(;g<v;g++)m&&e.fillText(a.charAt(g),s,h),d&&(0<p[3]||3===p.length)&&e.strokeText(a.charAt(g),s,h),m||e.fillText(a.charAt(g),s,h),s+=c[g]+f;else m&&e.fillText(a,s,h),d&&(0<p[3]||3===p.length)&&e.strokeText(a,s,h),m||e.fillText(a,s,h)}else t===rt.SVG&&(t=[["x",s],["y",h],["fill",i[mn]],["font-family",r[En]],["font-weight",r[yn]],["font-style",r[bn]],["font-size",r[xn]+"px"]],d&&(0<p[3]||3===p.length)&&(t.push(["stroke",i[An]]),t.push(["stroke-width",r[Mn]])),f&&t.push(["letter-spacing",f]),this.__virtualDom={type:"item",tagName:"text",props:t,content:ue.encodeHtml(a)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return this.parent.baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"wList",get:function(){return this.__wList}}]),h}(),Sn=[8,16,32,64,128,256,512,1024,2048,4096,8192],Cn=[128,64,32,16,8,4,2,1,1,1,1],In=Sn[Sn.length-1],kn={},wn=0,Ln=function(){function u(t,e){_(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;e=this.__canvas=Le.getCacheCanvas(t,t,null,e);e&&(this.__offscreen=e),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=wn++,this.__update=!1,this.time=0}return f(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var n=r*t+i;if(e[n])return e[n]=0,this.__free--,n}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(In<t)){for(var e=Sn[0],r=Cn[0],i=0,n=Sn.length;i<n&&(e=Sn[i],r=Cn[i],!(Sn[i]>=t));i++);for(var o,a=kn[e]=kn[e]||[],s=0,h=a.length;s<h;s++){var l=a[s];if(l.free){o=l;break}}if(!o){if(!(o=new u(e,r)).offscreen)return void Le.error("Can not create off-screen for page");a.push(o)}var c=o.add();return{page:o,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:Sn,NUMBER:Cn}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(Sn=t.SIZE,Cn=t.NUMBER,In=Sn[Sn.length-1])}},{key:"MAX",get:function(){return In}},{key:"genUuid",value:function(){return wn++}}]),u}();function Dn(t,e,r,i){t=r-t,i-=e,e=Math.atan(Math.abs(i)/Math.abs(t));return t<0&&0<=i?Math.PI-e:t<0&&i<0?e-Math.PI:0<=t&&0<=i?e:-e}function Nn(t){var e=Math.sin(t),r=Math.cos(t),t=te.identity();return t[0]=t[5]=r,t[1]=e,t[4]=-e,t}function Pn(t,e){var r=Qt(t,6),i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],h=r[5],l=Qt(e,6),c=l[0],u=l[1],t=l[2],r=l[3],e=l[4],n=(o-i)*(h-n)-(s-i)*(a-n),u=(t-c)*(l[5]-u)-(e-c)*(r-u);return 0<n&&u<0||n<0&&0<u}A={exchangeOrder:function(t,e){var r,i,n,o=(n=Qt(l=t,6),o=n[0],c=n[1],a=n[2],s=n[3],h=n[4],t=n[5],l=[0,1,2],a<o&&a<h?(o=(n=[a,s,o,c])[0],c=n[1],a=n[2],s=n[3],l[0]=1,l[1]=0):h<a&&h<o&&(o=(r=[h,t,o,c])[0],c=r[1],h=r[2],t=r[3],l[0]=2,l[2]=0),o===a?s<c&&(o=(r=[a,s,o,c])[0],c=r[1],a=r[2],s=r[3],r=l[0],l[0]=l[1],l[1]=r):o===h&&t<c&&(o=(i=[h,t,o,c])[0],c=i[1],h=i[2],t=i[3],i=l[0],l[0]=l[2],l[2]=i),(a-o)*(t-c)-(h-o)*(s-c)<0&&(a=(i=[h,t,a,s])[0],s=i[1],h=i[2],t=i[3],i=l[1],l[1]=l[2],l[2]=i),[o,c,a,s,h,t,l]),a=(c=Qt(o,7))[0],s=c[1],h=c[2],t=c[3],l=c[4],o=c[5],c=Qt(function(t,e){for(var r=[],i=0,n=e.length;i<n;i++){var o=e[i];r.push(t[2*o]),r.push(t[2*o+1])}return r}(e,c[6]),6);return[[a,s,h,t,l,o],[c[0],c[1],c[2],c[3],c[4],c[5]]]},isOverflow:Pn,transform:function(t,e){var r,i=(E=Qt(t,6))[0],n=E[1],o=E[2],a=E[3],s=E[4],h=E[5],l=Qt(e,6),c=l[0],u=l[1],_=l[2],f=l[3],d=l[4],p=l[5],g=Pn(t,e),v=te.identity();v[12]=-i,v[13]=-n;var m=Dn(i,n,o,a);0!==m&&(r=Nn(-m),v=te.multiply(r,v));var y=et.pointsDistance(i,n,o,a),E=et.pointsDistance(c,u,_,f);return(l=te.identity())[12]=-c,l[13]=-u,t=m=Dn(c,u,_,f),0!==m&&(r=Nn(-m),l=te.multiply(r,l)),e=Math.abs(te.calPoint([s,h],v)[1]),m=Math.abs(te.calPoint([d,p],l)[1]),y===E&&e===m||(r=te.identity(),y!==E&&(r[0]=E/y),e!==m&&(r[5]=m/e),v=te.multiply(r,v)),l=v,i=Qt(te.calPoint([i,n],l),2),n=i[0],i=i[1],o=Qt(te.calPoint([o,a],l),2),a=o[0],o=o[1],s=Qt(te.calPoint([s,h],l),2),h=s[0],l=s[1],s=et.pointsDistance(n,i,a,o),i=et.pointsDistance(n,i,h,l),l=et.pointsDistance(h,l,a,o),a=et.pointsDistance(c,u,_,f),o=et.pointsDistance(c,u,d,p),f=et.pointsDistance(d,p,_,f),i=et.angleBySide(l,s,i),o=et.angleBySide(f,a,o),i!==o&&((r=te.identity())[4]=Math.tan(i-.5*Math.PI)+Math.tan(.5*Math.PI-o),v=te.multiply(r,v)),g&&(v[1]=-v[1],v[5]=-v[5],v[13]=-v[13]),(r=0!==t?Nn(t):te.identity())[12]=c,r[13]=u,te.multiply(r,v)}};function Fn(t,e){return e<t?1:t<e?-1:0}var Bn=function(t,e){void 0===e&&(e=!1),this._compare=t=void 0===t?Fn:t,this._root=null,this._size=0,this._noDuplicates=!!e},ft={size:{configurable:!0}};Bn.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},Bn.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},Bn.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},Bn.prototype.splay=function(t){for(var e,r,i,n;t.parent;)(r=(e=t.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=t:n.right=t,t.parent=n):(t.parent=null,this._root=t),i=t.left,n=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(i?(r.right=i).parent=r:r.right=null,(t.left=r).parent=t)),n?(e.left=n).parent=e:e.left=null,(t.right=e).parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(n?(r.left=n).parent=r:r.left=null,(t.right=r).parent=t)),i?(e.right=i).parent=e:e.right=null,(t.left=e).parent=t)},Bn.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},Bn.prototype.minNode=function(t){if(t=void 0===t?this._root:t)for(;t.left;)t=t.left;return t},Bn.prototype.maxNode=function(t){if(t=void 0===t?this._root:t)for(;t.right;)t=t.right;return t},Bn.prototype.insert=function(t,e){var r=this._root,i=null,n=this._compare;if(this._noDuplicates)for(;r;){if(0===n((i=r).key,t))return;r=n(r.key,t)<0?r.right:r.left}else for(;r;)r=n((i=r).key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:i},i?n(i.key,r.key)<0?i.right=r:i.left=r:this._root=r,this.splay(r),this._size++,r},Bn.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var i=r(e.key,t);if(i<0)e=e.right;else{if(!(0<i))return e;e=e.left}}return null},Bn.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var i=r(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},Bn.prototype.remove=function(t){var e=this.find(t);return!!e&&(this.splay(e),e.left?e.right?((t=this.minNode(e.right)).parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t):this.replace(e,e.left):this.replace(e,e.right),this._size--,!0)},Bn.prototype.removeNode=function(t){return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0);var e},Bn.prototype.erase=function(t){var e,r=this.find(t);r&&(this.splay(r),e=r.left,t=r.right,r=null,e&&(e.parent=null,r=this.maxNode(e),this.splay(r),this._root=r),t&&(e?r.right=t:this._root=t,t.parent=r),this._size--)},Bn.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},Bn.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)e=(t=e).parent;return e},Bn.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)e=(t=e).parent;return e},Bn.prototype.forEach=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)e?(r.push(e),e=e.left):0<r.length?(t(e=r.pop(),n++),e=e.right):i=!0;return this},Bn.prototype.range=function(t,e,r,i){for(var n=[],o=this._compare,a=this._root;0!==n.length||a;)if(a)n.push(a),a=a.left;else{if(0<o((a=n.pop()).key,e))break;if(0<=o(a.key,t)&&r.call(i,a))return this;a=a.right}return this},Bn.prototype.keys=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.key),t=t.right):i=!0;return r},Bn.prototype.values=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.data),t=t.right):i=!0;return r},Bn.prototype.at=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},Bn.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return r&&function t(e,r,i,n,o){if(n<=i)return;var a=e[i+n>>1];var s=i-1;var h=n+1;for(;;){for(;o(e[++s],a)<0;);for(;0<o(e[--h],a););if(h<=s)break;var l=e[s];e[s]=e[h],e[h]=l,l=r[s],r[s]=r[h],r[h]=l}t(e,r,i,h,o);t(e,r,h+1,n,o)}(t,e,0,i-1,this._compare),this._root=function t(e,r,i,n,o){var a=o-n;if(0<a){var s=n+Math.floor(a/2),h=r[s],a=i[s],e={key:h,data:a,parent:e};return e.left=t(e,r,i,n,s),e.right=t(e,r,i,s+1,o),e}return null}(null,t,e,0,i),this._size=i,this},Bn.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},Bn.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},Bn.prototype.isEmpty=function(){return null===this._root},ft.size.get=function(){return this._size},Bn.createTree=function(t,e,r,i,n){return new Bn(r,n).load(t,e,i)},Object.defineProperties(Bn.prototype,ft);var Yn=0,Hn=1,Gn=2,Wn=3,Un=0,Xn=1,Vn=2,Kn=3;function zn(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!jn(e,r)||e.isVertical()?e.prevInResult:e));e=jn(t,r);t.resultTransition=e?function(t,e){var r,i=!t.inOut,n=!t.otherInOut;switch(e){case Un:r=i&&n;break;case Xn:r=i||n;break;case Kn:r=i^n;break;case Vn:r=t.isSubject?i&&!n:n&&!i}return r?1:-1}(t,r):0}function jn(t,e){switch(t.type){case Yn:switch(e){case Un:return!t.otherInOut;case Xn:return t.otherInOut;case Vn:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case Kn:return!0}break;case Gn:return e===Un||e===Xn;case Wn:return e===Vn;case Hn:return!1}return!1}var $n=function(t,e,r,i,n){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=i,this.type=n||Yn,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},qt={inResult:{configurable:!0}};function Zn(t,e){return t[0]===e[0]&&t[1]===e[1]}$n.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?0<(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]):0<(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])},$n.prototype.isAbove=function(t){return!this.isBelow(t)},$n.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},qt.inResult.get=function(){return 0!==this.resultTransition},$n.prototype.clone=function(){var t=new $n(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties($n.prototype,qt);var sr=11102230246251565e-32,qn=134217729,Jn=(3+8*sr)*sr;function Qn(t,e,r,i,n){var o,a,s,h,l=e[0],c=i[0],u=0,_=0;l<c==-l<c?(o=l,l=e[++u]):(o=c,c=i[++_]);var f=0;if(u<t&&_<r)for(l<c==-l<c?(s=o-((a=l+o)-l),l=e[++u]):(s=o-((a=c+o)-c),c=i[++_]),o=a,0!==s&&(n[f++]=s);u<t&&_<r;)l<c==-l<c?(s=o-((a=o+l)-(h=a-o))+(l-h),l=e[++u]):(s=o-((a=o+c)-(h=a-o))+(c-h),c=i[++_]),o=a,0!==s&&(n[f++]=s);for(;u<t;)s=o-((a=o+l)-(h=a-o))+(l-h),l=e[++u],o=a,0!==s&&(n[f++]=s);for(;_<r;)s=o-((a=o+c)-(h=a-o))+(c-h),c=i[++_],o=a,0!==s&&(n[f++]=s);return 0===o&&0!==f||(n[f++]=o),f}function to(t){return new Float64Array(t)}var eo=(3+16*sr)*sr,ro=(2+12*sr)*sr,io=(9+64*sr)*sr*sr,no=to(4),oo=to(8),ao=to(12),so=to(16),ho=to(4);function lo(t,e,r,i,n,o,a){var s,h,l,c,u,_,f,d,p,g,v=t-n,m=r-n,y=e-o,E=i-o,x=v*E,b=qn*v,T=b-(b-v),A=v-T;no[0]=(f=A*(l=E-(h=(b=qn*E)-(b-E)))-(x-T*h-A*h-T*l))-((c=f-(p=(A=y-(T=(b=qn*y)-(b-y)))*(l=m-(h=(b=qn*m)-(b-m)))-((d=y*m)-T*h-A*h-T*l)))+(s=f-c))+(s-p),no[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),no[2]=u-((g=u+c)-(s=g-u))+(c-s),no[3]=g;var M=function(t,e){for(var r=e[0],i=1;i<t;i++)r+=e[i];return r}(4,no),O=ro*a;if(O<=M||O<=-M)return M;if(t=t-(v+(s=t-v))+(s-n),n=r-(m+(s=r-m))+(s-n),e=e-(y+(s=e-y))+(s-o),o=i-(E+(s=i-E))+(s-o),0==t&&0==e&&0==n&&0==o)return M;if((O=io*a+Jn*Math.abs(M))<=(M+=v*o+E*t-(y*n+m*e))||O<=-M)return M;ho[0]=(f=(A=t-(T=(b=qn*t)-(b-t)))*(l=E-(h=(b=qn*E)-(b-E)))-((x=t*E)-T*h-A*h-T*l))-((c=f-(p=(A=e-(T=(b=qn*e)-(b-e)))*(l=m-(h=(b=qn*m)-(b-m)))-((d=e*m)-T*h-A*h-T*l)))+(s=f-c))+(s-p),ho[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),ho[2]=u-((g=u+c)-(s=g-u))+(c-s),ho[3]=g;m=Qn(4,no,4,ho,oo);ho[0]=(f=(A=v-(T=(b=qn*v)-(b-v)))*(l=o-(h=(b=qn*o)-(b-o)))-((x=v*o)-T*h-A*h-T*l))-((c=f-(p=(A=y-(T=(b=qn*y)-(b-y)))*(l=n-(h=(b=qn*n)-(b-n)))-((d=y*n)-T*h-A*h-T*l)))+(s=f-c))+(s-p),ho[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),ho[2]=u-((g=u+c)-(s=g-u))+(c-s),ho[3]=g;m=Qn(m,oo,4,ho,ao);ho[0]=(f=(A=t-(T=(b=qn*t)-(b-t)))*(l=o-(h=(b=qn*o)-(b-o)))-((x=t*o)-T*h-A*h-T*l))-((c=f-(p=(A=e-(T=(b=qn*e)-(b-e)))*(l=n-(h=(b=qn*n)-(b-n)))-((d=e*n)-T*h-A*h-T*l)))+(s=f-c))+(s-p),ho[1]=(_=x-((u=x+c)-(s=u-x))+(c-s))-((c=_-d)+(s=_-c))+(s-d),ho[2]=u-((g=u+c)-(s=g-u))+(c-s),ho[3]=g;m=Qn(m,ao,4,ho,so);return so[m-1]}function co(t,e,r){var i,n,o,a,s,h,e=(i=t[0],n=t[1],o=e[0],a=e[1],s=r[0],h=r[1],r=(t=(n-h)*(o-s))-(e=(i-s)*(a-h)),0==t||0==e||0<t!=0<e?r:(e=Math.abs(t+e),Math.abs(r)>=eo*e?r:-lo(i,n,o,a,s,h,e)));return 0<e?-1:e<0?1:0}function uo(t,e){var r=t.point,i=e.point;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:(e=e,r=r,(t=t).left===e.left?0===co(r,t.otherEvent.point,e.otherEvent.point)?!t.isSubject&&e.isSubject?1:-1:t.isBelow(e.otherEvent.point)?-1:1:t.left?1:-1)}function _o(t,e,r){var i=new $n(e,!1,t,t.isSubject),e=new $n(e,!0,t.otherEvent,t.isSubject);return Zn(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=e.contourId=t.contourId,0<uo(e,t.otherEvent)&&(t.otherEvent.left=!0,e.left=!1),t.otherEvent.otherEvent=e,t.otherEvent=i,r.push(e),r.push(i),r}function fo(t,e){return t[0]*e[1]-t[1]*e[0]}function po(t,e){return t[0]*e[0]+t[1]*e[1]}function go(t,e,r){var i=function(t,e,r,i,n){var o=[e[0]-t[0],e[1]-t[1]],a=[i[0]-r[0],i[1]-r[1]];function s(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var h=[r[0]-t[0],r[1]-t[1]],l=fo(o,a),c=po(o,o);if(0<l*l){e=fo(h,a)/l;if(e<0||1<e)return null;i=fo(h,o)/l;return i<0||1<i?null:0==e||1==e?n?null:[s(t,e,o)]:0==i||1==i?n?null:[s(r,i,a)]:[s(t,e,o)]}return 0<(l=fo(h,o))*l?null:(h=po(o,h)/c,a=h+po(o,a)/c,c=Math.min(h,a),a=Math.max(h,a),c<=1&&0<=a?1===c?n?null:[s(t,0<c?c:0,o)]:0===a?n?null:[s(t,a<1?a:1,o)]:n&&0===c&&1===a?null:[s(t,0<c?c:0,o),s(t,a<1?a:1,o)]:null)}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),n=i?i.length:0;if(0===n)return 0;if(1===n&&(Zn(t.point,e.point)||Zn(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===n&&t.isSubject===e.isSubject)return 0;if(1===n)return Zn(t.point,i[0])||Zn(t.otherEvent.point,i[0])||_o(t,i[0],r),Zn(e.point,i[0])||Zn(e.otherEvent.point,i[0])||_o(e,i[0],r),1;var o=[],n=!1,i=!1;return Zn(t.point,e.point)?n=!0:1===uo(t,e)?o.push(e,t):o.push(t,e),Zn(t.otherEvent.point,e.otherEvent.point)?i=!0:1===uo(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),n&&i||n?(e.type=Hn,t.type=e.inOut===t.inOut?Gn:Wn,n&&!i&&_o(o[1].otherEvent,o[0].point,r),2):(i?_o(o[0],o[1].point,r):o[0]!==o[3].otherEvent?(_o(o[0],o[1].point,r),_o(o[1],o[2].point,r)):(_o(o[0],o[1].point,r),_o(o[3].otherEvent,o[2].point,r)),3)}function vo(t,e){if(t===e)return 0;if(0!==co(t.point,t.otherEvent.point,e.point)||0!==co(t.point,t.otherEvent.point,e.otherEvent.point))return Zn(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===uo(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,i=e.point;return r[0]===i[0]&&r[1]===i[1]?(r=t.otherEvent.point,i=e.otherEvent.point,r[0]===i[0]&&r[1]===i[1]?0:t.contourId>e.contourId?1:-1):1===uo(t,e)?1:-1}var mo=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function yo(t){for(var c=function(t){for(var e,r,i=[],n=0,o=t.length;n<o;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var a=!1;!a;)for(a=!0,n=0,o=i.length;n<o;n++)n+1<o&&1===uo(i[n],i[n+1])&&(r=i[n],i[n]=i[n+1],i[n+1]=r,a=!1);for(n=0,o=i.length;n<o;n++)(e=i[n]).otherPos=n;for(n=0,o=i.length;n<o;n++)(e=i[n]).left||(r=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=r);return i}(t),u={},_=[],e=function(){if(!u[f]){var t,e,r,i,n=_.length,o=(t=c[f],e=_,r=n,l=new mo,null!=t.prevInResult?(t=(i=t.prevInResult).outputContourId,0<i.resultTransition?null!=(i=e[t]).holeOf?(e[i=i.holeOf].holeIds.push(r),l.holeOf=i,l.depth=e[t].depth):(e[t].holeIds.push(r),l.holeOf=t,l.depth=e[t].depth+1):(l.holeOf=null,l.depth=e[t].depth)):(l.holeOf=null,l.depth=0),l),a=function(t){u[t]=!0,c[t].outputContourId=n},s=f,h=f,l=c[f].point;for(o.points.push(l);a(s),a(s=c[s].otherPos),o.points.push(c[s].point),(s=function(t,e,r,i){var n,o=t+1,a=e[t].point,s=e.length;for(o<s&&(n=e[o].point);o<s&&n[0]===a[0]&&n[1]===a[1];){if(!r[o])return o;n=e[++o].point}for(o=t-1;r[o]&&i<o;)o--;return o}(s,c,u,h))!=h;);_.push(o)}},f=0,r=c.length;f<r;f++)e();return _}mo.prototype.isExterior=function(){return null==this.holeOf};var Eo=xo,fr=xo;function xo(t,e){if(!(this instanceof xo))return new xo(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||bo,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this._down(r)}function bo(t,e){return t<e?-1:e<t?1:0}xo.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];0<t;){var n=t-1>>1,o=e[n];if(0<=r(i,o))break;e[t]=o,t=n}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var o=1+(t<<1),a=o+1,s=e[o];if(a<this.length&&r(e[a],s)<0&&(s=e[o=a]),0<=r(s,n))break;e[t]=s,t=o}e[t]=n}},Eo.default=fr;var To=Math.max,Ao=Math.min,Mo=0;function Oo(t,e,r,i,n,o){for(var a=0,s=t.length-1;a<s;a++){var h=t[a],l=t[a+1],c=new $n(h,!1,void 0,e),u=new $n(l,!1,c,e);c.otherEvent=u,h[0]===l[0]&&h[1]===l[1]||(c.contourId=u.contourId=r,o||(c.isExteriorRing=!1,u.isExteriorRing=!1),0<uo(c,u)?u.left=!0:c.left=!0,l=h[0],h=h[1],n[0]=Ao(n[0],l),n[1]=Ao(n[1],h),n[2]=To(n[2],l),n[3]=To(n[3],h),i.push(c),i.push(u))}}var Ro=[];function So(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var i=(o=e,n=r,s=null,(a=t).length*o.length==0&&(n===Un?s=Ro:n===Vn?s=a:n!==Xn&&n!==Kn||(s=0===a.length?o:a)),s);if(i)return i===Ro?null:i;var n,o,a,s,h=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],c=function(t,e,r,i,n){for(var o,a,s,h,l=new Eo(null,uo),c=0,u=t.length;c<u;c++)for(s=0,h=(o=t[c]).length;s<h;s++)(a=0===s)&&Mo++,Oo(o[s],!0,Mo,l,r,a);for(c=0,u=e.length;c<u;c++)for(s=0,h=(o=e[c]).length;s<h;s++)a=0===s,(a=n===Vn?!1:a)&&Mo++,Oo(o[s],!1,Mo,l,i,a);return l}(t,e,h,l,r);if(n=t,o=e,a=r,s=null,((t=h)[0]>(e=l)[2]||e[0]>t[2]||t[1]>e[3]||e[1]>t[3])&&(a===Un?s=Ro:a===Vn?s=n:a!==Xn&&a!==Kn||(s=n.concat(o))),i=s)return i===Ro?null:i;for(var u=yo(function(t,e,r,i){for(var n=new Bn(vo),o=[],a=Math.min(e[2],r[2]);0!==t.length;){var s,h,l,c,u,_=t.pop();if(o.push(_),i===Un&&_.point[0]>a||i===Vn&&_.point[0]>e[2])break;_.left?(l=h=n.insert(_),h=h!==(s=n.minNode())?n.prev(h):null,l=n.next(l),zn(_,c=h?h.key:null,i),l&&2===go(_,l.key,t)&&(zn(_,c,i),zn(_,l.key,i)),h&&2===go(h.key,_,t)&&(zn(c,(u=(u=h)!==s?n.prev(u):null)?u.key:null,i),zn(_,c,i))):(_=_.otherEvent,l=h=n.find(_),h&&l&&(h=h!==s?n.prev(h):null,l=n.next(l),n.remove(_),l&&h&&go(h.key,l.key,t)))}return o}(c,h,l,r)),_=[],f=0;f<u.length;f++){var d=u[f];if(d.isExterior()){for(var p=[d.points],g=0;g<d.holeIds.length;g++){var v=d.holeIds[g];p.push(u[v].points)}_.push(p)}}return _}function Co(t,e){return So(t,e,Xn)}function Io(t,e){return So(t,e,Vn)}function ko(t,e){return So(t,e,Kn)}function wo(t,e){return So(t,e,Un)}var y={matrix:te,tar:A,vector:w,geom:et,booleanOperations:{union:Co,diff:Io,intersection:wo,xor:ko}},Jt=m.STYLE_KEY,Lo=Jt.TRANSLATE_X,Do=Jt.TRANSLATE_Y,No=Jt.TRANSLATE_Z,Po=Jt.SCALE_X,Fo=Jt.SCALE_Y,Bo=Jt.SCALE_Z,Yo=Jt.SKEW_X,Ho=Jt.SKEW_Y,Go=Jt.ROTATE_X,Wo=Jt.ROTATE_Y,Uo=Jt.ROTATE_Z,Xo=Jt.ROTATE_3D,Vo=Jt.PERSPECTIVE,Ko=Jt.MATRIX,zo=Jt.FONT_SIZE,jo=S.PX,$o=S.PERCENT,Zo=S.REM,qo=S.VW,Jo=S.VH,$t=y.matrix,Qo=$t.identity,ta=$t.multiply,ea=$t.isE,ra=y.geom.d2r;function ia(t,e,r,i){var n,o,a,s,t=(n=e,o=r,a=i,s=[],t.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];s.push([t,function(t,e,r,i,n){if(t===Lo||t===No){if(e[1]===$o)return e[0]*r*.01;if(e[1]===Zo)return e[0]*n.computedStyle[zo];if(e[1]===qo)return e[0]*n.width*.01;if(e[1]===Jo)return e[0]*n.height*.01}else if(t===Do){if(e[1]===$o)return e[0]*i*.01;if(e[1]===Zo)return e[0]*n.computedStyle[zo];if(e[1]===qo)return e[0]*n.width*.01;if(e[1]===Jo)return e[0]*n.height*.01}else{if(t===Ko)return e;if(t===Xo)return e}return e[0]}(t,e,n,o,a)])}),s),g=Qo();return t.forEach(function(t){var e,r,i,n,o,a,s,h,l,c,u,_=Qt(t,2),f=_[0],d=_[1],p=Qo();e=p,i=d,(r=f)===Lo?e[12]=i:r===Do?e[13]=i:r===No?e[14]=i:r===Po?e[0]=i:r===Fo?e[5]=i:r===Bo?e[10]=i:r===Yo?(i=ra(i),e[4]=Math.tan(i)):r===Ho?(i=ra(i),e[1]=Math.tan(i)):r===Go?(i=ra(i),o=Math.sin(i),n=Math.cos(i),e[5]=e[10]=n,e[6]=o,e[9]=-o):r===Wo?(i=ra(i),s=Math.sin(i),u=Math.cos(i),e[0]=e[10]=u,e[8]=s,e[2]=-s):r===Uo?(i=ra(i),l=Math.sin(i),h=Math.cos(i),e[0]=e[5]=h,e[1]=l,e[4]=-l):r===Xo?(t=(c=Qt(i,4))[0],_=c[1],d=c[2],f=c[3],f=ra(f[0]),n=Math.sin(f),o=Math.cos(f),!t||_||d?!_||t||d?!d||t||_?(1!==(u=Math.sqrt(t*t+_*_+d*d))&&(t*=a=1/u,_*=a,d*=a),s=t*_,h=_*d,l=d*t,c=t*n,f=_*n,u=d*n,e[0]=t*t*(a=1-o)+o,e[1]=s*a+u,e[2]=l*a-f,e[3]=0,e[4]=s*a-u,e[5]=_*_*a+o,e[6]=h*a+c,e[7]=0,e[8]=l*a+f,e[9]=h*a-c,e[10]=d*d*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(d<0&&(n=-n),e[0]=o,e[4]=-n,e[1]=n,e[5]=o):(_<0&&(n=-n),e[0]=o,e[8]=n,e[2]=-n,e[10]=o):(t<0&&(n=-n),e[5]=o,e[9]=-n,e[6]=n,e[10]=o)):r===Vo&&0<i?(i=Math.max(i,1),e[11]=-1/i):r===Ko&&ue.assignMatrix(e,i),g=ta(g,p)}),g}function na(t,e){var r=Qt(e,2),i=r[0],e=r[1],r=t.slice(0);return 0===i&&0===e||ea(t)?r:(r=ta([1,0,0,0,0,1,0,0,0,0,1,0,i,e,0,1],r),r=ta(r,[1,0,0,0,0,1,0,0,0,0,1,0,-i,-e,0,1]))}var oa={calMatrix:ia,calOrigin:function(t,r,i,n){var o=[];return t.forEach(function(t,e){t[1]===jo?o.push(t[0]):t[1]===$o?o.push(t[0]*(e?i:r)*.01):t[1]===Zo?o.push(t[0]*n.computedStyle[zo]):t[1]===qo?o.push(t[0]*n.width*.01):t[1]===Jo&&o.push(t[0]*n.height*.01)}),o},calMatrixByPerspective:function(t,e){return t=!ea(e)?ta(e,t):t},calPerspectiveMatrix:function(t,e){if(t&&0<t){var r=Qo();t=Math.max(t,1),r[11]=-1/t;t=Qt(e,2),e=t[0],t=t[1];return(e||t)&&(r=ta([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=ta(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r}},calMatrixByOrigin:na,calMatrixWithOrigin:function(t,e,r,i){return na(ia(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}};function aa(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function sa(t){return 3*Math.floor(.5*t)}var ha={kernelSize:aa,outerSize:function(t){return sa(aa(t))},outerSizeByD:sa,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),n=0,o=i;0<=o;o--){var a=Math.pow(Math.E,-Math.pow(o,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(a),n+=a}for(var s=1;s<=i;s++){var h=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(h),n+=h}if(1!==n)for(var l=0;l<e;l++)r[l]/=n;return r}},Y=m.STYLE_KEY,la=Y.TRANSFORM_ORIGIN,ca=Y.TRANSFORM,ft=(Y.DISPLAY,Y.VISIBILITY,m.NODE_KEY);ft.NODE_OPACITY,ft.NODE_CACHE_TOTAL,ft.NODE_CACHE_FILTER,ft.NODE_CACHE_OVERFLOW,ft.NODE_HAS_CONTENT,ft.NODE_COMPUTED_STYLE;function ua(t,e){var r=t.size,i=t.sx1,n=t.sy1,o=t.width,a=t.height,s=t.bbox,e=Le.getCacheCanvas(o,a,null,e);return e.x=0,e.y=0,e.bbox=s,e.size=r,e.sx1=i,e.sy1=n,e.dx=t.dx,e.dy=t.dy,e.dbx=t.dbx,e.dby=t.dby,e.width=o,e.height=a,e}var _a=function(){function p(t,e,r,i,n,o,a){_(this,p),this.__init(t,e,r,i,n,o,a)}return f(p,[{key:"__init",value:function(t,e,r,i,n,o,a){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=n;r=Qt(i.getCoords(n),2),n=r[0],r=r[1];this.__x=n,this.__y=r,this.__appendData(o,a),this.__isNew=!0,i.canvas&&(this.__enabled=!0,(a=i.ctx).setTransform(1,0,0,1,0,0),a.globalAlpha=1,_e.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,n,o,a;ue.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),(a=Ln.getInstance(Math.max(i,n)))?(o=a.page,a=a.pos,this.__init(i,n,t,o,a,e,r)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return Ln.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),o=Ln.getInstance(Math.max(i,n));if(o)return new p(i,n,t,o.page,o.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=0;e.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t&&(r=ha.outerSize(e))});var i=t.x,n=t.y,o=t.size,a=t.canvas,s=t.sx1,h=t.sy1,l=t.width,c=t.height,u=t.bbox;(u=u.slice(0))[0]-=r,u[1]-=r,u[2]+=r,u[3]+=r;var _=Le.getCacheCanvas(l+2*r,c+2*r,null,"filter");return _.ctx.filter=Tt.canvasFilter(e),_.ctx.drawImage(a,i,n,l,c,r,r,l,c),_.ctx.filter="none",_.draw(),_.bbox=u,_.x=0,_.y=0,_.size=o,_.sx1=s-r,_.sy1=h-r,_.dx=t.dx,_.dy=t.dy,_.dbx=t.dbx,_.dby=t.dby,_.width=l+2*r,_.height=c+2*r,_}},{key:"genMask",value:function(t,e,r){for(var i=ua(t,"mask1"),n=[],o=e.computedStyle,a=o[ca],s=o[la],h=e.next,l=h.isClip;h&&h.isMask;)n.push(h),h=h.next;var c=i.x,u=i.y,_=i.ctx,f=i.dbx,o=i.dby;s[0]+=c+f+e.__sx1-t.sx1,s[1]+=u+o+e.__sy1-t.sy1;var d=oa.calMatrixByOrigin(a,s);return n.forEach(function(t){r(t,i,d)}),_.setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.globalCompositeOperation=l?"source-out":"source-in",p.drawCache(t,i),_.globalCompositeOperation="source-over",i.draw(_),i}},{key:"genOverflow",value:function(t,e){var r=t.bbox,i=e.sx,n=e.sy,o=e.outerWidth,a=e.outerHeight;if(r[0]<i||r[1]<n||r[2]>i+o||r[3]>n+a){var s=ua(t,"overflow"),e=s.ctx;return e.setTransform(1,0,0,1,0,0),e.globalAlpha=1,p.drawCache(t,s),s.draw(e),e.globalCompositeOperation="destination-in",e.fillStyle="#FFF",e.beginPath(),e.rect(i-r[0],n-r[1],o,a),e.fill(),e.closePath(),e.globalCompositeOperation="source-over",s}}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(ue.equalArr(e,r))return t;var i=r[0]-e[0],n=r[1]-e[1],o=p.getInstance(e);if(o&&o.enabled){var a=t.x,s=t.y,h=t.canvas,l=t.width,c=t.height,r=o.x,e=o.y;return o.sx1=t.sx1,o.sy1=t.sy1,o.dx=t.dx+i,o.dy=t.dy+n,o.dbx=t.dbx+i,o.dby=t.dby+n,o.ctx.drawImage(h,a,s,l,c,i+r,n+e,l,c),o.__available=!0,t.release(),o}}},{key:"drawCache",value:function(t,e,r,i,n,o,a){var s=e.x,h=e.y,l=e.sx1,c=e.sy1,u=e.ctx,_=e.dbx,f=e.dby,d=t.x,p=t.y,g=t.canvas,v=t.sx1,m=t.sy1,y=t.dbx,E=t.dby,e=t.width,t=t.height,y=s+v-l+_-y,E=h+m-c+f-E;r&&i&&n&&(n[0]+=y,n[1]+=E,n=oa.calMatrixByOrigin(r,n),i=te.multiply(i,n),te.isE(o)||(i=te.multiply(o,i)),a&&(i=ue.equalArr(i,a)?te.identity():(a=te.inverse(a),te.multiply(a,i))),u.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),u.drawImage(g,d,p,e,t,y,E,e,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var n=i.x,o=i.y,a=i.canvas,s=i.sx1,h=i.sy1,l=i.dbx,e=i.dby,r=i.width,i=i.height;t.drawImage(a,n,o,r,i,s-l,h-e,r,i)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),p}();o(_a,"NA",0),o(_a,"LOCAL",1),o(_a,"CHILD",2),o(_a,"SELF",3);var qt=m.STYLE_KEY,sr=m.STYLE_KEY,fa=sr.TRANSLATE_X,da=sr.TRANSLATE_Y,pa=sr.TRANSLATE_Z,ga=sr.OPACITY,va=sr.FILTER,ma=sr.PERSPECTIVE,ya=sr.PERSPECTIVE_ORIGIN,Ea={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},xa=(o(fr={},qt.SCALE_X,!0),o(fr,qt.SCALE_Y,!0),o(fr,qt.SCALE_Z,!0),o(fr,qt.ROTATE_X,!0),o(fr,qt.ROTATE_Y,!0),o(fr,qt.ROTATE_Z,!0),o(fr,qt.ROTATE_3D,!0),o(fr,qt.TRANSFORM,!0),o(fr,qt.TRANSFORM_ORIGIN,!0),fr),ba=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Rr.isIgnore(t)?Ea.NONE:t===fa?Ea.TRANSLATE_X:t===da?Ea.TRANSLATE_Y:t===pa?Ea.TRANSLATE_Z:xa.hasOwnProperty(t)?Ea.TRANSFORM:t===ga?Ea.OPACITY:t===va?Ea.FILTER:t===ma||t===ya?Ea.PERSPECTIVE:Rr.isRepaint(t)?Ea.REPAINT:Ea.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<Ea.REFLOW},isRebuild:function(t){return Ea.REBUILD<=t}},Ea);ba.TRANSFORMS=xa;var A=m.STYLE_KEY,Ta=A.DISPLAY,Aa=A.LINE_HEIGHT,Ma=A.FONT_SIZE,Oa=A.FONT_FAMILY,Ra=A.FONT_STYLE,Sa=A.FONT_WEIGHT,Ca=A.COLOR,Ia=A.VISIBILITY,ka=A.LETTER_SPACING,wa=A.OVERFLOW,La=A.WHITE_SPACE,Da=A.TEXT_OVERFLOW,Na=A.WIDTH,Pa=A.TEXT_STROKE_COLOR,Fa=A.TEXT_STROKE_WIDTH,Jt=m.NODE_KEY,Ba=Jt.NODE_CACHE,Ya=Jt.NODE_LIMIT_CACHE,Ha=Jt.NODE_DOM_PARENT,Ga=Jt.NODE_MATRIX_EVENT,Wa=Jt.NODE_OPACITY,Ua=Jt.NODE_VIRTUAL_DOM,$t=m.UPDATE_KEY,Xa=$t.UPDATE_NODE,Va=$t.UPDATE_MEASURE,Ka=$t.UPDATE_FOCUS,za=$t.UPDATE_CONFIG,ja=fe.ELLIPSIS,$a=S.AUTO,Za=S.REM,qa=S.VW,Ja=S.VH,Qa=function(){t(i,R);var r=e(i);function i(t){var e;return _(this,i),(e=r.call(this)).__content=ue.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return f(i,[{key:"__computeMeasure",value:function(t,e){var r=this.content,i=this.computedStyle,n=this.charWidthList;n.splice(0);for(var o=i[Oa].split(","),a="arial",s=0,h=o.length;s<h;s++)if(Le.checkSupportFontFamily(o[s])){a=o[s];break}this.__ff=a;for(var l=i[Ma],c=i[Sa],u=this.__key=i[Ma]+","+a+","+c,_=fe.data[u]=fe.data[u]||{ff:a,fs:l,fw:c,hash:{},s:""},f=fe.charWidth[u]=fe.charWidth[u]||{},d=0,p=!1,g=this.domParent;"inline"===g.currentStyle[Ta];)g=g.domParent;for(var v=(this.__bp=g).computedStyle,m=0,y=v[Oa].split(","),E=y.length;m<E;m++)if(Le.checkSupportFontFamily(y[m])){a=o[m];break}var x=v[Ma],l=v[Sa],c=this.__pKey=x+",arial,"+l,u=fe.charWidth[c]=fe.charWidth[c]||{};t===rt.CANVAS||t===rt.WEBGL?(t===rt.WEBGL&&(e=Le.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__").ctx),u.hasOwnProperty(ja)||(e.font=vn.setFontStyle(v),u[ja]=e.measureText(ja).width),e.font=vn.setFontStyle(i)):t===rt.SVG&&(u.hasOwnProperty(ja)||(u[ja]=0,(fe.data[c]=fe.data[c]||{ff:"arial",fs:x,fw:l,hash:{},s:""}).s+=ja,p=!0));for(var b=0,T=r.length;b<T;b++){var A=r.charAt(b),M=void 0;f.hasOwnProperty(A)?(M=f[A],n.push(M),d+=M,this.__charWidth=Math.max(this.charWidth,M)):t===rt.CANVAS||t===rt.WEBGL?(M=f[A]=e.measureText(A).width,n.push(M),d+=M,this.__charWidth=Math.max(this.charWidth,M)):(_.hash.hasOwnProperty(A)||(_.s+=A),_.hash[A]=!0,n.push(-1),p=!0)}this.__textWidth=d,p&&fe.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,i=this.__key,n=fe.charWidth[i],o=0,a=0,s=r.length;a<s;a++)r[a]<0&&(o+=t=r[a]=n[e.charAt(a)],this.__charWidth=Math.max(this.charWidth,t));this.__textWidth=o}},{key:"__layout",value:function(t){var e=this.__config[Ba];e&&e.release();var r=t.x,i=t.y,n=t.w,o=t.lx,a=void 0===o?r:o,s=t.lineBoxManager,e=t.endSpace,h=void 0===e?0:e,o=t.lineClamp,l=void 0===o?0:o,e=t.lineClampCount,c=void 0===e?0:e;this.__x=this.__sx1=r,this.__y=this.__sy1=i;var o=this.isDestroyed,u=this.content,e=this.currentStyle,_=this.computedStyle,f=this.textBoxes,d=this.charWidthList,p=this.root,g=this.__ff,v=this.__key;if(f.splice(0),this.__config[Ya]=!1,o||"none"===e[Ta]||!u)return c;var m,y,E,x,b=this.__ox=this.__oy=0,T=0,A=r-a,M=A,O=u.length,R=0,S=_[Aa],C=_[ka],o=_[La],I=_[Ma],k=_[Sa],w=bt.info[g].padding,L=!!w,D=fe.charWidth[this.__pKey][ja],N=0;if("nowrap"===o){var P,F,e=this.__bp.currentStyle,B=e[Ta],o=e[wa],Y=e[Na],e=e[Da];if("hidden"===o)for(;T<O;){if(n<(M+=d[T]+C)){("block"===B||"flex"===B||Y[1]!==$a)&&(P=!0);break}T++}else for(;T<O;)M+=d[T++]+C;P&&"ellipsis"===e?(i=(F=Qt(this.__lineBack(M,n,A,h,D,C,b,T,O,N,S,a,r,i,R,f,u,d,s),2))[0],R=F[1]):(F=new Rn(this,f.length,r,i,M-A,S,u,d),f.push(F),s.addItem(F),R=M-A,i+=S)}else{for(;T<O;){var H,G,W,U=d[T]+C;if(M+=U,L&&((H=u[T])===m&&w.hasOwnProperty(H)&&w[H]&&(W=void 0,G=fe.padding[v]=fe.padding[v]||{},fe.padding.hasOwnProperty(v)&&G.hasOwnProperty(H)&&(W=!0,M-=G[H]),W||(W=0,p.renderMode===rt.CANVAS?(p.ctx.font=vn.setFontStyle(_),W=2*p.ctx.measureText(H).width-p.ctx.measureText(H+H).width,W*=w[H]):p.renderMode===rt.SVG&&(W=Le.measureTextSync(v,g,I,k,H),W*=w[H]),M-=W,G[H]=W)),m=H),0!==U)if(M===n){if(l&&l-1<=N+c){var X=Qt(this.__lineBack(M,n,A,h,D,C,b,T,O,N,S,a,r,i,R,f,u,d,s),2);i=X[0],R=X[1],N++;break}X=void 0;T===O-1&&n-h<M&&T&&(M-=d[T--]),T++,N?(X=new Rn(this,f.length,a,i,M,S,u.slice(b,T),d.slice(b,T)),R=Math.max(R,M)):X=new Rn(this,f.length,r,i,R=M-A,S,u.slice(b,T),d.slice(b,T)),f.push(X),s.addItem(X,!0),i+=Math.max(S,s.lineHeight),b=T,M=0,N++,m=null}else if(n+1e-10<M){if(l&&l-1<=N+c){var V=Qt(this.__lineBack(M,n,A,h,D,C,b,T,O,N,S,a,r,i,R,f,u,d,s),2);i=V[0],R=V[1],N++;break}X=void 0,X=T<=b?M:M-d[T--];T++;V=void 0;N?(V=new Rn(this,f.length,a,i,X,S,u.slice(b,T),d.slice(b,T)),R=Math.max(R,X)):V=new Rn(this,f.length,r,i,R=X-A,S,u.slice(b,T),d.slice(b,T)),f.push(V),s.addItem(V,!0),i+=Math.max(S,s.lineHeight),b=T,M=0,N++,m=null}else T++;else T++}N&&(this.__x=this.__sx1=a),b<O&&(!l||N+c<l)&&(N?(n-h<M&&b<O-1&&(y=!0,M-=d[O-1]),x=new Rn(this,f.length,a,i,M,S,u.slice(b,y?O-1:O),d.slice(b,y?O-1:O)),R=Math.max(R,M),f.push(x),s.addItem(x),i+=Math.max(S,s.lineHeight),y&&(y=d[O-1],x=new Rn(this,f.length,a,i,y,S,u.slice(O-1),d.slice(O-1)),R=Math.max(R,y),f.push(x),s.setNewLine(),s.addItem(x),i+=S,N++)):(b&&n-h<M&&(E=!0,M-=d[O-1]),x=new Rn(this,f.length,r,i,R=M-A,S,u.slice(b,E?O-1:O),d.slice(b,E?O-1:O)),f.push(x),s.addItem(x),i+=Math.max(S,s.lineHeight),E&&(E=d[O-1],x=new Rn(this,f.length,a,i,E,S,u.slice(O-1),d.slice(O-1)),R=Math.max(R,E),f.push(x),s.setNewLine(),s.addItem(x),i+=S,N++)))}return this.__width=R,this.__height=i-t.y,this.__baseLine=vn.getBaseLine(_),N}},{key:"__lineBack",value:function(t,e,r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m){for(;a<=s;s--)if((t-=v[s]+o)+n+i<=e&&s){var y=new Rn(this,p.length,l?u:_,f,d=t-(l?0:r),c,g.slice(a,s),v.slice(a,s));p.push(y),m.addItem(y,!0),f+=Math.max(c,m.lineHeight),this.__ellipsis=!0;break}if(s<0){var E=m.lineBox;if(E.size){var x=E.list;t:for(var b=x.length-1;0<=b;b--){var T=x[b],A=T.content,M=T.wList,O=T.width;if(t-O+n<=e||!b)for(var R=M.length-1;0<=R;R--){if(!R&&!b||t+n<=e){T.__content=A,T.__width=O,T.parent.__ellipsis=!0;break t}var S=M[R];T.__endY-=S,O-=S,A=A.slice(0,R),t-=S,M.pop()}else t-=O;x.pop(),T.parent.textBoxes.pop()}}else{E=new Rn(this,p.length,l?u:_,f,d=t-(l?0:r),c,g.charAt(a),v.slice(a,a+1));p.push(E),m.addItem(E,!0),f+=Math.max(c,m.lineHeight),this.__ellipsis=!0}}return[f,d]}},{key:"__offsetX",value:function(e,t){P(N(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){P(N(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.charWidthList[0]}},{key:"__inlineSize",value:function(){var r,i;this.textBoxes.forEach(function(t,e){i=e?(r=Math.min(r,t.x),Math.max(i,t.x+t.width)):(r=t.x,t.x+t.width)}),this.__x=r,this.__sx=this.__sx1=r+this.ox,console.log(22222),this.__width=i-r}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=this.isDestroyed,s=this.computedStyle,h=this.textBoxes,l=this.cacheStyle,c=this.__ellipsis,u=this.__bp,_=this.__config;if(e===rt.SVG&&(_[Ua]=this.__virtualDom={type:"text",children:[]}),!a&&"none"!==s[Ta]&&"hidden"!==s[Ia]&&h.length){if(e===rt.CANVAS||e===rt.WEBGL){if(e===rt.WEBGL)if(i){var f=this.sx,d=this.sy,a=this.bbox,i=_[Ba];if(i?i.reset(a,f,d):i=_a.getInstance(a,f,d),!i||!i.enabled)return void(_[Ya]=!0);(_[Ba]=i).__available=!0,r=i.ctx,n+=i.dx,o+=i.dy,_[Ya]=!1}else{var p=this.root,g=Le.getCacheCanvas(p.width,p.height,"__$$OVERSIZE$$__");r=g.ctx;var p=_[Ha].__config,g=p[Ga],p=p[Wa];r.setTransform(g[0],g[1],g[4],g[5],g[12],g[13]),r.globalAlpha=p}var g=vn.setFontStyle(s);r.font!==g&&(r.font=g);p=l[Ca];r.fillStyle!==p&&(r.fillStyle=p);var g=s[Fa];r.lineWidth!==g&&(r.lineWidth=g);p=l[Pa];r.strokeStyle!==p&&(r.strokeStyle=p)}h.forEach(function(t){t.render(e,r,s,l,n,o)}),e===rt.SVG&&(this.virtualDom.children=h.map(function(t){return t.virtualDom})),c&&(p=(g=h[h.length-1]).endX,c=g.endY,h=u.computedStyle,e===rt.CANVAS||e===rt.WEBGL?(g=vn.setFontStyle(h),r.font!==g&&(r.font=g),g=u.__cacheStyle[Ca],r.fillStyle!==g&&(r.fillStyle=g),r.fillText(ja,p,c)):e===rt.SVG&&(h=[["x",p],["y",c],["fill",u.__cacheStyle[Ca]],["font-family",h[Oa]],["font-weight",h[Sa]],["font-style",h[Ra]],["font-size",h[Ma]+"px"]],this.virtualDom.children.push({type:"item",tagName:"text",props:h,content:ja})))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(i.prototype),"__destroy",this).call(this),(t=this.__config[Ba])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,e){var n=this;i!==n.__content?(root.delRefreshTask(n.__task),root.addRefreshTask(n.__task={__before:function(){n.__content=i;var t={},e=n.domParent;t[Xa]=e,t[Va]=!0,t[Ka]=ba.REFLOW,t[za]=e.__config;var r=e.root;r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(t){ue.isFunction(e)&&e(t)}})):ue.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"firstCharWidth",get:function(){return this.charWidthList[0]||0}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,n=this.root,o=this.currentStyle[Fa],a=0,a=o[1]===Za?Math.max(o[0]*n.computedStyle[Ma]*.5,a):o[1]===qa?Math.max(o[0]*n.width*.01*.5,a):o[1]===Ja?Math.max(o[0]*n.height*.01*.5,a):Math.max(.5*o[0],a);return[t-(a+=1),e-a,t+r+a,e+i+a]}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}();Qa.prototype.__renderByMask=Qa.prototype.render;var ts=Vt.TYPE_VD,es=Vt.TYPE_GM,rs=Vt.TYPE_CP;function is(t){if(Array.isArray(t))return t.map(is);if(!t||-1===[ts,es,rs].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==ts&&t.$$type!==es)t&&t.$$type===rs?(r.push(t),i.lastText=null):ue.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===ts&&is(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var ns,os,as,ss,hs,Y=m.NODE_KEY,ls=Y.NODE_DOM_PARENT,cs=Y.NODE_STYLE,us=Y.NODE_CURRENT_STYLE,_s=Y.NODE_COMPUTED_STYLE,fs=Y.NODE_MATRIX,ds=Y.NODE_MATRIX_EVENT,ps=Vt.TYPE_VD,gs=Vt.TYPE_GM,vs=Vt.TYPE_CP;function ms(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return ms(t,e,r,i)});if(ue.isObject(t)&&t.$$type){var n=t.tagName,o=t.props,a=t.children,s=t.klass,h=t.$$type,l=t.__inheritAnimate,c=t.__animateRecords;if(h===vs&&t.__placeholder)return t.__placeholder;if(h===ps){if("img"===n){if(u=new as(n,o),Array.isArray(a)&&a.length)throw new Error("Img can not contain children")}else u=new os(n,o);if("p"===n)i=!0;else if("div"===n&&i)throw new Error("Markup p can not contain div");a=Array.isArray(a)?ys(u,ms(a,e,r,i)):[],u.__children=a}else if(h===gs)var u=new(ss.getRegister(n))(n,o);else{if(h!==vs)return new Qa(t);(u=new s(o)).__tagName=n||u.__tagName}(t.vd=u).__json=t,c&&((u.__animateRecords=c).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),l&&(ue.extendAnimate(l,u),delete t.__inheritAnimate),u.__root=e,u.__host=r,h===vs&&u.__init();o=o.ref;return ue.isString(o)&&o||ue.isNumber(o)?r.ref[o]=u:ue.isFunction(o)&&o(u),u}return new Qa(t)}function ys(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){ys(e,t,i)}):(r instanceof ns||r instanceof hs||r instanceof Qa)&&(r.__parent=e,r.__domParent=e,r instanceof Qa&&[cs,us,_s,fs,ds].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[ls]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof hs&&((t=r.shadowRoot)instanceof Qa&&(t.__parent=e,[cs,us,_s,fs,ds].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[ls]=e))),r}var Es={ref:function(t){ns=t.Xom,os=t.Dom,as=t.Img,ss=t.Geom,hs=t.Component},initRoot:function(t,e){return t=is({tagName:e.tagName,props:{},children:t,$$type:ps}),e.__json=t,ys(e.__host=e,ms(t.children,e,e))},initDom:function(t,e,r,i){return ys(i,ms(t,e,r))},initCp:function(t,e,r){return ue.isObject(t)?ms(t,e,r):new Qa(t)},initCp2:function(t,e,r,i){var n=new t.klass(t.props);return n.__tagName=t.tagName||n.__tagName,n.__root=e,n.__host=r,n.__json=t,n.__init(),ys(i,n)},relation:ys},xs=ue.isFunction,bs=function(){function a(){_(this,a),this.__eHash={}}return f(a,[{key:"on",value:function(t,e){if(xs(e)){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else{this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var n=0,o=this.__eHash[t],a=o.length;n<a;n++)if(o[n]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,n){if(xs(n)){var o=this;if(a.__karasEventCb=n,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)o.once(i[t],n);else n&&o.on(i,a);return this}function a(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(o,e),o.off(i,a)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,o=this.__eHash[t],a=o.length;n<a;n++)if(o[n]===e||o[n].__karasEventCb===e){o.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)this.emit(t[n],r);else if(this.__eHash.hasOwnProperty(t)){var a=this.__eHash[t];if(a.length)for(var s=0,h=(a=a.slice()).length;s<h;s++){var l=a[s];xs(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],r=new a;e.__eHash={};for(var i=["on","once","off","emit"],n=i.length-1;0<=n;n--){var o=i[n];e[o]=r[o]}}}}]),a}();o(bs,"REFRESH","refresh"),o(bs,"PAUSE","pause"),o(bs,"PLAY","play"),o(bs,"FRAME","frame"),o(bs,"FINISH","finish"),o(bs,"CANCEL","cancel"),o(bs,"BEGIN","begin"),o(bs,"END","end");var Ts=ue.isNil,As=ue.isFunction,Ms=ue.clone,Os=ue.extend,Rs={};var Ss=function(){t(o,bs);var r=e(o);function o(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _(this,o),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=ue.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return f(o,[{key:"setState",value:function(t,e){var r=this,i=this;if(Ts(t))t={};else{if(As(t))return;if(0===Object.keys(t).length)return void(As(e)&&e.call(i));var n=Ms(i.state);t=Os(n,t)}var o,a=i.root;a&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],o=[],n=i.__task={__before:function(){o=i.__taskList.splice(0),function t(e){e.__hasUpdate||(e.__hasUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){o.forEach(function(t){As(t)&&t.call(i)})}},a.addRefreshCp(n)):As(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this;this.__ref={};var e=this.root,i=t||is(this.render()),n=Es.initCp(i,e,this);if(this.__cd=i,!(n instanceof Qa))if(n instanceof R){t=vn.normalize(this.props.style),i=Object.keys(t);Os(n.style,t,i),Os(n.currentStyle,t,i),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),n.listener[t]=e)})}else if(!(n instanceof o))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=n).__host=this;n instanceof o;)n.__hostRoot=this,n=(n.shadow.__host=n).shadow;((this.__shadowRoot=n).__hostRoot=this).__isMounted||(this.__isMounted=!0,As(this.componentDidMount)&&e.once(bs.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){Le.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,As(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof Qa))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return Rs}},{key:"getRegister",value:function(t){if(!t||!ue.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!Rs.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return Rs[t]}},{key:"register",value:function(t,e){if(!(t&&ue.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof o))throw new Error("Invalid param: Component register");if(o.hasRegister(t))throw new Error("Component has already register: ".concat(t));Rs[t]=e}},{key:"hasRegister",value:function(t){return t&&Rs.hasOwnProperty(t)}},{key:"delRegister",value:function(t){o.hasRegister(t)&&delete Rs[t]}}]),o}();Object.keys(Rr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(Ss.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){Ss.prototype[e]=function(){var t=this.shadowRoot;if(t&&As(t[e]))return t[e].apply(t,arguments)}});var ft=m.STYLE_KEY,Cs=ft.SCALE_X,Is=ft.SCALE_Y,ks=S.PERCENT,ws=S.NUMBER;var Ls={matrixResize:function(t,e,r,i,n,o,a,s){if(t!==r||e!==i){i=[[Cs,[r/t,ws]],[Is,[i/e,ws]]],e=oa.calOrigin([[0,ks],[0,ks]],a,s);return e[0]+=n,e[1]+=o,oa.calMatrixWithOrigin(i,e,a,s)}}},sr=m.STYLE_KEY,Ds=sr.BACKGROUND_POSITION_X,Ns=sr.BACKGROUND_POSITION_Y,Ps=sr.FONT_SIZE,Fs=m.NODE_KEY.NODE_DEFS_CACHE,Bs=ue.clone,Ys=ue.joinArr,Hs=Tt.canvasPolygon,Gs=Tt.svgPolygon,Ws=S.AUTO,Us=S.PX,Xs=S.PERCENT,Vs=S.STRING,Ks=S.REM,zs=S.VW,js=S.VH;function $s(t,e,r,i,n,o,a,s,h,l,c,u,_){var f,d,p,g,v=13<arguments.length&&void 0!==arguments[13]?arguments[13]:"fill",m=14<arguments.length&&void 0!==arguments[14]&&arguments[14],y=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,E=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(d=i[1],f=i[2],g=i[3],i=i[0]),n=(n=n||Xt.calRadius(o,a,s,h,l,c,u,_))||[[o,a],[o+s,a],[o+s,a+h],[o,a+h],[o,a]],d&&(d=oa.calMatrixByOrigin(d,[f,g]),p=te.inverse(d),n=n.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=te.calPoint([t[r],t[r+1]],p);e.push(n[0]),e.push(n[1])}return e})),e===rt.CANVAS||e===rt.WEBGL)d&&(r.save(),g=t.matrixEvent,d=te.multiply(g,d),r.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),Hs(r,n,y,E),r[v](),r.closePath(),d&&r.restore();else if(e===rt.SVG){n=Gs(n);if(m){m={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",n],["fill",i]]}]};return t.__config[Fs].push(m),r.add(m)}t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",n],["fill",i]]}),d&&(t=t.virtualDom.bb)[t.length-1].props.push(["transform","matrix(".concat(Ys(te.m2m6(d),","),")")])}}function Zs(t,e,r,i){if(Array.isArray(t)){if(t[1]===Us)return t[0];if(t[1]===Xs)return(e-r)*t[0]*.01;if(t[1]===Ks)return t[0]*i.computedStyle[Ps];if(t[1]===zs)return t[0]*i.width*.01;if(t[1]===js)return t[0]*i.height*.01}return 0}var qs,Js={renderBgc:$s,renderImage:function(i,t,e,r,n,o,a,s,h,l,c,u,_,f,d,p,g,v){var m=18<arguments.length&&void 0!==arguments[18]?arguments[18]:0,y=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0,E=r.source;if(E){var x=(a+=m)-(n+=m),b=(s+=y)-(o+=y),T=r.width,A=r.height,d=Qt(d[f]||[],2),M=d[0],O=d[1];-1===M&&-1===O?(M=T,O=A):-2===M?x<T&&b<A?(O=A/b)<=(M=T/x)?O=(M=x)*A/T:M=(O=b)*T/A:x<T?O=(M=x)*A/T:b<A?M=(O=b)*T/A:(M=T,O=A):-3===M?T<x&&A<b?(M=T/x)<=(O=A/b)?O=(M=x)*A/T:M=(O=b)*T/A:T<x||!(A<b)&&(M=T/x)<=(O=A/b)?O=(M=x)*A/T:M=(O=b)*T/A:-1===M?M=O*T/A:-1===O&&(O=M*A/T);var R=n+Zs(_[Ds][f],x,M,i.root),S=o+Zs(_[Ns][f],b,O,i.root),C=R<n||S<o||n+x<R+M||o+b<S+O,I=0,k=0,w=0,L=0;-1<["repeat-x","repeatX","repeat"].indexOf(p[f])&&(0<(_=R-n)&&(I=Math.ceil(_/M)),0<(_=n+x-R-M)&&(k=Math.ceil(_/M))),-1<["repeat-y","repeatY","repeat"].indexOf(p[f])&&(0<(f=S-o)&&(w=Math.ceil(f/O)),0<(f=o+b-S-O)&&(L=Math.ceil(f/O)));var D=[];if(0<I)for(var N=0;N<I;N++){var P=R-(N+1)*M;D.push([P,S]),!C&&0===N&&P<n&&(C=!0)}if(0<k)for(var F=0;F<k;F++){var B=R+(F+1)*M;D.push([B,S]),!C&&F===k-1&&n+x<B+M&&(C=!0)}if(0<w)for(var Y=0;Y<w;Y++){var H=S-(Y+1)*O;D.push([R,H]),!C&&0===Y&&H<o&&(C=!0)}if(0<L)for(var G=0;G<L;G++){var W=S+(G+1)*O;D.push([R,W]),!C&&G===L-1&&o+b<W+M&&(C=!0)}if(0<I&&0<w)for(var U=0;U<I;U++)for(var X=0;X<w;X++)D.push([R-(U+1)*M,S-(X+1)*O]);if(0<k&&0<w)for(var V=0;V<k;V++)for(var K=0;K<w;K++)D.push([R+(V+1)*M,S-(K+1)*O]);if(0<I&&0<L)for(var z=0;z<I;z++)for(var j=0;j<L;j++)D.push([R-(z+1)*M,S+(j+1)*O]);if(0<k&&0<L)for(var $=0;$<k;$++)for(var Z=0;Z<L;Z++)D.push([R+($+1)*M,S+(Z+1)*O]);if(t===rt.CANVAS||t===rt.WEBGL)C&&(e.save(),$s(this,t,e,"#FFF",null,n,o,x,b,h,l,c,u,"clip")),e.drawImage(E,R,S,M,O),D.forEach(function(t){e.drawImage(E,t[0],t[1],M,O)}),C&&e.restore();else if(t===rt.SVG){var q,t=Ls.matrixResize(T,A,M,O,R,S,x,b),J=[["xlink:href",r.url],["x",R],["y",S],["width",T],["height",A]];if(t&&!te.isE(t)&&(q=!0,J.push(["transform","matrix("+Ys(te.m2m6(t),",")+")"])),C&&(r=[n,o],s=[a,s],q&&(t=te.inverse(t),r=te.calPoint(r,t),s=te.calPoint(s,t)),s={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(r[0],",").concat(r[1],"L").concat(s[0],",").concat(r[1],"L").concat(s[0],",").concat(s[1],"L").concat(r[0],",").concat(s[1],"L").concat(r[0],",").concat(r[1])],["fill","#FFF"]]}]},r=e.add(s),g[Fs].push(s),J.push(["clip-path","url(#"+r+")"])),v){var Q={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:J}]};return i.__config[Fs].push(Q),D.forEach(function(t){var e,r=Bs(J);!q||(e=Ls.matrixResize(T,A,M,O,t[0],t[1],x,b))&&!te.isE(e)&&(r[5][1]="matrix("+Ys(te.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],Q.children.push({type:"img",tagName:"image",props:r})}),e.add(Q)}i.virtualDom.bb.push({type:"img",tagName:"image",props:J}),D.forEach(function(t){var e,r=Bs(J);!q||(e=Ls.matrixResize(T,A,M,O,t[0],t[1],x,b))&&!te.isE(e)&&(r[5][1]="matrix("+Ys(te.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],i.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}},calBackgroundSize:function(t,r,i,n){var o=[];return t.forEach(function(t,e){t[1]===Us?o.push(t[0]):t[1]===Xs?o.push(t[0]*(e?i:r)*.01):t[1]===Ks?o.push(t[0]*n.computedStyle[Ps]):t[1]===zs?o.push(t[0]*n.width*.01):t[1]===js?o.push(t[0]*n.height*.01):t[1]===Ws?o.push(-1):t[1]===Vs&&o.push("contain"===t[0]?-2:-3)}),o}},Qs=ue.isFunction;function th(t,e,r,i){if(i)for(var n=0;n<e;n++){var o=t[n];o[1]?o[1](r):o.__after&&o.__after(r)}else for(var a=0;a<e;a++){var s=t[a];s[0]?s[0](r):s.__before&&s.__before(r)}}var eh=new(function(){function t(){_(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return f(t,[{key:"__init",value:function(){var c=this,u=c.task,_=c.taskCp;Le.cancelAnimationFrame(c.id);var f=c.__now=Le.now();!function l(){Le.cancelAnimationFrame(c.id),c.id=Le.requestAnimationFrame(function(){if(!qs&&(u.length||_.length)){var t=(n=c.__now=Le.now())-f,t=Math.max(t,0);f=n;var e=u.slice(0),r=_.splice(0),i=e.length,n=r.length;th(e,i,t,!1),th(r,n,t,!1);for(var o=c.__hookTask.splice(0),a=0,s=o.length;a<s;a++){var h=o[a];h&&h()}th(e,i,t,!0),th(r,n,t,!0),(u.length||_.length)&&l()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),Qs(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var n=e[r];if(n===t||n.__karasFramecb===t){e.splice(r,1);break}}e.length||(Le.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=Qs(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){qs=!0}},{key:"resume",value:function(){qs&&(this.__init(),qs=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),rh=4,ih=1e-7,nh=10,oh="function"==typeof Float32Array;function ah(t,e){return 1-3*e+3*t}function sh(t,e,r){return((ah(e,r)*t+(3*r-6*e))*t+3*e)*t}function hh(t,e,r){return 3*ah(e,r)*t*t+2*(3*r-6*e)*t+3*e}function lh(t){return t}function ch(o,e,a,r){if(!(0<=o&&o<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(o===e&&a===r)return lh;for(var s=new(oh?Float32Array:Array)(11),t=0;t<11;++t)s[t]=sh(.1*t,o,a);function i(t){for(var e=0,r=1;10!==r&&s[r]<=t;++r)e+=.1;var i=e+.1*((t-s[--r])/(s[r+1]-s[r])),n=hh(i,o,a);return.001<=n?function(t,e,r,i){for(var n=0;n<rh;++n){var o=hh(e,r,i);if(0===o)return e;e-=(sh(e,r,i)-t)/o}return e}(t,i,o,a):0===n?i:function(t,e,r,i,n){for(var o,a,s=0;0<(o=sh(a=e+(r-e)/2,i,n)-t)?r=a:e=a,Math.abs(o)>ih&&++s<nh;);return a}(t,e,e+.1,o,a)}return function(t){return 0===t||1===t?t:sh(i(t),e,r)}}var uh={linear:ch(1,1,0,0),easeIn:ch(.42,0,1,1),easeOut:ch(0,0,.58,1),ease:ch(.25,.1,.25,1),easeInOut:ch(.42,0,.58,1),cubicBezier:ch,getEasing:function(t,e,r,i){return 4===arguments.length?ch(t,e,r,i):Array.isArray(t)&&4===t.length?ch(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?n=ch((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(n=this[t]),n):void 0;var n}};uh["ease-in"]=uh.easeIn,uh["ease-out"]=uh.easeOut,uh["ease-in-out"]=uh.easeInOut;var qt=m.STYLE_KEY,_h=qt.FILTER,fh=qt.TRANSFORM_ORIGIN,dh=qt.PERSPECTIVE_ORIGIN,ph=qt.BACKGROUND_CLIP,gh=qt.BACKGROUND_POSITION_X,vh=qt.BACKGROUND_POSITION_Y,mh=qt.BOX_SHADOW,yh=qt.TRANSLATE_X,Eh=qt.TRANSLATE_Y,xh=qt.TRANSLATE_Z,bh=qt.BACKGROUND_SIZE,Th=qt.FONT_SIZE,Ah=qt.FLEX_BASIS,Mh=qt.FLEX_DIRECTION,Oh=qt.WIDTH,Rh=qt.HEIGHT,Sh=qt.TOP,Ch=qt.BOTTOM,Ih=qt.LINE_HEIGHT,kh=qt.OPACITY,wh=qt.Z_INDEX,Lh=qt.TRANSFORM,Dh=qt.COLOR,Nh=qt.FONT_WEIGHT,Ph=qt.FONT_STYLE,Fh=qt.FONT_FAMILY,Bh=qt.TEXT_ALIGN,Yh=qt.MATRIX,Hh=qt.ROTATE_3D,Gh=qt.TRANSLATE_PATH,Wh=qt.TEXT_STROKE_COLOR,Uh=qt.TEXT_STROKE_OVER,fr=m.UPDATE_KEY,Xh=fr.UPDATE_NODE,Vh=fr.UPDATE_STYLE,Kh=fr.UPDATE_KEYS,zh=fr.UPDATE_CONFIG,A=m.KEY_FRAME_KEY,jh=A.FRAME_STYLE,$h=A.FRAME_TIME,Zh=A.FRAME_EASING,qh=A.FRAME_TRANSITION,Jt=m.ANIMATE_KEY,Jh=Jt.I_ASSIGNING,Qh=Jt.I_IN_FPS,tl=Jt.I_IS_DELAY,el=Jt.I_BEGIN,rl=Jt.I_END,il=Jt.I_FINISHED,nl=Jt.I_NEXT_END,ol=Jt.I_FIRST_PLAY,al=Jt.I_FRAME_CB,sl=Jt.I_PLAY_CB,hl=Jt.I_TARGET,ll=Jt.I_ROOT,cl=Jt.I_FRAMES,ul=Jt.I_FRAMES_R,_l=Jt.I_CURRENT_TIME,fl=Jt.I_NEXT_TIME,dl=Jt.I_STYLE,pl=Jt.I_DURATION,gl=Jt.I_ITERATIONS,vl=Jt.I_FILL,ml=Jt.I_PLAYBACK_RATE,yl=Jt.I_PLAY_COUNT,El=Jt.I_PLAY_STATE,xl=Jt.I_DESTROYED,bl=Jt.I_START_TIME,Tl=Jt.I_FPS_TIME,Al=Jt.I_EASING,Ml=Jt.I_ENTER_FRAME,Ol=Jt.I_DELAY,Rl=Jt.I_END_DELAY,Sl=Jt.I_KEYS,Cl=Jt.I_ORIGIN_STYLE,Il=Jt.I_CURRENT_FRAMES,kl=Jt.I_CURRENT_FRAME,wl=Jt.I_SPF_LIMIT,Ll=Jt.I_FPS,Dl=Jt.I_DIRECTION,Nl=Jt.I_CAL_DIFF_TIME,Pl=Jt.I_FIRST_ENTER,Fl=Jt.I_STAY_BEGIN,Bl=Jt.I_STAY_END,Yl=Jt.I_IS2,Hl=Jt.I_END_TIME,Gl=Jt.I_NODE_CONFIG,Wl=Jt.I_ROOT_CONFIG,Ul=Jt.I_OUT_BEGIN_DELAY,Xl=Jt.I_TIME_STAMP,Vl=S.AUTO,Kl=S.PX,zl=S.PERCENT,jl=S.INHERIT,$l=S.RGBA,Zl=S.STRING,ql=S.NUMBER,Jl=S.REM,Ql=S.VW,tc=S.VH,ec=S.calUnit,rc=ue.isNil,ic=ue.isFunction,nc=ue.isNumber,oc=ue.isObject,ac=ue.isString,sc=ue.clone,hc=ue.equalArr,lc=uh.linear,cc=vn.cloneStyle,uc=Rr.isGeom,_c=Rr.GEOM,fc=Zt.COLOR_HASH,dc=Zt.LENGTH_HASH,pc=Zt.RADIUS_HASH,gc=Zt.GRADIENT_HASH,vc=Zt.EXPAND_HASH,mc=Zt.GRADIENT_TYPE,yc={};function Ec(t,e,r,i,n){var o={};o[Xh]=n,o[Vh]=t,o[Kh]=e,o[zh]=r[Gl],i.__addUpdate(n,r[Gl],i,r[Wl],o),r[dl]=t,r[Jh]=!0,i.__frameHook()}function xc(t,e,r,i){return t[1]===Kl?e[1]===zl?.01*e[0]*r-t[0]:e[1]===Jl?e[0]*i.computedStyle[Th]-t[0]:e[1]===Ql?e[0]*i.width*.01-t[0]:e[1]===tc?e[0]*i.height*.01-t[0]:void 0:t[1]===zl?e[1]===Kl?100*e[0]/r-t[0]:e[1]===Jl?e[0]*i.computedStyle[Th]*100/r-t[0]:e[1]===Ql?e[0]*i.width/r-t[0]:e[1]===tc?e[0]*i.height/r-t[0]:void 0:t[1]===Jl?e[1]===Kl?e[0]/i.computedStyle[Th]-t[0]:e[1]===zl?.01*e[0]*r/i.computedStyle[Th]-t[0]:e[1]===Ql?e[0]*i.width*.01/i.computedStyle[Th]-t[0]:e[1]===tc?e[0]*i.height*.01/i.computedStyle[Th]-t[0]:void 0:t[1]===Ql?e[1]===Kl?100*e[0]/i.width-t[0]:e[1]===Jl?100*e[0]*i.computedStyle[Th]/i.width-t[0]:e[1]===zl?e[0]*r/i.width-t[0]:e[1]===tc?e[0]*i.height/i.width-t[0]:void 0:t[1]===tc?e[1]===Kl?100*e[0]/i.height-t[0]:e[1]===Jl?100*e[0]*i.computedStyle[Th]/i.height-t[0]:e[1]===Ql?e[0]*i.width/i.height-t[0]:e[1]===zl?e[0]*r/i.height-t[0]:void 0:void 0}function bc(e,r,t,i,n){return t.forEach(function(t){t=function(t,e,r,o,i){var n=[r],a=t[r],s=e[r];if(r===Lh){if(!a&&!s)return;var h=a?a[0][1]:te.identity(),e=s?s[0][1]:te.identity();return hc(h,e)?void 0:(n[1]=[e[0]-h[0],e[1]-h[1],e[2]-h[2],e[3]-h[3],e[4]-h[4],e[5]-h[5],e[6]-h[6],e[7]-h[7],e[8]-h[8],e[9]-h[9],e[10]-h[10],e[11]-h[11],e[12]-h[12],e[13]-h[13],e[14]-h[14],e[15]-h[15]],n)}if(r===Hh){if(hc(a,s))return;n[1]=[s[0]-s[0],s[1]-a[1],s[2]-a[2],[s[3][0]-a[3][0],s[3][1]]]}else if(r===_h){var l={},c={},u={};a&&a.forEach(function(t){u[t[0]]=!0,l[t[0]]=t[1]}),s&&s.forEach(function(t){u[t[0]]=!0,c[t[0]]=t[1]});var _,f={};if(Object.keys(u).forEach(function(t){var e,r,i,n;"blur"===t?_=(l[t]?c[t]?(r=xc(l[t],c[t],0,o.root),f[t]=[r,l[t][1]]):f[t]=[-l[t][0],l[t][1]]:f[t]=c[t].slice(0),!0):"hue-rotate"===t?(e=rc(c[t])?0:c[t][0],(r=rc(l[t])?0:l[t][0])!==e&&(f[t]=[e-r,zl],_=!0)):"saturate"===t||"brightness"===t||"contrast"===t?(i=rc(c[t])?100:c[t][0],(n=rc(l[t])?100:l[t][0])!==i&&(f[t]=[i-n,zl],_=!0)):"grayscale"===t&&(i=rc(c[t])?0:c[t][0],(n=rc(l[t])?0:l[t][0])!==i&&(f[t]=[i-n,zl],_=!0))}),!_)return;n[1]=f}else if(r===fh||r===dh){n[1]=[];for(var d=0;d<2;d++){var p=a[d],g=s[d];p[1]===g[1]?n[1].push(g[0]-p[0]):(g=xc(p,g,o[d?"outerHeight":"outerWidth"],o.root),n[1].push(g||0))}if(hc(n[1],[0,0]))return}else if(r===gh||r===vh){n[1]=[];for(var v=Math.min(a.length,s.length),m=0;m<v;m++){var y=a[m],E=s[m];if(y&&E)if(y[1]===E[1]){var x=E[0]-y[0];if(!x)return void n[1].push(null);n[1].push(x)}else{x=r===gh?"offsetWidth":"offsetHeight";-1<["padding-box","paddingBox"].indexOf(o.computedStyle[ph])?x=r===gh?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(o.computedStyle[ph])&&(x=r===gh?"width":"height");x=xc(y,E,o[x],o.root);if(!x)return void n[1].push(null);n[1].push(x)}else n[1].push(null)}}else if(r===mh){n[1]=[];for(var b=0,T=Math.min(a.length,s.length);b<T;b++){for(var A=a[b],M=s[b],O=[],R=0;R<4;R++)O.push(M[R]-A[R]);for(var S=[],C=0;C<4;C++)S.push(M[4][C]-A[4][C]);O.push(S),n[1].push(O)}}else if(vc.hasOwnProperty(r))if(a[1]===s[1]){var I=s[0]-a[0];if(0==I)return;n[1]=I}else{var k=xc(a,s,o[r===yh||r===xh?"outerWidth":"outerHeight"],o.root);if(!k)return;n[1]=k}else if(r===bh){n[1]=[];for(var w,L=Math.min(a.length,s.length),D=0;D<L;D++){var N=a[D],P=s[D];if(N&&P){for(var F=[],B=0;B<2;B++){var Y,H=N[B],G=P[B];H[1]===G[1]?F.push(G[0]-H[0]):(Y=D?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(o.computedStyle[ph])?Y=D?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(o.computedStyle[ph])&&(Y=D?"width":"height"),Y=xc(H,G,o[Y],o.root),F.push(Y||0))}hc(F,[0,0])?n[1].push(null):(n[1].push(F),w=!0)}else n[1].push(null)}if(!w)return}else if(gc.hasOwnProperty(r)){n[1]=[];for(var W=Math.min(a.length,s.length),U=0;U<W;U++){var X=a[U],V=s[U];if(X&&V&&!ac(X)&&!ac(V))if(X.k===V.k){var K=[];if("linear"===X.k||"radial"===X.k||"conic"===X.k){var z=X.v,j=V.v;K[0]=[];for(var $=o.clientWidth,Z=hc(z,j),q=0,J=Math.min(z.length,j.length);q<J;q++){var Q=z[q],tt=j[q],et=[];et.push([tt[0][0]-Q[0][0],tt[0][1]-Q[0][1],tt[0][2]-Q[0][2],tt[0][3]-Q[0][3]]),Q[1]&&tt[1]&&(Q[1][1]===tt[1][1]?et.push(tt[1][0]-Q[1][0]):(tt=xc(Q[1],tt[1],$,o.root),et.push(tt||0))),K[0].push(et)}if("linear"===X.k){var rt=Array.isArray(X.d);if(Array.isArray(V.d)!==rt){n[1].push(null);continue}if(rt){rt=[V.d[0]-X.d[0],V.d[1]-X.d[1],V.d[2]-X.d[2],V.d[3]-X.d[3]];if(Z&&hc(rt,[0,0,0,0])){n[1].push(null);continue}K[1]=rt}else{var it=V.d-X.d;if(Z&&0==it){n[1].push(null);continue}K[1]=it}}else if("radial"===X.k){it=Array.isArray(X.z);if(Array.isArray(V.z)!==it){n[1].push(null);continue}if(it){K[2]=[];for(var nt=0;nt<5;nt++){var ot=X.z[nt];void 0===ot&&(ot=1);var at=V.z[nt];void 0===at&&(at=1),K[2].push(at-ot)}Z&&hc(n[4],[0,0,0,0,0])&&n[1].push(null)}else{K[2]=[];for(var st=0;st<2;st++){var ht=X.p[st],lt=V.p[st];ht[1]===lt[1]?K[2].push(lt[0]-ht[0]):(lt=xc(ht,lt,o[st?"clientWidth":"clientHeight"],o.root),K[2].push(lt||0))}Z&&hc(n[3],[0,0])&&n[1].push(null)}}else if("conic"===X.k){K[1].push(s.d-a.d),K[2]=[];for(var ct=0;ct<2;ct++){var ut=a.p[ct],_t=s.p[ct];ut[1]===_t[1]?K[2].push(_t[0]-ut[0]):(_t=xc(ut,_t,o[ct?"clientWidth":"clientHeight"],o.root),K[2].push(_t||0))}Z&&0!==n[2]&&hc(n[3],[0,0])&&n[1].push(null)}}else hc(s,X)&&n[1].push(null),K[0]=[V[0]-X[0],V[1]-X[1],V[2]-X[2],V[3]-X[3]];n[1].push(K)}else n[1].push(null);else n[1].push(null)}}else if(fc.hasOwnProperty(r)){if(s=s[0],a=a[0],hc(s,a)||0===s[3]&&0===a[3])return;n[1]=[s[0]-a[0],s[1]-a[1],s[2]-a[2],s[3]-a[3]]}else if(pc.hasOwnProperty(r)){if(s[0][0]===a[0][0]&&s[0][1]===a[0][1]&&s[1][0]===a[1][0]&&s[1][1]===a[1][1])return;n[1]=[];for(var ft,dt=0;dt<2;dt++)s[dt][1]===a[dt][1]?n[1].push(s[dt][0]-a[dt][0]):(ft=xc(a[dt],s[dt],o[dt?"outerHeight":"outerWidth"],o.root),n[1].push(ft||0))}else if(dc.hasOwnProperty(r)){if(a[1]===Vl||s[1]===Vl)return;h=o.computedStyle,I=(o.domParent||o).computedStyle,k=0;if(a[1]===s[1]?k=s[0]-a[0]:r===Ih?k=xc(a,s,h[Th],o.root):r===Th?k=xc(a,s,I[Th],o.root):r===Ah&&-1<["column","column-reverse","columnReverse"].indexOf(h[Mh])||-1<[Rh,Sh,Ch].indexOf(r)?a[1]!==Vl&&s[1]!==Vl&&(k=xc(a,s,I[Rh],o.root)):a[1]!==Vl&&s[1]!==Vl&&(k=xc(a,s,I[Oh],o.root)),0===k||isNaN(k))return;n[1]=k}else if(_c.hasOwnProperty(r)){if(rc(a))return;if(_c[r][i]&&ic(_c[r][i].calDiff)){var pt=_c[r][i].calDiff;if(o.isMulti){for(var gt=[],vt=0,mt=Math.min(a.length,s.length);vt<mt;vt++)gt.push(pt(a[vt],s[vt]));return gt}n[1]=pt(a,s)}else if(o.isMulti)if("points"===r||"controls"===r){if(rc(s)||!s.length||rc(a)||!a.length||hc(a,s))return;n[1]=[];for(var yt=0,Et=Math.min(a.length,s.length);yt<Et;yt++){var xt=a[yt],bt=s[yt];if(rc(xt)||!xt.length||rc(bt)||!bt.length)n[1].push(null);else{for(var Tt=[],At=0,Mt=Math.min(xt.length,bt.length);At<Mt;At++){var Ot=xt[At],Rt=bt[At];if(rc(Ot)||rc(Rt))Tt.push(null);else{for(var St=[],Ct=0,It=Math.max(Ot.length,Rt.length);Ct<It;Ct++){var kt=Ot[Ct],wt=Rt[Ct];rc(kt)||rc(wt)?St.push(0):St.push(wt-kt)}Tt.push(St)}}n[1].push(Tt)}}}else if("controlA"===r||"controlB"===r){if(rc(s)||!s.length||rc(a)||!a.length||hc(a,s))return;n[1]=[];for(var Lt=0,Dt=Math.min(a.length,s.length);Lt<Dt;Lt++){var Nt=a[Lt],Pt=s[Lt];rc(Nt)||!Nt.length||rc(Pt)||!Pt.length?n[1].push(null):n[1].push([Pt[0]-Nt[0],Pt[1]-Nt[1]])}}else{if(s===a||hc(s,a)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var Ft=[],Bt=0,Yt=Math.min(a.length,s.length);Bt<Yt;Bt++){var Ht=a[Bt],Gt=s[Bt];(rc(Ht)||rc(Gt))&&Ft.push(0),Ft.push(Gt-Ht)}n[1]=Ft}else if("points"===r||"controls"===r){if(rc(s)||!s.length||rc(a)||!a.length||hc(a,s))return;n[1]=[];for(var Wt=0,Ut=Math.min(a.length,s.length);Wt<Ut;Wt++){var Xt=a[Wt],Vt=s[Wt];if(rc(Xt)||!Xt.length||rc(Vt)||!Vt.length)n[1].push(null);else{for(var Kt=[],zt=0,jt=Math.max(Xt.length,Vt.length);zt<jt;zt++){var $t=Xt[zt],Zt=Vt[zt];rc($t)||rc(Zt)?Kt.push(0):Kt.push(Zt-$t)}n[1].push(Kt)}}}else if("controlA"===r||"controlB"===r){if(rc(s)||!s.length||rc(a)||!a.length||hc(a,s))return;n[1]=[s[0]-a[0],s[1]-a[1]]}else{if(s===a||"edge"===r||"closure"===r||"booleanOperations"===r)return;n[1]=s-a}}else if(r===kh||r===wh){if(s===a)return;n[1]=s-a}else{if(r!==Gh||!a)return;var qt="offsetWidth",Jt="offsetHeight";-1<["padding-box","paddingBox"].indexOf(o.computedStyle[ph])?(qt="clientWidth",Jt="clientHeight"):-1<["content-box","contentBox"].indexOf(o.computedStyle[ph])&&(qt="width",Jt="height"),n[1]=a.map(function(t,e){var r=Qt(t,2),t=r[0],r=r[1];return r===zl?e%2==0?[.01*(parseFloat(t)||0)*o[qt],Kl]:[.01*(parseFloat(t)||0)*o[Jt],Kl]:r===Jl?[(parseFloat(t)||0)*root.computedStyle[Th]*100,Kl]:r===Ql?[.01*(parseFloat(t)||0)*root.width,Kl]:r===tc?[.01*(parseFloat(t)||0)*root.height,Kl]:[parseFloat(t)||0,Kl]})}return n}(e[jh],r[jh],t,i,n);t&&e[qh].push(t)}),r}function Tc(t,e,I,k){var r,i,n,w=cc(t[jh],e),n=(e=t[Zh],n=e?(n=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(n[1]),i=n[2],function(t){if(r&&0<r){var e=1/r;return("start"===i?Math.ceil(t/e):Math.floor(t/e))/r}return t}):uh.getEasing(e):n);n&&n!==lc&&(I=n(I));for(var L=t[qh],o=0,a=L.length;o<a;o++)!function(t){var e=Qt(L[t],2),t=e[0],l=e[1],r=w[t];if(t===Lh)for(var r=r||(w[t]=[[Yh,te.identity()]]),i=0;i<16;i++)r[0][1][i]+=l[i]*I;else if(t===Gh){var n=1-I;8===l.length?(w[yh]=[l[0][0]*n*n*n+3*l[2][0]*I*n*n+3*l[4][0]*I*I*n+l[6][0]*I*I*I,Kl],w[Eh]=[l[1][0]*n*n*n+3*l[3][0]*I*n*n+3*l[5][0]*I*I*n+l[7][0]*I*I*I,Kl]):6===l.length&&(w[yh]=[l[0][0]*n*n+2*l[2][0]*I*n+l[4][0]*I*I,Kl],w[Eh]=[l[1][0]*n*n+3*l[3][0]*I*n+l[5][0]*I*I,Kl])}else if(t===Hh)r[0]+=l[0]*I,r[1]+=l[1]*I,r[2]+=l[2]*I,r[3][0]+=l[3][0]*I;else if(yc.hasOwnProperty(t))l&&(r[0]+=l*I);else if(t===_h){r=r||(w[t]=[]);var o={};r.forEach(function(t){o[t[0]]=t[1]}),Object.keys(l).forEach(function(t){var e;o.hasOwnProperty(t)?o[t][0]+=l[t][0]*I:"blur"===t||"hue-rotate"===t||"grayscale"===t?((e=l[t].slice(0))[0]*=I,r.push([t,e])):"saturate"!==t&&"brightness"!==t&&"contrast"!==t||((e=l[t].slice(0))[0]=100+e[0]*I,r.push([t,e]))})}else if(pc.hasOwnProperty(t))for(var a=0;a<2;a++)r[a][0]+=l[a]*I;else if(t===fh||t===dh)0!==l[0]&&(r[0][0]+=l[0]*I),0!==l[1]&&(r[1][0]+=l[1]*I);else if(t===mh)for(var s=0,h=Math.min(r.length,l.length);s<h;s++){for(var c=0;c<4;c++)r[s][c]+=l[s][c]*I;for(var u=0;u<4;u++)r[s][4][u]+=l[s][4][u]*I}else if(t===bh)r.forEach(function(t,e){l[e]&&(t[0][0]+=l[e][0]*I,t[1][0]+=l[e][1]*I)});else if(t===gh||t===vh)r.forEach(function(t,e){l[e]&&(t[0]+=l[e]*I)});else if(gc.hasOwnProperty(t))r.forEach(function(t,e){var r=l[e];if(r){var i=Qt(r,4),n=i[0],e=i[1],r=i[2],i=i[3];if(mc.hasOwnProperty(t.k)){for(var o=0,a=Math.min(t.v.length,n.length);o<a;o++){var s=t.v[o],h=n[o];s[0][0]+=h[0][0]*I,s[0][1]+=h[0][1]*I,s[0][2]+=h[0][2]*I,s[0][3]+=h[0][3]*I,s[1]&&h[1]&&(s[1][0]+=h[1]*I)}"linear"===t.k&&void 0!==t.d&&void 0!==e&&(Array.isArray(e)?(t.d[0]+=e[0]*I,t.d[1]+=e[1]*I,t.d[2]+=e[2]*I,t.d[3]+=e[3]*I):t.d+=e*I),"radial"===t.k?void 0!==t.z&&void 0!==i?(t.z[0]+=i[0]*I,t.z[1]+=i[1]*I,t.z[2]+=i[2]*I,t.z[3]+=i[3]*I,t.z[4]+=i[4]*I):void 0!==t.p&&void 0!==r&&(t.p[0][0]+=r[0]*I,t.p[1][0]+=r[1]*I):"conic"===t.k&&void 0!==t.d&&void 0!==e&&(t.d+=e*I,t.p[0][0]+=r[0]*I,t.p[1][0]+=r[1]*I)}else t[0]+=n[0]*I,t[1]+=n[1]*I,t[2]+=n[2]*I,t[3]+=n[3]*I}});else if(fc.hasOwnProperty(t))(r=r[0])[0]+=l[0]*I,r[1]+=l[1]*I,r[2]+=l[2]*I,r[3]+=l[3]*I;else if(_c.hasOwnProperty(t)){var _=w[t],n=k.tagName;if(_c[t][n]&&ic(_c[t][n].calIncrease)){var f=_c[t][n].calIncrease;k.isMulti?w[t]=_.map(function(t,e){return f(t,l[e],I)}):w[t]=f(_,l,I)}else if(k.isMulti)if("points"===t||"controls"===t)for(var d=0,p=Math.min(_.length,l.length);d<p;d++){var g=_[d],v=l[d];if(!rc(g)&&!rc(v))for(var m=0,y=Math.min(g.length,v.length);m<y;m++){var E=g[m],x=v[m];if(!rc(E)&&!rc(x))for(var b=0,T=Math.min(E.length,x.length);b<T;b++)rc(E[b])||rc(x[b])||(E[b]+=x[b]*I)}}else"controlA"===t||"controlB"===t?l.forEach(function(t,e){var r=_[e];if(!rc(t)&&!rc(r))for(var i=0,n=Math.min(r.length,t.length);i<n;i++){var o=r[i],a=t[i];rc(o)||rc(a)||(r[i]+=a*I)}}):l.forEach(function(t,e){rc(t)||rc(_[e])||(_[e]+=t*I)});else if("points"===t||"controls"===t)for(var A=0,M=Math.min(_.length,l.length);A<M;A++){var O=_[A],R=l[A];if(!rc(O)&&!rc(R))for(var S=0,C=Math.min(O.length,R.length);S<C;S++)rc(O[S])||rc(R[S])||(O[S]+=R[S]*I)}else"controlA"===t||"controlB"===t?(rc(_[0])||rc(l[0])||(_[0]+=l[0]*I),rc(_[1])||rc(l[1])||(_[1]+=l[1]*I)):rc(_)||rc(l)||(w[t]+=l*I)}else t!==kh&&t!==wh||(w[t]+=l*I,t===kh&&(w[t]<0?w[t]=0:1<w[t]&&(w[t]=1)))}(o);return w}function Ac(t,e){return ic(t)&&(e=t,t={}),[t||{},e]}Object.assign(yc,dc),Object.assign(yc,vc);var Mc=0,Oc=function(){t(c,bs);var l=e(c);function c(t,n,e){var r,o;_(this,c),(r=l.call(this)).__id=Mc++,n=sc(n||[]),n=Array.isArray(n)?n.filter(function(t){return t&&oc(t)}):n&&oc(n)?(o=[],Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(o[r]=o[r]||{offset:r/(i-1)})[t]=e[r]}),o):[],nc(e)&&(r.__options={duration:e},e=r.__options);var i=r.__options=e||{duration:0},a=t.root,s=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,r.__frameCb,null,t,a,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,i.easing,!1,0,0,null,null,null,null,!1,60,"normal",r.__calDiffTime,!0,!1,!1,!1,0,t.__config,a&&a.__config,!1],h=r.iterations=i.iterations,e=r.duration=i.duration,a=Qt(r.__init(n,h,e,i.easing,t),4),h=a[0],e=a[1],t=a[2],a=a[3];s[cl]=h,s[ul]=e,s[Sl]=t,s[Cl]=a,2===h.length&&(s[Yl]=!0,s[Hl]=h[1][$h]);a=parseInt(i.fps)||0;return r.fps=a=a<=0?60:a,r.spfLimit=i.spfLimit,r.delay=i.delay,r.endDelay=i.endDelay,r.playbackRate=i.playbackRate,r.fill=i.fill,r.iterations=i.iterations,r.direction=i.direction,s[Il]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i.direction)?e:h,s[Xl]=eh.__now,r[0]=r.__before,r[1]=r.__after,r}return f(c,[{key:"__init",value:function(i,t,a,s,e){if(i.length<1)return[[],[],[],{}];for(var n=e.tagName,o=0,h=i.length;o<h;o++)(function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),o=--t,h=--e;if(r.offset<=-1)return i.splice(t,1),o=--t,h=--e}Object.keys(r).forEach(function(t){_r.hasOwnProperty(t)&&_r.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Rr.isValid(n,t)||delete r[t]}),o=t,h=e})(o,h);1===i.length?(i[0]=sc(i[0]),1===i[0].offset?i.unshift({offset:0}):((r=sc(i[0])).offset=1,i.push(r))):i.forEach(function(t,e){i[e]=sc(t)});var r=i[0];r.hasOwnProperty("offset")&&0<r.offset?i.unshift(r={offset:0}):r.offset=0;r=i[i.length-1];r.hasOwnProperty("offset")&&r.offset<1?i.push(r={offset:1}):r.offset=1;for(var l=1,c=i.length;l<c;l++)if(!(f=i[l]).hasOwnProperty("offset")){for(var u=void 0,_=l+1;_<c&&!(u=i[_]).hasOwnProperty("offset");_++);for(var f=i[l-1],d=(u.offset-f.offset)/(_-l+1),p=l;p<_;p++)i[p].offset=f.offset+d*(p+1-l);l=_}var g=[];i.forEach(function(t){var e,r,i,n,o;g.push((r=a,i=s,o=(n=e=t).offset,t=n.easing,delete e.offset,delete e.easing,n=e.translatePath,e=vn.normalize(e),Array.isArray(n)&&-1<[6,8].indexOf(n.length)&&(e[Gh]=n.map(function(t){return ec(t)})),(n=[])[jh]=e,n[$h]=o*r,n[Zh]=t||i,n[qh]=[],n))});var v,m,y,E,x,b,T=(v=e,m={},y=[],(r=g).forEach(function(t){var e=t[jh];Object.keys(e).forEach(function(t){void 0===e[t]||m.hasOwnProperty(t)||(m[t]=!0,(t=!_c.hasOwnProperty(t)?parseInt(t):t)===Gh&&(m.hasOwnProperty(yh)||y.push(yh),m.hasOwnProperty(Eh)||y.push(Eh),m[yh]=m[Eh]=!0),y.push(t))})}),r.forEach(function(t){var e=t[jh];y.forEach(function(t){e.hasOwnProperty(t)&&!rc(e[t])||(_c.hasOwnProperty(t)?e[t]=v.getProps(t):e[t]=v.currentStyle[t])})}),y);E=T,b=(x=e).computedStyle,g.forEach(function(t){var n=t[jh];E.forEach(function(t){var e,r,i=n[t];rc(i)||(t===Lh?(e=x.outerWidth,r=x.outerHeight,r=oa.calMatrix(i,e,r),n[t]=[[Yh,r]]):i[1]===jl&&(t===Dh||t===Wh?n[t]=[ue.rgba2int(b[t]),$l]:dc.hasOwnProperty(t)?n[t]=[b[t],Kl]:t===Nh?n[t]=[b[t],ql]:t!==Ph&&t!==Fh&&t!==Bh&&t!==Uh||(n[t]=[b[t],Zl])))})});var A=sc(g).reverse(),M=e.style,O=e.props,R={};T.forEach(function(t){uc(n,t)&&(R[t]=O[t]),R[t]=M[t]});for(var S=g.length,C=g[0],I=1;I<S;I++)C=bc(C,g[I],T,e,n);A.forEach(function(t){t[$h]=a-t[$h],t[qh]=[]}),C=A[0];for(var k=1;k<S;k++)C=bc(C,A[k],T,e,n);return[g,A,T,R]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[fl]=0;var i=r[dl],n=r[Sl],o=r[hl];if(t){if(r[_l]=r[Ol]+r[pl]+r[Rl],"finish"===r[El])return;r[El]="finish",r[Bl]||(r[dl]={},e=!0)}else{if(r[yl]=r[_l]=0,"idle"===r[El])return;r[El]="idle",r[dl]={},e=!0}e&&n.forEach(function(t){_c.hasOwnProperty(t)?o.__currentProps[t]===i[t]&&(o.__currentProps[t]=o.props[t]):o.__currentStyle[t]===i[t]&&(o.__currentStyle[t]=o.style[t])})}},{key:"__frameCb",value:function(t,e,r){this.emit(bs.FRAME,e,r),t[ol]&&(t[ol]=!1,this.emit(bs.PLAY)),ic(t[sl])&&(t[sl].call(this,e,r),t[sl]=null)}},{key:"__calDiffTime",value:function(t,e){var r=t[ml],i=t[wl],n=t[Ll],o=t[_l]=t[fl];return i&&(!0===i?e=Math.min(e,1e3/n):0<i&&(e=Math.min(e,i))),1!==r&&0<r&&(e*=r),t[fl]+=e,[o,e]}},{key:"play",value:function(t){var e=this.__config,r=e[xl],i=e[pl],n=e[El],o=e[cl];return r||i<=0||o.length<1||"running"===n||(this.__cancelTask(),e[sl]=t,e[El]="running",e[ol]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[Ml]||(e[Ml]=!0,n=e[ul],t=e[Dl],e[Il]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(t)?n:o,e[_l]=e[fl]=e[Tl]=0),eh.offFrame(this),eh.onFrame(this),e[bl]=eh.__now,e[rl]=!1),this}},{key:"__before",value:function(t){var e=this.__config;e[Xl]=eh.__now;var r,i=e[hl],n=e[Ll],o=e[yl],a=e[Il],s=e[gl],h=e[Fl],l=e[Bl],c=e[Ol],u=e[ll],_=e[Yl],f=e[Hl],d=e[pl],p=e[Rl],g=a.length,v=Qt(e[Nl](e,t),2),m=v[0];if(t=v[1],!e[Pl]&&n<60){if((t=e[Tl]+=t)<1e3/n)return void(e[Qh]=!0);e[Tl]=0}if(e[Pl]=!1,0===o&&m<c)return h&&Ec((e[kl]=a[0])[jh],e[Sl],e,u,i),e[Ul]=!0,void(e[tl]=!0);for(0===o&&(m-=c),0!==m&&!e[Ul]||(e[Ul]=!1,e[el]=!0);d<=m&&o<s-1;)m-=d,e[fl]-=d,o=++e[yl],r=e[el]=!0;r&&(n=e[Dl],y=e[cl],h=e[ul],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(n)&&(c=o%2==0,a=e[Il]="alternate"===n?c?y:h:c?h:y));var y=s-1<=o,f=_?(b=m<f?0:1,f):a[b=function t(e,r,i,n){if(e===r)return n[e][$h]>i?e-1:e;var o=e+(r-e>>1),a=n[o];return a[$h]===i?o:a[$h]>i?t(e,Math.max(o-1,e),i,n):t(Math.min(o+1,r),r,i,n)}(0,g-1,m,a)][$h],y=y&&b===g-1,g=0;y||(g=_?m/d:(m-f)/(a[b+1][$h]-f));var E,x,b=a[b];e[kl]=b,y?(p=m<d+p,E=cc(l?b[jh]:e[Cl],e[Sl]),e[nl]=!0,p||(e[yl]++,e[il]=!0,eh.offFrame(this),x=!0,e[fl]=0)):E=Tc(b,e[Sl],g,i),Ec(E,e[Sl],e,u,i),x&&(x=e[sl],this.__clean(!0),x&&(e[sl]=x))}},{key:"__after",value:function(t){var e=this.__config;e[Jh]=!1,e[Qh]?e[Qh]=!1:(e[al].call(this,e,t,e[tl]),e[tl]=!1,e[el]&&(e[el]=!1,this.emit(bs.BEGIN,e[yl])),e[nl]&&!e[rl]&&(e[rl]=!0,this.emit(bs.END,e[yl]-1)),e[il]&&(e[el]=e[rl]=e[tl]=e[il]=e[Qh]=e[Ml]=!1,e[El]="finished",this.emit(bs.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[xl],i=e[pl],n=this.pending;return r||i<=0||n||(e[El]="paused",this.__cancelTask(),t||this.emit(bs.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[xl],i=e[pl],e=e[El];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[xl],n=i[pl],o=i[El],a=i[cl];if(t||n<=0||a.length<1||"finished"===o||"idle"===o)return r;r.__cancelTask();var s,h=i[ll],o=i[Cl];return h&&(s=i[Bl]?(i[kl]=a[a.length-1],a[a.length-1][jh]):o,h.addRefreshTask({__before:function(){i[Jh]=!0,Ec(s,i[Sl],i,h,i[hl]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[Jh]=!1,i[al].call(r,i,t),i[el]=i[rl]=i[tl]=i[il]=i[Qh]=i[Ml]=!1,r.emit(bs.FINISH)),ic(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[xl],n=i[pl],o=i[El],a=i[cl];if(t||n<=0||"idle"===o||a.length<1)return r;r.__cancelTask();var s=i[ll],h=i[Cl];return s&&s.addRefreshTask({__before:function(){i[Jh]=!0,Ec(h,i[Sl],i,s,i[hl]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[Jh]=!1,i[al].call(r,i,t),i[el]=i[rl]=i[tl]=i[il]=i[Qh]=i[Ml]=!1,r.emit(bs.CANCEL)),ic(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,n=i[xl],o=i[pl],a=i[cl],s=i[Ol],i=i[Rl];if(n||o<=0||a.length<1)return this;a=Qt(Ac(e,r),2);return e=a[0],r=a[1],this.__goto(t,e.isFrame,e.excludeDelay),o+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,n=this.__config,o=n[xl],a=n[pl],s=n[cl],h=n[Ol],l=n[Rl];if(o||a<=0||s.length<1)return this;s=Qt(Ac(e,r),2);return e=s[0],r=s[1],a+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){n[El]="paused",i.__cancelTask(),ic(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[dl],i=t[hl];t[Sl].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],_c.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,n=i[pl];if(i[El]="paused",this.__cancelTask(),isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);for(e&&(t=(t-1)/this.spf),r&&(t+=i[Ol]),t>n+i[Ol]&&(t-=i[Ol]),i[yl]=0;n<t&&i[yl]<i[gl]-1;)i[yl]++,t-=n;i[fl]=t,i[Ml]=!0;var o=i[cl],a=i[ul],e=i[Dl];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(e)&&(r=i[yl]%2==0,i[Il]="alternate"===e?r?o:a:r?a:o),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[hl]=t,this.__config[Gl]=t.__config}},{key:"__cancelTask",value:function(){eh.offFrame(this),this.__config[sl]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[xl]||(e.removeControl(),t?(e.__clean(),r[hl]=null):eh.nextFrame({__before:function(){e.__clean(),r[hl]=null}}),r[bl]=0,r[xl]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[El]&&"finished"!==t[El]&&Le.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[hl]}},{key:"root",get:function(){return this.__config[ll]}},{key:"keys",get:function(){return this.__config[Sl]}},{key:"style",get:function(){return this.__config[dl]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[pl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[pl]!==t&&(e[pl]=t,e[Hl]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[Ol]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Ol]!==t&&(e[Ol]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[Rl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Rl]!==t&&(e[Rl]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[Ll]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[Ll]!==t&&(e[Ll]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[gl]},set:function(t){t===1/0||ue.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[gl]!==t&&(e[gl]=t),t}},{key:"fill",get:function(){return this.__config[vl]},set:function(t){var e=this.__config;return e[vl]!==(t=t||"none")&&(e[vl]=t,this.__checkModify()),e[Fl]={backwards:!0,both:!0}.hasOwnProperty(t),e[Bl]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[Dl]},set:function(t){var e=this.__config;return e[Dl]!==(t=t||"normal")&&(e[Dl]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[cl]}},{key:"framesR",get:function(){return this.__config[ul]}},{key:"playbackRate",get:function(){return this.__config[ml]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[ml]!==(t=t<=0?1:t)&&(e[ml]=t),t}},{key:"easing",get:function(){return this.__config[Al]}},{key:"startTime",get:function(){return this.__config[bl]}},{key:"currentTime",get:function(){return this.__config[_l]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[_l]!==t&&(e[_l]=t,e[fl]=t),t}},{key:"nextTime",get:function(){return this.__config[fl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[fl]!==t&&(e[fl]=t),t}},{key:"timestamp",get:function(){return this.__config[Xl]}},{key:"pending",get:function(){return"running"!==this.__config[El]}},{key:"finished",get:function(){return"finished"===this.__config[El]}},{key:"playState",get:function(){return this.__config[El]}},{key:"playCount",get:function(){return this.__config[yl]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[yl]!==t&&(e[yl]=t),t}},{key:"isDestroyed",get:function(){return this.__config[xl]}},{key:"animating",get:function(){var t=this.__config,e=t[El];return"idle"!==e&&("finished"!==e||t[Bl]||t[Fl])}},{key:"spfLimit",get:function(){return this.__config[wl]},set:function(t){t=ue.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[wl]!==t&&(e[wl]=t),t}},{key:"assigning",get:function(){return this.__config[Jh]}}]),c}(),Rc=m.NODE_KEY.NODE_DEFS_CACHE,Sc=ue.int2rgba,Cc=Tt.canvasPolygon,Ic=Tt.svgPolygon;var kc={renderBoxShadow:function(t,e,r,i,n,o,a,s,h,l){var c=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,u=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0;n+=c,o+=u,a+=c,s+=u;var _,f,d=Qt(i,6),p=d[0],g=d[1],v=d[2],m=d[3],y=d[4],E=d[5],x=Sc(y),b=2*Math.abs(v)+2*Math.abs(m)+2*Math.abs(p)+2*Math.abs(g),T=[[n,o],[a,o],[a,s],[n,s],[n,o]],A=[[n-b,o-b],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b]];if(0<y[3]&&(0<v||0<m))if(e===rt.CANVAS|e===rt.WEBGL){if(r.save(),r.beginPath(),"inset"===E){c=n+p+m,u=o+g+m,i=a+p-m,d=s+g-m,y=[[c,u],[i,u],[i,d],[c,d]],y=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[y[0][0],y[0][1],y[2][0],y[2][1]]);if(!y)return;y=[[y[0],y[1]],[y[2],y[1]],[y[2],y[3]],[y[0],y[3]],[y[0],y[1]]],m?(Cc(r,y),Cc(r,T.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==x&&(r.fillStyle=x),Cc(r,T),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),Cc(r,y),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=x,r.shadowBlur=v,Cc(r,[[c,u],[i,u],[i,d],[n-b,d],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,d],[c,d],[c,u]])):(Cc(r,T),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=p,r.shadowOffsetY=g,r.shadowColor=x,r.shadowBlur=v,Cc(r,[[n,o],[a,o],[a,s],[n-b,s],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,s],[n,s],[n,o]]))}else{var M=n+p-m,O=o+g-m,R=a+p+m,S=s+g+m,C=[[M,O],[R,O],[R,S],[M,S]],I=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[C[0][0],C[0][1],C[2][0],C[2][1]]);m?(Cc(r,T),Cc(r,C.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==x&&(r.fillStyle=x),Cc(r,C),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),I&&Cc(r,[[I[0],I[1]],[I[2],I[1]],[I[2],I[3]],[I[0],I[3]],[I[0],I[1]]].reverse()),Cc(r,T),Cc(r,C),Cc(r,A),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=x,r.shadowBlur=v,Cc(r,C)):(Cc(r,T),Cc(r,A),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=p,r.shadowOffsetY=g,r.shadowColor=x,r.shadowBlur=v,Cc(r,T))}r.fill(),r.closePath(),r.restore()}else e===rt.SVG&&(O=ha.outerSize(v),"inset"===E?(e=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[(C=[[R=n+p+m,M=o+g+m],[S=a+p-m,M],[S,I=s+g-m],[R,I]])[0][0],C[0][1],C[2][0],C[2][1]]))&&(e=[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]],m?(t.__config[Rc].push(E={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",x]]}]}),_=r.add(E),C={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ic(e)+Ic(T.slice(0).reverse())],["fill","#FFF"]]}]},f=r.add(C),t.__config[Rc].push(C),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ic(T)],["fill",x],["clip-path","url(#"+f+")"]]}),E={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ic(e)],["fill","#FFF"]]}]},f=r.add(E),t.__config[Rc].push(E),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ic([[R,M],[S,M],[S,I],[n-b,I],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,I],[R,I],[R,M]])],["fill","#FFF"],["filter","url(#"+_+")"],["clip-path","url(#"+f+")"]]})):(_=r.add(M={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",p],["dy",g],["stdDeviation",.5*v],["flood-color",x]]}]}),t.__config[Rc].push(M),M={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ic(T)],["fill","#FFF"]]}]},f=r.add(M),t.__config[Rc].push(M),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ic([[n,o],[a,o],[a,s],[n-b,s],[n-b,s+b],[a+b,s+b],[a+b,o-b],[n-b,o-b],[n-b,s],[n,s],[n,o]])],["fill","#FFF"],["filter","url(#"+_+")"],["clip-path","url(#"+f+")"]]}))):(s=et.getRectsIntersection([T[0][0],T[0][1],T[2][0],T[2][1]],[(a=[[n=n+p-m,o=o+g-m],[a=a+p+m,o],[a,o=s+g+m],[n,o]])[0][0],a[0][1],a[2][0],a[2][1]]),m?(o=r.add(n={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",x]]}]}),t.__config[Rc].push(n),n={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ic(T)+Ic(a.slice(0).reverse())],["fill","#FFF"]]}]},m=r.add(n),t.__config[Rc].push(n),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ic(a)],["fill",x],["clip-path","url(#"+m+")"]]}),n={tagName:"clipPath",children:[{tagName:"path",props:[["d",(s?Ic([[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()):"")+Ic(T)+Ic(a)+Ic(A)],["fill","#FFF"]]}]},m=r.add(n),t.__config[Rc].push(n),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ic(a)],["fill","#FFF"],["filter","url(#"+o+")"],["clip-path","url(#"+m+")"]]})):(x=r.add(v={tagName:"filter",props:[["x",-O/h],["y",-O/l],["width",1+2*O/h],["height",1+2*O/l]],children:[{tagName:"feDropShadow",props:[["dx",p],["dy",g],["stdDeviation",.5*v],["flood-color",x]]}]}),t.__config[Rc].push(v),v={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ic(T)+Ic(A)],["fill","#FFF"]]}]},r=r.add(v),t.__config[Rc].push(v),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ic(T)],["fill","#FFF"],["filter","url(#"+x+")"],["clip-path","url(#"+r+")"]]}))))}},wc={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,"color-dodge":!0,"color-burn":!0,"hard-light":!0,"soft-light":!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};function Lc(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})}var $t=Lc,Y=function(t){return wc.hasOwnProperty(Lc(t))},ft=m.STYLE_KEY,Dc=ft.MARGIN_LEFT,Nc=ft.MARGIN_RIGHT,Pc=ft.PADDING_LEFT,Fc=ft.PADDING_RIGHT,Bc=ft.BORDER_LEFT_WIDTH,Yc=ft.BORDER_RIGHT_WIDTH;var Hc={getInlineBox:function(t,e,r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m){var y=0,E=0;"paddingBox"===c||"padding-box"===c?(y=u,E=f):"contentBox"!==c&&"content-box"!==c&&(y=u+p,E=f+v);for(var x,p=u+p,f=f+v,v=n.baseLine-o,b=r.x,T=(r instanceof Rn?r.parent:r).domParent;T!==t;)r===T.contentBoxList[0]&&(b-=(x=T.computedStyle)[Dc]+x[Pc]+x[Bc]),T=T.domParent;o=b,h&&("paddingBox"===c||"padding-box"===c?b-=d:"contentBox"!==c&&"content-box"!==c&&(b-=d+m),o-=d+m);for(var m=n.y+v-y,y=n.y+v-p,A=i.x+i.outerWidth,T=(i instanceof Rn?i.parent:i).domParent;T!==t;){var M=T.contentBoxList;i===M[M.length-1]&&(A+=(M=T.computedStyle)[Nc]+M[Fc]+M[Yc]),T=T.domParent}return p=A,l&&("paddingBox"===c||"padding-box"===c?A+=_:"contentBox"!==c&&"content-box"!==c&&(A+=_+g),p+=_+g),E=n.y+v+a-s+E,f=n.y+v+a-s+f,b+=t.ox,A+=t.ox,o+=t.ox,p+=t.ox,[b,m+=t.oy,A,E+=t.oy,o,y+=t.oy,p,f+=t.oy]},getInlineWidth:function(t,e){for(var r=0,i=e.length,n=0;n<i;n++){var o=e[n];r+=o.width;for(var a=(o instanceof Rn?o.parent:o).domParent;a!==t;){var s,h=a.contentBoxList;o===h[0]&&(r+=(s=a.computedStyle)[Dc]+s[Pc]+s[Bc]),o===h[h.length-1]&&(r+=(h=a.computedStyle)[Nc]+h[Fc]+h[Yc]),a=a.domParent}}return r}},Gc=Tt.svgPolygon,Wc=rt.CANVAS,Uc=rt.SVG,Xc=rt.WEBGL,Vc=_a.LOCAL,Kc=m.STYLE_KEY,zc=m.STYLE_RV_KEY,jc=m.style2Upper,sr=m.STYLE_KEY,$c=sr.BORDER_TOP_LEFT_RADIUS,Zc=sr.BORDER_TOP_RIGHT_RADIUS,qc=sr.BORDER_BOTTOM_LEFT_RADIUS,Jc=sr.BORDER_BOTTOM_RIGHT_RADIUS,Qc=sr.PADDING_LEFT,tu=sr.PADDING_RIGHT,eu=sr.PADDING_TOP,ru=sr.PADDING_BOTTOM,iu=sr.MARGIN_LEFT,nu=sr.MARGIN_TOP,ou=sr.MARGIN_BOTTOM,au=sr.MARGIN_RIGHT,su=sr.BORDER_LEFT_WIDTH,hu=sr.BORDER_TOP_WIDTH,lu=sr.BORDER_BOTTOM_WIDTH,cu=sr.BORDER_RIGHT_WIDTH,uu=sr.TOP,_u=sr.RIGHT,fu=sr.BOTTOM,du=sr.LEFT,pu=sr.POSITION,gu=sr.DISPLAY,vu=sr.WIDTH,mu=sr.HEIGHT,yu=sr.MATRIX,Eu=sr.TRANSLATE_X,xu=sr.TRANSLATE_Y,bu=sr.TRANSLATE_Z,Tu=sr.TRANSFORM,Au=sr.SCALE_X,Mu=sr.SCALE_Y,Ou=sr.SCALE_Z,Ru=sr.ROTATE_X,Su=sr.ROTATE_Y,Cu=sr.ROTATE_Z,Iu=sr.SKEW_X,ku=sr.SKEW_Y,wu=sr.PERSPECTIVE,Lu=sr.PERSPECTIVE_ORIGIN,Du=sr.ROTATE_3D,Nu=sr.TRANSFORM_ORIGIN,Pu=sr.BACKGROUND_POSITION_X,Fu=sr.BACKGROUND_POSITION_Y,Bu=sr.BACKGROUND_SIZE,Yu=sr.BACKGROUND_COLOR,Hu=sr.BACKGROUND_IMAGE,Gu=sr.BACKGROUND_REPEAT,Wu=sr.BOX_SHADOW,Uu=sr.OPACITY,Xu=sr.Z_INDEX,Vu=sr.BORDER_TOP_STYLE,Ku=sr.BORDER_RIGHT_STYLE,zu=sr.BORDER_BOTTOM_STYLE,ju=sr.BORDER_LEFT_STYLE,$u=sr.FILTER,Zu=sr.OVERFLOW,qu=sr.MIX_BLEND_MODE,Ju=sr.TEXT_OVERFLOW,Qu=sr.BORDER_TOP_COLOR,t_=sr.BORDER_BOTTOM_COLOR,e_=sr.BORDER_LEFT_COLOR,r_=sr.BORDER_RIGHT_COLOR,i_=sr.FONT_STYLE,n_=sr.COLOR,o_=sr.VISIBILITY,a_=sr.POINTER_EVENTS,s_=sr.BORDER_TOP,h_=sr.BORDER_RIGHT,l_=sr.BORDER_BOTTOM,c_=sr.BORDER_LEFT,u_=sr.BACKGROUND_CLIP,__=sr.FONT_SIZE,f_=sr.FONT_FAMILY,d_=sr.LINE_HEIGHT,p_=sr.TEXT_STROKE_COLOR,g_=sr.TEXT_STROKE_WIDTH,v_=sr.TEXT_STROKE_OVER,qt=m.UPDATE_KEY,m_=qt.UPDATE_NODE,y_=qt.UPDATE_FOCUS,E_=qt.UPDATE_STYLE,x_=qt.UPDATE_OVERWRITE,b_=qt.UPDATE_KEYS,T_=qt.UPDATE_CONFIG,A_=qt.UPDATE_REMOVE_DOM,M_=m.STRUCT_KEY.STRUCT_HAS_MASK,fr=m.NODE_KEY,O_=fr.NODE_TAG_NAME,R_=fr.NODE_CACHE_STYLE,S_=fr.NODE_CURRENT_STYLE,C_=fr.NODE_COMPUTED_STYLE,I_=fr.NODE_STYLE,k_=fr.NODE_STRUCT,w_=fr.NODE_OPACITY,L_=fr.NODE_MATRIX_EVENT,D_=fr.NODE_MATRIX,N_=fr.NODE_LIMIT_CACHE,P_=fr.NODE_HAS_CONTENT,F_=fr.NODE_REFRESH_LV,B_=fr.NODE_CACHE,Y_=fr.NODE_CACHE_TOTAL,H_=fr.NODE_CACHE_FILTER,G_=fr.NODE_CACHE_MASK,W_=fr.NODE_CACHE_OVERFLOW,U_=fr.NODE_IS_DESTROYED,X_=fr.NODE_DEFS_CACHE,V_=fr.NODE_DOM_PARENT,K_=fr.NODE_IS_INLINE,z_=fr.NODE_PERSPECTIVE_MATRIX,j_=fr.NODE_IS_MASK,$_=fr.NODE_VIRTUAL_DOM,Z_=fr.NODE_CACHE_AS_BITMAP,q_=S.AUTO,J_=S.PX,Q_=S.PERCENT,tf=S.INHERIT,ef=S.NUMBER,rf=S.REM,nf=S.VW,of=S.VH,af=S.DEG,sf=ue.int2rgba,hf=ue.rgba2int,lf=ue.joinArr,cf=ue.isNil,uf=vn.calRelative,_f=Rr.GEOM,ff=$t,df=Y,pf=te.point2d,gf=ba.contain,vf=ba.NONE,mf=ba.TRANSFORM,yf=ba.REFLOW,Ef=ba.REPAINT,xf=ba.TRANSLATE_X,bf=ba.TRANSLATE_Y,Tf=ba.TRANSLATE_Z;function Af(t){for(var e=0,r=t.flowChildren,i=r.length,n=0;n<i;n++){var o=r[n];if(!(o instanceof Mf||o instanceof Ss&&o.shadowRoot instanceof Mf))break;if(o.flowChildren.length){e+=Af(o);break}o.__config[K_]&&(e+=o.outerWidth)}return e}var Mf=function(){t(o,R);var n=e(o);function o(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_(this,o),r=n.call(this),Array.isArray(e)?r.props=ue.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[];var i=r.__isClip=!!r.props.clip,e=r.__isMask=i||!!r.props.mask,i=r.__config;return i[O_]=t,i[R_]=r.__cacheStyle,i[S_]=r.__currentStyle,i[C_]=r.__computedStyle,i[F_]=yf,i[I_]=r.__style,i[D_]=[],i[L_]=[],i[X_]=r.__cacheDefs,i[j_]=e,r.__frameAnimateList=[],r.__contentBoxList=[],i[Z_]=r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r}return f(o,[{key:"__structure",value:function(t,e,r){r=P(N(o.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(r[M_]=this.__hasMask),this.__config[k_]=r}},{key:"__mp",value:function(r,i,n){var o=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=Kc[jc("margin"+t)],t=Kc[jc("padding"+t)];i[e]=o.__mpWidth(r[e],n),i[t]=o.__mpWidth(r[t],n)})}},{key:"__mpWidth",value:function(t,e){return t[1]===J_?t[0]:t[1]===Q_?t[0]*e*.01:t[1]===rf?t[0]*this.root.computedStyle[__]:t[1]===nf?t[0]*this.root.width*.01:t[1]===of?t[0]*this.root.height*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[Qc]+r[tu],this.__clientHeight=e+=r[eu]+r[ru],this.__offsetWidth=t+=r[su]+r[cu],this.__offsetHeight=e+=r[hu]+r[lu],this.__outerWidth=t+r[iu]+r[au],this.__outerHeight=e+r[nu]+r[ou]}},{key:"__calMp",value:function(t,e,r){var i=0;return t[1]===J_?i+=t[0]:t[1]!==Q_||r?t[1]===rf?i+=t[0]*this.root.computedStyle[__]:t[1]===nf?i+=t[0]*this.root.width*.01:t[1]===of&&(i+=t[0]*this.root.height*.01):(t[0]*=.01*e,t[1]=J_,i+=t[0]),i}},{key:"__addMp",value:function(t,e,r,i,n){var o,a,s=r[iu],h=r[nu],l=r[au],c=r[ou],u=r[Qc],_=r[eu],f=r[tu],d=r[ru],p=r[hu],g=r[cu],v=r[lu],r=r[su];return i=t?(o=this.__calMp(s,e,!n)+this.__calMp(l,e,!n)+this.__calMp(u,e,!n)+this.__calMp(f,e,!n),r[1]===J_?o+=r[0]:r[1]===rf?o+=r[0]*this.root.computedStyle[__]:r[1]===nf?o+=r[0]*this.root.width*.01:r[1]===of&&(o+=r[0]*this.root.height*.01),g[1]===J_?o+=g[0]:g[1]===rf?o+=g[0]*this.root.computedStyle[__]:g[1]===nf?o+=g[0]*this.root.width*.01:g[1]===of&&(o+=g[0]*this.root.height*.01),i.map(function(t){return t+o})):(a=this.__calMp(h,e,!n)+this.__calMp(c,e,!n)+this.__calMp(_,e,!n)+this.__calMp(d,e,!n),p[1]===J_?a+=p[0]:p[1]===rf?a+=p[0]*this.root.computedStyle[__]:p[1]===nf?a+=p[0]*this.root.width*.01:p[1]===of&&(a+=p[0]*this.root.height*.01),v[1]===J_?a+=v[0]:v[1]===rf?a+=v[0]*this.root.computedStyle[__]:v[1]===nf?a+=v[0]*this.root.width*.01:v[1]===of&&(a+=v[0]*this.root.height*.01),i.map(function(t){return t+a}))}},{key:"__layout",value:function(t,e,r){vn.computeReflow(this,this.isShadowRoot);var i=t.w,n=this.isDestroyed,o=this.currentStyle,a=this.computedStyle,s=this.__config,h=a[gu],l=o[vu],c=o[pu];if(this.clearCache(),this.__layoutData={x:t.x,y:t.y,w:t.w,h:t.h,lx:t.lx},s[F_]=yf,s[N_]=!1,s[K_]=!1,!e){var u=this.next;if(!this.isMask&&u&&u.isMask){for(var _=0;u&&u.isMask;)_++,u=u.next;this.__hasMask=_}}if(this.__ox=this.__oy=0,n||"none"===h)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=a[vu]=a[mu]=0,this.__x=t.x,this.__y=t.y,void this.__layoutNone();if(r||this.__mp(o,a,i),l[1]!==q_)if(this.__isRealInline()&&"inline"===o[gu])l[0]=0,l[1]=q_;else switch(l[1]){case J_:i=l[0];break;case Q_:i*=.01*l[0];break;case rf:i=l[0]*this.root.computedStyle[__];break;case nf:i=l[0]*this.root.width*.01;break;case of:i=l[0]*this.root.height*.01}var f,d=0;"flex"===h?this.__layoutFlex(t,e):"inlineBlock"===h||"inline-block"===h?d=this.__layoutInline(t,e):"inline"===h?d=this.__layoutInline(t,e,!0):this.__layoutBlock(t,e),"relative"===c?(f=o[uu],n=o[_u],h=o[fu],t=o[du],e=this.parent,f[1]!==q_?(f=uf(o,uu,f,e),this.__offsetY(f),a[uu]=f,a[fu]="auto"):h[1]!==q_?(h=uf(o,fu,h,e),this.__offsetY(-h),a[fu]=h,a[uu]="auto"):a[uu]=a[fu]="auto",t[1]!==q_?(t=uf(o,du,t,e,!0),this.__offsetX(t),a[du]=t,a[_u]="auto"):n[1]!==q_?(p=uf(o,_u,n,e,!0),this.__offsetX(-p),a[_u]=p,a[du]="auto"):a[du]=a[_u]="auto"):"absolute"!==c&&(a[uu]=a[fu]=a[du]=a[_u]="auto");var p=this.__sx=this.x+this.ox,c=this.__sy=this.y+this.oy;return s[K_]||(p=this.__sx1=p+a[iu],p=this.__sx2=p+a[su],p=this.__sx3=p+a[Qc],p=this.__sx4=p+this.width,p=this.__sx5=p+a[tu],this.__sx6=p+a[cu],c=this.__sy1=c+a[nu],c=this.__sy2=c+a[hu],c=this.__sy3=c+a[eu],c=this.__sy4=c+this.height,c=this.__sy5=c+a[ru],this.__sy6=c+a[lu]),a[vu]=this.width,a[mu]=this.height,r||this.__execAr(),d}},{key:"__execAr",value:function(){var t,e=this.__animateRecords;e&&(this.__animateRecords=null,e.list.forEach(function(t){t.target.vd instanceof o&&(t.target=t.target.vd)}),t=e.controller||this.root.animateController,e.options&&!1===e.options.autoPlay?(t.__records2=t.__records2.concat(e.list),t.init(t.__records2,t.list2)):(t.__records=t.__records.concat(e.list),t.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[gu]="none",t[nu]=t[au]=t[ou]=t[iu]=t[eu]=t[tu]=t[ru]=t[Qc]=0}},{key:"__preLayout",value:function(t,e){var r=t.x,i=t.y,n=t.w,o=t.h,a=t.w2,s=t.h2,h=t.w3,l=t.h3,c=t.lx,u=t.nowrap,_=t.lineBoxManager,f=t.endSpace,d=void 0===f?0:f;this.__x=r,this.__y=i;var p,g,v=this.currentStyle,m=this.computedStyle,y=v[vu],E=v[mu],x=m[hu],b=m[cu],T=m[lu],A=m[su],M=m[nu],O=m[au],R=m[ou],S=m[iu],C=m[eu],f=m[tu],v=m[ru],m=m[Qc];if(void 0!==a)p=!0,n=a;else if(void 0!==h)p=!0,n=h;else if(y[1]!==q_)switch(p=!0,y[1]){case J_:n=y[0];break;case Q_:n*=.01*y[0];break;case rf:n=y[0]*this.root.computedStyle[__];break;case nf:n=y[0]*this.root.width*.01;break;case of:n=y[0]*this.root.height*.01}if(void 0!==s)g=!0,o=s;else if(void 0!==l)g=!0,o=l;else if(E[1]!==q_)switch(g=!0,E[1]){case J_:o=E[0];break;case Q_:o*=.01*E[0];break;case rf:o=E[0]*this.root.computedStyle[__];break;case nf:o=E[0]*this.root.width*.01;break;case of:o=E[0]*this.root.height*.01}t.x=r+=A+S+m,e||(i+=x+M+C),t.y=i;t=e?f+b+O:0;return e||(y[1]!==q_&&void 0===h||(n-=A+b+S+O+m+f),E[1]!==q_&&void 0===l||(o-=x+T+M+R+C+v)),{fixedWidth:p,fixedHeight:g,x:r,y:i,w:n,h:o,lx:c,lineBoxManager:_,nowrap:u,endSpace:d,selfEndSpace:t}}},{key:"__marginAuto",value:function(t,e){var r=t[pu],i=t[gu],n=t[iu],o=t[au],t=t[vu];"absolute"===r||"block"!==i&&"flex"!==i||t[1]===q_&&"img"!==this.tagName||n[1]!==q_||o[1]!==q_||(o=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-o),!0)}},{key:"__calMatrix",value:function(t,e,i,n,r,o,a,s,h){var l=this;if(r[K_])return n[Nu]=[o,a],e[yu]=te.identity();var c,u,_,f,d,p=e[yu];return p&&t<yf&&!gf(t,mf)?(f=u=c=0,gf(t,xf)&&(r=i[Eu],c=(r=cf(r)?0:r[1]===Q_?r[0]*this.offsetWidth*.01:r[1]===rf?r[0]*this.root.computedStyle[__]:r[1]===nf?r[0]*this.root.width*.01:r[1]===of?r[0]*this.root.height*.01:r[0])-(n[Eu]||0),n[Eu]=r,n[Tu][12]+=c,p[12]+=c),gf(t,bf)&&(c=i[xu],u=(c=cf(c)?0:c[1]===Q_?c[0]*this.offsetHeight*.01:c[1]===rf?c[0]*this.root.computedStyle[__]:c[1]===nf?c[0]*this.root.width*.01:c[1]===of?c[0]*this.root.height*.01:c[0])-(n[xu]||0),n[xu]=c,n[Tu][13]+=u,p[13]+=u),gf(t,Tf)&&(t=i[bu],f=(t=cf(t)?0:t[1]===Q_?t[0]*this.offsetWidth*.01:t[1]===rf?t[0]*this.root.computedStyle[__]:t[1]===nf?t[0]*this.root.width*.01:t[1]===of?t[0]*this.root.height*.01:t[0])-(n[bu]||0),n[bu]=t,n[Tu][14]+=f,p[14]+=f),e[yu]=p):(void 0===o&&(o=this.__sx1,a=this.__sy1,s=this.offsetWidth,h=this.offsetHeight),void 0===e[Nu]&&(e[Nu]=!0,p=null,n[Nu]=oa.calOrigin(i[Nu],s,h,this.root)),void 0!==e[Tu]&&void 0!==e[Eu]&&void 0!==e[xu]&&void 0!==e[bu]&&void 0!==e[Ru]&&void 0!==e[Su]&&void 0!==e[Cu]&&void 0!==e[Du]&&void 0!==e[Au]&&void 0!==e[Mu]&&void 0!==e[Ou]&&void 0!==e[Iu]&&void 0!==e[ku]||(e[Tu]=e[Eu]=e[xu]=e[bu]=e[Ru]=e[Su]=e[Cu]=e[Au]=e[Mu]=e[Ou]=e[Iu]=e[ku]=!0,p=null,i[Tu]?d=oa.calMatrix(i[Tu],s,h,this.root):(_=[],[Eu,xu,bu,Ru,Su,Cu,Du,Iu,ku,Au,Mu,Ou].forEach(function(t){delete n[t];var e=i[t];if(!cf(e)){if(t===Du)return n[t]=[e[0],e[1],e[2],e[3][0]],0===e[3][0]?void 0:void _.push([t,e]);n[t]=e[0];var r=t===Au||t===Mu||t===Ou;1===e[0]&&r||!r&&0===e[0]||(e[1]===Q_?t===Eu||t===bu?n[t]=e[0]*s*.01:t===xu&&(n[t]=e[0]*h*.01):e[1]===rf?t!==Eu&&t!==bu&&t!==xu||(n[t]=e[0]*l.root.computedStyle[__]):e[1]===nf?t!==Eu&&t!==bu&&t!==xu||(n[t]=e[0]*l.root.width*.01):e[1]!==of||t!==Eu&&t!==bu&&t!==xu||(n[t]=e[0]*l.root.height*.01),_.push([t,e]))}}),_.length&&(d=oa.calMatrix(_,s,h,this.root))),n[Tu]=d||te.identity()),p||(f=n[Tu],(d=n[Nu].slice(0))[0]+=o||0,d[1]+=a||0,p=e[yu]=oa.calMatrixByOrigin(f,d))),p}},{key:"__calCache",value:function(t,o,e,s,r,h,i,n,a,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R,S,C){var I=this,k=m,w=A,L=T,D=C,N=h[u_]=r[u_];"paddingBox"===N||"padding-box"===N?(k=y,w=M,L=b,D=S):"contentBox"!==N&&"content-box"!==N||(k=E,w=O,L=x,D=R);var P,F=this.__config[K_];F&&!this.contentBoxList.length&&(F=!1),[Uu,Xu,Vu,Ku,zu,ju,Gu,Zu,qu,Ju,u_].forEach(function(t){h[t]=r[t]}),cf(s[$u])&&(s[$u]=!0,this.__calFilter(r,h)),cf(s[Pu])&&(s[Pu]=!0,R=r[Pu],h[Pu]=(R||[]).map(function(t){return t[1]===J_?t[0]:t[1]===rf?t[0]*I.root.computedStyle[__]:t[1]===nf?t[0]*I.root.width*.01:t[1]===of?t[0]*I.root.height*.01:t[1]===Q_?t[0]+"%":void 0})),cf(s[Fu])&&(s[Fu]=!0,P=r[Fu],h[Fu]=(P||[]).map(function(t){return t[1]===J_?t[0]:t[1]===rf?t[0]*I.root.computedStyle[__]:t[1]===nf?t[0]*I.root.width*.01:t[1]===of?t[0]*I.root.height*.01:t[1]===Q_?t[0]+"%":void 0})),cf(s[Bu])&&(s[Bu]=!0,h[Bu]=(r[Bu]||[]).map(function(t){return Js.calBackgroundSize(t,L-k,D-w,I.root)})),cf(s[Hu])&&(P=h[Hu]=r[Hu].slice(0),s[Hu]=P.map(function(t,e){if(!t)return null;if(ue.isString(t)){var r,i,n=I.__loadBgi[e]=I.__loadBgi[e]||{},e=Le.IMG[Hu];return e&&e.state===Le.LOADED?(n.url=Hu,n.source=e.source,n.width=e.width,n.height=e.height):n.url!==t&&(n.url=t,n.source=null,i=(r=I).root,Le.measureImg(t,function(t){t.success&&t.url===n.url&&!I.isDestroyed&&(n.source=t.source,n.width=t.width,n.height=t.height,i.delRefreshTask(n.cb),i.addRefreshTask(n.cb={__before:function(){s[Hu]=void 0;var t={};t[m_]=r,t[y_]=Ef,t[T_]=r.__config,i.__addUpdate(r,r.__config,i,i.__config,t)}}))},{ctx:o,root:i,width:L-k,height:D-w})),!0}return!(F||!t.k)||void 0})),cf(s[Wu])&&(s[Wu]=!0,h[Wu]=(r[Wu]||[]).map(function(t){return t.map(function(t,e){if(3<e)return t;var r=t[0];return t[1]===Q_?r*=e%2==0?.01*(L-k):.01*(D-w):t[1]===rf?r*=I.root.computedStyle[__]:t[1]===nf?r=r*I.root.width*.01:t[1]===of&&(r=r*I.root.height*.01),r})})),[Yu,Qu,r_,t_,e_].forEach(function(t){cf(s[t])&&(s[t]=sf(h[t]=r[t][0]))}),(cf(s[$c])||cf(s[Zc])||cf(s[Jc])||cf(s[qc]))&&(s[$c]=s[Zc]=s[Jc]=s[qc]=!0,F?Xt.calBorderRadiusInline(this.contentBoxList,r,h,this.root):Xt.calBorderRadius(a,l,r,h,this.root));var B=h[$c],Y=h[Zc],H=h[Jc],G=h[qc];["Top","Right","Bottom","Left"].forEach(function(t){var e,r,i,n,o=Kc[jc(t="border"+t)],a=Kc[jc(t+"Width")],t=Kc[jc(t+"Style")];cf(s[a])&&(s[a]=!0,s[o]=void 0),cf(s[t])&&(s[t]=!0,s[o]=void 0),cf(s[o])&&(o===s_?0<c?F||(e=Math.atan(c/f),r=Math.atan(c/u),s[o]=Xt.calPoints(c,h[t],e,r,m,y,b,T,A,M,S,C,0,B,Y)):s[o]=[]:o===h_?0<u?F||(e=Math.atan(u/c),r=Math.atan(u/_),s[o]=Xt.calPoints(u,h[t],e,r,m,y,b,T,A,M,S,C,1,Y,H)):s[o]=[]:o===l_?0<_?F||(i=Math.atan(_/f),n=Math.atan(_/u),s[o]=Xt.calPoints(_,h[t],i,n,m,y,b,T,A,M,S,C,2,G,H)):s[o]=[]:o===c_&&(0<f?F||(i=Math.atan(f/c),n=Math.atan(f/_),s[o]=Xt.calPoints(f,h[t],i,n,m,y,b,T,A,M,S,C,3,B,G)):s[o]=[]))});a=e&&e.computedStyle;return r[i_][1]===tf?h[i_]=e?a[i_]:"normal":cf(s[i_])&&(h[i_]=r[i_][0]),s[i_]=h[i_],r[n_][1]===tf?(h[n_]=e?a[n_]:[0,0,0,1],s[n_]=sf(h[n_])):cf(s[n_])&&(h[n_]=hf(r[n_][0]),s[n_]=sf(h[n_])),r[p_][1]===tf?(h[p_]=e?a[p_]:[0,0,0,1],s[p_]=sf(h[p_])):cf(s[p_])&&(h[p_]=hf(r[p_][0]),s[p_]=sf(h[p_])),r[g_][1]===tf?(h[g_]=e?a[g_]:0,s[g_]=!0):cf(s[g_])&&(l=(l=r[g_])[1]===rf?l[0]*this.root.computedStyle[__]:l[1]===nf?l[0]*this.root.width*.01:l[1]===of?l[0]*this.root.height*.01:l[0],h[g_]=l,s[g_]=!0),r[v_][1]===tf?s[v_]=h[v_]=e?a[v_]:"none":s[v_]=h[v_]=r[v_][0],r[o_][1]===tf?h[o_]=e?a[o_]:"visible":cf(s[o_])&&(h[o_]=r[o_][0]),s[o_]=h[o_],r[a_][1]===tf?h[a_]=e?a[a_]:"auto":cf(s[a_])&&(h[a_]=r[a_][0]),s[a_]=h[a_],this.__bx1=k,this.__bx2=L,this.__by1=w,this.__by2=D,[k,w,L,D]}},{key:"__calPerspective",value:function(t,e,r,i,n,o){var a,s,h;cf(t[wu])&&(h=t[wu]=!0,s=0,s=(a=e[wu])[1]===rf?a[0]*this.root.computedStyle[__]:a[1]===nf?a[0]*this.root.width*.01:a[1]===of?a[0]*this.root.height*.01:a[0],r[wu]=s),cf(t[Lu])&&(h=t[Lu]=!0,r[Lu]=oa.calOrigin(e[Lu],this.offsetWidth,this.offsetHeight,this.root)),h&&(void 0===n&&(n=this.__sx1,o=this.__sy1),(h=r[Lu].slice(0))[0]+=n||0,h[1]+=o||0,i[z_]=oa.calPerspectiveMatrix(r[wu],h))}},{key:"__calFilter",value:function(t,e){var r=this;return e[$u]=(t[$u]||[]).map(function(t){var e=Qt(t,2),t=e[0],e=e[1];return e[1]===J_||e[1]===af||e[1]===Q_||e[1]===ef?e=e[0]:e[1]===rf?e=e[0]*r.root.computedStyle[__]:e[1]===nf?e=e[0]*r.root.width*.01:e[1]===of&&(e=e[0]*r.root.height*.01),[t,e]})}},{key:"__calContent",value:function(t,e,r,i){if(t===Wc||t===Xc){if(e<Ef)return this.__hasContent;if("hidden"!==r[o_]){var n=r[Hu];if(Array.isArray(n))for(var o=0,a=n.length;o<a;o++)if(n[o])return!0;if(0<r[Yu][0][3]){var s=i[vu],h=i[mu],l=i[eu],c=i[tu],t=i[ru],e=i[Qc];if(s&&h||l||c||t||e)return!0}for(var u=["Top","Right","Bottom","Left"],_=0,f=u.length;_<f;_++){var d=u[_];if(0<i[Kc[jc("border"+d+"Width")]]&&0<r[Kc[jc("border"+d+"Color")]][0][3])return!0}var p=r[Wu];if(Array.isArray(p))for(var g=0,v=p.length;g<v;g++){var m=p[g];if(m&&(0<m[2]||0<m[3]))return!0}}}return!1}},{key:"render",value:function(O,t,R,e){var S,C=this,I=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,k=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.isDestroyed,i=this.root,w=this.__config,n=w[B_],L=w[R_],a=w[S_],D=w[C_];if(w[F_]=vf,this.__bbox=null,r)return{isDestroyed:r,break:!0};O===Uc&&(S=w[$_]=this.__virtualDom={bb:[],children:[],visibility:"visible"},w[Y_]?w[Y_].available||(w[Y_].available=!0):w[Y_]={available:!0,release:function(){this.available=!1,delete S.cache}});var o=D[gu];if("none"===o)return{break:!0};var s,h,l,c,u,_=this.clientWidth,f=this.clientHeight,d=this.offsetWidth,p=this.offsetHeight,g=this.__hasMask,N=D[eu],P=D[tu],F=D[ru],B=D[Qc],Y=D[su],H=D[cu],G=D[hu],W=D[lu],v=w[K_],m=this.__sx1,y=this.__sx2,E=this.__sx3,x=this.__sx4,b=this.__sx5,T=this.__sx6,A=this.__sy1,M=this.__sy2,U=this.__sy3,X=this.__sy4,V=this.__sy5,K=this.__sy6,z={ctx:R,x1:m,x2:y,x3:E,x4:x,x5:b,x6:T,y1:A,y2:M,y3:U,y4:X,y5:V,y6:K,sx1:m,sx2:y,sx3:E,sx4:x,sx5:b,sx6:T,sy1:A,sy2:M,sy3:U,sy4:X,sy5:V,sy6:K},j=w[V_],r=this.__hasContent=w[P_]=this.__calContent(O,t,a,D);O===Xc&&this.__calPerspective(L,a,D,w),t=e&&O===Wc?w[D_]:this.__calMatrix(t,L,a,D,w,m,A,d,p),e&&O===Xc?!r&&this.__releaseWhenEmpty(n)?(z.break=!0,w[N_]=!1):w[N_]||(s=this.bbox,n?n.reset(s,m,A):n=_a.getInstance(s,m,A),n&&n.enabled?(n.__bbox=s,R=n.ctx,I+=n.dx,k+=n.dy,z.ctx=R):(w[N_]=!0,z.limitCache=z.break=!(n=null)),w[B_]=n):O===Xc&&(s=Le.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),z.ctx=R=s.ctx),z.dx=I,z.dy=k,u=e&&O===Wc?(h=this.__bx1,c=this.__bx2,l=this.__by1,this.__by2):(lt=Qt(this.__calCache(O,R,j,L,a,D,_,f,d,p,G,H,W,Y,N,P,F,B,m,y,E,x,b,T,A,M,U,X,V,K),4),h=lt[0],l=lt[1],c=lt[2],lt[3]),z.bx1=h,z.by1=l,z.bx2=c,z.by2=u;var $,Z,q,J,Q,tt=D[Yu],et=D[Qu],rt=D[r_],it=D[t_],nt=D[e_],y=D[$c],E=D[Zc],x=D[Jc],b=D[qc],M=D[o_],ot=D[Gu],at=D[Hu],U=D[Uu],X=D[$u],st=D[Bu],ht=D[Wu],V=D[Zu],lt=D[qu],ct=D[u_];if(e&&O===Wc?U=w[w_]:O===Wc||O===Xc?(j&&(U*=j.__config[w_]),w[w_]=U):O===Uc&&(1===U?delete S.opacity:S.opacity=U),O===Uc&&(te.isE(t)?delete S.transform:S.transform="matrix("+lf(te.m2m6(t),",")+")",S.visibility=M),O===Wc&&e?t=w[L_]:($=w[D_],ue.assignMatrix($,t),j&&(j.perspectiveMatrix&&(t=te.multiply(j.perspectiveMatrix,t)),t=te.multiply(j.matrixEvent,t)),$=w[L_],ue.assignMatrix($,t)),z.limitCache)return z;"normal"!==lt&&df(lt)?(lt=ff(lt),O===Wc&&e!==Vc?($=i.width,Z=i.height,$=Le.getCacheCanvas($,Z,null,"blend"),Z={ctx:R,target:$,mixBlendMode:lt,matrix:t},R=$.ctx):O===Uc&&(S.mixBlendMode=lt)):O===Uc&&delete S.mixBlendMode,g&&O===Wc&&e!==Vc&&(J=i.width,q=i.height,J=Le.getCacheCanvas(J,q,null,"mask1"),q={ctx:R,target:J,matrix:t},R=J.ctx),X&&X.length?O===Wc&&e!==Vc?(J=i.width,Q=i.height,J=Le.getCacheCanvas(J,Q,null,"filter"),Q={ctx:R,filter:X,target:J,matrix:t},R=J.ctx):O===Uc&&(S.filter=Tt.svgFilter(X)):O===Uc&&delete S.filter;var ut,_t,ft,dt=y.slice(0),pt=E.slice(0),gt=x.slice(0),vt=b.slice(0);if("padding-box"===ct||"paddingBox"===ct?(dt[0]-=Y,dt[1]-=G,pt[0]-=H,pt[1]-=G,gt[0]-=H,gt[1]-=W,vt[0]-=Y,vt[1]-=W):"content-box"!==ct&&"contentBox"!==ct||(dt[0]-=Y+B,dt[1]-=G+N,pt[0]-=H+P,pt[1]-=G+N,gt[0]-=H+P,gt[1]-=W+F,vt[0]-=Y+B,vt[1]-=W+F),"hidden"===V&&"inline"!==o?(_t=Xt.calRadius(h,l,c-h,u-l,dt,pt,gt,vt),O===Wc&&e!==Vc?(o=i.width,ut=i.height,o=Le.getCacheCanvas(o,ut,null,"overflow"),ut={ctx:R,target:o,matrix:t},R=o.ctx,ut.x=m,ut.y=A,ut.offsetWidth=d,ut.offsetHeight=p,ut.list=_t):O===Uc&&(d={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",Gc(_t)||"M".concat(m,",").concat(A,"L").concat(m+d,",").concat(A,"L").concat(m+d,",").concat(A+p,"L").concat(m,",").concat(A+p,",L").concat(m,",").concat(A)]]}]},p=R.add(d),w[X_].push(d),S.overflow="url(#"+p+")")):O===Uc&&delete S.overflow,O===Wc&&(z.offscreenBlend=Z,z.offscreenMask=q,z.offscreenFilter=Q,z.offscreenOverflow=ut,(z.ctx=R).globalAlpha=U,e||R.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])),("hidden"===M||z.break)&&(O===Wc||O===Xc))return z.break=!0,z;if(n&&n.enabled&&(n.__available=!0),v){var mt=this.contentBoxList,yt=mt.length,Et=at.some(function(t){return t});if(yt){v=function(){var p,n,t=D[__],e=D[f_],g=D[d_],o=0,v=0,m=[];Et&&(o=Hc.getInlineWidth(C,mt),v=g,"paddingBox"===ct||"padding-box"===ct?(o+=B+P,v+=N+F):"contentBox"!==ct&&"content-box"!==ct&&(o+=B+P+Y+H,v+=N+F+G+W),O!==Wc&&O!==Xc||(p=Le.getCacheCanvas(o,v,"__$$INLINE_BGI$$__")),n=at.length,at.slice(0).reverse().forEach(function(t,e){var r,i;t&&(e=n-1-e,ue.isString(t)?(r=C.__loadBgi[e]).url===at[e]&&(i=Js.renderImage(C,O,p&&p.ctx||R,r,0,0,o,v,dt,pt,gt,vt,a,e,st,ot,w,!0,I,k),O===Uc&&i&&m.push(i)):!t.k||(i=C.__gradient(O,R,0,0,o,v,t,I,k))&&("conic"===i.k?(t=tr.renderConic(C,O,p&&p.ctx||R,i.v,0,0,o,g,dt,pt,gt,vt,!0),O===Uc&&t&&m.push(t)):(i=Js.renderBgc(C,O,p&&p.ctx||R,i.v,null,0,0,o,v,dt,pt,gt,vt,"fill",!0),O===Uc&&i&&m.push(i))))}));for(var e=vn.getFontFamily(e),y=vn.getBaseLine(D),E=t*(bt.info[e].lgr||0),x=!0,b=mt[0],T=b.parentLineBox,A=0,M=0;M<yt;M++){var _=mt[M];_.parentLineBox!==T&&function(){var t=Qt(Hc.getInlineBox(C,mt,b,mt[M-1],T,y,g,E,x,!1,ct,N,P,F,B,G,H,W,Y),8),i=t[0],n=t[1],e=t[2],r=t[3],o=t[4],a=t[5],s=t[6],h=t[7];x&&(t=Af(C),i-=t,o-=t),0<tt[3]&&Js.renderBgc(C,O,R,L[Yu],null,i,n,e-i,r-n,dt,[0,0],[0,0],vt,"fill",!1,I,k);var l,c,u=e-i;O!==Wc&&O!==Xc||!p?O===Uc&&m.length&&m.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(A,",",0,"L").concat(u+A,",",0,"L").concat(u+A,",").concat(v,"L").concat(A,",").concat(v,",L").concat(A,",",0)]]}]},r=R.add(e),w[X_].push(e),S.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-A],["y",n],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,A,0,u,v,i+I,n+k,u,v),A+=u,ht&&ht.forEach(function(t){kc.renderBoxShadow(C,O,R,t,o,a,s,h,s-o,h-a,I,k)}),0<G&&0<et[3]&&(r=Math.atan(G/Y),e=Math.atan(G/H),e=Xt.calPoints(G,D[Vu],r,e,o,o+Y,s,s,a,a+G,h-W,h,0,x?dt:[0,0],[0,0]),Xt.renderBorder(C,O,R,e,L[Qu],I,k)),0<W&&0<it[3]&&(c=Math.atan(W/Y),l=Math.atan(W/H),c=Xt.calPoints(W,D[zu],c,l,o,o+Y,s,s,a,a+G,h-W,h,2,x?dt:[0,0],[0,0]),Xt.renderBorder(C,O,R,c,L[t_],I,k)),x&&0<Y&&0<nt[3]&&(l=Math.atan(Y/G),c=Math.atan(Y/W),c=Xt.calPoints(Y,D[ju],l,c,o,o+Y,s-H,s,a,a+G,h-W,h,3,dt,pt),Xt.renderBorder(C,O,R,c,L[e_],I,k)),x=!1,T=(b=_).parentLineBox}(),M===yt-1&&function(){var t=Qt(Hc.getInlineBox(C,mt,b,mt[M],T,y,g,E,x,!0,ct,N,P,F,B,G,H,W,Y),8),i=t[0],n=t[1],e=t[2],r=t[3],o=t[4],a=t[5],s=t[6],h=t[7];x&&(l=Af(C),i-=l,o-=l);var l=function t(e){for(var r=0,i=e.flowChildren,n=i.length-1;0<=n;n--){var o=i[n];if(!(o instanceof Mf||o instanceof Ss&&o.shadowRoot instanceof Mf))break;if(o.flowChildren.length){r+=t(o);break}r+=o.outerWidth}return r}(C);e+=l,s+=l,0<tt[3]&&Js.renderBgc(C,O,R,L[Yu],null,i,n,e-i,r-n,x?dt:[0,0],pt,gt,x?vt:[0,0],"fill",!1,I,k);var c,u,_,f,d=e-i;O!==Wc&&O!==Xc||!p?O===Uc&&m.length&&m.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(A,",",0,"L").concat(d+A,",",0,"L").concat(d+A,",").concat(v,"L").concat(A,",").concat(v,",L").concat(A,",",0)]]}]},r=R.add(e),w[X_].push(e),S.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-A],["y",n],["clip-path","url(#"+r+")"]]}))}):R.drawImage(p.canvas,A,0,d,v,i+I,n+k,d,v),ht&&ht.forEach(function(t){kc.renderBoxShadow(C,O,R,t,o,a,s,h,s-o,h-a,I,k)}),0<G&&0<et[3]&&(u=Math.atan(G/Y),c=Math.atan(G/H),u=Xt.calPoints(G,D[Vu],u,c,o,o,s-H,s,a,a+G,h-W,h,0,x?dt:[0,0],pt),Xt.renderBorder(C,O,R,u,L[Qu],I,k)),0<H&&0<rt[3]&&(c=Math.atan(H/G),u=Math.atan(H/W),u=Xt.calPoints(H,D[Ku],c,u,o,o+Y,s-H,s,a,a+G,h-W,h,1,dt,pt),Xt.renderBorder(C,O,R,u,L[r_],I,k)),0<W&&0<it[3]&&(f=Math.atan(W/Y),_=Math.atan(W/H),f=Xt.calPoints(W,D[zu],f,_,o,o,s-H,s,a,a+G,h-W,h,2,x?dt:[0,0],pt),Xt.renderBorder(C,O,R,f,L[t_],I,k)),x&&0<Y&&0<nt[3]&&(_=Math.atan(Y/G),f=Math.atan(Y/W),f=Xt.calPoints(Y,D[ju],_,f,o,o+Y,s-H,s,a,a+G,h-W,h,3,dt,pt),Xt.renderBorder(C,O,R,f,L[e_],I,k))}()}return p&&p.ctx.clearRect(0,0,o,v),{v:z}}();if("object"===xt(v))return v.v}else if(h===c||l===u)return z}return 0<tt[3]&&Js.renderBgc(this,O,R,L[Yu],_t,h,l,c-h,u-l,dt,pt,gt,vt,"fill",!1,I,k),at&&(ft=at.length,at.slice(0).reverse().forEach(function(t,e){var r;t&&(e=ft-1-e,ue.isString(t)?(r=C.__loadBgi[e]).url===at[e]&&Js.renderImage(C,O,R,r,h,l,c,u,dt,pt,gt,vt,a,e,st,ot,w,!1,I,k):!t.k||(t=C.__gradient(O,R,h,l,c,u,t,I,k))&&("conic"===t.k?tr.renderConic(C,O,R,t.v,h,l,c-h,u-l,dt,pt,gt,vt):Js.renderBgc(C,O,R,t.v,_t,h,l,c-h,u-l,dt,pt,gt,vt,"fill",!1,I,k)))})),ht&&ht.forEach(function(t){kc.renderBoxShadow(C,O,R,t,m,A,T,K,T-m,K-A,I,k)}),0<G&&0<et[3]&&Xt.renderBorder(this,O,R,L[s_],L[Qu],I,k),0<H&&0<rt[3]&&Xt.renderBorder(this,O,R,L[h_],L[r_],I,k),0<W&&0<it[3]&&Xt.renderBorder(this,O,R,L[l_],L[t_],I,k),0<Y&&0<nt[3]&&Xt.renderBorder(this,O,R,L[c_],L[e_],I,k),z}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(o.prototype),"__destroy",this).call(this),t=this.root,this.clearAnimate(),this.clearFrameAnimate(),t.delRefreshTask(this.__loadBgi.cb),t.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,n=this.isMask;if(!(r||"none"===i[gu]||t.__stopPropagation||n)){var o,a=t.event.type,r=this.listener,n=this.__hasMask;if(r.hasOwnProperty(a)&&(o=r[a]),e)return"none"!==i[a_]&&ue.isFunction(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0;if(this.willResponseEvent(t)){if(n){for(var s,h=this.next,n=h.isClip;h&&h.isMask;){if(h.willResponseEvent(t,!0)){s=!0;break}h=h.next}if(!n&&!s)return}return ue.isFunction(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,n=this.__sx1,o=this.__sy1,a=this.offsetWidth,s=this.offsetHeight,h=this.matrixEvent,l=this.computedStyle;if("none"!==l[a_])return et.pointInQuadrilateral(r,i,n,o,n+a,o,n+a,o+s,n,o+s,h)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,i,n,o,a){var s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=n-r,c=o-i;if(l&&c){var u=a.k,_=a.v,f=a.d,d=a.s,p=a.z,g=a.p,v={k:u};return"linear"===u?(a=tr.getLinear(_,f,r,i,r+.5*l,i+.5*c,l,c,this.root,s,h),v.v=this.__getLg(t,e,a)):"radial"===u?(p=tr.getRadial(_,d,p,g,r,i,n,o,this.root,s,h))&&(v.v=this.__getRg(t,e,p),p.matrix&&(v.v=[v.v,p.matrix,p.cx,p.cy])):"conic"===u&&(u=this.bbox,u=Math.max(Math.abs(u[2]-u[0]),Math.abs(u[3]-u[1])),c=Math.max(Math.abs(l),Math.abs(c)),h=tr.getConic(_,f,g,r,i,n,o,u/c,this.root,s,h),v.v=this.__getCg(t,e,h)),v}}},{key:"__getLg",value:function(t,e,r){if(t===Wc||t===Xc){var i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach(function(t){i.addColorStop(t[1],sf(t[0]))}),i}if(t===Uc){r={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",sf(t[0])],["offset",100*t[1]+"%"]]}})},e=e.add(r);return this.__config[X_].push(r),"url(#"+e+")"}}},{key:"__getRg",value:function(t,e,r){if(t===Wc||t===Xc){var i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r);return r.stop.forEach(function(t){i.addColorStop(t[1],sf(t[0]))}),i}if(t===Uc){t={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",sf(t[0])],["offset",100*t[1]+"%"]]}})};r.tx!==r.cx&&t.props.push(["fx",r.cx]),r.ty!==r.cy&&t.props.push(["fy",r.cy]);e=e.add(t);return this.__config[X_].push(t),"url(#"+e+")"}}},{key:"__getCg",value:function(t,e,r){var i=r.cx,n=r.cy,o=r.r,a=r.deg,s=r.stop,h=s.length-1;s[h][1]<1&&s.push([s[h][0].slice(0),1]),0<s[0][1]&&s.unshift([s[0][0].slice(0),0]);var l=[];if(t===Wc||t===Xc)return r;if(t===Uc){for(var c,u=[],_=0,f=s.length;_<f-1;_++)for(var d=360*s[_][1],p=360*s[_+1][1]-d,g=Math.ceil(p),v=p/g,m=s[_][0],p=s[_+1][0],p=[p[0]-m[0],p[1]-m[1],p[2]-m[2],p[3]-m[3]],y=[p[0]/g,p[1]/g,p[2]/g,p[3]/g],E=0;E<g;E++){var x=Qt(et.pointOnCircle(i,n,o,d+v*E+a-.5),2),b=x[0],T=x[1],A=Qt(et.pointOnCircle(i,n,o,d+v*E+a+.5),2),x=A[0],A=A[1];u.push([b,T,x,A,Math.round(m[0]+y[0]*E),Math.round(m[1]+y[1]*E),Math.round(m[2]+y[2]*E),Math.round(m[3]+y[3]*E)])}h=u[0].slice(0),r=Qt(et.pointOnCircle(i,n,o,a),2),t=r[0],r=r[1];h[2]=t,h[3]=r;r=s[s.length-1][0];h[4]=r[0],h[5]=r[1],h[6]=r[2],h[7]=r[3],u.push(h);for(var M=0,O=u.length;M<O;M++){var R,S,C=u[M];c&&(R={tagName:"linearGradient",props:[["x1",c[0]],["y1",c[1]],["x2",C[2]],["y2",C[3]]],children:[{tagName:"stop",props:[["stop-color",sf([c[4],c[5],c[6],c[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",sf([C[4],C[5],C[6],C[7]])],["offset","100%"]]}]},S=e.add(R),this.__config[X_].push(R),l.push([[[i,n],[c[0],c[1]],[C[2],C[3]]],"url(#"+S+")"])),c=C}}return l}},{key:"clearCache",value:function(t){var e=this.__config,r=e[Y_],i=e[H_],n=e[G_],o=e[W_];t||(e[R_]=this.__cacheStyle={},(e=e[B_])&&e.release()),r&&r.release(),i&&i.release(),n&&n.release(),o&&o.release()}},{key:"updateStyle",value:function(e,r){var i=this,n=i.root,o=i.__config,a=vn.normalize(e);n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,o[U_]||((t={})[m_]=i,t[E_]=a,t[x_]=e,t[b_]=Object.keys(a).map(function(t){return t=!_f.hasOwnProperty(t)?parseInt(t):t}),t[T_]=o,n.__addUpdate(i,o,n,n.__config,t))},__after:function(t){ue.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,a),ue.isFunction(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,n=i.root,o=i.__config;n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,o[U_]||((t={})[m_]=i,t[E_]=e,t[b_]=Object.keys(e).map(function(t){return t=!_f.hasOwnProperty(t)?parseInt(t):t}),t[T_]=o,n.__addUpdate(i,o,n,n.__config,t))},__after:function(t){ue.isFunction(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),ue.isFunction(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new Oc(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof Oc&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(ue.isFunction(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var n={__after:function(t){e(t)},__karasFramecb:e};return t.push(n),eh.onFrame(n),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void eh.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){eh.offFrame(t)})}},{key:"__computeMeasure",value:function(t,e,r){vn.computeMeasure(this),ue.isFunction(r)&&r(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){P(N(o.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[F_]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t}},{key:"__offsetY",value:function(t,e,r){P(N(o.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t,this.clearCache()),void 0!==r&&(this.__config[F_]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t}},{key:"__resizeX",value:function(t,e){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[N_]=!1),void 0!==e&&(this.__config[F_]|=e),this.clearCache()}},{key:"__resizeY",value:function(t,e){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[N_]=!1),void 0!==e&&(this.__config[F_]|=e),this.clearCache()}},{key:"__spreadBbox",value:function(t){var o=0,a=0;return Array.isArray(t)&&t.forEach(function(t){var e=Qt(t,6),r=e[0],i=e[1],n=e[2],t=e[3];"inset"!==e[5]&&(n=ha.outerSize(n),n+=t,o=Math.max(o,r+n),a=Math.max(a,i+n))}),[o,a]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=t?(i=Array.isArray(t)?t:[t]).map(function(t){return Kc[jc(t)]}):Object.keys(e);return i.forEach(function(t){_f.hasOwnProperty(t)?r[t]=e[t]:r[zc[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,n=this.matrixEvent,o=pf(te.calPoint([t,e],n)),a=pf(te.calPoint([t+r,e],n)),r=pf(te.calPoint([t+r,e+i],n)),n=pf(te.calPoint([t,e+i],n));return{left:Math.min(o[0],Math.min(a[0],Math.min(r[0],n[0]))),top:Math.min(o[1],Math.min(a[1],Math.min(r[1],n[1]))),right:Math.max(o[0],Math.max(a[0],Math.max(r[0],n[0]))),bottom:Math.max(o[1],Math.max(a[1],Math.max(r[1],n[1]))),points:[o,a,r,n]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var n=this;if(n.isDestroyed)return Le.warn("Remove target is destroyed."),void(ue.isFunction(e)&&e());var o=n.root,a=n.domParent,t=n.isShadowRoot?n.hostRoot:n;-1!==a.children.indexOf(t)?(o.delRefreshTask(n.__task),o.addRefreshTask(n.__task={__before:function(){n.__task=null;var t=a.__json,e=t.children.indexOf((n.isShadowRoot?n.hostRoot:n).__json),r=a.zIndexChildren,i=r.indexOf(n.isShadowRoot?n.hostRoot:n);if(-1===e||-1===i)throw new Error("Remove index Exception.");t.children.splice(e,1),a.children.splice(e,1),r.splice(i,1),n.__prev&&(n.__prev.__next=n.__next);i={};i[m_]=n,i[y_]=ba.REFLOW,i[A_]=!0,i[T_]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,i)},__after:function(t){(n.isShadowRoot?n.hostRoot:n).__destroy(),ue.isFunction(e)&&e.call(n,t)}})):ue.isFunction(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,n,o,a,s,h,l;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.clientWidth,i=this.clientHeight,n=(l=this.currentStyle)[hu],o=l[cu],a=l[lu],s=l[su],h=l[Wu],h=(l=Qt(this.__spreadBbox(h),2))[0],l=l[1],r+=s[0]+o[0],i+=n[0]+a[0],this.__bbox=[t-h-1,e-l-1,t+r+h+1,e+i+l+1]),this.__bbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[D_]}},{key:"matrixEvent",get:function(){return this.__config[L_]}},{key:"perspectiveMatrix",get:function(){return this.__config[z_]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseLine",get:function(){return this.offsetHeight}},{key:"firstBaseLine",get:function(){return this.offsetHeight}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[Z_]=this.__cacheAsBitmap=!!t}}]),o}(),A=m.STYLE_KEY,Of=A.DISPLAY,Rf=A.MARGIN_LEFT,Sf=A.BORDER_LEFT_WIDTH,Cf=A.PADDING_LEFT,If=A.PADDING_RIGHT,kf=A.BORDER_RIGHT_WIDTH,wf=A.MARGIN_RIGHT,Lf=function(){function n(t,e,r,i){_(this,n),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseLine=i}return f(n,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(){var r=this.baseLine;this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==r&&t.__offsetY(r-e)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseLine=Math.max(e,this.__baseLine)}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){var t=this.list,e=t.length;if(e){for(var r=t[0],e=t[e-1],i=r.x,n=(r instanceof Rn?r.parent:r).domParent;;){var o=n.contentBoxList,a=n.computedStyle,s=a[Of],h=a[Rf],l=a[Sf],a=a[Cf];if("inline"!==s)break;r===o[0]&&(i-=h+l+a),n=n.domParent}for(var c=e.x+e.outerWidth,n=(e instanceof Rn?e.parent:e).domParent;;){var u=n.contentBoxList,_=n.computedStyle,f=_[Of],d=_[wf],p=_[kf],_=_[If];if("inline"!==f)break;r===u[u.length-1]&&(c+=d+p+_),n=n.domParent}return c-i}return 0}},{key:"height",get:function(){return this.lineHeight}},{key:"baseLine",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),Math.max(this.__baseLine,e)}},{key:"lineHeight",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),Math.max(this.__lineHeight,e)}}]),n}(),Df=function(){function n(t,e,r,i){_(this,n),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__maxX=t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseLine=i,this.__isEnd=!0}return f(n,[{key:"genLineBox",value:function(t,e){e=new Lf(t,e,this.__lineHeight,this.__baseLine);return this.list.push(e),this.__isEnd=!0,e}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseLine,i);if(this.__isNewLine){i=new Lf(t,e,r,i);return this.list.push(i),this.__isEnd=!0,this.__isNewLine=!1,i}}},{key:"setLbOrGenLineBoxByInline",value:function(t,e,r,i){var n,o=Math.max(this.__lineHeight,r),a=Math.max(this.__baseLine,i),s=this.list;if(this.__isNewLine)return n=new Lf(t,e,o,a),s.push(n),this.__isEnd=!0,this.__isNewLine=!1,n;(n=s[s.length-1]).__setLB(r,i)}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__maxX=Math.max(this.__maxX,e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i){this.list.forEach(function(t){var e=r-t.width;0<e&&("center"===i&&(e*=.5),t.__offsetX(e),t.list.forEach(function(t){t.__offsetX(e,!0)}))})}},{key:"verticalAlign",value:function(){this.list.forEach(function(t){t.verticalAlign()})}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseLine",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseLine}return 0}},{key:"firstBaseLine",get:function(){var t=this.list;return t.length?t[0].baseLine:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}}]),n}(),Nf={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},Jt=m.STYLE_KEY,Pf=Jt.DISPLAY,Ff=Jt.TOP,Bf=Jt.BOTTOM,Yf=Jt.POSITION,Hf=Jt.HEIGHT,Gf=S.AUTO,Wf=S.PX,Uf=S.PERCENT,Xf=ba.REFLOW;var Vf={offsetAndResizeByNodeOnY:function(t,e,r,i,n){if(i){for(;;){for(;t.isShadowRoot;)t=t.host;var o=t,a=void 0,s=t.domParent;s&&(p=s.computedStyle[Yf],a=s===e||s.isShadowRoot||"relative"===p||"absolute"===p);for(var h=t.next,l=void 0;h;){if("none"!==h.currentStyle[Pf])if("absolute"===h.currentStyle[Yf]){var c=h.currentStyle,u=c[Ff],_=c[Bf],c=c[Hf];if(u[1]===Gf?_[1]===Gf||_[1]===Wf?(h.__offsetY(i,!0,Xf),h.clearCache()):_[1]===Uf&&(_=(1-.01*_[0])*i,h.__offsetY(_,!0,Xf),h.clearCache()):u[1]===Uf&&(u=.01*u[0]*i,h.__offsetY(u,!0,Xf),h.clearCache()),c[1]===Uf)if(a)s.__layoutAbs(s,null,h);else{if(!l)for(l=s;l&&l!==e&&!l.isShadowRoot;){var f=l.currentStyle;if("absolute"===f[Yf]||"relative"===f[Yf])break;l=l.domParent}n.push([s,l,h])}}else h.__offsetY(i,!0,Xf),h.clearCache();h=h.next}if(!s)break;var d=(t=s).currentStyle,p=void 0;if("absolute"===d[Yf]?d[Hf][1]!==Gf||d[Ff][1]!==Gf&&d[Bf][1]!==Gf||(p=!0):d[Hf][1]===Gf&&(p=!0),!p)break;if(t.__resizeY(i,Xf),t.clearCache(),t===e)break}for(;o;)o.clearCache(!0),o=o.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMarginTB:function(t,e){var r=0,i=t[0],n=t[0];return t.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),(e=0)<i&&0<n?e=Math.max(i,n)-r:i<0&&n<0?e=Math.min(i,n)-r:0===i&&0===n||(e=i+n-r),e}},Zt=m.STYLE_KEY,Kf=Zt.POSITION,zf=Zt.DISPLAY,jf=Zt.FONT_WEIGHT,$f=Zt.MARGIN_LEFT,Zf=Zt.MARGIN_TOP,qf=Zt.MARGIN_RIGHT,Jf=Zt.MARGIN_BOTTOM,Qf=Zt.PADDING_LEFT,t0=Zt.PADDING_BOTTOM,e0=Zt.PADDING_RIGHT,r0=Zt.PADDING_TOP,i0=Zt.BORDER_TOP_WIDTH,n0=Zt.BORDER_BOTTOM_WIDTH,o0=Zt.BORDER_RIGHT_WIDTH,a0=Zt.BORDER_LEFT_WIDTH,s0=Zt.TOP,h0=Zt.RIGHT,l0=Zt.BOTTOM,c0=Zt.LEFT,u0=Zt.WIDTH,_0=Zt.HEIGHT,f0=Zt.TEXT_ALIGN,d0=Zt.FLEX_DIRECTION,p0=Zt.FLEX_BASIS,g0=Zt.FLEX_SHRINK,v0=Zt.FLEX_GROW,m0=Zt.ALIGN_SELF,y0=Zt.ALIGN_ITEMS,E0=Zt.JUSTIFY_CONTENT,x0=Zt.Z_INDEX,b0=Zt.WHITE_SPACE,T0=Zt.LINE_HEIGHT,A0=Zt.LINE_CLAMP,M0=Zt.ORDER,O0=Zt.FLEX_WRAP,R0=Zt.ALIGN_CONTENT,S0=Zt.OVERFLOW,C0=Zt.FONT_SIZE,ft=m.NODE_KEY,I0=ft.NODE_CURRENT_STYLE,k0=ft.NODE_STYLE,w0=ft.NODE_STRUCT,L0=ft.NODE_DOM_PARENT,D0=ft.NODE_IS_INLINE,sr=m.UPDATE_KEY,N0=sr.UPDATE_NODE,P0=sr.UPDATE_FOCUS,F0=sr.UPDATE_ADD_DOM,B0=sr.UPDATE_CONFIG,Y0=sr.UPDATE_MEASURE,qt=m.STRUCT_KEY,H0=qt.STRUCT_NUM,G0=qt.STRUCT_LV,W0=qt.STRUCT_TOTAL,U0=qt.STRUCT_CHILD_INDEX,X0=qt.STRUCT_INDEX,V0=S.AUTO,K0=S.PX,z0=S.PERCENT,j0=S.REM,$0=S.VW,Z0=S.VH,q0=vn.calAbsolute,J0=vn.isRelativeOrAbsolute;function Q0(t){var i,n,o=[],a={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof Ss?t.shadowRoot:t)instanceof Mf&&t.isMask?void 0!==n?a[n].push(t):e&&(s[n=e-1].__iIndex=n,a[n]=[t],i=!0):(n=void 0,t instanceof Mf?(r.__zIndex=t.currentStyle[x0],J0(t)&&(r.__aIndex=!0)):r.__zIndex=0,o.push(r),r.__iIndex=e)}),o.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=o.length-1;0<=e;e--){var r=o[e].__iIndex;a.hasOwnProperty(r)&&o.splice.apply(o,[e+1,0].concat(d(a[r])))}return o}function td(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof Ss&&(t=t.shadowRoot),r.__order=t instanceof Mf?t.currentStyle[M0]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}var ed=function(){t(u,Mf);var n=e(u);function u(t,e,r){_(this,u);var i,e=a(i=n.call(this,t,e)).style;e.display&&{flex:!0,block:!0,inline:!0,inlineBlock:!0,"inline-block":!0,none:!0}.hasOwnProperty(e.display)||(Nf.INLINE.hasOwnProperty(i.tagName)?e.display="inline":e.display="block"),!e[jf]&&Nf.BOLD.hasOwnProperty(t)&&(e.fontWeight=700),i.__style=vn.normalize(e,lr.DOM_ENTRY_SET),i.__currentStyle=ue.extend({},i.__style),i.__children=r||[],i.__flexLine=[];r=i.__config;return r[I0]=i.__currentStyle,r[k0]=i.__style,i}return f(u,[{key:"__structure",value:function(r,i,t){var e=P(N(u.prototype),"__structure",this).call(this,r++,i,t),n=[e],o=this.__zIndexChildren=this.__zIndexChildren||Q0(this);o.forEach(function(t,e){e=t.__structure(r,i+1,e);Array.isArray(e)?(r+=e.length,n=n.concat(e)):(r++,n.push(e))});t=n.length-1;return e[H0]=o.length,e[W0]=t,n}},{key:"__modifyStruct",value:function(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.__config,n=i[w0],o=n[W0]||0,a=this.__structure(n[X0],n[G0],n[U0]);(e=t.__structs).splice.apply(e,[n[X0]+r,o+1].concat(d(a)));a=0;return this!==t&&(a=((n=i[w0])[W0]||0)-o,(i=i[L0].__config[w0])[W0]=i[W0]||0,i[W0]+=a),[n,a]}},{key:"__updateStruct",value:function(t){var e=this.__config[w0],r=e[X0],e=e[W0],i=void 0===e?0:e,e=this.__zIndexChildren=Q0(this);if(1!==e.length){e.forEach(function(t,e){t.__config[w0][U0]=e});for(var n,o=[],a=[],s=r+1;s<=r+i;s++){var h=t[s],l={child:h,list:t.slice(h[X0],h[X0]+h[W0]+1)};o.push(l),a.push(l),s+=h[W0]||0}o.sort(function(t,e){return t.child[U0]-e.child[U0]});for(var c,u=0,_=a.length;u<_;u++)if(a[u]!==o[u]){n=!0;break}n&&(c=[],o.forEach(function(t){c=c.concat(t.list)}),c.forEach(function(t,e){t[X0]=r+e+1}),t.splice.apply(t,[r+1,i].concat(d(c))))}}},{key:"__tryLayInline",value:function(t,e){var r=this.flowChildren,i=this.currentStyle,n=i[zf],o=i[u0],a=i[$f],s=i[qf],h=i[Qf],l=i[e0],c=i[a0],i=i[o0];if("inline"===n)r.length&&((n=(n=r[0])instanceof Ss?n.shadowRoot:n)instanceof Mf?t=n.__tryLayInline(t,e):t-=n.firstCharWidth);else{if(o[1]===K0)t-=o[0];else if(o[1]===z0)t-=e*o[0]*.01;else if(o[1]===j0)t-=o[0]*this.root.computedStyle[C0];else if(o[1]===$0)t-=o[0]*this.root.width*.01;else if(o[1]===Z0)t-=o[0]*this.root.height*.01;else for(var u=0;u<r.length;u++){if(t<0)return t;var _=r[u];(_=_ instanceof Ss?_.shadowRoot:_)instanceof Mf?t=_.__tryLayInline(t,e):t-=_.textWidth}s[1]===K0?t-=s[0]:s[1]===z0?t-=s[0]*e*.01:s[1]===j0?t-=s[0]*this.root.computedStyle[C0]:s[1]===$0?t-=s[0]*this.root.width*.01:s[1]===Z0&&(t-=s[0]*this.root.height*.01),l[1]===K0?t-=l[0]:l[1]===z0?t-=l[0]*e*.01:l[1]===j0?t-=l[0]*this.root.computedStyle[C0]:l[1]===$0?t-=l[0]*this.root.width*.01:l[1]===Z0&&(t-=l[0]*this.root.height*.01),i[1]===K0?t-=i[0]:i[1]===j0?t-=i[0]*this.root.computedStyle[C0]:i[1]===$0?t-=i[0]*this.root.width*.01:i[1]===Z0&&(t-=i[0]*this.root.height*.01)}return a[1]===K0?t-=a[0]:a[1]===z0?t-=a[0]*e*.01:a[1]===j0?t-=a[0]*this.root.computedStyle[C0]:a[1]===$0?t-=a[0]*this.root.width*.01:a[1]===Z0&&(t-=a[0]*this.root.height*.01),h[1]===K0?t-=h[0]:h[1]===z0?t-=h[0]*e*.01:h[1]===j0?t-=h[0]*this.root.computedStyle[C0]:h[1]===$0?t-=h[0]*this.root.width*.01:h[1]===Z0&&(t-=h[0]*this.root.height*.01),c[1]===K0?t-=c[0]:c[1]===j0?t-=c[0]*this.root.computedStyle[C0]:c[1]===$0?t-=c[0]*this.root.width*.01:c[1]===Z0&&(t-=c[0]*this.root.height*.01),t}},{key:"__offsetX",value:function(e,r,i){P(N(u.prototype),"__offsetX",this).call(this,e,r,i),r&&!this.__config[D0]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){P(N(u.prototype),"__offsetY",this).call(this,e,r,i),r&&!this.__config[D0]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calMinMax",value:function(o,t){vn.computeReflow(this,this.isShadowRoot);var i,a,s,h,l,c=0,u=0,e=this.flowChildren,r=this.currentStyle,n=this.computedStyle,_=t.x,f=t.y,d=t.w,p=t.h,g=t.lineBoxManager,v=r[zf],m=r[d0],y=r[u0],t=r[_0],E=n[T0],t=o?y:t;return t[1]===K0?c=u=t[0]:t[1]===j0?c=u=t[0]*this.root.computedStyle[C0]:t[1]===$0?c=u=t[0]*this.root.width*.01:t[1]===Z0?c=u=t[0]*this.root.height*.01:"flex"===v?(i="column"!==m,(e=td(e)).forEach(function(t){var e,r;t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf?(e=t.currentStyle,r=t.computedStyle,"block"!==e[zf]&&"flex"!==e[zf]&&(e[zf]=r[zf]="block"),e=Qt(t.__calMinMax(o,{x:_,y:f,w:d,h:p}),2),e=(r=Qt(e[1],2))[0],r=r[1],o?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):o?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new Df(_,f,E,vn.getBaseLine(n)),t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):"block"===v?(s=a=0,h=new Df(_,f,E,vn.getBaseLine(n)),l=e.length,e.forEach(function(t,e){var r,i,n;t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf?(r=(i=Qt(t.__calMinMax(o,{x:_,y:f,w:d,h:p,lineBoxManager:h}),2))[0],i=(n=Qt(i[1],2))[0],n=n[1],"block"!==r&&"flex"!==r||!h.isEnd||(h.setNotEnd(),h.setNewLine()),o?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,n),a=s=0):(a+=i,s+=n,c=Math.max(c,a),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=a,u+=s,a=s=0,c+=i,u+=n):(a=Math.max(a,i),s=Math.max(s,n),e===l-1&&(c+=a,u+=s))):o?(a+=t.charWidth,s+=t.textWidth,c=Math.max(c,a),u=Math.max(u,s)):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:h}),a=Math.max(a,t.height),s=Math.max(s,t.height),e===l-1&&(c+=a,u+=s))})):("inlineBlock"!==v&&"inline-block"!==v||(g=new Df(_,f,E,vn.getBaseLine(n))),e.forEach(function(t){var e,r;t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf?(e=Qt(t.__calMinMax(o,{x:_,y:f,w:d,h:p,lineBoxManager:g}),2),e=(r=Qt(e[1],2))[0],r=r[1],o?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r))):o?(c+=t.charWidth,u+=t.textWidth):(t.__layout({x:_,y:f,w:d,h:p,lineBoxManager:g}),c=Math.max(c,t.height),u=Math.max(u,t.height))})),[v,this.__addMp(o,d,r,[c,u])]}},{key:"__calBasis",value:function(o,t,e){vn.computeReflow(this,this.isShadowRoot);var r,i,a,s,h,l,n=0,c=0,u=0,_=this.flowChildren,f=this.currentStyle,d=this.computedStyle,p=t.x,g=t.y,v=t.w,m=t.h,y=f[zf],E=f[d0],x=f[u0],b=f[_0],T=f[p0],A=d[T0],M=o?x:b,t=T[1]===V0,x=-1<[K0,z0,j0,$0,Z0].indexOf(T[1]),b=!t&&!x;return x?T[1]===K0?n=r=T[0]:T[1]===z0?n=r=(o?v:m)*T[0]*.01:T[1]===j0?n=r=T[0]*this.root.computedStyle[C0]:T[1]===$0?n=r=T[0]*this.root.width*.01:T[1]===Z0&&(n=r=T[0]*this.root.height*.01):-1<[K0,z0,j0,$0,Z0].indexOf(M[1])&&t?M[1]===K0?n=r=M[0]:M[1]===z0?n=r=.01*M[0]*(o?v:m):M[1]===j0?n=r=M[0]*this.root.computedStyle[C0]:M[1]===$0?n=r=M[0]*this.root.width*.01:M[1]===Z0&&(n=r=M[0]*this.root.height*.01):t&&(b=!0),"flex"===y?(i="column"!==E,(_=td(_)).forEach(function(t){var e,r;t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf?(e=t.currentStyle,r=t.computedStyle,"block"!==e[zf]&&"flex"!==e[zf]&&(e[zf]=r[zf]="block"),e=Qt(t.__calMinMax(o,{x:p,y:g,w:v,h:m}),2),e=(r=Qt(e[1],2))[0],r=r[1],o?i?(c+=e,u+=r):(c=Math.max(c,e),u=Math.max(u,r)):i?(c=Math.max(c,e),u=Math.max(u,r)):(c+=e,u+=r)):o?i?(c+=t.charWidth,u+=t.textWidth):(c=Math.max(c,t.charWidth),u=Math.max(u,t.textWidth)):(r=new Df(p,g,A,vn.getBaseLine(d)),t.__layout({x:p,y:g,w:v,h:m,lineBoxManager:r}),i?(c=Math.max(c,t.height),u=Math.max(u,t.height)):(c+=t.height,u+=t.height))})):(s=a=0,h=this.__lineBoxManager=new Df(p,g,A,vn.getBaseLine(d)),l=_.length,_.forEach(function(t,e){var r,i,n;t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf?(r=(i=Qt(t.__calMinMax(o,{x:p,y:g,w:v,h:m,lineBoxManager:h}),2))[0],i=(n=Qt(i[1],2))[0],n=n[1],"block"!==r&&"flex"!==r||!h.isEnd||(h.setNotEnd(),h.setNewLine()),o?"block"===r||"flex"===r?(c=Math.max(c,i),u=Math.max(u,n),a=s=0):(a+=i,s+=n,c=Math.max(c,a),u=Math.max(u,s)):"block"===r||"flex"===r?(c+=a,u+=s,a=s=0,c+=i,u+=n):(a=Math.max(a,i),s=Math.max(s,n),e===l-1&&(c+=a,u+=s))):o?(a+=t.charWidth,s+=t.textWidth,c=Math.max(c,a),u=Math.max(u,s)):(t.__layout({x:p,y:g,w:v,h:m,lineBoxManager:h}),a=Math.max(a,t.height),s=Math.max(s,t.height),e===l-1&&(c+=a,u+=s))})),r&&(u=Math.max(r,u)),b&&(n=u),this.__addMp(o,v,f,[n,c,u],!0)}},{key:"__layoutNone",value:function(){P(N(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(_,f){var d=this.flowChildren,t=this.currentStyle,e=this.computedStyle,r=this.__preLayout(_),i=r.fixedWidth,n=r.fixedHeight,p=r.x,g=r.y,v=r.w,m=r.h;if(i&&f)return this.__width=v,void this.__ioSize(v,this.height);var o=e[f0],y=e[b0],E=e[A0],r=e[T0],E=E||0,x=0,b=this.__lineBoxManager=new Df(p,g,r,vn.getBaseLine(e)),T=0,A=0,M=[],O=[],R=d.length;d.forEach(function(t,e){var r,i,n,o,a,s,h=t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf,l=h&&"inline"===t.currentStyle[zf],c=h&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[zf]),u="img"===t.tagName;h&&!l&&!c||(M.length&&O.length&&((o=Vf.getMergeMarginTB(O,M))&&(g+=o)),O=[],M=[]),h?c||l?p===_.x||l&&"nowrap"===y?(t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(T=Math.max(T,A),A=t.outerWidth,T=Math.max(T,A))):(-1e-10<=t.__tryLayInline(v+_.x-p,v)?(t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),(c||u)&&b.addItem(t),p=b.lastX,g=b.lastY):(x++,p=_.x,g=b.endY,b.setNewLine(),x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),t.__isIbFull?(p=_.x,g+=t.outerHeight,b.setNotEnd()):((c||u)&&b.addItem(t),p=b.lastX,g=b.lastY),f&&(T=Math.max(T,A),A=0)),f&&(A+=t.outerWidth,T=Math.max(T,A))):(p!==_.x&&d[e-1]instanceof Qa&&x++,p=_.x,b.isEnd&&(g=b.endY,b.setNotEnd(),b.setNewLine()),t.__layout({x:p,y:g,w:v,h:m},f),!(r="none"===t.currentStyle[zf])&&t.flowChildren&&0===t.flowChildren.length&&(n=(a=t.computedStyle)[Zf],o=a[Jf],h=a[r0],l=a[t0],c=a[_0],u=a[i0],a=a[n0],h<=0&&l<=0&&c<=0&&u<=0&&a<=0&&(M.push(o),O.push(n),i=!0)),g+=t.outerHeight,b.__lastY=g,f&&(T=Math.max(T,t.outerWidth),A=0),r||i?e!==R-1||(s=Vf.getMergeMarginTB(O,M))&&(g+=s):(s=(e=t.computedStyle)[Zf],e=e[Jf],M.length&&(O.push(s),(s=Vf.getMergeMarginTB(O,M))&&(t.__offsetY(s,!0),g+=s)),O=[],M=[e])):E&&E<=x||(p===_.x||"nowrap"===y?(x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),p=b.lastX,g=b.lastY,f&&(T=Math.max(T,A),A=t.width,T=Math.max(T,A))):(-1e-10<=t.__tryLayInline(v-p+_.x)?(x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),p=b.lastX,g=b.lastY):(x++,p=_.x,g=b.endY,b.setNewLine(),x=t.__layout({x:p,y:g,w:v,h:m,lx:_.x,lineBoxManager:b,lineClamp:E,lineClampCount:x},f),p=b.lastX,g=b.lastY,f&&(T=Math.max(T,t.width),A=0)),f&&(A+=t.width,T=Math.max(T,A))))}),b.isEnd&&(g=b.endY);var a=this.__width=i||!f?v:T,n=this.__height=n?m:g-_.y;this.__ioSize(a,n),f||(b.verticalAlign(),-1<["center","right"].indexOf(o)&&(b.horizonAlign(a,o),d.forEach(function(t){(t=t instanceof Ss?t.shadowRoot:t)instanceof Qa&&t.__inlineSize()})),b.domList.forEach(function(t){t.__inlineSize(a,o)}),this.__marginAuto(t,_))}},{key:"__layoutFlex",value:function(r,h){var n=this,t=this.flowChildren,e=this.currentStyle,l=this.computedStyle,o=this.__flexLine,i=this.__preLayout(r),a=i.fixedWidth,s=i.fixedHeight,c=i.x,u=i.y,_=i.w,f=i.h;if(a&&h)return this.__width=_,void this.__ioSize(_,this.height);o.splice(0);var d=l[d0],p=l[E0],g=l[y0],v=l[A0],m=l[O0],i=l[R0],y=l[T0],E=l[f0],v=v||0,x=0,b=-1===["column","column-reverse","columnReverse"].indexOf(d),T=[],A=[],M=[],O=[],R=[],S=td(t);if(S.forEach(function(t){var e,r,i,n,o,a,s;t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf?(o=t.currentStyle,e=t.computedStyle,"block"!==o[zf]&&"flex"!==o[zf]&&(o[zf]=e[zf]="block"),r=(n=Qt(t.__calBasis(!!h||b,{x:c,y:u,w:_,h:f},h),3))[0],a=n[1],i=n[2],h?b?x+=i:x=Math.max(x,i):(n=o[v0],o=o[g0],e[p0]=r,T.push(n),A.push(o),M.push(r),O.push(i),R.push(a))):h?b?x+=t.textWidth:x=Math.max(x,t.textWidth):(T.push(0),A.push(1),b?(s=t.charWidth,a=t.textWidth,M.push(a),O.push(a),R.push(s)):(s=new Df(c,u,y,vn.getBaseLine(l)),t.__layout({x:c,y:u,w:_,h:void 0,lineBoxManager:s,lineClamp:v,lineClampCount:0}),t=t.height,M.push(t),R.push(t)))}),h){t=this.__width=Math.min(x,_);this.__ioSize(t,this.height)}else{var C=b?_:f,I="wrap"===m||-1<["wrap-reverse","wrapReverse"].indexOf(m),k=[],w=0,L=[];M.forEach(function(t,e){var r=R[e],i=O[e],t=t<r?r:i<t?i:t;L.push(t),I?C<w+t?w=w?(o.push(k),k=[S[e]],t):(k.push(S[e]),o.push(k),k=[],0):(k.push(S[e]),w+=t):k.push(S[e])}),k.length&&o.push(k);var D=0,N={x:c,y:u,w:_,h:f},P=[];o.forEach(function(t){var e=t.length,r=D+e,i=Qt(n.__layoutFlexLine(N,b,C,a,s,v,0,y,l,p,g,S.slice(D,r),t,E,T.slice(D,r),A.slice(D,r),M.slice(D,r),L.slice(D,r),R.slice(D,r)),3),t=i[0],r=i[1],i=i[2];b?N.y=r:N.x=t,c=Math.max(c,t),u=Math.max(u,r),P.push(i),D+=e});var F=this.__width=_,B=this.__height=s?f:u-r.y;this.__ioSize(F,B),"row-reverse"===d||"rowReverse"===d?o.forEach(function(t){t.forEach(function(t){var e=F-t.outerWidth-2*(t.x-r.x);e&&t.__offsetX(e,!0)})}):"column-reverse"!==d&&"columnReverse"!==d||o.forEach(function(t){t.forEach(function(t){var e=B-t.outerHeight-2*(t.y-r.y);e&&t.__offsetY(e,!0)})});var Y,H,G,W,U,d=o.length;if(-1<["wrapReverse","wrap-reverse"].indexOf(m)&&1<d){var X=0,V=[];P.forEach(function(t){V.push(X),X+=t});for(var K=0,z=d-1;0<=z;z--)!function(t){var e=o[t],r=V[t],i=K-r;i&&e.forEach(function(t){b?t.__offsetY(i,!0):t.__offsetX(i,!0)}),K+=P[t]}(z);o.reverse()}!h&&1<d&&(s&&b||!b)&&(0<(H=b?B-(u-r.y):F-(c-r.x))&&("center"===i?(G=.5*H,S.forEach(function(t){b?t.__offsetY(G,!0):t.__offsetX(G,!0)})):"flex-start"===i||"flexStart"===i||("flex-end"===i||"flexEnd"===i?S.forEach(function(t){b?t.__offsetY(H,!0):t.__offsetX(H,!0)}):"space-between"===i||"spaceBetween"===i?(W=H/(d-1),o.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(W,!0):t.__offsetX(W,!0)})})):"space-around"===i||"spaceAround"===i?(U=H/(d+1),o.forEach(function(t,e){t.forEach(function(t){b?t.__offsetY(U*(e+1),!0):t.__offsetX(U*(e+1),!0)})})):(Y=H/d,o.forEach(function(t,e){e&&t.forEach(function(t){b?t.__offsetY(Y*e,!0):t.__offsetX(Y*e,!0)})}))))),h||(1<d?o.forEach(function(t,e){e=P[e];Y&&(e+=Y),n.__crossAlign(t,g,b,e)}):d&&(d=P[0],b?s&&(d=f):d=_,this.__crossAlign(o[0],g,b,d))),this.__marginAuto(e,r)}}},{key:"__layoutFlexLine",value:function(t,i,e,r,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m){var y=this,E=t.x,x=t.y,b=t.w,T=t.h,A=0;v.forEach(function(t){A+=t});var M=e<=A,O=[];g.forEach(function(t,e){M?(!p[e]||g[e]<v[e])&&(O[e]=v[e]):(!d[e]||g[e]>v[e])&&(O[e]=v[e])});var R=0;g.forEach(function(t,e){void 0!==O[e]?R+=O[e]:R+=t});var e=1/0,e=i?b:n?T:R,R=Math.abs(e-R),S=0;(M?function(){for(var i=p.map(function(t,e){if(void 0===O[e]){e=t*g[e];return S+=e,e}});;){S<1&&(R*=S);var n=void 0,o=0;if(i.forEach(function(t,e){var r;t&&(r=t/S*R,(r=g[e]-r)<m[e]?(O[e]=m[e],i[e]=0,n=!0,R-=g[e]-m[e]):(O[e]=r,o+=t))}),!n)break;S=o}}:function(){for(var i=d.map(function(t,e){if(void 0===O[e])return S+=t,t});;){S<1&&(R*=S);var n=void 0,o=0;if(i.forEach(function(t,e){var r;t&&(r=t/S*R,(r=g[e]+r)<m[e]?(O[e]=m[e],i[e]=0,n=!0,R-=g[e]-m[e]):(O[e]=r,o+=t))}),!n)break;S=o}})();var C=0,I=[];u.forEach(function(t,e){var r=O[e];t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf?i?t.__layout({x:E,y:x,w:r,h:T,w3:r}):t.__layout({x:E,y:x,w:b,h:r,h3:r}):(e=y.__lineBoxManager=new Df(E,x,s,vn.getBaseLine(h)),I.push(e),t.__layout({x:E,y:x,w:i?r:b,h:i?T:r,lineBoxManager:e,lineClamp:o,lineClampCount:a})),C=i?(E+=t.outerWidth,Math.max(C,t.outerHeight)):(x+=t.outerHeight,Math.max(C,t.outerWidth))});var k=i?b-E+t.x:T-x+t.y;if(0<k){var w=u.length;if("flexEnd"===l||"flex-end"===l)for(var L=0;L<w;L++){var D=u[L];i?D.__offsetX(k,!0):D.__offsetY(k,!0)}else if("center"===l)for(var N=.5*k,P=0;P<w;P++){var F=u[P];i?F.__offsetX(N,!0):F.__offsetY(N,!0)}else if("spaceBetween"===l||"space-between"===l)for(var B=k/(w-1),Y=1;Y<w;Y++){var H=u[Y];i?H.__offsetX(B*Y,!0):H.__offsetY(B*Y,!0)}else if("spaceAround"===l||"space-around"===l)for(var G=k/(w+1),W=0;W<w;W++){var U=u[W];i?U.__offsetX(G*(W+1),!0):U.__offsetY(G*(W+1),!0)}}return i?x+=C:E+=C,-1<["center","right"].indexOf(f)&&I.forEach(function(t){t.horizonAlign(t.width,f)}),[E,x,C]}},{key:"__crossAlign",value:function(t,S,C,I){var k=0;t.forEach(function(t){k=Math.max(k,t.firstBaseLine)}),t.forEach(function(t){var e,r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R=t.currentStyle[m0];C?"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(a=I-t.outerHeight)&&t.__offsetY(a,!0):"center"===R?0!=(s=I-t.outerHeight)&&t.__offsetY(.5*s,!0):"stretch"===R?(e=t.computedStyle,h=t.currentStyle[_0],r=e[i0],i=e[n0],n=e[Zf],o=e[Jf],a=e[r0],s=e[t0],h[1]===V0&&(h=t.height,h=(t.__height=e[_0]=I-n-o-a-s-r-i)-h,t.__sy4+=h,t.__sy5+=h,t.__sy6+=h,t.__height+=h,t.__clientHeight+=h,t.__offsetHeight+=h,t.__outerHeight+=h)):"baseline"===R?0!=(c=k-t.firstBaseLine)&&t.__offsetY(c,!0):"flexStart"===S||"flex-start"===R||("center"===S?0!=(u=I-t.outerHeight)&&t.__offsetY(.5*u,!0):"flexEnd"===S||"flex-end"===S?0!=(_=I-t.outerHeight)&&t.__offsetY(_,!0):"baseline"===S?0!=(l=k-t.firstBaseLine)&&t.__offsetY(l,!0):(f=t.computedStyle,u=(c=t.currentStyle)[zf],_=c[d0],l=c[_0],C&&"flex"===u&&"column"===_&&l[1]===V0&&t.outerHeight<I&&t.__layout(Object.assign(t.__layoutData,{h3:I})),d=f[i0],p=f[n0],c=f[Zf],u=f[Jf],_=f[r0],f=f[t0],l[1]===V0&&(g=t.height,t.__sy4+=v=I-c-u-_-f-d-p-g,t.__sy5+=v,t.__sy6+=v,t.__height+=v,t.__clientHeight+=v,t.__offsetHeight+=v,t.__outerHeight+=v)))):"flexStart"===R||"flex-start"===R||("flexEnd"===R||"flex-end"===R?0!=(m=I-t.outerWidth)&&t.__offsetX(m,!0):"center"===R?0!=(y=I-t.outerWidth)&&t.__offsetX(.5*y,!0):"stretch"===R?(f=t.computedStyle,d=t.currentStyle[u0],p=f[o0],E=f[a0],g=f[qf],v=f[$f],m=f[e0],y=f[Qf],d[1]===V0&&(O=t.width,x=(t.__width=f[u0]=I-v-g-y-m-p-E)-O,t.__sx4+=x,t.__sx5+=x,t.__sx6+=x,t.__width+=x,t.__clientWidth+=x,t.__offsetWidth+=x,t.__outerWidth+=x)):"baseline"===S?0!=(b=k-t.firstBaseLine)&&t.__offsetX(b,!0):"flexStart"===S||"flex-start"===R||("center"===S?0!=(T=I-t.outerWidth)&&t.__offsetX(.5*T,!0):"flexEnd"===S||"flex-end"===S?0!=(A=I-t.outerWidth)&&t.__offsetX(A,!0):"baseline"===S?0!=(M=k-t.firstBaseLine)&&t.__offsetX(M,!0):(E=t.computedStyle,O=t.currentStyle[u0],x=E[o0],b=E[a0],R=E[qf],T=E[$f],A=E[e0],M=E[Qf],O[1]===V0&&(O=t.width,O=(t.__width=E[u0]=I-T-R-M-A-x-b)-O,t.__sx4+=O,t.__sx5+=O,t.__sx6+=O,t.__width+=O,t.__clientWidth+=O,t.__offsetWidth+=O,t.__outerWidth+=O))))})}},{key:"__layoutInline",value:function(t,s,h){var e=this.flowChildren,r=this.currentStyle,i=this.computedStyle,n=this.__preLayout(t,h),o=n.fixedWidth,a=n.fixedHeight,l=n.x,c=n.y,u=n.w,_=n.h,f=n.lx,d=n.lineBoxManager,p=n.nowrap,g=n.endSpace,v=n.selfEndSpace;if(o&&s)return this.__width=u,void this.__ioSize(u,this.height);var m=r[u0],y=i[f0],E=i[b0],x=i[A0],b=i[T0],T=i[$f],A=i[qf],M=i[a0],O=i[o0],n=i[Qf],r=i[e0],R=t.lineClampCount||0;(h=h&&!this.__isRealInline()?!1:h)?(this.__config[D0]=!0,this.__lineBoxManager=d,S=vn.getBaseLine(i),(T||A||n||r||M||O)&&d.isNewLine?d.genLineBoxByInlineIfNewLine(l,c,b,S):d.setLbByInlineIfNotNewLine(b,S),x=t.lineClamp||0):(d=this.__lineBoxManager=new Df(l,c,b,vn.getBaseLine(i)),f=l,g=v=R=0),h&&(this.__contentBoxList=[],d.pushContentBoxList(this));var S,C,I,k=!1,w=e.length;return e.forEach(function(t,e){var r=t instanceof Mf||t instanceof Ss&&t.shadowRoot instanceof Mf,i=r&&"inline"===t.currentStyle[zf],n=r&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[zf]),o=r&&t.__isRealInline(),a=h&&e===w-1;a&&(g+=v),r?(i||n||(t.currentStyle[zf]=t.computedStyle[zf]="inlineBlock",n=!0,Le.warn("Inline can not contain block/flex")),l===f||!e||i&&"nowrap"===E?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),t.__isIbFull?(n&&u[1]===V0&&(k=!0),d.addItem(t),l=f,c+=t.outerHeight,d.setNotEnd()):(!n&&o||d.addItem(t),l=d.lastX,c=d.lastY)):-1e-10<=("nowrap"===E?0:t.__tryLayInline(u-l+f,u-(a?g:0)))?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,nowrap:"nowrap"===E,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),!n&&o||d.addItem(t),l=d.lastX,c=d.lastY):(i&&R++,l=f,c=d.endY,d.setNewLine(),R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),t.__isIbFull?(d.addItem(t),l=f,c+=t.outerHeight,d.setNotEnd()):(!n&&o||d.addItem(t),l=d.lastX,c=d.lastY))):(n=d.size,l!==f&&e&&"nowrap"!==E?(e=(o=!e&&p||"nowrap"===E)?0:t.__tryLayInline(u+f-l),!o&&0<=e&&a&&g&&1===t.content.length&&((a=e-g)<0&&(e=a)),-1e-10<=e?(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),l=d.lastX,c=d.lastY):(R++,l=f,c=d.endY,d.setNewLine(),R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),l=d.lastX,c=d.lastY,!h&&1<d.size-n&&m[1]===V0&&(k=!0))):(R=t.__layout({x:l,y:c,w:u,h:_,lx:f,lineBoxManager:d,endSpace:g,lineClamp:x,lineClampCount:R},s),l=d.lastX,c=d.lastY,!h&&1<d.size-n&&m[1]===V0&&(k=!0)))}),c=d.endY,this.__isIbFull=k,h?(v&&d.addX(v),e.length||(S=i[$f],b=i[Qf],C=i[a0],d.addX(S+b+C)),d.popContentBoxList(),s&&this.__inlineSize()):(C=d.__maxX-t.x,I=this.__width=o?u:k?Math.max(u,C):C,t=this.__height=a?_:c-t.y,this.__ioSize(I,t)),s||h||(d.verticalAlign(),-1<["center","right"].indexOf(y)&&(d.horizonAlign(I,y),e.forEach(function(t){(t=t instanceof Ss?t.shadowRoot:t)instanceof Qa&&t.__inlineSize()})),d.domList.forEach(function(t){t.__inlineSize(I,y)})),h?R:0}},{key:"__inlineSize",value:function(t,e){var r,i,n,o,a,s,h,l,c,u,_,f,d,p,g,v,m=this.contentBoxList,y=this.computedStyle,E=this.__ox,x=this.__oy,b=y[Zf],T=y[qf],A=y[Jf],M=y[$f],O=y[r0],R=y[e0],S=y[t0],C=y[Qf],I=y[i0],k=y[o0],w=y[n0],L=y[a0],D=y[T0],N=m.length;N?(m.forEach(function(t,e){e?(n=Math.min(n,t.x),h=Math.min(h,t.x),_=Math.min(_,t.x),g=Math.min(g,t.x),e===N-1?(r=a=c=d=Math.max(r,t.x+t.outerWidth),i=s=u=p=Math.max(i,t.y+t.outerHeight),a+=R,s+=S,c+=R+k,u+=S+w,d+=k+R+T,p+=w+S+A):r=a=c=d=Math.max(r,t.x+t.outerWidth)):(n=t.x,o=t.y,g=(_=(h=n-C)-L)-M,v=(f=(l=o-O)-I)-b,r=a=c=d=t.x+t.outerWidth,i=s=u=p=t.y+t.outerHeight,e===N-1&&(a+=R,s+=S,c+=R+k,u+=S+w,d+=k+R+T,p+=w+S+A))}),this.__x=g,this.__y=v,this.__width=y[u0]=r-n,this.__height=y[_0]=Math.max(D,i-o),this.__clientWidth=a-h,this.__clientHeight=s-l,this.__offsetWidth=c-_,this.__offsetHeight=u-f,this.__outerWidth=d-g,this.__outerHeight=p-v,this.__sx=g+E,this.__sy=v+x,this.__sx1=_+E,this.__sy1=f+x,this.__sx2=h+E,this.__sy2=l+x,this.__sx3=n+E,this.__sy3=o+x,this.__sx4=r+E,this.__sy4=i+x,this.__sx5=a+E,this.__sy5=s+x,this.__sx6=c+E,this.__sy6=u+x,-1<["center","right"].indexOf(e)&&this.children.forEach(function(t){t instanceof Qa&&t.__inlineSize()})):(-1<["center","right"].indexOf(e)&&(t=t,"center"===e&&(t*=.5),t&&this.__offsetX(t,!0)),this.__width=y[u0]=0,D=this.__height=y[_0]=D,this.__ioSize(0,D),this.__sy-=b+O+I,this.__sx1=this.sx+M,this.__sy1=this.sy+b,this.__sx2=this.__sx1+L,this.__sy2=this.__sy1+I,this.__sx4=this.__sx3=this.__sx2+C,this.__sy4=this.__sy3=this.__sy2+O,this.__sx5=this.__sx4+R,this.__sy5=this.__sy4+D+S,this.__sx6=this.__sx5+k,this.__sy6=this.__sy5+w,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+M+T,this.__outerHeight=this.__offsetHeight+b+A)}},{key:"__layoutAbs",value:function(r,i,T){var A=this,M=r.sx,O=r.sy,R=r.clientWidth,S=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,n=this.children,o=this.absChildren,a=t[zf],s=t[i0],h=t[a0],l=t[Zf],c=t[$f],C=t[Qf],I=t[r0];e||"none"===a?this.__layoutNone():(M+=c+h,O+=l+s,o.forEach(function(t){if(T){var e=t;if(t instanceof Ss&&(e=t.shadowRoot),T!==e&&T!==t)return}var r=t.currentStyle,i=t.computedStyle;if("none"!==r[zf]){t.__mp(r,i,R),"block"!==r[zf]&&"flex"!==r[zf]&&(r[zf]=i[zf]="block");var n,o,a,s,h,l,c,u,_,f,d=r[c0],p=r[s0],g=r[h0],v=r[l0],m=r[u0],y=r[_0],E=r[zf],e=r[d0];if(d[1]!==V0?(_=!0,i[c0]=q0(r,"left",d,R,A.root)):i[c0]="auto",g[1]!==V0?(c=!0,i[h0]=q0(r,"right",g,R,A.root)):i[h0]="auto",p[1]!==V0?(l=!0,i[s0]=q0(r,"top",p,S,A.root)):i[s0]="auto",v[1]!==V0?(u=!0,i[l0]=q0(r,"bottom",v,S,A.root)):i[l0]="auto",_&&c?(n=M+i[c0],o=M+R-i[h0]-n):_?(n=M+i[c0],m[1]!==V0&&(o=m[1]===z0?m[0]*R*.01:m[1]===j0?m[0]*A.root.computedStyle[C0]:m[1]===$0?m[0]*A.root.width*.01:m[1]===Z0?m[0]*A.root.height*.01:m[0])):c?(m[1]!==V0?o=m[1]===z0?m[0]*R*.01:m[1]===j0?m[0]*A.root.computedStyle[C0]:m[1]===$0?m[0]*A.root.width*.01:m[1]===Z0?m[0]*A.root.height*.01:m[0]:s=!0,n=M+R-i[h0]-(o||0),n-=i[$f],n-=i[qf],n-=i[Qf],n-=i[e0],n-=r[a0][0],n-=r[o0][0]):(n=M+C,m[1]!==V0&&(o=m[1]===z0?m[0]*R*.01:m[1]===j0?m[0]*A.root.computedStyle[C0]:m[1]===$0?m[0]*A.root.width*.01:m[1]===Z0?m[0]*A.root.height*.01:m[0])),l&&u)x=O+i[s0],a=O+S-i[l0]-x;else if(l)x=O+i[s0],y[1]!==V0&&(a=y[1]===z0?y[0]*S*.01:y[1]===j0?y[0]*A.root.computedStyle[C0]:y[1]===$0?y[0]*A.root.width*.01:y[1]===Z0?y[0]*A.root.height*.01:y[0]);else if(u)y[1]!==V0?a=y[1]===z0?y[0]*S*.01:y[1]===j0?y[0]*A.root.computedStyle[C0]:y[1]===$0?y[0]*A.root.width*.01:y[1]===Z0?y[0]*A.root.height*.01:y[0]:h=!0,x=O+S-i[l0]-(a||0),x-=i[Zf],x-=i[Jf],x-=i[r0],x-=i[t0],x-=r[i0][0],x-=r[n0][0];else{for(var x=O+I,b=t.prev;b;){if(b instanceof Qa||"absolute"!==b.computedStyle[Kf]){x=b.y+b.outerHeight;break}b=b.prev}y[1]===z0?a=y[0]*S*.01:y[1]===j0?a=y[0]*A.root.computedStyle[C0]:y[1]===$0?a=y[0]*A.root.width*.01:y[1]===Z0?a=y[0]*A.root.height*.01:y[1]===K0&&(a=y[0])}(("block"===E||-1<["inlineBlock","inline-block"].indexOf(E))&&void 0===o||"flex"===E&&(void 0===o||"column"===e&&void 0===a))&&(f=!0);E=s?n-M:R+M-n,e=h?x-O:S+O-x;f&&(t.__layout({x:n,y:x,w:E,h:e},!0,!0),E=t.outerWidth),t.__layout({x:n,y:x,w:E,h:e,w2:o,h2:a},!1,!0),s&&t.__offsetX(-t.outerWidth,!0),h&&t.__offsetY(-t.outerHeight,!0)}else t.__layoutNone()}),n.forEach(function(t){if(T){var e=t;if(t instanceof Ss&&(e=t.shadowRoot),T!==e&&T!==t)return}t instanceof u?t.__layoutAbs(J0(t)?t:r,i):t instanceof Ss&&((t=t.shadowRoot)instanceof u&&t.__layoutAbs(t,i))}),this.__execAr())}},{key:"__computeMeasure",value:function(e,r,i){P(N(u.prototype),"__computeMeasure",this).call(this,e,r,i),this.children.forEach(function(t){t.__computeMeasure(e,r,i)})}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(u.prototype),"render",this).call(this,t,e,r,i,n,o);return t===rt.SVG&&(this.virtualDom.type="dom"),o}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),P(N(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return P(N(u.prototype),"__emitEvent",this).call(this,t,e);var r=this.isDestroyed,i=this.computedStyle,e=this.isMask;if(!(r||"none"===i[zf]||t.__stopPropagation||e)&&("hidden"!==i[S0]||this.willResponseEvent(t,!0))){var n,e=t.event.type,i=this.listener,o=this.zIndexChildren;i.hasOwnProperty(e)&&(n=i[e]);for(var a=o.length-1;0<=a;a--){var s=o[a];if((s instanceof Mf||s instanceof Ss&&s.shadowRoot instanceof Mf)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(ue.isFunction(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0)}return P(N(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){P(N(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(r,e){var i=this;if(!ue.isNil(r)&&!i.isDestroyed){var n,o=i.root,t=i.host;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(r.$$type)))throw new Error("Invalid parameter in appendChild.");r.vd&&(o.delRefreshTask(r.vd.__task),r.vd.remove()),n=Vt.TYPE_CP===r.$$type?Es.initCp2(r,o,t,i):Es.initDom(r,o,t,i),o.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.push(r);var t=i.children.length;t&&(((e=i.children[t-1]).__next=n).__prev=e),i.children.push(n),i.__zIndexChildren=null;var e={};e[N0]=n,e[P0]=ba.REFLOW,e[F0]=!0,e[Y0]=!0,e[B0]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,e)},__after:function(t){ue.isFunction(e)&&e.call(n,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!ue.isNil(e)&&!i.isDestroyed){var n,o=i.root,t=i.host;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(o.delRefreshTask(e.vd.__task),e.vd.remove()),n=Vt.TYPE_CP===e.$$type?Es.initCp2(e,o,t,i):Es.initDom(e,o,t,i),o.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.unshift(e),i.children.length&&(((t=i.children[0]).__prev=n).__next=t),i.children.unshift(n),i.__zIndexChildren=null;var t={};t[N0]=n,t[P0]=ba.REFLOW,t[F0]=!0,t[Y0]=!0,t[B0]=n.__config,o.__addUpdate(n,n.__config,o,o.__config,t)},__after:function(t){ue.isFunction(r)&&r.call(n,t)}})}}},{key:"insertBefore",value:function(a,e){var s=this;if(!ue.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertBefore.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=Vt.TYPE_CP===a.$$type?Es.initCp2(a,l,t,c):Es.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,a),h.__next=s,h.__prev=s.__prev,s.__prev=h,c.children.splice(e,0,h)):(i&&(((o=c.children[0]).__prev=h).__next=o),r.unshift(a),c.children.unshift(h)),c.__zIndexChildren=null;var o={};o[N0]=h,o[P0]=ba.REFLOW,o[F0]=!0,o[Y0]=!0,o[B0]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,o)},__after:function(t){ue.isFunction(e)&&e.call(h,t)}})}}},{key:"insertAfter",value:function(a,e){var s=this;if(!ue.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Vt.TYPE_VD,Vt.TYPE_GM,Vt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertAfter.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=Vt.TYPE_CP===a.$$type?Es.initCp2(a,l,t,c):Es.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,a),h.__prev=s,h.__next=s.__next,s.__next=h,c.children.splice(e+1,0,h)):(i&&(((o=c.children[i-1]).__next=h).__prev=o),r.push(a),c.children.push(h)),c.__zIndexChildren=null;var o={};o[N0]=h,o[P0]=ba.REFLOW,o[F0]=!0,o[Y0]=!0,o[B0]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,o)},__after:function(t){ue.isFunction(e)&&e.call(h,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof Mf||t instanceof Ss))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return Le.warn("Remove parent is destroyed."),void(ue.isFunction(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ss?t.shadowRoot:t)instanceof Qa||"absolute"!==t.currentStyle[Kf]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ss?t.shadowRoot:t)instanceof Mf&&"absolute"===t.currentStyle[Kf]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[Zf]+t[i0]+t[r0]+this.lineBoxManager.baseLine}},{key:"firstBaseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[Zf]+t[i0]+t[r0]+this.lineBoxManager.firstBaseLine}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),u}(),fr=m.STYLE_KEY,rd=fr.WIDTH,id=fr.HEIGHT,nd=fr.DISPLAY,od=fr.BORDER_TOP_WIDTH,ad=fr.BORDER_RIGHT_WIDTH,sd=fr.BORDER_LEFT_WIDTH,hd=fr.BORDER_BOTTOM_WIDTH,ld=fr.BORDER_TOP_LEFT_RADIUS,cd=fr.BORDER_TOP_RIGHT_RADIUS,ud=fr.BORDER_BOTTOM_RIGHT_RADIUS,_d=fr.BORDER_BOTTOM_LEFT_RADIUS,fd=fr.VISIBILITY,dd=fr.BACKGROUND_IMAGE,pd=fr.BACKGROUND_COLOR,gd=fr.BOX_SHADOW,vd=fr.MIX_BLEND_MODE,md=fr.MARGIN_TOP,yd=fr.MARGIN_RIGHT,Ed=fr.MARGIN_BOTTOM,xd=fr.MARGIN_LEFT,bd=fr.PADDING_TOP,Td=fr.PADDING_RIGHT,Ad=fr.PADDING_BOTTOM,Md=fr.PADDING_LEFT,Od=fr.FONT_SIZE,Rd=fr.FLEX_BASIS,A=m.UPDATE_KEY,Sd=A.UPDATE_NODE,Cd=A.UPDATE_FOCUS,Id=A.UPDATE_CONFIG,Jt=m.NODE_KEY,kd=Jt.NODE_CACHE,wd=Jt.NODE_DEFS_CACHE,Ld=Jt.NODE_IS_MASK,Dd=S.AUTO,Nd=S.PX,Pd=S.PERCENT,Fd=S.REM,Bd=S.VW,Yd=S.VH,Hd=S.RGBA,Gd=Tt.canvasPolygon,Wd=Tt.svgPolygon,Ud=ue.isFunction,Xd=function(){t(D,ed);var i=e(D);function D(t,e){_(this,D);var r,t=(r=i.call(this,t,e)).props.src,e=r.__loadImg={src:t};return t||(e.error=!0),r.__config[Ld]&&(e=(t=a(r)).style,t=t.currentStyle,e[dd]=t[dd]=[null],e[pd]=t[pd]=[[0,0,0,0],Hd],e[od]=t[od]=[0,Nd],e[ad]=t[ad]=[0,Nd],e[sd]=t[sd]=[0,Nd],e[hd]=t[hd]=[0,Nd],e[gd]=t[gd]=null,e[vd]=t[vd]="normal"),r}return f(D,[{key:"__preLayout",value:function(t){var e=P(N(D.prototype),"__preLayout",this).call(this,t),r=this.__loadImg;return r.error||(t=r.src,(t=Le.IMG[t])&&t.state===Le.LOADED&&(r.source=t.source,r.width=t.width,r.height=t.height),r.cache=!1),e.fixedWidth&&e.fixedHeight||(r.error&&!this.props.placeholder?e.fixedWidth?e.h=e.w:e.fixedHeight?e.w=e.h:e.w=e.h=32:r.source?e.fixedWidth?e.h=e.w*r.height/r.width:e.fixedHeight?e.w=e.h*r.width/r.height:(e.w=r.width,e.h=r.height):e.w=e.h=0,e.fixedWidth=!0,e.fixedHeight=!0),e}},{key:"__addGeom",value:function(t,e){e=ue.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),P(N(D.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){e=P(N(D.prototype),"__calContent",this).call(this,t,e,r,i);return e||(r=this.__loadImg,"hidden"!==i[fd]&&(i[rd]||i[id])&&r.source&&(e=!0)),e}},{key:"render",value:function(t,e,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=P(N(D.prototype),"render",this).call(this,t,e,r,i,n,o);t===rt.WEBGL&&(n=a.dx,o=a.dy);var s=a.offscreenBlend,h=a.offscreenMask,l=a.offscreenFilter,c=a.offscreenOverflow,u=this.width,_=this.height,f=this.isDestroyed,d=this.props.placeholder,p=this.computedStyle,g=this.computedStyle,v=g[nd],m=g[ld],y=g[cd],E=g[ud],x=g[_d],b=g[fd],T=this.virtualDom,A=this.__config,e=this.__loadImg,g=this.root;if(s&&(r=s.target.ctx),h&&(r=h.target.ctx),l&&(r=l.target.ctx),c&&(r=c.target.ctx),e.source||e.error||e.loading||this.__loadAndRefresh(e,g,r,d,p,u,_),f||"none"===v||"hidden"===b)return a;c=A[kd];i&&c&&c.enabled&&(r=c.ctx);g=a.x3+n,p=a.y3+o,f=e.source;if(e.error&&!d&&D.showError){var v=.02*Math.min(u,_),b=g+.7*u,i=p+.3*_,c=5*v,M=[[g+.15*u,p+.7*_],[g+.3*u,p+.4*_],[g+.5*u,p+.6*_],[g+.6*u,p+.5*_],[g+.9*u,p+.8*_],[g+.15*u,p+.8*_]];if(t===rt.CANVAS||t===rt.WEBGL){r.strokeStyle="#CCC",r.lineWidth=v,r.fillStyle="#DDD",r.beginPath(),r.moveTo(g,p),r.lineTo(g+u,p),r.lineTo(g+u,p+_),r.lineTo(g,p+_),r.lineTo(g,p),r.stroke(),r.closePath(),r.beginPath(),r.arc(b,i,c,0,2*Math.PI),r.fill(),r.closePath(),r.beginPath(),r.moveTo(M[0][0],M[0][1]);for(var O=1,R=M.length;O<R;O++){var S=M[O];r.lineTo(S[0],S[1])}r.lineTo(M[0][0],M[0][1]),r.fill(),r.closePath()}else if(t===rt.SVG){this.__addGeom("rect",[["x",g],["y",p],["width",u],["height",_],["stroke","#CCC"],["stroke-width",v],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",b],["cy",i],["r",c],["fill","#DDD"]]);for(var C="",I=0,k=M.length;I<k;I++){var w=M[I];I&&(C+=" "),C+=w[0]+","+w[1]}this.__addGeom("polygon",[["points",C],["fill","#DDD"]])}}else if(f){var L,x=Xt.calRadius(g,p,u,_,m,y,E,x);if(t===rt.CANVAS||t===rt.WEBGL)x?(r.save(),r.beginPath(),Gd(r,x,n,o),r.clip(),r.closePath(),r.drawImage(f,g,p,u,_),r.restore()):r.drawImage(f,g,p,u,_);else if(t===rt.SVG){if(e.cache)return e.cache.cache=!0,T.children=[e.cache],void(!T.cache&&x&&(f={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Wd(x)],["fill","#FFF"]]}]},t=r.add(f),A[wd].push(f),T.conClip="url(#"+t+")"));u===e.width&&_===e.height||(L=Ls.matrixResize(e.width,e.height,u,_,g,p,u,_));g=[["xlink:href",e.error?d:e.src],["x",g],["y",p],["width",e.width],["height",e.height]];x&&(p={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Wd(x)],["fill","#FFF"]]}]},x=r.add(p),A[wd].push(p),T.conClip="url(#"+x+")",delete T.cache),L&&!te.isE(L)&&g.push(["transform","matrix("+ue.joinArr(te.m2m6(L),",")+")"]);g={type:"img",tagName:"image",props:g};T.children=[g],e.cache=g}}return a}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return P(N(D.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[rd],n=r[id],o=r[xd],a=r[yd],s=r[Md],h=r[Td],l=r[sd],r=r[ad];return i[1]===Nd?t-=i[0]:i[1]===Pd?t-=e*i[0]*.01:i[1]===Fd?t-=i[0]*this.root.computedStyle[Od]:i[1]===Bd?t-=i[0]*this.root.width*.01:i[1]===Yd?t-=i[0]*this.root.height*.01:(i=this.__loadImg).source&&(n[1]===Nd?t-=i.width*n[0]/i.height:n[1]===Pd?t-=i.width*n[0]*e*.01/i.height:n[1]===Fd?t-=i.width*n[0]*this.root.computedStyle[Od]/i.height:n[1]===Bd?t-=i.width*n[0]*this.root.width*.01/i.height:n[1]===Yd?t-=i.width*n[0]*this.root.height*.01/i.height:t-=i.width),o[1]===Nd?t-=o[0]:o[1]===Pd?t-=o[0]*e*.01:o[1]===Fd?t-=o[0]*this.root.computedStyle[Od]:o[1]===Bd?t-=o[0]*this.root.width*.01:o[1]===Yd&&(t-=o[0]*this.root.height*.01),s[1]===Nd?t-=s[0]:s[1]===Pd?t-=s[0]*e*.01:s[1]===Fd?t-=s[0]*this.root.computedStyle[Od]:s[1]===Bd?t-=s[0]*this.root.width*.01:s[1]===Yd&&(t-=s[0]*this.root.height*.01),l[1]===Nd?t-=l[0]:l[1]===Fd?t-=l[0]*this.root.computedStyle[Od]:l[1]===Bd?t-=l[0]*this.root.width*.01:l[1]===Yd&&(t-=l[0]*this.root.height*.01),a[1]===Nd?t-=a[0]:a[1]===Pd?t-=a[0]*e*.01:a[1]===Fd?t-=a[0]*this.root.computedStyle[Od]:a[1]===Bd?t-=a[0]*this.root.width*.01:a[1]===Yd&&(t-=a[0]*this.root.height*.01),h[1]===Nd?t-=h[0]:h[1]===Pd?t-=h[0]*e*.01:h[1]===Fd?t-=h[0]*this.root.computedStyle[Od]:h[1]===Bd?t-=h[0]*this.root.width*.01:h[1]===Yd&&(t-=h[0]*this.root.height*.01),r[1]===Nd?t-=r[0]:r[1]===Fd?t-=r[0]*this.root.computedStyle[Od]:r[1]===Bd?t-=r[0]*this.root.width*.01:r[1]===Yd&&(t-=r[0]*this.root.height*.01),t}},{key:"__calBasis",value:function(t,e){var r=0,i=0,n=0,o=this.currentStyle,a=this.__loadImg,s=e.w,h=e.h,l=o[Rd],c=o[rd],u=o[id],_=o[xd],f=o[md],d=o[yd],p=o[Ed],g=o[Md],v=o[bd],m=o[Td],y=o[Ad],E=o[od],x=o[ad],b=o[hd],e=o[sd],o=t?c:u,c=t?u:c;return-1<[Nd,Pd,Fd,Bd,Yd].indexOf(l[1])?l[1]===Nd?r=n=i=l[0]:l[1]===Pd?r=n=i=.01*l[0]*(t?s:h):l[1]===Fd?r=n=i=l[0]*this.root.computedStyle[Od]:l[1]===Bd?r=n=i=l[0]*this.root.width*.01:l[1]===Yd&&(r=n=i=l[0]*this.root.height*.01):-1<[Nd,Pd,Fd,Bd,Yd].indexOf(o[1])?o[1]===Nd?r=n=i=o[0]:o[1]===Pd?r=n=i=.01*o[0]*(t?s:h):o[1]===Fd?r=n=i=o[0]*this.root.computedStyle[Od]:o[1]===Bd?r=n=i=o[0]*this.root.width*.01:o[1]===Yd&&(r=n=i=o[0]*this.root.height*.01):(a.source||a.error)&&(r=n=i=c[1]!==Dd?(c[1]===Nd?c=c[0]:c[1]===Pd?c=.01*c[0]*(t?h:s):c[1]===Fd?c=c[0]*this.root.computedStyle[Od]:c[1]===Bd?c=c[0]*this.root.width*.01:c[1]===Yd&&(c=c[0]*this.root.height*.01),h=a.width/a.height,t?c*h:c/h):t?a.width:a.height),t?(m=this.__calMp(_,s)+this.__calMp(d,s)+this.__calMp(g,s)+this.__calMp(m,s),r+=m=e[0]+x[0]+m,n+=m,i+=m):(s=this.__calMp(f,s)+this.__calMp(p,s)+this.__calMp(v,s)+this.__calMp(y,s),r+=s=E[0]+b[0]+s,n+=s,i+=s),[r,i,n]}},{key:"__loadAndRefresh",value:function(r,i,n,o,a,s,h,l){var c=this;(r.source||r.error)&&(i.delRefreshTask(c.__task),i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Sd]=c,t[Cd]=ba.REFLOW,t[Id]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,Le.measureImg(r.src,function(t){if(t.url===r.src&&!c.isDestroyed){var e=function(){var t=c.currentStyle,e=t[rd],t=t[id];i.delRefreshTask(c.__task),e[1]!==Dd&&t[1]!==Dd?i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Sd]=c,t[Cd]=ba.REPAINT,t[Id]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){Ud(l)&&l.call(c)}}):i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[Sd]=c,t[Cd]=ba.REFLOW,t[Id]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){Ud(l)&&l.call(c)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(o)return void Le.measureImg(o,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:n,root:i,width:s,height:h});r.error=!0}"none"!==a[nd]&&e()}},{ctx:n,root:i,width:s,height:h})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,n=this.root;t===i.src||!t&&i.error?Ud(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,n,n.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,n.delRefreshTask(r.__task),n.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[Sd]=r,t[Cd]=ba.REFLOW,t[Id]=r.__config,n.__addUpdate(r,r.__config,n,r.__config,t))},__after:function(t){Ud(e)&&e(t)}}))}},{key:"appendChild",value:function(){Le.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}}]),D}();o(Xd,"showError",!0);var Vd=function(){function e(t){_(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return f(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}(),Zt=m.STYLE_KEY,Kd=Zt.DISPLAY,zd=Zt.MARGIN_TOP,jd=Zt.MARGIN_RIGHT,$d=Zt.MARGIN_BOTTOM,Zd=Zt.MARGIN_LEFT,qd=Zt.PADDING_TOP,Jd=Zt.PADDING_RIGHT,Qd=Zt.PADDING_BOTTOM,t1=Zt.PADDING_LEFT,e1=Zt.WIDTH,r1=Zt.HEIGHT,i1=Zt.BORDER_TOP_WIDTH,n1=Zt.BORDER_RIGHT_WIDTH,o1=Zt.BORDER_BOTTOM_WIDTH,a1=Zt.BORDER_LEFT_WIDTH,s1=Zt.FILL,h1=Zt.STROKE,l1=Zt.STROKE_MITERLIMIT,c1=Zt.STROKE_WIDTH,u1=Zt.STROKE_LINECAP,_1=Zt.STROKE_LINEJOIN,f1=Zt.STROKE_DASHARRAY,d1=Zt.STROKE_DASHARRAY_STR,p1=Zt.FILL_RULE,g1=Zt.VISIBILITY,v1=Zt.FONT_SIZE,m1=Zt.FLEX_BASIS,ft=m.NODE_KEY,y1=ft.NODE_CACHE_PROPS,E1=ft.NODE_CURRENT_PROPS,x1=ft.NODE_CURRENT_STYLE,b1=ft.NODE_STYLE,T1=ft.NODE_DEFS_CACHE,A1=S.PX,M1=S.PERCENT,O1=S.REM,R1=S.VW,S1=S.VH,C1=ue.int2rgba,I1=ue.isNil,k1=ue.joinArr,w1=Tt.canvasPolygon,L1=Tt.svgPolygon,D1={},N1=function(){t(w,Mf);var r=e(w);function w(t,e){_(this,w),(t=r.call(this,t,e)).__isMulti=!!t.props.multi,t.__style=vn.normalize(t.style,lr.DOM_ENTRY_SET.concat(lr.GEOM_ENTRY_SET)),t.__currentStyle=ue.extend({},t.__style),t.__currentProps=ue.clone(t.props);e=t.__config;return e[y1]=t.__cacheProps={},e[E1]=t.__currentProps,e[x1]=t.__currentStyle,e[b1]=t.__style,t}return f(w,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[e1],n=r[Zd],o=r[jd],a=r[t1],s=r[Jd],h=r[a1],r=r[n1];return i[1]===A1?t-=i[0]:i[1]===M1?t-=e*i[0]*.01:i[1]===O1?t-=i[0]*this.root.computedStyle[v1]:i[1]===R1?t-=i[0]*this.root.width*.01:i[1]===S1&&(t-=i[0]*this.root.height*.01),n[1]===A1?t-=n[0]:n[1]===M1?t-=n[0]*e*.01:n[1]===O1?t-=n[0]*this.root.computedStyle[v1]:n[1]===R1?t-=n[0]*this.root.width*.01:n[1]===S1&&(t-=n[0]*this.root.height*.01),a[1]===A1?t-=a[0]:a[1]===M1?t-=a[0]*e*.01:a[1]===O1?t-=a[0]*this.root.computedStyle[v1]:a[1]===R1?t-=a[0]*this.root.width*.01:a[1]===S1&&(t-=a[0]*this.root.height*.01),h[1]===A1?t-=h[0]:h[1]===O1?t-=h[0]*this.root.computedStyle[v1]:h[1]===R1?t-=h[0]*this.root.width*.01:h[1]===S1&&(t-=h[0]*this.root.height*.01),o[1]===A1?t-=o[0]:o[1]===M1?t-=o[0]*e*.01:o[1]===O1?t-=o[0]*this.root.computedStyle[v1]:o[1]===R1?t-=o[0]*this.root.width*.01:o[1]===S1&&(t-=o[0]*this.root.height*.01),s[1]===A1?t-=s[0]:s[1]===M1?t-=s[0]*e*.01:s[1]===O1?t-=s[0]*this.root.computedStyle[v1]:s[1]===R1?t-=s[0]*this.root.width*.01:s[1]===S1&&(t-=s[0]*this.root.height*.01),r[1]===A1?t-=r[0]:r[1]===O1?t-=r[0]*this.root.computedStyle[v1]:r[1]===R1?t-=r[0]*this.root.width*.01:r[1]===S1&&(t-=r[0]*this.root.height*.01),t}},{key:"__calMinMax",value:function(t,e){vn.computeReflow(this,this.isShadowRoot);var r=0,i=0,n=this.currentStyle,o=n[e1],a=n[r1],s=n[Kd],a=t?o:a;return a[1]===A1?r=i=a[0]:a[1]===O1?r=i=a[0]*this.root.computedStyle[v1]:a[1]===R1?r=i=a[0]*this.root.width*.01:a[1]===S1&&(r=i=a[0]*this.root.height*.01),[s,this.__addMp(t,e.w,n,[r,i])]}},{key:"__calBasis",value:function(t,e){var r=0,i=0,n=0,o=this.currentStyle,a=e.w,s=e.h,h=o[m1],l=o[e1],c=o[r1],u=o[Zd],_=o[zd],f=o[jd],d=o[$d],p=o[t1],g=o[qd],v=o[Jd],m=o[Qd],y=o[i1],E=o[n1],e=o[o1],o=o[a1],c=t?l:c;return-1<[A1,M1,O1,R1,S1].indexOf(h[1])?h[1]===A1?r=n=i=h[0]:h[1]===M1?r=n=i=.01*h[0]*(t?a:s):h[1]===O1?r=n=i=h[0]*this.root.computedStyle[v1]:h[1]===R1?r=n=i=h[0]*this.root.width*.01:h[1]===S1&&(r=n=i=h[0]*this.root.height*.01):-1<[A1,M1,O1,R1,S1].indexOf(c[1])&&(c[1]===A1?r=n=i=c[0]:c[1]===M1?r=n=i=.01*c[0]*(t?a:s):c[1]===O1?r=n=i=c[0]*this.root.computedStyle[v1]:c[1]===R1?r=n=i=c[0]*this.root.width*.01:c[1]===S1&&(r=n=i=c[0]*this.root.height*.01)),t?(v=this.__calMp(u,a)+this.__calMp(f,a)+this.__calMp(p,a)+this.__calMp(v,a),r+=v=o[0]+E[0]+v,n+=v,i+=v):(a=this.__calMp(_,a)+this.__calMp(d,a)+this.__calMp(g,a)+this.__calMp(m,a),r+=a=y[0]+e[0]+a,n+=a,i+=a),[r,i,n]}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),i=r.fixedWidth,n=r.fixedHeight,o=r.w,r=r.h;this.__height=n?r:0,e?this.__width=i?o:0:(this.__width=o,this.__ioSize(o,this.height),this.__marginAuto(this.currentStyle,t),this.__config[y1]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,i=e.fixedHeight,n=e.x,o=e.y,a=e.w,e=e.h,n=this.__width=r?a:n-t.x,t=this.__height=i?e:o-t.y;this.__ioSize(n,t),this.__config[y1]=this.__cacheProps={}}},{key:"__calCache",value:function(i,n,t,o,a,s,e,r,h,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R,S,C){var I,k=this,S=P(N(w.prototype),"__calCache",this).call(this,i,n,t,o,a,s,e,r,h,l,c,u,_,f,d,p,g,v,m,y,E,x,b,T,A,M,O,R,S,C);return I1(o[c1])&&(o[c1]=!0,C=a[c1]||[],I=this.width,s[c1]=C.map(function(t){return t[1]===A1?t[0]:t[1]===M1?t[0]*I*.01:t[1]===O1?t[0]*k.root.computedStyle[v1]:t[1]===R1?t[0]*k.root.width*.01:t[1]===S1?t[0]*k.root.height*.01:0})),I1(o[f1])&&(o[f1]=!0,s[f1]=a[f1]||[],o[d1]=s[f1].map(function(t){return k1(t,",")})),[u1,_1,l1,p1].forEach(function(t){s[t]=a[t]}),[h1,s1].forEach(function(t){var e,r;I1(o[t])&&(e=a[t],s[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(C1(t)):r.push("none"):r.push(k.__gradient(i,n,E,O,x,R,t))}),o[t]=r)}),S}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[g1]}},{key:"__preSet",value:function(t){var e=this.width,r=this.height,i=this.__cacheStyle,n=this.computedStyle,o=t.sx3+.5*e,a=t.sy3+.5*r,s=i[s1],h=i[h1],l=i[d1],e=n[c1],t=n[u1],r=n[_1],i=n[l1];return{cx:o,cy:a,stroke:h,strokeWidth:e,strokeDasharray:n[f1],strokeDasharrayStr:l,strokeLinecap:t,strokeLinejoin:r,strokeMiterlimit:i,fill:s,fillRule:n[p1]}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,n=r.strokeWidth,o=r.strokeDasharray,a=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,r=r.fill;t!==rt.CANVAS&&t!==rt.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==n&&e.lineWidth!==n&&(e.lineWidth=n),void 0!==a&&e.lineCap!==a&&(e.lineCap=a),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==h&&e.miterLimit!==h&&(e.miterLimit=h),ue.isFunction(e.getLineDash)?o&&!ue.equalArr(e.getLineDash(),o)&&e.setLineDash(o):o&&e.setLineDash(o))}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(w.prototype),"render",this).call(this,t,e,r,i,n,o);if(t===rt.SVG&&(this.virtualDom.type="geom"),o.break)return o;t=this.__preSet(o);return Object.assign(o,t)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,n=r.fillRule,o=r.stroke,a=r.strokeWidth,s=r.strokeDasharray,h=r.strokeDasharrayStr,l=r.strokeLinecap,c=r.strokeLinejoin,u=r.strokeMiterlimit,_=r.dx,f=r.dy,d=this.__cacheProps.list,p=this.isMulti,g=this.bbox;if(i.length<=1&&o.length<=1){r={fill:i[0],fillRule:n[0],stroke:o[0],strokeWidth:a[0],strokeDasharray:s[0],strokeDasharrayStr:h[0],strokeLinecap:l[0],strokeLinejoin:c[0],strokeMiterlimit:u[0],dx:_,dy:f,bbox:g};this.__renderOnePolygon(t,e,p,d,r)}else{for(var v=0,m=i.length;v<m;v++){var y=i[v];y&&(y={fill:y,fillRule:n[v],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,y))}for(var E=0,x=o.length;E<x;E++){var b=o[E];b&&(b={stroke:b,strokeWidth:a[E],strokeDasharray:s[E],strokeDasharrayStr:h[E],strokeLinecap:l[E],strokeLinejoin:c[E],strokeMiterlimit:u[E],dx:_,dy:f,bbox:g},this.__renderOnePolygon(t,e,p,d,b))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,n){var o=n.fill,a=n.stroke,s=n.strokeWidth,h=o&&"conic"===o.k,l=a&&"conic"===a.k,c=o&&"radial"===o.k&&Array.isArray(o.v),u=s&&0<s&&a&&"radial"===a.k&&Array.isArray(a.v);h||l?(h?this.__conicGradient(t,e,i,r,n):"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&l?Le.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,n,"fill"):"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&u?(Le.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke.v=n.stroke.v[0],this.__drawPolygon(t,e,r,i,n,!1,!0)):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!1,!0)):this.__drawPolygon(t,e,r,i,n,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,n,o,a){var s,h=n.fill,l=n.stroke,c=n.strokeWidth,u=n.fillRule,_=n.strokeDasharrayStr,f=n.strokeLinecap,d=n.strokeLinejoin,p=n.strokeMiterlimit,g=n.dx,v=n.dy;t===rt.CANVAS||t===rt.WEBGL?(this.__preSetCanvas(t,e,n),e.beginPath(),r?i.forEach(function(t){return w1(e,t,g,v)}):w1(e,i,g,v),o&&h&&"none"!==h&&e.fill(u),a&&l&&"none"!==l&&c&&0<c&&e.stroke(),e.closePath()):t===rt.SVG&&(s="",r?i.forEach(function(t){return s+=L1(t)}):s=L1(i),i=[["d",s]],(h&&"none"!==h||l&&"none"!==l)&&(o&&h&&"none"!==h?(i.push(["fill",h.v||h]),u&&"nonzero"!==u&&i.push(["fill-rule",u])):i.push(["fill","none"]),a&&l&&"none"!==l&&c&&0<c?(i.push(["stroke",l.v||l]),i.push(["stroke-width",c]),this.__propsStrokeStyle(i,_,f,d,p)):i.push(["stroke-width",0]),this.addGeom("path",i)))}},{key:"__inversePtList",value:function(t,e,o){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=te.calPoint([t[r],t[r+1]],o);e.push(n[0]),e.push(n[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=te.calPoint([t[r],t[r+1]],o);e.push(n[0]),e.push(n[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,n,o){var a=n.strokeWidth,s=n.strokeDasharrayStr,h=n.strokeLinecap,l=n.strokeLinejoin,c=n.strokeMiterlimit,u=n.dx,_=n.dy,f=Qt(n[o].v,4),d=f[0],p=f[1],n=f[2],f=f[3];p=oa.calMatrixByOrigin(p,[n,f]);var g,f=te.inverse(p);r=this.__inversePtList(r,i,f),t===rt.CANVAS||t===rt.WEBGL?(p&&(e.save(),f=this.matrixEvent,p=te.multiply(f,p),e.setTransform(p[0],p[1],p[4],p[5],p[12],p[13])),e.beginPath(),e[o+"Style"]!==d&&(e[o+"Style"]=d),i?r.forEach(function(t){return Tt.canvasPolygon(e,t,u,_)}):w1(e,r,u,_),e[o](),e.closePath(),p&&e.restore()):t===rt.SVG&&(g="",i?r.forEach(function(t){return g+=L1(t)}):g=L1(r),r=[["d",g]],"fill"===o?(r.push(["fill",d]),r.push(["strokeWidth",0])):"stroke"===o&&(r.push(["fill","none"]),r.push(["stroke",d]),r.push(["stroke-width",a]),this.__propsStrokeStyle(r,s,h,l,c)),r.push(["transform","matrix(".concat(k1(te.m2m6(p),","),")")]),this.addGeom("path",r))}},{key:"__conicGradient",value:function(t,r,e,i,n){var o,a,s,h,l=this,c=n.fill,u=n.bbox,_=n.dx,f=void 0===_?0:_,_=n.dy,d=void 0===_?0:_,p=c.v;t===rt.CANVAS||t===rt.WEBGL?(n=Qt(u,4),o=n[0],a=n[1],_=n[2],u=n[3],u=(s=Le.getCacheCanvas(n=_-o,_=u-a,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,n,_),it.getConicGradientImage(.5*n,.5*_,n,_,c.v.stop,u.data),s.ctx.putImageData(u,0,0),i?e.forEach(function(t){r.save(),r.beginPath(),w1(r,t,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,o+f,a+d),r.restore()}):(r.save(),r.beginPath(),w1(r,e,f,d),r.clip(),r.closePath(),r.drawImage(s.canvas,o+f,a+d),r.restore()),s.ctx.clearRect(0,0,n,_)):t===rt.SVG&&(i?e.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",L1(t)]]}]},e=r.add(t);l.__config[T1].push(t),p.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",L1(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(e={tagName:"clipPath",children:[{tagName:"path",props:[["d",L1(e)]]}]},h=r.add(e),this.__config[T1].push(e),p.forEach(function(t){l.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",L1(t[0])],["fill",t[1]],["clip-path","url(#"+h+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,n){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),n&&4!==n&&t.push(["stroke-miterlimit",n])}},{key:"__releaseWhenEmpty",value:function(){}},{key:"__offsetX",value:function(t,e,r){P(N(w.prototype),"__offsetX",this).call(this,t,e,r),this.__config[y1]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){P(N(w.prototype),"__offsetY",this).call(this,t,e,r),this.__config[y1]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){P(N(w.prototype),"__resizeX",this).call(this,t,e),this.__config[y1]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){P(N(w.prototype),"__resizeY",this).call(this,t,e),this.__config[y1]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=ue.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return I1(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return D1}},{key:"getRegister",value:function(t){if(!t||!ue.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!D1.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return D1[t]}},{key:"register",value:function(t,e){if(!(t&&ue.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof w))throw new Error("Invalid param");if(w.hasRegister(t))throw new Error("Geom has already register: ".concat(t));D1[t]=e}},{key:"hasRegister",value:function(t){return t&&D1.hasOwnProperty(t)}},{key:"delRegister",value:function(t){w.hasRegister(t)&&delete D1[t]}}]),w}(),sr=m.NODE_KEY,P1=sr.NODE_STYLE,F1=sr.NODE_CURRENT_STYLE,B1=sr.NODE_COMPUTED_STYLE,Y1=sr.NODE_DOM_PARENT,H1=sr.NODE_MATRIX,G1=sr.NODE_MATRIX_EVENT,W1=sr.NODE_STRUCT,U1=Vt.TYPE_VD,X1=Vt.TYPE_GM,V1=Vt.TYPE_CP,K1=[],z1=[],j1={};function $1(t){t instanceof ed?t.children.forEach(function(t){t instanceof ed?$1(t):t instanceof Ss&&t.__hasUpdate&&(t.__hasUpdate=!1,Z1(t,t.props))}):t instanceof Ss&&t.__hasUpdate&&(t.__hasUpdate=!1,Z1(t,t.props))}function Z1(t,e,r){t.__nextState||r?!ue.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.state=r,t.__nextState=null;var i=t.shadow,n=t.shadowRoot,e=t.__cd,r=is(t.render());(function(t,e,r){var n=tp(e,{},t),o=tp(r,{}),a=[],s=[];Object.keys(n).forEach(function(t){var e=n[t];o[t]||(e.json.key=j1)}),Object.keys(o).forEach(function(t){var e,r=n[t],i=o[t];r?(e=r.json,t=i.json,r=r.vd,e.$$type===V1&&t.$$type===V1?e.klass===t.klass&&(Q1(e,t,r),e.key=t.key=j1,s.push(r)):e.$$type===t.$$type&&e.tagName===t.tagName&&(t.$$type===X1&&e.props.multi!==t.props.multi||(t.__inheritAnimate=r),e.key=t.key=j1,t.$$type===U1&&a.push({vd:r,oj:e,nj:t}))):i.json.key=j1}),a.forEach(function(t){J1(t.vd,t.oj,t.nj)}),q1(t,e,r),s.forEach(function(t){ep(t)})})(i,e,r),t.__init(r);var o=t.shadowRoot;{var a;o instanceof Mf?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){o[t]=n[t]}),o.__computedStyle=o.__config[B1]=n.computedStyle):(a=t.domParent,[P1,F1,B1,H1,G1].forEach(function(t){o.__config[t]=a.__config[t]}))}["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){o[t]=n[t]}),o.__config[Y1]=n.domParent,o.__config[W1]=n.__config[W1],K1.push(t),ue.isObject(r)&&r.__placeholder||z1.push(i);r&&r.__placeholder&&delete r.__placeholder;r&&r.__inheritAnimate&&delete r.__inheritAnimate;r&&r.__animateRecords&&delete r.__animateRecords;var s=t.host;for(;s&&s.shadow===t;)(s.__shadowRoot=o).__hostRoot=s,s=(t=s).host}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,$1(t.shadow)):$1(t.shadow)}function q1(t,e,r){ue.isObject(r)&&(r.$$type===V1?r.key!==j1&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(Q1(e,r,t),ep(t)):r.$$type===X1&&e&&e.$$type===X1?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===U1&&e&&e.$$type===U1&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),J1(t,e,r)))}function J1(t,e,r){for(var i=e.children,n=r.children,o=i.length,a=n.length,s=t.children,h=0,l=0,c=0,u=Math.min(o,a);h<u;h++){var _=i[h+l],f=n[h+c];_.key===j1&&f.key===j1||(_.key===j1?(l++,h--,o--,u=Math.min(o,a)):f.key===j1?(c++,h--,a--,u=Math.min(o,a)):q1(s[h+l],_,f))}}function Q1(i,n,o){var a=(n.__placeholder=o).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(n.props).forEach(function(t){var e,r=n.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.listener[t]=r)):(t=t.slice(2).toLowerCase(),a.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),o.off(t,s[t]),o.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),o.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(n.props[t]=e,t=t.slice(2).toLowerCase(),delete a.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(n.props[t]=e,t=t.slice(2).toLowerCase(),o.off(t,e))}),Z1(o,n.props,!ue.equal(i.props,n.props))}function tp(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return tp(t,r,i&&i[e])}):ue.isObject(t)&&(t.$$type!==U1&&t.$$type!==X1&&t.$$type!==V1||(t.$$type===U1&&tp(t.children,r,i&&i.children),e=t.props.key,ue.isNil(e)||""===e||(r.hasOwnProperty(e)&&Le.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function ep(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var rp,ip={updateList:K1,check:$1,did:function(){K1.forEach(function(t){ue.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),K1.splice(0),z1.forEach(function(t){t.__destroy()}),z1=[]}},np=ue.joinVd,op=ue.joinDef,ap=ba.contain,sp=ba.NONE,hp=ba.TRANSFORM_ALL,lp=ba.OPACITY,cp=ba.FILTER,up=ba.MIX_BLEND_MODE;function _p(t,e,r){var i=t.childNodes;!function(t,e,r){for(var i=e.length,n=r.length,o=0,a=t.childNodes;o<Math.min(i,n);o++)!function(e,t,r){if(t.tagName!==r.tagName)Ap(e,"beforebegin",op(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},n=0,o=(t.props||[]).length;n<o;n++){var a=Qt(t.props[n],2),s=a[0],a=a[1];i[s]=a}for(var h=0,l=(r.props||[]).length;h<l;h++){var c=Qt(r.props[h],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var _=e.childNodes,f=t.children.length,d=r.children.length,p=0;p<Math.min(f,d);p++)yp(e,p,t.children[p],r.children[p]);if(p<f)for(var g=f-1;p<=g;g--)Tp(e,_,g);else if(p<d)for(;p<d;p++)bp(e,_,p,np(r.children[p]))}}(a[o],e[o],r[o]);if(o<i)for(var s=i-1;o<=s;s--)Tp(t,a,s);else if(o<n)for(;o<n;o++)bp(t,a,o,op(r[o]))}(i[0],e.defs,r.defs),r.hasOwnProperty("lv")||mp(i[1],e.bb,r.bb),gp(t,e,r,!0)}function fp(t,e,r){"dom"===e.type?"dom"===r.type?gp(t,e,r):"geom"===r.type?vp(t,e,r):xp(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(!r.cache){for(var i=e.children.length,n=r.children.length,o=0;o<Math.min(i,n);o++)yp(t,o,e.children[o],r.children[o],!0);var a=t.childNodes;if(o<i)for(var s=i-1;o<=s;s--)Tp(t,a,s);else if(o<n)for(;o<n;o++)bp(t,a,o,np(r.children[o]))}}(t,e,r):xp(t,r):"geom"===e.type?"dom"===r.type?vp(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)pp(t,0,r,r.lv);else if(r.hasOwnProperty("lv"))pp(t,0,r,r.lv);else{dp(t,e,r),mp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,o=0,a=t.lastChild,s=a.childNodes;o<Math.min(i,n);o++)yp(a,o,e.children[o],r.children[o]);if(o<i)for(var h=i-1;o<=h;h--)Tp(a,s,h);else if(o<n)for(;o<n;o++)bp(a,s,o,np(r.children[o]))}}(t,e,r):xp(t,r):"img"===e.type&&("img"===r.type?Ep(t,e,r):xp(t,r))}function dp(t,e,r){var i=r.transform,n=r.opacity,o=r.visibility,a=r.mask,s=r.overflow,h=r.filter,l=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==n&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.visibility!==o&&t.setAttribute("visibility",o),e.mask!==a&&(a?t.setAttribute("mask",a):t.removeAttribute("mask")),e.filter===h&&e.mixBlendMode===l||((l=(h?"filter:".concat(h,";"):"")+(l?"mix-blend-mode:".concat(l,";"):""))?t.setAttribute("style",l):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function pp(t,e,r,i){var n=r.transform,o=r.opacity,a=r.mask,s=r.filter,r=r.mixBlendMode;a?t.setAttribute("mask",a):t.removeAttribute("mask"),i!==sp&&(ap(i,hp)&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),ap(i,lp)&&(1!==o&&void 0!==o?t.setAttribute("opacity",o):t.removeAttribute("opacity")),(ap(i,cp)||ap(i,up))&&((r=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",r):t.removeAttribute("style")))}function gp(t,e,r,i){if(r.cache)pp(t,0,r,r.lv);else{r.hasOwnProperty("lv")?pp(t,0,r,r.lv):(dp(t,e,r),i||mp(t.firstChild,e.bb,r.bb));for(var n=e.children.length,o=r.children.length,a=0,s=t.lastChild,h=s.childNodes;a<Math.min(n,o);a++)fp(h[a],e.children[a],r.children[a]);if(a<n)for(var l=n-1;a<=l;l--)Tp(s,h,l);else if(a<o)for(;a<o;a++)bp(s,h,a,np(r.children[a]))}}function vp(t,e,r){dp(t,e,r),mp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,o=0,a=t.lastChild,s=a.childNodes;o<Math.min(i,n);o++)xp(s[o],r.children[o]);if(o<i)for(var h=i-1;o<=h;h--)Tp(a,s,h);else if(o<n)for(;o<n;o++)bp(a,s,o,np(r.children[o]))}function mp(t,e,r){for(var i=e.length,n=r.length,o=0;o<Math.min(i,n);o++)yp(t,o,e[o],r[o]);var a=t.childNodes;if(o<i)for(var s=i-1;o<=s;s--)Tp(t,a,s);else if(o<n)for(;o<n;o++)bp(t,a,o,np(r[o]))}function yp(t,e,r,i,n){t=t.childNodes;r.tagName!==i.tagName?xp(t[e],i):(Ep(t[e],r,i),n&&r.content!==i.content&&(t[e].innerHTML=i.content))}function Ep(e,t,r){if(!r.cache){for(var i={},n=0,o=(t.props||[]).length;n<o;n++){var a=Qt(t.props[n],2),s=a[0],a=a[1];i[s]=a}for(var h=0,l=(r.props||[]).length;h<l;h++){var c=Qt(r.props[h],2),u=c[0],c=c[1];i.hasOwnProperty(u)?(i[u]!==c&&e.setAttribute(u,c),delete i[u]):e.setAttribute(u,c)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function xp(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=np(t)})):r=np(e),Ap(t,"beforebegin",r),t.parentNode.removeChild(t)}function bp(t,e,r,i){r>=e.length?Ap(t,"beforeend",i):Ap(e[r],"beforebegin",i)}function Tp(t,e,r){e[r]&&t.removeChild(e[r])}function Ap(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(rp=rp||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(rp.childNodes[0],t)}}var Mp=ue.isFunction,Op=function(){function t(){_(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return f(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var t,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;e.length&&e.splice(0).forEach(function(t){var r=t.target,e=t.animate;r.isDestroyed||(Array.isArray(e)?e.forEach(function(t){var e=t.value,t=t.options;t.autoPlay=!1;t=r.animate(e,t);i.add(t,n)}):(t=e.value,(e=e.options).autoPlay=!1,e=r.animate(t,e),i.add(e,n)))}),e===this.__records2&&(t=this.__onList,(e=this.list2).length&&t.length&&e.forEach(function(e){t.forEach(function(t){e.off(t[0],t[1]),e.on(t[0],t[1])})}))}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,Mp(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,Mp(e)&&e(t))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,Mp(e)&&e(t))}])}},{key:"finish",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,Mp(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[];var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Mp(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[];var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Mp(r)&&r(t))}])}},{key:"on",value:function(t,e){if(Mp(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(r,i){var n=this;this.list.forEach(function(e){function t(){var t=e.timestamp;t!==n.__lastTime[r]&&(n.__lastTime[r]=t,i())}t.__karasEventCb=i,e.on(r,t)})}},{key:"off",value:function(e,r){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.off(e[t],r);else this.list.forEach(function(t){t.off(e,r)})}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),Rp=Tt.canvasPolygon;var qt=0,fr=1,A=2,Jt=3,Zt=4,ft=function(_,t,f,d){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,n,o,a,s,h,l=Qt(t,4),c=l[2],u=l[3];0===c?(e=u.matrix,a=u.target,o=u.ctx,r=u.x,i=u.y,t=u.offsetWidth,n=u.offsetHeight,l=u.list,_.globalCompositeOperation="destination-in",_.globalAlpha=1,_.setTransform(e[0],e[1],e[4],e[5],e[12],e[13]),_.fillStyle="#FFF",_.beginPath(),l?Rp(_,l):_.rect(r,i,t,n),_.fill(),_.closePath(),_.globalCompositeOperation="source-over",a.draw(),(_=o).setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(a.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,f,d),a.draw(),Le.releaseCacheCanvas(a.canvas)):1===c?(s=u.target,n=u.ctx,o=u.filter,_.filter&&((a=Le.getCacheCanvas(f,d,null,"filter")).ctx.filter=Tt.canvasFilter(o),a.ctx.drawImage(s.canvas,0,0,f,d,0,0,f,d),a.ctx.filter="none",a.draw(),s.ctx.globalAlpha=1,s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.ctx.drawImage(a.canvas,0,0,f,d,0,0,f,d),s.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,f,d),a.draw(),Le.releaseCacheCanvas(a.canvas)),(_=n).setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.globalAlpha=1,s.ctx.clearRect(0,0,f,d),s.draw(),Le.releaseCacheCanvas(s.canvas)):2===c?(s=u.mask,u.isClip?(u.target.draw(),(_=s.ctx).globalCompositeOperation="source-out",_.globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(u.target.canvas,0,0,f,d,0,0,f,d),s.draw(),_.globalCompositeOperation="source-over",u.target.ctx.setTransform(1,0,0,1,0,0),u.target.ctx.clearRect(0,0,f,d),u.target.draw(),Le.releaseCacheCanvas(u.target.canvas),(_=u.ctx).globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.draw(),Le.releaseCacheCanvas(s.canvas)):(s.draw(),h=u.target,(_=h.ctx).globalCompositeOperation="destination-in",_.globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(s.canvas,0,0,f,d,0,0,f,d),_.globalCompositeOperation="source-over",h.draw(),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,f,d),s.draw(),Le.releaseCacheCanvas(s.canvas),(_=u.ctx).globalAlpha=1,_.setTransform(1,0,0,1,0,0),_.drawImage(h.canvas,0,0,f,d,0,0,f,d),_.draw&&_.draw(!0),h.ctx.setTransform(1,0,0,1,0,0),h.ctx.clearRect(0,0,f,d),h.draw(),Le.releaseCacheCanvas(h.canvas))):3===c?(h=u.target,(_=u.ctx).globalCompositeOperation=u.mixBlendMode,h.draw(),_.setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.drawImage(h.canvas,0,0,f,d,0,0,f,d),_.globalCompositeOperation="source-over",_.draw&&_.draw(!0),h.ctx.globalAlpha=1,h.ctx.setTransform(1,0,0,1,0,0),h.ctx.clearRect(0,0,f,d),h.draw(),Le.releaseCacheCanvas(h.canvas)):4===c&&(_=u.ctx)}),_},Sp=function t(e,r,i){_(this,t),this.uuid=Ln.genUuid(),this.time=Le.now(),this.texture=e,this.width=r,this.height=i},Cp=function(){function s(t,e,r,i,n,o,a){_(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=n,this.height=o,this.bbox=a,this.available=!0,this.__page=new Sp(e,n,o),this.dx=-a[0],this.dy=-a[1],this.dbx=r-a[0],this.dby=i-a[1]}return f(s,[{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),Ip="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",kp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",wp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Lp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Dp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Np="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Pp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Fp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Bp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Yp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Hp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Gp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Wp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Up="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Xp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Vp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Kp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",zp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",jp=_a.NA,$p=_a.LOCAL,Zp=_a.CHILD,qp=_a.SELF,Jp=_a.getCache,Qp=qt,tg=fr,eg=A,rg=Jt,ig=Zt,ng=ft,sr=m.STYLE_KEY,og=sr.DISPLAY,ag=sr.OPACITY,sg=sr.VISIBILITY,hg=sr.FILTER,lg=sr.OVERFLOW,cg=sr.MIX_BLEND_MODE,ug=sr.FILL,_g=sr.TRANSFORM,fg=sr.TRANSFORM_ORIGIN,dg=sr.PERSPECTIVE,pg=sr.PERSPECTIVE_ORIGIN,gg=sr.PADDING_LEFT,vg=sr.PADDING_RIGHT,mg=sr.PADDING_TOP,yg=sr.PADDING_BOTTOM,Eg=sr.BORDER_TOP_WIDTH,xg=sr.BORDER_RIGHT_WIDTH,bg=sr.BORDER_BOTTOM_WIDTH,Tg=sr.BORDER_LEFT_WIDTH,Ag=sr.MATRIX,qt=m.NODE_KEY,Mg=qt.NODE_CACHE,Og=qt.NODE_CACHE_TOTAL,Rg=qt.NODE_CACHE_OVERFLOW,Sg=qt.NODE_CACHE_MASK,Cg=qt.NODE_CACHE_FILTER,Ig=qt.NODE_MATRIX,kg=qt.NODE_MATRIX_EVENT,wg=qt.NODE_OPACITY,Lg=qt.NODE_COMPUTED_STYLE,Dg=qt.NODE_CURRENT_STYLE,Ng=qt.NODE_LIMIT_CACHE,Pg=qt.NODE_REFRESH_LV,Fg=qt.NODE_CACHE_STYLE,Bg=qt.NODE_DEFS_CACHE,Yg=qt.NODE_IS_MASK,Hg=qt.NODE_DOM_PARENT,Gg=qt.NODE_PERSPECTIVE_MATRIX,Wg=qt.NODE_VIRTUAL_DOM,Ug=qt.NODE_CACHE_AS_BITMAP,Xg=qt.NODE_STRUCT,fr=m.STRUCT_KEY,Vg=fr.STRUCT_NODE,Kg=fr.STRUCT_INDEX,zg=fr.STRUCT_TOTAL,jg=fr.STRUCT_HAS_MASK,$g=fr.STRUCT_LV,Zg=ba.NONE,qg=ba.TRANSFORM_ALL,Jg=ba.OPACITY,Qg=ba.FILTER,tv=ba.REPAINT,ev=ba.contain,rv=ba.MIX_BLEND_MODE,iv=ba.PERSPECTIVE,nv=te.isE,ov=te.inverse,av=te.multiply,sv=$t,hv=Y,lv=ue.assignMatrix,cv=ue.transformBbox;function uv(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function _v(W,t,e,r,i,n,U,o,X,V){var a=e[Og],s=e[Cg],h=e[Sg],l=e[Rg],c=e[Dg],u=e[Lg];if(a&&a.available){var _=e[Pg],f=e[Fg];ev(_,qg)&&(f=t.__calMatrix(_,f,c,u,e),lv(e[Ig],f)),ev(_,Jg)&&(e[wg]=u[ag]=c[ag]),ev(_,Qg)&&t.__calFilter(c,u),ev(_,rv)&&(u[cg]=c[cg])}else{for(var d,p,g=!0,v=t.__sx1,m=t.__sy1,y=[],E=[],x=1,b=i,T=r,A=r+(n||0)+1;T<A;T++){var M,O,R,S,C,I,k,w,L,D,N=U[T],P=N[Vg],F=N[$g],B=N[zg],Y=N[jg];P instanceof Qa||(O=(M=P.__config)[Pg],D=M[Og],R=M[Cg],S=M[Sg],C=M[Rg],I=M[Lg],w=M[Yg],"none"===I[og]||T!==r&&w?T+=(B||0)+fv(U,T+(B||0)+1,Y||0):(T===r||(b<F?(q=k[kg],nv(q)&&(q=null),y.push(q),x=k[wg],E.push(x)):F<b&&(y.splice(-(L=b-F)),q=y[F-1],E.splice(-L),x=E[F-1])),b=F,N=(k=M)[Dg],w=M[Fg],F=L=void 0,O<tv?(ev(O,qg)?(L=P.__calMatrix(O,w,N,I,M),lv(M[Ig],L)):L=M[Ig],ev(O,Jg)&&(I[ag]=N[ag]),F=I[ag],ev(O,Qg)&&(P.__bbox=null,P.__calFilter(N,I)),L=M[Ig],ev(O,rv)&&(I[cg]=N[cg])):(P.__bbox=null,T===r&&P.__calFilter(N,I),L=P.__calMatrix(O,w,N,I,M),lv(M[Ig],L),F=I[ag]=N[ag]),T===r?(F=1,p=L,L=te.identity()):nv(q)||(L=av(q,L)),lv(M[kg],L),M[wg]=x*F,F=void 0,F=(D=Jp([S,R,C,D]))?(T+=(B||0)+fv(U,T+(B||0)+1,Y||0),D.bbox):P.bbox,F=cv(F,L,0,0),T===r?d=F.slice(0):uv(d,F,0,0)))}if(e[Og]=a=_a.getInstance(d,v,m),!a||!a.enabled)return;a.__available=!0;var c=a,H=c.dx,G=c.dy,K=c.dbx,z=c.dby,j=c.x,$=c.y,Z=a.ctx,q=null;b=i;for(var J={},Q={},tt=r,et=r+(n||0)+1;tt<et;tt++){var rt=U[tt],it=rt[Vg],nt=rt[$g],ot=rt[zg],at=rt[jg];if(it instanceof Qa)it.render(W,tv,Z,Zp,H,G),Q.hasOwnProperty(tt)&&(Z=ng(Z,Q[tt],X,V));else{var st=it.__config,ht=st[Pg],lt=st[Og],ct=st[Cg],ut=st[Sg],_t=st[Rg],rt=st[Lg];if(J.hasOwnProperty(tt)){var ft=Qt(J[tt],3),dt=ft[0],pt=ft[1],gt=ft[2],vt=Le.getCacheCanvas(X,V,null,"mask2");gt.mask=vt,gt.isClip=it.isClip;for(var mt=tt+(ot||0)+1;--pt;)mt+=(U[mt][zg]||0)+1;ft=Q[--mt]=Q[mt]||[];ft.push([dt,nt,eg,gt]),ft.push([mt,nt,ig,{ctx:Z,target:vt}]),Z=vt.ctx}tt===r||(b<nt?(nv(q=yt)&&(q=null),y.push(q)):nt<b&&(y.splice(-(b-nt)),q=y[nt-1]));dt=rt[_g],gt=rt[fg],ft=rt[og],vt=void 0;tt===r||nv(q)&&nv(dt)?vt=null:((gt=gt.slice(0))[0]+=K+it.__sx1-v+j,gt[1]+=z+it.__sy1-m+$,vt=oa.calMatrixByOrigin(dt,gt),nv(q)||(vt=av(q,vt))),vt?Z.setTransform(vt[0],vt[1],vt[4],vt[5],vt[12],vt[13]):Z.setTransform(1,0,0,1,0,0),b=nt;var yt=vt,_t=Jp([ut,ct,_t,lt]);tt!==r&&_t?(tt+=(ot||0)+fv(U,tt+(ot||0)+1,at||0),"none"!==ft&&(lt=rt[cg],hv(lt)?Z.globalCompositeOperation=sv(lt):Z.globalCompositeOperation="source-over",Z.globalAlpha=st[wg],_a.drawCache(_t,a),Z.globalCompositeOperation="source-over")):(tv<=ht&&it.__calCache(W,Z,st[Hg],st[Fg],st[Dg],rt,it.clientWidth,it.clientHeight,it.offsetWidth,it.offsetHeight,rt[Eg],rt[xg],rt[bg],rt[Tg],rt[mg],rt[vg],rt[yg],rt[gg],it.__sx1,it.__sx2,it.__sx3,it.__sx4,it.__sx5,it.__sx6,it.__sy1,it.__sy2,it.__sy3,it.__sy4,it.__sy5,it.__sy6),_t=it.render(W,ht,Z,tt===r?$p:Zp,H,G),st[Pg]=tv,it=(rt=_t||{}).offscreenBlend,ht=rt.offscreenMask,st=rt.offscreenFilter,_t=rt.offscreenOverflow,it&&((Q[rt=tt+(ot||0)+fv(U,tt+(ot||0)+1,at||0)]=Q[rt]||[]).push([tt,nt,rg,it]),Z=it.target.ctx),ht&&(J[tt+(ot||0)+1]=[tt,at,ht],Z=ht.target.ctx),st&&((Q[ht=tt+(ot||0)+fv(U,tt+(ot||0)+1,at||0)]=Q[ht]||[]).push([tt,nt,tg,st]),Z=st.target.ctx),_t&&((Q[st=tt+(ot||0)+fv(U,tt+(ot||0)+1,at||0)]=Q[st]||[]).push([tt,nt,Qp,_t]),Z=_t.target.ctx),Q.hasOwnProperty(tt)&&(Z=ng(Z,Q[tt],X,V)),"none"===ft&&(tt+=(ot||0)+fv(U,tt+(ot||0)+1,at||0)))}}lv(e[kg],p),e[Pg]=Zg}a&&a.available&&(i=u[lg],n=u[hg],u=a,"hidden"===i&&(l&&l.available&&!g||(e[Rg]=function(t,e){var r=t.bbox,i=e.bbox;if(!(i[0]>=r[0]&&i[1]>=r[1]&&i[2]<=r[2]&&i[3]<=r[3]))return _a.genOverflow(e,t)}(t,u),g=!0),u=e[Rg]||u),n&&n.length&&(s&&s.available&&!g||(e[Cg]=(s=u,_a.genFilter(s,n)),g=!0),u=e[Cg]||u),!o||h&&h.available&&!g||(e[Sg]=(e=u,u=function(t,e,r){for(var i,n,o={},a={},s=e.dx,h=e.dy,l=e.dbx,c=e.dby,u=e.x,_=e.y,f=e.ctx,d=t.__config[Xg],p=d[Kg],t=d[zg],g=[],v=[],m=1,y=d[$g],E=p,x=p+(t||0)+1;E<x;E++){var b=U[E],T=b[Vg],A=b[$g],M=b[zg],O=b[jg];if(T instanceof Qa)T.render(W,tv,f,Zp,s,h),a.hasOwnProperty(E)&&(f=ng(f,a[E],X,V));else{var R=T.__config,S=R[Pg],C=R[Og],I=R[Cg],k=R[Sg],w=R[Rg],L=R[Lg];if(o.hasOwnProperty(E)){var D=Qt(o[E],3),N=D[0],P=D[1],b=D[2],F=Le.getCacheCanvas(X,V,null,"mask2");b.mask=F,b.isClip=T.isClip;for(var B=E+(M||0)+1;--P;)B+=(U[B][zg]||0)+1;D=a[--B]=a[B]||[];D.push([N,A,eg,b]),D.push([B,A,ig,{ctx:f,target:F}]),f=F.ctx}E===p||(y<A?(nv(i=n)&&(i=null),g.push(i),m=H,v.push(m)):A<y&&(g.splice(-(G=y-A)),i=g[A-1],v.splice(-G),m=v[A-1]));var Y,H,y=A,D=L[og],F=L[_g],G=L[fg],I=Jp([k,I,w,C]);I?(E+=(M||0)+fv(U,E+(M||0)+1,O||0),"none"!==D&&(Y=L[cg],hv(Y)?f.globalCompositeOperation=sv(Y):f.globalCompositeOperation="source-over",f.globalAlpha=R[wg],_a.drawCache(I,e,F,te.identity(),G.slice(0),i,r),f.globalCompositeOperation="source-over")):(w=R[Dg],C=R[Fg],I=Y=void 0,S<tv?(ev(S,qg)?(Y=T.__calMatrix(S,C,w,L,R),lv(R[Ig],Y)):Y=R[Ig],ev(S,Jg)&&(L[ag]=w[ag]),I=L[ag],ev(S,Qg)&&(T.__bbox=null,T.__calFilter(w,L)),Y=R[Ig],ev(S,rv)&&(L[cg]=w[cg])):(T.__bbox=null,E===p&&T.__calFilter(w,L),Y=T.__calMatrix(S,C,w,L,R),lv(R[Ig],Y),I=L[ag]=w[ag]),E===p?(I=1,Y=te.identity()):i&&(Y=av(i,Y)),lv(R[kg],Y),H=R[wg]=m*I,I=void 0,E===p||nv(i)&&nv(F)?I=null:((G=G.slice(0))[0]+=l+T.__sx1-sx1+u,G[1]+=c+T.__sy1-sy1+_,I=oa.calMatrixByOrigin(F,G),nv(i)||(I=av(i,I))),(I=(n=I)&&(ue.equalArr(I,r)?te.identity():(r=te.inverse(r),te.multiply(r,I))))?f.setTransform(I[0],I[1],I[4],I[5],I[12],I[13]):f.setTransform(1,0,0,1,0,0),tv<=S&&T.__calCache(W,f,R[Hg],R[Fg],R[Dg],L,T.clientWidth,T.clientHeight,T.offsetWidth,T.offsetHeight,L[Eg],L[xg],L[bg],L[Tg],L[mg],L[vg],L[yg],L[gg],T.__sx1,T.__sx2,T.__sx3,T.__sx4,T.__sx5,T.__sx6,T.__sy1,T.__sy2,T.__sy3,T.__sy4,T.__sy5,T.__sy6),I=T.render(W,S,f,Zp,s,h),R[Pg]=tv,T=(L=I||{}).offscreenBlend,S=L.offscreenMask,R=L.offscreenFilter,I=L.offscreenOverflow,T&&((a[L=E+(M||0)+fv(U,E+(M||0)+1,O||0)]=a[L]||[]).push([E,A,rg,T]),f=T.target.ctx),S&&(o[E+(M||0)+1]=[E,O,S],f=S.target.ctx),R&&((a[S=E+(M||0)+fv(U,E+(M||0)+1,O||0)]=a[S]||[]).push([E,A,tg,R]),f=R.target.ctx),I&&((a[R=E+(M||0)+fv(U,E+(M||0)+1,O||0)]=a[R]||[]).push([E,A,Qp,I]),f=I.target.ctx),a.hasOwnProperty(E)&&(f=ng(f,a[E],X,V)),"none"===D&&(E+=(M||0)+fv(U,E+(M||0)+1,O||0)))}}},_a.genMask(e,t,u))))}function fv(t,e,r){for(var i=0;r--;){var n=t[e][zg];i+=n||0,e+=n||0,i++,e++}return i}function dv(t,e,r,i){var n=e.lockOneChannel(),o=xe.createTexture(t,null,n,r,i),a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0);e=t.checkFramebufferStatus(t.FRAMEBUFFER);return e!==t.FRAMEBUFFER_COMPLETE&&Le.error("Framebuffer object is incomplete: "+e.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[n,a,o]}function pv(t,e,r,i,n,o,a,s,h,l,c,u){var _,f={},d={},p=function(t,e,r,i,n,o){var a,s=t.__sx1,h=t.__sy1,l=(u=t.__config)[Mg],c=(_=u[Lg])[hg],u=_[dg],_=_[pg],f=l&&l.available?l.bbox.slice(0):t.bbox;u&&(a=oa.calPerspectiveMatrix(u,_));var d=[r],p=0;c.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];"blur"===t&&(p=ha.outerSize(e))}),n[r]=1;for(var g={};d.length;)for(var v=d.splice(0),m=0,y=v.length;m<y;m++)for(var E=v[m],x=E+1,b=E+(e[E][zg]||0)+1;x<b;x++){var T=e[x],A=T[Vg],M=T[zg];if(!A.isMask){var O=A.__sx1,R=A.__sy1,S=A.__config,C=S[Ng],I=S[Mg],k=S[Og],w=S[Cg],L=S[Sg],D=S[Rg],N=S[Lg],P=N[og],F=N[sg],T=N[_g],S=N[fg],N=N[ag];if(C&&!o)return;"none"!==P?"hidden"!==F&&(i[x]=E,n[x]=n[E]*N,A instanceof Qa||(C=void 0,N=void(F=P=0),(k=Jp([L,w,D,k]))?(C=k.bbox.slice(0),P=k.dbx,F=k.dby,x+=M||0,N=!0):I&&I.available?(C=I.bbox.slice(0),P=I.dbx,F=I.dby):C=A.bbox,C&&(C[0]-=s,C[1]-=h,C[2]-=s,C[3]-=h,A=g[E],T&&!nv(T)&&((S=S.slice(0))[0]+=O-s+P,S[1]+=R-h+F,S=oa.calMatrixByOrigin(T,S),A=A?av(A,S):S),A&&(g[x]=A),a&&(A=av(a,A)),C=cv(C,A,p,p),M&&!N&&d.push(x),uv(f,C,s,h)))):x+=M||0}}return[f,a]}(r,a,n,f,d,(t.getParameter(t.MAX_TEXTURE_SIZE),h)),g=Qt(p,2),p=g[0],v=g[1];p||(_=!0);var m=(p=h||_?[0,0,c,u]:p)[2]-p[0],y=p[3]-p[1],g=Qt(dv(t,e,m,y),3),E=g[0],x=g[1],b=g[2],T=r.__sx1,A=r.__sy1,M=.5*m,O=.5*y,R=-p[0],S=-p[1],C=T-p[0],I=A-p[1];s&&s.available?e.addTexAndDrawWhenLimit(t,s,1,null,M,O,R,S):h&&(g=Le.getCacheCanvas(m,y,"__$$OVERSIZE$$__"),r.render(rt.WEBGL,0,t,jp,0,0),s=e.lockOneChannel(),r=xe.createTexture(t,g.canvas,s),r=new Cp(t,r,0,0,m,y,[0,0,m,y]),e.addTexAndDrawWhenLimit(t,r,1,null,M,O,0,0),e.refresh(t,M,O),g.ctx.setTransform(1,0,0,1,0,0),g.ctx.globalAlpha=1,g.ctx.clearRect(0,0,m,y),r.release(),e.releaseLockChannel(s));for(var k={},w=n+1,L=n+(o||0)+1;w<L;w++){var D,N,P,F,B,Y,H,G,W,U=a[w],X=U[Vg],V=U[zg],K=U[jg],z=X.__config,j=k[f[w]],$=d[w];X instanceof Qa?(v&&(j=av(v,j)),e.addTexAndDrawWhenLimit(t,z[Mg],$,j,M,O,R,S)):(D=z[Mg],H=z[Og],G=z[Cg],B=z[Sg],Y=z[Rg],N=z[Yg],P=(W=z[Lg])[og],F=W[sg],U=W[_g],z=W[fg],W=W[cg],"none"!==P?"hidden"===F||N||(U&&!nv(U)&&(z=z.slice(0),D&&D.available?(z[0]+=D.sx1,z[1]+=D.sy1):(z[0]+=X.__sx1,z[1]+=X.__sy1),X=I-A,z[0]+=C-T,z[1]+=X,z=oa.calMatrixByOrigin(U,z),j=j?av(j,z):z),j&&(k[w]=j),v&&(j=av(v,j)),(B=Jp([B,G,Y,H,D]))&&(hv(W)?(e.refresh(t,M,O),Y=(G=Qt(dv(t,e,m,y),3))[0],H=G[1],G=G[2],e.addTexAndDrawWhenLimit(t,B,$,j,M,O,R,S),e.refresh(t,M,O),E=(W=Qt(mv(t,e,E,Y,x,b,sv(W),m,y),3))[0],x=W[1],b=W[2],t.deleteFramebuffer(H),t.deleteTexture(G)):e.addTexAndDrawWhenLimit(t,B,$,j,M,O,R,S),B!==D&&(w+=(V||0)+fv(a,w+(V||0)+1,K||0)))):w+=(V||0)+fv(a,w+(V||0)+1,K||0))}e.refresh(t,M,O),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(x);p=new Cp(t,b,T,A,m,y,p);return e.releaseLockChannel(E,p.page),[h||_,p]}function gv(s,h,t,e,r,i,n){var l=e.sx1,c=e.sy1,u=e.width,_=e.height,f=e.bbox,d=e;return r.forEach(function(t){var e,r,i,n,o,a=Qt(t,2),t=a[0],a=a[1];"blur"===t&&0<a?(r=function(t,e,r,i,n,o,a,s,h){var l=ha.kernelSize(i),c=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));for(;c<l;)l-=2;var u=ha.outerSizeByD(l);n+=2*u,o+=2*u;var _=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(_<n||_<o)){(h=h.slice(0))[0]-=u,h[1]-=u,h[2]+=u,h[3]+=u;for(var f=.5*n,d=.5*o,p=ha.gaussianWeight(i,l),g="",v="",m=Math.floor(.5*l),y=0;y<m;y++){var E=.01*(m-y);g+="\nv_texCoordsBlur[".concat(y,"] = a_texCoords + vec2(-").concat(E,", -").concat(E,") * u_direction;"),v+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(y,"]) * ").concat(p[y],";")}g+="\nv_texCoordsBlur[".concat(m,"] = a_texCoords;"),v+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(m,"]) * ").concat(p[m],";");for(var x=0;x<m;x++){var b=.01*(x+1);g+="\nv_texCoordsBlur[".concat(x+m+1,"] = a_texCoords + vec2(").concat(b,", ").concat(b,") * u_direction;"),v+="\ngl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(x+m+1,"]) * ").concat(p[x+m+1],";")}g=Ip.replace("[3]","["+l+"]").replace(/}$/,g+"}"),v=kp.replace("[3]","["+l+"]").replace(/}$/,v+"}");var T=xe.initShaders(t,g,v);t.useProgram(T);var A=Qt(dv(t,e,n,o),3),M=A[0],O=A[1],_=A[2],A=e.findExistTexChannel(r.page);-1===A?(A=e.lockOneChannel(),xe.bindTexture(t,r.page.texture,A)):e.lockChannel(A),_=xe.drawBlur(t,T,O,e,_,r.page.texture,M,A,n,o,f,d,u,l,i),t.deleteShader(T.vertexShader),t.deleteShader(T.fragmentShader),t.deleteProgram(T),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(O),e.releaseLockChannel(A);s=new Cp(t,_,a,s,n,o,h);return e.releaseLockChannel(M,s.page),[s,n,o,h]}}(s,h,d,a,u,_,l,c,f))&&(e=Qt(r,4),d=e[0],u=e[1],_=e[2],f=e[3]):"hue-rotate"===t?(r=et.d2r(a%360),e=Math.cos(r),r=Math.sin(r),(r=vv(s,h,d,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],u,_,l,c,f))&&(i=Qt(r,4),d=i[0],u=i[1],_=i[2],f=i[3])):"saturate"===t&&100!==a?(i=vv(s,h,d,[.213+.787*(i=.01*a),.715-.715*i,.072-.072*i,0,0,.213-.213*i,.715+.285*i,.072-.072*i,0,0,.213-.213*i,.715-.715*i,.072+.928*i,0,0,0,0,0,1,0],u,_,l,c,f))&&(n=Qt(i,4),d=n[0],u=n[1],_=n[2],f=n[3]):"brightness"===t&&100!==a?(n=vv(s,h,d,[n=.01*a,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],u,_,l,c,f))&&(o=Qt(n,4),d=o[0],u=o[1],_=o[2],f=o[3]):"grayscale"===t&&0<a?((o=1-.01*a)<0?o=0:1<o&&(o=1),(o=vv(s,h,d,[.2126+.7874*o,.7152-.7152*o,.0722-.0722*o,0,0,.2126-.2126*o,.7152+.2848*o,.0722-.0722*o,0,0,.2126-.2126*o,.7152-.7152*o,.0722+.9278*o,0,0,0,0,0,1,0],u,_,l,c,f))&&(o=Qt(o,4),d=o[0],u=o[1],_=o[2],f=o[3])):"contrast"!==t||100===a||(a=vv(s,h,d,[t=.01*a,0,0,0,a=-.5*t,0,t,0,0,a,0,0,t,0,a,0,0,0,1,0],u,_,l,c,f))&&(a=Qt(a,4),d=a[0],u=a[1],_=a[2],f=a[3])}),s.useProgram(s.program),s.viewport(0,0,i,n),d}function vv(t,e,r,i,n,o,a,s,h){var l=Qt(dv(t,e,n,o),3),c=l[0],u=l[1],_=l[2],l=e.findExistTexChannel(r.page);-1===l?(l=e.lockOneChannel(),xe.bindTexture(t,r.page.texture,l)):e.lockChannel(l),t.useProgram(t.programCm),xe.drawCm(t,t.programCm,l,i),e.releaseLockChannel(l),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u);s=new Cp(t,_,a,s,n,o,h.slice(0));return e.releaseLockChannel(c,s.page),[s,n,o,h]}function mv(t,e,r,i,n,o,a,s,h){"multiply"===(a=sv(a))?u=Lp:"screen"===a?u=Dp:"overlay"===a?u=Np:"darken"===a?u=Pp:"lighten"===a?u=Fp:"color-dodge"===a?u=Bp:"color-burn"===a?u=Yp:"hard-light"===a?u=Hp:"soft-light"===a?u=Gp:"difference"===a?u=Wp:"exclusion"===a?u=Up:"hue"===a?u=Xp:"saturation"===a?u=Vp:"color"===a?u=Kp:"luminosity"===a&&(u=zp);var l=xe.initShaders(t,wp,u);t.useProgram(l);var c=Qt(dv(t,e,s,h),3),a=c[0],u=c[1],c=c[2];return xe.drawMbm(t,l,r,i,s,h),t.useProgram(t.program),t.deleteShader(l.vertexShader),t.deleteShader(l.fragmentShader),t.deleteProgram(l),t.deleteFramebuffer(n),t.deleteTexture(o),e.releaseLockChannel(r),e.releaseLockChannel(i),[a,u,c]}var yv={renderCanvas:function(a,t,e){for(var s=e.__structs,h=e.width,l=e.height,r=[],i=0,n=s.length;i<n;i++){var o,c,u,_=s[i],f=_[Vg],d=_[$g],p=_[zg],g=_[jg];f instanceof Qa||(c=(o=f.__config)[Pg],u=o[Ug],_=o[Lg],tv<=c&&f.__calCache(a,t,o[Hg],o[Fg],o[Dg],_,f.clientWidth,f.clientHeight,f.offsetWidth,f.offsetHeight,_[Eg],_[xg],_[bg],_[Tg],_[mg],_[vg],_[yg],_[gg],f.__sx1,f.__sx2,f.__sx3,f.__sx4,f.__sx5,f.__sx6,f.__sy1,f.__sy2,f.__sy3,f.__sy4,f.__sy5,f.__sy6),u&&("none"!==_[og]?r.push([i,d,p,f,o,g]):i+=(p||0)+fv(s,i+(p||0)+1,g||0)))}r.length&&(r.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),r.forEach(function(t){var e=Qt(t,6),r=e[0],i=e[1],n=e[2],o=e[3],t=e[4],e=e[5];_v(a,o,t,r,i,n||0,s,e,h,l)}));for(var v={},m={},y=0,E=s.length;y<E;y++){var x=s[y],b=x[Vg],T=x[$g],A=x[zg],M=x[jg];if(b instanceof Qa)b.render(a,tv,t,jp,0,0),m.hasOwnProperty(y)&&(t=ng(t,m[y],h,l));else{var O=b.__config,R=O[Og],S=O[Cg],C=O[Sg],I=O[Rg],k=O[Pg],w=O[Lg],L=w[og],D=w[cg],N=w[ag];if(v.hasOwnProperty(y)){var P=Qt(v[y],3),F=P[0],B=P[1],x=P[2],w=Le.getCacheCanvas(h,l,null,"mask2");x.mask=w,x.isClip=b.isClip;for(var Y=y+(A||0)+1;--B;)Y+=(s[Y][zg]||0)+1;P=m[--Y]=m[Y]||[];P.push([F,T,eg,x]),P.push([Y,T,ig,{ctx:t,target:w}]),t=w.ctx}var H,G,S=Jp([C,S,I,R]);S?(y+=(A||0)+fv(s,(G=y)+(A||0)+1,M||0),"none"!==L&&(hv(D)?t.globalCompositeOperation=sv(D):t.globalCompositeOperation="source-over",I=O[Ig],D=(H=O[kg]).slice(0),(O=O[Hg].matrixEvent)&&!nv(O)&&(I=av(O,I)),ue.assignMatrix(H,I),_a.draw(t,N,H,S),t.globalCompositeOperation="source-over",m.hasOwnProperty(y)&&(t=ng(t,m[y],h,l)),(S=!(S=R.isNew)&&!ue.equalArr(D,H)||S)&&function t(e,r,i,n,o){for(var a,s=[],h=o,l=n,c=r+1,u=r+(i||0)+1;c<u;c++){var _,f,d,p,g,v=e[c],m=v[Vg],y=v[$g],E=v[zg],x=v[jg];m instanceof Qa||(_=(g=m.__config)[kg],f=g[Og],d=g[Dg],p=g[Lg],v=g[Fg],"none"!==p[og]?(l<y?(nv(a=h)&&(a=null),s.push(a)):y<l&&(s.splice(-(l-y)),a=s[y-1]),l=y,_=_.slice(0),v[Ag]=null,p=m.__calMatrix(tv,v,d,p,g),lv(g[Ig],p),nv(a)||(p=av(a,p)),lv(g[kg],p),h=p,f&&f.available&&((g=!(g=f.isNew)&&!ue.equalArr(_,p)||g)&&t(e,c,E||0,y,p),f.__isNew=!1,c+=(E||0)+fv(e,c+(E||0)+1,x||0))):c+=(E||0)+fv(e,c+(E||0)+1,x||0))}}(s,G,A||0,T,H),R.__isNew=!1)):(H=(G=b.render(a,k,t,jp,0,0)||{}).offscreenBlend,R=G.offscreenMask,b=G.offscreenFilter,k=G.offscreenOverflow,H&&((m[G=y+(A||0)+fv(s,y+(A||0)+1,M||0)]=m[G]||[]).push([y,T,rg,H]),t=H.target.ctx),R&&(v[y+(A||0)+1]=[y,M,R],t=R.target.ctx),b&&((m[R=y+(A||0)+fv(s,y+(A||0)+1,M||0)]=m[R]||[]).push([y,T,tg,b]),t=b.target.ctx),k&&((m[b=y+(A||0)+fv(s,y+(A||0)+1,M||0)]=m[b]||[]).push([y,T,Qp,k]),t=k.target.ctx),m.hasOwnProperty(y)&&(t=ng(t,m[y],h,l)),"none"===L&&(y+=(A||0)+fv(s,y+(A||0)+1,M||0)))}}},renderSvg:function(t,e,r,i){var n=r.__structs,o=r.width,a=r.height,s={};if(!i)for(var h=0,l=n.length;h<l;h++){var c=n[h],u=c[Vg],_=c[zg],f=c[jg],c=u.__config,u=c[Pg],c=c[Bg];f&&(tv<=u||ev(u,qg|Jg))&&(s[h+(_||0)+1+f-1]=u),u<tv&&(s.hasOwnProperty(h)?(f=s[h],!ev(u,qg)&&f<tv&&!ev(f,qg)&&c.forEach(function(t){e.addCache(t)})):c.forEach(function(t){e.addCache(t)}))}for(var d,p,g={},v=[],m=[],y=0,E=0,x=n.length;E<x;E++){var b=n[E],T=b[Vg],A=b[zg],M=b[jg],O=b[$g],R=T.__config,S=R[Og],C=R[Pg],I=R[Bg],k=R[Lg],b=k[og];M&&"none"!==b&&(g[(F=(N=E+(A||0)+1)+M)-1]={index:E,start:N,end:F,isClip:n[N][Vg].isClip}),O<y?(v.splice(-(w=y-O)),d=v[O-1],m.splice(-w),p=m[O-1]):y<O&&(v.push(P[Ig]),L=P[Wg],m.push(L),p=L);var w,L,D,N,P=R,F=void 0;if(C<tv&&!(T instanceof Qa)?(R[Pg]=Zg,F=R[Wg],S&&S.available?(E+=A||0,F.cache=!0):(S&&(S.available=!0),F=R[Wg]=T.__virtualDom=ue.extend({},F),T instanceof ed&&!(T instanceof Xd)&&(F.children=[]),"none"===b?(E+=A||0,M&&(E+=M)):delete F.cache),N=R[Dg],w=R[Lg],L=R[Fg],ev(C,qg)&&(S=T.__calMatrix(C,L,N,w,R),L=R[Ig],lv(L,S),!S||nv(S)?delete F.transform:F.transform="matrix("+ue.joinArr(te.m2m6(S),",")+")",d&&S&&(S=av(d,S)),L=R[kg],lv(L,S)),ev(C,Jg)&&(1===(D=w[ag]=N[ag])?delete F.opacity:F.opacity=D),ev(C,Qg)&&(D=T.__calFilter(N,w),(D=Tt.svgFilter(D))?F.filter=D:delete F.filter),ev(C,rv)&&(N=w[cg]=N[cg],hv(N)?F.mixBlendMode=sv(N):delete F.mixBlendMode),F.lv=C):(R[Bg]&&R[Bg].splice(0),T.render(t,C,e,jp,0,0),F=R[Wg],"none"===(b=k[og])&&(E+=A||0,M&&(E+=M))),g.hasOwnProperty(E)&&(s.hasOwnProperty(E)||tv<=C||ev(C,qg|Jg))){var A=g[E],M=A.index,C=A.start,B=A.end,Y=A.isClip,H=n[M][Vg],G=[];Y&&G.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(o,",0L").concat(o,",").concat(a,"L0,").concat(a,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var W=C;W<B;W++){var U=n[W][Vg],X=U.computedStyle,V=X[og],K=X[sg],z=X[ug],X=U.virtualDom,j=X.children,$=X.opacity;if("none"!==V&&"hidden"!==K)for(var j=ue.clone(j),G=G.concat(j),Z=0,q=j.length;Z<q;Z++){var J=j[Z],Q=J.tagName,tt=J.props;if("path"===Q){if(Y)for(var et=0,rt=tt.length;et<rt;et++){var it=tt[et];"fill"===it[0]&&(it[1]=ue.int2invert(z[0]))}var nt=U.matrix,J=ov(H.matrix),nt=av(J,nt);tt.push(["transform","matrix(".concat(ue.joinArr(te.m2m6(nt),","),")")]),ue.isNil($)||1===$||tt.push(["opacity",$])}else if("image"===Q){for(var ot,at=-1,st=0,ht=tt.length;st<ht;st++)if("transform"===tt[st][0]){at=st;break}-1===at?(ot=ov(H.matrix),nv(ot)||tt.push(["transform","matrix(".concat(ue.joinArr(te.m2m6(ot),","),")")])):(Q=tt[at][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),ot=ov(H.matrix),Q=av(ot,Q),tt[at][1]="matrix(".concat(ue.joinArr(te.m2m6(Q),","),")"))}}}for(var lt=I.length-1;0<=lt;lt--)"mask"===I[lt].tagName&&I.splice(lt,1);M={tagName:"mask",props:[],children:G},C=e.add(M);I.push(M),H.virtualDom.mask="url(#"+C+")"}p&&!T.isMask&&p.children.push(F),0===E&&(d=R[Ig],p=F),y=O}},renderWebgl:function(t,p,e){for(var r,i,n,g=e.__structs,v=e.width,m=e.height,y=e.texCache,o=.5*v,a=.5*m,s=[],h=[],l=1,c=[],u=0,_=[],f=0,d=g.length;f<d;f++){var E=g[f],x=E[Vg],b=E[$g],T=E[zg],A=E[jg];if(x instanceof Qa)tv<=R&&x.render(t,tv,p,qp,0,0);else{var M=x.__config,O=M[Pg];0===f||(u<b?(r=S[kg],nv(r)&&(r=null),s.push(r),l=S[wg],h.push(l),i=S[Gg],nv(i)&&(i=null),c.push(i)):b<u&&(s.splice(-(L=u-b)),r=s[b-1],h.splice(-L),l=h[b-1],c.splice(-L),i=c[b-1]));var R=O,S=M,u=b,C=M[Og],I=M[Lg];if("none"!==I[og]){var k=void 0;if(O<tv){M[Pg]=Zg,A&&((D=M[Sg])&&D.available||_.push(k=[f,b,T,x,M,null,A]));var w=M[Dg],E=M[Fg],L=M[kg];ev(O,iv)&&x.__calPerspective(E,w,I,M);var D=void 0;ev(O,qg)?(D=x.__calMatrix(O,E,w,I,M),E=M[Ig],lv(E,D)):D=M[Ig],(oa.isPerspectiveMatrix(D)||i)&&(k?k[9]=!0:k=[f,b,T,x,M,null,null,null,null,!0]),i&&(D=av(i,D)),r&&(D=av(r,D)),lv(L,D);D=void 0,D=ev(O,Jg)?I[ag]=w[ag]:I[ag];if(M[wg]=l*D,ev(O,Qg)&&(x.__bbox=null,D=x.__calFilter(w,I),k?k[7]=D:_.push(k=[f,b,T,x,M,null,A,D])),ev(O,rv)&&(I[cg]=w[cg]),C&&C.available){f+=T||0;continue}}else{O=x.render(t,O,p,qp,0,0);O&&Le.isWebGLTexture(O.texture)&&(N=x.__sx1,P=x.__sy1,F=x.offsetWidth,B=x.offsetHeight,Y=x.bbox,M[Mg]=new Cp(p,O.texture,N,P,F,B,Y),p.viewport(0,0,v,m),p.useProgram(p.program))}var N=M[Ng],P=M[Ug],F=I[lg],B=I[hg],Y=I[cg],I=I[_g],Y=hv(Y),I=oa.isPerspectiveMatrix(I)||i;(P||A||B.length||"hidden"===F&&T||Y||I)&&(Y&&(n=!0),k?(k[5]=N,k[7]=B,k[8]=F,k[9]=I):_.push([f,b,T,x,M,N,A,B,F,I]))}else f+=T||0}}var H,G,W,U={};_.length&&(_.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),_.forEach(function(t){var e,r=Qt(t,9),i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],h=r[5],l=r[6],c=r[7],u=r[8],_=s[Mg],f=s[Og],d=s[Cg],t=s[Sg],r=s[Rg];f&&f.available||(o=(e=Qt(pv(p,y,a,0,i,o||0,g,_,h,0,v,m),2))[0],f=_=e[1],e=!0,(h=o)||(s[Og]=_));"hidden"===u&&(r&&r.available&&!e||(f=function(t,e,r,i,n,o){var a=r.bbox.slice(0),s=i.bbox;if(!(s[0]>=a[0]&&s[1]>=a[1]&&s[2]<=a[2]&&s[3]<=a[3])){var h=a[2]-a[0],l=a[3]-a[1],c=Qt(dv(t,e,h,l),3),u=c[0],_=c[1],r=c[2],c=e.findExistTexChannel(i.page);-1===c?(c=e.lockOneChannel(),xe.bindTexture(t,i.page.texture,c)):e.lockChannel(c),t.useProgram(t.programOverflow),xe.drawOverflow(t,c,a[0]-s[0],a[1]-s[1],h,l,i.width,i.height),e.releaseLockChannel(c),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,n,o),t.deleteFramebuffer(_);a=new Cp(t,r,i.sx1,i.sy1,h,l,a);return e.releaseLockChannel(u,a.page),a}}(p,y,a,f,v,m),e=!0,h||(s[Cg]=f))),c.length&&(d&&d.available&&!e||(f=gv(p,y,0,d=f,c,v,m))!==d&&(e=!0,h||(s[Cg]=f))),!l||t&&t.available&&!e||(f=function(t,e,r,i,n,o,a,s,h){var l=n.sx1,c=n.sy1,u=n.width,_=n.height,f=n.bbox,d=n.dx,p=n.dy,g=.5*u,v=.5*_,m=(x=i[Lg])[_g],y=x[fg],E=nv(m)?te.identity():((q=y.slice(0))[0]+=l+d,q[1]+=c+p,oa.calMatrixByOrigin(m,q));E=te.inverse(E);for(var x=(i=Qt(dv(t,e,u,_),3))[0],y=i[1],m=i[2],b=r.next,T=b.isClip,A=[];b&&b.isMask&&b.isClip===T;)A.push(b),b=b.next;for(var M=0,O=A.length;M<O;M++)for(var R=[],S=void 0,C=void 0,I=[],k=1,w=void 0,L=s,D=A[M].__config[Xg],N=D[Kg],P=N,F=N+(D[zg]||0)+1;P<F;P++){var B=h[P],Y=B[Vg],H=B[$g],G=B[zg],W=B[jg],U=Y.__config,X=U[Mg],V=U[Lg],K=U[Ng];if("none"!==V[og])if(Y instanceof Qa){if(X&&X.available)e.addTexAndDrawWhenLimit(t,X,k,e.last[2],g,v,0,0,!0);else if(K)return}else{var z=U[Mg],j=U[Sg],$=U[Cg],Z=U[Rg],B=U[Og],V=U[Lg],Y=V[ag],X=V[_g],U=V[fg];P===N||(L<H?(nv(S=C)&&(S=null),R.push(S),k=w,I.push(k)):H<L&&(R.splice(-(V=L-H)),S=R[H-1],I.splice(-V),k=I[H-1]));L=H,$=Jp([j,$,Z,B,z]);if($){Z=void 0,Z=nv(X)?te.identity():((B=U.slice(0))[0]+=$.bbox[0]+d,B[1]+=$.bbox[1]+p,oa.calMatrixByOrigin(X,B));Z=te.multiply(E,Z),console.log(Z);U=U.slice(0);U[0]+=$.bbox[0]+d,U[1]+=$.bbox[1]+p,C=oa.calMatrixByOrigin(X,U),nv(S)||(C=av(S,C)),e.addTexAndDrawWhenLimit(t,$,w=k*Y,Z,g,v,d,p,!0),$!==z&&(P+=(G||0)+fv(h,P+(G||0)+1,W||0))}else if(K)return}else P+=(G||0)+fv(h,P+(G||0)+1,W||0)}e.refresh(t,g,v),t.deleteFramebuffer(y);var q=e.findExistTexChannel(n.page);return-1===q?(q=e.lockOneChannel(),xe.bindTexture(t,n.page.texture,q)):e.lockChannel(q),i=Qt(dv(t,e,u,_),3),r=i[0],y=i[1],n=i[2],i=T?t.programClip:t.programMask,t.useProgram(i),xe.drawMask(t,x,q,i),t.deleteTexture(m),e.releaseLockChannel(x),e.releaseLockChannel(q),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,o,a),t.deleteFramebuffer(y),f=new Cp(t,n,l,c,u,_,f),e.releaseLockChannel(r,f.page),f}(p,y,a,s,f,v,m,n,g),h||(s[Sg]=f)),h&&(U[i]=f)})),n&&(H=(j=Qt(dv(p,y,v,m),3))[0],G=j[1],W=j[2]);for(var X,V,K,z,j,$=0,Z=g.length;$<Z;$++){var q,J,Q,tt,et,rt,it,nt,ot,at,st,ht,lt=g[$],ct=lt[Vg],ut=lt[zg],_t=lt[jg],ft=ct.__config;ct instanceof Qa?(ot=ft[Mg],rt=ft[Ng],nt=(J=ft[Hg].__config)[kg],tt=J[wg],ot&&ot.available?y.addTexAndDrawWhenLimit(p,ot,tt,nt,o,a,0,0,!0):rt&&(ht=Le.getCacheCanvas(v,m,"__$$OVERSIZE$$__"),ct.render(t,0,p,jp,0,0),et=y.lockOneChannel(),Q=xe.createTexture(p,ht.canvas,et),st=new Cp(p,Q,0,0,v,m,[0,0,v,m]),y.addTexAndDrawWhenLimit(p,st,tt,nt,o,a,0,0,!0),y.refresh(p,o,a,!0),ht.ctx.setTransform(1,0,0,1,0,0),ht.ctx.globalAlpha=1,ht.ctx.clearRect(0,0,v,m),st.release(),y.releaseLockChannel(et))):(q=ft[wg],lt=ft[kg],J=ft[Ng],ot=ft[Mg],rt=ft[Og],Q=ft[Cg],tt=ft[Sg],nt=ft[Rg],ht=ft[Pg],et=(st=ft[Lg])[og],ft=st[sg],st=st[cg],"none"!==et?(nt=Jp([tt,Q,nt,rt,ot]))?(n&&hv(st)?(y.refresh(p,o,a,!0),rt=(at=Qt(dv(p,y,v,m),3))[0],it=at[1],at=at[2],y.addTexAndDrawWhenLimit(p,nt,q,lt,o,a,0,0,!0),y.refresh(p,o,a,!0),H=(rt=Qt(mv(p,y,H,rt,G,W,sv(st),v,m),3))[0],G=rt[1],W=rt[2],p.deleteFramebuffer(it),p.deleteTexture(at)):y.addTexAndDrawWhenLimit(p,nt,q,lt,o,a,0,0,!0),nt!==ot&&($+=(ut||0)+fv(g,$+(ut||0)+1,_t||0))):U.hasOwnProperty($)?(it=U[$],n&&hv(st)?(y.refresh(p,o,a,!0),nt=(at=Qt(dv(p,y,v,m),3))[0],ot=at[1],at=at[2],y.addTexAndDrawWhenLimit(p,it,q,lt,o,a,0,0,!0),y.refresh(p,o,a,!0),H=(st=Qt(mv(p,y,H,nt,G,W,sv(st),v,m),3))[0],G=st[1],W=st[2],p.deleteFramebuffer(ot),p.deleteTexture(at)):y.addTexAndDrawWhenLimit(p,it,q,lt,o,a,0,0,!0),$+=(ut||0)+fv(g,$+(ut||0)+1,_t||0)):J&&"none"!==et&&"hidden"!==ft&&(ft=Le.getCacheCanvas(v,m,"__$$OVERSIZE$$__"),ct.render(t,ht,p,jp,0,0),ct=y.lockOneChannel(),ht=xe.createTexture(p,ft.canvas,ct),ht=new Cp(p,ht,0,0,v,m,[0,0,v,m]),y.addTexAndDrawWhenLimit(p,ht,q,lt,o,a,0,0,!0),y.refresh(p,o,a,!0),ft.ctx.setTransform(1,0,0,1,0,0),ft.ctx.globalAlpha=1,ft.ctx.clearRect(0,0,v,m),ht.release(),y.releaseLockChannel(ct)):$+=(ut||0)+fv(g,$+(ut||0)+1,_t||0))}y.refresh(p,o,a,!0),n&&(p.bindFramebuffer(p.FRAMEBUFFER,null),y.releaseLockChannel(H),p.deleteFramebuffer(G),X=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,X),p.bufferData(p.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),p.STATIC_DRAW),V=p.getAttribLocation(p.program,"a_position"),p.vertexAttribPointer(V,2,p.FLOAT,!1,0,0),p.enableVertexAttribArray(V),K=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,K),p.bufferData(p.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),p.STATIC_DRAW),z=p.getAttribLocation(p.program,"a_texCoords"),p.vertexAttribPointer(z,2,p.FLOAT,!1,0,0),p.enableVertexAttribArray(z),e=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,e),p.bufferData(p.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),p.STATIC_DRAW),j=p.getAttribLocation(p.program,"a_opacity"),p.vertexAttribPointer(j,1,p.FLOAT,!1,0,0),p.enableVertexAttribArray(j),j=p.getUniformLocation(p.program,"u_texture"),p.uniform1i(j,H),p.drawArrays(p.TRIANGLES,0,6),p.deleteBuffer(X),p.deleteBuffer(K),p.deleteBuffer(e),p.disableVertexAttribArray(V),p.disableVertexAttribArray(z),p.deleteTexture(W))}},Ev="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",xv=function(){function e(t){_(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return f(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,n,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,h=8<arguments.length?arguments[8]:void 0,l=this.__pages,c=this.__list,u=e.page;-1<l.indexOf(u)||(l.length>=this.__units-this.__lockUnits&&this.refresh(t,n,o,h),l.push(u)),c.push([e,r,i,a,s])}},{key:"refresh",value:function(t,e,r,i){var n=this.__pages,o=this.__list;if(n.length){var a=this.channels,s=this.locks,h={};a.forEach(function(t,e){t&&(t=t.uuid,h[t]=e)});var l=this.__units,c=new Array(l),u=[];if(n.forEach(function(t){var e=t.uuid;h.hasOwnProperty(e)?(e=h[e],c[e]=t):u.push(t)}),u.length){for(var _=0;_<l&&(c[_]||a[_]||s[_]||(c[_]=u.shift(),u.length));_++);var f=u.length;if(f){for(var d=[],p=0;p<l;p++)c[p]||s[p]||d.push([p,a[p]]);d.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var g=0;g<f;g++)c[d[g][0]]=u[g]}}for(var v={},m=0,y=c.length;m<y;m++){var E,x=c[m];x&&(!(E=a[m])||E[0]!==x||x.update?(x instanceof Sp?xe.bindTexture(t,x.texture,m):(E&&t.deleteTexture(E.texture),x.texture=xe.createTexture(t,x.canvas,m)),v[(a[m]=x).uuid]=m):v[x.uuid]=m,x.update=!1,x.time=Le.now())}xe.drawTextureCache(t,o,v,e,r,i),n.splice(0),o.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i=this.__units,n=[],o=0;o<i;o++)e[o]||n.push([o,t[o]]);if(n.length){n.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});var a=n[0][0];return t[a]=null,e[a]=!0,this.__lockUnits++,a}throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),e}(),A=m.STYLE_KEY,bv=A.TOP,Jt=A.RIGHT,Tv=A.BOTTOM,Zt=A.LEFT,Av=A.POSITION,Mv=A.DISPLAY,Ov=A.VISIBILITY,Rv=A.COLOR,Sv=A.WIDTH,Cv=A.HEIGHT,Iv=A.Z_INDEX,kv=A.MARGIN_TOP,wv=A.MARGIN_LEFT,Lv=A.MARGIN_BOTTOM,Dv=A.PADDING_TOP,Nv=A.PADDING_LEFT,Pv=A.PADDING_BOTTOM,Fv=A.BORDER_TOP_WIDTH,Bv=A.BORDER_LEFT_WIDTH,Yv=A.BORDER_BOTTOM_WIDTH,Hv=A.POINTER_EVENTS,ft=m.UPDATE_KEY,Gv=ft.UPDATE_NODE,Wv=ft.UPDATE_STYLE,Uv=ft.UPDATE_KEYS,Xv=ft.UPDATE_COMPONENT,Vv=ft.UPDATE_FOCUS,Kv=ft.UPDATE_MEASURE,zv=ft.UPDATE_OVERWRITE,jv=ft.UPDATE_LIST,$v=ft.UPDATE_CONFIG,Zv=ft.UPDATE_ADD_DOM,qv=ft.UPDATE_REMOVE_DOM,sr=m.NODE_KEY,Jv=sr.NODE_TAG_NAME,Qv=sr.NODE_CACHE_STYLE,tm=sr.NODE_CACHE_PROPS,em=sr.NODE_CURRENT_STYLE,rm=sr.NODE_COMPUTED_STYLE,im=sr.NODE_CURRENT_PROPS,nm=sr.NODE_DOM_PARENT,om=sr.NODE_IS_MASK,am=sr.NODE_REFRESH_LV,sm=sr.NODE_IS_DESTROYED,hm=sr.NODE_STYLE,lm=sr.NODE_UPDATE_HASH,cm=sr.NODE_UNIQUE_UPDATE_ID,um=sr.NODE_CACHE,_m=sr.NODE_CACHE_TOTAL,fm=sr.NODE_CACHE_FILTER,dm=sr.NODE_CACHE_OVERFLOW,pm=sr.NODE_CACHE_MASK,gm=sr.NODE_STRUCT,qt=m.STRUCT_KEY,vm=qt.STRUCT_INDEX,mm=qt.STRUCT_TOTAL,ym=qt.STRUCT_NODE,Em=(o(fr={},bv,!0),o(fr,Jt,!0),o(fr,Tv,!0),o(fr,Zt,!0),fr),xm=ue.isNil,bm=ue.isObject,Tm=ue.isFunction,Am=S.AUTO,Mm=S.PX,Om=S.PERCENT,Rm=S.INHERIT,Sm=vn.isRelativeOrAbsolute,Cm=vn.equalStyle,Im=ba.contain,km=ba.getLevel,wm=ba.isRepaint,Lm=ba.NONE,Dm=ba.FILTER,Nm=ba.PERSPECTIVE,Pm=ba.REPAINT,Fm=ba.REFLOW,Bm=ba.REBUILD,Ym=Rr.isIgnore,Hm=Rr.isGeom,Gm=Rr.isMeasure,Wm={canvas:"canvas",svg:"svg",webgl:"canvas"};var Um=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function Xm(t,e){return t.currentStyle[e][1]!==Am}function Vm(t,e){var r=Xm(t,Sv)&&Xm(t,Cv);if(r&&e){t=t.domParent;if(t&&("flex"===t.currentStyle[Mv]||"flex"===t.computedStyle[Mv]))return}return r}function Km(t){return t.hasOwnProperty("__uniqueReflowId")}var zm=0;function jm(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=zm,e[zm++]={node:t,component:r,addDom:i})}var $m=0;function Zm(t,e,r,i,n,o,a,s,h){var l,c=r[Gv],u=r[Wv],_=r[zv],f=r[Vv],d=r[Xv],p=r[Kv],g=r[jv],v=r[Uv],m=r[$v],y=r[Zv],E=r[qv];if(!m[sm]){_&&Object.assign(m[hm],_),g&&!d&&(v=(v||[]).slice(0),l={},v.forEach(function(t){l[t]=!0}),g.forEach(function(t){var e=t[Wv],r=t[zv];(t[Uv]||[]).forEach(function(t){l.hasOwnProperty(t)||(l[t]=!0,v.push(t))}),r&&Object.assign(m[hm],r),e&&(u?Object.assign(u,e):u=e)}));var x,b,T,A,M=m[Jv],O=m[Qv],R=m[tm],S=m[em],r=m[rm],C=m[im],_=m[nm],g=m[om],I=f||Lm,k=p;if(!d&&u&&v)for(var w=0,L=v.length;w<L;w++){var D=v[w],N=u[D];if(c instanceof N1&&Hm(M,D))Cm(D,N,C[D],c)||(I|=Pm,R[D]=void 0,C[D]=N);else if(!Cm(D,N,S[D],c))if(Ym(D))O[D]=void 0,S[D]=N;else{if(Em.hasOwnProperty(D)){var P=S[Av];if("relative"!==P&&"absolute"!==P){delete u[D];continue}}else D===Mv&&(A=!0);I|=km(D),Gm(D)&&(k=!0),O[D]=void 0,S[D]=N,D===Iv&&c!==e&&(x=!0),D===Ov&&(b=!0),D===Rv&&(T=!0)}}if(I!==Lm||d){if("none"!==r[Mv]||A){if(x&&_&&delete _.__zIndexChildren,b||T)for(var F=e.__structs,p=c.__config[gm],B=p[vm]+1,Y=B+p[mm];B<Y;B++){var H=F[B],G=H[ym],W=H[mm],U=G.__config,X=U[em],H=void 0;b&&(G instanceof Qa||X[Ov][1]===Rm)&&(H=!0),(H=T&&(G instanceof Qa||X[Rv][1]===Rm)?!0:H)?(U[am]|=Pm,G instanceof Mf&&G.clearCache()):B+=W||0}if(g){for(var V=c.prev;V&&V.isMask;)V=V.prev;V&&V.__config[pm]&&V.__config[pm].release()}var K=_;if(A&&K){g=K.__config;if("none"===g[em][Mv]||"none"===g[rm][Mv])return void(r[Mv]="none")}!d&&wm(I)?(x&&t===rt.SVG&&(I|=Pm,_&&qm(_)),x&&!d&&s&&_&&!_.hasOwnProperty("__uniqueZId")&&(s[$m]=!0,_.__uniqueZId=$m++,h.push(_))):(i.push({node:c,style:u,component:d,addDom:y,removeDom:E}),k&&n.push(c)),m[am]|=I,e.__rlv=d||y||E?Bm:Math.max(e.__rlv,I);t=Pm<=I||t===rt.SVG&&c instanceof N1;for(t&&m[um]&&m[um].release(),(t||Im(I,Nm))&&(m[_m]&&m[_m].release(),m[pm]&&m[pm].release(),m[dm]&&m[dm].release()),(t||Im(I,Dm))&&m[fm]&&m[fm].release();K;){var z=K.__config;if(z.hasOwnProperty(cm)){var j=z[cm];if(o.hasOwnProperty(j))break;o[j]=!0}else o[$m]=!0,z[cm]=$m++,a.push(z);j=z[am];Pm<=j&&z[um]&&z[um].release(),z[_m]&&z[_m].release(),z[fm]&&z[fm].release(),z[pm]&&z[pm].release(),z[dm]&&z[dm].release(),K=z[nm]}return!0}}else delete m[cm]}}function qm(t,e){var r=t.__config;e?r[am]|=Pm:r[_m].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof Ss?t.shadowRoot:t)instanceof Qa||qm(t,!0)})}var Jm=0,Qm=function(){t(n,ed);var i=e(n);function n(t,e,r){return _(this,n),(e=i.call(this,t,e)).__cd=r||[],e.__dom=null,e.__mw=0,e.__mh=0,e.__taskUp=[],e.__taskCp=[],e.__ref={},e.__reflowList=[{node:a(e)}],e.__animateController=new Op,bs.mix(a(e)),e.__config[lm]=e.__updateHash={},e.__uuid=Jm++,e.__rlv=Bm,e}return f(n,[{key:"__initProps",value:function(){var t=this.props.width;xm(t)||0<(e=parseFloat(t)||0)&&(this.__width=e);var e=this.props.height;xm(e)||0<(e=parseFloat(e)||0)&&(this.__height=e)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?ue.joinSourceArray(e):ue.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+ue.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,n,o,a,s,h,l;return-1===["touchend","touchcancel"].indexOf(t.type)&&(a=this.dom,e=this.__scx,r=this.__scy,i=(l=a.getBoundingClientRect()).x,n=l.y,s=l.left,h=l.top,o=l.width,a=l.height,s=(l=t.touches?t.touches[0]:t).clientX-(s=i||s||0),h=l.clientY-(h=n||h||0),xm(e)?s*=this.width/o:s/=e,xm(r)?h*=this.height/a:h/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:h,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){t=this.__wrapEvent(t);return this.__emitEvent(t),t}}},{key:"appendTo",value:function(t){t=function(t){if(ue.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Es.initRoot(this.__cd,this),this.__initProps();var o,a,e,r=(this.__root=this).tagName,r=Wm[r];"undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===r?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(r),this.__dom||(t.innerHTML=this.__genHtml(r),this.__dom=t.querySelector(r))),this.__defs=this.dom.__defs||Vd.getInstance(this.__uuid),this.width&&this.height||(r=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(r.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(r.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d"),this.__renderMode=rt.CANVAS):"svg"===this.tagName?this.__renderMode=rt.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",de),this.__renderMode=rt.WEBGL,t.program=xe.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=xe.initShaders(t,Ev,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=xe.initShaders(t,Ev,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=xe.initShaders(t,Ev,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=xe.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.useProgram(t.program),t=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new xv(t)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof n&&this.dom.__root.destroy(),this.__eventCbList=(o=this.dom,a=n,e=[],Um.forEach(function(n){function t(t){var e=o.__root;if(e&&e instanceof a)if(-1<["touchend","touchcancel","touchmove"].indexOf(n)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}o.addEventListener(n,t),e.push([n,t])}),e),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,n=this.ctx,o=this.defs,a=this.width,s=this.height;if(!r){if(o.clear(),e)this.__checkRoot(i,a,s),this.__computeMeasure(i,n);else if(!this.__checkUpdate(i,n,a,s))return;Le.measureText(),this.__checkReflow(a,s),i!==rt.CANVAS||this.props.noRender?i!==rt.SVG||this.props.noRender?i!==rt.WEBGL||this.props.noRender||(this.__clear(n,i),yv.renderWebgl(i,n,this)):(yv.renderSvg(i,o,this,e),(e=this.virtualDom).defs=o.value,this.dom.__vd?_p(this.dom,this.dom.__vd,e):this.dom.innerHTML=ue.joinVirtualDom(e),this.dom.__vd=e,this.dom.__defs=o):(this.__clear(n,i),yv.renderCanvas(i,n,this)),Tm(t)&&t(),this.emit(bs.REFRESH,this.__rlv),this.__rlv=Lm}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var e,t=this.dom;t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null);t=this.ctx;this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t!==this.width||e!==this.height?(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r)):Tm(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var i,n=this,e=this.taskUp;this.isDestroyed||(e.length||(eh.nextFrame({__before:function(r){n.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){bm(t)&&Tm(t.__before)&&t.__before(r)})},__after:function(e){n.isDestroyed||i.forEach(function(t){bm(t)&&Tm(t.__after)?t.__after(e):Tm(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,n=this,i=this.taskCp;this.isDestroyed||(i.length||(eh.__nextFrameCp({__before:function(e){n.isDestroyed||(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),ip.check(n),ip.updateList.length&&ip.updateList.forEach(function(t){var e=t.root,r=t.shadowRoot;r instanceof Qa&&(r=r.domParent);var i={};i[Gv]=r,i[Wv]=r.currentStyle,i[Vv]=Fm,i[Kv]=!0,i[Xv]=t,i[$v]=r.__config,n.__addUpdate(r,r.__config,e,e.__config,i)}))},__after:function(e){n.isDestroyed||(r.forEach(function(t){t.__after(e)}),ip.did())}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t))}},{key:"getTargetAtPoint",value:function(t,e,x){return function t(e,r,i,n,o){var a=e.__sx1,s=e.__sy1,h=e.offsetWidth,l=e.offsetHeight,c=e.matrixEvent,u=e.children,_=e.zIndexChildren,f=e.computedStyle,d=f[Mv],f=f[Hv];if(x||"none"!==d){if(Array.isArray(_)){for(var p=0,g=u.length;p<g;p++)u[p].__index__=p;for(var v=_.length-1;0<=v;v--){var m=_[v];if(!(m instanceof karas.Text)){var y=n.slice();y.push(m.__index__);var E=o.slice();if(E.push(v),E=t(m,r,i,y,E))return E}}}if(x||"none"!==f)return et.pointInQuadrilateral(r,i,a,s,a+h,s,a+h,s+l,a,s+l,c)?{target:e,path:n,zPath:o}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,n=this.currentStyle,o=this.computedStyle;-1===["flex","block"].indexOf(n[Mv])&&(o[Mv]=n[Mv]="block"),"absolute"===n[Av]&&(o[Av]=n[Av]="static"),n[Sv]=[e,Mm],n[Cv]=[r,Mm],o[Sv]=e,o[Cv]=r,t===rt.CANVAS||t===rt.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===rt.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,n){i=i[lm];t===r?(i=r.__updateRoot)?(n[Vv]&&(i[Vv]|=n[Vv]),n[Kv]&&(i[Kv]=!0),n[Wv]&&(i[jv]=i[jv]||[]).push((o(t={},Wv,n[Wv]),o(t,zv,n[zv]),o(t,Uv,n[Uv]),t))):r.__updateRoot=n:e.hasOwnProperty(cm)?i.hasOwnProperty(e[cm])?(r=i[e[cm]],n[Vv]&&(r[Vv]|=n[Vv]),n[Kv]&&(r[Kv]=!0),n[Wv]&&(r[jv]=r[jv]||[]).push((o(r={},Wv,n[Wv]),o(r,zv,n[zv]),o(r,Uv,n[Uv]),r))):Le.error("Update process miss uniqueUpdateId"):(e[cm]=$m,i[$m++]=n)}},{key:"__checkUpdate",value:function(h,l,t,e){var c=this,r=[],i=[],n={},o=[],a={},s=[],u=c.__updateRoot,_=c.__updateHash;u&&(c.__updateRoot=null,(v=Zm(h,c,u,i,r,n,o))&&c.__checkRoot(h,t,e));for(var f=Object.keys(_),d=0,p=f.length;d<p;d++)var g=Zm(h,c,_[f[d]],i,r,n,o,a,s),v=v||g;c.__reflowList=i,$m=0,c.__updateHash=c.__config[lm]={},o.forEach(function(t){delete t[cm]}),s.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(c.__structs))});var m={};r.forEach(function(t){var e=t.__config,r=e[cm],i=e[nm];if(t!==c){if(m.hasOwnProperty(r))return;m[r]=!0}var n=t;if(t!==c&&(_[r][Zv]||Rr.isMeasureInherit(_[r][Wv])))for(;i&&i!==c;){var o=i,a=o.__config[cm],s=o.currentStyle;if(!(i.__config.hasOwnProperty(cm)?(o=_[a][Wv],m[a]=!0,!!Rr.measureInheritList(o).length):Rr.isMeasureInherit(s)))break;i=(n=i).domParent}n.__computeMeasure(h,l,function(t){t.__config.hasOwnProperty(cm)&&(m[t.__config[cm]]=!0)})});for(var y=0,E=f.length;y<E;y++)delete _[f[y]][$v][cm];return v}},{key:"__checkReflow",value:function(t,e){var C=this,r=this.__reflowList;if(r.length){for(var i,Q=this,n=[],tt={},o=zm=0,a=r.length;o<a;o++){var s=r[o],h=s.node,l=s.component,c=s.addDom,u=s.removeDom;if(h===this){i=!0;break}if((h=c&&h instanceof Ss?h.shadowRoot:h).hasOwnProperty("__uniqueReflowId")||(h.__uniqueReflowId=zm,tt[zm++]=s),function(t,e,r,i,n){if(!n||"absolute"!==r.currentStyle[Av]){var o=r;if(-1<["inline","inlineBlock","inline-block"].indexOf(o.currentStyle[Mv])||-1<["inline","inlineBlock","inline-block"].indexOf(o.computedStyle[Mv])){do{if((o=o.domParent)===t)return 1;if(Km(o))return;if("absolute"===o.currentStyle[Av]||"absolute"===o.computedStyle[Av])return void jm(o,e,i,n)}while(o&&(-1<["inline","inlineBlock","inline-block"].indexOf(o.currentStyle[Mv])||-1<["inline","inlineBlock","inline-block"].indexOf(o.computedStyle[Mv])));if(Vm(o,!0))return void jm(o,e,i,n)}var a,s=o.domParent;if(!Km(s)){do{if(Km(s))return}while(("flex"!==s.computedStyle[Mv]&&"flex"!==s.currentStyle[Mv]||(a=s),"absolute"!==s.currentStyle[Av]&&"absolute"!==s.computedStyle[Av])&&(!Vm(s,!0)&&(s=s.domParent)));if((o=a?a:o)===t)return 1;for(s=o;s;){if("absolute"===s.currentStyle[Av]||"absolute"===s.computedStyle[Av]){if(s===t)break;if(Vm(s))break;return void jm(s,e,i,n)}s=s.domParent}if(o!==r)jm(o,e,i,n);else if(n){var h=!0,l=r.prev,c=r.next;if(!(h=l&&-1<["inline","inline-block","inlineBlock"].indexOf(l.currentStyle[Mv])||c&&-1<["inline","inline-block","inlineBlock"].indexOf(c.currentStyle[Mv])?!1:h)){if((o=r.domParent)===t)return 1;jm(o,e,!1,!0)}}}}}(Q,tt,h,l,c)){i=!0,c&&(this.__zIndexChildren=null);break}u&&n.push(s)}if(zm=0,this.__reflowList=[],i)return Vf.clearUniqueReflowId(tt),this.__layout({x:0,y:0,w:t,h:e}),this.__layoutAbs(this,{x:0,y:0,w:t,h:e}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){t=tt[t.__uniqueReflowId];return e.uniqueList.push(t),!0}},{uniqueList:n});var I=[],k=0,w=[],L=0;n.forEach(function(t){var e=t.node,r=t.component,i=t.addDom,n=t.removeDom,o=e.computedStyle,a=e.currentStyle,s=o[Iv],h=o[Av],l=o[Mv],c="absolute"===h,u="absolute"===a[Av],_="none"===l,f="none"===a[Mv];if(!_||!f){for(var d,p=e.domParent,g=p.__layoutData,t=g.x,v=g.y,o=g.h,l=p.width,m=p.computedStyle,g=e,y=(g=g.isShadowRoot?g.hostRoot:g).prev;y;){if(y instanceof Qa||"absolute"!==y.computedStyle[Av]&&"none"!==y.computedStyle[Mv]){v=y.y+y.outerHeight,d=!0;break}y=y.prev}n||(d||(v+=m[kv]+m[Fv]+m[Dv]),t+=m[wv]+m[Bv]+m[Nv]);var E,x=e;if(!n)if(u){for(x=x.domParent;x&&x!==Q&&!Sm(x);)if(x.parent)x=x.parent;else if(x.host)break;if(p.__layoutAbs(x=x||Q,null,e),i){g=p.__modifyStruct(Q,k);return k+=g[1],I.push(g),p.__updateStruct(Q.__structs),void(C.renderMode===rt.SVG&&qm(p))}if(c)return void(r?(E=e.__modifyStruct(Q,k),k+=E[1],I.push(E),(h===a[Av]||"static"!==h&&"static"!==a[Av])&&s===a[Iv]||(p.__updateStruct(Q.__structs),C.renderMode===rt.SVG&&qm(p))):(_||f)&&(e.__zIndexChildren=null,E=e.__modifyStruct(Q,k),k+=E[1],I.push(E)));p.__updateStruct(Q.__structs),C.renderMode===rt.SVG&&qm(p)}else{if(e.__layout({x:t,y:v,w:l,h:o}),v+=e.outerHeight,r)x=e;else for(x=x.domParent;x&&x!==Q&&!Sm(x);)if(x.parent)x=x.parent;else if(x.host)break;x=x||Q,e instanceof ed&&e.__layoutAbs(x,{x:t,y:v,w:l,h:o})}for(var b=e;b&&b!==Q;)if("relative"===(m=(b=b.domParent).computedStyle)[Av]){var T=b,A=T.ox,T=T.oy;A&&e.__offsetX(A),T&&e.__offsetY(T);break}for(var M=(e=e.isShadowRoot?e.hostRoot:e).next;M&&!M.hasOwnProperty("__uniqueReflowId");){if("absolute"!==M.computedStyle[Av]){var O=v-M.y;if(O)for(;M&&!M.hasOwnProperty("__uniqueReflowId");){var R=M,S=(R=R instanceof Ss?R.shadowRoot:R).computedStyle;"absolute"!==S[Av]&&"none"!==S[Mv]&&R.__offsetY(O,!0,Pm),M=M.next}break}M=M.next}p.hasOwnProperty("__uniqueMergeOffsetId")||u&&_||(p.__uniqueMergeOffsetId=L++,w.push(p)),i||n?(n=p.__modifyStruct(Q,k),k+=n[1],I.push(n),C.renderMode===rt.SVG&&qm(p)):r?(r=e.__modifyStruct(Q,k),k+=r[1],I.push(r),(h===a[Av]||"static"!==h&&"static"!==a[Av])&&s===a[Iv]||(e.domParent.__updateStruct(Q.__structs),C.renderMode===rt.SVG&&qm(e.domParent))):(_||f)&&(e.__zIndexChildren=null,f=e.__modifyStruct(Q,k),k+=f[1],I.push(f))}});var et=[];w.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var e,r,i=t.flowChildren,n=t.absChildren,o=[],a=[],s=i.length,h=0;h<s;h++){var l=i[h],c=(l=l instanceof Ss?l.shadowRoot:l)instanceof Mf;!e&&c&&l.hasOwnProperty("__uniqueReflowId")&&(e=!0,r=h);var u=c&&l.currentStyle,_=c&&"inline"===u[Mv],f=c&&-1<["inlineBlock","inline-block"].indexOf(u[Mv]),d=l;if(!c||_||f){if(o.length&&a.length&&e){var p=Vf.getMergeMarginTB(a,o);if(p)for(var g=Math.max(r,h-o.length+1);g<s;g++)i[g].__offsetY(p,!0,Pm)}a=[],o=[]}if(c&&!_){var v,m,y,E=c&&"none"===u[Mv],x=void 0;if(!E&&l.flowChildren&&0===l.flowChildren.length&&(v=(y=l.computedStyle)[kv],m=y[Lv],f=y[Dv],_=y[Pv],c=y[Cv],u=y[Fv],y=y[Yv],f<=0&&_<=0&&c<=0&&u<=0&&y<=0&&(o.push(m),a.push(v),x=!0)),E||x){if(h===s-1){var b=Vf.getMergeMarginTB(a,o);if(b)for(var T=Math.max(r,h-o.length+1);T<s;T++)i[T].__offsetY(b,!0,Pm)}}else{x=l.computedStyle,l=x[kv],x=x[Lv];if(o.length&&(a.push(l),e)){var A=Vf.getMergeMarginTB(a,o);if(A)for(var M=Math.max(r,h-o.length+1);M<s;M++)i[M].__offsetY(A,!0,Pm)}a=[],o=[x]}}}var O=t.currentStyle,R=O[Cv],S=t===Q||t.isShadowRoot||"absolute"===O[Av]||"relative"===O[Av];if(R[1]===Am&&d){var C,R=t.height+t.computedStyle[Dv],I=d.y+d.outerHeight-t.y-R;if(I){t.__resizeY(I,Pm);for(var k=0,w=n.length;k<w;k++){var L=n[k],D=L.currentStyle,N=D[bv],P=D[Tv],D=D[Cv];if(N[1]===Am)if(P[1]===Am)for(var F=L.prev;F;){var B=F,Y=(B=B instanceof Ss?B.shadowRoot:B)instanceof Mf,H=Y&&B.currentStyle;if(!(Y&&"absolute"===H[Av])){B=B.y+B.outerHeight-L.y;B&&L.__offsetY(B,!0,Pm);break}F=F.prev}else P[1]===Mm?L.__offsetY(I,!0,Pm):P[1]===Om&&(G=(1-.01*P[0])*I,L.__offsetY(G,!0,Pm));else if(N[1]===Om)if(S){var G=.01*N[0]*I;L.__offsetY(G,!0,Pm)}else{if(!C)for(C=t.domParent;C&&C!==Q&&!C.isShadowRoot;){var W=C.currentStyle;if("absolute"===W[Av]||"relative"===W[Av])break;C=C.domParent}C.currentStyle[Cv][1]!==Mm&&(N=.01*N[0]*I,L.__offsetY(N,!0,Pm))}if(D[1]===Om)if(S)t.__layoutAbs(t,null,L);else{if(!C)for(C=t.domParent;C&&C!==Q&&!C.isShadowRoot;){var U=C.currentStyle;if("absolute"===U[Av]||"relative"===U[Av])break;C=C.domParent}et.push([t,C,L])}}return void Vf.offsetAndResizeByNodeOnY(t,Q,tt,I,et)}}for(var X=0,V=n.length;X<V;X++){var K=n[X],z=K.currentStyle,j=z[bv],z=z[Tv];if(j[1]===Am&&z[1]===Am)for(var $=K.prev;$;){var Z=$,q=(Z=Z instanceof Ss?Z.shadowRoot:Z)instanceof Mf,J=q&&Z.currentStyle;if(!(q&&"absolute"===J[Av])){Z=Z.y+Z.outerHeight-K.y;Z&&K.__offsetY(Z,!0,Pm);break}$=$.prev}}}),et.forEach(function(t){t[0].__layoutAbs(t[1],null,t[2])});var _=0,f=0,d=!0,p=Q.__structs;if(I.forEach(function(t){var e=Qt(t,2),t=e[0],e=e[1];if(d)d=!1,f=t[vm]+(t[mm]||0)+1,_+=e;else{for(var r=t[vm]+(t[mm]||0)+1+_,i=f;i<r;i++)p[i][vm]+=_;f=r,_+=e}}),_)for(var g=f,v=p.length;g<v;g++)p[g][vm]+=_;Vf.clearUniqueReflowId(tt)}}},{key:"__computeMeasure",value:function(e,r){vn.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},eh.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===rt.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===rt.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),n}(),$t=m.STYLE_KEY,ty=$t.STROKE_WIDTH,ey=$t.BOX_SHADOW,ry=$t.FONT_SIZE,iy=ue.isNil,ny=S.REM,oy=S.VW,ay=S.VH;function sy(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function hy(t,e){var r=0;return 2<=t.length&&r++,2<=e.length&&(r+=2),r}function ly(t){return t<0?t=0:1<t&&(t=1),t}function cy(t,e,r,i,n,o,a,s,h){var l,c,u,_,s=7<arguments.length&&void 0!==s?s:0,h=8<arguments.length&&void 0!==h?h:1;return(0<s||h<1)&&(3===a?(c=Qt(et.sliceBezier2Both([[t,e],n,o,[r,i]],s,h),4),t=(l=Qt(c[0],2))[0],e=l[1],n=c[1],o=c[2],r=(l=Qt(c[3],2))[0],i=l[1]):2===a?(c=Qt(et.sliceBezier2Both([[t,e],o,[r,i]],s,h),3),t=(l=Qt(c[0],2))[0],e=l[1],o=c[1],r=(c=Qt(c[2],2))[0],i=c[1]):1===a?(u=Qt(et.sliceBezier2Both([[t,e],n,[r,i]],s,h),3),t=(_=Qt(u[0],2))[0],e=_[1],n=u[1],r=(_=Qt(u[2],2))[0],i=_[1]):(t+=(u=Math.abs(t-r))*s,e+=(_=Math.abs(e-i))*s,r-=u*(1-h),i-=_*(1-h))),[t,e,r,i,n,o]}var Y=function(){t(M,N1);var s=e(M);function M(t,e){var r,i,n;if(_(this,M),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):iy(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):iy(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):iy(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):iy(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return ly(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__x1.length;o++)r.__start.push(0)}else iy(e.start)||(i=ly(parseFloat(e.start)||0),r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return ly(t=isNaN(t)?1:t)});for(var a=r.__end.length;a<r.__x1.length;a++)r.__end.push(1)}else iy(e.end)||(n=parseFloat(e.end),n=ly(n=isNaN(n)?1:n),r.__end=r.__x1.map(function(){return n}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],iy(e.x1)||(r.__x1=parseFloat(e.x1)||0),iy(e.y1)||(r.__y1=parseFloat(e.y1)||0),iy(e.x2)||(r.__x2=parseFloat(e.x2)||0),iy(e.y2)||(r.__y2=parseFloat(e.y2)||0),iy(e.start)||(r.__start=ly(parseFloat(e.start)||0)),iy(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=ly(t)),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return f(M,[{key:"buildCache",value:function(e,r,i){var n,o=this,a=this.width,s=this.height,h=this.__cacheProps,l=this.isMulti;return["x1","x2"].forEach(function(t){(iy(h[t])||i)&&(n=!0,h[t]=sy(o[t],e,a,l))}),["y1","y2"].forEach(function(t){(iy(h[t])||i)&&(n=!0,h[t]=sy(o[t],r,s,l))}),["controlA","controlB"].forEach(function(t){(iy(h[t])||i)&&(n=!0,h[t]=function e(t,r,i,n,o,a){if(a){if(t)return t.map(function(t){return e(t,r,i,n,o)})}else if(t&&2<=t.length)return[r+t[0]*n,i+t[1]*o];return[]}(o[t],e,r,a,s,l))}),["start","end"].forEach(function(t){(iy(h[t])||i)&&(n=!0,h[t]=o[t])}),n}},{key:"render",value:function(l,t,c,e,r,i){var u=this,n=P(N(M.prototype),"render",this).call(this,l,t,c,e,r,i);if(n.break)return n;c=n.ctx;var _,o,a,s,h=n.sx3,f=n.sy3,d=n.stroke,p=n.strokeWidth,g=n.strokeDasharray,v=n.strokeDasharrayStr,m=n.strokeLinecap,y=n.strokeLinejoin,E=n.strokeMiterlimit,x=n.dx,b=n.dy,T=this.__cacheProps,A=this.isMulti;return this.buildCache(h,f)&&l===rt.SVG&&(_="",A?T.x1.forEach(function(t,e){var r=T.x2[e],i=T.y1[e],n=T.y2[e],o=T.controlA[e],a=T.controlB[e],s=T.start[e],h=T.end[e],e=hy(o,a);0===s&&1===h||(t=(h=Qt(cy(t,i,r,i,o,a,e,s,h,T.len),6))[0],i=h[1],r=h[2],i=h[3],o=h[4],a=h[5]),_+=Tt.svgLine(t,i,r,n,o,a,e)}):(o=hy(T.controlA,T.controlB),a=T.x1,s=T.y1,t=T.x2,e=T.y2,r=T.controlA,i=T.controlB,h=T.start,f=T.end,0===h&&1===f||(a=(f=Qt(cy(a,s,t,e,r,i,o,h,f,T.len),6))[0],s=f[1],t=f[2],e=f[3],r=f[4],i=f[5]),_=Tt.svgLine(a,s,t,e,r,i,o)),T.d=_),l===rt.CANVAS||l===rt.WEBGL?d.forEach(function(t,e){var r,i,n,o,a,s=p[e],h=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(u.__preSetCanvas(l,c,{stroke:t,strokeWidth:s,strokeDasharray:g[e],strokeLinecap:m[e],strokeLinejoin:y[e],strokeMiterlimit:E[e]}),h&&(c.strokeStyle=t.v[0]),c.beginPath(),A?T.x1.forEach(function(t,e){var r=T.x2[e],i=T.y1[e],n=T.y2[e],o=T.controlA[e],a=T.controlB[e],s=T.start[e],h=T.end[e],e=hy(o,a);0===s&&1===h||(t=(h=Qt(cy(t,i,r,i,o,a,e,s,h,T.len),6))[0],i=h[1],r=h[2],i=h[3],o=h[4],a=h[5]),Tt.canvasLine(c,t,i,r,n,o,a,e,x,b)}):(r=hy(T.controlA,T.controlB),i=T.x1,n=T.y1,o=T.x2,a=T.y2,s=T.controlA,e=T.controlB,h=T.start,t=T.end,0===h&&1===t||(i=(t=Qt(cy(i,n,o,a,s,e,r,h,t,T.len),6))[0],n=t[1],o=t[2],a=t[3],s=t[4],e=t[5]),Tt.canvasLine(c,i,n,o,a,s,e,r,x,b)),c.stroke(),c.closePath())}):l===rt.SVG&&d.forEach(function(t,e){var r=p[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),r=[["d",T.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];u.__propsStrokeStyle(r,v[e],m[e],y[e],E[e]),u.addGeom("path",r)}),n}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.root,i=this.__sx3,n=this.__sy3,o=this.currentStyle,a=o[ty],o=o[ey];this.buildCache(i,n);var n=e.x1,s=e.y1,h=e.x2,l=e.y2,c=e.controlA,u=e.controlB,_=P(N(M.prototype),"bbox",this),f=0;a.forEach(function(t){f=t[1]===ny?Math.max(t[0]*r.computedStyle[ry]*.5,f):t[1]===oy?Math.max(t[0]*r.width*.01*.5,f):t[1]===ay?Math.max(t[0]*r.height*.01*.5,f):Math.max(.5*t[0],f)}),f+=1;var o=Qt(this.__spreadBbox(o),2),d=o[0],p=o[1];return d+=f,p+=f,t||(n=[n],h=[h],s=[s],l=[l],c=[c],u=[u]),n.forEach(function(t,e){var r,i=s[e],n=h[e],o=l[e],a=c[e],e=u[e];(iy(a)||a.length<2)&&(iy(e)||e.length<2)?(_[0]=Math.min(_[0],t-d),_[0]=Math.min(_[0],n-d),_[1]=Math.min(_[1],i-p),_[1]=Math.min(_[1],o-p),_[2]=Math.max(_[2],t+d),_[2]=Math.max(_[2],n+d),_[3]=Math.max(_[3],i+p),_[3]=Math.max(_[3],o+p)):iy(a)||a.length<2?(r=et.bboxBezier(t,i,e[0],e[1],n,o),_[0]=Math.min(_[0],r[0]-d),_[0]=Math.min(_[0],r[2]-d),_[1]=Math.min(_[1],r[1]-p),_[1]=Math.min(_[1],r[3]-p),_[2]=Math.max(_[2],r[0]+d),_[2]=Math.max(_[2],r[2]+d),_[3]=Math.max(_[3],r[1]+p),_[3]=Math.max(_[3],r[3]+p)):iy(e)||e.length<2?(r=et.bboxBezier(t,i,a[0],a[1],n,o),_[0]=Math.min(_[0],r[0]-d),_[0]=Math.min(_[0],r[2]-d),_[1]=Math.min(_[1],r[1]-p),_[1]=Math.min(_[1],r[3]-p),_[2]=Math.max(_[2],r[0]+d),_[2]=Math.max(_[2],r[2]+d),_[3]=Math.max(_[3],r[1]+p),_[3]=Math.max(_[3],r[3]+p)):(o=et.bboxBezier(t,i,a[0],a[1],e[0],e[1],n,o),_[0]=Math.min(_[0],o[0]-d),_[0]=Math.min(_[0],o[2]-d),_[1]=Math.min(_[1],o[1]-p),_[1]=Math.min(_[1],o[3]-p),_[2]=Math.max(_[2],o[0]+d),_[2]=Math.max(_[2],o[2]+d),_[3]=Math.max(_[3],o[1]+p),_[3]=Math.max(_[3],o[3]+p))}),_}}]),M}(),A=m.STYLE_KEY,uy=A.STROKE_WIDTH,_y=A.BOX_SHADOW,fy=A.FONT_SIZE,dy=ue.isNil,py=S.REM,gy=S.VW,vy=S.VH;function my(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function yy(t){return t<0?t=0:1<t&&(t=1),t}function Ey(t,e){var r=[],i=0,n=[];if(e)i=[],t.forEach(function(t){t=Ey(t);r.push(t.list),i.push(t.total),n.push([0].concat(t.increase))});else if(Array.isArray(t)){i=0,n.push(0);for(var o=0,a=0,s=t.length;a<s;a++){var h=t[a];if(Array.isArray(h)){o=a;break}}for(var l=t[o],c=o+1,u=t.length;c<u;c++){var _,f,d,p=t[c];Array.isArray(p)&&(2===p.length?(_=Math.abs(p[0]-l[0]),f=Math.abs(p[1]-l[1]),f=Math.sqrt(Math.pow(_,2)+Math.pow(f,2)),r.push(f),i+=f,n.push(i),l=p):4===p.length?(d=et.bezierLength([l,[p[0],p[1]],[p[2],p[3]]],2),r.push(d),i+=d,n.push(i),l=[p[2],p[3]]):6===p.length&&(d=et.bezierLength([l,[p[0],p[1]],[p[2],p[3]],[p[4],p[5]]],3),r.push(d),i+=d,n.push(i),l=[p[4],p[5]]))}}return{list:r,total:i,increase:n}}function xy(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var n=r+(i-r>>1);return t[n]===e?n:t[n]>e?xy(t,e,r,Math.max(n-1,r)):xy(t,e,Math.min(n+1,i),i)}function by(t,e,r,i){var n=2<arguments.length&&void 0!==r?r:0,o=3<arguments.length&&void 0!==i?i:1;if(0===n&&1===o)return t;if(o<=n)return[];var a=0,s=t.length-1;0<n&&(a=xy(e.increase,n*e.total,a,s)),o<1&&(s=xy(e.increase,o*e.total,a,s)),t=ue.clone(t);var h,l,c,u,_,f=1;return(o*=e.total)>e.increase[s]&&(r=t[s].slice(t[s].length-2),l=t[s+1],i=e.list[s],f=c=(o-e.increase[s])/i,2===l.length?(i=Math.abs(l[0]-r[0]),h=Math.abs(l[1]-r[1]),l[0]<r[0]&&(i=-i),l[1]<r[1]&&(h=-h),t[s+1]=[l[1]-(1-c)*i,l[1]-(1-c)*h]):4===l.length?(h=et.sliceBezier([r,[l[0],l[1]],[l[2],l[3]]],c),t[s+1]=[h[1][0],h[1][1],h[2][0],h[2][1]]):6===l.length&&(u=et.sliceBezier([r,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],c),t[s+1]=[u[1][0],u[1][1],u[2][0],u[2][1],u[3][0],u[3][1]])),(n*=e.total)>e.increase[a]&&(l=t[a].slice(t[a].length-2),c=t[a+1],u=e.list[a],a===s&&1!==f&&(u*=f),e=(n-e.increase[a])/u,2===c.length?(u=Math.abs(c[0]-l[0]),_=Math.abs(c[1]-l[1]),c[0]<l[0]&&(u=-u),c[1]<l[1]&&(_=-_),t[a]=[l[0]+e*u,l[1]+e*_]):4===c.length?(_=et.sliceBezier([[c[2],c[3]],[c[0],c[1]],l],1-e).reverse(),t[a]=_[0],t[a+1]=[_[1][0],_[1][1],_[2][0],_[2][1]]):6===c.length&&(e=et.sliceBezier([[c[4],c[5]],[c[2],c[3]],[c[0],c[1]],l],1-e).reverse(),t[a]=e[0],t[a+1]=[e[1][0],e[1][1],e[2][0],e[2][1],c[4],c[5]])),s<t.length-2&&(t=t.slice(0,s+2)),t=0<a?t.slice(a):t}var Ty=function(){t(h,N1);var s=e(h);function h(t,e){var r,i,n;if(_(this,h),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return yy(parseFloat(t)||0)});for(var o=r.__start.length;o<r.__points.length;o++)r.__start.push(0)}else dy(e.start)||(i=yy(parseFloat(e.start)||0),r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return yy(t=isNaN(t)?1:t)});for(var a=r.__end.length;a<r.__points.length;a++)r.__end.push(1)}else dy(e.end)||(n=parseFloat(e.end),n=yy(n=isNaN(n)?1:n),r.__end=r.__points.map(function(){return n}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,dy(e.start)||(r.__start=yy(parseFloat(e.start)||0)),dy(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=yy(t));return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return f(h,[{key:"__getPoints",value:function(o,a,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var i=[],n=0;n<r;n++)n%2==0?i.push(o+t[n]*s):i.push(a+t[n]*h);return i}})}},{key:"__reprocessing",value:function(t){return t}},{key:"__needRebuildSE",value:function(){}},{key:"buildCache",value:function(e,r){var t,i,n,o=this,a=this.width,s=this.height,h=this.points,l=this.controls,c=this.start,u=this.end,_=this.__cacheProps,f=this.isMulti;return dy(_.points)&&(t=!0,_.points=f?h.map(function(t){if(Array.isArray(t))return o.__getPoints(e,r,a,s,t)}):this.__getPoints(e,r,a,s,h)),dy(_.controls)&&(t=!0,_.controls=f?l.map(function(t){return Array.isArray(t)?o.__getPoints(e,r,a,s,t,!0):t}):this.__getPoints(e,r,a,s,l,!0)),dy(_.start)&&(i=!0,_.start=c),dy(_.end)&&(i=!0,_.end=u),this.__needRebuildSE(_)&&(i=!0),t&&(u=_.points,n=_.controls,_.list2=f?u.map(function(t,e){var r=n[e];if(Array.isArray(t))return t.map(function(t,e){return e?my(t,r&&r[e-1]):t})}):u.map(function(t,e){return e?my(t,n[e-1]):t}),_.len=Ey(_.list2,f)),(t||i)&&(_.list=f?_.list2.map(function(t,e){if(Array.isArray(t)){var r=_.len;return by(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},_.start[e],_.end[e])}}):by(_.list2,_.len,_.start,_.end),_.list=this.__reprocessing(_.list,f)),t||i}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(h.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.sx3,o.sy3),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t,e,r,i,n,o,u,a,_,f,s,d;return this.__bbox||(t=this.isMulti,e=this.__cacheProps,r=this.root,i=this.__sx3,n=this.__sy3,o=(s=this.currentStyle)[uy],s=s[_y],this.buildCache(i,n),u=P(N(h.prototype),"bbox",this),a=0,o.forEach(function(t){a=t[1]===py?Math.max(t[0]*r.computedStyle[fy]*.5,a):t[1]===gy?Math.max(t[0]*r.width*.01*.5,a):t[1]===vy?Math.max(t[0]*r.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=Qt(this.__spreadBbox(s),2),_=s[0],f=s[1],_+=a,f+=a,s=e.points,d=e.controls,t||(s=[s],d=[d]),s.forEach(function(t,e){if(!(!t||t.length<2||t[0].length<2||t[1].length<2))for(var r=d[e]||[],e=Qt(t[0],2),i=e[0],n=e[1],o=1,a=t.length;o<a;o++){var s=Qt(t[o],2),h=s[0],l=s[1],c=r[o-1];c&&4===c.length?(s=et.bboxBezier(i,n,c[0],c[1],c[2],c[3],h,l),u[0]=Math.min(u[0],s[0]-_),u[1]=Math.min(u[1],s[1]-f),u[2]=Math.max(u[2],s[2]+_),u[3]=Math.max(u[3],s[3]+f)):c&&2===c.length?(c=et.bboxBezier(i,n,c[0],c[1],h,l),u[0]=Math.min(u[0],c[0]-_),u[1]=Math.min(u[1],c[1]-f),u[2]=Math.max(u[2],c[2]+_),u[3]=Math.max(u[3],c[3]+f)):(u[0]=Math.min(u[0],i-_),u[1]=Math.min(u[1],n-f),u[2]=Math.max(u[2],i+_),u[3]=Math.max(u[3],n+f)),i=h,n=l}}),this.__bbox=u),this.__bbox}}]),h}(),ft=function(){t(a,Ty);var r=e(a);function a(t,e){return _(this,a),t=r.call(this,t,e),e.booleanOperations&&(t.__booleanOperations=e.booleanOperations),t}return f(a,[{key:"__getPoints",value:function(t,e,r,i,n,o){n=P(N(a.prototype),"__getPoints",this).call(this,t,e,r,i,n,o);return o||n.push(n[0]),n}},{key:"__reprocessing",value:function(o,t){if(!t)return o;var a=this.booleanOperations,s=o.length;if(!Array.isArray(a)&&a)for(var e=a,a=[a],r=1;r<s-1;r++)a.push(e);if(Array.isArray(a)&&a.length){t=function(){for(var t,e=[],r=0;r<s-1;r++){var i=o[r],n=o[r+1];switch(a[r]){case"intersection":i&&i.length&&n&&n.length?wo([i],[n]).forEach(function(t){e.push(t[0])}):e.push(null),t=!0;break;case"union":i&&i.length||n&&n.length?i&&i.length?n&&n.length?Co([i],[n]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(n):e.push(null),t=!0;break;case"diff":i&&i.length?n&&n.length?Io([i],[n]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(null),t=!0;break;case"xor":i&&i.length||n&&n.length?i&&i.length?n&&n.length?ko([i],[n]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(n):e.push(null),t=!0;break;default:e.push(o[r]),t=!1}}return t||e.push(o[s-1]),{v:e}}();if("object"===xt(t))return t.v}return o}},{key:"__needRebuildSE",value:function(t){if(ue.isNil(t.booleanOperations))return t.booleanOperations=!0}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),a}(),sr=m.STYLE_KEY,Ay=sr.STROKE_WIDTH,My=sr.BOX_SHADOW,Oy=sr.FONT_SIZE,Ry=ue.isNil,Sy=et.sectorPoints,Cy=S.REM,Iy=S.VW,ky=S.VH;function wy(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var qt=function(){t(O,N1);var r=e(O);function O(t,e){return _(this,O),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return wy(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return wy(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return wy(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,Ry(e.begin)||(t.__begin=wy(e.begin,0)),Ry(e.end)||(t.__end=wy(e.end,0)),Ry(e.r)||(t.__r=wy(e.r,1)),Ry(e.edge)||(t.__edge=!!e.edge),Ry(e.closure)||(t.__closure=!!e.closure)),t}return f(O,[{key:"buildCache",value:function(i,n,t){var e,o=this.width,r=this.begin,a=this.end,s=this.r,h=this.edge,l=this.closure,c=this.__cacheProps,u=this.isMulti;return(Ry(c.begin)||t)&&(e=!0,c.begin=(r||0)%360),(Ry(c.end)||t)&&(e=!0,c.end=(a||0)%360),(Ry(c.r)||t)&&(e=!0,c.r=u?s.map(function(t){return t*o*.5}):s*o*.5),s=c.r,(Ry(c.edge)||t)&&(e=!0,c.edge=h),(Ry(c.closure)||t)&&(e=!0,c.closure=l),e&&(u?(c.list=[],c.sList=[],r.forEach(function(t,e){var r=Ry(s[e])?.5*o:s[e],r=Sy(i,n,r,parseFloat(t||0)%360,parseFloat(a[e]||0)%360),t=r.slice(0);l[e]?(r.push(r[0].slice(0)),h&&t.push(t[0].slice(0))):(r.unshift([i,n]),r.push([i,n]),h&&(t.unshift([i,n]),t.push([i,n]))),c.list.push(r),c.sList.push(t)})):(r=(u=Sy(i,n,s,parseFloat(r||0),parseFloat(a||0))).slice(0),l?(u.push(u[0].slice(0)),h&&r.push(r[0].slice(0))):(u.unshift([i,n]),u.push([i,n]),h&&(r.unshift([i,n]),r.push([i,n]))),c.list=u,c.sList=r)),e}},{key:"render",value:function(t,e,r,i,n,o){n=P(N(O.prototype),"render",this).call(this,t,e,r,i,n,o);if(n.break)return n;this.buildCache(n.cx,n.cy),r=n.ctx;var a=n.fill,s=n.fillRule,h=n.stroke,l=n.strokeWidth,c=n.strokeDasharray,u=n.strokeDasharrayStr,_=n.strokeLinecap,f=n.strokeLinejoin,d=n.strokeMiterlimit,p=n.dx,g=n.dy,o=this.__cacheProps,v=o.list,m=o.sList,y=this.isMulti;if(a.length<=1&&h.length<=1){o={fill:a[0],fillRule:s[0],stroke:h[0],strokeWidth:l[0],strokeDasharray:c[0],strokeDasharrayStr:u[0],strokeLinecap:_[0],strokeLinejoin:f[0],strokeMiterlimit:d[0],dx:p,dy:g};this.__renderOneSector(t,r,y,v,m,o)}else{for(var E=0,x=a.length;E<x;E++){var b=a[E];b&&(b={fill:b,fillRule:s[E],dx:p,dy:g},this.__renderOneSector(t,r,y,v,m,b))}for(var T=0,A=h.length;T<A;T++){var M=h[T];M&&(M={stroke:M,strokeWidth:l[T],strokeDasharray:c[T],strokeDasharrayStr:u[T],strokeLinecap:_[T],strokeLinejoin:f[T],strokeMiterlimit:d[T],dx:p,dy:g},this.__renderOnePolygon(t,r,y,v,m,M))}}return n}},{key:"__renderOneSector",value:function(t,e,r,i,n,o){var a=o.fill,s=o.stroke,h=o.strokeWidth,l="conic"===a.k,c="conic"===s.k,u="radial"===a.k&&Array.isArray(a.v),_=0<h&&"radial"===s.k&&Array.isArray(s.v);l||c?(l?this.__conicGradient(t,e,i,r,o):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0),0<h&&c?Le.warn("Stroke style can not use conic-gradient"):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0)):u||_?(u?this.__radialEllipse(t,e,i,r,o,"fill"):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0),0<h&&_?(Le.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke=o.stroke.v[0],this.__drawPolygon(t,e,r,n,o,!1,!0)):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0)):(a&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!0,!1),0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,o,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,n,o,a,s,h){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,o,a,s,h),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<n&&(n=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(n,o,a,s,h),this.addGeom("path",n)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var e,t,r,i,n,o,a,s,h,l,c;return this.__bbox||(l=this.isMulti,s=this.__cacheProps,e=this.root,t=this.__sx3,n=this.__sy3,r=this.width,o=this.height,c=(h=this.currentStyle)[Ay],h=h[My],this.buildCache(t=t+.5*r,r=n+.5*o),n=0,n=l?(i=0,s.r.forEach(function(t){i=Math.max(t,i)}),i):s.r,o=P(N(O.prototype),"bbox",this),a=0,c.forEach(function(t){a=t[1]===Cy?Math.max(t[0]*e.computedStyle[Oy]*.5,a):t[1]===Iy?Math.max(t[0]*e.width*.01*.5,a):t[1]===ky?Math.max(t[0]*e.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(l=Qt(this.__spreadBbox(h),2))[0],c=l[1],h=t+n+(s+=a),l=r-n-(c+=a),c=r+n+c,o[0]=Math.min(o[0],t-n-s),o[1]=Math.min(o[1],l),o[2]=Math.max(o[2],h),o[3]=Math.max(o[3],c),this.__bbox=o),this.__bbox}}]),O}(),Jt=m.STYLE_KEY,Ly=Jt.STROKE_WIDTH,Dy=Jt.BOX_SHADOW,Ny=Jt.FONT_SIZE,Py=ue.isNil,Fy=S.REM,By=S.VW,Yy=S.VH;function Hy(t,e,r,i,n,o){var a=4<arguments.length&&void 0!==n?n:0,s=5<arguments.length&&void 0!==o?o:0;if(0===a||0===s)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];n=a*et.H,o=s*et.H;return[[t+a,e],[t+r-a,e],[t+r+n-a,e,t+r,e+s-o,t+r,e+s],[t+r,e+i-s],[t+r,e+i+o-s,t+r+n-a,e+i,t+r-a,e+i],[t+a,e+i],[t+a-n,e+i,t,e+i+o-s,t,e+i-s],[t,e+s],[t,e+s-o,t+a-n,e,t+a,e]]}function Gy(t){return t=parseFloat(t),t=isNaN(t)?0:t}var Zt=function(){t(l,N1);var r=e(l);function l(t,e){return _(this,l),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map(Gy)),Array.isArray(e.ry)&&(t.__ry=e.ry.map(Gy))):(t.__rx=t.__ry=0,Py(e.rx)||(t.__rx=Gy(e.rx)),Py(e.ry)||(t.__ry=Gy(e.ry))),t}return f(l,[{key:"buildCache",value:function(r,i,t){var e,n,o=this.width,a=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return(Py(l.rx)||t)&&(e=!0,l.rx=c?s.map(function(t){return Math.min(t,.5)*o}):Math.min(s,.5)*o),(Py(l.ry)||t)&&(e=!0,l.ry=c?s.map(function(t){return Math.min(t,.5)*a}):Math.min(h,.5)*a),e&&(h=l.rx,n=l.ry,l.list=c?h.map(function(t,e){return Hy(r,i,o,a,t,n[e])}):Hy(r,i,o,a,h,n)),e}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(l.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.sx3,o.sy3),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var e,t,r,i,n,o,a,s,h;return this.__bbox||(e=this.root,t=this.__sx3,r=this.__sy3,i=this.width,n=this.height,h=(o=this.currentStyle)[Ly],s=o[Dy],this.buildCache(t,r),o=P(N(l.prototype),"bbox",this),a=0,h.forEach(function(t){a=t[1]===Fy?Math.max(t[0]*e.computedStyle[Ny]*.5,a):t[1]===By?Math.max(t[0]*e.width*.01*.5,a):t[1]===Yy?Math.max(t[0]*e.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(h=Qt(this.__spreadBbox(s),2))[0],h=h[1],s+=a,h+=a,o[0]=Math.min(o[0],t-s),o[1]=Math.min(o[1],r-h),o[2]=Math.max(o[2],t+i+s),o[3]=Math.max(o[3],r+n+h),this.__bbox=o),this.__bbox}}]),l}(),fr=m.STYLE_KEY,Wy=fr.STROKE_WIDTH,Uy=fr.BOX_SHADOW,Xy=fr.FONT_SIZE,Vy=ue.isNil,Ky=S.REM,zy=S.VW,jy=S.VH;function $y(t){return t=parseFloat(t),t=isNaN(t)?1:t}var $t=function(){t(u,N1);var r=e(u);function u(t,e){return _(this,u),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map($y):Vy(e.r)||(t.__r=$y(e.r))):(t.__r=1,Vy(e.r)||(t.__r=$y(e.r))),t}return f(u,[{key:"buildCache",value:function(e,r,t){var i=this.width,n=this.r,o=this.__cacheProps,a=this.isMulti;(Vy(o.r)||t)&&(a?(o.r=n.map(function(t){return t*i*.5}),o.list=o.r.map(function(t){return et.ellipsePoints(e,r,t)})):(o.r=n*i*.5,o.list=et.ellipsePoints(e,r,o.r)))}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(u.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.cx,o.cy),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var e,t,r,i,n,o,a,s,h,l,c;return this.__bbox||(l=this.isMulti,s=this.__cacheProps,e=this.root,t=this.__sx3,n=this.__sy3,r=this.width,o=this.height,c=(h=this.currentStyle)[Wy],h=h[Uy],this.buildCache(t=t+.5*r,r=n+.5*o),n=0,n=l?(i=0,s.r.forEach(function(t){i=Math.max(t,i)}),i):s.r,o=P(N(u.prototype),"bbox",this),a=0,c.forEach(function(t){a=t[1]===Ky?Math.max(t[0]*e.computedStyle[Xy]*.5,a):t[1]===zy?Math.max(t[0]*e.width*.01*.5,a):t[1]===jy?Math.max(t[0]*e.height*.01*.5,a):Math.max(.5*t[0],a)}),a+=1,s=(l=Qt(this.__spreadBbox(h),2))[0],c=l[1],h=t+n+(s+=a),l=r-n-(c+=a),c=r+n+c,o[0]=Math.min(o[0],t-n-s),o[1]=Math.min(o[1],l),o[2]=Math.max(o[2],h),o[3]=Math.max(o[3],c),this.__bbox=o),this.__bbox}}]),u}(),A=m.STYLE_KEY,Zy=A.STROKE_WIDTH,qy=A.BOX_SHADOW,Jy=A.FONT_SIZE,Qy=ue.isNil,tE=S.REM,eE=S.VW,rE=S.VH;function iE(t){return t=parseFloat(t),t=isNaN(t)?1:t}var sr=function(){t(d,N1);var r=e(d);function d(t,e){return _(this,d),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(iE):Qy(e.rx)||(t.__rx=[iE(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(iE):Qy(e.ry)||(t.__ry=[iE(e.ry)])):(t.__rx=1,Qy(e.rx)||(t.__rx=iE(e.rx)),t.__ry=1,Qy(e.ry)||(t.__ry=iE(e.ry))),t}return f(d,[{key:"buildCache",value:function(r,i,t){var e,n,o=this.width,a=this.height,s=this.rx,h=this.ry,l=this.__cacheProps,c=this.isMulti;return(Qy(l.rx)||t)&&(e=!0,l.rx=c?s.map(function(t){return t*o*.5}):s*o*.5),(Qy(l.ry)||t)&&(e=!0,l.ry=c?h.map(function(t){return t*a*.5}):h*a*.5),e&&(h=l.rx,n=l.ry,l.list=c?h.map(function(t,e){return et.ellipsePoints(r,i,t,n[e])}):et.ellipsePoints(r,i,h,n)),e}},{key:"render",value:function(t,e,r,i,n,o){o=P(N(d.prototype),"render",this).call(this,t,e,r,i,n,o);return o.break||(this.buildCache(o.cx,o.cy),r=o.ctx,this.__renderPolygon(t,r,o)),o}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,e,t,i,n,o,a,s,h,l,c,u,_,f;return this.__bbox||(c=this.isMulti,r=this.__cacheProps,e=this.root,i=this.__sx3,h=this.__sy3,n=this.width,_=this.height,f=(t=this.currentStyle)[Zy],u=t[qy],this.buildCache(t=i+.5*n,i=h+.5*_),s=n=0,s=c?(a=o=0,r.rx.forEach(function(t,e){o=Math.max(t,o),a=Math.max(s,r.ry[e])}),n=o,a):(n=r.rx,r.ry),h=P(N(d.prototype),"bbox",this),l=0,f.forEach(function(t){l=t[1]===tE?Math.max(t[0]*e.computedStyle[Jy]*.5,l):t[1]===eE?Math.max(t[0]*e.width*.01*.5,l):t[1]===rE?Math.max(t[0]*e.height*.01*.5,l):Math.max(.5*t[0],l)}),l+=1,c=(_=Qt(this.__spreadBbox(u),2))[0],f=_[1],u=t+n+(c+=l),_=i-s-(f+=l),f=i+s+f,h[0]=Math.min(h[0],t-n-c),h[1]=Math.min(h[1],_),h[2]=Math.max(h[2],u),h[3]=Math.max(h[3],f),this.__bbox=h),this.__bbox}}]),d}(),nE={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},oE={os:"offset",e:"easing"},aE={value:"v",options:"o"},sE={},hE={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},lE={};lr.DOM_KEY_SET.concat(lr.GEOM_KEY_SET).forEach(function(t){var e;nE.hasOwnProperty(t)?oE[nE[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),nE[t]=e,oE[e]=t)}),Object.keys(aE).forEach(function(t){sE[aE[t]]=t}),Object.keys(hE).forEach(function(t){lE[hE[t]]=t});var Jt={fullCssProperty:nE,abbrCssProperty:oE,fullAnimate:aE,abbrAnimate:sE,fullAnimateOption:hE,abbrAnimateOption:lE},cE=Vt.TYPE_VD,uE=Vt.TYPE_GM,_E=Vt.TYPE_CP,fE=ue.isNil,dE=ue.isFunction,pE=ue.isPrimitive,gE=ue.clone,vE=ue.extend,mE=Jt.abbrCssProperty,yE=Jt.abbrAnimateOption,EE=Jt.abbrAnimate;function xE(i,n){i&&Object.keys(i).forEach(function(t){var e,r;0===t.indexOf("var-")?(e=t.slice(4),n.hasOwnProperty(e)&&(r=n[e],i["var-"+r]=i[t])):n.hasOwnProperty(t)&&(r=n[t],i[r]=i[t],delete i[t])})}function bE(h,l){var t;h&&l&&(h.hasOwnProperty("vars")?(t=h.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&l.hasOwnProperty(e))for(var i=h,n=0,o=r.length;n<o;n++){var a=r[n];if(!i.hasOwnProperty(a)&&n!==o-1)return void Le.error("Slot miss "+a);if(n===o-1){var s=l[e];if(void 0===s)return;dE(s)&&(s=s(i(a))),i[a]=s}else i=i[a]}})):Object.keys(h).forEach(function(t){if(0===t.indexOf("var-")){var e=h[t];if(e){var r=t.slice(4);if(r&&e.id&&l.hasOwnProperty(e.id)){var i=l[e.id];if(void 0!==i){var n=h;if(-1<r.indexOf(".")){for(var o=r.split("."),a=o.length,s=0;s<a-1;s++){if(!n[r=o[s]])return void Le.warn("parseJson vars is not exist: "+e.id+", "+t+", "+o.slice(0,s).join("."));n=n[r]}r=o[a-1]}dE(i)&&(i=i(e)),n[r]=i}}}}}))}function TE(e,t,r,i,n){var o=4<arguments.length&&void 0!==n?n:{};if(pE(t)||t instanceof R||t instanceof Ss)return t;if(Array.isArray(t))return t.map(function(t){return TE(e,t,r,i,o)});var a=t.libraryId;if(!fE(a)){var s=o[a];if(!s)throw new Error("Link library miss id: "+a);!function(e,r){e.tagName=r.tagName,e.props=gE(r.props),e.children=r.children,e.library=r.library,Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),e.libraryId=null;var t,i,n=e.init;n&&(i=(t=e.props=e.props||{}).style,vE(t,n),i&&(vE(i,n.style),t.style=i),e.init=null)}(t,s),t.libraryId=null}var h,l,c,u=t.library;Array.isArray(u)&&(o={},u.forEach(function(t){!function(t,e){var r=t.id;if(fE(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}(t,o)}),h=t,l=o,(c=i.vars)&&(h.hasOwnProperty("vars")?(_=h.vars,Array.isArray(_)||(_=[_]),Array.isArray(_)&&_.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&c.hasOwnProperty(e)&&"library"===r[0])for(var i=l,n=1,o=r.length;n<o;n++){var a,s,h=r[n];if(!i.hasOwnProperty(h)&&n!==o-1)return void Le.error("Library slot miss "+h);n===o-1?(a=c[e],dE(a)&&(a=a(i(h))),s=i[h],i[h]=1===n?Object.assign({id:s.id,tagName:s.tagName},a):a):i=i[h]}})):Object.keys(h).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=h[t],delete h[t],!e||(r=t.slice(12))&&e.id&&c.hasOwnProperty(e.id)&&(t=c[e.id],(t=dE(t)?t(e):t)&&t.tagName&&(l[r]=Object.assign({id:r},t))))})),t.library=null);var n=t.tagName,a=t.props,s=void 0===a?{}:a,u=t.children,_=void 0===u?[]:u,a=t.animate,u=void 0===a?[]:a;if(!n)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var f,d,a=s.style;if(!1!==i.abbr&&xE(a,mE),bE(a,i.vars),bE(s,i.vars),bE(t,i.vars),!Array.isArray(_))throw new Error("children must be an array");return n="$"===n.charAt(0)?e.createGm(n,s):/^[A-Z]/.test(n)?(t=Ss.getRegister(n),e.createCp(t,s,_.map(function(t){return t&&-1<[cE,uE,_E].indexOf(t.$$type)?t:TE(e,t,r,i,o)}))):e.createVd(n,s,_.map(function(t){return t&&-1<[cE,uE,_E].indexOf(t.$$type)?t:TE(e,t,r,i,o)})),u&&(Array.isArray(u)?(u.forEach(function(t){!1!==i.abbr&&xE(t,EE);var e=t.value,t=t.options;Array.isArray(e)&&e.length&&(d=!0,e.forEach(function(t){!1!==i.abbr&&xE(t,mE),bE(t,i.vars)})),t&&(!1!==i.abbr&&xE(t,yE),bE(t,i.vars))}),d&&(f={animate:u,target:n})):(!1!==i.abbr&&xE(u,EE),s=u.value,_=u.options,Array.isArray(s)&&s.length&&(s.forEach(function(t){!1!==i.abbr&&xE(t,mE),bE(t,i.vars)}),f={animate:u,target:n}),_&&(!1!==i.abbr&&xE(_,yE),bE(_,i.vars)))),f&&r.push(f),n}var AE={parse:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},n=(e=ue.clone(e)).fonts;n&&(n=!Array.isArray(n)?[n]:n).forEach(function(t){var e=t.fontFamily,t=t.data;e&&t&&bt.register(e,t)}),!1===e.abbr&&(i.abbr=!1),!1!==i.abbr&&Le.warn("Abbr in json is deprecated"),Le.isDom(r)||(i=r||{},r=null);var o=[],n=TE(t,e,o,i);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg");e=i.controller instanceof Op?i.controller:n.animateController;t.render(n,r),o.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(o),e.__playAuto()):(e.__records2=e.__records2.concat(o),e.init(e.__records2,e.list2))}else o.length&&(n.__animateRecords={options:i,list:o,controller:i.controller instanceof Op?i.controller:null});return n},loadAndParse:function(n,e,r,i){var t=e.fonts,o=e.components,a=e.imgs,s=[],h=[],l=[];t&&(t=!Array.isArray(t)?[t]:t).forEach(function(t){t=t.url;t&&s.push(t)}),o&&(o=!Array.isArray(o)?[o]:o).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&n.Component.hasRegister(e)&&!i||r&&h.push(t)}),a&&(a=!Array.isArray(a)?[a]:a).forEach(function(t){t=t.url;t&&l.push(t)});var c=s.length,u=h.length,_=l.length;if(!(c||u||_)){a=AE.parse(n,e,r,i);return i&&ue.isFunction(i.callback)&&i.callback(a),a}function f(){var t;d===c+u+_&&(t=AE.parse(n,e,r,i),i&&ue.isFunction(i.callback)&&i.callback(t))}var d=0;n.inject.loadFont(s,function(){d+=c,f()}),n.inject.loadComponent(h.map(function(t){return t.url}),function(){d+=u,h.forEach(function(t){t=t.tagName;t&&window[t]&&!n.Component.hasRegister(t)&&n.Component.register(t,window[t])}),f()}),n.inject.measureImg(l,function(){d+=_,f()})},abbr:Jt},fr={css:vn,reset:lr,unit:S,font:bt,abbr:_r},A={Animation:Oc,Controller:Op,easing:uh,frame:eh},Jt={level:ba,change:Rr,Page:Ln,Cache:_a};N1.register("$line",Y),N1.register("$polyline",Ty),N1.register("$polygon",ft),N1.register("$sector",qt),N1.register("$rect",Zt),N1.register("$circle",$t),N1.register("$ellipse",sr);m={version:"0.65.4",render:function(t,e){if(!(t instanceof Qm))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,n=arguments.length;i<n;i++)r.push(arguments[i]);return ue.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new Qm(t,e,r);if(Nf.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:Vt.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:Vt.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:Vt.TYPE_CP}},parse:function(t,e,r){return AE.parse(this,t,e,r)},loadAndParse:function(t,e,r){return AE.loadAndParse(this,t,e,r)},mode:rt,Component:Ss,Node:R,Text:Qa,Geom:N1,Xom:Mf,Dom:ed,Img:Xd,Root:Qm,Event:bs,util:ue,inject:Le,style:fr,parser:AE,animate:A,math:y,builder:Es,updater:ip,refresh:Jt,enums:m,set debug(t){_e.flag=!!t}};return Es.ref({Xom:Mf,Dom:ed,Img:Xd,Geom:N1,Component:Ss}),"undefined"!=typeof window?window.karas=m:"undefined"!=typeof self&&(self.karas=m),m});
//# sourceMappingURL=index.min.js.map
