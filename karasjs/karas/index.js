!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=N(r),e=(t=i?(t=N(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}}function P(){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(i)return i=Object.getOwnPropertyDescriptor(i,e),i.get?i.get.call(arguments.length<3?t:r):i.value}).apply(this,arguments)}function Bt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,n,a=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(a.push(i.value),!e||a.length!==e);o=!0);}catch(t){s=!0,n=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return a}}(t,e)||h(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||h(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var u={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,WRITING_MODE:87,FILL:88,STROKE:89,STROKE_WIDTH:90,STROKE_DASHARRAY:91,STROKE_DASHARRAY_STR:92,STROKE_LINECAP:93,STROKE_LINEJOIN:94,STROKE_MITERLIMIT:95,FILL_RULE:96,MATRIX:97,BORDER_TOP:98,BORDER_RIGHT:99,BORDER_BOTTOM:100,BORDER_LEFT:101,TRANSLATE_PATH:102},g={};function x(t){return g[t]=g[t]||t.toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),g[t]}var v={};var m={},E={},b={},T=(Object.keys(u).forEach(function(t){var e=u[t],t=x(m[e]=t);E[e]=t,b[t]=e}),{STYLE_KEY:u,STYLE_R_KEY:m,STYLE_RV_KEY:E,STYLE_V_KEY:b,style2Lower:x,style2Upper:function(t){return v[t]=v[t]||t.replace(/([a-z\d_])([A-Z])/g,function(t,e,r){return e+"_"+r}).toUpperCase(),v[t]},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_COMPONENT:3,UPDATE_OVERWRITE:4,UPDATE_KEYS:5,UPDATE_LIST:6,UPDATE_CONFIG:7,UPDATE_ADD_DOM:8,UPDATE_REMOVE_DOM:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_PLAY_CB:8,I_TARGET:9,I_ROOT:10,I_FRAMES:11,I_FRAMES_R:12,I_CURRENT_TIME:13,I_NEXT_TIME:14,I_STYLE:15,I_DURATION:16,I_ITERATIONS:17,I_FILL:18,I_PLAYBACK_RATE:19,I_PLAY_COUNT:20,I_PLAY_STATE:21,I_DESTROYED:22,I_START_TIME:23,I_FPS_TIME:24,I_EASING:25,I_ENTER_FRAME:26,I_DELAY:27,I_END_DELAY:28,I_KEYS:29,I_ORIGIN_STYLE:30,I_CURRENT_FRAMES:31,I_CURRENT_FRAME:32,I_SPF_LIMIT:33,I_FPS:34,I_DIRECTION:35,I_FIRST_ENTER:36,I_STAY_BEGIN:37,I_STAY_END:38,I_IS2:39,I_END_TIME:40,I_NODE_CONFIG:41,I_ROOT_CONFIG:42,I_OUT_BEGIN_DELAY:43,I_TIME_STAMP:44},ELLIPSIS:"â€¦"}),A=T.STRUCT_KEY,M=A.STRUCT_NODE,R=A.STRUCT_INDEX,O=A.STRUCT_CHILD_INDEX,S=A.STRUCT_LV,A=T.NODE_KEY,C=A.NODE_IS_DESTROYED,I=A.NODE_STRUCT,w=function(){function t(){_(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__sx=0,this.__sy=0,this.__width=0,this.__height=0,this.__baseline=0,this.__verticalBaseline=0,this.__config={},this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null,this.__virtualDom=null,this.__bbox=null,this.__filterBbox=null}return f(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[I]=(a(i={},M,this),a(i,R,t),a(i,O,r),a(i,S,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[I],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[C]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseline",get:function(){return this.__baseline}},{key:"verticalBaseline",get:function(){return this.__verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[C]}},{key:"isReplaced",get:function(){return!1}}]),t}(),et={CANVAS:0,SVG:1,WEBGL:2},r={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,GRADIENT:14,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,r.PERCENT]:/px$/i.test(t)?[e,r.PX]:/deg$/i.test(t)?[e,r.DEG]:/rem$/i.test(t)?[e,r.REM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/em$/i.test(t)?[e,r.EM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/vmax$/i.test(t)?[e,r.VMAX]:/vmin$/i.test(t)?[e,r.VMIN]:[e,r.NUMBER]}},k={TYPE_VD:Symbol("Dom"),TYPE_GM:Symbol("Geom"),TYPE_CP:Symbol("Component")};function D(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function L(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var Ht={identity:D,multiply:function(t,e){if(L(t))return e;if(L(e))return t;for(var r=[],i=0;i<4;i++){var n=t[i]||0,a=t[i+4]||0,o=t[i+8]||0,s=t[i+12]||0;r[i]=n*e[0]+a*e[1]+o*e[2]+s*e[3],r[i+4]=n*e[4]+a*e[5]+o*e[6]+s*e[7],r[i+8]=n*e[8]+a*e[9]+o*e[10]+s*e[11],r[i+12]=n*e[12]+a*e[13]+o*e[14]+s*e[15]}return r},calPoint:function(t,e){var r,c,u,_,f,d,p,y,i=(t=Bt(t,4))[0],n=t[1],a=t[2];if(void 0===(t=t[3])&&(t=1),!e||L(e))return[i,n,a,t];if(16===e.length)return a=a||0,o=(r=Bt(e,16))[0],h=r[1],c=r[2],u=r[3],s=r[4],g=r[5],_=r[6],f=r[7],l=r[8],d=r[9],p=r[10],y=r[11],[i*o+n*s+a*l+r[12],i*h+n*g+a*d+r[13],i*c+n*_+a*p+r[14],t*=i*u+n*f+a*y+r[15]];var o=Bt(e,6),s=o[0],l=o[1],h=o[2],g=o[3];return[s*i+h*n+o[4],l*i+g*n+o[5]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length){var e=t,r=[],i=(r[0]=e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10],r[4]=-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10],r[8]=e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9],r[12]=-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9],r[1]=-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10],r[5]=e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10],r[9]=-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9],r[13]=e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9],r[2]=e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6],r[6]=-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6],r[10]=e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5],r[14]=-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5],r[3]=-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6],r[7]=e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6],r[11]=-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5],r[15]=e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5],e[0]*r[0]+e[1]*r[4]+e[2]*r[8]+e[3]*r[12]);if(0==i)return D();i=1/i;for(var c=[],n=0;n<16;n++)c[n]=r[n]*i;return c}var a=(e=Bt(t,6))[0],o=e[1],s=e[2],l=e[3],u=e[4],_=e[5];if(1===a&&0===o&&0===s&&1===l&&0===u&&0===_)return t;var h=a*l-o*s;return 0==h?t:[l/h,-o/h,-s/h,a/h,(s*_-l*u)/h,(o*u-a*_)/h]},isE:L,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}},F={}.toString;function B(e){return function(t){return F.call(t)==="[object "+e+"]"}}var H=B("Object"),A=B("String"),t=B("Function"),e=B("Number"),i=B("Boolean"),G=B("Date"),Y={}.hasOwnProperty,W=Y.toString,U=W.call(Object);function X(t){return null==t}function z(t){return X(t)?"":t.toString()}function V(t){var e,r,i,n,a,o,s,l,h;return"item"===t.type||"img"===t.type?(e="",(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"):"text"===t.type?(r="",(t.children||[]).forEach(function(t){r+=V(t)}),"<g>"+r+"</g>"):"dom"===t.type||"geom"===t.type?(i="<g>",t.bb.forEach(function(t){i+=V(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=V(t))}),i+="</g>",n=t.opacity,a=t.transform,o=t.visibility,s=t.mask,l=t.overflow,h=t.filter,t=t.mixBlendMode,"<g"+(1!==n&&void 0!==n?' opacity="'+n+'"':"")+(a?' transform="'+a+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(l?' clip-path="'+l+'"':"")+(h||t?' style="':"")+(h?"filter:"+h+";":"")+(t?"mix-blend-mode:"+t+";":"")+(h||t?'"':"")+">"+i+"</g>"):void 0}function K(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function j(t,e){for(var r=t.length?t[0]:"",i=1,n=t.length;i<n;i++)r+=e+t[i];return r}function $(t){if(!t||"[object Object]"!==F.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=Y.call(t,"constructor")&&t.constructor;return"function"==typeof t&&W.call(t)===U}function q(t){return 1===t.length?"0"+t:t}var At={isObject:H,isString:A,isFunction:t,isNumber:e,isBoolean:i,isDate:G,isNil:X,isPrimitive:function(t){return At.isNil(t)||At.isBoolean(t)||At.isString(t)||At.isNumber(t)},isAuto:function(t){return X(t)||"auto"===t},isPlainObject:$,stringify:z,joinSourceArray:function t(e){for(var r="",i=0,n=e.length;i<n;i++){var a=e[i];Array.isArray(a)?r+=t(a):r+=z(a)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=K(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=V(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=V(t))}),e+="</g>"},joinVd:V,joinDef:K,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],X(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+j(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+j(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+j(t,",")+")";if(3===t.length)return"rgba("+j(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n))e[n[0]]=n[1];else for(var a=Object.keys(n),o=a.length-1;0<=o;o--){var s=a[o];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,n=r.length;i<n;i++){var a=r[i];e.push([a,t[a]])}return e},clone:function e(r){if(X(r)||"object"!==vt(r))return r;if(r.$$type===k.TYPE_VD||r.$$type===k.TYPE_GM||r.$$type===k.TYPE_CP)return r;if(At.isDate(r))return new Date(r);if(!$(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,n=e.length;i<n;i++){var a=e[i],o=r[i],s=Array.isArray(a),l=Array.isArray(o);if(s&&l){if(!t(a,o))return!1}else{if(s||l)return!1;if(a!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(H(e)&&H(r)){for(var i={},n=0,a=Object.keys(e),c=a.length;n<c;n++){var o=a[n];if(!r.hasOwnProperty(o)||!t(e[o],r[o]))return!1;i[o]=!0}for(var s=0,l=Object.keys(r),u=l.length;s<u;s++){var _=l[s];if(!i.hasOwnProperty(_))return!1}}else{if(G(e)&&G(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var h=0,f=e.length;h<f;h++)if(!t(e[h],r[h]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==vt(e))return t;for(var i=0,n=(r=r||Object.keys(e)).length;i<n;){var a=r[i];t[a]=e[a],i++}return t},joinArr:j,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!Ht.isE(e)){var n=Bt(t,4),a=n[0],o=n[1],s=n[2],n=n[3],h=(r&&(a-=r,s+=r),i&&(o-=i,n+=i),[s,o,a,n,s,n]),s=Bt(Ht.calPoint([a,o],e),4),a=s[0],o=s[1];(l=s[3])&&1!==l&&(a/=l,o/=l);for(var c=a,u=o,_=a,f=o,d=0;d<6;d+=2){var l,p=h[d],y=h[d+1],g=Bt(Ht.calPoint([p,y],e),4),p=g[0],y=g[1];(l=g[3])&&1!==l&&(p/=l,y/=l),c=Math.min(c,p),_=Math.max(_,p),u=Math.min(u,y),f=Math.max(f,y)}t=[c,u,_,f]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},prefixHex:q,replaceRgba2Hex:function(t){return(t||"").replace(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)/gi,function(t,e,r,i,n){e="#"+q(parseInt(e).toString(16))+q(parseInt(r).toString(16))+q(parseInt(i).toString(16));return n&&(e+=q(Math.floor(255*parseFloat(n)).toString(16))),e})}},Z={flag:!1},J={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},Q=Ht.calPoint;function tt(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(e),t.deleteShader(e),new Error("Failed to compile shader: "+r);return e}function rt(t,e,r,i){var t=Bt(t,4),n=t[0],a=t[1],o=t[2],t=t[3];return void 0===o&&(o=0),(t=void 0===t?1:t)&&1!==t&&(n/=t,a/=t,o/=t),a===r?a=0:(a=(a-r)/r,i&&(a=-a)),[(n=n===e?0:(n-e)/e)*t,a*t,o*t,t]}function it(t,e,r,i,n){var a=t.createTexture();return nt(t,a,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,n,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),a}function nt(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var ft={initShaders:function(t,e,r){if(!(e=function(t,e,r){e=tt(t,t.VERTEX_SHADER,e),r=tt(t,t.FRAGMENT_SHADER,r);if(!e||!r)return null;var i=t.createProgram();if(!i)return null;if(i.vertexShader=e,i.fragmentShader=r,t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return i;var n=t.getProgramInfoLog(i);throw t.deleteProgram(i),t.deleteShader(r),t.deleteShader(e),new Error("Failed to link program: "+n)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),e},createTexture:it,bindTexture:nt,drawTextureCache:function(r,t,A,v,m,E){var b,M=[],R=[],O=[],T=[0],S=[T],t=(t.forEach(function(t,e){var t=Bt(t,5),r=t[0],i=t[1],n=t[2],a=t[3],t=t[4],e=(e?(e=A[r.page.uuid],b!==e&&(T=[0,b=e],S.push(T))):(b=A[r.page.uuid],T[1]=b),r.x),c=r.y,u=r.width,_=r.height,f=r.page,r=r.bbox,o=r[0],r=r[1],s=o+(a||0),l=r+_+(t||0),o=o+u+(a||0),a=r+(t||0),r=Bt(Q([s,l],n),4),t=r[0],d=r[1],r=r[3],l=Bt(Q([o,l],n),4),p=l[0],y=l[1],l=l[3],o=Bt(Q([o,a],n),4),g=o[0],x=o[1],o=o[3],s=Bt(Q([s,a],n),4),a=s[0],n=s[1],s=s[3],h=Bt(rt([t,d,0,r],v,m,E),2),t=h[0],d=h[1],h=Bt(rt([p,y,0,l],v,m,E),2),p=h[0],y=h[1],h=Bt(rt([g,x,0,o],v,m,E),2),g=h[0],x=h[1],h=Bt(rt([a,n,0,s],v,m,E),2),a=h[0],n=h[1],h=(M.push(t,d,0,r,a,n,0,s,p,y,0,l,a,n,0,s,p,y,0,l,g,x,0,o),e/f.width),t=(c+_)/f.height,d=(e+u)/f.width,r=c/f.height;R.push(h,t,h,r,d,t,h,r,d,t,d,r),O.push(i,i,i,i,i,i),T[0]++}),r.createBuffer()),e=(r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,new Float32Array(M),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_position")),a=(r.vertexAttribPointer(e,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(e),r.createBuffer()),i=(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(R),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_texCoords")),o=(r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i),r.createBuffer()),n=(r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,new Float32Array(O),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_opacity")),s=(r.vertexAttribPointer(n,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n),r.getUniformLocation(r.program,"u_texture")),l=0;S.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];r.uniform1i(s,t),r.drawArrays(r.TRIANGLES,l,e*=6),l+=e}),r.deleteBuffer(t),r.deleteBuffer(a),r.deleteBuffer(o),r.disableVertexAttribArray(e),r.disableVertexAttribArray(i),r.disableVertexAttribArray(n)},drawBlur:function(e,c,u,_,f,d,p,t,r,i,n,a,o,s){for(var l=(r=Bt(rt([i,r+i,0,1],o,s,!1),2))[0],r=r[1],i=(t=Bt(rt([t+i,i,0,1],o,s,!1),2))[0],o=t[1],s=e.createBuffer(),t=(e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([l,o,l,r,i,o,l,r,i,o,i,r]),e.STATIC_DRAW),e.getAttribLocation(c,"a_position")),l=(e.vertexAttribPointer(t,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t),e.createBuffer()),o=(e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),e.getAttribLocation(c,"a_texCoords")),h=(e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(o),e.getUniformLocation(c,"u_direction")),y=(e.uniform2f(h,0,0),e.getUniformLocation(c,"u_texture")),g=(e.uniform1i(y,p),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW),100/Math.max(n,a)),x=n/a,v=[],m=0;m<3;m++){var E=it(e,null,p,n,a),b=(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,E,0),a<=n?e.uniform2f(h,g,0):e.uniform2f(h,g*x,0),e.uniform1i(y,d),e.drawArrays(e.TRIANGLES,0,6),v.push(_),it(e,null,d,n,a));e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,b,0),a<=n?e.uniform2f(h,0,g*x):e.uniform2f(h,0,g),e.uniform1i(y,p),e.drawArrays(e.TRIANGLES,0,6),_=b,v.push(E)}return e.deleteBuffer(s),e.deleteBuffer(l),e.disableVertexAttribArray(t),e.disableVertexAttribArray(o),v.forEach(function(t){return e.deleteTexture(t)}),_},drawOverflow:function(t,c,e,r,i,n,a,o){var s=t.createBuffer(),l=(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_position")),l=(t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l),e/a),h=r/o,i=(i+e)/a,e=(n+r)/o,a=t.createBuffer(),n=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([l,h,l,e,i,h,l,e,i,h,i,e]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_texCoords")),r=(t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),t.getUniformLocation(t.programOverflow,"u_texture"));t.uniform1i(r,c),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(s)},drawMask:function(t,e,r,i){var n=t.createBuffer(),a=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_position")),o=(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(i,"u_texture1")),l=(t.uniform1i(l,r),t.getUniformLocation(i,"u_texture2"));t.uniform1i(l,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,h,c){var n=t.createBuffer(),a=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),o=(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture1")),l=(t.uniform1i(l,r),t.getUniformLocation(e,"u_texture2"));t.uniform1i(l,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)},drawCm:function(t,e,r,i){var n=t.createBuffer(),a=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),o=(t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),l=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture")),l=(t.uniform1i(l,r),t.getUniformLocation(e,"u_m"));t.uniform1fv(l,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(n),t.deleteBuffer(o),t.disableVertexAttribArray(a),t.disableVertexAttribArray(s)},drawDropShadow:function(t,e,c,r,u,_,i,f,d,n){var a=t.createBuffer(),o=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),s=(t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o),t.createBuffer()),l=(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),h=(t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l),t.getUniformLocation(e,"u_texture")),h=(t.uniform1i(h,i),t.getUniformLocation(e,"u_color"));return t.uniform1fv(h,new Float32Array([n[0]/255,n[1]/255,n[2]/255,n[3]])),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(s),t.disableVertexAttribArray(o),t.disableVertexAttribArray(l),r}},at={},ot={},st=[],lt=[],ht="function"==typeof OffscreenCanvas&&At.isFunction(OffscreenCanvas.prototype.getContext);function ct(t,e,r,i,n){var a;return(a=t?i[t]||(i[t]=!Z.flag&&ht?new OffscreenCanvas(e,r):document.createElement("canvas")):(a=i===at?st:lt).length?a.pop():!Z.flag&&ht?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,a.height=r,Z.flag&&(a.style.width=e+"px",a.style.height=r+"px",a.setAttribute("type",i===at?"canvas":"webgl"),t&&a.setAttribute("key",t),n&&a.setAttribute("message",n),document.body.appendChild(a)),e=i===at?a.getContext("2d"):a.getContext("webgl",J)||a.getContext("experimental-webgl",J),{canvas:a,ctx:e,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===at?st:lt).push(this.canvas),this.available=!1}}}var ut,_t,dt={},pt={},yt={},gt={};function xt(){(ut=document.createElement("div")).style.position="absolute",ut.style.left="99999px",ut.style.top="-99999px",ut.style.visibility="hidden",ut.style.whiteSpace="nowrap",document.body.appendChild(ut)}var mt,Et,Mt={measureTextSync:function(t,e,r,i,n){return ut||xt(),ut.style.fontFamily=e,ut.style.fontSize=r+"px",ut.style.fontWeight=i,ut.style.writingMode=n?"vertical-lr":"horizontal-tb",ut.innerHTML=t.replace(/</g,"&lt;").replace(/[ \n]/g,"&nbsp;"),n?parseFloat(window.getComputedStyle(ut,null).height):parseFloat(window.getComputedStyle(ut,null).width)},measureTextListMax:function(t,e,r,i){ut||xt(),ut.style.fontFamily=e,ut.style.fontSize=r+"px",ut.style.fontWeight=i;for(var n="",a=0,o=t.length;a<o;a++)n+='<span style="position:absolute">'+t.charAt(a).replace("<","&lt;").replace(/[ \n]/,"&nbsp;")+"</span>";ut.innerHTML=n;for(var s=0,l=ut.childNodes,h=0,c=l.length;h<c;h++)var u=l[h],s=Math.max(s,parseFloat(window.getComputedStyle(u,null).width));return s},IMG:dt,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,a=[];e.forEach(function(t,e){Mt.measureImg(t,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!e||!At.isString(e))return Mt.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,o,s=dt[e]=dt[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(o=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&("undefined"!=typeof location&&location.hostname===o[1]||(t.crossOrigin="anonymous")),t.src=e,Z.flag&&"undefined"!=typeof document&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Et=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(Mt.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),Mt.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Tt.toString=function(){return Et.toString()},Tt),cancelAnimationFrame:(mt=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Mt.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Mt.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},bt.toString=function(){return mt.toString()},bt),now:function(){return"undefined"!=typeof performance?(Mt.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Mt.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&at.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return ct(r,t,e,at,i)},releaseCacheCanvas:function(t){st.push(t)},delCacheCanvas:function(t){t&&delete at[t]},hasCacheWebgl:function(t){return t&&ot.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return ct(r,t,e,ot,i)},releaseCacheWebgl:function(t){lt.push(t)},delCacheWebgl:function(t){t&&delete ot[t]},isDom:function(t){if(t){if(At.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(At.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},defaultFontFamily:"arial",getFontCanvas:function(){return Mt.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__")},checkSupportFontFamily:function(t){if((t=t.toLowerCase())===this.defaultFontFamily)return!0;if(gt.hasOwnProperty(t))return gt[t];for(var e=Mt.getFontCanvas(),r=e.ctx,i=(r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",_t||(r.clearRect(0,0,16,16),r.font="16px "+this.defaultFontFamily,r.fillText("a",8,8),e.draw(),_t=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),/\s/.test(t)&&(t='"'+t.replace(/"/g,'\\"')+'"'),r.font="16px "+t+","+this.defaultFontFamily,r.fillText("a",8,8),e.draw(),r.getImageData(0,0,16,16).data),n=0,a=i.length;n<a;n++)if(_t[n]!==i[n])return gt[t]=!0;return gt[t]=!1},loadFont:function(t,e,r){if(At.isFunction(e)&&(r=e,e=t),Array.isArray(e)){if(!e.length)return r();var i=0,n=e.length,a=[];e.forEach(function(t,e){Mt.loadFont(t.fontFamily,t.url,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!e||!At.isString(e))return Mt.error("Load font invalid: "+e),void(r&&r({state:2,success:!1,url:e}));t=t||e;var o,s=pt[e]=pt[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),e instanceof ArrayBuffer||/url\(/.test(e)||(e="url(".concat(e,")")),(o=new FontFace(t,e)).load().then(function(){document.fonts.add(o),s.state=2,s.success=!0,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})}).catch(function(){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,n=t.length,a=[];t.forEach(function(t,e){Mt.loadComponent(t,function(t){a[e]=t,++i===n&&r(a)})})}else{if(!t||!At.isString(t))return Mt.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,o=yt[t]=yt[t]||{state:0,task:[]};2===o.state?r&&r(o):1===o.state?r&&o.task.push(r):(o.state=1,r&&o.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){o.state=2,o.success=!0,o.url=t,o.task.splice(0).forEach(function(t){return t(o)}),document.head.removeChild(e)},e.onerror=function(){o.state=2,o.success=!1,o.url=t,o.task.splice(0).forEach(function(t){return t(o)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function bt(t){return mt.apply(this,arguments)}function Tt(t){return Et.apply(this,arguments)}var Rt=At.isString,Ot={},St={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},simsun:{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)&&this.info[t].checked},register:function(r,t,e){r=r.toLowerCase(),Rt(t)||t instanceof ArrayBuffer||(e=t,t=null);var i,n,a=this.info;a[r]=a[r]||{},t&&!a[r].url&&(a[r].url=t,Mt.loadFont(r,t,function(t){if(a[r].success=t.success,t.success)for(var e=Ot[r]||[];e.length;)e.pop().__emitFontRegister(r)})),e&&!a[r].lhr&&(e=void 0===(e=(t=e||{}).emSquare)?2048:e,i=void 0===(i=t.ascent)?1854:i,n=t.descent,t=t.lineGap,Object.assign(a[r],{lhr:(i+(void 0===n?434:n)+(void 0===t?0:t))/e,blr:i/e}))},hasRegister:function(t){return this.info.hasOwnProperty(t)&&this.info[t].hasOwnProperty("lhr")},hasLoaded:function(t){return this.info.hasOwnProperty(t)&&this.info[t].success},onRegister:function(t,e){(Ot[t]=Ot[t]||[]).push(e)},offRegister:function(t,e){t=Ot[t]=Ot[t]||[],e=t.indexOf(e);-1<e&&t.splice(e,1)}},Ct=(St.info["å®‹ä½“"]=St.info.simsun,St.info.pingfang=St.info["pingfang sc"],{position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit",writingMode:"inherit"}),It={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},wt=[],kt=[],Dt=(Object.keys(Ct).forEach(function(t){kt.push(t);var e=Ct[t];wt.push({k:t,v:e})}),[]),Lt=[],A=(Object.keys(It).forEach(function(t){Lt.push(t);var e=It[t];Dt.push({k:t,v:e})}),{get fontFamily(){return Mt.defaultFontFamily},fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:0,textStrokeOver:"none",writingMode:"horizontalTb"}),Nt=[],Pt=(Object.keys(A).forEach(function(t){Nt.push(t)}),{DOM:Ct,GEOM:It,isValid:function(t){return Ct.hasOwnProperty(t)||It.hasOwnProperty(t)},DOM_KEY_SET:kt,GEOM_KEY_SET:Lt,DOM_ENTRY_SET:wt,GEOM_ENTRY_SET:Dt,INHERIT:A,INHERIT_KEY_SET:Nt,VALID_STRING_VALUE:{position:["static","relative","absolute"],display:["block","inlineBlock","inline","flex","none"],flexDirection:["row","column","rowReverse","columnReverse"],flexWrap:["wrap","wrapReverse","nowrap"],justifyContent:["flexStart","center","flexEnd","spaceBetween","spaceAround","spaceEvenly"],alignItems:["stretch","flexStart","center","flexEnd","baseline"],alignSelf:["auto","stretch","flexStart","center","flexEnd","baseline"],overflow:["visible","hidden"],mixBlendMode:["normal","multiply","screen","overlay","darken","lighten","colorDodge","colorBurn","hardLight","softLight","difference","exclusion","hue","saturation","color","luminosity"],borderTopStyle:["solid","dashed","dotted"],borderRightStyle:["solid","dashed","dotted"],borderBottomStyle:["solid","dashed","dotted"],borderLeftStyle:["solid","dashed","dotted"],backgroundClip:["borderBox","paddingBox","contentBox"],textOverflow:["clip","ellipsis"],alignContent:["stretch","flexStart","center","flexEnd","spaceBetween","spaceAround"]}}),Ft={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var Gt={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},Yt=4*(Math.sqrt(2)-1)/3,Wt=Gt.crossProduct,Ut=Ht.calPoint,Xt=Ht.isE,t=T.STYLE_KEY,zt=t.WIDTH,Vt=t.HEIGHT,Kt=t.TRANSFORM_ORIGIN;function jt(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function $t(t,e,r){for(var i,n=Bt(r[0],2),c=n[0],u=n[1],n=Bt(r[0],2),_=n[0],f=n[1],d=r.length,a=1;a<d;a++)var o=Bt(r[a],2),p=o[0],o=o[1],c=Math.max(c,p),u=Math.max(u,o),_=Math.min(_,p),f=Math.min(f,o);if(t<_||e<f||c<t||u<e)return!1;for(var s=0,y=r.length;s<y;s++){var l=Bt(r[s],2),g=l[0],l=l[1],x=Bt(r[(s+1)%y],2),h=x[0],x=x[1],h=Wt(h-g,x-l,t-g,e-l);if(0!==h)if(h=0<h?1:0,void 0===i)i=h;else if(i^h)return!1}return!0}function qt(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function Zt(t,e){var t=Bt(t,4),r=t[0],i=t[1],n=t[2],t=t[3],e=Bt(e,4),a=e[0],o=e[1],s=e[2],e=e[3];return!(s<=r||e<=i||n<=a||t<=o)}function Jt(t,e,r){var i=r.matrix,i=void 0===i?[1,0,0,1,0,0]:i,r=r.computedStyle,r=void 0===r?{}:r,n=r[zt],a=r[Vt],r=r[Kt],r=Bt(r=void 0===r?[.5*n,.5*a]:r,2),o=r[0],r=r[1],n=Bt(Ut([t*n-o,e*a-r],i),2);return[(t=n[0])+o,(e=n[1])+r]}function Qt(t){return t*Math.PI/180}var te={pointInConvexPolygon:$t,pointInQuadrilateral:function(c,u,t,e,r,i,n,a,_,f,o){var s,l,h;return o&&!Xt(o)?(t=(s=Bt(Ut([t,e],o),4))[0],e=s[1],s=s[3],r=(l=Bt(Ut([r,i],o),4))[0],i=l[1],l=l[3],_=(h=Bt(Ut([_,f],o),4))[0],f=h[1],h=h[3],n=(o=Bt(Ut([n,a],o),4))[0],a=o[1],s&&1!==s&&(t/=s,e/=s),l&&1!==l&&(r/=l,i/=l),h&&1!==h&&(_/=h,f/=h),(s=o[3])&&1!==s&&(n/=s,a/=s),$t(c,u,[[t,e],[r,i],[n,a],[_,f]])):t<=c&&e<=u&&c<=n&&u<=a},d2r:Qt,r2d:function(t){return 180*t/Math.PI},H:Yt,h:jt,angleBySide:function(t,e,r){return t=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(t)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:qt,triangleIncentre:function(t,e,r,i,n,a){var o=qt(r,i,n,a),s=qt(t,e,n,a),l=qt(t,e,r,i);return[(o*t+s*r+l*n)/(o+s+l),(o*e+s*i+l*a)/(o+s+l)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,n=r*Yt,a=i===r?n:i*Yt;return[[t-r,e],[t-r,e-a,t-n,e-i,t,e-i],[t+n,e-i,t+r,e-a,t+r,e],[t+r,e+a,t+n,e+i,t,e+i],[t-n,e+i,t-r,e+a,t-r,e]]},sectorPoints:function c(t,e,r,i,n){if(n<i&&(i=(l=[n,i])[0],n=l[1]),i===n)return[];var a=[],u=Math.floor(i/90),_=Math.floor(n/90);if(u===_||_-u==1&&n%90==0){var f,o,d,s,l=jt(Qt(Math.abs(i-n)))*r,h=Math.sqrt(Math.pow(r,2)+Math.pow(l,2)),l=Math.atan(l/r);u<90?(f=[t+Math.sin(Qt(i))*r,e-Math.cos(Qt(i))*r],o=l+Qt(i),s=[t+Math.sin(o)*h,e-Math.cos(o)*h],d=[t+Math.sin(Qt(n))*r,e-Math.cos(Qt(n))*r],o=Qt(n)-l,o=[t+Math.sin(o)*h,e-Math.cos(o)*h],a.push(f),a.push(s.concat(o).concat(d))):u<180?(f=[t+Math.cos(Qt(i-90))*r,e+Math.sin(Qt(i-90))*r],s=l+Qt(i-90),o=[t+Math.cos(s)*h,e+Math.sin(s)*h],d=[t+Math.cos(Qt(n-90))*r,e+Math.sin(Qt(n-90))*r],s=Qt(n-90)-l,s=[t+Math.cos(s)*h,e+Math.sin(s)*h],a.push(f),a.push(o.concat(s).concat(d))):u<270?(f=[t-Math.sin(Qt(i-180))*r,e+Math.cos(Qt(i-180))*r],o=l+Qt(i-180),s=[t-Math.sin(o)*h,e+Math.cos(o)*h],d=[t-Math.sin(Qt(n-180))*r,e+Math.cos(Qt(n-180))*r],o=Qt(n-180)-l,o=[t-Math.sin(o)*h,e+Math.cos(o)*h],a.push(f),a.push(s.concat(o).concat(d))):(f=[t-Math.cos(Qt(i-270))*r,e+Math.sin(Qt(i-270))*r],s=l+Qt(i-270),o=[t-Math.cos(s)*h,e+Math.sin(s)*h],d=[t-Math.cos(Qt(n-270))*r,e+Math.sin(Qt(n-270))*r],s=Qt(n-270)-l,l=[t-Math.cos(s)*h,e+Math.sin(s)*h],a.push(f),a.push(o.concat(l).concat(d)))}else{for(var p,y,g=u,x=[];g<=_;g++)0===g?(p=c(t,e,r,i,90),x.push(p)):1===g?(u===g||90<n)&&(p=c(t,e,r,i<90?90:i,180<n?180:n),x.push(p)):2===g?(u===g||180<n)&&(y=c(t,e,r,i<180?180:i,270<n?270:n),x.push(y)):3===g&&(u===g||270<n)&&(y=c(t,e,r,i<270?270:i,n),x.push(y));for(var a=x[0],v=1,m=x.length;v<m;v++)a.push(x[v][1])}return a},getRectsIntersection:function(t,e){if(!Zt(t,e))return null;var r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3],a=(e=Bt(e,4))[0],o=e[1],s=e[2],e=e[3];return[Math.max(r,a),Math.max(i,o),Math.min(n,s),Math.min(t,e)]},isRectsOverlap:Zt,isRectsInside:function(t,e){var r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3],a=(e=Bt(e,4))[0],o=e[1],s=e[2],e=e[3];return r<=a&&i<=o&&s<=n&&e<=t},calCoordsInNode:Jt,calPercentInNode:function(t,e,r){var i,n=(s=r.computedStyle)[zt],a=s[Vt],o=(s=Bt(s[Kt],2))[0],s=s[1],l=Math.atan((a-s)/(n-o)),h=(r=Bt(Jt(1,1,r),2))[0],r=r[1],c=o<=h&&s<=r?(i=o===h?-Math.atan(1/0):Math.atan((r-s)/(h-o)))-l:o<=h&&r<s?(i=o===h?-Math.atan(1/0):Math.atan((s-r)/(h-o)))+l:h<o&&s<=r?(i=Math.atan((r-s)/(o-h)))-l:h<o&&r<s?(i=Math.atan((r-s)/(h-o)))<=l?i+Math.PI-l:-(c=Math.PI-i+l):0,r=Math.sqrt(Math.pow(t-o,2)+Math.pow(e-s,2)),h=o<=t&&s<=e?o===t?-Math.atan(1/0):Math.atan((e-s)/(t-o)):o<=t&&e<s?o===t?-Math.atan(1/0):-Math.atan((e-s)/(o-t)):t<o&&s<=e?Math.PI-Math.atan((e-s)/(o-t)):Math.atan((e-s)/(t-o))-Math.PI;return(h-=c)>Math.PI?(h-=Math.PI,[(o-r*Math.cos(h))/n,(s-r*Math.sin(h))/a]):h>.5*Math.PI?(h=Math.PI-h,[(o-r*Math.cos(h))/n,(s+r*Math.sin(h))/a]):0<=h?[(o+r*Math.cos(h))/n,(s+r*Math.sin(h))/a]:h>=.5*-Math.PI?(h=-h,[(o+r*Math.cos(h))/n,(s-r*Math.sin(h))/a]):h>=-Math.PI?(h=Math.PI+h,[(o-r*Math.cos(h))/n,(s-r*Math.sin(h))/a]):(h=-Math.PI-h,[(o-r*Math.cos(h))/n,(s+r*Math.sin(h))/a])},pointOnCircle:function(t,e,r,i){return 270<=i?(i=Qt(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=Qt(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=Qt(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=Qt(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var ee={getConicGradientImage:function(o,s,l,t,e,h){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");l=Math.floor(l),t=Math.floor(t);for(var c=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),u=0;u<t;u++)for(var r=function(t){for(var e=function(t,e){t-=o,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,u),r=void 0,r=0;r<c.length&&c[r].angle<=e;r++);var i=c[r-1],n=c[r];if(!i||!n)return"continue";var a=(e-i.angle)/(n.angle-i.angle),n=n.color.map(function(t,e){return a*(t-i.color[e])+i.color[e]}),t=4*(t+u*l);h[t]=n[0],h[1+t]=n[1],h[2+t]=n[2],h[3+t]=Math.min(255,255*n[3])},i=0;i<l;i++)r(i);return h}},re=At.int2rgba;function ie(t){var r="";return t.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];"blur"===e?r+="blur(".concat(t,"px)"):"dropShadow"===e?r+="drop-shadow(".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(re(t[4]),")"):"hueRotate"===e?r+="hue-rotate(".concat(t,"deg)"):"saturate"!==e&&"brightness"!==e&&"grayscale"!==e&&"contrast"!==e&&"sepia"!==e&&"invert"!==e||(r+="".concat(e,"(").concat(t,"%)"))}),r}var ne={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var n=-1,a=0,h=e.length;a<h;a++){var c=e[a];if(Array.isArray(c)&&c.length){n=a;break}}if(-1!==n){var o=e[n];t.moveTo(o[0]+r,o[1]+i),4===o.length?t.moveTo(o[2]+r,o[3]+i):6===o.length&&t.moveTo(o[4]+r,o[5]+i);for(var s=n+1,u=e.length;s<u;s++){var l=e[s];Array.isArray(l)&&(2===l.length?t.lineTo(l[0]+r,l[1]+i):4===l.length?t.quadraticCurveTo(l[0]+r,l[1]+i,l[2]+r,l[3]+i):6===l.length&&t.bezierCurveTo(l[0]+r,l[1]+i,l[2]+r,l[3]+i,l[4]+r,l[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var n=t[r];if(Array.isArray(n)&&n.length){e=r;break}}if(-1===e)return"";var a=t[e],o="M"+a[0]+","+a[1];4===a.length?o="M"+a[2]+","+a[3]:6===a.length&&(o="M"+a[4]+","+a[5]);for(var s=e+1,l=t.length;s<l;s++){var h=t[s];Array.isArray(h)&&(2===h.length?o+="L"+h[0]+","+h[1]:4===h.length?o+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(o+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return o},canvasLine:function(t,e,h,r,i,n,a,o){var s=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,l=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+s,h+l),3===o?(t.bezierCurveTo(n[0]+s,n[1]+l,a[0]+s,a[1],r+s,i+l),2):2===o?(t.quadraticCurveTo(a[0]+s,a[1]+l,r+s,i+l),2):1===o?(t.quadraticCurveTo(n[0]+s,n[1]+l,r+s,i+l),2):(t.lineTo(r+s,i+l),1)},svgLine:function(t,e,r,i,n,a,o){return 3===o?"M"+t+","+e+"C"+n[0]+","+n[1]+" "+a[0]+","+a[1]+" "+r+","+i:2===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+i:1===o?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:ie,svgFilter:ie},ae=te.H,oe=r.PX,se=r.PERCENT,le=r.REM,he=r.VW,ce=r.VH,ue=r.VMAX,_e=r.VMIN,fe=ne.canvasPolygon,de=ne.svgPolygon,e=T.STYLE_KEY,pe=e.BORDER_LEFT_WIDTH,ye=e.BORDER_TOP_WIDTH,ge=e.BORDER_BOTTOM_WIDTH,xe=e.PADDING_LEFT,ve=e.PADDING_BOTTOM,me=e.PADDING_TOP,Ee=e.BORDER_TOP_LEFT_RADIUS,be=e.BORDER_TOP_RIGHT_RADIUS,Te=e.BORDER_BOTTOM_LEFT_RADIUS,Ae=e.BORDER_BOTTOM_RIGHT_RADIUS,Me=e.FONT_SIZE;function Re(t,e,r,i,c,u,_,n){var f=1,d=1,p=1;t:for(var a=u;c<=a;a--)for(var o=n;_<=o;o--){var s=a+o,l=Math.floor((t+o)/s),h=o;if(l*s<o+t)if(n<(h=(t-l*a)/(l-1)))continue;if(s=a+h,1<e&&a<e){if(a<e%s)continue;if(1<r)if(a<(e+i)%s)continue}if(1<r)if(a<(e+i)%s)continue;0<l&&(f=l,d=a,p=h);break t}return{n:f,ps:d,pd:p}}function Oe(t,e,r,i,n,a){var o=n-e,s=i-r,r=r-e,e=n-i;return"dotted"===t?Re(o,r,e,s,a,a,Math.max(1,.25*a),2*a):(i=(n=Re(o,r,e,s,a,3*a,Math.max(1,.25*a),2*a)).n,t=n.ps,n=n.pd,1===i?Re(o,r,e,s,a,a,Math.max(1,.25*a),2*a):{n:i,ps:t,pd:n})}function Se(c,u,_,f,t,e,d,r,i,p,y,g,n,x){var n=Bt(n,2),a=n[0],n=n[1],x=Bt(x,2),v=x[0],x=x[1];if(!(a&&n||v&&x))return g;for(var l=t+a-(t-f),h=e-v+(d-e),m=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[1][0]<l?m.push(s):s[0][0]>h?E.push(s):s[1][0]>h&&s[0][0]<l?(A=l<t?r+Math.tan(u)*(l-f):i,M=e<h?r+Math.tan(_)*(d-h):i,m.push([s[0],[l,r],[l,A],s[3]]),l<h&&(t<l&&h<e?o.push([[l,r],[h,r],[h,i],[l,i]]):t<l?(o.push([[l,r],[e,r],[e,i],[l,i]]),o.push([[e,r],[h,r],[h,M],[e,i]])):h<e?(o.push([[l,r],[t,r],[t,i],[l,A]]),o.push([[t,r],[h,r],[h,i],[t,i]])):(o.push([[l,r],[t,r],[t,i],[l,A]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[e,r],[h,r],[h,M],[e,i]]))),E.push([[h,r],s[1],s[2],[h,M]])):s[1][0]>h?(A=e<h?r+Math.tan(_)*(d-h):i,o.push([s[0],[h,r],[h,A],s[3]]),E.push([[h,r],s[1],s[2],[h,A]])):s[0][0]<l?(M=l<t?r+Math.tan(u)*(l-f):i,m.push([s[0],[l,r],[l,M],s[3]]),o.push([[l,r],s[1],s[2],[l,M]])):o.push(s)}m.length&&(R=t-f<a&&c<n,z=Math.atan((t-f)/(i-r)),w=(I=(O=n)-(i-r))/(a-(t-f)),n=Bt((k=Ce(m[0][0],m[0][1],l,C=r+n,S=O/a,O,!0,Math.tan(z)*O))[0],2),P=n[0],F=n[1],R&&(a=Bt((D=Ce(m[0][3],m[0][2],l,C,w,I,!0,Math.tan(z)*I))[0],2),L=a[0],N=a[1]),m.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=Ce(t[0],t[1],l,C,S,O),R&&(i=Ce(t[3],t[2],l,C,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],P,F,0);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,N,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var R,O,S,C,I,w,k,D,L,N,P,F,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=d-e<v&&c<x,n=Math.atan((d-e)/(i-r)),U=(W=(H=x)-(i-r))/(v-(d-e)),z=Bt((X=Ie(E[Z-1][0],E[Z-1][1],h,Y=r+x,G=H/v,H,!0,Math.tan(n)*H))[X.length-1],2),$=z[0],q=z[1],B&&(a=Bt((V=Ie(E[Z-1][3],E[Z-1][2],h,Y,U,W,!0,Math.tan(n)*W))[V.length-1],2),K=a[0],j=a[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=V)):(r=Ie(t[0],t[1],h,Y,G,H),B&&(i=Ie(t[3],t[2],h,Y,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,1);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),m.concat(o).concat(E)}function Ce(t,c,e,r,i,n,a,o){var s,u,t=Bt(t,2),l=t[0],t=t[1],c=Bt(c,2),h=c[0],c=c[1],l=(-l+e)*i,h=Math.atan((-h+e)*i/(r-c)),c=e-Math.sin(h)*n/i,_=r-Math.cos(h)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),s=.5*Math.PI-a,u=e-Math.cos(a)*n/i,r-Math.sin(a)*n):(s=Math.atan(l/(r-t)),u=e-Math.sin(s)*n/i,r-Math.cos(s)*n),s===h)return[[u,o]];a=te.h(Math.abs(s-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=s-t,n=h+t;return[[u,o],[e-Math.sin(a)*l/i,r-Math.cos(a)*l],[e-Math.sin(n)*l/i,r-Math.cos(n)*l],[c,_]]}function Ie(t,e,r,i,n,a,o,s){var l,c,t=Bt(t,2),u=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,u=Math.atan((u-r)*n/(i-t)),t=r+Math.sin(u)*a/n,_=i-Math.cos(u)*a;if(s=o?(o=Math.atan(s*n/a),s=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(s/(1+s)),l=.5*Math.PI-o,c=r+Math.cos(o)*a/n,i-Math.sin(o)*a):(l=Math.atan(h/(i-e)),c=r+Math.sin(l)*a/n,i-Math.cos(l)*a),u===l)return[[t,_]];o=te.h(Math.abs(u-l))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=u+e,a=l-e;return[[t,_],[r+Math.sin(o)*h/n,i-Math.cos(o)*h],[r+Math.sin(a)*h/n,i-Math.cos(a)*h],[c,s]]}function we(c,u,_,f,d,t,e,p,r,i,y,g,n,x){var n=Bt(n,2),v=n[0],n=n[1],x=Bt(x,2),m=x[0],x=x[1];if(!(v&&n||m&&x))return g;for(var l=r+n-(r-p),h=i-x+(y-i),a=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[2][1]<l?a.push(s):s[1][1]>h?E.push(s):s[2][1]>h&&s[1][1]<l?(A=l<r?t+Math.tan(_)*(r-l):t,M=i<h?t+Math.tan(u)*(h-i):t,a.push([s[0],s[1],[e,l],[A,l]]),l<h&&(h<i&&r<l?o.push([[t,l],[e,l],[e,h],[t,h]]):r<l?(o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[t,i],[e,i],[e,h],[M,h]])):h<i?(o.push([[A,l],[e,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,h],[t,h]])):(o.push([[A,l],[e,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[t,i],[e,i],[e,h],[M,h]]))),E.push([[M,h],[e,h],s[2],s[3]])):s[2][1]>h?(A=i<h?t+Math.tan(u)*(h-i):t,o.push([s[0],s[1],[e,h],[A,h]]),E.push([[A,h],[e,h],s[2],s[3]])):s[1][1]<l?(M=l<r?t+Math.tan(_)*(r-l):t,a.push([s[0],s[1],[e,l],[M,l]]),o.push([[M,l],[e,l],s[2],s[3]])):o.push(s)}a.length&&(R=r-p<n&&c<v,V=Math.atan((e-t)/(r-p)),w=(I=(O=n)-(r-p))/(v-(e-t)),n=Bt((k=ke(a[0][1],a[0][2],C=e-v,l,S=O/v,O,!0,Math.tan(V)*O))[k.length-1],2),P=n[0],F=n[1],R&&(p=Bt((D=ke(a[0][0],a[0][3],C,l,w,I,!0,Math.tan(V)*I))[D.length-1],2),L=p[0],N=p[1]),a.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=ke(t[1],t[2],C,l,S,O),R&&(i=ke(t[0],t[3],C,l,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],P,F,2);if(R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,N,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var R,O,S,C,I,w,k,D,L,N,P,F,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=y-i<x&&c<m,v=Math.atan((e-t)/(y-i)),U=(W=(H=x)-(y-i))/(m-(e-t)),n=Bt((X=De(E[Z-1][1],E[Z-1][2],Y=e-m,h,G=H/m,H,!0,Math.tan(v)*H))[0],2),$=n[0],q=n[1],B&&(V=Bt((z=De(E[Z-1][0],E[Z-1][3],Y,h,U,W,!0,Math.tan(v)*W))[0],2),K=V[0],j=V[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=z)):(r=De(t[1],t[2],Y,h,G,H),B&&(i=De(t[0],t[3],Y,h,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,3);if(B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),a.concat(o).concat(E)}function ke(t,c,e,r,i,n,a,o){var u,t=Bt(t,2),s=t[0],t=t[1],c=Bt(c,2),l=c[0],c=c[1],s=(s-e)*i,l=Math.atan((l-e)*i/(r-c)),c=e+Math.sin(l)*n/i,_=r-Math.cos(l)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),h=.5*Math.PI-a,u=e+Math.cos(a)*n/i,r-Math.sin(a)*n):(h=Math.atan(s/(r-t)),u=e+Math.sin(h)*n/i,r-Math.cos(h)*n),h===l)return[[u,o]];var a=te.h(Math.abs(h-l))*n,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=h+t,n=e+Math.sin(a)*s/i,h=r-Math.cos(a)*s,a=l-t;return[[c,_],[e+Math.sin(a)*s/i,r-Math.cos(a)*s],[n,h],[u,o]]}function De(t,e,r,i,n,a,o,c){var s,u,t=Bt(t,2),l=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,l=Math.atan((l-r)*n/(t-i)),t=r+Math.sin(l)*a/n,_=i+Math.cos(l)*a;if(c=o?(o=Math.atan(c*n/a),c=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(c/(1+c)),s=.5*Math.PI-o,u=r+Math.cos(o)*a/n,i+Math.sin(o)*a):(s=Math.atan(h/(e-i)),u=r+Math.sin(s)*a/n,i+Math.cos(s)*a),l===s)return[[t,_]];o=te.h(Math.abs(l-s))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=l-e,a=r+Math.sin(o)*h/n,l=i+Math.cos(o)*h,o=s+e;return[[u,c],[r+Math.sin(o)*h/n,i+Math.cos(o)*h],[a,l],[t,_]]}function Le(c,u,_,f,t,e,d,p,y,r,i,g,n,x){var n=Bt(n,2),a=n[0],n=n[1],x=Bt(x,2),v=x[0],x=x[1];if(!(a&&n||v&&x))return g;for(var l=t+a-(t-f),h=e-v+(d-e),m=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[2][0]<l?m.push(s):s[3][0]>h?E.push(s):s[2][0]>h&&s[3][0]<l?(A=l<t?i-Math.tan(u)*(l-f):y,M=e<h?i-Math.tan(_)*(d-h):r,m.push([s[0],[l,A],[l,i],s[3]]),l<h&&(t<l&&h<e?o.push([[l,r],[h,r],[h,i],[l,i]]):t<l?(o.push([[l,r],[e,r],[e,i],[l,i]]),o.push([[e,r],[h,M],[h,i],[e,i]])):h<e?(o.push([[l,A],[t,r],[t,i],[l,i]]),o.push([[t,r],[h,r],[h,i],[t,i]])):(o.push([[l,A],[t,r],[t,i],[l,i]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[e,r],[h,M],[h,i],[e,i]]))),E.push([[h,M],s[1],s[2],[h,i]])):s[2][0]>h?(A=e<h?i-Math.tan(_)*(d-h):r,o.push([s[0],[h,A],[h,i],s[3]]),E.push([[h,A],s[1],s[2],[h,i]])):s[3][0]<l?(M=l<t?i-Math.tan(u)*(l-f):r,m.push([s[0],[l,M],[l,i],s[3]]),o.push([[l,M],s[1],s[2],[l,i]])):o.push(s)}m.length&&(R=t-f<a&&c<n,z=Math.atan((t-f)/(i-r)),w=(I=(O=n)-(i-r))/(a-(t-f)),n=Bt((k=Ne(m[0][3],m[0][2],l,C=i-n,S=O/a,O,!0,Math.tan(z)*O))[0],2),P=n[0],F=n[1],R&&(a=Bt((D=Ne(m[0][0],m[0][1],l,C,w,I,!0,Math.tan(z)*I))[0],2),L=a[0],N=a[1]),m.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=Ne(t[3],t[2],l,C,S,O),R&&(i=Ne(t[0],t[1],l,C,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],P,F,4);if(R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,N,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}));var R,O,S,C,I,w,k,D,L,N,P,F,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=d-e<v&&c<x,n=Math.atan((d-e)/(i-r)),U=(W=(H=x)-(i-r))/(v-(d-e)),z=Bt((X=Pe(E[Z-1][3],E[Z-1][2],h,Y=i-x,G=H/v,H,!0,Math.tan(n)*H))[X.length-1],2),$=z[0],q=z[1],B&&(a=Bt((V=Pe(E[Z-1][0],E[Z-1][1],h,Y,U,W,!0,Math.tan(n)*W))[V.length-1],2),K=a[0],j=a[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=V)):(r=Pe(t[3],t[2],h,Y,G,H),B&&(i=Pe(t[0],t[1],h,Y,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,5);if(B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))})),m.concat(o).concat(E)}function Ne(t,c,e,r,i,n,a,o){var s,u,t=Bt(t,2),l=t[0],t=t[1],c=Bt(c,2),h=c[0],c=c[1],l=(-l+e)*i,h=Math.atan((-h+e)*i/(c-r)),c=e-Math.sin(h)*n/i,_=r+Math.cos(h)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),s=.5*Math.PI-a,u=e-Math.cos(a)*n/i,r+Math.sin(a)*n):(s=Math.atan(l/(t-r)),u=e-Math.sin(s)*n/i,r+Math.cos(s)*n),s===h)return[[u,o]];a=te.h(Math.abs(s-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=s-t,n=h+t;return[[u,o],[e-Math.sin(a)*l/i,r+Math.cos(a)*l],[e-Math.sin(n)*l/i,r+Math.cos(n)*l],[c,_]]}function Pe(t,e,r,i,n,a,o,s){var l,c,t=Bt(t,2),u=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(h-r)*n,u=Math.atan((u-r)*n/(t-i)),t=r+Math.sin(u)*a/n,_=i+Math.cos(u)*a;if(s=o?(o=Math.atan(s*n/a),s=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(s/(1+s)),l=.5*Math.PI-o,c=r+Math.cos(o)*a/n,i+Math.sin(o)*a):(l=Math.atan(h/(e-i)),c=r+Math.sin(l)*a/n,i+Math.cos(l)*a),u===l)return[[t,_]];o=te.h(Math.abs(u-l))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=u+e,a=l-e;return[[t,_],[r+Math.sin(o)*h/n,i+Math.cos(o)*h],[r+Math.sin(a)*h/n,i+Math.cos(a)*h],[c,s]]}function Fe(c,u,_,t,e,f,d,p,r,i,y,g,n,x){var n=Bt(n,2),v=n[0],n=n[1],x=Bt(x,2),m=x[0],x=x[1];if(!(v&&n||m&&x))return g;for(var l=r+n-(r-p),h=i-x+(y-i),a=[],o=[],E=[],b=0,T=g.length;b<T;b++){var A,M,s=g[b];s[3][1]<l?a.push(s):s[0][1]>h?E.push(s):s[3][1]>h&&s[0][1]<l?(A=l<r?e-Math.tan(_)*(r-l):e,M=i<h?e-Math.tan(u)*(h-i):e,a.push([s[0],s[1],[A,l],[t,l]]),l<h&&(h<i&&r<l?o.push([[t,l],[e,l],[e,h],[t,h]]):r<l?(o.push([[t,l],[e,l],[e,i],[t,i]]),o.push([[t,i],[e,i],[M,h],[t,h]])):h<i?(o.push([[t,l],[A,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,h],[t,h]])):(o.push([[t,l],[A,l],[e,r],[t,r]]),o.push([[t,r],[e,r],[e,i],[t,i]]),o.push([[t,i],[e,i],[M,h],[t,h]]))),E.push([[t,h],[M,h],s[2],s[3]])):s[3][1]>h?(A=i<h?e-Math.tan(u)*(h-i):e,o.push([s[0],s[1],[A,h],[t,h]]),E.push([[t,h],[A,h],s[2],s[3]])):s[1][1]<l?(M=l<r?e-Math.tan(_)*(r-l):e,a.push([s[0],s[1],[M,l],[t,l]]),o.push([[t,l],[M,l],s[2],s[3]])):o.push(s)}a.length&&(R=r-p<n&&c<v,V=Math.atan((e-t)/(r-p)),w=(I=(O=n)-(r-p))/(v-(e-t)),n=Bt((k=Be(a[0][0],a[0][3],C=t+v,l,S=O/v,O,!0,Math.tan(V)*O))[k.length-1],2),P=n[0],F=n[1],R&&(p=Bt((D=Be(a[0][1],a[0][2],C,l,w,I,!0,Math.tan(V)*I))[D.length-1],2),L=p[0],N=p[1]),a.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=D)):(r=Be(t[0],t[3],C,l,S,O),R&&(i=Be(t[1],t[2],C,l,w,I)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],P,F,6);if(R){for(var o=0,s=i.length;o<s;o++)Ge(i[o],L,N,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var R,O,S,C,I,w,k,D,L,N,P,F,B,H,G,Y,W,U,X,z,V,K,j,$,q,Z=E.length;return Z&&(B=y-i<x&&c<m,v=Math.atan((e-t)/(y-i)),U=(W=(H=x)-(y-i))/(m-(e-t)),n=Bt((X=He(E[Z-1][0],E[Z-1][3],Y=t+m,h,G=H/m,H,!0,Math.tan(v)*H))[0],2),$=n[0],q=n[1],B&&(V=Bt((z=He(E[Z-1][1],E[Z-1][2],Y,h,U,W,!0,Math.tan(v)*W))[0],2),K=V[0],j=V[1]),E.forEach(function(t,e){var r,i;e===Z-1?(r=X,B&&(i=z)):(r=He(t[0],t[3],Y,h,G,H),B&&(i=He(t[1],t[2],Y,h,U,W)));for(var n=0,a=r.length;n<a;n++)Ge(r[n],$,q,7);if(B){for(var o=0,s=i.length;o<s;o++)Ge(i[o],K,j,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),a.concat(o).concat(E)}function Be(t,c,e,r,i,n,a,o){var u,t=Bt(t,2),s=t[0],t=t[1],c=Bt(c,2),l=c[0],c=c[1],s=(e-s)*i,l=Math.atan((e-l)*i/(r-c)),c=e-Math.sin(l)*n/i,_=r-Math.cos(l)*n;if(o=a?(a=Math.atan(o*i/n),o=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(o/(1+o)),h=.5*Math.PI-a,u=e-Math.cos(a)*n/i,r-Math.sin(a)*n):(h=Math.atan(s/(r-t)),u=e-Math.sin(h)*n/i,r-Math.cos(h)*n),h===l)return[[u,o]];var a=te.h(Math.abs(h-l))*n,s=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),t=Math.atan(a/n),a=h+t,n=e-Math.sin(a)*s/i,h=r-Math.cos(a)*s,a=l-t;return[[c,_],[e-Math.sin(a)*s/i,r-Math.cos(a)*s],[n,h],[u,o]]}function He(t,e,r,i,n,a,o,c){var s,u,t=Bt(t,2),l=t[0],t=t[1],e=Bt(e,2),h=e[0],e=e[1],h=(r-h)*n,l=Math.atan((r-l)*n/(t-i)),t=r-Math.sin(l)*a/n,_=i+Math.cos(l)*a;if(c=o?(o=Math.atan(c*n/a),c=Math.sqrt(Math.tan(o)/2),o=2*Math.atan(c/(1+c)),s=.5*Math.PI-o,u=r-Math.cos(o)*a/n,i+Math.sin(o)*a):(s=Math.atan(h/(e-i)),u=r-Math.sin(s)*a/n,i+Math.cos(s)*a),l===s)return[[t,_]];o=te.h(Math.abs(l-s))*a,h=Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),e=Math.atan(o/a),o=l-e,a=r-Math.sin(o)*h/n,l=i+Math.cos(o)*h,o=s+e;return[[u,c],[r-Math.sin(o)*h/n,i+Math.cos(o)*h],[a,l],[t,_]]}function Ge(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Ye=[Ee,be,Ae,Te];var We={calPoints:function(c,u,_,f,t,d,e,r,i,n,a,o,p,y,g){var s=[];if("none"===u)return s;if(-1<["dashed","dotted"].indexOf(u)){var u=0===p||2===p?Oe(u,t,d,e,r,c):Oe(u,i,n,a,o,c),x=u.n,v=u.ps,m=u.pd;if(1<x){for(var E=0;E<x;E++){var b=E===x-1,l=void 0,T=void 0,A=void 0,h=(l=0===p||2===p?E?t+v*E+m*E:t:E?i+v*E+m*E:i)+v;0===p?h<=d?b?s.push([[t,i],[r,i],[e,n],[d,n]]):(T=i+(l-t)*Math.tan(_),A=i+(h-t)*Math.tan(_),s.push([[l,i],[h,i],[h,A],[l,T]])):e<=l?(T=i+(r-l)*Math.tan(f),A=i+(r-h)*Math.tan(f),b?s.push([[l,i],[r,i],[r,i],[l,T]]):s.push([[l,i],[h,i],[h,A],[l,T]])):l<d?(T=i+(l-t)*Math.tan(_),s.push([[l,i],[d,i],[d,n],[l,T]]),b?(s.push([[d,i],[e,i],[e,n],[d,n]]),s.push([[e,i],[r,i],[r,i],[d,n]])):e<h?(A=i+(r-h)*Math.tan(f),s.push([[d,i],[e,i],[e,n],[d,n]]),s.push([[e,i],[h,i],[h,A],[e,n]])):s.push([[d,i],[h,i],[h,n],[d,n]])):e<h?(T=i+(r-h)*Math.tan(f),l<d?(A=i+(l-t)*Math.tan(_),s.push([[l,i],[d,i],[d,n],[l,A]]),s.push([[d,i],[e,i],[e,n],[d,n]])):s.push([[l,i],[e,i],[e,n],[l,n]]),b?s.push([[e,i],[r,i],[r,i],[e,n]]):s.push([[e,i],[h,i],[h,T],[e,n]])):b?s.push([[l,i],[r,i],[e,n],[l,n]]):s.push([[l,i],[h,i],[h,n],[l,n]]):1===p?h<=n?b?s.push([[e,n],[r,i],[r,o],[e,a]]):(T=r-(l-i)*Math.tan(_),A=r-(h-i)*Math.tan(_),s.push([[T,l],[r,l],[r,h],[A,h]])):a<=l?(T=e+(l-a)*Math.tan(f),A=e+(h-a)*Math.tan(f),b?s.push([[T,l],[r,l],[r,o],[r,o]]):s.push([[T,l],[r,l],[r,h],[A,h]])):l<n?(T=e+(n-l)*Math.tan(_),s.push([[T,l],[r,l],[r,n],[e,n]]),b?(s.push([[e,n],[r,n],[r,a],[e,a]]),s.push([[e,a],[r,a],[r,o],[r,o]])):a<h?(A=e+(h-a)*Math.tan(f),s.push([[e,n],[r,n],[r,a],[e,a]]),s.push([[e,a],[r,a],[r,h],[A,h]])):s.push([[e,n],[r,n],[r,h],[e,h]])):a<h?(T=e+(h-a)*Math.tan(f),l<n?(A=e+(n-l)*Math.tan(_),s.push([[A,l],[r,l],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,a],[e,a]]),b?s.push([[e,a],[r,a],[r,r],[r,r]]):s.push([[e,a],[r,a],[r,h],[T,h]])):(s.push([[e,l],[r,l],[r,a],[e,a]]),b?s.push([[e,a],[r,a],[r,o],[r,o]]):s.push([[e,a],[r,a],[r,h],[T,h]]))):b?s.push([[e,l],[r,l],[r,o],[e,a]]):s.push([[e,l],[r,l],[r,h],[e,h]]):2===p?h<=d?b?s.push([[t,o],[d,a],[e,a],[r,o]]):(T=o-(l-t)*Math.tan(_),A=o-(h-t)*Math.tan(_),s.push([[l,T],[h,A],[h,o],[l,o]])):e<=l?(T=o-(r-l)*Math.tan(f),A=o-(r-h)*Math.tan(f),b?s.push([[l,T],[r,o],[r,o],[l,o]]):s.push([[l,T],[h,A],[h,o],[l,o]])):l<d?(T=o-(l-t)*Math.tan(_),s.push([[l,T],[d,a],[d,o],[l,o]]),b?(s.push([[d,a],[e,a],[e,o],[d,o]]),s.push([[e,a],[r,o],[r,o],[e,o]])):e<h?(A=o-(h-e)*Math.tan(f),s.push([[d,a],[e,a],[e,o],[d,o]]),s.push([[e,a],[h,A],[h,o],[e,o]])):s.push([[d,a],[h,a],[h,o],[d,o]])):e<h?(T=o-(r-h)*Math.tan(f),l<d?(A=o-(l-e)*Math.tan(_),s.push([[l,A],[d,a],[d,o],[l,o]]),s.push([[d,a],[e,a],[e,o],[d,o]])):s.push([[l,a],[e,a],[e,o],[l,o]]),b?s.push([[e,a],[r,o],[r,o],[e,o]]):s.push([[e,a],[h,T],[h,o],[e,o]])):b?s.push([[l,a],[e,a],[r,o],[l,o]]):s.push([[l,a],[h,a],[h,o],[l,o]]):3===p&&(h<=n?b?s.push([[t,i],[d,n],[d,a],[t,o]]):(T=t+(l-i)*Math.tan(_),A=t+(h-i)*Math.tan(_),s.push([[t,l],[T,l],[A,h],[t,h]])):a<=l?(T=t+(o-l)*Math.tan(f),A=t+(o-h)*Math.tan(f),b?s.push([[t,l],[T,l],[t,o],[t,o]]):s.push([[t,l],[T,l],[A,h],[t,h]])):l<n?(T=t+(l-i)*Math.tan(_),s.push([[t,l],[T,l],[d,n],[t,n]]),b?(s.push([[t,n],[d,n],[d,a],[t,a]]),s.push([[t,a],[d,a],[t,o],[t,o]])):a<h?(A=t+(o-h)*Math.tan(f),s.push([[t,n],[d,n],[d,a],[t,a]]),s.push([[t,a],[d,a],[A,h],[t,h]])):s.push([[t,n],[d,n],[d,h],[t,h]])):a<h?(T=t+(o-h)*Math.tan(f),l<n?(A=t+(l-i)*Math.tan(_),s.push([[t,l],[A,l],[d,n],[t,i]]),s.push([[t,n],[d,n],[d,a],[t,a]])):s.push([[t,l],[d,l],[d,a],[t,a]]),b?s.push([[t,a],[d,a],[t,o],[t,o]]):s.push([[t,a],[d,a],[T,h],[t,h]])):b?s.push([[t,l],[d,l],[d,a],[t,o]]):s.push([[t,l],[d,l],[d,h],[t,h]]))}if(0===p)return Se(c,_,f,t,d,e,r,i,n,0,0,s,y,g);if(1===p)return we(c,_,f,0,0,e,r,i,n,a,o,s,y,g);if(2===p)return Le(c,_,f,t,d,e,r,0,n,a,o,s,y,g);if(3===p)return Fe(c,_,f,t,d,0,0,i,n,a,o,s,y,g)}}return 0===p?(t<d&&s.push([[t,i],[d,i],[d,n],[t,i]]),s.push([[d,i],[e,i],[e,n],[d,n]]),e<r&&s.push([[e,i],[r,i],[r,i],[e,n]]),Se(c,_,f,t,d,e,r,i,n,0,0,s,y,g)):1===p?(i<n&&s.push([[r,i],[r,i],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,a],[e,a]]),a<o&&s.push([[e,a],[r,a],[r,o],[r,o]]),we(c,_,f,0,0,e,r,i,n,a,o,s,y,g)):2===p?(t<d&&s.push([[t,o],[d,a],[d,o],[t,o]]),s.push([[d,a],[e,a],[e,o],[d,o]]),e<r&&s.push([[e,a],[r,o],[r,o],[e,o]]),Le(c,_,f,t,d,e,r,0,n,a,o,s,y,g)):3===p?(i<n&&s.push([[t,i],[t,i],[d,n],[t,n]]),s.push([[t,n],[d,n],[d,a],[t,a]]),a<o&&s.push([[t,a],[d,a],[t,o],[t,o]]),Fe(c,_,f,t,d,0,0,i,n,a,o,s,y,g)):void 0},calRadius:function(t,e,r,i,n,a,o,s){var l,h=(n=Bt(n,2))[0],n=n[1],c=(a=Bt(a,2))[0],a=a[1],u=(o=Bt(o,2))[0],o=o[1],_=(s=Bt(s,2))[0],s=s[1],h=Math.max(h,0),n=Math.max(n,0),c=Math.max(c,0),a=Math.max(a,0),u=Math.max(u,0),o=Math.max(o,0),_=Math.max(_,0),s=Math.max(s,0);if(l=0<h&&0<n||0<c&&0<a||0<u&&0<o||0<_&&0<s?!0:l)return l=[],0<h&&0<n?(l.push([t,e+n]),l.push([t,e+n*(1-ae),t+h*(1-ae),e,t+h,e])):l.push([t,e]),0<c&&0<a?(l.push([t+r-c,e]),l.push([t+r-c*(1-ae),e,t+r,e+a*(1-ae),t+r,e+a])):l.push([t+r,e]),0<u&&0<o?(l.push([t+r,e+i-o]),l.push([t+r,e+i-o*(1-ae),t+r-u*(1-ae),e+i,t+r-u,e+i])):l.push([t+r,e+i]),0<_&&0<s?(l.push([t+_,e+i]),l.push([t+_*(1-ae),e+i,t,e+i-s*(1-ae),t,e+i-s])):l.push([t,e+i]),l},calBorderRadius:function(a,o,e,s,r){var i=!0;Ye.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===oe?Math.max(0,t[0]):t[1]===se?Math.max(0,t[0]*(e?o:a)*.01):t[1]===le?Math.max(0,t[0]*r.computedStyle[Me]):t[1]===he?Math.max(0,t[0]*r.width*.01):t[1]===ce?Math.max(0,t[0]*r.height*.01):t[1]===ue?Math.max(0,t[0]*Math.max(r.width,r.height)*.01):t[1]===_e?Math.max(0,t[0]*Math.min(r.width,r.height)*.01):0):0})}),i||Ye.forEach(function(t,e){var r,i=e%2==0?0:1,n=i?o:a,t=s[t],e=s[Ye[(e+1)%4]];t[i]+e[i]>n&&(t[i]>=(r=.5*n)&&e[i]>=r?t[i]=e[i]=r:t[i]>r?t[i]=n-e[i]:e[i]>r&&(e[i]=n-t[i]))})},calBorderRadiusInline:function(t,e,r){t.length&&(i=t[0],(n=t[t.length-1]).isEllipsis&&(n=t[t.length-2]));var i,n,a=i?i.outerWidth:0,o=i?i.outerHeight:0;a+=r[pe]+r[xe],o+=r[ye]+r[ge]+r[me]+r[ve],[Ee,Te].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===oe?Math.max(0,t[0]):Math.max(0,t[0]*(e?o:a)*.01);t=Math.min(e?o:a,t);return t})}),a=n?n.outerWidth:0,o=n?n.outerHeight:0,[be,Ae].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===oe?Math.max(0,t[0]):Math.max(0,t[0]*(e?o:a)*.01);t=Math.min(e?o:a,t);return t})})},renderBorder:function(t,e,r,i,n,a,o){var s;e===et.CANVAS||e===et.WEBGL?(r.beginPath(),r.fillStyle!==n&&(r.fillStyle=n),i.forEach(function(t){fe(r,t,a,o)}),r.fill(),r.closePath()):e===et.SVG&&(s="",i.forEach(function(t){s+=de(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",n]]}))}},Ue=At.rgba2int,Xe=At.isNil,ze=r.PX,Ve=r.PERCENT,Ke=r.DEG,je=r.NUMBER,$e=r.REM,qe=r.VW,Ze=r.VH,Je=r.VMAX,Qe=r.VMIN,tr=r.calUnit,er=te.d2r,rr=ne.canvasPolygon,ir=T.STYLE_KEY.FONT_SIZE;function nr(t){var e;return/^[-+]?[\d.]/.test(t)?(e=tr(t),-1<[je,Ke].indexOf(e[1])&&(e[1]=ze),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,Ve]}function ar(c,t,e){for(var u,r=[],_=c[0][0],f=0,d=c.length;f<d;f++){var i,n=c[f];1<n.length?(i=n[1])[1]===Ve?r.push([n[0],.01*i[0]]):i[1]===$e?r.push([n[0],i[0]*e.computedStyle[ir]/t]):i[1]===qe?r.push([n[0],i[0]*e.width/t]):i[1]===Ze?r.push([n[0],i[0]*e.height/t]):i[1]===Je?r.push([n[0],i[0]*Math.max(e.width,e.height)/t]):i[1]===Qe?r.push([n[0],i[0]*Math.min(e.width,e.height)/t]):r.push([n[0],i[0]/t]):r.push([n[0]])}1===r.length&&r.push(At.clone(r[0])),1===r[0].length&&r[0].push(0),1<r.length&&(1===r[u=r.length-1].length&&r[u].push(1));for(var p=r[0][1],a=1,y=r.length;a<y-1;a++){var g=r[a];if(1<g.length)p=g[1];else{for(var x=a+1,v=r[r.length-1][1];x<y-1;x++){var m=r[x];if(1<m.length){v=m[1];break}}for(var E=(v-p)/(x-a+1),b=a;b<x;b++)r[b].push(p+E*(b+1-a));a=x}}for(var T=1,A=r.length;T<A;T++){var M=r[T],R=r[T-1];M[1]<R[1]&&(M[1]=R[1])}for(var O=0,S=r.length;O<S;O++){var o=r[O];if(1<o[1]){r.splice(O);var C,I,w,k,s=r[O-1];s&&s[1]<1&&(C=o[0][0]-s[0][0],I=o[0][1]-s[0][1],w=o[0][2]-s[0][2],k=o[0][3]-s[0][3],s=(1-s[1])/(o[1]-s[1]),r.push([[o[0][0]+C*s,o[0][1]+I*s,o[0][2]+w*s,o[0][3]+k*s],1]));break}}for(var D=r.length-1;0<=D;D--){var l=r[D];if(l[1]<0){r.splice(0,D+1);var L,N,P,F,h=r[D];h&&0<h[1]&&(L=h[0][0]-l[0][0],N=h[0][1]-l[0][1],P=h[0][2]-l[0][2],F=h[0][3]-l[0][3],h=-l[1]/(h[1]-l[1]),r.unshift([[l[0][0]+L*h,l[0][1]+N*h,l[0][2]+P*h,l[0][3]+F*h],0]));break}}return r.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),r.length||r.push([_,0]),r}function or(t,e,r,i,n,a){var o=t[0],t=t[1],i=o[1]===Ve?e+o[0]*i*.01:o[1]===$e?e+o[0]*a.computedStyle[ir]:o[1]===qe?e+o[0]*a.width*.01:o[1]===Ze?e+o[0]*a.height*.01:o[1]===Je?e+o[0]*Math.max(a.width,a.height)*.01:o[1]===Qe?e+o[0]*Math.min(a.width,a.height)*.01:e+o[0],e=t[1]===Ve?r+t[0]*n*.01:t[1]===$e?r+t[0]*a.computedStyle[ir]:t[1]===qe?r+t[0]*a.width*.01:t[1]===Ze?r+t[0]*a.height*.01:t[1]===Ze?r+t[0]*Math.max(a.width,a.height)*.01:t[1]===Ze?r+t[0]*Math.min(a.width,a.height)*.01:r+t[0];return[i,e]}var sr={parseGradient:function(t){var e,r,i,n,a,o;if(t=Ft.gradient.exec(t))return"linear"===(e={k:t[1]}).k?(a=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(t[2]))?e.d=(a=a[0].toLowerCase(),o=180,"to top"===a?o=0:"to top right"===a?o=45:"to right"===a?o=90:"to bottom right"===a?o=135:"to bottom"===a||("to bottom left"===a?o=225:"to left"===a?o=270:"to top left"===a?o=315:(a=/([-+]?[\d.]+)deg/.exec(a))&&(o=parseFloat(a[1]))),o%360):(a=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(t[2]),e.d=a?[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])]:180):"radial"===e.k?(e.s=-1<t[2].indexOf("circle")?"circle":"ellipse",(o=/(closest|farthest)-(side|corner)/i.exec(t[2]))?e.z=o[0].toLowerCase():(a=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(t[2]))?(e.z=[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])],r=!Xe(a[5]),n=!Xe(a[6]),i=!Xe(a[7]),r&&n&&i?(e.z.push(parseFloat(a[5])),e.z.push(parseFloat(a[6])),e.z.push(parseFloat(a[7]))):r&&n?(e.z.push(parseFloat(a[5])),e.z.push(parseFloat(a[6])),e.z.push(1)):r?(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(parseFloat(a[5]))):(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(1))):e.z="farthest-corner",(i=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(n=nr(i[1]),r=i[2]?nr(i[2]):n,e.p=[n,r]):e.p=[[50,Ve],[50,Ve]]):"conic"===e.k&&(i=/([-+]?[\d.]+deg)/i.exec(t[2]),e.d=i?parseFloat(i[0])%360:0,(n=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(r=nr(n[1]),i=n[2]?nr(n[2]):r,e.p=[r,i]):e.p=[[50,Ve],[50,Ve]]),n=t[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[],e.v=n.map(function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),e=[Ue(e[0])],t=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);return t&&(t=tr(t[0]),-1<[je,Ke].indexOf(t[1])&&(t[1]=ze),e[1]=t),e}),e},getLinear:function(c,t,e,r,i,n,a,u,_){if(e+=o=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,r+=l=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,i+=o,n+=l,Array.isArray(t))var f=e+t[0]*a,d=r+t[1]*u,p=e+t[2]*a,y=r+t[3]*u,g=ar(c,Math.sqrt(Math.pow(p-f,2)+Math.pow(y-d,2)));else{for(;360<=t;)t-=360;for(;t<0;)t+=360;var o=Math.max(a,u),i=(l=o,i=i,n=n,h=270<=(h=t)?(s=er(360-h),x=i+Math.sin(s)*l,v=n+Math.cos(s)*l,m=i-Math.sin(s)*l,n-Math.cos(s)*l):180<=h?(s=er(h-180),x=i+Math.sin(s)*l,v=n-Math.cos(s)*l,m=i-Math.sin(s)*l,n+Math.cos(s)*l):90<=h?(s=er(180-h),x=i-Math.sin(s)*l,v=n-Math.cos(s)*l,m=i+Math.sin(s)*l,n+Math.cos(s)*l):(s=er(h),x=i-Math.sin(s)*l,v=n+Math.cos(s)*l,m=i+Math.sin(s)*l,n-Math.cos(s)*l),[x,v,m,h]),n=(o*=2,Gt.dotProduct(e-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/o),s=Gt.dotProduct(e+a-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/o,l=Gt.dotProduct(e+a-i[0],r+u-i[1],i[2]-i[0],i[3]-i[1])/o,x=Gt.dotProduct(e-i[0],r+u-i[1],i[2]-i[0],i[3]-i[1])/o,v=n,m=Math.min(n,Math.min(s,Math.min(l,x))),v=Math.max(v,Math.max(s,Math.max(l,x))),h=m/o,a=i[2]-i[0],e=i[3]-i[1];f=i[0]+a*h,d=i[1]+e*h,p=i[2]-a*h,y=i[3]-e*h,g=ar(c,v-m,_)}return{x1:f,y1:d,x2:p,y2:y,stop:g}},getRadial:function(c,u,t,_,e,r,i,f,d){u=u,t=t,_=_,o=i-e,s=f-r,e=e+=v=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,r=r+=m=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,v=i+=v,i=f+=m,m=d,f=0,Array.isArray(t)?(l=e+t[0]*o,h=r+t[1]*s,p=e+t[4]*o,y=r+t[5]*s,t[6]<=0?g=Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(n=(a=Math.sqrt(Math.pow((t[2]-t[0])*o,2)+Math.pow((t[3]-t[1])*s,2)))*t[6],g=Math.max(a,n),a!==n&&(f=t[2]>=t[0]?t[3]>=t[1]?Math.asin((t[3]-t[1])*s/a):-Math.asin((t[1]-t[3])*s/a):t[3]>=t[1]?er(180)-Math.asin((t[3]-t[1])*s/a):Math.asin((t[1]-t[3])*s/a)-er(180)))):(p=l=(_=Bt(or(_,e,r,o,s,m),2))[0],y=h=_[1],m=1,"closest-corner"===t&&"circle"===u?g=l<=e||v<=l||h<=r||i<=h?Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(a=l<e+.5*o?l-e:v-l,n=h<r+.5*s?h-r:i-h,Math.sqrt(Math.pow(a,2)+Math.pow(n,2))):"closest-side"===t||"closest-corner"===t?l<=e||v<=l||h<=r||i<=h?g=Math.min(Math.abs(l-e),Math.min(Math.abs(h-r),Math.min(Math.abs(h-i),Math.min(Math.abs(l-i))))):(_=1,a=l<e+.5*o?l-e:v-l,n=h<r+.5*s?h-r:i-h,g=Math.min(a,n),a*=_="closest-corner"===t?Math.sqrt(2):_,n*=_,g*=_):(a=l<=e?e-l+o:v<=l?l-v+o:l<e+.5*o?v-l:l-e,n=h<=r?r-h+s:i<=h?h-i+s:h<r+.5*s?i-h:h-r,g=Math.max(a,n),a*=m="farthest-side"!==t?Math.sqrt(2):m,n*=m,g*=m));var p,y,n,g,a,x,_=[l,h,g,a="circle"===u?n=g:a,n,p,y,f],o=Bt(_,8),v=o[0],e=o[1],s=o[2],i=o[3],r=o[4],t=o[5],m=o[6],l=o[7],h=1,u=1;return i===r&&!l||(x=[1,0,0,1,0,0],l&&(g=Math.sin(l),x=[a=Math.cos(l),g,0,0,-g,a,0,0,0,0,1,0,0,0,0,1]),i!==s&&(x=Ht.multiply(x,[h=i/s,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),r!==s&&(x=Ht.multiply(x,[1,0,0,0,0,u=r/s,0,0,0,0,1,0,0,0,0,1]))),{cx:v,cy:e,tx:t,ty:m,r:s,stop:ar(c,s,d),scx:h,scy:u,matrix:x,d:l}},getConic:function(t,e,r,i,n,a,o,s,l){var e=function(t,e,r,i,n,a,o){var s=n-r,l=a-i,e=Bt(or(e,r,i,s,l,o),2),o=e[0],e=e[1];s=r+.5*s<=o?o-r:n-o;r=i+.5*l<=e?e-i:a-e;return n=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),[o,e,n,t]}(e,r,i,n,a,o,l),e=(r=Bt(e,4))[0],h=r[1],c=r[2];return{cx:e,cy:h,w:a-i,h:o-n,r:(c<<1)*s,deg:r[3],stop:ar(t,1,l)}},renderConic:function(c,t,e,r,i,n,a,o,s,l,h,u,_){s=(s=We.calRadius(i,n,a,o,s,l,h,u))||[[i,n],[i+a,n],[i+a,n+o],[i,n+o],[i,n]],t!==et.CANVAS&&t!==et.WEBGL||(h=(l=Mt.getCacheCanvas(a,o,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,a,o),ee.getConicGradientImage(r.cx-i,r.cy-n,r.w,r.h,r.stop,h.data),l.ctx.putImageData(h,0,0),e.save(),e.beginPath(),rr(e,s),e.clip(),e.closePath(),e.drawImage(l.canvas,i,n),e.restore(),l.ctx.clearRect(0,0,a,o))}},lr=At.isNil;function hr(t,e,r,i){lr(t.flexGrow)&&(t.flexGrow=e||0),lr(t.flexShrink)&&(t.flexShrink=r||0),lr(t.flexBasis)&&(t.flexBasis=i||0)}var cr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(i,t){var c,u,_,f,d,p,e,r,n,y,g,a,o,s,x=this,l=i[t];if("background"===t)Array.isArray(l)?(o=l.length,!lr(i.backgroundColor)||(a=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(l[o-1]))&&(i.backgroundColor=a[0],l=l.slice(0,o-1)),c=[],u=[],_=[],l.forEach(function(t){var e;lr(i.backgroundImage)&&((e=Ft.gradient.exec(t))?(c.push(e[0]),t=t.replace(e[0],"")):(e=Ft.img.exec(l))&&(c.push(e[0]),t=t.replace(e[0],""))),!lr(i.backgroundRepeat)||(e=/(no-?)?repeat(-?[xy])?/i.exec(t))&&u.push(e[0].toLowerCase()),!lr(i.backgroundPosition)||(e=t.match(Ft.position))&&_.push(e.join(" "))}),c.length&&(i.backgroundImage=c),u.length&&(i.backgroundRepeat=u),_.length&&(i.backgroundPosition=_,this.toFull(i,"backgroundPosition"))):(lr(i.backgroundImage)&&((a=Ft.gradient.exec(l))?(i.backgroundImage=a[0],l=l.replace(a[0],"")):(o=Ft.img.exec(l))&&(i.backgroundImage=o[0],l=l.replace(o[0],""))),!lr(i.backgroundRepeat)||(a=/(no-?)?repeat(-?[xy])?/i.exec(l))&&(i.backgroundRepeat=a[0].toLowerCase()),!lr(i.backgroundColor)||(o=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(l))&&(i.backgroundColor=o[0],l=l.replace(o[0],"")),!lr(i.backgroundPosition)||(a=l.match(Ft.position))&&(i.backgroundPosition=a.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===l?hr(i,0,0,"auto"):"auto"===l?hr(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(l)||/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(l)?(o=l.split(/\s+/),hr(i,parseFloat(o[0]),parseFloat(o[1]),o[2])):/^[\d.]+\s+[\d.]+$/.test(l)?(a=l.split(/\s+/),hr(i,parseFloat(a[0]),parseFloat(a[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(l)?(o=l.split(/\s+/),hr(i,parseFloat(o[0]),1,o[1])):/^[\d.]+$/.test(l)?hr(i,parseFloat(l),1,0):/^[\d.]+[pxremvwhina%]+/i.test(l)?hr(i,1,1,l):hr(i,0,1,"auto");else if("flexFlow"===t)(l=l.toString().split(/\s+/)).length&&(lr(i.flexDirection),i.flexDirection=l[0],1<l.length&&(i.flexWrap=l[1]));else if("borderRadius"===t){1===(l=l.toString().split("/")).length&&(l[1]=l[0]);for(var v=0;v<2;v++){var h=l[v].toString().split(/\s+/);0===h.length?l[v]=[0,0,0,0]:1===h.length?l[v]=[h[0],h[0],h[0],h[0]]:2===h.length?l[v]=[h[0],h[1],h[0],h[1]]:3===h.length?l[v]=[h[0],h[1],h[2],h[1]]:l[v]=h.slice(0,4)}this[t].forEach(function(t,e){lr(i[t])&&(i[t]=l[0][e]+" "+l[1][e])})}else"backgroundPosition"===t?(Array.isArray(l)||(l=[l]),f=this[t].map(function(t){return lr(i[t])}),l.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),x[t].forEach(function(t,e){f[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(d=l.toString().split(/\s*,\s*/)).length&&(d[1]=d[0]),this[t].forEach(function(t,e){lr(i[t])&&(i[t]=d[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(p=l.toString().split(/\s*,\s*/)).length?p[2]=p[1]=p[0]:2===p.length&&(p[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){lr(i[t])&&(i[t]=p[e])})):"margin"===t||"padding"===t?(g=i,o=this[a=t],a=g[a],lr(a)||(s=a.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi))&&(1===s.length?s[3]=s[2]=s[1]=s[0]:2===s.length?(s[2]=s[0],s[3]=s[1]):3===s.length&&(s[3]=s[1]),o.forEach(function(t,e){lr(g[t])&&(g[t]=s[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(y=(e=i)[r=t],lr(y)||(lr(e[r+"Width"])&&(n=/\b[\d.]+[pxremvwhina%]*\b/i.exec(y),e[r+"Width"]=n?n[0]:0),lr(e[r+"Style"])&&(n=/\b(solid|dashed|dotted)\b/i.exec(y),e[r+"Style"]=n?n[1]:"solid"),lr(e[r+"Color"])&&((n=/#[0-9a-f]{3,8}/i.exec(y))&&-1<[4,7,9].indexOf(n[0].length)?e[r+"Color"]=n[0]:/\btransparent\b/i.test(y)?e[r+"Color"]="transparent":(n=/rgba?\s*\(.+\)/i.exec(y),e[r+"Color"]=n?n[0]:"transparent")))):"textStroke"===t?((y=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(l))&&(i.textStrokeWidth=y[1]),(e=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(l))&&(i.textStrokeColor=e[0]),/\bfill\b/i.test(l)?i.textStrokeOver="fill":i.textStrokeOver="none"):this[t]&&this[t].forEach(function(t){lr(i[t])&&(i[t]=l)});return i}},i=T.STYLE_KEY,A=[[i.BACKGROUND_COLOR],[i.BORDER_BOTTOM_COLOR],[i.BORDER_LEFT_COLOR],[i.BORDER_RIGHT_COLOR],[i.BORDER_TOP_COLOR],[i.COLOR],[i.TEXT_STROKE_COLOR]],t=[[i.FONT_SIZE],[i.BORDER_BOTTOM_WIDTH],[i.BORDER_LEFT_WIDTH],[i.BORDER_RIGHT_WIDTH],[i.BORDER_TOP_WIDTH],[i.LEFT],[i.TOP],[i.RIGHT],[i.BOTTOM],[i.FLEX_BASIS],[i.WIDTH],[i.HEIGHT],[i.LINE_HEIGHT],[i.MARGIN_BOTTOM],[i.MARGIN_LEFT],[i.MARGIN_TOP],[i.MARGIN_RIGHT],[i.PADDING_TOP],[i.PADDING_RIGHT],[i.PADDING_BOTTOM],[i.PADDING_LEFT],[i.STROKE_WIDTH],[i.STROKE_MITERLIMIT],[i.LETTER_SPACING],[i.PERSPECTIVE],[i.TEXT_STROKE_WIDTH]],e=[[i.BACKGROUND_IMAGE],[i.FILL],[i.STROKE]],ur=[[i.BORDER_TOP_LEFT_RADIUS],[i.BORDER_TOP_RIGHT_RADIUS],[i.BORDER_BOTTOM_RIGHT_RADIUS],[i.BORDER_BOTTOM_LEFT_RADIUS]],_r={},fr=(A.forEach(function(t){_r[t]=!0}),{}),dr=(t.forEach(function(t){fr[t]=!0}),{}),pr=(ur.forEach(function(t){dr[t]=!0}),{}),i=(e.forEach(function(t){pr[t]=!0}),[[i.TRANSLATE_X],[i.TRANSLATE_Y],[i.TRANSLATE_Z],[i.SKEW_X],[i.SKEW_Y],[i.SCALE_X],[i.SCALE_Y],[i.SCALE_Z],[i.ROTATE_X],[i.ROTATE_Y],[i.ROTATE_Z]]),yr={},A=(i.forEach(function(t){yr[t]=!0}),{KEY_COLOR:A,KEY_EXPAND:i,KEY_GRADIENT:e,KEY_LENGTH:t,KEY_RADIUS:ur,COLOR_HASH:_r,EXPAND_HASH:yr,GRADIENT_HASH:pr,LENGTH_HASH:fr,RADIUS_HASH:dr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}}),gr=Pt.DOM,xr=Pt.GEOM,i=T.STYLE_KEY,vr={},mr=[],Er=a({},i.POINTER_EVENTS,!0),br=(a(e={},i.TRANSFORM,!0),a(e,i.TRANSLATE_X,!0),a(e,i.TRANSLATE_Y,!0),a(e,i.SKEW_X,!0),a(e,i.SKEW_Y,!0),a(e,i.SCALE_X,!0),a(e,i.SCALE_Y,!0),a(e,i.ROTATE_Z,!0),a(e,i.COLOR,!0),a(e,i.FONT_STYLE,!0),a(e,i.STROKE_WIDTH,!0),a(e,i.FILL,!0),a(e,i.STROKE_DASHARRAY,!0),a(e,i.STROKE_LINECAP,!0),a(e,i.STROKE_LINEJOIN,!0),a(e,i.STROKE_MITERLIMIT,!0),a(e,i.BACKGROUND_COLOR,!0),a(e,i.BACKGROUND_IMAGE,!0),a(e,i.BACKGROUND_POSITION_X,!0),a(e,i.BACKGROUND_POSITION_Y,!0),a(e,i.BACKGROUND_REPEAT,!0),a(e,i.BACKGROUND_SIZE,!0),a(e,i.STROKE,!0),a(e,i.BORDER_BOTTOM_COLOR,!0),a(e,i.BORDER_LEFT_COLOR,!0),a(e,i.BORDER_RIGHT_COLOR,!0),a(e,i.BORDER_TOP_COLOR,!0),a(e,i.BORDER_TOP_LEFT_RADIUS,!0),a(e,i.BORDER_TOP_RIGHT_RADIUS,!0),a(e,i.BORDER_BOTTOM_RIGHT_RADIUS,!0),a(e,i.BORDER_BOTTOM_LEFT_RADIUS,!0),a(e,i.VISIBILITY,!0),a(e,i.OPACITY,!0),a(e,i.Z_INDEX,!0),a(e,i.FILTER,!0),a(e,i.BOX_SHADOW,!0),a(e,i.OVERFLOW,!0),a(e,i.BACKGROUND_CLIP,!0),a(e,i.TEXT_STROKE_WIDTH,!0),a(e,i.TEXT_STROKE_COLOR,!0),a(e,i.TEXT_STROKE_OVER,!0),e),Tr={GEOM:vr,GEOM_KEY_SET:mr,IGNORE:Er,REPAINT:br,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){Tr.addGeom(e,t,r)}):t&&(vr.hasOwnProperty(t)||mr.push(t),(vr[t]=vr[t]||{})[e]=r||!0)},isIgnore:function(t){return Er.hasOwnProperty(t)},isGeom:function(t,e){return t&&e&&vr.hasOwnProperty(e)&&vr[e].hasOwnProperty(t)},isRepaint:function(t,e){return br.hasOwnProperty(t)||Tr.isGeom(e,t)},isValid:function(t,e){return!!e&&(!!gr.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!xr.hasOwnProperty(e))||(vr.hasOwnProperty(e)?vr[e].hasOwnProperty(t):"translatePath"===e)))}};function Ar(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function Mr(t){return 3*Math.floor(.5*t)}Tr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Tr.addGeom("$circle",["r"]),Tr.addGeom("$ellipse",["rx","ry"]),Tr.addGeom("$rect",["rx","ry"]),Tr.addGeom("$sector",["begin","end","edge","closure"]),Tr.addGeom("$polyline",["points","controls","start","end"]),Tr.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var Rr={kernelSize:Ar,outerSize:function(t){return Mr(Ar(t))},outerSizeByD:Mr,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),n=0,a=i;0<=a;a--){var o=Math.pow(Math.E,-Math.pow(a,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(o),n+=o}for(var s=1;s<=i;s++){var l=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(l),n+=l}if(1!==n)for(var h=0;h<e;h++)r[h]/=n;return r}},Or=T.STYLE_KEY,Sr=T.style2Upper,t=T.STYLE_KEY,Cr=t.POSITION,Ir=t.WIDTH,wr=t.HEIGHT,kr=t.TRANSLATE_X,Dr=t.TRANSLATE_Y,Lr=t.TRANSLATE_Z,Nr=t.SCALE_X,Pr=t.SCALE_Y,Fr=t.SCALE_Z,ur=t.SKEW_X,i=t.SKEW_Y,e=t.ROTATE_X,Br=t.ROTATE_Y,Hr=t.ROTATE_Z,Gr=t.ROTATE_3D,Yr=t.PERSPECTIVE,Wr=t.PERSPECTIVE_ORIGIN,Ur=t.TRANSFORM,Xr=t.TRANSFORM_ORIGIN,zr=t.BACKGROUND_IMAGE,Vr=t.BACKGROUND_COLOR,Kr=t.BACKGROUND_POSITION_X,jr=t.BACKGROUND_POSITION_Y,$r=t.BACKGROUND_SIZE,qr=t.OPACITY,Zr=t.Z_INDEX,Jr=t.COLOR,Qr=t.FONT_SIZE,ti=t.FONT_FAMILY,ei=t.FONT_WEIGHT,ri=t.FONT_STYLE,ii=t.LINE_HEIGHT,ni=t.TEXT_ALIGN,ai=t.FILTER,oi=t.VISIBILITY,si=t.BOX_SHADOW,li=t.POINTER_EVENTS,hi=t.FILL,ci=t.STROKE,ui=t.STROKE_WIDTH,_i=t.STROKE_DASHARRAY,fi=t.DISPLAY,di=t.FLEX_DIRECTION,pi=t.FLEX_GROW,yi=t.FLEX_SHRINK,gi=t.FLEX_BASIS,xi=t.JUSTIFY_CONTENT,vi=t.ALIGN_SELF,mi=t.ALIGN_ITEMS,Ei=t.MATRIX,bi=t.LETTER_SPACING,Ti=t.BACKGROUND_CLIP,Ai=t.WHITE_SPACE,n=t.TEXT_OVERFLOW,Mi=t.LINE_CLAMP,Ri=t.ORDER,Oi=t.FLEX_WRAP,Si=t.TRANSLATE_PATH,Ci=t.TEXT_STROKE_COLOR,Ii=t.TEXT_STROKE_WIDTH,wi=t.TEXT_STROKE_OVER,ki=t.WRITING_MODE,Di=r.AUTO,Li=r.PX,Ni=r.PERCENT,Pi=r.NUMBER,Fi=r.INHERIT,Bi=r.DEG,Hi=r.RGBA,Gi=r.STRING,Yi=r.REM,Wi=r.VW,Ui=r.VH,Xi=r.VMAX,zi=r.VMIN,Vi=r.GRADIENT,Ki=r.calUnit,ji=At.isNil,$i=At.rgba2int,qi=At.equalArr,Zi=At.replaceRgba2Hex,Ji=Tr.isGeom,Qi=Tr.GEOM,tn=Tr.GEOM_KEY_SET,en=Pt.VALID_STRING_VALUE,rn=A.COLOR_HASH,nn=A.LENGTH_HASH,an=A.RADIUS_HASH,on=A.GRADIENT_HASH,sn=A.EXPAND_HASH,ln=A.GRADIENT_TYPE,hn={translateX:kr,translateY:Dr,translateZ:Lr,scaleX:Nr,scaleY:Pr,scaleZ:Fr,skewX:ur,skewY:i,rotateX:e,rotateY:Br,rotateZ:Hr,rotate:Hr};function cn(t,e){t===Nr||t===Pr||t===Fr?e[1]=Pi:t===kr||t===Dr||t===Lr?e[1]===Pi&&(e[1]=Li):t===Yr?-1<[Pi,Ni,Bi].indexOf(e[1])&&(e[1]=Li):e[1]===Pi&&(e[1]=Bi)}function un(t){return-1<(t=(t=ji(t)?"":t).toString()).indexOf("-")?t.toString().toLowerCase().replace(/-([a-z])/gi,function(t,e){return e.toUpperCase()}):t}function _n(t){var e=t[Qr],r=dn(t[ti]),i=fn(t,r);return.5*(t[ii]-i)+e*(St.info[r]||St.info[Mt.defaultFontFamily]||St.info.arial).blr}function fn(t,e){return e=e||dn(t[ti]),t[Qr]*(St.info[e]||St.info[Mt.defaultFontFamily]||St.info.arial).lhr}function dn(t){for(var e=t.split(/\s*,\s*/),r=0,i=e.length;r<i;r++){var n=e[r].replace(/^['"]/,"").replace(/['"]$/,"");if(St.hasLoaded(n)||Mt.checkSupportFontFamily(n))return n}return Mt.defaultFontFamily}function pn(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Di){if(r!==Ir)break;e=e.domParent}else{if(i[1]===Li)return t*i[0];if(i[1]===Ni)t*=.01*i[0],e=e.domParent;else{if(i[1]===Yi)return t*i[0]*e.root.computedStyle[Qr];if(i[1]===Wi)return t*i[0]*e.root.width*.01;if(i[1]===Ui)return t*i[0]*e.root.height*.01;if(i[1]===Xi)return t*i[0]*Math.max(e.root.width,e.root.height)*.01;if(i[1]===zi)return t*i[0]*Math.min(e.root.width,e.root.height)*.01}}}return t}a(t={},Cr,!0),a(t,fi,!0),a(t,Or.BACKGROUND_REPEAT,!0),a(t,di,!0),a(t,pi,!0),a(t,yi,!0),a(t,Oi,!0),a(t,xi,!0),a(t,mi,!0),a(t,vi,!0),a(t,Or.OVERFLOW,!0),a(t,Or.MIX_BLEND_MODE,!0),a(t,Or.STROKE_LINECAP,!0),a(t,Or.STROKE_LINEJOIN,!0),a(t,Or.STROKE_MITERLIMIT,!0),a(t,Or.FILL_RULE,!0),a(t,qr,!0),a(t,Zr,!0),a(t,Ti,!0),a(t,n,!0),a(t,Mi,!0);var yn=t,gn=(a(ur={},Vr,!0),a(ur,Or.BORDER_TOP_COLOR,!0),a(ur,Or.BORDER_RIGHT_COLOR,!0),a(ur,Or.BORDER_BOTTOM_COLOR,!0),a(ur,Or.BORDER_LEFT_COLOR,!0),ur),xn=(a(i={},Or.BORDER_TOP_LEFT_RADIUS,!0),a(i,Or.BORDER_TOP_RIGHT_RADIUS,!0),a(i,Or.BORDER_BOTTOM_RIGHT_RADIUS,!0),a(i,Or.BORDER_BOTTOM_LEFT_RADIUS,!0),a(i,Xr,!0),a(i,Wr,!0),i);var vn={normalize:function(o){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!At.isObject(o))return{};var l,s,e,r,h,i,c={},u=(o=At.extend({},o)).border;return u&&cr.toFull(o,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){cr.toFull(o,t)}),(u=o.borderWidth)&&cr.toFull(o,"borderWidth"),(u=o.borderColor)&&cr.toFull(o,"borderColor"),(u=o.borderStyle)&&cr.toFull(o,"borderStyle"),(u=o.borderRadius)&&cr.toFull(o,"borderRadius"),(u=o.background)&&cr.toFull(o,"background"),u=o.backgroundPosition,ji(u)||cr.toFull(o,"backgroundPosition"),(u=o.flex)&&cr.toFull(o,"flex"),(u=o.flexFlow)&&cr.toFull(o,"flexFlow"),u=o.margin,ji(u)||cr.toFull(o,"margin"),u=o.padding,ji(u)||cr.toFull(o,"padding"),(u=o.textStroke)&&cr.toFull(o,"textStroke"),(u=o.rotate3d)&&cr.toFull(o,"rotate3d"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){u=o[t],ji(u)||cr.toFull(o,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){void 0!==o[t]&&o.transform&&Mt.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;ji(o[e])&&(o[e]=t)}),void 0!==(u=o.backgroundImage)&&(u?Array.isArray(u)?c[zr]=u.map(function(t){return t?Ft.gradient.test(t)?[sr.parseGradient(t),Vi]:Ft.img.test(t)?[Ft.img.exec(t)[2],Gi]:null:null}):Ft.gradient.test(u)?c[zr]=[[sr.parseGradient(u),Vi]]:Ft.img.test(u)?c[zr]=[[Ft.img.exec(u)[2],Gi]]:c[zr]=[null]:c[zr]=[null]),void 0!==(u=o.backgroundColor)&&(u=u||"transparent",(t=/^#[0-9a-f]{3,8}/i.exec(u))&&-1<[4,7,9].indexOf(t[0].length)?c[Vr]=[$i(t[0]),Hi]:(t=/rgba?\s*\(.+\)/i.exec(u),c[Vr]=[$i(t?t[0]:[0,0,0,0]),Hi])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){void 0!==(u=o[t])&&(u=u||0,t=e?jr:Kr,Array.isArray(u)||(u=[u]),c[t]=u.map(function(t){var e;return/^[-+]?[\d.]/.test(t)?(e=Ki(t),-1<[Pi,Bi].indexOf(e[1])&&(e[1]=Li),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Ni]}))}),void 0!==(u=o.backgroundSize)&&(Array.isArray(u)||(u=[u]),c[$r]=u.map(function(t){if(!t)return[[0,Di],[0,Di]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0].toLowerCase()||"cover"===e[0].toLowerCase()?e[1]=e[0].toLowerCase():e[1]="auto");for(var r=[],i=0;i<2;i++){var n,a=e[i].toLowerCase();/^[-+]?[\d.]/.test(a)?(n=Ki(a),-1<[Pi,Bi].indexOf(n[1])&&(n[1]=Li),r.push(n)):"contain"===a||"cover"===a?r.push([a,Gi]):r.push([0,Di])}return r}return[[0,Di],[0,Di]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=o[t="border"+t+"Color"];void 0!==e&&(c[Or[Sr(t)]]=[$i(e||"transparent"),Hi])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){if(void 0!==(e=o[t="border"+t+"Radius"])){var e,r=(e=e||0).toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n=r[i];/^[-+]?[\d.]/.test(n)?(n=Ki(n),-1<[Pi,Bi].indexOf(n[1])&&(n[1]=Li),n[0]<0&&(n[0]=0),r[i]=n):r[i]=[0,Li]}c[Or[Sr(t)]]=r}}),null===(u=o.transform)?c[Ur]=null:void 0!==u&&(l=c[Ur]=[],(t=(u||"").toString().match(/\w+\(.+?\)/g))&&t.forEach(function(t){var e,r,i,n,a,o=t.indexOf("("),s=t.slice(0,o),o=t.slice(o+1,t.length-1);"matrix"===s?6===(t=6<(t=(t=o.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,6):t).length&&l.push([Ei,[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]]):"matrix3d"===s?16===(t=16<(t=(t=o.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,16):t).length&&l.push([Ei,t]):"perspective"===s?((t=Ki(o))[0]<0&&(t[0]=0),cn(Yr,t),l.push([Yr,t])):"rotate3d"===s?4===(t=o.toString().split(/\s*,\s*/)).length&&(a=Ki(t[3]),cn(Gr,a),t[0]=parseFloat(t[0].replace("(","")),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=a,l.push([Gr,t])):hn.hasOwnProperty(s)?(cn(a=hn[s],t=Ki(o)),l.push([a,t])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(s)?{translate3d:!0,scale3d:!0}.hasOwnProperty(s)&&(1===(a=o.toString().split(/\s*,\s*/)).length?(a[1]="scale3d"===s?[1]:[0],a[2]="scale3d"===s?[1]:[0]):2===a.length&&(a[2]="scale3d"===s?[1]:[0]),3===a.length&&(t=Or[Sr(s+"X")],e=Or[Sr(s+"Y")],r=Or[Sr(s+"Z")],i=Ki(a[0]),n=Ki(a[1]),a=Ki(a[2]),cn(t,i),cn(e,n),cn(r,a),l.push([t,i]),l.push([e,n]),l.push([r,a]))):(1===(t=o.toString().split(/\s*,\s*/)).length&&(t[1]="scale"===s?t[0]:[0]),2===t.length&&(i=Or[Sr(s+"X")],e=Or[Sr(s+"Y")],n=Ki(t[0]),r=Ki(t[1]),cn(i,n),cn(e,r),l.push([i,n]),l.push([e,r])))})),void 0!==(u=o.perspective)&&((t=Ki(u||0))[0]<0&&(t[0]=0),cn(Yr,t),c[Yr]=t),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(void 0!==(u=o[t])){null===u&&(u="");var e=c[Or[Sr(t)]]=[],r=u.toString().match(Ft.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var n,a=r[i];/^[-+]?[\d.]/.test(a)?(n=Ki(a),-1<[Pi,Bi].indexOf(n[1])&&(n[1]=Li),e.push(n)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[a],Ni]),ji(e[i][0])&&(e[i][0]=50))}}else e.push([50,Ni]),e.push([50,Ni])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=o[t];void 0!==e&&(null===e&&(e=0===t.indexOf("scale")?1:0),cn(t=hn[t],e=Ki(e)),c[t]=e)}),void 0!==(u=o.rotate3d)&&(4===(t=(u||"").toString().split(/\s*,\s*/)).length&&(e=Ki(t[3]),cn(Gr,e),t[0]=parseFloat(t[0].replace("(","")),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=e),c[Gr]=t),void 0!==(u=o.opacity)&&(null===u&&(u=1),u=parseFloat(u),isNaN(u)?c[qr]=1:(u=Math.max(u,0),u=Math.min(u,1),c[qr]=u)),void 0!==(u=o.zIndex)&&(c[Zr]=parseInt(u)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=o[t];void 0!==r&&("auto"===r?r=[0,Di]:(r=Ki(r||0),-1<[Pi,Bi].indexOf(r[1])&&(r[1]=Li)),e=Or[Sr(t)],c[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),void 0!==(u=o.flexBasis)&&(/content/i.test(u)?c[gi]=[u,Gi]:/^[\d.]/.test(u)?((e=c[gi]=Ki(u))[0]=Math.max(e[0],0),-1<[Pi,Bi].indexOf(e[1])&&(e[1]=Li)):c[gi]=[0,Di]),void 0!==(u=o.order)&&(c[Ri]=parseInt(u)||0),void 0!==(u=o.color)&&(/inherit/i.test(u)?c[Jr]=[[],Fi]:Ft.gradient.test(u)?c[Jr]=[sr.parseGradient(u),Vi]:c[Jr]=[$i(u),Hi]),void 0!==(u=o.textStrokeColor)&&(/inherit/i.test(u)?c[Ci]=[[],Fi]:Ft.gradient.test(u)?c[Ci]=[sr.parseGradient(u),Vi]:c[Ci]=[$i(u),Hi]),void 0!==(u=o.fontSize)&&(/inherit/i.test(u)||(r=Ki(u))<0?c[Qr]=[0,Fi]:(-1<[Pi,Bi].indexOf(r[1])&&(r[1]=Li),c[Qr]=r)),void 0!==(u=o.textStrokeWidth)&&(/inherit/i.test(u)||(i=Ki(u))<0?c[Ii]=[0,Fi]:(-1<[Pi,Bi,Ni].indexOf(i[1])&&(i[1]=Li),c[Ii]=i)),void 0!==(u=o.textStrokeOver)&&(null===u||/inherit/i.test(u)?c[wi]=[0,Fi]:(t=Pt.INHERIT.textStrokeOver,/fill/i.test(u)&&(t="fill"),c[wi]=[t,Gi])),void 0!==(u=o.fontWeight)&&(/bold/i.test(u)?c[ei]=[700,Pi]:/normal/i.test(u)?c[ei]=[400,Pi]:/lighter/i.test(u)?c[ei]=[200,Pi]:/inherit/i.test(u)?c[ei]=[0,Fi]:c[ei]=[Math.max(0,parseInt(u))||400,Pi]),void 0!==(u=o.fontStyle)&&(null===u||/inherit/i.test(u)?c[ri]=[0,Fi]:(e=Pt.INHERIT.fontStyle,/italic/i.test(u)?e="italic":/oblique/i.test(u)&&(e="oblique"),c[ri]=[e,Gi])),void 0!==(u=o.fontFamily)&&(null===u||/inherit/i.test(u)?c[ti]=[0,Fi]:c[ti]=[u.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),Gi]),void 0!==(u=o.writingMode)&&(null===u||/inherit/i.test(u)?c[ki]=[0,Fi]:(r=Pt.INHERIT.writingMode,/vertical-?rl/i.test(u)?r="verticalRl":/vertical-?lr/i.test(u)&&(r="verticalLr"),c[ki]=[r,Gi])),void 0!==(u=o.textAlign)&&(null===u||/inherit/i.test(u)?c[ni]=[0,Fi]:(i="left",/center/i.test(u)?i="center":/right/i.test(u)&&(i="right"),c[ni]=[i,Gi])),void 0!==(u=o.lineHeight)&&(/inherit/i.test(u)?c[ii]=[0,Fi]:/normal/i.test(u)?c[ii]=[0,Di]:/^[\d.]+/i.test(u)?(t=Ki(u),-1<[Bi].indexOf(t[1])&&(t[1]=Pi),c[ii]=t):(e=Math.max(0,parseFloat(u))||"normal",c[ii]="normal"===e?[null,Di]:[e,Pi])),void 0!==(u=o.letterSpacing)&&(null===u||/inherit/i.test(u)?c[bi]=[0,Fi]:/normal/i.test(u)?c[bi]=[0,Li]:/^[-+]?[\d.]/.test(u)?(r=Ki(u),-1<[Pi,Bi].indexOf(r[1])&&(r[1]=Li),c[bi]=r):c[bi]=[parseFloat(u)||0,Li]),void 0!==(u=o.whiteSpace)&&(null===u||/inherit/i.test(u)?c[Ai]=[0,Fi]:c[Ai]=[u,Gi]),void 0!==(u=o.lineClamp)&&(u=parseInt(u)||0,c[Mi]=Math.max(0,u)),void 0!==(u=o.fill)&&(u?Array.isArray(u)?u.length?c[hi]=u.map(function(t){return t?Ft.gradient.test(t)?[sr.parseGradient(t),Vi]:[$i(t),Hi]:["none",Gi]}):c[hi]=[["none",Gi]]:Ft.gradient.test(u)?c[hi]=[[sr.parseGradient(u),Vi]]:c[hi]=[[$i(u),Hi]]:c[hi]=[["none",Gi]]),void 0!==(u=o.stroke)&&(u?Array.isArray(u)?u.length?c[ci]=u.map(function(t){return t?Ft.gradient.test(t)?[sr.parseGradient(t),Vi]:[$i(t),Hi]:["none",Gi]}):c[ci]=[["none",Gi]]:Ft.gradient.test(u)?c[ci]=[[sr.parseGradient(u),Vi]]:c[ci]=[[$i(u),Hi]]:c[ci]=[["none",Gi]]),void 0!==(u=o.strokeWidth)&&(Array.isArray(u)||(u=[u]),c[ui]=u.map(function(t){t=Ki(t);return-1<[Pi,Bi].indexOf(t[1])&&(t[1]=Li),t[0]=Math.max(t[0],0),t})),void 0!==(u=o.strokeDasharray)&&(Array.isArray(u)?c[_i]=u.map(function(t){t=(t||"").toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(i=(u||"").toString().match(/[\d.]+/g))?((i=i.map(function(t){return parseFloat(t)})).length%2==1&&i.push(i[i.length-1]),c[_i]=[i]):c[_i]=[[]]),void 0!==(u=o.filter)&&(s=null,(t=(Zi(u)||"").match(/[\w-]+\s*\(.+?\)/gi))&&t.forEach(function(t){var e=/([\w-]+)\s*\((\s*.+\s*)\)/i.exec(t);if(e){var r=e[1].toLowerCase(),e=e[2];if("drop-shadow"===r||"dropshadow"===r){var i=/([-+]?[\d.]+[pxremvwhina%]*)[\s,]+([-+]?[\d.]+[pxremvwhina%]*)[\s,]+(?:([-+]?[\d.]+[pxremvwhina%]*)[\s,])?([-+]?[\d.]+[pxremvwhina%]*\s*)?/gi.exec(t);if(i){s=s||[];for(var n=[],a=1;a<=4;a++){var o=i[a];o?(o=Ki(o),-1<[Pi,Bi].indexOf(o[1])&&(o[1]=Li),2<a&&o[0]<0&&(o=0),n.push(o)):n.push([0,1])}t=/#[a-f\d]{3,8}/i.exec(t);t?n.push($i(t[0])):n.push([0,0,0,1]),s.push(["dropShadow",n])}}else{t=/([-+]?[\d.]+\s*[pxremvwhdg%]*)/i.exec(e);t&&(s=s||[],e=Ki(t[0]),"blur"===r?-1<[Bi,Ni].indexOf(e[1])||(e[1]===Pi&&(e[1]=Li),e[0]=Math.max(e[0],0),s.push([r,e])):"hue-rotate"===r||"huerotate"===r?-1!==[Pi,Bi].indexOf(e[1])&&(e[1]=Bi,s.push(["hueRotate",e])):"saturate"!==r&&"brightness"!==r&&"grayscale"!==r&&"contrast"!==r&&"sepia"!==r&&"invert"!==r||-1!==[Pi,Ni].indexOf(e[1])&&(e[0]=Math.max(e[0],0),e[1]=Ni,s.push([r,e])))}}}),c[ai]=s),void 0!==(u=o.visibility)&&(null===u||/inherit/i.test(u)?c[oi]=[0,Fi]:(e=Pt.INHERIT.visibility,/hidden/i.test(u)&&(e="hidden"),c[oi]=[e,Gi])),void 0!==(u=o.pointerEvents)&&(null===u||/inherit/i.test(u)?c[li]=[0,Fi]:(r=Pt.INHERIT.pointerEvents,/none/i.test(u)&&(r="none"),c[li]=[r,Gi])),void 0!==(u=o.boxShadow)&&(h=null,(i=(Zi(u)||"").split(","))&&i.forEach(function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?/i.exec(t);if(e){h=h||[];for(var r=[],i=1;i<=4;i++){var n=e[i];n?(n=Ki(n),-1<[Pi,Bi].indexOf(n[1])&&(n[1]=Li),2<i&&n[0]<0&&(n=0),r.push(n)):r.push([0,1])}var a=/#[a-f\d]{3,8}/i.exec(t);a?r.push($i(a[0])):r.push([0,0,0,1]),r.push(/inset/i.test(t)?"inset":"outset"),h.push(r)}}),c[si]=h),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){var e;o.hasOwnProperty(t)&&(c[Or[Sr(t)]]=(e=un(e=o[t=t]),t=en[t],-1<(e=t.indexOf(e))?t[e]:t[0]))}),["flexGrow","flexShrink"].forEach(function(t){o.hasOwnProperty(t)&&(c[Or[Sr(t)]]=Math.max(parseFloat(o[t])||0,0))}),void 0!==(u=o.zIndex)&&(c[Zr]=parseFloat(u)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var r;o.hasOwnProperty(t)&&(r=o[t],Array.isArray(r)||(r=[r]),"backgroundRepeat"===t&&r.forEach(function(t,e){t&&(r[e]=un(t))}),c[Or[Sr(t)]]=r)}),tn.forEach(function(t){o.hasOwnProperty(t)&&(c[t]=o[t])}),c},setFontStyle:function(t){var e=t[Qr]||0,r=t[ti]||Mt.defaultFontFamily||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t[ri]||"normal")+" "+(t[ei]||"400")+" "+e+"px/"+e+"px "+r},getBaseline:_n,getVerticalBaseline:function(t){return t[ii]-_n(t)},calRelative:function(t,e,r,i,n){return r[1]===Di?r=0:-1<[Li,Pi].indexOf(r[1])?r=r[0]:r[1]===Ni?r=pn(r[0],i,n?Ir:wr):r[1]===Yi?r=r[0]*i.root.computedStyle[Qr]:r[1]===Wi?r=r[0]*i.root.width*.01:r[1]===Ui?r=r[0]*i.root.height*.01:r[1]===Xi?r=r[0]*Math.max(i.root.width,i.root.height)*.01:r[1]===zi&&(r=r[0]*Math.min(i.root.width,i.root.height)*.01),r},equalStyle:function(t,e,r,c){if(!e||!r)return e===r;if(t===Ur){if(e.length!==r.length)return!1;for(var i=0,u=e.length;i<u;i++){var _=e[i],f=r[i];if(_[0]!==f[0])return!1;if(!qi(_[1],f[1]))return!1}return!0}if(t===ai){if(e.length!==r.length)return!1;for(var n=0,d=e.length;n<d;n++)if(!qi(e[n],r[n]))return!1}if(t===$r){if(e.length!==r.length)return!1;for(var a=0,p=e.length;a<p;a++){var o=e[a],s=r[a];if(o[0][0]!==s[0][0]||o[0][1]!==s[0][1]||o[1][0]!==s[1][0]||o[1][1]!==s[1][1])return!1}return!0}if(t===Xr||an.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===Kr||t===jr||nn.hasOwnProperty(t)||sn.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===si)return qi(e,r);if(t===Jr||t===Ci){if(e[1]!==r[1])return!1;if(e[1]===Hi)return qi(e[0],r[0])}if(rn.hasOwnProperty(t))return e[1]===r[1]&&qi(e[0],r[0]);if(on.hasOwnProperty(t)&&e.k===r.k&&ln.hasOwnProperty(e.k)){var y=e.v,g=r.v;if(e.d!==r.d||y.length!==g.length)return!1;for(var l=0,x=y.length;l<x;l++){var h=y[l],v=g[l];if(h.length!==v.length)return!1;for(var m=0;m<4;m++)if(h[0][m]!==v[0][m])return!1;if(1<h.length&&(h[1][0]!==v[1][0]||h[1][1]!==v[1][1]))return!1}return!0}return Ji(c.tagName,t)&&(c.isMulti||Array.isArray(e)&&Array.isArray(r))?qi(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[Cr])||"absolute"===t},cloneStyle:function(c,u){for(var t={},_=0,f=(u=u||Object.keys(c).map(function(t){return t=Qi.hasOwnProperty(t)?t:parseInt(t)})).length;_<f;_++){var e=u[_],r=c[e];if(e===zr)t[e]=r.map(function(t){return t[1]===Vi?[At.clone(t[0]),t[1]]:t});else if(e===hi||e===ci)t[e]=r.map(function(t){return t[1]===Vi?[At.clone(t[0]),t[1]]:t[1]===Hi?[t[0].slice(0),t[1]]:t});else if(e===Ur){if(r){for(var i=r.slice(0),n=0,d=i.length;n<d;n++)i[n]=i[n].slice(0),i[n][1]=i[n][1].slice(0);t[e]=i}}else if(e===ai){if(r){for(var a=r.slice(0),o=0,p=a.length;o<p;o++){a[o]=a[o].slice(0);var y=a[o][0];a[o][1]=a[o][1].slice(0),"dropShadow"===y&&function(){var r=a[o][1];r.forEach(function(t,e){r[e]=r[e].slice(0)})}()}t[e]=a}}else if(e===si)r&&(r=r.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),t[e]=r);else if(e===Si)r&&(t[e]=r.map(function(t){return t.slice(0)}));else if(e===Jr||e===Ci)r&&(r[1]===Vi?t[e]=[At.clone(r[0]),r[1]]:r[1]===Hi?t[e]=[r[0].slice(0),r[1]]:t[e]=r.slice(0));else if(yn.hasOwnProperty(e))t[e]=r;else if(Qi.hasOwnProperty(e))t[e]=At.clone(r);else if(r){var s=t[e]=r.slice(0);if(e===Kr||e===jr)for(var l=0,g=s.length;l<g;l++)s[l]=s[l].slice(0);else if(e===$r)for(var h=0,x=s.length;h<x;h++)s[h]=s[h].slice(0),s[h][0]=s[h][0].slice(0),s[h][1]=s[h][1].slice(0);else if(gn.hasOwnProperty(e))s[0]=s[0].slice(0);else if(xn.hasOwnProperty(e))s[0]=s[0].slice(0),s[1]=s[1].slice(0);else if(e===Ur)for(var v=0,m=s.length;v<m;v++)s[v]=s[v].slice(0);else e===Gr&&(s[3]=s[3].slice(0))}}return t},calNormalLineHeight:fn,calFontFamily:dn,spreadBoxShadow:function(t,e){var o,s,l,h,r=(t=Bt(t,4))[0],i=t[1],n=t[2],t=t[3];return Array.isArray(e)&&(h=l=s=o=0,e.forEach(function(t){var t=Bt(t,6),e=t[0],r=t[1],i=t[2],n=t[3],a=t[4];"inset"!==t[5]&&0<a[3]&&(t=Rr.outerSize(i),t+=n,o=Math.min(o,e-t),s=Math.min(s,e-t),l=Math.max(l,e+t),h=Math.max(h,r+t))}),r+=o,i+=s,n+=l,t+=h),[r,i,n,t]},spreadFilter:function(t,e){var i=(t=Bt(t,4))[0],n=t[1],a=t[2],o=t[3];return Array.isArray(e)&&e.forEach(function(t){var e,t=Bt(t,2),r=t[0],t=t[1];"blur"===r&&0<t?(e=Rr.kernelSize(t),(e=Rr.outerSizeByD(e))&&(i-=e,n-=e,a+=e,o+=e)):"dropShadow"===r&&(e=Rr.kernelSize(t[2]),r=Rr.outerSizeByD(e),(t[0]||t[1]||r)&&((t[0]<=0||0<t[0]&&t[0]<r)&&(i+=t[0]-r),(t[1]<=0||0<t[1]&&t[1]<r)&&(n+=t[1]-r),(t[0]<0&&-t[0]<r||0<=t[0])&&(a+=t[0]+r),(t[1]<0&&-t[1]<r||0<=t[1])&&(o+=t[1]+r)))}),[i,n,a,o]}};function mn(t,e,r,i){r-=t,t=i-e,i=Math.atan(Math.abs(t)/Math.abs(r));return r<0&&0<=t?Math.PI-i:r<0&&t<0?i-Math.PI:0<=r&&0<=t?i:-i}function En(t){var e=Math.sin(t),t=Math.cos(t),r=Ht.identity();return r[0]=r[5]=t,r[1]=e,r[4]=-e,r}function bn(t,e){var t=Bt(t,6),r=t[0],i=t[1],n=t[2],a=t[3],o=t[4],t=t[5],e=Bt(e,6),s=e[0],l=e[1],h=e[2],c=e[3],u=e[4],n=(n-r)*(t-i)-(o-r)*(a-i),t=(h-s)*(e[5]-l)-(u-s)*(c-l);return 0<n&&t<0||n<0&&0<t}var e={exchangeOrder:function(t,e){i=(t=Bt(t=t,6))[0],n=t[1],a=t[2],o=t[3],s=t[4],t=t[5],l=[0,1,2],a<i&&a<s?(i=(r=[a,o,i,n])[0],n=r[1],a=r[2],o=r[3],l[0]=1,l[1]=0):s<a&&s<i&&(i=(r=[s,t,i,n])[0],n=r[1],s=r[2],t=r[3],l[0]=2,l[2]=0),i===a?o<n&&(i=(r=[a,o,i,n])[0],n=r[1],a=r[2],o=r[3],r=l[0],l[0]=l[1],l[1]=r):i===s&&t<n&&(i=(r=[s,t,i,n])[0],n=r[1],s=r[2],t=r[3],r=l[0],l[0]=l[2],l[2]=r),(a-i)*(t-n)-(s-i)*(o-n)<0&&(a=(r=[s,t,a,o])[0],o=r[1],s=r[2],t=r[3],r=l[1],l[1]=l[2],l[2]=r);var r=[i,n,a,o,s,t,l],i=Bt(r,7),n=i[0],a=i[1],o=i[2],s=i[3],t=i[4],l=i[5],e=Bt(function(t,e){for(var r=[],i=0,n=e.length;i<n;i++){var a=e[i];r.push(t[2*a]),r.push(t[2*a+1])}return r}(e,i[6]),6);return[[n,a,o,s,t,l],[e[0],e[1],e[2],e[3],e[4],e[5]]]},isOverflow:bn,transform:function(c,t){var e,r=(n=Bt(c,6))[0],u=n[1],i=n[2],_=n[3],f=n[4],n=n[5],d=(a=Bt(t,6))[0],p=a[1],y=a[2],g=a[3],x=a[4],a=a[5],c=bn(c,t);(t=Ht.identity())[12]=-r,t[13]=-u;0!==(s=mn(r,u,i,_))&&(e=En(-s),t=Ht.multiply(e,t));var v=te.pointsDistance(r,u,i,_),o=te.pointsDistance(d,p,y,g),m=((h=Ht.identity())[12]=-d,h[13]=-p,s=mn(d,p,y,g)),s=(0!==s&&(e=En(-s),h=Ht.multiply(e,h)),Math.abs(Ht.calPoint([f,n],t)[1])),l=Math.abs(Ht.calPoint([x,a],h)[1]),h=(v===o&&s===l||(e=Ht.identity(),v!==o&&(e[0]=o/v),s!==l&&(e[5]=l/s),t=Ht.multiply(e,t)),t),v=(o=Bt(Ht.calPoint([r,u],h),2))[0],l=o[1],r=(s=Bt(Ht.calPoint([i,_],h),2))[0],u=s[1],i=(o=Bt(Ht.calPoint([f,n],h),2))[0],_=o[1],s=te.pointsDistance(v,l,r,u),f=te.pointsDistance(v,l,i,_),n=te.pointsDistance(i,_,r,u),h=te.pointsDistance(d,p,y,g),o=te.pointsDistance(d,p,x,a),v=te.pointsDistance(x,a,y,g),l=te.angleBySide(n,s,f),i=te.angleBySide(v,h,o);return l!==i&&((e=Ht.identity())[4]=Math.tan(l-.5*Math.PI)+Math.tan(.5*Math.PI-i),t=Ht.multiply(e,t)),c&&(t[1]=-t[1],t[5]=-t[5],t[13]=-t[13]),(e=0!==m?En(m):Ht.identity())[12]=d,e[13]=p,Ht.multiply(e,t)}},Tn=1e-6;function An(t){var e,r,i=[],n=t[3],a=t[2]/n,o=t[1]/n,s=(3*o-a*a)/3,o=(2*a*a*a-9*o*a+27*(t[0]/n))/27,t=a/3,n=o*o/4+s*s*s/27,a=o/2;return 0<(n=Math.abs(n)<=Tn?0:n)?(e=0<=(r=-a+(o=Math.sqrt(n)))?Math.pow(r,1/3):-Math.pow(-r,1/3),0<=(r=-a-o)?e+=Math.pow(r,1/3):e-=Math.pow(-r,1/3),i.push(e-t)):n<0?(o=Math.sqrt(-s/3),r=Math.atan2(Math.sqrt(-n),-a)/3,e=Math.cos(r),s=Math.sin(r),n=Math.sqrt(3),i.push(2*o*e-t),i.push(-o*(e+n*s)-t),i.push(-o*(e-n*s)-t)):(r=0<=a?-Math.pow(a,1/3):Math.pow(-a,1/3),i.push(2*r-t),i.push(-r-t)),i}var Mn={getRoots:function(c){for(var u=c.length-1,_=u;0<=_&&Math.abs(c[_])<1e-12;_--)u--;var t,e,r,i,n,a,f,o,d,s,p,l,h,y=[];switch(u){case 1:l=[],0!==(h=(p=c)[1])&&l.push(-p[0]/h),y=l;break;case 2:p=[],l=(h=c)[2],s=h[1]/l,0<(h=s*s-4*(h[0]/l))?(l=Math.sqrt(h),p.push(.5*(-s+l)),p.push(.5*(-s-l))):0==h&&p.push(.5*-s),y=p;break;case 3:y=An(c);break;case 4:s=[],n=(t=c)[4],a=t[3]/n,f=t[2]/n,o=t[1]/n,t=t[0]/n,n=An([1,-f,a*o-4*t,-a*a*t+4*f*t-o*o].reverse())[0],d=a*a/4-f+n,0<(d=Math.abs(d)<=Tn?0:d)?(r=(e=3*a*a/4-(i=Math.sqrt(d))*i-2*f)+(o=(4*a*f-8*o-a*a*a)/(4*i)),e=e-o,Math.abs(r)<=Tn&&(r=0),Math.abs(e)<=Tn&&(e=0),0<=r&&(o=Math.sqrt(r),s.push(-a/4+(i+o)/2),s.push(-a/4+(i-o)/2)),0<=e&&(r=Math.sqrt(e),s.push(-a/4+(r-i)/2),s.push(-a/4-(r+i)/2))):d<0||-Tn<=(o=n*n-4*t)&&(o<0&&(o=0),o=2*Math.sqrt(o),Tn<=(e=3*a*a/4-2*f)+o&&(r=Math.sqrt(e+o),s.push(-a/4+r/2),s.push(-a/4-r/2)),Tn<=e-o&&(i=Math.sqrt(e-o),s.push(-a/4+i/2),s.push(-a/4-i/2))),y=s}return y}};function Rn(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function On(t,e,r){var i=(2*e+r)/3,n=(e+2*r)/3;return(t(e)+3*t(i)+3*t(n)+t(r))*(r-e)/8}function Sn(e){var t,r,i,n,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(6===e.length?e=[[e[0],e[1]],[e[2],e[3]],[e[4],e[5]]]:8===e.length&&(e=[[e[0],e[1]],[e[2],e[3]],[e[4],e[5]],[e[6],e[7]]]),2===e.length)return t=(r=Bt(e[0],2))[0],r=r[1],i=(n=Bt(e[1],2))[0],n=n[1],Math.sqrt(Math.pow(i-t,2)+Math.pow(n-r,2));return function t(e,r,i,n){var n=3<arguments.length&&void 0!==n?n:.001,a=(r+i)/2,o=On(e,r,i),s=On(e,r,a),l=On(e,a,i),o=s+l-o;return Math.abs(o)<=15*n?s+l+o/15:t(e,r,a,n/2)+t(e,a,i,n/2)}(function(t){return Rn(Cn(t,e))},a,o)}function Cn(t,e,r){r=2<arguments.length&&void 0!==r?r:1;return 4===e.length?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Bt(e,4),i=e[0],n=e[1],a=e[2],e=e[3],c=(i=Bt(i,2))[0],i=i[1],o=(n=Bt(n,2))[0],n=n[1],s=(a=Bt(a,2))[0],a=a[1],e=Bt(e,2),u=e[0],e=e[1],l=0,h=0;return 0===r?(l=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*o+3*(1-t)*Math.pow(t,2)*s+Math.pow(t,3)*u,h=Math.pow(1-t,3)*i+3*t*Math.pow(1-t,2)*n+3*(1-t)*Math.pow(t,2)*a+Math.pow(t,3)*e):1===r?(l=3*((1-t)*(1-t)*(o-c)+2*(1-t)*t*(s-o)+t*t*(u-s)),h=3*((1-t)*(1-t)*(n-i)+2*(1-t)*t*(a-n)+t*t*(e-a))):2===r?(l=6*(s-2*o+c)*(1-t)+6*(u-2*s+o)*t,h=6*(a-2*n+i)*(1-t)+6*(e-2*a+n)*t):3===r&&(l=6*(u-3*s+3*o-c),h=6*(e-3*a+3*n-i)),[l,h]}(t,e,r):3===e.length?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Bt(e,3),i=e[0],n=e[1],e=e[2],a=(i=Bt(i,2))[0],i=i[1],o=(n=Bt(n,2))[0],n=n[1],e=Bt(e,2),s=e[0],e=e[1],l=0,h=0;return 0===r?(l=Math.pow(1-t,2)*a+2*t*(1-t)*o+Math.pow(t,2)*s,h=Math.pow(1-t,2)*i+2*t*(1-t)*n+Math.pow(t,2)*e):1===r?(l=2*(1-t)*(o-a)+2*t*(s-o),h=2*(1-t)*(n-i)+2*t*(e-n)):2===r&&(l=2*(s-2*o+a),h=2*(e-2*n+i)),[l,h]}(t,e,r):void 0}function In(e,t){for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:20,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:.001,c=function(t){return Rn(Cn(t,e))},u=t*r,n=r,a=n,o=0;o<h;o++){var s=On(c,0,n)-u;if(Math.abs(s)<i)break;var l=Rn(Cn(n,e,1));if(n-=s*l/(s*Rn(Cn(n,e,2))+l*l),Math.abs(n-a)<i)break;a=n}return Cn(n,e,0)}function wn(c,t){var e=Bt(c,4),r=Bt(e[0],2),i=r[0],r=r[1],n=Bt(e[1],2),a=n[0],n=n[1],o=Bt(e[2],2),u=o[0],o=o[1],e=e[3],s=(a-i)*t+i,l=(n-r)*t+r,a=(u-a)*t+a,n=(o-n)*t+n,h=(a-s)*t+s,_=(n-l)*t+l;return 4===c.length?[[i,r],[s,l],[h,_],[((((e=Bt(e,2))[0]-u)*t+u-a)*t+a-h)*t+h,(((e[1]-o)*t+o-n)*t+n-_)*t+_]]:3===c.length?[[i,r],[s,l],[h,_]]:void 0}var kn={bboxBezier:function(c,u,_,f,d,p,y,g){var x,v,t,e,r,i,n,a,m,E,b,o,s,T,A,l,M,R,O,S,h=arguments.length;return Array.isArray(c)&&(x=c.length,c=(t=Bt((v=c)[0],2))[0],u=t[1],_=(t=Bt(v[1],2))[0],f=t[1],h=4,3<=x&&(d=(t=Bt(v[2],2))[0],p=t[1],h=6),4<=x&&(y=(t=Bt(v[3],2))[0],g=t[1],h=8)),4!==h?6===h?(x=c,v=u,t=_,n=f,r=d,m=p,E=Math.min(x,r),b=Math.min(v,m),O=Math.max(x,r),S=Math.max(v,m),(t<E||n<b||O<t||S<n)&&((e=(x-t)/(x-2*t+r))<0?e=0:1<e&&(e=1),(a=(v-n)/(v-2*n+m))<0?a=0:1<a&&(a=1),x=(i=1-e)*i*x+2*i*e*t+e*e*r,t=(i=1-a)*i*v+2*i*a*n+a*a*m,E=Math.min(E,x),b=Math.min(b,t),O=Math.max(O,x),S=Math.max(S,t)),[E,b,O,S]):8===h?(e=c,r=u,i=_,n=f,a=d,m=p,E=y,b=g,O=Math.min(e,E),S=Math.min(r,b),h=Math.max(e,E),d=Math.max(r,b),(i<O||n<S||h<i||d<n||a<O||m<S||h<a||d<m)&&(A=(p=r-2*n+m)*p-(y=3*n-r-3*m+b)*(g=-r+n),0<(T=(R=e-2*i+a)*R-(l=3*i-e-3*a+E)*(M=-e+i))&&(o=(-R-(T=Math.sqrt(T)))/l,l&&0<o&&o<1&&(s=(s=1-o)*s*s*e+3*s*s*o*i+3*s*o*o*a+o*o*o*E,O=Math.min(O,s),h=Math.max(h,s)),0<(o=l?(-R+T)/l:.5*-M/R)&&o<1&&(T=(s=1-o)*s*s*e+3*s*s*o*i+3*s*o*o*a+o*o*o*E,O=Math.min(O,T),h=Math.max(h,T))),0<A&&(l=(-p-(A=Math.sqrt(A)))/y,y&&0<l&&l<1&&(R=(M=1-l)*M*M*r+3*M*M*l*n+3*M*l*l*m+l*l*l*b,S=Math.min(S,R),d=Math.max(d,R)),0<(l=y?(-p+A)/y:.5*-g/p)&&l<1&&(i=(e=1-l)*e*e*r+3*e*e*l*n+3*e*l*l*m+l*l*l*b,S=Math.min(S,i),d=Math.max(d,i)))),[O,S,h,d]):void 0:[Math.min(c,_),Math.min(u,f),Math.max(c,_),Math.max(u,f)]},bezierLength:Sn,pointAtBezier:function(t,e,r,i){return In(t,Sn(t,0,1),e,r,i)},pointAtBezierWithLength:In,sliceBezier:wn,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=wn(t,r)),0<e&&(r<1&&(e/=r),t=wn(t.slice(0).reverse(),1-e).reverse())),t},pointAtByT:function(t){var e,r,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return 4===t.length?(r=n,i=(e=t)[0][0]*(1-r)*(1-r)*(1-r)+3*e[1][0]*r*(1-r)*(1-r)+3*e[2][0]*r*r*(1-r)+e[3][0]*r*r*r,e=e[0][1]*(1-r)*(1-r)*(1-r)+3*e[1][1]*r*(1-r)*(1-r)+3*e[2][1]*r*r*(1-r)+e[3][1]*r*r*r,[i,e]):3===t.length?(r=n,e=(i=t)[0][0]*(1-r)*(1-r)+2*i[1][0]*r*(1-r)+i[2][0]*r*r,i=i[0][1]*(1-r)*(1-r)+2*i[1][1]*r*(1-r)+i[2][1]*r*r,[e,i]):void 0},getPointT:function(t,e,c){if(4===t.length){for(var i=t,u=e,_=c,f=Mn.getRoots([i[0][0]-u,3*(i[1][0]-i[0][0]),3*(i[2][0]+i[0][0]-2*i[1][0]),i[3][0]-i[0][0]+3*i[1][0]-3*i[2][0]]).filter(function(t){return 0<=t&&t<=1}),d=Mn.getRoots([i[0][1]-_,3*(i[1][1]-i[0][1]),3*(i[2][1]+i[0][1]-2*i[1][1]),i[3][1]-i[0][1]+3*i[1][1]-3*i[2][1]]).filter(function(t){return 0<=t&&t<=1}),r=[],n=0,p=f.length;n<p;n++)for(var y=f[n],a=0,g=d.length;a<g;a++){var x=d[a],v=Math.abs(y-x);v<1e-10&&r.push({x:y,y:x,diff:v})}r.sort(function(t,e){return t.diff-e.diff}),3<r.length&&r.splice(3),r=r.map(function(t){return.5*(t.x+t.y)});var m=[];return r.forEach(function(t){var e=i[0][0]*Math.pow(1-t,3)+3*i[1][0]*t*Math.pow(1-t,2)+3*i[2][0]*t*t*(1-t)+i[3][0]*Math.pow(t,3),r=i[0][1]*Math.pow(1-t,3)+3*i[1][1]*t*Math.pow(1-t,2)+3*i[2][1]*t*t*(1-t)+i[3][1]*Math.pow(t,3);Math.abs(e-u)<1e-10&&Math.abs(r-_)<1e-10&&m.push(t)}),m}if(3===t.length){for(var o=t,E=e,b=c,T=Mn.getRoots([o[0][0]-E,2*(o[1][0]-o[0][0]),o[2][0]+o[0][0]-2*o[1][0]]).filter(function(t){return 0<=t&&t<=1}),A=Mn.getRoots([o[0][1]-b,2*(o[1][1]-o[0][1]),o[2][1]+o[0][1]-2*o[1][1]]).filter(function(t){return 0<=t&&t<=1}),s=[],l=0,M=T.length;l<M;l++)for(var R=T[l],h=0,O=A.length;h<O;h++){var S=A[h],C=Math.abs(R-S);C<1e-10&&s.push({x:R,y:S,diff:C})}s.sort(function(t,e){return t.diff-e.diff}),2<s.length&&s.splice(2),s=s.map(function(t){return.5*(t.x+t.y)});var I=[];return s.forEach(function(t){var e=o[0][0]*Math.pow(1-t,2)+2*o[1][0]*t*(1-t)+o[2][0]*t*t,r=o[0][1]*Math.pow(1-t,2)+2*o[1][1]*t*(1-t)+o[2][1]*t*t;Math.abs(e-E)<1e-10&&Math.abs(r-b)<1e-10&&I.push(t)}),I}},bezierSlope:function(t,e){var r,i,n,a,o,s,l,c,h,u,_;return 2===t.length?(a=(r=Bt(t[0],2))[0],r=r[1],n=(i=Bt(t[1],2))[0],i=i[1],a===n?1/0:(i-r)/(n-a)):3===t.length?(i=e,r=Bt(r=t,3),n=Bt(r[0],2),a=n[0],n=n[1],o=Bt(r[1],2),s=o[0],o=o[1],r=Bt(r[2],2),l=r[0],r=r[1],0!=(l=2*(a-2*s+l)*i+2*s-2*a)?(2*(n-2*o+r)*i+2*o-2*n)/l:1/0):4===t.length?(s=e,o=Bt(o=t,4),l=Bt(o[0],2),e=l[0],l=l[1],t=Bt(o[1],2),c=t[0],t=t[1],h=Bt(o[2],2),u=h[0],h=h[1],o=Bt(o[3],2),_=o[0],o=o[1],0!=(_=3*(3*c-e-3*u+_)*s*s+2*(3*e-6*c+3*u)*s+3*c-3*e)?(3*(3*t-l-3*h+o)*s*s+2*(3*l-6*t+3*h)*s+3*t-3*l)/_:1/0):void 0}},Dn=Mn.getRoots,Ln=1e-6,Nn=6;function Pn(t,e){for(var r=0,i=e.length-1;0<=i;i--)r=r*t+e[i];return r}function Fn(t,e,r){var i=Pn(t,r),n=Pn(e,r);if(Math.abs(i)<=Ln)l=t;else if(Math.abs(n)<=Ln)l=e;else if(i*n<=0)for(var a=Math.log(e-t),o=Math.LN10*Nn,c=Math.ceil((a+o)/Math.LN2),s=0;s<c;s++){var l,h=Pn(l=.5*(t+e),r);if(Math.abs(h)<=Ln)break;h*i<0?(e=l,n=h):(t=l,i=h)}return l}function Bn(t,e,r){var i,n=[];if(1==r.length-1)null!=(i=Fn(t,e,r))&&n.push(i);else{var a=Bn(t,e,function(t){for(var e=[],r=1;r<t.length;r++)e.push(r*t[r]);return e}(r));if(0<a.length){null!=(i=Fn(t,a[0],r))&&n.push(i);for(var o=0;o<=a.length-2;o++)null!=(i=Fn(a[o],a[o+1],r))&&n.push(i);null!=(i=Fn(a[a.length-1],e,r))&&n.push(i)}else null!=(i=Fn(t,e,r))&&n.push(i)}return n}Br={intersectBezier2Line:function(t,e,r,i,c,u,n,a,o,s){for(var l=[],_=Math.min(n,o),f=Math.min(a,s),d=Math.max(n,o),p=Math.max(a,s),y=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}},g={x:a-s,y:o-n},x=[(x=function(t,e){return t.x*e.x+t.y*e.y})(g,{x:t-2*r+c,y:e-2*i+u}),x(g,{x:-2*t+2*r,y:-2*e+2*i}),x(g,{x:t,y:e})+(n*s-o*a)].reverse(),v=Dn(x),m=0;m<v.length;m++){var h=v[m];0<=h&&h<=1&&(h=y(y({x:t,y:e},{x:r,y:i},h),y({x:r,y:i},{x:c,y:u},h),h),n===o?f<=h.y&&h.y<=p&&l.push(h):a===s?_<=h.x&&h.x<=d&&l.push(h):h.x>=_&&h.y>=f&&h.x<=d&&h.y<=p&&l.push(h))}return l},intersectBezier3Line:function(t,e,r,i,c,u,_,f,n,a,o,d){for(var p=[],y=Math.min(n,o),g=Math.min(a,d),x=Math.max(n,o),v=Math.max(a,d),s=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}},m={x:a-d,y:o-n},E=[n*d-o*a+(E=function(t,e){return t.x*e.x+t.y*e.y})(m,{x:t,y:e}),E(m,{x:-3*t+3*r,y:-3*e+3*i}),E(m,{x:3*t-6*r+3*c,y:3*e-6*i+3*u}),E(m,{x:3*r-t-3*c+_,y:3*i-e-3*u+f})],b=Dn(E),T=0;T<b.length;T++){var A,M,l,h=b[T];0<=h&&h<=1&&(l=s({x:t,y:e},{x:r,y:i},h),A=s({x:r,y:i},{x:c,y:u},h),M=s({x:c,y:u},{x:_,y:f},h),l=s(s(l,A,h),s(A,M,h),h),n===o?g<=l.y&&l.y<=v&&p.push(l):a===d?y<=l.x&&l.x<=x&&p.push(l):l.x>=y&&l.y>=g&&l.x<=x&&l.y<=v&&p.push(l))}return p},intersectBezier2Bezier2:function(t,e,c,r,u,_,f,d,p,y,g,x){var v=[],i={x:t-2*c+u,y:e-2*r+_},n={x:2*c-2*t,y:2*r-2*e},a={x:t,y:e},o={x:f-2*p+g,y:d-2*y+x},s={x:2*p-2*f,y:2*y-2*d},l={x:f,y:d};f=0===i.y?(_=(u=i.x*(a.y-l.y))-n.x*n.y,c=n.y*n.y,[i.x*o.y*o.y,2*i.x*s.y*o.y,i.x*s.y*s.y-o.x*c-o.y*u-o.y*_,-s.x*c-s.y*u-s.y*_,(a.x-l.x)*c+(a.y-l.y)*_].reverse()):(r=i.x*o.y-i.y*o.x,t=i.x*s.y-s.x*i.y,e=n.x*i.y-n.y*i.x,x=i.y*(a.x-l.x)-i.x*(g=a.y-l.y),p=-n.y*e+i.y*x,[r*r,2*r*t,(-o.y*(y=e*e)+i.y*t*t+i.y*r*x+r*p)/i.y,(-s.y*y+i.y*t*x+t*p)/i.y,(g*y+x*p)/i.y].reverse());for(var m=Dn(f),E=0;E<m.length;E++){var h=m[E];if(0<=h&&h<=1){var b=Dn([i.x,n.x,a.x-l.x-h*s.x-h*h*o.x].reverse()),T=Dn([i.y,n.y,a.y-l.y-h*s.y-h*h*o.y].reverse());if(0<b.length&&0<T.length)t:for(var A=0;A<b.length;A++){var M=b[A];if(0<=M&&M<=1)for(var R=0;R<T.length;R++)if(Math.abs(M-T[R])<1e-4){v.push({x:o.x*h*h+s.x*h+l.x,y:o.y*h*h+s.y*h+l.y,t:M});break t}}}}return v},intersectBezier3Bezier3:function(c,u,_,f,d,p,y,g,x,v,t,m,e,E,b,T){for(var A=[],r={x:3*_-c-3*d+y,y:3*f-u-3*p+g},i={x:3*c-6*_+3*d,y:3*u-6*f+3*p},n={x:-3*c+3*_,y:-3*u+3*f},a={x:c,y:u},o={x:3*t-x-3*e+b,y:3*m-v-3*E+T},s={x:3*x-6*t+3*e,y:3*v-6*m+3*E},l={x:-3*x+3*t,y:-3*v+3*m},h={x:x,y:v},y=a.x*a.x,g=a.y*a.y,d=n.x*n.x,p=n.x*n.x*n.x,_=n.y*n.y,f=n.y*n.y*n.y,c=i.x*i.x,u=i.x*i.x*i.x,b=i.y*i.y,T=i.y*i.y*i.y,e=r.x*r.x,E=r.x*r.x*r.x,t=r.y*r.y,m=r.y*r.y*r.y,x=h.x*h.x,v=h.y*h.y,M=l.x*l.x,R=l.y*l.y,O=s.x*s.x,S=s.y*s.y,C=o.x*o.x,I=o.y*o.y,w=Bn(0,1,[-E*(o.y*o.y*o.y)+m*(o.x*o.x*o.x)-3*r.x*t*C*o.y+3*e*r.y*o.x*I,-6*r.x*s.x*t*o.x*o.y+6*e*r.y*s.y*o.x*o.y+3*s.x*m*C-3*E*s.y*I-3*r.x*t*s.y*C+3*e*s.x*r.y*I,-6*l.x*r.x*t*o.x*o.y-6*r.x*s.x*t*s.y*o.x+6*e*s.x*r.y*s.y*o.y+3*l.x*m*C+3*O*m*o.x+3*l.x*e*r.y*I-3*r.x*l.y*t*C-3*r.x*O*t*o.y+e*r.y*o.x*(6*l.y*o.y+3*S)+E*(-l.y*I-2*S*o.y-o.y*(2*l.y*o.y+S)),n.x*i.y*r.x*r.y*o.x*o.y-n.y*i.x*r.x*r.y*o.x*o.y+6*l.x*s.x*m*o.x+3*n.x*i.x*r.x*r.y*I+6*a.x*r.x*t*o.x*o.y-3*n.x*i.x*t*o.x*o.y-3*n.y*i.y*r.x*r.y*C-6*a.y*e*r.y*o.x*o.y-6*h.x*r.x*t*o.x*o.y+3*n.y*i.y*e*o.x*o.y-2*i.x*b*r.x*o.x*o.y-6*l.x*r.x*s.x*t*o.y-6*l.x*r.x*t*s.y*o.x-6*r.x*l.y*s.x*t*o.x+6*l.x*e*r.y*s.y*o.y+2*c*i.y*r.y*o.x*o.y+s.x*s.x*s.x*m-3*a.x*m*C+3*a.y*E*I+3*h.x*m*C+T*r.x*C-u*r.y*I-3*a.x*e*r.y*I+3*a.y*r.x*t*C-2*n.x*i.y*e*I+n.x*i.y*t*C-n.y*i.x*e*I+2*n.y*i.x*t*C+3*h.x*e*r.y*I-i.x*b*r.y*C-3*h.y*r.x*t*C+c*i.y*r.x*I-3*r.x*O*t*s.y+e*r.y*o.x*(6*h.y*o.y+6*l.y*s.y)+e*s.x*r.y*(6*l.y*o.y+3*S)+E*(-2*l.y*s.y*o.y-h.y*I-s.y*(2*l.y*o.y+S)-o.y*(2*h.y*o.y+2*l.y*s.y)),6*n.x*i.x*r.x*r.y*s.y*o.y+n.x*i.y*r.x*s.x*r.y*o.y+n.x*i.y*r.x*r.y*s.y*o.x-n.y*i.x*r.x*s.x*r.y*o.y-n.y*i.x*r.x*r.y*s.y*o.x-6*n.y*i.y*r.x*s.x*r.y*o.x-6*a.x*s.x*m*o.x+6*h.x*s.x*m*o.x+6*a.y*E*s.y*o.y+2*T*r.x*s.x*o.x-2*u*r.y*s.y*o.y+6*a.x*r.x*s.x*t*o.y+6*a.x*r.x*t*s.y*o.x+6*a.y*r.x*s.x*t*o.x-3*n.x*i.x*s.x*t*o.y-3*n.x*i.x*t*s.y*o.x+2*n.x*i.y*s.x*t*o.x+4*n.y*i.x*s.x*t*o.x-6*a.x*e*r.y*s.y*o.y-6*a.y*e*s.x*r.y*o.y-6*a.y*e*r.y*s.y*o.x-4*n.x*i.y*e*s.y*o.y-6*h.x*r.x*s.x*t*o.y-6*h.x*r.x*t*s.y*o.x-2*n.y*i.x*e*s.y*o.y+3*n.y*i.y*e*s.x*o.y+3*n.y*i.y*e*s.y*o.x-2*i.x*b*r.x*s.x*o.y-2*i.x*b*r.x*s.y*o.x-2*i.x*b*s.x*r.y*o.x-6*h.y*r.x*s.x*t*o.x-6*l.x*r.x*l.y*t*o.x-6*l.x*r.x*s.x*t*s.y+6*h.x*e*r.y*s.y*o.y+2*c*i.y*r.x*s.y*o.y+2*c*i.y*s.x*r.y*o.y+2*c*i.y*r.y*s.y*o.x+3*l.x*O*m+3*M*m*o.x-3*r.x*l.y*O*t-3*M*r.x*t*o.y+e*s.x*r.y*(6*h.y*o.y+6*l.y*s.y)+e*r.y*o.x*(6*h.y*s.y+3*R)+l.x*e*r.y*(6*l.y*o.y+3*S)+E*(-2*h.y*s.y*o.y-o.y*(2*h.y*s.y+R)-l.y*(2*l.y*o.y+S)-s.y*(2*h.y*o.y+2*l.y*s.y)),n.x*l.x*i.y*r.x*r.y*o.y+n.x*i.y*r.x*l.y*r.y*o.x+n.x*i.y*r.x*s.x*r.y*s.y-n.y*i.x*l.x*r.x*r.y*o.y-n.y*i.x*r.x*l.y*r.y*o.x-n.y*i.x*r.x*s.x*r.y*s.y-6*n.y*l.x*i.y*r.x*r.y*o.x-6*a.x*l.x*m*o.x+6*h.x*l.x*m*o.x+2*l.x*T*r.x*o.x+6*a.x*l.x*r.x*t*o.y+6*a.x*r.x*l.y*t*o.x+6*a.x*r.x*s.x*t*s.y+6*a.y*l.x*r.x*t*o.x-3*n.x*i.x*l.x*t*o.y-3*n.x*i.x*l.y*t*o.x-3*n.x*i.x*s.x*t*s.y+2*n.x*l.x*i.y*t*o.x+4*n.y*i.x*l.x*t*o.x-6*a.y*l.x*e*r.y*o.y-6*a.y*e*l.y*r.y*o.x-6*a.y*e*s.x*r.y*s.y-6*h.x*l.x*r.x*t*o.y-6*h.x*r.x*l.y*t*o.x-6*h.x*r.x*s.x*t*s.y+3*n.y*l.x*i.y*e*o.y-3*n.y*i.y*r.x*O*r.y+3*n.y*i.y*e*l.y*o.x+3*n.y*i.y*e*s.x*s.y-2*i.x*l.x*b*r.x*o.y-2*i.x*l.x*b*r.y*o.x-2*i.x*b*r.x*l.y*o.x-2*i.x*b*r.x*s.x*s.y-6*h.y*l.x*r.x*t*o.x-6*l.x*r.x*l.y*s.x*t+6*h.y*e*l.y*r.y*o.x+2*c*l.x*i.y*r.y*o.y+2*c*i.y*l.y*r.y*o.x+2*c*i.y*s.x*r.y*s.y-3*a.x*O*m+3*h.x*O*m+3*M*s.x*m+T*r.x*O+3*a.y*r.x*O*t+n.x*i.y*O*t+2*n.y*i.x*O*t-i.x*b*O*r.y-3*h.y*r.x*O*t-3*M*r.x*t*s.y+c*i.y*r.x*(2*l.y*o.y+S)+n.x*i.x*r.x*r.y*(6*l.y*o.y+3*S)+l.x*e*r.y*(6*h.y*o.y+6*l.y*s.y)+u*r.y*(-2*l.y*o.y-S)+a.y*E*(6*l.y*o.y+3*S)+n.y*i.x*e*(-2*l.y*o.y-S)+n.x*i.y*e*(-4*l.y*o.y-2*S)+a.x*e*r.y*(-6*l.y*o.y-3*S)+e*s.x*r.y*(6*h.y*s.y+3*R)+h.x*e*r.y*(6*l.y*o.y+3*S)+E*(-2*h.y*l.y*o.y-s.y*(2*h.y*s.y+R)-h.y*(2*l.y*o.y+S)-l.y*(2*h.y*o.y+2*l.y*s.y)),-a.x*n.x*i.y*r.x*r.y*o.y+a.x*n.y*i.x*r.x*r.y*o.y+6*a.x*n.y*i.y*r.x*r.y*o.x-6*a.y*n.x*i.x*r.x*r.y*o.y-a.y*n.x*i.y*r.x*r.y*o.x+a.y*n.y*i.x*r.x*r.y*o.x+n.x*n.y*i.x*i.y*r.x*o.y-n.x*n.y*i.x*i.y*r.y*o.x+n.x*h.x*i.y*r.x*r.y*o.y+n.x*h.y*i.y*r.x*r.y*o.x+n.x*l.x*i.y*r.x*r.y*s.y+n.x*i.y*r.x*l.y*s.x*r.y-h.x*n.y*i.x*r.x*r.y*o.y-6*h.x*n.y*i.y*r.x*r.y*o.x-n.y*i.x*h.y*r.x*r.y*o.x-n.y*i.x*l.x*r.x*r.y*s.y-n.y*i.x*r.x*l.y*s.x*r.y-6*n.y*l.x*i.y*r.x*s.x*r.y-6*a.x*h.x*m*o.x-6*a.x*l.x*s.x*m-2*a.x*T*r.x*o.x+6*h.x*l.x*s.x*m+2*h.x*T*r.x*o.x+2*l.x*T*r.x*s.x+2*a.y*u*r.y*o.y-6*a.x*a.y*r.x*t*o.x+3*a.x*n.x*i.x*t*o.y-2*a.x*n.x*i.y*t*o.x-4*a.x*n.y*i.x*t*o.x+3*a.y*n.x*i.x*t*o.x+6*a.x*a.y*e*r.y*o.y+6*a.x*h.x*r.x*t*o.y-3*a.x*n.y*i.y*e*o.y+2*a.x*i.x*b*r.x*o.y+2*a.x*i.x*b*r.y*o.x+6*a.x*h.y*r.x*t*o.x+6*a.x*l.x*r.x*t*s.y+6*a.x*r.x*l.y*s.x*t+4*a.y*n.x*i.y*e*o.y+6*a.y*h.x*r.x*t*o.x+2*a.y*n.y*i.x*e*o.y-3*a.y*n.y*i.y*e*o.x+2*a.y*i.x*b*r.x*o.x+6*a.y*l.x*r.x*s.x*t-3*n.x*h.x*i.x*t*o.y+2*n.x*h.x*i.y*t*o.x+n.x*n.y*b*r.x*o.x-3*n.x*i.x*h.y*t*o.x-3*n.x*i.x*l.x*t*s.y-3*n.x*i.x*l.y*s.x*t+2*n.x*l.x*i.y*s.x*t+4*h.x*n.y*i.x*t*o.x+4*n.y*i.x*l.x*s.x*t-2*a.x*c*i.y*r.y*o.y-6*a.y*h.x*e*r.y*o.y-6*a.y*h.y*e*r.y*o.x-6*a.y*l.x*e*r.y*s.y-2*a.y*c*i.y*r.x*o.y-2*a.y*c*i.y*r.y*o.x-6*a.y*e*l.y*s.x*r.y-n.x*n.y*c*r.y*o.y-2*n.x*_*r.x*r.y*o.x+3*h.x*n.y*i.y*e*o.y-2*h.x*i.x*b*r.x*o.y-2*h.x*i.x*b*r.y*o.x-6*h.x*h.y*r.x*t*o.x-6*h.x*l.x*r.x*t*s.y-6*h.x*r.x*l.y*s.x*t+3*n.y*h.y*i.y*e*o.x+3*n.y*l.x*i.y*e*s.y+3*n.y*i.y*e*l.y*s.x-2*i.x*h.y*b*r.x*o.x-2*i.x*l.x*b*r.x*s.y-2*i.x*l.x*b*s.x*r.y-2*i.x*b*r.x*l.y*s.x-6*h.y*l.x*r.x*s.x*t-_*i.x*i.y*r.x*o.x+2*h.x*c*i.y*r.y*o.y+6*h.y*e*l.y*s.x*r.y+2*d*n.y*r.x*r.y*o.y+d*i.x*i.y*r.y*o.y+2*c*h.y*i.y*r.y*o.x+2*c*l.x*i.y*r.y*s.y+2*c*i.y*l.y*s.x*r.y+l.x*l.x*l.x*m+3*y*m*o.x-3*g*E*o.y+3*x*m*o.x+f*e*o.x-p*t*o.y-n.x*_*e*o.y+d*n.y*t*o.x-3*y*r.x*t*o.y+3*g*e*r.y*o.x-d*b*r.x*o.y+_*c*r.y*o.x-3*M*r.x*l.y*t-3*x*r.x*t*o.y+3*v*e*r.y*o.x+n.x*i.x*r.x*r.y*(6*h.y*o.y+6*l.y*s.y)+u*r.y*(-2*h.y*o.y-2*l.y*s.y)+a.y*E*(6*h.y*o.y+6*l.y*s.y)+n.y*i.x*e*(-2*h.y*o.y-2*l.y*s.y)+c*i.y*r.x*(2*h.y*o.y+2*l.y*s.y)+n.x*i.y*e*(-4*h.y*o.y-4*l.y*s.y)+a.x*e*r.y*(-6*h.y*o.y-6*l.y*s.y)+h.x*e*r.y*(6*h.y*o.y+6*l.y*s.y)+l.x*e*r.y*(6*h.y*s.y+3*R)+E*(-2*h.y*l.y*s.y-v*o.y-l.y*(2*h.y*s.y+R)-h.y*(2*h.y*o.y+2*l.y*s.y)),-a.x*n.x*i.y*r.x*r.y*s.y+a.x*n.y*i.x*r.x*r.y*s.y+6*a.x*n.y*i.y*r.x*s.x*r.y-6*a.y*n.x*i.x*r.x*r.y*s.y-a.y*n.x*i.y*r.x*s.x*r.y+a.y*n.y*i.x*r.x*s.x*r.y+n.x*n.y*i.x*i.y*r.x*s.y-n.x*n.y*i.x*i.y*s.x*r.y+n.x*h.x*i.y*r.x*r.y*s.y+n.x*h.y*i.y*r.x*s.x*r.y+n.x*l.x*i.y*r.x*l.y*r.y-h.x*n.y*i.x*r.x*r.y*s.y-6*h.x*n.y*i.y*r.x*s.x*r.y-n.y*i.x*h.y*r.x*s.x*r.y-n.y*i.x*l.x*r.x*l.y*r.y-6*a.x*h.x*s.x*m-2*a.x*T*r.x*s.x+2*h.x*T*r.x*s.x+2*a.y*u*r.y*s.y-6*a.x*a.y*r.x*s.x*t+3*a.x*n.x*i.x*t*s.y-2*a.x*n.x*i.y*s.x*t-4*a.x*n.y*i.x*s.x*t+3*a.y*n.x*i.x*s.x*t+6*a.x*a.y*e*r.y*s.y+6*a.x*h.x*r.x*t*s.y-3*a.x*n.y*i.y*e*s.y+2*a.x*i.x*b*r.x*s.y+2*a.x*i.x*b*s.x*r.y+6*a.x*h.y*r.x*s.x*t+6*a.x*l.x*r.x*l.y*t+4*a.y*n.x*i.y*e*s.y+6*a.y*h.x*r.x*s.x*t+2*a.y*n.y*i.x*e*s.y-3*a.y*n.y*i.y*e*s.x+2*a.y*i.x*b*r.x*s.x-3*n.x*h.x*i.x*t*s.y+2*n.x*h.x*i.y*s.x*t+n.x*n.y*b*r.x*s.x-3*n.x*i.x*h.y*s.x*t-3*n.x*i.x*l.x*l.y*t+4*h.x*n.y*i.x*s.x*t-2*a.x*c*i.y*r.y*s.y-6*a.y*h.x*e*r.y*s.y-6*a.y*h.y*e*s.x*r.y-6*a.y*l.x*e*l.y*r.y-2*a.y*c*i.y*r.x*s.y-2*a.y*c*i.y*s.x*r.y-n.x*n.y*c*r.y*s.y-2*n.x*_*r.x*s.x*r.y+3*h.x*n.y*i.y*e*s.y-2*h.x*i.x*b*r.x*s.y-2*h.x*i.x*b*s.x*r.y-6*h.x*h.y*r.x*s.x*t-6*h.x*l.x*r.x*l.y*t+3*n.y*h.y*i.y*e*s.x+3*n.y*l.x*i.y*e*l.y-2*i.x*h.y*b*r.x*s.x-2*i.x*l.x*b*r.x*l.y-_*i.x*i.y*r.x*s.x+2*h.x*c*i.y*r.y*s.y-3*n.y*M*i.y*r.x*r.y+6*h.y*l.x*e*l.y*r.y+2*d*n.y*r.x*r.y*s.y+d*i.x*i.y*r.y*s.y+2*c*h.y*i.y*s.x*r.y+2*c*l.x*i.y*l.y*r.y-3*a.x*M*m+3*h.x*M*m+3*y*s.x*m-3*g*E*s.y+3*x*s.x*m+M*T*r.x+f*e*s.x-p*t*s.y+3*a.y*M*r.x*t-n.x*_*e*s.y+n.x*M*i.y*t+2*n.y*i.x*M*t+d*n.y*s.x*t-i.x*M*b*r.y-3*h.y*M*r.x*t-3*y*r.x*t*s.y+3*g*e*s.x*r.y-d*b*r.x*s.y+_*c*s.x*r.y-3*x*r.x*t*s.y+3*v*e*s.x*r.y+c*i.y*r.x*(2*h.y*s.y+R)+n.x*i.x*r.x*r.y*(6*h.y*s.y+3*R)+u*r.y*(-2*h.y*s.y-R)+a.y*E*(6*h.y*s.y+3*R)+n.y*i.x*e*(-2*h.y*s.y-R)+n.x*i.y*e*(-4*h.y*s.y-2*R)+a.x*e*r.y*(-6*h.y*s.y-3*R)+h.x*e*r.y*(6*h.y*s.y+3*R)+E*(-2*h.y*R-v*s.y-h.y*(2*h.y*s.y+R)),-a.x*n.x*i.y*r.x*l.y*r.y+a.x*n.y*i.x*r.x*l.y*r.y+6*a.x*n.y*l.x*i.y*r.x*r.y-6*a.y*n.x*i.x*r.x*l.y*r.y-a.y*n.x*l.x*i.y*r.x*r.y+a.y*n.y*i.x*l.x*r.x*r.y-n.x*n.y*i.x*l.x*i.y*r.y+n.x*n.y*i.x*i.y*r.x*l.y+n.x*h.x*i.y*r.x*l.y*r.y+6*n.x*i.x*h.y*r.x*l.y*r.y+n.x*h.y*l.x*i.y*r.x*r.y-h.x*n.y*i.x*r.x*l.y*r.y-6*h.x*n.y*l.x*i.y*r.x*r.y-n.y*i.x*h.y*l.x*r.x*r.y-6*a.x*h.x*l.x*m-2*a.x*l.x*T*r.x+6*a.y*h.y*E*l.y+2*h.x*l.x*T*r.x+2*a.y*u*l.y*r.y-2*u*h.y*l.y*r.y-6*a.x*a.y*l.x*r.x*t+3*a.x*n.x*i.x*l.y*t-2*a.x*n.x*l.x*i.y*t-4*a.x*n.y*i.x*l.x*t+3*a.y*n.x*i.x*l.x*t+6*a.x*a.y*e*l.y*r.y+6*a.x*h.x*r.x*l.y*t-3*a.x*n.y*i.y*e*l.y+2*a.x*i.x*l.x*b*r.y+2*a.x*i.x*b*r.x*l.y+6*a.x*h.y*l.x*r.x*t+4*a.y*n.x*i.y*e*l.y+6*a.y*h.x*l.x*r.x*t+2*a.y*n.y*i.x*e*l.y-3*a.y*n.y*l.x*i.y*e+2*a.y*i.x*l.x*b*r.x-3*n.x*h.x*i.x*l.y*t+2*n.x*h.x*l.x*i.y*t+n.x*n.y*l.x*b*r.x-3*n.x*i.x*h.y*l.x*t+4*h.x*n.y*i.x*l.x*t-6*a.x*h.y*e*l.y*r.y-2*a.x*c*i.y*l.y*r.y-6*a.y*h.x*e*l.y*r.y-6*a.y*h.y*l.x*e*r.y-2*a.y*c*l.x*i.y*r.y-2*a.y*c*i.y*r.x*l.y-n.x*n.y*c*l.y*r.y-4*n.x*h.y*i.y*e*l.y-2*n.x*_*l.x*r.x*r.y+3*h.x*n.y*i.y*e*l.y-2*h.x*i.x*l.x*b*r.y-2*h.x*i.x*b*r.x*l.y-6*h.x*h.y*l.x*r.x*t-2*n.y*i.x*h.y*e*l.y+3*n.y*h.y*l.x*i.y*e-2*i.x*h.y*l.x*b*r.x-_*i.x*l.x*i.y*r.x+6*h.x*h.y*e*l.y*r.y+2*h.x*c*i.y*l.y*r.y+2*d*n.y*r.x*l.y*r.y+d*i.x*i.y*l.y*r.y+2*c*h.y*l.x*i.y*r.y+2*c*h.y*i.y*r.x*l.y+3*y*l.x*m-3*g*E*l.y+3*x*l.x*m+f*l.x*e-p*l.y*t-3*v*E*l.y-n.x*_*e*l.y+d*n.y*l.x*t-3*y*r.x*l.y*t+3*g*l.x*e*r.y-d*b*r.x*l.y+_*c*l.x*r.y-3*x*r.x*l.y*t+3*v*l.x*e*r.y,a.x*a.y*n.x*i.y*r.x*r.y-a.x*a.y*n.y*i.x*r.x*r.y+a.x*n.x*n.y*i.x*i.y*r.y-a.y*n.x*n.y*i.x*i.y*r.x-a.x*n.x*h.y*i.y*r.x*r.y+6*a.x*h.x*n.y*i.y*r.x*r.y+a.x*n.y*i.x*h.y*r.x*r.y-a.y*n.x*h.x*i.y*r.x*r.y-6*a.y*n.x*i.x*h.y*r.x*r.y+a.y*h.x*n.y*i.x*r.x*r.y-n.x*h.x*n.y*i.x*i.y*r.y+n.x*n.y*i.x*h.y*i.y*r.x+n.x*h.x*h.y*i.y*r.x*r.y-h.x*n.y*i.x*h.y*r.x*r.y-2*a.x*h.x*T*r.x+2*a.y*u*h.y*r.y-3*a.x*a.y*n.x*i.x*t-6*a.x*a.y*h.x*r.x*t+3*a.x*a.y*n.y*i.y*e-2*a.x*a.y*i.x*b*r.x-2*a.x*n.x*h.x*i.y*t-a.x*n.x*n.y*b*r.x+3*a.x*n.x*i.x*h.y*t-4*a.x*h.x*n.y*i.x*t+3*a.y*n.x*h.x*i.x*t+6*a.x*a.y*h.y*e*r.y+2*a.x*a.y*c*i.y*r.y+2*a.x*n.x*_*r.x*r.y+2*a.x*h.x*i.x*b*r.y+6*a.x*h.x*h.y*r.x*t-3*a.x*n.y*h.y*i.y*e+2*a.x*i.x*h.y*b*r.x+a.x*_*i.x*i.y*r.x+a.y*n.x*n.y*c*r.y+4*a.y*n.x*h.y*i.y*e-3*a.y*h.x*n.y*i.y*e+2*a.y*h.x*i.x*b*r.x+2*a.y*n.y*i.x*h.y*e+n.x*h.x*n.y*b*r.x-3*n.x*h.x*i.x*h.y*t-2*a.x*c*h.y*i.y*r.y-6*a.y*h.x*h.y*e*r.y-2*a.y*h.x*c*i.y*r.y-2*a.y*d*n.y*r.x*r.y-a.y*d*i.x*i.y*r.y-2*a.y*c*h.y*i.y*r.x-2*n.x*h.x*_*r.x*r.y-n.x*n.y*c*h.y*r.y+3*h.x*n.y*h.y*i.y*e-2*h.x*i.x*h.y*b*r.x-h.x*_*i.x*i.y*r.x+3*g*n.x*i.x*r.x*r.y+3*n.x*i.x*v*r.x*r.y+2*h.x*c*h.y*i.y*r.y-3*y*n.y*i.y*r.x*r.y+2*d*n.y*h.y*r.x*r.y+d*i.x*h.y*i.y*r.y-3*x*n.y*i.y*r.x*r.y-a.x*a.x*a.x*m+a.y*a.y*a.y*E+h.x*h.x*h.x*m-h.y*h.y*h.y*E-3*a.x*x*m-a.x*f*e+3*y*h.x*m+a.y*p*t+3*a.y*v*E+h.x*f*e+y*T*r.x-3*g*h.y*E-g*u*r.y+x*T*r.x-p*h.y*t-u*v*r.y-a.x*d*n.y*t+a.y*n.x*_*e-3*a.x*g*e*r.y-a.x*_*c*r.y+a.y*d*b*r.x-n.x*_*h.y*e+3*y*a.y*r.x*t+y*n.x*i.y*t+2*y*n.y*i.x*t-2*g*n.x*i.y*e-g*n.y*i.x*e+d*h.x*n.y*t-3*a.x*v*e*r.y+3*a.y*x*r.x*t+n.x*x*i.y*t-2*n.x*v*i.y*e+h.x*_*c*r.y-n.y*i.x*v*e-y*i.x*b*r.y-3*y*h.y*r.x*t+3*g*h.x*e*r.y+g*c*i.y*r.x-d*h.y*b*r.x+2*x*n.y*i.x*t+3*h.x*v*e*r.y-x*i.x*b*r.y-3*x*h.y*r.x*t+c*v*i.y*r.x].reverse()),k=0;k<w.length;k++){var D=w[k],L=Dn([r.x,i.x,n.x,a.x-h.x-D*l.x-D*D*s.x-D*D*D*o.x].reverse()),N=Dn([r.y,i.y,n.y,a.y-h.y-D*l.y-D*D*s.y-D*D*D*o.y].reverse());if(0<L.length&&0<N.length)t:for(var P=0;P<L.length;P++){var F=L[P];if(0<=F&&F<=1)for(var B=0;B<N.length;B++)if(Math.abs(F-N[B])<1e-4){A.push({x:o.x*D*D*D+s.x*D*D+l.x*D+h.x,y:o.y*D*D*D+s.y*D*D+l.y*D+h.y,t:F});break t}}}return A},intersectBezier2Bezier3:function(c,u,t,e,_,f,d,p,y,g,x,v,m,E){for(var b=[],r={x:c-2*t+_,y:u-2*e+f},i={x:2*t-2*c,y:2*e-2*u},n={x:c,y:u},a={x:3*y-d-3*x+m,y:3*g-p-3*v+E},o={x:3*d-6*y+3*x,y:3*p-6*g+3*v},s={x:-3*d+3*y,y:-3*p+3*g},l={x:d,y:p},_=i.x*i.x,f=i.y*i.y,t=r.x*r.x,e=r.y*r.y,T=Bn(0,1,[-2*r.x*r.y*a.x*a.y+t*(a.y*a.y)+e*(a.x*a.x),-2*r.x*r.y*o.x*a.y-2*r.x*r.y*o.y*a.x+2*e*o.x*a.x+2*t*o.y*a.y,-2*r.x*s.x*r.y*a.y-2*r.x*r.y*s.y*a.x-2*r.x*r.y*o.x*o.y+2*s.x*e*a.x+e*(o.x*o.x)+t*(2*s.y*a.y+o.y*o.y),2*n.x*r.x*r.y*a.y+2*n.y*r.x*r.y*a.x+i.x*i.y*r.x*a.y+i.x*i.y*r.y*a.x-2*l.x*r.x*r.y*a.y-2*r.x*l.y*r.y*a.x-2*r.x*s.x*r.y*o.y-2*r.x*r.y*s.y*o.x-2*n.x*e*a.x-2*n.y*t*a.y+2*l.x*e*a.x+2*s.x*e*o.x-f*r.x*a.x-_*r.y*a.y+t*(2*l.y*a.y+2*s.y*o.y),2*n.x*r.x*r.y*o.y+2*n.y*r.x*r.y*o.x+i.x*i.y*r.x*o.y+i.x*i.y*r.y*o.x-2*l.x*r.x*r.y*o.y-2*r.x*l.y*r.y*o.x-2*r.x*s.x*r.y*s.y-2*n.x*e*o.x-2*n.y*t*o.y+2*l.x*e*o.x-f*r.x*o.x-_*r.y*o.y+s.x*s.x*e+t*(2*l.y*o.y+s.y*s.y),2*n.x*r.x*r.y*s.y+2*n.y*r.x*s.x*r.y+i.x*i.y*r.x*s.y+i.x*i.y*s.x*r.y-2*l.x*r.x*r.y*s.y-2*r.x*l.y*s.x*r.y-2*n.x*s.x*e-2*n.y*t*s.y+2*l.x*s.x*e-f*r.x*s.x-_*r.y*s.y+2*t*l.y*s.y,-2*n.x*n.y*r.x*r.y-n.x*i.x*i.y*r.y-n.y*i.x*i.y*r.x+2*n.x*r.x*l.y*r.y+2*n.y*l.x*r.x*r.y+i.x*l.x*i.y*r.y+i.x*i.y*r.x*l.y-2*l.x*r.x*l.y*r.y-2*n.x*l.x*e+n.x*f*r.x+n.y*_*r.y-2*n.y*t*l.y-l.x*f*r.x-_*l.y*r.y+n.x*n.x*e+n.y*n.y*t+l.x*l.x*e+t*(l.y*l.y)].reverse()),A=0;A<T.length;A++){var h=T[A],M=Dn([r.x,i.x,n.x-l.x-h*s.x-h*h*o.x-h*h*h*a.x].reverse()),R=Dn([r.y,i.y,n.y-l.y-h*s.y-h*h*o.y-h*h*h*a.y].reverse());if(0<M.length&&0<R.length)t:for(var O=0;O<M.length;O++){var S=M[O];if(0<=S&&S<=1)for(var C=0;C<R.length;C++)if(Math.abs(S-R[C])<1e-4){b.push({x:a.x*h*h*h+o.x*h*h+s.x*h+l.x,y:a.y*h*h*h+o.y*h*h+s.y*h+l.y,t:S});break t}}}return b}};function Hn(t,e){return e<t?1:t<e?-1:0}function Gn(t,e){void 0===e&&(e=!1),this._compare=t=void 0===t?Hn:t,this._root=null,this._size=0,this._noDuplicates=!!e}Hr={size:{configurable:!0}};Gn.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},Gn.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},Gn.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},Gn.prototype.splay=function(t){for(var e,r,i,n;t.parent;)(r=(e=t.parent).parent)&&r.parent?((i=r.parent).left===r?i.left=t:i.right=t,t.parent=i):(t.parent=null,this._root=t),i=t.left,n=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(i?(r.right=i).parent=r:r.right=null,(t.left=r).parent=t)),n?(e.left=n).parent=e:e.left=null,(t.right=e).parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(n?(r.left=n).parent=r:r.left=null,(t.right=r).parent=t)),i?(e.right=i).parent=e:e.right=null,(t.left=e).parent=t)},Gn.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},Gn.prototype.minNode=function(t){if(t=void 0===t?this._root:t)for(;t.left;)t=t.left;return t},Gn.prototype.maxNode=function(t){if(t=void 0===t?this._root:t)for(;t.right;)t=t.right;return t},Gn.prototype.insert=function(t,e){var r=this._root,i=null,n=this._compare;if(this._noDuplicates)for(;r;){if(0===n((i=r).key,t))return;r=n(r.key,t)<0?r.right:r.left}else for(;r;)r=n((i=r).key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:i},i?n(i.key,r.key)<0?i.right=r:i.left=r:this._root=r,this.splay(r),this._size++,r},Gn.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var i=r(e.key,t);if(i<0)e=e.right;else{if(!(0<i))return e;e=e.left}}return null},Gn.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var i=r(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},Gn.prototype.remove=function(t){var e,t=this.find(t);return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0)},Gn.prototype.removeNode=function(t){return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0);var e},Gn.prototype.erase=function(t){var e,r,t=this.find(t);t&&(this.splay(t),e=t.left,t=t.right,r=null,e&&(e.parent=null,r=this.maxNode(e),this.splay(r),this._root=r),t&&(e?r.right=t:this._root=t,t.parent=r),this._size--)},Gn.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},Gn.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)e=(t=e).parent;return e},Gn.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)e=(t=e).parent;return e},Gn.prototype.forEach=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)e?(r.push(e),e=e.left):0<r.length?(t(e=r.pop(),n++),e=e.right):i=!0;return this},Gn.prototype.range=function(t,e,r,i){for(var n=[],a=this._compare,o=this._root;0!==n.length||o;)if(o)n.push(o),o=o.left;else{if(0<a((o=n.pop()).key,e))break;if(0<=a(o.key,t)&&r.call(i,o))return this;o=o.right}return this},Gn.prototype.keys=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.key),t=t.right):i=!0;return r},Gn.prototype.values=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.data),t=t.right):i=!0;return r},Gn.prototype.at=function(t){for(var e=this._root,r=[],i=!1,n=0;!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},Gn.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return r&&function t(e,r,i,n,a){if(n<=i)return;var o=e[i+n>>1];var s=i-1;var l=n+1;for(;;){for(;a(e[++s],o)<0;);for(;0<a(e[--l],o););if(l<=s)break;var h=e[s];e[s]=e[l],e[l]=h,h=r[s],r[s]=r[l],r[l]=h}t(e,r,i,l,a);t(e,r,l+1,n,a)}(t,e,0,i-1,this._compare),this._root=function t(e,r,i,n,a){var o=a-n;{var s,l;if(0<o)return o=n+Math.floor(o/2),l=r[o],s=i[o],(l={key:l,data:s,parent:e}).left=t(l,r,i,n,o),l.right=t(l,r,i,o+1,a),l}return null}(null,t,e,0,i),this._size=i,this},Gn.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},Gn.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},Gn.prototype.isEmpty=function(){return null===this._root},Hr.size.get=function(){return this._size},Gn.createTree=function(t,e,r,i,n){return new Gn(r,n).load(t,e,i)},Object.defineProperties(Gn.prototype,Hr);var Yn=0,Wn=1,Un=2,Xn=3,zn=0,Vn=1,Kn=2,jn=3;function $n(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!qn(e,r)||e.isVertical()?e.prevInResult:e));e=qn(t,r);t.resultTransition=e?function(t,e){var r,i=!t.inOut,n=!t.otherInOut;switch(e){case zn:r=i&&n;break;case Vn:r=i||n;break;case jn:r=i^n;break;case Kn:r=t.isSubject?i&&!n:n&&!i}return r?1:-1}(t,r):0}function qn(t,e){switch(t.type){case Yn:switch(e){case zn:return!t.otherInOut;case Vn:return t.otherInOut;case Kn:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case jn:return!0}break;case Un:return e===zn||e===Vn;case Xn:return e===Kn;case Wn:return!1}return!1}function Zn(t,e,r,i,n){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=i,this.type=n||Yn,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0}fi={inResult:{configurable:!0}};function Jn(t,e){return t[0]===e[0]&&t[1]===e[1]}Zn.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?0<(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]):0<(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])},Zn.prototype.isAbove=function(t){return!this.isBelow(t)},Zn.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},fi.inResult.get=function(){return 0!==this.resultTransition},Zn.prototype.clone=function(){var t=new Zn(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties(Zn.prototype,fi);var Qn=134217729;function ta(c,t,u,_,f){var e,r,i,n,a=t[0],o=_[0],s=0,l=0,h=(a<o==-a<o?(e=a,a=t[++s]):(e=o,o=_[++l]),0);if(s<c&&l<u)for(a<o==-a<o?(i=e-((r=a+e)-a),a=t[++s]):(i=e-((r=o+e)-o),o=_[++l]),e=r,0!==i&&(f[h++]=i);s<c&&l<u;)a<o==-a<o?(i=e-((r=e+a)-(n=r-e))+(a-n),a=t[++s]):(i=e-((r=e+o)-(n=r-e))+(o-n),o=_[++l]),e=r,0!==i&&(f[h++]=i);for(;s<c;)i=e-((r=e+a)-(n=r-e))+(a-n),a=t[++s],e=r,0!==i&&(f[h++]=i);for(;l<u;)i=e-((r=e+o)-(n=r-e))+(o-n),o=_[++l],e=r,0!==i&&(f[h++]=i);return 0===e&&0!==h||(f[h++]=e),h}function ea(t){return new Float64Array(t)}var ra=ea(4),ia=ea(8),na=ea(12),aa=ea(16),oa=ea(4);function sa(c,u,_,f,t,d,p){var e,r,i,n,a,y,g,x,v,m,E=c-t,b=_-t,T=u-d,A=f-d,o=E*A,s=Qn*E,l=s-(s-E),h=E-l,M=(ra[0]=(g=h*(i=A-(r=(s=Qn*A)-(s-A)))-(o-l*r-h*r-l*i))-((n=g-(v=(h=T-(l=(s=Qn*T)-(s-T)))*(i=b-(r=(s=Qn*b)-(s-b)))-((x=T*b)-l*r-h*r-l*i)))+(e=g-n))+(e-v),ra[1]=(y=o-((a=o+n)-(e=a-o))+(n-e))-((n=y-x)+(e=y-n))+(e-x),ra[2]=a-((m=a+n)-(e=m-a))+(n-e),ra[3]=m,function(t,e){for(var r=e[0],i=1;i<t;i++)r+=e[i];return r}(4,ra)),R=22204460492503146e-32*p;if(R<=M||R<=-M)return M;if(c=c-(E+(e=c-E))+(e-t),_=_-(b+(e=_-b))+(e-t),t=u-(T+(e=u-T))+(e-d),u=f-(A+(e=f-A))+(e-d),0==c&&0==t&&0==_&&0==u)return M;if((R=11093356479670487e-47*p+33306690738754706e-32*Math.abs(M))<=(M+=E*u+A*c-(T*_+b*t))||R<=-M)return M;oa[0]=(g=(h=c-(l=(s=Qn*c)-(s-c)))*(i=A-(r=(s=Qn*A)-(s-A)))-((o=c*A)-l*r-h*r-l*i))-((n=g-(v=(h=t-(l=(s=Qn*t)-(s-t)))*(i=b-(r=(s=Qn*b)-(s-b)))-((x=t*b)-l*r-h*r-l*i)))+(e=g-n))+(e-v),oa[1]=(y=o-((a=o+n)-(e=a-o))+(n-e))-((n=y-x)+(e=y-n))+(e-x),oa[2]=a-((m=a+n)-(e=m-a))+(n-e),oa[3]=m;f=ta(4,ra,4,oa,ia),oa[0]=(g=(h=E-(l=(s=Qn*E)-(s-E)))*(i=u-(r=(s=Qn*u)-(s-u)))-((o=E*u)-l*r-h*r-l*i))-((n=g-(v=(h=T-(l=(s=Qn*T)-(s-T)))*(i=_-(r=(s=Qn*_)-(s-_)))-((x=T*_)-l*r-h*r-l*i)))+(e=g-n))+(e-v),oa[1]=(y=o-((a=o+n)-(e=a-o))+(n-e))-((n=y-x)+(e=y-n))+(e-x),oa[2]=a-((m=a+n)-(e=m-a))+(n-e),oa[3]=m,d=ta(f,ia,4,oa,na),oa[0]=(g=(h=c-(l=(s=Qn*c)-(s-c)))*(i=u-(r=(s=Qn*u)-(s-u)))-((o=c*u)-l*r-h*r-l*i))-((n=g-(v=(h=t-(l=(s=Qn*t)-(s-t)))*(i=_-(r=(s=Qn*_)-(s-_)))-((x=t*_)-l*r-h*r-l*i)))+(e=g-n))+(e-v),oa[1]=(y=o-((a=o+n)-(e=a-o))+(n-e))-((n=y-x)+(e=y-n))+(e-x),oa[2]=a-((m=a+n)-(e=m-a))+(n-e),oa[3]=m,p=ta(d,na,4,oa,aa);return aa[p-1]}function la(t,e,r){i=t[0],t=t[1],n=e[0],e=e[1],a=r[0],r=r[1],s=(o=(t-r)*(n-a))-(l=(i-a)*(e-r));var i,n,a,o,s,l=0==o||0==l||0<o!=0<l?s:(o=Math.abs(o+l),Math.abs(s)>=33306690738754716e-32*o?s:-sa(i,t,n,e,a,r,o));return 0<l?-1:l<0?1:0}function ha(t,e){var r=t.point,i=e.point;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:(i=e,e=r,(r=t).left===i.left?0===la(e,r.otherEvent.point,i.otherEvent.point)?!r.isSubject&&i.isSubject?1:-1:r.isBelow(i.otherEvent.point)?-1:1:r.left?1:-1)}function ca(t,e,r){var i=new Zn(e,!1,t,t.isSubject),e=new Zn(e,!0,t.otherEvent,t.isSubject);return Jn(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=e.contourId=t.contourId,0<ha(e,t.otherEvent)&&(t.otherEvent.left=!0,e.left=!1),t.otherEvent.otherEvent=e,t.otherEvent=i,r.push(e),r.push(i),r}function ua(t,e){return t[0]*e[1]-t[1]*e[0]}function _a(t,e){return t[0]*e[0]+t[1]*e[1]}function fa(t,e,r){var i=function(t,e,r,i,n){function a(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}e=[e[0]-t[0],e[1]-t[1]],i=[i[0]-r[0],i[1]-r[1]];var o=[r[0]-t[0],r[1]-t[1]],s=ua(e,i),c=_a(e,e);if(0<s*s){var l=ua(o,i)/s;if(l<0||1<l)return null;var h=ua(o,e)/s;return h<0||1<h?null:0==l||1==l?n?null:[a(t,l,e)]:0==h||1==h?n?null:[a(r,h,i)]:[a(t,l,e)]}return 0<(s=ua(o,e))*s?null:(r=_a(e,o)/c,h=r+_a(e,i)/c,l=Math.min(r,h),s=Math.max(r,h),l<=1&&0<=s?1===l?n?null:[a(t,0<l?l:0,e)]:0===s?n?null:[a(t,s<1?s:1,e)]:n&&0===l&&1===s?null:[a(t,0<l?l:0,e),a(t,s<1?s:1,e)]:null)}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),n=i?i.length:0;if(0===n)return 0;if(1===n&&(Jn(t.point,e.point)||Jn(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===n&&t.isSubject===e.isSubject)return 0;if(1===n)return Jn(t.point,i[0])||Jn(t.otherEvent.point,i[0])||ca(t,i[0],r),Jn(e.point,i[0])||Jn(e.otherEvent.point,i[0])||ca(e,i[0],r),1;var n=[],i=!1,a=!1;return Jn(t.point,e.point)?i=!0:1===ha(t,e)?n.push(e,t):n.push(t,e),Jn(t.otherEvent.point,e.otherEvent.point)?a=!0:1===ha(t.otherEvent,e.otherEvent)?n.push(e.otherEvent,t.otherEvent):n.push(t.otherEvent,e.otherEvent),i&&a||i?(e.type=Wn,t.type=e.inOut===t.inOut?Un:Xn,i&&!a&&ca(n[1].otherEvent,n[0].point,r),2):(a?ca(n[0],n[1].point,r):n[0]!==n[3].otherEvent?(ca(n[0],n[1].point,r),ca(n[1],n[2].point,r)):(ca(n[0],n[1].point,r),ca(n[3].otherEvent,n[2].point,r)),3)}function da(t,e){if(t===e)return 0;if(0!==la(t.point,t.otherEvent.point,e.point)||0!==la(t.point,t.otherEvent.point,e.otherEvent.point))return Jn(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===ha(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,i=e.point;return r[0]===i[0]&&r[1]===i[1]?(r=t.otherEvent.point,i=e.otherEvent.point,r[0]===i[0]&&r[1]===i[1]?0:t.contourId>e.contourId?1:-1):1===ha(t,e)?1:-1}function pa(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null}function ya(t){for(var c=function(t){for(var e,r,i=[],n=0,a=t.length;n<a;n++)((e=t[n]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var o=!1;!o;)for(o=!0,n=0,a=i.length;n<a;n++)n+1<a&&1===ha(i[n],i[n+1])&&(r=i[n],i[n]=i[n+1],i[n+1]=r,o=!1);for(n=0,a=i.length;n<a;n++)(e=i[n]).otherPos=n;for(n=0,a=i.length;n<a;n++)(e=i[n]).left||(r=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=r);return i}(t),u={},_=[],e=function(){if(!u[f]){var t,e,r,i,n=_.length,a=(h=c[f],t=_,e=n,i=new pa,null!=h.prevInResult?(r=(h=h.prevInResult).outputContourId,0<h.resultTransition?null!=(h=t[r]).holeOf?(t[h=h.holeOf].holeIds.push(e),i.holeOf=h,i.depth=t[r].depth):(t[r].holeIds.push(e),i.holeOf=r,i.depth=t[r].depth+1):(i.holeOf=null,i.depth=t[r].depth)):(i.holeOf=null,i.depth=0),i),o=function(t){u[t]=!0,t<c.length&&c[t]&&(c[t].outputContourId=n)},s=f,l=f,h=c[f].point;for(a.points.push(h);;)if(o(s),o(s=c[s].otherPos),a.points.push(c[s].point),(s=function(t,e,r,i){var n,a=t+1,o=e[t].point,s=e.length;for(a<s&&(n=e[a].point);a<s&&n[0]===o[0]&&n[1]===o[1];){if(!r[a])return a;++a<s&&(n=e[a].point)}for(a=t-1;r[a]&&i<a;)a--;return a}(s,c,u,l))==l||s>=c.length||!c[s])break;_.push(a)}},f=0,r=c.length;f<r;f++)e();return _}pa.prototype.isExterior=function(){return null==this.holeOf};var ga=xa,di=xa;function xa(t,e){if(!(this instanceof xa))return new xa(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||va,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this._down(r)}function va(t,e){return t<e?-1:e<t?1:0}xa.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t;if(0!==this.length)return t=this.data[0],this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];0<t;){var n=t-1>>1,a=e[n];if(0<=r(i,a))break;e[t]=a,t=n}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,n=e[t];t<i;){var a=1+(t<<1),o=a+1,s=e[a];if(o<this.length&&r(e[o],s)<0&&(s=e[a=o]),0<=r(s,n))break;e[t]=s,t=a}e[t]=n}},ga.default=di;var ma=Math.max,Ea=Math.min,ba=0;function Ta(t,e,r,i,n,c){for(var a=0,u=t.length-1;a<u;a++){var o=t[a],s=t[a+1],l=new Zn(o,!1,void 0,e),h=new Zn(s,!1,l,e);l.otherEvent=h,o[0]===s[0]&&o[1]===s[1]||(l.contourId=h.contourId=r,c||(l.isExteriorRing=!1,h.isExteriorRing=!1),0<ha(l,h)?h.left=!0:l.left=!0,s=o[0],o=o[1],n[0]=Ea(n[0],s),n[1]=Ea(n[1],o),n[2]=ma(n[2],s),n[3]=ma(n[3],o),i.push(l),i.push(h))}}var Aa=[];function Ma(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);s=e,i=r,h=null,(l=t).length*s.length==0&&(i===zn?h=Aa:i===Kn?h=l:i!==Vn&&i!==jn||(h=0===l.length?s:l));var i=h;if(i)return i===Aa?null:i;var n,c,a,o,s=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],h=function(t,e,r,c,u){for(var i,n,a,o,s=new ga(null,ha),l=0,h=t.length;l<h;l++)for(a=0,o=(i=t[l]).length;a<o;a++)(n=0===a)&&ba++,Ta(i[a],!0,ba,s,r,n);for(l=0,h=e.length;l<h;l++)for(a=0,o=(i=e[l]).length;a<o;a++)n=0===a,(n=u===Kn?!1:n)&&ba++,Ta(i[a],!1,ba,s,c,n);return s}(t,e,s,l,r);if(t=t,e=e,a=r,o=null,((n=s)[0]>(c=l)[2]||c[0]>n[2]||n[1]>c[3]||c[1]>n[3])&&(a===zn?o=Aa:a===Kn?o=t:a!==Vn&&a!==jn||(o=t.concat(e))),i=o)return i===Aa?null:i;for(var u=ya(function(t,e,c,r){for(var i=new Gn(da),u=[],_=Math.min(e[2],c[2]);0!==t.length;){var n,a,o,s,l,h=t.pop();if(u.push(h),r===zn&&h.point[0]>_||r===Kn&&h.point[0]>e[2])break;h.left?(o=a=i.insert(h),a=a!==(n=i.minNode())?i.prev(a):null,o=i.next(o),$n(h,s=a?a.key:null,r),o&&2===fa(h,o.key,t)&&($n(h,s,r),$n(o.key,h,r)),a&&2===fa(a.key,h,t)&&($n(s,(l=(l=a)!==n?i.prev(l):null)?l.key:null,r),$n(h,s,r))):(h=h.otherEvent,o=a=i.find(h),a&&o&&(a=a!==n?i.prev(a):null,o=i.next(o),i.remove(h),o&&a&&fa(a.key,o.key,t)))}return u}(h,s,l,r)),_=[],f=0;f<u.length;f++){var d=u[f];if(d.isExterior()){for(var p=[d.points],y=0;y<d.holeIds.length;y++){var g=d.holeIds[y];p.push(u[g].points)}_.push(p)}}return _}function Ra(t,e){return Ma(t,e,Vn)}function Oa(t,e){return Ma(t,e,Kn)}function Sa(t,e){return Ma(t,e,jn)}function Ca(t,e){return Ma(t,e,zn)}var pi={matrix:Ht,tar:e,vector:Gt,equation:Mn,geom:te,bezier:kn,isec:Br,booleanOperations:{union:Ra,diff:Oa,intersection:Ca,xor:Sa}},yi=T.STYLE_KEY,Ia=yi.TRANSLATE_X,wa=yi.TRANSLATE_Y,ka=yi.TRANSLATE_Z,Da=yi.SCALE_X,La=yi.SCALE_Y,Na=yi.SCALE_Z,Pa=yi.SKEW_X,Fa=yi.SKEW_Y,Ba=yi.ROTATE_X,Ha=yi.ROTATE_Y,Ga=yi.ROTATE_Z,Ya=yi.ROTATE_3D,Wa=yi.PERSPECTIVE,Ua=yi.MATRIX,Xa=yi.FONT_SIZE,za=r.PERCENT,Va=r.REM,Ka=r.VW,ja=r.VH,$a=r.VMAX,qa=r.VMIN,Oi=pi.matrix,Za=Oi.identity,Ja=Oi.multiply,Qa=Oi.isE,to=pi.geom.d2r;function eo(t,e,r,i){n=e,a=r,o=i,s=[],t.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];s.push([e,function(t,e,r,i,n){if(t===Ia||t===ka){if(e[1]===za)return e[0]*r*.01;if(e[1]===Va)return e[0]*n.computedStyle[Xa];if(e[1]===Ka)return e[0]*n.width*.01;if(e[1]===ja)return e[0]*n.height*.01;if(e[1]===$a)return e[0]*Math.max(n.width,n.height)*.01;if(e[1]===qa)return e[0]*Math.min(n.width,n.height)*.01}else if(t===wa){if(e[1]===za)return e[0]*i*.01;if(e[1]===Va)return e[0]*n.computedStyle[Xa];if(e[1]===Ka)return e[0]*n.width*.01;if(e[1]===ja)return e[0]*n.height*.01;if(e[1]===$a)return e[0]*Math.max(n.width,n.height)*.01;if(e[1]===qa)return e[0]*Math.min(n.width,n.height)*.01}else{if(t===Ua)return e;if(t===Ya)return e}return e[0]}(e,t,n,a,o)])});var n,a,o,s,e=s,y=Za();return e.forEach(function(t){var e,r,i,n,a,o,s,l,c,u,_,f,d,t=Bt(t,2),h=t[0],t=t[1],p=Za();e=p,t=t,(h=h)===Ia?e[12]=t:h===wa?e[13]=t:h===ka?e[14]=t:h===Da?e[0]=t:h===La?e[5]=t:h===Na?e[10]=t:h===Pa?(t=to(t),e[4]=Math.tan(t)):h===Fa?(t=to(t),e[1]=Math.tan(t)):h===Ba?(t=to(t),r=Math.sin(t),o=Math.cos(t),e[5]=e[10]=o,e[6]=r,e[9]=-r):h===Ha?(t=to(t),o=Math.sin(t),r=Math.cos(t),e[0]=e[10]=r,e[8]=o,e[2]=-o):h===Ga?(t=to(t),r=Math.sin(t),o=Math.cos(t),e[0]=e[5]=o,e[1]=r,e[4]=-r):h===Ya?(r=(o=Bt(t,4))[0],i=o[1],n=o[2],o=o[3],o=to(o[0]),a=Math.sin(o),o=Math.cos(o),!r||i||n?!i||r||n?!n||r||i?(1!==(l=Math.sqrt(r*r+i*i+n*n))&&(r*=l=1/l,i*=l,n*=l),l=r*i,c=i*n,u=n*r,_=r*a,f=i*a,d=n*a,e[0]=r*r*(s=1-o)+o,e[1]=l*s+d,e[2]=u*s-f,e[3]=0,e[4]=l*s-d,e[5]=i*i*s+o,e[6]=c*s+_,e[7]=0,e[8]=u*s+f,e[9]=c*s-_,e[10]=n*n*s+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(n<0&&(a=-a),e[0]=o,e[4]=-a,e[1]=a,e[5]=o):(i<0&&(a=-a),e[0]=o,e[8]=a,e[2]=-a,e[10]=o):(r<0&&(a=-a),e[5]=o,e[9]=-a,e[6]=a,e[10]=o)):h===Wa&&0<t?(t=Math.max(t,1),e[11]=-1/t):h===Ua&&At.assignMatrix(e,t),y=Ja(y,p)}),y}function ro(t,e){var e=Bt(e,2),r=e[0],e=e[1],i=t.slice(0);return 0===r&&0===e||Qa(t)?i:(i=Ja([1,0,0,0,0,1,0,0,0,0,1,0,r,e,0,1],i),Ja(i,[1,0,0,0,0,1,0,0,0,0,1,0,-r,-e,0,1]))}var io={calMatrix:eo,calMatrixByPerspective:function(t,e){return t=Qa(e)?t:Ja(e,t)},calPerspectiveMatrix:function(t,e){var r;if(t&&0<t)return r=Za(),t=Math.max(t,1),r[11]=-1/t,e=(t=Bt(e,2))[0],t=t[1],(e||t)&&(r=Ja([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=Ja(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r},calMatrixByOrigin:ro,calMatrixWithOrigin:function(t,e,r,i){return ro(eo(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}},xi=T.STYLE_KEY,no=xi.COLOR,ao=xi.FONT_WEIGHT,oo=xi.FONT_FAMILY,so=xi.FONT_SIZE,lo=xi.FONT_STYLE,ho=xi.LETTER_SPACING,co=xi.TEXT_STROKE_COLOR,uo=xi.TEXT_STROKE_WIDTH,_o=xi.TEXT_STROKE_OVER,fo=xi.ROTATE_Z,po=xi.LINE_HEIGHT,yo=r.DEG,go=et.CANVAS,xo=et.SVG,vo=et.WEBGL,mo=/(?:[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u02EA\u02EB\u1100-\u11FF\u1401-\u167F\u18B0-\u18FF\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2065\u20DD-\u20E0\u20E2-\u20E4\u2100\u2101\u2103-\u2109\u210F\u2113\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u212E\u2135-\u213F\u2145-\u214A\u214C\u214D\u214F-\u2189\u218C-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2B97\u2BB8-\u2BD1\u2BD3-\u2BEB\u2BF0-\u2BFF\u2E50\u2E51\u2E80-\u3007\u3012\u3013\u3020-\u302F\u3031-\u309F\u30A1-\u30FB\u30FD-\uA4CF\uA960-\uA97F\uAC00-\uD7FF\uE000-\uFAFF\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF01-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7\uFFF0-\uFFF8\uFFFC\uFFFD]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|[\uD80C\uD81C-\uD822\uD83C\uD83D\uD840-\uD87E\uD880-\uD8BE][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC3F]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFFF]|\uD823[\uDC00-\uDD7F]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFF]|\uD833[\uDF00-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83E[\uDD00-\uDEFF]|[\uD87F\uD8BF][\uDC00-\uDFFD])/,Eo=function(){function l(t,e,r,i,n,a,o){var s=7<arguments.length&&void 0!==arguments[7]&&arguments[7];_(this,l),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,s?(this.__width=a,this.__height=n):(this.__width=n,this.__height=a),this.__content=o,this.__virtualDom={},this.__parentLineBox=null,this.__isVertical=s}return f(l,[{key:"render",value:function(c,t,e,u,_,f){var d=this.content,r=this.x,i=this.y,n=this.parent,p=this.width,a=this.height,y=this.isUpright,g=n.ox,x=n.oy,n=n.parent,v=vn.getBaseline(e),m=vn.getVerticalBaseline(e),E=(y?r+=m:i+=v,r+=g+_,i+=x+f,y?(this.__endX=r,this.__endY=i+a):(this.__endX=r+p,this.__endY=i),e[ho]),b=e[uo],o=e[co],T=e[so],g=e[po],A=0,M=d.length;if(c===go||c===vo){var R,s=n.matrixEvent,O=0,S=0,l=(y&&(R=[[fo,[90,yo]]],O=.6*m,S=.2*m),"fill"===e[_o]);if(E)for(;A<M;A++){var C,I=d.charAt(A);y?(mo.test(I)?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),l&&t.fillText(I,r-O,i-S),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(I,r-O,i-S),l||t.fillText(I,r-O,i-S)):(C=io.calMatrixWithOrigin(R,[r,i],0,0),C=Ht.multiply(s,C),t.setTransform(C[0],C[1],C[4],C[5],C[12],C[13]),l&&t.fillText(I,r,i),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(I,r,i),l||t.fillText(I,r,i)),i+=t.measureText(I).width+E):(l&&t.fillText(I,r,i),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(I,r,i),l||t.fillText(I,r,i),r+=t.measureText(I).width+E)}else if(y){for(var w=mo.test(d.charAt(0)),k=0,h=0,D=d.length,L=1;L<D;L++){var N,P,F=mo.test(d.charAt(L));F!==w?(w?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),N=d.slice(k,L),l&&t.fillText(N,r-O,i+h+v-S),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(N,r-O,i+h+v-S),l||t.fillText(N,r-O,i+h+v-S),h+=T):(N=io.calMatrixWithOrigin(R,[r,i+h],0,0),N=Ht.multiply(s,N),t.setTransform(N[0],N[1],N[4],N[5],N[12],N[13]),P=d.slice(k,L),l&&t.fillText(P,r,i+h),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(P,r,i+h),l||t.fillText(P,r,i+h),h+=t.measureText(P).width),k=L,w=!w):F&&(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),P=d.slice(k,L),l&&t.fillText(P,r-O,i+h+v-S),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(P,r-O,i+h+v-S),l||t.fillText(P,r-O,i+h+v-S),h+=T,k=L)}k<D&&(x=d.slice(k,D),w?(t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),l&&t.fillText(x,r-O,i+h+v-S),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(x,r-O,i+h+v-S),l||t.fillText(x,r-O,i+h+v-S)):(a=io.calMatrixWithOrigin(R,[r,i+h],0,0),a=Ht.multiply(s,a),t.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]),l&&t.fillText(x,r,i+h),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(x,r,i+h),l||t.fillText(x,r,i+h)))}else l&&t.fillText(d,r,i),b&&(0<o[3]||3===o.length||o.k)&&t.strokeText(d,r,i),l||t.fillText(d,r,i)}else c===xo&&(y&&(r+=.5*g-m),a=[["x",r],["y",i],["fill",p=(p=u[no]).k?n.__gradient(c,t,n.__bx1,n.__by1,n.__bx2,n.__by2,p,_,f).v:p],["font-family",e[oo]],["font-weight",e[ao]],["font-style",e[lo]],["font-size",e[so]+"px"]],b&&(0<o[3]||3===o.length||o.k)&&((x=u[co]).k&&(x=n.__gradient(c,t,n.__bx1,n.__by1,n.__bx2,n.__by2,x,_,f).v),a.push(["stroke",x]),a.push(["stroke-width",e[uo]])),E&&a.push(["letter-spacing",E]),y&&a.push(["writing-mode","vertical-lr"]),this.__virtualDom={type:"item",tagName:"text",props:a,content:At.encodeHtml(d)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"offsetWidth",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"offsetHeight",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseline",get:function(){return this.parent.baseline}},{key:"verticalBaseline",get:function(){return this.parent.verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}}]),l}(),mi=T.STYLE_KEY,bo=mi.FONT_SIZE,To=mi.FONT_FAMILY,Ao=mi.FONT_WEIGHT,Mo=mi.FONT_STYLE,Ro=mi.COLOR,Oo=mi.LINE_HEIGHT,So=mi.ROTATE_Z,Co=T.NODE_KEY.NODE_VIRTUAL_DOM,Io=r.DEG,wo=et.CANVAS,ko=et.SVG,Do=et.WEBGL,Lo=function(){d(s,w);var o=p(s);function s(t,e,r,i,n){var a;return _(this,s),(a=o.call(this)).__x=a.__sx1=t,a.__y=a.__sy1=e,a.__width=r,(a.__parent=a.__domParent=i).__ellipsis=l(a),a.__parentLineBox=null,a.__baseline=vn.getBaseline(i.computedStyle),a.__isVertical=n,a}return f(s,[{key:"render",value:function(h,c,t,u){var e=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,_=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.x,i=this.y,n=this.parent,a=this.isUpright,f=n.ox,o=n.oy,s=n.computedStyle,d=n.cacheStyle[Ro],l=vn.getBaseline(s),p=vn.getVerticalBaseline(s);a?r+=p:i+=l,r+=f+e,i+=o+_,h===wo||h===Do?(l=vn.setFontStyle(s),t.font!==l&&(t.font=l),t.fillStyle!==d&&(t.fillStyle=d),a&&(f=n.matrixEvent,e=io.calMatrixWithOrigin([[So,[90,Io]]],[r,i],0,0),e=Ht.multiply(f,e),t.setTransform(e[0],e[1],e[4],e[5],e[12],e[13])),t.fillText("â€¦",r,i)):h===ko&&(a&&(r+=.5*s[Oo]-p),o=[["x",r],["y",i],["fill",d],["font-family",s[To]],["font-weight",s[Ao]],["font-style",s[Mo]],["font-size",s[bo]+"px"]],a&&o.push(["writing-mode","vertical-lr"]),_=this.__config[Co]=this.__virtualDom={type:"text",children:[{type:"item",tagName:"text",props:o,content:"â€¦"}]},n.virtualDom.children.push(_))}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"isEllipsis",get:function(){return!0}}]),s}(),No=[8,16,32,64,128,256,512,1024,2048,4096,8192],Po=[128,64,32,16,8,4,2,1,1,1,1],Fo=No[No.length-1],Bo={},Ho=0,Go=function(){function u(t,e){_(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;t=this.__canvas=Mt.getCacheCanvas(t,t,null,e);t&&(this.__offscreen=t),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=Ho++,this.__update=!1,this.time=0}return f(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var n=r*t+i;if(e[n])return e[n]=0,this.__free--,n}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(Fo<t)){for(var e=No[0],r=Po[0],i=0,n=No.length;i<n&&(e=No[i],r=Po[i],!(No[i]>=t));i++);for(var a,o=Bo[e]=Bo[e]||[],s=0,l=o.length;s<l;s++){var h=o[s];if(h.free){a=h;break}}if(!a){if(!(a=new u(e,r)).offscreen)return void Mt.error("Can not create off-screen for page");o.push(a)}var c=a.add();return{page:a,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:No,NUMBER:Po}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(No=t.SIZE,Po=t.NUMBER,Fo=No[No.length-1])}},{key:"MAX",get:function(){return Fo}},{key:"genUuid",value:function(){return Ho++}}]),u}(),vi=T.STYLE_KEY,Yo=vi.TRANSFORM_ORIGIN,Wo=vi.TRANSFORM,Uo=vn.spreadFilter;function Xo(t,e,r){var i=t.size,n=t.sx1,a=t.sy1,o=t.bbox,s=(r=r||o)[2]-r[0],l=r[3]-r[1],h=r[0]-o[0],o=r[1]-o[1],e=Mt.getCacheCanvas(s,l,null,e);return e.x=0,e.y=0,e.bbox=r,e.size=i,e.sx1=n,e.sy1=a,e.dx=-r[0],e.dy=-r[1],e.dbx=t.dbx-h,e.dby=t.dby-o,e.width=s,e.height=l,e}var zo=function(){function p(t,e,r,i,n,a,o){_(this,p),this.__init(t,e,r,i,n,a,o)}return f(p,[{key:"__init",value:function(t,e,r,i,n,a,o){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=n;t=Bt(i.getCoords(n),2),e=t[0],r=t[1];this.__x=e,this.__y=r,this.__appendData(a,o),this.__isNew=!0,i.canvas&&(this.__enabled=!0,(n=i.ctx).setTransform(1,0,0,1,0,0),n.globalAlpha=1,Z.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,n,a,o;At.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),(o=Go.getInstance(Math.max(i,n)))?(a=o.page,o=o.pos,this.__init(i,n,t,a,o,e,r)):this.__enabled=!1)}},{key:"resetBbox",value:function(t){}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return Go.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),a=Go.getInstance(Math.max(i,n));if(a)return new p(i,n,t,a.page,a.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=t.x,c=t.y,u=t.size,_=t.canvas,f=t.sx1,d=t.sy1,i=t.width,n=t.height,a=t.bbox,o=a[0]-(a=Uo(a,e))[0],s=a[2]-a[0],l=a[3]-a[1],h=Mt.getCacheCanvas(s,l,null,"filter");return h.ctx.filter=ne.canvasFilter(e),h.ctx.drawImage(_,r,c,i,n,o,o,i,n),h.ctx.filter="none",h.draw(),h.bbox=a,h.x=0,h.y=0,h.size=u,h.sx1=f,h.sy1=d,h.dx=-a[0],h.dy=-a[1],h.dbx=t.dbx+o,h.dby=t.dby+o,h.width=s,h.height=l,h}},{key:"genMask",value:function(t,e,r){for(var i=Xo(t,"mask1"),n=[],a=e.computedStyle,o=a[Wo],a=a[Yo],s=e.next,l=s.isClip;s&&s.isMask;)n.push(s),s=s.next;var c=i.x,u=i.y,h=i.ctx,_=i.dbx,f=i.dby,d=(a[0]+=c+_+e.__sx1-t.sx1,a[1]+=u+f+e.__sy1-t.sy1,io.calMatrixByOrigin(o,a));return n.forEach(function(t){r(t,i,d)}),h.setTransform(1,0,0,1,0,0),h.globalAlpha=1,h.globalCompositeOperation=l?"source-out":"source-in",p.drawCache(t,i),h.globalCompositeOperation="source-over",i.draw(h),i}},{key:"genOverflow",value:function(t,e){var r=t.bbox,i=e.__sx1,n=e.__sy1,a=e.clientWidth,e=e.clientHeight,o=i+a,s=n+e;if(r[0]<i||r[1]<n||r[2]>o||r[3]>s)return(i=(r=Xo(t,"overflow",[i,n,o,s])).ctx).setTransform(1,0,0,1,0,0),i.globalAlpha=1,p.drawCache(t,r),r.draw(i),i.globalCompositeOperation="destination-in",i.fillStyle="#FFF",i.beginPath(),i.rect(0,0,a,e),i.fill(),i.closePath(),i.globalCompositeOperation="source-over",r}},{key:"drawCache",value:function(t,e,r,i,n,a,o){var s=e.x,c=e.y,l=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,e=e.dby,d=t.x,p=t.y,y=t.canvas,h=t.sx1,g=t.sy1,x=t.dbx,v=t.dby,m=t.width,t=t.height,s=s+h-l+f-x,h=c+g-u+e-v;r&&i&&n&&(n[0]+=s,n[1]+=h,l=io.calMatrixByOrigin(r,n),i=Ht.multiply(i,l),Ht.isE(a)||(i=Ht.multiply(a,i)),o&&(i=At.equalArr(i,o)?Ht.identity():(o=Ht.inverse(o),Ht.multiply(o,i))),_.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),_.drawImage(y,d,p,m,t,s,h,m,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var e=i.x,r=i.y,n=i.canvas,a=i.sx1,o=i.sy1,s=i.dbx,l=i.dby,h=i.width,i=i.height;t.drawImage(n,e,r,h,i,a-s,o-l,h,i)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),p}(),Ti=(a(zo,"NA",0),a(zo,"LOCAL",1),a(zo,"CHILD",2),a(zo,"SELF",3),T.STYLE_KEY),n=T.STYLE_KEY,Vo=n.TRANSLATE_X,Ko=n.TRANSLATE_Y,jo=n.TRANSLATE_Z,$o=n.OPACITY,qo=n.FILTER,Zo=n.PERSPECTIVE,Jo=n.PERSPECTIVE_ORIGIN,Qo={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},ts=(a(t={},Ti.SCALE_X,!0),a(t,Ti.SCALE_Y,!0),a(t,Ti.SCALE_Z,!0),a(t,Ti.ROTATE_X,!0),a(t,Ti.ROTATE_Y,!0),a(t,Ti.ROTATE_Z,!0),a(t,Ti.SKEW_X,!0),a(t,Ti.SKEW_Y,!0),a(t,Ti.ROTATE_3D,!0),a(t,Ti.TRANSFORM,!0),a(t,Ti.TRANSFORM_ORIGIN,!0),t),es=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return Tr.isIgnore(t)?Qo.NONE:t===Vo?Qo.TRANSLATE_X:t===Ko?Qo.TRANSLATE_Y:t===jo?Qo.TRANSLATE_Z:ts.hasOwnProperty(t)?Qo.TRANSFORM:t===$o?Qo.OPACITY:t===qo?Qo.FILTER:t===Zo||t===Jo?Qo.PERSPECTIVE:Tr.isRepaint(t)?Qo.REPAINT:Qo.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<Qo.REFLOW},isRebuild:function(t){return Qo.REBUILD<=t}},Qo),ur=(es.TRANSFORMS=ts,T.STYLE_KEY),rs=ur.DISPLAY,is=ur.POSITION,ns=ur.LINE_HEIGHT,as=ur.FONT_SIZE,os=ur.FONT_FAMILY,ss=ur.FONT_WEIGHT,ls=ur.COLOR,hs=ur.VISIBILITY,cs=ur.LETTER_SPACING,us=ur.OVERFLOW,_s=ur.WHITE_SPACE,fs=ur.TEXT_OVERFLOW,ds=ur.WIDTH,ps=ur.HEIGHT,ys=ur.TEXT_STROKE_COLOR,gs=ur.TEXT_STROKE_WIDTH,xs=ur.MARGIN_TOP,vs=ur.MARGIN_BOTTOM,ms=ur.MARGIN_LEFT,Es=ur.MARGIN_RIGHT,bs=ur.PADDING_TOP,Ts=ur.PADDING_BOTTOM,As=ur.PADDING_LEFT,Ms=ur.PADDING_RIGHT,Rs=ur.BORDER_TOP_WIDTH,Os=ur.BORDER_BOTTOM_WIDTH,Ss=ur.BORDER_LEFT_WIDTH,Cs=ur.BORDER_RIGHT_WIDTH,Is=ur.FILTER,Wr=T.NODE_KEY,ws=Wr.NODE_CACHE,ks=Wr.NODE_LIMIT_CACHE,Ds=Wr.NODE_DOM_PARENT,Ls=Wr.NODE_MATRIX_EVENT,Ns=Wr.NODE_OPACITY,Ps=Wr.NODE_VIRTUAL_DOM,i=T.UPDATE_KEY,Fs=i.UPDATE_NODE,Bs=i.UPDATE_FOCUS,Hs=i.UPDATE_CONFIG,Gs=T.ELLIPSIS,Ys=r.AUTO,Ws=et.CANVAS,Us=et.SVG,Xs=et.WEBGL;function zs(c,t,e,r,u,i,_,f,d,p,y,g){if(r<=e)return[0,0,!1];var n=e,a=r,x=0,o=!1;if(y&&-1<[Ws,Xs].indexOf(t)){for(var v=0;n<a;n++){var m=c.measureText(u.charAt(n)).width+y;if(i+1e-10<v+m){o=!0;break}v+=m}return[n-e,v,o||i+1e-10<v]}var s=Math.round(i/_);for(s<=0?s=1:r-e<s&&(s=r-e);n<a;){var l=void 0,h=u.slice(e,e+s);if(t===Ws||t===Xs?l=c.measureText(h).width:t===Us&&(l=Mt.measureTextSync(h,f,d,p,g)),y&&(l+=s*y),l===i){x=i,o=!0;break}if(i+1e-10<l){if(o=!0,1===s){x=l;break}if(n===a-1||n-e==s-1){s=n-e;break}a=s+e-1,h=Math.round((l-i)/_);(s-=h=h<=0?1:h)<n-e&&(s=n-e)}else{if(x=l,s===r-e)break;n=s+e,h=Math.round((i-l)/_);a-e<(s+=h=h<=0?1:h)&&(s=a-e)}}return[s,x,o]}function Vs(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}var Ks=function(){d(i,w);var r=p(i);function i(t){var e;return _(this,i),(e=r.call(this)).__content=At.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidth=0,e.__textWidth=0,e.__bp=null,e.__widthHash={},e}return f(i,[{key:"__layout",value:function(t){var c=this.__config[ws],e=(c&&c.release(),t.x),r=t.y,c=t.w,u=t.h,i=t.lx,_=void 0===i?e:i,i=t.ly,f=void 0===i?r:i,d=t.lineBoxManager,i=t.endSpace,n=void 0===i?0:i,i=t.lineClamp,p=void 0===i?0:i,i=t.lineClampCount,y=void 0===i?0:i,i=t.isUpright,a=void 0!==i&&i,i=(this.__x=this.__sx=this.__sx1=e,this.__y=this.__sy=this.__sy1=r,this.isDestroyed),g=this.content,o=this.computedStyle,x=this.textBoxes,v=this.root;if(x.splice(0),this.__config[ks]=!1,i||"none"===o[rs]||!g||p&&p<=y)return y;for(var s=this.__ox=this.__oy=0,m=g.length,E=0,b=o[ns],T=o[cs],i=o[_s],A=o[as],M=o[ss],R=o[os],O=a?u:c,S=a?r-f:e-_,C=this.domParent;"inline"===C.computedStyle[rs];)C=C.domParent;var I,u=(this.__bp=C).computedStyle[fs],w=v.renderMode,k=(w!==Ws&&w!==Xs||((I=(w===Xs?Mt.getFontCanvas():v).ctx).font=vn.setFontStyle(o)),.8*A+T),l=0;if("nowrap"===i){var D,L,c=this.textWidth,v=C.computedStyle,i=v[is],v=v[us],N=C.currentStyle[a?ps:ds];(D="hidden"===v?("absolute"!==i||N[1]!==Ys)&&O+1e-10-S-n<c:D)&&"ellipsis"===u?(L=Bt(this.__lineBack(I,w,s,m,g,O-n-S,k,e,r,E,n,b,x,d,R,A,M,T,a),1)[0],l++,a?e=L:r=L):(v=new Eo(this,x.length,e,r,c,b,g,a),x.push(v),d.addItem(v,!1),a?e+=b:r+=b,D&&l++),E=c}else{for(;s<m;){var h=s?O:O-S;p&&p-1<=l+y&&(h-=n);var P=Bt(zs(I,w,s,m,g,h,k,R,A,M,T),3),F=P[0],B=P[1],P=P[2];if(p&&P&&p-1<=l+y&&s+F<m){var H=Bt(this.__lineBack(I,w,s,s+F,g,h-n,k,l?_:e,r,E,n,b,x,d,R,A,M,T,a),2);L=H[0],E=H[1],l++,a?e=L:r=L;break}if(s+F===m&&n&&h+1e-10<B+n&&1<F){H=Bt(zs(I,w,s,m,g,h-n,k,R,A,M,T),3),F=H[0],B=H[1],P=H[2];if(p&&P&&p-1<=l+y){h=Bt(this.__lineBack(I,w,s,s+F,g,h-n,k,l?_:e,r,E,n,b,x,d,R,A,M,T,a),2);L=h[0],E=h[1],l++,a?e=L:r=L;break}}E=Math.max(E,B),h=new Eo(this,x.length,l&&!a?_:e,l&&a?f:r,B,b,g.slice(s,s+F),a);x.push(h),d.addItem(h,P),a?e+=Math.max(b,d.verticalLineHeight):r+=Math.max(b,d.lineHeight),s+=F,P&&l++}l&&(a?this.__y=this.__sy1=f:this.__x=this.__sx1=_)}return a?(this.__width=e-t.x,this.__height=E,this.__verticalBaseline=vn.getVerticalBaseline(o)):(this.__width=E,this.__height=r-t.y,this.__baseline=vn.getBaseline(o)),y+l}},{key:"__layoutNone",value:function(){this.__width=this.__height=this.__baseline=this.__verticalBaseline=0,this.__textBoxes.splice(0)}},{key:"__lineBack",value:function(t,c,u,_,f,e,d,r,i,p,y,g,x,n,v,m,E,b,a){var T=this.__bp,A=T.computedStyle,o=c===Ws||c===Xs?(M=vn.setFontStyle(A),t.font!==M&&(t.font=M),t.measureText(Gs).width):Mt.measureTextSync(Gs,A[os],A[as],A[ss]);c!==Ws&&c!==Xs||(M=vn.setFontStyle(this.computedStyle),t.font!==M&&(t.font=M));var M=Bt(zs(t,c,u,_,f,e-o-y,d,v,m,E,b),2),_=M[0],v=M[1];if(e+1e-10-y<v+o){var R=n.lineBox;if(!n.isNewLine&&R&&R.size)for(var O=R.list,S=O.length-1;0<=S;S--){var C=O[S];if(C instanceof Eo){var I,s,w,k=C.content,D=C.width,L=C.height,N=C.parent;if(!S||D+o+1e-10+y<=e)return h=k.length,I=(s=N.computedStyle)[ns],B=s[cs],w=s[as],F=s[ss],s=s[os],c!==Ws&&c!==Xs||(t.font=vn.setFontStyle(N.computedStyle)),h=(N=Bt(zs(t,c,0,h,k,e-o+D-y,d,s,w,F,B),2))[0],s=N[1],h!==k.length&&(C.__content=k.slice(0,h),a?(i-=L-s,C.__height=s):(r-=D-s,C.__width=s)),R.__resetLb(A[ns],a?vn.getVerticalBaseline(A):vn.getBaseline(A)),w=a?new Lo(r,i+s+y,o,T,a):new Lo(r+s+y,i,o,T,a),n.addItem(w,!0),a?r+=Math.max(I,n.verticalLineHeight):i+=Math.max(I,n.lineHeight),[i,p=Math.max(p,s+o)];var P=O.pop(),F=(a?(e+=L,i-=L):(e+=D,r-=D),P.parent.textBoxes),B=F.indexOf(P),H=(-1<B&&F.splice(B,1),P.parent.parent),G=O[O.length-1];for(G instanceof Eo&&(G=G.parent.parent);H!==T&&H!==G;){var l=H.contentBoxList||[],Y=l.indexOf(P),l=(-1<Y&&l.splice(Y,1),H.computedStyle);a?(i-=Y=l[xs]+l[vs]+l[bs]+l[Ts]+l[Rs]+l[Os],e+=Y):(r-=Y=l[ms]+l[Es]+l[As]+l[Ms]+l[Ss]+l[Cs],e+=Y),H.__layoutNone(),H=H.domParent}N=G.contentBoxList||[],k=N.indexOf(P);-1<k&&N.splice(k,1)}else{if(!S)break;var h=O.pop();a?i-=h.outerHeight:r-=h.outerWidth,e+=a?h.outerHeight:h.outerWidth,h.__layoutNone()}}}m=new Eo(this,x.length,r,i,v,g,f.slice(u,u+_),a),x.push(m),n.addItem(m,!1),E=a?new Lo(r,i+v+y,o,T,a):new Lo(r+v+y,i,o,T,a);return n.addItem(E,!0),a?r+=Math.max(g,n.verticalLineHeight):i+=Math.max(g,n.lineHeight),[a?r:i,p=Math.max(p,v+o)]}},{key:"__backtrack",value:function(c,u,_,f,t,d,p,y,g,x,e){for(var r=_.list,v=r.length-1;0<=v;v--){var i=r[v];if(i instanceof Eo){var n,m,a=i.content,E=i.width,b=i.height,o=i.parent;if(!v||E+p+1e-10+d<=t)return h=a.length,M=(n=o.computedStyle)[cs],m=n[as],A=n[ss],n=n[os],x!==Ws&&x!==Xs||(g.font=vn.setFontStyle(o.computedStyle)),h=(o=Bt(zs(g,x,0,h,a,t-p-d+E,.8*m+M,n,m,A,M),2))[0],n=o[1],h!==a.length&&(i.__content=a.slice(0,h),e?i.__height=n:i.__width=n),_.__resetLb(y[ns],e?vn.getVerticalBaseline(y):vn.getBaseline(y)),m=e?new Lo(i.x,i.y+n+d,p,c,e):new Lo(i.x+n+d,i.y,p,c,e),void u.addItem(m,!0);var T=r.pop(),A=(t+=e?b:E,T.parent.textBoxes),M=A.indexOf(T),s=(-1<M&&A.splice(M,1),T.parent.parent),R=r[r.length-1];for(R instanceof Eo&&(R=R.parent.parent);s!==c&&s!==R;){var l=s.contentBoxList||[],O=l.indexOf(T),l=(-1<O&&l.splice(O,1),s.computedStyle);t+=e?l[xs]+l[vs]+l[bs]+l[Ts]+l[Rs]+l[Os]:l[ms]+l[Es]+l[As]+l[Ms]+l[Ss]+l[Cs],s.__layoutNone(),s=s.domParent}o=R.contentBoxList||[],a=o.indexOf(T);-1<a&&o.splice(a,1)}else{if(!v)break;var h=r.pop();t+=e?h.outerHeight:h.outerWidth,h.__layoutNone()}}}},{key:"__offsetX",value:function(e,t){P(N(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){P(N(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.firstCharWidth}},{key:"__inlineSize",value:function(r){var i,n;this.textBoxes.forEach(function(t,e){n=e?(i=Math.min(i,r?t.y:t.x),Math.max(n,(r?t.y:t.x)+t.width)):(i=r?t.y:t.x,(r?t.y:t.x)+t.width)}),r?(this.__y=i,this.__sy=this.__sy1=i+this.oy,this.__sx=this.__sx1,this.__height=n-i):(this.__x=i,this.__sx=this.__sx1=i+this.ox,this.__sy=this.__sy1,this.__width=n-i)}},{key:"render",value:function(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,h=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,a=this.isDestroyed,o=this.computedStyle,c=this.textBoxes,u=this.cacheStyle,s=this.__config;if(e===Us&&(s[Ps]=this.__virtualDom={type:"text",children:[]}),t>=es.REPAINT&&(this.__bbox=null,this.__filterBbox=null),!a&&"none"!==o[rs]&&"hidden"!==o[hs]&&c.length){if(e===Ws||e===Xs){if(e===Xs)if(i){var t=this.sx,a=this.sy,i=this.bbox,l=s[ws];if(l?l.reset(i,t,a):l=zo.getInstance(i,t,a),!l||!l.enabled)return void(s[ks]=!0);(s[ws]=l).__available=!0,r=l.ctx,n+=l.dx,h+=l.dy,s[ks]=!1}else{i=this.root,t=Mt.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),a=(r=t.ctx,s[Ds].__config),l=a[Ls],i=a[Ns];r.setTransform(l[0],l[1],l[4],l[5],l[12],l[13]),r.globalAlpha=i}t=vn.setFontStyle(o),s=(r.font!==t&&(r.font=t),u[ls]),l=(s.k&&(s=(a=this.parent).__gradient(e,r,a.__bx1,a.__by1,a.__bx2,a.__by2,s,n,h).v),r.fillStyle!==s&&(r.fillStyle=s),o[gs]),i=(r.lineWidth!==l&&(r.lineWidth=l),u[ys]);i.k&&(i=(t=this.parent).__gradient(e,r,t.__bx1,t.__by1,t.__bx2,t.__by2,i,n,h).v),r.strokeStyle!==i&&(r.strokeStyle=i)}c.forEach(function(t){t.render(e,r,o,u,n,h)}),e===Us&&(this.virtualDom.children=c.map(function(t){return t.virtualDom}))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(i.prototype),"__destroy",this).call(this),(t=this.__config[ws])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,e){var n=this;i!==n.__content?(root.delRefreshTask(n.__task),root.addRefreshTask(n.__task={__before:function(){n.__content=i;var t={},e=n.domParent,r=(t[Fs]=e,t[Bs]=es.REFLOW,t[Hs]=e.__config,e.root);r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(t){At.isFunction(e)&&e(t)}})):At.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,a=r[os],o=r[as],c=r[ss],u=r[cs],s=Vs(a,o,c,u),t=(t.hasOwnProperty(s)||(t[s]={}),t[s]);if(!t.hasOwnProperty("charWidth")){var l=0;if(i===Ws||i===Xs){(n=i===Xs?Mt.getFontCanvas().ctx:n).font=vn.setFontStyle(r);for(var h=0,_=e.length;h<_;h++)l=Math.max(l,n.measureText(e.charAt([h])).width)}else i===Us&&(l=Mt.measureTextListMax(e,a,o,c));t.charWidth=l+u}return t.charWidth}},{key:"firstCharWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,a=r[os],o=r[as],s=r[ss],l=r[cs],h=Vs(a,o,s,l),t=(t.hasOwnProperty(h)||(t[h]={}),t[h]);return t.hasOwnProperty("firstCharWidth")||(i===Ws||i===Xs?((n=i===Xs?Mt.getFontCanvas().ctx:n).font=vn.setFontStyle(r),t.firstCharWidth=n.measureText(e.charAt(0)).width+l):i===Us&&(t.firstCharWidth=Mt.measureTextSync(e.charAt(0),a,o,s)+l)),t.firstCharWidth}},{key:"textWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,n=i.ctx,i=i.renderMode,a=r[os],o=r[as],s=r[ss],l=r[cs],h=Vs(a,o,s,l),t=(t.hasOwnProperty(h)||(t[h]={}),t[h]);return t.hasOwnProperty("textWidth")||(i===Ws||i===Xs?((n=i===Xs?Mt.getFontCanvas().ctx:n).font=vn.setFontStyle(r),t.textWidth=n.measureText(e).width+l*e.length):i===Us&&(t.textWidth=Mt.measureTextSync(e,a,o,s)+l*e.length)),t.textWidth}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,n=this.computedStyle[gs];return[t-n,e-n,t+r+n,e+i+n]}},{key:"filterBbox",get:function(){var t,e;return this.__filterBbox||(t=this.bbox,e=this.computedStyle[Is],this.__filterBbox=vn.spreadFilter(t,e)),this.__filterBbox}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}(),js=(Ks.prototype.__renderByMask=Ks.prototype.render,k.TYPE_VD),$s=k.TYPE_GM,qs=k.TYPE_CP;function Zs(t){if(Array.isArray(t))return t.map(Zs);if(!t||-1===[js,$s,qs].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==js&&t.$$type!==$s)t&&t.$$type===qs?(r.push(t),i.lastText=null):At.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===js&&Zs(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var Js,Qs,tl,el,rl,Hr=T.NODE_KEY,il=Hr.NODE_DOM_PARENT,nl=Hr.NODE_STYLE,al=Hr.NODE_CURRENT_STYLE,ol=Hr.NODE_COMPUTED_STYLE,sl=Hr.NODE_MATRIX,ll=Hr.NODE_MATRIX_EVENT,hl=k.TYPE_VD,cl=k.TYPE_GM,ul=k.TYPE_CP;function _l(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return _l(t,e,r,i)});if(At.isObject(t)&&t.$$type){var n,a=t.tagName,o=t.props,s=t.children,c=t.klass,l=t.$$type,h=t.__inheritAnimate,u=t.__animateRecords;if(l===ul&&t.__placeholder)return t.__placeholder;if(l===hl){if("img"===a){if(n=new tl(a,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else n=new Qs(a,o);if("p"===a)i=!0;else if("div"===a&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?fl(n,_l(s,e,r,i)):[],n.__children=s}else if(l===cl)At.isString(a)?n=new(el.getRegister(a))(a,o):a&&(n=new a("$",o));else{if(l!==ul)return new Ks(t);(n=new c(o)).__tagName=a||n.__tagName}(t.vd=n).__json=t,u&&((n.__animateRecords=u).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),h&&(At.extendAnimate(h,n),delete t.__inheritAnimate),n.__root=e,n.__host=r,l===ul&&n.__init();s=o.ref;return At.isString(s)&&s||At.isNumber(s)?r.ref[s]=n:At.isFunction(s)&&s(n),n}return new Ks(t)}function fl(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){fl(e,t,i)}):(r instanceof Js||r instanceof rl||r instanceof Ks)&&(r.__parent=e,r.__domParent=e,r instanceof Ks&&[nl,al,ol,sl,ll].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[il]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof rl&&((t=r.shadowRoot)instanceof Ks&&(t.__parent=e,[nl,al,ol,sl,ll].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[il]=e))),r}var dl={ref:function(t){Js=t.Xom,Qs=t.Dom,tl=t.Img,el=t.Geom,rl=t.Component},initRoot:function(t,e){return t=Zs({tagName:e.tagName,props:{},children:t,$$type:hl}),e.__json=t,e.__host=e,t=_l(t.children,e,e),fl(e,t)},initDom:function(t,e,r,i){return fl(i,_l(t,e,r))},initCp:function(t,e,r){return At.isObject(t)?_l(t,e,r):new Ks(t)},initCp2:function(t,e,r,i){var n=new t.klass(t.props);return n.__tagName=t.tagName||n.__tagName,n.__root=e,n.__host=r,n.__json=t,n.__init(),fl(i,n)},relation:fl},pl=At.isFunction,yl=function(){function o(){_(this,o),this.__eHash={}}return f(o,[{key:"on",value:function(t,e){if(pl(e)){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else{this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,n){if(pl(n)){var a=this;if(o.__karasEventCb=n,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)a.once(i[t],n);else n&&a.on(i,o);return this}function o(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n.apply(a,e),a.off(i,o)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,a=this.__eHash[t],o=a.length;n<o;n++)if(a[n]===e||a[n].__karasEventCb===e){a.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var n=0,a=t.length;n<a;n++)this.emit(t[n],r);else if(this.__eHash.hasOwnProperty(t)){var o=this.__eHash[t];if(o.length)for(var s=0,h=(o=o.slice()).length;s<h;s++){var l=o[s];pl(l)&&l.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--)for(var e=t<0||arguments.length<=t?void 0:arguments[t],r=new o,i=(e.__eHash={},["on","once","off","emit"]),n=i.length-1;0<=n;n--){var a=i[n];e[a]=r[a]}}}]),o}(),gl=(a(yl,"REFRESH","refresh"),a(yl,"PAUSE","pause"),a(yl,"PLAY","play"),a(yl,"FRAME","frame"),a(yl,"FINISH","finish"),a(yl,"CANCEL","cancel"),a(yl,"BEGIN","begin"),a(yl,"END","end"),At.isNil),xl=At.isFunction,vl=At.clone,ml=At.extend,El={};var bl=function(){d(a,yl);var r=p(a);function a(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _(this,a),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=At.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return f(a,[{key:"setState",value:function(t,e){var r=this,i=this;if(gl(t))t={};else{if(xl(t))return;if(0===Object.keys(t).length)return void(xl(e)&&e.call(i));var n=vl(i.state);t=ml(n,t)}var a,o,n=i.root;n&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],a=[],o=i.__task={__before:function(){a=i.__taskList.splice(0),function t(e){e.__hasCpUpdate||(e.__hasCpUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){a.forEach(function(t){xl(t)&&t.call(i)})}},n.addRefreshCp(o)):xl(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this,e=(this.__ref={},this.root),t=t||Zs(this.render()),i=dl.initCp(t,e,this);if(this.__cd=t,!(i instanceof Ks))if(i instanceof w){var t=vn.normalize(this.props.style),n=Object.keys(t);ml(i.style,t,n),ml(i.currentStyle,t,n),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),i.listener[t]=e)})}else if(!(i instanceof a))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=i).__host=this;i instanceof a;)i.__hostRoot=this,i=(i.shadow.__host=i).shadow;((this.__shadowRoot=i).__hostRoot=this).__isMounted||(this.__isMounted=!0,xl(this.componentDidMount)&&e.once(yl.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){Mt.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,xl(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof Ks))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return El}},{key:"getRegister",value:function(t){if(!t||!At.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!El.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return El[t]}},{key:"register",value:function(t,e){if(!(t&&At.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof a))throw new Error("Invalid param: Component register");if(a.hasRegister(t))throw new Error("Component has already register: ".concat(t));El[t]=e}},{key:"hasRegister",value:function(t){return t&&El.hasOwnProperty(t)}},{key:"delRegister",value:function(t){a.hasRegister(t)&&delete El[t]}}]),a}(),fi=(Object.keys(Tr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseline","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(bl.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__computeReflow","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","frameAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){bl.prototype[e]=function(){var t=this.shadowRoot;if(t&&xl(t[e]))return t[e].apply(t,arguments)}}),T.STYLE_KEY),Tl=fi.MARGIN_TOP,Al=fi.MARGIN_LEFT,Ml=fi.MARGIN_RIGHT,Rl=fi.MARGIN_BOTTOM,Ol=fi.PADDING_TOP,Sl=fi.PADDING_LEFT,Cl=fi.PADDING_RIGHT,Il=fi.PADDING_BOTTOM,wl=fi.BORDER_TOP_WIDTH,kl=fi.BORDER_LEFT_WIDTH,Dl=fi.BORDER_RIGHT_WIDTH,Ll=fi.BORDER_BOTTOM_WIDTH;var Nl={getInlineBox:function(t,e,c,u,r,i,n,_,a,f,d,o,p,y,g,x,v,m,E,b){for(var s,T,l,A,M,R,O,S,C,I=0,w=0,k=e?x+b:p+v,D=e?y+m:g+E,h=("paddingBox"===o?(I=e?x:p,w=e?y:g):"borderBox"===o&&(I=k,w=D),n=e?i.verticalBaseline-n:i.baseline-n,e?(s=i.x+n-I+a,T=u.y,M=i.x+n-k+a):(s=u.x,T=i.y+n-I+a,R=i.y+n-k+a),(u instanceof Eo?u.parent:u).domParent);h!==t;)u===h.contentBoxList[0]&&(e?T-=(C=h.computedStyle)[Tl]+C[Ol]+C[wl]:s-=(C=h.computedStyle)[Al]+C[Sl]+C[kl]),h=h.domParent;for(e?(R=T,f&&(R-=p+v,"paddingBox"===o?T-=p:"borderBox"===o&&(T-=p+v)),l=i.x+n+_+w-a,O=i.x+n+_+D-a,A=r.y+r.outerHeight):(M=s,f&&(M-=x+b,"paddingBox"===o?s-=x:"borderBox"===o&&(s-=x+b)),l=r.x+r.outerWidth,A=i.y+n+_+w-a,S=i.y+n+_+D-a),h=(r instanceof Eo?r.parent:r).domParent;h!==t;){var L=h.contentBoxList;r===L[L.length-1]&&(e?A+=(L=h.computedStyle)[Rl]+L[Il]+L[Ll]:l+=(L=h.computedStyle)[Ml]+L[Cl]+L[Dl]),h=h.domParent}return e?(S=A,d&&(S+=g+E,"paddingBox"===o?A+=g:"borderBox"===o&&(A+=g+E))):(O=l,d&&(O+=y+m,"paddingBox"===o?l+=y:"borderBox"===o&&(l+=y+m))),s+=t.ox,l+=t.ox,M+=t.ox,O+=t.ox,[s,T+=t.oy,l,A+=t.oy,M,R+=t.oy,O,S+=t.oy]},getInlineWidth:function(t,e,r){var i=0,n=e.length;e[n-1]instanceof Lo&&n--;for(var a=0;a<n;a++)for(var o=e[a],s=(i+=r?o.height:o.width,(o instanceof Eo?o.parent:o).domParent);s!==t;){var l,h=s.contentBoxList;o===h[0]&&(i+=r?(l=s.computedStyle)[Tl]+l[Ol]+l[wl]:(l=s.computedStyle)[Al]+l[Sl]+l[kl]),o===h[h.length-1]&&(i+=r?(h=s.computedStyle)[Rl]+h[Il]+h[Ll]:(h=s.computedStyle)[Ml]+h[Cl]+h[Dl]),s=s.domParent}return i}},di=T.STYLE_KEY,Pl=di.SCALE_X,Fl=di.SCALE_Y,Bl=r.NUMBER;var Hl={matrixResize:function(t,e,r,i,n,a,o,s){if(t!==r||e!==i)return io.calMatrixWithOrigin([[Pl,[r/t,Bl]],[Fl,[i/e,Bl]]],[n,a],o,s)}},e=T.STYLE_KEY,Gl=e.BACKGROUND_POSITION_X,Yl=e.BACKGROUND_POSITION_Y,Wl=(e.FONT_SIZE,T.NODE_KEY.NODE_DEFS_CACHE),Ul=At.clone,Xl=At.joinArr,zl=ne.canvasPolygon,Vl=ne.svgPolygon;function Kl(t,e,r,i,n,a,o,h,c,u,s,_,f){var d,p,l,y,g=13<arguments.length&&void 0!==arguments[13]?arguments[13]:"fill",x=14<arguments.length&&void 0!==arguments[14]&&arguments[14],v=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,m=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(l=i[1],d=i[2],p=i[3],i=i[0]),n=(n=n||We.calRadius(a,o,h,c,u,s,_,f))||[[a,o],[a+h,o],[a+h,o+c],[a,o+c],[a,o]],l&&(l=io.calMatrixByOrigin(l,[d,p]),y=Ht.inverse(l),n=n.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r],t[r+1]],y);e.push(n[0]),e.push(n[1])}return e})),e===et.CANVAS||e===et.WEBGL)l&&(r.save(),u=t.matrixEvent,l=Ht.multiply(u,l),r.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),zl(r,n,v,m),r[g](),r.closePath(),l&&r.restore();else if(e===et.SVG){s=Vl(n);if(x)return t.__config[Wl].push(_={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",s],["fill",i]]}]}),r.add(_);t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",i]]}),l&&(f=t.virtualDom.bb)[f.length-1].props.push(["transform","matrix(".concat(Xl(Ht.m2m6(l),","),")")])}}var jl,$l={renderBgc:Kl,renderImage:function(c,u,_,f,d,p,y,g,x,v,m,E,t,b,T,A,M,R){var O=18<arguments.length&&void 0!==arguments[18]?arguments[18]:0,e=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0,S=f.source;if(S){var i=(y+=O)-(d+=O),n=(g+=e)-(p+=e),a=f.width,o=f.height,O=Bt(T[b]||[],2),s=O[0],l=O[1],r=(-1===s&&-1===l?(s=a,l=o):-2===s?i<a&&n<o?(l=o/n)<=(s=a/i)?l=(s=i)*o/a:s=(l=n)*a/o:i<a?l=(s=i)*o/a:n<o?s=(l=n)*a/o:(s=a,l=o):-3===s?a<i&&o<n?(s=a/i)<=(l=o/n)?l=(s=i)*o/a:s=(l=n)*a/o:a<i||!(o<n)&&(s=a/i)<=(l=o/n)?l=(s=i)*o/a:s=(l=n)*a/o:-1===s?s=l*a/o:-1===l&&(l=s*o/a),t[Gl][b]||0),h=(/%/.test(r)&&(r=(i-s)*parseFloat(r)*.01),r+=d,t[Yl][b]||0),C=(/%/.test(h)&&(h=(n-l)*parseFloat(h)*.01),h+=p,r<d||h<p||d+i<r+s||p+n<h+l),I=0,w=0,k=0,D=0,L=(-1<["repeatX","repeat"].indexOf(A[b])&&(0<(e=r-d)&&(I=Math.ceil(e/s)),0<(e=d+i-r-s)&&(w=Math.ceil(e/s))),-1<["repeatY","repeat"].indexOf(A[b])&&(0<(T=h-p)&&(k=Math.ceil(T/l)),0<(T=p+n-h-l)&&(D=Math.ceil(T/l))),[]);if(0<I)for(var N=0;N<I;N++){var P=r-(N+1)*s;L.push([P,h]),!C&&0===N&&P<d&&(C=!0)}if(0<w)for(var F=0;F<w;F++){var B=r+(F+1)*s;L.push([B,h]),!C&&F===w-1&&d+i<B+s&&(C=!0)}if(0<k)for(var H=0;H<k;H++){var G=h-(H+1)*l;L.push([r,G]),!C&&0===H&&G<p&&(C=!0)}if(0<D)for(var Y=0;Y<D;Y++){var W=h+(Y+1)*l;L.push([r,W]),!C&&Y===D-1&&p+n<W+s&&(C=!0)}if(0<I&&0<k)for(var U=0;U<I;U++)for(var X=0;X<k;X++)L.push([r-(U+1)*s,h-(X+1)*l]);if(0<w&&0<k)for(var z=0;z<w;z++)for(var V=0;V<k;V++)L.push([r+(z+1)*s,h-(V+1)*l]);if(0<I&&0<D)for(var K=0;K<I;K++)for(var j=0;j<D;j++)L.push([r-(K+1)*s,h+(j+1)*l]);if(0<w&&0<D)for(var $=0;$<w;$++)for(var q=0;q<D;q++)L.push([r+($+1)*s,h+(q+1)*l]);if(u===et.CANVAS||u===et.WEBGL)C&&(_.save(),Kl(this,u,_,"#FFF",null,d,p,i,n,x,v,m,E,"clip")),_.drawImage(S,r,h,s,l),L.forEach(function(t){_.drawImage(S,t[0],t[1],s,l)}),C&&_.restore();else if(u===et.SVG){var Z,J,O=Hl.matrixResize(a,o,s,l,r,h,i,n),Q=[["xlink:href",f.url],["x",r],["y",h],["width",a],["height",o]];if(O&&!Ht.isE(O)&&(Z=!0,Q.push(["transform","matrix("+Xl(Ht.m2m6(O),",")+")"])),C&&(t=[d,p],e=[y,g],Z&&(A=Ht.inverse(O),t=Ht.calPoint(t,A),e=Ht.calPoint(e,A)),b={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(t[0],",").concat(t[1],"L").concat(e[0],",").concat(t[1],"L").concat(e[0],",").concat(e[1],"L").concat(t[0],",").concat(e[1],"L").concat(t[0],",").concat(t[1])],["fill","#FFF"]]}]},T=_.add(b),M[Wl].push(b),Q.push(["clip-path","url(#"+T+")"])),R)return J={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:Q}]},c.__config[Wl].push(J),L.forEach(function(t){var e,r=Ul(Q);!Z||(e=Hl.matrixResize(a,o,s,l,t[0],t[1],i,n))&&!Ht.isE(e)&&(r[5][1]="matrix("+Xl(Ht.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],J.children.push({type:"img",tagName:"image",props:r})}),_.add(J);c.virtualDom.bb.push({type:"img",tagName:"image",props:Q}),L.forEach(function(t){var e,r=Ul(Q);!Z||(e=Hl.matrixResize(a,o,s,l,t[0],t[1],i,n))&&!Ht.isE(e)&&(r[5][1]="matrix("+Xl(Ht.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],c.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}}},ql=At.isFunction;function Zl(t,e,r,i){if(i)for(var n=0;n<e;n++){var a=t[n];a[1]?a[1](r):a.__after&&a.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s[0]?s[0](r):s.__before&&s.__before(r)}}var Jl=new(function(){function t(){_(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return f(t,[{key:"__init",value:function(){var c=this,u=c.task,_=c.taskCp,f=(Mt.cancelAnimationFrame(c.id),c.__now=Mt.now());!function h(){Mt.cancelAnimationFrame(c.id),c.id=Mt.requestAnimationFrame(function(){if(!jl&&(u.length||_.length)){var t=(e=c.__now=Mt.now())-f,t=Math.max(t,0);f=e;for(var e=u.slice(0),r=_.splice(0),i=e.length,n=r.length,a=(Zl(e,i,t,!1),Zl(r,n,t,!1),c.__hookTask.splice(0)),o=0,s=a.length;o<s;o++){var l=a[o];l&&l()}Zl(e,i,t,!0),Zl(r,n,t,!0),(u.length||_.length)&&h()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),ql(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var n=e[r];if(n===t||n.__karasFramecb===t){e.splice(r,1);break}}e.length||(Mt.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=ql(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){jl=!0}},{key:"resume",value:function(){jl&&(this.__init(),jl=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),Ql=4,th=1e-7,eh=10,rh="function"==typeof Float32Array;function ih(t,e){return 1-3*e+3*t}function nh(t,e,r){return((ih(e,r)*t+(3*r-6*e))*t+3*e)*t}function ah(t,e,r){return 3*ih(e,r)*t*t+2*(3*r-6*e)*t+3*e}function oh(t){return t}function sh(v,e,m,r){if(!(0<=v&&v<=1&&0<=m&&m<=1))throw new Error("bezier x values must be in [0, 1] range");if(v===e&&m===r)return oh;for(var E=new(rh?Float32Array:Array)(11),t=0;t<11;++t)E[t]=nh(.1*t,v,m);function i(t){for(var e=0,r=1;10!==r&&E[r]<=t;++r)e+=.1;var i=e+.1*((t-E[--r])/(E[r+1]-E[r])),n=ah(i,v,m);if(.001<=n){for(var c=t,a=i,o=v,s=m,u=0;u<Ql;++u){var _=ah(a,o,s);if(0===_)return a;a-=(nh(a,o,s)-c)/_}return a}if(0===n)return i;for(var f,l,d=t,h=e,p=e+.1,y=v,g=m,x=0;0<(f=nh(l=h+(p-h)/2,y,g)-d)?p=l:h=l,Math.abs(f)>th&&++x<eh;);return l}return function(t){return 0===t||1===t?t:nh(i(t),e,r)}}var lh={linear:sh(1,1,0,0),easeIn:sh(.42,0,1,1),easeOut:sh(0,0,.58,1),ease:sh(.25,.1,.25,1),easeInOut:sh(.42,0,.58,1),cubicBezier:sh,getEasing:function(t,e,r,i){return 4===arguments.length?sh(t,e,r,i):Array.isArray(t)&&4===t.length?sh(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?n=sh((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(n=this[t]),n):void 0;var n}},Br=(lh["ease-in"]=lh.easeIn,lh["ease-out"]=lh.easeOut,lh["ease-in-out"]=lh.easeInOut,T.STYLE_KEY),hh=Br.FILTER,ch=Br.TRANSFORM_ORIGIN,uh=Br.PERSPECTIVE_ORIGIN,_h=Br.BACKGROUND_CLIP,fh=Br.BACKGROUND_POSITION_X,dh=Br.BACKGROUND_POSITION_Y,ph=Br.BOX_SHADOW,yh=Br.TRANSLATE_X,gh=Br.TRANSLATE_Y,xh=Br.TRANSLATE_Z,vh=Br.BACKGROUND_SIZE,mh=Br.FONT_SIZE,Eh=Br.FLEX_BASIS,bh=Br.FLEX_DIRECTION,Th=Br.WIDTH,Ah=Br.HEIGHT,Mh=Br.TOP,Rh=Br.BOTTOM,Oh=Br.LINE_HEIGHT,Sh=Br.OPACITY,Ch=Br.Z_INDEX,Ih=Br.TRANSFORM,wh=Br.COLOR,kh=Br.FONT_WEIGHT,Dh=Br.FONT_STYLE,Lh=Br.FONT_FAMILY,Nh=Br.TEXT_ALIGN,Ph=Br.MATRIX,Fh=Br.ROTATE_3D,Bh=Br.TRANSLATE_PATH,Hh=Br.TEXT_STROKE_COLOR,Gh=Br.TEXT_STROKE_OVER,yi=T.UPDATE_KEY,Yh=yi.UPDATE_NODE,Wh=yi.UPDATE_STYLE,Uh=yi.UPDATE_KEYS,Xh=yi.UPDATE_CONFIG,Oi=T.KEY_FRAME_KEY,zh=Oi.FRAME_STYLE,Vh=Oi.FRAME_TIME,Kh=Oi.FRAME_EASING,jh=Oi.FRAME_TRANSITION,xi=T.ANIMATE_KEY,$h=xi.I_ASSIGNING,qh=xi.I_IN_FPS,Zh=xi.I_IS_DELAY,Jh=xi.I_BEGIN,Qh=xi.I_END,tc=xi.I_FINISHED,ec=xi.I_NEXT_END,rc=xi.I_FIRST_PLAY,ic=xi.I_PLAY_CB,nc=xi.I_TARGET,ac=xi.I_ROOT,oc=xi.I_FRAMES,sc=xi.I_FRAMES_R,lc=xi.I_CURRENT_TIME,hc=xi.I_NEXT_TIME,cc=xi.I_STYLE,uc=xi.I_DURATION,_c=xi.I_ITERATIONS,fc=xi.I_FILL,dc=xi.I_PLAYBACK_RATE,pc=xi.I_PLAY_COUNT,yc=xi.I_PLAY_STATE,gc=xi.I_DESTROYED,xc=xi.I_START_TIME,vc=xi.I_FPS_TIME,mc=xi.I_EASING,Ec=xi.I_ENTER_FRAME,bc=xi.I_DELAY,Tc=xi.I_END_DELAY,Ac=xi.I_KEYS,Mc=xi.I_ORIGIN_STYLE,Rc=xi.I_CURRENT_FRAMES,Oc=xi.I_CURRENT_FRAME,Sc=xi.I_SPF_LIMIT,Cc=xi.I_FPS,Ic=xi.I_DIRECTION,wc=xi.I_FIRST_ENTER,kc=xi.I_STAY_BEGIN,Dc=xi.I_STAY_END,Lc=xi.I_IS2,Nc=xi.I_END_TIME,Pc=xi.I_NODE_CONFIG,Fc=xi.I_ROOT_CONFIG,Bc=xi.I_OUT_BEGIN_DELAY,Hc=xi.I_TIME_STAMP,Gc=r.AUTO,Yc=r.PX,Wc=r.PERCENT,Uc=r.INHERIT,Xc=r.RGBA,zc=r.STRING,Vc=r.NUMBER,Kc=r.REM,jc=r.VW,$c=r.VH,qc=r.VMAX,Zc=r.VMIN,Jc=r.GRADIENT,Qc=r.calUnit,tu=At.isNil,eu=At.isFunction,ru=At.isNumber,iu=At.isObject,nu=At.clone,au=At.equalArr,ou=lh.linear,su=vn.cloneStyle,lu=Tr.isGeom,hu=Tr.GEOM,cu=A.COLOR_HASH,uu=A.LENGTH_HASH,_u=A.RADIUS_HASH,fu=A.GRADIENT_HASH,du=A.EXPAND_HASH,pu=A.GRADIENT_TYPE,yu={};function gu(t,e,r,i,n){var a={};a[Yh]=n,a[Wh]=t,a[Uh]=e,a[Xh]=r[Pc],i.__addUpdate(n,r[Pc],i,r[Fc],a),r[cc]=t,r[$h]=!0,i.__frameHook()}function xu(t,e,r,i){return t[1]===Yc?e[1]===Wc?.01*e[0]*r-t[0]:e[1]===Kc?e[0]*i.computedStyle[mh]-t[0]:e[1]===jc?e[0]*i.width*.01-t[0]:e[1]===$c?e[0]*i.height*.01-t[0]:e[1]===qc?e[0]*Math.max(i.width,i.height)*.01-t[0]:e[1]===Zc?e[0]*Math.min(i.width,i.height)*.01-t[0]:void 0:t[1]===Wc?e[1]===Yc?100*e[0]/r-t[0]:e[1]===Kc?e[0]*i.computedStyle[mh]*100/r-t[0]:e[1]===jc?e[0]*i.width/r-t[0]:e[1]===$c?e[0]*i.height/r-t[0]:e[1]===qc?e[0]*Math.max(i.width,i.height)/r-t[0]:e[1]===Zc?e[0]*Math.min(i.width,i.height)/r-t[0]:void 0:t[1]===Kc?e[1]===Yc?e[0]/i.computedStyle[mh]-t[0]:e[1]===Wc?.01*e[0]*r/i.computedStyle[mh]-t[0]:e[1]===jc?e[0]*i.width*.01/i.computedStyle[mh]-t[0]:e[1]===$c?e[0]*i.height*.01/i.computedStyle[mh]-t[0]:e[1]===qc?e[0]*Math.max(i.width,i.height)*.01/i.computedStyle[mh]-t[0]:e[1]===Zc?e[0]*Math.min(i.width,i.height)*.01/i.computedStyle[mh]-t[0]:void 0:t[1]===jc?e[1]===Yc?100*e[0]/i.width-t[0]:e[1]===Kc?100*e[0]*i.computedStyle[mh]/i.width-t[0]:e[1]===Wc?e[0]*r/i.width-t[0]:e[1]===$c?e[0]*i.height/i.width-t[0]:e[1]===qc?e[0]*Math.max(i.width,i.height)/i.width-t[0]:e[1]===Zc?e[0]*Math.min(i.width,i.height)/i.width-t[0]:void 0:t[1]===$c?e[1]===Yc?100*e[0]/i.height-t[0]:e[1]===Kc?100*e[0]*i.computedStyle[mh]/i.height-t[0]:e[1]===jc?e[0]*i.width/i.height-t[0]:e[1]===Wc?e[0]*r/i.height-t[0]:e[1]===qc?e[0]*Math.max(i.width,i.height)/i.height-t[0]:e[1]===Zc?e[0]*Math.min(i.width,i.height)/i.height-t[0]:void 0:t[1]===qc?e[1]===Yc?100*e[0]/Math.max(i.width,i.height)-t[0]:e[1]===Kc?100*e[0]*i.computedStyle[mh]/Math.max(i.width,i.height)-t[0]:e[1]===Wc?e[0]*r/Math.max(i.width,i.height)-t[0]:e[1]===jc?e[0]*i.width/Math.max(i.width,i.height)-t[0]:e[1]===$c?e[0]*i.height/Math.max(i.width,i.height)-t[0]:e[1]===Zc?e[0]*Math.min(i.width,i.height)/Math.max(i.width,i.height)-t[0]:void 0:t[1]===Zc?e[1]===Yc?100*e[0]/Math.min(i.width,i.height)-t[0]:e[1]===Kc?100*e[0]*i.computedStyle[mh]/Math.min(i.width,i.height)-t[0]:e[1]===Wc?e[0]*r/Math.min(i.width,i.height)-t[0]:e[1]===jc?e[0]*i.width/Math.min(i.width,i.height)-t[0]:e[1]===$c?e[0]*i.height/Math.min(i.width,i.height)-t[0]:e[1]===qc?e[0]*Math.max(i.width,i.height)/Math.min(i.width,i.height)-t[0]:void 0:void 0}function vu(t,e,r){if(t.k===e.k&&pu.hasOwnProperty(t.k)){for(var c=t.v,u=e.v,i=[[]],n=au(c,u),_=0,f=Math.min(c.length,u.length);_<f;_++){var a=c[_],o=u[_],d=[];d.push([o[0][0]-a[0][0],o[0][1]-a[0][1],o[0][2]-a[0][2],o[0][3]-a[0][3]]),a[1]&&o[1]&&(a[1][1]===o[1][1]?d.push(o[1][0]-a[1][0]):(a=xu(a[1],o[1],r.clientWidth,r.root),d.push(a||0))),i[0].push(d)}if("linear"===t.k){var s=Array.isArray(t.d);if(Array.isArray(e.d)!==s)return;if(s){s=[e.d[0]-t.d[0],e.d[1]-t.d[1],e.d[2]-t.d[2],e.d[3]-t.d[3]];if(n&&au(s,[0,0,0,0]))return;i[1]=s}else{s=e.d-t.d;if(n&&0==s)return;i[1]=s}}else if("radial"===t.k){s=Array.isArray(t.z);if(Array.isArray(e.z)!==s)return;if(i[2]=[],s){if(n&&au(t.z,e.z))return;for(var p=0;p<5;p++){var y=t.z[p],g=(void 0===y&&(y=1),e.z[p]);void 0===g&&(g=1),i[2].push(g-y)}}else{if(n&&t.z===e.z&&t.s===e.s&&au(t.p,e.p))return;for(var l=0;l<2;l++){var h=t.p[l],x=e.p[l];h[1]===x[1]?i[2].push(x[0]-h[0]):(h=xu(h,x,r[l?"clientWidth":"clientHeight"],r.root),i[2].push(h||0))}}}else if("conic"===t.k){if(n&&t.d===e.d&&au(t.p,e.p))return;i[1]=e.d-t.d,i[2]=[];for(var v=0;v<2;v++){var m=t.p[v],E=e.p[v];m[1]===E[1]?i[2].push(E[0]-m[0]):(m=xu(m,E,r[v?"clientWidth":"clientHeight"],r.root),i[2].push(m||0))}}return i}}function mu(e,r,t,i,n){return t.forEach(function(t){t=function(t,e,r,i,c){var n=[r],a=t[r],o=e[r];if(r===Ih){if(!a&&!o)return;t=a?a[0][1]:Ht.identity(),e=o?o[0][1]:Ht.identity();return au(t,e)?void 0:(n[1]=[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8],e[9]-t[9],e[10]-t[10],e[11]-t[11],e[12]-t[12],e[13]-t[13],e[14]-t[14],e[15]-t[15]],n)}if(r===Fh){if(au(a,o))return;n[1]=[o[0]-o[0],o[1]-a[1],o[2]-a[2],[o[3][0]-a[3][0],o[3][1]]]}else if(r===hh){for(var u=Math.max(a?a.length:0,o?o.length:0),_=[],f=0;f<u;f++){var s=a?a[f]:null,l=o?o[f]:null;if(tu(s)||tu(l)||s[0]!==l[0])_.push(null);else{var d,p=s[0];if("blur"===p)s[1][1]===l[1][1]?_.push(l[1][0]-s[1][0]):(d=xu(s[1],l[1],0,i.root),_.push(d));else if("hueRotate"===p||"saturate"===p||"brightness"===p||"contrast"===p||"sepia"===p||"invert"===p||"grayscale"===p)_.push(l[1][0]-s[1][0]);else if("dropShadow"===p){for(var y=[],g=0;g<4;g++){var x=s[1][g],v=l[1][g];x[1]===v[1]?y.push(v[0]-x[0]):y.push(xu(x,v,1===g?taraget.clientHeight:i.clientWidth,i.root))}y.push([l[1][4][0]-s[1][4][0],l[1][4][1]-s[1][4][1],l[1][4][2]-s[1][4][2],l[1][4][3]-s[1][4][3]]),_.push(y)}}}n[1]=_}else if(r===ch||r===uh){n[1]=[];for(var m=0;m<2;m++){var E=a[m],b=o[m];E[1]===b[1]?n[1].push(b[0]-E[0]):(E=xu(E,b,i[m?"outerHeight":"outerWidth"],i.root),n[1].push(E||0))}if(au(n[1],[0,0]))return}else if(r===fh||r===dh){n[1]=[];for(var T=Math.min(a.length,o.length),A=0;A<T;A++){var M=a[A],R=o[A];if(M&&R)if(M[1]===R[1]){var O=R[0]-M[0];if(!O)return void n[1].push(null);n[1].push(O)}else{O=r===fh?"offsetWidth":"offsetHeight",M=(-1<["padding-box","paddingBox"].indexOf(i.computedStyle[_h])?O=r===fh?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[_h])&&(O=r===fh?"width":"height"),xu(M,R,i[O],i.root));if(!M)return void n[1].push(null);n[1].push(M)}else n[1].push(null)}}else if(r===ph){n[1]=[];for(var S=0,C=Math.min(a.length,o.length);S<C;S++){for(var I=a[S],w=o[S],k=[],D=0;D<4;D++)k.push(w[D]-I[D]);for(var L=[],N=0;N<4;N++)L.push(w[4][N]-I[4][N]);k.push(L),n[1].push(k)}}else if(du.hasOwnProperty(r))if(a[1]===o[1]){e=o[0]-a[0];if(0==e)return;n[1]=e}else{t=xu(a,o,i[r===yh||r===xh?"outerWidth":"outerHeight"],i.root);if(!t)return;n[1]=t}else if(r===vh){n[1]=[];for(var P,F=Math.min(a.length,o.length),B=0;B<F;B++){var H=a[B],G=o[B];if(H&&G){for(var Y=[],W=0;W<2;W++){var U,X=H[W],z=G[W];X[1]===z[1]?Y.push(z[0]-X[0]):(U=B?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(i.computedStyle[_h])?U=B?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[_h])&&(U=B?"width":"height"),X=xu(X,z,i[U],i.root),Y.push(X||0))}au(Y,[0,0])?n[1].push(null):(n[1].push(Y),P=!0)}else n[1].push(null)}if(!P)return}else if(fu.hasOwnProperty(r)){n[1]=[];for(var V=Math.min(a.length,o.length),K=0;K<V;K++){var h=a[K],j=o[K];if(h&&j&&h[1]===j[1]){var $=h[1]===Jc,h=h[0],j=j[0],q=[];if($){$=vu(h,j,i);if(!$){n[1].push(null);continue}q=$}else au(j,h)&&n[1].push(null),q[0]=[j[0]-h[0],j[1]-h[1],j[2]-h[2],j[3]-h[3]];n[1].push(q)}else n[1].push(null)}}else if(cu.hasOwnProperty(r)){if(o[1]!==a[1])return;e=o[1]===Jc,o=o[0],a=a[0];if(e){t=vu(a,o,i);if(!t)return;n[1]=t}else{if(au(o,a)||0===o[3]&&0===a[3])return;n[1]=[o[0]-a[0],o[1]-a[1],o[2]-a[2],o[3]-a[3]]}}else if(_u.hasOwnProperty(r)){if(o[0][0]===a[0][0]&&o[0][1]===a[0][1]&&o[1][0]===a[1][0]&&o[1][1]===a[1][1])return;n[1]=[];for(var Z,J=0;J<2;J++)o[J][1]===a[J][1]?n[1].push(o[J][0]-a[J][0]):(Z=xu(a[J],o[J],i[J?"outerHeight":"outerWidth"],i.root),n[1].push(Z||0))}else if(uu.hasOwnProperty(r)){if(a[1]===Gc||o[1]===Gc)return;var e=i.computedStyle,t=(i.domParent||i).computedStyle,Q=0;if(a[1]===o[1]?Q=o[0]-a[0]:r===Oh?Q=xu(a,o,e[mh],i.root):r===mh?Q=xu(a,o,t[mh],i.root):r===Eh&&-1<["column","column-reverse","columnReverse"].indexOf(e[bh])||-1<[Ah,Mh,Rh].indexOf(r)?a[1]!==Gc&&o[1]!==Gc&&(Q=xu(a,o,t[Ah],i.root)):a[1]!==Gc&&o[1]!==Gc&&(Q=xu(a,o,t[Th],i.root)),0===Q||isNaN(Q))return;n[1]=Q}else if(hu.hasOwnProperty(r)){if(tu(a))return;if(hu[r][c]&&eu(hu[r][c].calDiff)){var tt=hu[r][c].calDiff;if(i.isMulti){for(var et=[],rt=0,it=Math.min(a.length,o.length);rt<it;rt++)et.push(tt(a[rt],o[rt]));return et}n[1]=tt(a,o)}else if(i.isMulti)if("points"===r||"controls"===r){if(tu(o)||!o.length||tu(a)||!a.length||au(a,o))return;n[1]=[];for(var nt=0,at=Math.min(a.length,o.length);nt<at;nt++){var ot=a[nt],st=o[nt];if(tu(ot)||!ot.length||tu(st)||!st.length)n[1].push(null);else{for(var lt=[],ht=0,ct=Math.min(ot.length,st.length);ht<ct;ht++){var ut=ot[ht],_t=st[ht];if(tu(ut)||tu(_t))lt.push(null);else{for(var ft=[],dt=0,pt=Math.max(ut.length,_t.length);dt<pt;dt++){var yt=ut[dt],gt=_t[dt];tu(yt)||tu(gt)?ft.push(0):ft.push(gt-yt)}lt.push(ft)}}n[1].push(lt)}}}else if("controlA"===r||"controlB"===r){if(tu(o)||!o.length||tu(a)||!a.length||au(a,o))return;n[1]=[];for(var xt=0,vt=Math.min(a.length,o.length);xt<vt;xt++){var mt=a[xt],Et=o[xt];tu(mt)||!mt.length||tu(Et)||!Et.length?n[1].push(null):n[1].push([Et[0]-mt[0],Et[1]-mt[1]])}}else{if(o===a||au(o,a)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var bt=[],Tt=0,At=Math.min(a.length,o.length);Tt<At;Tt++){var Mt=a[Tt],Rt=o[Tt];(tu(Mt)||tu(Rt))&&bt.push(0),bt.push(Rt-Mt)}n[1]=bt}else if("points"===r||"controls"===r){if(tu(o)||!o.length||tu(a)||!a.length||au(a,o))return;n[1]=[];for(var Ot=0,St=Math.min(a.length,o.length);Ot<St;Ot++){var Ct=a[Ot],It=o[Ot];if(tu(Ct)||!Ct.length||tu(It)||!It.length)n[1].push(null);else{for(var wt=[],kt=0,Dt=Math.max(Ct.length,It.length);kt<Dt;kt++){var Lt=Ct[kt],Nt=It[kt];tu(Lt)||tu(Nt)?wt.push(0):wt.push(Nt-Lt)}n[1].push(wt)}}}else if("controlA"===r||"controlB"===r){if(tu(o)||!o.length||tu(a)||!a.length||au(a,o))return;n[1]=[o[0]-a[0],o[1]-a[1]]}else{if(o===a||"edge"===r||"closure"===r||"booleanOperations"===r)return;n[1]=o-a}}else if(r===Sh||r===Ch){if(o===a)return;n[1]=o-a}else{if(r!==Bh||!a)return;var Pt="offsetWidth",Ft="offsetHeight";-1<["padding-box","paddingBox"].indexOf(i.computedStyle[_h])?(Pt="clientWidth",Ft="clientHeight"):-1<["content-box","contentBox"].indexOf(i.computedStyle[_h])&&(Pt="width",Ft="height"),n[1]=a.map(function(t,e){var t=Bt(t,2),r=t[0],t=t[1];return t===Wc?e%2==0?[.01*(parseFloat(r)||0)*i[Pt],Yc]:[.01*(parseFloat(r)||0)*i[Ft],Yc]:t===Kc?[(parseFloat(r)||0)*root.computedStyle[mh]*100,Yc]:t===jc?[.01*(parseFloat(r)||0)*root.width,Yc]:t===$c?[.01*(parseFloat(r)||0)*root.height,Yc]:t===qc?[.01*(parseFloat(r)||0)*Math.max(root.width,root.height),Yc]:t===Zc?[.01*(parseFloat(r)||0)*Math.min(root.width,root.height),Yc]:[parseFloat(r)||0,Yc]})}return n}(e[zh],r[zh],t,i,n);t&&e[jh].push(t)}),r}function Eu(t,e,L,N){for(var r,i,n,P=su(t[zh],e),F=(e=t[Kh],n=e?(n=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(n[1]),i=n[2],function(t){var e;return r&&0<r?(e=1/r,("start"===i?Math.ceil(t/e):Math.floor(t/e))/r):t}):lh.getEasing(e):n,n&&n!==ou&&(L=n(L)),t[jh]),a=0,o=F.length;a<o;a++)!function(t){var t=Bt(F[t],2),e=t[0],c=t[1],r=P[e];if(e===Ih)for(var r=r||(P[e]=[[Ph,Ht.identity()]]),h=0;h<16;h++)r[0][1][h]+=c[h]*L;else if(e===Bh){t=1-L;8===c.length?(P[yh]=[c[0][0]*t*t*t+3*c[2][0]*L*t*t+3*c[4][0]*L*L*t+c[6][0]*L*L*L,Yc],P[gh]=[c[1][0]*t*t*t+3*c[3][0]*L*t*t+3*c[5][0]*L*L*t+c[7][0]*L*L*L,Yc]):6===c.length&&(P[yh]=[c[0][0]*t*t+2*c[2][0]*L*t+c[4][0]*L*L,Yc],P[gh]=[c[1][0]*t*t+3*c[3][0]*L*t+c[5][0]*L*L,Yc])}else if(e===Fh)r[0]+=c[0]*L,r[1]+=c[1]*L,r[2]+=c[2]*L,r[3][0]+=c[3][0]*L;else if(yu.hasOwnProperty(e))c&&(r[0]+=c*L);else if(e===hh){r=r||(P[e]=[]);for(var u=0,_=c.length;u<_;u++){var i,n,f,a=c[u];a&&(n=r[u][0],i=r[u][1],"dropShadow"===n?(i[0][0]+=a[0]*L,i[1][0]+=a[1]*L,i[2][0]+=a[2]*L,i[3][0]+=a[3]*L,n=i[4],f=a[4],n[0]+=f[0]*L,n[1]+=f[1]*L,n[2]+=f[2]*L,n[3]+=f[3]*L):i[0]+=a*L)}}else if(_u.hasOwnProperty(e))for(var d=0;d<2;d++)r[d][0]+=c[d]*L;else if(e===ch||e===uh)0!==c[0]&&(r[0][0]+=c[0]*L),0!==c[1]&&(r[1][0]+=c[1]*L);else if(e===ph)for(var o=0,p=Math.min(r.length,c.length);o<p;o++){for(var y=0;y<4;y++)r[o][y]+=c[o][y]*L;for(var g=0;g<4;g++)r[o][4][g]+=c[o][4][g]*L}else if(e===vh)r.forEach(function(t,e){c[e]&&(t[0][0]+=c[e][0]*L,t[1][0]+=c[e][1]*L)});else if(e===fh||e===dh)r.forEach(function(t,e){c[e]&&(t[0]+=c[e]*L)});else if(fu.hasOwnProperty(e))r.forEach(function(t,e){e=c[e];if(e)if(t[1]===Jc&&pu.hasOwnProperty(t[0].k)){t=t[0];for(var r=Bt(e,4),i=r[0],n=r[1],a=r[2],r=r[3],o=0,s=Math.min(t.v.length,i.length);o<s;o++){var l=t.v[o],h=i[o];l[0][0]+=h[0][0]*L,l[0][1]+=h[0][1]*L,l[0][2]+=h[0][2]*L,l[0][3]+=h[0][3]*L,l[1]&&h[1]&&(l[1][0]+=h[1]*L)}"linear"===t.k&&void 0!==t.d&&void 0!==n&&(Array.isArray(n)?(t.d[0]+=n[0]*L,t.d[1]+=n[1]*L,t.d[2]+=n[2]*L,t.d[3]+=n[3]*L):t.d+=n*L),"radial"===t.k?void 0!==t.z&&void 0!==r?(t.z[0]+=r[0]*L,t.z[1]+=r[1]*L,t.z[2]+=r[2]*L,t.z[3]+=r[3]*L,t.z[4]+=r[4]*L):void 0!==t.p&&void 0!==a&&(t.p[0][0]+=a[0]*L,t.p[1][0]+=a[1]*L):"conic"===t.k&&void 0!==t.d&&void 0!==n&&(t.d+=n*L,t.p[0][0]+=a[0]*L,t.p[1][0]+=a[1]*L)}else{t=t[0];r=e[0];t[0]+=r[0]*L,t[1]+=r[1]*L,t[2]+=r[2]*L,t[3]+=r[3]*L}});else if(cu.hasOwnProperty(e))(r=r[0])[0]+=c[0]*L,r[1]+=c[1]*L,r[2]+=c[2]*L,r[3]+=c[3]*L;else if(hu.hasOwnProperty(e)){var s=P[e],t=N.tagName;if(hu[e][t]&&eu(hu[e][t].calIncrease)){var x=hu[e][t].calIncrease;N.isMulti?P[e]=s.map(function(t,e){return x(t,c[e],L)}):P[e]=x(s,c,L)}else if(N.isMulti)if("points"===e||"controls"===e)for(var v=0,m=Math.min(s.length,c.length);v<m;v++){var E=s[v],b=c[v];if(!tu(E)&&!tu(b))for(var T=0,A=Math.min(E.length,b.length);T<A;T++){var M=E[T],R=b[T];if(!tu(M)&&!tu(R))for(var l=0,O=Math.min(M.length,R.length);l<O;l++)tu(M[l])||tu(R[l])||(M[l]+=R[l]*L)}}else"controlA"===e||"controlB"===e?c.forEach(function(t,e){var r=s[e];if(!tu(t)&&!tu(r))for(var i=0,n=Math.min(r.length,t.length);i<n;i++){var a=r[i],o=t[i];tu(a)||tu(o)||(r[i]+=o*L)}}):c.forEach(function(t,e){tu(t)||tu(s[e])||(s[e]+=t*L)});else if("points"===e||"controls"===e)for(var S=0,C=Math.min(s.length,c.length);S<C;S++){var I=s[S],w=c[S];if(!tu(I)&&!tu(w))for(var k=0,D=Math.min(I.length,w.length);k<D;k++)tu(I[k])||tu(w[k])||(I[k]+=w[k]*L)}else"controlA"===e||"controlB"===e?(tu(s[0])||tu(c[0])||(s[0]+=c[0]*L),tu(s[1])||tu(c[1])||(s[1]+=c[1]*L)):tu(s)||tu(c)||(P[e]+=c*L)}else e!==Sh&&e!==Ch||(P[e]+=c*L,e===Sh&&(P[e]<0?P[e]=0:1<P[e]&&(P[e]=1)))}(a);return P}function bu(t,e){return eu(t)&&(e=t,t={}),[t||{},e]}function Tu(t,e,r,i){t.emit(yl.FRAME,r,i),e[rc]&&(e[rc]=!1,t.emit(yl.PLAY));var n=e[ic];eu(n)&&(n.call(t,r,i),e[ic]===n&&(e[ic]=null))}Object.assign(yu,uu),Object.assign(yu,du);var Au=0,Mu=function(){d(c,yl);var h=p(c);function c(t,n,e){_(this,c),(r=h.call(this)).__id=Au++,n=nu(n||[]),n=Array.isArray(n)?n.filter(function(t){return t&&iu(t)}):n&&iu(n)?(a=[],Object.keys(n).forEach(function(t){var e=n[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(a[r]=a[r]||{offset:r/(i-1)})[t]=e[r]}),a):[],ru(e)&&(r.__options={duration:e},e=r.__options);var r,a,e=r.__options=e||{duration:0},i=t.root,i=r.__config=[!1,!1,!1,!0,!1,!1,!1,!0,null,t,i,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,e.easing,!1,0,0,null,null,null,null,!1,60,"normal",!0,!1,!1,!1,0,t.__config,i&&i.__config,!1],o=r.iterations=e.iterations,s=r.duration=e.duration,o=Bt(r.__init(n,o,s,e.easing,t),4),s=o[0],t=o[1],l=o[2],o=o[3],l=(i[oc]=s,i[sc]=t,i[Ac]=l,i[Mc]=o,2===s.length&&(i[Lc]=!0,i[Nc]=s[1][Vh]),parseInt(e.fps)||0);return r.fps=l=l<=0?60:l,r.spfLimit=e.spfLimit,r.delay=e.delay,r.endDelay=e.endDelay,r.playbackRate=e.playbackRate,r.fill=e.fill,r.iterations=e.iterations,r.direction=e.direction,i[Rc]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(e.direction)?t:s,i[Hc]=Jl.__now,r[0]=r.__before,r[1]=r.__after,r}return f(c,[{key:"__init",value:function(i,c,u,_,t){if(i.length<1)return[[],[],[],{}];for(var f=t.tagName,n=0,a=i.length;n<a;n++)!function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),n=--t,a=--e;if(r.offset<=-1)return i.splice(t,1),n=--t,a=--e}Object.keys(r).forEach(function(t){cr.hasOwnProperty(t)&&cr.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||Tr.isValid(f,t)||delete r[t]}),n=t,a=e}(n,a);1===i.length?(i[0]=nu(i[0]),1===i[0].offset?i.unshift({offset:0}):((e=nu(i[0])).offset=1,i.push(e))):i.forEach(function(t,e){i[e]=nu(t)});var e=i[0],e=(e.hasOwnProperty("offset")&&0<e.offset?i.unshift(e={offset:0}):e.offset=0,i[i.length-1]);e.hasOwnProperty("offset")&&e.offset<1?i.push(e={offset:1}):e.offset=1;for(var r=1,d=i.length;r<d;r++)if(!(y=i[r]).hasOwnProperty("offset")){for(var p=void 0,o=r+1;o<d&&!(p=i[o]).hasOwnProperty("offset");o++);for(var y=i[r-1],g=(p.offset-y.offset)/(o-r+1),x=r;x<o;x++)i[x].offset=y.offset+g*(x+1-r);r=o}for(var v,s,l,m,E,b,h=[],T=(i.forEach(function(t){var e,r,i,n,a;h.push((e=u,r=_,i=(t=t).offset,n=(n=t).easing,delete t.offset,delete t.easing,a=t.translatePath,t=vn.normalize(t),Array.isArray(a)&&-1<[6,8].indexOf(a.length)&&(t[Bh]=a.map(function(t){t=Qc(t);return t[1]===Vc&&(t[1]=Yc),t})),(a=[])[zh]=t,a[Vh]=i*e,a[Kh]=n||r,a[jh]=[],a))}),v=t,s={},l=[],(e=h).forEach(function(t){var e=t[zh];Object.keys(e).forEach(function(t){void 0===e[t]||s.hasOwnProperty(t)||(s[t]=!0,(t=hu.hasOwnProperty(t)?t:parseInt(t))===Bh&&(s.hasOwnProperty(yh)||l.push(yh),s.hasOwnProperty(gh)||l.push(gh),s[yh]=s[gh]=!0),l.push(t))})}),e.forEach(function(t){var e=t[zh];l.forEach(function(t){e.hasOwnProperty(t)&&!tu(e[t])||(hu.hasOwnProperty(t)?e[t]=v.getProps(t):t===yh&&e.hasOwnProperty(Bh)?e[t]=e[Bh][0]:t===gh&&e.hasOwnProperty(Bh)?e[t]=e[Bh][1]:e[t]=v.currentStyle[t])})}),l),A=(m=T,b=(E=t).computedStyle,h.forEach(function(t){var n=t[zh];m.forEach(function(t){var e,r,i=n[t];tu(i)||(t===Ih?(r=E.outerWidth,e=E.outerHeight,r=io.calMatrix(i,r,e),n[t]=[[Ph,r]]):i[1]===Uc&&(t===wh||t===Hh?n[t]=[At.rgba2int(b[t]),Xc]:uu.hasOwnProperty(t)?n[t]=[b[t],Yc]:t===kh?n[t]=[b[t],Vc]:t!==Dh&&t!==Lh&&t!==Nh&&t!==Gh||(n[t]=[b[t],zc])))})}),nu(h).reverse()),M=t.style,R=t.props,O={},S=(T.forEach(function(t){lu(f,t)&&(O[t]=R[t]),O[t]=M[t]}),h.length),C=h[0],I=1;I<S;I++)C=mu(C,h[I],T,t,f);A.forEach(function(t){t[Vh]=u-t[Vh],t[jh]=[]}),C=A[0];for(var w=1;w<S;w++)C=mu(C,A[w],T,t,f);return[h,A,T,O]}},{key:"__clean",value:function(t){var e,r=this.__config,i=(this.__cancelTask(),r[hc]=0,r[cc]),n=r[Ac],a=r[nc];if(t){if(r[lc]=r[bc]+r[uc]*r[_c]+r[Tc],"finish"===r[yc])return;r[yc]="finish",r[Dc]||(r[cc]={},e=!0)}else{if(r[pc]=r[lc]=0,"idle"===r[yc])return;r[yc]="idle",r[cc]={},e=!0}e&&n.forEach(function(t){hu.hasOwnProperty(t)?a.__currentProps[t]===i[t]&&(a.__currentProps[t]=a.props[t]):a.__currentStyle[t]===i[t]&&(a.__currentStyle[t]=a.style[t])})}},{key:"play",value:function(t){var e=this.__config,r=e[gc],i=e[uc],n=e[yc],a=e[oc];return r||i<=0||a.length<1||"running"===n||(this.__cancelTask(),e[ic]=t,e[yc]="running",e[rc]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[Ec]||(e[Ec]=!0,r=e[sc],i=e[Ic],e[Rc]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i)?r:a,e[lc]=e[hc]=e[vc]=0),Jl.onFrame(this),e[xc]=Jl.__now,e[Qh]=!1),this}},{key:"__before",value:function(t){var e=this.__config,c=(e[Hc]=Jl.__now,e[nc]),u=e[Cc],r=0,i=e[Rc],_=e[_c],f=e[kc],d=e[Dc],p=e[bc],y=e[ac],g=e[Lc],x=e[Nc],v=e[uc],m=e[Tc],E=i.length;h=t,a=(o=e)[dc],n=o[Sc],s=o[Cc],b=o[lc]=o[hc],n&&(!0===n?h=Math.min(h,1e3/s):0<n&&(h=Math.min(h,n))),1!==a&&0<a&&(h*=a),o[hc]+=h;var n,a,o,b,s=Bt([b,h],2),l=s[0];if(t=s[1],!e[wc]&&u<60){if((t=e[vc]+=t)<1e3/u)return void(e[qh]=!0);e[vc]=0}if(e[wc]=!1,l<p)return f&&gu((e[Oc]=i[0])[zh],e[Ac],e,y,c),e[Jh]=!1,e[Bc]=!0,void(e[Zh]=!0);for(l-=p,e[Bc]&&(e[Bc]=!1,e[Jh]=!0);v<=l&&r<_-1;)l-=v,r++;e[pc]<r&&(R=e[Jh]=!0),e[pc]=r,R&&(n=e[Ic],a=e[oc],o=e[sc],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(n)&&(b=r%2==0,i=e[Rc]="alternate"===n?b?a:o:b?o:a));var T,h=_-1<=r,s=g?(T=l<x?0:1,x):i[T=function t(e,r,i,n){var a,o;return e===r?n[e][Vh]>i?e-1:e:(o=n[a=e+(r-e>>1)])[Vh]===i?a:o[Vh]>i?t(e,Math.max(a-1,e),i,n):t(Math.min(a+1,r),r,i,n)}(0,E-1,l,i)][Vh],t=h&&T===E-1,u=0;t||(u=g?l/v:(l-s)/(i[T+1][Vh]-s));var A,M,R,f=i[T];e[Oc]=f,t?(p=l<v+m,A=su(d?f[zh]:e[Mc],e[Ac]),e[ec]=!0,p||(e[pc]++,e[tc]=!0,Jl.offFrame(this),M=!0,e[hc]=0)):A=Eu(f,e[Ac],u,c),gu(A,e[Ac],e,y,c),M&&(R=e[ic],this.__clean(!0),R&&(e[ic]=R))}},{key:"__after",value:function(t){var e=this.__config;e[$h]=!1,e[qh]?e[qh]=!1:(Tu(this,e,t,e[Zh]),e[Zh]=!1,e[Jh]&&(e[Jh]=!1,this.emit(yl.BEGIN,e[pc])),e[ec]&&!e[Qh]&&(e[Qh]=!0,this.emit(yl.END,e[pc]-1)),e[tc]&&(e[Jh]=e[Qh]=e[Zh]=e[tc]=e[qh]=e[Ec]=!1,e[yc]="finished",this.emit(yl.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[gc],i=e[uc],n=this.pending;return r||i<=0||n||(e[yc]="paused",this.__cancelTask(),t||this.emit(yl.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[gc],i=e[uc],e=e[yc];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[gc],n=i[uc],a=i[yc],o=i[oc];if(t||n<=0||o.length<1||"finished"===a||"idle"===a)return r;r.__cancelTask();var s,l=i[ac],t=i[Mc];return l&&(s=i[Dc]?(i[Oc]=o[o.length-1],o[o.length-1][zh]):t,l.addRefreshTask({__before:function(){i[$h]=!0,gu(s,i[Ac],i,l,i[nc]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[$h]=!1,Tu(r,i,t),i[Jh]=i[Qh]=i[Zh]=i[tc]=i[qh]=i[Ec]=!1,r.emit(yl.FINISH)),eu(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[gc],n=i[uc],a=i[yc],o=i[oc];if(t||n<=0||"idle"===a||o.length<1)return r;r.__cancelTask();var s=i[ac],l=i[Mc];return s&&s.addRefreshTask({__before:function(){i[$h]=!0,gu(l,i[Ac],i,s,i[nc]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[$h]=!1,Tu(r,i,t),i[Jh]=i[Qh]=i[Zh]=i[tc]=i[qh]=i[Ec]=!1,r.emit(yl.CANCEL)),eu(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,n=i[gc],a=i[uc],o=i[oc],s=i[bc],i=i[Tc];if(n||a<=0||o.length<1)return this;n=Bt(bu(e,r),2);return e=n[0],r=n[1],this.__goto(t,e.isFrame,e.excludeDelay),a+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,n=this.__config,a=n[gc],o=n[uc],s=n[oc],l=n[bc],h=n[Tc];if(a||o<=0||s.length<1)return this;a=Bt(bu(e,r),2);return e=a[0],r=a[1],o+l+h<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){n[yc]="paused",i.__cancelTask(),eu(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[cc],i=t[nc];t[Ac].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],hu.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,n=i[_c],a=i[uc];if(i[yc]="paused",isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=i[bc]),i[hc]=t,t-=i[bc];for(var o=0;a<=t&&o<n-1;)o++,t-=a;i[pc]=o,i[Ec]=!0;var s,e=i[oc],r=i[sc],l=i[Ic];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(l)&&(s=o%2==0,i[Rc]="alternate"===l?s?e:r:s?r:e),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[nc]=t,this.__config[Pc]=t.__config}},{key:"__cancelTask",value:function(){Jl.offFrame(this),this.__config[ic]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[gc]||(e.removeControl(),t?(e.__clean(),r[nc]=null):Jl.nextFrame({__before:function(){e.__clean(),r[nc]=null}}),r[xc]=0,r[gc]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[yc]&&"finished"!==t[yc]&&Mt.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[nc]}},{key:"root",get:function(){return this.__config[ac]}},{key:"keys",get:function(){return this.__config[Ac]}},{key:"style",get:function(){return this.__config[cc]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[uc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[uc]!==t&&(e[uc]=t,e[Nc]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[bc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[bc]!==t&&(e[bc]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[Tc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Tc]!==t&&(e[Tc]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[Cc]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[Cc]!==t&&(e[Cc]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[_c]},set:function(t){t===1/0||At.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[_c]!==t&&(e[_c]=t),t}},{key:"fill",get:function(){return this.__config[fc]},set:function(t){var e=this.__config;return e[fc]!==(t=t||"none")&&(e[fc]=t,this.__checkModify()),e[kc]={backwards:!0,both:!0}.hasOwnProperty(t),e[Dc]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[Ic]},set:function(t){var e=this.__config;return e[Ic]!==(t=t||"normal")&&(e[Ic]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[oc]}},{key:"framesR",get:function(){return this.__config[sc]}},{key:"playbackRate",get:function(){return this.__config[dc]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[dc]!==(t=t<=0?1:t)&&(e[dc]=t),t}},{key:"easing",get:function(){return this.__config[mc]}},{key:"startTime",get:function(){return this.__config[xc]}},{key:"currentTime",get:function(){return this.__config[lc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[lc]!==t&&(e[lc]=t,e[hc]=t),t}},{key:"nextTime",get:function(){return this.__config[hc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[hc]!==t&&(e[hc]=t),t}},{key:"timestamp",get:function(){return this.__config[Hc]}},{key:"pending",get:function(){return"running"!==this.__config[yc]}},{key:"finished",get:function(){return"finished"===this.__config[yc]}},{key:"playState",get:function(){return this.__config[yc]}},{key:"playCount",get:function(){return this.__config[pc]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[pc]!==t&&(e[pc]=t),t}},{key:"isDestroyed",get:function(){return this.__config[gc]}},{key:"animating",get:function(){var t=this.__config,e=t[yc];return"idle"!==e&&("finished"!==e||t[Dc]||t[kc])}},{key:"spfLimit",get:function(){return this.__config[Sc]},set:function(t){t=At.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[Sc]!==t&&(e[Sc]=t),t}},{key:"assigning",get:function(){return this.__config[$h]}}]),c}(),Ru=T.NODE_KEY.NODE_DEFS_CACHE,Ou=At.int2rgba,Su=ne.canvasPolygon,Cu=ne.svgPolygon;var Iu={renderBoxShadow:function(c,u,t,_,e,r,f,i,d,p){var y,g,x;e+=n=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,r+=v=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,f+=n,i+=v;var v=(n=Bt(_,6))[0],_=n[1],m=n[2],E=n[3],b=n[4],n=n[5],T=Ou(b),a=2*Math.abs(m)+2*Math.abs(E)+2*Math.abs(v)+2*Math.abs(_),o=[[e,r],[f,r],[f,i],[e,i],[e,r]],A=[[e-a,r-a],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a]];if(0<b[3])if(u===et.CANVAS||u===et.WEBGL){if(t.save(),t.beginPath(),"inset"===n){var b=e+v+E,M=r+_+E,s=f+v-E,l=i+_-E,h=[[b,M],[s,M],[s,l],[b,l]],h=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[h[0][0],h[0][1],h[2][0],h[2][1]]);if(!h)return;h=[[h[0],h[1]],[h[2],h[1]],[h[2],h[3]],[h[0],h[3]],[h[0],h[1]]],E?(Su(t,h),Su(t,o.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==T&&(t.fillStyle=T),Su(t,o),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),Su(t,h),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=T,t.shadowBlur=m,Su(t,[[b,M],[s,M],[s,l],[e-a,l],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,l],[b,l],[b,M]])):(Su(t,o),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=v,t.shadowOffsetY=_,t.shadowColor=T,t.shadowBlur=m,Su(t,[[e,r],[f,r],[f,i],[e-a,i],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,i],[e,i],[e,r]]))}else{var h=e+v-E,s=r+_-E,l=f+v+E,b=i+_+E,M=[[h,s],[l,s],[l,b],[h,b]],s=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[M[0][0],M[0][1],M[2][0],M[2][1]]);E?(Su(t,o),Su(t,M.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==T&&(t.fillStyle=T),Su(t,M),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),s&&Su(t,[[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()),Su(t,o),Su(t,M),Su(t,A),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=T,t.shadowBlur=m,Su(t,M)):(Su(t,o),Su(t,A),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=v,t.shadowOffsetY=_,t.shadowColor=T,t.shadowBlur=m,Su(t,o))}t.fill(),t.closePath(),t.restore()}else u===et.SVG&&(l=Rr.outerSize(m),"inset"===n?(n=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[(u=[[h=e+v+E,b=r+_+E],[s=f+v-E,b],[s,M=i+_-E],[h,M]])[0][0],u[0][1],u[2][0],u[2][1]]))&&(n=[[n[0],n[1]],[n[2],n[1]],[n[2],n[3]],[n[0],n[3]],[n[0],n[1]]],E?(c.__config[Ru].push(u={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*m],["flood-color",T]]}]}),y=t.add(u),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",Cu(n)+Cu(o.slice(0).reverse())],["fill","#FFF"]]}]},g=t.add(x),c.__config[Ru].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Cu(o)],["fill",T],["clip-path","url(#"+g+")"]]}),u={tagName:"clipPath",children:[{tagName:"path",props:[["d",Cu(n)],["fill","#FFF"]]}]},g=t.add(u),c.__config[Ru].push(u),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Cu([[h,b],[s,b],[s,M],[e-a,M],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,M],[h,M],[h,b]])],["fill","#FFF"],["filter","url(#"+y+")"],["clip-path","url(#"+g+")"]]})):(n=t.add(x={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",v],["dy",_],["stdDeviation",.5*m],["flood-color",T]]}]}),c.__config[Ru].push(x),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",Cu(o)],["fill","#FFF"]]}]},u=t.add(x),c.__config[Ru].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Cu([[e,r],[f,r],[f,i],[e-a,i],[e-a,i+a],[f+a,i+a],[f+a,r-a],[e-a,r-a],[e-a,i],[e,i],[e,r]])],["fill","#FFF"],["filter","url(#"+n+")"],["clip-path","url(#"+u+")"]]}))):(g=te.getRectsIntersection([o[0][0],o[0][1],o[2][0],o[2][1]],[(y=[[s=e+v-E,M=r+_-E],[h=f+v+E,M],[h,b=i+_+E],[s,b]])[0][0],y[0][1],y[2][0],y[2][1]]),E?(a=t.add(x={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*m],["flood-color",T]]}]}),c.__config[Ru].push(x),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",Cu(o)+Cu(y.slice(0).reverse())],["fill","#FFF"]]}]},n=t.add(x),c.__config[Ru].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Cu(y)],["fill",T],["clip-path","url(#"+n+")"]]}),x={tagName:"clipPath",children:[{tagName:"path",props:[["d",(g?Cu([[g[0],g[1]],[g[2],g[1]],[g[2],g[3]],[g[0],g[3]],[g[0],g[1]]].reverse()):"")+Cu(o)+Cu(y)+Cu(A)],["fill","#FFF"]]}]},n=t.add(x),c.__config[Ru].push(x),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Cu(y)],["fill","#FFF"],["filter","url(#"+a+")"],["clip-path","url(#"+n+")"]]})):(e=t.add(u={tagName:"filter",props:[["x",-l/d],["y",-l/p],["width",1+2*l/d],["height",1+2*l/p]],children:[{tagName:"feDropShadow",props:[["dx",v],["dy",_],["stdDeviation",.5*m],["flood-color",T]]}]}),c.__config[Ru].push(u),u={tagName:"clipPath",children:[{tagName:"path",props:[["d",Cu(o)+Cu(A)],["fill","#FFF"]]}]},r=t.add(u),c.__config[Ru].push(u),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Cu(o)],["fill","#FFF"],["filter","url(#"+e+")"],["clip-path","url(#"+r+")"]]}))))}},wu={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,colorDodge:!0,colorBurn:!0,hardLight:!0,softLight:!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};var mi=function(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})},vi=function(t){return wu.hasOwnProperty(t)},ku=ne.svgPolygon,Du=et.CANVAS,Lu=et.SVG,Nu=et.WEBGL,Pu=zo.LOCAL,Fu=T.STYLE_KEY,Bu=T.STYLE_RV_KEY,Hu=T.style2Upper,n=T.STYLE_KEY,Gu=n.BORDER_TOP_LEFT_RADIUS,Yu=n.BORDER_TOP_RIGHT_RADIUS,Wu=n.BORDER_BOTTOM_LEFT_RADIUS,Uu=n.BORDER_BOTTOM_RIGHT_RADIUS,Xu=n.PADDING_LEFT,zu=n.PADDING_RIGHT,Vu=n.PADDING_TOP,Ku=n.PADDING_BOTTOM,ju=n.MARGIN_LEFT,$u=n.MARGIN_TOP,qu=n.MARGIN_BOTTOM,Zu=n.MARGIN_RIGHT,Ju=n.BORDER_LEFT_WIDTH,Qu=n.BORDER_TOP_WIDTH,t_=n.BORDER_BOTTOM_WIDTH,e_=n.BORDER_RIGHT_WIDTH,r_=n.TOP,i_=n.RIGHT,n_=n.BOTTOM,a_=n.LEFT,o_=n.POSITION,s_=n.DISPLAY,l_=n.WIDTH,h_=n.HEIGHT,c_=n.MATRIX,u_=n.TRANSLATE_X,__=n.TRANSLATE_Y,f_=n.TRANSLATE_Z,d_=n.TRANSFORM,p_=n.SCALE_X,y_=n.SCALE_Y,g_=n.SCALE_Z,x_=n.ROTATE_X,v_=n.ROTATE_Y,m_=n.ROTATE_Z,E_=n.SKEW_X,b_=n.SKEW_Y,T_=n.PERSPECTIVE,A_=n.PERSPECTIVE_ORIGIN,M_=n.ROTATE_3D,R_=n.TRANSFORM_ORIGIN,O_=n.BACKGROUND_POSITION_X,S_=n.BACKGROUND_POSITION_Y,C_=n.BACKGROUND_SIZE,I_=n.BACKGROUND_COLOR,w_=n.BACKGROUND_IMAGE,k_=n.BACKGROUND_REPEAT,D_=n.BOX_SHADOW,L_=n.OPACITY,N_=n.Z_INDEX,P_=n.BORDER_TOP_STYLE,F_=n.BORDER_RIGHT_STYLE,B_=n.BORDER_BOTTOM_STYLE,H_=n.BORDER_LEFT_STYLE,G_=n.FILTER,Y_=n.OVERFLOW,W_=n.MIX_BLEND_MODE,U_=n.TEXT_OVERFLOW,X_=n.BORDER_TOP_COLOR,z_=n.BORDER_BOTTOM_COLOR,V_=n.BORDER_LEFT_COLOR,K_=n.BORDER_RIGHT_COLOR,j_=n.FONT_STYLE,$_=n.COLOR,q_=n.VISIBILITY,Z_=n.POINTER_EVENTS,J_=n.BORDER_TOP,Q_=n.BORDER_RIGHT,tf=n.BORDER_BOTTOM,ef=n.BORDER_LEFT,rf=n.BACKGROUND_CLIP,nf=n.FONT_SIZE,af=n.FONT_FAMILY,of=n.LINE_HEIGHT,sf=n.TEXT_STROKE_COLOR,lf=n.TEXT_STROKE_WIDTH,hf=n.TEXT_STROKE_OVER,cf=n.FONT_WEIGHT,uf=n.FLEX_DIRECTION,_f=n.JUSTIFY_CONTENT,ff=n.ALIGN_ITEMS,df=n.ALIGN_SELF,pf=n.FLEX_GROW,yf=n.FLEX_SHRINK,gf=n.LINE_CLAMP,xf=n.ORDER,vf=n.FLEX_WRAP,mf=n.ALIGN_CONTENT,Ef=n.TEXT_ALIGN,bf=n.LETTER_SPACING,Tf=n.WHITE_SPACE,Af=n.WRITING_MODE,Ti=T.UPDATE_KEY,Mf=Ti.UPDATE_NODE,Rf=Ti.UPDATE_FOCUS,Of=Ti.UPDATE_STYLE,Sf=Ti.UPDATE_OVERWRITE,Cf=Ti.UPDATE_KEYS,If=Ti.UPDATE_CONFIG,wf=Ti.UPDATE_REMOVE_DOM,kf=T.STRUCT_KEY.STRUCT_HAS_MASK,t=T.NODE_KEY,Df=t.NODE_TAG_NAME,Lf=t.NODE_CACHE_STYLE,Nf=t.NODE_CURRENT_STYLE,Pf=t.NODE_COMPUTED_STYLE,Ff=t.NODE_STYLE,Bf=t.NODE_STRUCT,Hf=t.NODE_OPACITY,Gf=t.NODE_MATRIX_EVENT,Yf=t.NODE_MATRIX,Wf=t.NODE_LIMIT_CACHE,Uf=t.NODE_HAS_CONTENT,Xf=t.NODE_REFRESH_LV,zf=t.NODE_CACHE,Vf=t.NODE_CACHE_TOTAL,Kf=t.NODE_CACHE_FILTER,jf=t.NODE_CACHE_MASK,$f=t.NODE_CACHE_OVERFLOW,qf=t.NODE_IS_DESTROYED,Zf=t.NODE_DEFS_CACHE,Jf=t.NODE_DOM_PARENT,Qf=t.NODE_IS_INLINE,t0=t.NODE_PERSPECTIVE_MATRIX,e0=t.NODE_IS_MASK,r0=t.NODE_VIRTUAL_DOM,i0=t.NODE_CACHE_AS_BITMAP,n0=r.AUTO,a0=r.PX,o0=r.PERCENT,s0=r.INHERIT,l0=r.NUMBER,h0=r.RGBA,c0=r.STRING,u0=r.REM,_0=r.VW,f0=r.VH,d0=r.VMAX,p0=r.VMIN,y0=r.DEG,g0=r.GRADIENT,x0=At.int2rgba,v0=At.rgba2int,m0=At.joinArr,E0=At.isNil,b0=At.isFunction,T0=vn.calRelative,A0=vn.calNormalLineHeight,M0=vn.calFontFamily,R0=vn.spreadBoxShadow,O0=vn.spreadFilter,S0=Tr.GEOM,C0=mi,I0=vi,w0=Ht.point2d,k0=es.contain,D0=es.NONE,L0=es.TRANSFORM,N0=es.REFLOW,P0=es.REPAINT,F0=es.TRANSLATE_X,B0=es.TRANSLATE_Y,H0=es.TRANSLATE_Z;function G0(t){for(var e=0,r=t.flowChildren,i=r.length,n=0;n<i;n++){var a=r[n];if(!(a instanceof Y0||a instanceof bl&&a.shadowRoot instanceof Y0))break;if(a.flowChildren&&a.flowChildren.length){e+=G0(a);break}a.__config[Qf]&&(e+=a.outerWidth)}return e}var Y0=function(){d(a,w);var n=p(a);function a(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=(_(this,a),r=n.call(this),Array.isArray(e)?r.props=At.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[],r.__isClip=!!r.props.clip),e=r.__isMask=e||!!r.props.mask,i=r.__config;return i[Df]=t,i[Lf]=r.__cacheStyle,i[Nf]=r.__currentStyle,i[Pf]=r.__computedStyle,i[Xf]=N0,i[Ff]=r.__style,i[Yf]=[],i[Gf]=[],i[Zf]=r.__cacheDefs,i[e0]=e,r.__frameAnimateList=[],r.__contentBoxList=[],i[i0]=r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r.__layoutData=null,r.__hasComputeReflow=!1,r.__parentLineBox=null,r.__fontRegister={},r}return f(a,[{key:"__structure",value:function(t,e,r){t=P(N(a.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(t[kf]=this.__hasMask),this.__config[Bf]=t}},{key:"__mp",value:function(r,i,n){var a=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=Fu[Hu("margin"+t)],t=Fu[Hu("padding"+t)];i[e]=a.__calSize(r[e],n,!0),i[t]=a.__calSize(r[t],n,!0)})}},{key:"__calSize",value:function(t,e,r){return t[1]===a0?t[0]:t[1]===o0&&r?t[0]*e*.01:t[1]===u0?t[0]*this.root.computedStyle[nf]:t[1]===_0?t[0]*this.root.width*.01:t[1]===f0?t[0]*this.root.height*.01:t[1]===d0?t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===p0?t[0]*Math.min(this.root.width,this.root.height)*.01:0}},{key:"__computeReflow",value:function(){var o=this;if(!this.__hasComputeReflow){this.__hasComputeReflow=!0;var s=this.currentStyle,l=this.computedStyle,t=this.domParent,h=!t,c=t&&t.computedStyle,e=([nf,af,cf,Af].forEach(function(t){var e=s[t];if(t===af)if(e[1]===s0)l[t]=h?Pt.INHERIT[Bu[t]]:c[t];else{l[t]=e[0];for(var r=e[0].split(/\s*,\s*/),i=0,n=r.length;i<n;i++){var a=r[i].replace(/^['"]/,"").replace(/['"]$/,"");if(St.hasRegister(a)&&(St.hasLoaded(a)||Mt.checkSupportFontFamily(a)))break;o.__fontRegister[a]=!0,St.onRegister(a,o)}}else e[1]===s0?l[t]=h?Pt.INHERIT[Bu[t]]:c[t]:e[1]===o0?l[t]=h?Pt.INHERIT[Bu[t]]:c[t]*e[0]*.01:e[1]===u0?l[t]=h?Pt.INHERIT[Bu[t]]:o.root.computedStyle[nf]*e[0]:e[1]===_0?l[t]=h?Pt.INHERIT[Bu[t]]:.01*o.root.width*e[0]:e[1]===f0?l[t]=h?Pt.INHERIT[Bu[t]]:.01*o.root.height*e[0]:e[1]===d0?l[t]=h?Pt.INHERIT[Bu[t]]:.01*Math.max(o.root.width,o.root.height)*e[0]:e[1]===p0?l[t]=h?Pt.INHERIT[Bu[t]]:.01*Math.min(o.root.width,o.root.height)*e[0]:l[t]=e[0]}),[Qu,e_,t_,Ju].forEach(function(t){var e=s[t];l[t]=o.__calSize(e,0,!1)}),[o_,s_,uf,_f,ff,df,pf,yf,gf,xf,vf,mf,Y_,U_].forEach(function(t){l[t]=s[t]}),c&&l[Af]!==c[Af]&&"inline"===l[s_]&&(l[s_]="inlineBlock"),("absolute"===l[o_]||c&&"flex"===c[s_])&&-1===["block","flex"].indexOf(l[s_])&&(l[s_]="block"),s[Ef]),e=(e[1]===s0?l[Ef]=h?"left":c[Ef]:l[Ef]=e[0],l[nf]),r=s[of];if(r[1]===s0)if(h)l[of]=A0(l);else{for(var i,n=t;n&&(i=n.currentStyle[of])[1]===s0;)n=n.domParent;-1<[n0,s0].indexOf(i[1])?l[of]=A0(l):i[1]===l0?l[of]=Math.max(i[0],0)*e:l[of]=c[of]}else r[1]===l0?l[of]=Math.max(r[0],0)*e||A0(l):(t=Math.max(this.__calSize(r,e,!0),0),l[of]=t||A0(l));r=s[bf],t=(r[1]===s0?l[bf]=h?0:c[bf]:l[bf]=this.__calSize(r,e,!0),s[Tf]);t[1]===s0?l[Tf]=h?"normal":c[Tf]:l[Tf]=t[0]}}},{key:"__emitFontRegister",value:function(t){var e=this,r=e.__fontRegister;if(!e.isDestroyed){delete r[t];var i=e.root,r=e.currentStyle,n=e.__config;if(i){r=r[af];if(r[1]!==s0)for(var a=r[0].split(/\s*,\s*/),o=0,s=a.length;o<s;o++){var l=a[o].replace(/^['"]/,"").replace(/['"]$/,"");if(l===t)return void(St.hasRegister(l)&&i.addRefreshTask({__before:function(){var t;n[qf]||((t={})[Mf]=e,t[Rf]=es.REFLOW,t[If]=n,i.__addUpdate(e,n,i,i.__config,t))}}));if(St.hasRegister(l)&&(St.hasLoaded(l)||Mt.checkSupportFontFamily(l)))return}}}}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;E0(t)||(this.__width=r[l_]=t,this.__clientWidth=t+=r[Xu]+r[zu],this.__offsetWidth=t+=r[Ju]+r[e_],this.__outerWidth=t+r[ju]+r[Zu]),E0(e)||(this.__height=r[h_]=e,this.__clientHeight=e+=r[Vu]+r[Ku],this.__offsetHeight=e+=r[Qu]+r[t_],this.__outerHeight=e+r[$u]+r[qu])}},{key:"__addMBP",value:function(t,e,r,i,n,a){var o,s=r[ju],l=r[$u],h=r[Zu],c=r[qu],u=r[Xu],_=r[Vu],f=r[zu],r=r[Ku],d=i[Qu],p=i[e_],y=i[t_],i=i[Ju],g=this.__calSize(s,e,a)+this.__calSize(h,e,a)+this.__calSize(u,e,a)+this.__calSize(f,e,a)+i+p;return n=t?n.map(function(t){return t+g}):(o=this.__calSize(l,e,a)+this.__calSize(c,e,a)+this.__calSize(_,e,a)+this.__calSize(r,e,a)+d+y,n.map(function(t){return t+o}))}},{key:"__layout",value:function(t,e,r,i){this.__computeReflow();var n=t.w,a=this.isDestroyed,o=this.currentStyle,s=this.computedStyle,c=this.__config,l=(this.__ellipsis&&(this.__ellipsis=null),this.__parentLineBox=null,this.__isIbFull=this.__isUprightIbFull=!1,s[s_]),u=s[o_];if(this.__layoutData={x:t.x,y:t.y,w:n,h:t.h,lx:t.lx,ly:t.ly,isUpright:t.isUpright},!e&&!r&&!i){this.clearCache(),c[Xf]=N0,c[Wf]=!1,c[Qf]=!1;var h=this.next;if(!this.isMask&&h&&h.isMask){for(var _=0;h&&h.isMask;)_++,h=h.next;this.__hasMask=_}}if(this.__ox=this.__oy=0,a||"none"===l)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=s[l_]=s[h_]=0,this.__x=t.x,this.__y=t.y,this.__layoutNone(),void(this.__hasComputeReflow=!1);"absolute"!==u&&this.__mp(o,s,n);a=t.lineClampCount||0;return"flex"===l?(t.lineClampCount=0,this.__layoutFlex(t,e,r,i)):"inlineBlock"===l?(t.lineClampCount=0,this.__layoutInline(t,e,r,i)):"inline"===l?a=this.__layoutInline(t,e,r,i,!0):(t.lineClampCount=0,this.__layoutBlock(t,e,r,i)),e||r||i||("relative"===u?(n=o[r_],l=o[i_],t=o[n_],e=o[a_],r=this.parent,n[1]!==n0?(i=T0(o,r_,n,r),this.__offsetY(i),s[r_]=i,s[n_]="auto"):t[1]!==n0?(n=T0(o,n_,t,r),this.__offsetY(-n),s[n_]=n,s[r_]="auto"):s[r_]=s[n_]="auto",e[1]!==n0?(i=T0(o,a_,e,r,!0),this.__offsetX(i),s[a_]=i,s[i_]="auto"):l[1]!==n0?(t=T0(o,i_,l,r,!0),this.__offsetX(-t),s[i_]=t,s[a_]="auto"):s[a_]=s[i_]="auto"):"absolute"!==u&&(s[r_]=s[n_]=s[a_]=s[i_]="auto"),n=this.__sx=this.x+this.ox,e=this.__sy=this.y+this.oy,c[Qf]||(n=this.__sx1=n+s[ju],n=this.__sx2=n+s[Ju],n=this.__sx3=n+s[Xu],n=this.__sx4=n+this.width,n=this.__sx5=n+s[zu],this.__sx6=n+s[e_],e=this.__sy1=e+s[$u],e=this.__sy2=e+s[Qu],e=this.__sy3=e+s[Vu],e=this.__sy4=e+this.height,e=this.__sy5=e+s[Ku],this.__sy6=e+s[t_]),s[l_]=this.width,s[h_]=this.height,"absolute"!==u&&this.__execAr(),this.__hasComputeReflow=!1),a}},{key:"__execAr",value:function(){var t,e=this.__animateRecords;e&&(this.__animateRecords=null,e.list.forEach(function(t){t.target.vd instanceof a&&(t.target=t.target.vd)}),t=e.controller||this.root.animateController,e.options&&!1===e.options.autoPlay?(t.__records2=t.__records2.concat(e.list),t.init(t.__records2,t.list2)):(t.__records=t.__records.concat(e.list),t.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[s_]="none",t[$u]=t[Zu]=t[qu]=t[ju]=t[Qu]=t[e_]=t[t_]=t[Ju]=t[Vu]=t[zu]=t[Ku]=t[Xu]=t[l_]=t[h_]=this.__width=this.__height=0}},{key:"__preLayout",value:function(t,e){var r,i,n=t.x,a=t.y,o=t.w,s=t.h,c=t.w2,u=t.h2,_=t.w3,f=t.h3,d=t.lx,p=t.ly,y=t.lineBoxManager,g=t.endSpace,g=void 0===g?0:g,x=t.isUpright,l=(this.__x=n,this.__y=a,this.currentStyle),h=this.computedStyle,v=l[l_],l=l[h_],m=h[Qu],E=h[e_],b=h[t_],T=h[Ju],A=h[$u],M=h[Zu],R=h[qu],O=h[ju],S=h[Vu],C=h[zu],I=h[Ku],w=h[Xu],h=0===h[Af].indexOf("vertical"),c=(void 0!==c?(r=!0,o=c):void 0!==_?(r=!0,o=_):v[1]===n0||e||(o=this.__calSize(v,o,r=!0)),void 0!==u?(i=!0,s=u):void 0!==f?(i=!0,s=f):l[1]===n0||e||(s=this.__calSize(l,s,i=!0)),e?h?a+=m+A+S:n+=T+O+w:(n+=T+O+w,a+=m+A+S),t.x=n,t.y=a,0);return e||(v[1]!==n0&&void 0===_||(o-=T+E+O+M+w+C),l[1]!==n0&&void 0===f||(s-=m+b+A+R+S+I)),{fixedWidth:r,fixedHeight:i,x:n,y:a,w:o,h:s,lx:d,ly:p,lineBoxManager:y,endSpace:g,selfEndSpace:c=e?h?I+b+R:C+E+M:c,isParentVertical:x,isUpright:h}}},{key:"__marginAuto",value:function(t,e,r){var i=t[o_],n=t[s_],a=t[$u],o=t[qu],s=t[ju],l=t[Zu],h=t[l_],t=t[h_];"absolute"===i||"block"!==n&&"flex"!==n||(r?t[1]===n0&&!this.isReplaced||a[1]!==n0||o[1]!==n0||(i=this.outerHeight)<e.h&&this.__offsetY(.5*(e.h-i),!0):h[1]===n0&&!this.isReplaced||s[1]!==n0||l[1]!==n0||(n=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-n),!0))}},{key:"__calMatrix",value:function(t,e,i,n,r,c,u,a,_){var f=this;if(r[Qf])return n[R_]=[c,u],e[c_]=Ht.identity();var o,d,p,s,l,h,r=e[c_];return r&&t<N0&&!k0(t,L0)?(d=h=o=0,k0(t,F0)&&(l=i[u_],o=(l=E0(l)?0:this.__calSize(l,this.offsetWidth,!0))-(n[u_]||0),n[u_]=l,n[d_][12]+=o,r[12]+=o),k0(t,B0)&&(l=i[__],h=(l=E0(l)?0:this.__calSize(l,this.offsetHeight,!0))-(n[__]||0),n[__]=l,n[d_][13]+=h,r[13]+=h),k0(t,H0)&&(o=i[f_],d=(o=E0(o)?0:this.__calSize(o,this.offsetWidth,!0))-(n[f_]||0),n[f_]=o,n[d_][14]+=d,r[14]+=d),e[c_]=r):(void 0===c&&(c=this.__sx1,u=this.__sy1,a=this.offsetWidth,_=this.offsetHeight),void 0===e[R_]&&(e[R_]=!0,r=null,n[R_]=i[R_].map(function(t,e){return f.__calSize(t,e?_:a,!0)})),void 0!==e[d_]&&void 0!==e[u_]&&void 0!==e[__]&&void 0!==e[f_]&&void 0!==e[x_]&&void 0!==e[v_]&&void 0!==e[m_]&&void 0!==e[M_]&&void 0!==e[p_]&&void 0!==e[y_]&&void 0!==e[g_]&&void 0!==e[E_]&&void 0!==e[b_]||(e[d_]=e[u_]=e[__]=e[f_]=e[x_]=e[v_]=e[m_]=e[p_]=e[y_]=e[g_]=e[E_]=e[b_]=!0,r=null,i[d_]?p=io.calMatrix(i[d_],a,_,this.root):(s=[],[u_,__,f_,x_,v_,m_,M_,E_,b_,p_,y_,g_].forEach(function(t){delete n[t];var e,r=i[t];if(!E0(r)){if(t===M_)return n[t]=[r[0],r[1],r[2],r[3][0]],0===r[3][0]?void 0:void s.push([t,r]);n[t]=r[0],t!==x_&&t!==v_&&t!==m_?(e=t===p_||t===y_||t===g_,1===r[0]&&e||!e&&0===r[0]||(e=t===u_||t===f_?a:_,n[t]=f.__calSize(r,e,!0),s.push([t,r]))):s.push([t,r])}}),s.length&&(p=io.calMatrix(s,a,_,this.root))),n[d_]=p||Ht.identity()),r||(l=n[d_],(h=n[R_].slice(0))[0]+=c||0,h[1]+=u||0,r=e[c_]=io.calMatrixByOrigin(l,h))),r}},{key:"__calCache",value:function(c,u,t,a,e,n,_,f,r,d,p,y,g,x,v,m,E,b,T,A,i,o,M,R,O,S,C,I,w,k){var s=this,l=T,h=O,D=R,L=k,N=n[rf]=e[rf],P=("paddingBox"===N?(l=A,h=S,D=M,L=w):"contentBox"===N&&(l=i,h=C,D=o,L=I),this.__config[Qf]),F=(P&&!this.contentBoxList.length&&(P=!1),[L_,N_,P_,F_,B_,H_,k_,Y_,W_,U_,rf].forEach(function(t){n[t]=e[t]}),E0(a[G_])&&(a[G_]=!0,this.__calFilter(e,n)),E0(a[O_])&&(a[O_]=!0,N=e[O_],n[O_]=(N||[]).map(function(t){return t[1]===o0?t[0]+"%":s.__calSize(t,D-l,!0)})),E0(a[S_])&&(a[S_]=!0,i=e[S_],n[S_]=(i||[]).map(function(t){return t[1]===o0?t[0]+"%":s.__calSize(t,L-h,!0)})),E0(a[C_])&&(a[C_]=!0,n[C_]=(e[C_]||[]).map(function(t){if(Array.isArray(t))return t.map(function(t,e){return t[1]===n0?-1:t[1]===c0?"contain"===t[0]?-2:-3:s.__calSize(t,e?L-h:D-l,!0)})})),E0(a[w_])&&(C=e[w_],n[w_]=C.map(function(t){return t?t[0]:null}),a[w_]=C.map(function(t,e){return t?t[1]===c0?(r=s.__loadBgi[e]=s.__loadBgi[e]||{},(e=Mt.IMG[t[0]])&&e.state===Mt.LOADED?(r.url=t[0],r.source=e.source,r.width=e.width,r.height=e.height):r.url!==t[0]&&(r.url=t[0],r.source=null,n=(i=s).root,Mt.measureImg(t[0],function(t){t.success&&t.url===r.url&&!s.isDestroyed&&(r.source=t.source,r.width=t.width,r.height=t.height,n.delRefreshTask(r.cb),n.addRefreshTask(r.cb={__before:function(){a[w_]=void 0;var t={};t[Mf]=i,t[Rf]=P0,t[If]=i.__config,n.__addUpdate(i,i.__config,n,n.__config,t)}}))},{ctx:u,root:n,width:D-l,height:L-h})),!0):!(P||!t[0]||t[1]!==g0)||void 0:null;var r,i,n})),E0(a[D_])&&(a[D_]=!0,n[D_]=(e[D_]||[]).map(function(t){return t.map(function(t,e){return 3<e?t:s.__calSize(t,0===e?D-l:L-h,!0)})})),[I_,X_,K_,z_,V_].forEach(function(t){E0(a[t])&&(a[t]=x0(n[t]=e[t][0]))}),(E0(a[Gu])||E0(a[Yu])||E0(a[Uu])||E0(a[Wu]))&&(a[Gu]=a[Yu]=a[Uu]=a[Wu]=!0,P?We.calBorderRadiusInline(this.contentBoxList,e,n,this.root):We.calBorderRadius(r,d,e,n,this.root)),n[Gu]),B=n[Yu],H=n[Uu],G=n[Wu],o=(["Top","Right","Bottom","Left"].forEach(function(t){var e,r=Fu[Hu(t="border"+t)],i=Fu[Hu(t+"Width")],t=Fu[Hu(t+"Style")];E0(a[i])&&(a[i]=!0,a[r]=void 0),E0(a[t])&&(a[t]=!0,a[r]=void 0),E0(a[r])&&(r===J_?0<p?P||(i=Math.atan(p/x),e=Math.atan(p/y),a[r]=We.calPoints(p,n[t],i,e,T,A,M,R,O,S,w,k,0,F,B)):a[r]=[]:r===Q_?0<y?P||(i=Math.atan(y/p),e=Math.atan(y/g),a[r]=We.calPoints(y,n[t],i,e,T,A,M,R,O,S,w,k,1,B,H)):a[r]=[]:r===tf?0<g?P||(i=Math.atan(g/x),e=Math.atan(g/y),a[r]=We.calPoints(g,n[t],i,e,T,A,M,R,O,S,w,k,2,G,H)):a[r]=[]:r===ef&&(0<x?P||(i=Math.atan(x/p),e=Math.atan(x/g),a[r]=We.calPoints(x,n[t],i,e,T,A,M,R,O,S,w,k,3,F,G)):a[r]=[]))}),t&&t.computedStyle),I=(e[j_][1]===s0?n[j_]=t?o[j_]:"normal":E0(a[j_])&&(n[j_]=e[j_][0]),a[j_]=n[j_],e[$_]),i=(I[1]===s0?(N=n[$_]=t?o[$_]:v0(Pt.INHERIT.color)).k?a[$_]=N:a[$_]=x0(n[$_]):E0(a[$_])&&(I[1]===g0?a[$_]=n[$_]=I[0]:I[1]===h0&&(a[$_]=x0(n[$_]=v0(I[0])))),e[sf]);return i[1]===s0?(C=n[sf]=t?o[sf]:v0(Pt.INHERIT.textStrokeColor)).k?a[sf]=C:a[sf]=x0(n[sf]):E0(a[sf])&&(i[1]===g0?a[sf]=n[sf]=i[0]:i[1]===h0&&(a[sf]=x0(n[sf]=v0(i[0])))),e[lf][1]===s0?(n[lf]=t?o[lf]:Pt.INHERIT.textStrokeWidth,a[lf]=!0):E0(a[lf])&&(r=(r=e[lf])[1]===u0?r[0]*this.root.computedStyle[nf]:r[1]===_0?r[0]*this.root.width*.01:r[1]===f0?r[0]*this.root.height*.01:r[1]===d0?r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===p0?r[0]*Math.min(this.root.width,this.root.height)*.01:r[0],n[lf]=r,a[lf]=!0),e[hf][1]===s0?a[hf]=n[hf]=t?o[hf]:Pt.INHERIT.textStrokeOver:a[hf]=n[hf]=e[hf][0],e[q_][1]===s0?n[q_]=t?o[q_]:"visible":E0(a[q_])&&(n[q_]=e[q_][0]),a[q_]=n[q_],e[Z_][1]===s0?n[Z_]=t?o[Z_]:"auto":E0(a[Z_])&&(n[Z_]=e[Z_][0]),a[Z_]=n[Z_],this.__bx1=l,this.__bx2=D,this.__by1=h,this.__by2=L,[l,h,D,L]}},{key:"__calPerspective",value:function(t,e,r,i,n,a){var o,s,l=this;E0(t[T_])&&(o=t[T_]=!0,s=e[T_],s=this.__calSize(s,this.clientWidth,!0),r[T_]=s),E0(t[A_])&&(o=t[A_]=!0,r[A_]=e[A_].map(function(t,e){return l.__calSize(t,e?l.offsetHeight:l.offsetWidth,!0)})),o&&(void 0===n&&(n=this.__sx1,a=this.__sy1),(s=r[A_].slice(0))[0]+=n||0,s[1]+=a||0,i[t0]=io.calPerspectiveMatrix(r[T_],s))}},{key:"__calFilter",value:function(t,e){var r=this;return e[G_]=(t[G_]||[]).map(function(t){var t=Bt(t,2),e=t[0],t=t[1];return"dropShadow"!==e?[e,t=t[1]===y0||t[1]===o0||t[1]===l0?t[0]:r.__calSize(t,r.root.width,!1)]:[e,t.map(function(t,e){return 3<e?t:r.__calSize(t,0===e?r.__bx2-r.__bx1:r.__by2-r.__by1,!0)})]})}},{key:"__calContent",value:function(t,e,r,i){if(t===Du||t===Nu){if(e<P0)return this.__hasContent;if("hidden"!==r[q_]){var n=r[w_];if(Array.isArray(n))for(var a=0,c=n.length;a<c;a++)if(n[a])return!0;if(0<r[I_][0][3]){var t=i[l_],e=i[h_],u=i[Vu],_=i[zu],f=i[Ku],d=i[Xu];if(t&&e||u||_||f||d)return!0}for(var o=["Top","Right","Bottom","Left"],s=0,p=o.length;s<p;s++){var y=o[s];if(0<i[Fu[Hu("border"+y+"Width")]]&&0<r[Fu[Hu("border"+y+"Color")]][0][3])return!0}var l=r[D_];if(Array.isArray(l))for(var h=0,g=l.length;h<g;h++){var x=l[h];if(x&&0<x[4][3])return!0}}}return!1}},{key:"render",value:function(A,t,M,e){var L,R=this,O=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,S=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.isDestroyed,i=this.root,C=this.__config,n=C[zf],N=C[Lf],a=C[Nf],I=C[Pf];if(C[Xf]=D0,P0<=t&&(this.__bbox=null,this.__filterBbox=null),r)return{isDestroyed:r,break:!0};A===Lu&&(L=C[r0]=this.__virtualDom={bb:[],children:[],visibility:"visible"},C[Vf]?C[Vf].available||(C[Vf].available=!0):C[Vf]={available:!0,release:function(){this.available=!1,delete L.cache}});r=I[s_];if("none"===r)return{break:!0};var o,s,l,h,c,u,_,f=this.clientWidth,d=this.clientHeight,p=this.offsetWidth,y=this.offsetHeight,g=this.__hasMask,P=I[Vu],F=I[zu],B=I[Ku],H=I[Xu],w=I[Ju],G=I[e_],k=I[Qu],D=I[t_],x=C[Qf],v=this.__sx1,m=this.__sx2,E=this.__sx3,b=this.__sx4,T=this.__sx5,Y=this.__sx6,W=this.__sy1,U=this.__sy2,X=this.__sy3,z=this.__sy4,V=this.__sy5,K=this.__sy6,j={ctx:M,x1:v,x2:m,x3:E,x4:b,x5:T,x6:Y,y1:W,y2:U,y3:X,y4:z,y5:V,y6:K,sx1:v,sx2:m,sx3:E,sx4:b,sx5:T,sx6:Y,sy1:W,sy2:U,sy3:X,sy4:z,sy5:V,sy6:K,dx:O,dy:S},$=C[Jf],d=(A===Nu&&this.__calPerspective(N,a,I,C),o=e&&A===Du?C[Yf]:this.__calMatrix(t,N,a,I,C,v,W,p,y),c=e&&A===Du?(s=this.__bx1,h=this.__bx2,l=this.__by1,this.__by2):(f=Bt(this.__calCache(A,M,$,N,a,I,f,d,p,y,k,G,D,w,P,F,B,H,v,m,E,b,T,Y,W,U,X,z,V,K),4),s=f[0],l=f[1],h=f[2],f[3]),j.bx1=s,j.by1=l,j.bx2=h,j.by2=c,this.__hasContent=C[Uf]=this.__calContent(A,t,a,I)),q=(e&&A===Nu?!d&&this.__releaseWhenEmpty(n,I)?(j.break=!0,C[Wf]=!1):C[Wf]||(m=this.bbox,n?n.reset(m,v,W):n=zo.getInstance(m,v,W),n&&n.enabled?(n.__bbox=m,M=n.ctx,O+=n.dx,S+=n.dy,j.ctx=M):(C[Wf]=!0,j.limitCache=j.break=!(n=null)),C[zf]=n):A===Nu&&(xt=Mt.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),j.ctx=M=xt.ctx),j.dx=O,j.dy=S,I[I_]),Z=I[X_],J=I[K_],Q=I[z_],tt=I[V_],E=I[Gu],b=I[Yu],T=I[Uu],U=I[Wu],X=I[q_],et=I[k_],rt=I[w_],z=I[L_],V=I[G_],it=I[C_],nt=I[D_],f=I[Y_],t=I[W_],at=I[rf],ot=0===I[Af].indexOf("vertical");if(e&&A===Du?z=C[Hf]:A===Du||A===Nu?($&&(z*=$.__config[Hf]),C[Hf]=z):A===Lu&&(1===z?delete L.opacity:L.opacity=z),A===Lu&&(Ht.isE(o)?delete L.transform:L.transform="matrix("+m0(Ht.m2m6(o),",")+")",L.visibility=X),A===Du&&e?o=C[Gf]:(a=C[Yf],At.assignMatrix(a,o),$&&($.perspectiveMatrix&&(o=Ht.multiply($.perspectiveMatrix,o)),o=Ht.multiply($.matrixEvent,o)),a=C[Gf],At.assignMatrix(a,o)),j.limitCache)return j;"normal"!==t&&I0(t)?(t=C0(t),A===Du&&e!==Pu?(d=i.width,m=i.height,xt=Mt.getCacheCanvas(d,m,null,"blend"),u={ctx:M,target:xt,mixBlendMode:t,matrix:o},M=xt.ctx):A===Lu&&(L.mixBlendMode=t)):A===Lu&&delete L.mixBlendMode,g&&A===Du&&e!==Pu&&($=i.width,a=i.height,d=Mt.getCacheCanvas($,a,null,"mask1"),_={ctx:M,target:d,matrix:o},M=d.ctx);V&&V.length?A===Du&&e!==Pu?(m=i.width,xt=i.height,t=Mt.getCacheCanvas(m,xt,null,"filter"),st={ctx:M,filter:V,target:t,matrix:o},M=t.ctx):A===Lu&&(L.filter=ne.svgFilter(V)):A===Lu&&delete L.filter;var st,lt,ht,ct,ut=E.slice(0),_t=b.slice(0),ft=T.slice(0),dt=U.slice(0);if("paddingBox"===at?(ut[0]-=w,ut[1]-=k,_t[0]-=G,_t[1]-=k,ft[0]-=G,ft[1]-=D,dt[0]-=w,dt[1]-=D):"contentBox"===at&&(ut[0]-=w+H,ut[1]-=k+P,_t[0]-=G+F,_t[1]-=k+P,ft[0]-=G+F,ft[1]-=D+B,dt[0]-=w+H,dt[1]-=D+B),"hidden"===f&&"inline"!==r?(ht=We.calRadius(s,l,h-s,c-l,ut,_t,ft,dt),A===Du&&e!==Pu?(g=i.width,$=i.height,a=Mt.getCacheCanvas(g,$,null,"overflow"),lt={ctx:M,target:a,matrix:o},M=a.ctx,lt.x=v,lt.y=W,lt.offsetWidth=p,lt.offsetHeight=y,lt.list=ht):A===Lu&&(d={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ku(ht)||"M".concat(v,",").concat(W,"L").concat(v+p,",").concat(W,"L").concat(v+p,",").concat(W+y,"L").concat(v,",").concat(W+y,",L").concat(v,",").concat(W)]]}]},m=M.add(d),C[Zf].push(d),L.overflow="url(#"+m+")")):A===Lu&&delete L.overflow,A===Du&&(j.offscreenBlend=u,j.offscreenMask=_,j.offscreenFilter=st,j.offscreenOverflow=lt,(j.ctx=M).globalAlpha=z,e||M.setTransform(o[0],o[1],o[4],o[5],o[12],o[13])),("hidden"===X||j.break)&&(A===Du||A===Nu))return j.break=!0,j;if(n&&n.enabled&&(n.__available=!0),x){var pt=this.contentBoxList,yt=pt.length,gt=(pt[yt-1]instanceof Lo&&yt--,rt.some(function(t){return t}));if(yt){var xt=function(){for(var u,t,i,e=I[nf],r=I[af],_=I[of],f=0,d=0,p=[],E=(gt&&(f=Nl.getInlineWidth(R,pt,ot),d=_,ot&&(f=(t=[d,f])[0],d=t[1]),"paddingBox"===at||"padding-box"===at?ot?(f+=P+B,d+=H+F):(f+=H+F,d+=P+B):"contentBox"!==at&&"content-box"!==at&&(ot?(f+=P+B+k+D,d+=H+F+w+G):(f+=H+F+w+G,d+=P+B+k+D)),A!==Du&&A!==Nu||(u=Mt.getCacheCanvas(f,d,"__$$INLINE_BGI$$__")),i=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=i-1-e,At.isString(t)?(r=R.__loadBgi[e]).url===t&&(r=$l.renderImage(R,A,u&&u.ctx||M,r,0,0,f,d,ut,_t,ft,dt,I,e,it,et,C,!0,O,S),A===Lu&&r&&p.push(r)):!t.k||(e=R.__gradient(A,M,0,0,f,d,t,O,S))&&("conic"===e.k?sr.renderConic(R,A,u&&u.ctx||M,e.v,0,0,f,_,ut,_t,ft,dt,!0):(r=$l.renderBgc(R,A,u&&u.ctx||M,e.v,null,0,0,f,d,ut,_t,ft,dt,"fill",!0),A===Lu&&r&&p.push(r))))})),e*((St.info[M0(r)]||{}).lgr||0)*.5),b=ot?vn.getVerticalBaseline(I):vn.getBaseline(I),y=!0,g=pt[0],x=g.parentLineBox,v=0,m=0;m<yt;m++){var T=pt[m];T.parentLineBox!==x&&!function(){var t=Bt(Nl.getInlineBox(R,ot,pt,g,pt[m-1],x,b,_,E,y,!1,at,P,F,B,H,k,G,D,w),8),i=t[0],n=t[1],e=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],h=(y&&(t=G0(R),i-=t,a-=t),0<q[3]&&$l.renderBgc(R,A,M,N[I_],null,i,n,e-i,r-n,ut,[0,0],[0,0],dt,"fill",!1,O,S),e-i),c=r-n;A!==Du&&A!==Nu||!u?A===Lu&&p.length&&p.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ot?"M".concat(0,",",v,"L").concat(d,",").concat(v,"L").concat(d,",").concat(c+v,"L",0,",").concat(c+v,",L",0,",").concat(v):"M".concat(v,",",0,"L").concat(h+v,",",0,"L").concat(h+v,",").concat(d,"L").concat(v,",").concat(d,",L").concat(v,",",0)]]}]},r=M.add(e),C[Zf].push(e),L.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",ot?i:i-v],["y",ot?n-v:n],["clip-path","url(#"+r+")"]]}))}):ot?M.drawImage(u.canvas,0,v,f,c,i+O,n+S,f,c):M.drawImage(u.canvas,v,0,h,d,i+O,n+S,h,d),v+=ot?c:h,nt&&nt.forEach(function(t){Iu.renderBoxShadow(R,A,M,t,a,o,s,l,s-a,l-o,O,S)}),0<k&&0<Z[3]&&(t=Math.atan(k/w),e=Math.atan(k/G),r=We.calPoints(k,I[P_],t,e,a,a+w,s,s,o,o+k,l-D,l,0,y?ut:[0,0],[0,0]),We.renderBorder(R,A,M,r,N[X_],O,S)),0<D&&0<Q[3]&&(t=Math.atan(D/w),e=Math.atan(D/G),r=We.calPoints(D,I[B_],t,e,a,a+w,s,s,o,o+k,l-D,l,2,y?ut:[0,0],[0,0]),We.renderBorder(R,A,M,r,N[z_],O,S)),y&&0<w&&0<tt[3]&&(t=Math.atan(w/k),e=Math.atan(w/D),r=We.calPoints(w,I[H_],t,e,a,a+w,s-G,s,o,o+k,l-D,l,3,ut,_t),We.renderBorder(R,A,M,r,N[V_],O,S)),y=!1,x=(g=T).parentLineBox}(),m===yt-1&&function(){var t=Bt(Nl.getInlineBox(R,ot,pt,g,pt[m],x,b,_,E,y,!0,at,P,F,B,H,k,G,D,w),8),i=t[0],n=t[1],e=t[2],r=t[3],a=t[4],o=t[5],s=t[6],l=t[7],t=(y&&(t=G0(R),i-=t,a-=t),function t(e){for(var r=0,i=e.flowChildren,n=i.length-1;0<=n;n--){var a=i[n];if(!(a instanceof Y0||a instanceof bl&&a.shadowRoot instanceof Y0))break;if(a.flowChildren&&a.flowChildren.length){r+=t(a);break}r+=a.outerWidth}return r}(R)),h=(e+=t,s+=t,0<q[3]&&$l.renderBgc(R,A,M,N[I_],null,i,n,e-i,r-n,y?ut:[0,0],_t,ft,y?dt:[0,0],"fill",!1,O,S),e-i),c=r-n;A!==Du&&A!==Nu||!u?A===Lu&&p.length&&p.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ot?"M".concat(0,",",v,"L").concat(d,",").concat(v,"L").concat(d,",").concat(c+v,"L",0,",").concat(c+v,",L",0,",").concat(v):"M".concat(v,",",0,"L").concat(h+v,",",0,"L").concat(h+v,",").concat(d,"L").concat(v,",").concat(d,",L").concat(v,",",0)]]}]},r=M.add(e),C[Zf].push(e),L.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",ot?i:i-v],["y",ot?n-v:n],["clip-path","url(#"+r+")"]]}))}):ot?M.drawImage(u.canvas,0,v,f,c,i+O,n+S,f,c):M.drawImage(u.canvas,v,0,h,d,i+O,n+S,h,d),nt&&nt.forEach(function(t){Iu.renderBoxShadow(R,A,M,t,a,o,s,l,s-a,l-o,O,S)}),0<k&&0<Z[3]&&(t=Math.atan(k/w),e=Math.atan(k/G),r=We.calPoints(k,I[P_],t,e,a,a,s-G,s,o,o+k,l-D,l,0,y?ut:[0,0],_t),We.renderBorder(R,A,M,r,N[X_],O,S)),0<G&&0<J[3]&&(t=Math.atan(G/k),e=Math.atan(G/D),r=We.calPoints(G,I[F_],t,e,a,a+w,s-G,s,o,o+k,l-D,l,1,ut,_t),We.renderBorder(R,A,M,r,N[K_],O,S)),0<D&&0<Q[3]&&(t=Math.atan(D/w),e=Math.atan(D/G),r=We.calPoints(D,I[B_],t,e,a,a,s-G,s,o,o+k,l-D,l,2,y?ut:[0,0],_t),We.renderBorder(R,A,M,r,N[z_],O,S)),y&&0<w&&0<tt[3]&&(t=Math.atan(w/k),e=Math.atan(w/D),r=We.calPoints(w,I[H_],t,e,a,a+w,s-G,s,o,o+k,l-D,l,3,ut,_t),We.renderBorder(R,A,M,r,N[V_],O,S))}()}return u&&u.ctx.clearRect(0,0,f,d),{v:j}}();if("object"===vt(xt))return xt.v}else if(s===h||l===c)return j}return 0<q[3]&&$l.renderBgc(this,A,M,N[I_],ht,s,l,h-s,c-l,ut,_t,ft,dt,"fill",!1,O,S),rt&&(ct=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=ct-1-e,At.isString(t)?(r=R.__loadBgi[e]).url===t&&$l.renderImage(R,A,M,r,s,l,h,c,ut,_t,ft,dt,I,e,it,et,C,!1,O,S):!t.k||(r=R.__gradient(A,M,s,l,h,c,t,O,S))&&("conic"===r.k?sr.renderConic(R,A,M,r.v,s,l,h-s,c-l,ut,_t,ft,dt):$l.renderBgc(R,A,M,r.v,ht,s,l,h-s,c-l,ut,_t,ft,dt,"fill",!1,O,S)))})),nt&&nt.forEach(function(t){Iu.renderBoxShadow(R,A,M,t,v,W,Y,K,Y-v,K-W,O,S)}),0<k&&0<Z[3]&&We.renderBorder(this,A,M,N[J_],N[X_],O,S),0<G&&0<J[3]&&We.renderBorder(this,A,M,N[Q_],N[K_],O,S),0<D&&0<Q[3]&&We.renderBorder(this,A,M,N[tf],N[z_],O,S),0<w&&0<tt[3]&&We.renderBorder(this,A,M,N[ef],N[V_],O,S),j}},{key:"__destroy",value:function(){if(!this.isDestroyed){P(N(a.prototype),"__destroy",this).call(this);var t,e=this.root,r=(this.clearAnimate(),this.clearFrameAnimate(),e&&e.delRefreshTask(this.__loadBgi.cb),e&&e.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache(),this.__fontRegister);for(t in r)r.hasOwnProperty(t)&&St.offRegister(t,this)}}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,n=this.isMask;if(!(r||"none"===i[s_]||t.__stopPropagation||n)){var a,r=t.event.type,n=this.listener,o=this.__hasMask;if(n.hasOwnProperty(r)&&(a=n[r]),e)return"none"!==i[Z_]&&b0(a)&&!t.__stopImmediatePropagation&&a.call(this,t),!0;if(this.willResponseEvent(t)){if(o){for(var s,l=this.next,n=l.isClip;l&&l.isMask;){if(l.willResponseEvent(t,!0)){s=!0;break}l=l.next}if(!n&&!s)return}return b0(a)&&!t.__stopImmediatePropagation&&a.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,n=this.__sx1,a=this.__sy1,o=this.offsetWidth,s=this.offsetHeight,l=this.matrixEvent,h=this.computedStyle;if("none"!==h[Z_])return te.pointInQuadrilateral(r,i,n,a,n+o,a,n+o,a+s,n,a+s,l)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(h,c,t,e,u,_,r){var i,f,n,a,o,s,l,d=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,p=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,y=u-t,g=_-e;if(y&&g)return l=r.k,i=r.v,f=r.d,a=r.s,o=r.z,r=r.p,n={k:l},"linear"===l?(s=sr.getLinear(i,f,t,e,t+.5*y,e+.5*g,y,g,this.root,d,p),n.v=this.__getLg(h,c,s)):"radial"===l?(s=sr.getRadial(i,a,o,r,t,e,u,_,this.root,d,p))&&(n.v=this.__getRg(h,c,s),s.matrix&&(n.v=[n.v,s.matrix,s.cx,s.cy])):"conic"===l&&(a=this.bbox,o=Math.max(Math.abs(a[2]-a[0]),Math.abs(a[3]-a[1])),s=Math.max(Math.abs(y),Math.abs(g)),l=sr.getConic(i,f,r,t,e,u,_,o/s,this.root,d,p),n.v=this.__getCg(h,c,l)),n}},{key:"__getLg",value:function(t,e,r){var i;return t===Du||t===Nu?(i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2),r.stop.forEach(function(t){i.addColorStop(t[1],x0(t[0]))}),i):t===Lu?(t={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",x0(t[0])],["offset",100*t[1]+"%"]]}})},r=e.add(t),this.__config[Zf].push(t),"url(#"+r+")"):void 0}},{key:"__getRg",value:function(t,e,r){var i;return t===Du||t===Nu?(i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r),r.stop.forEach(function(t){i.addColorStop(t[1],x0(t[0]))}),i):t===Lu?(t={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",x0(t[0])],["offset",100*t[1]+"%"]]}})},r.tx!==r.cx&&t.props.push(["fx",r.cx]),r.ty!==r.cy&&t.props.push(["fy",r.cy]),r=e.add(t),this.__config[Zf].push(t),"url(#"+r+")"):void 0}},{key:"__getCg",value:function(t,e,r){var i=r.stop,n=i.length-1;i[n][1]<1&&i.push([i[n][0].slice(0),1]),0<i[0][1]&&i.unshift([i[0][0].slice(0),0]);return t===Du||t===Nu?r:[]}},{key:"clearCache",value:function(t){var e=this.__config,r=e[Vf],i=e[Kf],n=e[jf],a=e[$f];t||(e[Lf]=this.__cacheStyle={},(t=e[zf])&&t.release()),r&&r.release(),i&&i.release(),n&&n.release(),a&&a.release()}},{key:"updateStyle",value:function(e,r){var i=this,n=i.root,a=i.__config,o=vn.normalize(e);n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,a[qf]||((t={})[Mf]=i,t[Of]=o,t[Sf]=e,t[Cf]=Object.keys(o).map(function(t){return t=S0.hasOwnProperty(t)?t:parseInt(t)}),t[If]=a,n.__addUpdate(i,a,n,n.__config,t))},__after:function(t){b0(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,o),b0(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,n=i.root,a=i.__config;n?n.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,a[qf]||((t={})[Mf]=i,t[Of]=e,t[Cf]=Object.keys(e).map(function(t){return t=S0.hasOwnProperty(t)?t:parseInt(t)}),t[If]=a,n.__addUpdate(i,a,n,n.__config,t))},__after:function(t){b0(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),b0(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new Mu(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof Mu&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(b0(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var n={__after:function(t){e(t)},__karasFramecb:e};return t.push(n),Jl.onFrame(n),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void Jl.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){Jl.offFrame(t)})}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){"none"!==this.computedStyle[s_]&&(P(N(a.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[Xf]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t)}},{key:"__offsetY",value:function(t,e,r){"none"!==this.computedStyle[s_]&&(P(N(a.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData&&(this.__layoutData.y+=t),this.clearCache()),void 0!==r&&(this.__config[Xf]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t)}},{key:"__resizeX",value:function(t,e){"none"!==this.computedStyle[s_]&&(this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData&&(this.__layoutData.w+=t),this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[Wf]=!1),void 0!==e&&(this.__config[Xf]|=e),this.clearCache())}},{key:"__resizeY",value:function(t,e){"none"!==this.computedStyle[s_]&&(this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[Wf]=!1),void 0!==e&&(this.__config[Xf]|=e),this.clearCache())}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=[];return t?(Array.isArray(t)?t:[t]).forEach(function(t){cr.hasOwnProperty(t)?cr[t].forEach(function(t){i.push(Fu[Hu(t)])}):i.push(Fu[Hu(t)])}):i=Object.keys(e),i.forEach(function(t){S0.hasOwnProperty(t)?r[t]=e[t]:r[Bu[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(t){t=t?this.bbox:[t=this.__sx1,e=this.__sy1,t+this.offsetWidth,e+this.offsetHeight];var e=this.matrixEvent,r=w0(Ht.calPoint([t[0],t[1]],e)),i=w0(Ht.calPoint([t[2],t[1]],e)),n=w0(Ht.calPoint([t[2],t[3]],e)),t=w0(Ht.calPoint([t[0],t[3]],e));return{left:Math.min(r[0],Math.min(i[0],Math.min(n[0],t[0]))),top:Math.min(r[1],Math.min(i[1],Math.min(n[1],t[1]))),right:Math.max(r[0],Math.max(i[0],Math.max(n[0],t[0]))),bottom:Math.max(r[1],Math.max(i[1],Math.max(n[1],t[1]))),points:[r,i,n,t]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var r=this;if(r.isDestroyed)return Mt.warn("Remove target is destroyed."),void(b0(e)&&e());var i=r.root,n=r.domParent,t=r.isShadowRoot?r.hostRoot:r;-1!==n.children.indexOf(t)?(i.delRefreshTask(r.__task),i.addRefreshTask(r.__task={__before:function(){r.__task=null;var t=n.__json,e=t.children.indexOf((r.isShadowRoot?r.hostRoot:r).__json);if(-1===e)throw new Error("Remove index Exception.");t.children.splice(e,1),n.children.splice(e,1);t=n.zIndexChildren,!t||-1<(e=t.indexOf(r.isShadowRoot?r.hostRoot:r))&&t.splice(e,1),r.__prev&&(r.__prev.__next=r.__next),t={};t[Mf]=r,t[Rf]=N0,t[wf]=!0,t[If]=r.__config,i.__addUpdate(r,r.__config,i,i.__config,t)},__after:function(t){(r.isShadowRoot?r.hostRoot:r).__destroy(),b0(e)&&e.call(r,t)}})):b0(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,n;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,n=this.computedStyle[D_],this.__bbox=R0([t,e,t+r,e+i],n)),this.__bbox}},{key:"filterBbox",get:function(){var t,e;return this.__filterBbox||(t=this.bbox,e=this.computedStyle[G_],this.__filterBbox=O0(t,e)),this.__filterBbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[Yf]}},{key:"matrixEvent",get:function(){return this.__config[Gf]}},{key:"perspectiveMatrix",get:function(){return this.__config[t0]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"cacheStyle",get:function(){return this.__cacheStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseline",get:function(){return this.offsetHeight}},{key:"firstBaseline",get:function(){return this.offsetHeight}},{key:"verticalBaseline",get:function(){return this.offsetWidth}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[i0]=this.__cacheAsBitmap=!!t}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),a}(),ur=T.STYLE_KEY,W0=ur.DISPLAY,U0=ur.MARGIN_TOP,X0=ur.MARGIN_BOTTOM,z0=ur.MARGIN_LEFT,V0=ur.MARGIN_RIGHT,K0=ur.BORDER_TOP_WIDTH,j0=ur.BORDER_BOTTOM_WIDTH,$0=ur.BORDER_LEFT_WIDTH,q0=ur.BORDER_RIGHT_WIDTH,Z0=ur.PADDING_TOP,J0=ur.PADDING_BOTTOM,Q0=ur.PADDING_LEFT,td=ur.PADDING_RIGHT,ed=ur.LINE_HEIGHT,rd=function(){function a(t,e,r,i,n){_(this,a),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseline=i,this.__isUpright=n,this.__bOffset=0}return f(a,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(r){var t,i=r?this.verticalBaseline:this.baseline,e=r?this.verticalLineHeight:this.lineHeight,n=e;return this.list.length&&(this.list.forEach(function(t){var e;t.isEllipsis||(r?(e=t.verticalBaseline)!==i&&(t.__offsetX(e=i-e,!0),n=Math.max(n,t.offsetWidth+e)):(e=t.baseline)!==i&&(t.__offsetY(e=i-e,!0),n=Math.max(n,t.offsetHeight+e)))}),t=i-this.__baseline,n=Math.max(n,this.__lineHeight+t)),Math.max(0,n-e)}},{key:"__offsetX",value:function(e,t){this.__x+=e,t&&this.list.forEach(function(t){t.__offsetX(e,!0)})}},{key:"__offsetY",value:function(e,t){this.__y+=e,t&&this.list.forEach(function(t){t.__offsetY(e,!0)})}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseline=Math.max(e,this.__baseline)}},{key:"__resetLb",value:function(i,n){this.list.forEach(function(t){for(var e=t,r=(e=t instanceof Eo?t.parent.parent:e).computedStyle;"inline"===r[W0];)i=Math.max(i,r[ed]),n=Math.max(n,vn.getBaseline(r)),r=(e=e.domParent).computedStyle}),this.__lineHeight=i,this.__baseline=n}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.x+this.width}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){if(this.isUpright)return this.verticalLineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],t=t[e-1],i=r.x,n=(r instanceof Eo?r.parent:r).domParent;;){var a=n.contentBoxList,o=n.computedStyle,c=o[W0],u=o[z0],_=o[$0],o=o[Q0];if("inline"!==c)break;r===a[0]&&(i-=u+_+o),n=n.domParent}for(var s=t.x+t.outerWidth,n=(t instanceof Eo?t.parent:t).domParent;;){var l=n.contentBoxList,h=n.computedStyle,f=h[W0],d=h[V0],p=h[q0],h=h[td];if("inline"!==f)break;r===l[l.length-1]&&(s+=d+p+h),n=n.domParent}return s-i}return 0}},{key:"height",get:function(){if(!this.isUpright)return this.lineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],t=t[e-1],i=r.y,n=(r instanceof Eo?r.parent:r).domParent;;){var a=n.contentBoxList,o=n.computedStyle,c=o[W0],u=o[U0],_=o[K0],o=o[Z0];if("inline"!==c)break;r===a[0]&&(i-=u+_+o),n=n.domParent}for(var s=t.y+t.outerHeight,n=(t instanceof Eo?t.parent:t).domParent;;){var l=n.contentBoxList,h=n.computedStyle,f=h[W0],d=h[X0],p=h[j0],h=h[J0];if("inline"!==f)break;r===l[l.length-1]&&(s+=d+p+h),n=n.domParent}return s-i}return 0}},{key:"bOffset",get:function(){return this.__bOffset}},{key:"baseline",get:function(){var e=this.__baseline;return this.list.forEach(function(t){e=Math.max(e,t.baseline)}),e}},{key:"verticalBaseline",get:function(){var e=this.__baseline;return this.list.forEach(function(t){e=Math.max(e,t.verticalBaseline)}),e}},{key:"lineHeight",get:function(){var e=this.__lineHeight;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}},{key:"verticalLineHeight",get:function(){var e=this.__lineHeight;return this.list.forEach(function(t){e=Math.max(e,t.outerWidth)}),e}},{key:"isUpright",get:function(){return this.__isUpright}}]),a}(),id=function(){function a(t,e,r,i,n){_(this,a),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__max=n?e:t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseline=i,this.__isEnd=!0,this.__spreadList=[],this.__isVertical=n}return f(a,[{key:"genLineBox",value:function(t,e){t=new rd(t,e,this.__lineHeight,this.__baseline,this.isUpright);return this.list.push(t),this.__isEnd=!0,t}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseline,i);if(this.__isNewLine)return t=new rd(t,e,r,i,this.isUpright),this.list.push(t),this.__isEnd=!0,this.__isNewLine=!1,t}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r,i=this.isUpright;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):i?(this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__max=Math.max(this.__max,i?e.y+e.outerHeight:e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i,n){this.list.forEach(function(t){var e=r-(n?t.height:t.width);0<e&&("center"===i&&(e*=.5),n?t.__offsetY(e,!0):t.__offsetX(e,!0))})}},{key:"verticalAlign",value:function(e){var r=this.__spreadList,i=(r.splice(0),0);return this.list.forEach(function(t){i&&(t.__bOffset=i,e?t.__offsetX(i,!0):t.__offsetY(i,!0)),i+=t.verticalAlign(e),r.push(i)}),i}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"addY",value:function(t){this.__lastY+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e,!1)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endX",get:function(){var t=this.list,e=t.length;return e?t[e-1].endX:this.__x}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseline",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseline+t[e-1].bOffset}return 0}},{key:"firstBaseline",get:function(){var t=this.list;return t.length?t[0].baseline:0}},{key:"verticalBaseline",get:function(){var t=this.list;return t.length?t[0].baseline+t[0].bOffset:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"verticalLineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].verticalLineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}},{key:"spreadList",get:function(){return this.__spreadList}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"max",get:function(){return this.__max}}]),a}(),nd={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},Wr=T.STYLE_KEY,ad=Wr.DISPLAY,od=Wr.TOP,sd=Wr.BOTTOM,ld=Wr.POSITION,hd=Wr.HEIGHT,cd=r.AUTO,ud=r.PX,_d=r.PERCENT,fd=es.REFLOW;var dd={offsetAndResizeByNodeOnY:function(t,e,c,r,u){if(r){for(;;){for(;t.isShadowRoot;)t=t.host;for(var i=t,_=void 0,n=t.domParent,a=(n&&(h=n.computedStyle[ld],_=n===e||n.isShadowRoot||"relative"===h||"absolute"===h),t.next),o=void 0;a;){if("none"!==a.computedStyle[ad])if("absolute"===a.currentStyle[ld]){var s=a.currentStyle,f=s[od],l=s[sd],s=s[hd];if(f[1]===cd?l[1]===cd||l[1]===ud?(a.__offsetY(r,!0,fd),a.clearCache()):l[1]===_d&&(l=(1-.01*l[0])*r,a.__offsetY(l,!0,fd),a.clearCache()):f[1]===_d&&(l=.01*f[0]*r,a.__offsetY(l,!0,fd),a.clearCache()),s[1]===_d)if(_)n.__layoutAbs(n,n.__layoutData,a);else{if(!o)for(o=n;o&&o!==e&&!o.isShadowRoot;){var d=o.currentStyle;if("absolute"===d[ld]||"relative"===d[ld])break;o=o.domParent}u.push([n,o,a])}}else a.__offsetY(r,!0,fd),a.clearCache();a=a.next}if(!n)break;var h=(t=n).currentStyle,p=void 0;if("absolute"===h[ld]?h[hd][1]!==cd||h[od][1]!==cd&&h[sd][1]!==cd||(p=!0):h[hd][1]===cd&&(p=!0),!p)break;if(t.__resizeY(r,fd),t.clearCache(),t===e)break}for(;i;)i.clearCache(!0),i=i.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMargin:function(t,e){var r=0,i=t[0],n=t[0],t=(t.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),n=Math.min(n,t)}),0);return 0<i&&0<n?t=Math.max(i,n)-r:i<0&&n<0?t=Math.min(i,n)-r:0===i&&0===n||(t=i+n-r),t}},i=T.STYLE_KEY,pd=i.POSITION,yd=i.DISPLAY,gd=i.MARGIN_LEFT,xd=i.MARGIN_TOP,vd=i.MARGIN_RIGHT,md=i.MARGIN_BOTTOM,Ed=i.PADDING_LEFT,bd=i.PADDING_BOTTOM,Td=i.PADDING_RIGHT,Ad=i.PADDING_TOP,Md=i.BORDER_TOP_WIDTH,Rd=i.BORDER_BOTTOM_WIDTH,Od=i.BORDER_RIGHT_WIDTH,Sd=i.BORDER_LEFT_WIDTH,Cd=i.TOP,Id=i.RIGHT,wd=i.BOTTOM,kd=i.LEFT,Dd=i.WIDTH,Ld=i.HEIGHT,Nd=i.TEXT_ALIGN,Pd=i.FLEX_DIRECTION,Fd=i.FLEX_BASIS,Bd=i.FLEX_SHRINK,Hd=i.FLEX_GROW,Gd=i.ALIGN_SELF,Yd=i.ALIGN_ITEMS,Wd=i.JUSTIFY_CONTENT,Ud=i.Z_INDEX,Xd=i.WHITE_SPACE,zd=i.LINE_HEIGHT,Vd=i.LINE_CLAMP,Kd=i.ORDER,jd=i.FLEX_WRAP,$d=i.ALIGN_CONTENT,qd=i.OVERFLOW,Zd=i.FONT_SIZE,Jd=i.FONT_FAMILY,Qd=i.FONT_WEIGHT,tp=i.WRITING_MODE,Hr=T.NODE_KEY,ep=Hr.NODE_CURRENT_STYLE,rp=Hr.NODE_STYLE,ip=Hr.NODE_STRUCT,np=Hr.NODE_DOM_PARENT,ap=Hr.NODE_IS_INLINE,fi=T.UPDATE_KEY,op=fi.UPDATE_NODE,sp=fi.UPDATE_FOCUS,lp=fi.UPDATE_ADD_DOM,hp=fi.UPDATE_CONFIG,di=T.STRUCT_KEY,cp=di.STRUCT_NUM,up=di.STRUCT_LV,_p=di.STRUCT_TOTAL,fp=di.STRUCT_CHILD_INDEX,dp=di.STRUCT_INDEX,pp=T.ELLIPSIS,yp=r.AUTO,gp=r.PX,xp=r.PERCENT,vp=r.REM,mp=r.VW,Ep=r.VH,bp=r.VMAX,Tp=r.VMIN,Ap=vn.isRelativeOrAbsolute,Mp=vn.getBaseline,Rp=vn.getVerticalBaseline,Op=At.extend,Sp=At.isNil,Cp=At.isFunction,Ip=et.CANVAS,wp=et.SVG,kp=et.WEBGL;function Dp(t){var i,n,a=[],o={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof bl?t.shadowRoot:t)instanceof Y0&&t.isMask?void 0!==n?o[n].push(t):e&&(s[n=e-1].__iIndex=n,o[n]=[t],i=!0):(n=void 0,t instanceof Y0?(r.__zIndex=t.currentStyle[Ud],Ap(t)&&(r.__aIndex=!0)):r.__zIndex=0,a.push(r),r.__iIndex=e)}),a.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=a.length-1;0<=e;e--){var r=a[e].__iIndex;o.hasOwnProperty(r)&&a.splice.apply(a,[e+1,0].concat(y(o[r])))}return a}function Lp(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof bl&&(t=t.shadowRoot),r.__order=t instanceof Y0?t.currentStyle[Kd]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}function Np(t,c,u,e,_,f){var r,i=t.computedStyle,n=t.root,a=n.renderMode,o=u.list;o.forEach(function(t){e-=f?t.outerHeight:t.outerWidth}),a!==Ip&&a!==kp||(r=(a===kp?Mt.getFontCanvas():n).ctx);for(var d=a===Ip||a===kp?(n=vn.setFontStyle(i),r.font!==n&&(r.font=n),r.measureText(pp).width):Mt.measureTextSync(pp,i[Jd],i[Zd],i[Qd]),s=o.length-1;0<=s;s--){var l,p,h=o[s];if(!s||e+h.outerWidth>=d+1e-10){h instanceof Eo?h.parent.__backtrack(t,c,u,h,e,_,d,i,r,a,f):(l=new Lo(h.x+h.outerWidth+_,h.y,d,t),c.addItem(l,!0));break}h instanceof Eo?-1<(p=(l=h.parent).textBoxes.indexOf(h))&&l.textBoxes.splice(p,1):h.__layoutNone(),o.pop(),e+=f?h.outerHeight:h.outerWidth}}var Pp=function(){d(c,Y0);var n=p(c);function c(t,e,r){_(this,c);var i=l(e=n.call(this,t,e)).style,t=(i.display&&{flex:!0,block:!0,inline:!0,"inline-block":!0,inlineBlock:!0,none:!0}.hasOwnProperty(i.display)||(nd.INLINE.hasOwnProperty(e.tagName)?i.display="inline":i.display="block"),!i[Qd]&&nd.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),e.__style=vn.normalize(i,Pt.DOM_ENTRY_SET),e.__currentStyle=Op({},e.__style),e.__children=r||[],e.__flexLine=[],e.__ellipsis=null,e.__config);return t[ep]=e.__currentStyle,t[rp]=e.__style,e}return f(c,[{key:"__structure",value:function(r,i,t){var t=P(N(c.prototype),"__structure",this).call(this,r++,i,t),n=[t],e=this.__zIndexChildren=this.__zIndexChildren||Dp(this),a=(e.forEach(function(t,e){t=t.__structure(r,i+1,e);Array.isArray(t)?(r+=t.length,n=n.concat(t)):(r++,n.push(t))}),n.length-1);return t[cp]=e.length,t[_p]=a,n}},{key:"__modifyStruct",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=this.__config,i=r[ip],n=i[_p]||0,a=this.__structure(i[dp],i[up],i[fp]),o=((o=t.__structs).splice.apply(o,[i[dp]+e,n+1].concat(y(a))),0);return this!==t&&(o=((i=r[ip])[_p]||0)-n,(e=r[np].__config[ip])[_p]=e[_p]||0,e[_p]+=o),[i,o]}},{key:"__updateStruct",value:function(t){var e=this.__config[ip],r=e[dp],e=e[_p],c=void 0===e?0:e,e=this.__zIndexChildren=Dp(this);if(1!==e.length){e.forEach(function(t,e){t=t.__config[ip];t&&(t[fp]=e)});for(var u,i=[],n=[],a=r+1;a<=r+c;a++){var o,s=t[a];s&&(o={child:s,list:t.slice(s[dp],s[dp]+(s[_p]||0)+1)},i.push(o),n.push(o),a+=s[_p]||0)}i.sort(function(t,e){return t.child[fp]-e.child[fp]});for(var l,h=0,_=n.length;h<_;h++)if(n[h]!==i[h]){u=!0;break}u&&(l=[],i.forEach(function(t){l=l.concat(t.list)}),l.forEach(function(t,e){t[dp]=r+e+1}),t.splice.apply(t,[r+1,c].concat(y(l))))}}},{key:"__tryLayInline",value:function(t,e,r){this.__computeReflow();var i=this.flowChildren,n=this.currentStyle,a=n[yd],o=n[Dd],c=n[Ld],u=n[gd],_=n[vd],f=n[xd],d=n[md],p=n[Ed],y=n[Td],g=n[Ad],n=n[bd],s=this.computedStyle,x=s[Sd],v=s[Od],m=s[Md],s=s[Rd];if("inline"===a)i.length&&((a=(a=i[0])instanceof bl?a.shadowRoot:a)instanceof Y0?t=a.__tryLayInline(t,e,r):t-=a.firstCharWidth);else{if(o[1]!==yp)t-=r?this.__calSize(c,e,!0):this.__calSize(o,e,!0);else for(var l=0;l<i.length;l++){if(t<0)return t;var h=i[l];(h=h instanceof bl?h.shadowRoot:h)instanceof Y0?t=h.__tryLayInline(t,e,r):t-=h.textWidth}t=r?(t-=this.__calSize(d,e,!0))-this.__calSize(n,e,!0)-s:(t-=this.__calSize(_,e,!0))-this.__calSize(y,e,!0)-v}return t=r?(t-=this.__calSize(f,e,!0))-this.__calSize(g,e,!0)-m:(t-=this.__calSize(u,e,!0))-this.__calSize(p,e,!0)-x}},{key:"__offsetX",value:function(e,r,i){P(N(c.prototype),"__offsetX",this).call(this,e,r,i);var t=this.__ellipsis;t&&t.__offsetX(e,r),r&&!this.__config[ap]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){P(N(c.prototype),"__offsetY",this).call(this,e,r,i);var t=this.__ellipsis;t&&t.__offsetY(e,r),r&&!this.__config[ap]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calBasis",value:function(n,_,f,e,r){var d,p,y,g=this,t=(this.__computeReflow(),0),a=0,o=0,x=this.flowChildren,v=this.currentStyle,i=this.computedStyle,s=e.x,l=e.y,h=e.w,c=e.h,m=v[Pd],E=v[Fd],b=v[Dd],T=v[Ld],A=i[zd],M=i[yd],R=i[Vd],u=0===i[tp].indexOf("vertical"),b=n?b:T,T=E[1]===yp,O=-1<[gp,xp,vp,mp,Ep,bp,Tp].indexOf(E[1]),S=!T&&!O,C=(O?t=d=this.__calSize(E,n?h:c,!0):T&&-1<[gp,xp,vp,mp,Ep,bp,Tp].indexOf(b[1])?t=d=this.__calSize(b,n?h:c,!0):T&&(S=!0),0),I=0,R=R||0;return n?("flex"===M?(p=-1===["column","columnReverse"].indexOf(m),(x=Lp(x)).forEach(function(t){var e,r;t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0?(r=(e=Bt(t.__calBasis(n,_,f,{x:s,y:l,w:h,h:c},!1),3))[1],e=e[2],p?(a+=r,o+=e):(a=Math.max(a,r),o=Math.max(o,e))):(u&&(r=g.__lineBoxManager=new id(s,l,A,(u?Rp:Mp)(i),u),t.__layout({x:s,y:l,w:h,h:c,lineBoxManager:r,lineClamp:R,isUpright:u}),a+=t.width,o+=t.width),p?(a+=t.charWidth,o+=t.textWidth):(a=Math.max(a,t.charWidth),o=Math.max(o,t.textWidth)))})):u?(O=this.__lineBoxManager=new id(s,l,A,(u?Rp:Mp)(i),u),this.__layout({x:s,y:l,w:h,h:c,lineBoxManager:O,lineClamp:R,isUpright:u},_,!1,!0),a=o=t=this.width):(y=e.lineBoxManager,"inline"!==M&&(y=this.__lineBoxManager=new id(s,l,A,(u?Rp:Mp)(i),u)),x.forEach(function(t){var e,r,i;t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0?(e=(r=Bt(t.__calBasis(n,_,f,{x:s,y:l,w:h,h:c,lineBoxManager:y},!1),3))[1],r=r[2],"block"===(i=t.computedStyle[yd])||"flex"===i?(a=Math.max(a,e),o=Math.max(o,r),C=I=0):(C+=e,I+=r,a=Math.max(a,C),o=Math.max(o,I))):(C+=t.charWidth,I+=t.textWidth,a=Math.max(a,C),o=Math.max(o,I))})),d&&(o=Math.max(d,o)),S&&(t=o)):(this.__layout({x:s,y:l,w:h,h:c,isUpright:u},_,!0,!1),a=o=t=this.height),this.__addMBP(n,h,v,i,[t,a,o],r)}},{key:"__layoutNone",value:function(){P(N(c.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(t,C,I,w){var v,m,E,b,k,D,L,N,P,F,B,e,r,i,n,a,o,H=this,s=this.flowChildren,l=this.currentStyle,h=this.computedStyle,c=h[Nd],G=h[Xd],T=h[Vd],u=h[zd],Y=h[qd],_=this.__preLayout(t,!1),f=_.fixedWidth,d=_.fixedHeight,A=_.x,M=_.y,R=_.w,O=_.h,p=_.isParentVertical,S=_.isUpright;C&&(f&&!S||d&&S)?S?this.__ioSize(void 0,O):this.__ioSize(R,void 0):I&&d?this.__ioSize(void 0,O):w&&f?this.__ioSize(R,void 0):(T=T||0,v=0,m=this.__lineBoxManager=new id(A,M,u,(S?Rp:Mp)(h),S),b=E=0,k=A,D=M,L=[],N=[],P=s.length,s.forEach(function(t,c){var e=t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0,r=(e&&t.__computeReflow(),e&&"inline"===t.computedStyle[yd]),i=e&&"inlineBlock"===t.computedStyle[yd],n=r&&t.__isRealInline(),a=v;if(e&&!r&&!i||(L.length&&N.length&&((l=dd.getMergeMargin(N,L))&&(S?A+=l:M+=l)),N=[],L=[]),e)if(i||r)if(F||B)t.__layoutNone();else if(S&&M===D||!S&&A===k||!c||"nowrap"===G)v=t.__layout({x:A,y:M,w:R,h:O,lx:k,ly:D,lineBoxManager:m,lineClamp:T,lineClampCount:v,isUpright:S},C,I,w),t.__isIbFull&&v++,(S&&t.__isUprightIbFull||!S&&t.__isIbFull)&&"nowrap"!==G?(m.addItem(t,!0),S?(A+=t.outerWidth,M=D):(A=k,M+=t.outerHeight),m.setNotEnd()):(!i&&n||m.addItem(t,!1),A=m.lastX,M=m.lastY),!C&&"hidden"===Y&&"nowrap"===G&&(S&&O+1e-10<M-D||!S&&R+1e-10<A-k||a<v)?B=!0:T&&T<=v&&(F=!0),C&&("nowrap"===G?b+=S?t.outerHeight:t.outerWidth:(b=S?t.outerHeight:t.outerWidth,a<v&&(b=Math.max(b,S?O:R))),E=Math.max(E,b));else if(-1e-10<=t.__tryLayInline(S?O+D-M:R+k-A,S?O:R,S))v=t.__layout({x:A,y:M,w:R,h:O,lx:k,ly:D,lineBoxManager:m,lineClamp:T,lineClampCount:v,isUpright:S},C,I,w),!i&&n||m.addItem(t,!1),A=m.lastX,M=m.lastY,T&&T<=v&&(F=!0),C&&(E=(i||v===a?b+=S?t.outerHeight:t.outerWidth:(E=Math.max(E,S?O:R),b=S?M-D:A-k),Math.max(E,b)));else{if(v++,M=S?(A=m.endX,D):(A=k,m.endY),m.setNewLine(),T&&T<=v)return t.__layoutNone(),F=!0,e=(l=m.list)[l.length-1],void Np(H,m,e,S?O:R,0,S);v=t.__layout({x:A,y:M,w:R,h:O,lx:k,ly:D,lineBoxManager:m,lineClamp:T,lineClampCount:v,isUpright:S},C,I,w),t.__isIbFull||t.__isUprightIbFull?(m.addItem(t,!1),S?(A+=t.outerWidth,M=D):(A=k,M+=t.outerHeight),m.setNotEnd(),v++):(!i&&n||m.addItem(t,!1),A=m.lastX,M=m.lastY),T&&T<=v&&(F=!0),C&&(E=Math.max(E,b),E=Math.max(E,S?O:R),b=S?t.outerHeight:t.outerWidth,E=Math.max(E,b))}else{B=!1,(S&&D<M||!S&&k<A)&&v++,T&&T<=v&&(F=!0),S?M=D:A=k,m.isEnd&&(S?A=m.endX:M=m.endY,m.setNotEnd(),m.setNewLine()),t.__layout({x:A,y:M,w:R,h:O,isUpright:S},C,I,w);var u,_,f,d,p,o,s,y,l,g,h,x,r="none"===t.currentStyle[yd];!r&&t.flowChildren&&0===t.flowChildren.length&&(e=(l=t.computedStyle)[xd],i=l[vd],n=l[md],h=l[gd],x=l[Ad],s=l[Td],_=l[bd],o=l[Ed],y=l[Dd],f=l[Ld],d=l[Md],g=l[Od],p=l[Rd],l=l[Sd],S&&o<=0&&s<=0&&y<=0&&l<=0&&g<=0?(L.push(i),N.push(h),u=!0):!S&&x<=0&&_<=0&&f<=0&&d<=0&&p<=0&&(L.push(n),N.push(e),u=!0)),S?(A+=t.outerWidth,m.__lastX=A):(M+=t.outerHeight,m.__lastY=M),C&&(E=Math.max(E,S?t.outerHeight:t.outerWidth),b=0),r||u?c!==P-1||(o=dd.getMergeMargin(N,L))&&(S?A+=o:M+=o):(y=(s=t.computedStyle)[xd],l=s[vd],g=s[md],i=s[gd],L.length&&(S?(N.push(i),(h=dd.getMergeMargin(N,L))&&(t.__offsetX(h,!0),A+=h)):(N.push(y),(x=dd.getMergeMargin(N,L))&&(t.__offsetY(x,!0),M+=x))),N=[],L=[S?l:g])}else if(F||B)t.__layoutNone();else if(S&&M===D||!S&&A===k||!c||"nowrap"===G)v=t.__layout({x:A,y:M,w:R,h:O,lx:k,ly:D,lineBoxManager:m,lineClamp:T,lineClampCount:v,isUpright:S}),A=m.lastX,M=m.lastY,!C&&"hidden"===Y&&"nowrap"===G&&(S&&O+1e-10<M-D||!S&&R+1e-10<A-k||a<v)?B=!0:T&&T<=v&&(F=!0),C&&("nowrap"===G?b+=S?t.height:t.width:(b=S?t.height:t.width,a<v&&(b=Math.max(b,S?O:R))),E=Math.max(E,b));else if(-1e-10<=t.__tryLayInline(S?O+D-M:R+k-A))v=t.__layout({x:A,y:M,w:R,h:O,lx:k,ly:D,lineBoxManager:m,lineClamp:T,lineClampCount:v,isUpright:S}),A=m.lastX,M=m.lastY,T&&T<=v&&(F=!0),C&&(E=(v===a?b+=S?t.height:t.width:(E=Math.max(E,S?O:R),b=S?M-D:A-k),Math.max(E,b)));else{if(v++,M=S?(A=m.endX,D):(A=k,m.endY),m.setNewLine(),T&&T<=v)return t.__layoutNone(),F=!0,f=(_=m.list)[_.length-1],void Np(H,m,f,S?O:R,0,S);v=t.__layout({x:A,y:M,w:R,h:O,lx:k,ly:D,lineBoxManager:m,lineClamp:T,lineClampCount:v,isUpright:S}),A=m.lastX,M=m.lastY,T&&T<=v&&(F=!0),C&&(E=Math.max(E,b),E=Math.max(E,S?O:R),b=S?t.height:t.width,E=Math.max(E,b))}}),m.isEnd&&(S?A=m.endX:M=m.endY),o=a=0,a=f||!C&&!p&&!S?R:!C||S?A-t.x:E,o=d||!C&&p&&S?O:C&&S?E:M-t.y,this.__ioSize(a,o),C||((_=m.verticalAlign(S))&&(S&&!f?this.__resizeX(_):S||d||this.__resizeY(_),e=0,r=m.spreadList,n=i=!1,s.forEach(function(t){(t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0)&&-1<["block","flex"].indexOf(t.computedStyle[yd])?n&&(i=!0,S?t.__offsetX(r[e],!0):t.__offsetY(r[e],!0)):(i&&e++,i=!(n=!0))})),I||w||(-1<["center","right"].indexOf(c)&&(m.horizonAlign(S?o:a,c,S),s.forEach(function(t){(t=t instanceof bl?t.shadowRoot:t)instanceof Ks&&t.__inlineSize(S)})),m.domList.forEach(function(t){t.__inlineSize(S?o:a,c,S)}),this.__marginAuto(l,t,S))))}},{key:"__layoutFlex",value:function(i,_,f,d){var p=this,e=this.flowChildren,y=this.currentStyle,s=this.computedStyle,n=this.__flexLine,g=s[Pd],x=s[Wd],v=s[Yd],m=s[Vd],E=s[jd],b=s[$d],T=s[zd],A=s[Nd],t=this.__preLayout(i,!1),M=t.fixedWidth,R=t.fixedHeight,O=t.x,S=t.y,l=t.w,h=t.h,C=t.isParentVertical,c=t.isUpright;if(_&&(M&&!c||R&&c))c?this.__ioSize(void 0,h):this.__ioSize(l,void 0);else if(f&&R)this.__ioSize(void 0,h);else if(d&&M)this.__ioSize(l,void 0);else{n.splice(0);var r,m=m||0,u=-1===["column","columnReverse"].indexOf(g),I=[],w=[],k=[],D=[],L=[],N=Lp(e),P=(N.forEach(function(t){var e,r,i,n,a,o;t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0?(a=t.currentStyle,i=t.computedStyle,o=(r=Bt(t.__calBasis(u,_,f,{x:O,y:S,w:l,h:h},!0),3))[0],e=r[1],r=r[2],n=a[Hd],a=a[Bd],i[Fd]=o,I.push(n),w.push(a),k.push(o),D.push(r),L.push(e)):(I.push(0),w.push(1),u&&c||!u&&!c?(i=new id(O,S,T,(c?Rp:Mp)(s),c),t.__layout({x:O,y:S,w:l,h:h,lineBoxManager:i,lineClamp:m,lineClampCount:0,isUpright:c},_,f,d),n=c?t.width:t.height,k.push(n),D.push(n),L.push(n)):(a=t.charWidth,o=t.textWidth,k.push(o),D.push(o),L.push(a)))}),u?l:h),F=-1<["wrap","wrapReverse"].indexOf(E),a=[],B=0,H=[],o=(k.forEach(function(t,e){var r=L[e],i=D[e],r=t<r?r:i<t?i:t;H.push(r),F?P<B+r?B=B?(n.push(a),a=[N[e]],r):(a.push(N[e]),n.push(a),a=[],0):(a.push(N[e]),B+=r):a.push(N[e])}),a.length&&n.push(a),0),G={x:O,y:S,w:l,h:h},Y=[],W=[],U=[];if(n.forEach(function(t){var e=t.length,r=o+e,t=Bt(p.__layoutFlexLine(G,u,_,f,d,c,P,M,R,m,0,T,s,x,v,N.slice(o,r),t,A,I.slice(o,r),w.slice(o,r),k.slice(o,r),H.slice(o,r),L.slice(o,r),D.slice(o,r)),5),r=t[0],i=t[1],n=t[2],a=t[3],t=t[4];u?G.y=i:G.x=r,O=Math.max(O,r),S=Math.max(S,i),Y.push(n),W.push(a),U.push(t),o+=e}),_)return r=0,n.forEach(function(t){var e=0;t.forEach(function(t){u?e+=c?t.outerHeight:t.outerWidth:e=Math.max(e,c?t.outerHeight:t.outerWidth),t instanceof Ks&&(c?t.textWidth>h&&(r=Math.max(r,h)):t.textWidth>l&&(r=Math.max(r,l)))}),r=Math.max(r,e)}),void(c?this.__ioSize(void 0,r):this.__ioSize(r,void 0));var X=0,z=0,X=M||!_&&!C&&!c?l:O-i.x,z=R||!_&&C&&c?h:S-i.y;if(this.__ioSize(X,z),!f&&!d){"rowReverse"===g?n.forEach(function(t){t.forEach(function(t){var e=X-t.outerWidth-2*(t.x-i.x);e&&t.__offsetX(e,!0)})}):"columnReverse"===g&&n.forEach(function(t){t.forEach(function(t){var e=z-t.outerHeight-2*(t.y-i.y);e&&t.__offsetY(e,!0)})});var V,K,j,$,q,t=n.length;if("wrapReverse"===E&&1<t){for(var Z=0,J=[],Q=(Y.forEach(function(t){J.push(Z),Z+=t}),0),tt=t-1;0<=tt;tt--)!function(t){var e=n[t],r=J[t],i=Q-r;i&&e.forEach(function(t){u?t.__offsetY(i,!0):t.__offsetX(i,!0)}),Q+=Y[t]}(tt);n.reverse()}1<t&&(R&&u||!u)&&(0<(K=u?z-(S-i.y):X-(O-i.x))&&("center"===b?(j=.5*K,N.forEach(function(t){u?t.__offsetY(j,!0):t.__offsetX(j,!0)})):"flexStart"===b||("flexEnd"===b?N.forEach(function(t){u?t.__offsetY(K,!0):t.__offsetX(K,!0)}):"spaceBetween"===b?($=K/(t-1),n.forEach(function(t,e){e&&t.forEach(function(t){u?t.__offsetY($,!0):t.__offsetX($,!0)})})):"spaceAround"===b?(q=K/(t+1),n.forEach(function(t,e){t.forEach(function(t){u?t.__offsetY(q*(e+1),!0):t.__offsetX(q*(e+1),!0)})})):(V=K/t,n.forEach(function(t,e){e&&t.forEach(function(t){u?t.__offsetY(V*e,!0):t.__offsetX(V*e,!0)})}))))),f||d||(1<t?n.forEach(function(t,e){var r=Y[e];V&&(r+=V),p.__flexAlign(t,v,x,u,r,W[e],U[e])}):t&&(e=u?z:X,this.__flexAlign(n[0],v,x,u,e,W[0],U[0])),this.__marginAuto(y,i,c))}}}},{key:"__layoutFlexLine",value:function(t,a,f,o,s,l,e,r,d,p,y,g,x,v,m,E,b,T,A,M,i,R,O,S){var C=this,h=t.x,c=t.y,I=t.w,w=t.h,k=0,D=(R.forEach(function(t){k+=t}),e<=k),u=[],n=(i.forEach(function(t,e){D?(!M[e]||i[e]<R[e])&&(u[e]=R[e]):(!A[e]||i[e]>R[e])&&(u[e]=R[e])}),0),t=(i.forEach(function(t,e){void 0!==u[e]?n+=u[e]:n+=t}),1/0),t=a?I:d?w:n,n=Math.abs(t-n),L=0,_=0;if(D)for(var N=M.map(function(t,e){if(void 0===u[e])return _+=t,t});0!==_;){_<1&&(L+=n*(1-_),n*=_);var P=void 0,F=0,B=0,H=0;if(N.forEach(function(t,e){var r;t&&(r=t/_*n,(r=i[e]-r)<O[e]?(u[e]=O[e],N[e]=0,P=!0,B+=i[e]-O[e]):(u[e]=r,F+=t,H+=r))}),!P){n-=H;break}n-=B,_=F}else for(var G=A.map(function(t,e){if(void 0===u[e])return _+=t,t});0!==_;){_<1&&(L+=n*(1-_),n*=_);var Y=void 0,W=0,U=0,X=0;if(G.forEach(function(t,e){var r;t&&(r=t/_*n,(r=i[e]+r)<O[e]?(u[e]=O[e],G[e]=0,Y=!0,U+=i[e]-O[e]):(u[e]=r,W+=t,X+=r))}),!Y){n-=X;break}n-=U,_=W}var z=0,V=[],K=0;return E.forEach(function(t,e){var r,i,n,e=u[e];t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0?(a?t.__layout({x:h,y:c,w:e,h:w,w3:e,isUpright:l},f,o,s):(n=(i=t.currentStyle)[Gd],i=i[Dd],f||o||s||(r=i[1]!==yp||"stretch"===n||"auto"===n&&"stretch"===m||r)?t.__layout({x:h,y:c,w:I,h:e,h3:e,isUpright:l},f,o,s):(t.__layout({x:h,y:c,w:I,h:e,h3:e,isUpright:l},!0,o,s),t.__layout({x:h,y:c,w:I,w3:t.outerWidth,h:e,h3:e,isUpright:l},f,o,s))),f||o||s||(i=t.currentStyle,a?(i[gd][1]===yp&&K++,i[vd][1]===yp&&K++):(i[xd][1]===yp&&K++,i[md][1]===yp&&K++))):(n=C.__lineBoxManager=new id(h,c,g,(l?Rp:Mp)(x),l),V.push(n),t.__layout({x:h,y:c,w:a?e:I,h:a?w:e,lineBoxManager:n,lineClamp:p,lineClampCount:y,isUpright:l})),z=a?(h+=t.outerWidth,Math.max(z,t.outerHeight)):(c+=t.outerHeight,Math.max(z,t.outerWidth))}),a?c+=z:h+=z,!f&&!o&&!s&&-1<["center","right"].indexOf(T)&&V.forEach(function(t){t.horizonAlign(l?t.height:t.width,T,l)}),[h,c,z,K,D?0:Math.max(0,n+L)]}},{key:"__flexAlign",value:function(t,c,e,u,_,o,r){var f=0,i=(t.forEach(function(t){f=Math.max(f,t.firstBaseline)}),t.length);if(o)for(var n=0,s=r/o,l=0;l<i;l++){var a=t[l],h=a.currentStyle;u?(h[gd][1]===yp?(n+=s,a.__offsetX(n,!0)):n&&a.__offsetX(n,!0),h[vd][1]===yp&&(n+=s)):(h[xd][1]===yp?(n+=s,a.__offsetY(n,!0)):n&&a.__offsetY(n,!0),h[md][1]===yp&&(n+=s))}else if("flexEnd"===e)for(var d=0;d<i;d++){var p=t[d];u?p.__offsetX(r,!0):p.__offsetY(r,!0)}else if("center"===e)for(var y=.5*r,g=0;g<i;g++){var x=t[g];u?x.__offsetX(y,!0):x.__offsetY(y,!0)}else if("spaceBetween"===e)for(var v=r/(i-1),m=1;m<i;m++){var E=t[m];u?E.__offsetX(v*m,!0):E.__offsetY(v*m,!0)}else if("spaceAround"===e)for(var b=.5*r/i,T=0;T<i;T++){var A=t[T];u?A.__offsetX(b*(2*T+1),!0):A.__offsetY(b*(2*T+1),!0)}else if("spaceEvenly"===e)for(var M=r/(i+1),R=0;R<i;R++){var O=t[R];u?O.__offsetX(M*(R+1),!0):O.__offsetY(M*(R+1),!0)}t.forEach(function(t){var e,r,i,n,a,o,s,l,h=t.currentStyle[Gd];u?"flexStart"===h||("flexEnd"===h?0!=(i=_-t.outerHeight)&&t.__offsetY(i,!0):"center"===h?0!=(i=_-t.outerHeight)&&t.__offsetY(.5*i,!0):"stretch"===h?(i=t.computedStyle,n=t.currentStyle[Ld],o=i[Md],s=i[Rd],a=i[xd],l=i[md],r=i[Ad],e=i[bd],n[1]===yp&&(n=t.height,i=(t.__height=i[Ld]=_-a-l-r-e-o-s)-n,t.__sy4+=i,t.__sy5+=i,t.__sy6+=i,t.__height+=i,t.__clientHeight+=i,t.__offsetHeight+=i,t.__outerHeight+=i)):"baseline"===h?0!=(a=f-t.firstBaseline)&&t.__offsetY(a,!0):"flexStart"===c||("center"===c?0!=(l=_-t.outerHeight)&&t.__offsetY(.5*l,!0):"flexEnd"===c?0!=(r=_-t.outerHeight)&&t.__offsetY(r,!0):"baseline"===c?0!=(e=f-t.firstBaseline)&&t.__offsetY(e,!0):(o=t.computedStyle,n=(s=t.currentStyle)[yd],i=s[Pd],a=s[Ld],u&&"flex"===n&&"column"===i&&a[1]===yp&&t.outerHeight<_&&t.__layout(Object.assign(t.__layoutData,{h3:_})),l=o[Md],r=o[Rd],e=o[xd],s=o[md],n=o[Ad],i=o[bd],a[1]===yp&&(o=t.height,t.__sy4+=a=_-e-s-n-i-l-r-o,t.__sy5+=a,t.__sy6+=a,t.__height+=a,t.__clientHeight+=a,t.__offsetHeight+=a,t.__outerHeight+=a)))):"flexStart"===h||("flexEnd"===h?0!=(e=_-t.outerWidth)&&t.__offsetX(e,!0):"center"===h?0!=(s=_-t.outerWidth)&&t.__offsetX(.5*s,!0):"stretch"===h?(n=t.computedStyle,i=t.currentStyle[Dd],l=n[Od],r=n[Sd],o=n[vd],a=n[gd],e=n[Td],s=n[Ed],i[1]===yp&&(h=t.width,i=(t.__width=n[Dd]=_-a-o-s-e-l-r)-h,t.__sx4+=i,t.__sx5+=i,t.__sx6+=i,t.__width+=i,t.__clientWidth+=i,t.__offsetWidth+=i,t.__outerWidth+=i)):"baseline"===c?0!=(n=f-t.firstBaseline)&&t.__offsetX(n,!0):"flexStart"===c||("center"===c?0!=(a=_-t.outerWidth)&&t.__offsetX(.5*a,!0):"flexEnd"===c?0!=(o=_-t.outerWidth)&&t.__offsetX(o,!0):"baseline"===c?0!=(s=f-t.firstBaseline)&&t.__offsetX(s,!0):(e=t.computedStyle,l=t.currentStyle[Dd],r=e[Od],h=e[Sd],i=e[vd],n=e[gd],a=e[Td],o=e[Ed],l[1]===yp&&(s=t.width,l=(t.__width=e[Dd]=_-n-i-o-a-r-h)-s,t.__sx4+=l,t.__sx5+=l,t.__sx6+=l,t.__width+=l,t.__clientWidth+=l,t.__offsetWidth+=l,t.__outerWidth+=l))))})}},{key:"__layoutInline",value:function(e,y,g,x,v){var r=this.flowChildren,i=this.currentStyle,t=this.computedStyle,n=t[Nd],m=t[Xd],s=t[Vd],a=t[zd],o=t[xd],E=t[md],b=t[gd],T=t[vd],A=t[Md],M=t[Rd],R=t[Sd],O=t[Od],S=t[Ad],C=t[bd],I=t[Ed],w=t[Td],l=e.lineClampCount||0,k=this.__preLayout(e,v),D=k.fixedWidth,L=k.fixedHeight,h=k.x,c=k.y,u=k.w,_=k.h,f=k.lx,N=k.ly,d=k.lineBoxManager,P=k.endSpace,F=k.selfEndSpace,p=k.isUpright;if(y&&(D&&!p||L&&p))return p?this.__ioSize(void 0,_):this.__ioSize(u,void 0),l;var B=i[Dd],H=i[Ld];if(!(v=v&&!this.__isRealInline()?!1:v)){if(g&&L)return this.__ioSize(void 0,_),l;if(x&&D)return this.__ioSize(u,void 0),l}v?(this.__config[ap]=!0,this.__lineBoxManager=d,k=(p?Rp:Mp)(t),(p&&(o||E||S||C||A||M)||!p&&(b||T||I||w||R||O))&&d.isNewLine?d.genLineBoxByInlineIfNewLine(h,c,a,k):d.setLbByInlineIfNotNewLine(a,k),s=e.lineClamp||0):(d=this.__lineBoxManager=new id(h,c,a,(p?Rp:Mp)(t),p),f=h,N=c,P=F=l=0),v&&(this.contentBoxList.splice(0),d.pushContentBoxList(this));for(var G=this;"inline"===G.computedStyle[yd];)G=G.domParent;var Y,W,U,X=G.computedStyle[qd],z=!1,V=!1,K=r.length,j=!1,$=!1;return r.forEach(function(t,e){if(j||$)t.__layoutNone();else{var r=t instanceof Y0||t instanceof bl&&t.shadowRoot instanceof Y0,i=(r&&t.__computeReflow(),r&&"inline"===t.computedStyle[yd]),n=r&&"inlineBlock"===t.computedStyle[yd],a=i&&t.__isRealInline(),o=(v&&!Y&&("nowrap"===m||!r&&e===K-1||s&&e===K-1||l===s-1)&&(Y=!0,P+=F),l);if(r)if(i||n||(t.currentStyle[yd]=t.computedStyle[yd]="inlineBlock",n=!0,Mt.warn("Inline can not contain block/flex")),p&&c===N||!p&&h===f||!e||"nowrap"===m)l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:N,lineBoxManager:d,endSpace:P,lineClamp:s,lineClampCount:l,isUpright:p},y,g,x),(t.__isIbFull||t.__isUprightIbFull)&&l++,t.__isIbFull&&"nowrap"!==m?(p&&_[1]===yp?V=!0:p||u[1]!==yp||(z=!0),d.addItem(t,!0),p?(h+=t.outerWidth,c=N):(h=f,c+=t.outerHeight),d.setNotEnd()):(!n&&a||d.addItem(t,!1),h=d.lastX,c=d.lastY),!y&&"hidden"===X&&"nowrap"===m&&(p&&_+1e-10<c-N||!p&&u+1e-10<h-f||o<l)?$=!0:s&&s<=l&&(j=!0);else if(-1e-10<=t.__tryLayInline(p?_+N-c-P:u+f-h-P,p?_:u,p))l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:N,lineBoxManager:d,endSpace:P,lineClamp:s,lineClampCount:l,isUpright:p},y,g,x),!n&&a||d.addItem(t,!1),h=d.lastX,c=d.lastY,s&&s<=l&&(j=!0);else{if(l++,c=p?(h=d.endX,N):(h=f,d.endY),d.setNewLine(),s&&s<=l)return t.__layoutNone(),j=!0,i=(r=d.list)[r.length-1],void Np(G,d,i,u,P,p);l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:N,lineBoxManager:d,endSpace:P,lineClamp:s,lineClampCount:l,isUpright:p},y,g,x),t.__isIbFull||t.__isUprightIbFull?(d.addItem(t,!0),p?(h+=t.outerWidth,c=N):(h=f,c+=t.outerHeight),d.setNotEnd(),l++):(!n&&a||d.addItem(t,!1),h=d.lastX,c=d.lastY),s&&s<=l&&(j=!0)}else{r=d.size;if(p&&c===N||!p&&h===f||!e||"nowrap"===m)l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:N,lineBoxManager:d,endSpace:P,lineClamp:s,lineClampCount:l,isUpright:p},y,g,x),h=d.lastX,c=d.lastY,!v&&1<d.size-r&&(H[1]===yp&&p&&(V=!0),B[1]!==yp||p||(z=!0)),!y&&"hidden"===X&&"nowrap"===m&&(p&&_+1e-10<c-N||!p&&u+1e-10<h-f||o<l)?$=!0:s&&s<=l&&(j=!0);else if(-1e-10<=t.__tryLayInline(p?_+N-c-P:u+f-h-P))l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:N,lineBoxManager:d,endSpace:P,lineClamp:s,lineClampCount:l,isUpright:p},y,g,x),h=d.lastX,c=d.lastY,s&&s<=l&&(j=!0);else{if(l++,c=p?(h=d.endX,N):(h=f,d.endY),d.setNewLine(),s&&s<=l)return t.__layoutNone(),j=!0,n=(i=d.list)[i.length-1],void Np(G,d,n,u,P,p);l=t.__layout({x:h,y:c,w:u,h:_,lx:f,ly:N,lineBoxManager:d,endSpace:P,lineClamp:s,lineClampCount:l,isUpright:p},y,g,x),h=d.lastX,c=d.lastY,!v&&1<d.size-r&&(H[1]===yp&&p&&(V=!0),B[1]!==yp||p||(z=!0)),s&&s<=l&&(j=!0)}}}}),p?h=d.endX:c=d.endY,this.__isIbFull=z,this.__isUprightIbFull=V,v?(F&&(p?d.addY(F):d.addX(F)),r.length||(i=t[xd],o=t[gd],E=t[Ad],S=t[Ed],C=t[Md],A=t[Sd],p?d.addY(i+E+C):d.addX(o+S+A)),d.popContentBoxList(),y&&this.__inlineSize(0,"left",p)):(M=d.max-(p?e.y:e.x),U=p?(W=D?u:h-e.x,L?_:z?Math.max(_,M):M):(W=D?u:z?Math.max(u,M):M,L?_:c-e.y),this.__ioSize(W,U)),y||v||((b=d.verticalAlign(p))&&(p&&!D?this.__resizeX(b):p||L||this.__resizeY(b)),g||x||(-1<["center","right"].indexOf(n)&&(d.horizonAlign(p?U:W,n,p),r.forEach(function(t){(t=t instanceof bl?t.shadowRoot:t)instanceof Ks&&t.__inlineSize(p)})),d.domList.forEach(function(t){t.__inlineSize(p?U:W,n,p)}))),l}},{key:"__inlineSize",value:function(c,u,_){var r,f,i,d,n,a,p,y,o,g,x,v,m,E,b,T,A,M=this.contentBoxList,t=this.computedStyle,e=this.__ox,s=this.__oy,R=t[yd],O=t[xd],S=t[vd],C=t[md],I=t[gd],w=t[Ad],l=t[Td],h=t[bd],k=t[Ed],D=t[Md],L=t[Od],N=t[Rd],P=t[Sd],F=t[zd];"none"!==R&&((A=M.length)?(M.forEach(function(t,e){e?(i=Math.min(i,t.x),p=Math.min(p,t.x),x=Math.min(x,t.x),b=Math.min(b,t.x),e===A-1?(r=n=o=m=Math.max(r,t.x+t.outerWidth),f=a=g=E=Math.max(f,t.y+t.outerHeight),n+=l,a+=h,o+=l+L,g+=h+N,m+=L+l+S,E+=N+h+C):r=n=o=m=Math.max(r,t.x+t.outerWidth)):(i=t.x,d=t.y,b=(x=(p=i-k)-P)-I,T=(v=(y=d-w)-D)-O,r=n=o=m=t.x+t.outerWidth,f=a=g=E=t.y+t.outerHeight,e===A-1&&(n+=l,a+=h,o+=l+L,g+=h+N,m+=L+l+S,E+=N+h+C))}),this.__x=b,this.__y=T,this.__width=t[Dd]=r-i,this.__height=t[Ld]=Math.max(F,f-d),this.__clientWidth=n-p,this.__clientHeight=a-y,this.__offsetWidth=o-x,this.__offsetHeight=g-v,this.__outerWidth=m-b,this.__outerHeight=E-T,this.__sx=b+e,this.__sy=T+s,this.__sx1=x+e,this.__sy1=v+s,this.__sx2=p+e,this.__sy2=y+s,this.__sx3=i+e,this.__sy3=d+s,this.__sx4=r+e,this.__sy4=f+s,this.__sx5=n+e,this.__sy5=a+s,this.__sx6=o+e,this.__sy6=g+s,-1<["center","right"].indexOf(u)&&this.children.forEach(function(t){t instanceof Ks&&t.__inlineSize(_)})):(M=R=0,-1<["center","right"].indexOf(u)&&(t=c,"center"===u&&(t*=.5),0<t&&(_?this.__offsetY(t,!0):this.__offsetX(t,!0))),_?(this.__ioSize(R=F,0),this.__sx-=I+k+P):(this.__ioSize(0,M=F),this.__sy-=O+w+D),this.__sx1=this.__sx+I,this.__sy1=this.__sy+O,this.__sx2=this.__sx1+P,this.__sy2=this.__sy1+D,this.__sx4=this.__sx3=this.__sx2+k,this.__sy4=this.__sy3=this.__sy2+w,this.__sx5=this.__sx4+R+l,this.__sy5=this.__sy4+M+h,this.__sx6=this.__sx5+L,this.__sy6=this.__sy5+N,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+I+S,this.__outerHeight=this.__offsetHeight+O+C))}},{key:"__layoutAbs",value:function(r,v,m){var E=this,b=r.sx,T=r.sy,A=r.clientWidth,M=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,i=this.children,n=this.absChildren,a=t[yd],o=t[Md],s=t[Sd],l=t[xd],h=t[gd],R=t[Ed],O=t[Ad];e||"none"===a?this.__layoutNone():(b+=h+s,T+=l+o,n.forEach(function(t){if(m){var e=t;if(t instanceof bl&&(e=t.shadowRoot),m!==e&&m!==t)return}var e=t.currentStyle,r=t.computedStyle;if(t.isDestroyed||"none"===e[yd])t.__layoutNone();else{t.__computeReflow(),t.__mp(e,r,A);var i,n,a,c,u,_,f,d,p,o=e[kd],y=e[Cd],g=e[Id],x=e[wd],s=e[Dd],e=e[Ld];if(o[1]!==yp?r[kd]=E.__calSize(o,A,p=!0):r[kd]="auto",g[1]!==yp?r[Id]=E.__calSize(g,A,f=!0):r[Id]="auto",y[1]!==yp?r[Cd]=E.__calSize(y,M,_=!0):r[Cd]="auto",x[1]!==yp?r[wd]=E.__calSize(x,M,d=!0):r[wd]="auto",p&&f?(i=b+r[kd],n=A-r[Id]-r[kd]):p?(i=b+r[kd],s[1]!==yp&&(n=E.__calSize(s,A,!0))):f?(s[1]!==yp?n=E.__calSize(s,A,!0):c=!0,i=b+A-r[Id]-(n||0),i=(i=(i=(i=(i=(i-=r[gd])-r[vd])-r[Ed])-r[Td])-r[Sd])-r[Od]):(i=b+R,s[1]!==yp&&(n=E.__calSize(s,A,!0))),_&&d)l=T+r[Cd],a=M-r[Cd]-r[wd];else if(_)l=T+r[Cd],e[1]!==yp&&(a=E.__calSize(e,M,!0));else if(d)e[1]!==yp?a=E.__calSize(e,M,!0):u=!0,l=T+M-r[wd]-(a||0),l=(l=(l=(l=(l=(l-=r[xd])-r[md])-r[Ad])-r[bd])-r[Md])-r[Rd];else{for(var l=T+O,h=t.prev;h;){if(h instanceof Ks||"absolute"!==h.computedStyle[pd]){l=h.y+h.outerHeight;break}h=h.prev}e[1]!==yp&&(a=E.__calSize(e,M,!0))}o=c?i-b:A+b-i,g=u?l-T:M+T-l;void 0===n&&(t.__layout({x:i,y:l,w:o,h:g,isUpright:v.isUpright},!0,!1),o=t.outerWidth),t.__layout({x:i,y:l,w:o,h:g,w2:n,h2:a,isUpright:v.isUpright},!1,!1),c&&t.__offsetX(-t.outerWidth,!0),u&&t.__offsetY(-t.outerHeight,!0)}}),i.forEach(function(t){if(m){var e=t;if(t instanceof bl&&(e=t.shadowRoot),m!==e&&m!==t)return}t instanceof c?t.__layoutAbs(Ap(t)?t:r,v):t instanceof bl&&((e=t.shadowRoot)instanceof c&&e.__layoutAbs(e,v))}),this.__execAr())}},{key:"render",value:function(t,e,r,i,n,a){var r=P(N(c.prototype),"render",this).call(this,t,e,r,i,n,a),o=this.__ellipsis;return o&&o.render(t,e,r.ctx,i,n,a),t===wp&&(this.virtualDom.type="dom"),r}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),this.__ellipsis&&this.__ellipsis.__destroy(),P(N(c.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return P(N(c.prototype),"__emitEvent",this).call(this,t,e);var e=this.isDestroyed,r=this.computedStyle,i=this.isMask;if(!(e||"none"===r[yd]||t.__stopPropagation||i)&&("hidden"!==r[qd]||this.willResponseEvent(t,!0))){var n,e=t.event.type,i=this.listener,a=this.zIndexChildren;i.hasOwnProperty(e)&&(n=i[e]);for(var o=a.length-1;0<=o;o--){var s=a[o];if((s instanceof Y0||s instanceof bl&&s.shadowRoot instanceof Y0)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(Cp(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0)}return P(N(c.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){P(N(c.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(e,r){var i=this;if(!Sp(e)&&!i.isDestroyed){var n,a=i.root,t=i.host;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in appendChild.");e.vd&&(a.delRefreshTask(e.vd.__task),e.vd.remove()),n=k.TYPE_CP===e.$$type?dl.initCp2(e,a,t,i):dl.initDom(e,a,t,i),a.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.push(e);var t=i.children.length,t=(t&&(((t=i.children[t-1]).__next=n).__prev=t),i.children.push(n),i.__zIndexChildren=null,{});t[op]=n,t[sp]=es.REFLOW,t[lp]=!0,t[hp]=n.__config,a.__addUpdate(n,n.__config,a,a.__config,t)},__after:function(t){Cp(r)&&r.call(n,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!Sp(e)&&!i.isDestroyed){var n,a=i.root,t=i.host;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(a.delRefreshTask(e.vd.__task),e.vd.remove()),n=k.TYPE_CP===e.$$type?dl.initCp2(e,a,t,i):dl.initDom(e,a,t,i),a.addRefreshTask(n.__task={__before:function(){n.__task=null,i.__json.children.unshift(e);i.children.length&&(((t=i.children[0]).__prev=n).__next=t),i.children.unshift(n),i.__zIndexChildren=null;var t={};t[op]=n,t[sp]=es.REFLOW,t[lp]=!0,t[hp]=n.__config,a.__addUpdate(n,n.__config,a,a.__config,t)},__after:function(t){Cp(r)&&r.call(n,t)}})}}},{key:"insertBefore",value:function(o,e){var s=this;if(!Sp(o)&&!s.isDestroyed&&s.domParent){var l,h=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(o.$$type)))throw new Error("Invalid parameter in insertBefore.");o.vd&&(h.delRefreshTask(o.vd.__task),o.vd.remove()),l=k.TYPE_CP===o.$$type?dl.initCp2(o,h,t,c):dl.initDom(o,h,t,c),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,o),l.__next=s,l.__prev=s.__prev,s.__prev=l,c.children.splice(e,0,l)):(i&&(((a=c.children[0]).__prev=l).__next=a),r.unshift(o),c.children.unshift(l)),c.__zIndexChildren=null;var a={};a[op]=l,a[sp]=es.REFLOW,a[lp]=!0,a[hp]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,a)},__after:function(t){Cp(e)&&e.call(l,t)}})}}},{key:"insertAfter",value:function(o,e){var s=this;if(!Sp(o)&&!s.isDestroyed&&s.domParent){var l,h=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[k.TYPE_VD,k.TYPE_GM,k.TYPE_CP].indexOf(o.$$type)))throw new Error("Invalid parameter in insertAfter.");o.vd&&(h.delRefreshTask(o.vd.__task),o.vd.remove()),l=k.TYPE_CP===o.$$type?dl.initCp2(o,h,t,c):dl.initDom(o,h,t,c),h.addRefreshTask(l.__task={__before:function(){l.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,n=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===n){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,o),l.__prev=s,l.__next=s.__next,s.__next=l,c.children.splice(e+1,0,l)):(i&&(((a=c.children[i-1]).__next=l).__prev=a),r.push(o),c.children.push(l)),c.__zIndexChildren=null;var a={};a[op]=l,a[sp]=es.REFLOW,a[lp]=!0,a[hp]=l.__config,h.__addUpdate(l,l.__config,h,h.__config,a)},__after:function(t){Cp(e)&&e.call(l,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof Y0||t instanceof bl))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return Mt.warn("Remove parent is destroyed."),void(Cp(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof bl?t.shadowRoot:t)instanceof Ks||"absolute"!==t.currentStyle[pd]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof bl?t.shadowRoot:t)instanceof Y0&&"absolute"===t.currentStyle[pd]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseline",get:function(){var t=this.computedStyle,e=t[xd],r=t[Md],i=t[Ad],t=t[tp];return this.lineBoxManager&&this.lineBoxManager.size&&0!==t.indexOf("vertical")?e+r+i+this.lineBoxManager.baseline:this.offsetHeight}},{key:"firstBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[xd]+t[Md]+t[Ad]+this.lineBoxManager.firstBaseline}},{key:"verticalBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return 0;var t=this.computedStyle,e=t[gd],r=t[Sd],i=t[Ed],t=t[tp];return this.lineBoxManager&&this.lineBoxManager.size&&-1!==t.indexOf("vertical")?e+r+i+this.lineBoxManager.verticalBaseline:0}}]),c}(),e=T.STYLE_KEY,Fp=e.WIDTH,Bp=e.HEIGHT,Hp=e.DISPLAY,Gp=e.BORDER_TOP_WIDTH,Yp=e.BORDER_RIGHT_WIDTH,Wp=e.BORDER_LEFT_WIDTH,Up=e.BORDER_BOTTOM_WIDTH,Xp=e.BORDER_TOP_LEFT_RADIUS,zp=e.BORDER_TOP_RIGHT_RADIUS,Vp=e.BORDER_BOTTOM_RIGHT_RADIUS,Kp=e.BORDER_BOTTOM_LEFT_RADIUS,jp=e.VISIBILITY,$p=e.BACKGROUND_IMAGE,qp=e.BACKGROUND_COLOR,Zp=e.BOX_SHADOW,Jp=e.MIX_BLEND_MODE,Qp=e.MARGIN_RIGHT,ty=e.MARGIN_LEFT,ey=e.PADDING_RIGHT,ry=e.PADDING_LEFT,iy=e.FONT_SIZE,ny=e.FLEX_BASIS,Br=T.UPDATE_KEY,ay=Br.UPDATE_NODE,oy=Br.UPDATE_FOCUS,sy=Br.UPDATE_CONFIG,yi=T.NODE_KEY,ly=yi.NODE_CACHE,hy=yi.NODE_DEFS_CACHE,cy=yi.NODE_IS_MASK,uy=r.AUTO,_y=r.PX,fy=r.PERCENT,dy=r.REM,py=r.VW,yy=r.VH,gy=r.VMAX,xy=r.VMIN,vy=r.RGBA,my=ne.canvasPolygon,Ey=ne.svgPolygon,by=At.isFunction,Ty=function(){d(L,Pp);var i=p(L);function L(t,e){_(this,L);var e=(t=i.call(this,t,e)).props.src,r=t.__loadImg={src:e};return e?(e=Mt.IMG[e])&&e.state===Mt.LOADED&&(r.source=e.source,r.width=e.width,r.height=e.height):r.error=!0,t.__config[cy]&&(r=(e=l(t)).style,e=e.currentStyle,r[$p]=e[$p]=[null],r[qp]=e[qp]=[[0,0,0,0],vy],r[Gp]=e[Gp]=[0,_y],r[Yp]=e[Yp]=[0,_y],r[Wp]=e[Wp]=[0,_y],r[Up]=e[Up]=[0,_y],r[Zp]=e[Zp]=null,r[Jp]=e[Jp]="normal"),t}return f(L,[{key:"__preLayout",value:function(t,e){var r,t=P(N(L.prototype),"__preLayout",this).call(this,t,!1),i=this.__loadImg;return i.error||(r=i.src,(r=Mt.IMG[r])&&r.state===Mt.LOADED&&(i.source=r.source,i.width=r.width,i.height=r.height),i.cache=!1),t.fixedWidth&&t.fixedHeight||(i.error&&!this.props.placeholder?t.fixedWidth?t.h=t.w:t.fixedHeight?t.w=t.h:t.w=t.h=32:i.source?t.fixedWidth?t.h=t.w*i.height/i.width:t.fixedHeight?t.w=t.h*i.width/i.height:(t.w=i.width,t.h=i.height):t.w=t.h=0,t.fixedWidth=!0,t.fixedHeight=!0),t}},{key:"__addGeom",value:function(t,e){e=At.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),P(N(L.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){t=P(N(L.prototype),"__calContent",this).call(this,t,e,r,i);return t||(e=this.__loadImg,"hidden"!==i[jp]&&(i[Fp]||i[Bp])&&e.source&&(t=!0)),t}},{key:"render",value:function(t,e,r,c){var u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,_=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,e=P(N(L.prototype),"render",this).call(this,t,e,r,c,u,_),i=(t===et.WEBGL&&(u=e.dx,_=e.dy),e.offscreenBlend),n=e.offscreenMask,a=e.offscreenFilter,f=e.offscreenOverflow,o=this.width,s=this.height,d=this.isDestroyed,p=this.props.placeholder,y=this.computedStyle,l=this.computedStyle,g=l[Hp],x=l[Xp],v=l[zp],m=l[Vp],E=l[Kp],l=l[jp],b=this.virtualDom,T=this.__config,h=this.__loadImg,A=this.root;if(i&&(r=i.target.ctx),n&&(r=n.target.ctx),a&&(r=a.target.ctx),f&&(r=f.target.ctx),h.source||h.error||h.loading||this.__loadAndRefresh(h,A,r,p,y,o,s),d||"none"===g||"hidden"===l)return e;i=T[ly],c&&i&&i.enabled&&(r=i.ctx),n=e.x3+u,a=e.y3+_,f=h.source;if(h.error&&!p&&L.showError){var A=.02*Math.min(o,s),y=n+.7*o,d=a+.3*s,g=5*A,M=[[n+.15*o,a+.7*s],[n+.3*o,a+.4*s],[n+.5*o,a+.6*s],[n+.6*o,a+.5*s],[n+.9*o,a+.8*s],[n+.15*o,a+.8*s]];if(t===et.CANVAS||t===et.WEBGL){r.strokeStyle="#CCC",r.lineWidth=A,r.fillStyle="#DDD",r.beginPath(),r.moveTo(n,a),r.lineTo(n+o,a),r.lineTo(n+o,a+s),r.lineTo(n,a+s),r.lineTo(n,a),r.stroke(),r.closePath(),r.beginPath();l=te.ellipsePoints(y,d,g,g);ne.canvasPolygon(r,l,0,0),r.fill(),r.closePath(),r.beginPath(),r.moveTo(M[0][0],M[0][1]);for(var R=1,O=M.length;R<O;R++){var S=M[R];r.lineTo(S[0],S[1])}r.lineTo(M[0][0],M[0][1]),r.fill(),r.closePath()}else if(t===et.SVG){this.__addGeom("rect",[["x",n],["y",a],["width",o],["height",s],["stroke","#CCC"],["stroke-width",A],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",y],["cy",d],["r",g],["fill","#DDD"]]);for(var C="",I=0,w=M.length;I<w;I++){var k=M[I];I&&(C+=" "),C+=k[0]+","+k[1]}this.__addGeom("polygon",[["points",C],["fill","#DDD"]])}}else if(f){var D,c=We.calRadius(n,a,o,s,x,v,m,E);if(t===et.CANVAS||t===et.WEBGL)c?(r.save(),r.beginPath(),my(r,c,u,_),r.clip(),r.closePath(),r.drawImage(f,n,a,o,s),r.restore()):r.drawImage(f,n,a,o,s);else if(t===et.SVG){if(h.cache)return h.cache.cache=!0,b.children=[h.cache],void(!b.cache&&c&&(i={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Ey(c)],["fill","#FFF"]]}]},l=r.add(i),T[hy].push(i),b.conClip="url(#"+l+")"));o===h.width&&s===h.height||(D=Hl.matrixResize(h.width,h.height,o,s,n,a,o,s));A=[["xlink:href",h.error?p:h.src],["x",n],["y",a],["width",h.width],["height",h.height]],g=(c&&(y={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",Ey(c)],["fill","#FFF"]]}]},d=r.add(y),T[hy].push(y),b.conClip="url(#"+d+")",delete b.cache),D&&!Ht.isE(D)&&A.push(["transform","matrix("+At.joinArr(Ht.m2m6(D),",")+")"]),{type:"img",tagName:"image",props:A});b.children=[g],h.cache=g}}return e}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return P(N(L.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[Fp],n=r[Bp],a=r[ty],o=r[Qp],s=r[ry],r=r[ey],l=this.computedStyle,h=l[Wp],l=l[Yp];return i[1]!==uy?t-=this.__calSize(i,e,!0):(i=this.__loadImg).source&&(n[1]===_y?t-=i.width*n[0]/i.height:n[1]===fy?t-=i.width*n[0]*e*.01/i.height:n[1]===dy?t-=i.width*n[0]*this.root.computedStyle[iy]/i.height:n[1]===py?t-=i.width*n[0]*this.root.width*.01/i.height:n[1]===yy?t-=i.width*n[0]*this.root.height*.01/i.height:n[1]===gy?t-=n[0]*Math.max(this.root.width,this.root.height)*.01/i.height:n[1]===xy?t-=n[0]*Math.min(this.root.width,this.root.height)*.01/i.height:t-=i.width),t=(t=(t=(t-=this.__calSize(o,e,!0))-this.__calSize(r,e,!0)-l)-this.__calSize(a,e,!0))-this.__calSize(s,e,!0)-h}},{key:"__calBasis",value:function(t,c,u,e,_){this.__computeReflow();var r=0,i=0,n=0,a=this.currentStyle,f=this.computedStyle,d=this.__loadImg,o=e.w,p=e.h,s=a[ny],l=a[Fp],h=a[Bp],y=t?l:h,h=t?h:l;return-1<[_y,fy,dy,py,yy,gy,xy].indexOf(s[1])?r=n=i=this.__calSize(s,t?o:p,!0):-1<[_y,fy,dy,py,yy,gy,xy].indexOf(y[1])?r=n=i=this.__calSize(y,t?o:p,!0):(d.source||d.error)&&(l=this.__preLayout(e),r=n=i=h[1]!==uy?(h=this.__calSize(h,t?p:o,!0),s=l.w/l.h,t?h*s:h/s):t?l.w:l.h),this.__addMBP(t,o,a,f,[r,i,n],_)}},{key:"__loadAndRefresh",value:function(r,i,n,a,o,s,l,h){var c=this;(r.source||r.error)&&(i.delRefreshTask(c.__task),i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[ay]=c,t[oy]=es.REFLOW,t[sy]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,Mt.measureImg(r.src,function(t){if(t.url===r.src&&!c.isDestroyed){var e=function(){var t=c.currentStyle,e=t[Fp],t=t[Bp];i.delRefreshTask(c.__task),e[1]!==uy&&t[1]!==uy?i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[ay]=c,t[oy]=es.REPAINT,t[sy]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){by(h)&&h.call(c)}}):i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[ay]=c,t[oy]=es.REFLOW,t[sy]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){by(h)&&h.call(c)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(a)return void Mt.measureImg(a,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:n,root:i,width:s,height:l});r.error=!0}"none"!==o[Hp]&&e()}},{ctx:n,root:i,width:s,height:l})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,n=this.root;t===i.src||!t&&i.error?by(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,n,n.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,n.delRefreshTask(r.__task),n.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[ay]=r,t[oy]=es.REFLOW,t[sy]=r.__config,n.__addUpdate(r,r.__config,n,r.__config,t))},__after:function(t){by(e)&&e(t)}}))}},{key:"appendChild",value:function(){Mt.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}},{key:"isReplaced",get:function(){return!0}}]),L}(),Ay=(a(Ty,"showError",!0),function(){function e(t){_(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return f(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}()),Oi=T.STYLE_KEY,My=Oi.MARGIN_RIGHT,Ry=Oi.MARGIN_LEFT,Oy=Oi.PADDING_RIGHT,Sy=Oi.PADDING_LEFT,Cy=Oi.WIDTH,Iy=Oi.HEIGHT,wy=Oi.BORDER_RIGHT_WIDTH,ky=Oi.BORDER_LEFT_WIDTH,Dy=Oi.FILL,Ly=Oi.STROKE,Ny=Oi.STROKE_MITERLIMIT,Py=Oi.STROKE_WIDTH,Fy=Oi.STROKE_LINECAP,By=Oi.STROKE_LINEJOIN,Hy=Oi.STROKE_DASHARRAY,Gy=Oi.STROKE_DASHARRAY_STR,Yy=Oi.FILL_RULE,Wy=Oi.VISIBILITY,Uy=Oi.FLEX_BASIS,xi=T.NODE_KEY,Xy=xi.NODE_CACHE_PROPS,zy=xi.NODE_CURRENT_PROPS,Vy=xi.NODE_CURRENT_STYLE,Ky=xi.NODE_STYLE,jy=xi.NODE_DEFS_CACHE,$y=r.AUTO,qy=r.PX,Zy=r.PERCENT,Jy=r.REM,Qy=r.VW,t1=r.VH,e1=r.VMAX,r1=r.VMIN,i1=r.RGBA,n1=r.GRADIENT,a1=At.int2rgba,o1=At.isNil,s1=At.joinArr,l1=ne.canvasPolygon,h1=ne.svgPolygon,c1={},u1=function(){d(k,Y0);var r=p(k);function k(t,e){_(this,k),(t=r.call(this,t,e)).__isMulti=!!t.props.multi,t.__style=vn.normalize(t.style,Pt.DOM_ENTRY_SET.concat(Pt.GEOM_ENTRY_SET)),t.__currentStyle=At.extend({},t.__style),t.__currentProps=At.clone(t.props);e=t.__config;return e[Xy]=t.__cacheProps={},e[zy]=t.__currentProps,e[Vy]=t.__currentStyle,e[Ky]=t.__style,t}return f(k,[{key:"__tryLayInline",value:function(t,e){this.__computeReflow();var r=this.currentStyle,i=r[Cy],n=r[Ry],a=r[My],o=r[Sy],r=r[Oy],s=this.computedStyle,l=s[ky],s=s[wy];return i[1]!==$y&&(t-=this.__calSize(i,e,!0)),t=(t=(t=(t-=this.__calSize(a,e,!0))-this.__calSize(r,e,!0)-s)-this.__calSize(n,e,!0))-this.__calSize(o,e,!0)-l}},{key:"__calBasis",value:function(t,c,u,e,r){this.__computeReflow();var i=0,n=0,a=0,o=this.currentStyle,_=this.computedStyle,s=e.w,e=e.h,l=o[Uy],h=o[Cy],f=o[Iy],h=t?h:f;return-1<[qy,Zy,Jy,Qy,t1,e1,r1].indexOf(l[1])?i=a=n=this.__calSize(l,t?s:e,!0):-1<[qy,Zy,Jy,Qy,t1,e1,r1].indexOf(h[1])&&(i=a=n=this.__calSize(h,t?s:e,!0)),this.__addMBP(t,s,o,_,[i,n,a],r)}},{key:"__layoutBlock",value:function(t,e,r,i){var n=this.__preLayout(t,!1),a=n.fixedWidth,o=n.fixedHeight,c=n.w,u=n.h,s=n.isParentVertical,n=n.isUpright,l=0,h=0;this.__ioSize(l=!a&&(e||s||n)?l:c,h=o||!e&&s&&n?u:h),e||r||i||(this.__marginAuto(this.currentStyle,t),this.__config[Xy]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t,e,r,i){this.__layoutBlock(t,e,r,i)}},{key:"__layoutInline",value:function(t,e,r){var t=this.__preLayout(t,!1),i=t.fixedWidth,n=t.fixedHeight,a=t.w,t=t.h;this.__ioSize(i?a:0,n?t:0),this.__config[Xy]=this.__cacheProps={}}},{key:"__calCache",value:function(t,e,r,n,a,o,i,s,l,c,u,_,f,d,p,y,g,x,v,m,E,b,T,A,M,R,O,S,C,I){var h,w=this,t=P(N(k.prototype),"__calCache",this).call(this,t,e,r,n,a,o,i,s,l,c,u,_,f,d,p,y,g,x,v,m,E,b,T,A,M,R,O,S,C,I);return o1(n[Py])&&(n[Py]=!0,e=a[Py]||[],h=this.width,o[Py]=e.map(function(t){return w.__calSize(t,h,!0)})),o1(n[Hy])&&(n[Hy]=!0,o[Hy]=a[Hy]||[],n[Gy]=o[Hy].map(function(t){return s1(t,",")})),[Fy,By,Ny,Yy].forEach(function(t){o[t]=a[t]}),[Dy,Ly].forEach(function(t){var e,r,i;o1(n[t])&&(e=a[t],r=o[t]=[],i=n[t]=[],Array.isArray(e)&&e.forEach(function(t){t&&t[1]===n1?(r.push(t[0]),i.push(!0)):t&&t[1]===i1&&0<t[0][3]?(r.push(t[0]),i.push(a1(t[0]))):(r.push("none"),i.push("none"))}))}),t}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[Wy]}},{key:"__preSet",value:function(e,r){var i=this,t=this.width,n=this.height,a=this.__cacheStyle,o=this.computedStyle,t=r.sx3+.5*t,n=r.sy3+.5*n,a=a[Gy],s=o[Dy],l=o[Ly],h=o[Py],c=o[Fy],u=o[By],_=o[Ny],f=o[Hy],o=o[Yy];return{cx:t,cy:n,stroke:l=l.map(function(t){return t.k?i.__gradient(e,r.ctx,r.x3,r.y3,r.x4,r.y4,t,r.dx,r.dy):a1(t)}),strokeWidth:h,strokeDasharray:f,strokeDasharrayStr:a,strokeLinecap:c,strokeLinejoin:u,strokeMiterlimit:_,fill:s=s.map(function(t){return t.k?i.__gradient(e,r.ctx,r.x3,r.y3,r.x4,r.y4,t,r.dx,r.dy):a1(t)}),fillRule:o}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,n=r.strokeWidth,a=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,l=r.strokeMiterlimit,r=r.fill;t!==et.CANVAS&&t!==et.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==n&&e.lineWidth!==n&&(e.lineWidth=n),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==l&&e.miterLimit!==l&&(e.miterLimit=l),At.isFunction(e.getLineDash)?a&&!At.equalArr(e.getLineDash(),a)&&e.setLineDash(a):a&&e.setLineDash(a))}},{key:"render",value:function(t,e,r,i,n,a){e=P(N(k.prototype),"render",this).call(this,t,e,r,i,n,a);if(t===et.SVG&&(this.virtualDom.type="geom"),e.break)return e;r=this.__preSet(t,e);return Object.assign(e,r)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,c=r.fillRule,n=r.stroke,u=r.strokeWidth,_=r.strokeDasharray,f=r.strokeDasharrayStr,d=r.strokeLinecap,p=r.strokeLinejoin,y=r.strokeMiterlimit,a=r.dx,g=r.dy,x=this.__cacheProps.list,v=this.isMulti,m=this.bbox;if(i.length<=1&&n.length<=1){r={fill:i[0],fillRule:c[0],stroke:n[0],strokeWidth:u[0],strokeDasharray:_[0],strokeDasharrayStr:f[0],strokeLinecap:d[0],strokeLinejoin:p[0],strokeMiterlimit:y[0],dx:a,dy:g,bbox:m};this.__renderOnePolygon(t,e,v,x,r)}else{for(var o=0,E=i.length;o<E;o++){var s=i[o];s&&(s={fill:s,fillRule:c[o],dx:a,dy:g,bbox:m},this.__renderOnePolygon(t,e,v,x,s))}for(var l=0,b=n.length;l<b;l++){var h=n[l];h&&(h={stroke:h,strokeWidth:u[l],strokeDasharray:_[l],strokeDasharrayStr:f[l],strokeLinecap:d[l],strokeLinejoin:p[l],strokeMiterlimit:y[l],dx:a,dy:g,bbox:m},this.__renderOnePolygon(t,e,v,x,h))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,n){var a=n.fill,o=n.stroke,s=n.strokeWidth,l=a&&"conic"===a.k,h=o&&"conic"===o.k,c=a&&"radial"===a.k&&Array.isArray(a.v),u=s&&0<s&&o&&"radial"===o.k&&Array.isArray(o.v);l||h?(l?this.__conicGradient(t,e,i,r,n):"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&h?Mt.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,n,"fill"):"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),s&&0<s&&u?(Mt.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke.v=n.stroke.v[0],this.__drawPolygon(t,e,r,i,n,!1,!0)):s&&0<s&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!1,!0)):this.__drawPolygon(t,e,r,i,n,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,n,c,u){var a,o=n.fill,s=n.stroke,l=n.strokeWidth,h=n.fillRule,_=n.strokeDasharrayStr,f=n.strokeLinecap,d=n.strokeLinejoin,p=n.strokeMiterlimit,y=n.dx,g=n.dy;t===et.CANVAS||t===et.WEBGL?(this.__preSetCanvas(t,e,n),e.beginPath(),r?i.forEach(function(t){return l1(e,t,y,g)}):l1(e,i,y,g),c&&o&&"none"!==o&&e.fill(h),u&&s&&"none"!==s&&l&&0<l&&e.stroke(),e.closePath()):t===et.SVG&&(a="",r?i.forEach(function(t){return a+=h1(t)}):a=h1(i),n=[["d",a]],(o&&"none"!==o||s&&"none"!==s)&&(c&&o&&"none"!==o?(n.push(["fill",o.v||o]),h&&"nonzero"!==h&&n.push(["fill-rule",h])):n.push(["fill","none"]),u&&s&&"none"!==s&&l&&0<l?(n.push(["stroke",s.v||s]),n.push(["stroke-width",l]),this.__propsStrokeStyle(n,_,f,d,p)):n.push(["stroke-width",0]),this.addGeom("path",n)))}},{key:"__inversePtList",value:function(t,e,a){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r]+o,t[r+1]+s],a);e.push(n[0]),e.push(n[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var n=Ht.calPoint([t[r]+o,t[r+1]+s],a);e.push(n[0]),e.push(n[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,n,a){var o,c=n.strokeWidth,u=n.strokeDasharrayStr,_=n.strokeLinecap,f=n.strokeLinejoin,d=n.strokeMiterlimit,p=n.dx,y=n.dy,n=Bt(n[a].v,4),s=n[0],l=n[1],h=n[2],n=n[3],h=(l=io.calMatrixByOrigin(l,[h,n]),Ht.inverse(l));r=this.__inversePtList(r,i,h,p,y),t===et.CANVAS||t===et.WEBGL?(l&&(e.save(),t===et.CANVAS&&(n=this.matrixEvent,l=Ht.multiply(n,l)),e.setTransform(l[0],l[1],l[4],l[5],l[12],l[13])),e.beginPath(),e[a+"Style"]!==s&&(e[a+"Style"]=s),i?r.forEach(function(t){return ne.canvasPolygon(e,t)}):l1(e,r),e[a](),e.closePath(),l&&e.restore()):t===et.SVG&&(o="",i?r.forEach(function(t){return o+=h1(t)}):o=h1(r),h=[["d",o]],"fill"===a?(h.push(["fill",s]),h.push(["strokeWidth",0])):"stroke"===a&&(h.push(["fill","none"]),h.push(["stroke",s]),h.push(["stroke-width",c]),this.__propsStrokeStyle(h,u,_,f,d)),h.push(["transform","matrix(".concat(s1(Ht.m2m6(l),","),")")]),this.addGeom("path",h))}},{key:"__conicGradient",value:function(c,r,t,u,e){var i,n,a,_,f=this,o=e.fill,s=e.bbox,l=e.dx,h=void 0===l?0:l,l=e.dy,d=void 0===l?0:l,p=o.v;c===et.CANVAS||c===et.WEBGL?(e=Bt(s,4),i=e[0],n=e[1],l=e[2],s=e[3],s=(a=Mt.getCacheCanvas(e=l-i,l=s-n,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,e,l),ee.getConicGradientImage(.5*e,.5*l,e,l,o.v.stop,s.data),a.ctx.putImageData(s,0,0),u?t.forEach(function(t){r.save(),r.beginPath(),l1(r,t,h,d),r.clip(),r.closePath(),r.drawImage(a.canvas,i+h,n+d),r.restore()}):(r.save(),r.beginPath(),l1(r,t,h,d),r.clip(),r.closePath(),r.drawImage(a.canvas,i+h,n+d),r.restore()),a.ctx.clearRect(0,0,e,l)):c===et.SVG&&(u?t.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",h1(t)]]}]},e=r.add(t);f.__config[jy].push(t),p.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",h1(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(o={tagName:"clipPath",children:[{tagName:"path",props:[["d",h1(t)]]}]},_=r.add(o),this.__config[jy].push(o),p.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",h1(t[0])],["fill",t[1]],["clip-path","url(#"+_+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,n){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),n&&4!==n&&t.push(["stroke-miterlimit",n])}},{key:"__releaseWhenEmpty",value:function(t,e){return"hidden"===e[Wy]}},{key:"__offsetX",value:function(t,e,r){P(N(k.prototype),"__offsetX",this).call(this,t,e,r),this.__config[Xy]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){P(N(k.prototype),"__offsetY",this).call(this,t,e,r),this.__config[Xy]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){P(N(k.prototype),"__resizeX",this).call(this,t,e),this.__config[Xy]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){P(N(k.prototype),"__resizeY",this).call(this,t,e),this.__config[Xy]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=At.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return o1(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return c1}},{key:"getRegister",value:function(t){if(!t||!At.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!c1.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return c1[t]}},{key:"register",value:function(t,e){if(!(t&&At.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof k))throw new Error("Invalid param");if(k.hasRegister(t))throw new Error("Geom has already register: ".concat(t));c1[t]=e}},{key:"hasRegister",value:function(t){return t&&c1.hasOwnProperty(t)}},{key:"delRegister",value:function(t){k.hasRegister(t)&&delete c1[t]}}]),k}(),A=T.NODE_KEY,_1=A.NODE_STYLE,f1=A.NODE_CURRENT_STYLE,d1=A.NODE_COMPUTED_STYLE,p1=A.NODE_DOM_PARENT,y1=A.NODE_MATRIX,g1=A.NODE_MATRIX_EVENT,x1=A.NODE_STRUCT,v1=k.TYPE_VD,m1=k.TYPE_GM,E1=k.TYPE_CP,b1=[],T1=[],A1={};function M1(t){t instanceof Pp?t.children.forEach(function(t){t instanceof Pp?M1(t):t instanceof bl&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,R1(t,t.props))}):t instanceof bl&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,R1(t,t.props))}function R1(t,e,r){if(t.__nextState||r){r=!At.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state);if(r)for(var i,n=t,r=e,a=t.__nextState||t.state,r=(n.props=r,n.state=a,n.__nextState=null,n.shadow),o=n.shadowRoot,a=n.__cd,s=Zs(n.render()),l=(function(t,e,r){var n=I1(e,{},t),a=I1(r,{}),o=[],s=[];Object.keys(n).forEach(function(t){var e=n[t];a[t]||(e.json.key=A1)}),Object.keys(a).forEach(function(t){var e,r,i=n[t],t=a[t];i?(e=i.json,r=t.json,i=i.vd,e.$$type===E1&&r.$$type===E1?e.klass===r.klass&&(C1(e,r,i),e.key=r.key=A1,s.push(i)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===m1&&e.props.multi!==r.props.multi||(r.__inheritAnimate=i),e.key=r.key=A1,r.$$type===v1&&o.push({vd:i,oj:e,nj:r}))):t.json.key=A1}),o.forEach(function(t){S1(t.vd,t.oj,t.nj)}),O1(t,e,r),s.forEach(function(t){w1(t)})}(r,a,s),n.__init(s),n.shadowRoot),h=(l instanceof Y0?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){l[t]=o[t]}),l.__computedStyle=l.__config[d1]=o.computedStyle):(i=n.domParent,[_1,f1,d1,y1,g1].forEach(function(t){l.__config[t]=i.__config[t]})),["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){l[t]=o[t]}),l.__config[p1]=o.domParent,l.__config[x1]=o.__config[x1],b1.push(n),At.isObject(s)&&s.__placeholder||T1.push(r),s&&s.__placeholder&&delete s.__placeholder,s&&s.__inheritAnimate&&delete s.__inheritAnimate,s&&s.__animateRecords&&delete s.__animateRecords,n.host);h&&h.shadow===n;)(h.__shadowRoot=l).__hostRoot=h,h=(n=h).host;else t.props=e,t.state=t.__nextState||t.state,M1(t.shadow)}else M1(t.shadow)}function O1(t,e,r){At.isObject(r)&&(r.$$type===E1?r.key!==A1&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(C1(e,r,t),w1(t)):r.$$type===m1&&e&&e.$$type===m1?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===v1&&e&&e.$$type===v1&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),S1(t,e,r)))}function S1(c,u,_){for(var t=u.children,e=_.children,r=t.length,i=e.length,f=c.children,n=0,a=0,o=0,s=Math.min(r,i);n<s;n++){var l=t[n+a],h=e[n+o];l.key===A1&&h.key===A1||(l.key===A1?(a++,n--,r--,s=Math.min(r,i)):h.key===A1?(o++,n--,i--,s=Math.min(r,i)):O1(f[n+a],l,h))}}function C1(i,n,a){var o=(n.__placeholder=a).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(n.props).forEach(function(t){var e,r=n.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),o.listener[t]=r)):(t=t.slice(2).toLowerCase(),o.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.off(t,s[t]),a.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),a.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(n.props[t]=e,t=t.slice(2).toLowerCase(),delete o.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(n.props[t]=e,t=t.slice(2).toLowerCase(),a.off(t,e))}),R1(a,n.props,!At.equal(i.props,n.props))}function I1(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return I1(t,r,i&&i[e])}):At.isObject(t)&&(t.$$type!==v1&&t.$$type!==m1&&t.$$type!==E1||(t.$$type===v1&&I1(t.children,r,i&&i.children),e=t.props.key,At.isNil(e)||""===e||(r.hasOwnProperty(e)&&Mt.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function w1(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var k1,D1={updateList:b1,check:M1,did:function(){b1.forEach(function(t){At.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),b1.splice(0),T1.forEach(function(t){t.__destroy()}),T1=[]}},L1=At.joinVd,N1=At.joinDef,P1=es.contain,F1=es.NONE,B1=es.TRANSFORM_ALL,H1=es.OPACITY,G1=es.FILTER,Y1=es.MIX_BLEND_MODE;function W1(t,e,r){for(var c=t.childNodes,i=c[0],u=e.defs,n=r.defs,a=u.length,o=n.length,s=0,l=i.childNodes;s<Math.min(a,o);s++)!function(e,t,r){if(t.tagName!==r.tagName)tg(e,"beforebegin",N1(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},n=0,c=(t.props||[]).length;n<c;n++){var a=Bt(t.props[n],2),u=a[0],a=a[1];i[u]=a}for(var o=0,_=(r.props||[]).length;o<_;o++){var s=Bt(r.props[o],2),l=s[0],s=s[1];i.hasOwnProperty(l)?(i[l]!==s&&e.setAttribute(l,s),delete i[l]):e.setAttribute(l,s)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var f=e.childNodes,d=t.children.length,p=r.children.length,h=0;h<Math.min(d,p);h++)$1(e,h,t.children[h],r.children[h]);if(h<d)for(var y=d-1;h<=y;y--)Q1(e,f,y);else if(h<p)for(;h<p;h++)J1(e,f,h,L1(r.children[h]))}}(l[s],u[s],n[s]);if(s<a)for(var h=a-1;s<=h;h--)Q1(i,l,h);else if(s<o)for(;s<o;s++)J1(i,l,s,N1(n[s]));r.hasOwnProperty("lv")||j1(c[1],e.bb,r.bb),V1(t,e,r,!0)}function U1(t,e,r){if("dom"===e.type)"dom"===r.type?V1(t,e,r):"geom"===r.type?K1(t,e,r):Z1(t,r);else if("text"===e.type)if("text"===r.type){var i=t,c=e,n=r;if(!n.cache){for(var u=c.children.length,_=n.children.length,a=0;a<Math.min(u,_);a++)$1(i,a,c.children[a],n.children[a],!0);var f=i.childNodes;if(a<u)for(var d=u-1;a<=d;d--)Q1(i,f,d);else if(a<_)for(;a<_;a++)J1(i,f,a,L1(n.children[a]))}}else Z1(t,r);else if("geom"===e.type)if("dom"===r.type)K1(t,e,r);else if("geom"===r.type){var o=t,s=e,l=r;if(l.cache)z1(o,0,l,l.lv);else if(l.hasOwnProperty("lv"))z1(o,0,l,l.lv);else{X1(o,s,l),j1(o.firstChild,s.bb,l.bb);for(var p=s.children.length,y=l.children.length,h=0,g=o.lastChild,x=g.childNodes;h<Math.min(p,y);h++)$1(g,h,s.children[h],l.children[h]);if(h<p)for(var v=p-1;h<=v;v--)Q1(g,x,v);else if(h<y)for(;h<y;h++)J1(g,x,h,L1(l.children[h]))}}else Z1(t,r);else"img"===e.type?"img"===r.type?q1(t,e,r):Z1(t,r):"item"===e.type&&"item"===r.type&&q1(t,e,r)}function X1(t,e,r){var i=r.transform,n=r.opacity,a=r.visibility,o=r.mask,s=r.overflow,l=r.filter,h=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==n&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),e.visibility!==a&&t.setAttribute("visibility",a),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter===l&&e.mixBlendMode===h||((i=(l?"filter:".concat(l,";"):"")+(h?"mix-blend-mode:".concat(h,";"):""))?t.setAttribute("style",i):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function z1(t,e,r,i){var n=r.transform,a=r.opacity,o=r.mask,s=r.filter,r=r.mixBlendMode;o?t.setAttribute("mask",o):t.removeAttribute("mask"),i!==F1&&(P1(i,B1)&&(n?t.setAttribute("transform",n):t.removeAttribute("transform")),P1(i,H1)&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),(P1(i,G1)||P1(i,Y1))&&((o=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",o):t.removeAttribute("style")))}function V1(t,e,r,i){if(r.cache)z1(t,0,r,r.lv);else{r.hasOwnProperty("lv")?z1(t,0,r,r.lv):(X1(t,e,r),i||j1(t.firstChild,e.bb,r.bb));for(var n=e.children.length,a=r.children.length,o=0,s=t.lastChild,l=s.childNodes;o<Math.min(n,a);o++)U1(l[o],e.children[o],r.children[o]);if(o<n)for(var h=n-1;o<=h;h--)Q1(s,l,h);else if(o<a)for(;o<a;o++)J1(s,l,o,L1(r.children[o]))}}function K1(t,e,r){X1(t,e,r),j1(t.firstChild,e.bb,r.bb);for(var i=e.children.length,n=r.children.length,a=0,o=t.lastChild,s=o.childNodes;a<Math.min(i,n);a++)Z1(s[a],r.children[a]);if(a<i)for(var l=i-1;a<=l;l--)Q1(o,s,l);else if(a<n)for(;a<n;a++)J1(o,s,a,L1(r.children[a]))}function j1(t,e,r){for(var i=e.length,n=r.length,a=0;a<Math.min(i,n);a++)$1(t,a,e[a],r[a]);var o=t.childNodes;if(a<i)for(var s=i-1;a<=s;s--)Q1(t,o,s);else if(a<n)for(;a<n;a++)J1(t,o,a,L1(r[a]))}function $1(t,e,r,i,n){t=t.childNodes;r.tagName!==i.tagName?Z1(t[e],i):(q1(t[e],r,i),n&&r.content!==i.content&&(t[e].innerHTML=i.content))}function q1(e,t,r){if(!r.cache){for(var i={},n=0,a=(t.props||[]).length;n<a;n++){var o=Bt(t.props[n],2),c=o[0],o=o[1];i[c]=o}for(var s=0,u=(r.props||[]).length;s<u;s++){var l=Bt(r.props[s],2),h=l[0],l=l[1];i.hasOwnProperty(h)?(i[h]!==l&&e.setAttribute(h,l),delete i[h]):e.setAttribute(h,l)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function Z1(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=L1(t)})):r=L1(e),tg(t,"beforebegin",r),t.parentNode.removeChild(t)}function J1(t,e,r,i){r>=e.length?tg(t,"beforeend",i):tg(e[r],"beforebegin",i)}function Q1(t,e,r){e[r]&&t.removeChild(e[r])}function tg(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(k1=k1||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(k1.childNodes[0],t)}}var eg=At.isFunction,rg=function(){function t(){_(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return f(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var t,n=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;e.length&&e.splice(0).forEach(function(t){var r=t.target,e=t.animate,i=t.offsetTime;!r.isDestroyed&&e&&(e=Array.isArray(e)?e:[e]).forEach(function(t){var e=t.value,t=t.options,e=(t.autoPlay=!1,i&&((t=Object.assign({},t)).delay=t.delay||0,t.delay+=i),r.animate(e,t));n.add(e,a)})}),e===this.__records2&&(t=this.__onList,(e=this.list2).length&&t.length&&e.forEach(function(e){t.forEach(function(t){e.off(t[0],t[1]),e.on(t[0],t[1])})}))}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,eg(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,eg(e)&&e(t))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,eg(e)&&e(t))}])}},{key:"finish",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,eg(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],eg(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,eg(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],eg(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,eg(r)&&r(t))}])}},{key:"on",value:function(t,e){if(eg(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(r,i){var n=this;this.list.forEach(function(e){function t(){var t=e.timestamp;t!==n.__lastTime[r]&&(n.__lastTime[r]=t,i())}t.__karasEventCb=i,e.on(r,t)})}},{key:"off",value:function(e,r){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.off(e[t],r);else this.list.forEach(function(t){t.off(e,r)})}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),ig=ne.canvasPolygon;var n=0,Ti=1,t=2,ur=3,Wr=4,i=function(c,t,u,_){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,n,a,o,s,l,t=Bt(t,4),h=t[2],t=t[3];0===h?(r=t.matrix,e=t.target,l=t.ctx,n=t.x,a=t.y,o=t.offsetWidth,s=t.offsetHeight,i=t.list,c.globalCompositeOperation="destination-in",c.globalAlpha=1,c.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),c.fillStyle="#FFF",c.beginPath(),i?ig(c,i):c.rect(n,a,o,s),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",e.draw(),(c=l).setTransform(1,0,0,1,0,0),c.globalAlpha=1,u&&_&&c.drawImage(e.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),e.ctx.setTransform(1,0,0,1,0,0),e.ctx.clearRect(0,0,u,_),e.draw(),Mt.releaseCacheCanvas(e.canvas)):1===h?(r=t.target,i=t.ctx,n=t.filter,c.filter&&((a=Mt.getCacheCanvas(u,_,null,"filter2")).ctx.filter=ne.canvasFilter(n),u&&_&&a.ctx.drawImage(r.canvas,0,0,u,_,0,0,u,_),a.ctx.filter="none",a.draw(),r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,u,_),u&&_&&r.ctx.drawImage(a.canvas,0,0,u,_,0,0,u,_),r.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,u,_),a.draw(),Mt.releaseCacheCanvas(a.canvas)),(c=i).setTransform(1,0,0,1,0,0),c.globalAlpha=1,u&&_&&c.drawImage(r.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,u,_),r.draw(),Mt.releaseCacheCanvas(r.canvas)):2===h?(o=t.mask,t.isClip?(t.target.draw(),(c=o.ctx).globalCompositeOperation="source-out",c.globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(t.target.canvas,0,0,u,_,0,0,u,_),o.draw(),c.globalCompositeOperation="source-over",t.target.ctx.setTransform(1,0,0,1,0,0),t.target.ctx.clearRect(0,0,u,_),t.target.draw(),Mt.releaseCacheCanvas(t.target.canvas),(c=t.ctx).globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(o.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,u,_),o.draw(),Mt.releaseCacheCanvas(o.canvas)):(o.draw(),s=t.target,(c=s.ctx).globalCompositeOperation="destination-in",c.globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(o.canvas,0,0,u,_,0,0,u,_),c.globalCompositeOperation="source-over",s.draw(),o.ctx.setTransform(1,0,0,1,0,0),o.ctx.clearRect(0,0,u,_),o.draw(),Mt.releaseCacheCanvas(o.canvas),(c=t.ctx).globalAlpha=1,c.setTransform(1,0,0,1,0,0),u&&_&&c.drawImage(s.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,u,_),s.draw(),Mt.releaseCacheCanvas(s.canvas))):3===h?(l=t.target,(c=t.ctx).globalCompositeOperation=t.mixBlendMode,l.draw(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,u&&_&&c.drawImage(l.canvas,0,0,u,_,0,0,u,_),c.globalCompositeOperation="source-over",c.draw&&c.draw(!0),l.ctx.globalAlpha=1,l.ctx.setTransform(1,0,0,1,0,0),l.ctx.clearRect(0,0,u,_),l.draw(),Mt.releaseCacheCanvas(l.canvas)):4===h&&(c=t.ctx)}),c},ng=f(function t(e,r,i){_(this,t),this.uuid=Go.genUuid(),this.time=Mt.now(),this.texture=e,this.width=r,this.height=i}),ag=function(){function s(t,e,r,i,n,a,o){_(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=n,this.height=a,this.bbox=o,this.available=!0,this.__page=new ng(e,n,a),this.reOffset()}return f(s,[{key:"reOffset",value:function(){var t=this.bbox;this.dx=-t[0],this.dy=-t[1],this.dbx=this.sx1-t[0],this.dby=this.sy1-t[1]}},{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),og="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",sg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",lg="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",hg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",cg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ug="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",_g="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",fg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",dg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",pg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",yg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",gg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",xg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",vg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",mg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Eg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",bg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Tg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",Ag=zo.NA,Mg=zo.LOCAL,Rg=zo.CHILD,Og=zo.SELF,Sg=zo.getCache,Cg=n,Ig=Ti,wg=t,kg=ur,Dg=Wr,Lg=i,Hr=T.STYLE_KEY,Ng=Hr.DISPLAY,Pg=Hr.OPACITY,Fg=Hr.VISIBILITY,Bg=Hr.FILTER,Hg=Hr.OVERFLOW,Gg=Hr.MIX_BLEND_MODE,Yg=Hr.FILL,Wg=Hr.TRANSFORM,Ug=Hr.TRANSFORM_ORIGIN,Xg=Hr.PERSPECTIVE,zg=Hr.PERSPECTIVE_ORIGIN,Vg=Hr.PADDING_LEFT,Kg=Hr.PADDING_RIGHT,jg=Hr.PADDING_TOP,$g=Hr.PADDING_BOTTOM,qg=Hr.BORDER_TOP_WIDTH,Zg=Hr.BORDER_RIGHT_WIDTH,Jg=Hr.BORDER_BOTTOM_WIDTH,Qg=Hr.BORDER_LEFT_WIDTH,tx=Hr.MATRIX,fi=T.NODE_KEY,ex=fi.NODE_CACHE,rx=fi.NODE_CACHE_TOTAL,ix=fi.NODE_CACHE_OVERFLOW,nx=fi.NODE_CACHE_MASK,ax=fi.NODE_CACHE_FILTER,ox=fi.NODE_MATRIX,sx=fi.NODE_MATRIX_EVENT,lx=fi.NODE_OPACITY,hx=fi.NODE_COMPUTED_STYLE,cx=fi.NODE_CURRENT_STYLE,ux=fi.NODE_LIMIT_CACHE,_x=fi.NODE_REFRESH_LV,fx=fi.NODE_CACHE_STYLE,dx=fi.NODE_DEFS_CACHE,px=fi.NODE_IS_MASK,yx=fi.NODE_DOM_PARENT,gx=fi.NODE_PERSPECTIVE_MATRIX,xx=fi.NODE_VIRTUAL_DOM,vx=fi.NODE_CACHE_AS_BITMAP,mx=fi.NODE_STRUCT,di=T.STRUCT_KEY,Ex=di.STRUCT_NODE,bx=di.STRUCT_INDEX,Tx=di.STRUCT_TOTAL,Ax=di.STRUCT_HAS_MASK,Mx=di.STRUCT_LV,Rx=es.NONE,Ox=es.TRANSFORM_ALL,Sx=es.OPACITY,Cx=es.FILTER,Ix=es.REPAINT,wx=es.contain,kx=es.MIX_BLEND_MODE,Dx=es.PERSPECTIVE,Lx=Ht.isE,Nx=Ht.inverse,Px=Ht.multiply,Fx=mi,Bx=vi,Hx=At.assignMatrix,Gx=At.transformBbox;function Yx(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function Wx(t,e,r){for(var i=0;r--;){var n=t[e][Tx];i+=n||0,e+=n||0,i++,e++}return i}function Ux(t,e,r,i){var e=e.lockOneChannel(),n=ft.createTexture(t,null,e,r,i),a=t.createFramebuffer(),o=(t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.checkFramebufferStatus(t.FRAMEBUFFER));return o!==t.FRAMEBUFFER_COMPLETE&&Mt.error("Framebuffer object is incomplete: "+o.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[e,a,n]}function Xx(t,e,c,u,_,f,d,p,y,g,x,v){for(var m,E,b={},T={},r=function(c,u,_,f,d,p){var y,g=c.__sx1,x=c.__sy1,v=(t=c.__config)[ex],m=(t=t[hx])[Bg],E=t[Xg],t=t[zg],b=v&&v.available?v.bbox:c.filterBbox;b=b.slice(0),E&&(y=io.calPerspectiveMatrix(E,t));for(var T=[_],A=0,M=(m.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];"blur"===e&&(A=Rr.outerSize(t))}),d[_]=1,{});T.length;)for(var R=T.splice(0),O=0,S=R.length;O<S;O++)for(var e=R[O],r=e+1,C=e+(u[e][Tx]||0)+1;r<C;r++){var i=u[r],n=i[Ex],i=i[Tx];if(!n.isMask){var I=n.__sx1,w=n.__sy1,a=n.__config,o=a[ux],s=a[ex],k=a[rx],l=a[ax],h=a[nx],D=a[ix],a=a[hx],L=a[Ng],N=a[Fg],P=a[Wg],F=a[Ug],a=a[Pg];if(o&&!p)return;"none"!==L?"hidden"!==N&&(f[r]=e,d[r]=d[e]*a,o=void 0,a=void(N=L=0),n instanceof Ks?o=n.bbox:(h=Sg([h,l,D,k]))?(o=h.bbox,L=h.dbx,N=h.dby,r+=i||0,a=!0):s&&s.available?(o=s.bbox,L=s.dbx,N=s.dby):o=n.filterBbox,o&&((o=o.slice(0))[0]-=g,o[1]-=x,o[2]-=g,o[3]-=x,l=M[e],P&&!Lx(P)&&((D=F.slice(0))[0]+=I-g+L,D[1]+=w-x+N,k=io.calMatrixByOrigin(P,D),l=l?Px(l,k):k),l&&(M[r]=l),y&&(l=Px(y,l)),o=Gx(o,l,A,A),i&&!a&&T.push(r),Yx(b,o,g,x))):r+=i||0}}return[b,y]}(c,d,_,b,T,(t.getParameter(t.MAX_TEXTURE_SIZE),y)),r=Bt(r,2),i=r[0],A=r[1],M=(i||(m=!0),(i=y||m?[0,0,x,v]:i)[2]-i[0]),R=i[3]-i[1],r=Bt(Ux(t,e,M,R),3),O=r[0],S=r[1],C=r[2],I=c.__sx1,w=c.__sy1,n=.5*M,a=.5*R,k=-i[0],D=-i[1],L=I-i[0],N=w-i[1],P=(p&&p.available?e.addTexAndDrawWhenLimit(t,p,1,null,n,a,k,D,!1):y&&(r=Mt.getCacheCanvas(M,R,"__$$OVERSIZE$$__"),c.render(et.WEBGL,0,t,Ag,0,0),p=e.lockOneChannel(),E=ft.createTexture(t,r.canvas,p),E=new ag(t,E,0,0,M,R,[0,0,M,R]),e.addTexAndDrawWhenLimit(t,E,1,null,n,a,0,0,!1),e.refresh(t,n,a),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,M,R),E.release(),e.releaseLockChannel(p)),{}),o=_+1,F=_+(f||0)+1;o<F;o++){var B,H,G,Y,W,U,X,s,z,V,K=d[o],j=K[Ex],$=K[Tx],K=K[Ax],l=j.__config,h=P[b[o]],q=T[o];j instanceof Ks?(A&&(h=Px(A,h)),e.addTexAndDrawWhenLimit(t,l[ex],q,h,n,a,k,D,!1)):(B=l[ex],H=l[rx],G=l[ax],V=l[nx],Y=l[ix],z=l[px],s=(l=l[hx])[Ng],U=l[Fg],X=l[Wg],W=l[Ug],l=l[Gg],"none"!==s?("hidden"!==U&&!z||j.hookGlRender)&&(X&&!Lx(X)&&(s=W.slice(0),B&&B.available?(s[0]+=B.sx1,s[1]+=B.sy1):(s[0]+=j.__sx1,s[1]+=j.__sy1),U=N-w,s[0]+=L-I,s[1]+=U,z=io.calMatrixByOrigin(X,s),h=h?Px(h,z):z),h&&(P[o]=h),A&&(h=Px(A,h)),(W=Sg([V,G,Y,H,B]))&&(Bx(l)?(e.refresh(t,n,a),X=(U=Bt(Ux(t,e,M,R),3))[0],s=U[1],z=U[2],e.addTexAndDrawWhenLimit(t,W,q,h,n,a,k,D,!1),e.refresh(t,n,a),O=(V=Bt(jx(t,e,O,X,S,C,Fx(l),M,R),3))[0],S=V[1],C=V[2],t.deleteFramebuffer(s),t.deleteTexture(z)):e.addTexAndDrawWhenLimit(t,W,q,h,n,a,k,D,!1),W!==B&&(o+=($||0)+Wx(d,o+($||0)+1,K||0))),j.hookGlRender&&j.hookGlRender(t,q,h,n,a,k,D,!1)):o+=($||0)+Wx(d,o+($||0)+1,K||0))}c.hookGlRender&&c.hookGlRender(t,1,null,n,a,k,D,!1),e.refresh(t,n,a),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,x,v),t.deleteFramebuffer(S);r=new ag(t,C,I,w,M,R,i);return e.releaseLockChannel(O,r.page),[y||m,r]}function zx(n,a,r,t,e,i,_){var o=t.sx1,s=t.sy1,l=t.width,h=t.height,c=t.bbox,u=t;return e.forEach(function(t){var e,r,t=Bt(t,2),i=t[0],t=t[1];"blur"===i&&0<t?(r=Vx(n,a,u,t,l,h,o,s,c))&&(r=Bt(r,4),u=r[0],l=r[1],h=r[2],c=r[3]):"dropShadow"===i?(r=function(t,e,c,r,i,n,u,_,a){e.refresh(t,.5*i,.5*n);var r=Bt(r,5),f=r[0],d=r[1],o=r[2],r=r[4],s=Bt(Ux(t,e,i,n),3),p=s[0],l=s[1],s=s[2],h=e.findExistTexChannel(c.page);-1===h?(h=e.lockOneChannel(),ft.bindTexture(t,c.page.texture,h)):e.lockChannel(h);t.useProgram(t.programDs),s=ft.drawDropShadow(t,t.programDs,l,s,c.page.texture,p,h,i,n,r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(l);r=a,l=new ag(t,s,u,_,i,n,a.slice(0)),o=Vx(t,e,l,o,i,n,u,_,a);{var y;if(e.releaseLockChannel(h),t.useProgram(t.program),o)return t.deleteTexture(s),h=Bt(o,4),l=h[0],i=h[1],n=h[2],a=h[3],(f||d)&&(a[0]+=f,a[1]+=d,a[2]+=f,a[3]+=d,l.sx1=a[0],l.sy1=a[1],l.reOffset()),Yx(s=r.slice(0),a,0,0),i=s[2]-s[0],n=s[3]-s[1],o=.5*i,h=.5*n,f=-s[0],d=-s[1],r=Bt(Ux(t,e,i,n),3),a=r[0],y=r[1],r=r[2],e.addTexAndDrawWhenLimit(t,c,1,null,o,h,f,d,!1),e.addTexAndDrawWhenLimit(t,l,1,null,o,h,f,d,!1),e.refresh(t,o,h,!1),e.releaseLockChannel(p),e.releaseLockChannel(a),t.deleteFramebuffer(y),c=new ag(t,r,u,_,i,n,s),e.releaseLockChannel(a,l.page),[c,i,n,s]}}(n,a,u,t,l,h,o,s,c))&&(r=Bt(r,4),u=r[0],l=r[1],h=r[2],c=r[3]):"hueRotate"===i?(r=te.d2r(t%360),e=Math.cos(r),r=Math.sin(r),(e=Kx(n,a,u,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],l,h,o,s,c))&&(r=Bt(e,4),u=r[0],l=r[1],h=r[2],c=r[3])):"saturate"===i&&100!==t?(r=Kx(n,a,u,[.213+.787*(e=.01*t),.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0],l,h,o,s,c))&&(e=Bt(r,4),u=e[0],l=e[1],h=e[2],c=e[3]):"brightness"===i&&100!==t?(e=Kx(n,a,u,[r=.01*t,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],l,h,o,s,c))&&(r=Bt(e,4),u=r[0],l=r[1],h=r[2],c=r[3]):"grayscale"===i&&0<t?((e=1-.01*(t=Math.min(t,100)))<0?e=0:1<e&&(e=1),(r=Kx(n,a,u,[.2126+.7874*e,.7152-.7152*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152+.2848*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152-.7152*e,.0722+.9278*e,0,0,0,0,0,1,0],l,h,o,s,c))&&(e=Bt(r,4),u=e[0],l=e[1],h=e[2],c=e[3])):"contrast"===i&&100!==t?(r=Kx(n,a,u,[r=.01*t,0,0,0,e=-.5*r+.5,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],l,h,o,s,c))&&(e=Bt(r,4),u=e[0],l=e[1],h=e[2],c=e[3]):"sepia"===i&&0<t?((r=1-.01*(t=Math.min(t,100)))<0?r=0:1<r&&(r=1),(e=Kx(n,a,u,[.393+.607*r,.769-.769*r,.189-.189*r,0,0,.349-.349*r,.686+.314*r,.168-.168*r,0,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,0,1,0],l,h,o,s,c))&&(r=Bt(e,4),u=r[0],l=r[1],h=r[2],c=r[3])):"invert"===i&&0<t&&(e=.01*(t=Math.min(t,100)),(i=Kx(n,a,u,[r=1-2*e,0,0,0,e,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],l,h,o,s,c))&&(t=Bt(i,4),u=t[0],l=t[1],h=t[2],c=t[3]))}),n.useProgram(n.program),n.viewport(0,0,i,_),u}function Vx(t,e,c,r,u,_,f,d,i){for(var n=Rr.kernelSize(r),p=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));p<n;)n-=2;var a=Rr.outerSizeByD(n),o=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(o<u||o<_)){for(var o=i.slice(0),i=(o[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a,u+2*a),y=_+2*a,g=.5*i,x=.5*y,v=Rr.gaussianWeight(r,n),s="",l="",h=Math.floor(.5*n),m=0;m<h;m++){var E=.01*(h-m);s+="v_texCoordsBlur[".concat(m,"] = a_texCoords + vec2(-").concat(E,", -").concat(E,") * u_direction;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(m,"]) * ").concat(v[m],";")}s+="v_texCoordsBlur[".concat(h,"] = a_texCoords;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(h,"]) * ").concat(v[h],";");for(var b=0;b<h;b++){var T=.01*(b+1);s+="v_texCoordsBlur[".concat(b+h+1,"] = a_texCoords + vec2(").concat(T,", ").concat(T,") * u_direction;"),l+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(b+h+1,"]) * ").concat(v[b+h+1],";")}s=og.replace("[3]","["+n+"]").replace(/}$/,s+"}"),l=sg.replace("[3]","["+n+"]").replace(/}$/,l+"}"),r=ft.initShaders(t,s,l);t.useProgram(r);var A=Bt(Ux(t,e,i,y),3),M=A[0],R=A[1],A=A[2],O=e.findExistTexChannel(c.page),c=(-1===O?(O=e.lockOneChannel(),ft.bindTexture(t,c.page.texture,O)):e.lockChannel(O),A=ft.drawBlur(t,r,R,A,c.page.texture,M,O,u,_,a,i,y,g,x),t.deleteShader(r.vertexShader),t.deleteShader(r.fragmentShader),t.deleteProgram(r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(R),e.releaseLockChannel(O),new ag(t,A,f,d,i,y,o));return e.releaseLockChannel(M,c.page),[c,i,y,o]}}function Kx(t,e,r,i,n,a,o,c,s){var l=Bt(Ux(t,e,n,a),3),u=l[0],_=l[1],l=l[2],h=e.findExistTexChannel(r.page),r=(-1===h?(h=e.lockOneChannel(),ft.bindTexture(t,r.page.texture,h)):e.lockChannel(h),t.useProgram(t.programCm),ft.drawCm(t,t.programCm,h,i),e.releaseLockChannel(h),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(_),new ag(t,l,o,c,n,a,s.slice(0)));return e.releaseLockChannel(u,r.page),[r,n,a,s]}function jx(t,e,r,i,n,a,o,s,l){"multiply"===(o=Fx(o))?h=hg:"screen"===o?h=cg:"overlay"===o?h=ug:"darken"===o?h=_g:"lighten"===o?h=fg:"color-dodge"===o?h=dg:"color-burn"===o?h=pg:"hard-light"===o?h=yg:"soft-light"===o?h=gg:"difference"===o?h=xg:"exclusion"===o?h=vg:"hue"===o?h=mg:"saturation"===o?h=Eg:"color"===o?h=bg:"luminosity"===o&&(h=Tg);o=ft.initShaders(t,lg,h);t.useProgram(o);var h=Bt(Ux(t,e,s,l),3),c=h[0],u=h[1],h=h[2];return ft.drawMbm(t,o,r,i,s,l),t.useProgram(t.program),t.deleteShader(o.vertexShader),t.deleteShader(o.fragmentShader),t.deleteProgram(o),t.deleteFramebuffer(n),t.deleteTexture(a),e.releaseLockChannel(r),e.releaseLockChannel(i),[c,u,h]}var $x={renderCanvas:function(Et,t,h){for(var mt=h.__structs,bt=h.width,Tt=h.height,c=[],u=0,_=mt.length;u<_;u++){var f,d,p,e,y=mt[u],r=y[Ex],g=y[Mx],x=y[Tx],y=y[Ax];r instanceof Ks||(d=(f=r.__config)[_x],p=f[vx],e=f[hx],Ix<=d&&r.__calCache(Et,t,f[yx],f[fx],f[cx],e,r.clientWidth,r.clientHeight,r.offsetWidth,r.offsetHeight,e[qg],e[Zg],e[Jg],e[Qg],e[jg],e[Kg],e[$g],e[Vg],r.__sx1,r.__sx2,r.__sx3,r.__sx4,r.__sx5,r.__sx6,r.__sy1,r.__sy2,r.__sy3,r.__sy4,r.__sy5,r.__sy6),p&&("none"!==e[Ng]?c.push([u,g,x,r,f,y]):u+=(x||0)+Wx(mt,u+(x||0)+1,y||0)))}c.length&&(c.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),c.forEach(function(h){var h=Bt(h,6),c=h[0],u=h[1],_=h[2],f=h[3],t=h[4],h=h[5],Y=Et,e=c,c=u,u=_||0,G=mt,_=h,W=bt,U=Tt,d=t[rx],h=t[ax],p=t[nx],y=t[ix],g=t[cx],x=t[hx];if(d&&d.available){var v=t[_x],r=t[fx];wx(v,Ox)&&(r=f.__calMatrix(v,r,g,x,t),Hx(t[ox],r)),wx(v,Sx)&&(t[lx]=x[Pg]=g[Pg]),wx(v,Cx)&&f.__calFilter(g,x),wx(v,kx)&&(x[Gg]=g[Gg])}else{for(var m,E,b,T=!0,A=f.__sx1,M=f.__sy1,R=[],O=[],S=1,C=c,I=e,w=e+(u||0)+1;I<w;I++){var i,k,D,L,N,P,F,B,H,X,z=G[I],V=z[Ex],K=z[Mx],j=z[Tx],z=z[Ax];V instanceof Ks?(i=V.bbox,Yx(m,i=Lx(a)?i:Gx(i,a,0,0),0,0)):(X=(i=V.__config)[_x],k=i[rx],D=i[ax],L=i[nx],N=i[ix],P=i[hx],F=i[px],"none"===P[Ng]||I!==e&&F?I+=(j||0)+Wx(G,I+(j||0)+1,z||0):(I===e||(C<K?(a=b[sx],Lx(a)&&(a=null),R.push(a),S=b[lx],O.push(S)):K<C&&(R.splice(-(F=C-K)),a=R[K-1],O.splice(-F),S=O[K-1])),C=K,F=(b=i)[cx],K=i[fx],H=B=void 0,X<Ix?(wx(X,Ox)?(B=V.__calMatrix(X,K,F,P,i),Hx(i[ox],B)):B=i[ox],wx(X,Sx)&&(P[Pg]=F[Pg]),H=P[Pg],wx(X,Cx)&&(V.__bbox=null,V.__filterBbox=null,V.__calFilter(F,P)),B=i[ox],wx(X,kx)&&(P[Gg]=F[Gg])):(V.__bbox=null,V.__filterBbox=null,I===e&&V.__calFilter(F,P),B=V.__calMatrix(X,K,F,P,i),Hx(i[ox],B),H=P[Pg]=F[Pg]),I===e?(H=1,E=B,B=Ht.identity()):Lx(a)||(B=Px(a,B)),Hx(i[sx],B),X=void(i[lx]=S*H),X=(K=e<I&&Sg([L,D,N,k]))?(I+=(j||0)+Wx(G,I+(j||0)+1,z||0),K.bbox):I===e?V.bbox:V.filterBbox,X=Gx(X,B,0,0),I===e?m=X.slice(0):Yx(m,X,0,0)))}if(t[rx]=d=zo.getInstance(m,A,M),!d||!d.enabled)return;d.__available=!0;for(var $,r=d,q=r.dx,Z=r.dy,J=r.dbx,Q=r.dby,tt=r.x,et=r.y,n=d.ctx,a=null,C=c,rt={},it={},o=e,nt=e+(u||0)+1;o<nt;o++){var at=G[o],s=at[Ex],ot=at[Mx],st=at[Tx],at=at[Ax];if(s instanceof Ks)s.render(Y,Ix,n,Rg,q,Z),it.hasOwnProperty(o)&&(n=Lg(n,it[o],W,U));else{var lt=s.__config,ht=lt[_x],ct=lt[rx],ut=lt[ax],_t=lt[nx],ft=lt[ix],l=lt[hx];if(rt.hasOwnProperty(o)){for(var dt=Bt(rt[o],3),pt=dt[0],yt=dt[1],dt=dt[2],gt=Mt.getCacheCanvas(W,U,null,"mask2"),xt=(dt.mask=gt,dt.isClip=s.isClip,o+(st||0)+1);--yt;)xt+=(G[xt][Tx]||0)+1;var vt=it[--xt]=it[xt]||[];vt.push([pt,ot,wg,dt]),vt.push([xt,ot,Dg,{ctx:n,target:gt}]),n=gt.ctx}o===e||(C<ot?(Lx(a=$)&&(a=null),R.push(a)):ot<C&&(R.splice(-(C-ot)),a=R[ot-1]));var pt=l[Wg],dt=l[Ug],vt=l[Ng],gt=void 0,_t=(o===e||Lx(a)&&Lx(pt)?gt=null:((dt=dt.slice(0))[0]+=J+s.__sx1-A+tt,dt[1]+=Q+s.__sy1-M+et,gt=io.calMatrixByOrigin(pt,dt),Lx(a)||(gt=Px(a,gt))),gt?n.setTransform(gt[0],gt[1],gt[4],gt[5],gt[12],gt[13]):n.setTransform(1,0,0,1,0,0),C=ot,$=gt,Sg([_t,ut,ft,ct]));o!==e&&_t?(o+=(st||0)+Wx(G,o+(st||0)+1,at||0),"none"!==vt&&(ut=l[Gg],Bx(ut)?n.globalCompositeOperation=Fx(ut):n.globalCompositeOperation="source-over",n.globalAlpha=lt[lx],zo.drawCache(_t,d),n.globalCompositeOperation="source-over")):(Ix<=ht&&s.__calCache(Y,n,lt[yx],lt[fx],lt[cx],l,s.clientWidth,s.clientHeight,s.offsetWidth,s.offsetHeight,l[qg],l[Zg],l[Jg],l[Qg],l[jg],l[Kg],l[$g],l[Vg],s.__sx1,s.__sx2,s.__sx3,s.__sx4,s.__sx5,s.__sx6,s.__sy1,s.__sy2,s.__sy3,s.__sy4,s.__sy5,s.__sy6),ct=(ft=s.render(Y,ht,n,o===e?Mg:Rg,q,Z)||{}).offscreenBlend,ut=ft.offscreenMask,_t=ft.offscreenFilter,lt=ft.offscreenOverflow,ct&&((it[l=o+(st||0)+Wx(G,o+(st||0)+1,at||0)]=it[l]||[]).push([o,ot,kg,ct]),n=ct.target.ctx),ut&&(rt[o+(st||0)+1]=[o,at,ut],n=ut.target.ctx),_t&&((it[s=o+(st||0)+Wx(G,o+(st||0)+1,at||0)]=it[s]||[]).push([o,ot,Ig,_t]),n=_t.target.ctx),lt&&((it[ht=o+(st||0)+Wx(G,o+(st||0)+1,at||0)]=it[ht]||[]).push([o,ot,Cg,lt]),n=lt.target.ctx),it.hasOwnProperty(o)&&(n=Lg(n,it[o],W,U)),"none"===vt&&(o+=(st||0)+Wx(G,o+(st||0)+1,at||0)))}}Hx(t[sx],E),t[_x]=Rx}d&&d.available&&(v=x[Hg],g=x[Bg],r=d,"hidden"===v&&(y&&y.available&&!T||(t[ix]=zo.genOverflow(r,f),T=!0),r=t[ix]||r),g&&g.length&&(h&&h.available&&!T||(t[ax]=zo.genFilter(r,g),T=!0),r=t[ax]||r),!_||p&&p.available&&!T||(t[nx]=zo.genMask(r,f,function(c,u,_){for(var f,d,p,y={},t={},g=u.dx,x=u.dy,v=u.dbx,m=u.dby,E=u.x,b=u.y,e=u.ctx,c=c.__config[mx],T=c[bx],A=c[Tx],M=[],R=[],O=1,S=c[Mx],r=T,C=T+(A||0)+1;r<C;r++){var I=G[r],i=I[Ex],w=I[Mx],n=I[Tx],I=I[Ax];if(i instanceof Ks)i.render(Y,Ix,e,Rg,g,x),t.hasOwnProperty(r)&&(e=Lg(e,t[r],W,U));else{var a=i.__config,k=a[_x],o=a[rx],s=a[ax],D=a[nx],l=a[ix],h=a[hx];if(y.hasOwnProperty(r)){for(var L=Bt(y[r],3),N=L[0],P=L[1],L=L[2],F=Mt.getCacheCanvas(W,U,null,"mask2"),B=(L.mask=F,L.isClip=i.isClip,r+(n||0)+1);--P;)B+=(G[B][Tx]||0)+1;var H=t[--B]=t[B]||[];H.push([N,w,wg,L]),H.push([B,w,Dg,{ctx:e,target:F}]),e=F.ctx}r===T||(S<w?(Lx(f=d)&&(f=null),M.push(f),O=p,R.push(O)):w<S&&(M.splice(-(N=S-w)),f=M[w-1],R.splice(-N),O=R[w-1]));var S=w,L=h[Ng],H=h[Wg],F=h[Ug],D=Sg([D,s,l,o]);D?(r+=(n||0)+Wx(G,r+(n||0)+1,I||0),"none"!==L&&(s=h[Gg],Bx(s)?e.globalCompositeOperation=Fx(s):e.globalCompositeOperation="source-over",e.globalAlpha=a[lx],zo.drawCache(D,u,H,Ht.identity(),F.slice(0),f,_),e.globalCompositeOperation="source-over")):(l=a[cx],o=a[fx],D=s=void 0,k<Ix?(wx(k,Ox)?(s=i.__calMatrix(k,o,l,h,a),Hx(a[ox],s)):s=a[ox],wx(k,Sx)&&(h[Pg]=l[Pg]),D=h[Pg],wx(k,Cx)&&(i.__bbox=null,i.__filterBbox=null,i.__calFilter(l,h)),s=a[ox],wx(k,kx)&&(h[Gg]=l[Gg])):(i.__bbox=null,i.__filterBbox=null,r===T&&i.__calFilter(l,h),s=i.__calMatrix(k,o,l,h,a),Hx(a[ox],s),D=h[Pg]=l[Pg]),r===T?(D=1,s=Ht.identity()):f&&(s=Px(f,s)),Hx(a[sx],s),o=void(p=a[lx]=O*D),r===T||Lx(f)&&Lx(H)?o=null:((F=F.slice(0))[0]+=v+i.__sx1-sx1+E,F[1]+=m+i.__sy1-sy1+b,o=io.calMatrixByOrigin(H,F),Lx(f)||(o=Px(f,o))),(o=(d=o)&&(At.equalArr(o,_)?Ht.identity():(_=Ht.inverse(_),Ht.multiply(_,o))))?e.setTransform(o[0],o[1],o[4],o[5],o[12],o[13]):e.setTransform(1,0,0,1,0,0),Ix<=k&&i.__calCache(Y,e,a[yx],a[fx],a[cx],h,i.clientWidth,i.clientHeight,i.offsetWidth,i.offsetHeight,h[qg],h[Zg],h[Jg],h[Qg],h[jg],h[Kg],h[$g],h[Vg],i.__sx1,i.__sx2,i.__sx3,i.__sx4,i.__sx5,i.__sx6,i.__sy1,i.__sy2,i.__sy3,i.__sy4,i.__sy5,i.__sy6),s=(l=i.render(Y,k,e,Rg,g,x)||{}).offscreenBlend,D=l.offscreenMask,o=l.offscreenFilter,a=l.offscreenOverflow,s&&((t[h=r+(n||0)+Wx(G,r+(n||0)+1,I||0)]=t[h]||[]).push([r,w,kg,s]),e=s.target.ctx),D&&(y[r+(n||0)+1]=[r,I,D],e=D.target.ctx),o&&((t[i=r+(n||0)+Wx(G,r+(n||0)+1,I||0)]=t[i]||[]).push([r,w,Ig,o]),e=o.target.ctx),a&&((t[k=r+(n||0)+Wx(G,r+(n||0)+1,I||0)]=t[k]||[]).push([r,w,Cg,a]),e=a.target.ctx),t.hasOwnProperty(r)&&(e=Lg(e,t[r],W,U)),"none"===L&&(r+=(n||0)+Wx(G,r+(n||0)+1,I||0)))}}})))}));for(var v={},i={},n=0,m=mt.length;n<m;n++){var a=mt[n],E=a[Ex],b=a[Mx],o=a[Tx],a=a[Ax];if(E instanceof Ks)E.render(Et,Ix,t,Ag,0,0),i.hasOwnProperty(n)&&(t=Lg(t,i[n],bt,Tt));else{var s=E.__config,T=s[rx],l=s[ax],A=s[nx],M=s[ix],R=s[_x],O=s[hx],S=O[Ng],C=O[Gg],O=O[Pg];if(v.hasOwnProperty(n)){for(var I=Bt(v[n],3),w=I[0],k=I[1],I=I[2],D=Mt.getCacheCanvas(bt,Tt,null,"mask2"),L=(I.mask=D,I.isClip=E.isClip,n+(o||0)+1);--k;)L+=(mt[L][Tx]||0)+1;var N=i[--L]=i[L]||[];N.push([w,b,wg,I]),N.push([L,b,Dg,{ctx:t,target:D}]),t=D.ctx}w=Sg([A,l,M,T]);if(w){I=n;n+=(o||0)+Wx(mt,n+(o||0)+1,a||0),"none"!==S&&(Bx(C)?t.globalCompositeOperation=Fx(C):t.globalCompositeOperation="source-over",N=s[ox],A=(D=s[sx]).slice(0),(l=s[yx].matrixEvent)&&!Lx(l)&&(N=Px(l,N)),At.assignMatrix(D,N),zo.draw(t,O,D,w),t.globalCompositeOperation="source-over",i.hasOwnProperty(n)&&(t=Lg(t,i[n],bt,Tt)),(M=!(M=T.isNew)&&!At.equalArr(A,D)||M)&&function c(t,u,_,f,d){for(var e,p=[],y=d,g=f,r=u+1,x=u+(_||0)+1;r<x;r++){var i,v,n,m,E,a,o=(h=t[r])[Ex],s=h[Mx],l=h[Tx],h=h[Ax];o instanceof Ks||(v=(i=o.__config)[sx],n=i[rx],m=i[cx],E=i[hx],a=i[fx],"none"!==E[Ng]?(g<s?(Lx(e=y)&&(e=null),p.push(e)):s<g&&(p.splice(-(g-s)),e=p[s-1]),g=s,v=v.slice(0),a[tx]=null,o=o.__calMatrix(Ix,a,m,E,i),Hx(i[ox],o),Lx(e)||(o=Px(e,o)),Hx(i[sx],o),y=o,n&&n.available&&((a=!(a=n.isNew)&&!At.equalArr(v,o)||a)&&c(t,r,l||0,s,o),n.__isNew=!1,r+=(l||0)+Wx(t,r+(l||0)+1,h||0))):r+=(l||0)+Wx(t,r+(l||0)+1,h||0))}}(mt,I,o||0,b,D),T.__isNew=!1)}else{C=E.render(Et,R,t,Ag,0,0)||{},s=C.offscreenBlend,l=C.offscreenMask,O=C.offscreenFilter,A=C.offscreenOverflow;if(s&&((i[M=n+(o||0)+Wx(mt,n+(o||0)+1,a||0)]=i[M]||[]).push([n,b,kg,s]),t=s.target.ctx),l&&(v[n+(o||0)+1]=[n,a,l],t=l.target.ctx),O&&((i[T=n+(o||0)+Wx(mt,n+(o||0)+1,a||0)]=i[T]||[]).push([n,b,Ig,O]),t=O.target.ctx),A&&((i[E=n+(o||0)+Wx(mt,n+(o||0)+1,a||0)]=i[E]||[]).push([n,b,Cg,A]),t=A.target.ctx),i.hasOwnProperty(n)&&(t=Lg(t,i[n],bt,Tt)),"none"===S){for(var P=(o||0)+Wx(mt,n+(o||0)+1,a||0),F=n+1;F<=n+P;F++)i.hasOwnProperty(F)&&(t=Lg(t,i[F],bt,Tt));n+=P}}}}},renderSvg:function(c,u,_,f){var d=_.__structs,p=_.width,y=_.height,g={};if(!f)for(var x=0,v=d.length;x<v;x++){var m=d[x],E=m[Ex],b=m[Tx],m=m[Ax],E=E.__config,T=E[_x],E=E[dx];m&&(Ix<=T||wx(T,Ox|Sx))&&(g[x+(b||0)+1+m-1]=T),T<Ix&&(g.hasOwnProperty(x)?(b=g[x],!wx(T,Ox)&&b<Ix&&!wx(b,Ox)&&E.forEach(function(t){u.addCache(t)})):E.forEach(function(t){u.addCache(t)}))}for(var A,M,R,O={},S=[],C=[],I=0,t=0,w=d.length;t<w;t++){var k,D,L,e=d[t],r=e[Ex],N=e[Tx],P=e[Ax],e=e[Mx],i=r.__config,n=i[rx],a=i[_x],F=i[dx],B=i[hx],H=B[Ng],o=(P&&"none"!==H&&(O[(k=(D=t+(N||0)+1)+P)-1]={index:t,start:D,end:k,isClip:d[D][Ex].isClip}),e<I?(S.splice(-(k=I-e)),A=S[e-1],C.splice(-k),M=C[e-1]):I<e&&(S.push(R[ox]),D=R[xx],C.push(D),M=D),R=i,void 0);if(a<Ix&&!(r instanceof Ks)?(i[_x]=Rx,o=i[xx],n&&n.available?(t+=N||0,o.cache=!0):(n&&(n.available=!0),o=i[xx]=r.__virtualDom=At.extend({},o),r instanceof Pp&&!(r instanceof Ty)&&(o.children=[]),"none"===H?(t+=N||0,P&&(t+=P)):delete o.cache),n=i[cx],s=i[hx],l=i[fx],wx(a,Ox)&&(l=r.__calMatrix(a,l,n,s,i),L=i[ox],Hx(L,l),!l||Lx(l)?delete o.transform:o.transform="matrix("+At.joinArr(Ht.m2m6(l),",")+")",A&&l&&(l=Px(A,l)),L=i[sx],Hx(L,l)),wx(a,Sx)&&(1===(L=s[Pg]=n[Pg])?delete o.opacity:o.opacity=L),wx(a,Cx)&&(l=r.__calFilter(n,s),(l=ne.svgFilter(l))?o.filter=l:delete o.filter),wx(a,kx)&&(l=s[Gg]=n[Gg],Bx(l)?o.mixBlendMode=Fx(l):delete o.mixBlendMode),o.lv=a):(i[dx]&&i[dx].splice(0),r.render(c,a,u,Ag,0,0),o=i[xx],"none"===(H=B[Ng])&&(t+=N||0,P&&(t+=P))),O.hasOwnProperty(t)&&(g.hasOwnProperty(t)||Ix<=a||wx(a,Ox|Sx))){var s=O[t],n=s.index,l=s.start,G=s.end,Y=s.isClip,W=d[n][Ex],U=[];Y&&U.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(p,",0L").concat(p,",").concat(y,"L0,").concat(y,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var X=l;X<G;X++){var z=d[X][Ex],V=z.computedStyle,K=V[Ng],j=V[Fg],$=V[Yg],V=z.virtualDom,q=V.children,Z=V.opacity;if("none"!==K&&"hidden"!==j)for(var q=At.clone(q),U=U.concat(q),J=0,Q=q.length;J<Q;J++){var tt=q[J],et=tt.tagName,h=tt.props;if("path"===et){if(Y)for(var rt=0,it=h.length;rt<it;rt++){var nt=h[rt];"fill"===nt[0]&&(nt[1]=At.int2invert($[0]))}var tt=z.matrix,at=Nx(W.matrix),tt=Px(at,tt);h.push(["transform","matrix(".concat(At.joinArr(Ht.m2m6(tt),","),")")]),At.isNil(Z)||1===Z||h.push(["opacity",Z])}else if("image"===et){for(var ot=-1,st=0,lt=h.length;st<lt;st++)if("transform"===h[st][0]){ot=st;break}-1===ot?(at=Nx(W.matrix),Lx(at)||h.push(["transform","matrix(".concat(At.joinArr(Ht.m2m6(at),","),")")])):(tt=h[ot][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),et=Nx(W.matrix),tt=Px(et,tt),h[ot][1]="matrix(".concat(At.joinArr(Ht.m2m6(tt),","),")"))}}}for(var ht=F.length-1;0<=ht;ht--)"mask"===F[ht].tagName&&F.splice(ht,1);B={tagName:"mask",props:[],children:U},H=u.add(B);F.push(B),W.virtualDom.mask="url(#"+H+")"}M&&!r.isMask&&M.children.push(o),0===t&&(A=i[ox],M=o),I=e}},renderWebgl:function(o,x,s){for(var l,h,c,u,_,b=s.__structs,v=s.width,m=s.height,E=s.texCache,t=.5*v,e=.5*m,f=[],d=[],p=1,y=[],g=0,T=[],A=0,M=b.length;A<M;A++){var r,R,O,S,C,I,w,k,D,L,N,i,P=b[A],n=P[Ex],F=P[Mx],B=P[Tx],P=P[Ax];n instanceof Ks?Ix<=c&&n.render(o,Ix,x,Og,0,0):(w=(r=n.__config)[_x],R=(0===A||(g<F?(l=u[sx],Lx(l)&&(l=null),f.push(l),p=u[lx],d.push(p),h=u[gx],Lx(h)&&(h=null),y.push(h)):F<g&&(f.splice(-(R=g-F)),l=f[F-1],d.splice(-R),p=d[F-1],y.splice(-R),h=y[F-1])),c=w,g=F,(u=r)[rx]),"none"!==(i=r[hx])[Ng]?(w<Ix?(r[_x]=Rx,I=r[cx],C=r[fx],O=r[sx],S=void(wx(w,Dx)&&n.__calPerspective(C,I,i,r)),wx(w,Ox)?(S=n.__calMatrix(w,C,I,i,r),Hx(r[ox],S)):S=r[ox],h&&(S=Px(h,S)),l&&(S=Px(l,S)),C=void Hx(O,S),C=wx(w,Sx)?i[Pg]=I[Pg]:i[Pg],r[lx]=p*C,wx(w,Cx)&&(n.__bbox=null,n.__filterBbox=null,n.__calFilter(I,i)),wx(w,kx)&&(i[Gg]=I[Gg]),R&&R.available&&(A+=B||0)):(O=n.render(o,w,x,Og,0,0))&&Mt.isWebGLTexture(O.texture)&&(S=n.__sx1,C=n.__sy1,I=n.offsetWidth,w=n.offsetHeight,k=n.bbox,r[ex]=new ag(x,O.texture,S,C,I,w,k),x.viewport(0,0,v,m),x.useProgram(x.program)),w=r[ux],k=r[vx],D=i[Hg],L=i[Bg],N=i[Gg],i=i[Wg],N=Bx(N),i=io.isPerspectiveMatrix(i)||h,(k||P||L.length||"hidden"===D&&B||N||i)&&(N&&(_=!0),T.push([A,F,B,n,r,w,P,L,D,i,k]))):A+=B||0)}var H,G,Y,W,U={};T.length&&(T.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),H={},T.forEach(function(t){var t=Bt(t,11),e=t[0],c=t[1],r=t[2],i=t[3],n=t[4],a=t[5],u=t[6],o=t[7],_=t[8],s=t[9],t=t[10];if(s){for(var f=n[yx];f;){var l=f.__config,d=l[mx][bx];if(H[d])break;(io.isPerspectiveMatrix(l[ox])||l[gx])&&(H[d]=!0),f=l[yx]}if(!(H[e]||u||o.length||"hidden"===_||t))return}var h,s=n[ex],t=n[rx],p=n[ax],y=n[nx],g=n[ix],s=(t&&t.available||(s=(r=Bt(Xx(x,E,i,0,e,r||0,b,s,a,0,v,m),2))[0],t=r=r[1],h=!0,(a=s)||(n[rx]=r)),t);"hidden"===_&&(g&&g.available&&!h?s=g:(r=function(t,e,r,i,c,u){var n,a=i.bbox,o=r.__sx1,s=r.__sy1,l=r.clientWidth,r=r.clientHeight,h=o+l,_=s+r;if(!(a[0]>=o&&a[1]>=s&&a[2]<=h&&_))return o=[o,s,h,_],s=Bt(Ux(t,e,l,r),3),h=s[0],_=s[1],s=s[2],-1===(n=e.findExistTexChannel(i.page))?(n=e.lockOneChannel(),ft.bindTexture(t,i.page.texture,n)):e.lockChannel(n),t.useProgram(t.programOverflow),ft.drawOverflow(t,n,o[0]-a[0],o[1]-a[1],l,r,i.width,i.height),e.releaseLockChannel(n),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(_),a=new ag(t,s,i.sx1,i.sy1,l,r,o),e.releaseLockChannel(h,a.page),a}(x,E,i,s,v,m))&&(s=r,h=!0,a||(n[ix]=s))),o.length&&(p&&p.available&&!h?s=p:(s=zx(x,E,0,t=s,o,v,m))!==t&&(h=!0,a||(n[ax]=s))),!u||y&&y.available&&!h||(s=function(t,e,r,i,n,c,u,_,f){var d=n.sx1,p=n.sy1,y=n.width,g=n.height,x=n.bbox,v=n.dx,m=n.dy,E=.5*y,b=.5*g,T=(i=i[hx])[Wg],i=i[Ug],A=Lx(T)?Ht.identity():((q=i.slice(0))[0]+=d+v,q[1]+=p+m,io.calMatrixByOrigin(T,q));A=Ht.inverse(A);for(var T=(i=Bt(Ux(t,e,y,g),3))[0],M=i[1],i=i[2],a=r.next,R=a.isClip,O=[];a&&a.isMask&&a.isClip===R;)O.push(a),a=a.next;for(var S=0,C=O.length;S<C;S++)for(var I=[],w=void 0,k=void 0,D=[],L=1,N=void 0,P=_,F=O[S].__config[mx],B=F[bx],o=B,H=B+(F[Tx]||0)+1;o<H;o++){var G=f[o],Y=G[Ex],s=G[Mx],W=G[Tx],G=G[Ax],l=Y.__config,U=l[ex],X=l[hx],z=l[ux];if("none"!==X[Ng])if(Y instanceof Ks){if(U&&U.available)e.addTexAndDrawWhenLimit(t,U,L,e.last[2],E,b,0,0,!0);else if(z)return}else{var X=l[ex],Y=l[nx],U=l[ax],V=l[ix],K=l[rx],l=l[hx],j=l[Pg],$=l[Wg],l=l[Ug],h=(o===B||(P<s?(Lx(w=k)&&(w=null),I.push(w),L=N,D.push(L)):s<P&&(I.splice(-(h=P-s)),w=I[s-1],D.splice(-h),L=D[s-1])),P=s,Sg([Y,U,V,K,X]));if(h){var q,s=void 0,s=Lx($)?Ht.identity():((Y=l.slice(0))[0]+=h.bbox[0]+v,Y[1]+=h.bbox[1]+m,io.calMatrixByOrigin($,Y));s=Ht.multiply(A,s),(q=l.slice(0))[0]+=h.bbox[0]+v,q[1]+=h.bbox[1]+m,k=io.calMatrixByOrigin($,q),Lx(w)||(k=Px(w,k)),e.addTexAndDrawWhenLimit(t,h,N=L*j,s,E,b,v,m,!0),h!==X&&(o+=(W||0)+Wx(f,o+(W||0)+1,G||0))}else if(z)return}else o+=(W||0)+Wx(f,o+(W||0)+1,G||0)}e.refresh(t,E,b),t.deleteFramebuffer(M),-1===(r=e.findExistTexChannel(n.page))?(r=e.lockOneChannel(),ft.bindTexture(t,n.page.texture,r)):e.lockChannel(r);var n=(M=Bt(Ux(t,e,y,g),3))[0],Z=M[1],M=M[2],J=R?t.programClip:t.programMask,J=(t.useProgram(J),ft.drawMask(t,T,r,J),t.deleteTexture(i),e.releaseLockChannel(T),e.releaseLockChannel(r),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(Z),new ag(t,M,d,p,y,g,x));return e.releaseLockChannel(n,J.page),J}(x,E,i,n,s,v,m,c,b),a||(n[nx]=s)),a&&(U[e]=s)})),_&&(G=(s=Bt(Ux(x,E,v,m),3))[0],Y=s[1],W=s[2]);for(var X,z,V,K,j,$=0,q=b.length;$<q;$++){var Z,J,Q,tt,et,rt,it,nt,at,ot,st,lt,ht,ct=b[$],ut=ct[Ex],_t=ct[Tx],ct=ct[Ax],a=ut.__config;ut instanceof Ks?(Q=a[ex],et=a[ux],J=(Z=a[yx].__config)[sx],Z=Z[lx],Q&&Q.available?E.addTexAndDrawWhenLimit(x,Q,Z,J,t,e,0,0,!0):et&&(Q=Mt.getCacheCanvas(v,m,"__$$OVERSIZE$$__"),ut.render(o,0,x,Ag,0,0),et=E.lockOneChannel(),tt=ft.createTexture(x,Q.canvas,et),tt=new ag(x,tt,0,0,v,m,[0,0,v,m]),E.addTexAndDrawWhenLimit(x,tt,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),Q.ctx.setTransform(1,0,0,1,0,0),Q.ctx.globalAlpha=1,Q.ctx.clearRect(0,0,v,m),tt.release(),E.releaseLockChannel(et))):(Z=a[lx],J=a[sx],Q=a[ux],tt=a[ex],et=a[rx],st=a[ax],lt=a[nx],at=a[ix],rt=a[_x],it=(a=a[hx])[Ng],nt=a[Fg],a=a[Gg],"none"!==it?((lt=Sg([lt,st,at,et,tt]))?(_&&Bx(a)?(E.refresh(x,t,e,!0),at=(st=Bt(Ux(x,E,v,m),3))[0],ot=st[1],st=st[2],E.addTexAndDrawWhenLimit(x,lt,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),G=(at=Bt(jx(x,E,G,at,Y,W,Fx(a),v,m),3))[0],Y=at[1],W=at[2],x.deleteFramebuffer(ot),x.deleteTexture(st)):E.addTexAndDrawWhenLimit(x,lt,Z,J,t,e,0,0,!0),lt!==tt&&($+=(_t||0)+Wx(b,$+(_t||0)+1,ct||0))):U.hasOwnProperty($)?(at=U[$],_&&Bx(a)?(E.refresh(x,t,e,!0),st=(ot=Bt(Ux(x,E,v,m),3))[0],lt=ot[1],ht=ot[2],E.addTexAndDrawWhenLimit(x,at,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),G=(st=Bt(jx(x,E,G,st,Y,W,Fx(a),v,m),3))[0],Y=st[1],W=st[2],x.deleteFramebuffer(lt),x.deleteTexture(ht)):E.addTexAndDrawWhenLimit(x,at,Z,J,t,e,0,0,!0),$+=(_t||0)+Wx(b,$+(_t||0)+1,ct||0)):Q&&"none"!==it&&"hidden"!==nt&&(a=Mt.getCacheCanvas(v,m,"__$$OVERSIZE$$__"),ut.render(o,rt,x,Ag,0,0),st=E.lockOneChannel(),lt=ft.createTexture(x,a.canvas,st),ht=new ag(x,lt,0,0,v,m,[0,0,v,m]),E.addTexAndDrawWhenLimit(x,ht,Z,J,t,e,0,0,!0),E.refresh(x,t,e,!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.globalAlpha=1,a.ctx.clearRect(0,0,v,m),ht.release(),E.releaseLockChannel(st)),ut.hookGlRender&&ut.hookGlRender(x,Z,J,t,e,0,0,!0)):$+=(_t||0)+Wx(b,$+(_t||0)+1,ct||0))}E.refresh(x,t,e,!0),_&&(x.bindFramebuffer(x.FRAMEBUFFER,null),E.releaseLockChannel(G),x.deleteFramebuffer(Y),s=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,s),x.bufferData(x.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),x.STATIC_DRAW),X=x.getAttribLocation(x.program,"a_position"),x.vertexAttribPointer(X,2,x.FLOAT,!1,0,0),x.enableVertexAttribArray(X),z=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,z),x.bufferData(x.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),x.STATIC_DRAW),V=x.getAttribLocation(x.program,"a_texCoords"),x.vertexAttribPointer(V,2,x.FLOAT,!1,0,0),x.enableVertexAttribArray(V),K=x.createBuffer(),x.bindBuffer(x.ARRAY_BUFFER,K),x.bufferData(x.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),x.STATIC_DRAW),j=x.getAttribLocation(x.program,"a_opacity"),x.vertexAttribPointer(j,1,x.FLOAT,!1,0,0),x.enableVertexAttribArray(j),j=x.getUniformLocation(x.program,"u_texture"),x.uniform1i(j,G),x.drawArrays(x.TRIANGLES,0,6),x.deleteBuffer(s),x.deleteBuffer(z),x.deleteBuffer(K),x.disableVertexAttribArray(X),x.disableVertexAttribArray(V),x.deleteTexture(W))}},qx="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Zx=function(){function e(t){_(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return f(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,n,a){var o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,h=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,c=8<arguments.length?arguments[8]:void 0,s=this.__pages,u=this.__list,l=e.page;-1<s.indexOf(l)||(s.length>=this.__units-this.__lockUnits&&this.refresh(t,n,a,c),s.push(l)),u.push([e,r,i,o,h])}},{key:"refresh",value:function(t,c,u,_){var f=this.__pages,d=this.__list;if(f.length){var e=this.channels,p=this.locks,y={},g=(e.forEach(function(t,e){t&&(t=t.uuid,y[t]=e)}),this.__units),r=new Array(g),i=[];if(f.forEach(function(t){var e=t.uuid;y.hasOwnProperty(e)?(e=y[e],r[e]=t):i.push(t)}),i.length){for(var n=0;n<g&&(r[n]||e[n]||p[n]||(r[n]=i.shift(),i.length));n++);var x=i.length;if(x){for(var v=[],a=0;a<g;a++)r[a]||p[a]||v.push([a,e[a]]);v.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var o=0;o<x;o++)r[v[o][0]]=i[o]}}for(var m={},s=0,E=r.length;s<E;s++){var l,h=r[s];h&&((l=e[s])&&l===h&&!h.update||(h instanceof ng?ft.bindTexture(t,h.texture,s):(!l||l instanceof ng||t.deleteTexture(l.texture),h.texture=ft.createTexture(t,h.canvas,s)),e[s]=h),m[h.uuid]=s,h.update=!1,h.time=Mt.now())}ft.drawTextureCache(t,d,m,c,u,_),f.splice(0),d.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i,n=this.__units,a=[],o=0;o<n;o++)e[o]||a.push([o,t[o]]);if(a.length)return a.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]}),t[i=a[0][0]]=null,e[i]=!0,this.__lockUnits++,i;throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),e}(),e=T.STYLE_KEY,Jx=e.TOP,Br=e.RIGHT,Qx=e.BOTTOM,yi=e.LEFT,tv=e.POSITION,ev=e.DISPLAY,rv=e.VISIBILITY,iv=e.COLOR,nv=e.WIDTH,av=e.HEIGHT,ov=e.Z_INDEX,sv=e.MARGIN_TOP,lv=e.MARGIN_LEFT,hv=e.MARGIN_BOTTOM,cv=e.PADDING_TOP,uv=e.PADDING_LEFT,_v=e.PADDING_BOTTOM,fv=e.BORDER_TOP_WIDTH,dv=e.BORDER_LEFT_WIDTH,pv=e.BORDER_BOTTOM_WIDTH,yv=e.POINTER_EVENTS,gv=e.WRITING_MODE,xv=e.TEXT_STROKE_COLOR,vv=e.TEXT_STROKE_WIDTH,mv=e.TEXT_STROKE_OVER,Oi=T.UPDATE_KEY,Ev=Oi.UPDATE_NODE,bv=Oi.UPDATE_STYLE,Tv=Oi.UPDATE_KEYS,Av=Oi.UPDATE_COMPONENT,Mv=Oi.UPDATE_FOCUS,Rv=Oi.UPDATE_OVERWRITE,Ov=Oi.UPDATE_LIST,Sv=Oi.UPDATE_CONFIG,Cv=Oi.UPDATE_ADD_DOM,Iv=Oi.UPDATE_REMOVE_DOM,xi=T.NODE_KEY,wv=xi.NODE_TAG_NAME,kv=xi.NODE_CACHE_STYLE,Dv=xi.NODE_CACHE_PROPS,Lv=xi.NODE_CURRENT_STYLE,Nv=xi.NODE_COMPUTED_STYLE,Pv=xi.NODE_CURRENT_PROPS,Fv=xi.NODE_DOM_PARENT,Bv=xi.NODE_IS_MASK,Hv=xi.NODE_REFRESH_LV,Gv=xi.NODE_IS_DESTROYED,Yv=xi.NODE_STYLE,Wv=xi.NODE_UPDATE_HASH,Uv=xi.NODE_UNIQUE_UPDATE_ID,Xv=xi.NODE_CACHE,zv=xi.NODE_CACHE_TOTAL,Vv=xi.NODE_CACHE_FILTER,Kv=xi.NODE_CACHE_OVERFLOW,jv=xi.NODE_CACHE_MASK,$v=xi.NODE_STRUCT,A=T.STRUCT_KEY,qv=A.STRUCT_INDEX,Zv=A.STRUCT_TOTAL,Jv=A.STRUCT_NODE,Qv=(a(n={},Jx,!0),a(n,Br,!0),a(n,Qx,!0),a(n,yi,!0),n),tm=At.isNil,em=At.isObject,rm=At.isFunction,im=r.AUTO,nm=r.PX,am=r.PERCENT,om=r.INHERIT,sm=vn.isRelativeOrAbsolute,lm=vn.equalStyle,hm=es.contain,cm=es.getLevel,um=es.isRepaint,_m=es.NONE,fm=es.FILTER,dm=es.PERSPECTIVE,pm=es.REPAINT,ym=es.REFLOW,gm=es.REBUILD,xm=Tr.isIgnore,vm=Tr.isGeom,mm={canvas:"canvas",svg:"svg",webgl:"canvas"};var Em=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function bm(t,e){return t.currentStyle[e][1]!==im}function Tm(t,e){var r=bm(t,nv)&&bm(t,av);if(r&&e){e=t.domParent;if(e&&("flex"===e.currentStyle[ev]||"flex"===e.computedStyle[ev]))return}return r}function Am(t){return t.hasOwnProperty("__uniqueReflowId")}var Mm=0;function Rm(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=Mm,e[Mm++]={node:t,component:r,addDom:i})}var Om=0;function Sm(c,u,t,_,f,d,p,y){var e=t[Ev],i=t[bv],g=t[Rv],x=t[Mv],r=t[Av],n=t[Ov],a=t[Tv],o=t[Sv],v=t[Cv],t=t[Iv];if(!o[Gv]){g&&Object.assign(o[Yv],g),n&&!r&&(a=(a||[]).slice(0),m={},a.forEach(function(t){m[t]=!0}),n.forEach(function(t){var e=t[bv],r=t[Rv];(t[Tv]||[]).forEach(function(t){m.hasOwnProperty(t)||(m[t]=!0,a.push(t))}),r&&Object.assign(o[Yv],r),e&&(i?Object.assign(i,e):i=e)}));var m,E,b,T,A,M,R,O,S=o[wv],C=o[kv],I=o[Dv],w=o[Lv],g=o[Nv],k=o[Pv],n=o[Fv],D=o[Bv],s=x||_m;if(!r&&i&&a)for(var L=0,N=a.length;L<N;L++){var l=a[L],P=i[l];if(e instanceof u1&&vm(S,l))lm(l,P,k[l],e)||(s|=pm,I[l]=void 0,k[l]=P);else if(!lm(l,P,w[l],e))if(xm(l))C[l]=void 0,w[l]=P;else{if(Qv.hasOwnProperty(l)){var F=w[tv];if("relative"!==F&&"absolute"!==F){delete i[l];continue}}else l===ev&&(A=!0);s|=cm(l),C[l]=void 0,w[l]=P,l===ov&&e!==u?E=!0:l===rv?b=!0:l===iv?T=!0:l===xv?M=!0:l===vv?R=!0:l===mv&&(O=!0)}}if(s!==_m||r){if("none"!==g[ev]||A){if(E&&n&&delete n.__zIndexChildren,b||T||M||R||O)for(var B=u.__structs,x=e.__config[$v],H=x[qv]+1,G=H+x[Zv];H<G;H++){var Y,W,U,X=B[H],z=X[Jv],X=X[Zv];z instanceof Ks||(W=(Y=z.__config)[Lv],U=void 0,(U=b&&W[rv][1]===om||T&&W[iv][1]===om||M&&W[xv][1]===om||R&&W[vv][1]===om||O&&W[mv][1]===om?!0:U)?(Y[Hv]|=pm,z.clearCache()):H+=X||0)}if(D){for(var V=e.prev;V&&V.isMask;)V=V.prev;V&&V.__config[jv]&&V.__config[jv].release()}var K=n;if(A&&K){x=K.__config;if("none"===x[Lv][ev]||"none"===x[Nv][ev])return void(g[ev]="none")}!r&&um(s)?(E&&c===et.SVG&&(s|=pm,n&&Cm(n)),E&&!r&&p&&n&&!n.hasOwnProperty("__uniqueZId")&&(p[Om]=!0,n.__uniqueZId=Om++,y.push(n))):_.push({node:e,style:i,component:r,addDom:v,removeDom:t}),o[Hv]|=s,u.__rlv=r||v||t?gm:Math.max(u.__rlv,s);D=pm<=s||c===et.SVG&&e instanceof u1;for(D&&o[Xv]&&o[Xv].release(),(D||hm(s,dm))&&(o[zv]&&o[zv].release(),o[jv]&&o[jv].release(),o[Kv]&&o[Kv].release()),(D||hm(s,fm))&&o[Vv]&&o[Vv].release();K;){var h=K.__config;if(h.hasOwnProperty(Uv)){var j=h[Uv];if(f.hasOwnProperty(j))break;f[j]=!0}else f[Om]=!0,h[Uv]=Om++,d.push(h);j=h[Hv];pm<=j&&h[Xv]&&h[Xv].release(),h[zv]&&h[zv].release(),h[Vv]&&h[Vv].release(),h[jv]&&h[jv].release(),h[Kv]&&h[Kv].release(),K=h[Fv]}return!0}}else delete o[Uv]}}function Cm(t,e){var r=t.__config;e?r[Hv]|=pm:r[zv].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof bl?t.shadowRoot:t)instanceof Ks||Cm(t,!0)})}var Im=0,wm=function(){d(n,Pp);var i=p(n);function n(t,e,r){return _(this,n),(t=i.call(this,t,e)).__cd=r||[],t.__dom=null,t.__mw=0,t.__mh=0,t.__taskUp=[],t.__taskCp=[],t.__ref={},t.__reflowList=[{node:l(t)}],t.__animateController=new rg,yl.mix(l(t)),t.__config[Wv]=t.__updateHash={},t.__uuid=Im++,t.__rlv=gm,t}return f(n,[{key:"__initProps",value:function(){var t=this.props.width,t=(tm(t)||0<(t=parseFloat(t)||0)&&(this.__width=t),this.props.height);tm(t)||0<(t=parseFloat(t)||0)&&(this.__height=t)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?At.joinSourceArray(e):At.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+At.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,n,a,o,s,l,h;return-1===["touchend","touchcancel"].indexOf(t.type)&&(o=this.dom,e=this.__scx,r=this.__scy,s=(o=o.getBoundingClientRect()).x,i=o.y,l=o.left,n=o.top,a=o.width,o=o.height,s=(h=t.touches?t.touches[0]:t).clientX-(s=s||l||0),l=h.clientY-(l=i||n||0),tm(e)?s*=this.width/a:s/=e,tm(r)?l*=this.height/o:l/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:l,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget)return t=this.__wrapEvent(t),this.__emitEvent(t),t}},{key:"appendTo",value:function(t){t=function(t){if(At.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=dl.initRoot(this.__cd,this),this.__initProps();var a,o,e,r=(this.__root=this).tagName,r=mm[r],r=("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===r?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(r),this.__dom||(t.innerHTML=this.__genHtml(r),this.__dom=t.querySelector(r))),this.__defs=this.dom.__defs||Ay.getInstance(this.__uuid),this.width&&this.height||(r=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(r.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(r.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),this.width&&this.height||Mt.warn("Karas render target with a width or height of 0."),Object.assign({},J,this.props.contextAttributes));"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d",r),this.__renderMode=et.CANVAS):"svg"===this.tagName?this.__renderMode=et.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",r),this.__renderMode=et.WEBGL,t.program=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=ft.initShaders(t,qx,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=ft.initShaders(t,qx,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=ft.initShaders(t,qx,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.programDs=ft.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_color[4];void main(){vec4 c=texture2D(u_texture,v_texCoords);gl_FragColor=vec4(u_color[0]*c.a,u_color[1]*c.a,u_color[2]*c.a,u_color[3]*c.a);}"),t.useProgram(t.program),r=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new Zx(r)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof n&&this.dom.__root.destroy(),this.__eventCbList=(a=this.dom,o=n,e=[],Em.forEach(function(n){function t(t){var e=a.__root;if(e&&e instanceof o)if(-1<["touchend","touchcancel","touchmove"].indexOf(n)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}a.addEventListener(n,t),e.push([n,t])}),e),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,n=this.ctx,a=this.defs,o=this.width,s=this.height;if(!r){if(a.clear(),e)this.__checkRoot(i,o,s);else if(!this.__checkUpdate(i,n,o,s))return;this.__checkReflow(o,s),i!==et.CANVAS||this.props.noRender?i!==et.SVG||this.props.noRender?i!==et.WEBGL||this.props.noRender||(this.__clear(n,i),$x.renderWebgl(i,n,this)):($x.renderSvg(i,a,this,e),(r=this.virtualDom).defs=a.value,this.dom.__vd?W1(this.dom,this.dom.__vd,r):this.dom.innerHTML=At.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=a):(this.__clear(n,i),$x.renderCanvas(i,n,this)),rm(t)&&t(),this.emit(yl.REFRESH,this.__rlv),this.__rlv=_m}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var e,t=this.dom,t=(t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null),this.ctx);this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t!==this.width||e!==this.height?(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r)):rm(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var i,n=this,e=this.taskUp;this.isDestroyed||(e.length||(Jl.nextFrame({__before:function(r){n.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){em(t)&&rm(t.__before)&&t.__before(r)})},__after:function(e){n.isDestroyed||i.forEach(function(t){em(t)&&rm(t.__after)?t.__after(e):rm(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"addForceRefreshTask",value:function(t){this.__hasRootUpdate=!0,this.addRefreshTask(t)}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,n=this,i=this.taskCp;this.isDestroyed||(i.length||(Jl.__nextFrameCp({__before:function(e){n.isDestroyed||(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),D1.check(n),D1.updateList.length&&D1.updateList.forEach(function(t){var e=t.root,r=t.shadowRoot,i=(r instanceof Ks&&(r=r.domParent),{});i[Ev]=r,i[bv]=r.currentStyle,i[Mv]=ym,i[Av]=t,i[Sv]=r.__config,n.__addUpdate(r,r.__config,e,e.__config,i)}))},__after:function(e){n.isDestroyed||(r.forEach(function(t){t.__after(e)}),D1.did())}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t))}},{key:"getTargetAtPoint",value:function(t,e,E){return function c(t,e,r,u,_){var i=t.__sx1,n=t.__sy1,f=t.offsetWidth,d=t.offsetHeight,p=t.matrixEvent,y=t.children,a=t.zIndexChildren,o=t.computedStyle,g=o[ev],o=o[yv];if(E||"none"!==g){if(Array.isArray(a)){for(var s=0,x=y.length;s<x;s++)y[s].__index__=s;for(var l=a.length-1;0<=l;l--)if(!((h=a[l])instanceof karas.Text)){var h,v=u.slice(),m=(v.push(h.__index__),_.slice());if(m.push(l),h=c(h,e,r,v,m))return h}}if(E||"none"!==o)return te.pointInQuadrilateral(e,r,i,n,i+f,n,i+f,n+d,i,n+d,p)?{target:t,path:u,zPath:_}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,n=this.currentStyle,a=this.computedStyle;-1===["flex","block"].indexOf(n[ev])&&(a[ev]=n[ev]="block"),"absolute"===n[tv]&&(a[tv]=n[tv]="static"),n[nv]=[e,nm],n[av]=[r,nm],a[nv]=e,a[av]=r,t===et.CANVAS||t===et.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===et.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,n){i=i[Wv];t===r?(i=r.__updateRoot)?(n[Mv]&&(i[Mv]|=n[Mv]),n[bv]&&(i[Ov]=i[Ov]||[]).push((a(t={},bv,n[bv]),a(t,Rv,n[Rv]),a(t,Tv,n[Tv]),t))):r.__updateRoot=n:e.hasOwnProperty(Uv)?i.hasOwnProperty(e[Uv])?(t=i[e[Uv]],n[Mv]&&(t[Mv]|=n[Mv]),n[bv]&&(t[Ov]=t[Ov]||[]).push((a(r={},bv,n[bv]),a(r,Rv,n[Rv]),a(r,Tv,n[Tv]),r))):Mt.error("Update process miss uniqueUpdateId"):(e[Uv]=Om,i[Om++]=n)}},{key:"__checkUpdate",value:function(t,c,u,_){for(var e=this,r=[],i={},n=[],f={},d=[],p=e.__updateRoot,a=e.__updateHash,o=e.__hasRootUpdate,s=(e.__hasRootUpdate=!1,p&&(e.__updateRoot=null,(o=Sm(t,e,p,r,i,n))&&e.__checkRoot(t,u,_)),Object.keys(a)),l=0,y=s.length;l<y;l++)var g=Sm(t,e,a[s[l]],r,i,n,f,d),o=o||g;e.__reflowList=r,Om=0,e.__updateHash=e.__config[Wv]={},n.forEach(function(t){delete t[Uv]}),d.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(e.__structs))});for(var h=0,x=s.length;h<x;h++)delete a[s[h]][Sv][Uv];return o}},{key:"__checkReflow",value:function(i,o){var S=this,t=this.__reflowList;if(t.length){for(var s,l,J=this,h=[],Q={},c=Mm=0,u=t.length;c<u;c++){var e=t[c],r=e.node,_=e.component,f=e.addDom,d=e.removeDom;if(r===this){s=!0;break}if((r=f&&r instanceof bl?r.shadowRoot:r).hasOwnProperty("__uniqueReflowId")||(r.__uniqueReflowId=Mm,Q[Mm++]=e),function(t,e,r,i,n){if(!n||"absolute"!==r.currentStyle[tv]){var a=r;if(-1<["inline","inlineBlock"].indexOf(a.currentStyle[ev])||-1<["inline","inlineBlock"].indexOf(a.computedStyle[ev])){do{if((a=a.domParent)===t)return 1;if(Am(a))return;if("absolute"===a.currentStyle[tv]||"absolute"===a.computedStyle[tv])return void Rm(a,e,i,n)}while(a&&(-1<["inline","inlineBlock"].indexOf(a.currentStyle[ev])||-1<["inline","inlineBlock"].indexOf(a.computedStyle[ev])));if(Tm(a,!0))return void Rm(a,e,i,n)}var o,s=a.domParent;if(!Am(s)){do{if(Am(s))return}while(("flex"!==s.computedStyle[ev]&&"flex"!==s.currentStyle[ev]||(o=s),"absolute"!==s.currentStyle[tv]&&"absolute"!==s.computedStyle[tv])&&(!Tm(s,!0)&&(s=s.domParent)));if((a=o?o:a)===t)return 1;for(s=a;s;){if("absolute"===s.currentStyle[tv]||"absolute"===s.computedStyle[tv]){if(s===t)break;if(Tm(s))break;return void Rm(s,e,i,n)}s=s.domParent}if(a!==r)Rm(a,e,i,n);else if(n){var l=!0,h=r.prev,c=r.next;if(!(l=h&&-1<["inline","inlineBlock"].indexOf(h.currentStyle[ev])||c&&-1<["inline","inlineBlock"].indexOf(c.currentStyle[ev])?!1:l)){if((a=r.domParent)===t)return 1;Rm(a,e,!1,!0)}}}}}(J,Q,r,_,f)){s=!0,f&&(this.__zIndexChildren=null);break}d&&h.push(e)}if(Mm=0,this.__reflowList=[],s)return dd.clearUniqueReflowId(Q),l=0===this.currentStyle[gv].indexOf("vertical"),this.__layout({x:0,y:0,w:i,h:o,isUpright:l},!1,!1,!1),this.__layoutAbs(this,{x:0,y:0,w:i,h:o,isUpright:l}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId"))return t=Q[t.__uniqueReflowId],e.uniqueList.push(t),!0},{uniqueList:h});var C=[],I=0,w=[],k=0,tt=(h.forEach(function(t){var e=t.node,c=t.component,u=t.addDom,t=t.removeDom,r=e.computedStyle,i=e.currentStyle,_=r[ov],f=r[tv],r=r[ev],n="absolute"===f,d="absolute"===i[tv],r="none"===r,p="none"===i[ev];if(!r||!p){for(var y,a=e.domParent,g=a.__layoutData,x=g.x,v=g.y,g=g.h,m=a.width,E=a.computedStyle,o=e,s=(o=o.isShadowRoot?o.hostRoot:o).prev;s;){if(s instanceof Ks||"absolute"!==s.computedStyle[tv]&&"none"!==s.computedStyle[ev]){v=s.y+s.outerHeight,y=!0;break}s=s.prev}t||(y||(v+=E[sv]+E[fv]+E[cv]),x+=E[lv]+E[dv]+E[uv]);var l=e;if(!t)if(d){for(l=l.domParent;l&&l!==J&&!sm(l);)if(l.parent)l=l.parent;else if(l.host)break;l=l||J;if(a.__layoutAbs(l,a.__layoutData,e),u)return o=a.__modifyStruct(J,I),I+=o[1],C.push(o),a.__updateStruct(J.__structs),void(S.renderMode===et.SVG&&Cm(a));if(n)return void(c?(o=e.__modifyStruct(J,I),I+=o[1],C.push(o),(f===i[tv]||"static"!==f&&"static"!==i[tv])&&_===i[ov]||(a.__updateStruct(J.__structs),S.renderMode===et.SVG&&Cm(a))):(r||p)&&(e.__zIndexChildren=null,n=e.__modifyStruct(J,I),I+=n[1],C.push(n)));a.__updateStruct(J.__structs),S.renderMode===et.SVG&&Cm(a)}else{if(e.__layout({x:x,y:v,w:m,h:g},!1,!1,!1),v+=e.outerHeight,c)l=e;else for(l=l.domParent;l&&l!==J&&!sm(l);)if(l.parent)l=l.parent;else if(l.host)break;l=l||J,e instanceof Pp&&e.__layoutAbs(l,{x:x,y:v,w:m,h:g})}for(var b=e;b&&b!==J;)if("relative"===(E=(b=b.domParent).computedStyle)[tv]){var T=b,A=T.ox,T=T.oy;A&&e.__offsetX(A),T&&e.__offsetY(T);break}for(var h=(e=e.isShadowRoot?e.hostRoot:e).next;h&&!h.hasOwnProperty("__uniqueReflowId");){if("absolute"!==h.computedStyle[tv]){var M=v-h.y;if(M)for(;h&&!h.hasOwnProperty("__uniqueReflowId");){var R=h,O=(R=R instanceof bl?R.shadowRoot:R).computedStyle;"absolute"!==O[tv]&&"none"!==O[ev]&&R.__offsetY(M,!0,pm),h=h.next}break}h=h.next}a.hasOwnProperty("__uniqueMergeOffsetId")||d&&r||(a.__uniqueMergeOffsetId=k++,w.push(a)),u||t?(o=a.__modifyStruct(J,I),I+=o[1],C.push(o),S.renderMode===et.SVG&&Cm(a)):c?(n=e.__modifyStruct(J,I),I+=n[1],C.push(n),(f===i[tv]||"static"!==f&&"static"!==i[tv])&&_===i[ov]||(e.domParent.__updateStruct(J.__structs),S.renderMode===et.SVG&&Cm(e.domParent))):(r||p)&&(e.__zIndexChildren=null,x=e.__modifyStruct(J,I),I+=x[1],C.push(x))}}),[]),n=(w.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var c,u,_=t.flowChildren,f=t.absChildren,e=[],r=[],d=_.length,i=0;i<d;i++){var n=_[i],a=(n=n instanceof bl?n.shadowRoot:n)instanceof Y0,p=(!c&&a&&n.hasOwnProperty("__uniqueReflowId")&&(c=!0,u=i),a&&n.currentStyle),y=a&&"inline"===p[ev],g=a&&"inlineBlock"===p[ev],x=n;if(!a||y||g){if(e.length&&r.length&&c){var v=dd.getMergeMargin(r,e);if(v)for(var m=Math.max(u,i-e.length+1);m<d;m++)_[m].__offsetY(v,!0,pm)}r=[],e=[]}if(a&&!y){var E,b,g=a&&"none"===p[ev],y=void 0;if(!g&&n.flowChildren&&0===n.flowChildren.length&&(p=(a=n.computedStyle)[sv],E=a[hv],M=a[cv],R=a[_v],O=a[av],b=a[fv],a=a[pv],M<=0&&R<=0&&O<=0&&b<=0&&a<=0&&(e.push(E),r.push(p),y=!0)),g||y){if(i===d-1){var T=dd.getMergeMargin(r,e);if(T)for(var A=Math.max(u,i-e.length+1);A<d;A++)_[A].__offsetY(T,!0,pm)}}else{var M=n.computedStyle,R=M[sv],O=M[hv];if(e.length&&(r.push(R),c)){var S=dd.getMergeMargin(r,e);if(S)for(var C=Math.max(u,i-e.length+1);C<d;C++)_[C].__offsetY(S,!0,pm)}r=[],e=[O]}}}var I=t.currentStyle,w=I[av],k=t===J||t.isShadowRoot||"absolute"===I[tv]||"relative"===I[tv];if(w[1]===im&&x){var o,I=t.height+t.computedStyle[cv],s=x.y+x.outerHeight-t.y-I;if(s){t.__resizeY(s,pm);for(var D=0,L=f.length;D<L;D++){var l=f[D],N=l.currentStyle,P=N[Jx],h=N[Qx],N=N[av];if(P[1]===im)if(h[1]===im)for(var F=l.prev;F;){var B=F,H=(B=B instanceof bl?B.shadowRoot:B)instanceof Y0,G=H&&B.currentStyle;if(!(H&&"absolute"===G[tv])){H=B.y+B.outerHeight-l.y;H&&l.__offsetY(H,!0,pm);break}F=F.prev}else h[1]===nm?l.__offsetY(s,!0,pm):h[1]===am&&(h=(1-.01*h[0])*s,l.__offsetY(h,!0,pm));else if(P[1]===am)if(k){var h=.01*P[0]*s;l.__offsetY(h,!0,pm)}else{if(!o)for(o=t.domParent;o&&o!==J&&!o.isShadowRoot;){var Y=o.currentStyle;if("absolute"===Y[tv]||"relative"===Y[tv])break;o=o.domParent}o.currentStyle[av][1]!==nm&&(h=.01*P[0]*s,l.__offsetY(h,!0,pm))}if(N[1]===am)if(k)t.__layoutAbs(t,t.__layoutData,l);else{if(!o)for(o=t.domParent;o&&o!==J&&!o.isShadowRoot;){var W=o.currentStyle;if("absolute"===W[tv]||"relative"===W[tv])break;o=o.domParent}tt.push([t,o,l])}}return void dd.offsetAndResizeByNodeOnY(t,J,Q,s,tt)}}for(var U=0,X=f.length;U<X;U++){var z=f[U],V=z.currentStyle,K=V[Jx],V=V[Qx];if(K[1]===im&&V[1]===im)for(var j=z.prev;j;){var $=j,q=($=$ instanceof bl?$.shadowRoot:$)instanceof Y0,Z=q&&$.currentStyle;if(!(q&&"absolute"===Z[tv])){q=$.y+$.outerHeight-z.y;q&&z.__offsetY(q,!0,pm);break}j=j.prev}}}),tt.forEach(function(t){t[0].__layoutAbs(t[1],t[0].__layoutData,t[2])}),0),a=0,p=!0,y=J.__structs;if(C.forEach(function(t){var t=Bt(t,2),e=t[0],t=t[1];if(p)p=!1,a=e[qv]+(e[Zv]||0)+1,n+=t;else{for(var r=e[qv]+(e[Zv]||0)+1+n,i=a;i<r;i++)y[i][qv]+=n;a=r,n+=t}}),n)for(var g=a,x=y.length;g<x;g++)y[g][qv]+=n;dd.clearUniqueReflowId(Q)}}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},Jl.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===et.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===et.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),n}(),km=T.STYLE_KEY.STROKE_WIDTH,Dm=At.isNil;function Lm(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function Nm(t,e){var r=0;return t&&2<=t.length&&r++,e&&2<=e.length&&(r+=2),r}function Pm(t,e,r,i,n,a,c,o,s){var l,h,o=7<arguments.length&&void 0!==o?o:0,s=8<arguments.length&&void 0!==s?s:1;return 0===o&&1===s?[t,e,r,i,n,a]:o===s?[]:(s<o&&(o=(h=[s,o])[0],s=h[1]),o=Math.max(0,o),s=Math.min(1,s),3===c?(h=Bt(kn.sliceBezier2Both([[t,e],n,a,[r,i]],o,s),4),t=(l=Bt(h[0],2))[0],e=l[1],n=h[1],a=h[2],r=(l=Bt(h[3],2))[0],i=l[1]):2===c?(h=Bt(kn.sliceBezier2Both([[t,e],a,[r,i]],o,s),3),t=(l=Bt(h[0],2))[0],e=l[1],a=h[1],r=(l=Bt(h[2],2))[0],i=l[1]):1===c?(h=Bt(kn.sliceBezier2Both([[t,e],n,[r,i]],o,s),3),t=(l=Bt(h[0],2))[0],e=l[1],n=h[1],r=(c=Bt(h[2],2))[0],i=c[1]):(t+=(l=r-t)*o,e+=(h=i-e)*o,r+=l*(1-s),i+=h*(1-s)),[t,e,r,i,n,a])}var Ti=function(){d(M,u1);var s=p(M);function M(t,e){var r,i,n;if(_(this,M),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):Dm(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):Dm(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):Dm(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):Dm(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var a=r.__start.length;a<r.__x1.length;a++)r.__start.push(0)}else Dm(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var o=r.__end.length;o<r.__x1.length;o++)r.__end.push(1)}else Dm(e.end)||(n=parseFloat(e.end),isNaN(n)&&(n=1),r.__end=r.__x1.map(function(){return n}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],Dm(e.x1)||(r.__x1=parseFloat(e.x1)||0),Dm(e.y1)||(r.__y1=parseFloat(e.y1)||0),Dm(e.x2)||(r.__x2=parseFloat(e.x2)||0),Dm(e.y2)||(r.__y2=parseFloat(e.y2)||0),Dm(e.start)||(r.__start=parseFloat(e.start)||0),Dm(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return f(M,[{key:"buildCache",value:function(e,r,i){var n,a=this,o=this.width,s=this.height,l=this.__cacheProps,h=this.isMulti;return["x1","x2"].forEach(function(t){(Dm(l[t])||i)&&(n=!0,l[t]=Lm(a[t],e,o,h))}),["y1","y2"].forEach(function(t){(Dm(l[t])||i)&&(n=!0,l[t]=Lm(a[t],r,s,h))}),["controlA","controlB"].forEach(function(t){(Dm(l[t])||i)&&(n=!0,l[t]=function e(t,r,i,n,a,o){if(o){if(t)return t.map(function(t){return e(t,r,i,n,a)})}else if(t&&2<=t.length)return[r+t[0]*n,i+t[1]*a];return[]}(a[t],e,r,o,s,h))}),["start","end"].forEach(function(t){(Dm(l[t])||i)&&(n=!0,l[t]=a[t])}),n}},{key:"render",value:function(h,t,c,e,r,o){var f=this,t=P(N(M.prototype),"render",this).call(this,h,t,c,e,r,o);if(t.break)return t;c=t.ctx;var u,s,i,n,a,l,d,p,e=t.sx3,r=t.sy3,o=t.stroke,y=t.strokeWidth,g=t.strokeDasharray,x=t.strokeDasharrayStr,v=t.strokeLinecap,m=t.strokeLinejoin,E=t.strokeMiterlimit,b=t.dx,T=t.dy,_=this.__cacheProps,A=this.isMulti;return this.buildCache(e,r)&&h===et.SVG&&(u="",A?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],n=_.y2[e],a=_.controlA[e],o=_.controlB[e],s=_.start[e],e=_.end[e],l=Nm(a,o);0===s&&1===e||(t=(s=Bt(Pm(t,i,r,i,a,o,l,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],a=s[4],o=s[5]),u+=ne.svgLine(t,i,r,n,a,o,l)}):(e=Nm(_.controlA,_.controlB),r=_.x1,n=_.y1,a=_.x2,l=_.y2,d=_.controlA,p=_.controlB,i=_.start,s=_.end,0===i&&1===s||(r=(i=Bt(Pm(r,n,a,l,d,p,e,i,s,_.len),6))[0],n=i[1],a=i[2],l=i[3],d=i[4],p=i[5]),u=ne.svgLine(r,n,a,l,d,p,e)),_.d=u),h===et.CANVAS||h===et.WEBGL?o.forEach(function(t,e){var r,i,n,a,o,s=y[e],l=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(f.__preSetCanvas(h,c,{stroke:t,strokeWidth:s,strokeDasharray:g[e],strokeLinecap:v[e],strokeLinejoin:m[e],strokeMiterlimit:E[e]}),l&&(c.strokeStyle=t.v[0]),c.beginPath(),A?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],n=_.y2[e],a=_.controlA[e],o=_.controlB[e],s=_.start[e],e=_.end[e],l=Nm(a,o);0===s&&1===e||(t=(s=Bt(Pm(t,i,r,i,a,o,l,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],a=s[4],o=s[5]),ne.canvasLine(c,t,i,r,n,a,o,l,b,T)}):(s=Nm(_.controlA,_.controlB),e=_.x1,l=_.y1,t=_.x2,n=_.y2,a=_.controlA,o=_.controlB,i=_.start,r=_.end,0===i&&1===r||(e=(i=Bt(Pm(e,l,t,n,a,o,s,i,r,_.len),6))[0],l=i[1],t=i[2],n=i[3],a=i[4],o=i[5]),ne.canvasLine(c,e,l,t,n,a,o,s,b,T)),c.stroke(),c.closePath())}):h===et.SVG&&o.forEach(function(t,e){var r=y[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),i=[["d",_.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];f.__propsStrokeStyle(i,x[e],v[e],m[e],E[e]),f.addGeom("path",i)}),t}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,r=this.__sx3,i=this.__sy3,n=this.computedStyle[km],r=(this.buildCache(r,i),e.x1),s=e.y1,l=e.x2,h=e.y2,c=e.controlA,u=e.controlB,_=P(N(M.prototype),"bbox",this),f=0;return n.forEach(function(t){f=Math.max(f,t)}),f=Math.ceil(.5*f)+1,t||(r=[r],l=[l],s=[s],h=[h],c=[c],u=[u]),r.forEach(function(t,e){var r,i=s[e],n=l[e],a=h[e],o=c[e],e=u[e];(Dm(o)||o.length<2)&&(Dm(e)||e.length<2)?(_[0]=Math.min(_[0],t-f),_[0]=Math.min(_[0],n-f),_[1]=Math.min(_[1],i-f),_[1]=Math.min(_[1],a-f),_[2]=Math.max(_[2],t+f),_[2]=Math.max(_[2],n+f),_[3]=Math.max(_[3],i+f),_[3]=Math.max(_[3],a+f)):Dm(o)||o.length<2?(r=kn.bboxBezier(t,i,e[0],e[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f)):Dm(e)||e.length<2?(r=kn.bboxBezier(t,i,o[0],o[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f)):(r=kn.bboxBezier(t,i,o[0],o[1],e[0],e[1],n,a),_[0]=Math.min(_[0],r[0]-f),_[0]=Math.min(_[0],r[2]-f),_[1]=Math.min(_[1],r[1]-f),_[1]=Math.min(_[1],r[3]-f),_[2]=Math.max(_[2],r[0]+f),_[2]=Math.max(_[2],r[2]+f),_[3]=Math.max(_[3],r[1]+f),_[3]=Math.max(_[3],r[3]+f))}),_}}]),M}(),Fm=T.STYLE_KEY.STROKE_WIDTH,Bm=At.isNil;function Hm(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Gm(t,c){var e=[],r=0,i=[];if(c)r=[],t.forEach(function(t){t=Gm(t);e.push(t.list),r.push(t.total),i.push([0].concat(t.increase))});else if(Array.isArray(t)){r=0,i.push(0);for(var n=0,a=0,u=t.length;a<u;a++){var _=t[a];if(Array.isArray(_)){n=a;break}}for(var o=t[n],f=n+1,d=t.length;f<d;f++){var s,l,h=t[f];Array.isArray(h)&&(2===h.length?(l=Math.abs(h[0]-o[0]),s=Math.abs(h[1]-o[1]),l=Math.sqrt(Math.pow(l,2)+Math.pow(s,2)),e.push(l),r+=l,i.push(r),o=h):4===h.length?(s=kn.bezierLength([o,[h[0],h[1]],[h[2],h[3]]]),e.push(s),r+=s,i.push(r),o=[h[2],h[3]]):6===h.length&&(l=kn.bezierLength([o,[h[0],h[1]],[h[2],h[3]],[h[4],h[5]]]),e.push(l),r+=l,i.push(r),o=[h[4],h[5]]))}}return{list:e,total:r,increase:i}}function Ym(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var n=r+(i-r>>1);return t[n]===e?n:t[n]>e?Ym(t,e,r,Math.max(n-1,r)):Ym(t,e,Math.min(n+1,i),i)}function Wm(t,e,r,c){var i=2<arguments.length&&void 0!==r?r:0,n=3<arguments.length&&void 0!==c?c:1;if(0===i&&1===n)return t;if(i===n)return[];for(n<i&&(i=(r=[n,i])[0],n=r[1]);1<n-i;)n--;for(;n<0||i<0;)n++,i++;for(;1<=n&&1<=i;)n--,i--;var a,o,s,l,h,u=t.length,_=(t=At.clone(t),[]),c=1<i?i-1:i,r=1<n?n-1:n,f=Ym(e.increase,c*e.total,0,u-1),d=Ym(e.increase,r*e.total,0,u-1),p=i<0,y=1<n,g=1;(r*=e.total)>e.increase[d]&&(o=t[d].slice(t[d].length-2),s=t[d+1],h=e.list[d],g=r=(r-e.increase[d])/h,2===s.length?(h=s[0]-o[0],a=s[1]-o[1],a=y?[o[0]+r*h,o[1]+r*a]:[s[0]-(r=1-r)*h,s[1]-r*a]):4===s.length?a=[(h=kn.sliceBezier([o,[s[0],s[1]],[s[2],s[3]]],r))[1][0],h[1][1],h[2][0],h[2][1]]:6===s.length&&(a=[(h=kn.sliceBezier([o,[s[0],s[1]],[s[2],s[3]],[s[4],s[5]]],r))[1][0],h[1][1],h[2][0],h[2][1],h[3][0],h[3][1]])),(c*=e.total)>e.increase[f]&&(o=t[f].slice(t[f].length-2),s=e.list[f],f!==d||p||y||1===g||(s*=g,a&&(l=a)),l=l||t[f+1],r=(c-e.increase[f])/s,2===l.length?(h=l[0]-o[0],g=l[1]-o[1],p?_.push([l[0]-(r=1-r)*h,l[1]-r*g]):_.push([o[0]+r*h,o[1]+r*g]),_.push(l)):4===l.length?(c=kn.sliceBezier([[l[2],l[3]],[l[0],l[1]],o],1-r).reverse(),_.push(c[0]),_.push([c[1][0],c[1][1],c[2][0],c[2][1]]),f!==d||p||y||(a=null)):6===l.length&&(e=kn.sliceBezier([[l[4],l[5]],[l[2],l[3]],[l[0],l[1]],o],1-r).reverse(),_.push(e[0]),_.push([e[1][0],e[1][1],e[2][0],e[2][1],l[4],l[5]]),f!==d||p||y||(a=null)));for(var x=f+2;x<=d+(p||y?u:0);x++)_.push(t[x%u]);return a&&_.push(a),_}var Um=function(){d(l,u1);var s=p(l);function l(t,e){var r,i,n;if(_(this,l),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var a=r.__start.length;a<r.__points.length;a++)r.__start.push(0)}else Bm(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var o=r.__end.length;o<r.__points.length;o++)r.__end.push(1)}else Bm(e.end)||(n=parseFloat(e.end),isNaN(n)&&(n=1),r.__end=r.__points.map(function(){return n}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,Bm(e.start)||(r.__start=parseFloat(e.start)||0),Bm(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t);return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return f(l,[{key:"__getPoints",value:function(n,a,o,s,t,l){return t.map(function(t){if(Array.isArray(t)){var e=t.length;if(l){if(0!==e&&2!==e&&4!==e)return}else if(0!==e&&2!==e)return;for(var r=[],i=0;i<e;i++)i%2==0?r.push(n+t[i]*o):r.push(a+t[i]*s);return r}})}},{key:"__reprocessing",value:function(t){return t}},{key:"__needRebuildSE",value:function(){}},{key:"buildCache",value:function(e,r){var t,i,n,c=this,a=this.width,o=this.height,s=this.points,u=this.controls,_=this.start,f=this.end,l=this.__cacheProps,h=this.isMulti;return Bm(l.points)&&(t=!0,l.points=h?s.map(function(t){if(Array.isArray(t))return c.__getPoints(e,r,a,o,t)}):this.__getPoints(e,r,a,o,s)),Bm(l.controls)&&(t=!0,l.controls=h?u.map(function(t){return Array.isArray(t)?c.__getPoints(e,r,a,o,t,!0):t}):this.__getPoints(e,r,a,o,u,!0)),Bm(l.start)&&(i=!0,l.start=_),Bm(l.end)&&(i=!0,l.end=f),this.__needRebuildSE(l)&&(i=!0),t&&(s=l.points,n=l.controls,l.list2=h?s.map(function(t,e){var r=n[e];if(Array.isArray(t))return t.map(function(t,e){return e?Hm(t,r&&r[e-1]):t})}):s.map(function(t,e){return e?Hm(t,n[e-1]):t}),l.len=Gm(l.list2,h)),(t||i)&&(l.list=h?l.list2.map(function(t,e){if(Array.isArray(t))return Wm(t,{list:(t=l.len).list[e],total:t.total[e],increase:t.increase[e]},l.start[e],l.end[e])}):Wm(l.list2,l.len,l.start,l.end),l.list=this.__reprocessing(l.list,h)),t||i}},{key:"render",value:function(t,e,r,i,n,a){e=P(N(l.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t,e,r,i,u,_,n,f;return this.__bbox||(t=this.isMulti,e=this.__cacheProps,n=this.__sx3,r=this.__sy3,i=this.computedStyle[Fm],this.buildCache(n,r),u=P(N(l.prototype),"bbox",this),_=0,i.forEach(function(t){_=Math.max(_,t)}),_=Math.ceil(.5*_)+1,n=e.points,f=e.controls,t||(n=[n],f=[f]),n.forEach(function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=f[e]||[],e=Bt(t[0],2),i=e[0],n=e[1],a=1,c=t.length;a<c;a++){var o,s=Bt(t[a],2),l=s[0],s=s[1],h=r[a-1];h&&4===h.length?(o=kn.bboxBezier(i,n,h[0],h[1],h[2],h[3],l,s),u[0]=Math.min(u[0],o[0]-_),u[1]=Math.min(u[1],o[1]-_),u[2]=Math.max(u[2],o[2]+_),u[3]=Math.max(u[3],o[3]+_)):h&&2===h.length?(o=kn.bboxBezier(i,n,h[0],h[1],l,s),u[0]=Math.min(u[0],o[0]-_),u[1]=Math.min(u[1],o[1]-_),u[2]=Math.max(u[2],o[2]+_),u[3]=Math.max(u[3],o[3]+_)):(u[0]=Math.min(u[0],i-_),u[1]=Math.min(u[1],n-_),u[2]=Math.max(u[2],i+_),u[3]=Math.max(u[3],n+_)),i=l,n=s}}),this.__bbox=u),this.__bbox}}]),l}();var t=function(){d(o,Um);var r=p(o);function o(t,e){return _(this,o),t=r.call(this,t,e),e.booleanOperations&&(t.__booleanOperations=e.booleanOperations),t}return f(o,[{key:"__getPoints",value:function(t,e,r,i,n,a){t=P(N(o.prototype),"__getPoints",this).call(this,t,e,r,i,n,a);return a||t.push(t[0]),t}},{key:"__reprocessing",value:function(o,t){if(!t||o.length<2)return o;var s=this.booleanOperations,l=o.length;if(!Array.isArray(s)&&s)for(var e=s,s=[s],r=1;r<l-1;r++)s.push(e);if(Array.isArray(s)&&s.length){t=function(){o.forEach(function(t){if(t&&1<t.length)for(var e=t,r=e.length,i=r-1;0<=i;i--){var n=e[i],a=n.length;if(4===a||6===a){var o=e[(i||r)-1],c=o.length,s=[[o[c-2],o[c-1]],[n[0],n[1]],[n[2],n[3]]],o=(6===n.length&&s.push([n[4],n[5]]),kn.bezierLength(s)),l=Math.ceil(.2*o);if(1===l)n.splice(0,a-2);else{for(var u=1/l,h=1;h<l;h++){var _=kn.pointAtByT(s,u*h);e.splice(i+h-1,0,_)}n.splice(0,a-2)}}}});var e=[];o[0]&&1<o[0].length&&e.push(o[0]);for(var t=1;t<l;t++){var r=(s[t-1]||"").toString().toLowerCase(),i=o[t];if(i&&!(i.length<2))if(-1!==["intersection","union","diff","xor"].indexOf(r)&&e.length)switch(r){case"intersection":var n=Ca(e,[i]);n?(e=[],n.forEach(function(t){e=e.concat(t)})):e=[];break;case"union":n=Ra(e,[i]);n?(e=[],n.forEach(function(t){e=e.concat(t)})):e=[];break;case"diff":var a=Oa(e,[i]);a?(e=[],a.forEach(function(t){e=e.concat(t)})):e=[];break;case"xor":a=Sa(e,[i]);a?(e=[],a.forEach(function(t){e=e.concat(t)})):e=[]}else e.push(i)}return{v:e}}();if("object"===vt(t))return t.v}return o}},{key:"__needRebuildSE",value:function(t){if(At.isNil(t.booleanOperations))return t.booleanOperations=!0}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),o}(),Xm=T.STYLE_KEY.STROKE_WIDTH,zm=At.isNil,Vm=te.sectorPoints;function Km(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var ur=function(){d(R,u1);var r=p(R);function R(t,e){return _(this,R),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return Km(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return Km(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return Km(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,zm(e.begin)||(t.__begin=Km(e.begin,0)),zm(e.end)||(t.__end=Km(e.end,0)),zm(e.r)||(t.__r=Km(e.r,1)),zm(e.edge)||(t.__edge=!!e.edge),zm(e.closure)||(t.__closure=!!e.closure)),t}return f(R,[{key:"buildCache",value:function(i,n,t){var e,a=this.width,r=this.begin,c=this.end,o=this.r,s=this.edge,u=this.closure,l=this.__cacheProps,h=this.isMulti;return(zm(l.begin)||t)&&(e=!0,l.begin=(r||0)%360),(zm(l.end)||t)&&(e=!0,l.end=(c||0)%360),(zm(l.r)||t)&&(e=!0,l.r=h?o.map(function(t){return t*a*.5}):o*a*.5),o=l.r,(zm(l.edge)||t)&&(e=!0,l.edge=s),(zm(l.closure)||t)&&(e=!0,l.closure=u),e&&(h?(l.list=[],l.sList=[],r.forEach(function(t,e){var r=zm(o[e])?.5*a:o[e],r=Vm(i,n,r,parseFloat(t||0)%360,parseFloat(c[e]||0)%360),t=r.slice(0);u[e]?(r.push(r[0].slice(0)),s&&t.push(t[0].slice(0))):(r.unshift([i,n]),r.push([i,n]),s&&(t.unshift([i,n]),t.push([i,n]))),l.list.push(r),l.sList.push(t)})):(h=(t=Vm(i,n,o,parseFloat(r||0),parseFloat(c||0))).slice(0),u?(t.push(t[0].slice(0)),s&&h.push(h[0].slice(0))):(t.unshift([i,n]),t.push([i,n]),s&&(h.unshift([i,n]),h.push([i,n]))),l.list=t,l.sList=h)),e}},{key:"render",value:function(t,e,r,i,c,u){e=P(N(R.prototype),"render",this).call(this,t,e,r,i,c,u);if(e.break)return e;this.buildCache(e.cx,e.cy),r=e.ctx;var n=e.fill,_=e.fillRule,a=e.stroke,f=e.strokeWidth,d=e.strokeDasharray,p=e.strokeDasharrayStr,y=e.strokeLinecap,g=e.strokeLinejoin,x=e.strokeMiterlimit,v=e.dx,m=e.dy,i=this.__cacheProps,E=i.list,b=i.sList,T=this.isMulti;if(n.length<=1&&a.length<=1){c={fill:n[0],fillRule:_[0],stroke:a[0],strokeWidth:f[0],strokeDasharray:d[0],strokeDasharrayStr:p[0],strokeLinecap:y[0],strokeLinejoin:g[0],strokeMiterlimit:x[0],dx:v,dy:m};this.__renderOneSector(t,r,T,E,b,c)}else{for(var o=0,A=n.length;o<A;o++){var s=n[o];s&&(s={fill:s,fillRule:_[o],dx:v,dy:m},this.__renderOneSector(t,r,T,E,b,s))}for(var l=0,M=a.length;l<M;l++){var h=a[l];h&&(h={stroke:h,strokeWidth:f[l],strokeDasharray:d[l],strokeDasharrayStr:p[l],strokeLinecap:y[l],strokeLinejoin:g[l],strokeMiterlimit:x[l],dx:v,dy:m},this.__renderOnePolygon(t,r,T,E,b,h))}}return e}},{key:"__renderOneSector",value:function(t,e,r,i,n,a){var o=a.fill,s=a.stroke,l=a.strokeWidth,h="conic"===o.k,c="conic"===s.k,u="radial"===o.k&&Array.isArray(o.v),_=0<l&&"radial"===s.k&&Array.isArray(s.v);h||c?(h?this.__conicGradient(t,e,i,r,a):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0),0<l&&c?Mt.warn("Stroke style can not use conic-gradient"):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0)):u||_?(u?this.__radialEllipse(t,e,i,r,a,"fill"):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0),0<l&&_?(Mt.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke=a.stroke.v[0],this.__drawPolygon(t,e,r,n,a,!1,!0)):0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0)):(o&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!0,!1),0<l&&s&&"none"!==s&&this.__drawPolygon(t,e,r,n,a,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,n,a,o,s,l){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,a,o,s,l),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<n&&(t=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",n]],this.__propsStrokeStyle(t,a,o,s,l),this.addGeom("path",t)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s,l;return this.__bbox||(a=this.isMulti,o=this.__cacheProps,l=this.__sx3,r=this.__sy3,t=this.width,i=this.height,s=this.computedStyle[Xm],this.buildCache(l=l+.5*t,t=r+.5*i),r=0,r=a?(e=0,o.r.forEach(function(t){e=Math.max(t,e)}),e):o.r,i=P(N(R.prototype),"bbox",this),n=0,s.forEach(function(t){n=Math.max(n,t)}),a=l-r-(n=Math.ceil(.5*n)+1),o=l+r-n,s=t-r+n,l=t+r+n,i[0]=Math.min(i[0],a),i[1]=Math.min(i[1],s),i[2]=Math.max(i[2],o),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),R}(),jm=T.STYLE_KEY.STROKE_WIDTH,$m=At.isNil;function qm(t,e,r,i,n,a){n=4<arguments.length&&void 0!==n?n:0,a=5<arguments.length&&void 0!==a?a:0;if(0===n||0===a)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];var o=n*te.H,s=a*te.H;return[[t+n,e],[t+r-n,e],[t+r+o-n,e,t+r,e+a-s,t+r,e+a],[t+r,e+i-a],[t+r,e+i+s-a,t+r+o-n,e+i,t+r-n,e+i],[t+n,e+i],[t+n-o,e+i,t,e+i+s-a,t,e+i-a],[t,e+a],[t,e+a-s,t+n-o,e,t+n,e]]}function Zm(t){return t=parseFloat(t),t=isNaN(t)?0:t}var Wr=function(){d(s,u1);var r=p(s);function s(t,e){return _(this,s),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map(Zm)),Array.isArray(e.ry)&&(t.__ry=e.ry.map(Zm))):(t.__rx=t.__ry=0,$m(e.rx)||(t.__rx=Zm(e.rx)),$m(e.ry)||(t.__ry=Zm(e.ry))),t}return f(s,[{key:"buildCache",value:function(r,i,t){var e,n,a=this.width,o=this.height,s=this.rx,c=this.ry,l=this.__cacheProps,h=this.isMulti;return($m(l.rx)||t)&&(e=!0,l.rx=h?s.map(function(t){return Math.min(t,.5)*a}):Math.min(s,.5)*a),($m(l.ry)||t)&&(e=!0,l.ry=h?s.map(function(t){return Math.min(t,.5)*o}):Math.min(c,.5)*o),e&&(t=l.rx,n=l.ry,l.list=h?t.map(function(t,e){return qm(r,i,a,o,t,n[e])}):qm(r,i,a,o,t,n)),e}},{key:"render",value:function(t,e,r,i,n,a){e=P(N(s.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o;return this.__bbox||(t=this.__sx3,e=this.__sy3,r=this.width,i=this.height,n=this.computedStyle[jm],this.buildCache(t,e),a=P(N(s.prototype),"bbox",this),o=0,n.forEach(function(t){o=Math.max(o,t)}),o=Math.ceil(.5*o)+1,a[0]=Math.min(a[0],t-o),a[1]=Math.min(a[1],e-o),a[2]=Math.max(a[2],t+r+o),a[3]=Math.max(a[3],e+i+o),this.__bbox=a),this.__bbox}}]),s}(),Jm=T.STYLE_KEY.STROKE_WIDTH,Qm=At.isNil;function tE(t){return t=parseFloat(t),t=isNaN(t)?1:t}var i=function(){d(h,u1);var r=p(h);function h(t,e){return _(this,h),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map(tE):Qm(e.r)||(t.__r=tE(e.r))):(t.__r=1,Qm(e.r)||(t.__r=tE(e.r))),t}return f(h,[{key:"buildCache",value:function(e,r,t){var i=this.width,n=this.r,a=this.__cacheProps,o=this.isMulti;(Qm(a.r)||t)&&(o?(a.r=n.map(function(t){return t*i*.5}),a.list=a.r.map(function(t){return te.ellipsePoints(e,r,t,t)})):(a.r=n*i*.5,a.list=te.ellipsePoints(e,r,a.r,a.r)))}},{key:"render",value:function(t,e,r,i,n,a){e=P(N(h.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var t,e,r,i,n,a,o,s,l;return this.__bbox||(a=this.isMulti,o=this.__cacheProps,l=this.__sx3,r=this.__sy3,t=this.width,i=this.height,s=this.computedStyle[Jm],this.buildCache(l=l+.5*t,t=r+.5*i),r=0,r=a?(e=0,o.r.forEach(function(t){e=Math.max(t,e)}),e):o.r,i=P(N(h.prototype),"bbox",this),n=0,s.forEach(function(t){n=Math.max(n,t)}),a=l-r-(n=Math.ceil(.5*n)+1),o=t-r-n,s=l+r+n,l=t+r+n,i[0]=Math.min(i[0],a),i[1]=Math.min(i[1],o),i[2]=Math.max(i[2],s),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),h}(),eE=T.STYLE_KEY.STROKE_WIDTH,rE=At.isNil;function iE(t){return t=parseFloat(t),t=isNaN(t)?1:t}var Hr=function(){d(u,u1);var r=p(u);function u(t,e){return _(this,u),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(iE):rE(e.rx)||(t.__rx=[iE(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(iE):rE(e.ry)||(t.__ry=[iE(e.ry)])):(t.__rx=1,rE(e.rx)||(t.__rx=iE(e.rx)),t.__ry=1,rE(e.ry)||(t.__ry=iE(e.ry))),t}return f(u,[{key:"buildCache",value:function(r,i,t){var e,n,a=this.width,o=this.height,s=this.rx,c=this.ry,l=this.__cacheProps,h=this.isMulti;return(rE(l.rx)||t)&&(e=!0,l.rx=h?s.map(function(t){return t*a*.5}):s*a*.5),(rE(l.ry)||t)&&(e=!0,l.ry=h?c.map(function(t){return t*o*.5}):c*o*.5),e&&(s=l.rx,n=l.ry,l.list=h?s.map(function(t,e){return te.ellipsePoints(r,i,t,n[e])}):te.ellipsePoints(r,i,s,n)),e}},{key:"render",value:function(t,e,r,i,n,a){e=P(N(u.prototype),"render",this).call(this,t,e,r,i,n,a);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,t,i,c,n,e,a,o,s,l,h;return this.__bbox||(o=this.isMulti,r=this.__cacheProps,l=this.__sx3,h=this.__sy3,t=this.width,e=this.height,s=this.computedStyle[eE],this.buildCache(l=l+.5*t,t=h+.5*e),n=h=0,n=o?(c=i=0,r.rx.forEach(function(t,e){i=Math.max(t,i),c=Math.max(n,r.ry[e])}),h=i,c):(h=r.rx,r.ry),e=P(N(u.prototype),"bbox",this),a=0,s.forEach(function(t){a=Math.max(a,t)}),o=l-h-(a=Math.ceil(.5*a)+1),s=l+h-a,l=t-n+a,h=t+n+a,e[0]=Math.min(e[0],o),e[1]=Math.min(e[1],l),e[2]=Math.max(e[2],s),e[3]=Math.max(e[3],h),this.__bbox=e),this.__bbox}}]),u}(),nE=k.TYPE_VD,aE=k.TYPE_GM,oE=k.TYPE_CP,sE=At.isPrimitive;var lE={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},hE={os:"offset",e:"easing"},cE={value:"v",options:"o"},uE={},_E={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},fE={},fi=(Pt.DOM_KEY_SET.concat(Pt.GEOM_KEY_SET).forEach(function(t){var e;lE.hasOwnProperty(t)?hE[lE[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),lE[t]=e,hE[e]=t)}),Object.keys(cE).forEach(function(t){uE[cE[t]]=t}),Object.keys(_E).forEach(function(t){fE[_E[t]]=t}),{fullCssProperty:lE,abbrCssProperty:hE,fullAnimate:cE,abbrAnimate:uE,fullAnimateOption:_E,abbrAnimateOption:fE}),dE=At.isNil,pE=At.isFunction,yE=At.isPrimitive,gE=At.clone,xE=At.extend,vE=fi.abbrCssProperty,mE=fi.abbrAnimateOption,EE=fi.abbrAnimate;function bE(r,i){r&&Object.keys(r).forEach(function(t){var e;0===t.indexOf("var-")?(e=t.slice(4),i.hasOwnProperty(e)&&(e=i[e],r["var-"+e]=r[t])):i.hasOwnProperty(t)&&(e=i[t],r[e]=r[t],delete r[t])})}function TE(l,h){var t;l&&(l.hasOwnProperty("vars")?(t=l.vars,delete l.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&h&&h.hasOwnProperty(e))for(var i=l,n=0,a=r.length;n<a;n++){var o=r[n];if(!i.hasOwnProperty(o)&&n!==a-1)return void Mt.error("Slot miss "+o);if(n===a-1){var s=h[e];if(void 0===s)return;pE(s)&&(s=s(i[o])),i[o]=s}else i=i[o]}})):Object.keys(l).forEach(function(t){if(0===t.indexOf("var-")){var e=l[t];if(delete l[t],e&&h){var r=t.slice(4);if(r&&e.id&&h.hasOwnProperty(e.id)){var i=h[e.id];if(void 0!==i){var n=l;if(-1<r.indexOf(".")){for(var a=r.split("."),o=a.length,s=0;s<o-1;s++){if(!n[r=a[s]])return void Mt.warn("parseJson vars is not exist: "+e.id+", "+t+", "+a.slice(0,s).join("."));n=n[r]}r=a[o-1]}pE(i)&&(i=i(e)),n[r]=i}}}}}))}function AE(t,n,c){if(yE(t)||t instanceof w||t instanceof bl)return t;if(Array.isArray(t))return t.map(function(t){return AE(t,n,c)});var e,r,i=t.libraryId;if(!dE(i)){var a=c[i];if(!a)throw new Error("Link library miss id: "+i);r=a,(e=t).tagName=r.tagName,e.props=gE(r.props)||{},e.children=r.children||[],r.vars&&!e.vars&&(e.vars=r.vars),r.library&&(e.library=r.library),Object.keys(r).forEach(function(t){0!==t.indexOf("var-")||e.hasOwnProperty(t)||(e[t]=r[t])}),delete e.libraryId,(i=e.init)&&(_=(a=e.props).style,xE(a,i),_&&(xE(_,i.style),a.style=_),delete e.init)}var o,u,h,i=t.library,_=(Array.isArray(i)&&(c={},i.forEach(function(t){var e=c,r=t.id;if(dE(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}),o=t,u=c,h=n.vars,o.hasOwnProperty("vars")?(a=o.vars,delete o.vars,(a=Array.isArray(a)?a:[a]).forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&h&&h.hasOwnProperty(e)&&"library"===r[0])for(var i=u,n=1,a=r.length;n<a;n++){var o,s,l=r[n];if(!i.hasOwnProperty(l)&&n!==a-1)return void Mt.error("Library slot miss "+l);n===a-1?(o=h[e],s=i[l],pE(o)&&(o=o(s)),i[l]=1===n?Object.assign({id:s.id,tagName:s.tagName},o):o):i=i[l]}})):Object.keys(o).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=o[t],delete o[t],e&&h&&((t=t.slice(12))&&e.id&&h.hasOwnProperty(e.id)&&(r=h[e.id],pE(r)&&(r=r(e)),u[t]=Object.assign({id:t},r))))}),delete t.library),t.tagName),i=t.props,i=void 0===i?{}:i,f=t.children,f=void 0===f?[]:f,d=t.animate,d=void 0===d?[]:d;if(!_)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var p,s=i.src,l=(/^#\d+$/.test(s)&&(l=n.imgs,s=parseInt(s.slice(1)),Array.isArray(l)&&(i.src=l[s])),i.style);return l&&(s=l.fontFamily,/^#\d+$/.test(s)&&(p=n.fonts,s=parseInt(s.slice(1)),Array.isArray(p)&&(l.fontFamily=p[s])),!1!==n.abbr&&bE(l,vE),TE(l,n.vars)),TE(i,n.vars),TE(t,n.vars),t.children=AE(f,n,c),d&&(d=Array.isArray(d)?d:[d]).forEach(function(t){!1!==n.abbr&&bE(t,EE);var e,r,i=t.value,t=t.options;Array.isArray(i)&&i.length&&i.forEach(function(t){!1!==n.abbr&&bE(t,vE),TE(t,n.vars)}),t&&(!1!==n.abbr&&bE(t,mE),TE(t,n.vars),e=t,r=n,["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach(function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}))}),t}function ME(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!1===t.abbr&&(e.abbr=!1),!1!==e.abbr&&Mt.warn("Abbr in json is deprecated"),AE(t=e.singleton||t.singleton?t:At.clone(t),e,{})}var RE={apply:ME,parse:function(t,e,r,i){if(e){var n=e.fonts,n=(n&&(n=Array.isArray(n)?n:[n]).forEach(function(t){var e=t.fontFamily,r=t.url,t=t.data;e&&(r||t)&&St.register(e,r,t)}),Mt.isDom(r)?i=i||{}:(i=i||r||{},r=null),[]),a=function e(r,t,i,n,a){if(sE(t)||t instanceof w||t instanceof bl)return t;if(Array.isArray(t))return t.map(function(t){return e(r,t,i,n,a)});var c,u=a,o=(a+=t.offsetTime||0,t.tagName),s=t.props,s=void 0===s?{}:s,l=t.children,l=void 0===l?[]:l,h=t.animate,h=void 0===h?[]:h;if(!o)throw new Error("Dom must have a tagName: "+JSON.stringify(t));if(!Array.isArray(l))throw new Error("children must be an array");return t="$"===o.charAt(0)?r.createGm(o,s):/^[A-Z]/.test(o)?(t=bl.getRegister(o),r.createCp(t,s,l.map(function(t){return t&&-1<[nE,aE,oE].indexOf(t.$$type)?t:e(r,t,i,n,a)}))):r.createVd(o,s,l.map(function(t){return t&&-1<[nE,aE,oE].indexOf(t.$$type)?t:e(r,t,i,n,a)})),h&&((h=Array.isArray(h)?h:[h]).forEach(function(t){t=t.value,Array.isArray(t)&&t.length&&(c=!0)}),c&&i.push({animate:h,target:t,offsetTime:u})),t}(t,e=ME(e,i),n,i,0);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg/webgl");e=i.controller instanceof rg?i.controller:a.animateController;t.render(a,r),n.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(n),e.__playAuto()):(e.__records2=e.__records2.concat(n),e.init(e.__records2,e.list2))}else n.length&&(a.__animateRecords={options:i,list:n,controller:i.controller instanceof rg?i.controller:null});return a}},loadAndParse:function(n,e,c,r){function t(){var t;h===_+f+d&&(t=RE.parse(n,e,c,r),r&&At.isFunction(r.callback)&&r.callback(t))}var i=e.fonts,a=e.components,o=e.imgs,s=[],l=[],u=[],_=(i&&(i=Array.isArray(i)?i:[i]).forEach(function(t){t.url&&s.push(t)}),a&&(a=Array.isArray(a)?a:[a]).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&n.Component.hasRegister(e)&&!i||r&&l.push(t)}),o&&(o=Array.isArray(o)?o:[o]).forEach(function(t){t=t.url;t&&u.push(t)}),s.length),f=l.length,d=u.length,h=0;_||f||d?(n.inject.loadFont(s,function(){h+=_,t()}),n.inject.loadComponent(l.map(function(t){return t.url}),function(){h+=f,l.forEach(function(t){t=t.tagName;t&&window[t]&&!n.Component.hasRegister(t)&&n.Component.register(t,window[t])}),t()}),n.inject.measureImg(u,function(){h+=d,t()})):t()},abbr:fi},di={css:vn,reset:Pt,unit:r,font:St,abbr:cr,transform:io},mi={Animation:Mu,Controller:rg,easing:lh,frame:Jl},vi={level:es,change:Tr,Page:Go,Cache:zo},e=(u1.register("$line",Ti),u1.register("$polyline",Um),u1.register("$polygon",t),u1.register("$sector",ur),u1.register("$rect",Wr),u1.register("$circle",i),u1.register("$ellipse",Hr),{version:"0.77.4",render:function(t,e){if(!(t instanceof wm))throw new Error("Render dom must be canvas/svg/webgl");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,n=arguments.length;i<n;i++)r.push(arguments[i]);return At.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?t instanceof u1?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new wm(t,e,r);if(nd.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:k.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:k.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:k.TYPE_CP}},parse:function(t,e,r){return RE.parse(this,t,e,r)},loadAndParse:function(t,e,r){return RE.loadAndParse(this,t,e,r)},mode:et,Component:bl,Node:w,Text:Ks,Geom:u1,Xom:Y0,Dom:Pp,Img:Ty,Root:wm,Event:yl,util:At,inject:Mt,style:di,parser:RE,animate:mi,math:pi,builder:dl,updater:D1,refresh:vi,enums:T,set debug(t){Z.flag=!!t}});return dl.ref({Xom:Y0,Dom:Pp,Img:Ty,Geom:u1,Component:bl}),"undefined"!=typeof window?window.karas=e:"undefined"!=typeof self&&(self.karas=e),e});
//# sourceMappingURL=index.min.js.map
