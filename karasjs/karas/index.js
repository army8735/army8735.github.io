!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function g(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(r){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=N(r),e=(t=i?(t=N(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),this);if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}}function P(){return(P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=N(t)););return t}(t,e);if(i)return i=Object.getOwnPropertyDescriptor(i,e),i.get?i.get.call(arguments.length<3?t:r):i.value}).apply(this,arguments)}function Zt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,o,n=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(n.push(i.value),!e||n.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return n}}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(r="Object"===r&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var v={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,FILL:87,STROKE:88,STROKE_WIDTH:89,STROKE_DASHARRAY:90,STROKE_DASHARRAY_STR:91,STROKE_LINECAP:92,STROKE_LINEJOIN:93,STROKE_MITERLIMIT:94,FILL_RULE:95,MATRIX:96,BORDER_TOP:97,BORDER_RIGHT:98,BORDER_BOTTOM:99,BORDER_LEFT:100,TRANSLATE_PATH:101},y={};function x(t){return y[t]=y[t]||t.toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),y[t]}var E={};var b={},M={},T={},A=(Object.keys(v).forEach(function(t){var e=v[t],t=x(b[e]=t);M[e]=t,T[t]=e}),{STYLE_KEY:v,STYLE_R_KEY:b,STYLE_RV_KEY:M,STYLE_V_KEY:T,style2Lower:x,style2Upper:function(t){return E[t]=E[t]||t.replace(/([a-z\d_])([A-Z])/g,function(t,e,r){return e+"_"+r}).toUpperCase(),E[t]},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_MEASURE:3,UPDATE_COMPONENT:4,UPDATE_OVERWRITE:5,UPDATE_KEYS:6,UPDATE_LIST:7,UPDATE_CONFIG:8,UPDATE_ADD_DOM:9,UPDATE_REMOVE_DOM:10},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_PLAY_CB:8,I_TARGET:9,I_ROOT:10,I_FRAMES:11,I_FRAMES_R:12,I_CURRENT_TIME:13,I_NEXT_TIME:14,I_STYLE:15,I_DURATION:16,I_ITERATIONS:17,I_FILL:18,I_PLAYBACK_RATE:19,I_PLAY_COUNT:20,I_PLAY_STATE:21,I_DESTROYED:22,I_START_TIME:23,I_FPS_TIME:24,I_EASING:25,I_ENTER_FRAME:26,I_DELAY:27,I_END_DELAY:28,I_KEYS:29,I_ORIGIN_STYLE:30,I_CURRENT_FRAMES:31,I_CURRENT_FRAME:32,I_SPF_LIMIT:33,I_FPS:34,I_DIRECTION:35,I_FIRST_ENTER:36,I_STAY_BEGIN:37,I_STAY_END:38,I_IS2:39,I_END_TIME:40,I_NODE_CONFIG:41,I_ROOT_CONFIG:42,I_OUT_BEGIN_DELAY:43,I_TIME_STAMP:44}}),t=A.STRUCT_KEY,R=t.STRUCT_NODE,O=t.STRUCT_INDEX,w=t.STRUCT_CHILD_INDEX,S=t.STRUCT_LV,t=A.NODE_KEY,I=t.NODE_IS_DESTROYED,C=t.NODE_STRUCT,k=function(){function t(){f(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__sx=0,this.__sy=0,this.__width=0,this.__height=0,this.__baseLine=0,this.__config={},this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null}return g(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[C]=(n(i={},R,this),n(i,O,t),n(i,w,r),n(i,S,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[C],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[I]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[I]}},{key:"isReplaced",get:function(){return!1}}]),t}(),et={CANVAS:0,SVG:1,WEBGL:2},r={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,r.PERCENT]:/px$/i.test(t)?[e,r.PX]:/deg$/i.test(t)?[e,r.DEG]:/rem$/i.test(t)?[e,r.REM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/em$/i.test(t)?[e,r.EM]:/vw$/i.test(t)?[e,r.VW]:/vh$/i.test(t)?[e,r.VH]:/vmax$/i.test(t)?[e,r.VMAX]:/vmin$/i.test(t)?[e,r.VMIN]:[e,r.NUMBER]}},vt={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375,padding:{1:1,f:.9}},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125,padding:{S:1,T:1,Z:1,c:1,f:.7,i:1,l:1,t:.9}},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06,padding:{f:.5}},simsun:{lhr:1.4,blr:1.06,padding:{f:.5}}},support:function(t){return this.info.hasOwnProperty(t)},register:function(t,e){var e=e||{},r=e.emSquare,r=void 0===r?2048:r,i=e.ascent,i=void 0===i?1854:i,o=e.descent,o=void 0===o?434:o,n=e.lineGap,n=void 0===n?67:n,e=e.padding,e=void 0===e?{}:e;this.info[t.toLowerCase()]={lhr:(i+o+n)/r,blr:i/r,padding:e}},addPadding:function(t,e){Object.assign(this.info[t.toLowerCase()].padding,e)}},L=(vt.info["宋体"]=vt.info.simsun,vt.info.pingfang=vt.info["pingfang sc"],{position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i});function D(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function F(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var qt={identity:D,multiply:function(t,e){if(F(t))return e;if(F(e))return t;for(var r=[],i=0;i<4;i++){var o=t[i]||0,n=t[i+4]||0,a=t[i+8]||0,s=t[i+12]||0;r[i]=o*e[0]+n*e[1]+a*e[2]+s*e[3],r[i+4]=o*e[4]+n*e[5]+a*e[6]+s*e[7],r[i+8]=o*e[8]+n*e[9]+a*e[10]+s*e[11],r[i+12]=o*e[12]+n*e[13]+a*e[14]+s*e[15]}return r},calPoint:function(t,e){var r,c,u,_,f,d,p,g,i=(t=Zt(t,4))[0],o=t[1],n=t[2];if(void 0===(t=t[3])&&(t=1),!e||F(e))return[i,o,n,t];if(16===e.length)return n=n||0,a=(r=Zt(e,16))[0],l=r[1],c=r[2],u=r[3],s=r[4],m=r[5],_=r[6],f=r[7],h=r[8],d=r[9],p=r[10],g=r[11],[i*a+o*s+n*h+r[12],i*l+o*m+n*d+r[13],i*c+o*_+n*p+r[14],t*=i*u+o*f+n*g+r[15]];var a=Zt(e,6),s=a[0],h=a[1],l=a[2],m=a[3];return[s*i+l*o+a[4],h*i+m*o+a[5]]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length){var e=t,r=[],i=(r[0]=e[5]*e[10]*e[15]-e[5]*e[11]*e[14]-e[9]*e[6]*e[15]+e[9]*e[7]*e[14]+e[13]*e[6]*e[11]-e[13]*e[7]*e[10],r[4]=-e[4]*e[10]*e[15]+e[4]*e[11]*e[14]+e[8]*e[6]*e[15]-e[8]*e[7]*e[14]-e[12]*e[6]*e[11]+e[12]*e[7]*e[10],r[8]=e[4]*e[9]*e[15]-e[4]*e[11]*e[13]-e[8]*e[5]*e[15]+e[8]*e[7]*e[13]+e[12]*e[5]*e[11]-e[12]*e[7]*e[9],r[12]=-e[4]*e[9]*e[14]+e[4]*e[10]*e[13]+e[8]*e[5]*e[14]-e[8]*e[6]*e[13]-e[12]*e[5]*e[10]+e[12]*e[6]*e[9],r[1]=-e[1]*e[10]*e[15]+e[1]*e[11]*e[14]+e[9]*e[2]*e[15]-e[9]*e[3]*e[14]-e[13]*e[2]*e[11]+e[13]*e[3]*e[10],r[5]=e[0]*e[10]*e[15]-e[0]*e[11]*e[14]-e[8]*e[2]*e[15]+e[8]*e[3]*e[14]+e[12]*e[2]*e[11]-e[12]*e[3]*e[10],r[9]=-e[0]*e[9]*e[15]+e[0]*e[11]*e[13]+e[8]*e[1]*e[15]-e[8]*e[3]*e[13]-e[12]*e[1]*e[11]+e[12]*e[3]*e[9],r[13]=e[0]*e[9]*e[14]-e[0]*e[10]*e[13]-e[8]*e[1]*e[14]+e[8]*e[2]*e[13]+e[12]*e[1]*e[10]-e[12]*e[2]*e[9],r[2]=e[1]*e[6]*e[15]-e[1]*e[7]*e[14]-e[5]*e[2]*e[15]+e[5]*e[3]*e[14]+e[13]*e[2]*e[7]-e[13]*e[3]*e[6],r[6]=-e[0]*e[6]*e[15]+e[0]*e[7]*e[14]+e[4]*e[2]*e[15]-e[4]*e[3]*e[14]-e[12]*e[2]*e[7]+e[12]*e[3]*e[6],r[10]=e[0]*e[5]*e[15]-e[0]*e[7]*e[13]-e[4]*e[1]*e[15]+e[4]*e[3]*e[13]+e[12]*e[1]*e[7]-e[12]*e[3]*e[5],r[14]=-e[0]*e[5]*e[14]+e[0]*e[6]*e[13]+e[4]*e[1]*e[14]-e[4]*e[2]*e[13]-e[12]*e[1]*e[6]+e[12]*e[2]*e[5],r[3]=-e[1]*e[6]*e[11]+e[1]*e[7]*e[10]+e[5]*e[2]*e[11]-e[5]*e[3]*e[10]-e[9]*e[2]*e[7]+e[9]*e[3]*e[6],r[7]=e[0]*e[6]*e[11]-e[0]*e[7]*e[10]-e[4]*e[2]*e[11]+e[4]*e[3]*e[10]+e[8]*e[2]*e[7]-e[8]*e[3]*e[6],r[11]=-e[0]*e[5]*e[11]+e[0]*e[7]*e[9]+e[4]*e[1]*e[11]-e[4]*e[3]*e[9]-e[8]*e[1]*e[7]+e[8]*e[3]*e[5],r[15]=e[0]*e[5]*e[10]-e[0]*e[6]*e[9]-e[4]*e[1]*e[10]+e[4]*e[2]*e[9]+e[8]*e[1]*e[6]-e[8]*e[2]*e[5],e[0]*r[0]+e[1]*r[4]+e[2]*r[8]+e[3]*r[12]);if(0==i)return D();i=1/i;for(var c=[],o=0;o<16;o++)c[o]=r[o]*i;return c}var n=(e=Zt(t,6))[0],a=e[1],s=e[2],h=e[3],u=e[4],_=e[5];if(1===n&&0===a&&0===s&&1===h&&0===u&&0===_)return t;var l=n*h-a*s;return 0==l?t:[h/l,-a/l,-s/l,n/l,(s*_-h*u)/l,(a*u-n*_)/l]},isE:F,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}};var B={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},Y=4*(Math.sqrt(2)-1)/3,H=B.crossProduct,G=qt.calPoint,W=qt.isE,t=A.STYLE_KEY,U=t.WIDTH,X=t.HEIGHT,V=t.TRANSFORM_ORIGIN;function K(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function z(t,e,r){for(var i=Zt(r[0],2),o=i[0],c=i[1],i=Zt(r[0],2),u=i[0],_=i[1],f=r.length,n=1;n<f;n++)var a=Zt(r[n],2),d=a[0],a=a[1],o=Math.max(o,d),c=Math.max(c,a),u=Math.min(u,d),_=Math.min(_,a);if(t<u||e<_||o<t||c<e)return!1;for(var s=0,p=r.length;s<p;s++){var h=Zt(r[s],2),g=h[0],h=h[1],l=Zt(r[(s+1)%p],2),m=l[0],l=l[1];if(H(m-g,l-h,t-g,e-h)<0)return!1}return!0}function j(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function $(t,e){var t=Zt(t,4),r=t[0],i=t[1],o=t[2],t=t[3],e=Zt(e,4),n=e[0],a=e[1],s=e[2],e=e[3];return!(s<=r||e<=i||o<=n||t<=a)}function Z(t,e,r){var i=r.matrix,i=void 0===i?[1,0,0,1,0,0]:i,r=r.computedStyle,r=void 0===r?{}:r,o=r[U],n=r[X],r=r[V],r=Zt(r=void 0===r?[.5*o,.5*n]:r,2),a=r[0],r=r[1],o=Zt(G([t*o-a,e*n-r],i),2);return[(t=o[0])+a,(e=o[1])+r]}function q(t){return t*Math.PI/180}function J(t){var r=t.length,t=t.reduce(function(t,e){return Math.pow(t,r)+Math.pow(e,r)});return Math.pow(t,1/r)}function Q(t,e,r){var i=(2*e+r)/3,o=(e+2*r)/3;return(t(e)+3*t(i)+3*t(o)+t(r))*(r-e)/8}function tt(e,r){return function t(e,r,i,o){var o=3<arguments.length&&void 0!==o?o:.001,n=(r+i)/2,a=Q(e,r,i),s=Q(e,r,n),h=Q(e,n,i),a=s+h-a;return Math.abs(a)<=15*o?s+h+a/15:t(e,r,n,o/2)+t(e,n,i,o/2)}(function(t){return J(rt(t,e,r))},2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,3<arguments.length&&void 0!==arguments[3]?arguments[3]:1)}function rt(t,e,r,i){i=3<arguments.length&&void 0!==i?i:1;return 2===r?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Zt(e,3),i=e[0],o=e[1],e=e[2],n=(i=Zt(i,2))[0],i=i[1],a=(o=Zt(o,2))[0],o=o[1],e=Zt(e,2),s=e[0],e=e[1],h=0,l=0,l=0===r?(h=Math.pow(1-t,2)*n+2*t*(1-t)*a+Math.pow(t,2)*s,Math.pow(1-t,2)*i+2*t*(1-t)*o+Math.pow(t,2)*e):1===r?(h=2*(1-t)*(a-n)+2*t*(s-a),2*(1-t)*(o-i)+2*t*(e-o)):2===r?(h=2*(s-2*a+n),2*(e-2*o+i)):h=0;return[h,l]}(t,e,i):3===r?function(t,e,r){var r=2<arguments.length&&void 0!==r?r:1,e=Zt(e,4),i=e[0],o=e[1],n=e[2],e=e[3],a=(i=Zt(i,2))[0],i=i[1],s=(o=Zt(o,2))[0],o=o[1],h=(n=Zt(n,2))[0],n=n[1],e=Zt(e,2),c=e[0],e=e[1],l=0,u=0,u=0===r?(l=Math.pow(1-t,3)*a+3*t*Math.pow(1-t,2)*s+3*(1-t)*Math.pow(t,2)*h+Math.pow(t,3)*c,Math.pow(1-t,3)*i+3*t*Math.pow(1-t,2)*o+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*e):1===r?(l=3*((1-t)*(1-t)*(s-a)+2*(1-t)*t*(h-s)+t*t*(c-h)),3*((1-t)*(1-t)*(o-i)+2*(1-t)*t*(n-o)+t*t*(e-n))):2===r?(l=6*(h-2*s+a)*(1-t)+6*(c-2*h+s)*t,6*(n-2*o+i)*(1-t)+6*(e-2*n+o)*t):3===r?(l=6*(c-3*h+3*s-a),6*(e-3*n+3*o-i)):l=0;return[l,u]}(t,e,i):void 0}function it(e,r,l){for(var t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20,i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:.001,u=function(t){return J(rt(t,e,r))},_=l*t,o=t,n=o,a=0;a<c;a++){var s=Q(u,0,o)-_;if(Math.abs(s)<i)break;var h=J(rt(o,e,r,1));if(o-=s*h/(s*J(rt(o,e,r,2))+h*h),Math.abs(o-n)<i)break;n=o}return rt(o,e,r,0)}function ot(c,t){var e=Zt(c,4),r=Zt(e[0],2),i=r[0],r=r[1],o=Zt(e[1],2),n=o[0],o=o[1],a=Zt(e[2],2),u=a[0],a=a[1],e=e[3],s=(n-i)*t+i,h=(o-r)*t+r,n=(u-n)*t+n,o=(a-o)*t+o,l=(n-s)*t+s,_=(o-h)*t+h;return 4===c.length?[[i,r],[s,h],[l,_],[((((e=Zt(e,2))[0]-u)*t+u-n)*t+n-l)*t+l,(((e[1]-a)*t+a-o)*t+o-_)*t+_]]:3===c.length?[[i,r],[s,h],[l,_]]:void 0}var nt={pointInPolygon:z,pointInQuadrilateral:function(c,u,t,e,r,i,o,n,_,f,a){var s,h,l;return a&&!W(a)?(t=(s=Zt(G([t,e],a),4))[0],e=s[1],s=s[3],r=(h=Zt(G([r,i],a),4))[0],i=h[1],h=h[3],_=(l=Zt(G([_,f],a),4))[0],f=l[1],l=l[3],o=(a=Zt(G([o,n],a),4))[0],n=a[1],s&&1!==s&&(t/=s,e/=s),h&&1!==h&&(r/=h,i/=h),l&&1!==l&&(_/=l,f/=l),(s=a[3])&&1!==s&&(o/=s,n/=s),z(c,u,[[t,e],[r,i],[o,n],[_,f]])):t<=c&&e<=u&&c<=o&&u<=n},d2r:q,r2d:function(t){return 180*t/Math.PI},H:Y,h:K,angleBySide:function(t,e,r){return t=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r),Math.acos(t)},sideByAngle:function(t,e,r){return t=Math.cos(t),Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*t)},pointsDistance:j,triangleIncentre:function(t,e,r,i,o,n){var a=j(r,i,o,n),s=j(t,e,o,n),h=j(t,e,r,i);return[(a*t+s*r+h*o)/(a+s+h),(a*e+s*i+h*n)/(a+s+h)]},ellipsePoints:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:r,o=r*Y,n=i===r?o:i*Y;return[[t-r,e],[t-r,e-n,t-o,e-i,t,e-i],[t+o,e-i,t+r,e-n,t+r,e],[t+r,e+n,t+o,e+i,t,e+i],[t-o,e+i,t-r,e+n,t-r,e]]},sectorPoints:function c(t,e,r,i,o){if(o<i&&(i=(h=[o,i])[0],o=h[1]),i===o)return[];var n=[],u=Math.floor(i/90),_=Math.floor(o/90);if(u===_||_-u==1&&o%90==0){var f,a,d,s,h=K(q(Math.abs(i-o)))*r,l=Math.sqrt(Math.pow(r,2)+Math.pow(h,2)),h=Math.atan(h/r);u<90?(f=[t+Math.sin(q(i))*r,e-Math.cos(q(i))*r],a=h+q(i),s=[t+Math.sin(a)*l,e-Math.cos(a)*l],d=[t+Math.sin(q(o))*r,e-Math.cos(q(o))*r],a=q(o)-h,a=[t+Math.sin(a)*l,e-Math.cos(a)*l],n.push(f),n.push(s.concat(a).concat(d))):u<180?(f=[t+Math.cos(q(i-90))*r,e+Math.sin(q(i-90))*r],s=h+q(i-90),a=[t+Math.cos(s)*l,e+Math.sin(s)*l],d=[t+Math.cos(q(o-90))*r,e+Math.sin(q(o-90))*r],s=q(o-90)-h,s=[t+Math.cos(s)*l,e+Math.sin(s)*l],n.push(f),n.push(a.concat(s).concat(d))):u<270?(f=[t-Math.sin(q(i-180))*r,e+Math.cos(q(i-180))*r],a=h+q(i-180),s=[t-Math.sin(a)*l,e+Math.cos(a)*l],d=[t-Math.sin(q(o-180))*r,e+Math.cos(q(o-180))*r],a=q(o-180)-h,a=[t-Math.sin(a)*l,e+Math.cos(a)*l],n.push(f),n.push(s.concat(a).concat(d))):(f=[t-Math.cos(q(i-270))*r,e+Math.sin(q(i-270))*r],s=h+q(i-270),a=[t-Math.cos(s)*l,e+Math.sin(s)*l],d=[t-Math.cos(q(o-270))*r,e+Math.sin(q(o-270))*r],s=q(o-270)-h,h=[t-Math.cos(s)*l,e+Math.sin(s)*l],n.push(f),n.push(a.concat(h).concat(d)))}else{for(var p,g,m=u,v=[];m<=_;m++)0===m?(p=c(t,e,r,i,90),v.push(p)):1===m?(u===m||90<o)&&(p=c(t,e,r,i<90?90:i,180<o?180:o),v.push(p)):2===m?(u===m||180<o)&&(g=c(t,e,r,i<180?180:i,270<o?270:o),v.push(g)):3===m&&(u===m||270<o)&&(g=c(t,e,r,i<270?270:i,o),v.push(g));for(var n=v[0],y=1,x=v.length;y<x;y++)n.push(v[y][1])}return n},getRectsIntersection:function(t,e){if(!$(t,e))return null;var r=(t=Zt(t,4))[0],i=t[1],o=t[2],t=t[3],n=(e=Zt(e,4))[0],a=e[1],s=e[2],e=e[3];return[Math.max(r,n),Math.max(i,a),Math.min(o,s),Math.min(t,e)]},isRectsOverlap:$,isRectsInside:function(t,e){var r=(t=Zt(t,4))[0],i=t[1],o=t[2],t=t[3],n=(e=Zt(e,4))[0],a=e[1],s=e[2],e=e[3];return r<=n&&i<=a&&s<=o&&e<=t},calCoordsInNode:Z,calPercentInNode:function(t,e,r){var i,o=(s=r.computedStyle)[U],n=s[X],a=(s=Zt(s[V],2))[0],s=s[1],h=Math.atan((n-s)/(o-a)),l=(r=Zt(Z(1,1,r),2))[0],r=r[1],c=a<=l&&s<=r?(i=a===l?-Math.atan(1/0):Math.atan((r-s)/(l-a)))-h:a<=l&&r<s?(i=a===l?-Math.atan(1/0):Math.atan((s-r)/(l-a)))+h:l<a&&s<=r?(i=Math.atan((r-s)/(a-l)))-h:l<a&&r<s?(i=Math.atan((r-s)/(l-a)))<=h?i+Math.PI-h:-(c=Math.PI-i+h):0,r=Math.sqrt(Math.pow(t-a,2)+Math.pow(e-s,2)),l=a<=t&&s<=e?a===t?-Math.atan(1/0):Math.atan((e-s)/(t-a)):a<=t&&e<s?a===t?-Math.atan(1/0):-Math.atan((e-s)/(a-t)):t<a&&s<=e?Math.PI-Math.atan((e-s)/(a-t)):Math.atan((e-s)/(t-a))-Math.PI;return(l-=c)>Math.PI?(l-=Math.PI,[(a-r*Math.cos(l))/o,(s-r*Math.sin(l))/n]):l>.5*Math.PI?(l=Math.PI-l,[(a-r*Math.cos(l))/o,(s+r*Math.sin(l))/n]):0<=l?[(a+r*Math.cos(l))/o,(s+r*Math.sin(l))/n]:l>=.5*-Math.PI?(l=-l,[(a+r*Math.cos(l))/o,(s-r*Math.sin(l))/n]):l>=-Math.PI?(l=Math.PI+l,[(a-r*Math.cos(l))/o,(s-r*Math.sin(l))/n]):(l=-Math.PI-l,[(a-r*Math.cos(l))/o,(s+r*Math.sin(l))/n])},bboxBezier:function(c,u,_,f,d,t,e,p){return 4===arguments.length?[c,u,_,f]:6===arguments.length?(s=c,i=u,o=_,n=f,r=d,g=t,m=Math.min(s,r),v=Math.min(i,g),y=Math.max(s,r),x=Math.max(i,g),(o<m||n<v||y<o||x<n)&&(s=(a=1-(h=(s-o)/(s-2*o+r)))*a*s+2*a*h*o+h*h*r,h=(o=1-(a=(i-n)/(i-2*n+g)))*o*i+2*o*a*n+a*a*g,m=Math.min(m,s),v=Math.min(v,h),y=Math.min(y,s),x=Math.min(x,h)),[m,v,y,x]):8===arguments.length?(r=c,i=u,o=_,n=f,a=d,g=t,s=e,h=p,m=Math.min(r,s),v=Math.min(i,h),y=Math.max(r,s),x=Math.max(i,h),(o<m||n<v||y<o||x<n||a<m||g<v||y<a||x<g)&&(_=(c=i-2*n+g)*c-(u=3*n-i-3*g+h)*(-i+n),0<(t=(f=r-2*o+a)*f-(d=3*o-r-3*a+s)*(-r+o))&&(0<(e=(-f-(t=Math.sqrt(t)))/d)&&e<1&&(l=(l=1-e)*l*l*r+3*l*l*e*o+3*l*e*e*a+e*e*e*s,m=Math.min(m,l),y=Math.max(y,l)),0<(e=(-f+t)/d)&&e<1&&(f=(l=1-e)*l*l*r+3*l*l*e*o+3*l*e*e*a+e*e*e*s,m=Math.min(m,f),y=Math.max(y,f))),0<_&&(0<(t=(-c-(_=Math.sqrt(_)))/u)&&t<1&&(r=(d=1-t)*d*d*i+3*d*d*t*n+3*d*t*t*g+t*t*t*h,v=Math.min(v,r),x=Math.max(x,r)),0<(t=(-c+_)/u)&&t<1&&(l=(o=1-t)*o*o*i+3*o*o*t*n+3*o*t*t*g+t*t*t*h,v=Math.min(v,l),x=Math.max(x,l)))),[m,v,y,x]):void 0;var r,i,o,n,a,g,s,h,l,m,v,y,x},bezierLength:tt,pointAtBezier:function(t,e,r,i,o){return it(t,e,tt(t,e,0,1),r,i,o)},pointAtBezierWithLength:it,sliceBezier:ot,sliceBezier2Both:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,e=Math.max(e,0),r=Math.min(r,1);return 0===e&&1===r||(r<1&&(t=ot(t,r)),0<e&&(r<1&&(e/=r),t=ot(t.reverse(),1-e).reverse())),t},pointOnCircle:function(t,e,r,i){return 270<=i?(i=q(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):180<=i?(i=q(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):90<=i?(i=q(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=q(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var at={getConicGradientImage:function(a,s,h,t,e,l){if(e.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");h=Math.floor(h),t=Math.floor(t);for(var c=e.map(function(t){return{color:t[0],angle:t[1]*Math.PI*2}}),u=0;u<t;u++)for(var r=function(t){for(var e=function(t,e){t-=a,e=s-e;if(0==t)return e<0?+Math.PI:0;if(0==e)return t<0?1.5*Math.PI:.5*Math.PI;e=Math.atan(e/t);return 0<t?.5*Math.PI-e:t<0?1.5*Math.PI-e:void 0}(t,u),r=void 0,r=0;r<c.length&&c[r].angle<=e;r++);var i=c[r-1],o=c[r];if(!i||!o)return"continue";var n=(e-i.angle)/(o.angle-i.angle),o=o.color.map(function(t,e){return n*(t-i.color[e])+i.color[e]}),t=4*(t+u*h);l[t]=o[0],l[1+t]=o[1],l[2+t]=o[2],l[3+t]=Math.min(255,255*o[3])},i=0;i<h;i++)r(i);return l}};function st(t){var r="";return t.forEach(function(t){var t=Zt(t,2),e=t[0],t=t[1];"blur"===e?r+="blur(".concat(t,"px)"):"hue-rotate"===e?r+="hue-rotate(".concat(t,"deg)"):"saturate"!==e&&"brightness"!==e&&"grayscale"!==e&&"contrast"!==e&&"sepia"!==e&&"invert"!==e||(r+="".concat(e,"(").concat(t,"%)"))}),r}var yt={canvasPolygon:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var o=-1,n=0,l=e.length;n<l;n++){var a=e[n];if(Array.isArray(a)&&a.length){o=n;break}}if(-1!==o){t.moveTo(e[o][0]+r,e[o][1]+i);for(var s=o+1,c=e.length;s<c;s++){var h=e[s];Array.isArray(h)&&(2===h.length?t.lineTo(h[0]+r,h[1]+i):4===h.length?t.quadraticCurveTo(h[0]+r,h[1]+i,h[2]+r,h[3]+i):6===h.length&&t.bezierCurveTo(h[0]+r,h[1]+i,h[2]+r,h[3]+i,h[4]+r,h[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var o=t[r];if(Array.isArray(o)&&o.length){e=r;break}}if(-1===e)return"";for(var n="M"+t[e][0]+","+t[e][1],a=e+1,s=t.length;a<s;a++){var h=t[a];Array.isArray(h)&&(2===h.length?n+="L"+h[0]+","+h[1]:4===h.length?n+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(n+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return n},canvasLine:function(t,e,l,r,i,o,n,a){var s=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,h=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+s,l+h),3===a?(t.bezierCurveTo(o[0]+s,o[1]+h,n[0]+s,n[1],r+s,i+h),2):2===a?(t.quadraticCurveTo(n[0]+s,n[1]+h,r+s,i+h),2):1===a?(t.quadraticCurveTo(o[0]+s,o[1]+h,r+s,i+h),2):(t.lineTo(r+s,i+h),1)},svgLine:function(t,e,r,i,o,n,a){return 3===a?"M"+t+","+e+"C"+o[0]+","+o[1]+" "+n[0]+","+n[1]+" "+r+","+i:2===a?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:1===a?"M"+t+","+e+"Q"+o[0]+","+o[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:st,svgFilter:st},ht=nt.H,lt=r.PX,ct=r.PERCENT,ut=r.REM,_t=r.VW,ft=r.VH,dt=r.VMAX,pt=r.VMIN,gt=yt.canvasPolygon,Et=yt.svgPolygon,t=A.STYLE_KEY,bt=t.BORDER_LEFT_WIDTH,Mt=t.BORDER_TOP_WIDTH,Tt=t.BORDER_BOTTOM_WIDTH,At=t.PADDING_LEFT,Rt=t.PADDING_BOTTOM,Ot=t.PADDING_TOP,wt=t.BORDER_TOP_LEFT_RADIUS,St=t.BORDER_TOP_RIGHT_RADIUS,It=t.BORDER_BOTTOM_LEFT_RADIUS,Ct=t.BORDER_BOTTOM_RIGHT_RADIUS,kt=t.FONT_SIZE;function Lt(t,e,r,i,c,u,_,o){var f=1,d=1,p=1;t:for(var n=u;c<=n;n--)for(var a=o;_<=a;a--){var s=n+a,h=Math.floor((t+a)/s),l=a;if(h*s<a+t)if(o<(l=(t-h*n)/(h-1)))continue;if(s=n+l,1<e&&n<e){if(n<e%s)continue;if(1<r)if(n<(e+i)%s)continue}if(1<r)if(n<(e+i)%s)continue;0<h&&(f=h,d=n,p=l);break t}return{n:f,ps:d,pd:p}}function Dt(t,e,r,i,o,n){var a=o-e,s=i-r,r=r-e,e=o-i;return"dotted"===t?Lt(a,r,e,s,n,n,Math.max(1,.25*n),2*n):(i=(o=Lt(a,r,e,s,n,3*n,Math.max(1,.25*n),2*n)).n,t=o.ps,o=o.pd,1===i?Lt(a,r,e,s,n,n,Math.max(1,.25*n),2*n):{n:i,ps:t,pd:o})}function Nt(c,u,_,f,t,e,d,r,i,p,g,m,o,v){var o=Zt(o,2),n=o[0],o=o[1],v=Zt(v,2),y=v[0],v=v[1];if(!(n&&o||y&&v))return m;for(var h=t+n-(t-f),l=e-y+(d-e),x=[],a=[],E=[],b=0,M=m.length;b<M;b++){var T,A,s=m[b];s[1][0]<h?x.push(s):s[0][0]>l?E.push(s):s[1][0]>l&&s[0][0]<h?(T=h<t?r+Math.tan(u)*(h-f):i,A=e<l?r+Math.tan(_)*(d-l):i,x.push([s[0],[h,r],[h,T],s[3]]),h<l&&(t<h&&l<e?a.push([[h,r],[l,r],[l,i],[h,i]]):t<h?(a.push([[h,r],[e,r],[e,i],[h,i]]),a.push([[e,r],[l,r],[l,A],[e,i]])):l<e?(a.push([[h,r],[t,r],[t,i],[h,T]]),a.push([[t,r],[l,r],[l,i],[t,i]])):(a.push([[h,r],[t,r],[t,i],[h,T]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[e,r],[l,r],[l,A],[e,i]]))),E.push([[l,r],s[1],s[2],[l,A]])):s[1][0]>l?(T=e<l?r+Math.tan(_)*(d-l):i,a.push([s[0],[l,r],[l,T],s[3]]),E.push([[l,r],s[1],s[2],[l,T]])):s[0][0]<h?(A=h<t?r+Math.tan(u)*(h-f):i,x.push([s[0],[h,r],[h,A],s[3]]),a.push([[h,r],s[1],s[2],[h,A]])):a.push(s)}x.length&&(R=t-f<n&&c<o,V=Math.atan((t-f)/(i-r)),C=(I=(O=o)-(i-r))/(n-(t-f)),o=Zt((k=Pt(x[0][0],x[0][1],h,S=r+o,w=O/n,O,!0,Math.tan(V)*O))[0],2),P=o[0],F=o[1],R&&(n=Zt((L=Pt(x[0][3],x[0][2],h,S,C,I,!0,Math.tan(V)*I))[0],2),D=n[0],N=n[1]),x.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=L)):(r=Pt(t[0],t[1],h,S,w,O),R&&(i=Pt(t[3],t[2],h,S,C,I)));for(var o=0,n=r.length;o<n;o++)zt(r[o],P,F,0);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),R){for(var a=0,s=i.length;a<s;a++)zt(i[a],D,N,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}));var R,O,w,S,I,C,k,L,D,N,P,F,B,Y,H,G,W,U,X,V,K,z,j,$,Z,q=E.length;return q&&(B=d-e<y&&c<v,o=Math.atan((d-e)/(i-r)),U=(W=(Y=v)-(i-r))/(y-(d-e)),V=Zt((X=Ft(E[q-1][0],E[q-1][1],l,G=r+v,H=Y/y,Y,!0,Math.tan(o)*Y))[X.length-1],2),$=V[0],Z=V[1],B&&(n=Zt((K=Ft(E[q-1][3],E[q-1][2],l,G,U,W,!0,Math.tan(o)*W))[K.length-1],2),z=n[0],j=n[1]),E.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=K)):(r=Ft(t[0],t[1],l,G,H,Y),B&&(i=Ft(t[3],t[2],l,G,U,W)));for(var o=0,n=r.length;o<n;o++)zt(r[o],$,Z,1);if(t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3]),B){for(var a=0,s=i.length;a<s;a++)zt(i[a],z,j,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}})),x.concat(a).concat(E)}function Pt(t,c,e,r,i,o,n,a){var s,u,t=Zt(t,2),h=t[0],t=t[1],c=Zt(c,2),l=c[0],c=c[1],h=(-h+e)*i,l=Math.atan((-l+e)*i/(r-c)),c=e-Math.sin(l)*o/i,_=r-Math.cos(l)*o;if(a=n?(n=Math.atan(a*i/o),a=Math.sqrt(Math.tan(n)/2),n=2*Math.atan(a/(1+a)),s=.5*Math.PI-n,u=e-Math.cos(n)*o/i,r-Math.sin(n)*o):(s=Math.atan(h/(r-t)),u=e-Math.sin(s)*o/i,r-Math.cos(s)*o),s===l)return[[u,a]];n=nt.h(Math.abs(s-l))*o,h=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),t=Math.atan(n/o),n=s-t,o=l+t;return[[u,a],[e-Math.sin(n)*h/i,r-Math.cos(n)*h],[e-Math.sin(o)*h/i,r-Math.cos(o)*h],[c,_]]}function Ft(t,e,r,i,o,n,a,s){var h,c,t=Zt(t,2),u=t[0],t=t[1],e=Zt(e,2),l=e[0],e=e[1],l=(l-r)*o,u=Math.atan((u-r)*o/(i-t)),t=r+Math.sin(u)*n/o,_=i-Math.cos(u)*n;if(s=a?(a=Math.atan(s*o/n),s=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(s/(1+s)),h=.5*Math.PI-a,c=r+Math.cos(a)*n/o,i-Math.sin(a)*n):(h=Math.atan(l/(i-e)),c=r+Math.sin(h)*n/o,i-Math.cos(h)*n),u===h)return[[t,_]];a=nt.h(Math.abs(u-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),e=Math.atan(a/n),a=u+e,n=h-e;return[[t,_],[r+Math.sin(a)*l/o,i-Math.cos(a)*l],[r+Math.sin(n)*l/o,i-Math.cos(n)*l],[c,s]]}function Bt(c,u,_,f,d,t,e,p,r,i,g,m,o,v){var o=Zt(o,2),y=o[0],o=o[1],v=Zt(v,2),x=v[0],v=v[1];if(!(y&&o||x&&v))return m;for(var h=r+o-(r-p),l=i-v+(g-i),n=[],a=[],E=[],b=0,M=m.length;b<M;b++){var T,A,s=m[b];s[2][1]<h?n.push(s):s[1][1]>l?E.push(s):s[2][1]>l&&s[1][1]<h?(T=h<r?t+Math.tan(_)*(r-h):t,A=i<l?t+Math.tan(u)*(l-i):t,n.push([s[0],s[1],[e,h],[T,h]]),h<l&&(l<i&&r<h?a.push([[t,h],[e,h],[e,l],[t,l]]):r<h?(a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[t,i],[e,i],[e,l],[A,l]])):l<i?(a.push([[T,h],[e,h],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,l],[t,l]])):(a.push([[T,h],[e,h],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[t,i],[e,i],[e,l],[A,l]]))),E.push([[A,l],[e,l],s[2],s[3]])):s[2][1]>l?(T=i<l?t+Math.tan(u)*(l-i):t,a.push([s[0],s[1],[e,l],[T,l]]),E.push([[T,l],[e,l],s[2],s[3]])):s[1][1]<h?(A=h<r?t+Math.tan(_)*(r-h):t,n.push([s[0],s[1],[e,h],[A,h]]),a.push([[A,h],[e,h],s[2],s[3]])):a.push(s)}n.length&&(R=r-p<o&&c<y,K=Math.atan((e-t)/(r-p)),C=(I=(O=o)-(r-p))/(y-(e-t)),o=Zt((k=Yt(n[0][1],n[0][2],S=e-y,h,w=O/y,O,!0,Math.tan(K)*O))[k.length-1],2),P=o[0],F=o[1],R&&(p=Zt((L=Yt(n[0][0],n[0][3],S,h,C,I,!0,Math.tan(K)*I))[L.length-1],2),D=p[0],N=p[1]),n.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=L)):(r=Yt(t[1],t[2],S,h,w,O),R&&(i=Yt(t[0],t[3],S,h,C,I)));for(var o=0,n=r.length;o<n;o++)zt(r[o],P,F,2);if(R){for(var a=0,s=i.length;a<s;a++)zt(i[a],D,N,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var R,O,w,S,I,C,k,L,D,N,P,F,B,Y,H,G,W,U,X,V,K,z,j,$,Z,q=E.length;return q&&(B=g-i<v&&c<x,y=Math.atan((e-t)/(g-i)),U=(W=(Y=v)-(g-i))/(x-(e-t)),o=Zt((X=Ht(E[q-1][1],E[q-1][2],G=e-x,l,H=Y/x,Y,!0,Math.tan(y)*Y))[0],2),$=o[0],Z=o[1],B&&(K=Zt((V=Ht(E[q-1][0],E[q-1][3],G,l,U,W,!0,Math.tan(y)*W))[0],2),z=K[0],j=K[1]),E.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=V)):(r=Ht(t[1],t[2],G,l,H,Y),B&&(i=Ht(t[0],t[3],G,l,U,W)));for(var o=0,n=r.length;o<n;o++)zt(r[o],$,Z,3);if(B){for(var a=0,s=i.length;a<s;a++)zt(i[a],z,j,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),n.concat(a).concat(E)}function Yt(t,c,e,r,i,o,n,a){var u,t=Zt(t,2),s=t[0],t=t[1],c=Zt(c,2),h=c[0],c=c[1],s=(s-e)*i,h=Math.atan((h-e)*i/(r-c)),c=e+Math.sin(h)*o/i,_=r-Math.cos(h)*o;if(a=n?(n=Math.atan(a*i/o),a=Math.sqrt(Math.tan(n)/2),n=2*Math.atan(a/(1+a)),l=.5*Math.PI-n,u=e+Math.cos(n)*o/i,r-Math.sin(n)*o):(l=Math.atan(s/(r-t)),u=e+Math.sin(l)*o/i,r-Math.cos(l)*o),l===h)return[[u,a]];var n=nt.h(Math.abs(l-h))*o,s=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),t=Math.atan(n/o),n=l+t,o=e+Math.sin(n)*s/i,l=r-Math.cos(n)*s,n=h-t;return[[c,_],[e+Math.sin(n)*s/i,r-Math.cos(n)*s],[o,l],[u,a]]}function Ht(t,e,r,i,o,n,a,c){var s,u,t=Zt(t,2),h=t[0],t=t[1],e=Zt(e,2),l=e[0],e=e[1],l=(l-r)*o,h=Math.atan((h-r)*o/(t-i)),t=r+Math.sin(h)*n/o,_=i+Math.cos(h)*n;if(c=a?(a=Math.atan(c*o/n),c=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(c/(1+c)),s=.5*Math.PI-a,u=r+Math.cos(a)*n/o,i+Math.sin(a)*n):(s=Math.atan(l/(e-i)),u=r+Math.sin(s)*n/o,i+Math.cos(s)*n),h===s)return[[t,_]];a=nt.h(Math.abs(h-s))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),e=Math.atan(a/n),a=h-e,n=r+Math.sin(a)*l/o,h=i+Math.cos(a)*l,a=s+e;return[[u,c],[r+Math.sin(a)*l/o,i+Math.cos(a)*l],[n,h],[t,_]]}function Gt(c,u,_,f,t,e,d,p,g,r,i,m,o,v){var o=Zt(o,2),n=o[0],o=o[1],v=Zt(v,2),y=v[0],v=v[1];if(!(n&&o||y&&v))return m;for(var h=t+n-(t-f),l=e-y+(d-e),x=[],a=[],E=[],b=0,M=m.length;b<M;b++){var T,A,s=m[b];s[2][0]<h?x.push(s):s[3][0]>l?E.push(s):s[2][0]>l&&s[3][0]<h?(T=h<t?i-Math.tan(u)*(h-f):g,A=e<l?i-Math.tan(_)*(d-l):r,x.push([s[0],[h,T],[h,i],s[3]]),h<l&&(t<h&&l<e?a.push([[h,r],[l,r],[l,i],[h,i]]):t<h?(a.push([[h,r],[e,r],[e,i],[h,i]]),a.push([[e,r],[l,A],[l,i],[e,i]])):l<e?(a.push([[h,T],[t,r],[t,i],[h,i]]),a.push([[t,r],[l,r],[l,i],[t,i]])):(a.push([[h,T],[t,r],[t,i],[h,i]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[e,r],[l,A],[l,i],[e,i]]))),E.push([[l,A],s[1],s[2],[l,i]])):s[2][0]>l?(T=e<l?i-Math.tan(_)*(d-l):r,a.push([s[0],[l,T],[l,i],s[3]]),E.push([[l,T],s[1],s[2],[l,i]])):s[3][0]<h?(A=h<t?i-Math.tan(u)*(h-f):r,x.push([s[0],[h,A],[h,i],s[3]]),a.push([[h,A],s[1],s[2],[h,i]])):a.push(s)}x.length&&(R=t-f<n&&c<o,V=Math.atan((t-f)/(i-r)),C=(I=(O=o)-(i-r))/(n-(t-f)),o=Zt((k=Wt(x[0][3],x[0][2],h,S=i-o,w=O/n,O,!0,Math.tan(V)*O))[0],2),P=o[0],F=o[1],R&&(n=Zt((L=Wt(x[0][0],x[0][1],h,S,C,I,!0,Math.tan(V)*I))[0],2),D=n[0],N=n[1]),x.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=L)):(r=Wt(t[3],t[2],h,S,w,O),R&&(i=Wt(t[0],t[1],h,S,C,I)));for(var o=0,n=r.length;o<n;o++)zt(r[o],P,F,4);if(R){for(var a=0,s=i.length;a<s;a++)zt(i[a],D,N,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])}));var R,O,w,S,I,C,k,L,D,N,P,F,B,Y,H,G,W,U,X,V,K,z,j,$,Z,q=E.length;return q&&(B=d-e<y&&c<v,o=Math.atan((d-e)/(i-r)),U=(W=(Y=v)-(i-r))/(y-(d-e)),V=Zt((X=Ut(E[q-1][3],E[q-1][2],l,G=i-v,H=Y/y,Y,!0,Math.tan(o)*Y))[X.length-1],2),$=V[0],Z=V[1],B&&(n=Zt((K=Ut(E[q-1][0],E[q-1][1],l,G,U,W,!0,Math.tan(o)*W))[K.length-1],2),z=n[0],j=n[1]),E.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=K)):(r=Ut(t[3],t[2],l,G,H,Y),B&&(i=Ut(t[0],t[1],l,G,U,W)));for(var o=0,n=r.length;o<n;o++)zt(r[o],$,Z,5);if(B){for(var a=0,s=i.length;a<s;a++)zt(i[a],z,j,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],t[1]=r[1].concat(r[2]).concat(r[3])})),x.concat(a).concat(E)}function Wt(t,c,e,r,i,o,n,a){var s,u,t=Zt(t,2),h=t[0],t=t[1],c=Zt(c,2),l=c[0],c=c[1],h=(-h+e)*i,l=Math.atan((-l+e)*i/(c-r)),c=e-Math.sin(l)*o/i,_=r+Math.cos(l)*o;if(a=n?(n=Math.atan(a*i/o),a=Math.sqrt(Math.tan(n)/2),n=2*Math.atan(a/(1+a)),s=.5*Math.PI-n,u=e-Math.cos(n)*o/i,r+Math.sin(n)*o):(s=Math.atan(h/(t-r)),u=e-Math.sin(s)*o/i,r+Math.cos(s)*o),s===l)return[[u,a]];n=nt.h(Math.abs(s-l))*o,h=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),t=Math.atan(n/o),n=s-t,o=l+t;return[[u,a],[e-Math.sin(n)*h/i,r+Math.cos(n)*h],[e-Math.sin(o)*h/i,r+Math.cos(o)*h],[c,_]]}function Ut(t,e,r,i,o,n,a,s){var h,c,t=Zt(t,2),u=t[0],t=t[1],e=Zt(e,2),l=e[0],e=e[1],l=(l-r)*o,u=Math.atan((u-r)*o/(t-i)),t=r+Math.sin(u)*n/o,_=i+Math.cos(u)*n;if(s=a?(a=Math.atan(s*o/n),s=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(s/(1+s)),h=.5*Math.PI-a,c=r+Math.cos(a)*n/o,i+Math.sin(a)*n):(h=Math.atan(l/(e-i)),c=r+Math.sin(h)*n/o,i+Math.cos(h)*n),u===h)return[[t,_]];a=nt.h(Math.abs(u-h))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),e=Math.atan(a/n),a=u+e,n=h-e;return[[t,_],[r+Math.sin(a)*l/o,i+Math.cos(a)*l],[r+Math.sin(n)*l/o,i+Math.cos(n)*l],[c,s]]}function Xt(c,u,_,t,e,f,d,p,r,i,g,m,o,v){var o=Zt(o,2),y=o[0],o=o[1],v=Zt(v,2),x=v[0],v=v[1];if(!(y&&o||x&&v))return m;for(var h=r+o-(r-p),l=i-v+(g-i),n=[],a=[],E=[],b=0,M=m.length;b<M;b++){var T,A,s=m[b];s[3][1]<h?n.push(s):s[0][1]>l?E.push(s):s[3][1]>l&&s[0][1]<h?(T=h<r?e-Math.tan(_)*(r-h):e,A=i<l?e-Math.tan(u)*(l-i):e,n.push([s[0],s[1],[T,h],[t,h]]),h<l&&(l<i&&r<h?a.push([[t,h],[e,h],[e,l],[t,l]]):r<h?(a.push([[t,h],[e,h],[e,i],[t,i]]),a.push([[t,i],[e,i],[A,l],[t,l]])):l<i?(a.push([[t,h],[T,h],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,l],[t,l]])):(a.push([[t,h],[T,h],[e,r],[t,r]]),a.push([[t,r],[e,r],[e,i],[t,i]]),a.push([[t,i],[e,i],[A,l],[t,l]]))),E.push([[t,l],[A,l],s[2],s[3]])):s[3][1]>l?(T=i<l?e-Math.tan(u)*(l-i):e,a.push([s[0],s[1],[T,l],[t,l]]),E.push([[t,l],[T,l],s[2],s[3]])):s[1][1]<h?(A=h<r?e-Math.tan(_)*(r-h):e,n.push([s[0],s[1],[A,h],[t,h]]),a.push([[t,h],[A,h],s[2],s[3]])):a.push(s)}n.length&&(R=r-p<o&&c<y,K=Math.atan((e-t)/(r-p)),C=(I=(O=o)-(r-p))/(y-(e-t)),o=Zt((k=Vt(n[0][0],n[0][3],S=t+y,h,w=O/y,O,!0,Math.tan(K)*O))[k.length-1],2),P=o[0],F=o[1],R&&(p=Zt((L=Vt(n[0][1],n[0][2],S,h,C,I,!0,Math.tan(K)*I))[L.length-1],2),D=p[0],N=p[1]),n.forEach(function(t,e){var r,i;0===e?(r=k,R&&(i=L)):(r=Vt(t[0],t[3],S,h,w,O),R&&(i=Vt(t[1],t[2],S,h,C,I)));for(var o=0,n=r.length;o<n;o++)zt(r[o],P,F,6);if(R){for(var a=0,s=i.length;a<s;a++)zt(i[a],D,N,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}));var R,O,w,S,I,C,k,L,D,N,P,F,B,Y,H,G,W,U,X,V,K,z,j,$,Z,q=E.length;return q&&(B=g-i<v&&c<x,y=Math.atan((e-t)/(g-i)),U=(W=(Y=v)-(g-i))/(x-(e-t)),o=Zt((X=Kt(E[q-1][0],E[q-1][3],G=t+x,l,H=Y/x,Y,!0,Math.tan(y)*Y))[0],2),$=o[0],Z=o[1],B&&(K=Zt((V=Kt(E[q-1][1],E[q-1][2],G,l,U,W,!0,Math.tan(y)*W))[0],2),z=K[0],j=K[1]),E.forEach(function(t,e){var r,i;e===q-1?(r=X,B&&(i=V)):(r=Kt(t[0],t[3],G,l,H,Y),B&&(i=Kt(t[1],t[2],G,l,U,W)));for(var o=0,n=r.length;o<n;o++)zt(r[o],$,Z,7);if(B){for(var a=0,s=i.length;a<s;a++)zt(i[a],z,j,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])})),n.concat(a).concat(E)}function Vt(t,c,e,r,i,o,n,a){var u,t=Zt(t,2),s=t[0],t=t[1],c=Zt(c,2),h=c[0],c=c[1],s=(e-s)*i,h=Math.atan((e-h)*i/(r-c)),c=e-Math.sin(h)*o/i,_=r-Math.cos(h)*o;if(a=n?(n=Math.atan(a*i/o),a=Math.sqrt(Math.tan(n)/2),n=2*Math.atan(a/(1+a)),l=.5*Math.PI-n,u=e-Math.cos(n)*o/i,r-Math.sin(n)*o):(l=Math.atan(s/(r-t)),u=e-Math.sin(l)*o/i,r-Math.cos(l)*o),l===h)return[[u,a]];var n=nt.h(Math.abs(l-h))*o,s=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),t=Math.atan(n/o),n=l+t,o=e-Math.sin(n)*s/i,l=r-Math.cos(n)*s,n=h-t;return[[c,_],[e-Math.sin(n)*s/i,r-Math.cos(n)*s],[o,l],[u,a]]}function Kt(t,e,r,i,o,n,a,c){var s,u,t=Zt(t,2),h=t[0],t=t[1],e=Zt(e,2),l=e[0],e=e[1],l=(r-l)*o,h=Math.atan((r-h)*o/(t-i)),t=r-Math.sin(h)*n/o,_=i+Math.cos(h)*n;if(c=a?(a=Math.atan(c*o/n),c=Math.sqrt(Math.tan(a)/2),a=2*Math.atan(c/(1+c)),s=.5*Math.PI-a,u=r-Math.cos(a)*n/o,i+Math.sin(a)*n):(s=Math.atan(l/(e-i)),u=r-Math.sin(s)*n/o,i+Math.cos(s)*n),h===s)return[[t,_]];a=nt.h(Math.abs(h-s))*n,l=Math.sqrt(Math.pow(n,2)+Math.pow(a,2)),e=Math.atan(a/n),a=h-e,n=r-Math.sin(a)*l/o,h=i+Math.cos(a)*l,a=s+e;return[[u,c],[r-Math.sin(a)*l/o,i+Math.cos(a)*l],[n,h],[t,_]]}function zt(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var jt=[wt,St,Ct,It];var $t={calPoints:function(c,u,_,f,t,d,e,r,i,o,n,a,p,g,m){var s=[];if("none"===u)return s;if(-1<["dashed","dotted"].indexOf(u)){var u=0===p||2===p?Dt(u,t,d,e,r,c):Dt(u,i,o,n,a,c),v=u.n,y=u.ps,x=u.pd;if(1<v){for(var E=0;E<v;E++){var b=E===v-1,h=void 0,M=void 0,T=void 0,l=(h=0===p||2===p?E?t+y*E+x*E:t:E?i+y*E+x*E:i)+y;0===p?l<=d?b?s.push([[t,i],[r,i],[e,o],[d,o]]):(M=i+(h-t)*Math.tan(_),T=i+(l-t)*Math.tan(_),s.push([[h,i],[l,i],[l,T],[h,M]])):e<=h?(M=i+(r-h)*Math.tan(f),T=i+(r-l)*Math.tan(f),b?s.push([[h,i],[r,i],[r,i],[h,M]]):s.push([[h,i],[l,i],[l,T],[h,M]])):h<d?(M=i+(h-t)*Math.tan(_),s.push([[h,i],[d,i],[d,o],[h,M]]),b?(s.push([[d,i],[e,i],[e,o],[d,o]]),s.push([[e,i],[r,i],[r,i],[d,o]])):e<l?(T=i+(r-l)*Math.tan(f),s.push([[d,i],[e,i],[e,o],[d,o]]),s.push([[e,i],[l,i],[l,T],[e,o]])):s.push([[d,i],[l,i],[l,o],[d,o]])):e<l?(M=i+(r-l)*Math.tan(f),h<d?(T=i+(h-t)*Math.tan(_),s.push([[h,i],[d,i],[d,o],[h,T]]),s.push([[d,i],[e,i],[e,o],[d,o]])):s.push([[h,i],[e,i],[e,o],[h,o]]),b?s.push([[e,i],[r,i],[r,i],[e,o]]):s.push([[e,i],[l,i],[l,M],[e,o]])):b?s.push([[h,i],[r,i],[e,o],[h,o]]):s.push([[h,i],[l,i],[l,o],[h,o]]):1===p?l<=o?b?s.push([[e,o],[r,i],[r,a],[e,n]]):(M=r-(h-i)*Math.tan(_),T=r-(l-i)*Math.tan(_),s.push([[M,h],[r,h],[r,l],[T,l]])):n<=h?(M=e+(h-n)*Math.tan(f),T=e+(l-n)*Math.tan(f),b?s.push([[M,h],[r,h],[r,a],[r,a]]):s.push([[M,h],[r,h],[r,l],[T,l]])):h<o?(M=e+(o-h)*Math.tan(_),s.push([[M,h],[r,h],[r,o],[e,o]]),b?(s.push([[e,o],[r,o],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,a],[r,a]])):n<l?(T=e+(l-n)*Math.tan(f),s.push([[e,o],[r,o],[r,n],[e,n]]),s.push([[e,n],[r,n],[r,l],[T,l]])):s.push([[e,o],[r,o],[r,l],[e,l]])):n<l?(M=e+(l-n)*Math.tan(f),h<o?(T=e+(o-h)*Math.tan(_),s.push([[T,h],[r,h],[r,o],[e,o]]),s.push([[e,o],[r,o],[r,n],[e,n]]),b?s.push([[e,n],[r,n],[r,r],[r,r]]):s.push([[e,n],[r,n],[r,l],[M,l]])):(s.push([[e,h],[r,h],[r,n],[e,n]]),b?s.push([[e,n],[r,n],[r,a],[r,a]]):s.push([[e,n],[r,n],[r,l],[M,l]]))):b?s.push([[e,h],[r,h],[r,a],[e,n]]):s.push([[e,h],[r,h],[r,l],[e,l]]):2===p?l<=d?b?s.push([[t,a],[d,n],[e,n],[r,a]]):(M=a-(h-t)*Math.tan(_),T=a-(l-t)*Math.tan(_),s.push([[h,M],[l,T],[l,a],[h,a]])):e<=h?(M=a-(r-h)*Math.tan(f),T=a-(r-l)*Math.tan(f),b?s.push([[h,M],[r,a],[r,a],[h,a]]):s.push([[h,M],[l,T],[l,a],[h,a]])):h<d?(M=a-(h-t)*Math.tan(_),s.push([[h,M],[d,n],[d,a],[h,a]]),b?(s.push([[d,n],[e,n],[e,a],[d,a]]),s.push([[e,n],[r,a],[r,a],[e,a]])):e<l?(T=a-(l-e)*Math.tan(f),s.push([[d,n],[e,n],[e,a],[d,a]]),s.push([[e,n],[l,T],[l,a],[e,a]])):s.push([[d,n],[l,n],[l,a],[d,a]])):e<l?(M=a-(r-l)*Math.tan(f),h<d?(T=a-(h-e)*Math.tan(_),s.push([[h,T],[d,n],[d,a],[h,a]]),s.push([[d,n],[e,n],[e,a],[d,a]])):s.push([[h,n],[e,n],[e,a],[h,a]]),b?s.push([[e,n],[r,a],[r,a],[e,a]]):s.push([[e,n],[l,M],[l,a],[e,a]])):b?s.push([[h,n],[e,n],[r,a],[h,a]]):s.push([[h,n],[l,n],[l,a],[h,a]]):3===p&&(l<=o?b?s.push([[t,i],[d,o],[d,n],[t,a]]):(M=t+(h-i)*Math.tan(_),T=t+(l-i)*Math.tan(_),s.push([[t,h],[M,h],[T,l],[t,l]])):n<=h?(M=t+(a-h)*Math.tan(f),T=t+(a-l)*Math.tan(f),b?s.push([[t,h],[M,h],[t,a],[t,a]]):s.push([[t,h],[M,h],[T,l],[t,l]])):h<o?(M=t+(h-i)*Math.tan(_),s.push([[t,h],[M,h],[d,o],[t,o]]),b?(s.push([[t,o],[d,o],[d,n],[t,n]]),s.push([[t,n],[d,n],[t,a],[t,a]])):n<l?(T=t+(a-l)*Math.tan(f),s.push([[t,o],[d,o],[d,n],[t,n]]),s.push([[t,n],[d,n],[T,l],[t,l]])):s.push([[t,o],[d,o],[d,l],[t,l]])):n<l?(M=t+(a-l)*Math.tan(f),h<o?(T=t+(h-i)*Math.tan(_),s.push([[t,h],[T,h],[d,o],[t,i]]),s.push([[t,o],[d,o],[d,n],[t,n]])):s.push([[t,h],[d,h],[d,n],[t,n]]),b?s.push([[t,n],[d,n],[t,a],[t,a]]):s.push([[t,n],[d,n],[M,l],[t,l]])):b?s.push([[t,h],[d,h],[d,n],[t,a]]):s.push([[t,h],[d,h],[d,l],[t,l]]))}if(0===p)return Nt(c,_,f,t,d,e,r,i,o,0,0,s,g,m);if(1===p)return Bt(c,_,f,0,0,e,r,i,o,n,a,s,g,m);if(2===p)return Gt(c,_,f,t,d,e,r,0,o,n,a,s,g,m);if(3===p)return Xt(c,_,f,t,d,0,0,i,o,n,a,s,g,m)}}return 0===p?(t<d&&s.push([[t,i],[d,i],[d,o],[t,i]]),s.push([[d,i],[e,i],[e,o],[d,o]]),e<r&&s.push([[e,i],[r,i],[r,i],[e,o]]),Nt(c,_,f,t,d,e,r,i,o,0,0,s,g,m)):1===p?(i<o&&s.push([[r,i],[r,i],[r,o],[e,o]]),s.push([[e,o],[r,o],[r,n],[e,n]]),n<a&&s.push([[e,n],[r,n],[r,a],[r,a]]),Bt(c,_,f,0,0,e,r,i,o,n,a,s,g,m)):2===p?(t<d&&s.push([[t,a],[d,n],[d,a],[t,a]]),s.push([[d,n],[e,n],[e,a],[d,a]]),e<r&&s.push([[e,n],[r,a],[r,a],[e,a]]),Gt(c,_,f,t,d,e,r,0,o,n,a,s,g,m)):3===p?(i<o&&s.push([[t,i],[t,i],[d,o],[t,o]]),s.push([[t,o],[d,o],[d,n],[t,n]]),n<a&&s.push([[t,n],[d,n],[t,a],[t,a]]),Xt(c,_,f,t,d,0,0,i,o,n,a,s,g,m)):void 0},calRadius:function(t,e,r,i,o,n,a,s){var h,l=(o=Zt(o,2))[0],o=o[1],c=(n=Zt(n,2))[0],n=n[1],u=(a=Zt(a,2))[0],a=a[1],_=(s=Zt(s,2))[0],s=s[1],l=Math.max(l,0),o=Math.max(o,0),c=Math.max(c,0),n=Math.max(n,0),u=Math.max(u,0),a=Math.max(a,0),_=Math.max(_,0),s=Math.max(s,0);if(h=0<l&&0<o||0<c&&0<n||0<u&&0<a||0<_&&0<s?!0:h)return h=[],0<l&&0<o?(h.push([t,e+o]),h.push([t,e+o*(1-ht),t+l*(1-ht),e,t+l,e])):h.push([t,e]),0<c&&0<n?(h.push([t+r-c,e]),h.push([t+r-c*(1-ht),e,t+r,e+n*(1-ht),t+r,e+n])):h.push([t+r,e]),0<u&&0<a?(h.push([t+r,e+i-a]),h.push([t+r,e+i-a*(1-ht),t+r-u*(1-ht),e+i,t+r-u,e+i])):h.push([t+r,e+i]),0<_&&0<s?(h.push([t+_,e+i]),h.push([t+_*(1-ht),e+i,t,e+i-s*(1-ht),t,e+i-s])):h.push([t,e+i]),h},calBorderRadius:function(n,a,e,s,r){var i=!0;jt.forEach(function(t){s[t]=e[t].map(function(t,e){return 0<t[0]?(i=!1,t[1]===lt?Math.max(0,t[0]):t[1]===ct?Math.max(0,t[0]*(e?a:n)*.01):t[1]===ut?Math.max(0,t[0]*r.computedStyle[kt]):t[1]===_t?Math.max(0,t[0]*r.width*.01):t[1]===ft?Math.max(0,t[0]*r.height*.01):t[1]===dt?Math.max(0,t[0]*Math.max(r.width,r.height)*.01):t[1]===pt?Math.max(0,t[0]*Math.min(r.width,r.height)*.01):0):0})}),i||jt.forEach(function(t,e){var r,i=e%2==0?0:1,o=i?a:n,t=s[t],e=s[jt[(e+1)%4]];t[i]+e[i]>o&&(t[i]>=(r=.5*o)&&e[i]>=r?t[i]=e[i]=r:t[i]>r?t[i]=o-e[i]:e[i]>r&&(e[i]=o-t[i]))})},calBorderRadiusInline:function(t,e,r){t.length&&(i=t[0],o=t[t.length-1]);var i,o,n=i?i.outerWidth:0,a=i?i.outerHeight:0;n+=r[bt]+r[At],a+=r[Mt]+r[Tt]+r[Ot]+r[Rt],[wt,It].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===lt?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:n)*.01);t=Math.min(e?a:n,t);return t})}),n=o?o.outerWidth:0,a=o?o.outerHeight:0,[St,Ct].forEach(function(t){r[t]=e[t].map(function(t,e){t=t[1]===lt?Math.max(0,t[0]):Math.max(0,t[0]*(e?a:n)*.01);t=Math.min(e?a:n,t);return t})})},renderBorder:function(t,e,r,i,o,n,a){var s;e===et.CANVAS||e===et.WEBGL?(r.beginPath(),r.fillStyle!==o&&(r.fillStyle=o),i.forEach(function(t){gt(r,t,n,a)}),r.fill(),r.closePath()):e===et.SVG&&(s="",i.forEach(function(t){s+=Et(t)}),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",o]]}))}},Jt={TYPE_VD:Symbol("Dom"),TYPE_GM:Symbol("Geom"),TYPE_CP:Symbol("Component")},Qt={}.toString;function te(e){return function(t){return Qt.call(t)==="[object "+e+"]"}}var ee=te("Object"),t=te("String"),e=te("Function"),re=te("Number"),i=te("Boolean"),ie=te("Date"),oe={}.hasOwnProperty,ne=oe.toString,ae=ne.call(Object);function se(t){return null==t}function he(t){return se(t)?"":t.toString()}function le(t){var e,r,i,o,n,a,s,h,l;return"item"===t.type||"img"===t.type?(e="",(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"):"text"===t.type?(r="",(t.children||[]).forEach(function(t){r+=le(t)}),"<g>"+r+"</g>"):"dom"===t.type||"geom"===t.type?(i="<g>",t.bb.forEach(function(t){i+=le(t)}),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach(function(t){t.isMask||(i+=le(t))}),i+="</g>",o=t.opacity,n=t.transform,a=t.visibility,s=t.mask,h=t.overflow,l=t.filter,t=t.mixBlendMode,"<g"+(1!==o&&void 0!==o?' opacity="'+o+'"':"")+(n?' transform="'+n+'"':"")+' visibility="'+a+'"'+(s?' mask="'+s+'"':"")+(h?' clip-path="'+h+'"':"")+(l||t?' style="':"")+(l?"filter:"+l+";":"")+(t?"mix-blend-mode:"+t+";":"")+(l||t?'"':"")+">"+i+"</g>"):void 0}function ce(t){var r="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(r+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach(function(t){r+=" "+t[0]+'="'+t[1]+'"'}),r+=">",(t.children||[]).forEach(function(t){var e;r+=(e="<"+(t=t).tagName,(t.props||[]).forEach(function(t){e+=" "+t[0]+'="'+t[1]+'"'}),e+="></"+t.tagName+">")}),r+="</"+t.tagName+">"}function ue(t,e){for(var r=t.length?t[0]:"",i=1,o=t.length;i<o;i++)r+=e+t[i];return r}function _e(t){if(!t||"[object Object]"!==Qt.call(t))return!1;t=Object.getPrototypeOf(t);if(!t)return!0;t=oe.call(t,"constructor")&&t.constructor;return"function"==typeof t&&ne.call(t)===ae}var xt={isObject:ee,isString:t,isFunction:e,isNumber:re,isBoolean:i,isDate:ie,isNil:se,isPrimitive:function(t){return xt.isNil(t)||xt.isBoolean(t)||xt.isString(t)||xt.isNumber(t)},isAuto:function(t){return se(t)||"auto"===t},isPlainObject:_e,stringify:he,joinSourceArray:function t(e){for(var r="",i=0,o=e.length;i<o;i++){var n=e[i];Array.isArray(n)?r+=t(n):r+=he(n)}return r},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=ce(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=le(t)}),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach(function(t){t.isMask||(e+=le(t))}),e+="</g>"},joinVd:le,joinDef:ce,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];return t&&"transparent"!==t?"#"===t.charAt(0)?3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1):(t=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i))?(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],se(t[4])?e[3]=1:e[3]=parseFloat(t[4])):e=[0,0,0,0]:e=[0,0,0,0],e},int2rgba:function(t){if(Array.isArray(t)){if(4===t.length)return"rgba("+ue(t=t.map(function(t,e){return 3===e?t:Math.floor(Math.max(0,t))}),",")+")";if(3===t.length)return"rgba("+ue(t=t.map(function(t){return Math.floor(t)}),",")+",1)"}return t||"rgba(0,0,0,0)"},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+ue(t,",")+")";if(3===t.length)return"rgba("+ue(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var o=t[r];if(Array.isArray(o))e[o[0]]=o[1];else for(var n=Object.keys(o),a=n.length-1;0<=a;a--){var s=n[a];e[s]=o[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,o=r.length;i<o;i++){var n=r[i];e.push([n,t[n]])}return e},clone:function e(r){if(se(r)||"object"!==mt(r))return r;if(r.$$type===Jt.TYPE_VD||r.$$type===Jt.TYPE_GM||r.$$type===Jt.TYPE_CP)return r;if(xt.isDate(r))return new Date(r);if(!_e(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach(function(t){i[t]=e(r[t])}),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,o=e.length;i<o;i++){var n=e[i],a=r[i],s=Array.isArray(n),h=Array.isArray(a);if(s&&h){if(!t(n,a))return!1}else{if(s||h)return!1;if(n!==a)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(ee(e)&&ee(r)){for(var i={},o=0,n=Object.keys(e),c=n.length;o<c;o++){var a=n[o];if(!r.hasOwnProperty(a)||!t(e[a],r[a]))return!1;i[a]=!0}for(var s=0,h=Object.keys(r),u=h.length;s<u;s++){var _=h[s];if(!i.hasOwnProperty(_))return!1}}else{if(ie(e)&&ie(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var l=0,f=e.length;l<f;l++)if(!t(e[l],r[l]))return!1}return!0},extend:function(t,e,r){if(null===e||"object"!==mt(e))return t;for(var i=0,o=(r=r||Object.keys(e)).length;i<o;){var n=r[i];t[n]=e[n],i++}return t},joinArr:ue,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach(function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()}),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(e&&!qt.isE(e)){var o=Zt(t,4),n=o[0],a=o[1],s=o[2],o=o[3],l=(r&&(n-=r,s+=r),i&&(a-=i,o+=i),[s,a,n,o,s,o]),s=Zt(qt.calPoint([n,a],e),4),n=s[0],a=s[1];(h=s[3])&&1!==h&&(n/=h,a/=h);for(var c=n,u=a,_=n,f=a,d=0;d<6;d+=2){var h,p=l[d],g=l[d+1],m=Zt(qt.calPoint([p,g],e),4),p=m[0],g=m[1];(h=m[3])&&1!==h&&(p/=h,g/=h),c=Math.min(c,p),_=Math.max(_,p),u=Math.min(u,g),f=Math.max(f,g)}t=[c,u,_,f]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},fe={flag:!1},de={list:[],data:{},charWidth:{},padding:{},ELLIPSIS:"…"},pe={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},ge=qt.calPoint;function me(t,e,r){e=t.createShader(e);if(null==e)throw new Error("unable to create shader");if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw r=t.getShaderInfoLog(e),t.deleteShader(e),new Error("Failed to compile shader: "+r);return e}function ve(t,e,r,i){var t=Zt(t,4),o=t[0],n=t[1],a=t[2],t=t[3];return void 0===a&&(a=0),(t=void 0===t?1:t)&&1!==t&&(o/=t,n/=t,a/=t),n===r?n=0:(n=(n-r)/r,i&&(n=-n)),[(o=o===e?0:(o-e)/e)*t,n*t,a*t,t]}function ye(t,e,r,i,o){var n=t.createTexture();return xe(t,n,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&o?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,o,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n}function xe(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var Ee,be={initShaders:function(t,e,r){if(!(e=function(t,e,r){e=me(t,t.VERTEX_SHADER,e),r=me(t,t.FRAGMENT_SHADER,r);if(!e||!r)return null;var i=t.createProgram();if(!i)return null;if(i.vertexShader=e,i.fragmentShader=r,t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return i;var o=t.getProgramInfoLog(i);throw t.deleteProgram(i),t.deleteShader(r),t.deleteShader(e),new Error("Failed to link program: "+o)}(t,e,r)))throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),e},createTexture:ye,bindTexture:xe,drawTextureCache:function(r,t,T,y,x,E){var b,A=[],R=[],O=[],M=[0],w=[M],t=(t.forEach(function(t,e){var t=Zt(t,5),r=t[0],i=t[1],o=t[2],n=t[3],t=t[4],e=(e?(e=T[r.page.uuid],b!==e&&(M=[0,b=e],w.push(M))):(b=T[r.page.uuid],M[1]=b),r.x),c=r.y,u=r.width,_=r.height,f=r.page,r=r.bbox,a=r[0],r=r[1],s=a+(n||0),h=r+_+(t||0),a=a+u+(n||0),n=r+(t||0),r=Zt(ge([s,h],o),4),t=r[0],d=r[1],r=r[3],h=Zt(ge([a,h],o),4),p=h[0],g=h[1],h=h[3],a=Zt(ge([a,n],o),4),m=a[0],v=a[1],a=a[3],s=Zt(ge([s,n],o),4),n=s[0],o=s[1],s=s[3],l=Zt(ve([t,d,0,r],y,x,E),2),t=l[0],d=l[1],l=Zt(ve([p,g,0,h],y,x,E),2),p=l[0],g=l[1],l=Zt(ve([m,v,0,a],y,x,E),2),m=l[0],v=l[1],l=Zt(ve([n,o,0,s],y,x,E),2),n=l[0],o=l[1],l=(A.push(t,d,0,r,n,o,0,s,p,g,0,h,n,o,0,s,p,g,0,h,m,v,0,a),e/f.width),t=(c+_)/f.height,d=(e+u)/f.width,r=c/f.height;R.push(l,t,l,r,d,t,l,r,d,t,d,r),O.push(i,i,i,i,i,i),M[0]++}),r.createBuffer()),e=(r.bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,new Float32Array(A),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_position")),n=(r.vertexAttribPointer(e,4,r.FLOAT,!1,0,0),r.enableVertexAttribArray(e),r.createBuffer()),i=(r.bindBuffer(r.ARRAY_BUFFER,n),r.bufferData(r.ARRAY_BUFFER,new Float32Array(R),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_texCoords")),a=(r.vertexAttribPointer(i,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(i),r.createBuffer()),o=(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(O),r.STATIC_DRAW),r.getAttribLocation(r.program,"a_opacity")),s=(r.vertexAttribPointer(o,1,r.FLOAT,!1,0,0),r.enableVertexAttribArray(o),r.getUniformLocation(r.program,"u_texture")),h=0;w.forEach(function(t){var t=Zt(t,2),e=t[0],t=t[1];r.uniform1i(s,t),r.drawArrays(r.TRIANGLES,h,e*=6),h+=e}),r.deleteBuffer(t),r.deleteBuffer(n),r.deleteBuffer(a),r.disableVertexAttribArray(e),r.disableVertexAttribArray(i),r.disableVertexAttribArray(o)},drawBlur:function(e,t,c,u,_,f,d,p,r,i,o,n,a,g,m){for(var s=(h=Zt(ve([a,i-a],o,n),2))[0],h=h[1],o=(a=Zt(ve([r-a,a],o,n),2))[0],n=a[1],a=e.createBuffer(),s=(e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([s,n,s,h,o,n,s,h,o,n,o,h]),e.STATIC_DRAW),e.getAttribLocation(t,"a_position")),n=(e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(s),e.createBuffer()),o=(e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW),e.getAttribLocation(t,"a_texCoords")),l=(e.vertexAttribPointer(o,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(o),e.getUniformLocation(t,"u_direction")),v=(e.uniform2f(l,0,0),e.getUniformLocation(t,"u_texture")),y=(e.uniform1i(v,p),e.drawArrays(e.TRIANGLES,0,6),e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW),100/Math.max(r,i)),x=r/i,E=[],b=0;b<3;b++){var M=ye(e,null,p,r,i),T=(e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,M,0),i<=r?e.uniform2f(l,y,0):e.uniform2f(l,y*x,0),e.uniform1i(v,d),e.drawArrays(e.TRIANGLES,0,6),E.push(_),ye(e,null,d,r,i));e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,T,0),i<=r?e.uniform2f(l,0,y*x):e.uniform2f(l,0,y),e.uniform1i(v,p),e.drawArrays(e.TRIANGLES,0,6),_=T,E.push(M)}return e.deleteBuffer(a),e.deleteBuffer(n),e.disableVertexAttribArray(s),e.disableVertexAttribArray(o),E.forEach(function(t){return e.deleteTexture(t)}),_},drawOverflow:function(t,c,e,r,i,o,n,a){var s=t.createBuffer(),h=(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_position")),h=(t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h),e/n),l=r/a,i=(i+e)/n,e=(o+r)/a,n=t.createBuffer(),o=(t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([h,l,h,e,i,l,h,e,i,l,i,e]),t.STATIC_DRAW),t.getAttribLocation(t.programOverflow,"a_texCoords")),r=(t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o),t.getUniformLocation(t.programOverflow,"u_texture"));t.uniform1i(r,c),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(s)},drawMask:function(t,e,r,i){var o=t.createBuffer(),n=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_position")),a=(t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(i,"a_texCoords")),h=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(i,"u_texture1")),h=(t.uniform1i(h,r),t.getUniformLocation(i,"u_texture2"));t.uniform1i(h,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(a),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,l,c){var o=t.createBuffer(),n=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),a=(t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),h=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture1")),h=(t.uniform1i(h,r),t.getUniformLocation(e,"u_texture2"));t.uniform1i(h,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(a),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)},drawCm:function(t,e,r,i){var o=t.createBuffer(),n=(t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_position")),a=(t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n),t.createBuffer()),s=(t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW),t.getAttribLocation(e,"a_texCoords")),h=(t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s),t.getUniformLocation(e,"u_texture")),h=(t.uniform1i(h,r),t.getUniformLocation(e,"u_m"));t.uniform1fv(h,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(a),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)}},Me={},Te={},Ae=[],Re=[],Oe="function"==typeof OffscreenCanvas&&xt.isFunction(OffscreenCanvas.prototype.getContext);function we(t,e,r,i,o){var n;return(n=t?i[t]||(i[t]=!fe.flag&&Oe?new OffscreenCanvas(e,r):document.createElement("canvas")):(n=i===Me?Ae:Re).length?n.pop():!fe.flag&&Oe?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,n.height=r,fe.flag&&(n.style.width=e+"px",n.style.height=r+"px",n.setAttribute("type",i===Me?"canvas":"webgl"),t&&n.setAttribute("key",t),o&&n.setAttribute("message",o),document.body.appendChild(n)),e=i===Me?n.getContext("2d"):n.getContext("webgl",pe)||n.getContext("experimental-webgl",pe),{canvas:n,ctx:e,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===Me?Ae:Re).push(this.canvas),this.available=!1}}}var Se,Ie,Ce={},ke={},Le={},De={measureText:function(){var n=de.list,c=de.data,u="",_=[],f=[],d=[];if(Object.keys(c).forEach(function(t){var e=c[t],r=e.ff,i=e.fs,o=e.fw,n=e.s;if(n){_.push(t),f.push(n.length);for(var a="position:absolute;font-family:".concat(r,";font-size:").concat(i,"px;font-weight:").concat(o),s=0,h=n.length;s<h;s++){var l=n.charAt(s);d.push(l),u+='<span style="'.concat(a,'">').concat(l.replace(/</,"&lt;").replace(" ","&nbsp;"),"</span>")}c[t].s=""}}),u){for(var t,e=document.createElement("div"),a=(e.style.position="absolute",e.style.left="99999px",e.style.top="-99999px",e.style.visibility="hidden",document.body.appendChild(e),e.innerHTML=u,e.childNodes),s=de.charWidth,r=0,i=0,o=0,h=a.length;o<h;o++){var l=a[o],p=(0===r&&(t=_[i]),++r===f[i]&&(i++,r=0),d[o]),l=window.getComputedStyle(l,null);s[t][p]=parseFloat(l.width)}n.forEach(function(t){return t.__measureCb()}),de.list=[],de.data={},fe.flag||document.body.removeChild(e)}},measureTextSync:function(t,e,r,i,o){e="position:absolute;font-family:".concat(e,";font-size:").concat(r,"px;font-weight:").concat(i),r='<span style="'.concat(e,'">').concat(o,'</span><span style="').concat(e,'">').concat(o).concat(o,"</span>"),i=document.createElement("div"),i.style.position="absolute",i.style.left="99999px",i.style.top="-99999px",i.style.visibility="hidden",document.body.appendChild(i),i.innerHTML=r,e=i.childNodes;return 2*parseFloat(window.getComputedStyle(e[0],null).width)-parseFloat(window.getComputedStyle(e[1],null).width)},IMG:Ce,INIT:0,LOADED:2,LOADING:1,measureImg:function(e,r){if(Array.isArray(e)){if(!e.length)return r();var i=0,o=e.length,n=[];e.forEach(function(t,e){De.measureImg(t,function(t){n[e]=t,++i===o&&r(n)})})}else{if(!e||!xt.isString(e))return De.error("Measure img invalid: "+e),void(r&&r({state:2,success:!1,url:e}));var t,a,s=Ce[e]=Ce[e]||{state:0,task:[]};2===s.state?r&&r(s):1===s.state?r&&s.task.push(r):(s.state=1,r&&s.task.push(r),(t=new Image).onload=function(){s.state=2,s.success=!0,s.width=t.width,s.height=t.height,s.source=t,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},t.onerror=function(t){s.state=2,s.success=!1,s.url=e,s.task.splice(0).forEach(function(t){return t(s)})},"data:"===e.substr(0,5)||(a=/^(?:\w+:)?\/\/([^/:]+)/.exec(e))&&("undefined"!=typeof location&&location.hostname===a[1]||(t.crossOrigin="anonymous")),t.src=e,fe.flag&&"undefined"!=typeof document&&document.body.appendChild(t))}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:(Ie=function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(De.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,1e3/60),De.requestAnimationFrame=function(t){return setTimeout(t,1e3/60)}),e},Pe.toString=function(){return Ie.toString()},Pe),cancelAnimationFrame:(Se=function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(De.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),De.cancelAnimationFrame=function(t){return clearTimeout(t)}),e},Ne.toString=function(){return Se.toString()},Ne),now:function(){return"undefined"!=typeof performance?(De.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(De.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&Me.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return we(r,t,e,Me,i)},releaseCacheCanvas:function(t){Ae.push(t)},delCacheCanvas:function(t){t&&delete Me[t]},hasCacheWebgl:function(t){return t&&Te.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return we(r,t,e,Te,i)},releaseCacheWebgl:function(t){Re.push(t)},delCacheWebgl:function(t){t&&delete Te[t]},isDom:function(t){if(t){if(xt.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(xt.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},checkSupportFontFamily:function(t){if("arial"===(t=t.toLowerCase())||"serif"===t||"sans-serif"===t||"sansserif"===t)return!0;if(!vt.info.hasOwnProperty(t))return!1;if(vt.info[t].hasOwnProperty("checked"))return vt.info[t].checked;for(var e=De.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__"),r=e.ctx,i=(r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",Ee||(r.clearRect(0,0,16,16),r.font="16px arial",r.fillText("a",8,8),e.draw(),Ee=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),r.font="16px "+t,r.fillText("a",8,8),e.draw(),r.getImageData(0,0,16,16).data),o=0,n=i.length;o<n;o++)if(Ee[o]!==i[o])return vt.info[t].checked=!0;return vt.info[t].checked=!1},loadFont:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,o=t.length,n=[];t.forEach(function(t,e){De.loadFont(t,function(t){n[e]=t,++i===o&&r(n)})})}else{if(!t||!xt.isString(t))return De.error("Load font invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e=ke[t]=ke[t]||{state:0,task:[]};2===e.state?r&&r(e):1===e.state?r&&e.task.push(r):(e.state=1,r&&e.task.push(r),new FontFace(t,"url(".concat(t,")")).load().then(function(){e.state=2,e.success=!0,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}).catch(function(){e.state=2,e.success=!1,e.url=t,e.task.splice(0).forEach(function(t){return t(e)})}))}},loadComponent:function(t,r){if(Array.isArray(t)){if(!t.length)return r();var i=0,o=t.length,n=[];t.forEach(function(t,e){De.loadComponent(t,function(t){n[e]=t,++i===o&&r(n)})})}else{if(!t||!xt.isString(t))return De.error("Load component invalid: "+t),void(r&&r({state:2,success:!1,url:t}));var e,a=Le[t]=Le[t]||{state:0,task:[]};2===a.state?r&&r(a):1===a.state?r&&a.task.push(r):(a.state=1,r&&a.task.push(r),(e=document.createElement("script")).src=t,e.async=!0,e.onload=function(){a.state=2,a.success=!0,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},e.onerror=function(){a.state=2,a.success=!1,a.url=t,a.task.splice(0).forEach(function(t){return t(a)}),document.head.removeChild(e)},document.head.appendChild(e))}}};function Ne(t){return Se.apply(this,arguments)}function Pe(t){return Ie.apply(this,arguments)}var Fe=xt.rgba2int,Be=xt.isNil,Ye=r.PX,He=r.PERCENT,Ge=r.DEG,We=r.NUMBER,Ue=r.REM,Xe=r.VW,Ve=r.VH,Ke=r.VMAX,ze=r.VMIN,je=r.calUnit,$e=nt.d2r,Ze=yt.canvasPolygon,qe=yt.svgPolygon,Je=A.STYLE_KEY.FONT_SIZE,Qe=A.NODE_KEY.NODE_DEFS_CACHE;function tr(t){var e;return/^[-+]?[\d.]/.test(t)?(e=je(t),-1<[We,Ge].indexOf(e[1])&&(e[1]=Ye),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,He]}function er(c,t,e){for(var u,r=[],_=c[0][0],f=0,d=c.length;f<d;f++){var i,o=c[f];1<o.length?(i=o[1])[1]===He?r.push([o[0],.01*i[0]]):i[1]===Ue?r.push([o[0],i[0]*e.computedStyle[Je]/t]):i[1]===Xe?r.push([o[0],i[0]*e.width/t]):i[1]===Ve?r.push([o[0],i[0]*e.height/t]):i[1]===Ke?r.push([o[0],i[0]*Math.max(e.width,e.height)/t]):i[1]===ze?r.push([o[0],i[0]*Math.min(e.width,e.height)/t]):r.push([o[0],i[0]/t]):r.push([o[0]])}1===r.length&&r.push(xt.clone(r[0])),1===r[0].length&&r[0].push(0),1<r.length&&(1===r[u=r.length-1].length&&r[u].push(1));for(var p=r[0][1],n=1,g=r.length;n<g-1;n++){var m=r[n];if(1<m.length)p=m[1];else{for(var v=n+1,y=r[r.length-1][1];v<g-1;v++){var x=r[v];if(1<x.length){y=x[1];break}}for(var E=(y-p)/(v-n+1),b=n;b<v;b++)r[b].push(p+E*(b+1-n));n=v}}for(var M=1,T=r.length;M<T;M++){var A=r[M],R=r[M-1];A[1]<R[1]&&(A[1]=R[1])}for(var O=0,w=r.length;O<w;O++){var a=r[O];if(1<a[1]){r.splice(O);var S,I,C,k,s=r[O-1];s&&s[1]<1&&(S=a[0][0]-s[0][0],I=a[0][1]-s[0][1],C=a[0][2]-s[0][2],k=a[0][3]-s[0][3],s=(1-s[1])/(a[1]-s[1]),r.push([[a[0][0]+S*s,a[0][1]+I*s,a[0][2]+C*s,a[0][3]+k*s],1]));break}}for(var L=r.length-1;0<=L;L--){var h=r[L];if(h[1]<0){r.splice(0,L+1);var D,N,P,F,l=r[L];l&&0<l[1]&&(D=l[0][0]-h[0][0],N=l[0][1]-h[0][1],P=l[0][2]-h[0][2],F=l[0][3]-h[0][3],l=-h[1]/(l[1]-h[1]),r.unshift([[h[0][0]+D*l,h[0][1]+N*l,h[0][2]+P*l,h[0][3]+F*l],0]));break}}return r.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),r.length||r.push([_,0]),r}function rr(t,e,r,i,o,n){var a=t[0],t=t[1],i=a[1]===He?e+a[0]*i*.01:a[1]===Ue?e+a[0]*n.computedStyle[Je]:a[1]===Xe?e+a[0]*n.width*.01:a[1]===Ve?e+a[0]*n.height*.01:a[1]===Ke?e+a[0]*Math.max(n.width,n.height)*.01:a[1]===ze?e+a[0]*Math.min(n.width,n.height)*.01:e+a[0],e=t[1]===He?r+t[0]*o*.01:t[1]===Ue?r+t[0]*n.computedStyle[Je]:t[1]===Xe?r+t[0]*n.width*.01:t[1]===Ve?r+t[0]*n.height*.01:t[1]===Ve?r+t[0]*Math.max(n.width,n.height)*.01:t[1]===Ve?r+t[0]*Math.min(n.width,n.height)*.01:r+t[0];return[i,e]}var ir={parseGradient:function(t){var e,r,i,o,n,a;if(t=L.gradient.exec(t))return"linear"===(e={k:t[1]}).k?(n=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(t[2]))?e.d=(n=n[0].toLowerCase(),a=180,"to top"===n?a=0:"to top right"===n?a=45:"to right"===n?a=90:"to bottom right"===n?a=135:"to bottom"===n||("to bottom left"===n?a=225:"to left"===n?a=270:"to top left"===n?a=315:(n=/([-+]?[\d.]+)deg/.exec(n))&&(a=parseFloat(n[1]))),a%360):(n=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(t[2]),e.d=n?[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4])]:180):"radial"===e.k?(e.s=-1<t[2].indexOf("circle")?"circle":"ellipse",(a=/(closest|farthest)-(side|corner)/i.exec(t[2]))?e.z=a[0].toLowerCase():(n=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(t[2]))?(e.z=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[4])],r=!Be(n[5]),o=!Be(n[6]),i=!Be(n[7]),r&&o&&i?(e.z.push(parseFloat(n[5])),e.z.push(parseFloat(n[6])),e.z.push(parseFloat(n[7]))):r&&o?(e.z.push(parseFloat(n[5])),e.z.push(parseFloat(n[6])),e.z.push(1)):r?(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(parseFloat(n[5]))):(e.z.push(e.z[0]),e.z.push(e.z[1]),e.z.push(1))):e.z="farthest-corner",(i=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(o=tr(i[1]),r=i[2]?tr(i[2]):o,e.p=[o,r]):e.p=[[50,He],[50,He]]):"conic"===e.k&&(i=/([-+]?[\d.]+deg)/i.exec(t[2]),e.d=i?parseFloat(i[0])%360:0,(o=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(t[2]))?(r=tr(o[1]),i=o[2]?tr(o[2]):r,e.p=[r,i]):e.p=[[50,He],[50,He]]),o=t[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[],e.v=o.map(function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),e=[Fe(e[0])],t=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);return t&&(t=je(t[0]),-1<[We,Ge].indexOf(t[1])&&(t[1]=Ye),e[1]=t),e}),e},getLinear:function(c,t,e,r,i,o,n,u,_){if(e+=a=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,r+=h=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,i+=a,o+=h,Array.isArray(t))var f=e+t[0]*n,d=r+t[1]*u,p=e+t[2]*n,g=r+t[3]*u,m=er(c,Math.sqrt(Math.pow(p-f,2)+Math.pow(g-d,2)));else{for(;360<=t;)t-=360;for(;t<0;)t+=360;var a=Math.max(n,u),i=(h=a,i=i,o=o,l=270<=(l=t)?(s=$e(360-l),v=i+Math.sin(s)*h,y=o+Math.cos(s)*h,x=i-Math.sin(s)*h,o-Math.cos(s)*h):180<=l?(s=$e(l-180),v=i+Math.sin(s)*h,y=o-Math.cos(s)*h,x=i-Math.sin(s)*h,o+Math.cos(s)*h):90<=l?(s=$e(180-l),v=i-Math.sin(s)*h,y=o-Math.cos(s)*h,x=i+Math.sin(s)*h,o+Math.cos(s)*h):(s=$e(l),v=i-Math.sin(s)*h,y=o+Math.cos(s)*h,x=i+Math.sin(s)*h,o-Math.cos(s)*h),[v,y,x,l]),o=(a*=2,B.dotProduct(e-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/a),s=B.dotProduct(e+n-i[0],r-i[1],i[2]-i[0],i[3]-i[1])/a,h=B.dotProduct(e+n-i[0],r+u-i[1],i[2]-i[0],i[3]-i[1])/a,v=B.dotProduct(e-i[0],r+u-i[1],i[2]-i[0],i[3]-i[1])/a,y=o,x=Math.min(o,Math.min(s,Math.min(h,v))),y=Math.max(y,Math.max(s,Math.max(h,v))),l=x/a,n=i[2]-i[0],e=i[3]-i[1];f=i[0]+n*l,d=i[1]+e*l,p=i[2]-n*l,g=i[3]-e*l,m=er(c,y-x,_)}return{x1:f,y1:d,x2:p,y2:g,stop:m}},getRadial:function(c,u,t,_,e,r,f,i,d){u=u,t=t,_=_,a=f-e,s=i-r,e=e,r=r,f=f,i=i,x=d,m=0,Array.isArray(t)?(h=e+t[0]*a,l=r+t[1]*s,p=e+t[4]*a,g=r+t[5]*s,t[6]<=0?v=Math.min(Math.abs(h-e),Math.min(Math.abs(l-r),Math.min(Math.abs(l-i),Math.min(Math.abs(h-i))))):(o=(n=Math.sqrt(Math.pow((t[2]-t[0])*a,2)+Math.pow((t[3]-t[1])*s,2)))*t[6],v=Math.max(n,o),n!==o&&(m=t[2]>=t[0]?t[3]>=t[1]?Math.asin((t[3]-t[1])*s/n):-Math.asin((t[1]-t[3])*s/n):t[3]>=t[1]?$e(180)-Math.asin((t[3]-t[1])*s/n):Math.asin((t[1]-t[3])*s/n)-$e(180)))):(p=h=(_=Zt(rr(_,e,r,a,s,x),2))[0],g=l=_[1],x=1,"closest-corner"===t&&"circle"===u?v=h<=e||f<=h||l<=r||i<=l?Math.min(Math.abs(h-e),Math.min(Math.abs(l-r),Math.min(Math.abs(l-i),Math.min(Math.abs(h-i))))):(n=h<e+.5*a?h-e:f-h,o=l<r+.5*s?l-r:i-l,Math.sqrt(Math.pow(n,2)+Math.pow(o,2))):"closest-side"===t||"closest-corner"===t?h<=e||f<=h||l<=r||i<=l?v=Math.min(Math.abs(h-e),Math.min(Math.abs(l-r),Math.min(Math.abs(l-i),Math.min(Math.abs(h-i))))):(_=1,n=h<e+.5*a?h-e:f-h,o=l<r+.5*s?l-r:i-l,v=Math.min(n,o),n*=_="closest-corner"===t?Math.sqrt(2):_,o*=_,v*=_):(n=h<=e?e-h+a:f<=h?h-f+a:h<e+.5*a?f-h:h-e,o=l<=r?r-l+s:i<=l?l-i+s:l<r+.5*s?i-l:l-r,v=Math.max(n,o),n*=x="farthest-side"!==t?Math.sqrt(2):x,o*=x,v*=x));var p,g,o,m,v,n,y,a=Zt(_=[h,l,v,n="circle"===u?o=v:n,o,p,g,m],8),f=a[0],e=a[1],s=a[2],i=a[3],r=a[4],t=a[5],x=a[6],h=a[7],l=1,u=1;return i===r&&!h||(y=[1,0,0,1,0,0],h&&(v=Math.sin(h),y=[n=Math.cos(h),v,0,0,-v,n,0,0,0,0,1,0,0,0,0,1]),i!==s&&(y=qt.multiply(y,[l=i/s,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])),r!==s&&(y=qt.multiply(y,[1,0,0,0,0,u=r/s,0,0,0,0,1,0,0,0,0,1]))),{cx:f,cy:e,tx:t,ty:x,r:s,stop:er(c,s,d),scx:l,scy:u,matrix:y,d:h}},getConic:function(t,e,r,i,o,n,a,s,h){var e=function(t,e,r,i,o,n,a){var s=o-r,h=n-i,e=Zt(rr(e,r,i,s,h,a),2),a=e[0],e=e[1];s=r+.5*s<=a?a-r:o-a;r=i+.5*h<=e?e-i:n-e;return o=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),[a,e,o,t]}(e,r,i,o,n,a,h),e=(r=Zt(e,4))[0],l=r[1],c=r[2];return{cx:e,cy:l,w:n-i,h:a-o,r:(c<<1)*s,deg:r[3],stop:er(t,1,h)}},renderConic:function(c,u,t,e,r,i,o,n,a,s,h,l,_){var f,d,a=(a=$t.calRadius(r,i,o,n,a,s,h,l))||[[r,i],[r+o,i],[r+o,i+n],[r,i+n],[r,i]];if(u===et.CANVAS||u===et.WEBGL){s=De.getCacheCanvas(o,n,"__$$CONIC_GRADIENT$$__"),h=s.ctx.getImageData(0,0,o,n);at.getConicGradientImage(e.cx-r,e.cy-i,e.w,e.h,e.stop,h.data),s.ctx.putImageData(h,0,0),t.save(),t.beginPath(),Ze(t,a),t.clip(),t.closePath(),t.drawImage(s.canvas,r,i),t.restore(),s.ctx.clearRect(0,0,o,n)}else if(u===et.SVG){if(_)return f={tagName:"symbol",props:[],children:[]},c.__config[Qe].push(f),e.forEach(function(t){f.children.push({type:"item",tagName:"path",props:[["d",qe(t[0])],["fill",t[1]]]})}),t.add(f);l={tagName:"clipPath",children:[{tagName:"path",props:[["d",qe(a)]]}]},c.__config[Qe].push(l),d=t.add(l),e.forEach(function(t){c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",qe(t[0])],["fill",t[1]],["clip-path","url(#"+d+")"]]})})}}},or={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit"},nr={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},ar=[],sr=[],hr=(Object.keys(or).forEach(function(t){sr.push(t);var e=or[t];ar.push({k:t,v:e})}),[]),lr=[],t=(Object.keys(nr).forEach(function(t){lr.push(t);var e=nr[t];hr.push({k:t,v:e})}),{fontFamily:"arial",fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:1,textStrokeOver:"none"}),cr=[],ur=(Object.keys(t).forEach(function(t){cr.push(t)}),{DOM:or,GEOM:nr,isValid:function(t){return or.hasOwnProperty(t)||nr.hasOwnProperty(t)},DOM_KEY_SET:sr,GEOM_KEY_SET:lr,DOM_ENTRY_SET:ar,GEOM_ENTRY_SET:hr,INHERIT:t,INHERIT_KEY_SET:cr}),_r=xt.isNil;function fr(t,e,r,i){_r(t.flexGrow)&&(t.flexGrow=e||0),_r(t.flexShrink)&&(t.flexShrink=r||0),_r(t.flexBasis)&&(t.flexBasis=i||0)}var dr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(i,t){var c,u,_,f,d,p,e,r,o,g,m,n,a,s,v=this,h=i[t];if("background"===t)Array.isArray(h)?(n=h.length,!_r(i.backgroundColor)||(a=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(h[n-1]))&&(i.backgroundColor=a[0],h=h.slice(0,n-1)),c=[],u=[],_=[],h.forEach(function(t){var e;_r(i.backgroundImage)&&((e=L.gradient.exec(t))?(c.push(e[0]),t=t.replace(e[0],"")):(e=L.img.exec(h))&&(c.push(e[0]),t=t.replace(e[0],""))),!_r(i.backgroundRepeat)||(e=/(no-?)?repeat(-?[xy])?/i.exec(t))&&u.push(e[0].toLowerCase()),!_r(i.backgroundPosition)||(e=t.match(L.position))&&_.push(e.join(" "))}),c.length&&(i.backgroundImage=c),u.length&&(i.backgroundRepeat=u),_.length&&(i.backgroundPosition=_,this.toFull(i,"backgroundPosition"))):(_r(i.backgroundImage)&&((a=L.gradient.exec(h))?(i.backgroundImage=a[0],h=h.replace(a[0],"")):(n=L.img.exec(h))&&(i.backgroundImage=n[0],h=h.replace(n[0],""))),!_r(i.backgroundRepeat)||(a=/(no-?)?repeat(-?[xy])?/i.exec(h))&&(i.backgroundRepeat=a[0].toLowerCase()),!_r(i.backgroundColor)||(n=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(h))&&(i.backgroundColor=n[0],h=h.replace(n[0],"")),!_r(i.backgroundPosition)||(a=h.match(L.position))&&(i.backgroundPosition=a.join(" "),this.toFull(i,"backgroundPosition")));else if("flex"===t)"none"===h?fr(i,0,0,"auto"):"auto"===h?fr(i,1,1,"auto"):/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(h)?(n=h.split(/\s+/),fr(i,parseFloat(n[0]),parseFloat(n[1]),n[2])):/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(h)?(a=h.split(/\s+/),fr(i,parseFloat(a[0]),parseFloat(a[1]),a[2])):/^[\d.]+\s+[\d.]+$/.test(h)?(n=h.split(/\s+/),fr(i,parseFloat(n[0]),parseFloat(n[1]),0)):/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(h)?(a=h.split(/\s+/),fr(i,parseFloat(a[0]),1,a[1])):/^[\d.]+$/.test(h)?fr(i,parseFloat(h),1,0):/^[\d.]+[pxremvwhina%]+/i.test(h)?fr(i,1,1,h):fr(i,0,1,"auto");else if("flexFlow"===t)(h=h.toString().split(/\s+/)).length&&(_r(i.flexDirection),i.flexDirection=h[0],1<h.length&&(i.flexWrap=h[1]));else if("borderRadius"===t){1===(h=h.toString().split("/")).length&&(h[1]=h[0]);for(var y=0;y<2;y++){var l=h[y].toString().split(/\s+/);0===l.length?h[y]=[0,0,0,0]:1===l.length?h[y]=[l[0],l[0],l[0],l[0]]:2===l.length?h[y]=[l[0],l[1],l[0],l[1]]:3===l.length?h[y]=[l[0],l[1],l[2],l[1]]:h[y]=l.slice(0,4)}this[t].forEach(function(t,e){_r(i[t])&&(i[t]=h[0][e]+" "+h[1][e])})}else"backgroundPosition"===t?(Array.isArray(h)||(h=[h]),f=this[t].map(function(t){return _r(i[t])}),h.forEach(function(r){1===(r=r.toString().split(/\s+/)).length&&(r[1]="50%"),v[t].forEach(function(t,e){f[e]&&(i[t]=i[t]||[],i[t].push(r[e]))})})):-1<["translate","scale","skew"].indexOf(t)?(1===(d=h.toString().split(/\s*,\s*/)).length&&(d[1]=d[0]),this[t].forEach(function(t,e){_r(i[t])&&(i[t]=d[e])})):-1<["translate3d","scale3d"].indexOf(t)?(1===(p=h.toString().split(/\s*,\s*/)).length?p[2]=p[1]=p[0]:2===p.length&&(p[2]="scale3d"===t?1:0),this[t].forEach(function(t,e){_r(i[t])&&(i[t]=p[e])})):"margin"===t||"padding"===t?(m=i,a=this[n=t],n=m[n],_r(n)||(s=n.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi))&&(1===s.length?s[3]=s[2]=s[1]=s[0]:2===s.length?(s[2]=s[0],s[3]=s[1]):3===s.length&&(s[3]=s[1]),a.forEach(function(t,e){_r(m[t])&&(m[t]=s[e])}))):/^border((Top)|(Right)|(Bottom)|(Left))$/.test(t)?(g=(e=i)[r=t],_r(g)||(_r(e[r+"Width"])&&(o=/\b[\d.]+[pxremvwhina%]*\b/i.exec(g),e[r+"Width"]=o?o[0]:0),_r(e[r+"Style"])&&(o=/\b(solid|dashed|dotted)\b/i.exec(g),e[r+"Style"]=o?o[1]:"solid"),_r(e[r+"Color"])&&((o=/#[0-9a-f]{3,8}/i.exec(g))&&-1<[4,7,9].indexOf(o[0].length)?e[r+"Color"]=o[0]:/\btransparent\b/i.test(g)?e[r+"Color"]="transparent":(o=/rgba?\s*\(.+\)/i.exec(g),e[r+"Color"]=o?o[0]:"transparent")))):"textStroke"===t?((g=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(h))&&(i.textStrokeWidth=g[1]),(e=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(h))&&(i.textStrokeColor=e[0]),/\bfill\b/i.test(h)?i.textStrokeOver="fill":i.textStrokeOver="none"):this[t]&&this[t].forEach(function(t){_r(i[t])&&(i[t]=h)});return i}},e=A.STYLE_KEY,re=[[e.BACKGROUND_COLOR],[e.BORDER_BOTTOM_COLOR],[e.BORDER_LEFT_COLOR],[e.BORDER_RIGHT_COLOR],[e.BORDER_TOP_COLOR],[e.COLOR],[e.TEXT_STROKE_COLOR]],i=[[e.FONT_SIZE],[e.BORDER_BOTTOM_WIDTH],[e.BORDER_LEFT_WIDTH],[e.BORDER_RIGHT_WIDTH],[e.BORDER_TOP_WIDTH],[e.LEFT],[e.TOP],[e.RIGHT],[e.BOTTOM],[e.FLEX_BASIS],[e.WIDTH],[e.HEIGHT],[e.LINE_HEIGHT],[e.MARGIN_BOTTOM],[e.MARGIN_LEFT],[e.MARGIN_TOP],[e.MARGIN_RIGHT],[e.PADDING_TOP],[e.PADDING_RIGHT],[e.PADDING_BOTTOM],[e.PADDING_LEFT],[e.STROKE_WIDTH],[e.STROKE_MITERLIMIT],[e.LETTER_SPACING],[e.PERSPECTIVE],[e.TEXT_STROKE_WIDTH]],t=[[e.BACKGROUND_IMAGE],[e.FILL],[e.STROKE]],o=[[e.BORDER_TOP_LEFT_RADIUS],[e.BORDER_TOP_RIGHT_RADIUS],[e.BORDER_BOTTOM_RIGHT_RADIUS],[e.BORDER_BOTTOM_LEFT_RADIUS]],pr={},gr=(re.forEach(function(t){pr[t]=!0}),{}),mr=(i.forEach(function(t){gr[t]=!0}),{}),vr=(o.forEach(function(t){mr[t]=!0}),{}),e=(t.forEach(function(t){vr[t]=!0}),[[e.TRANSLATE_X],[e.TRANSLATE_Y],[e.TRANSLATE_Z],[e.SKEW_X],[e.SKEW_Y],[e.SCALE_X],[e.SCALE_Y],[e.SCALE_Z],[e.ROTATE_X],[e.ROTATE_Y],[e.ROTATE_Z]]),yr={},re=(e.forEach(function(t){yr[t]=!0}),{KEY_COLOR:re,KEY_EXPAND:e,KEY_GRADIENT:t,KEY_LENGTH:i,KEY_RADIUS:o,COLOR_HASH:pr,EXPAND_HASH:yr,GRADIENT_HASH:vr,LENGTH_HASH:gr,RADIUS_HASH:mr,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}}),xr=ur.DOM,Er=ur.GEOM,br=r.INHERIT,e=A.STYLE_KEY,Mr={},Tr=[],Ar=n({},e.POINTER_EVENTS,!0),Rr=(n(t={},e.TRANSFORM,!0),n(t,e.TRANSLATE_X,!0),n(t,e.TRANSLATE_Y,!0),n(t,e.SKEW_X,!0),n(t,e.SKEW_Y,!0),n(t,e.SCALE_X,!0),n(t,e.SCALE_Y,!0),n(t,e.ROTATE_Z,!0),n(t,e.COLOR,!0),n(t,e.FONT_STYLE,!0),n(t,e.STROKE_WIDTH,!0),n(t,e.FILL,!0),n(t,e.STROKE_DASHARRAY,!0),n(t,e.STROKE_LINECAP,!0),n(t,e.STROKE_LINEJOIN,!0),n(t,e.STROKE_MITERLIMIT,!0),n(t,e.BACKGROUND_COLOR,!0),n(t,e.BACKGROUND_IMAGE,!0),n(t,e.BACKGROUND_POSITION_X,!0),n(t,e.BACKGROUND_POSITION_Y,!0),n(t,e.BACKGROUND_REPEAT,!0),n(t,e.BACKGROUND_SIZE,!0),n(t,e.STROKE,!0),n(t,e.BORDER_BOTTOM_COLOR,!0),n(t,e.BORDER_LEFT_COLOR,!0),n(t,e.BORDER_RIGHT_COLOR,!0),n(t,e.BORDER_TOP_COLOR,!0),n(t,e.BORDER_TOP_LEFT_RADIUS,!0),n(t,e.BORDER_TOP_RIGHT_RADIUS,!0),n(t,e.BORDER_BOTTOM_RIGHT_RADIUS,!0),n(t,e.BORDER_BOTTOM_LEFT_RADIUS,!0),n(t,e.VISIBILITY,!0),n(t,e.OPACITY,!0),n(t,e.Z_INDEX,!0),n(t,e.FILTER,!0),n(t,e.BOX_SHADOW,!0),n(t,e.OVERFLOW,!0),n(t,e.BACKGROUND_CLIP,!0),n(t,e.TEXT_STROKE_WIDTH,!0),n(t,e.TEXT_STROKE_COLOR,!0),n(t,e.TEXT_STROKE_OVER,!0),t),Or=(n(i={},e.FONT_SIZE,!0),n(i,e.FONT_WEIGHT,!0),n(i,e.FONT_FAMILY,!0),i),wr={GEOM:Mr,GEOM_KEY_SET:Tr,IGNORE:Ar,REPAINT:Rr,MEASURE:Or,addGeom:function(e,t,r){Array.isArray(t)?t.forEach(function(t){wr.addGeom(e,t,r)}):t&&(Mr.hasOwnProperty(t)||Tr.push(t),(Mr[t]=Mr[t]||{})[e]=r||!0)},isIgnore:function(t){return Ar.hasOwnProperty(t)},isGeom:function(t,e){return t&&e&&Mr.hasOwnProperty(e)&&Mr[e].hasOwnProperty(t)},isRepaint:function(t,e){return Rr.hasOwnProperty(t)||wr.isGeom(e,t)},isMeasure:function(t){return Or.hasOwnProperty(t)},isValid:function(t,e){return!!e&&(!!xr.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Er.hasOwnProperty(e))||(Mr.hasOwnProperty(e)?Mr[e].hasOwnProperty(t):"translatePath"===e)))}},Sr=wr.MEASURE_KEY_SET=Object.keys(Or).map(function(t){return parseInt(t)}),Ir=Sr.length,Cr=(wr.isMeasureInherit=function(t){if(t)for(var e=0;e<Ir;e++){var r=Sr[e];if(t.hasOwnProperty(r)&&t[r][1]===br)return!0}return!1},wr.measureInheritList=function(t){for(var e=[],r=0;r<Ir;r++){var i=Sr[r];t.hasOwnProperty(i)&&t[i][1]===br&&e.push(i)}return e},wr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),wr.addGeom("$circle",["r"]),wr.addGeom("$ellipse",["rx","ry"]),wr.addGeom("$rect",["rx","ry"]),wr.addGeom("$sector",["begin","end","edge","closure"]),wr.addGeom("$polyline",["points","controls","start","end"]),wr.addGeom("$polygon",["points","controls","start","end","booleanOperations"]),A.STYLE_KEY),kr=A.STYLE_RV_KEY,Lr=A.style2Upper,o=A.STYLE_KEY,Dr=o.POSITION,Nr=o.WIDTH,Pr=o.HEIGHT,Fr=o.TRANSLATE_X,Br=o.TRANSLATE_Y,Yr=o.TRANSLATE_Z,Hr=o.SCALE_X,Gr=o.SCALE_Y,Wr=o.SCALE_Z,t=o.SKEW_X,e=o.SKEW_Y,i=o.ROTATE_X,Ur=o.ROTATE_Y,a=o.ROTATE_Z,Xr=o.ROTATE_3D,Vr=o.PERSPECTIVE,Kr=o.PERSPECTIVE_ORIGIN,zr=o.TRANSFORM,jr=o.TRANSFORM_ORIGIN,$r=o.BACKGROUND_IMAGE,Zr=o.BACKGROUND_COLOR,qr=o.BACKGROUND_POSITION_X,Jr=o.BACKGROUND_POSITION_Y,Qr=o.BACKGROUND_SIZE,ti=o.OPACITY,ei=o.Z_INDEX,ri=o.COLOR,ii=o.FONT_SIZE,oi=o.FONT_FAMILY,ni=o.FONT_WEIGHT,ai=o.FONT_STYLE,si=o.LINE_HEIGHT,hi=o.TEXT_ALIGN,li=o.FILTER,ci=o.VISIBILITY,ui=o.BOX_SHADOW,_i=o.POINTER_EVENTS,fi=o.FILL,di=o.STROKE,pi=o.STROKE_WIDTH,gi=o.STROKE_DASHARRAY,mi=o.BORDER_TOP_WIDTH,vi=o.BORDER_RIGHT_WIDTH,yi=o.BORDER_BOTTOM_WIDTH,xi=o.BORDER_LEFT_WIDTH,Ei=o.DISPLAY,bi=o.FLEX_DIRECTION,Mi=o.FLEX_GROW,Ti=o.FLEX_SHRINK,Ai=o.FLEX_BASIS,Ri=o.JUSTIFY_CONTENT,Oi=o.ALIGN_SELF,wi=o.ALIGN_ITEMS,Si=o.MATRIX,Ii=o.LETTER_SPACING,s=o.BACKGROUND_CLIP,Ci=o.WHITE_SPACE,ki=o.TEXT_OVERFLOW,Li=o.LINE_CLAMP,Di=o.ORDER,Ni=o.FLEX_WRAP,Pi=o.ALIGN_CONTENT,Fi=o.TRANSLATE_PATH,Bi=o.TEXT_STROKE_COLOR,Yi=o.TEXT_STROKE_WIDTH,Hi=o.TEXT_STROKE_OVER,Gi=r.AUTO,Wi=r.PX,Ui=r.PERCENT,Xi=r.NUMBER,Vi=r.INHERIT,Ki=r.DEG,zi=r.RGBA,ji=r.STRING,$i=r.REM,Zi=r.VW,qi=r.VH,Ji=r.VMAX,Qi=r.VMIN,to=r.calUnit,eo=xt.isNil,ro=xt.rgba2int,io=xt.equalArr,oo=wr.MEASURE_KEY_SET,no=wr.isGeom,ao=wr.GEOM,so=wr.GEOM_KEY_SET,ho=re.COLOR_HASH,lo=re.LENGTH_HASH,co=re.RADIUS_HASH,uo=re.GRADIENT_HASH,_o=re.EXPAND_HASH,fo=re.GRADIENT_TYPE,po={translateX:Fr,translateY:Br,translateZ:Yr,scaleX:Hr,scaleY:Gr,scaleZ:Wr,skewX:t,skewY:e,rotateX:i,rotateY:Ur,rotateZ:a,rotate:a};function go(t,e){t===Hr||t===Gr||t===Wr?e[1]=Xi:t===Fr||t===Br||t===Yr?e[1]===Xi&&(e[1]=Wi):t===Vr?-1<[Xi,Ui,Ki].indexOf(e[1])&&(e[1]=Wi):e[1]===Xi&&(e[1]=Ki)}function mo(t){for(var e=t.split(","),r="arial",i=0,o=e.length;i<o;i++)if(vt.support(e[i])){r=e[i];break}return r}function vo(t){var e=mo(t[oi]);return t[ii]*(vt.info[e]||vt.info.arial).lhr}function yo(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Gi){if(r!==Nr)break;e=e.domParent}else{if(i[1]===Wi)return t*i[0];if(i[1]===Ui)t*=.01*i[0],e=e.domParent;else{if(i[1]===$i)return t*i[0]*e.root.computedStyle[ii];if(i[1]===Zi)return t*i[0]*e.root.width*.01;if(i[1]===qi)return t*i[0]*e.root.height*.01;if(i[1]===Ji)return t*i[0]*Math.max(e.root.width,e.root.height)*.01;if(i[1]===Qi)return t*i[0]*Math.min(e.root.width,e.root.height)*.01}}}return t}n(o={},Dr,!0),n(o,Ei,!0),n(o,Cr.BACKGROUND_REPEAT,!0),n(o,bi,!0),n(o,Mi,!0),n(o,Ti,!0),n(o,Ni,!0),n(o,Ri,!0),n(o,wi,!0),n(o,Oi,!0),n(o,Cr.OVERFLOW,!0),n(o,Cr.MIX_BLEND_MODE,!0),n(o,Cr.STROKE_LINECAP,!0),n(o,Cr.STROKE_LINEJOIN,!0),n(o,Cr.STROKE_MITERLIMIT,!0),n(o,Cr.FILL_RULE,!0),n(o,ti,!0),n(o,ei,!0),n(o,s,!0),n(o,ki,!0),n(o,Li,!0);var xo=o,Eo=(n(t={},ri,!0),n(t,Bi,!0),n(t,Zr,!0),n(t,Cr.BORDER_TOP_COLOR,!0),n(t,Cr.BORDER_RIGHT_COLOR,!0),n(t,Cr.BORDER_BOTTOM_COLOR,!0),n(t,Cr.BORDER_LEFT_COLOR,!0),t),bo=(n(e={},Cr.BORDER_TOP_LEFT_RADIUS,!0),n(e,Cr.BORDER_TOP_RIGHT_RADIUS,!0),n(e,Cr.BORDER_BOTTOM_RIGHT_RADIUS,!0),n(e,Cr.BORDER_BOTTOM_LEFT_RADIUS,!0),n(e,jr,!0),n(e,Kr,!0),e);var Mo={normalize:function(a){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(!xt.isObject(a))return{};var h,e,r,i,n,o,s={},l=(a=xt.extend({},a)).border;return l&&dr.toFull(a,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach(function(t){dr.toFull(a,t)}),(l=a.borderWidth)&&dr.toFull(a,"borderWidth"),(l=a.borderColor)&&dr.toFull(a,"borderColor"),(l=a.borderStyle)&&dr.toFull(a,"borderStyle"),(l=a.borderRadius)&&dr.toFull(a,"borderRadius"),(l=a.background)&&dr.toFull(a,"background"),l=a.backgroundPosition,eo(l)||dr.toFull(a,"backgroundPosition"),(l=a.flex)&&dr.toFull(a,"flex"),(l=a.flexFlow)&&dr.toFull(a,"flexFlow"),l=a.margin,eo(l)||dr.toFull(a,"margin"),l=a.padding,eo(l)||dr.toFull(a,"padding"),(l=a.textStroke)&&dr.toFull(a,"textStroke"),(l=a.rotate3d)&&dr.toFull(a,"rotate3d"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach(function(t){l=a[t],eo(l)||dr.toFull(a,t)}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach(function(t){void 0!==a[t]&&a.transform&&De.warn('Can not use expand style "'.concat(t,'" with transform'))}),t.forEach(function(t){var e=t.k,t=t.v;eo(a[e])&&(a[e]=t)}),void 0!==(l=a.backgroundImage)&&(l?Array.isArray(l)?s[$r]=l.map(function(t){return t?L.gradient.test(t)?ir.parseGradient(t):L.img.test(t)?L.img.exec(t)[2]:null:null}):L.gradient.test(l)?s[$r]=[ir.parseGradient(l)]:L.img.test(l)?s[$r]=[L.img.exec(l)[2]]:s[$r]=[null]:s[$r]=[null]),void 0!==(l=a.backgroundColor)&&(l=l||"transparent",(t=/^#[0-9a-f]{3,8}/i.exec(l))&&-1<[4,7,9].indexOf(t[0].length)?s[Zr]=[ro(t[0]),zi]:(t=/rgba?\s*\(.+\)/i.exec(l),s[Zr]=[ro(t?t[0]:[0,0,0,0]),zi])),["backgroundPositionX","backgroundPositionY"].forEach(function(t,e){void 0!==(l=a[t])&&(l=l||0,t=e?Jr:qr,Array.isArray(l)||(l=[l]),s[t]=l.map(function(t){var e;return/^[-+]?[\d.]/.test(t)?(e=to(t),-1<[Xi,Ki].indexOf(e[1])&&(e[1]=Wi),e):[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,Ui]}))}),void 0!==(l=a.backgroundSize)&&(Array.isArray(l)||(l=[l]),s[Qr]=l.map(function(t){if(!t)return[[0,Gi],[0,Gi]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0]||"cover"===e[0]?e[1]=e[0]:e[1]="auto");for(var r=[],i=0;i<2;i++){var o,n=e[i];/^[-+]?[\d.]/.test(n)?(o=to(n),-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),r.push(o)):"contain"===n||"cover"===n?r.push([n,ji]):r.push([0,Gi])}return r}return[[0,Gi],[0,Gi]]})),["Top","Right","Bottom","Left"].forEach(function(t){var e=a[t="border"+t+"Color"];void 0!==e&&(s[Cr[Lr(t)]]=[ro(e||"transparent"),zi])}),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach(function(t){if(void 0!==(e=a[t="border"+t+"Radius"])){var e,r=(e=e||0).toString().split(/\s+/);1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var o=r[i];/^[-+]?[\d.]/.test(o)?(o=to(o),-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),o[0]<0&&(o[0]=0),r[i]=o):r[i]=[0,Wi]}s[Cr[Lr(t)]]=r}}),null===(l=a.transform)?s[zr]=null:void 0!==l&&(h=s[zr]=[],(t=(l||"").toString().match(/\w+\(.+?\)/g))&&t.forEach(function(t){var e,r,i,o,n,a=t.indexOf("("),s=t.slice(0,a),a=t.slice(a+1,t.length-1);"matrix"===s?6===(t=6<(t=(t=a.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,6):t).length&&h.push([Si,[t[0],t[1],0,0,t[2],t[3],0,0,0,0,1,0,t[4],t[5],0,1]]):"matrix3d"===s?16===(t=16<(t=(t=a.toString().split(/\s*,\s*/)).map(function(t){return parseFloat(t)})).length?t.slice(0,16):t).length&&h.push([Si,t]):"perspective"===s?((t=to(a))[0]<0&&(t[0]=0),go(Vr,t),h.push([Vr,t])):"rotate3d"===s?4===(t=a.toString().split(/\s*,\s*/)).length&&(n=to(t[3]),go(Xr,n),t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=n,h.push([Xr,t])):po.hasOwnProperty(s)?(go(n=po[s],t=to(a)),h.push([n,t])):!{translate:!0,scale:!0,skew:!0}.hasOwnProperty(s)?{translate3d:!0,scale3d:!0}.hasOwnProperty(s)&&(1===(n=a.toString().split(/\s*,\s*/)).length?(n[1]="scale3d"===s?[1]:[0],n[2]="scale3d"===s?[1]:[0]):2===n.length&&(n[2]="scale3d"===s?[1]:[0]),3===n.length&&(t=Cr[Lr(s+"X")],e=Cr[Lr(s+"Y")],r=Cr[Lr(s+"Z")],i=to(n[0]),o=to(n[1]),n=to(n[2]),go(t,i),go(e,o),go(r,n),h.push([t,i]),h.push([e,o]),h.push([r,n]))):(1===(t=a.toString().split(/\s*,\s*/)).length&&(t[1]="scale"===s?t[0]:[0]),2===t.length&&(i=Cr[Lr(s+"X")],e=Cr[Lr(s+"Y")],o=to(t[0]),r=to(t[1]),go(i,o),go(e,r),h.push([i,o]),h.push([e,r])))})),void 0!==(l=a.perspective)&&((t=to(l||0))[0]<0&&(t[0]=0),go(Vr,t),s[Vr]=t),["perspectiveOrigin","transformOrigin"].forEach(function(t){if(void 0!==(l=a[t])){null===l&&(l="");var e=s[Cr[Lr(t)]]=[],r=l.toString().match(L.position);if(r){1===r.length&&(r[1]=r[0]);for(var i=0;i<2;i++){var o,n=r[i];/^[-+]?[\d.]/.test(n)?(o=to(n),-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),e.push(o)):(e.push([{top:0,left:0,center:50,right:100,bottom:100}[n],Ui]),eo(e[i][0])&&(e[i][0]=50))}}else e.push([50,Ui]),e.push([50,Ui])}}),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach(function(t){var e=a[t];void 0!==e&&(null===e&&(e=0===t.indexOf("scale")?1:0),go(t=po[t],e=to(e)),s[t]=e)}),void 0!==(l=a.rotate3d)&&(4===(t=(l||"").toString().split(/\s*,\s*/)).length&&(r=to(t[3]),go(Xr,r),t[0]=parseFloat(t[0]),t[1]=parseFloat(t[1]),t[2]=parseFloat(t[2]),t[3]=r),s[Xr]=t),void 0!==(l=a.opacity)&&(null===l&&(l=1),l=parseFloat(l),isNaN(l)?s[ti]=1:(l=Math.max(l,0),l=Math.min(l,1),s[ti]=l)),void 0!==(l=a.zIndex)&&(s[ei]=parseInt(l)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach(function(t){var e,r=a[t];void 0!==r&&("auto"===r?r=[0,Gi]:(r=to(r||0),-1<[Xi,Ki].indexOf(r[1])&&(r[1]=Wi)),e=Cr[Lr(t)],s[e]=r,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(t)&&r[0]<0&&(r[0]=0))}),void 0!==(l=a.flexBasis)&&("content"===l?s[Ai]=[l,ji]:/^[\d.]/.test(l)?((r=s[Ai]=to(l))[0]=Math.max(r[0],0),-1<[Xi,Ki].indexOf(r[1])&&(r[1]=Wi)):s[Ai]=[0,Gi]),void 0!==(l=a.order)&&(s[Di]=parseInt(l)||0),void 0!==(l=a.color)&&(s[ri]="inherit"===l?[[],Vi]:[ro(l),zi]),void 0!==(l=a.textStrokeColor)&&(s[Bi]="inherit"===l?[[],Vi]:[ro(l),zi]),void 0!==(l=a.fontSize)&&("inherit"===l||(o=to(l))<0?s[ii]=[0,Vi]:(-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),s[ii]=o)),void 0!==(l=a.textStrokeWidth)&&("inherit"===l||(e=to(l))<0?s[Yi]=[0,Vi]:(-1<[Xi,Ki,Ui].indexOf(e[1])&&(e[1]=Wi),s[Yi]=e)),void 0!==(l=a.textStrokeOver)&&(null===l||"inherit"===l?s[Hi]=[0,Vi]:(t=l.toString(),s[Hi]=[t="none"!==t&&"fill"!==t?"none":t,ji])),void 0!==(l=a.fontWeight)&&(s[ni]="bold"===l?[700,Xi]:"normal"===l?[400,Xi]:"lighter"===l?[200,Xi]:"inherit"===l?[0,Vi]:[Math.max(0,parseInt(l))||400,Xi]),void 0!==(l=a.fontStyle)&&(s[ai]=null===l||"inherit"===l?[0,Vi]:[l,ji]),void 0!==(l=a.fontFamily)&&(s[oi]=null===l||"inherit"===l?[0,Vi]:[l.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),ji]),void 0!==(l=a.textAlign)&&(s[hi]=null===l||"inherit"===l?[0,Vi]:[l,ji]),void 0!==(l=a.lineHeight)&&("inherit"===l?s[si]=[0,Vi]:"normal"===l?s[si]=[0,Gi]:/^[\d.]+/i.test(l)?(r=to(l),-1<[Ki].indexOf(r[1])&&(r[1]=Xi),s[si]=r):(o=Math.max(0,parseFloat(l))||"normal",s[si]="normal"===o?[null,Gi]:[o,Xi])),void 0!==(l=a.letterSpacing)&&(null===l||"inherit"===l?s[Ii]=[0,Vi]:"normal"===l?s[Ii]=[0,Wi]:/^[-+]?[\d.]/.test(l)?(e=to(l),-1<[Xi,Ki].indexOf(e[1])&&(e[1]=Wi),s[Ii]=e):s[Ii]=[parseFloat(l)||0,Wi]),void 0!==(l=a.whiteSpace)&&(s[Ci]=null===l||"inherit"===l?[0,Vi]:[l,ji]),void 0!==(l=a.lineClamp)&&(l=parseInt(l)||0,s[Li]=Math.max(0,l)),void 0!==(l=a.fill)&&(l?Array.isArray(l)?l.length?s[fi]=l.map(function(t){return t?L.gradient.test(t)?ir.parseGradient(t):ro(t):"none"}):s[fi]=["none"]:L.gradient.test(l)?s[fi]=[ir.parseGradient(l)]:s[fi]=[ro(l)]:s[fi]=["none"]),void 0!==(l=a.stroke)&&(l?Array.isArray(l)?l.length?s[di]=l.map(function(t){return t?L.gradient.test(t)?ir.parseGradient(t):ro(t):"none"}):s[di]=["none"]:L.gradient.test(l)?s[di]=[ir.parseGradient(l)]:s[di]=[ro(l)]:s[di]=["none"]),void 0!==(l=a.strokeWidth)&&(Array.isArray(l)||(l=[l]),s[pi]=l.map(function(t){t=to(t);return-1<[Xi,Ki].indexOf(t[1])&&(t[1]=Wi),t[0]=Math.max(t[0],0),t})),void 0!==(l=a.strokeDasharray)&&(Array.isArray(l)?s[gi]=l.map(function(t){t=(t||"").toString().match(/[\d.]+/g);return t?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),t):[]}):(t=(l||"").toString().match(/[\d.]+/g))?((t=t.map(function(t){return parseFloat(t)})).length%2==1&&t.push(t[t.length-1]),s[gi]=[t]):s[gi]=[[]]),void 0!==(l=a.filter)&&(r=(l||"").toString().match(/\b[\w-]+\s*\(\s*[-+]?[\d.]+\s*[pxremvwhdg%]*\s*\)\s*/gi),i=null,r&&(i=[],r.forEach(function(t){var e,t=/([\w-]+)\s*\(\s*([-+]?[\d.]+\s*[pxremvwhdg%]*)\s*\)\s*/i.exec(t);t&&(e=t[1].toLowerCase(),t=to(t[2]),"blur"===e?t[0]<=0||-1<[Ki,Ui].indexOf(t[1])||(t[1]===Xi&&(t[1]=Wi),i.push([e,t])):"hue-rotate"===e?-1!==[Xi,Ki].indexOf(t[1])&&(t[1]=Ki,i.push([e,t])):"saturate"!==e&&"brightness"!==e&&"grayscale"!==e&&"contrast"!==e&&"sepia"!==e&&"invert"!==e||-1!==[Xi,Ui].indexOf(t[1])&&(t[0]=Math.max(t[0],0),t[1]=Ui,i.push([e,t])))})),s[li]=i),void 0!==(l=a.visibility)&&(s[ci]=null===l||"inherit"===l?[0,Vi]:[l,ji]),void 0!==(l=a.pointerEvents)&&(s[_i]=null===l||"inherit"===l?[0,Vi]:[l,ji]),void 0!==(l=a.boxShadow)&&(n=null,(o=(l||"").match(/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?(((transparent)|(#[0-9a-f]{3,8})|(rgba?\(.+?\)))\s*)?(inset|outset)?\s*,?/gi))&&o.forEach(function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?(?:((?:transparent)|(?:#[0-9a-f]{3,8})|(?:rgba?\(.+\)))\s*)?(inset|outset)?/i.exec(t);if(e){n=n||[];for(var r=[],i=0;i<4;i++){var o=to(e[i+1]);-1<[Xi,Ki].indexOf(o[1])&&(o[1]=Wi),1<i&&o[0]<0&&(o=0),r.push(o)}r.push(ro(e[5])),r.push(e[6]||"outset"),n.push(r)}}),s[ui]=n),["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach(function(t){a.hasOwnProperty(t)&&(s[Cr[Lr(t)]]=a[t])}),["flexGrow","flexShrink"].forEach(function(t){a.hasOwnProperty(t)&&(s[Cr[Lr(t)]]=Math.max(parseFloat(a[t])||0,0))}),void 0!==(l=a.zIndex)&&(s[ei]=parseFloat(l)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach(function(t){var e;a.hasOwnProperty(t)&&(e=a[t],s[Cr[Lr(t)]]=Array.isArray(e)?e:[e])}),so.forEach(function(t){a.hasOwnProperty(t)&&(s[t]=a[t])}),s},computeMeasure:function(r,i){var o=r.currentStyle,n=r.computedStyle,t=r.domParent,a=!i&&t.computedStyle;oo.forEach(function(t){var e=o[t];t===oi?e[1]===Vi?n[t]=mo(i?ur.INHERIT[kr[t]]:a[t]):n[t]=mo(e[0]):e[1]===Vi?n[t]=i?ur.INHERIT[kr[t]]:a[t]:e[1]===Ui?n[t]=i?ur.INHERIT[kr[t]]:a[t]*e[0]*.01:e[1]===$i?n[t]=i?ur.INHERIT[kr[t]]:r.root.computedStyle[ii]*e[0]:e[1]===Zi?n[t]=i?ur.INHERIT[kr[t]]:.01*r.root.width*e[0]:e[1]===qi?n[t]=i?ur.INHERIT[kr[t]]:.01*r.root.height*e[0]:e[1]===Ji?n[t]=i?ur.INHERIT[kr[t]]:.01*Math.max(r.root.width,r.root.height)*e[0]:e[1]===Qi?n[t]=i?ur.INHERIT[kr[t]]:.01*Math.min(r.root.width,r.root.height)*e[0]:n[t]=e[0]})},computeReflow:function(t,c){var r=t.currentStyle,i=t.computedStyle,e=t.domParent,o=t.root,u=o.computedStyle[ii],t=!e,n=e&&e.computedStyle;[mi,vi,yi,xi].forEach(function(t){var e=r[t];e[1]===Wi?i[t]=e[0]:e[1]===$i?i[t]=e[0]*u:e[1]===Zi?i[t]=e[0]*o.width*.01:e[1]===qi?i[t]=e[0]*o.height*.01:e[1]===Ji?i[t]=e[0]*Math.max(o.width,o.height)*.01:e[1]===Qi?i[t]=e[0]*Math.min(o.width,o.height)*.01:i[t]=0}),[Dr,Ei,bi,Ri,wi,Oi,Mi,Ti,Li,Di,Ni,Pi].forEach(function(t){i[t]=r[t]});(a=r[hi])[1]===Vi?i[hi]=t?"left":n[hi]:i[hi]=a[0];var a=i[ii],s=r[si];if(s[1]===Vi)if(t)i[si]=vo(i);else{for(var h,l=e;l&&(h=l.currentStyle[si])[1]===Vi;)l=l.domParent;-1<[Gi,Vi].indexOf(h[1])?i[si]=vo(i):h[1]===Xi?i[si]=Math.max(h[0],0)*a:i[si]=n[si]}else s[1]===Wi?i[si]=Math.max(s[0],0)||vo(i):s[1]===Ui?i[si]=Math.max(s[0]*a*.01,0)||vo(i):s[1]===$i?i[si]=Math.max(s[0]*u,0)||vo(i):s[1]===Zi?i[si]=Math.max(s[0]*o.width*.01,0)||vo(i):s[1]===qi?i[si]=Math.max(s[0]*o.height*.01,0)||vo(i):s[1]===Ji?i[si]=Math.max(s[0]*Math.max(o.width,o.height)*.01,0)||vo(i):s[1]===Qi?i[si]=Math.max(s[0]*Math.min(o.width,o.height)*.01,0)||vo(i):s[1]===Xi?i[si]=Math.max(s[0],0)*a||vo(i):i[si]=vo(i);(e=r[Ii])[1]===Vi?i[Ii]=t?0:n[Ii]:e[1]===Ui?i[Ii]=.01*a*e[0]:e[1]===$i?i[Ii]=u*e[0]:e[1]===Zi?i[Ii]=.01*o.width*e[0]:e[1]===qi?i[Ii]=.01*o.height*e[0]:e[1]===Ji?i[Ii]=.01*Math.max(o.width,o.height)*e[0]:e[1]===Qi?i[Ii]=.01*Math.min(o.width,o.height)*e[0]:i[Ii]=e[0],(s=r[Ci])[1]===Vi?i[Ci]=t?"normal":n[Ci]:i[Ci]=s[0]},setFontStyle:function(t){var e=t[ii]||0,r=t[oi]||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t[ai]||"normal")+" "+(t[ni]||"400")+" "+e+"px/"+e+"px "+r},getFontFamily:mo,getBaseLine:function(t){var e=t[ii],r=mo(t[oi]),i=e*(vt.info[r]||vt.info.arial).lhr;return.5*(t[si]-i)+e*(vt.info[r]||vt.info.arial).blr},calRelative:function(t,e,r,i,o){return r[1]===Gi?r=0:-1<[Wi,Xi].indexOf(r[1])?r=r[0]:r[1]===Ui?r=yo(r[0],i,o?Nr:Pr):r[1]===$i?r=r[0]*i.root.computedStyle[ii]:r[1]===Zi?r=r[0]*i.root.width*.01:r[1]===qi?r=r[0]*i.root.height*.01:r[1]===Ji?r=r[0]*Math.max(i.root.width,i.root.height)*.01:r[1]===Qi&&(r=r[0]*Math.min(i.root.width,i.root.height)*.01),r},calAbsolute:function(t,e,r,i,o){return r[1]===Gi?r=0:-1<[Wi,Xi,Ki,zi,ji].indexOf(r[1])?r=r[0]:r[1]===Ui?r=r[0]*i*.01:r[1]===$i?r=r[0]*o.computedStyle[ii]:r[1]===Zi?r=r[0]*o.width*.01:r[1]===qi?r=r[0]*o.height*.01:r[1]===Ji?r=r[0]*Math.max(o.width,o.height)*.01:r[1]===Qi&&(r=r[0]*Math.min(o.width,o.height)*.01),r},equalStyle:function(t,e,r,c){if(!e||!r)return e===r;if(t===zr){if(e.length!==r.length)return!1;for(var i=0,u=e.length;i<u;i++){var _=e[i],f=r[i];if(_[0]!==f[0])return!1;if(!io(_[1],f[1]))return!1}return!0}if(t===li){if(e.length!==r.length)return!1;for(var o=0,d=e.length;o<d;o++)if(!io(e[o],r[o]))return!1}if(t===Qr){if(e.length!==r.length)return!1;for(var n=0,p=e.length;n<p;n++){var a=e[n],s=r[n];if(a[0][0]!==s[0][0]||a[0][1]!==s[0][1]||a[1][0]!==s[1][0]||a[1][1]!==s[1][1])return!1}return!0}if(t===jr||co.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===qr||t===Jr||lo.hasOwnProperty(t)||_o.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===ui)return io(e,r);if(ho.hasOwnProperty(t))return e[1]===r[1]&&io(e[0],r[0]);if(uo.hasOwnProperty(t)&&e.k===r.k&&fo.hasOwnProperty(e.k)){var g=e.v,m=r.v;if(e.d!==r.d||g.length!==m.length)return!1;for(var h=0,v=g.length;h<v;h++){var l=g[h],y=m[h];if(l.length!==y.length)return!1;for(var x=0;x<4;x++)if(l[0][x]!==y[0][x])return!1;if(1<l.length&&(l[1][0]!==y[1][0]||l[1][1]!==y[1][1]))return!1}return!0}return no(c.tagName,t)&&(c.isMulti||Array.isArray(e)&&Array.isArray(r))?io(e,r):e===r},isRelativeOrAbsolute:function(t){return"relative"===(t=t.currentStyle[Dr])||"absolute"===t},cloneStyle:function(c,t){for(var e={},u=0,_=(t=t||Object.keys(c).map(function(t){return t=ao.hasOwnProperty(t)?t:parseInt(t)})).length;u<_;u++){var r=t[u],i=c[r];if(r===$r)e[r]=i.map(function(t){return t&&t.k?xt.clone(t):t});else if(r===fi||r===di)e[r]=i.map(function(t){return t&&t.k?xt.clone(t):t.slice(0)});else if(r===zr||r===li){if(i){for(var o=i.slice(0),n=0,f=o.length;n<f;n++)o[n]=o[n].slice(0),o[n][1]=o[n][1].slice(0);e[r]=o}}else if(r===ui)i&&(i=i.map(function(t){t=t.slice(0);return t[4]=t[4].slice(0),t}),e[r]=i);else if(r===Fi)i&&(e[r]=i.map(function(t){return t.slice(0)}));else if(xo.hasOwnProperty(r))e[r]=i;else if(ao.hasOwnProperty(r))e[r]=xt.clone(i);else if(i){var a=e[r]=i.slice(0);if(r===qr||r===Jr)for(var s=0,d=a.length;s<d;s++)a[s]=a[s].slice(0);else if(r===Qr)for(var h=0,p=a.length;h<p;h++)a[h]=a[h].slice(0),a[h][0]=a[h][0].slice(0),a[h][1]=a[h][1].slice(0);else if(Eo.hasOwnProperty(r))a[0]=a[0].slice(0);else if(bo.hasOwnProperty(r))a[0]=a[0].slice(0),a[1]=a[1].slice(0);else if(r===zr)for(var l=0,g=a.length;l<g;l++)a[l]=a[l].slice(0);else r===Xr&&(a[3]=a[3].slice(0))}}return e}},i=A.STYLE_KEY,To=i.COLOR,Ao=i.FONT_WEIGHT,Ro=i.FONT_FAMILY,Oo=i.FONT_SIZE,wo=i.FONT_STYLE,So=i.LETTER_SPACING,Io=i.TEXT_STROKE_COLOR,Co=i.TEXT_STROKE_WIDTH,ko=i.TEXT_STROKE_OVER,Lo=function(){function h(t,e,r,i,o,n,a,s){f(this,h),this.__parent=t,this.__index=e,this.__x=r,this.__y=i,this.__width=o,this.__height=n,this.__content=a,this.__wList=s,this.__virtualDom={}}return g(h,[{key:"render",value:function(c,t,e,u,_,f){var r=this.content,i=this.x,o=this.y,n=this.parent,d=this.wList,p=this.width,g=n.ox,n=n.oy,a=(o=o+Mo.getBaseLine(e)+(n+f),this.__endX=(i+=g+_)+p,this.__endY=o,e[So]),m=e[Co],s=e[Io],h=0,v=r.length;if(c===et.CANVAS||c===et.WEBGL){var l="fill"===e[ko];if(a)for(;h<v;h++)l&&t.fillText(r.charAt(h),i,o),m&&(0<s[3]||3===s.length)&&t.strokeText(r.charAt(h),i,o),l||t.fillText(r.charAt(h),i,o),i+=d[h]+a;else l&&t.fillText(r,i,o),m&&(0<s[3]||3===s.length)&&t.strokeText(r,i,o),l||t.fillText(r,i,o)}else c===et.SVG&&(n=[["x",i],["y",o],["fill",u[To]],["font-family",e[Ro]],["font-weight",e[Ao]],["font-style",e[wo]],["font-size",e[Oo]+"px"]],m&&(0<s[3]||3===s.length)&&(n.push(["stroke",u[Io]]),n.push(["stroke-width",e[Co]])),a&&n.push(["letter-spacing",a]),this.__virtualDom={type:"item",tagName:"text",props:n,content:xt.encodeHtml(r)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return this.parent.baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"wList",get:function(){return this.__wList}},{key:"isReplaced",get:function(){return!1}}]),h}(),Do=[8,16,32,64,128,256,512,1024,2048,4096,8192],No=[128,64,32,16,8,4,2,1,1,1,1],Po=Do[Do.length-1],Fo={},Bo=0,Yo=function(){function u(t,e){f(this,u),this.__size=t,this.__number=e,this.__free=this.__total=e*e,this.__width=t*=e,this.__height=t;t=this.__canvas=De.getCacheCanvas(t,t,null,e);t&&(this.__offscreen=t),this.__grid=[];for(var r=0;r<this.__total;r++)this.__grid.push(1);this.__uuid=Bo++,this.__update=!1,this.time=0}return g(u,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var o=r*t+i;if(e[o])return e[o]=0,this.__free--,o}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t){if(!(Po<t)){for(var e=Do[0],r=No[0],i=0,o=Do.length;i<o&&(e=Do[i],r=No[i],!(Do[i]>=t));i++);for(var n,a=Fo[e]=Fo[e]||[],s=0,h=a.length;s<h;s++){var l=a[s];if(l.free){n=l;break}}if(!n){if(!(n=new u(e,r)).offscreen)return void De.error("Can not create off-screen for page");a.push(n)}var c=n.add();return{page:n,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:Do,NUMBER:No}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(Do=t.SIZE,No=t.NUMBER,Po=Do[Do.length-1])}},{key:"MAX",get:function(){return Po}},{key:"genUuid",value:function(){return Bo++}}]),u}();function Ho(t,e,r,i){r-=t,t=i-e,i=Math.atan(Math.abs(t)/Math.abs(r));return r<0&&0<=t?Math.PI-i:r<0&&t<0?i-Math.PI:0<=r&&0<=t?i:-i}function Go(t){var e=Math.sin(t),t=Math.cos(t),r=qt.identity();return r[0]=r[5]=t,r[1]=e,r[4]=-e,r}function Wo(t,e){var t=Zt(t,6),r=t[0],i=t[1],o=t[2],n=t[3],a=t[4],t=t[5],e=Zt(e,6),s=e[0],h=e[1],l=e[2],c=e[3],u=e[4],o=(o-r)*(t-i)-(a-r)*(n-i),t=(l-s)*(e[5]-h)-(u-s)*(c-h);return 0<o&&t<0||o<0&&0<t}Ur={exchangeOrder:function(t,e){i=(t=Zt(t=t,6))[0],o=t[1],n=t[2],a=t[3],s=t[4],t=t[5],h=[0,1,2],n<i&&n<s?(i=(r=[n,a,i,o])[0],o=r[1],n=r[2],a=r[3],h[0]=1,h[1]=0):s<n&&s<i&&(i=(r=[s,t,i,o])[0],o=r[1],s=r[2],t=r[3],h[0]=2,h[2]=0),i===n?a<o&&(i=(r=[n,a,i,o])[0],o=r[1],n=r[2],a=r[3],r=h[0],h[0]=h[1],h[1]=r):i===s&&t<o&&(i=(r=[s,t,i,o])[0],o=r[1],s=r[2],t=r[3],r=h[0],h[0]=h[2],h[2]=r),(n-i)*(t-o)-(s-i)*(a-o)<0&&(n=(r=[s,t,n,a])[0],a=r[1],s=r[2],t=r[3],r=h[1],h[1]=h[2],h[2]=r);var r=[i,o,n,a,s,t,h],i=Zt(r,7),o=i[0],n=i[1],a=i[2],s=i[3],t=i[4],h=i[5],e=Zt(function(t,e){for(var r=[],i=0,o=e.length;i<o;i++){var n=e[i];r.push(t[2*n]),r.push(t[2*n+1])}return r}(e,i[6]),6);return[[o,n,a,s,t,h],[e[0],e[1],e[2],e[3],e[4],e[5]]]},isOverflow:Wo,transform:function(c,t){var e,r=(o=Zt(c,6))[0],u=o[1],i=o[2],_=o[3],f=o[4],o=o[5],d=(n=Zt(t,6))[0],p=n[1],g=n[2],m=n[3],v=n[4],n=n[5],c=Wo(c,t);(t=qt.identity())[12]=-r,t[13]=-u;0!==(s=Ho(r,u,i,_))&&(e=Go(-s),t=qt.multiply(e,t));var y=nt.pointsDistance(r,u,i,_),a=nt.pointsDistance(d,p,g,m),x=((l=qt.identity())[12]=-d,l[13]=-p,s=Ho(d,p,g,m)),s=(0!==s&&(e=Go(-s),l=qt.multiply(e,l)),Math.abs(qt.calPoint([f,o],t)[1])),h=Math.abs(qt.calPoint([v,n],l)[1]),l=(y===a&&s===h||(e=qt.identity(),y!==a&&(e[0]=a/y),s!==h&&(e[5]=h/s),t=qt.multiply(e,t)),t),y=(a=Zt(qt.calPoint([r,u],l),2))[0],h=a[1],r=(s=Zt(qt.calPoint([i,_],l),2))[0],u=s[1],i=(a=Zt(qt.calPoint([f,o],l),2))[0],_=a[1],s=nt.pointsDistance(y,h,r,u),f=nt.pointsDistance(y,h,i,_),o=nt.pointsDistance(i,_,r,u),l=nt.pointsDistance(d,p,g,m),a=nt.pointsDistance(d,p,v,n),y=nt.pointsDistance(v,n,g,m),h=nt.angleBySide(o,s,f),i=nt.angleBySide(y,l,a);return h!==i&&((e=qt.identity())[4]=Math.tan(h-.5*Math.PI)+Math.tan(.5*Math.PI-i),t=qt.multiply(e,t)),c&&(t[1]=-t[1],t[5]=-t[5],t[13]=-t[13]),(e=0!==x?Go(x):qt.identity())[12]=d,e[13]=p,qt.multiply(e,t)}};function Uo(t,e){return e<t?1:t<e?-1:0}function Xo(t,e){void 0===e&&(e=!1),this._compare=t=void 0===t?Uo:t,this._root=null,this._size=0,this._noDuplicates=!!e}a={size:{configurable:!0}};Xo.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},Xo.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},Xo.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},Xo.prototype.splay=function(t){for(var e,r,i,o;t.parent;)(r=(e=t.parent).parent)&&r.parent?((i=r.parent).left===r?i.left=t:i.right=t,t.parent=i):(t.parent=null,this._root=t),i=t.left,o=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,(e.right=r).parent=e):(i?(r.right=i).parent=r:r.right=null,(t.left=r).parent=t)),o?(e.left=o).parent=e:e.left=null,(t.right=e).parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,(e.left=r).parent=e):(o?(r.left=o).parent=r:r.left=null,(t.right=r).parent=t)),i?(e.right=i).parent=e:e.right=null,(t.left=e).parent=t)},Xo.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},Xo.prototype.minNode=function(t){if(t=void 0===t?this._root:t)for(;t.left;)t=t.left;return t},Xo.prototype.maxNode=function(t){if(t=void 0===t?this._root:t)for(;t.right;)t=t.right;return t},Xo.prototype.insert=function(t,e){var r=this._root,i=null,o=this._compare;if(this._noDuplicates)for(;r;){if(0===o((i=r).key,t))return;r=o(r.key,t)<0?r.right:r.left}else for(;r;)r=o((i=r).key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:i},i?o(i.key,r.key)<0?i.right=r:i.left=r:this._root=r,this.splay(r),this._size++,r},Xo.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var i=r(e.key,t);if(i<0)e=e.right;else{if(!(0<i))return e;e=e.left}}return null},Xo.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var i=r(t,e.key);if(0===i)return!0;e=i<0?e.left:e.right}return!1},Xo.prototype.remove=function(t){var e,t=this.find(t);return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0)},Xo.prototype.removeNode=function(t){return!!t&&(this.splay(t),t.left?t.right?((e=this.minNode(t.right)).parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e):this.replace(t,t.left):this.replace(t,t.right),this._size--,!0);var e},Xo.prototype.erase=function(t){var e,r,t=this.find(t);t&&(this.splay(t),e=t.left,t=t.right,r=null,e&&(e.parent=null,r=this.maxNode(e),this.splay(r),this._root=r),t&&(e?r.right=t:this._root=t,t.parent=r),this._size--)},Xo.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},Xo.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)e=(t=e).parent;return e},Xo.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)e=(t=e).parent;return e},Xo.prototype.forEach=function(t){for(var e=this._root,r=[],i=!1,o=0;!i;)e?(r.push(e),e=e.left):0<r.length?(t(e=r.pop(),o++),e=e.right):i=!0;return this},Xo.prototype.range=function(t,e,r,i){for(var o=[],n=this._compare,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(0<n((a=o.pop()).key,e))break;if(0<=n(a.key,t)&&r.call(i,a))return this;a=a.right}return this},Xo.prototype.keys=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.key),t=t.right):i=!0;return r},Xo.prototype.values=function(){for(var t=this._root,e=[],r=[],i=!1;!i;)t?(e.push(t),t=t.left):0<e.length?(t=e.pop(),r.push(t.data),t=t.right):i=!0;return r},Xo.prototype.at=function(t){for(var e=this._root,r=[],i=!1,o=0;!i;)if(e)r.push(e),e=e.left;else if(0<r.length){if(e=r.pop(),o===t)return e;o++,e=e.right}else i=!0;return null},Xo.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var i=t.length;return r&&function t(e,r,i,o,n){if(o<=i)return;var a=e[i+o>>1];var s=i-1;var h=o+1;for(;;){for(;n(e[++s],a)<0;);for(;0<n(e[--h],a););if(h<=s)break;var l=e[s];e[s]=e[h],e[h]=l,l=r[s],r[s]=r[h],r[h]=l}t(e,r,i,h,n);t(e,r,h+1,o,n)}(t,e,0,i-1,this._compare),this._root=function t(e,r,i,o,n){var a=n-o;{var s,h;if(0<a)return a=o+Math.floor(a/2),h=r[a],s=i[a],(h={key:h,data:s,parent:e}).left=t(h,r,i,o,a),h.right=t(h,r,i,a+1,n),h}return null}(null,t,e,0,i),this._size=i,this},Xo.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},Xo.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},Xo.prototype.isEmpty=function(){return null===this._root},a.size.get=function(){return this._size},Xo.createTree=function(t,e,r,i,o){return new Xo(r,o).load(t,e,i)},Object.defineProperties(Xo.prototype,a);var Vo=0,Ko=1,zo=2,jo=3,$o=0,Zo=1,qo=2,Jo=3;function Qo(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!tn(e,r)||e.isVertical()?e.prevInResult:e));e=tn(t,r);t.resultTransition=e?function(t,e){var r,i=!t.inOut,o=!t.otherInOut;switch(e){case $o:r=i&&o;break;case Zo:r=i||o;break;case Jo:r=i^o;break;case qo:r=t.isSubject?i&&!o:o&&!i}return r?1:-1}(t,r):0}function tn(t,e){switch(t.type){case Vo:switch(e){case $o:return!t.otherInOut;case Zo:return t.otherInOut;case qo:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case Jo:return!0}break;case zo:return e===$o||e===Zo;case jo:return e===qo;case Ko:return!1}return!1}function en(t,e,r,i,o){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=i,this.type=o||Vo,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0}s={inResult:{configurable:!0}};function rn(t,e){return t[0]===e[0]&&t[1]===e[1]}en.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?0<(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]):0<(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])},en.prototype.isAbove=function(t){return!this.isBelow(t)},en.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},s.inResult.get=function(){return 0!==this.resultTransition},en.prototype.clone=function(){var t=new en(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties(en.prototype,s);var on=134217729;function nn(c,t,u,_,f){var e,r,i,o,n=t[0],a=_[0],s=0,h=0,l=(n<a==-n<a?(e=n,n=t[++s]):(e=a,a=_[++h]),0);if(s<c&&h<u)for(n<a==-n<a?(i=e-((r=n+e)-n),n=t[++s]):(i=e-((r=a+e)-a),a=_[++h]),e=r,0!==i&&(f[l++]=i);s<c&&h<u;)n<a==-n<a?(i=e-((r=e+n)-(o=r-e))+(n-o),n=t[++s]):(i=e-((r=e+a)-(o=r-e))+(a-o),a=_[++h]),e=r,0!==i&&(f[l++]=i);for(;s<c;)i=e-((r=e+n)-(o=r-e))+(n-o),n=t[++s],e=r,0!==i&&(f[l++]=i);for(;h<u;)i=e-((r=e+a)-(o=r-e))+(a-o),a=_[++h],e=r,0!==i&&(f[l++]=i);return 0===e&&0!==l||(f[l++]=e),l}function an(t){return new Float64Array(t)}var sn=an(4),hn=an(8),ln=an(12),cn=an(16),un=an(4);function _n(c,u,_,f,t,d,p){var e,r,i,o,n,g,m,v,y,x,E=c-t,b=_-t,M=u-d,T=f-d,a=E*T,s=on*E,h=s-(s-E),l=E-h,A=(sn[0]=(m=l*(i=T-(r=(s=on*T)-(s-T)))-(a-h*r-l*r-h*i))-((o=m-(y=(l=M-(h=(s=on*M)-(s-M)))*(i=b-(r=(s=on*b)-(s-b)))-((v=M*b)-h*r-l*r-h*i)))+(e=m-o))+(e-y),sn[1]=(g=a-((n=a+o)-(e=n-a))+(o-e))-((o=g-v)+(e=g-o))+(e-v),sn[2]=n-((x=n+o)-(e=x-n))+(o-e),sn[3]=x,function(t,e){for(var r=e[0],i=1;i<t;i++)r+=e[i];return r}(4,sn)),R=22204460492503146e-32*p;if(R<=A||R<=-A)return A;if(c=c-(E+(e=c-E))+(e-t),_=_-(b+(e=_-b))+(e-t),t=u-(M+(e=u-M))+(e-d),u=f-(T+(e=f-T))+(e-d),0==c&&0==t&&0==_&&0==u)return A;if((R=11093356479670487e-47*p+33306690738754706e-32*Math.abs(A))<=(A+=E*u+T*c-(M*_+b*t))||R<=-A)return A;un[0]=(m=(l=c-(h=(s=on*c)-(s-c)))*(i=T-(r=(s=on*T)-(s-T)))-((a=c*T)-h*r-l*r-h*i))-((o=m-(y=(l=t-(h=(s=on*t)-(s-t)))*(i=b-(r=(s=on*b)-(s-b)))-((v=t*b)-h*r-l*r-h*i)))+(e=m-o))+(e-y),un[1]=(g=a-((n=a+o)-(e=n-a))+(o-e))-((o=g-v)+(e=g-o))+(e-v),un[2]=n-((x=n+o)-(e=x-n))+(o-e),un[3]=x;f=nn(4,sn,4,un,hn),un[0]=(m=(l=E-(h=(s=on*E)-(s-E)))*(i=u-(r=(s=on*u)-(s-u)))-((a=E*u)-h*r-l*r-h*i))-((o=m-(y=(l=M-(h=(s=on*M)-(s-M)))*(i=_-(r=(s=on*_)-(s-_)))-((v=M*_)-h*r-l*r-h*i)))+(e=m-o))+(e-y),un[1]=(g=a-((n=a+o)-(e=n-a))+(o-e))-((o=g-v)+(e=g-o))+(e-v),un[2]=n-((x=n+o)-(e=x-n))+(o-e),un[3]=x,d=nn(f,hn,4,un,ln),un[0]=(m=(l=c-(h=(s=on*c)-(s-c)))*(i=u-(r=(s=on*u)-(s-u)))-((a=c*u)-h*r-l*r-h*i))-((o=m-(y=(l=t-(h=(s=on*t)-(s-t)))*(i=_-(r=(s=on*_)-(s-_)))-((v=t*_)-h*r-l*r-h*i)))+(e=m-o))+(e-y),un[1]=(g=a-((n=a+o)-(e=n-a))+(o-e))-((o=g-v)+(e=g-o))+(e-v),un[2]=n-((x=n+o)-(e=x-n))+(o-e),un[3]=x,p=nn(d,ln,4,un,cn);return cn[p-1]}function fn(t,e,r){i=t[0],t=t[1],o=e[0],e=e[1],n=r[0],r=r[1],s=(a=(t-r)*(o-n))-(h=(i-n)*(e-r));var i,o,n,a,s,h=0==a||0==h||0<a!=0<h?s:(a=Math.abs(a+h),Math.abs(s)>=33306690738754716e-32*a?s:-_n(i,t,o,e,n,r,a));return 0<h?-1:h<0?1:0}function dn(t,e){var r=t.point,i=e.point;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:(i=e,e=r,(r=t).left===i.left?0===fn(e,r.otherEvent.point,i.otherEvent.point)?!r.isSubject&&i.isSubject?1:-1:r.isBelow(i.otherEvent.point)?-1:1:r.left?1:-1)}function pn(t,e,r){var i=new en(e,!1,t,t.isSubject),e=new en(e,!0,t.otherEvent,t.isSubject);return rn(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),i.contourId=e.contourId=t.contourId,0<dn(e,t.otherEvent)&&(t.otherEvent.left=!0,e.left=!1),t.otherEvent.otherEvent=e,t.otherEvent=i,r.push(e),r.push(i),r}function gn(t,e){return t[0]*e[1]-t[1]*e[0]}function mn(t,e){return t[0]*e[0]+t[1]*e[1]}function vn(t,e,r){var i=function(t,e,r,i,o){function n(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}e=[e[0]-t[0],e[1]-t[1]],i=[i[0]-r[0],i[1]-r[1]];var a=[r[0]-t[0],r[1]-t[1]],s=gn(e,i),c=mn(e,e);if(0<s*s){var h=gn(a,i)/s;if(h<0||1<h)return null;var l=gn(a,e)/s;return l<0||1<l?null:0==h||1==h?o?null:[n(t,h,e)]:0==l||1==l?o?null:[n(r,l,i)]:[n(t,h,e)]}return 0<(s=gn(a,e))*s?null:(r=mn(e,a)/c,l=r+mn(e,i)/c,h=Math.min(r,l),s=Math.max(r,l),h<=1&&0<=s?1===h?o?null:[n(t,0<h?h:0,e)]:0===s?o?null:[n(t,s<1?s:1,e)]:o&&0===h&&1===s?null:[n(t,0<h?h:0,e),n(t,s<1?s:1,e)]:null)}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),o=i?i.length:0;if(0===o)return 0;if(1===o&&(rn(t.point,e.point)||rn(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===o&&t.isSubject===e.isSubject)return 0;if(1===o)return rn(t.point,i[0])||rn(t.otherEvent.point,i[0])||pn(t,i[0],r),rn(e.point,i[0])||rn(e.otherEvent.point,i[0])||pn(e,i[0],r),1;var o=[],i=!1,n=!1;return rn(t.point,e.point)?i=!0:1===dn(t,e)?o.push(e,t):o.push(t,e),rn(t.otherEvent.point,e.otherEvent.point)?n=!0:1===dn(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),i&&n||i?(e.type=Ko,t.type=e.inOut===t.inOut?zo:jo,i&&!n&&pn(o[1].otherEvent,o[0].point,r),2):(n?pn(o[0],o[1].point,r):o[0]!==o[3].otherEvent?(pn(o[0],o[1].point,r),pn(o[1],o[2].point,r)):(pn(o[0],o[1].point,r),pn(o[3].otherEvent,o[2].point,r)),3)}function yn(t,e){if(t===e)return 0;if(0!==fn(t.point,t.otherEvent.point,e.point)||0!==fn(t.point,t.otherEvent.point,e.otherEvent.point))return rn(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===dn(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,i=e.point;return r[0]===i[0]&&r[1]===i[1]?(r=t.otherEvent.point,i=e.otherEvent.point,r[0]===i[0]&&r[1]===i[1]?0:t.contourId>e.contourId?1:-1):1===dn(t,e)?1:-1}function xn(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null}function En(t){for(var c=function(t){for(var e,r,i=[],o=0,n=t.length;o<n;o++)((e=t[o]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var a=!1;!a;)for(a=!0,o=0,n=i.length;o<n;o++)o+1<n&&1===dn(i[o],i[o+1])&&(r=i[o],i[o]=i[o+1],i[o+1]=r,a=!1);for(o=0,n=i.length;o<n;o++)(e=i[o]).otherPos=o;for(o=0,n=i.length;o<n;o++)(e=i[o]).left||(r=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=r);return i}(t),u={},_=[],e=function(){if(!u[f]){var t,e,r,i,o=_.length,n=(l=c[f],t=_,e=o,i=new xn,null!=l.prevInResult?(r=(l=l.prevInResult).outputContourId,0<l.resultTransition?null!=(l=t[r]).holeOf?(t[l=l.holeOf].holeIds.push(e),i.holeOf=l,i.depth=t[r].depth):(t[r].holeIds.push(e),i.holeOf=r,i.depth=t[r].depth+1):(i.holeOf=null,i.depth=t[r].depth)):(i.holeOf=null,i.depth=0),i),a=function(t){u[t]=!0,c[t].outputContourId=o},s=f,h=f,l=c[f].point;for(n.points.push(l);;)if(a(s),a(s=c[s].otherPos),n.points.push(c[s].point),(s=function(t,e,r,i){var o,n=t+1,a=e[t].point,s=e.length;for(n<s&&(o=e[n].point);n<s&&o[0]===a[0]&&o[1]===a[1];){if(!r[n])return n;o=e[++n].point}for(n=t-1;r[n]&&i<n;)n--;return n}(s,c,u,h))==h)break;_.push(n)}},f=0,r=c.length;f<r;f++)e();return _}xn.prototype.isExterior=function(){return null==this.holeOf};var bn=Mn,ki=Mn;function Mn(t,e){if(!(this instanceof Mn))return new Mn(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Tn,0<this.length)for(var r=(this.length>>1)-1;0<=r;r--)this._down(r)}function Tn(t,e){return t<e?-1:e<t?1:0}Mn.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t;if(0!==this.length)return t=this.data[0],this.length--,0<this.length&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,i=e[t];0<t;){var o=t-1>>1,n=e[o];if(0<=r(i,n))break;e[t]=n,t=o}e[t]=i},_down:function(t){for(var e=this.data,r=this.compare,i=this.length>>1,o=e[t];t<i;){var n=1+(t<<1),a=n+1,s=e[n];if(a<this.length&&r(e[a],s)<0&&(s=e[n=a]),0<=r(s,o))break;e[t]=s,t=n}e[t]=o}},bn.default=ki;var An=Math.max,Rn=Math.min,On=0;function wn(t,e,r,i,o,c){for(var n=0,u=t.length-1;n<u;n++){var a=t[n],s=t[n+1],h=new en(a,!1,void 0,e),l=new en(s,!1,h,e);h.otherEvent=l,a[0]===s[0]&&a[1]===s[1]||(h.contourId=l.contourId=r,c||(h.isExteriorRing=!1,l.isExteriorRing=!1),0<dn(h,l)?l.left=!0:h.left=!0,s=a[0],a=a[1],o[0]=Rn(o[0],s),o[1]=Rn(o[1],a),o[2]=An(o[2],s),o[3]=An(o[3],a),i.push(h),i.push(l))}}var Sn=[];function In(t,e,r){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);s=e,i=r,l=null,(h=t).length*s.length==0&&(i===$o?l=Sn:i===qo?l=h:i!==Zo&&i!==Jo||(l=0===h.length?s:h));var i=l;if(i)return i===Sn?null:i;var o,c,n,a,s=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],l=function(t,e,r,c,u){for(var i,o,n,a,s=new bn(null,dn),h=0,l=t.length;h<l;h++)for(n=0,a=(i=t[h]).length;n<a;n++)(o=0===n)&&On++,wn(i[n],!0,On,s,r,o);for(h=0,l=e.length;h<l;h++)for(n=0,a=(i=e[h]).length;n<a;n++)o=0===n,(o=u===qo?!1:o)&&On++,wn(i[n],!1,On,s,c,o);return s}(t,e,s,h,r);if(t=t,e=e,n=r,a=null,((o=s)[0]>(c=h)[2]||c[0]>o[2]||o[1]>c[3]||c[1]>o[3])&&(n===$o?a=Sn:n===qo?a=t:n!==Zo&&n!==Jo||(a=t.concat(e))),i=a)return i===Sn?null:i;for(var u=En(function(t,e,c,r){for(var i=new Xo(yn),u=[],_=Math.min(e[2],c[2]);0!==t.length;){var o,n,a,s,h,l=t.pop();if(u.push(l),r===$o&&l.point[0]>_||r===qo&&l.point[0]>e[2])break;l.left?(a=n=i.insert(l),n=n!==(o=i.minNode())?i.prev(n):null,a=i.next(a),Qo(l,s=n?n.key:null,r),a&&2===vn(l,a.key,t)&&(Qo(l,s,r),Qo(l,a.key,r)),n&&2===vn(n.key,l,t)&&(Qo(s,(h=(h=n)!==o?i.prev(h):null)?h.key:null,r),Qo(l,s,r))):(l=l.otherEvent,a=n=i.find(l),n&&a&&(n=n!==o?i.prev(n):null,a=i.next(a),i.remove(l),a&&n&&vn(n.key,a.key,t)))}return u}(l,s,h,r)),_=[],f=0;f<u.length;f++){var d=u[f];if(d.isExterior()){for(var p=[d.points],g=0;g<d.holeIds.length;g++){var m=d.holeIds[g];p.push(u[m].points)}_.push(p)}}return _}function Cn(t,e){return In(t,e,Zo)}function kn(t,e){return In(t,e,qo)}function Ln(t,e){return In(t,e,Jo)}function Dn(t,e){return In(t,e,$o)}var o={matrix:qt,tar:Ur,vector:B,geom:nt,booleanOperations:{union:Cn,diff:kn,intersection:Dn,xor:Ln}},t=A.STYLE_KEY,Nn=t.TRANSLATE_X,Pn=t.TRANSLATE_Y,Fn=t.TRANSLATE_Z,Bn=t.SCALE_X,Yn=t.SCALE_Y,Hn=t.SCALE_Z,Gn=t.SKEW_X,Wn=t.SKEW_Y,Un=t.ROTATE_X,Xn=t.ROTATE_Y,Vn=t.ROTATE_Z,Kn=t.ROTATE_3D,zn=t.PERSPECTIVE,jn=t.MATRIX,$n=t.FONT_SIZE,Zn=r.PX,qn=r.PERCENT,Jn=r.REM,Qn=r.VW,ta=r.VH,ea=r.VMAX,ra=r.VMIN,Kr=o.matrix,ia=Kr.identity,oa=Kr.multiply,na=Kr.isE,aa=o.geom.d2r;function sa(t,e,r,i){o=e,n=r,a=i,s=[],t.forEach(function(t){var t=Zt(t,2),e=t[0],t=t[1];s.push([e,function(t,e,r,i,o){if(t===Nn||t===Fn){if(e[1]===qn)return e[0]*r*.01;if(e[1]===Jn)return e[0]*o.computedStyle[$n];if(e[1]===Qn)return e[0]*o.width*.01;if(e[1]===ta)return e[0]*o.height*.01;if(e[1]===ea)return e[0]*Math.max(o.width,o.height)*.01;if(e[1]===ra)return e[0]*Math.min(o.width,o.height)*.01}else if(t===Pn){if(e[1]===qn)return e[0]*i*.01;if(e[1]===Jn)return e[0]*o.computedStyle[$n];if(e[1]===Qn)return e[0]*o.width*.01;if(e[1]===ta)return e[0]*o.height*.01;if(e[1]===ea)return e[0]*Math.max(o.width,o.height)*.01;if(e[1]===ra)return e[0]*Math.min(o.width,o.height)*.01}else{if(t===jn)return e;if(t===Kn)return e}return e[0]}(e,t,o,n,a)])});var o,n,a,s,e=s,g=ia();return e.forEach(function(t){var e,r,i,o,n,a,s,h,c,u,_,f,d,t=Zt(t,2),l=t[0],t=t[1],p=ia();e=p,t=t,(l=l)===Nn?e[12]=t:l===Pn?e[13]=t:l===Fn?e[14]=t:l===Bn?e[0]=t:l===Yn?e[5]=t:l===Hn?e[10]=t:l===Gn?(t=aa(t),e[4]=Math.tan(t)):l===Wn?(t=aa(t),e[1]=Math.tan(t)):l===Un?(t=aa(t),r=Math.sin(t),a=Math.cos(t),e[5]=e[10]=a,e[6]=r,e[9]=-r):l===Xn?(t=aa(t),a=Math.sin(t),r=Math.cos(t),e[0]=e[10]=r,e[8]=a,e[2]=-a):l===Vn?(t=aa(t),r=Math.sin(t),a=Math.cos(t),e[0]=e[5]=a,e[1]=r,e[4]=-r):l===Kn?(r=(a=Zt(t,4))[0],i=a[1],o=a[2],a=a[3],a=aa(a[0]),n=Math.sin(a),a=Math.cos(a),!r||i||o?!i||r||o?!o||r||i?(1!==(h=Math.sqrt(r*r+i*i+o*o))&&(r*=h=1/h,i*=h,o*=h),h=r*i,c=i*o,u=o*r,_=r*n,f=i*n,d=o*n,e[0]=r*r*(s=1-a)+a,e[1]=h*s+d,e[2]=u*s-f,e[3]=0,e[4]=h*s-d,e[5]=i*i*s+a,e[6]=c*s+_,e[7]=0,e[8]=u*s+f,e[9]=c*s-_,e[10]=o*o*s+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1):(o<0&&(n=-n),e[0]=a,e[4]=-n,e[1]=n,e[5]=a):(i<0&&(n=-n),e[0]=a,e[8]=n,e[2]=-n,e[10]=a):(r<0&&(n=-n),e[5]=a,e[9]=-n,e[6]=n,e[10]=a)):l===zn&&0<t?(t=Math.max(t,1),e[11]=-1/t):l===jn&&xt.assignMatrix(e,t),g=oa(g,p)}),g}function ha(t,e){var e=Zt(e,2),r=e[0],e=e[1],i=t.slice(0);return 0===r&&0===e||na(t)?i:(i=oa([1,0,0,0,0,1,0,0,0,0,1,0,r,e,0,1],i),oa(i,[1,0,0,0,0,1,0,0,0,0,1,0,-r,-e,0,1]))}var la={calMatrix:sa,calOrigin:function(t,r,i,o){var n=[];return t.forEach(function(t,e){t[1]===Zn?n.push(t[0]):t[1]===qn?n.push(t[0]*(e?i:r)*.01):t[1]===Jn?n.push(t[0]*o.computedStyle[$n]):t[1]===Qn?n.push(t[0]*o.width*.01):t[1]===ta?n.push(t[0]*o.height*.01):t[1]===ea?n.push(t[0]*Math.max(o.width,o.height)*.01):t[1]===ra&&n.push(t[0]*Math.min(o.width,o.height)*.01)}),n},calMatrixByPerspective:function(t,e){return t=na(e)?t:oa(e,t)},calPerspectiveMatrix:function(t,e){var r;if(t&&0<t)return r=ia(),t=Math.max(t,1),r[11]=-1/t,e=(t=Zt(e,2))[0],t=t[1],(e||t)&&(r=oa([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1],r),r=oa(r,[1,0,0,0,0,1,0,0,0,0,1,0,-e,-t,0,1])),r},calMatrixByOrigin:ha,calMatrixWithOrigin:function(t,e,r,i){return ha(sa(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}};function ca(t){if(t<=0)return 0;t=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return(t=t<2?2:t)%2==0&&t++,t}function ua(t){return 3*Math.floor(.5*t)}var _a={kernelSize:ca,outerSize:function(t){return ua(ca(t))},outerSizeByD:ua,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),o=0,n=i;0<=n;n--){var a=Math.pow(Math.E,-Math.pow(n,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(a),o+=a}for(var s=1;s<=i;s++){var h=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(h),o+=h}if(1!==o)for(var l=0;l<e;l++)r[l]/=o;return r}},e=A.STYLE_KEY,fa=e.TRANSFORM_ORIGIN,da=e.TRANSFORM;function pa(t,e){var r=t.size,i=t.sx1,o=t.sy1,n=t.width,a=t.height,s=t.bbox,e=De.getCacheCanvas(n,a,null,e);return e.x=0,e.y=0,e.bbox=s,e.size=r,e.sx1=i,e.sy1=o,e.dx=t.dx,e.dy=t.dy,e.dbx=t.dbx,e.dby=t.dby,e.width=n,e.height=a,e}var ga=function(){function p(t,e,r,i,o,n,a){f(this,p),this.__init(t,e,r,i,o,n,a)}return g(p,[{key:"__init",value:function(t,e,r,i,o,n,a){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=o;t=Zt(i.getCoords(o),2),e=t[0],r=t[1];this.__x=e,this.__y=r,this.__appendData(n,a),this.__isNew=!0,i.canvas&&(this.__enabled=!0,(o=i.ctx).setTransform(1,0,0,1,0,0),o.globalAlpha=1,fe.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size))}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){var t,e;this.available&&((t=this.ctx).setTransform(1,0,0,1,0,0),e=this.page.size,t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0)}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){var i,o,n,a;xt.equalArr(this.bbox,t)&&this.enabled?this.clear():(this.release(),i=Math.ceil(t[2]-t[0]),o=Math.ceil(t[3]-t[1]),(a=Yo.getInstance(Math.max(i,o)))?(n=a.page,a=a.pos,this.__init(i,o,t,n,a,e,r)):this.__enabled=!1)}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return Yo.MAX}},{key:"getInstance",value:function(t,e,r){var i=Math.ceil(t[2]-t[0]),o=Math.ceil(t[3]-t[1]),n=Yo.getInstance(Math.max(i,o));if(n)return new p(i,o,t,n.page,n.pos,e,r)}},{key:"genFilter",value:function(t,e){var r=0,i=(e.forEach(function(t){var t=Zt(t,2),e=t[0],t=t[1];"blur"===e&&(r=_a.outerSize(t))}),t.x),o=t.y,n=t.size,c=t.canvas,u=t.sx1,_=t.sy1,a=t.width,s=t.height,h=t.bbox,l=((h=h.slice(0))[0]-=r,h[1]-=r,h[2]+=r,h[3]+=r,De.getCacheCanvas(a+2*r,s+2*r,null,"filter"));return l.ctx.filter=yt.canvasFilter(e),l.ctx.drawImage(c,i,o,a,s,r,r,a,s),l.ctx.filter="none",l.draw(),l.bbox=h,l.x=0,l.y=0,l.size=n,l.sx1=u-r,l.sy1=_-r,l.dx=t.dx,l.dy=t.dy,l.dbx=t.dbx,l.dby=t.dby,l.width=a+2*r,l.height=s+2*r,l}},{key:"genMask",value:function(t,e,r){for(var i=pa(t,"mask1"),o=[],n=e.computedStyle,a=n[da],n=n[fa],s=e.next,h=s.isClip;s&&s.isMask;)o.push(s),s=s.next;var c=i.x,u=i.y,l=i.ctx,_=i.dbx,f=i.dby,d=(n[0]+=c+_+e.__sx1-t.sx1,n[1]+=u+f+e.__sy1-t.sy1,la.calMatrixByOrigin(a,n));return o.forEach(function(t){r(t,i,d)}),l.setTransform(1,0,0,1,0,0),l.globalAlpha=1,l.globalCompositeOperation=h?"source-out":"source-in",p.drawCache(t,i),l.globalCompositeOperation="source-over",i.draw(l),i}},{key:"genOverflow",value:function(t,e){var r,i,o=t.bbox,n=e.sx,a=e.sy,s=e.outerWidth,e=e.outerHeight;if(o[0]<n||o[1]<a||o[2]>n+s||o[3]>a+e)return(i=(r=pa(t,"overflow")).ctx).setTransform(1,0,0,1,0,0),i.globalAlpha=1,p.drawCache(t,r),r.draw(i),i.globalCompositeOperation="destination-in",i.fillStyle="#FFF",i.beginPath(),i.rect(n-o[0],a-o[1],s,e),i.fill(),i.closePath(),i.globalCompositeOperation="source-over",r}},{key:"updateCache",value:function(t,e){var r=t.bbox;if(xt.equalArr(e,r))return t;var i,o,n,a,s,h,c,l=r[0]-e[0],r=r[1]-e[1],e=p.getInstance(e);return e&&e.enabled?(i=t.x,o=t.y,n=t.canvas,a=t.width,s=t.height,h=e.x,c=e.y,e.sx1=t.sx1,e.sy1=t.sy1,e.dx=t.dx+l,e.dy=t.dy+r,e.dbx=t.dbx+l,e.dby=t.dby+r,e.ctx.drawImage(n,i,o,a,s,l+h,r+c,a,s),e.__available=!0,t.release(),e):void 0}},{key:"drawCache",value:function(t,e,r,i,o,n,a){var s=e.x,c=e.y,h=e.sx1,u=e.sy1,_=e.ctx,f=e.dbx,e=e.dby,d=t.x,p=t.y,g=t.canvas,l=t.sx1,m=t.sy1,v=t.dbx,y=t.dby,x=t.width,t=t.height,s=s+l-h+f-v,l=c+m-u+e-y;r&&i&&o&&(o[0]+=s,o[1]+=l,h=la.calMatrixByOrigin(r,o),i=qt.multiply(i,h),qt.isE(n)||(i=qt.multiply(n,i)),a&&(i=xt.equalArr(i,a)?qt.identity():(a=qt.inverse(a),qt.multiply(a,i))),_.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])),_.drawImage(g,d,p,x,t,s,l,x,t)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var e=i.x,r=i.y,o=i.canvas,n=i.sx1,a=i.sy1,s=i.dbx,h=i.dby,l=i.width,i=i.height;t.drawImage(o,e,r,l,i,n-s,a-h,l,i)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),p}(),i=(n(ga,"NA",0),n(ga,"LOCAL",1),n(ga,"CHILD",2),n(ga,"SELF",3),A.STYLE_KEY),a=A.STYLE_KEY,ma=a.TRANSLATE_X,va=a.TRANSLATE_Y,ya=a.TRANSLATE_Z,xa=a.OPACITY,Ea=a.FILTER,ba=a.PERSPECTIVE,Ma=a.PERSPECTIVE_ORIGIN,Ta={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},Aa=(n(s={},i.SCALE_X,!0),n(s,i.SCALE_Y,!0),n(s,i.SCALE_Z,!0),n(s,i.ROTATE_X,!0),n(s,i.ROTATE_Y,!0),n(s,i.ROTATE_Z,!0),n(s,i.ROTATE_3D,!0),n(s,i.TRANSFORM,!0),n(s,i.TRANSFORM_ORIGIN,!0),s),Ra=Object.assign({contain:function(t,e){return 0<(t&e)},getLevel:function(t){return wr.isIgnore(t)?Ta.NONE:t===ma?Ta.TRANSLATE_X:t===va?Ta.TRANSLATE_Y:t===ya?Ta.TRANSLATE_Z:Aa.hasOwnProperty(t)?Ta.TRANSFORM:t===xa?Ta.OPACITY:t===Ea?Ta.FILTER:t===ba||t===Ma?Ta.PERSPECTIVE:wr.isRepaint(t)?Ta.REPAINT:Ta.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<Ta.REFLOW},isRebuild:function(t){return Ta.REBUILD<=t}},Ta),ki=(Ra.TRANSFORMS=Aa,A.STYLE_KEY),Oa=ki.DISPLAY,wa=ki.LINE_HEIGHT,Sa=ki.FONT_SIZE,Ia=ki.FONT_FAMILY,Ca=ki.FONT_STYLE,ka=ki.FONT_WEIGHT,La=ki.COLOR,Da=ki.VISIBILITY,Na=ki.LETTER_SPACING,Pa=ki.OVERFLOW,Fa=ki.WHITE_SPACE,Ba=ki.TEXT_OVERFLOW,Ya=ki.WIDTH,Ha=ki.TEXT_STROKE_COLOR,Ga=ki.TEXT_STROKE_WIDTH,Wa=ki.POSITION,Ur=A.NODE_KEY,Ua=Ur.NODE_CACHE,Xa=Ur.NODE_LIMIT_CACHE,Va=Ur.NODE_DOM_PARENT,Ka=Ur.NODE_MATRIX_EVENT,za=Ur.NODE_OPACITY,ja=Ur.NODE_VIRTUAL_DOM,t=A.UPDATE_KEY,$a=t.UPDATE_NODE,Za=t.UPDATE_MEASURE,qa=t.UPDATE_FOCUS,Ja=t.UPDATE_CONFIG,Qa=de.ELLIPSIS,ts=r.AUTO,es=r.REM,rs=r.VW,is=r.VH,os=r.VMAX,ns=r.VMIN,as=function(){p(i,k);var r=m(i);function i(t){var e;return f(this,i),(e=r.call(this)).__content=xt.isNil(t)?"":t.toString(),e.__textBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return g(i,[{key:"__computeMeasure",value:function(t,e){for(var c=this.content,r=this.computedStyle,i=this.charWidthList,u=(i.splice(0),r[Ia].split(",")),o="arial",_=0,f=u.length;_<f;_++)if(De.checkSupportFontFamily(u[_])){o=u[_];break}this.__ff=o;for(var n=r[Sa],d=r[ka],a=this.__key=r[Sa]+","+o+","+d,p=de.data[a]=de.data[a]||{ff:o,fs:n,fw:d,hash:{},s:""},g=de.charWidth[a]=de.charWidth[a]||{},m=0,v=!1,s=this.domParent;"inline"===s.currentStyle[Oa]&&"absolute"!==s.currentStyle[Wa];){var y=s.domParent;if("flex"===y.currentStyle[Oa])break;s=y}for(var n=(this.__bp=s).computedStyle,x=0,E=n[Ia].split(","),b=E.length;x<b;x++)if(De.checkSupportFontFamily(E[x])){o=u[x];break}var d=n[Sa],a=n[ka],M=this.__pKey=d+",arial,"+a,T=de.charWidth[M]=de.charWidth[M]||{};t===et.CANVAS||t===et.WEBGL?(t===et.WEBGL&&(e=De.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__").ctx),T.hasOwnProperty(Qa)||(e.font=Mo.setFontStyle(n),T[Qa]=e.measureText(Qa).width),e.font=Mo.setFontStyle(r)):t===et.SVG&&(T.hasOwnProperty(Qa)||(T[Qa]=0,(de.data[M]=de.data[M]||{ff:"arial",fs:d,fw:a,hash:{},s:""}).s+=Qa,v=!0));for(var A=0,R=c.length;A<R;A++){var h=c.charAt(A),l=void 0;g.hasOwnProperty(h)?(l=g[h],i.push(l),m+=l,this.__charWidth=Math.max(this.charWidth,l)):t===et.CANVAS||t===et.WEBGL?(l=g[h]=e.measureText(h).width,i.push(l),m+=l,this.__charWidth=Math.max(this.charWidth,l)):(p.hash.hasOwnProperty(h)||(p.s+=h),p.hash[h]=!0,i.push(-1),v=!0)}this.__textWidth=m,v&&de.list.push(this)}},{key:"__measureCb",value:function(){for(var t,e=this.content,r=this.charWidthList,i=this.__key,o=de.charWidth[i],n=0,a=0,s=r.length;a<s;a++)r[a]<0&&(n+=t=r[a]=o[e.charAt(a)],this.__charWidth=Math.max(this.charWidth,t));this.__textWidth=n}},{key:"__layout",value:function(c){var t=this.__config[Ua],u=(t&&t.release(),c.x),e=c.y,_=c.w,t=c.lx,f=void 0===t?u:t,d=c.lineBoxManager,t=c.endSpace,p=void 0===t?0:t,t=c.lineClamp,g=void 0===t?0:t,t=c.lineClampCount,m=void 0===t?0:t,t=(this.__x=this.__sx=this.__sx1=u,this.__y=this.__sy=this.__sy1=e,this.isDestroyed),v=this.content,y=this.currentStyle,x=this.computedStyle,r=this.textBoxes,i=this.charWidthList,E=this.root,b=this.__ff,M=this.__key;if(r.splice(0),this.__config[Xa]=!1,t||"none"===y[Oa]||!v)return m;var T,A,R,O,o=this.__ox=this.__oy=0,n=0,w=u-f,a=w,s=v.length,h=0,l=x[wa],S=x[Na],t=x[Fa],I=x[Sa],C=x[ka],k=vt.info[b].padding,L=!!k,D=de.charWidth[this.__pKey][Qa],N=0;if("nowrap"===t){var P,y=this.__bp.currentStyle,F=y[Oa],t=y[Pa],B=y[Ya],y=y[Ba];if("hidden"===t)for(;n<s;){if(_<(a+=i[n]+S)){("block"===F||"flex"===F||B[1]!==ts)&&(P=!0);break}n++}else for(;n<s;)a+=i[n++]+S;P&&"ellipsis"===y?(e=(t=Zt(this.__lineBack(a,_,w,p,D,S,o,n,s,N,l,f,u,e,h,r,v,i,d),2))[0],h=t[1]):(y=new Lo(this,r.length,u,e,a-w,l,v,i),r.push(y),d.addItem(y),h=a-w,e+=l)}else{for(;n<s;){var Y=i[n]+S;if(a+=Y,L&&((W=v[n])===T&&k.hasOwnProperty(W)&&k[W]&&(G=void 0,H=de.padding[M]=de.padding[M]||{},de.padding.hasOwnProperty(M)&&H.hasOwnProperty(W)&&(G=!0,a-=H[W]),G||(G=0,E.renderMode===et.CANVAS?(E.ctx.font=Mo.setFontStyle(x),G=2*E.ctx.measureText(W).width-E.ctx.measureText(W+W).width,G*=k[W]):E.renderMode===et.SVG&&(G=De.measureTextSync(M,b,I,C,W),G*=k[W]),a-=G,H[W]=G)),T=W),0!==Y)if(a===_){if(g&&g-1<=N+m&&n<s-1){var H=Zt(this.__lineBack(a,_,w,p,D,S,o,n,s,N,l,f,u,e,h,r,v,i,d),2);e=H[0],h=H[1],N++;break}var G=void 0;n===s-1&&_-p<a&&n&&(a-=i[n--]),n++,N?(G=new Lo(this,r.length,f,e,a,l,v.slice(o,n),i.slice(o,n)),h=Math.max(h,a)):G=new Lo(this,r.length,u,e,h=a-w,l,v.slice(o,n),i.slice(o,n)),r.push(G),d.addItem(G,!0),e+=Math.max(l,d.lineHeight),o=n,a=0,N++,T=null}else if(_+1e-10<a){if(g&&g-1<=N+m){var W=Zt(this.__lineBack(a,_,w,p,D,S,o,n,s,N,l,f,u,e,h,r,v,i,d),2);e=W[0],h=W[1],N++;break}var Y=void 0,Y=n<=o?a:a-i[n--],U=(n++,void 0);N?(U=new Lo(this,r.length,f,e,Y,l,v.slice(o,n),i.slice(o,n)),h=Math.max(h,Y)):U=new Lo(this,r.length,u,e,h=Y-w,l,v.slice(o,n),i.slice(o,n)),r.push(U),d.addItem(U,!0),e+=Math.max(l,d.lineHeight),o=n,a=0,N++,T=null}else n++;else n++}N&&(this.__x=this.__sx1=f),o<s&&(!g||N+m<g)&&(N?(_-p<a&&o<s-1&&(A=!0,a-=i[s-1]),O=new Lo(this,r.length,f,e,a,l,v.slice(o,A?s-1:s),i.slice(o,A?s-1:s)),h=Math.max(h,a),r.push(O),d.addItem(O),e+=Math.max(l,d.lineHeight),A&&(t=i[s-1],O=new Lo(this,r.length,f,e,t,l,v.slice(s-1),i.slice(s-1)),h=Math.max(h,t),r.push(O),d.setNewLine(),d.addItem(O),e+=l,N++)):(o&&_-p<a&&(R=!0,a-=i[s-1]),O=new Lo(this,r.length,u,e,h=a-w,l,v.slice(o,R?s-1:s),i.slice(o,R?s-1:s)),r.push(O),d.addItem(O),e+=Math.max(l,d.lineHeight),R&&(y=i[s-1],O=new Lo(this,r.length,f,e,y,l,v.slice(s-1),i.slice(s-1)),h=Math.max(h,y),r.push(O),d.setNewLine(),d.addItem(O),e+=l,N++)))}return this.__width=h,this.__height=e-c.y,this.__baseLine=Mo.getBaseLine(x),N}},{key:"__lineBack",value:function(t,c,u,_,f,d,e,r,p,i,g,m,v,o,y,x,E,b,n){for(;e<=r;r--)if((t-=b[r]+d)+f+_<=c&&r){var M=new Lo(this,x.length,i?m:v,o,y=t-(i?0:u),g,E.slice(e,r),b.slice(e,r));x.push(M),n.addItem(M,!0),o+=Math.max(g,n.lineHeight),this.__ellipsis=!0;break}if(r<0){var a=n.lineBox;if(a&&a.size){var T=a.list;t:for(var s=T.length-1;0<=s;s--){var h=T[s],A=h.content,R=h.wList,O=h.width;if(t-O+f<=c||!s)for(var l=R.length-1;0<=l;l--){if(!l&&!s||t+f<=c){h.__content=A,h.__width=O,h.parent.__ellipsis=!0;break t}var w=R[l];h.__endY-=w,O-=w,A=A.slice(0,l),t-=w,R.pop()}else t-=O;T.pop(),h.parent.textBoxes.pop()}}else{a=new Lo(this,x.length,i?m:v,o,y=t-(i?0:u),g,E.charAt(e),b.slice(e,e+1));x.push(a),n.addItem(a,!0),o+=Math.max(g,n.lineHeight),this.__ellipsis=!0}}return[o,y]}},{key:"__offsetX",value:function(e,t){P(N(i.prototype),"__offsetX",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetX(e)}),this.__sx1+=e}},{key:"__offsetY",value:function(e,t){P(N(i.prototype),"__offsetY",this).call(this,e,t),t&&this.textBoxes.forEach(function(t){t.__offsetY(e)}),this.__sy1+=e}},{key:"__tryLayInline",value:function(t){return t-this.charWidthList[0]}},{key:"__inlineSize",value:function(){var r,i;this.textBoxes.forEach(function(t,e){i=e?(r=Math.min(r,t.x),Math.max(i,t.x+t.width)):(r=t.x,t.x+t.width)}),this.__x=r,this.__sx=this.__sx1=r+this.ox,this.__sy=this.__sy1,this.__width=i-r}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"__calAbsWidth",value:function(t,e,r){return this.__layout({x:t,y:e,w:r},!0),this.width}},{key:"render",value:function(e,l,r,t){var c=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,u=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,i=this.isDestroyed,o=this.computedStyle,n=this.textBoxes,_=this.cacheStyle,f=this.__ellipsis,d=this.__bp,a=this.__config;if(e===et.SVG&&(a[ja]=this.__virtualDom={type:"text",children:[]}),!i&&"none"!==o[Oa]&&"hidden"!==o[Da]&&n.length){if(e===et.CANVAS||e===et.WEBGL){if(e===et.WEBGL)if(t){var i=this.sx,t=this.sy,s=this.bbox,h=a[Ua];if(h?h.reset(s,i,t):h=ga.getInstance(s,i,t),!h||!h.enabled)return void(a[Xa]=!0);(a[Ua]=h).__available=!0,r=h.ctx,c+=h.dx,u+=h.dy,a[Xa]=!1}else{var s=this.root,i=De.getCacheCanvas(s.width,s.height,"__$$OVERSIZE$$__"),t=(r=i.ctx,a[Va].__config),h=t[Ka],s=t[za];r.setTransform(h[0],h[1],h[4],h[5],h[12],h[13]),r.globalAlpha=s}var i=Mo.setFontStyle(o),a=(r.font!==i&&(r.font=i),_[La]),t=(r.fillStyle!==a&&(r.fillStyle=a),o[Ga]),h=(r.lineWidth!==t&&(r.lineWidth=t),_[Ha]);r.strokeStyle!==h&&(r.strokeStyle=h)}n.forEach(function(t){t.render(e,r,o,_,c,u)}),e===et.SVG&&(this.virtualDom.children=n.map(function(t){return t.virtualDom})),f&&(i=(s=n[n.length-1]).endX,a=s.endY,t=d.computedStyle,e===et.CANVAS||e===et.WEBGL?(h=Mo.setFontStyle(t),r.font!==h&&(r.font=h),f=d.__cacheStyle[La],r.fillStyle!==f&&(r.fillStyle=f),r.fillText(Qa,i,a)):e===et.SVG&&(n=[["x",i],["y",a],["fill",d.__cacheStyle[La]],["font-family",t[Ia]],["font-weight",t[ka]],["font-style",t[Ca]],["font-size",t[Sa]+"px"]],this.virtualDom.children.push({type:"item",tagName:"text",props:n,content:Qa})))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(i.prototype),"__destroy",this).call(this),(t=this.__config[Ua])&&t.release())}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(i,e){var o=this;i!==o.__content?(root.delRefreshTask(o.__task),root.addRefreshTask(o.__task={__before:function(){o.__content=i;var t={},e=o.domParent,r=(t[$a]=e,t[Za]=!0,t[qa]=Ra.REFLOW,t[Ja]=e.__config,e.root);r.__addUpdate(e,e.__config,r,r.__config,t)},__after:function(t){xt.isFunction(e)&&e(t)}})):xt.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"firstCharWidth",get:function(){return this.charWidthList[0]||0}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,o=this.root,n=this.currentStyle[Ga],a=0;return[t-(a=n[1]===es?Math.max(n[0]*o.computedStyle[Sa],a):n[1]===rs?Math.max(n[0]*o.width,a):n[1]===is?Math.max(n[0]*o.height,a):n[1]===os?Math.max(n[0]*Math.max(o.width,o.height)*.01,a):n[1]===ns?Math.max(n[0]*Math.min(o.width,o.height)*.01,a):Math.max(n[0],a)),e-a,t+r+a,e+i+a]}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),i}(),ss=(as.prototype.__renderByMask=as.prototype.render,Jt.TYPE_VD),hs=Jt.TYPE_GM,ls=Jt.TYPE_CP;function cs(t){if(Array.isArray(t))return t.map(cs);if(!t||-1===[ss,hs,ls].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return function e(r,t,i){if(Array.isArray(t))t.forEach(function(t){e(r,t,i)});else if(!t||t.$$type!==ss&&t.$$type!==hs)t&&t.$$type===ls?(r.push(t),i.lastText=null):xt.isNil(t)||""===t||(null!==i.lastText?r[r.length-1]=i.lastText+=t:r.push(t));else{if(-1<["canvas","svg","webgl"].indexOf(t.tagName))throw new Error("Can not nest canvas/svg/webgl");t.$$type===ss&&cs(t),r.push(t),i.lastText=null}}(e,t.children,{lastText:null}),t.children=e,t}var us,_s,fs,ds,ps,Kr=A.NODE_KEY,gs=Kr.NODE_DOM_PARENT,ms=Kr.NODE_STYLE,vs=Kr.NODE_CURRENT_STYLE,ys=Kr.NODE_COMPUTED_STYLE,xs=Kr.NODE_MATRIX,Es=Kr.NODE_MATRIX_EVENT,bs=Jt.TYPE_VD,Ms=Jt.TYPE_GM,Ts=Jt.TYPE_CP;function As(t,e,r,i){if(Array.isArray(t))return t.map(function(t){return As(t,e,r,i)});if(xt.isObject(t)&&t.$$type){var o,n=t.tagName,a=t.props,s=t.children,c=t.klass,h=t.$$type,l=t.__inheritAnimate,u=t.__animateRecords;if(h===Ts&&t.__placeholder)return t.__placeholder;if(h===bs){if("img"===n){if(o=new fs(n,a),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else o=new _s(n,a);if("p"===n)i=!0;else if("div"===n&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?Rs(o,As(s,e,r,i)):[],o.__children=s}else if(h===Ms)xt.isString(n)?o=new(ds.getRegister(n))(n,a):n&&(o=new n("$",a));else{if(h!==Ts)return new as(t);(o=new c(a)).__tagName=n||o.__tagName}(t.vd=o).__json=t,u&&((o.__animateRecords=u).list.forEach(function(t){t.target=t.target.vd}),delete t.__animateRecords),l&&(xt.extendAnimate(l,o),delete t.__inheritAnimate),o.__root=e,o.__host=r,h===Ts&&o.__init();s=a.ref;return xt.isString(s)&&s||xt.isNumber(s)?r.ref[s]=o:xt.isFunction(s)&&s(o),o}return new as(t)}function Rs(e,r){var t,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(r)?r.forEach(function(t){Rs(e,t,i)}):(r instanceof us||r instanceof ps||r instanceof as)&&(r.__parent=e,r.__domParent=e,r instanceof as&&[ms,vs,ys,xs,Es].forEach(function(t){r.__config[t]=e.__config[t]}),r.__config&&(r.__config[gs]=e),i.prev&&((i.prev.__next=r).__prev=i.prev),(i.prev=r)instanceof ps&&((t=r.shadowRoot)instanceof as&&(t.__parent=e,[ms,vs,ys,xs,Es].forEach(function(t){r.__config[t]=e.__config[t]})),t.__domParent=e,t.__config&&(t.__config[gs]=e))),r}var Os={ref:function(t){us=t.Xom,_s=t.Dom,fs=t.Img,ds=t.Geom,ps=t.Component},initRoot:function(t,e){return t=cs({tagName:e.tagName,props:{},children:t,$$type:bs}),e.__json=t,e.__host=e,t=As(t.children,e,e),Rs(e,t)},initDom:function(t,e,r,i){return Rs(i,As(t,e,r))},initCp:function(t,e,r){return xt.isObject(t)?As(t,e,r):new as(t)},initCp2:function(t,e,r,i){var o=new t.klass(t.props);return o.__tagName=t.tagName||o.__tagName,o.__root=e,o.__host=r,o.__json=t,o.__init(),Rs(i,o)},relation:Rs},ws=xt.isFunction,Ss=function(){function a(){f(this,a),this.__eHash={}}return g(a,[{key:"on",value:function(t,e){if(ws(e)){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.on(t[r],e);else{this.__eHash.hasOwnProperty(t)||(this.__eHash[t]=[]);for(var o=0,n=this.__eHash[t],a=n.length;o<a;o++)if(n[o]===e)return this;this.__eHash[t].push(e)}return this}}},{key:"once",value:function(i,o){if(ws(o)){var n=this;if(a.__karasEventCb=o,Array.isArray(i))for(var t=0,e=i.length;t<e;t++)n.once(i[t],o);else o&&n.on(i,a);return this}function a(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];o.apply(n,e),n.off(i,a)}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var o=0,n=this.__eHash[t],a=n.length;o<a;o++)if(n[o]===e||n[o].__karasEventCb===e){n.splice(o,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,r=new Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];if(Array.isArray(t))for(var o=0,n=t.length;o<n;o++)this.emit(t[o],r);else if(this.__eHash.hasOwnProperty(t)){var a=this.__eHash[t];if(a.length)for(var s=0,l=(a=a.slice()).length;s<l;s++){var h=a[s];ws(h)&&h.apply(this,r)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--)for(var e=t<0||arguments.length<=t?void 0:arguments[t],r=new a,i=(e.__eHash={},["on","once","off","emit"]),o=i.length-1;0<=o;o--){var n=i[o];e[n]=r[n]}}}]),a}(),Is=(n(Ss,"REFRESH","refresh"),n(Ss,"PAUSE","pause"),n(Ss,"PLAY","play"),n(Ss,"FRAME","frame"),n(Ss,"FINISH","finish"),n(Ss,"CANCEL","cancel"),n(Ss,"BEGIN","begin"),n(Ss,"END","end"),xt.isNil),Cs=xt.isFunction,ks=xt.clone,Ls=xt.extend,Ds={};var Ns=function(){p(n,Ss);var r=m(n);function n(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return f(this,n),(t=r.call(this)).__tagName=/(?:function|class)\s+([\w$]+)/.exec(t.constructor.toString())[1],Array.isArray(e)?t.props=xt.arr2hash(e):t.props=e,t.__parent=null,t.__host=null,t.__ref={},t.state={},t.__isMounted=!1,t.__taskList=[],t}return g(n,[{key:"setState",value:function(t,e){var r=this,i=this;if(Is(t))t={};else{if(Cs(t))return;if(0===Object.keys(t).length)return void(Cs(e)&&e.call(i));var o=ks(i.state);t=Ls(o,t)}var n,a,o=i.root;o&&i.__isMounted?i.__nextState?(Object.assign(i.__nextState,t),i.__taskList.push(e)):(i.__nextState=t,i.__taskList=[e],n=[],a=i.__task={__before:function(){n=i.__taskList.splice(0),function t(e){e.__hasCpUpdate||(e.__hasCpUpdate=!0,(e=e.host)&&t(e))}(r)},__after:function(){n.forEach(function(t){Cs(t)&&t.call(i)})}},o.addRefreshCp(a)):Cs(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var r=this,e=(this.__ref={},this.root),t=t||cs(this.render()),i=Os.initCp(t,e,this);if(this.__cd=t,!(i instanceof as))if(i instanceof k){var t=Mo.normalize(this.props.style),o=Object.keys(t);Ls(i.style,t,o),Ls(i.currentStyle,t,o),Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),i.listener[t]=e)})}else if(!(i instanceof n))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),r.on(t,e))}),(this.__shadow=i).__host=this;i instanceof n;)i.__hostRoot=this,i=(i.shadow.__host=i).shadow;((this.__shadowRoot=i).__hostRoot=this).__isMounted||(this.__isMounted=!0,Cs(this.componentDidMount)&&e.once(Ss.REFRESH,function(){r.componentDidMount()}))}},{key:"render",value:function(){De.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,Cs(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof as))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return Ds}},{key:"getRegister",value:function(t){if(!t||!xt.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!Ds.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return Ds[t]}},{key:"register",value:function(t,e){if(!(t&&xt.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof n))throw new Error("Invalid param: Component register");if(n.hasRegister(t))throw new Error("Component has already register: ".concat(t));Ds[t]=e}},{key:"hasRegister",value:function(t){return t&&Ds.hasOwnProperty(t)}},{key:"delRegister",value:function(t){n.hasRegister(t)&&delete Ds[t]}}]),n}(),e=(Object.keys(wr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseLine","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach(function(e){Object.defineProperty(Ns.prototype,e,{get:function(){var t=this.shadowRoot;if(t)return t[e]}})}),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach(function(e){Ns.prototype[e]=function(){var t=this.shadowRoot;if(t&&Cs(t[e]))return t[e].apply(t,arguments)}}),A.STYLE_KEY),Ps=e.SCALE_X,Fs=e.SCALE_Y,Bs=r.PERCENT,Ys=r.NUMBER;var Hs={matrixResize:function(t,e,r,i,o,n,a,s){if(t!==r||e!==i)return r=[[Ps,[r/t,Ys]],[Fs,[i/e,Ys]]],(t=la.calOrigin([[0,Bs],[0,Bs]],a,s))[0]+=o,t[1]+=n,la.calMatrixWithOrigin(r,t,a,s)}},a=A.STYLE_KEY,Gs=a.BACKGROUND_POSITION_X,Ws=a.BACKGROUND_POSITION_Y,Us=a.FONT_SIZE,Xs=A.NODE_KEY.NODE_DEFS_CACHE,Vs=xt.clone,Ks=xt.joinArr,zs=yt.canvasPolygon,js=yt.svgPolygon,$s=r.AUTO,Zs=r.PX,qs=r.PERCENT,Js=r.STRING,Qs=r.REM,th=r.VW,eh=r.VH,rh=r.VMAX,ih=r.VMIN;function oh(t,e,r,i,o,n,a,l,c,u,s,_,f){var d,p,h,g,m=13<arguments.length&&void 0!==arguments[13]?arguments[13]:"fill",v=14<arguments.length&&void 0!==arguments[14]&&arguments[14],y=15<arguments.length&&void 0!==arguments[15]?arguments[15]:0,x=16<arguments.length&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(h=i[1],d=i[2],p=i[3],i=i[0]),o=(o=o||$t.calRadius(n,a,l,c,u,s,_,f))||[[n,a],[n+l,a],[n+l,a+c],[n,a+c],[n,a]],h&&(h=la.calMatrixByOrigin(h,[d,p]),g=qt.inverse(h),o=o.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var o=qt.calPoint([t[r],t[r+1]],g);e.push(o[0]),e.push(o[1])}return e})),e===et.CANVAS||e===et.WEBGL)h&&(r.save(),u=t.matrixEvent,h=qt.multiply(u,h),r.setTransform(h[0],h[1],h[4],h[5],h[12],h[13])),r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),zs(r,o,y,x),r[m](),r.closePath(),h&&r.restore();else if(e===et.SVG){s=js(o);if(v)return t.__config[Xs].push(_={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",s],["fill",i]]}]}),r.add(_);t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",i]]}),h&&(f=t.virtualDom.bb)[f.length-1].props.push(["transform","matrix(".concat(Ks(qt.m2m6(h),","),")")])}}function nh(t,e,r,i){if(Array.isArray(t)){if(t[1]===Zs)return t[0];if(t[1]===qs)return(e-r)*t[0]*.01;if(t[1]===Qs)return t[0]*i.computedStyle[Us];if(t[1]===th)return t[0]*i.width*.01;if(t[1]===eh)return t[0]*i.height*.01;if(t[1]===rh)return t[0]*Math.max(i.width,i.height)*.01;if(t[1]===ih)return t[0]*Math.min(i.width,i.height)*.01}return 0}var ah,sh={renderBgc:oh,renderImage:function(c,u,_,f,d,p,g,m,v,y,x,E,t,b,M,T,A,R){var O=18<arguments.length&&void 0!==arguments[18]?arguments[18]:0,e=19<arguments.length&&void 0!==arguments[19]?arguments[19]:0,w=f.source;if(w){var i=(g+=O)-(d+=O),o=(m+=e)-(p+=e),n=f.width,a=f.height,O=Zt(M[b]||[],2),s=O[0],h=O[1],r=(-1===s&&-1===h?(s=n,h=a):-2===s?i<n&&o<a?(h=a/o)<=(s=n/i)?h=(s=i)*a/n:s=(h=o)*n/a:i<n?h=(s=i)*a/n:o<a?s=(h=o)*n/a:(s=n,h=a):-3===s?n<i&&a<o?(s=n/i)<=(h=a/o)?h=(s=i)*a/n:s=(h=o)*n/a:n<i||!(a<o)&&(s=n/i)<=(h=a/o)?h=(s=i)*a/n:s=(h=o)*n/a:-1===s?s=h*n/a:-1===h&&(h=s*a/n),d+nh(t[Gs][b],i,s,c.root)),l=p+nh(t[Ws][b],o,h,c.root),S=r<d||l<p||d+i<r+s||p+o<l+h,I=0,C=0,k=0,L=0,D=(-1<["repeat-x","repeatX","repeat"].indexOf(T[b])&&(0<(e=r-d)&&(I=Math.ceil(e/s)),0<(e=d+i-r-s)&&(C=Math.ceil(e/s))),-1<["repeat-y","repeatY","repeat"].indexOf(T[b])&&(0<(M=l-p)&&(k=Math.ceil(M/h)),0<(M=p+o-l-h)&&(L=Math.ceil(M/h))),[]);if(0<I)for(var N=0;N<I;N++){var P=r-(N+1)*s;D.push([P,l]),!S&&0===N&&P<d&&(S=!0)}if(0<C)for(var F=0;F<C;F++){var B=r+(F+1)*s;D.push([B,l]),!S&&F===C-1&&d+i<B+s&&(S=!0)}if(0<k)for(var Y=0;Y<k;Y++){var H=l-(Y+1)*h;D.push([r,H]),!S&&0===Y&&H<p&&(S=!0)}if(0<L)for(var G=0;G<L;G++){var W=l+(G+1)*h;D.push([r,W]),!S&&G===L-1&&p+o<W+s&&(S=!0)}if(0<I&&0<k)for(var U=0;U<I;U++)for(var X=0;X<k;X++)D.push([r-(U+1)*s,l-(X+1)*h]);if(0<C&&0<k)for(var V=0;V<C;V++)for(var K=0;K<k;K++)D.push([r+(V+1)*s,l-(K+1)*h]);if(0<I&&0<L)for(var z=0;z<I;z++)for(var j=0;j<L;j++)D.push([r-(z+1)*s,l+(j+1)*h]);if(0<C&&0<L)for(var $=0;$<C;$++)for(var Z=0;Z<L;Z++)D.push([r+($+1)*s,l+(Z+1)*h]);if(u===et.CANVAS||u===et.WEBGL)S&&(_.save(),oh(this,u,_,"#FFF",null,d,p,i,o,v,y,x,E,"clip")),_.drawImage(w,r,l,s,h),D.forEach(function(t){_.drawImage(w,t[0],t[1],s,h)}),S&&_.restore();else if(u===et.SVG){var q,J,O=Hs.matrixResize(n,a,s,h,r,l,i,o),Q=[["xlink:href",f.url],["x",r],["y",l],["width",n],["height",a]];if(O&&!qt.isE(O)&&(q=!0,Q.push(["transform","matrix("+Ks(qt.m2m6(O),",")+")"])),S&&(t=[d,p],e=[g,m],q&&(T=qt.inverse(O),t=qt.calPoint(t,T),e=qt.calPoint(e,T)),b={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(t[0],",").concat(t[1],"L").concat(e[0],",").concat(t[1],"L").concat(e[0],",").concat(e[1],"L").concat(t[0],",").concat(e[1],"L").concat(t[0],",").concat(t[1])],["fill","#FFF"]]}]},M=_.add(b),A[Xs].push(b),Q.push(["clip-path","url(#"+M+")"])),R)return J={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:Q}]},c.__config[Xs].push(J),D.forEach(function(t){var e,r=Vs(Q);!q||(e=Hs.matrixResize(n,a,s,h,t[0],t[1],i,o))&&!qt.isE(e)&&(r[5][1]="matrix("+Ks(qt.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],J.children.push({type:"img",tagName:"image",props:r})}),_.add(J);c.virtualDom.bb.push({type:"img",tagName:"image",props:Q}),D.forEach(function(t){var e,r=Vs(Q);!q||(e=Hs.matrixResize(n,a,s,h,t[0],t[1],i,o))&&!qt.isE(e)&&(r[5][1]="matrix("+Ks(qt.m2m6(e),",")+")"),r[1][1]=t[0],r[2][1]=t[1],c.virtualDom.bb.push({type:"img",tagName:"image",props:r})})}}},calBackgroundSize:function(t,r,i,o){var n=[];return t.forEach(function(t,e){t[1]===Zs?n.push(t[0]):t[1]===qs?n.push(t[0]*(e?i:r)*.01):t[1]===Qs?n.push(t[0]*o.computedStyle[Us]):t[1]===th?n.push(t[0]*o.width*.01):t[1]===eh?n.push(t[0]*o.height*.01):t[1]===rh?n.push(t[0]*Math.max(o.width,o.height)*.01):t[1]===ih?n.push(t[0]*Math.min(o.width,o.height)*.01):t[1]===$s?n.push(-1):t[1]===Js&&n.push("contain"===t[0]?-2:-3)}),n}},hh=xt.isFunction;function lh(t,e,r,i){if(i)for(var o=0;o<e;o++){var n=t[o];n[1]?n[1](r):n.__after&&n.__after(r)}else for(var a=0;a<e;a++){var s=t[a];s[0]?s[0](r):s.__before&&s.__before(r)}}var ch=new(function(){function t(){f(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return g(t,[{key:"__init",value:function(){var c=this,u=c.task,_=c.taskCp,f=(De.cancelAnimationFrame(c.id),c.__now=De.now());!function l(){De.cancelAnimationFrame(c.id),c.id=De.requestAnimationFrame(function(){if(!ah&&(u.length||_.length)){var t=(e=c.__now=De.now())-f,t=Math.max(t,0);f=e;for(var e=u.slice(0),r=_.splice(0),i=e.length,o=r.length,n=(lh(e,i,t,!1),lh(r,o,t,!1),c.__hookTask.splice(0)),a=0,s=n.length;a<s;a++){var h=n[a];h&&h()}lh(e,i,t,!0),lh(r,o,t,!0),(u.length||_.length)&&l()}})}()}},{key:"onFrame",value:function(t){var e;t&&((e=this.task).length||this.__init(),hh(t)&&(t={__after:t,__karasFramecb:t}),e.push(t))}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var o=e[r];if(o===t||o.__karasFramecb===t){e.splice(r,1);break}}e.length||(De.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(e){var r,i=this;e&&((r=hh(e)?{__after:function(t){e(t),i.offFrame(r)}}:{__before:e.__before,__after:function(t){e.__after&&e.__after(t),i.offFrame(r)}}).__karasFramecb=e,this.onFrame(r))}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){ah=!0}},{key:"resume",value:function(){ah&&(this.__init(),ah=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}()),uh=4,_h=1e-7,fh=10,dh="function"==typeof Float32Array;function ph(t,e){return 1-3*e+3*t}function gh(t,e,r){return((ph(e,r)*t+(3*r-6*e))*t+3*e)*t}function mh(t,e,r){return 3*ph(e,r)*t*t+2*(3*r-6*e)*t+3*e}function vh(t){return t}function yh(y,e,x,r){if(!(0<=y&&y<=1&&0<=x&&x<=1))throw new Error("bezier x values must be in [0, 1] range");if(y===e&&x===r)return vh;for(var E=new(dh?Float32Array:Array)(11),t=0;t<11;++t)E[t]=gh(.1*t,y,x);function i(t){for(var e=0,r=1;10!==r&&E[r]<=t;++r)e+=.1;var i=e+.1*((t-E[--r])/(E[r+1]-E[r])),o=mh(i,y,x);if(.001<=o){for(var c=t,n=i,a=y,s=x,u=0;u<uh;++u){var _=mh(n,a,s);if(0===_)return n;n-=(gh(n,a,s)-c)/_}return n}if(0===o)return i;for(var f,h,d=t,l=e,p=e+.1,g=y,m=x,v=0;0<(f=gh(h=l+(p-l)/2,g,m)-d)?p=h:l=h,Math.abs(f)>_h&&++v<fh;);return h}return function(t){return 0===t||1===t?t:gh(i(t),e,r)}}var xh={linear:yh(1,1,0,0),easeIn:yh(.42,0,1,1),easeOut:yh(0,0,.58,1),ease:yh(.25,.1,.25,1),easeInOut:yh(.42,0,.58,1),cubicBezier:yh,getEasing:function(t,e,r,i){return 4===arguments.length?yh(t,e,r,i):Array.isArray(t)&&4===t.length?yh(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?o=yh((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(o=this[t]),o):void 0;var o}},i=(xh["ease-in"]=xh.easeIn,xh["ease-out"]=xh.easeOut,xh["ease-in-out"]=xh.easeInOut,A.STYLE_KEY),Eh=i.FILTER,bh=i.TRANSFORM_ORIGIN,Mh=i.PERSPECTIVE_ORIGIN,Th=i.BACKGROUND_CLIP,Ah=i.BACKGROUND_POSITION_X,Rh=i.BACKGROUND_POSITION_Y,Oh=i.BOX_SHADOW,wh=i.TRANSLATE_X,Sh=i.TRANSLATE_Y,Ih=i.TRANSLATE_Z,Ch=i.BACKGROUND_SIZE,kh=i.FONT_SIZE,Lh=i.FLEX_BASIS,Dh=i.FLEX_DIRECTION,Nh=i.WIDTH,Ph=i.HEIGHT,Fh=i.TOP,Bh=i.BOTTOM,Yh=i.LINE_HEIGHT,Hh=i.OPACITY,Gh=i.Z_INDEX,Wh=i.TRANSFORM,Uh=i.COLOR,Xh=i.FONT_WEIGHT,Vh=i.FONT_STYLE,Kh=i.FONT_FAMILY,zh=i.TEXT_ALIGN,jh=i.MATRIX,$h=i.ROTATE_3D,Zh=i.TRANSLATE_PATH,qh=i.TEXT_STROKE_COLOR,Jh=i.TEXT_STROKE_OVER,s=A.UPDATE_KEY,Qh=s.UPDATE_NODE,tl=s.UPDATE_STYLE,el=s.UPDATE_KEYS,rl=s.UPDATE_CONFIG,ki=A.KEY_FRAME_KEY,il=ki.FRAME_STYLE,ol=ki.FRAME_TIME,nl=ki.FRAME_EASING,al=ki.FRAME_TRANSITION,Ur=A.ANIMATE_KEY,sl=Ur.I_ASSIGNING,hl=Ur.I_IN_FPS,ll=Ur.I_IS_DELAY,cl=Ur.I_BEGIN,ul=Ur.I_END,_l=Ur.I_FINISHED,fl=Ur.I_NEXT_END,dl=Ur.I_FIRST_PLAY,pl=Ur.I_PLAY_CB,gl=Ur.I_TARGET,ml=Ur.I_ROOT,vl=Ur.I_FRAMES,yl=Ur.I_FRAMES_R,xl=Ur.I_CURRENT_TIME,El=Ur.I_NEXT_TIME,bl=Ur.I_STYLE,Ml=Ur.I_DURATION,Tl=Ur.I_ITERATIONS,Al=Ur.I_FILL,Rl=Ur.I_PLAYBACK_RATE,Ol=Ur.I_PLAY_COUNT,wl=Ur.I_PLAY_STATE,Sl=Ur.I_DESTROYED,Il=Ur.I_START_TIME,Cl=Ur.I_FPS_TIME,kl=Ur.I_EASING,Ll=Ur.I_ENTER_FRAME,Dl=Ur.I_DELAY,Nl=Ur.I_END_DELAY,Pl=Ur.I_KEYS,Fl=Ur.I_ORIGIN_STYLE,Bl=Ur.I_CURRENT_FRAMES,Yl=Ur.I_CURRENT_FRAME,Hl=Ur.I_SPF_LIMIT,Gl=Ur.I_FPS,Wl=Ur.I_DIRECTION,Ul=Ur.I_FIRST_ENTER,Xl=Ur.I_STAY_BEGIN,Vl=Ur.I_STAY_END,Kl=Ur.I_IS2,zl=Ur.I_END_TIME,jl=Ur.I_NODE_CONFIG,$l=Ur.I_ROOT_CONFIG,Zl=Ur.I_OUT_BEGIN_DELAY,ql=Ur.I_TIME_STAMP,Jl=r.AUTO,Ql=r.PX,tc=r.PERCENT,ec=r.INHERIT,rc=r.RGBA,ic=r.STRING,oc=r.NUMBER,nc=r.REM,ac=r.VW,sc=r.VH,hc=r.VMAX,lc=r.VMIN,cc=r.calUnit,uc=xt.isNil,_c=xt.isFunction,fc=xt.isNumber,dc=xt.isObject,pc=xt.isString,gc=xt.clone,mc=xt.equalArr,vc=xh.linear,yc=Mo.cloneStyle,xc=wr.isGeom,Ec=wr.GEOM,bc=re.COLOR_HASH,Mc=re.LENGTH_HASH,Tc=re.RADIUS_HASH,Ac=re.GRADIENT_HASH,Rc=re.EXPAND_HASH,Oc=re.GRADIENT_TYPE,wc={};function Sc(t,e,r,i,o){var n={};n[Qh]=o,n[tl]=t,n[el]=e,n[rl]=r[jl],i.__addUpdate(o,r[jl],i,r[$l],n),r[bl]=t,r[sl]=!0,i.__frameHook()}function Ic(t,e,r,i){return t[1]===Ql?e[1]===tc?.01*e[0]*r-t[0]:e[1]===nc?e[0]*i.computedStyle[kh]-t[0]:e[1]===ac?e[0]*i.width*.01-t[0]:e[1]===sc?e[0]*i.height*.01-t[0]:e[1]===hc?e[0]*Math.max(i.width,i.height)*.01-t[0]:e[1]===lc?e[0]*Math.min(i.width,i.height)*.01-t[0]:void 0:t[1]===tc?e[1]===Ql?100*e[0]/r-t[0]:e[1]===nc?e[0]*i.computedStyle[kh]*100/r-t[0]:e[1]===ac?e[0]*i.width/r-t[0]:e[1]===sc?e[0]*i.height/r-t[0]:e[1]===hc?e[0]*Math.max(i.width,i.height)/r-t[0]:e[1]===lc?e[0]*Math.min(i.width,i.height)/r-t[0]:void 0:t[1]===nc?e[1]===Ql?e[0]/i.computedStyle[kh]-t[0]:e[1]===tc?.01*e[0]*r/i.computedStyle[kh]-t[0]:e[1]===ac?e[0]*i.width*.01/i.computedStyle[kh]-t[0]:e[1]===sc?e[0]*i.height*.01/i.computedStyle[kh]-t[0]:e[1]===hc?e[0]*Math.max(i.width,i.height)*.01/i.computedStyle[kh]-t[0]:e[1]===lc?e[0]*Math.min(i.width,i.height)*.01/i.computedStyle[kh]-t[0]:void 0:t[1]===ac?e[1]===Ql?100*e[0]/i.width-t[0]:e[1]===nc?100*e[0]*i.computedStyle[kh]/i.width-t[0]:e[1]===tc?e[0]*r/i.width-t[0]:e[1]===sc?e[0]*i.height/i.width-t[0]:e[1]===hc?e[0]*Math.max(i.width,i.height)/i.width-t[0]:e[1]===lc?e[0]*Math.min(i.width,i.height)/i.width-t[0]:void 0:t[1]===sc?e[1]===Ql?100*e[0]/i.height-t[0]:e[1]===nc?100*e[0]*i.computedStyle[kh]/i.height-t[0]:e[1]===ac?e[0]*i.width/i.height-t[0]:e[1]===tc?e[0]*r/i.height-t[0]:e[1]===hc?e[0]*Math.max(i.width,i.height)/i.height-t[0]:e[1]===lc?e[0]*Math.min(i.width,i.height)/i.height-t[0]:void 0:t[1]===hc?e[1]===Ql?100*e[0]/Math.max(i.width,i.height)-t[0]:e[1]===nc?100*e[0]*i.computedStyle[kh]/Math.max(i.width,i.height)-t[0]:e[1]===tc?e[0]*r/Math.max(i.width,i.height)-t[0]:e[1]===ac?e[0]*i.width/Math.max(i.width,i.height)-t[0]:e[1]===sc?e[0]*i.height/Math.max(i.width,i.height)-t[0]:e[1]===lc?e[0]*Math.min(i.width,i.height)/Math.max(i.width,i.height)-t[0]:void 0:t[1]===lc?e[1]===Ql?100*e[0]/Math.min(i.width,i.height)-t[0]:e[1]===nc?100*e[0]*i.computedStyle[kh]/Math.min(i.width,i.height)-t[0]:e[1]===tc?e[0]*r/Math.min(i.width,i.height)-t[0]:e[1]===ac?e[0]*i.width/Math.min(i.width,i.height)-t[0]:e[1]===sc?e[0]*i.height/Math.min(i.width,i.height)-t[0]:e[1]===hc?e[0]*Math.max(i.width,i.height)/Math.min(i.width,i.height)-t[0]:void 0:void 0}function Cc(e,r,t,i,o){return t.forEach(function(t){t=function(t,e,r,i,c){var o=[r],n=t[r],a=e[r];if(r===Wh){if(!n&&!a)return;t=n?n[0][1]:qt.identity(),e=a?a[0][1]:qt.identity();return mc(t,e)?void 0:(o[1]=[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7],e[8]-t[8],e[9]-t[9],e[10]-t[10],e[11]-t[11],e[12]-t[12],e[13]-t[13],e[14]-t[14],e[15]-t[15]],o)}if(r===$h){if(mc(n,a))return;o[1]=[a[0]-a[0],a[1]-n[1],a[2]-n[2],[a[3][0]-n[3][0],a[3][1]]]}else if(r===Eh){var u,_={},f={},d={},p=(n&&n.forEach(function(t){d[t[0]]=!0,_[t[0]]=t[1]}),a&&a.forEach(function(t){d[t[0]]=!0,f[t[0]]=t[1]}),{});if(Object.keys(d).forEach(function(t){var e,r;"blur"===t?u=(_[t]?f[t]?(e=Ic(_[t],f[t],0,i.root),p[t]=[e,_[t][1]]):p[t]=[-_[t][0],_[t][1]]:p[t]=f[t].slice(0),!0):"hue-rotate"===t?(e=uc(f[t])?0:f[t][0],(r=uc(_[t])?0:_[t][0])!==e&&(p[t]=[e-r,tc],u=!0)):"saturate"===t||"brightness"===t||"contrast"===t||"sepia"===t||"invert"===t?(e=uc(f[t])?100:f[t][0],(r=uc(_[t])?100:_[t][0])!==e&&(p[t]=[e-r,tc],u=!0)):"grayscale"===t&&(e=uc(f[t])?0:f[t][0],(r=uc(_[t])?0:_[t][0])!==e&&(p[t]=[e-r,tc],u=!0))}),!u)return;o[1]=p}else if(r===bh||r===Mh){o[1]=[];for(var g=0;g<2;g++){var m=n[g],v=a[g];m[1]===v[1]?o[1].push(v[0]-m[0]):(m=Ic(m,v,i[g?"outerHeight":"outerWidth"],i.root),o[1].push(m||0))}if(mc(o[1],[0,0]))return}else if(r===Ah||r===Rh){o[1]=[];for(var y=Math.min(n.length,a.length),x=0;x<y;x++){var E=n[x],b=a[x];if(E&&b)if(E[1]===b[1]){var M=b[0]-E[0];if(!M)return void o[1].push(null);o[1].push(M)}else{M=r===Ah?"offsetWidth":"offsetHeight",E=(-1<["padding-box","paddingBox"].indexOf(i.computedStyle[Th])?M=r===Ah?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[Th])&&(M=r===Ah?"width":"height"),Ic(E,b,i[M],i.root));if(!E)return void o[1].push(null);o[1].push(E)}else o[1].push(null)}}else if(r===Oh){o[1]=[];for(var T=0,A=Math.min(n.length,a.length);T<A;T++){for(var R=n[T],O=a[T],w=[],S=0;S<4;S++)w.push(O[S]-R[S]);for(var I=[],C=0;C<4;C++)I.push(O[4][C]-R[4][C]);w.push(I),o[1].push(w)}}else if(Rc.hasOwnProperty(r))if(n[1]===a[1]){e=a[0]-n[0];if(0==e)return;o[1]=e}else{t=Ic(n,a,i[r===wh||r===Ih?"outerWidth":"outerHeight"],i.root);if(!t)return;o[1]=t}else if(r===Ch){o[1]=[];for(var k,L=Math.min(n.length,a.length),D=0;D<L;D++){var N=n[D],P=a[D];if(N&&P){for(var F=[],B=0;B<2;B++){var Y,H=N[B],G=P[B];H[1]===G[1]?F.push(G[0]-H[0]):(Y=D?"offsetWidth":"offsetHeight",-1<["padding-box","paddingBox"].indexOf(i.computedStyle[Th])?Y=D?"clientWidth":"clientHeight":-1<["content-box","contentBox"].indexOf(i.computedStyle[Th])&&(Y=D?"width":"height"),H=Ic(H,G,i[Y],i.root),F.push(H||0))}mc(F,[0,0])?o[1].push(null):(o[1].push(F),k=!0)}else o[1].push(null)}if(!k)return}else if(Ac.hasOwnProperty(r)){o[1]=[];for(var W=Math.min(n.length,a.length),U=0;U<W;U++){var s=n[U],h=a[U];if(s&&h&&!pc(s)&&!pc(h))if(s.k===h.k){var l=[];if("linear"===s.k||"radial"===s.k||"conic"===s.k){for(var X=s.v,V=h.v,K=(l[0]=[],i.clientWidth),z=mc(X,V),j=0,$=Math.min(X.length,V.length);j<$;j++){var Z=X[j],q=V[j],J=[];J.push([q[0][0]-Z[0][0],q[0][1]-Z[0][1],q[0][2]-Z[0][2],q[0][3]-Z[0][3]]),Z[1]&&q[1]&&(Z[1][1]===q[1][1]?J.push(q[1][0]-Z[1][0]):(Z=Ic(Z[1],q[1],K,i.root),J.push(Z||0))),l[0].push(J)}if("linear"===s.k){var Q=Array.isArray(s.d);if(Array.isArray(h.d)!==Q){o[1].push(null);continue}if(Q){Q=[h.d[0]-s.d[0],h.d[1]-s.d[1],h.d[2]-s.d[2],h.d[3]-s.d[3]];if(z&&mc(Q,[0,0,0,0])){o[1].push(null);continue}l[1]=Q}else{Q=h.d-s.d;if(z&&0==Q){o[1].push(null);continue}l[1]=Q}}else if("radial"===s.k){Q=Array.isArray(s.z);if(Array.isArray(h.z)!==Q){o[1].push(null);continue}if(Q){l[2]=[];for(var tt=0;tt<5;tt++){var et=s.z[tt],rt=(void 0===et&&(et=1),h.z[tt]);void 0===rt&&(rt=1),l[2].push(rt-et)}z&&mc(o[4],[0,0,0,0,0])&&o[1].push(null)}else{l[2]=[];for(var it=0;it<2;it++){var ot=s.p[it],nt=h.p[it];ot[1]===nt[1]?l[2].push(nt[0]-ot[0]):(ot=Ic(ot,nt,i[it?"clientWidth":"clientHeight"],i.root),l[2].push(ot||0))}z&&mc(o[3],[0,0])&&o[1].push(null)}}else if("conic"===s.k){l[1].push(a.d-n.d),l[2]=[];for(var at=0;at<2;at++){var st=n.p[at],ht=a.p[at];st[1]===ht[1]?l[2].push(ht[0]-st[0]):(st=Ic(st,ht,i[at?"clientWidth":"clientHeight"],i.root),l[2].push(st||0))}z&&0!==o[2]&&mc(o[3],[0,0])&&o[1].push(null)}}else mc(a,s)&&o[1].push(null),l[0]=[h[0]-s[0],h[1]-s[1],h[2]-s[2],h[3]-s[3]];o[1].push(l)}else o[1].push(null);else o[1].push(null)}}else if(bc.hasOwnProperty(r)){if(a=a[0],n=n[0],mc(a,n)||0===a[3]&&0===n[3])return;o[1]=[a[0]-n[0],a[1]-n[1],a[2]-n[2],a[3]-n[3]]}else if(Tc.hasOwnProperty(r)){if(a[0][0]===n[0][0]&&a[0][1]===n[0][1]&&a[1][0]===n[1][0]&&a[1][1]===n[1][1])return;o[1]=[];for(var lt,ct=0;ct<2;ct++)a[ct][1]===n[ct][1]?o[1].push(a[ct][0]-n[ct][0]):(lt=Ic(n[ct],a[ct],i[ct?"outerHeight":"outerWidth"],i.root),o[1].push(lt||0))}else if(Mc.hasOwnProperty(r)){if(n[1]===Jl||a[1]===Jl)return;var e=i.computedStyle,t=(i.domParent||i).computedStyle,ut=0;if(n[1]===a[1]?ut=a[0]-n[0]:r===Yh?ut=Ic(n,a,e[kh],i.root):r===kh?ut=Ic(n,a,t[kh],i.root):r===Lh&&-1<["column","column-reverse","columnReverse"].indexOf(e[Dh])||-1<[Ph,Fh,Bh].indexOf(r)?n[1]!==Jl&&a[1]!==Jl&&(ut=Ic(n,a,t[Ph],i.root)):n[1]!==Jl&&a[1]!==Jl&&(ut=Ic(n,a,t[Nh],i.root)),0===ut||isNaN(ut))return;o[1]=ut}else if(Ec.hasOwnProperty(r)){if(uc(n))return;if(Ec[r][c]&&_c(Ec[r][c].calDiff)){var _t=Ec[r][c].calDiff;if(i.isMulti){for(var ft=[],dt=0,pt=Math.min(n.length,a.length);dt<pt;dt++)ft.push(_t(n[dt],a[dt]));return ft}o[1]=_t(n,a)}else if(i.isMulti)if("points"===r||"controls"===r){if(uc(a)||!a.length||uc(n)||!n.length||mc(n,a))return;o[1]=[];for(var gt=0,mt=Math.min(n.length,a.length);gt<mt;gt++){var vt=n[gt],yt=a[gt];if(uc(vt)||!vt.length||uc(yt)||!yt.length)o[1].push(null);else{for(var xt=[],Et=0,bt=Math.min(vt.length,yt.length);Et<bt;Et++){var Mt=vt[Et],Tt=yt[Et];if(uc(Mt)||uc(Tt))xt.push(null);else{for(var At=[],Rt=0,Ot=Math.max(Mt.length,Tt.length);Rt<Ot;Rt++){var wt=Mt[Rt],St=Tt[Rt];uc(wt)||uc(St)?At.push(0):At.push(St-wt)}xt.push(At)}}o[1].push(xt)}}}else if("controlA"===r||"controlB"===r){if(uc(a)||!a.length||uc(n)||!n.length||mc(n,a))return;o[1]=[];for(var It=0,Ct=Math.min(n.length,a.length);It<Ct;It++){var kt=n[It],Lt=a[It];uc(kt)||!kt.length||uc(Lt)||!Lt.length?o[1].push(null):o[1].push([Lt[0]-kt[0],Lt[1]-kt[1]])}}else{if(a===n||mc(a,n)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var Dt=[],Nt=0,Pt=Math.min(n.length,a.length);Nt<Pt;Nt++){var Ft=n[Nt],Bt=a[Nt];(uc(Ft)||uc(Bt))&&Dt.push(0),Dt.push(Bt-Ft)}o[1]=Dt}else if("points"===r||"controls"===r){if(uc(a)||!a.length||uc(n)||!n.length||mc(n,a))return;o[1]=[];for(var Yt=0,Ht=Math.min(n.length,a.length);Yt<Ht;Yt++){var Gt=n[Yt],Wt=a[Yt];if(uc(Gt)||!Gt.length||uc(Wt)||!Wt.length)o[1].push(null);else{for(var Ut=[],Xt=0,Vt=Math.max(Gt.length,Wt.length);Xt<Vt;Xt++){var Kt=Gt[Xt],zt=Wt[Xt];uc(Kt)||uc(zt)?Ut.push(0):Ut.push(zt-Kt)}o[1].push(Ut)}}}else if("controlA"===r||"controlB"===r){if(uc(a)||!a.length||uc(n)||!n.length||mc(n,a))return;o[1]=[a[0]-n[0],a[1]-n[1]]}else{if(a===n||"edge"===r||"closure"===r||"booleanOperations"===r)return;o[1]=a-n}}else if(r===Hh||r===Gh){if(a===n)return;o[1]=a-n}else{if(r!==Zh||!n)return;var jt="offsetWidth",$t="offsetHeight";-1<["padding-box","paddingBox"].indexOf(i.computedStyle[Th])?(jt="clientWidth",$t="clientHeight"):-1<["content-box","contentBox"].indexOf(i.computedStyle[Th])&&(jt="width",$t="height"),o[1]=n.map(function(t,e){var t=Zt(t,2),r=t[0],t=t[1];return t===tc?e%2==0?[.01*(parseFloat(r)||0)*i[jt],Ql]:[.01*(parseFloat(r)||0)*i[$t],Ql]:t===nc?[(parseFloat(r)||0)*root.computedStyle[kh]*100,Ql]:t===ac?[.01*(parseFloat(r)||0)*root.width,Ql]:t===sc?[.01*(parseFloat(r)||0)*root.height,Ql]:t===hc?[.01*(parseFloat(r)||0)*Math.max(root.width,root.height),Ql]:t===lc?[.01*(parseFloat(r)||0)*Math.min(root.width,root.height),Ql]:[parseFloat(r)||0,Ql]})}return o}(e[il],r[il],t,i,o);t&&e[al].push(t)}),r}function kc(t,e,S,I){for(var r,i,o,C=yc(t[il],e),k=(e=t[nl],o=e?(o=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(e))?(r=parseInt(o[1]),i=o[2],function(t){var e;return r&&0<r?(e=1/r,("start"===i?Math.ceil(t/e):Math.floor(t/e))/r):t}):xh.getEasing(e):o,o&&o!==vc&&(S=o(S)),t[al]),n=0,a=k.length;n<a;n++)!function(t){var t=Zt(k[t],2),e=t[0],l=t[1],r=C[e];if(e===Wh)for(var r=r||(C[e]=[[jh,qt.identity()]]),i=0;i<16;i++)r[0][1][i]+=l[i]*S;else if(e===Zh){t=1-S;8===l.length?(C[wh]=[l[0][0]*t*t*t+3*l[2][0]*S*t*t+3*l[4][0]*S*S*t+l[6][0]*S*S*S,Ql],C[Sh]=[l[1][0]*t*t*t+3*l[3][0]*S*t*t+3*l[5][0]*S*S*t+l[7][0]*S*S*S,Ql]):6===l.length&&(C[wh]=[l[0][0]*t*t+2*l[2][0]*S*t+l[4][0]*S*S,Ql],C[Sh]=[l[1][0]*t*t+3*l[3][0]*S*t+l[5][0]*S*S,Ql])}else if(e===$h)r[0]+=l[0]*S,r[1]+=l[1]*S,r[2]+=l[2]*S,r[3][0]+=l[3][0]*S;else if(wc.hasOwnProperty(e))l&&(r[0]+=l*S);else if(e===Eh){r=r||(C[e]=[]);var c={};r.forEach(function(t){c[t[0]]=t[1]}),Object.keys(l).forEach(function(t){var e;c.hasOwnProperty(t)?c[t][0]+=l[t][0]*S:"blur"===t||"hue-rotate"===t||"grayscale"===t?((e=l[t].slice(0))[0]*=S,r.push([t,e])):"saturate"!==t&&"brightness"!==t&&"contrast"!==t&&"sepia"!==t&&"invert"!==t||((e=l[t].slice(0))[0]=100+e[0]*S,r.push([t,e]))})}else if(Tc.hasOwnProperty(e))for(var o=0;o<2;o++)r[o][0]+=l[o]*S;else if(e===bh||e===Mh)0!==l[0]&&(r[0][0]+=l[0]*S),0!==l[1]&&(r[1][0]+=l[1]*S);else if(e===Oh)for(var n=0,u=Math.min(r.length,l.length);n<u;n++){for(var _=0;_<4;_++)r[n][_]+=l[n][_]*S;for(var f=0;f<4;f++)r[n][4][f]+=l[n][4][f]*S}else if(e===Ch)r.forEach(function(t,e){l[e]&&(t[0][0]+=l[e][0]*S,t[1][0]+=l[e][1]*S)});else if(e===Ah||e===Rh)r.forEach(function(t,e){l[e]&&(t[0]+=l[e]*S)});else if(Ac.hasOwnProperty(e))r.forEach(function(t,e){e=l[e];if(e){var e=Zt(e,4),r=e[0],i=e[1],o=e[2],e=e[3];if(Oc.hasOwnProperty(t.k)){for(var n=0,a=Math.min(t.v.length,r.length);n<a;n++){var s=t.v[n],h=r[n];s[0][0]+=h[0][0]*S,s[0][1]+=h[0][1]*S,s[0][2]+=h[0][2]*S,s[0][3]+=h[0][3]*S,s[1]&&h[1]&&(s[1][0]+=h[1]*S)}"linear"===t.k&&void 0!==t.d&&void 0!==i&&(Array.isArray(i)?(t.d[0]+=i[0]*S,t.d[1]+=i[1]*S,t.d[2]+=i[2]*S,t.d[3]+=i[3]*S):t.d+=i*S),"radial"===t.k?void 0!==t.z&&void 0!==e?(t.z[0]+=e[0]*S,t.z[1]+=e[1]*S,t.z[2]+=e[2]*S,t.z[3]+=e[3]*S,t.z[4]+=e[4]*S):void 0!==t.p&&void 0!==o&&(t.p[0][0]+=o[0]*S,t.p[1][0]+=o[1]*S):"conic"===t.k&&void 0!==t.d&&void 0!==i&&(t.d+=i*S,t.p[0][0]+=o[0]*S,t.p[1][0]+=o[1]*S)}else t[0]+=r[0]*S,t[1]+=r[1]*S,t[2]+=r[2]*S,t[3]+=r[3]*S}});else if(bc.hasOwnProperty(e))(r=r[0])[0]+=l[0]*S,r[1]+=l[1]*S,r[2]+=l[2]*S,r[3]+=l[3]*S;else if(Ec.hasOwnProperty(e)){var s=C[e],t=I.tagName;if(Ec[e][t]&&_c(Ec[e][t].calIncrease)){var d=Ec[e][t].calIncrease;I.isMulti?C[e]=s.map(function(t,e){return d(t,l[e],S)}):C[e]=d(s,l,S)}else if(I.isMulti)if("points"===e||"controls"===e)for(var p=0,g=Math.min(s.length,l.length);p<g;p++){var m=s[p],v=l[p];if(!uc(m)&&!uc(v))for(var y=0,x=Math.min(m.length,v.length);y<x;y++){var E=m[y],b=v[y];if(!uc(E)&&!uc(b))for(var a=0,M=Math.min(E.length,b.length);a<M;a++)uc(E[a])||uc(b[a])||(E[a]+=b[a]*S)}}else"controlA"===e||"controlB"===e?l.forEach(function(t,e){var r=s[e];if(!uc(t)&&!uc(r))for(var i=0,o=Math.min(r.length,t.length);i<o;i++){var n=r[i],a=t[i];uc(n)||uc(a)||(r[i]+=a*S)}}):l.forEach(function(t,e){uc(t)||uc(s[e])||(s[e]+=t*S)});else if("points"===e||"controls"===e)for(var T=0,A=Math.min(s.length,l.length);T<A;T++){var R=s[T],O=l[T];if(!uc(R)&&!uc(O))for(var h=0,w=Math.min(R.length,O.length);h<w;h++)uc(R[h])||uc(O[h])||(R[h]+=O[h]*S)}else"controlA"===e||"controlB"===e?(uc(s[0])||uc(l[0])||(s[0]+=l[0]*S),uc(s[1])||uc(l[1])||(s[1]+=l[1]*S)):uc(s)||uc(l)||(C[e]+=l*S)}else e!==Hh&&e!==Gh||(C[e]+=l*S,e===Hh&&(C[e]<0?C[e]=0:1<C[e]&&(C[e]=1)))}(n);return C}function Lc(t,e){return _c(t)&&(e=t,t={}),[t||{},e]}function Dc(t,e,r,i){t.emit(Ss.FRAME,r,i),e[dl]&&(e[dl]=!1,t.emit(Ss.PLAY));var o=e[pl];_c(o)&&(o.call(t,r,i),e[pl]===o&&(e[pl]=null))}Object.assign(wc,Mc),Object.assign(wc,Rc);var Nc=0,Pc=function(){p(c,Ss);var l=m(c);function c(t,o,e){f(this,c),(r=l.call(this)).__id=Nc++,o=gc(o||[]),o=Array.isArray(o)?o.filter(function(t){return t&&dc(t)}):o&&dc(o)?(n=[],Object.keys(o).forEach(function(t){var e=o[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++)(n[r]=n[r]||{offset:r/(i-1)})[t]=e[r]}),n):[],fc(e)&&(r.__options={duration:e},e=r.__options);var r,n,e=r.__options=e||{duration:0},i=t.root,i=r.__config=[!1,!1,!1,!1,!1,!1,!1,!0,null,t,i,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,e.easing,!1,0,0,null,null,null,null,!1,60,"normal",!0,!1,!1,!1,0,t.__config,i&&i.__config,!1],a=r.iterations=e.iterations,s=r.duration=e.duration,a=Zt(r.__init(o,a,s,e.easing,t),4),s=a[0],t=a[1],h=a[2],a=a[3],h=(i[vl]=s,i[yl]=t,i[Pl]=h,i[Fl]=a,2===s.length&&(i[Kl]=!0,i[zl]=s[1][ol]),parseInt(e.fps)||0);return r.fps=h=h<=0?60:h,r.spfLimit=e.spfLimit,r.delay=e.delay,r.endDelay=e.endDelay,r.playbackRate=e.playbackRate,r.fill=e.fill,r.iterations=e.iterations,r.direction=e.direction,i[Bl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(e.direction)?t:s,i[ql]=ch.__now,r[0]=r.__before,r[1]=r.__after,r}return g(c,[{key:"__init",value:function(i,c,u,_,t){if(i.length<1)return[[],[],[],{}];for(var f=t.tagName,o=0,n=i.length;o<n;o++)!function(t,e){var r=i[t];if(r.hasOwnProperty("offset")){if(r.offset=parseFloat(r.offset)||0,r.offset=Math.max(0,r.offset),r.offset=Math.min(1,r.offset),isNaN(r.offset)||r.offset<0||1<r.offset)return i.splice(t,1),o=--t,n=--e;if(r.offset<=-1)return i.splice(t,1),o=--t,n=--e}Object.keys(r).forEach(function(t){dr.hasOwnProperty(t)&&dr.toFull(r,t)}),Object.keys(r).forEach(function(t){"easing"===t||"offset"===t||wr.isValid(f,t)||delete r[t]}),o=t,n=e}(o,n);1===i.length?(i[0]=gc(i[0]),1===i[0].offset?i.unshift({offset:0}):((e=gc(i[0])).offset=1,i.push(e))):i.forEach(function(t,e){i[e]=gc(t)});var e=i[0],e=(e.hasOwnProperty("offset")&&0<e.offset?i.unshift(e={offset:0}):e.offset=0,i[i.length-1]);e.hasOwnProperty("offset")&&e.offset<1?i.push(e={offset:1}):e.offset=1;for(var r=1,d=i.length;r<d;r++)if(!(g=i[r]).hasOwnProperty("offset")){for(var p=void 0,a=r+1;a<d&&!(p=i[a]).hasOwnProperty("offset");a++);for(var g=i[r-1],m=(p.offset-g.offset)/(a-r+1),v=r;v<a;v++)i[v].offset=g.offset+m*(v+1-r);r=a}for(var y,s,h,x,E,b,l=[],M=(i.forEach(function(t){var e,r,i,o,n;l.push((e=u,r=_,i=(t=t).offset,o=(o=t).easing,delete t.offset,delete t.easing,n=t.translatePath,t=Mo.normalize(t),Array.isArray(n)&&-1<[6,8].indexOf(n.length)&&(t[Zh]=n.map(function(t){return cc(t)})),(n=[])[il]=t,n[ol]=i*e,n[nl]=o||r,n[al]=[],n))}),y=t,s={},h=[],(e=l).forEach(function(t){var e=t[il];Object.keys(e).forEach(function(t){void 0===e[t]||s.hasOwnProperty(t)||(s[t]=!0,(t=Ec.hasOwnProperty(t)?t:parseInt(t))===Zh&&(s.hasOwnProperty(wh)||h.push(wh),s.hasOwnProperty(Sh)||h.push(Sh),s[wh]=s[Sh]=!0),h.push(t))})}),e.forEach(function(t){var e=t[il];h.forEach(function(t){e.hasOwnProperty(t)&&!uc(e[t])||(Ec.hasOwnProperty(t)?e[t]=y.getProps(t):e[t]=y.currentStyle[t])})}),h),T=(x=M,b=(E=t).computedStyle,l.forEach(function(t){var o=t[il];x.forEach(function(t){var e,r,i=o[t];uc(i)||(t===Wh?(r=E.outerWidth,e=E.outerHeight,r=la.calMatrix(i,r,e),o[t]=[[jh,r]]):i[1]===ec&&(t===Uh||t===qh?o[t]=[xt.rgba2int(b[t]),rc]:Mc.hasOwnProperty(t)?o[t]=[b[t],Ql]:t===Xh?o[t]=[b[t],oc]:t!==Vh&&t!==Kh&&t!==zh&&t!==Jh||(o[t]=[b[t],ic])))})}),gc(l).reverse()),A=t.style,R=t.props,O={},w=(M.forEach(function(t){xc(f,t)&&(O[t]=R[t]),O[t]=A[t]}),l.length),S=l[0],I=1;I<w;I++)S=Cc(S,l[I],M,t,f);T.forEach(function(t){t[ol]=u-t[ol],t[al]=[]}),S=T[0];for(var C=1;C<w;C++)S=Cc(S,T[C],M,t,f);return[l,T,M,O]}},{key:"__clean",value:function(t){var e,r=this.__config,i=(this.__cancelTask(),r[El]=0,r[bl]),o=r[Pl],n=r[gl];if(t){if(r[xl]=r[Dl]+r[Ml]*r[Tl]+r[Nl],"finish"===r[wl])return;r[wl]="finish",r[Vl]||(r[bl]={},e=!0)}else{if(r[Ol]=r[xl]=0,"idle"===r[wl])return;r[wl]="idle",r[bl]={},e=!0}e&&o.forEach(function(t){Ec.hasOwnProperty(t)?n.__currentProps[t]===i[t]&&(n.__currentProps[t]=n.props[t]):n.__currentStyle[t]===i[t]&&(n.__currentStyle[t]=n.style[t])})}},{key:"play",value:function(t){var e=this.__config,r=e[Sl],i=e[Ml],o=e[wl],n=e[vl];return r||i<=0||n.length<1||"running"===o||(this.__cancelTask(),e[pl]=t,e[wl]="running",e[dl]=!0,this.__hasFin=!1,this.__hasCancel=!1,e[Ll]||(e[Ll]=!0,r=e[yl],i=e[Wl],e[Bl]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(i)?r:n,e[xl]=e[El]=e[Cl]=0),ch.onFrame(this),e[Il]=ch.__now,e[ul]=!1),this}},{key:"__before",value:function(t){var e=this.__config,c=(e[ql]=ch.__now,e[gl]),u=e[Gl],r=0,i=e[Bl],_=e[Tl],f=e[Xl],d=e[Vl],p=e[Dl],g=e[ml],m=e[Kl],v=e[zl],y=e[Ml],x=e[Nl],E=i.length;l=t,n=(a=e)[Rl],o=a[Hl],s=a[Gl],b=a[xl]=a[El],o&&(!0===o?l=Math.min(l,1e3/s):0<o&&(l=Math.min(l,o))),1!==n&&0<n&&(l*=n),a[El]+=l;var o,n,a,b,s=Zt([b,l],2),h=s[0];if(t=s[1],!e[Ul]&&u<60){if((t=e[Cl]+=t)<1e3/u)return void(e[hl]=!0);e[Cl]=0}if(e[Ul]=!1,h<p)return f&&Sc((e[Yl]=i[0])[il],e[Pl],e,g,c),e[Zl]=!0,void(e[ll]=!0);for(0!==(h-=p)&&!e[Zl]||(e[Zl]=!1,e[cl]=!0);y<=h&&r<_-1;)h-=y,r++;e[Ol]<r&&(R=e[cl]=!0),e[Ol]=r,R&&(o=e[Wl],n=e[vl],a=e[yl],{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(o)&&(b=r%2==0,i=e[Bl]="alternate"===o?b?n:a:b?a:n));var M,l=_-1<=r,s=m?(M=h<v?0:1,v):i[M=function t(e,r,i,o){var n,a;return e===r?o[e][ol]>i?e-1:e:(a=o[n=e+(r-e>>1)])[ol]===i?n:a[ol]>i?t(e,Math.max(n-1,e),i,o):t(Math.min(n+1,r),r,i,o)}(0,E-1,h,i)][ol],t=l&&M===E-1,u=0;t||(u=m?h/y:(h-s)/(i[M+1][ol]-s));var T,A,R,f=i[M];e[Yl]=f,t?(p=h<y+x,T=yc(d?f[il]:e[Fl],e[Pl]),e[fl]=!0,p||(e[Ol]++,e[_l]=!0,ch.offFrame(this),A=!0,e[El]=0)):T=kc(f,e[Pl],u,c),Sc(T,e[Pl],e,g,c),A&&(R=e[pl],this.__clean(!0),R&&(e[pl]=R))}},{key:"__after",value:function(t){var e=this.__config;e[sl]=!1,e[hl]?e[hl]=!1:(Dc(this,e,t,e[ll]),e[ll]=!1,e[cl]&&(e[cl]=!1,this.emit(Ss.BEGIN,e[Ol])),e[fl]&&!e[ul]&&(e[ul]=!0,this.emit(Ss.END,e[Ol]-1)),e[_l]&&(e[cl]=e[ul]=e[ll]=e[_l]=e[hl]=e[Ll]=!1,e[wl]="finished",this.emit(Ss.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[Sl],i=e[Ml],o=this.pending;return r||i<=0||o||(e[wl]="paused",this.__cancelTask(),t||this.emit(Ss.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[Sl],i=e[Ml],e=e[wl];return r||i<=0||"paused"!==e?this:this.play(t)}},{key:"finish",value:function(e){var r=this,i=r.__config,t=i[Sl],o=i[Ml],n=i[wl],a=i[vl];if(t||o<=0||a.length<1||"finished"===n||"idle"===n)return r;r.__cancelTask();var s,h=i[ml],t=i[Fl];return h&&(s=i[Vl]?(i[Yl]=a[a.length-1],a[a.length-1][il]):t,h.addRefreshTask({__before:function(){i[sl]=!0,Sc(s,i[Pl],i,h,i[gl]),r.__clean(!0)},__after:function(t){r.__hasFin||(r.__hasFin=!0,i[sl]=!1,Dc(r,i,t),i[cl]=i[ul]=i[ll]=i[_l]=i[hl]=i[Ll]=!1,r.emit(Ss.FINISH)),_c(e)&&e.call(r,t)}})),r}},{key:"cancel",value:function(e){var r=this,i=r.__config,t=i[Sl],o=i[Ml],n=i[wl],a=i[vl];if(t||o<=0||"idle"===n||a.length<1)return r;r.__cancelTask();var s=i[ml],h=i[Fl];return s&&s.addRefreshTask({__before:function(){i[sl]=!0,Sc(h,i[Pl],i,s,i[gl]),r.__clean()},__after:function(t){r.__hasCancel||(r.__hasCancel=!0,i[sl]=!1,Dc(r,i,t),i[cl]=i[ul]=i[ll]=i[_l]=i[hl]=i[Ll]=!1,r.emit(Ss.CANCEL)),_c(e)&&e.call(r,t)}}),r}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,o=i[Sl],n=i[Ml],a=i[vl],s=i[Dl],i=i[Nl];if(o||n<=0||a.length<1)return this;o=Zt(Lc(e,r),2);return e=o[0],r=o[1],this.__goto(t,e.isFrame,e.excludeDelay),n+s+i<t?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,o=this.__config,n=o[Sl],a=o[Ml],s=o[vl],h=o[Dl],l=o[Nl];if(n||a<=0||s.length<1)return this;n=Zt(Lc(e,r),2);return e=n[0],r=n[1],a+h+l<(t=this.__goto(t,e.isFrame,e.excludeDelay))?this.finish(r):this.play(function(t){o[wl]="paused",i.__cancelTask(),_c(r)&&r.call(i,t)})}},{key:"assignCurrentStyle",value:function(){var t=this.__config,r=t[bl],i=t[gl];t[Pl].forEach(function(t){var e;r.hasOwnProperty(t)&&(e=r[t],Ec.hasOwnProperty(t)?i.currentProps[t]=e:i.currentStyle[t]=e)})}},{key:"__goto",value:function(t,e,r){var i=this.__config,o=i[Tl],n=i[Ml];if(i[wl]="paused",isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=i[Dl]),i[El]=t,t-=i[Dl];for(var a=0;n<=t&&a<o-1;)a++,t-=n;i[Ol]=a,i[Ll]=!0;var s,e=i[vl],r=i[yl],h=i[Wl];return{alternate:!0,"alternate-reverse":!0}.hasOwnProperty(h)&&(s=a%2==0,i[Bl]="alternate"===h?s?e:r:s?r:e),t}},{key:"addControl",value:function(){var t=this.root.animateController;t&&t.add(this)}},{key:"removeControl",value:function(){var t=this.root.animateController;t&&t.remove(this)}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[gl]=t,this.__config[jl]=t.__config}},{key:"__cancelTask",value:function(){ch.offFrame(this),this.__config[pl]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[Sl]||(e.removeControl(),t?(e.__clean(),r[gl]=null):ch.nextFrame({__before:function(){e.__clean(),r[gl]=null}}),r[Il]=0,r[Sl]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[wl]&&"finished"!==t[wl]&&De.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[gl]}},{key:"root",get:function(){return this.__config[ml]}},{key:"keys",get:function(){return this.__config[Pl]}},{key:"style",get:function(){return this.__config[bl]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[Ml]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Ml]!==t&&(e[Ml]=t,e[zl]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[Dl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Dl]!==t&&(e[Dl]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[Nl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[Nl]!==t&&(e[Nl]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[Gl]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[Gl]!==t&&(e[Gl]=t=t<=0?60:t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[Tl]},set:function(t){t===1/0||xt.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[Tl]!==t&&(e[Tl]=t),t}},{key:"fill",get:function(){return this.__config[Al]},set:function(t){var e=this.__config;return e[Al]!==(t=t||"none")&&(e[Al]=t,this.__checkModify()),e[Xl]={backwards:!0,both:!0}.hasOwnProperty(t),e[Vl]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[Wl]},set:function(t){var e=this.__config;return e[Wl]!==(t=t||"normal")&&(e[Wl]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[vl]}},{key:"framesR",get:function(){return this.__config[yl]}},{key:"playbackRate",get:function(){return this.__config[Rl]},set:function(t){t=parseFloat(t)||1;var e=this.__config;return e[Rl]!==(t=t<=0?1:t)&&(e[Rl]=t),t}},{key:"easing",get:function(){return this.__config[kl]}},{key:"startTime",get:function(){return this.__config[Il]}},{key:"currentTime",get:function(){return this.__config[xl]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[xl]!==t&&(e[xl]=t,e[El]=t),t}},{key:"nextTime",get:function(){return this.__config[El]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[El]!==t&&(e[El]=t),t}},{key:"timestamp",get:function(){return this.__config[ql]}},{key:"pending",get:function(){return"running"!==this.__config[wl]}},{key:"finished",get:function(){return"finished"===this.__config[wl]}},{key:"playState",get:function(){return this.__config[wl]}},{key:"playCount",get:function(){return this.__config[Ol]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[Ol]!==t&&(e[Ol]=t),t}},{key:"isDestroyed",get:function(){return this.__config[Sl]}},{key:"animating",get:function(){var t=this.__config,e=t[wl];return"idle"!==e&&("finished"!==e||t[Vl]||t[Xl])}},{key:"spfLimit",get:function(){return this.__config[Hl]},set:function(t){t=xt.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[Hl]!==t&&(e[Hl]=t),t}},{key:"assigning",get:function(){return this.__config[sl]}}]),c}(),Fc=A.NODE_KEY.NODE_DEFS_CACHE,Bc=xt.int2rgba,Yc=yt.canvasPolygon,Hc=yt.svgPolygon;var Gc={renderBoxShadow:function(c,u,t,_,e,r,f,i,d,p){var g,m,v;e+=o=10<arguments.length&&void 0!==arguments[10]?arguments[10]:0,r+=y=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,f+=o,i+=y;var y=(o=Zt(_,6))[0],_=o[1],x=o[2],E=o[3],b=o[4],o=o[5],M=Bc(b),n=2*Math.abs(x)+2*Math.abs(E)+2*Math.abs(y)+2*Math.abs(_),a=[[e,r],[f,r],[f,i],[e,i],[e,r]],T=[[e-n,r-n],[e-n,i+n],[f+n,i+n],[f+n,r-n],[e-n,r-n]];if(0<b[3]&&(0<x||0<E))if(u===et.CANVAS|u===et.WEBGL){if(t.save(),t.beginPath(),"inset"===o){var b=e+y+E,A=r+_+E,s=f+y-E,h=i+_-E,l=[[b,A],[s,A],[s,h],[b,h]],l=nt.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[l[0][0],l[0][1],l[2][0],l[2][1]]);if(!l)return;l=[[l[0],l[1]],[l[2],l[1]],[l[2],l[3]],[l[0],l[3]],[l[0],l[1]]],E?(Yc(t,l),Yc(t,a.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==M&&(t.fillStyle=M),Yc(t,a),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),Yc(t,l),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=M,t.shadowBlur=x,Yc(t,[[b,A],[s,A],[s,h],[e-n,h],[e-n,i+n],[f+n,i+n],[f+n,r-n],[e-n,r-n],[e-n,h],[b,h],[b,A]])):(Yc(t,a),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=y,t.shadowOffsetY=_,t.shadowColor=M,t.shadowBlur=x,Yc(t,[[e,r],[f,r],[f,i],[e-n,i],[e-n,i+n],[f+n,i+n],[f+n,r-n],[e-n,r-n],[e-n,i],[e,i],[e,r]]))}else{var l=e+y-E,s=r+_-E,h=f+y+E,b=i+_+E,A=[[l,s],[h,s],[h,b],[l,b]],s=nt.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[A[0][0],A[0][1],A[2][0],A[2][1]]);E?(Yc(t,a),Yc(t,A.slice(0).reverse()),t.clip(),t.closePath(),t.beginPath(),t.fillStyle!==M&&(t.fillStyle=M),Yc(t,A),t.fill(),t.closePath(),t.restore(),t.save(),t.beginPath(),s&&Yc(t,[[s[0],s[1]],[s[2],s[1]],[s[2],s[3]],[s[0],s[3]],[s[0],s[1]]].reverse()),Yc(t,a),Yc(t,A),Yc(t,T),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowColor=M,t.shadowBlur=x,Yc(t,A)):(Yc(t,a),Yc(t,T),t.clip(),t.closePath(),t.beginPath(),"#FFF"!==t.fillStyle&&(t.fillStyle="#FFF"),t.shadowOffsetX=y,t.shadowOffsetY=_,t.shadowColor=M,t.shadowBlur=x,Yc(t,a))}t.fill(),t.closePath(),t.restore()}else u===et.SVG&&(h=_a.outerSize(x),"inset"===o?(o=nt.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[(u=[[l=e+y+E,b=r+_+E],[s=f+y-E,b],[s,A=i+_-E],[l,A]])[0][0],u[0][1],u[2][0],u[2][1]]))&&(o=[[o[0],o[1]],[o[2],o[1]],[o[2],o[3]],[o[0],o[3]],[o[0],o[1]]],E?(c.__config[Fc].push(u={tagName:"filter",props:[["x",-h/d],["y",-h/p],["width",1+2*h/d],["height",1+2*h/p]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*x],["flood-color",M]]}]}),g=t.add(u),v={tagName:"clipPath",children:[{tagName:"path",props:[["d",Hc(o)+Hc(a.slice(0).reverse())],["fill","#FFF"]]}]},m=t.add(v),c.__config[Fc].push(v),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Hc(a)],["fill",M],["clip-path","url(#"+m+")"]]}),u={tagName:"clipPath",children:[{tagName:"path",props:[["d",Hc(o)],["fill","#FFF"]]}]},m=t.add(u),c.__config[Fc].push(u),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Hc([[l,b],[s,b],[s,A],[e-n,A],[e-n,i+n],[f+n,i+n],[f+n,r-n],[e-n,r-n],[e-n,A],[l,A],[l,b]])],["fill","#FFF"],["filter","url(#"+g+")"],["clip-path","url(#"+m+")"]]})):(o=t.add(v={tagName:"filter",props:[["x",-h/d],["y",-h/p],["width",1+2*h/d],["height",1+2*h/p]],children:[{tagName:"feDropShadow",props:[["dx",y],["dy",_],["stdDeviation",.5*x],["flood-color",M]]}]}),c.__config[Fc].push(v),v={tagName:"clipPath",children:[{tagName:"path",props:[["d",Hc(a)],["fill","#FFF"]]}]},u=t.add(v),c.__config[Fc].push(v),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Hc([[e,r],[f,r],[f,i],[e-n,i],[e-n,i+n],[f+n,i+n],[f+n,r-n],[e-n,r-n],[e-n,i],[e,i],[e,r]])],["fill","#FFF"],["filter","url(#"+o+")"],["clip-path","url(#"+u+")"]]}))):(m=nt.getRectsIntersection([a[0][0],a[0][1],a[2][0],a[2][1]],[(g=[[s=e+y-E,A=r+_-E],[l=f+y+E,A],[l,b=i+_+E],[s,b]])[0][0],g[0][1],g[2][0],g[2][1]]),E?(n=t.add(v={tagName:"filter",props:[["x",-h/d],["y",-h/p],["width",1+2*h/d],["height",1+2*h/p]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*x],["flood-color",M]]}]}),c.__config[Fc].push(v),v={tagName:"clipPath",children:[{tagName:"path",props:[["d",Hc(a)+Hc(g.slice(0).reverse())],["fill","#FFF"]]}]},o=t.add(v),c.__config[Fc].push(v),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Hc(g)],["fill",M],["clip-path","url(#"+o+")"]]}),v={tagName:"clipPath",children:[{tagName:"path",props:[["d",(m?Hc([[m[0],m[1]],[m[2],m[1]],[m[2],m[3]],[m[0],m[3]],[m[0],m[1]]].reverse()):"")+Hc(a)+Hc(g)+Hc(T)],["fill","#FFF"]]}]},o=t.add(v),c.__config[Fc].push(v),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Hc(g)],["fill","#FFF"],["filter","url(#"+n+")"],["clip-path","url(#"+o+")"]]})):(e=t.add(u={tagName:"filter",props:[["x",-h/d],["y",-h/p],["width",1+2*h/d],["height",1+2*h/p]],children:[{tagName:"feDropShadow",props:[["dx",y],["dy",_],["stdDeviation",.5*x],["flood-color",M]]}]}),c.__config[Fc].push(u),u={tagName:"clipPath",children:[{tagName:"path",props:[["d",Hc(a)+Hc(T)],["fill","#FFF"]]}]},r=t.add(u),c.__config[Fc].push(u),c.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Hc(a)],["fill","#FFF"],["filter","url(#"+e+")"],["clip-path","url(#"+r+")"]]}))))}},Wc={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,"color-dodge":!0,"color-burn":!0,"hard-light":!0,"soft-light":!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};function Uc(t){if(t)return t.replace(/[A-Z]/,function(t){return"-"+t.toLowerCase()})}var t=Uc,Kr=function(t){return Wc.hasOwnProperty(Uc(t))},e=A.STYLE_KEY,Xc=e.MARGIN_LEFT,Vc=e.MARGIN_RIGHT,Kc=e.PADDING_LEFT,zc=e.PADDING_RIGHT,jc=e.BORDER_LEFT_WIDTH,$c=e.BORDER_RIGHT_WIDTH;var Zc={getInlineBox:function(t,c,e,r,i,u,_,f,d,p,o,g,m,n,a,v,y,x,E){for(var b,M=0,T=0,g=("paddingBox"===o||"padding-box"===o?(M=g,T=n):"contentBox"!==o&&"content-box"!==o&&(M=g+v,T=n+x),g+v),v=n+x,n=i.baseLine-u,s=e.x,h=(e instanceof Lo?e.parent:e).domParent;h!==t;)e===h.contentBoxList[0]&&(s-=(b=h.computedStyle)[Xc]+b[Kc]+b[jc]),h=h.domParent;for(var x=s,u=(d&&("paddingBox"===o||"padding-box"===o?s-=a:"contentBox"!==o&&"content-box"!==o&&(s-=a+E),x-=a+E),i.y+n-M),d=i.y+n-g,l=r.x+r.outerWidth,h=(r instanceof Lo?r.parent:r).domParent;h!==t;){var A=h.contentBoxList;r===A[A.length-1]&&(l+=(A=h.computedStyle)[Vc]+A[zc]+A[$c]),h=h.domParent}return a=l,p&&("paddingBox"===o||"padding-box"===o?l+=m:"contentBox"!==o&&"content-box"!==o&&(l+=m+y),a+=m+y),E=i.y+n+_-f+T,M=i.y+n+_-f+v,s+=t.ox,l+=t.ox,x+=t.ox,a+=t.ox,[s,u+=t.oy,l,E+=t.oy,x,d+=t.oy,a,M+=t.oy]},getInlineWidth:function(t,e){for(var r=0,i=e.length,o=0;o<i;o++)for(var n=e[o],a=(r+=n.width,(n instanceof Lo?n.parent:n).domParent);a!==t;){var s,h=a.contentBoxList;n===h[0]&&(r+=(s=a.computedStyle)[Xc]+s[Kc]+s[jc]),n===h[h.length-1]&&(r+=(s=a.computedStyle)[Vc]+s[zc]+s[$c]),a=a.domParent}return r}},qc=yt.svgPolygon,Jc=et.CANVAS,Qc=et.SVG,tu=et.WEBGL,eu=ga.LOCAL,ru=A.STYLE_KEY,iu=A.STYLE_RV_KEY,ou=A.style2Upper,a=A.STYLE_KEY,nu=a.BORDER_TOP_LEFT_RADIUS,au=a.BORDER_TOP_RIGHT_RADIUS,su=a.BORDER_BOTTOM_LEFT_RADIUS,hu=a.BORDER_BOTTOM_RIGHT_RADIUS,lu=a.PADDING_LEFT,cu=a.PADDING_RIGHT,uu=a.PADDING_TOP,_u=a.PADDING_BOTTOM,fu=a.MARGIN_LEFT,du=a.MARGIN_TOP,pu=a.MARGIN_BOTTOM,gu=a.MARGIN_RIGHT,mu=a.BORDER_LEFT_WIDTH,vu=a.BORDER_TOP_WIDTH,yu=a.BORDER_BOTTOM_WIDTH,xu=a.BORDER_RIGHT_WIDTH,Eu=a.TOP,bu=a.RIGHT,Mu=a.BOTTOM,Tu=a.LEFT,Au=a.POSITION,Ru=a.DISPLAY,Ou=a.WIDTH,wu=a.HEIGHT,Su=a.MATRIX,Iu=a.TRANSLATE_X,Cu=a.TRANSLATE_Y,ku=a.TRANSLATE_Z,Lu=a.TRANSFORM,Du=a.SCALE_X,Nu=a.SCALE_Y,Pu=a.SCALE_Z,Fu=a.ROTATE_X,Bu=a.ROTATE_Y,Yu=a.ROTATE_Z,Hu=a.SKEW_X,Gu=a.SKEW_Y,Wu=a.PERSPECTIVE,Uu=a.PERSPECTIVE_ORIGIN,Xu=a.ROTATE_3D,Vu=a.TRANSFORM_ORIGIN,Ku=a.BACKGROUND_POSITION_X,zu=a.BACKGROUND_POSITION_Y,ju=a.BACKGROUND_SIZE,$u=a.BACKGROUND_COLOR,Zu=a.BACKGROUND_IMAGE,qu=a.BACKGROUND_REPEAT,Ju=a.BOX_SHADOW,Qu=a.OPACITY,t_=a.Z_INDEX,e_=a.BORDER_TOP_STYLE,r_=a.BORDER_RIGHT_STYLE,i_=a.BORDER_BOTTOM_STYLE,o_=a.BORDER_LEFT_STYLE,n_=a.FILTER,a_=a.OVERFLOW,s_=a.MIX_BLEND_MODE,h_=a.TEXT_OVERFLOW,l_=a.BORDER_TOP_COLOR,c_=a.BORDER_BOTTOM_COLOR,u_=a.BORDER_LEFT_COLOR,__=a.BORDER_RIGHT_COLOR,f_=a.FONT_STYLE,d_=a.COLOR,p_=a.VISIBILITY,g_=a.POINTER_EVENTS,m_=a.BORDER_TOP,v_=a.BORDER_RIGHT,y_=a.BORDER_BOTTOM,x_=a.BORDER_LEFT,E_=a.BACKGROUND_CLIP,b_=a.FONT_SIZE,M_=a.FONT_FAMILY,T_=a.LINE_HEIGHT,A_=a.TEXT_STROKE_COLOR,R_=a.TEXT_STROKE_WIDTH,O_=a.TEXT_STROKE_OVER,i=A.UPDATE_KEY,w_=i.UPDATE_NODE,S_=i.UPDATE_FOCUS,I_=i.UPDATE_STYLE,C_=i.UPDATE_OVERWRITE,k_=i.UPDATE_KEYS,L_=i.UPDATE_CONFIG,D_=i.UPDATE_REMOVE_DOM,N_=A.STRUCT_KEY.STRUCT_HAS_MASK,s=A.NODE_KEY,P_=s.NODE_TAG_NAME,F_=s.NODE_CACHE_STYLE,B_=s.NODE_CURRENT_STYLE,Y_=s.NODE_COMPUTED_STYLE,H_=s.NODE_STYLE,G_=s.NODE_STRUCT,W_=s.NODE_OPACITY,U_=s.NODE_MATRIX_EVENT,X_=s.NODE_MATRIX,V_=s.NODE_LIMIT_CACHE,K_=s.NODE_HAS_CONTENT,z_=s.NODE_REFRESH_LV,j_=s.NODE_CACHE,$_=s.NODE_CACHE_TOTAL,Z_=s.NODE_CACHE_FILTER,q_=s.NODE_CACHE_MASK,J_=s.NODE_CACHE_OVERFLOW,Q_=s.NODE_IS_DESTROYED,t0=s.NODE_DEFS_CACHE,e0=s.NODE_DOM_PARENT,r0=s.NODE_IS_INLINE,i0=s.NODE_PERSPECTIVE_MATRIX,o0=s.NODE_IS_MASK,n0=s.NODE_VIRTUAL_DOM,a0=s.NODE_CACHE_AS_BITMAP,s0=r.AUTO,h0=r.PX,l0=r.PERCENT,c0=r.INHERIT,u0=r.NUMBER,_0=r.REM,f0=r.VW,d0=r.VH,p0=r.VMAX,g0=r.VMIN,m0=r.DEG,v0=xt.int2rgba,y0=xt.rgba2int,x0=xt.joinArr,E0=xt.isNil,b0=xt.isFunction,M0=Mo.calRelative,T0=wr.GEOM,A0=t,R0=Kr,O0=qt.point2d,w0=Ra.contain,S0=Ra.NONE,I0=Ra.TRANSFORM,C0=Ra.REFLOW,k0=Ra.REPAINT,L0=Ra.TRANSLATE_X,D0=Ra.TRANSLATE_Y,N0=Ra.TRANSLATE_Z;function P0(t){for(var e=0,r=t.flowChildren,i=r.length,o=0;o<i;o++){var n=r[o];if(!(n instanceof F0||n instanceof Ns&&n.shadowRoot instanceof F0))break;if(n.flowChildren.length){e+=P0(n);break}n.__config[r0]&&(e+=n.outerWidth)}return e}var F0=function(){p(n,k);var o=m(n);function n(t){var r,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=(f(this,n),r=o.call(this),Array.isArray(e)?r.props=xt.arr2hash(e):r.props=e,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle={},r.__computedStyle={},r.__listener={},Object.keys(r.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)}),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle={},r.__cacheDefs=[],r.__isClip=!!r.props.clip),e=r.__isMask=e||!!r.props.mask,i=r.__config;return i[P_]=t,i[F_]=r.__cacheStyle,i[B_]=r.__currentStyle,i[Y_]=r.__computedStyle,i[z_]=C0,i[H_]=r.__style,i[X_]=[],i[U_]=[],i[t0]=r.__cacheDefs,i[o0]=e,r.__frameAnimateList=[],r.__contentBoxList=[],i[a0]=r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r}return g(n,[{key:"__structure",value:function(t,e,r){t=P(N(n.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(t[N_]=this.__hasMask),this.__config[G_]=t}},{key:"__mp",value:function(r,i,o){var n=this;["Top","Right","Bottom","Left"].forEach(function(t){var e=ru[ou("margin"+t)],t=ru[ou("padding"+t)];i[e]=n.__mpWidth(r[e],o),i[t]=n.__mpWidth(r[t],o)})}},{key:"__mpWidth",value:function(t,e){return t[1]===h0?t[0]:t[1]===l0?t[0]*e*.01:t[1]===_0?t[0]*this.root.computedStyle[b_]:t[1]===f0?t[0]*this.root.width*.01:t[1]===d0?t[0]*this.root.height*.01:t[1]===p0?t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===g0?t[0]*Math.min(this.root.width,this.root.height)*.01:0}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;this.__clientWidth=t+=r[lu]+r[cu],this.__clientHeight=e+=r[uu]+r[_u],this.__offsetWidth=t+=r[mu]+r[xu],this.__offsetHeight=e+=r[vu]+r[yu],this.__outerWidth=t+r[fu]+r[gu],this.__outerHeight=e+r[du]+r[pu]}},{key:"__calMp",value:function(t,e,r){var i=0;return t[1]===h0?i+=t[0]:t[1]!==l0||r?t[1]===_0?i+=t[0]*this.root.computedStyle[b_]:t[1]===f0?i+=t[0]*this.root.width*.01:t[1]===d0?i+=t[0]*this.root.height*.01:t[1]===p0?i+=t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===g0&&(i+=t[0]*Math.min(this.root.width,this.root.height)*.01):(t[0]*=.01*e,t[1]=h0,i+=t[0]),i}},{key:"__addMp",value:function(c,t,e,r,i,o){var n,u=e[fu],_=e[du],f=e[gu],d=e[pu],p=e[lu],g=e[uu],m=e[cu],v=e[_u],a=e[vu],s=e[xu],h=e[yu],e=e[mu],l=this.__calMp(u,t,!o)+this.__calMp(f,t,!o)+this.__calMp(p,t,!o)+this.__calMp(m,t,!o);return e[1]===h0?l+=e[0]:e[1]===_0?l+=e[0]*this.root.computedStyle[b_]:e[1]===f0?l+=e[0]*this.root.width*.01:e[1]===d0?l+=e[0]*this.root.height*.01:e[1]===p0?l+=e[0]*Math.max(this.root.width,this.root.height)*.01:e[1]===g0&&(l+=e[0]*Math.min(this.root.width,this.root.height)*.01),s[1]===h0?l+=s[0]:s[1]===_0?l+=s[0]*this.root.computedStyle[b_]:s[1]===f0?l+=s[0]*this.root.width*.01:s[1]===d0?l+=s[0]*this.root.height*.01:s[1]===p0?l+=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===g0&&(l+=s[0]*Math.min(this.root.width,this.root.height)*.01),i=i.map(function(t){return t+l}),[r=c?r.map(function(t){return t+l}):(n=this.__calMp(_,t,!o)+this.__calMp(d,t,!o)+this.__calMp(g,t,!o)+this.__calMp(v,t,!o),a[1]===h0?n+=a[0]:a[1]===_0?n+=a[0]*this.root.computedStyle[b_]:a[1]===f0?n+=a[0]*this.root.width*.01:a[1]===d0?n+=a[0]*this.root.height*.01:a[1]===p0?n+=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===g0&&(n+=a[0]*Math.min(this.root.width,this.root.height)*.01),h[1]===h0?n+=h[0]:h[1]===_0?n+=h[0]*this.root.computedStyle[b_]:h[1]===f0?n+=h[0]*this.root.width*.01:h[1]===d0?n+=h[0]*this.root.height*.01:h[1]===p0?n+=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===g0&&(n+=h[0]*Math.min(this.root.width,this.root.height)*.01),r.map(function(t){return t+n})),i]}},{key:"__layout",value:function(t,e,c){Mo.computeReflow(this,this.isShadowRoot);var r=t.w,u=this.isDestroyed,i=this.currentStyle,o=this.computedStyle,_=this.__config,n=o[Ru],a=i[Ou],f=i[Au];if(this.clearCache(),this.__layoutData={x:t.x,y:t.y,w:t.w,h:t.h,lx:t.lx},_[z_]=C0,_[V_]=!1,_[r0]=!1,!e){var s=this.next;if(!this.isMask&&s&&s.isMask){for(var d=0;s&&s.isMask;)d++,s=s.next;this.__hasMask=d}}if(this.__ox=this.__oy=0,u||"none"===n)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=o[Ou]=o[wu]=0,this.__x=t.x,this.__y=t.y,void this.__layoutNone();if(c||this.__mp(i,o,r),a[1]!==s0)if(this.__isRealInline()&&"inline"===i[Ru])a[0]=0,a[1]=s0;else switch(a[1]){case h0:r=a[0];break;case l0:r*=.01*a[0];break;case _0:r=a[0]*this.root.computedStyle[b_];break;case f0:r=a[0]*this.root.width*.01;break;case d0:r=a[0]*this.root.height*.01;break;case p0:r=a[0]*Math.max(this.root.width,this.root.height)*.01;break;case g0:r=a[0]*Math.min(this.root.width,this.root.height)*.01}var h,u=0,l=("flex"===n?this.__layoutFlex(t,e):"inlineBlock"===n||"inline-block"===n?u=this.__layoutInline(t,e):"inline"===n?u=this.__layoutInline(t,e,!0):this.__layoutBlock(t,e),"relative"===f?(n=i[Eu],t=i[bu],e=i[Mu],l=i[Tu],h=this.parent,n[1]!==s0?(n=M0(i,Eu,n,h),this.__offsetY(n),o[Eu]=n,o[Mu]="auto"):e[1]!==s0?(n=M0(i,Mu,e,h),this.__offsetY(-n),o[Mu]=n,o[Eu]="auto"):o[Eu]=o[Mu]="auto",l[1]!==s0?(e=M0(i,Tu,l,h,!0),this.__offsetX(e),o[Tu]=e,o[bu]="auto"):t[1]!==s0?(n=M0(i,bu,t,h,!0),this.__offsetX(-n),o[bu]=n,o[Tu]="auto"):o[Tu]=o[bu]="auto"):"absolute"!==f&&(o[Eu]=o[Mu]=o[Tu]=o[bu]="auto"),this.__sx=this.x+this.ox),e=this.__sy=this.y+this.oy;return _[r0]||(l=this.__sx1=l+o[fu],l=this.__sx2=l+o[mu],l=this.__sx3=l+o[lu],l=this.__sx4=l+this.width,l=this.__sx5=l+o[cu],this.__sx6=l+o[xu],e=this.__sy1=e+o[du],e=this.__sy2=e+o[vu],e=this.__sy3=e+o[uu],e=this.__sy4=e+this.height,e=this.__sy5=e+o[_u],this.__sy6=e+o[yu]),o[Ou]=this.width,o[wu]=this.height,c||this.__execAr(),u}},{key:"__execAr",value:function(){var t,e=this.__animateRecords;e&&(this.__animateRecords=null,e.list.forEach(function(t){t.target.vd instanceof n&&(t.target=t.target.vd)}),t=e.controller||this.root.animateController,e.options&&!1===e.options.autoPlay?(t.__records2=t.__records2.concat(e.list),t.init(t.__records2,t.list2)):(t.__records=t.__records.concat(e.list),t.__playAuto()))}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[Ru]="none",t[du]=t[gu]=t[pu]=t[fu]=t[uu]=t[cu]=t[_u]=t[lu]=0}},{key:"__preLayout",value:function(t,c){var e,r,u=t.x,i=t.y,o=t.w,n=t.h,a=t.w2,_=t.h2,f=t.w3,d=t.h3,p=t.lx,g=t.nowrap,m=t.lineBoxManager,v=t.endSpace,v=void 0===v?0:v,y=(this.__x=u,this.__y=i,this.currentStyle),s=this.computedStyle,h=y[Ou],l=y[wu],y=s[vu],x=s[xu],E=s[yu],b=s[mu],M=s[du],T=s[gu],A=s[pu],R=s[fu],O=s[uu],w=s[cu],S=s[_u],s=s[lu];if(void 0!==a)e=!0,o=a;else if(void 0!==f)e=!0,o=f;else if(h[1]!==s0)switch(e=!0,h[1]){case h0:o=h[0];break;case l0:o*=.01*h[0];break;case _0:o=h[0]*this.root.computedStyle[b_];break;case f0:o=h[0]*this.root.width*.01;break;case d0:o=h[0]*this.root.height*.01;break;case p0:o=h[0]*Math.max(this.root.width,this.root.height)*.01;break;case g0:o=h[0]*Math.min(this.root.width,this.root.height)*.01}if(void 0!==_)r=!0,n=_;else if(void 0!==d)r=!0,n=d;else if(l[1]!==s0)switch(r=!0,l[1]){case h0:n=l[0];break;case l0:n*=.01*l[0];break;case _0:n=l[0]*this.root.computedStyle[b_];break;case f0:n=l[0]*this.root.width*.01;break;case d0:n=l[0]*this.root.height*.01;break;case p0:n=l[0]*Math.max(this.root.width,this.root.height)*.01;break;case g0:n=l[0]*Math.min(this.root.width,this.root.height)*.01}t.x=u+=b+R+s,c||(i+=y+M+O),t.y=i;a=c?w+x+T:0;return c||(h[1]!==s0&&void 0===f||(o-=b+x+R+T+s+w),l[1]!==s0&&void 0===d||(n-=y+E+M+A+O+S)),{fixedWidth:e,fixedHeight:r,x:u,y:i,w:o,h:n,lx:p,lineBoxManager:m,nowrap:g,endSpace:v,selfEndSpace:a}}},{key:"__marginAuto",value:function(t,e){var r=t[Au],i=t[Ru],o=t[fu],n=t[gu],t=t[Ou];"absolute"===r||"block"!==i&&"flex"!==i||t[1]===s0&&!this.isReplaced||o[1]!==s0||n[1]!==s0||(r=this.outerWidth)<e.w&&this.__offsetX(.5*(e.w-r),!0)}},{key:"__calMatrix",value:function(t,e,i,o,r,c,u,n,_){var a=this;if(r[r0])return o[Vu]=[c,u],e[Su]=qt.identity();var s,f,d,p,h,l,r=e[Su];return r&&t<C0&&!w0(t,I0)?(f=l=s=0,w0(t,L0)&&(h=i[Iu],s=(h=E0(h)?0:h[1]===l0?h[0]*this.offsetWidth*.01:h[1]===_0?h[0]*this.root.computedStyle[b_]:h[1]===f0?h[0]*this.root.width*.01:h[1]===d0?h[0]*this.root.height*.01:h[1]===p0?h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===g0?h[0]*Math.min(this.root.width,this.root.height)*.01:h[0])-(o[Iu]||0),o[Iu]=h,o[Lu][12]+=s,r[12]+=s),w0(t,D0)&&(h=i[Cu],l=(h=E0(h)?0:h[1]===l0?h[0]*this.offsetHeight*.01:h[1]===_0?h[0]*this.root.computedStyle[b_]:h[1]===f0?h[0]*this.root.width*.01:h[1]===d0?h[0]*this.root.height*.01:h[1]===p0?h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===g0?h[0]*Math.min(this.root.width,this.root.height)*.01:h[0])-(o[Cu]||0),o[Cu]=h,o[Lu][13]+=l,r[13]+=l),w0(t,N0)&&(s=i[ku],f=(s=E0(s)?0:s[1]===l0?s[0]*this.offsetWidth*.01:s[1]===_0?s[0]*this.root.computedStyle[b_]:s[1]===f0?s[0]*this.root.width*.01:s[1]===d0?s[0]*this.root.height*.01:s[1]===p0?s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===g0?s[0]*Math.min(this.root.width,this.root.height)*.01:s[0])-(o[ku]||0),o[ku]=s,o[Lu][14]+=f,r[14]+=f),e[Su]=r):(void 0===c&&(c=this.__sx1,u=this.__sy1,n=this.offsetWidth,_=this.offsetHeight),void 0===e[Vu]&&(e[Vu]=!0,r=null,o[Vu]=la.calOrigin(i[Vu],n,_,this.root)),void 0!==e[Lu]&&void 0!==e[Iu]&&void 0!==e[Cu]&&void 0!==e[ku]&&void 0!==e[Fu]&&void 0!==e[Bu]&&void 0!==e[Yu]&&void 0!==e[Xu]&&void 0!==e[Du]&&void 0!==e[Nu]&&void 0!==e[Pu]&&void 0!==e[Hu]&&void 0!==e[Gu]||(e[Lu]=e[Iu]=e[Cu]=e[ku]=e[Fu]=e[Bu]=e[Yu]=e[Du]=e[Nu]=e[Pu]=e[Hu]=e[Gu]=!0,r=null,i[Lu]?d=la.calMatrix(i[Lu],n,_,this.root):(p=[],[Iu,Cu,ku,Fu,Bu,Yu,Xu,Hu,Gu,Du,Nu,Pu].forEach(function(t){delete o[t];var e=i[t];if(!E0(e)){if(t===Xu)return o[t]=[e[0],e[1],e[2],e[3][0]],0===e[3][0]?void 0:void p.push([t,e]);o[t]=e[0];var r=t===Du||t===Nu||t===Pu;1===e[0]&&r||!r&&0===e[0]||(e[1]===l0?t===Iu||t===ku?o[t]=e[0]*n*.01:t===Cu&&(o[t]=e[0]*_*.01):e[1]===_0?t!==Iu&&t!==ku&&t!==Cu||(o[t]=e[0]*a.root.computedStyle[b_]):e[1]===f0?t!==Iu&&t!==ku&&t!==Cu||(o[t]=e[0]*a.root.width*.01):e[1]===d0?t!==Iu&&t!==ku&&t!==Cu||(o[t]=e[0]*a.root.height*.01):e[1]===p0?t!==Iu&&t!==ku&&t!==Cu||(o[t]=e[0]*Math.max(a.root.width,a.root.height)*.01):e[1]!==g0||t!==Iu&&t!==ku&&t!==Cu||(o[t]=e[0]*Math.min(a.root.width,a.root.height)*.01),p.push([t,e]))}}),p.length&&(d=la.calMatrix(p,n,_,this.root))),o[Lu]=d||qt.identity()),r||(h=o[Lu],(l=o[Vu].slice(0))[0]+=c||0,l[1]+=u||0,r=e[Su]=la.calMatrixByOrigin(h,l))),r}},{key:"__calCache",value:function(c,u,t,n,e,o,_,f,d,p,g,m,v,y,x,E,b,M,T,A,R,r,O,w,S,I,C,i,k,L){var a=this,s=T,h=S,D=w,N=L,P=o[E_]=e[E_],l=("paddingBox"===P||"padding-box"===P?(s=A,h=I,D=O,N=k):"contentBox"!==P&&"content-box"!==P||(s=R,h=C,D=r,N=i),this.__config[r0]),F=(l&&!this.contentBoxList.length&&(l=!1),[Qu,t_,e_,r_,i_,o_,qu,a_,s_,h_,E_].forEach(function(t){o[t]=e[t]}),E0(n[n_])&&(n[n_]=!0,this.__calFilter(e,o)),E0(n[Ku])&&(n[Ku]=!0,P=e[Ku],o[Ku]=(P||[]).map(function(t){return t[1]===h0?t[0]:t[1]===_0?t[0]*a.root.computedStyle[b_]:t[1]===f0?t[0]*a.root.width*.01:t[1]===d0?t[0]*a.root.height*.01:t[1]===p0?t[0]*Math.max(a.root.width,a.root.height)*.01:t[1]===g0?t[0]*Math.min(a.root.width,a.root.height)*.01:t[1]===l0?t[0]+"%":void 0})),E0(n[zu])&&(n[zu]=!0,R=e[zu],o[zu]=(R||[]).map(function(t){return t[1]===h0?t[0]:t[1]===_0?t[0]*a.root.computedStyle[b_]:t[1]===f0?t[0]*a.root.width*.01:t[1]===d0?t[0]*a.root.height*.01:t[1]===p0?t[0]*Math.max(a.root.width,a.root.height)*.01:t[1]===g0?t[0]*Math.min(a.root.width,a.root.height)*.01:t[1]===l0?t[0]+"%":void 0})),E0(n[ju])&&(n[ju]=!0,o[ju]=(e[ju]||[]).map(function(t){return sh.calBackgroundSize(t,D-s,N-h,a.root)})),E0(n[Zu])&&(C=o[Zu]=e[Zu].slice(0),n[Zu]=C.map(function(t,e){return t?xt.isString(t)?(r=a.__loadBgi[e]=a.__loadBgi[e]||{},(e=De.IMG[Zu])&&e.state===De.LOADED?(r.url=Zu,r.source=e.source,r.width=e.width,r.height=e.height):r.url!==t&&(r.url=t,r.source=null,o=(i=a).root,De.measureImg(t,function(t){t.success&&t.url===r.url&&!a.isDestroyed&&(r.source=t.source,r.width=t.width,r.height=t.height,o.delRefreshTask(r.cb),o.addRefreshTask(r.cb={__before:function(){n[Zu]=void 0;var t={};t[w_]=i,t[S_]=k0,t[L_]=i.__config,o.__addUpdate(i,i.__config,o,o.__config,t)}}))},{ctx:u,root:o,width:D-s,height:N-h})),!0):!(l||!t.k)||void 0:null;var r,i,o})),E0(n[Ju])&&(n[Ju]=!0,o[Ju]=(e[Ju]||[]).map(function(t){return t.map(function(t,e){if(3<e)return t;var r=t[0];return t[1]===l0?r*=e%2==0?.01*(D-s):.01*(N-h):t[1]===_0?r*=a.root.computedStyle[b_]:t[1]===f0?r=r*a.root.width*.01:t[1]===d0?r=r*a.root.height*.01:t[1]===p0?r=r*Math.max(a.root.width,a.root.height)*.01:t[1]===g0&&(r=r*Math.min(a.root.width,a.root.height)*.01),r})})),[$u,l_,__,c_,u_].forEach(function(t){E0(n[t])&&(n[t]=v0(o[t]=e[t][0]))}),(E0(n[nu])||E0(n[au])||E0(n[hu])||E0(n[su]))&&(n[nu]=n[au]=n[hu]=n[su]=!0,l?$t.calBorderRadiusInline(this.contentBoxList,e,o,this.root):$t.calBorderRadius(d,p,e,o,this.root)),o[nu]),B=o[au],Y=o[hu],H=o[su],r=(["Top","Right","Bottom","Left"].forEach(function(t){var e,r=ru[ou(t="border"+t)],i=ru[ou(t+"Width")],t=ru[ou(t+"Style")];E0(n[i])&&(n[i]=!0,n[r]=void 0),E0(n[t])&&(n[t]=!0,n[r]=void 0),E0(n[r])&&(r===m_?0<g?l||(i=Math.atan(g/y),e=Math.atan(g/m),n[r]=$t.calPoints(g,o[t],i,e,T,A,O,w,S,I,k,L,0,F,B)):n[r]=[]:r===v_?0<m?l||(i=Math.atan(m/g),e=Math.atan(m/v),n[r]=$t.calPoints(m,o[t],i,e,T,A,O,w,S,I,k,L,1,B,Y)):n[r]=[]:r===y_?0<v?l||(i=Math.atan(v/y),e=Math.atan(v/m),n[r]=$t.calPoints(v,o[t],i,e,T,A,O,w,S,I,k,L,2,H,Y)):n[r]=[]:r===x_&&(0<y?l||(i=Math.atan(y/g),e=Math.atan(y/v),n[r]=$t.calPoints(y,o[t],i,e,T,A,O,w,S,I,k,L,3,F,H)):n[r]=[]))}),t&&t.computedStyle);return e[f_][1]===c0?o[f_]=t?r[f_]:"normal":E0(n[f_])&&(o[f_]=e[f_][0]),n[f_]=o[f_],e[d_][1]===c0?(o[d_]=t?r[d_]:[0,0,0,1],n[d_]=v0(o[d_])):E0(n[d_])&&(o[d_]=y0(e[d_][0]),n[d_]=v0(o[d_])),e[A_][1]===c0?(o[A_]=t?r[A_]:[0,0,0,1],n[A_]=v0(o[A_])):E0(n[A_])&&(o[A_]=y0(e[A_][0]),n[A_]=v0(o[A_])),e[R_][1]===c0?(o[R_]=t?r[R_]:0,n[R_]=!0):E0(n[R_])&&(i=(i=e[R_])[1]===_0?i[0]*this.root.computedStyle[b_]:i[1]===f0?i[0]*this.root.width*.01:i[1]===d0?i[0]*this.root.height*.01:i[1]===p0?i[0]*Math.max(this.root.width,this.root.height)*.01:i[1]===g0?i[0]*Math.min(this.root.width,this.root.height)*.01:i[0],o[R_]=i,n[R_]=!0),e[O_][1]===c0?n[O_]=o[O_]=t?r[O_]:"none":n[O_]=o[O_]=e[O_][0],e[p_][1]===c0?o[p_]=t?r[p_]:"visible":E0(n[p_])&&(o[p_]=e[p_][0]),n[p_]=o[p_],e[g_][1]===c0?o[g_]=t?r[g_]:"auto":E0(n[g_])&&(o[g_]=e[g_][0]),n[g_]=o[g_],this.__bx1=s,this.__bx2=D,this.__by1=h,this.__by2=N,[s,h,D,N]}},{key:"__calPerspective",value:function(t,e,r,i,o,n){var a,s,h;E0(t[Wu])&&(a=t[Wu]=!0,s=0,s=(h=e[Wu])[1]===_0?h[0]*this.root.computedStyle[b_]:h[1]===f0?h[0]*this.root.width*.01:h[1]===d0?h[0]*this.root.height*.01:h[1]===p0?h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===g0?h[0]*Math.min(this.root.width,this.root.height)*.01:h[0],r[Wu]=s),E0(t[Uu])&&(a=t[Uu]=!0,r[Uu]=la.calOrigin(e[Uu],this.offsetWidth,this.offsetHeight,this.root)),a&&(void 0===o&&(o=this.__sx1,n=this.__sy1),(h=r[Uu].slice(0))[0]+=o||0,h[1]+=n||0,i[i0]=la.calPerspectiveMatrix(r[Wu],h))}},{key:"__calFilter",value:function(t,e){var r=this;return e[n_]=(t[n_]||[]).map(function(t){var t=Zt(t,2),e=t[0],t=t[1];return t[1]===h0||t[1]===m0||t[1]===l0||t[1]===u0?t=t[0]:t[1]===_0?t=t[0]*r.root.computedStyle[b_]:t[1]===f0?t=t[0]*r.root.width*.01:t[1]===d0?t=t[0]*r.root.height*.01:t[1]===p0?t=t[0]*Math.max(r.root.width,r.root.height)*.01:t[1]===g0&&(t=t[0]*Math.min(r.root.width,r.root.height)*.01),[e,t]})}},{key:"__calContent",value:function(t,e,r,i){if(t===Jc||t===tu){if(e<k0)return this.__hasContent;if("hidden"!==r[p_]){var o=r[Zu];if(Array.isArray(o))for(var n=0,c=o.length;n<c;n++)if(o[n])return!0;if(0<r[$u][0][3]){var t=i[Ou],e=i[wu],u=i[uu],_=i[cu],f=i[_u],d=i[lu];if(t&&e||u||_||f||d)return!0}for(var p=["Top","Right","Bottom","Left"],a=0,g=p.length;a<g;a++){var m=p[a];if(0<i[ru[ou("border"+m+"Width")]]&&0<r[ru[ou("border"+m+"Color")]][0][3])return!0}var s=r[Ju];if(Array.isArray(s))for(var h=0,v=s.length;h<v;h++){var l=s[h];if(l&&(0<l[2]||0<l[3]))return!0}}}return!1}},{key:"render",value:function(b,t,M,e){var k,T=this,A=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,R=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,r=this.isDestroyed,i=this.root,O=this.__config,o=O[j_],L=O[F_],n=O[B_],w=O[Y_];if(O[z_]=S0,k0<=t&&(this.__bbox=null),r)return{isDestroyed:r,break:!0};b===Qc&&(k=O[n0]=this.__virtualDom={bb:[],children:[],visibility:"visible"},O[$_]?O[$_].available||(O[$_].available=!0):O[$_]={available:!0,release:function(){this.available=!1,delete k.cache}});r=w[Ru];if("none"===r)return{break:!0};var a,s,h,l,c,u,_,f=this.clientWidth,d=this.clientHeight,p=this.offsetWidth,g=this.offsetHeight,m=this.__hasMask,D=w[uu],N=w[cu],P=w[_u],F=w[lu],S=w[mu],B=w[xu],I=w[vu],C=w[yu],v=O[r0],y=this.__sx1,x=this.__sx2,E=this.__sx3,Y=this.__sx4,H=this.__sx5,G=this.__sx6,W=this.__sy1,U=this.__sy2,X=this.__sy3,V=this.__sy4,K=this.__sy5,z=this.__sy6,j={ctx:M,x1:y,x2:x,x3:E,x4:Y,x5:H,x6:G,y1:W,y2:U,y3:X,y4:V,y5:K,y6:z,sx1:y,sx2:x,sx3:E,sx4:Y,sx5:H,sx6:G,sy1:W,sy2:U,sy3:X,sy4:V,sy5:K,sy6:z},$=O[e0],t=(b===tu&&this.__calPerspective(L,n,w,O),a=e&&b===Jc?O[X_]:this.__calMatrix(t,L,n,w,O,y,W,p,g),this.__hasContent=O[K_]=this.__calContent(b,t,n,w)),Z=(e&&b===tu?!t&&this.__releaseWhenEmpty(o,w)?(j.break=!0,O[V_]=!1):O[V_]||(t=this.bbox,o?o.reset(t,y,W):o=ga.getInstance(t,y,W),o&&o.enabled?(o.__bbox=t,M=o.ctx,A+=o.dx,R+=o.dy,j.ctx=M):(O[V_]=!0,j.limitCache=j.break=!(o=null)),O[j_]=o):b===tu&&(t=De.getCacheCanvas(i.width,i.height,"__$$OVERSIZE$$__"),j.ctx=M=t.ctx),j.dx=A,j.dy=R,c=e&&b===Jc?(s=this.__bx1,l=this.__bx2,h=this.__by1,this.__by2):(t=Zt(this.__calCache(b,M,$,L,n,w,f,d,p,g,I,B,C,S,D,N,P,F,y,x,E,Y,H,G,W,U,X,V,K,z),4),s=t[0],h=t[1],l=t[2],t[3]),j.bx1=s,j.by1=h,j.bx2=l,j.by2=c,w[$u]),q=w[l_],J=w[__],Q=w[c_],tt=w[u_],f=w[nu],d=w[au],x=w[hu],E=w[su],Y=w[p_],et=w[qu],rt=w[Zu],H=w[Qu],U=w[n_],it=w[ju],ot=w[Ju],X=w[a_],V=w[s_],nt=w[E_];if(e&&b===Jc?H=O[W_]:b===Jc||b===tu?($&&(H*=$.__config[W_]),O[W_]=H):b===Qc&&(1===H?delete k.opacity:k.opacity=H),b===Qc&&(qt.isE(a)?delete k.transform:k.transform="matrix("+x0(qt.m2m6(a),",")+")",k.visibility=Y),b===Jc&&e?a=O[U_]:(K=O[X_],xt.assignMatrix(K,a),$&&($.perspectiveMatrix&&(a=qt.multiply($.perspectiveMatrix,a)),a=qt.multiply($.matrixEvent,a)),K=O[U_],xt.assignMatrix(K,a)),j.limitCache)return j;"normal"!==V&&R0(V)?(V=A0(V),b===Jc&&e!==eu?(t=i.width,$=i.height,K=De.getCacheCanvas(t,$,null,"blend"),u={ctx:M,target:K,mixBlendMode:V,matrix:a},M=K.ctx):b===Qc&&(k.mixBlendMode=V)):b===Qc&&delete k.mixBlendMode,m&&b===Jc&&e!==eu&&(t=i.width,$=i.height,K=De.getCacheCanvas(t,$,null,"mask1"),_={ctx:M,target:K,matrix:a},M=K.ctx);U&&U.length?b===Jc&&e!==eu?(V=i.width,m=i.height,t=De.getCacheCanvas(V,m,null,"filter"),at={ctx:M,filter:U,target:t,matrix:a},M=t.ctx):b===Qc&&(k.filter=yt.svgFilter(U)):b===Qc&&delete k.filter;var at,st,ht,lt,ct=f.slice(0),ut=d.slice(0),_t=x.slice(0),ft=E.slice(0);if("padding-box"===nt||"paddingBox"===nt?(ct[0]-=S,ct[1]-=I,ut[0]-=B,ut[1]-=I,_t[0]-=B,_t[1]-=C,ft[0]-=S,ft[1]-=C):"content-box"!==nt&&"contentBox"!==nt||(ct[0]-=S+F,ct[1]-=I+D,ut[0]-=B+N,ut[1]-=I+D,_t[0]-=B+N,_t[1]-=C+P,ft[0]-=S+F,ft[1]-=C+P),"hidden"===X&&"inline"!==r?(ht=$t.calRadius(s,h,l-s,c-h,ct,ut,_t,ft),b===Jc&&e!==eu?($=i.width,K=i.height,V=De.getCacheCanvas($,K,null,"overflow"),st={ctx:M,target:V,matrix:a},M=V.ctx,st.x=y,st.y=W,st.offsetWidth=p,st.offsetHeight=g,st.list=ht):b===Qc&&(m={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",qc(ht)||"M".concat(y,",").concat(W,"L").concat(y+p,",").concat(W,"L").concat(y+p,",").concat(W+g,"L").concat(y,",").concat(W+g,",L").concat(y,",").concat(W)]]}]},t=M.add(m),O[t0].push(m),k.overflow="url(#"+t+")")):b===Qc&&delete k.overflow,b===Jc&&(j.offscreenBlend=u,j.offscreenMask=_,j.offscreenFilter=at,j.offscreenOverflow=st,(j.ctx=M).globalAlpha=H,e||M.setTransform(a[0],a[1],a[4],a[5],a[12],a[13])),("hidden"===Y||j.break)&&(b===Jc||b===tu))return j.break=!0,j;if(o&&o.enabled&&(o.__available=!0),v){var dt=this.contentBoxList,pt=dt.length,gt=rt.some(function(t){return t});if(pt){U=function(){for(var c,o,t=w[b_],e=w[M_],u=w[T_],i=0,_=0,f=[],e=(gt&&(i=Zc.getInlineWidth(T,dt),_=u,"paddingBox"===nt||"padding-box"===nt?(i+=F+N,_+=D+P):"contentBox"!==nt&&"content-box"!==nt&&(i+=F+N+S+B,_+=D+P+I+C),b!==Jc&&b!==tu||(c=De.getCacheCanvas(i,_,"__$$INLINE_BGI$$__")),o=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=o-1-e,xt.isString(t)?(r=T.__loadBgi[e]).url===rt[e]&&(r=sh.renderImage(T,b,c&&c.ctx||M,r,0,0,i,_,ct,ut,_t,ft,n,e,it,et,O,!0,A,R),b===Qc&&r&&f.push(r)):!t.k||(e=T.__gradient(b,M,0,0,i,_,t,A,R))&&("conic"===e.k?(r=ir.renderConic(T,b,c&&c.ctx||M,e.v,0,0,i,u,ct,ut,_t,ft,!0),b===Qc&&r&&f.push(r)):(t=sh.renderBgc(T,b,c&&c.ctx||M,e.v,null,0,0,i,_,ct,ut,_t,ft,"fill",!0),b===Qc&&t&&f.push(t))))})),Mo.getFontFamily(e)),y=Mo.getBaseLine(w),x=t*(vt.info[e].lgr||0),d=!0,p=dt[0],g=p.parentLineBox,m=0,v=0;v<pt;v++){var E=dt[v];E.parentLineBox!==g&&!function(){var t=Zt(Zc.getInlineBox(T,dt,p,dt[v-1],g,y,u,x,d,!1,nt,D,N,P,F,I,B,C,S),8),i=t[0],o=t[1],e=t[2],r=t[3],n=t[4],a=t[5],s=t[6],h=t[7],l=(d&&(t=P0(T),i-=t,n-=t),0<Z[3]&&sh.renderBgc(T,b,M,L[$u],null,i,o,e-i,r-o,ct,[0,0],[0,0],ft,"fill",!1,A,R),e-i);b!==Jc&&b!==tu||!c?b===Qc&&f.length&&f.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(m,",",0,"L").concat(l+m,",",0,"L").concat(l+m,",").concat(_,"L").concat(m,",").concat(_,",L").concat(m,",",0)]]}]},r=M.add(e),O[t0].push(e),k.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-m],["y",o],["clip-path","url(#"+r+")"]]}))}):M.drawImage(c.canvas,m,0,l,_,i+A,o+R,l,_),m+=l,ot&&ot.forEach(function(t){Gc.renderBoxShadow(T,b,M,t,n,a,s,h,s-n,h-a,A,R)}),0<I&&0<q[3]&&(t=Math.atan(I/S),r=Math.atan(I/B),e=$t.calPoints(I,w[e_],t,r,n,n+S,s,s,a,a+I,h-C,h,0,d?ct:[0,0],[0,0]),$t.renderBorder(T,b,M,e,L[l_],A,R)),0<C&&0<Q[3]&&(t=Math.atan(C/S),r=Math.atan(C/B),e=$t.calPoints(C,w[i_],t,r,n,n+S,s,s,a,a+I,h-C,h,2,d?ct:[0,0],[0,0]),$t.renderBorder(T,b,M,e,L[c_],A,R)),d&&0<S&&0<tt[3]&&(t=Math.atan(S/I),r=Math.atan(S/C),e=$t.calPoints(S,w[o_],t,r,n,n+S,s-B,s,a,a+I,h-C,h,3,ct,ut),$t.renderBorder(T,b,M,e,L[u_],A,R)),d=!1,g=(p=E).parentLineBox}(),v===pt-1&&function(){var t=Zt(Zc.getInlineBox(T,dt,p,dt[v],g,y,u,x,d,!0,nt,D,N,P,F,I,B,C,S),8),i=t[0],o=t[1],e=t[2],r=t[3],n=t[4],a=t[5],s=t[6],h=t[7],t=(d&&(t=P0(T),i-=t,n-=t),function t(e){for(var r=0,i=e.flowChildren,o=i.length-1;0<=o;o--){var n=i[o];if(!(n instanceof F0||n instanceof Ns&&n.shadowRoot instanceof F0))break;if(n.flowChildren.length){r+=t(n);break}r+=n.outerWidth}return r}(T)),l=(e+=t,s+=t,0<Z[3]&&sh.renderBgc(T,b,M,L[$u],null,i,o,e-i,r-o,d?ct:[0,0],ut,_t,d?ft:[0,0],"fill",!1,A,R),e-i);b!==Jc&&b!==tu||!c?b===Qc&&f.length&&f.forEach(function(t){var e,r;t&&(e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d","M".concat(m,",",0,"L").concat(l+m,",",0,"L").concat(l+m,",").concat(_,"L").concat(m,",").concat(_,",L").concat(m,",",0)]]}]},r=M.add(e),O[t0].push(e),k.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",i-m],["y",o],["clip-path","url(#"+r+")"]]}))}):M.drawImage(c.canvas,m,0,l,_,i+A,o+R,l,_),ot&&ot.forEach(function(t){Gc.renderBoxShadow(T,b,M,t,n,a,s,h,s-n,h-a,A,R)}),0<I&&0<q[3]&&(t=Math.atan(I/S),r=Math.atan(I/B),e=$t.calPoints(I,w[e_],t,r,n,n,s-B,s,a,a+I,h-C,h,0,d?ct:[0,0],ut),$t.renderBorder(T,b,M,e,L[l_],A,R)),0<B&&0<J[3]&&(t=Math.atan(B/I),r=Math.atan(B/C),e=$t.calPoints(B,w[r_],t,r,n,n+S,s-B,s,a,a+I,h-C,h,1,ct,ut),$t.renderBorder(T,b,M,e,L[__],A,R)),0<C&&0<Q[3]&&(t=Math.atan(C/S),r=Math.atan(C/B),e=$t.calPoints(C,w[i_],t,r,n,n,s-B,s,a,a+I,h-C,h,2,d?ct:[0,0],ut),$t.renderBorder(T,b,M,e,L[c_],A,R)),d&&0<S&&0<tt[3]&&(t=Math.atan(S/I),r=Math.atan(S/C),e=$t.calPoints(S,w[o_],t,r,n,n+S,s-B,s,a,a+I,h-C,h,3,ct,ut),$t.renderBorder(T,b,M,e,L[u_],A,R))}()}return c&&c.ctx.clearRect(0,0,i,_),{v:j}}();if("object"===mt(U))return U.v}else if(s===l||h===c)return j}return 0<Z[3]&&sh.renderBgc(this,b,M,L[$u],ht,s,h,l-s,c-h,ct,ut,_t,ft,"fill",!1,A,R),rt&&(lt=rt.length,rt.slice(0).reverse().forEach(function(t,e){var r;t&&(e=lt-1-e,xt.isString(t)?(r=T.__loadBgi[e]).url===rt[e]&&sh.renderImage(T,b,M,r,s,h,l,c,ct,ut,_t,ft,n,e,it,et,O,!1,A,R):!t.k||(r=T.__gradient(b,M,s,h,l,c,t,A,R))&&("conic"===r.k?ir.renderConic(T,b,M,r.v,s,h,l-s,c-h,ct,ut,_t,ft):sh.renderBgc(T,b,M,r.v,ht,s,h,l-s,c-h,ct,ut,_t,ft,"fill",!1,A,R)))})),ot&&ot.forEach(function(t){Gc.renderBoxShadow(T,b,M,t,y,W,G,z,G-y,z-W,A,R)}),0<I&&0<q[3]&&$t.renderBorder(this,b,M,L[m_],L[l_],A,R),0<B&&0<J[3]&&$t.renderBorder(this,b,M,L[v_],L[__],A,R),0<C&&0<Q[3]&&$t.renderBorder(this,b,M,L[y_],L[c_],A,R),0<S&&0<tt[3]&&$t.renderBorder(this,b,M,L[x_],L[u_],A,R),j}},{key:"__destroy",value:function(){var t;this.isDestroyed||(P(N(n.prototype),"__destroy",this).call(this),t=this.root,this.clearAnimate(),this.clearFrameAnimate(),t&&t.delRefreshTask(this.__loadBgi.cb),t&&t.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache())}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,o=this.isMask;if(!(r||"none"===i[Ru]||t.__stopPropagation||o)){var n,r=t.event.type,o=this.listener,a=this.__hasMask;if(o.hasOwnProperty(r)&&(n=o[r]),e)return"none"!==i[g_]&&b0(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0;if(this.willResponseEvent(t)){if(a){for(var s,h=this.next,o=h.isClip;h&&h.isMask;){if(h.willResponseEvent(t,!0)){s=!0;break}h=h.next}if(!o&&!s)return}return b0(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,o=this.__sx1,n=this.__sy1,a=this.offsetWidth,s=this.offsetHeight,h=this.matrixEvent,l=this.computedStyle;if("none"!==l[g_])return nt.pointInQuadrilateral(r,i,o,n,o+a,n,o+a,n+s,o,n+s,h)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(l,c,t,e,u,_,r){var i,f,o,n,a,s,h,d=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,p=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,g=u-t,m=_-e;if(g&&m)return h=r.k,i=r.v,f=r.d,n=r.s,a=r.z,r=r.p,o={k:h},"linear"===h?(s=ir.getLinear(i,f,t,e,t+.5*g,e+.5*m,g,m,this.root,d,p),o.v=this.__getLg(l,c,s)):"radial"===h?(s=ir.getRadial(i,n,a,r,t,e,u,_,this.root,d,p))&&(o.v=this.__getRg(l,c,s),s.matrix&&(o.v=[o.v,s.matrix,s.cx,s.cy])):"conic"===h&&(n=this.bbox,a=Math.max(Math.abs(n[2]-n[0]),Math.abs(n[3]-n[1])),s=Math.max(Math.abs(g),Math.abs(m)),h=ir.getConic(i,f,r,t,e,u,_,a/s,this.root,d,p),o.v=this.__getCg(l,c,h)),o}},{key:"__getLg",value:function(t,e,r){var i;return t===Jc||t===tu?(i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2),r.stop.forEach(function(t){i.addColorStop(t[1],v0(t[0]))}),i):t===Qc?(t={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",v0(t[0])],["offset",100*t[1]+"%"]]}})},r=e.add(t),this.__config[t0].push(t),"url(#"+r+")"):void 0}},{key:"__getRg",value:function(t,e,r){var i;return t===Jc||t===tu?(i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r),r.stop.forEach(function(t){i.addColorStop(t[1],v0(t[0]))}),i):t===Qc?(t={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map(function(t){return{tagName:"stop",props:[["stop-color",v0(t[0])],["offset",100*t[1]+"%"]]}})},r.tx!==r.cx&&t.props.push(["fx",r.cx]),r.ty!==r.cy&&t.props.push(["fy",r.cy]),r=e.add(t),this.__config[t0].push(t),"url(#"+r+")"):void 0}},{key:"__getCg",value:function(t,c,e){var u=e.cx,_=e.cy,f=e.r,d=e.deg,r=e.stop,i=r.length-1,p=(r[i][1]<1&&r.push([r[i][0].slice(0),1]),0<r[0][1]&&r.unshift([r[0][0].slice(0),0]),[]);if(t===Jc||t===tu)return e;if(t===Qc){for(var o,g=[],n=0,m=r.length;n<m-1;n++)for(var v=360*r[n][1],a=360*r[n+1][1]-v,y=Math.ceil(a),x=a/y,s=r[n][0],a=r[n+1][0],a=[a[0]-s[0],a[1]-s[1],a[2]-s[2],a[3]-s[3]],E=[a[0]/y,a[1]/y,a[2]/y,a[3]/y],h=0;h<y;h++){var b=Zt(nt.pointOnCircle(u,_,f,v+x*h+d-.5),2),M=b[0],b=b[1],T=Zt(nt.pointOnCircle(u,_,f,v+x*h+d+.5),2),A=T[0],T=T[1];g.push([M,b,A,T,Math.round(s[0]+E[0]*h),Math.round(s[1]+E[1]*h),Math.round(s[2]+E[2]*h),Math.round(s[3]+E[3]*h)])}i=g[0].slice(0),e=Zt(nt.pointOnCircle(u,_,f,d),2),t=e[0],e=e[1],t=(i[2]=t,i[3]=e,r[r.length-1][0]);i[4]=t[0],i[5]=t[1],i[6]=t[2],i[7]=t[3],g.push(i);for(var R=0,O=g.length;R<O;R++){var w,S,l=g[R];o&&(w={tagName:"linearGradient",props:[["x1",o[0]],["y1",o[1]],["x2",l[2]],["y2",l[3]]],children:[{tagName:"stop",props:[["stop-color",v0([o[4],o[5],o[6],o[7]])],["offset","0%"]]},{tagName:"stop",props:[["stop-color",v0([l[4],l[5],l[6],l[7]])],["offset","100%"]]}]},S=c.add(w),this.__config[t0].push(w),p.push([[[u,_],[o[0],o[1]],[l[2],l[3]]],"url(#"+S+")"])),o=l}}return p}},{key:"clearCache",value:function(t){var e=this.__config,r=e[$_],i=e[Z_],o=e[q_],n=e[J_];t||(e[F_]=this.__cacheStyle={},(t=e[j_])&&t.release()),r&&r.release(),i&&i.release(),o&&o.release(),n&&n.release()}},{key:"updateStyle",value:function(e,r){var i=this,o=i.root,n=i.__config,a=Mo.normalize(e);o?o.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,n[Q_]||((t={})[w_]=i,t[I_]=a,t[C_]=e,t[k_]=Object.keys(a).map(function(t){return t=T0.hasOwnProperty(t)?t:parseInt(t)}),t[L_]=n,o.__addUpdate(i,n,o,o.__config,t))},__after:function(t){b0(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,a),b0(r)&&r.call(i,-1))}},{key:"updateFormatStyle",value:function(e,r){var i=this,o=i.root,n=i.__config;o?o.addRefreshTask(i.__task={__before:function(){var t;i.__task=null,n[Q_]||((t={})[w_]=i,t[I_]=e,t[k_]=Object.keys(e).map(function(t){return t=T0.hasOwnProperty(t)?t:parseInt(t)}),t[L_]=n,o.__addUpdate(i,n,o,o.__config,t))},__after:function(t){b0(r)&&r.call(i,t)}}):(Object.assign(this.currentStyle,e),b0(r)&&r.call(i,-1))}},{key:"animate",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=new Pc(this,t,e);return this.isDestroyed?(t.__destroy(!0),t):(this.animationList.push(t),!1===e.autoPlay?t:t.play())}},{key:"removeAnimate",value:function(t){var e;t instanceof Pc&&(-1<(e=this.animationList.indexOf(t))&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1)))}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach(function(t){t.cancel(),t.__destroy()})}},{key:"frameAnimate",value:function(e){if(b0(e)){for(var t=this.__frameAnimateList,r=0,i=t.length;r<i;r++)if(t[r].__karasFramecb===e)return e;var o={__after:function(t){e(t)},__karasFramecb:e};return t.push(o),ch.onFrame(o),e}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void ch.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach(function(t){ch.offFrame(t)})}},{key:"__computeMeasure",value:function(t,e,r){Mo.computeMeasure(this),b0(r)&&r(this)}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){P(N(n.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[z_]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t}},{key:"__offsetY",value:function(t,e,r){P(N(n.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData.y+=t,this.clearCache()),void 0!==r&&(this.__config[z_]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t}},{key:"__resizeX",value:function(t,e){this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData.w+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[V_]=!1),void 0!==e&&(this.__config[z_]|=e),this.clearCache()}},{key:"__resizeY",value:function(t,e){this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[V_]=!1),void 0!==e&&(this.__config[z_]|=e),this.clearCache()}},{key:"__spreadBbox",value:function(t,e){var n=0,a=0,s=0,h=0,l=[],c=[],u=[],_=[];return Array.isArray(t)&&t.forEach(function(t){var t=Zt(t,6),e=t[0],r=t[1],i=t[2],o=t[3],t=t[5];n=s=e,a=h=r,"inset"!==t&&(t=_a.outerSize(i),l.push(e-(t+=o)),u.push(e+t),c.push(r-t),_.push(r+t))}),Array.isArray(e)&&e.forEach(function(t){var t=Zt(t,2),e=t[0],t=t[1][0];"blur"===e&&0<t&&(e=_a.kernelSize(t),(t=_a.outerSizeByD(e))&&(l.push(-t),u.push(t),c.push(-t),_.push(t)))}),l.forEach(function(t){return n=Math.min(n,t)}),u.forEach(function(t){return s=Math.max(s,t)}),c.forEach(function(t){return a=Math.min(a,t)}),_.forEach(function(t){return h=Math.max(h,t)}),[n,a,s,h]}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=t?(i=Array.isArray(t)?t:[t]).map(function(t){return ru[ou(t)]}):Object.keys(e);return i.forEach(function(t){T0.hasOwnProperty(t)?r[t]=e[t]:r[iu[t]]=e[t]}),r}},{key:"getBoundingClientRect",value:function(t){var e=[],t=(e=t?this.bbox:[t=this.__sx1,r=this.__sy1,t+this.offsetWidth,r+this.offsetHeight],this.matrixEvent),r=O0(qt.calPoint([e[0],e[1]],t)),i=O0(qt.calPoint([e[2],e[1]],t)),o=O0(qt.calPoint([e[2],e[3]],t)),e=O0(qt.calPoint([e[0],e[3]],t));return{left:Math.min(r[0],Math.min(i[0],Math.min(o[0],e[0]))),top:Math.min(r[1],Math.min(i[1],Math.min(o[1],e[1]))),right:Math.max(r[0],Math.max(i[0],Math.max(o[0],e[0]))),bottom:Math.max(r[1],Math.max(i[1],Math.max(o[1],e[1]))),points:[r,i,o,e]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(e){var o=this;if(o.isDestroyed)return De.warn("Remove target is destroyed."),void(b0(e)&&e());var n=o.root,a=o.domParent,t=o.isShadowRoot?o.hostRoot:o;-1!==a.children.indexOf(t)?(n.delRefreshTask(o.__task),n.addRefreshTask(o.__task={__before:function(){o.__task=null;var t=a.__json,e=t.children.indexOf((o.isShadowRoot?o.hostRoot:o).__json),r=a.zIndexChildren,i=r.indexOf(o.isShadowRoot?o.hostRoot:o);if(-1===e||-1===i)throw new Error("Remove index Exception.");t.children.splice(e,1),a.children.splice(e,1),r.splice(i,1),o.__prev&&(o.__prev.__next=o.__next);t={};t[w_]=o,t[S_]=C0,t[D_]=!0,t[L_]=o.__config,n.__addUpdate(o,o.__config,n,n.__config,t)},__after:function(t){(o.isShadowRoot?o.hostRoot:o).__destroy(),b0(e)&&e.call(o,t)}})):b0(e)&&e()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){var t,e,r,i,o,n,a,s;return this.__bbox||(t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,s=(o=this.currentStyle)[Ju],o=o[n_],o=(s=Zt(this.__spreadBbox(s,o),4))[0],n=s[1],a=s[2],s=s[3],this.__bbox=[t+o,e+n,t+r+a,e+i+s]),this.__bbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[X_]}},{key:"matrixEvent",get:function(){return this.__config[U_]}},{key:"perspectiveMatrix",get:function(){return this.__config[i0]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseLine",get:function(){return this.offsetHeight}},{key:"firstBaseLine",get:function(){return this.offsetHeight}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[a0]=this.__cacheAsBitmap=!!t}}]),n}(),ki=A.STYLE_KEY,B0=ki.DISPLAY,Y0=ki.MARGIN_LEFT,H0=ki.BORDER_LEFT_WIDTH,G0=ki.PADDING_LEFT,W0=ki.PADDING_RIGHT,U0=ki.BORDER_RIGHT_WIDTH,X0=ki.MARGIN_RIGHT,V0=function(){function o(t,e,r,i){f(this,o),this.__list=[],this.__x=t,this.__y=e,this.__lineHeight=r,this.__baseLine=i}return g(o,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(){var r,i=this.baseLine,t=this.lineHeight,o=t,e=(this.list.length&&this.list.forEach(function(t){t.isReplaced&&(r=!0);var e=t.baseLine;e!==i&&(t.__offsetY(e=i-e),0<e&&(o=Math.max(o,t.height+e)))}),0);return r&&(e=this.__lineHeight-this.__baseLine),e=t<o?Math.max(o-t):e}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(r,t){this.__y+=r,t&&this.list.forEach(function(t){var e;t instanceof Lo?(e=t.parent).textBoxes[0]===t&&e.__offsetY(r):t.__offsetY(r)})}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseLine=Math.max(e,this.__baseLine)}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){var t=this.list,e=t.length;if(e){for(var r=t[0],t=t[e-1],i=r.x,o=(r instanceof Lo?r.parent:r).domParent;;){var n=o.contentBoxList,a=o.computedStyle,c=a[B0],u=a[Y0],_=a[H0],a=a[G0];if("inline"!==c)break;r===n[0]&&(i-=u+_+a),o=o.domParent}for(var s=t.x+t.outerWidth,o=(t instanceof Lo?t.parent:t).domParent;;){var h=o.contentBoxList,l=o.computedStyle,f=l[B0],d=l[X0],p=l[U0],l=l[W0];if("inline"!==f)break;r===h[h.length-1]&&(s+=d+p+l),o=o.domParent}return s-i}return 0}},{key:"height",get:function(){return this.lineHeight}},{key:"baseLine",get:function(){var e=this.__baseLine;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"lineHeight",get:function(){var e=this.__lineHeight;return this.list.forEach(function(t){e=Math.max(e,t.outerHeight)}),e}}]),o}(),K0=function(){function o(t,e,r,i){f(this,o),this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__maxX=t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseLine=i,this.__isEnd=!0}return g(o,[{key:"genLineBox",value:function(t,e){t=new V0(t,e,this.__lineHeight,this.__baseLine);return this.list.push(t),this.__isEnd=!0,t}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){r=Math.max(this.__lineHeight,r),i=Math.max(this.__baseLine,i);if(this.__isNewLine)return t=new V0(t,e,r,i),this.list.push(t),this.__isEnd=!0,this.__isNewLine=!1,t}},{key:"setLbOrGenLineBoxByInline",value:function(t,e,r,i){var o,n=Math.max(this.__lineHeight,r),a=Math.max(this.__baseLine,i),s=this.list;if(this.__isNewLine)return o=new V0(t,e,n,a),s.push(o),this.__isEnd=!0,this.__isNewLine=!1,o;(o=s[s.length-1]).__setLB(r,i)}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(e,t){var r;return r=this.__isNewLine?(this.__isNewLine=!1,this.genLineBox(e.x,e.y)):(r=this.list)[r.length-1],this.__domStack.forEach(function(t){t.__contentBoxList.push(e)}),r.add(e),t?(this.__isNewLine=!0,this.__lastX=e.x,this.__lastY=e.y+e.outerHeight):(this.__lastX=e.x+e.outerWidth,this.__lastY=e.y),this.__maxX=Math.max(this.__maxX,e.x+e.outerWidth),r}},{key:"horizonAlign",value:function(r,i){this.list.forEach(function(t){var e=r-t.width;0<e&&("center"===i&&(e*=.5),t.__offsetX(e),t.list.forEach(function(t){t.__offsetX(e,!0)}))})}},{key:"verticalAlign",value:function(){var e=0;return this.list.forEach(function(t){e&&t.__offsetY(e,!0),e+=t.verticalAlign()}),e}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e){this.list.forEach(function(t){t.__offsetY(e)})}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return 1<this.list.length}},{key:"domList",get:function(){return this.__domList}},{key:"baseLine",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseLine}return 0}},{key:"firstBaseLine",get:function(){var t=this.list;return t.length?t[0].baseLine:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.width)}),e}}]),o}(),z0={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},Ur=A.STYLE_KEY,j0=Ur.DISPLAY,$0=Ur.TOP,Z0=Ur.BOTTOM,q0=Ur.POSITION,J0=Ur.HEIGHT,Q0=r.AUTO,tf=r.PX,ef=r.PERCENT,rf=Ra.REFLOW;var of={offsetAndResizeByNodeOnY:function(t,e,c,r,u){if(r){for(;;){for(;t.isShadowRoot;)t=t.host;for(var i=t,_=void 0,o=t.domParent,n=(o&&(l=o.computedStyle[q0],_=o===e||o.isShadowRoot||"relative"===l||"absolute"===l),t.next),a=void 0;n;){if("none"!==n.currentStyle[j0])if("absolute"===n.currentStyle[q0]){var s=n.currentStyle,f=s[$0],h=s[Z0],s=s[J0];if(f[1]===Q0?h[1]===Q0||h[1]===tf?(n.__offsetY(r,!0,rf),n.clearCache()):h[1]===ef&&(h=(1-.01*h[0])*r,n.__offsetY(h,!0,rf),n.clearCache()):f[1]===ef&&(h=.01*f[0]*r,n.__offsetY(h,!0,rf),n.clearCache()),s[1]===ef)if(_)o.__layoutAbs(o,null,n);else{if(!a)for(a=o;a&&a!==e&&!a.isShadowRoot;){var d=a.currentStyle;if("absolute"===d[q0]||"relative"===d[q0])break;a=a.domParent}u.push([o,a,n])}}else n.__offsetY(r,!0,rf),n.clearCache();n=n.next}if(!o)break;var l=(t=o).currentStyle,p=void 0;if("absolute"===l[q0]?l[J0][1]!==Q0||l[$0][1]!==Q0&&l[Z0][1]!==Q0||(p=!0):l[J0][1]===Q0&&(p=!0),!p)break;if(t.__resizeY(r,rf),t.clearCache(),t===e)break}for(;i;)i.clearCache(!0),i=i.domParent}},clearUniqueReflowId:function(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e].node.__uniqueReflowId},getMergeMarginTB:function(t,e){var r=0,i=t[0],o=t[0],t=(t.forEach(function(t){r+=t,i=Math.max(i,t),o=Math.min(o,t)}),e.forEach(function(t){r+=t,i=Math.max(i,t),o=Math.min(o,t)}),0);return 0<i&&0<o?t=Math.max(i,o)-r:i<0&&o<0?t=Math.min(i,o)-r:0===i&&0===o||(t=i+o-r),t}},re=A.STYLE_KEY,nf=re.POSITION,af=re.DISPLAY,sf=re.FONT_WEIGHT,hf=re.MARGIN_LEFT,lf=re.MARGIN_TOP,cf=re.MARGIN_RIGHT,uf=re.MARGIN_BOTTOM,_f=re.PADDING_LEFT,ff=re.PADDING_BOTTOM,df=re.PADDING_RIGHT,pf=re.PADDING_TOP,gf=re.BORDER_TOP_WIDTH,mf=re.BORDER_BOTTOM_WIDTH,vf=re.BORDER_RIGHT_WIDTH,yf=re.BORDER_LEFT_WIDTH,xf=re.TOP,Ef=re.RIGHT,bf=re.BOTTOM,Mf=re.LEFT,Tf=re.WIDTH,Af=re.HEIGHT,Rf=re.TEXT_ALIGN,Of=re.FLEX_DIRECTION,wf=re.FLEX_BASIS,Sf=re.FLEX_SHRINK,If=re.FLEX_GROW,Cf=re.ALIGN_SELF,kf=re.ALIGN_ITEMS,Lf=re.JUSTIFY_CONTENT,Df=re.Z_INDEX,Nf=re.WHITE_SPACE,Pf=re.LINE_HEIGHT,Ff=re.LINE_CLAMP,Bf=re.ORDER,Yf=re.FLEX_WRAP,Hf=re.ALIGN_CONTENT,Gf=re.OVERFLOW,Wf=re.FONT_SIZE,e=A.NODE_KEY,Uf=e.NODE_CURRENT_STYLE,Xf=e.NODE_STYLE,Vf=e.NODE_STRUCT,Kf=e.NODE_DOM_PARENT,zf=e.NODE_IS_INLINE,a=A.UPDATE_KEY,jf=a.UPDATE_NODE,$f=a.UPDATE_FOCUS,Zf=a.UPDATE_ADD_DOM,qf=a.UPDATE_CONFIG,Jf=a.UPDATE_MEASURE,i=A.STRUCT_KEY,Qf=i.STRUCT_NUM,t1=i.STRUCT_LV,e1=i.STRUCT_TOTAL,r1=i.STRUCT_CHILD_INDEX,i1=i.STRUCT_INDEX,o1=r.AUTO,n1=r.PX,a1=r.PERCENT,s1=r.REM,h1=r.VW,l1=r.VH,c1=r.VMAX,u1=r.VMIN,_1=Mo.calAbsolute,f1=Mo.isRelativeOrAbsolute;function d1(t){var i,o,n=[],a={},s=t.children;if(s.forEach(function(t,e){var r=t;(t=t instanceof Ns?t.shadowRoot:t)instanceof F0&&t.isMask?void 0!==o?a[o].push(t):e&&(s[o=e-1].__iIndex=o,a[o]=[t],i=!0):(o=void 0,t instanceof F0?(r.__zIndex=t.currentStyle[Df],f1(t)&&(r.__aIndex=!0)):r.__zIndex=0,n.push(r),r.__iIndex=e)}),n.sort(function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex}),i)for(var e=n.length-1;0<=e;e--){var r=n[e].__iIndex;a.hasOwnProperty(r)&&n.splice.apply(n,[e+1,0].concat(d(a[r])))}return n}function p1(t){var i=[];return t.forEach(function(t,e){var r=t;t instanceof Ns&&(t=t.shadowRoot),r.__order=t instanceof F0?t.currentStyle[Bf]:0,i.push(r),r.__iIndex=e}),i.sort(function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex}),i}var g1=function(){p(u,F0);var o=m(u);function u(t,e,r){f(this,u);var i=c(e=o.call(this,t,e)).style,t=(i.display&&{flex:!0,block:!0,inline:!0,inlineBlock:!0,"inline-block":!0,none:!0}.hasOwnProperty(i.display)||(z0.INLINE.hasOwnProperty(e.tagName)?i.display="inline":i.display="block"),!i[sf]&&z0.BOLD.hasOwnProperty(t)&&(i.fontWeight=700),e.__style=Mo.normalize(i,ur.DOM_ENTRY_SET),e.__currentStyle=xt.extend({},e.__style),e.__children=r||[],e.__flexLine=[],e.__config);return t[Uf]=e.__currentStyle,t[Xf]=e.__style,e}return g(u,[{key:"__structure",value:function(r,i,t){var t=P(N(u.prototype),"__structure",this).call(this,r++,i,t),o=[t],e=this.__zIndexChildren=this.__zIndexChildren||d1(this),n=(e.forEach(function(t,e){t=t.__structure(r,i+1,e);Array.isArray(t)?(r+=t.length,o=o.concat(t)):(r++,o.push(t))}),o.length-1);return t[Qf]=e.length,t[e1]=n,o}},{key:"__modifyStruct",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=this.__config,i=r[Vf],o=i[e1]||0,n=this.__structure(i[i1],i[t1],i[r1]),a=((a=t.__structs).splice.apply(a,[i[i1]+e,o+1].concat(d(n))),0);return this!==t&&(a=((i=r[Vf])[e1]||0)-o,(e=r[Kf].__config[Vf])[e1]=e[e1]||0,e[e1]+=a),[i,a]}},{key:"__updateStruct",value:function(t){var e=this.__config[Vf],r=e[i1],e=e[e1],i=void 0===e?0:e,e=this.__zIndexChildren=d1(this);if(1!==e.length){e.forEach(function(t,e){t.__config[Vf][r1]=e});for(var c,o=[],n=[],a=r+1;a<=r+i;a++){var s=t[a],u={child:s,list:t.slice(s[i1],s[i1]+s[e1]+1)};o.push(u),n.push(u),a+=s[e1]||0}o.sort(function(t,e){return t.child[r1]-e.child[r1]});for(var h,l=0,_=n.length;l<_;l++)if(n[l]!==o[l]){c=!0;break}c&&(h=[],o.forEach(function(t){h=h.concat(t.list)}),h.forEach(function(t,e){t[i1]=r+e+1}),t.splice.apply(t,[r+1,i].concat(d(h))))}}},{key:"__tryLayInline",value:function(t,e){var c=this.flowChildren,r=this.currentStyle,i=r[af],o=r[Tf],n=r[hf],a=r[cf],s=r[_f],h=r[df],l=r[yf],r=r[vf];if("inline"===i)c.length&&((i=(i=c[0])instanceof Ns?i.shadowRoot:i)instanceof F0?t=i.__tryLayInline(t,e):t-=i.firstCharWidth);else{if(o[1]===n1)t-=o[0];else if(o[1]===a1)t-=e*o[0]*.01;else if(o[1]===s1)t-=o[0]*this.root.computedStyle[Wf];else if(o[1]===h1)t-=o[0]*this.root.width*.01;else if(o[1]===l1)t-=o[0]*this.root.height*.01;else if(o[1]===c1)t-=o[0]*Math.max(this.root.width,this.root.height)*.01;else if(o[1]===u1)t-=o[0]*Math.min(this.root.width,this.root.height)*.01;else for(var u=0;u<c.length;u++){if(t<0)return t;var _=c[u];(_=_ instanceof Ns?_.shadowRoot:_)instanceof F0?t=_.__tryLayInline(t,e):t-=_.textWidth}a[1]===n1?t-=a[0]:a[1]===a1?t-=a[0]*e*.01:a[1]===s1?t-=a[0]*this.root.computedStyle[Wf]:a[1]===h1?t-=a[0]*this.root.width*.01:a[1]===l1?t-=a[0]*this.root.height*.01:a[1]===c1?t-=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===u1&&(t-=a[0]*Math.min(this.root.width,this.root.height)*.01),h[1]===n1?t-=h[0]:h[1]===a1?t-=h[0]*e*.01:h[1]===s1?t-=h[0]*this.root.computedStyle[Wf]:h[1]===h1?t-=h[0]*this.root.width*.01:h[1]===l1?t-=h[0]*this.root.height*.01:h[1]===c1?t-=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===u1&&(t-=h[0]*Math.min(this.root.width,this.root.height)*.01),r[1]===n1?t-=r[0]:r[1]===s1?t-=r[0]*this.root.computedStyle[Wf]:r[1]===h1?t-=r[0]*this.root.width*.01:r[1]===l1?t-=r[0]*this.root.height*.01:r[1]===c1?t-=r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===u1&&(t-=r[0]*Math.min(this.root.width,this.root.height)*.01)}return n[1]===n1?t-=n[0]:n[1]===a1?t-=n[0]*e*.01:n[1]===s1?t-=n[0]*this.root.computedStyle[Wf]:n[1]===h1?t-=n[0]*this.root.width*.01:n[1]===l1?t-=n[0]*this.root.height*.01:n[1]===c1?t-=n[0]*Math.max(this.root.width,this.root.height)*.01:n[1]===u1&&(t-=n[0]*Math.min(this.root.width,this.root.height)*.01),s[1]===n1?t-=s[0]:s[1]===a1?t-=s[0]*e*.01:s[1]===s1?t-=s[0]*this.root.computedStyle[Wf]:s[1]===h1?t-=s[0]*this.root.width*.01:s[1]===l1?t-=s[0]*this.root.height*.01:s[1]===c1?t-=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===u1&&(t-=s[0]*Math.min(this.root.width,this.root.height)*.01),l[1]===n1?t-=l[0]:l[1]===s1?t-=l[0]*this.root.computedStyle[Wf]:l[1]===h1?t-=l[0]*this.root.width*.01:l[1]===l1?t-=l[0]*this.root.height*.01:l[1]===c1?t-=l[0]*Math.max(this.root.width,this.root.height)*.01:l[1]===u1&&(t-=l[0]*Math.min(this.root.width,this.root.height)*.01),t}},{key:"__offsetX",value:function(e,r,i){P(N(u.prototype),"__offsetX",this).call(this,e,r,i),r&&!this.__config[zf]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(e),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,r,i)})}},{key:"__offsetY",value:function(e,r,i){P(N(u.prototype),"__offsetY",this).call(this,e,r,i),r&&!this.__config[zf]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(e),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,r,i)})}},{key:"__calMinMax",value:function(a,e){Mo.computeReflow(this,this.isShadowRoot);var o,s,h,p,r,i,n,l=0,c=0,g=this.flowChildren,m=this.currentStyle,v=this.computedStyle,u=e.x,_=e.y,y=e.w,x=e.h,E=e.lineBoxManager,e=m[af],b=m[Of],t=m[Tf],M=m[Af],T=v[Pf],M=a?t:M,A=g.length,f=0,d=0;return M[1]===n1?l=c=M[0]:M[1]===s1?l=c=M[0]*this.root.computedStyle[Wf]:M[1]===h1?l=c=M[0]*this.root.width*.01:M[1]===l1?l=c=M[0]*this.root.height*.01:M[1]===c1?l=c=M[0]*Math.max(this.root.width,this.root.height)*.01:M[1]===u1?l=c=M[0]*Math.min(this.root.width,this.root.height)*.01:(r=!0,"flex"===e?(o="column"!==b,(g=p1(g)).forEach(function(t){var e,r,i;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(r=t.currentStyle,e=t.computedStyle,"block"!==r[af]&&"flex"!==r[af]&&(r[af]=e[af]="block"),r=Zt(t.__calMinMax(a,{x:u,y:_,w:y,h:x}),2),i=(e=Zt(r[0],2))[0],e=e[1],r=Zt(r[1],1)[0],a?o?(l+=i,c+=e,d+=r):(l=Math.max(l,i),c=Math.max(c,e),d=Math.max(d,r)):o?(l=Math.max(l,i),c=Math.max(c,e),d+=r):(l+=i,c+=e,d=Math.max(d,r))):a?o?(l+=t.charWidth,c+=t.textWidth,d+=t.width):(l=Math.max(l,t.charWidth),c=Math.max(c,t.textWidth),d=Math.max(d,t.width)):(i=new K0(u,_,T,Mo.getBaseLine(v)),t.__layout({x:u,y:_,w:y,h:x,lineBoxManager:i}),o?(l=Math.max(l,t.height),c=Math.max(c,t.height),d+=t.width):(l+=t.height,c+=t.height,d=Math.max(d,t.width)))})):"block"===e?(h=s=0,p=new K0(u,_,T,Mo.getBaseLine(v)),g.forEach(function(t,e){var r,i,o,n;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(o=Zt(t.__calMinMax(a,{x:u,y:_,w:y,h:x,lineBoxManager:p}),2),r=(i=Zt(o[0],2))[0],i=i[1],o=Zt(o[1],1)[0],"block"!==(n=t.currentStyle[af])&&"flex"!==n||!p.isEnd||(p.setNotEnd(),p.setNewLine()),a?"block"===n||"flex"===n?(l=Math.max(l,r),c=Math.max(c,i),d=Math.max(d,o),s=h=f=0):(s+=r,h+=i,f+=o,l=Math.max(l,s),c=Math.max(c,h),d=Math.max(d,f)):"block"===n||"flex"===n?(l+=s,c+=h,d+=f,s=h=f=0,l+=r,c+=i,d+=o):(s=Math.max(s,r),h=Math.max(h,i),f=Math.max(f,o),e===A-1&&(l+=s,c+=h,d+=f))):a?(s+=t.charWidth,h+=t.textWidth,f+=t.width,l=Math.max(l,s),c=Math.max(c,h),d=Math.max(d,f)):(t.__layout({x:u,y:_,w:y,h:x,lineBoxManager:p}),s=Math.max(s,t.height),h=Math.max(h,t.height),f=Math.max(f,t.width),e===A-1&&(l+=s,c+=h,d+=f))})):("inlineBlock"!==e&&"inline-block"!==e||(E=new K0(u,_,T,Mo.getBaseLine(v))),g.forEach(function(t){var e,r,i;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(i=Zt(t.__calMinMax(a,{x:u,y:_,w:y,h:x,lineBoxManager:E}),2),e=(r=Zt(i[0],2))[0],r=r[1],i=Zt(i[1],1)[0],a?(l+=e,c+=r,d+=i):(l=Math.max(l,e),c=Math.max(c,r),d=Math.max(d,i))):a?(l+=t.charWidth,c+=t.textWidth,d+=t.width):(t.__layout({x:u,y:_,w:y,h:x,lineBoxManager:E}),l=Math.max(l,t.height),c=Math.max(c,t.height),d=Math.max(d,t.width))}))),a||(t[1]!==o1?t[1]===n1?d=t[0]:t[1]===a1?d=.01*t[0]*y:t[1]===s1?d=t[0]*this.root.computedStyle[Wf]:t[1]===h1?d=t[0]*this.root.width*.01:t[1]===l1?d=t[0]*this.root.height*.01:t[1]===c1?d=t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===u1&&(d=t[0]*Math.min(this.root.width,this.root.height)*.01):r||("flex"===e?(i="column"!==b,(g=p1(g)).forEach(function(t){var e,r;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(r=t.currentStyle,e=t.computedStyle,"block"!==r[af]&&"flex"!==r[af]&&(r[af]=e[af]="block"),r=Zt(t.__calMinMax(a,{x:u,y:_,w:y,h:x}),2),e=Zt(r[1],1)[0],a?i?d+=e:d=Math.max(d,e):i?d=Math.max(d,e):d+=e):a?i?d+=t.width:d=Math.max(d,t.width):(r=new K0(u,_,T,Mo.getBaseLine(v)),t.__layout({x:u,y:_,w:y,h:x,lineBoxManager:r}),i?d=Math.max(d,t.width):d+=t.width)})):"block"===e?(n=new K0(u,_,T,Mo.getBaseLine(v)),g.forEach(function(t,e){var r,i;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(r=Zt(t.__calMinMax(a,{x:u,y:_,w:y,h:x,lineBoxManager:n}),2),r=Zt(r[1],1)[0],"block"!==(i=t.currentStyle[af])&&"flex"!==i||!n.isEnd||(n.setNotEnd(),n.setNewLine()),a?"block"===i||"flex"===i?(d=Math.max(d,r),f=0):(f+=r,d=Math.max(d,f)):"block"===i||"flex"===i?(d+=f,f=0,d+=r):(f=Math.max(f,r),e===A-1&&(d+=f))):a?(f+=t.width,d=Math.max(d,f)):(t.__layout({x:u,y:_,w:y,h:x,lineBoxManager:n}),f=Math.max(f,t.width),e===A-1&&(d+=f))})):("inlineBlock"!==e&&"inline-block"!==e||(E=new K0(u,_,T,Mo.getBaseLine(v))),g.forEach(function(t){var e;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(e=Zt(t.__calMinMax(a,{x:u,y:_,w:y,h:x,lineBoxManager:E}),2),e=Zt(e[1],1)[0],a?d+=e:d=Math.max(d,e)):a?d+=t.width:(t.__layout({x:u,y:_,w:y,h:x,lineBoxManager:E}),d=Math.max(d,t.width))})))),this.__addMp(a,y,m,[l,c],[d])}},{key:"__calBasis",value:function(u,n){Mo.computeReflow(this,this.isShadowRoot);var t,_,f,d,e=0,a=0,s=0,p=this.flowChildren,g=this.currentStyle,m=this.computedStyle,v=n.x,y=n.y,x=n.w,E=n.h,n=g[af],b=g[Of],r=g[Tf],i=g[Af],o=g[wf],M=m[Pf],i=u?r:i,T=o[1]===o1,A=-1<[n1,a1,s1,h1,l1,c1,u1].indexOf(o[1]),R=!T&&!A,h=(A?o[1]===n1?e=t=o[0]:o[1]===a1?e=t=(u?x:E)*o[0]*.01:o[1]===s1?e=t=o[0]*this.root.computedStyle[Wf]:o[1]===h1?e=t=o[0]*this.root.width*.01:o[1]===l1?e=t=o[0]*this.root.height*.01:o[1]===c1?e=t=o[0]*Math.max(this.root.width,this.root.height)*.01:o[1]===u1&&(e=t=o[0]*Math.min(this.root.width,this.root.height)*.01):-1<[n1,a1,s1,h1,l1,c1,u1].indexOf(i[1])&&T?i[1]===n1?e=t=i[0]:i[1]===a1?e=t=.01*i[0]*(u?x:E):i[1]===s1?e=t=i[0]*this.root.computedStyle[Wf]:i[1]===h1?e=t=i[0]*this.root.width*.01:i[1]===l1?e=t=i[0]*this.root.height*.01:i[1]===c1?e=t=i[0]*Math.max(this.root.width,this.root.height)*.01:i[1]===u1&&(e=t=i[0]*Math.min(this.root.width,this.root.height)*.01):T&&(R=!0),0),l=0,O=0,c=0;return"flex"===n?(_="column"!==b,(p=p1(p)).forEach(function(t,e){var r,i,o;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(i=t.currentStyle,r=t.computedStyle,"block"!==i[af]&&"flex"!==i[af]&&(i[af]=r[af]="block"),i=Zt(t.__calMinMax(u,{x:v,y:y,w:x,h:E}),2),o=(r=Zt(i[0],2))[0],r=r[1],i=Zt(i[1],1)[0],u?_?(a+=o,s+=r,c+=i):(a=Math.max(a,o),s=Math.max(s,r),c=Math.max(c,i)):_?(a=Math.max(a,o),s=Math.max(s,r),c+=i):(a+=o,s+=r,c=Math.max(c,i))):u?_?(a+=t.charWidth,s+=t.textWidth,c+=t.width):(a=Math.max(a,t.charWidth),s=Math.max(s,t.textWidth),c=Math.max(c,t.width)):(o=new K0(v,y,M,Mo.getBaseLine(m)),t.__layout({x:v,y:y,w:x,h:E,lineBoxManager:o}),_?(a=Math.max(a,t.height),s=Math.max(s,t.height),c+=t.width):(a+=t.height,s+=t.height,c=Math.max(c,t.width)))})):(f=this.__lineBoxManager=new K0(v,y,M,Mo.getBaseLine(m)),d=p.length,p.forEach(function(t,e){var r,i,o,n;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(o=Zt(t.__calMinMax(u,{x:v,y:y,w:x,h:E,lineBoxManager:f}),2),r=(i=Zt(o[0],2))[0],i=i[1],o=Zt(o[1],1)[0],"block"!==(n=t.currentStyle[af])&&"flex"!==n||!f.isEnd||(f.setNotEnd(),f.setNewLine()),u?"block"===n||"flex"===n?(a=Math.max(a,r),s=Math.max(s,i),c=Math.max(c,o),h=l=O=0):(h+=r,l+=i,O+=o,a=Math.max(a,h),s=Math.max(s,l),c=Math.max(c,O)):"block"===n||"flex"===n?(a+=h,s+=l,c+=O,h=l=O=0,a+=r,s+=i,c+=o):(h=Math.max(h,r),l=Math.max(l,i),O=Math.max(O,o),e===d-1&&(a+=h,s+=l,c+=O))):u?(h+=t.charWidth,l+=t.textWidth,O+=t.width,a=Math.max(a,h),s=Math.max(s,l),c=Math.max(c,O)):(t.__layout({x:v,y:y,w:x,h:E,lineBoxManager:f}),h=Math.max(h,t.height),l=Math.max(l,t.height),O=Math.max(O,t.width),e===d-1&&(a+=h,s+=l,c+=O))})),t&&(s=Math.max(t,s)),R&&(e=s),u||r[1]===o1||(r[1]===n1?c=r[0]:r[1]===a1?c=.01*r[0]*x:r[1]===s1?c=r[0]*this.root.computedStyle[Wf]:r[1]===h1?c=r[0]*this.root.width*.01:r[1]===l1?c=r[0]*this.root.height*.01:r[1]===c1?c=r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===u1&&(c=r[0]*Math.min(this.root.width,this.root.height)*.01)),this.__addMp(u,x,g,[e,a,s],[c],!0)}},{key:"__layoutNone",value:function(){P(N(u.prototype),"__layoutNone",this).call(this),this.children.forEach(function(t){(t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0)&&t.__layoutNone()})}},{key:"__layoutBlock",value:function(u,_){var E=this.flowChildren,t=this.currentStyle,e=this.computedStyle,r=this.__preLayout(u),i=r.fixedWidth,o=r.fixedHeight,f=r.x,d=r.y,p=r.w,b=r.h;if(i&&_)return this.__width=p,void this.__ioSize(p,this.height);var n=e[Rf],M=e[Nf],g=e[Ff],r=e[Pf],g=g||0,m=0,v=this.__lineBoxManager=new K0(f,d,r,Mo.getBaseLine(e)),y=0,x=0,T=[],A=[],R=E.length,a=(E.forEach(function(t,e){var r,c,i,o,n,a=t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0,s=a&&"inline"===t.currentStyle[af],h=a&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[af]),l=t.isReplaced;a&&!s&&!h||(T.length&&A.length&&((r=of.getMergeMarginTB(A,T))&&(d+=r)),A=[],T=[]),a?h||s?f===u.x||s&&"nowrap"===M?(t.__layout({x:f,y:d,w:p,h:b,lx:u.x,lineBoxManager:v,lineClamp:g,lineClampCount:m},_),t.__isIbFull?(f=u.x,d+=t.outerHeight,v.setNotEnd()):((h||l)&&v.addItem(t),f=v.lastX,d=v.lastY),_&&(y=Math.max(y,x),x=t.outerWidth,y=Math.max(y,x))):(-1e-10<=t.__tryLayInline(p+u.x-f,p)?(t.__layout({x:f,y:d,w:p,h:b,lx:u.x,lineBoxManager:v,lineClamp:g,lineClampCount:m},_),(h||l)&&v.addItem(t),f=v.lastX,d=v.lastY):(m++,f=u.x,d=v.endY,v.setNewLine(),m=t.__layout({x:f,y:d,w:p,h:b,lx:u.x,lineBoxManager:v,lineClamp:g,lineClampCount:m},_),t.__isIbFull?(f=u.x,d+=t.outerHeight,v.setNotEnd()):((h||l)&&v.addItem(t),f=v.lastX,d=v.lastY),_&&(y=Math.max(y,x),x=0)),_&&(x+=t.outerWidth,y=Math.max(y,x))):(f!==u.x&&E[e-1]instanceof as&&m++,f=u.x,v.isEnd&&(d=v.endY,v.setNotEnd(),v.setNewLine()),t.__layout({x:f,y:d,w:p,h:b},_),!(r="none"===t.currentStyle[af])&&t.flowChildren&&0===t.flowChildren.length&&(s=(a=t.computedStyle)[lf],h=a[uf],l=a[pf],i=a[ff],o=a[Af],n=a[gf],a=a[mf],l<=0&&i<=0&&o<=0&&n<=0&&a<=0&&(T.push(h),A.push(s),c=!0)),d+=t.outerHeight,v.__lastY=d,_&&(y=Math.max(y,t.outerWidth),x=0),r||c?e!==R-1||(l=of.getMergeMarginTB(A,T))&&(d+=l):(o=(i=t.computedStyle)[lf],n=i[uf],T.length&&(A.push(o),(a=of.getMergeMarginTB(A,T))&&(t.__offsetY(a,!0),d+=a)),A=[],T=[n])):g&&g<=m||(f===u.x||"nowrap"===M?(m=t.__layout({x:f,y:d,w:p,h:b,lx:u.x,lineBoxManager:v,lineClamp:g,lineClampCount:m},_),f=v.lastX,d=v.lastY,_&&(y=Math.max(y,x),x=t.width,y=Math.max(y,x))):(-1e-10<=t.__tryLayInline(p-f+u.x)?(m=t.__layout({x:f,y:d,w:p,h:b,lx:u.x,lineBoxManager:v,lineClamp:g,lineClampCount:m},_),f=v.lastX,d=v.lastY):(m++,f=u.x,d=v.endY,v.setNewLine(),m=t.__layout({x:f,y:d,w:p,h:b,lx:u.x,lineBoxManager:v,lineClamp:g,lineClampCount:m},_),f=v.lastX,d=v.lastY,_&&(y=Math.max(y,t.width),x=0)),_&&(x+=t.width,y=Math.max(y,x))))}),v.isEnd&&(d=v.endY),this.__width=i||!_?p:y),r=this.__height=o?b:d-u.y,e=(this.__ioSize(a,r),v.verticalAlign());e&&this.__resizeY(e),_||(-1<["center","right"].indexOf(n)&&(v.horizonAlign(a,n),E.forEach(function(t){(t=t instanceof Ns?t.shadowRoot:t)instanceof as&&t.__inlineSize()})),v.domList.forEach(function(t){t.__inlineSize(a,n)}),this.__marginAuto(t,u))}},{key:"__layoutFlex",value:function(i,f){var s=this,t=this.flowChildren,h=this.currentStyle,l=this.computedStyle,o=this.__flexLine,e=this.__preLayout(i),d=e.fixedWidth,p=e.fixedHeight,g=e.x,c=e.y,u=e.w,m=e.h;if(d&&f)return this.__width=u,void this.__ioSize(u,this.height);o.splice(0);var e=l[Of],v=l[Lf],y=l[kf],x=l[Ff],E=l[Yf],r=l[Hf],b=l[Pf],M=l[Rf],x=x||0,T=0,_=-1===["column","column-reverse","columnReverse"].indexOf(e),A=[],R=[],O=[],w=[],S=[],I=[],C=p1(t);if(C.forEach(function(t){var e,r,i,o,n,a,s,h;t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?(s=t.currentStyle,n=t.computedStyle,"block"!==s[af]&&"flex"!==s[af]&&(s[af]=n[af]="block"),o=Zt(t.__calBasis(!!f||_,{x:g,y:c,w:u,h:m}),2),e=(i=Zt(o[0],3))[0],r=i[1],i=i[2],o=Zt(o[1],1)[0],f?_?T+=i:T=Math.max(T,i):(a=s[If],s=s[Sf],n[wf]=e,A.push(a),R.push(s),O.push(e),w.push(i),S.push(r),I.push(o))):f?_?T+=t.textWidth:T=Math.max(T,t.textWidth):(A.push(0),R.push(1),_?(n=t.charWidth,a=t.textWidth,O.push(a),w.push(a),S.push(n)):(s=new K0(g,c,b,Mo.getBaseLine(l)),t.__layout({x:g,y:c,w:u,h:h,lineBoxManager:s,lineClamp:x,lineClampCount:0}),h=t.height,O.push(h),w.push(h),S.push(h)),I.push(t.width))}),f)return t=this.__width=Math.min(T,u),void this.__ioSize(t,this.height);var k,L,D,N,P,F=_?u:m,B="wrap"===E||-1<["wrap-reverse","wrapReverse"].indexOf(E),n=[],Y=0,H=[],a=(O.forEach(function(t,e){var r=S[e],i=w[e],r=t<r?r:i<t?i:t;H.push(r),B?F<Y+r?Y=Y?(o.push(n),n=[C[e]],r):(n.push(C[e]),o.push(n),n=[],0):(n.push(C[e]),Y+=r):n.push(C[e])}),n.length&&o.push(n),0),G={x:g,y:c,w:u,h:m},W=[],U=(o.forEach(function(t){var e=t.length,r=a+e,t=Zt(s.__layoutFlexLine(G,_,F,d,p,x,0,b,l,v,y,C.slice(a,r),t,M,A.slice(a,r),R.slice(a,r),O.slice(a,r),H.slice(a,r),S.slice(a,r),I.slice(a,r)),3),r=t[0],i=t[1],t=t[2];_?G.y=i:G.x=r,g=Math.max(g,r),c=Math.max(c,i),W.push(t),a+=e}),this.__width=u),X=this.__height=p?m:c-i.y,t=(this.__ioSize(U,X),"row-reverse"===e||"rowReverse"===e?o.forEach(function(t){t.forEach(function(t){var e=U-t.outerWidth-2*(t.x-i.x);e&&t.__offsetX(e,!0)})}):"column-reverse"!==e&&"columnReverse"!==e||o.forEach(function(t){t.forEach(function(t){var e=X-t.outerHeight-2*(t.y-i.y);e&&t.__offsetY(e,!0)})}),o.length);if(-1<["wrapReverse","wrap-reverse"].indexOf(E)&&1<t){for(var V=0,K=[],z=(W.forEach(function(t){K.push(V),V+=t}),0),j=t-1;0<=j;j--)!function(t){var e=o[t],r=K[t],i=z-r;i&&e.forEach(function(t){_?t.__offsetY(i,!0):t.__offsetX(i,!0)}),z+=W[t]}(j);o.reverse()}!f&&1<t&&(p&&_||!_)&&(0<(L=_?X-(c-i.y):U-(g-i.x))&&("center"===r?(D=.5*L,C.forEach(function(t){_?t.__offsetY(D,!0):t.__offsetX(D,!0)})):"flex-start"===r||"flexStart"===r||("flex-end"===r||"flexEnd"===r?C.forEach(function(t){_?t.__offsetY(L,!0):t.__offsetX(L,!0)}):"space-between"===r||"spaceBetween"===r?(N=L/(t-1),o.forEach(function(t,e){e&&t.forEach(function(t){_?t.__offsetY(N,!0):t.__offsetX(N,!0)})})):"space-around"===r||"spaceAround"===r?(P=L/(t+1),o.forEach(function(t,e){t.forEach(function(t){_?t.__offsetY(P*(e+1),!0):t.__offsetX(P*(e+1),!0)})})):(k=L/t,o.forEach(function(t,e){e&&t.forEach(function(t){_?t.__offsetY(k*e,!0):t.__offsetX(k*e,!0)})}))))),f||(1<t?o.forEach(function(t,e){e=W[e];k&&(e+=k),s.__crossAlign(t,y,_,e)}):t&&(e=W[0],_?p&&(e=m):e=u,this.__crossAlign(o[0],y,_,e))),this.__marginAuto(h,i)}},{key:"__layoutFlexLine",value:function(t,n,c,u,_,f,d,p,g,e,m,r,v,y,x,E,i,b,M,T){var A=this,a=t.x,s=t.y,R=t.w,O=t.h,w=0,S=(b.forEach(function(t){w+=t}),c<=w),h=[],o=(i.forEach(function(t,e){S?(!E[e]||i[e]<b[e])&&(h[e]=b[e]):(!x[e]||i[e]>b[e])&&(h[e]=b[e])}),0),c=(i.forEach(function(t,e){void 0!==h[e]?o+=h[e]:o+=t}),1/0),c=n?R:_?O:o,o=Math.abs(c-o),l=0;if(S)for(var I=E.map(function(t,e){if(void 0===h[e])return t=t*i[e],l+=t,t});;){l<1&&(o*=l);var C=void 0,k=0;if(I.forEach(function(t,e){var r;t&&(r=t/l*o,(r=i[e]-r)<M[e]?(h[e]=M[e],I[e]=0,C=!0,o-=i[e]-M[e]):(h[e]=r,k+=t))}),!C)break;l=k}else for(var L=x.map(function(t,e){if(void 0===h[e])return l+=t,t});;){l<1&&(o*=l);var D=void 0,N=0;if(L.forEach(function(t,e){var r;t&&(r=t/l*o,(r=i[e]+r)<M[e]?(h[e]=M[e],L[e]=0,D=!0,o-=i[e]-M[e]):(h[e]=r,N+=t))}),!D)break;l=N}var P=0,F=[],B=(r.forEach(function(t,e){var r,i,o=h[e];t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0?n?t.__layout({x:a,y:s,w:o,h:O,w3:o}):(i=t.currentStyle[Cf],"stretch"===m?"auto"!==i&&"stretch"!==i&&(r=T[e]):"stretch"!==i&&(r=T[e]),t.__layout({x:a,y:s,w:R,w3:r,h:o,h3:o})):(i=A.__lineBoxManager=new K0(a,s,p,Mo.getBaseLine(g)),F.push(i),t.__layout({x:a,y:s,w:n?o:T[e],h:n?O:o,lineBoxManager:i,lineClamp:f,lineClampCount:d})),P=n?(a+=t.outerWidth,Math.max(P,t.outerHeight)):(s+=t.outerHeight,Math.max(P,t.outerWidth))}),n?R-a+t.x:O-s+t.y);if(0<B){var Y=r.length;if("flexEnd"===e||"flex-end"===e)for(var H=0;H<Y;H++){var G=r[H];n?G.__offsetX(B,!0):G.__offsetY(B,!0)}else if("center"===e)for(var W=.5*B,U=0;U<Y;U++){var X=r[U];n?X.__offsetX(W,!0):X.__offsetY(W,!0)}else if("spaceBetween"===e||"space-between"===e)for(var V=B/(Y-1),K=1;K<Y;K++){var z=r[K];n?z.__offsetX(V*K,!0):z.__offsetY(V*K,!0)}else if("spaceAround"===e||"space-around"===e)for(var j=B/(Y+1),$=0;$<Y;$++){var Z=r[$];n?Z.__offsetX(j*($+1),!0):Z.__offsetY(j*($+1),!0)}}return n?s+=P:a+=P,-1<["center","right"].indexOf(y)&&F.forEach(function(t){t.horizonAlign(t.width,y)}),[a,s,P]}},{key:"__crossAlign",value:function(t,c,u,_){var f=0;t.forEach(function(t){f=Math.max(f,t.firstBaseLine)}),t.forEach(function(t){var e,r,i,o,n,a,s,h,l=t.currentStyle[Cf];u?"flexStart"===l||"flex-start"===l||("flexEnd"===l||"flex-end"===l?0!=(r=_-t.outerHeight)&&t.__offsetY(r,!0):"center"===l?0!=(r=_-t.outerHeight)&&t.__offsetY(.5*r,!0):"stretch"===l?(r=t.computedStyle,i=t.currentStyle[Af],n=r[gf],a=r[mf],o=r[lf],e=r[uf],h=r[pf],s=r[ff],i[1]===o1&&(i=t.height,r=(t.__height=r[Af]=_-o-e-h-s-n-a)-i,t.__sy4+=r,t.__sy5+=r,t.__sy6+=r,t.__height+=r,t.__clientHeight+=r,t.__offsetHeight+=r,t.__outerHeight+=r)):"baseline"===l?0!=(o=f-t.firstBaseLine)&&t.__offsetY(o,!0):"flexStart"===c||"flex-start"===l||("center"===c?0!=(e=_-t.outerHeight)&&t.__offsetY(.5*e,!0):"flexEnd"===c||"flex-end"===c?0!=(h=_-t.outerHeight)&&t.__offsetY(h,!0):"baseline"===c?0!=(s=f-t.firstBaseLine)&&t.__offsetY(s,!0):(n=t.computedStyle,i=(a=t.currentStyle)[af],r=a[Of],o=a[Af],u&&"flex"===i&&"column"===r&&o[1]===o1&&t.outerHeight<_&&t.__layout(Object.assign(t.__layoutData,{h3:_})),e=n[gf],h=n[mf],s=n[lf],a=n[uf],i=n[pf],r=n[ff],o[1]===o1&&(n=t.height,t.__sy4+=o=_-s-a-i-r-e-h-n,t.__sy5+=o,t.__sy6+=o,t.__height+=o,t.__clientHeight+=o,t.__offsetHeight+=o,t.__outerHeight+=o)))):"flexStart"===l||"flex-start"===l||("flexEnd"===l||"flex-end"===l?0!=(s=_-t.outerWidth)&&t.__offsetX(s,!0):"center"===l?0!=(a=_-t.outerWidth)&&t.__offsetX(.5*a,!0):"stretch"===l?(i=t.computedStyle,r=t.currentStyle[Tf],e=i[vf],h=i[yf],n=i[cf],o=i[hf],s=i[df],a=i[_f],r[1]===o1&&(r=t.width,i=(t.__width=i[Tf]=_-o-n-a-s-e-h)-r,t.__sx4+=i,t.__sx5+=i,t.__sx6+=i,t.__width+=i,t.__clientWidth+=i,t.__offsetWidth+=i,t.__outerWidth+=i)):"baseline"===c?0!=(o=f-t.firstBaseLine)&&t.__offsetX(o,!0):"flexStart"===c||"flex-start"===l||("center"===c?0!=(n=_-t.outerWidth)&&t.__offsetX(.5*n,!0):"flexEnd"===c||"flex-end"===c?0!=(a=_-t.outerWidth)&&t.__offsetX(a,!0):"baseline"===c?0!=(s=f-t.firstBaseLine)&&t.__offsetX(s,!0):(e=t.computedStyle,h=t.currentStyle[Tf],r=e[vf],i=e[yf],o=e[cf],l=e[hf],n=e[df],a=e[_f],h[1]===o1&&(s=t.width,h=(t.__width=e[Tf]=_-l-o-a-n-r-i)-s,t.__sx4+=h,t.__sx5+=h,t.__sx6+=h,t.__width+=h,t.__clientWidth+=h,t.__offsetWidth+=h,t.__outerWidth+=h))))})}},{key:"__layoutInline",value:function(r,p,s){var i=this.flowChildren,o=this.currentStyle,t=this.computedStyle,e=this.__preLayout(r,s),n=e.fixedWidth,a=e.fixedHeight,h=e.x,l=e.y,c=e.w,g=e.h,u=e.lx,_=e.lineBoxManager,m=e.nowrap,f=e.endSpace,v=e.selfEndSpace;if(n&&p)return this.__width=c,void this.__ioSize(c,this.height);var y,x,E=o[Tf],b=t[Rf],M=t[Nf],T=t[Ff],e=t[Pf],o=t[hf],A=t[cf],R=t[yf],O=t[vf],w=t[_f],S=t[df],d=r.lineClampCount||0,I=((s=s&&!this.__isRealInline()?!1:s)?(this.__config[zf]=!0,this.__lineBoxManager=_,y=Mo.getBaseLine(t),(o||A||w||S||R||O)&&_.isNewLine?_.genLineBoxByInlineIfNewLine(h,l,e,y):_.setLbByInlineIfNotNewLine(e,y),T=r.lineClamp||0):(_=this.__lineBoxManager=new K0(h,l,e,Mo.getBaseLine(t)),u=h,f=v=d=0),s&&(this.__contentBoxList=[],_.pushContentBoxList(this)),!1),C=i.length;return i.forEach(function(t,e){var r=t instanceof F0||t instanceof Ns&&t.shadowRoot instanceof F0,i=r&&"inline"===t.currentStyle[af],o=r&&-1<["inlineBlock","inline-block"].indexOf(t.currentStyle[af]),n=r&&t.__isRealInline(),a=s&&e===C-1;a&&(f+=v),r?(i||o||(t.currentStyle[af]=t.computedStyle[af]="inlineBlock",o=!0,De.warn("Inline can not contain block/flex")),h===u||!e||i&&"nowrap"===M?(d=t.__layout({x:h,y:l,w:c,h:g,lx:u,lineBoxManager:_,endSpace:f,lineClamp:T,lineClampCount:d},p),t.__isIbFull?(o&&c[1]===o1&&(I=!0),_.addItem(t),h=u,l+=t.outerHeight,_.setNotEnd()):(!o&&n||_.addItem(t),h=_.lastX,l=_.lastY)):-1e-10<=("nowrap"===M?0:t.__tryLayInline(c-h+u,c-(a?f:0)))?(d=t.__layout({x:h,y:l,w:c,h:g,lx:u,nowrap:"nowrap"===M,lineBoxManager:_,endSpace:f,lineClamp:T,lineClampCount:d},p),!o&&n||_.addItem(t),h=_.lastX,l=_.lastY):(i&&d++,h=u,l=_.endY,_.setNewLine(),d=t.__layout({x:h,y:l,w:c,h:g,lx:u,lineBoxManager:_,endSpace:f,lineClamp:T,lineClampCount:d},p),t.__isIbFull?(_.addItem(t),h=u,l+=t.outerHeight,_.setNotEnd()):(!o&&n||_.addItem(t),h=_.lastX,l=_.lastY))):(r=_.size,h!==u&&e&&"nowrap"!==M?(o=(i=!e&&m||"nowrap"===M)?0:t.__tryLayInline(c+u-h),!i&&0<=o&&a&&f&&1===t.content.length&&((n=o-f)<0&&(o=n)),-1e-10<=o?(d=t.__layout({x:h,y:l,w:c,h:g,lx:u,lineBoxManager:_,endSpace:f,lineClamp:T,lineClampCount:d},p),h=_.lastX,l=_.lastY):(d++,h=u,l=_.endY,_.setNewLine(),d=t.__layout({x:h,y:l,w:c,h:g,lx:u,lineBoxManager:_,endSpace:f,lineClamp:T,lineClampCount:d},p),h=_.lastX,l=_.lastY,!s&&1<_.size-r&&E[1]===o1&&(I=!0))):(d=t.__layout({x:h,y:l,w:c,h:g,lx:u,lineBoxManager:_,endSpace:f,lineClamp:T,lineClampCount:d},p),h=_.lastX,l=_.lastY,!s&&1<_.size-r&&E[1]===o1&&(I=!0)))}),l=_.endY,this.__isIbFull=I,s?(v&&_.addX(v),i.length||(o=t[hf],A=t[_f],w=t[yf],_.addX(o+A+w)),_.popContentBoxList(),p&&this.__inlineSize()):(S=_.__maxX-r.x,x=this.__width=n?c:I?Math.max(c,S):S,R=this.__height=a?g:l-r.y,this.__ioSize(x,R)),p||s||(_.verticalAlign(),-1<["center","right"].indexOf(b)&&(_.horizonAlign(x,b),i.forEach(function(t){(t=t instanceof Ns?t.shadowRoot:t)instanceof as&&t.__inlineSize()})),_.domList.forEach(function(t){t.__inlineSize(x,b)})),s?d:0}},{key:"__inlineSize",value:function(c,u){var r,_,i,f,o,n,d,p,a,g,m,v,y,x,E,b,M=this.contentBoxList,t=this.computedStyle,e=this.__ox,s=this.__oy,T=t[lf],A=t[cf],R=t[uf],O=t[hf],w=t[pf],h=t[df],l=t[ff],S=t[_f],I=t[gf],C=t[vf],k=t[mf],L=t[yf],D=t[Pf],N=M.length;N?(M.forEach(function(t,e){e?(i=Math.min(i,t.x),d=Math.min(d,t.x),m=Math.min(m,t.x),E=Math.min(E,t.x),e===N-1?(r=o=a=y=Math.max(r,t.x+t.outerWidth),_=n=g=x=Math.max(_,t.y+t.outerHeight),o+=h,n+=l,a+=h+C,g+=l+k,y+=C+h+A,x+=k+l+R):r=o=a=y=Math.max(r,t.x+t.outerWidth)):(i=t.x,f=t.y,E=(m=(d=i-S)-L)-O,b=(v=(p=f-w)-I)-T,r=o=a=y=t.x+t.outerWidth,_=n=g=x=t.y+t.outerHeight,e===N-1&&(o+=h,n+=l,a+=h+C,g+=l+k,y+=C+h+A,x+=k+l+R))}),this.__x=E,this.__y=b,this.__width=t[Tf]=r-i,this.__height=t[Af]=Math.max(D,_-f),this.__clientWidth=o-d,this.__clientHeight=n-p,this.__offsetWidth=a-m,this.__offsetHeight=g-v,this.__outerWidth=y-E,this.__outerHeight=x-b,this.__sx=E+e,this.__sy=b+s,this.__sx1=m+e,this.__sy1=v+s,this.__sx2=d+e,this.__sy2=p+s,this.__sx3=i+e,this.__sy3=f+s,this.__sx4=r+e,this.__sy4=_+s,this.__sx5=o+e,this.__sy5=n+s,this.__sx6=a+e,this.__sy6=g+s,-1<["center","right"].indexOf(u)&&this.children.forEach(function(t){t instanceof as&&t.__inlineSize()})):(-1<["center","right"].indexOf(u)&&(M=c,"center"===u&&(M*=.5),M&&this.__offsetX(M,!0)),this.__width=t[Tf]=0,e=this.__height=t[Af]=D,this.__ioSize(0,e),this.__sy-=T+w+I,this.__sx1=this.sx+O,this.__sy1=this.sy+T,this.__sx2=this.__sx1+L,this.__sy2=this.__sy1+I,this.__sx4=this.__sx3=this.__sx2+S,this.__sy4=this.__sy3=this.__sy2+w,this.__sx5=this.__sx4+h,this.__sy5=this.__sy4+e+l,this.__sx6=this.__sx5+C,this.__sy6=this.__sy5+k,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+O+A,this.__outerHeight=this.__offsetHeight+T+R)}},{key:"__layoutAbs",value:function(r,i,M){var T=this,A=r.sx,R=r.sy,O=r.clientWidth,w=r.clientHeight,t=r.computedStyle,e=this.isDestroyed,o=this.children,n=this.absChildren,a=t[af],s=t[gf],h=t[yf],l=t[lf],c=t[hf],S=t[_f],I=t[pf];e||"none"===a?this.__layoutNone():(A+=c+h,R+=l+s,n.forEach(function(t){if(M){var e=t;if(t instanceof Ns&&(e=t.shadowRoot),M!==e&&M!==t)return}var e=t.currentStyle,r=t.computedStyle;if("none"!==e[af]){t.__mp(e,r,O),"block"!==e[af]&&"flex"!==e[af]&&(e[af]=r[af]="block");var i,o,n,c,u,_,f,d,p,g,m=e[Mf],v=e[xf],y=e[Ef],x=e[bf],a=e[Tf],s=e[Af],E=e[af],b=e[Of];if(m[1]!==o1?(p=!0,r[Mf]=_1(e,"left",m,O,T.root)):r[Mf]="auto",y[1]!==o1?(f=!0,r[Ef]=_1(e,"right",y,O,T.root)):r[Ef]="auto",v[1]!==o1?(_=!0,r[xf]=_1(e,"top",v,w,T.root)):r[xf]="auto",x[1]!==o1?(d=!0,r[bf]=_1(e,"bottom",x,w,T.root)):r[bf]="auto",p&&f?(i=A+r[Mf],o=A+O-r[Ef]-i):p?(i=A+r[Mf],a[1]!==o1&&(o=a[1]===a1?a[0]*O*.01:a[1]===s1?a[0]*T.root.computedStyle[Wf]:a[1]===h1?a[0]*T.root.width*.01:a[1]===l1?a[0]*T.root.height*.01:a[1]===c1?a[0]*Math.max(T.root.width,T.root.height)*.01:a[1]===u1?a[0]*Math.min(T.root.width,T.root.height)*.01:a[0])):f?(a[1]!==o1?o=a[1]===a1?a[0]*O*.01:a[1]===s1?a[0]*T.root.computedStyle[Wf]:a[1]===h1?a[0]*T.root.width*.01:a[1]===l1?a[0]*T.root.height*.01:a[1]===c1?a[0]*Math.max(T.root.width,T.root.height)*.01:a[1]===u1?a[0]*Math.min(T.root.width,T.root.height)*.01:a[0]:c=!0,i=A+O-r[Ef]-(o||0),i=(i=(i=(i=(i=(i-=r[hf])-r[cf])-r[_f])-r[df])-e[yf][0])-e[vf][0]):(i=A+S,a[1]!==o1&&(o=a[1]===a1?a[0]*O*.01:a[1]===s1?a[0]*T.root.computedStyle[Wf]:a[1]===h1?a[0]*T.root.width*.01:a[1]===l1?a[0]*T.root.height*.01:a[1]===c1?a[0]*Math.max(T.root.width,T.root.height)*.01:a[1]===u1?a[0]*Math.min(T.root.width,T.root.height)*.01:a[0])),_&&d)h=R+r[xf],n=R+w-r[bf]-h;else if(_)h=R+r[xf],s[1]!==o1&&(n=s[1]===a1?s[0]*w*.01:s[1]===s1?s[0]*T.root.computedStyle[Wf]:s[1]===h1?s[0]*T.root.width*.01:s[1]===l1?s[0]*T.root.height*.01:s[1]===c1?s[0]*Math.max(T.root.width,T.root.height)*.01:s[1]===u1?s[0]*Math.min(T.root.width,T.root.height)*.01:s[0]);else if(d)s[1]!==o1?n=s[1]===a1?s[0]*w*.01:s[1]===s1?s[0]*T.root.computedStyle[Wf]:s[1]===h1?s[0]*T.root.width*.01:s[1]===l1?s[0]*T.root.height*.01:s[1]===c1?s[0]*Math.max(T.root.width,T.root.height)*.01:s[1]===u1?s[0]*Math.min(T.root.width,T.root.height)*.01:s[0]:u=!0,h=R+w-r[bf]-(n||0),h=(h=(h=(h=(h=(h-=r[lf])-r[uf])-r[pf])-r[ff])-e[gf][0])-e[mf][0];else{for(var h=R+I,l=t.prev;l;){if(l instanceof as||"absolute"!==l.computedStyle[nf]){h=l.y+l.outerHeight;break}l=l.prev}s[1]===a1?n=s[0]*w*.01:s[1]===s1?n=s[0]*T.root.computedStyle[Wf]:s[1]===h1?n=s[0]*T.root.width*.01:s[1]===l1?n=s[0]*T.root.height*.01:s[1]===c1?n=s[0]*Math.max(T.root.width,T.root.height)*.01:s[1]===u1?n=s[0]*Math.min(T.root.width,T.root.height)*.01:s[1]===n1&&(n=s[0])}(("block"===E||-1<["inlineBlock","inline-block"].indexOf(E))&&void 0===o||"flex"===E&&(void 0===o||"column"===b&&void 0===n))&&(g=!0);m=c?i-A:O+A-i,y=u?h-R:w+R-h;g&&(t.__layout({x:i,y:h,w:m,h:y},!0,!0),m=t.outerWidth),t.__layout({x:i,y:h,w:m,h:y,w2:o,h2:n},!1,!0),c&&t.__offsetX(-t.outerWidth,!0),u&&t.__offsetY(-t.outerHeight,!0)}else t.__layoutNone()}),o.forEach(function(t){if(M){var e=t;if(t instanceof Ns&&(e=t.shadowRoot),M!==e&&M!==t)return}t instanceof u?t.__layoutAbs(f1(t)?t:r,i):t instanceof Ns&&((e=t.shadowRoot)instanceof u&&e.__layoutAbs(e,i))}),this.__execAr())}},{key:"__computeMeasure",value:function(e,r,i){P(N(u.prototype),"__computeMeasure",this).call(this,e,r,i),this.children.forEach(function(t){t.__computeMeasure(e,r,i)})}},{key:"render",value:function(t,e,r,i,o,n){e=P(N(u.prototype),"render",this).call(this,t,e,r,i,o,n);return t===et.SVG&&(this.virtualDom.type="dom"),e}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach(function(t){t&&t.__destroy()}),P(N(u.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return P(N(u.prototype),"__emitEvent",this).call(this,t,e);var e=this.isDestroyed,r=this.computedStyle,i=this.isMask;if(!(e||"none"===r[af]||t.__stopPropagation||i)&&("hidden"!==r[Gf]||this.willResponseEvent(t,!0))){var o,e=t.event.type,i=this.listener,n=this.zIndexChildren;i.hasOwnProperty(e)&&(o=i[e]);for(var a=n.length-1;0<=a;a--){var s=n[a];if((s instanceof F0||s instanceof Ns&&s.shadowRoot instanceof F0)&&s.__emitEvent(t))return t.__stopPropagation?void 0:(xt.isFunction(o)&&!t.__stopImmediatePropagation&&o.call(this,t),!0)}return P(N(u.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(e,r){P(N(u.prototype),"__deepScan",this).call(this,e,r)||this.children.forEach(function(t){t.__deepScan(e,r)})}},{key:"appendChild",value:function(e,r){var i=this;if(!xt.isNil(e)&&!i.isDestroyed){var o,n=i.root,t=i.host;if(!(-1<[Jt.TYPE_VD,Jt.TYPE_GM,Jt.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in appendChild.");e.vd&&(n.delRefreshTask(e.vd.__task),e.vd.remove()),o=Jt.TYPE_CP===e.$$type?Os.initCp2(e,n,t,i):Os.initDom(e,n,t,i),n.addRefreshTask(o.__task={__before:function(){o.__task=null,i.__json.children.push(e);var t=i.children.length,t=(t&&(((t=i.children[t-1]).__next=o).__prev=t),i.children.push(o),i.__zIndexChildren=null,{});t[jf]=o,t[$f]=Ra.REFLOW,t[Zf]=!0,t[Jf]=!0,t[qf]=o.__config,n.__addUpdate(o,o.__config,n,n.__config,t)},__after:function(t){xt.isFunction(r)&&r.call(o,t)}})}}},{key:"prependChild",value:function(e,r){var i=this;if(!xt.isNil(e)&&!i.isDestroyed){var o,n=i.root,t=i.host;if(!(-1<[Jt.TYPE_VD,Jt.TYPE_GM,Jt.TYPE_CP].indexOf(e.$$type)))throw new Error("Invalid parameter in prependChild.");e.vd&&(n.delRefreshTask(e.vd.__task),e.vd.remove()),o=Jt.TYPE_CP===e.$$type?Os.initCp2(e,n,t,i):Os.initDom(e,n,t,i),n.addRefreshTask(o.__task={__before:function(){o.__task=null,i.__json.children.unshift(e);i.children.length&&(((t=i.children[0]).__prev=o).__next=t),i.children.unshift(o),i.__zIndexChildren=null;var t={};t[jf]=o,t[$f]=Ra.REFLOW,t[Zf]=!0,t[Jf]=!0,t[qf]=o.__config,n.__addUpdate(o,o.__config,n,n.__config,t)},__after:function(t){xt.isFunction(r)&&r.call(o,t)}})}}},{key:"insertBefore",value:function(a,e){var s=this;if(!xt.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Jt.TYPE_VD,Jt.TYPE_GM,Jt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertBefore.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=Jt.TYPE_CP===a.$$type?Os.initCp2(a,l,t,c):Os.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,o=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===o){t=!0;break}if(!t)throw new Error("InsertBefore exception.");e?(r.splice(e,0,a),h.__next=s,h.__prev=s.__prev,s.__prev=h,c.children.splice(e,0,h)):(i&&(((n=c.children[0]).__prev=h).__next=n),r.unshift(a),c.children.unshift(h)),c.__zIndexChildren=null;var n={};n[jf]=h,n[$f]=Ra.REFLOW,n[Zf]=!0,n[Jf]=!0,n[qf]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,n)},__after:function(t){xt.isFunction(e)&&e.call(h,t)}})}}},{key:"insertAfter",value:function(a,e){var s=this;if(!xt.isNil(a)&&!s.isDestroyed&&s.domParent){var h,l=s.root,c=s.domParent,t=c.hostRoot;if(!(-1<[Jt.TYPE_VD,Jt.TYPE_GM,Jt.TYPE_CP].indexOf(a.$$type)))throw new Error("Invalid parameter in insertAfter.");a.vd&&(l.delRefreshTask(a.vd.__task),a.vd.remove()),h=Jt.TYPE_CP===a.$$type?Os.initCp2(a,l,t,c):Os.initDom(a,l,t,c),l.addRefreshTask(h.__task={__before:function(){h.__task=null;for(var t,e=0,r=c.__json.children,i=r.length,o=(s.isShadowRoot?s.hostRoot:s).__json;e<i;e++)if(r[e]===o){t=!0;break}if(!t)throw new Error("insertAfter exception.");e<i-1?(r.splice(e+1,0,a),h.__prev=s,h.__next=s.__next,s.__next=h,c.children.splice(e+1,0,h)):(i&&(((n=c.children[i-1]).__next=h).__prev=n),r.push(a),c.children.push(h)),c.__zIndexChildren=null;var n={};n[jf]=h,n[$f]=Ra.REFLOW,n[Zf]=!0,n[Jf]=!0,n[qf]=h.__config,l.__addUpdate(h,h.__config,l,l.__config,n)},__after:function(t){xt.isFunction(e)&&e.call(h,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent!==this||!(t instanceof F0||t instanceof Ns))throw new Error("Invalid parameter in removeChild.");if(this.isDestroyed)return De.warn("Remove parent is destroyed."),void(xt.isFunction(e)&&e());t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ns?t.shadowRoot:t)instanceof as||"absolute"!==t.currentStyle[nf]})}},{key:"absChildren",get:function(){return this.children.filter(function(t){return(t=t instanceof Ns?t.shadowRoot:t)instanceof F0&&"absolute"===t.currentStyle[nf]})}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[lf]+t[gf]+t[pf]+this.lineBoxManager.baseLine}},{key:"firstBaseLine",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[lf]+t[gf]+t[pf]+this.lineBoxManager.firstBaseLine}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),u}(),s=A.STYLE_KEY,m1=s.WIDTH,v1=s.HEIGHT,y1=s.DISPLAY,x1=s.BORDER_TOP_WIDTH,E1=s.BORDER_RIGHT_WIDTH,b1=s.BORDER_LEFT_WIDTH,M1=s.BORDER_BOTTOM_WIDTH,T1=s.BORDER_TOP_LEFT_RADIUS,A1=s.BORDER_TOP_RIGHT_RADIUS,R1=s.BORDER_BOTTOM_RIGHT_RADIUS,O1=s.BORDER_BOTTOM_LEFT_RADIUS,w1=s.VISIBILITY,S1=s.BACKGROUND_IMAGE,I1=s.BACKGROUND_COLOR,C1=s.BOX_SHADOW,k1=s.MIX_BLEND_MODE,L1=s.MARGIN_TOP,D1=s.MARGIN_RIGHT,N1=s.MARGIN_BOTTOM,P1=s.MARGIN_LEFT,F1=s.PADDING_TOP,B1=s.PADDING_RIGHT,Y1=s.PADDING_BOTTOM,H1=s.PADDING_LEFT,G1=s.FONT_SIZE,W1=s.FLEX_BASIS,ki=A.UPDATE_KEY,U1=ki.UPDATE_NODE,X1=ki.UPDATE_FOCUS,V1=ki.UPDATE_CONFIG,Ur=A.NODE_KEY,K1=Ur.NODE_CACHE,z1=Ur.NODE_DEFS_CACHE,j1=Ur.NODE_IS_MASK,$1=r.AUTO,Z1=r.PX,q1=r.PERCENT,J1=r.REM,Q1=r.VW,td=r.VH,ed=r.VMAX,rd=r.VMIN,id=r.RGBA,od=yt.canvasPolygon,nd=yt.svgPolygon,ad=xt.isFunction,sd=function(){p(D,g1);var i=m(D);function D(t,e){f(this,D);var e=(t=i.call(this,t,e)).props.src,r=t.__loadImg={src:e};return e||(r.error=!0),t.__config[j1]&&(r=(e=c(t)).style,e=e.currentStyle,r[S1]=e[S1]=[null],r[I1]=e[I1]=[[0,0,0,0],id],r[x1]=e[x1]=[0,Z1],r[E1]=e[E1]=[0,Z1],r[b1]=e[b1]=[0,Z1],r[M1]=e[M1]=[0,Z1],r[C1]=e[C1]=null,r[k1]=e[k1]="normal"),t}return g(D,[{key:"__preLayout",value:function(t){var e,t=P(N(D.prototype),"__preLayout",this).call(this,t),r=this.__loadImg;return r.error||(e=r.src,(e=De.IMG[e])&&e.state===De.LOADED&&(r.source=e.source,r.width=e.width,r.height=e.height),r.cache=!1),t.fixedWidth&&t.fixedHeight||(r.error&&!this.props.placeholder?t.fixedWidth?t.h=t.w:t.fixedHeight?t.w=t.h:t.w=t.h=32:r.source?t.fixedWidth?t.h=t.w*r.height/r.width:t.fixedHeight?t.w=t.h*r.width/r.height:(t.w=r.width,t.h=r.height):t.w=t.h=0,t.fixedWidth=!0,t.fixedHeight=!0),t}},{key:"__addGeom",value:function(t,e){e=xt.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),P(N(D.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,r,i){t=P(N(D.prototype),"__calContent",this).call(this,t,e,r,i);return t||(e=this.__loadImg,"hidden"!==i[w1]&&(i[m1]||i[v1])&&e.source&&(t=!0)),t}},{key:"render",value:function(t,e,r,c){var u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,_=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,e=P(N(D.prototype),"render",this).call(this,t,e,r,c,u,_),i=(t===et.WEBGL&&(u=e.dx,_=e.dy),e.offscreenBlend),o=e.offscreenMask,n=e.offscreenFilter,f=e.offscreenOverflow,a=this.width,s=this.height,d=this.isDestroyed,p=this.props.placeholder,g=this.computedStyle,h=this.computedStyle,m=h[y1],v=h[T1],y=h[A1],x=h[R1],E=h[O1],h=h[w1],b=this.virtualDom,M=this.__config,l=this.__loadImg,T=this.root;if(i&&(r=i.target.ctx),o&&(r=o.target.ctx),n&&(r=n.target.ctx),f&&(r=f.target.ctx),l.source||l.error||l.loading||this.__loadAndRefresh(l,T,r,p,g,a,s),d||"none"===m||"hidden"===h)return e;i=M[K1],c&&i&&i.enabled&&(r=i.ctx),o=e.x3+u,n=e.y3+_,f=l.source;if(l.error&&!p&&D.showError){var T=.02*Math.min(a,s),g=o+.7*a,d=n+.3*s,m=5*T,A=[[o+.15*a,n+.7*s],[o+.3*a,n+.4*s],[o+.5*a,n+.6*s],[o+.6*a,n+.5*s],[o+.9*a,n+.8*s],[o+.15*a,n+.8*s]];if(t===et.CANVAS||t===et.WEBGL){r.strokeStyle="#CCC",r.lineWidth=T,r.fillStyle="#DDD",r.beginPath(),r.moveTo(o,n),r.lineTo(o+a,n),r.lineTo(o+a,n+s),r.lineTo(o,n+s),r.lineTo(o,n),r.stroke(),r.closePath(),r.beginPath();h=nt.ellipsePoints(g,d,m,m);yt.canvasPolygon(r,h,0,0),r.fill(),r.closePath(),r.beginPath(),r.moveTo(A[0][0],A[0][1]);for(var R=1,O=A.length;R<O;R++){var w=A[R];r.lineTo(w[0],w[1])}r.lineTo(A[0][0],A[0][1]),r.fill(),r.closePath()}else if(t===et.SVG){this.__addGeom("rect",[["x",o],["y",n],["width",a],["height",s],["stroke","#CCC"],["stroke-width",T],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",g],["cy",d],["r",m],["fill","#DDD"]]);for(var S="",I=0,C=A.length;I<C;I++){var k=A[I];I&&(S+=" "),S+=k[0]+","+k[1]}this.__addGeom("polygon",[["points",S],["fill","#DDD"]])}}else if(f){var L,c=$t.calRadius(o,n,a,s,v,y,x,E);if(t===et.CANVAS||t===et.WEBGL)c?(r.save(),r.beginPath(),od(r,c,u,_),r.clip(),r.closePath(),r.drawImage(f,o,n,a,s),r.restore()):r.drawImage(f,o,n,a,s);else if(t===et.SVG){if(l.cache)return l.cache.cache=!0,b.children=[l.cache],void(!b.cache&&c&&(i={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",nd(c)],["fill","#FFF"]]}]},h=r.add(i),M[z1].push(i),b.conClip="url(#"+h+")"));a===l.width&&s===l.height||(L=Hs.matrixResize(l.width,l.height,a,s,o,n,a,s));T=[["xlink:href",l.error?p:l.src],["x",o],["y",n],["width",l.width],["height",l.height]],m=(c&&(g={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",nd(c)],["fill","#FFF"]]}]},d=r.add(g),M[z1].push(g),b.conClip="url(#"+d+")",delete b.cache),L&&!qt.isE(L)&&T.push(["transform","matrix("+xt.joinArr(qt.m2m6(L),",")+")"]),{type:"img",tagName:"image",props:T});b.children=[m],l.cache=m}}return e}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return P(N(D.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[m1],o=r[v1],n=r[P1],a=r[D1],s=r[H1],h=r[B1],l=r[b1],r=r[E1];return i[1]===Z1?t-=i[0]:i[1]===q1?t-=e*i[0]*.01:i[1]===J1?t-=i[0]*this.root.computedStyle[G1]:i[1]===Q1?t-=i[0]*this.root.width*.01:i[1]===td?t-=i[0]*this.root.height*.01:i[1]===ed?t-=i[0]*Math.max(this.root.width,this.root.height)*.01:i[1]===rd?t-=i[0]*Math.min(this.root.width,this.root.height)*.01:(i=this.__loadImg).source&&(o[1]===Z1?t-=i.width*o[0]/i.height:o[1]===q1?t-=i.width*o[0]*e*.01/i.height:o[1]===J1?t-=i.width*o[0]*this.root.computedStyle[G1]/i.height:o[1]===Q1?t-=i.width*o[0]*this.root.width*.01/i.height:o[1]===td?t-=i.width*o[0]*this.root.height*.01/i.height:o[1]===ed?t-=o[0]*Math.max(this.root.width,this.root.height)*.01/i.height:o[1]===rd?t-=o[0]*Math.min(this.root.width,this.root.height)*.01/i.height:t-=i.width),n[1]===Z1?t-=n[0]:n[1]===q1?t-=n[0]*e*.01:n[1]===J1?t-=n[0]*this.root.computedStyle[G1]:n[1]===Q1?t-=n[0]*this.root.width*.01:n[1]===td?t-=n[0]*this.root.height*.01:n[1]===ed?t-=n[0]*Math.max(this.root.width,this.root.height)*.01:n[1]===rd&&(t-=n[0]*Math.min(this.root.width,this.root.height)*.01),s[1]===Z1?t-=s[0]:s[1]===q1?t-=s[0]*e*.01:s[1]===J1?t-=s[0]*this.root.computedStyle[G1]:s[1]===Q1?t-=s[0]*this.root.width*.01:s[1]===td?t-=s[0]*this.root.height*.01:s[1]===ed?t-=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===rd&&(t-=s[0]*Math.min(this.root.width,this.root.height)*.01),l[1]===Z1?t-=l[0]:l[1]===J1?t-=l[0]*this.root.computedStyle[G1]:l[1]===Q1?t-=l[0]*this.root.width*.01:l[1]===td?t-=l[0]*this.root.height*.01:l[1]===ed?t-=l[0]*Math.max(this.root.width,this.root.height)*.01:l[1]===rd&&(t-=l[0]*Math.min(this.root.width,this.root.height)*.01),a[1]===Z1?t-=a[0]:a[1]===q1?t-=a[0]*e*.01:a[1]===J1?t-=a[0]*this.root.computedStyle[G1]:a[1]===Q1?t-=a[0]*this.root.width*.01:a[1]===td?t-=a[0]*this.root.height*.01:a[1]===ed?t-=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===rd&&(t-=a[0]*Math.min(this.root.width,this.root.height)*.01),h[1]===Z1?t-=h[0]:h[1]===q1?t-=h[0]*e*.01:h[1]===J1?t-=h[0]*this.root.computedStyle[G1]:h[1]===Q1?t-=h[0]*this.root.width*.01:h[1]===td?t-=h[0]*this.root.height*.01:h[1]===ed?t-=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===rd&&(t-=h[0]*Math.min(this.root.width,this.root.height)*.01),r[1]===Z1?t-=r[0]:r[1]===J1?t-=r[0]*this.root.computedStyle[G1]:r[1]===Q1?t-=r[0]*this.root.width*.01:r[1]===td?t-=r[0]*this.root.height*.01:r[1]===ed?t-=r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===rd&&(t-=r[0]*Math.min(this.root.width,this.root.height)*.01),t}},{key:"__calMinMax",value:function(t,e){return Mo.computeReflow(this,this.isShadowRoot),this.__calBasis(t,e)}},{key:"__calBasis",value:function(t,c){var e=0,r=0,i=0,o=this.currentStyle,u=this.__loadImg,n=c.w,_=c.h,a=o[W1],s=o[m1],h=o[v1],f=o[P1],d=o[L1],p=o[D1],g=o[N1],m=o[H1],v=o[F1],y=o[B1],x=o[Y1],E=o[x1],b=o[E1],M=o[M1],o=o[b1],l=t?s:h,h=t?h:s,l=(-1<[Z1,q1,J1,Q1,td,ed,rd].indexOf(a[1])?a[1]===Z1?e=i=r=a[0]:a[1]===q1?e=i=r=.01*a[0]*(t?n:_):a[1]===J1?e=i=r=a[0]*this.root.computedStyle[G1]:a[1]===Q1?e=i=r=a[0]*this.root.width*.01:a[1]===td?e=i=r=a[0]*this.root.height*.01:a[1]===ed?e=i=r=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===rd&&(e=i=r=a[0]*Math.min(this.root.width,this.root.height)*.01):-1<[Z1,q1,J1,Q1,td,ed,rd].indexOf(l[1])?l[1]===Z1?e=i=r=l[0]:l[1]===q1?e=i=r=.01*l[0]*(t?n:_):l[1]===J1?e=i=r=l[0]*this.root.computedStyle[G1]:l[1]===Q1?e=i=r=l[0]*this.root.width*.01:l[1]===td?e=i=r=l[0]*this.root.height*.01:l[1]===ed?e=i=r=l[0]*Math.max(this.root.width,this.root.height)*.01:l[1]===rd&&(e=i=r=l[0]*Math.min(this.root.width,this.root.height)*.01):(u.source||u.error)&&(a=this.__preLayout(c),e=i=r=h[1]!==$1?(h[1]===Z1?h=h[0]:h[1]===q1?h=.01*h[0]*(t?_:n):h[1]===J1?h=h[0]*this.root.computedStyle[G1]:h[1]===Q1?h=h[0]*this.root.width*.01:h[1]===td?h=h[0]*this.root.height*.01:h[1]===ed?h=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===rd&&(h=h[0]*Math.min(this.root.width,this.root.height)*.01),l=a.w/a.h,t?h*l:h/l):t?a.w:a.h),t?(h=this.__calMp(f,n)+this.__calMp(p,n)+this.__calMp(m,n)+this.__calMp(y,n),e+=l=o[0]+b[0]+h,i+=l,r+=l):(a=this.__calMp(d,n)+this.__calMp(g,n)+this.__calMp(v,n)+this.__calMp(x,n),e+=h=E[0]+M[0]+a,i+=h,r+=h),0);return s[1]===Z1?l=s[0]:s[1]===q1?l=.01*s[0]*(t?n:_):s[1]===J1?l=s[0]*this.root.computedStyle[G1]:s[1]===Q1?l=s[0]*this.root.width*.01:s[1]===td?l=s[0]*this.root.height*.01:s[1]===ed?l=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===rd?l=s[0]*Math.min(this.root.width,this.root.height)*.01:(u.source||u.error)&&(l=this.__preLayout(c).w),[[e,r,i],[l+=this.__calMp(f,n)+this.__calMp(p,n)+this.__calMp(m,n)+this.__calMp(y,n)+o[0]+b[0]]]}},{key:"__loadAndRefresh",value:function(r,i,o,n,a,s,h,l){var c=this;(r.source||r.error)&&(i.delRefreshTask(c.__task),i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[U1]=c,t[X1]=Ra.REFLOW,t[V1]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))}}),r.source=null),r.loading=!0,De.measureImg(r.src,function(t){if(t.url===r.src&&!c.isDestroyed){var e=function(){var t=c.currentStyle,e=t[m1],t=t[v1];i.delRefreshTask(c.__task),e[1]!==$1&&t[1]!==$1?i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[U1]=c,t[X1]=Ra.REPAINT,t[V1]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){ad(l)&&l.call(c)}}):i.addRefreshTask(c.__task={__before:function(){var t;c.__task=null,c.isDestroyed||((t={})[U1]=c,t[X1]=Ra.REFLOW,t[V1]=c.__config,i.__addUpdate(c,c.__config,i,i.__config,t))},__after:function(){ad(l)&&l.call(c)}})};if(r.cache&&(r.cache.cache=!1),r.loading=!1,t.success)r.source=t.source,r.width=t.width,r.height=t.height;else{if(n)return void De.measureImg(n,function(t){t.success&&(r.error=!0,r.source=t.source,r.width=t.width,r.height=t.height,e())},{ctx:o,root:i,width:s,height:h});r.error=!0}"none"!==a[y1]&&e()}},{ctx:o,root:i,width:s,height:h})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,o=this.root;t===i.src||!t&&i.error?ad(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,o,o.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,o.delRefreshTask(r.__task),o.addRefreshTask(r.__task={__before:function(){var t;r.__task=null,r.isDestroyed||((t={})[U1]=r,t[X1]=Ra.REFLOW,t[V1]=r.__config,o.__addUpdate(r,r.__config,o,r.__config,t))},__after:function(t){ad(e)&&e(t)}}))}},{key:"appendChild",value:function(){De.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}},{key:"isReplaced",get:function(){return!0}}]),D}(),hd=(n(sd,"showError",!0),function(){function e(t){f(this,e),this.id=t,this.count=0,this.list=[],this.cacheHash={}}return g(e,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;0<=r;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}()),re=A.STYLE_KEY,ld=(re.DISPLAY,re.MARGIN_TOP),cd=re.MARGIN_RIGHT,ud=re.MARGIN_BOTTOM,_d=re.MARGIN_LEFT,fd=re.PADDING_TOP,dd=re.PADDING_RIGHT,pd=re.PADDING_BOTTOM,gd=re.PADDING_LEFT,md=re.WIDTH,vd=re.HEIGHT,yd=re.BORDER_TOP_WIDTH,xd=re.BORDER_RIGHT_WIDTH,Ed=re.BORDER_BOTTOM_WIDTH,bd=re.BORDER_LEFT_WIDTH,Md=re.FILL,Td=re.STROKE,Ad=re.STROKE_MITERLIMIT,Rd=re.STROKE_WIDTH,Od=re.STROKE_LINECAP,wd=re.STROKE_LINEJOIN,Sd=re.STROKE_DASHARRAY,Id=re.STROKE_DASHARRAY_STR,Cd=re.FILL_RULE,kd=re.VISIBILITY,Ld=re.FONT_SIZE,Dd=re.FLEX_BASIS,e=A.NODE_KEY,Nd=e.NODE_CACHE_PROPS,Pd=e.NODE_CURRENT_PROPS,Fd=e.NODE_CURRENT_STYLE,Bd=e.NODE_STYLE,Yd=e.NODE_DEFS_CACHE,Hd=e.NODE_CACHE,Gd=r.PX,Wd=r.PERCENT,Ud=r.REM,Xd=r.VW,Vd=r.VH,Kd=r.VMAX,zd=r.VMIN,jd=xt.int2rgba,$d=xt.isNil,Zd=xt.joinArr,qd=yt.canvasPolygon,Jd=yt.svgPolygon,Qd=et.WEBGL,tp={},ep=function(){p(k,F0);var r=m(k);function k(t,e){f(this,k),(t=r.call(this,t,e)).__isMulti=!!t.props.multi,t.__style=Mo.normalize(t.style,ur.DOM_ENTRY_SET.concat(ur.GEOM_ENTRY_SET)),t.__currentStyle=xt.extend({},t.__style),t.__currentProps=xt.clone(t.props);e=t.__config;return e[Nd]=t.__cacheProps={},e[Pd]=t.__currentProps,e[Fd]=t.__currentStyle,e[Bd]=t.__style,t}return g(k,[{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[md],o=r[_d],n=r[cd],a=r[gd],s=r[dd],h=r[bd],r=r[xd];return i[1]===Gd?t-=i[0]:i[1]===Wd?t-=e*i[0]*.01:i[1]===Ud?t-=i[0]*this.root.computedStyle[Ld]:i[1]===Xd?t-=i[0]*this.root.width*.01:i[1]===Vd?t-=i[0]*this.root.height*.01:i[1]===Kd?t-=i[0]*Math.max(this.root.width,this.root.height)*.01:i[1]===zd&&(t-=i[0]*Math.min(this.root.width,this.root.height)*.01),o[1]===Gd?t-=o[0]:o[1]===Wd?t-=o[0]*e*.01:o[1]===Ud?t-=o[0]*this.root.computedStyle[Ld]:o[1]===Xd?t-=o[0]*this.root.width*.01:o[1]===Vd?t-=o[0]*this.root.height*.01:o[1]===Kd?t-=o[0]*Math.max(this.root.width,this.root.height)*.01:o[1]===zd&&(t-=o[0]*Math.min(this.root.width,this.root.height)*.01),a[1]===Gd?t-=a[0]:a[1]===Wd?t-=a[0]*e*.01:a[1]===Ud?t-=a[0]*this.root.computedStyle[Ld]:a[1]===Xd?t-=a[0]*this.root.width*.01:a[1]===Vd?t-=a[0]*this.root.height*.01:a[1]===Kd?t-=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===zd&&(t-=a[0]*Math.min(this.root.width,this.root.height)*.01),h[1]===Gd?t-=h[0]:h[1]===Ud?t-=h[0]*this.root.computedStyle[Ld]:h[1]===Xd?t-=h[0]*this.root.width*.01:h[1]===Vd?t-=h[0]*this.root.height*.01:h[1]===Kd?t-=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===zd&&(t-=h[0]*Math.min(this.root.width,this.root.height)*.01),n[1]===Gd?t-=n[0]:n[1]===Wd?t-=n[0]*e*.01:n[1]===Ud?t-=n[0]*this.root.computedStyle[Ld]:n[1]===Xd?t-=n[0]*this.root.width*.01:n[1]===Vd?t-=n[0]*this.root.height*.01:n[1]===Kd?t-=n[0]*Math.max(this.root.width,this.root.height)*.01:n[1]===zd&&(t-=n[0]*Math.min(this.root.width,this.root.height)*.01),s[1]===Gd?t-=s[0]:s[1]===Wd?t-=s[0]*e*.01:s[1]===Ud?t-=s[0]*this.root.computedStyle[Ld]:s[1]===Xd?t-=s[0]*this.root.width*.01:s[1]===Vd?t-=s[0]*this.root.height*.01:s[1]===Kd?t-=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===zd&&(t-=s[0]*Math.min(this.root.width,this.root.height)*.01),r[1]===Gd?t-=r[0]:r[1]===Ud?t-=r[0]*this.root.computedStyle[Ld]:r[1]===Xd?t-=r[0]*this.root.width*.01:r[1]===Vd?t-=r[0]*this.root.height*.01:r[1]===Kd?t-=r[0]*Math.max(this.root.width,this.root.height)*.01:r[1]===zd&&(t-=r[0]*Math.min(this.root.width,this.root.height)*.01),t}},{key:"__calMinMax",value:function(t,e){return Mo.computeReflow(this,this.isShadowRoot),this.__calBasis(t,e)}},{key:"__calBasis",value:function(t,c){var e=0,r=0,i=0,o=this.currentStyle,n=c.w,c=c.h,a=o[Dd],s=o[md],h=o[vd],u=o[_d],l=o[ld],_=o[cd],f=o[ud],d=o[gd],p=o[fd],g=o[dd],m=o[pd],v=o[yd],y=o[xd],x=o[Ed],o=o[bd],h=t?s:h,l=(-1<[Gd,Wd,Ud,Xd,Vd,Kd,zd].indexOf(a[1])?a[1]===Gd?e=i=r=a[0]:a[1]===Wd?e=i=r=.01*a[0]*(t?n:c):a[1]===Ud?e=i=r=a[0]*this.root.computedStyle[Ld]:a[1]===Xd?e=i=r=a[0]*this.root.width*.01:a[1]===Vd?e=i=r=a[0]*this.root.height*.01:a[1]===Kd?e=i=r=a[0]*Math.max(this.root.width,this.root.height)*.01:a[1]===zd&&(e=i=r=a[0]*Math.min(this.root.width,this.root.height)*.01):-1<[Gd,Wd,Ud,Xd,Vd,Kd,zd].indexOf(h[1])&&(h[1]===Gd?e=i=r=h[0]:h[1]===Wd?e=i=r=.01*h[0]*(t?n:c):h[1]===Ud?e=i=r=h[0]*this.root.computedStyle[Ld]:h[1]===Xd?e=i=r=h[0]*this.root.width*.01:h[1]===Vd?e=i=r=h[0]*this.root.height*.01:h[1]===Kd?e=i=r=h[0]*Math.max(this.root.width,this.root.height)*.01:h[1]===zd&&(e=i=r=h[0]*Math.min(this.root.width,this.root.height)*.01)),t?(a=this.__calMp(u,n)+this.__calMp(_,n)+this.__calMp(d,n)+this.__calMp(g,n),e+=h=o[0]+y[0]+a,i+=h,r+=h):(a=this.__calMp(l,n)+this.__calMp(f,n)+this.__calMp(p,n)+this.__calMp(m,n),e+=h=v[0]+x[0]+a,i+=h,r+=h),0);return s[1]===Gd?l=s[0]:s[1]===Wd?l=.01*s[0]*(t?n:c):s[1]===Ud?l=s[0]*this.root.computedStyle[Ld]:s[1]===Xd?l=s[0]*this.root.width*.01:s[1]===Vd?l=s[0]*this.root.height*.01:s[1]===Kd?l=s[0]*Math.max(this.root.width,this.root.height)*.01:s[1]===zd&&(l=s[0]*Math.min(this.root.width,this.root.height)*.01),[[e,r,i],[l+=this.__calMp(u,n)+this.__calMp(_,n)+this.__calMp(d,n)+this.__calMp(g,n)+o[0]+y[0]]]}},{key:"__layoutBlock",value:function(t,e){var r=this.__preLayout(t),i=r.fixedWidth,o=r.fixedHeight,n=r.w,r=r.h;this.__height=o?r:0,e?this.__width=i?n:0:(this.__width=n,this.__ioSize(n,this.height),this.__marginAuto(this.currentStyle,t),this.__config[Nd]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),r=e.fixedWidth,i=e.fixedHeight,o=e.x,n=e.y,a=e.w,e=e.h,r=this.__width=r?a:o-t.x,a=this.__height=i?e:n-t.y;this.__ioSize(r,a),this.__config[Nd]=this.__cacheProps={}}},{key:"__calCache",value:function(i,_,e,o,n,a,t,r,f,d,p,g,m,v,y,x,E,b,M,T,s,h,A,R,O,w,l,c,S,I){var C,u=this,e=P(N(k.prototype),"__calCache",this).call(this,i,_,e,o,n,a,t,r,f,d,p,g,m,v,y,x,E,b,M,T,s,h,A,R,O,w,l,c,S,I);return $d(o[Rd])&&(o[Rd]=!0,t=n[Rd]||[],C=this.width,a[Rd]=t.map(function(t){return t[1]===Gd?t[0]:t[1]===Wd?t[0]*C*.01:t[1]===Ud?t[0]*u.root.computedStyle[Ld]:t[1]===Xd?t[0]*u.root.width*.01:t[1]===Vd?t[0]*u.root.height*.01:t[1]===Kd?t[0]*Math.max(u.root.width,u.root.height)*.01:t[1]===zd?t[0]*Math.min(u.root.width,u.root.height)*.01:0})),$d(o[Sd])&&(o[Sd]=!0,a[Sd]=n[Sd]||[],o[Id]=a[Sd].map(function(t){return Zd(t,",")})),[Od,wd,Ad,Cd].forEach(function(t){a[t]=n[t]}),[Td,Md].forEach(function(t){var e,r;$d(o[t])&&(e=n[t],a[t]=e,r=[],Array.isArray(e)&&e.forEach(function(t){var e;!t||"linear"!==t.k&&"radial"!==t.k&&"conic"!==t.k?0<t[3]?r.push(jd(t)):r.push("none"):(i===Qd&&(e=u.__config[Hd],s+=e.dx,h+=e.dx,l+=e.dy,c+=e.dy),r.push(u.__gradient(i,_,s,l,h,c,t)))}),o[t]=r)}),e}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[kd]}},{key:"__preSet",value:function(t){var e=this.width,r=this.height,i=this.__cacheStyle,o=this.computedStyle,e=t.sx3+.5*e,t=t.sy3+.5*r,r=i[Md],n=i[Td],i=i[Id],a=o[Rd],s=o[Od],h=o[wd],l=o[Ad];return{cx:e,cy:t,stroke:n,strokeWidth:a,strokeDasharray:o[Sd],strokeDasharrayStr:i,strokeLinecap:s,strokeLinejoin:h,strokeMiterlimit:l,fill:r,fillRule:o[Cd]}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,o=r.strokeWidth,n=r.strokeDasharray,a=r.strokeLinecap,s=r.strokeLinejoin,h=r.strokeMiterlimit,r=r.fill;t!==et.CANVAS&&t!==et.WEBGL||(r&&("linear"!==r.k&&("radial"!==r.k||Array.isArray(r.v))?"conic"===r.k||r.k||e.fillStyle===r||(e.fillStyle=r):e.fillStyle=r.v),i&&("linear"!==i.k&&("radial"!==i.k||Array.isArray(i.v))?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==o&&e.lineWidth!==o&&(e.lineWidth=o),void 0!==a&&e.lineCap!==a&&(e.lineCap=a),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==h&&e.miterLimit!==h&&(e.miterLimit=h),xt.isFunction(e.getLineDash)?n&&!xt.equalArr(e.getLineDash(),n)&&e.setLineDash(n):n&&e.setLineDash(n))}},{key:"render",value:function(t,e,r,i,o,n){e=P(N(k.prototype),"render",this).call(this,t,e,r,i,o,n);if(t===et.SVG&&(this.virtualDom.type="geom"),e.break)return e;r=this.__preSet(e);return Object.assign(e,r)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,c=r.fillRule,o=r.stroke,u=r.strokeWidth,_=r.strokeDasharray,f=r.strokeDasharrayStr,d=r.strokeLinecap,p=r.strokeLinejoin,g=r.strokeMiterlimit,n=r.dx,m=r.dy,v=this.__cacheProps.list,y=this.isMulti,x=this.bbox;if(i.length<=1&&o.length<=1){r={fill:i[0],fillRule:c[0],stroke:o[0],strokeWidth:u[0],strokeDasharray:_[0],strokeDasharrayStr:f[0],strokeLinecap:d[0],strokeLinejoin:p[0],strokeMiterlimit:g[0],dx:n,dy:m,bbox:x};this.__renderOnePolygon(t,e,y,v,r)}else{for(var a=0,E=i.length;a<E;a++){var s=i[a];s&&(s={fill:s,fillRule:c[a],dx:n,dy:m,bbox:x},this.__renderOnePolygon(t,e,y,v,s))}for(var h=0,b=o.length;h<b;h++){var l=o[h];l&&(l={stroke:l,strokeWidth:u[h],strokeDasharray:_[h],strokeDasharrayStr:f[h],strokeLinecap:d[h],strokeLinejoin:p[h],strokeMiterlimit:g[h],dx:n,dy:m,bbox:x},this.__renderOnePolygon(t,e,y,v,l))}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,o){var n=o.fill,a=o.stroke,s=o.strokeWidth,h=n&&"conic"===n.k,l=a&&"conic"===a.k,c=n&&"radial"===n.k&&Array.isArray(n.v),u=s&&0<s&&a&&"radial"===a.k&&Array.isArray(a.v);h||l?(h?this.__conicGradient(t,e,i,r,o):"none"!==n&&this.__drawPolygon(t,e,r,i,o,!0),s&&0<s&&l?De.warn("Stroke style can not use conic-gradient"):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,o,"fill"):"none"!==n&&this.__drawPolygon(t,e,r,i,o,!0),s&&0<s&&u?(De.warn("Stroke style can not use radial-gradient for ellipse"),o.stroke.v=o.stroke.v[0],this.__drawPolygon(t,e,r,i,o,!1,!0)):s&&0<s&&"none"!==a&&this.__drawPolygon(t,e,r,i,o,!1,!0)):this.__drawPolygon(t,e,r,i,o,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,o,c,u){var n,a=o.fill,s=o.stroke,h=o.strokeWidth,l=o.fillRule,_=o.strokeDasharrayStr,f=o.strokeLinecap,d=o.strokeLinejoin,p=o.strokeMiterlimit,g=o.dx,m=o.dy;t===et.CANVAS||t===et.WEBGL?(this.__preSetCanvas(t,e,o),e.beginPath(),r?i.forEach(function(t){return qd(e,t,g,m)}):qd(e,i,g,m),c&&a&&"none"!==a&&e.fill(l),u&&s&&"none"!==s&&h&&0<h&&e.stroke(),e.closePath()):t===et.SVG&&(n="",r?i.forEach(function(t){return n+=Jd(t)}):n=Jd(i),o=[["d",n]],(a&&"none"!==a||s&&"none"!==s)&&(c&&a&&"none"!==a?(o.push(["fill",a.v||a]),l&&"nonzero"!==l&&o.push(["fill-rule",l])):o.push(["fill","none"]),u&&s&&"none"!==s&&h&&0<h?(o.push(["stroke",s.v||s]),o.push(["stroke-width",h]),this.__propsStrokeStyle(o,_,f,d,p)):o.push(["stroke-width",0]),this.addGeom("path",o)))}},{key:"__inversePtList",value:function(t,e,n){return e?t.map(function(t){return t&&t.length?t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var o=qt.calPoint([t[r],t[r+1]],n);e.push(o[0]),e.push(o[1])}return e}):null}):t.map(function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var o=qt.calPoint([t[r],t[r+1]],n);e.push(o[0]),e.push(o[1])}return e})}},{key:"__radialEllipse",value:function(t,e,r,i,o,n){var a,c=o.strokeWidth,u=o.strokeDasharrayStr,_=o.strokeLinecap,f=o.strokeLinejoin,d=o.strokeMiterlimit,p=o.dx,g=o.dy,o=Zt(o[n].v,4),s=o[0],h=o[1],l=o[2],o=o[3],l=(h=la.calMatrixByOrigin(h,[l,o]),qt.inverse(h));r=this.__inversePtList(r,i,l),t===et.CANVAS||t===et.WEBGL?(h&&(e.save(),o=this.matrixEvent,h=qt.multiply(o,h),e.setTransform(h[0],h[1],h[4],h[5],h[12],h[13])),e.beginPath(),e[n+"Style"]!==s&&(e[n+"Style"]=s),i?r.forEach(function(t){return yt.canvasPolygon(e,t,p,g)}):qd(e,r,p,g),e[n](),e.closePath(),h&&e.restore()):t===et.SVG&&(a="",i?r.forEach(function(t){return a+=Jd(t)}):a=Jd(r),l=[["d",a]],"fill"===n?(l.push(["fill",s]),l.push(["strokeWidth",0])):"stroke"===n&&(l.push(["fill","none"]),l.push(["stroke",s]),l.push(["stroke-width",c]),this.__propsStrokeStyle(l,u,_,f,d)),l.push(["transform","matrix(".concat(Zd(qt.m2m6(h),","),")")]),this.addGeom("path",l))}},{key:"__conicGradient",value:function(c,r,t,u,e){var i,o,n,_,f=this,a=e.fill,s=e.bbox,h=e.dx,l=void 0===h?0:h,h=e.dy,d=void 0===h?0:h,p=a.v;c===et.CANVAS||c===et.WEBGL?(e=Zt(s,4),i=e[0],o=e[1],h=e[2],s=e[3],s=(n=De.getCacheCanvas(e=h-i,h=s-o,"__$$CONIC_GRADIENT$$__")).ctx.getImageData(0,0,e,h),at.getConicGradientImage(.5*e,.5*h,e,h,a.v.stop,s.data),n.ctx.putImageData(s,0,0),u?t.forEach(function(t){r.save(),r.beginPath(),qd(r,t,l,d),r.clip(),r.closePath(),r.drawImage(n.canvas,i+l,o+d),r.restore()}):(r.save(),r.beginPath(),qd(r,t,l,d),r.clip(),r.closePath(),r.drawImage(n.canvas,i+l,o+d),r.restore()),n.ctx.clearRect(0,0,e,h)):c===et.SVG&&(u?t.forEach(function(t){var t={tagName:"clipPath",children:[{tagName:"path",props:[["d",Jd(t)]]}]},e=r.add(t);f.__config[Yd].push(t),p.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Jd(t[0])],["fill",t[1]],["clip-path","url(#"+e+")"]]})})}):(a={tagName:"clipPath",children:[{tagName:"path",props:[["d",Jd(t)]]}]},_=r.add(a),this.__config[Yd].push(a),p.forEach(function(t){f.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Jd(t[0])],["fill",t[1]],["clip-path","url(#"+_+")"]]})})))}},{key:"__propsStrokeStyle",value:function(t,e,r,i,o){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),o&&4!==o&&t.push(["stroke-miterlimit",o])}},{key:"__releaseWhenEmpty",value:function(t,e){return"hidden"===e[kd]}},{key:"__offsetX",value:function(t,e,r){P(N(k.prototype),"__offsetX",this).call(this,t,e,r),this.__config[Nd]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,r){P(N(k.prototype),"__offsetY",this).call(this,t,e,r),this.__config[Nd]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){P(N(k.prototype),"__resizeX",this).call(this,t,e),this.__config[Nd]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){P(N(k.prototype),"__resizeY",this).call(this,t,e),this.__config[Nd]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=xt.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return $d(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return tp}},{key:"getRegister",value:function(t){if(!t||!xt.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!tp.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return tp[t]}},{key:"register",value:function(t,e){if(!(t&&xt.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof k))throw new Error("Invalid param");if(k.hasRegister(t))throw new Error("Geom has already register: ".concat(t));tp[t]=e}},{key:"hasRegister",value:function(t){return t&&tp.hasOwnProperty(t)}},{key:"delRegister",value:function(t){k.hasRegister(t)&&delete tp[t]}}]),k}(),a=A.NODE_KEY,rp=a.NODE_STYLE,ip=a.NODE_CURRENT_STYLE,op=a.NODE_COMPUTED_STYLE,np=a.NODE_DOM_PARENT,ap=a.NODE_MATRIX,sp=a.NODE_MATRIX_EVENT,hp=a.NODE_STRUCT,lp=Jt.TYPE_VD,cp=Jt.TYPE_GM,up=Jt.TYPE_CP,_p=[],fp=[],dp={};function pp(t){t instanceof g1?t.children.forEach(function(t){t instanceof g1?pp(t):t instanceof Ns&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,gp(t,t.props))}):t instanceof Ns&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,gp(t,t.props))}function gp(t,e,r){if(t.__nextState||r){r=!xt.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state);if(r)for(var i,o=t,r=e,n=t.__nextState||t.state,r=(o.props=r,o.state=n,o.__nextState=null,o.shadow),a=o.shadowRoot,n=o.__cd,s=cs(o.render()),h=(function(t,e,r){var o=xp(e,{},t),n=xp(r,{}),a=[],s=[];Object.keys(o).forEach(function(t){var e=o[t];n[t]||(e.json.key=dp)}),Object.keys(n).forEach(function(t){var e,r,i=o[t],t=n[t];i?(e=i.json,r=t.json,i=i.vd,e.$$type===up&&r.$$type===up?e.klass===r.klass&&(yp(e,r,i),e.key=r.key=dp,s.push(i)):e.$$type===r.$$type&&e.tagName===r.tagName&&(r.$$type===cp&&e.props.multi!==r.props.multi||(r.__inheritAnimate=i),e.key=r.key=dp,r.$$type===lp&&a.push({vd:i,oj:e,nj:r}))):t.json.key=dp}),a.forEach(function(t){vp(t.vd,t.oj,t.nj)}),mp(t,e,r),s.forEach(function(t){Ep(t)})}(r,n,s),o.__init(s),o.shadowRoot),l=(h instanceof F0?(["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach(function(t){h[t]=a[t]}),h.__computedStyle=h.__config[op]=a.computedStyle):(i=o.domParent,[rp,ip,op,ap,sp].forEach(function(t){h.__config[t]=i.__config[t]})),["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach(function(t){h[t]=a[t]}),h.__config[np]=a.domParent,h.__config[hp]=a.__config[hp],_p.push(o),xt.isObject(s)&&s.__placeholder||fp.push(r),s&&s.__placeholder&&delete s.__placeholder,s&&s.__inheritAnimate&&delete s.__inheritAnimate,s&&s.__animateRecords&&delete s.__animateRecords,o.host);l&&l.shadow===o;)(l.__shadowRoot=h).__hostRoot=l,l=(o=l).host;else t.props=e,t.state=t.__nextState||t.state,pp(t.shadow)}else pp(t.shadow)}function mp(t,e,r){xt.isObject(r)&&(r.$$type===up?r.key!==dp&&e&&e.$$type===r.$$type&&e.klass===r.klass&&(yp(e,r,t),Ep(t)):r.$$type===cp&&e&&e.$$type===cp?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===lp&&e&&e.$$type===lp&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),vp(t,e,r)))}function vp(c,u,_){for(var t=u.children,e=_.children,r=t.length,i=e.length,f=c.children,o=0,n=0,a=0,s=Math.min(r,i);o<s;o++){var h=t[o+n],l=e[o+a];h.key===dp&&l.key===dp||(h.key===dp?(n++,o--,r--,s=Math.min(r,i)):l.key===dp?(a++,o--,i--,s=Math.min(r,i)):mp(f[o+n],h,l))}}function yp(i,o,n){var a=(o.__placeholder=n).shadowRoot,s={};Object.keys(i.props).forEach(function(t){var e=i.props[t];s[t]=e}),Object.keys(o.props).forEach(function(t){var e,r=o.props[t];/^on[a-zA-Z]/.test(t)?(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),a.listener[t]=r)):(t=t.slice(2).toLowerCase(),a.listener[t]=r)):/^on-[a-zA-Z\d_$]/.test(t)&&(i.props[t]=r,(e=s[t])?(delete s[t],e!==r&&(t=t.slice(2).toLowerCase(),n.off(t,s[t]),n.on(t,r)),delete s[t]):(t=t.slice(2).toLowerCase(),n.on(t,r)))}),Object.keys(s).forEach(function(t){var e=s[t];/^on[a-zA-Z]/.test(t)?(o.props[t]=e,t=t.slice(2).toLowerCase(),delete a.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(o.props[t]=e,t=t.slice(2).toLowerCase(),n.off(t,e))}),gp(n,o.props,!xt.equal(i.props,o.props))}function xp(t,r,i){var e;return Array.isArray(t)?t.forEach(function(t,e){return xp(t,r,i&&i[e])}):xt.isObject(t)&&(t.$$type!==lp&&t.$$type!==cp&&t.$$type!==up||(t.$$type===lp&&xp(t.children,r,i&&i.children),e=t.props.key,xt.isNil(e)||""===e||(r.hasOwnProperty(e)&&De.warn("Component "+i.tagName+" has duplicate key: "+e),r[e]={json:t,vd:i}))),r}function Ep(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(-1<r))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var bp,Mp={updateList:_p,check:pp,did:function(){_p.forEach(function(t){xt.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()}),_p.splice(0),fp.forEach(function(t){t.__destroy()}),fp=[]}},Tp=xt.joinVd,Ap=xt.joinDef,Rp=Ra.contain,Op=Ra.NONE,wp=Ra.TRANSFORM_ALL,Sp=Ra.OPACITY,Ip=Ra.FILTER,Cp=Ra.MIX_BLEND_MODE;function kp(t,e,r){for(var c=t.childNodes,i=c[0],u=e.defs,o=r.defs,n=u.length,a=o.length,s=0,h=i.childNodes;s<Math.min(n,a);s++)!function(e,t,r){if(t.tagName!==r.tagName)Xp(e,"beforebegin",Ap(r)),e.parentNode.removeChild(e);else{t.uuid!==r.uuid&&e.setAttribute("id",r.uuid);for(var i={},o=0,c=(t.props||[]).length;o<c;o++){var n=Zt(t.props[o],2),u=n[0],n=n[1];i[u]=n}for(var a=0,_=(r.props||[]).length;a<_;a++){var s=Zt(r.props[a],2),h=s[0],s=s[1];i.hasOwnProperty(h)?(i[h]!==s&&e.setAttribute(h,s),delete i[h]):e.setAttribute(h,s)}Object.keys(i).forEach(function(t){e.removeAttribute(t)});for(var f=e.childNodes,d=t.children.length,p=r.children.length,l=0;l<Math.min(d,p);l++)Yp(e,l,t.children[l],r.children[l]);if(l<d)for(var g=d-1;l<=g;g--)Up(e,f,g);else if(l<p)for(;l<p;l++)Wp(e,f,l,Tp(r.children[l]))}}(h[s],u[s],o[s]);if(s<n)for(var l=n-1;s<=l;l--)Up(i,h,l);else if(s<a)for(;s<a;s++)Wp(i,h,s,Ap(o[s]));r.hasOwnProperty("lv")||Bp(c[1],e.bb,r.bb),Pp(t,e,r,!0)}function Lp(t,e,r){if("dom"===e.type)"dom"===r.type?Pp(t,e,r):"geom"===r.type?Fp(t,e,r):Gp(t,r);else if("text"===e.type)if("text"===r.type){var i=t,c=e,o=r;if(!o.cache){for(var u=c.children.length,_=o.children.length,n=0;n<Math.min(u,_);n++)Yp(i,n,c.children[n],o.children[n],!0);var f=i.childNodes;if(n<u)for(var d=u-1;n<=d;d--)Up(i,f,d);else if(n<_)for(;n<_;n++)Wp(i,f,n,Tp(o.children[n]))}}else Gp(t,r);else if("geom"===e.type)if("dom"===r.type)Fp(t,e,r);else if("geom"===r.type){var a=t,s=e,h=r;if(h.cache)Np(a,0,h,h.lv);else if(h.hasOwnProperty("lv"))Np(a,0,h,h.lv);else{Dp(a,s,h),Bp(a.firstChild,s.bb,h.bb);for(var p=s.children.length,g=h.children.length,l=0,m=a.lastChild,v=m.childNodes;l<Math.min(p,g);l++)Yp(m,l,s.children[l],h.children[l]);if(l<p)for(var y=p-1;l<=y;y--)Up(m,v,y);else if(l<g)for(;l<g;l++)Wp(m,v,l,Tp(h.children[l]))}}else Gp(t,r);else"img"===e.type&&("img"===r.type?Hp(t,e,r):Gp(t,r))}function Dp(t,e,r){var i=r.transform,o=r.opacity,n=r.visibility,a=r.mask,s=r.overflow,h=r.filter,l=r.mixBlendMode,r=r.conClip;e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==o&&(1!==o&&void 0!==o?t.setAttribute("opacity",o):t.removeAttribute("opacity")),e.visibility!==n&&t.setAttribute("visibility",n),e.mask!==a&&(a?t.setAttribute("mask",a):t.removeAttribute("mask")),e.filter===h&&e.mixBlendMode===l||((i=(h?"filter:".concat(h,";"):"")+(l?"mix-blend-mode:".concat(l,";"):""))?t.setAttribute("style",i):t.removeAttribute("filter")),e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==r&&(r?t.childNodes[1].setAttribute("clip-path",r):t.childNodes[1].removeAttribute("clip-path"))}function Np(t,e,r,i){var o=r.transform,n=r.opacity,a=r.mask,s=r.filter,r=r.mixBlendMode;a?t.setAttribute("mask",a):t.removeAttribute("mask"),i!==Op&&(Rp(i,wp)&&(o?t.setAttribute("transform",o):t.removeAttribute("transform")),Rp(i,Sp)&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),(Rp(i,Ip)||Rp(i,Cp))&&((a=(s?"filter:".concat(s,";"):"")+(r?"mix-blend-mode:".concat(r,";"):""))?t.setAttribute("style",a):t.removeAttribute("style")))}function Pp(t,e,r,i){if(r.cache)Np(t,0,r,r.lv);else{r.hasOwnProperty("lv")?Np(t,0,r,r.lv):(Dp(t,e,r),i||Bp(t.firstChild,e.bb,r.bb));for(var o=e.children.length,n=r.children.length,a=0,s=t.lastChild,h=s.childNodes;a<Math.min(o,n);a++)Lp(h[a],e.children[a],r.children[a]);if(a<o)for(var l=o-1;a<=l;l--)Up(s,h,l);else if(a<n)for(;a<n;a++)Wp(s,h,a,Tp(r.children[a]))}}function Fp(t,e,r){Dp(t,e,r),Bp(t.firstChild,e.bb,r.bb);for(var i=e.children.length,o=r.children.length,n=0,a=t.lastChild,s=a.childNodes;n<Math.min(i,o);n++)Gp(s[n],r.children[n]);if(n<i)for(var h=i-1;n<=h;h--)Up(a,s,h);else if(n<o)for(;n<o;n++)Wp(a,s,n,Tp(r.children[n]))}function Bp(t,e,r){for(var i=e.length,o=r.length,n=0;n<Math.min(i,o);n++)Yp(t,n,e[n],r[n]);var a=t.childNodes;if(n<i)for(var s=i-1;n<=s;s--)Up(t,a,s);else if(n<o)for(;n<o;n++)Wp(t,a,n,Tp(r[n]))}function Yp(t,e,r,i,o){t=t.childNodes;r.tagName!==i.tagName?Gp(t[e],i):(Hp(t[e],r,i),o&&r.content!==i.content&&(t[e].innerHTML=i.content))}function Hp(e,t,r){if(!r.cache){for(var i={},o=0,n=(t.props||[]).length;o<n;o++){var a=Zt(t.props[o],2),c=a[0],a=a[1];i[c]=a}for(var s=0,u=(r.props||[]).length;s<u;s++){var h=Zt(r.props[s],2),l=h[0],h=h[1];i.hasOwnProperty(l)?(i[l]!==h&&e.setAttribute(l,h),delete i[l]):e.setAttribute(l,h)}Object.keys(i).forEach(function(t){e.removeAttribute(t)})}}function Gp(t,e){var r;Array.isArray(e)?(r="",e.forEach(function(t){r+=Tp(t)})):r=Tp(e),Xp(t,"beforebegin",r),t.parentNode.removeChild(t)}function Wp(t,e,r,i){r>=e.length?Xp(t,"beforeend",i):Xp(e[r],"beforebegin",i)}function Up(t,e,r){e[r]&&t.removeChild(e[r])}function Xp(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(bp=bp||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(bp.childNodes[0],t)}}var Vp=xt.isFunction,Kp=function(){function t(){f(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return g(t,[{key:"add",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){t=this.list.indexOf(t);-1<t&&this.list.splice(t,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(e,r){this.list.forEach(function(t){t[e].apply(t,r)})}},{key:"init",value:function(){var t,i=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.__records,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.list;e.length&&e.splice(0).forEach(function(t){var e,r=t.target,t=t.animate;r.isDestroyed||(Array.isArray(t)?t.forEach(function(t){var e=t.value,t=t.options,e=(t.autoPlay=!1,r.animate(e,t));i.add(e,o)}):(e=t.value,(t=t.options).autoPlay=!1,e=r.animate(e,t),i.add(e,o)))}),e===this.__records2&&(t=this.__onList,(e=this.list2).length&&t.length&&e.forEach(function(e){t.forEach(function(t){e.off(t[0],t[1]),e.on(t[0],t[1])})}))}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("play",[e&&function(t){r&&(r=!1,Vp(e)&&e(t))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(e){var r=!0;this.__action("resume",[e&&function(t){r&&(r=!1,Vp(e)&&e(t))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("cancel",[e&&function(t){r&&(r=!1,Vp(e)&&e(t))}])}},{key:"finish",value:function(e){this.__mergeAuto(),this.__onList=[];var r=!0;this.__action("finish",[e&&function(t){r&&(r=!1,Vp(e)&&e(t))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Vp(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Vp(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Vp(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Vp(r)&&r(t))}])}},{key:"on",value:function(t,e){if(Vp(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(r,i){var o=this;this.list.forEach(function(e){function t(){var t=e.timestamp;t!==o.__lastTime[r]&&(o.__lastTime[r]=t,i())}t.__karasEventCb=i,e.on(r,t)})}},{key:"off",value:function(e,r){if(Array.isArray(e))for(var t=0,i=e.length;t<i;t++)this.off(e[t],r);else this.list.forEach(function(t){t.off(e,r)})}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(e,r){this.list.forEach(function(t){t[e]=r})}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),zp=yt.canvasPolygon;var i=0,s=1,ki=2,Ur=3,re=4,e=function(c,t,u,_){return t.sort(function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]}),t.forEach(function(t){var e,r,i,o,n,a,s,h,t=Zt(t,4),l=t[2],t=t[3];0===l?(r=t.matrix,e=t.target,h=t.ctx,o=t.x,n=t.y,a=t.offsetWidth,s=t.offsetHeight,i=t.list,c.globalCompositeOperation="destination-in",c.globalAlpha=1,c.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),c.fillStyle="#FFF",c.beginPath(),i?zp(c,i):c.rect(o,n,a,s),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",e.draw(),(c=h).setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.drawImage(e.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),e.ctx.setTransform(1,0,0,1,0,0),e.ctx.clearRect(0,0,u,_),e.draw(),De.releaseCacheCanvas(e.canvas)):1===l?(r=t.target,i=t.ctx,o=t.filter,c.filter&&((n=De.getCacheCanvas(u,_,null,"filter")).ctx.filter=yt.canvasFilter(o),n.ctx.drawImage(r.canvas,0,0,u,_,0,0,u,_),n.ctx.filter="none",n.draw(),r.ctx.globalAlpha=1,r.ctx.setTransform(1,0,0,1,0,0),r.ctx.clearRect(0,0,u,_),r.ctx.drawImage(n.canvas,0,0,u,_,0,0,u,_),r.draw(),n.ctx.setTransform(1,0,0,1,0,0),n.ctx.clearRect(0,0,u,_),n.draw(),De.releaseCacheCanvas(n.canvas)),(c=i).setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.drawImage(r.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,u,_),r.draw(),De.releaseCacheCanvas(r.canvas)):2===l?(a=t.mask,t.isClip?(t.target.draw(),(c=a.ctx).globalCompositeOperation="source-out",c.globalAlpha=1,c.setTransform(1,0,0,1,0,0),c.drawImage(t.target.canvas,0,0,u,_,0,0,u,_),a.draw(),c.globalCompositeOperation="source-over",t.target.ctx.setTransform(1,0,0,1,0,0),t.target.ctx.clearRect(0,0,u,_),t.target.draw(),De.releaseCacheCanvas(t.target.canvas),(c=t.ctx).globalAlpha=1,c.setTransform(1,0,0,1,0,0),c.drawImage(a.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,u,_),a.draw(),De.releaseCacheCanvas(a.canvas)):(a.draw(),s=t.target,(c=s.ctx).globalCompositeOperation="destination-in",c.globalAlpha=1,c.setTransform(1,0,0,1,0,0),c.drawImage(a.canvas,0,0,u,_,0,0,u,_),c.globalCompositeOperation="source-over",s.draw(),a.ctx.setTransform(1,0,0,1,0,0),a.ctx.clearRect(0,0,u,_),a.draw(),De.releaseCacheCanvas(a.canvas),(c=t.ctx).globalAlpha=1,c.setTransform(1,0,0,1,0,0),c.drawImage(s.canvas,0,0,u,_,0,0,u,_),c.draw&&c.draw(!0),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,u,_),s.draw(),De.releaseCacheCanvas(s.canvas))):3===l?(h=t.target,(c=t.ctx).globalCompositeOperation=t.mixBlendMode,h.draw(),c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,c.drawImage(h.canvas,0,0,u,_,0,0,u,_),c.globalCompositeOperation="source-over",c.draw&&c.draw(!0),h.ctx.globalAlpha=1,h.ctx.setTransform(1,0,0,1,0,0),h.ctx.clearRect(0,0,u,_),h.draw(),De.releaseCacheCanvas(h.canvas)):4===l&&(c=t.ctx)}),c},jp=g(function t(e,r,i){f(this,t),this.uuid=Yo.genUuid(),this.time=De.now(),this.texture=e,this.width=r,this.height=i}),$p=function(){function s(t,e,r,i,o,n,a){f(this,s),this.gl=t,this.x=0,this.y=0,this.sx1=r,this.sy1=i,this.width=o,this.height=n,this.bbox=a,this.available=!0,this.__page=new jp(e,o,n),this.dx=-a[0],this.dy=-a[1],this.dbx=r-a[0],this.dby=i-a[1]}return g(s,[{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),s}(),Zp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}",qp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}",Jp="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Qp="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",tg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",eg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",rg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ig="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",og="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ng="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ag="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",sg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",hg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",lg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",cg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",ug="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",_g="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",fg="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}",dg=ga.NA,pg=ga.LOCAL,gg=ga.CHILD,mg=ga.SELF,vg=ga.getCache,yg=i,xg=s,Eg=ki,bg=Ur,Mg=re,Tg=e,a=A.STYLE_KEY,Ag=a.DISPLAY,Rg=a.OPACITY,Og=a.VISIBILITY,wg=a.FILTER,Sg=a.OVERFLOW,Ig=a.MIX_BLEND_MODE,Cg=a.FILL,kg=a.TRANSFORM,Lg=a.TRANSFORM_ORIGIN,Dg=a.PERSPECTIVE,Ng=a.PERSPECTIVE_ORIGIN,Pg=a.PADDING_LEFT,Fg=a.PADDING_RIGHT,Bg=a.PADDING_TOP,Yg=a.PADDING_BOTTOM,Hg=a.BORDER_TOP_WIDTH,Gg=a.BORDER_RIGHT_WIDTH,Wg=a.BORDER_BOTTOM_WIDTH,Ug=a.BORDER_LEFT_WIDTH,Xg=a.MATRIX,i=A.NODE_KEY,Vg=i.NODE_CACHE,Kg=i.NODE_CACHE_TOTAL,zg=i.NODE_CACHE_OVERFLOW,jg=i.NODE_CACHE_MASK,$g=i.NODE_CACHE_FILTER,Zg=i.NODE_MATRIX,qg=i.NODE_MATRIX_EVENT,Jg=i.NODE_OPACITY,Qg=i.NODE_COMPUTED_STYLE,tm=i.NODE_CURRENT_STYLE,em=i.NODE_LIMIT_CACHE,rm=i.NODE_REFRESH_LV,im=i.NODE_CACHE_STYLE,om=i.NODE_DEFS_CACHE,nm=i.NODE_IS_MASK,am=i.NODE_DOM_PARENT,sm=i.NODE_PERSPECTIVE_MATRIX,hm=i.NODE_VIRTUAL_DOM,lm=i.NODE_CACHE_AS_BITMAP,cm=i.NODE_STRUCT,s=A.STRUCT_KEY,um=s.STRUCT_NODE,_m=s.STRUCT_INDEX,fm=s.STRUCT_TOTAL,dm=s.STRUCT_HAS_MASK,pm=s.STRUCT_LV,gm=Ra.NONE,mm=Ra.TRANSFORM_ALL,vm=Ra.OPACITY,ym=Ra.FILTER,xm=Ra.REPAINT,Em=Ra.contain,bm=Ra.MIX_BLEND_MODE,Mm=Ra.PERSPECTIVE,Tm=qt.isE,Am=qt.inverse,Rm=qt.multiply,Om=t,wm=Kr,Sm=xt.assignMatrix,Im=xt.transformBbox;function Cm(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function km(G,l,t,c,u,_,H,f,W,U){var d=t[Kg],p=t[$g],g=t[jg],m=t[zg],v=t[tm],y=t[Qg];if(d&&d.available){var x=t[rm],e=t[im];Em(x,mm)&&(e=l.__calMatrix(x,e,v,y,t),Sm(t[Zg],e)),Em(x,vm)&&(t[Jg]=y[Rg]=v[Rg]),Em(x,ym)&&l.__calFilter(v,y),Em(x,bm)&&(y[Ig]=v[Ig])}else{for(var E,b,M,T=!0,A=l.__sx1,R=l.__sy1,O=[],w=[],S=1,I=u,C=c,k=c+(_||0)+1;C<k;C++){var r,L,D,N,P,F,B,Y,X,i,V=H[C],K=V[um],z=V[pm],j=V[fm],V=V[dm];K instanceof as||(i=(r=K.__config)[rm],L=r[Kg],D=r[$g],N=r[jg],P=r[zg],F=r[Qg],B=r[nm],"none"===F[Ag]||C!==c&&B?C+=(j||0)+Lm(H,C+(j||0)+1,V||0):(C===c||(I<z?(rt=M[qg],Tm(rt)&&(rt=null),O.push(rt),S=M[Jg],w.push(S)):z<I&&(O.splice(-(B=I-z)),rt=O[z-1],w.splice(-B),S=w[z-1])),I=z,B=(M=r)[tm],z=r[im],X=Y=void 0,i<xm?(Em(i,mm)?(Y=K.__calMatrix(i,z,B,F,r),Sm(r[Zg],Y)):Y=r[Zg],Em(i,vm)&&(F[Rg]=B[Rg]),X=F[Rg],Em(i,ym)&&(K.__bbox=null,K.__calFilter(B,F)),Y=r[Zg],Em(i,bm)&&(F[Ig]=B[Ig])):(K.__bbox=null,C===c&&K.__calFilter(B,F),Y=K.__calMatrix(i,z,B,F,r),Sm(r[Zg],Y),X=F[Rg]=B[Rg]),C===c?(X=1,b=Y,Y=qt.identity()):Tm(rt)||(Y=Rm(rt,Y)),Sm(r[qg],Y),i=void(r[Jg]=S*X),i=(z=vg([N,D,P,L]))?(C+=(j||0)+Lm(H,C+(j||0)+1,V||0),z.bbox):K.bbox,i=Im(i,Y,0,0),C===c?E=i.slice(0):Cm(E,i,0,0)))}if(t[Kg]=d=ga.getInstance(E,A,R),!d||!d.enabled)return;d.__available=!0;for(var $,e=d,Z=e.dx,q=e.dy,J=e.dbx,Q=e.dby,tt=e.x,et=e.y,o=d.ctx,rt=null,I=u,it={},ot={},n=c,nt=c+(_||0)+1;n<nt;n++){var at=H[n],a=at[um],st=at[pm],ht=at[fm],at=at[dm];if(a instanceof as)a.render(G,xm,o,gg,Z,q),ot.hasOwnProperty(n)&&(o=Tg(o,ot[n],W,U));else{var lt=a.__config,ct=lt[rm],ut=lt[Kg],_t=lt[$g],ft=lt[jg],dt=lt[zg],s=lt[Qg];if(it.hasOwnProperty(n)){for(var pt=Zt(it[n],3),gt=pt[0],mt=pt[1],pt=pt[2],h=De.getCacheCanvas(W,U,null,"mask2"),vt=(pt.mask=h,pt.isClip=a.isClip,n+(ht||0)+1);--mt;)vt+=(H[vt][fm]||0)+1;var yt=ot[--vt]=ot[vt]||[];yt.push([gt,st,Eg,pt]),yt.push([vt,st,Mg,{ctx:o,target:h}]),o=h.ctx}n===c||(I<st?(Tm(rt=$)&&(rt=null),O.push(rt)):st<I&&(O.splice(-(I-st)),rt=O[st-1]));var gt=s[kg],pt=s[Lg],yt=s[Ag],h=void 0,ft=(n===c||Tm(rt)&&Tm(gt)?h=null:((pt=pt.slice(0))[0]+=J+a.__sx1-A+tt,pt[1]+=Q+a.__sy1-R+et,h=la.calMatrixByOrigin(gt,pt),Tm(rt)||(h=Rm(rt,h))),h?o.setTransform(h[0],h[1],h[4],h[5],h[12],h[13]):o.setTransform(1,0,0,1,0,0),I=st,$=h,vg([ft,_t,dt,ut]));n!==c&&ft?(n+=(ht||0)+Lm(H,n+(ht||0)+1,at||0),"none"!==yt&&(_t=s[Ig],wm(_t)?o.globalCompositeOperation=Om(_t):o.globalCompositeOperation="source-over",o.globalAlpha=lt[Jg],ga.drawCache(ft,d),o.globalCompositeOperation="source-over")):(xm<=ct&&a.__calCache(G,o,lt[am],lt[im],lt[tm],s,a.clientWidth,a.clientHeight,a.offsetWidth,a.offsetHeight,s[Hg],s[Gg],s[Wg],s[Ug],s[Bg],s[Fg],s[Yg],s[Pg],a.__sx1,a.__sx2,a.__sx3,a.__sx4,a.__sx5,a.__sx6,a.__sy1,a.__sy2,a.__sy3,a.__sy4,a.__sy5,a.__sy6),dt=a.render(G,ct,o,n===c?pg:gg,Z,q),lt[rm]=xm,_t=(ut=dt||{}).offscreenBlend,ft=ut.offscreenMask,s=ut.offscreenFilter,a=ut.offscreenOverflow,_t&&((ot[ct=n+(ht||0)+Lm(H,n+(ht||0)+1,at||0)]=ot[ct]||[]).push([n,st,bg,_t]),o=_t.target.ctx),ft&&(it[n+(ht||0)+1]=[n,at,ft],o=ft.target.ctx),s&&((ot[lt=n+(ht||0)+Lm(H,n+(ht||0)+1,at||0)]=ot[lt]||[]).push([n,st,xg,s]),o=s.target.ctx),a&&((ot[dt=n+(ht||0)+Lm(H,n+(ht||0)+1,at||0)]=ot[dt]||[]).push([n,st,yg,a]),o=a.target.ctx),ot.hasOwnProperty(n)&&(o=Tg(o,ot[n],W,U)),"none"===yt&&(n+=(ht||0)+Lm(H,n+(ht||0)+1,at||0)))}}Sm(t[qg],b),t[rm]=gm}d&&d.available&&(x=y[Sg],v=y[wg],e=d,"hidden"===x&&(m&&m.available&&!T||(t[zg]=function(t,e){var r=t.bbox,i=e.bbox;if(!(i[0]>=r[0]&&i[1]>=r[1]&&i[2]<=r[2]&&i[3]<=r[3]))return ga.genOverflow(e,t)}(l,e),T=!0),e=t[zg]||e),v&&v.length&&(p&&p.available&&!T||(t[$g]=(u=e,ga.genFilter(u,v)),T=!0),e=t[$g]||e),!f||g&&g.available&&!T||(t[jg]=(_=e,y=function(c,u,_){for(var f,d,p,g={},t={},m=u.dx,v=u.dy,y=u.dbx,x=u.dby,E=u.x,b=u.y,e=u.ctx,c=c.__config[cm],M=c[_m],T=c[fm],A=[],R=[],O=1,w=c[pm],r=M,S=M+(T||0)+1;r<S;r++){var I=H[r],i=I[um],C=I[pm],o=I[fm],I=I[dm];if(i instanceof as)i.render(G,xm,e,gg,m,v),t.hasOwnProperty(r)&&(e=Tg(e,t[r],W,U));else{var n=i.__config,k=n[rm],a=n[Kg],s=n[$g],L=n[jg],h=n[zg],l=n[Qg];if(g.hasOwnProperty(r)){for(var D=Zt(g[r],3),N=D[0],P=D[1],D=D[2],F=De.getCacheCanvas(W,U,null,"mask2"),B=(D.mask=F,D.isClip=i.isClip,r+(o||0)+1);--P;)B+=(H[B][fm]||0)+1;var Y=t[--B]=t[B]||[];Y.push([N,C,Eg,D]),Y.push([B,C,Mg,{ctx:e,target:F}]),e=F.ctx}r===M||(w<C?(Tm(f=d)&&(f=null),A.push(f),O=p,R.push(O)):C<w&&(A.splice(-(N=w-C)),f=A[C-1],R.splice(-N),O=R[C-1]));var w=C,D=l[Ag],Y=l[kg],F=l[Lg],L=vg([L,s,h,a]);L?(r+=(o||0)+Lm(H,r+(o||0)+1,I||0),"none"!==D&&(s=l[Ig],wm(s)?e.globalCompositeOperation=Om(s):e.globalCompositeOperation="source-over",e.globalAlpha=n[Jg],ga.drawCache(L,u,Y,qt.identity(),F.slice(0),f,_),e.globalCompositeOperation="source-over")):(h=n[tm],a=n[im],L=s=void 0,k<xm?(Em(k,mm)?(s=i.__calMatrix(k,a,h,l,n),Sm(n[Zg],s)):s=n[Zg],Em(k,vm)&&(l[Rg]=h[Rg]),L=l[Rg],Em(k,ym)&&(i.__bbox=null,i.__calFilter(h,l)),s=n[Zg],Em(k,bm)&&(l[Ig]=h[Ig])):(i.__bbox=null,r===M&&i.__calFilter(h,l),s=i.__calMatrix(k,a,h,l,n),Sm(n[Zg],s),L=l[Rg]=h[Rg]),r===M?(L=1,s=qt.identity()):f&&(s=Rm(f,s)),Sm(n[qg],s),a=void(p=n[Jg]=O*L),r===M||Tm(f)&&Tm(Y)?a=null:((F=F.slice(0))[0]+=y+i.__sx1-sx1+E,F[1]+=x+i.__sy1-sy1+b,a=la.calMatrixByOrigin(Y,F),Tm(f)||(a=Rm(f,a))),(a=(d=a)&&(xt.equalArr(a,_)?qt.identity():(_=qt.inverse(_),qt.multiply(_,a))))?e.setTransform(a[0],a[1],a[4],a[5],a[12],a[13]):e.setTransform(1,0,0,1,0,0),xm<=k&&i.__calCache(G,e,n[am],n[im],n[tm],l,i.clientWidth,i.clientHeight,i.offsetWidth,i.offsetHeight,l[Hg],l[Gg],l[Wg],l[Ug],l[Bg],l[Fg],l[Yg],l[Pg],i.__sx1,i.__sx2,i.__sx3,i.__sx4,i.__sx5,i.__sx6,i.__sy1,i.__sy2,i.__sy3,i.__sy4,i.__sy5,i.__sy6),h=i.render(G,k,e,gg,m,v),n[rm]=xm,L=(s=h||{}).offscreenBlend,a=s.offscreenMask,l=s.offscreenFilter,i=s.offscreenOverflow,L&&((t[k=r+(o||0)+Lm(H,r+(o||0)+1,I||0)]=t[k]||[]).push([r,C,bg,L]),e=L.target.ctx),a&&(g[r+(o||0)+1]=[r,I,a],e=a.target.ctx),l&&((t[n=r+(o||0)+Lm(H,r+(o||0)+1,I||0)]=t[n]||[]).push([r,C,xg,l]),e=l.target.ctx),i&&((t[h=r+(o||0)+Lm(H,r+(o||0)+1,I||0)]=t[h]||[]).push([r,C,yg,i]),e=i.target.ctx),t.hasOwnProperty(r)&&(e=Tg(e,t[r],W,U)),"none"===D&&(r+=(o||0)+Lm(H,r+(o||0)+1,I||0)))}}},ga.genMask(_,l,y))))}function Lm(t,e,r){for(var i=0;r--;){var o=t[e][fm];i+=o||0,e+=o||0,i++,e++}return i}function Dm(t,e,r,i){var e=e.lockOneChannel(),o=be.createTexture(t,null,e,r,i),n=t.createFramebuffer(),a=(t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.checkFramebufferStatus(t.FRAMEBUFFER));return a!==t.FRAMEBUFFER_COMPLETE&&De.error("Framebuffer object is incomplete: "+a.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[e,n,o]}function Nm(t,e,c,u,_,f,d,p,g,m,v,y){for(var x,E,b={},M={},r=function(c,u,_,f,d,p){var g,m=c.__sx1,v=c.__sy1,y=(t=c.__config)[Vg],x=(t=t[Qg])[wg],E=t[Dg],t=t[Ng],b=(y&&y.available?y:c).bbox.slice(0);E&&(g=la.calPerspectiveMatrix(E,t));for(var M=[_],T=0,A=(x.forEach(function(t){var t=Zt(t,2),e=t[0],t=t[1];"blur"===e&&(T=_a.outerSize(t))}),d[_]=1,{});M.length;)for(var R=M.splice(0),O=0,w=R.length;O<w;O++)for(var e=R[O],r=e+1,S=e+(u[e][fm]||0)+1;r<S;r++){var i=u[r],o=i[um],i=i[fm];if(!o.isMask){var I=o.__sx1,C=o.__sy1,n=o.__config,a=n[em],s=n[Vg],k=n[Kg],h=n[$g],l=n[jg],L=n[zg],n=n[Qg],D=n[Ag],N=n[Og],P=n[kg],F=n[Lg],n=n[Rg];if(a&&!p)return;"none"!==D?"hidden"!==N&&(f[r]=e,d[r]=d[e]*n,o instanceof as||(a=void 0,n=void(N=D=0),(l=vg([l,h,L,k]))?(a=l.bbox.slice(0),D=l.dbx,N=l.dby,r+=i||0,n=!0):s&&s.available?(a=s.bbox.slice(0),D=s.dbx,N=s.dby):a=o.bbox.slice(0),a&&(a[0]-=m,a[1]-=v,a[2]-=m,a[3]-=v,h=A[e],P&&!Tm(P)&&((L=F.slice(0))[0]+=I-m+D,L[1]+=C-v+N,k=la.calMatrixByOrigin(P,L),h=h?Rm(h,k):k),h&&(A[r]=h),g&&(h=Rm(g,h)),a=Im(a,h,T,T),i&&!n&&M.push(r),Cm(b,a,m,v)))):r+=i||0}}return[b,g]}(c,d,_,b,M,(t.getParameter(t.MAX_TEXTURE_SIZE),g)),r=Zt(r,2),i=r[0],T=r[1],A=(i||(x=!0),(i=g||x?[0,0,v,y]:i)[2]-i[0]),R=i[3]-i[1],r=Zt(Dm(t,e,A,R),3),O=r[0],w=r[1],S=r[2],I=c.__sx1,C=c.__sy1,o=.5*A,n=.5*R,k=-i[0],L=-i[1],D=I-i[0],N=C-i[1],P=(p&&p.available?e.addTexAndDrawWhenLimit(t,p,1,null,o,n,k,L,!1):g&&(r=De.getCacheCanvas(A,R,"__$$OVERSIZE$$__"),c.render(et.WEBGL,0,t,dg,0,0),p=e.lockOneChannel(),E=be.createTexture(t,r.canvas,p),E=new $p(t,E,0,0,A,R,[0,0,A,R]),e.addTexAndDrawWhenLimit(t,E,1,null,o,n,0,0,!1),e.refresh(t,o,n),r.ctx.setTransform(1,0,0,1,0,0),r.ctx.globalAlpha=1,r.ctx.clearRect(0,0,A,R),E.release(),e.releaseLockChannel(p)),{}),a=_+1,F=_+(f||0)+1;a<F;a++){var B,Y,H,G,W,U,X,s,V,K,z=d[a],j=z[um],$=z[fm],z=z[dm],h=j.__config,l=P[b[a]],Z=M[a];j instanceof as?(T&&(l=Rm(T,l)),e.addTexAndDrawWhenLimit(t,h[Vg],Z,l,o,n,k,L,!1)):(B=h[Vg],Y=h[Kg],H=h[$g],K=h[jg],G=h[zg],V=h[nm],s=(h=h[Qg])[Ag],U=h[Og],X=h[kg],W=h[Lg],h=h[Ig],"none"!==s?("hidden"!==U&&!V||j.hookGlRender)&&(X&&!Tm(X)&&(s=W.slice(0),B&&B.available?(s[0]+=B.sx1,s[1]+=B.sy1):(s[0]+=j.__sx1,s[1]+=j.__sy1),U=N-C,s[0]+=D-I,s[1]+=U,V=la.calMatrixByOrigin(X,s),l=l?Rm(l,V):V),l&&(P[a]=l),T&&(l=Rm(T,l)),(W=vg([K,H,G,Y,B]))&&(wm(h)?(e.refresh(t,o,n),X=(U=Zt(Dm(t,e,A,R),3))[0],s=U[1],V=U[2],e.addTexAndDrawWhenLimit(t,W,Z,l,o,n,k,L,!1),e.refresh(t,o,n),O=(K=Zt(Bm(t,e,O,X,w,S,Om(h),A,R),3))[0],w=K[1],S=K[2],t.deleteFramebuffer(s),t.deleteTexture(V)):e.addTexAndDrawWhenLimit(t,W,Z,l,o,n,k,L,!1),W!==B&&(a+=($||0)+Lm(d,a+($||0)+1,z||0))),j.hookGlRender&&j.hookGlRender(t,Z,l,o,n,k,L,!1)):a+=($||0)+Lm(d,a+($||0)+1,z||0))}c.hookGlRender&&c.hookGlRender(t,1,null,o,n,k,L,!1),e.refresh(t,o,n),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,v,y),t.deleteFramebuffer(w);r=new $p(t,S,I,C,A,R,i);return e.releaseLockChannel(O,r.page),[g||x,r]}function Pm(o,n,r,t,e,i,_){var a=t.sx1,s=t.sy1,h=t.width,l=t.height,c=t.bbox,u=t;return e.forEach(function(t){var e,r,t=Zt(t,2),i=t[0],t=t[1];"blur"===i&&0<t?(r=function(t,e,c,u,r,i,_,f,o){var n=_a.kernelSize(u),d=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));for(;d<n;)n-=2;var a=_a.outerSizeByD(n),p=(r+=2*a,i+=2*a,t.getParameter(t.MAX_TEXTURE_SIZE));if(!(p<r||p<i)){(o=o.slice(0))[0]-=a,o[1]-=a,o[2]+=a,o[3]+=a;for(var p=.5*r,g=.5*i,m=_a.gaussianWeight(u,n),s="",h="",l=Math.floor(.5*n),v=0;v<l;v++){var y=.01*(l-v);s+="v_texCoordsBlur[".concat(v,"] = a_texCoords + vec2(-").concat(y,", -").concat(y,") * u_direction;"),h+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(v,"]) * ").concat(m[v],";")}s+="v_texCoordsBlur[".concat(l,"] = a_texCoords;"),h+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(l,"]) * ").concat(m[l],";");for(var x=0;x<l;x++){var E=.01*(x+1);s+="v_texCoordsBlur[".concat(x+l+1,"] = a_texCoords + vec2(").concat(E,", ").concat(E,") * u_direction;"),h+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(x+l+1,"]) * ").concat(m[x+l+1],";")}s=Zp.replace("[3]","["+n+"]").replace(/}$/,s+"}"),h=qp.replace("[3]","["+n+"]").replace(/}$/,h+"}");var b=be.initShaders(t,s,h);t.useProgram(b);var M=Zt(Dm(t,e,r,i),3),T=M[0],A=M[1],M=M[2],R=e.findExistTexChannel(c.page),c=(-1===R?(R=e.lockOneChannel(),be.bindTexture(t,c.page.texture,R)):e.lockChannel(R),M=be.drawBlur(t,b,A,e,M,c.page.texture,T,R,r,i,p,g,a,n,u),t.deleteShader(b.vertexShader),t.deleteShader(b.fragmentShader),t.deleteProgram(b),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(A),e.releaseLockChannel(R),new $p(t,M,_,f,r,i,o));return e.releaseLockChannel(T,c.page),[c,r,i,o]}}(o,n,u,t,h,l,a,s,c))&&(r=Zt(r,4),u=r[0],h=r[1],l=r[2],c=r[3]):"hue-rotate"===i?(r=nt.d2r(t%360),e=Math.cos(r),r=Math.sin(r),(e=Fm(o,n,u,[.213+.787*e-.213*r,.715-.715*e-.715*r,.072-.072*e+.928*r,0,0,.213-.213*e+.143*r,.715+.285*e+.14*r,.072-.072*e-.283*r,0,0,.213-.213*e-.787*r,.715-.715*e+.715*r,.072+.928*e+.072*r,0,0,0,0,0,1,0],h,l,a,s,c))&&(r=Zt(e,4),u=r[0],h=r[1],l=r[2],c=r[3])):"saturate"===i&&100!==t?(r=Fm(o,n,u,[.213+.787*(e=.01*t),.715-.715*e,.072-.072*e,0,0,.213-.213*e,.715+.285*e,.072-.072*e,0,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,0,1,0],h,l,a,s,c))&&(e=Zt(r,4),u=e[0],h=e[1],l=e[2],c=e[3]):"brightness"===i&&100!==t?(e=Fm(o,n,u,[r=.01*t,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],h,l,a,s,c))&&(r=Zt(e,4),u=r[0],h=r[1],l=r[2],c=r[3]):"grayscale"===i&&0<t?((e=1-.01*(t=Math.min(t,100)))<0?e=0:1<e&&(e=1),(r=Fm(o,n,u,[.2126+.7874*e,.7152-.7152*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152+.2848*e,.0722-.0722*e,0,0,.2126-.2126*e,.7152-.7152*e,.0722+.9278*e,0,0,0,0,0,1,0],h,l,a,s,c))&&(e=Zt(r,4),u=e[0],h=e[1],l=e[2],c=e[3])):"contrast"===i&&100!==t?(r=Fm(o,n,u,[r=.01*t,0,0,0,e=-.5*r+.5,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],h,l,a,s,c))&&(e=Zt(r,4),u=e[0],h=e[1],l=e[2],c=e[3]):"sepia"===i&&0<t?((r=1-.01*(t=Math.min(t,100)))<0?r=0:1<r&&(r=1),(e=Fm(o,n,u,[.393+.607*r,.769-.769*r,.189-.189*r,0,0,.349-.349*r,.686+.314*r,.168-.168*r,0,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,0,1,0],h,l,a,s,c))&&(r=Zt(e,4),u=r[0],h=r[1],l=r[2],c=r[3])):"invert"===i&&0<t&&(e=.01*(t=Math.min(t,100)),(i=Fm(o,n,u,[r=1-2*e,0,0,0,e,0,r,0,0,e,0,0,r,0,e,0,0,0,1,0],h,l,a,s,c))&&(t=Zt(i,4),u=t[0],h=t[1],l=t[2],c=t[3]))}),o.useProgram(o.program),o.viewport(0,0,i,_),u}function Fm(t,e,r,i,o,n,a,c,s){var h=Zt(Dm(t,e,o,n),3),u=h[0],_=h[1],h=h[2],l=e.findExistTexChannel(r.page),r=(-1===l?(l=e.lockOneChannel(),be.bindTexture(t,r.page.texture,l)):e.lockChannel(l),t.useProgram(t.programCm),be.drawCm(t,t.programCm,l,i),e.releaseLockChannel(l),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(_),new $p(t,h,a,c,o,n,s.slice(0)));return e.releaseLockChannel(u,r.page),[r,o,n,s]}function Bm(t,e,r,i,o,n,a,s,h){"multiply"===(a=Om(a))?l=Qp:"screen"===a?l=tg:"overlay"===a?l=eg:"darken"===a?l=rg:"lighten"===a?l=ig:"color-dodge"===a?l=og:"color-burn"===a?l=ng:"hard-light"===a?l=ag:"soft-light"===a?l=sg:"difference"===a?l=hg:"exclusion"===a?l=lg:"hue"===a?l=cg:"saturation"===a?l=ug:"color"===a?l=_g:"luminosity"===a&&(l=fg);a=be.initShaders(t,Jp,l);t.useProgram(a);var l=Zt(Dm(t,e,s,h),3),c=l[0],u=l[1],l=l[2];return be.drawMbm(t,a,r,i,s,h),t.useProgram(t.program),t.deleteShader(a.vertexShader),t.deleteShader(a.fragmentShader),t.deleteProgram(a),t.deleteFramebuffer(o),t.deleteTexture(n),e.releaseLockChannel(r),e.releaseLockChannel(i),[c,u,l]}var Ym={renderCanvas:function(c,t,u){for(var a=u.__structs,_=u.width,f=u.height,d=[],p=0,g=a.length;p<g;p++){var m,v,y,e,x=a[p],r=x[um],E=x[pm],b=x[fm],x=x[dm];r instanceof as||(v=(m=r.__config)[rm],y=m[lm],e=m[Qg],xm<=v&&r.__calCache(c,t,m[am],m[im],m[tm],e,r.clientWidth,r.clientHeight,r.offsetWidth,r.offsetHeight,e[Hg],e[Gg],e[Wg],e[Ug],e[Bg],e[Fg],e[Yg],e[Pg],r.__sx1,r.__sx2,r.__sx3,r.__sx4,r.__sx5,r.__sx6,r.__sy1,r.__sy2,r.__sy3,r.__sy4,r.__sy5,r.__sy6),y&&("none"!==e[Ag]?d.push([p,E,b,r,m,x]):p+=(b||0)+Lm(a,p+(b||0)+1,x||0)))}d.length&&(d.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),d.forEach(function(t){var t=Zt(t,6),e=t[0],r=t[1],i=t[2],o=t[3],n=t[4],t=t[5];km(c,o,n,e,r,i||0,a,t,_,f)}));for(var M={},i={},o=0,T=a.length;o<T;o++){var n=a[o],A=n[um],R=n[pm],s=n[fm],n=n[dm];if(A instanceof as)A.render(c,xm,t,dg,0,0),i.hasOwnProperty(o)&&(t=Tg(t,i[o],_,f));else{var h=A.__config,O=h[Kg],l=h[$g],w=h[jg],S=h[zg],I=h[rm],C=h[Qg],k=C[Ag],L=C[Ig],C=C[Rg];if(M.hasOwnProperty(o)){for(var D=Zt(M[o],3),N=D[0],P=D[1],D=D[2],F=De.getCacheCanvas(_,f,null,"mask2"),B=(D.mask=F,D.isClip=A.isClip,o+(s||0)+1);--P;)B+=(a[B][fm]||0)+1;var Y=i[--B]=i[B]||[];Y.push([N,R,Eg,D]),Y.push([B,R,Mg,{ctx:t,target:F}]),t=F.ctx}N=vg([w,l,S,O]);N?(o+=(s||0)+Lm(a,(D=o)+(s||0)+1,n||0),"none"!==k&&(wm(L)?t.globalCompositeOperation=Om(L):t.globalCompositeOperation="source-over",Y=h[Zg],w=(F=h[qg]).slice(0),(l=h[am].matrixEvent)&&!Tm(l)&&(Y=Rm(l,Y)),xt.assignMatrix(F,Y),ga.draw(t,C,F,N),t.globalCompositeOperation="source-over",i.hasOwnProperty(o)&&(t=Tg(t,i[o],_,f)),(S=!(S=O.isNew)&&!xt.equalArr(w,F)||S)&&function c(t,u,_,f,d){for(var e,p=[],g=d,m=f,r=u+1,v=u+(_||0)+1;r<v;r++){var i,y,o,x,E,n,a=(l=t[r])[um],s=l[pm],h=l[fm],l=l[dm];a instanceof as||(y=(i=a.__config)[qg],o=i[Kg],x=i[tm],E=i[Qg],n=i[im],"none"!==E[Ag]?(m<s?(Tm(e=g)&&(e=null),p.push(e)):s<m&&(p.splice(-(m-s)),e=p[s-1]),m=s,y=y.slice(0),n[Xg]=null,a=a.__calMatrix(xm,n,x,E,i),Sm(i[Zg],a),Tm(e)||(a=Rm(e,a)),Sm(i[qg],a),g=a,o&&o.available&&((n=!(n=o.isNew)&&!xt.equalArr(y,a)||n)&&c(t,r,h||0,s,a),o.__isNew=!1,r+=(h||0)+Lm(t,r+(h||0)+1,l||0))):r+=(h||0)+Lm(t,r+(h||0)+1,l||0))}}(a,D,s||0,R,F),O.__isNew=!1)):(h=(L=A.render(c,I,t,dg,0,0)||{}).offscreenBlend,l=L.offscreenMask,C=L.offscreenFilter,w=L.offscreenOverflow,h&&((i[S=o+(s||0)+Lm(a,o+(s||0)+1,n||0)]=i[S]||[]).push([o,R,bg,h]),t=h.target.ctx),l&&(M[o+(s||0)+1]=[o,n,l],t=l.target.ctx),C&&((i[O=o+(s||0)+Lm(a,o+(s||0)+1,n||0)]=i[O]||[]).push([o,R,xg,C]),t=C.target.ctx),w&&((i[A=o+(s||0)+Lm(a,o+(s||0)+1,n||0)]=i[A]||[]).push([o,R,yg,w]),t=w.target.ctx),i.hasOwnProperty(o)&&(t=Tg(t,i[o],_,f)),"none"===k&&(o+=(s||0)+Lm(a,o+(s||0)+1,n||0)))}}},renderSvg:function(c,u,_,f){var d=_.__structs,p=_.width,g=_.height,m={};if(!f)for(var v=0,y=d.length;v<y;v++){var x=d[v],E=x[um],b=x[fm],x=x[dm],E=E.__config,M=E[rm],E=E[om];x&&(xm<=M||Em(M,mm|vm))&&(m[v+(b||0)+1+x-1]=M),M<xm&&(m.hasOwnProperty(v)?(b=m[v],!Em(M,mm)&&b<xm&&!Em(b,mm)&&E.forEach(function(t){u.addCache(t)})):E.forEach(function(t){u.addCache(t)}))}for(var T,A,R,O={},w=[],S=[],I=0,t=0,C=d.length;t<C;t++){var k,L,D,e=d[t],r=e[um],N=e[fm],P=e[dm],e=e[pm],i=r.__config,o=i[Kg],n=i[rm],F=i[om],B=i[Qg],Y=B[Ag],a=(P&&"none"!==Y&&(O[(k=(L=t+(N||0)+1)+P)-1]={index:t,start:L,end:k,isClip:d[L][um].isClip}),e<I?(w.splice(-(k=I-e)),T=w[e-1],S.splice(-k),A=S[e-1]):I<e&&(w.push(R[Zg]),L=R[hm],S.push(L),A=L),R=i,void 0);if(n<xm&&!(r instanceof as)?(i[rm]=gm,a=i[hm],o&&o.available?(t+=N||0,a.cache=!0):(o&&(o.available=!0),a=i[hm]=r.__virtualDom=xt.extend({},a),r instanceof g1&&!(r instanceof sd)&&(a.children=[]),"none"===Y?(t+=N||0,P&&(t+=P)):delete a.cache),o=i[tm],s=i[Qg],h=i[im],Em(n,mm)&&(h=r.__calMatrix(n,h,o,s,i),D=i[Zg],Sm(D,h),!h||Tm(h)?delete a.transform:a.transform="matrix("+xt.joinArr(qt.m2m6(h),",")+")",T&&h&&(h=Rm(T,h)),D=i[qg],Sm(D,h)),Em(n,vm)&&(1===(D=s[Rg]=o[Rg])?delete a.opacity:a.opacity=D),Em(n,ym)&&(h=r.__calFilter(o,s),(h=yt.svgFilter(h))?a.filter=h:delete a.filter),Em(n,bm)&&(h=s[Ig]=o[Ig],wm(h)?a.mixBlendMode=Om(h):delete a.mixBlendMode),a.lv=n):(i[om]&&i[om].splice(0),r.render(c,n,u,dg,0,0),a=i[hm],"none"===(Y=B[Ag])&&(t+=N||0,P&&(t+=P))),O.hasOwnProperty(t)&&(m.hasOwnProperty(t)||xm<=n||Em(n,mm|vm))){var s=O[t],o=s.index,h=s.start,H=s.end,G=s.isClip,W=d[o][um],U=[];G&&U.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(p,",0L").concat(p,",").concat(g,"L0,").concat(g,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var X=h;X<H;X++){var V=d[X][um],K=V.computedStyle,z=K[Ag],j=K[Og],$=K[Cg],K=V.virtualDom,Z=K.children,q=K.opacity;if("none"!==z&&"hidden"!==j)for(var Z=xt.clone(Z),U=U.concat(Z),J=0,Q=Z.length;J<Q;J++){var tt=Z[J],et=tt.tagName,l=tt.props;if("path"===et){if(G)for(var rt=0,it=l.length;rt<it;rt++){var ot=l[rt];"fill"===ot[0]&&(ot[1]=xt.int2invert($[0]))}var tt=V.matrix,nt=Am(W.matrix),tt=Rm(nt,tt);l.push(["transform","matrix(".concat(xt.joinArr(qt.m2m6(tt),","),")")]),xt.isNil(q)||1===q||l.push(["opacity",q])}else if("image"===et){for(var at=-1,st=0,ht=l.length;st<ht;st++)if("transform"===l[st][0]){at=st;break}-1===at?(nt=Am(W.matrix),Tm(nt)||l.push(["transform","matrix(".concat(xt.joinArr(qt.m2m6(nt),","),")")])):(tt=l[at][1].match(/[\d.]+/g).map(function(t){return parseFloat(t)}),et=Am(W.matrix),tt=Rm(et,tt),l[at][1]="matrix(".concat(xt.joinArr(qt.m2m6(tt),","),")"))}}}for(var lt=F.length-1;0<=lt;lt--)"mask"===F[lt].tagName&&F.splice(lt,1);B={tagName:"mask",props:[],children:U},Y=u.add(B);F.push(B),W.virtualDom.mask="url(#"+Y+")"}A&&!r.isMask&&A.children.push(a),0===t&&(T=i[Zg],A=a),I=e}},renderWebgl:function(a,v,s){for(var h,l,c,u,_,b=s.__structs,y=s.width,x=s.height,E=s.texCache,t=.5*y,e=.5*x,f=[],d=[],p=1,g=[],m=0,M=[],T=0,A=b.length;T<A;T++){var R=b[T],r=R[um],O=R[pm],w=R[fm],R=R[dm];if(r instanceof as)xm<=c&&r.render(a,xm,v,mg,0,0);else{var i=r.__config,S=i[rm],I=(0===T||(m<O?(h=u[qg],Tm(h)&&(h=null),f.push(h),p=u[Jg],d.push(p),l=u[sm],Tm(l)&&(l=null),g.push(l)):O<m&&(f.splice(-(I=m-O)),h=f[O-1],d.splice(-I),p=d[O-1],g.splice(-I),l=g[O-1])),c=S,m=O,(u=i)[Kg]),o=i[Qg];if("none"!==o[Ag]){var C=void 0;if(S<xm){i[rm]=gm,R&&((k=i[jg])&&k.available||M.push(C=[T,O,w,r,i,null,R]));var k=i[tm],L=i[im],D=i[qg],N=(Em(S,Mm)&&r.__calPerspective(L,k,o,i),void 0),L=(Em(S,mm)?(N=r.__calMatrix(S,L,k,o,i),Sm(i[Zg],N)):N=i[Zg],(la.isPerspectiveMatrix(N)||l)&&(C?C[9]=!0:C=[T,O,w,r,i,null,null,null,null,!0]),l&&(N=Rm(l,N)),h&&(N=Rm(h,N)),Sm(D,N),void 0),L=Em(S,vm)?o[Rg]=k[Rg]:o[Rg];if(i[Jg]=p*L,Em(S,ym)&&(r.__bbox=null,D=r.__calFilter(k,o),C?C[7]=D:M.push(C=[T,O,w,r,i,null,R,D])),Em(S,bm)&&(o[Ig]=k[Ig]),I&&I.available){T+=w||0;continue}}else{N=r.render(a,S,v,mg,0,0);N&&De.isWebGLTexture(N.texture)&&(L=r.__sx1,D=r.__sy1,S=r.offsetWidth,P=r.offsetHeight,F=r.bbox,i[Vg]=new $p(v,N.texture,L,D,S,P,F),v.viewport(0,0,y,x),v.useProgram(v.program))}var S=i[em],P=i[lm],F=o[Sg],B=o[wg],Y=o[Ig],o=o[kg],Y=wm(Y),o=la.isPerspectiveMatrix(o)||l;(P||R||B.length||"hidden"===F&&w||Y||o)&&(Y&&(_=!0),C?(C[5]=S,C[7]=B,C[8]=F,C[9]=o,C[10]=P):M.push([T,O,w,r,i,S,R,B,F,o,P]))}else T+=w||0}}var H,G,W,U,X={};M.length&&(M.sort(function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}),H={},M.forEach(function(t){var t=Zt(t,11),e=t[0],c=t[1],r=t[2],i=t[3],o=t[4],n=t[5],u=t[6],a=t[7],_=t[8],s=t[9],t=t[10];if(s){for(var f=o[am];f;){var h=f.__config,d=h[cm][_m];if(H[d])break;(la.isPerspectiveMatrix(h[Zg])||h[sm])&&(H[d]=!0),f=h[am]}if(!(H[e]||u||a.length||"hidden"===_||t))return}var l,s=o[Vg],t=o[Kg],p=o[$g],g=o[jg],m=o[zg],s=(t&&t.available||(s=(r=Zt(Nm(v,E,i,0,e,r||0,b,s,n,0,y,x),2))[0],t=r=r[1],l=!0,(n=s)||(o[Kg]=r)),t);"hidden"===_&&(m&&m.available&&!l||(r=function(t,e,r,i,c,u){var o,n,a,_,s,h,r=r.bbox.slice(0),l=i.bbox;if(!(l[0]>=r[0]&&l[1]>=r[1]&&l[2]<=r[2]&&l[3]<=r[3]))return o=r[2]-r[0],n=r[3]-r[1],s=Zt(Dm(t,e,o,n),3),a=s[0],_=s[1],s=s[2],-1===(h=e.findExistTexChannel(i.page))?(h=e.lockOneChannel(),be.bindTexture(t,i.page.texture,h)):e.lockChannel(h),t.useProgram(t.programOverflow),be.drawOverflow(t,h,r[0]-l[0],r[1]-l[1],o,n,i.width,i.height),e.releaseLockChannel(h),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(_),l=new $p(t,s,i.sx1,i.sy1,o,n,r),e.releaseLockChannel(a,l.page),l}(v,E,i,s,y,x))&&(s=r,l=!0,n||(o[$g]=s))),a.length&&(p&&p.available&&!l||(s=Pm(v,E,0,t=s,a,y,x))!==t&&(l=!0,n||(o[$g]=s))),!u||g&&g.available&&!l||(s=function(t,e,r,i,o,c,u,_,f){var d=o.sx1,p=o.sy1,g=o.width,m=o.height,v=o.bbox,y=o.dx,x=o.dy,E=.5*g,b=.5*m,M=(i=i[Qg])[kg],i=i[Lg],T=Tm(M)?qt.identity():((i=i.slice(0))[0]+=d+y,i[1]+=p+x,la.calMatrixByOrigin(M,i));T=qt.inverse(T);for(var i=(M=Zt(Dm(t,e,g,m),3))[0],A=M[1],M=M[2],R=r.next,O=R.isClip,w=[];R&&R.isMask&&R.isClip===O;)w.push(R),R=R.next;for(var S=0,I=w.length;S<I;S++)for(var C=[],k=void 0,L=void 0,D=[],N=1,P=void 0,F=_,B=w[S].__config[cm],Y=B[_m],n=Y,H=Y+(B[fm]||0)+1;n<H;n++){var G=f[n],W=G[um],a=G[pm],U=G[fm],G=G[dm],s=W.__config,h=s[Vg],X=s[Qg],V=s[em];if("none"!==X[Ag])if(W instanceof as){if(h&&h.available)e.addTexAndDrawWhenLimit(t,h,N,e.last[2],E,b,0,0,!0);else if(V)return}else{var X=s[Vg],W=s[jg],h=s[$g],K=s[zg],z=s[Kg],s=s[Qg],j=s[Rg],$=s[kg],s=s[Lg],l=(n===Y||(F<a?(Tm(k=L)&&(k=null),C.push(k),N=P,D.push(N)):a<F&&(C.splice(-(l=F-a)),k=C[a-1],D.splice(-l),N=D[a-1])),F=a,vg([W,h,K,z,X]));if(l){a=void 0,a=Tm($)?qt.identity():((W=s.slice(0))[0]+=l.bbox[0]+y,W[1]+=l.bbox[1]+x,la.calMatrixByOrigin($,W)),h=(a=qt.multiply(T,a),s.slice(0));h[0]+=l.bbox[0]+y,h[1]+=l.bbox[1]+x,L=la.calMatrixByOrigin($,h),Tm(k)||(L=Rm(k,L)),e.addTexAndDrawWhenLimit(t,l,P=N*j,a,E,b,y,x,!0),l!==X&&(n+=(U||0)+Lm(f,n+(U||0)+1,G||0))}else if(V)return}else n+=(U||0)+Lm(f,n+(U||0)+1,G||0)}e.refresh(t,E,b),t.deleteFramebuffer(A),-1===(r=e.findExistTexChannel(o.page))?(r=e.lockOneChannel(),be.bindTexture(t,o.page.texture,r)):e.lockChannel(r);var o=(A=Zt(Dm(t,e,g,m),3))[0],Z=A[1],A=A[2],q=O?t.programClip:t.programMask,q=(t.useProgram(q),be.drawMask(t,i,r,q),t.deleteTexture(M),e.releaseLockChannel(i),e.releaseLockChannel(r),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,c,u),t.deleteFramebuffer(Z),new $p(t,A,d,p,g,m,v));return e.releaseLockChannel(o,q.page),q}(v,E,i,o,s,y,x,c,b),n||(o[jg]=s)),n&&(X[e]=s)})),_&&(G=(s=Zt(Dm(v,E,y,x),3))[0],W=s[1],U=s[2]);for(var V,K,z,j,$,Z=0,q=b.length;Z<q;Z++){var J,Q,tt,et,rt,it,ot,nt,at,st,ht,lt,ct,ut=b[Z],_t=ut[um],ft=ut[fm],ut=ut[dm],n=_t.__config;_t instanceof as?(tt=n[Vg],rt=n[em],Q=(J=n[am].__config)[qg],J=J[Jg],tt&&tt.available?E.addTexAndDrawWhenLimit(v,tt,J,Q,t,e,0,0,!0):rt&&(tt=De.getCacheCanvas(y,x,"__$$OVERSIZE$$__"),_t.render(a,0,v,dg,0,0),rt=E.lockOneChannel(),et=be.createTexture(v,tt.canvas,rt),et=new $p(v,et,0,0,y,x,[0,0,y,x]),E.addTexAndDrawWhenLimit(v,et,J,Q,t,e,0,0,!0),E.refresh(v,t,e,!0),tt.ctx.setTransform(1,0,0,1,0,0),tt.ctx.globalAlpha=1,tt.ctx.clearRect(0,0,y,x),et.release(),E.releaseLockChannel(rt))):(J=n[Jg],Q=n[qg],tt=n[em],et=n[Vg],rt=n[Kg],ht=n[$g],lt=n[jg],at=n[zg],it=n[rm],ot=(n=n[Qg])[Ag],nt=n[Og],n=n[Ig],"none"!==ot?((lt=vg([lt,ht,at,rt,et]))?(_&&wm(n)?(E.refresh(v,t,e,!0),at=(ht=Zt(Dm(v,E,y,x),3))[0],st=ht[1],ht=ht[2],E.addTexAndDrawWhenLimit(v,lt,J,Q,t,e,0,0,!0),E.refresh(v,t,e,!0),G=(at=Zt(Bm(v,E,G,at,W,U,Om(n),y,x),3))[0],W=at[1],U=at[2],v.deleteFramebuffer(st),v.deleteTexture(ht)):E.addTexAndDrawWhenLimit(v,lt,J,Q,t,e,0,0,!0),lt!==et&&(Z+=(ft||0)+Lm(b,Z+(ft||0)+1,ut||0))):X.hasOwnProperty(Z)?(at=X[Z],_&&wm(n)?(E.refresh(v,t,e,!0),ht=(st=Zt(Dm(v,E,y,x),3))[0],lt=st[1],ct=st[2],E.addTexAndDrawWhenLimit(v,at,J,Q,t,e,0,0,!0),E.refresh(v,t,e,!0),G=(ht=Zt(Bm(v,E,G,ht,W,U,Om(n),y,x),3))[0],W=ht[1],U=ht[2],v.deleteFramebuffer(lt),v.deleteTexture(ct)):E.addTexAndDrawWhenLimit(v,at,J,Q,t,e,0,0,!0),Z+=(ft||0)+Lm(b,Z+(ft||0)+1,ut||0)):tt&&"none"!==ot&&"hidden"!==nt&&(n=De.getCacheCanvas(y,x,"__$$OVERSIZE$$__"),_t.render(a,it,v,dg,0,0),ht=E.lockOneChannel(),lt=be.createTexture(v,n.canvas,ht),ct=new $p(v,lt,0,0,y,x,[0,0,y,x]),E.addTexAndDrawWhenLimit(v,ct,J,Q,t,e,0,0,!0),E.refresh(v,t,e,!0),n.ctx.setTransform(1,0,0,1,0,0),n.ctx.globalAlpha=1,n.ctx.clearRect(0,0,y,x),ct.release(),E.releaseLockChannel(ht)),_t.hookGlRender&&_t.hookGlRender(v,J,Q,t,e,0,0,!0)):Z+=(ft||0)+Lm(b,Z+(ft||0)+1,ut||0))}E.refresh(v,t,e,!0),_&&(v.bindFramebuffer(v.FRAMEBUFFER,null),E.releaseLockChannel(G),v.deleteFramebuffer(W),s=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,s),v.bufferData(v.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),v.STATIC_DRAW),V=v.getAttribLocation(v.program,"a_position"),v.vertexAttribPointer(V,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(V),K=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,K),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),v.STATIC_DRAW),z=v.getAttribLocation(v.program,"a_texCoords"),v.vertexAttribPointer(z,2,v.FLOAT,!1,0,0),v.enableVertexAttribArray(z),j=v.createBuffer(),v.bindBuffer(v.ARRAY_BUFFER,j),v.bufferData(v.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),v.STATIC_DRAW),$=v.getAttribLocation(v.program,"a_opacity"),v.vertexAttribPointer($,1,v.FLOAT,!1,0,0),v.enableVertexAttribArray($),$=v.getUniformLocation(v.program,"u_texture"),v.uniform1i($,G),v.drawArrays(v.TRIANGLES,0,6),v.deleteBuffer(s),v.deleteBuffer(K),v.deleteBuffer(j),v.disableVertexAttribArray(V),v.disableVertexAttribArray(z),v.deleteTexture(U))}},Hm="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",Gm=function(){function e(t){f(this,e),this.__units=t,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return g(e,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,o,n){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,c=8<arguments.length?arguments[8]:void 0,s=this.__pages,u=this.__list,h=e.page;-1<s.indexOf(h)||(s.length>=this.__units-this.__lockUnits&&this.refresh(t,o,n,c),s.push(h)),u.push([e,r,i,a,l])}},{key:"refresh",value:function(t,c,u,_){var f=this.__pages,d=this.__list;if(f.length){var e=this.channels,p=this.locks,g={},m=(e.forEach(function(t,e){t&&(t=t.uuid,g[t]=e)}),this.__units),r=new Array(m),i=[];if(f.forEach(function(t){var e=t.uuid;g.hasOwnProperty(e)?(e=g[e],r[e]=t):i.push(t)}),i.length){for(var o=0;o<m&&(r[o]||e[o]||p[o]||(r[o]=i.shift(),i.length));o++);var v=i.length;if(v){for(var y=[],n=0;n<m;n++)r[n]||p[n]||y.push([n,e[n]]);y.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]});for(var a=0;a<v;a++)r[y[a][0]]=i[a]}}for(var x={},s=0,E=r.length;s<E;s++){var h,l=r[s];l&&((h=e[s])&&h===l&&!l.update||(l instanceof jp?be.bindTexture(t,l.texture,s):(!h||h instanceof jp||t.deleteTexture(h.texture),l.texture=be.createTexture(t,l.canvas,s)),e[s]=l),x[l.uuid]=s,l.update=!1,l.time=De.now())}be.drawTextureCache(t,d,x,c,u,_),f.splice(0),d.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i,o=this.__units,n=[],a=0;a<o;a++)e[a]||n.push([a,t[a]]);if(n.length)return n.sort(function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]}),t[i=n[0][0]]=null,e[i]=!0,this.__lockUnits++,i;throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(e){this.channels.forEach(function(t){t&&e.deleteTexture(t.texture)})}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),e}(),ki=A.STYLE_KEY,Wm=ki.TOP,Ur=ki.RIGHT,Um=ki.BOTTOM,re=ki.LEFT,Xm=ki.POSITION,Vm=ki.DISPLAY,Km=ki.VISIBILITY,zm=ki.COLOR,jm=ki.WIDTH,$m=ki.HEIGHT,Zm=ki.Z_INDEX,qm=ki.MARGIN_TOP,Jm=ki.MARGIN_LEFT,Qm=ki.MARGIN_BOTTOM,tv=ki.PADDING_TOP,ev=ki.PADDING_LEFT,rv=ki.PADDING_BOTTOM,iv=ki.BORDER_TOP_WIDTH,ov=ki.BORDER_LEFT_WIDTH,nv=ki.BORDER_BOTTOM_WIDTH,av=ki.POINTER_EVENTS,e=A.UPDATE_KEY,sv=e.UPDATE_NODE,hv=e.UPDATE_STYLE,lv=e.UPDATE_KEYS,cv=e.UPDATE_COMPONENT,uv=e.UPDATE_FOCUS,_v=e.UPDATE_MEASURE,fv=e.UPDATE_OVERWRITE,dv=e.UPDATE_LIST,pv=e.UPDATE_CONFIG,gv=e.UPDATE_ADD_DOM,mv=e.UPDATE_REMOVE_DOM,a=A.NODE_KEY,vv=a.NODE_TAG_NAME,yv=a.NODE_CACHE_STYLE,xv=a.NODE_CACHE_PROPS,Ev=a.NODE_CURRENT_STYLE,bv=a.NODE_COMPUTED_STYLE,Mv=a.NODE_CURRENT_PROPS,Tv=a.NODE_DOM_PARENT,Av=a.NODE_IS_MASK,Rv=a.NODE_REFRESH_LV,Ov=a.NODE_IS_DESTROYED,wv=a.NODE_STYLE,Sv=a.NODE_UPDATE_HASH,Iv=a.NODE_UNIQUE_UPDATE_ID,Cv=a.NODE_CACHE,kv=a.NODE_CACHE_TOTAL,Lv=a.NODE_CACHE_FILTER,Dv=a.NODE_CACHE_OVERFLOW,Nv=a.NODE_CACHE_MASK,Pv=a.NODE_STRUCT,i=A.STRUCT_KEY,Fv=i.STRUCT_INDEX,Bv=i.STRUCT_TOTAL,Yv=i.STRUCT_NODE,Hv=(n(s={},Wm,!0),n(s,Ur,!0),n(s,Um,!0),n(s,re,!0),s),Gv=xt.isNil,Wv=xt.isObject,Uv=xt.isFunction,Xv=r.AUTO,Vv=r.PX,Kv=r.PERCENT,zv=r.INHERIT,jv=Mo.isRelativeOrAbsolute,$v=Mo.equalStyle,Zv=Ra.contain,qv=Ra.getLevel,Jv=Ra.isRepaint,Qv=Ra.NONE,ty=Ra.FILTER,ey=Ra.PERSPECTIVE,ry=Ra.REPAINT,iy=Ra.REFLOW,oy=Ra.REBUILD,ny=wr.isIgnore,ay=wr.isGeom,sy=wr.isMeasure,hy={canvas:"canvas",svg:"svg",webgl:"canvas"};var ly=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function cy(t,e){return t.currentStyle[e][1]!==Xv}function uy(t,e){var r=cy(t,jm)&&cy(t,$m);if(r&&e){e=t.domParent;if(e&&("flex"===e.currentStyle[Vm]||"flex"===e.computedStyle[Vm]))return}return r}function _y(t){return t.hasOwnProperty("__uniqueReflowId")}var fy=0;function dy(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=fy,e[fy++]={node:t,component:r,addDom:i})}var py=0;function gy(c,u,t,_,f,d,p,g,m){var e=t[sv],i=t[hv],v=t[fv],r=t[uv],o=t[cv],y=t[_v],n=t[dv],x=t[lv],a=t[pv],E=t[gv],t=t[mv];if(!a[Ov]){v&&Object.assign(a[wv],v),n&&!o&&(x=(x||[]).slice(0),b={},x.forEach(function(t){b[t]=!0}),n.forEach(function(t){var e=t[hv],r=t[fv];(t[lv]||[]).forEach(function(t){b.hasOwnProperty(t)||(b[t]=!0,x.push(t))}),r&&Object.assign(a[wv],r),e&&(i?Object.assign(i,e):i=e)}));var b,M,T,A,R,O=a[vv],w=a[yv],S=a[xv],I=a[Ev],v=a[bv],C=a[Mv],n=a[Tv],k=a[Av],s=r||Qv,L=y;if(!o&&i&&x)for(var D=0,N=x.length;D<N;D++){var h=x[D],P=i[h];if(e instanceof ep&&ay(O,h))$v(h,P,C[h],e)||(s|=ry,S[h]=void 0,C[h]=P);else if(!$v(h,P,I[h],e))if(ny(h))w[h]=void 0,I[h]=P;else{if(Hv.hasOwnProperty(h)){var F=I[Xm];if("relative"!==F&&"absolute"!==F){delete i[h];continue}}else h===Vm&&(R=!0);s|=qv(h),sy(h)&&(L=!0),w[h]=void 0,I[h]=P,h===Zm&&e!==u&&(M=!0),h===Km&&(T=!0),h===zm&&(A=!0)}}if(s!==Qv||o){if("none"!==v[Vm]||R){if(M&&n&&delete n.__zIndexChildren,T||A)for(var B=u.__structs,r=e.__config[Pv],Y=r[Fv]+1,H=Y+r[Bv];Y<H;Y++){var G=B[Y],W=G[Yv],G=G[Bv],U=W.__config,X=U[Ev],V=void 0;T&&(W instanceof as||X[Km][1]===zv)&&(V=!0),(V=A&&(W instanceof as||X[zm][1]===zv)?!0:V)?(U[Rv]|=ry,W instanceof F0&&W.clearCache()):Y+=G||0}if(k){for(var K=e.prev;K&&K.isMask;)K=K.prev;K&&K.__config[Nv]&&K.__config[Nv].release()}var z=n;if(R&&z){y=z.__config;if("none"===y[Ev][Vm]||"none"===y[bv][Vm])return void(v[Vm]="none")}!o&&Jv(s)?(M&&c===et.SVG&&(s|=ry,n&&my(n)),M&&!o&&g&&n&&!n.hasOwnProperty("__uniqueZId")&&(g[py]=!0,n.__uniqueZId=py++,m.push(n))):(_.push({node:e,style:i,component:o,addDom:E,removeDom:t}),L&&f.push(e)),a[Rv]|=s,u.__rlv=o||E||t?oy:Math.max(u.__rlv,s);r=ry<=s||c===et.SVG&&e instanceof ep;for(r&&a[Cv]&&a[Cv].release(),(r||Zv(s,ey))&&(a[kv]&&a[kv].release(),a[Nv]&&a[Nv].release(),a[Dv]&&a[Dv].release()),(r||Zv(s,ty))&&a[Lv]&&a[Lv].release();z;){var l=z.__config;if(l.hasOwnProperty(Iv)){var j=l[Iv];if(d.hasOwnProperty(j))break;d[j]=!0}else d[py]=!0,l[Iv]=py++,p.push(l);j=l[Rv];ry<=j&&l[Cv]&&l[Cv].release(),l[kv]&&l[kv].release(),l[Lv]&&l[Lv].release(),l[Nv]&&l[Nv].release(),l[Dv]&&l[Dv].release(),z=l[Tv]}return!0}}else delete a[Iv]}}function my(t,e){var r=t.__config;e?r[Rv]|=ry:r[kv].release(),Array.isArray(t.children)&&t.children.forEach(function(t){(t=t instanceof Ns?t.shadowRoot:t)instanceof as||my(t,!0)})}var vy=0,yy=function(){p(o,g1);var i=m(o);function o(t,e,r){return f(this,o),(t=i.call(this,t,e)).__cd=r||[],t.__dom=null,t.__mw=0,t.__mh=0,t.__taskUp=[],t.__taskCp=[],t.__ref={},t.__reflowList=[{node:c(t)}],t.__animateController=new Kp,Ss.mix(c(t)),t.__config[Sv]=t.__updateHash={},t.__uuid=vy++,t.__rlv=oy,t}return g(o,[{key:"__initProps",value:function(){var t=this.props.width,t=(Gv(t)||0<(t=parseFloat(t)||0)&&(this.__width=t),this.props.height);Gv(t)||0<(t=parseFloat(t)||0)&&(this.__height=t)}},{key:"__genHtml",value:function(t){var r=this,i="<".concat(t);return Object.keys(this.props).forEach(function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)||(i+=function(t,e){if(e=Array.isArray(e)?xt.joinSourceArray(e):xt.stringify(e),"className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+xt.encodeHtml(e,!0)+'"'}(t,e))}),i+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r,i,o,n,a,s,h,l;return-1===["touchend","touchcancel"].indexOf(t.type)&&(a=this.dom,e=this.__scx,r=this.__scy,s=(a=a.getBoundingClientRect()).x,i=a.y,h=a.left,o=a.top,n=a.width,a=a.height,s=(l=t.touches?t.touches[0]:t).clientX-(s=s||h||0),h=l.clientY-(h=i||o||0),Gv(e)?s*=this.width/n:s/=e,Gv(r)?h*=this.height/a:h/=r),{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:s,y:h,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget)return t=this.__wrapEvent(t),this.__emitEvent(t),t}},{key:"appendTo",value:function(t){t=function(t){if(xt.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Os.initRoot(this.__cd,this),this.__initProps();var n,a,e,r=(this.__root=this).tagName,r=hy[r],r=("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===r?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(r),this.__dom||(t.innerHTML=this.__genHtml(r),this.__dom=t.querySelector(r))),this.__defs=this.dom.__defs||hd.getInstance(this.__uuid),this.width&&this.height||(r=window.getComputedStyle(t,null),this.width||(this.__width=parseFloat(r.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(r.getPropertyValue("height"))||0,t.setAttribute("height",this.height))),Object.assign({},pe,this.props.contextAttributes));"canvas"===this.tagName?(this.__ctx=this.__dom.getContext("2d",r),this.__renderMode=et.CANVAS):"svg"===this.tagName?this.__renderMode=et.SVG:"webgl"===this.tagName&&(t=this.__ctx=this.__dom.getContext("webgl",r),this.__renderMode=et.WEBGL,t.program=be.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=be.initShaders(t,Hm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=be.initShaders(t,Hm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=be.initShaders(t,Hm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=be.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.useProgram(t.program),r=Math.min(16,t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),this.__texCache=new Gm(r)),this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof o&&this.dom.__root.destroy(),this.__eventCbList=(n=this.dom,a=o,e=[],ly.forEach(function(o){function t(t){var e=n.__root;if(e&&e instanceof a)if(-1<["touchend","touchcancel","touchmove"].indexOf(o)){var r=e.__touchstartTarget,i=e.__wrapEvent(t);for(i.target=r;r;)r.__emitEvent(i,!0),r=r.domParent}else e.__cb(t)}n.addEventListener(o,t),e.push([o,t])}),e),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,o=this.ctx,n=this.defs,a=this.width,s=this.height;if(!r){if(n.clear(),e)this.__checkRoot(i,a,s),this.__computeMeasure(i,o);else if(!this.__checkUpdate(i,o,a,s))return;De.measureText(),this.__checkReflow(a,s),i!==et.CANVAS||this.props.noRender?i!==et.SVG||this.props.noRender?i!==et.WEBGL||this.props.noRender||(this.__clear(o,i),Ym.renderWebgl(i,o,this)):(Ym.renderSvg(i,n,this,e),(r=this.virtualDom).defs=n.value,this.dom.__vd?kp(this.dom,this.dom.__vd,r):this.dom.innerHTML=xt.joinVirtualDom(r),this.dom.__vd=r,this.dom.__defs=n):(this.__clear(o,i),Ym.renderCanvas(i,o,this)),Uv(t)&&t(),this.emit(Ss.REFRESH,this.__rlv),this.__rlv=Qv}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var e,t=this.dom,t=(t&&(e=t,(this.__eventCbList||[]).forEach(function(t){e.removeEventListener(t[0],t[1])}),t.__root=null),this.ctx);this.__texCache&&t&&(this.__texCache.release(t),t.program&&(t.deleteShader(t.program.vertexShader),t.deleteShader(t.program.fragmentShader),t.deleteProgram(t.program)),t.programMask&&(t.deleteShader(t.programMask.vertexShader),t.deleteShader(t.programMask.fragmentShader),t.deleteProgram(t.programMask)),t.programOverflow&&(t.deleteShader(t.programOverflow.vertexShader),t.deleteShader(t.programOverflow.fragmentShader),t.deleteProgram(t.programOverflow)))}},{key:"scale",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){t!==this.width||e!==this.height?(this.__width=t,this.__height=e,this.updateStyle({width:t,height:e},r)):Uv(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var i,o=this,e=this.taskUp;this.isDestroyed||(e.length||(ch.nextFrame({__before:function(r){o.isDestroyed||(i=e.splice(0)).length&&i.forEach(function(t,e){Wv(t)&&Uv(t.__before)&&t.__before(r)})},__after:function(e){o.isDestroyed||i.forEach(function(t){Wv(t)&&Uv(t.__after)?t.__after(e):Uv(t)&&t(e)})}}),this.__frameHook()),-1===e.indexOf(t)&&e.push(t))}},{key:"addForceRefreshTask",value:function(t){this.__hasRootUpdate=!0,this.addRefreshTask(t)}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var r,o=this,i=this.taskCp;this.isDestroyed||(i.length||(ch.__nextFrameCp({__before:function(e){o.isDestroyed||(r=i.splice(0)).length&&(r.forEach(function(t){t.__before(e)}),Mp.check(o),Mp.updateList.length&&Mp.updateList.forEach(function(t){var e=t.root,r=t.shadowRoot,i=(r instanceof as&&(r=r.domParent),{});i[sv]=r,i[hv]=r.currentStyle,i[uv]=iy,i[_v]=!0,i[cv]=t,i[pv]=r.__config,o.__addUpdate(r,r.__config,e,e.__config,i)}))},__after:function(e){o.isDestroyed||(r.forEach(function(t){t.__after(e)}),Mp.did())}}),this.__frameHook()),-1===i.indexOf(t)&&i.push(t))}},{key:"getTargetAtPoint",value:function(t,e,E){return function c(t,e,r,u,_){var i=t.__sx1,o=t.__sy1,f=t.offsetWidth,d=t.offsetHeight,p=t.matrixEvent,g=t.children,n=t.zIndexChildren,a=t.computedStyle,m=a[Vm],a=a[av];if(E||"none"!==m){if(Array.isArray(n)){for(var s=0,v=g.length;s<v;s++)g[s].__index__=s;for(var h=n.length-1;0<=h;h--)if(!((l=n[h])instanceof karas.Text)){var l,y=u.slice(),x=(y.push(l.__index__),_.slice());if(x.push(h),l=c(l,e,r,y,x))return l}}if(E||"none"!==a)return nt.pointInQuadrilateral(e,r,i,o,i+f,o,i+f,o+d,i,o+d,p)?{target:t,path:u,zPath:_}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,o=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(o[Vm])&&(n[Vm]=o[Vm]="block"),"absolute"===o[Xm]&&(n[Xm]=o[Xm]="static"),o[jm]=[e,Vv],o[$m]=[r,Vv],n[jm]=e,n[$m]=r,t===et.CANVAS||t===et.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===et.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,o){i=i[Sv];t===r?(i=r.__updateRoot)?(o[uv]&&(i[uv]|=o[uv]),o[_v]&&(i[_v]=!0),o[hv]&&(i[dv]=i[dv]||[]).push((n(t={},hv,o[hv]),n(t,fv,o[fv]),n(t,lv,o[lv]),t))):r.__updateRoot=o:e.hasOwnProperty(Iv)?i.hasOwnProperty(e[Iv])?(t=i[e[Iv]],o[uv]&&(t[uv]|=o[uv]),o[_v]&&(t[_v]=!0),o[hv]&&(t[dv]=t[dv]||[]).push((n(r={},hv,o[hv]),n(r,fv,o[fv]),n(r,lv,o[lv]),r))):De.error("Update process miss uniqueUpdateId"):(e[Iv]=py,i[py++]=o)}},{key:"__checkUpdate",value:function(h,_,a,s){for(var l=this,t=[],e=[],f={},r=[],d={},p=[],g=l.__updateRoot,c=l.__updateHash,i=l.__hasRootUpdate,o=(l.__hasRootUpdate=!1,g&&(l.__updateRoot=null,(i=gy(h,l,g,e,t,f,r))&&l.__checkRoot(h,a,s)),Object.keys(c)),n=0,m=o.length;n<m;n++)var v=gy(h,l,c[o[n]],e,t,f,r,d,p),i=i||v;l.__reflowList=e,py=0,l.__updateHash=l.__config[Sv]={},r.forEach(function(t){delete t[Iv]}),p.forEach(function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(l.__structs))});var u={};t.forEach(function(t){var e=t.__config,r=e[Iv],i=e[Tv];if(t!==l){if(u.hasOwnProperty(r))return;u[r]=!0}var o=t;if(t!==l&&(c[r][gv]||wr.isMeasureInherit(c[r][hv])))for(;i&&i!==l;){var n,a=i,s=a.__config[Iv],a=a.currentStyle;if(!(i.__config.hasOwnProperty(Iv)?(n=c[s][hv],u[s]=!0,!!wr.measureInheritList(n).length):wr.isMeasureInherit(a)))break;i=(o=i).domParent}o.__computeMeasure(h,_,function(t){t.__config.hasOwnProperty(Iv)&&(u[t.__config[Iv]]=!0)})});for(var y=0,x=o.length;y<x;y++)delete c[o[y]][pv][Iv];return i}},{key:"__checkReflow",value:function(i,a){var w=this,t=this.__reflowList;if(t.length){for(var s,J=this,h=[],Q={},l=fy=0,c=t.length;l<c;l++){var e=t[l],r=e.node,u=e.component,_=e.addDom,f=e.removeDom;if(r===this){s=!0;break}if((r=_&&r instanceof Ns?r.shadowRoot:r).hasOwnProperty("__uniqueReflowId")||(r.__uniqueReflowId=fy,Q[fy++]=e),function(t,e,r,i,o){if(!o||"absolute"!==r.currentStyle[Xm]){var n=r;if(-1<["inline","inlineBlock","inline-block"].indexOf(n.currentStyle[Vm])||-1<["inline","inlineBlock","inline-block"].indexOf(n.computedStyle[Vm])){do{if((n=n.domParent)===t)return 1;if(_y(n))return;if("absolute"===n.currentStyle[Xm]||"absolute"===n.computedStyle[Xm])return void dy(n,e,i,o)}while(n&&(-1<["inline","inlineBlock","inline-block"].indexOf(n.currentStyle[Vm])||-1<["inline","inlineBlock","inline-block"].indexOf(n.computedStyle[Vm])));if(uy(n,!0))return void dy(n,e,i,o)}var a,s=n.domParent;if(!_y(s)){do{if(_y(s))return}while(("flex"!==s.computedStyle[Vm]&&"flex"!==s.currentStyle[Vm]||(a=s),"absolute"!==s.currentStyle[Xm]&&"absolute"!==s.computedStyle[Xm])&&(!uy(s,!0)&&(s=s.domParent)));if((n=a?a:n)===t)return 1;for(s=n;s;){if("absolute"===s.currentStyle[Xm]||"absolute"===s.computedStyle[Xm]){if(s===t)break;if(uy(s))break;return void dy(s,e,i,o)}s=s.domParent}if(n!==r)dy(n,e,i,o);else if(o){var h=!0,l=r.prev,c=r.next;if(!(h=l&&-1<["inline","inline-block","inlineBlock"].indexOf(l.currentStyle[Vm])||c&&-1<["inline","inline-block","inlineBlock"].indexOf(c.currentStyle[Vm])?!1:h)){if((n=r.domParent)===t)return 1;dy(n,e,!1,!0)}}}}}(J,Q,r,u,_)){s=!0,_&&(this.__zIndexChildren=null);break}f&&h.push(e)}if(fy=0,this.__reflowList=[],s)return of.clearUniqueReflowId(Q),this.__layout({x:0,y:0,w:i,h:a}),this.__layoutAbs(this,{x:0,y:0,w:i,h:a}),this.__structs=this.__structure(0,0),!0;this.__deepScan(function(t,e){if(t.hasOwnProperty("__uniqueReflowId"))return t=Q[t.__uniqueReflowId],e.uniqueList.push(t),!0},{uniqueList:h});var S=[],I=0,C=[],k=0,tt=(h.forEach(function(t){var e=t.node,c=t.component,u=t.addDom,t=t.removeDom,r=e.computedStyle,i=e.currentStyle,_=r[Zm],f=r[Xm],r=r[Vm],o="absolute"===f,d="absolute"===i[Xm],r="none"===r,p="none"===i[Vm];if(!r||!p){for(var g,n=e.domParent,m=n.__layoutData,v=m.x,y=m.y,m=m.h,x=n.width,E=n.computedStyle,a=e,s=(a=a.isShadowRoot?a.hostRoot:a).prev;s;){if(s instanceof as||"absolute"!==s.computedStyle[Xm]&&"none"!==s.computedStyle[Vm]){y=s.y+s.outerHeight,g=!0;break}s=s.prev}t||(g||(y+=E[qm]+E[iv]+E[tv]),v+=E[Jm]+E[ov]+E[ev]);var h=e;if(!t)if(d){for(h=h.domParent;h&&h!==J&&!jv(h);)if(h.parent)h=h.parent;else if(h.host)break;h=h||J;if(n.__layoutAbs(h,null,e),u)return a=n.__modifyStruct(J,I),I+=a[1],S.push(a),n.__updateStruct(J.__structs),void(w.renderMode===et.SVG&&my(n));if(o)return void(c?(a=e.__modifyStruct(J,I),I+=a[1],S.push(a),(f===i[Xm]||"static"!==f&&"static"!==i[Xm])&&_===i[Zm]||(n.__updateStruct(J.__structs),w.renderMode===et.SVG&&my(n))):(r||p)&&(e.__zIndexChildren=null,o=e.__modifyStruct(J,I),I+=o[1],S.push(o)));n.__updateStruct(J.__structs),w.renderMode===et.SVG&&my(n)}else{if(e.__layout({x:v,y:y,w:x,h:m}),y+=e.outerHeight,c)h=e;else for(h=h.domParent;h&&h!==J&&!jv(h);)if(h.parent)h=h.parent;else if(h.host)break;h=h||J,e instanceof g1&&e.__layoutAbs(h,{x:v,y:y,w:x,h:m})}for(var b=e;b&&b!==J;)if("relative"===(E=(b=b.domParent).computedStyle)[Xm]){var M=b,T=M.ox,M=M.oy;T&&e.__offsetX(T),M&&e.__offsetY(M);break}for(var l=(e=e.isShadowRoot?e.hostRoot:e).next;l&&!l.hasOwnProperty("__uniqueReflowId");){if("absolute"!==l.computedStyle[Xm]){var A=y-l.y;if(A)for(;l&&!l.hasOwnProperty("__uniqueReflowId");){var R=l,O=(R=R instanceof Ns?R.shadowRoot:R).computedStyle;"absolute"!==O[Xm]&&"none"!==O[Vm]&&R.__offsetY(A,!0,ry),l=l.next}break}l=l.next}n.hasOwnProperty("__uniqueMergeOffsetId")||d&&r||(n.__uniqueMergeOffsetId=k++,C.push(n)),u||t?(a=n.__modifyStruct(J,I),I+=a[1],S.push(a),w.renderMode===et.SVG&&my(n)):c?(o=e.__modifyStruct(J,I),I+=o[1],S.push(o),(f===i[Xm]||"static"!==f&&"static"!==i[Xm])&&_===i[Zm]||(e.domParent.__updateStruct(J.__structs),w.renderMode===et.SVG&&my(e.domParent))):(r||p)&&(e.__zIndexChildren=null,v=e.__modifyStruct(J,I),I+=v[1],S.push(v))}}),[]),o=(C.forEach(function(t){delete t.__uniqueMergeOffsetId;for(var c,u,_=t.flowChildren,f=t.absChildren,e=[],r=[],d=_.length,i=0;i<d;i++){var o=_[i],n=(o=o instanceof Ns?o.shadowRoot:o)instanceof F0,p=(!c&&n&&o.hasOwnProperty("__uniqueReflowId")&&(c=!0,u=i),n&&o.currentStyle),g=n&&"inline"===p[Vm],m=n&&-1<["inlineBlock","inline-block"].indexOf(p[Vm]),v=o;if(!n||g||m){if(e.length&&r.length&&c){var y=of.getMergeMarginTB(r,e);if(y)for(var x=Math.max(u,i-e.length+1);x<d;x++)_[x].__offsetY(y,!0,ry)}r=[],e=[]}if(n&&!g){var E,b,m=n&&"none"===p[Vm],g=void 0;if(!m&&o.flowChildren&&0===o.flowChildren.length&&(p=(n=o.computedStyle)[qm],E=n[Qm],A=n[tv],R=n[rv],O=n[$m],b=n[iv],n=n[nv],A<=0&&R<=0&&O<=0&&b<=0&&n<=0&&(e.push(E),r.push(p),g=!0)),m||g){if(i===d-1){var M=of.getMergeMarginTB(r,e);if(M)for(var T=Math.max(u,i-e.length+1);T<d;T++)_[T].__offsetY(M,!0,ry)}}else{var A=o.computedStyle,R=A[qm],O=A[Qm];if(e.length&&(r.push(R),c)){var w=of.getMergeMarginTB(r,e);if(w)for(var S=Math.max(u,i-e.length+1);S<d;S++)_[S].__offsetY(w,!0,ry)}r=[],e=[O]}}}var I=t.currentStyle,C=I[$m],k=t===J||t.isShadowRoot||"absolute"===I[Xm]||"relative"===I[Xm];if(C[1]===Xv&&v){var a,I=t.height+t.computedStyle[tv],s=v.y+v.outerHeight-t.y-I;if(s){t.__resizeY(s,ry);for(var L=0,D=f.length;L<D;L++){var h=f[L],N=h.currentStyle,P=N[Wm],l=N[Um],N=N[$m];if(P[1]===Xv)if(l[1]===Xv)for(var F=h.prev;F;){var B=F,Y=(B=B instanceof Ns?B.shadowRoot:B)instanceof F0,H=Y&&B.currentStyle;if(!(Y&&"absolute"===H[Xm])){Y=B.y+B.outerHeight-h.y;Y&&h.__offsetY(Y,!0,ry);break}F=F.prev}else l[1]===Vv?h.__offsetY(s,!0,ry):l[1]===Kv&&(l=(1-.01*l[0])*s,h.__offsetY(l,!0,ry));else if(P[1]===Kv)if(k){var l=.01*P[0]*s;h.__offsetY(l,!0,ry)}else{if(!a)for(a=t.domParent;a&&a!==J&&!a.isShadowRoot;){var G=a.currentStyle;if("absolute"===G[Xm]||"relative"===G[Xm])break;a=a.domParent}a.currentStyle[$m][1]!==Vv&&(l=.01*P[0]*s,h.__offsetY(l,!0,ry))}if(N[1]===Kv)if(k)t.__layoutAbs(t,null,h);else{if(!a)for(a=t.domParent;a&&a!==J&&!a.isShadowRoot;){var W=a.currentStyle;if("absolute"===W[Xm]||"relative"===W[Xm])break;a=a.domParent}tt.push([t,a,h])}}return void of.offsetAndResizeByNodeOnY(t,J,Q,s,tt)}}for(var U=0,X=f.length;U<X;U++){var V=f[U],K=V.currentStyle,z=K[Wm],K=K[Um];if(z[1]===Xv&&K[1]===Xv)for(var j=V.prev;j;){var $=j,Z=($=$ instanceof Ns?$.shadowRoot:$)instanceof F0,q=Z&&$.currentStyle;if(!(Z&&"absolute"===q[Xm])){Z=$.y+$.outerHeight-V.y;Z&&V.__offsetY(Z,!0,ry);break}j=j.prev}}}),tt.forEach(function(t){t[0].__layoutAbs(t[1],null,t[2])}),0),n=0,d=!0,p=J.__structs;if(S.forEach(function(t){var t=Zt(t,2),e=t[0],t=t[1];if(d)d=!1,n=e[Fv]+(e[Bv]||0)+1,o+=t;else{for(var r=e[Fv]+(e[Bv]||0)+1+o,i=n;i<r;i++)p[i][Fv]+=o;n=r,o+=t}}),o)for(var g=n,m=p.length;g<m;g++)p[g][Fv]+=o;of.clearUniqueReflowId(Q)}}},{key:"__computeMeasure",value:function(e,r){Mo.computeMeasure(this,!0),this.children.forEach(function(t){t.__computeMeasure(e,r)})}},{key:"__frameHook",value:function(){var t,e=this;this.__hookTask||(t=this.__hookTask=function(){e.refresh()},ch.__hookTask.push(t))}},{key:"__clear",value:function(t,e){e===et.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===et.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),o}(),t=A.STYLE_KEY,xy=t.STROKE_WIDTH,Ey=t.BOX_SHADOW,by=t.FONT_SIZE,My=t.FILTER,Ty=xt.isNil,Ay=r.REM,Ry=r.VW,Oy=r.VH,wy=r.VMAX,Sy=r.VMIN;function Iy(t,e,r,i){return i?t.map(function(t){return e+t*r}):e+t*r}function Cy(t,e){var r=0;return t&&2<=t.length&&r++,e&&2<=e.length&&(r+=2),r}function ky(t,e,r,i,o,n,c,a,s){var h,l,a=7<arguments.length&&void 0!==a?a:0,s=8<arguments.length&&void 0!==s?s:1;return 0===a&&1===s?[t,e,r,i,o,n]:a===s?[]:(s<a&&(a=(l=[s,a])[0],s=l[1]),a=Math.max(0,a),s=Math.min(1,s),3===c?(l=Zt(nt.sliceBezier2Both([[t,e],o,n,[r,i]],a,s),4),t=(h=Zt(l[0],2))[0],e=h[1],o=l[1],n=l[2],r=(h=Zt(l[3],2))[0],i=h[1]):2===c?(l=Zt(nt.sliceBezier2Both([[t,e],n,[r,i]],a,s),3),t=(h=Zt(l[0],2))[0],e=h[1],n=l[1],r=(h=Zt(l[2],2))[0],i=h[1]):1===c?(l=Zt(nt.sliceBezier2Both([[t,e],o,[r,i]],a,s),3),t=(h=Zt(l[0],2))[0],e=h[1],o=l[1],r=(c=Zt(l[2],2))[0],i=c[1]):(t+=(h=r-t)*a,e+=(l=i-e)*a,r+=h*(1-s),i+=l*(1-s)),[t,e,r,i,o,n])}var Kr=function(){p(A,ep);var s=m(A);function A(t,e){var r,i,o;if(f(this,A),(r=s.call(this,t,e)).isMulti){if(r.__x1=[0],r.__y1=[0],r.__x2=[1],r.__y2=[1],r.__controlA=[[]],r.__controlB=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.x1)?r.__x1=e.x1.map(function(t){return parseFloat(t)||0}):Ty(e.x1)||(r.__x1=[parseFloat(e.x1)||0]),Array.isArray(e.y1)?r.__y1=e.y1.map(function(t){return parseFloat(t)||0}):Ty(e.y1)||(r.__y1=[parseFloat(e.y1)||0]),Array.isArray(e.x2)?r.__x2=e.x2.map(function(t){return parseFloat(t)||0}):Ty(e.x2)||(r.__x2=[parseFloat(e.x2)||0]),Array.isArray(e.y2)?r.__y2=e.y2.map(function(t){return parseFloat(t)||0}):Ty(e.y2)||(r.__y2=[parseFloat(e.y2)||0]),Array.isArray(e.controlA)&&(r.__controlA=e.controlA.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.controlB)&&(r.__controlB=e.controlB.map(function(t){return Array.isArray(t)?t:[]})),Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var n=r.__start.length;n<r.__x1.length;n++)r.__start.push(0)}else Ty(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__x1.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var a=r.__end.length;a<r.__x1.length;a++)r.__end.push(1)}else Ty(e.end)||(o=parseFloat(e.end),isNaN(o)&&(o=1),r.__end=r.__x1.map(function(){return o}))}else r.__x1=r.__y1=r.__start=0,r.__x2=r.__y2=r.__end=1,r.__controlA=[],r.__controlB=[],Ty(e.x1)||(r.__x1=parseFloat(e.x1)||0),Ty(e.y1)||(r.__y1=parseFloat(e.y1)||0),Ty(e.x2)||(r.__x2=parseFloat(e.x2)||0),Ty(e.y2)||(r.__y2=parseFloat(e.y2)||0),Ty(e.start)||(r.__start=parseFloat(e.start)||0),Ty(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t),Array.isArray(e.controlA)&&(r.__controlA=e.controlA),Array.isArray(e.controlB)&&(r.__controlB=e.controlB);return r}return g(A,[{key:"buildCache",value:function(e,r,i){var o,n=this,a=this.width,s=this.height,h=this.__cacheProps,l=this.isMulti;return["x1","x2"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=Iy(n[t],e,a,l))}),["y1","y2"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=Iy(n[t],r,s,l))}),["controlA","controlB"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=function e(t,r,i,o,n,a){if(a){if(t)return t.map(function(t){return e(t,r,i,o,n)})}else if(t&&2<=t.length)return[r+t[0]*o,i+t[1]*n];return[]}(n[t],e,r,a,s,l))}),["start","end"].forEach(function(t){(Ty(h[t])||i)&&(o=!0,h[t]=n[t])}),o}},{key:"render",value:function(l,t,c,e,r,a){var f=this,t=P(N(A.prototype),"render",this).call(this,l,t,c,e,r,a);if(t.break)return t;c=t.ctx;var u,s,i,o,n,h,d,p,e=t.sx3,r=t.sy3,a=t.stroke,g=t.strokeWidth,m=t.strokeDasharray,v=t.strokeDasharrayStr,y=t.strokeLinecap,x=t.strokeLinejoin,E=t.strokeMiterlimit,b=t.dx,M=t.dy,_=this.__cacheProps,T=this.isMulti;return this.buildCache(e,r)&&l===et.SVG&&(u="",T?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],o=_.y2[e],n=_.controlA[e],a=_.controlB[e],s=_.start[e],e=_.end[e],h=Cy(n,a);0===s&&1===e||(t=(s=Zt(ky(t,i,r,i,n,a,h,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],n=s[4],a=s[5]),u+=yt.svgLine(t,i,r,o,n,a,h)}):(e=Cy(_.controlA,_.controlB),r=_.x1,o=_.y1,n=_.x2,h=_.y2,d=_.controlA,p=_.controlB,i=_.start,s=_.end,0===i&&1===s||(r=(i=Zt(ky(r,o,n,h,d,p,e,i,s,_.len),6))[0],o=i[1],n=i[2],h=i[3],d=i[4],p=i[5]),u=yt.svgLine(r,o,n,h,d,p,e)),_.d=u),l===et.CANVAS||l===et.WEBGL?a.forEach(function(t,e){var r,i,o,n,a,s=g[e],h=0<s&&"radial"===t.k&&Array.isArray(t.v);0<s&&"none"!==t&&(f.__preSetCanvas(l,c,{stroke:t,strokeWidth:s,strokeDasharray:m[e],strokeLinecap:y[e],strokeLinejoin:x[e],strokeMiterlimit:E[e]}),h&&(c.strokeStyle=t.v[0]),c.beginPath(),T?_.x1.forEach(function(t,e){var r=_.x2[e],i=_.y1[e],o=_.y2[e],n=_.controlA[e],a=_.controlB[e],s=_.start[e],e=_.end[e],h=Cy(n,a);0===s&&1===e||(t=(s=Zt(ky(t,i,r,i,n,a,h,s,e,_.len),6))[0],i=s[1],r=s[2],i=s[3],n=s[4],a=s[5]),yt.canvasLine(c,t,i,r,o,n,a,h,b,M)}):(s=Cy(_.controlA,_.controlB),e=_.x1,h=_.y1,t=_.x2,o=_.y2,n=_.controlA,a=_.controlB,i=_.start,r=_.end,0===i&&1===r||(e=(i=Zt(ky(e,h,t,o,n,a,s,i,r,_.len),6))[0],h=i[1],t=i[2],o=i[3],n=i[4],a=i[5]),yt.canvasLine(c,e,h,t,o,n,a,s,b,M)),c.stroke(),c.closePath())}):l===et.SVG&&a.forEach(function(t,e){var r=g[e],i=0<r&&"radial"===t.k&&Array.isArray(t.v),i=[["d",_.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];f.__propsStrokeStyle(i,v[e],y[e],x[e],E[e]),f.addGeom("path",i)}),t}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var n=this.isMulti,t=this.__cacheProps,e=this.root,r=this.__sx3,i=this.__sy3,a=this.currentStyle,_=a[xy],f=a[Ey],a=a[My],r=(this.buildCache(r,i),t.x1),d=t.y1,p=t.x2,g=t.y2,m=t.controlA,v=t.controlB,s=P(N(A.prototype),"bbox",this),o=0;_.forEach(function(t){o=t[1]===Ay?Math.max(t[0]*e.computedStyle[by],o):t[1]===Ry?Math.max(t[0]*e.width*.01,o):t[1]===Oy?Math.max(t[0]*e.height*.01,o):t[1]===wy||t[1]===Sy?Math.max(t[0]*Math.max(e.width,e.height)*.01,o):Math.max(t[0],o)});var i=Zt(this.__spreadBbox(f,a),4),h=i[0],l=i[1],c=i[2],u=i[3];return h-=o,l-=o,c+=o,u+=o,n||(r=[r],p=[p],d=[d],g=[g],m=[m],v=[v]),r.forEach(function(t,e){var r,i=d[e],o=p[e],n=g[e],a=m[e],e=v[e];(Ty(a)||a.length<2)&&(Ty(e)||e.length<2)?(s[0]=Math.min(s[0],t+h),s[0]=Math.min(s[0],o+h),s[1]=Math.min(s[1],i+l),s[1]=Math.min(s[1],n+l),s[2]=Math.max(s[2],t+c),s[2]=Math.max(s[2],o+c),s[3]=Math.max(s[3],i+u),s[3]=Math.max(s[3],n+u)):Ty(a)||a.length<2?(r=nt.bboxBezier(t,i,e[0],e[1],o,n),s[0]=Math.min(s[0],r[0]+h),s[0]=Math.min(s[0],r[2]+h),s[1]=Math.min(s[1],r[1]+l),s[1]=Math.min(s[1],r[3]+l),s[2]=Math.max(s[2],r[0]+c),s[2]=Math.max(s[2],r[2]+c),s[3]=Math.max(s[3],r[1]+u),s[3]=Math.max(s[3],r[3]+u)):Ty(e)||e.length<2?(r=nt.bboxBezier(t,i,a[0],a[1],o,n),s[0]=Math.min(s[0],r[0]+h),s[0]=Math.min(s[0],r[2]+h),s[1]=Math.min(s[1],r[1]+l),s[1]=Math.min(s[1],r[3]+l),s[2]=Math.max(s[2],r[0]+c),s[2]=Math.max(s[2],r[2]+c),s[3]=Math.max(s[3],r[1]+u),s[3]=Math.max(s[3],r[3]+u)):(r=nt.bboxBezier(t,i,a[0],a[1],e[0],e[1],o,n),s[0]=Math.min(s[0],r[0]+h),s[0]=Math.min(s[0],r[2]+h),s[1]=Math.min(s[1],r[1]+l),s[1]=Math.min(s[1],r[3]+l),s[2]=Math.max(s[2],r[0]+c),s[2]=Math.max(s[2],r[2]+c),s[3]=Math.max(s[3],r[1]+u),s[3]=Math.max(s[3],r[3]+u))}),s}}]),A}(),ki=A.STYLE_KEY,Ly=ki.STROKE_WIDTH,Dy=ki.BOX_SHADOW,Ny=ki.FONT_SIZE,Py=ki.FILTER,Fy=xt.isNil,By=r.REM,Yy=r.VW,Hy=r.VH,Gy=r.VMAX,Wy=r.VMIN;function Uy(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function Xy(t,c){var e=[],r=0,i=[];if(c)r=[],t.forEach(function(t){t=Xy(t);e.push(t.list),r.push(t.total),i.push([0].concat(t.increase))});else if(Array.isArray(t)){r=0,i.push(0);for(var o=0,n=0,u=t.length;n<u;n++){var _=t[n];if(Array.isArray(_)){o=n;break}}for(var a=t[o],f=o+1,d=t.length;f<d;f++){var s,h,l=t[f];Array.isArray(l)&&(2===l.length?(h=Math.abs(l[0]-a[0]),s=Math.abs(l[1]-a[1]),h=Math.sqrt(Math.pow(h,2)+Math.pow(s,2)),e.push(h),r+=h,i.push(r),a=l):4===l.length?(s=nt.bezierLength([a,[l[0],l[1]],[l[2],l[3]]],2),e.push(s),r+=s,i.push(r),a=[l[2],l[3]]):6===l.length&&(h=nt.bezierLength([a,[l[0],l[1]],[l[2],l[3]],[l[4],l[5]]],3),e.push(h),r+=h,i.push(r),a=[l[4],l[5]]))}}return{list:e,total:r,increase:i}}function Vy(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var o=r+(i-r>>1);return t[o]===e?o:t[o]>e?Vy(t,e,r,Math.max(o-1,r)):Vy(t,e,Math.min(o+1,i),i)}function Ky(t,e,r,c){var i=2<arguments.length&&void 0!==r?r:0,o=3<arguments.length&&void 0!==c?c:1;if(0===i&&1===o)return t;if(i===o)return[];for(o<i&&(i=(r=[o,i])[0],o=r[1]);1<o-i;)o--;for(;o<0||i<0;)o++,i++;for(;1<=o&&1<=i;)o--,i--;var n,a,s,h,l,u=t.length,_=(t=xt.clone(t),[]),c=1<i?i-1:i,r=1<o?o-1:o,f=Vy(e.increase,c*e.total,0,u-1),d=Vy(e.increase,r*e.total,0,u-1),p=i<0,g=1<o,m=1;(r*=e.total)>e.increase[d]&&(a=t[d].slice(t[d].length-2),s=t[d+1],l=e.list[d],m=r=(r-e.increase[d])/l,2===s.length?(l=s[0]-a[0],n=s[1]-a[1],n=g?[a[0]+r*l,a[1]+r*n]:[s[0]-(r=1-r)*l,s[1]-r*n]):4===s.length?n=[(l=nt.sliceBezier([a,[s[0],s[1]],[s[2],s[3]]],r))[1][0],l[1][1],l[2][0],l[2][1]]:6===s.length&&(n=[(l=nt.sliceBezier([a,[s[0],s[1]],[s[2],s[3]],[s[4],s[5]]],r))[1][0],l[1][1],l[2][0],l[2][1],l[3][0],l[3][1]])),(c*=e.total)>e.increase[f]&&(a=t[f].slice(t[f].length-2),s=e.list[f],f!==d||p||g||1===m||(s*=m,n&&(h=n)),h=h||t[f+1],r=(c-e.increase[f])/s,2===h.length?(l=h[0]-a[0],m=h[1]-a[1],p?_.push([h[0]-(r=1-r)*l,h[1]-r*m]):_.push([a[0]+r*l,a[1]+r*m]),_.push(h)):4===h.length?(c=nt.sliceBezier([[h[2],h[3]],[h[0],h[1]],a],1-r).reverse(),_.push(c[0]),_.push([c[1][0],c[1][1],c[2][0],c[2][1]]),f!==d||p||g||(n=null)):6===h.length&&(e=nt.sliceBezier([[h[4],h[5]],[h[2],h[3]],[h[0],h[1]],a],1-r).reverse(),_.push(e[0]),_.push([e[1][0],e[1][1],e[2][0],e[2][1],h[4],h[5]]),f!==d||p||g||(n=null)));for(var v=f+2;v<=d+(p||g?u:0);v++)_.push(t[v%u]);return n&&_.push(n),_}var zy=function(){p(l,ep);var s=m(l);function l(t,e){var r,i,o;if(f(this,l),(r=s.call(this,t,e)).isMulti){if(r.__points=[[]],r.__controls=[[]],r.__start=[0],r.__end=[1],Array.isArray(e.start)){r.__start=e.start.map(function(t){return parseFloat(t)||0});for(var n=r.__start.length;n<r.__points.length;n++)r.__start.push(0)}else Fy(e.start)||(i=parseFloat(e.start)||0,r.__start=r.__points.map(function(){return i}));if(Array.isArray(e.end)){r.__end=e.end.map(function(t){t=parseFloat(t);return t=isNaN(t)?1:t});for(var a=r.__end.length;a<r.__points.length;a++)r.__end.push(1)}else Fy(e.end)||(o=parseFloat(e.end),isNaN(o)&&(o=1),r.__end=r.__points.map(function(){return o}))}else r.__points=[],r.__controls=[],r.__start=0,r.__end=1,Fy(e.start)||(r.__start=parseFloat(e.start)||0),Fy(e.end)||(t=parseFloat(e.end),isNaN(t)&&(t=1),r.__end=t);return Array.isArray(e.controls)&&(r.__controls=e.controls),Array.isArray(e.points)&&(r.__points=e.points),r}return g(l,[{key:"__getPoints",value:function(n,a,s,h,t,l){return t.map(function(t,e){if(Array.isArray(t)){var r=t.length;if(l){if(0!==r&&2!==r&&4!==r)return}else if(0!==r&&2!==r)return;for(var i=[],o=0;o<r;o++)o%2==0?i.push(n+t[o]*s):i.push(a+t[o]*h);return i}})}},{key:"__reprocessing",value:function(t){return t}},{key:"__needRebuildSE",value:function(){}},{key:"buildCache",value:function(e,r){var t,i,o,c=this,n=this.width,a=this.height,s=this.points,u=this.controls,_=this.start,f=this.end,h=this.__cacheProps,l=this.isMulti;return Fy(h.points)&&(t=!0,h.points=l?s.map(function(t){if(Array.isArray(t))return c.__getPoints(e,r,n,a,t)}):this.__getPoints(e,r,n,a,s)),Fy(h.controls)&&(t=!0,h.controls=l?u.map(function(t){return Array.isArray(t)?c.__getPoints(e,r,n,a,t,!0):t}):this.__getPoints(e,r,n,a,u,!0)),Fy(h.start)&&(i=!0,h.start=_),Fy(h.end)&&(i=!0,h.end=f),this.__needRebuildSE(h)&&(i=!0),t&&(s=h.points,o=h.controls,h.list2=l?s.map(function(t,e){var r=o[e];if(Array.isArray(t))return t.map(function(t,e){return e?Uy(t,r&&r[e-1]):t})}):s.map(function(t,e){return e?Uy(t,o[e-1]):t}),h.len=Xy(h.list2,l)),(t||i)&&(h.list=l?h.list2.map(function(t,e){if(Array.isArray(t))return Ky(t,{list:(t=h.len).list[e],total:t.total[e],increase:t.increase[e]},h.start[e],h.end[e])}):Ky(h.list2,h.len,h.start,h.end),h.list=this.__reprocessing(h.list,l)),t||i}},{key:"render",value:function(t,e,r,i,o,n){e=P(N(l.prototype),"render",this).call(this,t,e,r,i,o,n);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var n,a,e,s,h,t,u,r,i,_,f,d,p,o,g;return this.__bbox||(n=this.isMulti,a=this.__cacheProps,e=this.root,i=this.__sx3,o=this.__sy3,s=(t=this.currentStyle)[Ly],h=t[Dy],t=t[Py],this.buildCache(i,o),u=P(N(l.prototype),"bbox",this),r=0,s.forEach(function(t){r=t[1]===By?Math.max(t[0]*e.computedStyle[Ny],r):t[1]===Yy?Math.max(t[0]*e.width*.01,r):t[1]===Hy?Math.max(t[0]*e.height*.01,r):t[1]===Gy||t[1]===Wy?Math.max(t[0]*Math.max(e.width,e.height)*.01,r):Math.max(t[0],r)}),i=Zt(this.__spreadBbox(h,t),4),_=i[0],f=i[1],d=i[2],p=i[3],_-=r,f-=r,d+=r,p+=r,o=a.points,g=a.controls,n||(o=[o],g=[g]),o.forEach(function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=g[e]||[],e=Zt(t[0],2),i=e[0],o=e[1],n=1,c=t.length;n<c;n++){var a,s=Zt(t[n],2),h=s[0],s=s[1],l=r[n-1];l&&4===l.length?(a=nt.bboxBezier(i,o,l[0],l[1],l[2],l[3],h,s),u[0]=Math.min(u[0],a[0]+_),u[1]=Math.min(u[1],a[1]+f),u[2]=Math.max(u[2],a[2]+d),u[3]=Math.max(u[3],a[3]+p)):l&&2===l.length?(a=nt.bboxBezier(i,o,l[0],l[1],h,s),u[0]=Math.min(u[0],a[0]+_),u[1]=Math.min(u[1],a[1]+f),u[2]=Math.max(u[2],a[2]+d),u[3]=Math.max(u[3],a[3]+p)):(u[0]=Math.min(u[0],i+_),u[1]=Math.min(u[1],o+f),u[2]=Math.max(u[2],i+d),u[3]=Math.max(u[3],o+p)),i=h,o=s}}),this.__bbox=u),this.__bbox}}]),l}(),e=function(){p(a,zy);var r=m(a);function a(t,e){return f(this,a),t=r.call(this,t,e),e.booleanOperations&&(t.__booleanOperations=e.booleanOperations),t}return g(a,[{key:"__getPoints",value:function(t,e,r,i,o,n){t=P(N(a.prototype),"__getPoints",this).call(this,t,e,r,i,o,n);return n||t.push(t[0]),t}},{key:"__reprocessing",value:function(n,t){if(!t)return n;var a=this.booleanOperations,s=n.length;if(!Array.isArray(a)&&a)for(var e=a,a=[a],r=1;r<s-1;r++)a.push(e);if(Array.isArray(a)&&a.length){t=function(){for(var t,e=[],r=0;r<s-1;r++){var i=n[r],o=n[r+1];switch(a[r]){case"intersection":i&&i.length&&o&&o.length?Dn([i],[o]).forEach(function(t){e.push(t[0])}):e.push(null),t=!0;break;case"union":i&&i.length||o&&o.length?i&&i.length?o&&o.length?Cn([i],[o]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(o):e.push(null),t=!0;break;case"diff":i&&i.length?o&&o.length?kn([i],[o]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(null),t=!0;break;case"xor":i&&i.length||o&&o.length?i&&i.length?o&&o.length?Ln([i],[o]).forEach(function(t){e.push(t[0])}):e.push(i):e.push(o):e.push(null),t=!0;break;default:e.push(n[r]),t=!1}}return t||e.push(n[s-1]),{v:e}}();if("object"===mt(t))return t.v}return n}},{key:"__needRebuildSE",value:function(t){if(xt.isNil(t.booleanOperations))return t.booleanOperations=!0}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),a}(),a=A.STYLE_KEY,jy=a.STROKE_WIDTH,$y=a.BOX_SHADOW,Zy=a.FONT_SIZE,qy=a.FILTER,Jy=xt.isNil,Qy=nt.sectorPoints,tx=r.REM,ex=r.VW,rx=r.VH,ix=r.VMAX,ox=r.VMIN;function nx(t,e){return t=parseFloat(t),t=isNaN(t)?e:t}var i=function(){p(R,ep);var r=m(R);function R(t,e){return f(this,R),(t=r.call(this,t,e)).isMulti?(t.__begin=[0],t.__end=[0],t.__r=[1],Array.isArray(e.begin)&&(t.__begin=e.begin.map(function(t){return nx(t,0)})),Array.isArray(e.end)&&(t.__end=e.end.map(function(t){return nx(t,0)})),Array.isArray(e.r)&&(t.__r=e.r.map(function(t){return nx(t,1)})),Array.isArray(e.edge)&&(t.__edge=e.edge.map(function(t){return!!t})),Array.isArray(e.closure)&&(t.__closure=e.closure.map(function(t){return!!t}))):(t.__begin=t.__end=0,t.__r=1,t.__edge=!1,t.__closure=!1,Jy(e.begin)||(t.__begin=nx(e.begin,0)),Jy(e.end)||(t.__end=nx(e.end,0)),Jy(e.r)||(t.__r=nx(e.r,1)),Jy(e.edge)||(t.__edge=!!e.edge),Jy(e.closure)||(t.__closure=!!e.closure)),t}return g(R,[{key:"buildCache",value:function(i,o,t){var e,n=this.width,r=this.begin,c=this.end,a=this.r,s=this.edge,u=this.closure,h=this.__cacheProps,l=this.isMulti;return(Jy(h.begin)||t)&&(e=!0,h.begin=(r||0)%360),(Jy(h.end)||t)&&(e=!0,h.end=(c||0)%360),(Jy(h.r)||t)&&(e=!0,h.r=l?a.map(function(t){return t*n*.5}):a*n*.5),a=h.r,(Jy(h.edge)||t)&&(e=!0,h.edge=s),(Jy(h.closure)||t)&&(e=!0,h.closure=u),e&&(l?(h.list=[],h.sList=[],r.forEach(function(t,e){var r=Jy(a[e])?.5*n:a[e],r=Qy(i,o,r,parseFloat(t||0)%360,parseFloat(c[e]||0)%360),t=r.slice(0);u[e]?(r.push(r[0].slice(0)),s&&t.push(t[0].slice(0))):(r.unshift([i,o]),r.push([i,o]),s&&(t.unshift([i,o]),t.push([i,o]))),h.list.push(r),h.sList.push(t)})):(l=(t=Qy(i,o,a,parseFloat(r||0),parseFloat(c||0))).slice(0),u?(t.push(t[0].slice(0)),s&&l.push(l[0].slice(0))):(t.unshift([i,o]),t.push([i,o]),s&&(l.unshift([i,o]),l.push([i,o]))),h.list=t,h.sList=l)),e}},{key:"render",value:function(t,e,r,i,c,u){e=P(N(R.prototype),"render",this).call(this,t,e,r,i,c,u);if(e.break)return e;this.buildCache(e.cx,e.cy),r=e.ctx;var o=e.fill,_=e.fillRule,n=e.stroke,f=e.strokeWidth,d=e.strokeDasharray,p=e.strokeDasharrayStr,g=e.strokeLinecap,m=e.strokeLinejoin,v=e.strokeMiterlimit,y=e.dx,x=e.dy,i=this.__cacheProps,E=i.list,b=i.sList,M=this.isMulti;if(o.length<=1&&n.length<=1){c={fill:o[0],fillRule:_[0],stroke:n[0],strokeWidth:f[0],strokeDasharray:d[0],strokeDasharrayStr:p[0],strokeLinecap:g[0],strokeLinejoin:m[0],strokeMiterlimit:v[0],dx:y,dy:x};this.__renderOneSector(t,r,M,E,b,c)}else{for(var a=0,T=o.length;a<T;a++){var s=o[a];s&&(s={fill:s,fillRule:_[a],dx:y,dy:x},this.__renderOneSector(t,r,M,E,b,s))}for(var h=0,A=n.length;h<A;h++){var l=n[h];l&&(l={stroke:l,strokeWidth:f[h],strokeDasharray:d[h],strokeDasharrayStr:p[h],strokeLinecap:g[h],strokeLinejoin:m[h],strokeMiterlimit:v[h],dx:y,dy:x},this.__renderOnePolygon(t,r,M,E,b,l))}}return e}},{key:"__renderOneSector",value:function(t,e,r,i,o,n){var a=n.fill,s=n.stroke,h=n.strokeWidth,l="conic"===a.k,c="conic"===s.k,u="radial"===a.k&&Array.isArray(a.v),_=0<h&&"radial"===s.k&&Array.isArray(s.v);l||c?(l?this.__conicGradient(t,e,i,r,n):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),0<h&&c?De.warn("Stroke style can not use conic-gradient"):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,o,n,!1,!0)):u||_?(u?this.__radialEllipse(t,e,i,r,n,"fill"):a&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0),0<h&&_?(De.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke=n.stroke.v[0],this.__drawPolygon(t,e,r,o,n,!1,!0)):0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,o,n,!1,!0)):(a&&"none"!==a&&this.__drawPolygon(t,e,r,i,n,!0,!1),0<h&&s&&"none"!==s&&this.__drawPolygon(t,e,r,o,n,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,o,n,a,s,h){t?(t=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",o]],this.__propsStrokeStyle(t,n,a,s,h),this.addGeom("path",t)):(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),0<o&&(t=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",o]],this.__propsStrokeStyle(t,n,a,s,h),this.addGeom("path",t)))}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){var e,t,c,r,i,o,u,n,a,s,h,l;return this.__bbox||(a=this.isMulti,s=this.__cacheProps,e=this.root,h=this.__sx3,r=this.__sy3,t=this.width,i=this.height,u=(n=this.currentStyle)[jy],l=n[$y],n=n[qy],this.buildCache(h=h+.5*t,t=r+.5*i),r=0,r=a?(c=0,s.r.forEach(function(t){c=Math.max(t,c)}),c):s.r,i=P(N(R.prototype),"bbox",this),o=0,u.forEach(function(t){o=t[1]===tx?Math.max(t[0]*e.computedStyle[Zy],o):t[1]===ex?Math.max(t[0]*e.width*.01,o):t[1]===rx?Math.max(t[0]*e.height*.01,o):t[1]===ix||t[1]===ox?Math.max(t[0]*Math.max(e.width,e.height)*.01,o):Math.max(t[0],o)}),s=(a=Zt(this.__spreadBbox(l,n),4))[0],u=a[1],l=a[2],n=a[3],a=h-r+(s-=o),s=h+r+(l+=o),h=t-r+(u-=o),l=t+r+(n+=o),i[0]=Math.min(i[0],a),i[1]=Math.min(i[1],h),i[2]=Math.max(i[2],s),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),R}(),Ur=A.STYLE_KEY,ax=Ur.STROKE_WIDTH,sx=Ur.BOX_SHADOW,hx=Ur.FONT_SIZE,lx=Ur.FILTER,cx=xt.isNil,ux=r.REM,_x=r.VW,fx=r.VH,dx=r.VMAX,px=r.VMIN;function gx(t,e,r,i,o,n){o=4<arguments.length&&void 0!==o?o:0,n=5<arguments.length&&void 0!==n?n:0;if(0===o||0===n)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];var a=o*nt.H,s=n*nt.H;return[[t+o,e],[t+r-o,e],[t+r+a-o,e,t+r,e+n-s,t+r,e+n],[t+r,e+i-n],[t+r,e+i+s-n,t+r+a-o,e+i,t+r-o,e+i],[t+o,e+i],[t+o-a,e+i,t,e+i+s-n,t,e+i-n],[t,e+n],[t,e+n-s,t+o-a,e,t+o,e]]}function mx(t){return t=parseFloat(t),t=isNaN(t)?0:t}var re=function(){p(u,ep);var r=m(u);function u(t,e){return f(this,u),(t=r.call(this,t,e)).isMulti?(t.__rx=[0],t.__ry=[0],Array.isArray(e.rx)&&(t.__rx=e.rx.map(mx)),Array.isArray(e.ry)&&(t.__ry=e.ry.map(mx))):(t.__rx=t.__ry=0,cx(e.rx)||(t.__rx=mx(e.rx)),cx(e.ry)||(t.__ry=mx(e.ry))),t}return g(u,[{key:"buildCache",value:function(r,i,t){var e,o,n=this.width,a=this.height,s=this.rx,c=this.ry,h=this.__cacheProps,l=this.isMulti;return(cx(h.rx)||t)&&(e=!0,h.rx=l?s.map(function(t){return Math.min(t,.5)*n}):Math.min(s,.5)*n),(cx(h.ry)||t)&&(e=!0,h.ry=l?s.map(function(t){return Math.min(t,.5)*a}):Math.min(c,.5)*a),e&&(t=h.rx,o=h.ry,h.list=l?t.map(function(t,e){return gx(r,i,n,a,t,o[e])}):gx(r,i,n,a,t,o)),e}},{key:"render",value:function(t,e,r,i,o,n){e=P(N(u.prototype),"render",this).call(this,t,e,r,i,o,n);return e.break||(this.buildCache(e.sx3,e.sy3),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var e,t,r,i,c,o,n,a,s,h,l;return this.__bbox||(e=this.root,t=this.__sx3,r=this.__sy3,i=this.width,c=this.height,l=(s=this.currentStyle)[ax],a=s[sx],s=s[lx],this.buildCache(t,r),o=P(N(u.prototype),"bbox",this),n=0,l.forEach(function(t){n=t[1]===ux?Math.max(t[0]*e.computedStyle[hx],n):t[1]===_x?Math.max(t[0]*e.width*.01,n):t[1]===fx?Math.max(t[0]*e.height*.01,n):t[1]===dx||t[1]===px?Math.max(t[0]*Math.max(e.width,e.height)*.01,n):Math.max(t[0],n)}),a=(l=Zt(this.__spreadBbox(a,s),4))[0],s=l[1],h=l[2],l=l[3],a-=n,s-=n,h+=n,l+=n,o[0]=Math.min(o[0],t+a),o[1]=Math.min(o[1],r+s),o[2]=Math.max(o[2],t+i+h),o[3]=Math.max(o[3],r+c+l),this.__bbox=o),this.__bbox}}]),u}(),s=A.STYLE_KEY,vx=s.STROKE_WIDTH,yx=s.BOX_SHADOW,xx=s.FONT_SIZE,Ex=s.FILTER,bx=xt.isNil,Mx=r.REM,Tx=r.VW,Ax=r.VH,Rx=r.VMAX,Ox=r.VMIN;function wx(t){return t=parseFloat(t),t=isNaN(t)?1:t}var t=function(){p(_,ep);var r=m(_);function _(t,e){return f(this,_),(t=r.call(this,t,e)).isMulti?(t.__r=[1],Array.isArray(e.r)?t.__r=e.r.map(wx):bx(e.r)||(t.__r=wx(e.r))):(t.__r=1,bx(e.r)||(t.__r=wx(e.r))),t}return g(_,[{key:"buildCache",value:function(e,r,t){var i=this.width,o=this.r,n=this.__cacheProps,a=this.isMulti;(bx(n.r)||t)&&(a?(n.r=o.map(function(t){return t*i*.5}),n.list=n.r.map(function(t){return nt.ellipsePoints(e,r,t,t)})):(n.r=o*i*.5,n.list=nt.ellipsePoints(e,r,n.r,n.r)))}},{key:"render",value:function(t,e,r,i,o,n){e=P(N(_.prototype),"render",this).call(this,t,e,r,i,o,n);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){var e,t,c,r,i,o,u,n,a,s,h,l;return this.__bbox||(a=this.isMulti,s=this.__cacheProps,e=this.root,h=this.__sx3,r=this.__sy3,t=this.width,i=this.height,u=(n=this.currentStyle)[vx],l=n[yx],n=n[Ex],this.buildCache(h=h+.5*t,t=r+.5*i),r=0,r=a?(c=0,s.r.forEach(function(t){c=Math.max(t,c)}),c):s.r,i=P(N(_.prototype),"bbox",this),o=0,u.forEach(function(t){o=t[1]===Mx?Math.max(t[0]*e.computedStyle[xx],o):t[1]===Tx?Math.max(t[0]*e.width*.01,o):t[1]===Ax?Math.max(t[0]*e.height*.01,o):t[1]===Rx||t[1]===Ox?Math.max(t[0]*Math.max(e.width,e.height)*.01,o):Math.max(t[0],o)}),s=(a=Zt(this.__spreadBbox(l,n),4))[0],u=a[1],l=a[2],n=a[3],a=h-r+(s-=o),s=h+r+(l+=o),h=t-r+(u-=o),l=t+r+(n+=o),i[0]=Math.min(i[0],a),i[1]=Math.min(i[1],h),i[2]=Math.max(i[2],s),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),_}(),ki=A.STYLE_KEY,Sx=ki.STROKE_WIDTH,Ix=ki.BOX_SHADOW,Cx=ki.FONT_SIZE,kx=ki.FILTER,Lx=xt.isNil,Dx=r.REM,Nx=r.VW,Px=r.VH,Fx=r.VMAX,Bx=r.VMIN;function Yx(t){return t=parseFloat(t),t=isNaN(t)?1:t}var a=function(){p(d,ep);var r=m(d);function d(t,e){return f(this,d),(t=r.call(this,t,e)).isMulti?(t.__rx=[1],t.__ry=[1],Array.isArray(e.rx)?t.__rx=e.rx.map(Yx):Lx(e.rx)||(t.__rx=[Yx(e.rx)]),Array.isArray(e.ry)?t.__ry=e.ry.map(Yx):Lx(e.ry)||(t.__ry=[Yx(e.ry)])):(t.__rx=1,Lx(e.rx)||(t.__rx=Yx(e.rx)),t.__ry=1,Lx(e.ry)||(t.__ry=Yx(e.ry))),t}return g(d,[{key:"buildCache",value:function(r,i,t){var e,o,n=this.width,a=this.height,s=this.rx,c=this.ry,h=this.__cacheProps,l=this.isMulti;return(Lx(h.rx)||t)&&(e=!0,h.rx=l?s.map(function(t){return t*n*.5}):s*n*.5),(Lx(h.ry)||t)&&(e=!0,h.ry=l?c.map(function(t){return t*a*.5}):c*a*.5),e&&(s=h.rx,o=h.ry,h.list=l?s.map(function(t,e){return nt.ellipsePoints(r,i,t,o[e])}):nt.ellipsePoints(r,i,s,o)),e}},{key:"render",value:function(t,e,r,i,o,n){e=P(N(d.prototype),"render",this).call(this,t,e,r,i,o,n);return e.break||(this.buildCache(e.cx,e.cy),r=e.ctx,this.__renderPolygon(t,r,e)),e}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){var r,e,t,c,u,_,i,o,f,n,a,s,h,l;return this.__bbox||(n=this.isMulti,r=this.__cacheProps,e=this.root,s=this.__sx3,h=this.__sy3,t=this.width,i=this.height,a=(l=this.currentStyle)[Sx],f=l[Ix],l=l[kx],this.buildCache(s=s+.5*t,t=h+.5*i),_=h=0,_=n?(u=c=0,r.rx.forEach(function(t,e){c=Math.max(t,c),u=Math.max(_,r.ry[e])}),h=c,u):(h=r.rx,r.ry),i=P(N(d.prototype),"bbox",this),o=0,a.forEach(function(t){o=t[1]===Dx?Math.max(t[0]*e.computedStyle[Cx],o):t[1]===Nx?Math.max(t[0]*e.width*.01,o):t[1]===Px?Math.max(t[0]*e.height*.01,o):t[1]===Fx||t[1]===Bx?Math.max(t[0]*Math.max(e.width,e.height)*.01,o):Math.max(t[0],o)}),a=(n=Zt(this.__spreadBbox(f,l),4))[0],f=n[1],l=n[2],n=n[3],a=s-h+(a-=o),s=s+h+(l+=o),h=t-_+(f-=o),l=t+_+(n+=o),i[0]=Math.min(i[0],a),i[1]=Math.min(i[1],h),i[2]=Math.max(i[2],s),i[3]=Math.max(i[3],l),this.__bbox=i),this.__bbox}}]),d}(),Hx={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},Gx={os:"offset",e:"easing"},Wx={value:"v",options:"o"},Ux={},Xx={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},Vx={},Ur=(ur.DOM_KEY_SET.concat(ur.GEOM_KEY_SET).forEach(function(t){var e;Hx.hasOwnProperty(t)?Gx[Hx[t]]=t:(e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase(),Hx[t]=e,Gx[e]=t)}),Object.keys(Wx).forEach(function(t){Ux[Wx[t]]=t}),Object.keys(Xx).forEach(function(t){Vx[Xx[t]]=t}),{fullCssProperty:Hx,abbrCssProperty:Gx,fullAnimate:Wx,abbrAnimate:Ux,fullAnimateOption:Xx,abbrAnimateOption:Vx}),Kx=Jt.TYPE_VD,zx=Jt.TYPE_GM,jx=Jt.TYPE_CP,$x=xt.isNil,Zx=xt.isFunction,qx=xt.isPrimitive,Jx=xt.clone,Qx=xt.extend,tE=Ur.abbrCssProperty,eE=Ur.abbrAnimateOption,rE=Ur.abbrAnimate;function iE(r,i){r&&Object.keys(r).forEach(function(t){var e;0===t.indexOf("var-")?(e=t.slice(4),i.hasOwnProperty(e)&&(e=i[e],r["var-"+e]=r[t])):i.hasOwnProperty(t)&&(e=i[t],r[e]=r[t],delete r[t])})}function oE(h,l){var t;h&&l&&(h.hasOwnProperty("vars")?(t=h.vars,Array.isArray(t)||(t=[t]),Array.isArray(t)&&t.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.length&&"library"!==r[0]&&l.hasOwnProperty(e))for(var i=h,o=0,n=r.length;o<n;o++){var a=r[o];if(!i.hasOwnProperty(a)&&o!==n-1)return void De.error("Slot miss "+a);if(o===n-1){var s=l[e];if(void 0===s)return;Zx(s)&&(s=s(i(a))),i[a]=s}else i=i[a]}})):Object.keys(h).forEach(function(t){if(0===t.indexOf("var-")){var e=h[t];if(e){var r=t.slice(4);if(r&&e.id&&l.hasOwnProperty(e.id)){var i=l[e.id];if(void 0!==i){var o=h;if(-1<r.indexOf(".")){for(var n=r.split("."),a=n.length,s=0;s<a-1;s++){if(!o[r=n[s]])return void De.warn("parseJson vars is not exist: "+e.id+", "+t+", "+n.slice(0,s).join("."));o=o[r]}r=n[a-1]}Zx(i)&&(i=i(e)),o[r]=i}}}}}))}function nE(e,t,c,o,r){var i=4<arguments.length&&void 0!==r?r:{};if(qx(t)||t instanceof k||t instanceof Ns)return t;if(Array.isArray(t))return t.map(function(t){return nE(e,t,c,o,i)});var n,a,r=t.libraryId;if(!$x(r)){var s=i[r];if(!s)throw new Error("Link library miss id: "+r);a=s,(n=t).tagName=a.tagName,n.props=Jx(a.props),n.children=a.children,n.library=a.library,Object.keys(a).forEach(function(t){0!==t.indexOf("var-")||n.hasOwnProperty(t)||(n[t]=a[t])}),n.libraryId=null,(r=n.init)&&(h=(s=n.props=n.props||{}).style,Qx(s,r),h&&(Qx(h,r.style),s.style=h),n.init=null),t.libraryId=null}var u,_,f,r=t.library,h=(Array.isArray(r)&&(i={},r.forEach(function(t){var e=i,r=t.id;if($x(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}),u=t,_=i,(f=o.vars)&&(u.hasOwnProperty("vars")?(s=u.vars,Array.isArray(s)||(s=[s]),Array.isArray(s)&&s.forEach(function(t){var e=t.id,r=t.member;if(Array.isArray(r)||(r=[r]),Array.isArray(r)&&1<r.length&&f.hasOwnProperty(e)&&"library"===r[0])for(var i=_,o=1,n=r.length;o<n;o++){var a,s,h=r[o];if(!i.hasOwnProperty(h)&&o!==n-1)return void De.error("Library slot miss "+h);o===n-1?(a=f[e],Zx(a)&&(a=a(i(h))),s=i[h],i[h]=1===o?Object.assign({id:s.id,tagName:s.tagName},a):a):i=i[h]}})):Object.keys(u).forEach(function(t){var e,r;0===t.indexOf("var-library.")&&(e=u[t],delete u[t],!e||(t=t.slice(12))&&e.id&&f.hasOwnProperty(e.id)&&(r=f[e.id],(r=Zx(r)?r(e):r)&&r.tagName&&(_[t]=Object.assign({id:t},r))))})),t.library=null),t.tagName),r=t.props,r=void 0===r?{}:r,d=t.children,d=void 0===d?[]:d,l=t.animate,l=void 0===l?[]:l;if(!h)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var p,g=r.style;if(!1!==o.abbr&&iE(g,tE),oE(g,o.vars),oE(r,o.vars),oE(t,o.vars),!Array.isArray(d))throw new Error("children must be an array");return t="$"===h.charAt(0)?e.createGm(h,r):/^[A-Z]/.test(h)?(g=Ns.getRegister(h),e.createCp(g,r,d.map(function(t){return t&&-1<[Kx,zx,jx].indexOf(t.$$type)?t:nE(e,t,c,o,i)}))):e.createVd(h,r,d.map(function(t){return t&&-1<[Kx,zx,jx].indexOf(t.$$type)?t:nE(e,t,c,o,i)})),l&&((l=Array.isArray(l)?l:[l]).forEach(function(t){!1!==o.abbr&&iE(t,rE);var e,r,i=t.value,t=t.options;Array.isArray(i)&&i.length&&(p=!0,i.forEach(function(t){!1!==o.abbr&&iE(t,tE),oE(t,o.vars)})),t&&(!1!==o.abbr&&iE(t,eE),oE(t,o.vars),e=t,r=o,["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach(function(t){r.hasOwnProperty(t)&&(e[t]=r[t])}))}),p&&c.push({animate:l,target:t})),t}var aE={parse:function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(e){var o=(e=i.singleton||e.singleton?e:xt.clone(e)).fonts,o=(o&&(o=Array.isArray(o)?o:[o]).forEach(function(t){var e=t.fontFamily,t=t.data;e&&t&&vt.register(e,t)}),!1===e.abbr&&(i.abbr=!1),!1!==i.abbr&&De.warn("Abbr in json is deprecated"),De.isDom(r)||(i=r||{},r=null),[]),n=nE(t,e,o,i);if(r){e=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(e))throw new Error("Parse dom must be canvas/svg");e=i.controller instanceof Kp?i.controller:n.animateController;t.render(n,r),o.forEach(function(t){t.target=t.target.vd}),!1!==i.autoPlay?(e.__records=e.__records.concat(o),e.__playAuto()):(e.__records2=e.__records2.concat(o),e.init(e.__records2,e.list2))}else o.length&&(n.__animateRecords={options:i,list:o,controller:i.controller instanceof Kp?i.controller:null});return n}},loadAndParse:function(o,e,c,r){var i,t,n=e.fonts,a=e.components,s=e.imgs,h=[],l=[],u=[],_=(n&&(n=Array.isArray(n)?n:[n]).forEach(function(t){t=t.url;t&&h.push(t)}),a&&(a=Array.isArray(a)?a:[a]).forEach(function(t){var e=t.tagName,r=t.url,i=t.reload;e&&o.Component.hasRegister(e)&&!i||r&&l.push(t)}),s&&(s=Array.isArray(s)?s:[s]).forEach(function(t){t=t.url;t&&u.push(t)}),h.length),f=l.length,d=u.length;if(!(_||f||d))return n=aE.parse(o,e,c,r),r&&xt.isFunction(r.callback)&&r.callback(n),n;i=0,t=function(){var t;i===_+f+d&&(t=aE.parse(o,e,c,r),r&&xt.isFunction(r.callback)&&r.callback(t))},o.inject.loadFont(h,function(){i+=_,t()}),o.inject.loadComponent(l.map(function(t){return t.url}),function(){i+=f,l.forEach(function(t){t=t.tagName;t&&window[t]&&!o.Component.hasRegister(t)&&o.Component.register(t,window[t])}),t()}),o.inject.measureImg(u,function(){i+=d,t()})},abbr:Ur},s={css:Mo,reset:ur,unit:r,font:vt,abbr:dr,transform:la},ki={Animation:Pc,Controller:Kp,easing:xh,frame:ch},Ur={level:Ra,change:wr,Page:Yo,Cache:ga},Kr=(ep.register("$line",Kr),ep.register("$polyline",zy),ep.register("$polygon",e),ep.register("$sector",i),ep.register("$rect",re),ep.register("$circle",t),ep.register("$ellipse",a),{version:"0.69.8",render:function(t,e){if(!(t instanceof yy))throw new Error("Render dom must be canvas/svg");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,o=arguments.length;i<o;i++)r.push(arguments[i]);return xt.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?t instanceof ep?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(-1<["canvas","svg","webgl"].indexOf(t))return new yy(t,e,r);if(z0.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:Jt.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:Jt.TYPE_GM}},createCp:function(t,e){return e.children=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],{klass:t,props:e,$$type:Jt.TYPE_CP}},parse:function(t,e,r){return aE.parse(this,t,e,r)},loadAndParse:function(t,e,r){return aE.loadAndParse(this,t,e,r)},mode:et,Component:Ns,Node:k,Text:as,Geom:ep,Xom:F0,Dom:g1,Img:sd,Root:yy,Event:Ss,util:xt,inject:De,style:s,parser:aE,animate:ki,math:o,builder:Os,updater:Mp,refresh:Ur,enums:A,set debug(t){fe.flag=!!t}});return Os.ref({Xom:F0,Dom:g1,Img:sd,Geom:ep,Component:Ns}),"undefined"!=typeof window?window.karas=Kr:"undefined"!=typeof self&&(self.karas=Kr),Kr});
//# sourceMappingURL=index.min.js.map
