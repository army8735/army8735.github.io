!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).karas=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(i,!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function t(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?u(t):e}function H(t,e,i){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=F(t)););return t}(t,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(i):n.value}})(t,e,i||t)}function D(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function dt(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=function(){function t(){f(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__width=0,this.__height=0,this.__prev=null,this.__next=null,this.__ctx=null,this.__defs=null,this.__parent=null,this.__computedStyle={},this.__baseLine=0,this.__virtualDom={},this.__host=null}return s(t,[{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t}},{key:"__destroy",value:function(){this.__isDestroyed=!0,this.__prev=this.__next=this.__ctx=this.__defs=this.__parent=this.__host=null}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"rx",get:function(){return this.x+this.ox}},{key:"ry",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"root",get:function(){return this.host?this.host.root:this.parent?this.parent.root:this.tagName&&{canvas:!0,svg:!0}.hasOwnProperty(this.tagName)?this:void 0}},{key:"host",get:function(){return this.__host?this.__host:this.parent?this.parent.host:void 0}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}]),t}(),pt={CANVAS:0,SVG:1},X={AUTO:0,PX:1,PERCENT:2,POSITION:3,NUMBER:4,INHERIT:5,DEG:6},_={}.toString;function e(e){return function(t){return _.call(t)==="[object "+e+"]"}}var d=e("Number");function p(t){return v(t)?"":t.toString()}function v(t){return null==t}function y(t){if("item"===t.type||"img"===t.type){var e="";return t.props.forEach(function(t){e+=" ".concat(t[0],'="').concat(t[1],'"')}),"text"===t.tagName?"<text".concat(e,">").concat(t.content,"</text>"):"<".concat(t.tagName).concat(e,"/>")}if("text"===t.type){var i="";return t.children.forEach(function(t){i+=y(t)}),"<g>".concat(i,"</g>")}if("dom"===t.type||"geom"===t.type){var r="<g>";return t.bb.forEach(function(t){r+=y(t)}),r+="</g><g",t.props&&t.props.forEach(function(t){r+=" ".concat(t[0],'="').concat(t[1],'"')}),r+=">",t.children.forEach(function(t){r+=y(t)}),r+="</g>",'<g transform="'.concat(g(t.transform),'">').concat(r,"</g>")}}function g(t){var e="";return t.forEach(function(t){e+="".concat(t[0],"(").concat(t[1],") ")}),e}function m(t){var e="<".concat(t.tagName,' id="').concat(t.uuid,'" gradientUnits="userSpaceOnUse"');return t.props.forEach(function(t){e+=" ".concat(t[0],'="').concat(t[1],'"')}),e+=">",t.stop.forEach(function(t){e+=k(t)}),e+="</".concat(t.tagName,">")}function k(t){return'<stop stop-color="'.concat(t[0],'" offset="').concat(100*t[1],'%"/>')}var G={isObject:e("Object"),isString:e("String"),isFunction:e("Function"),isNumber:d,isBoolean:e("Boolean"),isDate:e("Date"),stringify:p,joinSourceArray:function(t){return function t(e){for(var i="",r=0,n=e.length;r<n;r++){var o=e[r];Array.isArray(o)?i+=t(o):i+=p(o)}return i}(t)},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;")},isNil:v,joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach(function(t){e+=m(t)}),e+="</defs><g>",t.bb.forEach(function(t){e+=y(t)}),e+="</g><g>",t.children.forEach(function(t){e+=y(t)}),e+="</g>"},joinVd:y,joinTransform:g,joinDef:m,joinStop:k,r2d:function(t){return t*Math.PI/180},rgb2int:function(t){var e=[];if("#"===t.charAt(0))3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16))):6===t.length&&(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16))),e[3]=1;else{if("transparent"===t)return[0,0,0,0];var i=t.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\d.]+))?\s*\)/i);i&&(e=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],i[4]?e[3]=parseFloat(i[4]):e[3]=1)}return e},arr2hash:function(t){for(var e={},i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n))e[n[0]]=n[1];else for(var o=Object.keys(n),a=o.length-1;0<=a;a--){var s=o[a];e[s]=n[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],i=Object.keys(t),r=0,n=i.length;r<n;r++){var o=i[r];e.push([o,t[o]])}return e},clone:function t(e){if(v(e)||"object"!==o(e))return e;if(G.isDate(e))return new Date(e);var i=Array.isArray(e)?[]:{};for(var r in e)e.hasOwnProperty(r)&&(i[r]=t(e[r]));return i}};function x(){for(var t=[],e=0;e<16;e++)t.push(e%5==0?1:0);return t}function b(t,e){for(var i=[],r=0;r<4;r++)for(var n=[t[r],t[r+4],t[r+8],t[r+12]],o=0;o<4;o++){var a=4*o,s=[e[a],e[1+a],e[2+a],e[3+a]],h=n[0]*s[0]+n[1]*s[1]+n[2]*s[2]+n[3]*s[3];i[r+a]=h}return i}function w(t,e,i){var r=D(t,6),n=r[0],o=r[1],a=r[2],s=r[3];return[n*e+a*i+r[4],o*e+s*i+r[5]]}function A(t,e,i,r){return t*r-i*e}var vt={calMatrix:function(t,e,i,r,n,o){var a=D(e,2),s=a[0],h=a[1],u=function(t,e,i,n,o){var a=[];return t.forEach(function(t){var e=D(t,2),i=e[0],r=e[1];"translateX"===i?r.unit===X.PERCENT?a.push([t[0],r.value*n*.01]):a.push([t[0],t[1].value]):"translateY"===i?r.unit===X.PERCENT?a.push([t[0],r.value*o*.01]):a.push([t[0],t[1].value]):"matrix"===i?a.push([t[0],t[1]]):a.push([t[0],t[1].value])}),a}(t,0,0,n,o),l=x();l[12]=s,l[13]=h,u.forEach(function(t){var e=D(t,2),i=e[0],r=e[1],n=x();if("translateX"===i)n[12]=r;else if("translateY"===i)n[13]=r;else if("scaleX"===i)n[0]=r;else if("scaleY"===i)n[5]=r;else if("skewX"===i){r=G.r2d(r);var o=Math.tan(r);n[4]=o}else if("skewY"===i){r=G.r2d(r);var a=Math.tan(r);n[1]=a}else if("rotateZ"===i){r=G.r2d(r);var s=Math.sin(r),h=Math.cos(r);n[0]=n[5]=h,n[1]=s,n[4]=-s}else"matrix"===i&&(n[0]=r[0],n[1]=r[1],n[4]=r[2],n[5]=r[3],n[12]=r[4],n[13]=r[5]);l=b(l,n)});var f=x();return f[12]=-s,f[13]=-h,[(l=b(l,f))[0],l[1],l[4],l[5],l[12],l[13]]},calOrigin:function(t,i,r,n,o){var a=[];return t.forEach(function(t,e){t.unit===X.PX?a.push(t.value):t.unit===X.PERCENT&&a.push((e?r:i)+t.value*(e?o:n)*.01)}),a},pointInQuadrilateral:function(t,e,i,r,n,o,a,s,h,u,l){if(!l)return i<=t&&r<=e&&t<=h&&e<=u;var f=D(w(l,i,r),2);i=f[0],r=f[1];var c=D(w(l,n,o),2);n=c[0],o=c[1];var _=D(w(l,a,s),2);a=_[0],s=_[1];var d=D(w(l,h,u),2);return h=d[0],u=d[1],0<A(n-i,o-r,t-i,e-r)&&0<A(h-n,u-o,t-n,e-o)&&0<A(a-h,s-u,t-h,e-u)&&0<A(i-a,r-s,t-a,e-s)||void 0},mergeMatrix:function(t,e){var i=x();i[0]=t[0],i[1]=t[1],i[4]=t[2],i[5]=t[3],i[12]=t[4],i[13]=t[5];var r=x();r[0]=e[0],r[1]=e[1],r[4]=e[2],r[5]=e[3],r[12]=e[4],r[13]=e[5];var n=b(i,r);return[n[0],n[1],n[4],n[5],n[12],n[13]]}};function T(t,e){for(var i=[],r=1,n=t.length;r<n;r++){var o=t[r].trim().split(/\s+/);if(1<o.length){var a=o[0],s=o[1];/%$/.test(s)?i.push([a,.01*parseFloat(s)]):i.push([a,parseFloat(s)/e])}else i.push(o[0])}1<i.length?(Array.isArray(i[0])||(i[0]=[i[0],0]),Array.isArray(i[i.length-1])||(i[i.length-1]=[i[i.length-1],1])):Array.isArray(i[0])||(i[0]=[i[0],0]);for(var h=i[0][1],u=1,l=i.length;u<l-1;u++){var f=i[u];if(Array.isArray(f))h=f[1];else{for(var c=u+1,_=i[i.length-1][1];c<l-1;c++){var d=i[c];if(Array.isArray(d)){_=d[1];break}}for(var p=(_-h)/(c-u+1),v=u;v<c;v++){var y=i[v];i[v]=[y,h+p*(v+1-u)]}u=c}}for(var g=1,m=i.length;g<m;g++){var k=i[g],x=i[g-1];k[1]<x[1]&&(k[1]=x[1])}for(var b=0,w=i.length;b<w-1;b++){if(1<i[b][1]){i.splice(b+1);break}}for(var A=i.length-1;0<A;A--){if(i[A][1]<0){i.splice(0,A);break}}var T=i.length;if(1===T)i[0][1]=0;else{for(var S=!0,E=!0,P=T-1;0<=P;P--){var M=i[P][1];0<M&&(S=!1),M<1&&(E=!1)}if(S)i.splice(0,T-1),i[0][1]=0;else if(E)i.splice(1),i[0][1]=0;else{var O=i[0],C=i[T-1];if(2===T)O[1]<0&&1<C[1]&&function(t,e,i){var r=G.rgb2int(t[0]),n=G.rgb2int(e[0]),o=D(r,4),a=o[0],s=o[1],h=o[2],u=o[3],l=void 0===u?1:u,f=D(n,4),c=f[0],_=f[1],d=f[2],p=f[3],v=void 0===p?1:p,y=Math.abs(t[1])*i,g=e[1]*i,m=y/(y+g),k=Math.floor(a+(c-a)*m),x=Math.floor(s+(_-s)*m),b=Math.floor(h+(d-h)*m),w=l+(v-l)*m;t[0]="rgba(".concat(k,",").concat(x,",").concat(b,",").concat(w,")"),t[1]=0,m=(i+y)/(y+g),k=Math.floor(a+(c-a)*m),x=Math.floor(s+(_-s)*m),b=Math.floor(h+(d-h)*m),w=l+(v-l)*m,e[0]="rgba(".concat(k,",").concat(x,",").concat(b,",").concat(w,")"),e[1]=1}(O,C,e);else{if(O[1]<0){var N=i[1],R=G.rgb2int(O[0]),W=G.rgb2int(N[0]),L=function(t,e,i,r,n){var o=D(t,4),a=o[0],s=o[1],h=o[2],u=o[3],l=void 0===u?1:u,f=D(i,4),c=f[0],_=f[1],d=f[2],p=f[3],v=void 0===p?1:p,y=Math.abs(e)*n,g=y/(r*n+y),m=Math.floor(a+(c-a)*g),k=Math.floor(s+(_-s)*g),x=Math.floor(h+(d-h)*g);return[m,k,x,l+(v-l)*g]}(R,O[1],W,N[1],e);O[0]="rgba(".concat(L[0],",").concat(L[1],",").concat(L[2],",").concat(L[3],")"),O[1]=0}if(1<C[1]){var B=i[T-2],I=G.rgb2int(B[0]),F=G.rgb2int(C[0]),H=function(t,e,i,r,n){var o=D(t,4),a=o[0],s=o[1],h=o[2],u=o[3],l=void 0===u?1:u,f=D(i,4),c=f[0],_=f[1],d=f[2],p=f[3],v=void 0===p?1:p,y=e*n,g=(n-y)/(r*n-y),m=Math.floor(a+(c-a)*g),k=Math.floor(s+(_-s)*g),x=Math.floor(h+(d-h)*g);return[m,k,x,l+(v-l)*g]}(I,B[1],F,C[1],e);C[0]="rgba(".concat(H[0],",").concat(H[1],",").concat(H[2],",").concat(H[3],")"),C[1]=1}}}}return i.forEach(function(t){t[1]<0?t[1]=0:1<t[1]&&(t[1]=1)}),i}var yt={parseGradient:function(t){var e=/\b(\w+)-gradient\((.+)\)/.exec(t);if(e){var i=/(-?[\d.]+deg)|(to\s+[toprighbml]+)|circle|ellipse|at|closest|farthest|((closest|farthest)-(side|corner))/.exec(e[2]),r=e[2].match(/((#[0-9a-f]{3,6})|(rgba?\(.+?\)))(\s+-?[\d.]+(px|%))?/gi);if(i){var n=e[2].indexOf(",");r.unshift(e[2].slice(0,n))}return{k:e[1],v:r}}},getLinear:function(t,e,i,r,n){var o=function(t){var e=180;if("to top"===t[0])e=0;else if("to top right"===t[0])e=45;else if("to right"===t[0])e=90;else if("to bottom right"===t[0])e=135;else if("to bottom"===t[0]);else if("to bottom left"===t[0])e=225;else if("to left"===t[0])e=270;else if("to top left"===t[0])e=315;else{var i=/(-?[\d.]+)deg/.exec(t[0]);i?e=parseFloat(i[1]):t.unshift(null)}return e%360}(t),a=G.r2d(o),s=Math.abs(r*Math.sin(a))+Math.abs(n*Math.cos(a)),h=D(function(t,e,i,r){var n,o,a,s;if(270<=t){var h=G.r2d(360-t);n=i+Math.sin(h)*e,o=r+Math.cos(h)*e,a=i-Math.sin(h)*e,s=r-Math.cos(h)*e}else if(180<=t){var u=G.r2d(t-180);n=i+Math.sin(u)*e,o=r-Math.cos(u)*e,a=i-Math.sin(u)*e,s=r+Math.cos(u)*e}else if(90<=t){var l=G.r2d(180-t);n=i-Math.sin(l)*e,o=r-Math.cos(l)*e,a=i+Math.sin(l)*e,s=r+Math.cos(l)*e}else{var f=G.r2d(t);n=i-Math.sin(f)*e,o=r+Math.cos(f)*e,a=i+Math.sin(f)*e,s=r-Math.cos(f)*e}return[n,o,a,s]}(o,.5*s,e,i),4);return{x1:h[0],y1:h[1],x2:h[2],y2:h[3],stop:T(t,s)}},getRadial:function(t,e,i,r,n,o,a){var s=o-r,h=a-n,u=D(function(t,e,i,r,n,o,a,s,h){var u,l,f,c="farthest-corner";if(/circle|ellipse|at|closest|farthest/i.test(t[0])||!/#[0-9a-f]{3,6}/i.test(t[0])&&!/\brgba?\(.*\)/i.test(t[0])){var _,d,p=t[0].indexOf("at");if(-1<p&&(_=t[0].slice(p+2),d=t[0].slice(0,p-1)),(d=/(closest|farthest)-(side|corner)/.exec(d))?c=d[0]:(d=/\s+(-?[\d.]+(?:px|%))\s*(-?[\d.]+(?:px|%))?/.exec(d))&&(c=null,u=-1<d[1].indexOf("px")?.5*parseFloat(d[1]):parseFloat(d[1])*e*.005),_&&(d=/\s+(-?[\d.]+(?:px|%))\s*(-?[\d.]+(?:px|%))?/.exec(_))){r=-1<d[1].indexOf("px")?o+parseFloat(d[1]):o+parseFloat(d[1])*e*.01;var v=d[2]||d[1];n=-1<v.indexOf("px")?a+parseFloat(v):a+parseFloat(v)*i*.01}}else t.unshift(null);if(c)if("closest-side"===c)u=r<=o||s<=r||n<=a||h<=n?0:(l=r<o+.5*e?r-o:s-r,f=n<a+.5*i?n-a:h-n,Math.min(l,f));else if("closest-corner"===c){var y,g;y=r<o+.5*e?r-o:s-r,g=n<a+.5*i?n-a:h-n,u=Math.sqrt(Math.pow(y,2)+Math.pow(g,2))}else if("farthest-side"===c)if(r<=o)u=o-r+e;else if(s<=r)u=r-s+e;else if(n<=a)u=a-n+i;else if(h<=r)u=n-h+i;else{var m=Math.max(s-r,r-o),k=Math.max(h-n,n-a);u=Math.max(m,k)}else{var x,b;x=r<o+.5*e?s-r:r-o,b=n<a+.5*i?h-n:n-a,u=Math.sqrt(Math.pow(x,2)+Math.pow(b,2))}return[u,r,n]}(t,s,h,e,i,r,n,o,a),3),l=u[0],f=u[1],c=u[2],_=T(t,2*l);if(l<=0){var d=_[_.length-1];d[1]=0,_=[d],f=r,c=n,l=s+h}return{cx:f,cy:c,r:l,stop:_}}};function S(t,e,i,r,n,o,a,s){var h=1,u=1,l=1;t:for(var f=o;n<=f;f--)for(var c=s;a<=c;c--){var _=f+c,d=Math.floor((t+c)/_),p=c;if(d*_<c+t)if(s<(p=(t-d*f)/(d-1)))continue;if(_=f+p,1<e&&f<e){if(f<e%_)continue;if(1<i)if(f<(e+r)%_)continue}if(1<i)if(f<(e+r)%_)continue;0<d&&(h=d,u=f,l=p);break t}return{n:h,ps:u,pd:l}}function E(t,e,i,r,n,o){var a=n-e,s=r-i,h=i-e,u=n-r;if("dotted"===t)return S(a,h,u,s,o,o,Math.max(1,.25*o),2*o);var l=S(a,h,u,s,o,3*o,Math.max(1,.25*o),2*o),f=l.n,c=l.ps,_=l.pd;return 1===f?S(a,h,u,s,o,o,Math.max(1,.25*o),2*o):{n:f,ps:c,pd:_}}var gt={calDashed:E,calPoints:function(t,e,i,r,n,o,a,s,h,u,l,f,c){var _=[];if(-1<["dashed","dotted"].indexOf(e)){var d=0===c||2===c?E(e,n,o,a,s,t):E(e,h,u,l,f,t),p=d.n,v=d.ps,y=d.pd;if(1<p){for(var g=0;g<p;g++){var m,k=g===p-1,x=void 0,b=void 0,w=void 0;m=(x=0===c||2===c?g?n+v*g+y*g:n:g?h+v*g+y*g:h)+v,0===c?m<o?k?_.push([n,h,s,h,a,u,o,u]):(b=h+(x-n)*Math.tan(i),w=h+(m-n)*Math.tan(i),_.push([x,h,m,h,m,w,x,b])):a<x?(b=h+(s-x)*Math.tan(r),w=h+(s-m)*Math.tan(r),k?_.push([x,h,s,h,x,b]):_.push([x,h,m,h,m,w,x,b])):x<o?(b=h+(x-n)*Math.tan(i),k?_.push([x,h,s,h,a,u,o,u,x,b]):a<m?_.push([x,h,m,h,a,u,o,u,x,b]):_.push([x,h,m,h,m,u,o,u,x,b])):a<m?(b=h+(s-m)*Math.tan(r),x<o?k?_.push([x,h,s,h,a,u,o,u,x,b]):_.push([x,h,m,h,m,b,a,u,o,u,x,b]):k?_.push([x,h,s,h,a,u,x,u]):_.push([x,h,m,h,m,b,a,u,x,u])):k?_.push([x,h,s,h,a,u,x,u]):_.push([x,h,m,h,m,u,x,u]):1===c?m<u?k?_.push([a,u,s,h,s,f,a,l]):(b=s-(m-h)*Math.tan(i),w=s-(x-h)*Math.tan(i),_.push([b,m,w,x,s,x,s,m])):l<x?(b=a+(x-l)*Math.tan(r),w=a+(m-l)*Math.tan(r),k?_.push([b,x,s,x,s,f]):_.push([b,x,s,x,s,m,w,m])):x<u?(b=a+(u-x)*Math.tan(i),k?_.push([a,u,b,x,s,x,s,f,a,f]):l<m?_.push([a,u,b,x,s,x,s,m,b,m,a,l]):_.push([a,u,b,x,s,x,s,m,a,m])):l<m?(b=a+(m-l)*Math.tan(r),x<u?k?_.push([a,u,b,x,s,x,s,f,a,l]):_.push([a,u,b,x,s,x,s,m,b,m,a,l]):k?_.push([a,x,s,x,s,f,a,l]):_.push([a,x,s,x,s,m,b,m,a,l])):k?_.push([a,x,s,x,s,f,a,l]):_.push([a,x,s,x,s,m,a,m]):2===c?m<o?k?_.push([n,f,o,l,a,l,s,f]):(b=f-(x-n)*Math.tan(i),w=f-(m-n)*Math.tan(i),_.push([x,b,m,w,m,f,x,f])):a<x?(b=f-(x-n)*Math.tan(r),w=f-(m-n)*Math.tan(r),k?_.push([x,b,s,f,x,f]):_.push([x,b,m,w,m,f,x,f])):x<o?(b=l+(x-n)*Math.tan(i),k?_.push([x,b,o,l,a,l,s,f,x,f]):a<m?_.push([x,b,o,l,a,l,m,f,x,f]):_.push([x,b,o,l,m,l,m,f,x,f])):a<m?(b=f-(s-m)*Math.tan(r),x<o?k?_.push([x,b,a,l,s,f,x,f]):_.push([x,b,a,l,m,b,m,f,x,f]):k?_.push([x,l,a,l,s,f,x,f]):_.push([x,l,a,l,m,b,m,f,x,f])):k?_.push([x,l,a,l,s,f,x,f]):_.push([x,l,m,l,m,f,x,f]):3===c&&(m<u?k?_.push([n,h,o,u,o,l,n,f]):(b=n+(x-h)*Math.tan(i),w=n+(m-h)*Math.tan(i),_.push([n,x,b,x,w,m,n,m])):l<x?(b=n+(f-x)*Math.tan(r),w=n+(f-m)*Math.tan(r),k?_.push([n,x,b,x,n,f]):_.push([n,x,b,x,w,m,n,m])):x<u?(b=n+(x-h)*Math.tan(i),k?_.push([n,x,b,x,o,u,o,l,n,f]):l<m?_.push([n,x,b,x,o,u,o,l,b,m,n,m]):_.push([n,x,b,x,o,u,o,m,n,m])):l<m?(b=n+(f-m)*Math.tan(r),x<u?k?_.push([n,x,b,x,o,u,o,l,n,f]):_.push([n,x,b,x,o,u,o,l,b,m,n,m]):k?_.push([n,x,o,x,o,l,n,f]):_.push([n,x,o,x,o,l,b,m,n,m])):k?_.push([n,x,o,x,o,l,n,f]):_.push([n,x,o,x,o,m,n,m]))}return _}}return 0===c?_.push([n,h,s,h,a,u,o,u]):1===c?_.push([a,u,s,h,s,f,a,l]):2===c?_.push([n,f,o,l,a,l,s,f]):3===c&&_.push([n,h,o,u,o,l,n,f]),_}};function P(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function M(t,e){return!Array.isArray(t)||t.length<2||(e=e||function(){},function t(e,i,r,n){if(!(r<=i)){for(var o=i,a=r,s=o,h=e[s],u=!0;o<a;)if(u){for(;o<a;a--)if(n.call(e,h,e[a])){P(e,s,a),s=a,u=!u,o++;break}}else for(;o<a;o++)if(n.call(e,e[o],h)){P(e,s,o),s=o,u=!u,a--;break}t(e,i,s-1,n),t(e,s+1,r,n)}}(t,0,t.length-1,e)),t}var O={arial:{lhr:1.14990234375,car:1.1171875,blr:.9052734375,mdr:.64599609375,lgr:.03271484375}};function C(t,e){var i="border".concat(e);if(t[i]){var r=/\b[\d.]+px\b/i.exec(t[i]);r&&(t[i+"Width"]=r[0]);var n=/\b(solid|dashed|dotted)\b/i.exec(t[i]);n&&(t[i+"Style"]=n[1]);var o=/#[0-9a-f]{3,6}/i.exec(t[i]);o&&-1<[4,7].indexOf(o[0].length)?t[i+"Color"]=o[0]:/\btransparent\b/i.test(t[i])?t[i+"Color"]="transparent":(o=/rgba?\(.+\)/i.exec(t[i]))&&(t[i+"Color"]=o[0])}}function N(t,e,i){return"auto"===i?t[e]={unit:X.AUTO}:"inherit"===i?t[e]={unit:X.INHERIT}:/px$/.test(i)?(i=parseFloat(i)||0,t[e]={value:i,unit:X.PX}):/%$/.test(i)?0===e.toString().indexOf("border")||"strokeWidth"===e.toString()?t[e]={value:0,unit:X.PX}:(i=parseFloat(i)||0,t[e]={value:i,unit:X.PERCENT}):(i=parseFloat(i)||0,t[e]={value:i,unit:X.PX}),t}function R(t,e,i,r){e.unit===X.INHERIT?t.fontSize=r?16:i.fontSize:e.unit===X.PX?t.fontSize=e.value:e.unit===X.PERCENT?t.fontSize=r?16*e.value:i.fontSize*e.value:t.fontSize=16}function W(t,e,i){if(G.isNumber(e),e.unit===X.INHERIT){var r=t.parent;if(r){var n=r.style.lineHeight;if(n.unit===X.INHERIT)for(r=r.parent;r&&(n=r.style.lineHeight).unit===X.INHERIT;);var o=r.computedStyle;n.unit===X.PX?i.lineHeight=o.lineHeight:n.unit===X.NUMBER?i.lineHeight=Math.max(n.value,0)*i.fontSize:i.lineHeight=L(i)}else e.unit=X.AUTO,i.lineHeight=W(i)}else e.unit===X.PX?i.lineHeight=Math.max(e.value,0)||L(i):e.unit===X.NUMBER?i.lineHeight=Math.max(e.value,0)*i.fontSize||L(i):i.lineHeight=L(i)}function L(t){return t.fontSize*O.arial.lhr}function B(t,e,i){for(t*=.01;e;){var r=e.style[i];if(r.unit===X.AUTO){if("width"!==i)break;e=e.parent}else{if(r.unit===X.PX)return t*r.value;r.unit===X.PERCENT&&(t*=.01*r.value,e=e.parent)}}return t}function I(t,e,i,r,n){return G.isNumber(i)||(i.unit===X.AUTO?i=0:i.unit===X.PX?i=i.value:i.unit===X.PERCENT&&(i=B(i.value,r,n?"width":"height"))),t[e]=i}var U,j={normalize:function(i,t){t&&t.forEach(function(t){i.hasOwnProperty(t.k)||(i[t.k]=t.v)});var e=i.background;if(e){var r=yt.parseGradient(e);if(r)i.backgroundGradient=r;else{var n=/#[0-9a-f]{3,6}/i.exec(e);n&&-1<[4,7].indexOf(n[0].length)?i.backgroundColor=n[0]:(n=/rgba?\(.+\)/i.exec(e))&&(i.backgroundColor=n[0])}}if((e=i.flex)&&("none"===e?(i.flexGrow=0,i.flexShrink=0,i.flexBasis="auto"):"auto"===e?(i.flexGrow=1,i.flexShrink=1,i.flexBasis="auto"):/^[\d.]+$/.test(e)?(i.flexGrow=parseFloat(e),i.flexShrink=1,i.flexBasis=0):/^[\d.]+px$/.test(e)||/^[\d.]+%$/.test(e)||(i.flexGrow=0,i.flexShrink=1,i.flexBasis="auto")),(e=i.border)&&(i.borderTop=i.borderRight=i.borderBottom=i.borderLeft=e),e=i.margin){var o=e.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi);o&&(1===o.length?o[3]=o[2]=o[1]=o[0]:2===o.length?(o[2]=o[0],o[3]=o[1]):3===o.length&&(o[3]=o[1]),i.marginTop=o[0],i.marginRight=o[1],i.marginBottom=o[2],i.marginLeft=o[3])}if(e=i.padding){var a=e.toString().match(/(-?[\d.]+(px|%)?)|(auto)/gi);a&&(1===a.length?a[3]=a[2]=a[1]=a[0]:2===a.length?(a[2]=a[0],a[3]=a[1]):3===a.length&&(a[3]=a[1]),i.paddingTop=a[0],i.paddingRight=a[1],i.paddingBottom=a[2],i.paddingLeft=a[3])}if(e=i.transform){var s=e.toString().match(/\w+\(.+?\)/g);if(s){var v=i.transform=[];s.forEach(function(t){var e=t.indexOf("("),i=t.slice(0,e),r=t.slice(e+1,t.length-1);if("matrix"===i){var n=r.split(/\s*,\s*/);6<(n=n.map(function(t){return parseFloat(t)})).length&&(n=n.slice(0,6)),6===n.length&&v.push(["matrix",n])}else if("translateX"===i){var o=["translateX",r];v.push(N(o,1,r))}else if("translateY"===i){var a=["translateY",r];v.push(N(a,1,r))}else if("translate"===i){var s=r.split(/\s*,\s*/),h=["translateX",s[0]],u=["translateY",s[1]||s[0]];v.push(N(h,1,s[0])),v.push(N(u,1,s[1]||s[0]))}else if("scaleX"===i)v.push(["scaleX",{value:parseFloat(r)||0,unit:X.NUMBER}]);else if("scaleY"===i)v.push(["scaleY",{value:parseFloat(r)||0,unit:X.NUMBER}]);else if("scale"===i){var l=r.split(/\s*,\s*/),f=parseFloat(l[0])||0,c=parseFloat(l[l.length-1])||0;v.push(["scaleX",{value:f,unit:X.NUMBER}]),v.push(["scaleY",{value:c,unit:X.NUMBER}])}else if("rotateZ"===i||"rotate"===i)v.push(["rotateZ",{value:parseFloat(r)||0,unit:X.DEG}]);else if("skewX"===i)v.push(["skewX",{value:parseFloat(r)||0,unit:X.DEG}]);else if("skewY"===i)v.push(["skewY",{value:parseFloat(r)||0,unit:X.DEG}]);else if("skew"===i){var _=r.split(/\s*,\s*/),d=parseFloat(_[0])||0,p=parseFloat(_[_.length-1])||0;v.push(["skewX",{value:d,unit:X.DEG}]),v.push(["skewY",{value:p,unit:X.DEG}])}})}}if(e=i.transformOrigin){var h=e.toString().match(/(-?[\d.]+(px|%)?)|(left|top|right|bottom|center)/gi);if(h){1===h.length&&(h[1]=h[0]);for(var u=[],l=0;l<2;l++){var f=h[l];/px$/.test(f)?u.push({value:parseFloat(f),unit:X.PX}):/%$/.test(f)?u.push({value:parseFloat(f),unit:X.PERCENT}):u.push({value:{top:0,left:0,center:50,right:100,bottom:100}[f],unit:X.PERCENT})}i.transformOrigin=u}}if(C(i,"Top"),C(i,"Right"),C(i,"Bottom"),C(i,"Left"),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height","flexBasis","fontSize","strokeWidth"].forEach(function(t){var e=i[t];i.hasOwnProperty(t)&&N(i,t,e)}),!(e=i.fontWeight)&&0!==e||("bold"===e?i.fontWeight=700:"normal"===e?i.fontWeight=400:"lighter"===e?i.fontWeight=200:"inherit"!==e&&(i.fontWeight=parseInt(e)||400)),(e=i.lineHeight)||0===e)if("inherit"===e&&(i.lineHeight={unit:X.INHERIT}),"normal"===e)i.lineHeight={unit:X.AUTO};else if(/px$/.test(e))i.lineHeight={value:parseFloat(e),unit:X.PX};else{var c=parseFloat(e)||"normal";i.lineHeight="normal"===c?{unit:X.AUTO}:{value:c,unit:X.NUMBER}}if(e=i.strokeDasharray){var _=e.toString().match(/[\d.]+/g);i.strokeDasharray=_?_.join(", "):""}return i},computed:function(t,e){var i=t.currentStyle,r=i.fontStyle,n=i.fontWeight,o=i.fontSize,a=i.fontFamily,s=i.color,h=i.lineHeight,u=i.textAlign,l=(i.strokeDasharray,t.__computedStyle=G.clone(i)),f=t.parent,c=f&&f.computedStyle;"inherit"===r&&(l.fontStyle=e?"normal":c.fontStyle),"inherit"===n&&(l.fontWeight=e?400:c.fontWeight),R(l,o,c,e),"inherit"===a&&(l.fontFamily=e?"arial":c.fontFamily),"inherit"===s&&(l.color=e?"#000":c.color),W(t,h,l),"inherit"===u&&(l.textAlign=e?"left":c.textAlign),["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","strokeWidth"].forEach(function(t){if(i.hasOwnProperty(t)){var e=i[t];l[t]=e.value}})},computedAnimate:function(t,i,e,r){var n=i.fontSize,o=i.lineHeight,a=i.top,s=i.right,h=i.bottom,u=i.left,l=i.width,f=i.height,c=t.parent,_=c&&c.computedStyle;if(n&&R(i,n,_,r),o&&(n||(i.fontSize=e.fontSize),W(t,o,i),n||delete i.fontSize),a?(I(i,"top",a,c),delete i.bottom):h&&(I(i,"bottom",h,c),delete i.top),u?(I(i,"left",u,c,_.width),delete i.right):s&&(I(i,"right",s,c,_.width),delete i.left),["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(t){if(i.hasOwnProperty(t)){var e=i[t];i[t]=e.value}}),l){var d=0;l.unit===X.PX?d=l.value:l.unit===X.PERCENT&&(d=l.value*_.width*.01),i.width=d}if(f){var p=0;f.unit===X.PX?p=f.value:f.unit===X.PERCENT&&(p=f.value*_.height*.01),i.height=p}},setFontStyle:function(t){var e=t.fontStyle,i=t.fontWeight,r=t.fontSize,n=t.fontFamily;return"".concat(e," ").concat(i," ").concat(r,"px/").concat(r,"px ").concat(n)},getBaseLine:function(t){var e=t.fontSize*O.arial.lhr;return.5*(t.lineHeight-e)+t.fontSize*O.arial.blr},calLineHeight:W,calRelative:I,calAbsolute:function(t,e,i,r){return G.isNumber(i)||(i.unit===X.AUTO?i=0:i.unit===X.PX?i=i.value:i.unit===X.PERCENT&&(i=i.value*r*.01)),t[e]=i}},V=function(){function o(t,e,i,r,n){f(this,o),this.__parent=t,this.__x=e,this.__y=i,this.__width=r,this.__content=n,this.__virtualDom={}}return s(o,[{key:"render",value:function(t,e){var i=this.content,r=this.x,n=this.y,o=this.parent,a=o.ox,s=o.oy,h=o.computedStyle;n+=j.getBaseLine(h),r+=a,n+=s,t===pt.CANVAS?e.fillText(i,r,n):t===pt.SVG&&(this.__virtualDom={type:"item",tagName:"text",props:[["x",r],["y",n],["fill",h.color],["font-family",h.fontFamily],["font-weight",h.fontWeight],["font-style",h.fontStyle],["font-size","".concat(h.fontSize,"px")]],content:G.encodeHtml(i)})}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"content",get:function(){return this.__content}},{key:"baseLine",get:function(){return j.getBaseLine(this.parent.computedStyle)}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}}]),o}(),z={measureText:function(t){var e=$.MEASURE_TEXT,i=e.list,r=e.data,n="",o=[],a=[];for(var s in r)if(r.hasOwnProperty(s)){var h=r[s],u=h.key,l=h.style,f=h.s;if(f)for(var c="position:absolute;font-family:".concat(l.fontFamily,";font-size:").concat(l.fontSize,"px"),_=0,d=f.length;_<d;_++){o.push(u);var p=f.charAt(_);a.push(p),n+='<span style="'.concat(c,'">').concat(p.replace(/</,"&lt;"),"</span>")}}if(n){var v=document.createElement("div");v.style.position="absolute",v.style.left="99999px",v.style.top="-99999px",v.style.visibility="hidden",document.body.appendChild(v),v.innerHTML=n;for(var y=v.childNodes,g=$.CHAR_WIDTH_CACHE,m=$.MEASURE_TEXT,k=0,x=y.length;k<x;k++){var b=y[k],w=o[k],A=a[k],T=window.getComputedStyle(b,null);g[w][A]=parseFloat(T.width)}i.forEach(function(t){return t.__measureCb()}),t(),m.list=[],m.data={},document.body.removeChild(v)}else t()},measureImg:function(t,e){var i=document.createElement("img");i.style.position="absolute",i.style.left="99999px",i.style.top="-99999px",i.style.visibility="hidden",i.onload=function(){e({success:!0,width:i.width,height:i.height,source:i})},i.onerror=function(){e({success:!1})},i.src=t},warn:function(t){console.warn(t)},requestAnimationFrame:(U=function(t){"undefined"!=typeof requestAnimationFrame?(z.requestAnimationFrame=requestAnimationFrame.bind(window),requestAnimationFrame(t)):(setTimeout(t,16.7),z.requestAnimationFrame=function(t){setTimeout(t,16.7)})},Y.toString=function(){return U.toString()},Y),now:function(){return"undefined"!=typeof performance?(z.now=performance.now.bind(performance),performance.now()):(z.now=Date.now.bind(Date),Date.now())}};function Y(t){return U.apply(this,arguments)}var $=function(){function d(t){var e;return f(this,d),(e=c(this,F(d).call(this))).__content=t.toString(),e.__lineBoxes=[],e.__charWidthList=[],e.__charWidth=0,e.__textWidth=0,e}return t(d,l),s(d,[{key:"__measure",value:function(){var t=this.ctx,e=this.content,i=(this.currentStyle,this.computedStyle),r=this.charWidthList,n=this.renderMode;n===pt.CANVAS&&(t.font=j.setFontStyle(i));for(var o=i.fontSize+","+i.fontFamily,a=d.MEASURE_TEXT.data[o]=d.MEASURE_TEXT.data[o]||{key:o,style:i,hash:{},s:[]},s=d.CHAR_WIDTH_CACHE[o]=d.CHAR_WIDTH_CACHE[o]||{},h=0,u=!1,l=0,f=e.length;l<f;l++){var c=e.charAt(l),_=void 0;s.hasOwnProperty(c)?(_=s[c],r.push(_),h+=_,this.__charWidth=Math.max(this.charWidth,_)):n===pt.CANVAS?(_=s[c]=t.measureText(c).width,r.push(_),h+=_,this.__charWidth=Math.max(this.charWidth,_)):(a.hash.hasOwnProperty(c)||(a.s+=c),r.push(-1),u=!0)}this.__textWidth=h,u&&d.MEASURE_TEXT.list.push(this)}},{key:"__measureCb",value:function(){for(var t=this.content,e=this.computedStyle,i=this.charWidthList,r=e.fontSize+","+e.fontFamily,n=d.CHAR_WIDTH_CACHE[r],o=0,a=0,s=i.length;a<s;a++)if(i[a]<0){var h=i[a]=n[t.charAt(a)];o+=h,this.__charWidth=Math.max(this.charWidth,h)}this.__textWidth+=o}},{key:"__layout",value:function(t,e){var i=this,r=t.x,n=t.y,o=t.w;t.h;this.__x=r,this.__y=n;var a=r,s=this.isDestroyed,h=this.content,u=this.currentStyle,l=this.computedStyle,f=this.lineBoxes,c=this.charWidthList;if(!s&&"none"!==u.display){this.__ox=this.__oy=0,f.splice(0);for(var _=0,d=0,p=0,v=h.length;d<v;)if((p+=c[d])===o){var y=new V(this,r,n,p,h.slice(_,d+1));f.push(y),a=Math.max(a,r+p),n+=l.lineHeight,d=(_=d+1)+1,p=0}else if(o<p){d===_&&(d=_+1);var g=new V(this,r,n,p-c[d],h.slice(_,d));f.push(g),a=Math.max(a,r+p-c[d]),n+=l.lineHeight,_=d,d+=1,p=0}else d++;if(_<v&&_<d){for(p=0,d=_;d<v;d++)p+=c[d];var m=new V(this,r,n,p,h.slice(_,v));f.push(m),a=Math.max(a,r+p),n+=l.lineHeight}if(this.__width=a-r,this.__height=n-t.y,e)this.__lineBoxes=[];else{var k=u.textAlign;-1<["center","right"].indexOf(k)&&f.forEach(function(t){var e=i.__width-t.width;0<e&&t.__offsetX("center"===k?.5*e:e)})}}}},{key:"__offsetX",value:function(e,t){H(F(d.prototype),"__offsetX",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetX(e)})}},{key:"__offsetY",value:function(e,t){H(F(d.prototype),"__offsetY",this).call(this,e,t),t&&this.lineBoxes.forEach(function(t){t.__offsetY(e)})}},{key:"render",value:function(e){var t=this.isDestroyed,i=this.ctx,r=this.computedStyle;t||"none"===r.display||(e===pt.CANVAS&&(i.font=j.setFontStyle(r),i.fillStyle=r.color),this.lineBoxes.forEach(function(t){t.render(e,i)}),e===pt.SVG&&(this.__virtualDom={type:"text",children:this.lineBoxes.map(function(t){return t.virtualDom})}))}},{key:"__tryLayInline",value:function(t){return t-this.textWidth}},{key:"__calMaxAndMinWidth",value:function(){var e=0;return this.charWidthList.forEach(function(t){e=Math.max(e,t)}),{max:this.textWidth,min:e}}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"lineBoxes",get:function(){return this.__lineBoxes}},{key:"charWidthList",get:function(){return this.__charWidthList}},{key:"charWidth",get:function(){return this.__charWidth}},{key:"textWidth",get:function(){return this.__textWidth}},{key:"baseLine",get:function(){var t=this.lineBoxes[this.lineBoxes.length-1];return t.y-this.y+t.baseLine}},{key:"currentStyle",get:function(){return this.style}},{key:"renderMode",get:function(){return this.__renderMode}}]),d}();function q(t,e){var i=t.class,r=t.tagName,n=t.id;M(i=i.slice(),function(t,e){return e<t});var o=[];i.length&&!function t(e,i,r,n){if(1<r-n){t(e,i,r,n+1);for(var o=0,a=i.length;o<a;o++)i.push(i[o]+"."+e[n])}i.push("."+e[n])}(i,o,i.length,0);var a=e.hasOwnProperty("_*."),s=e.hasOwnProperty("_*#"),h=e.hasOwnProperty("_*.#"),u=[r];return e.hasOwnProperty("_*")&&u.push("*"),n&&(n="#"+n,u.push(n),u.push(r+n),s&&u.push("*"+n)),o.forEach(function(t){u.push(t),u.push(r+t),a&&u.push("*"+t),n&&(u.push(t+n),u.push(r+t+n),h&&u.push("*"+t+n))}),u}function K(e,i){i._v.forEach(function(t){t[2]=i._p,e.push(t)})}function Z(t){var e={};return t.forEach(function(t){e[t]=!0}),e}n($,"CHAR_WIDTH_CACHE",{}),n($,"MEASURE_TEXT",{list:[],data:{}});var Q={parse:function(t,e,i){if(i){var r=[];!function h(u,l,f,c){var _=this;var t=q(u,f);t.forEach(function(t){if(f.hasOwnProperty(t)){for(var i=f[t],e=u.parent;e;)h(e,l,i,c),e=e.parent;if(i.hasOwnProperty("_v")&&K(c,i),i.hasOwnProperty("_>")){var r=i["_>"];h(u.parent,_,r,c)}if(i.hasOwnProperty("_+")){var n=i["_+"],o=u.prev;if(o&&!(o instanceof $)){var a=q(o,n),s=Z(a);Object.keys(n).forEach(function(t){var e=n[t];e.hasOwnProperty("_v")&&s.hasOwnProperty(t)&&K(c,e)})}}i.hasOwnProperty("_~")&&function(){for(var r=i["_~"],e=u.prev,t=function(){if(e instanceof $)return e=e.prev,"continue";var t=q(e,r),i=Z(t);Object.keys(r).forEach(function(t){var e=r[t];e.hasOwnProperty("_v")&&i.hasOwnProperty(t)&&K(c,e)}),e=e.prev};e;)t()}()}})}(t,e,i,r),M(r,function(t,e){for(var i=t[2],r=e[2],n=0;n<3;n++)if(i[n]!==r[n])return i[n]>r[n];return t[0]>e[0]});for(var n={},o=r.length-1;0<=o;o--){var a=D(r[o][1],2),s=a[0],h=a[1];n.hasOwnProperty(s)||(n[s]=h)}return n}},splitClass:function(t){if(t=(t||"").trim())return t.split(/\s+/)},mergeCss:function t(e,i){if(!i)return e;if(!e)return i;for(var r in i)if(i.hasOwnProperty(r)){var n=i[r];!{_v:!0,_p:!0}.hasOwnProperty(r)&&"object"===o(n)&&e.hasOwnProperty(r)?e[r]=t(e[r],n):e[r]=n}return e}},J=function(){function a(){f(this,a),this.__eHash={}}return s(a,[{key:"on",value:function(t,e){var i=this;if(Array.isArray(t))for(var r=0,n=t.length;r<n;r++)i.on(t[r],e);else if(e){i.__eHash.hasOwnProperty(t)||(i.__eHash[t]=[]);for(var o=0,a=i.__eHash[t],s=a.length;o<s;o++)if(a[o]===e)return i;i.__eHash[t].push(e)}return i}},{key:"once",value:function(n,o){if(G.isFunction(o)){var a=this;if(Array.isArray(n))for(var t=0,e=n.length;t<e;t++)a.once(n[t],o);else o&&a.on(n,function t(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];o.apply(a,i),a.off(n,t)});return this}}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++)this.off(t[i],e);else if(this.__eHash.hasOwnProperty(t))if(e){for(var n=0,o=this.__eHash[t],a=o.length;n<a;n++)if(o[n]===e){o.splice(n,1);break}}else delete this.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)this.emit(t[n],i);else if(this.__eHash.hasOwnProperty(t)){var a=this.__eHash[t];if(a.length)for(var s=0,h=(a=a.slice()).length;s<h;s++){var u=a[s];G.isFunction(u)&&u.apply(this,i)}}return this}}],[{key:"mix",value:function(){for(var t=arguments.length-1;0<=t;t--){var e=t<0||arguments.length<=t?void 0:arguments[t],i=new a;e.__eHash={};for(var r=["on","once","off","emit"],n=r.length-1;0<=n;n--){var o=r[n];e[o]=i[o]}}}}]),a}();n(J,"KARAS_REFRESH","karas-refresh"),n(J,"KARAS_ANIMATION_PAUSE","karas-animation-pause"),n(J,"KARAS_ANIMATION_FRAME","karas-animation-frame"),n(J,"KARAS_ANIMATION_FINISH","karas-animation-finish"),n(J,"KARAS_ANIMATION_CANCEL","karas-animation-cancel");var tt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"arial",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"normal",backgroundColor:"transparent",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"#000",borderRightColor:"#000",borderBottomColor:"#000",borderLeftColor:"#000",borderTopStyle:"solid",borderRightStyle:"solid",borderBottomStyle:"solid",borderLeftStyle:"solid",width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",textAlign:"inherit",transformOrigin:"center",visibility:"visible"},et={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt"},it=[];for(var rt in tt)if(tt.hasOwnProperty(rt)){var nt=tt[rt];it.push({k:rt,v:nt})}var ot=G.clone(it);for(var at in et)if(et.hasOwnProperty(at)){var st=et[at];ot.push({k:at,v:st})}var ht={dom:it,geom:ot},ut=function(){function o(t,e,i){var r;return f(this,o),r=c(this,F(o).call(this)),G.isString(t)||(i=e,e=t,t=/(?:function|class)\s+([\w$]+)/.exec(r.constructor.toString())[1]),r.__tagName=t,e=e||[],Array.isArray(e)?(r.props=G.arr2hash(e),r.__props=e):(r.props=e,r.__props=G.hash2arr(e)),r.__children=i||[],r.__shadowRoot=null,r.__parent=null,r.__ref={},r.__state={},r}return t(o,J),s(o,[{key:"setState",value:function(t,e){if(G.isNil(t))this.state={};else for(var i in t)t.hasOwnProperty(i)&&(this.state[i]=t[i]);var r=this.shadowRoot;r&&this.root&&(this.__traverse(r.ctx,r.defs,this.root.renderMode),this.__init(),this.root.refreshTask(e))}},{key:"__traverse",value:function(t,e,i){for(var r=this.__shadowRoot=this.render(i);r instanceof o;)r=this.__shadowRoot=r.render(i);if(!(r instanceof l)){var n="";return G.isNil(r)||(n=G.encodeHtml(r.toString())),(r=new $(n)).__ctx=t,r.__defs=e,r.__renderMode=i,r.__style=this.props.style||{},void(this.__shadowRoot=r)}r.__ctx=t,r.__defs=e,r.__host=this,r.isGeom()||r.__traverse(t,e,i)}},{key:"__traverseCss",value:function(){var t=this.__shadowRoot;if(!(t instanceof $)){var e=Q.mergeCss(t.props.css,this.props.css);t.__traverseCss(t,e)}}},{key:"__init",value:function(){var r=this,n=this.shadowRoot;if(n instanceof $)j.normalize(n.style,ht.dom);else{var t=this.props.style||{};for(var e in t)t.hasOwnProperty(e)&&(n.style[e]=t[e]);n.__init()}n instanceof $||this.__props.forEach(function(t){var e=t[0],i=t[1];/^on[a-zA-Z]/.test(e)?(e=e.slice(2).toLowerCase(),(n.listener[e]=n.listener[e]||[]).push(i)):/^on-[a-zA-Z\d_$]/.test(e)&&(e=e.slice(3),r.on(e,function(){i.apply(void 0,arguments)}))}),this.__hasInit||(this.__hasInit=!0,["x","y","ox","oy","rx","ry","width","height","outerWidth","outerHeight","style","computedStyle","ctx","defs","baseLine","virtualDom","currentStyle"].forEach(function(t){Object.defineProperty(r,t,{get:function(){return this.shadowRoot[t]}})}))}},{key:"render",value:function(){}},{key:"__destroy",value:function(){this.shadowRoot&&this.shadowRoot.__destroy(),this.children.splice(0),this.__shadowRoot=null,this.__parent=null}},{key:"__emitEvent",value:function(t,e){var i=this.shadowRoot;if(!(i instanceof $))return e?i.__emitEvent(t,e):i.__emitEvent(t)?(t.target=this,!0):void 0}},{key:"animate",value:function(t,e){var i=this.shadowRoot;i instanceof $||i.animate(t,e)}},{key:"__computed",value:function(t){var e=this.shadowRoot;e instanceof $?(j.computed(e,!0),e.__measure()):e.__computed(t)}},{key:"tagName",get:function(){return this.__tagName}},{key:"children",get:function(){return this.__children}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){if(this.parent)return this.parent.root}},{key:"parent",get:function(){return this.__parent}},{key:"ref",get:function(){return this.__ref}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}}]),o}();["__layout","__layoutAbs","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__calMp","__calAbs"].forEach(function(e){ut.prototype[e]=function(){var t=this.shadowRoot;if(t[e])return t[e].apply(t,arguments)}});var lt=new(function(){function t(){f(this,t),this.__inFrame=!1,this.__task=[],this.__afterFrame=[]}return s(t,[{key:"__init",value:function(i){var r=this;!function e(){z.requestAnimationFrame(function(){if(i.length){r.__inFrame=!0,i.forEach(function(t){return t()}),r.__inFrame=!1;var t=r.__afterFrame;t&&t.forEach(function(t){return t()}),r.__afterFrame=[],i.length&&e()}})}()}},{key:"onFrame",value:function(t){var e=this.task;e.length||this.__init(e),this.task.push(t)}},{key:"offFrame",value:function(t){for(var e=this.task,i=0,r=e.length;i<r;i++)if(e[i]===t){e.splice(i,1);break}}},{key:"nextFrame",value:function(t){var e=this;function i(){t(),e.offFrame(i)}e.__inFrame?(e.__afterFrame=e.__afterFrame||[],e.__afterFrame.push(i)):e.onFrame(i)}},{key:"task",get:function(){return this.__task}}]),t}()),ft=4,ct=1e-7,_t=10,mt="function"==typeof Float32Array;function kt(t,e){return 1-3*e+3*t}function xt(t,e){return 3*e-6*t}function bt(t){return 3*t}function wt(t,e,i){return((kt(e,i)*t+xt(e,i))*t+bt(e))*t}function At(t,e,i){return 3*kt(e,i)*t*t+2*xt(e,i)*t+bt(e)}function Tt(t){return t}function St(o,e,a,i){if(!(0<=o&&o<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(o===e&&a===i)return Tt;for(var s=mt?new Float32Array(11):new Array(11),t=0;t<11;++t)s[t]=wt(.1*t,o,a);function r(t){for(var e=0,i=1;10!==i&&s[i]<=t;++i)e+=.1;var r=e+.1*((t-s[--i])/(s[i+1]-s[i])),n=At(r,o,a);return.001<=n?function(t,e,i,r){for(var n=0;n<ft;++n){var o=At(e,i,r);if(0===o)return e;e-=(wt(e,i,r)-t)/o}return e}(t,r,o,a):0===n?r:function(t,e,i,r,n){for(var o,a,s=0;0<(o=wt(a=e+(i-e)/2,r,n)-t)?i=a:e=a,Math.abs(o)>ct&&++s<_t;);return a}(t,e,e+.1,o,a)}return function(t){return 0===t||1===t?t:wt(r(t),e,i)}}var Et={linear:St(1,1,0,0),easeIn:St(.42,0,1,1),easeOut:St(0,0,.58,1),ease:St(.25,.1,.25,1),easeInOut:St(.42,0,.58,1),cubicBezier:St},Pt=["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","fill","stroke"],Mt={};Pt.forEach(function(t){Mt[t]=!0});var Ot={};function Ct(e){Pt.forEach(function(t){e.hasOwnProperty(t)&&(e[t]=G.rgb2int(e[t]))})}function Nt(t,e,i){if("transform"!==t)return Ot.hasOwnProperty(t)?e.value===i.value&&e.unit===i.unit:e===i;if(e.length!==i.length)return!1;for(var r=0,n=e.length;r<n;r++){var o=e[r][0];if(o!==i[r][0])return!1;var a=e[r][1],s=i[r][1];if("matrix"===o){if(a[0]!==s[0]||a[1]!==s[1]||a[2]!==s[2]||a[3]!==s[3]||a[4]!==s[4]||a[5]!==s[5])return!1}else if(a.value!==s.value||a.unit!==s.unit)return!1}return!0}function Rt(i,t,e){if(t){var r=!1;for(var n in i)if(i.hasOwnProperty(n)&&t.hasOwnProperty(n)){if(!Nt(n,i[n],t[n])){r=!0;break}}else if(i.hasOwnProperty(n)||t.hasOwnProperty(n)){r=!0;break}for(var o in t)if(t.hasOwnProperty(o)&&!i.hasOwnProperty(o)){r=!0;break}if(!r)return!1}i=G.clone(i);var a=e.animateStyle;for(var s in Pt.forEach(function(t){if(i.hasOwnProperty(t)){var e=i[t];1===e[3]?i[t]="rgb(".concat(e[0],",").concat(e[1],",").concat(e[2],")"):i[t]="rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat(e[3],")")}}),i)i.hasOwnProperty(s)&&(a[s]=i[s]);return e.__needCompute=!0}function Wt(t){var e=[],i={};for(var r in t)t.hasOwnProperty(r)&&!{offset:!0,easing:!0}.hasOwnProperty(r)&&(e.push(r),i[r]=t[r]);return{style:i,offset:t.offset,easing:t.easing,keys:e,transition:[]}}function Lt(i,t,r){var n=Wt(t);return n.keys.forEach(function(t){var e=function(f,s,t,e){if(f.hasOwnProperty(t)&&s.hasOwnProperty(t)){var c={k:t};if("transform"===t){if(!f[t]||!s[t])return;var _={};f[t].forEach(function(t){_[t[0]]=t[1]});var d={};s[t].forEach(function(t){d[t[0]]=t[1]}),c.v=[];var p=e.computedStyle,v=t;s[t].forEach(function(t){var e=D(t,2),i=e[0],r=e[1];if(_.hasOwnProperty(i)){var n=_[i],o=d[i];if("matrix"===i){for(var a=[],s=0;s<6;s++)a[s]=o[s]-n[s];c.v.push({k:i,v:a})}else n.unit===o.unit?c.v.push({k:i,v:r.value-n.value}):n.unit===X.PX&&o.unit===X.PERCENT?("translateX"===i?n.value=100*n.value/p.width:"translateY"===i&&(n.value=100*n.value/p.height),n.unit=X.PERCENT,c.v.push({k:i,v:o.value-n.value})):n.unit===X.PERCENT&&o.unit===X.PX&&("translateX"===i?n.value=.01*n.value*p.width:"translateY"===i&&(n.value=.01*n.value*p.width),n.unit=X.PX,c.v.push({k:i,v:o.value-n.value}))}else if("matrix"===i){var h=[1,0,0,1,0,0];f[v].push([i,h]);for(var u=[],l=0;l<6;l++)u[l]=r[l]-h[l];c.v.push({k:i,v:u})}else f[v].push([i,{value:0,unit:r.unit}]),c.v.push({k:i,v:r.value})}),f[t].forEach(function(t){var e=D(t,2),i=e[0],r=e[1];if(!d.hasOwnProperty(i))if("matrix"===i){var n=[1,0,0,1,0,0];s[v].push([i,n]);for(var o=[],a=0;a<6;a++)o[a]=n[a]-r[a];c.v.push({k:i,v:o})}else s[v].push([i,{value:0,unit:r.unit}]),c.v.push({k:i,v:-r.value})})}else if("transformOrigin"===t){c.v=[];for(var i=e.computedStyle,r=0;r<2;r++){var n=f[t][r],o=s[t][r];n.unit===o.unit?c.v.push(o.value-n.value):n.unit===X.PX&&o.unit===X.PERCENT?(n.value=100*n.value/i[r?"outerHeight":"outerWidth"],n.unit=X.PERCENT,c.v=o.value-n.value):n.unit===X.PERCENT&&o.unit===X.PX&&(n.value=.01*n.value*i[r?"outerHeight":"outerWidth"],n.unit=X.PX,c.v=o.value-n.value)}}else if(Mt.hasOwnProperty(t)){var a=f[t],h=s[t];c.v=[h[0]-a[0],h[1]-a[1],h[2]-a[2],h[3]-a[3]]}else if(Ot.hasOwnProperty(t)){var u=f[t],l=s[t];if(u.unit===X.AUTO||l.unit===X.AUTO)return;var y=(e.parent||e).computedStyle;if(u.unit===l.unit)c.v=l.value-u.value;else if(u.unit===X.PX&&l.unit===X.PERCENT)u.value=100*u.value/y[t],u.unit=X.PERCENT,c.v=l.value-u.value;else{if(u.unit!==X.PERCENT||l.unit!==X.PX)return;u.value=.01*u.value*y[t],u.unit=X.PX,c.v=l.value-u.value}}else c.v=f[t];return c}}(i.style,n.style,t,r);e&&i.transition.push(e)}),n}["fontSize","borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","bottom","left","right","top","flexBasis","width","height","lineHeight","marginBottom","marginLeft","marginRight","marginTop","paddingBottom","paddingLeft","paddingRight","paddingTop","strokeWidth"].forEach(function(t){Ot[t]=!0});var Bt=0,It=function(){function l(t,e,i){var r;if(f(this,l),(r=c(this,F(l).call(this))).__id=Bt++,r.__target=t,r.__list=e||[],!Array.isArray(r.__list)){var n=[],o=r.__list;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];if(Array.isArray(s))for(var h=0,u=s.length;h<u;h++){(n[h]=n[h]||{offset:h/(u-1)})[a]=s[h]}}r.__list=n}return G.isNumber(i)&&(r.__options={duration:i}),r.__options=i||{},r.__frames=[],r.__startTime=0,r.__offsetTime=0,r.__pauseTime=0,r.__lastTime=0,r.__pending=!1,r.__playState="idle",r.__playCount=0,r.__cb=null,r.__isDestroyed=!0,r.__init(),r}return t(l,J),s(l,[{key:"__init",value:function(){var t=this.target,e=this.options,i=G.clone(t.style),r=e.duration,n=e.iterations;if(r=parseFloat(r),!(isNaN(r)||r<=0||("Infinity"===n||"infinity"===n?n=1/0:G.isNil(n)&&(n=1),n!==1/0&&(n=parseInt(n)),isNaN(n)||n<1))){e.duration=r,e.iterations=n,t.__animateStyle=G.clone(i),Ct(i);for(var o=this.list,a=-1,s=0,h=o.length;s<h;s++){var u=o[s];u.hasOwnProperty("offset")?(u.offset=parseFloat(u.offset),isNaN(u.offset)||u.offset<0||1<u.offset?(o.splice(s,1),s--,h--):u.offset<=a?(o.splice(s,1),s--,h--):(a=u.offset,j.normalize(u),Ct(u))):(j.normalize(u),Ct(u))}if(!(o.length<2)){var l=o[0];l.offset=0;for(var f=o[o.length-1].offset=1,c=o.length;f<c;f++){var _=o[f];if(!_.offset){for(var d=void 0,p=f+1;p<c&&!(d=o[p]).offset;p++);var v=p-f+1;_=o[f-1];for(var y=(d.offset-_.offset)/v,g=f;g<p;g++){o[g].offset=_.offset+y*(g+1-f)}f=p}}var m,k=this.frames,x=o.length;m=Wt(l),k.push(m);for(var b=1;b<x;b++){m=Lt(m,o[b],t),k.push(m)}this.__isDestroyed=!1}}}},{key:"play",value:function(){var h=this;if(!this.isDestroyed){if(this.__cancelTask(),this.__playState="running",this.pending){var t=z.now()-this.pauseTime;t=Math.max(t,0),this.__offsetTime=t}else{var e=this.options,u=e.duration,l=e.fill,f=e.fps,c=e.iterations,_=this.frames,d=this.target,p=this.playCount,v=_.length,y=!0;this.__cb=function(){var e=z.now();y&&(h.__startTime=e,_.forEach(function(t){t.time=e+u*t.offset}));var t,i=p*u,r=function t(e,i,r,n){if(e===i)return n[e].time>r?e-1:e;var o=e+(i-e>>1),a=n[o];return a.time===r?o:a.time>r?t(e,Math.max(o-1,e),r,n):t(Math.min(o+1,i),i,r,n)}(0,_.length-1,e+h.offsetTime-i,_),n=_[r];if(r===v-1)t=Rt(n.style,h.__lastStyle,d),p=++h.playCount,c!==1/0&&c<=p&&lt.offFrame(h.cb);else{if((!G.isNumber(f)||f<0)&&(f=60),!y&&f<60)if(e-h.lastTime<1e3/f)return;var o=_[r+1].time-n.time;t=Rt(function(t,a){var s=G.clone(t.style),e=Et[t.easing]||Et.linear;return e!==Et.linear&&(a=e(a)),t.transition.forEach(function(t){var e=t.k,i=t.v;if("transform"===e){var r=s.transform,n={};r.forEach(function(t){n[t[0]]=t[1]}),i.forEach(function(t){var e=t.k,i=t.v;if("matrix"===e)for(var r=0;r<6;r++)n[e][r]+=i[r]*a;else n[e].value+=i*a})}else if("transformOrigin"===e)s[e][0].value+=i[0]*a,s[e][1].value+=i[1]*a;else if(Mt.hasOwnProperty(e)){var o=s[e];o[0]+=i[0]*a,o[1]+=i[1]*a,o[2]+=i[2]*a,o[3]+=i[3]*a}else Ot.hasOwnProperty(e)?s[e].value+=i*a:s[e]=i}),s}(n,(e-i-n.time)/o),h.__lastStyle,d)}h.__lastTime=e,h.__lastStyle=n.style,y=!1;var a=d.root;if(a){var s=h.__task=function(){if(h.emit(J.KARAS_ANIMATION_FRAME),r===v-1){if(c===1/0||p<c)return void h.emit(J.KARAS_ANIMATION_FINISH);if(h.__playState="finished",{forwards:!0,both:!0}.hasOwnProperty(l))h.emit(J.KARAS_ANIMATION_FINISH);else{d.__needCompute=!0;var t=h.__task=function(){h.emit(J.KARAS_ANIMATION_FINISH)};a.refreshTask(t)}}};t?a.refreshTask(s):lt.nextFrame(s)}}}return this.cb(),lt.onFrame(this.cb),this.__pending=!1,this}}},{key:"pause",value:function(){return this.__pending=!0,this.__pauseTime=z.now(),this.__playState="paused",lt.offFrame(this.cb),this.__cancelTask(),this.emit(J.KARAS_ANIMATION_PAUSE),this}},{key:"finish",value:function(){var t=this,e=this.options.fill;lt.offFrame(this.cb),this.__cancelTask();var i=this.target,r=this.lastStyle,n=i.root;if(n){if({forwards:!0,both:!0}.hasOwnProperty(e))Rt(this.frames[this.frames.length-1].style,r,this.target);this.__playState="finished",i.__needCompute=!0;var o=this.__task=function(){t.emit(J.KARAS_ANIMATION_FINISH)};n.refreshTask(o)}return this}},{key:"cancel",value:function(){var t=this;lt.offFrame(this.cb),this.__cancelTask(),this.__playState="idle";var e=this.target,i=e.root;if(i){e.__needCompute=!0;var r=this.__task=function(){t.emit(J.KARAS_ANIMATION_CANCEL)};i.refreshTask(r)}return this}},{key:"__cancelTask",value:function(){this.__task&&this.target.root&&this.target.root.cancelRefreshTask(this.__task)}},{key:"__destroy",value:function(){lt.offFrame(this.cb),this.__cancelTask(),this.__playState="idle",this.__isDestroyed=!0}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__target}},{key:"list",get:function(){return this.__list}},{key:"options",get:function(){return this.__options}},{key:"frames",get:function(){return this.__frames}},{key:"startTime",get:function(){return this.__startTime}},{key:"lastTime",get:function(){return this.__lastTime}},{key:"pending",get:function(){return this.__pending}},{key:"offsetTime",get:function(){return this.__offsetTime}},{key:"pauseTime",get:function(){return this.__pauseTime}},{key:"playState",get:function(){return this.__playState}},{key:"playCount",get:function(){return this.__playCount},set:function(t){this.__playCount=t}},{key:"cb",get:function(){return this.__cb}},{key:"isDestroyed",get:function(){return this.__isDestroyed}},{key:"lastStyle",get:function(){return this.__lastStyle}}]),l}();function Ft(t,e,r,n,i){if(t===pt.CANVAS)e.forEach(function(t){n.beginPath(),n.fillStyle=r,n.moveTo(t[0],t[1]);for(var e=2,i=t.length;e<i;e+=2)n.lineTo(t[e],t[e+1]);n.fill(),n.closePath()});else if(t===pt.SVG){var o="";e.forEach(function(t){o+="M ".concat(t[0]," ").concat(t[1]);for(var e=2,i=t.length;e<i;e+=2)o+="L ".concat(t[e]," ").concat(t[e+1]," ")}),i.addBorder([["d",o],["fill",r]])}}var Ht=function(){function m(t,e){var r;return f(this,m),r=c(this,F(m).call(this)),e=e||[],Array.isArray(e)?(r.props=G.arr2hash(e),r.__props=e):(r.props=e,r.__props=G.hash2arr(e)),r.__tagName=t,r.__style=r.props.style||{},r.__animateStyle={},r.__listener={},r.__props.forEach(function(t){var e=t[0],i=t[1];/^on[a-zA-Z]/.test(e)?(e=e.slice(2).toLowerCase(),(r.__listener[e]=r.__listener[e]||[]).push(i)):"id"===e&&i?r.__id=i:-1<["class","className"].indexOf(e)&&i&&(i=Q.splitClass(i))&&(r.__class=i)}),r.__matrix=null,r.__matrixEvent=null,r.__animation=null,r.__needCompute=!0,r}return t(m,l),s(m,[{key:"__traverseCss",value:function(e,i){this.isGeom()||this.children.forEach(function(t){(t instanceof m||t instanceof ut)&&t.__traverseCss(e,i)});var t=Q.parse(this,e,i)||{};for(var r in t)t.hasOwnProperty(r)&&!this.__style.hasOwnProperty(r)&&(this.__style[r]=t[r])}},{key:"__measure",value:function(){var t=this.children;t&&t.forEach(function(t){t instanceof m?t.__measure():t instanceof ut?t.shadowRoot.__measure():t.__measure()})}},{key:"__layout",value:function(t){var e=t.w,i=this.isDestroyed,r=this.currentStyle,n=this.computedStyle,o=r.display,a=r.width,s=r.marginTop,h=r.marginRight,u=r.marginBottom,l=r.marginLeft,f=r.paddingTop,c=r.paddingRight,_=r.paddingBottom,d=r.paddingLeft;if(a.unit!==X.AUTO)switch(a.unit){case X.PX:e=a.value;break;case X.PERCENT:e*=.01*a.value}if(n.marginLeft=this.__mpWidth(l,e),n.marginTop=this.__mpWidth(s,e),n.marginRight=this.__mpWidth(h,e),n.marginBottom=this.__mpWidth(u,e),n.paddingLeft=this.__mpWidth(d,e),n.paddingTop=this.__mpWidth(f,e),n.paddingRight=this.__mpWidth(c,e),n.paddingBottom=this.__mpWidth(_,e),function(i,r){["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(t){var e=r[t];e.unit===X.PX?i[t]=e.value:i[t]=0})}(n,r),this.__ox=this.__oy=0,this.__matrix=this.__matrixEvent=null,i||"none"===o)n.width=n.height=n.outerWidth=n.outerHeight=0;else{if("block"===o?this.__layoutBlock(t):"flex"===o?this.__layoutFlex(t):"inline"===o&&this.__layoutInline(t),"relative"===r.position&&this.parent){var p=r.top,v=r.right,y=r.bottom,g=r.left,m=this.parent;if(p.unit!==X.AUTO){var k=j.calRelative(r,"top",p,m);this.__offsetY(k),n.top=k,n.bottom="auto"}else if(y.unit!==X.AUTO){var x=j.calRelative(r,"bottom",y,m);this.__offsetY(-x),n.bottom=x,n.top="auto"}else n.top=n.bottom="auto";if(g.unit!==X.AUTO){var b=j.calRelative(r,"left",g,m,!0);this.__offsetX(b),n.left=b,n.right="auto"}else if(v.unit!==X.AUTO){var w=j.calRelative(r,"right",v,m,!0);this.__offsetX(-w),n.right=w,n.left="auto"}else n.left=n.right="auto"}n.width=this.width,n.height=this.height,n.outerWidth=this.outerWidth,n.outerHeight=this.outerHeight}}},{key:"isGeom",value:function(){return"$"===this.tagName.charAt(0)}},{key:"isRoot",value:function(){return!this.parent}},{key:"__mpWidth",value:function(t,e){return t.unit===X.PX?t.value:t.unit===X.PERCENT?t.value*e*.01:0}},{key:"__preLayout",value:function(t){var e=t.x,i=t.y,r=t.w,n=t.h;this.__x=e,this.__y=i;var o,a,s=this.currentStyle,h=this.computedStyle,u=s.width,l=s.height,f=h.borderTopWidth,c=h.borderRightWidth,_=h.borderBottomWidth,d=h.borderLeftWidth,p=h.marginTop,v=h.marginRight,y=h.marginBottom,g=h.marginLeft,m=h.paddingTop,k=h.paddingRight,x=h.paddingBottom,b=h.paddingLeft;if(u.unit!==X.AUTO)switch(o=!0,u.unit){case X.PX:r=u.value;break;case X.PERCENT:r*=.01*u.value}if(l.unit!==X.AUTO)switch(a=!0,l.unit){case X.PX:n=l.value;break;case X.PERCENT:n*=.01*l.value}return e+=d+g+b,t.x=e,i+=f+p+m,t.y=i,u.unit===X.AUTO&&(r-=d+c+g+v+b+k),l.unit===X.AUTO&&(n-=f+_+p+y+m+x),{fixedWidth:o,fixedHeight:a,x:e,y:i,w:r,h:n}}},{key:"render",value:function(t){(this.__renderMode=t)===pt.SVG&&(this.__virtualDom={bb:[],children:[],transform:[]});for(var e=this.isDestroyed,i=this.ctx,r=this.currentStyle,n=this.computedStyle,o=this.width,a=this.height,s=this.parent,h=[1,0,0,1,0,0];s;){if(s.matrixEvent){h=vt.mergeMatrix(s.matrixEvent,h);break}s=s.parent}1===h[0]&&0===h[1]&&0===h[1]&&1===h[1]&&0===h[1]&&0===h[1]||(t===pt.CANVAS?this.__matrix=this.__matrixEvent=h:t===pt.SVG&&(this.__matrixEvent=h)),t===pt.CANVAS&&i.setTransform.apply(i,dt(h));var u=n.display,l=n.marginTop,f=n.marginRight,c=n.marginBottom,_=n.marginLeft,d=n.paddingTop,p=n.paddingRight,v=n.paddingBottom,y=n.paddingLeft,g=n.backgroundGradient,m=n.backgroundColor,k=n.borderTopWidth,x=n.borderTopColor,b=n.borderTopStyle,w=n.borderRightWidth,A=n.borderRightColor,T=n.borderRightStyle,S=n.borderBottomWidth,E=n.borderBottomColor,P=n.borderBottomStyle,M=n.borderLeftWidth,O=n.borderLeftColor,C=n.borderLeftStyle,N=n.visibility,R=r.transform,W=r.transformOrigin,L=this.rx,B=this.ry,I=L+_,F=I+M,H=F+o+y+p,D=H+w,X=B+l,G=X+k,U=G+a+d+v,j=U+S,V=o+y+p,z=a+d+v,Y=V+_+M+w+f,$=z+l+k+S+c,q=vt.calOrigin(W,L,B,Y,$);if(n.transformOrigin=q,R){var K=vt.calMatrix(R,q,L,B,Y,$);this.__matrix=this.matrix?vt.mergeMatrix(this.matrix,K):K,n.transform="matrix("+K.join(", ")+")";for(var Z=this.parent;Z;){if(Z.matrixEvent){K=vt.mergeMatrix(Z.matrixEvent,K);break}Z=Z.parent}this.__matrixEvent=K,t===pt.CANVAS?i.setTransform.apply(i,dt(K)):t===pt.SVG&&this.addTransform(["matrix",this.matrix.join(",")])}else n.transform="matrix(1, 0, 0, 1, 0, 0)";if(!e&&"none"!==u&&"hidden"!==N){if(g){var Q=g.k,J=g.v,tt=F+.5*V,et=G+.5*z;if("linear"===Q){var it=yt.getLinear(J,tt,et,V,z);if(t===pt.CANVAS)i.beginPath(),i.fillStyle=this.__getBgLg(t,it),i.rect(F,G,V,z),i.fill(),i.closePath();else if(t===pt.SVG){var rt=this.__getBgLg(t,it);this.addBackground([["x",F],["y",G],["width",V],["height",z],["fill",rt]])}}else if("radial"===Q){var nt=yt.getRadial(J,tt,et,F,G,H,U);if(t===pt.CANVAS)i.beginPath(),i.fillStyle=this.__getBgRg(t,nt),i.rect(F,G,V,z),i.fill(),i.closePath();else if(t===pt.SVG){var ot=this.__getBgRg(t,nt);this.addBackground([["x",F],["y",G],["width",V],["height",z],["fill",ot]])}}}else"transparent"!==m&&(t===pt.CANVAS?(i.beginPath(),i.fillStyle=m,i.rect(F,G,V,z),i.fill(),i.closePath()):t===pt.SVG&&this.addBackground([["x",F],["y",G],["width",V],["height",z],["fill",m]]));if(0<k&&"transparent"!==x){var at=Math.atan(k/M),st=Math.atan(k/w);Ft(t,gt.calPoints(k,b,at,st,I,F,H,D,X,G,U,j,0),x,i,this)}if(0<w&&"transparent"!==A){var ht=Math.atan(w/k),ut=Math.atan(w/S);Ft(t,gt.calPoints(w,T,ht,ut,I,F,H,D,X,G,U,j,1),A,i,this)}if(0<S&&"transparent"!==E){var lt=Math.atan(S/M),ft=Math.atan(S/w);Ft(t,gt.calPoints(S,P,lt,ft,I,F,H,D,X,G,U,j,2),E,i,this)}if(0<M&&"transparent"!==O){var ct=Math.atan(M/k),_t=Math.atan(M/S);Ft(t,gt.calPoints(M,C,ct,_t,I,F,H,D,X,G,U,j,3),O,i,this)}}}},{key:"__destroy",value:function(){var t=this.props.ref;if(t){var e=this.host||this.root;e&&e.ref[t]&&delete e.ref[t]}this.animation&&this.animation.__destroy(),H(F(m.prototype),"__destroy",this).call(this),this.__matrix=this.__matrixEvent=null}},{key:"__emitEvent",value:function(e,i){var t=e.event.type,r=e.x,n=e.y,o=e.covers,a=this.isDestroyed,s=this.listener,h=this.children,u=this.computedStyle,l=this.outerWidth,f=this.outerHeight,c=this.matrixEvent;if(!a&&"none"!==u.display&&!e.__stopPropagation){var _,d;if(s.hasOwnProperty(t)&&(_=s[t]),i){if(this.isGeom()||h.forEach(function(t){(t instanceof m||t instanceof ut)&&t.__emitEvent(e,i)&&(d=!0)}),!d&&this.root.__touchstartTarget!==this)return;if(e.__stopPropagation)return;return"touchmove"!==t&&"touchend"!==t&&"touchcancel"!==t||(e.target=this.root.__touchstartTarget),_&&_.forEach(function(t){e.__stopImmediatePropagation||t(e)}),!0}if(!this.isGeom()){for(var p=h.length-1;0<=p;p--){var v=h[p];v instanceof m&&-1<["absolute","relative"].indexOf(v.computedStyle.position)?v.__emitEvent(e)&&(d=!0):v instanceof ut&&-1<["absolute","relative"].indexOf(v.computedStyle.position)&&v.__emitEvent(e)&&(d=!0)}for(var y=h.length-1;0<=y;y--){var g=h[y];g instanceof m&&-1===["absolute","relative"].indexOf(g.computedStyle.position)?g.__emitEvent(e)&&(d=!0):g instanceof ut&&-1===["absolute","relative"].indexOf(g.computedStyle.position)&&g.__emitEvent(e)&&(d=!0)}}if(!e.__stopPropagation)return d||this.willResponseEvent(e)?(o.push({x:r,y:n,w:l,h:f,matrixEvent:c}),_&&_.forEach(function(t){e.__stopImmediatePropagation||G.isFunction(t)&&t(e)}),!0):void 0}}},{key:"willResponseEvent",value:function(t){var e=t.x,i=t.y,r=t.covers,n=this.rx,o=this.ry,a=this.outerWidth,s=this.outerHeight,h=this.matrixEvent;if(vt.pointInQuadrilateral(e-n,i-o,0,0,a,0,0,s,a,s,h)){for(var u=0,l=r.length;u<l;u++){var f=r[u],c=f.x,_=f.y,d=f.w,p=f.h,v=f.matrixEvent;if(vt.pointInQuadrilateral(e-n,i-o,c-n,_-o,c-n+d,_-o,c-n,_-o+p,c-n+d,_-o+p,v))return}return t.target||(t.target=this,"touchstart"===t.event.type&&(this.root.__touchstartTarget=this)),!0}}},{key:"__getBgLg",value:function(t,e){if(t===pt.CANVAS){var i=this.ctx.createLinearGradient(e.x1,e.y1,e.x2,e.y2);return e.stop.forEach(function(t){i.addColorStop(t[1],t[0])}),i}if(t===pt.SVG){var r=this.defs.add({tagName:"linearGradient",props:[["x1",e.x1],["y1",e.y1],["x2",e.x2],["y2",e.y2]],stop:e.stop});return"url(#".concat(r,")")}}},{key:"__getBgRg",value:function(t,e){if(t===pt.CANVAS){var i=this.ctx.createRadialGradient(e.cx,e.cy,0,e.cx,e.cy,e.r);return e.stop.forEach(function(t){i.addColorStop(t[1],t[0])}),i}if(t===pt.SVG){var r=this.defs.add({tagName:"radialGradient",props:[["cx",e.cx],["cy",e.cy],["r",e.r]],stop:e.stop});return"url(#".concat(r,")")}}},{key:"addBorder",value:function(t){this.virtualDom.bb.push({type:"item",tagName:"path",props:t})}},{key:"addBackground",value:function(t){this.virtualDom.bb.push({type:"item",tagName:"rect",props:t})}},{key:"addTransform",value:function(t){this.virtualDom.transform.push(t)}},{key:"animate",value:function(t,e){return this.animation&&this.animation.__destroy(),(this.__animation=new It(this,t,e)).play()}},{key:"__computed",value:function(e){var i=this,r=this.needCompute;(r||e)&&(this.__needCompute=!1,j.computed(this,this.isRoot())),this.isGeom()||this.children.forEach(function(t){t instanceof m||t instanceof ut?t.__computed(r||e):(r||e)&&(t.__style=i.currentStyle,j.computed(t),t.__measure())})}},{key:"tagName",get:function(){return this.__tagName}},{key:"outerWidth",get:function(){var t=this.computedStyle,e=t.borderLeftWidth,i=t.borderRightWidth,r=t.marginRight,n=t.marginLeft,o=t.paddingRight,a=t.paddingLeft;return this.width+e+i+n+r+a+o}},{key:"outerHeight",get:function(){var t=this.computedStyle,e=t.borderTopWidth,i=t.borderBottomWidth,r=t.marginTop,n=t.marginBottom,o=t.paddingTop,a=t.paddingBottom;return this.height+e+i+r+n+o+a}},{key:"listener",get:function(){return this.__listener}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){return this.__matrixEvent}},{key:"id",get:function(){return this.__id}},{key:"class",get:function(){return this.__class||[]}},{key:"animation",get:function(){return this.__animation}},{key:"animateStyle",get:function(){return this.__animateStyle}},{key:"currentStyle",get:function(){var t=this.animation;if(t){var e=t.playState,i=t.options;return"idle"===e?this.style:"finished"===e&&-1===["forwards","both"].indexOf(i.fill)?this.style:this.animateStyle}return this.style}},{key:"needCompute",get:function(){return this.__needCompute}}]),m}(),Dt=function(){function i(t,e){f(this,i),this.__list=[],this.__x=t,this.__y=e,this.__baseLine=0}return s(i,[{key:"add",value:function(t){this.list.push(t)}},{key:"__calBaseLine",value:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.baseLine)}),e}},{key:"verticalAlign",value:function(){var i=this.__baseLine=this.__calBaseLine();1<this.list.length&&this.list.forEach(function(t){var e=t.baseLine;e!==i&&t.__offsetY(i-e)})}},{key:"horizonAlign",value:function(e){this.list.forEach(function(t){t.__offsetX(e)})}},{key:"list",get:function(){return this.__list}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){var e=0;return this.list.forEach(function(t){e+=t.width}),e}},{key:"height",get:function(){var e=0;return this.list.forEach(function(t){e=Math.max(e,t.height)}),e}},{key:"baseLine",get:function(){return this.__baseLine}},{key:"size",get:function(){return this.__list.length}}]),i}(),Xt={},Gt=function(){function o(t,e){return f(this,o),c(this,F(o).call(this,t,e))}return t(o,Ht),s(o,[{key:"__init",value:function(){var t=this.style;j.normalize(t,ht.geom);var e=this.props.ref;if(e){var i=this.host||this.root;i&&(i.ref[e]=this)}}},{key:"__tryLayInline",value:function(t,e){var i=this.currentStyle.width;return i.unit===X.PX?t-i.value:i.unit===X.PERCENT?t-e*i.value*.01:t}},{key:"__calAutoBasis",value:function(t){var e=0,i=0,r=0,n=this.currentStyle,o=this.computedStyle,a=n.width,s=n.height,h=o.borderTopWidth,u=o.borderRightWidth,l=o.borderBottomWidth,f=o.borderLeftWidth,c=t?a:s;if(c.unit!==X.AUTO&&(e=r+=c.value),t){var _=u+f;e+=_,r+=_,i+=_}else{var d=h+l;e+=d,r+=d,i+=d}return{b:e,min:i,max:r}}},{key:"__layoutBlock",value:function(t){var e=this.__preLayout(t),i=e.fixedHeight,r=e.w,n=e.h,o=this.currentStyle,a=o.marginLeft,s=o.marginRight,h=o.width;if(this.__width=r,this.__height=i?n:0,a.unit===X.AUTO&&s.unit===X.AUTO&&h.unit!==X.AUTO){var u=this.outerWidth;u<t.w&&this.__offsetX(.5*(t.w-u))}}},{key:"__layoutFlex",value:function(t){this.__layoutBlock(t)}},{key:"__layoutInline",value:function(t){var e=this.__preLayout(t),i=e.fixedWidth,r=e.fixedHeight,n=e.x,o=e.y,a=e.w,s=e.h;this.__width=i?a:n-t.x,this.__height=r?s:o-t.y}},{key:"__preRender",value:function(t){var e=this.rx,i=this.ry,r=this.width,n=this.height,o=this.computedStyle,a=o.borderTopWidth,s=o.borderLeftWidth,h=o.display,u=o.stroke,l=o.strokeWidth,f=o.strokeDasharray,c=o.strokeLinecap,_=o.fill,d=o.marginTop,p=o.marginLeft,v=o.paddingTop,y=o.paddingRight,g=o.paddingBottom,m=o.paddingLeft,k=o.visibility,x=e+s+p+m,b=i+a+d+v,w=x+.5*r,A=b+.5*n,T=r+m+y,S=n+v+g;if(0<l&&-1<u.indexOf("linear-gradient")){var E=yt.parseGradient(u);if(E){var P=yt.getLinear(E.v,w,A,T,S);u=this.__getBgLg(t,P)}}if(-1<_.indexOf("linear-gradient")){var M=yt.parseGradient(_);if(M){var O=yt.getLinear(M.v,w,A,T,S);_=this.__getBgLg(t,O)}}else if(-1<_.indexOf("radial-gradient")){var C=yt.parseGradient(_);if(C){var N=yt.getRadial(C.v,w,A,x,b,b+T,b+S);_=this.__getBgRg(t,N)}}return{x:e,y:i,originX:x,originY:b,cx:w,cy:A,display:h,stroke:u,strokeWidth:l,strokeDasharray:f,strokeLinecap:c,fill:_,visibility:k}}},{key:"render",value:function(t){H(F(o.prototype),"render",this).call(this,t);var e=this.isDestroyed,i=this.computedStyle,r=i.display,n=i.visibility;return e||"none"===r?{isDestroyed:e,display:r,visibility:n}:(t===pt.SVG&&(this.__virtualDom=h({},H(F(o.prototype),"virtualDom",this),{type:"geom"})),this.__preRender(t))}},{key:"addGeom",value:function(t,e){e=G.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"tagName",get:function(){return this.__tagName}},{key:"baseLine",get:function(){return this.__height}}],[{key:"getRegister",value:function(t){if(!Xt.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return Xt[t]}},{key:"register",value:function(t,e){if(o.hasRegister(t))throw new Error("Geom has already register: ".concat(t));Xt[t]=e}},{key:"hasRegister",value:function(t){return Xt.hasOwnProperty(t)}}]),o}(),Ut={div:!0,span:!0,img:!0},jt={span:!0,img:!0},Vt=function(){function v(t,e,i){var r;return f(this,v),(r=c(this,F(v).call(this,t,e))).__children=i,r.__flowChildren=[],r.__absChildren=[],r.__lineGroups=[],r}return t(v,Ht),s(v,[{key:"__traverse",value:function(e,i,t){var r=this,n=[];this.__traverseChildren(this.children,n,e,i,t);for(var o=n.length-1;0<o;o--){var a=n[o];if(a instanceof $){var s=n[o-1];s instanceof $?(s.content+=a.content,n.splice(o,1)):o--}}var h=null;n.forEach(function(t){t.__ctx=e,t.__defs=i,h&&((h.__next=t).__prev=h),t.__parent=r,h=t}),this.__children=n}},{key:"__traverseChildren",value:function(t,e,i,r,n){var o=this;if(Array.isArray(t))t.forEach(function(t){o.__traverseChildren(t,e,i,r,n)});else if(t instanceof v||t instanceof ut)e.push(t),t.__traverse(i,r,n);else if(t instanceof Gt)e.push(t);else if(!G.isNil(t)){var a=new $(t);a.__renderMode=n,e.push(a)}}},{key:"__init",value:function(){var e=this,i=this.__style;i.display&&-1!==["flex","block","inline","none"].indexOf(i.display)||(jt.hasOwnProperty(this.tagName)?i.display="inline":i.display="block"),j.normalize(i,ht.dom),this.children.forEach(function(t){t instanceof Ht||t instanceof ut?t.__init():t.__style=i,t instanceof $||"absolute"!==t.style.position?e.__flowChildren.push(t):e.__absChildren.push(t)});var t=this.props.ref;if(t){var r=this.host||this.root;r&&(r.ref[t]=this)}}},{key:"__tryLayInline",value:function(t,e){var i=this.flowChildren,r=this.currentStyle.width;if(r.unit===X.PX)return t-r.value;if(r.unit===X.PERCENT)return t-e*r.value*.01;for(var n=0;n<i.length;n++){if(t<0)return t;var o=i[n];t-=o instanceof Ht?o.__tryLayInline(t,e):o.textWidth}return t}},{key:"__offsetX",value:function(e,i){H(F(v.prototype),"__offsetX",this).call(this,e,i),this.flowChildren.forEach(function(t){t&&t.__offsetX(e,i)})}},{key:"__offsetY",value:function(e,i){H(F(v.prototype),"__offsetY",this).call(this,e,i),this.flowChildren.forEach(function(t){t&&t.__offsetY(e,i)})}},{key:"__calAutoBasis",value:function(o,a,s,t){var h=0,u=0,l=0,e=this.flowChildren,i=this.currentStyle,r=this.computedStyle,n=i.width,f=i.height,c=i.marginLeft,_=i.marginTop,d=i.marginRight,p=i.marginBottom,v=i.paddingLeft,y=i.paddingTop,g=i.paddingRight,m=i.paddingBottom,k=r.borderTopWidth,x=r.borderRightWidth,b=r.borderBottomWidth,w=r.borderLeftWidth,A=o?n:f;if(A.unit===X.PX&&(h=l=A.value,t&&(u=h)),e.forEach(function(t){if(t instanceof Ht||t instanceof ut){var e=t.__calAutoBasis(o,a,s,!0),i=e.b,r=e.min,n=e.max;h=Math.max(h,i),u=Math.max(u,r),l=Math.max(l,n)}else l=o?(u=Math.max(t.charWidth,u),Math.max(t.textWidth,l)):(t.__layout({x:0,y:0,w:a,h:s},!0),u=Math.max(u,t.height),Math.max(l,t.height))}),o){var T=x+w+(this.__calMp(c,a)+this.__calMp(d,a)+this.__calMp(v,a)+this.__calMp(g,a));h+=T,l+=T,u+=T}else{var S=k+b+(this.__calMp(_,a)+this.__calMp(p,a)+this.__calMp(y,a)+this.__calMp(m,a));h+=S,l+=S,u+=S}return{b:h,min:u,max:l}}},{key:"__calMp",value:function(t,e){var i=0;return t.unit===X.PX?i+=t.value:t.unit===X.PERCENT&&(t.value*=.01*e,t.unit=X.PX,i+=t.value),i}},{key:"__layoutBlock",value:function(e){var t=this.flowChildren,i=this.currentStyle,r=this.computedStyle,n=this.lineGroups,o=r.textAlign,a=this.__preLayout(e),s=a.fixedHeight,h=a.x,u=a.y,l=a.w,f=a.h,c=new Dt(h,u);t.forEach(function(t){t instanceof Ht||t instanceof ut?"inline"===t.currentStyle.display?h===e.x?(c.add(t),t.__layout({x:h,y:u,w:l,h:f}),h+=t.outerWidth):(0<=t.__tryLayInline(l-h,l)?t.__layout({x:h,y:u,w:l,h:f}):(n.push(c),c.verticalAlign(),h=e.x,u+=c.height,t.__layout({x:e.x,y:u,w:l,h:f}),c=new Dt(h,u)),h+=t.outerWidth,c.add(t)):(c.size&&(n.push(c),c.verticalAlign(),u+=c.height,c=new Dt(e.x,u)),t.__layout({x:e.x,y:u,w:l,h:f}),h=e.x,u+=t.outerHeight):h===e.x?(c.add(t),t.__layout({x:h,y:u,w:l,h:f}),h+=t.width):(0<=t.__tryLayInline(l-h,l)?t.__layout({x:h,y:u,w:l,h:f}):(n.push(c),c.verticalAlign(),h=e.x,u+=c.height,t.__layout({x:e.x,y:u,w:l,h:f}),c=new Dt(h,u)),h+=t.width,c.add(t))}),c.size&&(n.push(c),c.verticalAlign(),u+=c.height),this.__width=l,this.__height=s?f:u-e.y,-1<["center","right"].indexOf(o)&&n.forEach(function(t){var e=l-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)}),this.__marginAuto(i,e)}},{key:"__marginAuto",value:function(t,e){if(t.marginLeft.unit===X.AUTO&&t.marginRight.unit===X.AUTO&&t.width.unit!==X.AUTO){var i=this.outerWidth;i<e.w&&this.__offsetX(.5*(e.w-i),!0)}}},{key:"__layoutFlex",value:function(t){var e=this.flowChildren,i=(this.style,this.currentStyle),r=i.flexDirection,n=i.justifyContent,o=i.alignItems,a=this.__preLayout(t),s=a.fixedWidth,T=a.fixedHeight,S=a.x,E=a.y,P=a.w,M=a.h,O="row"===r;if(!O&&!T)return e.forEach(function(t){if(t instanceof Ht||t instanceof ut){var e=t.currentStyle,i=t.computedStyle,r=e.display,n=e.flexDirection,o=e.width;"inline"===r?e.display=i.display="block":"flex"===r&&"row"===n&&o.unit===X.AUTO&&(o.value=P,o.unit=X.PX),t.__layout({x:S,y:E,w:P,h:M}),E+=t.outerHeight}else t.__layout({x:S,y:E,w:P,h:M}),E+=t.outerHeight}),this.__width=P,void(this.__height=E-t.y);var C=[],N=[],R=[],W=[],L=0,B=0,I=0,l=0;e.forEach(function(t){if(t instanceof Ht||t instanceof ut){var e=t.currentStyle,i=t.computedStyle,r=e.flexGrow,n=e.flexShrink,o=e.flexBasis;C.push(r),N.push(n),L+=r,B+=n;var a=t.__calAutoBasis(O,P,M),s=a.b,h=a.min,u=a.max;o.unit===X.AUTO?(R.push(u),I+=u):o.unit===X.PX?(i.flexBasis=s=o.value,R.push(s),I+=s):o.unit===X.PERCENT&&(s=i.flexBasis=(O?P:M)*o.value*.01,R.push(s),I+=s),l+=u,W.push(h)}else C.push(0),N.push(1),B+=1,O?(R.push(t.textWidth),I+=t.textWidth,l+=t.textWidth,W.push(t.charWidth)):(t.__layout({x:0,y:0,w:P,h:M},!0),R.push(t.height),I+=t.height,l+=t.height,W.push(t.height))});var F=0,H=(O?P:M)<l;e.forEach(function(t,e){var i,r=N[e],n=C[e];if(H){var o=I-(O?P:M);i=r?R[e]-o*r/B:R[e]}else{var a=(O?P:M)-I;i=n?R[e]+a*n/L:R[e]}if(i=Math.max(i,W[e]),t instanceof Ht||t instanceof ut){var s=t.currentStyle,h=t.computedStyle,u=s.display,l=s.flexDirection,f=s.width,c=s.height;if(O?("inline"===u?s.display=h.display="block":"flex"===u&&"column"===l&&T&&c.unit===X.AUTO&&(c.value=M,c.unit=X.PX),t.__layout({x:S,y:E,w:i,h:M})):("inline"===u?s.display=h.display="block":"flex"===u&&"row"===l&&f.unit===X.AUTO&&(f.value=P,f.unit=X.PX),t.__layout({x:S,y:E,w:P,h:i})),H&&r||!H&&n){var _=h.borderTopWidth,d=h.borderRightWidth,p=h.borderBottomWidth,v=h.borderLeftWidth,y=h.marginTop,g=h.marginRight,m=h.marginBottom,k=h.marginLeft,x=h.paddingTop,b=h.paddingRight,w=h.paddingBottom,A=h.paddingLeft;O?t.__width=i-k-g-A-b-v-d:t.__height=i-y-m-x-w-_-p}}else t.__layout({x:S,y:E,w:O?i:P,h:O?M:i});F=O?(S+=t.outerWidth,Math.max(F,t.outerHeight)):(E+=t.outerHeight,Math.max(F,t.outerWidth))});var h=O?P-S+t.x:M-E+t.y;if(!H&&0===L&&0<h){var u=e.length;if("flex-end"===n)for(var f=0;f<u;f++){var c=e[f];O?c.__offsetX(h,!0):c.__offsetY(h,!0)}else if("center"===n)for(var _=.5*h,d=0;d<u;d++){var p=e[d];O?p.__offsetX(_,!0):p.__offsetY(_,!0)}else if("space-between"===n)for(var v=h/(u-1),y=1;y<u;y++){var g=e[y];O?g.__offsetX(v*y,!0):g.__offsetY(v*y,!0)}else if("space-around"===n)for(var m=h/(u+1),k=0;k<u;k++){var x=e[k];O?x.__offsetX(m*(k+1),!0):x.__offsetY(m*(k+1),!0)}}O?(T&&(F=M),E+=F):s&&(F=P),"stretch"===o?e.forEach(function(t){var e=t.computedStyle,i=t.currentStyle,r=e.borderTopWidth,n=e.borderRightWidth,o=e.borderBottomWidth,a=e.borderLeftWidth,s=e.marginTop,h=e.marginRight,u=e.marginBottom,l=e.marginLeft,f=e.paddingTop,c=e.paddingRight,_=e.paddingBottom,d=e.paddingLeft;O?i.height.unit===X.AUTO&&(t.__height=e.height=F-s-u-f-_-r-o):i.width.unit===X.AUTO&&(t.__width=e.width=F-l-h-d-c-n-a)}):"center"===o?e.forEach(function(t){var e=F-t.outerHeight;0<e&&t.__offsetY(.5*e,!0)}):"flex-end"===o&&e.forEach(function(t){var e=F-t.outerHeight;0<e&&t.__offsetY(e,!0)}),this.__width=P,this.__height=T?M:E-t.y,this.__marginAuto(i,t)}},{key:"__layoutInline",value:function(e){var i=this,t=this.flowChildren,r=(this.currentStyle,this.computedStyle),n=this.lineGroups,o=r.textAlign,a=this.__preLayout(e),s=a.fixedWidth,h=a.fixedHeight,u=a.x,l=a.y,f=a.w,c=a.h,_=u,d=new Dt(u,l);t.forEach(function(t){if(t instanceof Ht||t instanceof ut){if("absolute"===t.currentStyle.position)return void i.absChildren.push(t);if(t.currentStyle.display=t.computedStyle.display="inline",u===e.x)d.add(t),t.__layout({x:u,y:l,w:f,h:c}),u+=t.outerWidth,_=Math.max(_,u);else 0<=t.__tryLayInline(f-u,f)?t.__layout({x:u,y:l,w:f,h:c}):(n.push(d),d.verticalAlign(),u=e.x,l+=d.height,t.__layout({x:e.x,y:l,w:f,h:c}),d=new Dt(u,l)),u+=t.outerWidth,_=Math.max(_,u),d.add(t)}else{if(u===e.x)d.add(t),t.__layout({x:u,y:l,w:f,h:c}),u+=t.width,_=Math.max(_,u);else 0<=t.__tryLayInline(f-u,f)?t.__layout({x:u,y:l,w:f,h:c}):(n.push(d),d.verticalAlign(),u=e.x,l+=d.height,t.__layout({x:e.x,y:l,w:f,h:c}),d=new Dt(u,l)),u+=t.width,_=Math.max(_,u),d.add(t)}}),d.size&&(n.push(d),d.verticalAlign(),l+=d.height),this.__width=s?f:_-e.x,this.__height=h?c:l-e.y,-1<["center","right"].indexOf(o)&&n.forEach(function(t){var e=i.__width-t.width;0<e&&t.horizonAlign("center"===o?.5*e:e)})}},{key:"__layoutAbs",value:function(i,k){var x=i.x,b=i.y,t=i.width,e=i.height,r=i.currentStyle,n=i.computedStyle,o=this.isDestroyed,a=this.children,s=this.absChildren,h=r.display,u=n.borderTopWidth,l=n.borderLeftWidth,f=n.marginTop,c=n.marginLeft,_=n.paddingTop,d=n.paddingRight,p=n.paddingBottom,w=n.paddingLeft;if(!o&&"none"!==h){x+=c+l,b+=f+u;var A=t+w+d,T=e+_+p;s.forEach(function(t){var e,i,r,n,o,a,s,h,u,l,f=t.currentStyle,c=t.computedStyle,_=f.left,d=f.top,p=f.right,v=f.bottom,y=f.width,g=f.height;if(void 0!==_&&_.unit!==X.AUTO?(l=!0,c.left=j.calAbsolute(f,"left",_,A)):c.left="auto",void 0!==p&&p.unit!==X.AUTO?(h=!0,c.right=j.calAbsolute(f,"right",p,A)):c.right="auto",void 0!==d&&d.unit!==X.AUTO?(s=!0,c.top=j.calAbsolute(f,"top",d,T)):c.top="auto",void 0!==v&&v.unit!==X.AUTO?(u=!0,c.bottom=j.calAbsolute(f,"bottom",v,T)):c.bottom="auto",l&&h?(e=x+c.left,r=x+A-c.right-e):l&&y.unit!==X.AUTO?(e=x+c.left,r=y.unit===X.PX?y.value:A*y.value*.01):h&&y.unit!==X.AUTO?(r=y.unit===X.PX?y.value:A*y.value*.01,e=x+A-c.right-r):l?e=x+c.left:h?(e=x+A-c.right,o=!0):(e=x+w,y.unit!==X.AUTO&&(r=y.unit===X.PX?y.value:A*y.value*.01)),s&&u)i=b+c.top,n=b+T-c.bottom-i;else if(s&&g.unit!==X.AUTO)i=b+c.top,n=g.unit===X.PX?g.value:T*g.value*.01;else if(u&&g.unit!==X.AUTO)n=g.unit===X.PX?g.value:T*g.value*.01,i=b+T-c.bottom-n;else if(s)i=b+c.top;else if(u)i=b+T-c.bottom,a=!0;else{i=b;for(var m=t.prev;m;){if(m instanceof $||"absolute"!==m.computedStyle.position){i=m.y+m.outerHeight;break}m=m.prev}m||(i=b),g.unit!==X.AUTO&&(n=g.unit===X.PX?g.value:T*g.value*.01)}void 0!==r&&(f.width={value:r,unit:X.PX}),void 0!==n&&(f.height={value:n,unit:X.PX}),f.display="inline",o&&a?(t.__layout({x:e,y:i,w:r,h:n}),t.__offsetX(-t.width,!0),t.__offsetY(-t.height,!0)):o?(t.__layout({x:e,y:i,w:r,h:k.h-i}),t.__offsetX(-t.width,!0)):a?(t.__layout({x:e,y:i,w:k.w-e,h:n}),t.__offsetY(-t.height,!0)):t.__layout({x:e,y:i,w:k.w-e,h:k.h-i}),f.display=c.display="block"}),a.forEach(function(t){if(t instanceof v)t.__layoutAbs(-1<["absolute","relative"].indexOf(t.computedStyle.position)?t:i,k);else if(t instanceof ut){var e=t.shadowRoot;e instanceof v&&e.__layoutAbs(e,k)}})}}},{key:"render",value:function(e){H(F(v.prototype),"render",this).call(this,e);var t=this.isDestroyed,i=this.computedStyle,r=i.display,n=i.visibility,o=this.flowChildren,a=this.children;if(!t&&"none"!==r&&"hidden"!==n&&(o.forEach(function(t){(t instanceof $||"static"===t.computedStyle.position)&&t.render(e),t instanceof ut&&"static"===t.computedStyle.position&&t.shadowRoot.render(e)}),a.forEach(function(t){t instanceof Ht&&-1<["relative","absolute"].indexOf(t.computedStyle.position)&&t.render(e),t instanceof ut&&-1<["relative","absolute"].indexOf(t.computedStyle.position)&&t.shadowRoot.render(e)}),e===pt.SVG)){var s=this.children.slice(0);M(s,function(t,e){if("static"===e.computedStyle.position&&-1<["relative","absolute"].indexOf(t.computedStyle.position))return!0}),this.__virtualDom=h({},H(F(v.prototype),"virtualDom",this),{type:"dom",children:s.map(function(t){return t.virtualDom})})}}},{key:"__destroy",value:function(){H(F(v.prototype),"__destroy",this).call(this),this.children.forEach(function(t){t.__destroy()}),this.children.splice(0),this.flowChildren.splice(0),this.absChildren.splice(0),this.lineGroups.splice(0)}},{key:"tagName",get:function(){return this.__tagName}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.__flowChildren}},{key:"absChildren",get:function(){return this.__absChildren}},{key:"lineGroups",get:function(){return this.__lineGroups}},{key:"baseLine",get:function(){var t=this.lineGroups.length;if(t){var e=this.lineGroups[t-1];return e.y-this.y+e.baseLine}return this.y}}],[{key:"isValid",value:function(t){return Ut.hasOwnProperty(t)}}]),v}(),zt={},Yt=function(){function I(t,e){var i;if(f(this,I),!(i=c(this,F(I).call(this,t,e,[]))).src||!i.src.trim()){i.__error=!0;var r=u(i).style,n=r.width,o=r.height;n.unit===X.AUTO&&(n.value=32,n.unit=X.PX),o.unit===X.AUTO&&(o.value=32,o.unit=X.PX)}return i}return t(I,Vt),s(I,[{key:"__layout",value:function(t){var e=this;H(F(I.prototype),"__layout",this).call(this,t);var i=this.isDestroyed,r=this.src,n=this.currentStyle,o=n.display,a=n.width,s=n.height;if(!i&&"none"!==o){var h=this.width,u=this.height,l=zt[this.src]=zt[this.src]||{state:0,task:[]},f=function(t){t.success?e.__source=t.source:e.__error=!0,e.__imgWidth=t.width,e.__imgHeight=t.height,a.unit===X.AUTO&&s.unit===X.AUTO?(n.width={value:t.width,unit:X.PX},n.height={value:t.height,unit:X.PX}):a.unit===X.AUTO?n.width={value:u*t.width/t.height,unit:X.PX}:s.unit===X.AUTO&&(n.height={value:h*t.height/t.width,unit:X.PX}),e.root&&e.root.refreshTask()};2===l.state?f(l):1===l.state?l.task.push(f):0===l.state&&(l.state=1,l.task.push(f),z.measureImg(r,function(t){l.success=t.success,t.success?(l.width=t.width,l.height=t.height,l.source=t.source):(l.width=32,l.height=32),l.state=2,l.task.forEach(function(t){return t(l)}),l.task.splice(0)}))}}},{key:"__addGeom",value:function(t,e){e=G.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"render",value:function(t){H(F(I.prototype),"render",this).call(this,t);var e=this.ctx,i=this.rx,r=this.ry,n=this.width,o=this.height,a=this.src,s=this.isDestroyed,h=this.computedStyle,u=h.display,l=h.borderTopWidth,f=h.borderLeftWidth,c=h.marginTop,_=h.marginLeft,d=h.paddingTop,p=h.paddingLeft;if(!s&&"none"!==u){var v=i+_+f+p,y=r+c+l+d;if(this.__error){var g=.02*Math.min(n,o),m="#DDD",k=v+.7*n,x=y+.3*o,b=5*g,w=[[v+.15*n,y+.7*o],[v+.3*n,y+.4*o],[v+.5*n,y+.6*o],[v+.6*n,y+.5*o],[v+.9*n,y+.8*o],[v+.15*n,y+.8*o]];if(t===pt.CANVAS){e.strokeStyle="#CCC",e.lineWidth=g,e.fillStyle=m,e.beginPath(),e.moveTo(v,y),e.lineTo(v+n,y),e.lineTo(v+n,y+o),e.lineTo(v,y+o),e.lineTo(v,y),e.stroke(),e.closePath(),e.beginPath(),e.arc(k,x,b,0,2*Math.PI),e.fill(),e.closePath(),e.beginPath(),e.moveTo(w[0][0],w[0][1]);for(var A=1,T=w.length;A<T;A++){var S=w[A];e.lineTo(S[0],S[1])}e.lineTo(w[0][0],w[0][1]),e.fill(),e.closePath()}else if(t===pt.SVG){this.__addGeom("rect",[["x",v],["y",y],["width",n],["height",o],["stroke","#CCC"],["stroke-width",g],["fill","transparent"]]),this.__addGeom("circle",[["cx",k],["cy",x],["r",b],["fill",m]]);for(var E="",P=0,M=w.length;P<M;P++){var O=w[P];E+="".concat(O[0],",").concat(O[1]," ")}this.__addGeom("polygon",[["points",E],["fill",m]])}}else{var C;if(void 0!==this.__imgWidth&&(n!==this.__imgWidth||o!==this.__imgHeight)){var N=[["scaleX",{value:n/this.__imgWidth,unit:X.NUMBER}],["scaleY",{value:o/this.__imgHeight,unit:X.NUMBER}]],R=this.outerWidth,W=this.outerHeight,L=vt.calOrigin([{value:0,unit:X.PERCENT},{value:0,unit:X.PERCENT}],i,r,R,W);C=vt.calMatrix(N,L,i,r,R,W),this.matrix?(this.__matrix=C=vt.mergeMatrix(this.__matrix,C),this.__matrixEvent=vt.mergeMatrix(this.__matrixEvent,C)):this.__matrixEvent=C,C="matrix("+C.join(",")+")"}if(t===pt.CANVAS)this.__source&&e.drawImage(this.__source,v,y,n,o);else if(t===pt.SVG){var B=[["xlink:href",a],["x",v],["y",y],["width",C?this.__imgWidth:this.width],["height",C?this.__imgHeight:this.height]];C&&B.push(["transform",C]),this.virtualDom.children.push({type:"img",tagName:"image",props:B})}}}}},{key:"src",get:function(){return this.props.src}},{key:"baseLine",get:function(){return this.height}}]),I}();function $t(t,e,i){var r=t.childNodes;!function(t,e,i){for(var r=e.length,n=i.length,o=0,a=t.childNodes;o<Math.min(r,n);o++)qt(a[o],e[o],i[o]);o<r?ne(t,a,o):o<n&&re(t,a,o,G.joinDef(i[o]))}(r[0],e.defs,i.defs),Jt(r[1],e.bb,i.bb),Qt(t,e,i,!0)}function qt(t,e,i){if(e.k!==i.k)t.insertAdjacentHTML("afterend",G.joinDef(i)),t.parentNode.removeChild(t);else{e.uuid!==i.uuid&&t.setAttribute("id",i.uuid);for(var r={},n=0,o=e.props.length;n<o;n++){var a=D(e.props[n],2),s=a[0],h=a[1];r[s]=h}for(var u=0,l=i.props.length;u<l;u++){var f=D(i.props[u],2);s=f[0],h=f[1];r.hasOwnProperty(s)?(r[s]!==h&&t.setAttribute(s,h),delete r[s]):t.setAttribute(s,h)}for(var s in r)r.hasOwnProperty(s)&&t.removeAttribute(s);for(var c=t.childNodes,_=e.stop.length,d=i.stop.length,p=0;p<Math.min(_,d);p++)Kt(c[p],e.stop[p],i.stop[p]);if(p<_)for(;p<_;p++)ne(t,c,p);else if(p<d)for(;p<d;p++)re(t,c,p,G.joinStop(i.stop[p]))}}function Kt(t,e,i){e[0]!==i[0]&&t.setAttribute("stop-color",i[0]),e[1]!==i[1]&&t.setAttribute("offset",i[1])}function Zt(t,e,i){"dom"===e.type?"dom"===i.type?Qt(t,e,i):"text"===i.type||"img"===i.type?ie(t,i):"geom"===i.type&&function(t,e,i){Jt(t.firstChild,e.bb,i.bb),ie(t.lastChild,i.children)}(t,e,i):"text"===e.type?"dom"===i.type||"geom"===i.type||"img"===i.type?ie(t,i):"text"===i.type&&function(t,e,i){for(var r=e.children.length,n=i.children.length,o=0;o<Math.min(r,n);o++)te(t,o,e.children[o],i.children[o],!0);var a=t.childNodes;if(o<r)for(;o<r;o++)ne(t,a,o);else if(o<n)for(;o<n;o++)re(t,a,o,G.joinVd(i.children[o]))}(t,e,i):"geom"===e.type?"dom"===i.type?function(t,e,i){Jt(t.firstChild,e.bb,i.bb),ie(t.lastChild,i.children)}(t,e,i):"text"===i.type||"img"===i.type?ie(t,i):"geom"===i.type&&function(t,e,i){if(!oe(e.transform,i.transform)){var r=G.joinTransform(i.transform);t.getAttribute("transform")!==r&&t.setAttribute("transform",r)}Jt(t.firstChild,e.bb,i.bb);for(var n=e.children.length,o=i.children.length,a=0,s=t.lastChild,h=s.childNodes;a<Math.min(n,o);a++)te(s,a,e.children[a],i.children[a]);if(a<n)for(;a<n;a++)ne(s,h,a);else if(a<o)for(;a<o;a++)re(s,h,a,G.joinVd(i.children[a]))}(t,e,i):"img"===e.type&&("img"===i.type?ee(t,e,i):ie(t,i))}function Qt(t,e,i,r){if(!oe(e.transform,i.transform)){var n=G.joinTransform(i.transform);t.getAttribute("transform")!==n&&t.setAttribute("transform",n)}r||Jt(t.firstChild,e.bb,i.bb);for(var o=e.children.length,a=i.children.length,s=0,h=t.lastChild,u=h.childNodes;s<Math.min(o,a);s++)Zt(u[s],e.children[s],i.children[s]);if(s<o)for(;s<o;s++)ne(h,u,s);else if(s<a)for(;s<a;s++)re(h,u,s,G.joinVd(i.children[s]))}function Jt(t,e,i){for(var r=e.length,n=i.length,o=0;o<Math.min(r,n);o++)te(t,o,e[o],i[o]);var a=t.childNodes;if(o<r)for(;o<r;o++)ne(t,a,o);else if(o<n)for(;o<n;o++)re(t,a,o,G.joinVd(i[o]))}function te(t,e,i,r,n){var o=t.childNodes;i.tagName!==r.tagName?ie(o[e],r):(ee(o[e],i,r),n&&i.content!==r.content&&(o[e].textContent=r.content))}function ee(t,e,i){for(var r={},n=0,o=e.props.length;n<o;n++){var a=D(e.props[n],2),s=a[0],h=a[1];r[s]=h}for(var u=0,l=i.props.length;u<l;u++){var f=D(i.props[u],2);s=f[0],h=f[1];r.hasOwnProperty(s)?(r[s]!==h&&t.setAttribute(s,h),delete r[s]):t.setAttribute(s,h)}for(var s in r)r.hasOwnProperty(s)&&t.removeAttribute(s)}function ie(t,e){var i;Array.isArray(e)?(i="",e.forEach(function(t){i+=G.joinVd(t)})):i=G.joinVd(e),t.insertAdjacentHTML("afterend",i),t.parentNode.removeChild(t)}function re(t,e,i,r){i>=e.length?t.insertAdjacentHTML("beforeend",r):e[i].insertAdjacentHTML("beforebegin",r)}function ne(t,e,i){e[i]&&t.removeChild(e[i])}function oe(t,e){if(t.length!==e.length)return!1;for(var i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0}var ae=function(){function e(t){f(this,e),this.id=t,this.count=0,this.list=[]}return s(e,[{key:"add",value:function(t){return t.uuid="karas-defs-".concat(this.id,"-").concat(this.count++),this.list.push(t),t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(t){return new e(t)}}]),e}();var se=0,he=function(){function n(t,e,i){var r;return f(this,n),(r=c(this,F(n).call(this,t,e,i))).__node=null,r.__mw=0,r.__mh=0,r.__task=[],r.__ref={},J.mix(u(r)),r}return t(n,Vt),s(n,[{key:"__initProps",value:function(){var t=this.props.width;if(!G.isNil(t)){var e=parseInt(t)||0;0<e&&(this.__width=e)}var i=this.props.height;if(!G.isNil(i)){var r=parseInt(i)||0;0<r&&(this.__height=r)}}},{key:"__genHtml",value:function(){for(var t,e,i,r="<".concat(this.tagName),n=0,o=this.__props.length;n<o;n++){var a=this.__props[n];r+=(t=a[0],e=a[1],void 0,i=Array.isArray(e)?G.joinSourceArray(e):G.stringify(e),"className"===t&&(t="class")," "+t+'="'+G.encodeHtml(i,!0)+'"')}return r+="></".concat(this.tagName,">")}},{key:"__cb",value:function(t,e){if(("touchmove"!==t.type||this.__touchstartTarget)&&!(t.touches&&1<t.touches.length)){var i=this.node.getBoundingClientRect(),r=i.x,n=i.y,o=i.top,a=i.right;r=r||o||0,n=n||a||0;var s=t.touches?t.touches[0]||{}:t;r=s.clientX-r,n=s.clientY-n,this.__emitEvent({event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:r,y:n,covers:[]},e)}}},{key:"appendTo",value:function(t){if(t=function(t){if(G.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("can not find dom of selector: "+t);return e}if(!t)throw new Error("can not find dom: "+t);return t}(t),this.__initProps(),t.nodeName.toUpperCase()===this.tagName.toUpperCase()?(this.__node=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__node=t.querySelector(this.tagName),this.__node||(t.innerHTML=this.__genHtml(),this.__node=t.querySelector(this.tagName))),this.__uuid=G.isNil(this.__node.__uuid)?se++:this.__node.__uuid,this.__defs=this.node.__defs||ae.getInstance(this.__uuid),this.__defs.clear(),!this.width||!this.height){var e=window.getComputedStyle(t,null);this.width||(this.__width=parseInt(e.getPropertyValue("width")),t.setAttribute("width",this.width)),this.height||(this.__height=parseInt(e.getPropertyValue("height")),t.setAttribute("height",this.height))}"canvas"===this.tagName?(this.__ctx=this.__node.getContext("2d"),this.__renderMode=pt.CANVAS):"svg"===this.tagName&&(this.__renderMode=pt.SVG);var i=this.style;-1===["flex","block"].indexOf(i.display)&&(i.display="block"),"absolute"===i.position&&(i.position="static");var r=this.renderMode,n=this.ctx;this.__traverse(n,this.__defs,r),this.__traverseCss(this,this.props.css),this.__init(),this.refresh(),this.node.__root?(this.node.__root.__destroy(),delete this.node.__root.__node,delete this.node.__root.__vd,delete this.node.__root.__defs):(function(i){["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"].forEach(function(e){i.addEventListener(e,function(t){i.__root.__cb(t,-1<["touchend","touchcancel","touchmove"].indexOf(e))})})}(this.node),this.node.__uuid=this.__uuid),this.node.__root=this}},{key:"refresh",value:function(i){var r=this,n=this.renderMode,t=this.currentStyle;t.marginTop=t.marginRight=t.marginBottom=t.marginLeft={value:0,unit:X.PX},t.width={value:this.width,unit:X.PX},t.height={value:this.height,unit:X.PX},this.__computed(),z.measureText(function(){if(r.__layout({x:0,y:0,w:r.width,h:r.height}),r.__layoutAbs(r,{x:0,y:0,w:r.width,h:r.height}),n===pt.CANVAS&&(r.__mw=Math.max(r.__mw,r.width),r.__mh=Math.max(r.__mh,r.height),r.__ctx.setTransform(1,0,0,1,0,0),r.__ctx.clearRect(0,0,r.__mw,r.__mh)),r.render(n),n===pt.SVG){var t=r.virtualDom,e=r.__defs;t.defs=e.value,t=G.clone(t),r.node.__root?$t(r.node,r.node.__vd,t):r.node.innerHTML=G.joinVirtualDom(t),r.node.__vd=t,r.node.__defs=e}r.__task.splice(0).forEach(function(t){G.isFunction(t)&&t()}),G.isFunction(i)&&i(),r.emit(J.KARAS_REFRESH)})}},{key:"refreshTask",value:function(t){var e=this,i=this.task;i.length||lt.nextFrame(function(){i.length&&e.refresh()}),i.push(t)}},{key:"cancelRefreshTask",value:function(t){for(var e=this.task,i=0,r=e.length;i<r;i++)if(e[i]===t){e.splice(i,1);break}}},{key:"node",get:function(){return this.__node}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"task",get:function(){return this.__task}},{key:"ref",get:function(){return this.__ref}}]),n}(),ue=function(){function S(t,e){var i;return f(this,S),(i=c(this,F(S).call(this,t,e))).__x1=i.__y1=0,i.__x2=i.__y2=1,i.__controlA=[],i.__controlB=[],void 0!==i.props.x1&&(i.__x1=parseFloat(i.props.x1)||0),void 0!==i.props.y1&&(i.__y1=parseFloat(i.props.y1)||0),void 0!==i.props.x2&&(i.__x2=parseFloat(i.props.x2)||0),void 0!==i.props.y2&&(i.__y2=parseFloat(i.props.y2)||0),Array.isArray(i.props.controlA)&&(i.__controlA=i.props.controlA),Array.isArray(i.props.controlB)&&(i.__controlB=i.props.controlB),i}return t(S,Gt),s(S,[{key:"render",value:function(t){var e=H(F(S.prototype),"render",this).call(this,t),i=e.isDestroyed,r=e.display,n=e.visibility,o=e.originX,a=e.originY,s=e.stroke,h=e.strokeWidth,u=e.strokeDasharray,l=e.strokeLinecap;if(!i&&"none"!==r&&"hidden"!==n){var f=this.width,c=this.height,_=this.ctx,d=this.x1,p=this.y1,v=this.x2,y=this.y2,g=this.controlA,m=this.controlB;d=o+d*f,p=a+p*c,v=o+v*f,y=a+y*c;var k,x,b,w,A=0;if(2===g.length&&(A++,k=o+g[0]*f,x=a+g[1]*c),2===m.length&&(A+=2,b=o+m[0]*f,w=a+m[1]*c),t===pt.CANVAS)_.strokeStyle=s,_.lineWidth=h,_.lineCap=l,_.setLineDash(u.split(",")),_.beginPath(),_.moveTo(d,p),3===A?_.bezierCurveTo(k,x,b,w,v,y):2===A?_.quadraticCurveTo(b,w,v,y):1===A?_.quadraticCurveTo(k,x,v,y):_.lineTo(v,y),0<h&&_.stroke(),_.closePath();else if(t===pt.SVG){var T=[["d",3===A?"M".concat(d," ").concat(p," C").concat(k," ").concat(x," ").concat(b," ").concat(w," ").concat(v," ").concat(y):2===A?"M".concat(d," ").concat(p," Q").concat(b," ").concat(w," ").concat(v," ").concat(y):1===A?"M".concat(d," ").concat(p," Q").concat(k," ").concat(x," ").concat(v," ").concat(y):"M".concat(d," ").concat(p," L").concat(v," ").concat(y)],["fill","none"],["stroke",s],["stroke-width",h]];u.length&&T.push(["stroke-dasharray",u]),"butt"!==l&&T.push(["stroke-linecap",l]),this.addGeom("path",T)}}}},{key:"x1",get:function(){return this.__x1}},{key:"y1",get:function(){return this.__y1}},{key:"x2",get:function(){return this.__x2}},{key:"y2",get:function(){return this.__y2}},{key:"controlA",get:function(){return this.__controlA}},{key:"controlB",get:function(){return this.__controlB}}]),S}(),le=function(){function E(t,e){var i;return f(this,E),(i=c(this,F(E).call(this,t,e))).__points=[],Array.isArray(i.props.points)&&(i.__points=i.props.points),-1<["TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT"].indexOf(i.props.origin)?i.__origin=i.props.origin:i.__origin="TOP_LEFT",i}return t(E,Gt),s(E,[{key:"render",value:function(t){var e=H(F(E.prototype),"render",this).call(this,t),i=e.isDestroyed,r=e.originX,n=e.originY,o=e.display,a=e.visibility,s=e.stroke,h=e.strokeWidth,u=e.strokeDasharray,l=e.strokeLinecap;if(!i&&"none"!==o&&"hidden"!==a){var f=this.width,c=this.height,_=this.ctx,d=this.points,p=this.origin;if(!(d.length<2)){for(var v=0,y=d.length;v<y;v++)if(!Array.isArray(d[v])||d[v].length<2)return;var g=[];if("TOP_LEFT"===p?d.forEach(function(t){g.push([r+t[0]*f,n+t[1]*c])}):"TOP_RIGHT"===p?d.forEach(function(t){g.push([r+f-t[0]*f,n+t[1]*c])}):"BOTTOM_LEFT"===p?d.forEach(function(t){g.push([r+t[0]*f,n+c-t[1]*c])}):"BOTTOM_RIGHT"===p&&d.forEach(function(t){g.push([r+f-t[0]*f,n+c-t[1]*c])}),t===pt.CANVAS){_.strokeStyle=s,_.lineWidth=h,_.lineCap=l,_.setLineDash(u.split(",")),_.beginPath(),_.moveTo(g[0][0],g[0][1]);for(var m=1,k=g.length;m<k;m++){var x=g[m];_.lineTo(x[0],x[1])}0<h&&_.stroke(),_.closePath()}else if(t===pt.SVG){for(var b="",w=0,A=g.length;w<A;w++){var T=g[w];b+="".concat(T[0],",").concat(T[1]," ")}var S=[["points",b],["fill","none"],["stroke",s],["stroke-width",h]];u.length&&S.push(["stroke-dasharray",u]),"butt"!==l&&S.push(["stroke-linecap",l]),this.addGeom("polyline",S)}}}}},{key:"points",get:function(){return this.__points}},{key:"origin",get:function(){return this.__origin}}]),E}(),fe=function(){function E(t,e){var i;return f(this,E),(i=c(this,F(E).call(this,t,e))).__points=[],Array.isArray(i.props.points)&&(i.__points=i.props.points),i}return t(E,Gt),s(E,[{key:"render",value:function(t){var e=H(F(E.prototype),"render",this).call(this,t),i=e.isDestroyed,r=e.originX,n=e.originY,o=e.display,a=e.visibility,s=e.fill,h=e.stroke,u=e.strokeWidth,l=e.strokeDasharray,f=e.strokeLinecap;if(!i&&"none"!==o&&"hidden"!==a){var c=this.width,_=this.height,d=this.ctx,p=this.points;if(!(p.length<3)){for(var v=0,y=p.length;v<y;v++)if(!Array.isArray(p[v])||p[v].length<2)return;var g=[];if(p.forEach(function(t){g.push([r+t[0]*c,n+t[1]*_])}),t===pt.CANVAS){d.strokeStyle=h,d.lineWidth=u,d.fillStyle=s,d.lineCap=f,d.setLineDash(l.split(",")),d.beginPath(),d.moveTo(g[0][0],g[0][1]);for(var m=1,k=g.length;m<k;m++){var x=g[m];d.lineTo(x[0],x[1])}d.lineTo(g[0][0],g[0][1]),d.fill(),0<u&&d.stroke(),d.closePath()}else if(t===pt.SVG){for(var b="",w=0,A=g.length;w<A;w++){var T=g[w];b+="".concat(T[0],",").concat(T[1]," ")}var S=[["points",b],["fill",s],["stroke",h],["stroke-width",u]];l.length&&S.push(["stroke-dasharray",l]),"butt"!==f&&S.push(["stroke-linecap",f]),this.addGeom("polygon",S)}}}}},{key:"points",get:function(){return this.__points}}]),E}(),ce=.5*Math.PI;function _e(t,e,i,r){return 0<=(r%=360)&&r<90?[t+Math.sin(r*Math.PI/180)*i,e-Math.cos(r*Math.PI/180)*i]:90<=r&&r<180?[t+Math.cos((r-90)*Math.PI/180)*i,e+Math.sin((r-90)*Math.PI/180)*i]:180<=r&&r<270?[t-Math.cos((270-r)*Math.PI/180)*i,e+Math.sin((270-r)*Math.PI/180)*i]:[t-Math.sin((360-r)*Math.PI/180)*i,e-Math.cos((360-r)*Math.PI/180)*i]}var de=function(){function M(t,e){var i;return f(this,M),(i=c(this,F(M).call(this,t,e))).__begin=0,i.__end=0,i.props.begin&&(i.__begin=parseFloat(i.props.begin),isNaN(i.begin)&&(i.__begin=0)),i.props.end&&(i.__end=parseFloat(i.props.end),isNaN(i.end)&&(i.__end=0)),i.__r=1,i.props.r&&(i.__r=parseFloat(i.props.r),isNaN(i.r)&&(i.__r=1)),i.__edge=!1,void 0!==i.props.edge&&(i.__edge=!!i.props.edge),i.__closure=!1,void 0!==i.props.closure&&(i.__closure=!!i.props.closure),i}return t(M,Gt),s(M,[{key:"render",value:function(t){var e=H(F(M.prototype),"render",this).call(this,t),i=e.isDestroyed,r=e.cx,n=e.cy,o=e.display,a=e.visibility,s=e.fill,h=e.stroke,u=e.strokeWidth,l=e.strokeDasharray,f=e.strokeLinecap;if(!i&&"none"!==o&&"hidden"!==a){var c=this.width,_=this.height,d=this.ctx,p=this.begin,v=this.end,y=this.r,g=this.edge,m=this.closure;if(p!==v){var k,x,b,w,A=D(_e(r,n,y*=.5*Math.min(c,_),p),2);k=A[0],x=A[1];var T=D(_e(r,n,y,v),2);b=T[0],w=T[1];var S=180<v-p?1:0;if(t===pt.CANVAS)d.strokeStyle=h,d.lineWidth=u,d.fillStyle=s,d.lineCap=f,d.setLineDash(l.split(",")),d.beginPath(),d.arc(r,n,y,p*Math.PI/180-ce,v*Math.PI/180-ce),g?(S&&m||d.lineTo(r,n),d.lineTo(k,x),0<u&&d.stroke()):(0<u&&d.stroke(),S&&m||d.lineTo(r,n),d.lineTo(k,x)),d.fill(),d.closePath();else if(t===pt.SVG)if(g){var E=[["d",m?"M".concat(k," ").concat(x," A").concat(y," ").concat(y," 0 ").concat(S," 1 ").concat(b," ").concat(w," z"):"M".concat(r," ").concat(n," L").concat(k," ").concat(x," A").concat(y," ").concat(y," 0 ").concat(S," 1 ").concat(b," ").concat(w," z")],["fill",s],["stroke",h],["stroke-width",u]];l.length&&E.push(["stroke-dasharray",l]),"butt"!==f&&E.push(["stroke-linecap",f]),this.addGeom("path",E)}else{this.addGeom("path",[["d",m?"M".concat(k," ").concat(x," A").concat(y," ").concat(y," 0 ").concat(S," 1 ").concat(b," ").concat(w," z"):"M".concat(r," ").concat(n," L").concat(k," ").concat(x," A").concat(y," ").concat(y," 0 ").concat(S," 1 ").concat(b," ").concat(w," z")],["fill",s]]);var P=[["d","M".concat(k," ").concat(x," A").concat(y," ").concat(y," 0 ").concat(S," 1 ").concat(b," ").concat(w)],["fill","transparent"],["stroke",h],["stroke-width",u]];l.length&&P.push(["stroke-dasharray",l]),"butt"!==f&&P.push(["stroke-linecap",f]),this.addGeom("path",P)}}}}},{key:"begin",get:function(){return this.__begin}},{key:"end",get:function(){return this.__end}},{key:"r",get:function(){return this.__r}},{key:"edge",get:function(){return this.__edge}},{key:"closure",get:function(){return this.__closure}}]),M}(),pe=function(){function k(t,e){var i;return f(this,k),(i=c(this,F(k).call(this,t,e))).__xr=0,i.props.rx&&(i.__xr=parseFloat(i.props.rx),isNaN(i.xr)&&(i.__xr=0)),i.__yr=0,i.props.ry&&(i.__yr=parseFloat(i.props.ry),isNaN(i.yr)&&(i.__yr=0)),i}return t(k,Gt),s(k,[{key:"render",value:function(t){var e=H(F(k.prototype),"render",this).call(this,t),i=e.isDestroyed,r=e.originX,n=e.originY,o=e.display,a=e.visibility,s=e.fill,h=e.stroke,u=e.strokeWidth,l=e.strokeDasharray,f=e.strokeLinecap;if(!i&&"none"!==o&&"hidden"!==a){var c=this.width,_=this.height,d=this.ctx,p=this.xr,v=this.yr;if(p=Math.min(p,.5),v=Math.min(v,.5),p*=c,v*=_,t===pt.CANVAS){if(d.strokeStyle=h,d.lineWidth=u,d.fillStyle=s,d.lineCap=f,d.setLineDash(l.split(",")),d.beginPath(),0===p&&0===v)d.moveTo(r,n),d.lineTo(r+c,n),d.lineTo(r+c,n+_),d.lineTo(r,n+_),d.lineTo(r,n);else{var y=.5522848*p,g=.5522848*v;d.moveTo(r+p,n),d.lineTo(r+c-p,n),d.bezierCurveTo(r+c+y-p,n,r+c,n+v-g,r+c,n+v),d.lineTo(r+c,n+_-v),d.bezierCurveTo(r+c,n+_+g-v,r+c+y-p,n+_,r+c-p,n+_),d.lineTo(r+p,n+_),d.bezierCurveTo(r+p-y,n+_,r,n+_+g-v,r,n+_-v),d.lineTo(r,n+v),d.bezierCurveTo(r,n+v-g,r+p-y,n,r+p,n)}d.fill(),0<u&&d.stroke(),d.closePath()}else if(t===pt.SVG){var m=[["x",r],["y",n],["width",c],["height",_],["fill",s],["stroke",h],["stroke-width",u]];p&&m.push(["rx",p]),v&&m.push(["ry",v]),l.length&&m.push(["stroke-dasharray",l]),"butt"!==f&&m.push(["stroke-linecap",f]),this.addGeom("rect",m)}}}},{key:"xr",get:function(){return this.__xr}},{key:"yr",get:function(){return this.__yr}}]),k}(),ve=function(){function y(t,e){var i;return f(this,y),(i=c(this,F(y).call(this,t,e))).__r=1,i.props.r&&(i.__r=parseFloat(i.props.r),isNaN(i.r)&&(i.__r=1)),i}return t(y,Gt),s(y,[{key:"render",value:function(t){var e=H(F(y.prototype),"render",this).call(this,t),i=e.isDestroyed,r=e.cx,n=e.cy,o=e.display,a=e.visibility,s=e.fill,h=e.stroke,u=e.strokeWidth,l=e.strokeDasharray,f=e.strokeLinecap;if(!i&&"none"!==o&&"hidden"!==a){var c=this.width,_=this.height,d=this.ctx,p=this.r;if(p*=.5*Math.min(c,_),t===pt.CANVAS)d.strokeStyle=h,d.lineWidth=u,d.fillStyle=s,d.lineCap=f,d.setLineDash(l.split(",")),d.beginPath(),d.arc(r,n,p,0,2*Math.PI),d.fill(),0<u&&d.stroke(),d.closePath();else if(t===pt.SVG){var v=[["cx",r],["cy",n],["r",p],["fill",s],["stroke",h],["stroke-width",u]];l.length&&v.push(["stroke-dasharray",l]),"butt"!==f&&v.push(["stroke-linecap",f]),this.addGeom("circle",v)}}}},{key:"r",get:function(){return this.__r}}]),y}(),ye=function(){function k(t,e){var i;return f(this,k),(i=c(this,F(k).call(this,t,e))).__xr=1,i.props.rx&&(i.__xr=parseFloat(i.props.rx),isNaN(i.xr)&&(i.__xr=1)),i.__yr=1,i.props.ry&&(i.__yr=parseFloat(i.props.ry),isNaN(i.yr)&&(i.__yr=1)),i}return t(k,Gt),s(k,[{key:"render",value:function(t){var e=H(F(k.prototype),"render",this).call(this,t),i=e.isDestroyed,r=e.cx,n=e.cy,o=e.display,a=e.visibility,s=e.fill,h=e.stroke,u=e.strokeWidth,l=e.strokeDasharray,f=e.strokeLinecap;if(!i&&"none"!==o&&"hidden"!==a){var c=this.width,_=this.height,d=this.ctx,p=this.xr,v=this.yr;if(p*=.5*c,v*=.5*_,t===pt.CANVAS){if(d.strokeStyle=h,d.lineWidth=u,d.fillStyle=s,d.lineCap=f,d.setLineDash(l.split(",")),d.beginPath(),d.ellipse)d.ellipse(r,n,p,v,0,0,2*Math.PI);else{var y=.5522848*p,g=.5522848*v;d.moveTo(r-p,n),d.bezierCurveTo(r-p,n-g,r-y,n-v,r,n-v),d.bezierCurveTo(r+y,n-v,r+p,n-g,r+p,n),d.bezierCurveTo(r+p,n+g,r+y,n+v,r,n+v),d.bezierCurveTo(r-y,n+v,r-p,n+g,r-p,n)}d.fill(),0<u&&d.stroke(),d.closePath()}else if(t===pt.SVG){var m=[["cx",r],["cy",n],["rx",p],["ry",v],["fill",s],["stroke",h],["stroke-width",u]];l.length&&m.push(["stroke-dasharray",l]),"butt"!==f&&m.push(["stroke-linecap",f]),this.addGeom("ellipse",m)}}}},{key:"xr",get:function(){return this.__xr}},{key:"yr",get:function(){return this.__yr}}]),k}();Gt.register("$line",ue),Gt.register("$polyline",le),Gt.register("$polygon",fe),Gt.register("$sector",de),Gt.register("$rect",pe),Gt.register("$circle",ve),Gt.register("$ellipse",ye);var ge={render:function(t,e){if(!(t instanceof he))throw new Error("render root muse be canvas or svg");return e&&t.appendTo(e),t},createVd:function(t,e,i){if(-1<["canvas","svg"].indexOf(t))return new he(t,e,i);if(Vt.isValid(t))return"img"===t?new Yt(t,e):new Vt(t,e,i);throw new Error("can not use marker: "+t)},createGm:function(t,e){return new(Gt.getRegister(t))(t,e)},createCp:function(t,e,i){return new t(e,i)},parse:function(t,e){var i={animate:[]},r=function e(i,t,r){if(G.isString(t))return t;var n=t.tagName,o=t.props,a=void 0===o?{}:o,s=t.children,h=void 0===s?[]:s,u=t.animate,l=a.ref;return u&&l&&r.animate.push({ref:l,animate:u}),"$"===n.charAt(0)?i.createGm(n,a):i.createVd(n,a,h.map(function(t){return e(i,t,r)}))}(this,t=G.clone(t),i);return this.render(r,e),i.animate.forEach(function(t){var e=t.ref,i=t.animate;r.ref[e].animate(i.value,i.options)}),r},Root:he,Dom:Vt,Img:Yt,Geom:Gt,mode:pt,Component:ut,Event:J,sort:M,util:G,inject:z,frame:lt};return"undefined"!=typeof window&&(window.karas=ge),ge});
//# sourceMappingURL=index.min.js.map
