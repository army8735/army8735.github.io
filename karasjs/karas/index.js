!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).karas=e()}(this,(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=l(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:r):a.value}},h.apply(this,arguments)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,a,n=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return n}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var v=function(){function t(){this.__x=0,this.__y=0,this.__width=0,this.__height=0,this.__baseline=0,this.__verticalBaseline=0,this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null,this.__hostRoot=null,this.__virtualDom=null,this.__bbox=null,this.__filterBbox=null,this.__isDestroyed=!0}return r(t,[{key:"__structure",value:function(t,e){return this.__struct={node:this,childIndex:e,lv:t}}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"__destroy",value:function(){this.__isDestroyed=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseline",get:function(){return this.__baseline}},{key:"verticalBaseline",get:function(){return this.__verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__isDestroyed}},{key:"isReplaced",get:function(){return!1}}]),t}(),y={CANVAS:0,SVG:1,WEBGL:2},d={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,GRADIENT:14,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?{v:e,u:2}:/px$/i.test(t)?{v:e,u:1}:/deg$/i.test(t)?{v:e,u:5}:/rem$/i.test(t)?{v:e,u:8}:/vw$/i.test(t)?{v:e,u:10}:/vh$/i.test(t)?{v:e,u:11}:/em$/i.test(t)?{v:e,u:9}:/vw$/i.test(t)?{v:e,u:10}:/vh$/i.test(t)?{v:e,u:11}:/vmax$/i.test(t)?{v:e,u:12}:/vmin$/i.test(t)?{v:e,u:13}:{v:e,u:3}}};function p(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function x(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var g={identity:p,multiply:function(t,e){if(!t&&!e)return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];if(x(t))return e;if(x(e))return t;for(var r=[],i=0;i<4;i++){var a=t[i]||0,n=t[i+4]||0,o=t[i+8]||0,s=t[i+12]||0;r[i]=a*e[0]+n*e[1]+o*e[2]+s*e[3],r[i+4]=a*e[4]+n*e[5]+o*e[6]+s*e[7],r[i+8]=a*e[8]+n*e[9]+o*e[10]+s*e[11],r[i+12]=a*e[12]+n*e[13]+o*e[14]+s*e[15]}return r},multiplyTfo:function(t,e,r){return e||r?(t[12]+=t[0]*e+t[4]*r,t[13]+=t[1]*e+t[5]*r,t[14]+=t[2]*e+t[6]*r,t[15]+=t[3]*e+t[7]*r,t):t},tfoMultiply:function(t,e,r){if(!t&&!e)return r;var i=r[3],a=r[7],n=r[11],o=r[15];return r[0]+=i*t,r[1]+=i*e,r[4]+=a*t,r[5]+=a*e,r[8]+=n*t,r[9]+=n*e,r[12]+=o*t,r[13]+=o*e,r},multiplyTranslateX:function(t,e){return e?(t[12]+=t[0]*e,t[13]+=t[1]*e,t[14]+=t[2]*e,t[15]+=t[3]*e,t):t},multiplyTranslateY:function(t,e){return e?(t[12]+=t[4]*e,t[13]+=t[5]*e,t[14]+=t[6]*e,t[15]+=t[7]*e,t):t},multiplyTranslateZ:function(t,e){return e?(t[12]+=t[8]*e,t[13]+=t[9]*e,t[14]+=t[10]*e,t[15]+=t[11]*e,t):t},multiplyRotateX:function(t,e){if(!e)return t;var r=Math.sin(e),i=Math.cos(e),a=t[4],n=t[5],o=t[6],s=t[7],l=t[8];t[9];var h=t[10],u=t[11];return t[4]=a*i+l*r,t[5]=n*i+o*r,t[6]=o*i+h*r,t[7]=s*i+u*r,t[8]=a*-r+l*i,t[9]=n*-r+o*i,t[10]=o*-r+h*i,t[11]=s*-r+u*i,t},multiplyRotateY:function(t,e){if(!e)return t;var r=Math.sin(e),i=Math.cos(e),a=t[0],n=t[1],o=t[2],s=t[3],l=t[8],h=t[9],u=t[10],c=t[11];return t[0]=a*i+l*-r,t[1]=n*i+h*-r,t[2]=o*i+u*-r,t[3]=s*i+c*-r,t[8]=a*r+l*i,t[9]=n*r+h*i,t[10]=o*r+u*r,t[11]=s*r+c*r,t},multiplyRotateZ:function(t,e){if(!e)return t;var r=Math.sin(e),i=Math.cos(e),a=t[0],n=t[1],o=t[2],s=t[3],l=t[4],h=t[5],u=t[6],c=t[7];return t[0]=a*i+l*r,t[1]=n*i+h*r,t[2]=o*i+u*r,t[3]=s*i+c*r,t[4]=a*-r+l*i,t[5]=n*-r+h*i,t[6]=o*-r+u*i,t[7]=s*-r+c*i,t},multiplySkewX:function(t,e){if(!e)return t;var r=Math.tan(e);return t[4]+=t[0]*r,t[5]+=t[1]*r,t[6]+=t[2]*r,t[7]+=t[3]*r,t},multiplySkewY:function(t,e){if(!e)return t;var r=Math.tan(e);return t[0]+=t[4]*r,t[1]+=t[5]*r,t[2]+=t[6]*r,t[3]+=t[7]*r,t},multiplyScaleX:function(t,e){return 1===e||(t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e),t},multiplyScaleY:function(t,e){return 1===e||(t[4]*=e,t[5]*=e,t[6]*=e,t[7]*=e),t},multiplyScaleZ:function(t,e){return 1===e||(t[8]*=e,t[9]*=e,t[10]*=e,t[11]*=e),t},multiplyPerspective:function(t,e){return!e||e<=0||(e=-1/(e=Math.max(e,1)),t[8]+=t[12]*e,t[9]+=t[13]*e,t[10]+=t[14]*e,t[11]+=t[15]*e),t},calPoint:function(t,e){if(e&&!x(e)){var r=t.x,i=t.y,a=t.z,n=t.w;a=a||0,null==n&&(n=1);var o=e[0],s=e[1],l=e[2],h=e[3],u=e[4],c=e[5],_=e[6],f=e[7],v=e[8],y=e[9],d=e[10],p=e[11],g=e[12],m=e[13],b=e[14],E=e[15];h||f||p?n=r*h+i*f+a*p+E*n:1!==E&&(n*=E);var M={x:(1===o?r:r*o)+(u?i*u:0)+g,y:(1===s?r:r*s)+(c?i*c:0)+m,z:0,w:n};return a?(M.x+=a*v,M.y+=a*y,M.z=r*l+i*_+b+a*d):(l||_||b)&&(M.z=r*l+i*_+b),M}return t},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length)return function(t){var e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];var r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0===r)return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];r=1/r;for(var i=[],a=0;a<16;a++)i[a]=e[a]*r;return i}(t);var e=t[0],r=t[1],i=t[2],a=t[3],n=t[4],o=t[5];if(1===e&&0===r&&0===i&&1===a&&0===n&&0===o)return t;var s=e*a-r*i;return 0===s?t:[a/s,-r/s,-i/s,e/s,(i*o-a*n)/s,(r*n-e*o)/s]},isE:x,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}},m={}.toString;function b(t){return function(e){return m.call(e)==="[object "+t+"]"}}var E=b("Object"),M=b("String"),A=b("Function"),T=b("Number"),R=b("Boolean"),S=b("Date"),w={}.hasOwnProperty,C=w.toString,k=C.call(Object);function O(t){return null==t}function I(t){for(var e="",r=0,i=t.length;r<i;r++){var a=t[r];Array.isArray(a)?e+=I(a):e+=F(a)}return e}function F(t){return O(t)?"":t.toString()}function L(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach((function(t){r+=L(t)})),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var i="<g>";t.bb.forEach((function(t){i+=L(t)})),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach((function(t){i+=L(t)})),i+="</g>";var a=t.opacity,n=t.transform,o=t.visibility,s=t.mask,l=t.overflow,h=t.filter,u=t.mixBlendMode;return"<g"+(1!==a&&void 0!==a?' opacity="'+a+'"':"")+(n?' transform="'+n+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(l?' clip-path="'+l+'"':"")+(h||u?' style="':"")+(h?"filter:"+h+";":"")+(u?"mix-blend-mode:"+u+";":"")+(h||u?'"':"")+">"+i+"</g>"}}function B(t){var e="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(e+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),e+=">",(t.children||[]).forEach((function(t){e+=function(t){var e="<"+t.tagName;return(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),e+="></"+t.tagName+">"}(t)})),e+="</"+t.tagName+">"}function D(t,e){for(var r=t.length?t[0]:"",i=1,a=t.length;i<a;i++)r+=e+t[i];return r}function P(t){if(!t||"[object Object]"!==m.call(t))return!1;var e=Object.getPrototypeOf(t);if(!e)return!0;var r=w.call(e,"constructor")&&e.constructor;return"function"==typeof r&&C.call(r)===k}function N(t){return 1===t.length?"0"+t:t}var H={isObject:E,isString:M,isFunction:A,isNumber:T,isBoolean:R,isDate:S,isNil:O,isPrimitive:function(t){return H.isNil(t)||H.isBoolean(t)||H.isString(t)||H.isNumber(t)},isAuto:function(t){return O(t)||"auto"===t},isPlainObject:P,stringify:F,joinSourceArray:function(t){return I(t)},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach((function(t){e+=B(t)})),e+="</defs><g>",t.bb.forEach((function(t){e+=L(t)})),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach((function(t){e+=L(t)})),e+="</g>"},joinVd:L,joinDef:B,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];if(t&&"transparent"!==t)if("#"===t.charAt(0))3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1);else{var r=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i);r?(e=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],O(r[4])?e[3]=1:e[3]=parseFloat(r[4])):e=[0,0,0,0]}else e=[0,0,0,0];return e},int2rgba:function(t){return!Array.isArray(t)||3!==t.length&&4!==t.length?t||"rgba(0,0,0,0)":(t[0]=Math.floor(Math.max(t[0],0)),t[1]=Math.floor(Math.max(t[1],0)),t[2]=Math.floor(Math.max(t[2],0)),4===t.length?(t[3]=Math.max(t[3],0),"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"):"rgba("+t[0]+","+t[1]+","+t[2]+",1)")},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+D(t,",")+")";if(3===t.length)return"rgba("+D(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var a=t[r];if(Array.isArray(a))e[a[0]]=a[1];else for(var n=Object.keys(a),o=n.length-1;o>=0;o--){var s=n[o];e[s]=a[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,a=r.length;i<a;i++){var n=r[i];e.push([n,t[n]])}return e},clone:function e(r){if(O(r)||"object"!==t(r))return r;if(H.isDate(r))return new Date(r);if(!P(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach((function(t){i[t]=e(r[t])})),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var n=e[i],o=r[i],s=Array.isArray(n),l=Array.isArray(o);if(s&&l){if(!t(n,o))return!1}else{if(s||l)return!1;if(n!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(E(e)&&E(r)){for(var i={},a=0,n=Object.keys(e),o=n.length;a<o;a++){var s=n[a];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;i[s]=!0}for(var l=0,h=Object.keys(r),u=h.length;l<u;l++){var c=h[l];if(!i.hasOwnProperty(c))return!1}}else{if(S(e)&&S(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var _=0,f=e.length;_<f;_++)if(!t(e[_],r[_]))return!1}return!0},extend:function(e,r,i){if(null===r||"object"!==t(r))return e;i||(i=Object.keys(r));for(var a=0,n=i.length;a<n;){var o=i[a];e[o]=r[o],a++}return e},joinArr:D,transformBbox:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!g.isE(e)){var a=t,n=u(a,4),o=n[0],s=n[1],l=n[2],h=n[3];r&&(o-=r,l+=r),i&&(s-=i,h+=i);var c,_=[l,s,o,h,l,h],f=g.calPoint({x:o,y:s},e);o=f.x,s=f.y,(c=f.w)&&1!==c&&(o/=c,s/=c);for(var v=o,y=s,d=o,p=s,x=0;x<6;x+=2){var m=_[x],b=_[x+1],E=g.calPoint({x:m,y:b},e);m=E.x,b=E.y,(c=E.w)&&1!==c&&(m/=c,b/=c),v=Math.min(v,m),d=Math.max(d,m),y=Math.min(y,b),p=Math.max(p,b)}return[v,y,d,p]}return t=t.slice(0),(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i),t},assignMatrix:function(t,e){return t&&e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t},prefixHex:N,replaceRgba2Hex:function(t){return(t||"").replace(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)/gi,(function(t,e,r,i,a){var n="#"+N(parseInt(e).toString(16))+N(parseInt(r).toString(16))+N(parseInt(i).toString(16));return a&&(n+=N(Math.floor(255*parseFloat(a)).toString(16))),n}))}},G={flag:!1},W=1e3/60,Y={},U="function"==typeof OffscreenCanvas&&OffscreenCanvas.prototype.getContext;var z,X,V={},K={},j={},Z={};function q(){(z=document.createElement("div")).style.position="absolute",z.style.left="99999px",z.style.top="-99999px",z.style.visibility="hidden",z.style.whiteSpace="nowrap",document.body.appendChild(z)}var $={measureTextSync:function(t,e,r,i,a){return z||q(),z.style.fontFamily=e,z.style.fontSize=r+"px",z.style.fontWeight=i,z.style.writingMode=a?"vertical-lr":"horizontal-tb",z.innerHTML=t.replace(/</g,"&lt;").replace(/[ \n]/g,"&nbsp;"),a?parseFloat(window.getComputedStyle(z,null).height):parseFloat(window.getComputedStyle(z,null).width)},measureTextListMax:function(t,e,r,i){z||q(),z.style.fontFamily=e,z.style.fontSize=r+"px",z.style.fontWeight=i;for(var a="",n=0,o=t.length;n<o;n++)a+='<span style="position:absolute">'+t.charAt(n).replace("<","&lt;").replace(/[ \n]/,"&nbsp;")+"</span>";z.innerHTML=a;for(var s=0,l=z.childNodes,h=0,u=l.length;h<u;h++){var c=l[h];s=Math.max(s,parseFloat(window.getComputedStyle(c,null).width))}return s},IMG:V,INIT:0,LOADED:2,LOADING:1,measureImg:function(t,e){if(Array.isArray(t)){if(!t.length)return e&&e();var r=0,i=t.length,a=[];t.forEach((function(t,n){$.measureImg(t,(function(t){a[n]=t,++r===i&&e&&e(a)}))}))}else{if(!t||!H.isString(t))return $.error("Measure img invalid: "+t),void(e&&e({state:2,success:!1,url:t}));var n=V[t]=V[t]||{state:0,task:[]};if(2===n.state)e&&e(n);else if(1===n.state)e&&n.task.push(e);else{n.state=1,e&&n.task.push(e);var o=new Image;if(o.onload=function(){n.state=2,n.success=!0,n.width=o.width,n.height=o.height,n.source=o,n.url=t,n.task.splice(0).forEach((function(t){return t(n)}))},o.onerror=function(e){n.state=2,n.success=!1,n.url=t,n.task.splice(0).forEach((function(t){return t(n)}))},"data:"!==t.substr(0,5)){var s=/^(?:\w+:)?\/\/([^/:]+)/.exec(t);s&&("undefined"!=typeof location&&location.hostname===s[1]||(o.crossOrigin="anonymous"))}o.src=t,G.flag&&"undefined"!=typeof document&&document.body.appendChild(o)}}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?($.requestAnimationFrame=requestAnimationFrame.bind(null),e=requestAnimationFrame(t)):(e=setTimeout(t,W),$.requestAnimationFrame=function(t){return setTimeout(t,W)}),e})),cancelAnimationFrame:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e;return"undefined"!=typeof cancelAnimationFrame?($.cancelAnimationFrame=cancelAnimationFrame.bind(null),e=cancelAnimationFrame(t)):(e=clearTimeout(t),$.cancelAnimationFrame=function(t){return clearTimeout(t)}),e})),now:function(){return"undefined"!=typeof performance?($.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):($.now=Date.now.bind(Date),Date.now())},hasOffscreenCanvas:function(t){return t&&Y.hasOwnProperty(t)},getOffscreenCanvas:function(t,e,r,i){return function(t,e,r,i){var a;(a=t?Y[t]?Y[t]:Y[t]=!G.flag&&U?new OffscreenCanvas(e,r):document.createElement("canvas"):!G.flag&&U?new OffscreenCanvas(e,r):document.createElement("canvas")).width=e,a.height=r,G.flag&&(a.style.width=e+"px",a.style.height=r+"px",t&&a.setAttribute("key",t),i&&a.setAttribute("message",i),document.body.appendChild(a));var n=a.getContext("2d");return{canvas:a,ctx:n,enabled:!0,available:!0,release:function(){n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e,r),this.available=!1}}}(r,t,e,i)},isDom:function(t){if(t){if(H.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(H.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},defaultFontFamily:"arial",getFontCanvas:function(){return $.getOffscreenCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__",null)},checkSupportFontFamily:function(t){if((t=t.toLowerCase())===this.defaultFontFamily)return!0;if(Z.hasOwnProperty(t))return Z[t];var e=$.getFontCanvas().ctx;e.textAlign="center",e.fillStyle="#000",e.textBaseline="middle",X||(e.clearRect(0,0,16,16),e.font="16px "+this.defaultFontFamily,e.fillText("a",8,8),X=e.getImageData(0,0,16,16).data),e.clearRect(0,0,16,16),/\s/.test(t)&&(t='"'+t.replace(/"/g,'\\"')+'"'),e.font="16px "+t+","+this.defaultFontFamily,e.fillText("a",8,8);for(var r=e.getImageData(0,0,16,16).data,i=0,a=r.length;i<a;i++)if(X[i]!==r[i])return Z[t]=!0;return Z[t]=!1},FONT:K,loadFont:function(t,e,r){if(H.isFunction(e)&&(r=e,e=t),Array.isArray(e)){if(!e.length)return r();var i=0,a=e.length,n=[];e.forEach((function(t,e){$.loadFont(t.fontFamily,t.url,(function(t){n[e]=t,++i===a&&r(n)}))}))}else{if(!e||!H.isString(e))return $.error("Load font invalid: "+e),void(r&&r({state:2,success:!1,url:e}));t||(t=e);var o=K[e]=K[e]||{state:0,task:[]};if(2===o.state)r&&r(o);else if(1===o.state)r&&o.task.push(r);else{var s=function(r){var i=new FontFace(t,r);i.load().then((function(){"undefined"!=typeof document&&document.fonts.add(i),o.state=2,o.success=!0,o.url=e,o.task.splice(0).forEach((function(t){return t(o,r)}))})).catch(l)},l=function(){o.state=2,o.success=!1,o.url=e,o.task.splice(0).forEach((function(t){return t(o)}))};if(o.state=1,r&&o.task.push(r),e instanceof ArrayBuffer)s(e);else{var h=new XMLHttpRequest;h.open("get",e,!0),h.responseType="arraybuffer",h.onload=function(){h.response?s(h.response):l()},h.onerror=l,h.send()}}}},loadComponent:function(t,e){if(Array.isArray(t)){if(!t.length)return e();var r=0,i=t.length,a=[];t.forEach((function(t,n){$.loadComponent(t,(function(t){a[n]=t,++r===i&&e(a)}))}))}else{if(!t||!H.isString(t))return $.error("Load component invalid: "+t),void(e&&e({state:2,success:!1,url:t}));var n=j[t]=j[t]||{state:0,task:[]};if(2===n.state)e&&e(n);else if(1===n.state)e&&n.task.push(e);else{n.state=1,e&&n.task.push(e);var o=document.createElement("script");o.src=t,o.async=!0,o.onload=function(){n.state=2,n.success=!0,n.url=t,n.task.splice(0).forEach((function(t){return t(n)})),document.head.removeChild(o)},o.onerror=function(){n.state=2,n.success=!1,n.url=t,n.task.splice(0).forEach((function(t){return t(n)})),document.head.removeChild(o)},document.head.appendChild(o)}}}};function J(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function Q(t,e){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=e,this.destLen=0,this.ltree=new J,this.dtree=new J}var tt=new J,et=new J,rt=new Uint8Array(30),it=new Uint16Array(30),at=new Uint8Array(30),nt=new Uint16Array(30),ot=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),st=new J,lt=new Uint8Array(320);function ht(t,e,r,i){var a,n;for(a=0;a<r;++a)t[a]=0;for(a=0;a<30-r;++a)t[a+r]=a/r|0;for(n=i,a=0;a<30;++a)e[a]=n,n+=1<<t[a]}var ut=new Uint16Array(16);function ct(t,e,r,i){var a,n;for(a=0;a<16;++a)t.table[a]=0;for(a=0;a<i;++a)t.table[e[r+a]]++;for(t.table[0]=0,n=0,a=0;a<16;++a)ut[a]=n,n+=t.table[a];for(a=0;a<i;++a)e[r+a]&&(t.trans[ut[e[r+a]]++]=a)}function _t(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=1&t.tag;return t.tag>>>=1,e}function ft(t,e,r){if(!e)return r;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var i=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,i+r}function vt(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=0,i=0,a=0,n=t.tag;do{i=2*i+(1&n),n>>>=1,++a,r+=e.table[a],i-=e.table[a]}while(i>=0);return t.tag=n,t.bitcount-=a,e.trans[r+i]}function yt(t,e,r){var i,a,n,o,s,l;for(i=ft(t,5,257),a=ft(t,5,1),n=ft(t,4,4),o=0;o<19;++o)lt[o]=0;for(o=0;o<n;++o){var h=ft(t,3,0);lt[ot[o]]=h}for(ct(st,lt,0,19),s=0;s<i+a;){var u=vt(t,st);switch(u){case 16:var c=lt[s-1];for(l=ft(t,2,3);l;--l)lt[s++]=c;break;case 17:for(l=ft(t,3,3);l;--l)lt[s++]=0;break;case 18:for(l=ft(t,7,11);l;--l)lt[s++]=0;break;default:lt[s++]=u}}ct(e,lt,0,i),ct(r,lt,i,a)}function dt(t,e,r){for(;;){var i=vt(t,e);if(256===i)return 0;if(i<256)t.dest[t.destLen++]=i;else{var a,n,o,s=void 0;for(a=ft(t,rt[i-=257],it[i]),n=vt(t,r),s=o=t.destLen-ft(t,at[n],nt[n]);s<o+a;++s)t.dest[t.destLen++]=t.dest[s]}}}function pt(t){for(var e,r;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if((e=256*(e=t.source[t.sourceIndex+1])+t.source[t.sourceIndex])!==(65535&~(256*t.source[t.sourceIndex+3]+t.source[t.sourceIndex+2])))return-3;for(t.sourceIndex+=4,r=e;r;--r)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,0}function xt(t,e){for(var r="",i=e;i<e+4;i++)r+=String.fromCharCode(t.getInt8(i));return r}function gt(t,e){return t.getUint16(e,!1)}function mt(t,e){return t.getUint32(e,!1)}function bt(t,e){for(var r=[],i=12,a=0;a<e;a+=1){var n=xt(t,i),o=mt(t,i+4),s=mt(t,i+8),l=mt(t,i+12);r.push({tag:n,checksum:o,offset:s,length:l,compression:!1}),i+=16}return r}function Et(t,e){if("WOFF"===e.compression){var r=new Uint8Array(t.buffer,e.offset+2,e.compressedLength-2),i=new Uint8Array(e.length);return function(t,e){var r,i,a=new Q(t,e);do{switch(r=_t(a),ft(a,2,0)){case 0:i=pt(a);break;case 1:i=dt(a,tt,et);break;case 2:yt(a,a.ltree,a.dtree),i=dt(a,a.ltree,a.dtree);break;default:i=-3}if(0!==i)throw new Error("Data error")}while(!r);a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest}(r,i),i.byteLength!==e.length&&$.error("Decompression error: "+e.tag+" decompressed length doesn't match recorded length"),{data:new DataView(i.buffer,0),offset:0}}return{data:t,offset:e.offset}}!function(t,e){var r;for(r=0;r<7;++r)t.table[r]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,r=0;r<24;++r)t.trans[r]=256+r;for(r=0;r<144;++r)t.trans[24+r]=r;for(r=0;r<8;++r)t.trans[168+r]=280+r;for(r=0;r<112;++r)t.trans[176+r]=144+r;for(r=0;r<5;++r)e.table[r]=0;for(e.table[5]=32,r=0;r<32;++r)e.trans[r]=r}(tt,et),ht(rt,it,4,3),ht(at,nt,2,1),rt[28]=0,it[28]=258;var Mt=function(){function t(t,e){this.data=t,this.offset=e,this.relativeOffset=0}return r(t,[{key:"parseUShort",value:function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t}},{key:"parseULong",value:function(){var t=mt(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t}},{key:"parseShort",value:function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t}},{key:"parseFixed",value:function(){var t,e,r=(t=this.data,e=this.offset+this.relativeOffset,t.getInt16(e,!1)+t.getUint16(e+2,!1)/65535);return this.relativeOffset+=4,r}},{key:"parseVersion",value:function(t){var e=gt(this.data,this.offset+this.relativeOffset),r=gt(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===t&&(t=4096),e+r/t/10}}]),t}(),At=function(t){var e,r,i=new DataView(t,0),a=xt(i,0);if(a===String.fromCharCode(0,1,0,0)||"true"===a||"typ1"===a)r=bt(i,e=gt(i,4));else if("OTTO"===a)r=bt(i,e=gt(i,4));else if("wOFF"===a){var n=xt(i,4);if(n!==String.fromCharCode(0,1,0,0)&&"OTTO"!==n)return void $.error("Unsupported OpenType flavor "+a);r=function(t,e){for(var r=[],i=44,a=0;a<e;a+=1){var n=xt(t,i),o=mt(t,i+4),s=mt(t,i+8),l=mt(t,i+12),h=void 0;h=s<l&&"WOFF",r.push({tag:n,offset:o,compression:h,compressedLength:s,length:l}),i+=20}return r}(i,e=gt(i,12))}else $.error("Unsupported OpenType signature "+a);for(var o,s,l=2048,h=0,u=0;u<e;u++){var c=r[u];if("head"===c.tag){var _=Et(i,c),f=new Mt(_.data,_.offset);f.parseVersion(),f.parseFixed(),f.parseULong(),f.parseULong(),f.parseUShort(),l=f.parseUShort()}else if("hhea"===c.tag){var v=Et(i,c),y=new Mt(v.data,v.offset);y.parseVersion(),o=Math.abs(y.parseShort()),s=Math.abs(y.parseShort()),h=Math.abs(y.parseShort()||0)}}return{emSquare:l,ascent:o,descent:s,lineGap:h}},Tt=H.isString,Rt={},St={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},simsun:{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)&&this.info[t].checked},register:function(t,e,r){t=t.toLowerCase(),Tt(e)||e instanceof ArrayBuffer||(r=e,e=null);var i=this.info,a=i[t]=i[t]||{};function n(t){var e=t.emSquare,r=void 0===e?2048:e,i=t.ascent,n=t.descent,o=t.lineGap,s=void 0===o?0:o;i&&n&&Object.assign(a,{lhr:(i+n+s)/r,blr:i/r})}e&&!a.url&&(a.url=e,$.loadFont(t,e,(function(e,r){if(a.success=e.success,e.success){if(!a.lhr&&r)n(At(r));for(var i=Rt[t]||[];i.length;){i.pop().__emitFontRegister(t)}}}))),r&&!a.lhr&&n(r)},hasRegister:function(t){return this.info.hasOwnProperty(t)&&this.info[t].hasOwnProperty("lhr")},hasLoaded:function(t){return this.info.hasOwnProperty(t)&&this.info[t].success},onRegister:function(t,e){(Rt[t]=Rt[t]||[]).push(e)},offRegister:function(t,e){var r=Rt[t]=Rt[t]||[],i=r.indexOf(e);i>-1&&r.splice(i,1)}};St.info["宋体"]=St.info.simsun,St.info.pingfang=St.info["pingfang sc"];var wt={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit",writingMode:"inherit"},Ct={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},kt=[],Ot=[];Object.keys(wt).forEach((function(t){Ot.push(t);var e=wt[t];kt.push({k:t,v:e})}));var It=[],Ft=[];Object.keys(Ct).forEach((function(t){Ft.push(t);var e=Ct[t];It.push({k:t,v:e})}));var Lt={get fontFamily(){return $.defaultFontFamily},fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:0,textStrokeOver:"none",writingMode:"horizontalTb"},Bt=[];Object.keys(Lt).forEach((function(t){Bt.push(t)}));var Dt={DOM:wt,GEOM:Ct,isValid:function(t){return wt.hasOwnProperty(t)||Ct.hasOwnProperty(t)},DOM_KEY_SET:Ot,GEOM_KEY_SET:Ft,DOM_ENTRY_SET:kt,GEOM_ENTRY_SET:It,INHERIT:Lt,INHERIT_KEY_SET:Bt,VALID_STRING_VALUE:{position:["static","relative","absolute"],display:["block","inlineBlock","inline","flex","none"],flexDirection:["row","column","rowReverse","columnReverse"],flexWrap:["wrap","wrapReverse","nowrap"],justifyContent:["flexStart","center","flexEnd","spaceBetween","spaceAround","spaceEvenly"],alignItems:["stretch","flexStart","center","flexEnd","baseline"],alignSelf:["auto","stretch","flexStart","center","flexEnd","baseline"],overflow:["visible","hidden"],mixBlendMode:["normal","multiply","screen","overlay","darken","lighten","colorDodge","colorBurn","hardLight","softLight","difference","exclusion","hue","saturation","color","luminosity"],borderTopStyle:["solid","dashed","dotted"],borderRightStyle:["solid","dashed","dotted"],borderBottomStyle:["solid","dashed","dotted"],borderLeftStyle:["solid","dashed","dotted"],backgroundClip:["borderBox","paddingBox","contentBox"],textOverflow:["clip","ellipsis"],alignContent:["stretch","flexStart","center","flexEnd","spaceBetween","spaceAround"]}},Pt={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var Nt={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},Ht={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,WRITING_MODE:87,FILL:88,STROKE:89,STROKE_WIDTH:90,STROKE_DASHARRAY:91,STROKE_DASHARRAY_STR:92,STROKE_LINECAP:93,STROKE_LINEJOIN:94,STROKE_MITERLIMIT:95,FILL_RULE:96,MATRIX:97,BORDER_TOP:98,BORDER_RIGHT:99,BORDER_BOTTOM:100,BORDER_LEFT:101,TRANSLATE_PATH:102},Gt={};function Wt(t){var e=Gt[t];return e||(e=Gt[t]=t.toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()}))),e}var Yt={};var Ut={},zt={},Xt={};Object.keys(Ht).forEach((function(t){var e=Ht[t];Ut[e]=t;var r=Wt(t);zt[e]=r,Xt[r]=e}));var Vt={STYLE_KEY:Ht,STYLE_R_KEY:Ut,STYLE_RV_KEY:zt,STYLE_V_KEY:Xt,style2Lower:Wt,style2Upper:function(t){var e=Yt[t];return e||(e=Yt[t]=t.replace(/([a-z\d_])([A-Z])/g,(function(t,e,r){return e+"_"+r})).toUpperCase()),e},ELLIPSIS:"…"},Kt=4*(Math.sqrt(2)-1)/3,jt=Nt.crossProduct,Zt=g.calPoint,qt=g.isE,$t=Vt.STYLE_KEY,Jt=$t.WIDTH,Qt=$t.HEIGHT,te=$t.TRANSFORM_ORIGIN;function ee(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function re(t,e,r){for(var i,a=r[0],n=a.x,o=a.y,s=r[0],l=s.x,h=s.y,u=r.length,c=1;c<u;c++){var _=r[c],f=_.x,v=_.y;n=Math.max(n,f),o=Math.max(o,v),l=Math.min(l,f),h=Math.min(h,v)}if(t<l||e<h||t>n||e>o)return!1;for(var y=0,d=r.length;y<d;y++){var p=r[y],x=p.x,g=p.y,m=r[(y+1)%d],b=m.x,E=m.y,M=jt(b-x,E-g,t-x,e-g);if(0!==M)if(M=M>0?1:0,void 0===i)i=M;else if(i^M)return!1}return!0}function ie(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function ae(t,e,r){var i=u(t,4),a=i[0],n=i[1],o=i[2],s=i[3],l=u(e,4),h=l[0],c=l[1],_=l[2],f=l[3];if(r){if(a>_||n>f||h>o||c>s)return!1}else if(a>=_||n>=f||h>=o||c>=s)return!1;return!0}function ne(t,e,r){var i=r.matrix,a=void 0===i?[1,0,0,1,0,0]:i,n=r.computedStyle,o=void 0===n?[]:n,s=o[Jt],l=o[Qt],h=o[te],c=u(h=void 0===h?[.5*s,.5*l]:h,2),_=c[0],f=c[1],v=Zt({x:t*s-_,y:e*l-f},a);return{x:v.x+_,y:v.y+f}}function oe(t){return t*Math.PI/180}var se={pointInConvexPolygon:re,pointInQuadrilateral:function(t,e,r,i,a,n,o,s,l,h,u){if(u&&!qt(u)){var c,_,f,v,y=Zt({x:r,y:i},u);return r=y.x,i=y.y,c=y.w,a=(y=Zt({x:a,y:n},u)).x,n=y.y,_=y.w,l=(y=Zt({x:l,y:h},u)).x,h=y.y,f=y.w,o=(y=Zt({x:o,y:s},u)).x,s=y.y,c&&1!==c&&(r/=c,i/=c),_&&1!==_&&(a/=_,n/=_),f&&1!==f&&(l/=f,h/=f),(v=y.w)&&1!==v&&(o/=v,s/=v),re(t,e,[{x:r,y:i},{x:a,y:n},{x:o,y:s},{x:l,y:h}])}return t>=r&&e>=i&&t<=o&&e<=s},d2r:oe,r2d:function(t){return 180*t/Math.PI},H:Kt,h:ee,angleBySide:function(t,e,r){var i=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(i)},sideByAngle:function(t,e,r){var i=Math.cos(t);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*i)},pointsDistance:ie,triangleIncentre:function(t,e,r,i,a,n){var o=ie(r,i,a,n),s=ie(t,e,a,n),l=ie(t,e,r,i);return{x:(o*t+s*r+l*a)/(o+s+l),y:(o*e+s*i+l*n)/(o+s+l)}},ellipsePoints:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,a=r*Kt,n=i===r?a:i*Kt;return[[t-r,e],[t-r,e-n,t-a,e-i,t,e-i],[t+a,e-i,t+r,e-n,t+r,e],[t+r,e+n,t+a,e+i,t,e+i],[t-a,e+i,t-r,e+n,t-r,e]]},sectorPoints:function t(e,r,i,a,n){if(a>n){var o=[n,a];a=o[0],n=o[1]}if(a===n)return[];var s=[],l=Math.floor(a/90),h=Math.floor(n/90);if(l===h||h-l==1&&n%90==0){var u=ee(oe(Math.abs(a-n)))*i,c=Math.sqrt(Math.pow(i,2)+Math.pow(u,2)),_=Math.atan(u/i);if(l<90){var f=Math.sin(oe(a))*i,v=Math.cos(oe(a))*i,y=[e+f,r-v],d=_+oe(a),p=[e+(f=Math.sin(d)*c),r-(v=Math.cos(d)*c)],x=[e+(f=Math.sin(oe(n))*i),r-(v=Math.cos(oe(n))*i)];d=oe(n)-_;var g=[e+(f=Math.sin(d)*c),r-(v=Math.cos(d)*c)];s.push(y),s.push(p.concat(g).concat(x))}else if(l<180){var m=Math.cos(oe(a-90))*i,b=Math.sin(oe(a-90))*i,E=[e+m,r+b],M=_+oe(a-90),A=[e+(m=Math.cos(M)*c),r+(b=Math.sin(M)*c)],T=[e+(m=Math.cos(oe(n-90))*i),r+(b=Math.sin(oe(n-90))*i)];M=oe(n-90)-_;var R=[e+(m=Math.cos(M)*c),r+(b=Math.sin(M)*c)];s.push(E),s.push(A.concat(R).concat(T))}else if(l<270){var S=Math.sin(oe(a-180))*i,w=Math.cos(oe(a-180))*i,C=[e-S,r+w],k=_+oe(a-180),O=[e-(S=Math.sin(k)*c),r+(w=Math.cos(k)*c)],I=[e-(S=Math.sin(oe(n-180))*i),r+(w=Math.cos(oe(n-180))*i)];k=oe(n-180)-_;var F=[e-(S=Math.sin(k)*c),r+(w=Math.cos(k)*c)];s.push(C),s.push(O.concat(F).concat(I))}else{var L=Math.cos(oe(a-270))*i,B=Math.sin(oe(a-270))*i,D=[e-L,r+B],P=_+oe(a-270),N=[e-(L=Math.cos(P)*c),r+(B=Math.sin(P)*c)],H=[e-(L=Math.cos(oe(n-270))*i),r+(B=Math.sin(oe(n-270))*i)];P=oe(n-270)-_;var G=[e-(L=Math.cos(P)*c),r+(B=Math.sin(P)*c)];s.push(D),s.push(N.concat(G).concat(H))}}else{for(var W=l,Y=[];W<=h;W++)if(0===W){var U=t(e,r,i,a,90);Y.push(U)}else if(1===W){if(l===W||n>90){var z=t(e,r,i,a<90?90:a,n>180?180:n);Y.push(z)}}else if(2===W){if(l===W||n>180){var X=t(e,r,i,a<180?180:a,n>270?270:n);Y.push(X)}}else if(3===W&&(l===W||n>270)){var V=t(e,r,i,a<270?270:a,n);Y.push(V)}s=Y[0];for(var K=1,j=Y.length;K<j;K++)s.push(Y[K][1])}return s},getRectsIntersection:function(t,e){if(!ae(t,e))return null;var r=u(t,4),i=r[0],a=r[1],n=r[2],o=r[3],s=u(e,4),l=s[0],h=s[1],c=s[2],_=s[3];return[Math.max(i,l),Math.max(a,h),Math.min(n,c),Math.min(o,_)]},isRectsOverlap:ae,isRectsInside:function(t,e,r){var i=u(t,4),a=i[0],n=i[1],o=i[2],s=i[3],l=u(e,4),h=l[0],c=l[1],_=l[2],f=l[3];if(r){if(a<=h&&n<=c&&o>=_&&s>=f)return!0}else if(a<h&&n<c&&o>_&&s>f)return!0;return!1},calCoordsInNode:ne,calPercentInNode:function(t,e,r){var i,a,n=r.computedStyle,o=n[Jt],s=n[Qt],l=u(n[te],2),h=l[0],c=l[1],_=Math.atan((s-c)/(o-h)),f=ne(1,1,r),v=f.x,y=f.y;a=v>=h&&y>=c?(i=h===v?-Math.atan(1/0):Math.atan((y-c)/(v-h)))-_:v>=h&&y<c?(i=h===v?-Math.atan(1/0):Math.atan((c-y)/(v-h)))+_:v<h&&y>=c?(i=Math.atan((y-c)/(h-v)))-_:v<h&&y<c?_>=(i=Math.atan((y-c)/(v-h)))?i+Math.PI-_:-(a=Math.PI-i+_):0;var d,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-c,2));return d=t>=h&&e>=c?h===t?-Math.atan(1/0):Math.atan((e-c)/(t-h)):t>=h&&e<c?h===t?-Math.atan(1/0):-Math.atan((e-c)/(h-t)):t<h&&e>=c?Math.PI-Math.atan((e-c)/(h-t)):Math.atan((e-c)/(t-h))-Math.PI,(d-=a)>Math.PI?(d-=Math.PI,[(h-p*Math.cos(d))/o,(c-p*Math.sin(d))/s]):d>.5*Math.PI?(d=Math.PI-d,[(h-p*Math.cos(d))/o,(c+p*Math.sin(d))/s]):d>=0?{x:(h+p*Math.cos(d))/o,y:(c+p*Math.sin(d))/s}:d>=.5*-Math.PI?(d=-d,{x:(h+p*Math.cos(d))/o,y:(c-p*Math.sin(d))/s}):d>=-Math.PI?(d=Math.PI+d,{x:(h-p*Math.cos(d))/o,y:(c-p*Math.sin(d))/s}):(d=-Math.PI-d,{x:(h-p*Math.cos(d))/o,y:(c+p*Math.sin(d))/s})},pointOnCircle:function(t,e,r,i){return i>=270?(i=oe(i-=270),{x:t-Math.cos(i)*r,y:e-Math.sin(i)*r}):i>=180?(i=oe(i-=180),{x:t-Math.sin(i)*r,y:e+Math.cos(i)*r}):i>=90?(i=oe(i-=90),{x:t+Math.cos(i)*r,y:e+Math.sin(i)*r}):(i=oe(i),{x:t+Math.sin(i)*r,y:e-Math.cos(i)*r})}};var le={getConicGradientImage:function(t,e,r,i,a,n){if(a.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");r=Math.floor(r),i=Math.floor(i);for(var o=function(r,i){var a=r-t,n=e-i;if(0===a)return n<0?1*Math.PI:0;if(0===n)return a<0?1.5*Math.PI:.5*Math.PI;var o=Math.atan(n/a);return a>0?.5*Math.PI-o:a<0?1.5*Math.PI-o:void 0},s=a.map((function(t){return{color:t[0],angle:t[1]*Math.PI*2}})),l=0;l<i;l++)for(var h=function(t){var e=o(t,l),i=void 0;for(i=0;i<s.length&&s[i].angle<=e;i++);var a=s[i-1],h=s[i];if(!a||!h)return"continue";var u=(e-a.angle)/(h.angle-a.angle),c=h.color.map((function(t,e){return u*(t-a.color[e])+a.color[e]})),_=4*(t+l*r);n[_]=c[0],n[_+1]=c[1],n[_+2]=c[2],n[_+3]=Math.min(255,255*c[3])},u=0;u<r;u++)h(u);return n}},he=H.int2rgba;function ue(t){var e="";return t.forEach((function(t){var r=t.k,i=t.v;"blur"===r?e+="blur(".concat(i,"px)"):"dropShadow"===r?e+="drop-shadow(".concat(i[0],"px ").concat(i[1],"px ").concat(i[2],"px ").concat(he(i[4]),")"):"hueRotate"===r?e+="hue-rotate(".concat(i,"deg)"):"saturate"!==r&&"brightness"!==r&&"grayscale"!==r&&"contrast"!==r&&"sepia"!==r&&"invert"!==r||(e+="".concat(r,"(").concat(i,"%)"))})),e}var ce={canvasPolygon:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var a=-1,n=0,o=e.length;n<o;n++){var s=e[n];if(Array.isArray(s)&&s.length){a=n;break}}if(-1!==a){var l=e[a];t.moveTo(l[0]+r,l[1]+i),4===l.length?t.moveTo(l[2]+r,l[3]+i):6===l.length&&t.moveTo(l[4]+r,l[5]+i);for(var h=a+1,u=e.length;h<u;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+i):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i,c[4]+r,c[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var a=t[r];if(Array.isArray(a)&&a.length){e=r;break}}if(-1===e)return"";var n=t[e],o="M"+n[0]+","+n[1];4===n.length?o="M"+n[2]+","+n[3]:6===n.length&&(o="M"+n[4]+","+n[5]);for(var s=e+1,l=t.length;s<l;s++){var h=t[s];Array.isArray(h)&&(2===h.length?o+="L"+h[0]+","+h[1]:4===h.length?o+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(o+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return o},canvasLine:function(t,e,r,i,a,n,o,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+l,r+h),3===s?(t.bezierCurveTo(n[0]+l,n[1]+h,o[0]+l,o[1],i+l,a+h),2):2===s?(t.quadraticCurveTo(o[0]+l,o[1]+h,i+l,a+h),2):1===s?(t.quadraticCurveTo(n[0]+l,n[1]+h,i+l,a+h),2):(t.lineTo(i+l,a+h),1)},svgLine:function(t,e,r,i,a,n,o){return 3===o?"M"+t+","+e+"C"+a[0]+","+a[1]+" "+n[0]+","+n[1]+" "+r+","+i:2===o?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:1===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:ue,svgFilter:ue},_e=se.H,fe=d.PX,ve=d.PERCENT,ye=d.REM,de=d.VW,pe=d.VH,xe=d.VMAX,ge=d.VMIN,me=ce.canvasPolygon,be=ce.svgPolygon,Ee=Vt.STYLE_KEY,Me=Ee.BORDER_LEFT_WIDTH,Ae=Ee.BORDER_TOP_WIDTH,Te=Ee.BORDER_BOTTOM_WIDTH,Re=Ee.PADDING_LEFT,Se=Ee.PADDING_BOTTOM,we=Ee.PADDING_TOP,Ce=Ee.BORDER_TOP_LEFT_RADIUS,ke=Ee.BORDER_TOP_RIGHT_RADIUS,Oe=Ee.BORDER_BOTTOM_LEFT_RADIUS,Ie=Ee.BORDER_BOTTOM_RIGHT_RADIUS,Fe=Ee.FONT_SIZE;function Le(t,e,r,i,a,n,o,s){var l=1,h=1,u=1;t:for(var c=n;c>=a;c--)for(var _=s;_>=o;_--){var f=c+_,v=Math.floor((t+_)/f),y=_;if(v*f<_+t)if((y=(t-v*c)/(v-1))>s)continue;if(f=c+y,e>1&&e>c){if(e%f>c)continue;if(r>1)if((e+i)%f>c)continue}if(r>1)if((e+i)%f>c)continue;v>0&&(l=v,h=c,u=y);break t}return{n:l,ps:h,pd:u}}function Be(t,e,r,i,a,n){var o=a-e,s=i-r,l=r-e,h=a-i;if("dotted"===t)return Le(o,l,h,s,n,n,Math.max(1,.25*n),2*n);var u=Le(o,l,h,s,n,3*n,Math.max(1,.25*n),2*n),c=u.n,_=u.ps,f=u.pd;return 1===c?Le(o,l,h,s,n,n,Math.max(1,.25*n),2*n):{n:c,ps:_,pd:f}}function De(t,e,r,i,a,n,o,s,l,h,c,_,f,v){var y=u(f,2),d=y[0],p=y[1],x=u(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return _;for(var b=a+d-(a-i),E=n-g+(o-n),M=[],A=[],T=[],R=0,S=_.length;R<S;R++){var w=_[R];if(w[1][0]<b)M.push(w);else if(w[0][0]>E)T.push(w);else if(w[1][0]>E&&w[0][0]<b){var C=b<a?s+Math.tan(e)*(b-i):l,k=E>n?s+Math.tan(r)*(o-E):l;M.push([w[0],[b,s],[b,C],w[3]]),b<E&&(b>a&&E<n?A.push([[b,s],[E,s],[E,l],[b,l]]):b>a?(A.push([[b,s],[n,s],[n,l],[b,l]]),A.push([[n,s],[E,s],[E,k],[n,l]])):E<n?(A.push([[b,s],[a,s],[a,l],[b,C]]),A.push([[a,s],[E,s],[E,l],[a,l]])):(A.push([[b,s],[a,s],[a,l],[b,C]]),A.push([[a,s],[n,s],[n,l],[a,l]]),A.push([[n,s],[E,s],[E,k],[n,l]]))),T.push([[E,s],w[1],w[2],[E,k]])}else if(w[1][0]>E){var O=E>n?s+Math.tan(r)*(o-E):l;A.push([w[0],[E,s],[E,O],w[3]]),T.push([[E,s],w[1],w[2],[E,O]])}else if(w[0][0]<b){var I=b<a?s+Math.tan(e)*(b-i):l;M.push([w[0],[b,s],[b,I],w[3]]),A.push([[b,s],w[1],w[2],[b,I]])}else A.push(w)}if(M.length){var F,L,B,D,P,N=d>a-i&&t<p,H=Math.atan((a-i)/(l-s)),G=p,W=G/d,Y=s+p,U=p-(l-s),z=U/(d-(a-i)),X=Pe(M[0][0],M[0][1],b,Y,W,G,!0,Math.tan(H)*G),V=u(X[0],2);if(F=V[0],L=V[1],N){var K=u((P=Pe(M[0][3],M[0][2],b,Y,z,U,!0,Math.tan(H)*U))[0],2);B=K[0],D=K[1]}M.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=Pe(t[0],t[1],b,Y,W,G),N&&(i=Pe(t[3],t[2],b,Y,z,U)));for(var a=0,n=r.length;a<n;a++)je(r[a],F,L,0);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),N){for(var o=0,s=i.length;o<s;o++)je(i[o],B,D,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}))}var j=T.length;if(j){var Z,q,$,J,Q,tt=g>o-n&&t<m,et=Math.atan((o-n)/(l-s)),rt=m,it=rt/g,at=s+m,nt=m-(l-s),ot=nt/(g-(o-n)),st=Ne(T[j-1][0],T[j-1][1],E,at,it,rt,!0,Math.tan(et)*rt),lt=u(st[st.length-1],2);if(Z=lt[0],q=lt[1],tt){var ht=u((Q=Ne(T[j-1][3],T[j-1][2],E,at,ot,nt,!0,Math.tan(et)*nt))[Q.length-1],2);$=ht[0],J=ht[1]}T.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=Ne(t[0],t[1],E,at,it,rt),tt&&(i=Ne(t[3],t[2],E,at,ot,nt)));for(var a=0,n=r.length;a<n;a++)je(r[a],Z,q,1);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),tt){for(var o=0,s=i.length;o<s;o++)je(i[o],$,J,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}))}return M.concat(A).concat(T)}function Pe(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(-f+r)*a,g=(-d+r)*a,m=Math.atan(g/(i-p)),b=r-Math.sin(m)*n/a,E=i-Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,c=i-Math.sin(S)*n}else l=Math.atan(x/(i-v)),h=r-Math.sin(l)*n/a,c=i-Math.cos(l)*n;if(l===m)return[[h,c]];var w=se.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=l-k,I=m+k;return[[h,c],[r-Math.sin(O)*C/a,i-Math.cos(O)*C],[r-Math.sin(I)*C/a,i-Math.cos(I)*C],[b,E]]}function Ne(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(x/(i-v)),b=r+Math.sin(m)*n/a,E=i-Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,c=i-Math.sin(S)*n}else l=Math.atan(g/(i-p)),h=r+Math.sin(l)*n/a,c=i-Math.cos(l)*n;if(m===l)return[[b,E]];var w=se.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=m+k,I=l-k;return[[b,E],[r+Math.sin(O)*C/a,i-Math.cos(O)*C],[r+Math.sin(I)*C/a,i-Math.cos(I)*C],[h,c]]}function He(t,e,r,i,a,n,o,s,l,h,c,_,f,v){var y=u(f,2),d=y[0],p=y[1],x=u(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return _;for(var b=l+p-(l-s),E=h-m+(c-h),M=[],A=[],T=[],R=0,S=_.length;R<S;R++){var w=_[R];if(w[2][1]<b)M.push(w);else if(w[1][1]>E)T.push(w);else if(w[2][1]>E&&w[1][1]<b){var C=b<l?n+Math.tan(r)*(l-b):n,k=E>h?n+Math.tan(e)*(E-h):n;M.push([w[0],w[1],[o,b],[C,b]]),b<E&&(E<h&&b>l?A.push([[n,b],[o,b],[o,E],[n,E]]):b>l?(A.push([[n,l],[o,l],[o,h],[n,h]]),A.push([[n,h],[o,h],[o,E],[k,E]])):E<h?(A.push([[C,b],[o,b],[o,l],[n,l]]),A.push([[n,l],[o,l],[o,E],[n,E]])):(A.push([[C,b],[o,b],[o,l],[n,l]]),A.push([[n,l],[o,l],[o,h],[n,h]]),A.push([[n,h],[o,h],[o,E],[k,E]]))),T.push([[k,E],[o,E],w[2],w[3]])}else if(w[2][1]>E){var O=E>h?n+Math.tan(e)*(E-h):n;A.push([w[0],w[1],[o,E],[O,E]]),T.push([[O,E],[o,E],w[2],w[3]])}else if(w[1][1]<b){var I=b<l?n+Math.tan(r)*(l-b):n;M.push([w[0],w[1],[o,b],[I,b]]),A.push([[I,b],[o,b],w[2],w[3]])}else A.push(w)}if(M.length){var F,L,B,D,P,N=p>l-s&&t<d,H=Math.atan((o-n)/(l-s)),G=p,W=G/d,Y=o-d,U=p-(l-s),z=U/(d-(o-n)),X=Ge(M[0][1],M[0][2],Y,b,W,G,!0,Math.tan(H)*G),V=u(X[X.length-1],2);if(F=V[0],L=V[1],N){var K=u((P=Ge(M[0][0],M[0][3],Y,b,z,U,!0,Math.tan(H)*U))[P.length-1],2);B=K[0],D=K[1]}M.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=Ge(t[1],t[2],Y,b,W,G),N&&(i=Ge(t[0],t[3],Y,b,z,U)));for(var a=0,n=r.length;a<n;a++)je(r[a],F,L,2);if(N){for(var o=0,s=i.length;o<s;o++)je(i[o],B,D,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}var j=T.length;if(j){var Z,q,$,J,Q,tt=m>c-h&&t<g,et=Math.atan((o-n)/(c-h)),rt=m,it=rt/g,at=o-g,nt=m-(c-h),ot=nt/(g-(o-n)),st=We(T[j-1][1],T[j-1][2],at,E,it,rt,!0,Math.tan(et)*rt),lt=u(st[0],2);if(Z=lt[0],q=lt[1],tt){var ht=u((Q=We(T[j-1][0],T[j-1][3],at,E,ot,nt,!0,Math.tan(et)*nt))[0],2);$=ht[0],J=ht[1]}T.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=We(t[1],t[2],at,E,it,rt),tt&&(i=We(t[0],t[3],at,E,ot,nt)));for(var a=0,n=r.length;a<n;a++)je(r[a],Z,q,3);if(tt){for(var o=0,s=i.length;o<s;o++)je(i[o],$,J,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}return M.concat(A).concat(T)}function Ge(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(g/(i-p)),b=r+Math.sin(m)*n/a,E=i-Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,c=i-Math.sin(S)*n}else l=Math.atan(x/(i-v)),h=r+Math.sin(l)*n/a,c=i-Math.cos(l)*n;if(l===m)return[[h,c]];var w=se.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=l+k,I=r+Math.sin(O)*C/a,F=i-Math.cos(O)*C,L=m-k;return[[b,E],[r+Math.sin(L)*C/a,i-Math.cos(L)*C],[I,F],[h,c]]}function We(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(x/(v-i)),b=r+Math.sin(m)*n/a,E=i+Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,c=i+Math.sin(S)*n}else l=Math.atan(g/(p-i)),h=r+Math.sin(l)*n/a,c=i+Math.cos(l)*n;if(m===l)return[[b,E]];var w=se.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=m-k,I=r+Math.sin(O)*C/a,F=i+Math.cos(O)*C,L=l+k;return[[h,c],[r+Math.sin(L)*C/a,i+Math.cos(L)*C],[I,F],[b,E]]}function Ye(t,e,r,i,a,n,o,s,l,h,c,_,f,v){var y=u(f,2),d=y[0],p=y[1],x=u(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return _;for(var b=a+d-(a-i),E=n-g+(o-n),M=[],A=[],T=[],R=0,S=_.length;R<S;R++){var w=_[R];if(w[2][0]<b)M.push(w);else if(w[3][0]>E)T.push(w);else if(w[2][0]>E&&w[3][0]<b){var C=b<a?c-Math.tan(e)*(b-i):l,k=E>n?c-Math.tan(r)*(o-E):h;M.push([w[0],[b,C],[b,c],w[3]]),b<E&&(b>a&&E<n?A.push([[b,h],[E,h],[E,c],[b,c]]):b>a?(A.push([[b,h],[n,h],[n,c],[b,c]]),A.push([[n,h],[E,k],[E,c],[n,c]])):E<n?(A.push([[b,C],[a,h],[a,c],[b,c]]),A.push([[a,h],[E,h],[E,c],[a,c]])):(A.push([[b,C],[a,h],[a,c],[b,c]]),A.push([[a,h],[n,h],[n,c],[a,c]]),A.push([[n,h],[E,k],[E,c],[n,c]]))),T.push([[E,k],w[1],w[2],[E,c]])}else if(w[2][0]>E){var O=E>n?c-Math.tan(r)*(o-E):h;A.push([w[0],[E,O],[E,c],w[3]]),T.push([[E,O],w[1],w[2],[E,c]])}else if(w[3][0]<b){var I=b<a?c-Math.tan(e)*(b-i):h;M.push([w[0],[b,I],[b,c],w[3]]),A.push([[b,I],w[1],w[2],[b,c]])}else A.push(w)}if(M.length){var F,L,B,D,P,N=d>a-i&&t<p,H=Math.atan((a-i)/(c-h)),G=p,W=G/d,Y=c-p,U=p-(c-h),z=U/(d-(a-i)),X=Ue(M[0][3],M[0][2],b,Y,W,G,!0,Math.tan(H)*G),V=u(X[0],2);if(F=V[0],L=V[1],N){var K=u((P=Ue(M[0][0],M[0][1],b,Y,z,U,!0,Math.tan(H)*U))[0],2);B=K[0],D=K[1]}M.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=Ue(t[3],t[2],b,Y,W,G),N&&(i=Ue(t[0],t[1],b,Y,z,U)));for(var a=0,n=r.length;a<n;a++)je(r[a],F,L,4);if(N){for(var o=0,s=i.length;o<s;o++)je(i[o],B,D,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}))}var j=T.length;if(j){var Z,q,$,J,Q,tt=g>o-n&&t<m,et=Math.atan((o-n)/(c-h)),rt=m,it=rt/g,at=c-m,nt=m-(c-h),ot=nt/(g-(o-n)),st=ze(T[j-1][3],T[j-1][2],E,at,it,rt,!0,Math.tan(et)*rt),lt=u(st[st.length-1],2);if(Z=lt[0],q=lt[1],tt){var ht=u((Q=ze(T[j-1][0],T[j-1][1],E,at,ot,nt,!0,Math.tan(et)*nt))[Q.length-1],2);$=ht[0],J=ht[1]}T.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=ze(t[3],t[2],E,at,it,rt),tt&&(i=ze(t[0],t[1],E,at,ot,nt)));for(var a=0,n=r.length;a<n;a++)je(r[a],Z,q,5);if(tt){for(var o=0,s=i.length;o<s;o++)je(i[o],$,J,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}))}return M.concat(A).concat(T)}function Ue(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(-f+r)*a,g=(-d+r)*a,m=Math.atan(g/(p-i)),b=r-Math.sin(m)*n/a,E=i+Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,c=i+Math.sin(S)*n}else l=Math.atan(x/(v-i)),h=r-Math.sin(l)*n/a,c=i+Math.cos(l)*n;if(l===m)return[[h,c]];var w=se.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=l-k,I=m+k;return[[h,c],[r-Math.sin(O)*C/a,i+Math.cos(O)*C],[r-Math.sin(I)*C/a,i+Math.cos(I)*C],[b,E]]}function ze(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(f-r)*a,g=(d-r)*a,m=Math.atan(x/(v-i)),b=r+Math.sin(m)*n/a,E=i+Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,c=i+Math.sin(S)*n}else l=Math.atan(g/(p-i)),h=r+Math.sin(l)*n/a,c=i+Math.cos(l)*n;if(m===l)return[[b,E]];var w=se.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=m+k,I=l-k;return[[b,E],[r+Math.sin(O)*C/a,i+Math.cos(O)*C],[r+Math.sin(I)*C/a,i+Math.cos(I)*C],[h,c]]}function Xe(t,e,r,i,a,n,o,s,l,h,c,_,f,v){var y=u(f,2),d=y[0],p=y[1],x=u(v,2),g=x[0],m=x[1];if(!(d&&p||g&&m))return _;for(var b=l+p-(l-s),E=h-m+(c-h),M=[],A=[],T=[],R=0,S=_.length;R<S;R++){var w=_[R];if(w[3][1]<b)M.push(w);else if(w[0][1]>E)T.push(w);else if(w[3][1]>E&&w[0][1]<b){var C=b<l?a-Math.tan(r)*(l-b):a,k=E>h?a-Math.tan(e)*(E-h):a;M.push([w[0],w[1],[C,b],[i,b]]),b<E&&(E<h&&b>l?A.push([[i,b],[a,b],[a,E],[i,E]]):b>l?(A.push([[i,b],[a,b],[a,h],[i,h]]),A.push([[i,h],[a,h],[k,E],[i,E]])):E<h?(A.push([[i,b],[C,b],[a,l],[i,l]]),A.push([[i,l],[a,l],[a,E],[i,E]])):(A.push([[i,b],[C,b],[a,l],[i,l]]),A.push([[i,l],[a,l],[a,h],[i,h]]),A.push([[i,h],[a,h],[k,E],[i,E]]))),T.push([[i,E],[k,E],w[2],w[3]])}else if(w[3][1]>E){var O=E>h?a-Math.tan(e)*(E-h):a;A.push([w[0],w[1],[O,E],[i,E]]),T.push([[i,E],[O,E],w[2],w[3]])}else if(w[1][1]<b){var I=b<l?a-Math.tan(r)*(l-b):a;M.push([w[0],w[1],[I,b],[i,b]]),A.push([[i,b],[I,b],w[2],w[3]])}else A.push(w)}if(M.length){var F,L,B,D,P,N=p>l-s&&t<d,H=Math.atan((a-i)/(l-s)),G=p,W=G/d,Y=i+d,U=p-(l-s),z=U/(d-(a-i)),X=Ve(M[0][0],M[0][3],Y,b,W,G,!0,Math.tan(H)*G),V=u(X[X.length-1],2);if(F=V[0],L=V[1],N){var K=u((P=Ve(M[0][1],M[0][2],Y,b,z,U,!0,Math.tan(H)*U))[P.length-1],2);B=K[0],D=K[1]}M.forEach((function(t,e){var r,i;0===e?(r=X,N&&(i=P)):(r=Ve(t[0],t[3],Y,b,W,G),N&&(i=Ve(t[1],t[2],Y,b,z,U)));for(var a=0,n=r.length;a<n;a++)je(r[a],F,L,6);if(N){for(var o=0,s=i.length;o<s;o++)je(i[o],B,D,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}var j=T.length;if(j){var Z,q,$,J,Q,tt=m>c-h&&t<g,et=Math.atan((a-i)/(c-h)),rt=m,it=rt/g,at=i+g,nt=m-(c-h),ot=nt/(g-(a-i)),st=Ke(T[j-1][0],T[j-1][3],at,E,it,rt,!0,Math.tan(et)*rt),lt=u(st[0],2);if(Z=lt[0],q=lt[1],tt){var ht=u((Q=Ke(T[j-1][1],T[j-1][2],at,E,ot,nt,!0,Math.tan(et)*nt))[0],2);$=ht[0],J=ht[1]}T.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=Ke(t[0],t[3],at,E,it,rt),tt&&(i=Ke(t[1],t[2],at,E,ot,nt)));for(var a=0,n=r.length;a<n;a++)je(r[a],Z,q,7);if(tt){for(var o=0,s=i.length;o<s;o++)je(i[o],$,J,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}return M.concat(A).concat(T)}function Ve(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(r-f)*a,g=(r-d)*a,m=Math.atan(g/(i-p)),b=r-Math.sin(m)*n/a,E=i-Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,c=i-Math.sin(S)*n}else l=Math.atan(x/(i-v)),h=r-Math.sin(l)*n/a,c=i-Math.cos(l)*n;if(l===m)return[[h,c]];var w=se.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=l+k,I=r-Math.sin(O)*C/a,F=i-Math.cos(O)*C,L=m-k;return[[b,E],[r-Math.sin(L)*C/a,i-Math.cos(L)*C],[I,F],[h,c]]}function Ke(t,e,r,i,a,n,o,s){var l,h,c,_=u(t,2),f=_[0],v=_[1],y=u(e,2),d=y[0],p=y[1],x=(r-f)*a,g=(r-d)*a,m=Math.atan(x/(v-i)),b=r-Math.sin(m)*n/a,E=i+Math.cos(m)*n;if(o){var M=s*a,A=Math.atan(M/n),T=Math.sqrt(Math.tan(A)/2),R=T/(1+T),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,c=i+Math.sin(S)*n}else l=Math.atan(g/(p-i)),h=r-Math.sin(l)*n/a,c=i+Math.cos(l)*n;if(m===l)return[[b,E]];var w=se.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(w,2)),k=Math.atan(w/n),O=m-k,I=r-Math.sin(O)*C/a,F=i+Math.cos(O)*C,L=l+k;return[[h,c],[r-Math.sin(L)*C/a,i+Math.cos(L)*C],[I,F],[b,E]]}function je(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Ze=[Ce,ke,Ie,Oe];var qe={calPoints:function(t,e,r,i,a,n,o,s,l,h,u,c,_,f,v){var y=[];if("none"===e)return y;if(["dashed","dotted"].indexOf(e)>-1){var d=0===_||2===_?Be(e,a,n,o,s,t):Be(e,l,h,u,c,t),p=d.n,x=d.ps,g=d.pd;if(p>1){for(var m=0;m<p;m++){var b,E=m===p-1,M=void 0,A=void 0,T=void 0;b=(M=0===_||2===_?m?a+x*m+g*m:a:m?l+x*m+g*m:l)+x,0===_?b<=n?E?y.push([[a,l],[s,l],[o,h],[n,h]]):(A=l+(M-a)*Math.tan(r),T=l+(b-a)*Math.tan(r),y.push([[M,l],[b,l],[b,T],[M,A]])):M>=o?(A=l+(s-M)*Math.tan(i),T=l+(s-b)*Math.tan(i),E?y.push([[M,l],[s,l],[s,l],[M,A]]):y.push([[M,l],[b,l],[b,T],[M,A]])):M<n?(A=l+(M-a)*Math.tan(r),y.push([[M,l],[n,l],[n,h],[M,A]]),E?(y.push([[n,l],[o,l],[o,h],[n,h]]),y.push([[o,l],[s,l],[s,l],[n,h]])):b>o?(T=l+(s-b)*Math.tan(i),y.push([[n,l],[o,l],[o,h],[n,h]]),y.push([[o,l],[b,l],[b,T],[o,h]])):y.push([[n,l],[b,l],[b,h],[n,h]])):b>o?(A=l+(s-b)*Math.tan(i),M<n?(T=l+(M-a)*Math.tan(r),y.push([[M,l],[n,l],[n,h],[M,T]]),y.push([[n,l],[o,l],[o,h],[n,h]]),E?y.push([[o,l],[s,l],[s,l],[o,h]]):y.push([[o,l],[b,l],[b,A],[o,h]])):(y.push([[M,l],[o,l],[o,h],[M,h]]),E?y.push([[o,l],[s,l],[s,l],[o,h]]):y.push([[o,l],[b,l],[b,A],[o,h]]))):E?y.push([[M,l],[s,l],[o,h],[M,h]]):y.push([[M,l],[b,l],[b,h],[M,h]]):1===_?b<=h?E?y.push([[o,h],[s,l],[s,c],[o,u]]):(A=s-(M-l)*Math.tan(r),T=s-(b-l)*Math.tan(r),y.push([[A,M],[s,M],[s,b],[T,b]])):M>=u?(A=o+(M-u)*Math.tan(i),T=o+(b-u)*Math.tan(i),E?y.push([[A,M],[s,M],[s,c],[s,c]]):y.push([[A,M],[s,M],[s,b],[T,b]])):M<h?(A=o+(h-M)*Math.tan(r),y.push([[A,M],[s,M],[s,h],[o,h]]),E?(y.push([[o,h],[s,h],[s,u],[o,u]]),y.push([[o,u],[s,u],[s,c],[s,c]])):b>u?(T=o+(b-u)*Math.tan(i),y.push([[o,h],[s,h],[s,u],[o,u]]),y.push([[o,u],[s,u],[s,b],[T,b]])):y.push([[o,h],[s,h],[s,b],[o,b]])):b>u?(A=o+(b-u)*Math.tan(i),M<h?(T=o+(h-M)*Math.tan(r),y.push([[T,M],[s,M],[s,h],[o,h]]),y.push([[o,h],[s,h],[s,u],[o,u]]),E?y.push([[o,u],[s,u],[s,s],[s,s]]):y.push([[o,u],[s,u],[s,b],[A,b]])):(y.push([[o,M],[s,M],[s,u],[o,u]]),E?y.push([[o,u],[s,u],[s,c],[s,c]]):y.push([[o,u],[s,u],[s,b],[A,b]]))):E?y.push([[o,M],[s,M],[s,c],[o,u]]):y.push([[o,M],[s,M],[s,b],[o,b]]):2===_?b<=n?E?y.push([[a,c],[n,u],[o,u],[s,c]]):(A=c-(M-a)*Math.tan(r),T=c-(b-a)*Math.tan(r),y.push([[M,A],[b,T],[b,c],[M,c]])):M>=o?(A=c-(s-M)*Math.tan(i),T=c-(s-b)*Math.tan(i),E?y.push([[M,A],[s,c],[s,c],[M,c]]):y.push([[M,A],[b,T],[b,c],[M,c]])):M<n?(A=c-(M-a)*Math.tan(r),y.push([[M,A],[n,u],[n,c],[M,c]]),E?(y.push([[n,u],[o,u],[o,c],[n,c]]),y.push([[o,u],[s,c],[s,c],[o,c]])):b>o?(T=c-(b-o)*Math.tan(i),y.push([[n,u],[o,u],[o,c],[n,c]]),y.push([[o,u],[b,T],[b,c],[o,c]])):y.push([[n,u],[b,u],[b,c],[n,c]])):b>o?(A=c-(s-b)*Math.tan(i),M<n?(T=c-(M-o)*Math.tan(r),y.push([[M,T],[n,u],[n,c],[M,c]]),y.push([[n,u],[o,u],[o,c],[n,c]]),E?y.push([[o,u],[s,c],[s,c],[o,c]]):y.push([[o,u],[b,A],[b,c],[o,c]])):(y.push([[M,u],[o,u],[o,c],[M,c]]),E?y.push([[o,u],[s,c],[s,c],[o,c]]):y.push([[o,u],[b,A],[b,c],[o,c]]))):E?y.push([[M,u],[o,u],[s,c],[M,c]]):y.push([[M,u],[b,u],[b,c],[M,c]]):3===_&&(b<=h?E?y.push([[a,l],[n,h],[n,u],[a,c]]):(A=a+(M-l)*Math.tan(r),T=a+(b-l)*Math.tan(r),y.push([[a,M],[A,M],[T,b],[a,b]])):M>=u?(A=a+(c-M)*Math.tan(i),T=a+(c-b)*Math.tan(i),E?y.push([[a,M],[A,M],[a,c],[a,c]]):y.push([[a,M],[A,M],[T,b],[a,b]])):M<h?(A=a+(M-l)*Math.tan(r),y.push([[a,M],[A,M],[n,h],[a,h]]),E?(y.push([[a,h],[n,h],[n,u],[a,u]]),y.push([[a,u],[n,u],[a,c],[a,c]])):b>u?(T=a+(c-b)*Math.tan(i),y.push([[a,h],[n,h],[n,u],[a,u]]),y.push([[a,u],[n,u],[T,b],[a,b]])):y.push([[a,h],[n,h],[n,b],[a,b]])):b>u?(A=a+(c-b)*Math.tan(i),M<h?(T=a+(M-l)*Math.tan(r),y.push([[a,M],[T,M],[n,h],[a,l]]),y.push([[a,h],[n,h],[n,u],[a,u]]),E?y.push([[a,u],[n,u],[a,c],[a,c]]):y.push([[a,u],[n,u],[A,b],[a,b]])):(y.push([[a,M],[n,M],[n,u],[a,u]]),E?y.push([[a,u],[n,u],[a,c],[a,c]]):y.push([[a,u],[n,u],[A,b],[a,b]]))):E?y.push([[a,M],[n,M],[n,u],[a,c]]):y.push([[a,M],[n,M],[n,b],[a,b]]))}if(0===_)return De(t,r,i,a,n,o,s,l,h,u,c,y,f,v);if(1===_)return He(t,r,i,a,n,o,s,l,h,u,c,y,f,v);if(2===_)return Ye(t,r,i,a,n,o,s,l,h,u,c,y,f,v);if(3===_)return Xe(t,r,i,a,n,o,s,l,h,u,c,y,f,v)}}return 0===_?(n>a&&y.push([[a,l],[n,l],[n,h],[a,l]]),y.push([[n,l],[o,l],[o,h],[n,h]]),s>o&&y.push([[o,l],[s,l],[s,l],[o,h]]),De(t,r,i,a,n,o,s,l,h,u,c,y,f,v)):1===_?(h>l&&y.push([[s,l],[s,l],[s,h],[o,h]]),y.push([[o,h],[s,h],[s,u],[o,u]]),c>u&&y.push([[o,u],[s,u],[s,c],[s,c]]),He(t,r,i,a,n,o,s,l,h,u,c,y,f,v)):2===_?(n>a&&y.push([[a,c],[n,u],[n,c],[a,c]]),y.push([[n,u],[o,u],[o,c],[n,c]]),s>o&&y.push([[o,u],[s,c],[s,c],[o,c]]),Ye(t,r,i,a,n,o,s,l,h,u,c,y,f,v)):3===_?(h>l&&y.push([[a,l],[a,l],[n,h],[a,h]]),y.push([[a,h],[n,h],[n,u],[a,u]]),c>u&&y.push([[a,u],[n,u],[a,c],[a,c]]),Xe(t,r,i,a,n,o,s,l,h,u,c,y,f,v)):void 0},calRadius:function(t,e,r,i,a,n,o,s){var l,h=u(a,2),c=h[0],_=h[1],f=u(n,2),v=f[0],y=f[1],d=u(o,2),p=d[0],x=d[1],g=u(s,2),m=g[0],b=g[1];if(c=Math.max(c,0),_=Math.max(_,0),v=Math.max(v,0),y=Math.max(y,0),p=Math.max(p,0),x=Math.max(x,0),m=Math.max(m,0),b=Math.max(b,0),(c>0&&_>0||v>0&&y>0||p>0&&x>0||m>0&&b>0)&&(l=!0),l){var E=[];return c>0&&_>0?(E.push([t,e+_]),E.push([t,e+_*(1-_e),t+c*(1-_e),e,t+c,e])):E.push([t,e]),v>0&&y>0?(E.push([t+r-v,e]),E.push([t+r-v*(1-_e),e,t+r,e+y*(1-_e),t+r,e+y])):E.push([t+r,e]),p>0&&x>0?(E.push([t+r,e+i-x]),E.push([t+r,e+i-x*(1-_e),t+r-p*(1-_e),e+i,t+r-p,e+i])):E.push([t+r,e+i]),m>0&&b>0?(E.push([t+m,e+i]),E.push([t+m*(1-_e),e+i,t,e+i-b*(1-_e),t,e+i-b])):E.push([t,e+i]),E}},calBorderRadius:function(t,e,r,i,a){var n=!0;Ze.forEach((function(o){i[o]=r[o].map((function(r,i){return r.v>0?(n=!1,r.u===fe?Math.max(0,r.v):r.u===ve?Math.max(0,r.v*(i?e:t)*.01):r.u===ye?Math.max(0,r.v*a.computedStyle[Fe]):r.u===de?Math.max(0,r.v*a.width*.01):r.u===pe?Math.max(0,r.v*a.height*.01):r.u===xe?Math.max(0,r.v*Math.max(a.width,a.height)*.01):r.u===ge?Math.max(0,r.v*Math.min(a.width,a.height)*.01):0):0}))})),n||Ze.forEach((function(r,a){var n=a%2==0?0:1,o=n?e:t,s=i[r],l=i[Ze[(a+1)%4]];if(s[n]+l[n]>o){var h=.5*o;s[n]>=h&&l[n]>=h?s[n]=l[n]=h:s[n]>h?s[n]=o-l[n]:l[n]>h&&(l[n]=o-s[n])}}))},calBorderRadiusInline:function(t,e,r){var i,a;t.length&&(i=t[0],(a=t[t.length-1]).isEllipsis&&(a=t[t.length-2]));var n=i?i.outerWidth:0,o=i?i.outerHeight:0;n+=r[Me]+r[Re],o+=r[Ae]+r[Te]+r[we]+r[Se],[Ce,Oe].forEach((function(t){r[t]=e[t].map((function(t,e){var r;return t.u===fe?(r=Math.max(0,t.v),r=Math.min(e?o:n,r)):(r=Math.max(0,t.v*(e?o:n)*.01),r=Math.min(e?o:n,r)),r}))})),n=a?a.outerWidth:0,o=a?a.outerHeight:0,[ke,Ie].forEach((function(t){r[t]=e[t].map((function(t,e){var r;return t.u===fe?(r=Math.max(0,t.v),r=Math.min(e?o:n,r)):(r=Math.max(0,t.v*(e?o:n)*.01),r=Math.min(e?o:n,r)),r}))}))},renderBorder:function(t,e,r,i,a,n,o){if(e===y.CANVAS||e===y.WEBGL)r.beginPath(),r.fillStyle!==a&&(r.fillStyle=a),i.forEach((function(t){me(r,t,n,o)})),r.fill(),r.closePath();else if(e===y.SVG){var s="";i.forEach((function(t){s+=be(t)})),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",a]]})}}},$e=H.rgba2int,Je=H.isNil,Qe=d.PX,tr=d.PERCENT,er=d.DEG,rr=d.NUMBER,ir=d.REM,ar=d.VW,nr=d.VH,or=d.VMAX,sr=d.VMIN,lr=d.calUnit,hr=se.d2r,ur=ce.canvasPolygon,cr=Vt.STYLE_KEY.FONT_SIZE;function _r(t){if(/^[-+]?[\d.]/.test(t)){var e=lr(t);return[rr,er].indexOf(e.u)>-1&&(e.v=Qe),e}return{v:{top:0,left:0,center:50,right:100,bottom:100}[t]||50,u:tr}}function fr(t,e,r){for(var i=[],a=t[0][0],n=0,o=t.length;n<o;n++){var s=t[n];if(s.length>1){var l=s[1];l.u===tr?i.push([s[0],.01*l.v]):l.u===ir?i.push([s[0],l.v*r.computedStyle[cr]/e]):l.u===ar?i.push([s[0],l.v*r.width/e]):l.u===nr?i.push([s[0],l.v*r.height/e]):l.u===or?i.push([s[0],l.v*Math.max(r.width,r.height)/e]):l.u===sr?i.push([s[0],l.v*Math.min(r.width,r.height)/e]):i.push([s[0],l.v/e])}else i.push([s[0]])}if(1===i.length&&i.push(H.clone(i[0])),1===i[0].length&&i[0].push(0),i.length>1){var h=i.length-1;1===i[h].length&&i[h].push(1)}for(var u=i[0][1],c=1,_=i.length;c<_-1;c++){var f=i[c];if(f.length>1)u=f[1];else{for(var v=c+1,y=i[i.length-1][1];v<_-1;v++){var d=i[v];if(d.length>1){y=d[1];break}}for(var p=(y-u)/(v-c+1),x=c;x<v;x++){i[x].push(u+p*(x+1-c))}c=v}}for(var g=1,m=i.length;g<m;g++){var b=i[g],E=i[g-1];b[1]<E[1]&&(b[1]=E[1])}for(var M=0,A=i.length;M<A;M++){var T=i[M];if(T[1]>1){i.splice(M);var R=i[M-1];if(R&&R[1]<1){var S=T[0][0]-R[0][0],w=T[0][1]-R[0][1],C=T[0][2]-R[0][2],k=T[0][3]-R[0][3],O=(1-R[1])/(T[1]-R[1]);i.push([[T[0][0]+S*O,T[0][1]+w*O,T[0][2]+C*O,T[0][3]+k*O],1])}break}}for(var I=i.length-1;I>=0;I--){var F=i[I];if(F[1]<0){i.splice(0,I+1);var L=i[I];if(L&&L[1]>0){var B=L[0][0]-F[0][0],D=L[0][1]-F[0][1],P=L[0][2]-F[0][2],N=L[0][3]-F[0][3],G=-F[1]/(L[1]-F[1]);i.unshift([[F[0][0]+B*G,F[0][1]+D*G,F[0][2]+P*G,F[0][3]+N*G],0])}break}}return i.forEach((function(t){t[1]<0?t[1]=0:t[1]>1&&(t[1]=1)})),i.length||i.push([a,0]),i}function vr(t,e,r,i){var a,n,o,s;if(t>=270){var l=hr(360-t);a=r+Math.sin(l)*e,n=i+Math.cos(l)*e,o=r-Math.sin(l)*e,s=i-Math.cos(l)*e}else if(t>=180){var h=hr(t-180);a=r+Math.sin(h)*e,n=i-Math.cos(h)*e,o=r-Math.sin(h)*e,s=i+Math.cos(h)*e}else if(t>=90){var u=hr(180-t);a=r-Math.sin(u)*e,n=i-Math.cos(u)*e,o=r+Math.sin(u)*e,s=i+Math.cos(u)*e}else{var c=hr(t);a=r-Math.sin(c)*e,n=i+Math.cos(c)*e,o=r+Math.sin(c)*e,s=i-Math.cos(c)*e}return[a,n,o,s]}function yr(t,e,r,i,a,n){var o=t[0],s=t[1];return[o.u===tr?e+o.v*i*.01:o.u===ir?e+o.v*n.computedStyle[cr]:o.u===ar?e+o.v*n.width*.01:o.u===nr?e+o.v*n.height*.01:o.u===or?e+o.v*Math.max(n.width,n.height)*.01:o.u===sr?e+o.v*Math.min(n.width,n.height)*.01:e+o.v,s.u===tr?r+s.v*a*.01:s.u===ir?r+s.v*n.computedStyle[cr]:s.u===ar?r+s.v*n.width*.01:s.u===nr?r+s.v*n.height*.01:s.u===nr?r+s.v*Math.max(n.width,n.height)*.01:s.u===nr?r+s.v*Math.min(n.width,n.height)*.01:r+s.v]}function dr(t,e,r,i,a,n,o,s,l,h){var c,_,f,v,y,d,p,x=0;if(Array.isArray(e))c=n+e[0]*i,_=o+e[1]*a,d=n+e[4]*i,p=o+e[5]*a,e[6]<=0?y=Math.min(Math.abs(c-n),Math.min(Math.abs(_-o),Math.min(Math.abs(_-l),Math.min(Math.abs(c-l))))):(v=(f=Math.sqrt(Math.pow((e[2]-e[0])*i,2)+Math.pow((e[3]-e[1])*a,2)))*e[6],y=Math.max(f,v),f!==v&&(x=e[2]>=e[0]?e[3]>=e[1]?Math.asin((e[3]-e[1])*a/f):-Math.asin((e[1]-e[3])*a/f):e[3]>=e[1]?hr(180)-Math.asin((e[3]-e[1])*a/f):Math.asin((e[1]-e[3])*a/f)-hr(180)));else{var g=u(yr(r,n,o,i,a,h),2);d=c=g[0],p=_=g[1];var m=1;if("closest-corner"===e&&"circle"===t)c<=n||c>=s||_<=o||_>=l?y=Math.min(Math.abs(c-n),Math.min(Math.abs(_-o),Math.min(Math.abs(_-l),Math.min(Math.abs(c-l))))):(f=c<n+.5*i?c-n:s-c,v=_<o+.5*a?_-o:l-_,y=Math.sqrt(Math.pow(f,2)+Math.pow(v,2)));else if("closest-side"===e||"closest-corner"===e)if(c<=n||c>=s||_<=o||_>=l)y=Math.min(Math.abs(c-n),Math.min(Math.abs(_-o),Math.min(Math.abs(_-l),Math.min(Math.abs(c-l)))));else{var b=1;f=c<n+.5*i?c-n:s-c,v=_<o+.5*a?_-o:l-_,y=Math.min(f,v),"closest-corner"===e&&(b=Math.sqrt(2)),f*=b,v*=b,y*=b}else f=c<=n?n-c+i:c>=s?c-s+i:c<n+.5*i?s-c:c-n,v=_<=o?o-_+a:_>=l?_-l+a:_<o+.5*a?l-_:_-o,y=Math.max(f,v),"farthest-side"!==e&&(m=Math.sqrt(2)),f*=m,v*=m,y*=m}return"circle"===t&&(f=v=y),[c,_,y,f,v,d,p,x]}var pr={parseGradient:function(t){var e=Pt.gradient.exec(t);if(e){var r={k:e[1]};if("linear"===r.k){var i=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(e[2]);if(i)r.d=function(t){var e=180;if("to top"===t)e=0;else if("to top right"===t)e=45;else if("to right"===t)e=90;else if("to bottom right"===t)e=135;else if("to bottom"===t);else if("to bottom left"===t)e=225;else if("to left"===t)e=270;else if("to top left"===t)e=315;else{var r=/([-+]?[\d.]+)deg/.exec(t);r&&(e=parseFloat(r[1]))}return e%360}(i[0].toLowerCase());else{var a=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(e[2]);r.d=a?[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])]:180}}else if("radial"===r.k){r.s=e[2].indexOf("circle")>-1?"circle":"ellipse";var n=/(closest|farthest)-(side|corner)/i.exec(e[2]);if(n)r.z=n[0].toLowerCase();else{var o=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(e[2]);if(o){r.z=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])];var s=!Je(o[5]),l=!Je(o[6]),h=!Je(o[7]);s&&l&&h?(r.z.push(parseFloat(o[5])),r.z.push(parseFloat(o[6])),r.z.push(parseFloat(o[7]))):s&&l?(r.z.push(parseFloat(o[5])),r.z.push(parseFloat(o[6])),r.z.push(1)):s?(r.z.push(r.z[0]),r.z.push(r.z[1]),r.z.push(parseFloat(o[5]))):(r.z.push(r.z[0]),r.z.push(r.z[1]),r.z.push(1))}else r.z="farthest-corner"}var u=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(u){var c=_r(u[1]),_=u[2]?_r(u[2]):c;r.p=[c,_]}else r.p=[{v:50,u:tr},{v:50,u:tr}]}else if("conic"===r.k){var f=/([-+]?[\d.]+deg)/i.exec(e[2]);r.d=f?parseFloat(f[0])%360:0;var v=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(v){var y=_r(v[1]),d=v[2]?_r(v[2]):y;r.p=[y,d]}else r.p=[{v:50,u:tr},{v:50,u:tr}]}var p=e[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[];return r.v=p.map((function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),r=[$e(e[0])],i=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);if(i){var a=lr(i[0]);[rr,er].indexOf(a.u)>-1&&(a.v=Qe),r[1]=a}return r})),r}},getLinear:function(t,e,r,i,a,n,o,s,l){var h,u,c,_,f,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;if(r+=v,i+=y,a+=v,n+=y,Array.isArray(e)){h=r+e[0]*o,u=i+e[1]*s,c=r+e[2]*o,_=i+e[3]*s;var d=Math.sqrt(Math.pow(c-h,2)+Math.pow(_-u,2));f=fr(t,d)}else{for(;e>=360;)e-=360;for(;e<0;)e+=360;var p=Math.max(o,s),x=vr(e,p,a,n);p*=2;var g=Nt.dotProduct(r-x[0],i-x[1],x[2]-x[0],x[3]-x[1])/p,m=Nt.dotProduct(r+o-x[0],i-x[1],x[2]-x[0],x[3]-x[1])/p,b=Nt.dotProduct(r+o-x[0],i+s-x[1],x[2]-x[0],x[3]-x[1])/p,E=Nt.dotProduct(r-x[0],i+s-x[1],x[2]-x[0],x[3]-x[1])/p,M=g,A=g;M=Math.min(M,Math.min(m,Math.min(b,E)));var T=(A=Math.max(A,Math.max(m,Math.max(b,E))))-M,R=M/p,S=x[2]-x[0],w=x[3]-x[1];h=x[0]+S*R,u=x[1]+w*R,c=x[2]-S*R,_=x[3]-w*R,f=fr(t,T,l)}return{x1:h,y1:u,x2:c,y2:_,stop:f}},getRadial:function(t,e,r,i,a,n,o,s,l){var h,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,_=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,f=o-a,v=s-n,y=dr(e,r,i,f,v,a+=c,n+=_,o+=c,s+=_,l),d=u(y,8),p=d[0],x=d[1],m=d[2],b=d[3],E=d[4],M=d[5],A=d[6],T=d[7],R=1,S=1;if(b!==E||T){if(h=[1,0,0,1,0,0],T){var w=Math.sin(T),C=Math.cos(T);h=[C,w,0,0,-w,C,0,0,0,0,1,0,0,0,0,1]}if(b!==m){var k=[R=b/m,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];h=g.multiply(h,k)}if(E!==m){var O=[1,0,0,0,0,S=E/m,0,0,0,0,1,0,0,0,0,1];h=g.multiply(h,O)}}var I=fr(t,m,l);return{cx:p,cy:x,tx:M,ty:A,r:m,stop:I,scx:R,scy:S,matrix:h,d:T}},getConic:function(t,e,r,i,a,n,o,s,l){var h=function(t,e,r,i,a,n,o,s){var l,h,c,_=n-i,f=o-a,v=u(yr(r,i,a,_,f,s),2),y=v[0],d=v[1];h=y>=i+.5*_?y-i:n-y;c=d>=a+.5*f?d-a:o-d;return l=Math.sqrt(Math.pow(h,2)+Math.pow(c,2)),[y,d,l,e]}(0,e,r,i,a,n,o,l),c=u(h,4),_=c[0],f=c[1],v=c[2];return v<<=1,{cx:_,cy:f,w:n-i,h:o-a,r:v*=s,deg:c[3],stop:fr(t,1,l)}},renderConic:function(t,e,r,i,a,n,o,s,l,h,u,c,_){var f=qe.calRadius(a,n,o,s,l,h,u,c);if(f||(f=[[a,n],[a+o,n],[a+o,n+s],[a,n+s],[a,n]]),e===y.CANVAS||e===y.WEBGL){var v=$.getOffscreenCanvas(o,s,"__$$CONIC_GRADIENT$$__",null),d=v.ctx.getImageData(0,0,o,s);le.getConicGradientImage(i.cx-a,i.cy-n,i.w,i.h,i.stop,d.data),v.ctx.putImageData(d,0,0),r.save(),r.beginPath(),ur(r,f),r.clip(),r.closePath(),r.drawImage(v.canvas,a,n),r.restore(),v.ctx.clearRect(0,0,o,s)}}},xr=H.isNil;function gr(t,e,r,i){xr(t.flexGrow)&&(t.flexGrow=e||0),xr(t.flexShrink)&&(t.flexShrink=r||0),xr(t.flexBasis)&&(t.flexBasis=i||0)}var mr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(t,e){var r=this,i=t[e];if("background"===e)if(Array.isArray(i)){var a=i.length;if(xr(t.backgroundColor)){var n=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(i[a-1]);n&&(t.backgroundColor=n[0],i=i.slice(0,a-1))}var o=[],s=[],l=[];i.forEach((function(e){if(xr(t.backgroundImage)){var r=Pt.gradient.exec(e);if(r)o.push(r[0]),e=e.replace(r[0],"");else{var a=Pt.img.exec(i);a&&(o.push(a[0]),e=e.replace(a[0],""))}}if(xr(t.backgroundRepeat)){var n=/(no-?)?repeat(-?[xy])?/i.exec(e);n&&s.push(n[0].toLowerCase())}if(xr(t.backgroundPosition)){var h=e.match(Pt.position);h&&l.push(h.join(" "))}})),o.length&&(t.backgroundImage=o),s.length&&(t.backgroundRepeat=s),l.length&&(t.backgroundPosition=l,this.toFull(t,"backgroundPosition"))}else{if(xr(t.backgroundImage)){var h=Pt.gradient.exec(i);if(h)t.backgroundImage=h[0],i=i.replace(h[0],"");else{var u=Pt.img.exec(i);u&&(t.backgroundImage=u[0],i=i.replace(u[0],""))}}if(xr(t.backgroundRepeat)){var c=/(no-?)?repeat(-?[xy])?/i.exec(i);c&&(t.backgroundRepeat=c[0].toLowerCase())}if(xr(t.backgroundColor)){var _=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(i);_&&(t.backgroundColor=_[0],i=i.replace(_[0],""))}if(xr(t.backgroundPosition)){var f=i.match(Pt.position);f&&(t.backgroundPosition=f.join(" "),this.toFull(t,"backgroundPosition"))}}else if("flex"===e)if("none"===i)gr(t,0,0,"auto");else if("auto"===i)gr(t,1,1,"auto");else if(/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(i)||/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(i)){var v=i.split(/\s+/);gr(t,parseFloat(v[0]),parseFloat(v[1]),v[2])}else if(/^[\d.]+\s+[\d.]+$/.test(i)){var y=i.split(/\s+/);gr(t,parseFloat(y[0]),parseFloat(y[1]),0)}else if(/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(i)){var d=i.split(/\s+/);gr(t,parseFloat(d[0]),1,d[1])}else/^[\d.]+$/.test(i)?gr(t,parseFloat(i),1,0):/^[\d.]+[pxremvwhina%]+/i.test(i)?gr(t,1,1,i):gr(t,0,1,"auto");else if("flexFlow"===e)(i=i.toString().split(/\s+/)).length&&(xr(t.flexDirection),t.flexDirection=i[0],i.length>1&&(t.flexWrap=i[1]));else if("borderRadius"===e){1===(i=i.toString().split("/")).length&&(i[1]=i[0]);for(var p=0;p<2;p++){var x=i[p].toString().split(/\s+/);0===x.length?i[p]=[0,0,0,0]:1===x.length?i[p]=[x[0],x[0],x[0],x[0]]:2===x.length?i[p]=[x[0],x[1],x[0],x[1]]:3===x.length?i[p]=[x[0],x[1],x[2],x[1]]:i[p]=x.slice(0,4)}this[e].forEach((function(e,r){xr(t[e])&&(t[e]=i[0][r]+" "+i[1][r])}))}else if("backgroundPosition"===e){Array.isArray(i)||(i=[i]);var g=this[e].map((function(e){return xr(t[e])}));i.forEach((function(i){1===(i=i.toString().split(/\s+/)).length&&(i[1]="50%"),r[e].forEach((function(e,r){g[r]&&(t[e]=t[e]||[],t[e].push(i[r]))}))}))}else if(["translate","scale","skew"].indexOf(e)>-1){var m=i.toString().split(/\s*,\s*/);1===m.length&&(m[1]=m[0]),this[e].forEach((function(e,r){xr(t[e])&&(t[e]=m[r])}))}else if(["translate3d","scale3d"].indexOf(e)>-1){var b=i.toString().split(/\s*,\s*/);1===b.length?b[2]=b[1]=b[0]:2===b.length&&(b[2]="scale3d"===e?1:0),this[e].forEach((function(e,r){xr(t[e])&&(t[e]=b[r])}))}else if("margin"===e||"padding"===e)!function(t,e,r){var i=t[e];if(!xr(i)){var a=i.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi);a&&(1===a.length?a[3]=a[2]=a[1]=a[0]:2===a.length?(a[2]=a[0],a[3]=a[1]):3===a.length&&(a[3]=a[1]),r.forEach((function(e,r){xr(t[e])&&(t[e]=a[r])})))}}(t,e,this[e]);else if(/^border((Top)|(Right)|(Bottom)|(Left))$/.test(e))!function(t,e){var r=t[e];if(!xr(r)){if(xr(t[e+"Width"])){var i=/\b[\d.]+[pxremvwhina%]*\b/i.exec(r);t[e+"Width"]=i?i[0]:0}if(xr(t[e+"Style"])){var a=/\b(solid|dashed|dotted)\b/i.exec(r);t[e+"Style"]=a?a[1]:"solid"}if(xr(t[e+"Color"])){var n=/#[0-9a-f]{3,8}/i.exec(r);n&&[4,7,9].indexOf(n[0].length)>-1?t[e+"Color"]=n[0]:/\btransparent\b/i.test(r)?t[e+"Color"]="transparent":(n=/rgba?\s*\(.+\)/i.exec(r),t[e+"Color"]=n?n[0]:"transparent")}}}(t,e);else if("textStroke"===e){var E=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(i);E&&(t.textStrokeWidth=E[1]);var M=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(i);M&&(t.textStrokeColor=M[0]),/\bfill\b/i.test(i)?t.textStrokeOver="fill":t.textStrokeOver="none"}else this[e]&&this[e].forEach((function(e){xr(t[e])&&(t[e]=i)}));return t}},br=Vt.STYLE_KEY,Er=br.BACKGROUND_COLOR,Mr=br.BORDER_BOTTOM_COLOR,Ar=br.BORDER_LEFT_COLOR,Tr=br.BORDER_RIGHT_COLOR,Rr=br.BORDER_TOP_COLOR,Sr=br.COLOR,wr=br.TEXT_STROKE_COLOR,Cr=br.FONT_SIZE,kr=br.BORDER_BOTTOM_WIDTH,Or=br.BORDER_LEFT_WIDTH,Ir=br.BORDER_RIGHT_WIDTH,Fr=br.BORDER_TOP_WIDTH,Lr=br.LEFT,Br=br.TOP,Dr=br.RIGHT,Pr=br.BOTTOM,Nr=br.FLEX_BASIS,Hr=br.WIDTH,Gr=br.HEIGHT,Wr=br.LINE_HEIGHT,Yr=br.MARGIN_BOTTOM,Ur=br.MARGIN_LEFT,zr=br.MARGIN_TOP,Xr=br.MARGIN_RIGHT,Vr=br.PADDING_TOP,Kr=br.PADDING_RIGHT,jr=br.PADDING_BOTTOM,Zr=br.PADDING_LEFT,qr=br.STROKE_WIDTH,$r=br.STROKE_MITERLIMIT,Jr=br.LETTER_SPACING,Qr=br.PERSPECTIVE,ti=br.TEXT_STROKE_WIDTH,ei=br.TRANSLATE_X,ri=br.TRANSLATE_Y,ii=br.TRANSLATE_Z,ai=br.SKEW_X,ni=br.SKEW_Y,oi=br.SCALE_X,si=br.SCALE_Y,li=br.SCALE_Z,hi=br.ROTATE_X,ui=br.ROTATE_Y,ci=br.ROTATE_Z,_i=br.BACKGROUND_IMAGE,fi=br.FILL,vi=br.STROKE,yi=br.BORDER_TOP_LEFT_RADIUS,di=br.BORDER_TOP_RIGHT_RADIUS,pi=br.BORDER_BOTTOM_RIGHT_RADIUS,xi=br.BORDER_BOTTOM_LEFT_RADIUS;var gi=function(t){return t===Er||t===Mr||t===Ar||t===Tr||t===Rr||t===Sr||t===wr},mi=function(t){return t===Cr||t===ti||t===kr||t===Or||t===Ir||t===Fr||t===Lr||t===Br||t===Dr||t===Pr||t===Nr||t===Hr||t===Gr||t===Wr||t===Yr||t===zr||t===Ur||t===Xr||t===Vr||t===Kr||t===Zr||t===jr||t===qr||t===$r||t===Jr||t===Qr},bi=function(t){return t===ei||t===ri||t===ii||t===ai||t===ni||t===oi||t===si||t===li||t===hi||t===ui||t===ci},Ei=function(t){return t===_i||t===fi||t===vi},Mi=function(t){return t===xi||t===yi||t===di||t===pi},Ai=Dt.DOM,Ti=Dt.GEOM,Ri=Vt.STYLE_KEY,Si=Ri.POINTER_EVENTS,wi=Ri.COLOR,Ci=Ri.STROKE_WIDTH,ki=Ri.FILL,Oi=Ri.STROKE_DASHARRAY,Ii=Ri.STROKE_LINECAP,Fi=Ri.STROKE_LINEJOIN,Li=Ri.STROKE_MITERLIMIT,Bi=Ri.BACKGROUND_COLOR,Di=Ri.BACKGROUND_IMAGE,Pi=Ri.BACKGROUND_POSITION_X,Ni=Ri.BACKGROUND_POSITION_Y,Hi=Ri.BACKGROUND_REPEAT,Gi=Ri.BACKGROUND_SIZE,Wi=Ri.STROKE,Yi=Ri.BORDER_BOTTOM_COLOR,Ui=Ri.BORDER_LEFT_COLOR,zi=Ri.BORDER_RIGHT_COLOR,Xi=Ri.BORDER_TOP_COLOR,Vi=Ri.BORDER_TOP_LEFT_RADIUS,Ki=Ri.BORDER_TOP_RIGHT_RADIUS,ji=Ri.BORDER_BOTTOM_RIGHT_RADIUS,Zi=Ri.BORDER_BOTTOM_LEFT_RADIUS,qi=Ri.VISIBILITY,$i=Ri.BOX_SHADOW,Ji=Ri.OVERFLOW,Qi=Ri.BACKGROUND_CLIP,ta=Ri.TEXT_STROKE_WIDTH,ea=Ri.TEXT_STROKE_COLOR,ra=Ri.TEXT_STROKE_OVER,ia=Ri.TRANSLATE_PATH,aa={},na=[],oa={GEOM:aa,GEOM_KEY_SET:na,addGeom:function(t,e,r){if(Array.isArray(e))e.forEach((function(e){oa.addGeom(t,e,r)}));else if(e){aa.hasOwnProperty(e)||na.push(e),(aa[e]=aa[e]||{})[t]=r||!0}},isIgnore:function(t){return t===Si||t===ia},isGeom:function(t,e){return t&&e&&aa.hasOwnProperty(e)&&aa[e].hasOwnProperty(t)},isRepaint:function(t,e){return t===wi||t===Ci||t===ki||t===Oi||t===Ii||t===Fi||t===Li||t===Bi||t===Di||t===Pi||t===Ni||t===Hi||t===Gi||t===Wi||t===Yi||t===Ui||t===Yi||t===zi||t===Xi||t===Vi||t===Ki||t===ji||t===Zi||t===qi||t===$i||t===Ji||t===Qi||t===ta||t===ea||t===ra||oa.isGeom(e,t)},isValid:function(t,e){return!!e&&(!!Ai.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Ti.hasOwnProperty(e))||(aa.hasOwnProperty(e)?aa[e].hasOwnProperty(t):"translatePath"===e)))}};function sa(t){if(t<=0)return 0;var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return e<2&&(e=2),e%2==0&&e++,e}function la(t){return 3*Math.floor(.5*t)}oa.addGeom("$line",["xa","ya","xb","yb","controlA","controlB","start","end"]),oa.addGeom("$circle",["r"]),oa.addGeom("$ellipse",["rx","ry"]),oa.addGeom("$rect",["rx","ry"]),oa.addGeom("$sector",["begin","end","edge","closure"]),oa.addGeom("$polyline",["points","controls","start","end"]),oa.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var ha={kernelSize:sa,outerSize:function(t){return la(sa(t))},outerSizeByD:la,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),a=0,n=i;n>=0;n--){var o=Math.pow(Math.E,-Math.pow(n,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(o),a+=o}for(var s=1;s<=i;s++){var l=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(l),a+=l}if(1!==a)for(var h=0;h<e;h++)r[h]/=a;return r}},ua=Vt.STYLE_KEY,ca=Vt.style2Upper,_a=Vt.STYLE_KEY,fa=_a.POSITION,va=_a.WIDTH,ya=_a.HEIGHT,da=_a.TRANSLATE_X,pa=_a.TRANSLATE_Y,xa=_a.TRANSLATE_Z,ga=_a.SCALE_X,ma=_a.SCALE_Y,ba=_a.SCALE_Z,Ea=_a.SKEW_X,Ma=_a.SKEW_Y,Aa=_a.ROTATE_X,Ta=_a.ROTATE_Y,Ra=_a.ROTATE_Z,Sa=_a.ROTATE_3D,wa=_a.PERSPECTIVE,Ca=_a.PERSPECTIVE_ORIGIN,ka=_a.TRANSFORM,Oa=_a.TRANSFORM_ORIGIN,Ia=_a.BACKGROUND_IMAGE,Fa=_a.BACKGROUND_COLOR,La=_a.BACKGROUND_POSITION_X,Ba=_a.BACKGROUND_POSITION_Y,Da=_a.BACKGROUND_SIZE,Pa=_a.OPACITY,Na=_a.Z_INDEX,Ha=_a.COLOR,Ga=_a.FONT_SIZE,Wa=_a.FONT_FAMILY,Ya=_a.FONT_WEIGHT,Ua=_a.FONT_STYLE,za=_a.LINE_HEIGHT,Xa=_a.TEXT_ALIGN,Va=_a.FILTER,Ka=_a.VISIBILITY,ja=_a.BOX_SHADOW,Za=_a.POINTER_EVENTS,qa=_a.FILL,$a=_a.STROKE,Ja=_a.STROKE_WIDTH,Qa=_a.STROKE_DASHARRAY,tn=_a.FLEX_BASIS,en=_a.MATRIX,rn=_a.LETTER_SPACING,an=_a.WHITE_SPACE,nn=_a.LINE_CLAMP,on=_a.ORDER,sn=_a.TRANSLATE_PATH,ln=_a.TEXT_STROKE_COLOR,hn=_a.TEXT_STROKE_WIDTH,un=_a.TEXT_STROKE_OVER,cn=_a.WRITING_MODE,_n=d.AUTO,fn=d.PX,vn=d.PERCENT,yn=d.NUMBER,dn=d.INHERIT,pn=d.DEG,xn=d.RGBA,gn=d.STRING,mn=d.REM,bn=d.VW,En=d.VH,Mn=d.VMAX,An=d.VMIN,Tn=d.GRADIENT,Rn=d.calUnit,Sn=H.isNil,wn=H.rgba2int,Cn=H.equalArr,kn=H.equal,On=H.replaceRgba2Hex,In=oa.isGeom,Fn=oa.GEOM,Ln=oa.GEOM_KEY_SET,Bn=Dt.VALID_STRING_VALUE,Dn=gi,Pn=bi,Nn=mi,Hn=Ei,Gn=Mi;function Wn(t){if(Pt.gradient.test(t)){var e=Pt.gradient.exec(t);if(e&&["linear","radial","conic"].indexOf(e[1])>-1)return!0}}var Yn={translateX:da,translateY:pa,translateZ:xa,scaleX:ga,scaleY:ma,scaleZ:ba,skewX:Ea,skewY:Ma,rotateX:Aa,rotateY:Ta,rotateZ:Ra,rotate:Ra};function Un(t,e){t===ga||t===ma||t===ba?e.u=yn:t===da||t===pa||t===xa?e.u===yn&&(e.u=fn):t===wa?[yn,vn,pn].indexOf(e.u)>-1&&(e.u=fn):e.u===yn&&(e.u=pn)}function zn(t){return Sn(t)&&(t=""),(t=t.toString()).indexOf("-")>-1?t.toString().toLowerCase().replace(/-([a-z])/gi,(function(t,e){return e.toUpperCase()})):t}function Xn(t,e){e=zn(e);var r=Bn[t],i=r.indexOf(e);return i>-1?r[i]:r[0]}function Vn(t){var e=t[Ga],r=jn(t[Wa]),i=Kn(t,r);return.5*(t[za]-i)+e*(St.info[r]||St.info[$.defaultFontFamily]||St.info.arial).blr}function Kn(t,e){return e||(e=jn(t[Wa])),t[Ga]*(St.info[e]||St.info[$.defaultFontFamily]||St.info.arial).lhr}function jn(t){for(var e=t.split(/\s*,\s*/),r=0,i=e.length;r<i;r++){var a=e[r].replace(/^['"]/,"").replace(/['"]$/,"");if(St.hasLoaded(a)||$.checkSupportFontFamily(a))return a}return $.defaultFontFamily}function Zn(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i.u===_n){if(r!==va)break;e=e.domParent}else{if(i.u===fn)return t*i.v;if(i.u===vn)t*=.01*i.v,e=e.domParent;else{if(i.u===mn)return t*i.v*e.root.computedStyle[Ga];if(i.u===bn)return t*i.v*e.root.width*.01;if(i.u===En)return t*i.v*e.root.height*.01;if(i.u===Mn)return t*i.v*Math.max(e.root.width,e.root.height)*.01;if(i.u===An)return t*i.v*Math.min(e.root.width,e.root.height)*.01}}}return t}var qn={normalize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!H.isObject(t))return{};var r={},i=(t=H.extend({},t)).border;if(i&&mr.toFull(t,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach((function(e){mr.toFull(t,e)})),(i=t.borderWidth)&&mr.toFull(t,"borderWidth"),(i=t.borderColor)&&mr.toFull(t,"borderColor"),(i=t.borderStyle)&&mr.toFull(t,"borderStyle"),(i=t.borderRadius)&&mr.toFull(t,"borderRadius"),(i=t.background)&&mr.toFull(t,"background"),i=t.backgroundPosition,Sn(i)||mr.toFull(t,"backgroundPosition"),(i=t.flex)&&mr.toFull(t,"flex"),(i=t.flexFlow)&&mr.toFull(t,"flexFlow"),i=t.margin,Sn(i)||mr.toFull(t,"margin"),i=t.padding,Sn(i)||mr.toFull(t,"padding"),(i=t.textStroke)&&mr.toFull(t,"textStroke"),(i=t.rotate3d)&&mr.toFull(t,"rotate3d"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach((function(e){i=t[e],Sn(i)||mr.toFull(t,e)})),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach((function(e){void 0!==t[e]&&t.transform&&$.warn('Can not use expand style "'.concat(e,'" with transform'))})),e.forEach((function(e){var r=e.k,i=e.v;Sn(t[r])&&(t[r]=i)})),void 0!==(i=t.backgroundImage)&&(i?Array.isArray(i)?r[Ia]=i.map((function(t){return t?Wn(t)?{v:pr.parseGradient(t),u:Tn}:Pt.img.test(t)?{v:Pt.img.exec(t)[2],u:gn}:null:null})):Wn(i)?r[Ia]=[{v:pr.parseGradient(i),u:Tn}]:Pt.img.test(i)?r[Ia]=[{v:Pt.img.exec(i)[2],u:gn}]:r[Ia]=[]:r[Ia]=[]),void 0!==(i=t.backgroundColor)){var a=/^#[0-9a-f]{3,8}/i.exec(i=i||"transparent");a&&[4,7,9].indexOf(a[0].length)>-1?r[Fa]={v:wn(a[0]),u:xn}:(a=/rgba?\s*\(.+\)/i.exec(i),r[Fa]={v:wn(a?a[0]:[0,0,0,0]),u:xn})}if(["backgroundPositionX","backgroundPositionY"].forEach((function(e,a){void 0!==(i=t[e])&&(i=i||0,e=a?Ba:La,Array.isArray(i)||(i=[i]),r[e]=i.map((function(t){if(/^[-+]?[\d.]/.test(t)){var e=Rn(t);return[yn,pn].indexOf(e.u)>-1&&(e.u=fn),e}return{v:{top:0,left:0,center:50,right:100,bottom:100}[t]||0,u:vn}})))})),void 0!==(i=t.backgroundSize)&&(Array.isArray(i)||(i=[i]),r[Da]=i.map((function(t){if(!t)return[{u:_n},{u:_n}];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0].toLowerCase()||"cover"===e[0].toLowerCase()?e[1]=e[0].toLowerCase():e[1]="auto");for(var r=[],i=0;i<2;i++){var a=e[i].toLowerCase();if(/^[-+]?[\d.]/.test(a)){var n=Rn(a);[yn,pn].indexOf(n.u)>-1&&(n.u=fn),r.push(n)}else"contain"===a||"cover"===a?r.push({v:a,u:gn}):r.push({u:_n})}return r}return[{u:_n},{u:_n}]}))),["Top","Right","Bottom","Left"].forEach((function(e){var i=t[e="border"+e+"Color"];void 0!==i&&(r[ua[ca(e)]]={v:wn(i||"transparent"),u:xn})})),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach((function(e){var i=t[e="border"+e+"Radius"];if(void 0!==i){var a=(i=i||0).toString().split(/\s+/);1===a.length&&(a[1]=a[0]);for(var n=0;n<2;n++){var o=a[n];if(/^[-+]?[\d.]/.test(o)){var s=Rn(o);[yn,pn].indexOf(s.u)>-1&&(s.u=fn),s.v<0&&(s.v=0),a[n]=s}else a[n]={u:0,v:fn}}r[ua[ca(e)]]=a}})),void 0!==(i=t.transform)){var n=r[ka]=[],o=(i||"").toString().match(/\w+\(.+?\)/g);o&&o.forEach((function(t){var e=t.indexOf("("),r=t.slice(0,e),i=t.slice(e+1,t.length-1);if("matrix"===r){var a=i.toString().split(/\s*,\s*/);a=a.map((function(t){return parseFloat(t)})),a.length>6&&(a=a.slice(0,6)),6===a.length&&n.push({k:en,v:[a[0],a[1],0,0,a[2],a[3],0,0,0,0,1,0,a[4],a[5],0,1]})}else if("matrix3d"===r){var o=i.toString().split(/\s*,\s*/);o=o.map((function(t){return parseFloat(t)})),o.length>16&&(o=o.slice(0,16)),16===o.length&&n.push({k:en,v:o})}else if("perspective"===r){var s=Rn(i);s.v<0&&(s.v=0),Un(wa,s),n.push({k:wa,v:s})}else if("rotate3d"===r){var l=i.toString().split(/\s*,\s*/);if(4===l.length){var h=Rn(l[3]);Un(Sa,h),l[0]=parseFloat(l[0].replace("(","")),l[1]=parseFloat(l[1]),l[2]=parseFloat(l[2]),l[3]=h,n.push({k:Sa,v:l})}}else if(Yn.hasOwnProperty(r)){var u=Yn[r],c=Rn(i);Un(u,c),n.push({k:u,v:c})}else if({translate:!0,scale:!0,skew:!0}.hasOwnProperty(r)){var _=i.toString().split(/\s*,\s*/);if(1===_.length&&(_[1]="scale"===r?_[0]:[0]),2===_.length){var f=ua[ca(r+"X")],v=ua[ca(r+"Y")],y=Rn(_[0]),d=Rn(_[1]);Un(f,y),Un(v,d),n.push({k:f,v:y}),n.push({k:v,v:d})}}else if({translate3d:!0,scale3d:!0}.hasOwnProperty(r)){var p=i.toString().split(/\s*,\s*/);if(1===p.length?(p[1]="scale3d"===r?[1]:[0],p[2]="scale3d"===r?[1]:[0]):2===p.length&&(p[2]="scale3d"===r?[1]:[0]),3===p.length){var x=ua[ca(r+"X")],g=ua[ca(r+"Y")],m=ua[ca(r+"Z")],b=Rn(p[0]),E=Rn(p[1]),M=Rn(p[2]);Un(x,b),Un(g,E),Un(m,M),n.push({k:x,v:b}),n.push({k:g,v:E}),n.push({k:m,v:M})}}}))}if(void 0!==(i=t.perspective)){var s=Rn(i||0);s.v<0&&(s.v=0),Un(wa,s),r[wa]=s}if(["perspectiveOrigin","transformOrigin"].forEach((function(e){if(void 0!==(i=t[e])){null===i&&(i="");var a=r[ua[ca(e)]]=[],n=i.toString().match(Pt.position);if(n){1===n.length&&(n[1]=n[0]);for(var o=0;o<2;o++){var s=n[o];if(/^[-+]?[\d.]/.test(s)){var l=Rn(s);[yn,pn].indexOf(l.u)>-1&&(l.u=fn),a.push(l)}else a.push({v:{top:0,left:0,center:50,right:100,bottom:100}[s],u:vn}),Sn(a[o].v)&&(a[o].v=50)}}else a.push({v:50,u:vn}),a.push({v:50,u:vn})}})),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach((function(e){var i=t[e];if(void 0!==i){null===i&&(i=0===e.indexOf("scale")?1:0);var a=Yn[e],n=Rn(i);Un(a,n),r[a]=n}})),void 0!==(i=t.rotate3d)){var l=(i||"").toString().split(/\s*,\s*/);if(4===l.length){var h=Rn(l[3]);Un(Sa,h),l[0]=parseFloat(l[0].replace("(","")),l[1]=parseFloat(l[1]),l[2]=parseFloat(l[2]),l[3]=h}r[Sa]=l}if(void 0!==(i=t.opacity)&&(null===i&&(i=1),i=parseFloat(i),isNaN(i)?r[Pa]=1:(i=Math.max(i,0),i=Math.min(i,1),r[Pa]=i)),void 0!==(i=t.zIndex)&&(r[Na]=parseInt(i)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach((function(e){var i=t[e];if(void 0!==i){"auto"===i?i={v:0,u:_n}:(i=Rn(i||0),[yn,pn].indexOf(i.u)>-1&&(i.u=fn));var a=ua[ca(e)];r[a]=i,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(e)&&i.v<0&&(i.v=0)}})),void 0!==(i=t.flexBasis))if(/content/i.test(i))r[tn]={v:i.toLowerCase(),u:gn};else if(/^[\d.]/.test(i)){var u=r[tn]=Rn(i);u.v=Math.max(u.v,0),[yn,pn].indexOf(u.u)>-1&&(u.u=fn)}else r[tn]={v:0,u:_n};if(void 0!==(i=t.order)&&(r[on]=parseInt(i)||0),void 0!==(i=t.color)&&(/inherit/i.test(i)?r[Ha]={u:dn}:Wn(i)?r[Ha]={v:pr.parseGradient(i),u:Tn}:r[Ha]={v:wn(i),u:xn}),void 0!==(i=t.textStrokeColor)&&(/inherit/i.test(i)?r[ln]={u:dn}:Wn(i)?r[ln]={v:pr.parseGradient(i),u:Tn}:r[ln]={v:wn(i),u:xn}),void 0!==(i=t.fontSize))if(/inherit/i.test(i))r[Ga]={u:dn};else{var c=Rn(i);c<0?r[Ga]={u:dn}:([yn,pn].indexOf(c.u)>-1&&(c.u=fn),r[Ga]=c)}if(void 0!==(i=t.textStrokeWidth))if(/inherit/i.test(i))r[hn]={u:dn};else{var _=Rn(i);_<0?r[hn]={u:dn}:([yn,pn,vn].indexOf(_.u)>-1&&(_.u=fn),r[hn]=_)}if(void 0!==(i=t.textStrokeOver))if(null===i||/inherit/i.test(i))r[un]={u:dn};else{var f=Dt.INHERIT.textStrokeOver;/fill/i.test(i)&&(f="fill"),r[un]={v:f,u:gn}}if(void 0!==(i=t.fontWeight)&&(/bold/i.test(i)?r[Ya]={v:700,u:yn}:/normal/i.test(i)?r[Ya]={v:400,u:yn}:/lighter/i.test(i)?r[Ya]={v:200,u:yn}:/inherit/i.test(i)?r[Ya]={u:dn}:r[Ya]={v:Math.max(0,parseInt(i))||400,u:yn}),void 0!==(i=t.fontStyle))if(null===i||/inherit/i.test(i))r[Ua]={u:dn};else{var v=Dt.INHERIT.fontStyle;/italic/i.test(i)?v="italic":/oblique/i.test(i)&&(v="oblique"),r[Ua]={v:v,u:gn}}if(void 0!==(i=t.fontFamily)&&(null===i||/inherit/i.test(i)?r[Wa]={u:dn}:r[Wa]={v:i.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),u:gn}),void 0!==(i=t.writingMode))if(null===i||/inherit/i.test(i))r[cn]={u:dn};else{var y=Dt.INHERIT.writingMode;/vertical-?rl/i.test(i)?y="verticalRl":/vertical-?lr/i.test(i)&&(y="verticalLr"),r[cn]={v:y,u:gn}}if(void 0!==(i=t.textAlign))if(null===i||/inherit/i.test(i))r[Xa]={u:dn};else{var d="left";/center/i.test(i)?d="center":/right/i.test(i)&&(d="right"),r[Xa]={v:d,u:gn}}if(void 0!==(i=t.lineHeight))if(/inherit/i.test(i))r[za]={u:dn};else if(/normal/i.test(i))r[za]={u:_n};else if(/^[\d.]+/i.test(i)){var p=Rn(i);[pn].indexOf(p.u)>-1&&(p.u=yn),r[za]=p}else{var x=Math.max(0,parseFloat(i))||"normal";r[za]="normal"===x?{u:_n}:{v:x,u:yn}}if(void 0!==(i=t.letterSpacing))if(null===i||/inherit/i.test(i))r[rn]={u:dn};else if(/normal/i.test(i))r[rn]={v:0,u:fn};else if(/^[-+]?[\d.]/.test(i)){var g=Rn(i);[yn,pn].indexOf(g.u)>-1&&(g.u=fn),r[rn]=g}else r[rn]={v:parseFloat(i)||0,u:fn};if(void 0!==(i=t.whiteSpace)&&(null===i||/inherit/i.test(i)?r[an]={u:dn}:r[an]={v:i,u:gn}),void 0!==(i=t.lineClamp)&&(i=parseInt(i)||0,r[nn]=Math.max(0,i)),["fill","stroke"].forEach((function(e,a){void 0!==(i=t[e])&&(e=a?$a:qa,Array.isArray(i)||(i=[i]),r[e]=i.map((function(t){return t?Wn(t)?{v:pr.parseGradient(t),u:Tn}:{v:wn(t),u:xn}:{v:"none",u:gn}})))})),void 0!==(i=t.strokeWidth)&&(Array.isArray(i)||(i=[i]),r[Ja]=i.map((function(t){var e=Rn(t);return[yn,pn].indexOf(e.u)>-1&&(e.u=fn),e.v=Math.max(e.v,0),e}))),void 0!==(i=t.strokeDasharray))if(Array.isArray(i))r[Qa]=i.map((function(t){var e=(t||"").toString().match(/[\d.]+/g);return e?(e=e.map((function(t){return parseFloat(t)})),e.length%2==1&&e.push(e[e.length-1]),e):[]}));else{var m=(i||"").toString().match(/[\d.]+/g);m?((m=m.map((function(t){return parseFloat(t)}))).length%2==1&&m.push(m[m.length-1]),r[Qa]=[m]):r[Qa]=[[]]}if(void 0!==(i=t.filter)){var b,E=[];(b=Array.isArray(i)?i.map((function(t){return(On(t)||"").match(/[\w-]+\s*\(.+?\)/gi)})):(On(i)||"").match(/[\w-]+\s*\(.+?\)/gi))&&b.forEach((function(t){var e=/([\w-]+)\s*\((\s*.+\s*)\)/i.exec(t);if(e){var r=e[1].toLowerCase(),i=e[2];if("drop-shadow"===r||"dropshadow"===r){var a=/([-+]?[\d.]+[pxremvwhina%]*)[\s,]+([-+]?[\d.]+[pxremvwhina%]*)[\s,]+(?:([-+]?[\d.]+[pxremvwhina%]*)[\s,])?([-+]?[\d.]+[pxremvwhina%]*\s*)?/gi.exec(t);if(a){for(var n=[],o=1;o<=4;o++){var s=a[o];if(s){var l=Rn(s);[yn,pn].indexOf(l.u)>-1&&(l.u=fn),o>2&&l.v<0&&(l.v=0),n.push(l)}else n.push({v:0,u:fn})}var h=/#[a-f\d]{3,8}/i.exec(t);h?n.push(wn(h[0])):n.push([0,0,0,1]),E.push({k:"dropShadow",v:n})}}else{var u=/([-+]?[\d.]+\s*[pxremvwhdg%]*)/i.exec(i);if(u){var c=Rn(u[0]);if("blur"===r){if([pn,vn].indexOf(c.u)>-1)return;c.u===yn&&(c.u=fn),c.v=Math.max(c.v,0),E.push({k:r,v:c})}else if("hue-rotate"===r||"huerotate"===r){if(-1===[yn,pn].indexOf(c.u))return;c.u=pn,E.push({k:"hueRotate",v:c})}else if("saturate"===r||"brightness"===r||"grayscale"===r||"contrast"===r||"sepia"===r||"invert"===r){if(-1===[yn,vn].indexOf(c.u))return;c.v=Math.max(c.v,0),c.u=vn,E.push({k:r,v:c})}}}}})),r[Va]=E}if(void 0!==(i=t.visibility))if(null===i||/inherit/i.test(i))r[Ka]={u:dn};else{var M=Dt.INHERIT.visibility;/hidden/i.test(i)&&(M="hidden"),r[Ka]={v:M,u:gn}}if(void 0!==(i=t.pointerEvents))if(null===i||/inherit/i.test(i))r[Za]={u:dn};else{var A=Dt.INHERIT.pointerEvents;/none/i.test(i)&&(A="none"),r[Za]={v:A,u:gn}}if(void 0!==(i=t.boxShadow)){var T=[],R=(On(i)||"").split(",");R&&R.forEach((function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?/i.exec(t);if(e){for(var r=[],i=1;i<=4;i++){var a=e[i];if(a){var n=Rn(a);[yn,pn].indexOf(n.u)>-1&&(n.u=fn),i>2&&n.v<0&&(n.v=0),r.push(n)}else r.push({v:0,u:fn})}var o=/#[a-f\d]{3,8}/i.exec(t);o?r.push(wn(o[0])):r.push([0,0,0,1]),r.push(/inset/i.test(t)?"inset":"outset"),T.push(r)}})),r[ja]=T}return["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach((function(e){t.hasOwnProperty(e)&&(r[ua[ca(e)]]=Xn(e,t[e]))})),["flexGrow","flexShrink"].forEach((function(e){t.hasOwnProperty(e)&&(r[ua[ca(e)]]=Math.max(parseFloat(t[e])||0,0))})),void 0!==(i=t.zIndex)&&(r[Na]=parseFloat(i)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach((function(e){if(t.hasOwnProperty(e)){var i=t[e];Array.isArray(i)||(i=[i]),"backgroundRepeat"===e&&i.forEach((function(t,e){t&&(i[e]=zn(t))})),r[ua[ca(e)]]=i}})),Ln.forEach((function(e){t.hasOwnProperty(e)&&(r[e]=t[e])})),r},setFontStyle:function(t){var e=t[Ga]||0,r=t[Wa]||$.defaultFontFamily||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t[Ua]||"normal")+" "+(t[Ya]||"400")+" "+e+"px/"+e+"px "+r},getBaseline:Vn,getVerticalBaseline:function(t){return t[za]-Vn(t)},calRelative:function(t,e,r,i,a){return r.u===_n?r=0:[fn,yn].indexOf(r.u)>-1?r=r.v:r.u===vn?r=Zn(r.v,i,a?va:ya):r.u===mn?r=r.v*i.root.computedStyle[Ga]:r.u===bn?r=r.v*i.root.width*.01:r.u===En?r=r.v*i.root.height*.01:r.u===Mn?r=r.v*Math.max(i.root.width,i.root.height)*.01:r.u===An&&(r=r.v*Math.min(i.root.width,i.root.height)*.01),r},equalStyle:function(t,e,r,i){if(!e||!r)return e===r;if(t===ka){if(e.length!==r.length)return!1;for(var a=0,n=e.length;a<n;a++){var o=e[a],s=r[a];if(o.k!==s.k)return!1;var l=o.v,h=s.v;if(o.k===en){if(!Cn(l,h))return!1}else if(l.u!==h.u||l.v!==h.v)return!1}return!0}if(t===Sa)return e[0]===r[0]&&e[1]===r[1]&&e[2]===r[2]&&e[3].v===r[3].v&&e[3].u===r[3].u;if(t===Va){if(e.length!==r.length)return!1;for(var u=0,c=e.length;u<c;u++){var _=e[u],f=r[u];if(_.k!==f.k)return!1;var v=_.v,y=f.v;if("dropShadow"===_.k||"drop-shadow"===_.k){if(v.length!==y.length)return!1;for(var d=0;d<4;d++){var p=v[d],x=y[d];if(p.u!==x.u||p.v!==x.v)return!1}}else if(v.u!==y.u||v.v!==y.v)return!1}return!0}if(t===Oa||t===Ca||Gn(t))return e[0].v===r[0].v&&e[0].u===r[0].u&&e[1].v===r[1].v&&e[1].u===r[1].u;if(t===La||t===Ba||t===Ja){if(e.length!==r.length)return!1;for(var g=0,m=e.length;g<m;g++){var b=e[g],E=r[g];if(b.v!==E.v||b.u!==E.u||b.v!==E.v||b.u!==E.u)return!1}return!0}if(t===ja){if(e.length!==r.length)return!1;for(var M=0,A=e.length;M<A;M++){var T=e[M],R=r[M];if(!(T&&R||T===R))return!1;for(var S=0;S<4;S++)if(T[S].v!==R[S].v||T[S].u!==R[S].u)return!1;for(var w=0;w<4;w++)if(T[4][w]!==R[4][w])return!1;if(T[5]!==R[5])return!1}return!0}if(t===Da||t===La||t===Ba){if(e.length!==r.length)return!1;for(var C=0,k=e.length;C<k;C++){var O=e[C],I=r[C];if(O[0].v!==I[0].v||O[0].u!==I[0].u||O[1].v!==I[1].v||O[1].u!==I[1].u)return!1}return!0}if(Nn(t)||Pn(t))return e.v===r.v&&e.u===r.u;if(Hn(t)){if(e.length!==r.length)return!1;for(var F=0,L=e.length;F<L;F++){var B=e[F],D=r[F];if(B.u!==D.u)return!1;var P=B.v,N=D.v;if(B.u===Tn){if(P.k!==N.k||P.d!==N.d||P.s!==N.s||P.z!==N.z)return!1;if("linear"===P.k){var H=P.d,G=N.d,W=Array.isArray(H);if(W!==Array.isArray(G))return!1;if(W){if(H[0]!==G[0]||H[1]!==G[1]||H[2]!==G[2]||H[3]!==G[3])return!1}else if(H!==G)return!1}else if("conic"===P.k&&P.d!==N.d)return!1;if("radial"===P.k||"conic"===P.k){var Y=P.p,U=N.p;if(Y[0].u!==U[0].u||Y[0].v!==U[0].v||Y[1].u!==U[1].u||Y[1].v!==U[1].v)return!1}for(var z=0;z<2;z++){var X=P.v[z],V=N.v[z],K=X[0],j=V[0];if(K[0]!==j[0]||K[1]!==j[1]||K[2]!==j[2]||K[3]!==j[3])return!1;if(X[1]&&V[1]){if(X[1].u!==V[1].u||X[1].v!==V[1].v)return!1}else if(X[1]||V[1])return!1}}else if(B.u===xn){if(!Cn(P,N))return!1}else if(P!==N)return!1}return!0}if(Dn(t)){if(e.u!==r.u)return!1;if(e.u===Tn)return kn(e.v,r.v);if(e.u===dn)return!0;if(e.u===xn)return Cn(e.v,r.v)}return In(i.tagName,t)&&(i.isMulti||Array.isArray(e)&&Array.isArray(r))?kn(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[fa];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){e||(e=Object.keys(t).map((function(t){return Fn.hasOwnProperty(t)||(t=parseInt(t)),t})));for(var r={},i=0,a=e.length;i<a;i++){var n=e[i],o=t[n];if(n===ka){if(o){for(var s=o.length,l=new Array(s),h=0;h<s;h++){var u=o[h];u.k===en?l[h]={k:u.k,v:u.v.slice(0)}:l[h]={k:u.k,v:{v:u.v.v,u:u.v.u}}}r[n]=l}}else if(n===Sa)r[n]=[o[0],o[1],o[2],{v:o[3].v,u:o[3].u}];else if(n===Va){if(o){for(var c=o.length,_=new Array(c),f=0;f<c;f++){var v=o[f],y=v.k,d=v.v;if("dropShadow"===y){var p=new Array(5);_[f]={k:y,v:p};for(var x=0;x<4;x++){var g=d[x];p[x]={v:g.v,u:g.u}}p[4]=d[4].slice(0)}else _[f]={k:y,v:{v:d.v,u:d.u}}}r[n]=_}}else if(n===Oa||n===Ca||Gn(n)){if(o){for(var m=new Array(2),b=0;b<2;b++){var E=o[b];m[b]={v:E.v,u:E.u}}r[n]=m}}else n===La||n===Ba||n===Ja?r[n]=o.map((function(t){return{v:t.v,u:t.u}})):n===ja?o&&(o=o.map((function(t){for(var e=new Array(6),r=0;r<4;r++){var i=t[r];e[r]={v:i.v,u:i.u}}return e[4]=t[4].slice(0),e[5]=t[5],e})),r[n]=o):n===Da?o&&(r[n]=o.map((function(t){return[{v:t[0].v,u:t[0].u},{v:t[1].v,u:t[1].u}]}))):n===Pa||n===Na?r[n]=o:n===sn?o&&(r[n]=o.map((function(t){return{v:t.v,u:t.u}}))):Nn(n)||Pn(n)?r[n]={v:o.v,u:o.u}:Hn(n)?r[n]=o.map((function(t){return t?t.u===Tn?{v:H.clone(t.v),u:Tn}:t.u===xn?{v:t.v.slice(0),u:xn}:{v:t.v,u:t.u}:null})):Dn(n)?o.u===Tn?r[n]={v:H.clone(o.v),u:Tn}:o.u===xn?r[n]={v:o.v.slice(0),u:xn}:r[n]={u:dn}:Fn.hasOwnProperty(n)?r[n]=H.clone(o):r[n]=o}return r},calNormalLineHeight:Kn,calFontFamily:jn,spreadBoxShadow:function(t,e){var r=u(t,4),i=r[0],a=r[1],n=r[2],o=r[3];if(Array.isArray(e)){var s=0,l=0,h=0,c=0;e.forEach((function(t){var e=u(t,6),r=e[0],i=e[1],a=e[2],n=e[3],o=e[4];if("inset"!==e[5]&&o[3]>0){var _=ha.outerSize(a);_+=n,s=Math.min(s,r-_),l=Math.min(l,r-_),h=Math.max(h,r+_),c=Math.max(c,i+_)}})),i+=s,a+=l,n+=h,o+=c}return[i,a,n,o]},spreadFilter:function(t,e){var r=u(t,4),i=r[0],a=r[1],n=r[2],o=r[3];return Array.isArray(e)&&e.forEach((function(t){var e=t.k,r=t.v;if("blur"===e&&r>0){var s=ha.kernelSize(r),l=ha.outerSizeByD(s);l&&(i-=l,a-=l,n+=l,o+=l)}else if("dropShadow"===e){var h=ha.kernelSize(r[2]),u=ha.outerSizeByD(h);(r[0]||r[1]||u)&&((r[0]<=0||r[0]>0&&r[0]<u)&&(i+=r[0]-u),(r[1]<=0||r[1]>0&&r[1]<u)&&(a+=r[1]-u),(r[0]<0&&-r[0]<u||r[0]>=0)&&(n+=r[0]+u),(r[1]<0&&-r[1]<u||r[1]>=0)&&(o+=r[1]+u))}})),[i,a,n,o]}},$n=Vt.STYLE_KEY,Jn=$n.TRANSLATE_X,Qn=$n.TRANSLATE_Y,to=$n.TRANSLATE_Z,eo=$n.SCALE_X,ro=$n.SCALE_Y,io=$n.SCALE_Z,ao=$n.SKEW_X,no=$n.SKEW_Y,oo=$n.ROTATE_X,so=$n.ROTATE_Y,lo=$n.ROTATE_Z,ho=$n.ROTATE_3D,uo=$n.PERSPECTIVE,co=$n.MATRIX,_o=$n.FONT_SIZE,fo=d.PX,vo=d.PERCENT,yo=d.REM,po=d.VW,xo=d.VH,go=d.VMAX,mo=d.VMIN,bo=g.identity,Eo=g.multiply,Mo=g.multiplyTfo,Ao=g.tfoMultiply,To=g.isE,Ro=g.multiplyTranslateX,So=g.multiplyTranslateY,wo=g.multiplyTranslateZ,Co=g.multiplyRotateX,ko=g.multiplyRotateY,Oo=g.multiplyRotateZ,Io=g.multiplySkewX,Fo=g.multiplySkewY,Lo=g.multiplyPerspective,Bo=g.multiplyScaleX,Do=g.multiplyScaleY,Po=g.multiplyScaleZ,No=se.d2r;function Ho(t,e){var r=u(e,4),i=r[0],a=r[1],n=r[2],o=r[3];o=No(o);var s=Math.sin(o),l=Math.cos(o);if(!i||a||n)if(!a||i||n)if(!n||i||a){var h=Math.sqrt(i*i+a*a+n*n);if(1!==h){var c=1/h;i*=c,a*=c,n*=c}var _=1-l,f=i*a,v=a*n,y=n*i,d=i*s,p=a*s,x=n*s;t[0]=i*i*_+l,t[1]=f*_+x,t[2]=y*_-p,t[3]=0,t[4]=f*_-x,t[5]=a*a*_+l,t[6]=v*_+d,t[7]=0,t[8]=y*_+p,t[9]=v*_-d,t[10]=n*n*_+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}else n<0&&(s=-s),t[0]=l,t[4]=-s,t[1]=s,t[5]=l;else a<0&&(s=-s),t[0]=l,t[8]=s,t[2]=-s,t[10]=l;else i<0&&(s=-s),t[5]=l,t[9]=-s,t[6]=s,t[10]=l;return t}function Go(t,e,r,i){for(var a=bo(),n=0,o=t.length;n<o;n++){var s=t[n],l=s.k,h=Yo(l,s.v,e,r,i);if(l===Jn)a=Ro(a,h);else if(l===Qn)a=So(a,h);else if(l===to)a=wo(a,h);else if(l===oo)a=Co(a,No(h));else if(l===so)a=ko(a,No(h));else if(l===lo)a=Oo(a,No(h));else if(l===ao)a=Io(a,No(h));else if(l===no)a=Fo(a,No(h));else if(l===eo)a=Bo(a,h);else if(l===ro)a=Do(a,h);else if(l===io)a=Po(a,h);else if(l!==uo||n)if(l===ho){var u=bo();Ho(u,[h[0],h[1],h[2],h[3].v]),a=Eo(a,u)}else l===co&&(a=Eo(a,h));else a=Lo(a,h)}return a}function Wo(t,e,r){var i=t.slice(0);return 0===e&&0===r||To(t)?i:(i=Ao(e,r,i),i=Mo(i,-e,-r))}function Yo(t,e,r,i,a){if(t===Jn||t===Qn||t===to){if(e.u===fo)return e.v;if(e.u===vo)return e.v*(t===Qn?i:r)*.01;if(e.u===yo)return e.v*a.__computedStyle[_o];if(e.u===po)return e.v*a.width*.01;if(e.u===xo)return e.v*a.height*.01;if(e.u===go)return e.v*Math.max(a.width,a.height)*.01;if(e.u===mo)return e.v*Math.min(a.width,a.height)*.01}else{if(t===co)return e;if(t===ho)return e}return e.v}var Uo={calSingleValue:Yo,calMatrix:Go,calRotateX:function(t,e){e=No(e);var r=Math.sin(e),i=Math.cos(e);return t[5]=t[10]=i,t[6]=r,t[9]=-r,t},calRotateY:function(t,e){e=No(e);var r=Math.sin(e),i=Math.cos(e);return t[0]=t[10]=i,t[8]=r,t[2]=-r,t},calRotateZ:function(t,e){e=No(e);var r=Math.sin(e),i=Math.cos(e);return t[0]=t[5]=i,t[1]=r,t[4]=-r,t},calRotate3d:Ho,calPerspectiveMatrix:function(t,e,r){if(t&&t>0){var i=bo();return t=Math.max(t,1),i[11]=-1/t,(e||r)&&(i=Ao(e,r,i),i=Mo(i,-e,-r)),i}},calMatrixByOrigin:Wo,calMatrixWithOrigin:function(t,e,r,i,a){return Wo(Go(t,i,a),e,r)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}},zo=Vt.STYLE_KEY,Xo=zo.COLOR,Vo=zo.FONT_WEIGHT,Ko=zo.FONT_FAMILY,jo=zo.FONT_SIZE,Zo=zo.FONT_STYLE,qo=zo.LETTER_SPACING,$o=zo.TEXT_STROKE_COLOR,Jo=zo.TEXT_STROKE_WIDTH,Qo=zo.TEXT_STROKE_OVER,ts=zo.ROTATE_Z,es=zo.LINE_HEIGHT,rs=d.DEG,is=y.CANVAS,as=y.SVG,ns=y.WEBGL,os=/(?:[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u02EA\u02EB\u1100-\u11FF\u1401-\u167F\u18B0-\u18FF\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2065\u20DD-\u20E0\u20E2-\u20E4\u2100\u2101\u2103-\u2109\u210F\u2113\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u212E\u2135-\u213F\u2145-\u214A\u214C\u214D\u214F-\u2189\u218C-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2B97\u2BB8-\u2BD1\u2BD3-\u2BEB\u2BF0-\u2BFF\u2E50\u2E51\u2E80-\u3007\u3012\u3013\u3020-\u302F\u3031-\u309F\u30A1-\u30FB\u30FD-\uA4CF\uA960-\uA97F\uAC00-\uD7FF\uE000-\uFAFF\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF01-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7\uFFF0-\uFFF8\uFFFC\uFFFD]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|[\uD80C\uD81C-\uD822\uD83C\uD83D\uD840-\uD87E\uD880-\uD8BE][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC3F]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFFF]|\uD823[\uDC00-\uDD7F]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFF]|\uD833[\uDF00-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83E[\uDD00-\uDEFF]|[\uD87F\uD8BF][\uDC00-\uDFFD])/,ss=function(){function t(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.__parent=t,this.__index=e,this.__x=r,this.__y=i,s?(this.__width=n,this.__height=a):(this.__width=a,this.__height=n),this.__content=o,this.__virtualDom={},this.__parentLineBox=null,this.__isVertical=s}return r(t,[{key:"render",value:function(t,e,r,i,a,n){var o=this.content,s=this.x,l=this.y,h=this.parent,u=this.width,c=this.height,_=this.isUpright,f=h.__domParent,v=qn.getBaseline(r),y=qn.getVerticalBaseline(r);_?s+=y:l+=v,s+=a,l+=n,_?(this.__endX=s,this.__endY=l+c):(this.__endX=s+u,this.__endY=l);var d=r[qo],p=r[Jo],x=r[$o],m=r[jo],b=r[es],E=0,M=o.length;if(t===is||t===ns){var A,T=f.matrixEvent,R=0,S=0;_&&(A=[{k:ts,v:{v:90,u:rs}}],R=.6*y,S=.2*y);var w="fill"===r[Qo];if(d)for(;E<M;E++){var C=o.charAt(E);if(_){if(os.test(C))e.setTransform(T[0],T[1],T[4],T[5],T[12],T[13]),w&&e.fillText(C,s-R,l-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(C,s-R,l-S),w||e.fillText(C,s-R,l-S);else{var k=Uo.calMatrixWithOrigin(A,s,l,0,0);k=g.multiply(T,k),e.setTransform(k[0],k[1],k[4],k[5],k[12],k[13]),w&&e.fillText(C,s,l),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(C,s,l),w||e.fillText(C,s,l)}l+=e.measureText(C).width+d}else w&&e.fillText(C,s,l),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(C,s,l),w||e.fillText(C,s,l),s+=e.measureText(C).width+d}else if(_){for(var O=os.test(o.charAt(0)),I=0,F=0,L=o.length,B=1;B<L;B++){var D=os.test(o.charAt(B));if(D!==O){if(O){e.setTransform(T[0],T[1],T[4],T[5],T[12],T[13]);var P=o.slice(I,B);w&&e.fillText(P,s-R,l+F+v-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(P,s-R,l+F+v-S),w||e.fillText(P,s-R,l+F+v-S),F+=m}else{var N=Uo.calMatrixWithOrigin(A,s,l+F,0,0);N=g.multiply(T,N),e.setTransform(N[0],N[1],N[4],N[5],N[12],N[13]);var G=o.slice(I,B);w&&e.fillText(G,s,l+F),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(G,s,l+F),w||e.fillText(G,s,l+F),F+=e.measureText(G).width}I=B,O=!O}else if(D){e.setTransform(T[0],T[1],T[4],T[5],T[12],T[13]);var W=o.slice(I,B);w&&e.fillText(W,s-R,l+F+v-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(W,s-R,l+F+v-S),w||e.fillText(W,s-R,l+F+v-S),F+=m,I=B}}if(I<L){var Y=o.slice(I,L);if(O)e.setTransform(T[0],T[1],T[4],T[5],T[12],T[13]),w&&e.fillText(Y,s-R,l+F+v-S),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(Y,s-R,l+F+v-S),w||e.fillText(Y,s-R,l+F+v-S);else{var U=Uo.calMatrixWithOrigin(A,s,l+F,0,0);U=g.multiply(T,U),e.setTransform(U[0],U[1],U[4],U[5],U[12],U[13]),w&&e.fillText(Y,s,l+F),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(Y,s,l+F),w||e.fillText(Y,s,l+F)}}}else w&&e.fillText(o,s,l),p&&(x[3]>0||3===x.length||x.k)&&e.strokeText(o,s,l),w||e.fillText(o,s,l)}else if(t===as){var z=i[Xo];z.k&&(z=f.__gradient(t,e,f.__bx1,f.__by1,f.__bx2,f.__by2,z,a,n).v),_&&(s+=.5*b-y);var X=[["x",s],["y",l],["fill",z],["font-family",r[Ko]],["font-weight",r[Vo]],["font-style",r[Zo]],["font-size",r[jo]+"px"]];if(p&&(x[3]>0||3===x.length||x.k)){var V=i[$o];V.k&&(V=f.__gradient(t,e,f.__bx1,f.__by1,f.__bx2,f.__by2,V,a,n).v),X.push(["stroke",V]),X.push(["stroke-width",r[Jo]])}d&&X.push(["letter-spacing",d]),_&&X.push(["writing-mode","vertical-lr"]),this.__virtualDom={type:"item",tagName:"text",props:X,content:H.encodeHtml(o)}}}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"offsetWidth",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"offsetHeight",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseline",get:function(){return this.parent.baseline}},{key:"verticalBaseline",get:function(){return this.parent.verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}}]),t}(),ls=Vt.STYLE_KEY,hs=ls.FONT_SIZE,us=ls.FONT_FAMILY,cs=ls.FONT_WEIGHT,_s=ls.FONT_STYLE,fs=ls.COLOR,vs=ls.LINE_HEIGHT,ys=ls.ROTATE_Z,ds=d.DEG,ps=y.CANVAS,xs=y.SVG,gs=y.WEBGL,ms="…",bs=function(t){function e(e,r,i,a,n){var o;return(o=t.call(this)||this).__x=o.__x1=e,o.__y=o.__y1=r,o.__width=i,o.__parent=o.__domParent=a,a.__ellipsis=s(o),o.__parentLineBox=null,o.__baseline=qn.getBaseline(a.computedStyle),o.__isVertical=n,o}return a(e,t),r(e,[{key:"render",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.x,n=this.y,o=this.parent,s=this.isUpright,l=o.computedStyle,h=o.cacheStyle[fs],u=qn.getBaseline(l),c=qn.getVerticalBaseline(l);if(s?a+=c:n+=u,a+=r,n+=i,t===ps||t===gs){var _=qn.setFontStyle(l);if(e.font!==_&&(e.font=_),e.fillStyle!==h&&(e.fillStyle=h),s){var f=o.matrixEvent,v=[{k:ys,v:{v:90,u:ds}}],y=Uo.calMatrixWithOrigin(v,a,n,0,0);y=g.multiply(f,y),e.setTransform(y[0],y[1],y[4],y[5],y[12],y[13])}e.fillText(ms,a,n)}else if(t===xs){s&&(a+=.5*l[vs]-c);var d=[["x",a],["y",n],["fill",h],["font-family",l[us]],["font-weight",l[cs]],["font-style",l[_s]],["font-size",l[hs]+"px"]];s&&d.push(["writing-mode","vertical-lr"]);var p=this.__virtualDom={type:"text",children:[{type:"item",tagName:"text",props:d,content:ms}]};o.virtualDom.children.push(p)}}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"isEllipsis",get:function(){return!0}}]),e}(v),Es=Vt.STYLE_KEY,Ms=Es.TRANSLATE_X,As=Es.TRANSLATE_Y,Ts=Es.TRANSLATE_Z,Rs=Es.OPACITY,Ss=Es.FILTER,ws=Es.PERSPECTIVE,Cs=Es.PERSPECTIVE_ORIGIN,ks=Es.Z_INDEX,Os=Es.SCALE_X,Is=Es.SCALE_Y,Fs=Es.SCALE_Z,Ls=Es.ROTATE_X,Bs=Es.ROTATE_Y,Ds=Es.ROTATE_Z,Ps=Es.ROTATE_3D,Ns=Es.SKEW_X,Hs=Es.SKEW_Y,Gs=Es.TRANSFORM,Ws=Es.TRANSFORM_ORIGIN,Ys=oa.isIgnore,Us=oa.isRepaint,zs=32768,Xs={NONE:0,CACHE:1,TRANSLATE_X:2,TRANSLATE_Y:4,TRANSLATE_Z:8,TRANSLATE:14,ROTATE_Z:16,SCALE_X:32,SCALE_Y:64,SCALE_Z:128,SCALE:224,TRANSFORM:256,TRANSFORM_ALL:510,OPACITY:512,FILTER:1024,MIX_BLEND_MODE:2048,PERSPECTIVE:4096,MASK:8192,REPAINT:16384,REFLOW:zs,REBUILD:65536};var Vs=Object.assign({contain:function(t,e){return(t&e)>0},exclude:function(t,e){return(t|e)===e},getLevel:function(t){return Ys(t)?0:t===ks?1:t===Ms?2:t===As?4:t===Ts?8:t===Ds?16:t===Os?32:t===Is?64:t===Fs?128:t===Rs?512:t===Ss?1024:t===ws||t===Cs?4096:function(t){return t===Ls||t===Bs||t===Ps||t===Ns||t===Hs||t===Gs||t===Ws}(t)?256:Us(t)?16384:zs},isReflow:function(t){return t>=zs},isRepaint:function(t){return t<zs}},Xs),Ks=Vt.STYLE_KEY,js=Ks.DISPLAY,Zs=Ks.POSITION,qs=Ks.LINE_HEIGHT,$s=Ks.FONT_SIZE,Js=Ks.FONT_FAMILY,Qs=Ks.FONT_WEIGHT,tl=Ks.COLOR,el=Ks.VISIBILITY,rl=Ks.LETTER_SPACING,il=Ks.OVERFLOW,al=Ks.WHITE_SPACE,nl=Ks.TEXT_OVERFLOW,ol=Ks.WIDTH,sl=Ks.HEIGHT,ll=Ks.TEXT_STROKE_COLOR,hl=Ks.TEXT_STROKE_WIDTH,ul=Ks.MARGIN_TOP,cl=Ks.MARGIN_BOTTOM,_l=Ks.MARGIN_LEFT,fl=Ks.MARGIN_RIGHT,vl=Ks.PADDING_TOP,yl=Ks.PADDING_BOTTOM,dl=Ks.PADDING_LEFT,pl=Ks.PADDING_RIGHT,xl=Ks.BORDER_TOP_WIDTH,gl=Ks.BORDER_BOTTOM_WIDTH,ml=Ks.BORDER_LEFT_WIDTH,bl=Ks.BORDER_RIGHT_WIDTH,El=Ks.FILTER,Ml=Vt.ELLIPSIS,Al=d.AUTO,Tl=y.CANVAS,Rl=y.SVG,Sl=y.WEBGL,wl=H.isFunction;function Cl(t,e,r,i,a,n,o,s,l,h,u,c){if(r>=i)return[0,0,!1];var _=r,f=i,v=0,y=!1;if(u&&[Tl,Sl].indexOf(e)>-1){for(var d=0;_<f;_++){var p=t.measureText(a.charAt(_)).width+u;if(d+p>n+1e-10){y=!0;break}d+=p}return[_-r,d,y||d>n+1e-10]}var x=Math.round(n/o);for(x<=0?x=1:x>i-r&&(x=i-r);_<f;){var g=void 0,m=a.slice(r,r+x);if(e===Tl||e===Sl?g=t.measureText(m).width:e===Rl&&(g=$.measureTextSync(m,s,l,h,c)),u&&(g+=x*u),g===n){v=n,y=!0;break}if(g>n+1e-10){if(y=!0,1===x){v=g;break}if(_===f-1||_-r==x-1){x=_-r;break}f=x+r-1;var b=Math.round((g-n)/o);b<=0&&(b=1),(x-=b)<_-r&&(x=_-r)}else{if(v=g,x===i-r)break;_=x+r;var E=Math.round((n-g)/o);E<=0&&(E=1),(x+=E)>f-r&&(x=f-r)}}return[x,v,y]}function kl(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}var Ol=function(t){function e(e){var r;return(r=t.call(this)||this).__content=H.isNil(e)?"":e.toString(),r.__textBoxes=[],r.__charWidth=0,r.__textWidth=0,r.__bp=null,r.__widthHash={},r.__limitCache=!1,r.__hasContent=!1,r}return a(e,t),r(e,[{key:"__layoutFlow",value:function(t){var e=this.__cache;e&&e.release();var r=t.x,i=t.y,a=t.w,n=t.h,o=t.lx,s=void 0===o?r:o,l=t.ly,h=void 0===l?i:l,c=t.lineBoxManager,_=t.endSpace,f=void 0===_?0:_,v=t.lineClamp,y=void 0===v?0:v,d=t.lineClampCount,p=void 0===d?0:d,x=t.isUpright,g=void 0!==x&&x;this.__x=this.__x1=r,this.__y=this.__y1=i;var m=this.__isDestroyed,b=this.content,E=this.computedStyle,M=this.textBoxes,A=this.root;if(M.splice(0),m||"none"===E[js]||!b||y&&p>=y)return p;for(var T=0,R=b.length,S=0,w=E[qs],C=E[rl],k=E[al],O=E[$s],I=E[Qs],F=E[Js],L=g?n:a,B=g?i-h:r-s,D=this.domParent;"inline"===D.computedStyle[js];)D=D.domParent;this.__bp=D;var P,N=D.computedStyle[nl],H=A.renderMode;H!==Tl&&H!==Sl||((P=H===Sl?$.getFontCanvas().ctx:A.ctx).font=qn.setFontStyle(E));var G,W=.8*O+C,Y=0;if("nowrap"===k){var U,z=this.textWidth,X=D.computedStyle,V=X[Zs],K=X[il],j=D.currentStyle[g?sl:ol];if("hidden"===K&&(U=("absolute"!==V||j.u!==Al)&&z>L+1e-10-B-f),U&&"ellipsis"===N){G=u(this.__lineBack(P,H,T,R,b,L-f-B,W,r,i,S,f,w,M,c,F,O,I,C,g),1)[0],Y++,g?r=G:i=G}else{var Z=new ss(this,M.length,r,i,z,w,b,g);M.push(Z),c.addItem(Z,!1),g?r+=w:i+=w,U&&Y++}S=z}else{for(;T<R;){var q=T?L:L-B;y&&Y+p>=y-1&&(q-=f);var J=u(Cl(P,H,T,R,b,q,W,F,O,I,C),3),Q=J[0],tt=J[1],et=J[2];if(y&&et&&Y+p>=y-1&&T+Q<R){var rt=u(this.__lineBack(P,H,T,T+Q,b,q-f,W,Y?s:r,i,S,f,w,M,c,F,O,I,C,g),2);G=rt[0],S=rt[1],Y++,g?r=G:i=G;break}if(T+Q===R&&f&&tt+f>q+1e-10&&Q>1){var it=u(Cl(P,H,T,R,b,q-f,W,F,O,I,C),3);if(Q=it[0],tt=it[1],et=it[2],y&&et&&Y+p>=y-1){var at=u(this.__lineBack(P,H,T,T+Q,b,q-f,W,Y?s:r,i,S,f,w,M,c,F,O,I,C,g),2);G=at[0],S=at[1],Y++,g?r=G:i=G;break}}S=Math.max(S,tt);var nt=new ss(this,M.length,Y&&!g?s:r,Y&&g?h:i,tt,w,b.slice(T,T+Q),g);M.push(nt),c.addItem(nt,et),g?r+=Math.max(w,c.verticalLineHeight):i+=Math.max(w,c.lineHeight),T+=Q,et&&Y++}Y&&(g?this.__y=this.__y1=h:this.__x=this.__x1=s)}return g?(this.__width=r-t.x,this.__height=S,this.__verticalBaseline=qn.getVerticalBaseline(E)):(this.__width=S,this.__height=i-t.y,this.__baseline=qn.getBaseline(E)),p+Y}},{key:"__layoutNone",value:function(){this.__width=this.__height=this.__baseline=this.__verticalBaseline=0,this.__textBoxes.splice(0)}},{key:"__lineBack",value:function(t,e,r,i,a,n,o,s,l,h,c,_,f,v,y,d,p,x,g){var m,b=this.__bp,E=b.computedStyle;if(e===Tl||e===Sl){var M=qn.setFontStyle(E);t.font!==M&&(t.font=M),m=t.measureText(Ml).width}else m=$.measureTextSync(Ml,E[Js],E[$s],E[Qs]);if(e===Tl||e===Sl){var A=qn.setFontStyle(this.computedStyle);t.font!==A&&(t.font=A)}var T=u(Cl(t,e,r,i,a,n-m-c,o,y,d,p,x),2),R=T[0],S=T[1];if(S+m>n+1e-10-c){var w=v.lineBox;if(!v.isNewLine&&w&&w.size)for(var C=w.list,k=C.length-1;k>=0;k--){var O=C[k];if(O instanceof ss){var I=O.content,F=O.width,L=O.height,B=O.parent;if(!k||n>=F+m+1e-10+c){var D=I.length,P=B.computedStyle,N=P[qs],H=P[rl],G=P[$s],W=P[Qs],Y=P[Js];e!==Tl&&e!==Sl||(t.font=qn.setFontStyle(B.computedStyle));var U=u(Cl(t,e,0,D,I,n-m+F-c,o,Y,G,W,H),2),z=U[0],X=U[1];z!==I.length&&(O.__content=I.slice(0,z),g?(l-=L-X,O.__height=X):(s-=F-X,O.__width=X)),w.__resetLb(E[qs],g?qn.getVerticalBaseline(E):qn.getBaseline(E));var V=g?new bs(s,l+X+c,m,b,g):new bs(s+X+c,l,m,b,g);return v.addItem(V,!0),g?s+=Math.max(N,v.verticalLineHeight):l+=Math.max(N,v.lineHeight),[l,h=Math.max(h,X+m)]}var K=C.pop();g?(n+=L,l-=L):(n+=F,s-=F);var j=K.parent.textBoxes,Z=j.indexOf(K);Z>-1&&j.splice(Z,1);var q=K.parent.parent,J=C[C.length-1];for(J instanceof ss&&(J=J.parent.parent);q!==b&&q!==J;){var Q=q.contentBoxList||[],tt=Q.indexOf(K);tt>-1&&Q.splice(tt,1);var et=q.computedStyle;if(g){var rt=et[ul]+et[cl]+et[vl]+et[yl]+et[xl]+et[gl];l-=rt,n+=rt}else{var it=et[_l]+et[fl]+et[dl]+et[pl]+et[ml]+et[bl];s-=it,n+=it}q.__layoutNone(),q=q.domParent}var at=J.contentBoxList||[],nt=at.indexOf(K);nt>-1&&at.splice(nt,1)}else{if(!k)break;var ot=C.pop();g?l-=ot.outerHeight:s-=ot.outerWidth,n+=g?ot.outerHeight:ot.outerWidth,ot.__layoutNone()}}}var st=new ss(this,f.length,s,l,S,_,a.slice(r,r+R),g);f.push(st),v.addItem(st,!1);var lt=g?new bs(s,l+S+c,m,b,g):new bs(s+S+c,l,m,b,g);return v.addItem(lt,!0),g?s+=Math.max(_,v.verticalLineHeight):l+=Math.max(_,v.lineHeight),[g?s:l,h=Math.max(h,S+m)]}},{key:"__backtrack",value:function(t,e,r,i,a,n,o,s,l,h,c){for(var _=r.list,f=_.length-1;f>=0;f--){var v=_[f];if(v instanceof ss){var y=v.content,d=v.width,p=v.height,x=v.parent;if(!f||a>=d+o+1e-10+n){var g=y.length,m=x.computedStyle,b=m[rl],E=m[$s],M=m[Qs],A=m[Js];h!==Tl&&h!==Sl||(l.font=qn.setFontStyle(x.computedStyle));var T=u(Cl(l,h,0,g,y,a-o-n+d,.8*E+b,A,E,M,b),2),R=T[0],S=T[1];R!==y.length&&(v.__content=y.slice(0,R),c?v.__height=S:v.__width=S),r.__resetLb(s[qs],c?qn.getVerticalBaseline(s):qn.getBaseline(s));var w=c?new bs(v.x,v.y+S+n,o,t,c):new bs(v.x+S+n,v.y,o,t,c);return void e.addItem(w,!0)}var C=_.pop();a+=c?p:d;var k=C.parent.textBoxes,O=k.indexOf(C);O>-1&&k.splice(O,1);var I=C.parent.parent,F=_[_.length-1];for(F instanceof ss&&(F=F.parent.parent);I!==t&&I!==F;){var L=I.contentBoxList||[],B=L.indexOf(C);B>-1&&L.splice(B,1);var D=I.computedStyle;if(c)a+=D[ul]+D[cl]+D[vl]+D[yl]+D[xl]+D[gl];else a+=D[_l]+D[fl]+D[dl]+D[pl]+D[ml]+D[bl];I.__layoutNone(),I=I.domParent}var P=F.contentBoxList||[],N=P.indexOf(C);N>-1&&P.splice(N,1)}else{if(!f)break;var H=_.pop();a+=c?H.outerHeight:H.outerWidth,H.__layoutNone()}}}},{key:"__offsetX",value:function(t,r){h(n(e.prototype),"__offsetX",this).call(this,t,r),r&&this.textBoxes.forEach((function(e){e.__offsetX(t)})),this.__x1+=t}},{key:"__offsetY",value:function(t,r){h(n(e.prototype),"__offsetY",this).call(this,t,r),r&&this.textBoxes.forEach((function(e){e.__offsetY(t)})),this.__y1+=t}},{key:"__tryLayInline",value:function(t){return t-this.firstCharWidth}},{key:"__inlineSize",value:function(t){var e,r;this.textBoxes.forEach((function(i,a){a?(e=Math.min(e,t?i.y:i.x),r=Math.max(r,(t?i.y:i.x)+i.width)):(e=t?i.y:i.x,r=(t?i.y:i.x)+i.width)})),t?(this.__y=this.__y1=e,this.__x=this.__x1,this.__height=r-e):(this.__x=this.__x1=e,this.__y=this.__y1,this.__width=r-e)}},{key:"render",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=this.__isDestroyed,n=this.computedStyle,o=this.textBoxes,s=this.cacheStyle;if(t===Rl&&(this.__virtualDom={type:"text",children:[]}),this.__bbox=null,this.__filterBbox=null,!a&&"none"!==n[js]&&"hidden"!==n[el]&&o.length){if(this.__hasContent=!0,t!==Sl){if(t===Tl){var l=qn.setFontStyle(n);e.font!==l&&(e.font=l);var h=s[tl];if(h.k){var u=this.parent;h=u.__gradient(t,e,u.__bx1,u.__by1,u.__bx2,u.__by2,h,r,i).v}e.fillStyle!==h&&(e.fillStyle=h);var c=n[hl];e.lineWidth!==c&&(e.lineWidth=c);var _=s[ll];if(_.k){var f=this.parent;_=f.__gradient(t,e,f.__bx1,f.__by1,f.__bx2,f.__by2,_,r,i).v}e.strokeStyle!==_&&(e.strokeStyle=_)}o.forEach((function(a){a.render(t,e,n,s,r,i)})),t===Rl&&(this.__virtualDom.children=o.map((function(t){return t.virtualDom})))}}else this.__hasContent=!1}},{key:"__destroy",value:function(){if(!this.__isDestroyed){h(n(e.prototype),"__destroy",this).call(this);var t=this.__cache;t&&t.release()}}},{key:"getComputedStyle",value:function(t){return this.__domParent.getComputedStyle(t)}},{key:"updateContent",value:function(t,e){if(t===this.__content||this.__isDestroyed)return this.__content=t,void(wl(e)&&e());this.__content=t,this.__root.__addUpdate(this.__domParent,null,Vs.REFLOW,null,null,null,e)}},{key:"remove",value:function(t){var e,r=this.__root,i=this.isShadowRoot?this.hostRoot.__parent:this.__parent;if(i){var a=this.isShadowRoot?this.hostRoot:this;e=i.__children.indexOf(a),i.__children.splice(e,1),e=i.__zIndexChildren.indexOf(a),i.__zIndexChildren.splice(e,1);var n=this.__prev,o=this.__next;n&&(n.__next=o),o&&(o.__prev=n)}if(this.__isDestroyed)wl(t)&&t();else{if(i.__deleteStruct(this,e),"none"===this.computedStyle[js])return this.__destroy(),void(wl(t)&&t());r.__addUpdate(this,null,Vs.REFLOW,null,!0,null,t)}}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[Js],s=r[$s],l=r[Qs],h=r[rl],u=kl(o,s,l,h);t.hasOwnProperty(u)||(t[u]={});var c=t[u];if(!c.hasOwnProperty("charWidth")){var _=0;if(n===Tl||n===Sl){n===Sl&&(a=$.getFontCanvas().ctx),a.font=qn.setFontStyle(r);for(var f=0,v=e.length;f<v;f++)_=Math.max(_,a.measureText(e.charAt([f])).width)}else n===Rl&&(_=$.measureTextListMax(e,o,s,l));c.charWidth=_+h}return c.charWidth}},{key:"firstCharWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[Js],s=r[$s],l=r[Qs],h=r[rl],u=kl(o,s,l,h);t.hasOwnProperty(u)||(t[u]={});var c=t[u];return c.hasOwnProperty("firstCharWidth")||(n===Tl||n===Sl?(n===Sl&&(a=$.getFontCanvas().ctx),a.font=qn.setFontStyle(r),c.firstCharWidth=a.measureText(e.charAt(0)).width+h):n===Rl&&(c.firstCharWidth=$.measureTextSync(e.charAt(0),o,s,l)+h)),c.firstCharWidth}},{key:"textWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[Js],s=r[$s],l=r[Qs],h=r[rl],u=kl(o,s,l,h);t.hasOwnProperty(u)||(t[u]={});var c=t[u];return c.hasOwnProperty("textWidth")||(n===Tl||n===Sl?(n===Sl&&(a=$.getFontCanvas().ctx),a.font=qn.setFontStyle(r),c.textWidth=a.measureText(e).width+h*e.length):n===Rl&&(c.textWidth=$.measureTextSync(e,o,s,l)+h*e.length)),c.textWidth}},{key:"clientWidth",get:function(){return this.__width||0}},{key:"clientHeight",get:function(){return this.__height||0}},{key:"offsetWidth",get:function(){return this.__width||0}},{key:"offsetHeight",get:function(){return this.__height||0}},{key:"outerWidth",get:function(){return this.__width||0}},{key:"outerHeight",get:function(){return this.__height||0}},{key:"root",get:function(){return this.__domParent.__root}},{key:"currentStyle",get:function(){return this.__domParent.__currentStyle}},{key:"__currentStyle",get:function(){return this.__domParent.__currentStyle}},{key:"style",get:function(){return this.__domParent.__style}},{key:"computedStyle",get:function(){return this.__domParent.__computedStyle}},{key:"__computedStyle",get:function(){return this.__domParent.__computedStyle}},{key:"cacheStyle",get:function(){return this.__domParent.__cacheStyle}},{key:"__cacheStyle",get:function(){return this.__domParent.__cacheStyle}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__x1,e=this.__y1,r=this.width,i=this.height,a=this.computedStyle[hl];this.__bbox=[t-a,e-a,t+r+a,e+i+a]}return this.__bbox}},{key:"filterBbox",get:function(){if(!this.__filterBbox){var t=this.__bbox||this.bbox,e=this.computedStyle[El];this.__filterBbox=qn.spreadFilter(t,e)}return this.__filterBbox}},{key:"isShadowRoot",get:function(){return!this.__parent&&this.__host&&this.__host!==this.root}},{key:"matrix",get:function(){return this.__domParent.__matrix}},{key:"matrixEvent",get:function(){return this.__domParent.__matrixEvent}},{key:"perspectiveMatrix",get:function(){return this.__domParent.__perspectiveMatrix}}]),e}(v),Il=H.isFunction,Fl=function(){function t(){this.__eHash={}}return r(t,[{key:"on",value:function(t,e){if(Il(e)){var r=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.on(t[i],e);else{r.__eHash.hasOwnProperty(t)||(r.__eHash[t]=[]);for(var n=0,o=r.__eHash[t],s=o.length;n<s;n++)if(o[n]===e)return r;r.__eHash[t].push(e)}return r}}},{key:"once",value:function(t,e){if(Il(e)){var r=this;if(n.__karasEventCb=e,Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.once(t[i],e);else e&&r.on(t,n);return this}function n(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(r,a),r.off(t,n)}}},{key:"off",value:function(t,e){var r=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.off(t[i],e);else if(r.__eHash.hasOwnProperty(t))if(e){for(var n=0,o=r.__eHash[t],s=o.length;n<s;n++)if(o[n]===e||o[n].__karasEventCb===e){o.splice(n,1);break}}else delete r.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e.emit(t[n],i);else if(e.__eHash.hasOwnProperty(t)){var s=e.__eHash[t];if(s.length)for(var l=0,h=(s=s.slice()).length;l<h;l++){var u=s[l];Il(u)&&u.apply(e,i)}}return this}}],[{key:"mix",value:function(){for(var e=arguments.length-1;e>=0;e--){var r=e<0||arguments.length<=e?void 0:arguments[e],i=new t;r.__eHash={};for(var a=["on","once","off","emit"],n=a.length-1;n>=0;n--){var o=a[n];r[o]=i[o]}}}}]),t}();i(Fl,"REFRESH","refresh"),i(Fl,"PAUSE","pause"),i(Fl,"PLAY","play"),i(Fl,"FRAME","frame"),i(Fl,"FINISH","finish"),i(Fl,"CANCEL","cancel"),i(Fl,"BEGIN","begin"),i(Fl,"END","end");var Ll=H.isNil,Bl=H.isFunction,Dl=H.extend,Pl={},Nl=function(t){function e(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=t.call(this)||this).__tagName=/(?:function|class)\s+([\w$]+)/.exec(e.constructor.toString())[1],Array.isArray(r)?e.props=H.arr2hash(r):e.props=r,e.__parent=null,e.__host=null,e.__ref={},e.__isMounted=!1,e.__taskList=[],e}return a(e,t),r(e,[{key:"__init",value:function(){var t=this;this.__ref={};var e=this.__shadowRoot;if(e instanceof Ol);else if(e instanceof v){var r=qn.normalize(this.props.style),i=Object.keys(r);Dl(e.style,r,i),Dl(e.currentStyle,r,i),Object.keys(this.props).forEach((function(r){var i=t.props[r];/^on[a-zA-Z]/.test(r)&&(r=r.slice(2).toLowerCase(),e.listener[r]=i)}))}Object.keys(this.props).forEach((function(e){var r=t.props[e];/^on-[a-zA-Z\d_$]/.test(e)&&(e=e.slice(3),t.on(e,r))})),Bl(this.componentDidMount)&&this.__root.once(Fl.REFRESH,(function(){t.componentDidMount()}))}},{key:"render",value:function(){$.warn("Component should implement render()")}},{key:"__destroy",value:function(){if(!this.__isDestroyed){this.__isDestroyed=!0,this.__isMounted=!1;var t=this.props.ref;Ll(t)||Bl(t)||delete this.__root.__ref[t],Bl(this.componentWillUnmount)&&this.componentWillUnmount(),this.__shadow&&this.__shadow.__destroy(),this.__host=this.__hostRoot=this.__shadow=this.__shadowRoot=this.__prev=this.__next=this.__root=this.__parent=this.__domParent=null}}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof Ol))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return Pl}},{key:"getRegister",value:function(t){if(!t||!H.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!Pl.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return Pl[t]}},{key:"register",value:function(t,r){if(!(t&&H.isString(t)&&/^[A-Z]/.test(t)&&r.prototype&&r.prototype instanceof e))throw new Error("Invalid param: Component register");if(e.hasRegister(t))throw new Error("Component has already register: ".concat(t));Pl[t]=r}},{key:"hasRegister",value:function(t){return t&&Pl.hasOwnProperty(t)}},{key:"delRegister",value:function(t){e.hasRegister(t)&&delete Pl[t]}}]),e}(Fl);Object.keys(oa.GEOM).concat(["x","y","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","currentStyle","computedStyle","cacheStyle","__currentStyle","__computedStyle","__cacheStyle","currentProps","__currentProps","cacheProps","__cacheProps","baseline","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","__struct","bbox","contentBoxList","listener","matrix","matrixEvent"]).forEach((function(t){Object.defineProperty(Nl.prototype,t,{get:function(){var e=this.shadowRoot;if(e)return e[t]}})})),["__layout","__layoutFlow","__layoutStyle","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__computeReflow","__mp","animate","removeAnimate","clearAnimate","frameAnimate","updateStyle","getBoundingClientRect","getComputedStyle","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach((function(t){Nl.prototype[t]=function(){var e=this.shadowRoot;if(e&&Bl(e[t]))return e[t].apply(e,arguments)}}));var Hl=Vt.STYLE_KEY,Gl=Hl.MARGIN_TOP,Wl=Hl.MARGIN_LEFT,Yl=Hl.MARGIN_RIGHT,Ul=Hl.MARGIN_BOTTOM,zl=Hl.PADDING_TOP,Xl=Hl.PADDING_LEFT,Vl=Hl.PADDING_RIGHT,Kl=Hl.PADDING_BOTTOM,jl=Hl.BORDER_TOP_WIDTH,Zl=Hl.BORDER_LEFT_WIDTH,ql=Hl.BORDER_RIGHT_WIDTH,$l=Hl.BORDER_BOTTOM_WIDTH;var Jl={getInlineBox:function(t,e,r,i,a,n,o,s,l,h,u,c,_,f,v,y,d,p,x,g){var m,b,E,M,A,T,R,S,w,C=0,k=0,O=e?y+g:_+d,I=e?f+p:v+x;"paddingBox"===c?(C=e?y:_,k=e?f:v):"borderBox"===c&&(C=O,k=I),m=e?n.verticalBaseline-o:n.baseline-o,e?(b=n.x+m-C+l,E=i.y,T=n.x+m-O+l):(b=i.x,E=n.y+n.oy+m-C+l,R=n.y+n.oy+m-O+l);for(var F=i instanceof ss?i.parent.domParent:i.domParent;F!==t;){if(i===F.contentBoxList[0])if(e){var L=F.computedStyle;E-=L[Gl]+L[zl]+L[jl]}else{var B=F.computedStyle;b-=B[Wl]+B[Xl]+B[Zl]}F=F.domParent}for(e?(R=E,h&&(R-=_+d,"paddingBox"===c?E-=_:"borderBox"===c&&(E-=_+d)),M=n.x+m+s+k-l,S=n.x+m+s+I-l,A=a.y+a.outerHeight):(T=b,h&&(T-=y+g,"paddingBox"===c?b-=y:"borderBox"===c&&(b-=y+g)),M=a.x+a.outerWidth,A=n.y+n.oy+m+s+k-l,w=n.y+n.oy+m+s+I-l),F=a instanceof ss?a.parent.domParent:a.domParent;F!==t;){var D=F.contentBoxList;if(a===D[D.length-1])if(e){var P=F.computedStyle;A+=P[Ul]+P[Kl]+P[$l]}else{var N=F.computedStyle;M+=N[Yl]+N[Vl]+N[ql]}F=F.domParent}return e?(w=A,u&&(w+=v+x,"paddingBox"===c?A+=v:"borderBox"===c&&(A+=v+x))):(S=M,u&&(S+=f+p,"paddingBox"===c?M+=f:"borderBox"===c&&(M+=f+p))),[b,E,M,A,T,R,S,w]},getInlineWidth:function(t,e,r){var i=0,a=e.length;e[a-1]instanceof bs&&a--;for(var n=0;n<a;n++){var o=e[n];i+=r?o.height:o.width;for(var s=o instanceof ss?o.parent.domParent:o.domParent;s!==t;){var l=s.contentBoxList;if(o===l[0])if(r){var h=s.computedStyle;i+=h[Gl]+h[zl]+h[jl]}else{var u=s.computedStyle;i+=u[Wl]+u[Xl]+u[Zl]}if(o===l[l.length-1])if(r){var c=s.computedStyle;i+=c[Ul]+c[Kl]+c[$l]}else{var _=s.computedStyle;i+=_[Yl]+_[Vl]+_[ql]}s=s.domParent}}return i}},Ql=Vt.STYLE_KEY,th=Ql.SCALE_X,eh=Ql.SCALE_Y,rh=d.NUMBER;var ih={matrixResize:function(t,e,r,i,a,n,o,s){if(t!==r||e!==i){var l=[{k:th,v:{v:r/t,u:rh}},{k:eh,v:{v:i/e,u:rh}}];return Uo.calMatrixWithOrigin(l,a,n,o,s)}}},ah=Vt.STYLE_KEY,nh=ah.BACKGROUND_POSITION_X,oh=ah.BACKGROUND_POSITION_Y,sh=H.clone,lh=H.joinArr,hh=ce.canvasPolygon,uh=ce.svgPolygon;function ch(t,e,r,i,a,n,o,s,l,h,u,c,_){var f,v,d,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:"fill",x=arguments.length>14&&void 0!==arguments[14]&&arguments[14],m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,b=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(f=i[1],v=i[2],d=i[3],i=i[0]),(a=a||qe.calRadius(n,o,s,l,h,u,c,_))||(a=[[n,o],[n+s,o],[n+s,o+l],[n,o+l],[n,o]]),f){f=Uo.calMatrixByOrigin(f,v,d);var E=g.inverse(f);a=a.map((function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var a=g.calPoint({x:t[r],y:t[r+1]},E);e.push(a.x),e.push(a.y)}return e}))}if(e===y.CANVAS||e===y.WEBGL){if(f){r.save();var M=t.matrixEvent;f=g.multiply(M,f),r.setTransform(f[0],f[1],f[4],f[5],f[12],f[13])}r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),hh(r,a,m,b),r[p](),r.closePath(),f&&r.restore()}else if(e===y.SVG){var A=uh(a);if(x){var T={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",A],["fill",i]]}]};return t.__cacheDefs.push(T),r.add(T)}if(t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",A],["fill",i]]}),f){var R=t.virtualDom.bb;R[R.length-1].props.push(["transform","matrix(".concat(lh(g.m2m6(f),","),")")])}}}var _h,fh={renderBgc:ch,renderImage:function(t,e,r,i,a,n,o,s,l,h,c,_,f,v,d,p,x){var m=arguments.length>17&&void 0!==arguments[17]?arguments[17]:0,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0,E=i.source;if(E){var M=(o+=m)-(a+=m),A=(s+=b)-(n+=b),T=i.width,R=i.height,S=d[v]||[],w=u(S,2),C=w[0],k=w[1];-1===C&&-1===k?(C=T,k=R):-2===C?T>M&&R>A?(C=T/M)>=(k=R/A)?k=(C=M)*R/T:C=(k=A)*T/R:T>M?k=(C=M)*R/T:R>A?C=(k=A)*T/R:(C=T,k=R):-3===C?M>T&&A>R?(C=T/M)<=(k=R/A)?k=(C=M)*R/T:C=(k=A)*T/R:M>T?k=(C=M)*R/T:A>R?C=(k=A)*T/R:(C=T/M)<=(k=R/A)?k=(C=M)*R/T:C=(k=A)*T/R:-1===C?C=k*T/R:-1===k&&(k=C*R/T);var O=f[nh][v]||0;/%/.test(O)&&(O=(M-C)*parseFloat(O)*.01),O+=a;var I=f[oh][v]||0;/%/.test(I)&&(I=(A-k)*parseFloat(I)*.01),I+=n;var F=O<a||I<n||O+C>a+M||I+k>n+A,L=0,B=0,D=0,P=0;if(["repeatX","repeat"].indexOf(p[v])>-1){var N=O-a;N>0&&(L=Math.ceil(N/C)),(N=a+M-O-C)>0&&(B=Math.ceil(N/C))}if(["repeatY","repeat"].indexOf(p[v])>-1){var H=I-n;H>0&&(D=Math.ceil(H/k)),(H=n+A-I-k)>0&&(P=Math.ceil(H/k))}var G=[];if(L>0)for(var W=0;W<L;W++){var Y=O-(W+1)*C;G.push([Y,I]),!F&&0===W&&Y<a&&(F=!0)}if(B>0)for(var U=0;U<B;U++){var z=O+(U+1)*C;G.push([z,I]),!F&&U===B-1&&z+C>a+M&&(F=!0)}if(D>0)for(var X=0;X<D;X++){var V=I-(X+1)*k;G.push([O,V]),!F&&0===X&&V<n&&(F=!0)}if(P>0)for(var K=0;K<P;K++){var j=I+(K+1)*k;G.push([O,j]),!F&&K===P-1&&j+C>n+A&&(F=!0)}if(L>0&&D>0)for(var Z=0;Z<L;Z++)for(var q=0;q<D;q++)G.push([O-(Z+1)*C,I-(q+1)*k]);if(B>0&&D>0)for(var $=0;$<B;$++)for(var J=0;J<D;J++)G.push([O+($+1)*C,I-(J+1)*k]);if(L>0&&P>0)for(var Q=0;Q<L;Q++)for(var tt=0;tt<P;tt++)G.push([O-(Q+1)*C,I+(tt+1)*k]);if(B>0&&P>0)for(var et=0;et<B;et++)for(var rt=0;rt<P;rt++)G.push([O+(et+1)*C,I+(rt+1)*k]);if(e===y.CANVAS||e===y.WEBGL)F&&(r.save(),ch(this,e,r,"#FFF",null,a,n,M,A,l,h,c,_,"clip")),r.drawImage(E,O,I,C,k),G.forEach((function(t){r.drawImage(E,t[0],t[1],C,k)})),F&&r.restore();else if(e===y.SVG){var it,at=ih.matrixResize(T,R,C,k,O,I,M,A),nt=[["xlink:href",i.url],["x",O],["y",I],["width",T],["height",R]];if(at&&!g.isE(at)&&(it=!0,nt.push(["transform","matrix("+lh(g.m2m6(at),",")+")"])),F){var ot={x:a,y:n},st={x:o,y:s};if(it){var lt=g.inverse(at);ot=g.calPoint(ot,lt),st=g.calPoint(st,lt)}var ht={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(ot.x,",").concat(ot.y,"L").concat(st.x,",").concat(ot.y,"L").concat(st.x,",").concat(st.y,"L").concat(ot.x,",").concat(st.y,"L").concat(ot.x,",").concat(ot.y)],["fill","#FFF"]]}]},ut=r.add(ht);t.__cacheDefs.push(ht),nt.push(["clip-path","url(#"+ut+")"])}if(x){var ct={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:nt}]};return t.__cacheDefs.push(ct),G.forEach((function(t){var e=sh(nt);if(it){var r=ih.matrixResize(T,R,C,k,t[0],t[1],M,A);r&&!g.isE(r)&&(e[5][1]="matrix("+lh(g.m2m6(r),",")+")")}e[1][1]=t[0],e[2][1]=t[1],ct.children.push({type:"img",tagName:"image",props:e})})),r.add(ct)}t.virtualDom.bb.push({type:"img",tagName:"image",props:nt}),G.forEach((function(e){var r=sh(nt);if(it){var i=ih.matrixResize(T,R,C,k,e[0],e[1],M,A);i&&!g.isE(i)&&(r[5][1]="matrix("+lh(g.m2m6(i),",")+")")}r[1][1]=e[0],r[2][1]=e[1],t.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}},vh=H.isFunction;var yh=function(){function t(){this.__rootTask=[],this.__task=[],this.__now=$.now()}return r(t,[{key:"__init",value:function(){var t=this,e=t.task;$.cancelAnimationFrame(t.id);var r=t.__now=$.now();!function i(){$.cancelAnimationFrame(t.id),t.id=$.requestAnimationFrame((function(){if(!_h&&e.length){var a=t.__now=$.now(),n=a-r;n=Math.max(n,0),r=a;var o=e.slice(0),s=o.length;!function(t,e,r){for(var i=0;i<e;i++){var a=t[i];a.__before&&a.__before(r)}}(o,s,n);for(var l=t.__rootTask.splice(0),h=0,u=l.length;h<u;h++){var c=l[h];c&&c(n)}!function(t,e,r){for(var i=0;i<e;i++){var a=t[i];a.__after&&a.__after(r)}}(o,s,n),e.length&&i()}}))}()}},{key:"onFrame",value:function(t){if(t){var e=this.task;e.length||this.__init(),vh(t)&&(t={__after:t,__karasFramecb:t}),e.push(t)}}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var a=e[r];if(a===t||a.__karasFramecb===t){e.splice(r,1);break}}e.length||($.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(t){var e=this;if(t){var r=vh(t)?{__after:function(i){t(i),e.offFrame(r)}}:{__before:t.__before,__after:function(i){t.__after&&t.__after(i),e.offFrame(r)}};r.__karasFramecb=t,this.onFrame(r)}}},{key:"pause",value:function(){_h=!0}},{key:"resume",value:function(){_h&&(this.__init(),_h=!1)}},{key:"task",get:function(){return this.__task}}]),t}(),dh=new yh,ph=.1,xh="function"==typeof Float32Array;function gh(t,e){return 1-3*e+3*t}function mh(t,e){return 3*e-6*t}function bh(t){return 3*t}function Eh(t,e,r){return((gh(e,r)*t+mh(e,r))*t+bh(e))*t}function Mh(t,e,r){return 3*gh(e,r)*t*t+2*mh(e,r)*t+bh(e)}function Ah(t){return t}function Th(t,e,r,i){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&r===i)return Ah;for(var a=xh?new Float32Array(11):new Array(11),n=0;n<11;++n)a[n]=Eh(n*ph,t,r);function o(e){for(var i=0,n=1;10!==n&&a[n]<=e;++n)i+=ph;--n;var o=i+(e-a[n])/(a[n+1]-a[n])*ph,s=Mh(o,t,r);return s>=.001?function(t,e,r,i){for(var a=0;a<4;++a){var n=Mh(e,r,i);if(0===n)return e;e-=(Eh(e,r,i)-t)/n}return e}(e,o,t,r):0===s?o:function(t,e,r,i,a){var n,o,s=0;do{(n=Eh(o=e+(r-e)/2,i,a)-t)>0?r=o:e=o}while(Math.abs(n)>1e-7&&++s<10);return o}(e,i,i+ph,t,r)}return function(t){return 0===t||1===t?t:Eh(o(t),e,i)}}var Rh={linear:Th(1,1,0,0),easeIn:Th(.42,0,1,1),easeOut:Th(0,0,.58,1),ease:Th(.25,.1,.25,1),easeInOut:Th(.42,0,.58,1),cubicBezier:Th,getEasing:function(t,e,r,i){return 4===arguments.length?Th(t,e,r,i):Array.isArray(t)&&4===t.length?Th(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?a=Th((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(a=this[t]),a):void 0;var a}};Rh["ease-in"]=Rh.easeIn,Rh["ease-out"]=Rh.easeOut,Rh["ease-in-out"]=Rh.easeInOut;var Sh=Vt.STYLE_KEY,wh=Sh.FILTER,Ch=Sh.TRANSFORM_ORIGIN,kh=Sh.PERSPECTIVE_ORIGIN,Oh=Sh.BACKGROUND_CLIP,Ih=Sh.BACKGROUND_POSITION_X,Fh=Sh.BACKGROUND_POSITION_Y,Lh=Sh.BOX_SHADOW,Bh=Sh.TRANSLATE_X,Dh=Sh.TRANSLATE_Y,Ph=Sh.TRANSLATE_Z,Nh=Sh.BACKGROUND_SIZE,Hh=Sh.FONT_SIZE,Gh=Sh.FLEX_BASIS,Wh=Sh.FLEX_DIRECTION,Yh=Sh.WIDTH,Uh=Sh.HEIGHT,zh=Sh.TOP,Xh=Sh.BOTTOM,Vh=Sh.LINE_HEIGHT,Kh=Sh.OPACITY,jh=Sh.Z_INDEX,Zh=Sh.TRANSFORM,qh=Sh.COLOR,$h=Sh.FONT_WEIGHT,Jh=Sh.FONT_STYLE,Qh=Sh.FONT_FAMILY,tu=Sh.TEXT_ALIGN,eu=Sh.MATRIX,ru=Sh.ROTATE_3D,iu=Sh.TRANSLATE_PATH,au=Sh.TEXT_STROKE_COLOR,nu=Sh.TEXT_STROKE_OVER,ou=Sh.STROKE_WIDTH,su=Sh.BORDER_TOP_LEFT_RADIUS,lu=Sh.BORDER_TOP_RIGHT_RADIUS,hu=Sh.BORDER_BOTTOM_RIGHT_RADIUS,uu=Sh.BORDER_BOTTOM_LEFT_RADIUS,cu=Sh.TEXT_STROKE_WIDTH,_u=Sh.BORDER_BOTTOM_WIDTH,fu=Sh.BORDER_LEFT_WIDTH,vu=Sh.BORDER_RIGHT_WIDTH,yu=Sh.BORDER_TOP_WIDTH,du=Sh.LEFT,pu=Sh.RIGHT,xu=Sh.MARGIN_BOTTOM,gu=Sh.MARGIN_TOP,mu=Sh.MARGIN_LEFT,bu=Sh.MARGIN_RIGHT,Eu=Sh.PADDING_TOP,Mu=Sh.PADDING_RIGHT,Au=Sh.PADDING_LEFT,Tu=Sh.PADDING_BOTTOM,Ru=Sh.STROKE_MITERLIMIT,Su=Sh.LETTER_SPACING,wu=Sh.PERSPECTIVE,Cu=Sh.SKEW_X,ku=Sh.SKEW_Y,Ou=Sh.SCALE_X,Iu=Sh.SCALE_Y,Fu=Sh.SCALE_Z,Lu=Sh.ROTATE_X,Bu=Sh.ROTATE_Y,Du=Sh.ROTATE_Z,Pu=Sh.BACKGROUND_IMAGE,Nu=Sh.FILL,Hu=Sh.STROKE,Gu=Sh.BACKGROUND_COLOR,Wu=Sh.BORDER_BOTTOM_COLOR,Yu=Sh.BORDER_LEFT_COLOR,Uu=Sh.BORDER_RIGHT_COLOR,zu=Sh.BORDER_TOP_COLOR,Xu=Sh.POSITION,Vu=d.AUTO,Ku=d.PX,ju=d.PERCENT,Zu=d.INHERIT,qu=d.RGBA,$u=d.STRING,Ju=d.NUMBER,Qu=d.REM,tc=d.VW,ec=d.VH,rc=d.VMAX,ic=d.VMIN,ac=d.GRADIENT,nc=d.calUnit,oc=H.isNil,sc=H.isFunction,lc=H.isNumber,hc=H.isObject,uc=H.clone,cc=H.equalArr,_c=Rh.linear,fc=qn.cloneStyle,vc=qn.equalStyle,yc=oa.isGeom,dc=oa.GEOM,pc=Vs.getLevel,xc=Vs.isRepaint,gc=Vs.NONE;Vs.FILTER,Vs.PERSPECTIVE,Vs.REPAINT,Vs.REFLOW,Vs.REBUILD,Vs.CACHE;var mc=Vs.TRANSFORM;Vs.TRANSFORM_ALL,Vs.OPACITY,Vs.MIX_BLEND_MODE,Vs.MASK;var bc=Vs.TRANSLATE_X,Ec=Vs.TRANSLATE_Y,Mc=Vs.TRANSLATE_Z,Ac=Vs.ROTATE_Z,Tc=Vs.SCALE_X,Rc=Vs.SCALE_Y,Sc=Vs.SCALE_Z,wc=Vs.SCALE,Cc=gi,kc=bi,Oc=mi,Ic=Ei,Fc=Mi;function Lc(t,e,r,i,a){i&&!i.allInFn&&(i=null),e.__addUpdate(r,t,null,null,null,i,a)}function Bc(t,e,r,i){if(t.u===Ku){if(e.u===ju)return.01*e.v*r-t.v;if(e.u===Qu)return e.v*i.computedStyle[Hh]-t.v;if(e.u===tc)return e.v*i.width*.01-t.v;if(e.u===ec)return e.v*i.height*.01-t.v;if(e.u===rc)return e.v*Math.max(i.width,i.height)*.01-t.v;if(e.u===ic)return e.v*Math.min(i.width,i.height)*.01-t.v}else if(t.u===ju){if(e.u===Ku)return 100*e.v/r-t.v;if(e.u===Qu)return e.v*i.computedStyle[Hh]*100/r-t.v;if(e.u===tc)return e.v*i.width/r-t.v;if(e.u===ec)return e.v*i.height/r-t.v;if(e.u===rc)return e.v*Math.max(i.width,i.height)/r-t.v;if(e.u===ic)return e.v*Math.min(i.width,i.height)/r-t.v}else if(t.u===Qu){if(e.u===Ku)return e.v/i.computedStyle[Hh]-t.v;if(e.u===ju)return.01*e.v*r/i.computedStyle[Hh]-t.v;if(e.u===tc)return e.v*i.width*.01/i.computedStyle[Hh]-t.v;if(e.u===ec)return e.v*i.height*.01/i.computedStyle[Hh]-t.v;if(e.u===rc)return e.v*Math.max(i.width,i.height)*.01/i.computedStyle[Hh]-t.v;if(e.u===ic)return e.v*Math.min(i.width,i.height)*.01/i.computedStyle[Hh]-t.v}else if(t.u===tc){if(e.u===Ku)return 100*e.v/i.width-t.v;if(e.u===Qu)return 100*e.v*i.computedStyle[Hh]/i.width-t.v;if(e.u===ju)return e.v*r/i.width-t.v;if(e.u===ec)return e.v*i.height/i.width-t.v;if(e.u===rc)return e.v*Math.max(i.width,i.height)/i.width-t.v;if(e.u===ic)return e.v*Math.min(i.width,i.height)/i.width-t.v}else if(t.u===ec){if(e.u===Ku)return 100*e.v/i.height-t.v;if(e.u===Qu)return 100*e.v*i.computedStyle[Hh]/i.height-t.v;if(e.u===tc)return e.v*i.width/i.height-t.v;if(e.u===ju)return e.v*r/i.height-t.v;if(e.u===rc)return e.v*Math.max(i.width,i.height)/i.height-t.v;if(e.u===ic)return e.v*Math.min(i.width,i.height)/i.height-t.v}else if(t.u===rc){if(e.u===Ku)return 100*e.v/Math.max(i.width,i.height)-t.v;if(e.u===Qu)return 100*e.v*i.computedStyle[Hh]/Math.max(i.width,i.height)-t.v;if(e.u===ju)return e.v*r/Math.max(i.width,i.height)-t.v;if(e.u===tc)return e.v*i.width/Math.max(i.width,i.height)-t.v;if(e.u===ec)return e.v*i.height/Math.max(i.width,i.height)-t.v;if(e.u===ic)return e.v*Math.min(i.width,i.height)/Math.max(i.width,i.height)-t.v}else if(t.u===ic){if(e.u===Ku)return 100*e.v/Math.min(i.width,i.height)-t.v;if(e.u===Qu)return 100*e.v*i.computedStyle[Hh]/Math.min(i.width,i.height)-t.v;if(e.u===ju)return e.v*r/Math.min(i.width,i.height)-t.v;if(e.u===tc)return e.v*i.width/Math.min(i.width,i.height)-t.v;if(e.u===ec)return e.v*i.height/Math.min(i.width,i.height)-t.v;if(e.u===rc)return e.v*Math.max(i.width,i.height)/Math.min(i.width,i.height)-t.v}return 0}function Dc(t,e,r,i){var a=t.style[r],n=e.style[r],o=t.clone[r];o&&o.hasOwnProperty("v")&&(o=o.v);var s={k:r,st:a,cl:o};if(r===Zh){if(!a&&!n||!a.length&&!n.length)return;var l,h;if(l=a&&a[0]?a[0].v:g.identity(),h=n&&n[0]?n[0].v:g.identity(),cc(l,h))return;s.v=[h[0]-l[0],h[1]-l[1],h[2]-l[2],h[3]-l[3],h[4]-l[4],h[5]-l[5],h[6]-l[6],h[7]-l[7],h[8]-l[8],h[9]-l[9],h[10]-l[10],h[11]-l[11],h[12]-l[12],h[13]-l[13],h[14]-l[14],h[15]-l[15]]}else if(r===ru){if(a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3].v===n[3].v&&a[3].u===n[3].u)return;s.v=[n[0]-a[0],n[1]-a[1],n[2]-a[2],n[3].v-a[3].v]}else if(r===wh){for(var u,c=Math.max(a?a.length:0,n?n.length:0),_=[],f=0;f<c;f++){var v=a?a[f]:null,y=n?n[f]:null;if(oc(v)||oc(y)||v.k!==y.k)_.push(null);else{u=!0;var d=v.k,p=v.v,x=y.v;if("blur"===d)if(p.u===x.u)_.push(x.v-p.v);else{var m=Bc(p,x,0,i.root);_.push(m)}else if("hueRotate"===d||"saturate"===d||"brightness"===d||"contrast"===d||"sepia"===d||"invert"===d||"grayscale"===d)_.push(x.v-p.v);else if("dropShadow"===d){for(var b=[],E=0;E<4;E++){var M=p[E],A=x[E];M.u===A.u?b.push(A.v-M.v):b.push(Bc(M,A,1===E?i.clientHeight:i.clientWidth,i.root))}b.push([x[4][0]-p[4][0],x[4][1]-p[4][1],x[4][2]-p[4][2],x[4][3]-p[4][3]]),_.push(b)}}}if(!u)return;s.v=_}else if(r===Ch||r===kh||Fc(r)){if(n[0].v===a[0].v&&n[0].u===a[0].u&&n[1].v===a[1].v&&n[1].u===a[1].u)return;s.v=[];for(var T=0;T<2;T++){var R=a[T],S=n[T];if(R.u===S.u)s.v.push(S.v-R.v);else{var w=Bc(R,S,i[T?"outerHeight":"outerWidth"],i.root);s.v.push(w)}}}else if(r===Ih||r===Fh){s.v=[];for(var C=Math.min(a.length,n.length),k=0;k<C;k++){var O=a[k],I=n[k];if(O.u===I.u){var F=I.v-O.v;s.v.push(F)}else{var L=void 0;L=["padding-box","paddingBox"].indexOf(i.computedStyle[Oh])>-1?r===Ih?"clientWidth":"clientHeight":["content-box","contentBox"].indexOf(i.computedStyle[Oh])>-1?r===Ih?"width":"height":r===Ih?"offsetWidth":"offsetHeight";var B=Bc(O,I,i[L],i.root);s.v.push(B)}}}else if(r===Lh){s.v=[];for(var D=0,P=Math.min(a.length,n.length);D<P;D++){var N=a[D],H=n[D];if(N&&H&&N[5]===H[5]){for(var G=[],W=0;W<4;W++)if(N[W].u===H[W].u)G.push(H[W].v-N[W].v);else{var Y=Bc(N[W],H[W],1===D?i.offsetHeight:i.offsetWidth,i.root);G.push(Y)}for(var U=[],z=0;z<4;z++)U.push(H[4][z]-N[4][z]);G.push(U),s.v.push(G)}else s.v.push(null)}}else if(r===Nh){s.v=[];for(var X,V=Math.min(a.length,n.length),K=0;K<V;K++){var j=a[K],Z=n[K];if(j&&Z){for(var q=[],$=0;$<2;$++){var J=j[$],Q=Z[$];if(J.u===Q.u)q.push(Q.v-J.v);else{var tt=void 0;tt=["padding-box","paddingBox"].indexOf(i.computedStyle[Oh])>-1?K?"clientWidth":"clientHeight":["content-box","contentBox"].indexOf(i.computedStyle[Oh])>-1?K?"width":"height":K?"offsetWidth":"offsetHeight";var et=Bc(J,Q,i[tt],i.root);q.push(et)}}cc(q,[0,0])?s.v.push(null):(s.v.push(q),X=!0)}else s.v.push(null)}if(!X)return}else if(r===Kh||r===jh){if(n===a)return;s.v=n-a}else if(r===ou){s.v=[];for(var rt=Math.min(a.length,n.length),it=0;it<rt;it++){var at=a[it],nt=n[it];if(at.u===nt.u){var ot=nt.v-at.v;s.v.push(ot)}var st=Bc(at,nt,i.offsetWidth,i.root);s.v.push(st)}}else if(r===iu&&a){var lt="offsetWidth",ht="offsetHeight";["padding-box","paddingBox"].indexOf(i.computedStyle[Oh])>-1?(lt="clientWidth",ht="clientHeight"):["content-box","contentBox"].indexOf(i.computedStyle[Oh])>-1&&(lt="width",ht="height"),s.v=a.map((function(t,e){var r=t.v,a=t.u;return a===ju?e%2==0?{v:.01*(parseFloat(r)||0)*i[lt],u:Ku}:{v:.01*(parseFloat(r)||0)*i[ht],u:Ku}:a===Qu?{v:(parseFloat(r)||0)*i.root.computedStyle[Hh]*100,u:Ku}:a===tc?{v:.01*(parseFloat(r)||0)*i.root.width,u:Ku}:a===ec?{v:.01*(parseFloat(r)||0)*i.root.height,u:Ku}:a===rc?{v:.01*(parseFloat(r)||0)*Math.max(i.root.width,i.root.height),u:Ku}:a===ic?{v:.01*(parseFloat(r)||0)*Math.min(i.root.width,i.root.height),u:Ku}:{v:parseFloat(r)||0,u:Ku}}))}else if(kc(r))if(a.u===n.u){var ut=n.v-a.v;if(0===ut)return;s.v=ut}else{var ct=Bc(a,n,i[r===Bh||r===Ph?"outerWidth":"outerHeight"],i.root);if(!ct)return;s.v=ct}else if(Oc(r)){if(a.u===Vu||n.u===Vu)return;var _t=i.computedStyle,ft=(i.domParent||i).computedStyle,vt=0;if(a.u===n.u?vt=n.v-a.v:r===Vh?vt=Bc(a,n,_t[Hh],i.root):r===Hh?vt=Bc(a,n,ft[Hh],i.root):r===Gh&&["column","column-reverse","columnReverse"].indexOf(_t[Wh])>-1||[Uh,zh,Xh].indexOf(r)>-1?a.u!==Vu&&n.u!==Vu&&(vt=Bc(a,n,ft[Uh],i.root)):a.u!==Vu&&n.u!==Vu&&(vt=Bc(a,n,ft[Yh],i.root)),0===vt||isNaN(vt))return;s.v=vt}else if(Ic(r)){s.v=[];for(var yt=Math.min(a.length,n.length),dt=0;dt<yt;dt++){var pt=a[dt],xt=n[dt];if(pt&&xt&&pt.u===xt.u&&pt.u!==$u){var gt=pt.u;pt=pt.v,xt=xt.v;var mt=void 0;if(gt===ac){var bt=Pc(pt,xt,i);if(!bt){s.v.push(null);continue}mt=bt}else{if(cc(xt,pt)){s.v.push(null);continue}mt=[xt[0]-pt[0],xt[1]-pt[1],xt[2]-pt[2],xt[3]-pt[3]]}s.v.push(mt)}else s.v.push(null)}}else if(Cc(r)){if(n.u!==a.u)return;if(n=n.v,a=a.v,n.u===ac){var Et=Pc(a,n,i);if(!Et)return;s.v=Et}else{if(cc(n,a))return;s.v=[n[0]-a[0],n[1]-a[1],n[2]-a[2],n[3]-a[3]]}}else{if(!dc.hasOwnProperty(r))return;var Mt=i.tagName;if(oc(a))return;if(dc[r][Mt]&&sc(dc[r][Mt].calDiff)){var At=dc[r][Mt].calDiff;if(i.isMulti){for(var Tt=[],Rt=0,St=Math.min(a.length,n.length);Rt<St;Rt++)Tt.push(At(a[Rt],n[Rt]));return Tt}s.v=At(a,n)}else if(i.isMulti)if("points"===r||"controls"===r){if(oc(n)||!n.length||oc(a)||!a.length||cc(a,n))return;s.v=[];for(var wt=0,Ct=Math.min(a.length,n.length);wt<Ct;wt++){var kt=a[wt],Ot=n[wt];if(oc(kt)||!kt.length||oc(Ot)||!Ot.length)s.v.push(null);else{for(var It=[],Ft=0,Lt=Math.min(kt.length,Ot.length);Ft<Lt;Ft++){var Bt=kt[Ft],Dt=Ot[Ft];if(oc(Bt)||oc(Dt))It.push(null);else{for(var Pt=[],Nt=0,Ht=Math.max(Bt.length,Dt.length);Nt<Ht;Nt++){var Gt=Bt[Nt],Wt=Dt[Nt];oc(Gt)||oc(Wt)?Pt.push(0):Pt.push(Wt-Gt)}It.push(Pt)}}s.v.push(It)}}}else if("controlA"===r||"controlB"===r){if(oc(n)||!n.length||oc(a)||!a.length||cc(a,n))return;s.v=[];for(var Yt=0,Ut=Math.min(a.length,n.length);Yt<Ut;Yt++){var zt=a[Yt],Xt=n[Yt];oc(zt)||!zt.length||oc(Xt)||!Xt.length?s.v.push(null):s.v.push([Xt[0]-zt[0],Xt[1]-zt[1]])}}else{if(n===a||cc(n,a)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var Vt=[],Kt=0,jt=Math.min(a.length,n.length);Kt<jt;Kt++){var Zt=a[Kt],qt=n[Kt];(oc(Zt)||oc(qt))&&Vt.push(0),Vt.push(qt-Zt)}s.v=Vt}else if("points"===r||"controls"===r){if(oc(n)||!n.length||oc(a)||!a.length||cc(a,n))return;s.v=[];for(var $t=0,Jt=Math.min(a.length,n.length);$t<Jt;$t++){var Qt=a[$t],te=n[$t];if(oc(Qt)||!Qt.length||oc(te)||!te.length)s.v.push(null);else{for(var ee=[],re=0,ie=Math.max(Qt.length,te.length);re<ie;re++){var ae=Qt[re],ne=te[re];oc(ae)||oc(ne)?ee.push(0):ee.push(ne-ae)}s.v.push(ee)}}}else if("controlA"===r||"controlB"===r){if(oc(n)||!n.length||oc(a)||!a.length||cc(a,n))return;s.v=[n[0]-a[0],n[1]-a[1]]}else{if(n===a||"edge"===r||"closure"===r||"booleanOperations"===r)return;s.v=n-a}}return s}function Pc(t,e,r){if(t.k===e.k){for(var i=t.v,a=e.v,n=[[]],o=cc(i,a),s=0,l=Math.min(i.length,a.length);s<l;s++){var h=i[s],u=a[s],c=[];if(c.push([u[0][0]-h[0][0],u[0][1]-h[0][1],u[0][2]-h[0][2],u[0][3]-h[0][3]]),h[1]&&u[1])if(h[1].u===u[1].u)c.push(u[1].v-h[1].v);else{var _=Bc(h[1],u[1],r.clientWidth,r.root);c.push(_||0)}n[0].push(c)}if("linear"===t.k){var f=Array.isArray(t.d);if(Array.isArray(e.d)!==f)return;if(f){var v=[e.d[0]-t.d[0],e.d[1]-t.d[1],e.d[2]-t.d[2],e.d[3]-t.d[3]];if(o&&cc(v,[0,0,0,0]))return;n[1]=v}else{var y=e.d-t.d;if(o&&0===y)return;n[1]=y}}else if("radial"===t.k){var d=Array.isArray(t.z);if(Array.isArray(e.z)!==d)return;if(n[2]=[],d){if(o&&cc(t.z,e.z))return;for(var p=0;p<5;p++){var x=t.z[p];void 0===x&&(x=1);var g=e.z[p];void 0===g&&(g=1),n[2].push(g-x)}}else{if(o&&t.z===e.z&&t.s===e.s&&cc(t.p,e.p))return;for(var m=0;m<2;m++){var b=t.p[m],E=e.p[m];if(b.u===E.u)n[2].push(E.v-b.v);else{var M=Bc(b,E,r[m?"clientWidth":"clientHeight"],r.root);n[2].push(M||0)}}}}else if("conic"===t.k){if(o&&t.d===e.d&&cc(t.p,e.p))return;n[1]=e.d-t.d,n[2]=[];for(var A=0;A<2;A++){var T=t.p[A],R=e.p[A];if(T[1]===R[1])n[2].push(R[0]-T[0]);else{var S=Bc(T,R,r[A?"clientWidth":"clientHeight"],r.root);n[2].push(S||0)}}}return n}}function Nc(t,e,r,i){for(var a,n=i.__currentStyle,o=!0,s=0,l=r.length;s<l;s++){var h=r[s];h===iu&&(a=!0);var u=Dc(t,e,h,i);if(u){u.cs=n[h];var c=Gc[h];c?u.fn=c:o=!1,t.transition.push(u),t.keys.push(h)}else t.fixed.push(h),o=!1}if(a){var _=t.keys.indexOf(Bh);-1===_&&t.keys.push(Bh),-1===(_=t.keys.indexOf(Dh))&&t.keys.push(Dh),(_=t.fixed.indexOf(Bh))>-1&&t.fixed.splice(_,1),(_=t.fixed.indexOf(Dh))>-1&&t.fixed.splice(_,1)}if(t.allInFn=o,o){for(var f=gc,v=i.__computedStyle,y=0,d=r.length;y<d;y++){var p=r[y];f|=pc(p),p===jh?t.hasZ=node!==this&&["relative","absolute"].indexOf(v[Xu])>-1:p===qh?t.hasColor=!0:p===au?t.hasTsColor=!0:p===cu?t.hasTsWidth=!0:p===nu&&(t.hasTsOver=!0)}t.lv=f,t.isRepaint=xc(f),t.isRepaint&&f&(bc|Ec|Mc|Ac|wc)&&(f&mc||f&Tc&&!v[Ou]||f&Rc&&!v[Iu]||f&Sc&&!v[Fu]||f&Ac&&(v[Lu]||v[Bu]||v[Cu]||v[ku])?t.optimize=!1:t.optimize=!0)}return e}function Hc(t){var e;if(t)if(e=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(t)){var r=parseInt(e[1]),i=e[2];e=function(t){if(r&&r>0){var e=1/r;return("start"===i?Math.ceil(t/e):Math.floor(t/e))/r}return t}}else e=Rh.getEasing(t);return e}var Gc=[];function Wc(t,e,r){for(var i=e.__currentStyle,a=e.__currentProps,n=[],o=0,s=r.length;o<s;o++){var l=r[o],h=t[l],u=dc.hasOwnProperty(l);vc(l,h,u?a[l]:i[l],e)||(u?a[l]=h:i[l]=h,n.push(l))}return n}function Yc(t,e){return sc(t)&&(e=t,t={}),[t||{},e]}function Uc(t){t.emit(Fl.FRAME,t.__isChange),t.__firstPlay&&(t.__firstPlay=!1,t.emit(Fl.PLAY));var e=t.__playCb;sc(e)&&(e(t.__isChange),t.__playCb===e&&(t.__playCb=null))}Gc[Zh]=function(t,e,r,i,a,n,o){i&&i.length||(i=n.style[t]=[{k:eu,v:g.identity()}]);a&&a.length||(a=n.clone[t]=[{k:eu,v:g.identity()}]);for(var s=0;s<16;s++)i[0].v[s]=a[0].v[s]+e[s]*r},Gc[ru]=function(t,e,r,i,a,n,o){i[0]=a[0]+e[0]*r,i[1]=a[1]+e[1]*r,i[2]=a[2]+e[2]*r,i[3].v=a[3].v+e[3]*r},Gc[wh]=function(t,e,r,i,a,n,o){for(var s=0,l=e.length;s<l;s++){var h=e[s];if(h){var u=i[s].k,c=i[s].v,_=a[s].v;if("dropShadow"===u){c[0].v=_[0].v+h[0]*r,c[1].v=_[1].v+h[1]*r,c[2].v=_[2].v+h[2]*r,c[3].v=_[3].v+h[3]*r;var f=c[4],v=_[4],y=h[4];f[0]=v[0]+y[0]*r,f[1]=v[1]+y[1]*r,f[2]=v[2]+y[2]*r,f[3]=v[3]+y[3]*r}else c.v=_.v+h*r}}},Gc[Ch]=Gc[kh]=Gc[su]=Gc[lu]=Gc[hu]=Gc[uu]=function(t,e,r,i,a,n,o){0!==e[0]&&(i[0].v=a[0].v+e[0]*r);0!==e[1]&&(i[1].v=a[1].v+e[1]*r)},Gc[ou]=Gc[Ih]=Gc[Fh]=function(t,e,r,i,a,n,o){i.forEach((function(t,i){e[i]&&(t.v=a[i].v+e[i]*r)}))},Gc[Lh]=function(t,e,r,i,a,n,o){for(var s=0,l=Math.min(i.length,e.length);s<l;s++)if(e[s]){for(var h=0;h<4;h++)i[s][h].v=a[s][h].v+e[s][h]*r;for(var u=0;u<4;u++)i[s][4][u]=a[s][4][u]+e[s][4][u]*r}},Gc[Nh]=function(t,e,r,i,a,n,o){i.forEach((function(t,i){var n=e[i];n&&(t[0].v=a[i][0].v+n[0]*r,t[1].v=a[i][1].v+n[1]*r)}))},Gc[Kh]=Gc[jh]=function(t,e,r,i,a,n,o){i=a+e*r,t===Kh&&(i<0?i=0:i>1&&(i=1));o[t]=i},Gc[iu]=function(t,e,r,i,a,n,o){var s=1-r;8===e.length?(o[Bh]={v:e[0].v*s*s*s+3*e[2].v*r*s*s+3*e[4].v*r*r*s+e[6].v*r*r*r,u:Ku},o[Dh]={v:e[1].v*s*s*s+3*e[3].v*r*s*s+3*e[5].v*r*r*s+e[7].v*r*r*r,u:Ku}):6===e.length&&(o[Bh]={v:e[0].v*s*s+2*e[2].v*r*s+e[4].v*r*r,u:Ku},o[Dh]={v:e[1].v*s*s+3*e[3].v*r*s+e[5].v*r*r,u:Ku})},Gc[Hh]=Gc[cu]=Gc[_u]=Gc[fu]=Gc[vu]=Gc[yu]=Gc[du]=Gc[zh]=Gc[pu]=Gc[Xh]=Gc[Gh]=Gc[Yh]=Gc[Uh]=Gc[Vh]=Gc[xu]=Gc[gu]=Gc[mu]=Gc[bu]=Gc[Eu]=Gc[Mu]=Gc[Au]=Gc[Tu]=Gc[ou]=Gc[Ru]=Gc[Su]=Gc[wu]=Gc[Bh]=Gc[Dh]=Gc[Ph]=Gc[Cu]=Gc[ku]=Gc[Ou]=Gc[Iu]=Gc[Fu]=Gc[Lu]=Gc[Bu]=Gc[Du]=function(t,e,r,i,a,n,o){i.v=a+e*r},Gc[Pu]=Gc[Nu]=Gc[Hu]=function(t,e,r,i,a,n,o){i.forEach((function(t,i){var n=e[i];if(n){var o=a[i].v;if(t.u===ac){t=t.v;for(var s=u(n,4),l=s[0],h=s[1],c=s[2],_=s[3],f=0,v=Math.min(t.v.length,l.length);f<v;f++){var y=t.v[f],d=l[f];y[0][0]=o.v[f][0][0]+d[0][0]*r,y[0][1]=o.v[f][0][1]+d[0][1]*r,y[0][2]=o.v[f][0][2]+d[0][2]*r,y[0][3]=o.v[f][0][3]+d[0][3]*r,y[1]&&d[1]&&(y[1].v=o.v[f][1].v+d[1]*r)}"linear"===t.k&&void 0!==t.d&&void 0!==h?Array.isArray(h)?(t.d[0]=o.d[0]+h[0]*r,t.d[1]=o.d[1]+h[1]*r,t.d[2]=o.d[2]+h[2]*r,t.d[3]=o.d[3]+h[3]*r):t.d=o.d+h*r:"radial"===t.k?void 0!==t.z&&void 0!==_?(t.z[0]=o.z[0]+_[0]*r,t.z[1]=o.z[1]+_[1]*r,t.z[2]=o.z[2]+_[2]*r,t.z[3]=o.z[3]+_[3]*r,t.z[4]=o.z[4]+_[4]*r):void 0!==t.p&&void 0!==c&&(t.p[0].v=o.p[0].v+c[0]*r,t.p[1].v=o.p[1].v+c[1]*r):"conic"===t.k&&void 0!==t.d&&void 0!==h&&(t.d=o.d+h*r,t.p[0][0]=o.p[0]+c[0]*r,t.p[1][0]=o.p[1]+c[1]*r)}else(t=t.v)[0]=o[0]+n[0]*r,t[1]=o[1]+n[1]*r,t[2]=o[2]+n[2]*r,t[3]=o[3]+n[3]*r}}))},Gc[Gu]=Gc[Wu]=Gc[Yu]=Gc[Uu]=Gc[zu]=Gc[qh]=Gc[au]=function(t,e,r,i,a,n,o){var s=i.v;s[0]=a[0]+e[0]*r,s[1]=a[1]+e[1]*r,s[2]=a[2]+e[2]*r,s[3]=a[3]+e[3]*r};var zc=0,Xc=function(t){function e(e,r,i){var a;if((a=t.call(this)||this).__id=zc++,r=uc(r||[]),Array.isArray(r))r=r.filter((function(t){return t&&hc(t)}));else if(r&&hc(r)){var n=[];Object.keys(r).forEach((function(t){var e=r[t];if(Array.isArray(e))for(var i=0,a=e.length;i<a;i++){(n[i]=n[i]||{offset:i/(a-1)})[t]=e[i]}})),r=n}else r=[];lc(i)&&(a.__options={duration:i},i=a.__options);var o=a.__options=i||{duration:0};a.__begin=!0,a.__playState="idle",a.__target=e,a.__root=e.root,a.__isChange=!1,a.__firstPlay=!0,a.__firstEnter=!0;var s=a.iterations=o.iterations,l=a.duration=o.duration,h=a.__init(r,s,l,o.easing,e),u=h.frames,c=h.framesR,_=h.keys,f=h.originStyle;a.__frames=u,a.__framesR=c,a.__keys=_,a.__originStyle=f,a.__isDelay=!1,a.__outBeginDelay=!1,a.__playCount=0;var v=parseInt(o.fps)||0;return v<=0&&(v=60),a.fps=v,a.spfLimit=o.spfLimit,a.delay=o.delay,a.endDelay=o.endDelay,a.playbackRate=o.playbackRate,a.fill=o.fill,a.iterations=o.iterations,a.direction=o.direction,a.easing=o.easing,a.__currentFrames={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(o.direction)?c:u,a.__timestamp=dh.__now,a}return a(e,t),r(e,[{key:"__init",value:function(t,e,r,i,a){if(t.length<1)return{frames:[],framesR:[],keys:[],originStyle:{}};for(var n=function(e,r){var i=t[e];if(i.hasOwnProperty("offset")){if(i.offset=parseFloat(i.offset)||0,i.offset=Math.max(0,i.offset),i.offset=Math.min(1,i.offset),isNaN(i.offset)||i.offset<0||i.offset>1)return t.splice(e,1),e--,r--,o=e,s=r,"continue";if(i.offset<=-1)return t.splice(e,1),e--,r--,o=e,s=r,"continue"}Object.keys(i).forEach((function(t){mr.hasOwnProperty(t)&&mr.toFull(i,t)})),Object.keys(i).forEach((function(t){"easing"===t||"offset"===t||oa.isValid(a.tagName,t)||delete i[t]})),o=e,s=r},o=0,s=t.length;o<s;o++)n(o,s);if(1===t.length)if(t[0]=uc(t[0]),1===t[0].offset)t.unshift({offset:0});else{var l=uc(t[0]);l.offset=1,t.push(l)}else t.forEach((function(e,r){t[r]=uc(e)}));var h=t[0];h.hasOwnProperty("offset")&&h.offset>0?(h={offset:0},t.unshift(h)):h.offset=0;var u=t[t.length-1];u.hasOwnProperty("offset")&&u.offset<1?(u={offset:1},t.push(u)):u.offset=1;for(var c=1,_=t.length;c<_;c++){var f=t[c];if(!f.hasOwnProperty("offset")){for(var v=void 0,y=c+1;y<_&&!(v=t[y]).hasOwnProperty("offset");y++);var d=y-c+1;f=t[c-1];for(var p=(v.offset-f.offset)/d,x=c;x<y;x++){t[x].offset=f.offset+p*(x+1-c)}c=y}}var g=[];t.forEach((function(t){g.push(function(t,e,r){var i=t,a=i.offset,n=i.easing;delete t.offset,delete t.easing;var o=t.translatePath;return t=qn.normalize(t),Array.isArray(o)&&[6,8].indexOf(o.length)>-1&&(t[iu]=o.map((function(t){var e=nc(t);return e.u===Ju&&(e.u=Ku),e}))),{style:t,time:a*e,easing:n||r,timingFunction:Hc(n||r),transition:[],keys:[],fixed:[],lastPercent:-1}}(t,r,i))}));var m=function(t,e){var r={},i=[];return t.forEach((function(t){var e=t.style;Object.keys(e).forEach((function(t){void 0===e[t]||r.hasOwnProperty(t)||(r[t]=!0,dc.hasOwnProperty(t)||(t=parseInt(t)),t===iu&&(r.hasOwnProperty(Bh)||i.push(Bh),r.hasOwnProperty(Dh)||i.push(Dh),r[Bh]=r[Dh]=!0),i.push(t))}))})),t.forEach((function(t){var r=t.style;i.forEach((function(t){r.hasOwnProperty(t)&&!oc(r[t])||(dc.hasOwnProperty(t)?r[t]=uc(e.getProps(t)):t===Bh&&r.hasOwnProperty(iu)?r[t]=uc(r[iu][0]):t===Dh&&r.hasOwnProperty(iu)?r[t]=uc(r[iu][1]):r[t]=fc(e.__currentStyle,[t])[t])}))})),i}(g,a);!function(t,e,r){var i=r.__computedStyle;t.forEach((function(t){var a=t.style;e.forEach((function(t){var e=a[t];if(!oc(e))if(t===Zh){var n=r.__outerWidth,o=r.__outerHeight,s=Uo.calMatrix(e,n,o,r.__root);a[t]=[{k:eu,v:s}]}else e.u===Zu&&(t===qh||t===au?a[t]={v:H.rgba2int(i[t]),u:qu}:Oc(t)?a[t]={v:i[t],u:Ku}:t===$h?a[t]={v:i[t],u:Ju}:t!==Jh&&t!==Qh&&t!==tu&&t!==nu||(a[t]={v:i[t],u:$u}))})),t.clone=fc(a,null)}))}(g,m,a);var b=uc(g).reverse(),E=a.__currentStyle,M=a.__currentProps,A={};m.forEach((function(t){yc(a.tagName,t)&&(A[t]=M[t]),A[t]=E[t]})),A=fc(A,m);for(var T=g.length,R=g[0],S=1;S<T;S++){R=Nc(R,g[S],m,a)}b.forEach((function(t){t.time=r-t.time,t.transition=[]})),R=b[0];for(var w=1;w<T;w++){R=Nc(R,b[w],m,a)}return{frames:g,framesR:b,keys:m,originStyle:A}}},{key:"__clean",value:function(t){this.__cancelTask(),this.__nextTime=0,t?(this.__currentTime=this.__delay+this.__duration*this.__iterations+this.__endDelay,this.__playState="finished"):(this.__playCount=this.__currentTime=0,this.__playState="idle")}},{key:"play",value:function(t){var e=this.__isDestroyed,r=this.__duration,i=this.__playState,a=this.__frames;if(e||r<=0||a.length<1)return this;if("running"===i)return this;if(this.__cancelTask(),this.__playCb=t,this.__playState="running",this.__firstPlay=!0,this.__firstEnter=!0,this.__playCount=0,this.__hasFin=!1,this.__hasCancel=!1,!this.__enterFrame){this.__enterFrame=!0;var n=this.__framesR,o=this.__direction;this.__currentFrames={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(o)?n:a,this.__currentTime=this.__nextTime=this.__fpsTime=0}return dh.onFrame(this),this.__startTime=dh.__now,this.__end=!1,this}},{key:"__before",value:function(t){this.__timestamp=dh.__now;var e=this.__target,r=this.__fps,i=this.__currentFrames,a=this.__iterations,n=this.__stayBegin,o=this.__stayEnd,s=this.__delay,l=this.__root,h=this.__duration,u=this.__endDelay,c=i.length,_=this.__playbackRate,f=this.__spfLimit,v=this.__currentTime=this.__nextTime,y=this.__currentFrame;if(this.__isChange=!1,f&&(!0===f?t=Math.min(t,1e3/r):f>0&&(t=Math.min(t,f))),1!==_&&_>0&&(t*=_),this.__nextTime+=t,!this.__firstEnter&&r<60){if((t=this.__fpsTime+=t)<1e3/r)return void(this.__inFps=!0);this.__fpsTime=0}if(this.__firstEnter=!1,v<s){if(n&&!this.__isDelay){var d=this.__currentFrame=i[0],p=Wc(d.style,e,this.__keys),x=d.transition;if(x)for(var g=e.__currentStyle,m=0,b=x.length;m<b;m++){var E=x[m];E.cs=g[E.k]=E.st}this.__isChange=!!p.length,Lc(p,l,e,d,null)}return this.__begin=!1,this.__outBeginDelay=!0,void(this.__isDelay=!0)}this.__isDelay=!1,v-=s,this.__outBeginDelay&&(this.__outBeginDelay=!1,this.__begin=!0);var M=Math.min(a-1,Math.floor(v/h));if(v-=h*M,this.__playCount<M){this.__begin=!0,this.__playCount=M;var A=this.__direction,T=this.__frames,R=this.__framesR;if("alternate"===A||"alternate-reverse"===A){var S=M%2==0;i=this.__currentFrames="alternate"===A?S?T:R:S?R:T}}var w,C,k=M>=a-1;2===c?(w=v<h?0:1,C=h):(w=function(t,e,r,i){for(;t<e;){if(t===e-1)return i[e].time<=r?e:t;var a=t+(e-t>>1),n=i[a];if(n.time===r)return a;n.time>r?e=Math.max(a-1,t):t=Math.min(a,e)}return t}(0,c-1,v,i),C=i[w].time);var O=k&&w===c-1,I=0;if(O);else if(2===c)I=v/h;else{I=(v-C)/(i[w+1].time-C)}var F,L,B,D=i[w],P=y!==D;if(P&&(y&&(y.lastPercent=-1),this.__currentFrame=D),O?(F=v<h+u,o?B=Wc(D.style,e,this.__keys):(B=Wc(this.__originStyle,e,this.__keys),D=null),this.__nextEnd=!0,F||(this.__playCount++,this.__finished=!0,dh.offFrame(this),L=!0,this.__nextTime=0)):B=function(t,e,r,i){var a=t.style,n=t.transition,o=t.timingFunction,s=t.allInFn;if(o&&o!==_c&&(e=o(e)),t.lastPercent===e)return[];t.lastPercent=e;var l=r.__currentStyle,h=t.keys;if(s)for(var u=0,c=n.length;u<c;u++){var _=n[u],f=_.k,v=_.v,y=_.cs,d=_.cl,p=_.fn;i&&(y=_.cs=l[f]=_.st),p(f,v,e,y,d,t,l)}else{for(var x,g=r.__currentProps,m=function(a,o){var s=n[a],u=s.k,c=s.v,_=s.cs,f=s.st,v=s.cl,y=s.fn;if(y)i&&(_=s.cs=l[u]=s.st),y(u,c,e,_,v,t,l);else if(dc.hasOwnProperty(u)){var d=r.tagName;if(dc[u][d]&&sc(dc[u][d].calIncrease)){var p=dc[u][d].calIncrease;f=r.isMulti?f.map((function(t,r){return p(t,c[r],e)})):p(f,c,e)}else if(r.isMulti)if("points"===u||"controls"===u)for(var m=0,b=Math.min(f.length,c.length);m<b;m++){var E=f[m],M=c[m],A=v[m];if(!oc(E)&&!oc(M))for(var T=0,R=Math.min(E.length,M.length);T<R;T++){var S=E[T],w=M[T];if(!oc(S)&&!oc(w))for(var C=0,k=Math.min(S.length,w.length);C<k;C++)oc(S[C])||oc(w[C])||(S[C]=A[T][C]+w[C]*e)}}else"controlA"===u||"controlB"===u?c.forEach((function(t,r){var i=f[r];oc(t[0])||oc(i[0])||(i[0]=v[r][0]+t[0]*e),oc(t[1])||oc(i[1])||(i[1]=v[r][1]+t[1]*e)})):c.forEach((function(t,r){oc(t)||oc(f[r])||(f[r]=v[r]+t*e)}));else if("points"===u||"controls"===u)for(var O=0,I=Math.min(f.length,c.length);O<I;O++){var F=f[O],L=c[O];if(!oc(F)&&!oc(L))for(var B=0,D=Math.min(F.length,L.length);B<D;B++)oc(F[B])||oc(L[B])||(F[B]=v[O][B]+L[B]*e)}else"controlA"===u||"controlB"===u?(oc(f[0])||oc(c[0])||(f[0]=v[0]+c[0]*e),oc(f[1])||oc(c[1])||(f[1]=v[1]+c[1]*e)):oc(f)||oc(c)||(f=v+c*e);g[u]=f}else if(l[u]!==f)l[u]=f;else{x||(x=!0,h=h.slice(0));var P=h.indexOf(u);h.splice(P,1)}},b=0,E=n.length;b<E;b++)m(b);for(var M=t.fixed,A=0,T=M.length;A<T;A++){var R=M[A],S=dc.hasOwnProperty(R);vc(R,a[R],S?g[R]:l[R],r)||(dc.hasOwnProperty(R)?g[R]=a[R]:l[R]=a[R],x||(x=!0,h=h.slice(0)),h.push(R))}}return h}(D,I,e,P),this.__isChange=!B.length,Lc(B,l,e,D,null),L){var N=this.__playCb;this.__clean(!0),N&&(this.__playCb=N)}}},{key:"__after",value:function(){this.__inFps?this.__inFps=!1:(Uc(this),this.__begin&&(this.__begin=!1,this.emit(Fl.BEGIN,this.__playCount)),this.__nextEnd&&!this.__end&&(this.__end=!0,this.emit(Fl.END,this.__playCount-1)),this.__finished&&(this.__begin=this.__end=this.__isDelay=this.__finished=this.__inFps=this.__enterFrame=!1,this.__playState="finished",this.emit(Fl.FINISH,this.__isChange)))}},{key:"pause",value:function(t){var e=this.__isDestroyed,r=this.__duration,i=this.pending;return e||r<=0||i||(this.__playState="paused",this.__cancelTask(),t||this.emit(Fl.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__isDestroyed,r=this.__duration,i=this.__playState;return e||r<=0||"paused"!==i?this:this.play(t)}},{key:"finish",value:function(t){var e=this,r=this.__isDestroyed,i=this.__duration,a=this.__playState,n=this.__frames;if(r||i<=0||n.length<1)return this;if("finished"===a)return sc(t)&&t(),this;this.__clean(!0),this.__begin=this.__end=this.__isDelay=this.__finished=this.__inFps=this.__enterFrame=!1,this.__playState="finished";var o=this.__root;if(o){var s,l=this.__target,h=null;if(this.__stayEnd){var u=this.__framesR,c=this.__direction,_=this.__iterations;if("reverse".indexOf(c)>-1){var f=[u,n];n=f[0],u=f[1]}s=_===1/0||_%2?(h=n[n.length-1]).style:(h=u[u.length-1]).style}else s=this.__originStyle;this.__currentFrame=h;var v=Wc(s,l,this.__keys);this.__isChange=!v.length,Lc(v,o,l,h,(function(){Uc(e),e.emit(Fl.FINISH,e.__isChange),sc(t)&&t(e.__isChange)}))}return this}},{key:"cancel",value:function(t){var e=this,r=this.__isDestroyed,i=this.__duration,a=this.__playState,n=this.__frames;if(r||i<=0||n.length<1)return this;if("idle"===a)return sc(t)&&t(),this;this.__clean(),this.__begin=this.__end=this.__isDelay=this.__finished=this.__inFps=this.__enterFrame=!1,this.__playState="idle",this.__currentFrame=null;var o=this.__root;if(o){var s=this.__target,l=Wc(this.__originStyle,s,this.__keys);this.__isChange=!l.length,Lc(l,o,s,null,(function(){Uc(e),e.emit(Fl.CANCEL,e.__isChange),sc(t)&&t(e.__isChange)}))}return this}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__isDestroyed,a=this.__duration,n=this.__frames,o=this.__delay,s=this.__endDelay;if(i||a<=0||n.length<1)return this;var l=u(Yc(e,r),2);return e=l[0],r=l[1],this.__goto(t,e.isFrame,e.excludeDelay),t>a+o+s?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,a=this.__isDestroyed,n=this.__duration,o=this.__frames,s=this.__delay,l=this.__endDelay;if(a||n<=0||o.length<1)return this;var h=u(Yc(e,r),2);return e=h[0],r=h[1],(t=this.__goto(t,e.isFrame,e.excludeDelay))>n+s+l?this.finish(r):this.play((function(){i.__playState="paused",i.__cancelTask(),sc(r)&&r()}))}},{key:"__goto",value:function(t,e,r){var i=this.__iterations,a=this.__duration;if(this.__playState="paused",isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=this.__delay),this.__nextTime=t,t-=this.__delay;for(var n=0;t>=a&&n<i-1;)n++,t-=a;this.__playCount=n,this.__enterFrame=!0;var o=this.__frames,s=this.__framesR,l=this.__direction;if({alternate:!0,"alternate-reverse":!0}.hasOwnProperty(l)){var h=n%2==0;this.__currentFrames="alternate"===l?h?o:s:h?s:o}return t}},{key:"addControl",value:function(){var t=this.root;if(t){var e=t.animateController;e&&e.add(this)}}},{key:"removeControl",value:function(){var t=this.__root;if(t){var e=t.__animateController;e&&e.remove(this)}}},{key:"__setTarget",value:function(t){this.__target=t}},{key:"__cancelTask",value:function(){dh.offFrame(this),this.__playCb=null}},{key:"__destroy",value:function(){this.__isDestroyed||(this.removeControl(),this.__clean(),this.__target=this.__root=null,this.__startTime=0,this.__isDestroyed=!0)}},{key:"__checkModify",value:function(){"idle"!==this.__playState&&"finished"!==this.__playState&&$.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__target}},{key:"root",get:function(){return this.__root}},{key:"keys",get:function(){return this.__keys}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__duration},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__duration!==t&&(this.__duration=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__delay},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__delay!==t&&(this.__delay=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__endDelay},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__endDelay!==t&&(this.__endDelay=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__fps},set:function(t){return t=parseInt(t)||60,this.__fps!==t&&(t<=0&&(t=60),this.__fps=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__iterations},set:function(t){return t===1/0||H.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1)),this.__iterations!==t&&(this.__iterations=t),t}},{key:"fill",get:function(){return this.__fill},set:function(t){return t=t||"none",this.__fill!==t&&(this.__fill=t,this.__checkModify()),this.__stayBegin={backwards:!0,both:!0}.hasOwnProperty(t),this.__stayEnd={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__direction},set:function(t){return t=t||"normal",this.__direction!==t&&(this.__direction=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__frames}},{key:"framesR",get:function(){return this.__framesR}},{key:"playbackRate",get:function(){return this.__playbackRate},set:function(t){return(t=parseFloat(t)||1)<=0&&(t=1),this.__playbackRate!==t&&(this.__playbackRate=t),t}},{key:"easing",get:function(){return this.__easing},set:function(t){this.__easing=t}},{key:"startTime",get:function(){return this.__startTime}},{key:"currentTime",get:function(){return this.__currentTime},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__currentTime!==t&&(this.__currentTime=t,this.__nextTime=t),t}},{key:"nextTime",get:function(){return this.__nextTime},set:function(t){return t=Math.max(0,parseFloat(t)||0),this.__nextTime!==t&&(this.__nextTime=t),t}},{key:"timestamp",get:function(){return this.__timestamp}},{key:"pending",get:function(){return"running"!==this.__playState}},{key:"finished",get:function(){return"finished"===this.__playState}},{key:"playState",get:function(){return this.__playState}},{key:"playCount",get:function(){return this.__playCount},set:function(t){return t=Math.max(0,parseInt(t)||0),this.__playCount!==t&&(this.__playCount=t),t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}},{key:"animating",get:function(){var t=this.__playState;return"idle"!==t&&("finished"!==t||this.__stayEnd||this.__stayBegin)}},{key:"spfLimit",get:function(){return this.__spfLimit},set:function(t){return t=H.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t,this.__spfLimit!==t&&(this.__spfLimit=t),t}}]),e}(Fl),Vc=H.int2rgba,Kc=ce.canvasPolygon,jc=ce.svgPolygon;var Zc={renderBoxShadow:function(t,e,r,i,a,n,o,s,l,h){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,_=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;a+=c,n+=_,o+=c,s+=_;var f=u(i,6),v=f[0],d=f[1],p=f[2],x=f[3],g=f[4],m=f[5],b=Vc(g),E=2*Math.abs(p)+2*Math.abs(x)+2*Math.abs(v)+2*Math.abs(d),M=[[a,n],[o,n],[o,s],[a,s],[a,n]],A=[[a-E,n-E],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E]];if(g[3]>0)if(e===y.CANVAS||e===y.WEBGL){if(r.save(),r.beginPath(),"inset"===m){var T=a+v+x,R=n+d+x,S=o+v-x,w=s+d-x,C=[[T,R],[S,R],[S,w],[T,w]],k=se.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[C[0][0],C[0][1],C[2][0],C[2][1]]);if(!k)return;k=[[k[0],k[1]],[k[2],k[1]],[k[2],k[3]],[k[0],k[3]],[k[0],k[1]]],x?(Kc(r,k),Kc(r,M.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==b&&(r.fillStyle=b),Kc(r,M),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),Kc(r,k),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=b,r.shadowBlur=p,Kc(r,[[T,R],[S,R],[S,w],[a-E,w],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,w],[T,w],[T,R]])):(Kc(r,M),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=v,r.shadowOffsetY=d,r.shadowColor=b,r.shadowBlur=p,Kc(r,[[a,n],[o,n],[o,s],[a-E,s],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,s],[a,s],[a,n]]))}else{var O=a+v-x,I=n+d-x,F=o+v+x,L=s+d+x,B=[[O,I],[F,I],[F,L],[O,L]],D=se.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[B[0][0],B[0][1],B[2][0],B[2][1]]);x?(Kc(r,M),Kc(r,B.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==b&&(r.fillStyle=b),Kc(r,B),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),D&&Kc(r,[[D[0],D[1]],[D[2],D[1]],[D[2],D[3]],[D[0],D[3]],[D[0],D[1]]].reverse()),Kc(r,M),Kc(r,B),Kc(r,A),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=b,r.shadowBlur=p,Kc(r,B)):(Kc(r,M),Kc(r,A),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=v,r.shadowOffsetY=d,r.shadowColor=b,r.shadowBlur=p,Kc(r,M))}r.fill(),r.closePath(),r.restore()}else if(e===y.SVG){var P=ha.outerSize(p);if("inset"===m){var N=a+v+x,H=n+d+x,G=o+v-x,W=s+d-x,Y=[[N,H],[G,H],[G,W],[N,W]],U=se.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[Y[0][0],Y[0][1],Y[2][0],Y[2][1]]);if(!U)return;if(U=[[U[0],U[1]],[U[2],U[1]],[U[2],U[3]],[U[0],U[3]],[U[0],U[1]]],x){var z={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*p],["flood-color",b]]}]};t.__cacheDefs.push(z);var X=r.add(z),V={tagName:"clipPath",children:[{tagName:"path",props:[["d",jc(U)+jc(M.slice(0).reverse())],["fill","#FFF"]]}]},K=r.add(V);t.__cacheDefs.push(V),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jc(M)],["fill",b],["clip-path","url(#"+K+")"]]}),z={tagName:"clipPath",children:[{tagName:"path",props:[["d",jc(U)],["fill","#FFF"]]}]},K=r.add(z),t.__cacheDefs.push(z),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jc([[N,H],[G,H],[G,W],[a-E,W],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,W],[N,W],[N,H]])],["fill","#FFF"],["filter","url(#"+X+")"],["clip-path","url(#"+K+")"]]})}else{var j={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",v],["dy",d],["stdDeviation",.5*p],["flood-color",b]]}]},Z=r.add(j);t.__cacheDefs.push(j),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",jc(M)],["fill","#FFF"]]}]};var q=r.add(j);t.__cacheDefs.push(j),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jc([[a,n],[o,n],[o,s],[a-E,s],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,s],[a,s],[a,n]])],["fill","#FFF"],["filter","url(#"+Z+")"],["clip-path","url(#"+q+")"]]})}}else{var $=a+v-x,J=n+d-x,Q=o+v+x,tt=s+d+x,et=[[$,J],[Q,J],[Q,tt],[$,tt]],rt=se.getRectsIntersection([M[0][0],M[0][1],M[2][0],M[2][1]],[et[0][0],et[0][1],et[2][0],et[2][1]]);if(x){var it={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*p],["flood-color",b]]}]},at=r.add(it);t.__cacheDefs.push(it),it={tagName:"clipPath",children:[{tagName:"path",props:[["d",jc(M)+jc(et.slice(0).reverse())],["fill","#FFF"]]}]};var nt=r.add(it);t.__cacheDefs.push(it),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jc(et)],["fill",b],["clip-path","url(#"+nt+")"]]}),it={tagName:"clipPath",children:[{tagName:"path",props:[["d",(rt?jc([[rt[0],rt[1]],[rt[2],rt[1]],[rt[2],rt[3]],[rt[0],rt[3]],[rt[0],rt[1]]].reverse()):"")+jc(M)+jc(et)+jc(A)],["fill","#FFF"]]}]},nt=r.add(it),t.__cacheDefs.push(it),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jc(et)],["fill","#FFF"],["filter","url(#"+at+")"],["clip-path","url(#"+nt+")"]]})}else{var ot={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",v],["dy",d],["stdDeviation",.5*p],["flood-color",b]]}]},st=r.add(ot);t.__cacheDefs.push(ot),ot={tagName:"clipPath",children:[{tagName:"path",props:[["d",jc(M)+jc(A)],["fill","#FFF"]]}]};var lt=r.add(ot);t.__cacheDefs.push(ot),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",jc(M)],["fill","#FFF"],["filter","url(#"+st+")"],["clip-path","url(#"+lt+")"]]})}}}}},qc={};var $c=function(t){if(t)return qc.hasOwnProperty(t)?qc[t]:qc[t]=t.replace(/[A-Z]/,(function(t){return"-"+t.toLowerCase()}))},Jc=function(t){return"normal"!==t&&("multiply"===t||"screen"===t||"overlay"===t||"darken"===t||"lighten"===t||"colorDodge"===t||"color-dodge"===t||"colorBurn"===t||"color-burn"===t||"hardLight"===t||"hard-light"===t||"softLight"===t||"soft-light"===t||"difference"===t||"exclusion"===t||"hue"===t||"saturation"===t||"color"===t||"luminosity"===t)},Qc=ce.svgPolygon,t_=y.CANVAS,e_=y.SVG,r_=y.WEBGL,i_=qn.normalize,a_=qn.equalStyle,n_=Vt.STYLE_KEY,o_=Vt.STYLE_RV_KEY,s_=Vt.style2Upper,l_=Vt.STYLE_KEY,h_=l_.BORDER_TOP_LEFT_RADIUS,u_=l_.BORDER_TOP_RIGHT_RADIUS,c_=l_.BORDER_BOTTOM_LEFT_RADIUS,__=l_.BORDER_BOTTOM_RIGHT_RADIUS,f_=l_.PADDING_LEFT,v_=l_.PADDING_RIGHT,y_=l_.PADDING_TOP,d_=l_.PADDING_BOTTOM,p_=l_.MARGIN_LEFT,x_=l_.MARGIN_TOP,g_=l_.MARGIN_BOTTOM,m_=l_.MARGIN_RIGHT,b_=l_.BORDER_LEFT_WIDTH,E_=l_.BORDER_TOP_WIDTH,M_=l_.BORDER_BOTTOM_WIDTH,A_=l_.BORDER_RIGHT_WIDTH,T_=l_.TOP,R_=l_.RIGHT,S_=l_.BOTTOM,w_=l_.LEFT,C_=l_.POSITION,k_=l_.DISPLAY,O_=l_.WIDTH,I_=l_.HEIGHT,F_=l_.MATRIX,L_=l_.TRANSLATE_X,B_=l_.TRANSLATE_Y,D_=l_.TRANSLATE_Z,P_=l_.TRANSFORM,N_=l_.SCALE_X,H_=l_.SCALE_Y,G_=l_.SCALE_Z,W_=l_.ROTATE_X,Y_=l_.ROTATE_Y,U_=l_.ROTATE_Z,z_=l_.SKEW_X,X_=l_.SKEW_Y,V_=l_.PERSPECTIVE,K_=l_.PERSPECTIVE_ORIGIN,j_=l_.ROTATE_3D,Z_=l_.TRANSFORM_ORIGIN,q_=l_.BACKGROUND_POSITION_X,$_=l_.BACKGROUND_POSITION_Y,J_=l_.BACKGROUND_SIZE,Q_=l_.BACKGROUND_COLOR,tf=l_.BACKGROUND_IMAGE,ef=l_.BACKGROUND_REPEAT,rf=l_.BOX_SHADOW,af=l_.OPACITY,nf=l_.Z_INDEX,of=l_.BORDER_TOP_STYLE,sf=l_.BORDER_RIGHT_STYLE,lf=l_.BORDER_BOTTOM_STYLE,hf=l_.BORDER_LEFT_STYLE,uf=l_.FILTER,cf=l_.OVERFLOW,_f=l_.MIX_BLEND_MODE,ff=l_.TEXT_OVERFLOW,vf=l_.BORDER_TOP_COLOR,yf=l_.BORDER_BOTTOM_COLOR,df=l_.BORDER_LEFT_COLOR,pf=l_.BORDER_RIGHT_COLOR,xf=l_.FONT_STYLE,gf=l_.COLOR,mf=l_.VISIBILITY,bf=l_.POINTER_EVENTS,Ef=l_.BORDER_TOP,Mf=l_.BORDER_RIGHT,Af=l_.BORDER_BOTTOM,Tf=l_.BORDER_LEFT,Rf=l_.BACKGROUND_CLIP,Sf=l_.FONT_SIZE,wf=l_.FONT_FAMILY,Cf=l_.LINE_HEIGHT,kf=l_.TEXT_STROKE_COLOR,Of=l_.TEXT_STROKE_WIDTH,If=l_.TEXT_STROKE_OVER,Ff=l_.FONT_WEIGHT,Lf=l_.FLEX_DIRECTION,Bf=l_.JUSTIFY_CONTENT,Df=l_.ALIGN_ITEMS,Pf=l_.ALIGN_SELF,Nf=l_.FLEX_GROW,Hf=l_.FLEX_SHRINK,Gf=l_.LINE_CLAMP,Wf=l_.ORDER,Yf=l_.FLEX_WRAP,Uf=l_.ALIGN_CONTENT,zf=l_.TEXT_ALIGN,Xf=l_.LETTER_SPACING,Vf=l_.WHITE_SPACE,Kf=l_.WRITING_MODE,jf=d.AUTO,Zf=d.PX,qf=d.PERCENT,$f=d.INHERIT,Jf=d.NUMBER,Qf=d.RGBA,tv=d.STRING,ev=d.REM,rv=d.VW,iv=d.VH,av=d.VMAX,nv=d.VMIN,ov=d.DEG,sv=d.GRADIENT,lv=H.int2rgba,hv=H.rgba2int,uv=H.joinArr,cv=H.isNil,_v=H.isFunction,fv=qn.calRelative,vv=qn.calNormalLineHeight,yv=qn.calFontFamily,dv=qn.spreadBoxShadow,pv=qn.spreadFilter,xv=oa.GEOM,gv=$c,mv=Jc,bv=g.point2d,Ev=g.multiply,Mv=g.multiplyRotateX,Av=g.multiplyRotateY,Tv=g.multiplyRotateZ,Rv=g.multiplySkewX,Sv=g.multiplySkewY,wv=g.multiplyScaleX,Cv=g.multiplyScaleY,kv=g.multiplyScaleZ,Ov=Vs.TRANSFORM,Iv=Vs.REFLOW,Fv=Vs.REPAINT,Lv=Vs.TRANSLATE_X,Bv=Vs.TRANSLATE_Y,Dv=Vs.TRANSLATE_Z,Pv=Vs.ROTATE_Z,Nv=Vs.SCALE_X,Hv=Vs.SCALE_Y,Gv=Vs.SCALE_Z,Wv=Vs.SCALE,Yv=Vs.TRANSFORM_ALL,Uv=Vs.CACHE,zv=Vs.MASK,Xv=se.d2r,Vv=Uo.calRotateX,Kv=Uo.calRotateY,jv=Uo.calRotateZ,Zv=Uo.calRotate3d;function qv(t){for(var e=0,r=t.flowChildren,i=r.length,a=0;a<i;a++){var n=r[a];if(!(n instanceof Jv||n instanceof Nl&&n.shadowRoot instanceof Jv))break;if(n.flowChildren&&n.flowChildren.length){e+=qv(n);break}n.__isInline&&(e+=n.outerWidth)}return e}function $v(t){for(var e=0,r=t.flowChildren,i=r.length-1;i>=0;i--){var a=r[i];if(!(a instanceof Jv||a instanceof Nl&&a.shadowRoot instanceof Jv))break;if(a.flowChildren&&a.flowChildren.length){e+=$v(a);break}e+=a.outerWidth}return e}var Jv=function(e){function i(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r=e.call(this)||this,Array.isArray(i)?r.props=H.arr2hash(i):r.props=i,r.__tagName=t,r.__style=r.props.style||{},r.__currentStyle=[],r.__computedStyle=[],r.__listener={},Object.keys(r.props).forEach((function(t){var e=r.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),r.listener[t]=e)})),r.__animationList=[],r.__loadBgi={cb:function(){}},r.__cacheStyle=[],r.__cacheDefs=[];var a=r.__clip=!!r.props.clip;return r.__mask=a||!!r.props.mask,r.__refreshLevel=Iv,r.__limitCache=!1,r.__isInline=!1,r.__hasContent=!1,r.__opacity=1,r.__matrix=[],r.__matrixEvent=[],r.__perspectiveMatrix=null,r.__frameAnimateList=[],r.__contentBoxList=[],r.__cacheAsBitmap=!!r.props.cacheAsBitmap,r.__cache=r.__cacheTotal=r.__cacheFilter=r.__cacheMask,r.__layoutData=null,r.__hasComputeReflow=!1,r.__parentLineBox=null,r.__fontRegister={},r}return a(i,e),r(i,[{key:"__structure",value:function(t,e){var r=h(n(i.prototype),"__structure",this).call(this,t,e);return this.__hasMask&&(r.hasMask=this.__hasMask),r}},{key:"__modifyStruct",value:function(){}},{key:"__mp",value:function(t,e,r){var i=this;["Top","Right","Bottom","Left"].forEach((function(a){var n=n_[s_("margin"+a)],o=n_[s_("padding"+a)];e[n]=i.__calSize(t[n],r,!0),e[o]=i.__calSize(t[o],r,!0)}))}},{key:"__calSize",value:function(t,e,r){if(t.u===Zf)return t.v;if(t.u===qf){if(r)return t.v*e*.01}else{if(t.u===ev||t.u===ev)return t.v*this.__root.computedStyle[Sf];if(t.u===rv)return t.v*this.__root.width*.01;if(t.u===iv)return t.v*this.__root.height*.01;if(t.u===av)return t.v*Math.max(this.__root.width,this.__root.height)*.01;if(t.u===nv)return t.v*Math.min(this.__root.width,this.__root.height)*.01}return 0}},{key:"__computeReflow",value:function(){var t=this;if(!this.__hasComputeReflow){this.__hasComputeReflow=!0;var e=this.__currentStyle,r=this.__computedStyle,i=this.__domParent,a=!i,n=i&&i.__computedStyle;[Sf,wf,Ff,Kf].forEach((function(i){var o=e[i];if(i===wf)if(o.u===$f)r[i]=a?Dt.INHERIT[o_[i]]:n[i];else{r[i]=o.v;for(var s=o.v.split(/\s*,\s*/),l=0,h=s.length;l<h;l++){var u=s[l].replace(/^['"]/,"").replace(/['"]$/,"");if(St.hasRegister(u)&&(St.hasLoaded(u)||$.checkSupportFontFamily(u)))break;t.__fontRegister[u]=!0,St.onRegister(u,t)}}else o.u===$f?r[i]=a?Dt.INHERIT[o_[i]]:n[i]:o.u===qf?r[i]=a?Dt.INHERIT[o_[i]]:n[i]*o.v*.01:o.u===ev?r[i]=a?Dt.INHERIT[o_[i]]:t.root.computedStyle[Sf]*o.v:o.u===rv?r[i]=a?Dt.INHERIT[o_[i]]:.01*t.root.width*o.v:o.u===iv?r[i]=a?Dt.INHERIT[o_[i]]:.01*t.root.height*o.v:o.u===av?r[i]=a?Dt.INHERIT[o_[i]]:.01*Math.max(t.root.width,t.root.height)*o.v:o.u===nv?r[i]=a?Dt.INHERIT[o_[i]]:.01*Math.min(t.root.width,t.root.height)*o.v:r[i]=o.v})),[E_,A_,M_,b_].forEach((function(i){var a=e[i];r[i]=t.__calSize(a,0,!1)})),[C_,k_,Lf,Bf,Df,Pf,Nf,Hf,Gf,Wf,Yf,Uf,cf,ff].forEach((function(t){r[t]=e[t]})),n&&r[Kf]!==n[Kf]&&"inline"===r[k_]&&(r[k_]="inlineBlock"),("absolute"===r[C_]||n&&"flex"===n[k_])&&-1===["block","flex"].indexOf(r[k_])&&(r[k_]="block");var o=e[zf];o.u===$f?r[zf]=a?"left":n[zf]:r[zf]=o.v;var s=r[Sf],l=e[Cf];if(l.u===$f)if(a)r[Cf]=vv(r);else{for(var h,u=i;u&&(h=u.currentStyle[Cf]).u===$f;)u=u.domParent;[jf,$f].indexOf(h.u)>-1?r[Cf]=vv(r):h.u===Jf?r[Cf]=Math.max(h.v,0)*s:r[Cf]=n[Cf]}else if(l.u===Jf)r[Cf]=Math.max(l.v,0)*s||vv(r);else{var c=Math.max(this.__calSize(l,s,!0),0);r[Cf]=c||vv(r)}var _=e[Xf];_.u===$f?r[Xf]=a?0:n[Xf]:r[Xf]=this.__calSize(_,s,!0);var f=e[Vf];f.u===$f?r[Vf]=a?"normal":n[Vf]:r[Vf]=f.v;var v=e[O_],y=e[I_];if(this.__width=this.__height=0,v.u!==jf&&(this.__width=r[O_]=this.__calSize(v,a?this.__width:i.__width,!0)),y.u!==jf)this.__height=r[I_]=this.__calSize(y,a?this.__height:i.__height,!0);else if(u=this.__domParent){var d=u.__currentStyle,p=e[Pf];"flex"===d[k_]&&u.__height&&d[Lf].indexOf("row")>-1&&("stretch"===p||"stretch"===d[Df]&&"auto"===p)&&(this.__height=u.__height)}}}},{key:"__emitFontRegister",value:function(t){var e=this,r=e.__fontRegister;if(!e.__isDestroyed){delete r[t];var i=e.root,a=e.currentStyle;if(i){var n=a[wf];if(n.u!==$f)for(var o=n.v.split(/\s*,\s*/),s=0,l=o.length;s<l;s++){var h=o[s].replace(/^['"]/,"").replace(/['"]$/,"");if(h===t)return void(St.hasRegister(h)&&i.__addUpdate(e,null,Iv,null,null,null,null));if(St.hasRegister(h)&&(St.hasLoaded(h)||$.checkSupportFontFamily(h)))return}}}}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;cv(t)||(this.__width=r[O_]=t,this.__clientWidth=t+=r[f_]+r[v_],this.__offsetWidth=t+=r[b_]+r[A_],this.__outerWidth=t+r[p_]+r[m_]),cv(e)||(this.__height=r[I_]=e,this.__clientHeight=e+=r[y_]+r[d_],this.__offsetHeight=e+=r[E_]+r[M_],this.__outerHeight=e+r[x_]+r[g_])}},{key:"__addMBP",value:function(t,e,r,i,a,n){var o=r[p_],s=r[x_],l=r[m_],h=r[g_],u=r[f_],c=r[y_],_=r[v_],f=r[d_],v=i[E_],y=i[A_],d=i[M_],p=i[b_],x=this.__calSize(o,e,n)+this.__calSize(l,e,n)+this.__calSize(u,e,n)+this.__calSize(_,e,n)+p+y;if(t)a=a.map((function(t){return t+x}));else{var g=this.__calSize(s,e,n)+this.__calSize(h,e,n)+this.__calSize(c,e,n)+this.__calSize(f,e,n)+v+d;a=a.map((function(t){return t+g}))}return a}},{key:"__layout",value:function(t,e,r,i){this.__layoutFlow(t,e,r,i)}},{key:"__layoutFlow",value:function(t,e,r,i){this.__computeReflow();var a=this.__isDestroyed,n=this.__currentStyle,o=this.__computedStyle;this.__ellipsis&&(this.__ellipsis=null),this.__parentLineBox=null,this.__isIbFull=this.__isUprightIbFull=!1;var s=o[k_],l=o[C_];if(this.__layoutData={x:t.x,y:t.y,w:t.w,h:t.h,lx:t.lx,ly:t.ly,isUpright:t.isUpright,container:t.container},!e&&!r&&!i){this.clearCache(),this.__cacheStyle=[],this.__refreshLevel=Iv,this.__limitCache=!1,this.__isInline=!1;var h=this.next;if(!this.__mask&&h&&h.__mask){for(var u=0;h&&h.__mask;)u++,h=h.next;this.__hasMask=u}}if(a||"none"===s)return this.__x=t.x,this.__y=t.y,this.__layoutNone(),void(this.__hasComputeReflow=!1);"absolute"!==l&&this.__mp(n,o,t.w);var c=t.lineClampCount||0;if("flex"===s?(t.lineClampCount=0,this.__layoutFlex(t,e,r,i)):"inlineBlock"===s?(t.lineClampCount=0,this.__layoutInline(t,e,r,i)):"inline"===s?c=this.__layoutInline(t,e,r,i,!0):(t.lineClampCount=0,this.__layoutBlock(t,e,r,i)),!e&&!r&&!i){var _=this.__x,f=this.__y;if(this.__isInline||(_=this.__x1=_+o[p_],_=this.__x2=_+o[b_],_=this.__x3=_+o[f_],_=this.__x4=_+this.__width,_=this.__x5=_+o[v_],this.__x6=_+o[A_],f=this.__y1=f+o[x_],f=this.__y2=f+o[E_],f=this.__y3=f+o[y_],f=this.__y4=f+this.__height,f=this.__y5=f+o[d_],this.__y6=f+o[M_]),"relative"===l){var v=n[T_],y=n[R_],d=n[S_],p=n[w_],x=this.parent;if(v.u!==jf){var g=fv(n,T_,v,x);if(g&&(this.__offsetY(g,!0,null),this.__isInline)){var m,b=this.__contentBoxList;if(Array.isArray(b))b.forEach((function(t){var e=t.__parentLineBox;e&&e!==m&&(e.__oy+=g),m=e}))}o[T_]=g,o[S_]="auto"}else if(d.u!==jf){var E=fv(n,S_,d,x);if(E&&(this.__offsetY(-E,!0,null),this.__isInline)){var M,A=this.__contentBoxList;if(Array.isArray(A))A.forEach((function(t){var e=t.__parentLineBox;e&&e!==M&&(e.__oy-=E),M=e}))}o[S_]=E,o[T_]="auto"}else o[T_]=o[S_]="auto";if(p.u!==jf){var T=fv(n,w_,p,x,!0);T&&this.__offsetX(T,!0,null),o[w_]=T,o[R_]="auto"}else if(y.u!==jf){var R=fv(n,R_,y,x,!0);R&&this.__offsetX(-R,!0,null),o[R_]=R,o[w_]="auto"}else o[w_]=o[R_]="auto"}else"absolute"!==l&&(o[T_]=o[S_]=o[w_]=o[R_]="auto");o[O_]=this.__width,o[I_]=this.__height,"absolute"!==l&&this.__execAr(),this.__hasComputeReflow=!1}return c}},{key:"__layoutStyle",value:function(){var t=this.__currentStyle,e=this.__computedStyle,r=this.__cacheStyle;this.__calStyle(Vs.REFLOW,t,e,r),this.__calPerspective(t,e,r)}},{key:"__execAr",value:function(){var t=this.__animateRecords;if(t){this.__animateRecords=null,t.list.forEach((function(t){t.target.vd instanceof i&&(t.target=t.target.vd)}));var e=t.controller||this.root.animateController;t.options&&!1===t.options.autoPlay?(e.__records2=e.__records2.concat(t.list),e.init(e.__records2,e.list2)):(e.__records=e.__records.concat(t.list),e.__playAuto())}}},{key:"__layoutNone",value:function(){this.__computeReflow(),this.__computedStyle[k_]="none",this.__reset0(),this.__hasComputeReflow=!1}},{key:"__reset0",value:function(){var t=this.__computedStyle;t[x_]=t[m_]=t[g_]=t[p_]=t[E_]=t[A_]=t[M_]=t[b_]=t[y_]=t[v_]=t[d_]=t[f_]=t[O_]=t[I_]=this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=0}},{key:"__preLayout",value:function(t,e){var r=t.x,i=t.y,a=t.w,n=t.h,o=t.w2,s=t.h2,l=t.w3,h=t.h3,u=t.lx,c=t.ly,_=t.lineBoxManager,f=t.endSpace,v=void 0===f?0:f,y=t.isUpright,d=t.container;this.__x=r,this.__y=i;var p,x,g=this.currentStyle,m=this.computedStyle,b=g[O_],E=g[I_],M=m[C_],A=m[E_],T=m[A_],R=m[M_],S=m[b_],w=m[x_],C=m[m_],k=m[g_],O=m[p_],I=m[y_],F=m[v_],L=m[d_],B=m[f_],D=0===m[Kf].indexOf("vertical");if(void 0!==o?(p=!0,a=o):void 0!==l?(p=!0,a=l):b.u===jf||e||(p=!0,a="absolute"===M&&b.u===qf?this.__calSize(b,d.__clientWidth,!0):this.__calSize(b,a,!0)),void 0!==s)x=!0,n=s;else if(void 0!==h)x=!0,n=h;else if(E.u!==jf&&!e)if("absolute"===M&&E.u===qf)n=this.__calSize(E,d.__clientHeight,!0);else{var P=this.__domParent;E.u===qf?P.height&&(x=!0,n=this.__calSize(E,P.height||0,!0)):(x=!0,n=this.__calSize(E,n,!0))}e?D?i+=A+w+I:r+=S+O+B:(r+=S+O+B,i+=A+w+I),t.x=r,t.y=i;var N=0;return e&&(N=D?L+R+k:F+T+C),e||(b.u!==jf&&void 0===l||(a-=S+T+O+C+B+F),E.u!==jf&&void 0===h||(n-=A+R+w+k+I+L)),{fixedWidth:p,fixedHeight:x,x:r,y:i,w:a,h:n,lx:u,ly:c,lineBoxManager:_,endSpace:v,selfEndSpace:N,isParentVertical:y,isUpright:D}}},{key:"__marginAuto",value:function(t,e,r){var i=t[C_],a=t[k_],n=t[x_],o=t[g_],s=t[p_],l=t[m_],h=t[O_],u=t[I_];if("absolute"!==i&&("block"===a||"flex"===a))if(r){if((u.u!==jf||this.isReplaced)&&n.u===jf&&o.u===jf){var c=this.outerHeight;c<e.h&&this.__offsetY(.5*(e.h-c),!0,null)}}else if((h.u!==jf||this.isReplaced)&&s.u===jf&&l.u===jf){var _=this.outerWidth;_<e.w&&this.__offsetX(.5*(e.w-_),!0,null)}}},{key:"__calMatrix",value:function(t,e,r,i,a){var n=this,o=this.__x1,s=this.__y1,l=this.__offsetWidth,h=this.__offsetHeight;if(this.__isInline)return r[Z_]=[o,s],i[F_]=this.__matrix=g.identity();var u=i[F_];if(cv(a)&&u&&t<Iv&&!(t&Ov)&&(t&Nv&&!r[N_]||t&Hv&&!r[H_]||t&Gv&&!r[G_]||t&Pv&&(r[W_]||r[Y_]||r[z_]||r[X_])||(a=!0)),a&&u){var c=r[P_];if(t&Lv){var _=e[L_],f=(_=_?_.u===Zf?_.v:this.__calSize(_,this.__offsetWidth,!0):0)-r[L_];r[L_]=_,c[12]+=f,u[12]+=f}if(t&Bv){var v=e[B_],y=(v=v?v.u===Zf?v.v:this.__calSize(v,this.__offsetHeight,!0):0)-r[B_];r[B_]=v,c[13]+=y,u[13]+=y}if(t&Dv){var d=e[D_],p=(d=d?d.u===Zf?d.v:this.__calSize(d,this.__offsetWidth,!0):0)-r[D_];r[D_]=d,c[14]+=p,u[14]+=p}if(t&Pv){var x=e[U_].v;r[U_]=x,x=Xv(x);var m=Math.sin(x),b=Math.cos(x),E=r[N_],M=r[H_],A=u[0]=c[0]=b*E,T=u[1]=c[1]=m*E,R=u[4]=c[4]=-m*M,S=u[5]=c[5]=b*M,w=r[Z_],C=w[0],k=w[1];C+=o,k+=s,u[12]=c[12]+C-A*C-k*R,u[13]=c[13]+k-T*C-k*S}if(t&Wv){if(t&Nv){if(!r[N_])return this.__calMatrix(Iv,e,r,i,!1);var O=e[N_].v,I=O/r[N_];r[N_]=O,c[0]*=I,c[1]*=I,c[2]*=I,u[0]*=I,u[1]*=I,u[2]*=I}if(t&Hv){if(!r[H_])return this.__calMatrix(t,e,r,i,!1);var F=e[H_].v,L=F/r[H_];r[H_]=F,c[4]*=L,c[5]*=L,c[6]*=L,u[4]*=L,u[5]*=L,u[6]*=L}if(t&Gv){if(!r[G_])return this.__calMatrix(t,e,r,i,!1);var B=e[G_].v,D=B/r[G_];r[G_]=B,c[8]*=D,c[9]*=D,c[10]*=D,u[8]*=D,u[9]*=D,u[10]*=D}var P=r[Z_],N=P[0],H=P[1];N+=o,H+=s,u[12]=c[12]+N-c[0]*N-c[4]*H,u[13]=c[13]+H-c[1]*N-c[5]*H,u[14]=c[14]-c[2]*N-c[6]*H}}else{if(void 0===i[Z_]&&(i[Z_]=!0,u=null,r[Z_]=e[Z_].map((function(t,e){return n.__calSize(t,e?h:l,!0)}))),void 0===i[P_]||void 0===i[L_]||void 0===i[B_]||void 0===i[D_]||void 0===i[W_]||void 0===i[Y_]||void 0===i[U_]||void 0===i[j_]||void 0===i[N_]||void 0===i[H_]||void 0===i[G_]||void 0===i[z_]||void 0===i[X_]){var G;if(i[P_]=i[L_]=i[B_]=i[D_]=i[W_]=i[Y_]=i[U_]=i[N_]=i[H_]=i[G_]=i[z_]=i[X_]=!0,u=null,e[P_]&&e[P_].length)G=Uo.calMatrix(e[P_],l,h,this.__root);else{r[L_]=0;var W=e[L_];W&&(W=r[L_]=this.__calSize(W,this.__offsetWidth,!0))&&((G=G||g.identity())[12]=W),r[B_]=0,(W=e[B_])&&(W=r[B_]=this.__calSize(W,this.__offsetHeight,!0))&&((G=G||g.identity())[13]=W),r[D_]=0,(W=e[D_])&&(W=r[D_]=this.__calSize(W,this.__offsetWidth,!0))&&((G=G||g.identity())[14]=W),r[W_]=0,(W=e[W_])&&(W=r[W_]=W.v)&&(G=(G=G||g.identity())?Mv(G,Xv(W)):Vv(g.identity(),W)),r[Y_]=0,(W=e[Y_])&&(W=r[Y_]=W.v)&&(G=G?Av(G,Xv(W)):Kv(g.identity(),W)),r[U_]=0,(W=e[U_])&&(W=r[U_]=W.v)&&(G=G?Tv(G,Xv(W)):jv(g.identity(),W)),r[j_]=[0,0,0,0],(W=e[j_])&&((W=r[j_]=[W[0],W[1],W[2],W[3].v])[0]||W[1]||W[2])&&W[3]&&(G=G?Ev(G,Zv(g.identity(),W)):Zv(g.identity(),W)),r[z_]=0,(W=e[z_])&&(W=r[z_]=W.v)&&(G?G=Rv(G,Xv(W)):(G=g.identity())[4]=Math.tan(Xv(W))),r[X_]=0,(W=e[X_])&&(W=r[X_]=W.v)&&(G?G=Sv(G,Xv(W)):(G=g.identity())[1]=Math.tan(Xv(W))),r[N_]=1,(W=e[N_])&&1!==(W=r[N_]=W.v)&&(G?G=wv(G,W):(G=g.identity())[0]=W),r[H_]=1,(W=e[H_])&&1!==(W=r[H_]=W.v)&&(G?G=Cv(G,W):(G=g.identity())[5]=W),r[G_]=1,(W=e[G_])&&1!==(W=r[G_]=W.v)&&(G?G=kv(G,W):(G=g.identity())[10]=W)}r[P_]=G||g.identity()}if(!u){var Y=r[P_],U=r[Z_];u=i[F_]=Uo.calMatrixByOrigin(Y,U[0]+o,U[1]+s)}}return this.__matrix=u}},{key:"__calStyle",value:function(t,e,r,i){var a=this,n=this.__x1,o=this.__x2,s=this.__x3,l=this.__x4,h=this.__x5,u=this.__x6,c=this.__y1,_=this.__y2,f=this.__y3,v=this.__y4,y=this.__y5,d=this.__y6;this.__bbox=null;var p=n,x=c,g=u,m=d,b=r[Rf]=e[Rf];"paddingBox"===b?(p=o,x=_,g=h,m=y):"contentBox"===b&&(p=s,x=f,g=l,m=v);var E=this.__isInline;if(E&&!this.__contentBoxList.length&&(E=!1),[af,nf,of,sf,lf,hf,ef,cf,_f,ff,Rf].forEach((function(t){r[t]=e[t]})),cv(i[uf])&&this.__calFilter(e,r,i),(cv(i[F_])||t&Yv)&&this.__calMatrix(t,e,r,i,!1),cv(i[q_])){i[q_]=!0;var M=e[q_];r[q_]=(M||[]).map((function(t){return t.u===qf?t.v+"%":a.__calSize(t,g-p,!0)}))}if(cv(i[$_])){i[$_]=!0;var A=e[$_];r[$_]=(A||[]).map((function(t){return t.u===qf?t.v+"%":a.__calSize(t,m-x,!0)}))}if(cv(i[J_])&&(i[J_]=!0,r[J_]=(e[J_]||[]).map((function(t){if(Array.isArray(t))return t.map((function(t,e){return t.u===jf?-1:t.u===tv?"contain"===t.v?-2:-3:a.__calSize(t,e?m-x:g-p,!0)}))}))),cv(i[tf])){var T=e[tf];r[tf]=T.map((function(t){return t?t.v:null})),i[tf]=T.map((function(t,e){if(!t)return null;if(t.u===tv){var r=a.__loadBgi[e]=a.__loadBgi[e]||{},n=$.IMG[t.v];if(n&&n.state===$.LOADED)r.url=t.v,r.source=n.source,r.width=n.width,r.height=n.height;else if(r.url!==t.v){r.url=t.v,r.source=null;var o=a,s=a.__root;a.ctx,$.measureImg(t.v,(function(t){t.success&&t.url===r.url&&!a.isDestroyed&&(r.source=t.source,r.width=t.width,r.height=t.height,i[tf]=void 0,s.__addUpdate(o,null,Fv,null,null,null,null))}))}return!0}return!(E||!t.v||t.u!==sv)||void 0}))}cv(i[rf])&&(i[rf]=!0,r[rf]=(e[rf]||[]).map((function(t){return t.map((function(t,e){return e>3?t:a.__calSize(t,0===e?g-p:m-x,!0)}))}))),[Q_,vf,pf,yf,df].forEach((function(t){cv(i[t])&&(i[t]=lv(r[t]=e[t].v))})),(cv(i[h_])||cv(i[u_])||cv(i[__])||cv(i[c_]))&&(i[h_]=i[u_]=i[__]=i[c_]=!0,E?qe.calBorderRadiusInline(this.__contentBoxList,e,r,this.__root):qe.calBorderRadius(this.__offsetWidth,this.__offsetHeight,e,r,this.__root));var R=r[h_],S=r[u_],w=r[__],C=r[c_],k=r[E_],O=r[A_],I=r[M_],F=r[b_];["Top","Right","Bottom","Left"].forEach((function(t){var e=n_[s_(t="border"+t)],a=n_[s_(t+"Width")],s=n_[s_(t+"Style")];if(cv(i[a])&&(i[a]=!0,i[e]=void 0),cv(i[s])&&(i[s]=!0,i[e]=void 0),cv(i[e]))if(e===Ef)if(k>0){if(!E){var l=Math.atan(k/F),f=Math.atan(k/O);i[e]=qe.calPoints(k,r[s],l,f,n,o,h,u,c,_,y,d,0,R,S)}}else i[e]=[];else if(e===Mf)if(O>0){if(!E){var v=Math.atan(O/k),p=Math.atan(O/I);i[e]=qe.calPoints(O,r[s],v,p,n,o,h,u,c,_,y,d,1,S,w)}}else i[e]=[];else if(e===Af)if(I>0){if(!E){var x=Math.atan(I/F),g=Math.atan(I/O);i[e]=qe.calPoints(I,r[s],x,g,n,o,h,u,c,_,y,d,2,C,w)}}else i[e]=[];else if(e===Tf)if(F>0){if(!E){var m=Math.atan(F/k),b=Math.atan(F/I);i[e]=qe.calPoints(F,r[s],m,b,n,o,h,u,c,_,y,d,3,R,C)}}else i[e]=[]}));var L=this.__domParent,B=L&&L.__computedStyle;e[xf].u===$f?r[xf]=L?B[xf]:"normal":cv(i[xf])&&(r[xf]=e[xf].v),i[xf]=r[xf];var D=e[gf];if(D.u===$f){var P=r[gf]=L?B[gf]:hv(Dt.INHERIT.color);P.k?i[gf]=P:i[gf]=lv(r[gf])}else cv(i[gf])&&(D.u===sv?i[gf]=r[gf]=D.v:i[gf]=lv(r[gf]=hv(D.v)));var N=e[kf];if(N.u===$f){var H=r[kf]=L?B[kf]:hv(Dt.INHERIT.textStrokeColor);H.k?i[kf]=H:i[kf]=lv(r[kf])}else cv(i[kf])&&(N.u===sv?i[kf]=r[kf]=N.v:N.u===Qf&&(i[kf]=lv(r[kf]=hv(N.v))));if(e[Of].u===$f)r[Of]=L?B[Of]:Dt.INHERIT.textStrokeWidth,i[Of]=!0;else if(cv(i[Of])){var G=e[Of];G=G.u===ev?G.v*this.__root.__computedStyle[Sf]:G.u===rv?G.v*this.__root.width*.01:G.u===iv?G.v*this.__root.height*.01:G.u===av?G.v*Math.max(this.__root.width,this.__root.height)*.01:G.u===nv?G.v*Math.min(this.__root.width,this.__root.height)*.01:G.v,r[Of]=G,i[Of]=!0}return e[If].u===$f?i[If]=r[If]=L?B[If]:Dt.INHERIT.textStrokeOver:i[If]=r[If]=e[If].v,e[mf].u===$f?r[mf]=L?B[mf]:"visible":cv(i[mf])&&(r[mf]=e[mf].v),i[mf]=r[mf],e[bf].u===$f?r[bf]=L?B[bf]:"auto":cv(i[bf])&&(r[bf]=e[bf].v),i[bf]=r[bf],this.__bx1=p,this.__bx2=g,this.__by1=x,this.__by2=m,[p,x,g,m]}},{key:"__calPerspective",value:function(t,e,r){var i,a=this;this.__perspectiveMatrix=null;var n=this.__x1,o=this.__y1;if(cv(r[V_])){r[V_]=!0,i=!0;var s=t[V_];e[V_]=this.__calSize(s,this.clientWidth,!0)}cv(r[K_])&&(r[K_]=!0,i=!0,e[K_]=t[K_].map((function(t,e){return a.__calSize(t,e?a.__offsetHeight:a.__offsetWidth,!0)})));var l=e[V_];if(i&&l){var h=e[K_];this.__perspectiveMatrix=Uo.calPerspectiveMatrix(l,h[0]+n,h[1]+o)}return this.__perspectiveMatrix}},{key:"__calFilter",value:function(t,e,r){var i=this;return r[uf]=!0,this.__filterBbox=null,e[uf]=(t[uf]||[]).map((function(t){var e=t.k,r=t.v;return"dropShadow"===e?{k:e,v:r.map((function(t,e){return e>3?t:i.__calSize(t,0===e?i.__bx2-i.__bx1:i.__by2-i.__by1,!0)}))}:{k:e,v:r=r.u===ov||r.u===Jf||r.u===qf?r.v:i.__calSize(r,i.root.width,!0)}}))}},{key:"__calOffscreen",value:function(t,e){var r,i,a,n,o=this.__root,s=o.width,l=o.height,h=t,u=e[_f],c=e[uf],_=e[cf],f=e[k_];if("normal"!==u&&mv(u)){u=gv(u);var v=$.getOffscreenCanvas(s,l,null,"blend");r={ctx:t,target:v,mixBlendMode:u},t=v.ctx}if(this.__hasMask){var y=$.getOffscreenCanvas(s,l,null,"mask1");i={ctx:t,target:y},t=y.ctx}if(c&&c.length){var d=$.getOffscreenCanvas(s,l,null,"filter");a={ctx:t,filter:c,target:d},t=d.ctx}if("hidden"===_&&"inline"!==f){var p=$.getOffscreenCanvas(s,l,null,"overflow"),x=this.__bx1,g=this.__bx2,m=this.__by1,b=this.__by2,E=e[h_],M=e[u_],A=e[__],T=e[c_],R=e[Rf],S=e[b_],w=e[A_],C=e[E_],k=e[M_],O=e[y_],I=e[v_],F=e[d_],L=e[f_],B=E.slice(0),D=M.slice(0),P=A.slice(0),N=T.slice(0);"paddingBox"===R?(B[0]-=S,B[1]-=C,D[0]-=w,D[1]-=C,P[0]-=w,P[1]-=k,N[0]-=S,N[1]-=k):"contentBox"===R&&(B[0]-=S+L,B[1]-=C+O,D[0]-=w+I,D[1]-=C+O,P[0]-=w+I,P[1]-=k+F,N[0]-=S+L,N[1]-=k+F);var H=qe.calRadius(x,m,g-x,b-m,B,D,P,N);n={ctx:t,target:p,matrix:this.__matrixEvent,x:this.__x1,y:this.__y1,offsetWidth:this.__offsetWidth,offsetHeight:this.__offsetHeight,borderList:H},t=p.ctx}if(h!==t)return{ctx:t,offscreenBlend:r,offscreenMask:i,offscreenFilter:a,offscreenOverflow:n}}},{key:"calContent",value:function(t,e){if("hidden"!==t[mf]){var r=t[tf];if(Array.isArray(r))for(var i=0,a=r.length;i<a;i++)if(r[i])return this.__hasContent=!0;if(t[Q_].v[3]>0){var n=e[O_],o=e[I_],s=e[y_],l=e[v_],h=e[d_],u=e[f_];if(n&&o||s||l||h||u)return this.__hasContent=!0}for(var c=["Top","Right","Bottom","Left"],_=0,f=c.length;_<f;_++){var v=c[_];if(e[n_[s_("border"+v+"Width")]]>0&&t[n_[s_("border"+v+"Color")]].v[3]>0)return this.__hasContent=!0}var y=t[rf];if(Array.isArray(y))for(var d=0,p=y.length;d<p;d++){var x=y[d];if(x&&x[4][3]>0)return this.__hasContent=!0}}return this.__hasContent=!1}},{key:"render",value:function(e,r){var i,a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=this.__isDestroyed,l=this.__cacheStyle,h=this.__computedStyle;if(s)return{isDestroyed:s,break:!0};e===e_&&(i=this.__virtualDom={bb:[],children:[],visibility:"visible"});var c=h[k_];if("none"===c)return{break:!0};var _=this.__x1,f=this.__x2,v=this.__x3,y=this.__x4,d=this.__x5,p=this.__x6,x=this.__y1,m=this.__y2,b=this.__y3,E=this.__y4,M=this.__y5,A=this.__y6,T=this.__bx1,R=this.__bx2,S=this.__by1,w=this.__by2,C={ctx:r,dx:n,dy:o,x1:_,x2:f,x3:v,x4:y,x5:d,x6:p,y1:x,y2:m,y3:b,y4:E,y5:M,y6:A,bx1:T,bx2:R,by1:S,by2:w};if(e===r_)return C;var k=this.__offsetWidth,O=this.__offsetHeight,I=h[y_],F=h[v_],L=h[d_],B=h[f_],D=h[b_],P=h[A_],N=h[E_],G=h[M_],W=this.__isInline,Y=this.__matrix,U=h[Q_],z=h[vf],X=h[pf],V=h[yf],K=h[df],j=h[h_],Z=h[u_],q=h[__],J=h[c_],Q=h[mf],tt=h[ef],et=h[tf],rt=h[af],it=h[uf],at=h[J_],nt=h[rf],ot=h[cf],st=h[_f],lt=h[Rf],ht=h[Kf],ut=0===ht.indexOf("vertical");e===e_&&(1===rt?delete i.opacity:i.opacity=rt),e===e_&&(g.isE(Y)?delete i.transform:i.transform="matrix("+uv(g.m2m6(Y),",")+")",i.visibility=Q),e===e_&&("normal"!==st&&mv(st)?(st=gv(st),i.mixBlendMode=st):delete i.mixBlendMode,it&&it.length?i.filter=ce.svgFilter(it):delete i.filter);var ct,_t=j.slice(0),ft=Z.slice(0),vt=q.slice(0),yt=J.slice(0);if("paddingBox"===lt?(_t[0]-=D,_t[1]-=N,ft[0]-=P,ft[1]-=N,vt[0]-=P,vt[1]-=G,yt[0]-=D,yt[1]-=G):"contentBox"===lt&&(_t[0]-=D+B,_t[1]-=N+I,ft[0]-=P+F,ft[1]-=N+I,vt[0]-=P+F,vt[1]-=G+L,yt[0]-=D+B,yt[1]-=G+L),"hidden"===ot&&"inline"!==c){if(ct=qe.calRadius(T,S,R-T,w-S,_t,ft,vt,yt),e===e_){var dt=Qc(ct)||"M".concat(_,",").concat(x,"L").concat(_+k,",").concat(x,"L").concat(_+k,",").concat(x+O,"L").concat(_,",").concat(x+O,",L").concat(_,",").concat(x),pt={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",dt]]}]},xt=r.add(pt);this.__cacheDefs.push(pt),i.overflow="url(#"+xt+")"}}else e===e_&&delete i.overflow;if(("hidden"===Q||C.break)&&(e===t_||e===r_))return C.break=!0,C;if(W){var gt=this.contentBoxList,mt=gt.length;gt[mt-1]instanceof bs&&mt--;var bt=et.some((function(t){return t}));if(mt){var Et=function(){var t,s=h[Sf],c=h[wf],_=h[Cf],f=0,v=0,y=[];if(bt){if(f=Jl.getInlineWidth(a,gt,ut),v=_,ut){var d=[v,f];f=d[0],v=d[1]}"paddingBox"===lt||"padding-box"===lt?ut?(f+=I+L,v+=B+F):(f+=B+F,v+=I+L):"contentBox"!==lt&&"content-box"!==lt&&(ut?(f+=I+L+N+G,v+=B+F+D+P):(f+=B+F+D+P,v+=I+L+N+G)),e!==t_&&e!==r_||(t=$.getOffscreenCanvas(f,v,"__$$INLINE_BGI$$__",null));var p=et.length;et.slice(0).reverse().forEach((function(i,s){if(i)if(s=p-1-s,H.isString(i)){var l=a.__loadBgi[s];if(l.url===i){var u=fh.renderImage(a,e,t&&t.ctx||r,l,0,0,f,v,_t,ft,vt,yt,h,s,at,tt,!0,n,o);e===e_&&u&&y.push(u)}}else if(i.k){var c=a.__gradient(e,r,0,0,f,v,i,n,o);if(c)if("conic"===c.k)pr.renderConic(a,e,t&&t.ctx||r,c.v,0,0,f,_,_t,ft,vt,yt,!0);else{var d=fh.renderBgc(a,e,t&&t.ctx||r,c.v,null,0,0,f,v,_t,ft,vt,yt,"fill",!0);e===e_&&d&&y.push(d)}}}))}for(var x=s*((St.info[yv(c)]||{}).lgr||0)*.5,g=ut?qn.getVerticalBaseline(h):qn.getBaseline(h),m=!0,b=gt[0],E=b.parentLineBox,M=0,A=0;A<mt;A++){var T=gt[A];T.parentLineBox!==E&&function(){var s=u(Jl.getInlineBox(a,ut,gt,b,gt[A-1],E,g,_,x,m,!1,lt,I,F,L,B,N,P,G,D),8),c=s[0],d=s[1],p=s[2],R=s[3],S=s[4],w=s[5],C=s[6],k=s[7];if(m){var O=qv(a);c-=O,S-=O}U[3]>0&&fh.renderBgc(a,e,r,l[Q_],null,c,d,p-c,R-d,_t,[0,0],[0,0],yt,"fill",!1,n,o);var H=p-c,W=R-d;if(e!==t_&&e!==r_||!t?e===e_&&y.length&&y.forEach((function(t){if(t){var e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ut?"M".concat(0,",",M,"L").concat(v,",").concat(M,"L").concat(v,",").concat(W+M,"L",0,",").concat(W+M,",L",0,",").concat(M):"M".concat(M,",",0,"L").concat(H+M,",",0,"L").concat(H+M,",").concat(v,"L").concat(M,",").concat(v,",L").concat(M,",",0)]]}]},n=r.add(e);a.__cacheDefs.push(e),i.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",ut?c:c-M],["y",ut?d-M:d],["clip-path","url(#"+n+")"]]})}})):ut?r.drawImage(t.canvas,0,M,f,W,c+n,d+o,f,W):r.drawImage(t.canvas,M,0,H,v,c+n,d+o,H,v),M+=ut?W:H,nt&&nt.forEach((function(t){Zc.renderBoxShadow(a,e,r,t,S,w,C,k,C-S,k-w,n,o)})),N>0&&z[3]>0){var Y=Math.atan(N/D),X=Math.atan(N/P),j=qe.calPoints(N,h[of],Y,X,S,S+D,C,C,w,w+N,k-G,k,0,m?_t:[0,0],[0,0]);qe.renderBorder(a,e,r,j,l[vf],n,o)}if(G>0&&V[3]>0){var Z=Math.atan(G/D),q=Math.atan(G/P),$=qe.calPoints(G,h[lf],Z,q,S,S+D,C,C,w,w+N,k-G,k,2,m?_t:[0,0],[0,0]);qe.renderBorder(a,e,r,$,l[yf],n,o)}if(m&&D>0&&K[3]>0){var J=Math.atan(D/N),Q=Math.atan(D/G),tt=qe.calPoints(D,h[hf],J,Q,S,S+D,C-P,C,w,w+N,k-G,k,3,_t,ft);qe.renderBorder(a,e,r,tt,l[df],n,o)}m=!1,b=T,E=T.parentLineBox}(),A===mt-1&&function(){var s=u(Jl.getInlineBox(a,ut,gt,b,gt[A],E,g,_,x,m,!0,lt,I,F,L,B,N,P,G,D),8),c=s[0],d=s[1],p=s[2],T=s[3],R=s[4],S=s[5],w=s[6],C=s[7];if(m){var k=qv(a);c-=k,R-=k}var O=$v(a);p+=O,w+=O,U[3]>0&&fh.renderBgc(a,e,r,l[Q_],null,c,d,p-c,T-d,m?_t:[0,0],ft,vt,m?yt:[0,0],"fill",!1,n,o);var H=p-c,W=T-d;if(e!==t_&&e!==r_||!t?e===e_&&y.length&&y.forEach((function(t){if(t){var e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",ut?"M".concat(0,",",M,"L").concat(v,",").concat(M,"L").concat(v,",").concat(W+M,"L",0,",").concat(W+M,",L",0,",").concat(M):"M".concat(M,",",0,"L").concat(H+M,",",0,"L").concat(H+M,",").concat(v,"L").concat(M,",").concat(v,",L").concat(M,",",0)]]}]},n=r.add(e);a.__cacheDefs.push(e),i.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",ut?c:c-M],["y",ut?d-M:d],["clip-path","url(#"+n+")"]]})}})):ut?r.drawImage(t.canvas,0,M,f,W,c+n,d+o,f,W):r.drawImage(t.canvas,M,0,H,v,c+n,d+o,H,v),nt&&nt.forEach((function(t){Zc.renderBoxShadow(a,e,r,t,R,S,w,C,w-R,C-S,n,o)})),N>0&&z[3]>0){var Y=Math.atan(N/D),j=Math.atan(N/P),Z=qe.calPoints(N,h[of],Y,j,R,R,w-P,w,S,S+N,C-G,C,0,m?_t:[0,0],ft);qe.renderBorder(a,e,r,Z,l[vf],n,o)}if(P>0&&X[3]>0){var q=Math.atan(P/N),$=Math.atan(P/G),J=qe.calPoints(P,h[sf],q,$,R,R+D,w-P,w,S,S+N,C-G,C,1,_t,ft);qe.renderBorder(a,e,r,J,l[pf],n,o)}if(G>0&&V[3]>0){var Q=Math.atan(G/D),tt=Math.atan(G/P),et=qe.calPoints(G,h[lf],Q,tt,R,R,w-P,w,S,S+N,C-G,C,2,m?_t:[0,0],ft);qe.renderBorder(a,e,r,et,l[yf],n,o)}if(m&&D>0&&K[3]>0){var rt=Math.atan(D/N),it=Math.atan(D/G),at=qe.calPoints(D,h[hf],rt,it,R,R+D,w-P,w,S,S+N,C-G,C,3,_t,ft);qe.renderBorder(a,e,r,at,l[df],n,o)}}()}return t&&t.ctx.clearRect(0,0,f,v),{v:C}}();if("object"===t(Et))return Et.v}else if(T===R||S===w)return C}if(U[3]>0&&fh.renderBgc(this,e,r,l[Q_],ct,T,S,R-T,w-S,_t,ft,vt,yt,"fill",!1,n,o),et){var Mt=et.length;et.slice(0).reverse().forEach((function(t,i){if(t)if(i=Mt-1-i,H.isString(t)){var s=a.__loadBgi[i];s.url===t&&fh.renderImage(a,e,r,s,T,S,R,w,_t,ft,vt,yt,h,i,at,tt,!1,n,o)}else if(t.k){var l=a.__gradient(e,r,T,S,R,w,t,n,o);l&&("conic"===l.k?pr.renderConic(a,e,r,l.v,T,S,R-T,w-S,_t,ft,vt,yt):fh.renderBgc(a,e,r,l.v,ct,T,S,R-T,w-S,_t,ft,vt,yt,"fill",!1,n,o))}}))}return nt&&nt.forEach((function(t){Zc.renderBoxShadow(a,e,r,t,_,x,p,A,p-_,A-x,n,o)})),N>0&&z[3]>0&&qe.renderBorder(this,e,r,l[Ef],l[vf],n,o),P>0&&X[3]>0&&qe.renderBorder(this,e,r,l[Mf],l[pf],n,o),G>0&&V[3]>0&&qe.renderBorder(this,e,r,l[Af],l[yf],n,o),D>0&&K[3]>0&&qe.renderBorder(this,e,r,l[Tf],l[df],n,o),C}},{key:"refresh",value:function(t,e){var r=this.__root;!_v(t)&&t||(t=Fv),r&&!this.__isDestroyed?r.__addUpdate(this,null,t,null,null,null,e):_v(e)&&e(-1)}},{key:"__destroy",value:function(){if(!this.__isDestroyed){var t=this.props.ref;cv(t)||_v(t)||delete this.__root.__ref[t],h(n(i.prototype),"__destroy",this).call(this),this.clearAnimate(),this.clearFrameAnimate(),this.clearCache();var e=this.__fontRegister;for(var r in e)e.hasOwnProperty(r)&&St.offRegister(r,this);this.__host=this.__hostRoot=this.__root=this.__prev=this.__next=this.__parent=this.__domParent=null,this.__reset0()}}},{key:"__emitEvent",value:function(t,e){var r=this.__isDestroyed,i=this.__computedStyle,a=this.__mask;if(!(r||"none"===i[k_]||t.__stopPropagation||a)){var n,o=t.event.type,s=this.listener,l=this.__hasMask;if(s.hasOwnProperty(o)&&(n=s[o]),e)return"none"!==i[bf]&&_v(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0;if(this.willResponseEvent(t)){if(l){for(var h,u=this.next,c=u.__clip;u&&u.__mask;){if(u.willResponseEvent(t,!0)){h=!0;break}u=u.next}if(!c&&!h)return}return _v(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,a=this.__x1,n=this.__y1,o=this.__offsetWidth,s=this.__offsetHeight,l=this.__matrixEvent;if("none"!==this.__computedStyle[bf])return se.pointInQuadrilateral(r,i,a,n,a+o,n,a+o,n+s,a,n+s,l)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=a-r,u=n-i;if(h&&u){var c=o.k,_=o.v,f=o.d,v=o.s,y=o.z,d=o.p,p=r+.5*h,x=i+.5*u,g={k:c};if("linear"===c){var m=pr.getLinear(_,f,r,i,p,x,h,u,this.root,s,l);g.v=this.__getLg(t,e,m)}else if("radial"===c){var b=pr.getRadial(_,v,y,d,r,i,a,n,this.root,s,l);b&&(g.v=this.__getRg(t,e,b),b.matrix&&(g.v=[g.v,b.matrix,b.cx,b.cy]))}else if("conic"===c){var E=this.bbox,M=Math.max(Math.abs(E[2]-E[0]),Math.abs(E[3]-E[1])),A=Math.max(Math.abs(h),Math.abs(u)),T=pr.getConic(_,f,d,r,i,a,n,M/A,this.root,s,l);g.v=this.__getCg(t,e,T)}return g}}},{key:"__getLg",value:function(t,e,r){if(t===t_||t===r_){var i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach((function(t){i.addColorStop(t[1],lv(t[0]))})),i}if(t===e_){var a={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map((function(t){return{tagName:"stop",props:[["stop-color",lv(t[0])],["offset",100*t[1]+"%"]]}}))},n=e.add(a);return this.__cacheDefs.push(a),"url(#"+n+")"}}},{key:"__getRg",value:function(t,e,r){if(t===t_||t===r_){var i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r);return r.stop.forEach((function(t){i.addColorStop(t[1],lv(t[0]))})),i}if(t===e_){var a={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map((function(t){return{tagName:"stop",props:[["stop-color",lv(t[0])],["offset",100*t[1]+"%"]]}}))};r.tx!==r.cx&&a.props.push(["fx",r.cx]),r.ty!==r.cy&&a.props.push(["fy",r.cy]);var n=e.add(a);return this.__cacheDefs.push(a),"url(#"+n+")"}}},{key:"__getCg",value:function(t,e,r){var i=r.stop,a=i.length-1;i[a][1]<1&&i.push([i[a][0].slice(0),1]),i[0][1]>0&&i.unshift([i[0][0].slice(0),0]);return t===t_||t===r_?r:[]}},{key:"clearCache",value:function(t){var e=this.__cacheTotal,r=this.__cacheFilter,i=this.__cacheMask,a=this.__cache;if(a&&a.release(),e&&e.release(),r&&r.release(),i&&i.release(),this.__refreshLevel|=Uv,t)for(var n=this.__domParent;n;){var o=n.__cacheTotal,s=n.__cacheFilter,l=n.__cacheMask;n.__refreshLevel|=Uv,o&&o.release(),s&&s.release(),l&&l.release(),n=n.__domParent}}},{key:"updateStyle",value:function(t,e){var r=i_(t);this.updateFormatStyle(r,e)}},{key:"updateFormatStyle",value:function(t,e){var r=this,i=this.__root,a=this.__currentStyle,n=this.__currentProps,o=[];Object.keys(t).forEach((function(e){var i=xv.hasOwnProperty(e);i||(e=parseInt(e)),a_(e,i?n[e]:a[e],t[e],r)||(i?n[e]=t[e]:a[e]=t[e],o.push(e))})),o.length&&!this.__isDestroyed?i&&i.__addUpdate(this,o,null,null,null,null,e):_v(e)&&e()}},{key:"animate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Xc(this,t,e);return this.__isDestroyed?(r.__destroy(),r):(this.__animationList.push(r),!1===e.autoPlay?r:r.play())}},{key:"removeAnimate",value:function(t){if(t instanceof Xc){var e=this.__animationList.indexOf(t);e>-1&&(t.cancel(),t.__destroy(),this.__animationList.splice(e,1))}}},{key:"clearAnimate",value:function(){this.__animationList.splice(0).forEach((function(t){t.cancel(),t.__destroy()}))}},{key:"frameAnimate",value:function(t){if(_v(t)){for(var e=this.__frameAnimateList,r=0,i=e.length;r<i;r++)if(e[r].__karasFramecb===t)return t;var a={__after:function(e){t(e)},__karasFramecb:t};return e.push(a),dh.onFrame(a),t}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void dh.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach((function(t){dh.offFrame(t)}))}},{key:"__offsetX",value:function(t,e,r){"none"!==this.__computedStyle[k_]&&(h(n(i.prototype),"__offsetX",this).call(this,t),e&&(this.__layoutData.x+=t),this.__x1+=t,this.__x2+=t,this.__x3+=t,this.__x4+=t,this.__x5+=t,this.__x6+=t,r&&(this.__refreshLevel|=r,r>=Iv&&(this.__cacheStyle=[],this.__calStyle(r,this.__currentStyle,this.__computedStyle,this.__cacheStyle)),this.__bbox&&(this.__bbox[0]+=t,this.__bbox[2]+=t),this.__filterBbox&&(this.__filterBbox[0]+=t,this.__filterBbox[2]+=t)))}},{key:"__offsetY",value:function(t,e,r){"none"!==this.__computedStyle[k_]&&(h(n(i.prototype),"__offsetY",this).call(this,t),e&&this.__layoutData&&(this.__layoutData.y+=t),this.__y1+=t,this.__y2+=t,this.__y3+=t,this.__y4+=t,this.__y5+=t,this.__y6+=t,r&&(this.__refreshLevel|=r,r>=Iv&&(this.__cacheStyle=[],this.__calStyle(r,this.__currentStyle,this.__computedStyle,this.__cacheStyle)),this.__bbox&&(this.__bbox[1]+=t,this.__bbox[3]+=t),this.__filterBbox&&(this.__filterBbox[1]+=t,this.__filterBbox[3]+=t),this.__cache&&this.__cache.__offsetY(t),this.__cacheTotal&&this.__cacheTotal.__offsetY(t),this.__cacheFilter&&this.__cacheFilter.__offsetY(t),this.__cacheMask&&this.__cacheMask.__offsetY(t)))}},{key:"__resizeX",value:function(t,e){"none"!==this.__computedStyle[k_]&&(this.__computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData&&(this.__layoutData.w+=t),this.__x4+=t,this.__x5+=t,this.__x6+=t,t<0&&(this.__limitCache=!1),e&&(this.__refreshLevel|=e,e>=Iv&&(this.__cacheStyle=[],this.__calStyle(e,this.__currentStyle,this.__computedStyle,this.__cacheStyle))),this.clearCache())}},{key:"__resizeY",value:function(t,e){"none"!==this.__computedStyle[k_]&&(this.__computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__y4+=t,this.__y5+=t,this.__y6+=t,t<0&&(this.__limitCache=!1),e&&(this.__refreshLevel|=e,e>=Iv&&(this.__cacheStyle=[],this.__calStyle(e,this.__currentStyle,this.__computedStyle,this.__cacheStyle))),this.clearCache())}},{key:"getComputedStyle",value:function(t){var e=this.__computedStyle,r={},i=[];t?(Array.isArray(t)?t:[t]).forEach((function(t){mr.hasOwnProperty(t)?mr[t].forEach((function(t){i.push(n_[s_(t)])})):i.push(n_[s_(t)])})):i=Object.keys(e);return i.forEach((function(t){xv.hasOwnProperty(t)?r[t]=e[t]:r[o_[t]]=e[t]})),r}},{key:"getBoundingClientRect",value:function(t){var e;if(t)e=this.bbox;else{var r=this.__x1,i=this.__y1;e=[r,i,r+this.__offsetWidth,i+this.__offsetHeight]}var a=this.__matrixEvent,n=bv(g.calPoint({x:e[0],y:e[1]},a)),o=bv(g.calPoint({x:e[2],y:e[1]},a)),s=bv(g.calPoint({x:e[2],y:e[3]},a)),l=bv(g.calPoint({x:e[0],y:e[3]},a));return{left:Math.min(n.x,Math.min(o.x,Math.min(s.x,l.x))),top:Math.min(n.y,Math.min(o.y,Math.min(s.y,l.y))),right:Math.max(n.x,Math.max(o.x,Math.max(s.x,l.x))),bottom:Math.max(n.y,Math.max(o.y,Math.max(s.y,l.y))),points:[n,o,s,l]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(t){var e,r=this.__root,i=this.isShadowRoot?this.hostRoot.__parent:this.__parent;if(i){var a=this.isShadowRoot?this.hostRoot:this;e=i.__children.indexOf(a),i.__children.splice(e,1),e=i.__zIndexChildren.indexOf(a),i.__zIndexChildren.splice(e,1);var n=this.__prev,o=this.__next;n&&(n.__next=o),o&&(o.__prev=n)}if(this.__isDestroyed)_v(t)&&t();else{if(i.__deleteStruct(this,e),"none"===this.__computedStyle[k_]||"none"===i.__computedStyle[k_])return this.__destroy(),void(_v(t)&&t());r.__addUpdate(this,null,Iv,null,!0,null,t)}}},{key:"tagName",get:function(){return this.__tagName}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__x1,e=this.__y1,r=this.__offsetWidth,i=this.__offsetHeight,a=this.__computedStyle[rf];this.__bbox=dv([t,e,t+r,e+i],a)}return this.__bbox}},{key:"filterBbox",get:function(){if(!this.__filterBbox){var t=this.__bbox||this.bbox,e=this.__computedStyle[uf];this.__filterBbox=pv(t,e)}return this.__filterBbox}},{key:"listener",get:function(){return this.__listener}},{key:"opacity",get:function(){return this.__opacity}},{key:"matrix",get:function(){return this.__matrix}},{key:"matrixEvent",get:function(){for(var t=this.__domParent,e=this.__matrix;t;)e=g.multiply(t.__perspectiveMatrix,e),e=g.multiply(t.__matrix,e),t=t.__domParent;return e}},{key:"perspectiveMatrix",get:function(){return this.__perspectiveMatrix}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"cacheStyle",get:function(){return this.__cacheStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseline",get:function(){return this.__offsetHeight}},{key:"firstBaseline",get:function(){return this.__offsetHeight}},{key:"verticalBaseline",get:function(){return this.__offsetWidth}},{key:"mask",get:function(){return this.__mask},set:function(t){if(t=!!t,this.__mask!==t){this.__mask=t;var e=this.__root;e&&!this.__isDestroyed&&e.__addUpdate(this,null,zv,null,null,null,null)}}},{key:"clip",get:function(){return this.__clip},set:function(t){if(t=!!t,this.__clip!==t){this.__clip=t;var e=this.__root;e&&!this.__isDestroyed&&e.__addUpdate(this,null,zv,null,null,null,null)}}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){if(t=!!t,this.__cacheAsBitmap!==t){this.__cacheAsBitmap=t;var e=this.__root;e&&!this.__isDestroyed&&e.__addUpdate(this,null,Fv,null,null,null,null)}}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),i}(v),Qv=Vt.STYLE_KEY,ty=Qv.DISPLAY,ey=Qv.MARGIN_TOP,ry=Qv.MARGIN_BOTTOM,iy=Qv.MARGIN_LEFT,ay=Qv.MARGIN_RIGHT,ny=Qv.BORDER_TOP_WIDTH,oy=Qv.BORDER_BOTTOM_WIDTH,sy=Qv.BORDER_LEFT_WIDTH,ly=Qv.BORDER_RIGHT_WIDTH,hy=Qv.PADDING_TOP,uy=Qv.PADDING_BOTTOM,cy=Qv.PADDING_LEFT,_y=Qv.PADDING_RIGHT,fy=Qv.LINE_HEIGHT,vy=function(){function t(t,e,r,i,a){this.__list=[],this.__x=t,this.__y=e,this.__oy=0,this.__lineHeight=r,this.__baseline=i,this.__isUpright=a,this.__bOffset=0}return r(t,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(t){var e=t?this.verticalBaseline:this.baseline,r=t?this.verticalLineHeight:this.lineHeight,i=r;if(this.list.length){this.list.forEach((function(r){if(!r.isEllipsis)if(t){var a=r.verticalBaseline;if(a!==e){var n=e-a;r.__offsetX(n,!0),i=Math.max(i,r.offsetWidth+n)}}else{var o=r.baseline;if(o!==e){var s=e-o;r.__offsetY(s,!0),i=Math.max(i,r.offsetHeight+s)}}}));var a=e-this.__baseline;i=Math.max(i,this.__lineHeight+a)}return Math.max(0,i-r)}},{key:"__offsetX",value:function(t,e){this.__x+=t,e&&this.list.forEach((function(e){e.__offsetX(t,!0)}))}},{key:"__offsetY",value:function(t,e){this.__y+=t,e&&this.list.forEach((function(e){e.__offsetY(t,!0)}))}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseline=Math.max(e,this.__baseline)}},{key:"__resetLb",value:function(t,e){this.list.forEach((function(r){var i=r;r instanceof ss&&(i=r.parent.parent);for(var a=i.computedStyle;"inline"===a[ty];)t=Math.max(t,a[fy]),e=Math.max(e,qn.getBaseline(a)),a=(i=i.domParent).computedStyle})),this.__lineHeight=t,this.__baseline=e}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"endX",get:function(){return this.x+this.width}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){if(this.isUpright)return this.verticalLineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],i=t[e-1],a=r.x,n=r instanceof ss?r.parent.domParent:r.domParent;;){var o=n.contentBoxList,s=n.computedStyle,l=s[ty],h=s[iy],u=s[sy],c=s[cy];if("inline"!==l)break;r===o[0]&&(a-=h+u+c),n=n.domParent}var _=i.x+i.outerWidth;for(n=i instanceof ss?i.parent.domParent:i.domParent;;){var f=n.contentBoxList,v=n.computedStyle,y=v[ty],d=v[ay],p=v[ly],x=v[_y];if("inline"!==y)break;r===f[f.length-1]&&(_+=d+p+x),n=n.domParent}return _-a}return 0}},{key:"height",get:function(){if(!this.isUpright)return this.lineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],i=t[e-1],a=r.y,n=r instanceof ss?r.parent.domParent:r.domParent;;){var o=n.contentBoxList,s=n.computedStyle,l=s[ty],h=s[ey],u=s[ny],c=s[hy];if("inline"!==l)break;r===o[0]&&(a-=h+u+c),n=n.domParent}var _=i.y+i.outerHeight;for(n=i instanceof ss?i.parent.domParent:i.domParent;;){var f=n.contentBoxList,v=n.computedStyle,y=v[ty],d=v[ry],p=v[oy],x=v[uy];if("inline"!==y)break;r===f[f.length-1]&&(_+=d+p+x),n=n.domParent}return _-a}return 0}},{key:"bOffset",get:function(){return this.__bOffset}},{key:"baseline",get:function(){var t=this.__baseline;return this.list.forEach((function(e){t=Math.max(t,e.baseline)})),t}},{key:"verticalBaseline",get:function(){var t=this.__baseline;return this.list.forEach((function(e){t=Math.max(t,e.verticalBaseline)})),t}},{key:"lineHeight",get:function(){var t=this.__lineHeight;return this.list.forEach((function(e){t=Math.max(t,e.outerHeight)})),t}},{key:"verticalLineHeight",get:function(){var t=this.__lineHeight;return this.list.forEach((function(e){t=Math.max(t,e.outerWidth)})),t}},{key:"isUpright",get:function(){return this.__isUpright}}]),t}(),yy=function(){function t(t,e,r,i,a){this.__x=this.__lastX=t,this.__y=this.__lastY=e,this.__max=a?e:t,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=r,this.__baseline=i,this.__isEnd=!0,this.__spreadList=[],this.__isVertical=a}return r(t,[{key:"genLineBox",value:function(t,e){var r=new vy(t,e,this.__lineHeight,this.__baseline,this.isUpright);return this.list.push(r),this.__isEnd=!0,r}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){var a=Math.max(this.__lineHeight,r),n=Math.max(this.__baseline,i);if(this.__isNewLine){var o=new vy(t,e,a,n,this.isUpright);return this.list.push(o),this.__isEnd=!0,this.__isNewLine=!1,o}}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(t,e){var r,i=this.isUpright;if(this.__isNewLine)this.__isNewLine=!1,r=this.genLineBox(t.x,t.y);else{var a=this.list;r=a[a.length-1]}return this.__domStack.forEach((function(e){e.__contentBoxList.push(t)})),r.add(t),e?(this.__isNewLine=!0,this.__lastX=t.x,this.__lastY=t.y+t.outerHeight):i?(this.__lastX=t.x,this.__lastY=t.y+t.outerHeight):(this.__lastX=t.x+t.outerWidth,this.__lastY=t.y),this.__max=Math.max(this.__max,i?t.y+t.outerHeight:t.x+t.outerWidth),r}},{key:"horizonAlign",value:function(t,e,r){this.list.forEach((function(i){var a=t-(r?i.height:i.width);a>0&&("center"===e&&(a*=.5),r?i.__offsetY(a,!0):i.__offsetX(a,!0))}))}},{key:"verticalAlign",value:function(t){var e=this.__spreadList;e.splice(0);var r=0;return this.list.forEach((function(i){r&&(i.__bOffset=r,t?i.__offsetX(r,!0):i.__offsetY(r,!0)),r+=i.verticalAlign(t),e.push(r)})),r}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"addY",value:function(t){this.__lastY+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(t){this.list.forEach((function(e){e.__offsetX(t)}))}},{key:"__offsetY",value:function(t){this.list.forEach((function(e){e.__offsetY(t)}))}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e,!1)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endX",get:function(){var t=this.list,e=t.length;return e?t[e-1].endX:this.__x}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return this.list.length>1}},{key:"domList",get:function(){return this.__domList}},{key:"baseline",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseline+t[e-1].bOffset}return 0}},{key:"firstBaseline",get:function(){var t=this.list;return t.length?t[0].baseline:0}},{key:"verticalBaseline",get:function(){var t=this.list;return t.length?t[0].baseline+t[0].bOffset:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"verticalLineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].verticalLineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var t=0;return this.list.forEach((function(e){t=Math.max(t,e.width)})),t}},{key:"spreadList",get:function(){return this.__spreadList}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"max",get:function(){return this.__max}}]),t}(),dy={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},py=Vt.STYLE_KEY,xy=py.MARGIN_RIGHT,gy=py.MARGIN_LEFT,my=py.PADDING_RIGHT,by=py.PADDING_LEFT,Ey=py.WIDTH,My=py.HEIGHT,Ay=py.BORDER_RIGHT_WIDTH,Ty=py.BORDER_LEFT_WIDTH,Ry=py.FILL,Sy=py.STROKE,wy=py.STROKE_MITERLIMIT,Cy=py.STROKE_WIDTH,ky=py.STROKE_LINECAP,Oy=py.STROKE_LINEJOIN,Iy=py.STROKE_DASHARRAY,Fy=py.STROKE_DASHARRAY_STR,Ly=py.FILL_RULE;py.VISIBILITY;var By=py.FLEX_BASIS,Dy=d.AUTO,Py=d.PX,Ny=d.PERCENT,Hy=d.REM,Gy=d.VW,Wy=d.VH,Yy=d.VMAX,Uy=d.VMIN,zy=d.RGBA,Xy=d.GRADIENT,Vy=H.int2rgba,Ky=H.isNil,jy=H.joinArr,Zy=ce.canvasPolygon,qy=ce.svgPolygon,$y={},Jy=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).__isMulti=!!i.props.multi,i.__style=qn.normalize(i.style,Dt.DOM_ENTRY_SET.concat(Dt.GEOM_ENTRY_SET)),i.__currentStyle=H.extend([],i.__style),i.__currentProps=H.clone(i.props),i.__cacheProps={},i}return a(e,t),r(e,[{key:"__tryLayInline",value:function(t,e){this.__computeReflow();var r=this.currentStyle,i=r[Ey],a=r[gy],n=r[xy],o=r[by],s=r[my],l=this.computedStyle,h=l[Ty],u=l[Ay];return i[1]!==Dy&&(t-=this.__calSize(i,e,!0)),t-=this.__calSize(n,e,!0),t-=this.__calSize(s,e,!0),t-=u,t-=this.__calSize(a,e,!0),t-=this.__calSize(o,e,!0),t-=h}},{key:"__calBasis",value:function(t,e,r,i,a){this.__computeReflow();var n=0,o=0,s=0,l=this.currentStyle,h=this.computedStyle,u=i.w,c=i.h,_=l[By],f=l[Ey],v=l[My],y=t?f:v;return[Py,Ny,Hy,Gy,Wy,Yy,Uy].indexOf(_.u)>-1?n=s=o=this.__calSize(_,t?u:c,!0):[Py,Ny,Hy,Gy,Wy,Yy,Uy].indexOf(y.u)>-1&&(n=s=o=this.__calSize(y,t?u:c,!0)),this.__addMBP(t,u,l,h,[n,o,s],a)}},{key:"__layout",value:function(t,r,i,a){h(n(e.prototype),"__layout",this).call(this,t,r,i,a),this.__layoutStyle()}},{key:"__layoutBlock",value:function(t,e,r,i){var a=this.__preLayout(t,!1),n=a.fixedWidth,o=a.fixedHeight,s=a.w,l=a.h,h=a.isParentVertical,u=a.isUpright,c=0,_=0;!n&&(e||h||u)||(c=s),(o||!e&&h&&u)&&(_=l),this.__ioSize(c,_),e||r||i||(this.__marginAuto(this.currentStyle,t),this.__cacheProps={})}},{key:"__layoutFlex",value:function(t,e,r,i){this.__layoutBlock(t,e,r,i)}},{key:"__layoutInline",value:function(t,e,r){var i=this.__preLayout(t,!1),a=i.fixedWidth,n=i.fixedHeight,o=i.w,s=i.h,l=a?o:0,h=n?s:0;this.__ioSize(l,h),this.__cacheProps={}}},{key:"__calStyle",value:function(t,r,i,a){var o=this,s=h(n(e.prototype),"__calStyle",this).call(this,t,r,i,a);if(Ky(a[Cy])){a[Cy]=!0;var l=r[Cy]||[],u=this.width;i[Cy]=l.map((function(t){return o.__calSize(t,u,!0)}))}return Ky(a[Iy])&&(a[Iy]=!0,i[Iy]=r[Iy]||[],a[Fy]=i[Iy].map((function(t){return jy(t,",")}))),[ky,Oy,wy,Ly].forEach((function(t){i[t]=r[t]})),[Ry,Sy].forEach((function(t){if(Ky(a[t])){var e=r[t],n=i[t]=[],o=a[t]=[];Array.isArray(e)&&e.forEach((function(t){t&&t.u===Xy?(n.push(t.v),o.push(!0)):t&&t.u===zy&&t.v[3]>0?(n.push(t.v),o.push(Vy(t.v))):(n.push("none"),o.push("none"))}))}})),s}},{key:"calContent",value:function(t,r){var i=h(n(e.prototype),"calContent",this).call(this,t,r);if(!i){for(var a=r[Ry],o=r[Sy],s=r[Cy],l=0,u=a.length;l<u;l++){var c=a[l];if(c.k||c[3]>0)return!0}for(var _=0,f=o.length;_<f;_++){var v=o[_];if((v.k||v[3]>0)&&s[_]>0)return!0}}return i}},{key:"__preSet",value:function(t,e){var r=this,i=this.width,a=this.height,n=this.__cacheStyle,o=this.computedStyle,s=e.x3+.5*i,l=e.y3+.5*a,h=n[Fy],u=o[Ry],c=o[Sy],_=o[Cy],f=o[ky],v=o[Oy],y=o[wy],d=o[Iy],p=o[Ly];return{cx:s,cy:l,stroke:c=c.map((function(i){return i.k?r.__gradient(t,e.ctx,e.x3,e.y3,e.x4,e.y4,i,e.dx,e.dy):Vy(i)})),strokeWidth:_,strokeDasharray:d,strokeDasharrayStr:h,strokeLinecap:f,strokeLinejoin:v,strokeMiterlimit:y,fill:u=u.map((function(i){return i.k?r.__gradient(t,e.ctx,e.x3,e.y3,e.x4,e.y4,i,e.dx,e.dy):Vy(i)})),fillRule:p}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,a=r.strokeWidth,n=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,l=r.strokeMiterlimit,h=r.fill;t===y.CANVAS&&(h&&("linear"===h.k?e.fillStyle=h.v:"radial"!==h.k||Array.isArray(h.v)?"conic"===h.k||h.k||e.fillStyle===h||(e.fillStyle=h):e.fillStyle=h.v),i&&("linear"===i.k?e.strokeStyle=i.v:"radial"!==i.k||Array.isArray(i.v)?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==a&&e.lineWidth!==a&&(e.lineWidth=a),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==l&&e.miterLimit!==l&&(e.miterLimit=l),H.isFunction(e.getLineDash)?n&&!H.equalArr(e.getLineDash(),n)&&e.setLineDash(n):n&&e.setLineDash(n))}},{key:"render",value:function(t,r,i,a){var o=h(n(e.prototype),"render",this).call(this,t,r,i,a);if(t===y.SVG&&(this.virtualDom.type="geom"),o.break||t===y.WEBGL)return o;var s=this.__preSet(t,o);return Object.assign(o,s)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,a=r.fillRule,n=r.stroke,o=r.strokeWidth,s=r.strokeDasharray,l=r.strokeDasharrayStr,h=r.strokeLinecap,u=r.strokeLinejoin,c=r.strokeMiterlimit,_=r.dx,f=r.dy,v=this.__cacheProps.list,y=this.isMulti,d=this.bbox;if(i.length<=1&&n.length<=1){var p={fill:i[0],fillRule:a[0],stroke:n[0],strokeWidth:o[0],strokeDasharray:s[0],strokeDasharrayStr:l[0],strokeLinecap:h[0],strokeLinejoin:u[0],strokeMiterlimit:c[0],dx:_,dy:f,bbox:d};this.__renderOnePolygon(t,e,y,v,p)}else{for(var x=0,g=i.length;x<g;x++){var m=i[x];if(m){var b={fill:m,fillRule:a[x],dx:_,dy:f,bbox:d};this.__renderOnePolygon(t,e,y,v,b)}}for(var E=0,M=n.length;E<M;E++){var A=n[E];if(A){var T={stroke:A,strokeWidth:o[E],strokeDasharray:s[E],strokeDasharrayStr:l[E],strokeLinecap:h[E],strokeLinejoin:u[E],strokeMiterlimit:c[E],dx:_,dy:f,bbox:d};this.__renderOnePolygon(t,e,y,v,T)}}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,a){var n=a.fill,o=a.stroke,s=a.strokeWidth,l=n&&"conic"===n.k,h=o&&"conic"===o.k,u=n&&"radial"===n.k&&Array.isArray(n.v),c=s&&s>0&&o&&"radial"===o.k&&Array.isArray(o.v);l||h?(l?this.__conicGradient(t,e,i,r,a):"none"!==n&&this.__drawPolygon(t,e,r,i,a,!0),s&&s>0&&h?$.warn("Stroke style can not use conic-gradient"):s&&s>0&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!1,!0)):u||c?(u?this.__radialEllipse(t,e,i,r,a,"fill"):"none"!==n&&this.__drawPolygon(t,e,r,i,a,!0),s&&s>0&&c?($.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke.v=a.stroke.v[0],this.__drawPolygon(t,e,r,i,a,!1,!0)):s&&s>0&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!1,!0)):this.__drawPolygon(t,e,r,i,a,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,a,n,o){var s=a.fill,l=a.stroke,h=a.strokeWidth,u=a.fillRule,c=a.strokeDasharrayStr,_=a.strokeLinecap,f=a.strokeLinejoin,v=a.strokeMiterlimit,d=a.dx,p=a.dy;if(t===y.CANVAS)this.__preSetCanvas(t,e,a),e.beginPath(),r?i.forEach((function(t){return Zy(e,t,d,p)})):Zy(e,i,d,p),n&&s&&"none"!==s&&e.fill(u),o&&l&&"none"!==l&&h&&h>0&&e.stroke(),e.closePath();else if(t===y.SVG){var x="";r?i.forEach((function(t){return x+=qy(t)})):x=qy(i);var g=[["d",x]];if(!(s&&"none"!==s||l&&"none"!==l))return;n&&s&&"none"!==s?(g.push(["fill",s.v||s]),u&&"nonzero"!==u&&g.push(["fill-rule",u])):g.push(["fill","none"]),o&&l&&"none"!==l&&h&&h>0?(g.push(["stroke",l.v||l]),g.push(["stroke-width",h]),this.__propsStrokeStyle(g,c,_,f,v)):g.push(["stroke-width",0]),this.addGeom("path",g)}}},{key:"__inversePtList",value:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return e?t.map((function(t){return t&&t.length?t.map((function(t){if(!t||!t.length)return null;for(var e=[],n=0,o=t.length;n<o;n+=2){var s=g.calPoint({x:t[n]+i,y:t[n+1]+a},r);e.push(s.x),e.push(s.y)}return e})):null})):t.map((function(t){if(!t||!t.length)return null;for(var e=[],n=0,o=t.length;n<o;n+=2){var s=g.calPoint({x:t[n]+i,y:t[n+1]+a},r);e.push(s.x),e.push(s.y)}return e}))}},{key:"__radialEllipse",value:function(t,e,r,i,a,n){var o=a.strokeWidth,s=a.strokeDasharrayStr,l=a.strokeLinecap,h=a.strokeLinejoin,c=a.strokeMiterlimit,_=a.dx,f=a.dy,v=u(a[n].v,4),d=v[0],p=v[1],x=v[2],m=v[3];p=Uo.calMatrixByOrigin(p,x,m);var b=g.inverse(p);if(r=this.__inversePtList(r,i,b,_,f),t===y.CANVAS){if(p){e.save();var E=e.getTransform();E=[E.a,E.b,0,0,E.c,E.d,0,0,0,0,1,0,E.e,E.f,1,0],p=g.multiply(E,p),e.setTransform(p[0],p[1],p[4],p[5],p[12],p[13])}e.beginPath(),e[n+"Style"]!==d&&(e[n+"Style"]=d),i?r.forEach((function(t){return ce.canvasPolygon(e,t)})):Zy(e,r),e[n](),e.closePath(),p&&e.restore()}else if(t===y.SVG){var M="";i?r.forEach((function(t){return M+=qy(t)})):M=qy(r);var A=[["d",M]];"fill"===n?(A.push(["fill",d]),A.push(["strokeWidth",0])):"stroke"===n&&(A.push(["fill","none"]),A.push(["stroke",d]),A.push(["stroke-width",o]),this.__propsStrokeStyle(A,s,l,h,c)),A.push(["transform","matrix(".concat(jy(g.m2m6(p),","),")")]),this.addGeom("path",A)}}},{key:"__conicGradient",value:function(t,e,r,i,a){var n=this,o=a.fill,s=a.bbox,l=a.dx,h=void 0===l?0:l,c=a.dy,_=void 0===c?0:c,f=o.v;if(t===y.CANVAS){var v=u(s,4),d=v[0],p=v[1],x=v[2],g=v[3],m=x-d,b=g-p,E=$.getOffscreenCanvas(m,b,"__$$CONIC_GRADIENT$$__",null),M=E.ctx.getImageData(0,0,m,b);le.getConicGradientImage(.5*m,.5*b,m,b,o.v.stop,M.data),E.ctx.putImageData(M,0,0),i?r.forEach((function(t){e.save(),e.beginPath(),Zy(e,t,h,_),e.clip(),e.closePath(),e.drawImage(E.canvas,d+h,p+_),e.restore()})):(e.save(),e.beginPath(),Zy(e,r,h,_),e.clip(),e.closePath(),e.drawImage(E.canvas,d+h,p+_),e.restore()),E.ctx.clearRect(0,0,m,b)}else if(t===y.SVG)if(i)r.forEach((function(t){var r={tagName:"clipPath",children:[{tagName:"path",props:[["d",qy(t)]]}]},i=e.add(r);n.__cacheDefs.push(r),f.forEach((function(t){n.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",qy(t[0])],["fill",t[1]],["clip-path","url(#"+i+")"]]})}))}));else{var A={tagName:"clipPath",children:[{tagName:"path",props:[["d",qy(r)]]}]},T=e.add(A);this.__cacheDefs.push(A),f.forEach((function(t){n.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",qy(t[0])],["fill",t[1]],["clip-path","url(#"+T+")"]]})}))}}},{key:"__propsStrokeStyle",value:function(t,e,r,i,a){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),a&&4!==a&&t.push(["stroke-miterlimit",a])}},{key:"__offsetX",value:function(t,r,i){h(n(e.prototype),"__offsetX",this).call(this,t,r,i),i&&i>=Vs.REFLOW&&(this.__cacheProps={})}},{key:"__offsetY",value:function(t,r,i){h(n(e.prototype),"__offsetY",this).call(this,t,r,i),i&&i>=Vs.REFLOW&&(this.__cacheProps={})}},{key:"__resizeX",value:function(t,r){h(n(e.prototype),"__resizeX",this).call(this,t,r),r&&r>=Vs.REFLOW&&(this.__cacheProps={})}},{key:"__resizeY",value:function(t,r){h(n(e.prototype),"__resizeY",this).call(this,t,r),r&&r>=Vs.REFLOW&&(this.__cacheProps={})}},{key:"addGeom",value:function(t,e){e=H.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return Ky(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return $y}},{key:"getRegister",value:function(t){if(t&&!H.isString(t)&&t.prototype&&t.prototype instanceof e)return t;if(!t||!H.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!$y.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return $y[t]}},{key:"register",value:function(t,r){if(!(t&&H.isString(t)&&"$"===t.charAt(0)&&r.prototype&&r.prototype instanceof e))throw new Error("Invalid param");if(e.hasRegister(t))throw new Error("Geom has already register: ".concat(t));$y[t]=r}},{key:"hasRegister",value:function(t){return t&&$y.hasOwnProperty(t)}},{key:"delRegister",value:function(t){e.hasRegister(t)&&delete $y[t]}}]),e}(Jv),Qy=Vt.STYLE_KEY,td=Qy.DISPLAY,ed=Qy.TOP,rd=Qy.BOTTOM,id=Qy.POSITION,ad=Qy.WIDTH,nd=Qy.HEIGHT,od=Qy.MARGIN_TOP,sd=Qy.MARGIN_BOTTOM,ld=Qy.MARGIN_LEFT,hd=Qy.BORDER_TOP_WIDTH,ud=Qy.PADDING_TOP,cd=Qy.BORDER_LEFT_WIDTH,_d=Qy.PADDING_LEFT,fd=d.AUTO,vd=d.PX,yd=d.REM,dd=d.VW,pd=d.VH,xd=d.VMAX,gd=d.VMIN,md=d.PERCENT,bd=Vs.REPAINT,Ed=Vs.REFLOW,Md=Vs.CACHE,Ad=qn.isRelativeOrAbsolute;function Td(t,e){t.__refreshLevel|=e?bd:Md,Array.isArray(t.children)&&t.children.forEach((function(t){t instanceof Nl&&(t=t.shadowRoot),Td(t,!0)}))}function Rd(t,e){var r=0,i=t[0]||0,a=t[0]||0;t.forEach((function(t){r+=t,i=Math.max(i,t),a=Math.min(a,t)})),e.forEach((function(t){r+=t,i=Math.max(i,t),a=Math.min(a,t)}));var n=0;return i>0&&a>0?n=Math.max(i,a):i<0&&a<0?n=Math.min(i,a):0===i&&0===a||(n=i+a),{target:n,total:r,diff:n-r}}function Sd(t,e){return t.currentStyle[e].u!==fd}function wd(t,e){var r=Sd(t,ad)&&Sd(t,nd);if(r&&e){var i=t.__domParent;if(i&&"flex"===i.computedStyle[td])return!1}return r}function Cd(t,e,r){for(;t&&!(t instanceof Ol)&&!(t instanceof Nl&&t.shadowRoot instanceof Ol)&&["block","flex"].indexOf(t.computedStyle[td])>-1&&"absolute"!==t.computedStyle[id]&&(r.push(t.computedStyle[sd]),!(t.offsetHeight>0));)e.push(t.computedStyle[od]),t=t.__prev}function kd(t,e,r){for(;t&&!(t instanceof Ol)&&!(t instanceof Nl&&t.shadowRoot instanceof Ol)&&["block","flex"].indexOf(t.computedStyle[td])>-1&&"absolute"!==t.computedStyle[id]&&(e.push(t.computedStyle[od]),!(t.offsetHeight>0));)r.push(t.computedStyle[sd]),t=t.__next}function Od(t,e,r,i){for(;t;){var a=t.currentStyle;"absolute"!==a[id]||a[ed].u===fd&&a[rd].u===fd||a[ed].u===fd&&[vd,yd,dd,pd,xd,gd].indexOf(a[rd].u)>-1?t.__offsetY(e,!0,Ed):r||"absolute"!==a[id]||a[ed].u!==md&&a[rd].u!==md||(a[ed].u===md?t.__offsetY(.01*e*a[ed].v,!0,Ed):t.__offsetY(e*(1-.01*a[rd].v),!0,Ed)),a instanceof Ol||a instanceof Nl&&a.shadowRoot instanceof Ol||"absolute"===a[id]&&a[nd].u===md&&i.push(t),t=t.__next}return e}var Id={getMergeMargin:Rd,checkTop:function(t,e,r,i){if(t===e)return t;if(e instanceof Ol&&(e=e.__domParent),r&&"absolute"===e.currentStyle[id])return e;if(i&&"absolute"===e.computedStyle[id])return e;var a=e;if(r||i){var n=!0,o=e,s=o.__prev,l=o.__next;if((s&&(s instanceof Ol||["inline","inlineBlock"].indexOf(s.computedStyle[td])>-1)||l&&(l instanceof Ol||["inline","inlineBlock"].indexOf(l.computedStyle[td])>-1))&&(n=!1),!n&&(a=e.__domParent)===t)return t}if("absolute"===a.currentStyle[id]&&"absolute"===a.computedStyle[id])return a;if(["inline","inlineBlock"].indexOf(a.currentStyle[td])>-1||["inline","inlineBlock"].indexOf(a.computedStyle[td])>-1){do{if((a=a.__domParent)===t)return t}while(["inline","inlineBlock"].indexOf(a.computedStyle[td])>-1&&"absolute"!==a.computedStyle[id]);if(wd(a,!0))return a}var h,u=a;do{if(u===t)break;if("flex"===u.computedStyle[td]&&(h=u),"absolute"===u.computedStyle[id]||wd(u,!0))break;u=u.__domParent}while(u);return h&&(a=h),a},checkNext:function(t,e,r,i,a,n){var o=e.computedStyle,s=e.currentStyle,l=o[id],h=o[td],u="absolute"===l,c="absolute"===s[id],_="none"===h,f="none"===s[td],v=0===e.offsetHeight;if(!_||!f){var d=e.__domParent,p=e.offsetHeight,x=t.renderMode===y.SVG;if(a||n||i&&"static"===l&&"static"===s[id]?i=!1:l===s[id]||"static"!==l&&"static"!==s[id]?_===f||i||x&&Td(d,!1):i=!0,n&&e===r&&"absolute"===r.computedStyle[id])return e.clearCache(!0),void(x&&Td(d,!1));var g=0,m=0,b=[],E=[],M=e.isShadowRoot?e.__hostRoot.__prev:e.__prev,A=e.isShadowRoot?e.__hostRoot.__next:e.__next;if(a||v){Cd(M,E,b),kd(A,E,b),a||(E.push(o[od]),b.push(o[sd]));var T=Rd(E,b);g=T.target,T.diff}else{Cd(M,E,b),E.push(o[od]);var R=Rd(E,b);g=R.target,R.diff,E.splice(0),b.splice(0),kd(A,E,b),b.push(o[sd]),m=(R=Rd(E,b)).target,R.diff}var S=d.__layoutData,w=S.x,C=S.y,k=d.__width,O=d.__currentStyle[nd].u===fd?S.h:d.__height,I=e;I.isShadowRoot&&(I=I.__hostRoot);for(var F,L=I.__prev;L;){var B=L.computedStyle;if("absolute"!==B[id]&&"none"!==B[td]){C=L.y+L.outerHeight,F=!0;break}L=L.__prev}var D=d.__computedStyle;F||(C+=D[od]+D[hd]+D[ud]),w+=D[ld]+D[cd]+D[_d];for(var P=c?d:e;P&&P!==t&&!Ad(P);)P=P.__domParent;if(P||(P=t),n&&e===r);else if(f)e.__layoutNone(),i&&(d.__zIndexChildren=null,d.__updateStruct(),x&&Td(d,!1));else if(c){if(d.__layoutAbs(P,S,e),i&&(d.__zIndexChildren=null,d.__updateStruct(),x&&Td(d,!1)),!a&&!n&&u)return void e.clearCache(!0)}else{var N=Object.assign({},a?S:e.__layoutData,{x:w,y:C,w:k,h:O});e.__layout(N,!1,!1,!1),e instanceof Jy||e.__layoutAbs(P,N,null),i&&(d.__zIndexChildren=null,d.__updateStruct(),x&&Td(d,!1))}if(a&&e===r&&"absolute"===r.currentStyle[id])return e.clearCache(!0),void(x&&Td(d,!1));for(var H=d;H;){if("relative"===H.__computedStyle[id]){var G=H,W=G.ox,Y=G.oy;W&&e.__offsetX(W,!1,null),Y&&e.__offsetY(Y,!1,null);break}H=H.__domParent}var U=n&&e===r||0===e.offsetHeight;if(a&&U||n&&v)e.clearCache(!0);else{e.isShadowRoot&&(e=e.__hostRoot);var z,X=0,V=0,K=0;if(b.splice(0),E.splice(0),n||U){Cd(M,E,b),kd(A,E,b),n||(E.push(o[od]),b.push(o[sd]));var j=Rd(E,b);X=j.target,V=j.diff}else{Cd(M,E,b),E.push(o[od]);var Z=Rd(E,b);X=Z.target,V=Z.diff,E.splice(0),b.splice(0),kd(A,E,b),b.push(o[sd]),K=(Z=Rd(E,b)).target,Z.diff}if(n)z=e===r||r.isShadowRoot&&r.__hostRoot===e?0:e.offsetHeight;else z=c?0:e.offsetHeight;!n&&V&&e.__offsetY(V,!0,Ed);var q=X+K-g-m+z-p;if(q){var $=Sd(d,nd);$||d.__resizeY(q,Ed);var J=[];for(Od(A,q,$,J),e.clearCache(!0);d&&!$&&"absolute"!==d.__computedStyle[id];)A=d.__next,($=(d=d.__domParent)&&Sd(d,nd))||d.__resizeY(q,Ed),Od(A,q,$,J),$&&d.clearCache(!1);J.forEach((function(t){var e=t.__layoutData,r=e.container;t.__domParent.__layoutAbs(r,e,t)}))}else e.clearCache(!0)}}},clearSvgCache:Td};function Fd(t,e,r){if(Array.isArray(e))e.forEach((function(e){Fd(t,e,r)}));else if(e instanceof Jv){if(["canvas","svg","webgl"].indexOf(e.tagName)>-1)throw new Error("Can not nest canvas/svg/webgl");e.__parent=t,r.push(e)}else if(e instanceof Nl)e.__parent=t,r.push(e);else if(!H.isNil(e)&&""!==e){var i=new Ol(e);i.__parent=t,r.push(i)}}function Ld(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(Array.isArray(i))i.forEach((function(i){Ld(t,e,r,i,a)}));else if(i instanceof Jv||i instanceof Nl||i instanceof Ol){if(i.__root=t,i.__parent=r,i.__domParent=r,i.__isDestroyed=!1,a.prev&&(a.prev.__next=i,i.__prev=a.prev),a.prev=i,!(i instanceof Ol)){var n=i.props.ref;H.isString(n)&&n||H.isNumber(n)?e.ref[n]=i:n&&H.isFunction(n)&&n(i)}if(i instanceof Jv&&i.__children)Ld(t,e,i,i.__children,{});else if(i instanceof Nl){for(var o=i.render(),s=[];o&&o instanceof Nl;){s.push(o);var l=o.render();l&&(o.__shadow=l,l.__host=o),o=l}o instanceof v||(o=new Ol(o)),s.length?(i.__shadow=s[0],s[0].__host=i,s.forEach((function(e){e.__shadowRoot=o,e.__hostRoot=i,e.__root=t,e.__domParent=r}))):(i.__shadow=o,o.__host=i),i.__shadowRoot=o,o.__hostRoot=i,o.__root=t,o.__domParent=r,o.__isDestroyed=!1,i.__init(),o instanceof Jv&&o.__children&&Ld(t,i,o,o.__children,{})}}return i}var Bd={buildChildren:function(t,e){var r=[];return Fd(t,e,r),r},buildRoot:function(t,e){t.__root=t,t.__host=t,Ld(t,t,t,e,{})},relation:Ld},Dd=Vt.STYLE_KEY,Pd=Dd.POSITION,Nd=Dd.DISPLAY,Hd=Dd.MARGIN_LEFT,Gd=Dd.MARGIN_TOP,Wd=Dd.MARGIN_RIGHT,Yd=Dd.MARGIN_BOTTOM,Ud=Dd.PADDING_LEFT,zd=Dd.PADDING_BOTTOM,Xd=Dd.PADDING_RIGHT,Vd=Dd.PADDING_TOP,Kd=Dd.BORDER_TOP_WIDTH,jd=Dd.BORDER_BOTTOM_WIDTH,Zd=Dd.BORDER_RIGHT_WIDTH,qd=Dd.BORDER_LEFT_WIDTH,$d=Dd.TOP,Jd=Dd.RIGHT,Qd=Dd.BOTTOM,tp=Dd.LEFT,ep=Dd.WIDTH,rp=Dd.HEIGHT,ip=Dd.TEXT_ALIGN,ap=Dd.FLEX_DIRECTION,np=Dd.FLEX_BASIS,op=Dd.FLEX_SHRINK,sp=Dd.FLEX_GROW,lp=Dd.ALIGN_SELF,hp=Dd.ALIGN_ITEMS,up=Dd.JUSTIFY_CONTENT,cp=Dd.Z_INDEX,_p=Dd.WHITE_SPACE,fp=Dd.LINE_HEIGHT,vp=Dd.LINE_CLAMP,yp=Dd.ORDER,dp=Dd.FLEX_WRAP,pp=Dd.ALIGN_CONTENT,xp=Dd.OVERFLOW,gp=Dd.FONT_SIZE,mp=Dd.FONT_FAMILY,bp=Dd.FONT_WEIGHT,Ep=Dd.WRITING_MODE,Mp=Vt.ELLIPSIS,Ap=d.AUTO,Tp=d.PX,Rp=d.PERCENT,Sp=d.REM,wp=d.VW,Cp=d.VH,kp=d.VMAX,Op=d.VMIN,Ip=qn.isRelativeOrAbsolute,Fp=qn.getBaseline,Lp=qn.getVerticalBaseline,Bp=H.extend;H.isNil;var Dp=H.isFunction,Pp=H.assignMatrix,Np=y.CANVAS,Hp=y.SVG,Gp=y.WEBGL,Wp=g.isE,Yp=g.multiply,Up=Vs.REFLOW;function zp(t){var e,r,i=[],a={},n=t.children;if(n.forEach((function(t,o){var s=t;t instanceof Nl&&(t=t.shadowRoot),t instanceof Jv&&t.__mask?void 0!==r?a[r].push(t):o&&(n[r=o-1].__iIndex=r,a[r]=[t],e=!0):(r=void 0,t instanceof Jv?(s.__zIndex=t.currentStyle[cp],Ip(t)?(s.__aIndex=!0,i.push(s)):(s.__aIndex=void 0,i.push(s))):(s.__zIndex=0,i.push(s)),s.__iIndex=o)})),i.sort((function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex})),e)for(var o=i.length-1;o>=0;o--){var s=i[o].__iIndex;a.hasOwnProperty(s)&&i.splice.apply(i,[o+1,0].concat(c(a[s])))}return i}function Xp(t){var e=[];return t.forEach((function(t,r){var i=t;t instanceof Nl&&(t=t.shadowRoot),i.__order=t instanceof Jv?t.currentStyle[yp]:0,e.push(i),i.__iIndex=r})),e.sort((function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex})),e}function Vp(t,e,r,i,a,n){var o,s,l=t.computedStyle,h=t.root,u=h.renderMode,c=r.list;if(c.forEach((function(t){i-=n?t.outerHeight:t.outerWidth})),u!==Np&&u!==Gp||(s=u===Gp?$.getFontCanvas().ctx:h.ctx),u===Np||u===Gp){var _=qn.setFontStyle(l);s.font!==_&&(s.font=_),o=s.measureText(Mp).width}else o=$.measureTextSync(Mp,l[mp],l[gp],l[bp]);for(var f=c.length-1;f>=0;f--){var v=c[f];if(!f||i+v.outerWidth>=o+1e-10){if(v instanceof ss){v.parent.__backtrack(t,e,r,v,i,a,o,l,s,u,n)}else{var y=new bs(v.x+v.outerWidth+a,v.y,o,t);e.addItem(y,!0)}break}if(v instanceof ss){var d=v.parent,p=d.textBoxes.indexOf(v);p>-1&&d.textBoxes.splice(p,1)}else v.__layoutNone();c.pop(),i+=n?v.outerHeight:v.outerWidth}}var Kp=function(t){function e(e,r,i){var a,n=s(a=t.call(this,e,r)||this).style;return n.display&&{flex:!0,block:!0,inline:!0,"inline-block":!0,inlineBlock:!0,none:!0}.hasOwnProperty(n.display)||(dy.INLINE.hasOwnProperty(a.tagName)?n.display="inline":n.display="block"),!n[bp]&&dy.BOLD.hasOwnProperty(e)&&(n.fontWeight=700),a.__style=qn.normalize(n,Dt.DOM_ENTRY_SET),a.__currentStyle=Bp([],a.__style),a.__children=Bd.buildChildren(s(a),i),a.__flexLine=[],a.__ellipsis=null,a.__zIndexChildren=null,a}return a(e,t),r(e,[{key:"__structure",value:function(t,r){var i=h(n(e.prototype),"__structure",this).call(this,t,r),a=[i],o=this.__zIndexChildren=this.__zIndexChildren||zp(this);o.forEach((function(e,r){var i=e.__structure(t+1,r);Array.isArray(i)?a=a.concat(i):a.push(i)}));var s=a.length-1;return i.num=o.length,i.total=s,a}},{key:"__modifyStruct",value:function(){var t,e=this.__struct,r=e.total||0,i=this.__root,a=i.__structs,n=this.__structure(e.lv,e.childIndex),o=a.indexOf(e);(t=i.__structs).splice.apply(t,[o,r+1].concat(c(n)));var s=0;if(this!==i&&(s=((e=this.__struct).total||0)-r))for(var l=this.__domParent;l;)l.__struct.total=l.__struct.total||0,l.__struct.total+=s,l=l.__domParent}},{key:"__insertStruct",value:function(t,e){var r,i,a=this.__struct,n=t.__structure(a.lv+1,e),o=this.__root.__structs,s=this.__zIndexChildren;if(e){var l=s[e-1].__struct,h=l.total||0;r=o.indexOf(l)+h+1}else r=o.indexOf(a)+1;Array.isArray(n)?(o.splice.apply(o,[r,0].concat(c(n))),i=(n[0].total||0)+1):(o.splice(r,0,n),i=(n.total||0)+1),r++;for(var u=s.length;r<u;r++)s[r].__struct.childIndex++;a.num++,a.total+=i;for(var _=this.__domParent;_;)(a=_.__struct).total=a.total||0,a.total+=i,_=_.__domParent}},{key:"__deleteStruct",value:function(t,e){var r=t.__struct,i=(r.total||0)+1,a=this.__root.__structs,n=a.indexOf(r);a.splice(n,i);for(var o=this.__zIndexChildren,s=e+1,l=o.length;s<l;s++)o[s].__struct.childIndex--;var h=this.__struct;h.num--,h.total=h.total||0,h.total-=i;for(var u=this.__domParent;u;)(h=u.__struct).total=h.total||0,h.total-=i,u=u.__domParent}},{key:"__updateStruct",value:function(){var t=this.__root.__structs,e=this.__struct,r=e.total||0,i=t.indexOf(e),a=this.__zIndexChildren=zp(this);if(1!==a.length){var n;a.forEach((function(t,e){t.__struct.childIndex=e}));for(var o=[],s=0,l=i+1;l<=i+r;l++){var h=t[l],u={cs:h,list:t.slice(l,l+(h.total||0)+1)};h.childIndex!==s++&&(n=!0),o.push(u),l+=h.total||0}if(n){var _=[];o.sort((function(t,e){return t.cs.childIndex-e.cs.childIndex})),o.forEach((function(t){_=_.concat(t.list)})),t.splice.apply(t,[i+1,r].concat(c(_)))}}}},{key:"__tryLayInline",value:function(t,e,r){this.__computeReflow();var i=this.flowChildren,a=this.currentStyle,n=a[Nd],o=a[ep],s=a[rp],l=a[Hd],h=a[Wd],u=a[Gd],c=a[Yd],_=a[Ud],f=a[Xd],v=a[Vd],y=a[zd],d=this.computedStyle,p=d[qd],x=d[Zd],g=d[Kd],m=d[jd];if("inline"===n){if(i.length){var b=i[0];b instanceof Nl&&(b=b.shadowRoot),b instanceof Jv?t=b.__tryLayInline(t,e,r):t-=b.firstCharWidth}}else{if(o.u!==Ap)t-=r?this.__calSize(s,e,!0):this.__calSize(o,e,!0);else for(var E=0;E<i.length;E++){if(t<0)return t;var M=i[E];M instanceof Nl&&(M=M.shadowRoot),M instanceof Jv?t=M.__tryLayInline(t,e,r):t-=M.textWidth}r?(t-=this.__calSize(c,e,!0),t-=this.__calSize(y,e,!0),t-=m):(t-=this.__calSize(h,e,!0),t-=this.__calSize(f,e,!0),t-=x)}return r?(t-=this.__calSize(u,e,!0),t-=this.__calSize(v,e,!0),t-=g):(t-=this.__calSize(l,e,!0),t-=this.__calSize(_,e,!0),t-=p),t}},{key:"__offsetX",value:function(t,r,i){if("none"!==this.__computedStyle[Nd]){h(n(e.prototype),"__offsetX",this).call(this,t,r,i);var a=this.__ellipsis;a&&a.__offsetX(t,r),r&&!this.__isInline&&this.lineBoxManager&&this.lineBoxManager.__offsetX(t),this.flowChildren.forEach((function(e){e&&e.__offsetX(t,r,i)}))}}},{key:"__offsetY",value:function(t,r,i){if("none"!==this.__computedStyle[Nd]){h(n(e.prototype),"__offsetY",this).call(this,t,r,i);var a=this.__ellipsis;a&&a.__offsetY(t,r),r&&!this.__isInline&&this.lineBoxManager&&this.lineBoxManager.__offsetY(t),this.flowChildren.forEach((function(e){e&&e.__offsetY(t,r,i)}))}}},{key:"__calBasis",value:function(t,e,r,i,a){var n=this;this.__computeReflow();var o,s=0,l=0,h=0,c=this.flowChildren,_=this.currentStyle,f=this.computedStyle,v=i.x,y=i.y,d=i.w,p=i.h,x=_[ap],g=_[np],m=_[ep],b=_[rp],E=f[fp],M=f[Nd],A=f[vp],T=0===f[Ep].indexOf("vertical"),R=t?m:b,S=g.u===Ap,w=[Tp,Rp,Sp,wp,Cp,kp,Op].indexOf(g.u)>-1,C=!S&&!w;w?s=o=this.__calSize(g,t?d:p,!0):S&&[Tp,Rp,Sp,wp,Cp,kp,Op].indexOf(R.u)>-1?s=o=this.__calSize(R,t?d:p,!0):S&&(C=!0);var k=0,O=0;if(A=A||0,t){if("flex"===M){var I=-1===["column","columnReverse"].indexOf(x);(c=Xp(c)).forEach((function(i){if(i instanceof Jv||i instanceof Nl&&i.shadowRoot instanceof Jv){var a=u(i.__calBasis(t,e,r,{x:v,y:y,w:d,h:p},!1),3),o=a[1],s=a[2];I?(l+=o,h+=s):(l=Math.max(l,o),h=Math.max(h,s))}else{if(T){var c=n.__lineBoxManager=new yy(v,y,E,T?Lp(f):Fp(f),T);i.__layoutFlow({x:v,y:y,w:d,h:p,lineBoxManager:c,lineClamp:A,isUpright:T}),l+=i.width,h+=i.width}I?(l+=i.charWidth,h+=i.textWidth):(l=Math.max(l,i.charWidth),h=Math.max(h,i.textWidth))}}))}else if(T){var F=this.__lineBoxManager=new yy(v,y,E,T?Lp(f):Fp(f),T);this.__layoutFlow({x:v,y:y,w:d,h:p,lineBoxManager:F,lineClamp:A,isUpright:T},e,!1,!0),l=h=s=this.width}else{var L=i.lineBoxManager;"inline"!==M&&(L=this.__lineBoxManager=new yy(v,y,E,T?Lp(f):Fp(f),T)),c.forEach((function(i){if(i instanceof Jv||i instanceof Nl&&i.shadowRoot instanceof Jv){var a=u(i.__calBasis(t,e,r,{x:v,y:y,w:d,h:p,lineBoxManager:L},!1),3),n=a[1],o=a[2],s=i.computedStyle[Nd];"block"===s||"flex"===s?(l=Math.max(l,n),h=Math.max(h,o),k=O=0):(k+=n,O+=o,l=Math.max(l,k),h=Math.max(h,O))}else k+=i.charWidth,O+=i.textWidth,l=Math.max(l,k),h=Math.max(h,O)}))}o&&(h=Math.max(o,h)),C&&(s=h)}else this.__layoutFlow({x:v,y:y,w:d,h:p,isUpright:T},e,!0,!1),l=h=s=this.height;return this.__addMBP(t,d,_,f,[s,l,h],a)}},{key:"__layout",value:function(t,r,i,a){h(n(e.prototype),"__layout",this).call(this,t,r,i,a),this.__layoutStyle()}},{key:"__layoutStyle",value:function(){h(n(e.prototype),"__layoutStyle",this).call(this),this.flowChildren.forEach((function(t){t instanceof Ol||t.__layoutStyle()}))}},{key:"__layoutNone",value:function(){h(n(e.prototype),"__layoutNone",this).call(this),this.children.forEach((function(t){(t instanceof Jv||t instanceof Nl&&t.shadowRoot instanceof Jv)&&t.__layoutNone()}))}},{key:"__layoutBlock",value:function(t,e,r,i){var a=this,n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=s[ip],h=s[_p],u=s[vp],c=s[fp],_=s[xp],f=this.__preLayout(t,!1),v=f.fixedWidth,y=f.fixedHeight,d=f.x,p=f.y,x=f.w,g=f.h,m=f.isParentVertical,b=f.isUpright;if(e&&(v&&!b||y&&b))b?this.__ioSize(void 0,g):this.__ioSize(x,void 0);else if(r&&y)this.__ioSize(void 0,g);else if(i&&v)this.__ioSize(x,void 0);else{u=u||0;var E,M,A=0,T=this.__lineBoxManager=new yy(d,p,c,b?Lp(s):Fp(s),b),R=0,S=0,w=d,C=p,k=[],O=[],I=n.length;n.forEach((function(t,n){var o=t instanceof Jv||t instanceof Nl&&t.shadowRoot instanceof Jv;o&&t.__computeReflow();var s=o&&"inline"===t.computedStyle[Nd],l=o&&"inlineBlock"===t.computedStyle[Nd],c=s&&t.__isRealInline(),f=A;if(!o||s||l){if(k.length&&O.length){var v=Id.getMergeMargin(O,k).diff;v&&(b?d+=v:p+=v)}O=[],k=[]}if(o)if(l||s){if(E||M)return void t.__layoutNone();if(b&&p===C||!b&&d===w||!n||"nowrap"===h)A=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:w,ly:C,lineBoxManager:T,lineClamp:u,lineClampCount:A,isUpright:b},e,r,i),t.__isIbFull&&A++,(b&&t.__isUprightIbFull||!b&&t.__isIbFull)&&"nowrap"!==h?(T.addItem(t,!0),b?(d+=t.outerWidth,p=C):(d=w,p+=t.outerHeight),T.setNotEnd()):((l||!c)&&T.addItem(t,!1),d=T.lastX,p=T.lastY),!e&&"hidden"===_&&"nowrap"===h&&(b&&p-C>g+1e-10||!b&&d-w>x+1e-10||A>f)?M=!0:u&&A>=u&&(E=!0),e&&("nowrap"===h?S+=b?t.outerHeight:t.outerWidth:(S=b?t.outerHeight:t.outerWidth,A>f&&(S=Math.max(S,b?g:x))),R=Math.max(R,S));else if(t.__tryLayInline(b?g+C-p:x+w-d,b?g:x,b)>=-1e-10)A=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:w,ly:C,lineBoxManager:T,lineClamp:u,lineClampCount:A,isUpright:b},e,r,i),(l||!c)&&T.addItem(t,!1),d=T.lastX,p=T.lastY,u&&A>=u&&(E=!0),e&&(l||A===f?(S+=b?t.outerHeight:t.outerWidth,R=Math.max(R,S)):(R=Math.max(R,b?g:x),S=b?p-C:d-w,R=Math.max(R,S)));else{if(A++,b?(d=T.endX,p=C):(d=w,p=T.endY),T.setNewLine(),u&&A>=u){t.__layoutNone(),E=!0;var y=T.list,m=y[y.length-1];return void Vp(a,T,m,b?g:x,0,b)}A=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:w,ly:C,lineBoxManager:T,lineClamp:u,lineClampCount:A,isUpright:b},e,r,i),t.__isIbFull||t.__isUprightIbFull?(T.addItem(t,!1),b?(d+=t.outerWidth,p=C):(d=w,p+=t.outerHeight),T.setNotEnd(),A++):((l||!c)&&T.addItem(t,!1),d=T.lastX,p=T.lastY),u&&A>=u&&(E=!0),e&&(R=Math.max(R,S),R=Math.max(R,b?g:x),S=b?t.outerHeight:t.outerWidth,R=Math.max(R,S))}}else{M=!1,(b&&p>C||!b&&d>w)&&A++,u&&A>=u&&(E=!0),b?p=C:d=w,T.isEnd&&(b?d=T.endX:p=T.endY,T.setNotEnd(),T.setNewLine()),t.__layoutFlow({x:d,y:p,w:x,h:g,isUpright:b},e,r,i);var F,L="none"===t.currentStyle[Nd];if(!L&&t.flowChildren&&0===t.flowChildren.length){var B=t.computedStyle,D=B[Gd],P=B[Wd],N=B[Yd],H=B[Hd],G=B[Vd],W=B[Xd],Y=B[zd],U=B[Ud],z=B[ep],X=B[rp],V=B[Kd],K=B[Zd],j=B[jd],Z=B[qd];b&&U<=0&&W<=0&&z<=0&&Z<=0&&K<=0?(k.push(P),O.push(H),F=!0):!b&&G<=0&&Y<=0&&X<=0&&V<=0&&j<=0&&(k.push(N),O.push(D),F=!0)}if(b?(d+=t.outerWidth,T.__lastX=d):(p+=t.outerHeight,T.__lastY=p),e&&(R=Math.max(R,b?t.outerHeight:t.outerWidth),S=0),L||F){if(n===I-1){var q=Id.getMergeMargin(O,k).diff;q&&(b?d+=q:p+=q)}}else{var $=t.computedStyle,J=$[Gd],Q=$[Wd],tt=$[Yd],et=$[Hd];if(k.length)if(b){O.push(et);var rt=Id.getMergeMargin(O,k).diff;rt&&(t.__offsetX(rt,!0,null),d+=rt)}else{O.push(J);var it=Id.getMergeMargin(O,k).diff;it&&(t.__offsetY(it,!0,null),p+=it)}O=[],k=[b?Q:tt]}}else{if(E||M)return void t.__layoutNone();if(b&&p===C||!b&&d===w||!n||"nowrap"===h)A=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:w,ly:C,lineBoxManager:T,lineClamp:u,lineClampCount:A,isUpright:b}),d=T.lastX,p=T.lastY,!e&&"hidden"===_&&"nowrap"===h&&(b&&p-C>g+1e-10||!b&&d-w>x+1e-10||A>f)?M=!0:u&&A>=u&&(E=!0),e&&("nowrap"===h?S+=b?t.height:t.width:(S=b?t.height:t.width,A>f&&(S=Math.max(S,b?g:x))),R=Math.max(R,S));else if(t.__tryLayInline(b?g+C-p:x+w-d)>=-1e-10)A=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:w,ly:C,lineBoxManager:T,lineClamp:u,lineClampCount:A,isUpright:b}),d=T.lastX,p=T.lastY,u&&A>=u&&(E=!0),e&&(A===f?(S+=b?t.height:t.width,R=Math.max(R,S)):(R=Math.max(R,b?g:x),S=b?p-C:d-w,R=Math.max(R,S)));else{if(A++,b?(d=T.endX,p=C):(d=w,p=T.endY),T.setNewLine(),u&&A>=u){t.__layoutNone(),E=!0;var at=T.list,nt=at[at.length-1];return void Vp(a,T,nt,b?g:x,0,b)}A=t.__layoutFlow({x:d,y:p,w:x,h:g,lx:w,ly:C,lineBoxManager:T,lineClamp:u,lineClampCount:A,isUpright:b}),d=T.lastX,p=T.lastY,u&&A>=u&&(E=!0),e&&(R=Math.max(R,S),R=Math.max(R,b?g:x),S=b?t.height:t.width,R=Math.max(R,S))}}})),T.isEnd&&(b?d=T.endX:p=T.endY);var F=0,L=0;if(F=v||!e&&!m&&!b?x:e?b?d-t.x:R:d-t.x,L=y||!e&&m&&b?g:e&&b?R:p-t.y,this.__ioSize(F,L),!e){var B=T.verticalAlign(b);if(B){b&&!v?this.__resizeX(B,null):b||y||this.__resizeY(B,null);var D=0,P=T.spreadList,N=!1,H=!1;n.forEach((function(t){if((t instanceof Jv||t instanceof Nl&&t.shadowRoot instanceof Jv)&&["block","flex"].indexOf(t.computedStyle[Nd])>-1){if(!H)return;N=!0,b?t.__offsetX(P[D],!0,null):t.__offsetY(P[D],!0,null)}else H=!0,N&&D++,N=!1}))}r||i||(["center","right"].indexOf(l)>-1&&(T.horizonAlign(b?L:F,l,b),n.forEach((function(t){t instanceof Nl&&(t=t.shadowRoot),t instanceof Ol&&t.__inlineSize(b)}))),T.domList.forEach((function(t){t.__inlineSize(b?L:F,l,b)})),this.__marginAuto(o,t,b))}}}},{key:"__layoutFlex",value:function(t,e,r,i){var a=this,n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=this.__flexLine,h=s[ap],c=s[up],_=s[hp],f=s[vp],v=s[dp],y=s[pp],d=s[fp],p=s[ip],x=this.__preLayout(t,!1),g=x.fixedWidth,m=x.fixedHeight,b=x.x,E=x.y,M=x.w,A=x.h,T=x.isParentVertical,R=x.isUpright;if(e&&(g&&!R||m&&R))R?this.__ioSize(void 0,A):this.__ioSize(M,void 0);else if(r&&m)this.__ioSize(void 0,A);else if(i&&g)this.__ioSize(M,void 0);else{l.splice(0),f=f||0;var S=-1===["column","columnReverse"].indexOf(h),w=[],C=[],k=[],O=[],I=[],F=Xp(n);F.forEach((function(t){if(t instanceof Jv||t instanceof Nl&&t.shadowRoot instanceof Jv){var a=t.currentStyle,n=t.computedStyle,o=u(t.__calBasis(S,e,r,{x:b,y:E,w:M,h:A},!0),3),l=o[0],h=o[1],c=o[2],_=a[sp],v=a[op];n[np]=l,w.push(_),C.push(v),k.push(l),O.push(c),I.push(h)}else if(w.push(0),C.push(1),S&&R||!S&&!R){var y=new yy(b,E,d,R?Lp(s):Fp(s),R);t.__layoutFlow({x:b,y:E,w:M,h:A,lineBoxManager:y,lineClamp:f,lineClampCount:0,isUpright:R},e,r,i);var p=R?t.width:t.height;k.push(p),O.push(p),I.push(p)}else{var x=t.charWidth,g=t.textWidth;k.push(g),O.push(g),I.push(x)}}));var L=S?M:A,B=["wrap","wrapReverse"].indexOf(v)>-1,D=[],P=0,N=[];k.forEach((function(t,e){var r,i=I[e],a=O[e];r=t<i?i:t>a?a:t,N.push(r),B?P+r>L?P?(l.push(D),D=[F[e]],P=r):(D.push(F[e]),l.push(D),D=[],P=0):(D.push(F[e]),P+=r):D.push(F[e])})),D.length&&l.push(D);var H=0,G={x:b,y:E,w:M,h:A},W=[],Y=[],U=[];if(l.forEach((function(t){var n=t.length,o=H+n,l=u(a.__layoutFlexLine(G,S,e,r,i,R,L,g,m,f,0,d,s,c,_,F.slice(H,o),t,p,w.slice(H,o),C.slice(H,o),k.slice(H,o),N.slice(H,o),I.slice(H,o),O.slice(H,o)),5),h=l[0],v=l[1],y=l[2],x=l[3],M=l[4];S?G.y=v:G.x=h,b=Math.max(b,h),E=Math.max(E,v),W.push(y),Y.push(x),U.push(M),H+=n})),e){var z=0;return l.forEach((function(t){var e=0;t.forEach((function(t){S?e+=R?t.outerHeight:t.outerWidth:e=Math.max(e,R?t.outerHeight:t.outerWidth),t instanceof Ol&&(R?t.textWidth>A&&(z=Math.max(z,A)):t.textWidth>M&&(z=Math.max(z,M)))})),z=Math.max(z,e)})),void(R?this.__ioSize(void 0,z):this.__ioSize(z,void 0))}var X=0,V=0;if(X=g||!e&&!T&&!R?M:b-t.x,V=m||!e&&T&&R?A:E-t.y,this.__ioSize(X,V),!r&&!i){"rowReverse"===h?l.forEach((function(e){e.forEach((function(e){var r=X-e.outerWidth-2*(e.x-t.x);r&&e.__offsetX(r,!0,null)}))})):"columnReverse"===h&&l.forEach((function(e){e.forEach((function(e){var r=V-e.outerHeight-2*(e.y-t.y);r&&e.__offsetY(r,!0,null)}))}));var K,j=l.length;if("wrapReverse"===v&&j>1){var Z=0,q=[];W.forEach((function(t){q.push(Z),Z+=t}));for(var $=0,J=function(t){var e=l[t],r=q[t],i=$-r;i&&e.forEach((function(t){S?t.__offsetY(i,!0,null):t.__offsetX(i,!0,null)})),$+=W[t]},Q=j-1;Q>=0;Q--)J(Q);l.reverse()}if(j>1&&(m&&S||!S)){var tt=S?V-(E-t.y):X-(b-t.x);if(tt>0)if("center"===y){var et=.5*tt;F.forEach((function(t){S?t.__offsetY(et,!0,null):t.__offsetX(et,!0,null)}))}else if("flexStart"===y);else if("flexEnd"===y)F.forEach((function(t){S?t.__offsetY(tt,!0,null):t.__offsetX(tt,!0,null)}));else if("spaceBetween"===y){var rt=tt/(j-1);l.forEach((function(t,e){e&&t.forEach((function(t){S?t.__offsetY(rt,!0,null):t.__offsetX(rt,!0,null)}))}))}else if("spaceAround"===y){var it=tt/(j+1);l.forEach((function(t,e){t.forEach((function(t){S?t.__offsetY(it*(e+1),!0,null):t.__offsetX(it*(e+1),!0,null)}))}))}else K=tt/j,l.forEach((function(t,e){e&&t.forEach((function(t){S?t.__offsetY(K*e,!0,null):t.__offsetX(K*e,!0,null)}))}))}if(!r&&!i){if(j>1)l.forEach((function(t,e){var r=W[e];K&&(r+=K),a.__flexAlign(t,_,c,S,r,Y[e],U[e])}));else if(j){var at=S?V:X;this.__flexAlign(l[0],_,c,S,at,Y[0],U[0])}this.__marginAuto(o,t,R)}}}}},{key:"__layoutFlexLine",value:function(t,e,r,i,a,n,o,s,l,h,u,c,_,f,v,y,d,p,x,g,m,b,E,M){var A=this,T=t.x,R=t.y,S=t.w,w=t.h,C=0;b.forEach((function(t){C+=t}));var k=C>=o,O=[];m.forEach((function(t,e){k?(!g[e]||m[e]<b[e])&&(O[e]=b[e]):(!x[e]||m[e]>b[e])&&(O[e]=b[e])}));var I=0;m.forEach((function(t,e){void 0!==O[e]?I+=O[e]:I+=t}));var F=1/0;F=e?S:l?w:I,I=Math.abs(F-I);var L=0,B=0;k?function(){for(var t=g.map((function(t,e){if(void 0===O[e])return B+=t,t}));0!==B;){B<1&&(L+=I*(1-B),I*=B);var e=void 0,r=0,i=0,a=0;if(t.forEach((function(n,o){if(n){var s=n/B*I,l=m[o]-s;l<E[o]?(O[o]=E[o],t[o]=0,e=!0,i+=m[o]-E[o]):(O[o]=l,r+=n,a+=l)}})),!e){I-=a;break}I-=i,B=r}}():function(){for(var t=x.map((function(t,e){if(void 0===O[e])return B+=t,t}));0!==B;){B<1&&(L+=I*(1-B),I*=B);var e=void 0,r=0,i=0,a=0;if(t.forEach((function(n,o){if(n){var s=n/B*I,l=m[o]+s;l<E[o]?(O[o]=E[o],t[o]=0,e=!0,i+=m[o]-E[o]):(O[o]=l,r+=n,a+=l)}})),!e){I-=a;break}I-=i,B=r}}();var D=0,P=[],N=0;return y.forEach((function(t,o){var s=O[o];if(t instanceof Jv||t instanceof Nl&&t.shadowRoot instanceof Jv){if(e)t.__layoutFlow({x:T,y:R,w:s,h:w,w3:s,isUpright:n},r,i,a);else{var l,f=t.currentStyle,y=f[lp],d=f[ep];if(r||i||a)t.__layoutFlow({x:T,y:R,w:S,h:s,h3:s,isUpright:n},r,i,a);else(d.u!==Ap||"stretch"===y||"auto"===y&&"stretch"===v)&&(l=!0),l?t.__layoutFlow({x:T,y:R,w:S,h:s,h3:s,isUpright:n},r,i,a):(t.__layoutFlow({x:T,y:R,w:S,h:s,h3:s,isUpright:n},!0,i,a),t.__layoutFlow({x:T,y:R,w:S,w3:t.outerWidth,h:s,h3:s,isUpright:n},r,i,a))}if(!r&&!i&&!a){var p=t.currentStyle;e?(p[Hd].u===Ap&&N++,p[Wd].u===Ap&&N++):(p[Gd].u===Ap&&N++,p[Yd].u===Ap&&N++)}}else{var x=A.__lineBoxManager=new yy(T,R,c,n?Lp(_):Fp(_),n);P.push(x),t.__layoutFlow({x:T,y:R,w:e?s:S,h:e?w:s,lineBoxManager:x,lineClamp:h,lineClampCount:u,isUpright:n})}e?(T+=t.outerWidth,D=Math.max(D,t.outerHeight)):(R+=t.outerHeight,D=Math.max(D,t.outerWidth))})),e?R+=D:T+=D,!r&&!i&&!a&&["center","right"].indexOf(p)>-1&&P.forEach((function(t){t.horizonAlign(n?t.height:t.width,p,n)})),[T,R,D,N,k?0:Math.max(0,I+L)]}},{key:"__flexAlign",value:function(t,e,r,i,a,n,o){var s=0;t.forEach((function(t){s=Math.max(s,t.firstBaseline)}));var l=t.length;if(n)for(var h=0,u=o/n,c=0;c<l;c++){var _=t[c],f=_.currentStyle;i?(f[Hd].u===Ap?(h+=u,_.__offsetX(h,!0,null)):h&&_.__offsetX(h,!0,null),f[Wd].u===Ap&&(h+=u)):(f[Gd].u===Ap?(h+=u,_.__offsetY(h,!0,null)):h&&_.__offsetY(h,!0,null),f[Yd].u===Ap&&(h+=u))}else if("flexEnd"===r)for(var v=0;v<l;v++){var y=t[v];i?y.__offsetX(o,!0,null):y.__offsetY(o,!0,null)}else if("center"===r)for(var d=.5*o,p=0;p<l;p++){var x=t[p];i?x.__offsetX(d,!0,null):x.__offsetY(d,!0,null)}else if("spaceBetween"===r)for(var g=o/(l-1),m=1;m<l;m++){var b=t[m];i?b.__offsetX(g*m,!0,null):b.__offsetY(g*m,!0,null)}else if("spaceAround"===r)for(var E=.5*o/l,M=0;M<l;M++){var A=t[M];i?A.__offsetX(E*(2*M+1),!0,null):A.__offsetY(E*(2*M+1),!0,null)}else if("spaceEvenly"===r)for(var T=o/(l+1),R=0;R<l;R++){var S=t[R];i?S.__offsetX(T*(R+1),!0,null):S.__offsetY(T*(R+1),!0,null)}t.forEach((function(t){var r=t.currentStyle[lp];if(i)if("flexStart"===r);else if("flexEnd"===r){var n=a-t.outerHeight;0!==n&&t.__offsetY(n,!0,null)}else if("center"===r){var o=a-t.outerHeight;0!==o&&t.__offsetY(.5*o,!0,null)}else if("stretch"===r){var l=t.computedStyle,h=t.currentStyle[rp],u=l[Kd],c=l[jd],_=l[Gd],f=l[Yd],v=l[Vd],y=l[zd];if(h.u===Ap){var d=t.height,p=(t.__height=l[rp]=a-_-f-v-y-u-c)-d;t.__y4+=p,t.__y5+=p,t.__y6+=p,t.__height+=p,t.__clientHeight+=p,t.__offsetHeight+=p,t.__outerHeight+=p}}else if("baseline"===r){var x=s-t.firstBaseline;0!==x&&t.__offsetY(x,!0,null)}else if("flexStart"===e);else if("center"===e){var g=a-t.outerHeight;0!==g&&t.__offsetY(.5*g,!0,null)}else if("flexEnd"===e){var m=a-t.outerHeight;0!==m&&t.__offsetY(m,!0,null)}else if("baseline"===e){var b=s-t.firstBaseline;0!==b&&t.__offsetY(b,!0,null)}else{var E=t.computedStyle,M=t.currentStyle,A=M[Nd],T=M[ap],R=M[rp];i&&"flex"===A&&"column"===T&&R.u===Ap&&t.outerHeight<a&&t.__layoutFlow(Object.assign(t.__layoutData,{h3:a}));var S=E[Kd],w=E[jd],C=E[Gd],k=E[Yd],O=E[Vd],I=E[zd];if(R.u===Ap){var F=t.height,L=a-C-k-O-I-S-w-F;t.__y4+=L,t.__y5+=L,t.__y6+=L,t.__height+=L,t.__clientHeight+=L,t.__offsetHeight+=L,t.__outerHeight+=L}}else if("flexStart"===r);else if("flexEnd"===r){var B=a-t.outerWidth;0!==B&&t.__offsetX(B,!0,null)}else if("center"===r){var D=a-t.outerWidth;0!==D&&t.__offsetX(.5*D,!0,null)}else if("stretch"===r){var P=t.computedStyle,N=t.currentStyle[ep],H=P[Zd],G=P[qd],W=P[Wd],Y=P[Hd],U=P[Xd],z=P[Ud];if(N.u===Ap){var X=t.width,V=(t.__width=P[ep]=a-Y-W-z-U-H-G)-X;t.__x4+=V,t.__x5+=V,t.__x6+=V,t.__width+=V,t.__clientWidth+=V,t.__offsetWidth+=V,t.__outerWidth+=V}}else if("baseline"===e){var K=s-t.firstBaseline;0!==K&&t.__offsetX(K,!0,null)}else if("flexStart"===e);else if("center"===e){var j=a-t.outerWidth;0!==j&&t.__offsetX(.5*j,!0,null)}else if("flexEnd"===e){var Z=a-t.outerWidth;0!==Z&&t.__offsetX(Z,!0,null)}else if("baseline"===e){var q=s-t.firstBaseline;0!==q&&t.__offsetX(q,!0,null)}else{var $=t.computedStyle,J=t.currentStyle[ep],Q=$[Zd],tt=$[qd],et=$[Wd],rt=$[Hd],it=$[Xd],at=$[Ud];if(J.u===Ap){var nt=t.width,ot=(t.__width=$[ep]=a-rt-et-at-it-Q-tt)-nt;t.__x4+=ot,t.__x5+=ot,t.__x6+=ot,t.__width+=ot,t.__clientWidth+=ot,t.__offsetWidth+=ot,t.__outerWidth+=ot}}}))}},{key:"__layoutInline",value:function(t,e,r,i,a){var n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=s[ip],h=s[_p],u=s[vp],c=s[fp],_=s[Gd],f=s[Yd],v=s[Hd],y=s[Wd],d=s[Kd],p=s[jd],x=s[qd],g=s[Zd],m=s[Vd],b=s[zd],E=s[Ud],M=s[Xd],A=t.lineClampCount||0,T=this.__preLayout(t,a),R=T.fixedWidth,S=T.fixedHeight,w=T.x,C=T.y,k=T.w,O=T.h,I=T.lx,F=T.ly,L=T.lineBoxManager,B=T.endSpace,D=T.selfEndSpace,P=T.isUpright;if(e&&(R&&!P||S&&P))return P?this.__ioSize(void 0,O):this.__ioSize(k,void 0),A;var N=o[ep],H=o[rp];if(a&&!this.__isRealInline()&&(a=!1),!a){if(r&&S)return this.__ioSize(void 0,O),A;if(i&&R)return this.__ioSize(k,void 0),A}if(a){this.__isInline=!0,this.__lineBoxManager=L;var G=P?Lp(s):Fp(s);(P&&(_||f||m||b||d||p)||!P&&(v||y||E||M||x||g))&&L.isNewLine?L.genLineBoxByInlineIfNewLine(w,C,c,G):L.setLbByInlineIfNotNewLine(c,G),u=t.lineClamp||0}else L=this.__lineBoxManager=new yy(w,C,c,P?Lp(s):Fp(s),P),I=w,F=C,B=D=A=0;a&&(this.contentBoxList.splice(0),L.pushContentBoxList(this));for(var W=this;"inline"===W.computedStyle[Nd];)W=W.domParent;var Y,U,z,X=W.computedStyle[xp],V=!1,K=!1,j=n.length,Z=!1,q=!1;if(n.forEach((function(t,n){if(Z||q)t.__layoutNone();else{var o=t instanceof Jv||t instanceof Nl&&t.shadowRoot instanceof Jv;o&&t.__computeReflow();var s=o&&"inline"===t.computedStyle[Nd],l=o&&"inlineBlock"===t.computedStyle[Nd],c=s&&t.__isRealInline();a&&!Y&&("nowrap"===h||!o&&n===j-1||u&&n===j-1||A===u-1)&&(Y=!0,B+=D);var _=A;if(o){if(s||l||(t.currentStyle[Nd]=t.computedStyle[Nd]="inlineBlock",l=!0,$.warn("Inline can not contain block/flex")),P&&C===F||!P&&w===I||!n||"nowrap"===h)A=t.__layoutFlow({x:w,y:C,w:k,h:O,lx:I,ly:F,lineBoxManager:L,endSpace:B,lineClamp:u,lineClampCount:A,isUpright:P},e,r,i),(t.__isIbFull||t.__isUprightIbFull)&&A++,t.__isIbFull&&"nowrap"!==h?(P&&O.u===Ap?K=!0:P||k.u!==Ap||(V=!0),L.addItem(t,!0),P?(w+=t.outerWidth,C=F):(w=I,C+=t.outerHeight),L.setNotEnd()):((l||!c)&&L.addItem(t,!1),w=L.lastX,C=L.lastY),!e&&"hidden"===X&&"nowrap"===h&&(P&&C-F>O+1e-10||!P&&w-I>k+1e-10||A>_)?q=!0:u&&A>=u&&(Z=!0);else if(t.__tryLayInline(P?O+F-C-B:k+I-w-B,P?O:k,P)>=-1e-10)A=t.__layoutFlow({x:w,y:C,w:k,h:O,lx:I,ly:F,lineBoxManager:L,endSpace:B,lineClamp:u,lineClampCount:A,isUpright:P},e,r,i),(l||!c)&&L.addItem(t,!1),w=L.lastX,C=L.lastY,u&&A>=u&&(Z=!0);else{if(A++,P?(w=L.endX,C=F):(w=I,C=L.endY),L.setNewLine(),u&&A>=u){t.__layoutNone(),Z=!0;var f=L.list,v=f[f.length-1];return void Vp(W,L,v,k,B,P)}A=t.__layoutFlow({x:w,y:C,w:k,h:O,lx:I,ly:F,lineBoxManager:L,endSpace:B,lineClamp:u,lineClampCount:A,isUpright:P},e,r,i),t.__isIbFull||t.__isUprightIbFull?(L.addItem(t,!0),P?(w+=t.outerWidth,C=F):(w=I,C+=t.outerHeight),L.setNotEnd(),A++):((l||!c)&&L.addItem(t,!1),w=L.lastX,C=L.lastY),u&&A>=u&&(Z=!0)}}else{var y=L.size;if(P&&C===F||!P&&w===I||!n||"nowrap"===h)A=t.__layoutFlow({x:w,y:C,w:k,h:O,lx:I,ly:F,lineBoxManager:L,endSpace:B,lineClamp:u,lineClampCount:A,isUpright:P},e,r,i),w=L.lastX,C=L.lastY,!a&&L.size-y>1&&(H.u===Ap&&P&&(K=!0),N.u!==Ap||P||(V=!0)),!e&&"hidden"===X&&"nowrap"===h&&(P&&C-F>O+1e-10||!P&&w-I>k+1e-10||A>_)?q=!0:u&&A>=u&&(Z=!0);else if(t.__tryLayInline(P?O+F-C-B:k+I-w-B)>=-1e-10)A=t.__layoutFlow({x:w,y:C,w:k,h:O,lx:I,ly:F,lineBoxManager:L,endSpace:B,lineClamp:u,lineClampCount:A,isUpright:P},e,r,i),w=L.lastX,C=L.lastY,u&&A>=u&&(Z=!0);else{if(A++,P?(w=L.endX,C=F):(w=I,C=L.endY),L.setNewLine(),u&&A>=u){t.__layoutNone(),Z=!0;var d=L.list,p=d[d.length-1];return void Vp(W,L,p,k,B,P)}A=t.__layoutFlow({x:w,y:C,w:k,h:O,lx:I,ly:F,lineBoxManager:L,endSpace:B,lineClamp:u,lineClampCount:A,isUpright:P},e,r,i),w=L.lastX,C=L.lastY,!a&&L.size-y>1&&(H.u===Ap&&P&&(K=!0),N.u!==Ap||P||(V=!0)),u&&A>=u&&(Z=!0)}}}})),P?w=L.endX:C=L.endY,this.__isIbFull=V,this.__isUprightIbFull=K,a){if(D&&(P?L.addY(D):L.addX(D)),!n.length){var J=s[Gd],Q=s[Hd],tt=s[Vd],et=s[Ud],rt=s[Kd],it=s[qd];P?L.addY(J+tt+rt):L.addX(Q+et+it)}L.popContentBoxList(),e&&this.__inlineSize(0,"left",P)}else{var at=L.max-(P?t.y:t.x);P?(U=R?k:w-t.x,z=S?O:V?Math.max(O,at):at):(U=R?k:V?Math.max(k,at):at,z=S?O:C-t.y),this.__ioSize(U,z)}if(!e&&!a){var nt=L.verticalAlign(P);nt&&(P&&!R?this.__resizeX(nt,null):P||S||this.__resizeY(nt,null)),r||i||(["center","right"].indexOf(l)>-1&&(L.horizonAlign(P?z:U,l,P),n.forEach((function(t){t instanceof Nl&&(t=t.shadowRoot),t instanceof Ol&&t.__inlineSize(P)}))),L.domList.forEach((function(t){t.__inlineSize(P?z:U,l,P)})))}return A}},{key:"__inlineSize",value:function(t,e,r){var i=this.contentBoxList,a=this.computedStyle,n=a[Nd],o=a[Gd],s=a[Wd],l=a[Yd],h=a[Hd],u=a[Vd],c=a[Xd],_=a[zd],f=a[Ud],v=a[Kd],y=a[Zd],d=a[jd],p=a[qd],x=a[fp];if("none"!==n){var g,m,b,E,M,A,T,R,S,w,C,k,O,I,F,L,B=i.length;if(B)i.forEach((function(t,e){e?(b=Math.min(b,t.x),T=Math.min(T,t.x),C=Math.min(C,t.x),F=Math.min(F,t.x),e===B-1?(g=M=S=O=Math.max(g,t.x+t.outerWidth),m=A=w=I=Math.max(m,t.y+t.outerHeight),M+=c,A+=_,S+=c+y,w+=_+d,O+=y+c+s,I+=d+_+l):g=M=S=O=Math.max(g,t.x+t.outerWidth)):(b=t.x,E=t.y,F=(C=(T=b-f)-p)-h,L=(k=(R=E-u)-v)-o,g=M=S=O=t.x+t.outerWidth,m=A=w=I=t.y+t.outerHeight,e===B-1&&(M+=c,A+=_,S+=c+y,w+=_+d,O+=y+c+s,I+=d+_+l))})),this.__x=F,this.__y=L,this.__width=a[ep]=g-b,this.__height=a[rp]=Math.max(x,m-E),this.__clientWidth=M-T,this.__clientHeight=A-R,this.__offsetWidth=S-C,this.__offsetHeight=w-k,this.__outerWidth=O-F,this.__outerHeight=I-L,this.__x1=C,this.__y1=k,this.__x2=T,this.__y2=R,this.__x3=b,this.__y3=E,this.__x4=g,this.__y4=m,this.__x5=M,this.__y5=A,this.__x6=S,this.__y6=w,["center","right"].indexOf(e)>-1&&this.children.forEach((function(t){t instanceof Ol&&t.__inlineSize(r)}));else{var D=0,P=0;if(["center","right"].indexOf(e)>-1){var N=t;"center"===e&&(N*=.5),N>0&&(r?this.__offsetY(N,!0,null):this.__offsetX(N,!0,null))}r?(D=x,this.__ioSize(D,0),this.__x-=h+f+p):(P=x,this.__ioSize(0,P),this.__y-=o+u+v),this.__x1=this.__x+h,this.__y1=this.__y+o,this.__x2=this.__x1+p,this.__y2=this.__y1+v,this.__x4=this.__x3=this.__x2+f,this.__y4=this.__y3=this.__y2+u,this.__x5=this.__x4+D+c,this.__y5=this.__y4+P+_,this.__x6=this.__x5+y,this.__y6=this.__y5+d,this.__clientWidth=this.__x5-this.__x2,this.__clientHeight=this.__y5-this.__y2,this.__offsetWidth=this.__x6-this.__x1,this.__offsetHeight=this.__y6-this.__y1,this.__outerWidth=this.__offsetWidth+h+s,this.__outerHeight=this.__offsetHeight+o+l}}}},{key:"__layoutAbs",value:function(t,r,i){var a=this,n=t.__x,o=t.__y,s=t.__clientWidth,l=t.__clientHeight,h=t.__computedStyle,u=this.__isDestroyed,c=this.children,_=this.absChildren,f=h[Nd],v=h[Kd],y=h[qd],d=h[Gd],p=h[Hd],x=h[Ud],g=h[Vd];u||"none"===f?this.__layoutNone():(n+=p+y,o+=d+v,_.forEach((function(e){if(i){var h=e;if(h instanceof Nl&&(h=e.shadowRoot),i!==h&&i!==e)return}var u=e.currentStyle,c=e.computedStyle;if(e.isDestroyed||"none"===u[Nd])e.__layoutNone();else{e.__computeReflow(),e.__mp(u,c,s);var _,f,v,y,d,p,m,b,E,M,A=u[tp],T=u[$d],R=u[Jd],S=u[Qd],w=u[ep],C=u[rp];if(A.u!==Ap?(M=!0,c[tp]=a.__calSize(A,s,!0)):c[tp]="auto",R.u!==Ap?(b=!0,c[Jd]=a.__calSize(R,s,!0)):c[Jd]="auto",T.u!==Ap?(m=!0,c[$d]=a.__calSize(T,l,!0)):c[$d]="auto",S.u!==Ap?(E=!0,c[Qd]=a.__calSize(S,l,!0)):c[Qd]="auto",M&&b?(_=n+c[tp],v=s-c[Jd]-c[tp]):M?(_=n+c[tp],w.u!==Ap&&(v=a.__calSize(w,s,!0))):b?(w.u!==Ap?v=a.__calSize(w,s,!0):d=!0,_=n+s-c[Jd]-(v||0),_-=c[Hd],_-=c[Wd],_-=c[Ud],_-=c[Xd],_-=c[qd],_-=c[Zd]):(_=n+x,w.u!==Ap&&(v=a.__calSize(w,s,!0))),m&&E)f=o+c[$d],y=l-c[$d]-c[Qd];else if(m)f=o+c[$d],C.u!==Ap&&(y=a.__calSize(C,l,!0));else if(E)C.u!==Ap?y=a.__calSize(C,l,!0):p=!0,f=o+l-c[Qd]-(y||0),f-=c[Gd],f-=c[Yd],f-=c[Vd],f-=c[zd],f-=c[Kd],f-=c[jd];else{f=o+g;for(var k=e.__prev,O=[],I=[];k;){if(k instanceof Ol||k instanceof Nl&&k.shadowRoot instanceof Ol||"absolute"!==k.computedStyle[Pd]){var F=k.computedStyle;if(!(k.clientHeight<=0)){I.push(F[Yd]);var L=Id.getMergeMargin(O,I);f=k.__y1+k.offsetHeight+L.target;break}O.push(F[Gd]),I.push(F[Yd])}k=k.__prev}C.u!==Ap&&(y=a.__calSize(C,l,!0))}var B=d?_-n:s+n-_,D=p?f-o:l+o-f;void 0===v&&(e.__layoutFlow({x:_,y:f,w:B,h:D,isUpright:r.isUpright,container:t},!0,!1),B=e.outerWidth),e.__layoutFlow({x:_,y:f,w:B,h:D,w2:v,h2:y,isUpright:r.isUpright,container:t},!1,!1),d&&e.__offsetX(-e.outerWidth,!0,null),p&&e.__offsetY(-e.outerHeight,!0,null),e.__layoutStyle()}})),c.forEach((function(a){if(i){var n=a;if(n instanceof Nl&&(n=a.shadowRoot),i!==n&&i!==a)return}if(a instanceof e)a.__layoutAbs(Ip(a)?a:t,r,null);else if(a instanceof Nl){var o=a.shadowRoot;o instanceof e&&o.__layoutAbs(o,r,null)}})),this.__execAr())}},{key:"render",value:function(t,r,i,a){var o=h(n(e.prototype),"render",this).call(this,t,r,i,a),s=this.__ellipsis;return s&&s.render(t,o.ctx,i,a),t===Hp&&(this.virtualDom.type="dom"),o}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach((function(t){t&&t.__destroy()})),this.__ellipsis&&this.__ellipsis.__destroy(),h(n(e.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,r,i){if(i)return h(n(e.prototype),"__emitEvent",this).call(this,t,i);var a=this.__isDestroyed,o=this.__computedStyle,s=this.__mask,l=this.__cacheTotal;if(!(a||"none"===o[Nd]||t.__stopPropagation||s)&&("hidden"!==o[xp]||this.willResponseEvent(t,!0))){if(l&&l.available&&l.bbox){Wp(this.__matrix)||(r=Yp(r,this.__matrix),Pp(this.__matrixEvent,r));var u=l.bbox;if(!se.pointInQuadrilateral(t.x,t.y,u[0],u[1],u[2],u[1],u[2],u[3],u[0],u[3],this.__matrixEvent))return}else g.isE(r)||H.assignMatrix(this.__matrixEvent,g.multiply(r,this.__matrix));var c,_=t.event.type,f=this.listener,v=this.zIndexChildren;f.hasOwnProperty(_)&&(c=f[_]);for(var y=v.length-1;y>=0;y--){var d=v[y];if((d instanceof Jv||d instanceof Nl&&d.shadowRoot instanceof Jv)&&d.__emitEvent(t,r,!1)){if(t.__stopPropagation)return;return Dp(c)&&!t.__stopImmediatePropagation&&c.call(this,t),!0}}return h(n(e.prototype),"__emitEvent",this).call(this,t,!1)}}},{key:"appendChild",value:function(t,e){var r=this.__root,i=this.__host,a=this.__children;t instanceof v||t instanceof Nl||(t=new Ol(t)),t.remove();var n=a.length;if(n){var o=a[n-1];o.__next=t,t.__prev=o}t.__parent=this,a.push(t);var s=this.__zIndexChildren=zp(this);if(this.__isDestroyed)Dp(e)&&e();else{if(Bd.relation(r,i,this,t,{}),this.__insertStruct(t,s.indexOf(t)),"none"===t.currentStyle[Nd]||"none"===this.__computedStyle[Nd])return t.__layoutNone(),void(Dp(e)&&e());t instanceof Ol&&(t=this),r.__addUpdate(t,null,Up,!0,null,null,e)}}},{key:"prependChild",value:function(t,e){var r=this.__root,i=this.__host,a=this.__children;if(t instanceof v||t instanceof Nl||(t=new Ol(t)),t.remove(),a.length){var n=a[0];n.__prev=t,t.__next=n}t.__parent=this,a.unshift(t);var o=this.__zIndexChildren=zp(this);if(this.__isDestroyed)Dp(e)&&e();else{if(Bd.relation(r,i,this,t,{}),this.__insertStruct(t,o.indexOf(t)),"none"===t.currentStyle[Nd]||"none"===this.__computedStyle[Nd])return t.__layoutNone(),void(Dp(e)&&e());t instanceof Ol&&(t=this),r.__addUpdate(t,null,Up,!0,null,null,e)}}},{key:"insertBefore",value:function(t,e){var r=this.__root;t instanceof v||t instanceof Nl||(t=new Ol(t)),t.remove();var i,a=this.isShadowRoot?this.__hostRoot.__parent:this.__parent;if(!a)throw new Error("InsertBefore() illegal");var n=a.__children,o=this.isShadowRoot?this.__hostRoot:this;if(-1===(i=n.indexOf(o)))throw new Error("Index exception of insertBefore()");var s=o.__prev;if(s&&(s.__next=t,t.__prev=s),t.__next=o,o.__prev=t,n.splice(i,0,t),a.__zIndexChildren=zp(a),this.__isDestroyed)Dp(e)&&e();else{if(Bd.relation(r,a.__host,a,t,{}),a.__insertStruct(t,a.__zIndexChildren.indexOf(t)),"none"===t.currentStyle[Nd]||"none"===a.__computedStyle[Nd])return t.__layoutNone(),void(Dp(e)&&e());t instanceof Ol&&(t=a),r.__addUpdate(t,null,Up,!0,null,null,e)}}},{key:"insertAfter",value:function(t,e){var r=this.__root;t instanceof v||t instanceof Nl||(t=new Ol(t)),t.remove();var i,a=this.isShadowRoot?this.__hostRoot.__parent:this.__parent;if(!a)throw new Error("InsertAfter() illegal");var n=a.__children,o=this.isShadowRoot?this.__hostRoot:this;if(-1===(i=n.indexOf(o)))throw new Error("Index exception of insertBefore()");if(o.__next=t,t.__prev=o,n.splice(i+1,0,t),a.__zIndexChildren=zp(a),this.__isDestroyed)Dp(e)&&e();else{if(Bd.relation(r,a.__host,a,t,{}),a.__insertStruct(t,a.__zIndexChildren.indexOf(t)),"none"===t.currentStyle[Nd]||"none"===a.__computedStyle[Nd])return t.__layoutNone(),void(Dp(e)&&e());t instanceof Ol&&(t=a),r.__addUpdate(t,null,Up,!0,null,null,e)}}},{key:"removeChild",value:function(t,e){t.__parent!==this&&t.__domParent!==this||!(t instanceof v||t instanceof Nl)?$.error("Invalid parameter of removeChild()"):t.remove(e)}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.__children.filter((function(t){return t instanceof Nl&&(t=t.shadowRoot),t instanceof Ol||"absolute"!==t.__currentStyle[Pd]}))}},{key:"absChildren",get:function(){return this.__children.filter((function(t){return t instanceof Nl&&(t=t.__shadowRoot),t instanceof Jv&&"absolute"===t.__currentStyle[Pd]}))}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseline",get:function(){var t=this.computedStyle,e=t[Gd],r=t[Kd],i=t[Vd],a=t[Ep];return this.lineBoxManager&&this.lineBoxManager.size&&0!==a.indexOf("vertical")?e+r+i+this.lineBoxManager.baseline:this.offsetHeight}},{key:"firstBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[Gd]+t[Kd]+t[Vd]+this.lineBoxManager.firstBaseline}},{key:"verticalBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return 0;var t=this.computedStyle,e=t[Hd],r=t[qd],i=t[Ud],a=t[Ep];return this.lineBoxManager&&this.lineBoxManager.size&&-1!==a.indexOf("vertical")?e+r+i+this.lineBoxManager.verticalBaseline:0}}]),e}(Jv),jp=Vt.STYLE_KEY,Zp=jp.WIDTH,qp=jp.HEIGHT,$p=jp.DISPLAY,Jp=jp.BORDER_RIGHT_WIDTH,Qp=jp.BORDER_LEFT_WIDTH,tx=jp.BORDER_TOP_LEFT_RADIUS,ex=jp.BORDER_TOP_RIGHT_RADIUS,rx=jp.BORDER_BOTTOM_RIGHT_RADIUS,ix=jp.BORDER_BOTTOM_LEFT_RADIUS,ax=jp.VISIBILITY,nx=jp.MARGIN_RIGHT,ox=jp.MARGIN_LEFT,sx=jp.PADDING_RIGHT,lx=jp.PADDING_LEFT,hx=jp.FONT_SIZE,ux=jp.FLEX_BASIS,cx=d.AUTO,_x=d.PX,fx=d.PERCENT,vx=d.REM,yx=d.VW,dx=d.VH,px=d.VMAX,xx=d.VMIN,gx=ce.canvasPolygon,mx=ce.svgPolygon,bx=H.isFunction,Ex=function(t){function e(e,r){var i,a=(i=t.call(this,e,r)||this).props.src,n=i.__loadImg={src:a};if(a){var o=$.IMG[a];o?o&&o.state===$.LOADED&&(n.source=o.source,n.width=n.__width=o.width,n.height=n.__height=o.height):$.measureImg(a,null)}else n.error=!0;return i}return a(e,t),r(e,[{key:"__preLayout",value:function(t,r){var i=h(n(e.prototype),"__preLayout",this).call(this,t,!1),a=this.__loadImg,o=a.src;if(o){var s=$.IMG[o];s&&s.state!==$.LOADING?s&&s.state===$.LOADED&&s.success&&(a.source=s.source,a.width=a.__width=s.width,a.height=a.__height=s.height):a.loading||this.__loadAndRefresh(a,null),a.cache=!1}return i.fixedWidth&&i.fixedHeight||(a.error&&!this.props.placeholder?i.fixedWidth?i.h=i.w:i.fixedHeight?i.w=i.h:i.w=i.h=32:a.source?i.fixedWidth?i.h=i.w*a.height/a.width:i.fixedHeight?i.w=i.h*a.width/a.height:(i.w=a.width,i.h=a.height):i.w=i.h=0,i.fixedWidth=!0,i.fixedHeight=!0),i}},{key:"__addGeom",value:function(t,e){e=H.hash2arr(e),this.__virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"calContent",value:function(t,r){var i=h(n(e.prototype),"calContent",this).call(this,t,r),a=this.__loadImg;return i?a.onlyImg=!1:(a.onlyImg=!0,"hidden"!==r[ax]&&(r[Zp]||r[qp])&&a.source&&(i=!0)),i}},{key:"render",value:function(t,r){var i,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=h(n(e.prototype),"render",this).call(this,t,r,o,s),u=this.width,c=this.height,_=this.__isDestroyed,f=this.props.placeholder,v=this.__computedStyle,d=v[$p],p=v[tx],x=v[ex],m=v[rx],b=v[ix],E=v[ax],M=this.virtualDom,A=this.__loadImg;if(_||"none"===d||"hidden"===E||t===y.WEBGL)return l;i=l.x3+o,a=l.y3+s;var T=A.source;if(A.error&&!f&&e.showError){var R=.02*Math.min(u,c),S="#CCC",w="#DDD",C=i+.7*u,k=a+.3*c,O=5*R,I=[[i+.15*u,a+.7*c],[i+.3*u,a+.4*c],[i+.5*u,a+.6*c],[i+.6*u,a+.5*c],[i+.9*u,a+.8*c],[i+.15*u,a+.8*c]];if(t===y.CANVAS||t===y.WEBGL){r.strokeStyle=S,r.lineWidth=R,r.fillStyle=w,r.beginPath(),r.moveTo(i,a),r.lineTo(i+u,a),r.lineTo(i+u,a+c),r.lineTo(i,a+c),r.lineTo(i,a),r.stroke(),r.closePath(),r.beginPath();var F=se.ellipsePoints(C,k,O,O);ce.canvasPolygon(r,F,0,0),r.fill(),r.closePath(),r.beginPath(),r.moveTo(I[0][0],I[0][1]);for(var L=1,B=I.length;L<B;L++){var D=I[L];r.lineTo(D[0],D[1])}r.lineTo(I[0][0],I[0][1]),r.fill(),r.closePath()}else if(t===y.SVG){this.__addGeom("rect",[["x",i],["y",a],["width",u],["height",c],["stroke",S],["stroke-width",R],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",C],["cy",k],["r",O],["fill",w]]);for(var P="",N=0,G=I.length;N<G;N++){var W=I[N];N&&(P+=" "),P+=W[0]+","+W[1]}this.__addGeom("polygon",[["points",P],["fill",w]])}}else if(T){var Y=qe.calRadius(i,a,u,c,p,x,m,b);if(t===y.CANVAS||t===y.WEBGL)Y?(r.save(),r.beginPath(),gx(r,Y,o,s),r.clip(),r.closePath(),r.drawImage(T,i,a,u,c),r.restore()):r.drawImage(T,i,a,u,c);else if(t===y.SVG){if(A.cache){if(A.cache.cache=!0,M.children=[A.cache],!M.cache&&Y){var U=mx(Y),z={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",U],["fill","#FFF"]]}]},X=r.add(z);this.__cacheDefs.push(z),M.conClip="url(#"+X+")"}return}var V;u===A.width&&c===A.height||(V=ih.matrixResize(A.width,A.height,u,c,i,a,u,c));var K=[["xlink:href",A.error?f:A.src],["x",i],["y",a],["width",A.width],["height",A.height]];if(Y){var j=mx(Y),Z={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",j],["fill","#FFF"]]}]},q=r.add(Z);this.__cacheDefs.push(Z),M.conClip="url(#"+q+")",delete M.cache}V&&!g.isE(V)&&K.push(["transform","matrix("+H.joinArr(g.m2m6(V),",")+")"]);var $={type:"img",tagName:"image",props:K};M.children=[$],A.cache=$}}return l}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[Zp],a=r[qp],n=r[ox],o=r[nx],s=r[lx],l=r[sx],h=this.computedStyle,u=h[Qp],c=h[Jp];if(i.u!==cx)t-=this.__calSize(i,e,!0);else{var _=this.__loadImg;_.source&&(a.u===_x?t-=_.width*a.v/_.height:a.u===fx?t-=_.width*a.v*e*.01/_.height:a.u===vx?t-=_.width*a.v*this.root.computedStyle[hx]/_.height:a.u===yx?t-=_.width*a.v*this.root.width*.01/_.height:a.u===dx?t-=_.width*a.v*this.root.height*.01/_.height:a.u===px?t-=a.v*Math.max(this.root.width,this.root.height)*.01/_.height:a.u===xx?t-=a.v*Math.min(this.root.width,this.root.height)*.01/_.height:t-=_.width)}return t-=this.__calSize(o,e,!0),t-=this.__calSize(l,e,!0),t-=c,t-=this.__calSize(n,e,!0),t-=this.__calSize(s,e,!0),t-=u}},{key:"__calBasis",value:function(t,e,r,i,a){this.__computeReflow();var n=0,o=0,s=0,l=this.currentStyle,h=this.computedStyle,u=this.__loadImg,c=i.w,_=i.h,f=l[ux],v=l[Zp],y=l[qp],d=t?v:y,p=t?y:v;if([_x,fx,vx,yx,dx,px,xx].indexOf(f.u)>-1)n=s=o=this.__calSize(f,t?c:_,!0);else if([_x,fx,vx,yx,dx,px,xx].indexOf(d.u)>-1)n=s=o=this.__calSize(d,t?c:_,!0);else if(u.source||u.error){var x=this.__preLayout(i);if(p.u!==cx){p=this.__calSize(p,t?_:c,!0);var g=x.w/x.h;n=s=o=t?p*g:p/g}else n=s=o=t?x.w:x.h}return this.__addMBP(t,c,l,h,[n,o,s],a)}},{key:"__loadAndRefresh",value:function(t,e){var r=this;(t.source||t.error)&&(t.source=null),t.loading=!0;var i=this.__root,a=i.ctx,n=this.props.placeholder,o=this.__computedStyle,s=o[Zp],l=o[qp];$.measureImg(t.src,(function(h){if(h.url===t.src){var u=function(){var t=r.__currentStyle,a=t[Zp],n=t[qp];a.u!==cx&&n.u!==cx?i.__addUpdate(r,null,Vs.REPAINT,null,null,null,e):i.__addUpdate(r,null,Vs.REFLOW,null,null,null,e)};if(t.cache&&(t.cache.cache=!1),t.loading=!1,h.success)t.source=h.source,t.width=h.width,t.height=h.height;else{if(n)return t.error=!0,void $.measureImg(n,(function(e){e.success&&(t.source=e.source,t.width=e.width,t.height=e.height,"none"===o[$p]||r.__isDestroyed||u())}),{ctx:a,root:i,width:s,height:l});t.error=!0}"none"===o[$p]||r.__isDestroyed||u()}}))}},{key:"updateSrc",value:function(t,e){var r=this.__loadImg;if(t===r.src||this.__isDestroyed||!t&&r.error)return r.src=t,$.measureImg(t,null),void(bx(e)&&e());r.src=t,this.__loadAndRefresh(r,e)}},{key:"appendChild",value:function(){$.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}},{key:"isReplaced",get:function(){return!0}}]),e}(Kp);i(Ex,"showError",!0);var Mx,Ax=function(){function t(t){this.id=t,this.count=0,this.list=[],this.cacheHash={}}return r(t,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;r>=0;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(e){return new t(e)}}]),t}(),Tx=H.joinVd,Rx=H.joinDef,Sx=Vs.NONE,wx=Vs.TRANSFORM_ALL,Cx=Vs.OPACITY,kx=Vs.FILTER,Ox=Vs.MIX_BLEND_MODE;function Ix(t,e,r){var i=t.childNodes;!function(t,e,r){for(var i=e.length,a=r.length,n=0,o=t.childNodes;n<Math.min(i,a);n++)Fx(o[n],e[n],r[n]);if(n<i)for(var s=i-1;s>=n;s--)zx(t,o,s);else if(n<a)for(;n<a;n++)Ux(t,o,n,Rx(r[n]))}(i[0],e.defs,r.defs),r.hasOwnProperty("lv")||Hx(i[1],e.bb,r.bb),Px(t,e,r,!0)}function Fx(t,e,r){if(e.tagName!==r.tagName)Xx(t,"beforebegin",Rx(r)),t.parentNode.removeChild(t);else{e.uuid!==r.uuid&&t.setAttribute("id",r.uuid);for(var i={},a=0,n=(e.props||[]).length;a<n;a++){var o=u(e.props[a],2),s=o[0],l=o[1];i[s]=l}for(var h=0,c=(r.props||[]).length;h<c;h++){var _=u(r.props[h],2),f=_[0],v=_[1];i.hasOwnProperty(f)?(i[f]!==v&&t.setAttribute(f,v),delete i[f]):t.setAttribute(f,v)}Object.keys(i).forEach((function(e){t.removeAttribute(e)}));for(var y=t.childNodes,d=e.children.length,p=r.children.length,x=0;x<Math.min(d,p);x++)Gx(t,x,e.children[x],r.children[x]);if(x<d)for(var g=d-1;g>=x;g--)zx(t,y,g);else if(x<p)for(;x<p;x++)Ux(t,y,x,Tx(r.children[x]))}}function Lx(t,e,r){"dom"===e.type?"dom"===r.type?Px(t,e,r):"geom"===r.type?Nx(t,e,r):Yx(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var i=e.children.length,a=r.children.length,n=0;n<Math.min(i,a);n++)Gx(t,n,e.children[n],r.children[n],!0);var o=t.childNodes;if(n<i)for(var s=i-1;s>=n;s--)zx(t,o,s);else if(n<a)for(;n<a;n++)Ux(t,o,n,Tx(r.children[n]))}(t,e,r):Yx(t,r):"geom"===e.type?"dom"===r.type?function(t,e,r){Nx(t,e,r)}(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return void Dx(t,e,r,r.lv);if(r.hasOwnProperty("lv"))Dx(t,e,r,r.lv);else{Bx(t,e,r),Hx(t.firstChild,e.bb,r.bb);for(var i=e.children.length,a=r.children.length,n=0,o=t.lastChild,s=o.childNodes;n<Math.min(i,a);n++)Gx(o,n,e.children[n],r.children[n]);if(n<i)for(var l=i-1;l>=n;l--)zx(o,s,l);else if(n<a)for(;n<a;n++)Ux(o,s,n,Tx(r.children[n]))}}(t,e,r):Yx(t,r):"img"===e.type?"img"===r.type?Wx(t,e,r):Yx(t,r):"item"===e.type&&"item"===r.type&&Wx(t,e,r)}function Bx(t,e,r){var i=r.transform,a=r.opacity,n=r.visibility,o=r.mask,s=r.overflow,l=r.filter,h=r.mixBlendMode,u=r.conClip;if(e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==a&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),e.visibility!==n&&t.setAttribute("visibility",n),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==l||e.mixBlendMode!==h){var c=(l?"filter:".concat(l,";"):"")+(h?"mix-blend-mode:".concat(h,";"):"");c?t.setAttribute("style",c):t.removeAttribute("filter")}e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==u&&(u?t.childNodes[1].setAttribute("clip-path",u):t.childNodes[1].removeAttribute("clip-path"))}function Dx(t,e,r,i){var a=r.transform,n=r.opacity,o=r.mask,s=r.filter,l=r.mixBlendMode;if(i!==Sx&&(o?t.setAttribute("mask",o):t.removeAttribute("mask"),i&wx&&(a?t.setAttribute("transform",a):t.removeAttribute("transform")),i&Cx&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),i&kx||i&Ox)){var h=(s?"filter:".concat(s,";"):"")+(l?"mix-blend-mode:".concat(l,";"):"");h?t.setAttribute("style",h):t.removeAttribute("style")}}function Px(t,e,r,i){if(r.cache)Dx(t,0,r,r.lv);else{r.hasOwnProperty("lv")?Dx(t,0,r,r.lv):(Bx(t,e,r),i||Hx(t.firstChild,e.bb,r.bb));for(var a=e.children.length,n=r.children.length,o=0,s=t.lastChild,l=s.childNodes;o<Math.min(a,n);o++)Lx(l[o],e.children[o],r.children[o]);if(o<a)for(var h=a-1;h>=o;h--)zx(s,l,h);else if(o<n)for(;o<n;o++)Ux(s,l,o,Tx(r.children[o]))}}function Nx(t,e,r){Bx(t,e,r),Hx(t.firstChild,e.bb,r.bb);for(var i=e.children.length,a=r.children.length,n=0,o=t.lastChild,s=o.childNodes;n<Math.min(i,a);n++)Yx(s[n],r.children[n]);if(n<i)for(var l=i-1;l>=n;l--)zx(o,s,l);else if(n<a)for(;n<a;n++)Ux(o,s,n,Tx(r.children[n]))}function Hx(t,e,r){for(var i=e.length,a=r.length,n=0;n<Math.min(i,a);n++)Gx(t,n,e[n],r[n]);var o=t.childNodes;if(n<i)for(var s=i-1;s>=n;s--)zx(t,o,s);else if(n<a)for(;n<a;n++)Ux(t,o,n,Tx(r[n]))}function Gx(t,e,r,i,a){var n=t.childNodes;r.tagName!==i.tagName?Yx(n[e],i):(Wx(n[e],r,i),a&&r.content!==i.content&&(n[e].innerHTML=i.content))}function Wx(t,e,r){if(!r.cache){for(var i={},a=0,n=(e.props||[]).length;a<n;a++){var o=u(e.props[a],2),s=o[0],l=o[1];i[s]=l}for(var h=0,c=(r.props||[]).length;h<c;h++){var _=u(r.props[h],2),f=_[0],v=_[1];i.hasOwnProperty(f)?(i[f]!==v&&t.setAttribute(f,v),delete i[f]):t.setAttribute(f,v)}Object.keys(i).forEach((function(e){t.removeAttribute(e)}))}}function Yx(t,e){var r;Array.isArray(e)?(r="",e.forEach((function(t){r+=Tx(t)}))):r=Tx(e),Xx(t,"beforebegin",r),t.parentNode.removeChild(t)}function Ux(t,e,r,i){r>=e.length?Xx(t,"beforeend",i):Xx(e[r],"beforebegin",i)}function zx(t,e,r){e[r]&&t.removeChild(e[r])}function Xx(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(Mx=Mx||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(Mx.childNodes[0],t)}}var Vx,Kx,jx,Zx=H.isFunction,qx=function(){function t(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return r(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);e>-1&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(t,e){this.list.forEach((function(r){r[t].apply(r,e)}))}},{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__records,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list;if(e.length&&e.splice(0).forEach((function(e){var i=e.target,a=e.animate,n=e.offsetTime;!i.isDestroyed&&a&&(Array.isArray(a)||(a=[a]),a.forEach((function(e){var a=e.value,o=e.options;o.autoPlay=!1,n&&((o=Object.assign({},o)).delay=o.delay||0,o.delay+=n);var s=i.animate(a,o);t.add(s,r)})))})),e===this.__records2){var i=this.__onList,a=this.list2;a.length&&i.length&&a.forEach((function(e){i.forEach((function(r){var i=function(){var i=e.timestamp;i!==t.__lastTime[r[0]]&&(t.__lastTime[r[0]]=i,r[1]&&r[1]())};i.__karasEventCb=r[1],e.off(r[0],r[1]),e.on(r[0],i)}))}))}}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("play",[t&&function(r){e&&(e=!1,Zx(t)&&t(r))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(t){var e=!0;this.__action("resume",[t&&function(r){e&&(e=!1,Zx(t)&&t(r))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("cancel",[t&&function(r){e&&(e=!1,Zx(t)&&t(r))}])}},{key:"finish",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("finish",[t&&function(r){e&&(e=!1,Zx(t)&&t(r))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Zx(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,Zx(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],Zx(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,Zx(r)&&r(t))}])}},{key:"on",value:function(t,e){if(Zx(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(t,e){var r=this;this.list.forEach((function(i){var a=function(){var a=i.timestamp;a!==r.__lastTime[t]&&(r.__lastTime[t]=a,e&&e())};a.__karasEventCb=e,i.on(t,a)}))}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else this.list.forEach((function(r){r.off(t,e)}))}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(t,e){this.list.forEach((function(r){r[t]=e}))}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),$x=0,Jx=function(){function t(t,e,r,i,a,n,o,s,l,h){this.__uuid=$x++,this.__renderMode=t,this.__ctx=e,this.__rootId=r,this.__init(i,a,n,o,s,l,h)}return r(t,[{key:"__init",value:function(t,e,r,i,a,n,o){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=a;var s=i.getCoords(a),l=s.x,h=s.y;this.__x=l,this.__y=h;var u=i.__size;this.__tx1=l/u,this.__ty1=(u-h-e)/u,this.__tx2=(l+t)/u,this.__ty2=(u-h)/u,this.__enabled=!0,this.__available=!1,this.__appendData(n,o)}},{key:"__appendData",value:function(t,e){this.x1=t,this.y1=e;var r=this.__bbox;this.dx=this.__x-r[0],this.dy=this.__y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.__page.__update=!0}},{key:"clear",value:function(){if(this.__available)return this.__available=!1,this.update(),!0}},{key:"release",value:function(){if(this.__enabled)return this.clear(),this.__page.del(this.__pos),this.__page=null,this.__enabled=!1,!0}},{key:"reset",value:function(t,e,r,i){this.release();var a=Math.ceil(t[2]-t[0]),n=Math.ceil(t[3]-t[1]),o=i.getInstance(this.__renderMode,this.__ctx,this.__rootId,Math.max(a,n),null);if(o){var s=o.page,l=o.pos;this.__init(a,n,t,s,l,e,r)}}},{key:"__offsetY",value:function(t){this.y1+=t;var e=this.__bbox;e[1]+=t,e[3]+=t,this.dy-=t}},{key:"uuid",get:function(){return this.__uuid}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.__enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"size",get:function(){return this.__page.__size}},{key:"texture",get:function(){return this.__page.texture}}],[{key:"getInstance",value:function(t,e,r,i,a,n,o,s,l){var h=Math.ceil(i[2]-i[0]),u=Math.ceil(i[3]-i[1]),c=Math.max(h,u);if(!(c<=0)){var _=s.getInstance(t,e,r,c,l);if(_)return new o(t,e,r,h,u,i,_.page,_.pos,a,n)}}}]),t}(),Qx=2048,tg=128,eg={},rg=0,ig=!1,ag=function(){function t(t,e,r,i){this.__size=r,this.__number=i,this.__width=this.__height=r;for(var a=[],n=0,o=i*i;n<o;n++)a.push(0);this.__grid=new Int32Array(a),this.__uuid=rg++,this.__update=!1,this.time=0}return r(t,[{key:"add",value:function(t,e){for(var r=this.number,i=this.grid,a=e;a<e+t;a++){i[a]=t;for(var n=1;n<t;n++)i[a+n*r]=t}}},{key:"del",value:function(t){var e=this.number,r=this.grid,i=r[t];if(i){r[t]=0;for(var a=t;a<t+i;a++){r[a]=0;for(var n=1;n<i;n++)r[a+n*e]=0}}}},{key:"getCoords",value:function(t){var e=this.number;return{x:t%e*16,y:16*Math.floor(t/e)}}},{key:"getFreePos",value:function(t){var e=this.number,r=this.grid;t:for(var i=0;i<e;i++){var a=r[i];if(!a){for(var n=i+1,o=i+t;n<o;n++)if(r[i])continue t;return i}if(a===t)for(var s=t;s<e;s+=t){var l=i+s*e;if(!r[l])return l}else i+=a}return-1}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"grid",get:function(){return this.__grid}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t,e,r,i,a,n){if(!(i>Qx)){for(var o=1;16*o<i;)o<<=1;for(var s,l,h=r+","+t,u=eg[h]=eg[h]||[],c=0,_=u.length;c<_;c++){var f=u[c];if((!n||f!==n)&&(l=f.getFreePos(o))>-1){s=f;break}}return s||(s=new a(t,e,Qx,tg),l=0,u.push(s)),s.add(o,l),{page:s,pos:l}}}},{key:"UNIT",get:function(){return 16}},{key:"MAX",get:function(){return Qx},set:function(t){for(var e=2;e<t;)if((e<<=1)>=t){e>t&&(e<<=1);break}Qx=e,tg=Math.ceil(Qx/16)}},{key:"NUMBER",get:function(){return tg}},{key:"genUuid",value:function(){return rg++}},{key:"init",value:function(e){ig||(ig=!0,e!==Qx&&(t.MAX=Math.min(e,8192)))}}]),t}(),ng=g.calPoint;function og(t,e,r){var i=t.createShader(e);if(null==i)throw new Error("unable to create shader");if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error("Failed to compile shader: "+a)}return i}function sg(t,e,r,i,a,n){return i&&1!==i&&(t/=i,e/=i,r/=i),{x:(t=t===a?0:(t-a)/a)*i,y:(e=e===n?0:(n-e)/n)*i,z:r*i,w:i}}function lg(t,e,r,i,a){var n=t.createTexture();return hg(t,n,r),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&a?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,a,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n}function hg(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var ug={initShaders:function(t,e,r){var i=function(t,e,r){var i=og(t,t.VERTEX_SHADER,e),a=og(t,t.FRAGMENT_SHADER,r);if(!i||!a)return null;var n=t.createProgram();if(!n)return null;if(n.vertexShader=i,n.fragmentShader=a,t.attachShader(n,i),t.attachShader(n,a),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var o=t.getProgramInfoLog(n);throw t.deleteProgram(n),t.deleteShader(a),t.deleteShader(i),new Error("Failed to link program: "+o)}return n}(t,e,r);if(!i)throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),i},createTexture:lg,bindTexture:hg,drawTextureCache:function(t,e,r,i,a,n){var o=e.length;if(o){var s,l,h;s=Vx&&Vx.length===24*o?Vx:Vx=new Float32Array(24*o),l=Kx&&Kx.length===12*o?Kx:Kx=new Float32Array(12*o),h=jx&&jx.length===6*o?jx:jx=new Float32Array(6*o);for(var u=0;u<o;u++){var c=e[u],_=c.cache,f=c.opacity,v=c.matrix,y=_.__width,d=_.__height,p=_.__tx1,x=_.__ty1,g=_.__tx2,m=_.__ty2,b=_.__page,E=_.__bbox;u||(b.__update&&b.genTexture(t),hg(t,b.texture,0));var M=E[0],A=E[1],T=M+a,R=A+d+n,S=M+y+a,w=A+n,C=ng({x:T,y:R,z:0,w:1},v),k=C.x,O=C.y,I=C.w,F=ng({x:S,y:w,z:0,w:1},v),L=F.x,B=F.y,D=F.w,P=void 0,N=void 0,H=void 0,G=void 0,W=void 0,Y=void 0;if(1!==I||1!==D||v&&v.length&&(v[1]||v[4])){var U=ng({x:S,y:R,z:0,w:1},v);P=U.x,N=U.y,H=U.w,G=(U=ng({x:T,y:w,z:0,w:1},v)).x,W=U.y,Y=U.w}else P=L,N=O,G=k,W=B,H=Y=1;var z=sg(k,O,0,I,r,i);k=z.x,O=z.y,P=(z=sg(P,N,0,H,r,i)).x,N=z.y,L=(z=sg(L,B,0,D,r,i)).x,B=z.y,G=(z=sg(G,W,0,Y,r,i)).x,W=z.y;var X=24*u;s[X]=k,s[X+1]=O,s[X+3]=I,s[X+4]=G,s[X+5]=W,s[X+7]=Y,s[X+8]=P,s[X+9]=N,s[X+11]=H,s[X+12]=G,s[X+13]=W,s[X+15]=Y,s[X+16]=P,s[X+17]=N,s[X+19]=H,s[X+20]=L,s[X+21]=B,s[X+23]=D,l[X=12*u]=p,l[X+1]=x,l[X+2]=p,l[X+3]=m,l[X+4]=g,l[X+5]=x,l[X+6]=p,l[X+7]=m,l[X+8]=g,l[X+9]=x,l[X+10]=g,l[X+11]=m,h[X=6*u]=f,h[X+1]=f,h[X+2]=f,h[X+3]=f,h[X+4]=f,h[X+5]=f}var V=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,V),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW);var K=t.getAttribLocation(t.program,"a_position");t.vertexAttribPointer(K,4,t.FLOAT,!1,0,0),t.enableVertexAttribArray(K);var j=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,j),t.bufferData(t.ARRAY_BUFFER,l,t.STATIC_DRAW);var Z=t.getAttribLocation(t.program,"a_texCoords");t.vertexAttribPointer(Z,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(Z);var q=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,q),t.bufferData(t.ARRAY_BUFFER,h,t.STATIC_DRAW);var $=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer($,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray($);var J=t.getUniformLocation(t.program,"u_texture");t.uniform1i(J,0),t.drawArrays(t.TRIANGLES,0,6*o),t.deleteBuffer(V),t.deleteBuffer(j),t.deleteBuffer(q),t.disableVertexAttribArray(K),t.disableVertexAttribArray(Z),t.disableVertexAttribArray($)}},drawBlur:function(t,e,r,i,a){t.useProgram(e),t.viewport(0,0,i,a);var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var o=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);var s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var l=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l);for(var h=t.getUniformLocation(e,"u_texture"),u=t.getUniformLocation(e,"u_direction"),c=[],_=100/Math.max(i,a),f=i/a,v=0;v<3;v++){var y=lg(t,null,1,i,a);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,y,0),hg(t,r,0),i>=a?t.uniform2f(u,_,0):t.uniform2f(u,_*f,0),t.uniform1i(h,0),t.drawArrays(t.TRIANGLES,0,6);var d=lg(t,null,0,i,a);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,d,0),hg(t,y,1),i>=a?t.uniform2f(u,0,_*f):t.uniform2f(u,0,_),t.uniform1i(h,1),t.drawArrays(t.TRIANGLES,0,6),c.push(r),c.push(y),r=d}return hg(t,null,0),hg(t,null,1),t.deleteBuffer(n),t.deleteBuffer(s),t.disableVertexAttribArray(o),t.disableVertexAttribArray(l),c.forEach((function(e){return t.deleteTexture(e)})),r},drawOverflow:function(t,e,r,i,a,n){t.useProgram(e);var o=r.x,s=r.y,l=r.width,h=r.height,u=r.bbox,c=i.x,_=i.y,f=i.bbox,v=u[0]-f[0],y=u[1]-f[1];t.viewport(0,0,n,n);var d=sg(o,s+h,0,1,a,a),p=d.x,x=d.y,g=sg(o+l,s,0,1,a,a),m=g.x,b=g.y,E=(c+v)/n,M=(n-_-y)/n,A=(c+l+v)/n,T=(n-_-h-y)/n,R=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,new Float32Array([p,b,p,x,m,b,p,x,m,b,m,x]),t.STATIC_DRAW);var S=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(S,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(S);var w=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,w),t.bufferData(t.ARRAY_BUFFER,new Float32Array([E,M,E,T,A,M,E,T,A,M,A,T]),t.STATIC_DRAW);var C=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(C,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(C);var k=t.getUniformLocation(e,"u_texture");hg(t,i.__page.texture,0),t.uniform1i(k,0),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(R),t.deleteBuffer(w),t.disableVertexAttribArray(S),t.disableVertexAttribArray(C)},drawMask:function(t,e,r,i,a,n,o){t.useProgram(e),hg(t,i.__page.texture,0),hg(t,a,1),t.viewport(0,0,o,o);var s=r.x,l=r.y,h=r.width,u=r.height,c=i.x,_=i.y,f=i.width,v=i.height,y=sg(s,l+u,0,1,n,n),d=y.x,p=y.y,x=sg(s+h,l,0,1,n,n),g=x.x,m=x.y,b=c/o,E=(o-_)/o,M=(c+f)/o,A=(o-_-v)/o,T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,m,d,p,g,m,d,p,g,m,g,p]),t.STATIC_DRAW);var R=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(R,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(R);var S=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,S),t.bufferData(t.ARRAY_BUFFER,new Float32Array([b,E,b,A,M,E,b,A,M,E,M,A]),t.STATIC_DRAW);var w=t.getAttribLocation(e,"a_texCoords1");t.vertexAttribPointer(w,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(w);var C=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,C),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,0,0,1,1,1,0]),t.STATIC_DRAW);var k=t.getAttribLocation(e,"a_texCoords2");t.vertexAttribPointer(k,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(k);var O=t.getUniformLocation(e,"u_texture1");t.uniform1i(O,0);var I=t.getUniformLocation(e,"u_texture2");t.uniform1i(I,1),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(T),t.deleteBuffer(S),t.deleteBuffer(C),t.disableVertexAttribArray(R),t.disableVertexAttribArray(w),t.disableVertexAttribArray(k),t.deleteTexture(a),t.bindTexture(t.TEXTURE_2D,null),hg(t,null,0),hg(t,null,1)},drawMbm:function(t,e,r,i){hg(t,r,0),hg(t,i,1);var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var n=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(e,"u_texture1");t.uniform1i(l,0);var h=t.getUniformLocation(e,"u_texture2");t.uniform1i(h,1),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(o),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)},drawCm:function(t,e,r,i,a,n,o){t.useProgram(e),hg(t,i.__page.texture,0),t.viewport(0,0,o,o);var s=r.x,l=r.y,h=r.width,u=r.height,c=i.x,_=i.y,f=i.width,v=i.height,y=sg(s,l+u,0,1,n,n),d=y.x,p=y.y,x=sg(s+h,l,0,1,n,n),g=x.x,m=x.y,b=c/o,E=(o-_)/o,M=(c+f)/o,A=(o-_-v)/o,T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,m,d,p,g,m,d,p,g,m,g,p]),t.STATIC_DRAW);var R=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(R,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(R);var S=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,S),t.bufferData(t.ARRAY_BUFFER,new Float32Array([b,E,b,A,M,E,b,A,M,E,M,A]),t.STATIC_DRAW);var w=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(w,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(w);var C=t.getUniformLocation(e,"u_texture");t.uniform1i(C,0);var k=t.getUniformLocation(e,"u_m");t.uniform1fv(k,new Float32Array(a)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(T),t.deleteBuffer(S),t.disableVertexAttribArray(R),t.disableVertexAttribArray(w),hg(t,null,0)},drawDropShadow:function(t,e,r,i,a,n,o,s,l){t.useProgram(e);var h=i.x,u=i.y,c=i.width,_=i.height,f=i.__page,v=f.size,y=f.texture,d=h/v,p=(v-u)/v,x=(h+c)/v,g=(v-u-_)/v,m=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,m);var b=n/o,E=s/l;t.bufferData(t.ARRAY_BUFFER,new Float32Array([-b,-E,-b,E,b,-E,-b,E,b,-E,b,E]),t.STATIC_DRAW);var M=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(M,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(M);var A=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,A),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,g,d,p,x,g,d,p,x,g,x,p]),t.STATIC_DRAW);var T=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(T,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(T),hg(t,y,0);var R=t.getUniformLocation(e,"u_texture");t.uniform1i(R,0);var S=t.getUniformLocation(e,"u_color");t.uniform1fv(S,new Float32Array([a[0]/255,a[1]/255,a[2]/255,a[3]])),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(m),t.deleteBuffer(A),t.disableVertexAttribArray(M),t.disableVertexAttribArray(T),hg(t,null,0)},drawDropShadowMerge:function(t,e,r,i,a,n,o,s,l,h,u,c,_){var f=e.x,v=e.y,y=.5*r,d=sg(f+a,v+s+n,0,1,y,y),p=d.x,x=d.y,g=sg(f+o+a,v+n,0,1,y,y),m=g.x,b=g.y,E=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,E),t.bufferData(t.ARRAY_BUFFER,new Float32Array([p,b,p,x,m,b,p,x,m,b,m,x]),t.STATIC_DRAW);var M=t.getAttribLocation(t.program,"a_position");t.vertexAttribPointer(M,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(M);var A=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,A),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,0,0,1,1,1,0]),t.STATIC_DRAW);var T=t.getAttribLocation(t.program,"a_texCoords");t.vertexAttribPointer(T,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(T);var R=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW);var S=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(S,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(S),hg(t,i,0);var w=t.getUniformLocation(t.program,"u_texture");t.uniform1i(w,0),t.drawArrays(t.TRIANGLES,0,6);var C=sg(f+h,v+_+u,0,1,y,y),k=C.x,O=C.y,I=sg(f+c+h,v+u,0,1,y,y),F=I.x,L=I.y;t.bindBuffer(t.ARRAY_BUFFER,E),t.bufferData(t.ARRAY_BUFFER,new Float32Array([k,L,k,O,F,L,k,O,F,L,F,O]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,R),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW),hg(t,l,0),t.uniform1i(w,0),t.drawArrays(t.TRIANGLES,0,6),hg(t,null,0)},drawTex2Cache:function(t,e,r,i,a,n){t.useProgram(e);var o=r.__page.__size;t.viewport(0,0,o,o);var s=r.x,l=r.y,h=.5*o,u=sg(s,l+n,0,1,h,h),c=u.x,_=u.y,f=sg(s+a,l,0,1,h,h),v=f.x,y=f.y;hg(t,i,0);var d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,new Float32Array([c,y,c,_,v,y,c,_,v,y,v,_]),t.STATIC_DRAW);var p=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(p,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(p);var x=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,x),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,0,0,1,1,1,0]),t.STATIC_DRAW);var g=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(g,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(g);var m=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,m),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW);var b=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(b,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(b);var E=t.getUniformLocation(e,"u_texture");hg(t,i,0),t.uniform1i(E,0),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(d),t.deleteBuffer(x),t.deleteBuffer(m),t.disableVertexAttribArray(p),t.disableVertexAttribArray(g),t.disableVertexAttribArray(b),t.bindTexture(t.TEXTURE_2D,null)},drawCache2Tex:function(t,e,r,i,a,n){var o=r.x,s=r.y,l=r.width,h=r.height,u=r.__page,c=u.texture,_=u.size;t.useProgram(e),t.viewport(0,0,i,a);var f=.5*i,v=.5*a,y=sg(n,a-n,0,1,f,v),d=y.x,p=y.y,x=sg(i-n,n,0,1,f,v),g=x.x,m=x.y,b=o/_,E=(_-s)/_,M=(o+l)/_,A=(_-s-h)/_,T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([d,m,d,p,g,m,d,p,g,m,g,p]),t.STATIC_DRAW);var R=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(R,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(R);var S=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,S),t.bufferData(t.ARRAY_BUFFER,new Float32Array([b,E,b,A,M,E,b,A,M,E,M,A]),t.STATIC_DRAW);var w=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(w,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(w);var C=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,C),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),t.STATIC_DRAW);var k=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(k,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(k);var O=t.getUniformLocation(e,"u_texture");hg(t,c,0),t.uniform1i(O,0),t.drawArrays(t.TRIANGLES,0,6)}},cg=function(t){function e(e,r,i,a){var n;return(n=t.call(this,e,r,i,a)||this).__offscreen=$.getOffscreenCanvas(i,i,null,a),n}return a(e,t),r(e,[{key:"genTexture",value:function(t){if(this.__update){this.__update=!1;var e=this.texture;e&&t.deleteTexture(e),this.texture=ug.createTexture(t,this.__offscreen.canvas,0,null,null),t.bindTexture(t.TEXTURE_2D,null)}}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.__offscreen.canvas}},{key:"ctx",get:function(){return this.__offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(t,r,i,a,o){return h(n(e),"getInstance",this).call(this,t,r,i,a,this,o)}}]),e}(ag),_g=Vt.STYLE_KEY,fg=_g.TRANSFORM_ORIGIN,vg=_g.TRANSFORM,yg=qn.spreadFilter,dg=g.isE,pg=function(t){function e(e,r,i,a,n,o,s,l,h,u){return t.call(this,e,r,i,a,n,o,s,l,h,u)||this}return a(e,t),r(e,[{key:"clear",value:function(){if(h(n(e.prototype),"clear",this).call(this)){this.__available=!1;var t=this.__page.ctx;t.setTransform(1,0,0,1,0,0),t.clearRect(this.__x,this.__y,this.__width,this.__height)}}},{key:"reset",value:function(t,r,i){return h(n(e.prototype),"reset",this).call(this,t,r,i,cg)}},{key:"canvas",get:function(){return this.__page.canvas}},{key:"ctx",get:function(){return this.__page.ctx}}],[{key:"getInstance",value:function(t,r,i,a,o,s,l){return h(n(e),"getInstance",this).call(this,t,r,i,a,o,s,this,cg,l)}},{key:"genFilter",value:function(t,e){var r=t.x,i=t.y,a=t.size,n=t.canvas,o=t.x1,s=t.y1,l=t.width,h=t.height,u=t.bbox,c=u[0]-(u=yg(u,e))[0],_=u[2]-u[0],f=u[3]-u[1],v=$.getOffscreenCanvas(_,f,null,"filter");return v.ctx.filter=ce.canvasFilter(e),v.ctx.drawImage(n,r,i,l,h,c,c,l,h),v.ctx.filter="none",v.bbox=u,v.x=0,v.y=0,v.size=a,v.x1=o,v.y1=s,v.dx=-u[0],v.dy=-u[1],v.dbx=t.dbx+c,v.dby=t.dby+c,v.width=_,v.height=f,v}},{key:"genMask",value:function(t,r,i){for(var a=function(t,e,r){var i=t.size,a=t.x1,n=t.y1,o=t.bbox,s=(r=r||o)[2]-r[0],l=r[3]-r[1],h=r[0]-o[0],u=r[1]-o[1],c=$.getOffscreenCanvas(s,l,null,e);return c.x=0,c.y=0,c.bbox=r,c.size=i,c.x1=a,c.y1=n,c.dx=-r[0],c.dy=-r[1],c.dbx=t.dbx-h,c.dby=t.dby-u,c.width=s,c.height=l,c}(t,"mask1"),n=[],o=r.__computedStyle,s=o[vg],l=o[fg],h=r.next,u=h.__clip;h&&h.__mask;)n.push(h),h=h.next;var c=a.x,_=a.y,f=a.ctx,v=a.dbx,y=a.dby,d=Uo.calMatrixByOrigin(s,l[0]+c+v,l[1]+_+y);return dg(d)&&(d=null),n.forEach((function(t){i(t,a,d)})),f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,f.globalCompositeOperation=u?"source-out":"source-in",e.drawCache(t,a),f.globalCompositeOperation="source-over",a}},{key:"drawCache",value:function(t,e){var r=e.x,i=e.y,a=e.x1,n=e.y1,o=e.ctx,s=e.dbx,l=e.dby,h=t.x,u=t.y,c=t.canvas,_=t.x1,f=t.y1,v=t.dbx,y=t.dby,d=t.width,p=t.height,x=r+_-a+s-v,g=i+f-n+l-y;o.drawImage(c,h,u,d,p,x,g,d,p)}}]),e}(Jx);var xg=ce.canvasPolygon;var gg=0,mg=1,bg=2,Eg=3,Mg=4,Ag=function(t,e,r,i){return e.sort((function(t,e){return t.lv===e.lv?t.idx===e.idx?t.type-e.type:e.idx-t.idx:e.lv-t.lv})),e.forEach((function(e){var a=e.type,n=e.offscreen;if(0===a){var o=n.matrix,s=n.target,l=n.ctx,h=n.x,u=n.y,c=n.offsetWidth,_=n.offsetHeight,f=n.list;t.globalCompositeOperation="destination-in",t.globalAlpha=1,t.setTransform(o[0],o[1],o[4],o[5],o[12],o[13]),t.fillStyle="#FFF",t.beginPath(),f?xg(t,f):t.rect(h,u,c,_),t.fill(),t.closePath(),t.globalCompositeOperation="source-over",(t=l).setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(s.canvas,0,0,r,i,0,0,r,i),s.ctx.setTransform(1,0,0,1,0,0),s.ctx.clearRect(0,0,r,i)}else if(1===a){var v=n.target,y=n.ctx,d=n.filter;if(t.filter){var p=$.getOffscreenCanvas(r,i,null,"filter2");p.ctx.filter=ce.canvasFilter(d),r&&i&&p.ctx.drawImage(v.canvas,0,0,r,i,0,0,r,i),p.ctx.filter="none",v.ctx.globalAlpha=1,v.ctx.setTransform(1,0,0,1,0,0),v.ctx.clearRect(0,0,r,i),r&&i&&v.ctx.drawImage(p.canvas,0,0,r,i,0,0,r,i),p.ctx.setTransform(1,0,0,1,0,0),p.ctx.clearRect(0,0,r,i)}(t=y).setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(v.canvas,0,0,r,i,0,0,r,i),v.ctx.setTransform(1,0,0,1,0,0),v.ctx.globalAlpha=1,v.ctx.clearRect(0,0,r,i)}else if(2===a){var x=n.mask;if(n.isClip)(t=x.ctx).globalCompositeOperation="source-out",t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(n.target.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",n.target.ctx.setTransform(1,0,0,1,0,0),n.target.ctx.clearRect(0,0,r,i),(t=n.ctx).globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(x.canvas,0,0,r,i,0,0,r,i),x.ctx.setTransform(1,0,0,1,0,0),x.ctx.clearRect(0,0,r,i);else{var g=n.target;(t=g.ctx).globalCompositeOperation="destination-in",t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(x.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",x.ctx.setTransform(1,0,0,1,0,0),x.ctx.clearRect(0,0,r,i),(t=n.ctx).globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(g.canvas,0,0,r,i,0,0,r,i),g.ctx.setTransform(1,0,0,1,0,0),g.ctx.clearRect(0,0,r,i)}}else if(3===a){var m=n.target;(t=n.ctx).globalCompositeOperation=n.mixBlendMode,t.setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(m.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",m.ctx.globalAlpha=1,m.ctx.setTransform(1,0,0,1,0,0),m.ctx.clearRect(0,0,r,i)}else 4===a&&(t=n.ctx)})),t},Tg=function(t){function e(e,r,i,a){var n;return(n=t.call(this,e,r,i,a)||this).gl=r,n.texture=ug.createTexture(r,null,0,i,i),r.bindTexture(r.TEXTURE_2D,null),n}return a(e,t),r(e,null,[{key:"getInstance",value:function(t,r,i,a,o){return h(n(e),"getInstance",this).call(this,t,r,i,a,this,o)}}]),e}(ag),Rg=function(t){function e(e,r,i,a,n,o,s,l,h,u){var c;return(c=t.call(this,e,r,i,a,n,o,s,l,h,u)||this).gl=r,c}return a(e,t),r(e,[{key:"update",value:function(){}},{key:"clear",value:function(){if(h(n(e.prototype),"clear",this).call(this)){var t=this.__page,r=t.gl,i=t.__size,a=new Uint8Array(this.__width*this.__height*4);r.bindTexture(r.TEXTURE_2D,t.texture),r.texSubImage2D(r.TEXTURE_2D,0,this.__x,i-this.__y-this.__height,this.__width,this.__height,r.RGBA,r.UNSIGNED_BYTE,a),r.bindTexture(r.TEXTURE_2D,null)}}},{key:"reset",value:function(t,r,i){return h(n(e.prototype),"reset",this).call(this,t,r,i,Tg)}}],[{key:"getInstance",value:function(t,r,i,a,o,s,l){return h(n(e),"getInstance",this).call(this,t,r,i,a,o,s,this,Tg,l)}}]),e}(Jx),Sg={},wg=function(t){function e(e,r,i,a,n,o,s,l,h){return t.call(this,e,r,i,a,n,o,s,null,l,h)||this}return a(e,t),r(e,[{key:"__init",value:function(t,e,r,i,a,n,o){if(this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,i.width===t&&i.height===e)this.__canvas=i.source;else{var s=this.key=t+" "+e+" "+i.src;if(Sg.hasOwnProperty(s)){var l=Sg[s];l.count++,this.__canvas=l.canvas}else{var h=$.getOffscreenCanvas(t,e,null,null),u=h.ctx;u.globalAlpha=1,u.setTransform(1,0,0,1,0,0),u.drawImage(i.source,0,0,t,e),this.__canvas=h.canvas,Sg[s]={canvas:h.canvas,count:1}}}this.__x=0,this.__y=0,this.__enabled=!0,this.__available=!0,this.__appendData(n,o)}},{key:"clear",value:function(){if(this.__available)return this.__available=!1,!0}},{key:"release",value:function(){if(this.__enabled){this.clear();var t=this.key;if(Sg.hasOwnProperty(t)){var e=Sg[t];e.count--,e.count||delete Sg[t]}return this.__enabled=!1,this.__page=null,!0}}},{key:"reset",value:function(t,e,r){this.release();var i=Math.ceil(t[2]-t[0]),a=Math.ceil(t[3]-t[1]);Math.max(i,a)<=0||this.__init(i,a,t,this.__page,null,e,r)}},{key:"canvas",get:function(){return this.__canvas}},{key:"ctx",get:function(){return this.__ctx}},{key:"size",get:function(){}}],[{key:"getInstance",value:function(t,r,i,a,n,o,s){var l=Math.ceil(a[2]-a[0]),h=Math.ceil(a[3]-a[1]);if(!(Math.max(l,h)<=0))return new e(t,r,i,l,h,a,n,o,s)}}]),e}(pg),Cg={},kg=function(t){function e(e,r,i,a,n,o,s,l,h,u){return t.call(this,e,r,i,a,n,o,s,l,h,u)||this}return a(e,t),r(e,[{key:"clear",value:function(){if(this.__available)return this.__available=!1,this.update(),!0}},{key:"release",value:function(){if(this.__enabled){this.clear();var t=this.key;if(Cg.hasOwnProperty(t)){var e=Cg[t];e.count--,e.count||(delete Cg[t],this.__page.del(this.__pos))}return this.__page=null,this.__enabled=!1,!0}}}],[{key:"getInstance",value:function(t,r,i,a,n,o,s){var l=i+","+n.width+" "+n.height+" "+n.src;if(Cg.hasOwnProperty(l)){var h=Cg[l];h.count++;var u=a[2]-a[0],c=a[3]-a[1],_=h.cache,f=new e(t,r,i,u,c,a,_.page,_.pos,o,s);return f.key=l,f}var v=Jx.getInstance(t,r,i,a,o,s,this,cg,null);if(v.key=l,v)return Cg[l]={cache:v,count:1},v}}]),e}(pg),Og=gg,Ig=mg,Fg=bg,Lg=Eg,Bg=Mg,Dg=Ag,Pg=Vt.STYLE_KEY,Ng=Pg.DISPLAY,Hg=Pg.OPACITY,Gg=Pg.VISIBILITY,Wg=Pg.FILTER,Yg=Pg.OVERFLOW,Ug=Pg.MIX_BLEND_MODE,zg=Pg.FILL,Xg=Pg.TRANSFORM,Vg=Pg.TRANSFORM_ORIGIN,Kg=Pg.PERSPECTIVE,jg=Pg.PERSPECTIVE_ORIGIN,Zg=Vs.NONE,qg=Vs.TRANSFORM_ALL,$g=Vs.OPACITY,Jg=Vs.FILTER,Qg=Vs.REPAINT,tm=Vs.MIX_BLEND_MODE,em=Vs.PERSPECTIVE,rm=Vs.CACHE,im=Vs.MASK,am=g.isE,nm=g.inverse,om=g.multiply,sm=$c,lm=Jc,hm=H.assignMatrix,um=H.transformBbox,cm=Uo.isPerspectiveMatrix;function _m(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}function fm(t,e,r,i,a){var n=t.__cache;hm(t.__matrixEvent,g.identity()),t.__opacity=1;var o,s,l=t.__computedStyle,h=l[Kg],u=l[jg];o=(o=n&&n.available?n.bbox:t.bbox).slice(0),a&&h&&(s=Uo.calPerspectiveMatrix(h,u[0],u[1]));for(var c=t,_=r+1,f=r+i+1;_<f;_++){var v=e[_],y=v.node,d=v.total,p=v.hasMask;if(y instanceof Ol){if(y.__limitCache)return void $.warn("Bbox of Text("+r+") is oversize"+y.offsetWidth+", "+y.offsetHeight);var x=y.bbox,m=y.__domParent.__matrixEvent;x[2]-x[0]&&x[3]-x[1]&&(am(m)||(x=um(x,m,0,0)),vm(o,x))}else{if(y.__limitCache)return void $.warn("Bbox of "+y.tagName+"("+r+") is oversize"+y.offsetWidth+", "+y.offsetHeight);var b=y.__computedStyle,E=y.__mask;if("none"===b[Ng]||_!==r&&E)_+=d||0,p&&(_+=ym(e,_+1,p));else{var M=y.__cache,A=y.__cacheTotal,T=y.__cacheFilter,R=y.__cacheMask,S=y.__domParent;y.__opacity=b[Hg]*S.__opacity;var w=y.__matrix;S!==c&&(w=om(S.__matrixEvent,w)),a&&S===c&&s&&(w=om(s,w)),hm(y.__matrixEvent,w);var C=void 0,k=_m([R,T,A,M]);k?(k!==M&&(_+=d||0,p&&(_+=ym(e,_+1,p))),C=k.bbox):C=y.bbox,C[2]-C[0]&&C[3]-C[1]&&vm(o,C=um(C,w,0,0))}}}return o[2]-o[0]<=0||o[3]-o[1]<=0?{}:{bbox:o,pm:s}}function vm(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[2]),t[3]=Math.max(t[3],e[3])}function ym(t,e,r){for(var i=0;r--;){var a=t[e].total;i+=a||0,e+=a||0,i++,e++}return i}function dm(t,e,r,i){var a=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var n=t.checkFramebufferStatus(t.FRAMEBUFFER);return n!==t.FRAMEBUFFER_COMPLETE&&$.error("Framebuffer object is incomplete: "+n.toString()),t.viewport(0,0,r,i),a}function pm(t,e,r,i,a,n,o){i.x1,i.y1,i.width,i.height,i.bbox;var s=i;return a.forEach((function(r){var a=r.k,n=r.v;if("blur"===a&&n>0){var o=function(t,e,r,i){var a=r.x1,n=r.y1,o=r.bbox,s=r.width,l=r.height,h=ha.kernelSize(i),u=Math.max(15,e.getParameter(e.MAX_VARYING_VECTORS));for(;h>u;)h-=2;var c=ha.outerSizeByD(h);if(s>ag.MAX+c||l>ag.MAX+c)return void $.warn("Filter blur is oversize");var _=o.slice(0);_[0]-=c,_[1]-=c,_[2]+=c,_[3]+=c;var f=s+2*c,v=l+2*c,y=ug.createTexture(e,null,0,f,v),d=dm(e,y,f,v);ug.drawCache2Tex(e,e.program,r,f,v,c);var p=gm(e,i,h);y=ug.drawBlur(e,p,y,f,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(d);var x=Rg.getInstance(t,e,r.__rootId,_,a,n,null);x.__available=!0;var g=x.__page,m=g.__size,b=g.texture;return d=dm(e,b,m,m),ug.drawTex2Cache(e,e.program,x,y,f,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(d),x}(t,e,s,n);o&&(s!==i&&s.release(),s=o)}else if("dropShadow"===a){var l=function(t,e,r,i){var a=r.x1,n=r.y1,o=r.bbox,s=r.width,l=r.height,h=u(i,5),c=h[0],_=h[1],f=h[2],v=h[4],y=ha.kernelSize(f),d=Math.max(15,e.getParameter(e.MAX_VARYING_VECTORS));for(;y>d;)y-=2;var p=ha.outerSizeByD(y);if(s>ag.MAX+p||l>ag.MAX+p)return void $.warn("Filter dropShadow is oversize");var x=s+2*p,g=l+2*p,m=ug.createTexture(e,null,0,x,g),b=dm(e,m,x,g);if(e.useProgram(e.programDs),ug.drawDropShadow(e,e.programDs,b,r,v,s,x,l,g),f){var E=gm(e,f,y);m=ug.drawBlur(e,E,m,x,g)}e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(b);var M=ug.createTexture(e,null,0,s,l);b=dm(e,M,s,l),ug.drawCache2Tex(e,e.program,r,s,l,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(b);var A=o.slice(0);A[0]+=c,A[1]+=_,A[2]+=c,A[3]+=_,A[0]-=p,A[1]-=p,A[2]+=p,A[3]+=p;var T=o.slice(0);vm(T,A);var R=Rg.getInstance(t,e,r.__rootId,T,a,n,null);R.__available=!0;var S=R.__page,w=S.__size;b=dm(e,S.texture,w,w);var C=A[0]-T[0],k=A[1]-T[1],O=o[0]-T[0],I=o[1]-T[1];return ug.drawDropShadowMerge(e,R,w,m,C,k,x,g,M,O,I,s,l),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(b),ug.bindTexture(e,null,0),e.deleteTexture(m),e.deleteTexture(M),R}(t,e,s,n);l&&(s!==i&&s.release(),s=l)}else if("hueRotate"===a){var h=se.d2r(n%360),c=Math.cos(h),_=Math.sin(h),f=mm(t,e,s,[.213+.787*c-.213*_,.715-.715*c-.715*_,.072-.072*c+.928*_,0,0,.213-.213*c+.143*_,.715+.285*c+.14*_,.072-.072*c-.283*_,0,0,.213-.213*c-.787*_,.715-.715*c+.715*_,.072+.928*c+.072*_,0,0,0,0,0,1,0]);f&&(s!==i&&s.release(),s=f)}else if("saturate"===a&&100!==n){var v=.01*n,y=mm(t,e,s,[.213+.787*v,.715-.715*v,.072-.072*v,0,0,.213-.213*v,.715+.285*v,.072-.072*v,0,0,.213-.213*v,.715-.715*v,.072+.928*v,0,0,0,0,0,1,0]);y&&(s!==i&&s.release(),s=y)}else if("brightness"===a&&100!==n){var d=.01*n,p=mm(t,e,s,[d,0,0,0,0,0,d,0,0,0,0,0,d,0,0,0,0,0,1,0]);p&&(s!==i&&s.release(),s=p)}else if("grayscale"===a&&n>0){var x=1-.01*(n=Math.min(n,100));x<0?x=0:x>1&&(x=1);var g=mm(t,e,s,[.2126+.7874*x,.7152-.7152*x,.0722-.0722*x,0,0,.2126-.2126*x,.7152+.2848*x,.0722-.0722*x,0,0,.2126-.2126*x,.7152-.7152*x,.0722+.9278*x,0,0,0,0,0,1,0]);g&&(s!==i&&s.release(),s=g)}else if("contrast"===a&&100!==n){var m=.01*n,b=-.5*m+.5,E=mm(t,e,s,[m,0,0,0,b,0,m,0,0,b,0,0,m,0,b,0,0,0,1,0]);E&&(s!==i&&s.release(),s=E)}else if("sepia"===a&&n>0){var M=1-.01*(n=Math.min(n,100));M<0?M=0:M>1&&(M=1);var A=mm(t,e,s,[.393+.607*M,.769-.769*M,.189-.189*M,0,0,.349-.349*M,.686+.314*M,.168-.168*M,0,0,.272-.272*M,.534-.534*M,.131+.869*M,0,0,0,0,0,1,0]);A&&(s!==i&&s.release(),s=A)}else if("invert"===a&&n>0){var T=.01*(n=Math.min(n,100)),R=1-2*T,S=mm(t,e,s,[R,0,0,0,T,0,R,0,0,T,0,0,R,0,T,0,0,0,1,0]);S&&(s!==i&&s.release(),s=S)}})),e.useProgram(e.program),e.viewport(0,0,n,o),r.__cacheFilter=s}var xm={};function gm(t,e,r){var i=e+","+r;if(xm.hasOwnProperty(i))return xm[i];for(var a=ha.gaussianWeight(e,r),n="",o="",s=Math.floor(.5*r),l=0;l<s;l++){var h=.01*(s-l);n+="v_texCoordsBlur[".concat(l,"] = a_texCoords + vec2(-").concat(h,", -").concat(h,") * u_direction;"),o+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(l,"]) * ").concat(a[l],";")}n+="v_texCoordsBlur[".concat(s,"] = a_texCoords;"),o+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(s,"]) * ").concat(a[s],";");for(var u=0;u<s;u++){var c=.01*(u+1);n+="v_texCoordsBlur[".concat(u+s+1,"] = a_texCoords + vec2(").concat(c,", ").concat(c,") * u_direction;"),o+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(u+s+1,"]) * ").concat(a[u+s+1],";")}return n="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}".replace("[3]","["+r+"]").replace(/}$/,n+"}"),o="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}".replace("[3]","["+r+"]").replace(/}$/,o+"}"),xm[i]=ug.initShaders(t,n,o)}function mm(t,e,r,i){var a=r.x1,n=r.y1,o=r.bbox,s=Rg.getInstance(t,e,r.__rootId,o.slice(0),a,n,r.__page);s.__available=!0;var l=s.__page.__size,h=dm(e,s.__page.texture,l,l);return ug.drawCm(e,e.programCm,s,r,i,.5*l,l),e.useProgram(e.program),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(h),s}function bm(t,e,r,i,a,n,o,s,l,h,u,c){var _,f=ug.createTexture(t,null,0,u,c),v=dm(t,f,u,c);ug.drawTextureCache(t,[{cache:r,opacity:a,matrix:n}],l,h,o,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(v),"multiply"===(i=sm(i))?_=t.programMbmMp:"screen"===i?_=t.programMbmSr:"overlay"===i?_=t.programMbmOl:"darken"===i?_=t.programMbmDk:"lighten"===i?_=t.programMbmLt:"color-dodge"===i?_=t.programMbmCd:"color-burn"===i?_=t.programMbmCb:"hard-light"===i?_=t.programMbmHl:"soft-light"===i?_=t.programMbmSl:"difference"===i?_=t.programMbmDf:"exclusion"===i?_=t.programMbmEx:"hue"===i?_=t.programMbmHue:"saturation"===i?_=t.programMbmSt:"color"===i?_=t.programMbmCl:"luminosity"===i&&(_=t.programMbmLm),t.useProgram(_);var y=ug.createTexture(t,null,0,u,c),d=dm(t,y,u,c);return ug.drawMbm(t,_,e,f),t.useProgram(t.program),{texture:y,frameBuffer:d}}var Em=function(t,e,r,i,a){var n=r.__structs,o=r.width,s=r.height,l=[];if(i||a>=Qg||a&(rm|Jg|im))for(var h=0,u=n.length;h<u;h++){var c=n[h],_=c.node,f=c.lv,v=c.total,y=c.hasMask;if(!(_ instanceof Ol))if("none"!==_.__computedStyle[Ng]){var d=_.__refreshLevel,p=_.__cacheTotal;_.__refreshLevel=Zg;var x=_.__cacheAsBitmap&&(d&(rm|Jg)||d>=Qg);if(!x&&_ instanceof Ex){var m=_.calContent(_.__currentStyle,_.__computedStyle);_.__loadImg.onlyImg&&m&&(x=!0)}x&&l.push({i:h,lv:f,total:v,node:_,hasMask:y}),p&&p.available&&(h+=v||0,d===Zg&&y&&(h+=ym(n,h+1,y)))}else h+=v||0,y&&(h+=ym(n,h+1,y))}l.length&&(l.sort((function(t,e){return t.lv===e.lv?e.i-t.i:e.lv-t.lv})),l.forEach((function(i){var a=i.i,l=i.lv,h=i.total,u=i.node,c=i.hasMask,_=function(t,e,r,i,a,n,o,s,l,h){var u=i.__cacheTotal;if(u&&u.available)return u;var c=i.__x1,_=i.__y1,f=i.__offsetWidth,v=i.__offsetHeight,y=fm(i,s,a,o,!1).bbox;if(y){if(i instanceof Ex&&i.__loadImg.onlyImg)return i.__cacheTotal=wg.getInstance(t,e,r.__uuid,y,i.__loadImg,c,_);var d,p,x,g,m,b,E,M,A,T=i.__computedStyle[Yg];if(c===y[0]&&_===y[1]&&f===y[2]-y[0]&&v===y[3]-y[1]||"hidden"!==T){if(d=y[2]-y[0],p=y[3]-y[1],!(u=i.__cacheTotal=pg.getInstance(t,e,r.__uuid,y,c,_,null))||!u.__enabled)return void((d||p)&&$.warn("CanvasCache of "+i.tagName+"("+a+") is oversize: "+d+", "+p));u.__available=!0,x=u.dx,g=u.dy,m=u.dbx,b=u.dby,E=u.x,M=u.y}else y=[c,_,c+f,_+v],d=f,p=v,x=-c,g=-_,m=0,b=0,E=0,M=0,A=!0,u=$.getOffscreenCanvas(d,p,"overflow",null);for(var R=u.ctx,S=[],w=null,C=null,k=n,O=[],I=[],F=a,L=a+(o||0)+1;F<L;F++){var B=s[F],D=B.node,P=B.lv,N=B.total,H=B.hasMask;if(D instanceof Ol){D.render(t,R,x,g);var G=I[F];G&&(R=Dg(R,G,l,h,!1))}else{var W=D.__computedStyle;if("none"===W[Ng]){F+=N||0,H&&(F+=ym(s,F+1,H));var Y=I[F];Y&&(R=Dg(R,Y,l,h,!0));continue}var U=D.__cacheTotal,z=D.__cacheFilter,X=D.__cacheMask,V=W[Xg],K=W[Vg],j=W[Gg],Z=O[F];if(Z){var q=Z.idx,J=Z.hasMask,Q=Z.offscreenMask,tt=$.getOffscreenCanvas(l,h,null,"mask2");Q.mask=tt,Q.isClip=D.__clip;for(var et=F+(N||0)+1;--J;)et+=(s[et].total||0)+1;var rt=I[--et]=I[et]||[];rt.push({idx:q,lv:P,type:Fg,offscreen:Q}),rt.push({idx:et,lv:P,type:Bg,offscreen:{ctx:R,target:tt}}),R=tt.ctx}if(F===a);else if(P>k)am(w=C)&&(w=null),S.push(w);else if(P<k){var it=k-P;S.splice(-it),w=S[P-1]}k=P;var at=void 0;F===a||am(w)&&am(V)||(at=Uo.calMatrixByOrigin(V,K[0]+m+D.__x1-c+E,K[1]+b+D.__y1-_+M),am(w)||(at=om(w,at))),C=at;var nt=F>a&&_m([X,z,U]);if(nt){F+=N||0,H&&(F+=ym(s,F+1,H)),R.globalAlpha=D.__opacity,at?R.setTransform(at[0],at[1],at[4],at[5],at[12],at[13]):R.setTransform(1,0,0,1,0,0);var ot=W[Ug];lm(ot)&&(R.globalCompositeOperation=sm(ot)),pg.drawCache(nt,u),R.globalCompositeOperation="source-over";var st=I[F];st&&(R=Dg(R,st,l,h,!1))}else{var lt=void 0,ht=void 0,ut=void 0,ct=void 0,_t=F>a&&D.__calOffscreen(R,W);if(_t&&(R=_t.ctx,lt=_t.offscreenBlend,ht=_t.offscreenMask,ut=_t.offscreenFilter,ct=_t.offscreenOverflow),"visible"===j&&(R.globalAlpha=D.__opacity,at?R.setTransform(at[0],at[1],at[4],at[5],at[12],at[13]):R.setTransform(1,0,0,1,0,0),D.render(t,R,x,g)),lt){var ft=F+(N||0);H&&(ft+=ym(s,ft+1,H)),(I[ft]=I[ft]||[]).push({idx:F,lv:P,type:Lg,offscreen:lt})}if(ht&&(O[F+(N||0)+1]={idx:F,hasMask:H,offscreenMask:ht}),ut){var vt=F+(N||0);H&&(vt+=ym(s,vt+1,H)),(I[vt]=I[vt]||[]).push({idx:F,lv:P,type:Ig,offscreen:ut})}if(ct){var yt=F+(N||0);H&&(yt+=ym(s,yt+1,H)),(I[yt]=I[yt]||[]).push({idx:F,lv:P,type:Og,offscreen:ct})}var dt=I[F];dt&&(R=Dg(R,dt,l,h,!1))}}}if(A){var pt=i.__cacheTotal=pg.getInstance(t,e,r.__uuid,y,c,_,null);pt.__available=!0,pt.ctx.drawImage(u.canvas,pt.x,pt.y),u.release(),u=pt}return u}}(t,e,r,u,a,l,h||0,n,o,s);_&&function(t,e,r,i,a,n,o){var s,l=i.__computedStyle,h=i.__cacheFilter,u=i.__cacheMask,c=l[Wg],_=r;c&&c.length&&(h&&h.available&&!s||(_=i.__cacheFilter=pg.genFilter(_,c),s=!0)),!a||u&&u.available&&!s||(_=i.__cacheMask=pg.genMask(_,i,(function(r,i,a){for(var s={},l={},h=i.dx,u=i.dy,c=i.dbx,_=i.dby,f=i.x,v=i.y,y=i.ctx,d=i.x1,p=i.y1,x=r.__struct,m=r.__root.__structs.indexOf(x),b=x.total,E=[],M=null,A=null,T=[],R=1,S=1,w=x.lv,C=m,k=m+(b||0)+1;C<k;C++){var O=e[C],I=O.node,F=O.lv,L=O.total,B=O.hasMask;if(I instanceof Ol)I.render(t,y,h,u),l.hasOwnProperty(C)&&(y=Dg(y,l[C],n,o,!1));else{var D=I.__computedStyle;if("none"===D[Ng]){C+=L||0,B&&(C+=ym(e,C+1,B)),l.hasOwnProperty(C)&&(y=Dg(y,l[C],n,o,!0));continue}var P=I.__cacheTotal,N=I.__cacheFilter,G=I.__cacheMask;if(s.hasOwnProperty(C)){var W=s[C],Y=W.idx,U=W.hasMask,z=W.offscreenMask,X=$.getOffscreenCanvas(n,o,null,"mask2");z.mask=X,z.isClip=I.__clip;for(var V=C+(L||0)+1;--U;)V+=(e[V].total||0)+1;var K=l[--V]=l[V]||[];K.push({idx:Y,lv:F,type:Fg,offscreen:z}),K.push({idx:V,lv:F,type:Bg,offscreen:{ctx:y,target:X}}),y=X.ctx}if(C===m);else if(F>w)am(M=A)&&(M=null),E.push(M),R=S,T.push(R);else if(F<w){var j=w-F;E.splice(-j),M=E[F-1],T.splice(-j),R=T[F-1]}w=F;var Z=D[Xg],q=D[Vg],J=D[Hg];C!==m&&(J*=R),I.__opacity=S=J;var Q=void 0;am(Z)||(Q=Uo.calMatrixByOrigin(Z,q[0]+c+I.__x1-d+f,q[1]+_+I.__y1-p+v),am(M)||(Q=om(M,Q))),A=Q,Q?H.equalArr(Q,a)?Q=g.identity():a&&(a=g.inverse(a),Q=g.multiply(a,Q)):am(a)||(Q=g.inverse(a)),Q=Q||g.identity(),hm(I.__matrixEvent,Q);var tt=_m([G,N,P]);if(tt){C+=L||0,B&&(C+=ym(e,C+1,B)),y.globalAlpha=J,y.setTransform(Q[0],Q[1],Q[4],Q[5],Q[12],Q[13]);var et=D[Ug];lm(et)?y.globalCompositeOperation=sm(et):y.globalCompositeOperation="source-over";var rt=tt.x,it=tt.y,at=tt.canvas,nt=tt.width,ot=tt.height,st=tt.x1,lt=tt.y1,ht=f+st-d+c-tt.dbx,ut=v+lt-p+_-tt.dby;y.drawImage(at,rt,it,nt,ot,ht,ut,nt,ot),y.globalCompositeOperation="source-over",l.hasOwnProperty(C)&&(y=Dg(y,l[C],nt,ot,!1))}else{var ct=void 0,_t=void 0,ft=void 0,vt=void 0,yt=I.__calOffscreen(y,D);if(yt&&(y=yt.ctx,ct=yt.offscreenBlend,_t=yt.offscreenMask,ft=yt.offscreenFilter,vt=yt.offscreenOverflow),y.globalAlpha=J,y.setTransform(Q[0],Q[1],Q[4],Q[5],Q[12],Q[13]),I.render(t,y,h,u),ct){var dt=C+(L||0);B&&(dt+=ym(e,dt+1,B)),(l[dt]=l[dt]||[]).push({idx:C,lv:F,type:Lg,offscreen:ct})}if(_t&&(s[C+(L||0)+1]={idx:C,hasMask:B,offscreenMask:_t}),ft){var pt=C+(L||0);B&&(pt+=ym(e,pt+1,B)),(l[pt]=l[pt]||[]).push({idx:C,lv:F,type:Ig,offscreen:ft})}if(vt){var xt=C+(L||0);B&&(xt+=ym(e,xt+1,B)),(l[xt]=l[xt]||[]).push({idx:C,lv:F,type:Og,offscreen:vt})}l.hasOwnProperty(C)&&(y=Dg(y,l[C],n,o))}}}})))}(t,n,_,u,c,o,s)})));for(var b=[],E=[],M=-1,A=0,T=n.length;A<T;A++){var R=n[A],S=R.node,w=R.lv,C=R.total,k=R.hasMask;if(S instanceof Ol){S.render(t,e,0,0);var O=E[A];O&&(e=Dg(e,O,o,s,!1),M=-1)}else{var I=S.__computedStyle;if("none"===I[Ng]){A+=C||0,k&&(A+=ym(n,A+1,k));var F=E[A];F&&(e=Dg(e,F,o,s,!0),M=-1);continue}var L=S.__cacheTotal,B=S.__cacheFilter,D=S.__cacheMask,P=S.__domParent,N=S.__matrix,G=b[A];if(G){var W=G.idx,Y=G.hasMask,U=G.offscreenMask,z=$.getOffscreenCanvas(o,s,null,"mask2");U.mask=z,U.isClip=S.__clip;for(var X=A+(C||0)+1;--Y;){X+=(n[X].total||0)+1}var V=E[--X]=E[X]||[];V.push({idx:W,lv:w,type:Fg,offscreen:U}),V.push({idx:X,lv:w,type:Bg,offscreen:{ctx:e,target:z}}),e=z.ctx}var K=I[Hg],j=N;if(P){1!==P.__opacity&&(K*=P.__opacity);var Z=P.__matrixEvent;Z&&Z.length&&(j=om(Z,j))}S.__opacity=K,hm(S.__matrixEvent,j);var q=_m([D,B,L]);if(q){A+=C||0,k&&(A+=ym(n,A+1,k)),M!==K&&(e.globalAlpha=K,M=K),e.setTransform(j[0],j[1],j[4],j[5],j[12],j[13]);var J=I[Ug];lm(J)&&(e.globalCompositeOperation=sm(J));var Q=q.x,tt=q.y,et=q.canvas,rt=q.x1,it=q.y1,at=q.dbx,nt=q.dby,ot=q.width,st=q.height;e.drawImage(et,Q,tt,ot,st,rt-at,it-nt,ot,st),e.globalCompositeOperation="source-over";var lt=E[A];lt&&(e=Dg(e,lt,o,s,!1),M=-1)}else{var ht=void 0,ut=void 0,ct=void 0,_t=void 0,ft=S.__calOffscreen(e,I);if(ft&&(e=ft.ctx,ht=ft.offscreenBlend,ut=ft.offscreenMask,ct=ft.offscreenFilter,_t=ft.offscreenOverflow),M!==K&&(e.globalAlpha=K,M=K),e.setTransform(j[0],j[1],j[4],j[5],j[12],j[13]),S.render(t,e,0,0),ht){var vt=A+(C||0);k&&(vt+=ym(n,vt+1,k)),(E[vt]=E[vt]||[]).push({idx:A,lv:w,type:Lg,offscreen:ht})}if(ut)b[A+(C||0)+1]={idx:A,hasMask:k,offscreenMask:ut};if(ct){var yt=A+(C||0);k&&(yt+=ym(n,yt+1,k)),(E[yt]=E[yt]||[]).push({idx:A,lv:w,type:Ig,offscreen:ct})}if(_t){var dt=A+(C||0);k&&(dt+=ym(n,dt+1,k)),(E[dt]=E[dt]||[]).push({idx:A,lv:w,type:Og,offscreen:_t})}var pt=E[A];pt&&(e=Dg(e,pt,o,s,!1),M=-1)}}}},Mm=function(t,e,r,i,a){var n=r.__structs,o=r.width,s=r.height,l=[];if(!i)for(var h=0,u=n.length;h<u;h++){var c=n[h],_=c.node,f=c.total,v=c.hasMask,y=_.__cacheDefs,d=_.__refreshLevel;if(v&&(d>=Qg||d&(qg|$g)))l[h+(f||0)+1+v-1]=d;if(d<Qg){var p=l[h];p?d&qg||!(p<Qg)||p&qg||y.forEach((function(t){e.addCache(t)})):_ instanceof Ol||y.forEach((function(t){e.addCache(t)}))}}for(var x,m,b,E=[],M=[],A=[],T=0,R=0,S=function(r,i){var a=n[r],h=a.node,u=a.lv,c=a.total,_=a.hasMask,f=void 0,v=void 0,y=void 0,d=void 0;h instanceof Ol?(f=h.computedStyle,v=R):(f=h.__computedStyle,y=h.__cacheDefs,v=h.__refreshLevel,d=h.__cacheTotal),R=v,h.__refreshLevel=Zg;var p=f[Ng];if(_&&"none"!==p){var S=r+(c||0)+1,C=S+_;E[C-1]={index:r,start:S,end:C,isClip:n[S].node.__clip}}if(u<T){var k=T-u;M.splice(-k),x=M[u-1],A.splice(-k),m=A[u-1]}else if(u>T){M.push(x=b.__matrix);var O=b.__virtualDom;A.push(O),m=O}b=h,T=u;var I=void 0;if(v<Qg&&!(h instanceof Ol)){if(I=h.__virtualDom,d&&d.available?(r+=c||0,I.cache=!0):(d&&(d.available=!0),I=h.__virtualDom=H.extend({},I),h instanceof Kp&&!(h instanceof Ex)&&(I.children=[]),"none"===p?(r+=c||0,_&&(r+=_)):delete I.cache),v&qg){var F=h.__matrix;!F||am(F)?delete I.transform:I.transform="matrix("+H.joinArr(g.m2m6(F),",")+")",x&&F&&(F=om(x,F)),hm(h.__matrixEvent,F)}if(v&$g){var L=f[Hg];1===L?delete I.opacity:I.opacity=L}if(v&Jg){var B=f[Wg],D=ce.svgFilter(B);D?I.filter=D:delete I.filter}if(v&tm){var P=f[Ug];lm(P)?I.mixBlendMode=sm(P):delete I.mixBlendMode}I.lv=v}else{if(!(h instanceof Ol)){h.__cacheDefs.splice(0);var N=h.__matrix;x&&(N=om(x,N)),hm(h.__matrixEvent,N)}h.render(t,e,0,0),I=h.__virtualDom,h instanceof Ol||(h.__cacheTotal=h.__cacheTotal||{available:!0,release:function(){this.available=!1,delete I.cache},__offsetY:function(){}},h.__cacheTotal.available=!0),"none"===(p=f[Ng])&&(r+=c||0,r+=_||0)}var G=E[r];if(G&&(l[r]||v>=Qg||v&(qg|$g))){var W=G.index,Y=G.start,U=G.end,z=G.isClip,X=n[W].node,V=[];z&&V.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(o,",0L").concat(o,",").concat(s,"L0,").concat(s,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var K=Y;K<U;K++){var j=n[K].node,Z=j.computedStyle,q=Z[Ng],$=Z[Gg],J=Z[zg],Q=j.virtualDom,tt=Q.children,et=Q.opacity;if("none"!==q&&"hidden"!==$){tt=H.clone(tt),V=V.concat(tt);for(var rt=0,it=tt.length;rt<it;rt++){var at=tt[rt],nt=at.tagName,ot=at.props;if("path"===nt){if(z)for(var st=0,lt=ot.length;st<lt;st++){var ht=ot[st];"fill"===ht[0]&&(ht[1]=H.int2invert(J[0]))}var ut=j.matrix,ct=nm(X.matrix);ut=om(ct,ut),ot.push(["transform","matrix(".concat(H.joinArr(g.m2m6(ut),","),")")]),H.isNil(et)||1===et||ot.push(["opacity",et])}else if("image"===nt){for(var _t=-1,ft=0,vt=ot.length;ft<vt;ft++)if("transform"===ot[ft][0]){_t=ft;break}if(-1===_t){var yt=nm(X.matrix);am(yt)||ot.push(["transform","matrix(".concat(H.joinArr(g.m2m6(yt),","),")")])}else{var dt=ot[_t][1].match(/[\d.]+/g).map((function(t){return parseFloat(t)})),pt=nm(X.matrix);dt=om(pt,dt),ot[_t][1]="matrix(".concat(H.joinArr(g.m2m6(dt),","),")")}}}}}for(var xt=y.length-1;xt>=0;xt--){var gt=y[xt];"mask"===gt.tagName&&(y.splice(xt,1),e.removeCache(gt))}var mt={tagName:"mask",props:[],children:V},bt=e.add(mt);y.push(mt),bt="url(#"+bt+")",X.virtualDom.mask=bt}m&&!h.__mask&&m.children.push(I),0===r&&(x=h.__matrix,m=I),w=r},w=0,C=n.length;w<C;w++)S(w)},Am=function(t,e,r,i,a){i&&ag.init(e.getParameter(e.MAX_TEXTURE_SIZE));var n,o,s,l=r.__structs,h=r.width,u=r.height,c=.5*h,_=.5*u,f=Zg,v=[];if(i||a>=Qg||a&(rm|Jg|em|im))for(var d=0,p=l.length;d<p;d++){var x=l[d],m=x.node,b=x.lv,E=x.total,M=x.hasMask;if(m.__index=d,m instanceof Ol){if(f>=Qg){var A=m.bbox,T=m.__x,R=m.__y,S=m.__cache;S?S.reset(A,T,R):S=pg.getInstance(y.CANVAS,e,r.__uuid,A,T,R,null),S&&S.enabled?(S.__bbox=A,S.__available=!0,m.__cache=S,m.render(y.CANVAS,S.ctx,S.dx,S.dy)):(S&&S.release(),m.__limitCache=!0)}}else{var w=m.__computedStyle;if("none"!==w[Ng]){var C=m.__refreshLevel,k=m.__currentStyle,O=m.__cacheTotal;if(f=C,m.__refreshLevel=Zg,C)if(C<Qg){var I=w[Ug],F=C&tm&&lm(I),L=m.__cacheAsBitmap||M;if(!L&&C&Jg){var B=w[Wg];B&&B.length&&(L=!0)}if(!L&&C&em){var D=m.__domParent;(!am(D&&D.__perspectiveMatrix)||cm(m.__matrix))&&(L=!0)}F&&(n=!0),L&&v.push({i:d,lv:b,total:E,node:m,hasMask:M}),O&&O.available&&(d+=E||0,C===Zg&&M&&(d+=ym(l,d+1,M)))}else{var P=void 0;if(m.calContent(k,w)){var N=m.bbox,H=m.__cache,G=m.__x1,W=m.__y1;if(m instanceof Ex){var Y=m.__loadImg;Y.onlyImg&&!Y.error&&Y.source&&(P=!0,H=m.__cache=kg.getInstance(y.CANVAS,e,r.__uuid,N,Y,G,W))}if(P||(H?H.reset(N,G,W):H=pg.getInstance(y.CANVAS,e,r.__uuid,N,G,W,null)),!H||!H.enabled)return H&&H.release(),void(m.__limitCache=!0);H.__bbox=N,H.__available=!0,m.__cache=H,m.render(y.CANVAS,H.ctx,H.dx,H.dy)}else m.__limitCache=!1;var U=w[Yg],z=w[Wg],X=w[Ug],V=lm(X),K=m.__domParent,j=!am(K&&K.__perspectiveMatrix)||cm(m.__matrix),Z="hidden"===U&&E,q=z&&z.length;V&&(n=!0),(m.__cacheAsBitmap||M||q||Z||j)&&v.push({i:d,lv:b,total:E,node:m,hasMask:M})}else;}else d+=E||0,M&&(d+=ym(l,d+1,M))}}if(v.length){v.sort((function(t,e){return t.lv===e.lv?e.i-t.i:e.lv-t.lv}));var J={};v.forEach((function(i){var a=i.i,n=i.lv,o=i.total,s=i.node,c=i.hasMask,_=s.__matrix,f=s.__domParent,v=s.__computedStyle,y=v[Yg],d=v[Wg];if(!am(f&&f.__perspectiveMatrix)||cm(_)){for(var p=s.__domParent;p;){var x=p.__index;if(J[x])break;cm(p.__matrix)&&(J[x]=!0),(p=p.__domParent)&&p.__perspectiveMatrix&&(J[x]=!0)}if(!J[a]&&!(c||d.length||"hidden"===y&&o||s.__cacheAsBitmap))return}var m=s.__limitCache,b=s.__cacheTotal,E=s.__cacheFilter,M=s.__cacheMask;if(!m){var A;if(!b||!b.available){var T=function(t,e,r,i,a,n,o,s,l,h,u){if(e&&e.available)return e;var c=a.__x1,_=a.__y1,f=a.__cache,v=a.__offsetWidth,y=a.__offsetHeight,d=fm(a,l,n,s,!0),p=d.bbox,x=d.pm;if(p){var g,m,b,E,M,A,T,R,S,w,C=a.__computedStyle[Yg];if(c===p[0]&&_===p[1]&&v===p[2]-p[0]&&y===p[3]-p[1]||"hidden"!==C?(g=p[2]-p[0],m=p[3]-p[1]):(p=[c,_,c+v,_+y],g=v,m=y,b=-c,E=-_,M=0,A=0),e?e.reset(p,c,_):e=Rg.getInstance(t,r,i.__uuid,p,c,_,null),e&&e.__enabled){if(e.__available=!0,a.__cacheTotal=e,T=.5*g,R=.5*m,b=-p[0],E=-p[1],M=e.dbx,A=e.dby,x){var k=a.__computedStyle,O=k[Kg],I=k[jg];x=Uo.calPerspectiveMatrix(O,c+b+I[0],_+E+I[1])}var F=e.__page,L=F.__size;w=dm(r,S=ug.createTexture(r,null,0,g,m),g,m),r.viewport(0,0,g,m);var B,D=[];f&&f.available&&(D.push({cache:f,opacity:1}),ug.drawTextureCache(r,D,T,R,b,E),D.splice(0)),a.render(t,r,b,E);for(var P=e,N=[],H=null,G=null,W=o,Y=a,U=n+1,z=n+(s||0)+1;U<z;U++){var X=l[U],V=X.node,K=X.lv,j=X.total,Z=X.hasMask;if(V instanceof Ol){var q=V.__cache;if(q&&q.available){var J=G,Q=V.__domParent.__opacity,tt=q.__page;B&&B!==tt&&(ug.drawTextureCache(r,D,T,R,b,E),D.splice(0)),B=tt,D.push({cache:q,opacity:Q,matrix:J})}}else{var et=V.__computedStyle;if("none"===et[Ng]||V.__mask){U+=j||0,Z&&(U+=ym(l,U+1,Z));continue}var rt=V.__cache,it=V.__cacheTotal,at=V.__cacheFilter,nt=V.__cacheMask,ot=et[Gg],st=et[Xg],lt=et[Vg],ht=et[Ug];if(K>W)am(H=G)&&(H=null),N.push(H);else if(K<W){var ut=W-K;N.splice(-ut),H=N[K-1]}W=K;var ct=void 0;am(st)||(ct=Uo.calMatrixByOrigin(st,lt[0]+M+V.__x1-c,lt[1]+A+V.__y1-_),am(H)||(ct=om(H,ct)),x&&V.__domParent===Y&&(ct=om(x,ct))),G=ct;var _t=_m([nt,at,it,rt]);if(_t&&(_t!==rt||"visible"===ot)){if(lm(ht)){D.length&&(ug.drawTextureCache(r,D,T,R,b,E),D.splice(0)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.bindFramebuffer(r.FRAMEBUFFER,null);var ft=bm(r,S,_t,ht,V.__opacity,ct,b,E,T,R,L,L);ft&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(w),r.deleteTexture(S),S=ft.texture,w=ft.frameBuffer,r.bindFramebuffer(r.FRAMEBUFFER,w),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,S,0)),B=null}else{var vt=_t.__page;B&&B!==vt&&(ug.drawTextureCache(r,D,T,R,b,E),D.splice(0)),B=vt,D.push({cache:_t,opacity:V.__opacity,matrix:ct})}_t!==rt&&(U+=j||0,Z&&(U+=ym(l,U+1,Z))),_t&&_t!==rt||V.render(t,r,b,E)}}}return ug.drawTextureCache(r,D,T,R,b,E),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(w),w=dm(r,F.texture,L,L),ug.drawTex2Cache(r,r.program,P,S,g,m),r.deleteTexture(S),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(w),r.bindTexture(r.TEXTURE_2D,null),r.viewport(0,0,h,u),e}(g||m)&&$.warn("TextureCache of "+a.tagName+"("+n+") is oversize: "+g+", "+m)}}(t,b,e,r,s,a,n,o||0,l,h,u);if(!T)return;b=T,A=!0}var R=b;if(d.length&&(!E||!E.available||A)){var S=pm(t,e,s,R,d,h,u);S&&(R=S,A=!0)}!c||M&&M.available&&!A||function(t,e,r,i,a,n,o,s,l,h){var u=a.x1,c=a.y1,_=a.width,f=a.height,v=a.bbox,y=a.dbx,d=a.dby,p=v.slice(0),x=Rg.getInstance(t,e,r.__uuid,p,u,c,a.__page);x.__available=!0,i.__cacheMask=x;var m,b=i.__computedStyle,E=b[Xg],M=b[Vg];m=am(E)?g.identity():Uo.calMatrixByOrigin(E,M[0],M[1]),m=g.inverse(m),e.viewport(0,0,_,f);for(var A,T,R=ug.createTexture(e,null,0,_,f),S=.5*_,w=.5*f,C=dm(e,R,_,f),k=i.next,O=k.__clip,I=[],F=-u+y,L=-c+d;k&&k.__mask&&k.__clip===O;){for(var B=[],D=void 0,P=void 0,N=[],H=1,G=void 0,W=l,Y=s,U=s+(h[s].total||0)+1;s<U;s++){var z=h[s],X=z.node,V=z.lv,K=z.total,j=z.hasMask;if(X instanceof Ol){var Z=X.__cache;if(Z&&Z.available){var q=X.__domParent,$=q.__matrixEvent,J=q.__opacity,Q=Z.__page;A&&A!==Q&&(ug.drawTextureCache(e,I,S,w,F,L),I.splice(0)),A=Q,I.push({cache:Z,opacity:J,matrix:$})}}else{var tt=X.__limitCache,et=X.__computedStyle;if("none"===et[Ng]||tt){s+=K||0,j&&(s+=ym(h,s+1,j));continue}var rt=X.__cache,it=X.__cacheTotal,at=X.__cacheFilter,nt=X.__cacheMask,ot=et[Hg],st=et[Gg],lt=et[Xg],ht=et[Vg];if(s===Y);else if(V>W)am(D=P)&&(D=null),B.push(D),H=G,N.push(H);else if(V<W){var ut=W-V;B.splice(-ut),D=B[V-1],N.splice(-ut),H=N[V-1]}W=V;var ct=_m([nt,at,it,rt]);if(ct&&(ct!==rt||"visible"===st)){var _t=void 0;_t=am(lt)?g.identity():Uo.calMatrixByOrigin(lt,ht[0]+ct.x1-u,ht[1]+ct.y1-c),am(D)||(P=om(D,P)),P=_t=g.multiply(m,_t),G=H*ot;var ft=ct.__page;A&&A!==ft&&(ug.drawTextureCache(e,I,S,w,F,L),I.splice(0)),A=ft,I.push({cache:ct,opacity:G,matrix:_t}),ct!==rt&&(s+=K||0,j&&(s+=ym(h,s+1,j))),X.render(t,e,F,L)}}}k=k.__next}ug.drawTextureCache(e,I,S,w,F,L),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(C),e.bindTexture(e.TEXTURE_2D,null),T=O?e.programClip:e.programMask;var vt=x.__page,yt=vt.size;C=dm(e,vt.texture,yt,yt),ug.drawMask(e,T,x,a,R,.5*yt,yt),e.useProgram(e.program),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(C),e.viewport(0,0,n,o)}(t,e,r,s,R,h,u,a+(o||0)+1,n,l)}}))}n&&(s=ug.createTexture(e,null,0,h,u),ug.bindTexture(e,null,0),o=dm(e,s,h,u),e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s,0));for(var Q,tt=[],et=0,rt=l.length;et<rt;et++){var it=l[et],at=it.node,nt=it.total,ot=it.hasMask;if(at instanceof Ol){var st=at.__cache;if(st&&st.available){var lt=at.__domParent,ht=lt.__matrixEvent,ut=lt.__opacity,ct=st.__page;Q&&Q!==ct&&(ug.drawTextureCache(e,tt,c,_,0,0),tt.splice(0)),Q=ct,tt.push({cache:st,opacity:ut,matrix:ht})}}else{var _t=at.__computedStyle;if("none"===_t[Ng]){et+=nt||0,ot&&(et+=ym(l,et+1,ot));continue}var ft=at.__cache,vt=at.__cacheTotal,yt=at.__cacheFilter,dt=at.__cacheMask,pt=at.__domParent,xt=at.__matrix,gt=_t[Hg],mt=_t[Ug],bt=xt;if(pt){1!==pt.__opacity&&(gt*=pt.__opacity);var Et=pt.__perspectiveMatrix,Mt=pt.__matrixEvent;Et&&Et.length&&(bt=om(pt.__perspectiveMatrix,bt)),Mt&&Mt.length&&(bt=om(pt.__matrixEvent,bt))}at.__opacity=gt,hm(at.__matrixEvent,bt);var At=_m([dt,yt,vt,ft]);if(At){if(lm(mt)){tt.length&&(ug.drawTextureCache(e,tt,c,_,0,0),tt.splice(0),Q=null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(o);var Tt=bm(e,s,At,mt,gt,bt,0,0,c,_,h,u);Tt&&(e.deleteTexture(s),s=Tt.texture,o=Tt.frameBuffer)}else{var Rt=At.__page;Q&&Q!==Rt&&(ug.drawTextureCache(e,tt,c,_,0,0),tt.splice(0)),Q=Rt,tt.push({cache:At,opacity:gt,matrix:bt})}At!==ft&&(et+=nt||0,ot&&(et+=ym(l,et+1,ot))),At&&At!==ft||at.render(t,e,0,0)}}}if(ug.drawTextureCache(e,tt,c,_,0,0),n){e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(o);var St=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,St),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW);var wt=e.getAttribLocation(e.program,"a_position");e.vertexAttribPointer(wt,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(wt);var Ct=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,Ct),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW);var kt=e.getAttribLocation(e.program,"a_texCoords");e.vertexAttribPointer(kt,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(kt);var Ot=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,Ot),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),e.STATIC_DRAW);var It=e.getAttribLocation(e.program,"a_opacity");e.vertexAttribPointer(It,1,e.FLOAT,!1,0,0),e.enableVertexAttribArray(It),ug.bindTexture(e,s,0);var Ft=e.getUniformLocation(e.program,"u_texture");e.uniform1i(Ft,0),e.drawArrays(e.TRIANGLES,0,6),e.deleteBuffer(St),e.deleteBuffer(Ct),e.deleteBuffer(Ot),e.disableVertexAttribArray(wt),e.disableVertexAttribArray(kt),e.deleteTexture(s)}},Tm="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords1;attribute vec2 a_texCoords2;varying vec2 v_texCoords1;varying vec2 v_texCoords2;void main(){gl_Position=a_position;v_texCoords1=a_texCoords1;v_texCoords2=a_texCoords2;}",Rm={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},Sm="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",wm=Vt.STYLE_KEY,Cm=wm.TOP,km=wm.RIGHT,Om=wm.BOTTOM,Im=wm.LEFT,Fm=wm.POSITION,Lm=wm.DISPLAY,Bm=wm.VISIBILITY,Dm=wm.COLOR,Pm=wm.WIDTH,Nm=wm.HEIGHT,Hm=wm.Z_INDEX,Gm=wm.POINTER_EVENTS,Wm=wm.WRITING_MODE,Ym=wm.TEXT_STROKE_COLOR,Um=wm.TEXT_STROKE_WIDTH,zm=wm.TEXT_STROKE_OVER,Xm=wm.MATRIX,Vm=wm.TRANSFORM,Km=wm.OPACITY,jm=wm.MIX_BLEND_MODE,Zm=H.isNil,qm=H.isFunction,$m=d.PX,Jm=d.INHERIT,Qm=Vs.getLevel,tb=Vs.isRepaint,eb=Vs.NONE,rb=Vs.FILTER,ib=Vs.PERSPECTIVE,ab=Vs.REPAINT,nb=Vs.REFLOW,ob=Vs.REBUILD,sb=Vs.CACHE,lb=Vs.TRANSFORM,hb=Vs.TRANSFORM_ALL,ub=Vs.OPACITY,cb=Vs.MIX_BLEND_MODE,_b=Vs.MASK,fb=oa.isGeom,vb=Em,yb=Mm,db=Am,pb={canvas:"canvas",svg:"svg",webgl:"canvas"};var xb=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];var gb=0,mb=function(t){function e(e,r,i){var a;return(a=t.call(this,e,r,i)||this).__dom=null,a.__mw=0,a.__mh=0,a.__task=[],a.__ref={},a.__animateController=new qx,Fl.mix(s(a)),a.__uuid=gb++,a.__rlv=ob,a.__lastUpdateP=null,Bd.buildRoot(s(a),a.__children),a}return a(e,t),r(e,[{key:"__initProps",value:function(){var t=this.props.width;if(!Zm(t)){var e=parseFloat(t)||0;e>0&&(this.__width=e)}var r=this.props.height;if(!Zm(r)){var i=parseFloat(r)||0;i>0&&(this.__height=i)}}},{key:"__genHtml",value:function(t){var e=this,r="<".concat(t);return Object.keys(this.props).forEach((function(t){var i=e.props[t];/^on[a-zA-Z]/.test(t)||(r+=function(t,e){var r=Array.isArray(e)?H.joinSourceArray(e):H.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+H.encodeHtml(r,!0)+'"'}(t,i))})),r+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r;if(-1===["touchend","touchcancel"].indexOf(t.type)){var i=this.dom,a=this.__scx,n=this.__scy,o=i.getBoundingClientRect(),s=o.x,l=o.y,h=o.left,u=o.top,c=o.width,_=o.height;e=s||h||0,r=l||u||0;var f=t.touches?t.touches[0]:t;e=f.clientX-e,r=f.clientY-r,Zm(a)?e*=this.__width/c:e/=a,Zm(n)?r*=this.__height/_:r/=n}return{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:e,y:r,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e,null,!1),e}}},{key:"appendTo",value:function(t){t=function(t){if(H.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__isDestroyed=!1,this.__initProps();var r=this.tagName,i=pb[r];if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===i?(this.__dom=t,this.__width&&t.setAttribute("width",this.__width),this.__height&&t.setAttribute("height",this.__height)):(this.__dom=t.querySelector(i),this.__dom||(t.innerHTML=this.__genHtml(i),this.__dom=t.querySelector(i))),!this.__width||!this.__height){var a=window.getComputedStyle(t,null);this.__width||(this.__width=parseFloat(a.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.__height||(this.__height=parseFloat(a.getPropertyValue("height"))||0,t.setAttribute("height",this.height))}this.__width&&this.__height||$.warn("Karas render target with a width or height of 0.");var n=Object.assign({},Rm,this.props.contextAttributes);if("canvas"===r)this.__ctx=this.__dom.getContext("2d",n),this.__renderMode=y.CANVAS;else if("svg"===r)this.__defs=this.dom.__defs||Ax.getInstance(this.__uuid),this.__renderMode=y.SVG;else if("webgl"===r){var o,s=this.props.webgl2;Zm(s)?o=this.__ctx=this.__dom.getContext("webgl2",n)||this.__dom.getContext("webgl",n):(s&&(o=this.__dom.getContext("webgl2",n)),o||(o=this.__dom.getContext("webgl",n)),this.__ctx=o),this.__initShader(o),this.__renderMode=y.WEBGL}this.draw(!0),this.__dom.__root&&this.__dom.__root instanceof e&&this.__dom.__root.destroy(),this.__eventCbList=function(t,e){var r=[];return xb.forEach((function(i){function a(r){var a=t.__root;if(a&&a instanceof e)if(["touchend","touchcancel","touchmove"].indexOf(i)>-1){var n=a.__touchstartTarget,o=a.__wrapEvent(r);for(o.target=n;n;)n.__emitEvent(o,null,!0),n=n.__domParent}else a.__cb(r)}t.addEventListener(i,a),r.push([i,a])})),r}(this.__dom,e),this.__dom.__root=this}},{key:"__initShader",value:function(t){t.program=ug.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),t.programMask=ug.initShaders(t,Tm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords1;varying vec2 v_texCoords2;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords1);vec4 color2=texture2D(u_texture2,v_texCoords2);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),t.programClip=ug.initShaders(t,Tm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords1;varying vec2 v_texCoords2;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords1);vec4 color2=texture2D(u_texture2,v_texCoords2);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),t.programOverflow=ug.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),t.programCm=ug.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),t.programDs=ug.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_color[4];void main(){vec4 c=texture2D(u_texture,v_texCoords);gl_FragColor=vec4(u_color[0]*c.a,u_color[1]*c.a,u_color[2]*c.a,u_color[3]*c.a);}"),t.programMbmMp=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmSr=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmOl=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmDk=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmLt=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmCd=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmCb=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmHl=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmSl=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmDf=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmEx=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmHue=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmSt=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmCl=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.programMbmLm=ug.initShaders(t,Sm,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}"),t.useProgram(t.program)}},{key:"__reLayout",value:function(){var t=this.renderMode,e=this.width,r=this.height;this.__checkRoot(t,e,r);var i=this.__currentStyle[Wm],a=i.v&&0===i.v.indexOf("vertical");this.__layout({x:0,y:0,w:e,h:r,isUpright:a},!1,!1,!1),this.__layoutAbs(this,{x:0,y:0,w:e,h:r,isUpright:a},null),this.__structs=this.__structure(0,0)}},{key:"draw",value:function(t){var e=this.isDestroyed,r=this.renderMode,i=this.ctx,a=this.defs;if(!e&&(this.__lastUpdateP=null,t&&this.__reLayout(),!this.props.noRender)){var n=this.__rlv;if(r===y.CANVAS)this.__clearCanvas(i),vb(r,i,this,t,n);else if(r===y.SVG){a.clear(),yb(r,a,this,t,n);var o=this.virtualDom;o.defs=a.value;var s=this.__dom;s.__vd?Ix(s,s.__vd,o):s.innerHTML=H.joinVirtualDom(o),s.__vd=o,s.__defs=a}else r===y.WEBGL&&(this.__clearWebgl(i),db(r,i,this,t,n));this.emit(Fl.REFRESH,n),this.__rlv=eb}}},{key:"destroy",value:function(){this.__destroy(),this.__animateController.__destroy();var t,e=this.dom;e&&(t=e,(this.__eventCbList||[]).forEach((function(e){t.removeEventListener(e[0],e[1])})),e.__root=null);var r=this.ctx;this.renderMode===y.WEBGL&&["program","programMask","programClip","programOverflow","programCm","programDs","programMbmMp","programMbmSr","programMbmOl","programMbmDk","programMbmLt","programMbmCd","programMbmCb","programMbmHl","programMbmSl","programMbmDf","programMbmEx","programMbmHue","programMbmSt","programMbmCl","programMbmLm"].forEach((function(t){var e=r[t];r.deleteShader(e.vertexShader),r.deleteShader(e.fragmentShader),r.deleteProgram(e)}))}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){var i=this;t!==i.width||e!==i.height?(i.__width=t,i.__height=e,i.updateStyle({width:t,height:e},r)):qm(r)&&r(-1)}},{key:"getTargetAtPoint",value:function(t,e,r){return function t(e,i,a,n,o){var s=e.__x1,l=e.__y1,h=e.offsetWidth,u=e.offsetHeight,c=e.matrixEvent,_=e.children,f=e.zIndexChildren,v=e.computedStyle,y=v[Lm],d=v[Gm];if(r||"none"!==y){if(Array.isArray(f)){for(var p=0,x=_.length;p<x;p++)_[p].__index__=p;for(var g=f.length-1;g>=0;g--){var m=f[g];if(!(m instanceof karas.Text)){var b=n.slice();b.push(m.__index__);var E=o.slice();E.push(g);var M=t(m,i,a,b,E);if(M)return M}}}if(r||"none"!==d)return se.pointInQuadrilateral(i,a,s,l,s+h,l,s+h,l+u,s,l+u,c)?{target:e,path:n,zPath:o}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,a=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(a[Lm])&&(n[Lm]=a[Lm]="block"),"absolute"===a[Fm]&&(n[Fm]=a[Fm]="static"),a[Pm]={v:e,u:$m},a[Nm]={v:r,u:$m},n[Pm]=e,n[Nm]=r,t===y.CANVAS||t===y.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===y.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,a,n,o){t instanceof Nl&&(t=t.shadowRoot);var s,l,h,u,c,_,f,v=t,d=v.__computedStyle,p=v.__currentStyle,x=v.__cacheStyle,g=v.__cacheProps,m=v.__mask,b=v.__domParent,E=r||(n&&e&&e.length?n.lv:eb);if(e)if(n){for(var M=0,A=e.length;M<A;M++){x[e[M]]=void 0}s=n.hasZ,h=n.hasColor,c=n.hasTsColor,_=n.hasTsWidth,f=n.hasTsOver}else for(var T=0,R=e.length;T<R;T++){var S=e[T];if(t instanceof Jy&&fb(t.tagName,S))E|=ab,g[S]=void 0;else{if(x[S]=void 0,(S===Cm||S===km||S===Om||S===Im)&&-1===["relative","absolute"].indexOf(d[Fm]))continue;E|=Qm(S),S===Lm?u=!0:S===Hm?s=t!==this&&["relative","absolute"].indexOf(d[Fm])>-1:S===Bm?l=!0:S===Dm?h=!0:S===Ym?c=!0:S===Um?_=!0:S===zm&&(f=!0)}}if(E===eb||"none"===d[Lm]&&!u)o&&qm(o)&&o();else{var w;if(E&lb&&(x[Xm]=d[Vm]=void 0),m||E&_b){for(var C=t.__prev;C&&C.__mask;)C=C.__prev;C&&(C instanceof Jv||C instanceof Nl&&C.shadowRoot instanceof Jv)&&(C.__refreshLevel|=sb|_b,C.__struct.hasMask=C.__hasMask=m,C.__cacheMask&&(w=C.__cacheMask.release()||w))}if(n&&n.isRepaint||tb(E)){var k=E>=ab;if(k?(t.__cache&&(w=t.__cache.release()||w),t.__calStyle(E,p,d,x),t.__calPerspective(p,d,x)):(E&ib&&t.__calPerspective(p,d,x),E&hb&&t.__calMatrix(E,p,d,x,n&&n.optimize),E&ub&&(d[Km]=p[Km]),E&rb&&t.__calFilter(p,d,x),E&cb&&(d[jm]=p[jm])),l||h||c||_||f)for(var O=this.__structs,I=t.__struct,F=O.indexOf(I)+1,L=F+(I.total||0);F<L;F++){var B=O[F],D=B.node,P=B.total;if(!(D instanceof Ol)){var N=D.__currentStyle,H=D.__cacheStyle,G=void 0;l&&N[Bm].u===Jm?(G=!0,H[Bm]=void 0):h&&N[Dm].u===Jm?(G=!0,H[Dm]=void 0):c&&N[Ym].u===Jm?(G=!0,H[Ym]=void 0):_&&N[Um].u===Jm?(G=!0,H[Um]=void 0):f&&N[zm].u===Jm&&(G=!0,H[zm]=void 0),G?(D.__refreshLevel|=ab,D.clearCache(),D.__calStyle(ab,N,D.__computedStyle,H)):F+=P||0}}if((k||E&ib)&&t.__cacheTotal&&(w=t.__cacheTotal.release()||w),t.__hasMask?(k||E^ub)&&(t.__cacheMask&&(w=t.__cacheMask.release()||w),t.__cacheFilter&&(w=t.__cacheFilter.release()||w)):(k||E&rb)&&t.__cacheFilter&&(w=t.__cacheFilter.release()||w),b!==this.__lastUpdateP){var W=b;for(this.__lastUpdateP=W;W&&!(W.__refreshLevel&(sb|ab|nb));)W.__refreshLevel|=sb,W.__cacheTotal&&(w=W.__cacheTotal.release()||w),W.__cacheFilter&&(w=W.__cacheFilter.release()||w),W.__cacheMask&&(w=W.__cacheMask.release()||w),W=W.__domParent;s&&b&&(b.__zIndexChildren=null,b.__updateStruct(),this.__renderMode===y.SVG&&(w=t.__cacheTotal.release()||w,Id.clearSvgCache(b)))}}else{var Y=Id.checkTop(this,t,i,a);if(Y===this?this.__reLayout():Id.checkNext(this,Y,t,s,i,a),a){for(var U=t;U.isShadowRoot;)(U=U.__host).__destroy();t.__destroy()}}t.__refreshLevel|=E,w&&(E|=sb),this.__rlv|=i||a?ob:E,o&&!qm(o)&&(o=null),this.__frameDraw(o)}}},{key:"__frameDraw",value:function(t){var e=this;this.__task.length?t&&this.__task.push(t):(dh.nextFrame((function(){})),dh.__rootTask.push((function(){var t=e.__task.splice(0);e.draw(!1),t.forEach((function(t){t&&t()}))})),this.__task.push(t))}},{key:"__clearCanvas",value:function(t){this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)}},{key:"__clearWebgl",value:function(t){t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}}]),e}(Kp),bb=1e-6;function Eb(t){var e=[],r=t[3],i=t[2]/r,a=t[1]/r,n=(3*a-i*i)/3,o=(2*i*i*i-9*a*i+27*(t[0]/r))/27,s=i/3,l=o*o/4+n*n*n/27,h=o/2;if(Math.abs(l)<=bb&&(l=0),l>0){var u,c,_=Math.sqrt(l);c=(u=-h+_)>=0?Math.pow(u,1/3):-Math.pow(-u,1/3),(u=-h-_)>=0?c+=Math.pow(u,1/3):c-=Math.pow(-u,1/3),e.push(c-s)}else if(l<0){var f=Math.sqrt(-n/3),v=Math.atan2(Math.sqrt(-l),-h)/3,y=Math.cos(v),d=Math.sin(v),p=Math.sqrt(3);e.push(2*f*y-s),e.push(-f*(y+p*d)-s),e.push(-f*(y-p*d)-s)}else{var x;x=h>=0?-Math.pow(h,1/3):Math.pow(-h,1/3),e.push(2*x-s),e.push(-x-s)}return e}var Mb={getRoots:function(t){for(var e=t.length-1,r=e;r>=0&&Math.abs(t[r])<1e-12;r--)e--;var i=[];switch(e){case 1:i=function(t){var e=[],r=t[1];return 0!==r&&e.push(-t[0]/r),e}(t);break;case 2:i=function(t){var e=[],r=t[2],i=t[1]/r,a=i*i-t[0]/r*4;if(a>0){var n=Math.sqrt(a);e.push(.5*(-i+n)),e.push(.5*(-i-n))}else 0===a&&e.push(.5*-i);return e}(t);break;case 3:i=Eb(t);break;case 4:i=function(t){var e=[],r=t[4],i=t[3]/r,a=t[2]/r,n=t[1]/r,o=t[0]/r,s=Eb([1,-a,i*n-4*o,-i*i*o+4*a*o-n*n].reverse())[0],l=i*i/4-a+s;if(Math.abs(l)<=bb&&(l=0),l>0){var h=Math.sqrt(l),u=3*i*i/4-h*h-2*a,c=(4*i*a-8*n-i*i*i)/(4*h),_=u+c,f=u-c;if(Math.abs(_)<=bb&&(_=0),Math.abs(f)<=bb&&(f=0),_>=0){var v=Math.sqrt(_);e.push(-i/4+(h+v)/2),e.push(-i/4+(h-v)/2)}if(f>=0){var y=Math.sqrt(f);e.push(-i/4+(y-h)/2),e.push(-i/4-(y+h)/2)}}else if(l<0);else{var d=s*s-4*o;if(d>=-1e-6){d<0&&(d=0);var p=3*i*i/4-2*a;if(p+(d=2*Math.sqrt(d))>=bb){var x=Math.sqrt(p+d);e.push(-i/4+x/2),e.push(-i/4-x/2)}if(p-d>=bb){var g=Math.sqrt(p-d);e.push(-i/4+g/2),e.push(-i/4-g/2)}}}return e}(t)}return i}};function Ab(t,e,r,i,a,n){var o=Math.min(t,a),s=Math.min(e,n),l=Math.max(t,a),h=Math.max(e,n);if(r<o||i<s||r>l||i>h){var u=(t-r)/(t-2*r+a);u<0?u=0:u>1&&(u=1);var c=(e-i)/(e-2*i+n);c<0?c=0:c>1&&(c=1);var _=1-u,f=1-c,v=_*_*t+2*_*u*r+u*u*a,y=f*f*e+2*f*c*i+c*c*n;o=Math.min(o,v),s=Math.min(s,y),l=Math.max(l,v),h=Math.max(h,y)}return[o,s,l,h]}function Tb(t,e,r,i,a,n,o,s){var l=Math.min(t,o),h=Math.min(e,s),u=Math.max(t,o),c=Math.max(e,s);if(r<l||i<h||r>u||i>c||a<l||n<h||a>u||n>c){var _=-t+r,f=-e+i,v=t-2*r+a,y=e-2*i+n,d=3*r-t-3*a+o,p=3*i-e-3*n+s,x=v*v-d*_,g=y*y-p*f;if(x>0){var m=(-v-(x=Math.sqrt(x)))/d;if(d&&m>0&&m<1){var b=1-m,E=b*b*b*t+3*b*b*m*r+3*b*m*m*a+m*m*m*o;l=Math.min(l,E),u=Math.max(u,E)}if((m=d?(-v+x)/d:.5*-_/v)>0&&m<1){var M=1-m,A=M*M*M*t+3*M*M*m*r+3*M*m*m*a+m*m*m*o;l=Math.min(l,A),u=Math.max(u,A)}}if(g>0){var T=(-y-(g=Math.sqrt(g)))/p;if(p&&T>0&&T<1){var R=1-T,S=R*R*R*e+3*R*R*T*i+3*R*T*T*n+T*T*T*s;h=Math.min(h,S),c=Math.max(c,S)}if((T=p?(-y+g)/p:.5*-f/y)>0&&T<1){var w=1-T,C=w*w*w*e+3*w*w*T*i+3*w*T*T*n+T*T*T*s;h=Math.min(h,C),c=Math.max(c,C)}}}return[l,h,u,c]}function Rb(t){var e=t.length,r=t.reduce((function(t,r){return Math.pow(t,e)+Math.pow(r,e)}));return Math.pow(r,1/e)}function Sb(t,e,r){var i=t,a=(2*e+r)/3,n=(e+2*r)/3;return(i(e)+3*i(a)+3*i(n)+i(r))*(r-e)/8}function wb(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,a=t,n=(e+r)/2,o=Sb(a,e,r),s=Sb(a,e,n),l=Sb(a,n,r),h=s+l-o;return Math.abs(h)<=15*i?s+l+h/15:wb(a,e,n,i/2)+wb(a,n,r,i/2)}function Cb(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(6===t.length?t=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]]]:8===t.length&&(t=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]],[t[6],t[7]]]),2===t.length){var i=u(t[0],2),a=i[0],n=i[1],o=u(t[1],2),s=o[0],l=o[1];return Math.sqrt(Math.pow(s-a,2)+Math.pow(l-n,2))}var h=function(e){return Rb(Ib(e,t))};return wb(h,e,r)}function kb(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=u(e,4),a=i[0],n=i[1],o=i[2],s=i[3],l=u(a,2),h=l[0],c=l[1],_=u(n,2),f=_[0],v=_[1],y=u(o,2),d=y[0],p=y[1],x=u(s,2),g=x[0],m=x[1],b=0,E=0;return 0===r?(b=Math.pow(1-t,3)*h+3*t*Math.pow(1-t,2)*f+3*(1-t)*Math.pow(t,2)*d+Math.pow(t,3)*g,E=Math.pow(1-t,3)*c+3*t*Math.pow(1-t,2)*v+3*(1-t)*Math.pow(t,2)*p+Math.pow(t,3)*m):1===r?(b=3*((1-t)*(1-t)*(f-h)+2*(1-t)*t*(d-f)+t*t*(g-d)),E=3*((1-t)*(1-t)*(v-c)+2*(1-t)*t*(p-v)+t*t*(m-p))):2===r?(b=6*(d-2*f+h)*(1-t)+6*(g-2*d+f)*t,E=6*(p-2*v+c)*(1-t)+6*(m-2*p+v)*t):3===r&&(b=6*(g-3*d+3*f-h),E=6*(m-3*p+3*v-c)),[b,E]}function Ob(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=u(e,3),a=i[0],n=i[1],o=i[2],s=u(a,2),l=s[0],h=s[1],c=u(n,2),_=c[0],f=c[1],v=u(o,2),y=v[0],d=v[1],p=0,x=0;return 0===r?(p=Math.pow(1-t,2)*l+2*t*(1-t)*_+Math.pow(t,2)*y,x=Math.pow(1-t,2)*h+2*t*(1-t)*f+Math.pow(t,2)*d):1===r?(p=2*(1-t)*(_-l)+2*t*(y-_),x=2*(1-t)*(f-h)+2*t*(d-f)):2===r&&(p=2*(y-2*_+l),x=2*(d-2*f+h)),[p,x]}function Ib(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return 4===e.length?kb(t,e,r):3===e.length?Ob(t,e,r):void 0}function Fb(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001,n=function(e){return Rb(Ib(e,t))},o=e*r,s=r,l=s,h=0;h<i;h++){var u=Sb(n,0,s)-o;if(Math.abs(u)<a)break;var c=Rb(Ib(s,t,1)),_=Rb(Ib(s,t,2)),f=u*c,v=u*_+c*c;if(s-=f/v,Math.abs(s-l)<a)break;l=s}return Ib(s,t,0)}function Lb(t,e){var r=u(t,4),i=u(r[0],2),a=i[0],n=i[1],o=u(r[1],2),s=o[0],l=o[1],h=u(r[2],2),c=h[0],_=h[1],f=r[3],v=(s-a)*e+a,y=(l-n)*e+n,d=(c-s)*e+s,p=(_-l)*e+l,x=(d-v)*e+v,g=(p-y)*e+y;if(4===t.length){var m=u(f,2);return[[a,n],[v,y],[x,g],[(((m[0]-c)*e+c-d)*e+d-x)*e+x,(((m[1]-_)*e+_-p)*e+p-g)*e+g]]}if(3===t.length)return[[a,n],[v,y],[x,g]]}function Bb(t,e){return[t[0][0]*(1-e)*(1-e)+2*t[1][0]*e*(1-e)+t[2][0]*e*e,t[0][1]*(1-e)*(1-e)+2*t[1][1]*e*(1-e)+t[2][1]*e*e]}function Db(t,e){return[t[0][0]*(1-e)*(1-e)*(1-e)+3*t[1][0]*e*(1-e)*(1-e)+3*t[2][0]*e*e*(1-e)+t[3][0]*e*e*e,t[0][1]*(1-e)*(1-e)*(1-e)+3*t[1][1]*e*(1-e)*(1-e)+3*t[2][1]*e*e*(1-e)+t[3][1]*e*e*e]}var Pb={bboxBezier:function(t,e,r,i,a,n,o,s){var l=arguments.length;if(Array.isArray(t)){var h=t.length,c=t,_=u(c[0],2);t=_[0],e=_[1];var f=u(c[1],2);if(r=f[0],i=f[1],l=4,h>=3){var v=u(c[2],2);a=v[0],n=v[1],l=6}if(h>=4){var y=u(c[3],2);o=y[0],s=y[1],l=8}}if(4===l){var d=Math.min(t,r),p=Math.min(e,i),x=Math.max(t,r),g=Math.max(e,i);return[d,p,x,g]}return 6===l?Ab(t,e,r,i,a,n):8===l?Tb(t,e,r,i,a,n,o,s):void 0},bezierLength:Cb,pointAtBezier:function(t,e,r,i){return Fb(t,Cb(t,0,1),e,r,i)},pointAtBezierWithLength:Fb,sliceBezier:Lb,sliceBezier2Both:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=Math.max(e,0),r=Math.min(r,1),0===e&&1===r||(r<1&&(t=Lb(t,r)),e>0&&(r<1&&(e/=r),t=Lb(t.slice(0).reverse(),1-e).reverse())),t},pointAtByT:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 4===t.length?Db(t,e):3===t.length?Bb(t,e):void 0},getPointT:function(t,e,r){return 4===t.length?function(t,e,r){for(var i=Mb.getRoots([t[0][0]-e,3*(t[1][0]-t[0][0]),3*(t[2][0]+t[0][0]-2*t[1][0]),t[3][0]-t[0][0]+3*t[1][0]-3*t[2][0]]).filter((function(t){return t>=0&&t<=1})),a=Mb.getRoots([t[0][1]-r,3*(t[1][1]-t[0][1]),3*(t[2][1]+t[0][1]-2*t[1][1]),t[3][1]-t[0][1]+3*t[1][1]-3*t[2][1]]).filter((function(t){return t>=0&&t<=1})),n=[],o=0,s=i.length;o<s;o++)for(var l=i[o],h=0,u=a.length;h<u;h++){var c=a[h],_=Math.abs(l-c);_<1e-10&&n.push({x:l,y:c,diff:_})}n.sort((function(t,e){return t.diff-e.diff})),n.length>3&&n.splice(3);n=n.map((function(t){return.5*(t.x+t.y)}));var f=[];return n.forEach((function(i){var a=t[0][0]*Math.pow(1-i,3)+3*t[1][0]*i*Math.pow(1-i,2)+3*t[2][0]*i*i*(1-i)+t[3][0]*Math.pow(i,3),n=t[0][1]*Math.pow(1-i,3)+3*t[1][1]*i*Math.pow(1-i,2)+3*t[2][1]*i*i*(1-i)+t[3][1]*Math.pow(i,3);Math.abs(a-e)<1e-10&&Math.abs(n-r)<1e-10&&f.push(i)})),f}(t,e,r):3===t.length?function(t,e,r){for(var i=Mb.getRoots([t[0][0]-e,2*(t[1][0]-t[0][0]),t[2][0]+t[0][0]-2*t[1][0]]).filter((function(t){return t>=0&&t<=1})),a=Mb.getRoots([t[0][1]-r,2*(t[1][1]-t[0][1]),t[2][1]+t[0][1]-2*t[1][1]]).filter((function(t){return t>=0&&t<=1})),n=[],o=0,s=i.length;o<s;o++)for(var l=i[o],h=0,u=a.length;h<u;h++){var c=a[h],_=Math.abs(l-c);_<1e-10&&n.push({x:l,y:c,diff:_})}n.sort((function(t,e){return t.diff-e.diff})),n.length>2&&n.splice(2);n=n.map((function(t){return.5*(t.x+t.y)}));var f=[];return n.forEach((function(i){var a=t[0][0]*Math.pow(1-i,2)+2*t[1][0]*i*(1-i)+t[2][0]*i*i,n=t[0][1]*Math.pow(1-i,2)+2*t[1][1]*i*(1-i)+t[2][1]*i*i;Math.abs(a-e)<1e-10&&Math.abs(n-r)<1e-10&&f.push(i)})),f}(t,e,r):void 0},bezierSlope:function(t,e){if(2===t.length){var r=u(t[0],2),i=r[0],a=r[1],n=u(t[1],2),o=n[0],s=n[1];return i===o?1/0:(s-a)/(o-i)}return 3===t.length?function(t,e){var r=u(t,3),i=u(r[0],2),a=i[0],n=i[1],o=u(r[1],2),s=o[0],l=o[1],h=u(r[2],2),c=h[0],_=h[1],f=2*(a-2*s+c)*e+2*s-2*a;if(0===f)return 1/0;return(2*(n-2*l+_)*e+2*l-2*n)/f}(t,e):4===t.length?function(t,e){var r=u(t,4),i=u(r[0],2),a=i[0],n=i[1],o=u(r[1],2),s=o[0],l=o[1],h=u(r[2],2),c=h[0],_=h[1],f=u(r[3],2),v=f[0],y=f[1],d=3*(3*s-a-3*c+v)*e*e+2*(3*a-6*s+3*c)*e+3*s-3*a;if(0===d)return 1/0;return(3*(3*l-n-3*_+y)*e*e+2*(3*n-6*l+3*_)*e+3*l-3*n)/d}(t,e):void 0}},Nb=Vt.STYLE_KEY.STROKE_WIDTH,Hb=H.isNil;function Gb(t,e,r,i){return i?t.map((function(t){return e+t*r})):e+t*r}function Wb(t,e,r,i,a,n){if(n){if(t)return t.map((function(t){return Wb(t,e,r,i,a)}))}else if(t&&t.length>=2)return[e+t[0]*i,r+t[1]*a];return[]}function Yb(t,e){var r=0;return t&&t.length>=2&&r++,e&&e.length>=2&&(r+=2),r}function Ub(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;if(0===s&&1===l)return[t,e,r,i,a,n];if(s===l)return[];if(s>l){var h=[l,s];s=h[0],l=h[1]}if(s=Math.max(0,s),l=Math.min(1,l),3===o){var c=Pb.sliceBezier2Both([[t,e],a,n,[r,i]],s,l),_=u(c,4),f=u(_[0],2);t=f[0],e=f[1],a=_[1],n=_[2];var v=u(_[3],2);r=v[0],i=v[1]}else if(2===o){var y=Pb.sliceBezier2Both([[t,e],n,[r,i]],s,l),d=u(y,3),p=u(d[0],2);t=p[0],e=p[1],n=d[1];var x=u(d[2],2);r=x[0],i=x[1]}else if(1===o){var g=Pb.sliceBezier2Both([[t,e],a,[r,i]],s,l),m=u(g,3),b=u(m[0],2);t=b[0],e=b[1],a=m[1];var E=u(m[2],2);r=E[0],i=E[1]}else{var M=r-t,A=i-e;t+=M*s,e+=A*s,r+=M*(1-l),i+=A*(1-l)}return[t,e,r,i,a,n]}var zb=function(t){function e(e,r){var i;if((i=t.call(this,e,r)||this).isMulti){if(i.__xa=[0],i.__ya=[0],i.__xb=[1],i.__yb=[1],i.__controlA=[[]],i.__controlB=[[]],i.__start=[0],i.__end=[1],Array.isArray(r.xa)?i.__xa=r.xa.map((function(t){return parseFloat(t)||0})):Hb(r.xa)||(i.__xa=[parseFloat(r.xa)||0]),Array.isArray(r.ya)?i.__ya=r.ya.map((function(t){return parseFloat(t)||0})):Hb(r.ya)||(i.__ya=[parseFloat(r.ya)||0]),Array.isArray(r.xb)?i.__xb=r.xb.map((function(t){return parseFloat(t)||0})):Hb(r.xb)||(i.__xb=[parseFloat(r.xb)||0]),Array.isArray(r.yb)?i.__yb=r.yb.map((function(t){return parseFloat(t)||0})):Hb(r.yb)||(i.__yb=[parseFloat(r.yb)||0]),Array.isArray(r.controlA)&&(i.__controlA=r.controlA.map((function(t){return Array.isArray(t)?t:[]}))),Array.isArray(r.controlB)&&(i.__controlB=r.controlB.map((function(t){return Array.isArray(t)?t:[]}))),Array.isArray(r.start)){i.__start=r.start.map((function(t){return parseFloat(t)||0}));for(var a=i.__start.length;a<i.__xa.length;a++)i.__start.push(0)}else if(!Hb(r.start)){var n=parseFloat(r.start)||0;i.__start=i.__xa.map((function(){return n}))}if(Array.isArray(r.end)){i.__end=r.end.map((function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),e}));for(var o=i.__end.length;o<i.__xa.length;o++)i.__end.push(1)}else if(!Hb(r.end)){var s=parseFloat(r.end);isNaN(s)&&(s=1),i.__end=i.__xa.map((function(){return s}))}}else{if(i.__xa=i.__ya=i.__start=0,i.__xb=i.__yb=i.__end=1,i.__controlA=[],i.__controlB=[],Hb(r.xa)||(i.__xa=parseFloat(r.xa)||0),Hb(r.ya)||(i.__ya=parseFloat(r.ya)||0),Hb(r.xb)||(i.__xb=parseFloat(r.xb)||0),Hb(r.yb)||(i.__yb=parseFloat(r.yb)||0),Hb(r.start)||(i.__start=parseFloat(r.start)||0),!Hb(r.end)){var l=parseFloat(r.end);isNaN(l)&&(l=1),i.__end=l}Array.isArray(r.controlA)&&(i.__controlA=r.controlA),Array.isArray(r.controlB)&&(i.__controlB=r.controlB)}return i}return a(e,t),r(e,[{key:"buildCache",value:function(t,e,r){var i,a=this,n=this.width,o=this.height,s=this.__cacheProps,l=this.isMulti;return["xa","xb"].forEach((function(e){(Hb(s[e])||r)&&(i=!0,s[e]=Gb(a[e],t,n,l))})),["ya","yb"].forEach((function(t){(Hb(s[t])||r)&&(i=!0,s[t]=Gb(a[t],e,o,l))})),["controlA","controlB"].forEach((function(h){(Hb(s[h])||r)&&(i=!0,s[h]=Wb(a[h],t,e,n,o,l))})),["start","end"].forEach((function(t){(Hb(s[t])||r)&&(i=!0,s[t]=a[t])})),i}},{key:"render",value:function(t,r,i,a){var o=this,s=h(n(e.prototype),"render",this).call(this,t,r,i,a);if(s.break||t===y.WEBGL)return s;var l=s.x3,c=s.y3,_=s.stroke,f=s.strokeWidth,v=s.strokeDasharray,d=s.strokeDasharrayStr,p=s.strokeLinecap,x=s.strokeLinejoin,g=s.strokeMiterlimit,m=s.dx,b=s.dy,E=this.__cacheProps,M=this.isMulti;if(this.buildCache(l,c)&&t===y.SVG){var A="";if(M)E.xa.forEach((function(t,e){var r=E.xb[e],i=E.ya[e],a=E.yb[e],n=E.controlA[e],o=E.controlB[e],s=E.start[e],l=E.end[e],h=Yb(n,o);if(0!==s||1!==l){var c=u(Ub(t,i,r,i,n,o,h,s,l,E.len),6);t=c[0],i=c[1],r=c[2],i=c[3],n=c[4],o=c[5]}A+=ce.svgLine(t,i,r,a,n,o,h)}));else{var T=Yb(E.controlA,E.controlB),R=E.xa,S=E.ya,w=E.xb,C=E.yb,k=E.controlA,O=E.controlB,I=E.start,F=E.end;if(0!==I||1!==F){var L=u(Ub(R,S,w,C,k,O,T,I,F,E.len),6);R=L[0],S=L[1],w=L[2],C=L[3],k=L[4],O=L[5]}A=ce.svgLine(R,S,w,C,k,O,T)}E.d=A}return t===y.CANVAS||t===y.WEBGL?_.forEach((function(e,i){var a=f[i],n=a>0&&"radial"===e.k&&Array.isArray(e.v);if(a>0&&"none"!==e){if(o.__preSetCanvas(t,r,{stroke:e,strokeWidth:a,strokeDasharray:v[i],strokeLinecap:p[i],strokeLinejoin:x[i],strokeMiterlimit:g[i]}),n&&(r.strokeStyle=e.v[0]),r.beginPath(),M)E.xa.forEach((function(t,e){var i=E.xb[e],a=E.ya[e],n=E.yb[e],o=E.controlA[e],s=E.controlB[e],l=E.start[e],h=E.end[e],c=Yb(o,s);if(0!==l||1!==h){var _=u(Ub(t,a,i,a,o,s,c,l,h,E.len),6);t=_[0],a=_[1],i=_[2],a=_[3],o=_[4],s=_[5]}ce.canvasLine(r,t,a,i,n,o,s,c,m,b)}));else{var s=Yb(E.controlA,E.controlB),l=E.xa,h=E.ya,c=E.xb,_=E.yb,y=E.controlA,d=E.controlB,A=E.start,T=E.end;if(0!==A||1!==T){var R=u(Ub(l,h,c,_,y,d,s,A,T,E.len),6);l=R[0],h=R[1],c=R[2],_=R[3],y=R[4],d=R[5]}ce.canvasLine(r,l,h,c,_,y,d,s,m,b)}r.stroke(),r.closePath()}})):t===y.SVG&&_.forEach((function(t,e){var r=f[e],i=r>0&&"radial"===t.k&&Array.isArray(t.v),a=[["d",E.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];o.__propsStrokeStyle(a,d[e],p[e],x[e],g[e]),o.addGeom("path",a)})),s}},{key:"xa",get:function(){return this.getProps("xa")}},{key:"ya",get:function(){return this.getProps("ya")}},{key:"xb",get:function(){return this.getProps("xb")}},{key:"yb",get:function(){return this.getProps("yb")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,o=this.computedStyle[Nb];this.buildCache(i,a);var s=r.xa,l=r.ya,u=r.xb,c=r.yb,_=r.controlA,f=r.controlB,v=h(n(e.prototype),"bbox",this),y=0;return o.forEach((function(t){y=Math.max(y,t)})),y=Math.ceil(.5*y)+1,t||(s=[s],u=[u],l=[l],c=[c],_=[_],f=[f]),s.forEach((function(t,e){var r=l[e],i=u[e],a=c[e],n=_[e],o=f[e];if((Hb(n)||n.length<2)&&(Hb(o)||o.length<2))v[0]=Math.min(v[0],t-y),v[0]=Math.min(v[0],i-y),v[1]=Math.min(v[1],r-y),v[1]=Math.min(v[1],a-y),v[2]=Math.max(v[2],t+y),v[2]=Math.max(v[2],i+y),v[3]=Math.max(v[3],r+y),v[3]=Math.max(v[3],a+y);else if(Hb(n)||n.length<2){var s=Pb.bboxBezier(t,r,o[0],o[1],i,a);v[0]=Math.min(v[0],s[0]-y),v[0]=Math.min(v[0],s[2]-y),v[1]=Math.min(v[1],s[1]-y),v[1]=Math.min(v[1],s[3]-y),v[2]=Math.max(v[2],s[0]+y),v[2]=Math.max(v[2],s[2]+y),v[3]=Math.max(v[3],s[1]+y),v[3]=Math.max(v[3],s[3]+y)}else if(Hb(o)||o.length<2){var h=Pb.bboxBezier(t,r,n[0],n[1],i,a);v[0]=Math.min(v[0],h[0]-y),v[0]=Math.min(v[0],h[2]-y),v[1]=Math.min(v[1],h[1]-y),v[1]=Math.min(v[1],h[3]-y),v[2]=Math.max(v[2],h[0]+y),v[2]=Math.max(v[2],h[2]+y),v[3]=Math.max(v[3],h[1]+y),v[3]=Math.max(v[3],h[3]+y)}else{var d=Pb.bboxBezier(t,r,n[0],n[1],o[0],o[1],i,a);v[0]=Math.min(v[0],d[0]-y),v[0]=Math.min(v[0],d[2]-y),v[1]=Math.min(v[1],d[1]-y),v[1]=Math.min(v[1],d[3]-y),v[2]=Math.max(v[2],d[0]+y),v[2]=Math.max(v[2],d[2]+y),v[3]=Math.max(v[3],d[1]+y),v[3]=Math.max(v[3],d[3]+y)}})),v}}]),e}(Jy),Xb=function(){function t(t,e){if(Array.isArray(t)){var r=u(t,2);t=r[0],e=r[1]}this.x=t,this.y=e}return r(t,[{key:"toString",value:function(){return this.x+","+this.y}},{key:"equal",value:function(t){return this===t||this.x===t.x&&this.y===t.y}}],[{key:"compare",value:function(t,e){return t.x>e.x||t.x===e.x&&t.y>e.y}}]),t}(),Vb=function(){function t(t,e){this.coords=t,this.belong=e,this.calBbox(),this.myFill=[!1,!1],this.otherFill=[!1,!1],this.myCoincide=0,this.otherCoincide=0,this.isVisited=!1,this.isDeleted=!1}return r(t,[{key:"calBbox",value:function(){var t=this.coords;if(2===t.length){var e=t[0],r=t[1],i=Math.min(e.x,r.x),a=Math.min(e.y,r.y),n=Math.max(e.x,r.x),o=Math.max(e.y,r.y);this.bbox=[i,a,n,o]}else{var s=t.map((function(t){return[t.x,t.y]}));this.bbox=Pb.bboxBezier(s)}}},{key:"reverse",value:function(){this.coords.reverse()}},{key:"equal",value:function(t){var e=this.coords,r=t.coords;if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++)if(!e[i].equal(r[i]))return!1;return!0}},{key:"toHash",value:function(){return this.coords.map((function(t){return t.toString()})).join(" ")}},{key:"toString",value:function(){return this.toHash()+" "+this.belong+" "+this.myCoincide+this.otherCoincide+" "+this.myFill.map((function(t){return t?1:0})).join("")+this.otherFill.map((function(t){return t?1:0})).join("")}}]),t}(),Kb=Mb.getRoots,jb=1e-6;function Zb(t,e){for(var r=0,i=e.length-1;i>=0;i--)r=r*t+e[i];return r}function qb(t,e,r){var i,a=Zb(t,r),n=Zb(e,r);if(Math.abs(a)<=jb)i=t;else if(Math.abs(n)<=jb)i=e;else if(a*n<=0)for(var o=Math.log(e-t),s=6*Math.LN10,l=Math.ceil((o+s)/Math.LN2),h=0;h<l;h++){var u=Zb(i=.5*(t+e),r);if(Math.abs(u)<=jb)break;u*a<0?(e=i,n=u):(t=i,a=u)}return i}function $b(t,e,r){var i,a=[];if(1===r.length-1)null!=(i=qb(t,e,r))&&a.push(i);else{var n=function(t){for(var e=[],r=1;r<t.length;r++)e.push(r*t[r]);return e}(r),o=$b(t,e,n);if(o.length>0){null!=(i=qb(t,o[0],r))&&a.push(i);for(var s=0;s<=o.length-2;s++)null!=(i=qb(o[s],o[s+1],r))&&a.push(i);null!=(i=qb(o[o.length-1],e,r))&&a.push(i)}else null!=(i=qb(t,e,r))&&a.push(i)}return a}var Jb={intersectBezier2Line:function(t,e,r,i,a,n,o,s,l,h){var u,c,_,f,v=[],y=Math.min(o,l),d=Math.min(s,h),p=Math.max(o,l),x=Math.max(s,h),g=function(t,e){return t.x*e.x+t.y*e.y},m=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}};u={x:-2*t+2*r,y:-2*e+2*i},c={x:t,y:e},_=o*h-l*s;for(var b=[g(f={x:s-h,y:l-o},{x:t-2*r+a,y:e-2*i+n}),g(f,u),g(f,c)+_].reverse(),E=Kb(b),M=0;M<E.length;M++){var A=E[M];if(0<=A&&A<=1){var T=m({x:t,y:e},{x:r,y:i},A),R=m({x:r,y:i},{x:a,y:n},A),S=m(T,R,A);o===l?d<=S.y&&S.y<=x&&v.push(S):s===h?y<=S.x&&S.x<=p&&v.push(S):S.x>=y&&S.y>=d&&S.x<=p&&S.y<=x&&v.push(S)}}return v},intersectBezier3Line:function(t,e,r,i,a,n,o,s,l,h,u,c){var _,f,v,y,d=[],p=Math.min(l,u),x=Math.min(h,c),g=Math.max(l,u),m=Math.max(h,c),b=function(t,e){return t.x*e.x+t.y*e.y},E=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}};_={x:3*r-t-3*a+o,y:3*i-e-3*n+s},f={x:3*t-6*r+3*a,y:3*e-6*i+3*n},v={x:-3*t+3*r,y:-3*e+3*i};for(var M=[l*c-u*h+b(y={x:h-c,y:u-l},{x:t,y:e}),b(y,v),b(y,f),b(y,_)],A=Kb(M),T=0;T<A.length;T++){var R=A[T];if(0<=R&&R<=1){var S=E({x:t,y:e},{x:r,y:i},R),w=E({x:r,y:i},{x:a,y:n},R),C=E({x:a,y:n},{x:o,y:s},R),k=E(S,w,R),O=E(w,C,R),I=E(k,O,R);l===u?x<=I.y&&I.y<=m&&d.push(I):h===c?p<=I.x&&I.x<=g&&d.push(I):I.x>=p&&I.y>=x&&I.x<=g&&I.y<=m&&d.push(I)}}return d},intersectBezier2Bezier2:function(t,e,r,i,a,n,o,s,l,h,u,c){var _,f,v,y,d,p,x,g=[];if(f={x:2*r-2*t,y:2*i-2*e},v={x:t,y:e},y={x:o-2*l+u,y:s-2*h+c},d={x:2*l-2*o,y:2*h-2*s},p={x:o,y:s},0===(_={x:t-2*r+a,y:e-2*i+n}).y){var m=_.x*(v.y-p.y),b=m-f.x*f.y,E=f.y*f.y;x=[_.x*y.y*y.y,2*_.x*d.y*y.y,_.x*d.y*d.y-y.x*E-y.y*m-y.y*b,-d.x*E-d.y*m-d.y*b,(v.x-p.x)*E+(v.y-p.y)*b].reverse()}else{var M=_.x*y.y-_.y*y.x,A=_.x*d.y-d.x*_.y,T=f.x*_.y-f.y*_.x,R=v.y-p.y,S=_.y*(v.x-p.x)-_.x*R,w=-f.y*T+_.y*S,C=T*T;x=[M*M,2*M*A,(-y.y*C+_.y*A*A+_.y*M*S+M*w)/_.y,(-d.y*C+_.y*A*S+A*w)/_.y,(R*C+S*w)/_.y].reverse()}for(var k=Kb(x),O=0;O<k.length;O++){var I=k[O];if(0<=I&&I<=1){var F=Kb([_.x,f.x,v.x-p.x-I*d.x-I*I*y.x].reverse()),L=Kb([_.y,f.y,v.y-p.y-I*d.y-I*I*y.y].reverse());if(F.length>0&&L.length>0){t:for(var B=0;B<F.length;B++){var D=F[B];if(0<=D&&D<=1)for(var P=0;P<L.length;P++)if(Math.abs(D-L[P])<1e-4){var N=y.x*I*I+d.x*I+p.x,H=y.y*I*I+d.y*I+p.y;g.push({x:N,y:H,t:D});break t}}}}}return g},intersectBezier3Bezier3:function(t,e,r,i,a,n,o,s,l,h,u,c,_,f,v,y){var d,p,x,g,m,b,E,M,A=[];d={x:3*r-t-3*a+o,y:3*i-e-3*n+s},p={x:3*t-6*r+3*a,y:3*e-6*i+3*n},m={x:3*u-l-3*_+v,y:3*c-h-3*f+y},b={x:3*l-6*u+3*_,y:3*h-6*c+3*f},E={x:-3*l+3*u,y:-3*h+3*c},M={x:l,y:h};for(var T=(g={x:t,y:e}).x*g.x,R=g.x*g.x*g.x,S=g.y*g.y,w=g.y*g.y*g.y,C=(x={x:-3*t+3*r,y:-3*e+3*i}).x*x.x,k=x.x*x.x*x.x,O=x.y*x.y,I=x.y*x.y*x.y,F=p.x*p.x,L=p.x*p.x*p.x,B=p.y*p.y,D=p.y*p.y*p.y,P=d.x*d.x,N=d.x*d.x*d.x,H=d.y*d.y,G=d.y*d.y*d.y,W=M.x*M.x,Y=M.x*M.x*M.x,U=M.y*M.y,z=M.y*M.y*M.y,X=E.x*E.x,V=E.x*E.x*E.x,K=E.y*E.y,j=b.x*b.x,Z=b.x*b.x*b.x,q=b.y*b.y,$=m.x*m.x,J=m.y*m.y,Q=$b(0,1,[-N*(m.y*m.y*m.y)+G*(m.x*m.x*m.x)-3*d.x*H*$*m.y+3*P*d.y*m.x*J,-6*d.x*b.x*H*m.x*m.y+6*P*d.y*b.y*m.x*m.y+3*b.x*G*$-3*N*b.y*J-3*d.x*H*b.y*$+3*P*b.x*d.y*J,-6*E.x*d.x*H*m.x*m.y-6*d.x*b.x*H*b.y*m.x+6*P*b.x*d.y*b.y*m.y+3*E.x*G*$+3*j*G*m.x+3*E.x*P*d.y*J-3*d.x*E.y*H*$-3*d.x*j*H*m.y+P*d.y*m.x*(6*E.y*m.y+3*q)+N*(-E.y*J-2*q*m.y-m.y*(2*E.y*m.y+q)),x.x*p.y*d.x*d.y*m.x*m.y-x.y*p.x*d.x*d.y*m.x*m.y+6*E.x*b.x*G*m.x+3*x.x*p.x*d.x*d.y*J+6*g.x*d.x*H*m.x*m.y-3*x.x*p.x*H*m.x*m.y-3*x.y*p.y*d.x*d.y*$-6*g.y*P*d.y*m.x*m.y-6*M.x*d.x*H*m.x*m.y+3*x.y*p.y*P*m.x*m.y-2*p.x*B*d.x*m.x*m.y-6*E.x*d.x*b.x*H*m.y-6*E.x*d.x*H*b.y*m.x-6*d.x*E.y*b.x*H*m.x+6*E.x*P*d.y*b.y*m.y+2*F*p.y*d.y*m.x*m.y+Z*G-3*g.x*G*$+3*g.y*N*J+3*M.x*G*$+D*d.x*$-L*d.y*J-3*g.x*P*d.y*J+3*g.y*d.x*H*$-2*x.x*p.y*P*J+x.x*p.y*H*$-x.y*p.x*P*J+2*x.y*p.x*H*$+3*M.x*P*d.y*J-p.x*B*d.y*$-3*M.y*d.x*H*$+F*p.y*d.x*J-3*d.x*j*H*b.y+P*d.y*m.x*(6*M.y*m.y+6*E.y*b.y)+P*b.x*d.y*(6*E.y*m.y+3*q)+N*(-2*E.y*b.y*m.y-M.y*J-b.y*(2*E.y*m.y+q)-m.y*(2*M.y*m.y+2*E.y*b.y)),6*x.x*p.x*d.x*d.y*b.y*m.y+x.x*p.y*d.x*b.x*d.y*m.y+x.x*p.y*d.x*d.y*b.y*m.x-x.y*p.x*d.x*b.x*d.y*m.y-x.y*p.x*d.x*d.y*b.y*m.x-6*x.y*p.y*d.x*b.x*d.y*m.x-6*g.x*b.x*G*m.x+6*M.x*b.x*G*m.x+6*g.y*N*b.y*m.y+2*D*d.x*b.x*m.x-2*L*d.y*b.y*m.y+6*g.x*d.x*b.x*H*m.y+6*g.x*d.x*H*b.y*m.x+6*g.y*d.x*b.x*H*m.x-3*x.x*p.x*b.x*H*m.y-3*x.x*p.x*H*b.y*m.x+2*x.x*p.y*b.x*H*m.x+4*x.y*p.x*b.x*H*m.x-6*g.x*P*d.y*b.y*m.y-6*g.y*P*b.x*d.y*m.y-6*g.y*P*d.y*b.y*m.x-4*x.x*p.y*P*b.y*m.y-6*M.x*d.x*b.x*H*m.y-6*M.x*d.x*H*b.y*m.x-2*x.y*p.x*P*b.y*m.y+3*x.y*p.y*P*b.x*m.y+3*x.y*p.y*P*b.y*m.x-2*p.x*B*d.x*b.x*m.y-2*p.x*B*d.x*b.y*m.x-2*p.x*B*b.x*d.y*m.x-6*M.y*d.x*b.x*H*m.x-6*E.x*d.x*E.y*H*m.x-6*E.x*d.x*b.x*H*b.y+6*M.x*P*d.y*b.y*m.y+2*F*p.y*d.x*b.y*m.y+2*F*p.y*b.x*d.y*m.y+2*F*p.y*d.y*b.y*m.x+3*E.x*j*G+3*X*G*m.x-3*d.x*E.y*j*H-3*X*d.x*H*m.y+P*b.x*d.y*(6*M.y*m.y+6*E.y*b.y)+P*d.y*m.x*(6*M.y*b.y+3*K)+E.x*P*d.y*(6*E.y*m.y+3*q)+N*(-2*M.y*b.y*m.y-m.y*(2*M.y*b.y+K)-E.y*(2*E.y*m.y+q)-b.y*(2*M.y*m.y+2*E.y*b.y)),x.x*E.x*p.y*d.x*d.y*m.y+x.x*p.y*d.x*E.y*d.y*m.x+x.x*p.y*d.x*b.x*d.y*b.y-x.y*p.x*E.x*d.x*d.y*m.y-x.y*p.x*d.x*E.y*d.y*m.x-x.y*p.x*d.x*b.x*d.y*b.y-6*x.y*E.x*p.y*d.x*d.y*m.x-6*g.x*E.x*G*m.x+6*M.x*E.x*G*m.x+2*E.x*D*d.x*m.x+6*g.x*E.x*d.x*H*m.y+6*g.x*d.x*E.y*H*m.x+6*g.x*d.x*b.x*H*b.y+6*g.y*E.x*d.x*H*m.x-3*x.x*p.x*E.x*H*m.y-3*x.x*p.x*E.y*H*m.x-3*x.x*p.x*b.x*H*b.y+2*x.x*E.x*p.y*H*m.x+4*x.y*p.x*E.x*H*m.x-6*g.y*E.x*P*d.y*m.y-6*g.y*P*E.y*d.y*m.x-6*g.y*P*b.x*d.y*b.y-6*M.x*E.x*d.x*H*m.y-6*M.x*d.x*E.y*H*m.x-6*M.x*d.x*b.x*H*b.y+3*x.y*E.x*p.y*P*m.y-3*x.y*p.y*d.x*j*d.y+3*x.y*p.y*P*E.y*m.x+3*x.y*p.y*P*b.x*b.y-2*p.x*E.x*B*d.x*m.y-2*p.x*E.x*B*d.y*m.x-2*p.x*B*d.x*E.y*m.x-2*p.x*B*d.x*b.x*b.y-6*M.y*E.x*d.x*H*m.x-6*E.x*d.x*E.y*b.x*H+6*M.y*P*E.y*d.y*m.x+2*F*E.x*p.y*d.y*m.y+2*F*p.y*E.y*d.y*m.x+2*F*p.y*b.x*d.y*b.y-3*g.x*j*G+3*M.x*j*G+3*X*b.x*G+D*d.x*j+3*g.y*d.x*j*H+x.x*p.y*j*H+2*x.y*p.x*j*H-p.x*B*j*d.y-3*M.y*d.x*j*H-3*X*d.x*H*b.y+F*p.y*d.x*(2*E.y*m.y+q)+x.x*p.x*d.x*d.y*(6*E.y*m.y+3*q)+E.x*P*d.y*(6*M.y*m.y+6*E.y*b.y)+L*d.y*(-2*E.y*m.y-q)+g.y*N*(6*E.y*m.y+3*q)+x.y*p.x*P*(-2*E.y*m.y-q)+x.x*p.y*P*(-4*E.y*m.y-2*q)+g.x*P*d.y*(-6*E.y*m.y-3*q)+P*b.x*d.y*(6*M.y*b.y+3*K)+M.x*P*d.y*(6*E.y*m.y+3*q)+N*(-2*M.y*E.y*m.y-b.y*(2*M.y*b.y+K)-M.y*(2*E.y*m.y+q)-E.y*(2*M.y*m.y+2*E.y*b.y)),-g.x*x.x*p.y*d.x*d.y*m.y+g.x*x.y*p.x*d.x*d.y*m.y+6*g.x*x.y*p.y*d.x*d.y*m.x-6*g.y*x.x*p.x*d.x*d.y*m.y-g.y*x.x*p.y*d.x*d.y*m.x+g.y*x.y*p.x*d.x*d.y*m.x+x.x*x.y*p.x*p.y*d.x*m.y-x.x*x.y*p.x*p.y*d.y*m.x+x.x*M.x*p.y*d.x*d.y*m.y+x.x*M.y*p.y*d.x*d.y*m.x+x.x*E.x*p.y*d.x*d.y*b.y+x.x*p.y*d.x*E.y*b.x*d.y-M.x*x.y*p.x*d.x*d.y*m.y-6*M.x*x.y*p.y*d.x*d.y*m.x-x.y*p.x*M.y*d.x*d.y*m.x-x.y*p.x*E.x*d.x*d.y*b.y-x.y*p.x*d.x*E.y*b.x*d.y-6*x.y*E.x*p.y*d.x*b.x*d.y-6*g.x*M.x*G*m.x-6*g.x*E.x*b.x*G-2*g.x*D*d.x*m.x+6*M.x*E.x*b.x*G+2*M.x*D*d.x*m.x+2*E.x*D*d.x*b.x+2*g.y*L*d.y*m.y-6*g.x*g.y*d.x*H*m.x+3*g.x*x.x*p.x*H*m.y-2*g.x*x.x*p.y*H*m.x-4*g.x*x.y*p.x*H*m.x+3*g.y*x.x*p.x*H*m.x+6*g.x*g.y*P*d.y*m.y+6*g.x*M.x*d.x*H*m.y-3*g.x*x.y*p.y*P*m.y+2*g.x*p.x*B*d.x*m.y+2*g.x*p.x*B*d.y*m.x+6*g.x*M.y*d.x*H*m.x+6*g.x*E.x*d.x*H*b.y+6*g.x*d.x*E.y*b.x*H+4*g.y*x.x*p.y*P*m.y+6*g.y*M.x*d.x*H*m.x+2*g.y*x.y*p.x*P*m.y-3*g.y*x.y*p.y*P*m.x+2*g.y*p.x*B*d.x*m.x+6*g.y*E.x*d.x*b.x*H-3*x.x*M.x*p.x*H*m.y+2*x.x*M.x*p.y*H*m.x+x.x*x.y*B*d.x*m.x-3*x.x*p.x*M.y*H*m.x-3*x.x*p.x*E.x*H*b.y-3*x.x*p.x*E.y*b.x*H+2*x.x*E.x*p.y*b.x*H+4*M.x*x.y*p.x*H*m.x+4*x.y*p.x*E.x*b.x*H-2*g.x*F*p.y*d.y*m.y-6*g.y*M.x*P*d.y*m.y-6*g.y*M.y*P*d.y*m.x-6*g.y*E.x*P*d.y*b.y-2*g.y*F*p.y*d.x*m.y-2*g.y*F*p.y*d.y*m.x-6*g.y*P*E.y*b.x*d.y-x.x*x.y*F*d.y*m.y-2*x.x*O*d.x*d.y*m.x+3*M.x*x.y*p.y*P*m.y-2*M.x*p.x*B*d.x*m.y-2*M.x*p.x*B*d.y*m.x-6*M.x*M.y*d.x*H*m.x-6*M.x*E.x*d.x*H*b.y-6*M.x*d.x*E.y*b.x*H+3*x.y*M.y*p.y*P*m.x+3*x.y*E.x*p.y*P*b.y+3*x.y*p.y*P*E.y*b.x-2*p.x*M.y*B*d.x*m.x-2*p.x*E.x*B*d.x*b.y-2*p.x*E.x*B*b.x*d.y-2*p.x*B*d.x*E.y*b.x-6*M.y*E.x*d.x*b.x*H-O*p.x*p.y*d.x*m.x+2*M.x*F*p.y*d.y*m.y+6*M.y*P*E.y*b.x*d.y+2*C*x.y*d.x*d.y*m.y+C*p.x*p.y*d.y*m.y+2*F*M.y*p.y*d.y*m.x+2*F*E.x*p.y*d.y*b.y+2*F*p.y*E.y*b.x*d.y+V*G+3*T*G*m.x-3*S*N*m.y+3*W*G*m.x+I*P*m.x-k*H*m.y-x.x*O*P*m.y+C*x.y*H*m.x-3*T*d.x*H*m.y+3*S*P*d.y*m.x-C*B*d.x*m.y+O*F*d.y*m.x-3*X*d.x*E.y*H-3*W*d.x*H*m.y+3*U*P*d.y*m.x+x.x*p.x*d.x*d.y*(6*M.y*m.y+6*E.y*b.y)+L*d.y*(-2*M.y*m.y-2*E.y*b.y)+g.y*N*(6*M.y*m.y+6*E.y*b.y)+x.y*p.x*P*(-2*M.y*m.y-2*E.y*b.y)+F*p.y*d.x*(2*M.y*m.y+2*E.y*b.y)+x.x*p.y*P*(-4*M.y*m.y-4*E.y*b.y)+g.x*P*d.y*(-6*M.y*m.y-6*E.y*b.y)+M.x*P*d.y*(6*M.y*m.y+6*E.y*b.y)+E.x*P*d.y*(6*M.y*b.y+3*K)+N*(-2*M.y*E.y*b.y-U*m.y-E.y*(2*M.y*b.y+K)-M.y*(2*M.y*m.y+2*E.y*b.y)),-g.x*x.x*p.y*d.x*d.y*b.y+g.x*x.y*p.x*d.x*d.y*b.y+6*g.x*x.y*p.y*d.x*b.x*d.y-6*g.y*x.x*p.x*d.x*d.y*b.y-g.y*x.x*p.y*d.x*b.x*d.y+g.y*x.y*p.x*d.x*b.x*d.y+x.x*x.y*p.x*p.y*d.x*b.y-x.x*x.y*p.x*p.y*b.x*d.y+x.x*M.x*p.y*d.x*d.y*b.y+x.x*M.y*p.y*d.x*b.x*d.y+x.x*E.x*p.y*d.x*E.y*d.y-M.x*x.y*p.x*d.x*d.y*b.y-6*M.x*x.y*p.y*d.x*b.x*d.y-x.y*p.x*M.y*d.x*b.x*d.y-x.y*p.x*E.x*d.x*E.y*d.y-6*g.x*M.x*b.x*G-2*g.x*D*d.x*b.x+2*M.x*D*d.x*b.x+2*g.y*L*d.y*b.y-6*g.x*g.y*d.x*b.x*H+3*g.x*x.x*p.x*H*b.y-2*g.x*x.x*p.y*b.x*H-4*g.x*x.y*p.x*b.x*H+3*g.y*x.x*p.x*b.x*H+6*g.x*g.y*P*d.y*b.y+6*g.x*M.x*d.x*H*b.y-3*g.x*x.y*p.y*P*b.y+2*g.x*p.x*B*d.x*b.y+2*g.x*p.x*B*b.x*d.y+6*g.x*M.y*d.x*b.x*H+6*g.x*E.x*d.x*E.y*H+4*g.y*x.x*p.y*P*b.y+6*g.y*M.x*d.x*b.x*H+2*g.y*x.y*p.x*P*b.y-3*g.y*x.y*p.y*P*b.x+2*g.y*p.x*B*d.x*b.x-3*x.x*M.x*p.x*H*b.y+2*x.x*M.x*p.y*b.x*H+x.x*x.y*B*d.x*b.x-3*x.x*p.x*M.y*b.x*H-3*x.x*p.x*E.x*E.y*H+4*M.x*x.y*p.x*b.x*H-2*g.x*F*p.y*d.y*b.y-6*g.y*M.x*P*d.y*b.y-6*g.y*M.y*P*b.x*d.y-6*g.y*E.x*P*E.y*d.y-2*g.y*F*p.y*d.x*b.y-2*g.y*F*p.y*b.x*d.y-x.x*x.y*F*d.y*b.y-2*x.x*O*d.x*b.x*d.y+3*M.x*x.y*p.y*P*b.y-2*M.x*p.x*B*d.x*b.y-2*M.x*p.x*B*b.x*d.y-6*M.x*M.y*d.x*b.x*H-6*M.x*E.x*d.x*E.y*H+3*x.y*M.y*p.y*P*b.x+3*x.y*E.x*p.y*P*E.y-2*p.x*M.y*B*d.x*b.x-2*p.x*E.x*B*d.x*E.y-O*p.x*p.y*d.x*b.x+2*M.x*F*p.y*d.y*b.y-3*x.y*X*p.y*d.x*d.y+6*M.y*E.x*P*E.y*d.y+2*C*x.y*d.x*d.y*b.y+C*p.x*p.y*d.y*b.y+2*F*M.y*p.y*b.x*d.y+2*F*E.x*p.y*E.y*d.y-3*g.x*X*G+3*M.x*X*G+3*T*b.x*G-3*S*N*b.y+3*W*b.x*G+X*D*d.x+I*P*b.x-k*H*b.y+3*g.y*X*d.x*H-x.x*O*P*b.y+x.x*X*p.y*H+2*x.y*p.x*X*H+C*x.y*b.x*H-p.x*X*B*d.y-3*M.y*X*d.x*H-3*T*d.x*H*b.y+3*S*P*b.x*d.y-C*B*d.x*b.y+O*F*b.x*d.y-3*W*d.x*H*b.y+3*U*P*b.x*d.y+F*p.y*d.x*(2*M.y*b.y+K)+x.x*p.x*d.x*d.y*(6*M.y*b.y+3*K)+L*d.y*(-2*M.y*b.y-K)+g.y*N*(6*M.y*b.y+3*K)+x.y*p.x*P*(-2*M.y*b.y-K)+x.x*p.y*P*(-4*M.y*b.y-2*K)+g.x*P*d.y*(-6*M.y*b.y-3*K)+M.x*P*d.y*(6*M.y*b.y+3*K)+N*(-2*M.y*K-U*b.y-M.y*(2*M.y*b.y+K)),-g.x*x.x*p.y*d.x*E.y*d.y+g.x*x.y*p.x*d.x*E.y*d.y+6*g.x*x.y*E.x*p.y*d.x*d.y-6*g.y*x.x*p.x*d.x*E.y*d.y-g.y*x.x*E.x*p.y*d.x*d.y+g.y*x.y*p.x*E.x*d.x*d.y-x.x*x.y*p.x*E.x*p.y*d.y+x.x*x.y*p.x*p.y*d.x*E.y+x.x*M.x*p.y*d.x*E.y*d.y+6*x.x*p.x*M.y*d.x*E.y*d.y+x.x*M.y*E.x*p.y*d.x*d.y-M.x*x.y*p.x*d.x*E.y*d.y-6*M.x*x.y*E.x*p.y*d.x*d.y-x.y*p.x*M.y*E.x*d.x*d.y-6*g.x*M.x*E.x*G-2*g.x*E.x*D*d.x+6*g.y*M.y*N*E.y+2*M.x*E.x*D*d.x+2*g.y*L*E.y*d.y-2*L*M.y*E.y*d.y-6*g.x*g.y*E.x*d.x*H+3*g.x*x.x*p.x*E.y*H-2*g.x*x.x*E.x*p.y*H-4*g.x*x.y*p.x*E.x*H+3*g.y*x.x*p.x*E.x*H+6*g.x*g.y*P*E.y*d.y+6*g.x*M.x*d.x*E.y*H-3*g.x*x.y*p.y*P*E.y+2*g.x*p.x*E.x*B*d.y+2*g.x*p.x*B*d.x*E.y+6*g.x*M.y*E.x*d.x*H+4*g.y*x.x*p.y*P*E.y+6*g.y*M.x*E.x*d.x*H+2*g.y*x.y*p.x*P*E.y-3*g.y*x.y*E.x*p.y*P+2*g.y*p.x*E.x*B*d.x-3*x.x*M.x*p.x*E.y*H+2*x.x*M.x*E.x*p.y*H+x.x*x.y*E.x*B*d.x-3*x.x*p.x*M.y*E.x*H+4*M.x*x.y*p.x*E.x*H-6*g.x*M.y*P*E.y*d.y-2*g.x*F*p.y*E.y*d.y-6*g.y*M.x*P*E.y*d.y-6*g.y*M.y*E.x*P*d.y-2*g.y*F*E.x*p.y*d.y-2*g.y*F*p.y*d.x*E.y-x.x*x.y*F*E.y*d.y-4*x.x*M.y*p.y*P*E.y-2*x.x*O*E.x*d.x*d.y+3*M.x*x.y*p.y*P*E.y-2*M.x*p.x*E.x*B*d.y-2*M.x*p.x*B*d.x*E.y-6*M.x*M.y*E.x*d.x*H-2*x.y*p.x*M.y*P*E.y+3*x.y*M.y*E.x*p.y*P-2*p.x*M.y*E.x*B*d.x-O*p.x*E.x*p.y*d.x+6*M.x*M.y*P*E.y*d.y+2*M.x*F*p.y*E.y*d.y+2*C*x.y*d.x*E.y*d.y+C*p.x*p.y*E.y*d.y+2*F*M.y*E.x*p.y*d.y+2*F*M.y*p.y*d.x*E.y+3*T*E.x*G-3*S*N*E.y+3*W*E.x*G+I*E.x*P-k*E.y*H-3*U*N*E.y-x.x*O*P*E.y+C*x.y*E.x*H-3*T*d.x*E.y*H+3*S*E.x*P*d.y-C*B*d.x*E.y+O*F*E.x*d.y-3*W*d.x*E.y*H+3*U*E.x*P*d.y,g.x*g.y*x.x*p.y*d.x*d.y-g.x*g.y*x.y*p.x*d.x*d.y+g.x*x.x*x.y*p.x*p.y*d.y-g.y*x.x*x.y*p.x*p.y*d.x-g.x*x.x*M.y*p.y*d.x*d.y+6*g.x*M.x*x.y*p.y*d.x*d.y+g.x*x.y*p.x*M.y*d.x*d.y-g.y*x.x*M.x*p.y*d.x*d.y-6*g.y*x.x*p.x*M.y*d.x*d.y+g.y*M.x*x.y*p.x*d.x*d.y-x.x*M.x*x.y*p.x*p.y*d.y+x.x*x.y*p.x*M.y*p.y*d.x+x.x*M.x*M.y*p.y*d.x*d.y-M.x*x.y*p.x*M.y*d.x*d.y-2*g.x*M.x*D*d.x+2*g.y*L*M.y*d.y-3*g.x*g.y*x.x*p.x*H-6*g.x*g.y*M.x*d.x*H+3*g.x*g.y*x.y*p.y*P-2*g.x*g.y*p.x*B*d.x-2*g.x*x.x*M.x*p.y*H-g.x*x.x*x.y*B*d.x+3*g.x*x.x*p.x*M.y*H-4*g.x*M.x*x.y*p.x*H+3*g.y*x.x*M.x*p.x*H+6*g.x*g.y*M.y*P*d.y+2*g.x*g.y*F*p.y*d.y+2*g.x*x.x*O*d.x*d.y+2*g.x*M.x*p.x*B*d.y+6*g.x*M.x*M.y*d.x*H-3*g.x*x.y*M.y*p.y*P+2*g.x*p.x*M.y*B*d.x+g.x*O*p.x*p.y*d.x+g.y*x.x*x.y*F*d.y+4*g.y*x.x*M.y*p.y*P-3*g.y*M.x*x.y*p.y*P+2*g.y*M.x*p.x*B*d.x+2*g.y*x.y*p.x*M.y*P+x.x*M.x*x.y*B*d.x-3*x.x*M.x*p.x*M.y*H-2*g.x*F*M.y*p.y*d.y-6*g.y*M.x*M.y*P*d.y-2*g.y*M.x*F*p.y*d.y-2*g.y*C*x.y*d.x*d.y-g.y*C*p.x*p.y*d.y-2*g.y*F*M.y*p.y*d.x-2*x.x*M.x*O*d.x*d.y-x.x*x.y*F*M.y*d.y+3*M.x*x.y*M.y*p.y*P-2*M.x*p.x*M.y*B*d.x-M.x*O*p.x*p.y*d.x+3*S*x.x*p.x*d.x*d.y+3*x.x*p.x*U*d.x*d.y+2*M.x*F*M.y*p.y*d.y-3*T*x.y*p.y*d.x*d.y+2*C*x.y*M.y*d.x*d.y+C*p.x*M.y*p.y*d.y-3*W*x.y*p.y*d.x*d.y-R*G+w*N+Y*G-z*N-3*g.x*W*G-g.x*I*P+3*T*M.x*G+g.y*k*H+3*g.y*U*N+M.x*I*P+T*D*d.x-3*S*M.y*N-S*L*d.y+W*D*d.x-k*M.y*H-L*U*d.y-g.x*C*x.y*H+g.y*x.x*O*P-3*g.x*S*P*d.y-g.x*O*F*d.y+g.y*C*B*d.x-x.x*O*M.y*P+3*T*g.y*d.x*H+T*x.x*p.y*H+2*T*x.y*p.x*H-2*S*x.x*p.y*P-S*x.y*p.x*P+C*M.x*x.y*H-3*g.x*U*P*d.y+3*g.y*W*d.x*H+x.x*W*p.y*H-2*x.x*U*p.y*P+M.x*O*F*d.y-x.y*p.x*U*P-T*p.x*B*d.y-3*T*M.y*d.x*H+3*S*M.x*P*d.y+S*F*p.y*d.x-C*M.y*B*d.x+2*W*x.y*p.x*H+3*M.x*U*P*d.y-W*p.x*B*d.y-3*W*M.y*d.x*H+F*U*p.y*d.x].reverse()),tt=0;tt<Q.length;tt++){var et=Q[tt],rt=Kb([d.x,p.x,x.x,g.x-M.x-et*E.x-et*et*b.x-et*et*et*m.x].reverse()),it=Kb([d.y,p.y,x.y,g.y-M.y-et*E.y-et*et*b.y-et*et*et*m.y].reverse());if(rt.length>0&&it.length>0){t:for(var at=0;at<rt.length;at++){var nt=rt[at];if(0<=nt&&nt<=1)for(var ot=0;ot<it.length;ot++)if(Math.abs(nt-it[ot])<1e-4){var st=m.x*et*et*et+b.x*et*et+E.x*et+M.x,lt=m.y*et*et*et+b.y*et*et+E.y*et+M.y;A.push({x:st,y:lt,t:nt});break t}}}}return A},intersectBezier2Bezier3:function(t,e,r,i,a,n,o,s,l,h,u,c,_,f){var v,y,d,p,x,g,m,b=[];v={x:t-2*r+a,y:e-2*i+n},p={x:3*l-o-3*u+_,y:3*h-s-3*c+f},x={x:3*o-6*l+3*u,y:3*s-6*h+3*c},g={x:-3*o+3*l,y:-3*s+3*h},m={x:o,y:s};for(var E=(d={x:t,y:e}).x*d.x,M=d.y*d.y,A=(y={x:2*r-2*t,y:2*i-2*e}).x*y.x,T=y.y*y.y,R=v.x*v.x,S=v.y*v.y,w=m.x*m.x,C=m.y*m.y,k=g.x*g.x,O=g.y*g.y,I=x.x*x.x,F=x.y*x.y,L=p.x*p.x,B=p.y*p.y,D=$b(0,1,[-2*v.x*v.y*p.x*p.y+R*B+S*L,-2*v.x*v.y*x.x*p.y-2*v.x*v.y*x.y*p.x+2*S*x.x*p.x+2*R*x.y*p.y,-2*v.x*g.x*v.y*p.y-2*v.x*v.y*g.y*p.x-2*v.x*v.y*x.x*x.y+2*g.x*S*p.x+S*I+R*(2*g.y*p.y+F),2*d.x*v.x*v.y*p.y+2*d.y*v.x*v.y*p.x+y.x*y.y*v.x*p.y+y.x*y.y*v.y*p.x-2*m.x*v.x*v.y*p.y-2*v.x*m.y*v.y*p.x-2*v.x*g.x*v.y*x.y-2*v.x*v.y*g.y*x.x-2*d.x*S*p.x-2*d.y*R*p.y+2*m.x*S*p.x+2*g.x*S*x.x-T*v.x*p.x-A*v.y*p.y+R*(2*m.y*p.y+2*g.y*x.y),2*d.x*v.x*v.y*x.y+2*d.y*v.x*v.y*x.x+y.x*y.y*v.x*x.y+y.x*y.y*v.y*x.x-2*m.x*v.x*v.y*x.y-2*v.x*m.y*v.y*x.x-2*v.x*g.x*v.y*g.y-2*d.x*S*x.x-2*d.y*R*x.y+2*m.x*S*x.x-T*v.x*x.x-A*v.y*x.y+k*S+R*(2*m.y*x.y+O),2*d.x*v.x*v.y*g.y+2*d.y*v.x*g.x*v.y+y.x*y.y*v.x*g.y+y.x*y.y*g.x*v.y-2*m.x*v.x*v.y*g.y-2*v.x*m.y*g.x*v.y-2*d.x*g.x*S-2*d.y*R*g.y+2*m.x*g.x*S-T*v.x*g.x-A*v.y*g.y+2*R*m.y*g.y,-2*d.x*d.y*v.x*v.y-d.x*y.x*y.y*v.y-d.y*y.x*y.y*v.x+2*d.x*v.x*m.y*v.y+2*d.y*m.x*v.x*v.y+y.x*m.x*y.y*v.y+y.x*y.y*v.x*m.y-2*m.x*v.x*m.y*v.y-2*d.x*m.x*S+d.x*T*v.x+d.y*A*v.y-2*d.y*R*m.y-m.x*T*v.x-A*m.y*v.y+E*S+M*R+w*S+R*C].reverse()),P=0;P<D.length;P++){var N=D[P],H=Kb([v.x,y.x,d.x-m.x-N*g.x-N*N*x.x-N*N*N*p.x].reverse()),G=Kb([v.y,y.y,d.y-m.y-N*g.y-N*N*x.y-N*N*N*p.y].reverse());if(H.length>0&&G.length>0){t:for(var W=0;W<H.length;W++){var Y=H[W];if(0<=Y&&Y<=1)for(var U=0;U<G.length;U++)if(Math.abs(Y-G[U])<1e-4){var z=p.x*N*N*N+x.x*N*N+g.x*N+m.x,X=p.y*N*N*N+x.y*N*N+g.y*N+m.y;b.push({x:z,y:X,t:Y});break t}}}}return b}},Qb=1e-9,tE=1-1e-9;var eE=function(t,e,r,i,a,n,o,s,l){var h=((o-a)*(e-n)-(s-n)*(t-a))/l,u=((r-t)*(e-n)-(i-e)*(t-a))/l;if(h>Qb&&h<tE&&u>Qb&&u<tE)return[{point:new Xb(t+h*(r-t),e+h*(i-e)),toSource:h,toClip:u}]},rE=function(t,e,r,i,a,n,o,s,l,h){var u=Jb.intersectBezier2Line(t,e,r,i,a,n,o,s,l,h);if(u.length&&(u=u.map((function(u){var c;if(c=Math.abs(l-o)>=Math.abs(h-s)?Math.abs((u.x-o)/(l-o)):Math.abs((u.y-s)/(h-s)),u.t>Qb&&u.t<tE&&c>Qb&&c<tE){var _=Pb.bezierSlope([[t,e],[r,i],[a,n]],u.t),f=Pb.bezierSlope([[o,s],[l,h]]);if(Math.abs(Math.abs(_)-Math.abs(f)||0)<Qb)return;return{point:new Xb(u.x,u.y),toSource:u.t,toClip:c}}})).filter((function(t){return t}))).length)return u},iE=function(t,e,r,i,a,n,o,s,l,h,u,c){var _=Jb.intersectBezier2Bezier2(t,e,r,i,a,n,o,s,l,h,u,c);if(_.length&&(_=_.map((function(_){var f=Pb.getPointT([[o,s],[l,h],[u,c]],_.x,_.y);if(f.length&&(f=f[0],_.t>Qb&&_.t<tE&&f>Qb&&f<tE)){var v=Pb.bezierSlope([[t,e],[r,i],[a,n]],_.t),y=Pb.bezierSlope([[o,s],[l,h],[u,c]],f);if(Math.abs(Math.abs(v)-Math.abs(y)||0)<Qb)return;return{point:new Xb(_.x,_.y),toSource:_.t,toClip:f}}})).filter((function(t){return t}))).length)return _},aE=function(t,e,r,i,a,n,o,s,l,h,u,c,_,f){var v=Jb.intersectBezier2Bezier3(t,e,r,i,a,n,o,s,l,h,u,c,_,f);if(v.length&&(v=v.map((function(v){var y=Pb.getPointT([[o,s],[l,h],[u,c],[_,f]],v.x,v.y);if(y.length&&(y=y[0],v.t>Qb&&v.t<tE&&y>Qb&&y<tE)){var d=Pb.bezierSlope([[t,e],[r,i],[a,n]],v.t),p=Pb.bezierSlope([[o,s],[l,h],[u,c],[_,f]],y);if(Math.abs(Math.abs(d)-Math.abs(p)||0)<Qb)return;return{point:new Xb(v.x,v.y),toSource:v.t,toClip:y}}})).filter((function(t){return t}))).length)return v},nE=function(t,e,r,i,a,n,o,s,l,h,u,c){var _=Jb.intersectBezier3Line(t,e,r,i,a,n,o,s,l,h,u,c);if(_.length&&(_=_.map((function(_){var f;if(f=Math.abs(u-l)>=Math.abs(c-h)?Math.abs((_.x-l)/(u-l)):Math.abs((_.y-h)/(c-h)),_.t>Qb&&_.t<tE&&f>Qb&&f<tE){var v=Pb.bezierSlope([[t,e],[r,i],[a,n],[o,s]],_.t),y=Pb.bezierSlope([[l,h],[u,c]]);if(Math.abs(Math.abs(v)-Math.abs(y)||0)<Qb)return;return{point:new Xb(_.x,_.y),toSource:_.t,toClip:f}}})).filter((function(t){return t}))).length)return _},oE=function(t,e,r,i,a,n,o,s,l,h,u,c,_,f,v,y){var d=Jb.intersectBezier3Bezier3(t,e,r,i,a,n,o,s,l,h,u,c,_,f,v,y);if(d.length&&(d=d.map((function(d){var p=Pb.getPointT([[l,h],[u,c],[_,f],[v,y]],d.x,d.y);if(p.length&&(p=p[0],d.t>Qb&&d.t<tE&&p>Qb&&p<tE)){var x=Pb.bezierSlope([[t,e],[r,i],[a,n],[o,s]],d.t),g=Pb.bezierSlope([[l,h],[u,c],[_,f],[v,y]],p);if(Math.abs(Math.abs(x)-Math.abs(g)||0)<Qb)return;return{point:new Xb(d.x,d.y),toSource:d.t,toClip:p}}})).filter((function(t){return t}))).length)return d},sE=function(t,e){return t.sort((function(t,r){return e?t.toSource-r.toSource:t.toClip-r.toClip})).map((function(t){return{point:t.point,t:e?t.toSource:t.toClip}})).filter((function(t){return t.t>Qb&&t.t<tE}))},lE=function(){function t(t,e){this.index=e;var r=[];Array.isArray(t)&&(t.forEach((function(t){if(Array.isArray(t)&&!(t.length<2)&&!(2===t.length&&t[1].length<=2)){for(var i=new Xb(t[0]),a=i,n=1,o=t.length;n<o;n++){var s=t[n],l=s.length,h=new Xb(s[l-2],s[l-1]),u=void 0;if(2===l){if(i.equal(h))continue;var c=Xb.compare(i,h)?[h,i]:[i,h];u=new Vb(c,e)}else if(4===l){if(i.equal(h)&&i.x===s[0]&&i.y===s[1])continue;var _=new Xb(s[0],s[1]),f=pE([i,_,h],!0);if(f){var v=[[i.x,i.y],[s[0],s[1]],[h.x,h.y]],y=Pb.sliceBezier(v,f[0]),d=Pb.sliceBezier2Both(v,f[0],1),p=new Xb(y[1]),x=new Xb(y[2]),g=new Xb(d[1]),m=Xb.compare(i,x)?[x,p,i]:[i,p,x];r.push(new Vb(m,e)),m=Xb.compare(x,h)?[h,g,x]:[x,g,h],u=new Vb(m,e)}else{var b=Xb.compare(i,h)?[h,_,i]:[i,_,h];u=new Vb(b,e)}}else if(6===l){if(s[0]===s[2]&&s[1]===s[3]){s.splice(2,2),n--;continue}if(i.equal(h)&&i.x===s[0]&&i.y===s[1]&&i.x===s[2]&&i.y===s[3])continue;var E=new Xb(s[0],s[1]),M=new Xb(s[2],s[3]),A=pE([i,E,M,h],!0);if(A)!function(){var t=[[i.x,i.y],[s[0],s[1]],[s[2],s[3]],[h.x,h.y]],a=i,n=0;A.forEach((function(i){var o=Pb.sliceBezier2Both(t,n,i),s=new Xb(o[1]),l=new Xb(o[2]),h=new Xb(o[3]),u=Xb.compare(a,h)?[h,l,s,a]:[a,s,l,h];r.push(new Vb(u,e)),n=i,a=h}));var o=Pb.sliceBezier2Both(t,n,1),l=new Xb(o[1]),c=new Xb(o[2]),_=Xb.compare(a,h)?[h,c,l,a]:[a,l,c,h];u=new Vb(_,e)}();else{var T=Xb.compare(i,h)?[h,M,E,i]:[i,E,M,h];u=new Vb(T,e)}}r.push(u),i=h}if(!i.equal(a)){var R=Xb.compare(i,a)?[a,i]:[i,a];r.push(new Vb(R,e))}}})),this.segments=r)}return r(t,[{key:"selfIntersect",value:function(){var t=_E(this.segments);this.segments=hE(t,!1,!1,!1)}},{key:"toString",value:function(){return this.segments.map((function(t){return t.toString()}))}},{key:"reset",value:function(t){return this.index=t,this.segments.forEach((function(e){e.belong=t,e.otherCoincide=0,e.otherFill[0]=e.otherFill[1]=!1})),this}}],[{key:"intersect2",value:function(t,e,r,i){if(t.segments.length&&e.segments.length){var a=hE(_E(t.segments.concat(e.segments)),!0,r,i);t.segments=a.filter((function(t){return 0===t.belong})),e.segments=a.filter((function(t){return 1===t.belong}))}}},{key:"annotate2",value:function(t,e,r,i){var a=function(t){var e={};t.forEach((function(t){var r=t.coords,i=r.length,a=r[0],n=r[i-1];vE(e,a.x,a.y,t,!0),vE(e,n.x,n.y,t,!1)}));var r=[];Object.keys(e).forEach((function(t){var i=e[t],a=[];Object.keys(i).forEach((function(t){var e=i[t].sort((function(t,e){return t.isStart!==e.isStart?t.isStart?1:-1:t.isStart?dE(t.seg,e.seg)?1:-1:void 0}));a.push({y:parseFloat(t),arr:e})})),r.push({x:parseFloat(t),arr:a.sort((function(t,e){return t.y-e.y}))})})),r.sort((function(t,e){return t.x-e.x}));var i=[];return r.forEach((function(t){t.arr.forEach((function(t){i=i.concat(t.arr)}))})),i}(t.segments.concat(e.segments)),n=[],o=[],s={},l={};a.forEach((function(t){var e=t.isStart,a=t.seg,h=a.belong;if(!(0===h&&r||1===h&&i)){var u=0===h?n:o,c=0===h?s:l;if(e){if(a.myCoincide){var _=a.toHash();if(c.hasOwnProperty(_))return;c[_]=!0}if(u.length){var f=u.length,v=u[f-1];if(dE(a,v))a.myFill[1]=v.myFill[0],a.myCoincide?a.myFill[0]=a.myCoincide%2==0?!a.myFill[1]:a.myFill[1]:a.myFill[0]=!a.myFill[1],u.push(a);else if(1===f)a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,u.unshift(a);else for(var y=f-2;y>=0;y--){var d=u[y];if(dE(a,d)){a.myFill[1]=d.myFill[0],a.myCoincide?a.myFill[0]=a.myCoincide%2==0?!a.myFill[1]:a.myFill[1]:a.myFill[0]=!a.myFill[1],u.splice(y+1,0,a);break}0===y&&(a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,u.unshift(a))}}else a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,u.push(a)}else{var p=u.indexOf(a);p>-1&&u.splice(p,1)}}}));var h=[],u={};a.forEach((function(t){var e=t.isStart,r=t.seg,i=r.belong;if(e){if(r.myCoincide||r.otherCoincide){var a=r.toHash();if(u.hasOwnProperty(a))return;u[a]=!0}var n=!1;if(h.length){var o=h.length,s=h[o-1];if(dE(r,s))n=s.belong===i?s.otherFill[0]:s.myFill[0],h.push(r);else if(1===o)h.unshift(r);else for(var l=o-2;l>=0;l--){var c=h[l];if(dE(r,c)){n=c.belong===i?c.otherFill[0]:c.myFill[0],h.splice(l+1,0,r);break}0===l&&h.unshift(r)}}else n=!1,h.push(r);r.otherCoincide||(r.otherFill[0]=n,r.otherFill[1]=n)}else{var _=h.indexOf(r);_>-1&&h.splice(_,1)}}))}}]),t}();function hE(t,e,r,i){for(var a=[],n=[],o=[];t.length;){n.length&&n.splice(0).forEach((function(t){var e=a.indexOf(t);a.splice(e,1),t.isDeleted||o.push(t)}));for(var s=t[0],l=s.x,h=s.arr;h.length;){var u=h.shift();if(!u.isDeleted){var c=u.belong,_=u.bbox;if(u.isVisited){if(_[0]!==_[2]||2!==u.coords.length){var f=a.indexOf(u);a.splice(f,1),u.isDeleted||o.push(u)}else n.push(u);u.isVisited=!1}else{if(a.length)for(var v=u.coords,y=v.length,d=v[0],p=d.x,x=d.y,g=v[1],m=g.x,b=g.y,E=0;E<a.length;E++){var M=a[E];if(!M.isDeleted&&!u.isDeleted&&(!e||M.belong!==c)){var A=M.bbox,T=M.coords,R=T.length,S=!1;if(gE(_,A,y,R)){if(y===R&&u.equal(M)){e?(u.otherCoincide++,M.otherCoincide++,u.otherFill=M.myFill,M.otherFill=u.myFill):(u.myCoincide++,M.myCoincide++,u.myFill=M.myFill);continue}var w=T[0],C=w.x,k=w.y,O=T[1],I=O.x,F=O.y,L=void 0,B=void 0;if(2===y)if(2===R){var D=(F-k)*(m-p)-(I-C)*(b-x);if(0===D)if(p===m)p===C&&m===I&&(B=mE(p,x,m,b,u,C,k,I,F,M,!0));else(b-x)*p/(m-p)+x===(F-k)*C/(I-C)+k&&(B=mE(p,x,m,b,u,C,k,I,F,M,!1));else L=eE(p,x,m,b,C,k,I,F,D)}else{var P=T[2],N=P.x,H=P.y;if(3===R)L=rE(C,k,I,F,N,H,p,x,m,b),S=!0;else{var G=T[3],W=G.x,Y=G.y;L=nE(C,k,I,F,N,H,W,Y,p,x,m,b),S=!0}}else{var U=v[2],z=U.x,X=U.y;if(3===y)if(2===R)L=rE(p,x,m,b,z,X,C,k,I,F);else{var V=T[2],K=V.x,j=V.y;if(3===R)(L=iE(p,x,m,b,z,X,C,k,I,F,K,j))||(B=bE(u,M));else{var Z=T[3],q=Z.x,$=Z.y;L=aE(p,x,m,b,z,X,C,k,I,F,K,j,q,$)}}else{var J=v[3],Q=J.x,tt=J.y;if(2===R)L=nE(p,x,m,b,z,X,Q,tt,C,k,I,F);else{var et=T[2],rt=et.x,it=et.y;if(3===R)L=aE(C,k,I,F,rt,it,p,x,m,b,z,X,Q,tt),S=!0;else{var at=T[3],nt=at.x,ot=at.y;(L=oE(p,x,m,b,z,X,Q,tt,C,k,I,F,rt,it,nt,ot))||(B=bE(u,M))}}}}if(B){cE(o,t,a,l,B.ra),cE(o,t,a,l,B.rb),u.isDeleted=M.isDeleted=!0,a.splice(E,1);break}if(L&&L.length){var st=uE(u,sE(L,!S),r&&0===c),lt=uE(M,sE(L,S),i&&1===c);cE(o,t,a,l,st),cE(o,t,a,l,lt),lt.length&&a.splice(E,1);break}}}}u.isDeleted||(a.push(u),u.isVisited=!0)}}}t.shift()}return n.forEach((function(t){t.isDeleted||o.push(t)})),o.filter((function(t){return!t.isDeleted}))}function uE(t,e,r){var i=[];if(!e.length)return i;var a,n=t.belong,o=t.coords,s=o.length,l=o[0],h=0;if(e.forEach((function(e){var a,u=e.point,c=e.t;if(2===s)a=new Vb([l,u],n);else if(3===s){var _=Pb.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,c);a=new Vb([l,new Xb(_[1][0],_[1][1]),u],n)}else if(4===s){var f=Pb.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,c);a=new Vb([l,new Xb(f[1][0],f[1][1]),new Xb(f[2][0],f[2][1]),u],n)}r&&(a.myFill[0]=t.myFill[0],a.myFill[1]=t.myFill[1]),l=u,i.push(a),h=c})),2===s)a=new Vb([l,o[1]],n);else if(3===s){var u=Pb.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,1);a=new Vb([l,new Xb(u[1][0],u[1][1]),o[2]],n)}else if(4===s){var c=Pb.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,1);a=new Vb([l,new Xb(c[1][0],c[1][1]),new Xb(c[2][0],c[2][1]),o[3]],n)}return r&&(a.myFill[0]=t.myFill[0],a.myFill[1]=t.myFill[1]),i.push(a),t.isDeleted=!0,i}function cE(t,e,r,i,a){a.forEach((function(a){var n=a.bbox,o=n[0],s=n[2];if(s<=i&&o!==s&&2!==a.coords.length)t.push(a);else{var l=0;if(o<i)a.isVisited=!0,r.push(a);else for(var h=e.length;l<h;l++){var u=e[l],c=u.x;if(o===c){u.arr.push(a);break}if(o<c){var _={x:o,arr:[a]};e.splice(l,0,_);break}}for(var f=e.length;l<f;l++){var v=e[l],y=v.x;if(s===y){v.arr.unshift(a);break}if(s<y){var d={x:s,arr:[a]};e.splice(l,0,d);break}}}}))}function _E(t){var e={};t.forEach((function(t){var r=t.bbox,i=r[0],a=r[2];fE(e,i,t),fE(e,a,t)}));var r=[];return Object.keys(e).forEach((function(t){return r.push({x:parseFloat(t),arr:e[t]})})),r.sort((function(t,e){return t.x-e.x}))}function fE(t,e,r){var i=t[e]=t[e]||[];r.isVisited?(i.unshift(r),r.isVisited=!1):(i.push(r),r.isVisited=!0)}function vE(t,e,r,i,a){var n=t[e]=t[e]||{};(n[r]=n[r]||[]).push({isStart:a,seg:i})}function yE(t,e,r){var i=t.x,a=t.y,n=e.x,o=e.y,s=r.x,l=r.y;return Nt.crossProduct(n-i,o-a,s-i,l-a)>=0}function dE(t,e){var r=t.coords,i=e.coords,a=r.length,n=i.length,o=r[0],s=i[0];if(2===a&&2===n){var l=r[1],h=i[1];return o.equal(s)?yE(l,s,h):yE(o,s,h)}if(2===a&&o.x===r[1].x)return s.x>=o.x;var u=Math.max(o.x,s.x),c=Math.min(r[a-1].x,i[n-1].x),_=u+.5*(c-u);if(o!==s){var f=xE(r,u),v=xE(i,u);if(f!==v)return f>v}if(r[a-1]!==i[n-1]){var y=xE(r,c),d=xE(i,c);if(y!==d)return y>d}var p=xE(r,_),x=xE(i,_);return p!==x?p>x:void 0}function pE(t,e){if(3===t.length){var r=e?(t[0].x-t[1].x)/(t[0].x-2*t[1].x+t[2].x):(t[0].y-t[1].y)/(t[0].y-2*t[1].y+t[2].y);if(r>0&&r<1)return[r]}else if(4===t.length){var i=Mb.getRoots([e?3*(t[1].x-t[0].x):3*(t[1].y-t[0].y),e?6*(t[2].x+t[0].x-2*t[1].x):6*(t[2].y+t[0].y-2*t[1].y),e?3*(t[3].x+3*t[1].x-t[0].x-3*t[2].x):3*(t[3].y+3*t[1].y-t[0].y-3*t[2].y)]).filter((function(t){return t>0&&t<1}));if(i.length)return i.sort((function(t,e){return t-e}))}}function xE(t,e){var r=t.length;if(e===t[0].x)return t[0].y;if(e===t[r-1].x)return t[r-1].y;if(2===r){if(t[0].y===t[1].y)return t[0].y;var i=(e-t[0].x)/(t[1].x-t[0].x);return t[0].y+i*(t[1].y-t[0].y)}if(3===r){var a=Mb.getRoots([t[0].x-e,2*(t[1].x-t[0].x),t[2].x+t[0].x-2*t[1].x]).filter((function(t){return t>=0&&t<=1})),n=t.map((function(t){return[t.x,t.y]}));return Pb.pointAtByT(n,a[0])[1]}if(4===r){var o=Mb.getRoots([t[0].x-e,3*(t[1].x-t[0].x),3*(t[2].x+t[0].x-2*t[1].x),t[3].x+3*t[1].x-t[0].x-3*t[2].x]).filter((function(t){return t>=0&&t<=1})),s=t.map((function(t){return[t.x,t.y]}));return Pb.pointAtByT(s,o[0])[1]}}function gE(t,e,r,i){if(2===r&&2===i){if(t[0]===t[2]&&e[0]===e[2]&&t[0]===t[2])return!(t[1]>=e[3]||e[1]>=t[3]);if(t[1]===t[3]&&e[1]===e[3]&&t[1]==t[1])return!(t[0]>=e[2]||e[0]>=t[2])}return se.isRectsOverlap(t,e)}function mE(t,e,r,i,a,n,o,s,l,h,u){var c=[],_=[],f=a.coords,v=h.coords;return t<n&&!u||e<o&&u?(c.push(new Vb([f[0],v[0]],a.belong)),r<s&&!u||i<l&&u?(c.push(new Vb([v[0],f[1]],a.belong)),_.push(new Vb([v[0],f[1]],h.belong)),_.push(new Vb([f[1],v[1]],h.belong))):r===s&&!u||i===l&&u?(c.push(new Vb([v[0],v[1]],a.belong)),_.push(new Vb([v[0],v[1]],h.belong))):(c.push(new Vb([v[0],v[1]],a.belong)),_.push(new Vb([v[0],v[1]],h.belong)),c.push(new Vb([v[1],f[1]],a.belong)))):t===n&&!u||e===o&&u?r<s&&!u||i<l&&u?(c.push(new Vb([f[0],f[1]],a.belong)),_.push(new Vb([f[0],f[1]],h.belong)),_.push(new Vb([f[1],v[1]],h.belong))):(c.push(new Vb([v[0],v[1]],a.belong)),c.push(new Vb([v[1],f[1]],a.belong)),_.push(new Vb([v[0],v[1]],h.belong))):(_.push(new Vb([v[0],f[0]],h.belong)),r<s&&!u||i<l&&u?(c.push(new Vb([f[0],f[1]],a.belong)),_.push(new Vb([f[0],f[1]],h.belong)),_.push(new Vb([f[1],v[1]],h.belong))):r===s&&!u||i===l&&u?(c.push(new Vb([f[0],f[1]],a.belong)),_.push(new Vb([f[0],f[1]],h.belong))):(c.push(new Vb([f[0],v[1]],a.belong)),_.push(new Vb([f[0],v[1]],h.belong)),c.push(new Vb([v[1],f[1]],a.belong)))),{ra:c,rb:_}}function bE(t,e){var r=t.coords.map((function(t){return[t.x,t.y]})),i=r.length,a=e.coords.map((function(t){return[t.x,t.y]})),n=a.length,o=r[0],s=a[0],l=r[i-1],h=a[n-1],u=Pb.getPointT(r,s[0],s[1]),c=Pb.getPointT(r,h[0],h[1]),_=Pb.getPointT(a,o[0],o[1]),f=Pb.getPointT(a,l[0],l[1]),v=u.length,y=c.length,d=_.length,p=f.length;if(1===v&&1===y&&0===d&&0===p||0===v&&0===y&&1===d&&1===p||(1===v&&1===y&&d+p===1||v+y===1&&1===d&&1===p)||v+y===1&&d+p===1){var x=v?u[0]:0,g=y?c[0]:1,m=Pb.sliceBezier2Both(r,x,g),b=d?_[0]:0,E=p?f[0]:1;if(function(t,e){for(var r=0,i=t.length;r<i;r++){var a=t[r],n=e[r];if(Math.abs(a[0]-n[0])>1e-9||Math.abs(a[1]-n[1])>1e-9)return!1}return!0}(m,Pb.sliceBezier2Both(a,b,E))){var M=m.map((function(t){return new Xb(t)})),A=[],T=[];if(x>0){var R=Pb.sliceBezier2Both(r,0,x),S=[t.coords[0],new Xb(R[1]),e.coords[0]];4===i&&S.splice(2,0,new Xb(R[2])),A.push(new Vb(S,t.belong))}if(A.push(new Vb(M,t.belong)),g<1){var w=Pb.sliceBezier2Both(r,g,1),C=[e.coords[n-1],new Xb(w[1]),t.coords[i-1]];4===i&&C.splice(2,0,new Xb(w[2])),A.push(new Vb(C,t.belong))}if(b>0){var k=Pb.sliceBezier2Both(a,0,b),O=[e.coords[0],new Xb(k[1]),t.coords[0]];4===n&&O.splice(2,0,new Xb(k[2])),T.push(new Vb(O,e.belong))}if(T.push(new Vb(M,e.belong)),E<1){var I=Pb.sliceBezier2Both(a,E,1),F=[t.coords[i-1],new Xb(I[1]),e.coords[n-1]];4===n&&F.splice(2,0,new Xb(I[2])),T.push(new Vb(F,e.belong))}return{ra:A,rb:T}}}}function EE(t,e,r,i,a,n){for(var o=0,s=e.length;o<s;o++){var l=e[o];if(l!==r){var h=l.length,u=l[0],c=l[h-1],_=u.coords[0],f=c.coords,v=f[f.length-1];if(a.equal(_))return n?(l=AE(r).concat(l),e[o]=l,e.splice(i,1),ME(t,e,l,o)):(l=r.concat(l),e[o]=l,e.splice(i,1),ME(t,e,l,o));if(a.equal(v))return n?(l=l.concat(r),e[o]=l,e.splice(i,1),ME(t,e,l,o)):(l=l.concat(AE(r)),e[o]=l,e.splice(i,1),ME(t,e,l,o))}}ME(t,e,r,i)}function ME(t,e,r,i){var a=r.length,n=r[0],o=r[a-1],s=n.coords[0],l=o.coords,h=l[l.length-1];s.equal(h)&&(e.splice(i,1),t.push(r))}function AE(t){return t.forEach((function(t){return t.reverse()})),t.reverse()}function TE(t){var e=[],r=[];t.sort((function(t,e){return e.otherFill[0]&&e.otherFill[1]?1:-1}));t:for(;t.length;){for(var i=t.shift(),a=i.coords,n=a.length,o=a[0],s=a[n-1],l=void 0,h=0,u=e.length;h<u;h++){var c=e[h],_=c.length,f=c[0],v=c[_-1],y=f.coords[0],d=v.coords,p=d[d.length-1];if(o.equal(p)){if(i.belong!==v.belong){c.push(i),EE(r,e,c,h,s,!1);continue t}l||(l={i:h,t:0})}else if(o.equal(y)){if(i.belong!==v.belong){i.reverse(),c.unshift(i),EE(r,e,c,h,s,!0);continue t}l||(l={i:h,t:1})}else if(s.equal(p)){if(i.belong!==v.belong){i.reverse(),c.push(i),EE(r,e,c,h,o,!1);continue t}l||(l={i:h,t:2})}else if(s.equal(y)){if(i.belong!==v.belong){c.unshift(i),EE(r,e,c,h,o,!0);continue t}l||(l={i:h,t:3})}}l?0===l.t?(e[l.i].push(i),EE(r,e,e[l.i],l.i,s,!1)):1===l.t?(i.reverse(),e[l.i].unshift(i),EE(r,e,e[l.i],l.i,s,!0)):2===l.t?(i.reverse(),e[l.i].push(i),EE(r,e,e[l.i],l.i,o,!1)):3===l.t&&(e[l.i].unshift(i),EE(r,e,e[l.i],l.i,o,!0)):e.push([i])}var x=r.map((function(t){var e,r,i,a,n,o,s=!0,l=0;t.forEach((function(t,s){var h=t.coords,u=h.length,c=t.bbox;s?(i=Math.min(i,c[0]),a=Math.min(a,c[1]),n=Math.max(n,c[2]),o=Math.max(o,c[3])):(i=c[0],a=c[1],n=c[2],o=c[3]),2===u?(l+=s?e*h[1].y-r*h[1].x:h[0].x*h[1].y-h[0].y*h[1].x,e=h[1].x,r=h[1].y):3===u?(l+=s?e*h[2].y-r*h[2].x:h[0].x*h[1].y-h[0].y*h[2].x,e=h[2].x,r=h[2].y):4===u&&(l+=s?e*h[3].y-r*h[3].x:h[0].x*h[3].y-h[0].y*h[3].x,e=h[3].x,r=h[3].y)}));var h=t[0].coords;return(l+=e*h[0].y-r*h[0].x)<0&&(s=!1),{list:t,clockwise:s,bbox:[i,a,n,o],area:(n-i)*(o-a)}}));return x.forEach((function(t){if(!t.checked){for(var e=t.bbox,r=[t],i=0,a=x.length;i<a;i++){var n=x[i];n!==t&&(se.isRectsInside(e,n.bbox,!0)||se.isRectsInside(n.bbox,e,!0))&&r.push(n)}if(r.length>1){r.sort((function(t,e){return t.area-e.area}));for(var o=1,s=r.length;o<s;o++){var l=r[o];if(l.checked){for(var h=l.clockwise,u=o-1;u>=0;u--){var c=r[u];c.checked=!0,c.clockwise===h&&(AE(c.list),c.clockwise=!h),h=!h}h=l.clockwise;for(var _=o+1;_<s;_++){var f=r[_];f.checked=!0,f.clockwise===h&&(AE(f.list),f.clockwise=!h),h=!h}return}}var v=r[0].clockwise;r[0].checked=!0;for(var y=1,d=r.length;y<d;y++){var p=r[y];p.checked=!0,p.clockwise===v&&(AE(p.list),p.clockwise=!v),v=!v}}}})),x.map((function(t){var e=t.list.map((function(t){var e=t.coords,r=e.length;return 2===r?[e[1].x,e[1].y]:3===r?[e[1].x,e[1].y,e[2].x,e[2].y]:4===r?[e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]:void 0})),r=t.list[0].coords;return e.unshift([r[0].x,r[0].y]),e}))}function RE(t){return t&&Array.isArray(t)&&Array.isArray(t[0])?Array.isArray(t[0][0])?t:[t]:[]}function SE(t,e){var r,i,a=t instanceof lE,n=e instanceof lE;return a?r=t.reset(0):(r=new lE(RE(t),0)).selfIntersect(),n?i=e.reset(1):(i=new lE(RE(e),1)).selfIntersect(),lE.intersect2(r,i,a,n),lE.annotate2(r,i,a,n),[r,i]}var wE=[0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,0],CE=[0,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0],kE=[0,0,1,0,0,0,1,0,1,1,0,1,0,0,1,0],OE=[0,1,0,0,1,0,1,1,0,1,0,0,0,1,0,0],IE=[0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0];function FE(t,e){var r=[],i={};return t.forEach((function(t){var a,n=t.belong,o=t.myFill,s=t.otherFill;if(t.otherCoincide){var l=t.toHash();if(i.hasOwnProperty(l))return;i[l]=!0}a=n?(s[0]?8:0)+(o[0]?4:0)+(s[1]?2:0)+(o[1]?1:0):(o[0]?8:0)+(s[0]?4:0)+(o[1]?2:0)+(s[1]?1:0),e[a]&&r.push(t)})),r}var LE={intersect:function(t,e,r){var i=u(SE(t,e),2),a=i[0],n=i[1],o=FE(a.segments.concat(n.segments),wE);return r?(a.segments=o,a):TE(o)},union:function(t,e,r){var i=u(SE(t,e),2),a=i[0],n=i[1],o=FE(a.segments.concat(n.segments),CE);return r?(a.segments=o,a):TE(o)},subtract:function(t,e,r){var i=u(SE(t,e),2),a=i[0],n=i[1],o=FE(a.segments.concat(n.segments),kE);return r?(a.segments=o,a):TE(o)},subtractRev:function(t,e,r){var i=u(SE(t,e),2),a=i[0],n=i[1],o=FE(a.segments.concat(n.segments),OE);return r?(a.segments=o,a):TE(o)},xor:function(t,e,r){var i=u(SE(t,e),2),a=i[0],n=i[1],o=FE(a.segments.concat(n.segments),IE);return r?(a.segments=o,a):TE(o)},chain:function(t){return t instanceof lE?TE(t.segments):RE(t)}},BE=LE.intersect,DE=LE.union,PE=LE.subtract,NE=LE.subtract2,HE=LE.xor,GE=LE.chain,WE=Vt.STYLE_KEY.STROKE_WIDTH,YE=H.isNil;function UE(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function zE(t,e){var r=[],i=0,a=[];if(e)i=[],t.forEach((function(t){var e=zE(t);r.push(e.list),i.push(e.total),a.push([0].concat(e.increase))}));else if(Array.isArray(t)){i=0,a.push(0);for(var n=0,o=0,s=t.length;o<s;o++){var l=t[o];if(Array.isArray(l)){n=o;break}}for(var h=t[n],u=n+1,c=t.length;u<c;u++){var _=t[u];if(Array.isArray(_))if(2===_.length){var f=Math.abs(_[0]-h[0]),v=Math.abs(_[1]-h[1]),y=Math.sqrt(Math.pow(f,2)+Math.pow(v,2));r.push(y),i+=y,a.push(i),h=_}else if(4===_.length){var d=Pb.bezierLength([h,[_[0],_[1]],[_[2],_[3]]]);r.push(d),i+=d,a.push(i),h=[_[2],_[3]]}else if(6===_.length){var p=Pb.bezierLength([h,[_[0],_[1]],[_[2],_[3]],[_[4],_[5]]]);r.push(p),i+=p,a.push(i),h=[_[4],_[5]]}}}return{list:r,total:i,increase:a}}function XE(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var a=r+(i-r>>1);return t[a]===e?a:t[a]>e?XE(t,e,r,Math.max(a-1,r)):XE(t,e,Math.min(a+1,i),i)}function VE(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(0===r&&1===i)return t;if(r===i)return[];if(r>i){var a=[i,r];r=a[0],i=a[1]}for(;i-r>1;)i--;for(;i<0||r<0;)i++,r++;for(;i>=1&&r>=1;)i--,r--;var n=t.length;t=H.clone(t);var o,s=[],l=r>1?r-1:r,h=i>1?i-1:i,u=XE(e.increase,l*e.total,0,n-1),c=XE(e.increase,h*e.total,0,n-1),_=r<0,f=i>1,v=1;if((h*=e.total)>e.increase[c]){var y=t[c].slice(t[c].length-2),d=t[c+1],p=e.list[c],x=h-e.increase[c],g=x/p;if(v=g,2===d.length){var m=d[0]-y[0],b=d[1]-y[1];f?o=[y[0]+g*m,y[1]+g*b]:(g=1-g,o=[d[0]-g*m,d[1]-g*b])}else if(4===d.length){var E=Pb.sliceBezier([y,[d[0],d[1]],[d[2],d[3]]],g);o=[E[1][0],E[1][1],E[2][0],E[2][1]]}else if(6===d.length){var M=Pb.sliceBezier([y,[d[0],d[1]],[d[2],d[3]],[d[4],d[5]]],g);o=[M[1][0],M[1][1],M[2][0],M[2][1],M[3][0],M[3][1]]}}if((l*=e.total)>e.increase[u]){var A,T=t[u].slice(t[u].length-2),R=e.list[u];u!==c||_||f||1===v||(R*=v,o&&(A=o)),A||(A=t[u+1]);var S=l-e.increase[u],w=S/R;if(2===A.length){var C=A[0]-T[0],k=A[1]-T[1];_?(w=1-w,s.push([A[0]-w*C,A[1]-w*k])):s.push([T[0]+w*C,T[1]+w*k]),s.push(A)}else if(4===A.length){var O=Pb.sliceBezier([[A[2],A[3]],[A[0],A[1]],T],1-w).reverse();s.push(O[0]),s.push([O[1][0],O[1][1],O[2][0],O[2][1]]),u!==c||_||f||(o=null)}else if(6===A.length){var I=Pb.sliceBezier([[A[4],A[5]],[A[2],A[3]],[A[0],A[1]],T],1-w).reverse();s.push(I[0]),s.push([I[1][0],I[1][1],I[2][0],I[2][1],A[4],A[5]]),u!==c||_||f||(o=null)}}for(var F=u+2;F<=c+(_||f?n:0);F++)s.push(t[F%n]);return o&&s.push(o),s}var KE=function(t){function e(e,r){var i;if((i=t.call(this,e,r)||this).isMulti){if(i.__points=[[]],i.__controls=[[]],i.__start=[0],i.__end=[1],Array.isArray(r.start)){i.__start=r.start.map((function(t){return parseFloat(t)||0}));for(var a=i.__start.length;a<i.__points.length;a++)i.__start.push(0)}else if(!YE(r.start)){var n=parseFloat(r.start)||0;i.__start=i.__points.map((function(){return n}))}if(Array.isArray(r.end)){i.__end=r.end.map((function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),e}));for(var o=i.__end.length;o<i.__points.length;o++)i.__end.push(1)}else if(!YE(r.end)){var s=parseFloat(r.end);isNaN(s)&&(s=1),i.__end=i.__points.map((function(){return s}))}}else if(i.__points=[],i.__controls=[],i.__start=0,i.__end=1,YE(r.start)||(i.__start=parseFloat(r.start)||0),!YE(r.end)){var l=parseFloat(r.end);isNaN(l)&&(l=1),i.__end=l}return Array.isArray(r.controls)&&(i.__controls=r.controls),Array.isArray(r.points)&&(i.__points=r.points),r.booleanOperations&&(i.__booleanOperations=r.booleanOperations),i}return a(e,t),r(e,[{key:"__getPoints",value:function(t,e,r,i,a,n){return a.map((function(a){if(Array.isArray(a)){var o=a.length;if(n){if(0!==o&&2!==o&&4!==o)return}else if(0!==o&&2!==o)return;for(var s=[],l=0;l<o;l++)l%2==0?s.push(t+a[l]*r):s.push(e+a[l]*i);return s}}))}},{key:"__reprocessing",value:function(t,e){if(!e||t.length<2)return t;var r=this.booleanOperations,i=t.length;if(!r)return t;if(!Array.isArray(r)){var a=r;r=[r];for(var n=1;n<i-1;n++)r.push(a)}if(Array.isArray(r)&&r.length){for(var o=[],s=t[0],l=1;l<i;l++){var h=(r[l-1]||"").toString().toLowerCase(),u=t[l];if(-1!==["intersect","intersection","union","subtract","subtract2","diff","difference","xor"].indexOf(h))switch(h){case"intersect":case"intersection":s=BE(s,u,!0);break;case"union":s=DE(s,u,!0);break;case"subtract":case"diff":case"difference":s=PE(s,u,!0);break;case"subtract2":s=NE(s,u,!0);break;case"xor":s=HE(s,u,!0)}else o=o.concat(GE(s)),s=u||[]}return o.concat(GE(s))}return t}},{key:"__needRebuildSE",value:function(t){if(H.isNil(t.booleanOperations))return t.booleanOperations=!0,!0}},{key:"buildCache",value:function(t,e){var r,i,a=this,n=this.width,o=this.height,s=this.points,l=this.controls,h=this.start,u=this.end,c=this.__cacheProps,_=this.isMulti;if(YE(c.points)&&(r=!0,c.points=_?s.map((function(r){if(Array.isArray(r))return a.__getPoints(t,e,n,o,r)})):this.__getPoints(t,e,n,o,s)),YE(c.controls)&&(r=!0,c.controls=_?l.map((function(r){return Array.isArray(r)?a.__getPoints(t,e,n,o,r,!0):r})):this.__getPoints(t,e,n,o,l,!0)),YE(c.start)&&(i=!0,c.start=h),YE(c.end)&&(i=!0,c.end=u),this.__needRebuildSE(c)&&(i=!0),r){var f=c.points,v=c.controls;_?(c.list2=f.map((function(t,e){var r=v[e];if(Array.isArray(t))return t.map((function(t,e){return e?UE(t,r&&r[e-1]):t}))})),c.len=zE(c.list2,_)):(c.list2=f.map((function(t,e){return e?UE(t,v[e-1]):t})),c.len=zE(c.list2,_))}return(r||i)&&(c.list=_?c.list2.map((function(t,e){if(Array.isArray(t)){var r=c.len;return VE(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},c.start[e],c.end[e])}})):VE(c.list2,c.len,c.start,c.end),c.list=this.__reprocessing(c.list,_)),r||i}},{key:"render",value:function(t,r,i,a){var o=h(n(e.prototype),"render",this).call(this,t,r,i,a);return o.break||t===y.WEBGL||(this.buildCache(o.x3,o.y3),this.__renderPolygon(t,r,o)),o}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,o=this.computedStyle[WE];this.buildCache(i,a);var s=h(n(e.prototype),"bbox",this),l=0;o.forEach((function(t){l=Math.max(l,t)})),l=Math.ceil(.5*l)+1;var c=r.points,_=r.controls;t||(c=[c],_=[_]),c.forEach((function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=_[e]||[],i=u(t[0],2),a=i[0],n=i[1],o=1,h=t.length;o<h;o++){var c=t[o];if(c&&!(c.length<2)){var f=u(t[o],2),v=f[0],y=f[1],d=r[o-1];if(d&&4===d.length){var p=Pb.bboxBezier(a,n,d[0],d[1],d[2],d[3],v,y);s[0]=Math.min(s[0],p[0]-l),s[1]=Math.min(s[1],p[1]-l),s[2]=Math.max(s[2],p[2]+l),s[3]=Math.max(s[3],p[3]+l)}else if(d&&2===d.length){var x=Pb.bboxBezier(a,n,d[0],d[1],v,y);s[0]=Math.min(s[0],x[0]-l),s[1]=Math.min(s[1],x[1]-l),s[2]=Math.max(s[2],x[2]+l),s[3]=Math.max(s[3],x[3]+l)}else s[0]=Math.min(s[0],a-l),s[1]=Math.min(s[1],n-l),s[2]=Math.max(s[2],a+l),s[3]=Math.max(s[3],n+l);a=v,n=y}}})),this.__bbox=s}return this.__bbox}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),e}(Jy),jE=function(t){function e(e,r){return t.call(this,e,r)||this}return a(e,t),r(e,[{key:"__getPoints",value:function(t,r,i,a,o,s){var l=h(n(e.prototype),"__getPoints",this).call(this,t,r,i,a,o,s);return s||l.push(l[0]),l}}]),e}(KE),ZE=Vt.STYLE_KEY.STROKE_WIDTH,qE=H.isNil,$E=se.sectorPoints;function JE(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var QE=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__begin=[0],i.__end=[0],i.__r=[1],Array.isArray(r.begin)&&(i.__begin=r.begin.map((function(t){return JE(t,0)}))),Array.isArray(r.end)&&(i.__end=r.end.map((function(t){return JE(t,0)}))),Array.isArray(r.r)&&(i.__r=r.r.map((function(t){return JE(t,1)}))),Array.isArray(r.edge)&&(i.__edge=r.edge.map((function(t){return!!t}))),Array.isArray(r.closure)&&(i.__closure=r.closure.map((function(t){return!!t})))):(i.__begin=i.__end=0,i.__r=1,i.__edge=!1,i.__closure=!1,qE(r.begin)||(i.__begin=JE(r.begin,0)),qE(r.end)||(i.__end=JE(r.end,0)),qE(r.r)||(i.__r=JE(r.r,1)),qE(r.edge)||(i.__edge=!!r.edge),qE(r.closure)||(i.__closure=!!r.closure)),i}return a(e,t),r(e,[{key:"buildCache",value:function(t,e,r){var i,a=this.width,n=this.begin,o=this.end,s=this.r,l=this.edge,h=this.closure,u=this.__cacheProps,c=this.isMulti;if((qE(u.begin)||r)&&(i=!0,u.begin=(n||0)%360),(qE(u.end)||r)&&(i=!0,u.end=(o||0)%360),(qE(u.r)||r)&&(i=!0,u.r=c?s.map((function(t){return t*a*.5})):s*a*.5),s=u.r,(qE(u.edge)||r)&&(i=!0,u.edge=l),(qE(u.closure)||r)&&(i=!0,u.closure=h),i)if(c)u.list=[],u.sList=[],n.forEach((function(r,i){var n=qE(s[i])?.5*a:s[i],c=$E(t,e,n,parseFloat(r||0)%360,parseFloat(o[i]||0)%360),_=c.slice(0);h[i]?(c.push(c[0].slice(0)),l&&_.push(_[0].slice(0))):(c.unshift([t,e]),c.push([t,e]),l&&(_.unshift([t,e]),_.push([t,e]))),u.list.push(c),u.sList.push(_)}));else{var _=$E(t,e,s,parseFloat(n||0),parseFloat(o||0)),f=_.slice(0);h?(_.push(_[0].slice(0)),l&&f.push(f[0].slice(0))):(_.unshift([t,e]),_.push([t,e]),l&&(f.unshift([t,e]),f.push([t,e]))),u.list=_,u.sList=f}return i}},{key:"render",value:function(t,r,i,a){var o=h(n(e.prototype),"render",this).call(this,t,r,i,a);if(o.break||t===y.WEBGL)return o;this.buildCache(o.cx,o.cy);var s=o.fill,l=o.fillRule,u=o.stroke,c=o.strokeWidth,_=o.strokeDasharray,f=o.strokeDasharrayStr,v=o.strokeLinecap,d=o.strokeLinejoin,p=o.strokeMiterlimit,x=o.dx,g=o.dy,m=this.__cacheProps,b=m.list,E=m.sList,M=this.isMulti;if(s.length<=1&&u.length<=1){var A={fill:s[0],fillRule:l[0],stroke:u[0],strokeWidth:c[0],strokeDasharray:_[0],strokeDasharrayStr:f[0],strokeLinecap:v[0],strokeLinejoin:d[0],strokeMiterlimit:p[0],dx:x,dy:g};this.__renderOneSector(t,r,M,b,E,A)}else{for(var T=0,R=s.length;T<R;T++){var S=s[T];if(S){var w={fill:S,fillRule:l[T],dx:x,dy:g};this.__renderOneSector(t,r,M,b,E,w)}}for(var C=0,k=u.length;C<k;C++){var O=u[C];if(O){var I={stroke:O,strokeWidth:c[C],strokeDasharray:_[C],strokeDasharrayStr:f[C],strokeLinecap:v[C],strokeLinejoin:d[C],strokeMiterlimit:p[C],dx:x,dy:g};this.__renderOnePolygon(t,r,M,b,E,I)}}}return o}},{key:"__renderOneSector",value:function(t,e,r,i,a,n){var o=n.fill,s=n.stroke,l=n.strokeWidth,h="conic"===o.k,u="conic"===s.k,c="radial"===o.k&&Array.isArray(o.v),_=l>0&&"radial"===s.k&&Array.isArray(s.v);h||u?(h?this.__conicGradient(t,e,i,r,n):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),l>0&&u?$.warn("Stroke style can not use conic-gradient"):l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0)):c||_?(c?this.__radialEllipse(t,e,i,r,n,"fill"):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),l>0&&_?($.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke=n.stroke.v[0],this.__drawPolygon(t,e,r,a,n,!1,!0)):l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0)):(o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0,!1),l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,a,n,o,s,l){if(t){var h=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",a]];this.__propsStrokeStyle(h,n,o,s,l),this.addGeom("path",h)}else if(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),a>0){var u=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",a]];this.__propsStrokeStyle(u,n,o,s,l),this.addGeom("path",u)}}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,o=this.width,s=this.height,l=this.computedStyle[ZE],u=i+.5*o,c=a+.5*s;this.buildCache(u,c);var _=0;if(t){var f=0;r.r.forEach((function(t){f=Math.max(t,f)})),_=f}else _=r.r;var v=h(n(e.prototype),"bbox",this),y=0;l.forEach((function(t){y=Math.max(y,t)}));var d=u-_-(y=Math.ceil(.5*y)+1),p=u+_-y,x=c-_+y,g=c+_+y;v[0]=Math.min(v[0],d),v[1]=Math.min(v[1],x),v[2]=Math.max(v[2],p),v[3]=Math.max(v[3],g),this.__bbox=v}return this.__bbox}}]),e}(Jy),tM=Vt.STYLE_KEY.STROKE_WIDTH,eM=H.isNil;function rM(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0===a||0===n)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];var o=a*se.H,s=n*se.H;return[[t+a,e],[t+r-a,e],[t+r+o-a,e,t+r,e+n-s,t+r,e+n],[t+r,e+i-n],[t+r,e+i+s-n,t+r+o-a,e+i,t+r-a,e+i],[t+a,e+i],[t+a-o,e+i,t,e+i+s-n,t,e+i-n],[t,e+n],[t,e+n-s,t+a-o,e,t+a,e]]}function iM(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var aM=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__rx=[0],i.__ry=[0],Array.isArray(r.rx)&&(i.__rx=r.rx.map((function(t){return iM(t)}))),Array.isArray(r.ry)&&(i.__ry=r.ry.map((function(t){return iM(t)})))):(i.__rx=i.__ry=0,eM(r.rx)||(i.__rx=iM(r.rx)),eM(r.ry)||(i.__ry=iM(r.ry))),i}return a(e,t),r(e,[{key:"buildCache",value:function(t,e,r){var i,a=this.width,n=this.height,o=this.rx,s=this.ry,l=this.__cacheProps,h=this.isMulti;if((eM(l.rx)||r)&&(i=!0,l.rx=h?o.map((function(t){return Math.min(t,.5)*a})):Math.min(o,.5)*a),(eM(l.ry)||r)&&(i=!0,l.ry=h?o.map((function(t){return Math.min(t,.5)*n})):Math.min(s,.5)*n),i){var u=l.rx,c=l.ry;l.list=h?u.map((function(r,i){return rM(t,e,a,n,r,c[i])})):rM(t,e,a,n,u,c)}return i}},{key:"render",value:function(t,r,i,a){var o=h(n(e.prototype),"render",this).call(this,t,r,i,a);return o.break||t===y.WEBGL||(this.buildCache(o.x3,o.y3),this.__renderPolygon(t,r,o)),o}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__x3,r=this.__y3,i=this.width,a=this.height,o=this.computedStyle[tM];this.buildCache(t,r);var s=h(n(e.prototype),"bbox",this),l=0;o.forEach((function(t){l=Math.max(l,t)})),l=Math.ceil(.5*l)+1,s[0]=Math.min(s[0],t-l),s[1]=Math.min(s[1],r-l),s[2]=Math.max(s[2],t+i+l),s[3]=Math.max(s[3],r+a+l),this.__bbox=s}return this.__bbox}}]),e}(Jy),nM=Vt.STYLE_KEY.STROKE_WIDTH,oM=H.isNil;function sM(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var lM=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__r=[1],Array.isArray(r.r)?i.__r=r.r.map((function(t){return sM(t)})):oM(r.r)||(i.__r=sM(r.r))):(i.__r=1,oM(r.r)||(i.__r=sM(r.r))),i}return a(e,t),r(e,[{key:"buildCache",value:function(t,e,r){var i=this.width,a=this.r,n=this.__cacheProps,o=this.isMulti;(oM(n.r)||r)&&(o?(n.r=a.map((function(t){return t*i*.5})),n.list=n.r.map((function(r){return se.ellipsePoints(t,e,r,r)}))):(n.r=a*i*.5,n.list=se.ellipsePoints(t,e,n.r,n.r)))}},{key:"render",value:function(t,r,i,a){var o=h(n(e.prototype),"render",this).call(this,t,r,i,a);return o.break||t===y.WEBGL||(this.buildCache(o.cx,o.cy),this.__renderPolygon(t,r,o)),o}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,o=this.width,s=this.height,l=this.computedStyle[nM],u=i+.5*o,c=a+.5*s;this.buildCache(u,c);var _=0;if(t){var f=0;r.r.forEach((function(t){f=Math.max(t,f)})),_=f}else _=r.r;var v=h(n(e.prototype),"bbox",this),y=0;l.forEach((function(t){y=Math.max(y,t)}));var d=u-_-(y=Math.ceil(.5*y)+1),p=c-_-y,x=u+_+y,g=c+_+y;v[0]=Math.min(v[0],d),v[1]=Math.min(v[1],p),v[2]=Math.max(v[2],x),v[3]=Math.max(v[3],g),this.__bbox=v}return this.__bbox}}]),e}(Jy),hM=Vt.STYLE_KEY.STROKE_WIDTH,uM=H.isNil;function cM(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var _M=function(t){function e(e,r){var i;return(i=t.call(this,e,r)||this).isMulti?(i.__rx=[1],i.__ry=[1],Array.isArray(r.rx)?i.__rx=r.rx.map((function(t){return cM(t)})):uM(r.rx)||(i.__rx=[cM(r.rx)]),Array.isArray(r.ry)?i.__ry=r.ry.map((function(t){return cM(t)})):uM(r.ry)||(i.__ry=[cM(r.ry)])):(i.__rx=1,uM(r.rx)||(i.__rx=cM(r.rx)),i.__ry=1,uM(r.ry)||(i.__ry=cM(r.ry))),i}return a(e,t),r(e,[{key:"buildCache",value:function(t,e,r){var i,a=this.width,n=this.height,o=this.rx,s=this.ry,l=this.__cacheProps,h=this.isMulti;if((uM(l.rx)||r)&&(i=!0,l.rx=h?o.map((function(t){return t*a*.5})):o*a*.5),(uM(l.ry)||r)&&(i=!0,l.ry=h?s.map((function(t){return t*n*.5})):s*n*.5),i){var u=l.rx,c=l.ry;l.list=h?u.map((function(r,i){return se.ellipsePoints(t,e,r,c[i])})):se.ellipsePoints(t,e,u,c)}return i}},{key:"render",value:function(t,r,i,a){var o=h(n(e.prototype),"render",this).call(this,t,r,i,a);return o.break||t===y.WEBGL||(this.buildCache(o.cx,o.cy),this.__renderPolygon(t,r,o)),o}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,r=this.__cacheProps,i=this.__x3,a=this.__y3,o=this.width,s=this.height,l=this.computedStyle[hM],u=i+.5*o,c=a+.5*s;this.buildCache(u,c);var _=0,f=0;if(t){var v=0,y=0;r.rx.forEach((function(t,e){v=Math.max(t,v),y=Math.max(f,r.ry[e])})),_=v,f=y}else _=r.rx,f=r.ry;var d=h(n(e.prototype),"bbox",this),p=0;l.forEach((function(t){p=Math.max(p,t)}));var x=u-_-(p=Math.ceil(.5*p)+1),g=u+_+p,m=c-f-p,b=c+f+p;d[0]=Math.min(d[0],x),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],b),this.__bbox=d}return this.__bbox}}]),e}(Jy),fM=H.isPrimitive;function vM(t,e,r,i,a){if(fM(e)||e instanceof v||e instanceof Nl)return e;if(Array.isArray(e))return e.map((function(e){return vM(t,e,r,i,a)}));var n=a;a+=e.offsetTime||0;var o,s,l=e.tagName,h=e.props,u=void 0===h?{}:h,c=e.children,_=void 0===c?[]:c,f=e.animate,y=void 0===f?[]:f;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(e));if(!Array.isArray(_))throw new Error("children must be an array");if("$"===l.charAt(0))o=t.createGm(l,u);else if(/^[A-Z]/.test(l)){var d=Nl.getRegister(l);o=t.createCp(d,u,_.map((function(e){return vM(t,e,r,i,a)})))}else o=t.createVd(l,u,_.map((function(e){return vM(t,e,r,i,a)})));y&&(Array.isArray(y)||(y=[y]),y.forEach((function(t){var e=t.value;Array.isArray(e)&&e.length&&(s=!0)})),s&&r.push({animate:y,target:o,offsetTime:n}));return o}var yM={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},dM={os:"offset",e:"easing"},pM={value:"v",options:"o"},xM={},gM={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},mM={};Dt.DOM_KEY_SET.concat(Dt.GEOM_KEY_SET).forEach((function(t){if(yM.hasOwnProperty(t))dM[yM[t]]=t;else{var e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase();yM[t]=e,dM[e]=t}})),Object.keys(pM).forEach((function(t){xM[pM[t]]=t})),Object.keys(gM).forEach((function(t){mM[gM[t]]=t}));var bM={fullCssProperty:yM,abbrCssProperty:dM,fullAnimate:pM,abbrAnimate:xM,fullAnimateOption:gM,abbrAnimateOption:mM},EM=H.isNil,MM=H.isFunction,AM=H.isPrimitive,TM=H.clone,RM=H.extend,SM=bM.abbrCssProperty,wM=bM.abbrAnimateOption,CM=bM.abbrAnimate;function kM(t,e){t&&Object.keys(t).forEach((function(r){if(0===r.indexOf("var-")){var i=r.slice(4);if(e.hasOwnProperty(i)){var a=e[i];t["var-"+a]=t[r]}}else if(e.hasOwnProperty(r)){var n=e[r];t[n]=t[r],delete t[r]}}))}function OM(t,e){if(t)if(t.hasOwnProperty("vars")){var r=t.vars;delete t.vars,Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.forEach((function(r){var i=r.id,a=r.member;if(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.length&&"library"!==a[0]&&e&&e.hasOwnProperty(i))for(var n=t,o=0,s=a.length;o<s;o++){var l=a[o];if(!n.hasOwnProperty(l)&&o!==s-1)return void $.error("Slot miss "+l);if(o===s-1){var h=e[i];if(void 0===h)return;MM(h)&&(h=h(n[l])),n[l]=h}else n=n[l]}}))}else Object.keys(t).forEach((function(r){if(0===r.indexOf("var-")){var i=t[r];if(delete t[r],!i||!e)return;var a=r.slice(4);if(a&&i.id&&e.hasOwnProperty(i.id)){var n=e[i.id];if(void 0===n)return;var o=t;if(a.indexOf(".")>-1){for(var s=a.split("."),l=s.length,h=0;h<l-1;h++){if(!o[a=s[h]])return void $.warn("parseJson vars is not exist: "+i.id+", "+r+", "+s.slice(0,h).join("."));o=o[a]}a=s[l-1]}MM(n)&&(n=n(i)),o[a]=n}}}))}function IM(t,e,r){if(AM(t)||t instanceof v||t instanceof Nl)return t;if(Array.isArray(t))return t.map((function(t){return IM(t,e,r)}));var i=t.libraryId;if(!EM(i)){var a=r[i];if(!a)throw new Error("Link library miss id: "+i);!function(t,e){t.tagName=e.tagName,t.props=TM(e.props)||{},t.children=e.children||[],e.vars&&!t.vars&&(t.vars=e.vars),e.library&&(t.library=e.library),Object.keys(e).forEach((function(r){0!==r.indexOf("var-")||t.hasOwnProperty(r)||(t[r]=e[r])})),delete t.libraryId;var r=t.init;if(r){var i=t.props,a=i.style;RM(i,r),a&&(RM(a,r.style),i.style=a),delete t.init}}(t,a)}var n=t.library;Array.isArray(n)&&(r={},n.forEach((function(t){return function(t,e){var r=t.id;if(EM(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}(t,r)})),function(t,e,r){if(t.hasOwnProperty("vars")){var i=t.vars;delete t.vars,Array.isArray(i)||(i=[i]),i.forEach((function(t){var i=t.id,a=t.member;if(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.length>1&&r&&r.hasOwnProperty(i)&&"library"===a[0])for(var n=e,o=1,s=a.length;o<s;o++){var l=a[o];if(!n.hasOwnProperty(l)&&o!==s-1)return void $.error("Library slot miss "+l);if(o===s-1){var h=r[i],u=n[l];MM(h)&&(h=h(u)),n[l]=1===o?Object.assign({id:u.id,tagName:u.tagName},h):h}else n=n[l]}}))}else Object.keys(t).forEach((function(i){if(0===i.indexOf("var-library.")){var a=t[i];if(delete t[i],!a||!r)return;var n=i.slice(12);if(n&&a.id&&r.hasOwnProperty(a.id)){var o=r[a.id];MM(o)&&(o=o(a)),e[n]=Object.assign({id:n},o)}}}))}(t,r,e.vars),delete t.library);var o=t.tagName,s=t.props,l=void 0===s?{}:s,h=t.children,u=void 0===h?[]:h,c=t.animate,_=void 0===c?[]:c;if(!o)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var f=l.src;if(/^#\d+$/.test(f)){var y=e.imgs,d=parseInt(f.slice(1));Array.isArray(y)&&(l.src=y[d])}var p=l.style;if(p){var x=p.fontFamily;if(/^#\d+$/.test(x)){var g=e.fonts,m=parseInt(x.slice(1));Array.isArray(g)&&(p.fontFamily=g[m])}!1!==e.abbr&&kM(p,SM),OM(p,e.vars)}return OM(l,e.vars),OM(t,e.vars),t.children=IM(u,e,r),_&&(Array.isArray(_)||(_=[_]),_.forEach((function(t){!1!==e.abbr&&kM(t,CM);var r=t.value,i=t.options;Array.isArray(r)&&r.length&&r.forEach((function(t){!1!==e.abbr&&kM(t,SM),OM(t,e.vars)})),i&&(!1!==e.abbr&&kM(i,wM),OM(i,e.vars),function(t,e){["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach((function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}))}(i,e))}))),t}function FM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!1===t.abbr&&(e.abbr=!1),!1!==e.abbr&&$.warn("Abbr in json is deprecated"),e.singleton||t.singleton||(t=H.clone(t)),IM(t,e,{})}var LM={apply:FM,parse:function(t,e,r,i){if(e){var a=e.fonts;a&&(Array.isArray(a)||(a=[a]),a.forEach((function(t){var e=t.fontFamily,r=t.url,i=t.data;e&&(r||i)&&St.register(e,r,i)}))),$.isDom(r)?i=i||{}:(i=i||r||{},r=null);var n=[],o=vM(t,e=FM(e,i),n,i,0);if(r){var s=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(s))throw new Error("Parse dom must be canvas/svg/webgl");var l=i.controller instanceof qx?i.controller:o.animateController;t.render(o,r),!1!==i.autoPlay?(l.__records=l.__records.concat(n),l.__playAuto()):(l.__records2=l.__records2.concat(n),l.init(l.__records2,l.list2))}else n.length&&(o.__animateRecords={options:i,list:n,controller:i.controller instanceof qx?i.controller:null});return o}},loadAndParse:function(t,e,r,i){var a=e.fonts,n=e.components,o=e.imgs,s=[],l=[],h=[];a&&(Array.isArray(a)||(a=[a]),a.forEach((function(t){t.url&&s.push(t)}))),n&&(Array.isArray(n)||(n=[n]),n.forEach((function(e){var r=e.tagName,i=e.url,a=e.reload;r&&t.Component.hasRegister(r)&&!a||i&&l.push(e)}))),o&&(Array.isArray(o)||(o=[o]),o.forEach((function(t){var e=t.url;e&&h.push(e)})));var u=s.length,c=l.length,_=h.length,f=0,v=function(){if(f===u+c+_){var a=LM.parse(t,e,r,i);i&&H.isFunction(i.callback)&&i.callback(a)}};u||c||_?(t.inject.loadFont(s,(function(){f+=u,v()})),t.inject.loadComponent(l.map((function(t){return t.url})),(function(){f+=c,l.forEach((function(e){var r=e.tagName;r&&window[r]&&!t.Component.hasRegister(r)&&t.Component.register(r,window[r])})),v()})),t.inject.measureImg(h,(function(){f+=_,v()}))):v()},abbr:bM},BM={css:qn,reset:Dt,unit:d,font:St,abbr:mr,transform:Uo},DM={Animation:Xc,Controller:qx,easing:Rh,frame:dh};function PM(t,e,r,i){var a=r-t,n=i-e,o=Math.atan(Math.abs(n)/Math.abs(a));return a<0&&n>=0?Math.PI-o:a<0&&n<0?o-Math.PI:a>=0&&n>=0?o:-o}function NM(t){var e=Math.sin(t),r=Math.cos(t),i=g.identity();return i[0]=i[5]=r,i[1]=e,i[4]=-e,i}function HM(t,e){var r=u(t,6),i=r[0],a=r[1],n=r[2],o=r[3],s=r[4],l=r[5],h=u(e,6),c=h[0],_=h[1],f=h[2],v=h[3],y=h[4],d=(n-i)*(l-a)-(s-i)*(o-a),p=(f-c)*(h[5]-_)-(y-c)*(v-_);return d>0&&p<0||d<0&&p>0}var GM={exchangeOrder:function(t,e){var r=function(t){var e=u(t,6),r=e[0],i=e[1],a=e[2],n=e[3],o=e[4],s=e[5],l=[0,1,2];if(a<r&&a<o){var h=[a,n,r,i];r=h[0],i=h[1],a=h[2],n=h[3],l[0]=1,l[1]=0}else if(o<a&&o<r){var c=[o,s,r,i];r=c[0],i=c[1],o=c[2],s=c[3],l[0]=2,l[2]=0}if(r===a){if(i>n){var _=[a,n,r,i];r=_[0],i=_[1],a=_[2],n=_[3];var f=l[0];l[0]=l[1],l[1]=f}}else if(r===o&&i>s){var v=[o,s,r,i];r=v[0],i=v[1],o=v[2],s=v[3];var y=l[0];l[0]=l[2],l[2]=y}if((a-r)*(s-i)-(o-r)*(n-i)<0){var d=[o,s,a,n];a=d[0],n=d[1],o=d[2],s=d[3];var p=l[1];l[1]=l[2],l[2]=p}return[r,i,a,n,o,s,l]}(t),i=u(r,7),a=i[0],n=i[1],o=i[2],s=i[3],l=i[4],h=i[5],c=function(t,e){for(var r=[],i=0,a=e.length;i<a;i++){var n=e[i];r.push(t[2*n]),r.push(t[2*n+1])}return r}(e,i[6]),_=u(c,6);return[[a,n,o,s,l,h],[_[0],_[1],_[2],_[3],_[4],_[5]]]},isOverflow:HM,transform:function(t,e){var r,i=u(t,6),a=i[0],n=i[1],o=i[2],s=i[3],l=i[4],h=i[5],c=u(e,6),_=c[0],f=c[1],v=c[2],y=c[3],d=c[4],p=c[5],x=HM(t,e),m=g.identity();m[12]=-a,m[13]=-n;var b=PM(a,n,o,s);0!==b&&(r=NM(-b),m=g.multiply(r,m));var E=se.pointsDistance(a,n,o,s),M=se.pointsDistance(_,f,v,y),A=g.identity();A[12]=-_,A[13]=-f;var T=b=PM(_,f,v,y);0!==b&&(r=NM(-b),A=g.multiply(r,A));var R=Math.abs(g.calPoint({x:l,y:h},m).y),S=Math.abs(g.calPoint({x:d,y:p},A).y);E===M&&R===S||(r=g.identity(),E!==M&&(r[0]=M/E),R!==S&&(r[5]=S/R),m=g.multiply(r,m)),A=m;var w=g.calPoint({x:a,y:n},A),C=w.x,k=w.y,O=g.calPoint({x:o,y:s},A),I=O.x,F=O.y,L=g.calPoint({x:l,y:h},A),B=L.x,D=L.y,P=se.pointsDistance(C,k,I,F),N=se.pointsDistance(C,k,B,D),H=se.pointsDistance(B,D,I,F),G=se.pointsDistance(_,f,v,y),W=se.pointsDistance(_,f,d,p),Y=se.pointsDistance(d,p,v,y),U=se.angleBySide(H,P,N),z=se.angleBySide(Y,G,W);return U!==z&&((r=g.identity())[4]=Math.tan(U-.5*Math.PI)+Math.tan(.5*Math.PI-z),m=g.multiply(r,m)),x&&(m[1]=-m[1],m[5]=-m[5],m[13]=-m[13]),(r=0!==T?NM(T):g.identity())[12]=_,r[13]=f,g.multiply(r,m)}},WM={matrix:g,tar:GM,vector:Nt,equation:Mb,geom:se,bezier:Pb,isec:Jb,booleanOperations:LE},YM={level:Vs,change:oa,Page:ag,Cache:Jx,CanvasPage:cg,CanvasCache:pg};Jy.register("$line",zb),Jy.register("$polyline",KE),Jy.register("$polygon",jE),Jy.register("$sector",QE),Jy.register("$rect",aM),Jy.register("$circle",lM),Jy.register("$ellipse",_M);var UM={version:"0.81.3",render:function(t,e){if(!(t instanceof mb))throw new Error("Render dom must be canvas/svg/webgl");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,a=arguments.length;i<a;i++)r.push(arguments[i]);return H.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?t instanceof Jy?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(["canvas","svg","webgl"].indexOf(t)>-1)return new mb(t,e,r);if(dy.TAG_NAME.hasOwnProperty(t))return"img"===t?new Ex(t,e):new Kp(t,e,r);throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return new(Jy.getRegister(t))(t,e)},createCp:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.children=r,new t(e,r)},parse:function(t,e,r){return LM.parse(this,t,e,r)},loadAndParse:function(t,e,r){return LM.loadAndParse(this,t,e,r)},mode:y,Component:Nl,Node:v,Text:Ol,Geom:Jy,Xom:Jv,Dom:Kp,Img:Ex,Root:mb,Event:Fl,util:H,inject:$,style:BM,parser:LM,animate:DM,math:WM,refresh:YM,enums:Vt,ca:Rm,set debug(t){G.flag=!!t}};return"undefined"!=typeof window?window.karas=UM:"undefined"!=typeof self&&(self.karas=UM),UM}));
//# sourceMappingURL=index.min.js.map
