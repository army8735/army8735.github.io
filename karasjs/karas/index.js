!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).karas=e()}(this,(function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var i=h(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(arguments.length<3?t:r):a.value}},f.apply(this,arguments)}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var i,a,n=[],o=!0,s=!1;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==r.return||r.return()}finally{if(s)throw a}}return n}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var y={POSITION:0,DISPLAY:1,TOP:2,RIGHT:3,BOTTOM:4,LEFT:5,MARGIN_TOP:6,MARGIN_RIGHT:7,MARGIN_BOTTOM:8,MARGIN_LEFT:9,PADDING_TOP:10,PADDING_RIGHT:11,PADDING_BOTTOM:12,PADDING_LEFT:13,FONT_SIZE:14,FONT_FAMILY:15,COLOR:16,FONT_STYLE:17,FONT_WEIGHT:18,LINE_HEIGHT:19,BACKGROUND_IMAGE:20,BACKGROUND_COLOR:21,BACKGROUND_SIZE:22,BACKGROUND_REPEAT:23,BACKGROUND_POSITION_X:24,BACKGROUND_POSITION_Y:25,BORDER_TOP_WIDTH:26,BORDER_RIGHT_WIDTH:27,BORDER_BOTTOM_WIDTH:28,BORDER_LEFT_WIDTH:29,BORDER_TOP_COLOR:30,BORDER_RIGHT_COLOR:31,BORDER_BOTTOM_COLOR:32,BORDER_LEFT_COLOR:33,BORDER_TOP_STYLE:34,BORDER_RIGHT_STYLE:35,BORDER_BOTTOM_STYLE:36,BORDER_LEFT_STYLE:37,BORDER_TOP_LEFT_RADIUS:38,BORDER_TOP_RIGHT_RADIUS:39,BORDER_BOTTOM_RIGHT_RADIUS:40,BORDER_BOTTOM_LEFT_RADIUS:41,WIDTH:42,HEIGHT:43,FLEX_GROW:44,FLEX_SHRINK:45,FLEX_BASIS:46,FLEX_DIRECTION:47,JUSTIFY_CONTENT:48,ALIGN_ITEMS:49,ALIGN_SELF:50,TEXT_ALIGN:51,TRANSFORM_ORIGIN:52,VISIBILITY:53,OPACITY:54,Z_INDEX:55,TRANSFORM:56,TRANSLATE_X:57,TRANSLATE_Y:58,TRANSLATE_Z:59,SCALE_X:60,SCALE_Y:61,SCALE_Z:62,SKEW_X:63,SKEW_Y:64,ROTATE_X:65,ROTATE_Y:66,ROTATE_Z:67,ROTATE_3D:68,PERSPECTIVE:69,PERSPECTIVE_ORIGIN:70,FILTER:71,BOX_SHADOW:72,POINTER_EVENTS:73,OVERFLOW:74,MIX_BLEND_MODE:75,BACKGROUND_CLIP:76,WHITE_SPACE:77,TEXT_OVERFLOW:78,LETTER_SPACING:79,LINE_CLAMP:80,ORDER:81,FLEX_WRAP:82,ALIGN_CONTENT:83,TEXT_STROKE_WIDTH:84,TEXT_STROKE_COLOR:85,TEXT_STROKE_OVER:86,WRITING_MODE:87,FILL:88,STROKE:89,STROKE_WIDTH:90,STROKE_DASHARRAY:91,STROKE_DASHARRAY_STR:92,STROKE_LINECAP:93,STROKE_LINEJOIN:94,STROKE_MITERLIMIT:95,FILL_RULE:96,MATRIX:97,BORDER_TOP:98,BORDER_RIGHT:99,BORDER_BOTTOM:100,BORDER_LEFT:101,TRANSLATE_PATH:102},v={};function p(t){var e=v[t];return e||(e=v[t]=t.toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()}))),e}var g={};var x={},m={},E={};Object.keys(y).forEach((function(t){var e=y[t];x[e]=t;var r=p(t);m[e]=r,E[r]=e}));var b={STYLE_KEY:y,STYLE_R_KEY:x,STYLE_RV_KEY:m,STYLE_V_KEY:E,style2Lower:p,style2Upper:function(t){var e=g[t];return e||(e=g[t]=t.replace(/([a-z\d_])([A-Z])/g,(function(t,e,r){return e+"_"+r})).toUpperCase()),e},UPDATE_KEY:{UPDATE_NODE:0,UPDATE_STYLE:1,UPDATE_FOCUS:2,UPDATE_COMPONENT:3,UPDATE_OVERWRITE:4,UPDATE_KEYS:5,UPDATE_LIST:6,UPDATE_CONFIG:7,UPDATE_ADD_DOM:8,UPDATE_REMOVE_DOM:9},KEY_FRAME_KEY:{FRAME_STYLE:0,FRAME_TIME:1,FRAME_EASING:2,FRAME_TRANSITION:3},NODE_KEY:{NODE_DOM_PARENT:0,NODE_OPACITY:1,NODE_MATRIX:2,NODE_MATRIX_EVENT:3,NODE_CACHE:4,NODE_CACHE_TOTAL:5,NODE_CACHE_FILTER:6,NODE_CACHE_MASK:7,NODE_CACHE_OVERFLOW:8,NODE_STRUCT:9,NODE_TAG_NAME:10,NODE_CURRENT_STYLE:11,NODE_CURRENT_PROPS:12,NODE_COMPUTED_STYLE:13,NODE_CACHE_STYLE:14,NODE_CACHE_PROPS:15,NODE_LIMIT_CACHE:16,NODE_IS_MASK:17,NODE_IS_INLINE:18,NODE_HAS_CONTENT:19,NODE_REFRESH_LV:20,NODE_IS_DESTROYED:21,NODE_STYLE:22,NODE_UPDATE_HASH:23,NODE_UNIQUE_UPDATE_ID:24,NODE_DEFS_CACHE:25,NODE_PERSPECTIVE_MATRIX:26,NODE_VIRTUAL_DOM:27,NODE_CACHE_AS_BITMAP:28},STRUCT_KEY:{STRUCT_NODE:0,STRUCT_INDEX:1,STRUCT_CHILD_INDEX:2,STRUCT_LV:3,STRUCT_NUM:4,STRUCT_TOTAL:5,STRUCT_HAS_MASK:6},ANIMATE_KEY:{I_ASSIGNING:0,I_IN_FPS:1,I_IS_DELAY:2,I_BEGIN:3,I_END:4,I_FINISHED:5,I_NEXT_END:6,I_FIRST_PLAY:7,I_PLAY_CB:8,I_TARGET:9,I_ROOT:10,I_FRAMES:11,I_FRAMES_R:12,I_CURRENT_TIME:13,I_NEXT_TIME:14,I_STYLE:15,I_DURATION:16,I_ITERATIONS:17,I_FILL:18,I_PLAYBACK_RATE:19,I_PLAY_COUNT:20,I_PLAY_STATE:21,I_DESTROYED:22,I_START_TIME:23,I_FPS_TIME:24,I_EASING:25,I_ENTER_FRAME:26,I_DELAY:27,I_END_DELAY:28,I_KEYS:29,I_ORIGIN_STYLE:30,I_CURRENT_FRAMES:31,I_CURRENT_FRAME:32,I_SPF_LIMIT:33,I_FPS:34,I_DIRECTION:35,I_FIRST_ENTER:36,I_STAY_BEGIN:37,I_STAY_END:38,I_IS2:39,I_END_TIME:40,I_NODE_CONFIG:41,I_ROOT_CONFIG:42,I_OUT_BEGIN_DELAY:43,I_TIME_STAMP:44},ELLIPSIS:"…"},T=b.STRUCT_KEY,A=T.STRUCT_NODE,M=T.STRUCT_INDEX,R=T.STRUCT_CHILD_INDEX,S=T.STRUCT_LV,O=b.NODE_KEY,C=O.NODE_IS_DESTROYED,I=O.NODE_STRUCT,w=function(){function t(){e(this,t),this.__x=0,this.__y=0,this.__ox=0,this.__oy=0,this.__sx=0,this.__sy=0,this.__width=0,this.__height=0,this.__baseline=0,this.__verticalBaseline=0,this.__config={},this.__prev=null,this.__next=null,this.__parent=null,this.__domParent=null,this.__root=null,this.__host=null,this.__virtualDom=null,this.__bbox=null,this.__filterBbox=null}return i(t,[{key:"__structure",value:function(t,e,r){var i;return this.__config[I]=(a(i={},A,this),a(i,M,t),a(i,R,r),a(i,S,e),i)}},{key:"__modifyStruct",value:function(t){return[this.__config[I],0]}},{key:"__offsetX",value:function(t,e){e?this.__x+=t:this.__ox+=t,this.__sx+=t}},{key:"__offsetY",value:function(t,e){e?this.__y+=t:this.__oy+=t,this.__sy+=t}},{key:"__destroy",value:function(){this.__config[C]=!0}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"ox",get:function(){return this.__ox}},{key:"oy",get:function(){return this.__oy}},{key:"sx",get:function(){return this.x+this.ox}},{key:"sy",get:function(){return this.y+this.oy}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"outerWidth",get:function(){return this.__width}},{key:"outerHeight",get:function(){return this.__height}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"parent",get:function(){return this.__parent}},{key:"domParent",get:function(){return this.__domParent}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"baseline",get:function(){return this.__baseline}},{key:"verticalBaseline",get:function(){return this.__verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"isDestroyed",get:function(){return this.__config[C]}},{key:"isReplaced",get:function(){return!1}}]),t}(),k={CANVAS:0,SVG:1,WEBGL:2},D={AUTO:0,PX:1,PERCENT:2,NUMBER:3,INHERIT:4,DEG:5,STRING:6,RGBA:7,REM:8,EM:9,VW:10,VH:11,VMAX:12,VMIN:13,GRADIENT:14,calUnit:function(t){var e=parseFloat(t)||0;return/%$/.test(t)?[e,D.PERCENT]:/px$/i.test(t)?[e,D.PX]:/deg$/i.test(t)?[e,D.DEG]:/rem$/i.test(t)?[e,D.REM]:/vw$/i.test(t)?[e,D.VW]:/vh$/i.test(t)?[e,D.VH]:/em$/i.test(t)?[e,D.EM]:/vw$/i.test(t)?[e,D.VW]:/vh$/i.test(t)?[e,D.VH]:/vmax$/i.test(t)?[e,D.VMAX]:/vmin$/i.test(t)?[e,D.VMIN]:[e,D.NUMBER]}},L={TYPE_VD:Symbol("Dom"),TYPE_GM:Symbol("Geom"),TYPE_CP:Symbol("Component")};function F(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function N(t){return!t||!t.length||(16===t.length?1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]:1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5])}var P={identity:F,multiply:function(t,e){if(N(t))return e;if(N(e))return t;for(var r=[],i=0;i<4;i++){var a=t[i]||0,n=t[i+4]||0,o=t[i+8]||0,s=t[i+12]||0;r[i]=a*e[0]+n*e[1]+o*e[2]+s*e[3],r[i+4]=a*e[4]+n*e[5]+o*e[6]+s*e[7],r[i+8]=a*e[8]+n*e[9]+o*e[10]+s*e[11],r[i+12]=a*e[12]+n*e[13]+o*e[14]+s*e[15]}return r},calPoint:function(t,e){var r=c(t,4),i=r[0],a=r[1],n=r[2],o=r[3];if(void 0===o&&(o=1),e&&!N(e)){if(16===e.length){n=n||0;var s=c(e,16),l=s[0],h=s[1],f=s[2],u=s[3],_=s[4],d=s[5],y=s[6],v=s[7],p=s[8],g=s[9],x=s[10],m=s[11];return[i*l+a*_+n*p+s[12],i*h+a*d+n*g+s[13],i*f+a*y+n*x+s[14],o*=i*u+a*v+n*m+s[15]]}var E=c(e,6),b=E[0],T=E[1],A=E[2],M=E[3];return[b*i+A*a+E[4],T*i+M*a+E[5]]}return[i,a,n,o]},point2d:function(t){var e=t[3];return e&&1!==e&&((t=t.slice(0,2))[0]/=e,t[1]/=e),t},inverse:function(t){if(16===t.length)return function(t){var e=[];e[0]=t[5]*t[10]*t[15]-t[5]*t[11]*t[14]-t[9]*t[6]*t[15]+t[9]*t[7]*t[14]+t[13]*t[6]*t[11]-t[13]*t[7]*t[10],e[4]=-t[4]*t[10]*t[15]+t[4]*t[11]*t[14]+t[8]*t[6]*t[15]-t[8]*t[7]*t[14]-t[12]*t[6]*t[11]+t[12]*t[7]*t[10],e[8]=t[4]*t[9]*t[15]-t[4]*t[11]*t[13]-t[8]*t[5]*t[15]+t[8]*t[7]*t[13]+t[12]*t[5]*t[11]-t[12]*t[7]*t[9],e[12]=-t[4]*t[9]*t[14]+t[4]*t[10]*t[13]+t[8]*t[5]*t[14]-t[8]*t[6]*t[13]-t[12]*t[5]*t[10]+t[12]*t[6]*t[9],e[1]=-t[1]*t[10]*t[15]+t[1]*t[11]*t[14]+t[9]*t[2]*t[15]-t[9]*t[3]*t[14]-t[13]*t[2]*t[11]+t[13]*t[3]*t[10],e[5]=t[0]*t[10]*t[15]-t[0]*t[11]*t[14]-t[8]*t[2]*t[15]+t[8]*t[3]*t[14]+t[12]*t[2]*t[11]-t[12]*t[3]*t[10],e[9]=-t[0]*t[9]*t[15]+t[0]*t[11]*t[13]+t[8]*t[1]*t[15]-t[8]*t[3]*t[13]-t[12]*t[1]*t[11]+t[12]*t[3]*t[9],e[13]=t[0]*t[9]*t[14]-t[0]*t[10]*t[13]-t[8]*t[1]*t[14]+t[8]*t[2]*t[13]+t[12]*t[1]*t[10]-t[12]*t[2]*t[9],e[2]=t[1]*t[6]*t[15]-t[1]*t[7]*t[14]-t[5]*t[2]*t[15]+t[5]*t[3]*t[14]+t[13]*t[2]*t[7]-t[13]*t[3]*t[6],e[6]=-t[0]*t[6]*t[15]+t[0]*t[7]*t[14]+t[4]*t[2]*t[15]-t[4]*t[3]*t[14]-t[12]*t[2]*t[7]+t[12]*t[3]*t[6],e[10]=t[0]*t[5]*t[15]-t[0]*t[7]*t[13]-t[4]*t[1]*t[15]+t[4]*t[3]*t[13]+t[12]*t[1]*t[7]-t[12]*t[3]*t[5],e[14]=-t[0]*t[5]*t[14]+t[0]*t[6]*t[13]+t[4]*t[1]*t[14]-t[4]*t[2]*t[13]-t[12]*t[1]*t[6]+t[12]*t[2]*t[5],e[3]=-t[1]*t[6]*t[11]+t[1]*t[7]*t[10]+t[5]*t[2]*t[11]-t[5]*t[3]*t[10]-t[9]*t[2]*t[7]+t[9]*t[3]*t[6],e[7]=t[0]*t[6]*t[11]-t[0]*t[7]*t[10]-t[4]*t[2]*t[11]+t[4]*t[3]*t[10]+t[8]*t[2]*t[7]-t[8]*t[3]*t[6],e[11]=-t[0]*t[5]*t[11]+t[0]*t[7]*t[9]+t[4]*t[1]*t[11]-t[4]*t[3]*t[9]-t[8]*t[1]*t[7]+t[8]*t[3]*t[5],e[15]=t[0]*t[5]*t[10]-t[0]*t[6]*t[9]-t[4]*t[1]*t[10]+t[4]*t[2]*t[9]+t[8]*t[1]*t[6]-t[8]*t[2]*t[5];var r=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12];if(0===r)return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];r=1/r;for(var i=[],a=0;a<16;a++)i[a]=e[a]*r;return i}(t);var e=c(t,6),r=e[0],i=e[1],a=e[2],n=e[3],o=e[4],s=e[5];if(1===r&&0===i&&0===a&&1===n&&0===o&&0===s)return t;var l=r*n-i*a;return 0===l?t:[n/l,-i/l,-a/l,r/l,(a*s-n*o)/l,(i*o-r*s)/l]},isE:N,m2m6:function(t){return[t[0],t[1],t[4],t[5],t[12],t[13]]}},B={}.toString;function H(t){return function(e){return B.call(e)==="[object "+t+"]"}}var G=H("Object"),Y=H("String"),W=H("Function"),U=H("Number"),X=H("Boolean"),z=H("Date"),V={}.hasOwnProperty,K=V.toString,j=K.call(Object);function $(t){return null==t}function q(t){for(var e="",r=0,i=t.length;r<i;r++){var a=t[r];Array.isArray(a)?e+=q(a):e+=Z(a)}return e}function Z(t){return $(t)?"":t.toString()}function J(t){if("item"===t.type||"img"===t.type){var e="";return(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),"text"===t.tagName?"<text"+e+">"+t.content+"</text>":"<"+t.tagName+e+"/>"}if("text"===t.type){var r="";return(t.children||[]).forEach((function(t){r+=J(t)})),"<g>"+r+"</g>"}if("dom"===t.type||"geom"===t.type){var i="<g>";t.bb.forEach((function(t){i+=J(t)})),i+="</g><g",t.conClip&&(i+=' clip-path="'+t.conClip+'"'),i+=">",(t.children||[]).forEach((function(t){t.isMask||(i+=J(t))})),i+="</g>";var a=t.opacity,n=t.transform,o=t.visibility,s=t.mask,l=t.overflow,h=t.filter,f=t.mixBlendMode;return"<g"+(1!==a&&void 0!==a?' opacity="'+a+'"':"")+(n?' transform="'+n+'"':"")+' visibility="'+o+'"'+(s?' mask="'+s+'"':"")+(l?' clip-path="'+l+'"':"")+(h||f?' style="':"")+(h?"filter:"+h+";":"")+(f?"mix-blend-mode:"+f+";":"")+(h||f?'"':"")+">"+i+"</g>"}}function Q(t){var e="<"+t.tagName+' id="'+t.uuid+'"';return"mask"===t.tagName||"clipPath"===t.tagName||"filter"===t.tagName||(e+=' gradientUnits="userSpaceOnUse"'),(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),e+=">",(t.children||[]).forEach((function(t){e+=function(t){var e="<"+t.tagName;return(t.props||[]).forEach((function(t){e+=" "+t[0]+'="'+t[1]+'"'})),e+="></"+t.tagName+">"}(t)})),e+="</"+t.tagName+">"}function tt(t,e){for(var r=t.length?t[0]:"",i=1,a=t.length;i<a;i++)r+=e+t[i];return r}function et(t){if(!t||"[object Object]"!==B.call(t))return!1;var e=Object.getPrototypeOf(t);if(!e)return!0;var r=V.call(e,"constructor")&&e.constructor;return"function"==typeof r&&K.call(r)===j}function rt(t){return 1===t.length?"0"+t:t}var it={isObject:G,isString:Y,isFunction:W,isNumber:U,isBoolean:X,isDate:z,isNil:$,isPrimitive:function(t){return it.isNil(t)||it.isBoolean(t)||it.isString(t)||it.isNumber(t)},isAuto:function(t){return $(t)||"auto"===t},isPlainObject:et,stringify:Z,joinSourceArray:function(t){return q(t)},encodeHtml:function(t,e){return e?t.replace(/"/g,"&quot;"):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/ /g,"&nbsp;")},joinVirtualDom:function(t){var e="<defs>";return t.defs.forEach((function(t){e+=Q(t)})),e+="</defs><g>",t.bb.forEach((function(t){e+=J(t)})),e+="</g><g",t.conClip&&(e+=' clip-path="'+t.conClip+'"'),e+=">",(t.children||[]).forEach((function(t){t.isMask||(e+=J(t))})),e+="</g>"},joinVd:J,joinDef:Q,rgba2int:function(t){if(Array.isArray(t))return t;var e=[];if(t&&"transparent"!==t)if("#"===t.charAt(0))3===(t=t.slice(1)).length?(e.push(parseInt(t.charAt(0)+t.charAt(0),16)),e.push(parseInt(t.charAt(1)+t.charAt(1),16)),e.push(parseInt(t.charAt(2)+t.charAt(2),16)),e[3]=1):6===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4),16)),e[3]=1):8===t.length?(e.push(parseInt(t.slice(0,2),16)),e.push(parseInt(t.slice(2,4),16)),e.push(parseInt(t.slice(4,6),16)),e.push(parseInt(t.slice(6),16)/255)):(e[0]=e[1]=e[2]=0,e[3]=1);else{var r=t.match(/rgba?\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)(?:\s*,\s*([\d.]+))?\s*\)/i);r?(e=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],$(r[4])?e[3]=1:e[3]=parseFloat(r[4])):e=[0,0,0,0]}else e=[0,0,0,0];return e},int2rgba:function(t){return!Array.isArray(t)||3!==t.length&&4!==t.length?t||"rgba(0,0,0,0)":(t[0]=Math.floor(Math.max(t[0],0)),t[1]=Math.floor(Math.max(t[1],0)),t[2]=Math.floor(Math.max(t[2],0)),4===t.length?(t[3]=Math.max(t[3],0),"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"):"rgba("+t[0]+","+t[1]+","+t[2]+",1)")},int2invert:function(t){if(Array.isArray(t)){if((t=t.slice(0))[0]=255-t[0],t[1]=255-t[1],t[2]=255-t[2],4===t.length)return"rgba("+tt(t,",")+")";if(3===t.length)return"rgba("+tt(t,",")+",1)"}return"rgba(0,0,0,0)"},arr2hash:function(t){for(var e={},r=0,i=t.length;r<i;r++){var a=t[r];if(Array.isArray(a))e[a[0]]=a[1];else for(var n=Object.keys(a),o=n.length-1;o>=0;o--){var s=n[o];e[s]=a[s]}}return e},hash2arr:function(t){if(Array.isArray(t))return t;for(var e=[],r=Object.keys(t),i=0,a=r.length;i<a;i++){var n=r[i];e.push([n,t[n]])}return e},clone:function e(r){if($(r)||"object"!==t(r))return r;if(r.$$type===L.TYPE_VD||r.$$type===L.TYPE_GM||r.$$type===L.TYPE_CP)return r;if(it.isDate(r))return new Date(r);if(!et(r)&&!Array.isArray(r))return r;var i=Array.isArray(r)?[]:{};return Object.keys(r).forEach((function(t){i[t]=e(r[t])})),i},equalArr:function t(e,r){if(!e||!r)return e===r;if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++){var n=e[i],o=r[i],s=Array.isArray(n),l=Array.isArray(o);if(s&&l){if(!t(n,o))return!1}else{if(s||l)return!1;if(n!==o)return!1}}return!0},equal:function t(e,r){if(e===r)return!0;if(G(e)&&G(r)){for(var i={},a=0,n=Object.keys(e),o=n.length;a<o;a++){var s=n[a];if(!r.hasOwnProperty(s)||!t(e[s],r[s]))return!1;i[s]=!0}for(var l=0,h=Object.keys(r),f=h.length;l<f;l++){var c=h[l];if(!i.hasOwnProperty(c))return!1}}else{if(z(e)&&z(r))return e.getTime()===r.getTime();if(!Array.isArray(e)||!Array.isArray(r))return e===r;if(e.length!==r.length)return!1;for(var u=0,_=e.length;u<_;u++)if(!t(e[u],r[u]))return!1}return!0},extend:function(e,r,i){if(null===r||"object"!==t(r))return e;i||(i=Object.keys(r));for(var a=0,n=i.length;a<n;){var o=i[a];e[o]=r[o],a++}return e},joinArr:tt,extendAnimate:function(t,e){(e.__animationList=t.animationList.splice(0)).forEach((function(t){t.__setTarget(e),(t.assigning||t.finished&&t.__stayEnd())&&t.assignCurrentStyle()})),e.__frameAnimateList=t.__frameAnimateList.splice(0)},transformBbox:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e&&!P.isE(e)){var a=t,n=c(a,4),o=n[0],s=n[1],l=n[2],h=n[3];r&&(o-=r,l+=r),i&&(s-=i,h+=i);var f,u=[l,s,o,h,l,h],_=P.calPoint([o,s],e),d=c(_,4);o=d[0],s=d[1],(f=d[3])&&1!==f&&(o/=f,s/=f);for(var y=o,v=s,p=o,g=s,x=0;x<6;x+=2){var m=u[x],E=u[x+1],b=P.calPoint([m,E],e),T=c(b,4);m=T[0],E=T[1],(f=T[3])&&1!==f&&(m/=f,E/=f),y=Math.min(y,m),p=Math.max(p,m),v=Math.min(v,E),g=Math.max(g,E)}t=[y,v,p,g]}else(r||i)&&((t=t.slice(0))[0]-=r,t[1]-=i,t[2]+=r,t[3]+=i);return t},assignMatrix:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},prefixHex:rt,replaceRgba2Hex:function(t){return(t||"").replace(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+)\s*)?\)/gi,(function(t,e,r,i,a){var n="#"+rt(parseInt(e).toString(16))+rt(parseInt(r).toString(16))+rt(parseInt(i).toString(16));return a&&(n+=rt(Math.floor(255*parseFloat(a)).toString(16))),n}))}},at={flag:!1},nt={alpha:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!0},ot=P.calPoint;function st(t,e,r){var i=t.createShader(e);if(null==i)throw new Error("unable to create shader");if(t.shaderSource(i,r),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error("Failed to compile shader: "+a)}return i}function lt(t,e,r,i){var a=c(t,4),n=a[0],o=a[1],s=a[2],l=a[3];return void 0===s&&(s=0),void 0===l&&(l=1),l&&1!==l&&(n/=l,o/=l,s/=l),o===r?o=0:(o=(o-r)/r,i&&(o=-o)),[(n=n===e?0:(n-e)/e)*l,o*l,s*l,l]}function ht(t,e,r,i,a){var n=t.createTexture();return ft(t,n,r),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),i&&a?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,i,a,0,t.RGBA,t.UNSIGNED_BYTE,e):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),n}function ft(t,e,r){t.activeTexture(t["TEXTURE"+r]),t.bindTexture(t.TEXTURE_2D,e)}var ct={initShaders:function(t,e,r){var i=function(t,e,r){var i=st(t,t.VERTEX_SHADER,e),a=st(t,t.FRAGMENT_SHADER,r);if(!i||!a)return null;var n=t.createProgram();if(!n)return null;if(n.vertexShader=i,n.fragmentShader=a,t.attachShader(n,i),t.attachShader(n,a),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS)){var o=t.getProgramInfoLog(n);throw t.deleteProgram(n),t.deleteShader(a),t.deleteShader(i),new Error("Failed to link program: "+o)}return n}(t,e,r);if(!i)throw new Error("Failed to create program");return t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),i},createTexture:ht,bindTexture:ft,drawTextureCache:function(t,e,r,i,a,n){var o,s=[],l=[],h=[],f=[0],u=[f];e.forEach((function(t,e){var _=c(t,5),d=_[0],y=_[1],v=_[2],p=_[3],g=_[4];if(e){var x=r[d.page.uuid];o!==x&&(f=[0,o=x],u.push(f))}else o=r[d.page.uuid],f[1]=o;var m=d.x,E=d.y,b=d.width,T=d.height,A=d.page,M=d.bbox,R=M[0],S=M[1],O=R+(p||0),C=S+T+(g||0),I=R+b+(p||0),w=S+(g||0),k=c(ot([O,C],v),4),D=k[0],L=k[1],F=k[3],N=c(ot([I,C],v),4),P=N[0],B=N[1],H=N[3],G=c(ot([I,w],v),4),Y=G[0],W=G[1],U=G[3],X=c(ot([O,w],v),4),z=X[0],V=X[1],K=X[3],j=c(lt([D,L,0,F],i,a,n),2);D=j[0],L=j[1];var $=c(lt([P,B,0,H],i,a,n),2);P=$[0],B=$[1];var q=c(lt([Y,W,0,U],i,a,n),2);Y=q[0],W=q[1];var Z=c(lt([z,V,0,K],i,a,n),2);z=Z[0],V=Z[1],s.push(D,L,0,F,z,V,0,K,P,B,0,H,z,V,0,K,P,B,0,H,Y,W,0,U);var J=m/A.width,Q=(E+T)/A.height,tt=(m+b)/A.width,et=E/A.height;l.push(J,Q,J,et,tt,Q,J,et,tt,Q,tt,et),h.push(y,y,y,y,y,y),f[0]++}));var _=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(s),t.STATIC_DRAW);var d=t.getAttribLocation(t.program,"a_position");t.vertexAttribPointer(d,4,t.FLOAT,!1,0,0),t.enableVertexAttribArray(d);var y=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,y),t.bufferData(t.ARRAY_BUFFER,new Float32Array(l),t.STATIC_DRAW);var v=t.getAttribLocation(t.program,"a_texCoords");t.vertexAttribPointer(v,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(v);var p=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,p),t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW);var g=t.getAttribLocation(t.program,"a_opacity");t.vertexAttribPointer(g,1,t.FLOAT,!1,0,0),t.enableVertexAttribArray(g);var x=t.getUniformLocation(t.program,"u_texture"),m=0;u.forEach((function(e){var r=c(e,2),i=r[0],a=r[1];t.uniform1i(x,a),i*=6,t.drawArrays(t.TRIANGLES,m,i),m+=i})),t.deleteBuffer(_),t.deleteBuffer(y),t.deleteBuffer(p),t.disableVertexAttribArray(d),t.disableVertexAttribArray(v),t.disableVertexAttribArray(g)},drawBlur:function(t,e,r,i,a,n,o,s,l,h,f,u,_,d){var y=c(lt([h,l+h,0,1],_,d,!1),2),v=y[0],p=y[1],g=c(lt([s+h,h,0,1],_,d,!1),2),x=g[0],m=g[1],E=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,E),t.bufferData(t.ARRAY_BUFFER,new Float32Array([v,m,v,p,x,m,v,p,x,m,x,p]),t.STATIC_DRAW);var b=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(b,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(b);var T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var A=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(A,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(A);var M=t.getUniformLocation(e,"u_direction");t.uniform2f(M,0,0);var R=t.getUniformLocation(e,"u_texture");t.uniform1i(R,o),t.drawArrays(t.TRIANGLES,0,6),t.bindBuffer(t.ARRAY_BUFFER,E),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);for(var S=100/Math.max(f,u),O=f/u,C=[],I=0;I<3;I++){var w=ht(t,null,o,f,u);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,w,0),f>=u?t.uniform2f(M,S,0):t.uniform2f(M,S*O,0),t.uniform1i(R,n),t.drawArrays(t.TRIANGLES,0,6),C.push(i);var k=ht(t,null,n,f,u);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,k,0),f>=u?t.uniform2f(M,0,S*O):t.uniform2f(M,0,S),t.uniform1i(R,o),t.drawArrays(t.TRIANGLES,0,6),i=k,C.push(w)}return t.deleteBuffer(E),t.deleteBuffer(T),t.disableVertexAttribArray(b),t.disableVertexAttribArray(A),C.forEach((function(e){return t.deleteTexture(e)})),i},drawOverflow:function(t,e,r,i,a,n,o,s){var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var h=t.getAttribLocation(t.programOverflow,"a_position");t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h);var f=r/o,c=i/s,u=(a+r)/o,_=(n+i)/s,d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,new Float32Array([f,c,f,_,u,c,f,_,u,c,u,_]),t.STATIC_DRAW);var y=t.getAttribLocation(t.programOverflow,"a_texCoords");t.vertexAttribPointer(y,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(y);var v=t.getUniformLocation(t.programOverflow,"u_texture");t.uniform1i(v,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(l)},drawMask:function(t,e,r,i){var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var n=t.getAttribLocation(i,"a_position");t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(i,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(i,"u_texture1");t.uniform1i(l,r);var h=t.getUniformLocation(i,"u_texture2");t.uniform1i(h,e),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(o),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)},drawMbm:function(t,e,r,i,a,n){var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var h=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h);var f=t.getUniformLocation(e,"u_texture1");t.uniform1i(f,r);var c=t.getUniformLocation(e,"u_texture2");t.uniform1i(c,i),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(o),t.deleteBuffer(l),t.disableVertexAttribArray(s),t.disableVertexAttribArray(h)},drawCm:function(t,e,r,i){var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var n=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n);var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var s=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(s);var l=t.getUniformLocation(e,"u_texture");t.uniform1i(l,r);var h=t.getUniformLocation(e,"u_m");t.uniform1fv(h,new Float32Array(i)),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(a),t.deleteBuffer(o),t.disableVertexAttribArray(n),t.disableVertexAttribArray(s)},drawDropShadow:function(t,e,r,i,a,n,o,s,l,h){var f=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),t.STATIC_DRAW);var c=t.getAttribLocation(e,"a_position");t.vertexAttribPointer(c,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(c);var u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),t.STATIC_DRAW);var _=t.getAttribLocation(e,"a_texCoords");t.vertexAttribPointer(_,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(_);var d=t.getUniformLocation(e,"u_texture");t.uniform1i(d,o);var y=t.getUniformLocation(e,"u_color");return t.uniform1fv(y,new Float32Array([h[0]/255,h[1]/255,h[2]/255,h[3]])),t.drawArrays(t.TRIANGLES,0,6),t.deleteBuffer(f),t.deleteBuffer(u),t.disableVertexAttribArray(c),t.disableVertexAttribArray(_),i}},ut=1e3/60,_t={},dt={},yt=[],vt=[],pt="function"==typeof OffscreenCanvas&&it.isFunction(OffscreenCanvas.prototype.getContext);function gt(t,e,r,i,a){var n,o;if(t)n=i[t]?i[t]:i[t]=!at.flag&&pt?new OffscreenCanvas(e,r):document.createElement("canvas");else{var s=i===_t?yt:vt;n=s.length?s.pop():!at.flag&&pt?new OffscreenCanvas(e,r):document.createElement("canvas")}return n.width=e,n.height=r,at.flag&&(n.style.width=e+"px",n.style.height=r+"px",n.setAttribute("type",i===_t?"canvas":"webgl"),t&&n.setAttribute("key",t),a&&n.setAttribute("message",a),document.body.appendChild(n)),o=i===_t?n.getContext("2d"):n.getContext("webgl",nt)||n.getContext("experimental-webgl",nt),{canvas:n,ctx:o,draw:function(){},enabled:!0,available:!0,release:function(){!t&&this.available&&(i===_t?yt.push(this.canvas):vt.push(this.canvas)),this.available=!1}}}var xt,mt,Et={},bt={},Tt={},At={};function Mt(){(xt=document.createElement("div")).style.position="absolute",xt.style.left="99999px",xt.style.top="-99999px",xt.style.visibility="hidden",xt.style.whiteSpace="nowrap",document.body.appendChild(xt)}var Rt={measureTextSync:function(t,e,r,i,a){return xt||Mt(),xt.style.fontFamily=e,xt.style.fontSize=r+"px",xt.style.fontWeight=i,xt.style.writingMode=a?"vertical-lr":"horizontal-tb",xt.innerHTML=t.replace(/</g,"&lt;").replace(/[ \n]/g,"&nbsp;"),a?parseFloat(window.getComputedStyle(xt,null).height):parseFloat(window.getComputedStyle(xt,null).width)},measureTextListMax:function(t,e,r,i){xt||Mt(),xt.style.fontFamily=e,xt.style.fontSize=r+"px",xt.style.fontWeight=i;for(var a="",n=0,o=t.length;n<o;n++)a+='<span style="position:absolute">'+t.charAt(n).replace("<","&lt;").replace(/[ \n]/,"&nbsp;")+"</span>";xt.innerHTML=a;for(var s=0,l=xt.childNodes,h=0,f=l.length;h<f;h++){var c=l[h];s=Math.max(s,parseFloat(window.getComputedStyle(c,null).width))}return s},IMG:Et,INIT:0,LOADED:2,LOADING:1,measureImg:function(t,e){if(Array.isArray(t)){if(!t.length)return e();var r=0,i=t.length,a=[];t.forEach((function(t,n){Rt.measureImg(t,(function(t){a[n]=t,++r===i&&e(a)}))}))}else{if(!t||!it.isString(t))return Rt.error("Measure img invalid: "+t),void(e&&e({state:2,success:!1,url:t}));var n=Et[t]=Et[t]||{state:0,task:[]};if(2===n.state)e&&e(n);else if(1===n.state)e&&n.task.push(e);else{n.state=1,e&&n.task.push(e);var o=new Image;if(o.onload=function(){n.state=2,n.success=!0,n.width=o.width,n.height=o.height,n.source=o,n.url=t,n.task.splice(0).forEach((function(t){return t(n)}))},o.onerror=function(e){n.state=2,n.success=!1,n.url=t,n.task.splice(0).forEach((function(t){return t(n)}))},"data:"!==t.substr(0,5)){var s=/^(?:\w+:)?\/\/([^/:]+)/.exec(t);s&&("undefined"!=typeof location&&location.hostname===s[1]||(o.crossOrigin="anonymous"))}o.src=t,at.flag&&"undefined"!=typeof document&&document.body.appendChild(o)}}},warn:function(t){console.warn(t)},error:function(t){console.error(t)},requestAnimationFrame:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e;if(t)return"undefined"!=typeof requestAnimationFrame?(Rt.requestAnimationFrame=requestAnimationFrame.bind(window),e=requestAnimationFrame(t)):(e=setTimeout(t,ut),Rt.requestAnimationFrame=function(t){return setTimeout(t,ut)}),e})),cancelAnimationFrame:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e;return"undefined"!=typeof cancelAnimationFrame?(Rt.cancelAnimationFrame=cancelAnimationFrame.bind(window),e=cancelAnimationFrame(t)):(e=clearTimeout(t),Rt.cancelAnimationFrame=function(t){return clearTimeout(t)}),e})),now:function(){return"undefined"!=typeof performance?(Rt.now=function(){return Math.floor(performance.now())},Math.floor(performance.now())):(Rt.now=Date.now.bind(Date),Date.now())},hasCacheCanvas:function(t){return t&&_t.hasOwnProperty(t)},getCacheCanvas:function(t,e,r,i){return function(t,e,r,i){return gt(t,e,r,_t,i)}(r,t,e,i)},releaseCacheCanvas:function(t){yt.push(t)},delCacheCanvas:function(t){t&&delete _t[t]},hasCacheWebgl:function(t){return t&&dt.hasOwnProperty(t)},getCacheWebgl:function(t,e,r,i){return function(t,e,r,i){return gt(t,e,r,dt,i)}(r,t,e,i)},releaseCacheWebgl:function(t){vt.push(t)},delCacheWebgl:function(t){t&&delete dt[t]},isDom:function(t){if(t){if(it.isString(t))return!0;if("undefined"!=typeof window&&window.Element&&t instanceof window.Element)return!0;if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas)return!0;if("undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas)return!0;if(it.isFunction(t.getElementsByTagName))return!0}return!1},isWebGLTexture:function(t){if(t&&"undefined"!=typeof WebGLTexture)return t instanceof WebGLTexture},defaultFontFamily:"arial",getFontCanvas:function(){return Rt.getCacheCanvas(16,16,"__$$CHECK_SUPPORT_FONT_FAMILY$$__")},checkSupportFontFamily:function(t){if((t=t.toLowerCase())===this.defaultFontFamily)return!0;if(At.hasOwnProperty(t))return At[t];var e=Rt.getFontCanvas(),r=e.ctx;r.textAlign="center",r.fillStyle="#000",r.textBaseline="middle",mt||(r.clearRect(0,0,16,16),r.font="16px "+this.defaultFontFamily,r.fillText("a",8,8),e.draw(),mt=r.getImageData(0,0,16,16).data),r.clearRect(0,0,16,16),/\s/.test(t)&&(t='"'+t.replace(/"/g,'\\"')+'"'),r.font="16px "+t+","+this.defaultFontFamily,r.fillText("a",8,8),e.draw();for(var i=r.getImageData(0,0,16,16).data,a=0,n=i.length;a<n;a++)if(mt[a]!==i[a])return At[t]=!0;return At[t]=!1},loadFont:function(t,e,r){if(it.isFunction(e)&&(r=e,e=t),Array.isArray(e)){if(!e.length)return r();var i=0,a=e.length,n=[];e.forEach((function(t,e){Rt.loadFont(t.fontFamily,t.url,(function(t){n[e]=t,++i===a&&r(n)}))}))}else{if(!e||!it.isString(e))return Rt.error("Load font invalid: "+e),void(r&&r({state:2,success:!1,url:e}));t||(t=e);var o=bt[e]=bt[e]||{state:0,task:[]};if(2===o.state)r&&r(o);else if(1===o.state)r&&o.task.push(r);else{o.state=1,r&&o.task.push(r),e instanceof ArrayBuffer||/url\(/.test(e)||(e="url(".concat(e,")"));var s=new FontFace(t,e);s.load().then((function(){document.fonts.add(s),o.state=2,o.success=!0,o.url=e,o.task.splice(0).forEach((function(t){return t(o)}))})).catch((function(){o.state=2,o.success=!1,o.url=e,o.task.splice(0).forEach((function(t){return t(o)}))}))}}},loadComponent:function(t,e){if(Array.isArray(t)){if(!t.length)return e();var r=0,i=t.length,a=[];t.forEach((function(t,n){Rt.loadComponent(t,(function(t){a[n]=t,++r===i&&e(a)}))}))}else{if(!t||!it.isString(t))return Rt.error("Load component invalid: "+t),void(e&&e({state:2,success:!1,url:t}));var n=Tt[t]=Tt[t]||{state:0,task:[]};if(2===n.state)e&&e(n);else if(1===n.state)e&&n.task.push(e);else{n.state=1,e&&n.task.push(e);var o=document.createElement("script");o.src=t,o.async=!0,o.onload=function(){n.state=2,n.success=!0,n.url=t,n.task.splice(0).forEach((function(t){return t(n)})),document.head.removeChild(o)},o.onerror=function(){n.state=2,n.success=!1,n.url=t,n.task.splice(0).forEach((function(t){return t(n)})),document.head.removeChild(o)},document.head.appendChild(o)}}}},St=it.isString,Ot={},Ct={info:{arial:{lhr:1.14990234375,blr:.9052734375,lgr:.03271484375},helvetica:{lhr:1.14990234375,blr:.927734375,lgr:.00390625},verdana:{lhr:1.21533203125,blr:1.00537109375},tahoma:{lhr:1.20703125,blr:1.00048828125},georgia:{lhr:1.13623046875,blr:.9169921875},"courier new":{lhr:1.1328125,blr:.83251953125},"pingfang sc":{lhr:1.4,blr:1.06},simsun:{lhr:1.4,blr:1.06}},support:function(t){return this.info.hasOwnProperty(t)&&this.info[t].checked},register:function(t,e,r){t=t.toLowerCase(),St(e)||e instanceof ArrayBuffer||(r=e,e=null);var i=this.info;if(i[t]=i[t]||{},e&&!i[t].url&&(i[t].url=e,Rt.loadFont(t,e,(function(e){if(i[t].success=e.success,e.success)for(var r=Ot[t]||[];r.length;){r.pop().__emitFontRegister(t)}}))),r&&!i[t].lhr){var a=r||{},n=a.emSquare,o=void 0===n?2048:n,s=a.ascent,l=void 0===s?1854:s,h=a.descent,f=void 0===h?434:h,c=a.lineGap,u=void 0===c?0:c;Object.assign(i[t],{lhr:(l+f+u)/o,blr:l/o})}},hasRegister:function(t){return this.info.hasOwnProperty(t)&&this.info[t].hasOwnProperty("lhr")},hasLoaded:function(t){return this.info.hasOwnProperty(t)&&this.info[t].success},onRegister:function(t,e){(Ot[t]=Ot[t]||[]).push(e)},offRegister:function(t,e){var r=Ot[t]=Ot[t]||[],i=r.indexOf(e);i>-1&&r.splice(i,1)}};Ct.info["宋体"]=Ct.info.simsun,Ct.info.pingfang=Ct.info["pingfang sc"];var It={position:"static",display:"block",top:"auto",right:"auto",bottom:"auto",left:"auto",marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,fontSize:"inherit",fontFamily:"inherit",color:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",backgroundImage:null,backgroundColor:"transparent",backgroundSize:"auto",backgroundRepeat:"repeat",backgroundPositionX:0,backgroundPositionY:0,backgroundClip:"borderBox",borderTopWidth:0,borderRightWidth:0,borderBottomWidth:0,borderLeftWidth:0,borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderTopStyle:"none",borderRightStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,width:"auto",height:"auto",flexGrow:0,flexShrink:1,flexBasis:"auto",flexDirection:"row",flexWrap:"nowrap",order:0,justifyContent:"flexStart",alignItems:"stretch",alignSelf:"auto",alignContent:"stretch",textAlign:"inherit",letterSpacing:"inherit",transformOrigin:"center",visibility:"inherit",opacity:1,zIndex:0,transform:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,rotateX:0,rotateY:0,rotateZ:0,rotate3d:"0, 0, 0, 0",perspective:0,perspectiveOrigin:"center",filter:null,boxShadow:null,pointerEvents:"inherit",overflow:"visible",mixBlendMode:"normal",whiteSpace:"inherit",textOverflow:"clip",lineClamp:0,textStrokeWidth:"inherit",textStrokeColor:"inherit",textStrokeOver:"inherit",writingMode:"inherit"},wt={fill:"transparent",stroke:"#000",strokeWidth:1,strokeDasharray:"",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:4,fillRule:"nonzero"},kt=[],Dt=[];Object.keys(It).forEach((function(t){Dt.push(t);var e=It[t];kt.push({k:t,v:e})}));var Lt=[],Ft=[];Object.keys(wt).forEach((function(t){Ft.push(t);var e=wt[t];Lt.push({k:t,v:e})}));var Nt={get fontFamily(){return Rt.defaultFontFamily},fontSize:16,fontWeight:400,fontStyle:"normal",color:"#000",textAlign:"left",visibility:"visible",pointerEvents:"auto",textStrokeColor:"#000",textStrokeWidth:0,textStrokeOver:"none",writingMode:"horizontalTb"},Pt=[];Object.keys(Nt).forEach((function(t){Pt.push(t)}));var Bt={DOM:It,GEOM:wt,isValid:function(t){return It.hasOwnProperty(t)||wt.hasOwnProperty(t)},DOM_KEY_SET:Dt,GEOM_KEY_SET:Ft,DOM_ENTRY_SET:kt,GEOM_ENTRY_SET:Lt,INHERIT:Nt,INHERIT_KEY_SET:Pt,VALID_STRING_VALUE:{position:["static","relative","absolute"],display:["block","inlineBlock","inline","flex","none"],flexDirection:["row","column","rowReverse","columnReverse"],flexWrap:["wrap","wrapReverse","nowrap"],justifyContent:["flexStart","center","flexEnd","spaceBetween","spaceAround","spaceEvenly"],alignItems:["stretch","flexStart","center","flexEnd","baseline"],alignSelf:["auto","stretch","flexStart","center","flexEnd","baseline"],overflow:["visible","hidden"],mixBlendMode:["normal","multiply","screen","overlay","darken","lighten","colorDodge","colorBurn","hardLight","softLight","difference","exclusion","hue","saturation","color","luminosity"],borderTopStyle:["solid","dashed","dotted"],borderRightStyle:["solid","dashed","dotted"],borderBottomStyle:["solid","dashed","dotted"],borderLeftStyle:["solid","dashed","dotted"],backgroundClip:["borderBox","paddingBox","contentBox"],textOverflow:["clip","ellipsis"],alignContent:["stretch","flexStart","center","flexEnd","spaceBetween","spaceAround"]}},Ht={position:/(([-+]?[\d.]+[pxremvwhina%]*)|(left|top|right|bottom|center)){1,2}/gi,gradient:/\b(\w+)-?gradient\((.+)\)/i,img:/(?:\burl\((['"]?)(.*?)\1\))|(?:\b((data:)))/i};var Gt={dotProduct:function(t,e,r,i){return t*r+e*i},crossProduct:function(t,e,r,i){return t*i-r*e}},Yt=4*(Math.sqrt(2)-1)/3,Wt=Gt.crossProduct,Ut=P.calPoint,Xt=P.isE,zt=b.STYLE_KEY,Vt=zt.WIDTH,Kt=zt.HEIGHT,jt=zt.TRANSFORM_ORIGIN;function $t(t){return t*=.5,(1-Math.cos(t))/Math.sin(t)*4/3}function qt(t,e,r){for(var i,a=c(r[0],2),n=a[0],o=a[1],s=c(r[0],2),l=s[0],h=s[1],f=r.length,u=1;u<f;u++){var _=c(r[u],2),d=_[0],y=_[1];n=Math.max(n,d),o=Math.max(o,y),l=Math.min(l,d),h=Math.min(h,y)}if(t<l||e<h||t>n||e>o)return!1;for(var v=0,p=r.length;v<p;v++){var g=c(r[v],2),x=g[0],m=g[1],E=c(r[(v+1)%p],2),b=E[0],T=E[1],A=Wt(b-x,T-m,t-x,e-m);if(0!==A)if(A=A>0?1:0,void 0===i)i=A;else if(i^A)return!1}return!0}function Zt(t,e,r,i){return Math.sqrt(Math.pow(r-t,2)+Math.pow(i-e,2))}function Jt(t,e,r){var i=c(t,4),a=i[0],n=i[1],o=i[2],s=i[3],l=c(e,4),h=l[0],f=l[1],u=l[2],_=l[3];if(r){if(a>u||n>_||h>o||f>s)return!1}else if(a>=u||n>=_||h>=o||f>=s)return!1;return!0}function Qt(t,e,r){var i=r.matrix,a=void 0===i?[1,0,0,1,0,0]:i,n=r.computedStyle,o=void 0===n?{}:n,s=o[Vt],l=o[Kt],h=o[jt],f=c(h=void 0===h?[.5*s,.5*l]:h,2),u=f[0],_=f[1],d=c(Ut([t*s-u,e*l-_],a),2);return[(t=d[0])+u,(e=d[1])+_]}function te(t){return t*Math.PI/180}var ee={pointInConvexPolygon:qt,pointInQuadrilateral:function(t,e,r,i,a,n,o,s,l,h,f){if(f&&!Xt(f)){var u,_,d,y,v=c(Ut([r,i],f),4);r=v[0],i=v[1],u=v[3];var p=c(Ut([a,n],f),4);a=p[0],n=p[1],_=p[3];var g=c(Ut([l,h],f),4);l=g[0],h=g[1],d=g[3];var x=c(Ut([o,s],f),4);return o=x[0],s=x[1],u&&1!==u&&(r/=u,i/=u),_&&1!==_&&(a/=_,n/=_),d&&1!==d&&(l/=d,h/=d),(y=x[3])&&1!==y&&(o/=y,s/=y),qt(t,e,[[r,i],[a,n],[o,s],[l,h]])}return t>=r&&e>=i&&t<=o&&e<=s},d2r:te,r2d:function(t){return 180*t/Math.PI},H:Yt,h:$t,angleBySide:function(t,e,r){var i=(Math.pow(e,2)+Math.pow(r,2)-Math.pow(t,2))/(2*e*r);return Math.acos(i)},sideByAngle:function(t,e,r){var i=Math.cos(t);return Math.sqrt(Math.pow(e,2)+Math.pow(r,2)-2*e*r*i)},pointsDistance:Zt,triangleIncentre:function(t,e,r,i,a,n){var o=Zt(r,i,a,n),s=Zt(t,e,a,n),l=Zt(t,e,r,i);return[(o*t+s*r+l*a)/(o+s+l),(o*e+s*i+l*n)/(o+s+l)]},ellipsePoints:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,a=r*Yt,n=i===r?a:i*Yt;return[[t-r,e],[t-r,e-n,t-a,e-i,t,e-i],[t+a,e-i,t+r,e-n,t+r,e],[t+r,e+n,t+a,e+i,t,e+i],[t-a,e+i,t-r,e+n,t-r,e]]},sectorPoints:function t(e,r,i,a,n){if(a>n){var o=[n,a];a=o[0],n=o[1]}if(a===n)return[];var s=[],l=Math.floor(a/90),h=Math.floor(n/90);if(l===h||h-l==1&&n%90==0){var f=$t(te(Math.abs(a-n)))*i,c=Math.sqrt(Math.pow(i,2)+Math.pow(f,2)),u=Math.atan(f/i);if(l<90){var _=Math.sin(te(a))*i,d=Math.cos(te(a))*i,y=[e+_,r-d],v=u+te(a),p=[e+(_=Math.sin(v)*c),r-(d=Math.cos(v)*c)],g=[e+(_=Math.sin(te(n))*i),r-(d=Math.cos(te(n))*i)];v=te(n)-u;var x=[e+(_=Math.sin(v)*c),r-(d=Math.cos(v)*c)];s.push(y),s.push(p.concat(x).concat(g))}else if(l<180){var m=Math.cos(te(a-90))*i,E=Math.sin(te(a-90))*i,b=[e+m,r+E],T=u+te(a-90),A=[e+(m=Math.cos(T)*c),r+(E=Math.sin(T)*c)],M=[e+(m=Math.cos(te(n-90))*i),r+(E=Math.sin(te(n-90))*i)];T=te(n-90)-u;var R=[e+(m=Math.cos(T)*c),r+(E=Math.sin(T)*c)];s.push(b),s.push(A.concat(R).concat(M))}else if(l<270){var S=Math.sin(te(a-180))*i,O=Math.cos(te(a-180))*i,C=[e-S,r+O],I=u+te(a-180),w=[e-(S=Math.sin(I)*c),r+(O=Math.cos(I)*c)],k=[e-(S=Math.sin(te(n-180))*i),r+(O=Math.cos(te(n-180))*i)];I=te(n-180)-u;var D=[e-(S=Math.sin(I)*c),r+(O=Math.cos(I)*c)];s.push(C),s.push(w.concat(D).concat(k))}else{var L=Math.cos(te(a-270))*i,F=Math.sin(te(a-270))*i,N=[e-L,r+F],P=u+te(a-270),B=[e-(L=Math.cos(P)*c),r+(F=Math.sin(P)*c)],H=[e-(L=Math.cos(te(n-270))*i),r+(F=Math.sin(te(n-270))*i)];P=te(n-270)-u;var G=[e-(L=Math.cos(P)*c),r+(F=Math.sin(P)*c)];s.push(N),s.push(B.concat(G).concat(H))}}else{for(var Y=l,W=[];Y<=h;Y++)if(0===Y){var U=t(e,r,i,a,90);W.push(U)}else if(1===Y){if(l===Y||n>90){var X=t(e,r,i,a<90?90:a,n>180?180:n);W.push(X)}}else if(2===Y){if(l===Y||n>180){var z=t(e,r,i,a<180?180:a,n>270?270:n);W.push(z)}}else if(3===Y&&(l===Y||n>270)){var V=t(e,r,i,a<270?270:a,n);W.push(V)}s=W[0];for(var K=1,j=W.length;K<j;K++)s.push(W[K][1])}return s},getRectsIntersection:function(t,e){if(!Jt(t,e))return null;var r=c(t,4),i=r[0],a=r[1],n=r[2],o=r[3],s=c(e,4),l=s[0],h=s[1],f=s[2],u=s[3];return[Math.max(i,l),Math.max(a,h),Math.min(n,f),Math.min(o,u)]},isRectsOverlap:Jt,isRectsInside:function(t,e,r){var i=c(t,4),a=i[0],n=i[1],o=i[2],s=i[3],l=c(e,4),h=l[0],f=l[1],u=l[2],_=l[3];if(r){if(a<=h&&n<=f&&o>=u&&s>=_)return!0}else if(a<h&&n<f&&o>u&&s>_)return!0;return!1},calCoordsInNode:Qt,calPercentInNode:function(t,e,r){var i,a,n=r.computedStyle,o=n[Vt],s=n[Kt],l=c(n[jt],2),h=l[0],f=l[1],u=Math.atan((s-f)/(o-h)),_=c(Qt(1,1,r),2),d=_[0],y=_[1];a=d>=h&&y>=f?(i=h===d?-Math.atan(1/0):Math.atan((y-f)/(d-h)))-u:d>=h&&y<f?(i=h===d?-Math.atan(1/0):Math.atan((f-y)/(d-h)))+u:d<h&&y>=f?(i=Math.atan((y-f)/(h-d)))-u:d<h&&y<f?u>=(i=Math.atan((y-f)/(d-h)))?i+Math.PI-u:-(a=Math.PI-i+u):0;var v,p=Math.sqrt(Math.pow(t-h,2)+Math.pow(e-f,2));return v=t>=h&&e>=f?h===t?-Math.atan(1/0):Math.atan((e-f)/(t-h)):t>=h&&e<f?h===t?-Math.atan(1/0):-Math.atan((e-f)/(h-t)):t<h&&e>=f?Math.PI-Math.atan((e-f)/(h-t)):Math.atan((e-f)/(t-h))-Math.PI,(v-=a)>Math.PI?(v-=Math.PI,[(h-p*Math.cos(v))/o,(f-p*Math.sin(v))/s]):v>.5*Math.PI?(v=Math.PI-v,[(h-p*Math.cos(v))/o,(f+p*Math.sin(v))/s]):v>=0?[(h+p*Math.cos(v))/o,(f+p*Math.sin(v))/s]:v>=.5*-Math.PI?(v=-v,[(h+p*Math.cos(v))/o,(f-p*Math.sin(v))/s]):v>=-Math.PI?(v=Math.PI+v,[(h-p*Math.cos(v))/o,(f-p*Math.sin(v))/s]):(v=-Math.PI-v,[(h-p*Math.cos(v))/o,(f+p*Math.sin(v))/s])},pointOnCircle:function(t,e,r,i){return i>=270?(i=te(i-=270),[t-Math.cos(i)*r,e-Math.sin(i)*r]):i>=180?(i=te(i-=180),[t-Math.sin(i)*r,e+Math.cos(i)*r]):i>=90?(i=te(i-=90),[t+Math.cos(i)*r,e+Math.sin(i)*r]):(i=te(i),[t+Math.sin(i)*r,e-Math.cos(i)*r])}};var re={getConicGradientImage:function(t,e,r,i,a,n){if(a.length<2)throw new Error("Conic gradient should recieve at least 2 gradient statements (start line and end line).");r=Math.floor(r),i=Math.floor(i);for(var o=function(r,i){var a=r-t,n=e-i;if(0===a)return n<0?1*Math.PI:0;if(0===n)return a<0?1.5*Math.PI:.5*Math.PI;var o=Math.atan(n/a);return a>0?.5*Math.PI-o:a<0?1.5*Math.PI-o:void 0},s=a.map((function(t){return{color:t[0],angle:t[1]*Math.PI*2}})),l=0;l<i;l++)for(var h=function(t){var e=o(t,l),i=void 0;for(i=0;i<s.length&&s[i].angle<=e;i++);var a=s[i-1],h=s[i];if(!a||!h)return"continue";var f=(e-a.angle)/(h.angle-a.angle),c=h.color.map((function(t,e){return f*(t-a.color[e])+a.color[e]})),u=4*(t+l*r);n[u]=c[0],n[u+1]=c[1],n[u+2]=c[2],n[u+3]=Math.min(255,255*c[3])},f=0;f<r;f++)h(f);return n}},ie=it.int2rgba;function ae(t){var e="";return t.forEach((function(t){var r=c(t,2),i=r[0],a=r[1];"blur"===i?e+="blur(".concat(a,"px)"):"dropShadow"===i?e+="drop-shadow(".concat(a[0],"px ").concat(a[1],"px ").concat(a[2],"px ").concat(ie(a[4]),")"):"hueRotate"===i?e+="hue-rotate(".concat(a,"deg)"):"saturate"!==i&&"brightness"!==i&&"grayscale"!==i&&"contrast"!==i&&"sepia"!==i&&"invert"!==i||(e+="".concat(i,"(").concat(a,"%)"))})),e}var ne={canvasPolygon:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(e&&e.length){for(var a=-1,n=0,o=e.length;n<o;n++){var s=e[n];if(Array.isArray(s)&&s.length){a=n;break}}if(-1!==a){var l=e[a];t.moveTo(l[0]+r,l[1]+i),4===l.length?t.moveTo(l[2]+r,l[3]+i):6===l.length&&t.moveTo(l[4]+r,l[5]+i);for(var h=a+1,f=e.length;h<f;h++){var c=e[h];Array.isArray(c)&&(2===c.length?t.lineTo(c[0]+r,c[1]+i):4===c.length?t.quadraticCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i):6===c.length&&t.bezierCurveTo(c[0]+r,c[1]+i,c[2]+r,c[3]+i,c[4]+r,c[5]+i))}}}},svgPolygon:function(t){if(!t||!t.length)return"";for(var e=-1,r=0,i=t.length;r<i;r++){var a=t[r];if(Array.isArray(a)&&a.length){e=r;break}}if(-1===e)return"";var n=t[e],o="M"+n[0]+","+n[1];4===n.length?o="M"+n[2]+","+n[3]:6===n.length&&(o="M"+n[4]+","+n[5]);for(var s=e+1,l=t.length;s<l;s++){var h=t[s];Array.isArray(h)&&(2===h.length?o+="L"+h[0]+","+h[1]:4===h.length?o+="Q"+h[0]+","+h[1]+" "+h[2]+","+h[3]:6===h.length&&(o+="C"+h[0]+","+h[1]+" "+h[2]+","+h[3]+" "+h[4]+","+h[5]))}return o},canvasLine:function(t,e,r,i,a,n,o,s){var l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;return t.moveTo(e+l,r+h),3===s?(t.bezierCurveTo(n[0]+l,n[1]+h,o[0]+l,o[1],i+l,a+h),2):2===s?(t.quadraticCurveTo(o[0]+l,o[1]+h,i+l,a+h),2):1===s?(t.quadraticCurveTo(n[0]+l,n[1]+h,i+l,a+h),2):(t.lineTo(i+l,a+h),1)},svgLine:function(t,e,r,i,a,n,o){return 3===o?"M"+t+","+e+"C"+a[0]+","+a[1]+" "+n[0]+","+n[1]+" "+r+","+i:2===o?"M"+t+","+e+"Q"+n[0]+","+n[1]+" "+r+","+i:1===o?"M"+t+","+e+"Q"+a[0]+","+a[1]+" "+r+","+i:"M"+t+","+e+"L"+r+","+i},canvasFilter:ae,svgFilter:ae},oe=ee.H,se=D.PX,le=D.PERCENT,he=D.REM,fe=D.VW,ce=D.VH,ue=D.VMAX,_e=D.VMIN,de=ne.canvasPolygon,ye=ne.svgPolygon,ve=b.STYLE_KEY,pe=ve.BORDER_LEFT_WIDTH,ge=ve.BORDER_TOP_WIDTH,xe=ve.BORDER_BOTTOM_WIDTH,me=ve.PADDING_LEFT,Ee=ve.PADDING_BOTTOM,be=ve.PADDING_TOP,Te=ve.BORDER_TOP_LEFT_RADIUS,Ae=ve.BORDER_TOP_RIGHT_RADIUS,Me=ve.BORDER_BOTTOM_LEFT_RADIUS,Re=ve.BORDER_BOTTOM_RIGHT_RADIUS,Se=ve.FONT_SIZE;function Oe(t,e,r,i,a,n,o,s){var l=1,h=1,f=1;t:for(var c=n;c>=a;c--)for(var u=s;u>=o;u--){var _=c+u,d=Math.floor((t+u)/_),y=u;if(d*_<u+t)if((y=(t-d*c)/(d-1))>s)continue;if(_=c+y,e>1&&e>c){if(e%_>c)continue;if(r>1)if((e+i)%_>c)continue}if(r>1)if((e+i)%_>c)continue;d>0&&(l=d,h=c,f=y);break t}return{n:l,ps:h,pd:f}}function Ce(t,e,r,i,a,n){var o=a-e,s=i-r,l=r-e,h=a-i;if("dotted"===t)return Oe(o,l,h,s,n,n,Math.max(1,.25*n),2*n);var f=Oe(o,l,h,s,n,3*n,Math.max(1,.25*n),2*n),c=f.n,u=f.ps,_=f.pd;return 1===c?Oe(o,l,h,s,n,n,Math.max(1,.25*n),2*n):{n:c,ps:u,pd:_}}function Ie(t,e,r,i,a,n,o,s,l,h,f,u,_,d){var y=c(_,2),v=y[0],p=y[1],g=c(d,2),x=g[0],m=g[1];if(!(v&&p||x&&m))return u;for(var E=a+v-(a-i),b=n-x+(o-n),T=[],A=[],M=[],R=0,S=u.length;R<S;R++){var O=u[R];if(O[1][0]<E)T.push(O);else if(O[0][0]>b)M.push(O);else if(O[1][0]>b&&O[0][0]<E){var C=E<a?s+Math.tan(e)*(E-i):l,I=b>n?s+Math.tan(r)*(o-b):l;T.push([O[0],[E,s],[E,C],O[3]]),E<b&&(E>a&&b<n?A.push([[E,s],[b,s],[b,l],[E,l]]):E>a?(A.push([[E,s],[n,s],[n,l],[E,l]]),A.push([[n,s],[b,s],[b,I],[n,l]])):b<n?(A.push([[E,s],[a,s],[a,l],[E,C]]),A.push([[a,s],[b,s],[b,l],[a,l]])):(A.push([[E,s],[a,s],[a,l],[E,C]]),A.push([[a,s],[n,s],[n,l],[a,l]]),A.push([[n,s],[b,s],[b,I],[n,l]]))),M.push([[b,s],O[1],O[2],[b,I]])}else if(O[1][0]>b){var w=b>n?s+Math.tan(r)*(o-b):l;A.push([O[0],[b,s],[b,w],O[3]]),M.push([[b,s],O[1],O[2],[b,w]])}else if(O[0][0]<E){var k=E<a?s+Math.tan(e)*(E-i):l;T.push([O[0],[E,s],[E,k],O[3]]),A.push([[E,s],O[1],O[2],[E,k]])}else A.push(O)}if(T.length){var D,L,F,N,P,B=v>a-i&&t<p,H=Math.atan((a-i)/(l-s)),G=p,Y=G/v,W=s+p,U=p-(l-s),X=U/(v-(a-i)),z=we(T[0][0],T[0][1],E,W,Y,G,!0,Math.tan(H)*G),V=c(z[0],2);if(D=V[0],L=V[1],B){var K=c((P=we(T[0][3],T[0][2],E,W,X,U,!0,Math.tan(H)*U))[0],2);F=K[0],N=K[1]}T.forEach((function(t,e){var r,i;0===e?(r=z,B&&(i=P)):(r=we(t[0],t[1],E,W,Y,G),B&&(i=we(t[3],t[2],E,W,X,U)));for(var a=0,n=r.length;a<n;a++)We(r[a],D,L,0);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),B){for(var o=0,s=i.length;o<s;o++)We(i[o],F,N,0);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}))}var j=M.length;if(j){var $,q,Z,J,Q,tt=x>o-n&&t<m,et=Math.atan((o-n)/(l-s)),rt=m,it=rt/x,at=s+m,nt=m-(l-s),ot=nt/(x-(o-n)),st=ke(M[j-1][0],M[j-1][1],b,at,it,rt,!0,Math.tan(et)*rt),lt=c(st[st.length-1],2);if($=lt[0],q=lt[1],tt){var ht=c((Q=ke(M[j-1][3],M[j-1][2],b,at,ot,nt,!0,Math.tan(et)*nt))[Q.length-1],2);Z=ht[0],J=ht[1]}M.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=ke(t[0],t[1],b,at,it,rt),tt&&(i=ke(t[3],t[2],b,at,ot,nt)));for(var a=0,n=r.length;a<n;a++)We(r[a],$,q,1);if(t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3])),tt){for(var o=0,s=i.length;o<s;o++)We(i[o],Z,J,1);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}}))}return T.concat(A).concat(M)}function we(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(-_+r)*a,x=(-v+r)*a,m=Math.atan(x/(i-p)),E=r-Math.sin(m)*n/a,b=i-Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,f=i-Math.sin(S)*n}else l=Math.atan(g/(i-d)),h=r-Math.sin(l)*n/a,f=i-Math.cos(l)*n;if(l===m)return[[h,f]];var O=ee.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=l-I,k=m+I;return[[h,f],[r-Math.sin(w)*C/a,i-Math.cos(w)*C],[r-Math.sin(k)*C/a,i-Math.cos(k)*C],[E,b]]}function ke(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(_-r)*a,x=(v-r)*a,m=Math.atan(g/(i-d)),E=r+Math.sin(m)*n/a,b=i-Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,f=i-Math.sin(S)*n}else l=Math.atan(x/(i-p)),h=r+Math.sin(l)*n/a,f=i-Math.cos(l)*n;if(m===l)return[[E,b]];var O=ee.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=m+I,k=l-I;return[[E,b],[r+Math.sin(w)*C/a,i-Math.cos(w)*C],[r+Math.sin(k)*C/a,i-Math.cos(k)*C],[h,f]]}function De(t,e,r,i,a,n,o,s,l,h,f,u,_,d){var y=c(_,2),v=y[0],p=y[1],g=c(d,2),x=g[0],m=g[1];if(!(v&&p||x&&m))return u;for(var E=l+p-(l-s),b=h-m+(f-h),T=[],A=[],M=[],R=0,S=u.length;R<S;R++){var O=u[R];if(O[2][1]<E)T.push(O);else if(O[1][1]>b)M.push(O);else if(O[2][1]>b&&O[1][1]<E){var C=E<l?n+Math.tan(r)*(l-E):n,I=b>h?n+Math.tan(e)*(b-h):n;T.push([O[0],O[1],[o,E],[C,E]]),E<b&&(b<h&&E>l?A.push([[n,E],[o,E],[o,b],[n,b]]):E>l?(A.push([[n,l],[o,l],[o,h],[n,h]]),A.push([[n,h],[o,h],[o,b],[I,b]])):b<h?(A.push([[C,E],[o,E],[o,l],[n,l]]),A.push([[n,l],[o,l],[o,b],[n,b]])):(A.push([[C,E],[o,E],[o,l],[n,l]]),A.push([[n,l],[o,l],[o,h],[n,h]]),A.push([[n,h],[o,h],[o,b],[I,b]]))),M.push([[I,b],[o,b],O[2],O[3]])}else if(O[2][1]>b){var w=b>h?n+Math.tan(e)*(b-h):n;A.push([O[0],O[1],[o,b],[w,b]]),M.push([[w,b],[o,b],O[2],O[3]])}else if(O[1][1]<E){var k=E<l?n+Math.tan(r)*(l-E):n;T.push([O[0],O[1],[o,E],[k,E]]),A.push([[k,E],[o,E],O[2],O[3]])}else A.push(O)}if(T.length){var D,L,F,N,P,B=p>l-s&&t<v,H=Math.atan((o-n)/(l-s)),G=p,Y=G/v,W=o-v,U=p-(l-s),X=U/(v-(o-n)),z=Le(T[0][1],T[0][2],W,E,Y,G,!0,Math.tan(H)*G),V=c(z[z.length-1],2);if(D=V[0],L=V[1],B){var K=c((P=Le(T[0][0],T[0][3],W,E,X,U,!0,Math.tan(H)*U))[P.length-1],2);F=K[0],N=K[1]}T.forEach((function(t,e){var r,i;0===e?(r=z,B&&(i=P)):(r=Le(t[1],t[2],W,E,Y,G),B&&(i=Le(t[0],t[3],W,E,X,U)));for(var a=0,n=r.length;a<n;a++)We(r[a],D,L,2);if(B){for(var o=0,s=i.length;o<s;o++)We(i[o],F,N,2);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}var j=M.length;if(j){var $,q,Z,J,Q,tt=m>f-h&&t<x,et=Math.atan((o-n)/(f-h)),rt=m,it=rt/x,at=o-x,nt=m-(f-h),ot=nt/(x-(o-n)),st=Fe(M[j-1][1],M[j-1][2],at,b,it,rt,!0,Math.tan(et)*rt),lt=c(st[0],2);if($=lt[0],q=lt[1],tt){var ht=c((Q=Fe(M[j-1][0],M[j-1][3],at,b,ot,nt,!0,Math.tan(et)*nt))[0],2);Z=ht[0],J=ht[1]}M.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=Fe(t[1],t[2],at,b,it,rt),tt&&(i=Fe(t[0],t[3],at,b,ot,nt)));for(var a=0,n=r.length;a<n;a++)We(r[a],$,q,3);if(tt){for(var o=0,s=i.length;o<s;o++)We(i[o],Z,J,3);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[2]=t[3],t[3]=t[0];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}return T.concat(A).concat(M)}function Le(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(_-r)*a,x=(v-r)*a,m=Math.atan(x/(i-p)),E=r+Math.sin(m)*n/a,b=i-Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,f=i-Math.sin(S)*n}else l=Math.atan(g/(i-d)),h=r+Math.sin(l)*n/a,f=i-Math.cos(l)*n;if(l===m)return[[h,f]];var O=ee.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=l+I,k=r+Math.sin(w)*C/a,D=i-Math.cos(w)*C,L=m-I;return[[E,b],[r+Math.sin(L)*C/a,i-Math.cos(L)*C],[k,D],[h,f]]}function Fe(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(_-r)*a,x=(v-r)*a,m=Math.atan(g/(d-i)),E=r+Math.sin(m)*n/a,b=i+Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,f=i+Math.sin(S)*n}else l=Math.atan(x/(p-i)),h=r+Math.sin(l)*n/a,f=i+Math.cos(l)*n;if(m===l)return[[E,b]];var O=ee.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=m-I,k=r+Math.sin(w)*C/a,D=i+Math.cos(w)*C,L=l+I;return[[h,f],[r+Math.sin(L)*C/a,i+Math.cos(L)*C],[k,D],[E,b]]}function Ne(t,e,r,i,a,n,o,s,l,h,f,u,_,d){var y=c(_,2),v=y[0],p=y[1],g=c(d,2),x=g[0],m=g[1];if(!(v&&p||x&&m))return u;for(var E=a+v-(a-i),b=n-x+(o-n),T=[],A=[],M=[],R=0,S=u.length;R<S;R++){var O=u[R];if(O[2][0]<E)T.push(O);else if(O[3][0]>b)M.push(O);else if(O[2][0]>b&&O[3][0]<E){var C=E<a?f-Math.tan(e)*(E-i):l,I=b>n?f-Math.tan(r)*(o-b):h;T.push([O[0],[E,C],[E,f],O[3]]),E<b&&(E>a&&b<n?A.push([[E,h],[b,h],[b,f],[E,f]]):E>a?(A.push([[E,h],[n,h],[n,f],[E,f]]),A.push([[n,h],[b,I],[b,f],[n,f]])):b<n?(A.push([[E,C],[a,h],[a,f],[E,f]]),A.push([[a,h],[b,h],[b,f],[a,f]])):(A.push([[E,C],[a,h],[a,f],[E,f]]),A.push([[a,h],[n,h],[n,f],[a,f]]),A.push([[n,h],[b,I],[b,f],[n,f]]))),M.push([[b,I],O[1],O[2],[b,f]])}else if(O[2][0]>b){var w=b>n?f-Math.tan(r)*(o-b):h;A.push([O[0],[b,w],[b,f],O[3]]),M.push([[b,w],O[1],O[2],[b,f]])}else if(O[3][0]<E){var k=E<a?f-Math.tan(e)*(E-i):h;T.push([O[0],[E,k],[E,f],O[3]]),A.push([[E,k],O[1],O[2],[E,f]])}else A.push(O)}if(T.length){var D,L,F,N,P,B=v>a-i&&t<p,H=Math.atan((a-i)/(f-h)),G=p,Y=G/v,W=f-p,U=p-(f-h),X=U/(v-(a-i)),z=Pe(T[0][3],T[0][2],E,W,Y,G,!0,Math.tan(H)*G),V=c(z[0],2);if(D=V[0],L=V[1],B){var K=c((P=Pe(T[0][0],T[0][1],E,W,X,U,!0,Math.tan(H)*U))[0],2);F=K[0],N=K[1]}T.forEach((function(t,e){var r,i;0===e?(r=z,B&&(i=P)):(r=Pe(t[3],t[2],E,W,Y,G),B&&(i=Pe(t[0],t[1],E,W,X,U)));for(var a=0,n=r.length;a<n;a++)We(r[a],D,L,4);if(B){for(var o=0,s=i.length;o<s;o++)We(i[o],F,N,4);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}))}var j=M.length;if(j){var $,q,Z,J,Q,tt=x>o-n&&t<m,et=Math.atan((o-n)/(f-h)),rt=m,it=rt/x,at=f-m,nt=m-(f-h),ot=nt/(x-(o-n)),st=Be(M[j-1][3],M[j-1][2],b,at,it,rt,!0,Math.tan(et)*rt),lt=c(st[st.length-1],2);if($=lt[0],q=lt[1],tt){var ht=c((Q=Be(M[j-1][0],M[j-1][1],b,at,ot,nt,!0,Math.tan(et)*nt))[Q.length-1],2);Z=ht[0],J=ht[1]}M.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=Be(t[3],t[2],b,at,it,rt),tt&&(i=Be(t[0],t[1],b,at,ot,nt)));for(var a=0,n=r.length;a<n;a++)We(r[a],$,q,5);if(tt){for(var o=0,s=i.length;o<s;o++)We(i[o],Z,J,5);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[3],t[3]=i[2].concat(i[1]).concat(i[0]))}else t[2]=t[1],t[3]=t[0];t[0]=r[0],r[1]&&(t[1]=r[1].concat(r[2]).concat(r[3]))}))}return T.concat(A).concat(M)}function Pe(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(-_+r)*a,x=(-v+r)*a,m=Math.atan(x/(p-i)),E=r-Math.sin(m)*n/a,b=i+Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,f=i+Math.sin(S)*n}else l=Math.atan(g/(d-i)),h=r-Math.sin(l)*n/a,f=i+Math.cos(l)*n;if(l===m)return[[h,f]];var O=ee.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=l-I,k=m+I;return[[h,f],[r-Math.sin(w)*C/a,i+Math.cos(w)*C],[r-Math.sin(k)*C/a,i+Math.cos(k)*C],[E,b]]}function Be(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(_-r)*a,x=(v-r)*a,m=Math.atan(g/(d-i)),E=r+Math.sin(m)*n/a,b=i+Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r+Math.cos(S)*n/a,f=i+Math.sin(S)*n}else l=Math.atan(x/(p-i)),h=r+Math.sin(l)*n/a,f=i+Math.cos(l)*n;if(m===l)return[[E,b]];var O=ee.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=m+I,k=l-I;return[[E,b],[r+Math.sin(w)*C/a,i+Math.cos(w)*C],[r+Math.sin(k)*C/a,i+Math.cos(k)*C],[h,f]]}function He(t,e,r,i,a,n,o,s,l,h,f,u,_,d){var y=c(_,2),v=y[0],p=y[1],g=c(d,2),x=g[0],m=g[1];if(!(v&&p||x&&m))return u;for(var E=l+p-(l-s),b=h-m+(f-h),T=[],A=[],M=[],R=0,S=u.length;R<S;R++){var O=u[R];if(O[3][1]<E)T.push(O);else if(O[0][1]>b)M.push(O);else if(O[3][1]>b&&O[0][1]<E){var C=E<l?a-Math.tan(r)*(l-E):a,I=b>h?a-Math.tan(e)*(b-h):a;T.push([O[0],O[1],[C,E],[i,E]]),E<b&&(b<h&&E>l?A.push([[i,E],[a,E],[a,b],[i,b]]):E>l?(A.push([[i,E],[a,E],[a,h],[i,h]]),A.push([[i,h],[a,h],[I,b],[i,b]])):b<h?(A.push([[i,E],[C,E],[a,l],[i,l]]),A.push([[i,l],[a,l],[a,b],[i,b]])):(A.push([[i,E],[C,E],[a,l],[i,l]]),A.push([[i,l],[a,l],[a,h],[i,h]]),A.push([[i,h],[a,h],[I,b],[i,b]]))),M.push([[i,b],[I,b],O[2],O[3]])}else if(O[3][1]>b){var w=b>h?a-Math.tan(e)*(b-h):a;A.push([O[0],O[1],[w,b],[i,b]]),M.push([[i,b],[w,b],O[2],O[3]])}else if(O[1][1]<E){var k=E<l?a-Math.tan(r)*(l-E):a;T.push([O[0],O[1],[k,E],[i,E]]),A.push([[i,E],[k,E],O[2],O[3]])}else A.push(O)}if(T.length){var D,L,F,N,P,B=p>l-s&&t<v,H=Math.atan((a-i)/(l-s)),G=p,Y=G/v,W=i+v,U=p-(l-s),X=U/(v-(a-i)),z=Ge(T[0][0],T[0][3],W,E,Y,G,!0,Math.tan(H)*G),V=c(z[z.length-1],2);if(D=V[0],L=V[1],B){var K=c((P=Ge(T[0][1],T[0][2],W,E,X,U,!0,Math.tan(H)*U))[P.length-1],2);F=K[0],N=K[1]}T.forEach((function(t,e){var r,i;0===e?(r=z,B&&(i=P)):(r=Ge(t[0],t[3],W,E,Y,G),B&&(i=Ge(t[1],t[2],W,E,X,U)));for(var a=0,n=r.length;a<n;a++)We(r[a],D,L,6);if(B){for(var o=0,s=i.length;o<s;o++)We(i[o],F,N,6);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}var j=M.length;if(j){var $,q,Z,J,Q,tt=m>f-h&&t<x,et=Math.atan((a-i)/(f-h)),rt=m,it=rt/x,at=i+x,nt=m-(f-h),ot=nt/(x-(a-i)),st=Ye(M[j-1][0],M[j-1][3],at,b,it,rt,!0,Math.tan(et)*rt),lt=c(st[0],2);if($=lt[0],q=lt[1],tt){var ht=c((Q=Ye(M[j-1][1],M[j-1][2],at,b,ot,nt,!0,Math.tan(et)*nt))[0],2);Z=ht[0],J=ht[1]}M.forEach((function(t,e){var r,i;e===j-1?(r=st,tt&&(i=Q)):(r=Ye(t[0],t[3],at,b,it,rt),tt&&(i=Ye(t[1],t[2],at,b,ot,nt)));for(var a=0,n=r.length;a<n;a++)We(r[a],$,q,7);if(tt){for(var o=0,s=i.length;o<s;o++)We(i[o],Z,J,7);1===i.length?(t[2]=i[0],t.pop()):(t[2]=i[0],t[3]=i[1].concat(i[2]).concat(i[3]))}else t[3]=t[1];t[0]=r[3],t[1]=r[2].concat(r[1]).concat(r[0])}))}return T.concat(A).concat(M)}function Ge(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(r-_)*a,x=(r-v)*a,m=Math.atan(x/(i-p)),E=r-Math.sin(m)*n/a,b=i-Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,f=i-Math.sin(S)*n}else l=Math.atan(g/(i-d)),h=r-Math.sin(l)*n/a,f=i-Math.cos(l)*n;if(l===m)return[[h,f]];var O=ee.h(Math.abs(l-m))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=l+I,k=r-Math.sin(w)*C/a,D=i-Math.cos(w)*C,L=m-I;return[[E,b],[r-Math.sin(L)*C/a,i-Math.cos(L)*C],[k,D],[h,f]]}function Ye(t,e,r,i,a,n,o,s){var l,h,f,u=c(t,2),_=u[0],d=u[1],y=c(e,2),v=y[0],p=y[1],g=(r-_)*a,x=(r-v)*a,m=Math.atan(g/(d-i)),E=r-Math.sin(m)*n/a,b=i+Math.cos(m)*n;if(o){var T=s*a,A=Math.atan(T/n),M=Math.sqrt(Math.tan(A)/2),R=M/(1+M),S=2*Math.atan(R);l=.5*Math.PI-S,h=r-Math.cos(S)*n/a,f=i+Math.sin(S)*n}else l=Math.atan(x/(p-i)),h=r-Math.sin(l)*n/a,f=i+Math.cos(l)*n;if(m===l)return[[E,b]];var O=ee.h(Math.abs(m-l))*n,C=Math.sqrt(Math.pow(n,2)+Math.pow(O,2)),I=Math.atan(O/n),w=m-I,k=r-Math.sin(w)*C/a,D=i+Math.cos(w)*C,L=l+I;return[[h,f],[r-Math.sin(L)*C/a,i+Math.cos(L)*C],[k,D],[E,b]]}function We(t,e,r,i){0===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):1===i?(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r)):2===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):3===i?(t[0]=Math.max(t[0],e),t[1]=Math.min(t[1],r)):4===i?(t[0]=Math.max(t[0],e),t[1]=Math.max(t[1],r)):5===i||6===i?(t[0]=Math.min(t[0],e),t[1]=Math.max(t[1],r)):7===i&&(t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r))}var Ue=[Te,Ae,Re,Me];var Xe={calPoints:function(t,e,r,i,a,n,o,s,l,h,f,c,u,_,d){var y=[];if("none"===e)return y;if(["dashed","dotted"].indexOf(e)>-1){var v=0===u||2===u?Ce(e,a,n,o,s,t):Ce(e,l,h,f,c,t),p=v.n,g=v.ps,x=v.pd;if(p>1){for(var m=0;m<p;m++){var E,b=m===p-1,T=void 0,A=void 0,M=void 0;E=(T=0===u||2===u?m?a+g*m+x*m:a:m?l+g*m+x*m:l)+g,0===u?E<=n?b?y.push([[a,l],[s,l],[o,h],[n,h]]):(A=l+(T-a)*Math.tan(r),M=l+(E-a)*Math.tan(r),y.push([[T,l],[E,l],[E,M],[T,A]])):T>=o?(A=l+(s-T)*Math.tan(i),M=l+(s-E)*Math.tan(i),b?y.push([[T,l],[s,l],[s,l],[T,A]]):y.push([[T,l],[E,l],[E,M],[T,A]])):T<n?(A=l+(T-a)*Math.tan(r),y.push([[T,l],[n,l],[n,h],[T,A]]),b?(y.push([[n,l],[o,l],[o,h],[n,h]]),y.push([[o,l],[s,l],[s,l],[n,h]])):E>o?(M=l+(s-E)*Math.tan(i),y.push([[n,l],[o,l],[o,h],[n,h]]),y.push([[o,l],[E,l],[E,M],[o,h]])):y.push([[n,l],[E,l],[E,h],[n,h]])):E>o?(A=l+(s-E)*Math.tan(i),T<n?(M=l+(T-a)*Math.tan(r),y.push([[T,l],[n,l],[n,h],[T,M]]),y.push([[n,l],[o,l],[o,h],[n,h]]),b?y.push([[o,l],[s,l],[s,l],[o,h]]):y.push([[o,l],[E,l],[E,A],[o,h]])):(y.push([[T,l],[o,l],[o,h],[T,h]]),b?y.push([[o,l],[s,l],[s,l],[o,h]]):y.push([[o,l],[E,l],[E,A],[o,h]]))):b?y.push([[T,l],[s,l],[o,h],[T,h]]):y.push([[T,l],[E,l],[E,h],[T,h]]):1===u?E<=h?b?y.push([[o,h],[s,l],[s,c],[o,f]]):(A=s-(T-l)*Math.tan(r),M=s-(E-l)*Math.tan(r),y.push([[A,T],[s,T],[s,E],[M,E]])):T>=f?(A=o+(T-f)*Math.tan(i),M=o+(E-f)*Math.tan(i),b?y.push([[A,T],[s,T],[s,c],[s,c]]):y.push([[A,T],[s,T],[s,E],[M,E]])):T<h?(A=o+(h-T)*Math.tan(r),y.push([[A,T],[s,T],[s,h],[o,h]]),b?(y.push([[o,h],[s,h],[s,f],[o,f]]),y.push([[o,f],[s,f],[s,c],[s,c]])):E>f?(M=o+(E-f)*Math.tan(i),y.push([[o,h],[s,h],[s,f],[o,f]]),y.push([[o,f],[s,f],[s,E],[M,E]])):y.push([[o,h],[s,h],[s,E],[o,E]])):E>f?(A=o+(E-f)*Math.tan(i),T<h?(M=o+(h-T)*Math.tan(r),y.push([[M,T],[s,T],[s,h],[o,h]]),y.push([[o,h],[s,h],[s,f],[o,f]]),b?y.push([[o,f],[s,f],[s,s],[s,s]]):y.push([[o,f],[s,f],[s,E],[A,E]])):(y.push([[o,T],[s,T],[s,f],[o,f]]),b?y.push([[o,f],[s,f],[s,c],[s,c]]):y.push([[o,f],[s,f],[s,E],[A,E]]))):b?y.push([[o,T],[s,T],[s,c],[o,f]]):y.push([[o,T],[s,T],[s,E],[o,E]]):2===u?E<=n?b?y.push([[a,c],[n,f],[o,f],[s,c]]):(A=c-(T-a)*Math.tan(r),M=c-(E-a)*Math.tan(r),y.push([[T,A],[E,M],[E,c],[T,c]])):T>=o?(A=c-(s-T)*Math.tan(i),M=c-(s-E)*Math.tan(i),b?y.push([[T,A],[s,c],[s,c],[T,c]]):y.push([[T,A],[E,M],[E,c],[T,c]])):T<n?(A=c-(T-a)*Math.tan(r),y.push([[T,A],[n,f],[n,c],[T,c]]),b?(y.push([[n,f],[o,f],[o,c],[n,c]]),y.push([[o,f],[s,c],[s,c],[o,c]])):E>o?(M=c-(E-o)*Math.tan(i),y.push([[n,f],[o,f],[o,c],[n,c]]),y.push([[o,f],[E,M],[E,c],[o,c]])):y.push([[n,f],[E,f],[E,c],[n,c]])):E>o?(A=c-(s-E)*Math.tan(i),T<n?(M=c-(T-o)*Math.tan(r),y.push([[T,M],[n,f],[n,c],[T,c]]),y.push([[n,f],[o,f],[o,c],[n,c]]),b?y.push([[o,f],[s,c],[s,c],[o,c]]):y.push([[o,f],[E,A],[E,c],[o,c]])):(y.push([[T,f],[o,f],[o,c],[T,c]]),b?y.push([[o,f],[s,c],[s,c],[o,c]]):y.push([[o,f],[E,A],[E,c],[o,c]]))):b?y.push([[T,f],[o,f],[s,c],[T,c]]):y.push([[T,f],[E,f],[E,c],[T,c]]):3===u&&(E<=h?b?y.push([[a,l],[n,h],[n,f],[a,c]]):(A=a+(T-l)*Math.tan(r),M=a+(E-l)*Math.tan(r),y.push([[a,T],[A,T],[M,E],[a,E]])):T>=f?(A=a+(c-T)*Math.tan(i),M=a+(c-E)*Math.tan(i),b?y.push([[a,T],[A,T],[a,c],[a,c]]):y.push([[a,T],[A,T],[M,E],[a,E]])):T<h?(A=a+(T-l)*Math.tan(r),y.push([[a,T],[A,T],[n,h],[a,h]]),b?(y.push([[a,h],[n,h],[n,f],[a,f]]),y.push([[a,f],[n,f],[a,c],[a,c]])):E>f?(M=a+(c-E)*Math.tan(i),y.push([[a,h],[n,h],[n,f],[a,f]]),y.push([[a,f],[n,f],[M,E],[a,E]])):y.push([[a,h],[n,h],[n,E],[a,E]])):E>f?(A=a+(c-E)*Math.tan(i),T<h?(M=a+(T-l)*Math.tan(r),y.push([[a,T],[M,T],[n,h],[a,l]]),y.push([[a,h],[n,h],[n,f],[a,f]]),b?y.push([[a,f],[n,f],[a,c],[a,c]]):y.push([[a,f],[n,f],[A,E],[a,E]])):(y.push([[a,T],[n,T],[n,f],[a,f]]),b?y.push([[a,f],[n,f],[a,c],[a,c]]):y.push([[a,f],[n,f],[A,E],[a,E]]))):b?y.push([[a,T],[n,T],[n,f],[a,c]]):y.push([[a,T],[n,T],[n,E],[a,E]]))}if(0===u)return Ie(t,r,i,a,n,o,s,l,h,f,c,y,_,d);if(1===u)return De(t,r,i,a,n,o,s,l,h,f,c,y,_,d);if(2===u)return Ne(t,r,i,a,n,o,s,l,h,f,c,y,_,d);if(3===u)return He(t,r,i,a,n,o,s,l,h,f,c,y,_,d)}}return 0===u?(n>a&&y.push([[a,l],[n,l],[n,h],[a,l]]),y.push([[n,l],[o,l],[o,h],[n,h]]),s>o&&y.push([[o,l],[s,l],[s,l],[o,h]]),Ie(t,r,i,a,n,o,s,l,h,f,c,y,_,d)):1===u?(h>l&&y.push([[s,l],[s,l],[s,h],[o,h]]),y.push([[o,h],[s,h],[s,f],[o,f]]),c>f&&y.push([[o,f],[s,f],[s,c],[s,c]]),De(t,r,i,a,n,o,s,l,h,f,c,y,_,d)):2===u?(n>a&&y.push([[a,c],[n,f],[n,c],[a,c]]),y.push([[n,f],[o,f],[o,c],[n,c]]),s>o&&y.push([[o,f],[s,c],[s,c],[o,c]]),Ne(t,r,i,a,n,o,s,l,h,f,c,y,_,d)):3===u?(h>l&&y.push([[a,l],[a,l],[n,h],[a,h]]),y.push([[a,h],[n,h],[n,f],[a,f]]),c>f&&y.push([[a,f],[n,f],[a,c],[a,c]]),He(t,r,i,a,n,o,s,l,h,f,c,y,_,d)):void 0},calRadius:function(t,e,r,i,a,n,o,s){var l,h=c(a,2),f=h[0],u=h[1],_=c(n,2),d=_[0],y=_[1],v=c(o,2),p=v[0],g=v[1],x=c(s,2),m=x[0],E=x[1];if(f=Math.max(f,0),u=Math.max(u,0),d=Math.max(d,0),y=Math.max(y,0),p=Math.max(p,0),g=Math.max(g,0),m=Math.max(m,0),E=Math.max(E,0),(f>0&&u>0||d>0&&y>0||p>0&&g>0||m>0&&E>0)&&(l=!0),l){var b=[];return f>0&&u>0?(b.push([t,e+u]),b.push([t,e+u*(1-oe),t+f*(1-oe),e,t+f,e])):b.push([t,e]),d>0&&y>0?(b.push([t+r-d,e]),b.push([t+r-d*(1-oe),e,t+r,e+y*(1-oe),t+r,e+y])):b.push([t+r,e]),p>0&&g>0?(b.push([t+r,e+i-g]),b.push([t+r,e+i-g*(1-oe),t+r-p*(1-oe),e+i,t+r-p,e+i])):b.push([t+r,e+i]),m>0&&E>0?(b.push([t+m,e+i]),b.push([t+m*(1-oe),e+i,t,e+i-E*(1-oe),t,e+i-E])):b.push([t,e+i]),b}},calBorderRadius:function(t,e,r,i,a){var n=!0;Ue.forEach((function(o){i[o]=r[o].map((function(r,i){return r[0]>0?(n=!1,r[1]===se?Math.max(0,r[0]):r[1]===le?Math.max(0,r[0]*(i?e:t)*.01):r[1]===he?Math.max(0,r[0]*a.computedStyle[Se]):r[1]===fe?Math.max(0,r[0]*a.width*.01):r[1]===ce?Math.max(0,r[0]*a.height*.01):r[1]===ue?Math.max(0,r[0]*Math.max(a.width,a.height)*.01):r[1]===_e?Math.max(0,r[0]*Math.min(a.width,a.height)*.01):0):0}))})),n||Ue.forEach((function(r,a){var n=a%2==0?0:1,o=n?e:t,s=i[r],l=i[Ue[(a+1)%4]];if(s[n]+l[n]>o){var h=.5*o;s[n]>=h&&l[n]>=h?s[n]=l[n]=h:s[n]>h?s[n]=o-l[n]:l[n]>h&&(l[n]=o-s[n])}}))},calBorderRadiusInline:function(t,e,r){var i,a;t.length&&(i=t[0],(a=t[t.length-1]).isEllipsis&&(a=t[t.length-2]));var n=i?i.outerWidth:0,o=i?i.outerHeight:0;n+=r[pe]+r[me],o+=r[ge]+r[xe]+r[be]+r[Ee],[Te,Me].forEach((function(t){r[t]=e[t].map((function(t,e){var r;return t[1]===se?(r=Math.max(0,t[0]),r=Math.min(e?o:n,r)):(r=Math.max(0,t[0]*(e?o:n)*.01),r=Math.min(e?o:n,r)),r}))})),n=a?a.outerWidth:0,o=a?a.outerHeight:0,[Ae,Re].forEach((function(t){r[t]=e[t].map((function(t,e){var r;return t[1]===se?(r=Math.max(0,t[0]),r=Math.min(e?o:n,r)):(r=Math.max(0,t[0]*(e?o:n)*.01),r=Math.min(e?o:n,r)),r}))}))},renderBorder:function(t,e,r,i,a,n,o){if(e===k.CANVAS||e===k.WEBGL)r.beginPath(),r.fillStyle!==a&&(r.fillStyle=a),i.forEach((function(t){de(r,t,n,o)})),r.fill(),r.closePath();else if(e===k.SVG){var s="";i.forEach((function(t){s+=ye(t)})),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",s],["fill",a]]})}}},ze=it.rgba2int,Ve=it.isNil,Ke=D.PX,je=D.PERCENT,$e=D.DEG,qe=D.NUMBER,Ze=D.REM,Je=D.VW,Qe=D.VH,tr=D.VMAX,er=D.VMIN,rr=D.calUnit,ir=ee.d2r,ar=ne.canvasPolygon,nr=b.STYLE_KEY.FONT_SIZE;function or(t){if(/^[-+]?[\d.]/.test(t)){var e=rr(t);return[qe,$e].indexOf(e[1])>-1&&(e[1]=Ke),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||50,je]}function sr(t,e,r){for(var i=[],a=t[0][0],n=0,o=t.length;n<o;n++){var s=t[n];if(s.length>1){var l=s[1];l[1]===je?i.push([s[0],.01*l[0]]):l[1]===Ze?i.push([s[0],l[0]*r.computedStyle[nr]/e]):l[1]===Je?i.push([s[0],l[0]*r.width/e]):l[1]===Qe?i.push([s[0],l[0]*r.height/e]):l[1]===tr?i.push([s[0],l[0]*Math.max(r.width,r.height)/e]):l[1]===er?i.push([s[0],l[0]*Math.min(r.width,r.height)/e]):i.push([s[0],l[0]/e])}else i.push([s[0]])}if(1===i.length&&i.push(it.clone(i[0])),1===i[0].length&&i[0].push(0),i.length>1){var h=i.length-1;1===i[h].length&&i[h].push(1)}for(var f=i[0][1],c=1,u=i.length;c<u-1;c++){var _=i[c];if(_.length>1)f=_[1];else{for(var d=c+1,y=i[i.length-1][1];d<u-1;d++){var v=i[d];if(v.length>1){y=v[1];break}}for(var p=(y-f)/(d-c+1),g=c;g<d;g++){i[g].push(f+p*(g+1-c))}c=d}}for(var x=1,m=i.length;x<m;x++){var E=i[x],b=i[x-1];E[1]<b[1]&&(E[1]=b[1])}for(var T=0,A=i.length;T<A;T++){var M=i[T];if(M[1]>1){i.splice(T);var R=i[T-1];if(R&&R[1]<1){var S=M[0][0]-R[0][0],O=M[0][1]-R[0][1],C=M[0][2]-R[0][2],I=M[0][3]-R[0][3],w=(1-R[1])/(M[1]-R[1]);i.push([[M[0][0]+S*w,M[0][1]+O*w,M[0][2]+C*w,M[0][3]+I*w],1])}break}}for(var k=i.length-1;k>=0;k--){var D=i[k];if(D[1]<0){i.splice(0,k+1);var L=i[k];if(L&&L[1]>0){var F=L[0][0]-D[0][0],N=L[0][1]-D[0][1],P=L[0][2]-D[0][2],B=L[0][3]-D[0][3],H=-D[1]/(L[1]-D[1]);i.unshift([[D[0][0]+F*H,D[0][1]+N*H,D[0][2]+P*H,D[0][3]+B*H],0])}break}}return i.forEach((function(t){t[1]<0?t[1]=0:t[1]>1&&(t[1]=1)})),i.length||i.push([a,0]),i}function lr(t,e,r,i){var a,n,o,s;if(t>=270){var l=ir(360-t);a=r+Math.sin(l)*e,n=i+Math.cos(l)*e,o=r-Math.sin(l)*e,s=i-Math.cos(l)*e}else if(t>=180){var h=ir(t-180);a=r+Math.sin(h)*e,n=i-Math.cos(h)*e,o=r-Math.sin(h)*e,s=i+Math.cos(h)*e}else if(t>=90){var f=ir(180-t);a=r-Math.sin(f)*e,n=i-Math.cos(f)*e,o=r+Math.sin(f)*e,s=i+Math.cos(f)*e}else{var c=ir(t);a=r-Math.sin(c)*e,n=i+Math.cos(c)*e,o=r+Math.sin(c)*e,s=i-Math.cos(c)*e}return[a,n,o,s]}function hr(t,e,r,i,a,n){var o=t[0],s=t[1];return[o[1]===je?e+o[0]*i*.01:o[1]===Ze?e+o[0]*n.computedStyle[nr]:o[1]===Je?e+o[0]*n.width*.01:o[1]===Qe?e+o[0]*n.height*.01:o[1]===tr?e+o[0]*Math.max(n.width,n.height)*.01:o[1]===er?e+o[0]*Math.min(n.width,n.height)*.01:e+o[0],s[1]===je?r+s[0]*a*.01:s[1]===Ze?r+s[0]*n.computedStyle[nr]:s[1]===Je?r+s[0]*n.width*.01:s[1]===Qe?r+s[0]*n.height*.01:s[1]===Qe?r+s[0]*Math.max(n.width,n.height)*.01:s[1]===Qe?r+s[0]*Math.min(n.width,n.height)*.01:r+s[0]]}function fr(t,e,r,i,a,n,o,s,l,h){var f,u,_,d,y,v,p,g=0;if(Array.isArray(e))f=n+e[0]*i,u=o+e[1]*a,v=n+e[4]*i,p=o+e[5]*a,e[6]<=0?y=Math.min(Math.abs(f-n),Math.min(Math.abs(u-o),Math.min(Math.abs(u-l),Math.min(Math.abs(f-l))))):(d=(_=Math.sqrt(Math.pow((e[2]-e[0])*i,2)+Math.pow((e[3]-e[1])*a,2)))*e[6],y=Math.max(_,d),_!==d&&(g=e[2]>=e[0]?e[3]>=e[1]?Math.asin((e[3]-e[1])*a/_):-Math.asin((e[1]-e[3])*a/_):e[3]>=e[1]?ir(180)-Math.asin((e[3]-e[1])*a/_):Math.asin((e[1]-e[3])*a/_)-ir(180)));else{var x=c(hr(r,n,o,i,a,h),2);v=f=x[0],p=u=x[1];var m=1;if("closest-corner"===e&&"circle"===t)f<=n||f>=s||u<=o||u>=l?y=Math.min(Math.abs(f-n),Math.min(Math.abs(u-o),Math.min(Math.abs(u-l),Math.min(Math.abs(f-l))))):(_=f<n+.5*i?f-n:s-f,d=u<o+.5*a?u-o:l-u,y=Math.sqrt(Math.pow(_,2)+Math.pow(d,2)));else if("closest-side"===e||"closest-corner"===e)if(f<=n||f>=s||u<=o||u>=l)y=Math.min(Math.abs(f-n),Math.min(Math.abs(u-o),Math.min(Math.abs(u-l),Math.min(Math.abs(f-l)))));else{var E=1;_=f<n+.5*i?f-n:s-f,d=u<o+.5*a?u-o:l-u,y=Math.min(_,d),"closest-corner"===e&&(E=Math.sqrt(2)),_*=E,d*=E,y*=E}else _=f<=n?n-f+i:f>=s?f-s+i:f<n+.5*i?s-f:f-n,d=u<=o?o-u+a:u>=l?u-l+a:u<o+.5*a?l-u:u-o,y=Math.max(_,d),"farthest-side"!==e&&(m=Math.sqrt(2)),_*=m,d*=m,y*=m}return"circle"===t&&(_=d=y),[f,u,y,_,d,v,p,g]}var cr={parseGradient:function(t){var e=Ht.gradient.exec(t);if(e){var r={k:e[1]};if("linear"===r.k){var i=/([-+]?[\d.]+deg)|(to\s+[toprighbml]+)/i.exec(e[2]);if(i)r.d=function(t){var e=180;if("to top"===t)e=0;else if("to top right"===t)e=45;else if("to right"===t)e=90;else if("to bottom right"===t)e=135;else if("to bottom"===t);else if("to bottom left"===t)e=225;else if("to left"===t)e=270;else if("to top left"===t)e=315;else{var r=/([-+]?[\d.]+)deg/.exec(t);r&&(e=parseFloat(r[1]))}return e%360}(i[0].toLowerCase());else{var a=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)/.exec(e[2]);r.d=a?[parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])]:180}}else if("radial"===r.k){r.s=e[2].indexOf("circle")>-1?"circle":"ellipse";var n=/(closest|farthest)-(side|corner)/i.exec(e[2]);if(n)r.z=n[0].toLowerCase();else{var o=/([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)\s+([-+]?[\d.]+)(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?(?:\s+([-+]?[\d.]+))?/.exec(e[2]);if(o){r.z=[parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])];var s=!Ve(o[5]),l=!Ve(o[6]),h=!Ve(o[7]);s&&l&&h?(r.z.push(parseFloat(o[5])),r.z.push(parseFloat(o[6])),r.z.push(parseFloat(o[7]))):s&&l?(r.z.push(parseFloat(o[5])),r.z.push(parseFloat(o[6])),r.z.push(1)):s?(r.z.push(r.z[0]),r.z.push(r.z[1]),r.z.push(parseFloat(o[5]))):(r.z.push(r.z[0]),r.z.push(r.z[1]),r.z.push(1))}else r.z="farthest-corner"}var f=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(f){var c=or(f[1]),u=f[2]?or(f[2]):c;r.p=[c,u]}else r.p=[[50,je],[50,je]]}else if("conic"===r.k){var _=/([-+]?[\d.]+deg)/i.exec(e[2]);r.d=_?parseFloat(_[0])%360:0;var d=/at\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center))(?:\s+((?:[-+]?[\d.]+[pxremvwhina%]*)|(?:left|top|right|bottom|center)))?/i.exec(e[2]);if(d){var y=or(d[1]),v=d[2]?or(d[2]):y;r.p=[y,v]}else r.p=[[50,je],[50,je]]}var p=e[2].match(/(([-+]?[\d.]+[pxremvwhina%]+)?\s*((#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))\s*([-+]?[\d.]+[pxremvwhina%]+)?)|(transparent)/gi)||[];return r.v=p.map((function(t){var e=/(?:#[0-9a-f]{3,8})|(?:rgba?\s*\(.+?\))|(?:transparent)/i.exec(t),r=[ze(e[0])],i=/[-+]?[\d.]+[pxremvwhina%]+/.exec(t);if(i){var a=rr(i[0]);[qe,$e].indexOf(a[1])>-1&&(a[1]=Ke),r[1]=a}return r})),r}},getLinear:function(t,e,r,i,a,n,o,s,l){var h,f,c,u,_,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,y=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0;if(r+=d,i+=y,a+=d,n+=y,Array.isArray(e)){h=r+e[0]*o,f=i+e[1]*s,c=r+e[2]*o,u=i+e[3]*s;var v=Math.sqrt(Math.pow(c-h,2)+Math.pow(u-f,2));_=sr(t,v)}else{for(;e>=360;)e-=360;for(;e<0;)e+=360;var p=Math.max(o,s),g=lr(e,p,a,n);p*=2;var x=Gt.dotProduct(r-g[0],i-g[1],g[2]-g[0],g[3]-g[1])/p,m=Gt.dotProduct(r+o-g[0],i-g[1],g[2]-g[0],g[3]-g[1])/p,E=Gt.dotProduct(r+o-g[0],i+s-g[1],g[2]-g[0],g[3]-g[1])/p,b=Gt.dotProduct(r-g[0],i+s-g[1],g[2]-g[0],g[3]-g[1])/p,T=x,A=x;T=Math.min(T,Math.min(m,Math.min(E,b)));var M=(A=Math.max(A,Math.max(m,Math.max(E,b))))-T,R=T/p,S=g[2]-g[0],O=g[3]-g[1];h=g[0]+S*R,f=g[1]+O*R,c=g[2]-S*R,u=g[3]-O*R,_=sr(t,M,l)}return{x1:h,y1:f,x2:c,y2:u,stop:_}},getRadial:function(t,e,r,i,a,n,o,s,l){var h,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,_=o-a,d=s-n,y=fr(e,r,i,_,d,a+=f,n+=u,o+=f,s+=u,l),v=c(y,8),p=v[0],g=v[1],x=v[2],m=v[3],E=v[4],b=v[5],T=v[6],A=v[7],M=1,R=1;if(m!==E||A){if(h=[1,0,0,1,0,0],A){var S=Math.sin(A),O=Math.cos(A);h=[O,S,0,0,-S,O,0,0,0,0,1,0,0,0,0,1]}if(m!==x){var C=[M=m/x,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];h=P.multiply(h,C)}if(E!==x){var I=[1,0,0,0,0,R=E/x,0,0,0,0,1,0,0,0,0,1];h=P.multiply(h,I)}}var w=sr(t,x,l);return{cx:p,cy:g,tx:b,ty:T,r:x,stop:w,scx:M,scy:R,matrix:h,d:A}},getConic:function(t,e,r,i,a,n,o,s,l){var h=function(t,e,r,i,a,n,o,s){var l,h,f,u=n-i,_=o-a,d=c(hr(r,i,a,u,_,s),2),y=d[0],v=d[1];h=y>=i+.5*u?y-i:n-y;f=v>=a+.5*_?v-a:o-v;return l=Math.sqrt(Math.pow(h,2)+Math.pow(f,2)),[y,v,l,e]}(0,e,r,i,a,n,o,l),f=c(h,4),u=f[0],_=f[1],d=f[2];return d<<=1,{cx:u,cy:_,w:n-i,h:o-a,r:d*=s,deg:f[3],stop:sr(t,1,l)}},renderConic:function(t,e,r,i,a,n,o,s,l,h,f,c,u){var _=Xe.calRadius(a,n,o,s,l,h,f,c);if(_||(_=[[a,n],[a+o,n],[a+o,n+s],[a,n+s],[a,n]]),e===k.CANVAS||e===k.WEBGL){var d=Rt.getCacheCanvas(o,s,"__$$CONIC_GRADIENT$$__"),y=d.ctx.getImageData(0,0,o,s);re.getConicGradientImage(i.cx-a,i.cy-n,i.w,i.h,i.stop,y.data),d.ctx.putImageData(y,0,0),r.save(),r.beginPath(),ar(r,_),r.clip(),r.closePath(),r.drawImage(d.canvas,a,n),r.restore(),d.ctx.clearRect(0,0,o,s)}}},ur=it.isNil;function _r(t,e,r,i){ur(t.flexGrow)&&(t.flexGrow=e||0),ur(t.flexShrink)&&(t.flexShrink=r||0),ur(t.flexBasis)&&(t.flexBasis=i||0)}var dr={margin:["marginTop","marginRight","marginBottom","marginLeft"],padding:["paddingTop","paddingRight","paddingBottom","paddingLeft"],border:["borderTop","borderRight","borderBottom","borderLeft"],borderTop:["borderTopWidth","borderTopStyle","borderTopColor"],borderRight:["borderRightWidth","borderRightStyle","borderRightColor"],borderBottom:["borderBottomWidth","borderBottomStyle","borderBottomColor"],borderLeft:["borderLeftWidth","borderLeftStyle","borderLeftColor"],borderWidth:["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"],borderColor:["borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],borderStyle:["borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle"],borderRadius:["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],background:["backgroundColor","backgroundImage","backgroundRepeat","backgroundPosition"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],flex:["flexGrow","flexShrink","flexBasis"],translate:["translateX","translateY"],translate3d:["translateX","translateY","translateY"],scale:["scaleX","scaleY"],scale3d:["scaleX","scaleY","scaleZ"],rotate:["rotateZ"],skew:["skewX","skewY"],textStroke:["textStrokeWidth","textStrokeColor","textStrokeOver"],toFull:function(t,e){var r=this,i=t[e];if("background"===e)if(Array.isArray(i)){var a=i.length;if(ur(t.backgroundColor)){var n=/^\s*((transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\)))/i.exec(i[a-1]);n&&(t.backgroundColor=n[0],i=i.slice(0,a-1))}var o=[],s=[],l=[];i.forEach((function(e){if(ur(t.backgroundImage)){var r=Ht.gradient.exec(e);if(r)o.push(r[0]),e=e.replace(r[0],"");else{var a=Ht.img.exec(i);a&&(o.push(a[0]),e=e.replace(a[0],""))}}if(ur(t.backgroundRepeat)){var n=/(no-?)?repeat(-?[xy])?/i.exec(e);n&&s.push(n[0].toLowerCase())}if(ur(t.backgroundPosition)){var h=e.match(Ht.position);h&&l.push(h.join(" "))}})),o.length&&(t.backgroundImage=o),s.length&&(t.backgroundRepeat=s),l.length&&(t.backgroundPosition=l,this.toFull(t,"backgroundPosition"))}else{if(ur(t.backgroundImage)){var h=Ht.gradient.exec(i);if(h)t.backgroundImage=h[0],i=i.replace(h[0],"");else{var f=Ht.img.exec(i);f&&(t.backgroundImage=f[0],i=i.replace(f[0],""))}}if(ur(t.backgroundRepeat)){var c=/(no-?)?repeat(-?[xy])?/i.exec(i);c&&(t.backgroundRepeat=c[0].toLowerCase())}if(ur(t.backgroundColor)){var u=/^(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(i);u&&(t.backgroundColor=u[0],i=i.replace(u[0],""))}if(ur(t.backgroundPosition)){var _=i.match(Ht.position);_&&(t.backgroundPosition=_.join(" "),this.toFull(t,"backgroundPosition"))}}else if("flex"===e)if("none"===i)_r(t,0,0,"auto");else if("auto"===i)_r(t,1,1,"auto");else if(/^[\d.]+\s+[\d.]+\s+(auto|none|content)/.test(i)||/^[\d.]+\s+[\d.]+\s+[\d.]+[pxremvwhina%]*/.test(i)){var d=i.split(/\s+/);_r(t,parseFloat(d[0]),parseFloat(d[1]),d[2])}else if(/^[\d.]+\s+[\d.]+$/.test(i)){var y=i.split(/\s+/);_r(t,parseFloat(y[0]),parseFloat(y[1]),0)}else if(/^[\d.]+\s+[\d.]+[pxremvwhina%]+/.test(i)){var v=i.split(/\s+/);_r(t,parseFloat(v[0]),1,v[1])}else/^[\d.]+$/.test(i)?_r(t,parseFloat(i),1,0):/^[\d.]+[pxremvwhina%]+/i.test(i)?_r(t,1,1,i):_r(t,0,1,"auto");else if("flexFlow"===e)(i=i.toString().split(/\s+/)).length&&(ur(t.flexDirection),t.flexDirection=i[0],i.length>1&&(t.flexWrap=i[1]));else if("borderRadius"===e){1===(i=i.toString().split("/")).length&&(i[1]=i[0]);for(var p=0;p<2;p++){var g=i[p].toString().split(/\s+/);0===g.length?i[p]=[0,0,0,0]:1===g.length?i[p]=[g[0],g[0],g[0],g[0]]:2===g.length?i[p]=[g[0],g[1],g[0],g[1]]:3===g.length?i[p]=[g[0],g[1],g[2],g[1]]:i[p]=g.slice(0,4)}this[e].forEach((function(e,r){ur(t[e])&&(t[e]=i[0][r]+" "+i[1][r])}))}else if("backgroundPosition"===e){Array.isArray(i)||(i=[i]);var x=this[e].map((function(e){return ur(t[e])}));i.forEach((function(i){1===(i=i.toString().split(/\s+/)).length&&(i[1]="50%"),r[e].forEach((function(e,r){x[r]&&(t[e]=t[e]||[],t[e].push(i[r]))}))}))}else if(["translate","scale","skew"].indexOf(e)>-1){var m=i.toString().split(/\s*,\s*/);1===m.length&&(m[1]=m[0]),this[e].forEach((function(e,r){ur(t[e])&&(t[e]=m[r])}))}else if(["translate3d","scale3d"].indexOf(e)>-1){var E=i.toString().split(/\s*,\s*/);1===E.length?E[2]=E[1]=E[0]:2===E.length&&(E[2]="scale3d"===e?1:0),this[e].forEach((function(e,r){ur(t[e])&&(t[e]=E[r])}))}else if("margin"===e||"padding"===e)!function(t,e,r){var i=t[e];if(!ur(i)){var a=i.toString().match(/([-+]?[\d.]+[pxremvwhina%]*)|(auto)/gi);a&&(1===a.length?a[3]=a[2]=a[1]=a[0]:2===a.length?(a[2]=a[0],a[3]=a[1]):3===a.length&&(a[3]=a[1]),r.forEach((function(e,r){ur(t[e])&&(t[e]=a[r])})))}}(t,e,this[e]);else if(/^border((Top)|(Right)|(Bottom)|(Left))$/.test(e))!function(t,e){var r=t[e];if(!ur(r)){if(ur(t[e+"Width"])){var i=/\b[\d.]+[pxremvwhina%]*\b/i.exec(r);t[e+"Width"]=i?i[0]:0}if(ur(t[e+"Style"])){var a=/\b(solid|dashed|dotted)\b/i.exec(r);t[e+"Style"]=a?a[1]:"solid"}if(ur(t[e+"Color"])){var n=/#[0-9a-f]{3,8}/i.exec(r);n&&[4,7,9].indexOf(n[0].length)>-1?t[e+"Color"]=n[0]:/\btransparent\b/i.test(r)?t[e+"Color"]="transparent":(n=/rgba?\s*\(.+\)/i.exec(r),t[e+"Color"]=n?n[0]:"transparent")}}}(t,e);else if("textStroke"===e){var b=/(?:^|\s)([-+]?[\d.]+[pxremvwhina%]*)/.exec(i);b&&(t.textStrokeWidth=b[1]);var T=/(transparent)|(#[0-9a-f]{3,8})|(rgba?\s*\(.+?\))/i.exec(i);T&&(t.textStrokeColor=T[0]),/\bfill\b/i.test(i)?t.textStrokeOver="fill":t.textStrokeOver="none"}else this[e]&&this[e].forEach((function(e){ur(t[e])&&(t[e]=i)}));return t}},yr=b.STYLE_KEY,vr=[[yr.BACKGROUND_COLOR],[yr.BORDER_BOTTOM_COLOR],[yr.BORDER_LEFT_COLOR],[yr.BORDER_RIGHT_COLOR],[yr.BORDER_TOP_COLOR],[yr.COLOR],[yr.TEXT_STROKE_COLOR]],pr=[[yr.FONT_SIZE],[yr.BORDER_BOTTOM_WIDTH],[yr.BORDER_LEFT_WIDTH],[yr.BORDER_RIGHT_WIDTH],[yr.BORDER_TOP_WIDTH],[yr.LEFT],[yr.TOP],[yr.RIGHT],[yr.BOTTOM],[yr.FLEX_BASIS],[yr.WIDTH],[yr.HEIGHT],[yr.LINE_HEIGHT],[yr.MARGIN_BOTTOM],[yr.MARGIN_LEFT],[yr.MARGIN_TOP],[yr.MARGIN_RIGHT],[yr.PADDING_TOP],[yr.PADDING_RIGHT],[yr.PADDING_BOTTOM],[yr.PADDING_LEFT],[yr.STROKE_WIDTH],[yr.STROKE_MITERLIMIT],[yr.LETTER_SPACING],[yr.PERSPECTIVE],[yr.TEXT_STROKE_WIDTH]],gr=[[yr.BACKGROUND_IMAGE],[yr.FILL],[yr.STROKE]],xr=[[yr.BORDER_TOP_LEFT_RADIUS],[yr.BORDER_TOP_RIGHT_RADIUS],[yr.BORDER_BOTTOM_RIGHT_RADIUS],[yr.BORDER_BOTTOM_LEFT_RADIUS]],mr={};vr.forEach((function(t){mr[t]=!0}));var Er={};pr.forEach((function(t){Er[t]=!0}));var br={};xr.forEach((function(t){br[t]=!0}));var Tr={};gr.forEach((function(t){Tr[t]=!0}));var Ar=[[yr.TRANSLATE_X],[yr.TRANSLATE_Y],[yr.TRANSLATE_Z],[yr.SKEW_X],[yr.SKEW_Y],[yr.SCALE_X],[yr.SCALE_Y],[yr.SCALE_Z],[yr.ROTATE_X],[yr.ROTATE_Y],[yr.ROTATE_Z]],Mr={};Ar.forEach((function(t){Mr[t]=!0}));var Rr,Sr={KEY_COLOR:vr,KEY_EXPAND:Ar,KEY_GRADIENT:gr,KEY_LENGTH:pr,KEY_RADIUS:xr,COLOR_HASH:mr,EXPAND_HASH:Mr,GRADIENT_HASH:Tr,LENGTH_HASH:Er,RADIUS_HASH:br,GRADIENT_TYPE:{linear:!0,radial:!0,conic:!0}},Or=Bt.DOM,Cr=Bt.GEOM,Ir=b.STYLE_KEY,wr={},kr=[],Dr=a({},Ir.POINTER_EVENTS,!0),Lr=(a(Rr={},Ir.TRANSFORM,!0),a(Rr,Ir.TRANSLATE_X,!0),a(Rr,Ir.TRANSLATE_Y,!0),a(Rr,Ir.SKEW_X,!0),a(Rr,Ir.SKEW_Y,!0),a(Rr,Ir.SCALE_X,!0),a(Rr,Ir.SCALE_Y,!0),a(Rr,Ir.ROTATE_Z,!0),a(Rr,Ir.COLOR,!0),a(Rr,Ir.FONT_STYLE,!0),a(Rr,Ir.STROKE_WIDTH,!0),a(Rr,Ir.FILL,!0),a(Rr,Ir.STROKE_DASHARRAY,!0),a(Rr,Ir.STROKE_LINECAP,!0),a(Rr,Ir.STROKE_LINEJOIN,!0),a(Rr,Ir.STROKE_MITERLIMIT,!0),a(Rr,Ir.BACKGROUND_COLOR,!0),a(Rr,Ir.BACKGROUND_IMAGE,!0),a(Rr,Ir.BACKGROUND_POSITION_X,!0),a(Rr,Ir.BACKGROUND_POSITION_Y,!0),a(Rr,Ir.BACKGROUND_REPEAT,!0),a(Rr,Ir.BACKGROUND_SIZE,!0),a(Rr,Ir.STROKE,!0),a(Rr,Ir.BORDER_BOTTOM_COLOR,!0),a(Rr,Ir.BORDER_LEFT_COLOR,!0),a(Rr,Ir.BORDER_RIGHT_COLOR,!0),a(Rr,Ir.BORDER_TOP_COLOR,!0),a(Rr,Ir.BORDER_TOP_LEFT_RADIUS,!0),a(Rr,Ir.BORDER_TOP_RIGHT_RADIUS,!0),a(Rr,Ir.BORDER_BOTTOM_RIGHT_RADIUS,!0),a(Rr,Ir.BORDER_BOTTOM_LEFT_RADIUS,!0),a(Rr,Ir.VISIBILITY,!0),a(Rr,Ir.OPACITY,!0),a(Rr,Ir.Z_INDEX,!0),a(Rr,Ir.FILTER,!0),a(Rr,Ir.BOX_SHADOW,!0),a(Rr,Ir.OVERFLOW,!0),a(Rr,Ir.BACKGROUND_CLIP,!0),a(Rr,Ir.TEXT_STROKE_WIDTH,!0),a(Rr,Ir.TEXT_STROKE_COLOR,!0),a(Rr,Ir.TEXT_STROKE_OVER,!0),Rr),Fr={GEOM:wr,GEOM_KEY_SET:kr,IGNORE:Dr,REPAINT:Lr,addGeom:function(t,e,r){if(Array.isArray(e))e.forEach((function(e){Fr.addGeom(t,e,r)}));else if(e){wr.hasOwnProperty(e)||kr.push(e),(wr[e]=wr[e]||{})[t]=r||!0}},isIgnore:function(t){return Dr.hasOwnProperty(t)},isGeom:function(t,e){return t&&e&&wr.hasOwnProperty(e)&&wr[e].hasOwnProperty(t)},isRepaint:function(t,e){return Lr.hasOwnProperty(t)||Fr.isGeom(e,t)},isValid:function(t,e){return!!e&&(!!Or.hasOwnProperty(e)||(!("$"!==t.charAt(0)||!Cr.hasOwnProperty(e))||(wr.hasOwnProperty(e)?wr[e].hasOwnProperty(t):"translatePath"===e)))}};function Nr(t){if(t<=0)return 0;var e=Math.floor(3*t*Math.sqrt(2*Math.PI)/4+.5);return e<2&&(e=2),e%2==0&&e++,e}function Pr(t){return 3*Math.floor(.5*t)}Fr.addGeom("$line",["x1","y1","x2","y2","controlA","controlB","start","end"]),Fr.addGeom("$circle",["r"]),Fr.addGeom("$ellipse",["rx","ry"]),Fr.addGeom("$rect",["rx","ry"]),Fr.addGeom("$sector",["begin","end","edge","closure"]),Fr.addGeom("$polyline",["points","controls","start","end"]),Fr.addGeom("$polygon",["points","controls","start","end","booleanOperations"]);var Br,Hr,Gr,Yr={kernelSize:Nr,outerSize:function(t){return Pr(Nr(t))},outerSizeByD:Pr,gaussianWeight:function(t,e){for(var r=[],i=Math.floor(.5*e),a=0,n=i;n>=0;n--){var o=Math.pow(Math.E,-Math.pow(n,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(o),a+=o}for(var s=1;s<=i;s++){var l=Math.pow(Math.E,-Math.pow(s,2)/(2*Math.pow(t,2)))/(t*Math.sqrt(2*Math.PI));r.push(l),a+=l}if(1!==a)for(var h=0;h<e;h++)r[h]/=a;return r}},Wr=b.STYLE_KEY,Ur=b.style2Upper,Xr=b.STYLE_KEY,zr=Xr.POSITION,Vr=Xr.WIDTH,Kr=Xr.HEIGHT,jr=Xr.TRANSLATE_X,$r=Xr.TRANSLATE_Y,qr=Xr.TRANSLATE_Z,Zr=Xr.SCALE_X,Jr=Xr.SCALE_Y,Qr=Xr.SCALE_Z,ti=Xr.SKEW_X,ei=Xr.SKEW_Y,ri=Xr.ROTATE_X,ii=Xr.ROTATE_Y,ai=Xr.ROTATE_Z,ni=Xr.ROTATE_3D,oi=Xr.PERSPECTIVE,si=Xr.PERSPECTIVE_ORIGIN,li=Xr.TRANSFORM,hi=Xr.TRANSFORM_ORIGIN,fi=Xr.BACKGROUND_IMAGE,ci=Xr.BACKGROUND_COLOR,ui=Xr.BACKGROUND_POSITION_X,_i=Xr.BACKGROUND_POSITION_Y,di=Xr.BACKGROUND_SIZE,yi=Xr.OPACITY,vi=Xr.Z_INDEX,pi=Xr.COLOR,gi=Xr.FONT_SIZE,xi=Xr.FONT_FAMILY,mi=Xr.FONT_WEIGHT,Ei=Xr.FONT_STYLE,bi=Xr.LINE_HEIGHT,Ti=Xr.TEXT_ALIGN,Ai=Xr.FILTER,Mi=Xr.VISIBILITY,Ri=Xr.BOX_SHADOW,Si=Xr.POINTER_EVENTS,Oi=Xr.FILL,Ci=Xr.STROKE,Ii=Xr.STROKE_WIDTH,wi=Xr.STROKE_DASHARRAY,ki=Xr.DISPLAY,Di=Xr.FLEX_DIRECTION,Li=Xr.FLEX_GROW,Fi=Xr.FLEX_SHRINK,Ni=Xr.FLEX_BASIS,Pi=Xr.JUSTIFY_CONTENT,Bi=Xr.ALIGN_SELF,Hi=Xr.ALIGN_ITEMS,Gi=Xr.MATRIX,Yi=Xr.LETTER_SPACING,Wi=Xr.BACKGROUND_CLIP,Ui=Xr.WHITE_SPACE,Xi=Xr.TEXT_OVERFLOW,zi=Xr.LINE_CLAMP,Vi=Xr.ORDER,Ki=Xr.FLEX_WRAP,ji=Xr.TRANSLATE_PATH,$i=Xr.TEXT_STROKE_COLOR,qi=Xr.TEXT_STROKE_WIDTH,Zi=Xr.TEXT_STROKE_OVER,Ji=Xr.WRITING_MODE,Qi=D.AUTO,ta=D.PX,ea=D.PERCENT,ra=D.NUMBER,ia=D.INHERIT,aa=D.DEG,na=D.RGBA,oa=D.STRING,sa=D.REM,la=D.VW,ha=D.VH,fa=D.VMAX,ca=D.VMIN,ua=D.GRADIENT,_a=D.calUnit,da=it.isNil,ya=it.rgba2int,va=it.equalArr,pa=it.replaceRgba2Hex,ga=Fr.isGeom,xa=Fr.GEOM,ma=Fr.GEOM_KEY_SET,Ea=Bt.VALID_STRING_VALUE,ba=Sr.COLOR_HASH,Ta=Sr.LENGTH_HASH,Aa=Sr.RADIUS_HASH,Ma=Sr.GRADIENT_HASH,Ra=Sr.EXPAND_HASH,Sa=Sr.GRADIENT_TYPE,Oa={translateX:jr,translateY:$r,translateZ:qr,scaleX:Zr,scaleY:Jr,scaleZ:Qr,skewX:ti,skewY:ei,rotateX:ri,rotateY:ii,rotateZ:ai,rotate:ai};function Ca(t,e){t===Zr||t===Jr||t===Qr?e[1]=ra:t===jr||t===$r||t===qr?e[1]===ra&&(e[1]=ta):t===oi?[ra,ea,aa].indexOf(e[1])>-1&&(e[1]=ta):e[1]===ra&&(e[1]=aa)}function Ia(t){return da(t)&&(t=""),(t=t.toString()).indexOf("-")>-1?t.toString().toLowerCase().replace(/-([a-z])/gi,(function(t,e){return e.toUpperCase()})):t}function wa(t,e){e=Ia(e);var r=Ea[t],i=r.indexOf(e);return i>-1?r[i]:r[0]}function ka(t){var e=t[gi],r=La(t[xi]),i=Da(t,r);return.5*(t[bi]-i)+e*(Ct.info[r]||Ct.info[Rt.defaultFontFamily]||Ct.info.arial).blr}function Da(t,e){return e||(e=La(t[xi])),t[gi]*(Ct.info[e]||Ct.info[Rt.defaultFontFamily]||Ct.info.arial).lhr}function La(t){for(var e=t.split(/\s*,\s*/),r=0,i=e.length;r<i;r++){var a=e[r].replace(/^['"]/,"").replace(/['"]$/,"");if(Ct.hasLoaded(a)||Rt.checkSupportFontFamily(a))return a}return Rt.defaultFontFamily}function Fa(t,e,r){for(t*=.01;e;){var i=e.currentStyle[r];if(i[1]===Qi){if(r!==Vr)break;e=e.domParent}else{if(i[1]===ta)return t*i[0];if(i[1]===ea)t*=.01*i[0],e=e.domParent;else{if(i[1]===sa)return t*i[0]*e.root.computedStyle[gi];if(i[1]===la)return t*i[0]*e.root.width*.01;if(i[1]===ha)return t*i[0]*e.root.height*.01;if(i[1]===fa)return t*i[0]*Math.max(e.root.width,e.root.height)*.01;if(i[1]===ca)return t*i[0]*Math.min(e.root.width,e.root.height)*.01}}}return t}var Na=(a(Br={},zr,!0),a(Br,ki,!0),a(Br,Wr.BACKGROUND_REPEAT,!0),a(Br,Di,!0),a(Br,Li,!0),a(Br,Fi,!0),a(Br,Ki,!0),a(Br,Pi,!0),a(Br,Hi,!0),a(Br,Bi,!0),a(Br,Wr.OVERFLOW,!0),a(Br,Wr.MIX_BLEND_MODE,!0),a(Br,Wr.STROKE_LINECAP,!0),a(Br,Wr.STROKE_LINEJOIN,!0),a(Br,Wr.STROKE_MITERLIMIT,!0),a(Br,Wr.FILL_RULE,!0),a(Br,yi,!0),a(Br,vi,!0),a(Br,Wi,!0),a(Br,Xi,!0),a(Br,zi,!0),Br),Pa=(a(Hr={},ci,!0),a(Hr,Wr.BORDER_TOP_COLOR,!0),a(Hr,Wr.BORDER_RIGHT_COLOR,!0),a(Hr,Wr.BORDER_BOTTOM_COLOR,!0),a(Hr,Wr.BORDER_LEFT_COLOR,!0),Hr),Ba=(a(Gr={},Wr.BORDER_TOP_LEFT_RADIUS,!0),a(Gr,Wr.BORDER_TOP_RIGHT_RADIUS,!0),a(Gr,Wr.BORDER_BOTTOM_RIGHT_RADIUS,!0),a(Gr,Wr.BORDER_BOTTOM_LEFT_RADIUS,!0),a(Gr,hi,!0),a(Gr,si,!0),Gr);var Ha={normalize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!it.isObject(t))return{};var r={},i=(t=it.extend({},t)).border;if(i&&dr.toFull(t,"border"),["borderTop","borderRight","borderBottom","borderLeft"].forEach((function(e){dr.toFull(t,e)})),(i=t.borderWidth)&&dr.toFull(t,"borderWidth"),(i=t.borderColor)&&dr.toFull(t,"borderColor"),(i=t.borderStyle)&&dr.toFull(t,"borderStyle"),(i=t.borderRadius)&&dr.toFull(t,"borderRadius"),(i=t.background)&&dr.toFull(t,"background"),i=t.backgroundPosition,da(i)||dr.toFull(t,"backgroundPosition"),(i=t.flex)&&dr.toFull(t,"flex"),(i=t.flexFlow)&&dr.toFull(t,"flexFlow"),i=t.margin,da(i)||dr.toFull(t,"margin"),i=t.padding,da(i)||dr.toFull(t,"padding"),(i=t.textStroke)&&dr.toFull(t,"textStroke"),(i=t.rotate3d)&&dr.toFull(t,"rotate3d"),["translate","scale","skew","translate3d","scale3d","rotate"].forEach((function(e){i=t[e],da(i)||dr.toFull(t,e)})),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate3d"].forEach((function(e){void 0!==t[e]&&t.transform&&Rt.warn('Can not use expand style "'.concat(e,'" with transform'))})),e.forEach((function(e){var r=e.k,i=e.v;da(t[r])&&(t[r]=i)})),void 0!==(i=t.backgroundImage)&&(i?Array.isArray(i)?r[fi]=i.map((function(t){return t?Ht.gradient.test(t)?[cr.parseGradient(t),ua]:Ht.img.test(t)?[Ht.img.exec(t)[2],oa]:null:null})):Ht.gradient.test(i)?r[fi]=[[cr.parseGradient(i),ua]]:Ht.img.test(i)?r[fi]=[[Ht.img.exec(i)[2],oa]]:r[fi]=[null]:r[fi]=[null]),void 0!==(i=t.backgroundColor)){var a=/^#[0-9a-f]{3,8}/i.exec(i=i||"transparent");a&&[4,7,9].indexOf(a[0].length)>-1?r[ci]=[ya(a[0]),na]:(a=/rgba?\s*\(.+\)/i.exec(i),r[ci]=[ya(a?a[0]:[0,0,0,0]),na])}if(["backgroundPositionX","backgroundPositionY"].forEach((function(e,a){void 0!==(i=t[e])&&(i=i||0,e=a?_i:ui,Array.isArray(i)||(i=[i]),r[e]=i.map((function(t){if(/^[-+]?[\d.]/.test(t)){var e=_a(t);return[ra,aa].indexOf(e[1])>-1&&(e[1]=ta),e}return[{top:0,left:0,center:50,right:100,bottom:100}[t]||0,ea]})))})),void 0!==(i=t.backgroundSize)&&(Array.isArray(i)||(i=[i]),r[di]=i.map((function(t){if(!t)return[[0,Qi],[0,Qi]];var e=t.toString().match(/\b(?:([-+]?[\d.]+[pxremvwhina%]*)|(contain|cover|auto))/gi);if(e){1===e.length&&("contain"===e[0].toLowerCase()||"cover"===e[0].toLowerCase()?e[1]=e[0].toLowerCase():e[1]="auto");for(var r=[],i=0;i<2;i++){var a=e[i].toLowerCase();if(/^[-+]?[\d.]/.test(a)){var n=_a(a);[ra,aa].indexOf(n[1])>-1&&(n[1]=ta),r.push(n)}else"contain"===a||"cover"===a?r.push([a,oa]):r.push([0,Qi])}return r}return[[0,Qi],[0,Qi]]}))),["Top","Right","Bottom","Left"].forEach((function(e){var i=t[e="border"+e+"Color"];void 0!==i&&(r[Wr[Ur(e)]]=[ya(i||"transparent"),na])})),["TopLeft","TopRight","BottomRight","BottomLeft"].forEach((function(e){var i=t[e="border"+e+"Radius"];if(void 0!==i){var a=(i=i||0).toString().split(/\s+/);1===a.length&&(a[1]=a[0]);for(var n=0;n<2;n++){var o=a[n];if(/^[-+]?[\d.]/.test(o)){var s=_a(o);[ra,aa].indexOf(s[1])>-1&&(s[1]=ta),s[0]<0&&(s[0]=0),a[n]=s}else a[n]=[0,ta]}r[Wr[Ur(e)]]=a}})),null===(i=t.transform))r[li]=null;else if(void 0!==i){var n=r[li]=[],o=(i||"").toString().match(/\w+\(.+?\)/g);o&&o.forEach((function(t){var e=t.indexOf("("),r=t.slice(0,e),i=t.slice(e+1,t.length-1);if("matrix"===r){var a=i.toString().split(/\s*,\s*/);a=a.map((function(t){return parseFloat(t)})),a.length>6&&(a=a.slice(0,6)),6===a.length&&n.push([Gi,[a[0],a[1],0,0,a[2],a[3],0,0,0,0,1,0,a[4],a[5],0,1]])}else if("matrix3d"===r){var o=i.toString().split(/\s*,\s*/);o=o.map((function(t){return parseFloat(t)})),o.length>16&&(o=o.slice(0,16)),16===o.length&&n.push([Gi,o])}else if("perspective"===r){var s=_a(i);s[0]<0&&(s[0]=0),Ca(oi,s),n.push([oi,s])}else if("rotate3d"===r){var l=i.toString().split(/\s*,\s*/);if(4===l.length){var h=_a(l[3]);Ca(ni,h),l[0]=parseFloat(l[0].replace("(","")),l[1]=parseFloat(l[1]),l[2]=parseFloat(l[2]),l[3]=h,n.push([ni,l])}}else if(Oa.hasOwnProperty(r)){var f=Oa[r],c=_a(i);Ca(f,c),n.push([f,c])}else if({translate:!0,scale:!0,skew:!0}.hasOwnProperty(r)){var u=i.toString().split(/\s*,\s*/);if(1===u.length&&(u[1]="scale"===r?u[0]:[0]),2===u.length){var _=Wr[Ur(r+"X")],d=Wr[Ur(r+"Y")],y=_a(u[0]),v=_a(u[1]);Ca(_,y),Ca(d,v),n.push([_,y]),n.push([d,v])}}else if({translate3d:!0,scale3d:!0}.hasOwnProperty(r)){var p=i.toString().split(/\s*,\s*/);if(1===p.length?(p[1]="scale3d"===r?[1]:[0],p[2]="scale3d"===r?[1]:[0]):2===p.length&&(p[2]="scale3d"===r?[1]:[0]),3===p.length){var g=Wr[Ur(r+"X")],x=Wr[Ur(r+"Y")],m=Wr[Ur(r+"Z")],E=_a(p[0]),b=_a(p[1]),T=_a(p[2]);Ca(g,E),Ca(x,b),Ca(m,T),n.push([g,E]),n.push([x,b]),n.push([m,T])}}}))}if(void 0!==(i=t.perspective)){var s=_a(i||0);s[0]<0&&(s[0]=0),Ca(oi,s),r[oi]=s}if(["perspectiveOrigin","transformOrigin"].forEach((function(e){if(void 0!==(i=t[e])){null===i&&(i="");var a=r[Wr[Ur(e)]]=[],n=i.toString().match(Ht.position);if(n){1===n.length&&(n[1]=n[0]);for(var o=0;o<2;o++){var s=n[o];if(/^[-+]?[\d.]/.test(s)){var l=_a(s);[ra,aa].indexOf(l[1])>-1&&(l[1]=ta),a.push(l)}else a.push([{top:0,left:0,center:50,right:100,bottom:100}[s],ea]),da(a[o][0])&&(a[o][0]=50)}}else a.push([50,ea]),a.push([50,ea])}})),["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","skewX","skewY","rotateX","rotateY","rotateZ","rotate"].forEach((function(e){var i=t[e];if(void 0!==i){null===i&&(i=0===e.indexOf("scale")?1:0);var a=Oa[e],n=_a(i);Ca(a,n),r[a]=n}})),void 0!==(i=t.rotate3d)){var l=(i||"").toString().split(/\s*,\s*/);if(4===l.length){var h=_a(l[3]);Ca(ni,h),l[0]=parseFloat(l[0].replace("(","")),l[1]=parseFloat(l[1]),l[2]=parseFloat(l[2]),l[3]=h}r[ni]=l}if(void 0!==(i=t.opacity)&&(null===i&&(i=1),i=parseFloat(i),isNaN(i)?r[yi]=1:(i=Math.max(i,0),i=Math.min(i,1),r[yi]=i)),void 0!==(i=t.zIndex)&&(r[vi]=parseInt(i)||0),["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","top","right","bottom","left","width","height"].forEach((function(e){var i=t[e];if(void 0!==i){"auto"===i?i=[0,Qi]:(i=_a(i||0),[ra,aa].indexOf(i[1])>-1&&(i[1]=ta));var a=Wr[Ur(e)];r[a]=i,{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0,borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0,width:!0,height:!0}.hasOwnProperty(e)&&i[0]<0&&(i[0]=0)}})),void 0!==(i=t.flexBasis))if(/content/i.test(i))r[Ni]=[i,oa];else if(/^[\d.]/.test(i)){var f=r[Ni]=_a(i);f[0]=Math.max(f[0],0),[ra,aa].indexOf(f[1])>-1&&(f[1]=ta)}else r[Ni]=[0,Qi];if(void 0!==(i=t.order)&&(r[Vi]=parseInt(i)||0),void 0!==(i=t.color)&&(/inherit/i.test(i)?r[pi]=[[],ia]:Ht.gradient.test(i)?r[pi]=[cr.parseGradient(i),ua]:r[pi]=[ya(i),na]),void 0!==(i=t.textStrokeColor)&&(/inherit/i.test(i)?r[$i]=[[],ia]:Ht.gradient.test(i)?r[$i]=[cr.parseGradient(i),ua]:r[$i]=[ya(i),na]),void 0!==(i=t.fontSize))if(/inherit/i.test(i))r[gi]=[0,ia];else{var c=_a(i);c<0?r[gi]=[0,ia]:([ra,aa].indexOf(c[1])>-1&&(c[1]=ta),r[gi]=c)}if(void 0!==(i=t.textStrokeWidth))if(/inherit/i.test(i))r[qi]=[0,ia];else{var u=_a(i);u<0?r[qi]=[0,ia]:([ra,aa,ea].indexOf(u[1])>-1&&(u[1]=ta),r[qi]=u)}if(void 0!==(i=t.textStrokeOver))if(null===i||/inherit/i.test(i))r[Zi]=[0,ia];else{var _=Bt.INHERIT.textStrokeOver;/fill/i.test(i)&&(_="fill"),r[Zi]=[_,oa]}if(void 0!==(i=t.fontWeight)&&(/bold/i.test(i)?r[mi]=[700,ra]:/normal/i.test(i)?r[mi]=[400,ra]:/lighter/i.test(i)?r[mi]=[200,ra]:/inherit/i.test(i)?r[mi]=[0,ia]:r[mi]=[Math.max(0,parseInt(i))||400,ra]),void 0!==(i=t.fontStyle))if(null===i||/inherit/i.test(i))r[Ei]=[0,ia];else{var d=Bt.INHERIT.fontStyle;/italic/i.test(i)?d="italic":/oblique/i.test(i)&&(d="oblique"),r[Ei]=[d,oa]}if(void 0!==(i=t.fontFamily)&&(null===i||/inherit/i.test(i)?r[xi]=[0,ia]:r[xi]=[i.toString().toLowerCase().replace(/['"]/,"").replace(/\s*,\s*/g,","),oa]),void 0!==(i=t.writingMode))if(null===i||/inherit/i.test(i))r[Ji]=[0,ia];else{var y=Bt.INHERIT.writingMode;/vertical-?rl/i.test(i)?y="verticalRl":/vertical-?lr/i.test(i)&&(y="verticalLr"),r[Ji]=[y,oa]}if(void 0!==(i=t.textAlign))if(null===i||/inherit/i.test(i))r[Ti]=[0,ia];else{var v="left";/center/i.test(i)?v="center":/right/i.test(i)&&(v="right"),r[Ti]=[v,oa]}if(void 0!==(i=t.lineHeight))if(/inherit/i.test(i))r[bi]=[0,ia];else if(/normal/i.test(i))r[bi]=[0,Qi];else if(/^[\d.]+/i.test(i)){var p=_a(i);[aa].indexOf(p[1])>-1&&(p[1]=ra),r[bi]=p}else{var g=Math.max(0,parseFloat(i))||"normal";r[bi]="normal"===g?[null,Qi]:[g,ra]}if(void 0!==(i=t.letterSpacing))if(null===i||/inherit/i.test(i))r[Yi]=[0,ia];else if(/normal/i.test(i))r[Yi]=[0,ta];else if(/^[-+]?[\d.]/.test(i)){var x=_a(i);[ra,aa].indexOf(x[1])>-1&&(x[1]=ta),r[Yi]=x}else r[Yi]=[parseFloat(i)||0,ta];if(void 0!==(i=t.whiteSpace)&&(null===i||/inherit/i.test(i)?r[Ui]=[0,ia]:r[Ui]=[i,oa]),void 0!==(i=t.lineClamp)&&(i=parseInt(i)||0,r[zi]=Math.max(0,i)),void 0!==(i=t.fill)&&(i?Array.isArray(i)?i.length?r[Oi]=i.map((function(t){return t?Ht.gradient.test(t)?[cr.parseGradient(t),ua]:[ya(t),na]:["none",oa]})):r[Oi]=[["none",oa]]:Ht.gradient.test(i)?r[Oi]=[[cr.parseGradient(i),ua]]:r[Oi]=[[ya(i),na]]:r[Oi]=[["none",oa]]),void 0!==(i=t.stroke)&&(i?Array.isArray(i)?i.length?r[Ci]=i.map((function(t){return t?Ht.gradient.test(t)?[cr.parseGradient(t),ua]:[ya(t),na]:["none",oa]})):r[Ci]=[["none",oa]]:Ht.gradient.test(i)?r[Ci]=[[cr.parseGradient(i),ua]]:r[Ci]=[[ya(i),na]]:r[Ci]=[["none",oa]]),void 0!==(i=t.strokeWidth)&&(Array.isArray(i)||(i=[i]),r[Ii]=i.map((function(t){var e=_a(t);return[ra,aa].indexOf(e[1])>-1&&(e[1]=ta),e[0]=Math.max(e[0],0),e}))),void 0!==(i=t.strokeDasharray))if(Array.isArray(i))r[wi]=i.map((function(t){var e=(t||"").toString().match(/[\d.]+/g);return e?(e=e.map((function(t){return parseFloat(t)})),e.length%2==1&&e.push(e[e.length-1]),e):[]}));else{var m=(i||"").toString().match(/[\d.]+/g);m?((m=m.map((function(t){return parseFloat(t)}))).length%2==1&&m.push(m[m.length-1]),r[wi]=[m]):r[wi]=[[]]}if(void 0!==(i=t.filter)){var E=null,b=(pa(i)||"").match(/[\w-]+\s*\(.+?\)/gi);b&&b.forEach((function(t){var e=/([\w-]+)\s*\((\s*.+\s*)\)/i.exec(t);if(e){var r=e[1].toLowerCase(),i=e[2];if("drop-shadow"===r||"dropshadow"===r){var a=/([-+]?[\d.]+[pxremvwhina%]*)[\s,]+([-+]?[\d.]+[pxremvwhina%]*)[\s,]+(?:([-+]?[\d.]+[pxremvwhina%]*)[\s,])?([-+]?[\d.]+[pxremvwhina%]*\s*)?/gi.exec(t);if(a){E=E||[];for(var n=[],o=1;o<=4;o++){var s=a[o];if(s){var l=_a(s);[ra,aa].indexOf(l[1])>-1&&(l[1]=ta),o>2&&l[0]<0&&(l=0),n.push(l)}else n.push([0,1])}var h=/#[a-f\d]{3,8}/i.exec(t);h?n.push(ya(h[0])):n.push([0,0,0,1]),E.push(["dropShadow",n])}}else{var f=/([-+]?[\d.]+\s*[pxremvwhdg%]*)/i.exec(i);if(f){E=E||[];var c=_a(f[0]);if("blur"===r){if([aa,ea].indexOf(c[1])>-1)return;c[1]===ra&&(c[1]=ta),c[0]=Math.max(c[0],0),E.push([r,c])}else if("hue-rotate"===r||"huerotate"===r){if(-1===[ra,aa].indexOf(c[1]))return;c[1]=aa,E.push(["hueRotate",c])}else if("saturate"===r||"brightness"===r||"grayscale"===r||"contrast"===r||"sepia"===r||"invert"===r){if(-1===[ra,ea].indexOf(c[1]))return;c[0]=Math.max(c[0],0),c[1]=ea,E.push([r,c])}}}}})),r[Ai]=E}if(void 0!==(i=t.visibility))if(null===i||/inherit/i.test(i))r[Mi]=[0,ia];else{var T=Bt.INHERIT.visibility;/hidden/i.test(i)&&(T="hidden"),r[Mi]=[T,oa]}if(void 0!==(i=t.pointerEvents))if(null===i||/inherit/i.test(i))r[Si]=[0,ia];else{var A=Bt.INHERIT.pointerEvents;/none/i.test(i)&&(A="none"),r[Si]=[A,oa]}if(void 0!==(i=t.boxShadow)){var M=null,R=(pa(i)||"").split(",");R&&R.forEach((function(t){var e=/([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*)\s*([-+]?[\d.]+[pxremvwhina%]*\s*)?([-+]?[\d.]+[pxremvwhina%]*\s*)?/i.exec(t);if(e){M=M||[];for(var r=[],i=1;i<=4;i++){var a=e[i];if(a){var n=_a(a);[ra,aa].indexOf(n[1])>-1&&(n[1]=ta),i>2&&n[0]<0&&(n=0),r.push(n)}else r.push([0,1])}var o=/#[a-f\d]{3,8}/i.exec(t);o?r.push(ya(o[0])):r.push([0,0,0,1]),r.push(/inset/i.test(t)?"inset":"outset"),M.push(r)}})),r[Ri]=M}return["position","display","flexDirection","flexWrap","justifyContent","alignItems","alignSelf","alignContent","overflow","mixBlendMode","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","backgroundClip","textOverflow"].forEach((function(e){t.hasOwnProperty(e)&&(r[Wr[Ur(e)]]=wa(e,t[e]))})),["flexGrow","flexShrink"].forEach((function(e){t.hasOwnProperty(e)&&(r[Wr[Ur(e)]]=Math.max(parseFloat(t[e])||0,0))})),void 0!==(i=t.zIndex)&&(r[vi]=parseFloat(i)||0),["backgroundRepeat","strokeLinecap","strokeLinejoin","strokeMiterlimit","fillRule"].forEach((function(e){if(t.hasOwnProperty(e)){var i=t[e];Array.isArray(i)||(i=[i]),"backgroundRepeat"===e&&i.forEach((function(t,e){t&&(i[e]=Ia(t))})),r[Wr[Ur(e)]]=i}})),ma.forEach((function(e){t.hasOwnProperty(e)&&(r[e]=t[e])})),r},setFontStyle:function(t){var e=t[gi]||0,r=t[xi]||Rt.defaultFontFamily||"arial";return/\s/.test(r)&&(r='"'+r.replace(/"/g,'\\"')+'"'),(t[Ei]||"normal")+" "+(t[mi]||"400")+" "+e+"px/"+e+"px "+r},getBaseline:ka,getVerticalBaseline:function(t){return t[bi]-ka(t)},calRelative:function(t,e,r,i,a){return r[1]===Qi?r=0:[ta,ra].indexOf(r[1])>-1?r=r[0]:r[1]===ea?r=Fa(r[0],i,a?Vr:Kr):r[1]===sa?r=r[0]*i.root.computedStyle[gi]:r[1]===la?r=r[0]*i.root.width*.01:r[1]===ha?r=r[0]*i.root.height*.01:r[1]===fa?r=r[0]*Math.max(i.root.width,i.root.height)*.01:r[1]===ca&&(r=r[0]*Math.min(i.root.width,i.root.height)*.01),r},equalStyle:function(t,e,r,i){if(!e||!r)return e===r;if(t===li){if(e.length!==r.length)return!1;for(var a=0,n=e.length;a<n;a++){var o=e[a],s=r[a];if(o[0]!==s[0])return!1;if(!va(o[1],s[1]))return!1}return!0}if(t===Ai){if(e.length!==r.length)return!1;for(var l=0,h=e.length;l<h;l++)if(!va(e[l],r[l]))return!1}if(t===di){if(e.length!==r.length)return!1;for(var f=0,c=e.length;f<c;f++){var u=e[f],_=r[f];if(u[0][0]!==_[0][0]||u[0][1]!==_[0][1]||u[1][0]!==_[1][0]||u[1][1]!==_[1][1])return!1}return!0}if(t===hi||Aa.hasOwnProperty(t))return e[0][0]===r[0][0]&&e[0][1]===r[0][1]&&e[1][0]===r[1][0]&&e[1][1]===r[1][1];if(t===ui||t===_i||Ta.hasOwnProperty(t)||Ra.hasOwnProperty(t))return e[0]===r[0]&&e[1]===r[1];if(t===Ri)return va(e,r);if(t===pi||t===$i){if(e[1]!==r[1])return!1;if(e[1]===na)return va(e[0],r[0])}if(ba.hasOwnProperty(t))return e[1]===r[1]&&va(e[0],r[0]);if(Ma.hasOwnProperty(t)&&e.k===r.k&&Sa.hasOwnProperty(e.k)){var d=e.v,y=r.v;if(e.d!==r.d||d.length!==y.length)return!1;for(var v=0,p=d.length;v<p;v++){var g=d[v],x=y[v];if(g.length!==x.length)return!1;for(var m=0;m<4;m++)if(g[0][m]!==x[0][m])return!1;if(g.length>1&&(g[1][0]!==x[1][0]||g[1][1]!==x[1][1]))return!1}return!0}return ga(i.tagName,t)&&(i.isMulti||Array.isArray(e)&&Array.isArray(r))?va(e,r):e===r},isRelativeOrAbsolute:function(t){var e=t.currentStyle[zr];return"relative"===e||"absolute"===e},cloneStyle:function(t,e){e||(e=Object.keys(t).map((function(t){return xa.hasOwnProperty(t)||(t=parseInt(t)),t})));for(var r={},i=0,a=e.length;i<a;i++){var n=e[i],o=t[n];if(n===fi)r[n]=o.map((function(t){return t[1]===ua?[it.clone(t[0]),t[1]]:t}));else if(n===Oi||n===Ci)r[n]=o.map((function(t){return t[1]===ua?[it.clone(t[0]),t[1]]:t[1]===na?[t[0].slice(0),t[1]]:t}));else if(n===li){if(o){for(var s=o.slice(0),l=0,h=s.length;l<h;l++)s[l]=s[l].slice(0),s[l][1]=s[l][1].slice(0);r[n]=s}}else if(n===Ai){if(o){for(var f=o.slice(0),c=0,u=f.length;c<u;c++){f[c]=f[c].slice(0);var _=f[c][0];f[c][1]=f[c][1].slice(0),"dropShadow"===_&&function(){var t=f[c][1];t.forEach((function(e,r){t[r]=t[r].slice(0)}))}()}r[n]=f}}else if(n===Ri)o&&(o=o.map((function(t){var e=t.slice(0);return e[4]=e[4].slice(0),e})),r[n]=o);else if(n===ji)o&&(r[n]=o.map((function(t){return t.slice(0)})));else if(n===pi||n===$i)o&&(o[1]===ua?r[n]=[it.clone(o[0]),o[1]]:o[1]===na?r[n]=[o[0].slice(0),o[1]]:r[n]=o.slice(0));else if(Na.hasOwnProperty(n))r[n]=o;else if(xa.hasOwnProperty(n))r[n]=it.clone(o);else if(o){var d=r[n]=o.slice(0);if(n===ui||n===_i)for(var y=0,v=d.length;y<v;y++)d[y]=d[y].slice(0);else if(n===di)for(var p=0,g=d.length;p<g;p++)d[p]=d[p].slice(0),d[p][0]=d[p][0].slice(0),d[p][1]=d[p][1].slice(0);else if(Pa.hasOwnProperty(n))d[0]=d[0].slice(0);else if(Ba.hasOwnProperty(n))d[0]=d[0].slice(0),d[1]=d[1].slice(0);else if(n===li)for(var x=0,m=d.length;x<m;x++)d[x]=d[x].slice(0);else n===ni&&(d[3]=d[3].slice(0))}}return r},calNormalLineHeight:Da,calFontFamily:La,spreadBoxShadow:function(t,e){var r=c(t,4),i=r[0],a=r[1],n=r[2],o=r[3];if(Array.isArray(e)){var s=0,l=0,h=0,f=0;e.forEach((function(t){var e=c(t,6),r=e[0],i=e[1],a=e[2],n=e[3],o=e[4];if("inset"!==e[5]&&o[3]>0){var u=Yr.outerSize(a);u+=n,s=Math.min(s,r-u),l=Math.min(l,r-u),h=Math.max(h,r+u),f=Math.max(f,i+u)}})),i+=s,a+=l,n+=h,o+=f}return[i,a,n,o]},spreadFilter:function(t,e){var r=c(t,4),i=r[0],a=r[1],n=r[2],o=r[3];return Array.isArray(e)&&e.forEach((function(t){var e=c(t,2),r=e[0],s=e[1];if("blur"===r&&s>0){var l=Yr.kernelSize(s),h=Yr.outerSizeByD(l);h&&(i-=h,a-=h,n+=h,o+=h)}else if("dropShadow"===r){var f=Yr.kernelSize(s[2]),u=Yr.outerSizeByD(f);(s[0]||s[1]||u)&&((s[0]<=0||s[0]>0&&s[0]<u)&&(i+=s[0]-u),(s[1]<=0||s[1]>0&&s[1]<u)&&(a+=s[1]-u),(s[0]<0&&-s[0]<u||s[0]>=0)&&(n+=s[0]+u),(s[1]<0&&-s[1]<u||s[1]>=0)&&(o+=s[1]+u))}})),[i,a,n,o]}};function Ga(t,e,r,i){var a=r-t,n=i-e,o=Math.atan(Math.abs(n)/Math.abs(a));return a<0&&n>=0?Math.PI-o:a<0&&n<0?o-Math.PI:a>=0&&n>=0?o:-o}function Ya(t){var e=Math.sin(t),r=Math.cos(t),i=P.identity();return i[0]=i[5]=r,i[1]=e,i[4]=-e,i}function Wa(t,e){var r=c(t,6),i=r[0],a=r[1],n=r[2],o=r[3],s=r[4],l=r[5],h=c(e,6),f=h[0],u=h[1],_=h[2],d=h[3],y=h[4],v=(n-i)*(l-a)-(s-i)*(o-a),p=(_-f)*(h[5]-u)-(y-f)*(d-u);return v>0&&p<0||v<0&&p>0}var Ua={exchangeOrder:function(t,e){var r=function(t){var e=c(t,6),r=e[0],i=e[1],a=e[2],n=e[3],o=e[4],s=e[5],l=[0,1,2];if(a<r&&a<o){var h=[a,n,r,i];r=h[0],i=h[1],a=h[2],n=h[3],l[0]=1,l[1]=0}else if(o<a&&o<r){var f=[o,s,r,i];r=f[0],i=f[1],o=f[2],s=f[3],l[0]=2,l[2]=0}if(r===a){if(i>n){var u=[a,n,r,i];r=u[0],i=u[1],a=u[2],n=u[3];var _=l[0];l[0]=l[1],l[1]=_}}else if(r===o&&i>s){var d=[o,s,r,i];r=d[0],i=d[1],o=d[2],s=d[3];var y=l[0];l[0]=l[2],l[2]=y}if((a-r)*(s-i)-(o-r)*(n-i)<0){var v=[o,s,a,n];a=v[0],n=v[1],o=v[2],s=v[3];var p=l[1];l[1]=l[2],l[2]=p}return[r,i,a,n,o,s,l]}(t),i=c(r,7),a=i[0],n=i[1],o=i[2],s=i[3],l=i[4],h=i[5],f=function(t,e){for(var r=[],i=0,a=e.length;i<a;i++){var n=e[i];r.push(t[2*n]),r.push(t[2*n+1])}return r}(e,i[6]),u=c(f,6);return[[a,n,o,s,l,h],[u[0],u[1],u[2],u[3],u[4],u[5]]]},isOverflow:Wa,transform:function(t,e){var r,i=c(t,6),a=i[0],n=i[1],o=i[2],s=i[3],l=i[4],h=i[5],f=c(e,6),u=f[0],_=f[1],d=f[2],y=f[3],v=f[4],p=f[5],g=Wa(t,e),x=P.identity();x[12]=-a,x[13]=-n;var m=Ga(a,n,o,s);0!==m&&(r=Ya(-m),x=P.multiply(r,x));var E=ee.pointsDistance(a,n,o,s),b=ee.pointsDistance(u,_,d,y),T=P.identity();T[12]=-u,T[13]=-_;var A=m=Ga(u,_,d,y);0!==m&&(r=Ya(-m),T=P.multiply(r,T));var M=Math.abs(P.calPoint([l,h],x)[1]),R=Math.abs(P.calPoint([v,p],T)[1]);E===b&&M===R||(r=P.identity(),E!==b&&(r[0]=b/E),M!==R&&(r[5]=R/M),x=P.multiply(r,x)),T=x;var S=c(P.calPoint([a,n],T),2),O=S[0],C=S[1],I=c(P.calPoint([o,s],T),2),w=I[0],k=I[1],D=c(P.calPoint([l,h],T),2),L=D[0],F=D[1],N=ee.pointsDistance(O,C,w,k),B=ee.pointsDistance(O,C,L,F),H=ee.pointsDistance(L,F,w,k),G=ee.pointsDistance(u,_,d,y),Y=ee.pointsDistance(u,_,v,p),W=ee.pointsDistance(v,p,d,y),U=ee.angleBySide(H,N,B),X=ee.angleBySide(W,G,Y);return U!==X&&((r=P.identity())[4]=Math.tan(U-.5*Math.PI)+Math.tan(.5*Math.PI-X),x=P.multiply(r,x)),g&&(x[1]=-x[1],x[5]=-x[5],x[13]=-x[13]),(r=0!==A?Ya(A):P.identity())[12]=u,r[13]=_,P.multiply(r,x)}},Xa=1e-6;function za(t){var e=[],r=t[3],i=t[2]/r,a=t[1]/r,n=(3*a-i*i)/3,o=(2*i*i*i-9*a*i+27*(t[0]/r))/27,s=i/3,l=o*o/4+n*n*n/27,h=o/2;if(Math.abs(l)<=Xa&&(l=0),l>0){var f,c,u=Math.sqrt(l);c=(f=-h+u)>=0?Math.pow(f,1/3):-Math.pow(-f,1/3),(f=-h-u)>=0?c+=Math.pow(f,1/3):c-=Math.pow(-f,1/3),e.push(c-s)}else if(l<0){var _=Math.sqrt(-n/3),d=Math.atan2(Math.sqrt(-l),-h)/3,y=Math.cos(d),v=Math.sin(d),p=Math.sqrt(3);e.push(2*_*y-s),e.push(-_*(y+p*v)-s),e.push(-_*(y-p*v)-s)}else{var g;g=h>=0?-Math.pow(h,1/3):Math.pow(-h,1/3),e.push(2*g-s),e.push(-g-s)}return e}var Va={getRoots:function(t){for(var e=t.length-1,r=e;r>=0&&Math.abs(t[r])<1e-12;r--)e--;var i=[];switch(e){case 1:i=function(t){var e=[],r=t[1];return 0!==r&&e.push(-t[0]/r),e}(t);break;case 2:i=function(t){var e=[],r=t[2],i=t[1]/r,a=i*i-t[0]/r*4;if(a>0){var n=Math.sqrt(a);e.push(.5*(-i+n)),e.push(.5*(-i-n))}else 0===a&&e.push(.5*-i);return e}(t);break;case 3:i=za(t);break;case 4:i=function(t){var e=[],r=t[4],i=t[3]/r,a=t[2]/r,n=t[1]/r,o=t[0]/r,s=za([1,-a,i*n-4*o,-i*i*o+4*a*o-n*n].reverse())[0],l=i*i/4-a+s;if(Math.abs(l)<=Xa&&(l=0),l>0){var h=Math.sqrt(l),f=3*i*i/4-h*h-2*a,c=(4*i*a-8*n-i*i*i)/(4*h),u=f+c,_=f-c;if(Math.abs(u)<=Xa&&(u=0),Math.abs(_)<=Xa&&(_=0),u>=0){var d=Math.sqrt(u);e.push(-i/4+(h+d)/2),e.push(-i/4+(h-d)/2)}if(_>=0){var y=Math.sqrt(_);e.push(-i/4+(y-h)/2),e.push(-i/4-(y+h)/2)}}else if(l<0);else{var v=s*s-4*o;if(v>=-1e-6){v<0&&(v=0);var p=3*i*i/4-2*a;if(p+(v=2*Math.sqrt(v))>=Xa){var g=Math.sqrt(p+v);e.push(-i/4+g/2),e.push(-i/4-g/2)}if(p-v>=Xa){var x=Math.sqrt(p-v);e.push(-i/4+x/2),e.push(-i/4-x/2)}}}return e}(t)}return i}};function Ka(t,e,r,i,a,n){var o=Math.min(t,a),s=Math.min(e,n),l=Math.max(t,a),h=Math.max(e,n);if(r<o||i<s||r>l||i>h){var f=(t-r)/(t-2*r+a);f<0?f=0:f>1&&(f=1);var c=(e-i)/(e-2*i+n);c<0?c=0:c>1&&(c=1);var u=1-f,_=1-c,d=u*u*t+2*u*f*r+f*f*a,y=_*_*e+2*_*c*i+c*c*n;o=Math.min(o,d),s=Math.min(s,y),l=Math.max(l,d),h=Math.max(h,y)}return[o,s,l,h]}function ja(t,e,r,i,a,n,o,s){var l=Math.min(t,o),h=Math.min(e,s),f=Math.max(t,o),c=Math.max(e,s);if(r<l||i<h||r>f||i>c||a<l||n<h||a>f||n>c){var u=-t+r,_=-e+i,d=t-2*r+a,y=e-2*i+n,v=3*r-t-3*a+o,p=3*i-e-3*n+s,g=d*d-v*u,x=y*y-p*_;if(g>0){var m=(-d-(g=Math.sqrt(g)))/v;if(v&&m>0&&m<1){var E=1-m,b=E*E*E*t+3*E*E*m*r+3*E*m*m*a+m*m*m*o;l=Math.min(l,b),f=Math.max(f,b)}if((m=v?(-d+g)/v:.5*-u/d)>0&&m<1){var T=1-m,A=T*T*T*t+3*T*T*m*r+3*T*m*m*a+m*m*m*o;l=Math.min(l,A),f=Math.max(f,A)}}if(x>0){var M=(-y-(x=Math.sqrt(x)))/p;if(p&&M>0&&M<1){var R=1-M,S=R*R*R*e+3*R*R*M*i+3*R*M*M*n+M*M*M*s;h=Math.min(h,S),c=Math.max(c,S)}if((M=p?(-y+x)/p:.5*-_/y)>0&&M<1){var O=1-M,C=O*O*O*e+3*O*O*M*i+3*O*M*M*n+M*M*M*s;h=Math.min(h,C),c=Math.max(c,C)}}}return[l,h,f,c]}function $a(t){var e=t.length,r=t.reduce((function(t,r){return Math.pow(t,e)+Math.pow(r,e)}));return Math.pow(r,1/e)}function qa(t,e,r){var i=t,a=(2*e+r)/3,n=(e+2*r)/3;return(i(e)+3*i(a)+3*i(n)+i(r))*(r-e)/8}function Za(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,a=t,n=(e+r)/2,o=qa(a,e,r),s=qa(a,e,n),l=qa(a,n,r),h=s+l-o;return Math.abs(h)<=15*i?s+l+h/15:Za(a,e,n,i/2)+Za(a,n,r,i/2)}function Ja(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(6===t.length?t=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]]]:8===t.length&&(t=[[t[0],t[1]],[t[2],t[3]],[t[4],t[5]],[t[6],t[7]]]),2===t.length){var i=c(t[0],2),a=i[0],n=i[1],o=c(t[1],2),s=o[0],l=o[1];return Math.sqrt(Math.pow(s-a,2)+Math.pow(l-n,2))}var h=function(e){return $a(en(e,t))};return Za(h,e,r)}function Qa(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=c(e,4),a=i[0],n=i[1],o=i[2],s=i[3],l=c(a,2),h=l[0],f=l[1],u=c(n,2),_=u[0],d=u[1],y=c(o,2),v=y[0],p=y[1],g=c(s,2),x=g[0],m=g[1],E=0,b=0;return 0===r?(E=Math.pow(1-t,3)*h+3*t*Math.pow(1-t,2)*_+3*(1-t)*Math.pow(t,2)*v+Math.pow(t,3)*x,b=Math.pow(1-t,3)*f+3*t*Math.pow(1-t,2)*d+3*(1-t)*Math.pow(t,2)*p+Math.pow(t,3)*m):1===r?(E=3*((1-t)*(1-t)*(_-h)+2*(1-t)*t*(v-_)+t*t*(x-v)),b=3*((1-t)*(1-t)*(d-f)+2*(1-t)*t*(p-d)+t*t*(m-p))):2===r?(E=6*(v-2*_+h)*(1-t)+6*(x-2*v+_)*t,b=6*(p-2*d+f)*(1-t)+6*(m-2*p+d)*t):3===r&&(E=6*(x-3*v+3*_-h),b=6*(m-3*p+3*d-f)),[E,b]}function tn(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=c(e,3),a=i[0],n=i[1],o=i[2],s=c(a,2),l=s[0],h=s[1],f=c(n,2),u=f[0],_=f[1],d=c(o,2),y=d[0],v=d[1],p=0,g=0;return 0===r?(p=Math.pow(1-t,2)*l+2*t*(1-t)*u+Math.pow(t,2)*y,g=Math.pow(1-t,2)*h+2*t*(1-t)*_+Math.pow(t,2)*v):1===r?(p=2*(1-t)*(u-l)+2*t*(y-u),g=2*(1-t)*(_-h)+2*t*(v-_)):2===r&&(p=2*(y-2*u+l),g=2*(v-2*_+h)),[p,g]}function en(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return 4===e.length?Qa(t,e,r):3===e.length?tn(t,e,r):void 0}function rn(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001,n=function(e){return $a(en(e,t))},o=e*r,s=r,l=s,h=0;h<i;h++){var f=qa(n,0,s)-o;if(Math.abs(f)<a)break;var c=$a(en(s,t,1)),u=$a(en(s,t,2)),_=f*c,d=f*u+c*c;if(s-=_/d,Math.abs(s-l)<a)break;l=s}return en(s,t,0)}function an(t,e){var r=c(t,4),i=c(r[0],2),a=i[0],n=i[1],o=c(r[1],2),s=o[0],l=o[1],h=c(r[2],2),f=h[0],u=h[1],_=r[3],d=(s-a)*e+a,y=(l-n)*e+n,v=(f-s)*e+s,p=(u-l)*e+l,g=(v-d)*e+d,x=(p-y)*e+y;if(4===t.length){var m=c(_,2);return[[a,n],[d,y],[g,x],[(((m[0]-f)*e+f-v)*e+v-g)*e+g,(((m[1]-u)*e+u-p)*e+p-x)*e+x]]}if(3===t.length)return[[a,n],[d,y],[g,x]]}function nn(t,e){return[t[0][0]*(1-e)*(1-e)+2*t[1][0]*e*(1-e)+t[2][0]*e*e,t[0][1]*(1-e)*(1-e)+2*t[1][1]*e*(1-e)+t[2][1]*e*e]}function on(t,e){return[t[0][0]*(1-e)*(1-e)*(1-e)+3*t[1][0]*e*(1-e)*(1-e)+3*t[2][0]*e*e*(1-e)+t[3][0]*e*e*e,t[0][1]*(1-e)*(1-e)*(1-e)+3*t[1][1]*e*(1-e)*(1-e)+3*t[2][1]*e*e*(1-e)+t[3][1]*e*e*e]}var sn={bboxBezier:function(t,e,r,i,a,n,o,s){var l=arguments.length;if(Array.isArray(t)){var h=t.length,f=t,u=c(f[0],2);t=u[0],e=u[1];var _=c(f[1],2);if(r=_[0],i=_[1],l=4,h>=3){var d=c(f[2],2);a=d[0],n=d[1],l=6}if(h>=4){var y=c(f[3],2);o=y[0],s=y[1],l=8}}if(4===l){var v=Math.min(t,r),p=Math.min(e,i),g=Math.max(t,r),x=Math.max(e,i);return[v,p,g,x]}return 6===l?Ka(t,e,r,i,a,n):8===l?ja(t,e,r,i,a,n,o,s):void 0},bezierLength:Ja,pointAtBezier:function(t,e,r,i){return rn(t,Ja(t,0,1),e,r,i)},pointAtBezierWithLength:rn,sliceBezier:an,sliceBezier2Both:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e=Math.max(e,0),r=Math.min(r,1),0===e&&1===r||(r<1&&(t=an(t,r)),e>0&&(r<1&&(e/=r),t=an(t.slice(0).reverse(),1-e).reverse())),t},pointAtByT:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 4===t.length?on(t,e):3===t.length?nn(t,e):void 0},getPointT:function(t,e,r){return 4===t.length?function(t,e,r){for(var i=Va.getRoots([t[0][0]-e,3*(t[1][0]-t[0][0]),3*(t[2][0]+t[0][0]-2*t[1][0]),t[3][0]-t[0][0]+3*t[1][0]-3*t[2][0]]).filter((function(t){return t>=0&&t<=1})),a=Va.getRoots([t[0][1]-r,3*(t[1][1]-t[0][1]),3*(t[2][1]+t[0][1]-2*t[1][1]),t[3][1]-t[0][1]+3*t[1][1]-3*t[2][1]]).filter((function(t){return t>=0&&t<=1})),n=[],o=0,s=i.length;o<s;o++)for(var l=i[o],h=0,f=a.length;h<f;h++){var c=a[h],u=Math.abs(l-c);u<1e-10&&n.push({x:l,y:c,diff:u})}n.sort((function(t,e){return t.diff-e.diff})),n.length>3&&n.splice(3);n=n.map((function(t){return.5*(t.x+t.y)}));var _=[];return n.forEach((function(i){var a=t[0][0]*Math.pow(1-i,3)+3*t[1][0]*i*Math.pow(1-i,2)+3*t[2][0]*i*i*(1-i)+t[3][0]*Math.pow(i,3),n=t[0][1]*Math.pow(1-i,3)+3*t[1][1]*i*Math.pow(1-i,2)+3*t[2][1]*i*i*(1-i)+t[3][1]*Math.pow(i,3);Math.abs(a-e)<1e-10&&Math.abs(n-r)<1e-10&&_.push(i)})),_}(t,e,r):3===t.length?function(t,e,r){for(var i=Va.getRoots([t[0][0]-e,2*(t[1][0]-t[0][0]),t[2][0]+t[0][0]-2*t[1][0]]).filter((function(t){return t>=0&&t<=1})),a=Va.getRoots([t[0][1]-r,2*(t[1][1]-t[0][1]),t[2][1]+t[0][1]-2*t[1][1]]).filter((function(t){return t>=0&&t<=1})),n=[],o=0,s=i.length;o<s;o++)for(var l=i[o],h=0,f=a.length;h<f;h++){var c=a[h],u=Math.abs(l-c);u<1e-10&&n.push({x:l,y:c,diff:u})}n.sort((function(t,e){return t.diff-e.diff})),n.length>2&&n.splice(2);n=n.map((function(t){return.5*(t.x+t.y)}));var _=[];return n.forEach((function(i){var a=t[0][0]*Math.pow(1-i,2)+2*t[1][0]*i*(1-i)+t[2][0]*i*i,n=t[0][1]*Math.pow(1-i,2)+2*t[1][1]*i*(1-i)+t[2][1]*i*i;Math.abs(a-e)<1e-10&&Math.abs(n-r)<1e-10&&_.push(i)})),_}(t,e,r):void 0},bezierSlope:function(t,e){if(2===t.length){var r=c(t[0],2),i=r[0],a=r[1],n=c(t[1],2),o=n[0],s=n[1];return i===o?1/0:(s-a)/(o-i)}return 3===t.length?function(t,e){var r=c(t,3),i=c(r[0],2),a=i[0],n=i[1],o=c(r[1],2),s=o[0],l=o[1],h=c(r[2],2),f=h[0],u=h[1],_=2*(a-2*s+f)*e+2*s-2*a;if(0===_)return 1/0;return(2*(n-2*l+u)*e+2*l-2*n)/_}(t,e):4===t.length?function(t,e){var r=c(t,4),i=c(r[0],2),a=i[0],n=i[1],o=c(r[1],2),s=o[0],l=o[1],h=c(r[2],2),f=h[0],u=h[1],_=c(r[3],2),d=_[0],y=_[1],v=3*(3*s-a-3*f+d)*e*e+2*(3*a-6*s+3*f)*e+3*s-3*a;if(0===v)return 1/0;return(3*(3*l-n-3*u+y)*e*e+2*(3*n-6*l+3*u)*e+3*l-3*n)/v}(t,e):void 0}},ln=Va.getRoots,hn=1e-6;function fn(t,e){for(var r=0,i=e.length-1;i>=0;i--)r=r*t+e[i];return r}function cn(t,e,r){var i,a=fn(t,r),n=fn(e,r);if(Math.abs(a)<=hn)i=t;else if(Math.abs(n)<=hn)i=e;else if(a*n<=0)for(var o=Math.log(e-t),s=6*Math.LN10,l=Math.ceil((o+s)/Math.LN2),h=0;h<l;h++){var f=fn(i=.5*(t+e),r);if(Math.abs(f)<=hn)break;f*a<0?(e=i,n=f):(t=i,a=f)}return i}function un(t,e,r){var i,a=[];if(1===r.length-1)null!=(i=cn(t,e,r))&&a.push(i);else{var n=function(t){for(var e=[],r=1;r<t.length;r++)e.push(r*t[r]);return e}(r),o=un(t,e,n);if(o.length>0){null!=(i=cn(t,o[0],r))&&a.push(i);for(var s=0;s<=o.length-2;s++)null!=(i=cn(o[s],o[s+1],r))&&a.push(i);null!=(i=cn(o[o.length-1],e,r))&&a.push(i)}else null!=(i=cn(t,e,r))&&a.push(i)}return a}var _n={intersectBezier2Line:function(t,e,r,i,a,n,o,s,l,h){var f,c,u,_,d=[],y=Math.min(o,l),v=Math.min(s,h),p=Math.max(o,l),g=Math.max(s,h),x=function(t,e){return t.x*e.x+t.y*e.y},m=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}};f={x:-2*t+2*r,y:-2*e+2*i},c={x:t,y:e},u=o*h-l*s;for(var E=[x(_={x:s-h,y:l-o},{x:t-2*r+a,y:e-2*i+n}),x(_,f),x(_,c)+u].reverse(),b=ln(E),T=0;T<b.length;T++){var A=b[T];if(0<=A&&A<=1){var M=m({x:t,y:e},{x:r,y:i},A),R=m({x:r,y:i},{x:a,y:n},A),S=m(M,R,A);o===l?v<=S.y&&S.y<=g&&d.push(S):s===h?y<=S.x&&S.x<=p&&d.push(S):S.x>=y&&S.y>=v&&S.x<=p&&S.y<=g&&d.push(S)}}return d},intersectBezier3Line:function(t,e,r,i,a,n,o,s,l,h,f,c){var u,_,d,y,v=[],p=Math.min(l,f),g=Math.min(h,c),x=Math.max(l,f),m=Math.max(h,c),E=function(t,e){return t.x*e.x+t.y*e.y},b=function(t,e,r){return{x:t.x-(t.x-e.x)*r,y:t.y-(t.y-e.y)*r,t:r}};u={x:3*r-t-3*a+o,y:3*i-e-3*n+s},_={x:3*t-6*r+3*a,y:3*e-6*i+3*n},d={x:-3*t+3*r,y:-3*e+3*i};for(var T=[l*c-f*h+E(y={x:h-c,y:f-l},{x:t,y:e}),E(y,d),E(y,_),E(y,u)],A=ln(T),M=0;M<A.length;M++){var R=A[M];if(0<=R&&R<=1){var S=b({x:t,y:e},{x:r,y:i},R),O=b({x:r,y:i},{x:a,y:n},R),C=b({x:a,y:n},{x:o,y:s},R),I=b(S,O,R),w=b(O,C,R),k=b(I,w,R);l===f?g<=k.y&&k.y<=m&&v.push(k):h===c?p<=k.x&&k.x<=x&&v.push(k):k.x>=p&&k.y>=g&&k.x<=x&&k.y<=m&&v.push(k)}}return v},intersectBezier2Bezier2:function(t,e,r,i,a,n,o,s,l,h,f,c){var u,_,d,y,v,p,g,x=[];if(_={x:2*r-2*t,y:2*i-2*e},d={x:t,y:e},y={x:o-2*l+f,y:s-2*h+c},v={x:2*l-2*o,y:2*h-2*s},p={x:o,y:s},0===(u={x:t-2*r+a,y:e-2*i+n}).y){var m=u.x*(d.y-p.y),E=m-_.x*_.y,b=_.y*_.y;g=[u.x*y.y*y.y,2*u.x*v.y*y.y,u.x*v.y*v.y-y.x*b-y.y*m-y.y*E,-v.x*b-v.y*m-v.y*E,(d.x-p.x)*b+(d.y-p.y)*E].reverse()}else{var T=u.x*y.y-u.y*y.x,A=u.x*v.y-v.x*u.y,M=_.x*u.y-_.y*u.x,R=d.y-p.y,S=u.y*(d.x-p.x)-u.x*R,O=-_.y*M+u.y*S,C=M*M;g=[T*T,2*T*A,(-y.y*C+u.y*A*A+u.y*T*S+T*O)/u.y,(-v.y*C+u.y*A*S+A*O)/u.y,(R*C+S*O)/u.y].reverse()}for(var I=ln(g),w=0;w<I.length;w++){var k=I[w];if(0<=k&&k<=1){var D=ln([u.x,_.x,d.x-p.x-k*v.x-k*k*y.x].reverse()),L=ln([u.y,_.y,d.y-p.y-k*v.y-k*k*y.y].reverse());if(D.length>0&&L.length>0){t:for(var F=0;F<D.length;F++){var N=D[F];if(0<=N&&N<=1)for(var P=0;P<L.length;P++)if(Math.abs(N-L[P])<1e-4){var B=y.x*k*k+v.x*k+p.x,H=y.y*k*k+v.y*k+p.y;x.push({x:B,y:H,t:N});break t}}}}}return x},intersectBezier3Bezier3:function(t,e,r,i,a,n,o,s,l,h,f,c,u,_,d,y){var v,p,g,x,m,E,b,T,A=[];v={x:3*r-t-3*a+o,y:3*i-e-3*n+s},p={x:3*t-6*r+3*a,y:3*e-6*i+3*n},m={x:3*f-l-3*u+d,y:3*c-h-3*_+y},E={x:3*l-6*f+3*u,y:3*h-6*c+3*_},b={x:-3*l+3*f,y:-3*h+3*c},T={x:l,y:h};for(var M=(x={x:t,y:e}).x*x.x,R=x.x*x.x*x.x,S=x.y*x.y,O=x.y*x.y*x.y,C=(g={x:-3*t+3*r,y:-3*e+3*i}).x*g.x,I=g.x*g.x*g.x,w=g.y*g.y,k=g.y*g.y*g.y,D=p.x*p.x,L=p.x*p.x*p.x,F=p.y*p.y,N=p.y*p.y*p.y,P=v.x*v.x,B=v.x*v.x*v.x,H=v.y*v.y,G=v.y*v.y*v.y,Y=T.x*T.x,W=T.x*T.x*T.x,U=T.y*T.y,X=T.y*T.y*T.y,z=b.x*b.x,V=b.x*b.x*b.x,K=b.y*b.y,j=E.x*E.x,$=E.x*E.x*E.x,q=E.y*E.y,Z=m.x*m.x,J=m.y*m.y,Q=un(0,1,[-B*(m.y*m.y*m.y)+G*(m.x*m.x*m.x)-3*v.x*H*Z*m.y+3*P*v.y*m.x*J,-6*v.x*E.x*H*m.x*m.y+6*P*v.y*E.y*m.x*m.y+3*E.x*G*Z-3*B*E.y*J-3*v.x*H*E.y*Z+3*P*E.x*v.y*J,-6*b.x*v.x*H*m.x*m.y-6*v.x*E.x*H*E.y*m.x+6*P*E.x*v.y*E.y*m.y+3*b.x*G*Z+3*j*G*m.x+3*b.x*P*v.y*J-3*v.x*b.y*H*Z-3*v.x*j*H*m.y+P*v.y*m.x*(6*b.y*m.y+3*q)+B*(-b.y*J-2*q*m.y-m.y*(2*b.y*m.y+q)),g.x*p.y*v.x*v.y*m.x*m.y-g.y*p.x*v.x*v.y*m.x*m.y+6*b.x*E.x*G*m.x+3*g.x*p.x*v.x*v.y*J+6*x.x*v.x*H*m.x*m.y-3*g.x*p.x*H*m.x*m.y-3*g.y*p.y*v.x*v.y*Z-6*x.y*P*v.y*m.x*m.y-6*T.x*v.x*H*m.x*m.y+3*g.y*p.y*P*m.x*m.y-2*p.x*F*v.x*m.x*m.y-6*b.x*v.x*E.x*H*m.y-6*b.x*v.x*H*E.y*m.x-6*v.x*b.y*E.x*H*m.x+6*b.x*P*v.y*E.y*m.y+2*D*p.y*v.y*m.x*m.y+$*G-3*x.x*G*Z+3*x.y*B*J+3*T.x*G*Z+N*v.x*Z-L*v.y*J-3*x.x*P*v.y*J+3*x.y*v.x*H*Z-2*g.x*p.y*P*J+g.x*p.y*H*Z-g.y*p.x*P*J+2*g.y*p.x*H*Z+3*T.x*P*v.y*J-p.x*F*v.y*Z-3*T.y*v.x*H*Z+D*p.y*v.x*J-3*v.x*j*H*E.y+P*v.y*m.x*(6*T.y*m.y+6*b.y*E.y)+P*E.x*v.y*(6*b.y*m.y+3*q)+B*(-2*b.y*E.y*m.y-T.y*J-E.y*(2*b.y*m.y+q)-m.y*(2*T.y*m.y+2*b.y*E.y)),6*g.x*p.x*v.x*v.y*E.y*m.y+g.x*p.y*v.x*E.x*v.y*m.y+g.x*p.y*v.x*v.y*E.y*m.x-g.y*p.x*v.x*E.x*v.y*m.y-g.y*p.x*v.x*v.y*E.y*m.x-6*g.y*p.y*v.x*E.x*v.y*m.x-6*x.x*E.x*G*m.x+6*T.x*E.x*G*m.x+6*x.y*B*E.y*m.y+2*N*v.x*E.x*m.x-2*L*v.y*E.y*m.y+6*x.x*v.x*E.x*H*m.y+6*x.x*v.x*H*E.y*m.x+6*x.y*v.x*E.x*H*m.x-3*g.x*p.x*E.x*H*m.y-3*g.x*p.x*H*E.y*m.x+2*g.x*p.y*E.x*H*m.x+4*g.y*p.x*E.x*H*m.x-6*x.x*P*v.y*E.y*m.y-6*x.y*P*E.x*v.y*m.y-6*x.y*P*v.y*E.y*m.x-4*g.x*p.y*P*E.y*m.y-6*T.x*v.x*E.x*H*m.y-6*T.x*v.x*H*E.y*m.x-2*g.y*p.x*P*E.y*m.y+3*g.y*p.y*P*E.x*m.y+3*g.y*p.y*P*E.y*m.x-2*p.x*F*v.x*E.x*m.y-2*p.x*F*v.x*E.y*m.x-2*p.x*F*E.x*v.y*m.x-6*T.y*v.x*E.x*H*m.x-6*b.x*v.x*b.y*H*m.x-6*b.x*v.x*E.x*H*E.y+6*T.x*P*v.y*E.y*m.y+2*D*p.y*v.x*E.y*m.y+2*D*p.y*E.x*v.y*m.y+2*D*p.y*v.y*E.y*m.x+3*b.x*j*G+3*z*G*m.x-3*v.x*b.y*j*H-3*z*v.x*H*m.y+P*E.x*v.y*(6*T.y*m.y+6*b.y*E.y)+P*v.y*m.x*(6*T.y*E.y+3*K)+b.x*P*v.y*(6*b.y*m.y+3*q)+B*(-2*T.y*E.y*m.y-m.y*(2*T.y*E.y+K)-b.y*(2*b.y*m.y+q)-E.y*(2*T.y*m.y+2*b.y*E.y)),g.x*b.x*p.y*v.x*v.y*m.y+g.x*p.y*v.x*b.y*v.y*m.x+g.x*p.y*v.x*E.x*v.y*E.y-g.y*p.x*b.x*v.x*v.y*m.y-g.y*p.x*v.x*b.y*v.y*m.x-g.y*p.x*v.x*E.x*v.y*E.y-6*g.y*b.x*p.y*v.x*v.y*m.x-6*x.x*b.x*G*m.x+6*T.x*b.x*G*m.x+2*b.x*N*v.x*m.x+6*x.x*b.x*v.x*H*m.y+6*x.x*v.x*b.y*H*m.x+6*x.x*v.x*E.x*H*E.y+6*x.y*b.x*v.x*H*m.x-3*g.x*p.x*b.x*H*m.y-3*g.x*p.x*b.y*H*m.x-3*g.x*p.x*E.x*H*E.y+2*g.x*b.x*p.y*H*m.x+4*g.y*p.x*b.x*H*m.x-6*x.y*b.x*P*v.y*m.y-6*x.y*P*b.y*v.y*m.x-6*x.y*P*E.x*v.y*E.y-6*T.x*b.x*v.x*H*m.y-6*T.x*v.x*b.y*H*m.x-6*T.x*v.x*E.x*H*E.y+3*g.y*b.x*p.y*P*m.y-3*g.y*p.y*v.x*j*v.y+3*g.y*p.y*P*b.y*m.x+3*g.y*p.y*P*E.x*E.y-2*p.x*b.x*F*v.x*m.y-2*p.x*b.x*F*v.y*m.x-2*p.x*F*v.x*b.y*m.x-2*p.x*F*v.x*E.x*E.y-6*T.y*b.x*v.x*H*m.x-6*b.x*v.x*b.y*E.x*H+6*T.y*P*b.y*v.y*m.x+2*D*b.x*p.y*v.y*m.y+2*D*p.y*b.y*v.y*m.x+2*D*p.y*E.x*v.y*E.y-3*x.x*j*G+3*T.x*j*G+3*z*E.x*G+N*v.x*j+3*x.y*v.x*j*H+g.x*p.y*j*H+2*g.y*p.x*j*H-p.x*F*j*v.y-3*T.y*v.x*j*H-3*z*v.x*H*E.y+D*p.y*v.x*(2*b.y*m.y+q)+g.x*p.x*v.x*v.y*(6*b.y*m.y+3*q)+b.x*P*v.y*(6*T.y*m.y+6*b.y*E.y)+L*v.y*(-2*b.y*m.y-q)+x.y*B*(6*b.y*m.y+3*q)+g.y*p.x*P*(-2*b.y*m.y-q)+g.x*p.y*P*(-4*b.y*m.y-2*q)+x.x*P*v.y*(-6*b.y*m.y-3*q)+P*E.x*v.y*(6*T.y*E.y+3*K)+T.x*P*v.y*(6*b.y*m.y+3*q)+B*(-2*T.y*b.y*m.y-E.y*(2*T.y*E.y+K)-T.y*(2*b.y*m.y+q)-b.y*(2*T.y*m.y+2*b.y*E.y)),-x.x*g.x*p.y*v.x*v.y*m.y+x.x*g.y*p.x*v.x*v.y*m.y+6*x.x*g.y*p.y*v.x*v.y*m.x-6*x.y*g.x*p.x*v.x*v.y*m.y-x.y*g.x*p.y*v.x*v.y*m.x+x.y*g.y*p.x*v.x*v.y*m.x+g.x*g.y*p.x*p.y*v.x*m.y-g.x*g.y*p.x*p.y*v.y*m.x+g.x*T.x*p.y*v.x*v.y*m.y+g.x*T.y*p.y*v.x*v.y*m.x+g.x*b.x*p.y*v.x*v.y*E.y+g.x*p.y*v.x*b.y*E.x*v.y-T.x*g.y*p.x*v.x*v.y*m.y-6*T.x*g.y*p.y*v.x*v.y*m.x-g.y*p.x*T.y*v.x*v.y*m.x-g.y*p.x*b.x*v.x*v.y*E.y-g.y*p.x*v.x*b.y*E.x*v.y-6*g.y*b.x*p.y*v.x*E.x*v.y-6*x.x*T.x*G*m.x-6*x.x*b.x*E.x*G-2*x.x*N*v.x*m.x+6*T.x*b.x*E.x*G+2*T.x*N*v.x*m.x+2*b.x*N*v.x*E.x+2*x.y*L*v.y*m.y-6*x.x*x.y*v.x*H*m.x+3*x.x*g.x*p.x*H*m.y-2*x.x*g.x*p.y*H*m.x-4*x.x*g.y*p.x*H*m.x+3*x.y*g.x*p.x*H*m.x+6*x.x*x.y*P*v.y*m.y+6*x.x*T.x*v.x*H*m.y-3*x.x*g.y*p.y*P*m.y+2*x.x*p.x*F*v.x*m.y+2*x.x*p.x*F*v.y*m.x+6*x.x*T.y*v.x*H*m.x+6*x.x*b.x*v.x*H*E.y+6*x.x*v.x*b.y*E.x*H+4*x.y*g.x*p.y*P*m.y+6*x.y*T.x*v.x*H*m.x+2*x.y*g.y*p.x*P*m.y-3*x.y*g.y*p.y*P*m.x+2*x.y*p.x*F*v.x*m.x+6*x.y*b.x*v.x*E.x*H-3*g.x*T.x*p.x*H*m.y+2*g.x*T.x*p.y*H*m.x+g.x*g.y*F*v.x*m.x-3*g.x*p.x*T.y*H*m.x-3*g.x*p.x*b.x*H*E.y-3*g.x*p.x*b.y*E.x*H+2*g.x*b.x*p.y*E.x*H+4*T.x*g.y*p.x*H*m.x+4*g.y*p.x*b.x*E.x*H-2*x.x*D*p.y*v.y*m.y-6*x.y*T.x*P*v.y*m.y-6*x.y*T.y*P*v.y*m.x-6*x.y*b.x*P*v.y*E.y-2*x.y*D*p.y*v.x*m.y-2*x.y*D*p.y*v.y*m.x-6*x.y*P*b.y*E.x*v.y-g.x*g.y*D*v.y*m.y-2*g.x*w*v.x*v.y*m.x+3*T.x*g.y*p.y*P*m.y-2*T.x*p.x*F*v.x*m.y-2*T.x*p.x*F*v.y*m.x-6*T.x*T.y*v.x*H*m.x-6*T.x*b.x*v.x*H*E.y-6*T.x*v.x*b.y*E.x*H+3*g.y*T.y*p.y*P*m.x+3*g.y*b.x*p.y*P*E.y+3*g.y*p.y*P*b.y*E.x-2*p.x*T.y*F*v.x*m.x-2*p.x*b.x*F*v.x*E.y-2*p.x*b.x*F*E.x*v.y-2*p.x*F*v.x*b.y*E.x-6*T.y*b.x*v.x*E.x*H-w*p.x*p.y*v.x*m.x+2*T.x*D*p.y*v.y*m.y+6*T.y*P*b.y*E.x*v.y+2*C*g.y*v.x*v.y*m.y+C*p.x*p.y*v.y*m.y+2*D*T.y*p.y*v.y*m.x+2*D*b.x*p.y*v.y*E.y+2*D*p.y*b.y*E.x*v.y+V*G+3*M*G*m.x-3*S*B*m.y+3*Y*G*m.x+k*P*m.x-I*H*m.y-g.x*w*P*m.y+C*g.y*H*m.x-3*M*v.x*H*m.y+3*S*P*v.y*m.x-C*F*v.x*m.y+w*D*v.y*m.x-3*z*v.x*b.y*H-3*Y*v.x*H*m.y+3*U*P*v.y*m.x+g.x*p.x*v.x*v.y*(6*T.y*m.y+6*b.y*E.y)+L*v.y*(-2*T.y*m.y-2*b.y*E.y)+x.y*B*(6*T.y*m.y+6*b.y*E.y)+g.y*p.x*P*(-2*T.y*m.y-2*b.y*E.y)+D*p.y*v.x*(2*T.y*m.y+2*b.y*E.y)+g.x*p.y*P*(-4*T.y*m.y-4*b.y*E.y)+x.x*P*v.y*(-6*T.y*m.y-6*b.y*E.y)+T.x*P*v.y*(6*T.y*m.y+6*b.y*E.y)+b.x*P*v.y*(6*T.y*E.y+3*K)+B*(-2*T.y*b.y*E.y-U*m.y-b.y*(2*T.y*E.y+K)-T.y*(2*T.y*m.y+2*b.y*E.y)),-x.x*g.x*p.y*v.x*v.y*E.y+x.x*g.y*p.x*v.x*v.y*E.y+6*x.x*g.y*p.y*v.x*E.x*v.y-6*x.y*g.x*p.x*v.x*v.y*E.y-x.y*g.x*p.y*v.x*E.x*v.y+x.y*g.y*p.x*v.x*E.x*v.y+g.x*g.y*p.x*p.y*v.x*E.y-g.x*g.y*p.x*p.y*E.x*v.y+g.x*T.x*p.y*v.x*v.y*E.y+g.x*T.y*p.y*v.x*E.x*v.y+g.x*b.x*p.y*v.x*b.y*v.y-T.x*g.y*p.x*v.x*v.y*E.y-6*T.x*g.y*p.y*v.x*E.x*v.y-g.y*p.x*T.y*v.x*E.x*v.y-g.y*p.x*b.x*v.x*b.y*v.y-6*x.x*T.x*E.x*G-2*x.x*N*v.x*E.x+2*T.x*N*v.x*E.x+2*x.y*L*v.y*E.y-6*x.x*x.y*v.x*E.x*H+3*x.x*g.x*p.x*H*E.y-2*x.x*g.x*p.y*E.x*H-4*x.x*g.y*p.x*E.x*H+3*x.y*g.x*p.x*E.x*H+6*x.x*x.y*P*v.y*E.y+6*x.x*T.x*v.x*H*E.y-3*x.x*g.y*p.y*P*E.y+2*x.x*p.x*F*v.x*E.y+2*x.x*p.x*F*E.x*v.y+6*x.x*T.y*v.x*E.x*H+6*x.x*b.x*v.x*b.y*H+4*x.y*g.x*p.y*P*E.y+6*x.y*T.x*v.x*E.x*H+2*x.y*g.y*p.x*P*E.y-3*x.y*g.y*p.y*P*E.x+2*x.y*p.x*F*v.x*E.x-3*g.x*T.x*p.x*H*E.y+2*g.x*T.x*p.y*E.x*H+g.x*g.y*F*v.x*E.x-3*g.x*p.x*T.y*E.x*H-3*g.x*p.x*b.x*b.y*H+4*T.x*g.y*p.x*E.x*H-2*x.x*D*p.y*v.y*E.y-6*x.y*T.x*P*v.y*E.y-6*x.y*T.y*P*E.x*v.y-6*x.y*b.x*P*b.y*v.y-2*x.y*D*p.y*v.x*E.y-2*x.y*D*p.y*E.x*v.y-g.x*g.y*D*v.y*E.y-2*g.x*w*v.x*E.x*v.y+3*T.x*g.y*p.y*P*E.y-2*T.x*p.x*F*v.x*E.y-2*T.x*p.x*F*E.x*v.y-6*T.x*T.y*v.x*E.x*H-6*T.x*b.x*v.x*b.y*H+3*g.y*T.y*p.y*P*E.x+3*g.y*b.x*p.y*P*b.y-2*p.x*T.y*F*v.x*E.x-2*p.x*b.x*F*v.x*b.y-w*p.x*p.y*v.x*E.x+2*T.x*D*p.y*v.y*E.y-3*g.y*z*p.y*v.x*v.y+6*T.y*b.x*P*b.y*v.y+2*C*g.y*v.x*v.y*E.y+C*p.x*p.y*v.y*E.y+2*D*T.y*p.y*E.x*v.y+2*D*b.x*p.y*b.y*v.y-3*x.x*z*G+3*T.x*z*G+3*M*E.x*G-3*S*B*E.y+3*Y*E.x*G+z*N*v.x+k*P*E.x-I*H*E.y+3*x.y*z*v.x*H-g.x*w*P*E.y+g.x*z*p.y*H+2*g.y*p.x*z*H+C*g.y*E.x*H-p.x*z*F*v.y-3*T.y*z*v.x*H-3*M*v.x*H*E.y+3*S*P*E.x*v.y-C*F*v.x*E.y+w*D*E.x*v.y-3*Y*v.x*H*E.y+3*U*P*E.x*v.y+D*p.y*v.x*(2*T.y*E.y+K)+g.x*p.x*v.x*v.y*(6*T.y*E.y+3*K)+L*v.y*(-2*T.y*E.y-K)+x.y*B*(6*T.y*E.y+3*K)+g.y*p.x*P*(-2*T.y*E.y-K)+g.x*p.y*P*(-4*T.y*E.y-2*K)+x.x*P*v.y*(-6*T.y*E.y-3*K)+T.x*P*v.y*(6*T.y*E.y+3*K)+B*(-2*T.y*K-U*E.y-T.y*(2*T.y*E.y+K)),-x.x*g.x*p.y*v.x*b.y*v.y+x.x*g.y*p.x*v.x*b.y*v.y+6*x.x*g.y*b.x*p.y*v.x*v.y-6*x.y*g.x*p.x*v.x*b.y*v.y-x.y*g.x*b.x*p.y*v.x*v.y+x.y*g.y*p.x*b.x*v.x*v.y-g.x*g.y*p.x*b.x*p.y*v.y+g.x*g.y*p.x*p.y*v.x*b.y+g.x*T.x*p.y*v.x*b.y*v.y+6*g.x*p.x*T.y*v.x*b.y*v.y+g.x*T.y*b.x*p.y*v.x*v.y-T.x*g.y*p.x*v.x*b.y*v.y-6*T.x*g.y*b.x*p.y*v.x*v.y-g.y*p.x*T.y*b.x*v.x*v.y-6*x.x*T.x*b.x*G-2*x.x*b.x*N*v.x+6*x.y*T.y*B*b.y+2*T.x*b.x*N*v.x+2*x.y*L*b.y*v.y-2*L*T.y*b.y*v.y-6*x.x*x.y*b.x*v.x*H+3*x.x*g.x*p.x*b.y*H-2*x.x*g.x*b.x*p.y*H-4*x.x*g.y*p.x*b.x*H+3*x.y*g.x*p.x*b.x*H+6*x.x*x.y*P*b.y*v.y+6*x.x*T.x*v.x*b.y*H-3*x.x*g.y*p.y*P*b.y+2*x.x*p.x*b.x*F*v.y+2*x.x*p.x*F*v.x*b.y+6*x.x*T.y*b.x*v.x*H+4*x.y*g.x*p.y*P*b.y+6*x.y*T.x*b.x*v.x*H+2*x.y*g.y*p.x*P*b.y-3*x.y*g.y*b.x*p.y*P+2*x.y*p.x*b.x*F*v.x-3*g.x*T.x*p.x*b.y*H+2*g.x*T.x*b.x*p.y*H+g.x*g.y*b.x*F*v.x-3*g.x*p.x*T.y*b.x*H+4*T.x*g.y*p.x*b.x*H-6*x.x*T.y*P*b.y*v.y-2*x.x*D*p.y*b.y*v.y-6*x.y*T.x*P*b.y*v.y-6*x.y*T.y*b.x*P*v.y-2*x.y*D*b.x*p.y*v.y-2*x.y*D*p.y*v.x*b.y-g.x*g.y*D*b.y*v.y-4*g.x*T.y*p.y*P*b.y-2*g.x*w*b.x*v.x*v.y+3*T.x*g.y*p.y*P*b.y-2*T.x*p.x*b.x*F*v.y-2*T.x*p.x*F*v.x*b.y-6*T.x*T.y*b.x*v.x*H-2*g.y*p.x*T.y*P*b.y+3*g.y*T.y*b.x*p.y*P-2*p.x*T.y*b.x*F*v.x-w*p.x*b.x*p.y*v.x+6*T.x*T.y*P*b.y*v.y+2*T.x*D*p.y*b.y*v.y+2*C*g.y*v.x*b.y*v.y+C*p.x*p.y*b.y*v.y+2*D*T.y*b.x*p.y*v.y+2*D*T.y*p.y*v.x*b.y+3*M*b.x*G-3*S*B*b.y+3*Y*b.x*G+k*b.x*P-I*b.y*H-3*U*B*b.y-g.x*w*P*b.y+C*g.y*b.x*H-3*M*v.x*b.y*H+3*S*b.x*P*v.y-C*F*v.x*b.y+w*D*b.x*v.y-3*Y*v.x*b.y*H+3*U*b.x*P*v.y,x.x*x.y*g.x*p.y*v.x*v.y-x.x*x.y*g.y*p.x*v.x*v.y+x.x*g.x*g.y*p.x*p.y*v.y-x.y*g.x*g.y*p.x*p.y*v.x-x.x*g.x*T.y*p.y*v.x*v.y+6*x.x*T.x*g.y*p.y*v.x*v.y+x.x*g.y*p.x*T.y*v.x*v.y-x.y*g.x*T.x*p.y*v.x*v.y-6*x.y*g.x*p.x*T.y*v.x*v.y+x.y*T.x*g.y*p.x*v.x*v.y-g.x*T.x*g.y*p.x*p.y*v.y+g.x*g.y*p.x*T.y*p.y*v.x+g.x*T.x*T.y*p.y*v.x*v.y-T.x*g.y*p.x*T.y*v.x*v.y-2*x.x*T.x*N*v.x+2*x.y*L*T.y*v.y-3*x.x*x.y*g.x*p.x*H-6*x.x*x.y*T.x*v.x*H+3*x.x*x.y*g.y*p.y*P-2*x.x*x.y*p.x*F*v.x-2*x.x*g.x*T.x*p.y*H-x.x*g.x*g.y*F*v.x+3*x.x*g.x*p.x*T.y*H-4*x.x*T.x*g.y*p.x*H+3*x.y*g.x*T.x*p.x*H+6*x.x*x.y*T.y*P*v.y+2*x.x*x.y*D*p.y*v.y+2*x.x*g.x*w*v.x*v.y+2*x.x*T.x*p.x*F*v.y+6*x.x*T.x*T.y*v.x*H-3*x.x*g.y*T.y*p.y*P+2*x.x*p.x*T.y*F*v.x+x.x*w*p.x*p.y*v.x+x.y*g.x*g.y*D*v.y+4*x.y*g.x*T.y*p.y*P-3*x.y*T.x*g.y*p.y*P+2*x.y*T.x*p.x*F*v.x+2*x.y*g.y*p.x*T.y*P+g.x*T.x*g.y*F*v.x-3*g.x*T.x*p.x*T.y*H-2*x.x*D*T.y*p.y*v.y-6*x.y*T.x*T.y*P*v.y-2*x.y*T.x*D*p.y*v.y-2*x.y*C*g.y*v.x*v.y-x.y*C*p.x*p.y*v.y-2*x.y*D*T.y*p.y*v.x-2*g.x*T.x*w*v.x*v.y-g.x*g.y*D*T.y*v.y+3*T.x*g.y*T.y*p.y*P-2*T.x*p.x*T.y*F*v.x-T.x*w*p.x*p.y*v.x+3*S*g.x*p.x*v.x*v.y+3*g.x*p.x*U*v.x*v.y+2*T.x*D*T.y*p.y*v.y-3*M*g.y*p.y*v.x*v.y+2*C*g.y*T.y*v.x*v.y+C*p.x*T.y*p.y*v.y-3*Y*g.y*p.y*v.x*v.y-R*G+O*B+W*G-X*B-3*x.x*Y*G-x.x*k*P+3*M*T.x*G+x.y*I*H+3*x.y*U*B+T.x*k*P+M*N*v.x-3*S*T.y*B-S*L*v.y+Y*N*v.x-I*T.y*H-L*U*v.y-x.x*C*g.y*H+x.y*g.x*w*P-3*x.x*S*P*v.y-x.x*w*D*v.y+x.y*C*F*v.x-g.x*w*T.y*P+3*M*x.y*v.x*H+M*g.x*p.y*H+2*M*g.y*p.x*H-2*S*g.x*p.y*P-S*g.y*p.x*P+C*T.x*g.y*H-3*x.x*U*P*v.y+3*x.y*Y*v.x*H+g.x*Y*p.y*H-2*g.x*U*p.y*P+T.x*w*D*v.y-g.y*p.x*U*P-M*p.x*F*v.y-3*M*T.y*v.x*H+3*S*T.x*P*v.y+S*D*p.y*v.x-C*T.y*F*v.x+2*Y*g.y*p.x*H+3*T.x*U*P*v.y-Y*p.x*F*v.y-3*Y*T.y*v.x*H+D*U*p.y*v.x].reverse()),tt=0;tt<Q.length;tt++){var et=Q[tt],rt=ln([v.x,p.x,g.x,x.x-T.x-et*b.x-et*et*E.x-et*et*et*m.x].reverse()),it=ln([v.y,p.y,g.y,x.y-T.y-et*b.y-et*et*E.y-et*et*et*m.y].reverse());if(rt.length>0&&it.length>0){t:for(var at=0;at<rt.length;at++){var nt=rt[at];if(0<=nt&&nt<=1)for(var ot=0;ot<it.length;ot++)if(Math.abs(nt-it[ot])<1e-4){var st=m.x*et*et*et+E.x*et*et+b.x*et+T.x,lt=m.y*et*et*et+E.y*et*et+b.y*et+T.y;A.push({x:st,y:lt,t:nt});break t}}}}return A},intersectBezier2Bezier3:function(t,e,r,i,a,n,o,s,l,h,f,c,u,_){var d,y,v,p,g,x,m,E=[];d={x:t-2*r+a,y:e-2*i+n},p={x:3*l-o-3*f+u,y:3*h-s-3*c+_},g={x:3*o-6*l+3*f,y:3*s-6*h+3*c},x={x:-3*o+3*l,y:-3*s+3*h},m={x:o,y:s};for(var b=(v={x:t,y:e}).x*v.x,T=v.y*v.y,A=(y={x:2*r-2*t,y:2*i-2*e}).x*y.x,M=y.y*y.y,R=d.x*d.x,S=d.y*d.y,O=m.x*m.x,C=m.y*m.y,I=x.x*x.x,w=x.y*x.y,k=g.x*g.x,D=g.y*g.y,L=p.x*p.x,F=p.y*p.y,N=un(0,1,[-2*d.x*d.y*p.x*p.y+R*F+S*L,-2*d.x*d.y*g.x*p.y-2*d.x*d.y*g.y*p.x+2*S*g.x*p.x+2*R*g.y*p.y,-2*d.x*x.x*d.y*p.y-2*d.x*d.y*x.y*p.x-2*d.x*d.y*g.x*g.y+2*x.x*S*p.x+S*k+R*(2*x.y*p.y+D),2*v.x*d.x*d.y*p.y+2*v.y*d.x*d.y*p.x+y.x*y.y*d.x*p.y+y.x*y.y*d.y*p.x-2*m.x*d.x*d.y*p.y-2*d.x*m.y*d.y*p.x-2*d.x*x.x*d.y*g.y-2*d.x*d.y*x.y*g.x-2*v.x*S*p.x-2*v.y*R*p.y+2*m.x*S*p.x+2*x.x*S*g.x-M*d.x*p.x-A*d.y*p.y+R*(2*m.y*p.y+2*x.y*g.y),2*v.x*d.x*d.y*g.y+2*v.y*d.x*d.y*g.x+y.x*y.y*d.x*g.y+y.x*y.y*d.y*g.x-2*m.x*d.x*d.y*g.y-2*d.x*m.y*d.y*g.x-2*d.x*x.x*d.y*x.y-2*v.x*S*g.x-2*v.y*R*g.y+2*m.x*S*g.x-M*d.x*g.x-A*d.y*g.y+I*S+R*(2*m.y*g.y+w),2*v.x*d.x*d.y*x.y+2*v.y*d.x*x.x*d.y+y.x*y.y*d.x*x.y+y.x*y.y*x.x*d.y-2*m.x*d.x*d.y*x.y-2*d.x*m.y*x.x*d.y-2*v.x*x.x*S-2*v.y*R*x.y+2*m.x*x.x*S-M*d.x*x.x-A*d.y*x.y+2*R*m.y*x.y,-2*v.x*v.y*d.x*d.y-v.x*y.x*y.y*d.y-v.y*y.x*y.y*d.x+2*v.x*d.x*m.y*d.y+2*v.y*m.x*d.x*d.y+y.x*m.x*y.y*d.y+y.x*y.y*d.x*m.y-2*m.x*d.x*m.y*d.y-2*v.x*m.x*S+v.x*M*d.x+v.y*A*d.y-2*v.y*R*m.y-m.x*M*d.x-A*m.y*d.y+b*S+T*R+O*S+R*C].reverse()),P=0;P<N.length;P++){var B=N[P],H=ln([d.x,y.x,v.x-m.x-B*x.x-B*B*g.x-B*B*B*p.x].reverse()),G=ln([d.y,y.y,v.y-m.y-B*x.y-B*B*g.y-B*B*B*p.y].reverse());if(H.length>0&&G.length>0){t:for(var Y=0;Y<H.length;Y++){var W=H[Y];if(0<=W&&W<=1)for(var U=0;U<G.length;U++)if(Math.abs(W-G[U])<1e-4){var X=p.x*B*B*B+g.x*B*B+x.x*B+m.x,z=p.y*B*B*B+g.y*B*B+x.y*B+m.y;E.push({x:X,y:z,t:W});break t}}}}return E}},dn=function(){function t(r,i){if(e(this,t),Array.isArray(r)){var a=c(r,2);r=a[0],i=a[1]}this.x=r,this.y=i}return i(t,[{key:"toString",value:function(){return this.x+","+this.y}},{key:"equal",value:function(t){return this===t||this.x===t.x&&this.y===t.y}}],[{key:"compare",value:function(t,e){return t.x>e.x||t.x===e.x&&t.y>e.y}}]),t}(),yn=function(){function t(r,i){e(this,t),this.coords=r,this.belong=i,this.calBbox(),this.myFill=[!1,!1],this.otherFill=[!1,!1],this.myCoincide=0,this.otherCoincide=0,this.isVisited=!1,this.isDeleted=!1}return i(t,[{key:"calBbox",value:function(){var t=this.coords;if(2===t.length){var e=t[0],r=t[1],i=Math.min(e.x,r.x),a=Math.min(e.y,r.y),n=Math.max(e.x,r.x),o=Math.max(e.y,r.y);this.bbox=[i,a,n,o]}else{var s=t.map((function(t){return[t.x,t.y]}));this.bbox=sn.bboxBezier(s)}}},{key:"reverse",value:function(){this.coords.reverse()}},{key:"equal",value:function(t){var e=this.coords,r=t.coords;if(e.length!==r.length)return!1;for(var i=0,a=e.length;i<a;i++)if(!e[i].equal(r[i]))return!1;return!0}},{key:"toHash",value:function(){return this.coords.map((function(t){return t.toString()})).join(" ")}},{key:"toString",value:function(){return this.toHash()+" "+this.belong+" "+this.myCoincide+this.otherCoincide+" "+this.myFill.map((function(t){return t?1:0})).join("")+this.otherFill.map((function(t){return t?1:0})).join("")}}]),t}(),vn=1e-9,pn=1-1e-9;var gn=function(t,e,r,i,a,n,o,s,l){var h=((o-a)*(e-n)-(s-n)*(t-a))/l,f=((r-t)*(e-n)-(i-e)*(t-a))/l;if(h>vn&&h<pn&&f>vn&&f<pn)return[{point:new dn(t+h*(r-t),e+h*(i-e)),toSource:h,toClip:f}]},xn=function(t,e,r,i,a,n,o,s,l,h){var f=_n.intersectBezier2Line(t,e,r,i,a,n,o,s,l,h);if(f.length&&(f=f.map((function(f){var c;if(c=Math.abs(l-o)>=Math.abs(h-s)?Math.abs((f.x-o)/(l-o)):Math.abs((f.y-s)/(h-s)),f.t>vn&&f.t<pn&&c>vn&&c<pn){var u=sn.bezierSlope([[t,e],[r,i],[a,n]],f.t),_=sn.bezierSlope([[o,s],[l,h]]);if(Math.abs(Math.abs(u)-Math.abs(_)||0)<vn)return;return{point:new dn(f.x,f.y),toSource:f.t,toClip:c}}})).filter((function(t){return t}))).length)return f},mn=function(t,e,r,i,a,n,o,s,l,h,f,c){var u=_n.intersectBezier2Bezier2(t,e,r,i,a,n,o,s,l,h,f,c);if(u.length&&(u=u.map((function(u){var _=sn.getPointT([[o,s],[l,h],[f,c]],u.x,u.y);if(_.length&&(_=_[0],u.t>vn&&u.t<pn&&_>vn&&_<pn)){var d=sn.bezierSlope([[t,e],[r,i],[a,n]],u.t),y=sn.bezierSlope([[o,s],[l,h],[f,c]],_);if(Math.abs(Math.abs(d)-Math.abs(y)||0)<vn)return;return{point:new dn(u.x,u.y),toSource:u.t,toClip:_}}})).filter((function(t){return t}))).length)return u},En=function(t,e,r,i,a,n,o,s,l,h,f,c,u,_){var d=_n.intersectBezier2Bezier3(t,e,r,i,a,n,o,s,l,h,f,c,u,_);if(d.length&&(d=d.map((function(d){var y=sn.getPointT([[o,s],[l,h],[f,c],[u,_]],d.x,d.y);if(y.length&&(y=y[0],d.t>vn&&d.t<pn&&y>vn&&y<pn)){var v=sn.bezierSlope([[t,e],[r,i],[a,n]],d.t),p=sn.bezierSlope([[o,s],[l,h],[f,c],[u,_]],y);if(Math.abs(Math.abs(v)-Math.abs(p)||0)<vn)return;return{point:new dn(d.x,d.y),toSource:d.t,toClip:y}}})).filter((function(t){return t}))).length)return d},bn=function(t,e,r,i,a,n,o,s,l,h,f,c){var u=_n.intersectBezier3Line(t,e,r,i,a,n,o,s,l,h,f,c);if(u.length&&(u=u.map((function(u){var _;if(_=Math.abs(f-l)>=Math.abs(c-h)?Math.abs((u.x-l)/(f-l)):Math.abs((u.y-h)/(c-h)),u.t>vn&&u.t<pn&&_>vn&&_<pn){var d=sn.bezierSlope([[t,e],[r,i],[a,n],[o,s]],u.t),y=sn.bezierSlope([[l,h],[f,c]]);if(Math.abs(Math.abs(d)-Math.abs(y)||0)<vn)return;return{point:new dn(u.x,u.y),toSource:u.t,toClip:_}}})).filter((function(t){return t}))).length)return u},Tn=function(t,e,r,i,a,n,o,s,l,h,f,c,u,_,d,y){var v=_n.intersectBezier3Bezier3(t,e,r,i,a,n,o,s,l,h,f,c,u,_,d,y);if(v.length&&(v=v.map((function(v){var p=sn.getPointT([[l,h],[f,c],[u,_],[d,y]],v.x,v.y);if(p.length&&(p=p[0],v.t>vn&&v.t<pn&&p>vn&&p<pn)){var g=sn.bezierSlope([[t,e],[r,i],[a,n],[o,s]],v.t),x=sn.bezierSlope([[l,h],[f,c],[u,_],[d,y]],p);if(Math.abs(Math.abs(g)-Math.abs(x)||0)<vn)return;return{point:new dn(v.x,v.y),toSource:v.t,toClip:p}}})).filter((function(t){return t}))).length)return v},An=function(t,e){return t.sort((function(t,r){return e?t.toSource-r.toSource:t.toClip-r.toClip})).map((function(t){return{point:t.point,t:e?t.toSource:t.toClip}})).filter((function(t){return t.t>vn&&t.t<pn}))},Mn=function(){function t(r,i){e(this,t),this.index=i;var a=[];Array.isArray(r)&&(r.forEach((function(t){if(Array.isArray(t)&&!(t.length<2)&&!(2===t.length&&t[1].length<=2)){for(var e=new dn(t[0]),r=e,n=1,o=t.length;n<o;n++){var s=t[n],l=s.length,h=new dn(s[l-2],s[l-1]),f=void 0;if(2===l){if(e.equal(h))continue;var c=dn.compare(e,h)?[h,e]:[e,h];f=new yn(c,i)}else if(4===l){if(e.equal(h)&&e.x===s[0]&&e.y===s[1])continue;var u=new dn(s[0],s[1]),_=Ln([e,u,h],!0);if(_){var d=[[e.x,e.y],[s[0],s[1]],[h.x,h.y]],y=sn.sliceBezier(d,_[0]),v=sn.sliceBezier2Both(d,_[0],1),p=new dn(y[1]),g=new dn(y[2]),x=new dn(v[1]),m=dn.compare(e,g)?[g,p,e]:[e,p,g];a.push(new yn(m,i)),m=dn.compare(g,h)?[h,x,g]:[g,x,h],f=new yn(m,i)}else{var E=dn.compare(e,h)?[h,u,e]:[e,u,h];f=new yn(E,i)}}else if(6===l){if(s[0]===s[2]&&s[1]===s[3]){s.splice(2,2),n--;continue}if(e.equal(h)&&e.x===s[0]&&e.y===s[1]&&e.x===s[2]&&e.y===s[3])continue;var b=new dn(s[0],s[1]),T=new dn(s[2],s[3]),A=Ln([e,b,T,h],!0);if(A)!function(){var t=[[e.x,e.y],[s[0],s[1]],[s[2],s[3]],[h.x,h.y]],r=e,n=0;A.forEach((function(e){var o=sn.sliceBezier2Both(t,n,e),s=new dn(o[1]),l=new dn(o[2]),h=new dn(o[3]),f=dn.compare(r,h)?[h,l,s,r]:[r,s,l,h];a.push(new yn(f,i)),n=e,r=h}));var o=sn.sliceBezier2Both(t,n,1),l=new dn(o[1]),c=new dn(o[2]),u=dn.compare(r,h)?[h,c,l,r]:[r,l,c,h];f=new yn(u,i)}();else{var M=dn.compare(e,h)?[h,T,b,e]:[e,b,T,h];f=new yn(M,i)}}a.push(f),e=h}if(!e.equal(r)){var R=dn.compare(e,r)?[r,e]:[e,r];a.push(new yn(R,i))}}})),this.segments=a)}return i(t,[{key:"selfIntersect",value:function(){var t=Cn(this.segments);this.segments=Rn(t,!1,!1,!1)}},{key:"toString",value:function(){return this.segments.map((function(t){return t.toString()}))}},{key:"reset",value:function(t){return this.index=t,this.segments.forEach((function(e){e.belong=t,e.otherCoincide=0,e.otherFill[0]=e.otherFill[1]=!1})),this}}],[{key:"intersect2",value:function(t,e,r,i){if(t.segments.length&&e.segments.length){var a=Rn(Cn(t.segments.concat(e.segments)),!0,r,i);t.segments=a.filter((function(t){return 0===t.belong})),e.segments=a.filter((function(t){return 1===t.belong}))}}},{key:"annotate2",value:function(t,e,r,i){var a=function(t){var e={};t.forEach((function(t){var r=t.coords,i=r.length,a=r[0],n=r[i-1];wn(e,a.x,a.y,t,!0),wn(e,n.x,n.y,t,!1)}));var r=[];Object.keys(e).forEach((function(t){var i=e[t],a=[];Object.keys(i).forEach((function(t){var e=i[t].sort((function(t,e){return t.isStart!==e.isStart?t.isStart?1:-1:t.isStart?Dn(t.seg,e.seg)?1:-1:void 0}));a.push({y:parseFloat(t),arr:e})})),r.push({x:parseFloat(t),arr:a.sort((function(t,e){return t.y-e.y}))})})),r.sort((function(t,e){return t.x-e.x}));var i=[];return r.forEach((function(t){t.arr.forEach((function(t){i=i.concat(t.arr)}))})),i}(t.segments.concat(e.segments)),n=[],o=[],s={},l={};a.forEach((function(t){var e=t.isStart,a=t.seg,h=a.belong;if(!(0===h&&r||1===h&&i)){var f=0===h?n:o,c=0===h?s:l;if(e){if(a.myCoincide){var u=a.toHash();if(c.hasOwnProperty(u))return;c[u]=!0}if(f.length){var _=f.length,d=f[_-1];if(Dn(a,d))a.myFill[1]=d.myFill[0],a.myCoincide?a.myFill[0]=a.myCoincide%2==0?!a.myFill[1]:a.myFill[1]:a.myFill[0]=!a.myFill[1],f.push(a);else if(1===_)a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,f.unshift(a);else for(var y=_-2;y>=0;y--){var v=f[y];if(Dn(a,v)){a.myFill[1]=v.myFill[0],a.myCoincide?a.myFill[0]=a.myCoincide%2==0?!a.myFill[1]:a.myFill[1]:a.myFill[0]=!a.myFill[1],f.splice(y+1,0,a);break}0===y&&(a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,f.unshift(a))}}else a.myCoincide?a.myFill[0]=a.myCoincide%2==0:a.myFill[0]=!0,f.push(a)}else{var p=f.indexOf(a);p>-1&&f.splice(p,1)}}}));var h=[],f={};a.forEach((function(t){var e=t.isStart,r=t.seg,i=r.belong;if(e){if(r.myCoincide||r.otherCoincide){var a=r.toHash();if(f.hasOwnProperty(a))return;f[a]=!0}var n=!1;if(h.length){var o=h.length,s=h[o-1];if(Dn(r,s))n=s.belong===i?s.otherFill[0]:s.myFill[0],h.push(r);else if(1===o)h.unshift(r);else for(var l=o-2;l>=0;l--){var c=h[l];if(Dn(r,c)){n=c.belong===i?c.otherFill[0]:c.myFill[0],h.splice(l+1,0,r);break}0===l&&h.unshift(r)}}else n=!1,h.push(r);r.otherCoincide||(r.otherFill[0]=n,r.otherFill[1]=n)}else{var u=h.indexOf(r);u>-1&&h.splice(u,1)}}))}}]),t}();function Rn(t,e,r,i){for(var a=[],n=[],o=[];t.length;){n.length&&n.splice(0).forEach((function(t){var e=a.indexOf(t);a.splice(e,1),t.isDeleted||o.push(t)}));for(var s=t[0],l=s.x,h=s.arr;h.length;){var f=h.shift();if(!f.isDeleted){var c=f.belong,u=f.bbox;if(f.isVisited){if(u[0]!==u[2]||2!==f.coords.length){var _=a.indexOf(f);a.splice(_,1),f.isDeleted||o.push(f)}else n.push(f);f.isVisited=!1}else{if(a.length)for(var d=f.coords,y=d.length,v=d[0],p=v.x,g=v.y,x=d[1],m=x.x,E=x.y,b=0;b<a.length;b++){var T=a[b];if(!T.isDeleted&&!f.isDeleted&&(!e||T.belong!==c)){var A=T.bbox,M=T.coords,R=M.length,S=!1;if(Nn(u,A,y,R)){if(y===R&&f.equal(T)){e?(f.otherCoincide++,T.otherCoincide++,f.otherFill=T.myFill,T.otherFill=f.myFill):(f.myCoincide++,T.myCoincide++,f.myFill=T.myFill);continue}var O=M[0],C=O.x,I=O.y,w=M[1],k=w.x,D=w.y,L=void 0,F=void 0;if(2===y)if(2===R){var N=(D-I)*(m-p)-(k-C)*(E-g);if(0===N)if(p===m)p===C&&m===k&&(F=Pn(p,g,m,E,f,C,I,k,D,T,!0));else(E-g)*p/(m-p)+g===(D-I)*C/(k-C)+I&&(F=Pn(p,g,m,E,f,C,I,k,D,T,!1));else L=gn(p,g,m,E,C,I,k,D,N)}else{var P=M[2],B=P.x,H=P.y;if(3===R)L=xn(C,I,k,D,B,H,p,g,m,E),S=!0;else{var G=M[3],Y=G.x,W=G.y;L=bn(C,I,k,D,B,H,Y,W,p,g,m,E),S=!0}}else{var U=d[2],X=U.x,z=U.y;if(3===y)if(2===R)L=xn(p,g,m,E,X,z,C,I,k,D);else{var V=M[2],K=V.x,j=V.y;if(3===R)(L=mn(p,g,m,E,X,z,C,I,k,D,K,j))||(F=Bn(f,T));else{var $=M[3],q=$.x,Z=$.y;L=En(p,g,m,E,X,z,C,I,k,D,K,j,q,Z)}}else{var J=d[3],Q=J.x,tt=J.y;if(2===R)L=bn(p,g,m,E,X,z,Q,tt,C,I,k,D);else{var et=M[2],rt=et.x,it=et.y;if(3===R)L=En(C,I,k,D,rt,it,p,g,m,E,X,z,Q,tt),S=!0;else{var at=M[3],nt=at.x,ot=at.y;(L=Tn(p,g,m,E,X,z,Q,tt,C,I,k,D,rt,it,nt,ot))||(F=Bn(f,T))}}}}if(F){On(o,t,a,l,F.ra),On(o,t,a,l,F.rb),f.isDeleted=T.isDeleted=!0,a.splice(b,1);break}if(L&&L.length){var st=Sn(f,An(L,!S),r&&0===c),lt=Sn(T,An(L,S),i&&1===c);On(o,t,a,l,st),On(o,t,a,l,lt),lt.length&&a.splice(b,1);break}}}}f.isDeleted||(a.push(f),f.isVisited=!0)}}}t.shift()}return n.forEach((function(t){t.isDeleted||o.push(t)})),o.filter((function(t){return!t.isDeleted}))}function Sn(t,e,r){var i=[];if(!e.length)return i;var a,n=t.belong,o=t.coords,s=o.length,l=o[0],h=0;if(e.forEach((function(e){var a,f=e.point,c=e.t;if(2===s)a=new yn([l,f],n);else if(3===s){var u=sn.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,c);a=new yn([l,new dn(u[1][0],u[1][1]),f],n)}else if(4===s){var _=sn.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,c);a=new yn([l,new dn(_[1][0],_[1][1]),new dn(_[2][0],_[2][1]),f],n)}r&&(a.myFill[0]=t.myFill[0],a.myFill[1]=t.myFill[1]),l=f,i.push(a),h=c})),2===s)a=new yn([l,o[1]],n);else if(3===s){var f=sn.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,1);a=new yn([l,new dn(f[1][0],f[1][1]),o[2]],n)}else if(4===s){var c=sn.sliceBezier2Both(o.map((function(t){return[t.x,t.y]})),h,1);a=new yn([l,new dn(c[1][0],c[1][1]),new dn(c[2][0],c[2][1]),o[3]],n)}return r&&(a.myFill[0]=t.myFill[0],a.myFill[1]=t.myFill[1]),i.push(a),t.isDeleted=!0,i}function On(t,e,r,i,a){a.forEach((function(a){var n=a.bbox,o=n[0],s=n[2];if(s<=i&&o!==s&&2!==a.coords.length)t.push(a);else{var l=0;if(o<i)a.isVisited=!0,r.push(a);else for(var h=e.length;l<h;l++){var f=e[l],c=f.x;if(o===c){f.arr.push(a);break}if(o<c){var u={x:o,arr:[a]};e.splice(l,0,u);break}}for(var _=e.length;l<_;l++){var d=e[l],y=d.x;if(s===y){d.arr.unshift(a);break}if(s<y){var v={x:s,arr:[a]};e.splice(l,0,v);break}}}}))}function Cn(t){var e={};t.forEach((function(t){var r=t.bbox,i=r[0],a=r[2];In(e,i,t),In(e,a,t)}));var r=[];return Object.keys(e).forEach((function(t){return r.push({x:parseFloat(t),arr:e[t]})})),r.sort((function(t,e){return t.x-e.x}))}function In(t,e,r){var i=t[e]=t[e]||[];r.isVisited?(i.unshift(r),r.isVisited=!1):(i.push(r),r.isVisited=!0)}function wn(t,e,r,i,a){var n=t[e]=t[e]||{};(n[r]=n[r]||[]).push({isStart:a,seg:i})}function kn(t,e,r){var i=t.x,a=t.y,n=e.x,o=e.y,s=r.x,l=r.y;return Gt.crossProduct(n-i,o-a,s-i,l-a)>=0}function Dn(t,e){var r=t.coords,i=e.coords,a=r.length,n=i.length,o=r[0],s=i[0];if(2===a&&2===n){var l=r[1],h=i[1];return o.equal(s)?kn(l,s,h):kn(o,s,h)}if(2===a&&o.x===r[1].x)return s.x>=o.x;var f=Math.max(o.x,s.x),c=Math.min(r[a-1].x,i[n-1].x),u=f+.5*(c-f);if(o!==s){var _=Fn(r,f),d=Fn(i,f);if(_!==d)return _>d}if(r[a-1]!==i[n-1]){var y=Fn(r,c),v=Fn(i,c);if(y!==v)return y>v}var p=Fn(r,u),g=Fn(i,u);return p!==g?p>g:void 0}function Ln(t,e){if(3===t.length){var r=e?(t[0].x-t[1].x)/(t[0].x-2*t[1].x+t[2].x):(t[0].y-t[1].y)/(t[0].y-2*t[1].y+t[2].y);if(r>0&&r<1)return[r]}else if(4===t.length){var i=Va.getRoots([e?3*(t[1].x-t[0].x):3*(t[1].y-t[0].y),e?6*(t[2].x+t[0].x-2*t[1].x):6*(t[2].y+t[0].y-2*t[1].y),e?3*(t[3].x+3*t[1].x-t[0].x-3*t[2].x):3*(t[3].y+3*t[1].y-t[0].y-3*t[2].y)]).filter((function(t){return t>0&&t<1}));if(i.length)return i.sort((function(t,e){return t-e}))}}function Fn(t,e){var r=t.length;if(e===t[0].x)return t[0].y;if(e===t[r-1].x)return t[r-1].y;if(2===r){if(t[0].y===t[1].y)return t[0].y;var i=(e-t[0].x)/(t[1].x-t[0].x);return t[0].y+i*(t[1].y-t[0].y)}if(3===r){var a=Va.getRoots([t[0].x-e,2*(t[1].x-t[0].x),t[2].x+t[0].x-2*t[1].x]).filter((function(t){return t>=0&&t<=1})),n=t.map((function(t){return[t.x,t.y]}));return sn.pointAtByT(n,a[0])[1]}if(4===r){var o=Va.getRoots([t[0].x-e,3*(t[1].x-t[0].x),3*(t[2].x+t[0].x-2*t[1].x),t[3].x+3*t[1].x-t[0].x-3*t[2].x]).filter((function(t){return t>=0&&t<=1})),s=t.map((function(t){return[t.x,t.y]}));return sn.pointAtByT(s,o[0])[1]}}function Nn(t,e,r,i){if(2===r&&2===i){if(t[0]===t[2]&&e[0]===e[2]&&t[0]===t[2])return!(t[1]>=e[3]||e[1]>=t[3]);if(t[1]===t[3]&&e[1]===e[3]&&t[1]==t[1])return!(t[0]>=e[2]||e[0]>=t[2])}return ee.isRectsOverlap(t,e)}function Pn(t,e,r,i,a,n,o,s,l,h,f){var c=[],u=[],_=a.coords,d=h.coords;return t<n&&!f||e<o&&f?(c.push(new yn([_[0],d[0]],a.belong)),r<s&&!f||i<l&&f?(c.push(new yn([d[0],_[1]],a.belong)),u.push(new yn([d[0],_[1]],h.belong)),u.push(new yn([_[1],d[1]],h.belong))):r===s&&!f||i===l&&f?(c.push(new yn([d[0],d[1]],a.belong)),u.push(new yn([d[0],d[1]],h.belong))):(c.push(new yn([d[0],d[1]],a.belong)),u.push(new yn([d[0],d[1]],h.belong)),c.push(new yn([d[1],_[1]],a.belong)))):t===n&&!f||e===o&&f?r<s&&!f||i<l&&f?(c.push(new yn([_[0],_[1]],a.belong)),u.push(new yn([_[0],_[1]],h.belong)),u.push(new yn([_[1],d[1]],h.belong))):(c.push(new yn([d[0],d[1]],a.belong)),c.push(new yn([d[1],_[1]],a.belong)),u.push(new yn([d[0],d[1]],h.belong))):(u.push(new yn([d[0],_[0]],h.belong)),r<s&&!f||i<l&&f?(c.push(new yn([_[0],_[1]],a.belong)),u.push(new yn([_[0],_[1]],h.belong)),u.push(new yn([_[1],d[1]],h.belong))):r===s&&!f||i===l&&f?(c.push(new yn([_[0],_[1]],a.belong)),u.push(new yn([_[0],_[1]],h.belong))):(c.push(new yn([_[0],d[1]],a.belong)),u.push(new yn([_[0],d[1]],h.belong)),c.push(new yn([d[1],_[1]],a.belong)))),{ra:c,rb:u}}function Bn(t,e){var r=t.coords.map((function(t){return[t.x,t.y]})),i=r.length,a=e.coords.map((function(t){return[t.x,t.y]})),n=a.length,o=r[0],s=a[0],l=r[i-1],h=a[n-1],f=sn.getPointT(r,s[0],s[1]),c=sn.getPointT(r,h[0],h[1]),u=sn.getPointT(a,o[0],o[1]),_=sn.getPointT(a,l[0],l[1]),d=f.length,y=c.length,v=u.length,p=_.length;if(1===d&&1===y&&0===v&&0===p||0===d&&0===y&&1===v&&1===p||(1===d&&1===y&&v+p===1||d+y===1&&1===v&&1===p)||d+y===1&&v+p===1){var g=d?f[0]:0,x=y?c[0]:1,m=sn.sliceBezier2Both(r,g,x),E=v?u[0]:0,b=p?_[0]:1;if(function(t,e){for(var r=0,i=t.length;r<i;r++){var a=t[r],n=e[r];if(Math.abs(a[0]-n[0])>1e-9||Math.abs(a[1]-n[1])>1e-9)return!1}return!0}(m,sn.sliceBezier2Both(a,E,b))){var T=m.map((function(t){return new dn(t)})),A=[],M=[];if(g>0){var R=sn.sliceBezier2Both(r,0,g),S=[t.coords[0],new dn(R[1]),e.coords[0]];4===i&&S.splice(2,0,new dn(R[2])),A.push(new yn(S,t.belong))}if(A.push(new yn(T,t.belong)),x<1){var O=sn.sliceBezier2Both(r,x,1),C=[e.coords[n-1],new dn(O[1]),t.coords[i-1]];4===i&&C.splice(2,0,new dn(O[2])),A.push(new yn(C,t.belong))}if(E>0){var I=sn.sliceBezier2Both(a,0,E),w=[e.coords[0],new dn(I[1]),t.coords[0]];4===n&&w.splice(2,0,new dn(I[2])),M.push(new yn(w,e.belong))}if(M.push(new yn(T,e.belong)),b<1){var k=sn.sliceBezier2Both(a,b,1),D=[t.coords[i-1],new dn(k[1]),e.coords[n-1]];4===n&&D.splice(2,0,new dn(k[2])),M.push(new yn(D,e.belong))}return{ra:A,rb:M}}}}function Hn(t,e,r,i,a,n){for(var o=0,s=e.length;o<s;o++){var l=e[o];if(l!==r){var h=l.length,f=l[0],c=l[h-1],u=f.coords[0],_=c.coords,d=_[_.length-1];if(a.equal(u))return n?(l=Yn(r).concat(l),e[o]=l,e.splice(i,1),Gn(t,e,l,o)):(l=r.concat(l),e[o]=l,e.splice(i,1),Gn(t,e,l,o));if(a.equal(d))return n?(l=l.concat(r),e[o]=l,e.splice(i,1),Gn(t,e,l,o)):(l=l.concat(Yn(r)),e[o]=l,e.splice(i,1),Gn(t,e,l,o))}}Gn(t,e,r,i)}function Gn(t,e,r,i){var a=r.length,n=r[0],o=r[a-1],s=n.coords[0],l=o.coords,h=l[l.length-1];s.equal(h)&&(e.splice(i,1),t.push(r))}function Yn(t){return t.forEach((function(t){return t.reverse()})),t.reverse()}function Wn(t){var e=[],r=[];t.sort((function(t,e){return e.otherFill[0]&&e.otherFill[1]?1:-1}));t:for(;t.length;){for(var i=t.shift(),a=i.coords,n=a.length,o=a[0],s=a[n-1],l=void 0,h=0,f=e.length;h<f;h++){var c=e[h],u=c.length,_=c[0],d=c[u-1],y=_.coords[0],v=d.coords,p=v[v.length-1];if(o.equal(p)){if(i.belong!==d.belong){c.push(i),Hn(r,e,c,h,s,!1);continue t}l||(l={i:h,t:0})}else if(o.equal(y)){if(i.belong!==d.belong){i.reverse(),c.unshift(i),Hn(r,e,c,h,s,!0);continue t}l||(l={i:h,t:1})}else if(s.equal(p)){if(i.belong!==d.belong){i.reverse(),c.push(i),Hn(r,e,c,h,o,!1);continue t}l||(l={i:h,t:2})}else if(s.equal(y)){if(i.belong!==d.belong){c.unshift(i),Hn(r,e,c,h,o,!0);continue t}l||(l={i:h,t:3})}}l?0===l.t?(e[l.i].push(i),Hn(r,e,e[l.i],l.i,s,!1)):1===l.t?(i.reverse(),e[l.i].unshift(i),Hn(r,e,e[l.i],l.i,s,!0)):2===l.t?(i.reverse(),e[l.i].push(i),Hn(r,e,e[l.i],l.i,o,!1)):3===l.t&&(e[l.i].unshift(i),Hn(r,e,e[l.i],l.i,o,!0)):e.push([i])}var g=r.map((function(t){var e,r,i,a,n,o,s=!0,l=0;t.forEach((function(t,s){var h=t.coords,f=h.length,c=t.bbox;s?(i=Math.min(i,c[0]),a=Math.min(a,c[1]),n=Math.max(n,c[2]),o=Math.max(o,c[3])):(i=c[0],a=c[1],n=c[2],o=c[3]),2===f?(l+=s?e*h[1].y-r*h[1].x:h[0].x*h[1].y-h[0].y*h[1].x,e=h[1].x,r=h[1].y):3===f?(l+=s?e*h[2].y-r*h[2].x:h[0].x*h[1].y-h[0].y*h[2].x,e=h[2].x,r=h[2].y):4===f&&(l+=s?e*h[3].y-r*h[3].x:h[0].x*h[3].y-h[0].y*h[3].x,e=h[3].x,r=h[3].y)}));var h=t[0].coords;return(l+=e*h[0].y-r*h[0].x)<0&&(s=!1),{list:t,clockwise:s,bbox:[i,a,n,o],area:(n-i)*(o-a)}}));return g.forEach((function(t){if(!t.checked){for(var e=t.bbox,r=[t],i=0,a=g.length;i<a;i++){var n=g[i];n!==t&&(ee.isRectsInside(e,n.bbox,!0)||ee.isRectsInside(n.bbox,e,!0))&&r.push(n)}if(r.length>1){r.sort((function(t,e){return t.area-e.area}));for(var o=1,s=r.length;o<s;o++){var l=r[o];if(l.checked){for(var h=l.clockwise,f=o-1;f>=0;f--){var c=r[f];c.checked=!0,c.clockwise===h&&(Yn(c.list),c.clockwise=!h),h=!h}h=l.clockwise;for(var u=o+1;u<s;u++){var _=r[u];_.checked=!0,_.clockwise===h&&(Yn(_.list),_.clockwise=!h),h=!h}return}}var d=r[0].clockwise;r[0].checked=!0;for(var y=1,v=r.length;y<v;y++){var p=r[y];p.checked=!0,p.clockwise===d&&(Yn(p.list),p.clockwise=!d),d=!d}}}})),g.map((function(t){var e=t.list.map((function(t){var e=t.coords,r=e.length;return 2===r?[e[1].x,e[1].y]:3===r?[e[1].x,e[1].y,e[2].x,e[2].y]:4===r?[e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]:void 0})),r=t.list[0].coords;return e.unshift([r[0].x,r[0].y]),e}))}function Un(t){return t&&Array.isArray(t)&&Array.isArray(t[0])?Array.isArray(t[0][0])?t:[t]:[]}function Xn(t,e){var r,i,a=t instanceof Mn,n=e instanceof Mn;return a?r=t.reset(0):(r=new Mn(Un(t),0)).selfIntersect(),n?i=e.reset(1):(i=new Mn(Un(e),1)).selfIntersect(),Mn.intersect2(r,i,a,n),Mn.annotate2(r,i,a,n),[r,i]}var zn=[0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,0],Vn=[0,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0],Kn=[0,0,1,0,0,0,1,0,1,1,0,1,0,0,1,0],jn=[0,1,0,0,1,0,1,1,0,1,0,0,0,1,0,0],$n=[0,1,1,0,1,0,0,1,1,0,0,1,0,1,1,0];function qn(t,e){var r=[],i={};return t.forEach((function(t){var a,n=t.belong,o=t.myFill,s=t.otherFill;if(t.otherCoincide){var l=t.toHash();if(i.hasOwnProperty(l))return;i[l]=!0}a=n?(s[0]?8:0)+(o[0]?4:0)+(s[1]?2:0)+(o[1]?1:0):(o[0]?8:0)+(s[0]?4:0)+(o[1]?2:0)+(s[1]?1:0),e[a]&&r.push(t)})),r}var Zn={intersect:function(t,e,r){var i=c(Xn(t,e),2),a=i[0],n=i[1],o=qn(a.segments.concat(n.segments),zn);return r?(a.segments=o,a):Wn(o)},union:function(t,e,r){var i=c(Xn(t,e),2),a=i[0],n=i[1],o=qn(a.segments.concat(n.segments),Vn);return r?(a.segments=o,a):Wn(o)},subtract:function(t,e,r){var i=c(Xn(t,e),2),a=i[0],n=i[1],o=qn(a.segments.concat(n.segments),Kn);return r?(a.segments=o,a):Wn(o)},subtractRev:function(t,e,r){var i=c(Xn(t,e),2),a=i[0],n=i[1],o=qn(a.segments.concat(n.segments),jn);return r?(a.segments=o,a):Wn(o)},xor:function(t,e,r){var i=c(Xn(t,e),2),a=i[0],n=i[1],o=qn(a.segments.concat(n.segments),$n);return r?(a.segments=o,a):Wn(o)},chain:function(t){return t instanceof Mn?Wn(t.segments):Un(t)}},Jn={matrix:P,tar:Ua,vector:Gt,equation:Va,geom:ee,bezier:sn,isec:_n,booleanOperations:Zn},Qn=b.STYLE_KEY,to=Qn.TRANSLATE_X,eo=Qn.TRANSLATE_Y,ro=Qn.TRANSLATE_Z,io=Qn.SCALE_X,ao=Qn.SCALE_Y,no=Qn.SCALE_Z,oo=Qn.SKEW_X,so=Qn.SKEW_Y,lo=Qn.ROTATE_X,ho=Qn.ROTATE_Y,fo=Qn.ROTATE_Z,co=Qn.ROTATE_3D,uo=Qn.PERSPECTIVE,_o=Qn.MATRIX,yo=Qn.FONT_SIZE;D.PX;var vo=D.PERCENT,po=D.REM,go=D.VW,xo=D.VH,mo=D.VMAX,Eo=D.VMIN,bo=Jn.matrix,To=Jn.geom,Ao=bo.identity,Mo=bo.multiply,Ro=bo.isE,So=To.d2r;function Oo(t,e,r,i){var a=function(t,e,r,i){var a=[];return t.forEach((function(t){var n=c(t,2),o=n[0],s=n[1];a.push([o,Io(o,s,e,r,i)])})),a}(t,e,r,i),n=Ao();return a.forEach((function(t){var e=c(t,2),r=e[0],i=e[1],a=Ao();!function(t,e,r){if(e===to)t[12]=r;else if(e===eo)t[13]=r;else if(e===ro)t[14]=r;else if(e===io)t[0]=r;else if(e===ao)t[5]=r;else if(e===no)t[10]=r;else if(e===oo)r=So(r),t[4]=Math.tan(r);else if(e===so)r=So(r),t[1]=Math.tan(r);else if(e===lo){r=So(r);var i=Math.sin(r),a=Math.cos(r);t[5]=t[10]=a,t[6]=i,t[9]=-i}else if(e===ho){r=So(r);var n=Math.sin(r),o=Math.cos(r);t[0]=t[10]=o,t[8]=n,t[2]=-n}else if(e===fo){r=So(r);var s=Math.sin(r),l=Math.cos(r);t[0]=t[5]=l,t[1]=s,t[4]=-s}else if(e===co){var h=c(r,4),f=h[0],u=h[1],_=h[2],d=h[3];d=So(d[0]);var y=Math.sin(d),v=Math.cos(d);if(!f||u||_)if(!u||f||_)if(!_||f||u){var p=Math.sqrt(f*f+u*u+_*_);if(1!==p){var g=1/p;f*=g,u*=g,_*=g}var x=1-v,m=f*u,E=u*_,b=_*f,T=f*y,A=u*y,M=_*y;t[0]=f*f*x+v,t[1]=m*x+M,t[2]=b*x-A,t[3]=0,t[4]=m*x-M,t[5]=u*u*x+v,t[6]=E*x+T,t[7]=0,t[8]=b*x+A,t[9]=E*x-T,t[10]=_*_*x+v,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}else _<0&&(y=-y),t[0]=v,t[4]=-y,t[1]=y,t[5]=v;else u<0&&(y=-y),t[0]=v,t[8]=y,t[2]=-y,t[10]=v;else f<0&&(y=-y),t[5]=v,t[9]=-y,t[6]=y,t[10]=v}else e===uo&&r>0?(r=Math.max(r,1),t[11]=-1/r):e===_o&&it.assignMatrix(t,r)}(a,r,i),n=Mo(n,a)})),n}function Co(t,e){var r=c(e,2),i=r[0],a=r[1],n=t.slice(0);return 0===i&&0===a||Ro(t)?n:(n=Mo([1,0,0,0,0,1,0,0,0,0,1,0,i,a,0,1],n),n=Mo(n,[1,0,0,0,0,1,0,0,0,0,1,0,-i,-a,0,1]))}function Io(t,e,r,i,a){if(t===to||t===ro){if(e[1]===vo)return e[0]*r*.01;if(e[1]===po)return e[0]*a.computedStyle[yo];if(e[1]===go)return e[0]*a.width*.01;if(e[1]===xo)return e[0]*a.height*.01;if(e[1]===mo)return e[0]*Math.max(a.width,a.height)*.01;if(e[1]===Eo)return e[0]*Math.min(a.width,a.height)*.01}else if(t===eo){if(e[1]===vo)return e[0]*i*.01;if(e[1]===po)return e[0]*a.computedStyle[yo];if(e[1]===go)return e[0]*a.width*.01;if(e[1]===xo)return e[0]*a.height*.01;if(e[1]===mo)return e[0]*Math.max(a.width,a.height)*.01;if(e[1]===Eo)return e[0]*Math.min(a.width,a.height)*.01}else{if(t===_o)return e;if(t===co)return e}return e[0]}var wo={calMatrix:Oo,calMatrixByPerspective:function(t,e){return Ro(e)||(t=Mo(e,t)),t},calPerspectiveMatrix:function(t,e){if(t&&t>0){var r=Ao();t=Math.max(t,1),r[11]=-1/t;var i=c(e,2),a=i[0],n=i[1];return(a||n)&&(r=Mo([1,0,0,0,0,1,0,0,0,0,1,0,a,n,0,1],r),r=Mo(r,[1,0,0,0,0,1,0,0,0,0,1,0,-a,-n,0,1])),r}},calMatrixByOrigin:Co,calMatrixWithOrigin:function(t,e,r,i){return Co(Oo(t,r,i),e)},isPerspectiveMatrix:function(t){if(t)return!!(t[3]||t[7]||t[11])}},ko=b.STYLE_KEY,Do=ko.COLOR,Lo=ko.FONT_WEIGHT,Fo=ko.FONT_FAMILY,No=ko.FONT_SIZE,Po=ko.FONT_STYLE,Bo=ko.LETTER_SPACING,Ho=ko.TEXT_STROKE_COLOR,Go=ko.TEXT_STROKE_WIDTH,Yo=ko.TEXT_STROKE_OVER,Wo=ko.ROTATE_Z,Uo=ko.LINE_HEIGHT,Xo=D.DEG,zo=k.CANVAS,Vo=k.SVG,Ko=k.WEBGL,jo=/(?:[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u02EA\u02EB\u1100-\u11FF\u1401-\u167F\u18B0-\u18FF\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2065\u20DD-\u20E0\u20E2-\u20E4\u2100\u2101\u2103-\u2109\u210F\u2113\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u212E\u2135-\u213F\u2145-\u214A\u214C\u214D\u214F-\u2189\u218C-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2B97\u2BB8-\u2BD1\u2BD3-\u2BEB\u2BF0-\u2BFF\u2E50\u2E51\u2E80-\u3007\u3012\u3013\u3020-\u302F\u3031-\u309F\u30A1-\u30FB\u30FD-\uA4CF\uA960-\uA97F\uAC00-\uD7FF\uE000-\uFAFF\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF01-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7\uFFF0-\uFFF8\uFFFC\uFFFD]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|[\uD80C\uD81C-\uD822\uD83C\uD83D\uD840-\uD87E\uD880-\uD8BE][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC3F]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFFF]|\uD823[\uDC00-\uDD7F]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFF]|\uD833[\uDF00-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83E[\uDD00-\uDEFF]|[\uD87F\uD8BF][\uDC00-\uDFFD])/,$o=function(){function t(r,i,a,n,o,s,l){var h=arguments.length>7&&void 0!==arguments[7]&&arguments[7];e(this,t),this.__parent=r,this.__index=i,this.__x=a,this.__y=n,h?(this.__width=s,this.__height=o):(this.__width=o,this.__height=s),this.__content=l,this.__virtualDom={},this.__parentLineBox=null,this.__isVertical=h}return i(t,[{key:"render",value:function(t,e,r,i,a,n){var o=this.content,s=this.x,l=this.y,h=this.parent,f=this.width,c=this.height,u=this.isUpright,_=h.ox,d=h.oy,y=h.parent,v=Ha.getBaseline(r),p=Ha.getVerticalBaseline(r);u?s+=p:l+=v,s+=_+a,l+=d+n,u?(this.__endX=s,this.__endY=l+c):(this.__endX=s+f,this.__endY=l);var g=r[Bo],x=r[Go],m=r[Ho],E=r[No],b=r[Uo],T=0,A=o.length;if(t===zo||t===Ko){var M,R=y.matrixEvent,S=0,O=0;u&&(M=[[Wo,[90,Xo]]],S=.6*p,O=.2*p);var C="fill"===r[Yo];if(g)for(;T<A;T++){var I=o.charAt(T);if(u){if(jo.test(I))e.setTransform(R[0],R[1],R[4],R[5],R[12],R[13]),C&&e.fillText(I,s-S,l-O),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(I,s-S,l-O),C||e.fillText(I,s-S,l-O);else{var w=[s,l],k=wo.calMatrixWithOrigin(M,w,0,0);k=P.multiply(R,k),e.setTransform(k[0],k[1],k[4],k[5],k[12],k[13]),C&&e.fillText(I,s,l),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(I,s,l),C||e.fillText(I,s,l)}l+=e.measureText(I).width+g}else C&&e.fillText(I,s,l),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(I,s,l),C||e.fillText(I,s,l),s+=e.measureText(I).width+g}else if(u){for(var D=jo.test(o.charAt(0)),L=0,F=0,N=o.length,B=1;B<N;B++){var H=jo.test(o.charAt(B));if(H!==D){if(D){e.setTransform(R[0],R[1],R[4],R[5],R[12],R[13]);var G=o.slice(L,B);C&&e.fillText(G,s-S,l+F+v-O),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(G,s-S,l+F+v-O),C||e.fillText(G,s-S,l+F+v-O),F+=E}else{var Y=[s,l+F],W=wo.calMatrixWithOrigin(M,Y,0,0);W=P.multiply(R,W),e.setTransform(W[0],W[1],W[4],W[5],W[12],W[13]);var U=o.slice(L,B);C&&e.fillText(U,s,l+F),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(U,s,l+F),C||e.fillText(U,s,l+F),F+=e.measureText(U).width}L=B,D=!D}else if(H){e.setTransform(R[0],R[1],R[4],R[5],R[12],R[13]);var X=o.slice(L,B);C&&e.fillText(X,s-S,l+F+v-O),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(X,s-S,l+F+v-O),C||e.fillText(X,s-S,l+F+v-O),F+=E,L=B}}if(L<N){var z=o.slice(L,N);if(D)e.setTransform(R[0],R[1],R[4],R[5],R[12],R[13]),C&&e.fillText(z,s-S,l+F+v-O),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(z,s-S,l+F+v-O),C||e.fillText(z,s-S,l+F+v-O);else{var V=[s,l+F],K=wo.calMatrixWithOrigin(M,V,0,0);K=P.multiply(R,K),e.setTransform(K[0],K[1],K[4],K[5],K[12],K[13]),C&&e.fillText(z,s,l+F),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(z,s,l+F),C||e.fillText(z,s,l+F)}}}else C&&e.fillText(o,s,l),x&&(m[3]>0||3===m.length||m.k)&&e.strokeText(o,s,l),C||e.fillText(o,s,l)}else if(t===Vo){var j=i[Do];j.k&&(j=y.__gradient(t,e,y.__bx1,y.__by1,y.__bx2,y.__by2,j,a,n).v),u&&(s+=.5*b-p);var $=[["x",s],["y",l],["fill",j],["font-family",r[Fo]],["font-weight",r[Lo]],["font-style",r[Po]],["font-size",r[No]+"px"]];if(x&&(m[3]>0||3===m.length||m.k)){var q=i[Ho];q.k&&(q=y.__gradient(t,e,y.__bx1,y.__by1,y.__bx2,y.__by2,q,a,n).v),$.push(["stroke",q]),$.push(["stroke-width",r[Go]])}g&&$.push(["letter-spacing",g]),u&&$.push(["writing-mode","vertical-lr"]),this.__virtualDom={type:"item",tagName:"text",props:$,content:it.encodeHtml(o)}}}},{key:"__offsetX",value:function(t){this.__x+=t}},{key:"__offsetY",value:function(t){this.__y+=t}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.__endX}},{key:"endY",get:function(){return this.__endY}},{key:"width",get:function(){return this.__width}},{key:"offsetWidth",get:function(){return this.__width}},{key:"outerWidth",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"offsetHeight",get:function(){return this.__height}},{key:"outerHeight",get:function(){return this.__height}},{key:"content",get:function(){return this.__content}},{key:"baseline",get:function(){return this.parent.baseline}},{key:"verticalBaseline",get:function(){return this.parent.verticalBaseline}},{key:"virtualDom",get:function(){return this.__virtualDom}},{key:"parent",get:function(){return this.__parent}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}}]),t}(),qo=b.STYLE_KEY,Zo=qo.FONT_SIZE,Jo=qo.FONT_FAMILY,Qo=qo.FONT_WEIGHT,ts=qo.FONT_STYLE,es=qo.COLOR,rs=qo.LINE_HEIGHT,is=qo.ROTATE_Z,as=b.NODE_KEY.NODE_VIRTUAL_DOM,ns=D.DEG,os=k.CANVAS,ss=k.SVG,ls=k.WEBGL,hs="…",fs=function(t){function r(i,a,n,o,s){var h;return e(this,r),(h=t.call(this)||this).__x=h.__sx1=i,h.__y=h.__sy1=a,h.__width=n,h.__parent=h.__domParent=o,o.__ellipsis=l(h),h.__parentLineBox=null,h.__baseline=Ha.getBaseline(o.computedStyle),h.__isVertical=s,h}return n(r,t),i(r,[{key:"render",value:function(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.x,s=this.y,l=this.parent,h=this.isUpright,f=l.ox,c=l.oy,u=l.computedStyle,_=l.cacheStyle[es],d=Ha.getBaseline(u),y=Ha.getVerticalBaseline(u);if(h?o+=y:s+=d,o+=f+a,s+=c+n,t===os||t===ls){var v=Ha.setFontStyle(u);if(r.font!==v&&(r.font=v),r.fillStyle!==_&&(r.fillStyle=_),h){var p=l.matrixEvent,g=[[is,[90,ns]]],x=[o,s],m=wo.calMatrixWithOrigin(g,x,0,0);m=P.multiply(p,m),r.setTransform(m[0],m[1],m[4],m[5],m[12],m[13])}r.fillText(hs,o,s)}else if(t===ss){h&&(o+=.5*u[rs]-y);var E=[["x",o],["y",s],["fill",_],["font-family",u[Jo]],["font-weight",u[Qo]],["font-style",u[ts]],["font-size",u[Zo]+"px"]];h&&E.push(["writing-mode","vertical-lr"]);var b=this.__config[as]=this.__virtualDom={type:"text",children:[{type:"item",tagName:"text",props:E,content:hs}]};l.virtualDom.children.push(b)}}},{key:"parentLineBox",get:function(){return this.__parentLineBox}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"isEllipsis",get:function(){return!0}}]),r}(w),cs=[8,16,32,64,128,256,512,1024,2048,4096,8192],us=[128,64,32,16,8,4,2,1,1,1,1],_s=cs[cs.length-1],ds={},ys=0,vs=function(){function t(r,i){e(this,t),this.__size=r,this.__number=i,this.__free=this.__total=i*i,r*=i,this.__width=r,this.__height=r;var a=this.__canvas=Rt.getCacheCanvas(r,r,null,i);a&&(this.__offscreen=a),this.__grid=[];for(var n=0;n<this.__total;n++)this.__grid.push(1);this.__uuid=ys++,this.__update=!1,this.time=0}return i(t,[{key:"add",value:function(){for(var t=this.number,e=this.grid,r=0;r<t;r++)for(var i=0;i<t;i++){var a=r*t+i;if(e[a])return e[a]=0,this.__free--,a}throw new Error("Can not find free page")}},{key:"del",value:function(t){this.grid[t]||(this.grid[t]=1,this.__free++)}},{key:"getCoords",value:function(t){var e=this.size,r=this.number;return[t%r*e,Math.floor(t/r)*e]}},{key:"uuid",get:function(){return this.__uuid}},{key:"size",get:function(){return this.__size}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"number",get:function(){return this.__number}},{key:"total",get:function(){return this.__total}},{key:"free",get:function(){return this.__free}},{key:"grid",get:function(){return this.__grid}},{key:"offscreen",get:function(){return this.__offscreen}},{key:"canvas",get:function(){return this.offscreen.canvas}},{key:"ctx",get:function(){return this.offscreen.ctx}},{key:"update",get:function(){return this.__update},set:function(t){this.__update=t}}],[{key:"getInstance",value:function(e){if(!(e>_s)){for(var r=cs[0],i=us[0],a=0,n=cs.length;a<n&&(r=cs[a],i=us[a],!(cs[a]>=e));a++);for(var o,s=ds[r]=ds[r]||[],l=0,h=s.length;l<h;l++){var f=s[l];if(f.free){o=f;break}}if(!o){if(!(o=new t(r,i)).offscreen)return void Rt.error("Can not create off-screen for page");s.push(o)}var c=o.add();return{page:o,pos:c}}}},{key:"CONFIG",get:function(){return{SIZE:cs,NUMBER:us}},set:function(t){t&&Array.isArray(t.SIZE)&&Array.isArray(t.NUMBER)&&(cs=t.SIZE,us=t.NUMBER,_s=cs[cs.length-1])}},{key:"MAX",get:function(){return _s}},{key:"genUuid",value:function(){return ys++}}]),t}(),ps=b.STYLE_KEY,gs=ps.TRANSFORM_ORIGIN,xs=ps.TRANSFORM,ms=Ha.spreadFilter;function Es(t,e,r){var i=t.size,a=t.sx1,n=t.sy1,o=t.bbox,s=(r=r||o)[2]-r[0],l=r[3]-r[1],h=r[0]-o[0],f=r[1]-o[1],c=Rt.getCacheCanvas(s,l,null,e);return c.x=0,c.y=0,c.bbox=r,c.size=i,c.sx1=a,c.sy1=n,c.dx=-r[0],c.dy=-r[1],c.dbx=t.dbx-h,c.dby=t.dby-f,c.width=s,c.height=l,c}var bs,Ts=function(){function t(r,i,a,n,o,s,l){e(this,t),this.__init(r,i,a,n,o,s,l)}return i(t,[{key:"__init",value:function(t,e,r,i,a,n,o){this.__width=t,this.__height=e,this.__bbox=r,this.__page=i,this.__pos=a;var s=c(i.getCoords(a),2),l=s[0],h=s[1];if(this.__x=l,this.__y=h,this.__appendData(n,o),this.__isNew=!0,i.canvas){this.__enabled=!0;var f=i.ctx;f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,at.flag&&i.canvas.setAttribute&&i.canvas.setAttribute("size",i.size)}}},{key:"__appendData",value:function(t,e){this.sx1=t,this.sy1=e;var r=this.bbox;this.dx=this.x-r[0],this.dy=this.y-r[1],this.dbx=t-r[0],this.dby=e-r[1],this.update()}},{key:"update",value:function(){this.page.update=!0}},{key:"clear",value:function(){if(this.available){var t=this.ctx;t.setTransform(1,0,0,1,0,0);var e=this.page.size;t.clearRect(this.x,this.y,e,e),this.__available=!1,this.__isNew=!0}}},{key:"release",value:function(){this.enabled&&(this.clear(),this.page.del(this.pos),this.__page=null,this.__enabled=!1)}},{key:"reset",value:function(t,e,r){if(it.equalArr(this.bbox,t)&&this.enabled)this.clear();else{this.release();var i=Math.ceil(t[2]-t[0]),a=Math.ceil(t[3]-t[1]),n=vs.getInstance(Math.max(i,a));if(n){var o=n.page,s=n.pos;this.__init(i,a,t,o,s,e,r)}else this.__enabled=!1}}},{key:"resetBbox",value:function(t){}},{key:"enabled",get:function(){return this.__enabled}},{key:"available",get:function(){return this.enabled&&this.__available}},{key:"bbox",get:function(){return this.__bbox}},{key:"page",get:function(){return this.__page}},{key:"canvas",get:function(){return this.page.canvas}},{key:"ctx",get:function(){return this.page.ctx}},{key:"size",get:function(){return this.page.size}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"width",get:function(){return this.__width}},{key:"height",get:function(){return this.__height}},{key:"pos",get:function(){return this.__pos}},{key:"isNew",get:function(){return this.__isNew}}],[{key:"MAX",get:function(){return vs.MAX}},{key:"getInstance",value:function(e,r,i){var a=Math.ceil(e[2]-e[0]),n=Math.ceil(e[3]-e[1]),o=vs.getInstance(Math.max(a,n));if(o)return new t(a,n,e,o.page,o.pos,r,i)}},{key:"genFilter",value:function(t,e){var r=t.x,i=t.y,a=t.size,n=t.canvas,o=t.sx1,s=t.sy1,l=t.width,h=t.height,f=t.bbox,c=f[0]-(f=ms(f,e))[0],u=f[2]-f[0],_=f[3]-f[1],d=Rt.getCacheCanvas(u,_,null,"filter");return d.ctx.filter=ne.canvasFilter(e),d.ctx.drawImage(n,r,i,l,h,c,c,l,h),d.ctx.filter="none",d.draw(),d.bbox=f,d.x=0,d.y=0,d.size=a,d.sx1=o,d.sy1=s,d.dx=-f[0],d.dy=-f[1],d.dbx=t.dbx+c,d.dby=t.dby+c,d.width=u,d.height=_,d}},{key:"genMask",value:function(e,r,i){for(var a=Es(e,"mask1"),n=[],o=r.computedStyle,s=o[xs],l=o[gs],h=r.next,f=h.isClip;h&&h.isMask;)n.push(h),h=h.next;var c=a.x,u=a.y,_=a.ctx,d=a.dbx,y=a.dby;l[0]+=c+d+r.__sx1-e.sx1,l[1]+=u+y+r.__sy1-e.sy1;var v=wo.calMatrixByOrigin(s,l);return n.forEach((function(t){i(t,a,v)})),_.setTransform(1,0,0,1,0,0),_.globalAlpha=1,_.globalCompositeOperation=f?"source-out":"source-in",t.drawCache(e,a),_.globalCompositeOperation="source-over",a.draw(_),a}},{key:"genOverflow",value:function(e,r){var i=e.bbox,a=r.__sx1,n=r.__sy1,o=r.clientWidth,s=r.clientHeight,l=a+o,h=n+s;if(i[0]<a||i[1]<n||i[2]>l||i[3]>h){var f=Es(e,"overflow",[a,n,l,h]),c=f.ctx;return c.setTransform(1,0,0,1,0,0),c.globalAlpha=1,t.drawCache(e,f),f.draw(c),c.globalCompositeOperation="destination-in",c.fillStyle="#FFF",c.beginPath(),c.rect(0,0,o,s),c.fill(),c.closePath(),c.globalCompositeOperation="source-over",f}}},{key:"drawCache",value:function(t,e,r,i,a,n,o){var s=e.x,l=e.y,h=e.sx1,f=e.sy1,c=e.ctx,u=e.dbx,_=e.dby,d=t.x,y=t.y,v=t.canvas,p=t.sx1,g=t.sy1,x=t.dbx,m=t.dby,E=t.width,b=t.height,T=s+p-h+u-x,A=l+g-f+_-m;if(r&&i&&a){a[0]+=T,a[1]+=A;var M=wo.calMatrixByOrigin(r,a);i=P.multiply(i,M),P.isE(n)||(i=P.multiply(n,i)),o&&(it.equalArr(i,o)?i=P.identity():(o=P.inverse(o),i=P.multiply(o,i))),c.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])}c.drawImage(v,d,y,E,b,T,A,E,b)}},{key:"draw",value:function(t,e,r,i){t.globalAlpha=e,t.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]);var a=i.x,n=i.y,o=i.canvas,s=i.sx1,l=i.sy1,h=i.dbx,f=i.dby,c=i.width,u=i.height;t.drawImage(o,a,n,c,u,s-h,l-f,c,u)}},{key:"getCache",value:function(t){for(var e=0,r=t.length;e<r;e++){var i=t[e];if(i&&i.available)return i}}}]),t}();a(Ts,"NA",0),a(Ts,"LOCAL",1),a(Ts,"CHILD",2),a(Ts,"SELF",3);var As=b.STYLE_KEY,Ms=b.STYLE_KEY,Rs=Ms.TRANSLATE_X,Ss=Ms.TRANSLATE_Y,Os=Ms.TRANSLATE_Z,Cs=Ms.OPACITY,Is=Ms.FILTER,ws=Ms.PERSPECTIVE,ks=Ms.PERSPECTIVE_ORIGIN,Ds={NONE:0,TRANSLATE_X:1,TRANSLATE_Y:2,TRANSLATE_Z:4,TRANSFORM:8,TRANSFORM_ALL:15,OPACITY:16,FILTER:32,MIX_BLEND_MODE:64,PERSPECTIVE:128,REPAINT:256,REFLOW:512,REBUILD:1024},Ls=(a(bs={},As.SCALE_X,!0),a(bs,As.SCALE_Y,!0),a(bs,As.SCALE_Z,!0),a(bs,As.ROTATE_X,!0),a(bs,As.ROTATE_Y,!0),a(bs,As.ROTATE_Z,!0),a(bs,As.SKEW_X,!0),a(bs,As.SKEW_Y,!0),a(bs,As.ROTATE_3D,!0),a(bs,As.TRANSFORM,!0),a(bs,As.TRANSFORM_ORIGIN,!0),a(bs,As.TRANSLATE_PATH,!0),bs),Fs=Object.assign({contain:function(t,e){return(t&e)>0},getLevel:function(t){return Fr.isIgnore(t)?Ds.NONE:t===Rs?Ds.TRANSLATE_X:t===Ss?Ds.TRANSLATE_Y:t===Os?Ds.TRANSLATE_Z:Ls.hasOwnProperty(t)?Ds.TRANSFORM:t===Cs?Ds.OPACITY:t===Is?Ds.FILTER:t===ws||t===ks?Ds.PERSPECTIVE:Fr.isRepaint(t)?Ds.REPAINT:Ds.REFLOW},isReflow:function(t){return!this.isRepaint(t)},isRepaint:function(t){return t<Ds.REFLOW},isRebuild:function(t){return t>=Ds.REBUILD}},Ds);Fs.TRANSFORMS=Ls;var Ns=b.STYLE_KEY,Ps=Ns.DISPLAY,Bs=Ns.POSITION,Hs=Ns.LINE_HEIGHT,Gs=Ns.FONT_SIZE,Ys=Ns.FONT_FAMILY,Ws=Ns.FONT_WEIGHT,Us=Ns.COLOR,Xs=Ns.VISIBILITY,zs=Ns.LETTER_SPACING,Vs=Ns.OVERFLOW,Ks=Ns.WHITE_SPACE,js=Ns.TEXT_OVERFLOW,$s=Ns.WIDTH,qs=Ns.HEIGHT,Zs=Ns.TEXT_STROKE_COLOR,Js=Ns.TEXT_STROKE_WIDTH,Qs=Ns.MARGIN_TOP,tl=Ns.MARGIN_BOTTOM,el=Ns.MARGIN_LEFT,rl=Ns.MARGIN_RIGHT,il=Ns.PADDING_TOP,al=Ns.PADDING_BOTTOM,nl=Ns.PADDING_LEFT,ol=Ns.PADDING_RIGHT,sl=Ns.BORDER_TOP_WIDTH,ll=Ns.BORDER_BOTTOM_WIDTH,hl=Ns.BORDER_LEFT_WIDTH,fl=Ns.BORDER_RIGHT_WIDTH,cl=Ns.FILTER,ul=b.NODE_KEY,_l=ul.NODE_CACHE,dl=ul.NODE_LIMIT_CACHE,yl=ul.NODE_DOM_PARENT,vl=ul.NODE_MATRIX_EVENT,pl=ul.NODE_OPACITY,gl=ul.NODE_VIRTUAL_DOM,xl=b.UPDATE_KEY,ml=xl.UPDATE_NODE,El=xl.UPDATE_FOCUS,bl=xl.UPDATE_CONFIG,Tl=b.ELLIPSIS,Al=D.AUTO,Ml=k.CANVAS,Rl=k.SVG,Sl=k.WEBGL;function Ol(t,e,r,i,a,n,o,s,l,h,f,c){if(r>=i)return[0,0,!1];var u=r,_=i,d=0,y=!1;if(f&&[Ml,Sl].indexOf(e)>-1){for(var v=0;u<_;u++){var p=t.measureText(a.charAt(u)).width+f;if(v+p>n+1e-10){y=!0;break}v+=p}return[u-r,v,y||v>n+1e-10]}var g=Math.round(n/o);for(g<=0?g=1:g>i-r&&(g=i-r);u<_;){var x=void 0,m=a.slice(r,r+g);if(e===Ml||e===Sl?x=t.measureText(m).width:e===Rl&&(x=Rt.measureTextSync(m,s,l,h,c)),f&&(x+=g*f),x===n){d=n,y=!0;break}if(x>n+1e-10){if(y=!0,1===g){d=x;break}if(u===_-1||u-r==g-1){g=u-r;break}_=g+r-1;var E=Math.round((x-n)/o);E<=0&&(E=1),(g-=E)<u-r&&(g=u-r)}else{if(d=x,g===i-r)break;u=g+r;var b=Math.round((n-x)/o);b<=0&&(b=1),(g+=b)>_-r&&(g=_-r)}}return[g,d,y]}function Cl(t,e,r,i){return t+"_"+e+"_"+r+"_"+i}var Il=function(t){function r(i){var a;return e(this,r),(a=t.call(this)||this).__content=it.isNil(i)?"":i.toString(),a.__textBoxes=[],a.__charWidth=0,a.__textWidth=0,a.__bp=null,a.__widthHash={},a}return n(r,t),i(r,[{key:"__layout",value:function(t){var e=this.__config[_l];e&&e.release();var r=t.x,i=t.y,a=t.w,n=t.h,o=t.lx,s=void 0===o?r:o,l=t.ly,h=void 0===l?i:l,f=t.lineBoxManager,u=t.endSpace,_=void 0===u?0:u,d=t.lineClamp,y=void 0===d?0:d,v=t.lineClampCount,p=void 0===v?0:v,g=t.isUpright,x=void 0!==g&&g;this.__x=this.__sx=this.__sx1=r,this.__y=this.__sy=this.__sy1=i;var m=this.isDestroyed,E=this.content,b=this.computedStyle,T=this.textBoxes,A=this.root;if(T.splice(0),this.__config[dl]=!1,m||"none"===b[Ps]||!E||y&&p>=y)return p;this.__ox=this.__oy=0;for(var M=0,R=E.length,S=0,O=b[Hs],C=b[zs],I=b[Ks],w=b[Gs],k=b[Ws],D=b[Ys],L=x?n:a,F=x?i-h:r-s,N=this.domParent;"inline"===N.computedStyle[Ps];)N=N.domParent;this.__bp=N;var P,B=N.computedStyle[js],H=A.renderMode;H!==Ml&&H!==Sl||((P=H===Sl?Rt.getFontCanvas().ctx:A.ctx).font=Ha.setFontStyle(b));var G,Y=.8*w+C,W=0;if("nowrap"===I){var U,X=this.textWidth,z=N.computedStyle,V=z[Bs],K=z[Vs],j=N.currentStyle[x?qs:$s];if("hidden"===K&&(U=("absolute"!==V||j[1]!==Al)&&X>L+1e-10-F-_),U&&"ellipsis"===B){G=c(this.__lineBack(P,H,M,R,E,L-_-F,Y,r,i,S,_,O,T,f,D,w,k,C,x),1)[0],W++,x?r=G:i=G}else{var $=new $o(this,T.length,r,i,X,O,E,x);T.push($),f.addItem($,!1),x?r+=O:i+=O,U&&W++}S=X}else{for(;M<R;){var q=M?L:L-F;y&&W+p>=y-1&&(q-=_);var Z=c(Ol(P,H,M,R,E,q,Y,D,w,k,C),3),J=Z[0],Q=Z[1],tt=Z[2];if(y&&tt&&W+p>=y-1&&M+J<R){var et=c(this.__lineBack(P,H,M,M+J,E,q-_,Y,W?s:r,i,S,_,O,T,f,D,w,k,C,x),2);G=et[0],S=et[1],W++,x?r=G:i=G;break}if(M+J===R&&_&&Q+_>q+1e-10&&J>1){var rt=c(Ol(P,H,M,R,E,q-_,Y,D,w,k,C),3);if(J=rt[0],Q=rt[1],tt=rt[2],y&&tt&&W+p>=y-1){var it=c(this.__lineBack(P,H,M,M+J,E,q-_,Y,W?s:r,i,S,_,O,T,f,D,w,k,C,x),2);G=it[0],S=it[1],W++,x?r=G:i=G;break}}S=Math.max(S,Q);var at=new $o(this,T.length,W&&!x?s:r,W&&x?h:i,Q,O,E.slice(M,M+J),x);T.push(at),f.addItem(at,tt),x?r+=Math.max(O,f.verticalLineHeight):i+=Math.max(O,f.lineHeight),M+=J,tt&&W++}W&&(x?this.__y=this.__sy1=h:this.__x=this.__sx1=s)}return x?(this.__width=r-t.x,this.__height=S,this.__verticalBaseline=Ha.getVerticalBaseline(b)):(this.__width=S,this.__height=i-t.y,this.__baseline=Ha.getBaseline(b)),p+W}},{key:"__layoutNone",value:function(){this.__width=this.__height=this.__baseline=this.__verticalBaseline=0,this.__textBoxes.splice(0)}},{key:"__lineBack",value:function(t,e,r,i,a,n,o,s,l,h,f,u,_,d,y,v,p,g,x){var m,E=this.__bp,b=E.computedStyle;if(e===Ml||e===Sl){var T=Ha.setFontStyle(b);t.font!==T&&(t.font=T),m=t.measureText(Tl).width}else m=Rt.measureTextSync(Tl,b[Ys],b[Gs],b[Ws]);if(e===Ml||e===Sl){var A=Ha.setFontStyle(this.computedStyle);t.font!==A&&(t.font=A)}var M=c(Ol(t,e,r,i,a,n-m-f,o,y,v,p,g),2),R=M[0],S=M[1];if(S+m>n+1e-10-f){var O=d.lineBox;if(!d.isNewLine&&O&&O.size)for(var C=O.list,I=C.length-1;I>=0;I--){var w=C[I];if(w instanceof $o){var k=w.content,D=w.width,L=w.height,F=w.parent;if(!I||n>=D+m+1e-10+f){var N=k.length,P=F.computedStyle,B=P[Hs],H=P[zs],G=P[Gs],Y=P[Ws],W=P[Ys];e!==Ml&&e!==Sl||(t.font=Ha.setFontStyle(F.computedStyle));var U=c(Ol(t,e,0,N,k,n-m+D-f,o,W,G,Y,H),2),X=U[0],z=U[1];X!==k.length&&(w.__content=k.slice(0,X),x?(l-=L-z,w.__height=z):(s-=D-z,w.__width=z)),O.__resetLb(b[Hs],x?Ha.getVerticalBaseline(b):Ha.getBaseline(b));var V=x?new fs(s,l+z+f,m,E,x):new fs(s+z+f,l,m,E,x);return d.addItem(V,!0),x?s+=Math.max(B,d.verticalLineHeight):l+=Math.max(B,d.lineHeight),[l,h=Math.max(h,z+m)]}var K=C.pop();x?(n+=L,l-=L):(n+=D,s-=D);var j=K.parent.textBoxes,$=j.indexOf(K);$>-1&&j.splice($,1);var q=K.parent.parent,Z=C[C.length-1];for(Z instanceof $o&&(Z=Z.parent.parent);q!==E&&q!==Z;){var J=q.contentBoxList||[],Q=J.indexOf(K);Q>-1&&J.splice(Q,1);var tt=q.computedStyle;if(x){var et=tt[Qs]+tt[tl]+tt[il]+tt[al]+tt[sl]+tt[ll];l-=et,n+=et}else{var rt=tt[el]+tt[rl]+tt[nl]+tt[ol]+tt[hl]+tt[fl];s-=rt,n+=rt}q.__layoutNone(),q=q.domParent}var it=Z.contentBoxList||[],at=it.indexOf(K);at>-1&&it.splice(at,1)}else{if(!I)break;var nt=C.pop();x?l-=nt.outerHeight:s-=nt.outerWidth,n+=x?nt.outerHeight:nt.outerWidth,nt.__layoutNone()}}}var ot=new $o(this,_.length,s,l,S,u,a.slice(r,r+R),x);_.push(ot),d.addItem(ot,!1);var st=x?new fs(s,l+S+f,m,E,x):new fs(s+S+f,l,m,E,x);return d.addItem(st,!0),x?s+=Math.max(u,d.verticalLineHeight):l+=Math.max(u,d.lineHeight),[x?s:l,h=Math.max(h,S+m)]}},{key:"__backtrack",value:function(t,e,r,i,a,n,o,s,l,h,f){for(var u=r.list,_=u.length-1;_>=0;_--){var d=u[_];if(d instanceof $o){var y=d.content,v=d.width,p=d.height,g=d.parent;if(!_||a>=v+o+1e-10+n){var x=y.length,m=g.computedStyle,E=m[zs],b=m[Gs],T=m[Ws],A=m[Ys];h!==Ml&&h!==Sl||(l.font=Ha.setFontStyle(g.computedStyle));var M=c(Ol(l,h,0,x,y,a-o-n+v,.8*b+E,A,b,T,E),2),R=M[0],S=M[1];R!==y.length&&(d.__content=y.slice(0,R),f?d.__height=S:d.__width=S),r.__resetLb(s[Hs],f?Ha.getVerticalBaseline(s):Ha.getBaseline(s));var O=f?new fs(d.x,d.y+S+n,o,t,f):new fs(d.x+S+n,d.y,o,t,f);return void e.addItem(O,!0)}var C=u.pop();a+=f?p:v;var I=C.parent.textBoxes,w=I.indexOf(C);w>-1&&I.splice(w,1);var k=C.parent.parent,D=u[u.length-1];for(D instanceof $o&&(D=D.parent.parent);k!==t&&k!==D;){var L=k.contentBoxList||[],F=L.indexOf(C);F>-1&&L.splice(F,1);var N=k.computedStyle;if(f)a+=N[Qs]+N[tl]+N[il]+N[al]+N[sl]+N[ll];else a+=N[el]+N[rl]+N[nl]+N[ol]+N[hl]+N[fl];k.__layoutNone(),k=k.domParent}var P=D.contentBoxList||[],B=P.indexOf(C);B>-1&&P.splice(B,1)}else{if(!_)break;var H=u.pop();a+=f?H.outerHeight:H.outerWidth,H.__layoutNone()}}}},{key:"__offsetX",value:function(t,e){f(o(r.prototype),"__offsetX",this).call(this,t,e),e&&this.textBoxes.forEach((function(e){e.__offsetX(t)})),this.__sx1+=t}},{key:"__offsetY",value:function(t,e){f(o(r.prototype),"__offsetY",this).call(this,t,e),e&&this.textBoxes.forEach((function(e){e.__offsetY(t)})),this.__sy1+=t}},{key:"__tryLayInline",value:function(t){return t-this.firstCharWidth}},{key:"__inlineSize",value:function(t){var e,r;this.textBoxes.forEach((function(i,a){a?(e=Math.min(e,t?i.y:i.x),r=Math.max(r,(t?i.y:i.x)+i.width)):(e=t?i.y:i.x,r=(t?i.y:i.x)+i.width)})),t?(this.__y=e,this.__sy=this.__sy1=e+this.oy,this.__sx=this.__sx1,this.__height=r-e):(this.__x=e,this.__sx=this.__sx1=e+this.ox,this.__sy=this.__sy1,this.__width=r-e)}},{key:"render",value:function(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.isDestroyed,s=this.computedStyle,l=this.textBoxes,h=this.cacheStyle,f=this.__config;if(t===Rl&&(f[gl]=this.__virtualDom={type:"text",children:[]}),e>=Fs.REPAINT&&(this.__bbox=null,this.__filterBbox=null),!o&&"none"!==s[Ps]&&"hidden"!==s[Xs]&&l.length){if(t===Ml||t===Sl){if(t===Sl)if(i){var c=this.sx,u=this.sy,_=this.bbox,d=f[_l];if(d?d.reset(_,c,u):d=Ts.getInstance(_,c,u),!d||!d.enabled)return void(f[dl]=!0);f[_l]=d,d.__available=!0,r=d.ctx,a+=d.dx,n+=d.dy,f[dl]=!1}else{var y=this.root,v=Rt.getCacheCanvas(y.width,y.height,"__$$OVERSIZE$$__");r=v.ctx;var p=f[yl].__config,g=p[vl],x=p[pl];r.setTransform(g[0],g[1],g[4],g[5],g[12],g[13]),r.globalAlpha=x}var m=Ha.setFontStyle(s);r.font!==m&&(r.font=m);var E=h[Us];if(E.k){var b=this.parent;E=b.__gradient(t,r,b.__bx1,b.__by1,b.__bx2,b.__by2,E,a,n).v}r.fillStyle!==E&&(r.fillStyle=E);var T=s[Js];r.lineWidth!==T&&(r.lineWidth=T);var A=h[Zs];if(A.k){var M=this.parent;A=M.__gradient(t,r,M.__bx1,M.__by1,M.__bx2,M.__by2,A,a,n).v}r.strokeStyle!==A&&(r.strokeStyle=A)}l.forEach((function(e){e.render(t,r,s,h,a,n)})),t===Rl&&(this.virtualDom.children=l.map((function(t){return t.virtualDom})))}}},{key:"__deepScan",value:function(t){t(this)}},{key:"__destroy",value:function(){if(!this.isDestroyed){f(o(r.prototype),"__destroy",this).call(this);var t=this.__config[_l];t&&t.release()}}},{key:"getComputedStyle",value:function(t){return this.domParent.getComputedStyle(t)}},{key:"updateContent",value:function(t,e){var r=this;t!==r.__content?(root.delRefreshTask(r.__task),root.addRefreshTask(r.__task={__before:function(){r.__content=t;var e={},i=r.domParent;e[ml]=i,e[El]=Fs.REFLOW,e[bl]=i.__config;var a=i.root;a.__addUpdate(i,i.__config,a,a.__config,e)},__after:function(t){it.isFunction(e)&&e(t)}})):it.isFunction(e)&&e(-1)}},{key:"content",get:function(){return this.__content},set:function(t){this.__content=t}},{key:"textBoxes",get:function(){return this.__textBoxes}},{key:"charWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[Ys],s=r[Gs],l=r[Ws],h=r[zs],f=Cl(o,s,l,h);t.hasOwnProperty(f)||(t[f]={});var c=t[f];if(!c.hasOwnProperty("charWidth")){var u=0;if(n===Ml||n===Sl){n===Sl&&(a=Rt.getFontCanvas().ctx),a.font=Ha.setFontStyle(r);for(var _=0,d=e.length;_<d;_++)u=Math.max(u,a.measureText(e.charAt([_])).width)}else n===Rl&&(u=Rt.measureTextListMax(e,o,s,l));c.charWidth=u+h}return c.charWidth}},{key:"firstCharWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[Ys],s=r[Gs],l=r[Ws],h=r[zs],f=Cl(o,s,l,h);t.hasOwnProperty(f)||(t[f]={});var c=t[f];return c.hasOwnProperty("firstCharWidth")||(n===Ml||n===Sl?(n===Sl&&(a=Rt.getFontCanvas().ctx),a.font=Ha.setFontStyle(r),c.firstCharWidth=a.measureText(e.charAt(0)).width+h):n===Rl&&(c.firstCharWidth=Rt.measureTextSync(e.charAt(0),o,s,l)+h)),c.firstCharWidth}},{key:"textWidth",get:function(){var t=this.__widthHash,e=this.content,r=this.computedStyle,i=this.root,a=i.ctx,n=i.renderMode,o=r[Ys],s=r[Gs],l=r[Ws],h=r[zs],f=Cl(o,s,l,h);t.hasOwnProperty(f)||(t[f]={});var c=t[f];return c.hasOwnProperty("textWidth")||(n===Ml||n===Sl?(n===Sl&&(a=Rt.getFontCanvas().ctx),a.font=Ha.setFontStyle(r),c.textWidth=a.measureText(e).width+h*e.length):n===Rl&&(c.textWidth=Rt.measureTextSync(e,o,s,l)+h*e.length)),c.textWidth}},{key:"root",get:function(){return this.domParent.root}},{key:"currentStyle",get:function(){return this.domParent.currentStyle}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.domParent.computedStyle}},{key:"cacheStyle",get:function(){return this.domParent.__cacheStyle}},{key:"bbox",get:function(){var t=this.__sx1,e=this.__sy1,r=this.width,i=this.height,a=this.computedStyle[Js];return[t-a,e-a,t+r+a,e+i+a]}},{key:"filterBbox",get:function(){if(!this.__filterBbox){var t=this.bbox,e=this.computedStyle[cl];this.__filterBbox=Ha.spreadFilter(t,e)}return this.__filterBbox}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"matrix",get:function(){return this.domParent.matrix}},{key:"matrixEvent",get:function(){return this.domParent.matrixEvent}}]),r}(w);Il.prototype.__renderByMask=Il.prototype.render;var wl=L.TYPE_VD,kl=L.TYPE_GM,Dl=L.TYPE_CP;function Ll(t){if(Array.isArray(t))return t.map((function(t){return Ll(t)}));if(!t||-1===[wl,kl,Dl].indexOf(t.$$type)||!Array.isArray(t.children))return t;var e=[];return Fl(e,t.children,{lastText:null}),t.children=e,t}function Fl(t,e,r){if(Array.isArray(e))e.forEach((function(e){Fl(t,e,r)}));else if(!e||e.$$type!==wl&&e.$$type!==kl)e&&e.$$type===Dl?(t.push(e),r.lastText=null):it.isNil(e)||""===e||(null!==r.lastText?t[t.length-1]=r.lastText+=e:t.push(e));else{if(["canvas","svg","webgl"].indexOf(e.tagName)>-1)throw new Error("Can not nest canvas/svg/webgl");e.$$type===wl&&Ll(e),t.push(e),r.lastText=null}}var Nl,Pl,Bl,Hl,Gl,Yl=b.NODE_KEY,Wl=Yl.NODE_DOM_PARENT,Ul=Yl.NODE_STYLE,Xl=Yl.NODE_CURRENT_STYLE,zl=Yl.NODE_COMPUTED_STYLE,Vl=Yl.NODE_MATRIX,Kl=Yl.NODE_MATRIX_EVENT,jl=L.TYPE_VD,$l=L.TYPE_GM,ql=L.TYPE_CP;function Zl(t,e,r,i){if(Array.isArray(t))return t.map((function(t){return Zl(t,e,r,i)}));var a;if(it.isObject(t)&&t.$$type){var n=t.tagName,o=t.props,s=t.children,l=t.klass,h=t.$$type,f=t.__inheritAnimate,c=t.__animateRecords;if(h===ql&&t.__placeholder)return t.__placeholder;if(h===jl){if("img"===n){if(a=new Bl(n,o),Array.isArray(s)&&s.length)throw new Error("Img can not contain children")}else a=new Pl(n,o);if("p"===n)i=!0;else if("div"===n&&i)throw new Error("Markup p can not contain div");s=Array.isArray(s)?Jl(a,Zl(s,e,r,i)):[],a.__children=s}else if(h===$l){if(it.isString(n))a=new(Hl.getRegister(n))(n,o);else n&&(a=new n("$",o))}else{if(h!==ql)return new Il(t);(a=new l(o)).__tagName=n||a.__tagName}t.vd=a,a.__json=t,c&&(a.__animateRecords=c,c.list.forEach((function(t){t.target=t.target.vd})),delete t.__animateRecords),f&&(it.extendAnimate(f,a),delete t.__inheritAnimate),a.__root=e,a.__host=r,h===ql&&a.__init();var u=o.ref;return it.isString(u)&&u||it.isNumber(u)?r.ref[u]=a:it.isFunction(u)&&u(a),a}return new Il(t)}function Jl(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Array.isArray(e))e.forEach((function(e){Jl(t,e,r)}));else if((e instanceof Nl||e instanceof Gl||e instanceof Il)&&(e.__parent=t,e.__domParent=t,e instanceof Il&&[Ul,Xl,zl,Vl,Kl].forEach((function(r){e.__config[r]=t.__config[r]})),e.__config&&(e.__config[Wl]=t),r.prev&&(r.prev.__next=e,e.__prev=r.prev),r.prev=e,e instanceof Gl)){var i=e.shadowRoot;i instanceof Il&&(i.__parent=t,[Ul,Xl,zl,Vl,Kl].forEach((function(r){e.__config[r]=t.__config[r]}))),i.__domParent=t,i.__config&&(i.__config[Wl]=t)}return e}var Ql={ref:function(t){Nl=t.Xom,Pl=t.Dom,Bl=t.Img,Hl=t.Geom,Gl=t.Component},initRoot:function(t,e){var r=Ll({tagName:e.tagName,props:{},children:t,$$type:jl});return e.__json=r,e.__host=e,Jl(e,Zl(r.children,e,e))},initDom:function(t,e,r,i){return Jl(i,Zl(t,e,r))},initCp:function(t,e,r){return it.isObject(t)?Zl(t,e,r):new Il(t)},initCp2:function(t,e,r,i){var a=new t.klass(t.props);return a.__tagName=t.tagName||a.__tagName,a.__root=e,a.__host=r,a.__json=t,a.__init(),Jl(i,a)},relation:Jl},th=it.isFunction,eh=function(){function t(){e(this,t),this.__eHash={}}return i(t,[{key:"on",value:function(t,e){if(th(e)){var r=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.on(t[i],e);else{r.__eHash.hasOwnProperty(t)||(r.__eHash[t]=[]);for(var n=0,o=r.__eHash[t],s=o.length;n<s;n++)if(o[n]===e)return r;r.__eHash[t].push(e)}return r}}},{key:"once",value:function(t,e){if(th(e)){var r=this;if(n.__karasEventCb=e,Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.once(t[i],e);else e&&r.on(t,n);return this}function n(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];e.apply(r,a),r.off(t,n)}}},{key:"off",value:function(t,e){var r=this;if(Array.isArray(t))for(var i=0,a=t.length;i<a;i++)r.off(t[i],e);else if(r.__eHash.hasOwnProperty(t))if(e){for(var n=0,o=r.__eHash[t],s=o.length;n<s;n++)if(o[n]===e||o[n].__karasEventCb===e){o.splice(n,1);break}}else delete r.__eHash[t];return this}},{key:"emit",value:function(t){for(var e=this,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(Array.isArray(t))for(var n=0,o=t.length;n<o;n++)e.emit(t[n],i);else if(e.__eHash.hasOwnProperty(t)){var s=e.__eHash[t];if(s.length)for(var l=0,h=(s=s.slice()).length;l<h;l++){var f=s[l];th(f)&&f.apply(e,i)}}return this}}],[{key:"mix",value:function(){for(var e=arguments.length-1;e>=0;e--){var r=e<0||arguments.length<=e?void 0:arguments[e],i=new t;r.__eHash={};for(var a=["on","once","off","emit"],n=a.length-1;n>=0;n--){var o=a[n];r[o]=i[o]}}}}]),t}();a(eh,"REFRESH","refresh"),a(eh,"PAUSE","pause"),a(eh,"PLAY","play"),a(eh,"FRAME","frame"),a(eh,"FINISH","finish"),a(eh,"CANCEL","cancel"),a(eh,"BEGIN","begin"),a(eh,"END","end");var rh=it.isNil,ih=it.isFunction,ah=it.clone,nh=it.extend,oh={};function sh(t){if(!t.__hasCpUpdate){t.__hasCpUpdate=!0;var e=t.host;e&&sh(e)}}var lh=function(t){function r(){var i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(this,r),(i=t.call(this)||this).__tagName=/(?:function|class)\s+([\w$]+)/.exec(i.constructor.toString())[1],Array.isArray(a)?i.props=it.arr2hash(a):i.props=a,i.__parent=null,i.__host=null,i.__ref={},i.state={},i.__isMounted=!1,i.__taskList=[],i}return n(r,t),i(r,[{key:"setState",value:function(t,e){var r=this,i=this;if(rh(t))t={};else{if(ih(t))return;if(0===Object.keys(t).length)return void(ih(e)&&e.call(i));var a=ah(i.state);t=nh(a,t)}var n=i.root;if(n&&i.__isMounted)if(i.__nextState)Object.assign(i.__nextState,t),i.__taskList.push(e);else{i.__nextState=t,i.__taskList=[e];var o=[],s=i.__task={__before:function(){o=i.__taskList.splice(0),sh(r)},__after:function(){o.forEach((function(t){ih(t)&&t.call(i)}))}};n.addRefreshCp(s)}else ih(e)&&(i.state=t,e.call(i))}},{key:"__init",value:function(t){var e=this;this.__ref={};var i=this.root,a=t||Ll(this.render()),n=Ql.initCp(a,i,this);if(this.__cd=a,n instanceof Il);else if(n instanceof w){var o=Ha.normalize(this.props.style),s=Object.keys(o);nh(n.style,o,s),nh(n.currentStyle,o,s),Object.keys(this.props).forEach((function(t){var r=e.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),n.listener[t]=r)}))}else if(!(n instanceof r))throw new Error("Component render() must return a dom/text: "+this);for(Object.keys(this.props).forEach((function(t){var r=e.props[t];/^on-[a-zA-Z\d_$]/.test(t)&&(t=t.slice(3),e.on(t,r))})),this.__shadow=n,n.__host=this;n instanceof r;)n.__hostRoot=this,n.shadow.__host=n,n=n.shadow;this.__shadowRoot=n,n.__hostRoot=this,this.__isMounted||(this.__isMounted=!0,ih(this.componentDidMount)&&i.once(eh.REFRESH,(function(){e.componentDidMount()})))}},{key:"render",value:function(){Rt.warn("Component must implement render()")}},{key:"__destroy",value:function(){this.isDestroyed||(this.__isDestroyed=!0,this.__isMounted=!1,ih(this.componentWillUnmount)&&this.componentWillUnmount(),this.root.delRefreshTask(this.__task),this.shadowRoot&&this.shadowRoot.__destroy(),this.__parent=null)}},{key:"__emitEvent",value:function(t,e){var r=this.shadowRoot;if(!(r instanceof Il))return r.__emitEvent(t,e)?(t.target=this,!0):void 0}},{key:"tagName",get:function(){return this.__tagName}},{key:"shadow",get:function(){return this.__shadow}},{key:"shadowRoot",get:function(){return this.__shadowRoot}},{key:"root",get:function(){return this.__root}},{key:"host",get:function(){return this.__host}},{key:"hostRoot",get:function(){return this.__hostRoot}},{key:"parent",get:function(){return this.__parent}},{key:"prev",get:function(){return this.__prev}},{key:"next",get:function(){return this.__next}},{key:"ref",get:function(){return this.__ref}},{key:"domParent",get:function(){return this.__domParent}},{key:"state",get:function(){return this.__state},set:function(t){this.__state=t}},{key:"isDestroyed",get:function(){return this.__isDestroyed}}],[{key:"REGISTER",get:function(){return oh}},{key:"getRegister",value:function(t){if(!t||!it.isString(t)||!/^[A-Z]/.test(t))throw new Error("Invalid param");if(!oh.hasOwnProperty(t))throw new Error("Component has not register: ".concat(t));return oh[t]}},{key:"register",value:function(t,e){if(!(t&&it.isString(t)&&/^[A-Z]/.test(t)&&e.prototype&&e.prototype instanceof r))throw new Error("Invalid param: Component register");if(r.hasRegister(t))throw new Error("Component has already register: ".concat(t));oh[t]=e}},{key:"hasRegister",value:function(t){return t&&oh.hasOwnProperty(t)}},{key:"delRegister",value:function(t){r.hasRegister(t)&&delete oh[t]}}]),r}(eh);Object.keys(Fr.GEOM).concat(["x","y","ox","oy","sx","sy","width","height","outerWidth","outerHeight","clientWidth","clientHeight","offsetWidth","offsetHeight","style","animationList","animateStyle","currentStyle","computedStyle","currentProps","baseline","virtualDom","mask","maskId","textWidth","content","lineBoxes","charWidthList","charWidth","__layoutData","availableAnimating","effectiveAnimating","displayAnimating","visibilityAnimating","bbox","__config","contentBoxList","listener","matrix","matrixEvent"]).forEach((function(t){Object.defineProperty(lh.prototype,t,{get:function(){var e=this.shadowRoot;if(e)return e[t]}})})),["__layout","__layoutAbs","__layoutNone","__tryLayInline","__offsetX","__offsetY","__calAutoBasis","__computeReflow","__renderAsMask","__renderByMask","__mp","animate","removeAnimate","clearAnimate","frameAnimate","updateStyle","getBoundingClientRect","getComputedStyle","__deepScan","clearCache","__structure","__modifyStruct","__updateStruct","flowChildren","absChildren","__isRealInline","__calBasis","__calMinMax","__computeMeasure","appendChild","prependChild","insertBefore","insertAfter","removeChild","remove"].forEach((function(t){lh.prototype[t]=function(){var e=this.shadowRoot;if(e&&ih(e[t]))return e[t].apply(e,arguments)}}));var hh=b.STYLE_KEY,fh=hh.MARGIN_TOP,ch=hh.MARGIN_LEFT,uh=hh.MARGIN_RIGHT,_h=hh.MARGIN_BOTTOM,dh=hh.PADDING_TOP,yh=hh.PADDING_LEFT,vh=hh.PADDING_RIGHT,ph=hh.PADDING_BOTTOM,gh=hh.BORDER_TOP_WIDTH,xh=hh.BORDER_LEFT_WIDTH,mh=hh.BORDER_RIGHT_WIDTH,Eh=hh.BORDER_BOTTOM_WIDTH;var bh={getInlineBox:function(t,e,r,i,a,n,o,s,l,h,f,c,u,_,d,y,v,p,g,x){var m,E,b,T,A,M,R,S,O,C=0,I=0,w=e?y+x:u+v,k=e?_+p:d+g;"paddingBox"===c?(C=e?y:u,I=e?_:d):"borderBox"===c&&(C=w,I=k),m=e?n.verticalBaseline-o:n.baseline-o,e?(E=n.x+m-C+l,b=i.y,M=n.x+m-w+l):(E=i.x,b=n.y+m-C+l,R=n.y+m-w+l);for(var D=i instanceof $o?i.parent.domParent:i.domParent;D!==t;){if(i===D.contentBoxList[0])if(e){var L=D.computedStyle;b-=L[fh]+L[dh]+L[gh]}else{var F=D.computedStyle;E-=F[ch]+F[yh]+F[xh]}D=D.domParent}for(e?(R=b,h&&(R-=u+v,"paddingBox"===c?b-=u:"borderBox"===c&&(b-=u+v)),T=n.x+m+s+I-l,S=n.x+m+s+k-l,A=a.y+a.outerHeight):(M=E,h&&(M-=y+x,"paddingBox"===c?E-=y:"borderBox"===c&&(E-=y+x)),T=a.x+a.outerWidth,A=n.y+m+s+I-l,O=n.y+m+s+k-l),D=a instanceof $o?a.parent.domParent:a.domParent;D!==t;){var N=D.contentBoxList;if(a===N[N.length-1])if(e){var P=D.computedStyle;A+=P[_h]+P[ph]+P[Eh]}else{var B=D.computedStyle;T+=B[uh]+B[vh]+B[mh]}D=D.domParent}return e?(O=A,f&&(O+=d+g,"paddingBox"===c?A+=d:"borderBox"===c&&(A+=d+g))):(S=T,f&&(S+=_+p,"paddingBox"===c?T+=_:"borderBox"===c&&(T+=_+p))),E+=t.ox,T+=t.ox,M+=t.ox,S+=t.ox,[E,b+=t.oy,T,A+=t.oy,M,R+=t.oy,S,O+=t.oy]},getInlineWidth:function(t,e,r){var i=0,a=e.length;e[a-1]instanceof fs&&a--;for(var n=0;n<a;n++){var o=e[n];i+=r?o.height:o.width;for(var s=o instanceof $o?o.parent.domParent:o.domParent;s!==t;){var l=s.contentBoxList;if(o===l[0])if(r){var h=s.computedStyle;i+=h[fh]+h[dh]+h[gh]}else{var f=s.computedStyle;i+=f[ch]+f[yh]+f[xh]}if(o===l[l.length-1])if(r){var c=s.computedStyle;i+=c[_h]+c[ph]+c[Eh]}else{var u=s.computedStyle;i+=u[uh]+u[vh]+u[mh]}s=s.domParent}}return i}},Th=b.STYLE_KEY,Ah=Th.SCALE_X,Mh=Th.SCALE_Y,Rh=D.NUMBER;var Sh={matrixResize:function(t,e,r,i,a,n,o,s){if(t!==r||e!==i){var l=[[Ah,[r/t,Rh]],[Mh,[i/e,Rh]]],h=[a,n];return wo.calMatrixWithOrigin(l,h,o,s)}}},Oh=b.STYLE_KEY,Ch=Oh.BACKGROUND_POSITION_X,Ih=Oh.BACKGROUND_POSITION_Y;Oh.FONT_SIZE;var wh=b.NODE_KEY.NODE_DEFS_CACHE,kh=it.clone,Dh=it.joinArr,Lh=ne.canvasPolygon,Fh=ne.svgPolygon;function Nh(t,e,r,i,a,n,o,s,l,h,f,c,u){var _,d,y,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:"fill",p=arguments.length>14&&void 0!==arguments[14]&&arguments[14],g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:0,x=arguments.length>16&&void 0!==arguments[16]?arguments[16]:0;if(Array.isArray(i)&&(_=i[1],d=i[2],y=i[3],i=i[0]),(a=a||Xe.calRadius(n,o,s,l,h,f,c,u))||(a=[[n,o],[n+s,o],[n+s,o+l],[n,o+l],[n,o]]),_){var m=[d,y];_=wo.calMatrixByOrigin(_,m);var E=P.inverse(_);a=a.map((function(t){if(!t||!t.length)return null;for(var e=[],r=0,i=t.length;r<i;r+=2){var a=P.calPoint([t[r],t[r+1]],E);e.push(a[0]),e.push(a[1])}return e}))}if(e===k.CANVAS||e===k.WEBGL){if(_){r.save();var b=t.matrixEvent;_=P.multiply(b,_),r.setTransform(_[0],_[1],_[4],_[5],_[12],_[13])}r.beginPath(),r.fillStyle!==i&&(r.fillStyle=i),Lh(r,a,g,x),r[v](),r.closePath(),_&&r.restore()}else if(e===k.SVG){var T=Fh(a);if(p){var A={tagName:"symbol",props:[],children:[{type:"item",tagName:"path",props:[["d",T],["fill",i]]}]};return t.__config[wh].push(A),r.add(A)}if(t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",T],["fill",i]]}),_){var M=t.virtualDom.bb;M[M.length-1].props.push(["transform","matrix(".concat(Dh(P.m2m6(_),","),")")])}}}var Ph,Bh={renderBgc:Nh,renderImage:function(t,e,r,i,a,n,o,s,l,h,f,u,_,d,y,v,p,g){var x=arguments.length>18&&void 0!==arguments[18]?arguments[18]:0,m=arguments.length>19&&void 0!==arguments[19]?arguments[19]:0,E=i.source;if(E){var b=(o+=x)-(a+=x),T=(s+=m)-(n+=m),A=i.width,M=i.height,R=y[d]||[],S=c(R,2),O=S[0],C=S[1];-1===O&&-1===C?(O=A,C=M):-2===O?A>b&&M>T?(O=A/b)>=(C=M/T)?C=(O=b)*M/A:O=(C=T)*A/M:A>b?C=(O=b)*M/A:M>T?O=(C=T)*A/M:(O=A,C=M):-3===O?b>A&&T>M?(O=A/b)<=(C=M/T)?C=(O=b)*M/A:O=(C=T)*A/M:b>A?C=(O=b)*M/A:T>M?O=(C=T)*A/M:(O=A/b)<=(C=M/T)?C=(O=b)*M/A:O=(C=T)*A/M:-1===O?O=C*A/M:-1===C&&(C=O*M/A);var I=_[Ch][d]||0;/%/.test(I)&&(I=(b-O)*parseFloat(I)*.01),I+=a;var w=_[Ih][d]||0;/%/.test(w)&&(w=(T-C)*parseFloat(w)*.01),w+=n;var D=I<a||w<n||I+O>a+b||w+C>n+T,L=0,F=0,N=0,B=0;if(["repeatX","repeat"].indexOf(v[d])>-1){var H=I-a;H>0&&(L=Math.ceil(H/O)),(H=a+b-I-O)>0&&(F=Math.ceil(H/O))}if(["repeatY","repeat"].indexOf(v[d])>-1){var G=w-n;G>0&&(N=Math.ceil(G/C)),(G=n+T-w-C)>0&&(B=Math.ceil(G/C))}var Y=[];if(L>0)for(var W=0;W<L;W++){var U=I-(W+1)*O;Y.push([U,w]),!D&&0===W&&U<a&&(D=!0)}if(F>0)for(var X=0;X<F;X++){var z=I+(X+1)*O;Y.push([z,w]),!D&&X===F-1&&z+O>a+b&&(D=!0)}if(N>0)for(var V=0;V<N;V++){var K=w-(V+1)*C;Y.push([I,K]),!D&&0===V&&K<n&&(D=!0)}if(B>0)for(var j=0;j<B;j++){var $=w+(j+1)*C;Y.push([I,$]),!D&&j===B-1&&$+O>n+T&&(D=!0)}if(L>0&&N>0)for(var q=0;q<L;q++)for(var Z=0;Z<N;Z++)Y.push([I-(q+1)*O,w-(Z+1)*C]);if(F>0&&N>0)for(var J=0;J<F;J++)for(var Q=0;Q<N;Q++)Y.push([I+(J+1)*O,w-(Q+1)*C]);if(L>0&&B>0)for(var tt=0;tt<L;tt++)for(var et=0;et<B;et++)Y.push([I-(tt+1)*O,w+(et+1)*C]);if(F>0&&B>0)for(var rt=0;rt<F;rt++)for(var it=0;it<B;it++)Y.push([I+(rt+1)*O,w+(it+1)*C]);if(e===k.CANVAS||e===k.WEBGL)D&&(r.save(),Nh(this,e,r,"#FFF",null,a,n,b,T,l,h,f,u,"clip")),r.drawImage(E,I,w,O,C),Y.forEach((function(t){r.drawImage(E,t[0],t[1],O,C)})),D&&r.restore();else if(e===k.SVG){var at,nt=Sh.matrixResize(A,M,O,C,I,w,b,T),ot=[["xlink:href",i.url],["x",I],["y",w],["width",A],["height",M]];if(nt&&!P.isE(nt)&&(at=!0,ot.push(["transform","matrix("+Dh(P.m2m6(nt),",")+")"])),D){var st=[a,n],lt=[o,s];if(at){var ht=P.inverse(nt);st=P.calPoint(st,ht),lt=P.calPoint(lt,ht)}var ft={tagName:"clipPath",children:[{tagName:"path",props:[["d","M".concat(st[0],",").concat(st[1],"L").concat(lt[0],",").concat(st[1],"L").concat(lt[0],",").concat(lt[1],"L").concat(st[0],",").concat(lt[1],"L").concat(st[0],",").concat(st[1])],["fill","#FFF"]]}]},ct=r.add(ft);p[wh].push(ft),ot.push(["clip-path","url(#"+ct+")"])}if(g){var ut={tagName:"symbol",props:[],children:[{type:"img",tagName:"image",props:ot}]};return t.__config[wh].push(ut),Y.forEach((function(t){var e=kh(ot);if(at){var r=Sh.matrixResize(A,M,O,C,t[0],t[1],b,T);r&&!P.isE(r)&&(e[5][1]="matrix("+Dh(P.m2m6(r),",")+")")}e[1][1]=t[0],e[2][1]=t[1],ut.children.push({type:"img",tagName:"image",props:e})})),r.add(ut)}t.virtualDom.bb.push({type:"img",tagName:"image",props:ot}),Y.forEach((function(e){var r=kh(ot);if(at){var i=Sh.matrixResize(A,M,O,C,e[0],e[1],b,T);i&&!P.isE(i)&&(r[5][1]="matrix("+Dh(P.m2m6(i),",")+")")}r[1][1]=e[0],r[2][1]=e[1],t.virtualDom.bb.push({type:"img",tagName:"image",props:r})}))}}}},Hh=it.isFunction;function Gh(t,e,r,i){if(i)for(var a=0;a<e;a++){var n=t[a];n.__after&&n.__after(r)}else for(var o=0;o<e;o++){var s=t[o];s.__before&&s.__before(r)}}var Yh=function(){function t(){e(this,t),this.__hookTask=[],this.__task=[],this.__taskCp=[],this.__now=null}return i(t,[{key:"__init",value:function(){var t=this,e=t.task,r=t.taskCp;Rt.cancelAnimationFrame(t.id);var i=t.__now=Rt.now();!function a(){Rt.cancelAnimationFrame(t.id),t.id=Rt.requestAnimationFrame((function(){if(!Ph&&(e.length||r.length)){var n=t.__now=Rt.now(),o=n-i;o=Math.max(o,0),i=n;var s=e.slice(0),l=r.splice(0),h=s.length,f=l.length;Gh(s,h,o,!1),Gh(l,f,o,!1);for(var c=t.__hookTask.splice(0),u=0,_=c.length;u<_;u++){var d=c[u];d&&d()}Gh(s,h,o,!0),Gh(l,f,o,!0),(e.length||r.length)&&a()}}))}()}},{key:"onFrame",value:function(t){if(t){var e=this.task;e.length||this.__init(),Hh(t)&&(t={__after:t,__karasFramecb:t}),e.push(t)}}},{key:"offFrame",value:function(t){if(t){for(var e=this.task,r=0,i=e.length;r<i;r++){var a=e[r];if(a===t||a.__karasFramecb===t){e.splice(r,1);break}}e.length||(Rt.cancelAnimationFrame(this.id),this.__now=null)}}},{key:"nextFrame",value:function(t){var e=this;if(t){var r=Hh(t)?{__after:function(i){t(i),e.offFrame(r)}}:{__before:t.__before,__after:function(i){t.__after&&t.__after(i),e.offFrame(r)}};r.__karasFramecb=t,this.onFrame(r)}}},{key:"__nextFrameCp",value:function(t){var e=this.task,r=this.taskCp;e.length||r.length||this.__init(),r.push(t)}},{key:"pause",value:function(){Ph=!0}},{key:"resume",value:function(){Ph&&(this.__init(),Ph=!1)}},{key:"task",get:function(){return this.__task}},{key:"taskCp",get:function(){return this.__taskCp}}]),t}(),Wh=new Yh,Uh=.1,Xh="function"==typeof Float32Array;function zh(t,e){return 1-3*e+3*t}function Vh(t,e){return 3*e-6*t}function Kh(t){return 3*t}function jh(t,e,r){return((zh(e,r)*t+Vh(e,r))*t+Kh(e))*t}function $h(t,e,r){return 3*zh(e,r)*t*t+2*Vh(e,r)*t+Kh(e)}function qh(t){return t}function Zh(t,e,r,i){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&r===i)return qh;for(var a=Xh?new Float32Array(11):new Array(11),n=0;n<11;++n)a[n]=jh(n*Uh,t,r);function o(e){for(var i=0,n=1;10!==n&&a[n]<=e;++n)i+=Uh;--n;var o=i+(e-a[n])/(a[n+1]-a[n])*Uh,s=$h(o,t,r);return s>=.001?function(t,e,r,i){for(var a=0;a<4;++a){var n=$h(e,r,i);if(0===n)return e;e-=(jh(e,r,i)-t)/n}return e}(e,o,t,r):0===s?o:function(t,e,r,i,a){var n,o,s=0;do{(n=jh(o=e+(r-e)/2,i,a)-t)>0?r=o:e=o}while(Math.abs(n)>1e-7&&++s<10);return o}(e,i,i+Uh,t,r)}return function(t){return 0===t||1===t?t:jh(o(t),e,i)}}var Jh={linear:Zh(1,1,0,0),easeIn:Zh(.42,0,1,1),easeOut:Zh(0,0,.58,1),ease:Zh(.25,.1,.25,1),easeInOut:Zh(.42,0,.58,1),cubicBezier:Zh,getEasing:function(t,e,r,i){return 4===arguments.length?Zh(t,e,r,i):Array.isArray(t)&&4===t.length?Zh(t[0],t[1],t[2],t[3]):t?(t=t.toString(),/^\s*(?:cubic-bezier\s*)?\(\s*[\d.]+\s*,\s*[-\d.]+\s*,\s*[\d.]+\s*,\s*[-\d.]+\s*\)\s*$/i.test(t)?a=Zh((t=t.match(/[\d.]+/g))[0],t[1],t[2],t[3]):"getEasing"!==t&&(a=this[t]),a):void 0;var a}};Jh["ease-in"]=Jh.easeIn,Jh["ease-out"]=Jh.easeOut,Jh["ease-in-out"]=Jh.easeInOut;var Qh=b.STYLE_KEY,tf=Qh.FILTER,ef=Qh.TRANSFORM_ORIGIN,rf=Qh.PERSPECTIVE_ORIGIN,af=Qh.BACKGROUND_CLIP,nf=Qh.BACKGROUND_POSITION_X,of=Qh.BACKGROUND_POSITION_Y,sf=Qh.BOX_SHADOW,lf=Qh.TRANSLATE_X,hf=Qh.TRANSLATE_Y,ff=Qh.TRANSLATE_Z,cf=Qh.BACKGROUND_SIZE,uf=Qh.FONT_SIZE,_f=Qh.FLEX_BASIS,df=Qh.FLEX_DIRECTION,yf=Qh.WIDTH,vf=Qh.HEIGHT,pf=Qh.TOP,gf=Qh.BOTTOM,xf=Qh.LINE_HEIGHT,mf=Qh.OPACITY,Ef=Qh.Z_INDEX,bf=Qh.TRANSFORM,Tf=Qh.COLOR,Af=Qh.FONT_WEIGHT,Mf=Qh.FONT_STYLE,Rf=Qh.FONT_FAMILY,Sf=Qh.TEXT_ALIGN,Of=Qh.MATRIX,Cf=Qh.ROTATE_3D,If=Qh.TRANSLATE_PATH,wf=Qh.TEXT_STROKE_COLOR,kf=Qh.TEXT_STROKE_OVER,Df=b.UPDATE_KEY,Lf=Df.UPDATE_NODE,Ff=Df.UPDATE_STYLE,Nf=Df.UPDATE_KEYS,Pf=Df.UPDATE_CONFIG,Bf=b.KEY_FRAME_KEY,Hf=Bf.FRAME_STYLE,Gf=Bf.FRAME_TIME,Yf=Bf.FRAME_EASING,Wf=Bf.FRAME_TRANSITION,Uf=b.ANIMATE_KEY,Xf=Uf.I_ASSIGNING,zf=Uf.I_IN_FPS,Vf=Uf.I_IS_DELAY,Kf=Uf.I_BEGIN,jf=Uf.I_END,$f=Uf.I_FINISHED,qf=Uf.I_NEXT_END,Zf=Uf.I_FIRST_PLAY,Jf=Uf.I_PLAY_CB,Qf=Uf.I_TARGET,tc=Uf.I_ROOT,ec=Uf.I_FRAMES,rc=Uf.I_FRAMES_R,ic=Uf.I_CURRENT_TIME,ac=Uf.I_NEXT_TIME,nc=Uf.I_STYLE,oc=Uf.I_DURATION,sc=Uf.I_ITERATIONS,lc=Uf.I_FILL,hc=Uf.I_PLAYBACK_RATE,fc=Uf.I_PLAY_COUNT,cc=Uf.I_PLAY_STATE,uc=Uf.I_DESTROYED,_c=Uf.I_START_TIME,dc=Uf.I_FPS_TIME,yc=Uf.I_EASING,vc=Uf.I_ENTER_FRAME,pc=Uf.I_DELAY,gc=Uf.I_END_DELAY,xc=Uf.I_KEYS,mc=Uf.I_ORIGIN_STYLE,Ec=Uf.I_CURRENT_FRAMES,bc=Uf.I_CURRENT_FRAME,Tc=Uf.I_SPF_LIMIT,Ac=Uf.I_FPS,Mc=Uf.I_DIRECTION,Rc=Uf.I_FIRST_ENTER,Sc=Uf.I_STAY_BEGIN,Oc=Uf.I_STAY_END,Cc=Uf.I_IS2,Ic=Uf.I_END_TIME,wc=Uf.I_NODE_CONFIG,kc=Uf.I_ROOT_CONFIG,Dc=Uf.I_OUT_BEGIN_DELAY,Lc=Uf.I_TIME_STAMP,Fc=D.AUTO,Nc=D.PX,Pc=D.PERCENT,Bc=D.INHERIT,Hc=D.RGBA,Gc=D.STRING,Yc=D.NUMBER,Wc=D.REM,Uc=D.VW,Xc=D.VH,zc=D.VMAX,Vc=D.VMIN,Kc=D.GRADIENT,jc=D.calUnit,$c=it.isNil,qc=it.isFunction,Zc=it.isNumber,Jc=it.isObject;it.isString;var Qc=it.clone,tu=it.equalArr,eu=Jh.linear,ru=Ha.cloneStyle,iu=Fr.isGeom,au=Fr.GEOM,nu=Sr.COLOR_HASH,ou=Sr.LENGTH_HASH,su=Sr.RADIUS_HASH,lu=Sr.GRADIENT_HASH,hu=Sr.EXPAND_HASH,fu=Sr.GRADIENT_TYPE,cu={};function uu(t,e,r,i,a){var n={};n[Lf]=a,n[Ff]=t,n[Nf]=e,n[Pf]=r[wc],i.__addUpdate(a,r[wc],i,r[kc],n),r[nc]=t,r[Xf]=!0,i.__frameHook()}function _u(t,e,r,i){if(t[1]===Nc){if(e[1]===Pc)return.01*e[0]*r-t[0];if(e[1]===Wc)return e[0]*i.computedStyle[uf]-t[0];if(e[1]===Uc)return e[0]*i.width*.01-t[0];if(e[1]===Xc)return e[0]*i.height*.01-t[0];if(e[1]===zc)return e[0]*Math.max(i.width,i.height)*.01-t[0];if(e[1]===Vc)return e[0]*Math.min(i.width,i.height)*.01-t[0]}else if(t[1]===Pc){if(e[1]===Nc)return 100*e[0]/r-t[0];if(e[1]===Wc)return e[0]*i.computedStyle[uf]*100/r-t[0];if(e[1]===Uc)return e[0]*i.width/r-t[0];if(e[1]===Xc)return e[0]*i.height/r-t[0];if(e[1]===zc)return e[0]*Math.max(i.width,i.height)/r-t[0];if(e[1]===Vc)return e[0]*Math.min(i.width,i.height)/r-t[0]}else if(t[1]===Wc){if(e[1]===Nc)return e[0]/i.computedStyle[uf]-t[0];if(e[1]===Pc)return.01*e[0]*r/i.computedStyle[uf]-t[0];if(e[1]===Uc)return e[0]*i.width*.01/i.computedStyle[uf]-t[0];if(e[1]===Xc)return e[0]*i.height*.01/i.computedStyle[uf]-t[0];if(e[1]===zc)return e[0]*Math.max(i.width,i.height)*.01/i.computedStyle[uf]-t[0];if(e[1]===Vc)return e[0]*Math.min(i.width,i.height)*.01/i.computedStyle[uf]-t[0]}else if(t[1]===Uc){if(e[1]===Nc)return 100*e[0]/i.width-t[0];if(e[1]===Wc)return 100*e[0]*i.computedStyle[uf]/i.width-t[0];if(e[1]===Pc)return e[0]*r/i.width-t[0];if(e[1]===Xc)return e[0]*i.height/i.width-t[0];if(e[1]===zc)return e[0]*Math.max(i.width,i.height)/i.width-t[0];if(e[1]===Vc)return e[0]*Math.min(i.width,i.height)/i.width-t[0]}else if(t[1]===Xc){if(e[1]===Nc)return 100*e[0]/i.height-t[0];if(e[1]===Wc)return 100*e[0]*i.computedStyle[uf]/i.height-t[0];if(e[1]===Uc)return e[0]*i.width/i.height-t[0];if(e[1]===Pc)return e[0]*r/i.height-t[0];if(e[1]===zc)return e[0]*Math.max(i.width,i.height)/i.height-t[0];if(e[1]===Vc)return e[0]*Math.min(i.width,i.height)/i.height-t[0]}else if(t[1]===zc){if(e[1]===Nc)return 100*e[0]/Math.max(i.width,i.height)-t[0];if(e[1]===Wc)return 100*e[0]*i.computedStyle[uf]/Math.max(i.width,i.height)-t[0];if(e[1]===Pc)return e[0]*r/Math.max(i.width,i.height)-t[0];if(e[1]===Uc)return e[0]*i.width/Math.max(i.width,i.height)-t[0];if(e[1]===Xc)return e[0]*i.height/Math.max(i.width,i.height)-t[0];if(e[1]===Vc)return e[0]*Math.min(i.width,i.height)/Math.max(i.width,i.height)-t[0]}else if(t[1]===Vc){if(e[1]===Nc)return 100*e[0]/Math.min(i.width,i.height)-t[0];if(e[1]===Wc)return 100*e[0]*i.computedStyle[uf]/Math.min(i.width,i.height)-t[0];if(e[1]===Pc)return e[0]*r/Math.min(i.width,i.height)-t[0];if(e[1]===Uc)return e[0]*i.width/Math.min(i.width,i.height)-t[0];if(e[1]===Xc)return e[0]*i.height/Math.min(i.width,i.height)-t[0];if(e[1]===zc)return e[0]*Math.max(i.width,i.height)/Math.min(i.width,i.height)-t[0]}}function du(t,e,r){if(t.k===e.k&&fu.hasOwnProperty(t.k)){for(var i=t.v,a=e.v,n=[[]],o=tu(i,a),s=0,l=Math.min(i.length,a.length);s<l;s++){var h=i[s],f=a[s],c=[];if(c.push([f[0][0]-h[0][0],f[0][1]-h[0][1],f[0][2]-h[0][2],f[0][3]-h[0][3]]),h[1]&&f[1])if(h[1][1]===f[1][1])c.push(f[1][0]-h[1][0]);else{var u=_u(h[1],f[1],r.clientWidth,r.root);c.push(u||0)}n[0].push(c)}if("linear"===t.k){var _=Array.isArray(t.d);if(Array.isArray(e.d)!==_)return;if(_){var d=[e.d[0]-t.d[0],e.d[1]-t.d[1],e.d[2]-t.d[2],e.d[3]-t.d[3]];if(o&&tu(d,[0,0,0,0]))return;n[1]=d}else{var y=e.d-t.d;if(o&&0===y)return;n[1]=y}}else if("radial"===t.k){var v=Array.isArray(t.z);if(Array.isArray(e.z)!==v)return;if(n[2]=[],v){if(o&&tu(t.z,e.z))return;for(var p=0;p<5;p++){var g=t.z[p];void 0===g&&(g=1);var x=e.z[p];void 0===x&&(x=1),n[2].push(x-g)}}else{if(o&&t.z===e.z&&t.s===e.s&&tu(t.p,e.p))return;for(var m=0;m<2;m++){var E=t.p[m],b=e.p[m];if(E[1]===b[1])n[2].push(b[0]-E[0]);else{var T=_u(E,b,r[m?"clientWidth":"clientHeight"],r.root);n[2].push(T||0)}}}}else if("conic"===t.k){if(o&&t.d===e.d&&tu(t.p,e.p))return;n[1]=e.d-t.d,n[2]=[];for(var A=0;A<2;A++){var M=t.p[A],R=e.p[A];if(M[1]===R[1])n[2].push(R[0]-M[0]);else{var S=_u(M,R,r[A?"clientWidth":"clientHeight"],r.root);n[2].push(S||0)}}}return n}}function yu(t,e,r,i,a){return r.forEach((function(r){var n=function(t,e,r,i,a){var n=[r],o=t[r],s=e[r];if(r===bf){if(!o&&!s)return;var l,h;if(l=o?o[0][1]:P.identity(),h=s?s[0][1]:P.identity(),tu(l,h))return;return n[1]=[h[0]-l[0],h[1]-l[1],h[2]-l[2],h[3]-l[3],h[4]-l[4],h[5]-l[5],h[6]-l[6],h[7]-l[7],h[8]-l[8],h[9]-l[9],h[10]-l[10],h[11]-l[11],h[12]-l[12],h[13]-l[13],h[14]-l[14],h[15]-l[15]],n}if(r===Cf){if(tu(o,s))return;n[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],[s[3][0]-o[3][0],s[3][1]]]}else if(r===tf){for(var f=Math.max(o?o.length:0,s?s.length:0),u=[],_=0;_<f;_++){var d=o?o[_]:null,y=s?s[_]:null;if($c(d)||$c(y)||d[0]!==y[0])u.push(null);else{var v=d[0];if("blur"===v)if(d[1][1]===y[1][1])u.push(y[1][0]-d[1][0]);else{var p=_u(d[1],y[1],0,i.root);u.push(p)}else if("hueRotate"===v||"saturate"===v||"brightness"===v||"contrast"===v||"sepia"===v||"invert"===v||"grayscale"===v)u.push(y[1][0]-d[1][0]);else if("dropShadow"===v){for(var g=[],x=0;x<4;x++){var m=d[1][x],E=y[1][x];m[1]===E[1]?g.push(E[0]-m[0]):g.push(_u(m,E,1===x?i.clientHeight:i.clientWidth,i.root))}g.push([y[1][4][0]-d[1][4][0],y[1][4][1]-d[1][4][1],y[1][4][2]-d[1][4][2],y[1][4][3]-d[1][4][3]]),u.push(g)}}}n[1]=u}else if(r===ef||r===rf){n[1]=[];for(var b=0;b<2;b++){var T=o[b],A=s[b];if(T[1]===A[1])n[1].push(A[0]-T[0]);else{var M=_u(T,A,i[b?"outerHeight":"outerWidth"],i.root);n[1].push(M||0)}}if(tu(n[1],[0,0]))return}else if(r===nf||r===of){n[1]=[];for(var R=Math.min(o.length,s.length),S=0;S<R;S++){var O=o[S],C=s[S];if(O&&C)if(O[1]===C[1]){var I=C[0]-O[0];if(!I)return void n[1].push(null);n[1].push(I)}else{var w=r===nf?"offsetWidth":"offsetHeight";["padding-box","paddingBox"].indexOf(i.computedStyle[af])>-1?w=r===nf?"clientWidth":"clientHeight":["content-box","contentBox"].indexOf(i.computedStyle[af])>-1&&(w=r===nf?"width":"height");var k=_u(O,C,i[w],i.root);if(!k)return void n[1].push(null);n[1].push(k)}else n[1].push(null)}}else if(r===sf){n[1]=[];for(var D=0,L=Math.min(o.length,s.length);D<L;D++){for(var F=o[D],N=s[D],B=[],H=0;H<4;H++)B.push(N[H]-F[H]);for(var G=[],Y=0;Y<4;Y++)G.push(N[4][Y]-F[4][Y]);B.push(G),n[1].push(B)}}else if(hu.hasOwnProperty(r))if(o[1]===s[1]){var W=s[0]-o[0];if(0===W)return;n[1]=W}else{var U=_u(o,s,i[r===lf||r===ff?"outerWidth":"outerHeight"],i.root);if(!U)return;n[1]=U}else if(r===cf){n[1]=[];for(var X,z=Math.min(o.length,s.length),V=0;V<z;V++){var K=o[V],j=s[V];if(K&&j){for(var $=[],q=0;q<2;q++){var Z=K[q],J=j[q];if(Z[1]===J[1])$.push(J[0]-Z[0]);else{var Q=V?"offsetWidth":"offsetHeight";["padding-box","paddingBox"].indexOf(i.computedStyle[af])>-1?Q=V?"clientWidth":"clientHeight":["content-box","contentBox"].indexOf(i.computedStyle[af])>-1&&(Q=V?"width":"height");var tt=_u(Z,J,i[Q],i.root);$.push(tt||0)}}tu($,[0,0])?n[1].push(null):(n[1].push($),X=!0)}else n[1].push(null)}if(!X)return}else if(lu.hasOwnProperty(r)){n[1]=[];for(var et=Math.min(o.length,s.length),rt=0;rt<et;rt++){var it=o[rt],at=s[rt];if(it&&at&&it[1]===at[1]){var nt=it[1]===Kc;it=it[0],at=at[0];var ot=[];if(nt){var st=du(it,at,i);if(!st){n[1].push(null);continue}ot=st}else tu(at,it)&&n[1].push(null),ot[0]=[at[0]-it[0],at[1]-it[1],at[2]-it[2],at[3]-it[3]];n[1].push(ot)}else n[1].push(null)}}else if(nu.hasOwnProperty(r)){if(s[1]!==o[1])return;var lt=s[1]===Kc;if(s=s[0],o=o[0],lt){var ht=du(o,s,i);if(!ht)return;n[1]=ht}else{if(tu(s,o)||0===s[3]&&0===o[3])return;n[1]=[s[0]-o[0],s[1]-o[1],s[2]-o[2],s[3]-o[3]]}}else if(su.hasOwnProperty(r)){if(s[0][0]===o[0][0]&&s[0][1]===o[0][1]&&s[1][0]===o[1][0]&&s[1][1]===o[1][1])return;n[1]=[];for(var ft=0;ft<2;ft++)if(s[ft][1]===o[ft][1])n[1].push(s[ft][0]-o[ft][0]);else{var ct=_u(o[ft],s[ft],i[ft?"outerHeight":"outerWidth"],i.root);n[1].push(ct||0)}}else if(ou.hasOwnProperty(r)){if(o[1]===Fc||s[1]===Fc)return;var ut=i.computedStyle,_t=(i.domParent||i).computedStyle,dt=0;if(o[1]===s[1]?dt=s[0]-o[0]:r===xf?dt=_u(o,s,ut[uf],i.root):r===uf?dt=_u(o,s,_t[uf],i.root):r===_f&&["column","column-reverse","columnReverse"].indexOf(ut[df])>-1||[vf,pf,gf].indexOf(r)>-1?o[1]!==Fc&&s[1]!==Fc&&(dt=_u(o,s,_t[vf],i.root)):o[1]!==Fc&&s[1]!==Fc&&(dt=_u(o,s,_t[yf],i.root)),0===dt||isNaN(dt))return;n[1]=dt}else if(au.hasOwnProperty(r)){if($c(o))return;if(au[r][a]&&qc(au[r][a].calDiff)){var yt=au[r][a].calDiff;if(i.isMulti){for(var vt=[],pt=0,gt=Math.min(o.length,s.length);pt<gt;pt++)vt.push(yt(o[pt],s[pt]));return vt}n[1]=yt(o,s)}else if(i.isMulti)if("points"===r||"controls"===r){if($c(s)||!s.length||$c(o)||!o.length||tu(o,s))return;n[1]=[];for(var xt=0,mt=Math.min(o.length,s.length);xt<mt;xt++){var Et=o[xt],bt=s[xt];if($c(Et)||!Et.length||$c(bt)||!bt.length)n[1].push(null);else{for(var Tt=[],At=0,Mt=Math.min(Et.length,bt.length);At<Mt;At++){var Rt=Et[At],St=bt[At];if($c(Rt)||$c(St))Tt.push(null);else{for(var Ot=[],Ct=0,It=Math.max(Rt.length,St.length);Ct<It;Ct++){var wt=Rt[Ct],kt=St[Ct];$c(wt)||$c(kt)?Ot.push(0):Ot.push(kt-wt)}Tt.push(Ot)}}n[1].push(Tt)}}}else if("controlA"===r||"controlB"===r){if($c(s)||!s.length||$c(o)||!o.length||tu(o,s))return;n[1]=[];for(var Dt=0,Lt=Math.min(o.length,s.length);Dt<Lt;Dt++){var Ft=o[Dt],Nt=s[Dt];$c(Ft)||!Ft.length||$c(Nt)||!Nt.length?n[1].push(null):n[1].push([Nt[0]-Ft[0],Nt[1]-Ft[1]])}}else{if(s===o||tu(s,o)||"edge"===r||"closure"===r||"booleanOperations"===r)return;for(var Pt=[],Bt=0,Ht=Math.min(o.length,s.length);Bt<Ht;Bt++){var Gt=o[Bt],Yt=s[Bt];($c(Gt)||$c(Yt))&&Pt.push(0),Pt.push(Yt-Gt)}n[1]=Pt}else if("points"===r||"controls"===r){if($c(s)||!s.length||$c(o)||!o.length||tu(o,s))return;n[1]=[];for(var Wt=0,Ut=Math.min(o.length,s.length);Wt<Ut;Wt++){var Xt=o[Wt],zt=s[Wt];if($c(Xt)||!Xt.length||$c(zt)||!zt.length)n[1].push(null);else{for(var Vt=[],Kt=0,jt=Math.max(Xt.length,zt.length);Kt<jt;Kt++){var $t=Xt[Kt],qt=zt[Kt];$c($t)||$c(qt)?Vt.push(0):Vt.push(qt-$t)}n[1].push(Vt)}}}else if("controlA"===r||"controlB"===r){if($c(s)||!s.length||$c(o)||!o.length||tu(o,s))return;n[1]=[s[0]-o[0],s[1]-o[1]]}else{if(s===o||"edge"===r||"closure"===r||"booleanOperations"===r)return;n[1]=s-o}}else if(r===mf||r===Ef){if(s===o)return;n[1]=s-o}else{if(r!==If||!o)return;var Zt="offsetWidth",Jt="offsetHeight";["padding-box","paddingBox"].indexOf(i.computedStyle[af])>-1?(Zt="clientWidth",Jt="clientHeight"):["content-box","contentBox"].indexOf(i.computedStyle[af])>-1&&(Zt="width",Jt="height"),n[1]=o.map((function(t,e){var r=c(t,2),a=r[0],n=r[1];return n===Pc?e%2==0?[.01*(parseFloat(a)||0)*i[Zt],Nc]:[.01*(parseFloat(a)||0)*i[Jt],Nc]:n===Wc?[(parseFloat(a)||0)*root.computedStyle[uf]*100,Nc]:n===Uc?[.01*(parseFloat(a)||0)*root.width,Nc]:n===Xc?[.01*(parseFloat(a)||0)*root.height,Nc]:n===zc?[.01*(parseFloat(a)||0)*Math.max(root.width,root.height),Nc]:n===Vc?[.01*(parseFloat(a)||0)*Math.min(root.width,root.height),Nc]:[parseFloat(a)||0,Nc]}))}return n}(t[Hf],e[Hf],r,i,a);n&&t[Wf].push(n)})),e}function vu(t,e,r,i){if(t===e)return i[t][Gf]>r?t-1:t;var a=t+(e-t>>1),n=i[a];return n[Gf]===r?a:n[Gf]>r?vu(t,Math.max(a-1,t),r,i):vu(Math.min(a+1,e),e,r,i)}function pu(t,e,r,i){var a=ru(t[Hf],e),n=function(t){var e;if(t)if(e=/^\s*steps\s*\(\s*(\d+)(?:\s*,\s*(\w+))?\s*\)/i.exec(t)){var r=parseInt(e[1]),i=e[2];e=function(t){if(r&&r>0){var e=1/r;return("start"===i?Math.ceil(t/e):Math.floor(t/e))/r}return t}}else e=Jh.getEasing(t);return e}(t[Yf]);n&&n!==eu&&(r=n(r));for(var o=t[Wf],s=function(t,e){var n=c(o[t],2),s=n[0],l=n[1],h=a[s];if(s===bf){h||(h=a[s]=[[Of,P.identity()]]);for(var f=0;f<16;f++)h[0][1][f]+=l[f]*r}else if(s===If){var u=1-r;8===l.length?(a[lf]=[l[0][0]*u*u*u+3*l[2][0]*r*u*u+3*l[4][0]*r*r*u+l[6][0]*r*r*r,Nc],a[hf]=[l[1][0]*u*u*u+3*l[3][0]*r*u*u+3*l[5][0]*r*r*u+l[7][0]*r*r*r,Nc]):6===l.length&&(a[lf]=[l[0][0]*u*u+2*l[2][0]*r*u+l[4][0]*r*r,Nc],a[hf]=[l[1][0]*u*u+3*l[3][0]*r*u+l[5][0]*r*r,Nc])}else if(s===Cf)h[0]+=l[0]*r,h[1]+=l[1]*r,h[2]+=l[2]*r,h[3][0]+=l[3][0]*r;else if(cu.hasOwnProperty(s))l&&(h[0]+=l*r);else if(s===tf){h||(h=a[s]=[]);for(var _=0,d=l.length;_<d;_++){var y=l[_];if(y){var v=h[_][0],p=h[_][1];if("dropShadow"===v){p[0][0]+=y[0]*r,p[1][0]+=y[1]*r,p[2][0]+=y[2]*r,p[3][0]+=y[3]*r;var g=p[4],x=y[4];g[0]+=x[0]*r,g[1]+=x[1]*r,g[2]+=x[2]*r,g[3]+=x[3]*r}else p[0]+=y*r}}}else if(su.hasOwnProperty(s))for(var m=0;m<2;m++)h[m][0]+=l[m]*r;else if(s===ef||s===rf)0!==l[0]&&(h[0][0]+=l[0]*r),0!==l[1]&&(h[1][0]+=l[1]*r);else if(s===sf)for(var E=0,b=Math.min(h.length,l.length);E<b;E++){for(var T=0;T<4;T++)h[E][T]+=l[E][T]*r;for(var A=0;A<4;A++)h[E][4][A]+=l[E][4][A]*r}else if(s===cf)h.forEach((function(t,e){l[e]&&(t[0][0]+=l[e][0]*r,t[1][0]+=l[e][1]*r)}));else if(s===nf||s===of)h.forEach((function(t,e){l[e]&&(t[0]+=l[e]*r)}));else if(lu.hasOwnProperty(s))h.forEach((function(t,e){var i=l[e];if(i)if(t[1]===Kc&&fu.hasOwnProperty(t[0].k)){t=t[0];for(var a=c(i,4),n=a[0],o=a[1],s=a[2],h=a[3],f=0,u=Math.min(t.v.length,n.length);f<u;f++){var _=t.v[f],d=n[f];_[0][0]+=d[0][0]*r,_[0][1]+=d[0][1]*r,_[0][2]+=d[0][2]*r,_[0][3]+=d[0][3]*r,_[1]&&d[1]&&(_[1][0]+=d[1]*r)}"linear"===t.k&&void 0!==t.d&&void 0!==o&&(Array.isArray(o)?(t.d[0]+=o[0]*r,t.d[1]+=o[1]*r,t.d[2]+=o[2]*r,t.d[3]+=o[3]*r):t.d+=o*r),"radial"===t.k?void 0!==t.z&&void 0!==h?(t.z[0]+=h[0]*r,t.z[1]+=h[1]*r,t.z[2]+=h[2]*r,t.z[3]+=h[3]*r,t.z[4]+=h[4]*r):void 0!==t.p&&void 0!==s&&(t.p[0][0]+=s[0]*r,t.p[1][0]+=s[1]*r):"conic"===t.k&&void 0!==t.d&&void 0!==o&&(t.d+=o*r,t.p[0][0]+=s[0]*r,t.p[1][0]+=s[1]*r)}else{t=t[0];var y=i[0];t[0]+=y[0]*r,t[1]+=y[1]*r,t[2]+=y[2]*r,t[3]+=y[3]*r}}));else if(nu.hasOwnProperty(s))(h=h[0])[0]+=l[0]*r,h[1]+=l[1]*r,h[2]+=l[2]*r,h[3]+=l[3]*r;else if(au.hasOwnProperty(s)){var M=a[s],R=i.tagName;if(au[s][R]&&qc(au[s][R].calIncrease)){var S=au[s][R].calIncrease;i.isMulti?a[s]=M.map((function(t,e){return S(t,l[e],r)})):a[s]=S(M,l,r)}else if(i.isMulti)if("points"===s||"controls"===s)for(var O=0,C=Math.min(M.length,l.length);O<C;O++){var I=M[O],w=l[O];if(!$c(I)&&!$c(w))for(var k=0,D=Math.min(I.length,w.length);k<D;k++){var L=I[k],F=w[k];if(!$c(L)&&!$c(F))for(var N=0,B=Math.min(L.length,F.length);N<B;N++)$c(L[N])||$c(F[N])||(L[N]+=F[N]*r)}}else"controlA"===s||"controlB"===s?l.forEach((function(t,e){var i=M[e];if(!$c(t)&&!$c(i))for(var a=0,n=Math.min(i.length,t.length);a<n;a++){var o=i[a],s=t[a];$c(o)||$c(s)||(i[a]+=s*r)}})):l.forEach((function(t,e){$c(t)||$c(M[e])||(M[e]+=t*r)}));else if("points"===s||"controls"===s)for(var H=0,G=Math.min(M.length,l.length);H<G;H++){var Y=M[H],W=l[H];if(!$c(Y)&&!$c(W))for(var U=0,X=Math.min(Y.length,W.length);U<X;U++)$c(Y[U])||$c(W[U])||(Y[U]+=W[U]*r)}else"controlA"===s||"controlB"===s?($c(M[0])||$c(l[0])||(M[0]+=l[0]*r),$c(M[1])||$c(l[1])||(M[1]+=l[1]*r)):$c(M)||$c(l)||(a[s]+=l*r)}else s!==mf&&s!==Ef||(a[s]+=l*r,s===mf&&(a[s]<0?a[s]=0:a[s]>1&&(a[s]=1)))},l=0,h=o.length;l<h;l++)s(l);return a}function gu(t,e){return qc(t)&&(e=t,t={}),[t||{},e]}function xu(t,e,r,i){t.emit(eh.FRAME,r,i),e[Zf]&&(e[Zf]=!1,t.emit(eh.PLAY));var a=e[Jf];qc(a)&&(a.call(t,r,i),e[Jf]===a&&(e[Jf]=null))}Object.assign(cu,ou),Object.assign(cu,hu);var mu=0,Eu=function(t){function r(i,a,n){var o;if(e(this,r),(o=t.call(this)||this).__id=mu++,a=Qc(a||[]),Array.isArray(a))a=a.filter((function(t){return t&&Jc(t)}));else if(a&&Jc(a)){var s=[];Object.keys(a).forEach((function(t){var e=a[t];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){(s[r]=s[r]||{offset:r/(i-1)})[t]=e[r]}})),a=s}else a=[];Zc(n)&&(o.__options={duration:n},n=o.__options);var l=o.__options=n||{duration:0},h=i.root,f=o.__config=[!1,!1,!1,!0,!1,!1,!1,!0,null,i,h,null,null,0,0,{},0,1,"none",1,0,"idle",!1,0,0,l.easing,!1,0,0,null,null,null,null,!1,60,"normal",!0,!1,!1,!1,0,i.__config,h&&h.__config,!1],u=o.iterations=l.iterations,_=o.duration=l.duration,d=c(o.__init(a,u,_,l.easing,i),4),y=d[0],v=d[1],p=d[2],g=d[3];f[ec]=y,f[rc]=v,f[xc]=p,f[mc]=g,2===y.length&&(f[Cc]=!0,f[Ic]=y[1][Gf]);var x=parseInt(l.fps)||0;return x<=0&&(x=60),o.fps=x,o.spfLimit=l.spfLimit,o.delay=l.delay,o.endDelay=l.endDelay,o.playbackRate=l.playbackRate,o.fill=l.fill,o.iterations=l.iterations,o.direction=l.direction,f[Ec]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(l.direction)?v:y,f[Lc]=Wh.__now,o}return n(r,t),i(r,[{key:"__init",value:function(t,e,r,i,a){if(t.length<1)return[[],[],[],{}];for(var n=a.tagName,o=function(e,r){var i=t[e];if(i.hasOwnProperty("offset")){if(i.offset=parseFloat(i.offset)||0,i.offset=Math.max(0,i.offset),i.offset=Math.min(1,i.offset),isNaN(i.offset)||i.offset<0||i.offset>1)return t.splice(e,1),e--,r--,s=e,l=r,"continue";if(i.offset<=-1)return t.splice(e,1),e--,r--,s=e,l=r,"continue"}Object.keys(i).forEach((function(t){dr.hasOwnProperty(t)&&dr.toFull(i,t)})),Object.keys(i).forEach((function(t){"easing"===t||"offset"===t||Fr.isValid(n,t)||delete i[t]})),s=e,l=r},s=0,l=t.length;s<l;s++)o(s,l);if(1===t.length)if(t[0]=Qc(t[0]),1===t[0].offset)t.unshift({offset:0});else{var h=Qc(t[0]);h.offset=1,t.push(h)}else t.forEach((function(e,r){t[r]=Qc(e)}));var f=t[0];f.hasOwnProperty("offset")&&f.offset>0?(f={offset:0},t.unshift(f)):f.offset=0;var c=t[t.length-1];c.hasOwnProperty("offset")&&c.offset<1?(c={offset:1},t.push(c)):c.offset=1;for(var u=1,_=t.length;u<_;u++){var d=t[u];if(!d.hasOwnProperty("offset")){for(var y=void 0,v=u+1;v<_&&!(y=t[v]).hasOwnProperty("offset");v++);var p=v-u+1;d=t[u-1];for(var g=(y.offset-d.offset)/p,x=u;x<v;x++){t[x].offset=d.offset+g*(x+1-u)}u=v}}var m=[];t.forEach((function(t){m.push(function(t,e,r){var i=t,a=i.offset,n=i.easing;delete t.offset,delete t.easing;var o=t.translatePath;t=Ha.normalize(t),Array.isArray(o)&&[6,8].indexOf(o.length)>-1&&(t[If]=o.map((function(t){var e=jc(t);return e[1]===Yc&&(e[1]=Nc),e})));var s=[];return s[Hf]=t,s[Gf]=a*e,s[Yf]=n||r,s[Wf]=[],s}(t,r,i))}));var E=function(t,e){var r={},i=[];return t.forEach((function(t){var e=t[Hf];Object.keys(e).forEach((function(t){void 0===e[t]||r.hasOwnProperty(t)||(r[t]=!0,au.hasOwnProperty(t)||(t=parseInt(t)),t===If&&(r.hasOwnProperty(lf)||i.push(lf),r.hasOwnProperty(hf)||i.push(hf),r[lf]=r[hf]=!0),i.push(t))}))})),t.forEach((function(t){var r=t[Hf];i.forEach((function(t){r.hasOwnProperty(t)&&!$c(r[t])||(au.hasOwnProperty(t)?r[t]=e.getProps(t):t===lf&&r.hasOwnProperty(If)?r[t]=r[If][0]:t===hf&&r.hasOwnProperty(If)?r[t]=r[If][1]:r[t]=e.currentStyle[t])}))})),i}(m,a);!function(t,e,r){var i=r.computedStyle;t.forEach((function(t){var a=t[Hf];e.forEach((function(t){var e=a[t];if(!$c(e))if(t===bf){var n=r.outerWidth,o=r.outerHeight,s=wo.calMatrix(e,n,o);a[t]=[[Of,s]]}else e[1]===Bc&&(t===Tf||t===wf?a[t]=[it.rgba2int(i[t]),Hc]:ou.hasOwnProperty(t)?a[t]=[i[t],Nc]:t===Af?a[t]=[i[t],Yc]:t!==Mf&&t!==Rf&&t!==Sf&&t!==kf||(a[t]=[i[t],Gc]))}))}))}(m,E,a);var b=Qc(m).reverse(),T=a.style,A=a.props,M={};E.forEach((function(t){iu(n,t)&&(M[t]=A[t]),M[t]=T[t]}));for(var R=m.length,S=m[0],O=1;O<R;O++){S=yu(S,m[O],E,a,n)}b.forEach((function(t){t[Gf]=r-t[Gf],t[Wf]=[]})),S=b[0];for(var C=1;C<R;C++){S=yu(S,b[C],E,a,n)}return[m,b,E,M]}},{key:"__clean",value:function(t){var e,r=this.__config;this.__cancelTask(),r[ac]=0;var i=r[nc],a=r[xc],n=r[Qf];if(t){if(r[ic]=r[pc]+r[oc]*r[sc]+r[gc],"finish"===r[cc])return;r[cc]="finish",r[Oc]||(r[nc]={},e=!0)}else{if(r[fc]=r[ic]=0,"idle"===r[cc])return;r[cc]="idle",r[nc]={},e=!0}e&&a.forEach((function(t){au.hasOwnProperty(t)?n.__currentProps[t]===i[t]&&(n.__currentProps[t]=n.props[t]):n.__currentStyle[t]===i[t]&&(n.__currentStyle[t]=n.style[t])}))}},{key:"play",value:function(t){var e=this.__config,r=e[uc],i=e[oc],a=e[cc],n=e[ec];if(r||i<=0||n.length<1)return this;if("running"===a)return this;if(this.__cancelTask(),e[Jf]=t,e[cc]="running",e[Zf]=!0,this.__hasFin=!1,this.__hasCancel=!1,!e[vc]){e[vc]=!0;var o=e[rc],s=e[Mc];e[Ec]={reverse:!0,"alternate-reverse":!0}.hasOwnProperty(s)?o:n,e[ic]=e[ac]=e[dc]=0}return Wh.onFrame(this),e[_c]=Wh.__now,e[jf]=!1,this}},{key:"__before",value:function(t){var e=this.__config;e[Lc]=Wh.__now;var r,i=e[Qf],a=e[Ac],n=0,o=e[Ec],s=e[sc],l=e[Sc],h=e[Oc],f=e[pc],u=e[tc],_=e[Cc],d=e[Ic],y=e[oc],v=e[gc],p=o.length,g=function(t,e){var r=t[hc],i=t[Tc],a=t[Ac],n=t[ic]=t[ac];return i&&(!0===i?e=Math.min(e,1e3/a):i>0&&(e=Math.min(e,i))),1!==r&&r>0&&(e*=r),t[ac]+=e,[n,e]}(e,t),x=c(g,2),m=x[0];if(t=x[1],!e[Rc]&&a<60){if((t=e[dc]+=t)<1e3/a)return void(e[zf]=!0);e[dc]=0}if(e[Rc]=!1,m<f){if(l)uu((e[bc]=o[0])[Hf],e[xc],e,u,i);return e[Kf]=!1,e[Dc]=!0,void(e[Vf]=!0)}for(m-=f,e[Dc]&&(e[Dc]=!1,e[Kf]=!0);m>=y&&n<s-1;)m-=y,n++;if(e[fc]<n&&(e[Kf]=!0,r=!0),e[fc]=n,r){var E=e[Mc],b=e[ec],T=e[rc];if({alternate:!0,"alternate-reverse":!0}.hasOwnProperty(E)){var A=n%2==0;o=e[Ec]="alternate"===E?A?b:T:A?T:b}}var M,R,S=n>=s-1;_?(M=m<d?0:1,R=d):R=o[M=vu(0,p-1,m,o)][Gf];var O=S&&M===p-1,C=0;if(O);else if(_)C=m/y;else{C=(m-R)/(o[M+1][Gf]-R)}var I,w,k,D=o[M];if(e[bc]=D,O?(I=m<y+v,w=ru(h?D[Hf]:e[mc],e[xc]),e[qf]=!0,I||(e[fc]++,e[$f]=!0,Wh.offFrame(this),k=!0,e[ac]=0)):w=pu(D,e[xc],C,i),uu(w,e[xc],e,u,i),k){var L=e[Jf];this.__clean(!0),L&&(e[Jf]=L)}}},{key:"__after",value:function(t){var e=this.__config;e[Xf]=!1,e[zf]?e[zf]=!1:(xu(this,e,t,e[Vf]),e[Vf]=!1,e[Kf]&&(e[Kf]=!1,this.emit(eh.BEGIN,e[fc])),e[qf]&&!e[jf]&&(e[jf]=!0,this.emit(eh.END,e[fc]-1)),e[$f]&&(e[Kf]=e[jf]=e[Vf]=e[$f]=e[zf]=e[vc]=!1,e[cc]="finished",this.emit(eh.FINISH)))}},{key:"pause",value:function(t){var e=this.__config,r=e[uc],i=e[oc],a=this.pending;return r||i<=0||a||(e[cc]="paused",this.__cancelTask(),t||this.emit(eh.PAUSE)),this}},{key:"resume",value:function(t){var e=this.__config,r=e[uc],i=e[oc],a=e[cc];return r||i<=0||"paused"!==a?this:this.play(t)}},{key:"finish",value:function(t){var e=this,r=e.__config,i=r[uc],a=r[oc],n=r[cc],o=r[ec];if(i||a<=0||o.length<1||"finished"===n||"idle"===n)return e;e.__cancelTask();var s,l=r[tc],h=r[mc];l&&(r[Oc]?(r[bc]=o[o.length-1],s=o[o.length-1][Hf]):s=h,l.addRefreshTask({__before:function(){r[Xf]=!0,uu(s,r[xc],r,l,r[Qf]),e.__clean(!0)},__after:function(i){e.__hasFin||(e.__hasFin=!0,r[Xf]=!1,xu(e,r,i),r[Kf]=r[jf]=r[Vf]=r[$f]=r[zf]=r[vc]=!1,e.emit(eh.FINISH)),qc(t)&&t.call(e,i)}}));return e}},{key:"cancel",value:function(t){var e=this,r=e.__config,i=r[uc],a=r[oc],n=r[cc],o=r[ec];if(i||a<=0||"idle"===n||o.length<1)return e;e.__cancelTask();var s=r[tc],l=r[mc];return s&&s.addRefreshTask({__before:function(){r[Xf]=!0,uu(l,r[xc],r,s,r[Qf]),e.__clean()},__after:function(i){e.__hasCancel||(e.__hasCancel=!0,r[Xf]=!1,xu(e,r,i),r[Kf]=r[jf]=r[Vf]=r[$f]=r[zf]=r[vc]=!1,e.emit(eh.CANCEL)),qc(t)&&t.call(e,i)}}),e}},{key:"gotoAndPlay",value:function(t,e,r){var i=this.__config,a=i[uc],n=i[oc],o=i[ec],s=i[pc],l=i[gc];if(a||n<=0||o.length<1)return this;var h=c(gu(e,r),2);return e=h[0],r=h[1],this.__goto(t,e.isFrame,e.excludeDelay),t>n+s+l?this.finish(r):this.play(r)}},{key:"gotoAndStop",value:function(t,e,r){var i=this,a=this.__config,n=a[uc],o=a[oc],s=a[ec],l=a[pc],h=a[gc];if(n||o<=0||s.length<1)return this;var f=c(gu(e,r),2);return e=f[0],r=f[1],(t=this.__goto(t,e.isFrame,e.excludeDelay))>o+l+h?this.finish(r):this.play((function(t){a[cc]="paused",i.__cancelTask(),qc(r)&&r.call(i,t)}))}},{key:"assignCurrentStyle",value:function(){var t=this.__config,e=t[nc],r=t[Qf];t[xc].forEach((function(t){if(e.hasOwnProperty(t)){var i=e[t];au.hasOwnProperty(t)?r.currentProps[t]=i:r.currentStyle[t]=i}}))}},{key:"__goto",value:function(t,e,r){var i=this.__config,a=i[sc],n=i[oc];if(i[cc]="paused",isNaN(t)||t<0)throw new Error("Param of gotoAnd(Play/Stop) is illegal: "+t);e&&(t=(t-1)/this.spf),r&&(t+=i[pc]),i[ac]=t,t-=i[pc];for(var o=0;t>=n&&o<a-1;)o++,t-=n;i[fc]=o,i[vc]=!0;var s=i[ec],l=i[rc],h=i[Mc];if({alternate:!0,"alternate-reverse":!0}.hasOwnProperty(h)){var f=o%2==0;i[Ec]="alternate"===h?f?s:l:f?l:s}return t}},{key:"addControl",value:function(){var t=this.root;if(t){var e=t.animateController;e&&e.add(this)}}},{key:"removeControl",value:function(){var t=this.root;if(t){var e=t.animateController;e&&e.remove(this)}}},{key:"__stayBegin",value:function(){return{backwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__stayEnd",value:function(){return{forwards:!0,both:!0}.hasOwnProperty(this.fill)}},{key:"__setTarget",value:function(t){this.__target=t,this.__config[Qf]=t,this.__config[wc]=t.__config}},{key:"__cancelTask",value:function(){Wh.offFrame(this),this.__config[Jf]=null}},{key:"__destroy",value:function(t){var e=this,r=e.__config;r[uc]||(e.removeControl(),t?(e.__clean(),r[Qf]=null):Wh.nextFrame({__before:function(){e.__clean(),r[Qf]=null}}),r[_c]=0,r[uc]=!0)}},{key:"__checkModify",value:function(){var t=this.__config;"idle"!==t[cc]&&"finished"!==t[cc]&&Rt.warn("Modification will not come into effect when animation is running")}},{key:"id",get:function(){return this.__id}},{key:"target",get:function(){return this.__config[Qf]}},{key:"root",get:function(){return this.__config[tc]}},{key:"keys",get:function(){return this.__config[xc]}},{key:"style",get:function(){return this.__config[nc]}},{key:"options",get:function(){return this.__options}},{key:"duration",get:function(){return this.__config[oc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[oc]!==t&&(e[oc]=t,e[Ic]=t,this.__checkModify()),t}},{key:"delay",get:function(){return this.__config[pc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[pc]!==t&&(e[pc]=t,this.__checkModify()),t}},{key:"endDelay",get:function(){return this.__config[gc]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[gc]!==t&&(e[gc]=t,this.__checkModify()),t}},{key:"fps",get:function(){return this.__config[Ac]},set:function(t){t=parseInt(t)||60;var e=this.__config;return e[Ac]!==t&&(t<=0&&(t=60),e[Ac]=t),t}},{key:"spf",get:function(){return 1/this.fps}},{key:"iterations",get:function(){return this.__config[sc]},set:function(t){t===1/0||it.isString(t)&&"infinity"===t.toLowerCase()?t=1/0:(t=parseInt(t),(isNaN(t)||t<0)&&(t=1));var e=this.__config;return e[sc]!==t&&(e[sc]=t),t}},{key:"fill",get:function(){return this.__config[lc]},set:function(t){t=t||"none";var e=this.__config;return e[lc]!==t&&(e[lc]=t,this.__checkModify()),e[Sc]={backwards:!0,both:!0}.hasOwnProperty(t),e[Oc]={forwards:!0,both:!0}.hasOwnProperty(t),t}},{key:"direction",get:function(){return this.__config[Mc]},set:function(t){t=t||"normal";var e=this.__config;return e[Mc]!==t&&(e[Mc]=t,this.__checkModify()),t}},{key:"frames",get:function(){return this.__config[ec]}},{key:"framesR",get:function(){return this.__config[rc]}},{key:"playbackRate",get:function(){return this.__config[hc]},set:function(t){(t=parseFloat(t)||1)<=0&&(t=1);var e=this.__config;return e[hc]!==t&&(e[hc]=t),t}},{key:"easing",get:function(){return this.__config[yc]}},{key:"startTime",get:function(){return this.__config[_c]}},{key:"currentTime",get:function(){return this.__config[ic]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[ic]!==t&&(e[ic]=t,e[ac]=t),t}},{key:"nextTime",get:function(){return this.__config[ac]},set:function(t){t=Math.max(0,parseFloat(t)||0);var e=this.__config;return e[ac]!==t&&(e[ac]=t),t}},{key:"timestamp",get:function(){return this.__config[Lc]}},{key:"pending",get:function(){return"running"!==this.__config[cc]}},{key:"finished",get:function(){return"finished"===this.__config[cc]}},{key:"playState",get:function(){return this.__config[cc]}},{key:"playCount",get:function(){return this.__config[fc]},set:function(t){t=Math.max(0,parseInt(t)||0);var e=this.__config;return e[fc]!==t&&(e[fc]=t),t}},{key:"isDestroyed",get:function(){return this.__config[uc]}},{key:"animating",get:function(){var t=this.__config,e=t[cc];return"idle"!==e&&("finished"!==e||t[Oc]||t[Sc])}},{key:"spfLimit",get:function(){return this.__config[Tc]},set:function(t){t=it.isNumber(t)||/^\d/.test(t)?Math.max(0,parseInt(t)||0):!!t;var e=this.__config;return e[Tc]!==t&&(e[Tc]=t),t}},{key:"assigning",get:function(){return this.__config[Xf]}}]),r}(eh),bu=b.NODE_KEY.NODE_DEFS_CACHE,Tu=it.int2rgba,Au=ne.canvasPolygon,Mu=ne.svgPolygon;var Ru={renderBoxShadow:function(t,e,r,i,a,n,o,s,l,h){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,u=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;a+=f,n+=u,o+=f,s+=u;var _=c(i,6),d=_[0],y=_[1],v=_[2],p=_[3],g=_[4],x=_[5],m=Tu(g),E=2*Math.abs(v)+2*Math.abs(p)+2*Math.abs(d)+2*Math.abs(y),b=[[a,n],[o,n],[o,s],[a,s],[a,n]],T=[[a-E,n-E],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E]];if(g[3]>0)if(e===k.CANVAS||e===k.WEBGL){if(r.save(),r.beginPath(),"inset"===x){var A=a+d+p,M=n+y+p,R=o+d-p,S=s+y-p,O=[[A,M],[R,M],[R,S],[A,S]],C=ee.getRectsIntersection([b[0][0],b[0][1],b[2][0],b[2][1]],[O[0][0],O[0][1],O[2][0],O[2][1]]);if(!C)return;C=[[C[0],C[1]],[C[2],C[1]],[C[2],C[3]],[C[0],C[3]],[C[0],C[1]]],p?(Au(r,C),Au(r,b.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==m&&(r.fillStyle=m),Au(r,b),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),Au(r,C),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=m,r.shadowBlur=v,Au(r,[[A,M],[R,M],[R,S],[a-E,S],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,S],[A,S],[A,M]])):(Au(r,b),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=d,r.shadowOffsetY=y,r.shadowColor=m,r.shadowBlur=v,Au(r,[[a,n],[o,n],[o,s],[a-E,s],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,s],[a,s],[a,n]]))}else{var I=a+d-p,w=n+y-p,D=o+d+p,L=s+y+p,F=[[I,w],[D,w],[D,L],[I,L]],N=ee.getRectsIntersection([b[0][0],b[0][1],b[2][0],b[2][1]],[F[0][0],F[0][1],F[2][0],F[2][1]]);p?(Au(r,b),Au(r,F.slice(0).reverse()),r.clip(),r.closePath(),r.beginPath(),r.fillStyle!==m&&(r.fillStyle=m),Au(r,F),r.fill(),r.closePath(),r.restore(),r.save(),r.beginPath(),N&&Au(r,[[N[0],N[1]],[N[2],N[1]],[N[2],N[3]],[N[0],N[3]],[N[0],N[1]]].reverse()),Au(r,b),Au(r,F),Au(r,T),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowColor=m,r.shadowBlur=v,Au(r,F)):(Au(r,b),Au(r,T),r.clip(),r.closePath(),r.beginPath(),"#FFF"!==r.fillStyle&&(r.fillStyle="#FFF"),r.shadowOffsetX=d,r.shadowOffsetY=y,r.shadowColor=m,r.shadowBlur=v,Au(r,b))}r.fill(),r.closePath(),r.restore()}else if(e===k.SVG){var P=Yr.outerSize(v);if("inset"===x){var B=a+d+p,H=n+y+p,G=o+d-p,Y=s+y-p,W=[[B,H],[G,H],[G,Y],[B,Y]],U=ee.getRectsIntersection([b[0][0],b[0][1],b[2][0],b[2][1]],[W[0][0],W[0][1],W[2][0],W[2][1]]);if(!U)return;if(U=[[U[0],U[1]],[U[2],U[1]],[U[2],U[3]],[U[0],U[3]],[U[0],U[1]]],p){var X={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",m]]}]};t.__config[bu].push(X);var z=r.add(X),V={tagName:"clipPath",children:[{tagName:"path",props:[["d",Mu(U)+Mu(b.slice(0).reverse())],["fill","#FFF"]]}]},K=r.add(V);t.__config[bu].push(V),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Mu(b)],["fill",m],["clip-path","url(#"+K+")"]]}),X={tagName:"clipPath",children:[{tagName:"path",props:[["d",Mu(U)],["fill","#FFF"]]}]},K=r.add(X),t.__config[bu].push(X),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Mu([[B,H],[G,H],[G,Y],[a-E,Y],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,Y],[B,Y],[B,H]])],["fill","#FFF"],["filter","url(#"+z+")"],["clip-path","url(#"+K+")"]]})}else{var j={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",d],["dy",y],["stdDeviation",.5*v],["flood-color",m]]}]},$=r.add(j);t.__config[bu].push(j),j={tagName:"clipPath",children:[{tagName:"path",props:[["d",Mu(b)],["fill","#FFF"]]}]};var q=r.add(j);t.__config[bu].push(j),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Mu([[a,n],[o,n],[o,s],[a-E,s],[a-E,s+E],[o+E,s+E],[o+E,n-E],[a-E,n-E],[a-E,s],[a,s],[a,n]])],["fill","#FFF"],["filter","url(#"+$+")"],["clip-path","url(#"+q+")"]]})}}else{var Z=a+d-p,J=n+y-p,Q=o+d+p,tt=s+y+p,et=[[Z,J],[Q,J],[Q,tt],[Z,tt]],rt=ee.getRectsIntersection([b[0][0],b[0][1],b[2][0],b[2][1]],[et[0][0],et[0][1],et[2][0],et[2][1]]);if(p){var it={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",0],["dy",0],["stdDeviation",.5*v],["flood-color",m]]}]},at=r.add(it);t.__config[bu].push(it),it={tagName:"clipPath",children:[{tagName:"path",props:[["d",Mu(b)+Mu(et.slice(0).reverse())],["fill","#FFF"]]}]};var nt=r.add(it);t.__config[bu].push(it),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Mu(et)],["fill",m],["clip-path","url(#"+nt+")"]]}),it={tagName:"clipPath",children:[{tagName:"path",props:[["d",(rt?Mu([[rt[0],rt[1]],[rt[2],rt[1]],[rt[2],rt[3]],[rt[0],rt[3]],[rt[0],rt[1]]].reverse()):"")+Mu(b)+Mu(et)+Mu(T)],["fill","#FFF"]]}]},nt=r.add(it),t.__config[bu].push(it),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Mu(et)],["fill","#FFF"],["filter","url(#"+at+")"],["clip-path","url(#"+nt+")"]]})}else{var ot={tagName:"filter",props:[["x",-P/l],["y",-P/h],["width",1+2*P/l],["height",1+2*P/h]],children:[{tagName:"feDropShadow",props:[["dx",d],["dy",y],["stdDeviation",.5*v],["flood-color",m]]}]},st=r.add(ot);t.__config[bu].push(ot),ot={tagName:"clipPath",children:[{tagName:"path",props:[["d",Mu(b)+Mu(T)],["fill","#FFF"]]}]};var lt=r.add(ot);t.__config[bu].push(ot),t.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Mu(b)],["fill","#FFF"],["filter","url(#"+st+")"],["clip-path","url(#"+lt+")"]]})}}}}},Su={multiply:!0,screen:!0,overlay:!0,darken:!0,lighten:!0,colorDodge:!0,colorBurn:!0,hardLight:!0,softLight:!0,difference:!0,exclusion:!0,hue:!0,saturation:!0,color:!0,luminosity:!0};var Ou=function(t){if(t)return t.replace(/[A-Z]/,(function(t){return"-"+t.toLowerCase()}))},Cu=function(t){return Su.hasOwnProperty(t)},Iu=ne.svgPolygon,wu=k.CANVAS,ku=k.SVG,Du=k.WEBGL,Lu=Ts.LOCAL,Fu=b.STYLE_KEY,Nu=b.STYLE_RV_KEY,Pu=b.style2Upper,Bu=b.STYLE_KEY,Hu=Bu.BORDER_TOP_LEFT_RADIUS,Gu=Bu.BORDER_TOP_RIGHT_RADIUS,Yu=Bu.BORDER_BOTTOM_LEFT_RADIUS,Wu=Bu.BORDER_BOTTOM_RIGHT_RADIUS,Uu=Bu.PADDING_LEFT,Xu=Bu.PADDING_RIGHT,zu=Bu.PADDING_TOP,Vu=Bu.PADDING_BOTTOM,Ku=Bu.MARGIN_LEFT,ju=Bu.MARGIN_TOP,$u=Bu.MARGIN_BOTTOM,qu=Bu.MARGIN_RIGHT,Zu=Bu.BORDER_LEFT_WIDTH,Ju=Bu.BORDER_TOP_WIDTH,Qu=Bu.BORDER_BOTTOM_WIDTH,t_=Bu.BORDER_RIGHT_WIDTH,e_=Bu.TOP,r_=Bu.RIGHT,i_=Bu.BOTTOM,a_=Bu.LEFT,n_=Bu.POSITION,o_=Bu.DISPLAY,s_=Bu.WIDTH,l_=Bu.HEIGHT,h_=Bu.MATRIX,f_=Bu.TRANSLATE_X,c_=Bu.TRANSLATE_Y,u_=Bu.TRANSLATE_Z,__=Bu.TRANSFORM,d_=Bu.SCALE_X,y_=Bu.SCALE_Y,v_=Bu.SCALE_Z,p_=Bu.ROTATE_X,g_=Bu.ROTATE_Y,x_=Bu.ROTATE_Z,m_=Bu.SKEW_X,E_=Bu.SKEW_Y,b_=Bu.PERSPECTIVE,T_=Bu.PERSPECTIVE_ORIGIN,A_=Bu.ROTATE_3D,M_=Bu.TRANSFORM_ORIGIN,R_=Bu.BACKGROUND_POSITION_X,S_=Bu.BACKGROUND_POSITION_Y,O_=Bu.BACKGROUND_SIZE,C_=Bu.BACKGROUND_COLOR,I_=Bu.BACKGROUND_IMAGE,w_=Bu.BACKGROUND_REPEAT,k_=Bu.BOX_SHADOW,D_=Bu.OPACITY,L_=Bu.Z_INDEX,F_=Bu.BORDER_TOP_STYLE,N_=Bu.BORDER_RIGHT_STYLE,P_=Bu.BORDER_BOTTOM_STYLE,B_=Bu.BORDER_LEFT_STYLE,H_=Bu.FILTER,G_=Bu.OVERFLOW,Y_=Bu.MIX_BLEND_MODE,W_=Bu.TEXT_OVERFLOW,U_=Bu.BORDER_TOP_COLOR,X_=Bu.BORDER_BOTTOM_COLOR,z_=Bu.BORDER_LEFT_COLOR,V_=Bu.BORDER_RIGHT_COLOR,K_=Bu.FONT_STYLE,j_=Bu.COLOR,$_=Bu.VISIBILITY,q_=Bu.POINTER_EVENTS,Z_=Bu.BORDER_TOP,J_=Bu.BORDER_RIGHT,Q_=Bu.BORDER_BOTTOM,td=Bu.BORDER_LEFT,ed=Bu.BACKGROUND_CLIP,rd=Bu.FONT_SIZE,id=Bu.FONT_FAMILY,ad=Bu.LINE_HEIGHT,nd=Bu.TEXT_STROKE_COLOR,od=Bu.TEXT_STROKE_WIDTH,sd=Bu.TEXT_STROKE_OVER,ld=Bu.FONT_WEIGHT,hd=Bu.FLEX_DIRECTION,fd=Bu.JUSTIFY_CONTENT,cd=Bu.ALIGN_ITEMS,ud=Bu.ALIGN_SELF,_d=Bu.FLEX_GROW,dd=Bu.FLEX_SHRINK,yd=Bu.LINE_CLAMP,vd=Bu.ORDER,pd=Bu.FLEX_WRAP,gd=Bu.ALIGN_CONTENT,xd=Bu.TEXT_ALIGN,md=Bu.LETTER_SPACING,Ed=Bu.WHITE_SPACE,bd=Bu.WRITING_MODE,Td=b.UPDATE_KEY,Ad=Td.UPDATE_NODE,Md=Td.UPDATE_FOCUS,Rd=Td.UPDATE_STYLE,Sd=Td.UPDATE_OVERWRITE,Od=Td.UPDATE_KEYS,Cd=Td.UPDATE_CONFIG,Id=Td.UPDATE_REMOVE_DOM,wd=b.STRUCT_KEY.STRUCT_HAS_MASK,kd=b.NODE_KEY,Dd=kd.NODE_TAG_NAME,Ld=kd.NODE_CACHE_STYLE,Fd=kd.NODE_CURRENT_STYLE,Nd=kd.NODE_COMPUTED_STYLE,Pd=kd.NODE_STYLE,Bd=kd.NODE_STRUCT,Hd=kd.NODE_OPACITY,Gd=kd.NODE_MATRIX_EVENT,Yd=kd.NODE_MATRIX,Wd=kd.NODE_LIMIT_CACHE,Ud=kd.NODE_HAS_CONTENT,Xd=kd.NODE_REFRESH_LV,zd=kd.NODE_CACHE,Vd=kd.NODE_CACHE_TOTAL,Kd=kd.NODE_CACHE_FILTER,jd=kd.NODE_CACHE_MASK,$d=kd.NODE_CACHE_OVERFLOW,qd=kd.NODE_IS_DESTROYED,Zd=kd.NODE_DEFS_CACHE,Jd=kd.NODE_DOM_PARENT,Qd=kd.NODE_IS_INLINE,ty=kd.NODE_PERSPECTIVE_MATRIX,ey=kd.NODE_IS_MASK,ry=kd.NODE_VIRTUAL_DOM,iy=kd.NODE_CACHE_AS_BITMAP,ay=D.AUTO,ny=D.PX,oy=D.PERCENT,sy=D.INHERIT,ly=D.NUMBER,hy=D.RGBA,fy=D.STRING,cy=D.REM,uy=D.VW,_y=D.VH,dy=D.VMAX,yy=D.VMIN,vy=D.DEG,py=D.GRADIENT,gy=it.int2rgba,xy=it.rgba2int,my=it.joinArr,Ey=it.isNil,by=it.isFunction,Ty=Ha.calRelative,Ay=Ha.calNormalLineHeight,My=Ha.calFontFamily,Ry=Ha.spreadBoxShadow,Sy=Ha.spreadFilter,Oy=Fr.GEOM,Cy=Ou,Iy=Cu,wy=P.point2d,ky=Fs.contain,Dy=Fs.NONE,Ly=Fs.TRANSFORM,Fy=Fs.REFLOW,Ny=Fs.REPAINT,Py=Fs.TRANSLATE_X,By=Fs.TRANSLATE_Y,Hy=Fs.TRANSLATE_Z;function Gy(t){for(var e=0,r=t.flowChildren,i=r.length,a=0;a<i;a++){var n=r[a];if(!(n instanceof Wy||n instanceof lh&&n.shadowRoot instanceof Wy))break;if(n.flowChildren&&n.flowChildren.length){e+=Gy(n);break}n.__config[Qd]&&(e+=n.outerWidth)}return e}function Yy(t){for(var e=0,r=t.flowChildren,i=r.length-1;i>=0;i--){var a=r[i];if(!(a instanceof Wy||a instanceof lh&&a.shadowRoot instanceof Wy))break;if(a.flowChildren&&a.flowChildren.length){e+=Yy(a);break}e+=a.outerWidth}return e}var Wy=function(r){function a(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(this,a),i=r.call(this)||this,Array.isArray(n)?i.props=it.arr2hash(n):i.props=n,i.__tagName=t,i.__style=i.props.style||{},i.__currentStyle={},i.__computedStyle={},i.__listener={},Object.keys(i.props).forEach((function(t){var e=i.props[t];/^on[a-zA-Z]/.test(t)&&(t=t.slice(2).toLowerCase(),i.listener[t]=e)})),i.__animationList=[],i.__loadBgi={cb:function(){}},i.__cacheStyle={},i.__cacheDefs=[];var o=i.__isClip=!!i.props.clip,s=i.__isMask=o||!!i.props.mask,l=i.__config;return l[Dd]=t,l[Ld]=i.__cacheStyle,l[Fd]=i.__currentStyle,l[Nd]=i.__computedStyle,l[Xd]=Fy,l[Pd]=i.__style,l[Yd]=[],l[Gd]=[],l[Zd]=i.__cacheDefs,l[ey]=s,i.__frameAnimateList=[],i.__contentBoxList=[],l[iy]=i.__cacheAsBitmap=!!i.props.cacheAsBitmap,i.__layoutData=null,i.__hasComputeReflow=!1,i.__parentLineBox=null,i.__fontRegister={},i}return n(a,r),i(a,[{key:"__structure",value:function(t,e,r){var i=f(o(a.prototype),"__structure",this).call(this,t,e,r);return this.__hasMask&&(i[wd]=this.__hasMask),this.__config[Bd]=i,i}},{key:"__mp",value:function(t,e,r){var i=this;["Top","Right","Bottom","Left"].forEach((function(a){var n=Fu[Pu("margin"+a)],o=Fu[Pu("padding"+a)];e[n]=i.__calSize(t[n],r,!0),e[o]=i.__calSize(t[o],r,!0)}))}},{key:"__calSize",value:function(t,e,r){return t[1]===ny?t[0]:t[1]===oy&&r?t[0]*e*.01:t[1]===cy?t[0]*this.root.computedStyle[rd]:t[1]===uy?t[0]*this.root.width*.01:t[1]===_y?t[0]*this.root.height*.01:t[1]===dy?t[0]*Math.max(this.root.width,this.root.height)*.01:t[1]===yy?t[0]*Math.min(this.root.width,this.root.height)*.01:0}},{key:"__computeReflow",value:function(){var t=this;if(!this.__hasComputeReflow){this.__hasComputeReflow=!0;var e=this.currentStyle,r=this.computedStyle,i=this.domParent,a=!i,n=i&&i.computedStyle;[rd,id,ld,bd].forEach((function(i){var o=e[i];if(i===id)if(o[1]===sy)r[i]=a?Bt.INHERIT[Nu[i]]:n[i];else{r[i]=o[0];for(var s=o[0].split(/\s*,\s*/),l=0,h=s.length;l<h;l++){var f=s[l].replace(/^['"]/,"").replace(/['"]$/,"");if(Ct.hasRegister(f)&&(Ct.hasLoaded(f)||Rt.checkSupportFontFamily(f)))break;t.__fontRegister[f]=!0,Ct.onRegister(f,t)}}else o[1]===sy?r[i]=a?Bt.INHERIT[Nu[i]]:n[i]:o[1]===oy?r[i]=a?Bt.INHERIT[Nu[i]]:n[i]*o[0]*.01:o[1]===cy?r[i]=a?Bt.INHERIT[Nu[i]]:t.root.computedStyle[rd]*o[0]:o[1]===uy?r[i]=a?Bt.INHERIT[Nu[i]]:.01*t.root.width*o[0]:o[1]===_y?r[i]=a?Bt.INHERIT[Nu[i]]:.01*t.root.height*o[0]:o[1]===dy?r[i]=a?Bt.INHERIT[Nu[i]]:.01*Math.max(t.root.width,t.root.height)*o[0]:o[1]===yy?r[i]=a?Bt.INHERIT[Nu[i]]:.01*Math.min(t.root.width,t.root.height)*o[0]:r[i]=o[0]})),[Ju,t_,Qu,Zu].forEach((function(i){var a=e[i];r[i]=t.__calSize(a,0,!1)})),[n_,o_,hd,fd,cd,ud,_d,dd,yd,vd,pd,gd,G_,W_].forEach((function(t){r[t]=e[t]})),n&&r[bd]!==n[bd]&&"inline"===r[o_]&&(r[o_]="inlineBlock"),("absolute"===r[n_]||n&&"flex"===n[o_])&&-1===["block","flex"].indexOf(r[o_])&&(r[o_]="block");var o=e[xd];o[1]===sy?r[xd]=a?"left":n[xd]:r[xd]=o[0];var s=r[rd],l=e[ad];if(l[1]===sy)if(a)r[ad]=Ay(r);else{for(var h,f=i;f&&(h=f.currentStyle[ad])[1]===sy;)f=f.domParent;[ay,sy].indexOf(h[1])>-1?r[ad]=Ay(r):h[1]===ly?r[ad]=Math.max(h[0],0)*s:r[ad]=n[ad]}else if(l[1]===ly)r[ad]=Math.max(l[0],0)*s||Ay(r);else{var c=Math.max(this.__calSize(l,s,!0),0);r[ad]=c||Ay(r)}var u=e[md];u[1]===sy?r[md]=a?0:n[md]:r[md]=this.__calSize(u,s,!0);var _=e[Ed];_[1]===sy?r[Ed]=a?"normal":n[Ed]:r[Ed]=_[0]}}},{key:"__emitFontRegister",value:function(t){var e=this,r=e.__fontRegister;if(!e.isDestroyed){delete r[t];var i=e.root,a=e.currentStyle,n=e.__config;if(i){var o=a[id];if(o[1]!==sy)for(var s=o[0].split(/\s*,\s*/),l=0,h=s.length;l<h;l++){var f=s[l].replace(/^['"]/,"").replace(/['"]$/,"");if(f===t)return void(Ct.hasRegister(f)&&i.addRefreshTask({__before:function(){if(!n[qd]){var t={};t[Ad]=e,t[Md]=Fs.REFLOW,t[Cd]=n,i.__addUpdate(e,n,i,i.__config,t)}}}));if(Ct.hasRegister(f)&&(Ct.hasLoaded(f)||Rt.checkSupportFontFamily(f)))return}}}}},{key:"__ioSize",value:function(t,e){var r=this.computedStyle;Ey(t)||(this.__width=r[s_]=t,this.__clientWidth=t+=r[Uu]+r[Xu],this.__offsetWidth=t+=r[Zu]+r[t_],this.__outerWidth=t+r[Ku]+r[qu]),Ey(e)||(this.__height=r[l_]=e,this.__clientHeight=e+=r[zu]+r[Vu],this.__offsetHeight=e+=r[Ju]+r[Qu],this.__outerHeight=e+r[ju]+r[$u])}},{key:"__addMBP",value:function(t,e,r,i,a,n){var o=r[Ku],s=r[ju],l=r[qu],h=r[$u],f=r[Uu],c=r[zu],u=r[Xu],_=r[Vu],d=i[Ju],y=i[t_],v=i[Qu],p=i[Zu],g=this.__calSize(o,e,n)+this.__calSize(l,e,n)+this.__calSize(f,e,n)+this.__calSize(u,e,n)+p+y;if(t)a=a.map((function(t){return t+g}));else{var x=this.__calSize(s,e,n)+this.__calSize(h,e,n)+this.__calSize(c,e,n)+this.__calSize(_,e,n)+d+v;a=a.map((function(t){return t+x}))}return a}},{key:"__layout",value:function(t,e,r,i){this.__computeReflow();var a=t.w,n=this.isDestroyed,o=this.currentStyle,s=this.computedStyle,l=this.__config;this.__ellipsis&&(this.__ellipsis=null),this.__parentLineBox=null,this.__isIbFull=this.__isUprightIbFull=!1;var h=s[o_],f=s[n_];if(this.__layoutData={x:t.x,y:t.y,w:a,h:t.h,lx:t.lx,ly:t.ly,isUpright:t.isUpright},!e&&!r&&!i){this.clearCache(),l[Xd]=Fy,l[Wd]=!1,l[Qd]=!1;var c=this.next;if(!this.isMask&&c&&c.isMask){for(var u=0;c&&c.isMask;)u++,c=c.next;this.__hasMask=u}}if(this.__ox=this.__oy=0,n||"none"===h)return this.__width=this.__height=this.__clientWidth=this.__clientHeight=this.__offsetWidth=this.__offsetHeight=this.__outerWidth=this.__outerHeight=s[s_]=s[l_]=0,this.__x=t.x,this.__y=t.y,this.__layoutNone(),void(this.__hasComputeReflow=!1);"absolute"!==f&&this.__mp(o,s,a);var _=t.lineClampCount||0;if("flex"===h?(t.lineClampCount=0,this.__layoutFlex(t,e,r,i)):"inlineBlock"===h?(t.lineClampCount=0,this.__layoutInline(t,e,r,i)):"inline"===h?_=this.__layoutInline(t,e,r,i,!0):(t.lineClampCount=0,this.__layoutBlock(t,e,r,i)),!e&&!r&&!i){if("relative"===f){var d=o[e_],y=o[r_],v=o[i_],p=o[a_],g=this.parent;if(d[1]!==ay){var x=Ty(o,e_,d,g);this.__offsetY(x),s[e_]=x,s[i_]="auto"}else if(v[1]!==ay){var m=Ty(o,i_,v,g);this.__offsetY(-m),s[i_]=m,s[e_]="auto"}else s[e_]=s[i_]="auto";if(p[1]!==ay){var E=Ty(o,a_,p,g,!0);this.__offsetX(E),s[a_]=E,s[r_]="auto"}else if(y[1]!==ay){var b=Ty(o,r_,y,g,!0);this.__offsetX(-b),s[r_]=b,s[a_]="auto"}else s[a_]=s[r_]="auto"}else"absolute"!==f&&(s[e_]=s[i_]=s[a_]=s[r_]="auto");var T=this.__sx=this.x+this.ox,A=this.__sy=this.y+this.oy;l[Qd]||(T=this.__sx1=T+s[Ku],T=this.__sx2=T+s[Zu],T=this.__sx3=T+s[Uu],T=this.__sx4=T+this.width,T=this.__sx5=T+s[Xu],this.__sx6=T+s[t_],A=this.__sy1=A+s[ju],A=this.__sy2=A+s[Ju],A=this.__sy3=A+s[zu],A=this.__sy4=A+this.height,A=this.__sy5=A+s[Vu],this.__sy6=A+s[Qu]),s[s_]=this.width,s[l_]=this.height,"absolute"!==f&&this.__execAr(),this.__hasComputeReflow=!1}return _}},{key:"__execAr",value:function(){var t=this.__animateRecords;if(t){this.__animateRecords=null,t.list.forEach((function(t){t.target.vd instanceof a&&(t.target=t.target.vd)}));var e=t.controller||this.root.animateController;t.options&&!1===t.options.autoPlay?(e.__records2=e.__records2.concat(t.list),e.init(e.__records2,e.list2)):(e.__records=e.__records.concat(t.list),e.__playAuto())}}},{key:"__layoutNone",value:function(){var t=this.computedStyle;t[o_]="none",t[ju]=t[qu]=t[$u]=t[Ku]=t[Ju]=t[t_]=t[Qu]=t[Zu]=t[zu]=t[Xu]=t[Vu]=t[Uu]=t[s_]=t[l_]=this.__width=this.__height=0}},{key:"__preLayout",value:function(t,e){var r=t.x,i=t.y,a=t.w,n=t.h,o=t.w2,s=t.h2,l=t.w3,h=t.h3,f=t.lx,c=t.ly,u=t.lineBoxManager,_=t.endSpace,d=void 0===_?0:_,y=t.isUpright;this.__x=r,this.__y=i;var v,p,g=this.currentStyle,x=this.computedStyle,m=g[s_],E=g[l_],b=x[Ju],T=x[t_],A=x[Qu],M=x[Zu],R=x[ju],S=x[qu],O=x[$u],C=x[Ku],I=x[zu],w=x[Xu],k=x[Vu],D=x[Uu],L=0===x[bd].indexOf("vertical");void 0!==o?(v=!0,a=o):void 0!==l?(v=!0,a=l):m[1]===ay||e||(v=!0,a=this.__calSize(m,a,!0)),void 0!==s?(p=!0,n=s):void 0!==h?(p=!0,n=h):E[1]===ay||e||(p=!0,n=this.__calSize(E,n,!0)),e?L?i+=b+R+I:r+=M+C+D:(r+=M+C+D,i+=b+R+I),t.x=r,t.y=i;var F=0;return e&&(F=L?k+A+O:w+T+S),e||(m[1]!==ay&&void 0===l||(a-=M+T+C+S+D+w),E[1]!==ay&&void 0===h||(n-=b+A+R+O+I+k)),{fixedWidth:v,fixedHeight:p,x:r,y:i,w:a,h:n,lx:f,ly:c,lineBoxManager:u,endSpace:d,selfEndSpace:F,isParentVertical:y,isUpright:L}}},{key:"__marginAuto",value:function(t,e,r){var i=t[n_],a=t[o_],n=t[ju],o=t[$u],s=t[Ku],l=t[qu],h=t[s_],f=t[l_];if("absolute"!==i&&("block"===a||"flex"===a))if(r){if((f[1]!==ay||this.isReplaced)&&n[1]===ay&&o[1]===ay){var c=this.outerHeight;c<e.h&&this.__offsetY(.5*(e.h-c),!0)}}else if((h[1]!==ay||this.isReplaced)&&s[1]===ay&&l[1]===ay){var u=this.outerWidth;u<e.w&&this.__offsetX(.5*(e.w-u),!0)}}},{key:"__calMatrix",value:function(t,e,r,i,a,n,o,s,l){var h=this;if(a[Qd])return i[M_]=[n,o],e[h_]=P.identity();var f=e[h_];if(f&&t<Fy&&!ky(t,Ly)){var c=0,u=0,_=0;if(ky(t,Py)){var d=r[f_];c=(d=Ey(d)?0:d[1]===ny?d[0]:this.__calSize(d,this.offsetWidth,!0))-(i[f_]||0),i[f_]=d,i[__][12]+=c,f[12]+=c}if(ky(t,By)){var y=r[c_];u=(y=Ey(y)?0:y[1]===ny?y[0]:this.__calSize(y,this.offsetHeight,!0))-(i[c_]||0),i[c_]=y,i[__][13]+=u,f[13]+=u}if(ky(t,Hy)){var v=r[u_];_=(v=Ey(v)?0:this.__calSize(v,this.offsetWidth,!0))-(i[u_]||0),i[u_]=v,i[__][14]+=_,f[14]+=_}e[h_]=f}else{if(void 0===n&&(n=this.__sx1,o=this.__sy1,s=this.offsetWidth,l=this.offsetHeight),void 0===e[M_]&&(e[M_]=!0,f=null,i[M_]=r[M_].map((function(t,e){return h.__calSize(t,e?l:s,!0)}))),void 0===e[__]||void 0===e[f_]||void 0===e[c_]||void 0===e[u_]||void 0===e[p_]||void 0===e[g_]||void 0===e[x_]||void 0===e[A_]||void 0===e[d_]||void 0===e[y_]||void 0===e[v_]||void 0===e[m_]||void 0===e[E_]){var p;if(e[__]=e[f_]=e[c_]=e[u_]=e[p_]=e[g_]=e[x_]=e[d_]=e[y_]=e[v_]=e[m_]=e[E_]=!0,f=null,r[__])p=wo.calMatrix(r[__],s,l,this.root);else{var g=[];[f_,c_,u_,p_,g_,x_,A_,m_,E_,d_,y_,v_].forEach((function(t){delete i[t];var e=r[t];if(!Ey(e))if(t!==A_)if(i[t]=e[0],t!==p_&&t!==g_&&t!==x_){var a=t===d_||t===y_||t===v_;if(!(1===e[0]&&a||!a&&0===e[0])){var n=t===f_||t===u_?s:l;i[t]=h.__calSize(e,n,!0),g.push([t,e])}}else g.push([t,e]);else{if(i[t]=[e[0],e[1],e[2],e[3][0]],0===e[3][0])return;g.push([t,e])}})),g.length&&(p=wo.calMatrix(g,s,l,this.root))}i[__]=p||P.identity()}if(!f){var x=i[__],m=i[M_].slice(0);m[0]+=n||0,m[1]+=o||0,f=e[h_]=wo.calMatrixByOrigin(x,m)}}return f}},{key:"__calCache",value:function(t,e,r,i,a,n,o,s,l,h,f,c,u,_,d,y,v,p,g,x,m,E,b,T,A,M,R,S,O,C){var I=this,w=g,k=A,D=T,L=C,F=n[ed]=a[ed];"paddingBox"===F?(w=x,k=M,D=b,L=O):"contentBox"===F&&(w=m,k=R,D=E,L=S);var N=this.__config[Qd];if(N&&!this.contentBoxList.length&&(N=!1),[D_,L_,F_,N_,P_,B_,w_,G_,Y_,W_,ed].forEach((function(t){n[t]=a[t]})),Ey(i[H_])&&(i[H_]=!0,this.__calFilter(a,n)),Ey(i[R_])){i[R_]=!0;var P=a[R_];n[R_]=(P||[]).map((function(t){return t[1]===oy?t[0]+"%":I.__calSize(t,D-w,!0)}))}if(Ey(i[S_])){i[S_]=!0;var B=a[S_];n[S_]=(B||[]).map((function(t){return t[1]===oy?t[0]+"%":I.__calSize(t,L-k,!0)}))}if(Ey(i[O_])&&(i[O_]=!0,n[O_]=(a[O_]||[]).map((function(t){if(Array.isArray(t))return t.map((function(t,e){return t[1]===ay?-1:t[1]===fy?"contain"===t[0]?-2:-3:I.__calSize(t,e?L-k:D-w,!0)}))}))),Ey(i[I_])){var H=a[I_];n[I_]=H.map((function(t){return t?t[0]:null})),i[I_]=H.map((function(t,r){if(!t)return null;if(t[1]===fy){var a=I.__loadBgi[r]=I.__loadBgi[r]||{},n=Rt.IMG[t[0]];if(n&&n.state===Rt.LOADED)a.url=t[0],a.source=n.source,a.width=n.width,a.height=n.height;else if(a.url!==t[0]){a.url=t[0],a.source=null;var o=I,s=o.root;Rt.measureImg(t[0],(function(t){t.success&&t.url===a.url&&!I.isDestroyed&&(a.source=t.source,a.width=t.width,a.height=t.height,s.delRefreshTask(a.cb),s.addRefreshTask(a.cb={__before:function(){i[I_]=void 0;var t={};t[Ad]=o,t[Md]=Ny,t[Cd]=o.__config,s.__addUpdate(o,o.__config,s,s.__config,t)}}))}),{ctx:e,root:s,width:D-w,height:L-k})}return!0}return!(N||!t[0]||t[1]!==py)||void 0}))}Ey(i[k_])&&(i[k_]=!0,n[k_]=(a[k_]||[]).map((function(t){return t.map((function(t,e){return e>3?t:I.__calSize(t,0===e?D-w:L-k,!0)}))}))),[C_,U_,V_,X_,z_].forEach((function(t){Ey(i[t])&&(i[t]=gy(n[t]=a[t][0]))})),(Ey(i[Hu])||Ey(i[Gu])||Ey(i[Wu])||Ey(i[Yu]))&&(i[Hu]=i[Gu]=i[Wu]=i[Yu]=!0,N?Xe.calBorderRadiusInline(this.contentBoxList,a,n,this.root):Xe.calBorderRadius(l,h,a,n,this.root));var G=n[Hu],Y=n[Gu],W=n[Wu],U=n[Yu];["Top","Right","Bottom","Left"].forEach((function(t){var e=Fu[Pu(t="border"+t)],r=Fu[Pu(t+"Width")],a=Fu[Pu(t+"Style")];if(Ey(i[r])&&(i[r]=!0,i[e]=void 0),Ey(i[a])&&(i[a]=!0,i[e]=void 0),Ey(i[e]))if(e===Z_)if(f>0){if(!N){var o=Math.atan(f/_),s=Math.atan(f/c);i[e]=Xe.calPoints(f,n[a],o,s,g,x,b,T,A,M,O,C,0,G,Y)}}else i[e]=[];else if(e===J_)if(c>0){if(!N){var l=Math.atan(c/f),h=Math.atan(c/u);i[e]=Xe.calPoints(c,n[a],l,h,g,x,b,T,A,M,O,C,1,Y,W)}}else i[e]=[];else if(e===Q_)if(u>0){if(!N){var d=Math.atan(u/_),y=Math.atan(u/c);i[e]=Xe.calPoints(u,n[a],d,y,g,x,b,T,A,M,O,C,2,U,W)}}else i[e]=[];else if(e===td)if(_>0){if(!N){var v=Math.atan(_/f),p=Math.atan(_/u);i[e]=Xe.calPoints(_,n[a],v,p,g,x,b,T,A,M,O,C,3,G,U)}}else i[e]=[]}));var X=r&&r.computedStyle;a[K_][1]===sy?n[K_]=r?X[K_]:"normal":Ey(i[K_])&&(n[K_]=a[K_][0]),i[K_]=n[K_];var z=a[j_];if(z[1]===sy){var V=n[j_]=r?X[j_]:xy(Bt.INHERIT.color);V.k?i[j_]=V:i[j_]=gy(n[j_])}else Ey(i[j_])&&(z[1]===py?i[j_]=n[j_]=z[0]:z[1]===hy&&(i[j_]=gy(n[j_]=xy(z[0]))));var K=a[nd];if(K[1]===sy){var j=n[nd]=r?X[nd]:xy(Bt.INHERIT.textStrokeColor);j.k?i[nd]=j:i[nd]=gy(n[nd])}else Ey(i[nd])&&(K[1]===py?i[nd]=n[nd]=K[0]:K[1]===hy&&(i[nd]=gy(n[nd]=xy(K[0]))));if(a[od][1]===sy)n[od]=r?X[od]:Bt.INHERIT.textStrokeWidth,i[od]=!0;else if(Ey(i[od])){var $=a[od];$=$[1]===cy?$[0]*this.root.computedStyle[rd]:$[1]===uy?$[0]*this.root.width*.01:$[1]===_y?$[0]*this.root.height*.01:$[1]===dy?$[0]*Math.max(this.root.width,this.root.height)*.01:$[1]===yy?$[0]*Math.min(this.root.width,this.root.height)*.01:$[0],n[od]=$,i[od]=!0}return a[sd][1]===sy?i[sd]=n[sd]=r?X[sd]:Bt.INHERIT.textStrokeOver:i[sd]=n[sd]=a[sd][0],a[$_][1]===sy?n[$_]=r?X[$_]:"visible":Ey(i[$_])&&(n[$_]=a[$_][0]),i[$_]=n[$_],a[q_][1]===sy?n[q_]=r?X[q_]:"auto":Ey(i[q_])&&(n[q_]=a[q_][0]),i[q_]=n[q_],this.__bx1=w,this.__bx2=D,this.__by1=k,this.__by2=L,[w,k,D,L]}},{key:"__calPerspective",value:function(t,e,r,i,a,n){var o,s=this;if(Ey(t[b_])){t[b_]=!0,o=!0;var l=e[b_],h=this.__calSize(l,this.clientWidth,!0);r[b_]=h}if(Ey(t[T_])&&(t[T_]=!0,o=!0,r[T_]=e[T_].map((function(t,e){return s.__calSize(t,e?s.offsetHeight:s.offsetWidth,!0)}))),o){void 0===a&&(a=this.__sx1,n=this.__sy1);var f=r[T_].slice(0);f[0]+=a||0,f[1]+=n||0,i[ty]=wo.calPerspectiveMatrix(r[b_],f)}}},{key:"__calFilter",value:function(t,e){var r=this;return e[H_]=(t[H_]||[]).map((function(t){var e=c(t,2),i=e[0],a=e[1];return"dropShadow"===i?[i,a.map((function(t,e){return e>3?t:r.__calSize(t,0===e?r.__bx2-r.__bx1:r.__by2-r.__by1,!0)}))]:[i,a=a[1]===vy||a[1]===oy||a[1]===ly?a[0]:r.__calSize(a,r.root.width,!1)]}))}},{key:"__calContent",value:function(t,e,r,i){if(t===wu||t===Du){if(e<Ny)return this.__hasContent;if("hidden"!==r[$_]){var a=r[I_];if(Array.isArray(a))for(var n=0,o=a.length;n<o;n++)if(a[n])return!0;if(r[C_][0][3]>0){var s=i[s_],l=i[l_],h=i[zu],f=i[Xu],c=i[Vu],u=i[Uu];if(s&&l||h||f||c||u)return!0}for(var _=["Top","Right","Bottom","Left"],d=0,y=_.length;d<y;d++){var v=_[d];if(i[Fu[Pu("border"+v+"Width")]]>0&&r[Fu[Pu("border"+v+"Color")]][0][3]>0)return!0}var p=r[k_];if(Array.isArray(p))for(var g=0,x=p.length;g<x;g++){var m=p[g];if(m&&m[4][3]>0)return!0}}}return!1}},{key:"render",value:function(e,r,i,a){var n,o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,h=this.isDestroyed,f=this.root,u=this.__config,_=u[zd],d=u[Ld],y=u[Fd],v=u[Nd];if(u[Xd]=Dy,r>=Ny&&(this.__bbox=null,this.__filterBbox=null),h)return{isDestroyed:h,break:!0};e===ku&&(n=u[ry]=this.__virtualDom={bb:[],children:[],visibility:"visible"},u[Vd]?u[Vd].available||(u[Vd].available=!0):u[Vd]={available:!0,release:function(){this.available=!1,delete n.cache}});var p=v[o_];if("none"===p)return{break:!0};var g,x,m,E,b,T=this.clientWidth,A=this.clientHeight,M=this.offsetWidth,R=this.offsetHeight,S=this.__hasMask,O=v[zu],C=v[Xu],I=v[Vu],w=v[Uu],k=v[Zu],D=v[t_],L=v[Ju],F=v[Qu],N=u[Qd],B=this.__sx1,H=this.__sx2,G=this.__sx3,Y=this.__sx4,W=this.__sx5,U=this.__sx6,X=this.__sy1,z=this.__sy2,V=this.__sy3,K=this.__sy4,j=this.__sy5,$=this.__sy6,q={ctx:i,x1:B,x2:H,x3:G,x4:Y,x5:W,x6:U,y1:X,y2:z,y3:V,y4:K,y5:j,y6:$,sx1:B,sx2:H,sx3:G,sx4:Y,sx5:W,sx6:U,sy1:X,sy2:z,sy3:V,sy4:K,sy5:j,sy6:$,dx:s,dy:l},Z=u[Jd];if(e===Du&&this.__calPerspective(d,y,v,u),g=a&&e===wu?u[Yd]:this.__calMatrix(r,d,y,v,u,B,X,M,R),a&&e===wu)x=this.__bx1,E=this.__bx2,m=this.__by1,b=this.__by2;else{var J=this.__calCache(e,i,Z,d,y,v,T,A,M,R,L,D,F,k,O,C,I,w,B,H,G,Y,W,U,X,z,V,K,j,$),Q=c(J,4);x=Q[0],m=Q[1],E=Q[2],b=Q[3]}q.bx1=x,q.by1=m,q.bx2=E,q.by2=b;var tt=this.__hasContent=u[Ud]=this.__calContent(e,r,y,v);if(a&&e===Du){if(!tt&&this.__releaseWhenEmpty(_,v))q.break=!0,u[Wd]=!1;else if(!u[Wd]){var et=this.bbox;_?_.reset(et,B,X):_=Ts.getInstance(et,B,X),_&&_.enabled?(_.__bbox=et,i=_.ctx,s+=_.dx,l+=_.dy,q.ctx=i):(u[Wd]=!0,_=null,q.limitCache=q.break=!0),u[zd]=_}}else if(e===Du){var rt=Rt.getCacheCanvas(f.width,f.height,"__$$OVERSIZE$$__");q.ctx=i=rt.ctx}q.dx=s,q.dy=l;var at,nt,ot=v[C_],st=v[U_],lt=v[V_],ht=v[X_],ft=v[z_],ct=v[Hu],ut=v[Gu],_t=v[Wu],dt=v[Yu],yt=v[$_],vt=v[w_],pt=v[I_],gt=v[D_],xt=v[H_],mt=v[O_],Et=v[k_],bt=v[G_],Tt=v[Y_],At=v[ed],Mt=v[bd],St=0===Mt.indexOf("vertical");if(a&&e===wu?gt=u[Hd]:e===wu||e===Du?(Z&&(gt*=Z.__config[Hd]),u[Hd]=gt):e===ku&&(1===gt?delete n.opacity:n.opacity=gt),e===ku&&(P.isE(g)?delete n.transform:n.transform="matrix("+my(P.m2m6(g),",")+")",n.visibility=yt),e===wu&&a)g=u[Gd];else{var Ot=u[Yd];it.assignMatrix(Ot,g),Z&&(Z.perspectiveMatrix&&(g=P.multiply(Z.perspectiveMatrix,g)),g=P.multiply(Z.matrixEvent,g)),Ot=u[Gd],it.assignMatrix(Ot,g)}if(q.limitCache)return q;if("normal"!==Tt&&Iy(Tt))if(Tt=Cy(Tt),e===wu&&a!==Lu){var It=f.width,wt=f.height;rt=Rt.getCacheCanvas(It,wt,null,"blend");at={ctx:i,target:rt,mixBlendMode:Tt,matrix:g},i=rt.ctx}else e===ku&&(n.mixBlendMode=Tt);else e===ku&&delete n.mixBlendMode;if(S&&e===wu&&a!==Lu){var kt=f.width,Dt=f.height,Lt=Rt.getCacheCanvas(kt,Dt,null,"mask1");nt={ctx:i,target:Lt,matrix:g},i=Lt.ctx}var Ft,Nt=xt&&xt.length;if(Nt)if(e===wu&&a!==Lu){var Pt=f.width,Bt=f.height,Ht=Rt.getCacheCanvas(Pt,Bt,null,"filter");Ft={ctx:i,filter:xt,target:Ht,matrix:g},i=Ht.ctx}else e===ku&&(n.filter=ne.svgFilter(xt));else e===ku&&delete n.filter;var Gt,Yt,Wt=ct.slice(0),Ut=ut.slice(0),Xt=_t.slice(0),zt=dt.slice(0);if("paddingBox"===At?(Wt[0]-=k,Wt[1]-=L,Ut[0]-=D,Ut[1]-=L,Xt[0]-=D,Xt[1]-=F,zt[0]-=k,zt[1]-=F):"contentBox"===At&&(Wt[0]-=k+w,Wt[1]-=L+O,Ut[0]-=D+C,Ut[1]-=L+O,Xt[0]-=D+C,Xt[1]-=F+I,zt[0]-=k+w,zt[1]-=F+I),"hidden"===bt&&"inline"!==p){if(Yt=Xe.calRadius(x,m,E-x,b-m,Wt,Ut,Xt,zt),e===wu&&a!==Lu){var Vt=f.width,Kt=f.height,jt=Rt.getCacheCanvas(Vt,Kt,null,"overflow");Gt={ctx:i,target:jt,matrix:g},i=jt.ctx,Gt.x=B,Gt.y=X,Gt.offsetWidth=M,Gt.offsetHeight=R,Gt.list=Yt}else if(e===ku){var $t=Iu(Yt)||"M".concat(B,",").concat(X,"L").concat(B+M,",").concat(X,"L").concat(B+M,",").concat(X+R,"L").concat(B,",").concat(X+R,",L").concat(B,",").concat(X),qt={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",$t]]}]},Zt=i.add(qt);u[Zd].push(qt),n.overflow="url(#"+Zt+")"}}else e===ku&&delete n.overflow;if(e===wu&&(q.offscreenBlend=at,q.offscreenMask=nt,q.offscreenFilter=Ft,q.offscreenOverflow=Gt,q.ctx=i,i.globalAlpha=gt,a||i.setTransform(g[0],g[1],g[4],g[5],g[12],g[13])),("hidden"===yt||q.break)&&(e===wu||e===Du))return q.break=!0,q;if(_&&_.enabled&&(_.__available=!0),N){var Jt=this.contentBoxList,Qt=Jt.length;Jt[Qt-1]instanceof fs&&Qt--;var te=pt.some((function(t){return t}));if(Qt){var ee=function(){var t,r=v[rd],a=v[id],h=v[ad],f=0,_=0,y=[];if(te){if(f=bh.getInlineWidth(o,Jt,St),_=h,St){var p=[_,f];f=p[0],_=p[1]}"paddingBox"===At||"padding-box"===At?St?(f+=O+I,_+=w+C):(f+=w+C,_+=O+I):"contentBox"!==At&&"content-box"!==At&&(St?(f+=O+I+L+F,_+=w+C+k+D):(f+=w+C+k+D,_+=O+I+L+F)),e!==wu&&e!==Du||(t=Rt.getCacheCanvas(f,_,"__$$INLINE_BGI$$__"));var g=pt.length;pt.slice(0).reverse().forEach((function(r,a){if(r)if(a=g-1-a,it.isString(r)){var n=o.__loadBgi[a];if(n.url===r){var c=Bh.renderImage(o,e,t&&t.ctx||i,n,0,0,f,_,Wt,Ut,Xt,zt,v,a,mt,vt,u,!0,s,l);e===ku&&c&&y.push(c)}}else if(r.k){var d=o.__gradient(e,i,0,0,f,_,r,s,l);if(d)if("conic"===d.k)cr.renderConic(o,e,t&&t.ctx||i,d.v,0,0,f,h,Wt,Ut,Xt,zt,!0);else{var p=Bh.renderBgc(o,e,t&&t.ctx||i,d.v,null,0,0,f,_,Wt,Ut,Xt,zt,"fill",!0);e===ku&&p&&y.push(p)}}}))}for(var x=r*((Ct.info[My(a)]||{}).lgr||0)*.5,m=St?Ha.getVerticalBaseline(v):Ha.getBaseline(v),E=!0,b=Jt[0],T=b.parentLineBox,A=0,M=0;M<Qt;M++){var R=Jt[M];R.parentLineBox!==T&&function(){var r=c(bh.getInlineBox(o,St,Jt,b,Jt[M-1],T,m,h,x,E,!1,At,O,C,I,w,L,D,F,k),8),a=r[0],p=r[1],g=r[2],S=r[3],N=r[4],P=r[5],B=r[6],H=r[7];if(E){var G=Gy(o);a-=G,N-=G}ot[3]>0&&Bh.renderBgc(o,e,i,d[C_],null,a,p,g-a,S-p,Wt,[0,0],[0,0],zt,"fill",!1,s,l);var Y=g-a,W=S-p;if(e!==wu&&e!==Du||!t?e===ku&&y.length&&y.forEach((function(t){if(t){var e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",St?"M".concat(0,",",A,"L").concat(_,",").concat(A,"L").concat(_,",").concat(W+A,"L",0,",").concat(W+A,",L",0,",").concat(A):"M".concat(A,",",0,"L").concat(Y+A,",",0,"L").concat(Y+A,",").concat(_,"L").concat(A,",").concat(_,",L").concat(A,",",0)]]}]},r=i.add(e);u[Zd].push(e),n.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",St?a:a-A],["y",St?p-A:p],["clip-path","url(#"+r+")"]]})}})):St?i.drawImage(t.canvas,0,A,f,W,a+s,p+l,f,W):i.drawImage(t.canvas,A,0,Y,_,a+s,p+l,Y,_),A+=St?W:Y,Et&&Et.forEach((function(t){Ru.renderBoxShadow(o,e,i,t,N,P,B,H,B-N,H-P,s,l)})),L>0&&st[3]>0){var U=Math.atan(L/k),X=Math.atan(L/D),z=Xe.calPoints(L,v[F_],U,X,N,N+k,B,B,P,P+L,H-F,H,0,E?Wt:[0,0],[0,0]);Xe.renderBorder(o,e,i,z,d[U_],s,l)}if(F>0&&ht[3]>0){var V=Math.atan(F/k),K=Math.atan(F/D),j=Xe.calPoints(F,v[P_],V,K,N,N+k,B,B,P,P+L,H-F,H,2,E?Wt:[0,0],[0,0]);Xe.renderBorder(o,e,i,j,d[X_],s,l)}if(E&&k>0&&ft[3]>0){var $=Math.atan(k/L),q=Math.atan(k/F),Z=Xe.calPoints(k,v[B_],$,q,N,N+k,B-D,B,P,P+L,H-F,H,3,Wt,Ut);Xe.renderBorder(o,e,i,Z,d[z_],s,l)}E=!1,b=R,T=R.parentLineBox}(),M===Qt-1&&function(){var r=c(bh.getInlineBox(o,St,Jt,b,Jt[M],T,m,h,x,E,!0,At,O,C,I,w,L,D,F,k),8),a=r[0],p=r[1],g=r[2],R=r[3],S=r[4],N=r[5],P=r[6],B=r[7];if(E){var H=Gy(o);a-=H,S-=H}var G=Yy(o);g+=G,P+=G,ot[3]>0&&Bh.renderBgc(o,e,i,d[C_],null,a,p,g-a,R-p,E?Wt:[0,0],Ut,Xt,E?zt:[0,0],"fill",!1,s,l);var Y=g-a,W=R-p;if(e!==wu&&e!==Du||!t?e===ku&&y.length&&y.forEach((function(t){if(t){var e={tagName:"clipPath",props:[],children:[{tagName:"path",props:[["d",St?"M".concat(0,",",A,"L").concat(_,",").concat(A,"L").concat(_,",").concat(W+A,"L",0,",").concat(W+A,",L",0,",").concat(A):"M".concat(A,",",0,"L").concat(Y+A,",",0,"L").concat(Y+A,",").concat(_,"L").concat(A,",").concat(_,",L").concat(A,",",0)]]}]},r=i.add(e);u[Zd].push(e),n.bb.push({type:"item",tagName:"use",props:[["xlink:href","#"+t],["x",St?a:a-A],["y",St?p-A:p],["clip-path","url(#"+r+")"]]})}})):St?i.drawImage(t.canvas,0,A,f,W,a+s,p+l,f,W):i.drawImage(t.canvas,A,0,Y,_,a+s,p+l,Y,_),Et&&Et.forEach((function(t){Ru.renderBoxShadow(o,e,i,t,S,N,P,B,P-S,B-N,s,l)})),L>0&&st[3]>0){var U=Math.atan(L/k),X=Math.atan(L/D),z=Xe.calPoints(L,v[F_],U,X,S,S,P-D,P,N,N+L,B-F,B,0,E?Wt:[0,0],Ut);Xe.renderBorder(o,e,i,z,d[U_],s,l)}if(D>0&&lt[3]>0){var V=Math.atan(D/L),K=Math.atan(D/F),j=Xe.calPoints(D,v[N_],V,K,S,S+k,P-D,P,N,N+L,B-F,B,1,Wt,Ut);Xe.renderBorder(o,e,i,j,d[V_],s,l)}if(F>0&&ht[3]>0){var $=Math.atan(F/k),q=Math.atan(F/D),Z=Xe.calPoints(F,v[P_],$,q,S,S,P-D,P,N,N+L,B-F,B,2,E?Wt:[0,0],Ut);Xe.renderBorder(o,e,i,Z,d[X_],s,l)}if(E&&k>0&&ft[3]>0){var J=Math.atan(k/L),Q=Math.atan(k/F),tt=Xe.calPoints(k,v[B_],J,Q,S,S+k,P-D,P,N,N+L,B-F,B,3,Wt,Ut);Xe.renderBorder(o,e,i,tt,d[z_],s,l)}}()}return t&&t.ctx.clearRect(0,0,f,_),{v:q}}();if("object"===t(ee))return ee.v}else if(x===E||m===b)return q}if(ot[3]>0&&Bh.renderBgc(this,e,i,d[C_],Yt,x,m,E-x,b-m,Wt,Ut,Xt,zt,"fill",!1,s,l),pt){var re=pt.length;pt.slice(0).reverse().forEach((function(t,r){if(t)if(r=re-1-r,it.isString(t)){var a=o.__loadBgi[r];a.url===t&&Bh.renderImage(o,e,i,a,x,m,E,b,Wt,Ut,Xt,zt,v,r,mt,vt,u,!1,s,l)}else if(t.k){var n=o.__gradient(e,i,x,m,E,b,t,s,l);n&&("conic"===n.k?cr.renderConic(o,e,i,n.v,x,m,E-x,b-m,Wt,Ut,Xt,zt):Bh.renderBgc(o,e,i,n.v,Yt,x,m,E-x,b-m,Wt,Ut,Xt,zt,"fill",!1,s,l))}}))}return Et&&Et.forEach((function(t){Ru.renderBoxShadow(o,e,i,t,B,X,U,$,U-B,$-X,s,l)})),L>0&&st[3]>0&&Xe.renderBorder(this,e,i,d[Z_],d[U_],s,l),D>0&&lt[3]>0&&Xe.renderBorder(this,e,i,d[J_],d[V_],s,l),F>0&&ht[3]>0&&Xe.renderBorder(this,e,i,d[Q_],d[X_],s,l),k>0&&ft[3]>0&&Xe.renderBorder(this,e,i,d[td],d[z_],s,l),q}},{key:"__destroy",value:function(){if(!this.isDestroyed){f(o(a.prototype),"__destroy",this).call(this);var t=this.root;this.clearAnimate(),this.clearFrameAnimate(),t&&t.delRefreshTask(this.__loadBgi.cb),t&&t.delRefreshTask(this.__task),this.__task=null,this.__root=null,this.clearCache();var e=this.__fontRegister;for(var r in e)e.hasOwnProperty(r)&&Ct.offRegister(r,this)}}},{key:"__emitEvent",value:function(t,e){var r=this.isDestroyed,i=this.computedStyle,a=this.isMask;if(!(r||"none"===i[o_]||t.__stopPropagation||a)){var n,o=t.event.type,s=this.listener,l=this.__hasMask;if(s.hasOwnProperty(o)&&(n=s[o]),e)return"none"!==i[q_]&&by(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0;if(this.willResponseEvent(t)){if(l){for(var h,f=this.next,c=f.isClip;f&&f.isMask;){if(f.willResponseEvent(t,!0)){h=!0;break}f=f.next}if(!c&&!h)return}return by(n)&&!t.__stopImmediatePropagation&&n.call(this,t),!0}}}},{key:"willResponseEvent",value:function(t,e){var r=t.x,i=t.y,a=this.__sx1,n=this.__sy1,o=this.offsetWidth,s=this.offsetHeight,l=this.matrixEvent;if("none"!==this.computedStyle[q_])return ee.pointInQuadrilateral(r,i,a,n,a+o,n,a+o,n+s,a,n+s,l)?(t.target||e||(t.target=this,"touchstart"===t.event.type&&this.root&&(this.root.__touchstartTarget=this)),!0):void 0}},{key:"__gradient",value:function(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=a-r,f=n-i;if(h&&f){var c=o.k,u=o.v,_=o.d,d=o.s,y=o.z,v=o.p,p=r+.5*h,g=i+.5*f,x={k:c};if("linear"===c){var m=cr.getLinear(u,_,r,i,p,g,h,f,this.root,s,l);x.v=this.__getLg(t,e,m)}else if("radial"===c){var E=cr.getRadial(u,d,y,v,r,i,a,n,this.root,s,l);E&&(x.v=this.__getRg(t,e,E),E.matrix&&(x.v=[x.v,E.matrix,E.cx,E.cy]))}else if("conic"===c){var b=this.bbox,T=Math.max(Math.abs(b[2]-b[0]),Math.abs(b[3]-b[1])),A=Math.max(Math.abs(h),Math.abs(f)),M=cr.getConic(u,_,v,r,i,a,n,T/A,this.root,s,l);x.v=this.__getCg(t,e,M)}return x}}},{key:"__getLg",value:function(t,e,r){if(t===wu||t===Du){var i=e.createLinearGradient(r.x1,r.y1,r.x2,r.y2);return r.stop.forEach((function(t){i.addColorStop(t[1],gy(t[0]))})),i}if(t===ku){var a={tagName:"linearGradient",props:[["x1",r.x1],["y1",r.y1],["x2",r.x2],["y2",r.y2]],children:r.stop.map((function(t){return{tagName:"stop",props:[["stop-color",gy(t[0])],["offset",100*t[1]+"%"]]}}))},n=e.add(a);return this.__config[Zd].push(a),"url(#"+n+")"}}},{key:"__getRg",value:function(t,e,r){if(t===wu||t===Du){var i=e.createRadialGradient(r.cx,r.cy,0,r.tx,r.ty,r.r);return r.stop.forEach((function(t){i.addColorStop(t[1],gy(t[0]))})),i}if(t===ku){var a={tagName:"radialGradient",props:[["cx",r.tx],["cy",r.ty],["r",r.r]],children:r.stop.map((function(t){return{tagName:"stop",props:[["stop-color",gy(t[0])],["offset",100*t[1]+"%"]]}}))};r.tx!==r.cx&&a.props.push(["fx",r.cx]),r.ty!==r.cy&&a.props.push(["fy",r.cy]);var n=e.add(a);return this.__config[Zd].push(a),"url(#"+n+")"}}},{key:"__getCg",value:function(t,e,r){var i=r.stop,a=i.length-1;i[a][1]<1&&i.push([i[a][0].slice(0),1]),i[0][1]>0&&i.unshift([i[0][0].slice(0),0]);return t===wu||t===Du?r:[]}},{key:"clearCache",value:function(t){var e=this.__config,r=e[Vd],i=e[Kd],a=e[jd],n=e[$d];if(!t){e[Ld]=this.__cacheStyle={};var o=e[zd];o&&o.release()}r&&r.release(),i&&i.release(),a&&a.release(),n&&n.release()}},{key:"updateStyle",value:function(t,e){var r=this,i=r.root,a=r.__config,n=Ha.normalize(t);i?i.addRefreshTask(r.__task={__before:function(){if(r.__task=null,!a[qd]){var e={};e[Ad]=r,e[Rd]=n,e[Sd]=t,e[Od]=Object.keys(n).map((function(t){return Oy.hasOwnProperty(t)||(t=parseInt(t)),t})),e[Cd]=a,i.__addUpdate(r,a,i,i.__config,e)}},__after:function(t){by(e)&&e.call(r,t)}}):(Object.assign(this.currentStyle,n),by(e)&&e.call(r,-1))}},{key:"updateFormatStyle",value:function(t,e){var r=this,i=r.root,a=r.__config;i?i.addRefreshTask(r.__task={__before:function(){if(r.__task=null,!a[qd]){var e={};e[Ad]=r,e[Rd]=t,e[Od]=Object.keys(t).map((function(t){return Oy.hasOwnProperty(t)||(t=parseInt(t)),t})),e[Cd]=a,i.__addUpdate(r,a,i,i.__config,e)}},__after:function(t){by(e)&&e.call(r,t)}}):(Object.assign(this.currentStyle,t),by(e)&&e.call(r,-1))}},{key:"animate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Eu(this,t,e);return this.isDestroyed?(r.__destroy(!0),r):(this.animationList.push(r),!1===e.autoPlay?r:r.play())}},{key:"removeAnimate",value:function(t){if(t instanceof Eu){var e=this.animationList.indexOf(t);e>-1&&(t.cancel(),t.__destroy(),this.animationList.splice(e,1))}}},{key:"clearAnimate",value:function(){this.animationList.splice(0).forEach((function(t){t.cancel(),t.__destroy()}))}},{key:"frameAnimate",value:function(t){if(by(t)){for(var e=this.__frameAnimateList,r=0,i=e.length;r<i;r++)if(e[r].__karasFramecb===t)return t;var a={__after:function(e){t(e)},__karasFramecb:t};return e.push(a),Wh.onFrame(a),t}}},{key:"removeFrameAnimate",value:function(t){for(var e=0,r=this.__frameAnimateList,i=r.length;e<i;e++)if(r[e].__karasFramecb===t)return r.splice(e,1),void Wh.offFrame(t)}},{key:"clearFrameAnimate",value:function(){this.__frameAnimateList.splice(0).forEach((function(t){Wh.offFrame(t)}))}},{key:"__deepScan",value:function(t,e){return t(this,e)}},{key:"__offsetX",value:function(t,e,r){"none"!==this.computedStyle[o_]&&(f(o(a.prototype),"__offsetX",this).call(this,t,e),e&&(this.__layoutData.x+=t,this.clearCache()),void 0!==r&&(this.__config[Xd]|=r),this.__sx1+=t,this.__sx2+=t,this.__sx3+=t,this.__sx4+=t,this.__sx5+=t,this.__sx6+=t)}},{key:"__offsetY",value:function(t,e,r){"none"!==this.computedStyle[o_]&&(f(o(a.prototype),"__offsetY",this).call(this,t,e),e&&(this.__layoutData&&(this.__layoutData.y+=t),this.clearCache()),void 0!==r&&(this.__config[Xd]|=r),this.__sy1+=t,this.__sy2+=t,this.__sy3+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t)}},{key:"__resizeX",value:function(t,e){"none"!==this.computedStyle[o_]&&(this.computedStyle.width=this.__width+=t,this.__clientWidth+=t,this.__offsetWidth+=t,this.__outerWidth+=t,this.__layoutData&&(this.__layoutData.w+=t),this.__sx4+=t,this.__sx5+=t,this.__sx6+=t,t<0&&(this.__config[Wd]=!1),void 0!==e&&(this.__config[Xd]|=e),this.clearCache())}},{key:"__resizeY",value:function(t,e){"none"!==this.computedStyle[o_]&&(this.computedStyle.height=this.__height+=t,this.__clientHeight+=t,this.__offsetHeight+=t,this.__outerHeight+=t,this.__layoutData.h+=t,this.__sy4+=t,this.__sy5+=t,this.__sy6+=t,t<0&&(this.__config[Wd]=!1),void 0!==e&&(this.__config[Xd]|=e),this.clearCache())}},{key:"__releaseWhenEmpty",value:function(t){return t&&t.available&&t.release(),!0}},{key:"getComputedStyle",value:function(t){var e=this.computedStyle,r={},i=[];t?(Array.isArray(t)?t:[t]).forEach((function(t){dr.hasOwnProperty(t)?dr[t].forEach((function(t){i.push(Fu[Pu(t)])})):i.push(Fu[Pu(t)])})):i=Object.keys(e);return i.forEach((function(t){Oy.hasOwnProperty(t)?r[t]=e[t]:r[Nu[t]]=e[t]})),r}},{key:"getBoundingClientRect",value:function(t){var e;if(t)e=this.bbox;else{var r=this.__sx1,i=this.__sy1;e=[r,i,r+this.offsetWidth,i+this.offsetHeight]}var a=this.matrixEvent,n=wy(P.calPoint([e[0],e[1]],a)),o=wy(P.calPoint([e[2],e[1]],a)),s=wy(P.calPoint([e[2],e[3]],a)),l=wy(P.calPoint([e[0],e[3]],a));return{left:Math.min(n[0],Math.min(o[0],Math.min(s[0],l[0]))),top:Math.min(n[1],Math.min(o[1],Math.min(s[1],l[1]))),right:Math.max(n[0],Math.max(o[0],Math.max(s[0],l[0]))),bottom:Math.max(n[1],Math.max(o[1],Math.max(s[1],l[1]))),points:[n,o,s,l]}}},{key:"__isRealInline",value:function(){return!0}},{key:"remove",value:function(t){var e=this;if(e.isDestroyed)return Rt.warn("Remove target is destroyed."),void(by(t)&&t());var r=e.root,i=e.domParent,a=e.isShadowRoot?e.hostRoot:e;-1!==i.children.indexOf(a)?(r.delRefreshTask(e.__task),r.addRefreshTask(e.__task={__before:function(){e.__task=null;var t=i.__json,a=t.children.indexOf(e.isShadowRoot?e.hostRoot.__json:e.__json);if(-1===a)throw new Error("Remove index Exception.");t.children.splice(a,1),i.children.splice(a,1);var n=i.zIndexChildren;if(n){var o=n.indexOf(e.isShadowRoot?e.hostRoot:e);o>-1&&n.splice(o,1)}e.__prev&&(e.__prev.__next=e.__next);var s={};s[Ad]=e,s[Md]=Fy,s[Id]=!0,s[Cd]=e.__config,r.__addUpdate(e,e.__config,r,r.__config,s)},__after:function(r){e.isShadowRoot?e.hostRoot.__destroy():e.__destroy(),by(t)&&t.call(e,r)}})):by(t)&&t()}},{key:"tagName",get:function(){return this.__tagName}},{key:"sx",get:function(){return this.__sx}},{key:"sy",get:function(){return this.__sy}},{key:"clientWidth",get:function(){return this.__clientWidth||0}},{key:"clientHeight",get:function(){return this.__clientHeight||0}},{key:"offsetWidth",get:function(){return this.__offsetWidth||0}},{key:"offsetHeight",get:function(){return this.__offsetHeight||0}},{key:"outerWidth",get:function(){return this.__outerWidth||0}},{key:"outerHeight",get:function(){return this.__outerHeight||0}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__sx1,e=this.__sy1,r=this.offsetWidth,i=this.offsetHeight,a=this.computedStyle[k_];this.__bbox=Ry([t,e,t+r,e+i],a)}return this.__bbox}},{key:"filterBbox",get:function(){if(!this.__filterBbox){var t=this.bbox,e=this.computedStyle[H_];this.__filterBbox=Sy(t,e)}return this.__filterBbox}},{key:"listener",get:function(){return this.__listener}},{key:"matrix",get:function(){return this.__config[Yd]}},{key:"matrixEvent",get:function(){return this.__config[Gd]}},{key:"perspectiveMatrix",get:function(){return this.__config[ty]}},{key:"style",get:function(){return this.__style}},{key:"computedStyle",get:function(){return this.__computedStyle}},{key:"animationList",get:function(){return this.__animationList}},{key:"currentStyle",get:function(){return this.__currentStyle}},{key:"cacheStyle",get:function(){return this.__cacheStyle}},{key:"isShadowRoot",get:function(){return!this.parent&&this.host&&this.host!==this.root}},{key:"contentBoxList",get:function(){return this.__contentBoxList}},{key:"baseline",get:function(){return this.offsetHeight}},{key:"firstBaseline",get:function(){return this.offsetHeight}},{key:"verticalBaseline",get:function(){return this.offsetWidth}},{key:"isMask",get:function(){return this.__isMask}},{key:"isClip",get:function(){return this.__isClip}},{key:"cacheAsBitmap",get:function(){return this.__cacheAsBitmap},set:function(t){this.__config[iy]=this.__cacheAsBitmap=!!t}},{key:"parentLineBox",get:function(){return this.__parentLineBox}}]),a}(w),Uy=b.STYLE_KEY,Xy=Uy.DISPLAY,zy=Uy.MARGIN_TOP,Vy=Uy.MARGIN_BOTTOM,Ky=Uy.MARGIN_LEFT,jy=Uy.MARGIN_RIGHT,$y=Uy.BORDER_TOP_WIDTH,qy=Uy.BORDER_BOTTOM_WIDTH,Zy=Uy.BORDER_LEFT_WIDTH,Jy=Uy.BORDER_RIGHT_WIDTH,Qy=Uy.PADDING_TOP,tv=Uy.PADDING_BOTTOM,ev=Uy.PADDING_LEFT,rv=Uy.PADDING_RIGHT,iv=Uy.LINE_HEIGHT,av=function(){function t(r,i,a,n,o){e(this,t),this.__list=[],this.__x=r,this.__y=i,this.__lineHeight=a,this.__baseline=n,this.__isUpright=o,this.__bOffset=0}return i(t,[{key:"add",value:function(t){this.list.push(t),t.__parentLineBox=this}},{key:"verticalAlign",value:function(t){var e=t?this.verticalBaseline:this.baseline,r=t?this.verticalLineHeight:this.lineHeight,i=r;if(this.list.length){this.list.forEach((function(r){if(!r.isEllipsis)if(t){var a=r.verticalBaseline;if(a!==e){var n=e-a;r.__offsetX(n,!0),i=Math.max(i,r.offsetWidth+n)}}else{var o=r.baseline;if(o!==e){var s=e-o;r.__offsetY(s,!0),i=Math.max(i,r.offsetHeight+s)}}}));var a=e-this.__baseline;i=Math.max(i,this.__lineHeight+a)}return Math.max(0,i-r)}},{key:"__offsetX",value:function(t,e){this.__x+=t,e&&this.list.forEach((function(e){e.__offsetX(t,!0)}))}},{key:"__offsetY",value:function(t,e){this.__y+=t,e&&this.list.forEach((function(e){e.__offsetY(t,!0)}))}},{key:"__setLB",value:function(t,e){this.__lineHeight=Math.max(t,this.__lineHeight),this.__baseline=Math.max(e,this.__baseline)}},{key:"__resetLb",value:function(t,e){this.list.forEach((function(r){var i=r;r instanceof $o&&(i=r.parent.parent);for(var a=i.computedStyle;"inline"===a[Xy];)t=Math.max(t,a[iv]),e=Math.max(e,Ha.getBaseline(a)),a=(i=i.domParent).computedStyle})),this.__lineHeight=t,this.__baseline=e}},{key:"list",get:function(){return this.__list}},{key:"size",get:function(){return this.__list.length}},{key:"x",get:function(){return this.__x}},{key:"y",get:function(){return this.__y}},{key:"endX",get:function(){return this.x+this.width}},{key:"endY",get:function(){return this.y+this.height}},{key:"width",get:function(){if(this.isUpright)return this.verticalLineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],i=t[e-1],a=r.x,n=r instanceof $o?r.parent.domParent:r.domParent;;){var o=n.contentBoxList,s=n.computedStyle,l=s[Xy],h=s[Ky],f=s[Zy],c=s[ev];if("inline"!==l)break;r===o[0]&&(a-=h+f+c),n=n.domParent}var u=i.x+i.outerWidth;for(n=i instanceof $o?i.parent.domParent:i.domParent;;){var _=n.contentBoxList,d=n.computedStyle,y=d[Xy],v=d[jy],p=d[Jy],g=d[rv];if("inline"!==y)break;r===_[_.length-1]&&(u+=v+p+g),n=n.domParent}return u-a}return 0}},{key:"height",get:function(){if(!this.isUpright)return this.lineHeight;var t=this.list,e=t.length;if(e){for(var r=t[0],i=t[e-1],a=r.y,n=r instanceof $o?r.parent.domParent:r.domParent;;){var o=n.contentBoxList,s=n.computedStyle,l=s[Xy],h=s[zy],f=s[$y],c=s[Qy];if("inline"!==l)break;r===o[0]&&(a-=h+f+c),n=n.domParent}var u=i.y+i.outerHeight;for(n=i instanceof $o?i.parent.domParent:i.domParent;;){var _=n.contentBoxList,d=n.computedStyle,y=d[Xy],v=d[Vy],p=d[qy],g=d[tv];if("inline"!==y)break;r===_[_.length-1]&&(u+=v+p+g),n=n.domParent}return u-a}return 0}},{key:"bOffset",get:function(){return this.__bOffset}},{key:"baseline",get:function(){var t=this.__baseline;return this.list.forEach((function(e){t=Math.max(t,e.baseline)})),t}},{key:"verticalBaseline",get:function(){var t=this.__baseline;return this.list.forEach((function(e){t=Math.max(t,e.verticalBaseline)})),t}},{key:"lineHeight",get:function(){var t=this.__lineHeight;return this.list.forEach((function(e){t=Math.max(t,e.outerHeight)})),t}},{key:"verticalLineHeight",get:function(){var t=this.__lineHeight;return this.list.forEach((function(e){t=Math.max(t,e.outerWidth)})),t}},{key:"isUpright",get:function(){return this.__isUpright}}]),t}(),nv=function(){function t(r,i,a,n,o){e(this,t),this.__x=this.__lastX=r,this.__y=this.__lastY=i,this.__max=o?i:r,this.__domList=[],this.__domStack=[],this.__list=[],this.__isNewLine=!0,this.__lineHeight=a,this.__baseline=n,this.__isEnd=!0,this.__spreadList=[],this.__isVertical=o}return i(t,[{key:"genLineBox",value:function(t,e){var r=new av(t,e,this.__lineHeight,this.__baseline,this.isUpright);return this.list.push(r),this.__isEnd=!0,r}},{key:"genLineBoxByInlineIfNewLine",value:function(t,e,r,i){var a=Math.max(this.__lineHeight,r),n=Math.max(this.__baseline,i);if(this.__isNewLine){var o=new av(t,e,a,n,this.isUpright);return this.list.push(o),this.__isEnd=!0,this.__isNewLine=!1,o}}},{key:"setNotEnd",value:function(){this.__isEnd=!1}},{key:"setNewLine",value:function(){this.__isNewLine=!0}},{key:"addItem",value:function(t,e){var r,i=this.isUpright;if(this.__isNewLine)this.__isNewLine=!1,r=this.genLineBox(t.x,t.y);else{var a=this.list;r=a[a.length-1]}return this.__domStack.forEach((function(e){e.__contentBoxList.push(t)})),r.add(t),e?(this.__isNewLine=!0,this.__lastX=t.x,this.__lastY=t.y+t.outerHeight):i?(this.__lastX=t.x,this.__lastY=t.y+t.outerHeight):(this.__lastX=t.x+t.outerWidth,this.__lastY=t.y),this.__max=Math.max(this.__max,i?t.y+t.outerHeight:t.x+t.outerWidth),r}},{key:"horizonAlign",value:function(t,e,r){this.list.forEach((function(i){var a=t-(r?i.height:i.width);a>0&&("center"===e&&(a*=.5),r?i.__offsetY(a,!0):i.__offsetX(a,!0))}))}},{key:"verticalAlign",value:function(t){var e=this.__spreadList;e.splice(0);var r=0;return this.list.forEach((function(i){r&&(i.__bOffset=r,t?i.__offsetX(r,!0):i.__offsetY(r,!0)),r+=i.verticalAlign(t),e.push(r)})),r}},{key:"addX",value:function(t){this.__lastX+=t}},{key:"addY",value:function(t){this.__lastY+=t}},{key:"pushContentBoxList",value:function(t){this.__domList.push(t),this.__domStack.push(t)}},{key:"popContentBoxList",value:function(){this.__domStack.pop()}},{key:"__offsetX",value:function(t){this.list.forEach((function(e){e.__offsetX(t)}))}},{key:"__offsetY",value:function(t){this.list.forEach((function(e){e.__offsetY(t)}))}},{key:"setLbByInlineIfNotNewLine",value:function(t,e){var r=this.list.length;r&&!this.isNewLine&&this.list[r-1].__setLB(t,e,!1)}},{key:"size",get:function(){return this.list.length}},{key:"lastX",get:function(){return this.__lastX}},{key:"lastY",get:function(){return this.__lastY}},{key:"endX",get:function(){var t=this.list,e=t.length;return e?t[e-1].endX:this.__x}},{key:"endY",get:function(){var t=this.list,e=t.length;return e?t[e-1].endY:this.__y}},{key:"isEnd",get:function(){return this.__isEnd}},{key:"isNewLine",get:function(){return this.__isNewLine}},{key:"breakLine",get:function(){return this.list.length>1}},{key:"domList",get:function(){return this.__domList}},{key:"baseline",get:function(){var t=this.list,e=t.length;if(e){for(var r=0,i=0;i<e-1;i++)r+=t[i].height;return r+t[e-1].baseline+t[e-1].bOffset}return 0}},{key:"firstBaseline",get:function(){var t=this.list;return t.length?t[0].baseline:0}},{key:"verticalBaseline",get:function(){var t=this.list;return t.length?t[0].baseline+t[0].bOffset:0}},{key:"lineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].lineHeight:0}},{key:"verticalLineHeight",get:function(){var t=this.list;return t.length?t[t.length-1].verticalLineHeight:0}},{key:"lineBox",get:function(){var t=this.list;if(t.length)return t[t.length-1]}},{key:"list",get:function(){return this.__list}},{key:"width",get:function(){var t=0;return this.list.forEach((function(e){t=Math.max(t,e.width)})),t}},{key:"spreadList",get:function(){return this.__spreadList}},{key:"isUpright",get:function(){return this.__isVertical}},{key:"max",get:function(){return this.__max}}]),t}(),ov={TAG_NAME:{div:!0,p:!0,span:!0,img:!0,b:!0,strong:!0},INLINE:{span:!0,img:!0,b:!0,strong:!0},BOLD:{b:!0,strong:!0}},sv=b.STYLE_KEY,lv=sv.DISPLAY,hv=sv.TOP,fv=sv.BOTTOM,cv=sv.POSITION,uv=sv.HEIGHT,_v=D.AUTO,dv=D.PX,yv=D.PERCENT,vv=Fs.REFLOW;var pv={offsetAndResizeByNodeOnY:function(t,e,r,i,a){if(i){for(var n;;){for(;t.isShadowRoot;)t=t.host;n=t;var o=void 0,s=t.domParent;if(s){var l=s.computedStyle[cv];o=s===e||s.isShadowRoot||"relative"===l||"absolute"===l}for(var h=t.next,f=void 0;h;){if("none"!==h.computedStyle[lv])if("absolute"===h.currentStyle[cv]){var c=h.currentStyle,u=c[hv],_=c[fv],d=c[uv];if(u[1]===_v){if(_[1]===_v||_[1]===dv)h.__offsetY(i,!0,vv),h.clearCache();else if(_[1]===yv){var y=(1-.01*_[0])*i;h.__offsetY(y,!0,vv),h.clearCache()}}else if(u[1]===yv){var v=.01*u[0]*i;h.__offsetY(v,!0,vv),h.clearCache()}if(d[1]===yv)if(o)s.__layoutAbs(s,s.__layoutData,h);else{if(!f)for(f=s;f&&f!==e&&!f.isShadowRoot;){var p=f.currentStyle;if("absolute"===p[cv]||"relative"===p[cv])break;f=f.domParent}a.push([s,f,h])}}else h.__offsetY(i,!0,vv),h.clearCache();h=h.next}if(!s)break;var g=(t=s).currentStyle,x=void 0;if("absolute"===g[cv]?g[uv][1]!==_v||g[hv][1]!==_v&&g[fv][1]!==_v||(x=!0):g[uv][1]===_v&&(x=!0),!x)break;if(t.__resizeY(i,vv),t.clearCache(),t===e)break}for(;n;)n.clearCache(!0),n=n.domParent}},clearUniqueReflowId:function(t){for(var e in t){if(t.hasOwnProperty(e))delete t[e].node.__uniqueReflowId}},getMergeMargin:function(t,e){var r=0,i=t[0],a=t[0];t.forEach((function(t){r+=t,i=Math.max(i,t),a=Math.min(a,t)})),e.forEach((function(t){r+=t,i=Math.max(i,t),a=Math.min(a,t)}));var n=0;return i>0&&a>0?n=Math.max(i,a)-r:i<0&&a<0?n=Math.min(i,a)-r:0===i&&0===a||(n=i+a-r),n}},gv=b.STYLE_KEY,xv=gv.POSITION,mv=gv.DISPLAY,Ev=gv.MARGIN_LEFT,bv=gv.MARGIN_TOP,Tv=gv.MARGIN_RIGHT,Av=gv.MARGIN_BOTTOM,Mv=gv.PADDING_LEFT,Rv=gv.PADDING_BOTTOM,Sv=gv.PADDING_RIGHT,Ov=gv.PADDING_TOP,Cv=gv.BORDER_TOP_WIDTH,Iv=gv.BORDER_BOTTOM_WIDTH,wv=gv.BORDER_RIGHT_WIDTH,kv=gv.BORDER_LEFT_WIDTH,Dv=gv.TOP,Lv=gv.RIGHT,Fv=gv.BOTTOM,Nv=gv.LEFT,Pv=gv.WIDTH,Bv=gv.HEIGHT,Hv=gv.TEXT_ALIGN,Gv=gv.FLEX_DIRECTION,Yv=gv.FLEX_BASIS,Wv=gv.FLEX_SHRINK,Uv=gv.FLEX_GROW,Xv=gv.ALIGN_SELF,zv=gv.ALIGN_ITEMS,Vv=gv.JUSTIFY_CONTENT,Kv=gv.Z_INDEX,jv=gv.WHITE_SPACE,$v=gv.LINE_HEIGHT,qv=gv.LINE_CLAMP,Zv=gv.ORDER,Jv=gv.FLEX_WRAP,Qv=gv.ALIGN_CONTENT,tp=gv.OVERFLOW,ep=gv.FONT_SIZE,rp=gv.FONT_FAMILY,ip=gv.FONT_WEIGHT,ap=gv.WRITING_MODE,np=b.NODE_KEY,op=np.NODE_CURRENT_STYLE,sp=np.NODE_STYLE,lp=np.NODE_STRUCT,hp=np.NODE_DOM_PARENT,fp=np.NODE_IS_INLINE,cp=b.UPDATE_KEY,up=cp.UPDATE_NODE,_p=cp.UPDATE_FOCUS,dp=cp.UPDATE_ADD_DOM,yp=cp.UPDATE_CONFIG,vp=b.STRUCT_KEY,pp=vp.STRUCT_NUM,gp=vp.STRUCT_LV,xp=vp.STRUCT_TOTAL,mp=vp.STRUCT_CHILD_INDEX,Ep=vp.STRUCT_INDEX,bp=b.ELLIPSIS,Tp=D.AUTO,Ap=D.PX,Mp=D.PERCENT,Rp=D.REM,Sp=D.VW,Op=D.VH,Cp=D.VMAX,Ip=D.VMIN,wp=Ha.isRelativeOrAbsolute,kp=Ha.getBaseline,Dp=Ha.getVerticalBaseline,Lp=it.extend,Fp=it.isNil,Np=it.isFunction,Pp=k.CANVAS,Bp=k.SVG,Hp=k.WEBGL;function Gp(t){var e,r,i=[],a={},n=t.children;if(n.forEach((function(t,o){var s=t;t instanceof lh&&(t=t.shadowRoot),t instanceof Wy&&t.isMask?void 0!==r?a[r].push(t):o&&(n[r=o-1].__iIndex=r,a[r]=[t],e=!0):(r=void 0,t instanceof Wy?(s.__zIndex=t.currentStyle[Kv],wp(t)?(s.__aIndex=!0,i.push(s)):i.push(s)):(s.__zIndex=0,i.push(s)),s.__iIndex=o)})),i.sort((function(t,e){return t.__zIndex!==e.__zIndex?t.__zIndex-e.__zIndex:t.__aIndex!==e.__aIndex?t.__aIndex?1:-1:t.__iIndex-e.__iIndex})),e)for(var o=i.length-1;o>=0;o--){var s=i[o].__iIndex;a.hasOwnProperty(s)&&i.splice.apply(i,[o+1,0].concat(u(a[s])))}return i}function Yp(t){var e=[];return t.forEach((function(t,r){var i=t;t instanceof lh&&(t=t.shadowRoot),i.__order=t instanceof Wy?t.currentStyle[Zv]:0,e.push(i),i.__iIndex=r})),e.sort((function(t,e){return t.__order!==e.__order?t.__order-e.__order:t.__iIndex-e.__iIndex})),e}function Wp(t,e,r,i,a,n){var o,s,l=t.computedStyle,h=t.root,f=h.renderMode,c=r.list;if(c.forEach((function(t){i-=n?t.outerHeight:t.outerWidth})),f!==Pp&&f!==Hp||(s=f===Hp?Rt.getFontCanvas().ctx:h.ctx),f===Pp||f===Hp){var u=Ha.setFontStyle(l);s.font!==u&&(s.font=u),o=s.measureText(bp).width}else o=Rt.measureTextSync(bp,l[rp],l[ep],l[ip]);for(var _=c.length-1;_>=0;_--){var d=c[_];if(!_||i+d.outerWidth>=o+1e-10){if(d instanceof $o){d.parent.__backtrack(t,e,r,d,i,a,o,l,s,f,n)}else{var y=new fs(d.x+d.outerWidth+a,d.y,o,t);e.addItem(y,!0)}break}if(d instanceof $o){var v=d.parent,p=v.textBoxes.indexOf(d);p>-1&&v.textBoxes.splice(p,1)}else d.__layoutNone();c.pop(),i+=n?d.outerHeight:d.outerWidth}}var Up=function(t){function r(i,a,n){var o;e(this,r);var s=l(o=t.call(this,i,a)||this).style;s.display&&{flex:!0,block:!0,inline:!0,"inline-block":!0,inlineBlock:!0,none:!0}.hasOwnProperty(s.display)||(ov.INLINE.hasOwnProperty(o.tagName)?s.display="inline":s.display="block"),!s[ip]&&ov.BOLD.hasOwnProperty(i)&&(s.fontWeight=700),o.__style=Ha.normalize(s,Bt.DOM_ENTRY_SET),o.__currentStyle=Lp({},o.__style),o.__children=n||[],o.__flexLine=[],o.__ellipsis=null;var h=o.__config;return h[op]=o.__currentStyle,h[sp]=o.__style,o}return n(r,t),i(r,[{key:"__structure",value:function(t,e,i){var a=f(o(r.prototype),"__structure",this).call(this,t++,e,i),n=[a],s=this.__zIndexChildren=this.__zIndexChildren||Gp(this);s.forEach((function(r,i){var a=r.__structure(t,e+1,i);Array.isArray(a)?(t+=a.length,n=n.concat(a)):(t++,n.push(a))}));var l=n.length-1;return a[pp]=s.length,a[xp]=l,n}},{key:"__modifyStruct",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.__config,a=i[lp],n=a[xp]||0,o=this.__structure(a[Ep],a[gp],a[mp]);(e=t.__structs).splice.apply(e,[a[Ep]+r,n+1].concat(u(o)));var s=0;if(this!==t){s=((a=i[lp])[xp]||0)-n;var l=i[hp].__config[lp];l[xp]=l[xp]||0,l[xp]+=s}return[a,s]}},{key:"__updateStruct",value:function(t){var e=this.__config[lp],r=e[Ep],i=e[xp],a=void 0===i?0:i,n=this.__zIndexChildren=Gp(this);if(1!==n.length){n.forEach((function(t,e){var r=t.__config[lp];r&&(r[mp]=e)}));for(var o,s=[],l=[],h=r+1;h<=r+a;h++){var f=t[h];if(f){var c={child:f,list:t.slice(f[Ep],f[Ep]+(f[xp]||0)+1)};s.push(c),l.push(c),h+=f[xp]||0}}s.sort((function(t,e){return t.child[mp]-e.child[mp]}));for(var _=0,d=l.length;_<d;_++)if(l[_]!==s[_]){o=!0;break}if(o){var y=[];s.forEach((function(t){y=y.concat(t.list)})),y.forEach((function(t,e){t[Ep]=r+e+1})),t.splice.apply(t,[r+1,a].concat(u(y)))}}}},{key:"__tryLayInline",value:function(t,e,r){this.__computeReflow();var i=this.flowChildren,a=this.currentStyle,n=a[mv],o=a[Pv],s=a[Bv],l=a[Ev],h=a[Tv],f=a[bv],c=a[Av],u=a[Mv],_=a[Sv],d=a[Ov],y=a[Rv],v=this.computedStyle,p=v[kv],g=v[wv],x=v[Cv],m=v[Iv];if("inline"===n){if(i.length){var E=i[0];E instanceof lh&&(E=E.shadowRoot),E instanceof Wy?t=E.__tryLayInline(t,e,r):t-=E.firstCharWidth}}else{if(o[1]!==Tp)t-=r?this.__calSize(s,e,!0):this.__calSize(o,e,!0);else for(var b=0;b<i.length;b++){if(t<0)return t;var T=i[b];T instanceof lh&&(T=T.shadowRoot),T instanceof Wy?t=T.__tryLayInline(t,e,r):t-=T.textWidth}r?(t-=this.__calSize(c,e,!0),t-=this.__calSize(y,e,!0),t-=m):(t-=this.__calSize(h,e,!0),t-=this.__calSize(_,e,!0),t-=g)}return r?(t-=this.__calSize(f,e,!0),t-=this.__calSize(d,e,!0),t-=x):(t-=this.__calSize(l,e,!0),t-=this.__calSize(u,e,!0),t-=p),t}},{key:"__offsetX",value:function(t,e,i){f(o(r.prototype),"__offsetX",this).call(this,t,e,i);var a=this.__ellipsis;a&&a.__offsetX(t,e),e&&!this.__config[fp]&&this.lineBoxManager&&this.lineBoxManager.__offsetX(t),this.flowChildren.forEach((function(r){r&&r.__offsetX(t,e,i)}))}},{key:"__offsetY",value:function(t,e,i){f(o(r.prototype),"__offsetY",this).call(this,t,e,i);var a=this.__ellipsis;a&&a.__offsetY(t,e),e&&!this.__config[fp]&&this.lineBoxManager&&this.lineBoxManager.__offsetY(t),this.flowChildren.forEach((function(r){r&&r.__offsetY(t,e,i)}))}},{key:"__calBasis",value:function(t,e,r,i,a){var n=this;this.__computeReflow();var o,s=0,l=0,h=0,f=this.flowChildren,u=this.currentStyle,_=this.computedStyle,d=i.x,y=i.y,v=i.w,p=i.h,g=u[Gv],x=u[Yv],m=u[Pv],E=u[Bv],b=_[$v],T=_[mv],A=_[qv],M=0===_[ap].indexOf("vertical"),R=t?m:E,S=x[1]===Tp,O=[Ap,Mp,Rp,Sp,Op,Cp,Ip].indexOf(x[1])>-1,C=!S&&!O;O?s=o=this.__calSize(x,t?v:p,!0):S&&[Ap,Mp,Rp,Sp,Op,Cp,Ip].indexOf(R[1])>-1?s=o=this.__calSize(R,t?v:p,!0):S&&(C=!0);var I=0,w=0;if(A=A||0,t){if("flex"===T){var k=-1===["column","columnReverse"].indexOf(g);(f=Yp(f)).forEach((function(i){if(i instanceof Wy||i instanceof lh&&i.shadowRoot instanceof Wy){var a=c(i.__calBasis(t,e,r,{x:d,y:y,w:v,h:p},!1),3),o=a[1],s=a[2];k?(l+=o,h+=s):(l=Math.max(l,o),h=Math.max(h,s))}else{if(M){var f=n.__lineBoxManager=new nv(d,y,b,M?Dp(_):kp(_),M);i.__layout({x:d,y:y,w:v,h:p,lineBoxManager:f,lineClamp:A,isUpright:M}),l+=i.width,h+=i.width}k?(l+=i.charWidth,h+=i.textWidth):(l=Math.max(l,i.charWidth),h=Math.max(h,i.textWidth))}}))}else if(M){var D=this.__lineBoxManager=new nv(d,y,b,M?Dp(_):kp(_),M);this.__layout({x:d,y:y,w:v,h:p,lineBoxManager:D,lineClamp:A,isUpright:M},e,!1,!0),l=h=s=this.width}else{var L=i.lineBoxManager;"inline"!==T&&(L=this.__lineBoxManager=new nv(d,y,b,M?Dp(_):kp(_),M)),f.forEach((function(i){if(i instanceof Wy||i instanceof lh&&i.shadowRoot instanceof Wy){var a=c(i.__calBasis(t,e,r,{x:d,y:y,w:v,h:p,lineBoxManager:L},!1),3),n=a[1],o=a[2],s=i.computedStyle[mv];"block"===s||"flex"===s?(l=Math.max(l,n),h=Math.max(h,o),I=w=0):(I+=n,w+=o,l=Math.max(l,I),h=Math.max(h,w))}else I+=i.charWidth,w+=i.textWidth,l=Math.max(l,I),h=Math.max(h,w)}))}o&&(h=Math.max(o,h)),C&&(s=h)}else this.__layout({x:d,y:y,w:v,h:p,isUpright:M},e,!0,!1),l=h=s=this.height;return this.__addMBP(t,v,u,_,[s,l,h],a)}},{key:"__layoutNone",value:function(){f(o(r.prototype),"__layoutNone",this).call(this),this.children.forEach((function(t){(t instanceof Wy||t instanceof lh&&t.shadowRoot instanceof Wy)&&t.__layoutNone()}))}},{key:"__layoutBlock",value:function(t,e,r,i){var a=this,n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=s[Hv],h=s[jv],f=s[qv],c=s[$v],u=s[tp],_=this.__preLayout(t,!1),d=_.fixedWidth,y=_.fixedHeight,v=_.x,p=_.y,g=_.w,x=_.h,m=_.isParentVertical,E=_.isUpright;if(e&&(d&&!E||y&&E))E?this.__ioSize(void 0,x):this.__ioSize(g,void 0);else if(r&&y)this.__ioSize(void 0,x);else if(i&&d)this.__ioSize(g,void 0);else{f=f||0;var b,T,A=0,M=this.__lineBoxManager=new nv(v,p,c,E?Dp(s):kp(s),E),R=0,S=0,O=v,C=p,I=[],w=[],k=n.length;n.forEach((function(t,n){var o=t instanceof Wy||t instanceof lh&&t.shadowRoot instanceof Wy;o&&t.__computeReflow();var s=o&&"inline"===t.computedStyle[mv],l=o&&"inlineBlock"===t.computedStyle[mv],c=s&&t.__isRealInline(),_=A;if(!o||s||l){if(I.length&&w.length){var d=pv.getMergeMargin(w,I);d&&(E?v+=d:p+=d)}w=[],I=[]}if(o)if(l||s){if(b||T)return void t.__layoutNone();if(E&&p===C||!E&&v===O||!n||"nowrap"===h)A=t.__layout({x:v,y:p,w:g,h:x,lx:O,ly:C,lineBoxManager:M,lineClamp:f,lineClampCount:A,isUpright:E},e,r,i),t.__isIbFull&&A++,(E&&t.__isUprightIbFull||!E&&t.__isIbFull)&&"nowrap"!==h?(M.addItem(t,!0),E?(v+=t.outerWidth,p=C):(v=O,p+=t.outerHeight),M.setNotEnd()):((l||!c)&&M.addItem(t,!1),v=M.lastX,p=M.lastY),!e&&"hidden"===u&&"nowrap"===h&&(E&&p-C>x+1e-10||!E&&v-O>g+1e-10||A>_)?T=!0:f&&A>=f&&(b=!0),e&&("nowrap"===h?S+=E?t.outerHeight:t.outerWidth:(S=E?t.outerHeight:t.outerWidth,A>_&&(S=Math.max(S,E?x:g))),R=Math.max(R,S));else if(t.__tryLayInline(E?x+C-p:g+O-v,E?x:g,E)>=-1e-10)A=t.__layout({x:v,y:p,w:g,h:x,lx:O,ly:C,lineBoxManager:M,lineClamp:f,lineClampCount:A,isUpright:E},e,r,i),(l||!c)&&M.addItem(t,!1),v=M.lastX,p=M.lastY,f&&A>=f&&(b=!0),e&&(l||A===_?(S+=E?t.outerHeight:t.outerWidth,R=Math.max(R,S)):(R=Math.max(R,E?x:g),S=E?p-C:v-O,R=Math.max(R,S)));else{if(A++,E?(v=M.endX,p=C):(v=O,p=M.endY),M.setNewLine(),f&&A>=f){t.__layoutNone(),b=!0;var y=M.list,m=y[y.length-1];return void Wp(a,M,m,E?x:g,0,E)}A=t.__layout({x:v,y:p,w:g,h:x,lx:O,ly:C,lineBoxManager:M,lineClamp:f,lineClampCount:A,isUpright:E},e,r,i),t.__isIbFull||t.__isUprightIbFull?(M.addItem(t,!1),E?(v+=t.outerWidth,p=C):(v=O,p+=t.outerHeight),M.setNotEnd(),A++):((l||!c)&&M.addItem(t,!1),v=M.lastX,p=M.lastY),f&&A>=f&&(b=!0),e&&(R=Math.max(R,S),R=Math.max(R,E?x:g),S=E?t.outerHeight:t.outerWidth,R=Math.max(R,S))}}else{T=!1,(E&&p>C||!E&&v>O)&&A++,f&&A>=f&&(b=!0),E?p=C:v=O,M.isEnd&&(E?v=M.endX:p=M.endY,M.setNotEnd(),M.setNewLine()),t.__layout({x:v,y:p,w:g,h:x,isUpright:E},e,r,i);var D,L="none"===t.currentStyle[mv];if(!L&&t.flowChildren&&0===t.flowChildren.length){var F=t.computedStyle,N=F[bv],P=F[Tv],B=F[Av],H=F[Ev],G=F[Ov],Y=F[Sv],W=F[Rv],U=F[Mv],X=F[Pv],z=F[Bv],V=F[Cv],K=F[wv],j=F[Iv],$=F[kv];E&&U<=0&&Y<=0&&X<=0&&$<=0&&K<=0?(I.push(P),w.push(H),D=!0):!E&&G<=0&&W<=0&&z<=0&&V<=0&&j<=0&&(I.push(B),w.push(N),D=!0)}if(E?(v+=t.outerWidth,M.__lastX=v):(p+=t.outerHeight,M.__lastY=p),e&&(R=Math.max(R,E?t.outerHeight:t.outerWidth),S=0),L||D){if(n===k-1){var q=pv.getMergeMargin(w,I);q&&(E?v+=q:p+=q)}}else{var Z=t.computedStyle,J=Z[bv],Q=Z[Tv],tt=Z[Av],et=Z[Ev];if(I.length)if(E){w.push(et);var rt=pv.getMergeMargin(w,I);rt&&(t.__offsetX(rt,!0),v+=rt)}else{w.push(J);var it=pv.getMergeMargin(w,I);it&&(t.__offsetY(it,!0),p+=it)}w=[],I=[E?Q:tt]}}else{if(b||T)return void t.__layoutNone();if(E&&p===C||!E&&v===O||!n||"nowrap"===h)A=t.__layout({x:v,y:p,w:g,h:x,lx:O,ly:C,lineBoxManager:M,lineClamp:f,lineClampCount:A,isUpright:E}),v=M.lastX,p=M.lastY,!e&&"hidden"===u&&"nowrap"===h&&(E&&p-C>x+1e-10||!E&&v-O>g+1e-10||A>_)?T=!0:f&&A>=f&&(b=!0),e&&("nowrap"===h?S+=E?t.height:t.width:(S=E?t.height:t.width,A>_&&(S=Math.max(S,E?x:g))),R=Math.max(R,S));else if(t.__tryLayInline(E?x+C-p:g+O-v)>=-1e-10)A=t.__layout({x:v,y:p,w:g,h:x,lx:O,ly:C,lineBoxManager:M,lineClamp:f,lineClampCount:A,isUpright:E}),v=M.lastX,p=M.lastY,f&&A>=f&&(b=!0),e&&(A===_?(S+=E?t.height:t.width,R=Math.max(R,S)):(R=Math.max(R,E?x:g),S=E?p-C:v-O,R=Math.max(R,S)));else{if(A++,E?(v=M.endX,p=C):(v=O,p=M.endY),M.setNewLine(),f&&A>=f){t.__layoutNone(),b=!0;var at=M.list,nt=at[at.length-1];return void Wp(a,M,nt,E?x:g,0,E)}A=t.__layout({x:v,y:p,w:g,h:x,lx:O,ly:C,lineBoxManager:M,lineClamp:f,lineClampCount:A,isUpright:E}),v=M.lastX,p=M.lastY,f&&A>=f&&(b=!0),e&&(R=Math.max(R,S),R=Math.max(R,E?x:g),S=E?t.height:t.width,R=Math.max(R,S))}}})),M.isEnd&&(E?v=M.endX:p=M.endY);var D=0,L=0;if(D=d||!e&&!m&&!E?g:e?E?v-t.x:R:v-t.x,L=y||!e&&m&&E?x:e&&E?R:p-t.y,this.__ioSize(D,L),!e){var F=M.verticalAlign(E);if(F){E&&!d?this.__resizeX(F):E||y||this.__resizeY(F);var N=0,P=M.spreadList,B=!1,H=!1;n.forEach((function(t){if((t instanceof Wy||t instanceof lh&&t.shadowRoot instanceof Wy)&&["block","flex"].indexOf(t.computedStyle[mv])>-1){if(!H)return;B=!0,E?t.__offsetX(P[N],!0):t.__offsetY(P[N],!0)}else H=!0,B&&N++,B=!1}))}r||i||(["center","right"].indexOf(l)>-1&&(M.horizonAlign(E?L:D,l,E),n.forEach((function(t){t instanceof lh&&(t=t.shadowRoot),t instanceof Il&&t.__inlineSize(E)}))),M.domList.forEach((function(t){t.__inlineSize(E?L:D,l,E)})),this.__marginAuto(o,t,E))}}}},{key:"__layoutFlex",value:function(t,e,r,i){var a=this,n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=this.__flexLine,h=s[Gv],f=s[Vv],u=s[zv],_=s[qv],d=s[Jv],y=s[Qv],v=s[$v],p=s[Hv],g=this.__preLayout(t,!1),x=g.fixedWidth,m=g.fixedHeight,E=g.x,b=g.y,T=g.w,A=g.h,M=g.isParentVertical,R=g.isUpright;if(e&&(x&&!R||m&&R))R?this.__ioSize(void 0,A):this.__ioSize(T,void 0);else if(r&&m)this.__ioSize(void 0,A);else if(i&&x)this.__ioSize(T,void 0);else{l.splice(0),_=_||0;var S=-1===["column","columnReverse"].indexOf(h),O=[],C=[],I=[],w=[],k=[],D=Yp(n);D.forEach((function(t){if(t instanceof Wy||t instanceof lh&&t.shadowRoot instanceof Wy){var a=t.currentStyle,n=t.computedStyle,o=c(t.__calBasis(S,e,r,{x:E,y:b,w:T,h:A},!0),3),l=o[0],h=o[1],f=o[2],u=a[Uv],d=a[Wv];n[Yv]=l,O.push(u),C.push(d),I.push(l),w.push(f),k.push(h)}else if(O.push(0),C.push(1),S&&R||!S&&!R){var y=new nv(E,b,v,R?Dp(s):kp(s),R);t.__layout({x:E,y:b,w:T,h:A,lineBoxManager:y,lineClamp:_,lineClampCount:0,isUpright:R},e,r,i);var p=R?t.width:t.height;I.push(p),w.push(p),k.push(p)}else{var g=t.charWidth,x=t.textWidth;I.push(x),w.push(x),k.push(g)}}));var L=S?T:A,F=["wrap","wrapReverse"].indexOf(d)>-1,N=[],P=0,B=[];I.forEach((function(t,e){var r,i=k[e],a=w[e];r=t<i?i:t>a?a:t,B.push(r),F?P+r>L?P?(l.push(N),N=[D[e]],P=r):(N.push(D[e]),l.push(N),N=[],P=0):(N.push(D[e]),P+=r):N.push(D[e])})),N.length&&l.push(N);var H=0,G={x:E,y:b,w:T,h:A},Y=[],W=[],U=[];if(l.forEach((function(t){var n=t.length,o=H+n,l=c(a.__layoutFlexLine(G,S,e,r,i,R,L,x,m,_,0,v,s,f,u,D.slice(H,o),t,p,O.slice(H,o),C.slice(H,o),I.slice(H,o),B.slice(H,o),k.slice(H,o),w.slice(H,o)),5),h=l[0],d=l[1],y=l[2],g=l[3],T=l[4];S?G.y=d:G.x=h,E=Math.max(E,h),b=Math.max(b,d),Y.push(y),W.push(g),U.push(T),H+=n})),e){var X=0;return l.forEach((function(t){var e=0;t.forEach((function(t){S?e+=R?t.outerHeight:t.outerWidth:e=Math.max(e,R?t.outerHeight:t.outerWidth),t instanceof Il&&(R?t.textWidth>A&&(X=Math.max(X,A)):t.textWidth>T&&(X=Math.max(X,T)))})),X=Math.max(X,e)})),void(R?this.__ioSize(void 0,X):this.__ioSize(X,void 0))}var z=0,V=0;if(z=x||!e&&!M&&!R?T:E-t.x,V=m||!e&&M&&R?A:b-t.y,this.__ioSize(z,V),!r&&!i){"rowReverse"===h?l.forEach((function(e){e.forEach((function(e){var r=z-e.outerWidth-2*(e.x-t.x);r&&e.__offsetX(r,!0)}))})):"columnReverse"===h&&l.forEach((function(e){e.forEach((function(e){var r=V-e.outerHeight-2*(e.y-t.y);r&&e.__offsetY(r,!0)}))}));var K,j=l.length;if("wrapReverse"===d&&j>1){var $=0,q=[];Y.forEach((function(t){q.push($),$+=t}));for(var Z=0,J=function(t){var e=l[t],r=q[t],i=Z-r;i&&e.forEach((function(t){S?t.__offsetY(i,!0):t.__offsetX(i,!0)})),Z+=Y[t]},Q=j-1;Q>=0;Q--)J(Q);l.reverse()}if(j>1&&(m&&S||!S)){var tt=S?V-(b-t.y):z-(E-t.x);if(tt>0)if("center"===y){var et=.5*tt;D.forEach((function(t){S?t.__offsetY(et,!0):t.__offsetX(et,!0)}))}else if("flexStart"===y);else if("flexEnd"===y)D.forEach((function(t){S?t.__offsetY(tt,!0):t.__offsetX(tt,!0)}));else if("spaceBetween"===y){var rt=tt/(j-1);l.forEach((function(t,e){e&&t.forEach((function(t){S?t.__offsetY(rt,!0):t.__offsetX(rt,!0)}))}))}else if("spaceAround"===y){var it=tt/(j+1);l.forEach((function(t,e){t.forEach((function(t){S?t.__offsetY(it*(e+1),!0):t.__offsetX(it*(e+1),!0)}))}))}else K=tt/j,l.forEach((function(t,e){e&&t.forEach((function(t){S?t.__offsetY(K*e,!0):t.__offsetX(K*e,!0)}))}))}if(!r&&!i){if(j>1)l.forEach((function(t,e){var r=Y[e];K&&(r+=K),a.__flexAlign(t,u,f,S,r,W[e],U[e])}));else if(j){var at=S?V:z;this.__flexAlign(l[0],u,f,S,at,W[0],U[0])}this.__marginAuto(o,t,R)}}}}},{key:"__layoutFlexLine",value:function(t,e,r,i,a,n,o,s,l,h,f,c,u,_,d,y,v,p,g,x,m,E,b,T){var A=this,M=t.x,R=t.y,S=t.w,O=t.h,C=0;E.forEach((function(t){C+=t}));var I=C>=o,w=[];m.forEach((function(t,e){I?(!x[e]||m[e]<E[e])&&(w[e]=E[e]):(!g[e]||m[e]>E[e])&&(w[e]=E[e])}));var k=0;m.forEach((function(t,e){void 0!==w[e]?k+=w[e]:k+=t}));var D=1/0;D=e?S:l?O:k,k=Math.abs(D-k);var L=0,F=0;I?function(){for(var t=x.map((function(t,e){if(void 0===w[e])return F+=t,t}));0!==F;){F<1&&(L+=k*(1-F),k*=F);var e=void 0,r=0,i=0,a=0;if(t.forEach((function(n,o){if(n){var s=n/F*k,l=m[o]-s;l<b[o]?(w[o]=b[o],t[o]=0,e=!0,i+=m[o]-b[o]):(w[o]=l,r+=n,a+=l)}})),!e){k-=a;break}k-=i,F=r}}():function(){for(var t=g.map((function(t,e){if(void 0===w[e])return F+=t,t}));0!==F;){F<1&&(L+=k*(1-F),k*=F);var e=void 0,r=0,i=0,a=0;if(t.forEach((function(n,o){if(n){var s=n/F*k,l=m[o]+s;l<b[o]?(w[o]=b[o],t[o]=0,e=!0,i+=m[o]-b[o]):(w[o]=l,r+=n,a+=l)}})),!e){k-=a;break}k-=i,F=r}}();var N=0,P=[],B=0;return y.forEach((function(t,o){var s=w[o];if(t instanceof Wy||t instanceof lh&&t.shadowRoot instanceof Wy){if(e)t.__layout({x:M,y:R,w:s,h:O,w3:s,isUpright:n},r,i,a);else{var l,_=t.currentStyle,y=_[Xv],v=_[Pv];if(r||i||a)t.__layout({x:M,y:R,w:S,h:s,h3:s,isUpright:n},r,i,a);else(v[1]!==Tp||"stretch"===y||"auto"===y&&"stretch"===d)&&(l=!0),l?t.__layout({x:M,y:R,w:S,h:s,h3:s,isUpright:n},r,i,a):(t.__layout({x:M,y:R,w:S,h:s,h3:s,isUpright:n},!0,i,a),t.__layout({x:M,y:R,w:S,w3:t.outerWidth,h:s,h3:s,isUpright:n},r,i,a))}if(!r&&!i&&!a){var p=t.currentStyle;e?(p[Ev][1]===Tp&&B++,p[Tv][1]===Tp&&B++):(p[bv][1]===Tp&&B++,p[Av][1]===Tp&&B++)}}else{var g=A.__lineBoxManager=new nv(M,R,c,n?Dp(u):kp(u),n);P.push(g),t.__layout({x:M,y:R,w:e?s:S,h:e?O:s,lineBoxManager:g,lineClamp:h,lineClampCount:f,isUpright:n})}e?(M+=t.outerWidth,N=Math.max(N,t.outerHeight)):(R+=t.outerHeight,N=Math.max(N,t.outerWidth))})),e?R+=N:M+=N,!r&&!i&&!a&&["center","right"].indexOf(p)>-1&&P.forEach((function(t){t.horizonAlign(n?t.height:t.width,p,n)})),[M,R,N,B,I?0:Math.max(0,k+L)]}},{key:"__flexAlign",value:function(t,e,r,i,a,n,o){var s=0;t.forEach((function(t){s=Math.max(s,t.firstBaseline)}));var l=t.length;if(n)for(var h=0,f=o/n,c=0;c<l;c++){var u=t[c],_=u.currentStyle;i?(_[Ev][1]===Tp?(h+=f,u.__offsetX(h,!0)):h&&u.__offsetX(h,!0),_[Tv][1]===Tp&&(h+=f)):(_[bv][1]===Tp?(h+=f,u.__offsetY(h,!0)):h&&u.__offsetY(h,!0),_[Av][1]===Tp&&(h+=f))}else if("flexEnd"===r)for(var d=0;d<l;d++){var y=t[d];i?y.__offsetX(o,!0):y.__offsetY(o,!0)}else if("center"===r)for(var v=.5*o,p=0;p<l;p++){var g=t[p];i?g.__offsetX(v,!0):g.__offsetY(v,!0)}else if("spaceBetween"===r)for(var x=o/(l-1),m=1;m<l;m++){var E=t[m];i?E.__offsetX(x*m,!0):E.__offsetY(x*m,!0)}else if("spaceAround"===r)for(var b=.5*o/l,T=0;T<l;T++){var A=t[T];i?A.__offsetX(b*(2*T+1),!0):A.__offsetY(b*(2*T+1),!0)}else if("spaceEvenly"===r)for(var M=o/(l+1),R=0;R<l;R++){var S=t[R];i?S.__offsetX(M*(R+1),!0):S.__offsetY(M*(R+1),!0)}t.forEach((function(t){var r=t.currentStyle[Xv];if(i)if("flexStart"===r);else if("flexEnd"===r){var n=a-t.outerHeight;0!==n&&t.__offsetY(n,!0)}else if("center"===r){var o=a-t.outerHeight;0!==o&&t.__offsetY(.5*o,!0)}else if("stretch"===r){var l=t.computedStyle,h=t.currentStyle[Bv],f=l[Cv],c=l[Iv],u=l[bv],_=l[Av],d=l[Ov],y=l[Rv];if(h[1]===Tp){var v=t.height,p=(t.__height=l[Bv]=a-u-_-d-y-f-c)-v;t.__sy4+=p,t.__sy5+=p,t.__sy6+=p,t.__height+=p,t.__clientHeight+=p,t.__offsetHeight+=p,t.__outerHeight+=p}}else if("baseline"===r){var g=s-t.firstBaseline;0!==g&&t.__offsetY(g,!0)}else if("flexStart"===e);else if("center"===e){var x=a-t.outerHeight;0!==x&&t.__offsetY(.5*x,!0)}else if("flexEnd"===e){var m=a-t.outerHeight;0!==m&&t.__offsetY(m,!0)}else if("baseline"===e){var E=s-t.firstBaseline;0!==E&&t.__offsetY(E,!0)}else{var b=t.computedStyle,T=t.currentStyle,A=T[mv],M=T[Gv],R=T[Bv];i&&"flex"===A&&"column"===M&&R[1]===Tp&&t.outerHeight<a&&t.__layout(Object.assign(t.__layoutData,{h3:a}));var S=b[Cv],O=b[Iv],C=b[bv],I=b[Av],w=b[Ov],k=b[Rv];if(R[1]===Tp){var D=t.height,L=a-C-I-w-k-S-O-D;t.__sy4+=L,t.__sy5+=L,t.__sy6+=L,t.__height+=L,t.__clientHeight+=L,t.__offsetHeight+=L,t.__outerHeight+=L}}else if("flexStart"===r);else if("flexEnd"===r){var F=a-t.outerWidth;0!==F&&t.__offsetX(F,!0)}else if("center"===r){var N=a-t.outerWidth;0!==N&&t.__offsetX(.5*N,!0)}else if("stretch"===r){var P=t.computedStyle,B=t.currentStyle[Pv],H=P[wv],G=P[kv],Y=P[Tv],W=P[Ev],U=P[Sv],X=P[Mv];if(B[1]===Tp){var z=t.width,V=(t.__width=P[Pv]=a-W-Y-X-U-H-G)-z;t.__sx4+=V,t.__sx5+=V,t.__sx6+=V,t.__width+=V,t.__clientWidth+=V,t.__offsetWidth+=V,t.__outerWidth+=V}}else if("baseline"===e){var K=s-t.firstBaseline;0!==K&&t.__offsetX(K,!0)}else if("flexStart"===e);else if("center"===e){var j=a-t.outerWidth;0!==j&&t.__offsetX(.5*j,!0)}else if("flexEnd"===e){var $=a-t.outerWidth;0!==$&&t.__offsetX($,!0)}else if("baseline"===e){var q=s-t.firstBaseline;0!==q&&t.__offsetX(q,!0)}else{var Z=t.computedStyle,J=t.currentStyle[Pv],Q=Z[wv],tt=Z[kv],et=Z[Tv],rt=Z[Ev],it=Z[Sv],at=Z[Mv];if(J[1]===Tp){var nt=t.width,ot=(t.__width=Z[Pv]=a-rt-et-at-it-Q-tt)-nt;t.__sx4+=ot,t.__sx5+=ot,t.__sx6+=ot,t.__width+=ot,t.__clientWidth+=ot,t.__offsetWidth+=ot,t.__outerWidth+=ot}}}))}},{key:"__layoutInline",value:function(t,e,r,i,a){var n=this.flowChildren,o=this.currentStyle,s=this.computedStyle,l=s[Hv],h=s[jv],f=s[qv],c=s[$v],u=s[bv],_=s[Av],d=s[Ev],y=s[Tv],v=s[Cv],p=s[Iv],g=s[kv],x=s[wv],m=s[Ov],E=s[Rv],b=s[Mv],T=s[Sv],A=t.lineClampCount||0,M=this.__preLayout(t,a),R=M.fixedWidth,S=M.fixedHeight,O=M.x,C=M.y,I=M.w,w=M.h,k=M.lx,D=M.ly,L=M.lineBoxManager,F=M.endSpace,N=M.selfEndSpace,P=M.isUpright;if(e&&(R&&!P||S&&P))return P?this.__ioSize(void 0,w):this.__ioSize(I,void 0),A;var B=o[Pv],H=o[Bv];if(a&&!this.__isRealInline()&&(a=!1),!a){if(r&&S)return this.__ioSize(void 0,w),A;if(i&&R)return this.__ioSize(I,void 0),A}if(a){this.__config[fp]=!0,this.__lineBoxManager=L;var G=P?Dp(s):kp(s);(P&&(u||_||m||E||v||p)||!P&&(d||y||b||T||g||x))&&L.isNewLine?L.genLineBoxByInlineIfNewLine(O,C,c,G):L.setLbByInlineIfNotNewLine(c,G),f=t.lineClamp||0}else L=this.__lineBoxManager=new nv(O,C,c,P?Dp(s):kp(s),P),k=O,D=C,F=N=A=0;a&&(this.contentBoxList.splice(0),L.pushContentBoxList(this));for(var Y=this;"inline"===Y.computedStyle[mv];)Y=Y.domParent;var W,U,X,z=Y.computedStyle[tp],V=!1,K=!1,j=n.length,$=!1,q=!1;if(n.forEach((function(t,n){if($||q)t.__layoutNone();else{var o=t instanceof Wy||t instanceof lh&&t.shadowRoot instanceof Wy;o&&t.__computeReflow();var s=o&&"inline"===t.computedStyle[mv],l=o&&"inlineBlock"===t.computedStyle[mv],c=s&&t.__isRealInline();a&&!W&&("nowrap"===h||!o&&n===j-1||f&&n===j-1||A===f-1)&&(W=!0,F+=N);var u=A;if(o){if(s||l||(t.currentStyle[mv]=t.computedStyle[mv]="inlineBlock",l=!0,Rt.warn("Inline can not contain block/flex")),P&&C===D||!P&&O===k||!n||"nowrap"===h)A=t.__layout({x:O,y:C,w:I,h:w,lx:k,ly:D,lineBoxManager:L,endSpace:F,lineClamp:f,lineClampCount:A,isUpright:P},e,r,i),(t.__isIbFull||t.__isUprightIbFull)&&A++,t.__isIbFull&&"nowrap"!==h?(P&&w[1]===Tp?K=!0:P||I[1]!==Tp||(V=!0),L.addItem(t,!0),P?(O+=t.outerWidth,C=D):(O=k,C+=t.outerHeight),L.setNotEnd()):((l||!c)&&L.addItem(t,!1),O=L.lastX,C=L.lastY),!e&&"hidden"===z&&"nowrap"===h&&(P&&C-D>w+1e-10||!P&&O-k>I+1e-10||A>u)?q=!0:f&&A>=f&&($=!0);else if(t.__tryLayInline(P?w+D-C-F:I+k-O-F,P?w:I,P)>=-1e-10)A=t.__layout({x:O,y:C,w:I,h:w,lx:k,ly:D,lineBoxManager:L,endSpace:F,lineClamp:f,lineClampCount:A,isUpright:P},e,r,i),(l||!c)&&L.addItem(t,!1),O=L.lastX,C=L.lastY,f&&A>=f&&($=!0);else{if(A++,P?(O=L.endX,C=D):(O=k,C=L.endY),L.setNewLine(),f&&A>=f){t.__layoutNone(),$=!0;var _=L.list,d=_[_.length-1];return void Wp(Y,L,d,I,F,P)}A=t.__layout({x:O,y:C,w:I,h:w,lx:k,ly:D,lineBoxManager:L,endSpace:F,lineClamp:f,lineClampCount:A,isUpright:P},e,r,i),t.__isIbFull||t.__isUprightIbFull?(L.addItem(t,!0),P?(O+=t.outerWidth,C=D):(O=k,C+=t.outerHeight),L.setNotEnd(),A++):((l||!c)&&L.addItem(t,!1),O=L.lastX,C=L.lastY),f&&A>=f&&($=!0)}}else{var y=L.size;if(P&&C===D||!P&&O===k||!n||"nowrap"===h)A=t.__layout({x:O,y:C,w:I,h:w,lx:k,ly:D,lineBoxManager:L,endSpace:F,lineClamp:f,lineClampCount:A,isUpright:P},e,r,i),O=L.lastX,C=L.lastY,!a&&L.size-y>1&&(H[1]===Tp&&P&&(K=!0),B[1]!==Tp||P||(V=!0)),!e&&"hidden"===z&&"nowrap"===h&&(P&&C-D>w+1e-10||!P&&O-k>I+1e-10||A>u)?q=!0:f&&A>=f&&($=!0);else if(t.__tryLayInline(P?w+D-C-F:I+k-O-F)>=-1e-10)A=t.__layout({x:O,y:C,w:I,h:w,lx:k,ly:D,lineBoxManager:L,endSpace:F,lineClamp:f,lineClampCount:A,isUpright:P},e,r,i),O=L.lastX,C=L.lastY,f&&A>=f&&($=!0);else{if(A++,P?(O=L.endX,C=D):(O=k,C=L.endY),L.setNewLine(),f&&A>=f){t.__layoutNone(),$=!0;var v=L.list,p=v[v.length-1];return void Wp(Y,L,p,I,F,P)}A=t.__layout({x:O,y:C,w:I,h:w,lx:k,ly:D,lineBoxManager:L,endSpace:F,lineClamp:f,lineClampCount:A,isUpright:P},e,r,i),O=L.lastX,C=L.lastY,!a&&L.size-y>1&&(H[1]===Tp&&P&&(K=!0),B[1]!==Tp||P||(V=!0)),f&&A>=f&&($=!0)}}}})),P?O=L.endX:C=L.endY,this.__isIbFull=V,this.__isUprightIbFull=K,a){if(N&&(P?L.addY(N):L.addX(N)),!n.length){var Z=s[bv],J=s[Ev],Q=s[Ov],tt=s[Mv],et=s[Cv],rt=s[kv];P?L.addY(Z+Q+et):L.addX(J+tt+rt)}L.popContentBoxList(),e&&this.__inlineSize(0,"left",P)}else{var it=L.max-(P?t.y:t.x);P?(U=R?I:O-t.x,X=S?w:V?Math.max(w,it):it):(U=R?I:V?Math.max(I,it):it,X=S?w:C-t.y),this.__ioSize(U,X)}if(!e&&!a){var at=L.verticalAlign(P);at&&(P&&!R?this.__resizeX(at):P||S||this.__resizeY(at)),r||i||(["center","right"].indexOf(l)>-1&&(L.horizonAlign(P?X:U,l,P),n.forEach((function(t){t instanceof lh&&(t=t.shadowRoot),t instanceof Il&&t.__inlineSize(P)}))),L.domList.forEach((function(t){t.__inlineSize(P?X:U,l,P)})))}return A}},{key:"__inlineSize",value:function(t,e,r){var i=this.contentBoxList,a=this.computedStyle,n=this.__ox,o=this.__oy,s=a[mv],l=a[bv],h=a[Tv],f=a[Av],c=a[Ev],u=a[Ov],_=a[Sv],d=a[Rv],y=a[Mv],v=a[Cv],p=a[wv],g=a[Iv],x=a[kv],m=a[$v];if("none"!==s){var E,b,T,A,M,R,S,O,C,I,w,k,D,L,F,N,P=i.length;if(P)i.forEach((function(t,e){e?(T=Math.min(T,t.x),S=Math.min(S,t.x),w=Math.min(w,t.x),F=Math.min(F,t.x),e===P-1?(E=M=C=D=Math.max(E,t.x+t.outerWidth),b=R=I=L=Math.max(b,t.y+t.outerHeight),M+=_,R+=d,C+=_+p,I+=d+g,D+=p+_+h,L+=g+d+f):E=M=C=D=Math.max(E,t.x+t.outerWidth)):(T=t.x,A=t.y,F=(w=(S=T-y)-x)-c,N=(k=(O=A-u)-v)-l,E=M=C=D=t.x+t.outerWidth,b=R=I=L=t.y+t.outerHeight,e===P-1&&(M+=_,R+=d,C+=_+p,I+=d+g,D+=p+_+h,L+=g+d+f))})),this.__x=F,this.__y=N,this.__width=a[Pv]=E-T,this.__height=a[Bv]=Math.max(m,b-A),this.__clientWidth=M-S,this.__clientHeight=R-O,this.__offsetWidth=C-w,this.__offsetHeight=I-k,this.__outerWidth=D-F,this.__outerHeight=L-N,this.__sx=F+n,this.__sy=N+o,this.__sx1=w+n,this.__sy1=k+o,this.__sx2=S+n,this.__sy2=O+o,this.__sx3=T+n,this.__sy3=A+o,this.__sx4=E+n,this.__sy4=b+o,this.__sx5=M+n,this.__sy5=R+o,this.__sx6=C+n,this.__sy6=I+o,["center","right"].indexOf(e)>-1&&this.children.forEach((function(t){t instanceof Il&&t.__inlineSize(r)}));else{var B=0,H=0;if(["center","right"].indexOf(e)>-1){var G=t;"center"===e&&(G*=.5),G>0&&(r?this.__offsetY(G,!0):this.__offsetX(G,!0))}r?(B=m,this.__ioSize(B,0),this.__sx-=c+y+x):(H=m,this.__ioSize(0,H),this.__sy-=l+u+v),this.__sx1=this.__sx+c,this.__sy1=this.__sy+l,this.__sx2=this.__sx1+x,this.__sy2=this.__sy1+v,this.__sx4=this.__sx3=this.__sx2+y,this.__sy4=this.__sy3=this.__sy2+u,this.__sx5=this.__sx4+B+_,this.__sy5=this.__sy4+H+d,this.__sx6=this.__sx5+p,this.__sy6=this.__sy5+g,this.__clientWidth=this.__sx5-this.__sx2,this.__clientHeight=this.__sy5-this.__sy2,this.__offsetWidth=this.__sx6-this.__sx1,this.__offsetHeight=this.__sy6-this.__sy1,this.__outerWidth=this.__offsetWidth+c+h,this.__outerHeight=this.__offsetHeight+l+f}}}},{key:"__layoutAbs",value:function(t,e,i){var a=this,n=t.sx,o=t.sy,s=t.clientWidth,l=t.clientHeight,h=t.computedStyle,f=this.isDestroyed,c=this.children,u=this.absChildren,_=h[mv],d=h[Cv],y=h[kv],v=h[bv],p=h[Ev],g=h[Mv],x=h[Ov];f||"none"===_?this.__layoutNone():(n+=p+y,o+=v+d,u.forEach((function(t){if(i){var r=t;if(r instanceof lh&&(r=t.shadowRoot),i!==r&&i!==t)return}var h=t.currentStyle,f=t.computedStyle;if(t.isDestroyed||"none"===h[mv])t.__layoutNone();else{t.__computeReflow(),t.__mp(h,f,s);var c,u,_,d,y,v,p,m,E,b,T=h[Nv],A=h[Dv],M=h[Lv],R=h[Fv],S=h[Pv],O=h[Bv];if(T[1]!==Tp?(b=!0,f[Nv]=a.__calSize(T,s,!0)):f[Nv]="auto",M[1]!==Tp?(m=!0,f[Lv]=a.__calSize(M,s,!0)):f[Lv]="auto",A[1]!==Tp?(p=!0,f[Dv]=a.__calSize(A,l,!0)):f[Dv]="auto",R[1]!==Tp?(E=!0,f[Fv]=a.__calSize(R,l,!0)):f[Fv]="auto",b&&m?(c=n+f[Nv],_=s-f[Lv]-f[Nv]):b?(c=n+f[Nv],S[1]!==Tp&&(_=a.__calSize(S,s,!0))):m?(S[1]!==Tp?_=a.__calSize(S,s,!0):y=!0,c=n+s-f[Lv]-(_||0),c-=f[Ev],c-=f[Tv],c-=f[Mv],c-=f[Sv],c-=f[kv],c-=f[wv]):(c=n+g,S[1]!==Tp&&(_=a.__calSize(S,s,!0))),p&&E)u=o+f[Dv],d=l-f[Dv]-f[Fv];else if(p)u=o+f[Dv],O[1]!==Tp&&(d=a.__calSize(O,l,!0));else if(E)O[1]!==Tp?d=a.__calSize(O,l,!0):v=!0,u=o+l-f[Fv]-(d||0),u-=f[bv],u-=f[Av],u-=f[Ov],u-=f[Rv],u-=f[Cv],u-=f[Iv];else{u=o+x;for(var C=t.prev;C;){if(C instanceof Il||"absolute"!==C.computedStyle[xv]){u=C.y+C.outerHeight;break}C=C.prev}O[1]!==Tp&&(d=a.__calSize(O,l,!0))}var I=y?c-n:s+n-c,w=v?u-o:l+o-u;void 0===_&&(t.__layout({x:c,y:u,w:I,h:w,isUpright:e.isUpright},!0,!1),I=t.outerWidth),t.__layout({x:c,y:u,w:I,h:w,w2:_,h2:d,isUpright:e.isUpright},!1,!1),y&&t.__offsetX(-t.outerWidth,!0),v&&t.__offsetY(-t.outerHeight,!0)}})),c.forEach((function(a){if(i){var n=a;if(n instanceof lh&&(n=a.shadowRoot),i!==n&&i!==a)return}if(a instanceof r)a.__layoutAbs(wp(a)?a:t,e);else if(a instanceof lh){var o=a.shadowRoot;o instanceof r&&o.__layoutAbs(o,e)}})),this.__execAr())}},{key:"render",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s),h=this.__ellipsis;return h&&h.render(t,e,l.ctx,a,n,s),t===Bp&&(this.virtualDom.type="dom"),l}},{key:"__destroy",value:function(){this.isDestroyed||(this.children.forEach((function(t){t&&t.__destroy()})),this.__ellipsis&&this.__ellipsis.__destroy(),f(o(r.prototype),"__destroy",this).call(this))}},{key:"__emitEvent",value:function(t,e){if(e)return f(o(r.prototype),"__emitEvent",this).call(this,t,e);var i=this.isDestroyed,a=this.computedStyle,n=this.isMask;if(!(i||"none"===a[mv]||t.__stopPropagation||n)&&("hidden"!==a[tp]||this.willResponseEvent(t,!0))){var s,l=t.event.type,h=this.listener,c=this.zIndexChildren;h.hasOwnProperty(l)&&(s=h[l]);for(var u=c.length-1;u>=0;u--){var _=c[u];if((_ instanceof Wy||_ instanceof lh&&_.shadowRoot instanceof Wy)&&_.__emitEvent(t)){if(t.__stopPropagation)return;return Np(s)&&!t.__stopImmediatePropagation&&s.call(this,t),!0}}return f(o(r.prototype),"__emitEvent",this).call(this,t)}}},{key:"__deepScan",value:function(t,e){f(o(r.prototype),"__deepScan",this).call(this,t,e)||this.children.forEach((function(r){r.__deepScan(t,e)}))}},{key:"appendChild",value:function(t,e){var r=this;if(!Fp(t)&&!r.isDestroyed){var i,a=r.root,n=r.host;if(!([L.TYPE_VD,L.TYPE_GM,L.TYPE_CP].indexOf(t.$$type)>-1))throw new Error("Invalid parameter in appendChild.");t.vd&&(a.delRefreshTask(t.vd.__task),t.vd.remove()),i=L.TYPE_CP===t.$$type?Ql.initCp2(t,a,n,r):Ql.initDom(t,a,n,r),a.addRefreshTask(i.__task={__before:function(){i.__task=null,r.__json.children.push(t);var e=r.children.length;if(e){var n=r.children[e-1];n.__next=i,i.__prev=n}r.children.push(i),r.__zIndexChildren=null;var o={};o[up]=i,o[_p]=Fs.REFLOW,o[dp]=!0,o[yp]=i.__config,a.__addUpdate(i,i.__config,a,a.__config,o)},__after:function(t){Np(e)&&e.call(i,t)}})}}},{key:"prependChild",value:function(t,e){var r=this;if(!Fp(t)&&!r.isDestroyed){var i,a=r.root,n=r.host;if(!([L.TYPE_VD,L.TYPE_GM,L.TYPE_CP].indexOf(t.$$type)>-1))throw new Error("Invalid parameter in prependChild.");t.vd&&(a.delRefreshTask(t.vd.__task),t.vd.remove()),i=L.TYPE_CP===t.$$type?Ql.initCp2(t,a,n,r):Ql.initDom(t,a,n,r),a.addRefreshTask(i.__task={__before:function(){if(i.__task=null,r.__json.children.unshift(t),r.children.length){var e=r.children[0];e.__prev=i,i.__next=e}r.children.unshift(i),r.__zIndexChildren=null;var n={};n[up]=i,n[_p]=Fs.REFLOW,n[dp]=!0,n[yp]=i.__config,a.__addUpdate(i,i.__config,a,a.__config,n)},__after:function(t){Np(e)&&e.call(i,t)}})}}},{key:"insertBefore",value:function(t,e){var r=this;if(!Fp(t)&&!r.isDestroyed&&r.domParent){var i,a=r.root,n=r.domParent,o=n.hostRoot;if(!([L.TYPE_VD,L.TYPE_GM,L.TYPE_CP].indexOf(t.$$type)>-1))throw new Error("Invalid parameter in insertBefore.");t.vd&&(a.delRefreshTask(t.vd.__task),t.vd.remove()),i=L.TYPE_CP===t.$$type?Ql.initCp2(t,a,o,n):Ql.initDom(t,a,o,n),a.addRefreshTask(i.__task={__before:function(){i.__task=null;for(var e,o=0,s=n.__json.children,l=s.length,h=r.isShadowRoot?r.hostRoot.__json:r.__json;o<l;o++)if(s[o]===h){e=!0;break}if(!e)throw new Error("InsertBefore exception.");if(o)s.splice(o,0,t),i.__next=r,i.__prev=r.__prev,r.__prev=i,n.children.splice(o,0,i);else{if(l){var f=n.children[0];f.__prev=i,i.__next=f}s.unshift(t),n.children.unshift(i)}n.__zIndexChildren=null;var c={};c[up]=i,c[_p]=Fs.REFLOW,c[dp]=!0,c[yp]=i.__config,a.__addUpdate(i,i.__config,a,a.__config,c)},__after:function(t){Np(e)&&e.call(i,t)}})}}},{key:"insertAfter",value:function(t,e){var r=this;if(!Fp(t)&&!r.isDestroyed&&r.domParent){var i,a=r.root,n=r.domParent,o=n.hostRoot;if(!([L.TYPE_VD,L.TYPE_GM,L.TYPE_CP].indexOf(t.$$type)>-1))throw new Error("Invalid parameter in insertAfter.");t.vd&&(a.delRefreshTask(t.vd.__task),t.vd.remove()),i=L.TYPE_CP===t.$$type?Ql.initCp2(t,a,o,n):Ql.initDom(t,a,o,n),a.addRefreshTask(i.__task={__before:function(){i.__task=null;for(var e,o=0,s=n.__json.children,l=s.length,h=r.isShadowRoot?r.hostRoot.__json:r.__json;o<l;o++)if(s[o]===h){e=!0;break}if(!e)throw new Error("insertAfter exception.");if(o<l-1)s.splice(o+1,0,t),i.__prev=r,i.__next=r.__next,r.__next=i,n.children.splice(o+1,0,i);else{if(l){var f=n.children[l-1];f.__next=i,i.__prev=f}s.push(t),n.children.push(i)}n.__zIndexChildren=null;var c={};c[up]=i,c[_p]=Fs.REFLOW,c[dp]=!0,c[yp]=i.__config,a.__addUpdate(i,i.__config,a,a.__config,c)},__after:function(t){Np(e)&&e.call(i,t)}})}}},{key:"removeChild",value:function(t,e){if(t.parent===this&&(t instanceof Wy||t instanceof lh)){if(this.isDestroyed)return Rt.warn("Remove parent is destroyed."),void(Np(e)&&e());t.remove(e)}else Rt.error("Invalid parameter in removeChild.")}},{key:"children",get:function(){return this.__children}},{key:"flowChildren",get:function(){return this.children.filter((function(t){return t instanceof lh&&(t=t.shadowRoot),t instanceof Il||"absolute"!==t.currentStyle[xv]}))}},{key:"absChildren",get:function(){return this.children.filter((function(t){return t instanceof lh&&(t=t.shadowRoot),t instanceof Wy&&"absolute"===t.currentStyle[xv]}))}},{key:"zIndexChildren",get:function(){return this.__zIndexChildren}},{key:"lineBoxManager",get:function(){return this.__lineBoxManager}},{key:"baseline",get:function(){var t=this.computedStyle,e=t[bv],r=t[Cv],i=t[Ov],a=t[ap];return this.lineBoxManager&&this.lineBoxManager.size&&0!==a.indexOf("vertical")?e+r+i+this.lineBoxManager.baseline:this.offsetHeight}},{key:"firstBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return this.offsetHeight;var t=this.computedStyle;return t[bv]+t[Cv]+t[Ov]+this.lineBoxManager.firstBaseline}},{key:"verticalBaseline",get:function(){if(!this.lineBoxManager||!this.lineBoxManager.size)return 0;var t=this.computedStyle,e=t[Ev],r=t[kv],i=t[Mv],a=t[ap];return this.lineBoxManager&&this.lineBoxManager.size&&-1!==a.indexOf("vertical")?e+r+i+this.lineBoxManager.verticalBaseline:0}}]),r}(Wy),Xp=b.STYLE_KEY,zp=Xp.WIDTH,Vp=Xp.HEIGHT,Kp=Xp.DISPLAY,jp=Xp.BORDER_TOP_WIDTH,$p=Xp.BORDER_RIGHT_WIDTH,qp=Xp.BORDER_LEFT_WIDTH,Zp=Xp.BORDER_BOTTOM_WIDTH,Jp=Xp.BORDER_TOP_LEFT_RADIUS,Qp=Xp.BORDER_TOP_RIGHT_RADIUS,tg=Xp.BORDER_BOTTOM_RIGHT_RADIUS,eg=Xp.BORDER_BOTTOM_LEFT_RADIUS,rg=Xp.VISIBILITY,ig=Xp.BACKGROUND_IMAGE,ag=Xp.BACKGROUND_COLOR,ng=Xp.BOX_SHADOW,og=Xp.MIX_BLEND_MODE,sg=Xp.MARGIN_RIGHT,lg=Xp.MARGIN_LEFT,hg=Xp.PADDING_RIGHT,fg=Xp.PADDING_LEFT,cg=Xp.FONT_SIZE,ug=Xp.FLEX_BASIS,_g=b.UPDATE_KEY,dg=_g.UPDATE_NODE,yg=_g.UPDATE_FOCUS,vg=_g.UPDATE_CONFIG,pg=b.NODE_KEY,gg=pg.NODE_CACHE,xg=pg.NODE_DEFS_CACHE,mg=pg.NODE_IS_MASK,Eg=D.AUTO,bg=D.PX,Tg=D.PERCENT,Ag=D.REM,Mg=D.VW,Rg=D.VH,Sg=D.VMAX,Og=D.VMIN,Cg=D.RGBA,Ig=ne.canvasPolygon,wg=ne.svgPolygon,kg=it.isFunction,Dg=function(t){function r(i,a){var n;e(this,r);var o=(n=t.call(this,i,a)||this).props.src,s=n.__loadImg={src:o};if(o){var h=Rt.IMG[o];h&&h.state===Rt.LOADED&&(s.source=h.source,s.width=h.width,s.height=h.height)}else s.error=!0;if(n.__config[mg]){var f=l(n),c=f.style,u=f.currentStyle;c[ig]=u[ig]=[null],c[ag]=u[ag]=[[0,0,0,0],Cg],c[jp]=u[jp]=[0,bg],c[$p]=u[$p]=[0,bg],c[qp]=u[qp]=[0,bg],c[Zp]=u[Zp]=[0,bg],c[ng]=u[ng]=null,c[og]=u[og]="normal"}return n}return n(r,t),i(r,[{key:"__preLayout",value:function(t,e){var i=f(o(r.prototype),"__preLayout",this).call(this,t,!1),a=this.__loadImg;if(!a.error){var n=a.src,s=Rt.IMG[n];s&&s.state===Rt.LOADED&&(a.source=s.source,a.width=s.width,a.height=s.height),a.cache=!1}return i.fixedWidth&&i.fixedHeight||(a.error&&!this.props.placeholder?i.fixedWidth?i.h=i.w:i.fixedHeight?i.w=i.h:i.w=i.h=32:a.source?i.fixedWidth?i.h=i.w*a.height/a.width:i.fixedHeight?i.w=i.h*a.width/a.height:(i.w=a.width,i.h=a.height):i.w=i.h=0,i.fixedWidth=!0,i.fixedHeight=!0),i}},{key:"__addGeom",value:function(t,e){e=it.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"__destroy",value:function(){this.root.delRefreshTask(this.__task),f(o(r.prototype),"__destroy",this).call(this),this.__task=null}},{key:"__calContent",value:function(t,e,i,a){var n=f(o(r.prototype),"__calContent",this).call(this,t,e,i,a);if(!n){var s=this.__loadImg;"hidden"!==a[rg]&&(a[zp]||a[Vp])&&s.source&&(n=!0)}return n}},{key:"render",value:function(t,e,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);t===k.WEBGL&&(n=l.dx,s=l.dy);var h=l.offscreenBlend,c=l.offscreenMask,u=l.offscreenFilter,_=l.offscreenOverflow,d=this.width,y=this.height,v=this.isDestroyed,p=this.props.placeholder,g=this.computedStyle,x=this.computedStyle,m=x[Kp],E=x[Jp],b=x[Qp],T=x[tg],A=x[eg],M=x[rg],R=this.virtualDom,S=this.__config,O=this.__loadImg,C=this.root;if(h&&(i=h.target.ctx),c&&(i=c.target.ctx),u&&(i=u.target.ctx),_&&(i=_.target.ctx),O.source||O.error||O.loading||this.__loadAndRefresh(O,C,i,p,g,d,y),v||"none"===m||"hidden"===M)return l;var I,w,D=S[gg];a&&D&&D.enabled&&(i=D.ctx),I=l.x3+n,w=l.y3+s;var L=O.source;if(O.error&&!p&&r.showError){var F=.02*Math.min(d,y),N="#CCC",B="#DDD",H=I+.7*d,G=w+.3*y,Y=5*F,W=[[I+.15*d,w+.7*y],[I+.3*d,w+.4*y],[I+.5*d,w+.6*y],[I+.6*d,w+.5*y],[I+.9*d,w+.8*y],[I+.15*d,w+.8*y]];if(t===k.CANVAS||t===k.WEBGL){i.strokeStyle=N,i.lineWidth=F,i.fillStyle=B,i.beginPath(),i.moveTo(I,w),i.lineTo(I+d,w),i.lineTo(I+d,w+y),i.lineTo(I,w+y),i.lineTo(I,w),i.stroke(),i.closePath(),i.beginPath();var U=ee.ellipsePoints(H,G,Y,Y);ne.canvasPolygon(i,U,0,0),i.fill(),i.closePath(),i.beginPath(),i.moveTo(W[0][0],W[0][1]);for(var X=1,z=W.length;X<z;X++){var V=W[X];i.lineTo(V[0],V[1])}i.lineTo(W[0][0],W[0][1]),i.fill(),i.closePath()}else if(t===k.SVG){this.__addGeom("rect",[["x",I],["y",w],["width",d],["height",y],["stroke",N],["stroke-width",F],["fill","rgba(0,0,0,0)"]]),this.__addGeom("circle",[["cx",H],["cy",G],["r",Y],["fill",B]]);for(var K="",j=0,$=W.length;j<$;j++){var q=W[j];j&&(K+=" "),K+=q[0]+","+q[1]}this.__addGeom("polygon",[["points",K],["fill",B]])}}else if(L){var Z=Xe.calRadius(I,w,d,y,E,b,T,A);if(t===k.CANVAS||t===k.WEBGL)Z?(i.save(),i.beginPath(),Ig(i,Z,n,s),i.clip(),i.closePath(),i.drawImage(L,I,w,d,y),i.restore()):i.drawImage(L,I,w,d,y);else if(t===k.SVG){if(O.cache){if(O.cache.cache=!0,R.children=[O.cache],!R.cache&&Z){var J=wg(Z),Q={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",J],["fill","#FFF"]]}]},tt=i.add(Q);S[xg].push(Q),R.conClip="url(#"+tt+")"}return}var et;d===O.width&&y===O.height||(et=Sh.matrixResize(O.width,O.height,d,y,I,w,d,y));var rt=[["xlink:href",O.error?p:O.src],["x",I],["y",w],["width",O.width],["height",O.height]];if(Z){var at=wg(Z),nt={tagName:"clipPath",props:[],children:[{type:"item",tagName:"path",props:[["d",at],["fill","#FFF"]]}]},ot=i.add(nt);S[xg].push(nt),R.conClip="url(#"+ot+")",delete R.cache}et&&!P.isE(et)&&rt.push(["transform","matrix("+it.joinArr(P.m2m6(et),",")+")"]);var st={type:"img",tagName:"image",props:rt};R.children=[st],O.cache=st}}return l}},{key:"__releaseWhenEmpty",value:function(t){if(!this.__loadImg.error&&!this.__loadImg.source)return f(o(r.prototype),"__releaseWhenEmpty",this).call(this,t)}},{key:"__isRealInline",value:function(){return!1}},{key:"__tryLayInline",value:function(t,e){var r=this.currentStyle,i=r[zp],a=r[Vp],n=r[lg],o=r[sg],s=r[fg],l=r[hg],h=this.computedStyle,f=h[qp],c=h[$p];if(i[1]!==Eg)t-=this.__calSize(i,e,!0);else{var u=this.__loadImg;u.source&&(a[1]===bg?t-=u.width*a[0]/u.height:a[1]===Tg?t-=u.width*a[0]*e*.01/u.height:a[1]===Ag?t-=u.width*a[0]*this.root.computedStyle[cg]/u.height:a[1]===Mg?t-=u.width*a[0]*this.root.width*.01/u.height:a[1]===Rg?t-=u.width*a[0]*this.root.height*.01/u.height:a[1]===Sg?t-=a[0]*Math.max(this.root.width,this.root.height)*.01/u.height:a[1]===Og?t-=a[0]*Math.min(this.root.width,this.root.height)*.01/u.height:t-=u.width)}return t-=this.__calSize(o,e,!0),t-=this.__calSize(l,e,!0),t-=c,t-=this.__calSize(n,e,!0),t-=this.__calSize(s,e,!0),t-=f}},{key:"__calBasis",value:function(t,e,r,i,a){this.__computeReflow();var n=0,o=0,s=0,l=this.currentStyle,h=this.computedStyle,f=this.__loadImg,c=i.w,u=i.h,_=l[ug],d=l[zp],y=l[Vp],v=t?d:y,p=t?y:d;if([bg,Tg,Ag,Mg,Rg,Sg,Og].indexOf(_[1])>-1)n=s=o=this.__calSize(_,t?c:u,!0);else if([bg,Tg,Ag,Mg,Rg,Sg,Og].indexOf(v[1])>-1)n=s=o=this.__calSize(v,t?c:u,!0);else if(f.source||f.error){var g=this.__preLayout(i);if(p[1]!==Eg){p=this.__calSize(p,t?u:c,!0);var x=g.w/g.h;n=s=o=t?p*x:p/x}else n=s=o=t?g.w:g.h}return this.__addMBP(t,c,l,h,[n,o,s],a)}},{key:"__loadAndRefresh",value:function(t,e,r,i,a,n,o,s){var l=this;(t.source||t.error)&&(e.delRefreshTask(l.__task),e.addRefreshTask(l.__task={__before:function(){if(l.__task=null,!l.isDestroyed){var t={};t[dg]=l,t[yg]=Fs.REFLOW,t[vg]=l.__config,e.__addUpdate(l,l.__config,e,e.__config,t)}}}),t.source=null),t.loading=!0,Rt.measureImg(t.src,(function(h){if(h.url===t.src&&!l.isDestroyed){var f=function(){var t=l.currentStyle,r=t[zp],i=t[Vp];e.delRefreshTask(l.__task),r[1]!==Eg&&i[1]!==Eg?e.addRefreshTask(l.__task={__before:function(){if(l.__task=null,!l.isDestroyed){var t={};t[dg]=l,t[yg]=Fs.REPAINT,t[vg]=l.__config,e.__addUpdate(l,l.__config,e,e.__config,t)}},__after:function(){kg(s)&&s.call(l)}}):e.addRefreshTask(l.__task={__before:function(){if(l.__task=null,!l.isDestroyed){var t={};t[dg]=l,t[yg]=Fs.REFLOW,t[vg]=l.__config,e.__addUpdate(l,l.__config,e,e.__config,t)}},__after:function(){kg(s)&&s.call(l)}})};if(t.cache&&(t.cache.cache=!1),t.loading=!1,h.success)t.source=h.source,t.width=h.width,t.height=h.height;else{if(i)return void Rt.measureImg(i,(function(e){e.success&&(t.error=!0,t.source=e.source,t.width=e.width,t.height=e.height,f())}),{ctx:r,root:e,width:n,height:o});t.error=!0}"none"!==a[Kp]&&f()}}),{ctx:r,root:e,width:n,height:o})}},{key:"updateSrc",value:function(t,e){var r=this,i=r.__loadImg,a=this.root;t===i.src||!t&&i.error?kg(e)&&e(-1):t?(i.src=t,r.__loadAndRefresh(i,a,a.ctx,r.props.placeholder,r.computedStyle,r.width,r.height,e)):(i.src=t,i.source=null,i.error=!0,a.delRefreshTask(r.__task),a.addRefreshTask(r.__task={__before:function(){if(r.__task=null,!r.isDestroyed){var t={};t[dg]=r,t[yg]=Fs.REFLOW,t[vg]=r.__config,a.__addUpdate(r,r.__config,a,r.__config,t)}},__after:function(t){kg(e)&&e(t)}}))}},{key:"appendChild",value:function(){Rt.error("Img can not appendChild.")}},{key:"src",get:function(){return this.__loadImg.src}},{key:"isReplaced",get:function(){return!0}}]),r}(Up);a(Dg,"showError",!0);var Lg=function(){function t(r){e(this,t),this.id=r,this.count=0,this.list=[],this.cacheHash={}}return i(t,[{key:"add",value:function(t){for(var e=this.count,r=this.cacheHash;r.hasOwnProperty(e);)e++;return this.count=e+1,t.id=e,t.uuid="karas-defs-"+this.id+"-"+e,t.index=this.list.length,this.list.push(t),t.uuid}},{key:"addCache",value:function(t){return t.index=this.list.length,this.list.push(t),this.cacheHash[t.id]=!0,t.uuid}},{key:"clear",value:function(){this.list=[],this.count=0,this.cacheHash={}}},{key:"removeCache",value:function(t){for(var e=this.list,r=t.index;r>=0;r--)if(e[r]===t)return void e.splice(r,1)}},{key:"value",get:function(){return this.list}}],[{key:"getInstance",value:function(e){return new t(e)}}]),t}(),Fg=b.STYLE_KEY,Ng=Fg.MARGIN_RIGHT,Pg=Fg.MARGIN_LEFT,Bg=Fg.PADDING_RIGHT,Hg=Fg.PADDING_LEFT,Gg=Fg.WIDTH,Yg=Fg.HEIGHT,Wg=Fg.BORDER_RIGHT_WIDTH,Ug=Fg.BORDER_LEFT_WIDTH,Xg=Fg.FILL,zg=Fg.STROKE,Vg=Fg.STROKE_MITERLIMIT,Kg=Fg.STROKE_WIDTH,jg=Fg.STROKE_LINECAP,$g=Fg.STROKE_LINEJOIN,qg=Fg.STROKE_DASHARRAY,Zg=Fg.STROKE_DASHARRAY_STR,Jg=Fg.FILL_RULE,Qg=Fg.VISIBILITY,tx=Fg.FLEX_BASIS,ex=b.NODE_KEY,rx=ex.NODE_CACHE_PROPS,ix=ex.NODE_CURRENT_PROPS,ax=ex.NODE_CURRENT_STYLE,nx=ex.NODE_STYLE,ox=ex.NODE_DEFS_CACHE,sx=D.AUTO,lx=D.PX,hx=D.PERCENT,fx=D.REM,cx=D.VW,ux=D.VH,_x=D.VMAX,dx=D.VMIN,yx=D.RGBA,vx=D.GRADIENT,px=it.int2rgba,gx=it.isNil,xx=it.joinArr,mx=ne.canvasPolygon,Ex=ne.svgPolygon,bx={},Tx=function(t){function r(i,a){var n;e(this,r),(n=t.call(this,i,a)||this).__isMulti=!!n.props.multi,n.__style=Ha.normalize(n.style,Bt.DOM_ENTRY_SET.concat(Bt.GEOM_ENTRY_SET)),n.__currentStyle=it.extend({},n.__style),n.__currentProps=it.clone(n.props);var o=n.__config;return o[rx]=n.__cacheProps={},o[ix]=n.__currentProps,o[ax]=n.__currentStyle,o[nx]=n.__style,n}return n(r,t),i(r,[{key:"__tryLayInline",value:function(t,e){this.__computeReflow();var r=this.currentStyle,i=r[Gg],a=r[Pg],n=r[Ng],o=r[Hg],s=r[Bg],l=this.computedStyle,h=l[Ug],f=l[Wg];return i[1]!==sx&&(t-=this.__calSize(i,e,!0)),t-=this.__calSize(n,e,!0),t-=this.__calSize(s,e,!0),t-=f,t-=this.__calSize(a,e,!0),t-=this.__calSize(o,e,!0),t-=h}},{key:"__calBasis",value:function(t,e,r,i,a){this.__computeReflow();var n=0,o=0,s=0,l=this.currentStyle,h=this.computedStyle,f=i.w,c=i.h,u=l[tx],_=l[Gg],d=l[Yg],y=t?_:d;return[lx,hx,fx,cx,ux,_x,dx].indexOf(u[1])>-1?n=s=o=this.__calSize(u,t?f:c,!0):[lx,hx,fx,cx,ux,_x,dx].indexOf(y[1])>-1&&(n=s=o=this.__calSize(y,t?f:c,!0)),this.__addMBP(t,f,l,h,[n,o,s],a)}},{key:"__layoutBlock",value:function(t,e,r,i){var a=this.__preLayout(t,!1),n=a.fixedWidth,o=a.fixedHeight,s=a.w,l=a.h,h=a.isParentVertical,f=a.isUpright,c=0,u=0;!n&&(e||h||f)||(c=s),(o||!e&&h&&f)&&(u=l),this.__ioSize(c,u),e||r||i||(this.__marginAuto(this.currentStyle,t),this.__config[rx]=this.__cacheProps={})}},{key:"__layoutFlex",value:function(t,e,r,i){this.__layoutBlock(t,e,r,i)}},{key:"__layoutInline",value:function(t,e,r){var i=this.__preLayout(t,!1),a=i.fixedWidth,n=i.fixedHeight,o=i.w,s=i.h,l=a?o:0,h=n?s:0;this.__ioSize(l,h),this.__config[rx]=this.__cacheProps={}}},{key:"__calCache",value:function(t,e,i,a,n,s,l,h,c,u,_,d,y,v,p,g,x,m,E,b,T,A,M,R,S,O,C,I,w,k){var D=this,L=f(o(r.prototype),"__calCache",this).call(this,t,e,i,a,n,s,l,h,c,u,_,d,y,v,p,g,x,m,E,b,T,A,M,R,S,O,C,I,w,k);if(gx(a[Kg])){a[Kg]=!0;var F=n[Kg]||[],N=this.width;s[Kg]=F.map((function(t){return D.__calSize(t,N,!0)}))}return gx(a[qg])&&(a[qg]=!0,s[qg]=n[qg]||[],a[Zg]=s[qg].map((function(t){return xx(t,",")}))),[jg,$g,Vg,Jg].forEach((function(t){s[t]=n[t]})),[Xg,zg].forEach((function(t){if(gx(a[t])){var e=n[t],r=s[t]=[],i=a[t]=[];Array.isArray(e)&&e.forEach((function(t){t&&t[1]===vx?(r.push(t[0]),i.push(!0)):t&&t[1]===yx&&t[0][3]>0?(r.push(t[0]),i.push(px(t[0]))):(r.push("none"),i.push("none"))}))}})),L}},{key:"__calContent",value:function(t,e,r,i){return"hidden"!==i[Qg]}},{key:"__preSet",value:function(t,e){var r=this,i=this.width,a=this.height,n=this.__cacheStyle,o=this.computedStyle,s=e.sx3+.5*i,l=e.sy3+.5*a,h=n[Zg],f=o[Xg],c=o[zg],u=o[Kg],_=o[jg],d=o[$g],y=o[Vg],v=o[qg],p=o[Jg];return{cx:s,cy:l,stroke:c=c.map((function(i){return i.k?r.__gradient(t,e.ctx,e.x3,e.y3,e.x4,e.y4,i,e.dx,e.dy):px(i)})),strokeWidth:u,strokeDasharray:v,strokeDasharrayStr:h,strokeLinecap:_,strokeLinejoin:d,strokeMiterlimit:y,fill:f=f.map((function(i){return i.k?r.__gradient(t,e.ctx,e.x3,e.y3,e.x4,e.y4,i,e.dx,e.dy):px(i)})),fillRule:p}}},{key:"__preSetCanvas",value:function(t,e,r){var i=r.stroke,a=r.strokeWidth,n=r.strokeDasharray,o=r.strokeLinecap,s=r.strokeLinejoin,l=r.strokeMiterlimit,h=r.fill;t!==k.CANVAS&&t!==k.WEBGL||(h&&("linear"===h.k?e.fillStyle=h.v:"radial"!==h.k||Array.isArray(h.v)?"conic"===h.k||h.k||e.fillStyle===h||(e.fillStyle=h):e.fillStyle=h.v),i&&("linear"===i.k?e.strokeStyle=i.v:"radial"!==i.k||Array.isArray(i.v)?"conic"===i.k||i.k||e.strokeStyle===i||(e.strokeStyle=i):e.strokeStyle=i.v),void 0!==a&&e.lineWidth!==a&&(e.lineWidth=a),void 0!==o&&e.lineCap!==o&&(e.lineCap=o),void 0!==s&&e.lineJoin!==s&&(e.lineJoin=s),void 0!==l&&e.miterLimit!==l&&(e.miterLimit=l),it.isFunction(e.getLineDash)?n&&!it.equalArr(e.getLineDash(),n)&&e.setLineDash(n):n&&e.setLineDash(n))}},{key:"render",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);if(t===k.SVG&&(this.virtualDom.type="geom"),l.break)return l;var h=this.__preSet(t,l);return Object.assign(l,h)}},{key:"__renderPolygon",value:function(t,e,r){var i=r.fill,a=r.fillRule,n=r.stroke,o=r.strokeWidth,s=r.strokeDasharray,l=r.strokeDasharrayStr,h=r.strokeLinecap,f=r.strokeLinejoin,c=r.strokeMiterlimit,u=r.dx,_=r.dy,d=this.__cacheProps.list,y=this.isMulti,v=this.bbox;if(i.length<=1&&n.length<=1){var p={fill:i[0],fillRule:a[0],stroke:n[0],strokeWidth:o[0],strokeDasharray:s[0],strokeDasharrayStr:l[0],strokeLinecap:h[0],strokeLinejoin:f[0],strokeMiterlimit:c[0],dx:u,dy:_,bbox:v};this.__renderOnePolygon(t,e,y,d,p)}else{for(var g=0,x=i.length;g<x;g++){var m=i[g];if(m){var E={fill:m,fillRule:a[g],dx:u,dy:_,bbox:v};this.__renderOnePolygon(t,e,y,d,E)}}for(var b=0,T=n.length;b<T;b++){var A=n[b];if(A){var M={stroke:A,strokeWidth:o[b],strokeDasharray:s[b],strokeDasharrayStr:l[b],strokeLinecap:h[b],strokeLinejoin:f[b],strokeMiterlimit:c[b],dx:u,dy:_,bbox:v};this.__renderOnePolygon(t,e,y,d,M)}}}}},{key:"__renderOnePolygon",value:function(t,e,r,i,a){var n=a.fill,o=a.stroke,s=a.strokeWidth,l=n&&"conic"===n.k,h=o&&"conic"===o.k,f=n&&"radial"===n.k&&Array.isArray(n.v),c=s&&s>0&&o&&"radial"===o.k&&Array.isArray(o.v);l||h?(l?this.__conicGradient(t,e,i,r,a):"none"!==n&&this.__drawPolygon(t,e,r,i,a,!0),s&&s>0&&h?Rt.warn("Stroke style can not use conic-gradient"):s&&s>0&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!1,!0)):f||c?(f?this.__radialEllipse(t,e,i,r,a,"fill"):"none"!==n&&this.__drawPolygon(t,e,r,i,a,!0),s&&s>0&&c?(Rt.warn("Stroke style can not use radial-gradient for ellipse"),a.stroke.v=a.stroke.v[0],this.__drawPolygon(t,e,r,i,a,!1,!0)):s&&s>0&&"none"!==o&&this.__drawPolygon(t,e,r,i,a,!1,!0)):this.__drawPolygon(t,e,r,i,a,!0,!0)}},{key:"__drawPolygon",value:function(t,e,r,i,a,n,o){var s=a.fill,l=a.stroke,h=a.strokeWidth,f=a.fillRule,c=a.strokeDasharrayStr,u=a.strokeLinecap,_=a.strokeLinejoin,d=a.strokeMiterlimit,y=a.dx,v=a.dy;if(t===k.CANVAS||t===k.WEBGL)this.__preSetCanvas(t,e,a),e.beginPath(),r?i.forEach((function(t){return mx(e,t,y,v)})):mx(e,i,y,v),n&&s&&"none"!==s&&e.fill(f),o&&l&&"none"!==l&&h&&h>0&&e.stroke(),e.closePath();else if(t===k.SVG){var p="";r?i.forEach((function(t){return p+=Ex(t)})):p=Ex(i);var g=[["d",p]];if(!(s&&"none"!==s||l&&"none"!==l))return;n&&s&&"none"!==s?(g.push(["fill",s.v||s]),f&&"nonzero"!==f&&g.push(["fill-rule",f])):g.push(["fill","none"]),o&&l&&"none"!==l&&h&&h>0?(g.push(["stroke",l.v||l]),g.push(["stroke-width",h]),this.__propsStrokeStyle(g,c,u,_,d)):g.push(["stroke-width",0]),this.addGeom("path",g)}}},{key:"__inversePtList",value:function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return e?t.map((function(t){return t&&t.length?t.map((function(t){if(!t||!t.length)return null;for(var e=[],n=0,o=t.length;n<o;n+=2){var s=P.calPoint([t[n]+i,t[n+1]+a],r);e.push(s[0]),e.push(s[1])}return e})):null})):t.map((function(t){if(!t||!t.length)return null;for(var e=[],n=0,o=t.length;n<o;n+=2){var s=P.calPoint([t[n]+i,t[n+1]+a],r);e.push(s[0]),e.push(s[1])}return e}))}},{key:"__radialEllipse",value:function(t,e,r,i,a,n){var o=a.strokeWidth,s=a.strokeDasharrayStr,l=a.strokeLinecap,h=a.strokeLinejoin,f=a.strokeMiterlimit,u=a.dx,_=a.dy,d=c(a[n].v,4),y=d[0],v=d[1],p=[d[2],d[3]];v=wo.calMatrixByOrigin(v,p);var g=P.inverse(v);if(r=this.__inversePtList(r,i,g,u,_),t===k.CANVAS||t===k.WEBGL){if(v){if(e.save(),t===k.CANVAS){var x=this.matrixEvent;v=P.multiply(x,v)}e.setTransform(v[0],v[1],v[4],v[5],v[12],v[13])}e.beginPath(),e[n+"Style"]!==y&&(e[n+"Style"]=y),i?r.forEach((function(t){return ne.canvasPolygon(e,t)})):mx(e,r),e[n](),e.closePath(),v&&e.restore()}else if(t===k.SVG){var m="";i?r.forEach((function(t){return m+=Ex(t)})):m=Ex(r);var E=[["d",m]];"fill"===n?(E.push(["fill",y]),E.push(["strokeWidth",0])):"stroke"===n&&(E.push(["fill","none"]),E.push(["stroke",y]),E.push(["stroke-width",o]),this.__propsStrokeStyle(E,s,l,h,f)),E.push(["transform","matrix(".concat(xx(P.m2m6(v),","),")")]),this.addGeom("path",E)}}},{key:"__conicGradient",value:function(t,e,r,i,a){var n=this,o=a.fill,s=a.bbox,l=a.dx,h=void 0===l?0:l,f=a.dy,u=void 0===f?0:f,_=o.v;if(t===k.CANVAS||t===k.WEBGL){var d=c(s,4),y=d[0],v=d[1],p=d[2],g=d[3],x=p-y,m=g-v,E=Rt.getCacheCanvas(x,m,"__$$CONIC_GRADIENT$$__"),b=E.ctx.getImageData(0,0,x,m);re.getConicGradientImage(.5*x,.5*m,x,m,o.v.stop,b.data),E.ctx.putImageData(b,0,0),i?r.forEach((function(t){e.save(),e.beginPath(),mx(e,t,h,u),e.clip(),e.closePath(),e.drawImage(E.canvas,y+h,v+u),e.restore()})):(e.save(),e.beginPath(),mx(e,r,h,u),e.clip(),e.closePath(),e.drawImage(E.canvas,y+h,v+u),e.restore()),E.ctx.clearRect(0,0,x,m)}else if(t===k.SVG)if(i)r.forEach((function(t){var r={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ex(t)]]}]},i=e.add(r);n.__config[ox].push(r),_.forEach((function(t){n.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ex(t[0])],["fill",t[1]],["clip-path","url(#"+i+")"]]})}))}));else{var T={tagName:"clipPath",children:[{tagName:"path",props:[["d",Ex(r)]]}]},A=e.add(T);this.__config[ox].push(T),_.forEach((function(t){n.virtualDom.bb.push({type:"item",tagName:"path",props:[["d",Ex(t[0])],["fill",t[1]],["clip-path","url(#"+A+")"]]})}))}}},{key:"__propsStrokeStyle",value:function(t,e,r,i,a){e&&t.push(["stroke-dasharray",e]),r&&"butt"!==r&&t.push(["stroke-linecap",r]),i&&"miter"!==i&&t.push(["stroke-linejoin",i]),a&&4!==a&&t.push(["stroke-miterlimit",a])}},{key:"__releaseWhenEmpty",value:function(t,e){return"hidden"===e[Qg]}},{key:"__offsetX",value:function(t,e,i){f(o(r.prototype),"__offsetX",this).call(this,t,e,i),this.__config[rx]=this.__cacheProps={}}},{key:"__offsetY",value:function(t,e,i){f(o(r.prototype),"__offsetY",this).call(this,t,e,i),this.__config[rx]=this.__cacheProps={}}},{key:"__resizeX",value:function(t,e){f(o(r.prototype),"__resizeX",this).call(this,t,e),this.__config[rx]=this.__cacheProps={}}},{key:"__resizeY",value:function(t,e){f(o(r.prototype),"__resizeY",this).call(this,t,e),this.__config[rx]=this.__cacheProps={}}},{key:"addGeom",value:function(t,e){e=it.hash2arr(e),this.virtualDom.children.push({type:"item",tagName:t,props:e})}},{key:"getProps",value:function(t){var e=this.currentProps[t];return gx(e)?this["__"+t]:e}},{key:"__isRealInline",value:function(){return!1}},{key:"isMulti",get:function(){return this.__isMulti}},{key:"currentProps",get:function(){return this.__currentProps}}],[{key:"REGISTER",get:function(){return bx}},{key:"getRegister",value:function(t){if(!t||!it.isString(t)||"$"!==t.charAt(0))throw new Error("Invalid param");if(!bx.hasOwnProperty(t))throw new Error("Geom has not register: ".concat(t));return bx[t]}},{key:"register",value:function(t,e){if(!(t&&it.isString(t)&&"$"===t.charAt(0)&&e.prototype&&e.prototype instanceof r))throw new Error("Invalid param");if(r.hasRegister(t))throw new Error("Geom has already register: ".concat(t));bx[t]=e}},{key:"hasRegister",value:function(t){return t&&bx.hasOwnProperty(t)}},{key:"delRegister",value:function(t){r.hasRegister(t)&&delete bx[t]}}]),r}(Wy),Ax=b.NODE_KEY,Mx=Ax.NODE_STYLE,Rx=Ax.NODE_CURRENT_STYLE,Sx=Ax.NODE_COMPUTED_STYLE,Ox=Ax.NODE_DOM_PARENT,Cx=Ax.NODE_MATRIX,Ix=Ax.NODE_MATRIX_EVENT,wx=Ax.NODE_STRUCT,kx=L.TYPE_VD,Dx=L.TYPE_GM,Lx=L.TYPE_CP,Fx=[],Nx=[],Px={};function Bx(t){t instanceof Up?t.children.forEach((function(t){t instanceof Up?Bx(t):t instanceof lh&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,Hx(t,t.props))})):t instanceof lh&&t.__hasCpUpdate&&(t.__hasCpUpdate=!1,Hx(t,t.props))}function Hx(t,e,r){t.__nextState||r?!it.isFunction(t.shouldComponentUpdate)||t.shouldComponentUpdate(e,t.__nextState||t.state)?function(t,e,r){t.props=e,t.state=r,t.__nextState=null;var i=t.shadow,a=t.shadowRoot,n=t.__cd,o=Ll(t.render());s=i,l=n,h=o,f=Ux(l,{},s),c=Ux(h,{}),u=[],_=[],Object.keys(f).forEach((function(t){var e=f[t];c[t]||(e.json.key=Px)})),Object.keys(c).forEach((function(t){var e=f[t],r=c[t];if(e){var i=e.json,a=r.json,n=e.vd;i.$$type===Lx&&a.$$type===Lx?i.klass===a.klass&&(Wx(i,a,n),i.key=a.key=Px,_.push(n)):i.$$type===a.$$type&&i.tagName===a.tagName&&(a.$$type===Dx&&i.props.multi!==a.props.multi||(a.__inheritAnimate=n),i.key=a.key=Px,a.$$type===kx&&u.push({vd:n,oj:i,nj:a}))}else r.json.key=Px})),u.forEach((function(t){Yx(t.vd,t.oj,t.nj)})),Gx(s,l,h),_.forEach((function(t){Xx(t)})),t.__init(o);var s,l,h,f,c,u,_;var d=t.shadowRoot;if(d instanceof Wy)["__outerWidth","__outerHeight","__sx","__sy","__sx2","__sx3","__sx4","__sx5","__sx6","__sy2","__sy3","__sy4","__sy5","__sy6"].forEach((function(t){d[t]=a[t]})),d.__computedStyle=d.__config[Sx]=a.computedStyle;else{var y=t.domParent;[Mx,Rx,Sx,Cx,Ix].forEach((function(t){d.__config[t]=y.__config[t]}))}["__x","__y","__width","__height","__sx1","__sy1","__layoutData","__parent","__domParent"].forEach((function(t){d[t]=a[t]})),d.__config[Ox]=a.domParent,d.__config[wx]=a.__config[wx],Fx.push(t),it.isObject(o)&&o.__placeholder||Nx.push(i);o&&o.__placeholder&&delete o.__placeholder;o&&o.__inheritAnimate&&delete o.__inheritAnimate;o&&o.__animateRecords&&delete o.__animateRecords;var v=t.host;for(;v&&v.shadow===t;)v.__shadowRoot=d,d.__hostRoot=v,t=v,v=v.host}(t,e,t.__nextState||t.state):(t.props=e,t.state=t.__nextState||t.state,Bx(t.shadow)):Bx(t.shadow)}function Gx(t,e,r){if(it.isObject(r))if(r.$$type===Lx){if(r.key===Px)return;e&&e.$$type===r.$$type&&e.klass===r.klass&&(Wx(e,r,t),Xx(t))}else r.$$type===Dx&&e&&e.$$type===Dx?e.tagName===r.tagName&&e.props.multi===r.props.multi&&(r.__inheritAnimate=t):r.$$type===kx&&e&&e.$$type===kx&&(e.tagName===r.tagName&&(r.__inheritAnimate=t),Yx(t,e,r))}function Yx(t,e,r){for(var i=e.children,a=r.children,n=i.length,o=a.length,s=t.children,l=0,h=0,f=0,c=Math.min(n,o);l<c;l++){var u=i[l+h],_=a[l+f];u.key===Px&&_.key===Px||(u.key===Px?(h++,l--,n--,c=Math.min(n,o)):_.key===Px?(f++,l--,o--,c=Math.min(n,o)):Gx(s[l+h],u,_))}}function Wx(t,e,r){e.__placeholder=r;var i=r.shadowRoot,a={};Object.keys(t.props).forEach((function(e){var r=t.props[e];a[e]=r})),Object.keys(e.props).forEach((function(n){var o=e.props[n];if(/^on[a-zA-Z]/.test(n)){t.props[n]=o;var s=a[n];s?(delete a[n],s!==o&&(n=n.slice(2).toLowerCase(),i.listener[n]=o)):(n=n.slice(2).toLowerCase(),i.listener[n]=o)}else if(/^on-[a-zA-Z\d_$]/.test(n)){t.props[n]=o;var l=a[n];l?(delete a[n],l!==o&&(n=n.slice(2).toLowerCase(),r.off(n,a[n]),r.on(n,o)),delete a[n]):(n=n.slice(2).toLowerCase(),r.on(n,o))}})),Object.keys(a).forEach((function(t){var n=a[t];/^on[a-zA-Z]/.test(t)?(e.props[t]=n,t=t.slice(2).toLowerCase(),delete i.listener[t]):/^on-[a-zA-Z\d_$]/.test(t)&&(e.props[t]=n,t=t.slice(2).toLowerCase(),r.off(t,n))})),Hx(r,e.props,!it.equal(t.props,e.props))}function Ux(t,e,r){if(Array.isArray(t))t.forEach((function(t,i){return Ux(t,e,r&&r[i])}));else if(it.isObject(t)&&(t.$$type===kx||t.$$type===Dx||t.$$type===Lx)){t.$$type===kx&&Ux(t.children,e,r&&r.children);var i=t.props.key;it.isNil(i)||""===i||(e.hasOwnProperty(i)&&Rt.warn("Component "+r.tagName+" has duplicate key: "+i),e[i]={json:t,vd:r})}return e}function Xx(t){if(t.host){var e=t.parent;if(e){var r=e.children.indexOf(t);if(!(r>-1))throw new Error("Can not find child: "+t.tagName);e.children[r]=null}}}var zx,Vx={updateList:Fx,check:Bx,did:function(){Fx.forEach((function(t){it.isFunction(t.componentDidUpdate)&&t.componentDidUpdate()})),Fx.splice(0),Nx.forEach((function(t){t.__destroy()})),Nx=[]}},Kx=it.joinVd,jx=it.joinDef,$x=Fs.contain,qx=Fs.NONE,Zx=Fs.TRANSFORM_ALL,Jx=Fs.OPACITY,Qx=Fs.FILTER,tm=Fs.MIX_BLEND_MODE;function em(t,e,r){var i=t.childNodes;!function(t,e,r){for(var i=e.length,a=r.length,n=0,o=t.childNodes;n<Math.min(i,a);n++)rm(o[n],e[n],r[n]);if(n<i)for(var s=i-1;s>=n;s--)_m(t,o,s);else if(n<a)for(;n<a;n++)um(t,o,n,jx(r[n]))}(i[0],e.defs,r.defs),r.hasOwnProperty("lv")||lm(i[1],e.bb,r.bb),om(t,e,r,!0)}function rm(t,e,r){if(e.tagName!==r.tagName)dm(t,"beforebegin",jx(r)),t.parentNode.removeChild(t);else{e.uuid!==r.uuid&&t.setAttribute("id",r.uuid);for(var i={},a=0,n=(e.props||[]).length;a<n;a++){var o=c(e.props[a],2),s=o[0],l=o[1];i[s]=l}for(var h=0,f=(r.props||[]).length;h<f;h++){var u=c(r.props[h],2),_=u[0],d=u[1];i.hasOwnProperty(_)?(i[_]!==d&&t.setAttribute(_,d),delete i[_]):t.setAttribute(_,d)}Object.keys(i).forEach((function(e){t.removeAttribute(e)}));for(var y=t.childNodes,v=e.children.length,p=r.children.length,g=0;g<Math.min(v,p);g++)hm(t,g,e.children[g],r.children[g]);if(g<v)for(var x=v-1;x>=g;x--)_m(t,y,x);else if(g<p)for(;g<p;g++)um(t,y,g,Kx(r.children[g]))}}function im(t,e,r){"dom"===e.type?"dom"===r.type?om(t,e,r):"geom"===r.type?sm(t,e,r):cm(t,r):"text"===e.type?"text"===r.type?function(t,e,r){if(r.cache)return;for(var i=e.children.length,a=r.children.length,n=0;n<Math.min(i,a);n++)hm(t,n,e.children[n],r.children[n],!0);var o=t.childNodes;if(n<i)for(var s=i-1;s>=n;s--)_m(t,o,s);else if(n<a)for(;n<a;n++)um(t,o,n,Kx(r.children[n]))}(t,e,r):cm(t,r):"geom"===e.type?"dom"===r.type?function(t,e,r){sm(t,e,r)}(t,e,r):"geom"===r.type?function(t,e,r){if(r.cache)return void nm(t,e,r,r.lv);if(r.hasOwnProperty("lv"))nm(t,e,r,r.lv);else{am(t,e,r),lm(t.firstChild,e.bb,r.bb);for(var i=e.children.length,a=r.children.length,n=0,o=t.lastChild,s=o.childNodes;n<Math.min(i,a);n++)hm(o,n,e.children[n],r.children[n]);if(n<i)for(var l=i-1;l>=n;l--)_m(o,s,l);else if(n<a)for(;n<a;n++)um(o,s,n,Kx(r.children[n]))}}(t,e,r):cm(t,r):"img"===e.type?"img"===r.type?fm(t,e,r):cm(t,r):"item"===e.type&&"item"===r.type&&fm(t,e,r)}function am(t,e,r){var i=r.transform,a=r.opacity,n=r.visibility,o=r.mask,s=r.overflow,l=r.filter,h=r.mixBlendMode,f=r.conClip;if(e.transform!==i&&(i?t.setAttribute("transform",i):t.removeAttribute("transform")),e.opacity!==a&&(1!==a&&void 0!==a?t.setAttribute("opacity",a):t.removeAttribute("opacity")),e.visibility!==n&&t.setAttribute("visibility",n),e.mask!==o&&(o?t.setAttribute("mask",o):t.removeAttribute("mask")),e.filter!==l||e.mixBlendMode!==h){var c=(l?"filter:".concat(l,";"):"")+(h?"mix-blend-mode:".concat(h,";"):"");c?t.setAttribute("style",c):t.removeAttribute("filter")}e.overflow!==s&&(s?t.setAttribute("clipPath",s):t.removeAttribute("overflow")),e.conClip!==f&&(f?t.childNodes[1].setAttribute("clip-path",f):t.childNodes[1].removeAttribute("clip-path"))}function nm(t,e,r,i){var a=r.transform,n=r.opacity,o=r.mask,s=r.filter,l=r.mixBlendMode;if(o?t.setAttribute("mask",o):t.removeAttribute("mask"),i!==qx&&($x(i,Zx)&&(a?t.setAttribute("transform",a):t.removeAttribute("transform")),$x(i,Jx)&&(1!==n&&void 0!==n?t.setAttribute("opacity",n):t.removeAttribute("opacity")),$x(i,Qx)||$x(i,tm))){var h=(s?"filter:".concat(s,";"):"")+(l?"mix-blend-mode:".concat(l,";"):"");h?t.setAttribute("style",h):t.removeAttribute("style")}}function om(t,e,r,i){if(r.cache)nm(t,0,r,r.lv);else{r.hasOwnProperty("lv")?nm(t,0,r,r.lv):(am(t,e,r),i||lm(t.firstChild,e.bb,r.bb));for(var a=e.children.length,n=r.children.length,o=0,s=t.lastChild,l=s.childNodes;o<Math.min(a,n);o++)im(l[o],e.children[o],r.children[o]);if(o<a)for(var h=a-1;h>=o;h--)_m(s,l,h);else if(o<n)for(;o<n;o++)um(s,l,o,Kx(r.children[o]))}}function sm(t,e,r){am(t,e,r),lm(t.firstChild,e.bb,r.bb);for(var i=e.children.length,a=r.children.length,n=0,o=t.lastChild,s=o.childNodes;n<Math.min(i,a);n++)cm(s[n],r.children[n]);if(n<i)for(var l=i-1;l>=n;l--)_m(o,s,l);else if(n<a)for(;n<a;n++)um(o,s,n,Kx(r.children[n]))}function lm(t,e,r){for(var i=e.length,a=r.length,n=0;n<Math.min(i,a);n++)hm(t,n,e[n],r[n]);var o=t.childNodes;if(n<i)for(var s=i-1;s>=n;s--)_m(t,o,s);else if(n<a)for(;n<a;n++)um(t,o,n,Kx(r[n]))}function hm(t,e,r,i,a){var n=t.childNodes;r.tagName!==i.tagName?cm(n[e],i):(fm(n[e],r,i),a&&r.content!==i.content&&(n[e].innerHTML=i.content))}function fm(t,e,r){if(!r.cache){for(var i={},a=0,n=(e.props||[]).length;a<n;a++){var o=c(e.props[a],2),s=o[0],l=o[1];i[s]=l}for(var h=0,f=(r.props||[]).length;h<f;h++){var u=c(r.props[h],2),_=u[0],d=u[1];i.hasOwnProperty(_)?(i[_]!==d&&t.setAttribute(_,d),delete i[_]):t.setAttribute(_,d)}Object.keys(i).forEach((function(e){t.removeAttribute(e)}))}}function cm(t,e){var r;Array.isArray(e)?(r="",e.forEach((function(t){r+=Kx(t)}))):r=Kx(e),dm(t,"beforebegin",r),t.parentNode.removeChild(t)}function um(t,e,r,i){r>=e.length?dm(t,"beforeend",i):dm(e[r],"beforebegin",i)}function _m(t,e,r){e[r]&&t.removeChild(e[r])}function dm(t,e,r){if(t.insertAdjacentHTML)t.insertAdjacentHTML(e,r);else switch(e){case"beforeend":t.innerHTML+=r;break;case"beforebegin":(zx=zx||document.createElement("svg")).innerHTML=r,t.parentNode.insertBefore(zx.childNodes[0],t)}}var ym=it.isFunction,vm=function(){function t(){e(this,t),this.__records=[],this.__records2=[],this.__list=[],this.__list2=[],this.__onList=[],this.__lastTime={}}return i(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list;-1===e.indexOf(t)&&e.push(t)}},{key:"remove",value:function(t){var e=this.list.indexOf(t);e>-1&&this.list.splice(e,1)}},{key:"__destroy",value:function(){this.__records=[],this.__records2=[],this.__list=[],this.__list2=[]}},{key:"__action",value:function(t,e){this.list.forEach((function(r){r[t].apply(r,e)}))}},{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__records,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.list;if(e.length&&e.splice(0).forEach((function(e){var i=e.target,a=e.animate,n=e.offsetTime;!i.isDestroyed&&a&&(Array.isArray(a)||(a=[a]),a.forEach((function(e){var a=e.value,o=e.options;o.autoPlay=!1,n&&((o=Object.assign({},o)).delay=o.delay||0,o.delay+=n);var s=i.animate(a,o);t.add(s,r)})))})),e===this.__records2){var i=this.__onList,a=this.list2;a.length&&i.length&&a.forEach((function(e){i.forEach((function(r){var i=function(){var i=e.timestamp;i!==t.__lastTime[r[0]]&&(t.__lastTime[r[0]]=i,r[1]&&r[1]())};i.__karasEventCb=r[1],e.off(r[0],r[1]),e.on(r[0],i)}))}))}}},{key:"__playAuto",value:function(){this.init(),this.__action("play")}},{key:"play",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("play",[t&&function(r){e&&(e=!1,ym(t)&&t(r))}])}},{key:"pause",value:function(){this.__action("pause")}},{key:"resume",value:function(t){var e=!0;this.__action("resume",[t&&function(r){e&&(e=!1,ym(t)&&t(r))}])}},{key:"__mergeAuto",value:function(){this.init(),this.init(this.__records2),this.__list2.length&&(this.__list=this.__list.concat(this.__list2),this.__list2=[])}},{key:"cancel",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("cancel",[t&&function(r){e&&(e=!1,ym(t)&&t(r))}])}},{key:"finish",value:function(t){this.__mergeAuto(),this.__onList=[];var e=!0;this.__action("finish",[t&&function(r){e&&(e=!1,ym(t)&&t(r))}])}},{key:"gotoAndStop",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],ym(e)&&(r=e,e={});var i=!0;this.__action("gotoAndStop",[t,e,r&&function(t){i&&(i=!1,ym(r)&&r(t))}])}},{key:"gotoAndPlay",value:function(t,e,r){this.__mergeAuto(),this.__onList=[],ym(e)&&(r=e,e={});var i=!0;this.__action("gotoAndPlay",[t,e,r&&function(t){i&&(i=!1,ym(r)&&r(t))}])}},{key:"on",value:function(t,e){if(ym(e))if(Array.isArray(t)){for(var r=0,i=t.length;r<i;r++)this.__on(t[r],e);this.__onList.push([t,e])}else this.__on(t,e),this.__onList.push([t,e])}},{key:"__on",value:function(t,e){var r=this;this.list.forEach((function(i){var a=function(){var a=i.timestamp;a!==r.__lastTime[t]&&(r.__lastTime[t]=a,e&&e())};a.__karasEventCb=e,i.on(t,a)}))}},{key:"off",value:function(t,e){if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++)this.off(t[r],e);else this.list.forEach((function(r){r.off(t,e)}))}},{key:"list",get:function(){return this.__list}},{key:"list2",get:function(){return this.__list2}},{key:"__set",value:function(t,e){this.list.forEach((function(r){r[t]=e}))}},{key:"playbackRate",set:function(t){this.__set("playbackRate",t)}},{key:"iterations",set:function(t){this.__set("iterations",t)}},{key:"playCount",set:function(t){this.__set("playCount",t)}},{key:"fps",set:function(t){this.__set("fps",t)}},{key:"currentTime",set:function(t){this.__set("currentTime",t)}},{key:"spfLimit",set:function(t){this.__set("spfLimit",t)}},{key:"delay",set:function(t){this.__set("delay",t)}},{key:"endDelay",set:function(t){this.__set("endDelay",t)}},{key:"fill",set:function(t){this.__set("fill",t)}},{key:"direction",set:function(t){this.__set("direction",t)}}]),t}(),pm=ne.canvasPolygon;var gm=0,xm=1,mm=2,Em=3,bm=4,Tm=function(t,e,r,i){return e.sort((function(t,e){return t[1]===e[1]?t[0]===e[0]?t[2]-e[2]:e[0]-t[0]:e[1]-t[1]})),e.forEach((function(e){var a=c(e,4),n=a[2],o=a[3];if(0===n){var s=o.matrix,l=o.target,h=o.ctx,f=o.x,u=o.y,_=o.offsetWidth,d=o.offsetHeight,y=o.list;t.globalCompositeOperation="destination-in",t.globalAlpha=1,t.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),t.fillStyle="#FFF",t.beginPath(),y?pm(t,y):t.rect(f,u,_,d),t.fill(),t.closePath(),t.globalCompositeOperation="source-over",l.draw(),(t=h).setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(l.canvas,0,0,r,i,0,0,r,i),t.draw&&t.draw(!0),l.ctx.setTransform(1,0,0,1,0,0),l.ctx.clearRect(0,0,r,i),l.draw(),Rt.releaseCacheCanvas(l.canvas)}else if(1===n){var v=o.target,p=o.ctx,g=o.filter;if(t.filter){var x=Rt.getCacheCanvas(r,i,null,"filter2");x.ctx.filter=ne.canvasFilter(g),r&&i&&x.ctx.drawImage(v.canvas,0,0,r,i,0,0,r,i),x.ctx.filter="none",x.draw(),v.ctx.globalAlpha=1,v.ctx.setTransform(1,0,0,1,0,0),v.ctx.clearRect(0,0,r,i),r&&i&&v.ctx.drawImage(x.canvas,0,0,r,i,0,0,r,i),v.draw(),x.ctx.setTransform(1,0,0,1,0,0),x.ctx.clearRect(0,0,r,i),x.draw(),Rt.releaseCacheCanvas(x.canvas)}(t=p).setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(v.canvas,0,0,r,i,0,0,r,i),t.draw&&t.draw(!0),v.ctx.setTransform(1,0,0,1,0,0),v.ctx.globalAlpha=1,v.ctx.clearRect(0,0,r,i),v.draw(),Rt.releaseCacheCanvas(v.canvas)}else if(2===n){var m=o.mask;if(o.isClip)o.target.draw(),(t=m.ctx).globalCompositeOperation="source-out",t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(o.target.canvas,0,0,r,i,0,0,r,i),m.draw(),t.globalCompositeOperation="source-over",o.target.ctx.setTransform(1,0,0,1,0,0),o.target.ctx.clearRect(0,0,r,i),o.target.draw(),Rt.releaseCacheCanvas(o.target.canvas),(t=o.ctx).globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(m.canvas,0,0,r,i,0,0,r,i),t.draw&&t.draw(!0),m.ctx.setTransform(1,0,0,1,0,0),m.ctx.clearRect(0,0,r,i),m.draw(),Rt.releaseCacheCanvas(m.canvas);else{m.draw();var E=o.target;(t=E.ctx).globalCompositeOperation="destination-in",t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(m.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",E.draw(),m.ctx.setTransform(1,0,0,1,0,0),m.ctx.clearRect(0,0,r,i),m.draw(),Rt.releaseCacheCanvas(m.canvas),(t=o.ctx).globalAlpha=1,t.setTransform(1,0,0,1,0,0),r&&i&&t.drawImage(E.canvas,0,0,r,i,0,0,r,i),t.draw&&t.draw(!0),E.ctx.setTransform(1,0,0,1,0,0),E.ctx.clearRect(0,0,r,i),E.draw(),Rt.releaseCacheCanvas(E.canvas)}}else if(3===n){var b=o.target;(t=o.ctx).globalCompositeOperation=o.mixBlendMode,b.draw(),t.setTransform(1,0,0,1,0,0),t.globalAlpha=1,r&&i&&t.drawImage(b.canvas,0,0,r,i,0,0,r,i),t.globalCompositeOperation="source-over",t.draw&&t.draw(!0),b.ctx.globalAlpha=1,b.ctx.setTransform(1,0,0,1,0,0),b.ctx.clearRect(0,0,r,i),b.draw(),Rt.releaseCacheCanvas(b.canvas)}else 4===n&&(t=o.ctx)})),t},Am=i((function t(r,i,a){e(this,t),this.uuid=vs.genUuid(),this.time=Rt.now(),this.texture=r,this.width=i,this.height=a})),Mm=function(){function t(r,i,a,n,o,s,l){e(this,t),this.gl=r,this.x=0,this.y=0,this.sx1=a,this.sy1=n,this.width=o,this.height=s,this.bbox=l,this.available=!0,this.__page=new Am(i,o,s),this.reOffset()}return i(t,[{key:"reOffset",value:function(){var t=this.bbox;this.dx=-t[0],this.dy=-t[1],this.dbx=this.sx1-t[0],this.dby=this.sy1-t[1]}},{key:"release",value:function(){this.available=!1,this.gl.deleteTexture(this.page.texture)}},{key:"page",get:function(){return this.__page}}]),t}(),Rm=Ts.NA,Sm=Ts.LOCAL,Om=Ts.CHILD,Cm=Ts.SELF,Im=Ts.getCache,wm=gm,km=xm,Dm=mm,Lm=Em,Fm=bm,Nm=Tm,Pm=b.STYLE_KEY,Bm=Pm.DISPLAY,Hm=Pm.OPACITY,Gm=Pm.VISIBILITY,Ym=Pm.FILTER,Wm=Pm.OVERFLOW,Um=Pm.MIX_BLEND_MODE,Xm=Pm.FILL,zm=Pm.TRANSFORM,Vm=Pm.TRANSFORM_ORIGIN,Km=Pm.PERSPECTIVE,jm=Pm.PERSPECTIVE_ORIGIN,$m=Pm.PADDING_LEFT,qm=Pm.PADDING_RIGHT,Zm=Pm.PADDING_TOP,Jm=Pm.PADDING_BOTTOM,Qm=Pm.BORDER_TOP_WIDTH,tE=Pm.BORDER_RIGHT_WIDTH,eE=Pm.BORDER_BOTTOM_WIDTH,rE=Pm.BORDER_LEFT_WIDTH,iE=Pm.MATRIX,aE=b.NODE_KEY,nE=aE.NODE_CACHE,oE=aE.NODE_CACHE_TOTAL,sE=aE.NODE_CACHE_OVERFLOW,lE=aE.NODE_CACHE_MASK,hE=aE.NODE_CACHE_FILTER,fE=aE.NODE_MATRIX,cE=aE.NODE_MATRIX_EVENT,uE=aE.NODE_OPACITY,_E=aE.NODE_COMPUTED_STYLE,dE=aE.NODE_CURRENT_STYLE,yE=aE.NODE_LIMIT_CACHE,vE=aE.NODE_REFRESH_LV,pE=aE.NODE_CACHE_STYLE,gE=aE.NODE_DEFS_CACHE,xE=aE.NODE_IS_MASK,mE=aE.NODE_DOM_PARENT,EE=aE.NODE_PERSPECTIVE_MATRIX,bE=aE.NODE_VIRTUAL_DOM,TE=aE.NODE_CACHE_AS_BITMAP,AE=aE.NODE_STRUCT,ME=b.STRUCT_KEY,RE=ME.STRUCT_NODE,SE=ME.STRUCT_INDEX,OE=ME.STRUCT_TOTAL,CE=ME.STRUCT_HAS_MASK,IE=ME.STRUCT_LV,wE=Fs.NONE,kE=Fs.TRANSFORM_ALL,DE=Fs.OPACITY,LE=Fs.FILTER,FE=Fs.REPAINT,NE=Fs.contain,PE=Fs.MIX_BLEND_MODE,BE=Fs.PERSPECTIVE,HE=P.isE,GE=P.inverse,YE=P.multiply,WE=Ou,UE=Cu,XE=it.assignMatrix,zE=it.transformBbox;function VE(t,e,r,i){t[0]=Math.min(t[0],r+e[0]),t[1]=Math.min(t[1],i+e[1]),t[2]=Math.max(t[2],r+e[2]),t[3]=Math.max(t[3],i+e[3])}function KE(t,e,r,i,a){for(var n,o=[],s=a,l=i,h=e+1,f=e+(r||0)+1;h<f;h++){var c=t[h],u=c[RE],_=c[IE],d=c[OE],y=c[CE];if(!(u instanceof Il)){var v=u.__config,p=v[cE],g=v[oE],x=v[dE],m=v[_E],E=v[pE];if("none"!==m[Bm]){if(_>l)HE(n=s)&&(n=null),o.push(n);else if(_<l){var b=l-_;o.splice(-b),n=o[_-1]}l=_,p=p.slice(0),E[iE]=null;var T=u.__calMatrix(FE,E,x,m,v);if(XE(v[fE],T),HE(n)||(T=YE(n,T)),XE(v[cE],T),s=T,g&&g.available){var A=g.isNew;A||it.equalArr(p,T)||(A=!0),A&&KE(t,h,d||0,_,T),g.__isNew=!1,h+=(d||0)+jE(t,h+(d||0)+1,y||0)}}else h+=(d||0)+jE(t,h+(d||0)+1,y||0)}}}function jE(t,e,r){for(var i=0;r--;){var a=t[e][OE];i+=a||0,e+=a||0,i++,e++}return i}function $E(t,e,r,i){var a=e.lockOneChannel(),n=ct.createTexture(t,null,a,r,i),o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var s=t.checkFramebufferStatus(t.FRAMEBUFFER);return s!==t.FRAMEBUFFER_COMPLETE&&Rt.error("Framebuffer object is incomplete: "+s.toString()),t.viewport(0,0,r,i),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),[a,o,n]}function qE(t,e,r,i,a,n,o,s,l,h,f,u){var _,d={},y={},v=function(t,e,r,i,a,n,o,s){var l,h,f=t.__sx1,u=t.__sy1,_=t.__config,d=_[nE],y=_[_E],v=y[Ym],p=y[Km],g=y[jm];l=(l=d&&d.available?d.bbox:t.filterBbox).slice(0),p&&(h=wo.calPerspectiveMatrix(p,g));var x=[r],m=0;v.forEach((function(t){var e=c(t,2),r=e[0],i=e[1];"blur"===r&&(m=Yr.outerSize(i))})),n[r]=1;for(var E={};x.length;)for(var b=x.splice(0),T=0,A=b.length;T<A;T++)for(var M=b[T],R=M+1,S=M+(e[M][OE]||0)+1;R<S;R++){var O=e[R],C=O[RE],I=O[OE];if(!C.isMask){var w=C.__sx1,k=C.__sy1,D=C.__config,L=D[yE],F=D[nE],N=D[oE],P=D[hE],B=D[lE],H=D[sE],G=D[_E],Y=G[Bm],W=G[Gm],U=G[zm],X=G[Vm],z=G[Hm];if(L&&!s)return;if("none"!==Y){if("hidden"!==W){a[R]=M,n[R]=n[M]*z;var V=void 0,K=0,j=0,$=void 0;if(C instanceof Il)V=C.bbox;else{var q=Im([B,P,H,N]);q?(V=q.bbox,K=q.dbx,j=q.dby,R+=I||0,$=!0):F&&F.available?(V=F.bbox,K=F.dbx,j=F.dby):V=C.filterBbox}if(V){(V=V.slice(0))[0]-=f,V[1]-=u,V[2]-=f,V[3]-=u;var Z=E[M];if(U&&!HE(U)){var J=X.slice(0);J[0]+=w-f+K,J[1]+=k-u+j;var Q=wo.calMatrixByOrigin(U,J);Z=Z?YE(Z,Q):Q}Z&&(E[R]=Z),h&&(Z=YE(h,Z)),V=zE(V,Z,m,m),I&&!$&&x.push(R),VE(l,V,f,u)}}}else R+=I||0}}return[l,h]}(r,o,a,0,d,y,t.getParameter(t.MAX_TEXTURE_SIZE),l),p=c(v,2),g=p[0],x=p[1];g||(_=!0),(l||_)&&(g=[0,0,f,u]);var m=g[2]-g[0],E=g[3]-g[1],b=c($E(t,e,m,E),3),T=b[0],A=b[1],M=b[2],R=r.__sx1,S=r.__sy1,O=.5*m,C=.5*E,I=-g[0],w=-g[1],D=R-g[0],L=S-g[1];if(s&&s.available)e.addTexAndDrawWhenLimit(t,s,1,null,O,C,I,w,!1);else if(l){var F=Rt.getCacheCanvas(m,E,"__$$OVERSIZE$$__");r.render(k.WEBGL,0,t,Rm,0,0);var N=e.lockOneChannel(),P=ct.createTexture(t,F.canvas,N),B=new Mm(t,P,0,0,m,E,[0,0,m,E]);e.addTexAndDrawWhenLimit(t,B,1,null,O,C,0,0,!1),e.refresh(t,O,C),F.ctx.setTransform(1,0,0,1,0,0),F.ctx.globalAlpha=1,F.ctx.clearRect(0,0,m,E),B.release(),e.releaseLockChannel(N)}for(var H={},G=a+1,Y=a+(n||0)+1;G<Y;G++){var W=o[G],U=W[RE],X=W[OE],z=W[CE],V=U.__config,K=H[d[G]],j=y[G];if(U instanceof Il)x&&(K=YE(x,K)),e.addTexAndDrawWhenLimit(t,V[nE],j,K,O,C,I,w,!1);else{var $=V[nE],q=V[oE],Z=V[hE],J=V[lE],Q=V[sE],tt=V[xE],et=V[_E],rt=et[Bm],it=et[Gm],at=et[zm],nt=et[Vm],ot=et[Um];if("none"===rt){G+=(X||0)+jE(o,G+(X||0)+1,z||0);continue}if(("hidden"===it||tt)&&!U.hookGlRender)continue;if(at&&!HE(at)){var st=nt.slice(0);$&&$.available?(st[0]+=$.sx1,st[1]+=$.sy1):(st[0]+=U.__sx1,st[1]+=U.__sy1);var lt=-R+D,ht=-S+L;st[0]+=lt,st[1]+=ht;var ft=wo.calMatrixByOrigin(at,st);K=K?YE(K,ft):ft}K&&(H[G]=K),x&&(K=YE(x,K));var ut=Im([J,Z,Q,q,$]);if(ut){if(UE(ot)){e.refresh(t,O,C);var _t=c($E(t,e,m,E),3),dt=_t[0],yt=_t[1],vt=_t[2];e.addTexAndDrawWhenLimit(t,ut,j,K,O,C,I,w,!1),e.refresh(t,O,C);var pt=c(tb(t,e,T,dt,A,M,WE(ot),m,E),3);T=pt[0],A=pt[1],M=pt[2],t.deleteFramebuffer(yt),t.deleteTexture(vt)}else e.addTexAndDrawWhenLimit(t,ut,j,K,O,C,I,w,!1);ut!==$&&(G+=(X||0)+jE(o,G+(X||0)+1,z||0))}U.hookGlRender&&U.hookGlRender(t,j,K,O,C,I,w,!1)}}r.hookGlRender&&r.hookGlRender(t,1,null,O,C,I,w,!1),e.refresh(t,O,C),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,f,u),t.deleteFramebuffer(A);var gt=new Mm(t,M,R,S,m,E,g);return e.releaseLockChannel(T,gt.page),[l||_,gt]}function ZE(t,e,r,i,a,n,o){var s=i.sx1,l=i.sy1,h=i.width,f=i.height,u=i.bbox,_=i;return a.forEach((function(r){var i=c(r,2),a=i[0],n=i[1];if("blur"===a&&n>0){var o=JE(t,e,_,n,h,f,s,l,u);if(o){var d=c(o,4);_=d[0],h=d[1],f=d[2],u=d[3]}}else if("dropShadow"===a){var y=function(t,e,r,i,a,n,o,s,l){e.refresh(t,.5*a,.5*n);var h=c(i,5),f=h[0],u=h[1],_=h[2],d=h[4],y=c($E(t,e,a,n),3),v=y[0],p=y[1],g=y[2],x=e.findExistTexChannel(r.page);-1===x?(x=e.lockOneChannel(),ct.bindTexture(t,r.page.texture,x)):e.lockChannel(x);t.useProgram(t.programDs),g=ct.drawDropShadow(t,t.programDs,p,g,r.page.texture,v,x,a,n,d),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(p);var m=l,E=new Mm(t,g,o,s,a,n,l.slice(0)),b=JE(t,e,E,_,a,n,o,s,l);if(e.releaseLockChannel(x),t.useProgram(t.program),b){t.deleteTexture(g);var T=c(b,4);E=T[0],a=T[1],n=T[2],l=T[3],(f||u)&&(l[0]+=f,l[1]+=u,l[2]+=f,l[3]+=u,E.sx1=l[0],E.sy1=l[1],E.reOffset());var A=m.slice(0);VE(A,l,0,0);var M=.5*(a=A[2]-A[0]),R=.5*(n=A[3]-A[1]),S=-A[0],O=-A[1],C=c($E(t,e,a,n),3),I=C[0],w=C[1],k=C[2];e.addTexAndDrawWhenLimit(t,r,1,null,M,R,S,O,!1),e.addTexAndDrawWhenLimit(t,E,1,null,M,R,S,O,!1),e.refresh(t,M,R,!1),e.releaseLockChannel(v),e.releaseLockChannel(I),t.deleteFramebuffer(w);var D=new Mm(t,k,o,s,a,n,A);return e.releaseLockChannel(I,E.page),[D,a,n,A]}}(t,e,_,n,h,f,s,l,u);if(y){var v=c(y,4);_=v[0],h=v[1],f=v[2],u=v[3]}}else if("hueRotate"===a){var p=ee.d2r(n%360),g=Math.cos(p),x=Math.sin(p),m=QE(t,e,_,[.213+.787*g-.213*x,.715-.715*g-.715*x,.072-.072*g+.928*x,0,0,.213-.213*g+.143*x,.715+.285*g+.14*x,.072-.072*g-.283*x,0,0,.213-.213*g-.787*x,.715-.715*g+.715*x,.072+.928*g+.072*x,0,0,0,0,0,1,0],h,f,s,l,u);if(m){var E=c(m,4);_=E[0],h=E[1],f=E[2],u=E[3]}}else if("saturate"===a&&100!==n){var b=.01*n,T=QE(t,e,_,[.213+.787*b,.715-.715*b,.072-.072*b,0,0,.213-.213*b,.715+.285*b,.072-.072*b,0,0,.213-.213*b,.715-.715*b,.072+.928*b,0,0,0,0,0,1,0],h,f,s,l,u);if(T){var A=c(T,4);_=A[0],h=A[1],f=A[2],u=A[3]}}else if("brightness"===a&&100!==n){var M=.01*n,R=QE(t,e,_,[M,0,0,0,0,0,M,0,0,0,0,0,M,0,0,0,0,0,1,0],h,f,s,l,u);if(R){var S=c(R,4);_=S[0],h=S[1],f=S[2],u=S[3]}}else if("grayscale"===a&&n>0){var O=1-.01*(n=Math.min(n,100));O<0?O=0:O>1&&(O=1);var C=QE(t,e,_,[.2126+.7874*O,.7152-.7152*O,.0722-.0722*O,0,0,.2126-.2126*O,.7152+.2848*O,.0722-.0722*O,0,0,.2126-.2126*O,.7152-.7152*O,.0722+.9278*O,0,0,0,0,0,1,0],h,f,s,l,u);if(C){var I=c(C,4);_=I[0],h=I[1],f=I[2],u=I[3]}}else if("contrast"===a&&100!==n){var w=.01*n,k=-.5*w+.5,D=QE(t,e,_,[w,0,0,0,k,0,w,0,0,k,0,0,w,0,k,0,0,0,1,0],h,f,s,l,u);if(D){var L=c(D,4);_=L[0],h=L[1],f=L[2],u=L[3]}}else if("sepia"===a&&n>0){var F=1-.01*(n=Math.min(n,100));F<0?F=0:F>1&&(F=1);var N=QE(t,e,_,[.393+.607*F,.769-.769*F,.189-.189*F,0,0,.349-.349*F,.686+.314*F,.168-.168*F,0,0,.272-.272*F,.534-.534*F,.131+.869*F,0,0,0,0,0,1,0],h,f,s,l,u);if(N){var P=c(N,4);_=P[0],h=P[1],f=P[2],u=P[3]}}else if("invert"===a&&n>0){var B=.01*(n=Math.min(n,100)),H=1-2*B,G=QE(t,e,_,[H,0,0,0,B,0,H,0,0,B,0,0,H,0,B,0,0,0,1,0],h,f,s,l,u);if(G){var Y=c(G,4);_=Y[0],h=Y[1],f=Y[2],u=Y[3]}}})),t.useProgram(t.program),t.viewport(0,0,n,o),_}function JE(t,e,r,i,a,n,o,s,l){for(var h=Yr.kernelSize(i),f=Math.max(15,t.getParameter(t.MAX_VARYING_VECTORS));h>f;)h-=2;var u=Yr.outerSizeByD(h),_=t.getParameter(t.MAX_TEXTURE_SIZE);if(!(a>_||n>_)){var d=l.slice(0);d[0]-=u,d[1]-=u,d[2]+=u,d[3]+=u;for(var y=a+2*u,v=n+2*u,p=.5*y,g=.5*v,x=Yr.gaussianWeight(i,h),m="",E="",b=Math.floor(.5*h),T=0;T<b;T++){var A=.01*(b-T);m+="v_texCoordsBlur[".concat(T,"] = a_texCoords + vec2(-").concat(A,", -").concat(A,") * u_direction;"),E+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(T,"]) * ").concat(x[T],";")}m+="v_texCoordsBlur[".concat(b,"] = a_texCoords;"),E+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(b,"]) * ").concat(x[b],";");for(var M=0;M<b;M++){var R=.01*(M+1);m+="v_texCoordsBlur[".concat(M+b+1,"] = a_texCoords + vec2(").concat(R,", ").concat(R,") * u_direction;"),E+="gl_FragColor += texture2D(u_texture, v_texCoordsBlur[".concat(M+b+1,"]) * ").concat(x[M+b+1],";")}m="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoordsBlur[3];uniform vec2 u_direction;void main(){gl_Position=a_position;}".replace("[3]","["+h+"]").replace(/}$/,m+"}"),E="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoordsBlur[3];uniform sampler2D u_texture;void main(){gl_FragColor=vec4(0.0);}".replace("[3]","["+h+"]").replace(/}$/,E+"}");var S=ct.initShaders(t,m,E);t.useProgram(S);var O=c($E(t,e,y,v),3),C=O[0],I=O[1],w=O[2],k=e.findExistTexChannel(r.page);-1===k?(k=e.lockOneChannel(),ct.bindTexture(t,r.page.texture,k)):e.lockChannel(k),w=ct.drawBlur(t,S,I,w,r.page.texture,C,k,a,n,u,y,v,p,g),t.deleteShader(S.vertexShader),t.deleteShader(S.fragmentShader),t.deleteProgram(S),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(I),e.releaseLockChannel(k);var D=new Mm(t,w,o,s,y,v,d);return e.releaseLockChannel(C,D.page),[D,y,v,d]}}function QE(t,e,r,i,a,n,o,s,l){var h=c($E(t,e,a,n),3),f=h[0],u=h[1],_=h[2],d=e.findExistTexChannel(r.page);-1===d?(d=e.lockOneChannel(),ct.bindTexture(t,r.page.texture,d)):e.lockChannel(d),t.useProgram(t.programCm),ct.drawCm(t,t.programCm,d,i),e.releaseLockChannel(d),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u);var y=new Mm(t,_,o,s,a,n,l.slice(0));return e.releaseLockChannel(f,y.page),[y,a,n,l]}function tb(t,e,r,i,a,n,o,s,l){var h;"multiply"===(o=WE(o))?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return((1.0-a2/a3)*c1*255.0+a2/a3*((1.0-a1)*c2*255.0+a1*c3*255.0))/255.0;}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=bottom*top;float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"screen"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"overlay"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(top.r,bottom.r),op(top.g,bottom.g),op(top.b,bottom.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"darken"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return min(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"lighten"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return max(a,b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"color-dodge"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==1.0){return a==0.0 ? a : 1.0;}return min(1.0,a/(1.0-b));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"color-burn"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){if(b==0.0){return a==1.0 ? a : 0.0;}return 1.0-min(1.0,(1.0-a)/b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"hard-light"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5 ?(2.0*a*b):(a+2.0*b-1.0-a*(2.0*b-1.0));}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"soft-light"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return b<=0.5? a-(1.0-2.0*b)*a*(1.0-a): a+(2.0*b-1.0)*(a<=0.25?((16.0*a-12.0)*a+4.0)*a: sqrt(a)-a);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"difference"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return abs(a-b);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"exclusion"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float op(float a,float b){return a+b-2.0*a*b;}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=vec3(op(bottom.r,top.r),op(bottom.g,top.g),op(bottom.b,top.b));float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"hue"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(a);float l=getLuminosity(a);return setLuminosity(setSaturation(b,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"saturation"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float s=getSaturation(b);float l=getLuminosity(a);return setLuminosity(setSaturation(a,s),l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"color"===o?h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(a);return setLuminosity(b,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}":"luminosity"===o&&(h="#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;float getLuminosity(vec3 color){return 0.3*color[0]+0.59*color[1]+0.11*color[2];}float clipLowest(float channel,float lowestChannel,float luminosity){return luminosity+((channel-luminosity)*luminosity)/(luminosity-lowestChannel);}float clipHighest(float channel,float highestChannel,float luminosity){return luminosity+((channel-luminosity)*(1.0-luminosity))/(highestChannel-luminosity);}vec3 clipColor(vec3 rgb){float luminosity=getLuminosity(rgb);float lowestChannel=min(rgb[0],min(rgb[1],rgb[2]));float highestChannel=max(rgb[0],max(rgb[1],rgb[2]));float r=rgb[0],g=rgb[1],b=rgb[2];if(lowestChannel<0.0){r=clipLowest(r,lowestChannel,luminosity);g=clipLowest(g,lowestChannel,luminosity);b=clipLowest(b,lowestChannel,luminosity);}if(highestChannel>1.0){r=clipHighest(r,highestChannel,luminosity);g=clipHighest(g,highestChannel,luminosity);b=clipHighest(b,highestChannel,luminosity);}return vec3(r,g,b);}vec3 setLuminosity(vec3 rgb,float luminosity){float delta=luminosity-getLuminosity(rgb);float r=rgb[0],g=rgb[1],b=rgb[2];return clipColor(vec3(r+delta,g+delta,b+delta));}float getSaturation(vec3 rgb){return max(rgb[0],max(rgb[1],rgb[2]))-min(rgb[0],min(rgb[1],rgb[2]));}vec3 setSaturation(vec3 rgb,float saturation){float r=rgb[0],g=rgb[1],b=rgb[2];float maxC=0.0,minC=0.0,midC=0.0;int maxI=0,minI=0,midI=0;if(r>=g&&r>=b){maxI=0;maxC=r;if(g>=b){minI=2;midI=1;minC=b;midC=g;}else{minI=1;midI=2;minC=g;midC=b;}}else if(g>=r&&g>=b){maxI=1;maxC=g;if(r>=b){minI=2;midI=0;minC=b;midC=r;}else{minI=0;midI=2;minC=r;midC=b;}}else if(b>=r&&b>=g){maxI=2;maxC=b;if(r>=g){minI=1;midI=0;minC=g;midC=r;}else{minI=0;midI=1;minC=r;midC=g;}}vec3 result=vec3(r,g,b);if(maxC>minC){midC=(midC-minC)*saturation/(maxC-minC);maxC=saturation;}else{maxC=midC=0.0;}minC=0.0;if(maxI==0){result[0]=maxC;}else if(maxI==1){result[1]=maxC;}else if(maxI==2){result[2]=maxC;}if(minI==0){result[0]=minC;}else if(minI==1){result[1]=minC;}else if(minI==2){result[2]=minC;}if(midI==0){result[0]=midC;}else if(midI==1){result[1]=midC;}else if(midI==2){result[2]=midC;}return result;}vec3 op(vec3 a,vec3 b){float l=getLuminosity(b);return setLuminosity(a,l);}vec3 premultipliedAlpha(vec4 color){float a=color.a;if(a==0.0){return vec3(0.0,0.0,0.0);}return vec3(color.r/a,color.g/a,color.b/a);}float alphaCompose(float a1,float a2,float a3,float c1,float c2,float c3){return(1.0-a2/a3)*c1+a2/a3*((1.0-a1)*c2+a1*c3);}void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);if(color1.a==0.0){gl_FragColor=color2;}else if(color2.a==0.0){gl_FragColor=color1;}else{vec3 bottom=premultipliedAlpha(color1);vec3 top=premultipliedAlpha(color2);vec3 res=op(bottom,top);float a=color1.a+color2.a-color1.a*color2.a;gl_FragColor=vec4(alphaCompose(color1.a,color2.a,a,bottom.r,top.r,res.r)*a,alphaCompose(color1.a,color2.a,a,bottom.g,top.g,res.g)*a,alphaCompose(color1.a,color2.a,a,bottom.b,top.b,res.b)*a,a);}}");var f=ct.initShaders(t,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",h);t.useProgram(f);var u=c($E(t,e,s,l),3),_=u[0],d=u[1],y=u[2];return ct.drawMbm(t,f,r,i,s,l),t.useProgram(t.program),t.deleteShader(f.vertexShader),t.deleteShader(f.fragmentShader),t.deleteProgram(f),t.deleteFramebuffer(a),t.deleteTexture(n),e.releaseLockChannel(r),e.releaseLockChannel(i),[_,d,y]}var eb,rb={renderCanvas:function(t,e,r){for(var i=r.__structs,a=r.width,n=r.height,o=[],s=0,l=i.length;s<l;s++){var h=i[s],f=h[RE],u=h[IE],_=h[OE],d=h[CE];if(!(f instanceof Il)){var y=f.__config,v=y[vE],p=y[TE],g=y[_E];if(v>=FE&&f.__calCache(t,e,y[mE],y[pE],y[dE],g,f.clientWidth,f.clientHeight,f.offsetWidth,f.offsetHeight,g[Qm],g[tE],g[eE],g[rE],g[Zm],g[qm],g[Jm],g[$m],f.__sx1,f.__sx2,f.__sx3,f.__sx4,f.__sx5,f.__sx6,f.__sy1,f.__sy2,f.__sy3,f.__sy4,f.__sy5,f.__sy6),p){if("none"===g[Bm]){s+=(_||0)+jE(i,s+(_||0)+1,d||0);continue}o.push([s,u,_,f,y,d])}}}o.length&&(o.sort((function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]})),o.forEach((function(e){var r=c(e,6),o=r[0],s=r[1],l=r[2],h=r[3],f=r[4],u=r[5];!function(t,e,r,i,a,n,o,s,l,h){var f,u=r[oE],_=r[hE],d=r[lE],y=r[sE],v=r[dE],p=r[_E];if(u&&u.available){var g=r[vE],x=r[pE];if(NE(g,kE)){var m=e.__calMatrix(g,x,v,p,r);XE(r[fE],m)}NE(g,DE)&&(r[uE]=p[Hm]=v[Hm]),NE(g,LE)&&e.__calFilter(v,p),NE(g,PE)&&(p[Um]=v[Um])}else{var E,b;f=!0;for(var T,A,M=e.__sx1,R=e.__sy1,S=[],O=[],C=1,I=a,w=i,k=i+(n||0)+1;w<k;w++){var D=o[w],L=D[RE],F=D[IE],N=D[OE],B=D[CE];if(L instanceof Il){var H=L.bbox;HE(T)||(H=zE(H,T,0,0)),VE(E,H,0,0)}else{var G=L.__config,Y=G[vE],W=G[oE],U=G[hE],X=G[lE],z=G[sE],V=G[_E],K=G[xE];if("none"!==V[Bm])if(w!==i&&K)w+=(N||0)+jE(o,w+(N||0)+1,B||0);else{if(w===i);else if(F>I)T=A[cE],HE(T)&&(T=null),S.push(T),C=A[uE],O.push(C);else if(F<I){var j=I-F;S.splice(-j),T=S[F-1],O.splice(-j),C=O[F-1]}A=G,I=F;var $=G[dE],q=G[pE],Z=void 0,J=void 0;Y<FE?(NE(Y,kE)?(Z=L.__calMatrix(Y,q,$,V,G),XE(G[fE],Z)):Z=G[fE],NE(Y,DE)&&(V[Hm]=$[Hm]),J=V[Hm],NE(Y,LE)&&(L.__bbox=null,L.__filterBbox=null,L.__calFilter($,V)),Z=G[fE],NE(Y,PE)&&(V[Um]=$[Um])):(L.__bbox=null,L.__filterBbox=null,w===i&&L.__calFilter($,V),Z=L.__calMatrix(Y,q,$,V,G),XE(G[fE],Z),J=V[Hm]=$[Hm]),w===i?(J=1,b=Z,Z=P.identity()):HE(T)||(Z=YE(T,Z)),XE(G[cE],Z),G[uE]=C*J;var Q=void 0,tt=w>i&&Im([X,U,z,W]);tt?(w+=(N||0)+jE(o,w+(N||0)+1,B||0),Q=tt.bbox):Q=w===i?L.bbox:L.filterBbox,Q=zE(Q,Z,0,0),w===i?E=Q.slice(0):VE(E,Q,0,0)}else w+=(N||0)+jE(o,w+(N||0)+1,B||0)}}if(r[oE]=u=Ts.getInstance(E,M,R),!u||!u.enabled)return;u.__available=!0;var et,rt=u,at=rt.dx,nt=rt.dy,ot=rt.dbx,st=rt.dby,lt=rt.x,ht=rt.y,ft=u.ctx;T=null,I=a;for(var ct={},ut={},_t=i,dt=i+(n||0)+1;_t<dt;_t++){var yt=o[_t],vt=yt[RE],pt=yt[IE],gt=yt[OE],xt=yt[CE];if(vt instanceof Il)vt.render(t,FE,ft,Om,at,nt),ut.hasOwnProperty(_t)&&(ft=Nm(ft,ut[_t],l,h));else{var mt=vt.__config,Et=mt[vE],bt=mt[oE],Tt=mt[hE],At=mt[lE],Mt=mt[sE],St=mt[_E];if(ct.hasOwnProperty(_t)){var Ot=c(ct[_t],3),Ct=Ot[0],It=Ot[1],wt=Ot[2],kt=Rt.getCacheCanvas(l,h,null,"mask2");wt.mask=kt,wt.isClip=vt.isClip;for(var Dt=_t+(gt||0)+1;--It;)Dt+=(o[Dt][OE]||0)+1;var Lt=ut[--Dt]=ut[Dt]||[];Lt.push([Ct,pt,Dm,wt]),Lt.push([Dt,pt,Fm,{ctx:ft,target:kt}]),ft=kt.ctx}if(_t===i);else if(pt>I)HE(T=et)&&(T=null),S.push(T);else if(pt<I){var Ft=I-pt;S.splice(-Ft),T=S[pt-1]}var Nt=St[zm],Pt=St[Vm],Bt=St[Bm],Ht=void 0;_t===i||HE(T)&&HE(Nt)?Ht=null:((Pt=Pt.slice(0))[0]+=ot+vt.__sx1-M+lt,Pt[1]+=st+vt.__sy1-R+ht,Ht=wo.calMatrixByOrigin(Nt,Pt),HE(T)||(Ht=YE(T,Ht))),Ht?ft.setTransform(Ht[0],Ht[1],Ht[4],Ht[5],Ht[12],Ht[13]):ft.setTransform(1,0,0,1,0,0),I=pt,et=Ht;var Gt=Im([At,Tt,Mt,bt]);if(_t!==i&&Gt){if(_t+=(gt||0)+jE(o,_t+(gt||0)+1,xt||0),"none"===Bt)continue;var Yt=St[Um];UE(Yt)?ft.globalCompositeOperation=WE(Yt):ft.globalCompositeOperation="source-over",ft.globalAlpha=mt[uE],Ts.drawCache(Gt,u),ft.globalCompositeOperation="source-over"}else{Et>=FE&&vt.__calCache(t,ft,mt[mE],mt[pE],mt[dE],St,vt.clientWidth,vt.clientHeight,vt.offsetWidth,vt.offsetHeight,St[Qm],St[tE],St[eE],St[rE],St[Zm],St[qm],St[Jm],St[$m],vt.__sx1,vt.__sx2,vt.__sx3,vt.__sx4,vt.__sx5,vt.__sx6,vt.__sy1,vt.__sy2,vt.__sy3,vt.__sy4,vt.__sy5,vt.__sy6);var Wt=vt.render(t,Et,ft,_t===i?Sm:Om,at,nt)||{},Ut=Wt.offscreenBlend,Xt=Wt.offscreenMask,zt=Wt.offscreenFilter,Vt=Wt.offscreenOverflow;if(Ut){var Kt=_t+(gt||0)+jE(o,_t+(gt||0)+1,xt||0);(ut[Kt]=ut[Kt]||[]).push([_t,pt,Lm,Ut]),ft=Ut.target.ctx}if(Xt&&(ct[_t+(gt||0)+1]=[_t,xt,Xt],ft=Xt.target.ctx),zt){var jt=_t+(gt||0)+jE(o,_t+(gt||0)+1,xt||0);(ut[jt]=ut[jt]||[]).push([_t,pt,km,zt]),ft=zt.target.ctx}if(Vt){var $t=_t+(gt||0)+jE(o,_t+(gt||0)+1,xt||0);(ut[$t]=ut[$t]||[]).push([_t,pt,wm,Vt]),ft=Vt.target.ctx}ut.hasOwnProperty(_t)&&(ft=Nm(ft,ut[_t],l,h)),"none"===Bt&&(_t+=(gt||0)+jE(o,_t+(gt||0)+1,xt||0))}}}XE(r[cE],b),r[vE]=wE}if(u&&u.available){var qt=p[Wm],Zt=p[Ym],Jt=u;"hidden"===qt&&(y&&y.available&&!f||(r[sE]=Ts.genOverflow(Jt,e),f=!0),Jt=r[sE]||Jt),Zt&&Zt.length&&(_&&_.available&&!f||(r[hE]=Ts.genFilter(Jt,Zt),f=!0),Jt=r[hE]||Jt),!s||d&&d.available&&!f||(r[lE]=Ts.genMask(Jt,e,(function(e,r,i){for(var a,n,s,f={},u={},_=r.dx,d=r.dy,y=r.dbx,v=r.dby,p=r.x,g=r.y,x=r.ctx,m=e.__config[AE],E=m[SE],b=m[OE],T=[],A=[],M=1,R=m[IE],S=E,O=E+(b||0)+1;S<O;S++){var C=o[S],I=C[RE],w=C[IE],k=C[OE],D=C[CE];if(I instanceof Il)I.render(t,FE,x,Om,_,d),u.hasOwnProperty(S)&&(x=Nm(x,u[S],l,h));else{var L=I.__config,F=L[vE],N=L[oE],B=L[hE],H=L[lE],G=L[sE],Y=L[_E];if(f.hasOwnProperty(S)){var W=c(f[S],3),U=W[0],X=W[1],z=W[2],V=Rt.getCacheCanvas(l,h,null,"mask2");z.mask=V,z.isClip=I.isClip;for(var K=S+(k||0)+1;--X;)K+=(o[K][OE]||0)+1;var j=u[--K]=u[K]||[];j.push([U,w,Dm,z]),j.push([K,w,Fm,{ctx:x,target:V}]),x=V.ctx}if(S===E);else if(w>R)HE(a=n)&&(a=null),T.push(a),M=s,A.push(M);else if(w<R){var $=R-w;T.splice(-$),a=T[w-1],A.splice(-$),M=A[w-1]}R=w;var q=Y[Bm],Z=Y[zm],J=Y[Vm],Q=Im([H,B,G,N]);if(Q){if(S+=(k||0)+jE(o,S+(k||0)+1,D||0),"none"===q)continue;var tt=Y[Um];UE(tt)?x.globalCompositeOperation=WE(tt):x.globalCompositeOperation="source-over",x.globalAlpha=L[uE],Ts.drawCache(Q,r,Z,P.identity(),J.slice(0),a,i),x.globalCompositeOperation="source-over"}else{var et=L[dE],rt=L[pE],at=void 0,nt=void 0;F<FE?(NE(F,kE)?(at=I.__calMatrix(F,rt,et,Y,L),XE(L[fE],at)):at=L[fE],NE(F,DE)&&(Y[Hm]=et[Hm]),nt=Y[Hm],NE(F,LE)&&(I.__bbox=null,I.__filterBbox=null,I.__calFilter(et,Y)),at=L[fE],NE(F,PE)&&(Y[Um]=et[Um])):(I.__bbox=null,I.__filterBbox=null,S===E&&I.__calFilter(et,Y),at=I.__calMatrix(F,rt,et,Y,L),XE(L[fE],at),nt=Y[Hm]=et[Hm]),S===E?(nt=1,at=P.identity()):a&&(at=YE(a,at)),XE(L[cE],at),s=L[uE]=M*nt;var ot=void 0;S===E||HE(a)&&HE(Z)?ot=null:((J=J.slice(0))[0]+=y+I.__sx1-sx1+p,J[1]+=v+I.__sy1-sy1+g,ot=wo.calMatrixByOrigin(Z,J),HE(a)||(ot=YE(a,ot))),n=ot,ot&&(it.equalArr(ot,i)?ot=P.identity():(i=P.inverse(i),ot=P.multiply(i,ot))),ot?x.setTransform(ot[0],ot[1],ot[4],ot[5],ot[12],ot[13]):x.setTransform(1,0,0,1,0,0),F>=FE&&I.__calCache(t,x,L[mE],L[pE],L[dE],Y,I.clientWidth,I.clientHeight,I.offsetWidth,I.offsetHeight,Y[Qm],Y[tE],Y[eE],Y[rE],Y[Zm],Y[qm],Y[Jm],Y[$m],I.__sx1,I.__sx2,I.__sx3,I.__sx4,I.__sx5,I.__sx6,I.__sy1,I.__sy2,I.__sy3,I.__sy4,I.__sy5,I.__sy6);var st=I.render(t,F,x,Om,_,d)||{},lt=st.offscreenBlend,ht=st.offscreenMask,ft=st.offscreenFilter,ct=st.offscreenOverflow;if(lt){var ut=S+(k||0)+jE(o,S+(k||0)+1,D||0);(u[ut]=u[ut]||[]).push([S,w,Lm,lt]),x=lt.target.ctx}if(ht&&(f[S+(k||0)+1]=[S,D,ht],x=ht.target.ctx),ft){var _t=S+(k||0)+jE(o,S+(k||0)+1,D||0);(u[_t]=u[_t]||[]).push([S,w,km,ft]),x=ft.target.ctx}if(ct){var dt=S+(k||0)+jE(o,S+(k||0)+1,D||0);(u[dt]=u[dt]||[]).push([S,w,wm,ct]),x=ct.target.ctx}u.hasOwnProperty(S)&&(x=Nm(x,u[S],l,h)),"none"===q&&(S+=(k||0)+jE(o,S+(k||0)+1,D||0))}}}})))}}(t,h,f,o,s,l||0,i,u,a,n)})));for(var x={},m={},E=0,b=i.length;E<b;E++){var T=i[E],A=T[RE],M=T[IE],R=T[OE],S=T[CE];if(A instanceof Il)A.render(t,FE,e,Rm,0,0),m.hasOwnProperty(E)&&(e=Nm(e,m[E],a,n));else{var O=A.__config,C=O[oE],I=O[hE],w=O[lE],k=O[sE],D=O[vE],L=O[_E],F=L[Bm],N=L[Um],B=L[Hm];if(x.hasOwnProperty(E)){var H=c(x[E],3),G=H[0],Y=H[1],W=H[2],U=Rt.getCacheCanvas(a,n,null,"mask2");W.mask=U,W.isClip=A.isClip;for(var X=E+(R||0)+1;--Y;){X+=(i[X][OE]||0)+1}var z=m[--X]=m[X]||[];z.push([G,M,Dm,W]),z.push([X,M,Fm,{ctx:e,target:U}]),e=U.ctx}var V=Im([w,I,k,C]);if(V){var K=E;if(E+=(R||0)+jE(i,E+(R||0)+1,S||0),"none"===F)continue;UE(N)?e.globalCompositeOperation=WE(N):e.globalCompositeOperation="source-over";var j=O[fE],$=O[cE],q=$.slice(0),Z=O[mE].matrixEvent;Z&&!HE(Z)&&(j=YE(Z,j)),it.assignMatrix($,j),Ts.draw(e,B,$,V),e.globalCompositeOperation="source-over",m.hasOwnProperty(E)&&(e=Nm(e,m[E],a,n));var J=C.isNew;J||it.equalArr(q,$)||(J=!0),J&&KE(i,K,R||0,M,$),C.__isNew=!1}else{var Q=A.render(t,D,e,Rm,0,0)||{},tt=Q.offscreenBlend,et=Q.offscreenMask,rt=Q.offscreenFilter,at=Q.offscreenOverflow;if(tt){var nt=E+(R||0)+jE(i,E+(R||0)+1,S||0);(m[nt]=m[nt]||[]).push([E,M,Lm,tt]),e=tt.target.ctx}if(et)x[E+(R||0)+1]=[E,S,et],e=et.target.ctx;if(rt){var ot=E+(R||0)+jE(i,E+(R||0)+1,S||0);(m[ot]=m[ot]||[]).push([E,M,km,rt]),e=rt.target.ctx}if(at){var st=E+(R||0)+jE(i,E+(R||0)+1,S||0);(m[st]=m[st]||[]).push([E,M,wm,at]),e=at.target.ctx}if(m.hasOwnProperty(E)&&(e=Nm(e,m[E],a,n)),"none"===F){for(var lt=(R||0)+jE(i,E+(R||0)+1,S||0),ht=E+1;ht<=E+lt;ht++)m.hasOwnProperty(ht)&&(e=Nm(e,m[ht],a,n));E+=lt}}}}},renderSvg:function(t,e,r,i){var a=r.__structs,n=r.width,o=r.height,s={};if(!i)for(var l=0,h=a.length;l<h;l++){var f=a[l],c=f[RE],u=f[OE],_=f[CE],d=c.__config,y=d[vE],v=d[gE];if(_&&(y>=FE||NE(y,kE|DE)))s[l+(u||0)+1+_-1]=y;if(y<FE)if(s.hasOwnProperty(l)){var p=s[l];!NE(y,kE)&&p<FE&&!NE(p,kE)&&v.forEach((function(t){e.addCache(t)}))}else v.forEach((function(t){e.addCache(t)}))}for(var g,x,m,E={},b=[],T=[],A=0,M=0,R=a.length;M<R;M++){var S=a[M],O=S[RE],C=S[OE],I=S[CE],w=S[IE],k=O.__config,D=k[oE],L=k[vE],F=k[gE],N=k[_E],B=N[Bm];if(I&&"none"!==B){var H=M+(C||0)+1,G=H+I;E[G-1]={index:M,start:H,end:G,isClip:a[H][RE].isClip}}if(w<A){var Y=A-w;b.splice(-Y),g=b[w-1],T.splice(-Y),x=T[w-1]}else if(w>A){b.push(m[fE]);var W=m[bE];T.push(W),x=W}m=k;var U=void 0;if(L<FE&&!(O instanceof Il)){k[vE]=wE,U=k[bE],D&&D.available?(M+=C||0,U.cache=!0):(D&&(D.available=!0),U=k[bE]=O.__virtualDom=it.extend({},U),O instanceof Up&&!(O instanceof Dg)&&(U.children=[]),"none"===B?(M+=C||0,I&&(M+=I)):delete U.cache);var X=k[dE],z=k[_E],V=k[pE];if(NE(L,kE)){var K=O.__calMatrix(L,V,X,z,k),j=k[fE];XE(j,K),!K||HE(K)?delete U.transform:U.transform="matrix("+it.joinArr(P.m2m6(K),",")+")",g&&K&&(K=YE(g,K)),j=k[cE],XE(j,K)}if(NE(L,DE)){var $=z[Hm]=X[Hm];1===$?delete U.opacity:U.opacity=$}if(NE(L,LE)){var q=O.__calFilter(X,z),Z=ne.svgFilter(q);Z?U.filter=Z:delete U.filter}if(NE(L,PE)){var J=z[Um]=X[Um];UE(J)?U.mixBlendMode=WE(J):delete U.mixBlendMode}U.lv=L}else k[gE]&&k[gE].splice(0),O.render(t,L,e,Rm,0,0),U=k[bE],"none"===(B=N[Bm])&&(M+=C||0,I&&(M+=I));if(E.hasOwnProperty(M)&&(s.hasOwnProperty(M)||L>=FE||NE(L,kE|DE))){var Q=E[M],tt=Q.index,et=Q.start,rt=Q.end,at=Q.isClip,nt=a[tt][RE],ot=[];at&&ot.push({type:"item",tagName:"path",props:[["d","M0,0L".concat(n,",0L").concat(n,",").concat(o,"L0,").concat(o,"L0,0")],["fill","rgba(255,255,255,1)"],["stroke-width",0]]});for(var st=et;st<rt;st++){var lt=a[st][RE],ht=lt.computedStyle,ft=ht[Bm],ct=ht[Gm],ut=ht[Xm],_t=lt.virtualDom,dt=_t.children,yt=_t.opacity;if("none"!==ft&&"hidden"!==ct){dt=it.clone(dt),ot=ot.concat(dt);for(var vt=0,pt=dt.length;vt<pt;vt++){var gt=dt[vt],xt=gt.tagName,mt=gt.props;if("path"===xt){if(at)for(var Et=0,bt=mt.length;Et<bt;Et++){var Tt=mt[Et];"fill"===Tt[0]&&(Tt[1]=it.int2invert(ut[0]))}var At=lt.matrix,Mt=GE(nt.matrix);At=YE(Mt,At),mt.push(["transform","matrix(".concat(it.joinArr(P.m2m6(At),","),")")]),it.isNil(yt)||1===yt||mt.push(["opacity",yt])}else if("image"===xt){for(var Rt=-1,St=0,Ot=mt.length;St<Ot;St++)if("transform"===mt[St][0]){Rt=St;break}if(-1===Rt){var Ct=GE(nt.matrix);HE(Ct)||mt.push(["transform","matrix(".concat(it.joinArr(P.m2m6(Ct),","),")")])}else{var It=mt[Rt][1].match(/[\d.]+/g).map((function(t){return parseFloat(t)})),wt=GE(nt.matrix);It=YE(wt,It),mt[Rt][1]="matrix(".concat(it.joinArr(P.m2m6(It),","),")")}}}}}for(var kt=F.length-1;kt>=0;kt--){"mask"===F[kt].tagName&&F.splice(kt,1)}var Dt={tagName:"mask",props:[],children:ot},Lt=e.add(Dt);F.push(Dt),Lt="url(#"+Lt+")",nt.virtualDom.mask=Lt}x&&!O.isMask&&x.children.push(U),0===M&&(g=k[fE],x=U),A=w}},renderWebgl:function(t,e,r){for(var i,a,n,o,s,l=r.__structs,h=r.width,f=r.height,u=r.texCache,_=.5*h,d=.5*f,y=[],v=[],p=1,g=[],x=0,m=[],E=0,b=l.length;E<b;E++){var T=l[E],A=T[RE],M=T[IE],R=T[OE],S=T[CE];if(A instanceof Il)n>=FE&&A.render(t,FE,e,Cm,0,0);else{var O=A.__config,C=O[vE];if(0===E);else if(M>x)i=o[cE],HE(i)&&(i=null),y.push(i),p=o[uE],v.push(p),a=o[EE],HE(a)&&(a=null),g.push(a);else if(M<x){var I=x-M;y.splice(-I),i=y[M-1],v.splice(-I),p=v[M-1],g.splice(-I),a=g[M-1]}n=C,o=O,x=M;var w=O[oE],k=O[_E];if("none"!==k[Bm]){if(C<FE){O[vE]=wE;var D=O[dE],L=O[pE],F=O[cE];NE(C,BE)&&A.__calPerspective(L,D,k,O);var N=void 0;NE(C,kE)?(N=A.__calMatrix(C,L,D,k,O),XE(O[fE],N)):N=O[fE],a&&(N=YE(a,N)),i&&(N=YE(i,N)),XE(F,N);var B=void 0;B=NE(C,DE)?k[Hm]=D[Hm]:k[Hm],O[uE]=p*B,NE(C,LE)&&(A.__bbox=null,A.__filterBbox=null,A.__calFilter(D,k)),NE(C,PE)&&(k[Um]=D[Um]),w&&w.available&&(E+=R||0)}else{var H=A.render(t,C,e,Cm,0,0);if(H&&Rt.isWebGLTexture(H.texture)){var G=A.__sx1,Y=A.__sy1,W=A.offsetWidth,U=A.offsetHeight,X=A.bbox;O[nE]=new Mm(e,H.texture,G,Y,W,U,X),e.viewport(0,0,h,f),e.useProgram(e.program)}}var z=O[yE],V=O[TE],K=k[Wm],j=k[Ym],$=k[Um],q=k[zm],Z=UE($),J=wo.isPerspectiveMatrix(q)||a;(V||S||j.length||"hidden"===K&&R||Z||J)&&(Z&&(s=!0),m.push([E,M,R,A,O,z,S,j,K,J,V]))}else E+=R||0}}var Q,tt,et,rt={};if(m.length){m.sort((function(t,e){return t[1]===e[1]?e[0]-t[0]:e[1]-t[1]}));var it={};m.forEach((function(t){var r=c(t,11),i=r[0],a=r[1],n=r[2],o=r[3],s=r[4],_=r[5],d=r[6],y=r[7],v=r[8],p=r[9],g=r[10];if(p){for(var x=s[mE];x;){var m=x.__config,E=m[AE][SE];if(it[E])break;(wo.isPerspectiveMatrix(m[fE])||m[EE])&&(it[E]=!0),x=m[mE]}if(!(it[i]||d||y.length||"hidden"===v||g))return}var b,T=s[nE],A=s[oE],M=s[hE],R=s[lE],S=s[sE];if(!A||!A.available){var O=c(qE(e,u,o,0,i,n||0,l,T,_,0,h,f),2),C=O[0],I=O[1];A=I,b=!0,(_=C)||(s[oE]=I)}var w=A;if("hidden"===v)if(S&&S.available&&!b)w=S;else{var k=function(t,e,r,i,a,n){var o=i.bbox,s=r.__sx1,l=r.__sy1,h=r.clientWidth,f=r.clientHeight,u=s+h,_=l+f;if(!(o[0]>=s&&o[1]>=l&&o[2]<=u&&_)){var d=[s,l,u,_],y=c($E(t,e,h,f),3),v=y[0],p=y[1],g=y[2],x=e.findExistTexChannel(i.page);-1===x?(x=e.lockOneChannel(),ct.bindTexture(t,i.page.texture,x)):e.lockChannel(x),t.useProgram(t.programOverflow),ct.drawOverflow(t,x,d[0]-o[0],d[1]-o[1],h,f,i.width,i.height),e.releaseLockChannel(x),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,a,n),t.deleteFramebuffer(p);var m=new Mm(t,g,i.sx1,i.sy1,h,f,d);return e.releaseLockChannel(v,m.page),m}}(e,u,o,w,h,f);k&&(w=k,b=!0,_||(s[sE]=w))}if(y.length)if(M&&M.available&&!b)w=M;else{var D=w;(w=ZE(e,u,0,w,y,h,f))!==D&&(b=!0,_||(s[hE]=w))}!d||R&&R.available&&!b||(w=function(t,e,r,i,a,n,o,s,l){var h,f=a.sx1,u=a.sy1,_=a.width,d=a.height,y=a.bbox,v=a.dx,p=a.dy,g=.5*_,x=.5*d,m=i[_E],E=m[zm],b=m[Vm];HE(E)?h=P.identity():((ft=b.slice(0))[0]+=f+v,ft[1]+=u+p,h=wo.calMatrixByOrigin(E,ft)),h=P.inverse(h);for(var T=c($E(t,e,_,d),3),A=T[0],M=T[1],R=T[2],S=r.next,O=S.isClip,C=[];S&&S.isMask&&S.isClip===O;)C.push(S),S=S.next;for(var I=0,w=C.length;I<w;I++)for(var k=[],D=void 0,L=void 0,F=[],N=1,B=void 0,H=s,G=C[I].__config[AE],Y=G[SE],W=Y,U=Y+(G[OE]||0)+1;W<U;W++){var X=l[W],z=X[RE],V=X[IE],K=X[OE],j=X[CE],$=z.__config,q=$[nE],Z=$[_E],J=$[yE];if("none"!==Z[Bm])if(z instanceof Il){if(q&&q.available)e.addTexAndDrawWhenLimit(t,q,N,e.last[2],g,x,0,0,!0);else if(J)return}else{var Q=$[nE],tt=$[lE],et=$[hE],rt=$[sE],it=$[oE],at=$[_E],nt=at[Hm],ot=at[zm],st=at[Vm];if(W===Y);else if(V>H)HE(D=L)&&(D=null),k.push(D),N=B,F.push(N);else if(V<H){var lt=H-V;k.splice(-lt),D=k[V-1],F.splice(-lt),N=F[V-1]}H=V;var ht=Im([tt,et,rt,it,Q]);if(ht){var ft,ut=void 0;if(HE(ot))ut=P.identity();else{var _t=st.slice(0);_t[0]+=ht.bbox[0]+v,_t[1]+=ht.bbox[1]+p,ut=wo.calMatrixByOrigin(ot,_t)}ut=P.multiply(h,ut),(ft=st.slice(0))[0]+=ht.bbox[0]+v,ft[1]+=ht.bbox[1]+p,L=wo.calMatrixByOrigin(ot,ft),HE(D)||(L=YE(D,L)),B=N*nt,e.addTexAndDrawWhenLimit(t,ht,B,ut,g,x,v,p,!0),ht!==Q&&(W+=(K||0)+jE(l,W+(K||0)+1,j||0))}else if(J)return}else W+=(K||0)+jE(l,W+(K||0)+1,j||0)}e.refresh(t,g,x),t.deleteFramebuffer(M);var dt=e.findExistTexChannel(a.page);-1===dt?(dt=e.lockOneChannel(),ct.bindTexture(t,a.page.texture,dt)):e.lockChannel(dt);var yt,vt=c($E(t,e,_,d),3),pt=vt[0],gt=vt[1],xt=vt[2];yt=O?t.programClip:t.programMask,t.useProgram(yt),ct.drawMask(t,A,dt,yt),t.deleteTexture(R),e.releaseLockChannel(A),e.releaseLockChannel(dt),t.useProgram(t.program),t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,n,o),t.deleteFramebuffer(gt);var mt=new Mm(t,xt,f,u,_,d,y);return e.releaseLockChannel(pt,mt.page),mt}(e,u,o,s,w,h,f,a,l),_||(s[lE]=w)),_&&(rt[i]=w)}))}if(s){var at=c($E(e,u,h,f),3);Q=at[0],tt=at[1],et=at[2]}for(var nt=0,ot=l.length;nt<ot;nt++){var st=l[nt],lt=st[RE],ht=st[OE],ft=st[CE],ut=lt.__config;if(lt instanceof Il){var _t=ut[nE],dt=ut[yE],yt=ut[mE].__config,vt=yt[cE],pt=yt[uE];if(_t&&_t.available)u.addTexAndDrawWhenLimit(e,_t,pt,vt,_,d,0,0,!0);else if(dt){var gt=Rt.getCacheCanvas(h,f,"__$$OVERSIZE$$__");lt.render(t,0,e,Rm,0,0);var xt=u.lockOneChannel(),mt=ct.createTexture(e,gt.canvas,xt),Et=new Mm(e,mt,0,0,h,f,[0,0,h,f]);u.addTexAndDrawWhenLimit(e,Et,pt,vt,_,d,0,0,!0),u.refresh(e,_,d,!0),gt.ctx.setTransform(1,0,0,1,0,0),gt.ctx.globalAlpha=1,gt.ctx.clearRect(0,0,h,f),Et.release(),u.releaseLockChannel(xt)}}else{var bt=ut[uE],Tt=ut[cE],At=ut[yE],Mt=ut[nE],St=ut[oE],Ot=ut[hE],Ct=ut[lE],It=ut[sE],wt=ut[vE],kt=ut[_E],Dt=kt[Bm],Lt=kt[Gm],Ft=kt[Um];if("none"===Dt){nt+=(ht||0)+jE(l,nt+(ht||0)+1,ft||0);continue}var Nt=Im([Ct,Ot,It,St,Mt]);if(Nt){if(s&&UE(Ft)){u.refresh(e,_,d,!0);var Pt=c($E(e,u,h,f),3),Bt=Pt[0],Ht=Pt[1],Gt=Pt[2];u.addTexAndDrawWhenLimit(e,Nt,bt,Tt,_,d,0,0,!0),u.refresh(e,_,d,!0);var Yt=c(tb(e,u,Q,Bt,tt,et,WE(Ft),h,f),3);Q=Yt[0],tt=Yt[1],et=Yt[2],e.deleteFramebuffer(Ht),e.deleteTexture(Gt)}else u.addTexAndDrawWhenLimit(e,Nt,bt,Tt,_,d,0,0,!0);Nt!==Mt&&(nt+=(ht||0)+jE(l,nt+(ht||0)+1,ft||0))}else if(rt.hasOwnProperty(nt)){var Wt=rt[nt];if(s&&UE(Ft)){u.refresh(e,_,d,!0);var Ut=c($E(e,u,h,f),3),Xt=Ut[0],zt=Ut[1],Vt=Ut[2];u.addTexAndDrawWhenLimit(e,Wt,bt,Tt,_,d,0,0,!0),u.refresh(e,_,d,!0);var Kt=c(tb(e,u,Q,Xt,tt,et,WE(Ft),h,f),3);Q=Kt[0],tt=Kt[1],et=Kt[2],e.deleteFramebuffer(zt),e.deleteTexture(Vt)}else u.addTexAndDrawWhenLimit(e,Wt,bt,Tt,_,d,0,0,!0);nt+=(ht||0)+jE(l,nt+(ht||0)+1,ft||0)}else if(At&&"none"!==Dt&&"hidden"!==Lt){var jt=Rt.getCacheCanvas(h,f,"__$$OVERSIZE$$__");lt.render(t,wt,e,Rm,0,0);var $t=u.lockOneChannel(),qt=ct.createTexture(e,jt.canvas,$t),Zt=new Mm(e,qt,0,0,h,f,[0,0,h,f]);u.addTexAndDrawWhenLimit(e,Zt,bt,Tt,_,d,0,0,!0),u.refresh(e,_,d,!0),jt.ctx.setTransform(1,0,0,1,0,0),jt.ctx.globalAlpha=1,jt.ctx.clearRect(0,0,h,f),Zt.release(),u.releaseLockChannel($t)}lt.hookGlRender&&lt.hookGlRender(e,bt,Tt,_,d,0,0,!0)}}if(u.refresh(e,_,d,!0),s){e.bindFramebuffer(e.FRAMEBUFFER,null),u.releaseLockChannel(Q),e.deleteFramebuffer(tt);var Jt=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,Jt),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,-1,-1,1,1,-1,1,1]),e.STATIC_DRAW);var Qt=e.getAttribLocation(e.program,"a_position");e.vertexAttribPointer(Qt,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(Qt);var te=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,te),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,1,0,1,1]),e.STATIC_DRAW);var ee=e.getAttribLocation(e.program,"a_texCoords");e.vertexAttribPointer(ee,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(ee);var re=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,re),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,1]),e.STATIC_DRAW);var ie=e.getAttribLocation(e.program,"a_opacity");e.vertexAttribPointer(ie,1,e.FLOAT,!1,0,0),e.enableVertexAttribArray(ie);var ae=e.getUniformLocation(e.program,"u_texture");e.uniform1i(ae,Q),e.drawArrays(e.TRIANGLES,0,6),e.deleteBuffer(Jt),e.deleteBuffer(te),e.deleteBuffer(re),e.disableVertexAttribArray(Qt),e.disableVertexAttribArray(ee),e.deleteTexture(et)}}},ib="#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}",ab=function(){function t(r){e(this,t),this.__units=r,this.__pages=[],this.__list=[],this.__channels=[],this.__locks=[],this.__lockUnits=0}return i(t,[{key:"addTexAndDrawWhenLimit",value:function(t,e,r,i,a,n){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8?arguments[8]:void 0,h=this.__pages,f=this.__list,c=e.page,u=h.indexOf(c);u>-1||((u=h.length)>=this.__units-this.__lockUnits&&this.refresh(t,a,n,l),h.push(c)),f.push([e,r,i,o,s])}},{key:"refresh",value:function(t,e,r,i){var a=this.__pages,n=this.__list;if(a.length){var o=this.channels,s=this.locks,l={};o.forEach((function(t,e){if(t){var r=t.uuid;l[r]=e}}));var h=this.__units,f=new Array(h),c=[];if(a.forEach((function(t){var e=t.uuid;if(l.hasOwnProperty(e)){var r=l[e];f[r]=t}else c.push(t)})),c.length){for(var u=0;u<h&&(f[u]||o[u]||s[u]||(f[u]=c.shift(),c.length));u++);var _=c.length;if(_){for(var d=[],y=0;y<h;y++)f[y]||s[y]||d.push([y,o[y]]);d.sort((function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]}));for(var v=0;v<_;v++)f[d[v][0]]=c[v]}}for(var p={},g=0,x=f.length;g<x;g++){var m=f[g];if(m){var E=o[g];E&&E===m&&!m.update||(m instanceof Am?ct.bindTexture(t,m.texture,g):(!E||E instanceof Am||t.deleteTexture(E.texture),m.texture=ct.createTexture(t,m.canvas,g)),o[g]=m),p[m.uuid]=g,m.update=!1,m.time=Rt.now()}}ct.drawTextureCache(t,n,p,e,r,i),a.splice(0),n.splice(0)}}},{key:"findExistTexChannel",value:function(t){return this.channels.indexOf(t)}},{key:"lockOneChannel",value:function(){for(var t=this.channels,e=this.locks,r=0;r<this.__units;r++)if(!t[r]&&!e[r])return e[r]=!0,this.__lockUnits++,r;for(var i=this.__units,a=[],n=0;n<i;n++)e[n]||a.push([n,t[n]]);if(a.length){a.sort((function(t,e){return t[1].time!==e[1].time?(t[1].time||0)-(e[1].time||0):t[1].fullSize!==e[1].fullSize?t[1].fullSize-e[1].fullSize:t[0]-e[0]}));var o=a[0][0];return t[o]=null,e[o]=!0,this.__lockUnits++,o}throw new Error("No free texture unit")}},{key:"releaseLockChannel",value:function(t,e){this.locks[t]&&(this.locks[t]=!1,this.__lockUnits--,e&&(this.channels[t]=e))}},{key:"lockChannel",value:function(t){var e=this.channels,r=this.locks;r[t]||(e[t]=null,r[t]=!0,this.__lockUnits++)}},{key:"release",value:function(t){this.channels.forEach((function(e){e&&t.deleteTexture(e.texture)}))}},{key:"channels",get:function(){return this.__channels}},{key:"locks",get:function(){return this.__locks}},{key:"last",get:function(){var t=this.__list,e=t.length;if(e)return t[e-1]}}]),t}(),nb=b.STYLE_KEY,ob=nb.TOP,sb=nb.RIGHT,lb=nb.BOTTOM,hb=nb.LEFT,fb=nb.POSITION,cb=nb.DISPLAY,ub=nb.VISIBILITY,_b=nb.COLOR,db=nb.WIDTH,yb=nb.HEIGHT,vb=nb.Z_INDEX,pb=nb.MARGIN_TOP,gb=nb.MARGIN_LEFT,xb=nb.MARGIN_BOTTOM,mb=nb.PADDING_TOP,Eb=nb.PADDING_LEFT,bb=nb.PADDING_BOTTOM,Tb=nb.BORDER_TOP_WIDTH,Ab=nb.BORDER_LEFT_WIDTH,Mb=nb.BORDER_BOTTOM_WIDTH,Rb=nb.POINTER_EVENTS,Sb=nb.WRITING_MODE,Ob=nb.TEXT_STROKE_COLOR,Cb=nb.TEXT_STROKE_WIDTH,Ib=nb.TEXT_STROKE_OVER,wb=b.UPDATE_KEY,kb=wb.UPDATE_NODE,Db=wb.UPDATE_STYLE,Lb=wb.UPDATE_KEYS,Fb=wb.UPDATE_COMPONENT,Nb=wb.UPDATE_FOCUS,Pb=wb.UPDATE_OVERWRITE,Bb=wb.UPDATE_LIST,Hb=wb.UPDATE_CONFIG,Gb=wb.UPDATE_ADD_DOM,Yb=wb.UPDATE_REMOVE_DOM,Wb=b.NODE_KEY,Ub=Wb.NODE_TAG_NAME,Xb=Wb.NODE_CACHE_STYLE,zb=Wb.NODE_CACHE_PROPS,Vb=Wb.NODE_CURRENT_STYLE,Kb=Wb.NODE_COMPUTED_STYLE,jb=Wb.NODE_CURRENT_PROPS,$b=Wb.NODE_DOM_PARENT,qb=Wb.NODE_IS_MASK,Zb=Wb.NODE_REFRESH_LV,Jb=Wb.NODE_IS_DESTROYED,Qb=Wb.NODE_STYLE,tT=Wb.NODE_UPDATE_HASH,eT=Wb.NODE_UNIQUE_UPDATE_ID,rT=Wb.NODE_CACHE,iT=Wb.NODE_CACHE_TOTAL,aT=Wb.NODE_CACHE_FILTER,nT=Wb.NODE_CACHE_OVERFLOW,oT=Wb.NODE_CACHE_MASK,sT=Wb.NODE_STRUCT,lT=b.STRUCT_KEY,hT=lT.STRUCT_INDEX,fT=lT.STRUCT_TOTAL,cT=lT.STRUCT_NODE,uT=(a(eb={},ob,!0),a(eb,sb,!0),a(eb,lb,!0),a(eb,hb,!0),eb),_T=it.isNil,dT=it.isObject,yT=it.isFunction,vT=D.AUTO,pT=D.PX,gT=D.PERCENT,xT=D.INHERIT,mT=Ha.isRelativeOrAbsolute,ET=Ha.equalStyle,bT=Fs.contain,TT=Fs.getLevel,AT=Fs.isRepaint,MT=Fs.NONE,RT=Fs.FILTER,ST=Fs.PERSPECTIVE,OT=Fs.REPAINT,CT=Fs.REFLOW,IT=Fs.REBUILD,wT=Fr.isIgnore,kT=Fr.isGeom,DT={canvas:"canvas",svg:"svg",webgl:"canvas"};var LT=["click","dblclick","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"];function FT(t,e){return t.currentStyle[e][1]!==vT}function NT(t,e){var r=FT(t,db)&&FT(t,yb);if(r&&e){var i=t.domParent;if(i&&("flex"===i.currentStyle[cb]||"flex"===i.computedStyle[cb]))return!1}return r}function PT(t){return t.hasOwnProperty("__uniqueReflowId")}var BT=0;function HT(t,e,r,i){t.hasOwnProperty("__uniqueReflowId")||(t.__uniqueReflowId=BT,e[BT++]={node:t,component:r,addDom:i})}function GT(t,e,r,i,a){if(!a||"absolute"!==r.currentStyle[fb]){var n=r;if(["inline","inlineBlock"].indexOf(n.currentStyle[cb])>-1||["inline","inlineBlock"].indexOf(n.computedStyle[cb])>-1){do{if((n=n.domParent)===t)return!0;if(PT(n))return;if("absolute"===n.currentStyle[fb]||"absolute"===n.computedStyle[fb])return void HT(n,e,i,a)}while(n&&(["inline","inlineBlock"].indexOf(n.currentStyle[cb])>-1||["inline","inlineBlock"].indexOf(n.computedStyle[cb])>-1));if(NT(n,!0))return void HT(n,e,i,a)}var o=n.domParent;if(!PT(o)){var s;do{if(PT(o))return;if("flex"!==o.computedStyle[cb]&&"flex"!==o.currentStyle[cb]||(s=o),"absolute"===o.currentStyle[fb]||"absolute"===o.computedStyle[fb])break;if(NT(o,!0))break;o=o.domParent}while(o);if(s&&(n=s),n===t)return!0;for(o=n;o;){if("absolute"===o.currentStyle[fb]||"absolute"===o.computedStyle[fb]){if(o===t)break;if(NT(o))break;return void HT(o,e,i,a)}o=o.domParent}if(n!==r)HT(n,e,i,a);else if(a){var l=!0,h=r.prev,f=r.next;if((h&&["inline","inlineBlock"].indexOf(h.currentStyle[cb])>-1||f&&["inline","inlineBlock"].indexOf(f.currentStyle[cb])>-1)&&(l=!1),!l){if((n=r.domParent)===t)return!0;HT(n,e,!1,!0)}}}}}var YT=0;function WT(t,e,r,i,a,n,o,s){var l=r[kb],h=r[Db],f=r[Pb],c=r[Nb],u=r[Fb],_=r[Bb],d=r[Lb],y=r[Hb],v=r[Gb],p=r[Yb];if(!y[Jb]){if(f&&Object.assign(y[Qb],f),_&&!u){d=(d||[]).slice(0);var g={};d.forEach((function(t){g[t]=!0})),_.forEach((function(t){var e=t[Db],r=t[Pb];(t[Lb]||[]).forEach((function(t){g.hasOwnProperty(t)||(g[t]=!0,d.push(t))})),r&&Object.assign(y[Qb],r),e&&(h?Object.assign(h,e):h=e)}))}var x,m,E,b,T,A,M,R=y[Ub],S=y[Xb],O=y[zb],C=y[Vb],I=y[Kb],w=y[jb],D=y[$b],L=y[qb],F=c||MT;if(!u&&h&&d)for(var N=0,P=d.length;N<P;N++){var B=d[N],H=h[B];if(l instanceof Tx&&kT(R,B))ET(B,H,w[B],l)||(F|=OT,O[B]=void 0,w[B]=H);else if(!ET(B,H,C[B],l))if(wT(B))S[B]=void 0,C[B]=H;else{if(uT.hasOwnProperty(B)){var G=C[fb];if("relative"!==G&&"absolute"!==G){delete h[B];continue}}else B===cb&&(b=!0);F|=TT(B),S[B]=void 0,C[B]=H,B===vb&&l!==e?x=!0:B===ub?m=!0:B===_b?E=!0:B===Ob?T=!0:B===Cb?A=!0:B===Ib&&(M=!0)}}if(F!==MT||u){if("none"!==I[cb]||b){if(x&&D&&delete D.__zIndexChildren,m||E||T||A||M)for(var Y=e.__structs,W=l.__config[sT],U=W[hT]+1,X=U+W[fT];U<X;U++){var z=Y[U],V=z[cT],K=z[fT];if(!(V instanceof Il)){var j=V.__config,$=j[Vb],q=void 0;(m&&$[ub][1]===xT||E&&$[_b][1]===xT||T&&$[Ob][1]===xT||A&&$[Cb][1]===xT||M&&$[Ib][1]===xT)&&(q=!0),q?(j[Zb]|=OT,V.clearCache()):U+=K||0}}if(L){for(var Z=l.prev;Z&&Z.isMask;)Z=Z.prev;Z&&Z.__config[oT]&&Z.__config[oT].release()}var J=D;if(b&&J){var Q=J.__config;if("none"===Q[Vb][cb]||"none"===Q[Kb][cb])return void(I[cb]="none")}!u&&AT(F)?(x&&t===k.SVG&&(F|=OT,D&&UT(D)),x&&!u&&o&&D&&!D.hasOwnProperty("__uniqueZId")&&(o[YT]=!0,D.__uniqueZId=YT++,s.push(D))):i.push({node:l,style:h,component:u,addDom:v,removeDom:p}),y[Zb]|=F,e.__rlv=u||v||p?IT:Math.max(e.__rlv,F);var tt=F>=OT||t===k.SVG&&l instanceof Tx;for(tt&&y[rT]&&y[rT].release(),(tt||bT(F,ST))&&(y[iT]&&y[iT].release(),y[oT]&&y[oT].release(),y[nT]&&y[nT].release()),(tt||bT(F,RT))&&y[aT]&&y[aT].release();J;){var et=J.__config;if(et.hasOwnProperty(eT)){var rt=et[eT];if(a.hasOwnProperty(rt))break;a[rt]=!0}else a[YT]=!0,et[eT]=YT++,n.push(et);et[Zb]>=OT&&et[rT]&&et[rT].release(),et[iT]&&et[iT].release(),et[aT]&&et[aT].release(),et[oT]&&et[oT].release(),et[nT]&&et[nT].release(),J=et[$b]}return!0}}else delete y[eT]}}function UT(t,e){var r=t.__config;e?r[Zb]|=OT:r[iT].release(),Array.isArray(t.children)&&t.children.forEach((function(t){t instanceof lh&&(t=t.shadowRoot),t instanceof Il||UT(t,!0)}))}var XT=0,zT=function(t){function r(i,a,n){var o;return e(this,r),(o=t.call(this,i,a)||this).__cd=n||[],o.__dom=null,o.__mw=0,o.__mh=0,o.__taskUp=[],o.__taskCp=[],o.__ref={},o.__reflowList=[{node:l(o)}],o.__animateController=new vm,eh.mix(l(o)),o.__config[tT]=o.__updateHash={},o.__uuid=XT++,o.__rlv=IT,o}return n(r,t),i(r,[{key:"__initProps",value:function(){var t=this.props.width;if(!_T(t)){var e=parseFloat(t)||0;e>0&&(this.__width=e)}var r=this.props.height;if(!_T(r)){var i=parseFloat(r)||0;i>0&&(this.__height=i)}}},{key:"__genHtml",value:function(t){var e=this,r="<".concat(t);return Object.keys(this.props).forEach((function(t){var i=e.props[t];/^on[a-zA-Z]/.test(t)||(r+=function(t,e){var r=Array.isArray(e)?it.joinSourceArray(e):it.stringify(e);if("className"===t)t="class";else if("style"===t)return"";return" "+t+'="'+it.encodeHtml(r,!0)+'"'}(t,i))})),r+="></".concat(t,">")}},{key:"__wrapEvent",value:function(t){var e,r;if(-1===["touchend","touchcancel"].indexOf(t.type)){var i=this.dom,a=this.__scx,n=this.__scy,o=i.getBoundingClientRect(),s=o.x,l=o.y,h=o.left,f=o.top,c=o.width,u=o.height;e=s||h||0,r=l||f||0;var _=t.touches?t.touches[0]:t;e=_.clientX-e,r=_.clientY-r,_T(a)?e*=this.width/c:e/=a,_T(n)?r*=this.height/u:r/=n}return{event:t,stopPropagation:function(){this.__stopPropagation=!0,t.stopPropagation()},stopImmediatePropagation:function(){this.__stopPropagation=!0,this.__stopImmediatePropagation=!0,t.stopImmediatePropagation()},preventDefault:function(){t.preventDefault()},x:e,y:r,__hasEmitted:!1}}},{key:"__cb",value:function(t){if("touchmove"!==t.type||this.__touchstartTarget){var e=this.__wrapEvent(t);return this.__emitEvent(e),e}}},{key:"appendTo",value:function(t){t=function(t){if(it.isString(t)&&t){var e=document.querySelector(t);if(!e)throw new Error("Can not find dom of selector: "+t);return e}if(!t)throw new Error("Can not find dom: "+t);return t}(t),this.__children=Ql.initRoot(this.__cd,this),this.__initProps(),this.__root=this;var e=this.tagName,i=DT[e];if("undefined"!=typeof window&&window.OffscreenCanvas&&t instanceof window.OffscreenCanvas||"undefined"!=typeof self&&self.OffscreenCanvas&&t instanceof self.OffscreenCanvas?(this.__dom=t,this.__width=t.width,this.__height=t.height):t.nodeName.toLowerCase()===i?(this.__dom=t,this.width&&t.setAttribute("width",this.width),this.height&&t.setAttribute("height",this.height)):(this.__dom=t.querySelector(i),this.__dom||(t.innerHTML=this.__genHtml(i),this.__dom=t.querySelector(i))),this.__defs=this.dom.__defs||Lg.getInstance(this.__uuid),!this.width||!this.height){var a=window.getComputedStyle(t,null);this.width||(this.__width=parseFloat(a.getPropertyValue("width"))||0,t.setAttribute("width",this.width)),this.height||(this.__height=parseFloat(a.getPropertyValue("height"))||0,t.setAttribute("height",this.height))}this.width&&this.height||Rt.warn("Karas render target with a width or height of 0.");var n=Object.assign({},nt,this.props.contextAttributes);if("canvas"===this.tagName)this.__ctx=this.__dom.getContext("2d",n),this.__renderMode=k.CANVAS;else if("svg"===this.tagName)this.__renderMode=k.SVG;else if("webgl"===this.tagName){var o=this.__ctx=this.__dom.getContext("webgl",n);this.__renderMode=k.WEBGL,o.program=ct.initShaders(o,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;attribute float a_opacity;varying float v_opacity;void main(){gl_Position=a_position;v_texCoords=a_texCoords;v_opacity=a_opacity;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;varying float v_opacity;uniform sampler2D u_texture;void main(){float opacity=v_opacity;if(opacity<=0.0){discard;}opacity=clamp(opacity,0.0,1.0);vec4 color=texture2D(u_texture,v_texCoords);gl_FragColor=color*opacity;}"),o.programMask=ct.initShaders(o,ib,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*color2.a;gl_FragColor=vec4(color1.rgb*color2.a,a);}"),o.programClip=ct.initShaders(o,ib,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture1;uniform sampler2D u_texture2;void main(){vec4 color1=texture2D(u_texture1,v_texCoords);vec4 color2=texture2D(u_texture2,v_texCoords);float a=color1.a*(1.0-color2.a);gl_FragColor=vec4(color1.rgb*(1.0-color2.a),a);}"),o.programOverflow=ct.initShaders(o,ib,"#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;void main(){gl_FragColor=texture2D(u_texture,v_texCoords);}"),o.programCm=ct.initShaders(o,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_m[20];void main(){vec4 c=texture2D(u_texture,v_texCoords);if(c.a>0.0){c.rgb/=c.a;}vec4 result;result.r=(u_m[0]*c.r);result.r+=(u_m[1]*c.g);result.r+=(u_m[2]*c.b);result.r+=(u_m[3]*c.a);result.r+=u_m[4];result.g=(u_m[5]*c.r);result.g+=(u_m[6]*c.g);result.g+=(u_m[7]*c.b);result.g+=(u_m[8]*c.a);result.g+=u_m[9];result.b=(u_m[10]*c.r);result.b+=(u_m[11]*c.g);result.b+=(u_m[12]*c.b);result.b+=(u_m[13]*c.a);result.b+=u_m[14];result.a=(u_m[15]*c.r);result.a+=(u_m[16]*c.g);result.a+=(u_m[17]*c.b);result.a+=(u_m[18]*c.a);result.a+=u_m[19];gl_FragColor=vec4(result.rgb*result.a,result.a);}"),o.programDs=ct.initShaders(o,"#version 100\n#define GLSLIFY 1\nattribute vec4 a_position;attribute vec2 a_texCoords;varying vec2 v_texCoords;void main(){gl_Position=a_position;v_texCoords=a_texCoords;}","#version 100\n#ifdef GL_ES\nprecision mediump float;\n#define GLSLIFY 1\n#endif\nvarying vec2 v_texCoords;uniform sampler2D u_texture;uniform float u_color[4];void main(){vec4 c=texture2D(u_texture,v_texCoords);gl_FragColor=vec4(u_color[0]*c.a,u_color[1]*c.a,u_color[2]*c.a,u_color[3]*c.a);}"),o.useProgram(o.program);var s=Math.min(16,o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS));this.__texCache=new ab(s)}this.refresh(null,!0),this.dom.__root&&this.dom.__root instanceof r&&this.dom.__root.destroy(),this.__eventCbList=function(t,e){var r=[];return LT.forEach((function(i){function a(r){var a=t.__root;if(a&&a instanceof e)if(["touchend","touchcancel","touchmove"].indexOf(i)>-1){var n=a.__touchstartTarget,o=a.__wrapEvent(r);for(o.target=n;n;)n.__emitEvent(o,!0),n=n.domParent}else a.__cb(r)}t.addEventListener(i,a),r.push([i,a])})),r}(this.dom,r),this.dom.__root=this}},{key:"refresh",value:function(t,e){this.__hookTask=null;var r=this.isDestroyed,i=this.renderMode,a=this.ctx,n=this.defs,o=this.width,s=this.height;if(!r){if(n.clear(),e)this.__checkRoot(i,o,s);else if(!this.__checkUpdate(i,a,o,s))return;if(this.__checkReflow(o,s),i!==k.CANVAS||this.props.noRender)if(i!==k.SVG||this.props.noRender)i!==k.WEBGL||this.props.noRender||(this.__clear(a,i),rb.renderWebgl(i,a,this));else{rb.renderSvg(i,n,this,e);var l=this.virtualDom;l.defs=n.value,this.dom.__vd?em(this.dom,this.dom.__vd,l):this.dom.innerHTML=it.joinVirtualDom(l),this.dom.__vd=l,this.dom.__defs=n}else this.__clear(a,i),rb.renderCanvas(i,a,this);yT(t)&&t(),this.emit(eh.REFRESH,this.__rlv),this.__rlv=MT}}},{key:"destroy",value:function(){this.__destroy(),this.animateController.__destroy();var t,e=this.dom;e&&(t=e,(this.__eventCbList||[]).forEach((function(e){t.removeEventListener(e[0],e[1])})),e.__root=null);var r=this.ctx;this.__texCache&&r&&(this.__texCache.release(r),r.program&&(r.deleteShader(r.program.vertexShader),r.deleteShader(r.program.fragmentShader),r.deleteProgram(r.program)),r.programMask&&(r.deleteShader(r.programMask.vertexShader),r.deleteShader(r.programMask.fragmentShader),r.deleteProgram(r.programMask)),r.programOverflow&&(r.deleteShader(r.programOverflow.vertexShader),r.deleteShader(r.programOverflow.fragmentShader),r.deleteProgram(r.programOverflow)))}},{key:"scale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.__scx=t,this.__scy=e}},{key:"resize",value:function(t,e,r){var i=this;t!==i.width||e!==i.height?(i.__width=t,i.__height=e,i.updateStyle({width:t,height:e},r)):yT(r)&&r(-1)}},{key:"addRefreshTask",value:function(t){var e=this,r=this.taskUp;if(!this.isDestroyed){var i;if(!r.length)Wh.nextFrame({__before:function(t){e.isDestroyed||(i=r.splice(0)).length&&i.forEach((function(e,r){dT(e)&&yT(e.__before)&&e.__before(t)}))},__after:function(t){e.isDestroyed||i.forEach((function(e){dT(e)&&yT(e.__after)?e.__after(t):yT(e)&&e(t)}))}}),this.__frameHook();-1===r.indexOf(t)&&r.push(t)}}},{key:"addForceRefreshTask",value:function(t){this.__hasRootUpdate=!0,this.addRefreshTask(t)}},{key:"delRefreshTask",value:function(t){if(t)for(var e=this.taskUp,r=0,i=e.length;r<i;r++)if(e[r]===t){e.splice(r,1);break}}},{key:"addRefreshCp",value:function(t){var e=this,r=this.taskCp;if(!this.isDestroyed){var i;if(!r.length)Wh.__nextFrameCp({__before:function(t){e.isDestroyed||(i=r.splice(0)).length&&(i.forEach((function(e){e.__before(t)})),Vx.check(e),Vx.updateList.length&&Vx.updateList.forEach((function(t){var r=t.root,i=t.shadowRoot;i instanceof Il&&(i=i.domParent);var a={};a[kb]=i,a[Db]=i.currentStyle,a[Nb]=CT,a[Fb]=t,a[Hb]=i.__config,e.__addUpdate(i,i.__config,r,r.__config,a)})))},__after:function(t){e.isDestroyed||(i.forEach((function(e){e.__after(t)})),Vx.did())}}),this.__frameHook();-1===r.indexOf(t)&&r.push(t)}}},{key:"getTargetAtPoint",value:function(t,e,r){return function t(e,i,a,n,o){var s=e.__sx1,l=e.__sy1,h=e.offsetWidth,f=e.offsetHeight,c=e.matrixEvent,u=e.children,_=e.zIndexChildren,d=e.computedStyle,y=d[cb],v=d[Rb];if(r||"none"!==y){if(Array.isArray(_)){for(var p=0,g=u.length;p<g;p++)u[p].__index__=p;for(var x=_.length-1;x>=0;x--){var m=_[x];if(!(m instanceof karas.Text)){var E=n.slice();E.push(m.__index__);var b=o.slice();b.push(x);var T=t(m,i,a,E,b);if(T)return T}}}if(r||"none"!==v)return ee.pointInQuadrilateral(i,a,s,l,s+h,l,s+h,l+f,s,l+f,c)?{target:e,path:n,zPath:o}:void 0}}(this,t,e,[],[])}},{key:"__checkRoot",value:function(t,e,r){var i=this.dom,a=this.currentStyle,n=this.computedStyle;-1===["flex","block"].indexOf(a[cb])&&(n[cb]=a[cb]="block"),"absolute"===a[fb]&&(n[fb]=a[fb]="static"),a[db]=[e,pT],a[yb]=[r,pT],n[db]=e,n[yb]=r,t===k.CANVAS||t===k.WEBGL?(i.width!==e&&(i.width=e),i.height!==r&&(i.height=r)):t===k.SVG&&(i.setAttribute("width",e),i.setAttribute("height",r))}},{key:"__addUpdate",value:function(t,e,r,i,n){var o,s=i[tT];if(t===r)(s=r.__updateRoot)?(n[Nb]&&(s[Nb]|=n[Nb]),n[Db]&&(s[Bb]=s[Bb]||[]).push((a(o={},Db,n[Db]),a(o,Pb,n[Pb]),a(o,Lb,n[Lb]),o))):r.__updateRoot=n;else if(e.hasOwnProperty(eT))if(s.hasOwnProperty(e[eT])){var l,h=s[e[eT]];if(n[Nb]&&(h[Nb]|=n[Nb]),n[Db])(h[Bb]=h[Bb]||[]).push((a(l={},Db,n[Db]),a(l,Pb,n[Pb]),a(l,Lb,n[Lb]),l))}else Rt.error("Update process miss uniqueUpdateId");else e[eT]=YT,s[YT++]=n}},{key:"__checkUpdate",value:function(t,e,r,i){var a=this,n=[],o={},s=[],l={},h=[],f=a.__updateRoot,c=a.__updateHash,u=a.__hasRootUpdate;a.__hasRootUpdate=!1,f&&(a.__updateRoot=null,(u=WT(t,a,f,n,o,s))&&a.__checkRoot(t,r,i));for(var _=Object.keys(c),d=0,y=_.length;d<y;d++){var v=WT(t,a,c[_[d]],n,o,s,l,h);u=u||v}a.__reflowList=n,YT=0,a.__updateHash=a.__config[tT]={},s.forEach((function(t){delete t[eT]})),h.forEach((function(t){t.hasOwnProperty("__uniqueZId")&&(delete t.__uniqueZId,t.__updateStruct(a.__structs))}));for(var p=0,g=_.length;p<g;p++)delete c[_[p]][Hb][eT];return u}},{key:"__checkReflow",value:function(t,e){var r=this,i=this.__reflowList;if(i.length){var a,n=this,o=[];BT=0;for(var s={},l=0,h=i.length;l<h;l++){var f=i[l],u=f.node,_=f.component,d=f.addDom,y=f.removeDom;if(u===this){a=!0;break}if(d&&u instanceof lh&&(u=u.shadowRoot),u.hasOwnProperty("__uniqueReflowId")||(u.__uniqueReflowId=BT,s[BT++]=f),GT(n,s,u,_,d)){a=!0,d&&(this.__zIndexChildren=null);break}y&&o.push(f)}if(BT=0,this.__reflowList=[],a){pv.clearUniqueReflowId(s);var v=0===this.currentStyle[Sb].indexOf("vertical");return this.__layout({x:0,y:0,w:t,h:e,isUpright:v},!1,!1,!1),this.__layoutAbs(this,{x:0,y:0,w:t,h:e,isUpright:v}),this.__structs=this.__structure(0,0),!0}this.__deepScan((function(t,e){if(t.hasOwnProperty("__uniqueReflowId")){var r=s[t.__uniqueReflowId];return e.uniqueList.push(r),!0}}),{uniqueList:o});var p=[],g=0,x=[],m=0;o.forEach((function(t){var e=t.node,i=t.component,a=t.addDom,o=t.removeDom,s=e.computedStyle,l=e.currentStyle,h=s[vb],f=s[fb],c=s[cb],u="absolute"===f,_="absolute"===l[fb],d="none"===c,y="none"===l[cb];if(!d||!y){var v=e.domParent,E=v.__layoutData,b=E.x,T=E.y,A=E.h,M=v.width,R=v.computedStyle,S=e;S.isShadowRoot&&(S=S.hostRoot);for(var O,C=S.prev;C;){if(C instanceof Il||"absolute"!==C.computedStyle[fb]&&"none"!==C.computedStyle[cb]){T=C.y+C.outerHeight,O=!0;break}C=C.prev}o||(O||(T+=R[pb]+R[Tb]+R[mb]),b+=R[gb]+R[Ab]+R[Eb]);var I=e;if(!o)if(_){for(I=I.domParent;I&&I!==n&&!mT(I);)if(I.parent)I=I.parent;else if(I.host)break;if(I||(I=n),v.__layoutAbs(I,v.__layoutData,e),a){var w=v.__modifyStruct(n,g);return g+=w[1],p.push(w),v.__updateStruct(n.__structs),void(r.renderMode===k.SVG&&UT(v))}if(u){if(i){var D=e.__modifyStruct(n,g);g+=D[1],p.push(D),(f===l[fb]||"static"!==f&&"static"!==l[fb])&&h===l[vb]||(v.__updateStruct(n.__structs),r.renderMode===k.SVG&&UT(v))}else if(d||y){e.__zIndexChildren=null;var L=e.__modifyStruct(n,g);g+=L[1],p.push(L)}return}v.__updateStruct(n.__structs),r.renderMode===k.SVG&&UT(v)}else{if(e.__layout({x:b,y:T,w:M,h:A},!1,!1,!1),T+=e.outerHeight,i)I=e;else for(I=I.domParent;I&&I!==n&&!mT(I);)if(I.parent)I=I.parent;else if(I.host)break;I||(I=n),e instanceof Up&&e.__layoutAbs(I,{x:b,y:T,w:M,h:A})}for(var F=e;F&&F!==n;)if("relative"===(R=(F=F.domParent).computedStyle)[fb]){var N=F,P=N.ox,B=N.oy;P&&e.__offsetX(P),B&&e.__offsetY(B);break}e.isShadowRoot&&(e=e.hostRoot);for(var H=e.next;H&&!H.hasOwnProperty("__uniqueReflowId");){if("absolute"!==H.computedStyle[fb]){var G=T-H.y;if(G)for(;H&&!H.hasOwnProperty("__uniqueReflowId");){var Y=H;Y instanceof lh&&(Y=Y.shadowRoot);var W=Y.computedStyle;"absolute"!==W[fb]&&"none"!==W[cb]&&Y.__offsetY(G,!0,OT),H=H.next}break}H=H.next}if(v.hasOwnProperty("__uniqueMergeOffsetId")||_&&d||(v.__uniqueMergeOffsetId=m++,x.push(v)),a||o){var U=v.__modifyStruct(n,g);g+=U[1],p.push(U),r.renderMode===k.SVG&&UT(v)}else if(i){var X=e.__modifyStruct(n,g);g+=X[1],p.push(X),(f===l[fb]||"static"!==f&&"static"!==l[fb])&&h===l[vb]||(e.domParent.__updateStruct(n.__structs),r.renderMode===k.SVG&&UT(e.domParent))}else if(d||y){e.__zIndexChildren=null;var z=e.__modifyStruct(n,g);g+=z[1],p.push(z)}}}));var E=[];x.forEach((function(t){delete t.__uniqueMergeOffsetId;for(var e,r,i,a=t.flowChildren,o=t.absChildren,l=[],h=[],f=a.length,c=0;c<f;c++){var u=a[c];u instanceof lh&&(u=u.shadowRoot);var _=u instanceof Wy;!r&&_&&u.hasOwnProperty("__uniqueReflowId")&&(r=!0,i=c);var d=_&&u.currentStyle,y=_&&"inline"===d[cb],v=_&&"inlineBlock"===d[cb];if(e=u,!_||y||v){if(l.length&&h.length&&r){var p=pv.getMergeMargin(h,l);if(p)for(var g=Math.max(i,c-l.length+1);g<f;g++)a[g].__offsetY(p,!0,OT)}h=[],l=[]}if(_&&!y){var x=_&&"none"===d[cb],m=void 0;if(!x&&u.flowChildren&&0===u.flowChildren.length){var b=u.computedStyle,T=b[pb],A=b[xb],M=b[mb],R=b[bb],S=b[yb],O=b[Tb],C=b[Mb];M<=0&&R<=0&&S<=0&&O<=0&&C<=0&&(l.push(A),h.push(T),m=!0)}if(x||m){if(c===f-1){var I=pv.getMergeMargin(h,l);if(I)for(var w=Math.max(i,c-l.length+1);w<f;w++)a[w].__offsetY(I,!0,OT)}}else{var k=u.computedStyle,D=k[pb],L=k[xb];if(l.length&&(h.push(D),r)){var F=pv.getMergeMargin(h,l);if(F)for(var N=Math.max(i,c-l.length+1);N<f;N++)a[N].__offsetY(F,!0,OT)}h=[],l=[L]}}}var P=t.currentStyle,B=P[yb],H=t===n||t.isShadowRoot||"absolute"===P[fb]||"relative"===P[fb];if(B[1]===vT&&e){var G=t.height+t.computedStyle[mb],Y=e.y+e.outerHeight-t.y-G;if(Y){var W;t.__resizeY(Y,OT);for(var U=0,X=o.length;U<X;U++){var z=o[U],V=z.currentStyle,K=V[ob],j=V[lb],$=V[yb];if(K[1]===vT){if(j[1]===vT)for(var q=z.prev;q;){var Z=q;Z instanceof lh&&(Z=Z.shadowRoot);var J=Z instanceof Wy,Q=J&&Z.currentStyle;if(!(J&&"absolute"===Q[fb])){var tt=Z.y+Z.outerHeight-z.y;tt&&z.__offsetY(tt,!0,OT);break}q=q.prev}else if(j[1]===pT)z.__offsetY(Y,!0,OT);else if(j[1]===gT){var et=(1-.01*j[0])*Y;z.__offsetY(et,!0,OT)}}else if(K[1]===gT)if(H){var rt=.01*K[0]*Y;z.__offsetY(rt,!0,OT)}else{if(!W)for(W=t.domParent;W&&W!==n&&!W.isShadowRoot;){var it=W.currentStyle;if("absolute"===it[fb]||"relative"===it[fb])break;W=W.domParent}if(W.currentStyle[yb][1]!==pT){var at=.01*K[0]*Y;z.__offsetY(at,!0,OT)}}if($[1]===gT)if(H)t.__layoutAbs(t,t.__layoutData,z);else{if(!W)for(W=t.domParent;W&&W!==n&&!W.isShadowRoot;){var nt=W.currentStyle;if("absolute"===nt[fb]||"relative"===nt[fb])break;W=W.domParent}E.push([t,W,z])}}return void pv.offsetAndResizeByNodeOnY(t,n,s,Y,E)}}for(var ot=0,st=o.length;ot<st;ot++){var lt=o[ot],ht=lt.currentStyle,ft=ht[ob],ct=ht[lb];if(ft[1]===vT&&ct[1]===vT)for(var ut=lt.prev;ut;){var _t=ut;_t instanceof lh&&(_t=_t.shadowRoot);var dt=_t instanceof Wy,yt=dt&&_t.currentStyle;if(!(dt&&"absolute"===yt[fb])){var vt=_t.y+_t.outerHeight-lt.y;vt&&lt.__offsetY(vt,!0,OT);break}ut=ut.prev}}})),E.forEach((function(t){t[0].__layoutAbs(t[1],t[0].__layoutData,t[2])}));var b=0,T=0,A=!0,M=n.__structs;if(p.forEach((function(t){var e=c(t,2),r=e[0],i=e[1];if(A)A=!1,T=r[hT]+(r[fT]||0)+1,b+=i;else{for(var a=r[hT]+(r[fT]||0)+1+b,n=T;n<a;n++)M[n][hT]+=b;T=a,b+=i}})),b)for(var R=T,S=M.length;R<S;R++)M[R][hT]+=b;pv.clearUniqueReflowId(s)}}},{key:"__frameHook",value:function(){var t=this;if(!this.__hookTask){var e=this.__hookTask=function(){t.refresh()};Wh.__hookTask.push(e)}}},{key:"__clear",value:function(t,e){e===k.CANVAS?(this.__mw=Math.max(this.__mw,this.width),this.__mh=Math.max(this.__mh,this.height),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.__mw,this.__mh)):e===k.WEBGL&&(t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))}},{key:"dom",get:function(){return this.__dom}},{key:"uuid",get:function(){return this.__uuid}},{key:"renderMode",get:function(){return this.__renderMode}},{key:"ctx",get:function(){return this.__ctx}},{key:"defs",get:function(){return this.__defs}},{key:"taskUp",get:function(){return this.__taskUp}},{key:"taskCp",get:function(){return this.__taskCp}},{key:"ref",get:function(){return this.__ref}},{key:"animateController",get:function(){return this.__animateController}},{key:"texCache",get:function(){return this.__texCache}}]),r}(Up),VT=b.STYLE_KEY.STROKE_WIDTH,KT=it.isNil;function jT(t,e,r,i){return i?t.map((function(t){return e+t*r})):e+t*r}function $T(t,e,r,i,a,n){if(n){if(t)return t.map((function(t){return $T(t,e,r,i,a)}))}else if(t&&t.length>=2)return[e+t[0]*i,r+t[1]*a];return[]}function qT(t,e){var r=0;return t&&t.length>=2&&r++,e&&e.length>=2&&(r+=2),r}function ZT(t,e,r,i,a,n,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1;if(0===s&&1===l)return[t,e,r,i,a,n];if(s===l)return[];if(s>l){var h=[l,s];s=h[0],l=h[1]}if(s=Math.max(0,s),l=Math.min(1,l),3===o){var f=sn.sliceBezier2Both([[t,e],a,n,[r,i]],s,l),u=c(f,4),_=c(u[0],2);t=_[0],e=_[1],a=u[1],n=u[2];var d=c(u[3],2);r=d[0],i=d[1]}else if(2===o){var y=sn.sliceBezier2Both([[t,e],n,[r,i]],s,l),v=c(y,3),p=c(v[0],2);t=p[0],e=p[1],n=v[1];var g=c(v[2],2);r=g[0],i=g[1]}else if(1===o){var x=sn.sliceBezier2Both([[t,e],a,[r,i]],s,l),m=c(x,3),E=c(m[0],2);t=E[0],e=E[1],a=m[1];var b=c(m[2],2);r=b[0],i=b[1]}else{var T=r-t,A=i-e;t+=T*s,e+=A*s,r+=T*(1-l),i+=A*(1-l)}return[t,e,r,i,a,n]}var JT=function(t){function r(i,a){var n;if(e(this,r),(n=t.call(this,i,a)||this).isMulti){if(n.__x1=[0],n.__y1=[0],n.__x2=[1],n.__y2=[1],n.__controlA=[[]],n.__controlB=[[]],n.__start=[0],n.__end=[1],Array.isArray(a.x1)?n.__x1=a.x1.map((function(t){return parseFloat(t)||0})):KT(a.x1)||(n.__x1=[parseFloat(a.x1)||0]),Array.isArray(a.y1)?n.__y1=a.y1.map((function(t){return parseFloat(t)||0})):KT(a.y1)||(n.__y1=[parseFloat(a.y1)||0]),Array.isArray(a.x2)?n.__x2=a.x2.map((function(t){return parseFloat(t)||0})):KT(a.x2)||(n.__x2=[parseFloat(a.x2)||0]),Array.isArray(a.y2)?n.__y2=a.y2.map((function(t){return parseFloat(t)||0})):KT(a.y2)||(n.__y2=[parseFloat(a.y2)||0]),Array.isArray(a.controlA)&&(n.__controlA=a.controlA.map((function(t){return Array.isArray(t)?t:[]}))),Array.isArray(a.controlB)&&(n.__controlB=a.controlB.map((function(t){return Array.isArray(t)?t:[]}))),Array.isArray(a.start)){n.__start=a.start.map((function(t){return parseFloat(t)||0}));for(var o=n.__start.length;o<n.__x1.length;o++)n.__start.push(0)}else if(!KT(a.start)){var s=parseFloat(a.start)||0;n.__start=n.__x1.map((function(){return s}))}if(Array.isArray(a.end)){n.__end=a.end.map((function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),e}));for(var l=n.__end.length;l<n.__x1.length;l++)n.__end.push(1)}else if(!KT(a.end)){var h=parseFloat(a.end);isNaN(h)&&(h=1),n.__end=n.__x1.map((function(){return h}))}}else{if(n.__x1=n.__y1=n.__start=0,n.__x2=n.__y2=n.__end=1,n.__controlA=[],n.__controlB=[],KT(a.x1)||(n.__x1=parseFloat(a.x1)||0),KT(a.y1)||(n.__y1=parseFloat(a.y1)||0),KT(a.x2)||(n.__x2=parseFloat(a.x2)||0),KT(a.y2)||(n.__y2=parseFloat(a.y2)||0),KT(a.start)||(n.__start=parseFloat(a.start)||0),!KT(a.end)){var f=parseFloat(a.end);isNaN(f)&&(f=1),n.__end=f}Array.isArray(a.controlA)&&(n.__controlA=a.controlA),Array.isArray(a.controlB)&&(n.__controlB=a.controlB)}return n}return n(r,t),i(r,[{key:"buildCache",value:function(t,e,r){var i,a=this,n=this.width,o=this.height,s=this.__cacheProps,l=this.isMulti;return["x1","x2"].forEach((function(e){(KT(s[e])||r)&&(i=!0,s[e]=jT(a[e],t,n,l))})),["y1","y2"].forEach((function(t){(KT(s[t])||r)&&(i=!0,s[t]=jT(a[t],e,o,l))})),["controlA","controlB"].forEach((function(h){(KT(s[h])||r)&&(i=!0,s[h]=$T(a[h],t,e,n,o,l))})),["start","end"].forEach((function(t){(KT(s[t])||r)&&(i=!0,s[t]=a[t])})),i}},{key:"render",value:function(t,e,i,a,n,s){var l=this,h=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);if(h.break)return h;i=h.ctx;var u=h.sx3,_=h.sy3,d=h.stroke,y=h.strokeWidth,v=h.strokeDasharray,p=h.strokeDasharrayStr,g=h.strokeLinecap,x=h.strokeLinejoin,m=h.strokeMiterlimit,E=h.dx,b=h.dy,T=this.__cacheProps,A=this.isMulti;if(this.buildCache(u,_)&&t===k.SVG){var M="";if(A)T.x1.forEach((function(t,e){var r=T.x2[e],i=T.y1[e],a=T.y2[e],n=T.controlA[e],o=T.controlB[e],s=T.start[e],l=T.end[e],h=qT(n,o);if(0!==s||1!==l){var f=c(ZT(t,i,r,i,n,o,h,s,l,T.len),6);t=f[0],i=f[1],r=f[2],i=f[3],n=f[4],o=f[5]}M+=ne.svgLine(t,i,r,a,n,o,h)}));else{var R=qT(T.controlA,T.controlB),S=T.x1,O=T.y1,C=T.x2,I=T.y2,w=T.controlA,D=T.controlB,L=T.start,F=T.end;if(0!==L||1!==F){var N=c(ZT(S,O,C,I,w,D,R,L,F,T.len),6);S=N[0],O=N[1],C=N[2],I=N[3],w=N[4],D=N[5]}M=ne.svgLine(S,O,C,I,w,D,R)}T.d=M}return t===k.CANVAS||t===k.WEBGL?d.forEach((function(e,r){var a=y[r],n=a>0&&"radial"===e.k&&Array.isArray(e.v);if(a>0&&"none"!==e){if(l.__preSetCanvas(t,i,{stroke:e,strokeWidth:a,strokeDasharray:v[r],strokeLinecap:g[r],strokeLinejoin:x[r],strokeMiterlimit:m[r]}),n&&(i.strokeStyle=e.v[0]),i.beginPath(),A)T.x1.forEach((function(t,e){var r=T.x2[e],a=T.y1[e],n=T.y2[e],o=T.controlA[e],s=T.controlB[e],l=T.start[e],h=T.end[e],f=qT(o,s);if(0!==l||1!==h){var u=c(ZT(t,a,r,a,o,s,f,l,h,T.len),6);t=u[0],a=u[1],r=u[2],a=u[3],o=u[4],s=u[5]}ne.canvasLine(i,t,a,r,n,o,s,f,E,b)}));else{var o=qT(T.controlA,T.controlB),s=T.x1,h=T.y1,f=T.x2,u=T.y2,_=T.controlA,d=T.controlB,p=T.start,M=T.end;if(0!==p||1!==M){var R=c(ZT(s,h,f,u,_,d,o,p,M,T.len),6);s=R[0],h=R[1],f=R[2],u=R[3],_=R[4],d=R[5]}ne.canvasLine(i,s,h,f,u,_,d,o,E,b)}i.stroke(),i.closePath()}})):t===k.SVG&&d.forEach((function(t,e){var r=y[e],i=r>0&&"radial"===t.k&&Array.isArray(t.v),a=[["d",T.d],["fill","none"],["stroke",i?t.v[0]:t.v||t],["stroke-width",r]];l.__propsStrokeStyle(a,p[e],g[e],x[e],m[e]),l.addGeom("path",a)})),h}},{key:"x1",get:function(){return this.getProps("x1")}},{key:"y1",get:function(){return this.getProps("y1")}},{key:"x2",get:function(){return this.getProps("x2")}},{key:"y2",get:function(){return this.getProps("y2")}},{key:"controlA",get:function(){return this.getProps("controlA")}},{key:"controlB",get:function(){return this.getProps("controlB")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){var t=this.isMulti,e=this.__cacheProps,i=this.__sx3,a=this.__sy3,n=this.computedStyle[VT];this.buildCache(i,a);var s=e.x1,l=e.y1,h=e.x2,c=e.y2,u=e.controlA,_=e.controlB,d=f(o(r.prototype),"bbox",this),y=0;return n.forEach((function(t){y=Math.max(y,t)})),y=Math.ceil(.5*y)+1,t||(s=[s],h=[h],l=[l],c=[c],u=[u],_=[_]),s.forEach((function(t,e){var r=l[e],i=h[e],a=c[e],n=u[e],o=_[e];if((KT(n)||n.length<2)&&(KT(o)||o.length<2))d[0]=Math.min(d[0],t-y),d[0]=Math.min(d[0],i-y),d[1]=Math.min(d[1],r-y),d[1]=Math.min(d[1],a-y),d[2]=Math.max(d[2],t+y),d[2]=Math.max(d[2],i+y),d[3]=Math.max(d[3],r+y),d[3]=Math.max(d[3],a+y);else if(KT(n)||n.length<2){var s=sn.bboxBezier(t,r,o[0],o[1],i,a);d[0]=Math.min(d[0],s[0]-y),d[0]=Math.min(d[0],s[2]-y),d[1]=Math.min(d[1],s[1]-y),d[1]=Math.min(d[1],s[3]-y),d[2]=Math.max(d[2],s[0]+y),d[2]=Math.max(d[2],s[2]+y),d[3]=Math.max(d[3],s[1]+y),d[3]=Math.max(d[3],s[3]+y)}else if(KT(o)||o.length<2){var f=sn.bboxBezier(t,r,n[0],n[1],i,a);d[0]=Math.min(d[0],f[0]-y),d[0]=Math.min(d[0],f[2]-y),d[1]=Math.min(d[1],f[1]-y),d[1]=Math.min(d[1],f[3]-y),d[2]=Math.max(d[2],f[0]+y),d[2]=Math.max(d[2],f[2]+y),d[3]=Math.max(d[3],f[1]+y),d[3]=Math.max(d[3],f[3]+y)}else{var v=sn.bboxBezier(t,r,n[0],n[1],o[0],o[1],i,a);d[0]=Math.min(d[0],v[0]-y),d[0]=Math.min(d[0],v[2]-y),d[1]=Math.min(d[1],v[1]-y),d[1]=Math.min(d[1],v[3]-y),d[2]=Math.max(d[2],v[0]+y),d[2]=Math.max(d[2],v[2]+y),d[3]=Math.max(d[3],v[1]+y),d[3]=Math.max(d[3],v[3]+y)}})),d}}]),r}(Tx),QT=Zn.intersect,tA=Zn.union,eA=Zn.subtract,rA=Zn.subtract2,iA=Zn.xor,aA=Zn.chain,nA=b.STYLE_KEY.STROKE_WIDTH,oA=it.isNil;function sA(t,e){return Array.isArray(e)&&(2===e.length||4===e.length)&&Array.isArray(t)&&2===t.length?e.concat(t):t}function lA(t,e){var r=[],i=0,a=[];if(e)i=[],t.forEach((function(t){var e=lA(t);r.push(e.list),i.push(e.total),a.push([0].concat(e.increase))}));else if(Array.isArray(t)){i=0,a.push(0);for(var n=0,o=0,s=t.length;o<s;o++){var l=t[o];if(Array.isArray(l)){n=o;break}}for(var h=t[n],f=n+1,c=t.length;f<c;f++){var u=t[f];if(Array.isArray(u))if(2===u.length){var _=Math.abs(u[0]-h[0]),d=Math.abs(u[1]-h[1]),y=Math.sqrt(Math.pow(_,2)+Math.pow(d,2));r.push(y),i+=y,a.push(i),h=u}else if(4===u.length){var v=sn.bezierLength([h,[u[0],u[1]],[u[2],u[3]]]);r.push(v),i+=v,a.push(i),h=[u[2],u[3]]}else if(6===u.length){var p=sn.bezierLength([h,[u[0],u[1]],[u[2],u[3]],[u[4],u[5]]]);r.push(p),i+=p,a.push(i),h=[u[4],u[5]]}}}return{list:r,total:i,increase:a}}function hA(t,e,r,i){if(r===i)return t[r]>e?r-1:r;var a=r+(i-r>>1);return t[a]===e?a:t[a]>e?hA(t,e,r,Math.max(a-1,r)):hA(t,e,Math.min(a+1,i),i)}function fA(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(0===r&&1===i)return t;if(r===i)return[];if(r>i){var a=[i,r];r=a[0],i=a[1]}for(;i-r>1;)i--;for(;i<0||r<0;)i++,r++;for(;i>=1&&r>=1;)i--,r--;var n=t.length;t=it.clone(t);var o,s=[],l=r>1?r-1:r,h=i>1?i-1:i,f=hA(e.increase,l*e.total,0,n-1),c=hA(e.increase,h*e.total,0,n-1),u=r<0,_=i>1,d=1;if((h*=e.total)>e.increase[c]){var y=t[c].slice(t[c].length-2),v=t[c+1],p=e.list[c],g=h-e.increase[c],x=g/p;if(d=x,2===v.length){var m=v[0]-y[0],E=v[1]-y[1];_?o=[y[0]+x*m,y[1]+x*E]:(x=1-x,o=[v[0]-x*m,v[1]-x*E])}else if(4===v.length){var b=sn.sliceBezier([y,[v[0],v[1]],[v[2],v[3]]],x);o=[b[1][0],b[1][1],b[2][0],b[2][1]]}else if(6===v.length){var T=sn.sliceBezier([y,[v[0],v[1]],[v[2],v[3]],[v[4],v[5]]],x);o=[T[1][0],T[1][1],T[2][0],T[2][1],T[3][0],T[3][1]]}}if((l*=e.total)>e.increase[f]){var A,M=t[f].slice(t[f].length-2),R=e.list[f];f!==c||u||_||1===d||(R*=d,o&&(A=o)),A||(A=t[f+1]);var S=l-e.increase[f],O=S/R;if(2===A.length){var C=A[0]-M[0],I=A[1]-M[1];u?(O=1-O,s.push([A[0]-O*C,A[1]-O*I])):s.push([M[0]+O*C,M[1]+O*I]),s.push(A)}else if(4===A.length){var w=sn.sliceBezier([[A[2],A[3]],[A[0],A[1]],M],1-O).reverse();s.push(w[0]),s.push([w[1][0],w[1][1],w[2][0],w[2][1]]),f!==c||u||_||(o=null)}else if(6===A.length){var k=sn.sliceBezier([[A[4],A[5]],[A[2],A[3]],[A[0],A[1]],M],1-O).reverse();s.push(k[0]),s.push([k[1][0],k[1][1],k[2][0],k[2][1],A[4],A[5]]),f!==c||u||_||(o=null)}}for(var D=f+2;D<=c+(u||_?n:0);D++)s.push(t[D%n]);return o&&s.push(o),s}var cA=function(t){function r(i,a){var n;if(e(this,r),(n=t.call(this,i,a)||this).isMulti){if(n.__points=[[]],n.__controls=[[]],n.__start=[0],n.__end=[1],Array.isArray(a.start)){n.__start=a.start.map((function(t){return parseFloat(t)||0}));for(var o=n.__start.length;o<n.__points.length;o++)n.__start.push(0)}else if(!oA(a.start)){var s=parseFloat(a.start)||0;n.__start=n.__points.map((function(){return s}))}if(Array.isArray(a.end)){n.__end=a.end.map((function(t){var e=parseFloat(t);return isNaN(e)&&(e=1),e}));for(var l=n.__end.length;l<n.__points.length;l++)n.__end.push(1)}else if(!oA(a.end)){var h=parseFloat(a.end);isNaN(h)&&(h=1),n.__end=n.__points.map((function(){return h}))}}else if(n.__points=[],n.__controls=[],n.__start=0,n.__end=1,oA(a.start)||(n.__start=parseFloat(a.start)||0),!oA(a.end)){var f=parseFloat(a.end);isNaN(f)&&(f=1),n.__end=f}return Array.isArray(a.controls)&&(n.__controls=a.controls),Array.isArray(a.points)&&(n.__points=a.points),a.booleanOperations&&(n.__booleanOperations=a.booleanOperations),n}return n(r,t),i(r,[{key:"__getPoints",value:function(t,e,r,i,a,n){return a.map((function(a){if(Array.isArray(a)){var o=a.length;if(n){if(0!==o&&2!==o&&4!==o)return}else if(0!==o&&2!==o)return;for(var s=[],l=0;l<o;l++)l%2==0?s.push(t+a[l]*r):s.push(e+a[l]*i);return s}}))}},{key:"__reprocessing",value:function(t,e){if(!e||t.length<2)return t;var r=this.booleanOperations,i=t.length;if(!r)return t;if(!Array.isArray(r)){var a=r;r=[r];for(var n=1;n<i-1;n++)r.push(a)}if(Array.isArray(r)&&r.length){for(var o=[],s=t[0],l=1;l<i;l++){var h=(r[l-1]||"").toString().toLowerCase(),f=t[l];if(-1!==["intersect","intersection","union","subtract","subtract2","diff","difference","xor"].indexOf(h))switch(h){case"intersect":case"intersection":s=QT(s,f,!0);break;case"union":s=tA(s,f,!0);break;case"subtract":case"diff":case"difference":s=eA(s,f,!0);break;case"subtract2":s=rA(s,f,!0);break;case"xor":s=iA(s,f,!0)}else o=o.concat(aA(s)),s=f||[]}return o.concat(aA(s))}return t}},{key:"__needRebuildSE",value:function(t){if(it.isNil(t.booleanOperations))return t.booleanOperations=!0,!0}},{key:"buildCache",value:function(t,e){var r,i,a=this,n=this.width,o=this.height,s=this.points,l=this.controls,h=this.start,f=this.end,c=this.__cacheProps,u=this.isMulti;if(oA(c.points)&&(r=!0,c.points=u?s.map((function(r){if(Array.isArray(r))return a.__getPoints(t,e,n,o,r)})):this.__getPoints(t,e,n,o,s)),oA(c.controls)&&(r=!0,c.controls=u?l.map((function(r){return Array.isArray(r)?a.__getPoints(t,e,n,o,r,!0):r})):this.__getPoints(t,e,n,o,l,!0)),oA(c.start)&&(i=!0,c.start=h),oA(c.end)&&(i=!0,c.end=f),this.__needRebuildSE(c)&&(i=!0),r){var _=c.points,d=c.controls;u?(c.list2=_.map((function(t,e){var r=d[e];if(Array.isArray(t))return t.map((function(t,e){return e?sA(t,r&&r[e-1]):t}))})),c.len=lA(c.list2,u)):(c.list2=_.map((function(t,e){return e?sA(t,d[e-1]):t})),c.len=lA(c.list2,u))}return(r||i)&&(c.list=u?c.list2.map((function(t,e){if(Array.isArray(t)){var r=c.len;return fA(t,{list:r.list[e],total:r.total[e],increase:r.increase[e]},c.start[e],c.end[e])}})):fA(c.list2,c.len,c.start,c.end),c.list=this.__reprocessing(c.list,u)),r||i}},{key:"render",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);return l.break||(this.buildCache(l.sx3,l.sy3),i=l.ctx,this.__renderPolygon(t,i,l)),l}},{key:"points",get:function(){return this.getProps("points")}},{key:"controls",get:function(){return this.getProps("controls")}},{key:"start",get:function(){return this.getProps("start")}},{key:"end",get:function(){return this.getProps("end")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,e=this.__cacheProps,i=this.__sx3,a=this.__sy3,n=this.computedStyle[nA];this.buildCache(i,a);var s=f(o(r.prototype),"bbox",this),l=0;n.forEach((function(t){l=Math.max(l,t)})),l=Math.ceil(.5*l)+1;var h=e.points,u=e.controls;t||(h=[h],u=[u]),h.forEach((function(t,e){if(!(!t||t.length<2||!t[0]||!t[1]||t[0].length<2||t[1].length<2))for(var r=u[e]||[],i=c(t[0],2),a=i[0],n=i[1],o=1,h=t.length;o<h;o++){var f=t[o];if(f&&!(f.length<2)){var _=c(t[o],2),d=_[0],y=_[1],v=r[o-1];if(v&&4===v.length){var p=sn.bboxBezier(a,n,v[0],v[1],v[2],v[3],d,y);s[0]=Math.min(s[0],p[0]-l),s[1]=Math.min(s[1],p[1]-l),s[2]=Math.max(s[2],p[2]+l),s[3]=Math.max(s[3],p[3]+l)}else if(v&&2===v.length){var g=sn.bboxBezier(a,n,v[0],v[1],d,y);s[0]=Math.min(s[0],g[0]-l),s[1]=Math.min(s[1],g[1]-l),s[2]=Math.max(s[2],g[2]+l),s[3]=Math.max(s[3],g[3]+l)}else s[0]=Math.min(s[0],a-l),s[1]=Math.min(s[1],n-l),s[2]=Math.max(s[2],a+l),s[3]=Math.max(s[3],n+l);a=d,n=y}}})),this.__bbox=s}return this.__bbox}},{key:"booleanOperations",get:function(){return this.getProps("booleanOperations")}}]),r}(Tx),uA=function(t){function r(i,a){return e(this,r),t.call(this,i,a)||this}return n(r,t),i(r,[{key:"__getPoints",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"__getPoints",this).call(this,t,e,i,a,n,s);return s||l.push(l[0]),l}}]),r}(cA),_A=b.STYLE_KEY.STROKE_WIDTH,dA=it.isNil,yA=ee.sectorPoints;function vA(t,e){return t=parseFloat(t),isNaN(t)&&(t=e),t}var pA=function(t){function r(i,a){var n;return e(this,r),(n=t.call(this,i,a)||this).isMulti?(n.__begin=[0],n.__end=[0],n.__r=[1],Array.isArray(a.begin)&&(n.__begin=a.begin.map((function(t){return vA(t,0)}))),Array.isArray(a.end)&&(n.__end=a.end.map((function(t){return vA(t,0)}))),Array.isArray(a.r)&&(n.__r=a.r.map((function(t){return vA(t,1)}))),Array.isArray(a.edge)&&(n.__edge=a.edge.map((function(t){return!!t}))),Array.isArray(a.closure)&&(n.__closure=a.closure.map((function(t){return!!t})))):(n.__begin=n.__end=0,n.__r=1,n.__edge=!1,n.__closure=!1,dA(a.begin)||(n.__begin=vA(a.begin,0)),dA(a.end)||(n.__end=vA(a.end,0)),dA(a.r)||(n.__r=vA(a.r,1)),dA(a.edge)||(n.__edge=!!a.edge),dA(a.closure)||(n.__closure=!!a.closure)),n}return n(r,t),i(r,[{key:"buildCache",value:function(t,e,r){var i,a=this.width,n=this.begin,o=this.end,s=this.r,l=this.edge,h=this.closure,f=this.__cacheProps,c=this.isMulti;if((dA(f.begin)||r)&&(i=!0,f.begin=(n||0)%360),(dA(f.end)||r)&&(i=!0,f.end=(o||0)%360),(dA(f.r)||r)&&(i=!0,f.r=c?s.map((function(t){return t*a*.5})):s*a*.5),s=f.r,(dA(f.edge)||r)&&(i=!0,f.edge=l),(dA(f.closure)||r)&&(i=!0,f.closure=h),i)if(c)f.list=[],f.sList=[],n.forEach((function(r,i){var n=dA(s[i])?.5*a:s[i],c=yA(t,e,n,parseFloat(r||0)%360,parseFloat(o[i]||0)%360),u=c.slice(0);h[i]?(c.push(c[0].slice(0)),l&&u.push(u[0].slice(0))):(c.unshift([t,e]),c.push([t,e]),l&&(u.unshift([t,e]),u.push([t,e]))),f.list.push(c),f.sList.push(u)}));else{var u=yA(t,e,s,parseFloat(n||0),parseFloat(o||0)),_=u.slice(0);h?(u.push(u[0].slice(0)),l&&_.push(_[0].slice(0))):(u.unshift([t,e]),u.push([t,e]),l&&(_.unshift([t,e]),_.push([t,e]))),f.list=u,f.sList=_}return i}},{key:"render",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);if(l.break)return l;this.buildCache(l.cx,l.cy),i=l.ctx;var h=l.fill,c=l.fillRule,u=l.stroke,_=l.strokeWidth,d=l.strokeDasharray,y=l.strokeDasharrayStr,v=l.strokeLinecap,p=l.strokeLinejoin,g=l.strokeMiterlimit,x=l.dx,m=l.dy,E=this.__cacheProps,b=E.list,T=E.sList,A=this.isMulti;if(h.length<=1&&u.length<=1){var M={fill:h[0],fillRule:c[0],stroke:u[0],strokeWidth:_[0],strokeDasharray:d[0],strokeDasharrayStr:y[0],strokeLinecap:v[0],strokeLinejoin:p[0],strokeMiterlimit:g[0],dx:x,dy:m};this.__renderOneSector(t,i,A,b,T,M)}else{for(var R=0,S=h.length;R<S;R++){var O=h[R];if(O){var C={fill:O,fillRule:c[R],dx:x,dy:m};this.__renderOneSector(t,i,A,b,T,C)}}for(var I=0,w=u.length;I<w;I++){var k=u[I];if(k){var D={stroke:k,strokeWidth:_[I],strokeDasharray:d[I],strokeDasharrayStr:y[I],strokeLinecap:v[I],strokeLinejoin:p[I],strokeMiterlimit:g[I],dx:x,dy:m};this.__renderOnePolygon(t,i,A,b,T,D)}}}return l}},{key:"__renderOneSector",value:function(t,e,r,i,a,n){var o=n.fill,s=n.stroke,l=n.strokeWidth,h="conic"===o.k,f="conic"===s.k,c="radial"===o.k&&Array.isArray(o.v),u=l>0&&"radial"===s.k&&Array.isArray(s.v);h||f?(h?this.__conicGradient(t,e,i,r,n):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),l>0&&f?Rt.warn("Stroke style can not use conic-gradient"):l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0)):c||u?(c?this.__radialEllipse(t,e,i,r,n,"fill"):o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0),l>0&&u?(Rt.warn("Stroke style can not use radial-gradient for ellipse"),n.stroke=n.stroke.v[0],this.__drawPolygon(t,e,r,a,n,!1,!0)):l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0)):(o&&"none"!==o&&this.__drawPolygon(t,e,r,i,n,!0,!1),l>0&&s&&"none"!==s&&this.__drawPolygon(t,e,r,a,n,!1,!0))}},{key:"__genSector",value:function(t,e,r,i,a,n,o,s,l){if(t){var h=[["d",e[0]],["fill",r.v||r],["stroke",i.v||i],["stroke-width",a]];this.__propsStrokeStyle(h,n,o,s,l),this.addGeom("path",h)}else if(this.addGeom("path",[["d",e[0]],["fill",r.v||r]]),a>0){var f=[["d",e[1]],["fill","none"],["stroke",i.v||i],["stroke-width",a]];this.__propsStrokeStyle(f,n,o,s,l),this.addGeom("path",f)}}},{key:"begin",get:function(){return this.getProps("begin")}},{key:"end",get:function(){return this.getProps("end")}},{key:"r",get:function(){return this.getProps("r")}},{key:"edge",get:function(){return this.getProps("edge")}},{key:"closure",get:function(){return this.getProps("closure")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,e=this.__cacheProps,i=this.__sx3,a=this.__sy3,n=this.width,s=this.height,l=this.computedStyle[_A],h=i+.5*n,c=a+.5*s;this.buildCache(h,c);var u=0;if(t){var _=0;e.r.forEach((function(t){_=Math.max(t,_)})),u=_}else u=e.r;var d=f(o(r.prototype),"bbox",this),y=0;l.forEach((function(t){y=Math.max(y,t)}));var v=h-u-(y=Math.ceil(.5*y)+1),p=h+u-y,g=c-u+y,x=c+u+y;d[0]=Math.min(d[0],v),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],p),d[3]=Math.max(d[3],x),this.__bbox=d}return this.__bbox}}]),r}(Tx),gA=b.STYLE_KEY.STROKE_WIDTH,xA=it.isNil;function mA(t,e,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(0===a||0===n)return[[t,e],[t+r,e],[t+r,e+i],[t,e+i],[t,e]];var o=a*ee.H,s=n*ee.H;return[[t+a,e],[t+r-a,e],[t+r+o-a,e,t+r,e+n-s,t+r,e+n],[t+r,e+i-n],[t+r,e+i+s-n,t+r+o-a,e+i,t+r-a,e+i],[t+a,e+i],[t+a-o,e+i,t,e+i+s-n,t,e+i-n],[t,e+n],[t,e+n-s,t+a-o,e,t+a,e]]}function EA(t){return t=parseFloat(t),isNaN(t)&&(t=0),t}var bA=function(t){function r(i,a){var n;return e(this,r),(n=t.call(this,i,a)||this).isMulti?(n.__rx=[0],n.__ry=[0],Array.isArray(a.rx)&&(n.__rx=a.rx.map((function(t){return EA(t)}))),Array.isArray(a.ry)&&(n.__ry=a.ry.map((function(t){return EA(t)})))):(n.__rx=n.__ry=0,xA(a.rx)||(n.__rx=EA(a.rx)),xA(a.ry)||(n.__ry=EA(a.ry))),n}return n(r,t),i(r,[{key:"buildCache",value:function(t,e,r){var i,a=this.width,n=this.height,o=this.rx,s=this.ry,l=this.__cacheProps,h=this.isMulti;if((xA(l.rx)||r)&&(i=!0,l.rx=h?o.map((function(t){return Math.min(t,.5)*a})):Math.min(o,.5)*a),(xA(l.ry)||r)&&(i=!0,l.ry=h?o.map((function(t){return Math.min(t,.5)*n})):Math.min(s,.5)*n),i){var f=l.rx,c=l.ry;l.list=h?f.map((function(r,i){return mA(t,e,a,n,r,c[i])})):mA(t,e,a,n,f,c)}return i}},{key:"render",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);return l.break||(this.buildCache(l.sx3,l.sy3),i=l.ctx,this.__renderPolygon(t,i,l)),l}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.__sx3,e=this.__sy3,i=this.width,a=this.height,n=this.computedStyle[gA];this.buildCache(t,e);var s=f(o(r.prototype),"bbox",this),l=0;n.forEach((function(t){l=Math.max(l,t)})),l=Math.ceil(.5*l)+1,s[0]=Math.min(s[0],t-l),s[1]=Math.min(s[1],e-l),s[2]=Math.max(s[2],t+i+l),s[3]=Math.max(s[3],e+a+l),this.__bbox=s}return this.__bbox}}]),r}(Tx),TA=b.STYLE_KEY.STROKE_WIDTH,AA=it.isNil;function MA(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var RA=function(t){function r(i,a){var n;return e(this,r),(n=t.call(this,i,a)||this).isMulti?(n.__r=[1],Array.isArray(a.r)?n.__r=a.r.map((function(t){return MA(t)})):AA(a.r)||(n.__r=MA(a.r))):(n.__r=1,AA(a.r)||(n.__r=MA(a.r))),n}return n(r,t),i(r,[{key:"buildCache",value:function(t,e,r){var i=this.width,a=this.r,n=this.__cacheProps,o=this.isMulti;(AA(n.r)||r)&&(o?(n.r=a.map((function(t){return t*i*.5})),n.list=n.r.map((function(r){return ee.ellipsePoints(t,e,r,r)}))):(n.r=a*i*.5,n.list=ee.ellipsePoints(t,e,n.r,n.r)))}},{key:"render",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);return l.break||(this.buildCache(l.cx,l.cy),i=l.ctx,this.__renderPolygon(t,i,l)),l}},{key:"r",get:function(){return this.getProps("r")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,e=this.__cacheProps,i=this.__sx3,a=this.__sy3,n=this.width,s=this.height,l=this.computedStyle[TA],h=i+.5*n,c=a+.5*s;this.buildCache(h,c);var u=0;if(t){var _=0;e.r.forEach((function(t){_=Math.max(t,_)})),u=_}else u=e.r;var d=f(o(r.prototype),"bbox",this),y=0;l.forEach((function(t){y=Math.max(y,t)}));var v=h-u-(y=Math.ceil(.5*y)+1),p=c-u-y,g=h+u+y,x=c+u+y;d[0]=Math.min(d[0],v),d[1]=Math.min(d[1],p),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],x),this.__bbox=d}return this.__bbox}}]),r}(Tx),SA=b.STYLE_KEY.STROKE_WIDTH,OA=it.isNil;function CA(t){return t=parseFloat(t),isNaN(t)&&(t=1),t}var IA=function(t){function r(i,a){var n;return e(this,r),(n=t.call(this,i,a)||this).isMulti?(n.__rx=[1],n.__ry=[1],Array.isArray(a.rx)?n.__rx=a.rx.map((function(t){return CA(t)})):OA(a.rx)||(n.__rx=[CA(a.rx)]),Array.isArray(a.ry)?n.__ry=a.ry.map((function(t){return CA(t)})):OA(a.ry)||(n.__ry=[CA(a.ry)])):(n.__rx=1,OA(a.rx)||(n.__rx=CA(a.rx)),n.__ry=1,OA(a.ry)||(n.__ry=CA(a.ry))),n}return n(r,t),i(r,[{key:"buildCache",value:function(t,e,r){var i,a=this.width,n=this.height,o=this.rx,s=this.ry,l=this.__cacheProps,h=this.isMulti;if((OA(l.rx)||r)&&(i=!0,l.rx=h?o.map((function(t){return t*a*.5})):o*a*.5),(OA(l.ry)||r)&&(i=!0,l.ry=h?s.map((function(t){return t*n*.5})):s*n*.5),i){var f=l.rx,c=l.ry;l.list=h?f.map((function(r,i){return ee.ellipsePoints(t,e,r,c[i])})):ee.ellipsePoints(t,e,f,c)}return i}},{key:"render",value:function(t,e,i,a,n,s){var l=f(o(r.prototype),"render",this).call(this,t,e,i,a,n,s);return l.break||(this.buildCache(l.cx,l.cy),i=l.ctx,this.__renderPolygon(t,i,l)),l}},{key:"rx",get:function(){return this.getProps("rx")}},{key:"ry",get:function(){return this.getProps("ry")}},{key:"bbox",get:function(){if(!this.__bbox){var t=this.isMulti,e=this.__cacheProps,i=this.__sx3,a=this.__sy3,n=this.width,s=this.height,l=this.computedStyle[SA],h=i+.5*n,c=a+.5*s;this.buildCache(h,c);var u=0,_=0;if(t){var d=0,y=0;e.rx.forEach((function(t,r){d=Math.max(t,d),y=Math.max(_,e.ry[r])})),u=d,_=y}else u=e.rx,_=e.ry;var v=f(o(r.prototype),"bbox",this),p=0;l.forEach((function(t){p=Math.max(p,t)}));var g=h-u-(p=Math.ceil(.5*p)+1),x=h+u-p,m=c-_+p,E=c+_+p;v[0]=Math.min(v[0],g),v[1]=Math.min(v[1],m),v[2]=Math.max(v[2],x),v[3]=Math.max(v[3],E),this.__bbox=v}return this.__bbox}}]),r}(Tx),wA=L.TYPE_VD,kA=L.TYPE_GM,DA=L.TYPE_CP,LA=it.isPrimitive;function FA(t,e,r,i,a){if(LA(e)||e instanceof w||e instanceof lh)return e;if(Array.isArray(e))return e.map((function(e){return FA(t,e,r,i,a)}));var n=a;a+=e.offsetTime||0;var o,s,l=e.tagName,h=e.props,f=void 0===h?{}:h,c=e.children,u=void 0===c?[]:c,_=e.animate,d=void 0===_?[]:_;if(!l)throw new Error("Dom must have a tagName: "+JSON.stringify(e));if(!Array.isArray(u))throw new Error("children must be an array");if("$"===l.charAt(0))o=t.createGm(l,f);else if(/^[A-Z]/.test(l)){var y=lh.getRegister(l);o=t.createCp(y,f,u.map((function(e){return e&&[wA,kA,DA].indexOf(e.$$type)>-1?e:FA(t,e,r,i,a)})))}else o=t.createVd(l,f,u.map((function(e){return e&&[wA,kA,DA].indexOf(e.$$type)>-1?e:FA(t,e,r,i,a)})));d&&(Array.isArray(d)||(d=[d]),d.forEach((function(t){var e=t.value;Array.isArray(e)&&e.length&&(s=!0)})),s&&r.push({animate:d,target:o,offsetTime:n}));return o}var NA={skewX:"kx",skewY:"ky",transform:"tf",fontSize:"fz",offset:"os",easing:"e",filter:"ft",boxShadow:"bd",overflow:"of",backgroundClip:"bp",textOverflow:"tof",flexWrap:"fp",perspective:"ppt",rotate3d:"r3"},PA={os:"offset",e:"easing"},BA={value:"v",options:"o"},HA={},GA={duration:"dt",delay:"d",endDelay:"ed",iterations:"i",direction:"dc",fill:"f",fps:"fp",playbackRate:"p",spfLimit:"sl"},YA={};Bt.DOM_KEY_SET.concat(Bt.GEOM_KEY_SET).forEach((function(t){if(NA.hasOwnProperty(t))PA[NA[t]]=t;else{var e=t.charAt(0)+t.replace(/[a-z]/g,"").toLowerCase();NA[t]=e,PA[e]=t}})),Object.keys(BA).forEach((function(t){HA[BA[t]]=t})),Object.keys(GA).forEach((function(t){YA[GA[t]]=t}));var WA={fullCssProperty:NA,abbrCssProperty:PA,fullAnimate:BA,abbrAnimate:HA,fullAnimateOption:GA,abbrAnimateOption:YA},UA=it.isNil,XA=it.isFunction,zA=it.isPrimitive,VA=it.clone,KA=it.extend,jA=WA.abbrCssProperty,$A=WA.abbrAnimateOption,qA=WA.abbrAnimate;function ZA(t,e){t&&Object.keys(t).forEach((function(r){if(0===r.indexOf("var-")){var i=r.slice(4);if(e.hasOwnProperty(i)){var a=e[i];t["var-"+a]=t[r]}}else if(e.hasOwnProperty(r)){var n=e[r];t[n]=t[r],delete t[r]}}))}function JA(t,e){if(t)if(t.hasOwnProperty("vars")){var r=t.vars;delete t.vars,Array.isArray(r)||(r=[r]),Array.isArray(r)&&r.forEach((function(r){var i=r.id,a=r.member;if(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.length&&"library"!==a[0]&&e&&e.hasOwnProperty(i))for(var n=t,o=0,s=a.length;o<s;o++){var l=a[o];if(!n.hasOwnProperty(l)&&o!==s-1)return void Rt.error("Slot miss "+l);if(o===s-1){var h=e[i];if(void 0===h)return;XA(h)&&(h=h(n[l])),n[l]=h}else n=n[l]}}))}else Object.keys(t).forEach((function(r){if(0===r.indexOf("var-")){var i=t[r];if(delete t[r],!i||!e)return;var a=r.slice(4);if(a&&i.id&&e.hasOwnProperty(i.id)){var n=e[i.id];if(void 0===n)return;var o=t;if(a.indexOf(".")>-1){for(var s=a.split("."),l=s.length,h=0;h<l-1;h++){if(!o[a=s[h]])return void Rt.warn("parseJson vars is not exist: "+i.id+", "+r+", "+s.slice(0,h).join("."));o=o[a]}a=s[l-1]}XA(n)&&(n=n(i)),o[a]=n}}}))}function QA(t,e,r){if(zA(t)||t instanceof w||t instanceof lh)return t;if(Array.isArray(t))return t.map((function(t){return QA(t,e,r)}));var i=t.libraryId;if(!UA(i)){var a=r[i];if(!a)throw new Error("Link library miss id: "+i);!function(t,e){t.tagName=e.tagName,t.props=VA(e.props)||{},t.children=e.children||[],e.vars&&!t.vars&&(t.vars=e.vars),e.library&&(t.library=e.library),Object.keys(e).forEach((function(r){0!==r.indexOf("var-")||t.hasOwnProperty(r)||(t[r]=e[r])})),delete t.libraryId;var r=t.init;if(r){var i=t.props,a=i.style;KA(i,r),a&&(KA(a,r.style),i.style=a),delete t.init}}(t,a)}var n=t.library;Array.isArray(n)&&(r={},n.forEach((function(t){return function(t,e){var r=t.id;if(UA(r))throw new Error("Library item miss id: "+JSON.stringify(t));e[r]=t}(t,r)})),function(t,e,r){if(t.hasOwnProperty("vars")){var i=t.vars;delete t.vars,Array.isArray(i)||(i=[i]),i.forEach((function(t){var i=t.id,a=t.member;if(Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.length>1&&r&&r.hasOwnProperty(i)&&"library"===a[0])for(var n=e,o=1,s=a.length;o<s;o++){var l=a[o];if(!n.hasOwnProperty(l)&&o!==s-1)return void Rt.error("Library slot miss "+l);if(o===s-1){var h=r[i],f=n[l];XA(h)&&(h=h(f)),n[l]=1===o?Object.assign({id:f.id,tagName:f.tagName},h):h}else n=n[l]}}))}else Object.keys(t).forEach((function(i){if(0===i.indexOf("var-library.")){var a=t[i];if(delete t[i],!a||!r)return;var n=i.slice(12);if(n&&a.id&&r.hasOwnProperty(a.id)){var o=r[a.id];XA(o)&&(o=o(a)),e[n]=Object.assign({id:n},o)}}}))}(t,r,e.vars),delete t.library);var o=t.tagName,s=t.props,l=void 0===s?{}:s,h=t.children,f=void 0===h?[]:h,c=t.animate,u=void 0===c?[]:c;if(!o)throw new Error("Dom must have a tagName: "+JSON.stringify(t));var _=l.src;if(/^#\d+$/.test(_)){var d=e.imgs,y=parseInt(_.slice(1));Array.isArray(d)&&(l.src=d[y])}var v=l.style;if(v){var p=v.fontFamily;if(/^#\d+$/.test(p)){var g=e.fonts,x=parseInt(p.slice(1));Array.isArray(g)&&(v.fontFamily=g[x])}!1!==e.abbr&&ZA(v,jA),JA(v,e.vars)}return JA(l,e.vars),JA(t,e.vars),t.children=QA(f,e,r),u&&(Array.isArray(u)||(u=[u]),u.forEach((function(t){!1!==e.abbr&&ZA(t,qA);var r=t.value,i=t.options;Array.isArray(r)&&r.length&&r.forEach((function(t){!1!==e.abbr&&ZA(t,jA),JA(t,e.vars)})),i&&(!1!==e.abbr&&ZA(i,$A),JA(i,e.vars),function(t,e){["iterations","fill","duration","direction","easing","fps","delay","endDelay","playbackRate","spfLimit"].forEach((function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}))}(i,e))}))),t}function tM(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!1===t.abbr&&(e.abbr=!1),!1!==e.abbr&&Rt.warn("Abbr in json is deprecated"),e.singleton||t.singleton||(t=it.clone(t)),QA(t,e,{})}var eM={apply:tM,parse:function(t,e,r,i){if(e){var a=e.fonts;a&&(Array.isArray(a)||(a=[a]),a.forEach((function(t){var e=t.fontFamily,r=t.url,i=t.data;e&&(r||i)&&Ct.register(e,r,i)}))),Rt.isDom(r)?i=i||{}:(i=i||r||{},r=null);var n=[],o=FA(t,e=tM(e,i),n,i,0);if(r){var s=e.tagName;if(-1===["canvas","svg","webgl"].indexOf(s))throw new Error("Parse dom must be canvas/svg/webgl");var l=i.controller instanceof vm?i.controller:o.animateController;t.render(o,r),n.forEach((function(t){t.target=t.target.vd})),!1!==i.autoPlay?(l.__records=l.__records.concat(n),l.__playAuto()):(l.__records2=l.__records2.concat(n),l.init(l.__records2,l.list2))}else n.length&&(o.__animateRecords={options:i,list:n,controller:i.controller instanceof vm?i.controller:null});return o}},loadAndParse:function(t,e,r,i){var a=e.fonts,n=e.components,o=e.imgs,s=[],l=[],h=[];a&&(Array.isArray(a)||(a=[a]),a.forEach((function(t){t.url&&s.push(t)}))),n&&(Array.isArray(n)||(n=[n]),n.forEach((function(e){var r=e.tagName,i=e.url,a=e.reload;r&&t.Component.hasRegister(r)&&!a||i&&l.push(e)}))),o&&(Array.isArray(o)||(o=[o]),o.forEach((function(t){var e=t.url;e&&h.push(e)})));var f=s.length,c=l.length,u=h.length,_=0,d=function(){if(_===f+c+u){var a=eM.parse(t,e,r,i);i&&it.isFunction(i.callback)&&i.callback(a)}};f||c||u?(t.inject.loadFont(s,(function(){_+=f,d()})),t.inject.loadComponent(l.map((function(t){return t.url})),(function(){_+=c,l.forEach((function(e){var r=e.tagName;r&&window[r]&&!t.Component.hasRegister(r)&&t.Component.register(r,window[r])})),d()})),t.inject.measureImg(h,(function(){_+=u,d()}))):d()},abbr:WA},rM={css:Ha,reset:Bt,unit:D,font:Ct,abbr:dr,transform:wo},iM={Animation:Eu,Controller:vm,easing:Jh,frame:Wh},aM={level:Fs,change:Fr,Page:vs,Cache:Ts};Tx.register("$line",JT),Tx.register("$polyline",cA),Tx.register("$polygon",uA),Tx.register("$sector",pA),Tx.register("$rect",bA),Tx.register("$circle",RA),Tx.register("$ellipse",IA);var nM={version:"0.78.3",render:function(t,e){if(!(t instanceof zT))throw new Error("Render dom must be canvas/svg/webgl");return e&&t.appendTo(e),t},createElement:function(t,e){e=e||{};for(var r=[],i=2,a=arguments.length;i<a;i++)r.push(arguments[i]);return it.isString(t)?"$"===t.charAt(0)?this.createGm(t,e):this.createVd(t,e,r):t?t instanceof Tx?this.createGm(t,e):this.createCp(t,e,r):void 0},createVd:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(["canvas","svg","webgl"].indexOf(t)>-1)return new zT(t,e,r);if(ov.TAG_NAME.hasOwnProperty(t))return{tagName:t,props:e,children:r,$$type:L.TYPE_VD};throw new Error("Can not use <".concat(t,">"))},createGm:function(t,e){return{tagName:t,props:e,$$type:L.TYPE_GM}},createCp:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.children=r,{klass:t,props:e,$$type:L.TYPE_CP}},parse:function(t,e,r){return eM.parse(this,t,e,r)},loadAndParse:function(t,e,r){return eM.loadAndParse(this,t,e,r)},mode:k,Component:lh,Node:w,Text:Il,Geom:Tx,Xom:Wy,Dom:Up,Img:Dg,Root:zT,Event:eh,util:it,inject:Rt,style:rM,parser:eM,animate:iM,math:Jn,builder:Ql,updater:Vx,refresh:aM,enums:b,set debug(t){at.flag=!!t}};return Ql.ref({Xom:Wy,Dom:Up,Img:Dg,Geom:Tx,Component:lh}),"undefined"!=typeof window?window.karas=nM:"undefined"!=typeof self&&(self.karas=nM),nM}));
//# sourceMappingURL=index.min.js.map
