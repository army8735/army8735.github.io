{"version":3,"file":"index.min.js","sources":["src/style/unit.js","src/node/Node.js","src/util/mode.js","src/util/util.js","src/math/matrix.js","src/style/transform.js","src/style/gradient.js","src/style/border.js","src/util/sort.js","src/style/font.js","src/style/css.js","src/node/LineBox.js","src/node/Text.js","src/style/match.js","src/util/Event.js","src/style/reset.js","src/animate/level.js","src/node/Component.js","src/util/inject.js","src/animate/frame.js","src/animate/easing.js","src/animate/repaint.js","src/animate/Animation.js","src/node/Xom.js","src/node/LineGroup.js","src/geom/Geom.js","src/node/Dom.js","src/node/Img.js","src/util/diff.js","src/node/Defs.js","src/node/Root.js","src/geom/Line.js","src/geom/Polyline.js","src/geom/Polygon.js","src/geom/Sector.js","src/geom/Rect.js","src/geom/Circle.js","src/geom/Ellipse.js","src/math/tar.js","src/math/index.js","src/index.js","src/util/parse.js"],"sourcesContent":["export default {\n  AUTO: 0,\n  PX: 1,\n  PERCENT: 2,\n  POSITION: 3,\n  NUMBER: 4,\n  INHERIT: 5,\n  DEG: 6,\n};\n","import unit from \"../style/unit\";\n\nclass Node {\n  constructor() {\n    this.__x = 0;\n    this.__y = 0;\n    this.__ox = 0; // relative/margin:auto/text-align等造成的偏移量\n    this.__oy = 0;\n    this.__width = 0;\n    this.__height = 0;\n    this.__prev = null;\n    this.__next = null;\n    this.__ctx = null; // canvas的context\n    this.__defs = null; // svg的defs\n    this.__parent = null;\n    this.__computedStyle = {}; // 计算为绝对值的样式\n    this.__baseLine = 0;\n    this.__virtualDom = {};\n    this.__host = null;\n  }\n\n  __offsetX(diff, isLayout) {\n    if(isLayout) {\n      this.__x += diff;\n    }\n    else {\n      this.__ox += diff;\n    }\n  }\n\n  __offsetY(diff, isLayout) {\n    if(isLayout) {\n      this.__y += diff;\n    }\n    else {\n      this.__oy += diff;\n    }\n  }\n\n  __destroy() {\n    this.__isDestroyed = true;\n    this.__prev = this.__next = this.__ctx = this.__defs = this.__parent = this.__host = null;\n  }\n\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get ox() {\n    return this.__ox;\n  }\n  get oy() {\n    return this.__oy;\n  }\n  get sx() {\n    return this.x + this.ox;\n  }\n  get sy() {\n    return this.y + this.oy;\n  }\n  get width() {\n    return this.__width;\n  }\n  get height() {\n    return this.__height;\n  }\n  get outerWidth() {\n    return this.__width;\n  }\n  get outerHeight() {\n    return this.__height;\n  }\n  get prev() {\n    return this.__prev;\n  }\n  get next() {\n    return this.__next;\n  }\n  get parent() {\n    return this.__parent;\n  }\n  // canvas/svg根节点\n  get root() {\n    if(this.host) {\n      return this.host.root;\n    }\n    if(this.parent) {\n      return this.parent.root;\n    }\n    if(this.tagName && {\n      canvas: true,\n      svg: true,\n    }.hasOwnProperty(this.tagName)) {\n      return this;\n    }\n  }\n  // component根节点\n  get host() {\n    if(this.__host) {\n      return this.__host;\n    }\n    if(this.parent) {\n      return this.parent.host;\n    }\n  }\n  get style() {\n    return this.__style;\n  }\n  get computedStyle() {\n    return this.__computedStyle;\n  }\n  get ctx() {\n    return this.__ctx;\n  }\n  get defs() {\n    return this.__defs;\n  }\n  get baseLine() {\n    return this.__baseLine;\n  }\n  get virtualDom() {\n    return this.__virtualDom;\n  }\n  get isDestroyed() {\n    return this.__isDestroyed;\n  }\n}\n\nexport default Node;\n","export default {\n  CANVAS: 0,\n  SVG: 1,\n};\n","let toString = {}.toString;\nfunction isType(type) {\n  return function(obj) {\n    return toString.call(obj) === '[object ' + type + ']';\n  }\n}\n\nlet isNumber = isType('Number');\n\nfunction joinSourceArray(arr) {\n  let res = '';\n  for(let i = 0, len = arr.length; i < len; i++) {\n    let item = arr[i];\n    if(Array.isArray(item)) {\n      res += joinSourceArray(item);\n    }\n    else {\n      res += stringify(item);\n    }\n  }\n  return res;\n}\n\nfunction stringify(s) {\n  if(isNil(s)) {\n    return '';\n  }\n  return s.toString();\n}\n\nfunction encodeHtml(s, prop) {\n  if(prop) {\n    return s.replace(/\"/g, '&quot;');\n  }\n  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n}\n\nfunction isNil(v) {\n  return v === undefined || v === null;\n}\n\n// 根元素专用\nfunction joinVirtualDom(vd) {\n  let s = '<defs>';\n  vd.defs.forEach(item => {\n    s += joinDef(item);\n  });\n  s += '</defs><g>';\n  vd.bb.forEach(item => {\n    s += joinVd(item);\n  });\n  s += '</g><g>';\n  vd.children.forEach(item => {\n    if(item.isMask) {\n      return;\n    }\n    s += joinVd(item);\n  });\n  s += '</g>';\n  return s;\n}\n\n// 普通元素\nfunction joinVd(vd) {\n  if(vd.type === 'item' || vd.type === 'img') {\n    let s = '';\n    vd.props.forEach(item => {\n      s += ` ${item[0]}=\"${item[1]}\"`;\n    });\n    if(vd.tagName === 'text') {\n      return `<text${s}>${vd.content}</text>`;\n    }\n    return `<${vd.tagName}${s}/>`;\n  }\n  else if(vd.type === 'text') {\n    let s = ``;\n    vd.children.forEach(item => {\n      s += joinVd(item);\n    });\n    return `<g>${s}</g>`;\n  }\n  else if(vd.type === 'dom' || vd.type === 'geom') {\n    let s = '<g>';\n    vd.bb.forEach(item => {\n      s += joinVd(item);\n    });\n    s += '</g><g';\n    if(vd.props) {\n      vd.props.forEach(item => {\n        s += ` ${item[0]}=\"${item[1]}\"`;\n      });\n    }\n    s += '>';\n    vd.children.forEach(item => {\n      if(item.isMask) {\n        return;\n      }\n      s += joinVd(item);\n    });\n    s += '</g>';\n    return `<g opacity=\"${vd.opacity}\" transform=\"${joinTransform(vd.transform)}\"${vd.mask ? ` mask=\"${vd.mask}\"` : ''}\">${s}</g>`;\n  }\n  // display:none或visibility:hidden会没有type，产生一个空节点供diff运行\n  return '<g></g>';\n}\n\nfunction joinTransform(transform) {\n  let s = '';\n  transform.forEach(item => {\n    s += `${item[0]}(${item[1]}) `;\n  });\n  return s;\n}\n\nfunction joinDef(def) {\n  let s = `<${def.tagName} id=\"${def.uuid}\"`;\n  if(def.tagName === 'mask') {\n    s += ' maskUnits=\"userSpaceOnUse\"';\n  }\n  else {\n    s += ' gradientUnits=\"userSpaceOnUse\"';\n  }\n  def.props.forEach(item => {\n    s += ` ${item[0]}=\"${item[1]}\"`;\n  });\n  s += '>';\n  def.children.forEach(item => {\n    s += joinItem(item);\n  });\n  s += `</${def.tagName}>`;\n  return s;\n}\n\nfunction joinItem(item) {\n  let s = `<${item.tagName}`;\n  item.props.forEach(item => {\n    s += ` ${item[0]}=\"${item[1]}\"`;\n  });\n  s += `></${item.tagName}>`;\n  return s;\n}\n\nfunction d2r(n) {\n  return n * Math.PI / 180;\n}\n\nfunction rgb2int(color) {\n  let res = [];\n  if(color.charAt(0) === '#') {\n    color = color.slice(1);\n    if(color.length === 3) {\n      res.push(parseInt(color.charAt(0) + color.charAt(0), 16));\n      res.push(parseInt(color.charAt(1) + color.charAt(1), 16));\n      res.push(parseInt(color.charAt(2) + color.charAt(2), 16));\n    }\n    else if(color.length === 6) {\n      res.push(parseInt(color.slice(0, 2), 16));\n      res.push(parseInt(color.slice(2, 4), 16));\n      res.push(parseInt(color.slice(4), 16));\n    }\n    res[3] = 1;\n  }\n  else if(color === 'transparent') {\n    return [0, 0, 0, 0];\n  }\n  else {\n    let c = color.match(/rgba?\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)(?:\\s*,\\s*([\\d.]+))?\\s*\\)/i);\n    if(c) {\n      res = [parseInt(c[1]), parseInt(c[2]), parseInt(c[3])];\n      if(c[4]) {\n        res[3] = parseFloat(c[4]);\n      }\n      else {\n        res[3] = 1;\n      }\n    }\n  }\n  return res;\n}\n\nfunction arr2hash(arr) {\n  let hash = {};\n  for(let i = 0, len = arr.length; i < len; i++) {\n    let item = arr[i];\n    if(Array.isArray(item)) {\n      hash[item[0]] = item[1];\n    }\n    else {\n      for(let list = Object.keys(item), j = list.length - 1; j >= 0; j--) {\n        let k = list[j];\n        hash[k] = item[k];\n      }\n    }\n  }\n  return hash;\n}\n\nfunction hash2arr(hash) {\n  if(Array.isArray(hash)) {\n    return hash;\n  }\n  let arr = [];\n  for(let list = Object.keys(hash), i = 0, len = list.length; i < len; i++) {\n    let k = list[i];\n    arr.push([k, hash[k]]);\n  }\n  return arr;\n}\n\nfunction clone(obj) {\n  if(isNil(obj) || typeof obj !== 'object') {\n    return obj;\n  }\n  if(util.isDate(obj)) {\n    return new Date(obj);\n  }\n  let n = Array.isArray(obj) ? [] : {};\n  for(let i in obj) {\n    if(obj.hasOwnProperty(i)) {\n      n[i] = clone(obj[i]);\n    }\n  }\n  return n;\n}\n\nfunction mergeImageData(bottom, top) {\n  let bd = bottom.data;\n  let td = top.data;\n  for(let i = 0, len = bd.length; i < len; i += 4) {\n    let rb = bd[i];\n    let gb = bd[i + 1];\n    let bb = bd[i + 2];\n    let ab = bd[i + 3];\n    let rt = td[i];\n    let gt = td[i + 1];\n    let bt = td[i + 2];\n    let at = td[i + 3];\n    if(at === 0) {}\n    else if(ab === 0 || at === 255) {\n      bd[i] = rt;\n      bd[i + 1] = gt;\n      bd[i + 2] = bt;\n      bd[i + 3] = at;\n    }\n    else {\n      let alpha1 = ab / 255;\n      let alpha2 = at / 255;\n      let alpha3 = 1 - alpha1;\n      let r = rb * alpha1 + rt * alpha2 * alpha3;\n      let g = gb * alpha1 + gt * alpha2 * alpha3;\n      let b = bb * alpha1 + bt * alpha2 * alpha3;\n      let a = 1 - (1 - alpha1) * (1 - alpha2);\n      if(a !== 0 && a !== 1) {\n        r = r / a;\n        g = g / a;\n        b = b / a;\n      }\n      bd[i] = r;\n      bd[i + 1] = g;\n      bd[i + 2] = b;\n      bd[i + 3] = a;\n    }\n  }\n  return bottom;\n}\n\nlet util = {\n  isObject: isType('Object'),\n  isString: isType('String'),\n  isFunction: isType('Function'),\n  isNumber,\n  isBoolean: isType('Boolean'),\n  isDate: isType('Date'),\n  stringify,\n  joinSourceArray(arr) {\n    return joinSourceArray(arr);\n  },\n  encodeHtml,\n  isNil,\n  joinVirtualDom,\n  joinVd,\n  joinTransform,\n  joinDef,\n  d2r,\n  rgb2int,\n  arr2hash,\n  hash2arr,\n  clone,\n  mergeImageData,\n};\n\nexport default util;\n","// 生成4*4单位矩阵\nfunction identity() {\n  const m = [];\n  for (let i = 0; i < 16; i++) {\n    m.push(i % 5 === 0 ? 1 : 0);\n  }\n  return m;\n}\n\n// 矩阵a*b\nfunction multiply(a, b) {\n  let res = [];\n  for(let i = 0; i < 4; i++) {\n    const row = [a[i], a[i + 4], a[i + 8], a[i + 12]];\n    for(let j = 0; j < 4; j++) {\n      let k = j * 4;\n      let col = [b[k], b[k + 1], b[k + 2], b[k + 3]];\n      let n = row[0] * col[0] + row[1] * col[1] + row[2] * col[2] + row[3] * col[3];\n      res[i + k] = n;\n    }\n  }\n  return res;\n}\n\nfunction t43(m) {\n  return [\n    m[0], m[1],\n    m[4], m[5],\n    m[12], m[13]\n  ];\n}\n\nfunction calPoint(point, m) {\n  let [x, y] = point;\n  return [\n    m[0] * x + m[2] * y + m[4],\n    m[1] * x + m[3] * y + m[5],\n  ];\n}\n\nexport default {\n  identity,\n  multiply,\n  t43,\n  calPoint,\n};\n","import unit from '../style/unit';\nimport util from '../util/util';\nimport matrix from '../math/matrix';\n\nfunction calMatrix(transform, transformOrigin, x, y, ow, oh) {\n  let [ox, oy] = transformOrigin;\n  let list = normalize(transform, ox, oy, ow, oh);\n  let m = matrix.identity();\n  m[12] = ox;\n  m[13] = oy;\n  list.forEach(item => {\n    let [k, v] = item;\n    let t = matrix.identity();\n    if(k === 'translateX') {\n      t[12] = v;\n    }\n    else if(k === 'translateY') {\n      t[13] = v;\n    }\n    else if(k === 'scaleX') {\n      t[0] = v;\n    }\n    else if(k === 'scaleY') {\n      t[5] = v;\n    }\n    else if(k === 'skewX') {\n      v = util.d2r(v);\n      t[4] = Math.tan(v);\n    }\n    else if(k === 'skewY') {\n      v = util.d2r(v);\n      t[1] = Math.tan(v);\n    }\n    else if(k === 'rotateZ') {\n      v = util.d2r(v);\n      let sin = Math.sin(v);\n      let cos = Math.cos(v);\n      t[0] = t[5] = cos;\n      t[1] = sin;\n      t[4] = -sin;\n    }\n    else if(k === 'matrix') {\n      t[0] = v[0];\n      t[1] = v[1];\n      t[4] = v[2];\n      t[5] = v[3];\n      t[12] = v[4];\n      t[13] = v[5];\n    }\n    m = matrix.multiply(m, t);\n  });\n  let t = matrix.identity();\n  t[12] = -ox;\n  t[13] = -oy;\n  m = matrix.multiply(m, t);\n  return matrix.t43(m);\n}\n\nfunction transformPoint(matrix, x, y) {\n  let [a, b, c, d, e, f] = matrix;\n  return [a * x + c * y + e, b * x + d * y + f];\n}\n\n// 向量积\nfunction vectorProduct(x1, y1, x2, y2) {\n  return x1 * y2 - x2 * y1;\n}\n\nfunction pointInQuadrilateral(x, y, x1, y1, x2, y2, x3, y3, x4, y4, matrix) {\n  if(matrix) {\n    [x1, y1] = transformPoint(matrix, x1, y1);\n    [x2, y2] = transformPoint(matrix, x2, y2);\n    [x3, y3] = transformPoint(matrix, x3, y3);\n    [x4, y4] = transformPoint(matrix, x4, y4);\n    if(vectorProduct(x2 - x1, y2 - y1, x - x1, y - y1) > 0\n      && vectorProduct(x4 - x2, y4 - y2, x - x2, y - y2) > 0\n      && vectorProduct(x3 - x4, y3 - y4, x - x4, y - y4) > 0\n      && vectorProduct(x1 - x3, y1 - y3, x - x3, y - y3) > 0) {\n      return true;\n    }\n  }\n  else {\n    return x >= x1 && y >= y1 && x <= x4 && y <= y4;\n  }\n}\n\nfunction normalize(transform, ox, oy, w, h) {\n  let res = [];\n  transform.forEach(item => {\n    let [k, v] = item;\n    if(k === 'translateX') {\n      if(v.unit === unit.PERCENT) {\n        res.push([item[0], v.value * w * 0.01]);\n      }\n      else {\n        res.push([item[0], item[1].value]);\n      }\n    }\n    else if(k === 'translateY') {\n      if(v.unit === unit.PERCENT) {\n        res.push([item[0], v.value * h * 0.01]);\n      }\n      else {\n        res.push([item[0], item[1].value]);\n      }\n    }\n    else if(k === 'matrix') {\n      res.push([item[0], item[1]]);\n    }\n    else {\n      res.push([item[0], item[1].value]);\n    }\n  });\n  return res;\n}\n\nfunction calOrigin(transformOrigin, x, y, w, h) {\n  let tfo = [];\n  transformOrigin.forEach((item, i) => {\n    if(item.unit === unit.PX) {\n      tfo.push(item.value);\n    }\n    else if(item.unit === unit.PERCENT) {\n      tfo.push((i ? y : x) + item.value * (i ? h : w) * 0.01);\n    }\n  });\n  return tfo;\n}\n\nfunction convert(m3) {\n  let m = matrix.identity();\n  m[0] = m3[0];\n  m[1] = m3[1];\n  m[4] = m3[2];\n  m[5] = m3[3];\n  m[12] = m3[4];\n  m[13] = m3[5];\n  return m;\n}\n\nfunction mergeMatrix(a, b) {\n  let m1 = convert(a);\n  let m2 = convert(b);\n  let m = matrix.multiply(m1, m2);\n  return [\n    m[0], m[1],\n    m[4], m[5],\n    m[12], m[13]\n  ];\n}\n\nexport default {\n  calMatrix,\n  calOrigin,\n  pointInQuadrilateral,\n  mergeMatrix,\n};\n","import util from '../util/util';\nimport unit from './unit';\n\nfunction getLinearDeg(v) {\n  let deg = 180;\n  if(v === 'to top') {\n    deg = 0;\n  }\n  else if(v === 'to top right') {\n    deg = 45;\n  }\n  else if(v === 'to right') {\n    deg = 90;\n  }\n  else if(v === 'to bottom right') {\n    deg = 135;\n  }\n  else if(v === 'to bottom') {\n  }\n  else if(v === 'to bottom left') {\n    deg = 225;\n  }\n  else if(v === 'to left') {\n    deg = 270;\n  }\n  else if(v === 'to top left') {\n    deg = 315;\n  }\n  // 数字角度，没有的话取默认角度\n  else {\n    let match = /(-?[\\d.]+)deg/.exec(v);\n    if(match) {\n      deg = parseFloat(match[1]);\n    }\n  }\n  return deg % 360;\n}\n\n// 获取color-stop区间范围，去除无用值\nfunction getColorStop(v, length) {\n  let list = [];\n  // 先把已经声明距离的换算成[0,1]以数组形式存入，未声明的原样存入\n  for(let i = 0, len = v.length; i < len; i++) {\n    let item = v[i];\n    // 考虑是否声明了位置\n    if(item.length > 1) {\n      let c = item[0];\n      let p = item[1];\n      if(p.unit === unit.PERCENT) {\n        list.push([c, p.value * 0.01]);\n      }\n      else {\n        list.push([c, p.value / length]);\n      }\n    }\n    else {\n      list.push(item[0]);\n    }\n  }\n  // 首尾不声明默认为[0, 1]\n  if(list.length > 1) {\n    if(!Array.isArray(list[0])) {\n      list[0] = [list[0], 0];\n    }\n    if(!Array.isArray(list[list.length - 1])) {\n      list[list.length - 1] = [list[list.length - 1], 1];\n    }\n  }\n  else if(!Array.isArray(list[0])) {\n    list[0] = [list[0], 0];\n  }\n  // 不是数组形式的是未声明的，需区间计算，找到连续的未声明的，前后的区间平分\n  let start = list[0][1];\n  for(let i = 1, len = list.length; i < len - 1; i++) {\n    let item = list[i];\n    if(Array.isArray(item)) {\n      start = item[1];\n    }\n    else {\n      let j = i + 1;\n      let end = list[list.length - 1][1];\n      for(; j < len - 1; j++) {\n        let item = list[j];\n        if(Array.isArray(item)) {\n          end = item[1];\n          break;\n        }\n      }\n      let num = j - i + 1;\n      let per = (end - start) / num;\n      for(let k = i; k < j; k++) {\n        let item = list[k];\n        list[k] = [item, start + per * (k + 1 - i)];\n      }\n      i = j;\n    }\n  }\n  // 每个不能小于前面的，canvas/svg不能兼容这种情况，需处理\n  for(let i = 1, len = list.length; i < len; i++) {\n    let item = list[i];\n    let prev = list[i - 1];\n    if(item[1] < prev[1]) {\n      item[1] = prev[1];\n    }\n  }\n  // 0之前的和1之后的要过滤掉\n  for(let i = 0, len = list.length; i < len - 1; i++) {\n    let item = list[i];\n    if(item[1] > 1) {\n      list.splice(i + 1);\n      break;\n    }\n  }\n  for(let i = list.length - 1; i > 0; i--) {\n    let item = list[i];\n    if(item[1] < 0) {\n      list.splice(0, i);\n      break;\n    }\n  }\n  // 可能存在超限情况，如在使用px单位超过len或<len时，canvas会报错超过[0,1]区间，需手动换算至区间内\n  let len = list.length;\n  // 在只有1个的情况下可简化\n  if(len === 1) {\n    list[0][1] = 0;\n  }\n  else {\n    // 全部都在[0,1]之外也可以简化\n    let allBefore = true;\n    let allAfter = true;\n    for(let i = len - 1; i >= 0; i--) {\n      let item = list[i];\n      let p = item[1];\n      if(p > 0) {\n        allBefore = false;\n      }\n      if(p < 1) {\n        allAfter = false;\n      }\n    }\n    if(allBefore) {\n      list.splice(0, len - 1);\n      list[0][1] = 0;\n    }\n    else if(allAfter) {\n      list.splice(1);\n      list[0][1] = 0;\n    }\n    // 部分在区间之外需复杂计算\n    else {\n      let first = list[0];\n      let last = list[len - 1];\n      // 只要2个的情况下就是首尾都落在外面\n      if(len === 2) {\n        if(first[1] < 0 && last[1] > 1) {\n          getCsLimit(first, last, length);\n        }\n      }\n      // 只有1个在外面的情况较为容易\n      else {\n        if(first[1] < 0) {\n          let next = list[1];\n          let c1 = util.rgb2int(first[0]);\n          let c2 = util.rgb2int(next[0]);\n          let c = getCsStartLimit(c1, first[1], c2, next[1], length);\n          first[0] = `rgba(${c[0]},${c[1]},${c[2]},${c[3]})`;\n          first[1] = 0;\n        }\n        if(last[1] > 1) {\n          let prev = list[len - 2];\n          let c1 = util.rgb2int(prev[0]);\n          let c2 = util.rgb2int(last[0]);\n          let c = getCsEndLimit(c1, prev[1], c2, last[1], length);\n          last[0] = `rgba(${c[0]},${c[1]},${c[2]},${c[3]})`;\n          last[1] = 1;\n        }\n      }\n    }\n  }\n  // 防止精度计算溢出[0,1]\n  list.forEach(item => {\n    if(item[1] < 0) {\n      item[1] = 0;\n    }\n    else if(item[1] > 1) {\n      item[1] = 1;\n    }\n  });\n  return list;\n}\n\n// 根据角度和圆心获取渐变的4个点坐标\nfunction calLinearCoords(deg, length, cx, cy) {\n  let x0;\n  let y0;\n  let x1;\n  let y1;\n  if(deg >= 270) {\n    let r = util.d2r(360 - deg);\n    x0 = cx + Math.sin(r) * length;\n    y0 = cy + Math.cos(r) * length;\n    x1 = cx - Math.sin(r) * length;\n    y1 = cy - Math.cos(r) * length;\n  }\n  else if(deg >= 180) {\n    let r = util.d2r(deg - 180);\n    x0 = cx + Math.sin(r) * length;\n    y0 = cy - Math.cos(r) * length;\n    x1 = cx - Math.sin(r) * length;\n    y1 = cy + Math.cos(r) * length;\n  }\n  else if(deg >= 90) {\n    let r = util.d2r(180 - deg);\n    x0 = cx - Math.sin(r) * length;\n    y0 = cy - Math.cos(r) * length;\n    x1 = cx + Math.sin(r) * length;\n    y1 = cy + Math.cos(r) * length;\n  }\n  else {\n    let r = util.d2r(deg);\n    x0 = cx - Math.sin(r) * length;\n    y0 = cy + Math.cos(r) * length;\n    x1 = cx + Math.sin(r) * length;\n    y1 = cy - Math.cos(r) * length;\n  }\n  return [x0, y0, x1, y1];\n}\n\n// 获取径向渐变半径\nfunction calRadialRadius(d, iw, ih, cx, cy, x1, y1, x2, y2) {\n  let size = 'farthest-corner';\n  let r; // 半径\n  if(/circle|ellipse|at|closest|farthest/i.test(d)) {\n    let i = d.indexOf('at');\n    let at;\n    let s;\n    if(i > -1) {\n      at = d.slice(i + 2);\n      s = d.slice(0, i - 1);\n    }\n    s = /(closest|farthest)-(side|corner)/.exec(s);\n    if(s) {\n      size = s[0];\n    }\n    // 指定宽高后size失效，置null标识\n    else {\n      s = /\\s+(-?[\\d.]+(?:px|%))\\s*(-?[\\d.]+(?:px|%))?/.exec(s);\n      if(s) {\n        size = null;\n        if(s[1].indexOf('px') > -1) {\n          r = parseFloat(s[1]) * 0.5;\n        }\n        else {\n          r = parseFloat(s[1]) * iw * 0.005;\n        }\n      }\n    }\n    if(at) {\n      s = /\\s+(-?[\\d.]+(?:px|%))\\s*(-?[\\d.]+(?:px|%))?/.exec(at);\n      if(s) {\n        if(s[1].indexOf('px') > -1) {\n          cx = x1 + parseFloat(s[1]);\n        }\n        else {\n          cx =  x1 + parseFloat(s[1]) * iw * 0.01;\n        }\n        // y可以省略，此时等同于x\n        let by = s[2] || s[1];\n        if(by.indexOf('px') > -1) {\n          cy = y1 + parseFloat(by);\n        }\n        else {\n          cy = y1 + parseFloat(by) * ih * 0.01;\n        }\n      }\n    }\n  }\n  if(size) {\n    if(size === 'closest-side') {\n      // 在边外特殊情况只有end颜色填充\n      if(cx <= x1 || cx >= x2 || cy <= y1 || cy >= y2) {\n        r = 0;\n      }\n      else {\n        let xl;\n        let yl;\n        if(cx < x1 + iw * 0.5) {\n          xl = cx - x1;\n        } else {\n          xl = x2 - cx;\n        }\n        if(cy < y1 + ih * 0.5) {\n          yl = cy - y1;\n        } else {\n          yl = y2 - cy;\n        }\n        r = Math.min(xl, yl);\n      }\n    }\n    else if(size === 'closest-corner') {\n      let xl;\n      let yl;\n      if(cx < x1 + iw * 0.5) {\n        xl = cx - x1;\n      }\n      else {\n        xl = x2 - cx;\n      }\n      if(cy < y1 + ih * 0.5) {\n        yl = cy - y1;\n      }\n      else {\n        yl = y2 - cy;\n      }\n      r = Math.sqrt(Math.pow(xl, 2) + Math.pow(yl, 2));\n    }\n    else if(size === 'farthest-side') {\n      if(cx <= x1) {\n        r = x1 - cx + iw;\n      }\n      else if(cx >= x2) {\n        r = cx - x2 + iw;\n      }\n      else if(cy <= y1) {\n        r = y1 - cy + ih;\n      }\n      else if(cx >= y2) {\n        r = cy - y2 + ih;\n      }\n      else {\n        let xl = Math.max(x2 - cx, cx - x1);\n        let yl = Math.max(y2 - cy, cy - y1);\n        r = Math.max(xl, yl);\n      }\n    }\n    // 默认farthest-corner\n    else {\n      let xl;\n      let yl;\n      if(cx < x1 + iw * 0.5) {\n        xl = x2 - cx;\n      }\n      else {\n        xl = cx - x1;\n      }\n      if(cy < y1 + ih * 0.5) {\n        yl = y2 - cy;\n      }\n      else {\n        yl = cy - y1;\n      }\n      r = Math.sqrt(Math.pow(xl, 2) + Math.pow(yl, 2));\n    }\n  }\n  return [r, cx, cy];\n}\n\n// 当linear-gradient的值超过[0,1]区间限制时，计算其对应区间1的值\nfunction getCsStartLimit(c1, p1, c2, p2, length) {\n  let [ r1, g1, b1, a1 = 1 ] = c1;\n  let [ r2, g2, b2, a2 = 1 ] = c2;\n  let l1 = Math.abs(p1) * length;\n  let l2 = p2 * length;\n  let p = l1 / (l2 + l1);\n  let r = Math.floor(r1 + (r2 - r1) * p);\n  let g = Math.floor(g1 + (g2 - g1) * p);\n  let b = Math.floor(b1 + (b2 - b1) * p);\n  let a = a1 + (a2 - a1) * p;\n  return [r, g, b, a];\n}\n\nfunction getCsEndLimit(c1, p1, c2, p2, length) {\n  let [ r1, g1, b1, a1 = 1 ] = c1;\n  let [ r2, g2, b2, a2 = 1 ] = c2;\n  let l1 = p1 * length;\n  let l2 = p2 * length;\n  let p = (length - l1) / (l2 - l1);\n  let r = Math.floor(r1 + (r2 - r1) * p);\n  let g = Math.floor(g1 + (g2 - g1) * p);\n  let b = Math.floor(b1 + (b2 - b1) * p);\n  let a = a1 + (a2 - a1) * p;\n  return [r, g, b, a];\n}\n\nfunction getCsLimit(first, last, length) {\n  let c1 = util.rgb2int(first[0]);\n  let c2 = util.rgb2int(last[0]);\n  let [ r1, g1, b1, a1 = 1 ] = c1;\n  let [ r2, g2, b2, a2 = 1 ] = c2;\n  let l1 = Math.abs(first[1]) * length;\n  let l2 = last[1] * length;\n  let p = l1 / (l1 + l2);\n  let r = Math.floor(r1 + (r2 - r1) * p);\n  let g = Math.floor(g1 + (g2 - g1) * p);\n  let b = Math.floor(b1 + (b2 - b1) * p);\n  let a = a1 + (a2 - a1) * p;\n  first[0] = `rgba(${r},${g},${b},${a})`;\n  first[1] = 0;\n  p = (length + l1) / (l1 + l2);\n  r = Math.floor(r1 + (r2 - r1) * p);\n  g = Math.floor(g1 + (g2 - g1) * p);\n  b = Math.floor(b1 + (b2 - b1) * p);\n  a = a1 + (a2 - a1) * p;\n  last[0] = `rgba(${r},${g},${b},${a})`;\n  last[1] = 1;\n}\n\nfunction parseGradient(s) {\n  let gradient = /\\b(\\w+)-gradient\\((.+)\\)/.exec(s);\n  if(gradient) {\n    let o = {\n      k: gradient[1],\n    };\n    let deg = /(-?[\\d.]+deg)|(to\\s+[toprighbml]+)|circle|ellipse|at|closest|farthest|((closest|farthest)-(side|corner))/.exec(gradient[2]);\n    let v = gradient[2].match(/((#[0-9a-f]{3,6})|(rgba?\\(.+?\\)))(\\s+-?[\\d.]+(px|%))?/ig);\n    o.v = v.map(item => {\n      let arr = item.split(/\\s+/);\n      if(arr[1]) {\n        if(/%$/.test(arr[1])) {\n          arr[1] = {\n            value: parseFloat(arr[1]),\n            unit: unit.PERCENT,\n            str: arr[1],\n          };\n        }\n        else {\n          arr[1] = {\n            value: parseFloat(arr[1]),\n            unit: unit.PX,\n            str: arr[1],\n          };\n        }\n      }\n      return arr;\n    });\n    if(deg) {\n      let i = gradient[2].indexOf(',');\n      if(o.k === 'linear') {\n        o.d = getLinearDeg(gradient[2].slice(0, i));\n      }\n      else {\n        o.d = gradient[2].slice(0, i);\n      }\n    }\n    else {\n      if(o.k === 'linear') {\n        o.d = 180;\n      }\n      else {\n        o.d = 'farthest-corner';\n      }\n    }\n    return o;\n  }\n}\n\nfunction getLinear(v, d, cx, cy, w, h) {\n  let theta = util.d2r(d);\n  let length = Math.abs(w * Math.sin(theta)) + Math.abs(h * Math.cos(theta));\n  let [x1, y1, x2, y2] = calLinearCoords(d, length * 0.5, cx, cy);\n  let stop = getColorStop(v, length);\n  return {\n    x1,\n    y1,\n    x2,\n    y2,\n    stop,\n  };\n}\n\nfunction getRadial(v, d, cx, cy, x1, y1, x2, y2) {\n  let w = x2 - x1;\n  let h = y2 - y1;\n  let [r, cx2, cy2] = calRadialRadius(d, w, h, cx, cy, x1, y1, x2, y2);\n  let stop = getColorStop(v, r * 2);\n  // 超限情况等同于只显示end的bgc\n  if(r <= 0) {\n    let end = stop[stop.length - 1];\n    end[1] = 0;\n    stop = [end];\n    cx2 = x1;\n    cy2 = y1;\n    // 肯定大于最长直径\n    r = w + h;\n  }\n  return {\n    cx: cx2,\n    cy: cy2,\n    r,\n    stop,\n  };\n}\n\nexport default {\n  parseGradient,\n  getLinear,\n  getRadial,\n};\n","/* 获取合适的虚线实体空白宽度ps/pd和数量n\n * 总长total，start边长bs，end边长be，内容长w，\n * 实体长范围[smin,smax]，空白长范围[dmin,dmax]\n */\nfunction calFitDashed(total, bs, be, w, smin, smax, dmin, dmax) {\n  let n = 1;\n  let ps = 1;\n  let pd = 1;\n  // 从最大实体空白长开始尝试\n  outer:\n  for(let i = smax; i >= smin; i--) {\n    for(let j = dmax; j >= dmin; j--) {\n      // 已知实体空白长度，n实体和n-1空白组成total，计算获取n数量\n      let per = i + j;\n      let num = Math.floor((total + j) / per);\n      let k = j;\n      // 可能除不尽，此时扩展空白长\n      if(num * per < j + total) {\n        let free = total - num * i;\n        k = free / (num - 1);\n        if(k > dmax) {\n          continue;\n        }\n      }\n      per = i + k;\n      // bs比实体大才有效，因为小的话必定和第一个实体完整相连\n      if(bs > 1 && bs > i) {\n        let mo = bs % per;\n        if(mo > i) {\n          continue;\n        }\n        if(be > 1) {\n          let mo = (bs + w) % per;\n          if(mo > i) {\n            continue;\n          }\n        }\n      }\n      if(be > 1) {\n        let mo = (bs + w) % per;\n        if(mo > i) {\n          continue;\n        }\n      }\n      if(num > 0) {\n        n = num;\n        ps = i;\n        pd = k;\n      }\n      break outer;\n    }\n  }\n  return {\n    n,\n    ps,\n    pd,\n  };\n}\n\n// dashed时n个实线和n-1虚线默认以3:1宽度组成，dotted则是n和n以1:1组成\nfunction calDashed(style, m1, m2, m3, m4, bw) {\n  let total = m4 - m1;\n  let w = m3 - m2;\n  let bs = m2 - m1;\n  let be = m4 - m3;\n  if(style === 'dotted') {\n    return calFitDashed(total, bs, be, w, bw, bw, Math.max(1, bw * 0.25), bw * 2);\n  }\n  else {\n    let { n, ps, pd } = calFitDashed(total, bs, be, w, bw, bw * 3, Math.max(1, bw * 0.25), bw * 2);\n    if(n === 1) {\n      return calFitDashed(total, bs, be, w, bw, bw, Math.max(1, bw * 0.25), bw * 2);\n    }\n    // 降级为dotted\n    return { n, ps, pd };\n  }\n}\n\n// 获取边框分割为几块的坐标，虚线分割为若干四边形和三边型\n// direction为上右下左0123\nfunction calPoints(borderWidth, borderStyle, deg1, deg2, x1, x2, x3, x4, y1, y2, y3, y4, direction) {\n  let points = [];\n  if(['dashed', 'dotted'].indexOf(borderStyle) > -1) {\n    // 寻找一个合适的虚线线段长度和之间空白边距长度\n    let { n, ps, pd } = (direction === 0 || direction === 2)\n      ? calDashed(borderStyle, x1, x2, x3, x4, borderWidth)\n      : calDashed(borderStyle, y1, y2, y3, y4, borderWidth);\n    if(n > 1) {\n      for(let i = 0; i < n; i++) {\n        // 最后一个可能没有到底，延长之\n        let isLast = i === n - 1;\n        let main1;\n        let main2;\n        let cross1;\n        let cross2;\n        if(direction === 0 || direction === 2) {\n          main1 = i ? (x1 + ps * i + pd * i) : x1;\n        }\n        else {\n          main1 = i ? (y1 + ps * i + pd * i) : y1;\n        }\n        main2 = main1 + ps;\n        if(direction === 0) {\n          // 整个和borderLeft重叠\n          if(main2 < x2) {\n            if(isLast) {\n              points.push([x1, y1, x4, y1, x3, y2, x2, y2]);\n            }\n            else {\n              cross1 = y1 + (main1 - x1) * Math.tan(deg1);\n              cross2 = y1 + (main2 - x1) * Math.tan(deg1);\n              points.push([main1, y1, main2, y1, main2, cross2, main1, cross1]);\n            }\n          }\n          // 整个和borderRight重叠\n          else if(main1 > x3) {\n            cross1 = y1 + (x4 - main1) * Math.tan(deg2);\n            cross2 = y1 + (x4 - main2) * Math.tan(deg2);\n            if(isLast) {\n              points.push([main1, y1, x4, y1, main1, cross1]);\n            }\n            else {\n              points.push([main1, y1, main2, y1, main2, cross2, main1, cross1]);\n            }\n          }\n          // 不被整个重叠的情况再细分\n          else {\n            // 上部分和borderLeft重叠\n            if(main1 < x2) {\n              cross1 = y1 + (main1 - x1) * Math.tan(deg1);\n              if(isLast) {\n                points.push([main1, y1, x4, y1, x3, y2, x2, y2, main1, cross1]);\n              }\n              else {\n                // 下部分和borderRight重叠\n                if(main2 > x3) {\n                  points.push([main1, y1, main2, y1, x3, y2, x2, y2, main1, cross1]);\n                }\n                // 下部独立\n                else {\n                  points.push([main1, y1, main2, y1, main2, y2, x2, y2, main1, cross1]);\n                }\n              }\n            }\n            // 下部分和borderRight重叠\n            else if(main2 > x3) {\n              cross1 = y1 + (x4 - main2) * Math.tan(deg2);\n              // 上部分和borderLeft重叠\n              if(main1 < x2) {\n                if(isLast) {\n                  points.push([main1, y1, x4, y1, x3, y2, x2, y2, main1, cross1]);\n                }\n                else {\n                  points.push([main1, y1, main2, y1, main2, cross1, x3, y2, x2, y2, main1, cross1]);\n                }\n              }\n              // 上部独立\n              else {\n                if(isLast) {\n                  points.push([main1, y1, x4, y1, x3, y2, main1, y2]);\n                }\n                else {\n                  points.push([main1, y1, main2, y1, main2, cross1, x3, y2, main1, y2]);\n                }\n              }\n            }\n            // 完全独立\n            else {\n              if(isLast) {\n                points.push([main1, y1, x4, y1, x3, y2, main1, y2]);\n              }\n              else {\n                points.push([main1, y1, main2, y1, main2, y2, main1, y2]);\n              }\n            }\n          }\n        }\n        else if(direction === 1) {\n          // 整个和borderTop重叠\n          if(main2 < y2) {\n            if(isLast) {\n              points.push([x3, y2, x4, y1, x4, y4, x3, y3]);\n            }\n            else {\n              cross1 = x4 - (main2 - y1) * Math.tan(deg1);\n              cross2 = x4 - (main1 - y1) * Math.tan(deg1);\n              points.push([cross1, main2, cross2, main1, x4, main1, x4, main2]);\n            }\n          }\n          // 整个和borderBottom重叠\n          else if(main1 > y3) {\n            cross1 = x3 + (main1 - y3) * Math.tan(deg2);\n            cross2 = x3 + (main2 - y3) * Math.tan(deg2);\n            if(isLast) {\n              points.push([cross1, main1, x4, main1, x4, y4]);\n            }\n            else {\n              points.push([cross1, main1, x4, main1, x4, main2, cross2, main2]);\n            }\n          }\n          // 不被整个重叠的情况再细分\n          else {\n            // 上部分和borderTop重叠\n            if(main1 < y2) {\n              cross1 = x3 + (y2 - main1) * Math.tan(deg1);\n              if(isLast) {\n                points.push([x3, y2, cross1, main1, x4, main1, x4, y4, x3, y4]);\n              } else {\n                // 下部分和borderBottom重叠\n                if(main2 > y3) {\n                  points.push([x3, y2, cross1, main1, x4, main1, x4, main2, cross1, main2, x3, y3]);\n                }\n                // 下部独立\n                else {\n                  points.push([x3, y2, cross1, main1, x4, main1, x4, main2, x3, main2]);\n                }\n              }\n            }\n            // 下部分和borderBottom重叠\n            else if(main2 > y3) {\n              cross1 = x3 + (main2 - y3) * Math.tan(deg2);\n              // 上部分和borderTop重叠\n              if(main1 < y2) {\n                if(isLast) {\n                  points.push([x3, y2, cross1, main1, x4, main1, x4, y4, x3, y3]);\n                } else {\n                  points.push([x3, y2, cross1, main1, x4, main1, x4, main2, cross1, main2, x3, y3]);\n                }\n              }\n              // 上部独立\n              else {\n                if(isLast) {\n                  points.push([x3, main1, x4, main1, x4, y4, x3, y3]);\n                } else {\n                  points.push([x3, main1, x4, main1, x4, main2, cross1, main2, x3, y3]);\n                }\n              }\n            }\n            // 完全独立\n            else {\n              if(isLast) {\n                points.push([x3, main1, x4, main1, x4, y4, x3, y3]);\n              } else {\n                points.push([x3, main1, x4, main1, x4, main2, x3, main2]);\n              }\n            }\n          }\n        }\n        else if(direction === 2) {\n          // 整个和borderLeft重叠\n          if(main2 < x2) {\n            if(isLast) {\n              points.push([x1, y4, x2, y3, x3, y3, x4, y4]);\n            }\n            else {\n              cross1 = y4 - (main1 - x1) * Math.tan(deg1);\n              cross2 = y4 - (main2 - x1) * Math.tan(deg1);\n              points.push([main1, cross1, main2, cross2, main2, y4, main1, y4]);\n            }\n          }\n          // 整个和borderRight重叠\n          else if(main1 > x3) {\n            cross1 = y4 - (main1 - x1) * Math.tan(deg2);\n            cross2 = y4 - (main2 - x1) * Math.tan(deg2);\n            if(isLast) {\n              points.push([main1, cross1, x4, y4, main1, y4]);\n            }\n            else {\n              points.push([main1, cross1, main2, cross2, main2, y4, main1, y4]);\n            }\n          }\n          // 不被整个重叠的情况再细分\n          else {\n            // 上部分和borderLeft重叠\n            if(main1 < x2) {\n              cross1 = y3 + (main1 - x1) * Math.tan(deg1);\n              if(isLast) {\n                points.push([main1, cross1, x2, y3, x3, y3, x4, y4, main1, y4]);\n              }\n              else {\n                // 下部分和borderRight重叠\n                if(main2 > x3) {\n                  points.push([main1, cross1, x2, y3, x3, y3, main2, y4, main1, y4]);\n                }\n                // 下部独立\n                else {\n                  points.push([main1, cross1, x2, y3, main2, y3, main2, y4, main1, y4]);\n                }\n              }\n            }\n            // 下部分和borderRight重叠\n            else if(main2 > x3) {\n              cross1 = y4 - (x4 - main2) * Math.tan(deg2);\n              // 上部分和borderLeft重叠\n              if(main1 < x2) {\n                if(isLast) {\n                  points.push([main1, cross1, x3, y3, x4, y4, main1, y4]);\n                }\n                else {\n                  points.push([main1, cross1, x3, y3, main2, cross1, main2, y4, main1, y4]);\n                }\n              }\n              // 上部独立\n              else {\n                if(isLast) {\n                  points.push([main1, y3, x3, y3, x4, y4, main1, y4]);\n                }\n                else {\n                  points.push([main1, y3, x3, y3, main2, cross1, main2, y4, main1, y4]);\n                }\n              }\n            }\n            // 完全独立\n            else {\n              if(isLast) {\n                points.push([main1, y3, x3, y3, x4, y4, main1, y4]);\n              }\n              else {\n                points.push([main1, y3, main2, y3, main2, y4, main1, y4]);\n              }\n            }\n          }\n        }\n        else if(direction === 3) {\n          // 整个和borderTop重叠\n          if(main2 < y2) {\n            if(isLast) {\n              points.push([x1, y1, x2, y2, x2, y3, x1, y4]);\n            }\n            else {\n              cross1 = x1 + (main1 - y1) * Math.tan(deg1);\n              cross2 = x1 + (main2 - y1) * Math.tan(deg1);\n              points.push([x1, main1, cross1, main1, cross2, main2, x1, main2]);\n            }\n          }\n          // 整个和borderBottom重叠\n          else if(main1 > y3) {\n            cross1 = x1 + (y4 - main1) * Math.tan(deg2);\n            cross2 = x1 + (y4 - main2) * Math.tan(deg2);\n            if(isLast) {\n              points.push([x1, main1, cross1, main1, x1, y4]);\n            }\n            else {\n              points.push([x1, main1, cross1, main1, cross2, main2, x1, main2]);\n            }\n          }\n          // 不被整个重叠的情况再细分\n          else {\n            // 上部分和borderTop重叠\n            if(main1 < y2) {\n              cross1 = x1 + (main1 - y1) * Math.tan(deg1);\n              if(isLast) {\n                points.push([x1, main1, cross1, main1, x2, y2, x2, y3, x1, y4]);\n              }\n              else {\n                // 下部分和borderBottom重叠\n                if(main2 > y3) {\n                  points.push([x1, main1, cross1, main1, x2, y2, x2, y3, cross1, main2, x1, main2]);\n                }\n                // 下部独立\n                else {\n                  points.push([x1, main1, cross1, main1, x2, y2, x2, main2, x1, main2]);\n                }\n              }\n            }\n            // 下部分和borderBottom重叠\n            else if(main2 > y3) {\n              cross1 = x1 + (y4 - main2) * Math.tan(deg2);\n              // 上部分和borderTop重叠\n              if(main1 < y2) {\n                if(isLast) {\n                  points.push([x1, main1, cross1, main1, x2, y2, x2, y3, x1, y4]);\n                }\n                else {\n                  points.push([x1, main1, cross1, main1, x2, y2, x2, y3, cross1, main2, x1, main2]);\n                }\n              }\n              // 上部独立\n              else {\n                if(isLast) {\n                  points.push([x1, main1, x2, main1, x2, y3, x1, y4]);\n                }\n                else {\n                  points.push([x1, main1, x2, main1, x2, y3, cross1, main2, x1, main2]);\n                }\n              }\n            }\n            // 完全独立\n            else {\n              if(isLast) {\n                points.push([x1, main1, x2, main1, x2, y3, x1, y4]);\n              }\n              else {\n                points.push([x1, main1, x2, main1, x2, main2, x1, main2]);\n              }\n            }\n          }\n        }\n      }\n      return points;\n    }\n  }\n  // 兜底返回实线\n  if(direction === 0) {\n    points.push([x1, y1, x4, y1, x3, y2, x2, y2]);\n  }\n  else if(direction === 1){\n    points.push([x3, y2, x4, y1, x4, y4, x3, y3]);\n  }\n  else if(direction === 2){\n    points.push([x1, y4, x2, y3, x3, y3, x4, y4]);\n  }\n  else if(direction === 3){\n    points.push([x1, y1, x2, y2, x2, y3, x1, y4]);\n  }\n  return points;\n}\n\nexport default {\n  calDashed,\n  calPoints,\n};\n","function quickSort(arr, begin, end, compare) {\n  if(begin >= end) {\n    return;\n  }\n  let i = begin, j = end, p = i, v = arr[p], seq = true;\n  while(i < j) {\n    if(seq) {\n      for(; i < j; j--) {\n        if(compare.call(arr, v, arr[j])) {\n          swap(arr, p, j);\n          p = j;\n          seq = !seq;\n          i++;\n          break;\n        }\n      }\n    }\n    else {\n      for(; i < j; i++) {\n        if(compare.call(arr, arr[i], v)) {\n          swap(arr, p, i);\n          p = i;\n          seq = !seq;\n          j--;\n          break;\n        }\n      }\n    }\n  }\n  quickSort(arr, begin, p - 1, compare);\n  quickSort(arr, p + 1, end, compare);\n}\nfunction swap(arr, a, b) {\n  let temp = arr[a];\n  arr[a] = arr[b];\n  arr[b] = temp;\n}\n\nexport default function(arr, compare) {\n  if(!Array.isArray(arr) || arr.length < 2) {\n    return arr;\n  }\n  compare = compare || function() {};\n  quickSort(arr, 0, arr.length - 1, compare);\n  return arr;\n};\n","'use strict';\n\nexport default {\n  arial: {\n    lhr: 1.14990234375, // 默认line-height ratio，(67+1854+434)/2048\n    car: 1.1171875, // content-area ratio，(1854+434)/2048\n    blr: 0.9052734375, // base-line ratio，1854/2048\n    mdr: 0.64599609375, // middle ratio，(1854-1062/2)/2048\n    lgr: 0.03271484375, // line-gap ratio，67/2048\n  },\n};\n","import unit from './unit';\nimport font from './font';\nimport gradient from './gradient';\nimport util from '../util/util';\n\nfunction parserOneBorder(style, direction) {\n  let key = `border${direction}`;\n  if(!style[key]) {\n    return;\n  }\n  let w = /\\b[\\d.]+px\\b/i.exec(style[key]);\n  if(w) {\n    style[key + 'Width'] = w[0];\n  }\n  let s = /\\b(solid|dashed|dotted)\\b/i.exec(style[key]);\n  if(s) {\n    style[key + 'Style'] = s[1];\n  }\n  let c = /#[0-9a-f]{3,6}/i.exec(style[key]);\n  if(c && [4, 7].indexOf(c[0].length) > -1) {\n    style[key + 'Color'] = c[0];\n  }\n  else if(/\\btransparent\\b/i.test(style[key])) {\n    style[key + 'Color'] = 'transparent';\n  }\n  else {\n    c = /rgba?\\(.+\\)/i.exec(style[key]);\n    if(c) {\n      style[key + 'Color'] = c[0];\n    }\n  }\n}\n\nfunction calUnit(obj, k, v) {\n  if(v === 'auto') {\n    obj[k] = {\n      unit: unit.AUTO,\n    };\n  }\n  else if(v === 'inherit') {\n    obj[k] = {\n      unit: unit.INHERIT,\n    };\n  }\n  else if(/px$/.test(v)) {\n    v = parseFloat(v) || 0;\n    obj[k] = {\n      value: v,\n      unit: unit.PX,\n    };\n  }\n  else if(/%$/.test(v)) {\n    // border不支持百分比\n    if(k.toString().indexOf('border') === 0) {\n      obj[k] = {\n        value: 0,\n        unit: unit.PX,\n      };\n    }\n    else {\n      v = parseFloat(v) || 0;\n      obj[k] = {\n        value: v,\n        unit: unit.PERCENT,\n      };\n    }\n  }\n  else {\n    v = parseFloat(v) || 0;\n    obj[k] = {\n      value: v,\n      unit: unit.PX,\n    };\n  }\n  return obj;\n}\n\nfunction normalize(style, reset) {\n  // 默认reset\n  if(reset) {\n    reset.forEach(item => {\n      if(!style.hasOwnProperty(item.k)) {\n        style[item.k] = item.v;\n      }\n    });\n  }\n  let temp = style.background;\n  // 处理渐变背景色\n  if(temp) {\n    // 优先gradient，没有再考虑颜色\n    let gd = gradient.parseGradient(temp);\n    if(gd) {\n      style.backgroundImage = gd;\n    }\n    else {\n      let bgc = /#[0-9a-f]{3,6}/i.exec(temp);\n      if(bgc && [4, 7].indexOf(bgc[0].length) > -1) {\n        style.backgroundColor = bgc[0];\n      }\n      else {\n        bgc = /rgba?\\(.+\\)/i.exec(temp);\n        if(bgc) {\n          style.backgroundColor = bgc[0];\n        }\n      }\n    }\n  }\n  // 处理缩写\n  temp = style.flex;\n  if(temp) {\n    if(temp === 'none') {\n      style.flexGrow = 0;\n      style.flexShrink = 0;\n      style.flexBasis = 'auto';\n    }\n    else if(temp === 'auto') {\n      style.flexGrow = 1;\n      style.flexShrink = 1;\n      style.flexBasis = 'auto';\n    }\n    else if(/^[\\d.]+$/.test(temp)) {\n      style.flexGrow = parseFloat(temp);\n      style.flexShrink = 1;\n      style.flexBasis = 0;\n    }\n    else if(/^[\\d.]+px$/.test(temp)) {}\n    else if(/^[\\d.]+%$/.test(temp)) {}\n    else {\n      style.flexGrow = 0;\n      style.flexShrink = 1;\n      style.flexBasis = 'auto';\n    }\n  }\n  temp = style.border;\n  if(temp) {\n    style.borderTop = style.borderRight = style.borderBottom = style.borderLeft = temp;\n  }\n  temp = style.margin;\n  if(temp) {\n    let match = temp.toString().match(/(-?[\\d.]+(px|%)?)|(auto)/ig);\n    if(match) {\n      if(match.length === 1) {\n        match[3] = match[2] = match[1] = match[0];\n      }\n      else if(match.length === 2) {\n        match[2] = match[0];\n        match[3] = match[1];\n      }\n      else if(match.length === 3) {\n        match[3] = match[1];\n      }\n      style.marginTop = match[0];\n      style.marginRight = match[1];\n      style.marginBottom = match[2];\n      style.marginLeft = match[3];\n    }\n  }\n  temp = style.padding;\n  if(temp) {\n    let match = temp.toString().match(/(-?[\\d.]+(px|%)?)|(auto)/ig);\n    if(match) {\n      if(match.length === 1) {\n        match[3] = match[2] = match[1] = match[0];\n      }\n      else if(match.length === 2) {\n        match[2] = match[0];\n        match[3] = match[1];\n      }\n      else if(match.length === 3) {\n        match[3] = match[1];\n      }\n      style.paddingTop = match[0];\n      style.paddingRight = match[1];\n      style.paddingBottom = match[2];\n      style.paddingLeft = match[3];\n    }\n  }\n  temp = style.transform;\n  if(temp) {\n    let match = temp.toString().match(/\\w+\\(.+?\\)/g);\n    if(match) {\n      let transform = style.transform = [];\n      match.forEach(item => {\n        let i = item.indexOf('(');\n        let k = item.slice(0, i);\n        let v = item.slice(i + 1, item.length - 1);\n        if(k === 'matrix') {\n          let arr = v.split(/\\s*,\\s*/);\n          arr = arr.map(item => parseFloat(item));\n          if(arr.length > 6) {\n            arr = arr.slice(0, 6);\n          }\n          if(arr.length === 6) {\n            transform.push(['matrix', arr]);\n          }\n        }\n        else if(k === 'translateX') {\n          let arr = ['translateX', v];\n          transform.push(calUnit(arr, 1, v));\n        }\n        else if(k === 'translateY') {\n          let arr = ['translateY', v];\n          transform.push(calUnit(arr, 1, v));\n        }\n        else if(k === 'translate') {\n          let arr = v.split(/\\s*,\\s*/);\n          let arr1 = ['translateX', arr[0]];\n          let arr2 = ['translateY', arr[1] || arr[0]];\n          transform.push(calUnit(arr1, 1, arr[0]));\n          transform.push(calUnit(arr2, 1, arr[1] || arr[0]));\n        }\n        else if(k === 'scaleX') {\n          transform.push(['scaleX', {\n            value: parseFloat(v) || 0,\n            unit: unit.NUMBER,\n          }]);\n        }\n        else if(k === 'scaleY') {\n          transform.push(['scaleY', {\n            value: parseFloat(v) || 0,\n            unit: unit.NUMBER,\n          }]);\n        }\n        else if(k === 'scale') {\n          let arr = v.split(/\\s*,\\s*/);\n          let x = parseFloat(arr[0]) || 0;\n          let y = parseFloat(arr[arr.length - 1]) || 0;\n          transform.push(['scaleX', {\n            value: x,\n            unit: unit.NUMBER,\n          }]);\n          transform.push(['scaleY', {\n            value: y,\n            unit: unit.NUMBER,\n          }]);\n        }\n        else if(k === 'rotateZ' || k === 'rotate') {\n          transform.push(['rotateZ', {\n            value: parseFloat(v) || 0,\n            unit: unit.DEG,\n          }]);\n        }\n        else if(k === 'skewX') {\n          transform.push(['skewX', {\n            value: parseFloat(v) || 0,\n            unit: unit.DEG,\n          }]);\n        }\n        else if(k === 'skewY') {\n          transform.push(['skewY', {\n            value: parseFloat(v) || 0,\n            unit: unit.DEG,\n          }]);\n        }\n        else if(k === 'skew') {\n          let arr = v.split(/\\s*,\\s*/);\n          let x = parseFloat(arr[0]) || 0;\n          let y = parseFloat(arr[arr.length - 1]) || 0;\n          transform.push(['skewX', {\n            value: x,\n            unit: unit.DEG,\n          }]);\n          transform.push(['skewY', {\n            value: y,\n            unit: unit.DEG,\n          }]);\n        }\n      });\n    }\n  }\n  temp = style.transformOrigin;\n  if(temp) {\n    let match = temp.toString().match(/(-?[\\d.]+(px|%)?)|(left|top|right|bottom|center)/ig);\n    if(match) {\n      if(match.length === 1) {\n        match[1] = match[0];\n      }\n      let tfo = [];\n      for(let i = 0; i < 2; i++) {\n        let item = match[i];\n        if(/px$/.test(item)) {\n          tfo.push({\n            value: parseFloat(item),\n            unit: unit.PX,\n          });\n        }\n        else if(/%$/.test(item)) {\n          tfo.push({\n            value: parseFloat(item),\n            unit: unit.PERCENT,\n          });\n        }\n        else {\n          tfo.push({\n            value: {\n              0: 0,\n              top: 0,\n              left: 0,\n              center: 50,\n              right: 100,\n              bottom: 100,\n            }[item],\n            unit: unit.PERCENT,\n          });\n        }\n      }\n      style.transformOrigin = tfo;\n    }\n  }\n  temp = style.opacity;\n  if(temp) {\n    temp = parseFloat(temp);\n    if(!isNaN(temp)) {\n      temp = Math.max(temp, 0);\n      temp = Math.min(temp, 1);\n      style.opacity = temp;\n    }\n  }\n  parserOneBorder(style, 'Top');\n  parserOneBorder(style, 'Right');\n  parserOneBorder(style, 'Bottom');\n  parserOneBorder(style, 'Left');\n  // 转化不同单位值为对象标准化\n  [\n    'marginTop',\n    'marginRight',\n    'marginBottom',\n    'marginLeft',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n    'borderTopWidth',\n    'borderRightWidth',\n    'borderBottomWidth',\n    'borderLeftWidth',\n    'top',\n    'right',\n    'bottom',\n    'left',\n    'width',\n    'height',\n    'flexBasis',\n    'fontSize',\n    'strokeWidth'\n  ].forEach(k => {\n    let v = style[k];\n    if(!style.hasOwnProperty(k)) {\n      return;\n    }\n    calUnit(style, k, v);\n  });\n  temp = style.fontWeight;\n  if(temp || temp === 0) {\n    if(temp === 'bold') {\n      style.fontWeight = 700;\n    }\n    else if(temp === 'normal') {\n      style.fontWeight = 400;\n    }\n    else if(temp === 'lighter') {\n      style.fontWeight = 200;\n    }\n    else if(temp !== 'inherit') {\n      style.fontWeight = parseInt(temp) || 400;\n    }\n  }\n  temp = style.lineHeight;\n  if(temp || temp === 0) {\n    if(temp === 'inherit') {\n      style.lineHeight = {\n        unit: unit.INHERIT,\n      };\n    }\n    if(temp === 'normal') {\n      style.lineHeight = {\n        unit: unit.AUTO,\n      };\n    }\n    else if(/px$/.test(temp)) {\n      style.lineHeight = {\n        value: parseFloat(temp),\n        unit: unit.PX,\n      };\n    }\n    else {\n      let n = parseFloat(temp) || 'normal';\n      // 非法数字\n      if(n === 'normal') {\n        style.lineHeight = {\n          unit: unit.AUTO,\n        };\n      }\n      else {\n        style.lineHeight = {\n          value: n,\n          unit: unit.NUMBER,\n        };\n      }\n    }\n  }\n  temp = style.strokeDasharray;\n  if(temp) {\n    let match = temp.toString().match(/[\\d.]+/g);\n    if(match) {\n      style.strokeDasharray = match.join(', ');\n    }\n    else {\n      style.strokeDasharray = '';\n    }\n  }\n  // fill和stroke为渐变时特殊处理\n  temp = style.fill;\n  if(temp && temp.indexOf('-gradient(') > 0) {\n    style.fill = gradient.parseGradient(temp);\n  }\n  temp = style.stroke;\n  if(temp && temp.indexOf('-gradient(') > 0) {\n    style.stroke = gradient.parseGradient(temp);\n  }\n  // 删除缩写避免干扰动画计算\n  delete style.background;\n  delete style.flex;\n  delete style.border;\n  delete style.margin;\n  delete style.padding;\n  return style;\n}\n\nfunction computedFontSize(computedStyle, fontSize, parentComputedStyle, isRoot) {\n  if(fontSize.unit === unit.INHERIT) {\n    computedStyle.fontSize = isRoot ? 16 : parentComputedStyle.fontSize;\n  }\n  else if(fontSize.unit === unit.PX) {\n    computedStyle.fontSize = fontSize.value;\n  }\n  else if(fontSize.unit === unit.PERCENT) {\n    computedStyle.fontSize = isRoot ? 16 * fontSize.value : parentComputedStyle.fontSize * fontSize.value;\n  }\n  else {\n    computedStyle.fontSize = 16;\n  }\n}\n\nfunction compute(xom, isRoot) {\n  let { currentStyle } = xom;\n  let { lineHeight, textAlign } = currentStyle;\n  let computedStyle = xom.__computedStyle = util.clone(currentStyle);\n  let parent = xom.parent;\n  let parentComputedStyle = parent && parent.computedStyle;\n  preCompute(currentStyle, computedStyle, parentComputedStyle, isRoot);\n  calLineHeight(xom, lineHeight, computedStyle);\n  if(textAlign === 'inherit') {\n    computedStyle.textAlign = isRoot ? 'left' : parentComputedStyle.textAlign;\n  }\n}\n\nfunction repaint(xom, isRoot) {\n  let { currentStyle, computedStyle } = xom;\n  let parent = xom.parent;\n  let parentComputedStyle = parent && parent.computedStyle;\n  preCompute(currentStyle, computedStyle, parentComputedStyle, isRoot);\n}\n\nfunction preCompute(currentStyle, computedStyle, parentComputedStyle, isRoot) {\n  let { fontStyle, fontWeight, fontSize, fontFamily, color } = currentStyle;\n  // 处理继承的属性\n  if(fontStyle === 'inherit') {\n    computedStyle.fontStyle = isRoot ? 'normal' : parentComputedStyle.fontStyle;\n  }\n  else {\n    computedStyle.fontStyle = fontStyle;\n  }\n  if(fontWeight === 'inherit') {\n    computedStyle.fontWeight = isRoot ? 400 : parentComputedStyle.fontWeight;\n  }\n  else {\n    computedStyle.fontWeight = fontWeight;\n  }\n  computedFontSize(computedStyle, fontSize, parentComputedStyle, isRoot);\n  if(fontFamily === 'inherit') {\n    computedStyle.fontFamily = isRoot ? 'arial' : parentComputedStyle.fontFamily;\n  }\n  else {\n    computedStyle.fontFamily = fontFamily;\n  }\n  if(color === 'inherit') {\n    computedStyle.color = isRoot ? '#000' : parentComputedStyle.color;\n  }\n  else {\n    computedStyle.color = color;\n  }\n  // 处理可提前计算的属性，如border百分比\n  [\n    'borderTopWidth',\n    'borderRightWidth',\n    'borderBottomWidth',\n    'borderLeftWidth'\n  ].forEach(k => {\n    computedStyle[k] = currentStyle[k].value || 0;\n  });\n  [\n    'visibility',\n    'backgroundColor',\n    'borderBottomColor',\n    'borderLeftColor',\n    'borderRightColor',\n    'borderTopColor',\n    'opacity'\n  ].forEach(k => {\n    computedStyle[k] = currentStyle[k];\n  });\n}\n\nfunction setFontStyle(style) {\n  let { fontStyle, fontWeight, fontSize, fontFamily } = style;\n  return `${fontStyle} ${fontWeight} ${fontSize}px/${fontSize}px ${fontFamily}`;\n}\n\nfunction getBaseLine(style) {\n  let normal = style.fontSize * font.arial.lhr;\n  return (style.lineHeight - normal) * 0.5 + style.fontSize * font.arial.blr;\n}\n\nfunction calLineHeight(xom, lineHeight, computedStyle) {\n  if(util.isNumber(lineHeight)) {}\n  if(lineHeight.unit === unit.INHERIT) {\n    let parent = xom.parent;\n    if(parent) {\n      let pl = parent.style.lineHeight;\n      // 一直继承向上查找直到root\n      if(pl.unit === unit.INHERIT) {\n        parent = parent.parent;\n        while(parent) {\n          pl = parent.style.lineHeight;\n          if(pl.unit !== unit.INHERIT) {\n            break;\n          }\n        }\n      }\n      let parentComputedStyle = parent.computedStyle;\n      if(pl.unit === unit.PX) {\n        computedStyle.lineHeight = parentComputedStyle.lineHeight;\n      }\n      else if(pl.unit === unit.NUMBER) {\n        computedStyle.lineHeight = Math.max(pl.value, 0) * computedStyle.fontSize;\n      }\n      else {\n        computedStyle.lineHeight = calNormalLineHeight(computedStyle);\n      }\n    }\n    else {\n      // root的继承强制为normal\n      lineHeight.unit = unit.AUTO;\n      computedStyle.lineHeight = calLineHeight(computedStyle);\n    }\n  }\n  // 防止为0\n  else if(lineHeight.unit === unit.PX) {\n    computedStyle.lineHeight = Math.max(lineHeight.value, 0) || calNormalLineHeight(computedStyle);\n  }\n  else if(lineHeight.unit === unit.NUMBER) {\n    computedStyle.lineHeight = Math.max(lineHeight.value, 0) * computedStyle.fontSize || calNormalLineHeight(computedStyle);\n  }\n  // normal\n  else {\n    computedStyle.lineHeight = calNormalLineHeight(computedStyle);\n  }\n}\n\nfunction calNormalLineHeight(computedStyle) {\n  return computedStyle.fontSize * font.arial.lhr;\n}\n\nfunction calRelativePercent(n, parent, k) {\n  n *= 0.01;\n  while(parent) {\n    let style = parent.style[k];\n    if(style.unit === unit.AUTO) {\n      if(k === 'width') {\n        parent = parent.parent;\n      }\n      else {\n        break;\n      }\n    }\n    else if(style.unit === unit.PX) {\n      return n * style.value;\n    }\n    else if(style.unit === unit.PERCENT) {\n      n *= style.value * 0.01;\n      parent = parent.parent;\n    }\n  }\n  return n;\n}\n\nfunction calRelative(computedStyle, k, v, parent, isWidth) {\n  if(util.isNumber(v)) {}\n  else if(v.unit === unit.AUTO) {\n    v = 0;\n  }\n  else if(v.unit === unit.PX) {\n    v = v.value;\n  }\n  else if(v.unit === unit.PERCENT) {\n    if(isWidth) {\n      v = calRelativePercent(v.value, parent, 'width');\n    }\n    else {\n      v = calRelativePercent(v.value, parent, 'height');\n    }\n  }\n  return computedStyle[k] = v;\n}\n\nfunction calAbsolute(computedStyle, k, v, size) {\n  if(util.isNumber(v)) {}\n  else if(v.unit === unit.AUTO) {\n    v = 0;\n  }\n  else if(v.unit === unit.PX) {\n    v = v.value;\n  }\n  else if(v.unit === unit.PERCENT) {\n    v = v.value * size * 0.01;\n  }\n  return computedStyle[k] = v;\n}\n\nexport default {\n  normalize,\n  compute,\n  repaint,\n  setFontStyle,\n  getBaseLine,\n  calLineHeight,\n  calRelative,\n  calAbsolute,\n};\n","import css from '../style/css';\nimport util from '../util/util';\nimport mode from '../util/mode';\n\nclass LineBox {\n  constructor(parent, x, y, w, content) {\n    this.__parent = parent;\n    this.__x = x;\n    this.__y = y;\n    this.__width = w;\n    this.__content = content;\n    this.__virtualDom = {};\n  }\n\n  render(renderMode, ctx) {\n    let { content, x, y, parent } = this;\n    let { ox, oy, computedStyle } = parent;\n    y += css.getBaseLine(computedStyle);\n    x += ox;\n    y += oy;\n    if(renderMode === mode.CANVAS) {\n      ctx.fillText(content, x, y);\n    }\n    else if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        type: 'item',\n        tagName: 'text',\n        props: [\n          ['x', x],\n          ['y', y],\n          ['fill', computedStyle.color],\n          ['font-family', computedStyle.fontFamily],\n          ['font-weight', computedStyle.fontWeight],\n          ['font-style', computedStyle.fontStyle],\n          ['font-size', `${computedStyle.fontSize}px`]\n        ],\n        content: util.encodeHtml(content),\n      };\n    }\n  }\n\n  __offsetX(diff) {\n    this.__x += diff;\n  }\n\n  __offsetY(diff) {\n    this.__y += diff;\n  }\n\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get width() {\n    return this.__width;\n  }\n  get content() {\n    return this.__content;\n  }\n  get baseLine() {\n    return css.getBaseLine(this.parent.computedStyle);\n  }\n  get virtualDom() {\n    return this.__virtualDom;\n  }\n  get parent() {\n    return this.__parent;\n  }\n}\n\nexport default LineBox;\n","import Node from './Node';\nimport LineBox from './LineBox';\nimport css from '../style/css';\nimport mode from '../util/mode';\n\nclass Text extends Node {\n  constructor(content) {\n    super();\n    this.__content = content.toString();\n    this.__lineBoxes = [];\n    this.__charWidthList = [];\n    this.__charWidth = 0;\n    this.__textWidth = 0;\n  }\n\n  static CHAR_WIDTH_CACHE = {};\n  static MEASURE_TEXT = {\n    list: [],\n    data: {},\n  };\n\n  // 预先计算每个字的宽度\n  __measure() {\n    let { ctx, content, computedStyle, charWidthList, renderMode } = this;\n    if(renderMode === mode.CANVAS) {\n      ctx.font = css.setFontStyle(computedStyle);\n    }\n    let key = computedStyle.fontSize + ',' + computedStyle.fontFamily;\n    let wait = Text.MEASURE_TEXT.data[key] = Text.MEASURE_TEXT.data[key] || {\n      key,\n      style: computedStyle,\n      hash: {},\n      s: [],\n    };\n    let cache = Text.CHAR_WIDTH_CACHE[key] = Text.CHAR_WIDTH_CACHE[key] || {};\n    let sum = 0;\n    let needMeasure = false;\n    for(let i = 0, length = content.length; i < length; i++) {\n      let char = content.charAt(i);\n      let mw;\n      if(cache.hasOwnProperty(char)) {\n        mw = cache[char];\n        charWidthList.push(mw);\n        sum += mw;\n        this.__charWidth = Math.max(this.charWidth, mw);\n      }\n      else if(renderMode === mode.CANVAS) {\n        mw = cache[char] = ctx.measureText(char).width;\n        charWidthList.push(mw);\n        sum += mw;\n        this.__charWidth = Math.max(this.charWidth, mw);\n      }\n      else {\n        if(!wait.hash.hasOwnProperty(char)) {\n          wait.s += char;\n        }\n        wait.hash[char] = true;\n        // 先预存标识位-1，测量完后替换它\n        charWidthList.push(-1);\n        needMeasure = true;\n      }\n    }\n    this.__textWidth = sum;\n    if(needMeasure) {\n      Text.MEASURE_TEXT.list.push(this);\n    }\n  }\n\n  __measureCb() {\n    let { content, computedStyle, charWidthList } = this;\n    let key = computedStyle.fontSize + ',' + computedStyle.fontFamily;\n    let cache = Text.CHAR_WIDTH_CACHE[key];\n    let sum = 0;\n    for(let i = 0, len = charWidthList.length; i < len; i++) {\n      if(charWidthList[i] < 0) {\n        let mw = charWidthList[i] = cache[content.charAt(i)];\n        sum += mw;\n        this.__charWidth = Math.max(this.charWidth, mw);\n      }\n    }\n    this.__textWidth += sum;\n  }\n\n  __layout(data, isVirtual) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let maxX = x;\n    let { isDestroyed, content, currentStyle, computedStyle, lineBoxes, charWidthList } = this;\n    if(isDestroyed || currentStyle.display === 'none') {\n      return;\n    }\n    this.__ox = this.__oy = 0;\n    lineBoxes.splice(0);\n    // 顺序尝试分割字符串为lineBox，形成多行\n    let begin = 0;\n    let i = 0;\n    let count = 0;\n    let length = content.length;\n    while(i < length) {\n      count += charWidthList[i];\n      if(count === w) {\n        let lineBox = new LineBox(this, x, y, count, content.slice(begin, i + 1));\n        lineBoxes.push(lineBox);\n        maxX = Math.max(maxX, x + count);\n        y += computedStyle.lineHeight;\n        begin = i + 1;\n        i = begin;\n        count = 0;\n      }\n      else if(count > w) {\n        // 宽度不足时无法跳出循环，至少也要塞个字符形成一行\n        if(i === begin) {\n          i = begin + 1;\n        }\n        let lineBox = new LineBox(this, x, y, count - charWidthList[i], content.slice(begin, i));\n        lineBoxes.push(lineBox);\n        maxX = Math.max(maxX, x + count - charWidthList[i]);\n        y += computedStyle.lineHeight;\n        begin = i;\n        count = 0;\n      }\n      else {\n        i++;\n      }\n    }\n    if(begin < length && begin < i) {\n      count = 0;\n      for(i = begin ;i < length; i++) {\n        count += charWidthList[i];\n      }\n      let lineBox = new LineBox(this, x, y, count, content.slice(begin, length));\n      lineBoxes.push(lineBox);\n      maxX = Math.max(maxX, x + count);\n      y += computedStyle.lineHeight;\n    }\n    this.__width = maxX - x;\n    this.__height = y - data.y;\n    // flex前置计算无需真正布局\n    if(isVirtual) {\n      this.__lineBoxes = [];\n    }\n    else {\n      let { textAlign } = currentStyle;\n      if(['center', 'right'].indexOf(textAlign) > -1) {\n        lineBoxes.forEach(lineBox => {\n          let diff = this.__width - lineBox.width;\n          if(diff > 0) {\n            lineBox.__offsetX(textAlign === 'center' ? diff * 0.5 : diff);\n          }\n        });\n      }\n    }\n  }\n\n  __offsetX(diff, isLayout) {\n    super.__offsetX(diff, isLayout);\n    if(isLayout) {\n      this.lineBoxes.forEach(item => {\n        item.__offsetX(diff);\n      });\n    }\n  }\n\n  __offsetY(diff, isLayout) {\n    super.__offsetY(diff, isLayout);\n    if(isLayout) {\n      this.lineBoxes.forEach(item => {\n        item.__offsetY(diff);\n      });\n    }\n  }\n\n  render(renderMode) {\n    const { isDestroyed, ctx, computedStyle } = this;\n    if(isDestroyed || computedStyle.display === 'none') {\n      return;\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.font = css.setFontStyle(computedStyle);\n      ctx.fillStyle = computedStyle.color;\n    }\n    this.lineBoxes.forEach(item => {\n      item.render(renderMode, ctx);\n    });\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        type: 'text',\n        children: this.lineBoxes.map(lineBox => lineBox.virtualDom),\n      };\n    }\n  }\n\n  __renderByMask(renderMode) {\n    this.render(renderMode);\n  }\n\n  __tryLayInline(w) {\n    return w - this.textWidth;\n  }\n\n  __calMaxAndMinWidth() {\n    let n = 0;\n    this.charWidthList.forEach(item => {\n      n = Math.max(n, item);\n    });\n    return { max: this.textWidth, min: n };\n  }\n\n  get content() {\n    return this.__content;\n  }\n  set content(v) {\n    this.__content = v;\n  }\n  get lineBoxes() {\n    return this.__lineBoxes;\n  }\n  get charWidthList() {\n    return this.__charWidthList;\n  }\n  get charWidth() {\n    return this.__charWidth;\n  }\n  get textWidth() {\n    return this.__textWidth;\n  }\n  get baseLine() {\n    let last = this.lineBoxes[this.lineBoxes.length - 1];\n    return last.y - this.y + last.baseLine;\n  }\n  get currentStyle() {\n    return this.style;\n  }\n  get renderMode() {\n    return this.__renderMode;\n  }\n}\n\nexport default Text;\n","import sort from '../util/sort';\nimport Text from '../node/Text';\n\nfunction splitClass(s) {\n  s = (s || '').trim();\n  if(s) {\n    return s.split(/\\s+/);\n  }\n}\n\nfunction parse(dom, top, json) {\n  if(!json) {\n    return;\n  }\n  let list = [];\n  matchSel(dom, top, json, list);\n  sort(list, function(a, b) {\n    let pa = a[2];\n    let pb = b[2];\n    // 先比较优先级\n    for(let i = 0; i < 3; i++) {\n      if(pa[i] !== pb[i]) {\n        return pa[i] > pb[i];\n      }\n    }\n    // 优先级相等比较出现顺序\n    return a[0] > b[0];\n  });\n  let res = {};\n  for(let i = list.length - 1; i >= 0; i--) {\n    let item = list[i];\n    let [k, v] = item[1];\n    if(!res.hasOwnProperty(k)) {\n      res[k] = v;\n    }\n  }\n  return res;\n}\n\n// 从底部往上匹配，即.a .b这样的选择器是.b->.a逆序对比\nfunction matchSel(dom, top, json, res) {\n  let selList = combo(dom, json);\n  selList.forEach(sel => {\n    if(json.hasOwnProperty(sel)) {\n      let item = json[sel];\n      // 还未到根节点需继续向上，注意可以递归向上，多层级时需递归所有父层级组合\n      let parent = dom.parent;\n      while(parent) {\n        matchSel(parent, top, item, res);\n        parent = parent.parent;\n      }\n      // 将当前层次的值存入\n      if(item.hasOwnProperty('_v')) {\n        dealStyle(res, item);\n      }\n      // 父子选择器\n      if(item.hasOwnProperty('_>')) {\n        let parentStyle = item['_>'];\n        matchSel(dom.parent, this, parentStyle, res);\n      }\n      // 相邻兄弟选择器\n      if(item.hasOwnProperty('_+')) {\n        let sibling = item['_+'];\n        let prev = dom.prev;\n        if(prev && !(prev instanceof Text)) {\n          let prevSelList = combo(prev, sibling);\n          let hash = arr2hash(prevSelList);\n          Object.keys(sibling).forEach(function(k) {\n            let item2 = sibling[k];\n            // 有值且兄弟选择器命中时存入结果\n            if(item2.hasOwnProperty('_v') && hash.hasOwnProperty(k)) {\n              dealStyle(res, item2);\n            }\n          });\n        }\n      }\n      // 兄弟选择器，不一定相邻，一直往前找\n      if(item.hasOwnProperty('_~')) {\n        let sibling = item['_~'];\n        let prev = dom.prev;\n        let hasMatch;\n        while(prev) {\n          if(prev instanceof Text) {\n            prev = prev.prev;\n            continue;\n          }\n          let prevSelList = combo(prev, sibling);\n          let hash = arr2hash(prevSelList);\n          Object.keys(sibling).forEach(function(k) {\n            let item2 = sibling[k];\n            // 有值且兄弟选择器命中时存入结果\n            if(item2.hasOwnProperty('_v') && hash.hasOwnProperty(k)) {\n              dealStyle(res, item2);\n            }\n          });\n          prev = prev.prev;\n        }\n      }\n    }\n  });\n}\n\n// 组合出dom的所有sel可能\nfunction combo(dom, json) {\n  let { class: klass, tagName, id } = dom;\n  klass = klass.slice();\n  sort(klass, function(a, b) {\n    return a > b;\n  });\n  let ks = [];\n  if(klass.length) {\n    comboClass(klass, ks, klass.length, 0);\n  }\n  // 各种*的情况标识，只有存在时才放入sel组合，可以减少循环次数\n  let hasStarClass = json.hasOwnProperty('_*.');\n  let hasStarId = json.hasOwnProperty('_*#');\n  let hasStarIdClass = json.hasOwnProperty('_*.#');\n  let res = [tagName];\n  // 只有当前有_*时说明有*才匹配\n  if(json.hasOwnProperty('_*')) {\n    res.push('*');\n  }\n  if(id) {\n    id = '#' + id;\n    res.push(id);\n    res.push(tagName + id);\n    if(hasStarId) {\n      res.push('*' + id);\n    }\n  }\n  ks.forEach(klass => {\n    res.push(klass);\n    res.push(tagName + klass);\n    if(hasStarClass) {\n      res.push('*' + klass);\n    }\n    if(id) {\n      res.push(klass + id);\n      res.push(tagName + klass + id);\n      if(hasStarIdClass) {\n        res.push('*' + klass + id);\n      }\n    }\n  });\n  return res;\n}\n\n// 组合出klass里多个的可能，如.b.a和.c.b.a，注意有排序，可以使得相等比较更容易\nfunction comboClass(arr, res, len, i) {\n  if(len - i > 1) {\n    comboClass(arr, res, len, i + 1);\n    for(let j = 0, len2 = res.length; j < len2; j++) {\n      res.push(res[j] + '.' + arr[i]);\n    }\n  }\n  res.push('.' + arr[i]);\n}\n\nfunction dealStyle(res, item) {\n  item._v.forEach(function(style) {\n    style[2] = item._p;\n    res.push(style);\n  });\n}\n\nfunction arr2hash(arr) {\n  let hash = {};\n  arr.forEach(item => {\n    hash[item] = true;\n  });\n  return hash;\n}\n\nfunction mergeCss(a, b) {\n  if(!b) {\n    return a;\n  }\n  if(!a) {\n    return b;\n  }\n  for(let i in b) {\n    if(b.hasOwnProperty(i)) {\n      let o = b[i];\n      let flag = {\n        _v: true,\n        _p: true,\n      }.hasOwnProperty(i);\n      if(!flag && typeof o === 'object' && a.hasOwnProperty(i)) {\n        a[i] = mergeCss(a[i], o);\n      }\n      else {\n        a[i] = o;\n      }\n    }\n  }\n  return a;\n}\n\nexport default {\n  parse,\n  splitClass,\n  mergeCss,\n};\n","import util from './util';\n\nclass Event {\n  constructor() {\n    this.__eHash = {};\n  }\n  on(id, handle) {\n    let self = this;\n    if(Array.isArray(id)) {\n      for(let i = 0, len = id.length; i < len; i++) {\n        self.on(id[i], handle);\n      }\n    }\n    else if(handle) {\n      if(!self.__eHash.hasOwnProperty(id)) {\n        self.__eHash[id] = [];\n      }\n      // 遍历防止此handle被侦听过了\n      for(let i = 0, item = self.__eHash[id], len = item.length; i < len; i++) {\n        if(item[i] === handle) {\n          return self;\n        }\n      }\n      self.__eHash[id].push(handle);\n    }\n    return self;\n  }\n  once(id, handle) {\n    if(!util.isFunction(handle)) {\n      return;\n    }\n    let self = this;\n    function cb(...data) {\n      handle.apply(self, data);\n      self.off(id, cb);\n    }\n    if(Array.isArray(id)) {\n      for(let i = 0, len = id.length; i < len; i++) {\n        self.once(id[i], handle);\n      }\n    }\n    else if(handle) {\n      self.on(id, cb);\n    }\n    return this;\n  }\n  off(id, handle) {\n    let self = this;\n    if(Array.isArray(id)) {\n      for(let i = 0, len = id.length; i < len; i++) {\n        self.off(id[i], handle);\n      }\n    }\n    else if(self.__eHash.hasOwnProperty(id)) {\n      if(handle) {\n        for(let i = 0, item = self.__eHash[id], len = item.length; i < len; i++) {\n          if(item[i] === handle) {\n            item.splice(i, 1);\n            break;\n          }\n        }\n      }\n      // 未定义为全部清除\n      else {\n        delete self.__eHash[id];\n      }\n    }\n    return this;\n  }\n  emit(id, ...data) {\n    let self = this;\n    if(Array.isArray(id)) {\n      for(let i = 0, len = id.length; i < len; i++) {\n        self.emit(id[i], data);\n      }\n    }\n    else {\n      if(self.__eHash.hasOwnProperty(id)) {\n        let list = self.__eHash[id];\n        if(list.length) {\n          list = list.slice();\n          for(let i = 0, len = list.length; i < len; i++) {\n            let cb = list[i];\n            if(util.isFunction(cb)) {\n              cb.apply(self, data);\n            }\n          }\n        }\n      }\n    }\n    return this;\n  }\n\n  static mix(...obj) {\n    for(let i = obj.length - 1; i >= 0; i--) {\n      let o = obj[i];\n      let event = new Event();\n      o.__eHash = {};\n      let fns = ['on', 'once', 'off', 'emit'];\n      for(let j = fns.length - 1; j >= 0; j--) {\n        let fn = fns[j];\n        o[fn] = event[fn];\n      }\n    }\n  }\n\n  static KARAS_REFRESH = 'karas-refresh';\n  static KARAS_BEFORE_REFRESH = 'karas-before-refresh';\n  static KARAS_ANIMATION_PAUSE = 'karas-animation-pause';\n  static KARAS_ANIMATION_FRAME = 'karas-animation-frame';\n  static KARAS_ANIMATION_FINISH = 'karas-animation-finish';\n  static KARAS_ANIMATION_CANCEL = 'karas-animation-cancel';\n}\n\nexport default Event;\n","import util from '../util/util';\n\nconst DOM = {\n  position: 'static',\n  display: 'block',\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto',\n  marginTop: 0,\n  marginRight: 0,\n  marginBottom: 0,\n  marginLeft: 0,\n  paddingTop: 0,\n  paddingRight: 0,\n  paddingBottom: 0,\n  paddingLeft: 0,\n  fontSize: 'inherit',\n  fontFamily: 'arial',\n  color: 'inherit',\n  fontStyle: 'inherit',\n  fontWeight: 'inherit',\n  lineHeight: 'normal',\n  backgroundColor: 'transparent',\n  borderTopWidth: 0,\n  borderRightWidth: 0,\n  borderBottomWidth: 0,\n  borderLeftWidth: 0,\n  borderTopColor: '#000',\n  borderRightColor: '#000',\n  borderBottomColor: '#000',\n  borderLeftColor: '#000',\n  borderTopStyle: 'solid',\n  borderRightStyle: 'solid',\n  borderBottomStyle: 'solid',\n  borderLeftStyle: 'solid',\n  width: 'auto',\n  height: 'auto',\n  flexGrow: 0,\n  flexShrink: 1,\n  flexBasis: 'auto',\n  flexDirection: 'row',\n  justifyContent: 'flex-start',\n  alignItems: 'stretch',\n  textAlign: 'inherit',\n  transformOrigin: 'center',\n  visibility: 'visible',\n  opacity: 1,\n};\n\nconst GEOM = {\n  fill: 'transparent',\n  stroke: '#000',\n  strokeWidth: 1,\n  strokeDasharray: '',\n  strokeLinecap: 'butt',\n};\n\nlet dom = [];\nfor(let k in DOM) {\n  if(DOM.hasOwnProperty(k)) {\n    let v = DOM[k];\n    dom.push({\n      k,\n      v,\n    });\n  }\n}\n\nlet geom = util.clone(dom);\nfor(let k in GEOM) {\n  if(GEOM.hasOwnProperty(k)) {\n    let v = GEOM[k];\n    geom.push({\n      k,\n      v,\n    });\n  }\n}\n\nexport default {\n  dom,\n  geom,\n};\n","export default {\n  REPAINT: 0,\n  REFLOW: 1,\n};\n","import Event from '../util/Event';\nimport Node from './Node';\nimport Text from './Text';\nimport util from '../util/util';\nimport reset from '../style/reset';\nimport css from '../style/css';\nimport match from '../style/match';\nimport level from '../animate/level';\n\nclass Component extends Event {\n  constructor(tagName, props, children) {\n    super();\n    if(!util.isString(tagName)) {\n      children = props;\n      props = tagName;\n      tagName = /(?:function|class)\\s+([\\w$]+)/.exec(this.constructor.toString())[1];\n    }\n    this.__tagName = tagName;\n    props = props || [];\n    // 构建工具中都是arr，手写可能出现hash情况\n    if(Array.isArray(props)) {\n      this.props = util.arr2hash(props);\n      this.__props = props;\n    }\n    else {\n      this.props = props;\n      this.__props = util.hash2arr(props);\n    }\n    this.__children = children || [];\n    this.__shadowRoot = null;\n    this.__parent = null;\n    this.__ref = {};\n    this.__state = {};\n  }\n\n  setState(n, cb) {\n    if(util.isNil(n)) {\n      this.state = {};\n    }\n    else {\n      for(let i in n) {\n        if(n.hasOwnProperty(i)) {\n          this.state[i] = n[i];\n        }\n      }\n    }\n    // 构造函数中调用还未render\n    let o = this.shadowRoot;\n    if(!o) {\n      return;\n    }\n    let root = this.root;\n    if(root) {\n      root.setRefreshLevel(level.REFLOW);\n      this.__traverse(o.ctx, o.defs, this.root.renderMode);\n      this.__init();\n      root.addRefreshTask(cb);\n    }\n  }\n\n  __traverse(ctx, defs, renderMode) {\n    let sr = this.__shadowRoot = this.render(renderMode);\n    // 可能返回的还是一个Component，递归处理\n    while(sr instanceof Component) {\n      sr = this.__shadowRoot = sr.render(renderMode);\n    }\n    // node情况不可能是text，因为text节点只出现在dom内，直接返回的text是string\n    if(!(sr instanceof Node)) {\n      let s = '';\n      if(!util.isNil(sr)) {\n        s = util.encodeHtml(sr.toString());\n      }\n      sr = new Text(s);\n      sr.__ctx = ctx;\n      sr.__defs = defs;\n      sr.__renderMode = renderMode;\n      sr.__style = this.props.style || {};\n      this.__shadowRoot = sr;\n      return;\n    }\n    sr.__ctx = ctx;\n    sr.__defs = defs;\n    sr.__host = this;\n    if(!sr.isGeom()) {\n      sr.__traverse(ctx, defs, renderMode);\n    }\n  }\n\n  __traverseCss() {\n    let sr = this.__shadowRoot;\n    // shadowDom可以设置props.css，同时host的会覆盖它\n    if(!(sr instanceof Text)) {\n      let m = match.mergeCss(sr.props.css, this.props.css);\n      sr.__traverseCss(sr, m);\n    }\n  }\n\n  // 组件传入的样式需覆盖shadowRoot的\n  __init() {\n    let sr = this.shadowRoot;\n    // 返回text节点特殊处理，赋予基本样式\n    if(sr instanceof Text) {\n      css.normalize(sr.style, reset.dom);\n    }\n    else {\n      let style = this.props.style || {};\n      for(let i in style) {\n        if(style.hasOwnProperty(i)) {\n          sr.style[i] = style[i];\n        }\n      }\n      sr.__init();\n    }\n    if(!(sr instanceof Text)) {\n      this.__props.forEach(item => {\n        let k = item[0];\n        let v = item[1];\n        if(/^on[a-zA-Z]/.test(k)) {\n          k = k.slice(2).toLowerCase();\n          let arr = sr.listener[k] = sr.listener[k] || [];\n          arr.push(v);\n        }\n        else if(/^on-[a-zA-Z\\d_$]/.test(k)) {\n          k = k.slice(3);\n          this.on(k, function(...args) {\n            v(...args);\n          });\n        }\n      });\n    }\n    // 防止重复\n    if(this.__hasInit) {\n      return;\n    }\n    this.__hasInit = true;\n    [\n      'x',\n      'y',\n      'ox',\n      'oy',\n      'sx',\n      'sy',\n      'width',\n      'height',\n      'outerWidth',\n      'outerHeight',\n      'style',\n      'computedStyle',\n      'ctx',\n      'defs',\n      'baseLine',\n      'virtualDom',\n      'currentStyle',\n      'points',\n      'controlA',\n      'controlB',\n      'controls',\n      'r',\n      'rx',\n      'ry',\n      'begin',\n      'end',\n      'x1',\n      'y1',\n      'x2',\n      'y2',\n      'mask',\n      'maskId'\n    ].forEach(fn => {\n      Object.defineProperty(this, fn, {\n        get() {\n          return this.shadowRoot[fn];\n        },\n      });\n    });\n  }\n\n  render() {\n  }\n\n  __destroy() {\n    if(this.shadowRoot) {\n      this.shadowRoot.__destroy();\n    }\n    this.children.splice(0);\n    this.__shadowRoot = null;\n    this.__parent = null;\n  }\n\n  __emitEvent(e, force) {\n    let sr = this.shadowRoot;\n    if(sr instanceof Text) {\n      return;\n    }\n    if(force) {\n      return sr.__emitEvent(e, force);\n    }\n    let res = sr.__emitEvent(e);\n    if(res) {\n      e.target = this;\n      return true;\n    }\n  }\n\n  animate(list, option) {\n    let sr = this.shadowRoot;\n    if(!(sr instanceof Text)) {\n      sr.animate(list, option);\n    }\n  }\n\n  __computed() {\n    let sr = this.shadowRoot;\n    if(sr instanceof Text) {\n      css.compute(sr, true);\n      sr.__measure();\n    }\n    else {\n      sr.__computed();\n    }\n  }\n\n  __repaint() {\n    let sr = this.shadowRoot;\n    if(sr instanceof Text) {\n      css.repaint(sr, true);\n    }\n    else {\n      sr.__repaint();\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get children() {\n    return this.__children;\n  }\n  get shadowRoot() {\n    return this.__shadowRoot;\n  }\n  get root() {\n    if(this.parent) {\n      return this.parent.root;\n    }\n  }\n  get parent() {\n    return this.__parent;\n  }\n  get ref() {\n    return this.__ref;\n  }\n  get state() {\n    return this.__state;\n  }\n  set state(v) {\n    this.__state = v;\n  }\n}\n\n[\n  '__layout',\n  '__layoutAbs',\n  '__tryLayInline',\n  '__offsetX',\n  '__offsetY',\n  '__calAutoBasis',\n  '__calMp',\n  '__calAbs',\n  '__renderAsMask',\n  '__renderByMask'\n].forEach(fn => {\n  Component.prototype[fn] = function() {\n    let sr = this.shadowRoot;\n    if(sr[fn]) {\n      return sr[fn].apply(sr, arguments);\n    }\n  };\n});\n\nexport default Component;\n","import Text from '../node/Text';\r\rlet inject = {\r  measureText(cb) {\r    let { list, data } = Text.MEASURE_TEXT;\r    let html = '';\r    let keys = [];\r    let chars = [];\r    for(let i in data) {\r      if(data.hasOwnProperty(i)) {\r        let { key, style, s } = data[i];\r        if(s) {\r          let inline = `position:absolute;font-family:${style.fontFamily};font-size:${style.fontSize}px`;\r          for(let j = 0, len = s.length; j < len; j++) {\r            keys.push(key);\r            let char = s.charAt(j);\r            chars.push(char);\r            html += `<span style=\"${inline}\">${char.replace(/</, '&lt;')}</span>`;\r          }\r        }\r      }\r    }\r    if(!html) {\r      cb();\r      return;\r    }\r    let div = document.createElement('div');\r    div.style.position = 'absolute';\r    div.style.left = '99999px';\r    div.style.top = '-99999px';\r    div.style.visibility = 'hidden';\r    document.body.appendChild(div);\r    div.innerHTML = html;\r    let cns = div.childNodes;\r    let { CHAR_WIDTH_CACHE, MEASURE_TEXT } = Text;\r    for(let i = 0, len = cns.length; i < len; i++) {\r      let node = cns[i];\r      let key = keys[i];\r      let char = chars[i];\r      let css = window.getComputedStyle(node, null);\r      CHAR_WIDTH_CACHE[key][char] = parseFloat(css.width);\r    }\r    list.forEach(text => text.__measureCb());\r    cb();\r    MEASURE_TEXT.list = [];\r    MEASURE_TEXT.data = {};\r    document.body.removeChild(div);\r  },\r  measureImg(url, cb) {\r    let img = new Image();\r    img.onload = function() {\r      cb({\r        success: true,\r        width: img.width,\r        height: img.height,\r        source: img,\r      });\r    };\r    img.onerror = function() {\r      cb({\r        success: false,\r      });\r    };\r    if(url.substr( 0, 5 ) !== 'data:') {\r      let host = /^(?:\\w+:)?\\/\\/([^/:]+)/.exec(url);\r      if(host) {\r        if(location.hostname !== host[1]) {\r          img.crossOrigin = 'anonymous';\r        }\r      }\r    }\r    img.src = url;\r  },\r  warn(s) {\r    console.warn(s);\r  },\r  requestAnimationFrame(cb) {\r    if(typeof requestAnimationFrame !== 'undefined') {\r      inject.requestAnimationFrame = requestAnimationFrame.bind(window);\r      requestAnimationFrame(cb);\r    }\r    else {\r      setTimeout(cb, 16.7);\r      inject.requestAnimationFrame = function(cb) {\r        setTimeout(cb, 16.7);\r      };\r    }\r  },\r  now() {\r    if(typeof performance !== 'undefined') {\r      inject.now = performance.now.bind(performance);\r      return performance.now();\r    }\r    inject.now = Date.now.bind(Date);\r    return Date.now();\r  },\r};\r\rexport default inject;\r","import inject from '../util/inject';\n\nclass Frame {\n  constructor() {\n    this.__inFrame = false;\n    this.__task = [];\n    this.__afterFrame = [];\n  }\n\n  __init(task) {\n    let self = this;\n    function cb() {\n      let last = inject.now();\n      inject.requestAnimationFrame(function() {\n        if(!task.length) {\n          return;\n        }\n        let now = inject.now();\n        let delta = now - last;\n        delta = delta * 0.06;\n        last = now;\n        self.__inFrame = true;\n        task.forEach(handle => handle(delta));\n        self.__inFrame = false;\n        let afterCb = self.__afterFrame;\n        if(afterCb) {\n          afterCb.forEach(item => item(delta));\n        }\n        self.__afterFrame = [];\n        if(!task.length) {\n          return;\n        }\n        cb();\n      });\n    }\n    cb();\n  }\n\n  onFrame(handle) {\n    let { task } = this;\n    if(!task.length) {\n      this.__init(task);\n    }\n    this.task.push(handle);\n  }\n\n  offFrame(handle) {\n    let { task } = this;\n    for(let i = 0, len = task.length; i < len; i++) {\n      if(task[i] === handle) {\n        task.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  nextFrame(handle) {\n    let self = this;\n    function cb() {\n      handle();\n      self.offFrame(cb);\n    }\n    if(self.__inFrame) {\n      self.__afterFrame = self.__afterFrame || [];\n      self.__afterFrame.push(cb);\n    }\n    else {\n      self.onFrame(cb);\n    }\n  }\n\n  get task() {\n    return this.__task;\n  }\n}\n\nexport default new Frame();\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nlet NEWTON_ITERATIONS = 4;\nlet NEWTON_MIN_SLOPE = 0.001;\nlet SUBDIVISION_PRECISION = 0.0000001;\nlet SUBDIVISION_MAX_ITERATIONS = 10;\n\nlet kSplineTableSize = 11;\nlet kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nlet float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n}\n\nfunction B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n}\n\nfunction C(aA1) {\n  return 3.0 * aA1;\n}\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n}\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n}\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  let currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if(currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while(Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for(let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    let currentSlope = getSlope(aGuessT, mX1, mX2);\n    if(currentSlope === 0.0) {\n      return aGuessT;\n    }\n    let currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n}\n\nfunction LinearEasing(x) {\n  return x;\n}\n\nfunction bezier(mX1, mY1, mX2, mY2) {\n  if(!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if(mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  let sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for(let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX(aX) {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    let lastSample = kSplineTableSize - 1;\n\n    for(; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    let dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    let guessForT = intervalStart + dist * kSampleStepSize;\n\n    let initialSlope = getSlope(guessForT, mX1, mX2);\n    if(initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if(initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing(x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if(x === 0 || x === 1) {\n      return x;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n}\n\nlet easing = {\n  linear: bezier(1, 1, 0, 0),\n  easeIn: bezier(0.42, 0, 1, 1),\n  easeOut: bezier(0, 0, 0.58, 1),\n  ease: bezier(0.25, 0.1, 0.25, 1),\n  easeInOut: bezier(0.42, 0, 0.58, 1),\n  cubicBezier: bezier,\n};\n\nexport default easing;\n","export default {\n  GEOM: {\n    x1: true,\n    y1: true,\n    x2: true,\n    y2: true,\n    controlA: true,\n    controlB: true,\n    r: true,\n    rx: true,\n    ry: true,\n    begin: true,\n    end: true,\n    points: true,\n    controls: true,\n  },\n  STYLE: {\n    transform: true,\n    color: true,\n    fontStyle: true,\n    strokeWidth: true,\n    fill: true,\n    backgroundColor: true,\n    backgroundImage: true,\n    stroke: true,\n    borderBottomColor: true,\n    borderLeftColor: true,\n    borderRightColor: true,\n    borderTopColor: true,\n    visibility: true,\n    opacity: true,\n  },\n};\n","import css from '../style/css';\nimport unit from '../style/unit';\nimport util from '../util/util';\nimport inject from '../util/inject';\nimport Event from '../util/Event';\nimport frame from './frame';\nimport easing from './easing';\nimport level from './level';\nimport repaint from './repaint';\n\nconst KEY_COLOR = [\n  'backgroundColor',\n  'borderBottomColor',\n  'borderLeftColor',\n  'borderRightColor',\n  'borderTopColor',\n  'color',\n  'fill',\n  'stroke'\n];\n\nconst KEY_LENGTH = [\n  'fontSize',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderRightWidth',\n  'borderTopWidth',\n  'bottom',\n  'left',\n  'right',\n  'top',\n  'flexBasis',\n  'width',\n  'height',\n  'lineHeight',\n  'marginBottom',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'paddingBottom',\n  'paddingLeft',\n  'paddingRight',\n  'paddingTop',\n  'strokeWidth'\n];\n\nconst KEY_GRADIENT = [\n  'backgroundImage',\n  'fill',\n  'stroke'\n];\n\nconst COLOR_HASH = {};\nKEY_COLOR.forEach(k => {\n  COLOR_HASH[k] = true;\n});\n\nconst LENGTH_HASH = {};\nKEY_LENGTH.forEach(k => {\n  LENGTH_HASH[k] = true;\n});\n\nconst GRADIENT_HASH = {};\nKEY_GRADIENT.forEach(k => {\n  GRADIENT_HASH[k] = true;\n});\n\nconst GRADIENT_TYPE = {\n  linear: true,\n  radial: true,\n};\n\n// css模式rgb和init的颜色转换为rgba数组，方便加减运算\nfunction color2array(style) {\n  KEY_COLOR.forEach(k => {\n    if(!style.hasOwnProperty(k)) {\n      return;\n    }\n    let v = style[k];\n    if(GRADIENT_TYPE.hasOwnProperty(v.k)) {\n      return;\n    }\n    style[k] = util.rgb2int(v);\n  });\n  KEY_GRADIENT.forEach(k => {\n    if(!style.hasOwnProperty(k)) {\n      return;\n    }\n    let v = style[k];\n    if(GRADIENT_TYPE.hasOwnProperty(v.k)) {\n      v.v.forEach(item => {\n        item[0] = util.rgb2int(item[0]);\n      });\n    }\n  });\n}\n\nfunction equalStyle(k, a, b) {\n  if(k === 'transform') {\n    if(a.length !== b.length) {\n      return false;\n    }\n    for(let i = 0, len = a.length; i < len; i++) {\n      let k1 = a[i][0];\n      let k2 = b[i][0];\n      if(k1 !== k2) {\n        return false;\n      }\n      else {\n        let v1 = a[i][1];\n        let v2 = b[i][1];\n        if(k1 === 'matrix') {\n          if(v1[0] !== v2[0]\n            || v1[1] !== v2[1]\n            || v1[2] !== v2[2]\n            || v1[3] !== v2[3]\n            || v1[4] !== v2[4]\n            || v1[5] !== v2[5]) {\n            return false;\n          }\n        }\n        else if(v1.value !== v2.value || v1.unit !== v2.unit) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  else if(LENGTH_HASH.hasOwnProperty(k)) {\n    return a.value === b.value && a.unit === b.unit;\n  }\n  else if(GRADIENT_HASH.hasOwnProperty(k) && a.k === b.k && GRADIENT_TYPE.hasOwnProperty(a.k)) {\n    let av = a.v;\n    let bv = b.v;\n    if(a.d !== b.d || av.length !== bv.length) {\n      return false;\n    }\n    for(let i = 0, len = av.length; i < len; i++) {\n      let ai = av[i];\n      let bi = bv[i];\n      if(ai.length !== bi.length) {\n        return false;\n      }\n      for(let j = 0; j < 4; j++) {\n        if(ai[0][j] !== bi[0][j]) {\n          return false;\n        }\n      }\n      if(ai.length > 1) {\n        if(ai[1].value !== bi[1].value || ai[1].unit !== bi[1].unit) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  else if(repaint.GEOM.hasOwnProperty(k)) {\n    if(k === 'points' || k === 'controls') {\n      if(a.length !== b.length) {\n        return false;\n      }\n      for(let i = 0, len = a.length; i < len; i++) {\n        if(a[i] === b[i]) {\n          continue;\n        }\n        if(a[i][0] !== b[i][0] || a[i][1] !== b[i][1]) {\n          return false;\n        }\n      }\n      return true;\n    }\n    else if(k === 'controlA' || k === 'controlB') {\n      if(a.length !== b.length) {\n        return false;\n      }\n      return a[0] === b[0] && a[1] === b[1];\n    }\n  }\n  return a === b;\n}\n\n// 反向将颜色数组转换为css模式，同时计算target及其孩子的computedStyle\nfunction stringify(style, lastStyle, target) {\n  if(lastStyle) {\n    let res = false;\n    for(let i in style) {\n      if(style.hasOwnProperty(i) && lastStyle.hasOwnProperty(i)) {\n        if(!equalStyle(i, style[i], lastStyle[i])) {\n          res = true;\n          break;\n        }\n      }\n      // 不同的属性说明要更新提前跳出\n      else if(style.hasOwnProperty(i) || lastStyle.hasOwnProperty(i)) {\n        res = true;\n        break;\n      }\n    }\n    // 防止last有style没有\n    for(let i in lastStyle) {\n      if(lastStyle.hasOwnProperty(i) && !style.hasOwnProperty(i)) {\n        res = true;\n        break;\n      }\n    }\n    if(!res) {\n      return false;\n    }\n  }\n  let animateStyle = target.animateStyle;\n  for(let i in style) {\n    if(style.hasOwnProperty(i)) {\n      let v = style[i];\n      if(repaint.GEOM.hasOwnProperty(i)) {\n        target['__' + i] = v;\n      }\n      else if(GRADIENT_HASH.hasOwnProperty(i) && GRADIENT_TYPE.hasOwnProperty(v.k)) {\n        animateStyle[i] = {\n          k: v.k,\n          v: v.v.map(item => {\n            let arr = [];\n            let c = item[0];\n            if(c[3] === 1) {\n              arr.push(`rgb(${c[0]},${c[1]},${c[2]})`);\n            }\n            else {\n              arr.push(`rgba(${c[0]},${c[1]},${c[2]},${c[3]})`);\n            }\n            if(item[1]) {\n              arr.push(util.clone(item[1]));\n            }\n            return arr;\n          }),\n          d: v.d,\n        };\n      }\n      else if(COLOR_HASH.hasOwnProperty(i)) {\n        if(v[3] === 1) {\n          animateStyle[i] = `rgb(${v[0]},${v[1]},${v[2]})`;\n        }\n        else {\n          animateStyle[i] = `rgba(${v[0]},${v[1]},${v[2]},${v[3]})`;\n        }\n      }\n      else {\n        animateStyle[i] = v;\n      }\n    }\n  }\n  return true;\n}\n\nfunction restore(keys, target) {\n  let { style, animateStyle } = target;\n  keys.forEach(k => {\n    animateStyle[k] = util.clone(style[k]);\n  });\n}\n\n// 将变化写的样式格式化，提取出offset属性，提取出变化的key，初始化变化过程的存储\nfunction framing(current, record) {\n  let keys = [];\n  let st = {};\n  for(let i in current) {\n    if(current.hasOwnProperty(i) && !{\n      offset: true,\n      easing: true,\n    }.hasOwnProperty(i)) {\n      if(keys.indexOf(i) === -1) {\n        keys.push(i);\n      }\n      st[i] = current[i];\n      if(record && !record.hash.hasOwnProperty(i)) {\n        record.hash[i] = true;\n        record.keys.push(i);\n      }\n    }\n  }\n  return {\n    style: st,\n    offset: current.offset,\n    easing: current.easing,\n    keys,\n    transition: [],\n  };\n}\n\n// 计算两帧之间的差，必须都含有某个属性，单位不同的以后面为准\nfunction calDiff(prev, next, k, target) {\n  if(!prev.hasOwnProperty(k) || !next.hasOwnProperty(k)) {\n    return;\n  }\n  let res = {\n    k,\n  };\n  let p = prev[k];\n  let n = next[k];\n  if(k === 'transform') {\n    if(!prev[k] || !next[k]) {\n      return;\n    }\n    // transform每项以[k,v]存在，新老可能每项不会都存在，顺序也未必一致，不存在的认为是0\n    let pExist = {};\n    p.forEach(item => {\n      pExist[item[0]] = item[1];\n    });\n    let nExist = {};\n    n.forEach(item => {\n      nExist[item[0]] = item[1];\n    });\n    res.v = [];\n    let computedStyle = target.computedStyle;\n    let key = k;\n    n.forEach(item => {\n      let [k, v] = item;\n      // 都存在的计算差值\n      if(pExist.hasOwnProperty(k)) {\n        let p = pExist[k];\n        let n = nExist[k];\n        if(k === 'matrix') {\n          let t = [];\n          for(let i = 0; i < 6; i++) {\n            t[i] = n[i] - p[i];\n          }\n          res.v.push({\n            k,\n            v: t,\n          });\n        }\n        else if(p.unit === n.unit) {\n          res.v.push({\n            k,\n            v: v.value - p.value,\n          });\n        }\n        else if(p.unit === unit.PX && n.unit === unit.PERCENT) {\n          if(k === 'translateX') {\n            p.value = p.value * 100 / computedStyle.width;\n          }\n          else if(k === 'translateY') {\n            p.value = p.value * 100 / computedStyle.height;\n          }\n          p.unit = unit.PERCENT;\n          res.v.push({\n            k,\n            v: n.value - p.value,\n          });\n        }\n        else if(p.unit === unit.PERCENT && n.unit === unit.PX) {\n          if(k === 'translateX') {\n            p.value = p.value * 0.01 * computedStyle.width;\n          }\n          else if(k === 'translateY') {\n            p.value = p.value * 0.01 * computedStyle.width;\n          }\n          p.unit = unit.PX;\n          res.v.push({\n            k,\n            v: n.value - p.value,\n          });\n        }\n      }\n      // matrix老的不存在的项默认为单位矩阵\n      else if(k === 'matrix') {\n        let id = [1, 0, 0, 1, 0, 0];\n        prev[key].push([k, id]);\n        let t = [];\n        for(let i = 0; i < 6; i++) {\n          t[i] = v[i] - id[i];\n        }\n        res.v.push({\n          k,\n          v: t,\n        });\n      }\n      // 老的不存在的项默认为0\n      else {\n        prev[key].push([k, {\n          value: 0,\n          unit: v.unit,\n        }]);\n        res.v.push({\n          k,\n          v: v.value,\n        });\n      }\n    });\n    p.forEach(item => {\n      let [k, v] = item;\n      // 新的不存在的项默认为0或单位矩阵\n      if(!nExist.hasOwnProperty(k)) {\n        if(k === 'matrix') {\n          let id = [1, 0, 0, 1, 0, 0];\n          next[key].push([k, id]);\n          let t = [];\n          for(let i = 0; i < 6; i++) {\n            t[i] = id[i] - v[i];\n          }\n          res.v.push({\n            k,\n            v: t,\n          });\n        }\n        else {\n          next[key].push([k, {\n            value: 0,\n            unit: v.unit,\n          }]);\n          res.v.push({\n            k,\n            v: -v.value,\n          });\n        }\n      }\n    });\n  }\n  else if(k === 'transformOrigin') {\n    res.v = [];\n    let computedStyle = target.computedStyle;\n    for(let i = 0; i < 2; i++) {\n      let pi = p[i];\n      let ni = n[i];\n      if(pi.unit === ni.unit) {\n        res.v.push(ni.value - pi.value);\n      }\n      else if(pi.unit === unit.PX && ni.unit === unit.PERCENT) {\n        pi.value = pi.value * 100 / computedStyle[i ? 'outerHeight' : 'outerWidth'];\n        pi.unit = unit.PERCENT;\n        res.v = ni.value - pi.value;\n      }\n      else if(pi.unit === unit.PERCENT && ni.unit === unit.PX) {\n        pi.value = pi.value * 0.01 * computedStyle[i ? 'outerHeight' : 'outerWidth'];\n        pi.unit = unit.PX;\n        res.v = ni.value - pi.value;\n      }\n    }\n  }\n  else if(GRADIENT_HASH.hasOwnProperty(k)\n    && { 'linear': true, 'radial': true }.hasOwnProperty(p.k)\n    && p.k === n.k\n    && p.v.length\n    && p.v.length) {\n    let pv = p.v;\n    let nv = n.v;\n    res.v = [];\n    for(let i = 0, len = Math.min(pv.length, nv.length); i < len; i++) {\n      let a = pv[i];\n      let b = nv[i];\n      let t = [];\n      t.push([\n        b[0][0] - a[0][0],\n        b[0][1] - a[0][1],\n        b[0][2] - a[0][2],\n        b[0][3] - a[0][3]\n      ]);\n      if(a[1] && b[1] && a[1].unit === b[1].unit) {\n        t.push(b[1].value - a[1].value);\n      }\n      // 单位不同不做运算\n      else {\n        continue;\n      }\n      res.v.push(t);\n    }\n    if(p.k === 'linear' && p.d !== undefined && n.d !== undefined) {\n      res.d = n.d - p.d;\n    }\n  }\n  else if(COLOR_HASH.hasOwnProperty(k)) {\n    // fill和stroke可能纯色和渐变不一致\n    if(p.k !== n.k) {\n      return;\n    }\n    res.v = [\n      n[0] - p[0],\n      n[1] - p[1],\n      n[2] - p[2],\n      n[3] - p[3]\n    ];\n  }\n  else if(LENGTH_HASH.hasOwnProperty(k)) {\n    // auto不做动画\n    if(p.unit === unit.AUTO || n.unit === unit.AUTO) {\n      return;\n    }\n    let parentComputedStyle = (target.parent || target).computedStyle;\n    if(p.unit === n.unit) {\n      res.v = n.value - p.value;\n    }\n    else if(p.unit === unit.PX && n.unit === unit.PERCENT) {\n      p.value = p.value * 100 / parentComputedStyle[k];\n      p.unit = unit.PERCENT;\n      res.v = n.value - p.value;\n    }\n    else if(p.unit === unit.PERCENT && n.unit === unit.PX) {\n      p.value = p.value * 0.01 * parentComputedStyle[k];\n      p.unit = unit.PX;\n      res.v = n.value - p.value;\n    }\n    else {\n      return;\n    }\n  }\n  else if(repaint.GEOM.hasOwnProperty(k)) {\n    if(k === 'points' || k === 'controls') {\n      res.v = [];\n      for(let i = 0, len = Math.min(p.length, n.length); i < len; i++) {\n        let pv = p[i];\n        let nv = n[i];\n        if(util.isNil(pv) || util.isNil(nv)) {\n          res.v.push(pv);\n        }\n        else {\n          let v = [];\n          for(let j = 0, len2 = Math.max(pv.length, nv.length); j < len2; j++) {\n            if(util.isNil(pv[j]) || util.isNil(nv[j])) {\n              v.push(pv[j]);\n            }\n            else {\n              v.push(nv[j] - pv[j]);\n            }\n          }\n          res.v.push(v);\n        }\n      }\n    }\n    else if(k === 'controlA' || k === 'controlB') {\n      res.v = [\n        n[0] - p[0],\n        n[1] - p[1]\n      ];\n    }\n    else {\n      res.v = n - p;\n    }\n  }\n  else if(k === 'opacity') {\n    res.v = n - p;\n  }\n  else {\n    res.v = p;\n  }\n  return res;\n}\n\nfunction calFrame(prev, current, target, record) {\n  let next = framing(current, record);\n  next.keys.forEach(k => {\n    let ts = calDiff(prev.style, next.style, k, target);\n    // 可以形成过渡的才会产生结果返回\n    if(ts) {\n      prev.transition.push(ts);\n    }\n  });\n  return next;\n}\n\nfunction binarySearch(i, j, time, frames) {\n  if(i === j) {\n    let frame = frames[i];\n    if(frame.time > time) {\n      return i - 1;\n    }\n    return i;\n  }\n  else {\n    let middle = i + ((j - i) >> 1);\n    let frame = frames[middle];\n    if(frame.time === time) {\n      return middle;\n    }\n    else if(frame.time > time) {\n      return binarySearch(i, Math.max(middle - 1, i), time, frames);\n    }\n    else {\n      return binarySearch(Math.min(middle + 1, j), j, time, frames);\n    }\n  }\n}\n\nfunction calStyle(frame, percent) {\n  let style = util.clone(frame.style);\n  let timingFunction = easing[frame.easing] || easing.linear;\n  if(timingFunction !== easing.linear) {\n    percent = timingFunction(percent);\n  }\n  percent = Math.max(percent, 0);\n  percent = Math.min(percent, 1);\n  frame.transition.forEach(item => {\n    let { k, v, d } = item;\n    let st = style[k];\n    if(k === 'transform') {\n      let transform = style.transform;\n      let hash = {};\n      transform.forEach(item => {\n        hash[item[0]] = item[1];\n      });\n      v.forEach(item => {\n        let { k, v } = item;\n        if(k === 'matrix') {\n          for(let i = 0; i < 6; i++) {\n            hash[k][i] += v[i] * percent;\n          }\n        }\n        else {\n          hash[k].value += v * percent;\n        }\n      });\n    }\n    else if(k === 'transformOrigin') {\n      st[0].value += v[0] * percent;\n      st[1].value += v[1] * percent;\n    }\n    else if(GRADIENT_HASH.hasOwnProperty(k) && GRADIENT_TYPE.hasOwnProperty(st.k)) {\n      for(let i = 0, len = Math.min(st.v.length, v.length); i < len; i++) {\n        let a = st.v[i];\n        let b = v[i];\n        a[0][0] += b[0][0] * percent;\n        a[0][1] += b[0][1] * percent;\n        a[0][2] += b[0][2] * percent;\n        a[0][3] += b[0][3] * percent;\n        if(a[1] && b[1]) {\n          a[1].value += b[1] * percent;\n        }\n      }\n      if(st.k === 'linear' && st.d !== undefined && d !== undefined) {\n        st.d += d * percent;\n      }\n    }\n    // color可能超限[0,255]，但浏览器已经做了限制，无需关心\n    else if(COLOR_HASH.hasOwnProperty(k)) {\n      st[0] += v[0] * percent;\n      st[1] += v[1] * percent;\n      st[2] += v[2] * percent;\n      st[3] += v[3] * percent;\n    }\n    else if(LENGTH_HASH.hasOwnProperty(k)) {\n      style[k].value += v * percent;\n    }\n    else if(repaint.GEOM.hasOwnProperty(k)) {\n      let st = style[k];\n      if(k === 'points' || k === 'controls') {\n        for(let i = 0, len = Math.min(st.length, v.length); i < len; i++) {\n          if(util.isNil(st[i]) || !st[i].length) {\n            continue;\n          }\n          for(let j = 0, len2 = Math.min(st[i].length, v[i].length); j < len2; j++) {\n            if(!util.isNil(st[i][j]) && !util.isNil(v[i][j])) {\n              st[i][j] += v[i][j] * percent;\n            }\n          }\n        }\n      }\n      else if(k === 'controlA' || k === 'controlB') {\n        st[0] += v[0] * percent;\n        st[1] += v[1] * percent;\n      }\n      else {\n        style[k] += v * percent;\n      }\n    }\n    else if(k === 'opacity') {\n      style[k] += v * percent;\n    }\n    else {\n      style[k] = v;\n    }\n  });\n  return style;\n}\n\nfunction getLevel(style) {\n  for(let i in style) {\n    if(style.hasOwnProperty(i)) {\n      if(!repaint.STYLE.hasOwnProperty(i) && !repaint.GEOM.hasOwnProperty(i)) {\n        return level.REFLOW;\n      }\n    }\n  }\n  return level.REPAINT;\n}\n\nlet uuid = 0;\n\nclass Animation extends Event {\n  constructor(target, list, options) {\n    super();\n    this.__id = uuid++;\n    this.__target = target;\n    this.__list = util.clone(list || []);\n    // 动画过程另外一种形式，object描述k-v形式\n    if(!Array.isArray(this.__list)) {\n      let nl = [];\n      let l = this.__list;\n      for(let k in l) {\n        if(l.hasOwnProperty(k)) {\n          let v = l[k];\n          if(Array.isArray(v)) {\n            for(let i = 0, len = v.length; i < len; i++) {\n              let o = nl[i] = nl[i] || {\n                offset: i / (len - 1),\n              };\n              o[k] = v[i];\n            }\n          }\n        }\n      }\n      this.__list = nl;\n    }\n    if(util.isNumber(options)) {\n      this.__options = {\n        duration: options,\n      };\n      options = this.__options;\n    }\n    let op = this.__options = options || {};\n    this.__duration = parseFloat(op.duration) || 0;\n    this.__delay = Math.max(0, parseFloat(op.delay) || 0);\n    this.__endDelay = Math.max(parseFloat(op.endDelay) || 0, 0);\n    if(op.iterations === 'Infinity' || op.iterations === 'infinity' || op.iterations === Infinity) {\n      this.__iterations = Infinity;\n    }\n    else {\n      this.__iterations = parseInt(op.iterations);\n      if(isNaN(this.__iterations)) {\n        this.__iterations = 1;\n      }\n    }\n    this.__fps = parseInt(op.fps) || 60;\n    if(this.__fps < 0) {\n      this.__fps = 60;\n    }\n    this.__fill = op.fill || 'none';\n    this.__direction = op.direction || 'normal';\n    this.__frames = [];\n    this.__framesR = [];\n    this.__playbackRate = parseFloat(op.playbackRate) || 1;\n    if(this.__playbackRate < 0) {\n      this.__playbackRate = 1;\n    }\n    this.__startTime = 0;\n    this.__offsetTime = 0;\n    this.__pauseTime = 0;\n    this.__lastFpsTime = 0;\n    this.__pending = false;\n    this.__playState = 'idle';\n    this.__playCount = 0;\n    this.__cb = null;\n    this.__isDestroyed = true;\n    this.__diffTime = 0;\n    this.__init();\n  }\n\n  __init() {\n    let { target, iterations, frames, framesR, direction, duration } = this;\n    let style = util.clone(target.style);\n    // 执行次数小于1无需播放\n    if(iterations < 1) {\n      return;\n    }\n    // 第一个动画执行时进行clone操作，防止2个一起时后面的覆盖前面重新clone导致前面的第一帧失效\n    if(target.animateStyle !== target.currentStyle) {\n      target.__animateStyle = util.clone(style);\n    }\n    // 转化style为计算后的绝对值结果\n    color2array(style);\n    // 过滤时间非法的，过滤后续offset<=前面的\n    let list = this.list;\n    let offset = -1;\n    for(let i = 0, len = list.length; i < len; i++) {\n      let current = list[i];\n      if(current.hasOwnProperty('offset')) {\n        current.offset = parseFloat(current.offset);\n        // 超过区间[0,1]\n        if(isNaN(current.offset) || current.offset < 0 || current.offset > 1) {\n          list.splice(i, 1);\n          i--;\n          len--;\n        }\n        // <=前面的\n        else if(current.offset <= offset) {\n          list.splice(i, 1);\n          i--;\n          len--;\n        }\n        // 正常的标准化样式\n        else {\n          offset = current.offset;\n          css.normalize(current);\n          color2array(current);\n        }\n      }\n      else {\n        css.normalize(current);\n        color2array(current);\n      }\n    }\n    // 必须有2帧及以上描述\n    if(list.length < 2) {\n      return;\n    }\n    // 首尾时间偏移强制为[0, 1]\n    let first = list[0];\n    first.offset = 0;\n    let last = list[list.length - 1];\n    last.offset = 1;\n    // 计算没有设置offset的时间\n    for(let i = 1, len = list.length; i < len; i++) {\n      let start = list[i];\n      // 从i=1开始offset一定>0，找到下一个有offset的，均分中间无声明的\n      if(!start.offset) {\n        let end;\n        let j = i + 1;\n        for(; j < len; j++) {\n          end = list[j];\n          if(end.offset) {\n            break;\n          }\n        }\n        let num = j - i + 1;\n        start = list[i - 1];\n        let per = (end.offset - start.offset) / num;\n        for(let k = i; k < j; k++) {\n          let item = list[k];\n          item.offset = start.offset + per * (k + 1 - i);\n        }\n        i = j;\n      }\n    }\n    // 换算出60fps中每一帧，为防止空间过大，不存储每一帧的数据，只存储关键帧和增量\n    let length = list.length;\n    let record = this.__record = {\n      keys: [],\n      hash: {},\n    };\n    let prev;\n    // 第一帧要特殊处理\n    prev = framing(first, record);\n    frames.push(prev);\n    for(let i = 1; i < length; i++) {\n      let next = list[i];\n      prev = calFrame(prev, next, target, record);\n      frames.push(prev);\n    }\n    this.__isDestroyed = false;\n    // 反向\n    if({ reverse: true, alternate: true, 'alternate-reverse': true }.hasOwnProperty(direction)) {\n      let listR = util.clone(list).reverse();\n      listR.forEach(item => {\n        item.offset = 1 - item.offset;\n      });\n      prev = framing(listR[0]);\n      framesR.push(prev);\n      for(let i = 1; i < length; i++) {\n        let next = listR[i];\n        prev = calFrame(prev, next, target);\n        framesR.push(prev);\n      }\n    }\n    // 生成finish的任务事件\n    this.__fin = () => {\n      this.emit(Event.KARAS_ANIMATION_FRAME);\n      this.emit(Event.KARAS_ANIMATION_FINISH);\n    };\n    frames.forEach(frame => {\n      frame.time = duration * frame.offset;\n    });\n    framesR.forEach(frame => {\n      frame.time = duration * frame.offset;\n    });\n  }\n\n  play() {\n    if(this.isDestroyed || this.duration <= 0) {\n      return this;\n    }\n    this.__cancelTask();\n    this.__playState = 'running';\n    // 从头播放还是暂停继续\n    if(this.pending) {\n      let now = inject.now();\n      let diff = now - this.pauseTime;\n      // 在没有performance时，防止乱改系统时间导致偏移向前，但不能防止改时间导致的偏移向后\n      diff = Math.max(diff, 0);\n      this.__offsetTime = diff;\n    }\n    else {\n      let {\n        frames,\n        framesR,\n        target,\n        playCount,\n        duration,\n        direction,\n        iterations,\n        fill,\n        delay,\n        endDelay,\n        __fin,\n        __record,\n      } = this;\n      let length = frames.length;\n      let init = true;\n      let first = true;\n      this.__cb = () => {\n        let { playbackRate, offsetTime } = this;\n        let now = inject.now();\n        let root = target.root;\n        if(init) {\n          this.__startTime = this.__lastFpsTime = this.__lastTime = now;\n          this.__lastIndex = 0;\n        }\n        let diff = now - this.__lastTime - offsetTime;\n        diff = Math.max(diff, 0);\n        if(playbackRate !== 1) {\n          diff *= playbackRate;\n        }\n        this.__diffTime += diff;\n        diff = this.__diffTime;\n        this.__lastTime = now;\n        // delay仅第一次生效\n        if(playCount > 0) {\n          delay = 0;\n        }\n        // 还没过前置delay\n        if(diff < delay) {\n          if(init && {\n            backwards: true,\n            both: true,\n          }.hasOwnProperty(fill)) {\n            let current = frames[0];\n            let needRefresh = stringify(current.style, {}, target);\n            let task = this.__task = () => {\n              this.emit(Event.KARAS_ANIMATION_FRAME);\n            };\n            if(needRefresh) {\n              root.setRefreshLevel(getLevel(current.style));\n              root.addRefreshTask(task);\n            }\n          }\n          init = false;\n          return;\n        }\n        init = false;\n        let currentFrames;\n        if(direction === 'reverse') {\n          currentFrames = framesR;\n        }\n        else if({ alternate: true, 'alternate-reverse': true }.hasOwnProperty(direction)) {\n          let isEven = playCount % 2 === 0;\n          if(direction === 'alternate') {\n            currentFrames = isEven ? frames : framesR;\n          }\n          else {\n            currentFrames = isEven ? framesR : frames;\n          }\n        }\n        else {\n          currentFrames = frames;\n        }\n        diff -= delay;\n        // 因暂停导致的停顿时间需要清零\n        this.__offsetTime = 0;\n        let i = binarySearch(0, currentFrames.length - 1, diff, frames);\n        let current = currentFrames[i];\n        let needRefresh;\n        // 最后一帧结束动画\n        if(i === length - 1) {\n          needRefresh = stringify(current.style, this.__lastStyle, target);\n          if(playCount < iterations) {\n            playCount = ++this.playCount;\n            this.__diffTime = 0;\n          }\n        }\n        // 否则根据目前到下一帧的时间差，计算百分比，再反馈到变化数值上\n        else {\n          // 增加的fps功能，当<60时计算跳帧\n          let fps = this.fps;\n          if(!util.isNumber(fps) || fps < 0) {\n            fps = 60;\n          }\n          if(!first && fps < 60) {\n            let time = now - this.__lastFpsTime;\n            if(time < 1000 / fps) {\n              return;\n            }\n          }\n          let total = currentFrames[i + 1].time - current.time;\n          let percent = diff / total;\n          let style = calStyle(current, percent);\n          needRefresh = stringify(style, this.__lastStyle, target);\n        }\n        this.__lastFpsTime = now;\n        this.__lastStyle = current.style;\n        first = false;\n        // 两帧之间没有变化，不触发刷新\n        if(root) {\n          // 可能涉及字号变化，引发布局变更重新测量\n          let task = this.__task = () => {\n            this.emit(Event.KARAS_ANIMATION_FRAME);\n            if(i === length - 1) {\n              // 没到播放次数结束时继续\n              if(iterations === Infinity || playCount < iterations) {\n                return;\n              }\n              // 播放结束考虑endDelay\n              this.__playState = 'finished';\n              frame.offFrame(this.cb);\n              // 不是停留在最后一帧还原\n              if(!{\n                forwards: true,\n                both: true,\n              }.hasOwnProperty(fill)) {\n                root.setRefreshLevel(getLevel(__record.hash));\n                restore(__record.keys, target);\n              }\n              // 如果有endDelay还要延迟执行\n              let isFinished = diff >= duration + endDelay;\n              if(isFinished) {\n                root.addRefreshTask(this.__task = __fin);\n              }\n              else {\n                let task = this.__task = () => {\n                  now = inject.now();\n                  let diff = now - this.__lastTime - offsetTime - delay;\n                  if(playbackRate !== 1) {\n                    diff *= playbackRate;\n                  }\n                  this.__diffTime += diff;\n                  diff = this.__diffTime;\n                  this.__lastTime = now;\n                  let isFinished = diff >= duration + endDelay;\n                  if(isFinished) {\n                    root.addRefreshTask(this.__task = __fin);\n                    frame.offFrame(task);\n                  }\n                };\n                frame.onFrame(task);\n              }\n            }\n          };\n          if(needRefresh) {\n            root.setRefreshLevel(getLevel(current.style));\n            root.addRefreshTask(task);\n          }\n          else {\n            frame.nextFrame(task);\n          }\n        }\n      };\n    }\n    // 先执行，本次执行调用refreshTask也是下一帧再渲染，frame的每帧都是下一帧\n    this.cb();\n    // 防止重复调用多次cb\n    frame.offFrame(this.cb);\n    frame.onFrame(this.cb);\n    this.__pending = false;\n    return this;\n  }\n\n  pause() {\n    this.__pending = true;\n    this.__pauseTime = inject.now();\n    this.__playState = 'paused';\n    frame.offFrame(this.cb);\n    this.__cancelTask();\n    this.emit(Event.KARAS_ANIMATION_PAUSE);\n    return this;\n  }\n\n  finish() {\n    let { fill, playState, __fin, __record } = this;\n    if(playState === 'finished') {\n      return this;\n    }\n    frame.offFrame(this.cb);\n    this.__cancelTask();\n    let { target, lastStyle } = this;\n    let root = target.root;\n    if(root) {\n      this.__playState = 'finished';\n      let needRefresh;\n      // 停留在最后一帧\n      if({\n        forwards: true,\n        both: true,\n      }.hasOwnProperty(fill)) {\n        let last = this.frames[this.frames.length - 1];\n        needRefresh = stringify(last.style, lastStyle, this.target);\n        if(needRefresh) {\n          root.setRefreshLevel(getLevel(last.style));\n          root.addRefreshTask(this.__task = __fin);\n        }\n        else {\n          frame.nextFrame(this.__task = __fin);\n        }\n      }\n      else {\n        root.setRefreshLevel(getLevel(__record.hash));\n        restore(__record.keys, target);\n        root.addRefreshTask(this.__task = __fin);\n      }\n    }\n    return this;\n  }\n\n  cancel() {\n    frame.offFrame(this.cb);\n    this.__cancelTask();\n    if(this.__playState === 'idle') {\n      return this;\n    }\n    this.__playState = 'idle';\n    let { target } = this;\n    let root = target.root;\n    if(root) {\n      let task = this.__task = () => {\n        this.emit(Event.KARAS_ANIMATION_CANCEL);\n      };\n      root.addRefreshTask(task);\n    }\n    return this;\n  }\n\n  __cancelTask() {\n    let { target, __task } = this;\n    if(target.root && __task) {\n      target.root.delRefreshTask(__task);\n    }\n  }\n\n  __destroy() {\n    frame.offFrame(this.cb);\n    this.__cancelTask();\n    this.__playState = 'idle';\n    this.__isDestroyed = true;\n  }\n\n  get id() {\n    return this.__id;\n  }\n  get target() {\n    return this.__target;\n  }\n  get list() {\n    return this.__list;\n  }\n  get options() {\n    return this.__options;\n  }\n  get duration() {\n    return this.__duration;\n  }\n  get delay() {\n    return this.__delay;\n  }\n  get endDelay() {\n    return this.__endDelay;\n  }\n  get fps() {\n    return this.__fps;\n  }\n  set fps(v) {\n    v = parseInt(v) || 60;\n    if(v < 0) {\n      v = 60;\n    }\n    this.__fps = v;\n  }\n  get iterations() {\n    return this.__iterations;\n  }\n  get fill() {\n    return this.__fill;\n  }\n  get direction() {\n    return this.__direction;\n  }\n  get frames() {\n    return this.__frames;\n  }\n  get framesR() {\n    return this.__framesR;\n  }\n  get playbackRate() {\n    return this.__playbackRate;\n  }\n  set playbackRate(v) {\n    v = parseFloat(v) || 0;\n    if(v < 0) {\n      v = 1;\n    }\n    this.__playbackRate = v;\n  }\n  get startTime() {\n    return this.__startTime;\n  }\n  get pending() {\n    return this.__pending;\n  }\n  get offsetTime() {\n    return this.__offsetTime;\n  }\n  get pauseTime() {\n    return this.__pauseTime;\n  }\n  get playState() {\n    return this.__playState;\n  }\n  get playCount() {\n    return this.__playCount;\n  }\n  set playCount(v) {\n    this.__playCount = v;\n  }\n  get cb() {\n    return this.__cb;\n  }\n  get isDestroyed() {\n    return this.__isDestroyed;\n  }\n  get lastStyle() {\n    return this.__lastStyle;\n  }\n}\n\nexport default Animation;\n","import Node from './Node';\nimport mode from '../util/mode';\nimport unit from '../style/unit';\nimport tf from '../style/transform';\nimport gradient from '../style/gradient';\nimport border from '../style/border';\nimport match from '../style/match';\nimport css from '../style/css';\nimport util from '../util/util';\nimport Component from './Component';\nimport Animation from '../animate/Animation';\n\nfunction renderBorder(renderMode, points, color, ctx, xom) {\n  if(renderMode === mode.CANVAS) {\n    points.forEach(point => {\n      ctx.beginPath();\n      ctx.fillStyle = color;\n      ctx.moveTo(point[0], point[1]);\n      for(let i = 2, len = point.length; i < len; i += 2) {\n        ctx.lineTo(point[i], point[i + 1]);\n      }\n      ctx.fill();\n      ctx.closePath();\n    });\n  }\n  else if(renderMode === mode.SVG) {\n    let s = '';\n    points.forEach(point => {\n      s += `M ${point[0]} ${point[1]}`;\n      for(let i = 2, len = point.length; i < len; i += 2) {\n        s += `L ${point[i]} ${point[i + 1]} `;\n      }\n    });\n    let item = {\n      type: 'item',\n      tagName: 'path',\n      props: [\n        ['d', s],\n        ['fill', color],\n      ],\n    };\n    xom.addBorder([\n      ['d', s],\n      ['fill', color],\n    ]);\n  }\n}\n\nclass Xom extends Node {\n  constructor(tagName, props) {\n    super();\n    props = props || [];\n    // 构建工具中都是arr，手写可能出现hash情况\n    if(Array.isArray(props)) {\n      this.props = util.arr2hash(props);\n      this.__props = props;\n    }\n    else {\n      this.props = props;\n      this.__props = util.hash2arr(props);\n    }\n    this.__tagName = tagName;\n    this.__style = this.props.style || {}; // style被解析后的k-v形式\n    this.__animateStyle = {}; // 动画过程中的样式\n    this.__listener = {};\n    this.__props.forEach(item => {\n      let k = item[0];\n      let v = item[1];\n      if(/^on[a-zA-Z]/.test(k)) {\n        k = k.slice(2).toLowerCase();\n        let arr = this.__listener[k] = this.__listener[k] || [];\n        arr.push(v);\n      }\n      else if(k === 'id' && v) {\n        this.__id = v;\n      }\n      else if(['class', 'className'].indexOf(k) > -1 && v) {\n        v = match.splitClass(v);\n        if(v) {\n          this.__class = v;\n        }\n      }\n    });\n    this.__matrix = null;\n    this.__matrixEvent = null;\n    this.__animationList = [];\n  }\n\n  // 设置了css时，解析匹配\n  __traverseCss(top, css) {\n    if(!this.isGeom()) {\n      this.children.forEach(item => {\n        if(item instanceof Xom || item instanceof Component) {\n          item.__traverseCss(top, css);\n        }\n      });\n    }\n    // inline拥有最高优先级\n    let style = match.parse(this, top, css) || {};\n    for(let i in style) {\n      if(style.hasOwnProperty(i) && !this.__style.hasOwnProperty(i)) {\n        this.__style[i] = style[i];\n      }\n    }\n  }\n\n  __measure() {\n    let { children } = this;\n    if(children) {\n      children.forEach(child => {\n        if(child instanceof Xom) {\n          child.__measure();\n        }\n        else if(child instanceof Component) {\n          child.shadowRoot.__measure();\n        }\n        else {\n          child.__measure();\n        }\n      });\n    }\n  }\n\n  // 获取margin/padding的实际值\n  __mp(currentStyle, computedStyle, w) {\n    let {\n      marginTop,\n      marginRight,\n      marginBottom,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n    } = currentStyle;\n    computedStyle.marginLeft = this.__mpWidth(marginLeft, w);\n    computedStyle.marginTop = this.__mpWidth(marginTop, w);\n    computedStyle.marginRight = this.__mpWidth(marginRight, w);\n    computedStyle.marginBottom = this.__mpWidth(marginBottom, w);\n    computedStyle.paddingLeft = this.__mpWidth(paddingLeft, w);\n    computedStyle.paddingTop = this.__mpWidth(paddingTop, w);\n    computedStyle.paddingRight = this.__mpWidth(paddingRight, w);\n    computedStyle.paddingBottom = this.__mpWidth(paddingBottom, w);\n  }\n\n  __mpWidth(mp, w) {\n    if(mp.unit === unit.PX) {\n      return mp.value;\n    }\n    else if(mp.unit === unit.PERCENT) {\n      return mp.value * w * 0.01;\n    }\n    return 0;\n  }\n\n  // absolute且无尺寸时，fake标明先假布局一次计算尺寸\n  __layout(data, fake) {\n    let { w } = data;\n    let { isDestroyed, currentStyle, computedStyle } = this;\n    let {\n      display,\n      width,\n    } = currentStyle;\n    if(width.unit !== unit.AUTO) {\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    this.__mp(currentStyle, computedStyle, w);\n    this.__ox = this.__oy = 0;\n    if(isDestroyed || display === 'none') {\n      computedStyle.width = computedStyle.height = computedStyle.outerWidth = computedStyle.outerHeight = 0;\n      return;\n    }\n    if(display === 'block') {\n      this.__layoutBlock(data, fake);\n    }\n    else if(display === 'flex') {\n      this.__layoutFlex(data, fake);\n    }\n    else if(display === 'inline') {\n      this.__layoutInline(data, fake);\n    }\n    // 除root节点外relative渲染时做偏移，百分比基于父元素，若父元素没有定高则为0\n    if(currentStyle.position === 'relative' && this.parent) {\n      let { top, right, bottom, left } = currentStyle;\n      let { parent } = this;\n      if(top.unit !== unit.AUTO) {\n        let n = css.calRelative(currentStyle, 'top', top, parent);\n        this.__offsetY(n);\n        computedStyle.top = n;\n        computedStyle.bottom = 'auto';\n      }\n      else if(bottom.unit !== unit.AUTO) {\n        let n = css.calRelative(currentStyle, 'bottom', bottom, parent);\n        this.__offsetY(-n);\n        computedStyle.bottom = n;\n        computedStyle.top = 'auto';\n      }\n      else {\n        computedStyle.top = computedStyle.bottom = 'auto';\n      }\n      if(left.unit !== unit.AUTO) {\n        let n = css.calRelative(currentStyle, 'left', left, parent, true);\n        this.__offsetX(n);\n        computedStyle.left = n;\n        computedStyle.right = 'auto';\n      }\n      else if(right.unit !== unit.AUTO) {\n        let n = css.calRelative(currentStyle, 'right', right, parent, true);\n        this.__offsetX(-n);\n        computedStyle.right = n;\n        computedStyle.left = 'auto';\n      }\n      else {\n        computedStyle.left = computedStyle.right = 'auto';\n      }\n    }\n    // 计算结果存入computedStyle\n    computedStyle.width = this.width;\n    computedStyle.height = this.height;\n    computedStyle.outerWidth = this.outerWidth;\n    computedStyle.outerHeight = this.outerHeight;\n  }\n\n  isGeom() {\n    return this.tagName.charAt(0) === '$';\n  }\n\n  isRoot() {\n    return !this.parent;\n  }\n\n  // 预先计算是否是固定宽高，布局点位和尺寸考虑margin/border/padding\n  __preLayout(data) {\n    let { x, y, w, h } = data;\n    this.__x = x;\n    this.__y = y;\n    let { currentStyle, computedStyle } = this;\n    let {\n      width,\n      height,\n    } = currentStyle;\n    let {\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      marginTop,\n      marginRight,\n      marginBottom,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n    } = computedStyle;\n    // 除了auto外都是固定宽高度\n    let fixedWidth;\n    let fixedHeight;\n    if(width.unit !== unit.AUTO) {\n      fixedWidth = true;\n      switch(width.unit) {\n        case unit.PX:\n          w = width.value;\n          break;\n        case unit.PERCENT:\n          w *= width.value * 0.01;\n          break;\n      }\n    }\n    if(height.unit !== unit.AUTO) {\n      fixedHeight = true;\n      switch(height.unit) {\n        case unit.PX:\n          h = height.value;\n          break;\n        case unit.PERCENT:\n          h *= height.value * 0.01;\n          break;\n      }\n    }\n    // margin/padding/border影响x和y和尺寸\n    x += borderLeftWidth + marginLeft + paddingLeft;\n    data.x = x;\n    y += borderTopWidth + marginTop + paddingTop;\n    data.y = y;\n    if(width.unit === unit.AUTO) {\n      w -= borderLeftWidth + borderRightWidth + marginLeft + marginRight + paddingLeft + paddingRight;\n    }\n    if(height.unit === unit.AUTO) {\n      h -= borderTopWidth + borderBottomWidth + marginTop + marginBottom + paddingTop + paddingBottom;\n    }\n    return {\n      fixedWidth,\n      fixedHeight,\n      x,\n      y,\n      w,\n      h,\n    };\n  }\n\n  render(renderMode) {\n    this.__renderMode = renderMode;\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        bb: [],\n        children: [],\n        transform: [],\n        opacity: 1,\n      };\n    }\n    let { isDestroyed, ctx, currentStyle, computedStyle, width, height } = this;\n    this.__matrix = this.__matrixEvent = null;\n    let parent = this.parent;\n    let matrix = [1, 0, 0, 1, 0, 0];\n    while(parent) {\n      if(parent.matrixEvent) {\n        matrix = tf.mergeMatrix(parent.matrixEvent, matrix);\n        break;\n      }\n      parent = parent.parent;\n    }\n    // canvas继承祖先matrix，没有则恢复默认，防止其它matrix影响；svg则要考虑事件\n    if(matrix[0] !== 1\n      || matrix[1] !== 0\n      || matrix[1] !== 0\n      || matrix[1] !== 1\n      || matrix[1] !== 0\n      || matrix[1] !== 0) {\n      if(renderMode === mode.CANVAS) {\n        this.__matrix = this.__matrixEvent = matrix;\n      }\n      else if(renderMode === mode.SVG) {\n        this.__matrixEvent = matrix;\n      }\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.setTransform(...matrix);\n    }\n    let {\n      display,\n      marginTop,\n      marginRight,\n      marginBottom,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n      backgroundColor,\n      borderTopWidth,\n      borderTopColor,\n      borderTopStyle,\n      borderRightWidth,\n      borderRightColor,\n      borderRightStyle,\n      borderBottomWidth,\n      borderBottomColor,\n      borderBottomStyle,\n      borderLeftWidth,\n      borderLeftColor,\n      borderLeftStyle,\n      visibility,\n    } = computedStyle;\n    let {\n      backgroundImage,\n      transform,\n      transformOrigin,\n      opacity,\n    } = currentStyle;\n    // 使用sx和sy渲染位置，考虑了relative和translate影响\n    let { sx: x, sy: y } = this;\n    let x1 = x + marginLeft;\n    let x2 = x1 + borderLeftWidth;\n    let x3 = x2 + width + paddingLeft + paddingRight;\n    let x4 = x3 + borderRightWidth;\n    let y1 = y + marginTop;\n    let y2 = y1 + borderTopWidth;\n    let y3 = y2 + height + paddingTop + paddingBottom;\n    let y4 = y3 + borderBottomWidth;\n    let iw = width + paddingLeft + paddingRight;\n    let ih = height + paddingTop + paddingBottom;\n    let ow = iw + marginLeft + borderLeftWidth + borderRightWidth + marginRight;\n    let oh = ih + marginTop + borderTopWidth + borderBottomWidth + marginBottom;\n    // 先设置透明度，可以向上累积\n    parent = this.parent;\n    let opa = opacity;\n    while(parent) {\n      opa *= parent.currentStyle.opacity;\n      parent = parent.parent;\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.globalAlpha = opa;\n    }\n    else {\n      this.__virtualDom.opacity = opacity;\n    }\n    let tfo = tf.calOrigin(transformOrigin, x, y, ow, oh);\n    computedStyle.transformOrigin = tfo;\n    // transform相对于自身\n    if(transform) {\n      let matrix = tf.calMatrix(transform, tfo, x, y, ow, oh);\n      // 初始化有可能继承祖先的matrix\n      this.__matrix = this.matrix ? tf.mergeMatrix(this.matrix, matrix) : matrix;\n      computedStyle.transform = 'matrix(' + matrix.join(', ') + ')';\n      let parent = this.parent;\n      while(parent) {\n        if(parent.matrixEvent) {\n          matrix = tf.mergeMatrix(parent.matrixEvent, matrix);\n          break;\n        }\n        parent = parent.parent;\n      }\n      this.__matrixEvent = matrix;\n      if(renderMode === mode.CANVAS) {\n        ctx.setTransform(...matrix);\n      }\n      else if(renderMode === mode.SVG) {\n        this.addTransform(['matrix', this.matrix.join(',')]);\n      }\n    }\n    else {\n      computedStyle.transform = 'matrix(1, 0, 0, 1, 0, 0)';\n    }\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    // 先渲染渐变，没有则背景色\n    let bgc;\n    if(backgroundImage) {\n      bgc = this.__gradient(renderMode, x2, y2, x3, y3, iw, ih, 'backgroundImage', backgroundImage, computedStyle);\n    }\n    else if(backgroundColor !== 'transparent') {\n      bgc = backgroundColor;\n    }\n    if(bgc) {\n      if(renderMode === mode.CANVAS) {\n        ctx.beginPath();\n        ctx.fillStyle = bgc;\n        ctx.rect(x2, y2, iw, ih);\n        ctx.fill();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        this.addBackground([\n          ['x', x2],\n          ['y', y2],\n          ['width', iw],\n          ['height', ih],\n          ['fill', bgc]\n        ]);\n      }\n    }\n    // 边框需考虑尖角，两条相交边平分45°夹角\n    if(borderTopWidth > 0 && borderTopColor !== 'transparent') {\n      let deg1 = Math.atan(borderTopWidth / borderLeftWidth);\n      let deg2 = Math.atan(borderTopWidth / borderRightWidth);\n      let points = border.calPoints(borderTopWidth, borderTopStyle, deg1, deg2, x1, x2, x3, x4, y1, y2, y3, y4, 0);\n      renderBorder(renderMode, points, borderTopColor, ctx, this);\n    }\n    if(borderRightWidth > 0 && borderRightColor !== 'transparent') {\n      let deg1 = Math.atan(borderRightWidth / borderTopWidth);\n      let deg2 = Math.atan(borderRightWidth / borderBottomWidth);\n      let points = border.calPoints(borderRightWidth, borderRightStyle, deg1, deg2, x1, x2, x3, x4, y1, y2, y3, y4, 1);\n      renderBorder(renderMode, points, borderRightColor, ctx, this);\n    }\n    if(borderBottomWidth > 0 && borderBottomColor !== 'transparent') {\n      let deg1 = Math.atan(borderBottomWidth / borderLeftWidth);\n      let deg2 = Math.atan(borderBottomWidth / borderRightWidth);\n      let points = border.calPoints(borderBottomWidth, borderBottomStyle, deg1, deg2, x1, x2, x3, x4, y1, y2, y3, y4, 2);\n      renderBorder(renderMode, points, borderBottomColor, ctx, this);\n    }\n    if(borderLeftWidth > 0 && borderLeftColor !== 'transparent') {\n      let deg1 = Math.atan(borderLeftWidth / borderTopWidth);\n      let deg2 = Math.atan(borderLeftWidth / borderBottomWidth);\n      let points = border.calPoints(borderLeftWidth, borderLeftStyle, deg1, deg2, x1, x2, x3, x4, y1, y2, y3, y4, 3);\n      renderBorder(renderMode, points, borderLeftColor, ctx, this);\n    }\n  }\n\n  __renderByMask(renderMode) {\n    let prev = this.prev;\n    let hasMask = prev && prev.isMask;\n    if(renderMode === mode.CANVAS) {\n      // 先保存之前的图像\n      let cache1;\n      let cache2;\n      if(hasMask) {\n        cache1 = this.root.__getImageData();\n        this.root.__clear();\n      }\n      // 然后反向先绘制需要遮罩的图层\n      this.render(renderMode);\n      // 再用mask反遮罩\n      if(hasMask) {\n        this.ctx.globalCompositeOperation = 'destination-in';\n        prev.render(renderMode);\n        cache2 = this.root.__getImageData();\n        this.root.__clear();\n      }\n      this.ctx.globalCompositeOperation = 'source-over';\n      if(hasMask) {\n        this.root.__putImageData(util.mergeImageData(cache1, cache2));\n      }\n    }\n    else if(renderMode === mode.SVG) {\n      this.render(renderMode);\n      if(hasMask) {\n        this.virtualDom.mask = prev.maskId;\n      }\n    }\n  }\n\n  __destroy() {\n    let ref = this.props.ref;\n    if(ref) {\n      let owner = this.host || this.root;\n      if(owner && owner.ref[ref]) {\n        delete owner.ref[ref];\n      }\n    }\n    // if(this.animation) {\n    //   this.animation.__destroy();\n    // }\n    this.animationList.forEach(item => item.__destroy());\n    super.__destroy();\n    this.__matrix = this.__matrixEvent = null;\n  }\n\n  // 先查找到注册了事件的节点，再捕获冒泡判断增加性能\n  __emitEvent(e, force) {\n    let { event: { type } } = e;\n    let { isDestroyed, listener, children, computedStyle, outerWidth, outerHeight, matrixEvent } = this;\n    if(isDestroyed || computedStyle.display === 'none' || e.__stopPropagation) {\n      return;\n    }\n    let cb;\n    if(listener.hasOwnProperty(type)) {\n      cb = listener[type];\n    }\n    let childWillResponse;\n    // touchmove之类强制的直接通知即可\n    if(force) {\n      if(!this.isGeom()) {\n        // 先响应absolute/relative高优先级，从后往前遮挡顺序\n        for(let i = children.length - 1; i >= 0; i--) {\n          let child = children[i];\n          if((child instanceof Xom || child instanceof Component) && ['absolute', 'relative'].indexOf(child.computedStyle.position) > -1) {\n            if(child.__emitEvent(e, force)) {\n              childWillResponse = true;\n            }\n          }\n        }\n        // 再看普通流，从后往前遮挡顺序\n        for(let i = children.length - 1; i >= 0; i--) {\n          let child = children[i];\n          if((child instanceof Xom || child instanceof Component) && ['absolute', 'relative'].indexOf(child.computedStyle.position) > -1) {\n            if(child.__emitEvent(e, force)) {\n              childWillResponse = true;\n            }\n          }\n        }\n      }\n      // touchmove之类也需要考虑target是否是自己以及孩子\n      if(!childWillResponse && this.root.__touchstartTarget !== this) {\n        return;\n      }\n      if(e.__stopPropagation) {\n        return;\n      }\n      if(type === 'touchmove' || type === 'touchend' || type === 'touchcancel') {\n        e.target = this.root.__touchstartTarget;\n      }\n      if(cb) {\n        cb.forEach(item => {\n          if(e.__stopImmediatePropagation) {\n            return;\n          }\n          item(e);\n        });\n      }\n      return true;\n    }\n    if(!this.isGeom()) {\n      // 先响应absolute/relative高优先级，从后往前遮挡顺序\n      for(let i = children.length - 1; i >= 0; i--) {\n        let child = children[i];\n        if((child instanceof Xom || child instanceof Component) && ['absolute', 'relative'].indexOf(child.computedStyle.position) > -1) {\n          if(child.__emitEvent(e)) {\n            childWillResponse = true;\n          }\n        }\n      }\n      // 再看普通流，从后往前遮挡顺序\n      for(let i = children.length - 1; i >= 0; i--) {\n        let child = children[i];\n        if((child instanceof Xom || child instanceof Component) && ['absolute', 'relative'].indexOf(child.computedStyle.position) === -1) {\n          if(child.__emitEvent(e)) {\n            childWillResponse = true;\n          }\n        }\n      }\n    }\n    if(e.__stopPropagation) {\n      return;\n    }\n    // child触发则parent一定触发，否则判断事件坐标是否在节点内且未被遮挡\n    if(childWillResponse || this.willResponseEvent(e)) {\n      e.__hasEmitted = true;\n      if(cb) {\n        cb.forEach(item => {\n          if(e.__stopImmediatePropagation) {\n            return;\n          }\n          if(util.isFunction(item)) {\n            item(e);\n          }\n        });\n      }\n      return true;\n    }\n  }\n\n  willResponseEvent(e) {\n    let { x, y, __hasEmitted } = e;\n    if(__hasEmitted) {\n      return;\n    }\n    let { sx, sy, outerWidth, outerHeight, matrixEvent } = this;\n    let inThis = tf.pointInQuadrilateral(x - sx, y - sy,\n      0, 0,\n      outerWidth,0,\n      0, outerHeight,\n      outerWidth, outerHeight,\n      matrixEvent);\n    if(inThis) {\n      if(!e.target) {\n        e.target = this;\n        // 缓存target给move用\n        if(e.event.type === 'touchstart') {\n          this.root.__touchstartTarget = this;\n        }\n      }\n      return true;\n    }\n  }\n\n  __gradient(renderMode, x2, y2, x3, y3, iw, ih, ks, vs, computedStyle) {\n    let { k, v, d } = vs;\n    computedStyle[ks] = k + '-gradient(';\n    let cx = x2 + iw * 0.5;\n    let cy = y2 + ih * 0.5;\n    let res;\n    if(k === 'linear') {\n      let gd = gradient.getLinear(v, d, cx, cy, iw, ih);\n      res = this.__getLg(renderMode, gd);\n      computedStyle[ks] += d + 'deg';\n    }\n    else if(k === 'radial') {\n      let gd = gradient.getRadial(v, d, cx, cy, x2, y2, x3, y3);\n      res = this.__getRg(renderMode, gd);\n      computedStyle[ks] += d;\n    }\n    v.forEach(item => {\n      computedStyle[ks] += ', ' + item[0];\n      if(item[1]) {\n        computedStyle[ks] += ' ' + item[1].str;\n      }\n    });\n    computedStyle[ks] += ')';\n    return res;\n  }\n\n  __getLg(renderMode, gd) {\n    if(renderMode === mode.CANVAS) {\n      let lg = this.ctx.createLinearGradient(gd.x1, gd.y1, gd.x2, gd.y2);\n      gd.stop.forEach(item => {\n        lg.addColorStop(item[1], item[0]);\n      });\n      return lg;\n    }\n    else if(renderMode === mode.SVG) {\n      let uuid = this.defs.add({\n        tagName: 'linearGradient',\n        props: [\n          ['x1', gd.x1],\n          ['y1', gd.y1],\n          ['x2', gd.x2],\n          ['y2', gd.y2]\n        ],\n        children: gd.stop.map(item => {\n          return {\n            tagName: 'stop',\n            props: [\n              ['stop-color', item[0]],\n              ['offset', item[1] * 100 + '%']\n            ],\n          };\n        }),\n      });\n      return `url(#${uuid})`;\n    }\n  }\n\n  __getRg(renderMode, gd) {\n    if(renderMode === mode.CANVAS) {\n      let rg = this.ctx.createRadialGradient(gd.cx, gd.cy, 0, gd.cx, gd.cy, gd.r);\n      gd.stop.forEach(item => {\n        rg.addColorStop(item[1], item[0]);\n      });\n      return rg;\n    }\n    else if(renderMode === mode.SVG) {\n      let uuid = this.defs.add({\n        tagName: 'radialGradient',\n        props: [\n          ['cx', gd.cx],\n          ['cy', gd.cy],\n          ['r', gd.r]\n        ],\n        children: gd.stop.map(item => {\n          return {\n            tagName: 'stop',\n            props: [\n              ['stop-color', item[0]],\n              ['offset', item[1] * 100 + '%']\n            ],\n          };\n        }),\n      });\n      return `url(#${uuid})`;\n    }\n  }\n\n  addBorder(props) {\n    this.virtualDom.bb.push({\n      type: 'item',\n      tagName: 'path',\n      props,\n    });\n  }\n\n  addBackground(props) {\n    this.virtualDom.bb.push({\n      type: 'item',\n      tagName: 'rect',\n      props,\n    });\n  }\n\n  addTransform(props) {\n    this.virtualDom.transform.push(props);\n  }\n\n  animate(list, option) {\n    let animation = new Animation(this, list, option);\n    this.animationList.push(animation);\n    return animation.play();\n  }\n\n  __computed() {\n    css.compute(this, this.isRoot());\n    // 即便自己不需要计算，但children还要继续递归检查\n    if(!this.isGeom()) {\n      this.children.forEach(item => {\n        if(item instanceof Xom || item instanceof Component) {\n          item.__computed();\n        }\n        else {\n          item.__style = this.currentStyle;\n          css.compute(item);\n          // 文字首先测量所有字符宽度\n          item.__measure();\n        }\n      });\n    }\n  }\n\n  __repaint() {\n    css.repaint(this, this.isRoot());\n    // 即便自己不需要计算，但children还要继续递归检查\n    if(!this.isGeom()) {\n      this.children.forEach(item => {\n        if(item instanceof Xom || item instanceof Component) {\n          item.__repaint();\n        }\n        else {\n          item.__style = this.currentStyle;\n          css.repaint(item);\n        }\n      });\n    }\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get outerWidth() {\n    let { computedStyle: {\n      borderLeftWidth,\n      borderRightWidth,\n      marginRight,\n      marginLeft,\n      paddingRight,\n      paddingLeft,\n    } } = this;\n    return this.width\n      + borderLeftWidth\n      + borderRightWidth\n      + marginLeft\n      + marginRight\n      + paddingLeft\n      + paddingRight;\n  }\n  get outerHeight() {\n    let { computedStyle: {\n      borderTopWidth,\n      borderBottomWidth,\n      marginTop,\n      marginBottom,\n      paddingTop,\n      paddingBottom,\n    } } = this;\n    return this.height\n      + borderTopWidth\n      + borderBottomWidth\n      + marginTop\n      + marginBottom\n      + paddingTop\n      + paddingBottom;\n  }\n  get listener() {\n    return this.__listener;\n  }\n  get renderMode() {\n    return this.__renderMode;\n  }\n  get matrix() {\n    return this.__matrix;\n  }\n  get matrixEvent() {\n    return this.__matrixEvent;\n  }\n  get id() {\n    return this.__id;\n  }\n  get class() {\n    return this.__class || [];\n  }\n  get animationList() {\n    return this.__animationList;\n  }\n  get animateStyle() {\n    return this.__animateStyle;\n  }\n  get currentStyle() {\n    let { style, animateStyle, animationList } = this;\n    // 有一个动画在运行则返回animateStyle，否则是style\n    for(let i = 0, len = animationList.length; i < len; i++) {\n      let animation = animationList[i];\n      let { playState, options } = animation;\n      if(playState === 'idle') {\n        continue;\n      }\n      else if(playState === 'finished' && ['forwards', 'both'].indexOf(options.fill) === -1) {\n        continue;\n      }\n      return animateStyle;\n    }\n    return style;\n  }\n}\n\nexport default Xom;\n","class LineGroup {\n  constructor(x, y) {\n    this.__list = [];\n    this.__x = x;\n    this.__y = y;\n    this.__baseLine = 0;\n  }\n\n  add(item) {\n    this.list.push(item);\n  }\n\n  __calBaseLine() {\n    let baseLine = 0;\n    this.list.forEach(item => {\n      baseLine = Math.max(baseLine, item.baseLine);\n    });\n    return baseLine;\n  }\n\n  verticalAlign() {\n    let n = this.__baseLine = this.__calBaseLine();\n    // 仅当有2个和以上时才需要vertical对齐调整\n    if(this.list.length > 1) {\n      this.list.forEach(item => {\n        let m = item.baseLine;\n        if(m !== n) {\n          item.__offsetY(n - m);\n        }\n      });\n    }\n  }\n\n  horizonAlign(diff) {\n    this.list.forEach(item => {\n      item.__offsetX(diff);\n    });\n  }\n\n  get list() {\n    return this.__list;\n  }\n  get x() {\n    return this.__x;\n  }\n  get y() {\n    return this.__y;\n  }\n  get width() {\n    let width = 0;\n    this.list.forEach(item => {\n      width += item.width;\n    });\n    return width;\n  }\n  get height() {\n    let height = 0;\n    this.list.forEach(item => {\n      height = Math.max(height, item.height);\n    });\n    return height;\n  }\n  get baseLine() {\n    return this.__baseLine;\n  }\n  get size() {\n    return this.__list.length;\n  }\n}\n\nexport default LineGroup;\n","import Xom from '../node/Xom';\nimport reset from '../style/reset';\nimport css from '../style/css';\nimport unit from '../style/unit';\nimport mode from '../util/mode';\nimport util from '../util/util';\nimport matrix from '../math/matrix';\n\nconst REGISTER = {};\n\nclass Geom extends Xom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    this.__isMask = !util.isNil(this.props.mask) || this.props.mask === true;\n  }\n\n  __init() {\n    let style = this.style;\n    if(this.isMask) {\n      style.position = 'absolute';\n      style.display = 'block';\n      style.visibility = 'visible';\n      style.background = null;\n      style.border = null;\n      style.strokeWidth = 0;\n    }\n    css.normalize(style, reset.geom);\n    let ref = this.props.ref;\n    if(ref) {\n      let owner = this.host || this.root;\n      if(owner) {\n        owner.ref[ref] = this;\n      }\n    }\n  }\n\n  __tryLayInline(w, total) {\n    // 无children，直接以style的width为宽度，不定义则为0\n    let { currentStyle: { width } } = this;\n    if(width.unit === unit.PX) {\n      return w - width.value;\n    }\n    else if(width.unit === unit.PERCENT) {\n      return w - total * width.value * 0.01;\n    }\n    return w;\n  }\n\n  __calAutoBasis(isDirectionRow) {\n    let b = 0;\n    let min = 0;\n    let max = 0;\n    let { currentStyle, computedStyle } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n    } = currentStyle;\n    let {\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = computedStyle;\n    let main = isDirectionRow ? width : height;\n    if(main.unit !== unit.AUTO) {\n      b = max += main.value;\n    }\n    // border也得计算在内\n    if(isDirectionRow) {\n      let w = borderRightWidth + borderLeftWidth;\n      b += w;\n      max += w;\n      min += w;\n    }\n    else {\n      let h = borderTopWidth + borderBottomWidth;\n      b += h;\n      max += h;\n      min += h;\n    }\n    return { b, min, max };\n  }\n\n  __layoutBlock(data) {\n    let { fixedHeight, w, h } = this.__preLayout(data);\n    let {\n      marginLeft,\n      marginRight,\n      width,\n    } = this.currentStyle;\n    this.__width = w;\n    this.__height = fixedHeight ? h : 0;\n    // 处理margin:xx auto居中对齐\n    if(marginLeft.unit === unit.AUTO && marginRight.unit === unit.AUTO && width.unit !== unit.AUTO) {\n      let ow = this.outerWidth;\n      if(ow < data.w) {\n        this.__offsetX((data.w - ow) * 0.5);\n      }\n    }\n  }\n\n  __layoutFlex(data) {\n    // 无children所以等同于block\n    this.__layoutBlock(data);\n  }\n\n  __layoutInline(data) {\n    let { fixedWidth, fixedHeight, x, y, w, h } = this.__preLayout(data);\n    // 元素的width不能超过父元素w\n    this.__width = fixedWidth ? w : x - data.x;\n    this.__height = fixedHeight ? h : y - data.y;\n  }\n\n  __preRender(renderMode) {\n    let { sx: x, sy: y, width, height, currentStyle, computedStyle } = this;\n    let {\n      strokeWidth,\n      fill,\n      stroke,\n      strokeDasharray,\n      strokeLinecap,\n    } = currentStyle;\n    let {\n      borderTopWidth,\n      borderLeftWidth,\n      display,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n      visibility,\n    } = computedStyle;\n    let originX = x + borderLeftWidth + marginLeft + paddingLeft;\n    let originY = y + borderTopWidth + marginTop + paddingTop;\n    let cx = originX + width * 0.5;\n    let cy = originY + height * 0.5;\n    let iw = width + paddingLeft + paddingRight;\n    let ih = height + paddingTop + paddingBottom;\n    if(strokeWidth.unit === unit.PX) {\n      strokeWidth = strokeWidth.value;\n    }\n    else if(strokeWidth.unit === unit.PERCENT) {\n      strokeWidth = strokeWidth.value * width * 0.01;\n    }\n    else {\n      strokeWidth = 0;\n    }\n    computedStyle.strokeWidth = strokeWidth;\n    if(stroke.k === 'linear' || stroke.k === 'radial') {\n      stroke = this.__gradient(renderMode, originX, originY, originY + iw, originY + ih, iw, ih, 'stroke', stroke, computedStyle);\n    }\n    else {\n      computedStyle.stroke = stroke;\n    }\n    if(fill.k === 'linear' || fill.k === 'radial') {\n      fill = this.__gradient(renderMode, originX, originY, originY + iw, originY + ih, iw, ih, 'fill', fill, computedStyle);\n    }\n    else {\n      computedStyle.fill = fill;\n    }\n    computedStyle.strokeWidth = strokeWidth;\n    computedStyle.strokeDasharray = strokeDasharray;\n    computedStyle.strokeLinecap = strokeLinecap;\n    return {\n      x,\n      y,\n      originX,\n      originY,\n      cx,\n      cy,\n      display,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n      fill,\n      visibility,\n    };\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { isDestroyed, computedStyle: { display } } = this;\n    if(isDestroyed || display === 'none') {\n      return {\n        isDestroyed,\n        display,\n      };\n    }\n    if(renderMode === mode.SVG) {\n      this.__virtualDom = {\n        ...super.virtualDom,\n        type: 'geom',\n      };\n    }\n    return this.__preRender(renderMode);\n  }\n\n  __renderAsMask(renderMode) {\n    if(renderMode === mode.CANVAS) {}\n    else if(renderMode === mode.SVG) {\n      this.render(renderMode);\n      let vd = this.virtualDom;\n      vd.isMask = true;\n      // svg的mask没有transform，需手动计算变换后的坐标应用\n      let children = util.clone(vd.children);\n      let m = this.matrixEvent;\n      children.forEach(child => {\n        let xi = 0;\n        let yi = 1;\n        let x, y;\n        let props = child.props;\n        if(child.tagName === 'rect') {\n          for(let i = 0, len = props.length; i < len; i++) {\n            let [k, v] = props[i];\n            if(k === 'x') {\n              xi = i;\n              x = v;\n            }\n            else if(k === 'y') {\n              yi = i;\n              y = v;\n            }\n          }\n          let point = matrix.calPoint([x, y], m);\n          props[xi][1] = point[0];\n          props[yi][1] = point[1];\n        }\n        else if(child.tagName === 'circle' || child.tagName === 'ellipse') {\n          for(let i = 0, len = props.length; i < len; i++) {\n            let [k, v] = props[i];\n            if(k === 'cx') {\n              xi = i;\n              x = v;\n            }\n            else if(k === 'cy') {\n              yi = i;\n              y = v;\n            }\n          }\n          let point = matrix.calPoint([x, y], m);\n          props[xi][1] = point[0];\n          props[yi][1] = point[1];\n        }\n        else if(child.tagName === 'polygon') {\n          for(let i = 0, len = props.length; i < len; i++) {\n            let [k, v] = props[i];\n            if(k === 'points') {\n              props[i][1] = v.replace(/([\\d.]+),([\\d.]+)/g, ($0, $1, $2) => {\n                return matrix.calPoint([$1, $2], m).join(',');\n              });\n              break;\n            }\n          }\n        }\n        else if(child.tagName === 'path') {\n          for(let i = 0, len = props.length; i < len; i++) {\n            let [k, v] = props[i];\n            if(k === 'd') {\n              props[i][1] = v.replace(/([\\d.]+),([\\d.]+)/g, ($0, $1, $2) => {\n                return matrix.calPoint([$1, $2], m).join(',');\n              });\n              break;\n            }\n          }\n        }\n      });\n      let maskId = this.defs.add({\n        tagName: 'mask',\n        props: [],\n        children,\n      });\n      this.__maskId = `url(#${maskId})`;\n    }\n  }\n\n  addGeom(tagName, props) {\n    props = util.hash2arr(props);\n    this.virtualDom.children.push({\n      type: 'item',\n      tagName,\n      props,\n    });\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get baseLine() {\n    return this.__height;\n  }\n  get isMask() {\n    return this.__isMask;\n  }\n  get maskId() {\n    return this.__maskId;\n  }\n\n  static getRegister(name) {\n    if(!REGISTER.hasOwnProperty(name)) {\n      throw new Error(`Geom has not register: ${name}`);\n    }\n    return REGISTER[name];\n  }\n  static register(name, obj) {\n    if(Geom.hasRegister(name)) {\n      throw new Error(`Geom has already register: ${name}`);\n    }\n    REGISTER[name] = obj;\n  }\n  static hasRegister(name) {\n    return REGISTER.hasOwnProperty(name);\n  }\n}\n\nexport default Geom;\n","import Xom from './Xom';\nimport Text from './Text';\nimport LineGroup from './LineGroup';\nimport Geom from '../geom/Geom';\nimport util from '../util/util';\nimport reset from '../style/reset';\nimport css from '../style/css';\nimport unit from '../style/unit';\nimport mode from '../util/mode';\nimport sort from '../util/sort';\nimport Component from './Component';\n\nconst TAG_NAME = {\n  'div': true,\n  'span': true,\n  'img': true,\n};\nconst INLINE = {\n  'span': true,\n  'img': true,\n};\n\nclass Dom extends Xom {\n  constructor(tagName, props, children) {\n    super(tagName, props);\n    this.__children = children || [];\n    this.__flowChildren = []; // 非绝对定位孩子\n    this.__absChildren = []; // 绝对定位孩子\n    this.__lineGroups = []; // 一行inline元素组成的LineGroup对象后的存放列表\n  }\n\n  /**\n   * 1. 封装string为Text节点\n   * 2. 打平children中的数组，变成一维\n   * 3. 合并相连的Text节点\n   * 4. 检测inline不能包含block和flex\n   * 5. 设置parent和prev/next和ctx和defs和mode\n   */\n  __traverse(ctx, defs, renderMode) {\n    let list = [];\n    this.__traverseChildren(this.children, list, ctx, defs, renderMode);\n    for(let i = list.length - 1; i > 0; i--) {\n      let item = list[i];\n      if(item instanceof Text) {\n        let prev = list[i - 1];\n        if(prev instanceof Text) {\n          prev.content += item.content;\n          list.splice(i, 1);\n        }\n        else {\n          i--;\n        }\n      }\n    }\n    let prev = null;\n    list.forEach(item => {\n      item.__ctx = ctx;\n      item.__defs = defs;\n      if(prev) {\n        prev.__next = item;\n        item.__prev = prev;\n      }\n      item.__parent = this;\n      prev = item;\n    });\n    this.__children = list;\n  }\n\n  __traverseChildren(children, list, ctx, defs, renderMode) {\n    if(Array.isArray(children)) {\n      children.forEach(item => {\n        this.__traverseChildren(item, list, ctx, defs, renderMode);\n      });\n    }\n    else if(children instanceof Dom || children instanceof Component) {\n      list.push(children);\n      children.__traverse(ctx, defs, renderMode);\n    }\n    // 图形没有children\n    else if(children instanceof Geom) {\n      list.push(children);\n    }\n    // 排除掉空的文本\n    else if(!util.isNil(children)) {\n      let text = new Text(children);\n      text.__renderMode = renderMode;\n      list.push(text);\n    }\n  }\n\n  // 合并设置style，包括继承和默认值，修改一些自动值和固定值，测量所有文字的宽度\n  __init() {\n    let style = this.__style;\n    // 仅支持flex/block/inline/none\n    if(!style.display || ['flex', 'block', 'inline', 'none'].indexOf(style.display) === -1) {\n      if(INLINE.hasOwnProperty(this.tagName)) {\n        style.display = 'inline';\n      }\n      else {\n        style.display = 'block';\n      }\n    }\n    // 标准化处理，默认值、简写属性\n    css.normalize(style, reset.dom);\n    this.children.forEach(item => {\n      if(item instanceof Xom || item instanceof Component) {\n        item.__init();\n      }\n      else {\n        item.__style = style;\n      }\n      if(item instanceof Text || item.style.position !== 'absolute') {\n        this.__flowChildren.push(item);\n      }\n      else {\n        this.__absChildren.push(item);\n      }\n    });\n    let ref = this.props.ref;\n    if(ref) {\n      let owner = this.host || this.root;\n      if(owner) {\n        owner.ref[ref] = this;\n      }\n    }\n  }\n\n  // 给定父宽度情况下，尝试行内放下后的剩余宽度，为负数即放不下\n  __tryLayInline(w, total) {\n    let { flowChildren, currentStyle: { width } } = this;\n    if(width.unit === unit.PX) {\n      return w - width.value;\n    }\n    else if(width.unit === unit.PERCENT) {\n      return w - total * width.value * 0.01;\n    }\n    for(let i = 0; i < flowChildren.length; i++) {\n      // 当放不下时直接返回，无需继续多余的尝试计算\n      if(w < 0) {\n        return w;\n      }\n      let item = flowChildren[i];\n      if(item instanceof Xom) {\n        w -= item.__tryLayInline(w, total);\n      }\n      else {\n        w -= item.textWidth;\n      }\n    }\n    return w;\n  }\n\n  // 设置y偏移值，递归包括children，此举在justify-content/margin-auto等对齐用\n  __offsetX(diff, isLayout) {\n    super.__offsetX(diff, isLayout);\n    this.flowChildren.forEach(item => {\n      if(item) {\n        item.__offsetX(diff, isLayout);\n      }\n    });\n  }\n\n  __offsetY(diff, isLayout) {\n    super.__offsetY(diff, isLayout);\n    this.flowChildren.forEach(item => {\n      if(item) {\n        item.__offsetY(diff, isLayout);\n      }\n    });\n  }\n\n  __calAutoBasis(isDirectionRow, w, h, isRecursion) {\n    let b = 0;\n    let min = 0;\n    let max = 0;\n    let { flowChildren, currentStyle, computedStyle } = this;\n    // 计算需考虑style的属性\n    let {\n      width,\n      height,\n      marginLeft,\n      marginTop,\n      marginRight,\n      marginBottom,\n      paddingLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n    } = currentStyle;\n    let {\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n    } = computedStyle;\n    let main = isDirectionRow ? width : height;\n    if(main.unit === unit.PX) {\n      b = max = main.value;\n      // 递归时children的长度会影响flex元素的最小宽度\n      if(isRecursion) {\n        min = b;\n      }\n    }\n    // 递归children取最大值\n    flowChildren.forEach(item => {\n      if(item instanceof Xom || item instanceof Component) {\n        let { b: b2, min: min2, max: max2 } = item.__calAutoBasis(isDirectionRow, w, h, true);\n        b = Math.max(b, b2);\n        min = Math.max(min, min2);\n        max = Math.max(max, max2);\n      }\n      // 文本\n      else if(isDirectionRow) {\n        min = Math.max(item.charWidth, min);\n        max = Math.max(item.textWidth, max);\n      }\n      // Geom\n      else {\n        item.__layout({\n          x: 0,\n          y: 0,\n          w,\n          h,\n        }, true);\n        min = Math.max(min, item.height);\n        max = Math.max(max, item.height);\n      }\n    });\n    // margin/padding/border也得计算在内，此时还没有，百分比相对于父flex元素的宽度\n    if(isDirectionRow) {\n      let mp = this.__calMp(marginLeft, w)\n        + this.__calMp(marginRight, w)\n        + this.__calMp(paddingLeft, w)\n        + this.__calMp(paddingRight, w);\n      let w2 = borderRightWidth + borderLeftWidth + mp;\n      b += w2;\n      max += w2;\n      min += w2;\n    }\n    else {\n      let mp = this.__calMp(marginTop, w)\n        + this.__calMp(marginBottom, w)\n        + this.__calMp(paddingTop, w)\n        + this.__calMp(paddingBottom, w);\n      let h2 = borderTopWidth + borderBottomWidth + mp;\n      b += h2;\n      max += h2;\n      min += h2;\n    }\n    return { b, min, max };\n  }\n\n  // 换算margin/padding为px单位\n  __calMp(v, w) {\n    let n = 0;\n    if(v.unit === unit.PX) {\n      n += v.value;\n    }\n    else if(v.unit === unit.PERCENT) {\n      v.value *= w * 0.01;\n      v.unit = unit.PX;\n      n += v.value;\n    }\n    return n;\n  }\n\n  // 本身block布局时计算好所有子元素的基本位置\n  __layoutBlock(data) {\n    let { flowChildren, currentStyle, computedStyle, lineGroups } = this;\n    lineGroups.splice(0);\n    let {\n      textAlign,\n    } = computedStyle;\n    let { fixedHeight, x, y, w, h } = this.__preLayout(data);\n    // 递归布局，将inline的节点组成lineGroup一行\n    let lineGroup = new LineGroup(x, y);\n    flowChildren.forEach(item => {\n      if(item instanceof Xom || item instanceof Component) {\n        if(item.currentStyle.display === 'inline') {\n          // inline开头，不用考虑是否放得下直接放\n          if(x === data.x) {\n            lineGroup.add(item);\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n            x += item.outerWidth;\n          }\n          else {\n            // 非开头先尝试是否放得下\n            let fw = item.__tryLayInline(w - x, w);\n            // 放得下继续\n            if(fw >= 0) {\n              item.__layout({\n                x,\n                y,\n                w,\n                h,\n              });\n            }\n            // 放不下处理之前的lineGroup，并重新开头\n            else {\n              lineGroups.push(lineGroup);\n              lineGroup.verticalAlign();\n              x = data.x;\n              y += lineGroup.height;\n              item.__layout({\n                x: data.x,\n                y,\n                w,\n                h,\n              });\n              lineGroup = new LineGroup(x, y);\n            }\n            x += item.outerWidth;\n            lineGroup.add(item);\n          }\n        }\n        else {\n          // block先处理之前可能的lineGroup\n          if(lineGroup.size) {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            y += lineGroup.height;\n            lineGroup = new LineGroup(data.x, y);\n          }\n          item.__layout({\n            x: data.x,\n            y,\n            w,\n            h,\n          });\n          x = data.x;\n          y += item.outerHeight;\n        }\n      }\n      // 文字和inline类似\n      else {\n        // x开头，不用考虑是否放得下直接放\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.width;\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__layout({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.width;\n          lineGroup.add(item);\n        }\n      }\n    });\n    // 结束后处理可能遗留的最后的lineGroup\n    if(lineGroup.size) {\n      lineGroups.push(lineGroup);\n      lineGroup.verticalAlign();\n      y += lineGroup.height;\n    }\n    this.__width = w;\n    this.__height = fixedHeight ? h : y - data.y;\n    // text-align\n    if(['center', 'right'].indexOf(textAlign) > -1) {\n      lineGroups.forEach(lineGroup => {\n        let diff = w - lineGroup.width;\n        if(diff > 0) {\n          lineGroup.horizonAlign(textAlign === 'center' ? diff * 0.5 : diff);\n        }\n      });\n    }\n    this.__marginAuto(currentStyle, data);\n  }\n\n  // 处理margin:xx auto居中对齐\n  __marginAuto(style, data) {\n    if(style.marginLeft.unit === unit.AUTO && style.marginRight.unit === unit.AUTO && style.width.unit !== unit.AUTO) {\n      let ow = this.outerWidth;\n      if(ow < data.w) {\n        this.__offsetX((data.w - ow) * 0.5, true);\n      }\n    }\n  }\n\n  // 弹性布局时的计算位置\n  __layoutFlex(data) {\n    let { flowChildren, currentStyle } = this;\n    let {\n      flexDirection,\n      justifyContent,\n      alignItems,\n    } = currentStyle;\n    let { fixedWidth, fixedHeight, x, y, w, h } = this.__preLayout(data);\n    let isDirectionRow = flexDirection === 'row';\n    // 计算伸缩基数\n    let growList = [];\n    let shrinkList = [];\n    let basisList = [];\n    let minList = [];\n    let growSum = 0;\n    let shrinkSum = 0;\n    let basisSum = 0;\n    let maxSum = 0;\n    flowChildren.forEach(item => {\n      if(item instanceof Xom || item instanceof Component) {\n        let { currentStyle, computedStyle } = item;\n        let { flexGrow, flexShrink, flexBasis } = currentStyle;\n        growList.push(flexGrow);\n        shrinkList.push(flexShrink);\n        growSum += flexGrow;\n        shrinkSum += flexShrink;\n        let { b, min, max } = item.__calAutoBasis(isDirectionRow, w, h);\n        // 根据basis不同，计算方式不同\n        if(flexBasis.unit === unit.AUTO) {\n          basisList.push(max);\n          basisSum += max;\n        }\n        else if(flexBasis.unit === unit.PX) {\n          computedStyle.flexBasis = b = flexBasis.value;\n          basisList.push(b);\n          basisSum += b;\n        }\n        else if(flexBasis.unit === unit.PERCENT) {\n          b = computedStyle.flexBasis = (isDirectionRow ? w : h) * flexBasis.value * 0.01;\n          basisList.push(b);\n          basisSum += b;\n        }\n        maxSum += max;\n        minList.push(min);\n      }\n      else {\n        growList.push(0);\n        shrinkList.push(1);\n        shrinkSum += 1;\n        if(isDirectionRow) {\n          basisList.push(item.textWidth);\n          basisSum += item.textWidth;\n          maxSum += item.textWidth;\n          minList.push(item.charWidth);\n        }\n        else {\n          item.__layout({\n            x: 0,\n            y: 0,\n            w,\n            h,\n          }, true);\n          basisList.push(item.height);\n          basisSum += item.height;\n          maxSum += item.height;\n          minList.push(item.height);\n        }\n      }\n    });\n    let maxCross = 0;\n    // 判断是否超出，决定使用grow还是shrink\n    let isOverflow = maxSum > (isDirectionRow ? w : h);\n    flowChildren.forEach((item, i) => {\n      let main;\n      let shrink = shrinkList[i];\n      let grow = growList[i];\n      // 计算主轴长度\n      if(isOverflow) {\n        let overflow = basisSum - (isDirectionRow ? w : h);\n        main = shrink ? (basisList[i] - overflow * shrink / shrinkSum) : basisList[i];\n      }\n      else {\n        let free = (isDirectionRow ? w : h) - basisSum;\n        main = grow ? (basisList[i] + free * grow / growSum) : basisList[i];\n      }\n      // 主轴长度的最小值不能小于元素的最小长度，比如横向时的字符宽度\n      main = Math.max(main, minList[i]);\n      if(item instanceof Xom || item instanceof Component) {\n        let { currentStyle, computedStyle } = item;\n        let {\n          display,\n          flexDirection,\n          width,\n          height,\n        } = currentStyle;\n        if(isDirectionRow) {\n          // row的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            currentStyle.display = computedStyle.display = 'block';\n          }\n          // 横向flex的child如果是竖向flex，高度自动的话要等同于父flex的高度\n          else if(display === 'flex' && flexDirection === 'column' && fixedHeight && height.unit === unit.AUTO) {\n            height.value = h;\n            height.unit = unit.PX;\n          }\n          item.__layout({\n            x,\n            y,\n            w: main,\n            h,\n          });\n        }\n        else {\n          // column的flex的child如果是inline，变为block\n          if(display === 'inline') {\n            currentStyle.display = computedStyle.display = 'block';\n          }\n          // 竖向flex的child如果是横向flex，宽度自动的话要等同于父flex的宽度\n          else if(display === 'flex' && flexDirection === 'row' && width.unit === unit.AUTO) {\n            width.value = w;\n            width.unit = unit.PX;\n          }\n          item.__layout({\n            x,\n            y,\n            w,\n            h: main,\n          });\n        }\n        // 重设因伸缩而导致的主轴长度\n        if(isOverflow && shrink || !isOverflow && grow) {\n          let {\n            borderTopWidth,\n            borderRightWidth,\n            borderBottomWidth,\n            borderLeftWidth,\n            marginTop,\n            marginRight,\n            marginBottom,\n            marginLeft,\n            paddingTop,\n            paddingRight,\n            paddingBottom,\n            paddingLeft,\n          } = computedStyle;\n          if(isDirectionRow) {\n            item.__width = main - marginLeft - marginRight - paddingLeft - paddingRight - borderLeftWidth - borderRightWidth;\n          }\n          else {\n            item.__height = main - marginTop - marginBottom - paddingTop - paddingBottom - borderTopWidth - borderBottomWidth;\n          }\n        }\n      }\n      else {\n        item.__layout({\n          x,\n          y,\n          w: isDirectionRow ? main : w,\n          h: isDirectionRow ? h : main,\n        });\n      }\n      if(isDirectionRow) {\n        x += item.outerWidth;\n        maxCross = Math.max(maxCross, item.outerHeight);\n      }\n      else {\n        y += item.outerHeight;\n        maxCross = Math.max(maxCross, item.outerWidth);\n      }\n    });\n    // 计算主轴剩余时要用真实剩余空间而不能用伸缩剩余空间\n    let diff = isDirectionRow ? w - x + data.x : h - y + data.y;\n    // 主轴侧轴对齐方式\n    if(!isOverflow && growSum === 0 && diff > 0) {\n      let len = flowChildren.length;\n      if(justifyContent === 'flex-end') {\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(diff, true) : child.__offsetY(diff, true);\n        }\n      }\n      else if(justifyContent === 'center') {\n        let center = diff * 0.5;\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(center, true) : child.__offsetY(center, true);\n        }\n      }\n      else if(justifyContent === 'space-between') {\n        let between = diff / (len - 1);\n        for(let i = 1; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(between * i, true) : child.__offsetY(between * i, true);\n        }\n      }\n      else if(justifyContent === 'space-around') {\n        let around = diff / (len + 1);\n        for(let i = 0; i < len; i++) {\n          let child = flowChildren[i];\n          isDirectionRow ? child.__offsetX(around * (i + 1), true) : child.__offsetY(around * (i + 1), true);\n        }\n      }\n    }\n    // 子元素侧轴伸展\n    if(isDirectionRow) {\n      // 父元素固定高度，子元素可能超过，侧轴最大长度取固定高度\n      if(fixedHeight) {\n        maxCross = h;\n      }\n      y += maxCross;\n    }\n    else {\n      if(fixedWidth) {\n        maxCross = w;\n      }\n    }\n    // 侧轴对齐\n    if(alignItems === 'stretch') {\n      // 短侧轴的children伸张侧轴长度至相同，超过的不动，固定宽高的也不动\n      flowChildren.forEach(item => {\n        let { computedStyle, currentStyle } = item;\n        let {\n          borderTopWidth,\n          borderRightWidth,\n          borderBottomWidth,\n          borderLeftWidth,\n          marginTop,\n          marginRight,\n          marginBottom,\n          marginLeft,\n          paddingTop,\n          paddingRight,\n          paddingBottom,\n          paddingLeft,\n        } = computedStyle;\n        if(isDirectionRow) {\n          if(currentStyle.height.unit === unit.AUTO) {\n            item.__height = computedStyle.height = maxCross - marginTop - marginBottom - paddingTop - paddingBottom - borderTopWidth - borderBottomWidth;\n          }\n        }\n        else {\n          if(currentStyle.width.unit === unit.AUTO) {\n            item.__width = computedStyle.width = maxCross - marginLeft - marginRight - paddingLeft - paddingRight - borderRightWidth - borderLeftWidth;\n          }\n        }\n      });\n    }\n    else if(alignItems === 'center') {\n      flowChildren.forEach(item => {\n        let diff = maxCross - item.outerHeight;\n        if(diff > 0) {\n          item.__offsetY(diff * 0.5, true);\n        }\n      });\n    }\n    else if(alignItems === 'flex-end') {\n      flowChildren.forEach(item => {\n        let diff = maxCross - item.outerHeight;\n        if(diff > 0) {\n          item.__offsetY(diff, true);\n        }\n      });\n    }\n    this.__width = w;\n    this.__height = fixedHeight ? h : y - data.y;\n    this.__marginAuto(currentStyle, data);\n  }\n\n  // inline比较特殊，先简单顶部对其，后续还需根据vertical和lineHeight计算y偏移\n  __layoutInline(data, fake) {\n    let { flowChildren, computedStyle, lineGroups } = this;\n    lineGroups.splice(0);\n    let {\n      textAlign,\n    } = computedStyle;\n    let { fixedWidth, fixedHeight, x, y, w, h } = this.__preLayout(data);\n    let maxX = x;\n    // 递归布局，将inline的节点组成lineGroup一行\n    let lineGroup = new LineGroup(x, y);\n    flowChildren.forEach(item => {\n      if(item instanceof Xom || item instanceof Component) {\n        // 绝对定位跳过\n        if(item.currentStyle.position === 'absolute') {\n          this.absChildren.push(item);\n          return;\n        }\n        let { display } = item.currentStyle;\n        if(fake) {\n          item.currentStyle.display = 'inline';\n        }\n        // inline开头，不用考虑是否放得下直接放\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.outerWidth;\n          maxX = Math.max(maxX, x);\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__layout({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.outerWidth;\n          maxX = Math.max(maxX, x);\n          lineGroup.add(item);\n        }\n        if(fake) {\n          item.currentStyle.display = display;\n        }\n      }\n      // inline里的其它只有文本\n      else {\n        if(x === data.x) {\n          lineGroup.add(item);\n          item.__layout({\n            x,\n            y,\n            w,\n            h,\n          });\n          x += item.width;\n          maxX = Math.max(maxX, x);\n        }\n        else {\n          // 非开头先尝试是否放得下\n          let fw = item.__tryLayInline(w - x, w);\n          // 放得下继续\n          if(fw >= 0) {\n            item.__layout({\n              x,\n              y,\n              w,\n              h,\n            });\n          }\n          // 放不下处理之前的lineGroup，并重新开头\n          else {\n            lineGroups.push(lineGroup);\n            lineGroup.verticalAlign();\n            x = data.x;\n            y += lineGroup.height;\n            item.__layout({\n              x: data.x,\n              y,\n              w,\n              h,\n            });\n            lineGroup = new LineGroup(x, y);\n          }\n          x += item.width;\n          maxX = Math.max(maxX, x);\n          lineGroup.add(item);\n        }\n      }\n    });\n    // 结束后处理可能遗留的最后的lineGroup，children为空时可能size为空\n    if(lineGroup.size) {\n      lineGroups.push(lineGroup);\n      lineGroup.verticalAlign();\n      y += lineGroup.height;\n    }\n    // 元素的width不能超过父元素w\n    this.__width = fixedWidth ? w : maxX - data.x;\n    this.__height = fixedHeight ? h : y - data.y;\n    // text-align\n    if(['center', 'right'].indexOf(textAlign) > -1) {\n      lineGroups.forEach(lineGroup => {\n        let diff = this.__width - lineGroup.width;\n        if(diff > 0) {\n          lineGroup.horizonAlign(textAlign === 'center' ? diff * 0.5 : diff);\n        }\n      });\n    }\n  }\n\n  // 只针对绝对定位children布局\n  __layoutAbs(container, data) {\n    let { x, y, width, height, currentStyle, computedStyle } = container;\n    let { isDestroyed, children, absChildren } = this;\n    let {\n      display,\n    } = currentStyle;\n    let {\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingRight,\n      paddingBottom,\n      paddingLeft,\n    } = computedStyle;\n    if(isDestroyed || display === 'none') {\n      return;\n    }\n    x += marginLeft + borderLeftWidth;\n    y += marginTop + borderTopWidth;\n    let iw = width + paddingLeft + paddingRight;\n    let ih = height + paddingTop + paddingBottom;\n    // 对absolute的元素进行相对容器布局\n    absChildren.forEach(item => {\n      let { currentStyle, computedStyle } = item;\n      let { left, top, right, bottom, width, height, display, flexDirection } = currentStyle;\n      let x2, y2, w2, h2;\n      let onlyRight;\n      let onlyBottom;\n      let fixedTop;\n      let fixedRight;\n      let fixedBottom;\n      let fixedLeft;\n      if(left !== undefined && left.unit !== unit.AUTO) {\n        fixedLeft = true;\n        computedStyle.left = css.calAbsolute(currentStyle, 'left', left, iw);\n      }\n      else {\n        computedStyle.left = 'auto';\n      }\n      if(right !== undefined && right.unit !== unit.AUTO) {\n        fixedRight = true;\n        computedStyle.right = css.calAbsolute(currentStyle, 'right', right, iw);\n      }\n      else {\n        computedStyle.right = 'auto';\n      }\n      if(top !== undefined && top.unit !== unit.AUTO) {\n        fixedTop = true;\n        computedStyle.top = css.calAbsolute(currentStyle, 'top', top, ih);\n      }\n      else {\n        computedStyle.top = 'auto';\n      }\n      if(bottom !== undefined && bottom.unit !== unit.AUTO) {\n        fixedBottom = true;\n        computedStyle.bottom = css.calAbsolute(currentStyle, 'bottom', bottom, ih);\n      }\n      else {\n        computedStyle.bottom = 'auto';\n      }\n      // width优先级高于right高于left，即最高left+right，其次left+width，再次right+width，然后仅申明单个，最次全部auto\n      if(fixedLeft && fixedRight) {\n        x2 = x + computedStyle.left;\n        w2 = x + iw - computedStyle.right - x2;\n      }\n      else if(fixedLeft && width.unit !== unit.AUTO) {\n        x2 = x + computedStyle.left;\n        w2 = width.unit === unit.PX ? width.value : iw * width.value * 0.01;\n      }\n      else if(fixedRight && width.unit !== unit.AUTO) {\n        w2 = width.unit === unit.PX ? width.value : iw * width.value * 0.01;\n        x2 = x + iw - computedStyle.right - w2;\n      }\n      else if(fixedLeft) {\n        x2 = x + computedStyle.left;\n      }\n      else if(fixedRight) {\n        x2 = x + iw - computedStyle.right;\n        onlyRight = true;\n      }\n      else {\n        x2 = x + paddingLeft;\n        if(width.unit !== unit.AUTO) {\n          w2 = width.unit === unit.PX ? width.value : iw * width.value * 0.01;\n        }\n      }\n      // top/bottom/height优先级同上\n      if(fixedTop && fixedBottom) {\n        y2 = y + computedStyle.top;\n        h2 = y + ih - computedStyle.bottom - y2;\n      }\n      else if(fixedTop && height.unit !== unit.AUTO) {\n        y2 = y + computedStyle.top;\n        h2 = height.unit === unit.PX ? height.value : ih * height.value * 0.01;\n      }\n      else if(fixedBottom && height.unit !== unit.AUTO) {\n        h2 = height.unit === unit.PX ? height.value : ih * height.value * 0.01;\n        y2 = y + ih - computedStyle.bottom - h2;\n      }\n      else if(fixedTop) {\n        y2 = y + computedStyle.top;\n      }\n      else if(fixedBottom) {\n        y2 = y + ih - computedStyle.bottom;\n        onlyBottom = true;\n      }\n      // 未声明y的找到之前的流布局child，紧随其下\n      else {\n        y2 = y;\n        let prev = item.prev;\n        while(prev) {\n          if(prev instanceof Text || prev.computedStyle.position !== 'absolute') {\n            y2 = prev.y + prev.outerHeight;\n            break;\n          }\n          prev = prev.prev;\n        }\n        if(!prev) {\n          y2 = y;\n        }\n        if(height.unit !== unit.AUTO) {\n          h2 = height.unit === unit.PX ? height.value : ih * height.value * 0.01;\n        }\n      }\n      if(w2 !== undefined) {\n        currentStyle.width = {\n          value: w2,\n          unit: unit.PX,\n        };\n      }\n      if(h2 !== undefined) {\n        currentStyle.height = {\n          value: h2,\n          unit: unit.PX,\n        };\n      }\n      // 记录初始display，同时absolute不能为inline\n      if (display === 'inline') {\n        display = 'block';\n      }\n      // 没设宽高，在获取最大宽高后，display恢复重新布局一次\n      let fake;\n      if(display === 'block' && w2 === undefined) {\n        fake = true;\n      }\n      else if(display === 'flex') {\n        if(flexDirection === 'row' && w2 === undefined) {\n          fake = true;\n        }\n        else if(flexDirection === 'column' && h2 === undefined) {\n          fake = true;\n        }\n      }\n      // 绝对定位模拟类似inline布局，因为宽高可能未定义，由普通流children布局后决定\n      if(fake) {\n        currentStyle.display = 'inline';\n      }\n      // onlyRight或onlyBottom时做的布局其实是以那个点位为left/top布局，外围尺寸限制要特殊计算\n      if(onlyRight && onlyBottom) {\n        w2 = x2 - x;\n        h2 - y2 - y;\n      }\n      else if(onlyRight) {\n        w2 = x2 - x;\n        h2 = data.h - y2;\n      }\n      else if(onlyBottom) {\n        item.__layout({\n          x: x2,\n          y: y2,\n          w: data.w - x2,\n          h: y2 - y,\n        });\n        w2 = data.w - x2;\n        h2 - y2 - y;\n      }\n      else {\n        w2 = data.w - x2;\n        h2 = data.h - y2;\n      }\n      item.__layout({\n        x: x2,\n        y: y2,\n        w: w2,\n        h: h2,\n      }, fake);\n      // 取孩子宽度最大值，display恢复重新布局\n      if(fake) {\n        let max = 0;\n        item.flowChildren.forEach(item => {\n          max = Math.max(max, item.outerWidth);\n        });\n        currentStyle.width = {\n          value: max,\n          unit: unit.PX,\n        };\n        currentStyle.height = {\n          value: item.height,\n          unit: unit.PX,\n        };\n        item.__layout({\n          x: x2,\n          y: y2,\n          w: w2,\n          h: h2,\n        });\n        currentStyle.display = display;\n      }\n      // right或bottom布局完成后还要偏移回来\n      if(onlyRight && onlyBottom) {\n        item.__offsetX(-item.outerWidth, true);\n        item.__offsetY(-item.outerHeight, true);\n      }\n      else if(onlyRight) {\n        item.__offsetX(-item.outerWidth, true);\n      }\n      else if(onlyBottom) {\n        item.__offsetY(-item.outerHeight, true);\n      }\n    });\n    // 递归进行，遇到absolute/relative的设置新容器\n    children.forEach(item => {\n      if(item instanceof Dom) {\n        item.__layoutAbs(['absolute', 'relative'].indexOf(item.computedStyle.position) > -1 ? item : container, data);\n      }\n      else if(item instanceof Component) {\n        let sr = item.shadowRoot;\n        if(sr instanceof Dom) {\n          sr.__layoutAbs(sr, data);\n        }\n      }\n    });\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { isDestroyed, computedStyle: { display, visibility }, flowChildren, children } = this;\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    // 先渲染过滤mask\n    children.forEach(item => {\n      if(item.isMask) {\n        item.__renderAsMask(renderMode);\n      }\n    });\n    // 先绘制static\n    flowChildren.forEach(item => {\n      if(item.isMask) {}\n      else if(item instanceof Text || item.computedStyle.position === 'static') {\n        item.__renderByMask(renderMode);\n      }\n    });\n    // 再绘制relative和absolute\n    children.forEach(item => {\n      if(item.isMask) {}\n      else if((item instanceof Xom || item instanceof Component) && ['relative', 'absolute'].indexOf(item.computedStyle.position) > -1) {\n        item.__renderByMask(renderMode);\n      }\n    });\n    if(renderMode === mode.SVG) {\n      // 过滤掉mask\n      let children = this.children.slice(0);\n      children = children.filter(item => {\n        return !item.isMask;\n      });\n      // 由于svg严格按照先后顺序渲染，没有z-index概念，需要排序将relative/absolute放后面\n      sort(children, function(a, b) {\n        if(b.computedStyle.position === 'static' && ['relative', 'absolute'].indexOf(a.computedStyle.position) > -1) {\n          return true;\n        }\n      });\n      this.__virtualDom = {\n        ...super.virtualDom,\n        type: 'dom',\n        children: children.map(item => item.virtualDom),\n      };\n    }\n  }\n\n  __destroy() {\n    super.__destroy();\n    this.children.forEach(child => {\n      child.__destroy();\n    });\n    this.children.splice(0);\n    this.flowChildren.splice(0);\n    this.absChildren.splice(0);\n    this.lineGroups.splice(0);\n  }\n\n  get tagName() {\n    return this.__tagName;\n  }\n  get children() {\n    return this.__children;\n  }\n  get flowChildren() {\n    return this.__flowChildren;\n  }\n  get absChildren() {\n    return this.__absChildren;\n  }\n  get lineGroups() {\n    return this.__lineGroups;\n  }\n  get baseLine() {\n    let len = this.lineGroups.length;\n    if(len) {\n      let last = this.lineGroups[len - 1];\n      return last.y - this.y + last.baseLine;\n    }\n    return this.y;\n  }\n\n  static isValid(s) {\n    return TAG_NAME.hasOwnProperty(s);\n  }\n}\n\nexport default Dom;\n","import Dom from './Dom';\nimport mode from '../util/mode';\nimport inject from '../util/inject';\nimport util from '../util/util';\nimport unit from '../style/unit';\nimport transform from '../style/transform';\nimport level from '../animate/level';\n\nconst CACHE = {};\nconst INIT = 0;\nconst LOADING = 1;\nconst LOADED = 2;\n\nclass Img extends Dom {\n  constructor(tagName, props) {\n    super(tagName, props, []);\n    // 空url用错误图代替\n    if(!this.src || !this.src.trim()) {\n      this.__error = true;\n      let { style: { width, height } } = this;\n      width = width || { unit: unit.AUTO };\n      height = height || { unit: unit.AUTO };\n      if(width.unit === unit.AUTO) {\n        width.value = 32;\n        width.unit = unit.PX;\n      }\n      if(height.unit === unit.AUTO) {\n        height.value = 32;\n        height.unit = unit.PX;\n      }\n    }\n  }\n\n  __layout(data) {\n    super.__layout(data);\n    let { isDestroyed, src, currentStyle } = this;\n    let { display, width, height } = currentStyle;\n    if(isDestroyed || display === 'none') {\n      return;\n    }\n    let { width: w, height: h } = this;\n    let cache = CACHE[this.src] = CACHE[this.src] || {\n      state: INIT,\n      task: [],\n    };\n    let cb = cache => {\n      if(cache.success) {\n        this.__source = cache.source;\n      }\n      else {\n        this.__error = true;\n      }\n      this.__imgWidth = cache.width;\n      this.__imgHeight = cache.height;\n      let lv = level.REFLOW;\n      // 宽高都为auto，使用加载测量的数据\n      if(width.unit === unit.AUTO && height.unit === unit.AUTO) {\n        currentStyle.width = {\n          value: cache.width,\n          unit: unit.PX,\n        };\n        currentStyle.height = {\n          value: cache.height,\n          unit: unit.PX,\n        };\n      }\n      // 否则有一方定义则按比例调整另一方适应\n      else if(width.unit === unit.AUTO) {\n        currentStyle.width = {\n          value: h * cache.width / cache.height,\n          unit: unit.PX,\n        };\n      }\n      else if(height.unit === unit.AUTO) {\n        currentStyle.height = {\n          value: w * cache.height / cache.width,\n          unit: unit.PX,\n        };\n      }\n      else {\n        lv = level.REPAINT;\n      }\n      let root = this.root;\n      if(root) {\n        root.setRefreshLevel(lv);\n        root.addRefreshTask();\n      }\n    };\n    if(cache.state === LOADED) {\n      cb(cache);\n    }\n    else if(cache.state === LOADING) {\n      cache.task.push(cb);\n    }\n    else if(cache.state === INIT) {\n      cache.state = LOADING;\n      cache.task.push(cb);\n      inject.measureImg(src, res => {\n        cache.success = res.success;\n        if(res.success) {\n          cache.width = res.width;\n          cache.height = res.height;\n          cache.source = res.source;\n        }\n        else {\n          cache.width = 32;\n          cache.height = 32;\n        }\n        cache.state = LOADED;\n        cache.task.forEach(cb => cb(cache));\n        cache.task.splice(0);\n      });\n    }\n  }\n\n  __addGeom(tagName, props) {\n    props = util.hash2arr(props);\n    this.virtualDom.children.push({\n      type: 'item',\n      tagName,\n      props,\n    });\n  }\n\n  render(renderMode) {\n    super.render(renderMode);\n    let { ctx, sx: x, sy: y, width, height, src, isDestroyed, computedStyle: {\n      display,\n      borderTopWidth,\n      borderLeftWidth,\n      marginTop,\n      marginLeft,\n      paddingTop,\n      paddingLeft,\n    } } = this;\n    if(isDestroyed || display === 'none') {\n      return;\n    }\n    let originX = x + marginLeft + borderLeftWidth + paddingLeft;\n    let originY = y + marginTop + borderTopWidth + paddingTop;\n    if(this.__error) {\n      let strokeWidth = Math.min(width, height) * 0.02;\n      let stroke = '#CCC';\n      let fill = '#DDD';\n      let cx = originX + width * 0.7;\n      let cy = originY + height * 0.3;\n      let r = strokeWidth * 5;\n      let pts = [\n        [originX + width * 0.15, originY + height * 0.7],\n        [originX + width * 0.3, originY + height * 0.4],\n        [originX + width * 0.5, originY + height * 0.6],\n        [originX + width * 0.6, originY + height * 0.5],\n        [originX + width * 0.9, originY + height * 0.8],\n        [originX + width * 0.15, originY + height * 0.8]\n      ];\n      if(renderMode === mode.CANVAS) {\n        ctx.strokeStyle = stroke;\n        ctx.lineWidth = strokeWidth;\n        ctx.fillStyle = fill;\n        ctx.beginPath();\n        ctx.moveTo(originX, originY);\n        ctx.lineTo(originX + width, originY);\n        ctx.lineTo(originX + width, originY + height);\n        ctx.lineTo(originX, originY + height);\n        ctx.lineTo(originX, originY);\n        ctx.stroke();\n        ctx.closePath();\n        ctx.beginPath();\n        ctx.arc(cx, cy, r, 0, 2 * Math.PI);\n        ctx.fill();\n        ctx.closePath();\n        ctx.beginPath();\n        ctx.moveTo(pts[0][0], pts[0][1]);\n        for(let i = 1, len = pts.length; i < len; i++) {\n          let point = pts[i];\n          ctx.lineTo(point[0], point[1]);\n        }\n        ctx.lineTo(pts[0][0], pts[0][1]);\n        ctx.fill();\n        ctx.closePath();\n      }\n      else if(renderMode === mode.SVG) {\n        this.__addGeom('rect', [\n          ['x', originX],\n          ['y', originY],\n          ['width', width],\n          ['height', height],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth],\n          ['fill', 'transparent']\n        ]);\n        this.__addGeom('circle', [\n          ['cx', cx],\n          ['cy', cy],\n          ['r', r],\n          ['fill', fill],\n        ]);\n        let s = '';\n        for(let i = 0, len = pts.length; i < len; i++) {\n          let point = pts[i];\n          s += `${point[0]},${point[1]} `;\n        }\n        this.__addGeom('polygon', [\n          ['points', s],\n          ['fill', fill]\n        ]);\n      }\n    }\n    else {\n      let matrix;\n      if(this.__imgWidth !== undefined\n        && (width !== this.__imgWidth || height !== this.__imgHeight)) {\n        let list = [\n          ['scaleX', {\n            value: width / this.__imgWidth,\n            unit: unit.NUMBER,\n          }],\n          ['scaleY', {\n            value: height / this.__imgHeight,\n            unit: unit.NUMBER,\n          }]\n        ];\n        let ow = this.outerWidth;\n        let oh = this.outerHeight;\n        let tfo = transform.calOrigin([\n          {\n            value: 0,\n            unit: unit.PERCENT,\n          },\n          {\n            value: 0,\n            unit: unit.PERCENT,\n          }\n        ], x, y, ow, oh);\n        matrix = transform.calMatrix(list, tfo, x, y, ow, oh);\n        // 缩放图片的同时要考虑原先的矩阵，以及影响事件\n        if(this.matrix) {\n          this.__matrix = matrix = transform.mergeMatrix(this.__matrix, matrix);\n          this.__matrixEvent = transform.mergeMatrix(this.__matrixEvent, matrix);\n        }\n        else {\n          this.__matrixEvent = matrix;\n        }\n        matrix = 'matrix(' + matrix.join(',') + ')';\n      }\n      if(renderMode === mode.CANVAS) {\n        if(this.__source) {\n          ctx.drawImage(this.__source, originX, originY, width, height);\n        }\n      }\n      else if(renderMode === mode.SVG) {\n        let props = [\n          ['xlink:href', src],\n          ['x', originX],\n          ['y', originY],\n          ['width', matrix ? this.__imgWidth : this.width],\n          ['height', matrix ? this.__imgHeight : this.height]\n        ];\n        if(matrix) {\n          props.push(['transform', matrix]);\n        }\n        this.virtualDom.children.push({\n          type: 'img',\n          tagName: 'image',\n          props,\n        });\n      }\n    }\n  }\n\n  get src() {\n    return this.props.src;\n  }\n  get baseLine() {\n    return this.height;\n  }\n}\n\nexport default Img;\n","import util from './util';\n\nfunction diff(elem, ovd, nvd) {\n  let cns = elem.childNodes;\n  diffDefs(cns[0], ovd.defs, nvd.defs);\n  diffBb(cns[1], ovd.bb, nvd.bb);\n  diffD2D(elem, ovd, nvd, true);\n}\n\nfunction diffDefs(elem, od, nd) {\n  let ol = od.length;\n  let nl = nd.length;\n  let i = 0;\n  let cns = elem.childNodes;\n  for(; i < Math.min(ol, nl); i++) {\n    diffDef(cns[i], od[i], nd[i]);\n  }\n  if(i < ol) {\n    removeAt(elem, cns, i);\n  }\n  else if(i < nl) {\n    insertAt(elem, cns, i, util.joinDef(nd[i]));\n  }\n}\n\nfunction diffDef(elem, od, nd) {\n  if(od.tagName !== nd.tagName) {\n    elem.insertAdjacentHTML('afterend', util.joinDef(nd));\n    elem.parentNode.removeChild(elem);\n  }\n  else {\n    if(od.uuid !== nd.uuid) {\n      elem.setAttribute('id', nd.uuid);\n    }\n    let op = {};\n    for(let j = 0, len = od.props.length; j < len; j++) {\n      let prop = od.props[j];\n      let [k, v] = prop;\n      op[k] = v;\n    }\n    for(let j = 0, len = nd.props.length; j < len; j++) {\n      let prop = nd.props[j];\n      let [k, v] = prop;\n      // 已有不等更新，没有添加\n      if(op.hasOwnProperty(k)) {\n        if(op[k] !== v) {\n          elem.setAttribute(k, v);\n        }\n        delete op[k];\n      }\n      else {\n        elem.setAttribute(k, v);\n      }\n    }\n    // 多余的删除\n    for(let k in op) {\n      if(op.hasOwnProperty(k)) {\n        elem.removeAttribute(k);\n      }\n    }\n    let cns = elem.childNodes;\n    let ol = od.children.length;\n    let nl = nd.children.length;\n    let i = 0;\n    for(; i < Math.min(ol, nl); i++) {\n      diffItem(elem, i, od.children[i], nd.children[i]);\n    }\n    if(i < ol) {\n      for(; i < ol; i++) {\n        removeAt(elem, cns, i);\n      }\n    }\n    else if(i < nl) {\n      for(; i < nl; i++) {\n        insertAt(elem, cns, i, util.joinStop(nd.stop[i]));\n      }\n    }\n  }\n}\n\nfunction diffChild(elem, ovd, nvd) {\n  if(ovd.type === 'dom') {\n    if(nvd.type === 'dom') {\n      diffD2D(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'text' || nvd.type === 'img') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      diffD2G(elem, ovd, nvd);\n    }\n  }\n  else if(ovd.type === 'text') {\n    if(nvd.type === 'dom' || nvd.type === 'geom' || nvd.type === 'img') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'text') {\n      diffT2T(elem, ovd, nvd);\n    }\n  }\n  else if(ovd.type === 'geom') {\n    if(nvd.type === 'dom') {\n      diffG2D(elem, ovd, nvd);\n    }\n    else if(nvd.type === 'text' || nvd.type === 'img') {\n      replaceWith(elem, nvd);\n    }\n    else if(nvd.type === 'geom') {\n      diffG2G(elem, ovd, nvd);\n    }\n  }\n  else if(ovd.type === 'img') {\n    if(nvd.type === 'img') {\n      diffItemSelf(elem, ovd, nvd);\n    }\n    else {\n      replaceWith(elem, nvd);\n    }\n  }\n}\n\nfunction diffD2D(elem, ovd, nvd, root) {\n  if(!equalArr(ovd.transform, nvd.transform)) {\n    let transform = util.joinTransform(nvd.transform);\n    elem.setAttribute('transform', transform);\n  }\n  if(ovd.opacity !== nvd.opacity) {\n    elem.setAttribute('opacity', ovd.opacity);\n  }\n  if(ovd.mask !== nvd.mask) {\n    if(nvd.mask) {\n      elem.setAttribute('mask', ovd.mask);\n    }\n    else {\n      elem.removeAttribute('mask');\n    }\n  }\n  if(!root) {\n    diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  }\n  let ol = ovd.children.length;\n  let nl = nvd.children.length;\n  let i = 0;\n  let lastChild = elem.lastChild;\n  let cns = lastChild.childNodes;\n  for(; i < Math.min(ol, nl); i++) {\n    diffChild(cns[i], ovd.children[i], nvd.children[i]);\n  }\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(lastChild, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(lastChild, cns, i, util.joinVd(nvd.children[i]));\n    }\n  }\n}\n\nfunction diffD2G(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  replaceWith(elem.lastChild, nvd.children);\n}\n\nfunction diffT2T(elem, ovd, nvd) {\n  let ol = ovd.children.length;\n  let nl = nvd.children.length;\n  let i = 0;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(elem, i, ovd.children[i], nvd.children[i], true);\n  }\n  let cns = elem.childNodes;\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(elem, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(elem, cns, i, util.joinVd(nvd.children[i]));\n    }\n  }\n}\n\nfunction diffG2D(elem, ovd, nvd) {\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  replaceWith(elem.lastChild, nvd.children);\n}\n\nfunction diffG2G(elem, ovd, nvd) {\n  if(!equalArr(ovd.transform, nvd.transform)) {\n    let transform = util.joinTransform(nvd.transform);\n    if(elem.getAttribute('transform') !== transform) {\n      elem.setAttribute('transform', transform);\n    }\n  }\n  diffBb(elem.firstChild, ovd.bb, nvd.bb);\n  let ol = ovd.children.length;\n  let nl = nvd.children.length;\n  let i = 0;\n  let lastChild = elem.lastChild;\n  let cns = lastChild.childNodes;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(lastChild, i, ovd.children[i], nvd.children[i]);\n  }\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(lastChild, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(lastChild, cns, i, util.joinVd(nvd.children[i]));\n    }\n  }\n}\n\nfunction diffBb(elem, obb, nbb) {\n  let ol = obb.length;\n  let nl = nbb.length;\n  let i = 0;\n  for(; i < Math.min(ol, nl); i++) {\n    diffItem(elem, i, obb[i], nbb[i]);\n  }\n  let cns = elem.childNodes;\n  if(i < ol) {\n    for(; i < ol; i++) {\n      removeAt(elem, cns, i);\n    }\n  }\n  else if(i < nl) {\n    for(; i < nl; i++) {\n      insertAt(elem, cns, i, util.joinVd(nbb[i]));\n    }\n  }\n}\n\nfunction diffItem(elem, i, ovd, nvd, isText) {\n  let cns = elem.childNodes;\n  if(ovd.tagName !== nvd.tagName) {\n    replaceWith(cns[i], nvd);\n  }\n  else {\n    diffItemSelf(cns[i], ovd, nvd);\n    if(isText && ovd.content !== nvd.content) {\n      cns[i].textContent = nvd.content;\n    }\n  }\n}\n\nfunction diffItemSelf(elem, ovd, nvd) {\n  let op = {};\n  for(let j = 0, len = ovd.props.length; j < len; j++) {\n    let prop = ovd.props[j];\n    let [k, v] = prop;\n    op[k] = v;\n  }\n  for(let j = 0, len = nvd.props.length; j < len; j++) {\n    let prop = nvd.props[j];\n    let [k, v] = prop;\n    // 已有不等更新，没有添加\n    if(op.hasOwnProperty(k)) {\n      if(op[k] !== v) {\n        elem.setAttribute(k, v);\n      }\n      delete op[k];\n    }\n    else {\n      elem.setAttribute(k, v);\n    }\n  }\n  // 多余的删除\n  for(let k in op) {\n    if(op.hasOwnProperty(k)) {\n      elem.removeAttribute(k);\n    }\n  }\n}\n\nfunction replaceWith(elem, vd) {\n  let res;\n  if(Array.isArray(vd)) {\n    res = '';\n    vd.forEach(item => {\n      res += util.joinVd(item);\n    });\n  }\n  else {\n    res = util.joinVd(vd);\n  }\n  elem.insertAdjacentHTML('afterend', res);\n  elem.parentNode.removeChild(elem);\n}\n\nfunction insertAt(elem, cns, index, html) {\n  if(index >= cns.length) {\n    elem.insertAdjacentHTML('beforeend', html);\n  }\n  else {\n    cns[index].insertAdjacentHTML('beforebegin', html);\n  }\n}\n\nfunction removeAt(elem, cns, index) {\n  if(cns[index]) {\n    elem.removeChild(cns[index]);\n  }\n}\n\nfunction equalArr(a, b) {\n  if(a.length !== b.length) {\n    return false;\n  }\n  for(let i = 0, len = a.length; i < len; i++) {\n    if(a[i] !== b[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default diff;\n","class Defs {\n  constructor(uuid) {\n    this.id = uuid;\n    this.count = 0;\n    this.list = [];\n  }\n  add(data) {\n    data.uuid = `karas-defs-${this.id}-${this.count++}`;\n    this.list.push(data);\n    return data.uuid;\n  }\n  clear() {\n    this.list = [];\n    this.count = 0;\n  }\n\n  get value() {\n    return this.list;\n  }\n\n  static getInstance(uuid) {\n    return new Defs(uuid);\n  }\n}\n\nexport default Defs;\n","import Dom from '../node/Dom';\nimport util from '../util/util';\nimport mode from '../util/mode';\nimport diff from '../util/diff';\nimport Defs from './Defs';\nimport unit from '../style/unit';\nimport inject from '../util/inject';\nimport Event from '../util/Event';\nimport frame from '../animate/frame';\nimport level from '../animate/level';\n\nfunction getDom(dom) {\n  if(util.isString(dom) && dom) {\n    let o = document.querySelector(dom);\n    if(!o) {\n      throw new Error('can not find dom of selector: ' + dom);\n    }\n    return o;\n  }\n  if(!dom) {\n    throw new Error('can not find dom: ' + dom);\n  }\n  return dom;\n}\n\nfunction renderProp(k, v) {\n  let s = Array.isArray(v) ? util.joinSourceArray(v) : util.stringify(v);\n  if(k === 'className') {\n    k = 'class';\n  }\n  return ' ' + k + '=\"' + util.encodeHtml(s, true) + '\"';\n}\n\nfunction initEvent(node) {\n  ['click', 'dblclick', 'mousedown', 'mousemove', 'mouseup', 'touchstart', 'touchmove', 'touchend', 'touchcancel'].forEach(type => {\n    node.addEventListener(type, e => {\n      node.__root.__cb(e, ['touchend', 'touchcancel', 'touchmove'].indexOf(type) > -1);\n    });\n  });\n}\n\nlet uuid = 0;\n\nclass Root extends Dom {\n  constructor(tagName, props, children) {\n    super(tagName, props, children);\n    this.__node = null; // 真实DOM引用\n    this.__mw = 0; // 记录最大宽高，防止尺寸变化清除不完全\n    this.__mh = 0;\n    this.__task = [];\n    this.__ref = {};\n    Event.mix(this);\n  }\n\n  __initProps() {\n    let w = this.props.width;\n    if(!util.isNil(w)) {\n      let value = parseInt(w) || 0;\n      if(value > 0) {\n        this.__width = value;\n      }\n    }\n    let h = this.props.height;\n    if(!util.isNil(h)) {\n      let value = parseInt(h) || 0;\n      if(value > 0) {\n        this.__height = value;\n      }\n    }\n  }\n\n  __genHtml() {\n    let res = `<${this.tagName}`;\n    // 拼接处理属性\n    for(let i = 0, len = this.__props.length; i < len; i++) {\n      let item = this.__props[i];\n      res += renderProp(item[0], item[1]);\n    }\n    res += `></${this.tagName}>`;\n    return res;\n  }\n\n  // 类似touchend/touchcancel/touchmove这种无需判断是否发生于元素上，直接强制响应\n  __cb(e, force) {\n    if(e.type === 'touchmove' && !this.__touchstartTarget) {\n      return;\n    }\n    if(e.touches && e.touches.length > 1) {\n      return;\n    }\n    let { node } = this;\n    let { x, y, top, right } = node.getBoundingClientRect();\n    x = x || top || 0;\n    y = y || right || 0;\n    let { clientX, clientY } = e.touches ? (e.touches[0] || {}) : e;\n    x = clientX - x;\n    y = clientY - y;\n    this.__emitEvent({\n      event: e,\n      stopPropagation() {\n        this.__stopPropagation = true;\n        e.stopPropagation();\n      },\n      stopImmediatePropagation() {\n        this.__stopPropagation = true;\n        this.__stopImmediatePropagation = true;\n        e.stopImmediatePropagation();\n      },\n      preventDefault() {\n        e.preventDefault();\n      },\n      x,\n      y,\n      __hasEmitted: false,\n    }, force);\n  }\n\n  appendTo(dom) {\n    dom = getDom(dom);\n    this.__initProps();\n    this.__refreshLevel = level.REFLOW;\n    // 已有root节点\n    if(dom.nodeName.toUpperCase() === this.tagName.toUpperCase()) {\n      this.__node = dom;\n      if(this.width) {\n        dom.setAttribute('width', this.width);\n      }\n      if(this.height) {\n        dom.setAttribute('height', this.height);\n      }\n    }\n    // 没有canvas/svg节点则生成一个新的\n    else {\n      this.__node = dom.querySelector(this.tagName);\n      if(!this.__node) {\n        dom.innerHTML = this.__genHtml();\n        this.__node = dom.querySelector(this.tagName);\n      }\n    }\n    this.__uuid = util.isNil(this.__node.__uuid) ? uuid++ : this.__node.__uuid;\n    this.__defs = this.node.__defs || Defs.getInstance(this.__uuid);\n    // 没有设置width/height则采用css计算形式\n    if(!this.width || !this.height) {\n      let css = window.getComputedStyle(dom, null);\n      if(!this.width) {\n        this.__width = parseInt(css.getPropertyValue('width'));\n        dom.setAttribute('width', this.width);\n      }\n      if(!this.height) {\n        this.__height = parseInt(css.getPropertyValue('height'));\n        dom.setAttribute('height', this.height);\n      }\n    }\n    // 只有canvas有ctx，svg用真实dom\n    if(this.tagName === 'canvas') {\n      this.__ctx = this.__node.getContext('2d');\n      this.__renderMode = mode.CANVAS;\n    }\n    else if(this.tagName === 'svg') {\n      this.__renderMode = mode.SVG;\n    }\n    // canvas/svg作为根节点一定是block或flex，不会是inline\n    let { style } = this;\n    if(['flex', 'block'].indexOf(style.display) === -1) {\n      style.display = 'block';\n    }\n    // 同理position不能为absolute\n    if(style.position === 'absolute') {\n      style.position = 'static';\n    }\n    let { renderMode, ctx } = this;\n    this.__traverse(ctx, this.__defs, renderMode);\n    this.__traverseCss(this, this.props.css);\n    this.__init();\n    this.refresh();\n    if(this.node.__root) {\n      this.node.__root.__destroy();\n      delete this.node.__root.__node;\n      delete this.node.__root.__vd;\n    }\n    else {\n      initEvent(this.node);\n      this.node.__uuid = this.__uuid;\n    }\n    this.node.__root = this;\n  }\n\n  refresh(cb) {\n    let { renderMode, currentStyle } = this;\n    // 根元素特殊处理\n    currentStyle.marginTop = currentStyle.marginRight = currentStyle.marginBottom = currentStyle.marginLeft = {\n      value: 0,\n      unit: unit.PX,\n    };\n    currentStyle.width = {\n      value: this.width,\n      unit: unit.PX,\n    };\n    currentStyle.height = {\n      value: this.height,\n      unit: unit.PX,\n    };\n    delete currentStyle.transform;\n    currentStyle.opacity = 1;\n    this.__defs.clear();\n    let lv = this.__refreshLevel;\n    this.__refreshLevel = level.REPAINT;\n    // 预先计算字体相关的继承\n    if(lv === level.REFLOW) {\n      this.__computed();\n    }\n    inject.measureText(() => {\n      // 没发生REFLOW只需要computed即可\n      if(lv === level.REFLOW) {\n        // 布局分为两步，普通流和绝对流，互相递归\n        this.__layout({\n          x: 0,\n          y: 0,\n          w: this.width,\n          h: this.height,\n        });\n        this.__layoutAbs(this, {\n          x: 0,\n          y: 0,\n          w: this.width,\n          h: this.height,\n        });\n      }\n      else {\n        this.__repaint();\n      }\n      if(renderMode === mode.CANVAS) {\n        this.__clear();\n      }\n      this.emit(Event.KARAS_BEFORE_REFRESH, lv);\n      this.render(renderMode);\n      if(renderMode === mode.SVG) {\n        let nvd = this.virtualDom;\n        let nd = this.__defs;\n        nvd.defs = nd.value;\n        nvd = util.clone(nvd);\n        if(this.node.__root) {\n          diff(this.node, this.node.__vd, nvd);\n        }\n        else {\n          this.node.innerHTML = util.joinVirtualDom(nvd);\n        }\n        this.node.__vd = nvd;\n        this.node.__defs = nd;\n      }\n      let clone = this.__task.splice(0);\n      clone.forEach(cb => {\n        if(util.isFunction(cb)) {\n          cb();\n        }\n      });\n      if(util.isFunction(cb)) {\n        cb();\n      }\n      this.emit(Event.KARAS_REFRESH);\n    });\n  }\n\n  addRefreshTask(cb) {\n    let { task } = this;\n    // 第一个添加延迟侦听\n    if(!task.length) {\n      frame.nextFrame(() => {\n        if(task.length) {\n          this.refresh();\n        }\n      });\n    }\n    task.push(cb);\n  }\n\n  delRefreshTask(cb) {\n    if(!cb) {\n      return;\n    }\n    let { task } = this;\n    for(let i = 0, len = task.length; i < len; i++) {\n      if(task[i] === cb) {\n        task.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  setRefreshLevel(lv) {\n    if(lv > this.__refreshLevel) {\n      this.__refreshLevel = lv;\n    }\n  }\n\n  __getImageData() {\n    return this.ctx.getImageData(0, 0, this.width, this.height);\n  }\n\n  __putImageData(data) {\n    this.ctx.putImageData(data, 0, 0);\n  }\n\n  __clear() {\n    // 可能会调整宽高，所以每次清除用最大值\n    this.__mw = Math.max(this.__mw, this.width);\n    this.__mh = Math.max(this.__mh, this.height);\n    // 清除前得恢复默认matrix，防止每次布局改变了属性\n    this.__ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.__ctx.clearRect(0, 0, this.__mw, this.__mh);\n  }\n\n  get node() {\n    return this.__node;\n  }\n  get renderMode() {\n    return this.__renderMode;\n  }\n  get task() {\n    return this.__task;\n  }\n  get ref() {\n    return this.__ref;\n  }\n}\n\nexport default Root;\n","import Geom from './Geom';\nimport mode from '../util/mode';\n\nclass Line extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // x1,y1和x2,y2表明线段的首尾坐标，control表明控制点坐标\n    this.__x1 = this.__y1 = 0;\n    this.__x2 = this.__y2 = 1;\n    this.__controlA = [];\n    this.__controlB = [];\n    if(this.props.x1 !== undefined) {\n      this.__x1 = parseFloat(this.props.x1) || 0;\n    }\n    if(this.props.y1 !== undefined) {\n      this.__y1 = parseFloat(this.props.y1) || 0;\n    }\n    if(this.props.x2 !== undefined) {\n      this.__x2 = parseFloat(this.props.x2) || 0;\n    }\n    if(this.props.y2 !== undefined) {\n      this.__y2 = parseFloat(this.props.y2) || 0;\n    }\n    if(Array.isArray(this.props.controlA)) {\n      this.__controlA = this.props.controlA;\n    }\n    if(Array.isArray(this.props.controlB)) {\n      this.__controlB = this.props.controlB;\n    }\n  }\n\n  render(renderMode) {\n    let {\n      isDestroyed,\n      display,\n      visibility,\n      originX,\n      originY,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n    } = super.render(renderMode);\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    let { width, height, ctx, x1, y1, x2, y2, controlA, controlB } = this;\n    x1 = originX + x1 * width;\n    y1 = originY + y1 * height;\n    x2 = originX + x2 * width;\n    y2 = originY + y2 * height;\n    let curve = 0;\n    // 控制点，曲线\n    let cx1, cy1, cx2, cy2;\n    if(controlA.length === 2) {\n      curve++;\n      cx1 = originX + controlA[0] * width;\n      cy1 = originY + controlA[1] * height;\n    }\n    if(controlB.length === 2) {\n      curve += 2;\n      cx2 = originX + controlB[0] * width;\n      cy2 = originY + controlB[1] * height;\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.lineCap = strokeLinecap;\n      ctx.setLineDash(strokeDasharray.split(','));\n      ctx.beginPath();\n      ctx.moveTo(x1, y1);\n      if(curve === 3) {\n        ctx.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2);\n      }\n      else if(curve === 2) {\n        ctx.quadraticCurveTo(cx2, cy2, x2, y2);\n      }\n      else if(curve === 1) {\n        ctx.quadraticCurveTo(cx1, cy1, x2, y2);\n      }\n      else {\n        ctx.lineTo(x2, y2);\n      }\n      if(strokeWidth > 0) {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let d;\n      if(curve === 3) {\n        d = `M${x1},${y1} C${cx1},${cy1} ${cx2},${cy2} ${x2},${y2}`;\n      }\n      else if(curve === 2) {\n        d = `M${x1},${y1} Q${cx2},${cy2} ${x2},${y2}`;\n      }\n      else if(curve === 1) {\n        d = `M${x1},${y1} Q${cx1},${cy1} ${x2},${y2}`;\n      }\n      else {\n        d = `M${x1},${y1} L${x2},${y2}`;\n      }\n      let props = [\n        ['d', d],\n        ['fill', 'none'],\n        ['stroke', stroke],\n        ['stroke-width', strokeWidth]\n      ];\n      if(strokeDasharray.length) {\n        props.push(['stroke-dasharray', strokeDasharray]);\n      }\n      if(strokeLinecap !== 'butt') {\n        props.push(['stroke-linecap', strokeLinecap]);\n      }\n      this.addGeom('path', props);\n    }\n  }\n\n  get x1() {\n    return this.__x1;\n  }\n  get y1() {\n    return this.__y1;\n  }\n  get x2() {\n    return this.__x2;\n  }\n  get y2() {\n    return this.__y2;\n  }\n  get controlA() {\n    return this.__controlA;\n  }\n  get controlB() {\n    return this.__controlB;\n  }\n}\n\nexport default Line;\n","import Geom from './Geom';\nimport mode from '../util/mode';\n\nclass Polyline extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 折线所有点的列表\n    this.__points = [];\n    if(Array.isArray(this.props.points)) {\n      this.__points = this.props.points;\n    }\n    // 原点位置，4个角，默认左下\n    if(['TOP_RIGHT', 'BOTTOM_LEFT', 'BOTTOM_RIGHT'].indexOf(this.props.origin) > -1) {\n      this.__origin = this.props.origin;\n    }\n    else {\n      this.__origin = 'TOP_LEFT';\n    }\n    // 控制点\n    this.__controls = [];\n    if(Array.isArray(this.props.controls)) {\n      this.__controls = this.props.controls;\n    }\n  }\n\n  render(renderMode) {\n    let {\n      isDestroyed,\n      originX,\n      originY,\n      display,\n      visibility,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n    } = super.render(renderMode);\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    let { width, height, ctx, points, controls, origin } = this;\n    if(points.length < 2) {\n      return;\n    }\n    for(let i = 0, len = points.length; i < len; i++) {\n      if(!Array.isArray(points[i]) || points[i].length < 2) {\n        return;\n      }\n    }\n    let pts = [];\n    let cls = [];\n    let hasControll;\n    if(origin === 'TOP_LEFT') {\n      points.forEach(item => {\n        pts.push([\n          originX + item[0] * width,\n          originY + item[1] * height\n        ]);\n      });\n      controls.forEach(item => {\n        if(Array.isArray(item) && (item.length === 2 || item.length === 4)) {\n          let arr = [];\n          item.forEach((item2, i) => {\n            if(i === 0 || i === 2) {\n              arr.push(originX + item[i] * width);\n            }\n            else {\n              arr.push(originY + item[i] * height);\n            }\n          });\n          cls.push(arr);\n          hasControll = true;\n        }\n        else {\n          cls.push(null);\n        }\n      });\n    }\n    else if(origin === 'TOP_RIGHT') {\n      points.forEach(item => {\n        pts.push([\n          originX + width - item[0] * width,\n          originY + item[1] * height\n        ]);\n      });\n      controls.forEach(item => {\n        if(Array.isArray(item) && (item.length === 2 || item.length === 4)) {\n          let arr = [];\n          item.forEach((item2, i) => {\n            if(i === 0 || i === 2) {\n              arr.push(originX + width - item[i] * width);\n            }\n            else {\n              arr.push(originY + item[i] * height);\n            }\n          });\n          cls.push(arr);\n          hasControll = true;\n        }\n        else {\n          cls.push(null);\n        }\n      });\n    }\n    else if(origin === 'BOTTOM_LEFT') {\n      points.forEach(item => {\n        pts.push([\n          originX + item[0] * width,\n          originY + height - item[1] * height\n        ]);\n      });\n      controls.forEach(item => {\n        if(Array.isArray(item) && (item.length === 2 || item.length === 4)) {\n          let arr = [];\n          item.forEach((item2, i) => {\n            if(i === 0 || i === 2) {\n              arr.push(originX + item[i] * width);\n            }\n            else {\n              arr.push(originY + height - item[i] * height);\n            }\n          });\n          cls.push(arr);\n          hasControll = true;\n        }\n        else {\n          cls.push(null);\n        }\n      });\n    }\n    else if(origin === 'BOTTOM_RIGHT') {\n      points.forEach(item => {\n        pts.push([\n          originX + width - item[0] * width,\n          originY + height - item[1] * height\n        ]);\n      });\n      controls.forEach(item => {\n        if(Array.isArray(item) && (item.length === 2 || item.length === 4)) {\n          let arr = [];\n          item.forEach((item2, i) => {\n            if(i === 0 || i === 2) {\n              arr.push(originX + width - item[i] * width);\n            }\n            else {\n              arr.push(originY + height - item[i] * height);\n            }\n          });\n          cls.push(arr);\n          hasControll = true;\n        }\n        else {\n          cls.push(null);\n        }\n      });\n    }\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.lineCap = strokeLinecap;\n      ctx.setLineDash(strokeDasharray.split(','));\n      ctx.beginPath();\n      ctx.moveTo(pts[0][0], pts[0][1]);\n      for(let i = 1, len = pts.length; i < len; i++) {\n        let point = pts[i];\n        let cl = cls[i - 1];\n        if(!cl) {\n          ctx.lineTo(point[0], point[1]);\n        }\n        else if(cl.length === 4) {\n          ctx.bezierCurveTo(cl[0], cl[1], cl[2], cl[3], point[0], point[1]);\n        }\n        else {\n          ctx.quadraticCurveTo(cl[0], cl[1], point[0], point[1]);\n        }\n      }\n      if(strokeWidth > 0) {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let props = [\n        ['fill', 'none'],\n        ['stroke', stroke]\n      ];\n      let tagName;\n      if(hasControll) {\n        let s = `M${pts[0][0]},${pts[0][1]}`;\n        for(let i = 1, len = pts.length; i < len; i++) {\n          let point = pts[i];\n          let cl = cls[i - 1];\n          if(!cl) {\n            s += `L${point[0]},${point[1]}`;\n          }\n          else if(cl.length === 4) {\n            s += `C${cl[0]},${cl[1]} ${cl[2]},${cl[3]} ${point[0]},${point[1]}`;\n          }\n          else {\n            s += `Q${cl[0]},${cl[1]} ${point[0]},${point[1]}`;\n          }\n        }\n        let cl = cls[pts.length - 1];\n        if(!cl) {\n          s += `L${pts[0][0]},${pts[0][1]}`;\n        }\n        else if(cl.length === 4) {\n          s += `C${cl[0]},${cl[1]} ${cl[2]},${cl[3]} ${pts[0][0]},${pts[0][1]}`;\n        }\n        else {\n          s += `Q${cl[0]},${cl[1]} ${pts[0][0]},${pts[0][1]}`;\n        }\n        props.push(['d', s]);\n        tagName = 'path';\n      }\n      else {\n        let s = '';\n        for(let i = 0, len = pts.length; i < len; i++) {\n          let point = pts[i];\n          if(i) {\n            s += ' ';\n          }\n          s += `${point[0]},${point[1]}`;\n        }\n        props.push(['points', s]);\n        tagName = 'polyline';\n      }\n      if(strokeDasharray.length) {\n        props.push(['stroke-dasharray', strokeDasharray]);\n      }\n      if(strokeLinecap !== 'butt') {\n        props.push(['stroke-linecap', strokeLinecap]);\n      }\n      this.addGeom(tagName, props);\n    }\n  }\n\n  get points() {\n    return this.__points;\n  }\n  get controls() {\n    return this.__controls;\n  }\n  get origin() {\n    return this.__origin;\n  }\n}\n\nexport default Polyline;\n","import Geom from './Geom';\nimport mode from '../util/mode';\n\nclass Polygon extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 所有点的列表\n    this.__points = [];\n    if(Array.isArray(this.props.points)) {\n      this.__points = this.props.points;\n    }\n    // 控制点\n    this.__controls = [];\n    if(Array.isArray(this.props.controls)) {\n      this.__controls = this.props.controls;\n    }\n  }\n\n  render(renderMode) {\n    let {\n      isDestroyed,\n      originX,\n      originY,\n      display,\n      visibility,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n    } = super.render(renderMode);\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    let { width, height, ctx, points, controls } = this;\n    if(points.length < 3) {\n      return;\n    }\n    for(let i = 0, len = points.length; i < len; i++) {\n      if(!Array.isArray(points[i]) || points[i].length < 2) {\n        return;\n      }\n    }\n    let pts = [];\n    points.forEach(item => {\n      pts.push([\n        originX + item[0] * width,\n        originY + item[1] * height\n      ]);\n    });\n    let cls = [];\n    let hasControll;\n    controls.forEach(item => {\n      if(Array.isArray(item) && (item.length === 2 || item.length === 4)) {\n        let arr = [];\n        item.forEach((item2, i) => {\n          if(i === 0 || i === 2) {\n            arr.push(originX + item[i] * width);\n          }\n          else {\n            arr.push(originY + item[i] * height);\n          }\n        });\n        cls.push(arr);\n        hasControll = true;\n      }\n      else {\n        cls.push(null);\n      }\n    });\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.lineCap = strokeLinecap;\n      ctx.setLineDash(strokeDasharray.split(','));\n      ctx.beginPath();\n      ctx.moveTo(pts[0][0], pts[0][1]);\n      for(let i = 1, len = pts.length; i < len; i++) {\n        let point = pts[i];\n        let cl = cls[i - 1];\n        if(!cl) {\n          ctx.lineTo(point[0], point[1]);\n        }\n        else if(cl.length === 4) {\n          ctx.bezierCurveTo(cl[0], cl[1], cl[2], cl[3], point[0], point[1]);\n        }\n        else {\n          ctx.quadraticCurveTo(cl[0], cl[1], point[0], point[1]);\n        }\n      }\n      let cl = cls[pts.length - 1];\n      if(!cl) {\n        ctx.lineTo(pts[0][0], pts[0][1]);\n      }\n      else if(cl.length === 4) {\n        ctx.bezierCurveTo(cl[0], cl[1], cl[2], cl[3], pts[0][0], pts[0][1]);\n      }\n      else {\n        ctx.quadraticCurveTo(cl[0], cl[1], pts[0][0], pts[0][1]);\n      }\n      ctx.fill();\n      if(strokeWidth > 0) {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let props = [];\n      let tagName;\n      if(hasControll) {\n        let s = `M${pts[0][0]},${pts[0][1]}`;\n        for(let i = 1, len = pts.length; i < len; i++) {\n          let point = pts[i];\n          let cl = cls[i - 1];\n          if(!cl) {\n            s += `L${point[0]},${point[1]}`;\n          }\n          else if(cl.length === 4) {\n            s += `C${cl[0]},${cl[1]} ${cl[2]},${cl[3]} ${point[0]},${point[1]}`;\n          }\n          else {\n            s += `Q${cl[0]},${cl[1]} ${point[0]},${point[1]}`;\n          }\n        }\n        let cl = cls[pts.length - 1];\n        if(!cl) {\n          s += `L${pts[0][0]},${pts[0][1]}`;\n        }\n        else if(cl.length === 4) {\n          s += `C${cl[0]},${cl[1]} ${cl[2]},${cl[3]} ${pts[0][0]},${pts[0][1]}`;\n        }\n        else {\n          s += `Q${cl[0]},${cl[1]} ${pts[0][0]},${pts[0][1]}`;\n        }\n        props.push(['d', s]);\n        tagName = 'path';\n      }\n      else {\n        let s = '';\n        for(let i = 0, len = pts.length; i < len; i++) {\n          let point = pts[i];\n          s += `${point[0]},${point[1]} `;\n        }\n        props.push(['points', s]);\n        tagName = 'polygon';\n      }\n      props = props.concat([\n        ['fill', fill],\n        ['stroke', stroke],\n        ['stroke-width', strokeWidth]\n      ]);\n      if(strokeDasharray.length) {\n        props.push(['stroke-dasharray', strokeDasharray]);\n      }\n      if(strokeLinecap !== 'butt') {\n        props.push(['stroke-linecap', strokeLinecap]);\n      }\n      this.addGeom(tagName, props);\n    }\n  }\n\n  get points() {\n    return this.__points;\n  }\n  get controls() {\n    return this.__controls;\n  }\n}\n\nexport default Polygon;\n","import Geom from './Geom';\nimport mode from '../util/mode';\n\nconst OFFSET = Math.PI * 0.5;\n\nfunction getCoordsByDegree(x, y, r, d) {\n  d = d % 360;\n  if(d >= 0 && d < 90) {\n    return [\n      x + Math.sin(d * Math.PI / 180) * r,\n      y - Math.cos(d * Math.PI / 180) * r\n    ];\n  }\n  else if(d >= 90 && d < 180) {\n    return [\n      x + Math.cos((d - 90) * Math.PI / 180) * r,\n      y + Math.sin((d - 90) * Math.PI / 180) * r,\n    ];\n  }\n  else if(d >= 180 && d < 270) {\n    return [\n      x - Math.cos((270 - d) * Math.PI / 180) * r,\n      y + Math.sin((270 - d) * Math.PI / 180) * r,\n    ];\n  }\n  else {\n    return [\n      x - Math.sin((360 - d) * Math.PI / 180) * r,\n      y - Math.cos((360 - d) * Math.PI / 180) * r,\n    ];\n  }\n}\n\nclass Sector extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 角度\n    this.__begin = 0;\n    this.__end = 0;\n    if(this.props.begin) {\n      this.__begin = parseFloat(this.props.begin);\n      if(isNaN(this.begin)) {\n        this.__begin = 0;\n      }\n    }\n    if(this.props.end) {\n      this.__end = parseFloat(this.props.end);\n      if(isNaN(this.end)) {\n        this.__end = 0;\n      }\n    }\n    // 半径0~1，默认1\n    this.__r = 1;\n    if(this.props.r) {\n      this.__r = parseFloat(this.props.r);\n      if(isNaN(this.r)) {\n        this.__r = 1;\n      }\n    }\n    // 扇形两侧是否有边\n    this.__edge = false;\n    if(this.props.edge !== undefined) {\n      this.__edge = !!this.props.edge;\n    }\n    // 扇形大于180°时，是否闭合两端\n    this.__closure = false;\n    if(this.props.closure !== undefined) {\n      this.__closure = !!this.props.closure;\n    }\n  }\n\n  render(renderMode) {\n    let {\n      isDestroyed,\n      cx,\n      cy,\n      display,\n      visibility,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n    } = super.render(renderMode);\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    let { width, height, ctx, begin, end, r, edge, closure } = this;\n    if(begin === end) {\n      return;\n    }\n    r *= Math.min(width, height) * 0.5;\n    let x1, y1, x2, y2;\n    [ x1, y1 ] = getCoordsByDegree(cx, cy, r, begin);\n    [ x2, y2 ] = getCoordsByDegree(cx, cy, r, end);\n    let large = (end - begin) > 180 ? 1 : 0;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.lineCap = strokeLinecap;\n      ctx.setLineDash(strokeDasharray.split(','));\n      ctx.beginPath();\n      ctx.arc(cx, cy, r, begin * Math.PI / 180 - OFFSET, end * Math.PI / 180 - OFFSET);\n      if(edge) {\n        if(!large || !closure) {\n          ctx.lineTo(cx, cy);\n        }\n        ctx.lineTo(x1, y1);\n        if(strokeWidth > 0) {\n          ctx.stroke();\n        }\n      }\n      else {\n        if(strokeWidth > 0) {\n          ctx.stroke();\n        }\n        if(!large || !closure) {\n          ctx.lineTo(cx, cy);\n        }\n        ctx.lineTo(x1, y1);\n      }\n      ctx.fill();\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      if(edge) {\n        let props = [\n          ['d', closure\n            ? `M${x1} ${y1} A${r} ${r} 0 ${large} 1 ${x2} ${y2} z`\n            : `M${cx} ${cy} L${x1} ${y1} A${r} ${r} 0 ${large} 1 ${x2} ${y2} z`],\n          ['fill', fill],\n          ['stroke', stroke],\n          ['stroke-width', strokeWidth]\n        ];\n        if(strokeDasharray.length) {\n          props.push(['stroke-dasharray', strokeDasharray]);\n        }\n        if(strokeLinecap !== 'butt') {\n          props.push(['stroke-linecap', strokeLinecap]);\n        }\n        this.addGeom('path', props);\n      }\n      else {\n        this.addGeom('path', [\n          ['d', closure\n            ? `M${x1},${y1} A${r} ${r} 0 ${large} 1 ${x2},${y2} z`\n            : `M${cx},${cy} L${x1},${y1} A${r} ${r} 0 ${large} 1 ${x2},${y2} z`],\n          ['fill', fill]\n        ]);\n        if(strokeWidth > 0) {\n          let props = [\n            ['d', `M${x1},${y1} A${r},${r} 0 ${large} 1 ${x2},${y2}`],\n            ['fill', 'transparent'],\n            ['stroke', stroke],\n            ['stroke-width', strokeWidth]\n          ];\n          if(strokeDasharray.length) {\n            props.push(['stroke-dasharray', strokeDasharray]);\n          }\n          if(strokeLinecap !== 'butt') {\n            props.push(['stroke-linecap', strokeLinecap]);\n          }\n          this.addGeom('path', props);\n        }\n      }\n    }\n  }\n\n  get begin() {\n    return this.__begin;\n  }\n  get end() {\n    return this.__end;\n  }\n  get r() {\n    return this.__r;\n  }\n  get edge() {\n    return this.__edge;\n  }\n  get closure() {\n    return this.__closure;\n  }\n}\n\nexport default Sector;\n","import Geom from './Geom';\nimport mode from '../util/mode';\n\nclass Rect extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 圆角\n    this.__rx = 0;\n    if(this.props.rx) {\n      this.__rx = parseFloat(this.props.rx);\n      if(isNaN(this.rx)) {\n        this.__rx = 0;\n      }\n    }\n    this.__ry = 0;\n    if(this.props.ry) {\n      this.__ry = parseFloat(this.props.ry);\n      if(isNaN(this.ry)) {\n        this.__ry = 0;\n      }\n    }\n  }\n\n  render(renderMode) {\n    let {\n      isDestroyed,\n      originX,\n      originY,\n      display,\n      visibility,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n    } = super.render(renderMode);\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    let { width, height, ctx, rx, ry } = this;\n    rx = Math.min(rx, 0.5);\n    ry = Math.min(ry, 0.5);\n    rx *= width;\n    ry *= height;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.lineCap = strokeLinecap;\n      ctx.setLineDash(strokeDasharray.split(','));\n      ctx.beginPath();\n      if(rx === 0 && ry === 0) {\n        ctx.moveTo(originX, originY);\n        ctx.lineTo(originX + width, originY);\n        ctx.lineTo(originX + width, originY + height);\n        ctx.lineTo(originX, originY + height);\n        ctx.lineTo(originX, originY);\n      }\n      else {\n        let ox = rx * .5522848;\n        let oy = ry * .5522848;\n        ctx.moveTo(originX + rx, originY);\n        ctx.lineTo(originX + width - rx, originY);\n        ctx.bezierCurveTo(originX + width + ox - rx, originY, originX + width, originY + ry - oy, originX + width, originY + ry);\n        ctx.lineTo(originX + width, originY + height - ry);\n        ctx.bezierCurveTo(originX + width, originY + height + oy - ry, originX + width + ox - rx, originY + height, originX + width - rx, originY + height);\n        ctx.lineTo(originX + rx, originY + height);\n        ctx.bezierCurveTo(originX + rx - ox, originY + height, originX, originY + height + oy - ry, originX, originY + height - ry);\n        ctx.lineTo(originX, originY + ry);\n        ctx.bezierCurveTo(originX, originY + ry - oy, originX + rx - ox, originY, originX + rx, originY);\n      }\n      ctx.fill();\n      if(strokeWidth > 0) {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let props = [\n        ['x', originX],\n        ['y', originY],\n        ['width', width],\n        ['height', height],\n        ['fill', fill],\n        ['stroke', stroke],\n        ['stroke-width', strokeWidth]\n      ];\n      if(rx) {\n        props.push(['rx', rx]);\n      }\n      if(ry) {\n        props.push(['ry', ry]);\n      }\n      if(strokeDasharray.length) {\n        props.push(['stroke-dasharray', strokeDasharray]);\n      }\n      if(strokeLinecap !== 'butt') {\n        props.push(['stroke-linecap', strokeLinecap]);\n      }\n      this.addGeom('rect', props);\n    }\n  }\n\n  get rx() {\n    return this.__rx;\n  }\n  get ry() {\n    return this.__ry;\n  }\n}\n\nexport default Rect;\n","import Geom from './Geom';\nimport mode from '../util/mode';\n\nclass Circle extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 半径0~1，默认1\n    this.__r = 1;\n    if(this.props.r) {\n      this.__r = parseFloat(this.props.r);\n      if(isNaN(this.r)) {\n        this.__r = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    let {\n      isDestroyed,\n      cx,\n      cy,\n      display,\n      visibility,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n    } = super.render(renderMode);\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    let { width, height, ctx, r } = this;\n    r *= Math.min(width, height) * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.lineCap = strokeLinecap;\n      ctx.setLineDash(strokeDasharray.split(','));\n      ctx.beginPath();\n      ctx.arc(cx, cy, r, 0, 2 * Math.PI);\n      ctx.fill();\n      if(strokeWidth > 0) {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let props = [\n        ['cx', cx],\n        ['cy', cy],\n        ['r', r],\n        ['fill', fill],\n        ['stroke', stroke],\n        ['stroke-width', strokeWidth]\n      ];\n      if(strokeDasharray.length) {\n        props.push(['stroke-dasharray', strokeDasharray]);\n      }\n      if(strokeLinecap !== 'butt') {\n        props.push(['stroke-linecap', strokeLinecap]);\n      }\n      this.addGeom('circle', props);\n    }\n  }\n\n  get r() {\n    return this.__r;\n  }\n}\n\nexport default Circle;\n","import Geom from './Geom';\nimport mode from '../util/mode';\n\nclass Ellipse extends Geom {\n  constructor(tagName, props) {\n    super(tagName, props);\n    // 半径0~1，默认1\n    this.__rx = 1;\n    if(this.props.rx) {\n      this.__rx = parseFloat(this.props.rx);\n      if(isNaN(this.rx)) {\n        this.__rx = 1;\n      }\n    }\n    this.__ry = 1;\n    if(this.props.ry) {\n      this.__ry = parseFloat(this.props.ry);\n      if(isNaN(this.ry)) {\n        this.__ry = 1;\n      }\n    }\n  }\n\n  render(renderMode) {\n    let {\n      isDestroyed,\n      cx,\n      cy,\n      display,\n      visibility,\n      fill,\n      stroke,\n      strokeWidth,\n      strokeDasharray,\n      strokeLinecap,\n    } = super.render(renderMode);\n    if(isDestroyed || display === 'none' || visibility === 'hidden') {\n      return;\n    }\n    let { width, height, ctx, rx, ry } = this;\n    rx *= width * 0.5;\n    ry *= height * 0.5;\n    if(renderMode === mode.CANVAS) {\n      ctx.strokeStyle = stroke;\n      ctx.lineWidth = strokeWidth;\n      ctx.fillStyle = fill;\n      ctx.lineCap = strokeLinecap;\n      ctx.setLineDash(strokeDasharray.split(','));\n      ctx.beginPath();\n      if(ctx.ellipse) {\n        ctx.ellipse(cx, cy, rx, ry, 0, 0, 2 * Math.PI);\n      }\n      else {\n        let ox = rx * .5522848;\n        let oy = ry * .5522848;\n        ctx.moveTo(cx - rx, cy);\n        ctx.bezierCurveTo(cx - rx, cy - oy, cx - ox, cy - ry, cx, cy - ry);\n        ctx.bezierCurveTo(cx + ox, cy - ry, cx + rx, cy - oy, cx + rx, cy);\n        ctx.bezierCurveTo(cx + rx, cy + oy, cx + ox, cy + ry, cx, cy + ry);\n        ctx.bezierCurveTo(cx - ox, cy + ry, cx - rx, cy + oy, cx - rx, cy);\n      }\n      ctx.fill();\n      if(strokeWidth > 0) {\n        ctx.stroke();\n      }\n      ctx.closePath();\n    }\n    else if(renderMode === mode.SVG) {\n      let props = [\n        ['cx', cx],\n        ['cy', cy],\n        ['rx', rx],\n        ['ry', ry],\n        ['fill', fill],\n        ['stroke', stroke],\n        ['stroke-width', strokeWidth]\n      ];\n      if(strokeDasharray.length) {\n        props.push(['stroke-dasharray', strokeDasharray]);\n      }\n      if(strokeLinecap !== 'butt') {\n        props.push(['stroke-linecap', strokeLinecap]);\n      }\n      this.addGeom('ellipse', props);\n    }\n  }\n\n  get rx() {\n    return this.__rx;\n  }\n  get ry() {\n    return this.__ry;\n  }\n}\n\nexport default Ellipse;\n","import matrix from './matrix';\n\n// 一条边相对于自己开始点的角度\nfunction calDeg(x1, y1, x2, y2) {\n  return Math.atan((y2 - y1) / (x2 - x1));\n}\n\nfunction rotate(theta) {\n  let sin = Math.sin(theta);\n  let cos = Math.cos(theta);\n  let t = matrix.identity();\n  t[0] = t[5] = cos;\n  t[1] = sin;\n  t[4] = -sin;\n  return t;\n}\n\nfunction transform(source, target) {\n  let [sx1, sy1, sx2, sy2, sx3, sy3] = source;\n  let [tx1, ty1, tx2, ty2, tx3, ty3] = target;\n  // 第0步，将目标三角第1个a点移到和源三角一样的原点上\n  let dx = tx1 - sx1;\n  let dy = tx2 - sx2;\n  tx1 -= dx;\n  ty1 -= dy;\n  tx2 -= dx;\n  ty2 -= dy;\n  tx3 -= dx;\n  ty3 -= dy;\n  let m = matrix.identity();\n  // 第1步，以第1条边AB为基准，将其贴合x轴上，为后续倾斜不干扰做准备\n  let theta = calDeg(sx1, sy1, sx2, sy2);\n  let t = rotate(-theta);\n  m = matrix.multiply(t, m);\n  // 第2步，以第1条边AB为基准，缩放至目标ab相同长度\n  let ls = Math.sqrt(Math.pow(sx2 - sx1, 2) + Math.pow(sy2 - sy1, 2));\n  let lt = Math.sqrt(Math.pow(tx2 - tx1, 2) + Math.pow(ty2 - ty1, 2));\n  let scale = lt / ls;\n  t = matrix.identity();\n  t[0] = t[5] = scale;\n  m = matrix.multiply(t, m);\n  // 第3步，缩放y，先将目标旋转到x轴上，再变换坐标计算\n  theta = calDeg(tx1, ty1, tx2, ty2);\n  t = rotate(-theta);\n  // 目标三角反向旋转至x轴后的第2、3点坐标，求得旋转角度\n  let [ax2, ay2] = matrix.calPoint([tx2, ty2], matrix.t43(t));\n  let [ax3, ay3] = matrix.calPoint([tx3, ty3], matrix.t43(t));\n  let alpha = Math.atan((ax2- ax3) / (ay3 - ay2));\n  let by3 = matrix.calPoint([sx3, sy3], matrix.t43(m))[1];\n  // 缩放y\n  scale = ay3 / by3;\n  t = matrix.identity();\n  t[5] = scale;\n  m = matrix.multiply(t, m);\n  // 第4步，x轴倾斜，第3点的x/y的tan值\n  let [x3, y3] = matrix.calPoint([sx3, sy3], matrix.t43(m));\n  theta = Math.atan((ax3 - x3) / y3);\n  t = matrix.identity();\n  t[4] = Math.tan(theta);\n  m = matrix.multiply(t, m);\n  // 第5步，再次旋转，角度为目标旋转到x轴的负值\n  t = rotate(-alpha);\n  m = matrix.multiply(t, m);\n  // 第6步，移动第一个点的差值\n  t = matrix.identity();\n  t[12] = dx;\n  t[13] = dy;\n  m = matrix.multiply(t, m);\n  return matrix.t43(m);\n}\n\nexport default {\n  transform,\n};\n","import matrix from './matrix';\nimport tar from './tar';\n\nexport default {\n  matrix,\n  tar,\n};\n","import Dom from './node/Dom';\nimport Img from './node/Img';\nimport Root from './node/Root';\nimport mode from './util/mode';\nimport Geom from './geom/Geom';\nimport Line from './geom/Line';\nimport Polyline from './geom/Polyline';\nimport Polygon from './geom/Polygon';\nimport Sector from './geom/Sector';\nimport Rect from './geom/Rect';\nimport Circle from './geom/Circle';\nimport Ellipse from './geom/Ellipse';\nimport Component from './node/Component';\nimport Event from './util/Event';\nimport sort from './util/sort';\nimport util from './util/util';\nimport parse from './util/parse';\nimport inject from './util/inject';\nimport css from './style/css';\nimport frame from './animate/frame';\nimport easing from './animate/easing';\nimport level from './animate/level';\nimport math from './math/index';\n\nGeom.register('$line', Line);\nGeom.register('$polyline', Polyline);\nGeom.register('$polygon', Polygon);\nGeom.register('$sector', Sector);\nGeom.register('$rect', Rect);\nGeom.register('$circle', Circle);\nGeom.register('$ellipse', Ellipse);\n\nlet karas = {\n  render(root, dom) {\n    if(!(root instanceof Root)) {\n      throw new Error('render root muse be canvas or svg');\n    }\n    if(dom) {\n      root.appendTo(dom);\n    }\n    return root;\n  },\n  createVd(tagName, props, children) {\n    if(['canvas', 'svg'].indexOf(tagName) > -1) {\n      return new Root(tagName, props, children);\n    }\n    if(Dom.isValid(tagName)) {\n      if(tagName === 'img') {\n        return new Img(tagName, props);\n      }\n      return new Dom(tagName, props, children);\n    }\n    throw new Error('can not use marker: ' + tagName);\n  },\n  createGm(tagName, props) {\n    let klass = Geom.getRegister(tagName);\n    return new klass(tagName, props);\n  },\n  createCp(cp, props, children) {\n    return new cp(props, children);\n  },\n  parse(json, dom) {\n    let data = {\n      animate: [],\n    };\n    json = util.clone(json);\n    let vd = parse(this, json, data);\n    this.render(vd, dom);\n    data.animate.forEach(item => {\n      let { target, animate } = item;\n      if(Array.isArray(animate)) {\n        animate.forEach(animate => {\n          target.animate(animate.value, animate.options);\n        });\n      }\n      else {\n        target.animate(animate.value, animate.options);\n      }\n    });\n    return vd;\n  },\n  Root,\n  Dom,\n  Img,\n  Geom,\n  mode,\n  Component,\n  Event,\n  sort,\n  util,\n  inject,\n  css,\n  frame,\n  easing,\n  level,\n  math,\n};\n\nif(typeof window != 'undefined') {\n  window.karas = karas;\n}\n\nexport default karas;\n","import util from './util';\n\nfunction parse(karas, json, data) {\n  if(util.isBoolean(json) || util.isNil(json) || util.isString(json) || util.isNumber(json)) {\n    return json;\n  }\n  let { tagName, props = {}, children = [], animate } = json;\n  let animation;\n  if(animate) {\n    animation = {\n      animate,\n    };\n    data.animate.push(animation);\n  }\n  let vd;\n  if(tagName.charAt(0) === '$') {\n    vd = karas.createGm(tagName, props);\n  }\n  else {\n    vd = karas.createVd(tagName, props, children.map(item => parse(karas, item, data)));\n  }\n  if(animation) {\n    animation.target = vd;\n  }\n  return vd;\n}\n\nexport default parse;\n"],"names":["AUTO","PX","PERCENT","POSITION","NUMBER","INHERIT","DEG","Node","__x","__y","__ox","__oy","__width","__height","__prev","__next","__ctx","__defs","__parent","__computedStyle","__baseLine","__virtualDom","__host","diff","isLayout","__isDestroyed","this","x","ox","y","oy","host","root","parent","tagName","canvas","svg","hasOwnProperty","__style","CANVAS","SVG","toString","isType","type","obj","call","isNumber","stringify","s","isNil","v","joinVd","vd","props","forEach","item","content","children","bb","isMask","opacity","joinTransform","transform","mask","joinDef","def","uuid","joinItem","util","isObject","isString","isFunction","isBoolean","isDate","joinSourceArray","arr","res","i","len","length","Array","isArray","encodeHtml","prop","replace","joinVirtualDom","defs","d2r","n","Math","PI","rgb2int","color","charAt","slice","push","parseInt","c","match","parseFloat","arr2hash","hash","list","Object","keys","j","k","hash2arr","clone","_typeof","Date","mergeImageData","bottom","top","bd","data","td","rb","gb","ab","rt","gt","bt","at","alpha1","alpha2","alpha3","r","g","b","a","identity","m","multiply","row","col","t43","calPoint","point","transformPoint","matrix","d","vectorProduct","x1","y1","x2","y2","convert","m3","calMatrix","transformOrigin","ow","oh","w","h","unit","value","normalize","t","tan","sin","cos","calOrigin","tfo","pointInQuadrilateral","x3","y3","x4","y4","mergeMatrix","m1","m2","getColorStop","p","start","end","per","prev","splice","allBefore","allAfter","first","last","c1","c2","r1","g1","b1","a1","r2","g2","b2","a2","l1","abs","l2","floor","getCsLimit","next","p1","p2","getCsStartLimit","getCsEndLimit","parseGradient","gradient","exec","o","deg","map","split","test","str","indexOf","getLinearDeg","getLinear","cx","cy","theta","x0","y0","calLinearCoords","stop","getRadial","iw","ih","xl","yl","size","by","min","sqrt","pow","max","calRadialRadius","cx2","cy2","calFitDashed","total","bs","be","smin","smax","dmin","dmax","ps","pd","outer","num","calDashed","style","m4","bw","calPoints","borderWidth","borderStyle","deg1","deg2","direction","points","main2","isLast","main1","cross1","cross2","swap","temp","compare","quickSort","begin","seq","arial","lhr","car","blr","mdr","lgr","parserOneBorder","key","calUnit","preCompute","currentStyle","computedStyle","parentComputedStyle","isRoot","fontStyle","fontWeight","fontSize","fontFamily","computedFontSize","calLineHeight","xom","lineHeight","pl","calNormalLineHeight","font","calRelativePercent","reset","background","gd","backgroundImage","bgc","backgroundColor","flex","flexGrow","flexShrink","flexBasis","border","borderTop","borderRight","borderBottom","borderLeft","margin","marginTop","marginRight","marginBottom","marginLeft","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","arr1","arr2","left","center","right","isNaN","strokeDasharray","join","fill","stroke","compute","textAlign","repaint","setFontStyle","getBaseLine","normal","calRelative","isWidth","calAbsolute","LineBox","__content","renderMode","ctx","css","mode","fillText","Text","__lineBoxes","__charWidthList","__charWidth","__textWidth","charWidthList","wait","MEASURE_TEXT","cache","CHAR_WIDTH_CACHE","sum","needMeasure","char","mw","charWidth","measureText","width","isVirtual","maxX","isDestroyed","lineBoxes","display","count","lineBox","_this2","__offsetX","__offsetY","fillStyle","render","virtualDom","textWidth","baseLine","__renderMode","combo","dom","json","klass","id","sort","ks","comboClass","len2","hasStarClass","hasStarId","hasStarIdClass","dealStyle","_v","_p","parse","matchSel","selList","sel","parentStyle","_this","sibling","prevSelList","item2","pa","pb","splitClass","trim","mergeCss","Event","__eHash","handle","self","on","once","cb","apply","off","emit","arguments","event","fns","fn","DOM","position","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","height","flexDirection","justifyContent","alignItems","visibility","GEOM","strokeWidth","strokeLinecap","geom","REPAINT","REFLOW","Component","constructor","__tagName","__props","__children","__shadowRoot","__ref","__state","state","shadowRoot","setRefreshLevel","level","__traverse","__init","addRefreshTask","sr","isGeom","__traverseCss","toLowerCase","listener","__hasInit","defineProperty","get","__destroy","e","force","__emitEvent","target","option","animate","__measure","__computed","__repaint","prototype","inject","html","chars","inline","div","document","createElement","body","appendChild","innerHTML","cns","childNodes","node","window","getComputedStyle","text","__measureCb","removeChild","measureImg","url","img","Image","onload","success","source","onerror","substr","location","hostname","crossOrigin","src","warn","console","requestAnimationFrame","bind","setTimeout","now","performance","__inFrame","__task","__afterFrame","task","delta","afterCb","offFrame","onFrame","NEWTON_ITERATIONS","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","LinearEasing","bezier","mX1","mY1","mX2","mY2","Error","sampleValues","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentX","currentT","binarySubdivide","easing","linear","easeIn","easeOut","ease","easeInOut","cubicBezier","controlA","controlB","rx","ry","controls","STYLE","KEY_COLOR","KEY_GRADIENT","COLOR_HASH","LENGTH_HASH","GRADIENT_HASH","GRADIENT_TYPE","radial","color2array","equalStyle","k1","v1","v2","av","bv","ai","bi","lastStyle","animateStyle","restore","framing","current","record","st","offset","transition","calFrame","ts","pExist","nExist","pi","ni","pv","nv","undefined","calDiff","getLevel","Animation","options","__id","__target","__list","nl","l","__options","duration","op","__duration","__delay","delay","__endDelay","endDelay","iterations","Infinity","__iterations","__fps","fps","__fill","__direction","__frames","__framesR","__playbackRate","playbackRate","__startTime","__offsetTime","__pauseTime","__lastFpsTime","__pending","__playState","__playCount","__cb","__diffTime","frames","framesR","__animateStyle","__record","reverse","alternate","listR","__fin","KARAS_ANIMATION_FRAME","KARAS_ANIMATION_FINISH","frame","time","__cancelTask","pending","pauseTime","playCount","init","_this3","offsetTime","__lastTime","__lastIndex","backwards","both","needRefresh","currentFrames","isEven","binarySearch","middle","__lastStyle","percent","timingFunction","calStyle","forwards","nextFrame","KARAS_ANIMATION_PAUSE","playState","_this4","KARAS_ANIMATION_CANCEL","delRefreshTask","renderBorder","beginPath","moveTo","lineTo","closePath","addBorder","Xom","__listener","__class","__matrix","__matrixEvent","__animationList","child","__mpWidth","mp","fake","__mp","outerWidth","outerHeight","__layoutBlock","__layoutFlex","__layoutInline","fixedWidth","fixedHeight","matrixEvent","tf","setTransform","sx","sy","opa","globalAlpha","addTransform","__gradient","rect","addBackground","atan","cache1","cache2","hasMask","__getImageData","__clear","globalCompositeOperation","__putImageData","maskId","ref","owner","animationList","__stopPropagation","childWillResponse","__touchstartTarget","__stopImmediatePropagation","willResponseEvent","__hasEmitted","vs","__getLg","__getRg","lg","createLinearGradient","addColorStop","add","rg","createRadialGradient","animation","play","LineGroup","__calBaseLine","REGISTER","Geom","__isMask","isDirectionRow","main","__preLayout","originX","originY","__preRender","xi","yi","$0","$1","$2","__maskId","name","hasRegister","TAG_NAME","INLINE","Dom","__flowChildren","__absChildren","__lineGroups","__traverseChildren","flowChildren","__tryLayInline","isRecursion","__calAutoBasis","min2","max2","__layout","w2","__calMp","h2","lineGroups","lineGroup","verticalAlign","horizonAlign","__marginAuto","growList","shrinkList","basisList","minList","growSum","shrinkSum","basisSum","maxSum","maxCross","isOverflow","shrink","grow","overflow","free","between","around","_this5","absChildren","container","onlyRight","onlyBottom","fixedTop","fixedRight","fixedBottom","fixedLeft","__layoutAbs","__renderAsMask","__renderByMask","filter","CACHE","Img","__error","__source","__imgWidth","__imgHeight","lv","pts","strokeStyle","lineWidth","arc","__addGeom","drawImage","elem","ovd","nvd","od","nd","ol","diffDef","removeAt","insertAt","diffDefs","diffBb","diffD2D","insertAdjacentHTML","parentNode","setAttribute","removeAttribute","diffItem","joinStop","diffChild","replaceWith","firstChild","lastChild","diffD2G","diffT2T","diffG2D","equalArr","getAttribute","diffG2G","diffItemSelf","obb","nbb","isText","textContent","index","Defs","Root","__node","__mw","__mh","mix","touches","getBoundingClientRect","clientX","clientY","stopPropagation","stopImmediatePropagation","preventDefault","querySelector","getDom","__initProps","__refreshLevel","nodeName","toUpperCase","__genHtml","__uuid","getInstance","getPropertyValue","getContext","refresh","__root","__vd","addEventListener","initEvent","clear","KARAS_BEFORE_REFRESH","KARAS_REFRESH","getImageData","putImageData","clearRect","Line","__x1","__y1","__x2","__y2","__controlA","__controlB","cx1","cy1","curve","lineCap","setLineDash","bezierCurveTo","quadraticCurveTo","addGeom","Polyline","__points","origin","__origin","__controls","hasControll","cls","cl","Polygon","concat","OFFSET","getCoordsByDegree","Sector","__begin","__end","__r","__edge","edge","__closure","closure","large","Rect","__rx","__ry","Circle","Ellipse","ellipse","calDeg","rotate","sx1","sy1","sx2","sy2","sx3","sy3","tx1","ty1","tx2","ty2","tx3","ty3","dx","dy","ls","scale","ax2","ay2","ax3","ay3","alpha","tar","register","karas","appendTo","createVd","isValid","createGm","getRegister","createCp","cp","math"],"mappings":"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"}